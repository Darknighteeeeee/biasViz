  Please submit a pull request to https://github.com/openstf/stf-browser-db.

You should see the application bundle ID in STF's log output. IIRC, it should say something like "Unmapped browser ..."  All of them should work. I would suggest providing as many details as you
can about the devices (& carriers) that are not working.

On Mon, Jul 23, 2018 at 4:57 PM, newbie-qa <notifications@github.com> wrote:

> First thank you for this great tool! :)
>
> *My issue:*
> I have 7 devices attached to my local server, somehow some of the phones
> are detected with phone numbers and others not.
>
> It is helpful to see the numbers for each attached device and would be
> good if all of them displays the number. Is this issue device related?
>
> Many thanks!
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/918>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_TrQCpNK-KIz8Kt9tAPFn5h3KlHaks5uJYHegaJpZM4Vah-M>
> .
>
  Please don’t remove the issue template, we need the details it asks you to provide.

Which device is this?  Great patch. Thanks @obrie! I have a spotty internet connection right now but will try to release a new version soon.  That shouldn't happen. You should be able to just plug in new devices without having to restart. What's the error you're seeing? Please provide as much context as possible.  Please see the answer in #909.  I would try a different adb version. Some Linux distros have broken and/or old adb package for armv7.

Also, sometimes on some phones you have to choose MTP mode for USB, and on some you need to choose Camera mode. Maybe try that too.

Also, RPi just isn't a very reliable platform. Maybe attach a powered USB hub to the pi and see if that makes any difference? Worth a try. Hmmmm but why does it show up in adb as a usb device then?

Anyway it looks like the device hasn’t compl ted the initial handshake because you can’t see the product, model and so on. Not sure what you’re doing though, maybe it’s ok Btw you might want to start adb with:

`ADB_TRACE=1 adb server nodaemon`

(Or perhaps it was `ADB_TRACE=all`)

Maybe you’ll see something there.  When you install STF, it builds a new resource cache. You have to clear the cache first if you change something. Run:

‘./node_modules/.bin/gulp clean’

Then try again.  Check out the [`--ldap-username-field`](https://github.com/openstf/stf/blob/b8388c75b31239a81834383564756df80a564cdb/lib/cli/auth-ldap/index.js) option. Maybe you need to change the value? Or, if it's just one user, perhaps the field has a weird value for just that user.  How does it change? Please provide the full output from STF. You can run `stf local 2>&1  | tee -a out.log` to capture the entire output.  Sounds good guys. Please update the issue if you find a way :)  I don't think that's a good idea. You can use the STF UI on a tablet, though, if that's what you want. Otherwise, if you want to run the whole STF, you can try but I don't think it'll be worth the effort.  Seems like it's an undocumented option: https://github.com/jaredhanson/passport-oauth2/issues/28

The `state: true` value should be added to `option.oauth` which is used here: https://github.com/openstf/stf/blob/master/lib/units/auth/oauth2/index.js#L23

Easiest way would be to add a new boolean flag, defaulting to true, here: https://github.com/openstf/stf/blob/master/lib/cli/auth-oauth2/index.js

How about you create a patch and send us a PR? :) This should be fixed and enabled by default in master now. Give it a go and see whether it works for you.  You can access the STF UI via the browser on your phone. Other than that, no.  Hmm interesting... I think we should avoid GPL dependencies. Maybe we could drop hipchat support entirely, I’m not sure if anyone’s using it anymore. I think a larger issue may be dependencies of dependencies, I’m sure there’s something unwanted in there. Maybe you could help us by trying to assemble a complete list?

Not sure about your second question right now. Thank you @jonsmirl! We’ll attempt to remove packery ASAP - I’m not 100% up to date on the client side so hopefully it’s not too big of a task. @jonsmirl We wouldn’t ever add GPL based dependencies. 
The version we are using of Packery is the old version which is MIT licensed, they changed to GPLv3 in later versions. 
If you’re uneasy just check their README git history, it’s there.

Of course we welcome PRs that remove that dependency. Personally I may prefer a slightly alternate wording, such as “Contains code contributed by Acme Corp.” This way it doesn’t seem like everything was contributed by Acme Corp, which while originally true, is unlikely to remain so over a long period of time. It may be annoying to new contributors if all changes or even additions (seemingly) automatically get credited to Acme Corp.  See #770 we will merge it when we can  No, you'd have to use something like UIAutomator for that.  In general we don't help with network issues because you know more about your own network than we possibly could. You're having some kind of a connectivity issue. It could be caused by many things such as incorrect configuration (e.g. messing up the connect-push/sub/pull options), incorrect IP addresses or ports, or just firewall issues.  Unfortunately that's not possible right now, screenshots are not stored anywhere. I think there may be a pull request or an issue with a usable patch if you search past issues. Other than that you'd have to create the functionality yourself. Yeah I meant the state of the UI. The list of screenshots is not stored anywhere persistent.  It does not. Look at past issues for more information.  I would recommend using NVM to install node. You’ll avoid all those permission issues. Use NVM. You’ll avoid all that trouble.  You should see two WebSockets when the screen is active. One for the app itself, and one just for the screen data.  The log message is not very good. What it means is that the provider unit was unable to connect to the processor (via triproxy) and receive instructions back. The provider then ignores the devices because it doesn’t know what to do with them. 99% of the time it’s some kind of a connectivity issue.  Doesn’t seem like your connect-sub/push are correct. They should refer to the other server.  I'm not sure whate exactly you mean, does it work for a while and then log you out?

~If it doesn't work at all, then perhaps you're using the wrong `--public-ip` option. Even though the option is called `--public-ip`, you should use whatever ip or hostname you're using to access STF. Perhaps you should specify `--public-ip phone.tecent.com` instead of an IP address.~ see below Actually I think my comment is wrong. I meant you should make sure to use the correct `--app-url`. Use the proper hostname here. You won't be able to access from both the IP address and the hostname at the same time, though.  It won't work. If you run two instances of ADB, one of them will take ownership of all devices, leaving the other one empty.

I'm not convinced you actually need two separate ports, though. I don't see why you couldn't use 5037 for both. Regardless of whether you want to do that, it just won't work - only one of the instances will get access to the USB device. So if you launch two processes, it'll only be visible in one. If you still want to try you can try having these open at the same time:

```
adb server nodaemon -P 5037
adb server nodaemon -P 5038
```

Then e.g. `adb -P 5038 shell echo 1`.  Please provide details like yourNode.js version.  Please ask something more specific. Otherwise it’s difficult to answer within a reasonable amount of time.  It's a font issue. I'm not sure if we have a solution for it yet but check out #740 and #852.  I think in that case perhaps you want to set up some kind of an SSO service, and use OAuth2 instead. Otherwise I don't think there's anything we can do - LDAP itself doesn't provide a feature like that.  Either your installation is broken or you are using an old version.  How many devices do you have connected on that machine?  I don't think it'll work very well but you have the rough idea. You're missing touch down and touch up, though. They're required. You may also need to delay some of the events so that they're not sent all at once.  Well, that doesn't really have anything to do with OpenSTF.

Sometimes it's present in `adb shell getprop`, you can try looking for it in there. You can also try `adb shell ip` or `adb shell ifconfig`, though I'm not sure right now whether those will work.  
Seems you don't have ACL to access 172.17.8.101:2379 or you haven't started etcd service on the server. @ChandrakalaTekriwal You can find the tech details on the website of etcd and K8S.  It verifies the user’s adb key. If you have access to an adb key that has been added to the system, you can get in. Otherwise you cannot, though as always there may be bugs.  logcat works after refreshing your page in web browser? (it will force websocket connection recreated)
Also check how many logcat processed started on your device when you restart logcat on web UI.  Seems minitouch can't work on Orange Pi. Which version of Android ROM did you install on Orange PI? Is there any security option in setup panel of Android 7.0? If yes, you can attempt to enable it.
BTW, I've booked an Orange Pi One Plus online, will update this issue after trying out it:)  `--allow-remote` though it isn't ideal - search past issues for details. It might be very slow.  Yes and no, but in practice no. You can search for past issues to find our previous responses. Search past issues. But like I said don’t expect too much.  Show your code. Look at https://github.com/openstf/stf/blob/master/lib/units/device/index.js. You’re not supposed to be able to require and use it directly. You have to call .consume() which then actually runs the function and returns a promise that resolves with the result.  Check the [CHANGELOG](https://github.com/openstf/stf/blob/master/CHANGELOG.md). Maybe that Mi Mix 2 fix also fixes your device. Try building master.  See --no-cleanup.  Read the README and search for past issues. If you’re sure you have all the dependencies installed, nuke your node_modules folder once and install again.  Can't help you with that. It's an issue with your environment. Maybe you ran out of memory during the build.  Why are you running that command? Where did you find it? Curious about the reason why you choose Kali Linux? Do you want to do pentest with STF?  IIRC that’s an issue on some, but not all, Windows machines. There should be other issue reports too, try searching for the older ones.  While it's possible to use Apache, we don't support it. Please understand that it's a lot of work to support an open source project, so we have to limit the scope somehow. We recommend nginx. If you want to use something else you're on your own.  Our device database hasn’t been updated for a long time because it’s a lot of work. You can fork the project and create your own device database if needed. Check out stf-device-db. Yes but we might not want to do that. There are entire apps, both free and paid, dedicated to displaying this information (and others like RAM/ROM). I feel like it could be an entire open source project by itself :)

I have nothing against a PR though. But most likely the functionality would live in a separate repo anyway.  Hello GitHub community,

after running
stf local --public-ip <my_public_ip> --allow-remote
I got following error:

(...)
The module '/usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node'
was compiled against a different Node.js version using
NODE_MODULE_VERSION 57. This version of Node.js requires
NODE_MODULE_VERSION 59. Please try re-compiling or re-installing
the module (for instance, using `npm rebuild` or `npm install`).
2018-04-04T19:30:12.824Z FTL/cli:local 1276 [*] Child process had an error ExitError: Exit code "1"
    at ChildProcess.<anonymous> (/usr/local/lib/node_modules/stf/lib/util/procutil.js:49:23)
    at ChildProcess.emit (events.js:180:13)
    at Process.ChildProcess._handle.onexit (internal/child_process.js:209:12)
2018-04-04T19:30:12.824Z INF/cli:local 1276 [*] Shutting down all child processes

I have tried both suggested options - npm install and npm rebuild but the problem remains. I use nvm to manage NodeJS and I currently use latest LTS release (NodeJS 8.11.1).

Here is output from stf doctor:

2018-04-04T19:34:12.751Z INF/cli:doctor 1412 [*] OS Arch: x64
2018-04-04T19:34:12.753Z INF/cli:doctor 1412 [*] OS Platform: linux
2018-04-04T19:34:12.753Z INF/cli:doctor 1412 [*] OS Platform: 4.9.0-6-amd64
2018-04-04T19:34:12.753Z INF/cli:doctor 1412 [*] Using Node 9.10.1
2018-04-04T19:34:12.786Z ERR/cli:doctor 1412 [*] Unexpected error checking ZeroMQ: Error: The module '/usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node'
was compiled against a different Node.js version using
NODE_MODULE_VERSION 57. This version of Node.js requires
NODE_MODULE_VERSION 59. Please try re-compiling or re-installing
the module (for instance, using `npm rebuild` or `npm install`).
2018-04-04T19:34:12.787Z INF/cli:doctor 1412 [*] Using RethinkDB 2.3.5~0stretch
2018-04-04T19:34:12.787Z INF/cli:doctor 1412 [*] Using GraphicsMagick 1.3.25
2018-04-04T19:34:12.787Z INF/cli:doctor 1412 [*] Using ProtoBuf 3.5.1
2018-04-04T19:34:12.788Z INF/cli:doctor 1412 [*] Using ADB 1.0.36

Thank you for any info, I have tried many different possible ways to solve it on my own, but after spending nearly two afternoons on this issue, I feel kinda helpless.

Many thanks.  <!-- *Before creating an issue please make sure you are using the latest version of STF.* -->
Latest Docker Image of openstf
**What is the issue or idea you have?**
Issue : Device screen is not refreshed on STF,Interaction worksfine

**Does it only happen on a specific device? Please run `adb devices -l` and paste the corresponding row.**
I dont have the device right now,will add adb devices -l output tommorow.

Not a Device specific issue.
I checked with 3 devices
Pixel 8.1.0 
Samsung 5.1.1
and a Samsung nexus tab 6.0.1,
Verified on Chrome,Firefox latest versions.


**Please provide the steps to reproduce the issue.**
1.Connect device to a stf provider located at remote location.
2.Interact with the device from local machine with mouse from STF console

**What is the expected behavior?**
Action performed by mouse device on screen shoudl be refelected on STF device screen.
When I click browser refresh button the next screen is seen on the open STF device screen.
On the Actual device ,Interactions are working fine,no delay.

**Do you see errors or warnings in the `stf local` output? If so, please paste them or the full log here.**
stf local has no errors/warnings in stf app docker container

**Please run `stf doctor` and paste the output here.**
stf@pune-mobilefarm:/app$ stf doctor
2018-04-04T11:40:50.582Z INF/cli:doctor 31 [*] OS Arch: x64
2018-04-04T11:40:50.584Z INF/cli:doctor 31 [*] OS Platform: linux
2018-04-04T11:40:50.585Z INF/cli:doctor 31 [*] OS Platform: 4.4.0-116-generic
2018-04-04T11:40:50.585Z INF/cli:doctor 31 [*] Using Node 6.11.2
2018-04-04T11:40:50.665Z INF/cli:doctor 31 [*] Using ZeroMQ 4.1.4
2018-04-04T11:40:50.695Z ERR/cli:doctor 31 [*] RethinkDB is not installed (`rethinkdb` is missing)
2018-04-04T11:40:50.695Z ERR/cli:doctor 31 [*] ProtoBuf is not installed (`protoc` is missing)
2018-04-04T11:40:50.695Z ERR/cli:doctor 31 [*] ADB is not installed (`adb` is missing)
2018-04-04T11:40:51.090Z INF/cli:doctor 31 [*] Using GraphicsMagick 1.3.23

Setup
Machine A : Master
mobile@pune-mobilefarm:~/deploy-stf-docker-master$ sudo docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                    PORTS                    NAMES
e9581ea3e722        nginx               "nginx"                  25 minutes ago      Up 25 minutes                                      nginx
0f32394fcf3b        openstf/stf         "stf provider --na..."   12 days ago         Up 6 days                                          provider1
60d9c445318c        openstf/stf         "stf reaper dev --..."   12 days ago         Up 6 days                                          reaper
ff7aacb0bf39        openstf/stf         "stf websocket --p..."   12 days ago         Up 6 days                                          websocket
4cd99ffcf5b0        openstf/stf         "stf processor stf..."   12 days ago         Up 6 days                                          stf-processor
355a235774a2        openstf/stf         "stf app --port 31..."   12 days ago         Up 6 days                                          stf-app-3100
eeb5c76b9a7c        openstf/stf         "stf api --port 37..."   12 days ago         Up 6 days                                          stf-api
57ff20dc63ec        openstf/stf         "stf auth-mock --p..."   12 days ago         Up 6 days                 0.0.0.0:3200->3000/tcp   stf-auth-3200
13d4c20e3955        openstf/stf         "stf triproxy dev ..."   12 days ago         Up 6 days                                          triproxy-dev
8abc2f57c071        openstf/stf         "stf triproxy app ..."   12 days ago         Up 6 days                                          triproxy-app
7016cdf82f8a        openstf/stf         "stf storage-temp ..."   12 days ago         Exited (255) 6 days ago   0.0.0.0:3500->3000/tcp   storage-temp-3500
8ee3fea4eb0c        openstf/stf         "stf storage-plugi..."   12 days ago         Up 6 days                 0.0.0.0:3400->3000/tcp   storage-plugin-image-3400
bbf52afd19d3        openstf/stf         "stf storage-plugi..."   12 days ago         Up 6 days                 0.0.0.0:3300->3000/tcp   storage-plugin-apk-3300
ca7574e3e691        openstf/stf         "stf migrate"            12 days ago         Exited (0) 12 days ago                             stf-migrate
0c32aa221283        rethinkdb           "rethinkdb --bind ..."   12 days ago         Up 6 days                                          rethinkdb

Slave/Remote machine:
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS               NAMES
c99e65f0767a        openstf/stf         "stf provider --na..."   25 hours ago        Up 25 hours                             provider2
55e1c6bc1b4b        nginx               "nginx"                  25 hours ago        Created                                 nginx

Provider command on Slave:
docker rm -f lasvegas
docker run -d --name lasvegas --net host openstf/stf stf provider --name "lasvegas" --connect-sub tcp://${MASTERIP}:7250 --connect-push tcp://${MASTERIP}:7270 --storage-url http://${MASTERIP} min-port=15000 --max-port=25000 --heartbeat-interval 20000 --screen-ws-url-pattern "ws://${MASTERIP}/d/mumbai/<%= serial %>/<%= publicPort %>/"

nginx docker configuration-

    location ~ "^/d/losangeles/([^/]+)/(?<port>[0-9]{5})/$" {
      proxy_pass http://masterip:$port/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection $connection_upgrade;
      proxy_set_header X-Forwarded-For $remote_addr;
      proxy_set_header X-Real-IP $remote_addr;
    }
      location ~ "^/d/lasvegas/([^/]+)/(?<port>[0-9]{5})/$" {
      proxy_pass http://slaveip:$port/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection $connection_upgrade;
      proxy_set_header X-Forwarded-For $remote_addr;
      proxy_set_header X-Real-IP $remote_addr;
    }

Slave Provider Logs : 

```
`2018-03-29T06:12:46.211Z INF/device:support:push 1654 [330042569d5282df] Sending output to "tcp://masterip:7270"
2018-03-29T06:12:46.216Z INF/device 1654 [330042569d5282df] Preparing device
2018-03-29T06:12:46.668Z INF/device:support:sub 1654 [330042569d5282df] Receiving input from "tcp://masterip:7250"
2018-03-29T06:12:46.669Z INF/device:support:sub 1654 [330042569d5282df] Subscribing to permanent channel "*ALL"
2018-03-29T06:12:46.780Z INF/device:support:properties 1654 [330042569d5282df] Loading properties
2018-03-29T06:12:46.852Z INF/device:support:sdk 1654 [330042569d5282df] Supports SDK 23
2018-03-29T06:12:46.853Z INF/device:support:abi 1654 [330042569d5282df] Supports ABIs armeabi-v7a, armeabi
2018-03-29T06:12:47.027Z INF/device:resources:minicap 1654 [330042569d5282df] Installing "/app/node_modules/minicap-prebuilt/prebuilt/armeabi-v7a/bin/minicap" as "/data/local/tmp/minicap"
2018-03-29T06:12:47.029Z INF/device:resources:minicap 1654 [330042569d5282df] Installing "/app/node_modules/minicap-prebuilt/prebuilt/armeabi-v7a/lib/android-23/minicap.so" as "/data/local/tmp/minicap.so"
2018-03-29T06:12:47.210Z INF/device:resources:service 1654 [330042569d5282df] Checking whether we need to install STFService
2018-03-29T06:12:47.789Z INF/device:resources:service 1654 [330042569d5282df] Running version check
2018-03-29T06:12:48.514Z INF/device:resources:service 1654 [330042569d5282df] STFService up to date
2018-03-29T06:12:48.519Z INF/device:plugins:service 1654 [330042569d5282df] Launching agent
2018-03-29T06:12:49.267Z INF/device:plugins:service 1654 [330042569d5282df] Agent says: "Listening on @stfagent"
2018-03-29T06:12:49.308Z INF/device:plugins:service 1654 [330042569d5282df] Launching service
2018-03-29T06:12:49.311Z INF/device:plugins:service 1654 [330042569d5282df] Agent says: "InputClient started"
2018-03-29T06:12:50.070Z INF/device:plugins:display 1654 [330042569d5282df] Reading display info
2018-03-29T06:12:50.115Z INF/device:plugins:phone 1654 [330042569d5282df] Fetching phone info
2018-03-29T06:12:50.142Z INF/device:plugins:identity 1654 [330042569d5282df] Solving identity
2018-03-29T06:12:50.143Z INF/device:plugins:solo 1654 [330042569d5282df] Subscribing to permanent channel "74bk5k3H+n2KZT0GYF1f31vJ3zU="
2018-03-29T06:12:50.145Z INF/device:plugins:screen:stream 1654 [330042569d5282df] Starting WebSocket server on port 15836
2018-03-29T06:12:50.303Z INF/device:resources:minitouch 1654 [330042569d5282df] Installing "/app/node_modules/minitouch-prebuilt/prebuilt/armeabi-v7a/bin/minitouch" as "/data/local/tmp/minitouch"
2018-03-29T06:12:50.406Z WRN/device:plugins:data 1654 [330042569d5282df] Unable to find device data { serial: '330042569d5282df',
  platform: 'Android',
  manufacturer: 'SAMSUNG',
  operator: null,
  model: 'SM-T810',
  version: '6.0.1',
  abi: 'armeabi-v7a',
  sdk: '23',
  product: 'gts210wifixx',
  cpuPlatform: 'exynos5',
  openGLESVersion: '3.1',
  display:
   { id: 0,
     width: 1536,
     height: 2048,
     xdpi: 265.40399169921875,
     ydpi: 264.0559997558594,
     fps: 59,
     density: 2,
     rotation: 0,
     secure: true,
     size: 9.6772154390038,
     url: 'ws://masterip/d/mumbai/330042569d5282df/15836/' },
  phone: { network: 'UNKNOWN' } }
2018-03-29T06:12:50.416Z INF/device:plugins:touch 1654 [330042569d5282df] Touch origin is top left
2018-03-29T06:12:50.417Z INF/device:plugins:touch 1654 [330042569d5282df] Requesting touch consumer to start
2018-03-29T06:12:50.418Z INF/device:plugins:touch 1654 [330042569d5282df] Launching touch service
2018-03-29T06:12:50.423Z INF/device:plugins:touch 1654 [330042569d5282df] Connecting to minitouch service
2018-03-29T06:12:50.494Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Note: device /dev/input/mouse0 is not supported by libevdev"
2018-03-29T06:12:50.634Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
2018-03-29T06:12:50.869Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Type B touch device sec_touchscreen (1535x2047 with 10 contacts) detected on /dev/input/event3 (score 2109)"
2018-03-29T06:12:51.149Z INF/device:plugins:touch 1654 [330042569d5282df] Reading minitouch banner
2018-03-29T06:12:51.150Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Connection established"
2018-03-29T06:12:51.200Z INF/device:plugins:vnc 1654 [330042569d5282df] Starting VNC server on port 15838
2018-03-29T06:12:51.205Z INF/device:plugins:browser 1654 [330042569d5282df] Loading browser list
2018-03-29T06:12:51.235Z INF/device:plugins:browser 1654 [330042569d5282df] Updating browser list
2018-03-29T06:12:51.237Z INF/device:plugins:mute 1654 [330042569d5282df] Will not mute master volume
2018-03-29T06:12:51.362Z INF/device:resources:minirev 1654 [330042569d5282df] Installing "/app/vendor/minirev/armeabi-v7a/minirev" as "/data/local/tmp/minirev"
2018-03-29T06:12:51.445Z INF/device:plugins:forward 1654 [330042569d5282df] Launching reverse port forwarding service
2018-03-29T06:12:51.451Z INF/device:plugins:forward 1654 [330042569d5282df] Connecting to reverse port forwarding service
2018-03-29T06:12:52.184Z INF/device:plugins:connect 1654 [330042569d5282df] Listening on port 15837
2018-03-29T06:12:52.187Z INF/device 1654 [330042569d5282df] Fully operational

From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsFrameNotifier [as onFrame] (/app/lib/units/device/plugins/screen/stream.js:546:20)
    at /app/lib/units/device/plugins/screen/stream.js:490:43
    at Array.map (native)
    at next (/app/lib/units/device/plugins/screen/stream.js:489:49)
    at runCallback (timers.js:672:20)
    at tryOnImmediate (timers.js:645:5)
    at processImmediate [as _immediateCallback] (timers.js:617:5)
From previous event:
    at FrameProducer.next (/app/lib/units/device/plugins/screen/stream.js:491:18)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer._maybeEmitReadable (/app/lib/units/device/plugins/screen/stream.js:413:14)
    at FrameProducer._readableListener (/app/lib/units/device/plugins/screen/stream.js:419:12)
    at emitNone (events.js:86:13)
    at Socket.emit (events.js:185:7)
    at emitReadable_ (_stream_readable.js:432:10)
    at emitReadable (_stream_readable.js:426:7)
    at readableAddChunk (_stream_readable.js:187:13)
    at Socket.Readable.push (_stream_readable.js:134:10)
    at TCP.onread (net.js:547:20)
2018-03-29T09:44:14.696Z INF/device:plugins:sd 26 [51b61df1] Getting SD card status
2018-03-29T09:44:17.757Z IMP/device:plugins:connect 26 [51b61df1] Remote Connect Started for device "51b61df1" at "slaveip:15005"
2018-03-29T09:44:21.598Z INF/device:plugins:sd 26 [51b61df1] Getting SD card status
2018-03-29T09:44:52.951Z INF/device:plugins:screen:stream 26 [51b61df1] Requesting frame producer to stop
2018-03-29T09:44:52.953Z INF/device:plugins:screen:stream 26 [51b61df1] Disconnecting from minicap service
2018-03-29T09:44:52.959Z INF/device:plugins:screen:stream 26 [51b61df1] Stopping minicap service
2018-03-29T09:44:52.962Z INF/device:plugins:screen:stream 26 [51b61df1] Sending SIGTERM to minicap
2018-03-29T09:44:53.010Z INF/device:plugins:screen:stream 26 [51b61df1] minicap says: "INFO: (jni/minicap/minicap.cpp:197) Received SIGTERM, stopping"
2018-03-29T09:44:53.099Z INF/device:plugins:screen:stream 26 [51b61df1] minicap says: "INFO: (jni/minicap/minicap.cpp:516) Closing client connection"
2018-03-29T09:44:53.099Z INF/device:plugins:screen:stream 26 [51b61df1] minicap says: "INFO: (external/MY_minicap/src/minicap_22.cpp:291) Destroying virtual display"
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsFrameNotifier [as onFrame] (/app/lib/units/device/plugins/screen/stream.js:546:20)
    at /app/lib/units/device/plugins/screen/stream.js:490:43
    at Array.map (native)
    at FrameProducer.next (/app/lib/units/device/plugins/screen/stream.js:489:49)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer._maybeEmitReadable (/app/lib/units/device/plugins/screen/stream.js:413:14)
    at FrameProducer._readableListener (/app/lib/units/device/plugins/screen/stream.js:419:12)
    at emitNone (events.js:86:13)
    at Socket.emit (events.js:185:7)
    at emitReadable_ (_stream_readable.js:432:10)
    at emitReadable (_stream_readable.js:426:7)
    at readableAddChunk (_stream_readable.js:187:13)
    at Socket.Readable.push (_stream_readable.js:134:10)
    at TCP.onread (net.js:547:20) 
```

 @sorccu  No update on the issue.Can you please check the issue. You’re the only one with this issue. I would try running on a different machine. If your Docker host OS is Windows (could be, I don’t know) try using Mac or Linux instead.

You ahould also look at the network tab in your browser’s developer tools panel and see if you can find any clues there. There should be two WebSockets connections, check wgat’s going on with the screen websocket (usually last one). It could be timing out or the connection could be dropped by a firewall, for example (wouldn’t be the first time - especially on Windows). @sorccu both the linux boxes are linux machines,
I checked the developer console and i see this message: 

The connection to ws://nginxserverip/d/pune1/5200531fc6119421/15004/ was interrupted while the page was loading.
1.507a928fe996d2944a92.chunk.js:79842:18
the provider logs show:


```
2018-04-17T06:02:25.460Z IMP/device:plugins:group 25 [5200531fc6119421] No longer owned by "tets@BEST.COM"
2018-04-17T06:02:25.461Z INF/device:plugins:group 25 [5200531fc6119421] Unsubscribing from group channel "HGunOy/9SFmkk244uS43eA=="
2018-04-17T06:02:26.030Z IMP/device:plugins:group 25 [5200531fc6119421] Now owned by "tets@BEST.COM"
2018-04-17T06:02:26.031Z INF/device:plugins:group 25 [5200531fc6119421] Subscribing to group channel "HGunOy/9SFmkk244uS43eA=="
2018-04-17T06:02:26.160Z INF/device:plugins:screen:stream 25 [5200531fc6119421] Setting frame producer projection to 461x461
2018-04-17T06:02:26.162Z INF/device:plugins:screen:stream 25 [5200531fc6119421] Requesting frame producer to start
2018-04-17T06:02:26.162Z INF/device:plugins:screen:stream 25 [5200531fc6119421] Launching screen service
2018-04-17T06:02:26.165Z IMP/device:plugins:connect 25 [5200531fc6119421] Remote Connect Started for device "5200531fc6119421" at "masterip:15005"
2018-04-17T06:02:26.291Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "PID: 17806"
2018-04-17T06:02:26.292Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: Using projection 720x1280@259x461/0"
2018-04-17T06:02:26.292Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:240) Creating SurfaceComposerClient"
2018-04-17T06:02:26.293Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:243) Performing SurfaceComposerClient init check"
2018-04-17T06:02:26.293Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:250) Creating virtual display"
2018-04-17T06:02:26.294Z INF/device:plugins:screen:stream 25 [5200531fc6119421] Connecting to minicap service
2018-04-17T06:02:26.295Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:256) Creating buffer queue"
2018-04-17T06:02:26.295Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:261) Creating CPU consumer"
2018-04-17T06:02:26.295Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:265) Creating frame waiter"
2018-04-17T06:02:26.297Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (external/MY_minicap/src/minicap_24.cpp:269) Publishing virtual display"
2018-04-17T06:02:26.313Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (jni/minicap/JpgEncoder.cpp:64) Allocating 2766852 bytes for JPG encoder"
2018-04-17T06:02:26.405Z INF/device:plugins:screen:stream 25 [5200531fc6119421] minicap says: "INFO: (jni/minicap/minicap.cpp:448) New client connection"
2018-04-17T06:02:26.407Z INF/device:plugins:screen:stream 25 [5200531fc6119421] Reading minicap banner
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsFrameNotifier [as onFrame] (/app/lib/units/device/plugins/screen/stream.js:546:20)
    at /app/lib/units/device/plugins/screen/stream.js:490:43
    at Array.map (native)
    at FrameProducer.next (/app/lib/units/device/plugins/screen/stream.js:489:49)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer._maybeEmitReadable (/app/lib/units/device/plugins/screen/stream.js:413:14)
    at FrameProducer._readableListener (/app/lib/units/device/plugins/screen/stream.js:419:12)
    at emitNone (events.js:86:13)
    at Socket.emit (events.js:185:7)
    at emitReadable_ (_stream_readable.js:432:10)
    at emitReadable (_stream_readable.js:426:7)
    at readableAddChunk (_stream_readable.js:187:13)
    at Socket.Readable.push (_stream_readable.js:134:10)
    at TCP.onread (net.js:547:20)
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsFrameNotifier [as onFrame] (/app/lib/units/device/plugins/screen/stream.js:546:20)
    at /app/lib/units/device/plugins/screen/stream.js:490:43
    at Array.map (native)
    at FrameProducer.next (/app/lib/units/device/plugins/screen/stream.js:489:49)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer._maybeEmitReadable (/app/lib/units/device/plugins/screen/stream.js:413:14)
    at FrameProducer._readableListener (/app/lib/units/device/plugins/screen/stream.js:419:12)
    at emitNone (events.js:86:13)
    at Socket.emit (events.js:185:7)
    at emitReadable_ (_stream_readable.js:432:10)
    at emitReadable (_stream_readable.js:426:7)
    at readableAddChunk (_stream_readable.js:187:13)
    at Socket.Readable.push (_stream_readable.js:134:10)
    at TCP.onread (net.js:547:20)
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsFrameNotifier [as onFrame] (/app/lib/units/device/plugins/screen/stream.js:546:20)
    at /app/lib/units/device/plugins/screen/stream.js:490:43
    at Array.map (native)
    at FrameProducer.next (/app/lib/units/device/plugins/screen/stream.js:489:49)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer._maybeEmitReadable (/app/lib/units/device/plugins/screen/stream.js:413:14)
    at FrameProducer._readableListener (/app/lib/units/device/plugins/screen/stream.js:419:12)
    at emitNone (events.js:86:13)
    at Socket.emit (events.js:185:7)
    at emitReadable_ (_stream_readable.js:432:10)
    at emitReadable (_stream_readable.js:426:7)
    at readableAddChunk (_stream_readable.js:187:13)
    at Socket.Readable.push (_stream_readable.js:134:10)
    at TCP.onread (net.js:547:20)
2018-04-17T06:02:53.209Z INF/device:plugins:screen:stream 25 [5200531fc6119421] Keeping 461x461 as current frame producer projection
2018-04-17T06:02:53.859Z IMP/device:plugins:connect 25 [5200531fc6119421] Remote Connect Started for device "5200531fc6119421" at "10.20.5.15:15005"
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsStartNotifier [as onStart] (/app/lib/units/device/plugins/screen/stream.js:535:20)
    at /app/lib/units/device/plugins/screen/stream.js:482:41
    at Array.map (native)
    at FrameProducer.<anonymous> (/app/lib/units/device/plugins/screen/stream.js:481:31)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer.<anonymous> (/app/lib/units/device/plugins/screen/stream.js:97:20)
    at runCallback (timers.js:672:20)
    at tryOnImmediate (timers.js:645:5)
    at processImmediate [as _immediateCallback] (timers.js:617:5)
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsStartNotifier [as onStart] (/app/lib/units/device/plugins/screen/stream.js:535:20)
    at /app/lib/units/device/plugins/screen/stream.js:482:41
    at Array.map (native)
    at FrameProducer.<anonymous> (/app/lib/units/device/plugins/screen/stream.js:481:31)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer.<anonymous> (/app/lib/units/device/plugins/screen/stream.js:97:20)
    at runCallback (timers.js:672:20)
    at tryOnImmediate (timers.js:645:5)
    at processImmediate [as _immediateCallback] (timers.js:617:5)
Unhandled rejection Error: write EPIPE
    at exports._errnoException (util.js:1020:11)
    at WriteWrap.afterWrite (net.js:800:14)
From previous event:
    at send (/app/lib/units/device/plugins/screen/stream.js:508:20)
    at Object.wsStartNotifier [as onStart] (/app/lib/units/device/plugins/screen/stream.js:535:20)
    at /app/lib/units/device/plugins/screen/stream.js:482:41
    at Array.map (native)
    at FrameProducer.<anonymous> (/app/lib/units/device/plugins/screen/stream.js:481:31)
    at FrameProducer.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at FrameProducer.<anonymous> (/app/lib/units/device/plugins/screen/stream.js:97:20)
    at runCallback (timers.js:672:20)
    at tryOnImmediate (timers.js:645:5)
    at processImmediate [as _immediateCallback] (timers.js:617:5)


``` my unit files are exactly the same as in the documentation with ipaddress changed.Only difference is I am using http and not https.Also thera there are tow providers.
machine A; all stf process,adb and provider1,rethinkdb
machine B; adb and provider2 Try running on a different port. Port 80 might get special handling from your firewall. 
![screenshot from 2018-04-17 11-47-53](https://user-images.githubusercontent.com/13177288/38852345-1f006036-4237-11e8-8ba5-6a9783a79859.png)
 @sorcuu ok will change port in nginx conf.Is there any other place where i need to make the port changes??

Still haven't made the changes as not sure which are the places that i need to update the listening port. @sorccu the docker logs of adb on provider 2 show

adb I 04-13 09:16:10     7     7 adb_auth_host.cpp:416] adb_auth_init...
adb I 04-13 09:16:10     7     7 adb_auth_host.cpp:174] read_key_file '/root/.android/adbkey'...
adb I 04-13 09:16:10     7     7 adb_auth_host.cpp:391] adb_auth_inotify_init...
adb I 04-13 09:16:10     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:16:38     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-13 09:16:39     7    15 transport_usb.cpp:160] remote usb: 1 - write terminated: Connection timed out
adb I 04-13 09:16:40     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:16:51     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:17:31     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:17:54     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:17:59     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:18:05     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:18:26     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-13 09:18:50     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-17 05:13:57     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb I 04-17 05:59:55     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 06:00:00     7    35 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 06:00:02     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 06:46:24     7    37 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 07:07:48     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 07:08:07     7    39 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 07:08:09     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 07:18:57     7    41 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 07:19:01     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 07:19:07     7    43 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 07:19:08     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 10:15:51     7    45 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 10:19:15     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 10:19:18     7    47 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 10:19:20     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 10:44:48     7    49 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 12:20:37     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 12:20:43     7    51 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 12:20:44     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 12:28:55     7    53 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 12:29:02     7     7 adb_auth_host.cpp:467] Calling send_auth_response
adb E 04-17 12:29:08     7    55 transport_usb.cpp:160] remote usb: 1 - write terminated: Invalid argument
adb I 04-17 12:29:10     7     7 adb_auth_host.cpp:467] Calling send_auth_response


Is this a problem??

 @sorccu @thinkhy  changed listen port in nginx.conf 
Error
WebSocket connection to 'ws://masterip/socket.io/?uip=10.20.4.82&EIO=3&transport=websocket' failed: Error in connection establishment: net::ERR_CONNECTION_REFUSED

Do i Need to make any other changes?? You have to update some of the units to match the changed port. Sounds like your `--ws-screen-url-pattern` is one of the options that's out of date.

In general, I don't have time to help with configuration issues. You know your network, I don't. @sorccu Thanks for your reply sorcuu.I checked with networking team and they say trafficis not blocked on port 80.But still i wanted to implement your suggestion and change the port.Can you please tell me which unit files need to be changed if the port is changed from 80.
Also would migrating from http to https solve the problem?
Please let me know.

 Switch to HTTPS. @sorccu after upgrading to https devices are filtered out.cannot see any devices.
stf service does not run on the device.

provider logs 
2018-06-14T13:21:34.498Z INF/provider 1 [*] Tracking devices
2018-06-14T13:21:34.500Z INF/provider 1 [*] Filtered out device "5200531fc6119421"
2018-06-14T13:21:53.757Z INF/provider 1 [*] Filtered out device "5200531fc6119421"
2018-06-14T13:21:56.731Z INF/provider 1 [*] Filtered out device "5200531fc6119421"
2018-06-14T13:21:56.737Z INF/provider 1 [*] Filtered out device "5200531fc6119421"

adb docker logs 
root@pune-mobilefarm:/etc/systemd/system# docker logs f440df785a11 
adb I 06-14 13:05:06     6     6 adb_auth_host.cpp:416] adb_auth_init...
adb I 06-14 13:05:06     6     6 adb_auth_host.cpp:174] read_key_file '/root/.android/adbkey'...
adb I 06-14 13:05:06     6     6 adb_auth_host.cpp:391] adb_auth_inotify_init...
adb I 06-14 13:06:28     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:06:30     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:06:31     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:06:45     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb E 06-14 13:10:13     6    18 transport_usb.cpp:160] remote usb: 1 - write terminated: Protocol error
adb I 06-14 13:10:15     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:10:44     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:10:52     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:19:29     6     6 adb_auth_host.cpp:467] Calling send_auth_response
adb I 06-14 13:21:56     6     6 adb_auth_host.cpp:467] Calling send_auth_response
Please help

**Slave machine** 
c5d467c5677        openstf/stf:latest   "stf provider ecf1..."   7 minutes ago       Up 7 minutes                                stf-provider-pune1
f440df785a11        sorccu/adb:latest    "/sbin/tini -- adb..."   24 minutes ago      Up 24 minutes                               adbd


**master machine** 
CONTAINER ID        IMAGE                       COMMAND                  CREATED             STATUS              PORTS                      NAMES
8a950ea00619        openstf/stf:latest          "stf processor stf..."   14 minutes ago      Up 14 minutes       3000/tcp                   stf-processor-proc1
87aedd997428        nginx:1.7.10                "nginx"                  28 minutes ago      Up 28 minutes                                  nginx
0900baa21d11        openstf/stf:latest          "stf provider --na..."   29 minutes ago      Up 29 minutes                                  stf-provider-mumbai1
428a41727c43        sorccu/adb:latest           "/sbin/tini -- adb..."   29 minutes ago      Up 29 minutes                                  adbd
03ea6094e25f        openstf/stf:latest          "stf reaper dev --..."   30 minutes ago      Up 30 minutes       3000/tcp                   stf-reaper
6592c0083c42        openstf/stf:latest          "stf triproxy dev ..."   30 minutes ago      Up 30 minutes                                  stf-triproxy-dev
f1df087bbb01        openstf/stf:latest          "stf triproxy app ..."   30 minutes ago      Up 30 minutes                                  stf-triproxy-app
01904d9fe434        openstf/stf:latest          "stf api --port 30..."   31 minutes ago      Up 30 minutes       0.0.0.0:3700->3000/tcp     stf-api-3700
6c6f99f6d494        openstf/stf:latest          "stf websocket --p..."   31 minutes ago      Up 31 minutes       0.0.0.0:3600->3000/tcp     stf-websocket-3600
12d6233c0a72        openstf/stf:latest          "stf storage-temp ..."   31 minutes ago      Up 31 minutes       0.0.0.0:3500->3000/tcp     stf-storage-temp-3500
ab6722178ddb        openstf/stf:latest          "stf storage-plugi..."   31 minutes ago      Up 31 minutes       0.0.0.0:3400->3000/tcp     stf-storage-plugin-image-3400
ee191fb43782        openstf/stf:latest          "stf storage-plugi..."   31 minutes ago      Up 31 minutes       0.0.0.0:3300->3000/tcp     stf-storage-plugin-apk-3300
3d6de535158b        openstf/stf:latest          "stf auth-mock --p..."   32 minutes ago      Up 32 minutes       0.0.0.0:3200->3000/tcp     stf-auth-3200
6bef798e15f8        openstf/stf:latest          "stf app --port 30..."   32 minutes ago      Up 32 minutes       0.0.0.0:3100->3000/tcp     stf-app-3100
0d6c8beb1cc4        openstf/ambassador:latest   "/run.sh"                37 minutes ago      Up 37 minutes       0.0.0.0:32772->28015/tcp   rethinkdb-proxy-28015
d49165fc2eed        rethinkdb:2.3               "rethinkdb --bind ..."   45 minutes ago      Up 45 minutes                             



  Your OAuth provider must provide an email address. The user must opt in to share it as well. If they don't, they can't log in.  Maybe this is related to #806? Closed in favor of #806.  You can do it. It is not good from a security point of view but there are almost no checks whatsoever. Just connect and it should work.  Too expensive, I’m not going to buy it. Sounds like it’s a permission issue. Perhaps there’s an “allow auto launch” setting somewhere in there. @thinkhy do you have this device?  After version 3.0.0, we can set screen JPEG quality with the SCREEN_JPEG_QUALITY environment variable at launch time. But sometimes it's not enough for slow networks, even I set SCREEN_JPEG_QUALITY to 20%, the size of picture data can be just reduced to about 1/2 of origin size.

I did a simple experiment to limit rate of sending frame data in `lib/units/device/plugins/screen/stream.js`  as follows:

```js
          function wsFrameNotifier(frame) {
            var currentTime = new Date()
            if (currentTime - lastSentTime < MIN_SENT_INTERVAL) {
              return Promise.resolve()
            }
            else {
              lastSentTime = currentTime
              return send(frame, {
                binary: true
              })
            }
          }
```

The result shows that network bandwidth consumption is decreased remarkably, when I set the maximum frame rate to 10fps, the bandwidth consumption was reduced to 1/4~1/3 comparing with current code without any rate limitation, and the phone operated through web UI rapidly and surely, with smooth scrolling and swiping. Now working along both lines, I can set SCREEN_JPEG_QUALITY to 20% and set frame rate to 10fps, network bandwidth consumption can be improve to 1/3*1/2=1/6.

So, in order to improve transmission efficiency of STF especially for people use STF across remote sites,  I suggest to add a parameter in provider to limit rate of sending screenshot.
 I set 50ms for local network and 100ms for remote network across cities.  You have too many devices connected on one machine. Read the README.  You should use the IP your clients see for that option. Or, do a full deployment and replace the load balancer with whatever you please. We don’t help with network config issues because it takes ages and in the end it’s your network.  You want to make devices on the two servers be usable on STF web UI or use one provider to connect these devices ?  Is this related to STF? Please ask ZeroMQ people then.  Use the --group--timeout option. Default is 15 min.  Did you modify nginx config to update upstream server list? @David-gulu That's great. I've also attempted K8S recently.  The culprit is "apt-get uninstall unmet -y" ... That's not our Dockerfile. You should post the entire Dockerfile here, but in principle we don't support third party setups. No it isn't. You've changed the Node.js package URL and you've got that weird `unmet` in there. Post the exact Dockerfile you're using. You’ve modified it quite a bit, it’s not functional anymore. Take a fresh copy and do nothing except replace the download URL. Take the Dockerfile you claimed you were using. It’s that one. This time, don’t modify it until you have it working. @Fred0218 For the Dockerfile, you only have to replace npm register with a local mirror in China:
```
   RUN npm install -g cnpm --registry=https://registry.npm.taobao.org
```

Here I use npm register from taobao, it's workable for me.
  Most likely a config error. Sounds like the browser isn’t able to connect to the screen websocket. Open your developer tools console and look for errors. Or, in the developer tools, open the network panel and reload the page, and look for a failing request.  It seems that this is caused by https://github.com/felixge/node-formidable/commit/b81d1c71cd3774419571c360db4312c965a57a13. While the change was made over a year ago, it was only released 7 days ago. Since the new default maximum size is so low, most uploads are failing if you are using the latest version of the dependency. I've made a change that I believe fixes the issue, but I have no time to test it right now. Please checkout branch `issue-826` and report back whether it works for you.  If you're used the reference nginx config, could you try moving the following options directly under the `http` context, and take them out of the `location`?

```
client_max_body_size 1024m;
client_body_buffer_size 128k;
```

The socket disconnecting sounds like a separate issue, perhaps a timeout. Is your client a Windows machine? Is your STF running on port 80? Originally, a long long time ago, we noticed in our internal corporate network that something was causing Windows to drop persistent connections after a while if "default" ports like 80 or 8080 were used. We solved that by switching everything to HTTPS and 443. I was wondering if you may be experiencing a similar issue here.

Also, since you're running on port 7100, I assume you're using `stf local`? Unfortunately, the reverse proxy we use for development, `poorxy` (short for poor proxy), is known to have mysterious issues. Sometimes uploads may fail or other weird things can happen. For a serious production deployment, I would suggest following the deployment guide, or at least replacing poorxy with nginx, which usually fixes all upload related issues. encountered such problem again... reopen and seek for help  It should be an useful feature for UI Automation. We can contribute a PR for this feature.  I have 2 linux boxes at 2 locations:
I have to setup stf in such a way that I should be able to access stf , attached devices from either of the locations.

I have a dockerized setup  using the script from
 https://github.com/thinkhy/deploy-stf-docker
on Server A currently.I am able to see devices in stf web UI conencted to Server A.
Also we may add more servers in future

The Setup plan is as follows:
server A : stf up and running  - docker process running - Location A
rethinkdb is installed on this machine

server  B : Yet to setup - Location B

I have the following questions:

a) On Machine B should I have all the docker processes running (similiar to Machine A)

b) Do i need to setup rethinkdb pn server B ?

c)do i need to setup nginx on server B too ?

d)What nginx configuration would i need to integrate both these setups so that my stf UI will display devices attached to Server A,Server B
Thanks. Thanks for using my script in my project deploy-stf-docker:)

Short answers for your questions:
a) No
b) No
c) Yes
d) You needn't modify nginx config file on slave server, just modify command arguments of stf-provider.

If you still haven't resolve the problem, I can enhance my script to automator deployment across multiple servers.
  Thanks thinkhy,such a useful script.
I dont understand why i would need to deploy another nginx server on Server B.For my current setup I am using the nginx on Server A and have udpated entry for provider2 in nginx config?


I managed to the run the deployment script on 
Server A : location A
Next i created a .sh file from your original file which deploys only adbd and provider

Started provider 2 on Server 2 ,remote location B with 
```
# provider
echo "start docker container: provider-${HOSTNAME}"
docker rm -f provider2
docker run -d --name provider2 --net host openstf/stf stf provider --name "provider-${HOSTNAME}" --connect-sub tcp://${IP_ADDRESS}:7250 --connect-push tcp://${IP_ADDRESS}:7270 --storage-url http://${IP_ADDRESS} --public-ip ${IP_ADDRESS} --min-port=15000 --max-port=25000 --heartbeat-interval 20000 --screen-ws-url-pattern "ws://${IP_ADDRESS}/d/LASVegas/<%= serial %>/<%= publicPort %>/"
check_return_code
```
also configured nginx server on Server A,Location A:

    location ~ "^/d/LosAngeles/([^/]+)/(?<port>[0-9]{5})/$" {
      proxy_pass http://__IP_ADDRESS1__:$port/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection $connection_upgrade;
      proxy_set_header X-Forwarded-For $remote_addr;
      proxy_set_header X-Real-IP $remote_addr;
    }

    location ~ "^/d/LASVegas/([^/]+)/(?<port>[0-9]{5})/$" {
      proxy_pass http://__IP_ADDRESS2__:$port/;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection $connection_upgrade;
      proxy_set_header X-Forwarded-For $remote_addr;
      proxy_set_header X-Real-IP $remote_addr;
    }

Now I am able to see devices from both location in the stf console.
The problem is that when i access the remote location device,I am able to see device screen in stf console.But When I click on the mobile device apps with the mouse on the screen the actions are done on the actual device in remote location,but the actions  are not seen on the stf console device screen.

Note that when i refresh the page the device screen displays the next page 
What can i do to check the issue.

Is my configuration correct?

Provider1 logs 
```
2018-03-26T06:23:19.700Z INF/device:plugins:touch 145 [5200531fc6119421] Touch origin is top left
2018-03-26T06:23:19.701Z INF/device:plugins:touch 145 [5200531fc6119421] Requesting touch consumer to start
2018-03-26T06:23:19.703Z INF/device:plugins:touch 145 [5200531fc6119421] Launching touch service
2018-03-26T06:23:19.713Z INF/device:plugins:touch 145 [5200531fc6119421] Connecting to minitouch service
2018-03-26T06:23:19.973Z INF/device:plugins:touch 145 [5200531fc6119421] minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
``` One more issue:
When I try to access stfconsole from a different machine in the same neworkI am not able to access stf console,I was able to access the console earlier,I dont know what happened.I turned the firewall off on the stf server.
But still cannot access:

Developer console showed:

Refused to execute script from 'http://ipaddress:3200/static/app/build/entry/authmock.entry.js' because its MIME type ('text/html') is not executable, and strict MIME type checking is enabled.

Update : This seems to be happenning only from my machine.
tried from different machine and works perfectly @thinkhy Can you please help with the issue.trying t solve it from days!!!Out of ideas now!!! @thinkhy Any Update on the Script? @terminalone  These days I have been travelling frequently, haven't gotten around to working on this. I think I will work on the script on June.  
 @thinkhy Please help with the script.
I have a provider and adbd running on slave ,no other stf processes.
master has all other process and adbd,provider 2 too.
Do I need anything ekle on the slave machine????


  # Android P

This is a tracking issue for Android P support.

## Android P Developer Preview 1

### Current status

Not working. Requires:

- [x] openstf/minicap#118
- [x] openstf/STFService.apk#25  Read the linked issues. Update this issue with openstf/STFService.apk#25   Can you install docker on Raspberry Pi?  Short answer is docker can offer much easier deployment and you needn't care about details of OS env. I would recommend the docker image which you can find on our docker hub page. STF and its dependencies have many native dependencies which can be a pain to get working. At the very least take a look at the Dockerfile in this repo’s docker folder for tips. I personally cannot help more than that so if you decide to go the local installation route it’ll be up to you to get it running. Feel free to post instructions for others here if you end up doing it, though. Or you can use the command of "nohup rethinkdb &"  That’s a known issue. It wasn’t really a big deal for us so we never did anything about it. If someome submits a PR perhaps we can take a look at it. Good report by the way. @sorccu @zhouzxiang I think this would be a security vulnerability if we open services of STF to the public. So I will try to fix it. Yeah, but that’s not what we built the system for. Obviously I have nothing against a fix, though.  Sounds like you’re hitting #100.  Hmmm no not really. You’d have to look at the devices list and see that all devices from a provider are offline. Give each provider a unique easy to remember name.

Or you can query rethinkdb but I don’t have time to help with that. You’d query all devices that have present: false. @sorccu I've implemented a page to show all the provider info in a tab view of settings page. I can submit a PR if this is a common requirement. Nice but I’ve had very little time to review recently, and I don’t have a multi provider setup available to me right now. Please submit it but also include screenshots if possible (censor private information with black boxes or whatever). Maybe @vbanthia can then also comment on it.  Seems your nginx config is incorrect so that you got 404(page not found)  It’s what we wanted to use at the time and Rust didn’t exist yet. Simple as that. Now I would use Rust :)  Seems your dev colleagues didn't register their Android public key on your STF. When they connect with your device via "adb connect ip:port", you could find a pop-up permit dialog on your STF web UI and click yes to permit it. Make sure developers don't share ADB keys. Each account should have a unique ADB key.  There's a hidden option called [`forceTouchOrigin`](https://github.com/openstf/stf/blob/461ec81c9ed3a149bd31906b1fc4546e95fee592/lib/units/device/plugins/touch/index.js#L506) that can be used to select a different origin. You can only set it in [`stf-device-db`](https://github.com/openstf/stf-device-db/blob/6dfcfd24245f3a05549b71a3383a5a7a37ef6c8a/static/devices-static.json#L94) so it's kind of inconvenient. Also, you might need to add another origin as currently only `top left` and `bottom left` are supported, but that should be fairly straightforward.  It says it right below the image... you can even control an Android phone from an iPhone if you like. In that picture STF is being used from an iPhone. That's all.  It does not ask for a password. It asks for your name and email address. You can enter anything you want.  How do you have access to Android P? I don't so I can't do anything about it. @hzy729 Curious about how you get android P's code base on ASOP? I just looked at the project, didn't find any tag or branch related to P. Closing in favor of #822.  It's difficult because unlike, say, HTTP, adb doesn't let the server know which hostname it tried to connect to. To uniquely identify the device, the IP:PORT pair needs to be unique. It also doesn't support IPv6. If you want to use the default port, you'll have to have a unique IPv4 address per device.  There’s a public API since Android 5.0.  Since Android 8.0 official version, 'ps' command is not workable to list process list. We should use 'ps -lef' instead on Android 8.0 and Android 8.1, so I attempt to fix the problem in lib/util/devutil.js. 
 Can you describe how you found out about this issue? Did it break something? Also, possible to see output of the old & new command on those android versions? I first found this issue in my scaffolding code for test automation, I intended to kill the process of uiautomator with the commands ps and kill, but it didn't work on Android 8.x, then I found the same issue on STF.

Next day I will paste the output of the old&new command on devices of Pixel2(Android 8.0), Huawei Mate 10(Android 8.0), XiaoMi Mix2(Android 8.0) and OPPO R11plus(Android 8.1). @sorccu I've tried out both the commands  "ps" and "ps -lef" on 7 devices from Android 7.0 to 8.1, covering 6 leading mobile brands:


### Nexus 6P, Android 8.1

```shell

ps

USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME                       
shell        28030 21619   10488   1936 0          75bb676f20 R ps

```


```shell

ps -lef

UID            PID  PPID C STIME TTY          TIME CMD
root             1     0 0 17:34:26 ?     00:00:33 init
root             2     0 0 17:34:26 ?     00:00:17 [kthreadd]
root             3     2 8 17:34:26 ?      4-07:08:50 [ksoftirqd/0]
root             5     2 0 17:34:26 ?     00:16:54 [kworker/0:0H]
root             6     2 0 17:34:26 ?     00:00:01 [kworker/u16:0]
root             7     2 0 17:34:26 ?     00:00:43 [migration/0]
root             8     2 1 17:34:26 ?     18:18:30 [rcuc/0]
root             9     2 0 17:34:26 ?     00:00:00 [rcub/0]
root            10     2 8 17:34:26 ?      4-07:26:33 [rcu_preempt]
root            11     2 0 17:34:26 ?     00:00:00 [rcu_bh]
root            12     2 0 17:34:26 ?     00:00:01 [rcu_sched]
... ...
```

```shell
ps -lef|grep stf
u0_a98        9132   613 0 17:42:39 ?     00:09:30 jp.co.cyberagent.stf
shell        16648 21619 0 21:22:36 pts/0 00:00:01 stf.agent
shell        28078 21619 3 19:44:20 pts/4 00:00:00 sh -c ps -lef|grep stf
shell        28081 28078 4 19:44:20 pts/4 00:00:00 grep stf
```

-----------------------------------------------------------------------------------------

### Pixel2, Android 8.1

```shell
ps
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME                       
shell        16238   711   10544   1952 0          7679407ea4 R ps
```

```shell
ps -elf
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME                       
shell        16238   711   10544   1952 0          7679407ea4 R ps
```

```shell
ps -lef
UID            PID  PPID C STIME TTY          TIME CMD
root             1     0 0 21:33:40 ?     00:00:33 init
root             2     0 0 21:33:40 ?     00:00:21 [kthreadd]
root             3     2 1 21:33:40 ?     01:18:14 [ksoftirqd/0]
root             5     2 0 21:33:40 ?     00:00:00 [kworker/0:0H]
root             6     2 0 21:33:40 ?     00:00:01 [kworker/u8:0]
root             7     2 0 21:33:40 ?     00:17:35 [rcu_preempt]
root             8     2 0 21:33:40 ?     00:00:20 [rcu_sched]
root             9     2 0 21:33:40 ?     00:00:00 [rcu_bh]
root            10     2 0 21:33:40 ?     00:01:45 [rcuc/0]
root            11     2 0 21:33:40 ?     00:00:00 [rcub/0]
root            12     2 0 21:33:40 ?     00:00:01 [migration/0]
... ...
```

```shell
ps -lef|grep stf
shell         2535   711 0 21:34:34 pts/0 00:00:00 stf.agent
u0_a545       2614   651 0 21:34:35 ?     00:00:21 jp.co.cyberagent.stf
shell        16257   711 3 19:45:47 pts/4 00:00:00 sh -c ps -lef|grep stf
shell        16260 16257 3 19:45:47 pts/4 00:00:00 grep stf
```

### Oppo R11s, Android 8.1

```shell
ps
USER           PID  PPID	FRZ      VSZ    RSS WCHAN            ADDR S NAME                       
shell        24566 23818	efg    11028   2048 0          7d4f679120 R ps
```

```shell
ps -elf
UID            PID  PPID	FRZ  C STIME TTY          TIME CMD
root             1     0	efg  0 15:02:13 ?     00:00:26 init
root             2     0	efg  0 15:02:13 ?     00:00:00 [kthreadd]
root             3     2	efg  1 15:02:13 ?     01:40:30 [ksoftirqd/0]
root             7     2	efg  0 15:02:13 ?     00:07:50 [rcu_preempt]
root             8     2	efg  0 15:02:13 ?     00:00:35 [rcu_sched]
root             9     2	efg  0 15:02:13 ?     00:00:00 [rcu_bh]
root            10     2	efg  0 15:02:13 ?     00:10:50 [rcuop/0]
root            11     2	efg  0 15:02:13 ?     00:00:28 [rcuos/0]
... ...
```

```shell
ps -elf|grep stf

u0_a152      20697  1260	efg  0 18:48:23 ?     00:00:00 jp.co.cyberagent.stf
shell        23990 23818	efg  0 09:56:42 pts/0 00:00:01 stf.agent
shell        24579 23818	efg  2 19:48:19 pts/4 00:00:00 sh -c ps -lef|grep stf
shell        24582 24579	efg  1 19:48:19 pts/4 00:00:00 grep stf
```

### Huawei Mate10, Android 8.0

```shell
ps
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME                       
shell        11256   722   10236   2044 0          77378038d0 R ps
```

```shell
ps -elf
UID            PID  PPID C STIME TTY          TIME CMD
root             1     0 0 21:34:57 ?     00:01:43 init
root             2     0 0 21:34:57 ?     00:00:02 [kthreadd]
root             3     2 0 21:34:57 ?     00:05:52 [ksoftirqd/0]
root             5     2 0 21:34:57 ?     00:00:00 [kworker/0:0H]
root             7     2 1 21:34:57 ?     01:13:23 [rcu_preempt]
root             8     2 0 21:34:57 ?     00:00:32 [rcu_sched]
root             9     2 0 21:34:57 ?     00:00:00 [rcu_bh]
root            10     2 0 21:34:57 ?     00:00:08 [migration/0]
root            11     2 0 21:34:57 ?     00:00:00 [pid_iostats_upd]
root            12     2 0 21:34:57 ?     00:00:07 [migration/1]
root            13     2 0 21:34:57 ?     00:02:52 [ksoftirqd/1]
root            15     2 0 21:34:57 ?     00:00:00 [kworker/1:0H]
... ...

```

```shell
ps -elf|grep stf

shell         3235   722 0 21:35:13 pts/0 00:00:01 stf.agent
u0_a342       3550   514 0 21:35:14 ?     00:00:45 jp.co.cyberagent.stf
shell        11261   722 0 20:03:39 pts/4 00:00:00 sh -c ps -lef|grep stf
shell        11264 11261 1 20:03:39 pts/4 00:00:00 grep stf
```

### XiaoMi Mi 6, Android 8.0

```shell
ps
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME                       
shell        15491  1137   10204   2056 0          7f8007a898 R ps
```

```shell
ps -elf
UID            PID  PPID C STIME TTY          TIME CMD
root             1     0 0 03:08:24 ?     00:00:21 init
root             2     0 0 03:08:24 ?     00:00:00 [kthreadd]
root             3     2 0 03:08:24 ?     00:03:52 [ksoftirqd/0]
root             7     2 0 03:08:24 ?     00:00:26 [rcu_preempt]
root             8     2 0 03:08:24 ?     00:00:00 [rcu_sched]
root             9     2 0 03:08:24 ?     00:00:00 [rcu_bh]
root            10     2 0 03:08:24 ?     00:00:38 [rcuop/0]
root            11     2 0 03:08:24 ?     00:00:00 [rcuos/0]
root            12     2 0 03:08:24 ?     00:00:00 [rcuob/0]
... ...

```

```shell
ps -elf|grep stf

shell         3936  1137 0 03:09:07 pts/0 00:00:00 stf.agent
u0_a149       4086   629 0 03:09:08 ?     00:00:00 jp.co.cyberagent.stf
shell        15502  1137 4 20:15:11 pts/4 00:00:00 sh -c ps -elf|grep stf
shell        15505 15502 9 20:15:11 pts/4 00:00:00 grep stf
```

### Vivo X9, Android 7.1.2

```shell
ps
USER      PID   PPID  VSIZE  RSS   WCHAN              PC  NAME
root      1     0     17132  2604  SyS_epoll_ 0000000000 S /init
root      2     0     0      0       kthreadd 0000000000 S kthreadd
root      3     2     0      0     smpboot_th 0000000000 S ksoftirqd/0
root      5     2     0      0     worker_thr 0000000000 S kworker/0:0H
root      7     2     0      0     rcu_gp_kth 0000000000 S rcu_preempt
root      8     2     0      0     rcu_gp_kth 0000000000 S rcu_sched
root      9     2     0      0     rcu_gp_kth 0000000000 S rcu_bh
root      10    2     0      0     nocb_leade 0000000000 S rcuop/0
root      11    2     0      0     nocb_leade 0000000000 S rcuos/0
```

```shell
ps -elf
bad pid '-lef'
... ...

```

### SAMSUNG SM-G610F, Android 7.0

```shell
ps
USER      PID   PPID  VSIZE  RSS   WCHAN            PC  NAME
root      1     0     26128  744   SyS_epoll_ 00000000 S /init
root      2     0     0      0       kthreadd 00000000 S kthreadd
root      3     2     0      0     smpboot_th 00000000 S ksoftirqd/0
root      7     2     0      0     rcu_gp_kth 00000000 S rcu_preempt
root      8     2     0      0     rcu_gp_kth 00000000 S rcu_sched
root      9     2     0      0     rcu_gp_kth 00000000 S rcu_bh
root      10    2     0      0     smpboot_th 00000000 S migration/0
root      11    2     0      0     smpboot_th 00000000 S watchdog/0
root      12    2     0      0     smpboot_th 00000000 S watchdog/1
root      13    2     0      0     smpboot_th 00000000 S migration/1
root      14    2     0      0     smpboot_th 00000000 S ksoftirqd/1
root      17    2     0      0     smpboot_th 00000000 S watchdog/2
root      18    2     0      0     smpboot_th 00000000 S migration/2
root      19    2     0      0     smpboot_th 00000000 S ksoftirqd/2
root      22    2     0      0     smpboot_th 00000000 S watchdog/3
```

```shell
ps -lef
bad pid '-lef'
... ...

```

According to above data, I think we should adjust the command of 'ps' for Android 8.x.


 Rather than checking the version, I think we should run with -lef first, then if it errors out try ps. Although maybe that could just be a single shell command  w/ some extra handling. @sorccu Thanks for your suggestion. One liner command "ps -lef||ps" can handle the problem. I will push the improved solution to the patch.  I attempted this command on Android 8.0 and 7.0 which both work. After testing the commands "ps" and "ps -lef" on 100+ devices covering 30+ brands, from 4.0 ~ 8.1, I found the output depends on ROM and Android version. I collected some cases below.

### Android version < 7.0

```shell
shell@msm8226:/ $ ps
USER     PID   PPID  VSIZE  RSS     WCHAN    PC         NAME
root      1     0     680    540   ffffffff 00000000 S /init
root      2     0     0      0     ffffffff 00000000 S kthreadd
root      3     2     0      0     ffffffff 00000000 S ksoftirqd/0
root      4     2     0      0     ffffffff 00000000 S kworker/0:0
root      5     2     0      0     ffffffff 00000000 S kworker/0:0H
root      6     2     0      0     ffffffff 00000000 D kworker/u:0
root      7     2     0      0     ffffffff 00000000 D kworker/u:0H
root      8     2     0      0     ffffffff 00000000 S migration/0
root      21    2     0      0     ffffffff 00000000 S khelper
root      22    2     0      0     ffffffff 00000000 S netns
root      23    2     0      0     ffffffff 00000000 S kworker/0:1
root      27    2     0      0     ffffffff 00000000 S kworker/0:1H
root      28    2     0      0     ffffffff 00000000 S modem_notifier
root      29    2     0      0     ffffffff 00000000 S smd_channel_clo
```

```shell
shell@msm8226:/ $ ps -lef
USER     PID   PPID  VSIZE  RSS     WCHAN    PC         NAME
```


### 7.0 <= Android version < 8.0

```shell
QK1801:/ $ ps
USER      PID   PPID  VSIZE  RSS   WCHAN              PC  NAME
root      1     0     17516  2788           0 0000000000 S /init
root      2     0     0      0              0 0000000000 S kthreadd
root      3     2     0      0              0 0000000000 S ksoftirqd/0
root      7     2     0      0              0 0000000000 S rcu_preempt
root      8     2     0      0              0 0000000000 S rcu_sched
root      9     2     0      0              0 0000000000 S rcu_bh
root      10    2     0      0              0 0000000000 S migration/0
root      11    2     0      0              0 0000000000 S migration/1
root      12    2     0      0              0 0000000000 S ksoftirqd/1
root      14    2     0      0              0 0000000000 S kworker/1:0H
```

```shell
QK1801:/ $ ps -lef
bad pid '-lef'
```


### Android version >= 8.0, Manufactor: Google, Huawei, XiaoMi, Oppo, output is like below.

```shell
ps
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME                       
shell        15491  1137   10204   2056 0          7f8007a898 R ps
```

```shell
ps -elf
UID            PID  PPID C STIME TTY          TIME CMD
root             1     0 0 03:08:24 ?     00:00:21 init
root             2     0 0 03:08:24 ?     00:00:00 [kthreadd]
root             3     2 0 03:08:24 ?     00:03:52 [ksoftirqd/0]
root             7     2 0 03:08:24 ?     00:00:26 [rcu_preempt]
root             8     2 0 03:08:24 ?     00:00:00 [rcu_sched]
root             9     2 0 03:08:24 ?     00:00:00 [rcu_bh]
root            10     2 0 03:08:24 ?     00:00:38 [rcuop/0]
root            11     2 0 03:08:24 ?     00:00:00 [rcuos/0]
root            12     2 0 03:08:24 ?     00:00:00 [rcuob/0]
... ...
```

```shell
ps -elf|grep stf
shell         3936  1137 0 03:09:07 pts/0 00:00:00 stf.agent
u0_a149       4086   629 0 03:09:08 ?     00:00:00 jp.co.cyberagent.stf
shell        15502  1137 4 20:15:11 pts/4 00:00:00 sh -c ps -elf|grep stf
shell        15505 15502 9 20:15:11 pts/4 00:00:00 grep stf
```

### Oneplus3T - Android 8.0(output of 'ps' and 'ps -lef' are identical.)

```shell
OnePlus3T:/ $ ps -lef
UID            PID  PPID C STIME TTY          TIME CMD
root             1     0 0 36:17 ?        00:00:10 init
root             2     0 0 36:17 ?        00:00:00 [kthreadd]
root             3     2 0 36:17 ?        00:04:56 [ksoftirqd/0]
root             6     2 0 36:17 ?        00:00:00 [kworker/u8:0]
root             7     2 0 36:17 ?        00:04:18 [rcu_preempt]
root             8     2 0 36:17 ?        00:00:11 [rcu_sched]
root             9     2 0 36:17 ?        00:00:00 [rcu_bh]
root            10     2 0 36:17 ?        00:01:53 [rcuop/0]
root            11     2 0 36:17 ?        00:00:05 [rcuos/0]
root            12     2 0 36:17 ?        00:00:00 [rcuob/0]
root            13     2 0 36:17 ?        00:00:43 [migration/0]
root            14     2 0 36:17 ?        00:00:22 [migration/1]
... ...
```

```shell
OnePlus3T:/ $ ps
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME
root             1     0   18896   3280 SyS_epoll+          0 S init
root             2     0       0      0 kthreadd            0 S [kthreadd]
root             3     2       0      0 smpboot_t+          0 S [ksoftirqd/0]
root             6     2       0      0 diag_sock+          0 S [kworker/u8:0]
root             7     2       0      0 rcu_gp_kt+          0 S [rcu_preempt]
root             8     2       0      0 rcu_gp_kt+          0 S [rcu_sched]
root             9     2       0      0 rcu_gp_kt+          0 S [rcu_bh]
root            10     2       0      0 nocb_lead+          0 S [rcuop/0]
root            11     2       0      0 nocb_lead+          0 S [rcuos/0]
root            12     2       0      0 nocb_lead+          0 S [rcuob/0]
root            13     2       0      0 smpboot_t+          0 S [migration/0]
root            14     2       0      0 smpboot_t+          0 S [migration/1]
... ...
```

So I changed the code to run 'ps' first(for most of devices it will work), then if it doesn't find the target process try 'ps -elf'.

@sorccu please review my code. Thanks.
 I think this patch will function, but I see one potential issue. In (probably) most cases, it's not going to find a process even if `ps` alone works, simply because the process isn't running. Then it unnecessarily runs `ps -lef` which of course fails. Therefore I think the current fallback logic is a bit flawed, since it runs that extra command. It should be able to tell that it saw correct output, but there were no matches, and only run the fallback if there was no output whatsoever.

Also, I think maybe `ps -lef` should be changed to `ps -lef 2>/dev/null`. Maybe `ps` too since some devices like to output weird errors everywhere, and it could mess up things. Yes, but I meant that it should try to detect whether the command ran successfully. I'm ok with running both on Android 8.0, but they both run on older versions as well if there's no match.

So for example, let's say the output is:

```
OnePlus3T:/ $ ps
USER           PID  PPID     VSZ    RSS WCHAN            ADDR S NAME
root             1     0   18896   3280 SyS_epoll+          0 S init
root             2     0       0      0 kthreadd            0 S [kthreadd]
root             3     2       0      0 smpboot_t+          0 S [ksoftirqd/0]
root             6     2       0      0 diag_sock+          0 S [kworker/u8:0]
root             7     2       0      0 rcu_gp_kt+          0 S [rcu_preempt]
root             8     2       0      0 rcu_gp_kt+          0 S [rcu_sched]
root             9     2       0      0 rcu_gp_kt+          0 S [rcu_bh]
```

And we were looking for `minicap`. Obviously, the output is correct, and the `ps` command has worked. However, we don't find `minicap` because it's not running. With the current logic, it will attempt to run `ps -lef` even though `ps` worked fine, it just didn't find anything. Basically, it should be able to detect three different scenarios:

1. Found matching process(es) → End here
2. Got an empty list, found no processes of any kind whatsoever → Try again with `ps -lef`
3. Got a non-empty list, but did not find any matching process → End here  Please do not use our software.  Run `adb shell getprop` and paste the full output here. I guess it’s because there’s no SIM card support. Nah we can fix that. But not sure when. Maybe try changing the code yourself? Seems the field 'ro.product.brand' is missing  in the output of "adb shell getprop", so the line 113 of devutil.js failed:

```
 if (model.substr(0, brand.length) === brand) {
```

@sorccu For this case, can we add a default brand name 'unkown' as below?

```
 var brand = properties['ro.product.brand']||'unknown'
``` @thinkhy I think `'unknown'` should be at the presentation layer, not in the actual data that we collect. Anyway since we're not actually storing the brand, I don't think it needs to have a fallback value - perhaps just change:

https://github.com/openstf/stf/blob/2dac3d1bbd1ef1974a1c22a10941c5739711928e/lib/util/devutil.js#L113

Into:

```
if (brand && model.substr(0, brand.length) === brand) {
```

That should work. Though this particular device might have other issues as well. @vagabond1-1983 maybe now? Try latest master. @sorccu your fix would be better, we don't need to assign a fallback value to brand which will not be presented on web UI. I think this was fixed already. Nevermind, sorry for the spam. Wrong search term.  It has already been updated a long time ago.  Thanks!  That’s normal on older devices. You should keep the developer tools closed or it can leak memory, because it has to store the images for debugging purposes.  Please provide more info about your test code and test environment.   No unless we can come up with a business model. We definitely would not be able to handle the increased number of support requests otherwise.  Doesn’t seem like this adds anything? I’ll close this one but feel free to send functional pull requests later.  If you are using `stf local` default secret key is `kute kittykat`

https://github.com/openstf/stf/blob/master/lib/cli/local/index.js#L54  Do not use macOS, adb is far from reliable on it. Use Linux if you want
reliability.

On Wed, Jan 17, 2018 at 3:04 nIvanovp <notifications@github.com> wrote:

> I use the STF version 3.2.0
> *What is the issue or idea you have?*
> Over time of the using the stf local I noticed that the adb devices
> returns error: protocol fault (couldn't read status): Undefined error: 0,
> but if to stop the stf - adb devices works correctly. After rebooting the
> machine I can use the STF and adb again without problems.
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
> The stf was started by the command /usr/local/bin/stf local
> --allow-remote --public-ip 192.168.0.214 --provider 192.168.0.214
> --bind-dev-pub tcp://192.168.0.214:7114 --bind-dev-pull tcp://
> 192.168.0.214:7116
> *What is the expected behavior?*
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> All devices status in the stf is disconnected.
> *Please run stf doctor and paste the output here.*
> 2018-01-17T06:55:32.026Z INF/cli:doctor 798 [
> *] OS Arch: x64 2018-01-17T06:55:32.028Z INF/cli:doctor 798 [*] OS
> Platform: darwin
> 2018-01-17T06:55:32.029Z INF/cli:doctor 798 [
> *] OS Platform: 16.7.0 2018-01-17T06:55:32.029Z INF/cli:doctor 798 [*]
> Using Node 9.4.0
> 2018-01-17T06:55:32.053Z INF/cli:doctor 798 [
> *] Using ZeroMQ 4.2.3 2018-01-17T06:55:32.073Z INF/cli:doctor 798 [*]
> Using RethinkDB 2.3.6
> 2018-01-17T06:55:32.074Z INF/cli:doctor 798 [
> *] Using GraphicsMagick 1.3.27 2018-01-17T06:55:32.078Z INF/cli:doctor 798
> [*] Using ADB 1.0.39
> 2018-01-17T06:55:32.083Z INF/cli:doctor 798 [*] Using ProtoBuf 3.5.1
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/794>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dIwdt8arqNxZ60OG8XL4gSyq2Q3ks5tLamTgaJpZM4Rg8gv>
> .
>
  @zhn3431223  It should be due to incorrect options. Please update the issue if you have resolved the problem. Thanks. Thanks for your sharing.  Close out.  Just wondering if you have connected 300 devices and have them online on STF? Seems you connected too much devices on single machine. I have connected 300+ devices on 6 machines(about 50 devices per machine), it works very well.

Seems the instances of websocket component consume most your system resource. Did you attempt to deploy websockets instances on different machines?  I tested this on a Huawei Mate 10 just now. It does work, however there's a bug. When bluetooth is disabled, and you use the STF UI to enable it, bluetooth gets enabled just fine. However, after a few seconds the STF UI shows that bluetooth is disabled. So, in other words, when you click on the "enable" button, it works and looks fine for a brief moment ("enable" button is blue). But then the "enable" button deactivates and the "disable" button becomes blue. If I go to another tab in STF and then back to the "Automation" tab, it shows correctly again ("enable" is blue). Maybe some sort of a timing issue?

By the way on the Mate 10 there's a dialog that pops up on the device every time you enable Bluetooth. It says "STFService is trying to turn on Bluetooth. Allow?" Might be related and/or causing the timing issue I have merged openstf/STFService.apk#20 now. I believe that the bug I mentioned is related to the changes here. Note that you'll also have to bump the STFService version as follows:

```
diff --git lib/units/device/resources/service.js lib/units/device/resources/service.js
index 17eaaae9..7f1f1e38 100644
--- lib/units/device/resources/service.js
+++ lib/units/device/resources/service.js
@@ -17,7 +17,7 @@ module.exports = syrup.serial()
       pathutil.vendor('STFService/wire.proto'))

     var resource = {
-      requiredVersion: '2.3.0'
+      requiredVersion: '2.4.0'
     , pkg: 'jp.co.cyberagent.stf'
     , main: 'jp.co.cyberagent.stf.Agent'
     , apk: pathutil.vendor('STFService/STFService.apk')
```  Thanks for the detailed description, but I’m going to have to ask you to look at old issues. In general, emulators are not supported, but some people have managed to get them to work. Please see past issues for their reports.  Sorry we can’t provide generic guidance, it’s too time consuming. What I would recommend is that you just read the source code a bit and have a go at implementing it yourself. If you run into a more specific issue, then ask again about that issue.  Thanks. Let’s keep this issue open, perhaps someone will figure it out. Personally I don’t have that device so I’m not able to look into it. If someone wants to donate one perhaps we can move a bit faster. I have Vivo X9 and Vivo X9 plus on my STF cluster, which both work very well.  You may need to enable "click simulation" (模拟点击) on your developer options. You're welcome.  We’ve been thinking of perhaps providing a paid API with full STF integration for automatically retrieving the device name, image and possibly some other details. This way companies would have a way of supporting the project while getting something back. They’d also get a normal invoice which is handy for tax purposes. At the same time, the service would only be of cosmetic value, so no one would be forced to use the service.

Would something like that be of interest to you?  It's not possible for the remote server to interact with your local ADB. Note that `stf local` is for development only, normally you'd have the server running on another computer.

The reason why DELETE is able to kill the connection is that it simply closes the remote TCP connection on the server side, and adb then notices that and removes the connection from the list. It's only able to affect what you see in your local adb because adb has already formed a connection to it earlier, so they're able to communicate (or in this case just end the socket which is a form of communication). If they're not able to communicate then there's no way anything can happen. `adb connect` establishes that communication channel. So, essentially, it's not possible to communicate before the communication channel itself exists.  The screen of mobile on the STF web page is actually image rendered by the Browser,  you can't inspect the element as DOM tree.
I am comfortable with UiAutomator and Appium to do test automation on Android mobile phone. Yes, you can use appium to connect with devices on STF.  Please search the older issues for a solution. This has been posted a lot.  The only configuration we support is in the [deployment guide](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md). You can do something similar with `stf local` on one machine and `stf provider` on other machines, but we won't help with that.  Yeah, I should review more but it's been difficult to find time for that for a long time now.

So, since you've contributed several times in the past, I've just invited you to join the org. You now have push access and can review others as well :)  I'm not sure if this works since I'm not using it, but since you made it and are using it I trust that it does work.  You need to clean this up. No way it’s getting merged like this. Do not submit pull requests that include merge commits from master. You should rebase your branch.

Also, it’s not clear what the PR does.  I bet you didn't install `yasm`. See https://github.com/openstf/stf#requirements. Install yasm, then reinstall STF. One of the native modules failed to build. If there's any error or warning during the build, you should post it here. No, I meant the ‘npm install’ output. No no... the output of the `npm install` command you used to install STF. So perhaps `npm install -g stf`. Include sudo if you used it. There's not enough output. There should be way more. Did you already have STF installed when you ran that?  What version of Firefox do you use?  I use Firefox 57.0 on Mac Pro, the problem can't recreated.  My Firefox is Quantum 57.0(64 bit) 2016.3. Til now I can't recreate your problem. Did you install any third-party plugin in your Firefox? My Firefox is Quantum 57.0(64 bit) 2016.3. Til now I can't recreate your problem. Did you install any third-party plugin in your Firefox? Try accessing the UI with “localhost”, not “127.0.0.1”.

On Wed, Dec 20, 2017 at 15:29 hanjideng <notifications@github.com> wrote:

> @thinkhy <https://github.com/thinkhy> I tried remove all the plugin and
> restart the firefox, but stil cannot work
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/774#issuecomment-352977028>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VT5KZNSNHJun8B3NYT9ZlvrudOHks5tCKlbgaJpZM4Q82Lz>
> .
>
  Run your STF with `DEBUG=adb* stf local` (or whatever command you're using). Then try again and provide the full log output. No, no. Run `DEBUG=adb* stf local --public-ip 10.41.17.66`. That DEBUG part is important. Something's wrong with your set up. Try again on a new machine or a virtual machine and see if anything changes. If it works, you know it's a problem with your original machine. Just any other machine. You just want to know if it works or not.

I'm super busy right now, don't have time to help you with this. While trying another machine may be annoying, it's the easiest way to "reset" your entire software configuration, and therefore the easiest way to know whether your original setup is broken.  Only if someone contributes that feature, or provides very generous funding. Otherwise we have no time to work on that.

Duplicate of #22.  Use the --allow--remote option. Note that ADB over WIFI is much, much slower than a regular USB connection, so don’t be surprised if the performance is poor. Start STF with that option, then run adb connect to add the device to your local adb. STF will then see it.  Looks good but please put the commas in line with the existing ones. Some are a bit too intended right now. Some editors try to mess them up by default. Merged, sorry it took so long. Been very busy lately.  Try running on Linux instead. On Mac various things suck. It's okay for development but we don't support Mac based deployments due to bad experiences in the past. I would still recommend at least attempting to run on Linux. Since the issue takes a very long time to appear, I don't think we're going to have enough resources & time to look into it unless we're 100% sure it's there.

I can say however that this is the first time I've heard of this issue, though there have been cases where devices disappear on Mac if a process dies. It's either a Mac USB stack issue or more likely a bug in adb. Thus my recommendation to avoid Mac.

I've had Linux machines running for months and years and never experienced this issue. All devices, including Samsung devices, have been fine.

How many devices do you have connected to the machine though? On one machine? Try to decrease the number to 8 and see if anything changes.  Probably it doesn't render at full resolution by default. Perhaps it upscales a lower resolution image? Check your settings and change the resolution to see if that makes a difference.

Also, run 'adb shell dumpsys window' and 'adb shell wm size' before changing anything and paste the output here.

To fully resolve this issue I'd need to have one of those devices, but I don't. Feel free to donate one if possible. I don't think I asked you to grep by anything? Anyway wm size confirms that it's running at a lower resolution by default. You can make it work in STF by changing the resolution in settings. Other than that, I can take a look if someone sends me that device.  Your log is too short. I need to see at least 10, preferably 100 lines BEFORE the error. If you install stf from npm, you don't need webpack. It ships with prebuilt assets. Please guys, stop using sudo. I know it's convenient to install Node from your package manager, but it truly sucks and can make so many things not work. Set up [nvm](https://github.com/creationix/nvm) and try again with that. If at any point you use sudo, you're doing something wrong.

When everything goes as expected, you should see the following line in the STF output:

```
INF/app 13302 [*] Using pre-built resources
```

Just to make sure that things are not broken, I ran `npm install -g stf` followed by `stf local` and everything went well. Great! I would still recommend using nvm though. Please search past issues, this happens quite a lot. Basically you either didn’t install all dependencies and/or you need to nuke node_modules and reinstall.  Your `--connect-sub` and `--connect-push` are completely wrong. Unless you've changed the ports, which isn't visible in your commands, they should be `--connect-sub tcp://IP_OF_MASTER_HERE:7114 --connect-push tcp://IP_OF_MASTER_HERE:7116`.  They are only stored for 10 minutes. Don’t expect to find them later. If you want to save one, right click the image and save.  1. stf local is for development only, so it doesn’t need to expose all options
2. you can still use an environment variable to set it if you need to.  > Request URL:wss://stf.example.com/socket.io/?uip=10.1.90.25&EIO=3&transport=websocket

Two things:
- Instead of using `stf.example.com`, you need to write your own domain.
- Also, if you are not using SSL, you need to use `ws://YOUR_DOMAIN` instead of `wss` Make sure that the address you’re using to access STF matches the websocket
URL. For example, if the ws url is wss://10.1.2.3, you should use
https://10.1.2.3 to access the app. Otherwise cookies don’t get passed and
things don’t work.

On Wed, Nov 15, 2017 at 23:31 Nemanja Nedic <notifications@github.com>
wrote:

> Is there a way to get some debug logs on the websocket service?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/756#issuecomment-344609508>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Z7DGCtJkyQAuqR-BAnWBIJQY2Nwks5s2vWrgaJpZM4Qew1X>
> .
>
  You are misunderstanding between Bearer Token authentication & oauth authentication here.

Bearer Token authentication is only for accessing REST API. And you can only create these token from STF UI. For browser authentication you will have to use one of the auth which STF provide such as `oauth`, `ldap`, `saml2` etc.

If you think setting up oauth is too much work and you want some minimal security, you can use `basic-auth` instead.  Refer this: https://github.com/openstf/stf/pull/254  Perhaps there were errors when you ran `npm install`? If `rm -rf node_modules && npm install` doesn't work, usually you're either missing a dependency (read the README) or you're missing a complete build environment (like perhaps python 2.7 or a c++ compiler). Ah... actually, it's more likely because you're using `sudo`. Sometimes, some modules refuse to build if you're root.

I would recommend installing and setting up node via `NVM`, which avoids the usual permission issues. You should **never** have to use `sudo` when running `node` or `npm`. Installing node from a package manager is the worst thing you can do, pretty much. If you're sure you want to do that anyway, you're on your own. However, perhaps https://docs.npmjs.com/getting-started/fixing-npm-permissions might help.  It’s not a magician. Your installation is broken. Do what I said.  You probably don’t have rethinkdb running. Read the README. Sounds like you’re doing something wrong. Try rebooting if you can’t figure out what’s causing that.  I'm too busy right now but ping me again in a few days. Ok I've now had time to briefly look at the PR. I think there are some issues that need to be resolved.

* minor: The code you've added doesn't respect our ESLint rules. For example, we don't use semicolons.
* minor: The `ldapGroupMembership` option has been added under the `options.ldap.bind`, but it isn't used for binding. It's only used for searching which is under a different section. I think the option should be renamed to `--ldap-search-group-membership` or `--ldap-search-allowed-groups` and in the JS object it should just be `groupMembership` or `allowedGroups`.
* major: I feel that the group check is done in the wrong spot. It should be part of ldaputil's `login()` function. All the LDAP options get passed to it so it shouldn't be difficult.
* major: Overall I'm not sure if checking the group post-search is a good idea. I feel like it should be part of the `query` in `login()`'s `tryFind()`. Though at the same time, we already have the `search.filter` option added earlier. Perhaps the whole membership check could already be done with that without changing any code? If not, please let me know why it doesn't work.  Hardware issue, can’t do anything about it. Read the README for recommendations. Avoid very long cables. You should also describe your hardware. Preferably exact model numbers. Not all powered hubs are equal, in fact very few are any good. It's a waste of my time to speculate too much, however if you see a device toggle between "device" and "offline" state, it's 99% guaranteed to be a hardware issue. Can't help.

It might become more stable once it's charged, but it might not. Sounds like your hub is unable to provide enough power to it. Read the README.  There is no password by default. Carefully look at the UI. It only asks for your name and email address. Anyone can get in.  Fork STF and replace the stf-device-db module with your own. It's too much work for us to keep it up to date. Fork the module and change the version to a github url or publish under a different name.  Get a better wifi router, that shouldn’t be an issue at all. Make sure you don’t put the phones in a rack or some other metallic enclosure though, the signal gets pretty bad there. Choose a good channel manually, too.

Also, you can run STF on multiple machines and have them in separate locations if necessary. If your are thinking about that scale, this might help you. 

https://code.facebook.com/posts/300815046928882/the-mobile-device-lab-at-the-prineville-data-center/ I’m sure you already know but we can’t help you design that. You should hire an expert at that scale, certainly sounds like you could afford it at least :) Keep it mind that we are merely unpaid contributors to an open source project. We can therefore only afford to spend a very limited time per issue, which isn’t enough to research a massive task like this.

I can only say that STF itself should function fine at that scale, though obviously you’ll need to run it on quite a few machines, and hardware choices are critically important.

I would be interested in hearing on your progress, though. We had 99% of the phones on LTE, because that was important to us. I’m sure you can get it working with WIFI, but you’ll have to be very careful when positioning the routers and devices. If you have the space, try splitting the devices into multiple locations.  ‘docker logs’ or alternatively journalctl may be more useful if you’re on a systemd machine.  Hmmmm interesting. It would indeed be the 2nd version with the duplicate LDAP in it. I agree that it looks weird but I guess that’s just the way it’ll be for now.  It's in the README, minitouch. Then check out the minitouch README after that.  It never worked reliably, and it hasn't been updated for newer Android versions. Don't use it. It's because it's not possible to add accounts without system permissions, so we tried to do it by emulating UI actions. 

Removing accounts works though.  Looks like a web font issue. You have a font issue of some kind. `Provisional headers are shown` just means that its using cached content. Try to check the `Disable cache` checkbox.

@HeartIsBeat can you check with latest [Canary version of Chrome](https://www.google.com/chrome/browser/canary.html) and also [Firefox](http://firefox.com)?
It looks like it may be a Chrome bug (see [here](https://bugs.chromium.org/p/chromium/issues/detail?id=602968)).  Don't ping people unless you have something valuable to add.

Furthermore, I can see from the doctor output that their STF is old. The output is different now. Updating might fix it. Otherwise, I guarantee that this is a setup issue of some kind.  I don't want to depend on imagemagick. I'm not convinced that this is the real reason. It's more likely a timing issue (e.g. reading a stream too late), and using imagemagick just happens to change the timing.

Most likely not merging unless some kind of proof is provided. Perhaps your gm is missing jpeg support for some reason? Are you able to use ‘gm convert’ on the command line? Good to know for reference, but I think it may just be an issue on your computer. On my mac and in our Alpine Linux based docker images, gm from the package manager contains JPEG support by default.

How did you originally install gm? Yes but I meant how did you install GraphicsMagick? With `apt-get`? I see, that would probably be the cause then. Package managers include some basic functionality by default.

I'll close this issue now, doesn't seem like there's a need for this change.  That is exactly how STF was meant to run. Read the deployment docs. They may be a bit complex but that's all the help we provide right now. Actually not exactly. STF does not connect to multiple adb servers. You can run pieces (units) of STF on many machines, and bundle them together into a single UI, which is what the deployment docs are for.  I made a somewhat more generic fix for this in a1866b0409a9abef755b0c78e48a74f493374700. Thanks!  Interesting. I don’t think we want to hardcode column names but perhaps this should be fixed by maybe introducing a new column type. I’m just happy that someone is actually using the search function :)

May I ask you how many devices you have connected to the system? Sounds like you may have quite a few.  If you're using `stf local`, use the `--provider` option to set the name. It's supposed to be a descriptive value that tells you where the provider is located, but you can choose whatever. Start stf again with the option you want, then refresh your browser. I’m not 100% sure but it should show up.  This is a problem that I can't fix without having the device here with me. If possible, please consider asking your company to donate one of those devices (a used one is fine) or donate funds to purchase one. Somewhat ironically, I hate working on devices remotely while debugging STF. The point of STF is to allow interaction that's as real as possible. I can't really tell what "real" is if I've never even seen the device myself. That combined with painfully slow SSH is usually super annoying and easily takes 3x as long as just having the device on hand would.

Based on the screenshot though, I guess that the Android API STFService uses to retrieve the display size was modified by Xiaomi to not include the software buttons. This could be verified by trying to run minicap with manually modified parameters and seeing if the buttons are actually there. I'm thinking they probably are, but are just cropped out. Interesting but I would prefer not calling `wm size` if possible, because there's no guarantee that the output format will be the same on all devices (including ancient ones), and it would be a huge pain to collect enough data to verify whether that's the case or not. It's also not entirely clear whether the value is affected by rotation or not. I'm hoping that there might be another Java method that returns real values... Btw there's a small bug in the `getResolution` you posted, it uses both `Promise.defer()` and `new Promise()`. The cleanup is tied on the deferred promise but it never gets resolved. Alternatively, https://github.com/openstf/minicap/issues/93 might be one way. More crash prone in theory, though. Related to #464, the LG V10 has an issue with both `wm size` and `minicap -i`. They both return  1440x2720, which includes the "second screen" at the top of the main screen. Using the full size with minicap results in a black area at the bottom of the screen image and even worse touch coordinates. The public Java API returns 1440x2560, which displays the correct screen area (though the touch coordinate issue is obviously still there). Well I can’t try it out. @thinkhy? @sorccu Can you please merge the code change(AndroidManifest.xml) for full-screen devices into STFService.apk?   Thanks Sorry I can’t yet - it will be at least another week till I have free time again. Tough times. OK, take your time. Please ping me if we need to test the new feature on Chinese brands devices. I've made the change. Can you try master now? I've tried the master of STFService.apk, which works very well. Thanks.  If you're getting an error, you should post the error. Perhaps you're seeing the help output but it may also be showing errors or warnings somewhere in there.  Thanks, I would have merged this but rather than pulling in a new dependency, `Date`'s `.toJSON()` (or `.toISOString()`) should do fine. The only downside is that it's in UTC, but as someone who deals with machines all over the world, I think it's more of an upside.  Sigh, the builder has died again... I think it was just out of disk space. It's building now, let's see if it works. Should be working again. It might just take a super long time. RPi is not very powerful. The full build can take several hours. Yes that may work, docker makes it fairly easy nowadays. We use a Scaleway C1 which is only 2.99EUR per month. Build still takes an hour or more but it does at least finish. An ODROID XU4 is also able to finish the build, and relatively quickly too. Check out https://github.com/openstf/stf/blob/master/docker/armv7l/stf-armv7l-baseimage%40.service. As you can see it sets an environment variable and also passes some options to the script. Well if it works for you I'm not going to complain :) File size is an issue but could perhaps be solved by flattening the image.

Mind sharing your Dockerfile and the steps you took? Might be useful for other people as well. I think the easiest way right now would be to just copypaste it here. Put it between three backticks and it should get syntax highlighting, too.

    ```Dockerfile
    FROM alpine
    ```

Results in:

```Dockerfile
FROM alpine
``` Thanks!  Based on the log output there’s a decent chance it could be a hardware issue (e.g. unsuitable hub that’s unable to provide enough power to all the devices), since adb reports that the device goes offline. You could also try capturing logcat output and see if there are any hints there. They work fine because the device only goes offline for a brief moment. It does kill all existing connections and shows up in the adb tracker as well. The “offline” state is reported directly by adb.

The thing about power issues is that things can sometimes work fine, but then something weird happens and you can’t explain it. It would be helpful to know what hardware you’re using. Unfortunately there are no timestamps in the log output so perhaps we’re talking about separate issues. Which part is the one that it shows when the issue happens? I see that one device goes offline, but then it comes back up and STF sets it up again. But I guess you didn’t mean that?

My best guess right now is that this could perhaps be related to zmq tcp timeout. Search past issues for details, there are a few environment variables you might want to try out. Does #100 look similar? Great! Closing the issue for now, then.  Did you perhaps start rethinkdb in a different folder than originally? Closing as there's no feedback. I will say however that this should not happen, but if it does, it's probably something RethinkDB-related. For example, it's possible for the database to get corrupt, though in that case RethinkDB would usually refuse to start at all.  What if you drag slower? I'm thinking this is probably caused by the touch coordinates jumping around too much. The issue is that on the browser side, it's not possible to retrieve mouse coordinates with subpixel accuracy. Since the tablet is much larger than the screen view in STF, it's possible that a single pixel on the browser side corresponds to 5-10 pixels on the device side. Then when you consider that mouse events aren't always perfectly continuous (e.g. for a 100 pixel movement you may only receive, say, 10 events instead of 100 events), it's quite possible that the resulting gesture simply isn't smooth enough. The system may then choose to ignore it as an accidental or incomplete gesture.

This could potentially be solved by interpolating fake touch events between each mouse coordinate pair, though it may also be necessary to introduce some input lag to smooth out the path of movement.

It's too much work for me to dig into right now, but it would be great if someone could give it a go.  It works fine. You’re supposed to do HTTPS via nginx. STF itself doesn’t and should not know anything about that. The deployment guide gives you some pointers.  See the other issues about this.  This is because the user could have left something unwanted open that doesn’t let the screen sleep, which is extremely bad for long term battery life. It's currently being done [here](https://github.com/openstf/stf/blob/445cfcf0bc025346bcfefae663fcd987285ade85/lib/units/device/plugins/group.js#L106) if that helps. Sure, please submit the PR! Note that we may or may not need changes but please go ahead. I would like to have automation testcase running on device connected with API, so the device is in "automation" status and would not be timedout.  You’re using an old version of STF. I guarantee you're either using an old version or a modified version. The paths in your log screenshot show `stf/vendor/minicap`. That path has not existed for 11 months. You should be seeing `stf/node_modules/minicap-prebuilt` instead.  Thank you! I changed the date to September as I'm not lucky enough to live in the future yet :)  I’ve made something like that in the past but I can’t publish it. It’s not too difficult though, try implementing it yourself. Thanks for the update. I think the lag you’re talking about is caused by network buffers. STF pushes frames as quickly as it can, which works well in local network conditions. When the client is far away, we push too much, and it results in delayed response to interaction. While not impossible to improve, it would take quite a bit of work andit’s not really the scenario STF was created for. Patches are welcome, though.  Impossible to say, depends on your hardware. Read the README. Read the README...  Could you explain your Use Case in more detail. May be there are better solutions.  Currently no, stf-provider would not work well with that. It is possible
but the configuration is annoying and I have no time to help with that.

If you must have the 2 interfaces on that machine, I would actually
recommend a 3 machine setup. One machine should be a load balancer, with a
setup that forwards each interface to the other machines, which would both
have a separate STF setup.

Unless you meant that you simply want the same STF to be accessible from 2
IPs. Then it's easy (with nginx config), though you can only show 1 IP in
the STF UI.

On Mon, Sep 18, 2017 at 15:33 César Calatrava Ruiz <notifications@github.com>
wrote:

> Hi again,
>
> I have a machine with two network interfaces, some mobiles will be
> connected to one of the IP_A and the rest to the other IP_B, could I deploy
> two STF services, one for each IP on the same machine?
>
> Thanks!
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/716#issuecomment-330138106>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YfnjTfrQleDFKWGNRskz5pDSnW1ks5sjg7AgaJpZM4PaeIr>
> .
>
  No idea. There are so many LDAP servers that if you're the only one having
a problem, it's pretty much your problem. Try to figure out what the error
means, and if it turns out we need to change something, update this issue
again with the details you've found.

On Thu, Sep 14, 2017 at 21:18 mrajendrac <notifications@github.com> wrote:

> Hi all,
>
> I have configured and started STF using LDAP server authentication, when i
> access STF using the credentials i get the below error in STF server logs
>
> _```
>
> ERR/auth-ldap 21737 [127.0.0.1] Unexpected error InvalidCredentialsError:
> 80090308: LdapErr: DSID-0C0903A9, comment: AcceptSecurityContext error,
> data 52e, v1db0
> at messageCallback
> (/usr/local/lib/node_modules/stf/node_modules/ldapjs/lib/client/client.js:1423:40)
> at Parser.onMessage
> (/usr/local/lib/node_modules/stf/node_modules/ldapjs/lib/client/client.js:1089:14)
> at Parser.EventEmitter.emit (events.js:95:17)
> at Parser.write
> (/usr/local/lib/node_modules/stf/node_modules/ldapjs/lib/messages/parser.js:117:8)
> at Socket.onData
> (/usr/local/lib/node_modules/stf/node_modules/ldapjs/lib/client/client.js:1076:22)
> at Socket.EventEmitter.emit (events.js:95:17)
> at Socket. (
>
> *stream_readable.js:746:14) at Socket.EventEmitter.emit (events.js:92:17)
> at emitReadable* (_stream_readable.js:408:10)
> at emitReadable (_stream_readable.js:404:5)
> at readableAddChunk (_stream_readable.js:165:9)
> at Socket.Readable.push (_stream_readable.js:127:10)
> at TCP.onread (net.js:526:21)
>
>
> Below is the step i have used to start STF
>
>
> **stf local --auth-type ldap --auth-options '["--ldap-url","ldap://10.xx.x.xxx:3268","--ldap-search-dn","OU=inner_ou,OU=inner_ou,DC=inner_dc,DC=inner_dc,DC=com","--ldap-bind-dn","CN=username,OU=inner_ou,	=inner_ou,DC=inner_dc,DC=inner_dc,DC=com","--ldap-bind-credentials","username_actual_credential","--ldap-search-field","sAMAccountName"]'**
>
> Please help me
>
> Thanks
> RajendraC
> 	
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/714>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_QsI_UoQCYI-N8mbDwdg5h7Ko4Jvks5siRmsgaJpZM4PXfZh>
> .
>
 See https://github.com/openstf/stf/blob/3b632b4314ccc28739a06a2a5de451e75fef63ca/lib/util/ldaputil.js and http://ldapjs.org/. `STF_AUTH_LDAP_LDAP_SEARCH_FIELD` is the field name to search against for the given username. If a match is found, it will return an object with multiple properties. `STF_AUTH_LDAP_LDAP_USERNAME_FIELD` is used to select one of those properties to display in the STF UI, and to use as a unique identifier for the user. Have you tried running the search queries manually with a command line tool to see if they’re working?  This has been asked in the past, search for past answers.

On Thu, Sep 14, 2017 at 17:43 Evgeny Hramov <notifications@github.com>
wrote:

> Can you add scrolling ability with mouse wheel how it is implemented in
> android emulator?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/713>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ePJMZxnTFDMPD6GfBoLp0R9-qlZks5siOdJgaJpZM4PXPeV>
> .
>
  Thanks for the good report. I'm not sure when I'll have time to look into
this, could be a really long time. It would be nice if you could try to
debug this further.

On Thu, Sep 14, 2017 at 4:07 Karol Wrótniak <notifications@github.com>
wrote:

> *What is the issue or idea you have?*
> Portrait/Landscape indicator logic is reversed on large (10"+) tablets,
> which are landscape by default. This happens for example on Samsing SM-P900.
> Here is a screenshot:
> [image: image]
> <https://user-images.githubusercontent.com/3340954/30395710-6411758a-98c7-11e7-8728-2e87cc00393d.png>
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> List of devices attached10.24.4.36:15029       device product:v1awifixx model:SM_P900 device:v1awifi
>
> *Please provide the steps to reproduce the issue.*
> Connect SM-P900 to STF.
>
> *What is the expected behavior?*
> Orientation indicator is consistent with actual orientation.
>
> There are 2 10.1 Samsung tablets available in remote test lab:
> http://developer.samsung.com/remotetestlab/galaxy/rtlDeviceList.action
> they can be connected via adb.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/711>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ecP8Dap_cTF76i3vbEiu55-rByAks5siCgMgaJpZM4PWlV6>
> .
>
 Good work! By coincidence, I happened to think about this issue this morning and figured that might indeed be the reason. I think it uses degrees because there were originally 4 selections available, and it was an easy way to map the icons. Should be a fairly easy fix.

Would you like to contribute the patch as well? :)  Don't compile it by hand, try to figure out why the require is not working
instead.

On Wed, Sep 13, 2017 at 19:44 qianxing <notifications@github.com> wrote:

> [image: screenshot]
> <https://user-images.githubusercontent.com/2938263/30373346-95afb926-98b3-11e7-85c2-845d1c673570.jpg>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/708#issuecomment-329130096>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VBjCFQ4scdaEz49ZuPh8Kgp8zJWks5sh7IYgaJpZM4PV5d4>
> .
>
 Good!  It means that the worker process crashed, or the device was disconnected (which also causes the worker process to die). When the worker process comes back, it gets a new set of ports. Currently you can't really change that. You should try to figure out why your device is disconnecting. Yeah that doesn't sound good.  1. Not really, there kind of is but it doesn't work like that, the user
must be logged in already.
2. Yes if you are willing to write your own rendering code. You can look at
the STF source as an example. We will not help with that, however.
3. Yes and no, it's functional but the client side is unfinished. The steps
you must take to make it work are fairly advanced, I'd rather you didn't
try unless you're very confident in your skills.

On Tue, Sep 12, 2017 at 2:14 denis99999 <notifications@github.com> wrote:

> It is not an issue but just a question.
>
> I'm using the RestFul API to remote connect to a device and once connected
> to it I would like to know if there is a way to get its screen as a
> detached window, that is it means without to login to the OpenSTF GUI ?
>
> I saw that properties returned for each device contain a "display" section
> with a web socket url value inside, is it possible to use it to reach my
> goal ?
>
> At provider side, I also saw in log file that a VNC server is started, is
> it possible to interact with it using a VNC client ?
>
> Thanks.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/706>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_WmVNt3QgpbRtqLW38z1iqQgSgiIks5shWpzgaJpZM4PTfaR>
> .
>
  Sounds like your Node.js may be too old. You should have ran `stf doctor` and posted the results here. Uninstall STF and reinstall. Some of the native modules are stuck at the older version you were using before. Just follow the README. You're missing dependencies again. Please stop wasting my time.  Nothing in your logs points to this being an STF issue.  Not sure. I don't think that's a very interesting feature honestly. What's
your use case?

On Thu, Sep 7, 2017 at 20:20 Evgeny Hramov <notifications@github.com> wrote:

> How can I open lock screen or lock device?
> As workaround I can press power button and reconnect device.
> In this case i will be on lock screen
> But i want to open lock steen without recinnecting.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/703>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bPblnuBGmzMIFFx3j8r1KgBSh4-ks5sf9FfgaJpZM4PPqsD>
> .
>
 @hram
One better workaround which I can think about for your use case is to run `input keyevent 82` in the shell present in the right side of device Dashboard view. This should work on most of the device but can't guarantee as different maker might make some change in their device.
 
@thinkhy  
> I resolved the problem by writing a Java program using UIAutomator to swipe the screen from bottom to top and from left to right

Instead of going through UIAutomator way, simply pressing `menu` button using `adb shell input keyevent 82` should unlock the screen if it is not password locked.  Actually it should be `input keyevent 26` to lock the device. https://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_POWER

`input keyevent 82` will unlock the device.
 I guess we could add a new CLI option to make automatic unlocking optional but enabled by default. Should be fairly easy to do, though I don't have time for that right now.  It does. Please check Linux again, perhaps it'll work there. Alternatively, perhaps you are running into https://github.com/openstf/stf/issues/603 or similar? Look for a similar setting and report back with your findings.

Also, you need to stop removing the issue template. We need those details. For example, you should've told us which device you're using.  I don't think that works. From what I know only Latin languages and some languages with a Latin-based IME (e.g. Japanese) work quite well.

It's not ideal, but you can tap on the software keys on the device itself.  As mentioned in the [README](https://github.com/openstf/stf#running)
> If you want to access STF from other machines, you can add the --public-ip option for quick testing.
>```bash
>stf local --public-ip <your_internal_network_ip_here>
>``` Do the real deployment then, as specified in the deployment guide. If you
set it up correctly you can access the system from a public address.

On Wed, Sep 6, 2017 at 17:14 tares003 <notifications@github.com> wrote:

> @vbanthia <https://github.com/vbanthia> it only works internal network
> not outside, I have opened the ports from 7000-25000.
> <your_internal_network_ip_here>
> should this be the public ip or internal IP.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/700#issuecomment-327410102>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YMwA4c6z5dQtSllYGJ20vKwviklks5sflR7gaJpZM4PNjPb>
> .
>
  Have you tried the same device on Linux? There could perhaps be some file
permissions issues on Windows.

On Tue, Sep 5, 2017 at 22:37 qianxing <notifications@github.com> wrote:

> INF/device 10336 [d31dd7b87d43] Preparing device
> INF/device:support:sub 10336 [d31dd7b87d43] Receiving input from "tcp://
> 127.0.0.1:7114"
> INF/device:support:sub 10336 [d31dd7b87d43] Subscribing to permanent
> channel "
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> *ALL" INF/device:support:properties 10336 [d31dd7b87d43] Loading
> properties INF/device:support:sdk 10336 [d31dd7b87d43] Supports SDK 23
> INF/device:support:abi 10336 [d31dd7b87d43] Supports ABIs arm64-v8a,
> armeabi-v7a, armeabi INF/device:resources:minicap 10336 [d31dd7b87d43]
> Installing "D:\Projects\stf\node_modules\minicap-prebuilt\prebuilt\arm
> 64-v8a\bin\minicap" as "/data/local/tmp/minicap"
> INF/device:resources:minicap 10336 [d31dd7b87d43] Installing
> "D:\Projects\stf\node_modules\minicap-prebuilt\prebuilt\arm
> 64-v8a\lib\android-23\minicap.so" as "/data/local/tmp/minicap.so"
> INF/device:resources:minicap 10336 [d31dd7b87d43] Pushed "minicap.so" not
> executable, attempting fallback location INF/device:resources:minicap 10336
> [d31dd7b87d43] Installing
> "D:\Projects\stf\node_modules\minicap-prebuilt\prebuilt\arm
> 64-v8a\lib\android-23\minicap.so" as
> "/data/data/com.android.shell/minicap.so" INF/device:resources:minicap
> 10336 [d31dd7b87d43] Pushed "minicap.so" not executable, attempting
> fallback location FTL/device 10336 [d31dd7b87d43] Setup had an error Error:
> Out of fallback locations for "D:\Projects\stf\node_modules\mi
> nicap-prebuilt\prebuilt\arm64-v8a\lib\android-23\minicap.so" at
> Resource.shift
> (D:\Projects\stf\lib\units\device\resources\util\resource.js:13:11) at
> D:\Projects\stf\lib\units\device\resources\minicap.js:110:19 at runCallback
> (timers.js:666:20) at tryOnImmediate (timers.js:639:5) at processImmediate
> [as _immediateCallback] (timers.js:611:5) FTL/util:lifecycle 10336
> [d31dd7b87d43] Shutting down due to fatal error INF/provider 6112 [*]
> Cleaning up device worker "d31dd7b87d43"
> ERR/provider 6112 [
> *] Device worker "d31dd7b87d43" died with code 1 INF/provider 6112 [*]
> Restarting device worker "d31dd7b87d43"
> INF/device:support:push 3944 [d31dd7b87d43] Sending output to "tcp://
> 127.0.0.1:7116"
> INF/device 3944 [d31dd7b87d43] Preparing device
> INFINFINF/util:lifecycle 9456 [
> *] Winding down for graceful exit INFINF/cli:local 9844 [*] Received
> SIGINT, waiting for processes to terminate
> FTL/cli:local 9844 [*] Child process had an error ExitError: Exit code
> "3221225786"
> at ChildProcess. (D:\Projects\stf\lib\util\procutil.js:49:23)
> at emitTwo (events.js:106:13)
> at ChildProcess.emit (events.js:191:7)
> at Process.ChildProcess._handle.onexit (internal/child_process.js:215:12)
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/699>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SdiKEmFv0QDOon25Z_51H8wazOsks5sfU6jgaJpZM4PM9dG>
> .
>
 We do not support Windows, so please try to figure it out by yourself. If
you can find out why exactly it's not working, and provide a patch, then we
can merge that assuming it makes sense. Other than that I will not look
look into this.

On Tue, Sep 5, 2017 at 22:51 qianxing <notifications@github.com> wrote:

> I have tried the same device on Linux, the device is showed in the devices
> center.
> But on my windows dev environment, it like this:
> [image: image]
> <https://user-images.githubusercontent.com/2938263/30064435-549f5ef8-9284-11e7-8bd5-3c7118776817.png>
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/699#issuecomment-327181401>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZtwYb9wpO8japW-GoLnD_RGeVSxks5sfVHUgaJpZM4PM9dG>
> .
>
 Could you run 'node' and enter 'require("fs").constants.S_IXUSR' in the prompt? Then please post the output here. If you can do that I think we can fix this. And can you also console.log(stats)?

On Wed, Sep 6, 2017 at 11:06 qianxing <notifications@github.com> wrote:

> I have fixed the problem by this way:
> function checkExecutable(res) { return adb.stat(options.serial, res.dest)
> .timeout(5000) .then(function(stats) { // return (stats.mode &
> fs.constants.S_IXUSR) === fs.constants.S_IXUSR return true; }) }
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/699#issuecomment-327353437>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Sq95P4Qfws7e37IrdItEAIWz0L1ks5sff4jgaJpZM4PM9dG>
> .
>
 Seems that on Windows the values are:

```
> require('fs').constants
{ O_RDONLY: 0,
  O_WRONLY: 1,
  O_RDWR: 2,
  S_IFMT: 61440,
  S_IFREG: 32768,
  S_IFDIR: 16384,
  S_IFCHR: 8192,
  S_IFLNK: 40960,
  O_CREAT: 256,
  O_EXCL: 1024,
  O_TRUNC: 512,
  O_APPEND: 8,
  F_OK: 0,
  R_OK: 4,
  W_OK: 2,
  X_OK: 1 }
```

On macOS, the values are:

```
> require('fs').constants
{ O_RDONLY: 0,
  O_WRONLY: 1,
  O_RDWR: 2,
  S_IFMT: 61440,
  S_IFREG: 32768,
  S_IFDIR: 16384,
  S_IFCHR: 8192,
  S_IFBLK: 24576,
  S_IFIFO: 4096,
  S_IFLNK: 40960,
  S_IFSOCK: 49152,
  O_CREAT: 512,
  O_EXCL: 2048,
  O_NOCTTY: 131072,
  O_TRUNC: 1024,
  O_APPEND: 8,
  O_DIRECTORY: 1048576,
  O_NOFOLLOW: 256,
  O_SYNC: 128,
  O_SYMLINK: 2097152,
  O_NONBLOCK: 4,
  S_IRWXU: 448,
  S_IRUSR: 256,
  S_IWUSR: 128,
  S_IXUSR: 64,
  S_IRWXG: 56,
  S_IRGRP: 32,
  S_IWGRP: 16,
  S_IXGRP: 8,
  S_IRWXO: 7,
  S_IROTH: 4,
  S_IWOTH: 2,
  S_IXOTH: 1,
  F_OK: 0,
  R_OK: 4,
  W_OK: 2,
  X_OK: 1 }
```

Linux and other *nix should be the same as macOS.

Guess we'll just hardcode the number then. Can you try the latest master and see if it works now? Ok. I think master should work for you, then. Thanks for figuring it out!  I don't know what you guys are doing with your Galaxies. My S8 (not S8+) is completely fine and has none of the issues you mention. It's a $1000 phone. There's no way I'll buy one just to test it out. All I
can say is that A) it should work, and B) it works for me.

If you're willing to donate your phone I can of course look into it.

On Tue, Sep 5, 2017 at 2:03 Litsvin <notifications@github.com> wrote:

> Mmmmmm... very useful answer, thanks)
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/698#issuecomment-327002912>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dpSuGn1AAqIGPuRXt-n1l3Skdtyks5sfC1xgaJpZM4PMENy>
> .
>
  Did you use yarn or npm to install the dependencies?

On Sun, Sep 3, 2017 at 10:39 thinkhy <notifications@github.com> wrote:

> For the latest version of STF(3.1), the package.json shows bluebird is
> 2.10.1:
>
>     **"bluebird": "^2.10.1",**
>     "adbkit-apkreader": "^2.1.2"
>
> In the modlue of "adbkit-apkreader 2.1.2", it shows bluebird has been
> upgraded to 3.4.7:
>
>       "dependencies": {
>           **"bluebird": "^3.4.7",**
>           "debug": "~0.7.4",
>           "yauzl": "^2.7.0"
>       },
>
> So after deploying the STF v3.1, the problem was encountered when trying
> to install APK package:
>
>     ERR/storage:plugins:apk 13930 [*] Unable to read manifest of "4f92bf05-283e-40d9-850e-d80eca3deec2" **TypeError: Promise.fromCallback is not a function**
>     at ApkReader._open (/Users/song/work/stf/node_modules/adbkit-apkreader/lib/apkreader.js:24:22)
>     at ApkReader.usingFileStream (/Users/song/work/stf/node_modules/adbkit-apkreader/lib/apkreader.js:66:19)
>     at ApkReader.usingFile (/Users/song/work/stf/node_modules/adbkit-apkreader/lib/apkreader.js:34:19)
>    at ApkReader.readManifest (/Users/song/work/stf/node_modules/adbkit-apkreader/lib/apkreader.js:102:19)
>    at /Users/song/work/stf/lib/units/storage/plugins/apk/task/manifest.js:5:19
>
> From previous event:
> at module.exports
> (/Users/song/work/stf/lib/units/storage/plugins/apk/task/manifest.js:4:36)
> at runCallback (timers.js:672:20)
> at tryOnImmediate (timers.js:645:5)
> at processImmediate [as _immediateCallback] (timers.js:617:5)
> ... ...
>
> Seems the function of "fromCallback is introduced in 3.x version of
> bluebird, so STF modules which still depends on bluebird 2.x can not work.
>
> Also I attempted to upgrad bluebird to 3.x for STF, but still hit the
> problem in lifecycle related function:
>
>  resolver.promise.cancellable is not a function ...
>
> It's because Cancellation
> <http://bluebirdjs.com/docs/api/cancellation.html> has been redesigned
> for bluebird 3.x. The symptom is that the program gets stuck with the
> message: "INF/util:lifecycle 15277 [*] Winding down for graceful exit"
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/696>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UDXcK5TmVXVITpXCtGkrI6SjR6Eks5segNagaJpZM4PLD0Z>
> .
>
 So, the stf repository is still supposed to use v2 (v3 won't work), and adbkit-apkreader should be using v3. I'm not sure why but it sounds like you only have one version installed. What does your `node_modules/adbkit-apkreader/node_modules/bluebird/package.json` look like? It would be great if we could upgrade, however we rely too much on cancellation and progression which are both deprecated. So I'm not sure what exactly happened here but I've just done a full reinstall of my modules and can confirm that `node_modules/adbkit-apkreader/node_modules/bluebird/package.json` was there, and the version was 3.5.0. `node_modules/bluebird/package.json` was 2.11.0. Everything should be fine.  STF grts that information from ADB. So ADB thinks that you have an emulator there - perhaps you really do? Can't really do anything about that right now, though there's a pull request that allows you to exclude devices.  I think there have been several issues like this in the past, you might want to take a look at open and closed issues. I'm not sure but it may have had something to do with Firefox. Might wanna try in Chrome.  Sounds like a misconfiguration issue. You should post the command you run
stf with.

On Thu, Aug 31, 2017 at 14:32 Tom Zhu <notifications@github.com> wrote:

> INF/device:plugins:identity 20013 [7c79daca7d24] Solving identity
> INF/device:plugins:solo 20013 [7c79daca7d24] Subscribing to permanent
> channel "Y1mg3qyc94+AnXsb2nyAhVdwumg="
> INF/device:plugins:screen:stream 20013 [7c79daca7d24] Starting WebSocket
> server on port NaN
> FTL/device 20013 [7c79daca7d24] Setup had an error RangeError: "port"
> argument must be >= 0 and < 65536
> FTL/util:lifecycle 20013 [7c79daca7d24] Shutting down due to fatal error
> INF/provider 3572 [
> *] Cleaning up device worker "7c79daca7d24" ERR/provider 3572 [*] Device
> worker "7c79daca7d24" died with code 1
> INF/provider 3572 [*] Restarting device worker "7c79daca7d24"
> INF/device:support:push 20087 [7c79daca7d24] Sending output to "tcp://
> 127.0.0.1:7116"
> INF/device 20087 [7c79daca7d24] Preparing device
> INF/device:support:sub 20087 [7c79daca7d24] Receiving input from "tcp://
> 127.0.0.1:7114"
> INF/device:support:sub 20087 [7c79daca7d24] Subscribing to permanent
> channel "
>
>
>
>
>
>
>
>
>
> *ALL" INF/device:support:properties 20087 [7c79daca7d24] Loading
> properties INF/device:support:sdk 20087 [7c79daca7d24] Supports SDK 23
> INF/device:support:abi 20087 [7c79daca7d24] Supports ABIs arm64-v8a,
> armeabi-v7a, armeabi INF/device:resources:minicap 20087 [7c79daca7d24]
> Installing
> "/home/wscn/Sites/ups/stf/node_modules/minicap-prebuilt/prebuilt/arm64-v8a/bin/minicap"
> as "/data/local/tmp/minicap" INF/device:resources:minicap 20087
> [7c79daca7d24] Installing
> "/home/wscn/Sites/ups/stf/node_modules/minicap-prebuilt/prebuilt/arm64-v8a/lib/android-23/minicap.so"
> as "/data/local/tmp/minicap.so" INF/device:resources:service 20087
> [7c79daca7d24] Checking whether we need to install STFService
> INF/device:resources:service 20087 [7c79daca7d24] Running version check
> INF/device:resources:service 20087 [7c79daca7d24] STFService up to date
> INF/device:plugins:service 20087 [7c79daca7d24] Launching agent
> INF/provider 3572 [*] Providing 12 of 18 device(s); waiting for
> "80fef2267d24", "7c79daca7d24", "7bc7d4147d24", "837caaf37d24",
> "74dcea477d24", "758fea877d24"
> INF/device:plugins:service 20087 [7c79daca7d24] Launching service
> INF/device:plugins:service 20087 [7c79daca7d24] Agent says: "Listening on
> @stfagent"
> INF/device:plugins:service 20087 [7c79daca7d24] Agent says: "InputClient
> started"
>
> so shoud i do
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/693>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dySk6lEcfwhX_fN261z24opkVkgks5sdkVbgaJpZM4PIUi3>
> .
>
 That command works fine for me.  You could attempt to analyze the logs I guess. You could use a third party
log collector service and run your queries there. Other than that, nope not
really, and it's unlikely to happen in the future, too.

On Wed, Aug 30, 2017 at 2:49 bisena <notifications@github.com> wrote:

> *Is there a way to find out how many different users accessed a
> device(connected to particular STF instance) per day and for how much time
> it was used?*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/692>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UbjOxuKF8igOvhxID6ZBkboFxQFks5sdE81gaJpZM4PGUK1>
> .
>
  See the deployment guide. Other than that, we don't have time to provide more assistance.  You're using the option and environment variable incorrectly.

On Mon, Aug 28, 2017 at 2:51 Patryk <notifications@github.com> wrote:

> *What is the issue or idea you have?*
> While using SCREEN_JPEG_QUALITY variable STF boot process stops on
> INF/db 17225 [*] Connecting to 127.0.0.1:28015
> (pressumably DB connection)
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
> N/A, devices do not load.
>
> *Please provide the steps to reproduce the issue.*
>
>    1. Start STF with ie.
>    ./stf local screen-jpeg-quality 40
>    or
>    ./launcher local --public-ip 192.168.1.83
>    STF_LOCAL_SCREEN_JPEG_QUALITY 40
>
> *What is the expected behavior?*
> screen_jpeg_quality variable should be set to 40 and STF should boot
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> Nope, no errors. If an instance was running without the variable, devices
> will load, but they will not show anything on screen, and after a short
> while will be kicked out
> INF/reaper 17201 [reaper001] Reaping device "ce011711a418990e01" due to
> heartbeat timeout
> INF/reaper 17201 [reaper001] Reaping device "a285daa5" due to heartbeat
> timeout
> INF/reaper 17201 [reaper001] Reaping device "LGV700db999815" due to
> heartbeat timeout
> INF/reaper 17201 [reaper001] Reaping device "cd1753ee" due to heartbeat
> timeout
> INF/reaper 17201 [reaper001] Reaping device "e7572a5c" due to heartbeat
> timeout
>
> [image: 2017-08-27_19-50-47]
> <https://user-images.githubusercontent.com/10826482/29752574-11298326-8b61-11e7-99bf-039558a2e8a5.gif>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/690>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_axjhxtgwlAm_LtaWWMh8EUgv0eXks5scayQgaJpZM4PD3lI>
> .
>
  Like it says, it's unable to reach your rethinkdb.

On Fri, Aug 25, 2017 at 23:18 1102592040 <notifications@github.com> wrote:

> stf-processor can not start , flowing
> [image: image]
> <https://user-images.githubusercontent.com/31344510/29717563-338dc9e8-89e2-11e7-8d35-ac15e9cd6ab7.png>
> logs ， flowing
> [image: image]
> <https://user-images.githubusercontent.com/31344510/29717492-f1f14f96-89e1-11e7-92ac-306942d4b29f.png>
> command ， flowing
> [image: image]
> <https://user-images.githubusercontent.com/31344510/29717595-52518f90-89e2-11e7-99e5-658823cc23c2.png>
> [image: image]
> <https://user-images.githubusercontent.com/31344510/29717626-6262101c-89e2-11e7-87f3-4c574da3cf3d.png>
> [image: image]
> <https://user-images.githubusercontent.com/31344510/29717642-6fdeb7fe-89e2-11e7-8597-e316bd622f70.png>
>
> everything i have try，but it not success ，please help me，thank you
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/688>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SClvznM04fdTaOTB66rgb28YhzKks5sbte5gaJpZM4PCuRM>
> .
>
 Please follow the deployment guide. It's a secret that only you know.

On Sun, Aug 27, 2017 at 22:57 1102592040 <notifications@github.com> wrote:

> @sorccu <https://github.com/sorccu>
> thank you your replay
> i have a problem about “SECRET=YOUR_SESSION_SECRET_HERE”，What value should
> I assign to it？is it the same as "AUTHKEY"，or I'm defining myself？
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/688#issuecomment-325199950>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_b8A9jJVMceAt5CoP5buNdIPj-M0ks5scXWpgaJpZM4PCuRM>
> .
>
  That's the way it works right now.

On Fri, Aug 25, 2017 at 14:36 bisena <notifications@github.com> wrote:

> *Whenever I click on a web link to a device for ex:
> http://x.x.x.x:7100/auth/mock/#!%2Fcontrol%2Fxxxxxxxx
> <http://x.x.x.x:7100/auth/mock/#!%2Fcontrol%2Fxxxxxxxx> it asks me for Name
> and Email Id and once I enter I am taken to Device list page rather that
> that particular device control screen. Am I using wrong link to access
> device or is it a bug?*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/687>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Xy1LfdH_MujoSfF1fV7ZmIGUwTWks5sbl1NgaJpZM4PCPrU>
> .
>
 For now, this behavior won't change, though we may accept a PR.  I would recommend using an USB cable instead as you may get horrible performance otherwise, but you can do that by starting STF with the `--allow-remote` option and then issuing a standard `adb connect` command after that. STF will then pick up the device.

Please close the ticket if this resolves your issue.  Seems that you have the GNU `libtool` installed on OS X. You should probably use the `libtool` that comes with Xcode instead. It should be located in `/usr/bin/libtool` which should forward it to `/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/libtool` or similar.  Please do not mention me directly. Someone rlse might answer.

The limit depends entirely on your hardware. It can be as low as 8 unless
you get the PCIE card.

On Wed, Aug 23, 2017 at 19:19 TuHuynhVan <notifications@github.com> wrote:

> I read to this: https://github.com/openstf/stf#recommended-hardware
>
> But I'm not sure we have information about maximum device connected to
> that recommended hardware.
>
> Please help me to confirm that.
> Thank @sorccu <https://github.com/sorccu> so much!
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/684>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SWqIvQlP1mJk9xAnQQuiobaFm54ks5sa_zJgaJpZM4O_zED>
> .
>
  Delete `node_modules` folder and reinstall dependencies with `npm install`  That hub you posted is useless, since it only supports BC 1.2 on the
flip-up ports. Note that there is a USB 3 version of our recommended hub if
you really want that, but in the past I've found the USB 2 version to be
more stable. It's less complex, more mature, and 95% of devices don't do
USB 3 anyway, so there's no point in getting the more expensive USB 3 hub.

On Tue, Aug 22, 2017 at 11:35 PM, tfcardoso <notifications@github.com>
wrote:

> Hi,
>
> just looking for an information. In https://github.com/openstf/
> stf#recommended-hardware You recommend UDB HUB:
>
> http://plugable.com/products/usb2-hub7bc
>
> But, that was long time ago. You still think its the best option? And
> using p.e.
>
> http://plugable.com/products/usb3-hub10c2/
>
> its a risk in terms of reliability?
>
> Thanks
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/682>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_WNXKQn5IEsMKz4kZAdpEcgMpQFuks5sauc8gaJpZM4O-tsl>
> .
>
  Not supported yet. There is already an issue about Android O. Do not make duplicates.  Your question is too broad. You need to ask something more specific.

There is no single source. Some are provided by the APK whereas some just
taken off of 'adb shell getprop'.

On Mon, Aug 21, 2017 at 19:34 risinek <notifications@github.com> wrote:

> Hi,
> I'm trying to customize the STF to our internal needs, and I need to fetch
> more details about device and show it in device detail.. But I can't figure
> out, wherefrom the STF is getting the informations like OS, SDK, Platform,
> HW details? Do I need to customize the mobile app STF, so it will send
> those informations, or can it be done from STF app without altering mobile
> app codes?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/679>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZIXLnY79aQykLIfm4lJxV7Qwp19ks5saV1GgaJpZM4O9K-c>
> .
>
 Search for getProperties.

On Mon, Aug 21, 2017 at 7:41 PM, risinek <notifications@github.com> wrote:

> 'adb shell getprop' is what I'm looking for, but I can't find it in STF
> codes anywhere to modify it to my needs
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/679#issuecomment-323710769>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Y-y3xCudd5ag6UuWeuaTM6RTS-6ks5saV68gaJpZM4O9K-c>
> .
>
 I can't help you with that. If you can't figure out how to retrieve that
property, you'll probably also need help in figuring out how to store it in
the database and how to display it in the UI, which would be way too time
consuming.

I would recommend trying to change existing version field first. Just
replace it with that property. Once you gain some confidence with that,
perhaps you'll be able to find a way to add the rest of the properties, too.

On Mon, Aug 21, 2017 at 21:19 risinek <notifications@github.com> wrote:

> Ok, thanks for you help.. Anyway I was not able to figure out, how to
> alter the adb shell command to return Knox SDK version..
> This is the command I want to use adb shell getprop
> net.knox.shareddevice.version
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/679#issuecomment-323729623>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bTEl8l_Ya5TradYMeVu3wZyLBoBks5saXW3gaJpZM4O9K-c>
> .
>
  They might not have the same domain. Additionally, there may be cases where
you do not have an HTTP request to take the values from.

Either way this is very unlikely to change unless someone provides a pull
request for it.

On Fri, Aug 18, 2017 at 0:39 lishuai0214 <notifications@github.com> wrote:

> I I find that auth-url, websocket-url, and --app-url useless in STF, the
> browser knows which domain it visit STF from, if we give a fixed domain ,
> accessing the *same* STF from *two* domains is very difficult, I think we
> can just give /auth/mock/ instead of https://stf.example.org/auth/mock/
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/678>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_TjfRVBSxlafaSn832qWGLgN_fhPks5sZF6egaJpZM4O6caF>
> .
>
  This is in the README. Hardware issues are no joke. Get better hardware.

On Thu, Aug 17, 2017 at 20:08 Patryk <notifications@github.com> wrote:

> *What is the issue or idea you have?*
> USB devices randomly disconnecting themselves
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
> No matter the devices, it was working well on 3-4 devices, then suddenly
> when I plugged two more it started to constantly restart - even unplugging
> the other ones does not fix the issue
>
> *Please provide the steps to reproduce the issue.*
>
>    1. Plug 3-4 devices
>    2. Start STF
>    3. Plug two more
>
> *What is the expected behavior?*
> They should work
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> https://pastebin.com/fj02PxEy
>
> *Please run stf doctor and paste the output here.*
> N/A, using docker, and while doing that it throws errors that are
> unrelated (like "adb is missing" while I'm able to fully use the devices)
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/677>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_QfC1rncT-L7sHZS0C7Yho4RO2dGks5sZB8mgaJpZM4O6HCz>
> .
>
 And what's the exact model of the hub?

On Thu, Aug 17, 2017 at 20:11 Patryk <notifications@github.com> wrote:

> I bought hardware specifically following the README. G4560 (so newest gen
> CPU) and B250M motherboard, along with SSD and 8gb of rams. Also top-end
> usb hubs, active, powered from power outlet.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/677#issuecomment-323039932>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ciFuYjiyWW6XK9V3g8cHqoaaeeuks5sZB_egaJpZM4O6HCz>
> .
>
 That hub is no good. It comes with a power adapter that's able to provide
12V*2A=24W. Even if the hub supported battery charging spec 1.1 or 1.2, a
device may use up to 5V*1.5A=7.5W, though usually 1A would be closer. As
you can see it's impossible for the hub to provide enough power. In the
manual, it even says: For best performance, the connected devices should
not exceed a combined current of 8A for UH720 (5A for UH700).


It's also highly unlikely that the hub actually supports BC, so even in
that sense it's just no good. Even ignoring the total output issue, it may
be unable to provide enough power for even a single power hungry device.


It's not about the price... it's about specs. You should return the hub or
throw it away.


On Thu, Aug 17, 2017 at 20:15 Patryk <notifications@github.com> wrote:

> http://www.tp-link.com.pl/products/details/cat-5688_UH700.html - UH700 TP
> Link, you can't even get a more expensive one in here. Also, I've been
> playing with STF a year or two ago, and it worked up to 10 devices on mac
> (!), so should work here too I guess?
>
> One more thing - I'm still waiting for the StarTech usb controller, but I
> think 6 devices should not restart themselves
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/677#issuecomment-323040852>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SH7PgqVtsWW5ATGi_tzBmBdqewUks5sZCDIgaJpZM4O6HCz>
> .
>
 That's the thing with USB hardware issues - sometimes things work for a while but aren't stable long term. I'm not sure where you're located but you should have other options than buying from the US, see http://plugable.com/products/usb2-hub7bc/. Also, it doesn't have to be that exact hub, but it needs to have similar specs.

Do note that you could also have issues with your other components. Right now the hub is the only component that's obviously bad but who knows? Having the latest and greatest isn't necessarily a guarantee of anything either - older Intel processors used to have enough resources to support 50+ phones connected simultaneously, but now you're limited to 8-12 without a PCIE card. It's a huge pain honestly as soon as you try to connect more devices than an average consumer would.

Your motherboard could also have a USB chipset that has quirks in Linux. That's why it would be best to get the PCIE card to minimize the variables. And again, note that there are differences between PCIE cards, you have to choose one with the right specs. Yes, BIOS settings can help sometimes. However, the settings themselves
depend heavily on the motherboard and they can be labelled in various ways,
or more commonly not be present at all. We will therefore under no
circumstance provide BIOS advice as that would be a complete nightmare.

However, if you have the skills to look into the settings by yourself, then
it can sometimes work out. Glad you found a way.

Do keep in mind that the stability could only be temporary, though.

On Mon, Aug 21, 2017 at 7:50 Patryk <notifications@github.com> wrote:

> One (really) last tip, that could help someone - I wasn't able to fix the
> 3.0 ports, BUT, after turning off ALL USB options in bios and, using
> powertop, in tunables, selecting autosupsend as "bad" resolved the issue
> completely. Even with the mentioned hubs, I was able to connect 24 devices
> (3x7 + 3 ports) and everything is super stable.
>
> [image: 2017-08-21_00-49-53]
> <https://user-images.githubusercontent.com/10826482/29499140-b5606574-860a-11e7-9a57-a364c6f58eca.png>
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/677#issuecomment-323617121>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Zzy2m-qV3B8vfhSXILoxnRNBgyaks5saLg0gaJpZM4O6HCz>
> .
>
 Yes, thank you :)  Try using the `--lock-rotation` option. Otherwise some devices rely on sensor data and either don't rotate or revert back quickly.

Please close the issue if this solves your problem. What is the exact command you use to start stf

On Thu, Aug 17, 2017 at 18:32 zoejiang2015 <notifications@github.com> wrote:

> Hi sorccu,
>
> thank you for your quit comment. but it's not working for me. any idea
> about it?
>
> *stf doctor* result:
> INF/cli:doctor 35364 [
> *] OS Arch: x64 INF/cli:doctor 35364 [*] OS Platform: darwin
> INF/cli:doctor 35364 [
> *] OS Platform: 14.5.0 INF/cli:doctor 35364 [*] Using Node 6.10.1
> INF/cli:doctor 35364 [
> *] Using ZeroMQ 4.2.2 INF/cli:doctor 35364 [*] Using RethinkDB 2.3.6
> INF/cli:doctor 35364 [
> *] Using GraphicsMagick 1.3.26 INF/cli:doctor 35364 [*] Using ADB 1.0.39
> INF/cli:doctor 35364 [*] Using ProtoBuf 3.3.2
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/676#issuecomment-323018780>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RUcLtM3Y33EN6_RVH4zUsvt-q9zks5sZAiegaJpZM4O54kS>
> .
>
 It should work. It has always worked on samsung devices, too.

Start from the assumption that it works. Then, try changing your
environment in various ways (e.g. use a different browser) and see if
anything changes.

On Thu, Aug 17, 2017 at 19:23 zoejiang2015 <notifications@github.com> wrote:

> I tried this two:
>
> stf local --public-ip 10.2.21.145 --allow-remote --lock-rotation;
> stf local --lock-rotation
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/676#issuecomment-323030095>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Rh3qzVJ8C5rRBextJKzIFpgoR_9ks5sZBScgaJpZM4O54kS>
> .
>
  Not possible with anything we currently have.

On Thu, Aug 17, 2017 at 0:23 Thuan Pham <notifications@github.com> wrote:

> Hello,
> I am trying to automatically extract co-ordinates of all user actions
> (e.g., tap or swipe) on a OpenSTF device.
>
> For actions which are manually triggered by a user on OpenSTF device, I
> can extract these co-ordinates by slightly modifying the code in
> stf/lib/units/device/plugins/touch/index.js. Specifically, I can extract
> the co-ordinates once the device screen is touched from
> TouchConsumer.prototype.touchDown = function(point) {...} function.
>
> However, my approach does not work for actions which are automatically
> triggered by Appium test scripts (like the ones in STF appium example :
> https://github.com/openstf/stf-appium-example). I suspect that the reason
> is because after getting the remote ADB URL from OpenSTF, Appium calls "adb
> connect" to directly control the selected device so it doesn't use any
> component of OpenSTF, except the minicap for doing a kind of "streaming".
> Am I right?
>
> If I am wrong, could you please let me know whether I can retrieve
> co-ordinates of actions triggering by Appium test scripts from somewhere
> else in OpenSTF code base or not? I have taken a look into the adbkit
> module (https://github.com/openstf/adbkit) but have not found any
> solution. Many thanks.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/675>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dqWcciTB0Iy8yfYAFULNszKpjLLks5sYwlVgaJpZM4O5FMO>
> .
>
  You really need to provide the full output STF shows you. Otherwise there's nothing we can do. Use three backticks to format a block of code.

That looks like a relatively obvious error - is the disk full? Ok, run STF with `DEBUG=adb* stf local` and you should see the `pm install` command it runs. Copy that command and try running it manually. Paste the full output here. Also, run `adb shell ls -l /data/local/tmp/` and paste the full output here. You should look for a setting on the phone to allow the service to auto
start.

On Wed, Aug 23, 2017 at 0:20 thinkhy <notifications@github.com> wrote:

> In my case, some devices keep in preparation status are due to stf service
> can't be started directly, on some devices, we should start activity first
> then start the service by issuing:
>
>  >> dbb shell am start -n jp.co.cyberagent.stf/.IdentityActivity
>  >>  adb shell am startservice  -n jp.co.cyberagent.stf/.Service
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/674#issuecomment-324060370>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_V695495pGZGtfQebyp9ARjVMShWks5savHYgaJpZM4O4fFN>
> .
>
 Are you really really sure there's no auto start setting somewhere?  Great detective work! I've personally never used nodeenv, and have never had issues with nvm, so an easier alternative may be to use nvm instead.

It could also be related to how you launch STF, for example `./node_modules/stf/bin/stf` may not work, whereas `bin/stf` in the STF module folder may work. That's a complete guess, though. I guess it breaks [here](https://github.com/openstf/stf/blob/461ec81c9ed3a149bd31906b1fc4546e95fee592/lib/units/app/index.js#L30). Does `/usr/local/share/.config/yarn/global/node_modules/stf/node_modules/stf-wiki` exist? If not, how about `/usr/local/share/.config/yarn/global/node_modules/stf-wiki`? Specifically the error is thrown [here](https://github.com/lyphtec/markdown-serve/blob/v0.3.2/lib/server.js#L241). Perhaps someone on an affected system can modify that file and do a `console.log('rootDirectory is: ', rootDirectory)` before the check?  Looks like dockerhub build trigger is not working. Will trigger manually for now.  You can find both `latest` & `v3.0.0` image on docker hub.
https://hub.docker.com/r/openstf/stf/builds/

Somehow, automatic build trigger was off and because of that images were not building. It should be fine now. 

Thanks for reporting.  Difficult to say. However, we don't recommend installing node via homebrew
or the official installer due to permission issues with global modules. Use
nvm instead.

On Thu, Aug 10, 2017 at 20:42 tares003 <notifications@github.com> wrote:

> Just update : I have created another user on the same mac and started all
> the services and it works. Can I know what is the issue or mistake I am
> doing?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/671#issuecomment-321528072>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Um6LVPgTQwNG0zBJ55aTl5KBOuUks5sWuyYgaJpZM4OzPii>
> .
>
  You haven't posted the actual error, which is above those lines.

On Thu, Aug 10, 2017 at 19:12 Jeff_Feng <notifications@github.com> wrote:

> ryOnImmediate (timers.js:645:5)
> at processImmediate [as _immediateCallback] (timers.js:617:5)
> FTL/util:lifecycle 11076 [A02AECPB2E3T4] Shutting down due to fatal error
> INF/provider 10924 [*] Cleaning up device worker "A02AECPB2E3T4"
> *ERR/provider 10924 [*] Device worker "A02AECPB2E3T4" died with code 1*
>
> INF/provider 10924 [*] Restarting device worker "A02AECPB2E3T4"
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/670>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Qhh-OLpWJc3DJe-eATW9EK9cDAXks5sWtemgaJpZM4OzOIs>
> .
>
 Sounds like you have the same issue as some other devices. It's a setting.
Look for the issue about adding Xiaomi devices to STF. Use that and the
linked issues as a guide for finding the auto-start setting. Then update us
when you know.

On Fri, Aug 11, 2017 at 11:19 Jeff_Feng <notifications@github.com> wrote:

> FTL/device 14370 [A02AECPB2E3T4] Setup had an error Error: Service had an
> error: "Error: Not found; no service started."
> at
> /usr/local/node-v6.11.0-linux-x64/lib/node_modules/stf/lib/units/device/plugins/service.js:101:23
> From previous event:
> at
> /usr/local/node-v6.11.0-linux-x64/lib/node_modules/stf/lib/units/device/plugins/service.js:76:14
> at runCallback (timers.js:672:20)
> at tryOnImmediate (timers.js:645:5)
>
>
> at processImmediate [as _immediateCallback] (timers.js:617:5)
>
> FTL/util:lifecycle 14370 [A02AECPB2E3T4] Shutting down due to fatal error
> INF/provider 12986 [
> *] Cleaning up device worker "A02AECPB2E3T4" ERR/provider 12986 [*]
> Device worker "A02AECPB2E3T4" died with code 1
>
> Do you know YunOS？The error on YunOS by Alibaba.
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/670#issuecomment-321719168>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_akB6gC4mxmDemIgTIhDg5AchYirks5sW7odgaJpZM4OzOIs>
> .
>
  Can't really help you with this because it's an installation issue. However, I've just released v3.0.0 on NPM, so perhaps installing that would work better.  Your STF is too old. The latest version hasn't been published to NPM yet, so you should build from master for now.  Seems OK I guess. Firewall blocking local connections maybe? Anyway we
don't really provide support at this level, as it's unlikely to be an issue
with STF itself. Hopefully you can figure out what's wrong.

On Wed, Aug 9, 2017 at 0:36 Cheng-yu Lam <notifications@github.com> wrote:

> I had a quick look in the source, and it asked for protoc, so I ran protoc
> --version and this is the output:
>
> protoc --version
> libprotoc 3.2.0
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/667#issuecomment-320994307>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZU3p4Es1WikokuNzoDERzGKmHp_ks5sWIB-gaJpZM4Ow51q>
> .
>
 That's weird, but good to hear you were able to solve the issue.  Sounds like you've misconfigured it, you should have used the `--public-ip` option to let STF know which IP you'd like to use. Good!  99% chance you already have another copy of STF running.

On Fri, Aug 4, 2017 at 11:39 PM, mrajendrac <notifications@github.com>
wrote:

> Hi Team,
>
> I have installed all the pre requisites as mentioned the documents,
> however when i run the 'stf local' to start the stf server from terminal i
> am getting the below error
>
> *NOTE :* When i type stf doctor , i see nothing in the terminal window.
>
> NF/reaper 24112 [reaper001] Sending output to "tcp://127.0.0.1:7116"
> INF/poorxy 24121 [*] Listening on port 7100
>
> events.js:72
> throw er; // Unhandled 'error' event
> ^
> Error: listen EADDRINUSE
> at errnoException (net.js:901:11)
> at Server._listen2 (net.js:1039:14)
> at listen (net.js:1061:10)
> at Server.listen (net.js:1127:5)
> at module.exports (/usr/local/lib/node_modules/
> stf/lib/units/poorxy/index.js:67:10)
> at Command.program.command.description.option.option.
> option.option.option.option.action.require.port
> (/usr/local/lib/node_modules/stf/lib/cli.js:637:30)
> at Command.listener (/usr/local/lib/node_modules/
> stf/node_modules/commander/index.js:300:8)
> at Command.EventEmitter.emit (events.js:98:17)
> at Command.parseArgs (/usr/local/lib/node_modules/
> stf/node_modules/commander/index.js:635:12)
> at Command.parse (/usr/local/lib/node_modules/stf/node_modules/commander/
> index.js:457:21)
> at Object. (/usr/local/lib/node_modules/stf/lib/cli.js:1266:9)
> at Module._compile (module.js:456:26)
> at Object.Module._extensions..js (module.js:474:10)
> at Module.load (module.js:356:32)
> at Function.Module._load (module.js:312:12)
> at Function.Module.runMain (module.js:497:10)
> FTL/cli:local 24106 [*] Child process had an error ExitError: Exit code "8"
> at ChildProcess. (/usr/local/lib/node_modules/stf/lib/util/procutil.js:49:
> 23)
> at ChildProcess.EventEmitter.emit (events.js:98:17)
>
> Thanks
> RajendraC
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/664>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_WxgkZD5BSMes5XOawPWUsIhjoZmks5sUy0ZgaJpZM4OtzSy>
> .
>
 Hmm, interesting that they use the same port. That's not possible, I have no time to give detailed guidance to anyone. I
would suggest posting specific issues on GitHub and maybe someone will have
time to answer those at some point.

On Mon, Aug 7, 2017 at 4:45 PM, mrajendrac <notifications@github.com> wrote:

> Yes, sorccu,
> I would like to be in touch with you for the goal i am trying for using
> STF, I have my appium+Selenium(automation tools) automated scripts are
> developed and stored it my desktop, every time i am running those scripts
> on physical devices by connecting through USB cable. Now i would like to
> make a local cloud of all my devices and would like to access those devices
> over the localhost to run my automated tests,
>
> Any help in this regard would highly help to achieve my goal
>
> Thanks in Advance,
> RajendraC
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/664#issuecomment-320592874>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_QTptHUWRA3pIg08PAjL5ZQtdj66ks5sVsCGgaJpZM4OtzSy>
> .
>
  That would be a task for other software. STF only provides remote access to
devices; it doesn't run any tests.

On Fri, Aug 4, 2017 at 3:44 Ricardo Valtierra <notifications@github.com>
wrote:

> First of all, thank you for your great software.
> It has been a really great source of help, and I'm looking for an option
> to install the same APK and run the same test on a group of selected
> devices from the STF panel. Is there a way to do this?
>
> Thanks in advance.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/663>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZANPfVbgxpbCZJj2oNV5yxci9mwks5sUhTvgaJpZM4Os1lT>
> .
>
 Either set up and use your own domain name or use an IP address.  I'm not 100% sure what you're asking but I think you believe that you're
supposed to replace those values. It's a pattern (or template), you're
supposed to leave it like that. The values are variables that are passed to
the template.

On Fri, Aug 4, 2017 at 13:58 45minutepromise <notifications@github.com>
wrote:

> @sorccu <https://github.com/sorccu> @vbanthia
> <https://github.com/vbanthia> Any suggestion here guys?
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/662#issuecomment-320156410>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZqyILjtORdCqqa68tbPvQp3sgnLks5sUqT0gaJpZM4OqkQB>
> .
>
 Well that seems like some sort of a configuration issue then.

On Fri, Aug 4, 2017 at 14:08 45minutepromise <notifications@github.com>
wrote:

> @sorccu <https://github.com/sorccu>
> I currently have 2 issues:
>
>    - If I hard code the serial number for provider, then only it gets
>    registered and starts to provide, but fails at the websocket connection.failed:
>    Error during WebSocket handshake: Unexpected response code: 400, I
>    still have an operable greyed out screen.
>    - If I give the provider any other name apart from serial number of
>    device - it just gets filtered out.
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/662#issuecomment-320157641>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Y2x_JVR1ZbWo7xk9sgQWVUOUu2Qks5sUqdfgaJpZM4OqkQB>
> .
>
 Ok, I've never deployed STF on kubernetes so I can't really help you with
that.

You could try posting the exact config and units you're using here. Perhaps
someone will spot something.

On Fri, Aug 4, 2017 at 14:11 45minutepromise <notifications@github.com>
wrote:

> And this happens only in the case of creating it as a replication
> controller in k8s If I make provider as a daemon service on the machine, it
> provides correctly - 'That's why I am trying to understand, how I can get
> this in k8s'
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/662#issuecomment-320157927>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UcXI3um_4mP0zcbQtpikfYfVFAbks5sUqfzgaJpZM4OqkQB>
> .
>
 Closing as requested information has not been provided.  I'm sorry but we have absolutely no time to help with Windows issues. If you use Windows, you're on your own. Perhaps you could try a Linux virtual machine?  We do not support Macs in production. They're a pain and and a waste of
everyone's time.

On Thu, Jul 27, 2017 at 20:00 viktors89 <notifications@github.com> wrote:

> Hello there!
>
> *What is the issue or idea you have?*
> Recently we bought a Mac Mini and I migrated STF from our Mac to the Mac
> Mini. Everything's working well, but there's this issue that I don't know
> why happens.
>
> The problem is that sometimes when I plug/unplug a phone, it seems like
> openstf's devices all unplugged and they restart connecting again.
>
> *Please provide the steps to reproduce the issue.*
> With STF running, just plug/unplug some devices and it will eventually
> happening.
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> NF/provider 14788 [
>
>
>
>
> *] Providing all 14 of 16 device(s); ignoring "CB5A1XN5M8", "0f680bfc"
> IMP/device:plugins:service 25307 [04d86162a2438995] Agent connection ended,
> attempting to relaunch INF/device:plugins:service 25307 [04d86162a2438995]
> Launching service IMP/device:plugins:service 25307 [04d86162a2438995]
> Service connection ended, attempting to relaunch INF/device:plugins:service
> 25307 [04d86162a2438995] Launching service INF/provider 14788 [*] Lost
> device "04d86162a2438995" (device)
> INF/provider 14788 [
> *] Shutting down device worker "04d86162a2438995" INF/provider 14788 [*]
> Cleaning up device worker "04d86162a2438995"
> INF/provider 14788 [
>
>
>
>
> *] Gracefully killing device worker "04d86162a2438995"
> WRN/device:plugins:touch 25307 [04d86162a2438995] Shell keeping minitouch
> running ended unexpectedly INF/device:plugins:touch 25307
> [04d86162a2438995] Disconnecting from minitouch service FTL/util:lifecycle
> 25307 [04d86162a2438995] Forward shell ended; we shall share its fate
> FTL/util:lifecycle 25307 [04d86162a2438995] Shutting down due to fatal
> error INF/provider 14788 [*] Device worker "04d86162a2438995" has retired
> IMP/device:plugins:service 25298 [5B17000411] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25298 [5B17000411] Launching service
> IMP/device:plugins:service 25294 [ZX1D22B4MV] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25294 [ZX1D22B4MV] Launching service
> IMP/device:plugins:service 25298 [5B17000411] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25298 [5B17000411] Launching service
> IMP/device:plugins:service 25294 [ZX1D22B4MV] Service connection ended,
> attempting to relaunch
> WRN/device:plugins:touch 25298 [5B17000411] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:service 25294 [ZX1D22B4MV] Launching service
> INF/device:plugins:touch 25298 [5B17000411] Disconnecting from minitouch
> service
> WRN/device:plugins:touch 25294 [ZX1D22B4MV] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 25294 [ZX1D22B4MV] Disconnecting from minitouch
> service
> IMP/device:plugins:service 25295 [RB042046] Agent connection ended,
> attempting to relaunch
> IMP/device:plugins:service 25300 [0e32a002f1645052] Agent connection
> ended, attempting to relaunch
> INF/device:plugins:service 25295 [RB042046] Launching service
> IMP/device:plugins:service 25302 [aa9443f6] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25300 [0e32a002f1645052] Launching service
> INF/device:plugins:service 25302 [aa9443f6] Launching service
> IMP/device:plugins:service 25303 [FC047636] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25303 [FC047636] Launching service
> IMP/device:plugins:service 25302 [aa9443f6] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25302 [aa9443f6] Launching service
> IMP/device:plugins:service 25295 [RB042046] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25295 [RB042046] Launching service
> IMP/device:plugins:service 25300 [0e32a002f164IMP/device:plugins:service
> 25299 [d6656b6a] Agent connection ended, attempting to relaunch
> INF/device:plugins:service 25299 [d6656b6a] Launching service
> IMP/device:plugins:service 25299 [d6656b6a] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25299 [d6656b6a] Launching service
> IMP/device:plugins:service 25308 [CB5A2AGTZ3] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25308 [CB5A2AGTZ3] Launching service
> WRN/device:plugins:touch 25299 [d6656b6a] Shell keeping minitouch running
> ended unexpectedly
> IMP/device:plugins:service 25308 [CB5A2AGTZ3] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25308 [CB5A2AGTZ3] Launching service
> INF/device:plugins:touch 25299 [d6656b6a] Disconnecting from minitouch
> service
> WRN/device:plugins:touch 25308 [CB5A2AGTZ3] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 25308 [CB5A2AGTZ3] Disconnecting from minitouch
> service
> 5052] Service connection ended, attempting to relaunch
> IMP/device:plugins:service 25305 [06157df6612b5c22] Agent connection
> ended, attempting to relaunch
> INF/device:plugins:service 25305 [06157df6612b5c22] Launching service
> INF/device:plugins:service 25300 [0e32a002f1645052] Launching service
> IMP/device:plugins:service 25305 [06157df6612b5c22] Service connection
> ended, attempting to relaunch
> INFWRN/device:plugins:touch 25295 [RB042046] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 25295 [RB042046] Disconnecting from minitouch
> service
> IMP/device:plugins:service 25297 [a3a14ab9] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25297 [a3a14ab9] Launching service
> IMP/device:plugins:service 25301 [565347b5] Agent connection ended,
> attempting to relaunch
> INF/device:plugins:service 25301 [565347b5] Launching service
> IMP/device:plugins:service 25306 [013e689795773670] Agent connection
> ended, attempting to relaunch
> INF/device:plugins:service 25306 [013e689795773670] Launching service
> IMP/device:plugins:service 25297 [a3a14ab9] Service connection ended,
> attempting to relaunch
> IMP/device:plugins:service 25301 [565347b5] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25301 [565347b5] Launching service
> IMPINF/device:plugins:service 25297 [a3a14ab9] Launching service
> /device:plugins:service 25306 [013e689795773670] Service connection ended,
> attempting to relaunch
> WRN/device:plugins:touch 25297 [a3a14ab9] Shell keeping minitouch running
> ended unexpectedly
> INF/device:plugins:service 25306 [013e689795773670] Launching service
> 9m/device:plugins:service 25305 [06157df6612b5c22] Launching service
> IMP/device:plugins:service 25296 [52006836bede3287] Agent connection
> ended, attempting to relaunch
> INF/device:plugins:touch 25297 [a3a14ab9] Disconnecting from minitouch
> service
> INF/device:plugins:service 25296 [52006836bede3287] Launching service
> WRN/device:plugins:touch 25305 [06157df6612b5c22] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 25305 [06157df6612b5c22] Disconnecting from
> minitouch service
> IMP/device:plugins:service 25296 [52006836bede3287] Service connection
> ended, attempting to relaunch
> IMP/device:plugins:service 25303 [FC047636] Service connection ended,
> attempting to relaunch
> INF/device:plugins:service 25303 [FC047636]
> LaunchinWRN/device:plugins:touch 25306 [013e689795773670] Shell keeping
> minitouch running ended unexpectedly
> INF/device:plugins:touch 25306 [013e689795773670] Disconnecting from
> minitouch service
> WRN/device:plugins:touch 25300 [0e32a002f1645052] Shell keeping minitouch
> running ended unexpectedly
> g service
> INF/device:plugins:touch 25300 [0e32a002f1645052] Disconnecting from
> minitouch service
> WRN/device:plugins:touch 25303 [FC047636] Shell keeping minitouch running
> ended unexpectedly
> WRN/device:plugins:touch 25302 [aa9443f6] Shell keeping minitouch running
> ended unexpectedly
> INF/device:plugins:touch 25302 [aa9443f6] Disconnecting from minitouch
> service
> INF/device:plugins:touch 25303 [FC047636] Disconnecting from minitouch
> service
> INF/device:plugins:service 25296 [52006836bede3287] Launching service
> FTL/util:lifecycle 25302 [aa9443f6] Forward shell ended; we shall share
> its fate
> WRN/device:plugins:touch 25296 [52006836bede3287] Shell keeping minitouch
> running ended unexpectedly
> FTL/util:lifecycle 25305 [06157df6612b5c22] Forward shell ended; we shall
> share its fate
> FTL/util:lifecycle 25302 [aa9443f6] Shutting down due to fatal error
> FTL/util:lifecycle 25305 [06157df6612b5c22] Shutting down due to fatal
> error
> INF/device:plugins:touch 25296 [52006836bede3287] Disconnecting from
> minitouch service
> WRN/device:plugins:touch 25301 [565347b5] Shell keeping minitouch running
> ended unexpectedly
> FTL/util:lifecycle 25295 [RB042046] Forward shell ended; we shall share
> its fate
> FTL/util:lifecycle 25295 [RB042046] Shutting down due to fatal error
> INF/device:plugins:touch 25301 [565347b5] Disconnecting from minitouch
> service
> FTL/util:lifecycle 25296 [52006836bede3287] Forward shell ended; we shall
> share its fate
> FTL/util:lifecycle 25296 [52006836bede3287] Shutting down due to fatal
> error
> FTL/util:lifecycle 25301 [565347b5] Forward shell ended; we shall share
> its fate
> FTL/util:lifecycle 25301 [565347b5] Shutting down due to fatal error
> INF/provider 14788 [
> *] Device "CB5A2AGTZ3" is now "offline" (was "device") INF/provider 14788
> [*] Device "013e689795773670" is now "offline" (was "device")
> INF/provider 14788 [
>
>
>
>
>
>
>
>
> *] Device "06157df6612b5c22" is now "offline" (was "device")
> FTL/util:lifecycle 25308 [CB5A2AGTZ3] Forward shell ended; we shall share
> its fate FTL/util:lifecycle 25308 [CB5A2AGTZ3] Shutting down due to fatal
> error FTL/util:lifecycle 25297 [a3a14ab9] Forward shell ended; we shall
> share its fate FTL/util:lifecycle 25294 [ZX1D22B4MV] Forward shell ended;
> we shall share its fate FTL/util:lifecycle 25294 [ZX1D22B4MV] Shutting down
> due to fatal error FTL/util:lifecycle 25297 [a3a14ab9] Shutting down due to
> fatal error FTL/util:lifecycle 25298 [5B17000411] Forward shell ended; we
> shall share its fate FTL/util:lifecycle 25298 [5B17000411] Shutting down
> due to fatal error INF/provider 14788 [*] Device "aa9443f6" is now
> "offline" (was "device")
> INF/provider 14788 [
> *] Device "d6656b6a" is now "offline" (was "device") INF/provider 14788 [*]
> Device "FC047636" is now "offline" (was "device")
> INF/provider 14788 [
> *] Device "a3a14ab9" is now "offline" (was "device") INF/provider 14788 [*]
> Device "565347b5" is now "offline" (was "device")
> INF/provider 14788 [
> *] Device "52006836bede3287" is now "offline" (was "device") INF/provider
> 14788 [*] Device "0e32a002f1645052" is now "offline" (was "device")
> INF/provider 14788 [
> *] Device "RB042046" is now "offline" (was "device") INF/provider 14788 [*]
> Device "ZX1D22B4MV" is now "offline" (was "device")
> INF/provider 14788 [
> *] Lost device "5B17000411" (device) INF/provider 14788 [*] Shutting down
> device worker "5B17000411"
> INF/provider 14788 [
> *] Lost device "0f680bfc" (offline) INF/provider 14788 [*] Lost device
> "CB5A1XN5M8" (offline)
> INF/provider 14788 [
> *] Lost device "ZX1D22B4MV" (offline) INF/provider 14788 [*] Shutting
> down device worker "ZX1D22B4MV"
> INF/provider 14788 [
> *] Cleaning up device worker "aa9443f6" INF/provider 14788 [*] Cleaning
> up device worker "06157df6612b5c22"
> FTL/util:lifecycle 25299 [d6656b6a] Forward shell ended; we shall share
> its fate
> FTL/util:lifecycle 25299 [d6656b6a] Shutting down due to fatal error
> FTL/util:lifecycle 25303 [FC047636] Forward shell ended; we shall share
> its fate
> FTL/util:lifecycle 25306 [013e689795773670] Forward shell ended; we shall
> share its fate
> FTL/util:lifecycle 25303 [FC047636] Shutting down due to fatal error
> FTL/util:lifecycle 25306 [013e689795773670] Shutting down due to fatal
> error
> INF/provider 14788 [
> *] Cleaning up device worker "5B17000411" INF/provider 14788 [*] Cleaning
> up device worker "ZX1D22B4MV"
> INF/provider 14788 [
>
> *] Lost device "0e32a002f1645052" (offline) FTL/util:lifecycle 25300
> [0e32a002f1645052] Forward shell ended; we shall share its fate
> INF/provider 14788 [*] Shutting down device worker "0e32a002f1645052"
> FTL/util:lifecycle 25300 [0e32a002f1645052] Shutting down due to fatal
> error
> INF/provider 14788 [
> *] Lost device "RB042046" (offline) INF/provider 14788 [*] Shutting down
> device worker "RB042046"
> INF/provider 14788 [
> *] Lost device "FC047636" (offline) INF/provider 14788 [*] Shutting down
> device worker "FC047636"
> INF/provider 14788 [
> *] Lost device "aa9443f6" (offline) INF/provider 14788 [*] Shutting down
> device worker "aa9443f6"
> INF/provider 14788 [
> *] Lost device "d6656b6a" (offline) INF/provider 14788 [*] Shutting down
> device worker "d6656b6a"
> INF/provider 14788 [
> *] Lost device "CB5A2AGTZ3" (offline) INF/provider 14788 [*] Shutting
> down device worker "CB5A2AGTZ3"
> INF/provider 14788 [
> *] Lost device "06157df6612b5c22" (offline) INF/provider 14788 [*]
> Shutting down device worker "06157df6612b5c22"
> INF/provider 14788 [
> *] Lost device "52006836bede3287" (offline) INF/provider 14788 [*]
> Shutting down device worker "52006836bede3287"
> INF/provider 14788 [
> *] Lost device "013e689795773670" (offline) INF/provider 14788 [*]
> Shutting down device worker "013e689795773670"
> INF/provider 14788 [
> *] Lost device "a3a14ab9" (offline) INF/provider 14788 [*] Shutting down
> device worker "a3a14ab9"
> INF/provider 14788 [
> *] Lost device "565347b5" (offline) INF/provider 14788 [*] Shutting down
> device worker "565347b5"
> INF/provider 14788 [
> *] Cleaning up device worker "RB042046" INF/provider 14788 [*] Cleaning
> up device worker "52006836bede3287"
> INF/provider 14788 [
> *] Cleaning up device worker "a3a14ab9" INF/provider 14788 [*] Cleaning
> up device worker "565347b5"
> INF/provider 14788 [
> *] Cleaning up device worker "CB5A2AGTZ3" INF/provider 14788 [*] Cleaning
> up device worker "d6656b6a"
> INF/provider 14788 [
> *] Cleaning up device worker "013e689795773670" INF/provider 14788 [*]
> Cleaning up device worker "FC047636"
> INF/provider 14788 [
> *] Gracefully killing device worker "5B17000411" INF/provider 14788 [*]
> Gracefully killing device worker "ZX1D22B4MV"
> INF/provider 14788 [
> *] Cleaning up device worker "0e32a002f1645052" INF/provider 14788 [*]
> Gracefully killing device worker "0e32a002f1645052"
> INF/provider 14788 [
> *] Found device "ZX1D22B4MV" (offline) INF/provider 14788 [*] Found
> device "RB042046" (offline)
> INF/reaper 14787 [reaper001] Device "ZX1D22B4MV" is present
> INF/provider 14788 [
> *] Registered device "ZX1D22B4MV" INF/provider 14788 [*] Device
> "ZX1D22B4MV" is now "unauthorized" (was "offline")
> INF/provider 14788 [
>
> *] Device "ZX1D22B4MV" is now "device" (was "unauthorized") INF/reaper
> 14787 [reaper001] Device "RB042046" is present INF/provider 14788 [*]
> Registered device "RB042046"
> INF/provider 14788 [
> *] Device "RB042046" is now "device" (was "offline") INF/provider 14788 [*]
> Found device "52006836bede3287" (offline)
> INF/provider 14788 [
> *] Found device "0f680bfc" (offline) INF/provider 14788 [*] Found device
> "06157df6612b5c22" (offline)
> INF/provider 14788 [
> *] Found device "0e32a002f1645052" (offline) INF/provider 14788 [*] Found
> device "a3a14ab9" (offline)
> INF/provider 14788 [
> *] Found device "565347b5" (offline) INF/provider 14788 [*] Found device
> "d6656b6a" (offline)
> INF/provider 14788 [
> *] Found device "5B17000411" (offline) INF/provider 14788 [*] Found
> device "04d86162a2438995" (offline)
> INF/provider 14788 [
> *] Found device "CB5A1XN5M8" (offline) INF/provider 14788 [*] Found
> device "FC047636" (offline)
> INF/reaper 14787 [reaper001] Device "52006836bede3287" is present
> INF/provider 14788 [*] Registered device "52006836bede3287"
>
> *Please run stf doctor and paste the output here.*
> Worldlines-Mac-mini:~ worldlinetempos21$ stf doctor
> INF/util:doctor 25376 [
> *] OS Arch: x64 INF/util:doctor 25376 [*] OS Platform: darwin
> INF/util:doctor 25376 [
> *] OS Platform: 16.4.0 INF/util:doctor 25376 [*] Using Node 8.2.1
> INF/util:doctor 25376 [
> *] Using RethinkDB client 2.3.3 INF/util:doctor 25376 [*] Using ZeroMQ
> 4.2.2
> INF/util:doctor 25376 [
> *] GraphicsMagick 1.3.26 INF/util:doctor 25376 [*] Local ADB 1.0.39
> Installed as /usr/local/bin/adb
>
> /usr/local/lib/node_modules/stf/node_modules/semver/semver.js:293
> throw new TypeError('Invalid Version: ' + version);
> ^
>
> TypeError: Invalid Version: 1.0.39
> Installed as /usr/local/bin/adb
>
> at new SemVer (/usr/local/lib/node_modules/stf/node_modules/semver/semver.js:293:11)
> at Range.test (/usr/local/lib/node_modules/stf/node_modules/semver/semver.js:1100:15)
> at Function.satisfies (/usr/local/lib/node_modules/stf/node_modules/semver/semver.js:1149:16)
> at unsupportedVersion (/usr/local/lib/node_modules/stf/lib/util/doctor.js:13:15)
> at /usr/local/lib/node_modules/stf/lib/util/doctor.js:143:7
> at /usr/local/lib/node_modules/stf/lib/util/doctor.js:50:22
> at ChildProcess.exithandler (child_process.js:262:7)
> at emitTwo (events.js:125:13)
> at ChildProcess.emit (events.js:213:7)
> at maybeClose (internal/child_process.js:921:16)
> at Socket.stream.socket.on (internal/child_process.js:348:11)
> at emitOne (events.js:115:13)
> at Socket.emit (events.js:210:7)
> at Pipe._handle.close [as _onclose] (net.js:549:12)
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/659>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VDdRf1BpdQQZvwBnQN1jwiHGzytks5sSG3RgaJpZM4OlH9k>
> .
>
 As mentioned earlier this is a common issue on Macs when you have a large (usually 8+) number of devices connected. Either get more Macs or switch to Linux and the PCIe card we recommend. Closing.  I would recommend building from master instead of using the NPM version. Perhaps v3.0.0 that was just published to NPM will clear this issue.  Fixed in https://github.com/openstf/stf/commit/707482fa3b17a966b6727dba7ea5de9fba1ac40c  Do you mean that applications you installed get deleted?

On Fri, Jul 21, 2017 at 16:00 risinek <notifications@github.com> wrote:

> When I work on Huawei P9 lite, it gets occassionally wiped after I get
> disconnected from device for inactivity (I guess it's becouse of
> inactivity).. It gets wiped to the state when I start using the device..
> Is this some kind of secure feature in development, or is this a bug?
>
> I will attach logs after it happens again
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/655>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UlXt_boYADDgYh4EoUmEZeDCRPQks5sQEx0gaJpZM4OfB5j>
> .
>
 Use the --no-cleanup option if you don't want that.

On Fri, Jul 21, 2017 at 16:04 risinek <notifications@github.com> wrote:

> Yep, that's exactly what I mean
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/655#issuecomment-316922150>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_eQWKiiTb40o84T9BBD-GL5SFhQlks5sQE2PgaJpZM4OfB5j>
> .
>
  Ok as a disclaimer I don't think that's a very good idea, and we definitely provide support that, but it is possible with some effort.

If you run `stf provider --help`, you should be able to see that if you give it a list of serial numbers, it'll ignore all other devices. So, in theory, you could have both `stf provider 0123456` and `stf provider 7890123` running at the same time. Make sure to give them non-conflicting port ranges, though.

Note that I've never actually tried that myself, but in theory it should work. Yes you would need to know the serials and then spawn a provider for each (or however you want to split them).  No, please never use sudo. Instead, use `nvm` to install node so that you never have to bother with that again.  Your node is incredibly ancient. We haven't supported that version for years. Glad you were able to get it working, though I'd advice against using `sudo` anyway.  Read frames slower from the socket. That's the only way right now. Other
than that, you have to modify the code.

On Wed, Jul 19, 2017 at 19:32 仓鼠 Xu <notifications@github.com> wrote:

> hi, how to turn down the frame rate of capture screen?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/650>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZAx_tNq3ek7clskLZ0oTMtoW7pxks5sPdtFgaJpZM4Ocie1>
> .
>
 While this feature may or may not be implemented at some point, the question presented in this issue has been answered. Closing.  While I agree that "your configuration is wrong" is vague, we simply don't have time to help with general configuration issues unless you provide all the necessary details by yourself. It takes a lot of time if we have to ask for those one by one.

For example, when you created this issue, you decided to remove the issue template. So now I would have to spend a few minutes asking you to provide those details instead of being able to help you directly. In this case, it would have been particularly useful if you had provided the exact commands you used, and the full output of those commands. Otherwise you're sort of expecting me or someone else to simply keep trying various random combinations, which is a huge waste of time.

Please try to proactively provide as much detail as possible. It increases the chances of someone willing to look into your issue.  Merged. Good improvements. Thanks!  Btw would you like to join our Slack at https://openstf.slack.com? We could certainly use some help if you'd be interested in joining the team as a contributor. Great! Can you email me at simo @ the name of this github org .io?  The stf image does not include adb. There's a separate docker image for
that. Check out the deployment guide.

On Mon, Jul 10, 2017 at 14:10 bhajojo <notifications@github.com> wrote:

> I am running this 2 commands inside Docker terminal to Setup STP
>
> docker run --name some-rethink -v "C:/STF/RethinkDB/data" -p 28015:28015
> rethinkdb
> docker run --link some-rethink:rethinkdb -p 7100:7100 openstf/stf:latest
> stf local
>
> first Command run successfully and generates logs as below
> $ docker run --name some-rethink -v "C:/STF/RethinkDB/data" -p 28015:28015
> reth
> inkdb
> Unable to find image 'rethinkdb:latest' locally
> latest: Pulling from library/rethinkdb
> 9f0706ba7422: Pull complete
> 13cff7bd7d5f: Pull complete
> 2f7f87e28358: Pull complete
> 4f5c608387ab: Pull complete
> 0168e87b5569: Pull complete
> Digest:
> sha256:e752a5624ab4c0724d1c2c5201e09c8d88de290bafd85f026ddb53cc21a31717
> Status: Downloaded newer image for rethinkdb:latest
> Recursively removing directory /data/rethinkdb_data/tmp
> Initializing directory /data/rethinkdb_data
> Running rethinkdb 2.3.5~0jessie (GCC 4.9.2)...
> Running on Linux 4.4.59-boot2docker x86_64
> Loading data from directory /data/rethinkdb_data
> warn: Cache size does not leave much memory for server and query overhead
> (avail
> able memory: 785 MB).
> warn: Cache size is very low and may impact performance.
> Listening for intracluster connections on port 29015
> Listening for client driver connections on port 28015
> Listening for administrative HTTP connections on port 8080
> Listening on cluster addresses: 127.0.0.1, 172.17.0.2
> Listening on driver addresses: 127.0.0.1, 172.17.0.2
> Listening on http addresses: 127.0.0.1, 172.17.0.2
> Server ready, "0772e140b102_j2j" 9174cf42-c618-40eb-8dac-fc76c80fe826
> warn: Some RethinkDB data on this server has been placed into swap memory.
> This
> may impact performance.
>
> 2nd Command generates following logs
> Unable to find image 'openstf/stf:latest' locally
> latest: Pulling from openstf/stf
> 75c416ea735c: Pull complete
> c6ff40b6d658: Pull complete
> a7050fc1f338: Pull complete
> f0ffb5cf6ba9: Pull complete
> be232718519c: Pull complete
> a8a00db89a00: Pull complete
> eefd4bde42f3: Pull complete
> cd3668a0e1bf: Pull complete
> 223d989df2e2: Pull complete
> fa36956c56f3: Pull complete
> Digest:
> sha256:8f2588bf654323198d2344774d247044044611b102490fd71d18c1324f5c697d
> Status: Downloaded newer image for openstf/stf:latest
> INF/util:procutil 1 [
> *] Forking "/app/lib/cli migrate" INF/db 10 [*] Connecting to
> 172.17.0.2:28015
> INF/db:setup 10 [
> *] Database "stf" created INF/db:setup 10 [*] Table "users" created
> INF/db:setup 10 [
> *] Index "users"."adbKeys" created INF/db:setup 10 [*] Waiting for index
> "users"."adbKeys"
> INF/db:setup 10 [
> *] Index "users"."adbKeys" is ready INF/db:setup 10 [*] Table "vncauth"
> created
> INF/db:setup 10 [
> *] Index "vncauth"."response" created INF/db:setup 10 [*] Waiting for
> index "vncauth"."response"
> INF/db:setup 10 [
> *] Table "accessTokens" created INF/db:setup 10 [*] Table "logs" created
> INF/db:setup 10 [
> *] Table "devices" created INF/db:setup 10 [*] Index
> "vncauth"."responsePerDevice" created
> INF/db:setup 10 [
> *] Index "accessTokens"."email" created INF/db:setup 10 [*] Waiting for
> index "vncauth"."responsePerDevice"
> INF/db:setup 10 [
> *] Waiting for index "accessTokens"."email" INF/db:setup 10 [*] Index
> "devices"."owner" created
> INF/db:setup 10 [
> *] Waiting for index "devices"."owner" INF/db:setup 10 [*] Index
> "devices"."present" created
> INF/db:setup 10 [
> *] Waiting for index "devices"."present" INF/db:setup 10 [*] Index
> "devices"."providerChannel" created
> INF/db:setup 10 [
> *] Waiting for index "devices"."providerChannel" INF/db:setup 10 [*]
> Index "vncauth"."responsePerDevice" is ready
> INF/db:setup 10 [
> *] Index "accessTokens"."email" is ready INF/db:setup 10 [*] Index
> "devices"."owner" is ready
> INF/db:setup 10 [
> *] Index "vncauth"."response" is ready INF/db:setup 10 [*] Index
> "devices"."present" is ready
> INF/db:setup 10 [
> *] Index "devices"."providerChannel" is ready INF/util:procutil 1 [*]
> Forking "/app/lib/cli triproxy app001 --bind-pub tcp://1
> 27.0.0.1:7111 --bind-dealer tcp://127.0.0.1:7112 --bind-pull tcp://
> 127.0.0.1:711
> 3"
> INF/util:procutil 1 [
>
>
> *] Forking "/app/lib/cli triproxy dev001 --bind-pub tcp://1 27.0.0.1:7114
> <http://27.0.0.1:7114> --bind-dealer tcp://127.0.0.1:7115
> <http://127.0.0.1:7115> --bind-pull tcp://127.0.0.1:711
> <http://127.0.0.1:711> 6" INF/util:procutil 1 [*] Forking "/app/lib/cli
> processor proc001 --connect-app-de
> aler tcp://127.0.0.1:7112 --connect-dev-dealer tcp://127.0.0.1:7115"
> INF/util:procutil 1 [
>
> *] Forking "/app/lib/cli processor proc002 --connect-app-de aler
> tcp://127.0.0.1:7112 <http://127.0.0.1:7112> --connect-dev-dealer
> tcp://127.0.0.1:7115 <http://127.0.0.1:7115>" INF/util:procutil 1 [*]
> Forking "/app/lib/cli reaper reaper001 --connect-push tc
> p://127.0.0.1:7116 --connect-sub tcp://127.0.0.1:7111"
> INF/util:procutil 1 [
>
>
>
>
> *] Forking "/app/lib/cli provider --name 280c78dcf572 --min -port 7400
> --max-port 7700 --connect-sub tcp://127.0.0.1:7114 <http://127.0.0.1:7114>
> --connect-push tcp ://127.0.0.1:7116 <http://127.0.0.1:7116>
> --group-timeout 900 --public-ip localhost --storage-url http:/
> /localhost:7100/ --adb-host 127.0.0.1 --adb-port 5037 --vnc-initial-size
> 600x800 " INF/util:procutil 1 [*] Forking "/app/lib/cli auth-mock --port
> 7120 --secret kut
> e kittykat --app-url http://localhost:7100/"
> INF/util:procutil 1 [
>
>
> *] Forking "/app/lib/cli app --port 7105 --secret kute kitt ykat
> --auth-url http://localhost:7100/auth/mock/
> <http://localhost:7100/auth/mock/> --websocket-url http://localhos
> <http://localhos> t:7110/" INF/util:procutil 1 [*] Forking "/app/lib/cli
> api --port 7106 --secret kute kitt
> ykat --connect-push tcp://127.0.0.1:7113 --connect-sub tcp://
> 127.0.0.1:7111"
> INF/util:procutil 1 [
>
>
> *] Forking "/app/lib/cli websocket --port 7110 --secret kut e kittykat
> --storage-url http://localhost:7100/ <http://localhost:7100/> --connect-sub
> tcp://127.0.0.1:71 <http://127.0.0.1:71> 11 --connect-push
> tcp://127.0.0.1:7113 <http://127.0.0.1:7113>" INF/util:procutil 1 [*]
> Forking "/app/lib/cli storage-temp --port 7102"
> INF/util:procutil 1 [
>
> *] Forking "/app/lib/cli storage-plugin-image --port 7103 - -storage-url
> http://localhost:7100/ <http://localhost:7100/>" INF/util:procutil 1 [*]
> Forking "/app/lib/cli storage-plugin-apk --port 7104 --s
> torage-url http://localhost:7100/"
> INF/util:procutil 1 [
>
>
>
>
>
>
>
>
>
>
> *] Forking "/app/lib/cli poorxy --port 7100 --app-url http:
> //localhost:7105/ --auth-url http://localhost:7120/
> <http://localhost:7120/> --api-url http://localhost:7 <http://localhost:7>
> 106/ --websocket-url http://localhost:7110/ <http://localhost:7110/>
> --storage-url http://localhost:7102/ <http://localhost:7102/>
> --storage-plugin-image-url http://localhost:7103/ <http://localhost:7103/>
> --storage-plugin-apk-url http ://localhost:7104/" INF/triproxy 16 [app001]
> PUB socket bound on tcp://127.0.0.1:7111 <http://127.0.0.1:7111>
> INF/triproxy 16 [app001] DEALER socket bound on tcp://127.0.0.1:7112
> <http://127.0.0.1:7112> INF/triproxy 17 [dev001] PUB socket bound on
> tcp://127.0.0.1:7114 <http://127.0.0.1:7114> INF/triproxy 16 [app001] PULL
> socket bound on tcp://127.0.0.1:7113 <http://127.0.0.1:7113> INF/triproxy
> 17 [dev001] DEALER socket bound on tcp://127.0.0.1:7115
> <http://127.0.0.1:7115> INF/triproxy 17 [dev001] PULL socket bound on
> tcp://127.0.0.1:7116 <http://127.0.0.1:7116> INF/poorxy 89 [*] Listening
> on port 7100
> INF/reaper 40 [reaper001] Subscribing to permanent channel "
>
> *ALL" INF/reaper 40 [reaper001] Reaping devices with no heartbeat INF/db
> 29 [*] Connecting to 172.17.0.2:28015
> INF/db 23 [
>
>
>
>
>
>
>
> *] Connecting to 172.17.0.2:28015 <http://172.17.0.2:28015> INF/db 40
> [reaper001] Connecting to 172.17.0.2:28015 <http://172.17.0.2:28015>
> INF/reaper 40 [reaper001] Receiving input from "tcp://127.0.0.1:7111
> <http://127.0.0.1:7111>" INF/reaper 40 [reaper001] Sending output to
> "tcp://127.0.0.1:7116 <http://127.0.0.1:7116>" INF/processor 29 [proc002]
> App dealer connected to "tcp://127.0.0.1:7112 <http://127.0.0.1:7112>"
> INF/processor 29 [proc002] Device dealer connected to "tcp://127.0.0.1:7115
> <http://127.0.0.1:7115>" INF/processor 23 [proc001] App dealer connected to
> "tcp://127.0.0.1:7112 <http://127.0.0.1:7112>" INF/processor 23 [proc001]
> Device dealer connected to "tcp://127.0.0.1:7115 <http://127.0.0.1:7115>"
> INF/storage:plugins:image 77 [*] Listening on port 7103
> INF/auth-mock 47 [
> *] Listening on port 7120 INF/storage:plugins:apk 83 [*] Listening on
> port 7104
> INF/storage:temp 76 [
> *] Listening on port 7102 INF/provider 41 [*] Subscribing to permanent
> channel "VJyocYsmRCKaB7cY+XWrGQ=="
> INF/provider 41 [
> *] Sending output to "tcp://127.0.0.1:7116 <http://127.0.0.1:7116>"
> INF/provider 41 [*] Receiving input from "tcp://127.0.0.1:7114"
> Unhandled rejection Error: spawn adb ENOENT
> at exports._errnoException (util.js:1018:11)
> at Process.ChildProcess._handle.onexit (internal/child_process.js:193:32)
> at onErrorNT (internal/child_process.js:367:16)
> at _combinedTickCallback (internal/process/next_tick.js:80:11)
> at process._tickCallback (internal/process/next_tick.js:104:9)
> INF/app 58 [
> *] Using pre-built resources INF/app 58 [*] Listening on port 7105
> INF/db 58 [
> *] Connecting to 172.17.0.2:28015 <http://172.17.0.2:28015> INF/websocket
> 65 [*] Subscribing to permanent channel "
> *ALL" INF/websocket 65 [*] Listening on port 7110
> INF/db 65 [
> *] Connecting to 172.17.0.2:28015 <http://172.17.0.2:28015> INF/websocket
> 65 [*] Sending output to "tcp://127.0.0.1:7113"
> INF/websocket 65 [
> *] Receiving input from "tcp://127.0.0.1:7111 <http://127.0.0.1:7111>"
> INF/api 59 [*] Subscribing to permanent channel "
> *ALL" INF/api 59 [*] Listening on port 7106
> INF/api 59 [
> *] Sending output to "tcp://127.0.0.1:7113 <http://127.0.0.1:7113>"
> INF/api 59 [*] Receiving input from "tcp://127.0.0.1:7111"
> INF/db 59 [*] Connecting to 172.17.0.2:28015
>
> *Please run stf doctor and paste the output here.*
> when I run stf doctor , I get following exception
>
> Error: Cannot find module
> 'C:\UserlibPath\AppData\Roaming\npm\node_modules\st
> f\bin\stf'
> at Function.Module._resolveFilename (module.js:469:15)
> at Function.Module._load (module.js:417:25)
> at Module.runMain (module.js:604:10)
> at run (bootstrap_node.js:394:7)
> at startup (bootstrap_node.js:149:9)
> at bootstrap_node.js:509:3
>
> Please help me to resolve this issue
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/644>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_XTAV5BC0sjtDyPgxLT7S3NwZFcvks5sMbIygaJpZM4OSXIT>
> .
>
  Use swagger-client v2.x.x

https://github.com/openstf/stf/pull/601#issuecomment-305354613 Also, if you want to try v3.x.x then you will have to implement script by yourself with new syntax (API). Script provided in STF API doc is written using old syntax.  So does the unit output anything? Check `journalctl -u stf-log-rethinkdb`.

Note that I would recommend a third party logging service that watches journal logs instead. The rethinkdb logger can miss messages if it dies briefly, or obviously if the socket dies. That looks like a bug (it says undefined). I'll check it a bit later.

On Wed, Jul 5, 2017 at 19:02 gauravraval <notifications@github.com> wrote:

> Unit output is there but log level seems to have problem. (refer last line
> in blow logs). in older code, log level is defined / honored correctly
> (e.g. INF/log-db 1 [*] Listening for *USAGE (or higher)* level log
> messages)
> Current log:
>
> Jul 05 09:50:23 localhost systemd[1]: Started STF RethinkDB log recorder.
> Jul 05 09:50:24 localhost docker[2427]: INF/log-db 1 [*] Subscribing to permanent channel "*ALL"
> Jul 05 09:50:24 localhost docker[2427]: INF/log-db 1 [*] Listening for undefined (or higher) level log messages
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/642#issuecomment-313059514>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_URbvdkw9ksPbWxRGkl9ijv6VBzRks5sK19LgaJpZM4ON5U3>
> .
>
 ```
bin/stf log-rethinkdb --connect-sub tcp://127.0.0.1:7150
INF/log-db 21542 [*] Subscribing to permanent channel "*ALL"
INF/log-db 21542 [*] Listening for IMP (or higher) level log messages
```

Seems to work fine with latest master, at least.  Hi,
Can we connect virtual devices created in virtualbox,vmware with openstf? Some have managed to do it, but I've never done it. Either way it's not a supported use case. Try searching for older issues about this same thing. Hi,
Here i am sharing the details to connect AVD(Android virtual devices) with openStf. I will just tell what i did because i have no idea what is the cause of that black screen issue or any other problem.

**Hardware details of the pc:**
Processor: Intel® Core™ i3-4130 CPU @ 3.40GHz × 4 
Graphics: Intel® Haswell 
 OS type: 64 bit

**Operating System:**
 OS: Ubuntu  16.04LTS

**Android Studio AVD details:**

Just make any AVD  x86(kitkat 4.4,marshmallow 6.0) works fine  but not of ABI "armeabi-v7a" and  let the settings be as by default.
Please don't change anything especially in the OpenGl or any hardware settings. But you can give the RAM and storage size as much as you need.

Note:  If you already a STF user then you don't need to read further.

**Source for installation of STF :** 

https://miteshshah.github.io/sysadmin/how-to-setup-smartphone-test-farm-stf/

or you can directly run this command from terminal(Press ctrl+alt+T to open terminal on ubuntu): 

**$ curl -s https://gist.githubusercontent.com/MiteshShah/62cd0923b9068a927dae/raw/STF | sudo bash**

But i will recommend you to visit the link first.

**Starting stf on localhost:**

1. Open terminal and run the following command:
                                   $ sudo rethinkdb

2. Open another terminal and the run this command:
                                 $ sudo stf local
    but if you want to access stf on another computers connecting on same network then you can just run this command:
                              $ sudo stf local --public-ip 192.168.x.x

Here 192.168.x.x is the ip address of your computer connecting on that network, its different for every computer, you can get this ip address from:
            System settings> Network>Wireless or wired(see in left side) > name_of_network>then click on arrow on right side if the name> there in details you will see IPv4 address>Just copy/paste it next to --public-ip .
There are other ways too of getting this IPv4 address.
Now just run the above command as per your need.

**Using STF:**
Open any browser and type : 127.0.0.1:7100 for sudo stf local
                                                192.168.x.x:7100 for sudo stf local --public-ip 192.168.x.x

**Starting AVD:**

 Open Android studio>Click on AVD manager icon(Just below Window)>Start the AVD from Actions(that green play button).

**Back to browser**
Now open the browser and see in the **Devices** , there you must see something like "x86 .... " device, now open the device and its done.


Note:
If by any means your installation gets failed and during re-installation you get some "**protobuf**" error then you have to manually delete the protobuf folder and the location of protobuf in my case was: 
             computer>opt>protobuf
and then begin the installation again.  That doesn't look right. Perhaps it's your modifications that are causing the issue, as the `node-buc` package doesn't exist (or at least it isn't public).  No idea what you're asking. Ok. For Android 7.0, don't install STF from npm. Build latest master. It works fine. Did you use the :latest tag?

On Mon, Jul 3, 2017 at 0:25 NextOneWxf <notifications@github.com> wrote:

> I was run it by Docker, the images from Docker.io is latest?
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/639#issuecomment-312498353>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dXYE2YfHqQfPZn2ypXcAtt0pAifks5sJ7ZugaJpZM4OLnHu>
> .
>
 It sounds like perhaps your issue is not with Android 7.0, but rather you
don't know how to connect a device.

Perhaps you're running STF in a virtual machine and need to add the device
there? Not enough details. What you should do is tell us what exactly you
did. You have to tell what your setup is like. You have to tell which
commands you used.

On Mon, Jul 3, 2017 at 0:43 NextOneWxf <notifications@github.com> wrote:

> yes.i think so.
> [image: image]
> <https://user-images.githubusercontent.com/4550421/27771361-b8469a4e-5f7f-11e7-8cb8-e0a0d56a523e.png>
> [image: image]
> <https://user-images.githubusercontent.com/4550421/27771392-2da65270-5f80-11e7-90dc-7057eed566fe.png>
>
> But now,my run the STF just like that,how can i connect the Android 7.0
> device without Root use the USB?
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/639#issuecomment-312499294>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Zcz9Bvs_tqoi2r1Iec_c3IyoBYEks5sJ7qQgaJpZM4OLnHu>
> .
>
 Perhaps some day, but we're super busy with other things now.  It works fine. Use the master branch, though.

On Fri, Jun 30, 2017 at 20:15 Crazyerick <notifications@github.com> wrote:

> *What is the issue or idea you have?*
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
>
> *What is the expected behavior?*
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
> *Please run stf doctor and paste the output here.*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/638>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_f-S101b8exsV77UoiJcXBsV16yyks5sJNjKgaJpZM4OKdSe>
> .
>
 They're now in separate packages, minicap-prebuilt and minitouch-prebuilt,
which are dependencies in package.json.

On Fri, Jun 30, 2017 at 20:22 Crazyerick <notifications@github.com> wrote:

> But why I don't see the minicap and minitouch floder In vendor at master
> branch?It doesn't matter?
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/638#issuecomment-312242922>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Zf3wJEDdniCEOSqT_YcP2pRP2Kaks5sJNqPgaJpZM4OKdSe>
> .
>
  Use nvm to install node. All package managers suck at installing node.

On Thu, Jun 29, 2017 at 19:20 nennhui <notifications@github.com> wrote:

> *What is the issue or idea you have?*
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
>
> *What is the expected behavior?*
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
> *Please run stf doctor and paste the output here.*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/637>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_QFT2DNC1d_knHjvov8AKxRXY_Mgks5sI3pmgaJpZM4OJGtC>
> .
>
 Yes, that works sometimes but occasionally it doesn't (we've seen some packages fail to build in the past). Either way I would recommend `nvm`.  Duplicate of  #49 and #602.  Right now you cannot. No. You would have to figure it out yourself.  https://github.com/openstf/stf/commit/cc5d7580c23dce1fd4526974370fc3a5c76c866d should fix this issue. 

Thanks  Duplicate of #508.  Does anything else work? Like `adb shell` for example?

Usually that problem occurs when you are connecting from an older or newer ADB client to an ADB server that's a different version. However, if your ADB server is running locally, that shouldn't really happen.

I think you'll need to give more details. For example:

* Where is the adb server running?
* Does the adb server run inside a docker container?
* Where is `adb install -r` running?
* How did you install ADB?
* How did you connect the device to your ADB? Closing since no new information has been presented, and this doesn't seem to be an issue with STF anyway.  Use the master branch.

On Wed, Jun 21, 2017 at 6:30 PM, jguedon <notifications@github.com> wrote:

> Hi,
>
> When I'm trying to run *stf local*, the error is "Child process had an
> error ExitError : Exit code "1" at ChildProcess." with procutil.js.
>
> When I'm trying *stf doctor* I've got an invalid version from semver of
> "Invalid Version : 2.3.5~0 jessie"
>
> Does someone have the same error ? How can I fix it ? Should I remove
> everything and start all over again ?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/630>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_aSps5K29-B0lTF-DniJIJpcOjEdks5sGOLQgaJpZM4OAsfc>
> .
>
 Yes..

On Wed, Jun 21, 2017 at 6:32 PM, jguedon <notifications@github.com> wrote:

> the master branch of stf ?
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/630#issuecomment-310024267>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Q76meHdZBPqP8M9JkA4NGF8MkGdks5sGOMXgaJpZM4OAsfc>
> .
>
  At the very least, you should have posted the exact error from the error log, or preferably the full log. You have also removed the issue template where we ask you to provide these details so that we don't have to ask you every time, which wastes our time.

In general, we don't support `stf local` deployments, it takes too much time. It's a development version. Please consider doing a [full deployment](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) instead. This is the ONLY deployment we support, and ONLY if you've followed it 100%.

Note that `stf local` can work with the correct options (assuming the other containers have correct options too), however we won't help you with that.

Also, you're using boot2docker which is 100% more trouble. Not recommended.  Pretty sure it's unable to connect to your other server. After devices are found, a request is made to the other server which then needs to reply. If there's no response, it might look like that. It can be that the address is wrong, or that there's a firewall on the other machine. Unfortunately I have no time to help you with that, so please try to figure it out and post your solution once you find it.  That depends entirely on how you installed it. Therefore it's your
responsibility to know how to remove it.

On Mon, Jun 19, 2017 at 2:15 PM, suvansh-dev <notifications@github.com>
wrote:

> Hi,
> Is there any command like:
>
>  sudo apt purge openstf
>
> to uninstall openstf from Ubuntu 16.04 or how can i uninstall openstf from
> ubuntu completely?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/625>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bWXom-5A64GG00nUOq62J04XFjVks5sFgPfgaJpZM4N9w2b>
> .
>
 You can read the script and do the opposite of what it does. You can also
ask the person who provided that script, however they'll likely say the
same thing.

I would recommend using docker containers for an easily removable, isolated
installation.

On Mon, Jun 19, 2017 at 2:22 PM, suvansh-dev <notifications@github.com>
wrote:

> I have done it by using the following command:
>
>            curl -s https://gist.githubusercontent.com/MiteshShah/62cd0923b9068a927dae/raw/STF | sudo bash
>
> Nothing else i have used to install it.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/625#issuecomment-309341482>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_WQ-9aZkxD9mrzXXxCfa29Czwhywks5sFgWpgaJpZM4N9w2b>
> .
>
 Read the script and do the opposite of what it does. It's you who must do it, I will not help you because it's a waste of my time.  Hi:
   I am coming back.New question.

![image](https://user-images.githubusercontent.com/5986074/27173248-9bb640d4-51ea-11e7-9b84-a3aca1dc224e.png)

  the device Info is as follows: 

![image](https://user-images.githubusercontent.com/5986074/27173344-edffa5a6-51ea-11e7-840b-4a1344e258a8.png)

 If you need more infomation, tell me .Thanks very much Some older devices are like that. It happens when minicap asks the system
to scale down the image.

You can try modifying the source code to always force full size. That might
help.

Other than that I can't do anything, unless someone wants to donate that
device to me.

On Thu, Jun 15, 2017 at 17:55 alice <notifications@github.com> wrote:

> Hi:
> I am coming back.New question.
> [image: image]
> <https://user-images.githubusercontent.com/5986074/27173248-9bb640d4-51ea-11e7-9b84-a3aca1dc224e.png>
>
> the device Info is as follows:
> [image: image]
> <https://user-images.githubusercontent.com/5986074/27173344-edffa5a6-51ea-11e7-840b-4a1344e258a8.png>
>
> If you need more infomation, tell me .Thanks very much
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/623>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VES4xDCpq5uFLfhgM5rKBuWonW3ks5sEPF2gaJpZM4N66tM>
> .
>
 Ok, I will try to modifying the source code. Hi,I try to modifying the source code. However, I falied. Here is where I changed. The device is 480*854.

![image](https://user-images.githubusercontent.com/5986074/27209405-223c80d0-527e-11e7-9e5f-074bd8394d0a.png)

![image](https://user-images.githubusercontent.com/5986074/27209433-5851a70e-527e-11e7-8eb5-892316ef7006.png)

But, the result is not good.

![image](https://user-images.githubusercontent.com/5986074/27209449-6fe7d816-527e-11e7-8dd8-657f31d4eb71.png)

![image](https://user-images.githubusercontent.com/5986074/27209479-977bc20c-527e-11e7-9009-3bb77baf7141.png)

Anthing I missed? Thanks

 I think what's happening is that the lock screen (with time visible) is
rendered with smaller resolution than usual, perhaps to reduce resource
usage and battery drain. When you start using the device, it switches back
to the real resolution and displays properly. Not sure, though. I don't
think there's anything we can do about it, though perhaps you could try
something crappy like disabling the lock screen entirely?

On Fri, Jun 16, 2017 at 11:29 AM, alice <notifications@github.com> wrote:

> Hi,I try to modifying the source code. However, I falied. Here is where I
> changed. The device is 480*854.
>
> [image: image]
> <https://user-images.githubusercontent.com/5986074/27209405-223c80d0-527e-11e7-9e5f-074bd8394d0a.png>
>
> [image: image]
> <https://user-images.githubusercontent.com/5986074/27209433-5851a70e-527e-11e7-8eb5-892316ef7006.png>
>
> But, the result is not good.
>
> [image: image]
> <https://user-images.githubusercontent.com/5986074/27209449-6fe7d816-527e-11e7-8dd8-657f31d4eb71.png>
>
> [image: image]
> <https://user-images.githubusercontent.com/5986074/27209479-977bc20c-527e-11e7-9009-3bb77baf7141.png>
>
> Anthing I missed? Thanks
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/623#issuecomment-308916034>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_W3jh8UWr-kwiuLY8PREKNy6WoVBks5sEeiKgaJpZM4N66tM>
> .
>
 OK.Thanks, I give up the device. Our team use STF to manage android devices.We also found minicap installed in other HUAWEI device sometimes result in restart of device. Just tell you the HUAWEI device is special.
Thanks very much. Let's keep the issue open, maybe someone will have an idea one day. But for now it's not possible. Regarding the other Huawei devices; I only have a Mate S and it works fine. Huawei's Honor brand should also work fine. I don't know about others. Consider donating some of the devices to us if you can. Sorry to see your final replay now, @sorccu. The HUAWEI G616 is owned by the company where I worked. I can't donate it . However , I will find the G616 in  some website which sell old devices. If  I find it , I  will donate it to you.  It's the output of the pwd command.

On Tue, Jul 11, 2017 at 19:39 RAHUL RAJ CHAKRAVORTY <
notifications@github.com> wrote:

> Hi,
> What is $(pwd) in the docker command that you are running for nginx ?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/622#issuecomment-314417236>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Q4CCzxHIhr735lmHQHpXINHtrUTks5sM17xgaJpZM4N6wHu>
> .
>
 @thinkhy Thanks a lot! @thinkhy Need help with deploying stf on two servers?can you add the functionality to deploy to multiple machines @thinkhy Any Update on the script for deploying on 2 servers.Thanks in advance.  STF works fine in airplane mode. Are you perhaps using `adb tcpip`? Closing this as no evidence or examples have been provided.  No not right now. Plus even if you could, users could still access the
device list by changing the URL?

On Wed, Jun 14, 2017 at 19:48 suvansh-dev <notifications@github.com> wrote:

> *What is the issue or idea you have?*
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
>
> *What is the expected behavior?*
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
> *Please run stf doctor and paste the output here.*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/620>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_fwWRX6QAaamcNBbIPK8l23tZNGNks5sD7qNgaJpZM4N5tXz>
> .
>
  Oops, looks like I forgot again. Will merge later tonight.  Good answer by @mirceanis! Closing.  I would have to review it but don’t have much time. Consider merging it to your own fork and seeing if it works. Then report back. It's shown at the top of the pull request. Then it might not be finished yet.  I think the reason why I initially added the comm option was that I assumed it would be faster, since there was (presumably) less work to do. Any chance you could run a few benchmarks to verify that? Just run `time adb shell 'ps >/dev/null'` and `time adb shell 'ps SOME_COMM_HERE >/dev/null'` a few times and let me know if there's any difference. Obviously you'll need to run it on a device that supports the comm option. If there's no difference at all then we can merge this immediately. We probably have to merge either way, but it would be good to know if there's any difference. Thanks, that's very extensive. Merged. May I ask what you're working on if you have so many devices?  You're right. How did you find this though? Even though it's obviously a
bug, I don't think it should have caused any issues.

On Sun, Jun 11, 2017 at 19:08 thinkhy <notifications@github.com> wrote:

> Seems we intended to filter header line in the output of "ps comm", it's
> supposed to initialize flag variable "header" to true.
> ------------------------------
> You can view, comment on, or merge this pull request online at:
>
>   https://github.com/openstf/stf/pull/615
> Commit Summary
>
>    - Create devutil.js
>
> File Changes
>
>    - *M* lib/util/devutil.js
>    <https://github.com/openstf/stf/pull/615/files#diff-0> (2)
>
> Patch Links:
>
>    - https://github.com/openstf/stf/pull/615.patch
>    - https://github.com/openstf/stf/pull/615.diff
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/pull/615>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cdvtqFZRWKr5r765fvXY-mL_XGPks5sC7yGgaJpZM4N2WXR>
> .
>
 Hmm... that's unfortunate. Unfortunately Google doesn't sell the Pixel here so I've never been able to try one myself. I do know that Pixel devices are working in STF, though. Could you perhaps attempt to create a patch?   <!-- *Before creating an issue please make sure you are using the latest version of STF.* -->

**What is the issue or idea you have?**
Client requests to minicap, minitouch & STFService.apk servers are not reaching.

*STF Logs*
```bash
INF/device:resources:service 82034 [d7664f2c] Checking whether we need to install STFService
INF/device:resources:service 82034 [d7664f2c] Running version check
INF/device:resources:service 82034 [d7664f2c] STFService up to date
INF/device:plugins:service 82034 [d7664f2c] Launching agent
INF/device:plugins:service 82034 [d7664f2c] Agent says: "Listening on @stfagent"
INF/provider 81986 [*] Providing 1 of 2 device(s); waiting for "d7664f2c"
FTL/device 82034 [d7664f2c] Setup had an error TimeoutError: operation timed out
    at afterTimeout (/Users/vishal/Devel/vbanthia/stf/node_modules/adbkit/node_modules/bluebird/js/main/timers.js:11:15)
    at Timeout.timeoutTimeout (/Users/vishal/Devel/vbanthia/stf/node_modules/adbkit/node_modules/bluebird/js/main/timers.js:53:9)
    at ontimeout (timers.js:380:14)
    at tryOnTimeout (timers.js:244:5)
    at Timer.listOnTimeout (timers.js:214:5)
FTL/util:lifecycle 82034 [d7664f2c] Shutting down due to fatal error
INF/provider 81986 [*] Cleaning up device worker "d7664f2c"
ERR/provider 81986 [*] Device worker "d7664f2c" died with code 1
INF/provider 81986 [*] Restarting device worker "d7664f2c"
```

**Debugging attemps**

```bash
# In minicap
./run.sh autosize

# New shell
adb forward tcp:1313 localabstract:minicap

nc -v localhost 1313
```

*Output for ZTE Max*
```
nc: connectx to localhost port 1313 (tcp) failed: Connection refused
found 0 associations
found 1 connections:
     1:	flags=82<CONNECTED,PREFERRED>
	outif lo0
	src 127.0.0.1 port 63139
	dst 127.0.0.1 port 1313
	rank info not available
	TCP aux info available

Connection to localhost port 1313 [tcp/bmc_patroldb] succeeded!
```
*Minicap logs for ZTE Max*
```
 adb shell LD_LIBRARY_PATH=/data/local/tmp/minicap-devel /data/local/tmp/minicap-devel/minicap -P 1080x1920@1080x1920/0
PID: 14777
INFO: Using projection 1080x1920@1080x1920/0
INFO: (external/MY_minicap/src/minicap_23.cpp:240) Creating SurfaceComposerClient
INFO: (external/MY_minicap/src/minicap_23.cpp:243) Performing SurfaceComposerClient init check
INFO: (external/MY_minicap/src/minicap_23.cpp:250) Creating virtual display
INFO: (external/MY_minicap/src/minicap_23.cpp:256) Creating buffer queue
INFO: (external/MY_minicap/src/minicap_23.cpp:261) Creating CPU consumer
INFO: (external/MY_minicap/src/minicap_23.cpp:265) Creating frame waiter
INFO: (external/MY_minicap/src/minicap_23.cpp:269) Publishing virtual display
INFO: (jni/minicap/JpgEncoder.cpp:64) Allocating 6268932 bytes for JPG encoder
```

*Output for working device*
```
nc: connectx to localhost port 1313 (tcp) failed: Connection refused
found 0 associations
found 1 connections:
     1:	flags=82<CONNECTED,PREFERRED>
	outif lo0
	src 127.0.0.1 port 63150
	dst 127.0.0.1 port 1313
	rank info not available
	TCP aux info available

Connection to localhost port 1313 [tcp/bmc_patroldb] succeeded!
�
 8�8�|����JFIF��C

% , #&')*)-0-(0%()(��C
```

*Minicap logs for working device*
```
INFO: Using projection 1080x1920@1080x1920/0
INFO: (external/MY_minicap/src/minicap_22.cpp:247) Creating SurfaceComposerClient
INFO: (external/MY_minicap/src/minicap_22.cpp:250) Performing SurfaceComposerClient init check
INFO: (external/MY_minicap/src/minicap_22.cpp:257) Creating virtual display
INFO: (external/MY_minicap/src/minicap_22.cpp:263) Creating buffer queue
INFO: (external/MY_minicap/src/minicap_22.cpp:268) Creating CPU consumer
INFO: (external/MY_minicap/src/minicap_22.cpp:272) Creating frame waiter
INFO: (external/MY_minicap/src/minicap_22.cpp:276) Publishing virtual display
INFO: (jni/minicap/JpgEncoder.cpp:64) Allocating 6268932 bytes for JPG encoder

INFO: (jni/minicap/minicap.cpp:448) New client connection
INFO: (jni/minicap/minicap.cpp:516) Closing client connection
```

As can be seen in minicap logs, minicap is not receiving requests. It may be a firewall issue created by the carrier in order to control Tethering. Could not verify this since `iptables` access is not given to `shell` user.  

I also tried `adb reverse` and this is working fine. I can access web app running on Mac OS from android browser using adb reverse port forwarding. 


**Does it only happen on a specific device? Please run `adb devices -l` and paste the corresponding row.**
Yes, device specific
```
List of devices attached
d7664f2c               device usb:339869696X product:P895T20_MPCS model:Z981 device:urd
```

**Please run `stf doctor` and paste the output here.**

```
INF/cli:doctor 80323 [*] OS Arch: x64
INF/cli:doctor 80323 [*] OS Platform: darwin
INF/cli:doctor 80323 [*] OS Platform: 16.4.0
INF/cli:doctor 80323 [*] Using Node 6.10.2
INF/cli:doctor 80323 [*] Using ZeroMQ 4.2.2
INF/cli:doctor 80323 [*] Using GraphicsMagick 1.3.25
INF/cli:doctor 80323 [*] Using ADB 1.0.39
INF/cli:doctor 80323 [*] Using ProtoBuf 3.2.0
INF/cli:doctor 80323 [*] Using RethinkDB 2.3.5
```
 So it's a MetroPCS phone. I strongly believe that this has the same issue as Alcatel Onetouch Pixi Glitz from Tracfone. The symptoms were the same. I managed to root the device and pull the adb binary from it at the time, and confirmed that it had been modified to not accept any socket connections using `localabstract`, `tcp`, `jdwp` or `track-jdwp`. Notably `localfilesystem` was not present, although mount permissions may have prevented those from working anyway - I did not check. MetroPCS phones are heavily customized. I’m not sure if it’s worth the effort. You could help us out, though, either by donating a device or investigating the issue and reporting your findings here.  It's because you have multiple providers trying to set up the same device like I told you earlier.  Latest release or github master?
On Wed, Jun 7, 2017 at 19:20 denis99999 <notifications@github.com> wrote:

> Lastest release used.
>
> All works well except the below issue:
>
> When a device is under control through the GUI, if I download a file using
> the 'File Explorer' window (i.e. picture in sdcard/DCIM/Camera), then the
> mobile screen freeze so that it becomes impossible to interact with it,
> until I globally refresh the brower window.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/612>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_XdMgtAcWlq8UMeNHPXZ8NE5FqcKks5sBnmBgaJpZM4Nyf_R>
> .
>
 Ok. So when you create issues, there's an issue template that contains the
information we want. For example, it could be an issue with your device. Or
you could have an error in the log output. The template covers those
issues. Please fill in the whole template if you need assistance.

On Wed, Jun 7, 2017 at 19:25 denis99999 <notifications@github.com> wrote:

> I used the docker hub images
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/612#issuecomment-306754891>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cOlnFB2a4ky22OIwAtGDpWAgXQRks5sBnqggaJpZM4Nyf_R>
> .
>
 This is an old issue and there is a PR for this https://github.com/openstf/stf/pull/186

@gunta 
I think, we should just merge the above PR. Fixed in https://github.com/openstf/stf/pull/186  Not right now.
On Wed, Jun 7, 2017 at 18:49 denis99999 <notifications@github.com> wrote:

> The only solution I found is to delete the corresponding cookies..
> Is it possible to have a 'logout' button ?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/611>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ddeLy-oyUIUM87GIcR1tXsb5XLoks5sBnIegaJpZM4NydsF>
> .
>
  Check some of the other repositories for examples. Maybe stf-appium-example.
On Wed, Jun 7, 2017 at 18:46 denis99999 <notifications@github.com> wrote:

> Please, do you have some samples illustrating the using of this feature ?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/610>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cyQhNMOGR0EZwhV1RS4RMsRKULpks5sBnFYgaJpZM4NydcN>
> .
>
 No that's different.
On Wed, Jun 7, 2017 at 18:50 denis99999 <notifications@github.com> wrote:

> I talk about the 'Automation' tab in the GUI ?
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/610#issuecomment-306747000>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cbbwSGWVyv1GV32biiQgxSEcvWbks5sBnJ1gaJpZM4NydcN>
> .
>
 It's a completely different thing. Not related.
On Wed, Jun 7, 2017 at 19:04 denis99999 <notifications@github.com> wrote:

> The appium example uses the RESTful API to connect to the device, and then
> runs the test, I experimented that yet and it is great, but I don't see
> where the 'Automation' window of the device under control is used in this
> use case, this is why I asked the question. In this 'Automation' window,
> there is the 'Store account' box with "Sign-in" button etc. but I don't
> know what it means ?
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/610#issuecomment-306750275>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_f8tn1u--GudSHtD4EoBOI-tWTyQks5sBnWygaJpZM4NydcN>
> .
>
 It's mostly useless right now.
On Wed, Jun 7, 2017 at 19:08 denis99999 <notifications@github.com> wrote:

> I agree with you, so what means 'Automation' window and how to use it ?
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/610#issuecomment-306751108>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YU32NebDFy7LaGJnbKF_f21FqOaks5sBnaYgaJpZM4NydcN>
> .
>
  If the connection goes through, you should see that in the logs. It's not
there, so either you should post a longer log, or you're connecting
somewhere else.

The error doesn't have anything to do with remote debugging. Maybe you just
have a device that doesn't work in STF right now. Try a different device.
Make sure that you're able to both see and control the device.

On Tue, Jun 6, 2017 at 20:35 whitiancai <notifications@github.com> wrote:

> *What is the issue or idea you have?*
> i have to run the 'adb connect 192.168.31.202:8088' twice that i can see
> the remote device after i run 'adb devices',and the connect will occur an
> error in a few secends
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
> it is not only happen on a specific device,i can control the remote device
> well before i run 'adb connect 192.168.31.202:8088'.
>
> *Please provide the steps to reproduce the issue.*
> linux ip 192.168.31.202 ,windows ip 192.168.31.135
> 1.linux run 'stf local --public-ip 192.168.31.202 --allow-remote'
> 2.windows run 'adb -a -P 5037 fork-server server'
> 3.linux run 'stf provider --name mikezhoudeMac-mini.local --min-port 7400
> --max-port 7700 --connect-sub tcp://127.0.0.1:7114 --connect-push tcp://
> 127.0.0.1:7116 --group-timeout 20000 --public-ip 192.168.31.202
> --storage-url http://localhost:7100/ --adb-host 192.168.31.135 --adb-port
> 5037 --vnc-initial-size 600x800 --allow-remote '
>
> (i can see the remote device now)
>
> 4.see the remote debug cmd in device control page,and linux run the cmd(
> 'adb connect 192.168.31.202:7401')
> return 'connected to 192.168.31.202:7401'
> log:
> whitiancai@whitiancai-OptiPlex-3046:~$ adb connect 192.168.31.202:7401
> connected to 192.168.31.202:7401
>
> but i can't see any device when i run 'adb devices',and i run the step 4
> again and now i can see the remote device
> log:
> whitiancai@whitiancai-OptiPlex-3046:~$ adb devices
> List of devices attached
> 192.168.31.202:7401 device
>
> 5.linux run 'adb logcat',after a few secends the error happened.
>
> *What is the expected behavior?*
> the remote device connection will keep alive when i run 'adb connect
> 192.168.31.202:7401',so i can do something i want
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> this is the log:
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Reading minitouch banner
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says:
> "Connection established"
> WRN/device:plugins:touch 15481 [SODMDIQ499999999] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Disconnecting from
> minitouch service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Stopping minitouch
> service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Launching screen service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Connecting to minitouch
> service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Reading minitouch banner
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says: "Note:
> device /dev/input/event4 was outscored by /dev/input/event3 (2100 >= 2000)"
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says: "Type B
> touch device atmel_mxt_ts_T100_touchscreen (1023x1023 with 10 contacts)
> detected on /dev/input/event3 (score 2100)"
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says:
> "Connection established"
> WRN/device:plugins:touch 15481 [SODMDIQ499999999] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Disconnecting from
> minitouch service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Stopping minitouch
> service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Launching screen service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Connecting to minitouch
> service
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says: "Note:
> device /dev/input/event4 was outscored by /dev/input/event3 (2100 >= 2000)"
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says: "Type B
> touch device atmel_mxt_ts_T100_touchscreen (1023x1023 with 10 contacts)
> detected on /dev/input/event3 (score 2100)"
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Reading minitouch banner
> INF/device:plugins:touch 15481 [SODMDIQ499999999] minitouch says:
> "Connection established"
> WRN/device:plugins:touch 15481 [SODMDIQ499999999] Shell keeping minitouch
> running ended unexpectedly
> INF/device:plugins:touch 15481 [SODMDIQ499999999] Disconnecting from
> minitouch service
> FTL/device:plugins:touch 15481 [SODMDIQ499999999] Touch consumer had an
> error Error: Failed more than 3 times in 10000ms
> at TouchConsumer._failLimitExceeded
> (/home/whitiancai/stf/stf-master/lib/units/device/plugins/touch/index.js:230:26)
> at FailCounter.emit
> (/home/whitiancai/stf/stf-master/node_modules/_eventemitter3@1.2.0
> @eventemitter3/index.js:117:35)
> at FailCounter.inc
> (/home/whitiancai/stf/stf-master/lib/util/failcounter.js:29:10)
> at TouchConsumer._outputEnded
> (/home/whitiancai/stf/stf-master/lib/units/device/plugins/touch/index.js:223:24)
> at RiskyStream.emit
> (/home/whitiancai/stf/stf-master/node_modules/_eventemitter3@1.2.0
> @eventemitter3/index.js:115:35)
> at RiskyStream.
> (/home/whitiancai/stf/stf-master/lib/util/riskystream.js:14:12)
> at emitNone (events.js:91:20)
> at Socket.emit (events.js:185:7)
> at endReadableNT (_stream_readable.js:974:12)
> at _combinedTickCallback (internal/process/next_tick.js:74:11)
> at process._tickCallback (internal/process/next_tick.js:98:9)
> FTL/util:lifecycle 15481 [SODMDIQ499999999] Shutting down due to fatal
> error
> INF/provider 15473 [
> *] Cleaning up device worker "SODMDIQ499999999" ERR/provider 15473 [*]
> Device worker "SODMDIQ499999999" died with code 1
> INF/provider 15473 [
>
>
> *] Restarting device worker "SODMDIQ499999999" Please run stf doctor and
> paste the output here. whitiancai@whitiancai-OptiPlex-3046:~$ stf doctor
> INF/cli:doctor 16229 [*] OS Arch: x64
> INF/cli:doctor 16229 [
> *] OS Platform: linux INF/cli:doctor 16229 [*] OS Platform:
> 4.4.0-75-generic
> INF/cli:doctor 16229 [
> *] Using Node 6.10.0 INF/cli:doctor 16229 [*] Using ZeroMQ 4.2.1
> INF/cli:doctor 16229 [
> *] Using RethinkDB 2.3.5~0trusty INF/cli:doctor 16229 [*] Using ADB 1.0.39
> INF/cli:doctor 16229 [
> *] Using GraphicsMagick 1.3.25 INF/cli:doctor 16229 [*] Using ProtoBuf
> 3.3.0
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/609>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Qh7lUaDilMh-8kYE3gaiD7I78V7ks5sBTmUgaJpZM4NxN6n>
> .
>
 ... are you trying to add a device from another STF to your STF?

On Tue, Jun 6, 2017 at 20:55 whitiancai <notifications@github.com> wrote:

> I am sure i can both see and control the device before i run 'adb connect
> 192.168.31.202:7041',and it happened on all my devices(tow GALAXY_S4 and
> one XIAOMI NOTE2) ,not only one deivce.I also restart the stf ,linux pc and
> windows pc.
>
> Here is the other log when the error occured
> INF/triproxy 15333 [app001] PUB socket bound on tcp://127.0.0.1:7111
> INF/triproxy 15333 [app001] DEALER socket bound on tcp://127.0.0.1:7112
> INF/triproxy 15333 [app001] PULL socket bound on tcp://127.0.0.1:7113
> INF/triproxy 15339 [dev001] PUB socket bound on tcp://127.0.0.1:7114
> INF/triproxy 15339 [dev001] DEALER socket bound on tcp://127.0.0.1:7115
> INF/triproxy 15339 [dev001] PULL socket bound on tcp://127.0.0.1:7116
> INF/db 15340 [
>
>
> *] Connecting to 127.0.0.1:28015 <http://127.0.0.1:28015> INF/processor
> 15340 [proc001] App dealer connected to "tcp://127.0.0.1:7112
> <http://127.0.0.1:7112>" INF/processor 15340 [proc001] Device dealer
> connected to "tcp://127.0.0.1:7115 <http://127.0.0.1:7115>" INF/poorxy
> 15406 [*] Listening on port 7100
> INF/reaper 15352 [reaper001] Subscribing to permanent channel "
>
> *ALL" INF/reaper 15352 [reaper001] Reaping devices with no heartbeat
> INF/db 15346 [*] Connecting to 127.0.0.1:28015
> INF/db 15352 [reaper001] Connecting to 127.0.0.1:28015
> INF/reaper 15352 [reaper001] 1Receiving input from "tcp://127.0.0.1:7111"
> INF/reaper 15352 [reaper001] Sending output to "tcp://127.0.0.1:7116"
> INF/processor 15346 [proc002] App dealer connected to "tcp://
> 127.0.0.1:7112"
> INF/processor 15346 [proc002] Device dealer connected to "tcp://
> 127.0.0.1:7115"
> INF/provider 15358 [
> *] Subscribing to permanent channel "iH0FfHpzR1WQW0jeRoqlHw=="
> INF/provider 15358 [*] Sending output to "tcp://127.0.0.1:7116"
> INF/provider 15358 [
> *] Receiving input from "tcp://127.0.0.1:7114 <http://127.0.0.1:7114>"
> INF/provider 15358 [*] Tracking devices
> INF/storage:plugins:image 15394 [
> *] Listening on port 7103 INF/storage:plugins:apk 15400 [*] Listening on
> port 7104
> INF/auth-mock 15364 [
> *] Listening on port 7120 INF/storage:temp 15388 [*] Listening on port
> 7102
> INF/app 15370 [
> *] Using pre-built resources INF/app 15370 [*] Listening on port 7105
> INF/db 15370 [
> *] Connecting to 127.0.0.1:28015 <http://127.0.0.1:28015> INF/websocket
> 15382 [*] Subscribing to permanent channel "
> *ALL" INF/websocket 15382 [*] Listening on port 7110
> INF/db 15382 [
> *] Connecting to 127.0.0.1:28015 <http://127.0.0.1:28015> INF/websocket
> 15382 [*] Sending output to "tcp://127.0.0.1:7113"
> INF/websocket 15382 [
> *] Receiving input from "tcp://127.0.0.1:7111 <http://127.0.0.1:7111>"
> INF/api 15376 [*] Subscribing to permanent channel "
> *ALL" INF/api 15376 [*] Listening on port 7106
> INF/api 15376 [
> *] Sending output to "tcp://127.0.0.1:7113 <http://127.0.0.1:7113>"
> INF/api 15376 [*] Receiving input from "tcp://127.0.0.1:7111"
> INF/db 15376 [
>
> *] Connecting to 127.0.0.1:28015 <http://127.0.0.1:28015> INF/reaper 15352
> [reaper001] Device "SODMDIQ499999999" is present INF/util:datautil 15382 [*]
> Device database does not have an entry for "SODMDIQ499999999" (model "Redmi
> Note 2"/"hermes"). This is not an error, it only means that we don't have
> data for it yet.
> INF/util:datautil 15376 [
> *] Device database does not have an entry for "SODMDIQ499999999" (model
> "Redmi Note 2"/"hermes"). This is not an error, it only means that we don't
> have data for it yet. INF/util:datautil 15376 [*] Device database does
> not have an entry for "SODMDIQ499999999" (model "Redmi Note 2"/"hermes").
> This is not an error, it only means that we don't have data for it yet.
> INF/util:datautil 15376 [
> *] Device database does not have an entry for "SODMDIQ499999999" (model
> "Redmi Note 2"/"hermes"). This is not an error, it only means that we don't
> have data for it yet. INF/util:datautil 15376 [*] Device database does
> not have an entry for "SODMDIQ499999999" (model "Redmi Note 2"/"hermes").
> This is not an error, it only means that we don't have data for it yet.
> INF/provider 15358 [
>
> *] Found device "192.168.31.202:7401 <http://192.168.31.202:7401>"
> (offline) INF/reaper 15352 [reaper001] Device "192.168.31.202:7401
> <http://192.168.31.202:7401>" is present INF/provider 15358 [*]
> Registered device "192.168.31.202:7401"
> INF/provider 15358 [
> *] Lost device "192.168.31.202:7401 <http://192.168.31.202:7401>"
> (offline) INF/provider 15358 [*] Providing all 0 device(s)
> INF/provider 15358 [
>
> *] Found device "192.168.31.202:7401 <http://192.168.31.202:7401>"
> (offline) INF/reaper 15352 [reaper001] Device "192.168.31.202:7401
> <http://192.168.31.202:7401>" is present INF/provider 15358 [*]
> Registered device "192.168.31.202:7401"
> INF/provider 15358 [
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> *] Device "192.168.31.202:7401 <http://192.168.31.202:7401>" is now
> "device" (was "offline") INF/device:support:push 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Sending output to "tcp://127.0.0.1:7116
> <http://127.0.0.1:7116>" INF/device 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Preparing device INF/device:support:sub 15539
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Receiving input from
> "tcp://127.0.0.1:7114 <http://127.0.0.1:7114>" INF/device:support:sub 15539
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Subscribing to permanent
> channel "ALL" INF/device:support:properties 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Loading properties INF/device:support:sdk
> 15539 [192.168.31.202:7401 <http://192.168.31.202:7401>] Supports SDK 21
> INF/device:support:abi 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Supports ABIs arm64-v8a, armeabi-v7a, armeabi
> INF/device:resources:minicap 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Installing
> "/home/whitiancai/stf/stf-master/node_modules/minicap-prebuilt/prebuilt/arm64-v8a/bin/minicap"
> as "/data/local/tmp/minicap" INF/device:resources:minicap 15539
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Installing
> "/home/whitiancai/stf/stf-master/node_modules/minicap-prebuilt/prebuilt/arm64-v8a/lib/android-21/minicap.so"
> as "/data/local/tmp/minicap.so" INF/device:resources:service 15539
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Checking whether we need
> to install STFService INF/device:resources:service 15539
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Running version check
> INF/device:resources:service 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] STFService up to date
> INF/device:plugins:service 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Launching agent INF/device:plugins:service
> 15539 [192.168.31.202:7401 <http://192.168.31.202:7401>] Agent says:
> "Listening on @stfagent" INF/device:plugins:service 15539
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Agent says: "InputClient
> started" INF/device:plugins:service 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Launching service INF/device:plugins:display
> 15539 [192.168.31.202:7401 <http://192.168.31.202:7401>] Reading display
> info INF/device:plugins:phone 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Fetching phone info
> INF/device:plugins:identity 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Solving identity INF/device:plugins:solo
> 15539 [192.168.31.202:7401 <http://192.168.31.202:7401>] Subscribing to
> permanent channel "M3FzTf00pMzxIZuaKcoE5TbzkzA="
> INF/device:plugins:screen:stream 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Starting WebSocket server on port 7400
> FTL/device 15539 [192.168.31.202:7401 <http://192.168.31.202:7401>] Setup
> had an error Error: listen EADDRINUSE 0.0.0.0:7400 <http://0.0.0.0:7400> at
> Object.exports._errnoException (util.js:1022:11) at
> exports._exceptionWithHostPort (util.js:1045:20) at Server._listen2
> (net.js:1259:14) at listen (net.js:1295:10) at net.js:1405:9 at
> _combinedTickCallback (internal/process/next_tick.js:77:11) From previous
> event: at Promise._captureStackTrace
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.11.0@bluebird/js/main/debuggability.js:90:23)
> at Promise._resolveFromResolver
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.11.0@bluebird/js/main/promise.js:480:10)
> at new Promise
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.11.0@bluebird/js/main/promise.js:71:37)
> at createServer
> (/home/whitiancai/stf/stf-master/lib/units/device/plugins/screen/stream.js:431:14)
> at
> /home/whitiancai/stf/stf-master/lib/units/device/plugins/screen/stream.js:449:12
> at SerialSyrup.ParallelSyrup.invoke
> (/home/whitiancai/stf/stf-master/node_modules/_stf-syrup@1.0.0@stf-syrup/lib/parallel.js:54:24)
> at
> /home/whitiancai/stf/stf-master/node_modules/_stf-syrup@1.0.0@stf-syrup/lib/serial.js:43:33
> at tryCatch1
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/util.js:63:19)
> at Promise$_callHandler [as _callHandler]
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/promise.js:708:13)
> at Promise$_settlePromiseFromHandler [as _settlePromiseFromHandler]
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/promise.js:724:18)
> at Promise$_settlePromiseAt [as _settlePromiseAt]
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/promise.js:896:14)
> at Promise$_fulfillPromises [as _fulfillPromises]
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/promise.js:1041:14)
> at Async$_consumeFunctionBuffer [as _consumeFunctionBuffer]
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/async.js:74:12)
> at Async$consumeFunctionBuffer
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@1.1.1@bluebird/js/main/async.js:37:14)
> at _combinedTickCallback (internal/process/next_tick.js:67:7)*
>
>
>
> * at process._tickCallback (internal/process/next_tick.js:98:9)*
>
>
>
> * FTL/util:lifecycle 15539 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Shutting down due to fatal error INF/provider
> 15358 [] Cleaning up device worker "192.168.31.202:7401
> <http://192.168.31.202:7401>" ERR/provider 15358 [*] Device worker "
> 192.168.31.202:7401" died with code 1
> INF/provider 15358 [
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> *] Restarting device worker "192.168.31.202:7401
> <http://192.168.31.202:7401>" INF/device:support:push 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Sending output to
> "tcp://127.0.0.1:7116 <http://127.0.0.1:7116>" INF/device 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Preparing device
> INF/device:support:sub 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Receiving input from "tcp://127.0.0.1:7114
> <http://127.0.0.1:7114>" INF/device:support:sub 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Subscribing to permanent channel "ALL"
> INF/device:support:properties 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Loading properties INF/provider 15358 []
> Providing 0 of 1 device(s); waiting for "192.168.31.202:7401
> <http://192.168.31.202:7401>" INF/device:support:sdk 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Supports SDK 21
> INF/device:support:abi 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Supports ABIs arm64-v8a, armeabi-v7a, armeabi
> INF/device:resources:minicap 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Installing
> "/home/whitiancai/stf/stf-master/node_modules/minicap-prebuilt/prebuilt/arm64-v8a/bin/minicap"
> as "/data/local/tmp/minicap" INF/device:resources:minicap 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Installing
> "/home/whitiancai/stf/stf-master/node_modules/minicap-prebuilt/prebuilt/arm64-v8a/lib/android-21/minicap.so"
> as "/data/local/tmp/minicap.so" INF/device:resources:service 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Checking whether we need
> to install STFService INF/device:resources:service 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Running version check
> INF/device:resources:service 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] STFService up to date
> INF/device:plugins:service 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Launching agent INF/device:plugins:service
> 15554 [192.168.31.202:7401 <http://192.168.31.202:7401>] Agent says:
> "Listening on @stfagent" INF/device:plugins:service 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Launching service
> INF/device:plugins:service 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Agent says: "InputClient started"
> INF/device:plugins:display 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Reading display info INF/device:plugins:phone
> 15554 [192.168.31.202:7401 <http://192.168.31.202:7401>] Fetching phone
> info INF/device:plugins:identity 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Solving identity INF/device:plugins:solo
> 15554 [192.168.31.202:7401 <http://192.168.31.202:7401>] Subscribing to
> permanent channel "M3FzTf00pMzxIZuaKcoE5TbzkzA="
> INF/device:plugins:screen:stream 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Starting WebSocket server on port 7404
> INF/provider 15358 [*] Providing 0 of 1 device(s); waiting for "
> 192.168.31.202:7401"
> INF/provider 15358 [
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
> *] Lost device "192.168.31.202:7401 <http://192.168.31.202:7401>" (device)
> IMP/device:plugins:service 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Agent connection ended, attempting to
> relaunch INF/device:plugins:service 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Launching service IMP/device:plugins:service
> 15554 [192.168.31.202:7401 <http://192.168.31.202:7401>] Service connection
> ended, attempting to relaunch INF/device:plugins:service 15554
> [192.168.31.202:7401 <http://192.168.31.202:7401>] Launching service
> FTL/device:plugins:service 15554 [192.168.31.202:7401
> <http://192.168.31.202:7401>] Agent connection could not be relaunched
> FailError: Failure: 'device '192.168.31.202:7401
> <http://192.168.31.202:7401>' not found' at
> /home/whitiancai/stf/stf-master/node_modules/_adbkit@2.9.2@adbkit/lib/adb/parser.js:183:29
> at tryCatcher
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.9.34@bluebird/js/main/util.js:26:23)
> at Promise._settlePromiseFromHandler
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.9.34@bluebird/js/main/promise.js:503:31)
> at Promise._settlePromiseAt
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.9.34@bluebird/js/main/promise.js:577:18)
> at Async._drainQueue
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.9.34@bluebird/js/main/async.js:128:12)
> at Async._drainQueues
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.9.34@bluebird/js/main/async.js:133:10)
> at Immediate.Async.drainQueues
> (/home/whitiancai/stf/stf-master/node_modules/_bluebird@2.9.34@bluebird/js/main/async.js:15:14)
> at runCallback (timers.js:651:20) at tryOnImmediate (timers.js:624:5) at
> processImmediate [as _immediateCallback] (timers.js:596:5)
> FTL/util:lifecycle 15554 [192.168.31.202:7401 <http://192.168.31.202:7401>]
> Shutting down due to fatal error INF/provider 15358 [*] Shutting down
> device worker "192.168.31.202:7401"
> INF/provider 15358 [
> *] Cleaning up device worker "192.168.31.202:7401
> <http://192.168.31.202:7401>" INF/provider 15358 [*] Gracefully killing
> device worker "192.168.31.202:7401"
> INF/provider 15358 [
> *] Device worker "192.168.31.202:7401 <http://192.168.31.202:7401>" has
> retired INF/provider 15358 [*] Providing all 0 device(s)
> INF/util:datautil 15382 [
> *] Device database does not have an entry for "SODMDIQ499999999" (model
> "Redmi Note 2"/"hermes"). This is not an error, it only means that we don't
> have data for it yet. INF/util:datautil 15376 [*] Device database does
> not have an entry for "SODMDIQ499999999" (model "Redmi Note 2"/"hermes").
> This is not an error, it only means that we don't have data for it yet.
> INF/util:datautil 15376 [
> *] Device database does not have an entry for "SODMDIQ499999999" (model
> "Redmi Note 2"/"hermes"). This is not an error, it only means that we don't
> have data for it yet. INF/util:datautil 15376 [*] Device database does
> not have an entry for "SODMDIQ499999999" (model "Redmi Note 2"/"hermes").
> This is not an error, it only means that we don't have data for it yet.
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/609#issuecomment-306463757>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_emJd-RGy0QNAlU2nQsLL9duF-HVks5sBT4mgaJpZM4NxN6n>
> .
>
 I just read your original description again, and you have two `stf provider` providers running. `stf local` includes `stf provider`. You can not have the same device in two providers or this happens. One provider is trying to set up a device that's already being controlled by another provider, causing the first provider to fail. Then the other provider tries again, and the second provider fails. This continues in a loop until you hit the failure limit.

Basically you're doing it wrong. Maybe you wanted to use `adb tcpip`?

Can't help you with this any more, it's a usage issue.  It does, like the README says. Now please close this issue.

On Tue, Jun 6, 2017 at 16:24 youlingfei <notifications@github.com> wrote:

> *What is the issue or idea you have?*
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
>
> *What is the expected behavior?*
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
> *Please run stf doctor and paste the output here.*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/608>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bM2Xaw1WXYWnvjnq1820TBgCE5tks5sBP6ggaJpZM4Nw9IT>
> .
>
  Impossible to tell, you've given almost no details. It could be a timeout, though. Try setting a longer `--group-timeout`. Oh. The web UI isn't really meant to be used for several hours, I don't think that works well. No idea though, I've never tried doing that. I would use the `adb connect` command instead, and then run monkey over that. You should also increase `--group-timeout` to be longer than 10 hours. Thanks for following up with a solution! I'm not sure if it would have helped, but there's also `ZMQ_TCP_KEEPALIVE` and `ZMQ_TCP_KEEPALIVE_IDLE` that you could have tried. See https://github.com/openstf/stf/blob/461ec81c9ed3a149bd31906b1fc4546e95fee592/lib/util/zmqutil.js  Please ask the plugin author. I would try using UTF-8 as your character set, though.  Thanks!  I suppose that could be done.
On Sun, Jun 4, 2017 at 0:49 thinkhy <notifications@github.com> wrote:

> As subject, suggest to open the timeout value as a command argument rather
> than hard coding it, so users can specify survival time for temp
> storage(apk/image/log ...)
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/604>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZSDB-alvh65WdteS8ziNYeCaFuaks5sAYCFgaJpZM4NvHtt>
> .
>
  To add Xiaomi devices to STF, there are extra steps that must be taken.

1. To enable __Developer options__, to go __Settings__ → __About phone__ and tap on __MIUI version__ until it says developer mode has been turned on.
2. Go to __Settings__ → __Mi Account__ and create or log in to a Mi account. This is __required__ for the next step.
3. Go to __Settings__ → __Additional settings__ → __Developer options__. Turn __USB debugging__ (for ADB access), __Install via USB__ (needed for installing STFService.apk) and __USB debugging (Security settings)__ (needed for running minitouch) on. You __must__ have a MI account set up to enable  _USB debugging (Security settings)_, otherwise it won't let you.
    - Note: there are reports that some versions of MIUI **may require a SIM card** or these settings can't be turned on.
4. Connect the device to your computer. Allow the ADB key and select "Always allow."
5. Run STF. A dialog will pop up on the device confirming installation of `STFService`. You must allow the installation to go through. _Note that you may need to do this again in the future if the service is updated._
6. If STF fails to start after installing `STFService.apk`, go to __Settings__ → __Permissions__  → __Autostart__ and enable `STFService`.
7. The device should now work in STF.

__Common errors:__

If you see an error that says:

```
Setup had an error Error: /data/local/tmp/STFService.apk could not be installed [INSTALL_CANCELED_BY_USER]
```

It means that you haven't enabled the __Install via USB__ option.

**Steps tested on:**

_Redmi 4A_
- MIUI 8.2.6.0
- MIUI 8.5.1.0 Hmmmm that's weird, I don't have a SIM card in mine. Which device and MIUI version is it? Strange... does it actually tell you that you need a SIM card? Possible. I've added your findings to the guide. What kind of an update are you looking for? If the manufacturer forces you to set up a SIM card there’s nothing we can do about that.  It does that because it spawns multiple child processes. At the moment there is no easy way to do what you want.  @kwv 

Thanks for the PR. Made some comments, please have a look.

I will still suggest to use swagger-client@2.x.x instead of 3.xx since they are making lots of breaking changes in their own implementation not just because of OpenAPI specs. Also, I do not think we will be supporting OpenAPI v3 anytime soon since v2 is working totally fine as for now and we don't have any plan to extend OpenSTF API anytime soon. 
 LGTM, thanks!  Publishers and subscribers only push/sub to certain channels. There's a unique channel for each device, each group (set of devices controlled by a user at once) and all devices. When you tap, the message is sent to a specific device's channel. Other device workers never see the message. Device subscribes to its own channel here, https://github.com/openstf/stf/blob/master/lib/units/device/plugins/solo.js#L28

Just look for `sub.subscribe` under device directory, you will know all the channels which device is subscribing.  Ok, I know. Thanks One more question.You start two 'triproxys' through the command

```
INF/util:procutil 40934 [*] Forking "/Users/sheranjun/Code/stf/lib/cli.js triproxy app001 --bind-pub tcp://127.0.0.1:7111 --bind-dealer tcp://127.0.0.1:7112 --bind-pull tcp://127.0.0.1:7113"
INF/util:procutil 40934 [*] Forking "/Users/sheranjun/Code/stf/lib/cli.js triproxy dev001 --bind-pub tcp://127.0.0.1:7114 --bind-dealer tcp://127.0.0.1:7115 --bind-pull tcp://127.0.0.1:7116"
```

When I tap device A on the STF website, the flow is as follow:
![image](https://cloud.githubusercontent.com/assets/5986074/26661140/8774d1f4-46ae-11e7-8c0c-9ac38829a338.png)

Here is my question. Why STF start 'app001' and 'dev 001' two 'triproxys' ? . If just start one 'triproxy', what's wrong with it? 


 App side triproxy takes messages from the web UI and passes them to the devices (through processors and the device side triproxy). The device side triproxy takes messages from the devices and passes them to the app side (via processors and app side triproxy). Ok.Thanks very much.  Well I'd say that's beyond our use case. We can't support everything. However, https://github.com/openstf/minitouch/pull/15 might work once merged. I don't think there's anything I can do about that right now, too busy. However, please post your feedback on that minicap issue where it is more appropriate.  Well, since there's this: `minitouch says: "binding socket: Address already in use"`, I'd say you may have more than one copy of STF running at the same time.

Also, please don't remove the issue template. You should have said which device you're having this issue with, but didn't because you removed the template. We need that information or we can't/won't do anything. Logs look OK to me. Closing since this issue is fairly old.  That's not an error, it's there purely for information purposes. I've now removed the message because everyone thinks it's an error for some reason.

Unfortunately that stack trace is not very useful. Please describe what exactly you are doing when that error happens. Nice. Have you tried upgrading the package in your own installation yet?

On Mon, Jun 12, 2017 at 12:35 AM, lishuai0214 <notifications@github.com>
wrote:

> @sorccui, I finally found this is a bug in older versions of websocket,
> It's just a coincidence when it appear together with datautil's log, is
> there any plan to upgrade websocket to a newer version? This is the origin
> bug of websocket, websockets/ws#758
> <https://github.com/websockets/ws/issues/758>
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/597#issuecomment-307637146>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Z1ZOAd0AqEQlrL1YrRNUEVee1j4ks5sDAldgaJpZM4Nkodi>
> .
>
 Updated in master.  That is exactly what it does.
On Fri, May 19, 2017 at 13:02 saurabhmistry18 <notifications@github.com>
wrote:

> I am successfully running stf local and stf local --public-ip commands to
> view and control my android devices using a raspberry pi. What I plan to do
> is have such multiple Raspberry Pis connected to a central server such that
> now I can access all my devices from anywhere and not just my local IP. I
> have checked the Deployment.md files. However can I use multiple Providers
> and still connect to STF such that post login I can view all the *x*
> number of devices connected over *n* number of Raspberry Pis. What I
> intend to achieve is have multiple such Raspberry Pis sitting at different
> locations which connect to a central server for access from anywhere. Can
> this really be achieved using the STF Deployment strategy?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/596>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SAe9ZTPirq8EjWxtv2BuQWe3nIDks5r7RRegaJpZM4NgDfb>
> .
>
 I meant that the deployment is explicitly designed so that you can even
have 1 device per machine if you like.

The deployment guide tells you what you need and where.
On Fri, May 19, 2017 at 13:09 saurabhmistry18 <notifications@github.com>
wrote:

> This would work where I have all my android devices connected to a single
> Raspberry Pi. What if I have a single android device connected to each
> Raspberry Pi and now I want to access them centrally? What all services
> should I be deploying on the Raspberry Pi and what should I be running on
> the server?
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/596#issuecomment-302603680>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UXLDrqpUJITmmcQxfZGc-IFNd7qks5r7RXqgaJpZM4NgDfb>
> .
>
  Choose a different channel. The default channel is for the current device only. I don't remember where exactly it is, but you should send the command to the user's group channel if you want it to go to all devices you're currently using.  Thank you, that is an extremely good bug report. I think @vbanthia would be best equipped to handle this if he has time. *Copying comment from [here](https://github.com/openstf/stf/pull/601#issuecomment-305354613), so that other users don't get confused.*

> I will still suggest to use swagger-client@2.x.x instead of 3.x.x since they are making lots of breaking changes in their own implementation not just because of OpenAPI specs. Also, I do not think we will be supporting OpenAPI v3 anytime soon since v2 is working totally fine as for now and we don't have any plan to extend OpenSTF API anytime soon. ```
npm install swagger-client@2.1.31
```

If you are not comfortable with NodeJS, you can also try shell script example, https://github.com/openstf/stf/blob/master/doc/API.md#using-shell  Looks good, thanks!  Thanks! Note that instead of saying you updated something, it's usually better to say why you updated it. For example, you could have written that `.demand()` is deprecated in the newest version.  Sorry about that, forgot to merge. It's done now.  Maybe you already have STF running.  Are you perhaps using the --allow-remote option and then adding a device to
STF with `adb connect`?

On Tue, May 2, 2017 at 8:51 PM, bowen <notifications@github.com> wrote:

> Thank you for answering me so quickly！！
> But I can't find another STF process is running... terrible question..
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/589#issuecomment-298613829>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_fdPp5QM2pHvF0KsGatsH5mcFSo5ks5r1xiugaJpZM4NOBxa>
> .
>
 Sounds like you have the same device twice in the system. Once over USB and
once over WIFI.
On Wed, May 3, 2017 at 10:53 bowen <notifications@github.com> wrote:

> Yes, I'm using --allow-remote option, but I'm not adding any device to STF
> with 'adb connect',
> maybe another process is using adb? I will check it..
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/589#issuecomment-298806816>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YNAddc6WUHLP1x_SKYaa7ACY0N3ks5r194FgaJpZM4NOBxa>
> .
>
  You're using sudo. That tells me that you used sudo to install STF. Do not
do that. Use NVM or similar to install node do that you can run everything
as your own (or other) user. Otherwise modules will fail to build. There's
also an --allow-root flag (or sometjing like that, check help output) in
npm, but it doesn't always work 100%.
On Tue, May 2, 2017 at 11:21 liuchang6 <notifications@github.com> wrote:

> @0x88l <https://github.com/0x88l> I'm sorry to reply you so late, I've
> tried this method.
> I reinstall the ZMQ, deleted node_modules. do npm install && npm again.
>
> zmq -v 4.1.4
>
> liuchang@ubuntu:/usr/local/lib$ sudo rm -rf node_modules/
>
> npm install && npm
> npm WARN yes@3.10.10 No repository field.
>
> Usage: npm
>
> where is one of:
> access, adduser, bin, bugs, c, cache, completion, config,
> ddp, dedupe, deprecate, dist-tag, docs, edit, explore, get,
> help, help-search, i, init, install, install-test, it, link,
> list, ln, login, logout, ls, outdated, owner, pack, ping,
> prefix, prune, publish, rb, rebuild, repo, restart, root,
> run, run-script, s, se, search, set, shrinkwrap, star,
> stars, start, stop, t, tag, team, test, tst, un, uninstall,
> unpublish, unstar, up, update, v, version, view, whoami
>
> npm -h quick help on
> npm -l display full usage info
> npm help search for help on
> npm help npm involved overview
>
> Specify configs in the ini-formatted file:
> /home/liuchang/.npmrc
> or on the command line via: npm --key value
> Config info can be viewed via: npm help config
>
> npm@3.10.10 /usr/lib/node_modules/npm
>
> stf doctor
>
>
> /usr/lib/node_modules/stf/node_modules/bindings/bindings.js:91
> throw err
> ^
>
> Error: Could not locate the bindings file. Tried:
> → /usr/lib/node_modules/stf/node_modules/zmq/build/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
> → /usr/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
> →
> /usr/lib/node_modules/stf/node_modules/zmq/compiled/6.10.2/linux/x64/zmq.node
> at bindings
> (/usr/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
> at Object. (/usr/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
> at Module._compile (module.js:570:32)
> at Object.Module._extensions..js (module.js:579:10)
> at Module.load (module.js:487:32)
> at tryModuleLoad (module.js:446:12)
> at Function.Module._load (module.js:438:3)
> at Module.require (module.js:497:17)
> at require (internal/module.js:20:19)
> at Object. (/usr/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
> at Module._compile (module.js:570:32)
> at Object.Module._extensions..js (module.js:579:10)
> at Module.load (module.js:487:32)
> at tryModuleLoad (module.js:446:12)
> at Function.Module._load (module.js:438:3)
> at Module.require (module.js:497:17)
>
> Forgive me for not having experience, I really can not find a problem
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/588#issuecomment-298481620>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cEEHDw_gSRLwlNmXdUHCxvxrTK9ks5r1pM6gaJpZM4NLGGW>
> .
>
  <!-- *Before creating an issue please make sure you are using the latest version of STF.* -->

**What is the issue or idea you have?**

When connected to STF, Alcatel GO FLIP is in a permanent prepare loop. This seems to be caused by a modified ROM disabling app_process and therefore most internal commands not working.

It's unclear whether there's anything we can do about this issue, possibly not.

**Does it only happen on a specific device? Please run `adb devices -l` and paste the corresponding row.**

> product:gflip2 model:Alcatel_GO_FLIP device:gflip2

**Please provide the steps to reproduce the issue.**

Connect an Alcatel GO FLIP to STF.

**What is the expected behavior?**

Device shows up normally in STF.

**Do you see errors or warnings in the `stf local` output? If so, please paste them or the full log here.**

The cause is:

```
adb shell pm list packages
/system/bin/pm[6]: app_process: not found
```

Obviously the ROM has been modified, probably heavily stripped down for the low-spec device. Therefore you can't even launch most executables on that device.

**Please run `stf doctor` and paste the output here.**

Not relevant. Thanks, that's good info. Looks like you're right, the props do mention KaiOS.

```
[DEVICE_PROVISIONED]: [1]
[audio.dolby.ds2.enabled]: [true]
[audio.offload.buffer.size.kb]: [64]
[audio.offload.gapless.enabled]: [true]
[audio.offload.min.duration.secs]: [30]
[audio.offload.video]: [true]
[bluetooth.isEnabled]: [false]
[cameradaemon.SaveMemAtBoot]: [1]
[cdma.prl.version]: [55061]
[config.disable_atlas]: [true]
[dalvik.vm.dex2oat-Xms]: [64m]
[dalvik.vm.dex2oat-Xmx]: [512m]
[dalvik.vm.heapgrowthlimit]: [128m]
[dalvik.vm.heapmaxfree]: [8m]
[dalvik.vm.heapminfree]: [6m]
[dalvik.vm.heapsize]: [256m]
[dalvik.vm.heapstartsize]: [8m]
[dalvik.vm.heaptargetutilization]: [0.75]
[dalvik.vm.image-dex2oat-Xms]: [64m]
[dalvik.vm.image-dex2oat-Xmx]: [64m]
[dalvik.vm.isa.arm.features]: [default]
[dalvik.vm.isa.arm.variant]: [cortex-a7]
[dalvik.vm.stack-trace-file]: [/data/anr/traces.txt]
[dalvik.vm.zygotemaxfailedboots]: [5]
[debug.atrace.tags.enableflags]: [0]
[debug.composition.type]: [gpu]
[debug.egl.hw]: [1]
[debug.hwc.dynThreshold]: [2.5]
[debug.mdpcomp.logs]: [0]
[debug.sf.hw]: [1]
[debug.sf.hwc.canUseABC]: [0]
[debug.sf.swaprect]: [0]
[default.HwV.value]: [03]
[dev.jrdcom.cu.ref]: [4044T-2ARXUS1-R1]
[dev.pm.dyn_samplingrate]: [1]
[dev.tct.handset.ref]: [SAA61U0AA10C]
[diag.reset_handler]: [true]
[diag_get_daemon.status]: [YES]
[gsm.version.baseband]: [MPSS.JO.1.0.c5.1-00024-M8909EA]
[gsm.version.ril-impl]: [Qualcomm RIL 1.0]
[hw.sf.app_buff_count]: [3]
[init.svc.adbd]: [running]
[init.svc.atfwd]: [running]
[init.svc.audiod]: [running]
[init.svc.b2g]: [running]
[init.svc.bms-sh]: [stopped]
[init.svc.cnd]: [running]
[init.svc.config-zram]: [stopped]
[init.svc.config_bluetooth]: [stopped]
[init.svc.debuggerd]: [running]
[init.svc.diag_get_daemon]: [running]
[init.svc.fakeappops]: [running]
[init.svc.fidodaemon]: [running]
[init.svc.flash_recovery]: [stopped]
[init.svc.gatekeeperd]: [running]
[init.svc.gonksched]: [running]
[init.svc.imsdatadaemon]: [running]
[init.svc.imsstarter]: [stopped]
[init.svc.irsc_util]: [stopped]
[init.svc.jrddmesgservice]: [stopped]
[init.svc.jrdgeckologsvc]: [stopped]
[init.svc.jrdlogcatservice]: [stopped]
[init.svc.jrdqxdmservice]: [stopped]
[init.svc.jrdtcpdpservice]: [stopped]
[init.svc.keystore]: [running]
[init.svc.loc_launcher]: [running]
[init.svc.md_check]: [stopped]
[init.svc.media]: [running]
[init.svc.mverproxy]: [stopped]
[init.svc.netd]: [running]
[init.svc.netmgrd]: [running]
[init.svc.nvdiag_daemon]: [running]
[init.svc.per_mgr]: [running]
[init.svc.perfd]: [running]
[init.svc.play_music]: [stopped]
[init.svc.ptt_socket_app]: [running]
[init.svc.qcamerasvr]: [running]
[init.svc.qcom-c_core-sh]: [stopped]
[init.svc.qcom-c_main-sh]: [stopped]
[init.svc.qcom-debug]: [stopped]
[init.svc.qcom-post-boot]: [stopped]
[init.svc.qcom-sh]: [stopped]
[init.svc.qcom-usb-sh]: [stopped]
[init.svc.qcomsysd]: [running]
[init.svc.qmuxd]: [running]
[init.svc.qseecomd]: [running]
[init.svc.qti]: [running]
[init.svc.qti-testscripts]: [stopped]
[init.svc.ril-daemon]: [running]
[init.svc.rmt_storage]: [running]
[init.svc.root_check]: [running]
[init.svc.servicemanager]: [running]
[init.svc.slate_diag]: [running]
[init.svc.tct_diag]: [running]
[init.svc.tctd]: [running]
[init.svc.tftp_server]: [running]
[init.svc.thermal-engine]: [running]
[init.svc.time_daemon]: [running]
[init.svc.trace_util]: [stopped]
[init.svc.ueventd]: [running]
[init.svc.vm_bms]: [running]
[init.svc.vold]: [running]
[init.svc.wcnss-service]: [running]
[init.svc.wpa_supplicant]: [running]
[keyguard.no_require_sim]: [true]
[media.aac_51_output_enabled]: [true]
[media.stagefright.enable-aac]: [true]
[media.stagefright.enable-fma2dp]: [true]
[media.stagefright.enable-http]: [true]
[media.stagefright.enable-player]: [true]
[media.stagefright.enable-qcp]: [true]
[media.stagefright.enable-scan]: [true]
[media.stagefright.use-awesome]: [false]
[mm.enable.qcom_parser]: [262143]
[mmp.enable.3g2]: [true]
[net.bt.name]: [Android]
[net.change]: [net.dnschange]
[net.dns1]: [REDACTED]
[net.dns2]: [REDACTED]
[net.dns3]: [REDACTED]
[net.dns4]: [REDACTED
[net.dnschange]: [148]
[net.rmnet_data0.dns1]: [REDACTED]
[net.rmnet_data0.dns2]: [REDACTED]
[net.rmnet_data0.gw]: [REDACTED]
[net.rmnet_data1.dns1]: []
[net.rmnet_data1.dns2]: []
[net.rmnet_data1.gw]: []
[net.tcp.buffersize.default]: [4096,87380,524288,4096,16384,110208]
[net.tcp.buffersize.edge]: [4093,26280,35040,4096,16384,35040]
[net.tcp.buffersize.evdo]: [4094,87380,524288,4096,16384,262144]
[net.tcp.buffersize.gprs]: [4092,8760,11680,4096,8760,11680]
[net.tcp.buffersize.hsdpa]: [4094,87380,1220608,4096,16384,1220608]
[net.tcp.buffersize.hspa]: [4094,87380,1220608,4096,16384,1220608]
[net.tcp.buffersize.hspap]: [4094,87380,1220608,4096,16384,1220608]
[net.tcp.buffersize.hsupa]: [4094,87380,1220608,4096,16384,1220608]
[net.tcp.buffersize.lte]: [2097152,4194304,8388608,262144,524288,1048576]
[net.tcp.buffersize.umts]: [4094,87380,110208,4096,16384,110208]
[net.tcp.buffersize.wifi]: [524288,2097152,4194304,262144,524288,1048576]
[net.tcp.default_init_rwnd]: [60]
[nvdiag_daemon.status]: [running]
[oma.data.keep]: [0]
[oma.service.is_busy]: [0]
[oma.uicc.write]: [ok]
[persist.audio.fluence.speaker]: [false]
[persist.audio.fluence.voicecall]: [true]
[persist.audio.fluence.voicerec]: [false]
[persist.camera.longshot.stages]: [1]
[persist.chameleon.package.path]: [/carrier/chameleon.zip]
[persist.cne.feature]: [4]
[persist.data.mode]: [concurrent]
[persist.data.netmgrd.qos.enable]: [true]
[persist.debug.wfd.enable]: [0]
[persist.demo.hdmirotationlock]: [false]
[persist.device.first.startup]: [1]
[persist.env.fastdorm.enabled]: [true]
[persist.gps.qc_nlp_in_use]: [1]
[persist.hiddenMenu.update]: [false]
[persist.hwc.enable_vds]: [1]
[persist.ims.regitered]: [0]
[persist.isptcrb]: [false]
[persist.loc.nlp_name]: [com.qualcomm.location]
[persist.mm.sta.enable]: [1]
[persist.qcril.datacall.miperror]: [0]
[persist.radio.adb_log_on]: [0]
[persist.radio.airplane_mode_on]: [0]
[persist.radio.apm_sim_not_pwdn]: [1]
[persist.radio.custom_ecc]: [0]
[persist.radio.data_no_toggle]: [1]
[persist.radio.eons.enabled]: [false]
[persist.radio.nitz_lons_0_0]: [Sprint]
[persist.radio.nitz_lons_1_0]: []
[persist.radio.nitz_lons_2_0]: []
[persist.radio.nitz_lons_3_0]: []
[persist.radio.nitz_plmn_0]: [310 120]
[persist.radio.nitz_sons_0_0]: [SPRINT]
[persist.radio.nitz_sons_1_0]: []
[persist.radio.nitz_sons_2_0]: []
[persist.radio.nitz_sons_3_0]: []
[persist.radio.ril_payload_on]: [0]
[persist.radio.sglte_target]: [0]
[persist.radio.sib16_support]: [1]
[persist.radio.snapshot_enabled]: [0]
[persist.rild.nitz_long_ons_0]: []
[persist.rild.nitz_long_ons_1]: []
[persist.rild.nitz_long_ons_2]: []
[persist.rild.nitz_long_ons_3]: []
[persist.rild.nitz_plmn]: []
[persist.rild.nitz_short_ons_0]: []
[persist.rild.nitz_short_ons_1]: []
[persist.rild.nitz_short_ons_2]: []
[persist.rild.nitz_short_ons_3]: []
[persist.su_flag]: [1]
[persist.sys.bootAnimation]: [SPRINT]
[persist.sys.dalvik.vm.lib.2]: [libart]
[persist.sys.jrddmesg.enable]: [0]
[persist.sys.jrdgeckolog.enable]: [0]
[persist.sys.jrdlogcat.enable]: [0]
[persist.sys.jrdqxdm.enable]: [0]
[persist.sys.jrdtcpdump.enable]: [0]
[persist.sys.silent]: [1]
[persist.sys.synaptics_dsx.qhd]: [false]
[persist.sys.timezone]: [UTC+07:00]
[persist.sys.usb.config]: [default,serial_smd,serial_tty,adb]
[persist.sys.usb.config.extra]: [none]
[persist.timed.enable]: [true]
[persist.tuning.qdcm]: [1]
[prop.switch.app]: [true]
[rec.playback.conc.disabled]: [true]
[ril.ecclist]: [911,112,*911,#911]
[ril.qcril_pre_init_lock_held]: [0]
[ril.subscription.types]: [NV,RUIM]
[rild.libargs]: [-d /dev/smd0]
[rild.libpath]: [/system/vendor/lib/libril-qc-qmi-1.so]
[ro.adb.secure]: [0]
[ro.alarm_boot]: [false]
[ro.allow.mock.location]: [0]
[ro.am.reschedule_service]: [true]
[ro.assisted_gps_enabled]: [1]
[ro.baseband]: [msm]
[ro.bluetooth.dun]: [true]
[ro.bluetooth.hfp.ver]: [1.7]
[ro.bluetooth.sap]: [true]
[ro.bluetooth_pair_name]: [Alcatel GO FLIP]
[ro.board.platform]: [msm8909]
[ro.boot.BOARD_ID]: [011]
[ro.boot.baseband]: [msm]
[ro.boot.bootdevice]: [7824900.sdhci]
[ro.boot.bootloader]: [LWA5C0C0BR00]
[ro.boot.console]: [ttyHSL0]
[ro.boot.emmc]: [true]
[ro.boot.hardware]: [qcom]
[ro.boot.panelname]: []
[ro.boot.serialno]: [dd3d9acd]
[ro.boot.wifi.countrycode]: [US]
[ro.bootimage.build.date]: [2017年 01月 19日 星期四 14:03:35 CST]
[ro.bootimage.build.date.utc]: [1484805815]
[ro.bootimage.build.fingerprint]: [KaiOS/gflip2/gflip2:6.0.1/MMB29M/566:user/dev-keys]
[ro.bootloader]: [LWA5C0C0BR00]
[ro.bootmode]: [unknown]
[ro.build.characteristics]: [default]
[ro.build.date]: [Thu Jan 19 15:36:29 CST 2017]
[ro.build.date.utc]: [1484811389]
[ro.build.description]: [gflip2-user 6.0.1 MMB29M eng.zxliu.20170119.153557 test-keys]
[ro.build.display.id]: [MMB29M test-keys]
[ro.build.fingerprint]: [KaiOS/gflip2/gflip2:6.0.1/MMB29M/zxliu01191536:user/test-keys]
[ro.build.flavor]: [gflip2-user]
[ro.build.host]: [aclgcl-ubnt150]
[ro.build.id]: [MMB29M]
[ro.build.product]: [gflip2]
[ro.build.tags]: [test-keys]
[ro.build.type]: [user]
[ro.build.user]: [zxliu]
[ro.build.version.all_codenames]: [REL]
[ro.build.version.base_os]: []
[ro.build.version.codename]: [REL]
[ro.build.version.incremental]: [eng.zxliu.20170119.153557]
[ro.build.version.preview_sdk]: [0]
[ro.build.version.release]: [6.0.1]
[ro.build.version.sdk]: [23]
[ro.build.version.security_patch]: [xxxx-xx-xx]
[ro.carrier]: [unknown]
[ro.cdma.home.operator.alpha]: [Sprint]
[ro.cdma.home.operator.numeric]: [310120]
[ro.com.android.dataroaming]: [true]
[ro.config.alarm_alert]: [Alarm_Classic.ogg]
[ro.config.low_ram]: [true]
[ro.config.max_starting_bg]: [8]
[ro.config.notification_sound]: [pixiedust.ogg]
[ro.config.ringtone]: [Ring_Synth_04.ogg]
[ro.config.zram]: [true]
[ro.core_ctl_max_cpu]: [4]
[ro.core_ctl_min_cpu]: [2]
[ro.crypto.state]: [unencrypted]
[ro.cutoff_voltage_mv]: [3200]
[ro.dalvik.vm.native.bridge]: [0]
[ro.debuggable]: [0]
[ro.def.software.svn]: [V05]
[ro.display.colorfill]: [1]
[ro.emmc_size]: [4GB]
[ro.first_power_on.time]: [2016.12.01 00:00]
[ro.fm.transmitter]: [false]
[ro.frp.pst]: [/dev/block/bootdevice/by-name/config]
[ro.gps.agps_provider]: [1]
[ro.hardware]: [qcom]
[ro.home.operator.carrierid]: [SPRINT]
[ro.hwui.text_large_cache_height]: [2048]
[ro.kaios.display.ext_fb_dev]: [fb2]
[ro.kaios.flipstatus]: [/sys/go_flip_key/lib_value]
[ro.lean]: [true]
[ro.model_name_in_UA]: [ALCATEL4044T]
[ro.moz.bluetooth.backend]: [bluetoothd]
[ro.moz.devinputjack]: [1]
[ro.moz.fm.noAnalog]: [true]
[ro.moz.nfc.enabled]: [false]
[ro.moz.ril.emergency_by_default]: [true]
[ro.moz.wifi.p2p_supported]: [0]
[ro.opengles.version]: [196608]
[ro.operator.name]: [SPR]
[ro.product.board]: [msm8909]
[ro.product.brand]: [TCL_SPR]
[ro.product.cpu.abi]: [armeabi-v7a]
[ro.product.cpu.abi2]: [armeabi]
[ro.product.cpu.abilist]: [armeabi-v7a,armeabi]
[ro.product.cpu.abilist32]: [armeabi-v7a,armeabi]
[ro.product.cpu.abilist64]: []
[ro.product.device]: [gflip2]
[ro.product.imei]: [REDACTED]
[ro.product.locale]: [en-US]
[ro.product.manufacturer]: [unknown]
[ro.product.meid]: [REDACTED]
[ro.product.model]: [Alcatel GO FLIP]
[ro.product.name]: [gflip2]
[ro.qc.sdk.audio.fluencetype]: [fluence]
[ro.qc.sdk.audio.ssr]: [false]
[ro.qcom.screencolor]: [1]
[ro.qualcomm.bluetooth.ftp]: [true]
[ro.qualcomm.bluetooth.hfp]: [true]
[ro.qualcomm.bluetooth.hsp]: [true]
[ro.qualcomm.bluetooth.map]: [true]
[ro.qualcomm.bluetooth.nap]: [true]
[ro.qualcomm.bluetooth.opp]: [true]
[ro.qualcomm.bluetooth.pbap]: [true]
[ro.qualcomm.bt.hci_transport]: [smd]
[ro.qualcomm.cabl]: [2]
[ro.revision]: [0]
[ro.ril.svdo]: [false]
[ro.ril.svlte1x]: [false]
[ro.secure]: [1]
[ro.serialno]: [REDACTED]
[ro.sf.lcd_density]: [320]
[ro.sys.fw.bg_apps_limit]: [16]
[ro.sys.fw.bservice_age]: [5000]
[ro.sys.fw.bservice_enable]: [true]
[ro.sys.fw.bservice_limit]: [5]
[ro.sys.fw.empty_app_percent]: [50]
[ro.sys.fw.trim_cache_percent]: [100]
[ro.sys.fw.trim_empty_percent]: [100]
[ro.sys.fw.trim_enable_memory]: [1073741824]
[ro.sys.fw.use_trim_settings]: [true]
[ro.sys.umsdirtyratio]: [20]
[ro.sys.usb.default.config]: [diag,serial_smd,rmnet_qti_bam,adb]
[ro.tct.btaddr]: [REDACTED]
[ro.tct.wifimac]: [REDACTED]
[ro.telephony.call_ring.multiple]: [false]
[ro.telephony.default_network]: [10]
[ro.tethering.ipv6]: [0]
[ro.use_data_netmgrd]: [true]
[ro.vendor.extension_library]: [libqti-perfd-client.so]
[ro.volte.enabled]: [false]
[ro.wifi.channels]: []
[ro.zygote]: [zygote32]
[ro_def_device_type]: [Feature Phone]
[ro_def_hardware_version]: [03]
[security.perf_harden]: [1]
[selinux.reload_policy]: [1]
[service.qti.ims.enabled]: [1]
[service.slate_diag.enable]: [1]
[spam.enable]: [false]
[sys.audio.init]: [true]
[sys.boot_completed]: [1]
[sys.hwc.gpu_perf_mode]: [1]
[sys.keymaster.loaded]: [true]
[sys.listeners.registered]: [true]
[sys.usb.config]: [mtp,adb]
[sys.usb.configfs]: [0]
[sys.usb.ffs.ready]: [1]
[sys.usb.rps_mask]: [4]
[sys.usb.state]: [mtp,adb]
[telephony.lteOnCdmaDevice]: [1]
[tunnel.audio.encode]: [false]
[uicc.need.reset]: [false]
[use.voice.path.for.pcm.voip]: [true]
[voice.playback.conc.disabled]: [true]
[voice.record.conc.disabled]: [true]
[voice.voip.conc.disabled]: [true]
[vold.has_adoptable]: [1]
[vold.post_fs_data_done]: [1]
[wifi.interface]: [wlan0]
[wlan.driver.ath]: [0]
[wlan.driver.config]: [/data/misc/wifi/WCNSS_qcom_cfg.ini]
[wlan.driver.status]: [ok]
``` Good call, b2g-ps works! The other one gives permission denied. Seems like
it's Firefox OS.

On Fri, Apr 28, 2017 at 10:40 PM, David <notifications@github.com> wrote:

> Perfect!, it only remains to know if it is a FirefoxOS
>
> I do not know anything about FirefoxOS, it is based on some data that I
> found on the internet.
>
> adb shell ls /data/b2g/mozilla/*.default/prefs.js
>
> or running the ps version of b2g
>
> adb shell b2g-ps
>
>
>
>
> 2017-04-28 10:11 GMT-03:00 Simo Kinnunen <notifications@github.com>:
>
> > Thanks, that's good info. Looks like you're right, the props do mention
> > KaiOS.
> >
> > [DEVICE_PROVISIONED]: [1]
> > [audio.dolby.ds2.enabled]: [true]
> > [audio.offload.buffer.size.kb]: [64]
> > [audio.offload.gapless.enabled]: [true]
> > [audio.offload.min.duration.secs]: [30]
> > [audio.offload.video]: [true]
> > [bluetooth.isEnabled]: [false]
> > [cameradaemon.SaveMemAtBoot]: [1]
> > [cdma.prl.version]: [55061]
> > [config.disable_atlas]: [true]
> > [dalvik.vm.dex2oat-Xms]: [64m]
> > [dalvik.vm.dex2oat-Xmx]: [512m]
> > [dalvik.vm.heapgrowthlimit]: [128m]
> > [dalvik.vm.heapmaxfree]: [8m]
> > [dalvik.vm.heapminfree]: [6m]
> > [dalvik.vm.heapsize]: [256m]
> > [dalvik.vm.heapstartsize]: [8m]
> > [dalvik.vm.heaptargetutilization]: [0.75]
> > [dalvik.vm.image-dex2oat-Xms]: [64m]
> > [dalvik.vm.image-dex2oat-Xmx]: [64m]
> > [dalvik.vm.isa.arm.features]: [default]
> > [dalvik.vm.isa.arm.variant]: [cortex-a7]
> > [dalvik.vm.stack-trace-file]: [/data/anr/traces.txt]
> > [dalvik.vm.zygotemaxfailedboots]: [5]
> > [debug.atrace.tags.enableflags]: [0]
> > [debug.composition.type]: [gpu]
> > [debug.egl.hw]: [1]
> > [debug.hwc.dynThreshold]: [2.5]
> > [debug.mdpcomp.logs]: [0]
> > [debug.sf.hw]: [1]
> > [debug.sf.hwc.canUseABC]: [0]
> > [debug.sf.swaprect]: [0]
> > [default.HwV.value]: [03]
> > [dev.jrdcom.cu.ref]: [4044T-2ARXUS1-R1]
> > [dev.pm.dyn_samplingrate]: [1]
> > [dev.tct.handset.ref]: [SAA61U0AA10C]
> > [diag.reset_handler]: [true]
> > [diag_get_daemon.status]: [YES]
> > [gsm.version.baseband]: [MPSS.JO.1.0.c5.1-00024-M8909EA]
> > [gsm.version.ril-impl]: [Qualcomm RIL 1.0]
> > [hw.sf.app_buff_count]: [3]
> > [init.svc.adbd]: [running]
> > [init.svc.atfwd]: [running]
> > [init.svc.audiod]: [running]
> > [init.svc.b2g]: [running]
> > [init.svc.bms-sh]: [stopped]
> > [init.svc.cnd]: [running]
> > [init.svc.config-zram]: [stopped]
> > [init.svc.config_bluetooth]: [stopped]
> > [init.svc.debuggerd]: [running]
> > [init.svc.diag_get_daemon]: [running]
> > [init.svc.fakeappops]: [running]
> > [init.svc.fidodaemon]: [running]
> > [init.svc.flash_recovery]: [stopped]
> > [init.svc.gatekeeperd]: [running]
> > [init.svc.gonksched]: [running]
> > [init.svc.imsdatadaemon]: [running]
> > [init.svc.imsstarter]: [stopped]
> > [init.svc.irsc_util]: [stopped]
> > [init.svc.jrddmesgservice]: [stopped]
> > [init.svc.jrdgeckologsvc]: [stopped]
> > [init.svc.jrdlogcatservice]: [stopped]
> > [init.svc.jrdqxdmservice]: [stopped]
> > [init.svc.jrdtcpdpservice]: [stopped]
> > [init.svc.keystore]: [running]
> > [init.svc.loc_launcher]: [running]
> > [init.svc.md_check]: [stopped]
> > [init.svc.media]: [running]
> > [init.svc.mverproxy]: [stopped]
> > [init.svc.netd]: [running]
> > [init.svc.netmgrd]: [running]
> > [init.svc.nvdiag_daemon]: [running]
> > [init.svc.per_mgr]: [running]
> > [init.svc.perfd]: [running]
> > [init.svc.play_music]: [stopped]
> > [init.svc.ptt_socket_app]: [running]
> > [init.svc.qcamerasvr]: [running]
> > [init.svc.qcom-c_core-sh]: [stopped]
> > [init.svc.qcom-c_main-sh]: [stopped]
> > [init.svc.qcom-debug]: [stopped]
> > [init.svc.qcom-post-boot]: [stopped]
> > [init.svc.qcom-sh]: [stopped]
> > [init.svc.qcom-usb-sh]: [stopped]
> > [init.svc.qcomsysd]: [running]
> > [init.svc.qmuxd]: [running]
> > [init.svc.qseecomd]: [running]
> > [init.svc.qti]: [running]
> > [init.svc.qti-testscripts]: [stopped]
> > [init.svc.ril-daemon]: [running]
> > [init.svc.rmt_storage]: [running]
> > [init.svc.root_check]: [running]
> > [init.svc.servicemanager]: [running]
> > [init.svc.slate_diag]: [running]
> > [init.svc.tct_diag]: [running]
> > [init.svc.tctd]: [running]
> > [init.svc.tftp_server]: [running]
> > [init.svc.thermal-engine]: [running]
> > [init.svc.time_daemon]: [running]
> > [init.svc.trace_util]: [stopped]
> > [init.svc.ueventd]: [running]
> > [init.svc.vm_bms]: [running]
> > [init.svc.vold]: [running]
> > [init.svc.wcnss-service]: [running]
> > [init.svc.wpa_supplicant]: [running]
> > [keyguard.no_require_sim]: [true]
> > [media.aac_51_output_enabled]: [true]
> > [media.stagefright.enable-aac]: [true]
> > [media.stagefright.enable-fma2dp]: [true]
> > [media.stagefright.enable-http]: [true]
> > [media.stagefright.enable-player]: [true]
> > [media.stagefright.enable-qcp]: [true]
> > [media.stagefright.enable-scan]: [true]
> > [media.stagefright.use-awesome]: [false]
> > [mm.enable.qcom_parser]: [262143]
> > [mmp.enable.3g2]: [true]
> > [net.bt.name]: [Android]
> > [net.change]: [net.dnschange]
> > [net.dns1]: [REDACTED]
> > [net.dns2]: [REDACTED]
> > [net.dns3]: [REDACTED]
> > [net.dns4]: [REDACTED
> > [net.dnschange]: [148]
> > [net.rmnet_data0.dns1]: [REDACTED]
> > [net.rmnet_data0.dns2]: [REDACTED]
> > [net.rmnet_data0.gw]: [REDACTED]
> > [net.rmnet_data1.dns1]: []
> > [net.rmnet_data1.dns2]: []
> > [net.rmnet_data1.gw]: []
> > [net.tcp.buffersize.default]: [4096,87380,524288,4096,16384,110208]
> > [net.tcp.buffersize.edge]: [4093,26280,35040,4096,16384,35040]
> > [net.tcp.buffersize.evdo]: [4094,87380,524288,4096,16384,262144]
> > [net.tcp.buffersize.gprs]: [4092,8760,11680,4096,8760,11680]
> > [net.tcp.buffersize.hsdpa]: [4094,87380,1220608,4096,16384,1220608]
> > [net.tcp.buffersize.hspa]: [4094,87380,1220608,4096,16384,1220608]
> > [net.tcp.buffersize.hspap]: [4094,87380,1220608,4096,16384,1220608]
> > [net.tcp.buffersize.hsupa]: [4094,87380,1220608,4096,16384,1220608]
> > [net.tcp.buffersize.lte]: [2097152,4194304,8388608,
> 262144,524288,1048576]
> > [net.tcp.buffersize.umts]: [4094,87380,110208,4096,16384,110208]
> > [net.tcp.buffersize.wifi]: [524288,2097152,4194304,
> 262144,524288,1048576]
> > [net.tcp.default_init_rwnd]: [60]
> > [nvdiag_daemon.status]: [running]
> > [oma.data.keep]: [0]
> > [oma.service.is_busy]: [0]
> > [oma.uicc.write]: [ok]
> > [persist.audio.fluence.speaker]: [false]
> > [persist.audio.fluence.voicecall]: [true]
> > [persist.audio.fluence.voicerec]: [false]
> > [persist.camera.longshot.stages]: [1]
> > [persist.chameleon.package.path]: [/carrier/chameleon.zip]
> > [persist.cne.feature]: [4]
> > [persist.data.mode]: [concurrent]
> > [persist.data.netmgrd.qos.enable]: [true]
> > [persist.debug.wfd.enable]: [0]
> > [persist.demo.hdmirotationlock]: [false]
> > [persist.device.first.startup]: [1]
> > [persist.env.fastdorm.enabled]: [true]
> > [persist.gps.qc_nlp_in_use]: [1]
> > [persist.hiddenMenu.update]: [false]
> > [persist.hwc.enable_vds]: [1]
> > [persist.ims.regitered]: [0]
> > [persist.isptcrb]: [false]
> > [persist.loc.nlp_name]: [com.qualcomm.location]
> > [persist.mm.sta.enable]: [1]
> > [persist.qcril.datacall.miperror]: [0]
> > [persist.radio.adb_log_on]: [0]
> > [persist.radio.airplane_mode_on]: [0]
> > [persist.radio.apm_sim_not_pwdn]: [1]
> > [persist.radio.custom_ecc]: [0]
> > [persist.radio.data_no_toggle]: [1]
> > [persist.radio.eons.enabled]: [false]
> > [persist.radio.nitz_lons_0_0]: [Sprint]
> > [persist.radio.nitz_lons_1_0]: []
> > [persist.radio.nitz_lons_2_0]: []
> > [persist.radio.nitz_lons_3_0]: []
> > [persist.radio.nitz_plmn_0]: [310 120]
> > [persist.radio.nitz_sons_0_0]: [SPRINT]
> > [persist.radio.nitz_sons_1_0]: []
> > [persist.radio.nitz_sons_2_0]: []
> > [persist.radio.nitz_sons_3_0]: []
> > [persist.radio.ril_payload_on]: [0]
> > [persist.radio.sglte_target]: [0]
> > [persist.radio.sib16_support]: [1]
> > [persist.radio.snapshot_enabled]: [0]
> > [persist.rild.nitz_long_ons_0]: []
> > [persist.rild.nitz_long_ons_1]: []
> > [persist.rild.nitz_long_ons_2]: []
> > [persist.rild.nitz_long_ons_3]: []
> > [persist.rild.nitz_plmn]: []
> > [persist.rild.nitz_short_ons_0]: []
> > [persist.rild.nitz_short_ons_1]: []
> > [persist.rild.nitz_short_ons_2]: []
> > [persist.rild.nitz_short_ons_3]: []
> > [persist.su_flag]: [1]
> > [persist.sys.bootAnimation]: [SPRINT]
> > [persist.sys.dalvik.vm.lib.2]: [libart]
> > [persist.sys.jrddmesg.enable]: [0]
> > [persist.sys.jrdgeckolog.enable]: [0]
> > [persist.sys.jrdlogcat.enable]: [0]
> > [persist.sys.jrdqxdm.enable]: [0]
> > [persist.sys.jrdtcpdump.enable]: [0]
> > [persist.sys.silent]: [1]
> > [persist.sys.synaptics_dsx.qhd]: [false]
> > [persist.sys.timezone]: [UTC+07:00]
> > [persist.sys.usb.config]: [default,serial_smd,serial_tty,adb]
> > [persist.sys.usb.config.extra]: [none]
> > [persist.timed.enable]: [true]
> > [persist.tuning.qdcm]: [1]
> > [prop.switch.app]: [true]
> > [rec.playback.conc.disabled]: [true]
> > [ril.ecclist]: [911,112,*911,#911]
> > [ril.qcril_pre_init_lock_held]: [0]
> > [ril.subscription.types]: [NV,RUIM]
> > [rild.libargs]: [-d /dev/smd0]
> > [rild.libpath]: [/system/vendor/lib/libril-qc-qmi-1.so]
> > [ro.adb.secure]: [0]
> > [ro.alarm_boot]: [false]
> > [ro.allow.mock.location]: [0]
> > [ro.am.reschedule_service]: [true]
> > [ro.assisted_gps_enabled]: [1]
> > [ro.baseband]: [msm]
> > [ro.bluetooth.dun]: [true]
> > [ro.bluetooth.hfp.ver]: [1.7]
> > [ro.bluetooth.sap]: [true]
> > [ro.bluetooth_pair_name]: [Alcatel GO FLIP]
> > [ro.board.platform]: [msm8909]
> > [ro.boot.BOARD_ID]: [011]
> > [ro.boot.baseband]: [msm]
> > [ro.boot.bootdevice]: [7824900.sdhci]
> > [ro.boot.bootloader]: [LWA5C0C0BR00]
> > [ro.boot.console]: [ttyHSL0]
> > [ro.boot.emmc]: [true]
> > [ro.boot.hardware]: [qcom]
> > [ro.boot.panelname]: []
> > [ro.boot.serialno]: [dd3d9acd]
> > [ro.boot.wifi.countrycode]: [US]
> > [ro.bootimage.build.date]: [2017年 01月 19日 星期四 14:03:35 CST]
> > [ro.bootimage.build.date.utc]: [1484805815]
> > [ro.bootimage.build.fingerprint]: [KaiOS/gflip2/gflip2:6.0.1/
> MMB29M/566:user/dev-keys]
> > [ro.bootloader]: [LWA5C0C0BR00]
> > [ro.bootmode]: [unknown]
> > [ro.build.characteristics]: [default]
> > [ro.build.date]: [Thu Jan 19 15:36:29 CST 2017]
> > [ro.build.date.utc]: [1484811389]
> > [ro.build.description]: [gflip2-user 6.0.1 MMB29M
> eng.zxliu.20170119.153557 test-keys]
> > [ro.build.display.id]: [MMB29M test-keys]
> > [ro.build.fingerprint]: [KaiOS/gflip2/gflip2:6.0.1/
> MMB29M/zxliu01191536:user/test-keys]
> > [ro.build.flavor]: [gflip2-user]
> > [ro.build.host]: [aclgcl-ubnt150]
> > [ro.build.id]: [MMB29M]
> > [ro.build.product]: [gflip2]
> > [ro.build.tags]: [test-keys]
> > [ro.build.type]: [user]
> > [ro.build.user]: [zxliu]
> > [ro.build.version.all_codenames]: [REL]
> > [ro.build.version.base_os]: []
> > [ro.build.version.codename]: [REL]
> > [ro.build.version.incremental]: [eng.zxliu.20170119.153557]
> > [ro.build.version.preview_sdk]: [0]
> > [ro.build.version.release]: [6.0.1]
> > [ro.build.version.sdk]: [23]
> > [ro.build.version.security_patch]: [xxxx-xx-xx]
> > [ro.carrier]: [unknown]
> > [ro.cdma.home.operator.alpha]: [Sprint]
> > [ro.cdma.home.operator.numeric]: [310120]
> > [ro.com.android.dataroaming]: [true]
> > [ro.config.alarm_alert]: [Alarm_Classic.ogg]
> > [ro.config.low_ram]: [true]
> > [ro.config.max_starting_bg]: [8]
> > [ro.config.notification_sound]: [pixiedust.ogg]
> > [ro.config.ringtone]: [Ring_Synth_04.ogg]
> > [ro.config.zram]: [true]
> > [ro.core_ctl_max_cpu]: [4]
> > [ro.core_ctl_min_cpu]: [2]
> > [ro.crypto.state]: [unencrypted]
> > [ro.cutoff_voltage_mv]: [3200]
> > [ro.dalvik.vm.native.bridge]: [0]
> > [ro.debuggable]: [0]
> > [ro.def.software.svn]: [V05]
> > [ro.display.colorfill]: [1]
> > [ro.emmc_size]: [4GB]
> > [ro.first_power_on.time]: [2016.12.01 00:00]
> > [ro.fm.transmitter]: [false]
> > [ro.frp.pst]: [/dev/block/bootdevice/by-name/config]
> > [ro.gps.agps_provider]: [1]
> > [ro.hardware]: [qcom]
> > [ro.home.operator.carrierid]: [SPRINT]
> > [ro.hwui.text_large_cache_height]: [2048]
> > [ro.kaios.display.ext_fb_dev]: [fb2]
> > [ro.kaios.flipstatus]: [/sys/go_flip_key/lib_value]
> > [ro.lean]: [true]
> > [ro.model_name_in_UA]: [ALCATEL4044T]
> > [ro.moz.bluetooth.backend]: [bluetoothd]
> > [ro.moz.devinputjack]: [1]
> > [ro.moz.fm.noAnalog]: [true]
> > [ro.moz.nfc.enabled]: [false]
> > [ro.moz.ril.emergency_by_default]: [true]
> > [ro.moz.wifi.p2p_supported]: [0]
> > [ro.opengles.version]: [196608]
> > [ro.operator.name]: [SPR]
> > [ro.product.board]: [msm8909]
> > [ro.product.brand]: [TCL_SPR]
> > [ro.product.cpu.abi]: [armeabi-v7a]
> > [ro.product.cpu.abi2]: [armeabi]
> > [ro.product.cpu.abilist]: [armeabi-v7a,armeabi]
> > [ro.product.cpu.abilist32]: [armeabi-v7a,armeabi]
> > [ro.product.cpu.abilist64]: []
> > [ro.product.device]: [gflip2]
> > [ro.product.imei]: [REDACTED]
> > [ro.product.locale]: [en-US]
> > [ro.product.manufacturer]: [unknown]
> > [ro.product.meid]: [REDACTED]
> > [ro.product.model]: [Alcatel GO FLIP]
> > [ro.product.name]: [gflip2]
> > [ro.qc.sdk.audio.fluencetype]: [fluence]
> > [ro.qc.sdk.audio.ssr]: [false]
> > [ro.qcom.screencolor]: [1]
> > [ro.qualcomm.bluetooth.ftp]: [true]
> > [ro.qualcomm.bluetooth.hfp]: [true]
> > [ro.qualcomm.bluetooth.hsp]: [true]
> > [ro.qualcomm.bluetooth.map]: [true]
> > [ro.qualcomm.bluetooth.nap]: [true]
> > [ro.qualcomm.bluetooth.opp]: [true]
> > [ro.qualcomm.bluetooth.pbap]: [true]
> > [ro.qualcomm.bt.hci_transport]: [smd]
> > [ro.qualcomm.cabl]: [2]
> > [ro.revision]: [0]
> > [ro.ril.svdo]: [false]
> > [ro.ril.svlte1x]: [false]
> > [ro.secure]: [1]
> > [ro.serialno]: [REDACTED]
> > [ro.sf.lcd_density]: [320]
> > [ro.sys.fw.bg_apps_limit]: [16]
> > [ro.sys.fw.bservice_age]: [5000]
> > [ro.sys.fw.bservice_enable]: [true]
> > [ro.sys.fw.bservice_limit]: [5]
> > [ro.sys.fw.empty_app_percent]: [50]
> > [ro.sys.fw.trim_cache_percent]: [100]
> > [ro.sys.fw.trim_empty_percent]: [100]
> > [ro.sys.fw.trim_enable_memory]: [1073741824]
> > [ro.sys.fw.use_trim_settings]: [true]
> > [ro.sys.umsdirtyratio]: [20]
> > [ro.sys.usb.default.config]: [diag,serial_smd,rmnet_qti_bam,adb]
> > [ro.tct.btaddr]: [REDACTED]
> > [ro.tct.wifimac]: [REDACTED]
> > [ro.telephony.call_ring.multiple]: [false]
> > [ro.telephony.default_network]: [10]
> > [ro.tethering.ipv6]: [0]
> > [ro.use_data_netmgrd]: [true]
> > [ro.vendor.extension_library]: [libqti-perfd-client.so]
> > [ro.volte.enabled]: [false]
> > [ro.wifi.channels]: []
> > [ro.zygote]: [zygote32]
> > [ro_def_device_type]: [Feature Phone]
> > [ro_def_hardware_version]: [03]
> > [security.perf_harden]: [1]
> > [selinux.reload_policy]: [1]
> > [service.qti.ims.enabled]: [1]
> > [service.slate_diag.enable]: [1]
> > [spam.enable]: [false]
> > [sys.audio.init]: [true]
> > [sys.boot_completed]: [1]
> > [sys.hwc.gpu_perf_mode]: [1]
> > [sys.keymaster.loaded]: [true]
> > [sys.listeners.registered]: [true]
> > [sys.usb.config]: [mtp,adb]
> > [sys.usb.configfs]: [0]
> > [sys.usb.ffs.ready]: [1]
> > [sys.usb.rps_mask]: [4]
> > [sys.usb.state]: [mtp,adb]
> > [telephony.lteOnCdmaDevice]: [1]
> > [tunnel.audio.encode]: [false]
> > [uicc.need.reset]: [false]
> > [use.voice.path.for.pcm.voip]: [true]
> > [voice.playback.conc.disabled]: [true]
> > [voice.record.conc.disabled]: [true]
> > [voice.voip.conc.disabled]: [true]
> > [vold.has_adoptable]: [1]
> > [vold.post_fs_data_done]: [1]
> > [wifi.interface]: [wlan0]
> > [wlan.driver.ath]: [0]
> > [wlan.driver.config]: [/data/misc/wifi/WCNSS_qcom_cfg.ini]
> > [wlan.driver.status]: [ok]
> >
> > —
> > You are receiving this because you commented.
> > Reply to this email directly, view it on GitHub
> > <https://github.com/openstf/stf/issues/587#issuecomment-297993724>, or
> mute
> > the thread
> > <https://github.com/notifications/unsubscribe-auth/AAwpgR5VCHIM_
> c51ZvfvbbLLbfHTNgOOks5r0eWOgaJpZM4NJrKt>
>
> > .
> >
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/587#issuecomment-298000383>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_a_JCUeqb5dB76vTVKQLfEOR7_pjks5r0ewwgaJpZM4NJrKt>
> .
>
  Would need to see your code but perhaps the listener isn't started or set
up properly?
On Fri, Apr 28, 2017 at 18:57 alisamir82 <notifications@github.com> wrote:

> I am not expecting anybody to work for me ! I asked the question after
> spending hours trying to get it working.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/586#issuecomment-297958758>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZXQGCnDDOrqpWKSTxosGKB4yBPnks5r0bgAgaJpZM4NI_cv>
> .
>
  What you're asking is exactly how STF was meant to work. See our [deployment guide](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md).

Your second question is more complex and several people have asked about it already. You can search past issues if you want to read why it's unlikely to happen for now.  Could be either a stream error in the poor proxy causing lost data (has happened before), or you have an exotic APK. If possible, mail the .apk to me (simo @ name of this github org .io) and I'll take a look when I have time. Or if you can post it here publicly, perhaps others can take a look as well. Closing since there's no feedback.  There are multiple issues about this topic already. Use the --allow-remote option. However, ADB over WIFI is extremely, extremely slow. You'll get really bad performance out of it and there's nothing we can do about it.  No I'm sorry that would be too much work for me to explain everything, the
question is too broad. Please read the ZeroMQ documentation. Other than
that, we may be able to provide paid training if necessary. Or, if you have
a very specific question then it might be possible to answer that.

On Fri, Apr 21, 2017 at 7:19 PM, 刘青云 <notifications@github.com> wrote:

> Hi @sorccu <https://github.com/sorccu> , thanks for your great works!
> After read the deployment.md and the core topology, I just confused how
> message transmit between ZMQ's end-points, especially DEALER and DEALER.
> Could you give a example in actual scene to explain it?
> Sorry for my poor english, thank you again!
> [image: zmq]
> <https://cloud.githubusercontent.com/assets/15082338/25273300/d1af05a2-26bd-11e7-8a11-87e4ebf5db3b.png>
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/582>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_U-OyGN3jiKBePnVZuCShmiRZzz9ks5ryILKgaJpZM4NEH6->
> .
>
  Did you install ZeroMQ? Ok run `npm install zmq` in a random folder (like `/tmp`) and paste the output here. I told you. Do not use root.
On Thu, Apr 20, 2017 at 18:43 testerlife <notifications@github.com> wrote:

> problem：
> root@wzl-virtual-machine:~# npm install zmq
>
> zmq@2.15.3 install /root/node_modules/zmq
> node-gyp rebuild
>
> sh: 1: node-gyp: Permission denied
> npm WARN enoent ENOENT: no such file or directory, open
> '/root/package.json'
> npm WARN root No description
> npm WARN root No repository field.
> npm WARN root No README data
> npm WARN root No license field.
> npm ERR! Linux 4.2.0-16-generic
> npm ERR! argv "/root/node-v6.10.2-linux-x64/bin/node" "/usr/local/bin/npm"
> "install" "zmq"
> npm ERR! node v6.10.2
> npm ERR! npm v3.10.10
> npm ERR! file sh
> npm ERR! code ELIFECYCLE
> npm ERR! errno ENOENT
> npm ERR! syscall spawn
>
> npm ERR! zmq@2.15.3 install: node-gyp rebuild
> npm ERR! spawn ENOENT
> npm ERR!
> npm ERR! Failed at the zmq@2.15.3 install script 'node-gyp rebuild'.
> npm ERR! Make sure you have the latest version of node.js and npm
> installed.
> npm ERR! If you do, this is most likely a problem with the zmq package,
> npm ERR! not with npm itself.
> npm ERR! Tell the author that this fails on your system:
> npm ERR! node-gyp rebuild
> npm ERR! You can get information on how to open an issue for this project
> with:
> npm ERR! npm bugs zmq
> npm ERR! Or if that isn't available, you can get their info via:
> npm ERR! npm owner ls zmq
> npm ERR! There is likely additional logging output above.
>
> npm ERR! Please include the following file with any support request:
> npm ERR! /root/npm-debug.log
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/581#issuecomment-295655162>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_adYkcdnG0RnyX6rTqijyGD5pIztks5rxyi7gaJpZM4NCxuW>
> .
>
 Do not use sudo, do not use root. Do not use anything that makes you uid 0.

On Thu, Apr 20, 2017 at 18:46 testerlife <notifications@github.com> wrote:

> oh
> wzl@wzl-virtual-machine:/root$ sudo npm install zmq
> [sudo] wzl 的密码：
>
> zmq@2.15.3 install /root/node_modules/zmq
> node-gyp rebuild
>
> sh: 1: node-gyp: Permission denied
> npm WARN enoent ENOENT: no such file or directory, open
> '/root/package.json'
> npm WARN root No description
> npm WARN root No repository field.
> npm WARN root No README data
> npm WARN root No license field.
> npm ERR! Linux 4.2.0-16-generic
> npm ERR! argv "/root/node-v6.10.2-linux-x64/bin/node" "/usr/local/bin/npm"
> "install" "zmq"
> npm ERR! node v6.10.2
> npm ERR! npm v3.10.10
> npm ERR! file sh
> npm ERR! code ELIFECYCLE
> npm ERR! errno ENOENT
> npm ERR! syscall spawn
>
> npm ERR! zmq@2.15.3 install: node-gyp rebuild
> npm ERR! spawn ENOENT
> npm ERR!
> npm ERR! Failed at the zmq@2.15.3 install script 'node-gyp rebuild'.
> npm ERR! Make sure you have the latest version of node.js and npm
> installed.
> npm ERR! If you do, this is most likely a problem with the zmq package,
> npm ERR! not with npm itself.
> npm ERR! Tell the author that this fails on your system:
> npm ERR! node-gyp rebuild
> npm ERR! You can get information on how to open an issue for this project
> with:
> npm ERR! npm bugs zmq
> npm ERR! Or if that isn't available, you can get their info via:
> npm ERR! npm owner ls zmq
> npm ERR! There is likely additional logging output above.
>
> npm ERR! Please include the following file with any support request:
> npm ERR! /root/npm-debug.log
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/581#issuecomment-295656252>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_XrBIRk7crkS4OeEh1RqpAec9fF_ks5rxyl3gaJpZM4NCxuW>
> .
>
 It says you do not have zeromq installed.
On Fri, Apr 21, 2017 at 11:14 testerlife <notifications@github.com> wrote:

> stf@wzl-virtual-machine:/root$ npm install zmq
>
> zmq@2.15.3 install /root/node_modules/zmq
> node-gyp rebuild
>
> make: Entering directory '/root/node_modules/zmq/build'
> CXX(target) Release/obj.target/zmq/binding.o
> ../binding.cc:28:17: fatal error: zmq.h: 没有那个文件或目录
> compilation terminated.
> zmq.target.mk:94: recipe for target 'Release/obj.target/zmq/binding.o'
> failed
> make: *** [Release/obj.target/zmq/binding.o] Error 1
> make: Leaving directory '/root/node_modules/zmq/build'
> gyp ERR! build error
> gyp ERR! stack Error: make failed with exit code: 2
> gyp ERR! stack at ChildProcess.onExit
> (/root/node-v6.10.2-linux-x64/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:276:23)
> gyp ERR! stack at emitTwo (events.js:106:13)
> gyp ERR! stack at ChildProcess.emit (events.js:191:7)
> gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:215:12)
> gyp ERR! System Linux 4.2.0-16-generic
> gyp ERR! command "/root/node-v6.10.2-linux-x64/bin/node"
> "/root/node-v6.10.2-linux-x64/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js"
> "rebuild"
> gyp ERR! cwd /root/node_modules/zmq
> gyp ERR! node -v v6.10.2
> gyp ERR! node-gyp -v v3.4.0
> gyp ERR! not ok
>
>
> npm WARN enoent ENOENT: no such file or directory, open
> '/root/package.json'
> npm WARN root No description
> npm WARN root No repository field.
> npm WARN root No README data
> npm WARN root No license field.
> npm ERR! Linux 4.2.0-16-generic
> npm ERR! argv "/root/node-v6.10.2-linux-x64/bin/node" "/usr/local/bin/npm"
> "install" "zmq"
> npm ERR! node v6.10.2
> npm ERR! npm v3.10.10
>
> npm ERR! code ELIFECYCLE
>
> npm ERR! zmq@2.15.3 install: node-gyp rebuild
>
> npm ERR! Exit status 1
>
>
> npm ERR!
> npm ERR! Failed at the zmq@2.15.3 install script 'node-gyp rebuild'.
> npm ERR! Make sure you have the latest version of node.js and npm
> installed.
> npm ERR! If you do, this is most likely a problem with the zmq package,
> npm ERR! not with npm itself.
> npm ERR! Tell the author that this fails on your system:
> npm ERR! node-gyp rebuild
> npm ERR! You can get information on how to open an issue for this project
> with:
> npm ERR! npm bugs zmq
> npm ERR! Or if that isn't available, you can get their info via:
> npm ERR! npm owner ls zmq
> npm ERR! There is likely additional logging output above.
>
> npm ERR! Please include the following file with any support request:
> npm ERR! /root/npm-debug.log
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/581#issuecomment-296017809>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cq8VtM9JZd80H7tqMEpf8C1qG80ks5ryBEdgaJpZM4NCxuW>
> .
>
 It looks ok I guess, as long as that folder has permissions set up properly
(you're still in /root so that is suspicious but it could be alright). I
would recommend deleting your whole node installation and starting from
zero now that you actually have the dependency you needed. It's not worth
the time to attempt to fix a broken install. If you're having trouble with
dependencies, use the docker image instead.

On Fri, Apr 21, 2017 at 11:51 testerlife <notifications@github.com> wrote:

> stf@wzl-virtual-machine:/root/node-v6.10.2-linux-x64/lib/node_modules/stf/bin$
> npm install zmq
>
> zmq@2.15.3 install
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq
> node-gyp rebuild
>
> make: Entering directory
> '/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/build'
> CXX(target) Release/obj.target/zmq/binding.o
> SOLINK_MODULE(target) Release/obj.target/zmq.node
> COPY Release/zmq.node
> make: Leaving directory
> '/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/build'
> stf@2.3.0 /root/node-v6.10.2-linux-x64/lib/node_modules/stf
> └── zmq@2.15.3
> *run stf doctor ：*
> stf@wzl-virtual-machine:/root/node-v6.10.2-linux-x64/lib/node_modules/stf/bin$
> ./stf doctor
>
>
>
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/bindings/bindings.js:91
> throw err
> ^
>
> Error: Could not locate the bindings file. Tried:
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/build/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
> →
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/compiled/6.10.2/linux/x64/zmq.node
> at bindings
> (/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
> at Object.
> (/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
> at Module._compile (module.js:570:32)
> at Object.Module._extensions..js (module.js:579:10)
> at Module.load (module.js:487:32)
> at tryModuleLoad (module.js:446:12)
> at Function.Module._load (module.js:438:3)
> at Module.require (module.js:497:17)
> at require (internal/module.js:20:19)
> at Object.
> (/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
> at Module._compile (module.js:570:32)
> at Object.Module._extensions..js (module.js:579:10)
> at Module.load (module.js:487:32)
> at tryModuleLoad (module.js:446:12)
> at Function.Module._load (module.js:438:3)
> at Module.require (module.js:497:17)
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/581#issuecomment-296028912>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cMglWFZXPc61SibJyqcS9XNcHA-ks5ryBnLgaJpZM4NCxuW>
> .
>
 That's OK. It just doesn't parse the version well. It should work now if
you try.

On Fri, Apr 21, 2017 at 3:46 PM, testerlife <notifications@github.com>
wrote:

> thank u now problem：
>
> stf@wzl-virtual-machine:/root/node-v6.10.2-linux-x64/lib/node_modules/stf/bin$
> ./stf doctor
> INF/util:doctor 15869 [
> *] OS Arch: x64 INF/util:doctor 15869 [*] OS Platform: linux
> INF/util:doctor 15869 [
> *] OS Platform: 4.2.0-16-generic INF/util:doctor 15869 [*] Using Node
> 6.10.2
> INF/util:doctor 15869 [
> *] Using RethinkDB client 2.3.3 INF/util:doctor 15869 [*] Using ZeroMQ
> 4.1.6
> WRN/util:doctor 15869 [
> *] Executable was not found INF/util:doctor 15869 [*] Local ADB 1.0.31
> INF/util:doctor 15869 [
> *] GraphicsMagick 1.3.21 INF/util:doctor 15869 [*] Local RethinkDB server
> 2.3.5~0wily
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_
> modules/semver/semver.js:293
> throw new TypeError('Invalid Version: ' + version);
> ^
>
> TypeError: Invalid Version: 2.3.5~0wily
> at new SemVer (/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_
> modules/semver/semver.js:293:11)
> at Range.test (/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_
> modules/semver/semver.js:1036:15)
> at Function.satisfies (/root/node-v6.10.2-linux-x64/
> lib/node_modules/stf/node_modules/semver/semver.js:1085:16)
> at unsupportedVersion (/root/node-v6.10.2-linux-x64/
> lib/node_modules/stf/lib/util/doctor.js:13:15)
> at /root/node-v6.10.2-linux-x64/lib/node_modules/stf/lib/util/
> doctor.js:95:7
> at /root/node-v6.10.2-linux-x64/lib/node_modules/stf/lib/util/
> doctor.js:50:22
> at ChildProcess.exithandler (child_process.js:195:7)
> at emitTwo (events.js:106:13)
> at ChildProcess.emit (events.js:191:7)
> at maybeClose (internal/child_process.js:886:16)
> at Socket. (internal/child_process.js:342:11)
> at emitOne (events.js:96:13)
> at Socket.emit (events.js:188:7)
> at Pipe._handle.close [as _onclose] (net.js:501:12)
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/581#issuecomment-296095560>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dQbq2CLBuzg_T7xYwrIjOcEtBUlks5ryFC-gaJpZM4NCxuW>
> .
>
  Maybe you do not have a compiler installed. I don't think we can help you
with this, it's your responsibility to get your environment working
properly. Also, running npm install as root can cause issues. Try with
another user, too.
On Thu, Apr 20, 2017 at 17:24 testerlife <notifications@github.com> wrote:

> npm-debug.log:
>
> 64933 info lifecycle basic-auth@1.1.0install: basic-auth@1.1.0
> 64934 silly lifecycle basic-auth@1.1.0install: no script for install,
> continuing
> 64935 silly install bufferutil@1.3.0
> /root/node-v6.10.2-linux-x64/lib/node_modules/.staging/bufferutil-08da6e97
> 64936 info lifecycle bufferutil@1.3.0install: bufferutil@1.3.0
> 64937 verbose lifecycle bufferutil@1.3.0install: unsafe-perm in lifecycle
> false
> 64938 verbose lifecycle bufferutil@1.3.0install: PATH:
> /root/node-v6.10.2-linux-x64/lib/node_modules/npm/bin/node-gyp-bin:/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/bufferutil/node_modules/.bin:/root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/.bin:/root/node-v6.10.2-linux-x64/lib/node_modules/.bin:/root/node-v6.10.2-linux-x64/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/root/android-sdk-linux/tools:/root/android-sdk-linux/platform-tools:/root/root/android-sdk-linux/tools:/root/root/android-sdk-linux/platform-tools:/usr/local/protobuf/bin/
> 64939 verbose lifecycle bufferutil@1.3.0install: CWD:
> /root/node-v6.10.2-linux-x64/lib/node_modules/stf/node_modules/bufferutil
> 64940 silly lifecycle bufferutil@1.3.0install: Args: [ '-c', 'node-gyp
> rebuild' ]
> 64941 info lifecycle bufferutil@1.3.0install: Failed to exec install
> script
> 64942 verbose unlock done using
> /root/.npm/_locks/staging-5e8af678fb34472d.lock for
> /root/node-v6.10.2-linux-x64/lib/node_modules/.staging
> 64943 silly rollbackFailedOptional Starting
> 64944 silly rollbackFailedOptional Finishing
> 64945 silly runTopLevelLifecycles Finishing
> 64946 silly install printInstalled
> 64947 warn optional SKIPPING OPTIONAL DEPENDENCY: dtrace-provider@0.8.1
> (node_modules/stf/node_modules/bunyan/node_modules/dtrace-provider):
> 64948 warn optional SKIPPING OPTIONAL DEPENDENCY: dtrace-provider@0.8.1
> install: node scripts/install.js
> 64948 warn optional SKIPPING OPTIONAL DEPENDENCY: spawn ENOENT
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY:
> 64949 verbose optional Failed at the dtrace-provider@0.8.1 install script
> 'node scripts/install.js'.
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: Make sure you have
> the latest version of node.js and npm installed.
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: If you do, this is
> most likely a problem with the dtrace-provider package,
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: not with npm itself.
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: Tell the author that
> this fails on your system:
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: node
> scripts/install.js
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: You can get
> information on how to open an issue for this project with:
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: npm bugs
> dtrace-provider
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: Or if that isn't
> available, you can get their info via:
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: npm owner ls
> dtrace-provider
> 64949 verbose optional SKIPPING OPTIONAL DEPENDENCY: There is likely
> additional logging output above.
> 64950 warn optional SKIPPING OPTIONAL DEPENDENCY: dtrace-provider@0.7.1
> (node_modules/stf/node_modules/dtrace-provider):
> 64951 warn optional SKIPPING OPTIONAL DEPENDENCY: dtrace-provider@0.7.1
> install: node scripts/install.js
> 64951 warn optional SKIPPING OPTIONAL DEPENDENCY: spawn ENOENT
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY:
> 64952 verbose optional Failed at the dtrace-provider@0.7.1 install script
> 'node scripts/install.js'.
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: Make sure you have
> the latest version of node.js and npm installed.
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: If you do, this is
> most likely a problem with the dtrace-provider package,
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: not with npm itself.
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: Tell the author that
> this fails on your system:
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: node
> scripts/install.js
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: You can get
> information on how to open an issue for this project with:
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: npm bugs
> dtrace-provider
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: Or if that isn't
> available, you can get their info via:
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: npm owner ls
> dtrace-provider
> 64952 verbose optional SKIPPING OPTIONAL DEPENDENCY: There is likely
> additional logging output above.
> 64953 verbose stack Error: bufferutil@1.3.0 install: node-gyp rebuild
> 64953 verbose stack spawn ENOENT
> 64953 verbose stack at ChildProcess.
> (/root/node-v6.10.2-linux-x64/lib/node_modules/npm/lib/utils/spawn.js:33:16)
> 64953 verbose stack at emitTwo (events.js:106:13)
> 64953 verbose stack at ChildProcess.emit (events.js:191:7)
> 64953 verbose stack at maybeClose (internal/child_process.js:886:16)
> 64953 verbose stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:226:5)
> 64954 verbose pkgid bufferutil@1.3.0
> 64955 verbose cwd /root
> 64956 error Linux 4.2.0-16-generic
> 64957 error argv "/root/node-v6.10.2-linux-x64/bin/node"
> "/usr/local/bin/npm" "install" "-g" "stf"
> 64958 error node v6.10.2
> 64959 error npm v3.10.10
> 64960 error file sh
> 64961 error code ELIFECYCLE
> 64962 error errno ENOENT
> 64963 error syscall spawn
> 64964 error bufferutil@1.3.0 install: node-gyp rebuild
> 64964 error spawn ENOENT
> 64965 error Failed at the bufferutil@1.3.0 install script 'node-gyp
> rebuild'.
> 64965 error Make sure you have the latest version of node.js and npm
> installed.
> 64965 error If you do, this is most likely a problem with the bufferutil
> package,
> 64965 error not with npm itself.
> 64965 error Tell the author that this fails on your system:
> 64965 error node-gyp rebuild
> 64965 error You can get information on how to open an issue for this
> project with:
> 64965 error npm bugs bufferutil
> 64965 error Or if that isn't available, you can get their info via:
> 64965 error npm owner ls bufferutil
> 64965 error There is likely additional logging output above.
> 64966 verbose exit [ 1, true ]
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/580>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_e6xWQwxfx75hA7nZ2eBGDcZ8UxCks5rxxYsgaJpZM4NCsqD>
> .
>
  The device URL is for the screen (display) only and does not work with ADB. The debug URL is for ADB.   Nothing in there is an error. There are warnings but they're fine.
On Tue, Apr 18, 2017 at 17:05 cooldeaaap1 <notifications@github.com> wrote:

> When I Installing “STF”，Wrong
>
> STEP1:
> nodejs,Adb,rethinkdb,GM,zeroMQ,Bower,libsodium,protobuf,pkg-config,yasm OK!
> STEP2: git clone https://github.com/openstf/stf.git
> STEP3: npm install, in this step WRONG
>
> LOG stop HERE:
> npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0
> (node_modules/chokidar/node_modules/fsevents):
> npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for
> fsevents@1.1.1: wanted {"os":"darwin","arch":"any"} (current:
> {"os":"linux","arch":"x64"})
>
> ALL LOG:
>
> Inspiron-7420:~/Stftest/stf$ npm install
> npm WARN deprecated minimatch@2.0.10: Please update to minimatch 3.0.2 or
> higher to avoid a RegExp DoS issue
> npm WARN deprecated minimatch@0.2.14: Please update to minimatch 3.0.2 or
> higher to avoid a RegExp DoS issue
> npm WARN deprecated graceful-fs@1.2.3: graceful-fs v3.0.0 and before will
> fail on node releases >= v7.0. Please update to graceful-fs@^4.0.0 as
> soon as possible. Use 'npm ls graceful-fs' to find it in the tree.
> npm WARN deprecated minimatch@0.3.0: Please update to minimatch 3.0.2 or
> higher to avoid a RegExp DoS issue
> npm WARN deprecated jade@1.11.0: Jade has been renamed to pug, please
> install the latest version of pug instead of jade
> npm WARN deprecated transformers@2.1.0: Deprecated, use jstransformer
> npm WARN prefer global marked@0.3.6 should be installed with -g
> npm WARN prefer global jsonlint@1.6.2 should be installed with -g
> npm WARN prefer global node-gyp@3.6.0 should be installed with -g
>
> dtrace-provider@0.8.1 install
> /home/wangpengfei/Stftest/stf/node_modules/bunyan/node_modules/dtrace-provider
> node scripts/install.js
>
> dtrace-provider@0.7.1 install
> /home/wangpengfei/Stftest/stf/node_modules/dtrace-provider
> node scripts/install.js
>
> phantomjs-prebuilt@2.1.14 install
> /home/wangpengfei/Stftest/stf/node_modules/phantomjs-prebuilt
> node install.js
>
> PhantomJS not found on PATH
> Download already available at
> /tmp/phantomjs/phantomjs-2.1.1-linux-x86_64.tar.bz2
> Verified checksum of previously downloaded file
> Extracting tar contents (via spawned process)
> Removing
> /home/wangpengfei/Stftest/stf/node_modules/phantomjs-prebuilt/lib/phantom
> Copying extracted folder
> /tmp/phantomjs/phantomjs-2.1.1-linux-x86_64.tar.bz2-extract-1492502299390/phantomjs-2.1.1-linux-x86_64
> -> /home/wangpengfei/Stftest/stf/node_modules/phantomjs-prebuilt/lib/phantom
> Writing location.js file
> Done. Phantomjs binary available at
> /home/wangpengfei/Stftest/stf/node_modules/phantomjs-prebuilt/lib/phantom/bin/phantomjs
>
> bufferutil@1.3.0 install
> /home/wangpengfei/Stftest/stf/node_modules/bufferutil
> node-gyp rebuild
>
> make: Entering directory
> '/home/wangpengfei/Stftest/stf/node_modules/bufferutil/build'
> CXX(target) Release/obj.target/bufferutil/src/bufferutil.o
> SOLINK_MODULE(target) Release/obj.target/bufferutil.node
> COPY Release/bufferutil.node
> make: Leaving directory
> '/home/wangpengfei/Stftest/stf/node_modules/bufferutil/build'
>
> jpeg-turbo@0.4.0 install
> /home/wangpengfei/Stftest/stf/node_modules/jpeg-turbo
> node-pre-gyp install --fallback-to-build
>
> make: Entering directory
> '/home/wangpengfei/Stftest/stf/node_modules/jpeg-turbo/build'
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_0
> Release/obj/gen/jfdctflt-sse-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_1
> Release/obj/gen/jccolor-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_2
> Release/obj/gen/jcgray-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_3
> Release/obj/gen/jcsample-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_4
> Release/obj/gen/jdcolor-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_5
> Release/obj/gen/jdmerge-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_6
> Release/obj/gen/jdsample-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_7
> Release/obj/gen/jfdctfst-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_8
> Release/obj/gen/jfdctint-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_9
> Release/obj/gen/jidctflt-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_10
> Release/obj/gen/jidctfst-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_11
> Release/obj/gen/jidctint-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_12
> Release/obj/gen/jidctred-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_13
> Release/obj/gen/jquantf-sse2-64.o
> RULE deps_libjpeg_turbo_gyp_jpeg_turbo_target_assemble_14
> Release/obj/gen/jquanti-sse2-64.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcapimin.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcapistd.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jccoefct.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jccolor.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcdctmgr.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jchuff.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcinit.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcmainct.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcmarker.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcmaster.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcomapi.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcparam.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcphuff.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcprepct.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcsample.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jctrans.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdapimin.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdapistd.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdatadst.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdatasrc.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdcoefct.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdcolor.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jddctmgr.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdhuff.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdinput.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdmainct.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdmarker.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdmaster.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdmerge.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdphuff.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdpostct.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdsample.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdtrans.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jerror.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jfdctflt.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jfdctfst.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jfdctint.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jidctflt.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jidctfst.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jidctint.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jidctred.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jquant1.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jquant2.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jutils.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jmemmgr.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jmemnobs.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jaricom.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jcarith.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdarith.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/turbojpeg.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/transupp.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdatadst-tj.o
> CC(target) Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/jdatasrc-tj.o
> CC(target)
> Release/obj.target/jpeg-turbo/deps/libjpeg-turbo/simd/jsimd_x86_64.o
> AR(target) Release/obj.target/deps/libjpeg-turbo.a
> COPY Release/libjpeg-turbo.a
> CXX(target) Release/obj.target/jpegturbo/src/buffersize.o
> In file included from ../src/buffersize.cc:1:0:
> ../src/exports.h:14:12: warning: ‘DEFAULT_QUALITY’ defined but not used
> [-Wunused-variable]
> static int DEFAULT_QUALITY = 80;
> ^
> CXX(target) Release/obj.target/jpegturbo/src/compress.o
> CXX(target) Release/obj.target/jpegturbo/src/decompress.o
> In file included from ../src/decompress.cc:1:0:
> ../src/exports.h:14:12: warning: ‘DEFAULT_QUALITY’ defined but not used
> [-Wunused-variable]
> static int DEFAULT_QUALITY = 80;
> ^
> ../src/exports.h:15:12: warning: ‘DEFAULT_SUBSAMPLING’ defined but not
> used [-Wunused-variable]
> static int DEFAULT_SUBSAMPLING = TJSAMP_420;
> ^
> CXX(target) Release/obj.target/jpegturbo/src/exports.o
> In file included from ../src/exports.cc:1:0:
> ../src/exports.h:14:12: warning: ‘DEFAULT_QUALITY’ defined but not used
> [-Wunused-variable]
> static int DEFAULT_QUALITY = 80;
> ^
> ../src/exports.h:15:12: warning: ‘DEFAULT_SUBSAMPLING’ defined but not
> used [-Wunused-variable]
> static int DEFAULT_SUBSAMPLING = TJSAMP_420;
> ^
> SOLINK_MODULE(target) Release/obj.target/jpegturbo.node
> COPY Release/jpegturbo.node
> COPY
> /home/wangpengfei/Stftest/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64/jpegturbo.node
> TOUCH Release/obj.target/action_after_build.stamp
> make: Leaving directory
> '/home/wangpengfei/Stftest/stf/node_modules/jpeg-turbo/build'
>
> node-sass@3.13.1 install
> /home/wangpengfei/Stftest/stf/node_modules/node-sass
> node scripts/install.js
>
> Downloading binary from
> https://github.com/sass/node-sass/releases/download/v3.13.1/linux-x64-51_binding.node
> Download complete..] - :
> Binary saved to
> /home/wangpengfei/Stftest/stf/node_modules/node-sass/vendor/linux-x64-51/binding.node
> Caching binary to
> /home/wangpengfei/.npm/node-sass/3.13.1/linux-x64-51_binding.node
>
> utf-8-validate@1.2.2 install
> /home/wangpengfei/Stftest/stf/node_modules/utf-8-validate
> node-gyp rebuild
>
> make: Entering directory
> '/home/wangpengfei/Stftest/stf/node_modules/utf-8-validate/build'
> CXX(target) Release/obj.target/validation/src/validation.o
> SOLINK_MODULE(target) Release/obj.target/validation.node
> COPY Release/validation.node
> make: Leaving directory
> '/home/wangpengfei/Stftest/stf/node_modules/utf-8-validate/build'
>
> zmq@2.15.3 install /home/wangpengfei/Stftest/stf/node_modules/zmq
> node-gyp rebuild
>
> make: Entering directory
> '/home/wangpengfei/Stftest/stf/node_modules/zmq/build'
> CXX(target) Release/obj.target/zmq/binding.o
> SOLINK_MODULE(target) Release/obj.target/zmq.node
> COPY Release/zmq.node
> make: Leaving directory
> '/home/wangpengfei/Stftest/stf/node_modules/zmq/build'
>
> node-sass@3.13.1 postinstall
> /home/wangpengfei/Stftest/stf/node_modules/node-sass
> node scripts/build.js
>
> Binary found at
> /home/wangpengfei/Stftest/stf/node_modules/node-sass/vendor/linux-x64-51/binding.node
> Testing binary
> Binary is fine
>
> stf@2.3.0 prepublish /home/wangpengfei/Stftest/stf
> bower install && not-in-install && gulp build || in-install
>
> stf@2.3.0 /home/wangpengfei/Stftest/stf
> ├─┬ @slack/client@3.9.0
> │ ├── bluebird@3.5.0
> │ ├─┬ https-proxy-agent@1.0.0
> │ │ └─┬ agent-base@2.0.1
> │ │ └── semver@5.0.3
> │ ├── inherits@2.0.3
> │ ├── pkginfo@0.4.0
> │ ├── retry@0.9.0
> │ ├── url-join@0.0.1
> │ └─┬ winston@2.3.1
> │ ├── async@1.0.0
> │ ├── colors@1.0.3
> │ ├── cycle@1.0.3
> │ ├── eyes@0.1.8
> │ └── stack-trace@0.0.9
> ├─┬ adbkit@2.9.0
> │ ├── adbkit-logcat@1.1.0
> │ ├── bluebird@2.9.34
> │ ├─┬ commander@2.9.0
> │ │ └── graceful-readlink@1.0.1
> │ ├── node-forge@0.6.49
> │ └── split@0.3.3
> ├─┬ adbkit-apkreader@2.1.1
> │ ├── bluebird@3.5.0
> │ ├── debug@0.7.4
> │ └─┬ yauzl@2.7.0
> │ ├── buffer-crc32@0.2.13
> │ └─┬ fd-slicer@1.0.1
> │ └── pend@1.2.0
> ├─┬ adbkit-monkey@1.0.1
> │ └── async@0.2.10
> ├── async@2.3.0
> ├─┬ aws-sdk@2.41.0
> │ ├─┬ buffer@4.9.1
> │ │ ├── base64-js@1.2.0
> │ │ ├── ieee754@1.1.8
> │ │ └── isarray@1.0.0
> │ ├── crypto-browserify@1.0.9
> │ ├── jmespath@0.15.0
> │ ├── querystring@0.2.0
> │ ├── sax@1.2.1
> │ ├─┬ url@0.10.3
> │ │ └── punycode@1.3.2
> │ ├── xml2js@0.4.17
> │ └── xmlbuilder@4.2.1
> ├── basic-auth@1.1.0
> ├── bluebird@2.11.0
> ├─┬ body-parser@1.17.1
> │ ├── bytes@2.4.0
> │ ├── content-type@1.0.2
> │ ├── debug@2.6.1
> │ ├── depd@1.1.0
> │ ├── http-errors@1.6.1
> │ ├── iconv-lite@0.4.15
> │ ├─┬ on-finished@2.3.0
> │ │ └── ee-first@1.1.1
> │ ├── qs@6.4.0
> │ ├─┬ raw-body@2.2.0
> │ │ └── unpipe@1.0.0
> │ └─┬ type-is@1.6.15
> │ └── media-typer@0.3.0
> ├── bower@1.8.0
> ├─┬ bufferutil@1.3.0
> │ ├── bindings@1.2.1
> │ └── nan@2.4.0
> ├─┬ chai@3.5.0
> │ ├── assertion-error@1.0.2
> │ ├─┬ deep-eql@0.1.3
> │ │ └── type-detect@0.1.1
> │ └── type-detect@1.0.0
> ├─┬ chalk@1.1.3
> │ ├── ansi-styles@2.2.1
> │ ├── escape-string-regexp@1.0.5
> │ ├─┬ has-ansi@2.0.0
> │ │ └── ansi-regex@2.1.1
> │ ├── strip-ansi@3.0.1
> │ └── supports-color@2.0.0
> ├─┬ compression@1.6.2
> │ ├─┬ accepts@1.3.3
> │ │ └── negotiator@0.6.1
> │ ├── bytes@2.3.0
> │ ├─┬ compressible@2.0.10
> │ │ └── mime-db@1.27.0
> │ ├─┬ debug@2.2.0
> │ │ └── ms@0.7.1
> │ ├── on-headers@1.0.1
> │ └── vary@1.1.1
> ├─┬ cookie-session@2.0.0-beta.1
> │ ├─┬ cookies@0.7.0
> │ │ └── keygrip@1.0.1
> │ └── debug@2.6.1
> ├─┬ css-loader@0.23.1
> │ ├─┬ css-selector-tokenizer@0.5.4
> │ │ └── cssesc@0.1.0
> │ ├─┬ cssnano@3.10.0
> │ │ ├─┬ autoprefixer@6.7.7
> │ │ │ ├─┬ browserslist@1.7.7
> │ │ │ │ └── electron-to-chromium@1.3.3
> │ │ │ ├── caniuse-db@1.0.30000655
> │ │ │ ├── normalize-range@0.1.2
> │ │ │ └── num2fraction@1.2.2
> │ │ ├── defined@1.0.0
> │ │ ├─┬ has@1.0.1
> │ │ │ └── function-bind@1.1.0
> │ │ ├─┬ postcss-calc@5.3.1
> │ │ │ ├── postcss-message-helpers@2.0.0
> │ │ │ └─┬ reduce-css-calc@1.3.0
> │ │ │ ├── math-expression-evaluator@1.2.16
> │ │ │ └── reduce-function-call@1.0.2
> │ │ ├─┬ postcss-colormin@2.2.2
> │ │ │ └─┬ colormin@1.1.2
> │ │ │ ├─┬ color@0.11.4
> │ │ │ │ ├─┬ color-convert@1.9.0
> │ │ │ │ │ └── color-name@1.1.2
> │ │ │ │ └── color-string@0.3.0
> │ │ │ └── css-color-names@0.0.4
> │ │ ├── postcss-convert-values@2.6.1
> │ │ ├── postcss-discard-comments@2.0.4
> │ │ ├── postcss-discard-duplicates@2.1.0
> │ │ ├── postcss-discard-empty@2.1.0
> │ │ ├── postcss-discard-overridden@0.1.1
> │ │ ├─┬ postcss-discard-unused@2.2.3
> │ │ │ └── uniqs@2.0.0
> │ │ ├─┬ postcss-filter-plugins@2.0.2
> │ │ │ └─┬ uniqid@4.1.1
> │ │ │ └── macaddress@0.2.8
> │ │ ├── postcss-merge-idents@2.1.7
> │ │ ├── postcss-merge-longhand@2.0.2
> │ │ ├─┬ postcss-merge-rules@2.1.2
> │ │ │ ├─┬ caniuse-api@1.6.1
> │ │ │ │ ├── lodash.memoize@4.1.2
> │ │ │ │ └── lodash.uniq@4.5.0
> │ │ │ ├─┬ postcss-selector-parser@2.2.3
> │ │ │ │ ├── flatten@1.0.2
> │ │ │ │ ├── indexes-of@1.0.1
> │ │ │ │ └── uniq@1.0.1
> │ │ │ └── vendors@1.0.1
> │ │ ├── postcss-minify-font-values@1.0.5
> │ │ ├── postcss-minify-gradients@1.0.5
> │ │ ├─┬ postcss-minify-params@1.2.2
> │ │ │ └── alphanum-sort@1.0.2
> │ │ ├── postcss-minify-selectors@2.1.1
> │ │ ├── postcss-normalize-charset@1.1.1
> │ │ ├─┬ postcss-normalize-url@3.0.8
> │ │ │ ├── is-absolute-url@2.1.0
> │ │ │ └─┬ normalize-url@1.9.1
> │ │ │ ├── prepend-http@1.0.4
> │ │ │ ├─┬ query-string@4.3.3
> │ │ │ │ └── strict-uri-encode@1.1.0
> │ │ │ └─┬ sort-keys@1.1.2
> │ │ │ └── is-plain-obj@1.1.0
> │ │ ├── postcss-ordered-values@2.2.3
> │ │ ├── postcss-reduce-idents@2.4.0
> │ │ ├── postcss-reduce-initial@1.0.1
> │ │ ├── postcss-reduce-transforms@1.0.4
> │ │ ├─┬ postcss-svgo@2.1.6
> │ │ │ ├─┬ is-svg@2.1.0
> │ │ │ │ └── html-comment-regex@1.1.1
> │ │ │ └─┬ svgo@0.7.2
> │ │ │ ├── coa@1.0.1
> │ │ │ ├── colors@1.1.2
> │ │ │ ├─┬ csso@2.3.2
> │ │ │ │ ├── clap@1.1.3
> │ │ │ │ └── source-map@0.5.6
> │ │ │ ├─┬ js-yaml@3.7.0
> │ │ │ │ └── esprima@2.7.3
> │ │ │ └── whet.extend@0.9.9
> │ │ ├── postcss-unique-selectors@2.0.2
> │ │ ├── postcss-value-parser@3.3.0
> │ │ └── postcss-zindex@2.2.0
> │ ├─┬ loader-utils@0.2.17
> │ │ ├── big.js@3.1.3
> │ │ ├── emojis-list@2.1.0
> │ │ └── json5@0.5.1
> │ ├─┬ lodash.camelcase@3.0.1
> │ │ └─┬ lodash._createcompounder@3.0.0
> │ │ ├── lodash.deburr@3.2.0
> │ │ └── lodash.words@3.2.0
> │ ├── object-assign@4.1.1
> │ ├─┬ postcss@5.2.17
> │ │ ├── js-base64@2.1.9
> │ │ ├── source-map@0.5.6
> │ │ └── supports-color@3.2.3
> │ ├── postcss-modules-extract-imports@1.0.1
> │ ├─┬ postcss-modules-local-by-default@1.1.1
> │ │ └─┬ css-selector-tokenizer@0.6.0
> │ │ └─┬ regexpu-core@1.0.0
> │ │ ├── regenerate@1.3.2
> │ │ ├── regjsgen@0.2.0
> │ │ └─┬ regjsparser@0.1.5
> │ │ └── jsesc@0.5.0
> │ ├─┬ postcss-modules-scope@1.0.2
> │ │ └── css-selector-tokenizer@0.6.0
> │ ├─┬ postcss-modules-values@1.2.2
> │ │ └── icss-replace-symbols@1.0.2
> │ └── source-list-map@0.1.8
> ├─┬ csurf@1.9.0
> │ ├── cookie@0.3.1
> │ ├── cookie-signature@1.0.6
> │ ├─┬ csrf@3.0.6
> │ │ ├── rndm@1.2.0
> │ │ ├── tsscmp@1.0.5
> │ │ └─┬ uid-safe@2.1.4
> │ │ └── random-bytes@1.0.0
> │ └─┬ http-errors@1.5.1
> │ └── setprototypeof@1.0.2
> ├─┬ debug@2.6.3
> │ └── ms@0.7.2
> ├─┬ del@2.2.2
> │ ├─┬ globby@5.0.0
> │ │ ├── array-union@1.0.2
> │ │ ├── arrify@1.0.1
> │ │ └── glob@7.1.1
> │ ├── is-path-cwd@1.0.0
> │ ├─┬ is-path-in-cwd@1.0.0
> │ │ └── is-path-inside@1.0.0
> │ ├── pify@2.3.0
> │ ├─┬ pinkie-promise@2.0.1
> │ │ └── pinkie@2.0.4
> │ └─┬ rimraf@2.4.5
> │ └── glob@6.0.4
> ├─┬ eslint@3.19.0
> │ ├─┬ babel-code-frame@6.22.0
> │ │ └── js-tokens@3.0.1
> │ ├─┬ concat-stream@1.6.0
> │ │ ├─┬ readable-stream@2.2.9
> │ │ │ └── string_decoder@1.0.0
> │ │ └── typedarray@0.0.6
> │ ├── doctrine@2.0.0
> │ ├─┬ escope@3.6.0
> │ │ ├─┬ es6-map@0.1.5
> │ │ │ ├── d@1.0.0
> │ │ │ ├── es5-ext@0.10.15
> │ │ │ ├── es6-iterator@2.0.1
> │ │ │ ├── es6-set@0.1.5
> │ │ │ ├── es6-symbol@3.1.1
> │ │ │ └── event-emitter@0.3.5
> │ │ ├── es6-weak-map@2.0.2
> │ │ └─┬ esrecurse@4.1.0
> │ │ └── estraverse@4.1.1
> │ ├─┬ espree@3.4.1
> │ │ ├── acorn@5.0.3
> │ │ └── acorn-jsx@3.0.1
> │ ├── esquery@1.0.0
> │ ├── estraverse@4.2.0
> │ ├── esutils@2.0.2
> │ ├─┬ file-entry-cache@2.0.0
> │ │ └─┬ flat-cache@1.2.2
> │ │ ├── circular-json@0.3.1
> │ │ └── write@0.2.1
> │ ├─┬ glob@7.1.1
> │ │ ├── fs.realpath@1.0.0
> │ │ └── inflight@1.0.6
> │ ├── globals@9.17.0
> │ ├── ignore@3.2.7
> │ ├── imurmurhash@0.1.4
> │ ├─┬ inquirer@0.12.0
> │ │ ├── ansi-escapes@1.4.0
> │ │ ├─┬ cli-cursor@1.0.2
> │ │ │ └─┬ restore-cursor@1.0.1
> │ │ │ ├── exit-hook@1.1.1
> │ │ │ └── onetime@1.1.0
> │ │ ├── cli-width@2.1.0
> │ │ ├── figures@1.7.0
> │ │ ├─┬ readline2@1.0.1
> │ │ │ └── mute-stream@0.0.5
> │ │ ├── run-async@0.1.0
> │ │ └── rx-lite@3.1.2
> │ ├─┬ is-my-json-valid@2.16.0
> │ │ ├── generate-function@2.0.0
> │ │ ├─┬ generate-object-property@1.2.0
> │ │ │ └── is-property@1.0.2
> │ │ ├── jsonpointer@4.0.1
> │ │ └── xtend@4.0.1
> │ ├─┬ is-resolvable@1.0.0
> │ │ └── tryit@1.0.3
> │ ├─┬ js-yaml@3.8.3
> │ │ ├─┬ argparse@1.0.9
> │ │ │ └── sprintf-js@1.0.3
> │ │ └── esprima@3.1.3
> │ ├─┬ json-stable-stringify@1.0.1
> │ │ └── jsonify@0.0.0
> │ ├─┬ levn@0.3.0
> │ │ ├── prelude-ls@1.1.2
> │ │ └── type-check@0.3.2
> │ ├─┬ mkdirp@0.5.1
> │ │ └── minimist@0.0.8
> │ ├── natural-compare@1.4.0
> │ ├─┬ optionator@0.8.2
> │ │ ├── deep-is@0.1.3
> │ │ ├── fast-levenshtein@2.0.6
> │ │ └── wordwrap@1.0.0
> │ ├── path-is-inside@1.0.2
> │ ├── pluralize@1.2.1
> │ ├── progress@1.1.8
> │ ├─┬ require-uncached@1.0.3
> │ │ ├─┬ caller-path@0.1.0
> │ │ │ └── callsites@0.2.0
> │ │ └── resolve-from@1.0.1
> │ ├─┬ shelljs@0.7.7
> │ │ ├── glob@7.1.1
> │ │ └── rechoir@0.6.2
> │ ├── strip-bom@3.0.0
> │ ├── strip-json-comments@2.0.1
> │ ├─┬ table@3.8.3
> │ │ ├─┬ ajv@4.11.7
> │ │ │ └── co@4.6.0
> │ │ ├── ajv-keywords@1.5.1
> │ │ ├── slice-ansi@0.0.4
> │ │ └─┬ string-width@2.0.0
> │ │ └── is-fullwidth-code-point@2.0.0
> │ ├── text-table@0.2.0
> │ └─┬ user-home@2.0.0
> │ └── os-homedir@1.0.2
> ├─┬ event-stream@3.3.4
> │ ├── duplexer@0.1.1
> │ ├── from@0.1.7
> │ ├── map-stream@0.1.0
> │ ├── pause-stream@0.0.11
> │ ├── split@0.3.3
> │ ├── stream-combiner@0.0.4
> │ └── through@2.3.8
> ├── eventemitter3@1.2.0
> ├─┬ exports-loader@0.6.4
> │ ├─┬ loader-utils@1.1.0
> │ │ └── json5@0.5.1
> │ └── source-map@0.5.6
> ├─┬ express@4.15.2
> │ ├── array-flatten@1.1.1
> │ ├── content-disposition@0.5.2
> │ ├── debug@2.6.1
> │ ├── encodeurl@1.0.1
> │ ├── escape-html@1.0.3
> │ ├── etag@1.8.0
> │ ├── finalhandler@1.0.1
> │ ├── fresh@0.5.0
> │ ├── merge-descriptors@1.0.1
> │ ├── methods@1.1.2
> │ ├── parseurl@1.3.1
> │ ├── path-to-regexp@0.1.7
> │ ├── range-parser@1.2.0
> │ ├─┬ send@0.15.1
> │ │ ├── debug@2.6.1
> │ │ └── destroy@1.0.4
> │ ├── setprototypeof@1.0.3
> │ ├── statuses@1.3.1
> │ └── utils-merge@1.0.0
> ├─┬ express-validator@2.21.0
> │ ├── bluebird@3.4.7
> │ ├── lodash@4.16.6
> │ └── validator@5.7.0
> ├─┬ extract-text-webpack-plugin@1.0.1
> │ ├── async@1.5.2
> │ └─┬ webpack-sources@0.1.5
> │ └── source-map@0.5.6
> ├── file-loader@0.9.0
> ├── formidable@1.1.1
> ├─┬ gm@1.23.0
> │ ├── array-parallel@0.1.3
> │ ├── array-series@0.1.5
> │ ├─┬ cross-spawn@4.0.2
> │ │ └─┬ lru-cache@4.0.2
> │ │ ├── pseudomap@1.0.2
> │ │ └── yallist@2.1.2
> │ └─┬ debug@2.2.0
> │ └── ms@0.7.1
> ├─┬ gulp@3.9.1
> │ ├── archy@1.0.0
> │ ├── deprecated@0.0.1
> │ ├── interpret@1.0.2
> │ ├─┬ liftoff@2.3.0
> │ │ ├─┬ findup-sync@0.4.3
> │ │ │ ├─┬ detect-file@0.1.0
> │ │ │ │ └── fs-exists-sync@0.1.0
> │ │ │ └─┬ resolve-dir@0.1.1
> │ │ │ └─┬ global-modules@0.2.3
> │ │ │ ├─┬ global-prefix@0.1.5
> │ │ │ │ └─┬ homedir-polyfill@1.0.1
> │ │ │ │ └── parse-passwd@1.0.0
> │ │ │ └── is-windows@0.2.0
> │ │ ├─┬ fined@1.0.2
> │ │ │ ├── expand-tilde@1.2.2
> │ │ │ ├── lodash.assignwith@4.2.0
> │ │ │ ├── lodash.isempty@4.4.0
> │ │ │ ├── lodash.pick@4.4.0
> │ │ │ └─┬ parse-filepath@1.0.1
> │ │ │ ├─┬ is-absolute@0.2.6
> │ │ │ │ └─┬ is-relative@0.2.1
> │ │ │ │ └─┬ is-unc-path@0.1.2
> │ │ │ │ └── unc-path-regex@0.1.2
> │ │ │ ├── map-cache@0.2.2
> │ │ │ └─┬ path-root@0.1.1
> │ │ │ └── path-root-regex@0.1.2
> │ │ ├── flagged-respawn@0.3.2
> │ │ ├── lodash.isplainobject@4.0.6
> │ │ ├── lodash.mapvalues@4.6.0
> │ │ └─┬ resolve@1.3.2
> │ │ └── path-parse@1.0.5
> │ ├── minimist@1.2.0
> │ ├─┬ orchestrator@0.3.8
> │ │ ├─┬ end-of-stream@0.1.5
> │ │ │ └── once@1.3.3
> │ │ ├── sequencify@0.0.7
> │ │ └── stream-consume@0.1.0
> │ ├── pretty-hrtime@1.0.3
> │ ├── semver@4.3.6
> │ ├── tildify@1.2.0
> │ ├─┬ v8flags@2.0.12
> │ │ └── user-home@1.1.1
> │ └─┬ vinyl-fs@0.3.14
> │ ├── defaults@1.0.3
> │ ├─┬ glob-stream@3.1.18
> │ │ ├── glob@4.5.3
> │ │ ├─┬ glob2base@0.0.12
> │ │ │ └── find-index@0.1.1
> │ │ ├── minimatch@2.0.10
> │ │ ├── ordered-read-streams@0.1.0
> │ │ ├─┬ through2@0.6.5
> │ │ │ └─┬ readable-stream@1.0.34
> │ │ │ └── isarray@0.0.1
> │ │ └── unique-stream@1.0.0
> │ ├─┬ glob-watcher@0.0.6
> │ │ └─┬ gaze@0.5.2
> │ │ └─┬ globule@0.1.0
> │ │ ├─┬ glob@3.1.21
> │ │ │ ├── graceful-fs@1.2.3
> │ │ │ └── inherits@1.0.2
> │ │ ├── lodash@1.0.2
> │ │ └─┬ minimatch@0.2.14
> │ │ └── lru-cache@2.7.3
> │ ├─┬ graceful-fs@3.0.11
> │ │ └── natives@1.1.0
> │ ├─┬ strip-bom@1.0.0
> │ │ ├── first-chunk-stream@1.0.0
> │ │ └── is-utf8@0.2.1
> │ ├─┬ through2@0.6.5
> │ │ └─┬ readable-stream@1.0.34
> │ │ └── isarray@0.0.1
> │ └─┬ vinyl@0.4.6
> │ └── clone@0.2.0
> ├─┬ gulp-angular-gettext@2.2.0
> │ ├─┬ angular-gettext-tools@2.3.4
> │ │ ├── babylon@6.16.1
> │ │ ├── binary-search@1.3.2
> │ │ ├─┬ cheerio@0.19.0
> │ │ │ ├─┬ css-select@1.0.0
> │ │ │ │ ├── boolbase@1.0.0
> │ │ │ │ ├── css-what@1.0.0
> │ │ │ │ ├── domutils@1.4.3
> │ │ │ │ └── nth-check@1.0.1
> │ │ │ ├─┬ dom-serializer@0.1.0
> │ │ │ │ └── domelementtype@1.1.3
> │ │ │ ├── entities@1.1.1
> │ │ │ ├─┬ htmlparser2@3.8.3
> │ │ │ │ ├── domelementtype@1.3.0
> │ │ │ │ ├── domhandler@2.3.0
> │ │ │ │ ├── domutils@1.5.1
> │ │ │ │ └── entities@1.0.0
> │ │ │ └── lodash@3.10.1
> │ │ ├── pofile@1.0.7
> │ │ ├── typescript@2.0.10
> │ │ └─┬ typescript-eslint-parser@1.0.3
> │ │ └─┬ lodash.unescape@4.0.0
> │ │ └── lodash.tostring@4.1.4
> │ ├── lodash.isstring@4.0.1
> │ └─┬ through2@2.0.3
> │ └─┬ readable-stream@2.2.9
> │ └── string_decoder@1.0.0
> ├─┬ gulp-eslint@3.0.1
> │ └─┬ bufferstreams@1.1.1
> │ └─┬ readable-stream@2.2.9
> │ └── string_decoder@1.0.0
> ├─┬ gulp-jsonlint@1.2.0
> │ ├─┬ gulp-util@3.0.7
> │ │ ├── dateformat@1.0.12
> │ │ ├── minimist@1.2.0
> │ │ └── object-assign@3.0.0
> │ └─┬ jsonlint@1.6.2
> │ ├── JSV@4.0.2
> │ └─┬ nomnom@1.8.1
> │ └─┬ chalk@0.4.0
> │ ├── ansi-styles@1.0.0
> │ ├── has-color@0.1.7
> │ └── strip-ansi@0.1.1
> ├─┬ gulp-protractor@3.0.0
> │ ├── async@1.5.2
> │ └─┬ dargs@4.1.0
> │ └── number-is-nan@1.0.1
> ├── gulp-pug@3.3.0
> ├─┬ gulp-run@1.7.1
> │ ├── lodash.defaults@4.2.0
> │ ├─┬ lodash.template@4.4.0
> │ │ └── lodash.templatesettings@4.1.0
> │ └─┬ vinyl@0.4.6
> │ ├── clone@0.2.0
> │ └── clone-stats@0.0.1
> ├─┬ gulp-util@3.0.8
> │ ├── array-differ@1.0.0
> │ ├── array-uniq@1.0.3
> │ ├── beeper@1.1.1
> │ ├── dateformat@2.0.0
> │ ├─┬ fancy-log@1.3.0
> │ │ └── time-stamp@1.0.1
> │ ├─┬ gulplog@1.0.0
> │ │ └── glogg@1.0.0
> │ ├─┬ has-gulplog@0.1.0
> │ │ └── sparkles@1.0.0
> │ ├── lodash._reescape@3.0.0
> │ ├── lodash._reevaluate@3.0.0
> │ ├── lodash._reinterpolate@3.0.0
> │ ├─┬ lodash.template@3.6.2
> │ │ ├── lodash._basecopy@3.0.1
> │ │ ├── lodash._basetostring@3.0.1
> │ │ ├── lodash._basevalues@3.0.0
> │ │ ├── lodash._isiterateecall@3.0.9
> │ │ ├─┬ lodash.escape@3.2.0
> │ │ │ └── lodash._root@3.0.1
> │ │ ├─┬ lodash.keys@3.1.2
> │ │ │ ├── lodash._getnative@3.9.1
> │ │ │ ├── lodash.isarguments@3.1.0
> │ │ │ └── lodash.isarray@3.0.4
> │ │ ├── lodash.restparam@3.6.1
> │ │ └── lodash.templatesettings@3.1.1
> │ ├── minimist@1.2.0
> │ ├─┬ multipipe@0.1.2
> │ │ └─┬ duplexer2@0.0.2
> │ │ └─┬ readable-stream@1.1.14
> │ │ └── isarray@0.0.1
> │ ├── object-assign@3.0.0
> │ ├── replace-ext@0.0.1
> │ └── vinyl@0.5.3
> ├─┬ hipchatter@0.3.2
> │ ├── async@0.2.10
> │ └── needle@1.6.0
> ├─┬ html-loader@0.4.5
> │ ├─┬ es6-templates@0.2.3
> │ │ └─┬ recast@0.11.23
> │ │ ├── ast-types@0.9.6
> │ │ ├── esprima@3.1.3
> │ │ └── source-map@0.5.6
> │ ├── fastparse@1.1.1
> │ ├─┬ html-minifier@3.4.3
> │ │ ├─┬ camel-case@3.0.0
> │ │ │ ├─┬ no-case@2.3.1
> │ │ │ │ └── lower-case@1.1.4
> │ │ │ └── upper-case@1.1.3
> │ │ ├─┬ clean-css@4.0.12
> │ │ │ └── source-map@0.5.6
> │ │ ├── he@1.1.1
> │ │ ├─┬ ncname@1.0.0
> │ │ │ └── xml-char-classes@1.0.0
> │ │ ├── param-case@2.1.1
> │ │ ├── relateurl@0.2.7
> │ │ └─┬ uglify-js@2.8.22
> │ │ ├── source-map@0.5.6
> │ │ └── yargs@3.10.0
> │ └─┬ loader-utils@1.1.0
> │ └── json5@0.5.1
> ├─┬ http-proxy@1.16.2
> │ └── requires-port@1.0.0
> ├─┬ imports-loader@0.6.5
> │ └─┬ source-map@0.1.43
> │ └── amdefine@1.0.1
> ├── in-publish@2.0.0
> ├── jasmine-core@2.5.2
> ├─┬ jasmine-reporters@2.2.1
> │ └── xmldom@0.1.27
> ├─┬ jpeg-turbo@0.4.0
> │ └─┬ node-pre-gyp@0.6.19
> │ ├─┬ mkdirp@0.5.1
> │ │ └── minimist@0.0.8
> │ ├─┬ nopt@3.0.6
> │ │ └── abbrev@1.0.7
> │ ├─┬ npmlog@2.0.0
> │ │ ├── ansi@0.3.0
> │ │ ├─┬ are-we-there-yet@1.0.5
> │ │ │ ├── delegates@0.1.0
> │ │ │ └─┬ readable-stream@2.0.5
> │ │ │ ├── core-util-is@1.0.2
> │ │ │ ├── inherits@2.0.1
> │ │ │ ├── isarray@0.0.1
> │ │ │ ├── process-nextick-args@1.0.6
> │ │ │ ├── string_decoder@0.10.31
> │ │ │ └── util-deprecate@1.0.2
> │ │ └─┬ gauge@1.2.2
> │ │ ├── has-unicode@1.0.1
> │ │ ├─┬ lodash.pad@3.1.1
> │ │ │ ├── lodash._basetostring@3.0.1
> │ │ │ └─┬ lodash._createpadding@3.6.1
> │ │ │ └── lodash.repeat@3.0.1
> │ │ ├─┬ lodash.padleft@3.1.1
> │ │ │ ├── lodash._basetostring@3.0.1
> │ │ │ └─┬ lodash._createpadding@3.6.1
> │ │ │ └── lodash.repeat@3.0.1
> │ │ └─┬ lodash.padright@3.1.1
> │ │ ├── lodash._basetostring@3.0.1
> │ │ └─┬ lodash._createpadding@3.6.1
> │ │ └── lodash.repeat@3.0.1
> │ ├─┬ rc@1.1.6
> │ │ ├── deep-extend@0.4.0
> │ │ ├── ini@1.3.4
> │ │ ├── minimist@1.2.0
> │ │ └── strip-json-comments@1.0.4
> │ ├─┬ request@2.67.0
> │ │ ├── aws-sign2@0.6.0
> │ │ ├─┬ bl@1.0.0
> │ │ │ └─┬ readable-stream@2.0.5
> │ │ │ ├── core-util-is@1.0.2
> │ │ │ ├── inherits@2.0.1
> │ │ │ ├── isarray@0.0.1
> │ │ │ ├── process-nextick-args@1.0.6
> │ │ │ ├── string_decoder@0.10.31
> │ │ │ └── util-deprecate@1.0.2
> │ │ ├── caseless@0.11.0
> │ │ ├─┬ combined-stream@1.0.5
> │ │ │ └── delayed-stream@1.0.0
> │ │ ├── extend@3.0.0
> │ │ ├── forever-agent@0.6.1
> │ │ ├─┬ form-data@1.0.0-rc3
> │ │ │ └── async@1.5.1
> │ │ ├─┬ har-validator@2.0.3
> │ │ │ ├─┬ chalk@1.1.1
> │ │ │ │ ├── ansi-styles@2.1.0
> │ │ │ │ ├── escape-string-regexp@1.0.4
> │ │ │ │ ├─┬ has-ansi@2.0.0
> │ │ │ │ │ └── ansi-regex@2.0.0
> │ │ │ │ ├─┬ strip-ansi@3.0.0
> │ │ │ │ │ └── ansi-regex@2.0.0
> │ │ │ │ └── supports-color@2.0.0
> │ │ │ ├─┬ commander@2.9.0
> │ │ │ │ └── graceful-readlink@1.0.1
> │ │ │ ├─┬ is-my-json-valid@2.12.3
> │ │ │ │ ├── generate-function@2.0.0
> │ │ │ │ ├─┬ generate-object-property@1.2.0
> │ │ │ │ │ └── is-property@1.0.2
> │ │ │ │ ├── jsonpointer@2.0.0
> │ │ │ │ └── xtend@4.0.1
> │ │ │ └─┬ pinkie-promise@2.0.0
> │ │ │ └── pinkie@2.0.1
> │ │ ├─┬ hawk@3.1.2
> │ │ │ ├── boom@2.10.1
> │ │ │ ├── cryptiles@2.0.5
> │ │ │ ├── hoek@2.16.3
> │ │ │ └── sntp@1.0.9
> │ │ ├─┬ http-signature@1.1.0
> │ │ │ ├── assert-plus@0.1.5
> │ │ │ ├─┬ jsprim@1.2.2
> │ │ │ │ ├── extsprintf@1.0.2
> │ │ │ │ ├── json-schema@0.2.2
> │ │ │ │ └── verror@1.3.6
> │ │ │ └─┬ sshpk@1.7.2
> │ │ │ ├── asn1@0.2.3
> │ │ │ ├── assert-plus@0.2.0
> │ │ │ ├─┬ dashdash@1.11.0
> │ │ │ │ └── assert-plus@0.1.5
> │ │ │ ├── ecc-jsbn@0.1.1
> │ │ │ ├── jodid25519@1.0.2
> │ │ │ ├── jsbn@0.1.0
> │ │ │ └── tweetnacl@0.13.2
> │ │ ├── is-typedarray@1.0.0
> │ │ ├── isstream@0.1.2
> │ │ ├── json-stringify-safe@5.0.1
> │ │ ├─┬ mime-types@2.1.9
> │ │ │ └── mime-db@1.21.0
> │ │ ├── node-uuid@1.4.7
> │ │ ├── oauth-sign@0.8.0
> │ │ ├── qs@5.2.0
> │ │ ├── stringstream@0.0.5
> │ │ ├── tough-cookie@2.2.1
> │ │ └── tunnel-agent@0.4.2
> │ ├─┬ rimraf@2.5.0
> │ │ └─┬ glob@6.0.3
> │ │ ├─┬ inflight@1.0.4
> │ │ │ └── wrappy@1.0.1
> │ │ ├── inherits@2.0.1
> │ │ ├─┬ minimatch@3.0.0
> │ │ │ └─┬ brace-expansion@1.1.2
> │ │ │ ├── balanced-match@0.3.0
> │ │ │ └── concat-map@0.0.1
> │ │ ├─┬ once@1.3.3
> │ │ │ └── wrappy@1.0.1
> │ │ └── path-is-absolute@1.0.0
> │ ├── semver@5.1.0
> │ ├─┬ tar@2.2.1
> │ │ ├── block-stream@0.0.8
> │ │ ├─┬ fstream@1.0.8
> │ │ │ └── graceful-fs@4.1.2
> │ │ └── inherits@2.0.1
> │ └─┬ tar-pack@3.1.2
> │ ├── debug@0.7.4
> │ ├─┬ fstream@1.0.8
> │ │ ├── graceful-fs@4.1.2
> │ │ └── inherits@2.0.1
> │ ├─┬ fstream-ignore@1.0.3
> │ │ ├── inherits@2.0.1
> │ │ └─┬ minimatch@3.0.0
> │ │ └─┬ brace-expansion@1.1.2
> │ │ ├── balanced-match@0.3.0
> │ │ └── concat-map@0.0.1
> │ ├── once@1.1.1
> │ ├─┬ readable-stream@2.0.5
> │ │ ├── core-util-is@1.0.2
> │ │ ├── inherits@2.0.1
> │ │ ├── isarray@0.0.1
> │ │ ├── process-nextick-args@1.0.6
> │ │ ├── string_decoder@0.10.31
> │ │ └── util-deprecate@1.0.2
> │ ├─┬ rimraf@2.4.5
> │ │ └─┬ glob@6.0.3
> │ │ ├─┬ inflight@1.0.4
> │ │ │ └── wrappy@1.0.1
> │ │ ├── inherits@2.0.1
> │ │ ├─┬ minimatch@3.0.0
> │ │ │ └─┬ brace-expansion@1.1.2
> │ │ │ ├── balanced-match@0.3.0
> │ │ │ └── concat-map@0.0.1
> │ │ ├─┬ once@1.3.3
> │ │ │ └── wrappy@1.0.1
> │ │ └── path-is-absolute@1.0.0
> │ └── uid-number@0.0.3
> ├── json-loader@0.5.4
> ├─┬ jws@3.1.4
> │ ├── base64url@2.0.0
> │ ├─┬ jwa@1.1.5
> │ │ ├── buffer-equal-constant-time@1.0.1
> │ │ └── ecdsa-sig-formatter@1.0.9
> │ └── safe-buffer@5.0.1
> ├─┬ karma@1.6.0
> │ ├── bluebird@3.5.0
> │ ├─┬ chokidar@1.6.1
> │ │ ├── anymatch@1.3.0
> │ │ ├── async-each@1.0.1
> │ │ ├── glob-parent@2.0.0
> │ │ ├─┬ is-binary-path@1.0.1
> │ │ │ └── binary-extensions@1.8.0
> │ │ ├─┬ is-glob@2.0.1
> │ │ │ └── is-extglob@1.0.0
> │ │ └─┬ readdirp@2.1.0
> │ │ ├─┬ readable-stream@2.2.9
> │ │ │ └── string_decoder@1.0.0
> │ │ └── set-immediate-shim@1.0.1
> │ ├── colors@1.1.2
> │ ├── combine-lists@1.0.1
> │ ├─┬ connect@3.6.0
> │ │ ├── debug@2.6.1
> │ │ └── finalhandler@1.0.0
> │ ├── core-js@2.4.1
> │ ├── di@0.0.1
> │ ├─┬ dom-serialize@2.2.1
> │ │ ├── custom-event@1.0.1
> │ │ ├── ent@2.2.0
> │ │ └── void-elements@2.0.1
> │ ├─┬ expand-braces@0.1.2
> │ │ ├── array-slice@0.2.3
> │ │ ├── array-unique@0.2.1
> │ │ └─┬ braces@0.1.5
> │ │ └─┬ expand-range@0.1.1
> │ │ ├── is-number@0.1.1
> │ │ └── repeat-string@0.2.2
> │ ├── glob@7.1.1
> │ ├── graceful-fs@4.1.11
> │ ├── isbinaryfile@3.0.2
> │ ├── lodash@3.10.1
> │ ├─┬ log4js@0.6.38
> │ │ ├─┬ readable-stream@1.0.34
> │ │ │ └── isarray@0.0.1
> │ │ └── semver@4.3.6
> │ ├─┬ optimist@0.6.1
> │ │ └── wordwrap@0.0.2
> │ ├── qjobs@1.1.5
> │ ├── rimraf@2.6.1
> │ ├─┬ socket.io@1.7.3
> │ │ ├── debug@2.3.3
> │ │ ├─┬ engine.io@1.8.3
> │ │ │ ├── base64id@1.0.0
> │ │ │ ├─┬ engine.io-parser@1.3.2
> │ │ │ │ ├── after@0.8.2
> │ │ │ │ ├── base64-arraybuffer@0.1.5
> │ │ │ │ └── wtf-8@1.0.0
> │ │ │ └── ws@1.1.2
> │ │ ├── object-assign@4.1.0
> │ │ ├── socket.io-adapter@0.5.0
> │ │ ├─┬ socket.io-client@1.7.3
> │ │ │ ├── component-emitter@1.2.1
> │ │ │ ├─┬ engine.io-client@1.8.3
> │ │ │ │ ├── component-emitter@1.2.1
> │ │ │ │ ├── parsejson@0.0.3
> │ │ │ │ ├── parseqs@0.0.5
> │ │ │ │ └── xmlhttprequest-ssl@1.5.3
> │ │ │ └── parseuri@0.0.5
> │ │ └─┬ socket.io-parser@2.3.1
> │ │ ├─┬ debug@2.2.0
> │ │ │ └── ms@0.7.1
> │ │ ├── isarray@0.0.1
> │ │ └── json3@3.3.2
> │ ├── source-map@0.5.6
> │ ├── tmp@0.0.31
> │ └─┬ useragent@2.1.13
> │ ├── lru-cache@2.2.4
> │ └── tmp@0.0.24
> ├─┬ karma-chrome-launcher@1.0.1
> │ ├─┬ fs-access@1.0.1
> │ │ └── null-check@1.0.0
> │ └─┬ which@1.2.14
> │ └── isexe@2.0.0
> ├── karma-firefox-launcher@1.0.1
> ├── karma-ie-launcher@1.0.0
> ├── karma-jasmine@1.1.0
> ├─┬ karma-junit-reporter@1.2.0
> │ ├── path-is-absolute@1.0.1
> │ └── xmlbuilder@8.2.2
> ├── karma-opera-launcher@1.0.0
> ├── karma-phantomjs-launcher@1.0.4
> ├── karma-safari-launcher@1.0.0
> ├─┬ karma-webpack@1.8.1
> │ ├── async@0.9.2
> │ ├── lodash@3.10.1
> │ ├── source-map@0.1.43
> │ └─┬ webpack-dev-middleware@1.10.1
> │ └─┬ memory-fs@0.4.1
> │ └─┬ readable-stream@2.2.9
> │ └── string_decoder@1.0.0
> ├─┬ ldapjs@1.0.1
> │ ├── asn1@0.2.3
> │ ├── assert-plus@1.0.0
> │ ├─┬ backoff@2.5.0
> │ │ └── precond@0.2.3
> │ ├─┬ bunyan@1.8.10
> │ │ ├── dtrace-provider@0.8.1
> │ │ ├── moment@2.18.1
> │ │ ├─┬ mv@2.1.1
> │ │ │ └── ncp@2.0.0
> │ │ └── safe-json-stringify@1.0.4
> │ ├─┬ dashdash@1.14.1
> │ │ └── assert-plus@1.0.0
> │ ├── dtrace-provider@0.7.1
> │ ├─┬ ldap-filter@0.2.2
> │ │ └── assert-plus@0.1.5
> │ ├─┬ once@1.4.0
> │ │ └── wrappy@1.0.2
> │ ├─┬ vasync@1.6.4
> │ │ └─┬ verror@1.6.0
> │ │ └── extsprintf@1.2.0
> │ └─┬ verror@1.9.0
> │ ├── core-util-is@1.0.2
> │ └── extsprintf@1.3.0
> ├─┬ less@2.7.2
> │ ├─┬ errno@0.1.4
> │ │ └── prr@0.0.0
> │ ├── image-size@0.5.1
> │ ├─┬ promise@7.1.1
> │ │ └── asap@2.0.5
> │ └── source-map@0.5.6
> ├── less-loader@2.2.3
> ├── lodash@4.17.4
> ├─┬ markdown-serve@0.3.3
> │ ├── highlight.js@8.2.0
> │ ├─┬ js-yaml@3.2.7
> │ │ └── esprima@2.0.0
> │ ├── lodash@2.4.2
> │ └── marked@0.3.6
> ├─┬ memory-fs@0.3.0
> │ └─┬ readable-stream@2.2.9
> │ ├── buffer-shims@1.0.0
> │ ├── process-nextick-args@1.0.7
> │ ├── string_decoder@1.0.0
> │ └── util-deprecate@1.0.2
> ├── mime@1.3.4
> ├── minicap-prebuilt@1.4.0
> ├─┬ minimatch@3.0.3
> │ └─┬ brace-expansion@1.1.7
> │ ├── balanced-match@0.4.2
> │ └── concat-map@0.0.1
> ├── my-local-ip@1.0.0
> ├─┬ node-libs-browser@1.1.1
> │ ├── assert@1.4.1
> │ ├─┬ browserify-zlib@0.1.4
> │ │ └── pako@0.2.9
> │ ├─┬ console-browserify@1.1.0
> │ │ └── date-now@0.1.4
> │ ├── constants-browserify@1.0.0
> │ ├─┬ crypto-browserify@3.11.0
> │ │ ├─┬ browserify-cipher@1.0.0
> │ │ │ ├─┬ browserify-aes@1.0.6
> │ │ │ │ └── buffer-xor@1.0.3
> │ │ │ ├─┬ browserify-des@1.0.0
> │ │ │ │ └── des.js@1.0.0
> │ │ │ └── evp_bytestokey@1.0.0
> │ │ ├─┬ browserify-sign@4.0.4
> │ │ │ ├── bn.js@4.11.6
> │ │ │ ├── browserify-rsa@4.0.1
> │ │ │ ├─┬ elliptic@6.4.0
> │ │ │ │ ├── brorand@1.1.0
> │ │ │ │ ├── hash.js@1.0.3
> │ │ │ │ ├── hmac-drbg@1.0.1
> │ │ │ │ ├── minimalistic-assert@1.0.0
> │ │ │ │ └── minimalistic-crypto-utils@1.0.1
> │ │ │ └─┬ parse-asn1@5.1.0
> │ │ │ └── asn1.js@4.9.1
> │ │ ├── create-ecdh@4.0.0
> │ │ ├─┬ create-hash@1.1.2
> │ │ │ ├── cipher-base@1.0.3
> │ │ │ ├── ripemd160@1.0.1
> │ │ │ └── sha.js@2.4.8
> │ │ ├── create-hmac@1.1.4
> │ │ ├─┬ diffie-hellman@5.0.2
> │ │ │ └── miller-rabin@4.0.0
> │ │ ├── pbkdf2@3.0.9
> │ │ ├── public-encrypt@4.0.0
> │ │ └── randombytes@2.0.3
> │ ├── domain-browser@1.1.7
> │ ├── events@1.1.1
> │ ├── https-browserify@0.0.1
> │ ├── os-browserify@0.2.1
> │ ├── path-browserify@0.0.0
> │ ├── process@0.11.9
> │ ├── punycode@1.4.1
> │ ├── querystring-es3@0.2.1
> │ ├─┬ readable-stream@2.2.9
> │ │ └── string_decoder@1.0.0
> │ ├─┬ stream-browserify@2.0.1
> │ │ └─┬ readable-stream@2.2.9
> │ │ └── string_decoder@1.0.0
> │ ├─┬ stream-http@2.7.0
> │ │ ├── builtin-status-codes@3.0.0
> │ │ ├─┬ readable-stream@2.2.9
> │ │ │ └── string_decoder@1.0.0
> │ │ └── to-arraybuffer@1.0.1
> │ ├── string_decoder@0.10.31
> │ ├── timers-browserify@1.4.2
> │ ├── tty-browserify@0.0.0
> │ ├─┬ url@0.11.0
> │ │ └── punycode@1.3.2
> │ ├─┬ util@0.10.3
> │ │ └── inherits@2.0.1
> │ └── vm-browserify@0.0.4
> ├─┬ node-sass@3.13.1
> │ ├── async-foreach@0.1.3
> │ ├── cross-spawn@3.0.1
> │ ├─┬ gaze@1.1.2
> │ │ └─┬ globule@1.1.0
> │ │ └── lodash@4.16.6
> │ ├── get-stdin@4.0.1
> │ ├── glob@7.1.1
> │ ├── lodash.assign@4.2.0
> │ ├── lodash.clonedeep@4.5.0
> │ ├─┬ meow@3.7.0
> │ │ ├─┬ camelcase-keys@2.1.0
> │ │ │ └── camelcase@2.1.1
> │ │ ├─┬ loud-rejection@1.6.0
> │ │ │ ├─┬ currently-unhandled@0.4.1
> │ │ │ │ └── array-find-index@1.0.2
> │ │ │ └── signal-exit@3.0.2
> │ │ ├── map-obj@1.0.1
> │ │ ├── minimist@1.2.0
> │ │ ├─┬ normalize-package-data@2.3.6
> │ │ │ ├── hosted-git-info@2.4.2
> │ │ │ ├─┬ is-builtin-module@1.0.0
> │ │ │ │ └── builtin-modules@1.1.1
> │ │ │ └─┬ validate-npm-package-license@3.0.1
> │ │ │ ├─┬ spdx-correct@1.0.2
> │ │ │ │ └── spdx-license-ids@1.2.2
> │ │ │ └── spdx-expression-parse@1.0.4
> │ │ ├─┬ redent@1.0.0
> │ │ │ ├─┬ indent-string@2.1.0
> │ │ │ │ └─┬ repeating@2.0.1
> │ │ │ │ └── is-finite@1.0.2
> │ │ │ └── strip-indent@1.0.1
> │ │ └── trim-newlines@1.0.0
> │ ├─┬ node-gyp@3.6.0
> │ │ ├── fstream@1.0.11
> │ │ ├── glob@7.1.1
> │ │ ├─┬ nopt@3.0.6
> │ │ │ └── abbrev@1.1.0
> │ │ ├── osenv@0.1.4
> │ │ └─┬ tar@2.2.1
> │ │ └── block-stream@0.0.9
> │ ├─┬ npmlog@4.0.2
> │ │ ├─┬ are-we-there-yet@1.1.2
> │ │ │ └── delegates@1.0.0
> │ │ ├── console-control-strings@1.1.0
> │ │ └─┬ gauge@2.7.3
> │ │ ├── aproba@1.1.1
> │ │ ├── has-unicode@2.0.1
> │ │ └── wide-align@1.1.0
> │ └─┬ sass-graph@2.1.2
> │ ├── glob@7.1.1
> │ └─┬ yargs@4.8.1
> │ ├── cliui@3.2.0
> │ ├── window-size@0.2.0
> │ └─┬ yargs-parser@2.4.1
> │ └── camelcase@3.0.0
> ├── openid@2.0.6
> ├─┬ passport@0.3.2
> │ ├── passport-strategy@1.0.0
> │ └── pause@0.0.1
> ├─┬ passport-oauth2@1.4.0
> │ ├── oauth@0.9.15
> │ └── uid2@0.0.3
> ├─┬ passport-saml@0.15.0
> │ ├── q@1.1.2
> │ ├─┬ xml-crypto@0.8.5
> │ │ ├── xmldom@0.1.19
> │ │ └── xpath.js@1.0.7
> │ ├─┬ xml-encryption@0.7.4
> │ │ ├── async@0.2.10
> │ │ ├── ejs@0.8.8
> │ │ ├── node-forge@0.2.24
> │ │ └── xpath@0.0.5
> │ └─┬ xmlbuilder@2.5.2
> │ └── lodash@3.2.0
> ├─┬ phantomjs-prebuilt@2.1.14
> │ ├── es6-promise@4.0.5
> │ ├─┬ extract-zip@1.5.0
> │ │ ├─┬ concat-stream@1.5.0
> │ │ │ └── readable-stream@2.0.6
> │ │ ├── debug@0.7.4
> │ │ ├── mkdirp@0.5.0
> │ │ └── yauzl@2.4.1
> │ ├─┬ fs-extra@1.0.0
> │ │ ├── jsonfile@2.4.0
> │ │ └── klaw@1.3.1
> │ ├─┬ hasha@2.2.0
> │ │ └── is-stream@1.1.0
> │ ├── kew@0.7.0
> │ └─┬ request@2.79.0
> │ ├── caseless@0.11.0
> │ ├── har-validator@2.0.6
> │ ├── qs@6.3.2
> │ └── tunnel-agent@0.4.3
> ├── please-update-dependencies@2.0.0
> ├─┬ protobufjs@3.8.2
> │ ├─┬ ascli@0.3.0
> │ │ ├── colour@0.7.1
> │ │ └── optjs@3.2.2
> │ └─┬ bytebuffer@3.5.5
> │ ├── bufferview@1.0.1
> │ └── long@2.4.0
> ├─┬ protractor@4.0.14
> │ ├── @types/jasmine@2.5.47
> │ ├── @types/node@6.0.69
> │ ├── @types/q@0.0.32
> │ ├── @types/selenium-webdriver@2.53.37
> │ ├── adm-zip@0.4.7
> │ ├── glob@7.1.1
> │ ├─┬ jasmine@2.4.1
> │ │ ├── exit@0.1.2
> │ │ ├─┬ glob@3.2.11
> │ │ │ └─┬ minimatch@0.3.0
> │ │ │ ├── lru-cache@2.7.3
> │ │ │ └── sigmund@1.0.1
> │ │ └── jasmine-core@2.4.1
> │ ├── jasminewd2@0.0.10
> │ ├── q@1.4.1
> │ ├── saucelabs@1.3.0
> │ ├─┬ selenium-webdriver@2.53.3
> │ │ ├── adm-zip@0.4.4
> │ │ └─┬ xml2js@0.4.4
> │ │ └── sax@0.6.1
> │ ├─┬ source-map-support@0.4.14
> │ │ └── source-map@0.5.6
> │ └─┬ webdriver-manager@10.3.0
> │ ├── ini@1.3.4
> │ ├── minimist@1.2.0
> │ └── rimraf@2.6.1
> ├─┬ protractor-html-screenshot-reporter@0.0.21
> │ ├── mkdirp@0.3.5
> │ └── underscore@1.6.0
> ├─┬ proxy-addr@1.1.4
> │ ├── forwarded@0.1.0
> │ └── ipaddr.js@1.3.0
> ├─┬ pug@2.0.0-beta9
> │ ├─┬ pug-code-gen@1.1.1
> │ │ ├─┬ constantinople@3.1.0
> │ │ │ └── is-expression@2.1.0
> │ │ ├── doctypes@1.1.0
> │ │ ├── js-stringify@1.0.2
> │ │ ├── pug-attrs@2.0.2
> │ │ └── pug-error@1.3.2
> │ ├─┬ pug-filters@2.1.2
> │ │ ├─┬ clean-css@3.4.25
> │ │ │ └── commander@2.8.1
> │ │ ├─┬ jstransformer@1.0.0
> │ │ │ └── is-promise@2.1.0
> │ │ └── pug-walk@1.1.2
> │ ├─┬ pug-lexer@2.3.2
> │ │ ├─┬ character-parser@2.2.0
> │ │ │ └── is-regex@1.0.4
> │ │ └─┬ is-expression@3.0.0
> │ │ └── acorn@4.0.11
> │ ├── pug-linker@2.0.3
> │ ├── pug-load@2.0.6
> │ ├─┬ pug-parser@2.0.2
> │ │ └── token-stream@0.0.1
> │ ├── pug-runtime@2.0.3
> │ └── pug-strip-comments@1.0.2
> ├── raw-loader@0.5.1
> ├─┬ request@2.81.0
> │ ├── aws-sign2@0.6.0
> │ ├── aws4@1.6.0
> │ ├── caseless@0.12.0
> │ ├─┬ combined-stream@1.0.5
> │ │ └── delayed-stream@1.0.0
> │ ├── extend@3.0.0
> │ ├── forever-agent@0.6.1
> │ ├─┬ form-data@2.1.4
> │ │ └── asynckit@0.4.0
> │ ├─┬ har-validator@4.2.1
> │ │ └── har-schema@1.0.5
> │ ├─┬ hawk@3.1.3
> │ │ ├── boom@2.10.1
> │ │ ├── cryptiles@2.0.5
> │ │ ├── hoek@2.16.3
> │ │ └── sntp@1.0.9
> │ ├─┬ http-signature@1.1.1
> │ │ ├── assert-plus@0.2.0
> │ │ ├─┬ jsprim@1.4.0
> │ │ │ ├── assert-plus@1.0.0
> │ │ │ ├── extsprintf@1.0.2
> │ │ │ ├── json-schema@0.2.3
> │ │ │ └── verror@1.3.6
> │ │ └─┬ sshpk@1.13.0
> │ │ ├── assert-plus@1.0.0
> │ │ ├── bcrypt-pbkdf@1.0.1
> │ │ ├── ecc-jsbn@0.1.1
> │ │ ├─┬ getpass@0.1.6
> │ │ │ └── assert-plus@1.0.0
> │ │ ├── jodid25519@1.0.2
> │ │ ├── jsbn@0.1.1
> │ │ └── tweetnacl@0.14.5
> │ ├── is-typedarray@1.0.0
> │ ├── isstream@0.1.2
> │ ├── json-stringify-safe@5.0.1
> │ ├── mime-types@2.1.15
> │ ├── oauth-sign@0.8.2
> │ ├── performance-now@0.2.0
> │ ├── stringstream@0.0.5
> │ ├── tough-cookie@2.3.2
> │ └── tunnel-agent@0.6.0
> ├─┬ request-progress@2.0.1
> │ └── throttleit@1.0.0
> ├── rethinkdb@2.3.3
> ├── sass-loader@4.1.1
> ├── script-loader@0.7.0
> ├── semver@5.3.0
> ├─┬ serve-favicon@2.4.2
> │ └── ms@1.0.0
> ├── serve-static@1.12.1
> ├─┬ sinon@1.17.7
> │ ├── formatio@1.1.1
> │ ├── lolex@1.3.2
> │ └── samsam@1.1.2
> ├── sinon-chai@2.9.0
> ├─┬ socket.io@1.4.8
> │ ├─┬ debug@2.2.0
> │ │ └── ms@0.7.1
> │ ├─┬ engine.io@1.6.11
> │ │ ├─┬ accepts@1.1.4
> │ │ │ ├─┬ mime-types@2.0.14
> │ │ │ │ └── mime-db@1.12.0
> │ │ │ └── negotiator@0.4.9
> │ │ ├── base64id@0.1.0
> │ │ ├─┬ debug@2.2.0
> │ │ │ └── ms@0.7.1
> │ │ ├─┬ engine.io-parser@1.2.4
> │ │ │ ├── after@0.8.1
> │ │ │ ├── arraybuffer.slice@0.0.6
> │ │ │ ├── base64-arraybuffer@0.1.2
> │ │ │ ├── blob@0.0.4
> │ │ │ ├─┬ has-binary@0.1.6
> │ │ │ │ └── isarray@0.0.1
> │ │ │ └── utf8@2.1.0
> │ │ └── ws@1.1.0
> │ ├─┬ has-binary@0.1.7
> │ │ └── isarray@0.0.1
> │ ├─┬ socket.io-adapter@0.4.0
> │ │ ├─┬ debug@2.2.0
> │ │ │ └── ms@0.7.1
> │ │ └─┬ socket.io-parser@2.2.2
> │ │ ├── debug@0.7.4
> │ │ ├── isarray@0.0.1
> │ │ └── json3@3.2.6
> │ └─┬ socket.io-parser@2.2.6
> │ ├── benchmark@1.0.0
> │ ├── component-emitter@1.1.2
> │ ├─┬ debug@2.2.0
> │ │ └── ms@0.7.1
> │ ├── isarray@0.0.1
> │ └── json3@3.3.2
> ├─┬ socket.io-client@1.4.8
> │ ├── backo2@1.0.2
> │ ├── component-bind@1.0.0
> │ ├── component-emitter@1.2.0
> │ ├─┬ debug@2.2.0
> │ │ └── ms@0.7.1
> │ ├─┬ engine.io-client@1.6.11
> │ │ ├── component-inherit@0.0.3
> │ │ ├─┬ debug@2.2.0
> │ │ │ └── ms@0.7.1
> │ │ ├── has-cors@1.1.0
> │ │ ├── parsejson@0.0.1
> │ │ ├── parseqs@0.0.2
> │ │ ├── ws@1.0.1
> │ │ ├── xmlhttprequest-ssl@1.5.1
> │ │ └── yeast@0.1.2
> │ ├── indexof@0.0.1
> │ ├── object-component@0.0.3
> │ ├─┬ parseuri@0.0.4
> │ │ └─┬ better-assert@1.0.2
> │ │ └── callsite@1.0.0
> │ └── to-array@0.1.4
> ├── split@1.0.0
> ├── stf-appstore-db@1.0.0
> ├── stf-browser-db@1.0.2
> ├── stf-device-db@1.2.0
> ├─┬ stf-syrup@1.0.0
> │ ├── bluebird@1.1.1
> │ └── lodash@2.4.2
> ├── stf-wiki@1.0.0
> ├─┬ style-loader@0.13.2
> │ └─┬ loader-utils@1.1.0
> │ └── json5@0.5.1
> ├─┬ swagger-express-mw@0.7.0
> │ └─┬ swagger-node-runner@0.7.3
> │ ├─┬ bagpipes@0.1.0
> │ │ ├── jspath@0.3.4
> │ │ ├── lodash@3.10.1
> │ │ ├─┬ machinepack-http@2.4.0
> │ │ │ ├── lodash@3.10.1
> │ │ │ ├─┬ machine@10.4.0
> │ │ │ │ ├── convert-to-ecmascript-compatible-varname@0.1.5
> │ │ │ │ ├── lodash@3.10.1
> │ │ │ │ ├── object-hash@0.3.0
> │ │ │ │ ├─┬ rttc@7.4.0
> │ │ │ │ │ └── lodash@3.10.1
> │ │ │ │ └─┬ switchback@2.0.2
> │ │ │ │ └── lodash@3.10.1
> │ │ │ └─┬ machinepack-urls@4.1.0
> │ │ │ ├── lodash@3.10.1
> │ │ │ └─┬ machine@9.1.2
> │ │ │ ├── rttc@4.5.2
> │ │ │ └─┬ switchback@1.1.3
> │ │ │ └── lodash@2.4.2
> │ │ ├── mustache@2.3.0
> │ │ └── pipeworks@1.3.1
> │ ├─┬ config@1.25.1
> │ │ └── json5@0.4.0
> │ ├── cors@2.8.3
> │ ├─┬ js-yaml@3.8.3
> │ │ └── esprima@3.1.3
> │ ├── lodash@3.10.1
> │ ├─┬ multer@1.3.0
> │ │ ├── append-field@0.1.0
> │ │ ├─┬ busboy@0.2.14
> │ │ │ └─┬ dicer@0.2.5
> │ │ │ └── streamsearch@0.1.2
> │ │ └── object-assign@3.0.0
> │ └─┬ sway@1.0.0
> │ ├─┬ js-yaml@3.8.3
> │ │ └── esprima@3.1.3
> │ ├─┬ json-refs@2.1.6
> │ │ ├─┬ js-yaml@3.8.3
> │ │ │ └── esprima@3.1.3
> │ │ ├─┬ path-loader@1.0.2
> │ │ │ └─┬ superagent@3.5.2
> │ │ │ ├── component-emitter@1.2.1
> │ │ │ ├── cookiejar@2.1.1
> │ │ │ └─┬ readable-stream@2.2.9
> │ │ │ └── string_decoder@1.0.0
> │ │ ├── slash@1.0.0
> │ │ └── uri-js@2.1.1
> │ ├─┬ json-schema-faker@0.2.16
> │ │ ├── chance@1.0.6
> │ │ ├─┬ deref@0.6.4
> │ │ │ └── deep-extend@0.4.1
> │ │ ├── faker@3.1.0
> │ │ └─┬ randexp@0.4.5
> │ │ ├── discontinuous-range@1.0.0
> │ │ └── ret@0.1.14
> │ ├── native-promise-only@0.8.1
> │ ├─┬ path-to-regexp@1.7.0
> │ │ └── isarray@0.0.1
> │ ├── swagger-methods@1.0.0
> │ ├── swagger-schema-official@2.0.0-bab6bed
> │ └─┬ z-schema@3.18.2
> │ ├── lodash.get@4.4.2
> │ ├── lodash.isequal@4.5.0
> │ └── validator@6.3.0
> ├─┬ temp@0.8.3
> │ ├── os-tmpdir@1.0.2
> │ └── rimraf@2.2.8
> ├─┬ template-html-loader@0.0.3
> │ └── consolidate@0.10.0
> ├─┬ then-jade@2.4.3
> │ ├─┬ barrage@1.1.0
> │ │ └─┬ promise@6.1.0
> │ │ └── asap@1.0.0
> │ ├─┬ jade@1.11.0
> │ │ ├── character-parser@1.2.1
> │ │ ├── commander@2.6.0
> │ │ ├─┬ constantinople@3.0.2
> │ │ │ └── acorn@2.7.0
> │ │ ├─┬ jstransformer@0.0.2
> │ │ │ └─┬ promise@6.1.0
> │ │ │ └── asap@1.0.0
> │ │ ├─┬ transformers@2.1.0
> │ │ │ ├─┬ css@1.0.8
> │ │ │ │ ├── css-parse@1.0.4
> │ │ │ │ └── css-stringify@1.0.5
> │ │ │ ├─┬ promise@2.0.0
> │ │ │ │ └── is-promise@1.0.1
> │ │ │ └─┬ uglify-js@2.2.5
> │ │ │ ├── optimist@0.3.7
> │ │ │ └── source-map@0.1.43
> │ │ └─┬ with@4.0.3
> │ │ ├── acorn@1.2.2
> │ │ └── acorn-globals@1.0.9
> │ ├─┬ regenerator@0.8.46
> │ │ ├─┬ commoner@0.10.8
> │ │ │ ├─┬ detective@4.5.0
> │ │ │ │ └── acorn@4.0.11
> │ │ │ └── glob@5.0.15
> │ │ ├─┬ defs@1.1.1
> │ │ │ ├─┬ alter@0.2.0
> │ │ │ │ └── stable@0.1.6
> │ │ │ ├── ast-traverse@0.1.1
> │ │ │ ├── breakable@1.0.0
> │ │ │ ├── esprima-fb@15001.1001.0-dev-harmony-fb
> │ │ │ ├── simple-fmt@0.1.0
> │ │ │ ├── simple-is@0.2.0
> │ │ │ ├── stringmap@0.2.2
> │ │ │ ├── stringset@0.2.1
> │ │ │ ├── tryor@0.1.2
> │ │ │ └─┬ yargs@3.27.0
> │ │ │ └── window-size@0.1.4
> │ │ ├── esprima-fb@15001.1001.0-dev-harmony-fb
> │ │ ├── private@0.1.7
> │ │ └─┬ recast@0.10.33
> │ │ ├── ast-types@0.8.12
> │ │ └── source-map@0.5.6
> │ ├── regenerator-runtime@0.9.6
> │ ├── then-yield@0.0.1
> │ └─┬ with@5.1.1
> │ └─┬ acorn-globals@3.1.0
> │ └── acorn@4.0.11
> ├── transliteration@1.5.3
> ├── url-join@1.1.0
> ├─┬ url-loader@0.5.8
> │ └─┬ loader-utils@1.1.0
> │ └── json5@0.5.1
> ├── utf-8-validate@1.2.2
> ├── uuid@3.0.1
> ├─┬ webpack@1.15.0
> │ ├── acorn@3.3.0
> │ ├── async@1.5.2
> │ ├── clone@1.0.2
> │ ├─┬ enhanced-resolve@0.9.1
> │ │ └── memory-fs@0.2.0
> │ ├── interpret@0.6.6
> │ ├─┬ node-libs-browser@0.7.0
> │ │ ├─┬ crypto-browserify@3.3.0
> │ │ │ ├── browserify-aes@0.4.0
> │ │ │ ├── pbkdf2-compat@2.0.1
> │ │ │ ├── ripemd160@0.2.0
> │ │ │ └── sha.js@2.2.6
> │ │ ├─┬ readable-stream@2.2.9
> │ │ │ └── string_decoder@1.0.0
> │ │ ├─┬ timers-browserify@2.0.2
> │ │ │ └── setimmediate@1.0.5
> │ │ └─┬ url@0.11.0
> │ │ └── punycode@1.3.2
> │ ├─┬ supports-color@3.2.3
> │ │ └── has-flag@1.0.0
> │ ├── tapable@0.1.10
> │ ├─┬ uglify-js@2.7.5
> │ │ ├── async@0.2.10
> │ │ ├── source-map@0.5.6
> │ │ ├── uglify-to-browserify@1.0.2
> │ │ └─┬ yargs@3.10.0
> │ │ ├── camelcase@1.2.1
> │ │ ├─┬ cliui@2.1.0
> │ │ │ ├─┬ center-align@0.1.3
> │ │ │ │ ├─┬ align-text@0.1.4
> │ │ │ │ │ ├── longest@1.0.1
> │ │ │ │ │ └── repeat-string@1.6.1
> │ │ │ │ └── lazy-cache@1.0.4
> │ │ │ └── right-align@0.1.3
> │ │ └── window-size@0.1.0
> │ ├─┬ watchpack@0.2.9
> │ │ └── async@0.9.2
> │ └─┬ webpack-core@0.6.9
> │ └── source-map@0.4.4
> ├─┬ webpack-dev-server@1.16.3
> │ ├── connect-history-api-fallback@1.3.0
> │ ├─┬ http-proxy-middleware@0.17.4
> │ │ ├─┬ is-glob@3.1.0
> │ │ │ └── is-extglob@2.1.1
> │ │ └─┬ micromatch@2.3.11
> │ │ ├─┬ arr-diff@2.0.0
> │ │ │ └── arr-flatten@1.0.3
> │ │ ├─┬ braces@1.8.5
> │ │ │ ├─┬ expand-range@1.8.2
> │ │ │ │ └─┬ fill-range@2.2.3
> │ │ │ │ ├── is-number@2.1.0
> │ │ │ │ ├── isobject@2.1.0
> │ │ │ │ └── randomatic@1.1.6
> │ │ │ ├── preserve@0.2.0
> │ │ │ └── repeat-element@1.1.2
> │ │ ├─┬ expand-brackets@0.1.5
> │ │ │ └── is-posix-bracket@0.1.1
> │ │ ├── extglob@0.3.2
> │ │ ├── filename-regex@2.0.0
> │ │ ├─┬ kind-of@3.1.0
> │ │ │ └── is-buffer@1.1.5
> │ │ ├─┬ normalize-path@2.1.1
> │ │ │ └── remove-trailing-separator@1.0.1
> │ │ ├─┬ object.omit@2.0.1
> │ │ │ ├─┬ for-own@0.1.5
> │ │ │ │ └── for-in@1.0.2
> │ │ │ └── is-extendable@0.1.1
> │ │ ├─┬ parse-glob@3.0.4
> │ │ │ ├── glob-base@0.3.0
> │ │ │ └── is-dotfile@1.0.2
> │ │ └─┬ regex-cache@0.4.3
> │ │ ├── is-equal-shallow@0.1.3
> │ │ └── is-primitive@2.0.0
> │ ├── open@0.0.5
> │ ├─┬ serve-index@1.8.0
> │ │ ├── batch@0.5.3
> │ │ ├─┬ debug@2.2.0
> │ │ │ └── ms@0.7.1
> │ │ └─┬ http-errors@1.5.1
> │ │ └── setprototypeof@1.0.2
> │ ├─┬ sockjs@0.3.18
> │ │ ├─┬ faye-websocket@0.10.0
> │ │ │ └─┬ websocket-driver@0.6.5
> │ │ │ └── websocket-extensions@0.1.1
> │ │ └── uuid@2.0.3
> │ ├─┬ sockjs-client@1.1.2
> │ │ ├─┬ eventsource@0.1.6
> │ │ │ └─┬ original@1.0.0
> │ │ │ └── url-parse@1.0.5
> │ │ ├── faye-websocket@0.11.1
> │ │ ├── json3@3.3.2
> │ │ └─┬ url-parse@1.1.8
> │ │ └── querystringify@0.0.4
> │ ├── stream-cache@0.0.2
> │ └── supports-color@3.2.3
> ├─┬ ws@1.1.4
> │ ├── options@0.0.6
> │ └── ultron@1.0.2
> ├─┬ yargs@6.6.0
> │ ├── camelcase@3.0.0
> │ ├─┬ cliui@3.2.0
> │ │ └── wrap-ansi@2.1.0
> │ ├── decamelize@1.2.0
> │ ├── get-caller-file@1.0.2
> │ ├─┬ os-locale@1.4.0
> │ │ └─┬ lcid@1.0.0
> │ │ └── invert-kv@1.0.0
> │ ├─┬ read-pkg-up@1.0.1
> │ │ ├─┬ find-up@1.1.2
> │ │ │ └── path-exists@2.1.0
> │ │ └─┬ read-pkg@1.1.0
> │ │ ├─┬ load-json-file@1.1.0
> │ │ │ ├─┬ parse-json@2.2.0
> │ │ │ │ └─┬ error-ex@1.3.1
> │ │ │ │ └── is-arrayish@0.2.1
> │ │ │ └── strip-bom@2.0.0
> │ │ └── path-type@1.1.0
> │ ├── require-directory@2.1.1
> │ ├── require-main-filename@1.0.1
> │ ├── set-blocking@2.0.0
> │ ├─┬ string-width@1.0.2
> │ │ ├── code-point-at@1.1.0
> │ │ └── is-fullwidth-code-point@1.0.0
> │ ├── which-module@1.0.0
> │ ├── y18n@3.2.1
> │ └─┬ yargs-parser@4.2.1
> │ └── camelcase@3.0.0
> └─┬ zmq@2.15.3
> └── nan@2.3.5
>
> npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@^1.0.0
> (node_modules/chokidar/node_modules/fsevents):
> npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for
> fsevents@1.1.1: wanted {"os":"darwin","arch":"any"} (current:
> {"os":"linux","arch":"x64"})
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/578>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZUG00LFcnrzfeEJA2OYYkYPpiQdks5rxG6zgaJpZM4NAAX2>
> .
>
 Do not use root, do not use sudo. You have to do all kinds of workarounds
when you run npm as root. There's a flag that you can use but you shouldn't
use that.

On Fri, Apr 21, 2017 at 14:00 RAHUL RAJ CHAKRAVORTY <
notifications@github.com> wrote:

> this is the error coming when i am running the command : $ sudo npm
> install -g stf
>
> i have already installed all the requirements .... via homebrew , running
> node version - v7.9.0, npm version 4.2.0;
>
> /usr/bin/stf -> /usr/lib/node_modules/stf/bin/stf
>
> dtrace-provider@0.8.1 install
> /usr/lib/node_modules/stf/node_modules/bunyan/node_modules/dtrace-provider
> node scripts/install.js
>
> dtrace-provider@0.7.1 install
> /usr/lib/node_modules/stf/node_modules/dtrace-provider
> node scripts/install.js
>
> bufferutil@1.3.0 install /usr/lib/node_modules/stf/node_modules/bufferutil
> node-gyp rebuild
>
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/home/tft/.node-gyp/7.9.0"
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/lib/node_modules/stf/node_modules/bufferutil/.node-gyp"
> make: Entering directory
> '/usr/lib/node_modules/stf/node_modules/bufferutil/build'
>
>
> CXX(target) Release/obj.target/bufferutil/src/bufferutil.o
> SOLINK_MODULE(target) Release/obj.target/bufferutil.node
> COPY Release/bufferutil.node
>
> make: Leaving directory
> '/usr/lib/node_modules/stf/node_modules/bufferutil/build'
>
> jpeg-turbo@0.4.0 install /usr/lib/node_modules/stf/node_modules/jpeg-turbo
> node-pre-gyp install --fallback-to-build
>
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/home/tft/.node-gyp/7.9.0"
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/lib/node_modules/stf/node_modules/jpeg-turbo/.node-gyp"
> make: Entering directory
> '/usr/lib/node_modules/stf/node_modules/jpeg-turbo/build'
> make: *** No rule to make target
> '../.node-gyp/7.9.0/include/node/common.gypi', needed by 'Makefile'. Stop.
> make: Leaving directory
> '/usr/lib/node_modules/stf/node_modules/jpeg-turbo/build'
> gyp ERR! build error
> gyp ERR! stack Error: make failed with exit code: 2
> gyp ERR! stack at ChildProcess.onExit
> (/usr/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:276:23)
> gyp ERR! stack at emitTwo (events.js:106:13)
> gyp ERR! stack at ChildProcess.emit (events.js:194:7)
> gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:215:12)
> gyp ERR! System Linux 4.4.0-72-generic
> gyp ERR! command "/usr/bin/nodejs"
> "/usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js" "build"
> "--fallback-to-build"
> "--module=/usr/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64/jpegturbo.node"
> "--module_name=jpegturbo"
> "--module_path=/usr/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64"
> gyp ERR! cwd /usr/lib/node_modules/stf/node_modules/jpeg-turbo
> gyp ERR! node -v v7.9.0
> gyp ERR! node-gyp -v v3.5.0
> gyp ERR! not ok
> node-pre-gyp ERR! build error
> node-pre-gyp ERR! stack Error: Failed to execute '/usr/bin/nodejs
> /usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js build
> --fallback-to-build
> --module=/usr/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64/jpegturbo.node
> --module_name=jpegturbo
> --module_path=/usr/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64'
> (1)
> node-pre-gyp ERR! stack at ChildProcess.
> (/usr/lib/node_modules/stf/node_modules/jpeg-turbo/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
> node-pre-gyp ERR! stack at emitTwo (events.js:106:13)
> node-pre-gyp ERR! stack at ChildProcess.emit (events.js:194:7)
> node-pre-gyp ERR! stack at maybeClose (internal/child_process.js:899:16)
> node-pre-gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:226:5)
> node-pre-gyp ERR! System Linux 4.4.0-72-generic
> node-pre-gyp ERR! command "/usr/bin/nodejs"
> "/usr/lib/node_modules/stf/node_modules/jpeg-turbo/node_modules/.bin/node-pre-gyp"
> "install" "--fallback-to-build"
> node-pre-gyp ERR! cwd /usr/lib/node_modules/stf/node_modules/jpeg-turbo
> node-pre-gyp ERR! node -v v7.9.0
> node-pre-gyp ERR! node-pre-gyp -v v0.6.19
> node-pre-gyp ERR! not ok
> Failed to execute '/usr/bin/nodejs
> /usr/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js build
> --fallback-to-build
> --module=/usr/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64/jpegturbo.node
> --module_name=jpegturbo
> --module_path=/usr/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v51-linux-x64'
> (1)
> /usr/lib
> `-- (empty)
>
> npm ERR! Linux 4.4.0-72-generic
> npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "install" "-g" "stf"
> npm ERR! node v7.9.0
> npm ERR! npm v4.2.0
> npm ERR! code ELIFECYCLE
> npm ERR! errno 1
>
> npm ERR! jpeg-turbo@0.4.0 install: node-pre-gyp install
> --fallback-to-build
> npm ERR! Exit status 1
> npm ERR!
> npm ERR! Failed at the jpeg-turbo@0.4.0 install script 'node-pre-gyp
> install --fallback-to-build'.
> npm ERR! Make sure you have the latest version of node.js and npm
> installed.
> npm ERR! If you do, this is most likely a problem with the jpeg-turbo
> package,
> npm ERR! not with npm itself.
> npm ERR! Tell the author that this fails on your system:
> npm ERR! node-pre-gyp install --fallback-to-build
> npm ERR! You can get information on how to open an issue for this project
> with:
> npm ERR! npm bugs jpeg-turbo
> npm ERR! Or if that isn't available, you can get their info via:
> npm ERR! npm owner ls jpeg-turbo
> npm ERR! There is likely additional logging output above.
>
> npm ERR! Please include the following file with any support request:
> npm ERR! /home/tft/.npm/_logs/2017-04-21T04_53_04_576Z-debug.log
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/578#issuecomment-296065684>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RTSEnXd2RVNPuqqdueLcfjQHr0hks5ryDfUgaJpZM4NAAX2>
> .
>
 Use nvm to install node for that user, or change the permissions of your
global installation.

On Fri, Apr 21, 2017 at 14:35 RAHUL RAJ CHAKRAVORTY <
notifications@github.com> wrote:

> this is what i am getting when i don't use root.
>
> npm WARN deprecated node-uuid@1.4.8: Use uuid module instead
> npm WARN checkPermissions Missing write access to /usr/lib/node_modules
> /usr/lib
> -- stf@2.3.0 +-- @slack/client@3.9.0 | +-- async@1.5.2 | +--
> bluebird@3.5.0 | +-- https-proxy-agent@1.0.0 | |-- agent-base@2.0.1
> | | -- semver@5.0.3 | +-- inherits@2.0.3 | +-- pkginfo@0.4.0 | +--
> retry@0.9.0 | +-- url-join@0.0.1 |-- winston@2.3.1
> | +-- async@1.0.0
> | +-- colors@1.0.3
> | +-- cycle@1.0.3
> | +-- eyes@0.1.8
> | -- stack-trace@0.0.9 +-- adbkit@2.9.0 | +-- adbkit-logcat@1.1.0 | +--
> bluebird@2.9.34 | +-- node-forge@0.6.49 |-- split@0.3.3
> +-- adbkit-apkreader@1.0.0
> | +-- adm-zip@0.4.7
> | -- debug@0.7.4 +-- adbkit-monkey@1.0.1 |-- async@0.2.10
> +-- aws-sdk@2.44.0
> | +-- buffer@4.9.1
> | | +-- base64-js@1.2.0
> | | +-- ieee754@1.1.8
> | | -- isarray@1.0.0 | +-- crypto-browserify@1.0.9 | +-- jmespath@0.15.0
> | +-- querystring@0.2.0 | +-- sax@1.2.1 | +-- url@0.10.3 | |--
> punycode@1.3.2
> | +-- uuid@3.0.1
> | +-- xml2js@0.4.17
> | -- xmlbuilder@4.2.1 +-- basic-auth@1.1.0 +-- bluebird@2.11.0 +--
> body-parser@1.17.1 | +-- bytes@2.4.0 | +-- content-type@1.0.2 | +--
> debug@2.6.1 | |-- ms@0.7.2
> | +-- depd@1.1.0
> | +-- http-errors@1.6.1
> | +-- iconv-lite@0.4.15
> | +-- on-finished@2.3.0
> | | -- ee-first@1.1.1 | +-- qs@6.4.0 | +-- raw-body@2.2.0 | |--
> unpipe@1.0.0
> | -- type-is@1.6.15 |-- media-typer@0.3.0
> +-- bufferutil@1.3.0
> | +-- bindings@1.2.1
> | -- nan@2.4.0 +-- chalk@1.1.3 | +-- ansi-styles@2.2.1 | +--
> escape-string-regexp@1.0.5 | +-- has-ansi@2.0.0 | |-- ansi-regex@2.1.1
> | +-- strip-ansi@3.0.1
> | -- supports-color@2.0.0 +-- commander@2.9.0 |-- graceful-readlink@1.0.1
> +-- compression@1.6.2
> | +-- accepts@1.3.3
> | | -- negotiator@0.6.1 | +-- bytes@2.3.0 | +-- compressible@2.0.10 | |--
> mime-db@1.27.0
> | +-- debug@2.2.0
> | | -- ms@0.7.1 | +-- on-headers@1.0.1 |-- vary@1.1.1
> +-- cookie-session@2.0.0-beta.1
> | +-- cookies@0.7.0
> | | -- keygrip@1.0.1 |-- debug@2.6.1
> | -- ms@0.7.2 +-- csurf@1.9.0 | +-- cookie@0.3.1 | +--
> cookie-signature@1.0.6 | +-- csrf@3.0.6 | | +-- rndm@1.2.0 | | +--
> tsscmp@1.0.5 | |-- uid-safe@2.1.4
> | | -- random-bytes@1.0.0 |-- http-errors@1.5.1
> | -- setprototypeof@1.0.2 +-- debug@2.6.4 |-- ms@0.7.3
> +-- eventemitter3@1.2.0
> +-- express@4.15.2
> | +-- array-flatten@1.1.1
> | +-- content-disposition@0.5.2
> | +-- debug@2.6.1
> | | -- ms@0.7.2 | +-- encodeurl@1.0.1 | +-- escape-html@1.0.3 | +--
> etag@1.8.0 | +-- finalhandler@1.0.1 | |-- debug@2.6.3
> | | -- ms@0.7.2 | +-- fresh@0.5.0 | +-- merge-descriptors@1.0.1 | +--
> methods@1.1.2 | +-- parseurl@1.3.1 | +-- path-to-regexp@0.1.7 | +--
> range-parser@1.2.0 | +-- send@0.15.1 | | +-- debug@2.6.1 | | +--
> destroy@1.0.4 | |-- ms@0.7.2
> | +-- setprototypeof@1.0.3
> | +-- statuses@1.3.1
> | -- utils-merge@1.0.0 +-- express-validator@2.21.0 | +-- bluebird@3.4.7
> | +-- lodash@4.16.6 |-- validator@5.7.0
> +-- formidable@1.1.1
> +-- gm@1.23.0
> | +-- array-parallel@0.1.3
> | +-- array-series@0.1.5
> | +-- cross-spawn@4.0.2
> | | +-- lru-cache@4.0.2
> | | | +-- pseudomap@1.0.2
> | | | -- yallist@2.1.2 | |-- which@1.2.14
> | | -- isexe@2.0.0 |-- debug@2.2.0
> | -- ms@0.7.1 +-- hipchatter@0.3.2 | +-- async@0.2.10 |-- needle@1.6.0
> +-- http-proxy@1.16.2
> | -- requires-port@1.0.0 +-- in-publish@2.0.0 +-- jpeg-turbo@0.4.0 |--
> node-pre-gyp@0.6.19
> | +-- mkdirp@0.5.1
> | | -- minimist@0.0.8 | +-- nopt@3.0.6 | |-- abbrev@1.0.7
> | +-- npmlog@2.0.0
> | | +-- ansi@0.3.0
> | | +-- are-we-there-yet@1.0.5
> | | | +-- delegates@0.1.0
> | | | -- readable-stream@2.0.5 | | | +-- core-util-is@1.0.2 | | | +--
> inherits@2.0.1 | | | +-- isarray@0.0.1 | | | +--
> process-nextick-args@1.0.6 | | | +-- string_decoder@0.10.31 | | |--
> util-deprecate@1.0.2
> | | -- gauge@1.2.2 | | +-- has-unicode@1.0.1 | | +-- lodash.pad@3.1.1 | |
> | +-- lodash._basetostring@3.0.1 | | |-- lodash._createpadding@3.6.1
> | | | -- lodash.repeat@3.0.1 | | +-- lodash.padleft@3.1.1 | | | +--
> lodash._basetostring@3.0.1 | | |-- lodash._createpadding@3.6.1
> | | | -- lodash.repeat@3.0.1 | |-- lodash.padright@3.1.1
> | | +-- lodash._basetostring@3.0.1
> | | -- lodash._createpadding@3.6.1 | |-- lodash.repeat@3.0.1
> | +-- rc@1.1.6
> | | +-- deep-extend@0.4.0
> | | +-- ini@1.3.4
> | | +-- minimist@1.2.0
> | | -- strip-json-comments@1.0.4 | +-- request@2.67.0 | | +--
> aws-sign2@0.6.0 | | +-- bl@1.0.0 | | |-- readable-stream@2.0.5
> | | | +-- core-util-is@1.0.2
> | | | +-- inherits@2.0.1
> | | | +-- isarray@0.0.1
> | | | +-- process-nextick-args@1.0.6
> | | | +-- string_decoder@0.10.31
> | | | -- util-deprecate@1.0.2 | | +-- caseless@0.11.0 | | +--
> combined-stream@1.0.5 | | |-- delayed-stream@1.0.0
> | | +-- extend@3.0.0
> | | +-- forever-agent@0.6.1
> | | +-- form-data@1.0.0-rc3
> | | | -- async@1.5.1 | | +-- har-validator@2.0.3 | | | +-- chalk@1.1.1 |
> | | | +-- ansi-styles@2.1.0 | | | | +-- escape-string-regexp@1.0.4 | | |
> | +-- has-ansi@2.0.0 | | | | |-- ansi-regex@2.0.0
> | | | | +-- strip-ansi@3.0.0
> | | | | | -- ansi-regex@2.0.0 | | | |-- supports-color@2.0.0
> | | | +-- commander@2.9.0
> | | | | -- graceful-readlink@1.0.1 | | | +-- is-my-json-valid@2.12.3 | |
> | | +-- generate-function@2.0.0 | | | | +-- generate-object-property@1.2.0
> | | | | |-- is-property@1.0.2
> | | | | +-- jsonpointer@2.0.0
> | | | | -- xtend@4.0.1 | | |-- pinkie-promise@2.0.0
> | | | -- pinkie@2.0.1 | | +-- hawk@3.1.2 | | | +-- boom@2.10.1 | | | +--
> cryptiles@2.0.5 | | | +-- hoek@2.16.3 | | |-- sntp@1.0.9
> | | +-- http-signature@1.1.0
> | | | +-- assert-plus@0.1.5
> | | | +-- jsprim@1.2.2
> | | | | +-- extsprintf@1.0.2
> | | | | +-- json-schema@0.2.2
> | | | | -- verror@1.3.6 | | |-- sshpk@1.7.2
> | | | +-- asn1@0.2.3
> | | | +-- assert-plus@0.2.0
> | | | +-- dashdash@1.11.0
> | | | | -- assert-plus@0.1.5 | | | +-- ecc-jsbn@0.1.1 | | | +--
> jodid25519@1.0.2 | | | +-- jsbn@0.1.0 | | |-- tweetnacl@0.13.2
> | | +-- is-typedarray@1.0.0
> | | +-- isstream@0.1.2
> | | +-- json-stringify-safe@5.0.1
> | | +-- mime-types@2.1.9
> | | | -- mime-db@1.21.0 | | +-- node-uuid@1.4.7 | | +-- oauth-sign@0.8.0
> | | +-- qs@5.2.0 | | +-- stringstream@0.0.5 | | +-- tough-cookie@2.2.1 | |--
> tunnel-agent@0.4.2
> | +-- rimraf@2.5.0
> | | -- glob@6.0.3 | | +-- inflight@1.0.4 | | |-- wrappy@1.0.1
> | | +-- inherits@2.0.1
> | | +-- minimatch@3.0.0
> | | | -- brace-expansion@1.1.2 | | | +-- balanced-match@0.3.0 | | |--
> concat-map@0.0.1
> | | +-- once@1.3.3
> | | | -- wrappy@1.0.1 | |-- path-is-absolute@1.0.0
> | +-- semver@5.1.0
> | +-- tar@2.2.1
> | | +-- block-stream@0.0.8
> | | +-- fstream@1.0.8
> | | | -- graceful-fs@4.1.2 | |-- inherits@2.0.1
> | -- tar-pack@3.1.2 | +-- debug@0.7.4 | +-- fstream@1.0.8 | | +--
> graceful-fs@4.1.2 | |-- inherits@2.0.1
> | +-- fstream-ignore@1.0.3
> | | +-- inherits@2.0.1
> | | -- minimatch@3.0.0 | |-- brace-expansion@1.1.2
> | | +-- balanced-match@0.3.0
> | | -- concat-map@0.0.1 | +-- once@1.1.1 | +-- readable-stream@2.0.5 | |
> +-- core-util-is@1.0.2 | | +-- inherits@2.0.1 | | +-- isarray@0.0.1 | |
> +-- process-nextick-args@1.0.6 | | +-- string_decoder@0.10.31 | |--
> util-deprecate@1.0.2
> | +-- rimraf@2.4.5
> | | -- glob@6.0.3 | | +-- inflight@1.0.4 | | |-- wrappy@1.0.1
> | | +-- inherits@2.0.1
> | | +-- minimatch@3.0.0
> | | | -- brace-expansion@1.1.2 | | | +-- balanced-match@0.3.0 | | |--
> concat-map@0.0.1
> | | +-- once@1.3.3
> | | | -- wrappy@1.0.1 | |-- path-is-absolute@1.0.0
> | -- uid-number@0.0.3 +-- jws@3.1.4 | +-- base64url@2.0.0 | +-- jwa@1.1.5
> | | +-- buffer-equal-constant-time@1.0.1 | |-- ecdsa-sig-formatter@1.0.9
> | -- safe-buffer@5.0.1 +-- ldapjs@1.0.1 | +-- asn1@0.2.3 | +--
> assert-plus@1.0.0 | +-- backoff@2.5.0 | |-- precond@0.2.3
> | +-- bunyan@1.8.10
> | | +-- dtrace-provider@0.8.1
> | | +-- moment@2.18.1
> | | +-- mv@2.1.1
> | | | +-- ncp@2.0.0
> | | | -- rimraf@2.4.5 | | |-- glob@6.0.4
> | | | +-- inflight@1.0.6
> | | | -- path-is-absolute@1.0.1 | |-- safe-json-stringify@1.0.4
> | +-- dashdash@1.14.1
> | | -- assert-plus@1.0.0 | +-- dtrace-provider@0.7.1 | +--
> ldap-filter@0.2.2 | |-- assert-plus@0.1.5
> | +-- once@1.4.0
> | | -- wrappy@1.0.2 | +-- vasync@1.6.4 | |-- verror@1.6.0
> | | -- extsprintf@1.2.0 |-- verror@1.9.0
> | +-- core-util-is@1.0.2
> | -- extsprintf@1.3.0 +-- lodash@4.17.4 +-- markdown-serve@0.3.3 | +--
> highlight.js@8.2.0 | +-- js-yaml@3.2.7 | | +-- argparse@1.0.9 | | |--
> sprintf-js@1.0.3
> | | -- esprima@2.0.0 | +-- lodash@2.4.2 | +-- marked@0.3.6 |--
> mkdirp@0.5.1
> | -- minimist@0.0.8 +-- mime@1.3.4 +-- minicap-prebuilt@1.4.0 +--
> minimatch@3.0.3 |-- brace-expansion@1.1.7
> | +-- balanced-match@0.4.2
> | -- concat-map@0.0.1 +-- my-local-ip@1.0.0 +-- node-uuid@1.4.8 +--
> openid@2.0.6 +-- passport@0.3.2 | +-- passport-strategy@1.0.0 |--
> pause@0.0.1
> +-- passport-oauth2@1.4.0
> | +-- oauth@0.9.15
> | -- uid2@0.0.3 +-- passport-saml@0.15.0 | +-- q@1.1.2 | +--
> xml-crypto@0.8.5 | | +-- xmldom@0.1.19 | |-- xpath.js@1.0.7
> | +-- xml-encryption@0.7.4
> | | +-- async@0.2.10
> | | +-- ejs@0.8.8
> | | +-- node-forge@0.2.24
> | | -- xpath@0.0.5 | +-- xmlbuilder@2.5.2 | |-- lodash@3.2.0
> | -- xmldom@0.1.27 +-- protobufjs@3.8.2 | +-- ascli@0.3.0 | | +--
> colour@0.7.1 | |-- optjs@3.2.2
> | -- bytebuffer@3.5.5 | +-- bufferview@1.0.1 |-- long@2.4.0
> +-- proxy-addr@1.1.4
> | +-- forwarded@0.1.0
> | -- ipaddr.js@1.3.0 +-- pug@2.0.0-beta9 | +-- pug-code-gen@1.1.1 | | +--
> constantinople@3.1.0 | | | +-- acorn@3.3.0 | | |-- is-expression@2.1.0
> | | +-- doctypes@1.1.0
> | | +-- js-stringify@1.0.2
> | | +-- pug-attrs@2.0.2
> | | +-- pug-error@1.3.2
> | | +-- void-elements@2.0.1
> | | -- with@5.1.1 | |-- acorn-globals@3.1.0
> | | -- acorn@4.0.11 | +-- pug-filters@2.1.2 | | +-- clean-css@3.4.25 | |
> | +-- commander@2.8.1 | | |-- source-map@0.4.4
> | | | -- amdefine@1.0.1 | | +-- jstransformer@1.0.0 | | | +--
> is-promise@2.1.0 | | |-- promise@7.1.1
> | | | -- asap@2.0.5 | | +-- pug-walk@1.1.2 | | +-- resolve@1.3.3 | | |--
> path-parse@1.0.5
> | | -- uglify-js@2.8.22 | | +-- source-map@0.5.6 | | +--
> uglify-to-browserify@1.0.2 | |-- yargs@3.10.0
> | | +-- camelcase@1.2.1
> | | +-- cliui@2.1.0
> | | | +-- center-align@0.1.3
> | | | | +-- align-text@0.1.4
> | | | | | +-- kind-of@3.1.0
> | | | | | | -- is-buffer@1.1.5 | | | | | +-- longest@1.0.1 | | | | |--
> repeat-string@1.6.1
> | | | | -- lazy-cache@1.0.4 | | | +-- right-align@0.1.3 | | |--
> wordwrap@0.0.2
> | | -- window-size@0.1.0 | +-- pug-lexer@2.3.2 | | +--
> character-parser@2.2.0 | | |-- is-regex@1.0.4
> | | | -- has@1.0.1 | | |-- function-bind@1.1.0
> | | -- is-expression@3.0.0 | |-- acorn@4.0.11
> | +-- pug-linker@2.0.3
> | +-- pug-load@2.0.6
> | | -- object-assign@4.1.1 | +-- pug-parser@2.0.2 | |-- token-stream@0.0.1
> | +-- pug-runtime@2.0.3
> | -- pug-strip-comments@1.0.2 +-- request@2.81.0 | +-- aws-sign2@0.6.0 |
> +-- aws4@1.6.0 | +-- caseless@0.12.0 | +-- combined-stream@1.0.5 | |--
> delayed-stream@1.0.0
> | +-- extend@3.0.0
> | +-- forever-agent@0.6.1
> | +-- form-data@2.1.4
> | | -- asynckit@0.4.0 | +-- har-validator@4.2.1 | | +-- ajv@4.11.7 | | |
> +-- co@4.6.0 | | |-- json-stable-stringify@1.0.1
> | | | -- jsonify@0.0.0 | |-- har-schema@1.0.5
> | +-- hawk@3.1.3
> | | +-- boom@2.10.1
> | | +-- cryptiles@2.0.5
> | | +-- hoek@2.16.3
> | | -- sntp@1.0.9 | +-- http-signature@1.1.1 | | +-- assert-plus@0.2.0 |
> | +-- jsprim@1.4.0 | | | +-- assert-plus@1.0.0 | | | +-- extsprintf@1.0.2
> | | | +-- json-schema@0.2.3 | | |-- verror@1.3.6
> | | -- sshpk@1.13.0 | | +-- assert-plus@1.0.0 | | +-- bcrypt-pbkdf@1.0.1
> | | +-- ecc-jsbn@0.1.1 | | +-- getpass@0.1.6 | | |-- assert-plus@1.0.0
> | | +-- jodid25519@1.0.2
> | | +-- jsbn@0.1.1
> | | -- tweetnacl@0.14.5 | +-- is-typedarray@1.0.0 | +-- isstream@0.1.2 |
> +-- json-stringify-safe@5.0.1 | +-- mime-types@2.1.15 | +--
> oauth-sign@0.8.2 | +-- performance-now@0.2.0 | +-- stringstream@0.0.5 |
> +-- tough-cookie@2.3.2 | |-- punycode@1.4.1
> | +-- tunnel-agent@0.6.0
> | -- uuid@3.0.1 +-- request-progress@2.0.1 |-- throttleit@1.0.0
> +-- rethinkdb@2.3.3
> +-- semver@5.3.0
> +-- serve-favicon@2.4.2
> | -- ms@1.0.0 +-- serve-static@1.12.1 +-- socket.io@1.4.8 | +--
> debug@2.2.0 | |-- ms@0.7.1
> | +-- engine.io@1.6.11
> | | +-- accepts@1.1.4
> | | | +-- mime-types@2.0.14
> | | | | -- mime-db@1.12.0 | | |-- negotiator@0.4.9
> | | +-- base64id@0.1.0
> | | +-- debug@2.2.0
> | | | -- ms@0.7.1 | | +-- engine.io-parser@1.2.4 | | | +-- after@0.8.1 |
> | | +-- arraybuffer.slice@0.0.6 | | | +-- base64-arraybuffer@0.1.2 | | |
> +-- blob@0.0.4 | | | +-- has-binary@0.1.6 | | | |-- isarray@0.0.1
> | | | -- utf8@2.1.0 | |-- ws@1.1.0
> | +-- has-binary@0.1.7
> | | -- isarray@0.0.1 | +-- socket.io-adapter@0.4.0 | | +-- debug@2.2.0 |
> | |-- ms@0.7.1
> | | -- socket.io-parser@2.2.2 | | +-- debug@0.7.4 | | +-- isarray@0.0.1 |
> |-- json3@3.2.6
> | +-- socket.io-client@1.4.8
> | | +-- backo2@1.0.2
> | | +-- component-bind@1.0.0
> | | +-- component-emitter@1.2.0
> | | +-- debug@2.2.0
> | | | -- ms@0.7.1 | | +-- engine.io-client@1.6.11 | | | +--
> component-inherit@0.0.3 | | | +-- debug@2.2.0 | | | |-- ms@0.7.1
> | | | +-- has-cors@1.1.0
> | | | +-- parsejson@0.0.1
> | | | +-- parseqs@0.0.2
> | | | +-- ws@1.0.1
> | | | +-- xmlhttprequest-ssl@1.5.1
> | | | -- yeast@0.1.2 | | +-- indexof@0.0.1 | | +-- object-component@0.0.3
> | | +-- parseuri@0.0.4 | | |-- better-assert@1.0.2
> | | | -- callsite@1.0.0 | |-- to-array@0.1.4
> | -- socket.io-parser@2.2.6 | +-- benchmark@1.0.0 | +--
> component-emitter@1.1.2 | +-- debug@2.2.0 | |-- ms@0.7.1
> | +-- isarray@0.0.1
> | -- json3@3.3.2 +-- split@1.0.0 |-- through@2.3.8
> +-- stf-appstore-db@1.0.0
> +-- stf-browser-db@1.0.2
> +-- stf-device-db@1.2.0
> +-- stf-syrup@1.0.0
> | +-- bluebird@1.1.1
> | -- lodash@2.4.2 +-- stf-wiki@1.0.0 +-- swagger-express-mw@0.7.0 |--
> swagger-node-runner@0.7.3
> | +-- bagpipes@0.1.0
> | | +-- jspath@0.3.4
> | | +-- lodash@3.10.1
> | | +-- machinepack-http@2.4.0
> | | | +-- lodash@3.10.1
> | | | +-- machine@10.4.0
> | | | | +-- convert-to-ecmascript-compatible-varname@0.1.5
> | | | | +-- lodash@3.10.1
> | | | | +-- object-hash@0.3.0
> | | | | +-- rttc@7.4.0
> | | | | | -- lodash@3.10.1 | | | |-- switchback@2.0.2
> | | | | -- lodash@3.10.1 | | |-- machinepack-urls@4.1.0
> | | | +-- lodash@3.10.1
> | | | -- machine@9.1.2 | | | +-- rttc@4.5.2 | | |-- switchback@1.1.3
> | | | -- lodash@2.4.2 | | +-- mustache@2.3.0 | |-- pipeworks@1.3.1
> | +-- config@1.25.1
> | | -- json5@0.4.0 | +-- cors@2.8.3 | +-- js-yaml@3.8.3 | |--
> esprima@3.1.3
> | +-- lodash@3.10.1
> | +-- multer@1.3.0
> | | +-- append-field@0.1.0
> | | +-- busboy@0.2.14
> | | | +-- dicer@0.2.5
> | | | | -- streamsearch@0.1.2 | | |-- readable-stream@1.1.14
> | | | +-- isarray@0.0.1
> | | | -- string_decoder@0.10.31 | | +-- concat-stream@1.6.0 | | | +--
> readable-stream@2.2.9 | | | | +-- buffer-shims@1.0.0 | | | | +--
> process-nextick-args@1.0.7 | | | | +-- string_decoder@1.0.0 | | | |--
> util-deprecate@1.0.2
> | | | -- typedarray@0.0.6 | | +-- object-assign@3.0.0 | |-- xtend@4.0.1
> | -- sway@1.0.0 | +-- js-base64@2.1.9 | +-- js-yaml@3.8.3 | |--
> esprima@3.1.3
> | +-- json-refs@2.1.6
> | | +-- js-yaml@3.8.3
> | | | -- esprima@3.1.3 | | +-- path-loader@1.0.2 | | |-- superagent@3.5.2
> | | | +-- component-emitter@1.2.1
> | | | +-- cookiejar@2.1.1
> | | | -- readable-stream@2.2.9 | | |-- string_decoder@1.0.0
> | | +-- slash@1.0.0
> | | -- uri-js@2.1.1 | +-- json-schema-faker@0.2.16 | | +-- chance@1.0.6 |
> | +-- deref@0.6.4 | | |-- deep-extend@0.4.1
> | | +-- faker@3.1.0
> | | -- randexp@0.4.5 | | +-- discontinuous-range@1.0.0 | |-- ret@0.1.14
> | +-- native-promise-only@0.8.1
> | +-- path-to-regexp@1.7.0
> | | -- isarray@0.0.1 | +-- swagger-methods@1.0.0 | +--
> swagger-schema-official@2.0.0-bab6bed |-- z-schema@3.18.2
> | +-- lodash.get@4.4.2
> | +-- lodash.isequal@4.5.0
> | -- validator@6.3.0 +-- temp@0.8.3 | +-- os-tmpdir@1.0.2 |-- rimraf@2.2.8
> +-- transliteration@1.5.3
> | -- yargs@6.6.0 | +-- camelcase@3.0.0 | +-- cliui@3.2.0 | |--
> wrap-ansi@2.1.0
> | +-- decamelize@1.2.0
> | +-- get-caller-file@1.0.2
> | +-- os-locale@1.4.0
> | | -- lcid@1.0.0 | |-- invert-kv@1.0.0
> | +-- read-pkg-up@1.0.1
> | | +-- find-up@1.1.2
> | | | +-- path-exists@2.1.0
> | | | -- pinkie-promise@2.0.1 | | |-- pinkie@2.0.4
> | | -- read-pkg@1.1.0 | | +-- load-json-file@1.1.0 | | | +--
> graceful-fs@4.1.11 | | | +-- parse-json@2.2.0 | | | |-- error-ex@1.3.1
> | | | | -- is-arrayish@0.2.1 | | | +-- pify@2.3.0 | | |-- strip-bom@2.0.0
> | | | -- is-utf8@0.2.1 | | +-- normalize-package-data@2.3.8 | | | +--
> hosted-git-info@2.4.2 | | | +-- is-builtin-module@1.0.0 | | | |--
> builtin-modules@1.1.1
> | | | -- validate-npm-package-license@3.0.1 | | | +-- spdx-correct@1.0.2
> | | | |-- spdx-license-ids@1.2.2
> | | | -- spdx-expression-parse@1.0.4 | |-- path-type@1.1.0
> | +-- require-directory@2.1.1
> | +-- require-main-filename@1.0.1
> | +-- set-blocking@2.0.0
> | +-- string-width@1.0.2
> | | +-- code-point-at@1.1.0
> | | -- is-fullwidth-code-point@1.0.0 | |-- number-is-nan@1.0.1
> | +-- which-module@1.0.0
> | +-- y18n@3.2.1
> | -- yargs-parser@4.2.1 |-- camelcase@3.0.0
> +-- url-join@1.1.0
> +-- utf-8-validate@1.2.2
> +-- ws@1.1.4
> | +-- options@0.0.6
> | -- ultron@1.0.2-- zmq@2.15.3
> `-- nan@2.3.5
>
> npm ERR! Linux 4.4.0-72-generic
> npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "install" "-g" "stf"
> npm ERR! node v7.9.0
> npm ERR! npm v4.2.0
>
> npm ERR! path /usr/lib/node_modules
> npm ERR! code EACCES
> npm ERR! errno -13
> npm ERR! syscall access
>
> npm ERR! Error: EACCES: permission denied, access '/usr/lib/node_modules'
> npm ERR! { Error: EACCES: permission denied, access '/usr/lib/node_modules'
> npm ERR! errno: -13,
> npm ERR! code: 'EACCES',
> npm ERR! syscall: 'access',
> npm ERR! path: '/usr/lib/node_modules' }
> npm ERR!
> npm ERR! Please try running this command again as root/Administrator.
>
> npm ERR! Please include the following file with any support request:
>
> npm ERR! /home/tft/.npm/_logs/2017-04-21T05_34_12_660Z-debug.log
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/578#issuecomment-296075418>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_d7AMlj_jINDveQG0fym0ZUchI-Dks5ryEATgaJpZM4NAAX2>
> .
>
  <!-- *Before creating an issue please make sure you are using the latest version of STF.* -->

**What is the issue or idea you have?**

This is not an issue but rather posted here for future reference.

Some ASUS devices fail to become active in the STF UI. They stay disconnected all the time.

Looking at STF logs, the following can be seen:

> Error: Not found; no service started.

Looking at logcat, the following message can be seen:

> App Op not allow to start app jp.co.cyberagent.stf/10162

This is caused by the [ASUS Auto-start Manager](https://www.asus.com/support/faq/1011266). Follow the instructions in that link to enable STFService. Everything should then work OK.

**Does it only happen on a specific device? Please run `adb devices -l` and paste the corresponding row.**

> redacted       device usb:redacted product:WW_Phone model:ASUS_X014D device:ASUS_X014D_1

  The installation process uses prebuilds resources. You need to clean first.
Run 'gulp clean' or './node_modules/.bin/gulp clean' if you don't have it
installed.

Also there's no auto reload, only auto build. You meed to refresh manually
after changing things.
On Mon, Apr 17, 2017 at 15:39 Benedict(이호정) <notifications@github.com>
wrote:

> *What is the issue or idea you have?*
> In development environment, autoreload didn't work
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
>
>    1. git clone https://github.com/openstf/stf.git
>    2. npm inatall
>    3. npm link
>    4. stf local
>    5. modify/add stf frontend codes
>    eg.
>    res/app/components/xxx/xxx-service.js
>    res/app/xxx/index.js
>    res/app/xxx/xxx-controller.js
>    res/app/xxx/xxx.pug
>
> *What is the expected behavior?*
> auto reload stf server.
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> no message
>
> *Please run stf doctor and paste the output here.*
>
> INF/util:doctor 61099 [*] OS Arch: x64
> INF/util:doctor 61099 [*] OS Platform: darwin
> INF/util:doctor 61099 [*] OS Platform: 15.6.0
> INF/util:doctor 61099 [*] Using Node 6.10.2
> INF/util:doctor 61099 [*] Using RethinkDB client 2.3.3
> INF/util:doctor 61099 [*] Using ZeroMQ 4.2.0
> WRN/util:doctor 61099 [*] Executable was not found
> INF/util:doctor 61099 [*] GraphicsMagick 1.3.25
> INF/util:doctor 61099 [*] Local ADB 1.0.36
>
> INF/util:doctor 61099 [*] Local RethinkDB server 2.3.5
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/576>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SBK4iB8PO93nun3WGWgDs4uPiGcks5rwwk4gaJpZM4M-6rY>
> .
>
  Are you using the master branch? It has a few related fixes.

Otherwise please send the apk to me.
On Mon, Apr 17, 2017 at 11:01 wangpengfei100 <notifications@github.com>
wrote:

> *What is the issue or idea you have?*
> When I using "App Upload" a APK to my test phone, Faild.
> Err Log as follow:
>
> INF/storage:temp 2091 [
> *] Uploaded "aqybfq.apk" to "/tmp/upload_7c0e32f0c313b7cd0cb92d4a361a3b51"
> ERR/storage:plugins:apk 2101 [*] Unable to read manifest of
> "38fa7aaa-164b-4b2c-b5c5-440e6e9709d7" Error: Invalid or unsupported zip
> format. No END header found
> at new ApkReader
> (/usr/local/lib/node_modules/stf/node_modules/adbkit-apkreader/lib/apkreader.js:27:17)
> at Function.ApkReader.readFile
> (/usr/local/lib/node_modules/stf/node_modules/adbkit-apkreader/lib/apkreader.js:16:14)
> at
> /usr/local/lib/node_modules/stf/lib/units/storage/plugins/apk/task/manifest.js:9:30
> at process._tickCallback (node.js:355:11)
>
> Thanks for your reply
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/575>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cf95IN77EZzCgrq99tm1h3yLpenks5rwsf6gaJpZM4M-zYh>
> .
>
  You need the git repository if you're changing things. Could be that you're modifying an installation you installed from NPM, which would not work as it doesn't include all resources.  Perhaps some day. None of us develops on Windows so it has the lowest
possible priority.
On Fri, Apr 14, 2017 at 15:00 wangpengfei100 <notifications@github.com>
wrote:

> *What is the issue or idea you have?*
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> *Please provide the steps to reproduce the issue.*
>
> *What is the expected behavior?*
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
> *Please run stf doctor and paste the output here.*
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/573>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bQVG7jFgGBBLNc8tWUb5viYImmUks5rvwtugaJpZM4M9e3h>
> .
>
  Seems like you did not do `npm install` after pulling the latest changes. Well, that's not STF. Can't help you with that. No I don't think so, I'd rather fix actual issues or build new features. If you're having trouble with dependencies, consider using Linux and the docker image we provide. Other than that you have to have your environment in proper working condition, honestly it's not our responsibility to help you with that.

As a last tip I would recommend doing `rm -rf /usr/local/lib/node_modules/stf` and reinstalling. That doesn't look right at all.  Not really, although you could connect to the app websocket that the ui
uses for everything else. You'd have to mimic the ui though. If you want to
try that, check chrome's network inspector, select the websocket, and check
the messages that are sent.

I feel like it's probably too mich hassle. Using minitouch directly would
be easier I think.

On Fri, Apr 7, 2017 at 13:45 Shayan Sayahi <notifications@github.com> wrote:

> I noticed that while running openstf, I can directly connect to a device's
> websocket address to stream the screen. Is the same thing possible with
> touch interactions?
>
> I know I can directly use minitouch, but it feels a bit too "low-level" if
> using it through openstf is exposed.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/571>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_djJxIhkyL3GbcnrNC-JFA1Y0vFxks5rtb9XgaJpZM4M2dA7>
> .
>
  It says you don't have the zeromq libs installed. Read the README, you need the required dependencies before installing. Sure. You can start by giving all the details about your system. Please do not remove the issue template like you've done in this case, you need to fill in the details. Try using your package manager to install it instead. Installing from source usually integrates poorly with the rest of the system. Once it's installed, reinstall stf from scratch and see if that works. If it does, you can try going back to the source install method if you like (but we won't help with that).  Sounds like a configuration issue. I'm guessing the HTTP 301 is for redirecting to HTTPS. This is pretty old so I'm closing this as it's probably no longer relevant. However, I'll just mention once more for anyone who may find this issue on Google that in 99% of all cases of screenshots not working, it has been caused either by a missing dependency, misconfigured environment (e.g. wrong `PATH`) or incorrectly configured STF.  Yes, this issue has been happening lately. I believe there may be a bug in the current version of ADB. Sometimes it adds a null byte in there, but it can also be something else like 0x03. Unfortunately, right now it means that you have to remove the invalid characters from your public key. Also, it can be more than one byte. I've seen two in one case. Possible buffer length issue in ADB's base64 encoding I suppose. However, it can also be after the space. Looking at the [code](https://github.com/android/platform_system_core/blob/9ef4417c8ea24cfe561103902a8eb9fa455d1677/adb/adb_auth_host.cpp#L93), it seems like [EVP_EncodedLength](https://commondatastorage.googleapis.com/chromium-boringssl-docs/base64.h.html#EVP_EncodedLength) and [EVP_EncodeBlock](https://commondatastorage.googleapis.com/chromium-boringssl-docs/base64.h.html#EVP_EncodeBlock) include a final null byte in the output, which was not the case before (or it was accounted for). This change seems to have been caused by the switch to BoringSSL (compared to mincrypt earlier). I don't think it's working as intended, but it's the way it is right now. Will have to adjust the validation to account for it. Does not explain the issue with multiple unexpected bytes, though. I'm thinking that EVP_EncodedLength may actually not be returning an exact number, but rather a safe upper bound. That would explain the remaining issues. For now, this specific issue has been solved by https://github.com/openstf/adbkit/commit/715ec81639b000655635b8c5fbd92baa237ca929. STF's adbkit has been updated.

However, there may be even more malformed keys out there, with multiple unexpected values. Let me know if there are any real keys that don't go through. Are you 100% sure your adbkit is really up to date? Yep. With the latest STF we now ignore the null byte.

On Mon, Aug 21, 2017 at 18:27 yuzhidi <notifications@github.com> wrote:

> the words "Sometimes it adds a null byte in there" means like null in the
> line: 000002b0: 4545 4867 6a51 4541 4151 413d 0020 7365 EEHgjQEAAQA=. se ,
> right ?
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/568#issuecomment-323694095>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bJ3Eq3SK_XSTw1y1x4u_ax-Kt1nks5saU2PgaJpZM4M0aAo>
> .
>
  That is expected behavior right now. It upserts the information on every
launch.
On Wed, Apr 5, 2017 at 19:14 viktors89 <notifications@github.com> wrote:

> *What is the issue or idea you have?*
>
> I changed in rethinkdb the model of all devices in the database so that
> the name of the phone displayed is clear (some devices had weird model
> names), but the moment I disconnected a device and connected it again, this
> value resets to the previous one that confuses people.
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
> Happens in all devices
>
> *Please provide the steps to reproduce the issue.*
>
>    1. Connect a phone to OpenSTF
>    2. Connect to the rethinkdb admin
>    3. Make a query to change the model name of the device connected in
>    step 1
>    4. Refresh and check that the model name changed succesfully
>    5. Disconnect the device
>    6. Connect the device
>
> *What is the expected behavior?*
>
> Model name changed in step 3 doesn't change when disconnecting and
> connecting
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/567>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZMM2DndqKelJYpSxbYD4g9WyGUdks5rs2l0gaJpZM4M0CBd>
> .
>
 Make your own stf-device-db and replace the built-in one :) Might have to
fork stf to change package.json though.

For models that are in the "database", it does show the name. Unfortunately
it has not been updated for quite a while and never contained all possible
devices anyway.

On Wed, Apr 5, 2017 at 19:48 viktors89 <notifications@github.com> wrote:

> Thanks for the quick reply!
>
> Is there anyway I can change these values so that they stay permanently in
> the db? (Or any workaround that would just let users see quickly which
> device is which without knowledge of device model)
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/567#issuecomment-291824408>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cr-2KhkbyV68KcWDaVyu2LLykJKks5rs3GRgaJpZM4M0CBd>
> .
>
 If you don't have any devices with a known model, you can try running 'stf
generate-fake-device' to load some random data into the device list to see
how it looks.

On Wed, Apr 5, 2017 at 19:57 Simo Kinnunen <simo@shoqolate.com> wrote:

> Make your own stf-device-db and replace the built-in one :) Might have to
> fork stf to change package.json though.
>
> For models that are in the "database", it does show the name.
> Unfortunately it has not been updated for quite a while and never contained
> all possible devices anyway.
>
> On Wed, Apr 5, 2017 at 19:48 viktors89 <notifications@github.com> wrote:
>
> Thanks for the quick reply!
>
> Is there anyway I can change these values so that they stay permanently in
> the db? (Or any workaround that would just let users see quickly which
> device is which without knowledge of device model)
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/567#issuecomment-291824408>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cr-2KhkbyV68KcWDaVyu2LLykJKks5rs3GRgaJpZM4M0CBd>
> .
>
>
  I don't get it. The error you're seeing simply means that there's something already listening on a port, meaning that you either have two stf instances running or some other program is running there. What exactly is the issue if not that?  No. Read https://github.com/openstf/STFService.apk/issues/12.  This is a tracking issue for Android O and will be kept open until the final version is released.

## Android O Developer Preview 3:

Not working. Same status as Developer Preview 2.

## Android O Developer Preview 2:

Not working. This is more trouble than usual, [STFService.apk](https://github.com/openstf/STFService.apk) may need a somewhat large refactor. There are also symbol issues with [minicap](https://github.com/openstf/minicap), the code running on Nexus 5X doesn't match the released android-o-preview-2 AOSP branch.

## Android O Developer Preview 1:

The master branch works as of 43f0341297fea60de8f4dc30e922d9c343b359a1. Either use the openstf/stf:latest docker image or install from source. Thanks, I'll try to check during the weekend!
On Fri, Apr 7, 2017 at 13:14 bgcelite <notifications@github.com> wrote:

> Android O source code already release:
>
> https://android.googlesource.com/platform/external/selinux/+/android-o-preview-1
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/562#issuecomment-292429826>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cH8At2aUxJY1GBHxP_eNofS6A-Sks5rtbgrgaJpZM4Mkn-0>
> .
>
 Well, I was able to compile it with some minor changes. However, the error remains the same:

> CANNOT LINK EXECUTABLE "/data/local/tmp/minicap-devel/minicap": cannot locate symbol "_ZN7android11BufferQueue17createBufferQueueEPNS_2spINS_22IGraphicBufferProducerEEEPNS1_INS_22IGraphicBufferConsumerEEERKNS1_INS_19IGraphicBufferAllocEEE" referenced by "/data/local/tmp/minicap-devel/minicap.so"...
Aborted

Unfortunately this means that the device does not run the exact `android-o-preview-1` branch that was published. I'm using the bullhead-opp1.170223.012-factory-338a95b1 build for my Nexus 5X. It seems like the symbol on the device is:

> `_ZN7android11BufferQueue17createBufferQueueEPNS_2spINS_22IGraphicBufferProducerEEEPNS1_INS_22IGraphicBufferConsumerEEERKNS1_INS_19IGraphicBufferAllocEEEb`

Which translates to:

> `android::BufferQueue::createBufferQueue(android::sp<android::IGraphicBufferProducer>*, android::sp<android::IGraphicBufferConsumer>*, android::sp<android::IGraphicBufferAlloc> const&, bool)`

Whereas in android-o-preview-1, it's:

> `_ZN7android11BufferQueue17createBufferQueueEPNS_2spINS_22IGraphicBufferProducerEEEPNS1_INS_22IGraphicBufferConsumerEEERKNS1_INS_19IGraphicBufferAllocEEE`

> `android::BufferQueue::createBufferQueue(android::sp<android::IGraphicBufferProducer>*, android::sp<android::IGraphicBufferConsumer>*, android::sp<android::IGraphicBufferAlloc> const&)`

So there's a new boolean flag. Wonder what it is. It's definitely not there in the AOSP source. Not in master branch either. I was able to get use an ugly trick to access the symbol. However, it seems that SurfaceComposerClient's memory layout is different from AOSP and that's causing a segfault. I have it working now :) The master branch now supports Android O. As of Developer Preview 2 everything's broken. Minicap needs a recompile but they haven't released the actual source code they use, the symbols are incorrect. STFService is having weird issues where connections and listeners keep dying. Thanks, I'll clone it and see how things go. Hmm, nope. Their released source code doesn't match what's actually on the devices (Nexus 5X in my case). Seems like a class may have changed and the vtable is different. Specifically, one of these causes a segfault:

```
mBufferConsumer->setDefaultBufferSize(targetWidth, targetHeight);
mBufferConsumer->setDefaultBufferFormat(android::PIXEL_FORMAT_RGBA_8888);
```

```
05-26 15:27:16.680  9374  9374 F libc    : Fatal signal 11 (SIGSEGV), code 1, fault addr 0x438 in tid 9374 (minicap)
05-26 15:27:16.718  9379  9379 W crash_dump64: type=1400 audit(0.0:561): avc: denied { search } for name="tmp" dev="dm-2" ino=654082 scontext=u:r:crash_dump:s0 tcontext=u:object_r:shell_data_file:s0 tclass=dir permissive=0
05-26 15:27:16.721  9379  9379 W crash_dump64: type=1400 audit(0.0:562): avc: denied { search } for name="tmp" dev="dm-2" ino=654082 scontext=u:r:crash_dump:s0 tcontext=u:object_r:shell_data_file:s0 tclass=dir permissive=0
05-26 15:27:16.726  9379  9379 I crash_dump64: obtaining output fd from tombstoned
05-26 15:27:16.727   601   601 I /system/bin/tombstoned: received crash request for pid 9374
05-26 15:27:16.731  9379  9379 I crash_dump64: performing dump of process 9374 (target tid = 9374)
05-26 15:27:16.731  9379  9379 F DEBUG   : *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
05-26 15:27:16.731  9379  9379 F DEBUG   : Build fingerprint: 'google/bullhead/bullhead:O/OPP2.170420.019/4021594:user/release-keys'
05-26 15:27:16.731  9379  9379 F DEBUG   : Revision: 'rev_1.0'
05-26 15:27:16.731  9379  9379 F DEBUG   : ABI: 'arm64'
05-26 15:27:16.731  9379  9379 F DEBUG   : pid: 9374, tid: 9374, name: minicap  >>> /data/local/tmp/minicap-devel/minicap <<<
05-26 15:27:16.731  9379  9379 F DEBUG   : signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0x438
05-26 15:27:16.731  9379  9379 F DEBUG   : Cause: null pointer dereference
05-26 15:27:16.732  9379  9379 F DEBUG   :     x0   0000000000000000  x1   0000000000000081  x2   000000007fffffff  x3   0000000000000000
05-26 15:27:16.732  9379  9379 F DEBUG   :     x4   0000000000000000  x5   0000000000000000  x6   0000000000000000  x7   0000000000000000
05-26 15:27:16.732  9379  9379 F DEBUG   :     x8   0000000000000000  x9   0000000000000088  x10  0000000000000001  x11  0000007d8e0552a8
05-26 15:27:16.732  9379  9379 F DEBUG   :     x12  8000000000000000  x13  8000000000000000  x14  0000000000000000  x15  0000000000000000
05-26 15:27:16.732  9379  9379 F DEBUG   :     x16  0000007d8e9774c8  x17  0000007d8eb5a81c  x18  0000007d8eaf2b00  x19  0000000000000438
05-26 15:27:16.732  9379  9379 F DEBUG   :     x20  0000007d8e054008  x21  0000007d8e0391e0  x22  0000007d8e976000  x23  0000007d8e03f868
05-26 15:27:16.732  9379  9379 F DEBUG   :     x24  0000007d8ef76030  x25  ffffffffffffffff  x26  0000000000001268  x27  0000007d8e054000
05-26 15:27:16.732  9379  9379 F DEBUG   :     x28  0000007d8eaf01fc  x29  0000007ffadb0ae0  x30  0000007d8e90ef08
05-26 15:27:16.732  9379  9379 F DEBUG   :     sp   0000007ffadb0a90  pc   0000007d8e90ef64  pstate 0000000060000000
05-26 15:27:16.741  9379  9379 W crash_dump64: type=1400 audit(0.0:563): avc: denied { search } for name="tmp" dev="dm-2" ino=654082 scontext=u:r:crash_dump:s0 tcontext=u:object_r:shell_data_file:s0 tclass=dir permissive=0
05-26 15:27:16.746  9379  9379 F DEBUG   :
05-26 15:27:16.746  9379  9379 F DEBUG   : backtrace:
05-26 15:27:16.746  9379  9379 F DEBUG   :     #00 pc 0000000000067f64  /system/lib64/libgui.so (_ZN7android19BufferQueueConsumer18getReleasedBuffersEPm+308)
05-26 15:27:16.746  9379  9379 F DEBUG   :     #01 pc 0000000000002728  /data/local/tmp/minicap-devel/minicap.so
05-26 15:27:16.746  9379  9379 F DEBUG   :     #02 pc 000000000000afc0  /data/local/tmp/minicap-devel/minicap
05-26 15:27:16.746  9379  9379 F DEBUG   :     #03 pc 000000000001b5dc  /system/lib64/libc.so (__libc_init+88)
05-26 15:27:16.746  9379  9379 F DEBUG   :     #04 pc 000000000000bc6c  /data/local/tmp/minicap-devel/minicap
``` It seems that `IWindowManager.watchRotation()` (which STFService uses) no longer works, the watcher never gets called. I'm a bit husy now but I'll check when I can.
On Mon, Jun 12, 2017 at 12:43 kennethzhu <notifications@github.com> wrote:

> The news said that Android O Preview 3 released. Wish that STF could
> support this release. ^^
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/562#issuecomment-307683619>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YNwueDku3CQpmdiyttYPbzFlgxGks5sDLPDgaJpZM4Mkn-0>
> .
>
 No changes since Preview 2, Preview 3 is still broken. Guess we have to start looking into adding workarounds. It will be at least several days before I can look into this, but @thinkhy your findings are correct. In the past I did manage to update minicap for newer developer previews, however that required removing a few lines that are relatively important, so I stopped. Minicap now works as of the latest release, but STFService is still an issue. Figured out a way to hack STFService a bit to make it happy. Latest master and 3.1.0 now support Android 8.0.  Maybe there's a setting like in https://github.com/openstf/stf/issues/407#issuecomment-247852532? Interesting. Thanks for the detailed information! Also, note that since the maker has been extremely lazy and hasn't even set the USB serial number (as is evident from the value `0123456789ABCDEF`), you can only have one of these devices connected in STF since it's used as a unique key. Yeah you can't really change the serial number. If you have the skills, you could try writing a proxy that sits between stf and adb. That proxy would pretend to be adb and somehow map each device to a unique ID, possibly by making queries on the side and using the IMEI number, WIFI mac address, or just a persistent text file for the ID. That's the only way to do it right now without modifying STF.

Modifying STF is tricky since none of that information is known at the time the device is plugged in. Initially only the USB serial number is known. STF provides information in real time so it has to deal with the information it's able to access.  If there's a bug you've found please submit a PR. All I can say is that it
has (nearly) always worked for me.
On Wed, Mar 22, 2017 at 18:49 liuang68 <notifications@github.com> wrote:

> @0x88l <https://github.com/0x88l> Sorry, according to what you said, I
> did not find temp.js in lib/unit/storage/temp.js,What can be done in
> detail?thx
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/560#issuecomment-288348078>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_aWVArpLBr6M1uvWUh_yCGq5lJSMks5roO6cgaJpZM4MiEId>
> .
>
  They are in STFService.apk, but depending on what you want to do you can just use the built-in `input` command. Well our version doesn't really support unicode either. I think Appium has something you can use. I can't help you with this any further but please update the issue with your solution if you find one.  There's an option to decrease the JPG quality in master. Other than that I personally will definitely not spend time on playing with color depths and whatever. I would perhaps accept a PR that does that, though.

STF was made for local networks where there's plenty of bandwidth available. Check --help.  You're right, the files are backwards. However, since they have the right content, everything still works as long as the units are launched via the main `bin/stf` executable.  Please send the .apk to me. My address is simo at openstf dot io. Ok, fixed. For some reason the manifest was slightly malformed. A field that was supposed to contain a size and is usually `8` was `0` even though the content was still there. Weird. The parser now uses a hardcoded size if that happens.  I can't find any of them for sale on Aliexpress or Ebay. Therefore it is unlikely that we'll ever be able to do anything about them. Physical access is needed. Thank you for your kind words. I would be happy to accept the devices if you'd like to send them. I cannot guarantee that I'll be able to make them work, but I will at least try. Please send me an email to simo at openstf dot io and we'll discuss details.  It can't connect because the container's network is isolated from everything else by default. There are many many ways to link things together, but if you have no idea, try following https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md to have an idea of what flags you might need. An easy way to try it out is to add `--net host` an an option to `docker run`.

Note that we do not support running `stf local` w/ docker. It's for development use only and may or may not work, we never deploy with it.  Remove the prebuilt resources and your changes will take effect. If you
have gulp installed, run `gulp clean`. If not, you can run
`./node_modules/.bin/gulp clean` to do the same with the bundled gulp.

On Thu, Mar 2, 2017 at 3:24 PM, Bob <notifications@github.com> wrote:

> I now need to secondary development of STF, see the source code and found
> that the front-end procedures using Webpack package. Would like to ask you,
> in the project how to make their own changes in the JS source code
> effective?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/551>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RIbp2l3iN5Q2sbWt-ZDc2BHM-Umks5rhmCugaJpZM4MQmUB>
> .
>
  Ideas on how to do that are welcome.

On Wed, Mar 1, 2017 at 15:31 like <notifications@github.com> wrote:

> I have an idea, that maybe the user can listen the audio inside the phone
> maybe awesome.
> So, did you have tried this?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/550>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Z9bqtkBOXa00f1uq96mWpzPgwGFks5rhRDdgaJpZM4MPRZu>
> .
>
 I'm closing this as a duplicate of #22.  Closing as this is pretty old. @Hao8816 's answer is good, or alternatively you may want to `rm -rf node_modules` once.  This issue is related to this [PR](https://github.com/openstf/stf/pull/474). Previously, `--save-dir` option for storage service was not working. This PR allows to use `--save-dir` options to store all screenshot in persistent storage. 

You must be using [this](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md#stf-storage-tempservice) stf-storage unit file. This is using `--save-dir` as `/data` directory. `stf` user in docker container does not have root access so I am guessing that writing on `/data` directory is forbidden. One simple workaround is to delete `--save-dir /data` from your `stf-storage` unit file. or better solution will be to use a directory where `stf` user has write access. Great, please close issues when solved :)  We don't speak Chinese. I'm not sure what your issue is even after trying to use Google Translate. Please offer more details in English. I think this has been fixed for quite a while now.  If your developers are willing to do an ssh port forward before running adb
connect, that may also be an option. Or, you can set up a TCP reverse proxy
somewhere that maps connections to the right device port, and then modify
the connect url pattern. If you map the ports 1:1, modifying the pattern
may be all you need. Otherwise you may need to write some code to look up
the right device.

The issue with adb connect is that it doesn't tell the server which device
it wanted to connect to. Therefore you can only differentiate devices by
the destination port/IP. That's why everything but adb connect goes through
nginx, and that's also why it requires you to open more ports. But by using
one of tge two methods above, and perhaps writing some code of your own to
do the ip/port mapping, it's possible to have every client connect to a
single machine.

In general we do not provide detailed help with network configuration and
connectivity, it's too time consuming and really annoying to do without
understanding the way your network is set up. So, in principle, that part
is left to you.

On Thu, Feb 23, 2017 at 17:44 denis99999 <notifications@github.com> wrote:

> Is it possible to have an answer to my intial question : knowing that in
> fulll deployment architecture a client has an ADB direct access to the STF
> provider, and with the assumption that a VPN is required between the STF
> server and the STF provider, and so between the client and the STF provider
> for ADB traffic, do you have some recommendations about network
> configuration to deploy ?
> Thanks.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/546#issuecomment-281930401>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_TGixZ2gBAo6ngEf-fORvXTldoHFks5rfUbTgaJpZM4MIsVR>
> .
>
 I'm not sure why you've decided to include the ip address in the URL at
all. Our docs definitely don't say anything about needing to do that. I'd
just give it some sort of a name (e.g. buildingname-5f-001). The only
reason why you'd include the ip is if you wanted to capture it and use in
in proxy_pass... but that would allow anyone to specify any ip and expose
your network. That's a bit of an issue with the dynamic port range as well,
but you can change the regex if needed, at least.

On Fri, Feb 24, 2017 at 19:03 denis99999 <notifications@github.com> wrote:

> Regarding the work around I used to get screen displayed through a VPN,
> that is specifying at provider side the public IP address of the server
> into the "screen-ws-url-pattern" parameter, I made a network trace and it
> seems the provider never establishes a connection to the server using this
> public IP address, so I suppose the "screen-ws-url-pattern" information is
> transmitted to the server through the VPN to be processed at server side,
> may you confirm that to me please ?
>
> If it is well the case so it is satisfactory for me because the VPN
> principle would be not violated by a websocket flow which would bypass the
> VPN.
>
> Nevertheless, don't you think it would be more logical to specify into the
> "screen-ws-url-pattern" parameter only the IP addresses of the interfaces
> used by the provider and the server to communicate ?
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/546#issuecomment-282252811>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UpCKmoFjmMcE6DOXjLHezPvtp4eks5rfqrTgaJpZM4MIsVR>
> .
>
  You have provided no details. There is no way to help you.  Those ports will require root permission. Use `sudo` while running `stf local`×command.  The docker image does not run as root for security reasons. Only root can
bind on low ports. You can use docker's port mapping if you want.

Note that you're running stf local inside the docker image. While it may
work, it is not a supported deployment method. By doing the full deployment
(linked in README) you also set up nginx instead of poorxy (poor proxy).
You can bind nginx to any port you want.

On Wed, Feb 22, 2017 at 18:40 denis99999 <notifications@github.com> wrote:

> When I try to launch a STF local server on a listening port < 1024 (ex:
> 80) instead the default 7100 one, an error occurs, seel the below log.
>
> Is it an error or simply a limitation ?
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> févr. 22 10:11:00 debian docker[5944]: INF/util:procutil 1 [
>
>
>
>
>
>
> *] Forking "/app/lib/cli poorxy --port 80 --app-url http://localhost:7105/
> <http://localhost:7105/> --auth-url http://localhost:7120/
> <http://localhost:7120/> --api-url http://localhost:7106/
> <http://localhost:7106/> --websocket-url http://localhost:7110/
> <http://localhost:7110/> --storage-url http://localhost:7102/
> <http://localhost:7102/> --storage-plugin-image-url http://localhost:7103/
> <http://localhost:7103/> --storage-plugin-apk-url http://localhost:7104/
> <http://localhost:7104/>" févr. 22 10:11:03 debian docker[5944]:
> INF/triproxy 17 [dev001] PUB socket bound on tcp://127.0.0.1:7114
> <http://127.0.0.1:7114> févr. 22 10:11:03 debian docker[5944]: INF/triproxy
> 16 [app001] PUB socket bound on tcp://127.0.0.1:7111
> <http://127.0.0.1:7111> févr. 22 10:11:03 debian docker[5944]: INF/triproxy
> 17 [dev001] DEALER socket bound on tcp://127.0.0.1:7115
> <http://127.0.0.1:7115> févr. 22 10:11:03 debian docker[5944]: INF/triproxy
> 16 [app001] DEALER socket bound on tcp://127.0.0.1:7112
> <http://127.0.0.1:7112> févr. 22 10:11:03 debian docker[5944]: INF/triproxy
> 17 [dev001] PULL socket bound on tcp://127.0.0.1:7116
> <http://127.0.0.1:7116> févr. 22 10:11:03 debian docker[5944]: INF/triproxy
> 16 [app001] PULL socket bound on tcp://127.0.0.1:7113
> <http://127.0.0.1:7113> févr. 22 10:11:04 debian docker[5944]: INF/poorxy
> 84 [*] Listening on port 80
> févr. 22 10:11:04 debian docker[5944]: events.js:160
> févr. 22 10:11:04 debian docker[5944]: throw er; // Unhandled 'error' event
> févr. 22 10:11:04 debian docker[5944]: ^
> févr. 22 10:11:04 debian docker[5944]: Error: listen EACCES 0.0.0.0:80
> févr. 22 10:11:04 debian docker[5944]: at Object.exports._errnoException
> (util.js:1026:11)
> févr. 22 10:11:04 debian docker[5944]: at exports._exceptionWithHostPort
> (util.js:1049:20)
> févr. 22 10:11:04 debian docker[5944]: at Server._listen2 (net.js:1244:19)
> févr. 22 10:11:04 debian docker[5944]: at listen (net.js:1293:10)
> févr. 22 10:11:04 debian docker[5944]: at Server.listen (net.js:1389:5)
> févr. 22 10:11:04 debian docker[5944]: at module.exports
> (/app/lib/units/poorxy/index.js:67:10)
> févr. 22 10:11:04 debian docker[5944]: at Object.module.exports.handler
> (/app/lib/cli/poorxy/index.js:60:39)
> févr. 22 10:11:04 debian docker[5944]: at Object.self.runCommand
> (/app/node_modules/yargs/lib/command.js:170:22)
> févr. 22 10:11:04 debian docker[5944]: at parseArgs
> (/app/node_modules/yargs/yargs.js:920:28)
> févr. 22 10:11:04 debian docker[5944]: at Object.get [as argv]
> (/app/node_modules/yargs/yargs.js:860:16)
> févr. 22 10:11:04 debian docker[5944]: at Object.
> (/app/lib/cli/index.js:40:3)
> févr. 22 10:11:04 debian docker[5944]: at Module._compile
> (module.js:570:32)
> févr. 22 10:11:04 debian docker[5944]: at Object.Module._extensions..js
> (module.js:579:10)
> févr. 22 10:11:04 debian docker[5944]: at Module.load (module.js:487:32)
> févr. 22 10:11:04 debian docker[5944]: at tryModuleLoad (module.js:446:12)
> févr. 22 10:11:04 debian docker[5944]: at Function.Module._load
> (module.js:438:3)
> févr. 22 10:11:04 debian docker[5944]: FTL/cli:local 1 [
>
>
>
>
> *] Child process had an error ExitError: Exit code "1" févr. 22 10:11:04
> debian docker[5944]: at ChildProcess. (/app/lib/util/procutil.js:49:23)
> févr. 22 10:11:04 debian docker[5944]: at emitTwo (events.js:106:13) févr.
> 22 10:11:04 debian docker[5944]: at ChildProcess.emit (events.js:191:7)
> févr. 22 10:11:04 debian docker[5944]: at
> Process.ChildProcess._handle.onexit (internal/child_process.js:215:12)
> févr. 22 10:11:04 debian docker[5944]: INF/cli:local 1 [*] Shutting down
> all child processes
> févr. 22 10:11:04 debian docker[5944]: INF/util:lifecycle 16 [app001]
> Winding down for graceful exit
> févr. 22 10:11:04 debian docker[5944]: INF/util:lifecycle 17 [dev001]
> Winding down for graceful exit
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/544>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_TO_v1btzCl_DaBx4PpF8E6RhSuZks5rfAJ3gaJpZM4MIaM6>
> .
>
 Well you can override the user it runs as I guess... at your own risk though. Try adding `--user root` or `--user 0` to your docker command.  We don't do anything like that. However, to accept input from the device, there's a hidden password field that gets focused when you click on the screen. It's a password field because that had the least cross-browser and non-Latin issues. What I think is happening is that your browser is simply autofilling the password field. This then is translated to key events. (the password field is only for accepting key events, and isn't actually a password) Guys, there's a reason why we originally chose a password field. It was and perhaps still is one of the only ways to get latin characters when someone is using an IME, e.g. with Japanese. Furthermore, at the time autocomplete off actually did what it's supposed to do.

Now, does anyone have an alternate, tested, complete solution that works in all reasonably recent browsers right now? It sounds to me like `new-password` isn't well supported yet. A PR would be greatly appreciated.  Your node is too old. Only 6.9 or newer is supported now. This makes our
life easier.

On Thu, Feb 16, 2017 at 17:56 apprayadmin <notifications@github.com> wrote:

> *What is the issue or idea you have?*
> If I build stf locally after cloning from github, I cannot connect
> devices, the following error keeps appearing upon device connect and the
> stf is not available via browser:
>
> INF/device:resources:minicap 8632 [WUJ01J5TB9] Installing "minicap.so" as
> "/data/local/tmp/minicap.so"
> (here comes the funny part)
> `FTL/device 8632 [WUJ01J5TB9] Setup had an error TypeError: Cannot read
> property 'S_IXUSR' of undefined
> at /var/www/openstf/lib/units/device/resources/minicap.js:91:46
> at processImmediate [as _immediateCallback] (timers.js:383:17)
> FTL/util:lifecycle 8632 [WUJ01J5TB9] Shutting down due to fatal error
>
> If I install openstf as a global npm module, it works like a charm - but
> with local instance, no luck. I've seen some minicap-related issues, but
> not like this typeerror: cannot read property... so I opened a new issue
> ticket.
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
> I've tried with Sony, Samsung and HTC (Android 4.2, 5.0) as well as
> different linuxes (ubuntu 14,16, x32-x64, mint, debian), same results.
>
> Output of adb devices -l is:
> List of devices attached WUJ01J5TB9 device usb:1-2 product:E2105
> model:E2105 device:E2105
>
> *Please provide the steps to reproduce the issue.*
> apt-get install yasm libzmq3-dbg libzmq3-dev libzmq3 rethinkdb (obviously
> if a library was missing from ubuntu repos I installed them manually)
> (npm install -g stf --unsafe-perm --verbose)
> cd /var/www/
> git clone https://github.com/openstf/stf.git openstf
> cd openstf
> npm install -g bower
> npm install
> bower install --allow-root
> rethinkdb
> stf local
>
>    - as long as devices are not connected, everything works fine. When I
>    connect a device (either before or after launching stf) the errors start
>    appearing.
>
> *What is the expected behavior?*
> No minicap-errors to show up and to be able to load stf device page and
> connect actually
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
> More of the code:
> INF/middleware:webpack 8407 [*] Bundle is now valid INF/webpack:config
> 8407 [*] Build progress 100% (complete) INF/device:support:push 8632
> [WUJ01J5TB9] Sending output to "tcp://127.0.0.1:7116" INF/device 8632
> [WUJ01J5TB9] Preparing device INF/device:support:sub 8632 [WUJ01J5TB9]
> Receiving input from "tcp://127.0.0.1:7114" INF/device:support:sub 8632
> [WUJ01J5TB9] Subscribing to permanent channel "*ALL"
> INF/device:support:properties 8632 [WUJ01J5TB9] Loading properties
> INF/device:support:abi 8632 [WUJ01J5TB9] Supports ABIs armeabi-v7a, armeabi
> INF/provider 8397 [*] Providing 0 of 1 device(s); waiting for "WUJ01J5TB9"
> INF/device:resources:minicap 8632 [WUJ01J5TB9] Installing "minicap" as
> "/data/local/tmp/minicap" INF/device:resources:minicap 8632 [WUJ01J5TB9]
> Installing "minicap.so" as "/data/local/tmp/minicap.so"
> (here comes the funny part)
> FTL/device 8632 [WUJ01J5TB9] Setup had an error TypeError: Cannot read
> property 'S_IXUSR' of undefined at
> /var/www/openstf/lib/units/device/resources/minicap.js:91:46 at
> processImmediate [as _immediateCallback] (timers.js:383:17)
> FTL/util:lifecycle 8632 [WUJ01J5TB9] Shutting down due to fatal error
> INF/provider 8397 [*] Cleaning up device worker "WUJ01J5TB9" ERR/provider
> 8397 [*] Device worker "WUJ01J5TB9" died with code 1 INF/provider 8397 [*]
> Restarting device worker "WUJ01J5TB9"
>
> *Please run stf doctor and paste the output here.*
> `INF/util:doctor 3561 [
> *] OS Arch: x64 INF/util:doctor 3561 [*] OS Platform: linux
> INF/util:doctor 3561 [
> *] OS Platform: 4.4.0-31-generic INF/util:doctor 3561 [*] Using Node 4.2.6
> INF/util:doctor 3561 [
> *] Using RethinkDB client 2.3.3 INF/util:doctor 3561 [*] Using ZeroMQ
> 4.1.4
> WRN/util:doctor 3561 [
> *] Executable was not found WRN/util:doctor 3561 [*] Executable was not
> found
> INF/util:doctor 3561 [*] Local ADB 1.0.32
>
> INF/util:doctor 3561 [*] Local RethinkDB server 2.3.5~0xenial
> /var/www/openstf/node_modules/semver/semver.js:293
> throw new TypeError('Invalid Version: ' + version);
> ^
>
> TypeError: Invalid Version: 2.3.5~0xenial
> at new SemVer (/var/www/openstf/node_modules/semver/semver.js:293:11)
> at Range.test (/var/www/openstf/node_modules/semver/semver.js:1036:15)
> at Function.satisfies
> (/var/www/openstf/node_modules/semver/semver.js:1085:16)
> at unsupportedVersion (/var/www/openstf/lib/util/doctor.js:13:15)
> at /var/www/openstf/lib/util/doctor.js:95:7
> at /var/www/openstf/lib/util/doctor.js:50:22
> at ChildProcess.exithandler (child_process.js:204:7)
> at emitTwo (events.js:87:13)
> at ChildProcess.emit (events.js:172:7)
> at maybeClose (internal/child_process.js:821:16)
> at Process.ChildProcess._handle.onexit (internal/child_process.js:211:5)`
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/542>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_e8L-BNJwuL08CPy8bh6wcjh9tetks5rdA9BgaJpZM4MCvWC>
> .
>
 It will now show an error when you try to use an older node :)

On Thu, Feb 16, 2017 at 18:31 apprayadmin <notifications@github.com> wrote:

> what a silly mistake i did not notice.. thanks for your help. good job guys
>
> —
> You are receiving this because you modified the open/close state.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/542#issuecomment-280279706>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_c78WsU8WIgFcrfsrdFsQbV3ncMaks5rdBd7gaJpZM4MCvWC>
> .
>
  This has been moved to openstf/adbkit#62.  This drops compatibility with node 4.x due to using .endsWith(), but we're
going to do that anyway soon.
On Tue, Feb 14, 2017 at 10:54 Karol Wrótniak <notifications@github.com>
wrote:

> This PR adds ability to specify domain of authorized email addresses.
> If option is not set then behavior is not changed and any (excluding
> missing) email address is authorized.
>
> In case of not authorized domain (including missing email address) simple
> error message is shown.
>
> This theoretically also fixes bug with infinite redirect loop in case of
> missing email address in response from OAuth provider. At least with
> Google, unconditional redirect to /auth/oauth/ used to cause such loop,
> not sure if email can be missing despite email scope is requested and if
> infinite loop was also applicable to other providers.
> ------------------------------
> You can view, comment on, or merge this pull request online at:
>
>   https://github.com/openstf/stf/pull/538
> Commit Summary
>
>    - Email domain restriction added for OAuth2 authorization.
>
> File Changes
>
>    - *M* lib/cli/auth-oauth2/index.js
>    <https://github.com/openstf/stf/pull/538/files#diff-0> (7)
>    - *M* lib/units/auth/oauth2/index.js
>    <https://github.com/openstf/stf/pull/538/files#diff-1> (17)
>
> Patch Links:
>
>    - https://github.com/openstf/stf/pull/538.patch
>    - https://github.com/openstf/stf/pull/538.diff
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/pull/538>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VS_3kdKGHoZF97ONPW_RW5-muEWks5rcQlwgaJpZM4L_9bz>
> .
>
 Screw it, I'll just merge it like this but please feel free to submit improvements later.  Currently no, but if you need to access the device (perhaps to get
something out of it), you can use an OTG adapter and an actual mouse. Or
perhaps the 'input' command from adb.
On Sun, Feb 12, 2017 at 8:04 Tomáš Martykán <notifications@github.com>
wrote:

> Hello, I have a phone with a broken touchscreen, to the point where the
> driver doesn't recognize it, so minitouch doesn't have anything to use.
>
> The device is a Xiaomi Redmi 2. Is there a way to go around that?
>
> INF/device:plugins:touch 7220 [33dcccfe] Connecting to minitouch service
> INF/device:plugins:touch 7220 [33dcccfe] minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
> INF/device:plugins:touch 7220 [33dcccfe] minitouch says: "Unable to find a suitable touch device"
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/537>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_dlhPbt5Jo1pJzZl45B6We4H-ZYgks5rbj6UgaJpZM4L-VAJ>
> .
>
 It might if you have root.

On Sun, Feb 12, 2017 at 5:49 PM, Tomáš Martykán <notifications@github.com>
wrote:

> Would this: https://github.com/vi/virtual_touchscreen work?
>
> On Sun, Feb 12, 2017, 03:34 Simo Kinnunen <notifications@github.com>
> wrote:
>
> > Currently no, but if you need to access the device (perhaps to get
> > something out of it), you can use an OTG adapter and an actual mouse. Or
> > perhaps the 'input' command from adb.
> > On Sun, Feb 12, 2017 at 8:04 Tomáš Martykán <notifications@github.com>
> > wrote:
> >
> > > Hello, I have a phone with a broken touchscreen, to the point where the
> > > driver doesn't recognize it, so minitouch doesn't have anything to use.
> > >
> > > The device is a Xiaomi Redmi 2. Is there a way to go around that?
> > >
> > > INF/device:plugins:touch 7220 [33dcccfe] Connecting to minitouch
> service
> > > INF/device:plugins:touch 7220 [33dcccfe] minitouch says: "Note: device
> > /dev/input/mice is not supported by libevdev"
> > > INF/device:plugins:touch 7220 [33dcccfe] minitouch says: "Unable to
> find
> > a suitable touch device"
> > >
> > > —
> > > You are receiving this because you are subscribed to this thread.
> > > Reply to this email directly, view it on GitHub
> > > <https://github.com/openstf/stf/issues/537>, or mute the thread
> > > <
> > https://github.com/notifications/unsubscribe-auth/AAB-_
> dlhPbt5Jo1pJzZl45B6We4H-ZYgks5rbj6UgaJpZM4L-VAJ
> > >
> > > .
> > >
> >
> > —
> > You are receiving this because you authored the thread.
> > Reply to this email directly, view it on GitHub
> > <https://github.com/openstf/stf/issues/537#issuecomment-279192041>, or
> mute
> > the thread
> > <https://github.com/notifications/unsubscribe-auth/
> AIbLFSqbNmLWsFuukebOeXxqJZlOFm6lks5rbm-7gaJpZM4L-VAJ>
> > .
> >
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/537#issuecomment-279204954>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Xj8IfG1fHCwdIVAsPSORwf9Qouoks5rbsesgaJpZM4L-VAJ>
> .
>
 FWIW I think it's unusual that Linux can't see the device. Thinking a
cable/ribbon might have become loose. Worth thinking about if you can take
it apart.
On Sun, Feb 12, 2017 at 17:59 Simo Kinnunen <simo@shoqolate.com> wrote:

> It might if you have root.
>
> On Sun, Feb 12, 2017 at 5:49 PM, Tomáš Martykán <notifications@github.com>
> wrote:
>
> Would this: https://github.com/vi/virtual_touchscreen work?
>
> On Sun, Feb 12, 2017, 03:34 Simo Kinnunen <notifications@github.com>
> wrote:
>
> > Currently no, but if you need to access the device (perhaps to get
> > something out of it), you can use an OTG adapter and an actual mouse. Or
> > perhaps the 'input' command from adb.
> > On Sun, Feb 12, 2017 at 8:04 Tomáš Martykán <notifications@github.com>
> > wrote:
> >
> > > Hello, I have a phone with a broken touchscreen, to the point where the
> > > driver doesn't recognize it, so minitouch doesn't have anything to use.
> > >
> > > The device is a Xiaomi Redmi 2. Is there a way to go around that?
> > >
> > > INF/device:plugins:touch 7220 [33dcccfe] Connecting to minitouch
> service
> > > INF/device:plugins:touch 7220 [33dcccfe] minitouch says: "Note: device
> > /dev/input/mice is not supported by libevdev"
> > > INF/device:plugins:touch 7220 [33dcccfe] minitouch says: "Unable to
> find
> > a suitable touch device"
> > >
> > > —
> > > You are receiving this because you are subscribed to this thread.
> > > Reply to this email directly, view it on GitHub
> > > <https://github.com/openstf/stf/issues/537>, or mute the thread
> > > <
> >
> https://github.com/notifications/unsubscribe-auth/AAB-_dlhPbt5Jo1pJzZl45B6We4H-ZYgks5rbj6UgaJpZM4L-VAJ
> > >
> > > .
> > >
> >
> > —
> > You are receiving this because you authored the thread.
> > Reply to this email directly, view it on GitHub
> > <https://github.com/openstf/stf/issues/537#issuecomment-279192041>, or
> mute
> > the thread
> > <
> https://github.com/notifications/unsubscribe-auth/AIbLFSqbNmLWsFuukebOeXxqJZlOFm6lks5rbm-7gaJpZM4L-VAJ
> >
> > .
> >
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/537#issuecomment-279204954>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Xj8IfG1fHCwdIVAsPSORwf9Qouoks5rbsesgaJpZM4L-VAJ>
> .
>
>
>
 This doesn't seem to be relevant anymore, so I'm closing the issue.  Two things,
1. Either rethinkdb is not running or your machine is not able to connect with rethinkdb. Check it first.
2. You are using wrong command.  Instead of `stf local 10.1.X.X 10.1.X.X` you need to run `stf local --public-ip <IP_ADDRESS_OF_CURRENT_MACHINE>`. After this, from another machine(should be in same network) access `http://IP_ADDRESS_OF_MACHINE_WHERE_STF_IS_RUNNING:7100` Yes. Check [this](https://github.com/openstf/stf-appium-example)  Duplicate of #509 but that's a good call let me take a look. Let's continue in #509.  Hmm... you're using a public domain name in the provider zmq sockets. Are
you positive that they're actually accessible on the IP it maps to? Please
also try disabling the firewall (e.g. iptables) temporarily on that machine.

The output is weird, it shouldn't show the same serial multiple times.

On Wed, Feb 8, 2017 at 19:34 Martin Woit <notifications@github.com> wrote:

> STF version - 2.3.0 (latest) - Docker
> STF version - 2.0.1
> Debian - Jessie
>
> Deployment on single machine.
>
> *What is the issue or idea you have?*
> Hey,
> EACH device will be ignored by provider service.
>
> INF/provider 1 [*] Sending output to "tcp://qadevicefarm.de:7270"
> INF/provider 1 [*] Receiving input from "tcp://qadevicefarm.de:7250"
> INF/provider 1 [*] Tracking devices
> INF/provider 1 [*] Found device "47900b6e9dd21100" (device)`
> INF/provider 1 [*] Providing all 0 of 3 device(s); ignoring "47900b6e9dd21100", "47900b6e9dd21100", "47900b6e9dd21100"
>
> No STFService.apk will be installed on the device.
> The setup is almost the same like in the DEPLOYMENT description. The
> stf-triproxy-dev.service is running.
>
> I also did the setup on another machine with the same result.
>
> In front of the machine where STF is running, an apache is installed,
> which provides the host name and forwards https access. Therefor I had to
> adapt the nginx.conf to get rid of mixed content.
>
> But now I'm at my wit's end.
>
> Do I need to configure IPs in the services and let nginx handle all
> hostname related stuff?
> Or do I also have to provide full hostname in the service files?
>
> Thank you for your help.
> Martin
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/534>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RhuvOI1DlqXiUWzi-Xju-m7FMOWks5raZovgaJpZM4L6pGg>
> .
>
 The domain doesn't return any results on `dig` or `nslookup`. The situation could certainly be different from your network but I suspect that it's simply not able to connect to that address. ZeroMQ does not by default tell you if that's the case, it just keeps waiting for something to appear from somewhere.  I know this issue is fairly old, but we can look into this if someone sends us the device. Otherwise we  can probably never confirm or fix the issue.  Could be a firewall issue. Could be a misconfiguration. Could be anything. Open developer tools and see what the WebSocket request is returning. If it shows that it's unable to connect, then I'd suggest temporarily disabling your firewall to see if that helps. Just check your browser's developer tools. It should tell you why it's
unable to connect.
On Mon, Feb 6, 2017 at 18:42 dududiao <notifications@github.com> wrote:

> Firewall and anti-virus software are closed, the display is connected
> successfully, no error data. Connection is often interrupted, see other
> replies, is the reason for the MAC system?
> [image: 1]
> <https://cloud.githubusercontent.com/assets/16865038/22641851/65f95326-ec93-11e6-9fed-299fcb81caee.png>
> [image: 2]
> <https://cloud.githubusercontent.com/assets/16865038/22641869/77e86496-ec93-11e6-8cce-3028db5937fe.jpg>
> [image: 3]
> <https://cloud.githubusercontent.com/assets/16865038/22641902/94898634-ec93-11e6-9b01-9d165a3d382e.png>
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/531#issuecomment-277631264>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_fV3xHmArX-lvdDETpO5ImVOSi0Nks5rZur3gaJpZM4L36oZ>
> .
>
 Closing as this is very old. 99% chance that the issue was caused by a misconfiguration.  That's weird, possibly a bug in node. More likely though your node
installation is broken. Either way I would suggest using latest 6.x for now.

On Sat, Feb 4, 2017 at 18:03 Wesley <notifications@github.com> wrote:

>
>    - Version
>
> [root@localhost ~]# npm install -g stf
> npm WARN deprecated node-uuid@1.4.7: use uuid module instead
> /mnt/data/node-v7.5.0/bin/stf -> /mnt/data/node-v7.5.0/lib/node_modules/stf/bin/stf
> /mnt/data/node-v7.5.0/lib
> └── stf@2.3.0
>
>
>    - Error
>
> [root@localhost bin]# stf local
> path.js:1142
>           cwd = process.cwd();
>                         ^
>
> Error: ENOENT: no such file or directory, uv_cwd
>     at Object.resolve (path.js:1142:25)
>     at Function.Module._resolveLookupPaths (module.js:391:17)
>     at Function.Module._resolveFilename (module.js:461:31)
>     at Function.Module._load (module.js:418:25)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/mnt/data/node-v7.5.0/lib/node_modules/stf/bin/stf:2:1)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
> [root@localhost bin]#
> [root@localhost bin]# stf doctor
> path.js:1142
>           cwd = process.cwd();
>                         ^
>
> Error: ENOENT: no such file or directory, uv_cwd
>     at Object.resolve (path.js:1142:25)
>     at Function.Module._resolveLookupPaths (module.js:391:17)
>     at Function.Module._resolveFilename (module.js:461:31)
>     at Function.Module._load (module.js:418:25)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/mnt/data/node-v7.5.0/lib/node_modules/stf/bin/stf:2:1)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>
> who can help me ?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/530>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VE7141CNdKFaiQo3WNxiCci-v23ks5rZD7UgaJpZM4L3F6N>
> .
>
 Your installation is still screwed up. Fully remove stf and install it
again. If there are any errors during installation, fix those.

On Mon, Feb 6, 2017 at 11:49 Wesley <notifications@github.com> wrote:

> reinstall nodejs from source ,and stf.
> run stf local ,take some error log:
>
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js migrate"
> INF/db 19092 [*] Connecting to 127.0.0.1:28015
> INF/db:setup 19092 [*] Database "stf" already exists
> INF/db:setup 19092 [*] Table "users" already exists
> INF/db:setup 19092 [*] Table "accessTokens" already exists
> INF/db:setup 19092 [*] Table "vncauth" already exists
> INF/db:setup 19092 [*] Table "devices" already exists
> INF/db:setup 19092 [*] Table "logs" already exists
> INF/db:setup 19092 [*] Index "users"."adbKeys" already exists
> INF/db:setup 19092 [*] Waiting for index "users"."adbKeys"
> INF/db:setup 19092 [*] Index "accessTokens"."email" already exists
> INF/db:setup 19092 [*] Waiting for index "accessTokens"."email"
> INF/db:setup 19092 [*] Index "vncauth"."response" already exists
> INF/db:setup 19092 [*] Index "vncauth"."responsePerDevice" already exists
> INF/db:setup 19092 [*] Index "devices"."owner" already exists
> INF/db:setup 19092 [*] Index "devices"."present" already exists
> INF/db:setup 19092 [*] Index "devices"."providerChannel" already exists
> INF/db:setup 19092 [*] Index "users"."adbKeys" is ready
> INF/db:setup 19092 [*] Waiting for index "vncauth"."response"
> INF/db:setup 19092 [*] Waiting for index "vncauth"."responsePerDevice"
> INF/db:setup 19092 [*] Waiting for index "devices"."owner"
> INF/db:setup 19092 [*] Waiting for index "devices"."present"
> INF/db:setup 19092 [*] Waiting for index "devices"."providerChannel"
> INF/db:setup 19092 [*] Index "accessTokens"."email" is ready
> INF/db:setup 19092 [*] Index "vncauth"."response" is ready
> INF/db:setup 19092 [*] Index "vncauth"."responsePerDevice" is ready
> INF/db:setup 19092 [*] Index "devices"."owner" is ready
> INF/db:setup 19092 [*] Index "devices"."present" is ready
> INF/db:setup 19092 [*] Index "devices"."providerChannel" is ready
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js triproxy app001 --bind-pub tcp://127.0.0.1:7111 --bind-dealer tcp://127.0.0.1:7112 --bind-pull tcp://127.0.0.1:7113"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js triproxy dev001 --bind-pub tcp://127.0.0.1:7114 --bind-dealer tcp://127.0.0.1:7115 --bind-pull tcp://127.0.0.1:7116"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js processor proc001 --connect-app-dealer tcp://127.0.0.1:7112 --connect-dev-dealer tcp://127.0.0.1:7115"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js processor proc002 --connect-app-dealer tcp://127.0.0.1:7112 --connect-dev-dealer tcp://127.0.0.1:7115"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js reaper reaper001 --connect-push tcp://127.0.0.1:7116 --connect-sub tcp://127.0.0.1:7111"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js provider --name localhost.localdomain --min-port 7400 --max-port 7700 --connect-sub tcp://127.0.0.1:7114 --connect-push tcp://127.0.0.1:7116 --group-timeout 900 --public-ip localhost --storage-url http://localhost:7100/ --adb-host 127.0.0.1 --adb-port 5037 --vnc-initial-size 600x800"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js auth-mock --port 7120 --secret kute kittykat --app-url http://localhost:7100/"
> /usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:91
>   throw err
>   ^
>
> Error: Could not locate the bindings file. Tried:
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/compiled/7.5.0/linux/x64/zmq.node
>     at bindings (/usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js app --port 7105 --secret kute kittykat --auth-url http://localhost:7100/auth/mock/ --websocket-url http://localhost:7110/"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js api --port 7106 --secret kute kittykat --connect-push tcp://127.0.0.1:7113 --connect-sub tcp://127.0.0.1:7111"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js websocket --port 7110 --secret kute kittykat --storage-url http://localhost:7100/ --connect-sub tcp://127.0.0.1:7111 --connect-push tcp://127.0.0.1:7113"
> /usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:91
>   throw err
>   ^
>
> Error: Could not locate the bindings file. Tried:
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/compiled/7.5.0/linux/x64/zmq.node
>     at bindings (/usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js storage-temp --port 7102"
> /usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:91
>   throw err
>   ^
>
> Error: Could not locate the bindings file. Tried:
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/compiled/7.5.0/linux/x64/zmq.node
>     at bindings (/usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js storage-plugin-image --port 7103 --storage-url http://localhost:7100/"
> /usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:91
>   throw err
>   ^
>
> Error: Could not locate the bindings file. Tried:
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/compiled/7.5.0/linux/x64/zmq.node
>     at bindings (/usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js storage-plugin-apk --port 7104 --storage-url http://localhost:7100/"
> INF/util:procutil 19086 [*] Forking "/usr/local/lib/node_modules/stf/lib/cli.js poorxy --port 7100 --app-url http://localhost:7105/ --auth-url http://localhost:7120/ --api-url http://localhost:7106/ --websocket-url http://localhost:7110/ --storage-url http://localhost:7102/ --storage-plugin-image-url http://localhost:7103/ --storage-plugin-apk-url http://localhost:7104/"
> FTL/cli:local 19086 [*] Child process had an error ExitError: Exit code "1"
>     at ChildProcess.<anonymous> (/usr/local/lib/node_modules/stf/lib/util/procutil.js:49:23)
>     at emitTwo (events.js:106:13)
>     at ChildProcess.emit (events.js:192:7)
>     at Process.ChildProcess._handle.onexit (internal/child_process.js:215:12)
> INF/cli:local 19086 [*] Shutting down all child processes
> /usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:91
>   throw err
>   ^
>
> Error: Could not locate the bindings file. Tried:
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
>  → /usr/local/lib/node_modules/stf/node_modules/zmq/compiled/7.5.0/linux/x64/zmq.node
>     at bindings (/usr/local/lib/node_modules/stf/node_modules/bindings/bindings.js:88:9)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
>     at require (internal/module.js:20:19)
>     at Object.<anonymous> (/usr/local/lib/node_modules/stf/node_modules/zmq/index.js:2:18)
>     at Module._compile (module.js:571:32)
>     at Object.Module._extensions..js (module.js:580:10)
>     at Module.load (module.js:488:32)
>     at tryModuleLoad (module.js:447:12)
>     at Function.Module._load (module.js:439:3)
>     at Module.require (module.js:498:17)
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/530#issuecomment-277575283>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_QIA4bsn4gxGbnPSpC_KzJQAvAjLks5rZoo1gaJpZM4L3F6N>
> .
>
  No, emulators overall are not supported right now (you'll most likely see
just a black screen).

On Tue, Jan 31, 2017 at 1:04 AM, Justin Ison <notifications@github.com>
wrote:

> There are a few docker containers that run android emulator inside of
> them. The one below in particular you can expose your adb connection to the
> host machine. Just curious if anyone has attempted this or if it would even
> work with openstf?
>
> https://hub.docker.com/r/tracer0tong/android-emulator/~/dockerfile/
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/529>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RJjSVb_gbQNcXCoEfVIVhzznAOYks5rXgomgaJpZM4LxlJ3>
> .
>
  Have you tried a different device? Could be a simple case of incompatibility. Keepalive time is in second not in millisecond. You can check this issue to know which services will require zmqtcpkeepalive setting. 

https://github.com/openstf/stf/issues/342 I updated those old comments that had the weird value of 30000. You had to read the issue all the way till the end to see that the values were actually supposed to be in seconds. Also, not sure if 300 seconds is even a good value or not. I just told you, I have no idea. Depends on your network.

On Thu, Jan 26, 2017 at 4:27 PM, denis99999 <notifications@github.com>
wrote:

> From your point of view you what is the good value ?
> Thanks
>
> De : Simo Kinnunen [mailto:notifications@github.com]
> Envoyé : jeudi 26 janvier 2017 08:25
> À : openstf/stf
> Cc : BARBARON Denis IMT/OLPS; State change
> Objet : Re: [openstf/stf] ZMQ_TCP_KEEPALIVE usage ? (#528)
>
>
> I updated those old comments that had the weird value of 30000. You had to
> read the issue all the way till the end to see that the values were
> actually supposed to be in seconds. Also, not sure if 300 seconds is even a
> good value or not.
>
> —
> You are receiving this because you modified the open/close state.
> Reply to this email directly, view it on GitHub<https://github.com/
> openstf/stf/issues/528#issuecomment-275323415>, or mute the thread<
> https://github.com/notifications/unsubscribe-auth/
> AVtkCudEo1SwiNnvLNt52ZLLX9cM6AGqks5rWEpCgaJpZM4Ltk_7>.
>
> ____________________________________________________________
> _____________________________________________________________
>
> Ce message et ses pieces jointes peuvent contenir des informations
> confidentielles ou privilegiees et ne doivent donc
> pas etre diffuses, exploites ou copies sans autorisation. Si vous avez
> recu ce message par erreur, veuillez le signaler
> a l'expediteur et le detruire ainsi que les pieces jointes. Les messages
> electroniques etant susceptibles d'alteration,
> Orange decline toute responsabilite si ce message a ete altere, deforme ou
> falsifie. Merci.
>
> This message and its attachments may contain confidential or privileged
> information that may be protected by law;
> they should not be distributed, used or copied without authorisation.
> If you have received this email in error, please notify the sender and
> delete this message and its attachments.
> As emails may be altered, Orange is not liable for messages that have been
> modified, changed or falsified.
> Thank you.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/528#issuecomment-275323741>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RwGWTu_-qf8XUE_7JD5bdE4vd-pks5rWErpgaJpZM4Ltk_7>
> .
>
 @sorccu 

> I updated those old comments that had the weird value of 30000. You had to read the issue all the way till the end to see that the values were actually supposed to be in seconds. Also, not sure if 300 seconds is even a good value or not.

I think timeout unit depends on host OS. For MacOS it is ms & for linux it is seconds. I tested it with MacOS first that is why it was in ms before but later all the issues were on linux system that is why in seconds later.

Also, 300 seconds is working fine with all the past issues, so I think it is okay.  It's not necessarily a leak. Could just be that whatever you're doing is causing too many events listeners to be added. You get that warning if you have more than 10 listeners added.  @gunta do you have time to update?  The documents could be out of date, they were originally made for pre-2.0 and were perhaps last checked in the early 2.x days. Please check the RethinkDB documentation and post your solution here if you find one. Or make a pull request to update the information.  Seems that OP solved this issue :) Good work!  It says what the error is. Do not use root or sudo with npm.

On Wed, Jan 4, 2017 at 13:59 madangopal918 <notifications@github.com> wrote:

> QualiTests-Mac-mini-2:stf03012017 qualitest$ sudo npm install -g stf
>
>
> npm WARN prepublish-on-install As of npm@5, prepublish scripts will run
> only for npm publish.
>
>
> npm WARN prepublish-on-install (In npm@4 and previous versions, it also
> runs for npm install.)
>
>
> npm WARN prepublish-on-install See the deprecation note in npm help
> scripts for more information.
>
>
> npm WARN lifecycle stf@2.3.0~prepublish: cannot run in wd %s %s (wd=%s)
> stf@2.3.0 bower install && not-in-install && gulp build || in-install
> /Users/qualitest/Desktop/stf03012017/stf
>
>
> /usr/local/bin/stf -> /usr/local/lib/node_modules/stf/bin/stf
>
>
>
>
> dtrace-provider@0.8.0 install
> /usr/local/lib/node_modules/stf/node_modules/bunyan/node_modules/dtrace-provider
>
>
> node scripts/install.js
>
>
>
>
>
>
> dtrace-provider@0.7.1 install
> /usr/local/lib/node_modules/stf/node_modules/dtrace-provider
>
>
> node scripts/install.js
>
>
>
>
>
>
> bufferutil@1.3.0 install
> /usr/local/lib/node_modules/stf/node_modules/bufferutil
>
>
> node-gyp rebuild
>
>
>
>
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/Users/qualitest/.node-gyp/6.9.2"
>
>
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/local/lib/node_modules/stf/node_modules/bufferutil/.node-gyp"
>
>
> CXX(target) Release/obj.target/bufferutil/src/bufferutil.o
>
>
> SOLINK_MODULE(target) Release/bufferutil.node
>
>
>
>
> jpeg-turbo@0.4.0 install
> /usr/local/lib/node_modules/stf/node_modules/jpeg-turbo
>
>
> node-pre-gyp install --fallback-to-build
>
>
>
>
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/Users/qualitest/.node-gyp/6.9.2"
>
>
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/.node-gyp"
>
>
> make: *** No rule to make target ../.node-gyp/6.9.2/include/node/common.gypi',
> needed byMakefile'. Stop.
>
>
> gyp ERR! build error
>
>
> gyp ERR! stack Error: make failed with exit code: 2
>
>
> gyp ERR! stack at ChildProcess.onExit
> (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:276:23)
>
>
> gyp ERR! stack at emitTwo (events.js:106:13)
>
>
> gyp ERR! stack at ChildProcess.emit (events.js:191:7)
>
>
> gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:215:12)
>
>
> gyp ERR! System Darwin 16.3.0
>
>
> gyp ERR! command "/usr/local/bin/node"
> "/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js"
> "build" "--fallback-to-build"
> "--module=/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v48-darwin-x64/jpegturbo.node"
> "--module_name=jpegturbo"
> "--module_path=/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v48-darwin-x64"
>
>
> gyp ERR! cwd /usr/local/lib/node_modules/stf/node_modules/jpeg-turbo
>
>
> gyp ERR! node -v v6.9.2
>
>
> gyp ERR! node-gyp -v v3.4.0
>
>
> gyp ERR! not ok
>
>
> node-pre-gyp ERR! build error
>
>
> node-pre-gyp ERR! stack Error: Failed to execute '/usr/local/bin/node
> /usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js build
> --fallback-to-build
> --module=/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v48-darwin-x64/jpegturbo.node
> --module_name=jpegturbo
> --module_path=/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v48-darwin-x64'
> (1)
>
>
> node-pre-gyp ERR! stack at ChildProcess.
> (/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
>
>
> node-pre-gyp ERR! stack at emitTwo (events.js:106:13)
>
>
> node-pre-gyp ERR! stack at ChildProcess.emit (events.js:191:7)
>
>
> node-pre-gyp ERR! stack at maybeClose (internal/child_process.js:877:16)
>
>
> node-pre-gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:226:5)
>
>
> node-pre-gyp ERR! System Darwin 16.3.0
>
>
> node-pre-gyp ERR! command "/usr/local/bin/node"
> "/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/node_modules/.bin/node-pre-gyp"
> "install" "--fallback-to-build"
>
>
> node-pre-gyp ERR! cwd
> /usr/local/lib/node_modules/stf/node_modules/jpeg-turbo
>
>
> node-pre-gyp ERR! node -v v6.9.2
>
>
> node-pre-gyp ERR! node-pre-gyp -v v0.6.19
>
>
> node-pre-gyp ERR! not ok
>
>
> Failed to execute '/usr/local/bin/node
> /usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js build
> --fallback-to-build
> --module=/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v48-darwin-x64/jpegturbo.node
> --module_name=jpegturbo
> --module_path=/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v48-darwin-x64'
> (1)
>
>
> /usr/local/lib
>
>
> └── (empty)
>
>
> npm ERR! Darwin 16.3.0
>
>
> npm ERR! argv "/usr/local/bin/node" "/usr/local/bin/npm" "install" "-g"
> "stf"
>
>
> npm ERR! node v6.9.2
>
>
> npm ERR! npm v4.0.5
>
>
> npm ERR! code ELIFECYCLE
>
>
> npm ERR! jpeg-turbo@0.4.0 install: node-pre-gyp install
> --fallback-to-build
>
>
> npm ERR! Exit status 1
>
>
> npm ERR!
>
>
> npm ERR! Failed at the jpeg-turbo@0.4.0 install script 'node-pre-gyp
> install --fallback-to-build'.
>
>
> npm ERR! Make sure you have the latest version of node.js and npm
> installed.
>
>
> npm ERR! If you do, this is most likely a problem with the jpeg-turbo
> package,
>
>
> npm ERR! not with npm itself.
>
>
> npm ERR! Tell the author that this fails on your system:
>
>
> npm ERR! node-pre-gyp install --fallback-to-build
>
>
> npm ERR! You can get information on how to open an issue for this project
> with:
>
>
> npm ERR! npm bugs jpeg-turbo
>
>
> npm ERR! Or if that isn't available, you can get their info via:
>
>
> npm ERR! npm owner ls jpeg-turbo
>
>
> npm ERR! There is likely additional logging output above.
>
>
> npm ERR! Please include the following file with any support request:
>
>
> npm ERR! /Users/qualitest/Desktop/stf03012017/npm-debug.log
>
>
> QualiTests-Mac-mini-2:stf03012017 qualitest$ node -v
>
>
> v6.9.2
>
>
> QualiTests-Mac-mini-2:stf03012017 qualitest$
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/520>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SAPtJBUSH59GOz0EE30pUG5oczFks5rOycxgaJpZM4LaSoe>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
 Sorry but you're opening too many basic issues like this. We provide the
software and it works. It's your responsibility to have your environment
set up properly. I don't think we can provide any more advice to you, it's
starting to take way too much time.

On Wed, Jan 4, 2017 at 14:42 madangopal918 <notifications@github.com> wrote:

> Ok but I tried without using sudo, still i'm getting warnings and errors.
> In terminal 1 : All requirements had been installed and i'm getting stuck
> in Installation part npm install -g stf and not able to proceed further for
> building and running part. In terminal 2 : i'm running rethinkdb.
>
>
> So please do help.
>
>
>
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/520#issuecomment-270298811>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_bbG9DzGU8-d1VZjS3Xp8uCJ5Q3Jks5rOzE2gaJpZM4LaSoe>
> .
>
  This is a super comon issue. Basically your hardware sucks and you can do
nothing about it without getting better hardware. Read the README, our
advice in there is not a joke.
On Wed, Jan 4, 2017 at 12:31 liuang68 <notifications@github.com> wrote:

> hello，everybody，due to the server can only connect 9 usb,which leads to
> our STF platform can only connect 9 mobiles, i am confused about this
> issue, do you have any solutions about this?
>
>
> My system is Ubuntu 16.04 LTS
>
>
> greatful
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/519>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YJHKysXGrqDDZ7DWHvXolLatjTsks5rOxKIgaJpZM4LaQpY>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
 While that can also be an issue, this one sounds like the Intel problem
listed in the README.

On Fri, Jan 6, 2017 at 19:14 0x88l <notifications@github.com> wrote:

> Usb-hub need to access external power or will be disconnect.
>
>
>
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/519#issuecomment-270873120>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Y36Au-zb90zZZe7Lj7pEAm9H_2Qks5rPhQhgaJpZM4LaQpY>
> .
>
 No, it says the device is offline. It's your responsibility to make adb
work first before adding anything to stf.
On Wed, Jan 11, 2017 at 19:05 liuang68 <notifications@github.com> wrote:

> @ sorccu，hello,i'm trying to use 'stf provider --name "provider-windows_3"
> --connect-sub tcp://10.100.72.195:7250 --connect-push tcp://
> 10.100.72.195:7270 --storage-url http://10.100.72.195 --public-ip
> 10.100.72.195 --min-port=30001 --max-port=35000',but error.
>
>
> [image: image]
> <https://cloud.githubusercontent.com/assets/24601692/21844135/7b10b6d4-d828-11e6-8730-4f15904a7a10.png>
>
>
> can you tell me why???
>
>
>
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/519#issuecomment-271828093>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YJ09M_8RhwT8c2x-7xhXz1bNozwks5rRKlfgaJpZM4LaQpY>
> .
>
 See the deployment guide. But if your device is offline, it's not stf's
problem. Make sure things like 'adb shell' work before doing anything.
On Thu, Jan 12, 2017 at 10:52 liuang68 <notifications@github.com> wrote:

> @sorccu <https://github.com/sorccu> good morning,sorccu,can you tell me
> how to use 'stf provider''s commands?How do you write inside of the
> parameters？
>
>
>
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/519#issuecomment-272053393>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZiYGzdt70NkI2-9y046qOZp2T_Fks5rRYdtgaJpZM4LaQpY>
> .
>
 Yes, that works on some machines.  Most likely you did something wrong and now you have a strange installation. The newest master no longer uses commander (which might explain why it's missing) but you're using old code. Can't help with that, it's your mess.

I would simply reinstall and try again.  Unfortunately even though we originally used LDAP we haven't used it for
years now. If you need that feature please consider implementing it
yourself and making a pull request, as we are otherwise unlikely to do
anything about it.

On Fri, Dec 30, 2016 at 23:01 DiogoLG <notifications@github.com> wrote:

> Is it possible to restrict access to a specif group on STF when using LDAP?
>
>
> In my company I added a group to manage who will have access to STF.
>
>
> First I run STF without selecting the group and that works and I'm able to
> authenticate
>
>
> stf local --auth-type ldap --auth-options
> '["--ldap-url","$URL","--ldap-search-dn","DC=inner_dc,DC=inner_dc,DC=com","--ldap-bind-credentials","$PASS",
> "--ldap-bind-dn","CN=user_stf,OU=inner_ou,OU=inner_ou,DC=inner_dc,DC=inner_dc,DC=com","--ldap-search-field",
> "sAMAccountName"]'
>
>
> When I change the command to restrict a specific group I get a message of
> "authentication failed for user xxxxx"
>
>
> stf local --auth-type ldap --auth-options
> '["--ldap-url","$URL","--ldap-search-dn","CN=specific_group,OU=inner_ou,OU=inner_ou,DC=inner_dc,DC=inner_dc,DC=com","--ldap-bind-credentials","$PASS",
> "--ldap-bind-dn","CN=user_stf,OU=inner_ou,OU=inner_ou,DC=inner_dc,DC=inner_dc,DC=com","--ldap-search-field",
> "sAMAccountName"]'
>
>
> How can I grant access to STF for a specific group?
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/516>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_cS3yBZ2W44ZMKhIOwN0VBv6Aq11ks5rNQ7AgaJpZM4LYMzK>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  It means that something is already running on that port. Probably you
already started rethinkdb and forgot about it.

We don't provide rethinkdb support, if you have an issue starting rethinkdb
ask the rethinkdb people (although this particular request is so basic you
shouldn't need to ask anyone at all).

On Fri, Dec 30, 2016 at 18:49 madangopal918 <notifications@github.com>
wrote:

> when we execute the command
>
>
> rethinkdb
>
>
> we are getting the above error.
>
>
> what do we need to do to proceed further?
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/515>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_c5lDgrep5OFFNmIIyC-G0AX_fJkks5rNNO_gaJpZM4LYGCf>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  Just follow the README exactly, it'll work fine.
On Fri, Dec 30, 2016 at 16:29 Venkatesh01 <notifications@github.com> wrote:

>
>
> *What is the issue or idea you have?*
>
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
>
> *Please provide the steps to reproduce the issue.*
>
>
> *What is the expected behavior?*
>
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
>
> *Please run stf doctor and paste the output here.*
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/514>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_fSoxZBlh0ca7t3ibakFxt21IjSoks5rNLLAgaJpZM4LYCtK>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
 Sorry I don't think I can help you.
On Fri, Dec 30, 2016 at 17:01 Venkatesh01 <notifications@github.com> wrote:

> README means??
>
>
>
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/514#issuecomment-269743348>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ZTSMNHRQttM7oXJUubl52RvDnbwks5rNLpKgaJpZM4LYCtK>
> .
>
  It's just a warning, already fixed in master though.
On Fri, Dec 30, 2016 at 15:05 Venkatesh01 <notifications@github.com> wrote:

>
>
> *What is the issue or idea you have?*
>
>
> *Does it only happen on a specific device? Please run adb devices -l and
> paste the corresponding row.*
>
>
> *Please provide the steps to reproduce the issue.*
>
>
> *What is the expected behavior?*
>
>
> *Do you see errors or warnings in the stf local output? If so, please
> paste them or the full log here.*
>
>
> *Please run stf doctor and paste the output here.*
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/513>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_at8u2wT8ZPDielnEEVuTlXB96gCks5rNJ8fgaJpZM4LYBEZ>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  No, not right now.
On Wed, Dec 28, 2016 at 15:46 Aha <notifications@github.com> wrote:

> I can only see a list under devices menu.
>
>
> Can I see the all the real time screen instead?
>
>
> Anyone knows, thanks
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/511>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Tfyh6-G1qu4IijS7-rYEJANNhmFks5rMgWxgaJpZM4LWtix>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  Closing as this issue is very old. You can add `adb tcpip` devices with the `--allow-remote` option, but they perform very poorly. Not recommended.  Run `stf migrate` once before `stf local`. This may solve your problem. I had this error recently as well. My rethinkdb was starting extremely slowly since upgrading to Sierra, and that may have been the reason why the migration somehow didn't run. It may be related to https://github.com/rethinkdb/rethinkdb/issues/6047. I found a way to fix the slowness in there which also fixed the migration issue (although it could've been a coincidence).  Cause found by @perfectspr in #509. Now fixed in master.  We will need to look into this but I'm not sure when we'll have time.

Usually, given the distortion shown in the first comment, it means that the device is unable to scale the virtual display we create. Forcing 100% size fixes this, and explains why screenshots still work (they work because screenshots are taken at 100% size). Unfortunately, it is not easy to force only certain devices to 100% right now, and it would waste bandwidth and resources anyway.

Another type of distortion is when the screen has numerous visible artifacts, but is otherwise fine. That sometimes happens on other devices as well, but the cause is not known. My thinking is that we may not be consuming the frames from the virtual display quickly enough, but it's uncertain whether that's the case.

If anyone has any ideas or time to look into this, that would be much appreciated. I have an Amazon Fire  device, will look into this problem next day. Btw it used to work okay. I think the issue is probably that frames are not consumed quickly enough. Even though we lock the frame parts of the memory get reused. Unconfirmed though. The problem can't be reproduced on my Amazon Fire phone(Android 4.4.4). Can you paste your output of Display info in log? I think you need a newer version. Anyway the issue mostly occurs when the screen is moving. Like when you’re swiping left or right (iirc).  We don't know Chinese, please update the translations at Transifex if you
feel they need improvement. Then let us know in this ticket and we'll pull
the new translations.

On Fri, Dec 23, 2016 at 13:11 Xiao Wang <notifications@github.com> wrote:

> It's not about the taste. It's correctness, accuracy and common standards.
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/507#issuecomment-268938196>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_TXYrrkKn18xgz04cGKGE-88SFS-ks5rK0ntgaJpZM4LUiY7>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  Are you using STF 2.1.0 or newer? Ok can you do a logcat dump and attach it to this issue? I think the options are `adb logcat -B -d >out.log`. Yeah just dump the raw output with that command and attach the file to this issue. Or send it to simo @ {name of this github org} .io if you don't want to post it here. That file parses fine with [adbkit-logcat](https://github.com/openstf/adbkit-logcat). If you're using the latest STF, is it possible you may have forgot to run `npm install` to update the dependencies?  I'm really sorry but aside from the existing documentation you can find in the repo, there's no additional documentation. There's some additional information spread around in various issues here on GitHub. New contributors are very welcome but I'm not sure if any of us has time to provide guidance. I would recommend trying to get started by yourself and then creating new issues for more specific things you are having trouble with.  They're the cheapest cables that work reliably. Anker and Aukey cables work
fine too but they're quite a bit mire expensive.

On Sat, Dec 17, 2016 at 6:50 Marcos Rodrigues <notifications@github.com>
wrote:

> Hi, mates!
>
>
> Have you tested or recommend any other micro USB cable model different
> from those described in the "Recommended Hardware"section? I'm not having
> technical issues with the *monoprice* cables, but it would be nice if I
> could find another seller.
>
>
> Thanks!
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/503>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Zn6FreTh1DCBcE_28lh9QUxqAowks5rIwc4gaJpZM4LPoAS>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  This is an issue with the current architecture, some things are sent to all active browser sessions of a user. I'm not sure if we'll get to fixing it before a larger rewrite. Could it be fixed in some other way? Sure, but it's not very interesting, so don't count on it. PRs are welcome, of course.  Not really, it's a configuration issue for sure. Open the Chrome developer console on your friend's browser and there will probably be some kind of an error in there that should give you ideas about what's wrong.  Based on [this](http://stackoverflow.com/questions/28631635/cannot-access-openid-userinfo-endpoint-on-azure-aadsts90010-jwt-tokens-cannot) and [this](https://developer.salesforce.com/page/Login_with_Azure_AD), it should probably be:

https://login.windows.net/common/openid/userinfo  Please report back with whether it worked for you and close the ticket.  It would be helpful if you could list which virtual keys are present on the device.  Sometimes it means that the activity wasn't exported in `AndroidManifest.xml`. Does it work on other devices? Could be that a security setting is enabled that prevents the app from
starting via cli. Did you have to do anything special when you plugged in
the phone to get STFService working?

On Tue, Dec 6, 2016 at 1:42 PM, 0x88l <notifications@github.com> wrote:

> Other device is ok,Only opp A37.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/498#issuecomment-265059288>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_d3Cpz7xcW-m4RasnjCxgCOigiCKks5rFOevgaJpZM4LFBGc>
> .
>
  That's very interesting to see. Unfortunately I don't think you can make it
100% smooth easily. Have you tried making the screen capture size as small
as possible?

I have some improvements coming that will reduce memory usage a bit but I
don't think it would solve your issues.

On Mon, Dec 5, 2016 at 10:07 PM, zhuo <notifications@github.com> wrote:

> there is the pictures which can demostrate what have done.
> <https://camo.githubusercontent.com/ca638f94057976507a4344f9d1a73bebc3710d5a/687474703a2f2f7777312e73696e61696d672e636e2f6d773639302f6135653235343162677731666166796375727562386a32316b773076797777782e6a7067>
> <https://camo.githubusercontent.com/2a56f00b777f7ba240f035dc22570599bd097772/687474703a2f2f7777312e73696e61696d672e636e2f6d773639302f61356532353431626777316661667963753363736e6a32316b773076793162692e6a7067>
>
> as you can see, I rebuild the "Devices" tab content to many canvas so I
> can watch every devices screen change real-time. so I met the performance
> issue. cpu 100% and memory 100%.
>
> my solutions:
>
>    1. I create a angular directive which contain just one canvas. then i
>    get the screen data from many node process( i have read the code , when a
>    device plugin the a new process was created and a port was distributed).
>    then i use canvas drawimage function to draw the each blob data at it right
>    position. it seem has some good effect. memory consumption has down。
>
> 2.another solution is that restrict the amount of websocket information
> transmission。 i setInterval in each node process( the file is
> stf/lib/units/device/plugins/screen/stream.js ) to control it send frame
> data every 1000ms.
>
>    1. divide into pages. limit maximum 18 devices send data at each 1s
>
> but there also some problem:
>
>    1. send data each 1s make it seem not smooth in browser. but if i send
>    data more faster there are so many request . chrome not work well.
>
> do you have some advice. i really need a more efficient solution
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/497>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_WXSGSuDWLOOyb76u0lMASSXs4qaks5rFAyigaJpZM4LEM9v>
> .
>
 Yeah, unfortunately I think limiting the FPS and jpeg quality would be the best option. The current code makes it a bit difficult to do, however. That should improve soonish, though.

You could also build a separate app around minicap. That 1s lag is because of another reason. My changes will fix that but I can't promise when I'll have time to merge my changes. It'll also remove unnecessary drawImage calls.  Maybe you have cookies disabled or something.
On Wed, May 10, 2017 at 3:18 gabcoyne <notifications@github.com> wrote:

> Any progress/resolution here?
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/496#issuecomment-300256476>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VmWUl1o1guGXg54ekvwjv9yzO5Dks5r4K4HgaJpZM4LDfPs>
> .
>
  Sure. The minicap readme describes the format, just conect to the socket
and read the data in your app. You don't need to run stf, minicap itself is
enough.

On Thu, 1 Dec 2016 at 23:48 Alexandre Grais <notifications@github.com>
wrote:

> Hi Guys,
>
> Is it possible to use the stream of screen from minicap or from openstf
> from an other webpage ? I want to embed the screen in one tv dashboard we
> have.
>
> Thank you for your help.
>
> Rgds.
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/494>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VCJjILJI_OXeBuN2KmdN9Kp2iyrks5rDt5XgaJpZM4LBekd>
> .
>
  Don't ping our usernames. This isn't twitter.

It is possible and we used to have a feature like that. However, it's more complex than you might think. If the devices are different in size or layout, what you touch on one device might end up touching something entirely else on another device. That's why the feature is not available anymore.  It's a limitation in recent Intel chipsets. You can't fix it, just believe us and get better hardware. AMD is a lot better but it has been unreliable in other ways, not recommended.  Maybe it's timing out? If the adb socket doesn't see traffic going into the device for a while, it'll disconnect. The timeout can't be disabled completely, but you can use a ridiculously large value for the same effect. Try `stf local -t 86400` for a 24h timeout. By default device will disconnect in 15 mins if kept idle (No UI activity). You will have to set timeout more than 15 mins while asking for device i.e calling reserve device endpoint.

```
curl -X POST --header "Content-Type: application/json" --data '{"serial":"xxx", "timeout": 900000}' -H "Authorization: Bearer YOUR-TOKEN-HERE" https://stf.example.org/api/v1/user/devices
``` This is not web session or user session timeout. It is device timeout, meaning user will not be able to use that device if kept idle for timeout period.

If disconnections are sporadic then it may be because of network issue or something else. Logs can help in diagnosis. Also, will not suggest to run long test suites in one go. Better to divide into smaller one.

Regarding error, can you write what request you used to reserve device? yes, you can override timeout while requesting for a device. timeout is in msec, so take care about that. You need to replace MY_TOKEN with your stf api access token.
 CLI is in seconds, @vbanthia said that the API is in ms. Seems like this was solved.  I don't think there have been any changes related to that, and you're the
only person to report this issue. I'm thinking it's probably a
configuration issue.

Things to try:

- try logging in with an incognito window, perhaps there's something wrong
with your cache
- before trying to log in, open chrome developer tools and its network tab.
Make sure "preserve log" or whatever it's currently called is checked. Then
attempt to log in. Paste the relevant requests and responses here.

On Thu, 24 Nov 2016 at 22:09 denis99999 <notifications@github.com> wrote:

> My context
>
>    - *latest openstf image from docker hub build last day*
>    - debian jessie 3.16.0-4-amd64
>    - full deployment (DEPLOYMENT.md) with one machine running all
>    services except provider service running on another machine (ARM one:
>    openstf/stf-armv7l image)
>    - see other configuration details in my previous issue #479
>    <https://github.com/openstf/stf/issues/479>
>
> What the issue
>
>    - when I connect to the login page, I enter my login/passwd (i.e. mock
>    authentification), then an empty page is returned !!!
>    - note this issue appear with or without SSL configuration
>    - note this issue didn't appear in the previous build
>
> Work around
>
>    - I switched to the previous release v2.3.0 in which this issue
>    doesn't appear
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/483>, or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SIEsVnUTSbdqWEWzCZY2xJ1K1IRks5rBYx1gaJpZM4K7ooe>
> .
>
 Oh... maybe this is related to openstf/stf#482. @gunta any chance you could take a look at the webpack config? Looks like maybe it needs some special handling. Pushed a fix. Could you check if this issue is resolved with latest docker image? There will be a new docker image with fix, can you pull latest image and test it again. I pushed changes 15 mins ago.  Good reporting. Thanks to all that information I can immediately say that your secrets are different. One is "Kute KittyKat" and one is "Kute Kittykat". They are case sensitive. Make them match and things should work fine. @denis99999 Nice reporting.

> In addition, where is the place to ask for new openstf features ? For instance, the main feature I would like to have is a reservation system enabling users to reserve smartphones for a time slot, is it planned in the roadmap ?

There is an [open PR for that](https://github.com/openstf/stf/pull/101), you might want to discuss it over there. 
Also for other features just search / open a new issue. PRs are of course welcome.  Check https://github.com/openstf/stf/issues/170 & https://github.com/openstf/stf/issues/428 This is basically a limitation of STF. Two users cannot add same adbkey because STF uses adbkey to identify the user. But it should show some error dialogue in case someone try to add duplicate key.  > Basically, if we're not actually trying to use the same keys on multiple PCs, do you see why this problem could arise? And how we can avoid it?

In most of the cases each PC has its own unique adbkey which you can find in `~/.android` directory. Most probably some body else logged in with that account and has added adbkey into his account that is why other users are not able to use that adbkey.

In case you meet this problem again, you can search for the user who is using that PC adbkey from rethinkdb. Follow these steps.
1. Install adbkit globally
```
npm install -g adbkit
```
2. Get fingerprint of current machine adbkey.pub
```
adbkit pubkey-fingerprint ~/.android/adbkey.pub 
```
3. Go to rethinkdb data explored and fire following query
```
r.db('stf').table('users').getAll($FINERPRINT_STRING, {index: 'adbKeys'});
```

This will give you user who have add adbkey. STF identify user by its email, so if email is changed then it will be a different user.  I have one and it works fine. Run `adb shell getevent -ilp` and post the
output. Also, run `adb devices -l` and post the line for your device.

On Tue, Nov 22, 2016 at 12:02 PM, scottchejin notifications@github.com
wrote:

> INF/device:plugins:touch 4553 [7d068e69] Launching screen service
> INF/device:plugins:touch 4553 [7d068e69] Connecting to minitouch service
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "open: Permission
> denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event8 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event7 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event6 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/mouse2 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event3 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/mouse0 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event1 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event0 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/mice for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event5 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event4 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/mouse1 for inspectionopen: Permission denied"
> INF/device:plugins:touch 4553 [7d068e69] minitouch says: "Unable to open
> device /dev/input/event2 for inspectionUnable to find a suitable touch
> device"
> WRN/device:plugins:touch 4553 [7d068e69] Shell keeping minitouch running
> ended unexpectedly
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/477, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_ScNjvEGKWydqKHtY0QyrlTipgZbks5rAls-gaJpZM4K49Kt
> .
 Yeah well that's broken, then. Are you running an official ROM?

On Tue, 22 Nov 2016 at 14:04 scottchejin notifications@github.com wrote:

> adb shell getevent -ilp:
> could not open /dev/input/event8, Permission denied
> could not open /dev/input/event7, Permission denied
> could not open /dev/input/event6, Permission denied
> could not open /dev/input/mouse2, Permission denied
> could not open /dev/input/event3, Permission denied
> could not open /dev/input/mouse0, Permission denied
> could not open /dev/input/event1, Permission denied
> could not open /dev/input/event0, Permission denied
> could not open /dev/input/mice, Permission denied
> could not open /dev/input/event5, Permission denied
> could not open /dev/input/event4, Permission denied
> could not open /dev/input/mouse1, Permission denied
> could not open /dev/input/event2, Permission denied
> 
> adb devices -l:
> List of devices attached
> 7d068e69 device usb:1-1 product:gemini model:MI_5 device:gemini
> 
> —
> You are receiving this because you commented.
> 
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/477#issuecomment-262148596, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_W8ZZDkInydjiqtTbI228aDuxN0vks5rAnfagaJpZM4K49Kt
> .
 8.0 works fine. Not sure about 8.1, would be unfortunate if they've locked it down. Looks like in MIUI 8.1 there's a new setting in Developer options called "USB debugging (Security settings)" that is disabled by default. To enable the setting you have to add your Mi account, but I believe it should work after that.

![mi5_enable_simulated_touch](https://cloud.githubusercontent.com/assets/32509/20514108/8442ffb4-b0cd-11e6-836e-67bdbca62804.png)

Let me know how it goes. You probably have to update your phone, then.
On Mon, Feb 27, 2017 at 11:47 lql0ve <notifications@github.com> wrote:

> Hey there ,
> I have the same issues , my MI 5s does't have the setting "USB debugging
> (Security settings)",MIUI Version : 8.0.18
>
>   adb devices -l :
>        129d5a98               device usb:336592896X product:capricorn model:MI_5s device:capricorn
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/477#issuecomment-282615107>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_YSv78Tcd0qpnrwgddFVXO64uav7ks5rgjk4gaJpZM4K49Kt>
> .
>
 Btw did you happen to have a MI account on that device when you checked? In later versions the option is there and says you have to add a MI account first. I'm thinking that *perhaps* in the initial versions where they did that, they didn't even show the option unless you had an account. It's possible that if you add an account, the option would magically just appear. I have no device to test the theory with, though. :( Did you read everything in this issue? Did you change the setting that you must change? But did you change the setting shown in https://github.com/openstf/stf/issues/477#issuecomment-262163984? Ok good. node-jpeg-turbo is actually already compatible with Windows thanks to a contributor, but that version has not been released yet. #603 now has a better guide for adding Xiaomi devices to STF.  It's written in the README. It's a problem with the cpu/chipset and nothing
but a hardware change can solve it.

On Mon, 21 Nov 2016 at 0:16 HellDima notifications@github.com wrote:

> Hello,
> 
> We are running STF on Ubuntu 16.4, inside the docker.
> It's a local run.
> 
> We are trying to connect more than 8 devices and it stop showing to us.
> ADB devices:
> List of devices attached
> 84B7N16804001148 device
> 4dfc4c8d3d785005 device
> dd183316 device
> a211579a device
> 4df194c26c0b8f09 device
> LGH850da459a86 device
> F5AZCY05E419 device
> df58b11703329c01 device
> 
> The other devices are not displayed, and it's a random device, depending
> on what we connect first.
> 
> Is this an Ubuntu problem or STF?
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/476, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_SQfTjTXqSod4hc3W6fyyi-jc6JSks5rAGQ3gaJpZM4K3j_r
> .
 It's all in the README. It's not about powerful hardware, it's about Intel
only supporting a limited number of USB endpoints in their recent hardware.

Please read the README and close this issue. Everything you've asked is
there.

On Mon, 21 Nov 2016 at 0:37 HellDima notifications@github.com wrote:

> so how strong suppose to be my PC to run more devices?
> we use now:
> i5-4590, 16G, with SSD
> 
> Or can you give us recommendation on server specs to run more devices?
> 
> —
> You are receiving this because you commented.
> 
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/476#issuecomment-261785214, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_fYWfLL3_qAJeRw19okjEuyBqXi2ks5rAGkogaJpZM4K3j_r
> .
  rm -rf node_modules && npm install

On Sat, Nov 19, 2016 at 3:36 PM, tobecrazy notifications@github.com wrote:

> Error: Could not locate the bindings file. Tried:
> → /usr/local/lib/node_modules/stf/node_modules/zmq/build/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Debug/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/build/Release/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Debug/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/Debug/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/out/Release/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/Release/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/build/default/zmq.node
> → /usr/local/lib/node_modules/stf/node_modules/zmq/compiled/
> 7.1.0/darwin/x64/zmq.node
> at bindings (/usr/local/lib/node_modules/stf/node_modules/bindings/
> bindings.js:88:9)
> at Object. (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/
> index.js:6:30)
> at Module._compile (module.js:573:32)
> at Object.Module._extensions..js (module.js:582:10)
> at Module.load (module.js:490:32)
> at tryModuleLoad (module.js:449:12)
> at Function.Module._load (module.js:441:3)
> at Module.require (module.js:500:17)
> at require (internal/module.js:20:19)
> at Object. (/usr/local/lib/node_modules/stf/node_modules/zmq/index.js:
> 2:18)
> at Module._compile (module.js:573:32)
> at Object.Module._extensions..js (module.js:582:10)
> at Module.load (module.js:490:32)
> at tryModuleLoad (module.js:449:12)
> at Function.Module._load (module.js:441:3)
> at Module.require (module.js:500:17)
> FTL/cli:local 11980 [
> 
> _] Child process had an error ExitError: Exit code "1" at ChildProcess.
> (/usr/local/lib/node_modules/stf/lib/util/procutil.js:49:23) at emitTwo
> (events.js:106:13) at ChildProcess.emit (events.js:191:7) at
> Process.ChildProcess._handle.onexit (internal/child_process.js:215:12)
> INF/cli:local 11980 [_] Shutting down all child processes
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/475, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_bIypOAREy8-Jlp0KC7JnU53Rydoks5q_pj6gaJpZM4K3Ldy
> .
  And you're sure you're using the latest stf?

Can you check what the version field in `node_modules/minicap-prebuilt/package.json` says?  @lhplj Did you find a solution to this problem???I am facing a similar issue  Open developer tools in chrome and check what the error is. Try an
incognito tab to see if any of your installed extensions are causing
problems.

On Mon, 14 Nov 2016 at 19:07 yashasvimakin notifications@github.com wrote:

> Hi ,
> I Setup Stp as mentioned in Github, but when i connect my android device
> locally and open the url in browser -> Sign in -> Connect to the android :
> this apperas:
> [image: screenshot 2016-11-14 15 05 35]
> https://cloud.githubusercontent.com/assets/5002269/20260550/2d76b250-aa80-11e6-9009-a6c6549e6489.png
> In Console this gets printed:
> INF/util:datautil 1703 [*] Device database does not have an entry for
> "ZY222XRRBT" (model "XT1562"/"lux_retasia_ds"). This is not an error, it
> only means that we don't have data for it yet.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/468, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_Z_QHSwyK9QgXXHurgfBikEnRWcXks5q-DL6gaJpZM4KxJQQ
> .
 @David-gulu I have a master slave setup - provider1 and all stf + dependencies
slave has adb and provider2
I have set   --screen-ws-url-pattern "ws://${IP_ADDRESS}/d/mumbai/<%= serial %>/<%= publicPort %>/" on the slave machine while starting the provider

and in nginx config on master i have the below entry :+1: 
location ~ "^/d/mumbai/([^/]+)/(?<port>[0-9]{5})/$" {
  proxy_pass http://slaveip:$port/;
  proxy_http_version 1.1;
  proxy_set_header Upgrade $http_upgrade;
  proxy_set_header Connection $connection_upgrade;
  proxy_set_header X-Forwarded-For $remote_addr;
  proxy_set_header X-Real-IP $remote_addr;
}

The device is screen is not refreshed on stf for the remote device.But when i manually refresh browser, its shows the next screen on stf console  device screen
Is this because of network latency???
or any configuration problem?

Provider log 
```
`2018-03-29T06:12:46.211Z INF/device:support:push 1654 [330042569d5282df] Sending output to "tcp://masterip:7270"
2018-03-29T06:12:46.216Z INF/device 1654 [330042569d5282df] Preparing device
2018-03-29T06:12:46.668Z INF/device:support:sub 1654 [330042569d5282df] Receiving input from "tcp://masterip:7250"
2018-03-29T06:12:46.669Z INF/device:support:sub 1654 [330042569d5282df] Subscribing to permanent channel "*ALL"
2018-03-29T06:12:46.780Z INF/device:support:properties 1654 [330042569d5282df] Loading properties
2018-03-29T06:12:46.852Z INF/device:support:sdk 1654 [330042569d5282df] Supports SDK 23
2018-03-29T06:12:46.853Z INF/device:support:abi 1654 [330042569d5282df] Supports ABIs armeabi-v7a, armeabi
2018-03-29T06:12:47.027Z INF/device:resources:minicap 1654 [330042569d5282df] Installing "/app/node_modules/minicap-prebuilt/prebuilt/armeabi-v7a/bin/minicap" as "/data/local/tmp/minicap"
2018-03-29T06:12:47.029Z INF/device:resources:minicap 1654 [330042569d5282df] Installing "/app/node_modules/minicap-prebuilt/prebuilt/armeabi-v7a/lib/android-23/minicap.so" as "/data/local/tmp/minicap.so"
2018-03-29T06:12:47.210Z INF/device:resources:service 1654 [330042569d5282df] Checking whether we need to install STFService
2018-03-29T06:12:47.789Z INF/device:resources:service 1654 [330042569d5282df] Running version check
2018-03-29T06:12:48.514Z INF/device:resources:service 1654 [330042569d5282df] STFService up to date
2018-03-29T06:12:48.519Z INF/device:plugins:service 1654 [330042569d5282df] Launching agent
2018-03-29T06:12:49.267Z INF/device:plugins:service 1654 [330042569d5282df] Agent says: "Listening on @stfagent"
2018-03-29T06:12:49.308Z INF/device:plugins:service 1654 [330042569d5282df] Launching service
2018-03-29T06:12:49.311Z INF/device:plugins:service 1654 [330042569d5282df] Agent says: "InputClient started"
2018-03-29T06:12:50.070Z INF/device:plugins:display 1654 [330042569d5282df] Reading display info
2018-03-29T06:12:50.115Z INF/device:plugins:phone 1654 [330042569d5282df] Fetching phone info
2018-03-29T06:12:50.142Z INF/device:plugins:identity 1654 [330042569d5282df] Solving identity
2018-03-29T06:12:50.143Z INF/device:plugins:solo 1654 [330042569d5282df] Subscribing to permanent channel "74bk5k3H+n2KZT0GYF1f31vJ3zU="
2018-03-29T06:12:50.145Z INF/device:plugins:screen:stream 1654 [330042569d5282df] Starting WebSocket server on port 15836
2018-03-29T06:12:50.303Z INF/device:resources:minitouch 1654 [330042569d5282df] Installing "/app/node_modules/minitouch-prebuilt/prebuilt/armeabi-v7a/bin/minitouch" as "/data/local/tmp/minitouch"
2018-03-29T06:12:50.406Z WRN/device:plugins:data 1654 [330042569d5282df] Unable to find device data { serial: '330042569d5282df',
  platform: 'Android',
  manufacturer: 'SAMSUNG',
  operator: null,
  model: 'SM-T810',
  version: '6.0.1',
  abi: 'armeabi-v7a',
  sdk: '23',
  product: 'gts210wifixx',
  cpuPlatform: 'exynos5',
  openGLESVersion: '3.1',
  display:
   { id: 0,
     width: 1536,
     height: 2048,
     xdpi: 265.40399169921875,
     ydpi: 264.0559997558594,
     fps: 59,
     density: 2,
     rotation: 0,
     secure: true,
     size: 9.6772154390038,
     url: 'ws://masterip/d/mumbai/330042569d5282df/15836/' },
  phone: { network: 'UNKNOWN' } }
2018-03-29T06:12:50.416Z INF/device:plugins:touch 1654 [330042569d5282df] Touch origin is top left
2018-03-29T06:12:50.417Z INF/device:plugins:touch 1654 [330042569d5282df] Requesting touch consumer to start
2018-03-29T06:12:50.418Z INF/device:plugins:touch 1654 [330042569d5282df] Launching touch service
2018-03-29T06:12:50.423Z INF/device:plugins:touch 1654 [330042569d5282df] Connecting to minitouch service
2018-03-29T06:12:50.494Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Note: device /dev/input/mouse0 is not supported by libevdev"
2018-03-29T06:12:50.634Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
2018-03-29T06:12:50.869Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Type B touch device sec_touchscreen (1535x2047 with 10 contacts) detected on /dev/input/event3 (score 2109)"
2018-03-29T06:12:51.149Z INF/device:plugins:touch 1654 [330042569d5282df] Reading minitouch banner
2018-03-29T06:12:51.150Z INF/device:plugins:touch 1654 [330042569d5282df] minitouch says: "Connection established"
2018-03-29T06:12:51.200Z INF/device:plugins:vnc 1654 [330042569d5282df] Starting VNC server on port 15838
2018-03-29T06:12:51.205Z INF/device:plugins:browser 1654 [330042569d5282df] Loading browser list
2018-03-29T06:12:51.235Z INF/device:plugins:browser 1654 [330042569d5282df] Updating browser list
2018-03-29T06:12:51.237Z INF/device:plugins:mute 1654 [330042569d5282df] Will not mute master volume
2018-03-29T06:12:51.362Z INF/device:resources:minirev 1654 [330042569d5282df] Installing "/app/vendor/minirev/armeabi-v7a/minirev" as "/data/local/tmp/minirev"
2018-03-29T06:12:51.445Z INF/device:plugins:forward 1654 [330042569d5282df] Launching reverse port forwarding service
2018-03-29T06:12:51.451Z INF/device:plugins:forward 1654 [330042569d5282df] Connecting to reverse port forwarding service
2018-03-29T06:12:52.184Z INF/device:plugins:connect 1654 [330042569d5282df] Listening on port 15837
2018-03-29T06:12:52.187Z INF/device 1654 [330042569d5282df] Fully operational
```

`

  Sounds like an issue with the `--public-ip` option. Try opening the developer console in Chrome, it'll probably have an error about a websocket. See which URL it's trying to connect to, it'll probably be incorrect.
 Your config is wrong. If you're running stf on port 7100, the websocket
should connect to port 7100 too. Please read the deployment guide for a
working example.

On Mon, 14 Nov 2016 at 13:34 roseantony notifications@github.com wrote:

> Thanks sorccu. It was giving the following error:-
> WebSocket connection to 'ws://
> 10.185.1.34:7110/socket.io/?uip=%3A%3Affff%3A127.0.0.1&EIO=3&transport=websocket'
> failed: WebSocket is closed before the connection is established.
> 
> I removed the ip and ran stf again. Its still giving the error:-
> 1.43c0029….chunk.js:50606 WebSocket connection to 'ws://localhost:7110/
> socket.io/?uip=%3A%3Affff%3A127.0.0.1&EIO=3&transport=websocket' failed:
> Error in connection establishment: net::ERR_CONNECTION_REFUSED.
> 
> Could you please help?
> 
> —
> You are receiving this because you commented.
> 
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/467#issuecomment-260246634, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_Z4l3zk2CZ_dVpTqzsQzqvMaCP-qks5q9-TZgaJpZM4Kw8Hh
> .
 Sorry but stf local is for development purposes only, it probably won't
work as it might not expose all the necessary configuration options.

On Mon, 14 Nov 2016 at 14:04 roseantony notifications@github.com wrote:

> I had ran the following command to run stf:-
> docker run --privileged -itd --name stfpublic --link think_db:rethinkdb -p
> 7100:7100 -v /dev/bus/usb:/dev/bus/usb chuross/stf-adb stf local
> 
> I had used the dockerfile available in docker hub. Do I need to setup STF
> as mentioned in deployment guide? I am new to docker and I have no idea how
> to begin. :(
> 
> —
> You are receiving this because you commented.
> 
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/467#issuecomment-260249241, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_UsT8gCGpdnsAkL_YFCRzNf8v_Bnks5q9-vggaJpZM4Kw8Hh
> .
 It is not advised to use Virtual Machine for STF for production use because unreliable USB connection. 

Anyways, if you are using VirtualBox for VM then you will have to register connected Android devices in Virtual Machine. 

Check this to know how to do register devices. https://github.com/openstf/setup-examples/blob/master/docs/coreos_fleet.md#configuration  What's the exact command you run stf with?
 Closing as the request information has not been provided.  Please check #407 and see if you have a similar setting. Don't forget to post your solution here if you find one!
 Our S6 was working fine though, so it may just be that particular model, or perhaps a software update.
  Interesting. It's normal for the touch resolution to be different than screen resolution, that shouldn't cause any issues. However, looking at pictures of the V10, it seems that there's an area above the usual menu bar that's part of the touch screen, yet operates as a separate tiny display for icons. It seems like the coordinates are off by just about the height of the icon area.
 I think for this particular issue I would have to have one of those devices... I'll think about it but they're fairly expensive.
 Yeah. Unfortunately these are too expensive for me to buy right now. If someone wants to donate a new or used V10 or V20, or money to purchase one, that would be great. Model from any region is fine. I've ordered a refurbished V10 from Aliexpress for $149.99 and free shipping. It'll take quite a while to arrive, but I might look into this once it does. It would be great if you guys could ask your respective companies to donate to the project to cover the costs. They are not always equal - at least on minitouch level. On many devices (e.g. Samsung) the touch resolution is much higher than the display resolution. I've received the refurbished V10, however it seems that the ROM has been modified. It seems to have been rooted and various things in the shell don't work right. Can't use it with STF. I don’t want to have hardcoded device specific workarounds if at all possible. That being said, the stf-device-db module contains a few special cases for problematic devices. You could add it there I suppose. First, though, we should try to solve this in an automated way. Yes that would be great :) Unfortunately it seems that I can't help until I figure out how to find and flash a stock ROM on my v10, which seems to be a huge pain. I was able to reflash the V10 with the help of a Windows virtual machine, the LG Phone From app (which I downloaded on a safe phone, then pulled the .apk and pushed it to the compromised one) to get a stock firmware link, and various shady software (namely LGUP that finally worked) from the XDA developers forum. I guess it'll be usable after all. Here's the `adb shell dumpsys window` output from the V10 (on Android 6.0):

```
WINDOW MANAGER LAST ANR (dumpsys window lastanr)
  <no ANR has occurred since boot>

WINDOW MANAGER POLICY STATE (dumpsys window policy)
    mSafeMode=false mSystemReady=true mSystemBooted=true
    mLidState=-1 mLidOpenRotation=-1 mCameraLensCoverState=-1 mHdmiPlugged=false
    mLastSystemUiFlags=0x1608600 mResettingSystemUiFlags=0x0 mForceClearedSystemUiFlags=0x0
    mWakeGestureEnabledSetting=true
    mSupportAutoRotation=true
    mUiMode=1 mDockMode=0 mCarDockRotation=-1 mDeskDockRotation=-1
    mUserRotationMode=0 mUserRotation=0 mAllowAllRotations=-1
    mCurrentAppOrientation=5
    mCarDockEnablesAccelerometer=true mDeskDockEnablesAccelerometer=true
    mLidKeyboardAccessibility=0 mLidNavigationAccessibility=0 mLidControlsSleep=false
    mShortPressOnPowerBehavior=1 mLongPressOnPowerBehavior=1
    mDoublePressOnPowerBehavior=0 mTriplePressOnPowerBehavior=0
    mHasSoftInput=true
    mAwake=false
    mScreenOnEarly=false mScreenOnFully=false
    mKeyguardDrawComplete=false mWindowManagerDrawComplete=false
    mOrientationSensorEnabled=false
    mOverscanScreen=(0,0) 1440x2560
    mRestrictedOverscanScreen=(0,0) 1440x2392
    mUnrestrictedScreen=(0,0) 1440x2560
    mRestrictedScreen=(0,0) 1440x2392
    mStableFullscreen=(0,0)-(1440,2392)
    mStable=(0,96)-(1440,2392)
    mSystem=(0,0)-(1440,2560)
    mCur=(0,96)-(1440,2392)
    mContent=(0,96)-(1440,2392)
    mVoiceContent=(0,96)-(1440,2392)
    mDock=(0,96)-(1440,2392)
    mDockLayer=268435456 mStatusBarLayer=161010
    mShowingLockscreen=true mShowingDream=false mDreamingLockscreen=true mDreamingSleepToken=null
    mStatusBar=Window{c37fd89 u0 StatusBar} isStatusBarKeyguard=true
    mNavigationBar=Window{4e51dc0 u0 NavigationBar}
    mFocusedWindow=Window{c37fd89 u0 StatusBar}
    mTopFullscreenOpaqueWindowState=Window{72a9813 u0 com.lge.launcher2/com.lge.launcher2.Launcher}
    mTopFullscreenOpaqueOrDimmingWindowState=Window{f4c02da u0 com.android.phone}
    mTopIsFullscreen=false mHideLockScreen=false
    mForceStatusBar=false mForceStatusBarFromKeyguard=true
    mDismissKeyguard=0 mWinDismissingKeyguard=null mHomePressed=false
    mAllowLockscreenWhenOn=false mLockScreenTimeout=120000 mLockScreenTimerActive=false
    mEndcallBehavior=2 mIncallPowerBehavior=1 mLongPressOnHomeBehavior=2
    mLandscapeRotation=1 mSeascapeRotation=3
    mPortraitRotation=0 mUpsideDownRotation=2
    mDemoHdmiRotation=1 mDemoHdmiRotationLock=false
    mUndockedHdmiRotation=-1
    mKeyMapping.size=0
    BarController.StatusBar
      mState=WINDOW_STATE_SHOWING
      mTransientBar=TRANSIENT_BAR_NONE
    BarController.NavigationBar
      mState=WINDOW_STATE_HIDDEN
      mTransientBar=TRANSIENT_BAR_NONE
    PolicyControl.sImmersiveStatusFilter=null
    PolicyControl.sImmersiveNavigationFilter=null
    PolicyControl.sImmersivePreconfirmationsFilter=null
    WakeGestureListener
      mTriggerRequested=false
      mSensor=null
    WindowOrientationListener
      mEnabled=false
      mCurrentRotation=0
      mSensor={Sensor name="Motion Accel", vendor="QTI", version=2, type=499898101, maxRange=1.0, resolution=1.0, power=0.17999268, minDelay=0}
      mRate=2
      mProposedRotation=-1
      mPredictedRotation=-1
      mLastFilteredX=-0.4284668
      mLastFilteredY=-0.113967896
      mLastFilteredZ=10.172745
      mLastFilteredTimestampNanos=304736465934 (169108.08ms ago)
      mTiltHistory={last: 88.0}
      mFlat=false
      mSwinging=false
      mAccelerating=false
      mOverhead=false
      mTouched=false
      mTiltToleranceConfig=[[-25, 70], [-25, 65], [-25, 60], [-25, 65]]
     mMenuLongPressEnabled=true
     mRecentKeyLongpressEnabled=true
     mHWMenuKeyDB =0
     mVolumeKeyShortcutStatus=1
     mHotKeyCustomizing=false
     mHotKeyLongPressEnabled=false
     mHotKeyMode=0
     mQuickClipVolumeKeyCombo=false
     mAccelSensorNotSupported=false
     mSimSwitchingKey=false
     mFourthKeySharing=false
     mRearSideKeyEnable =true
     sVolumeUpKeyShortcutAction=2
     sVolumeDownKeyShortcutAction=1
     mVolumeKeyLongPressEnabled=true
     mVolumeKeyDoublePressEnabled=true
     mSupporLightSensor=true
     mHomeKeyExceptionInECMMode=false
         mScreenOffKey=true
     sKeyExceptionWinState=Window{72a9813 u0 com.lge.launcher2/com.lge.launcher2.Launcher}
     sPowerKeyScreenOnInCalling=true
     mSupportSmartCover=true
     mHWKeyControlMode=false
     mRestartActionConfigEnabled=false
     mPowerVolumeDownReset=false
     mSupportForcedPowerOff=true
     mDualWindowKeyStatus=1
     mDualWindowByBackLongPressed=false

WINDOW MANAGER ANIMATOR STATE (dumpsys window animator)
    DisplayContentsAnimator #0:
      Window #0: WindowStateAnimator{351ff69 com.android.systemui.ImageWallpaper}
      Window #1: WindowStateAnimator{9f1edee com.lge.launcher2/com.lge.launcher2.Launcher}
      Window #2: WindowStateAnimator{695028f AssistPreviewPanel}
      Window #3: WindowStateAnimator{dd3d91c ClipTray}
      Window #4: WindowStateAnimator{7022925 CliptrayCue}
      Window #5: WindowStateAnimator{c12fafa }
      Window #6: WindowStateAnimator{3e938ab SecondScreen_StatusBar_com.android.systemui (0)}
      Window #7: WindowStateAnimator{8d36b08 KeyguardScrim}
      Window #8: WindowStateAnimator{cd132a1 SecondScreen_Base_com.lge.signboard (0)}
      Window #9: WindowStateAnimator{c05ccc6 SecondScreen_System_com.lge.signboard (0)}
      Window #10: WindowStateAnimator{a00b487 SurfaceView}
      Window #11: WindowStateAnimator{b82fb4 StatusBar}
      Window #12: WindowStateAnimator{62d57dd NavigationBar}


    mBulkUpdateParams=0x8 ORIENTATION_CHANGE_COMPLETE

WINDOW MANAGER SESSIONS (dumpsys window sessions)
  Session Session{2bd0e76 3364:1000}:
    mNumWindow=2 mClientDead=false mSurfaceSession=android.view.SurfaceSession@401ef52
  Session Session{31e3c7d 3033:1000}:
    mNumWindow=2 mClientDead=false mSurfaceSession=android.view.SurfaceSession@72a1223
  Session Session{3aa958d 3020:u0a10059}:
    mNumWindow=6 mClientDead=false mSurfaceSession=android.view.SurfaceSession@8829320
  Session Session{46037ce 3550:1001}:
    mNumWindow=1 mClientDead=false mSurfaceSession=android.view.SurfaceSession@32c94d9
  Session Session{c0b43e4 3629:u0a10048}:
    mNumWindow=1 mClientDead=false mSurfaceSession=android.view.SurfaceSession@82bae9e
  Session Session{cdc7cff 3425:u0a10036}:
    mNumWindow=0 mClientDead=false mSurfaceSession=android.view.SurfaceSession@601ad7f
  Session Session{d4845c1 1358:1000}:
    mNumWindow=1 mClientDead=false mSurfaceSession=android.view.SurfaceSession@cdc14c


WINDOW MANAGER DISPLAY CONTENTS (dumpsys window displays)
  Display: mDisplayId=0
    init=1440x2720 640dpi cur=1440x2560 app=1440x2392 rng=1440x1344-2232x2136
    deferred=false layoutNeeded=false
  mStacks[0]0
    mStackId=0
    mDeferDetach=false
    {taskId=13 appTokens=[AppWindowToken{f8f1d7a token=Token{92745a5 ActivityRecord{21979c u0 com.lge.launcher2/.Launcher t13}}}] mdr=false}
    mDimLayer:
     mDimSurface=Surface(name=DimLayer) mLayer=110999 mAlpha=0.6
     mLastBounds=[0,0][1440,2560] mBounds=[0,0][1440,2560]
     Last animation:  mDuration=200 mStartTime=45813 curTime=473847
      mStartAlpha=0.0 mTargetAlpha=0.6
    mDimWinAnimator=WindowStateAnimator{c12fafa }

  Application tokens in top down Z order:
  mStackId=0
    mTaskId=13
    Activity #0 AppWindowToken{f8f1d7a token=Token{92745a5 ActivityRecord{21979c u0 com.lge.launcher2/.Launcher t13}}}:
      windows=[Window{72a9813 u0 com.lge.launcher2/com.lge.launcher2.Launcher}]
      windowType=2 hidden=false hasVisible=true
      app=true voiceInteraction=false
      allAppWindows=[Window{72a9813 u0 com.lge.launcher2/com.lge.launcher2.Launcher}]
      task={taskId=13 appTokens=[AppWindowToken{f8f1d7a token=Token{92745a5 ActivityRecord{21979c u0 com.lge.launcher2/.Launcher t13}}}] mdr=false}
       appFullscreen=true requestedOrientation=1
      hiddenRequested=false clientHidden=false willBeHidden=false reportedDrawn=true reportedVisible=true
      numInterestingWindows=1 numDrawnWindows=1 inPendingTransaction=false allDrawn=true (animator=true)
      startingData=com.android.server.wm.StartingData@548a595 removed=false firstWindowDrawn=true mIsExiting=false



WINDOW MANAGER TOKENS (dumpsys window tokens)
  All tokens:
  WindowToken{8a016aa null}
  WindowToken{48da29b android.os.BinderProxy@a4c7090}
  AppWindowToken{f8f1d7a token=Token{92745a5 ActivityRecord{21979c u0 com.lge.launcher2/.Launcher t13}}}
  WindowToken{6bba638 android.os.Binder@46fcd7}
  WindowToken{1db0611 android.os.Binder@65da0e8}

  Wallpaper tokens:
  Wallpaper #0 WindowToken{1db0611 android.os.Binder@65da0e8}

WINDOW MANAGER WINDOWS (dumpsys window windows)
  Window #12 Window{4e51dc0 u0 NavigationBar}:
    mDisplayId=0 stackId=0 mSession=Session{3aa958d 3020:u0a10059} mClient=android.os.BinderProxy@ceba343
    mOwnerUid=10059 mShowToOwnerOnly=false package=com.android.systemui appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) sim=#20 ty=2019 fl=#21840068 fmt=-3 clr=0x1}
    Requested w=1440 h=2392 mLayoutSeq=54
    mHasSurface=false mShownFrame=[0.0,2392.0][1440.0,2560.0] isReadyForDisplay()=false
    WindowStateAnimator{62d57dd NavigationBar}:
  Window #11 Window{c37fd89 u0 StatusBar}:
    mDisplayId=0 stackId=0 mSession=Session{3aa958d 3020:u0a10059} mClient=android.os.BinderProxy@a4c7090
    mOwnerUid=10059 mShowToOwnerOnly=false package=com.android.systemui appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) gr=#30 sim=#10 ty=2000 fl=#81860060 pfl=0x400 fmt=-3 or=5 vsysui=0x1600600 if=0x4 userActivityTimeout=10000 clr=0x1}
    Requested w=1440 h=2560 mLayoutSeq=100
    mHasSurface=true mShownFrame=[0.0,0.0][1440.0,2560.0] isReadyForDisplay()=true
    WindowStateAnimator{b82fb4 StatusBar}:
      Surface: shown=true layer=161010 alpha=1.0 rect=(0.0,0.0) 1440.0 x 2560.0
    mLastFreezeDuration=+5m3s880ms
  Window #10 Window{840f376 u0 SurfaceView}:
    mDisplayId=0 stackId=0 mSession=Session{3aa958d 3020:u0a10059} mClient=android.os.BinderProxy@9a7f455
    mOwnerUid=10059 mShowToOwnerOnly=true package=null appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(1440x2560) gr=#800033 ty=1001 fl=#4218 pfl=0x40 fmt=-3 clr=0x1}
    Requested w=1440 h=2560 mLayoutSeq=100
    mAttachedWindow=Window{c37fd89 u0 StatusBar} mLayoutAttached=true
    mHasSurface=true mShownFrame=[0.0,0.0][1440.0,2560.0] isReadyForDisplay()=true
    WindowStateAnimator{a00b487 SurfaceView}:
      Surface: shown=true layer=161005 alpha=1.0 rect=(0.0,0.0) 1440.0 x 2560.0
  Window #9 Window{34c6dfd u0 SecondScreen_System_com.lge.signboard (0)}:
    mDisplayId=0 stackId=0 mSession=Session{31e3c7d 3033:1000} mClient=android.os.BinderProxy@46b4a54
    mOwnerUid=1000 mShowToOwnerOnly=true package=com.lge.signboard appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) gr=#11 sim=#20 ty=3004 fl=#1840008 wanim=0x1030383 clr=0x1}
    Requested w=1440 h=160 mLayoutSeq=93
    mHasSurface=false mShownFrame=[0.0,-160.0][1440.0,0.0] isReadyForDisplay()=false
    WindowStateAnimator{c05ccc6 SecondScreen_System_com.lge.signboard (0)}:
    mLastFreezeDuration=+54s245ms
  Window #8 Window{ebb170 u0 SecondScreen_Base_com.lge.signboard (0)}:
    mDisplayId=0 stackId=0 mSession=Session{31e3c7d 3033:1000} mClient=android.os.BinderProxy@f4677b3
    mOwnerUid=1000 mShowToOwnerOnly=true package=com.lge.signboard appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) gr=#11 sim=#20 ty=3001 fl=#1840008 wanim=0x1030383 clr=0x1 statusbarl=true}
    Requested w=1440 h=160 mLayoutSeq=100
    mHasSurface=true mShownFrame=[0.0,-160.0][1440.0,0.0] isReadyForDisplay()=true
    WindowStateAnimator{cd132a1 SecondScreen_Base_com.lge.signboard (0)}:
      Surface: shown=true layer=141005 alpha=1.0 rect=(0.0,-160.0) 1440.0 x 160.0
  Window #7 Window{5b859cc u0 KeyguardScrim}:
    mDisplayId=0 stackId=0 mSession=Session{d4845c1 1358:1000} mClient=android.view.ViewRootImplAO$WEx@50d57ff
    mOwnerUid=1000 mShowToOwnerOnly=false package=android appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) sim=#10 ty=2029 fl=#1110900 pfl=0x1 fmt=-3 or=5 vsysui=0x3610000 clr=0x1}
    Requested w=1440 h=2392 mLayoutSeq=36
    mHasSurface=false mShownFrame=[0.0,0.0][1440.0,2392.0] isReadyForDisplay()=false
    WindowStateAnimator{8d36b08 KeyguardScrim}:
    mLastFreezeDuration=+26s304ms
  Window #6 Window{5083cdd u0 SecondScreen_StatusBar_com.android.systemui (0)}:
    mDisplayId=0 stackId=0 mSession=Session{3aa958d 3020:u0a10059} mClient=android.os.BinderProxy@a4b88b4
    mOwnerUid=10059 mShowToOwnerOnly=false package=com.android.systemui appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) gr=#11 sim=#20 ty=3002 fl=#1840008 wanim=0x103045b clr=0x1 statusbarl=true}
    Requested w=1440 h=2392 mLayoutSeq=100
    mHasSurface=true mShownFrame=[0.0,-160.0][1440.0,0.0] isReadyForDisplay()=true
    WindowStateAnimator{3e938ab SecondScreen_StatusBar_com.android.systemui (0)}:
      Surface: shown=true layer=131000 alpha=1.0 rect=(0.0,-160.0) 1440.0 x 160.0
  Window #5 Window{f4c02da u0 com.android.phone}:
    mDisplayId=0 stackId=0 mSession=Session{46037ce 3550:1001} mClient=android.os.BinderProxy@79ce485
    mOwnerUid=1001 mShowToOwnerOnly=false package=com.android.phone appop=SYSTEM_ALERT_WINDOW
    mAttrs=WM.LayoutParams{(0,0)(wrapxwrap) gr=#11 sim=#120 ty=2003 fl=#1820002 pfl=0x10010 fmt=-3 wanim=0x20a01ab surfaceInsets=Rect(96, 96 - 96, 96) needsMenuKey=2 clr=0x1}
    Requested w=1368 h=2105 mLayoutSeq=100
    mHasSurface=true mShownFrame=[36.0,191.0][1404.0,2296.0] isReadyForDisplay()=true
    WindowStateAnimator{c12fafa }:
      mAnimating=false mLocalAnimating=false mAnimationIsEntrance=true mAnimation=null
      Surface: shown=true layer=111000 alpha=1.0 rect=(-60.0,95.0) 1560.0 x 2297.0
  Window #4 Window{6effc81 u0 CliptrayCue}:
    mDisplayId=0 stackId=0 mSession=Session{2bd0e76 3364:1000} mClient=android.os.BinderProxy@d29b068
    mOwnerUid=1000 mShowToOwnerOnly=false package=com.lge.systemservice appop=NONE
    mAttrs=WM.LayoutParams{(0,960)(162x164) gr=#55 sim=#30 ty=2008 fl=#1040228 fmt=1 clr=0x1}
    Requested w=0 h=0 mLayoutSeq=14
    mHasSurface=false mShownFrame=[0.0,0.0][0.0,0.0] isReadyForDisplay()=false
    WindowStateAnimator{7022925 CliptrayCue}:
      mShownAlpha=0.0 mAlpha=1.0 mLastAlpha=0.0
  Window #3 Window{b544750 u0 ClipTray}:
    mDisplayId=0 stackId=0 mSession=Session{2bd0e76 3364:1000} mClient=android.os.BinderProxy@afe3913
    mOwnerUid=1000 mShowToOwnerOnly=false package=com.lge.systemservice appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(1440x960) gr=#53 sim=#30 ty=2008 fl=#1040228 fmt=1 wanim=0x7f0a0000 clr=0x1}
    Requested w=0 h=0 mLayoutSeq=14
    mHasSurface=false mShownFrame=[0.0,0.0][0.0,0.0] isReadyForDisplay()=false
    WindowStateAnimator{dd3d91c ClipTray}:
      mShownAlpha=0.0 mAlpha=1.0 mLastAlpha=0.0
  Window #2 Window{9b890f2 u0 AssistPreviewPanel}:
    mDisplayId=0 stackId=0 mSession=Session{3aa958d 3020:u0a10059} mClient=android.os.BinderProxy@a38fbfd
    mOwnerUid=10059 mShowToOwnerOnly=true package=com.android.systemui appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillx1000) gr=#800053 sim=#31 ty=2033 fl=#1000118 fmt=-3 vsysui=0x700 clr=0x1}
    Requested w=0 h=0 mLayoutSeq=30
    mHasSurface=false mShownFrame=[0.0,0.0][0.0,0.0] isReadyForDisplay()=false
    WindowStateAnimator{695028f AssistPreviewPanel}:
      mShownAlpha=0.0 mAlpha=1.0 mLastAlpha=0.0
  Window #1 Window{72a9813 u0 com.lge.launcher2/com.lge.launcher2.Launcher}:
    mDisplayId=0 stackId=0 mSession=Session{c0b43e4 3629:u0a10048} mClient=android.os.BinderProxy@99a1702
    mOwnerUid=10048 mShowToOwnerOnly=true package=com.lge.launcher2 appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) sim=#30 ty=1 fl=#81910100 fmt=-2 wanim=0x103045b vsysui=0x600 needsMenuKey=2 clr=0x1}
    Requested w=1440 h=2560 mLayoutSeq=100
    mHasSurface=true mShownFrame=[0.0,0.0][1440.0,2560.0] isReadyForDisplay()=true
    WindowStateAnimator{9f1edee com.lge.launcher2/com.lge.launcher2.Launcher}:
      Surface: shown=true layer=21005 alpha=1.0 rect=(0.0,0.0) 1440.0 x 2560.0
    mLastFreezeDuration=+5m3s800ms
    mWallpaperX=0.5 mWallpaperY=0.0
    mWallpaperXStep=0.5 mWallpaperYStep=1.0
  Window #0 Window{c533a4c u0 com.android.systemui.ImageWallpaper}:
    mDisplayId=0 stackId=0 mSession=Session{3aa958d 3020:u0a10059} mClient=android.os.BinderProxy@8bd6a7f
    mOwnerUid=10059 mShowToOwnerOnly=true package=com.android.systemui appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(2880x2560) gr=#800033 ty=2013 fl=#318 fmt=2 wanim=0x10302ea clr=0x1}
    Requested w=2880 h=2560 mLayoutSeq=100
    mIsImWindow=false mIsWallpaper=true mIsFloatingLayer=true mWallpaperVisible=true
    Offsets x=-720 y=0
    mHasSurface=true mShownFrame=[-720.0,0.0][2160.0,2560.0] isReadyForDisplay()=true
    WindowStateAnimator{351ff69 com.android.systemui.ImageWallpaper}:
      mAnimating=false mLocalAnimating=false mAnimationIsEntrance=true mAnimation=null
      Surface: shown=true layer=21000 alpha=1.0 rect=(-720.0,0.0) 2880.0 x 2560.0
    mWallpaperX=0.5 mWallpaperY=0.0
    mWallpaperXStep=0.5 mWallpaperYStep=1.0

  mCurConfiguration={1.0 ?mcc?mnc en_US ldltr sw360dp w360dp h534dp 640dpi nrml port finger -keyb/v/h -nav/h s.6 fontTypeIndex0 forceEmbolden0}
  mHasPermanentDpad=false
  mCurrentFocus=Window{c37fd89 u0 StatusBar}
  mFocusedApp=AppWindowToken{f8f1d7a token=Token{92745a5 ActivityRecord{21979c u0 com.lge.launcher2/.Launcher t13}}}
  mInTouchMode=true mLayoutSeq=100
  mLastDisplayFreezeDuration=0 due to Window{c37fd89 u0 StatusBar}
```

@koral-- Can you post the output from your LG X screen as well? And perhaps @keRin7 from his V20? That dumpsys actually shows that the 2nd screen is being rendered to a negative offset:

```
 Window #9 Window{34c6dfd u0 SecondScreen_System_com.lge.signboard (0)}:
    mDisplayId=0 stackId=0 mSession=Session{31e3c7d 3033:1000} mClient=android.os.BinderProxy@46b4a54
    mOwnerUid=1000 mShowToOwnerOnly=true package=com.lge.signboard appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) gr=#11 sim=#20 ty=3004 fl=#1840008 wanim=0x1030383 clr=0x1}
    Requested w=1440 h=160 mLayoutSeq=93
    mHasSurface=false mShownFrame=[0.0,-160.0][1440.0,0.0] isReadyForDisplay()=false
    WindowStateAnimator{c05ccc6 SecondScreen_System_com.lge.signboard (0)}:
    mLastFreezeDuration=+54s245ms
  Window #8 Window{ebb170 u0 SecondScreen_Base_com.lge.signboard (0)}:
    mDisplayId=0 stackId=0 mSession=Session{31e3c7d 3033:1000} mClient=android.os.BinderProxy@f4677b3
    mOwnerUid=1000 mShowToOwnerOnly=true package=com.lge.signboard appop=NONE
    mAttrs=WM.LayoutParams{(0,0)(fillxfill) gr=#11 sim=#20 ty=3001 fl=#1840008 wanim=0x1030383 clr=0x1 statusbarl=true}
    Requested w=1440 h=160 mLayoutSeq=100
    mHasSurface=true mShownFrame=[0.0,-160.0][1440.0,0.0] isReadyForDisplay()=true
    WindowStateAnimator{cd132a1 SecondScreen_Base_com.lge.signboard (0)}:
      Surface: shown=true layer=141005 alpha=1.0 rect=(0.0,-160.0) 1440.0 x 160.0
```

Not sure if it can be done yet, but I'm thinking we might be able to show the 2nd screen too, which would then fix the touch coordinates as well.  Please read all of https://github.com/openstf/stf/issues/407 and see if you have a similar setting. Don't forget to post your solution here if you find one!
 Did you go through all the settings on your device to try to find something similar to #407?  No it's not related. It's fine It turns out that at least the latest issue was caused by a self-compiled GraphicsMagick, which did not include JPEG support by default. Others having this issue, please run `gm convert -list format` and check if JPEG is there. Or try actually converting an image with `gm convert`.  Do a real deployment instead of using 'stf local' and you can set those in
the nginx config. stf local is for development only.

On Thursday, 3 November 2016, yulishuta notifications@github.com wrote:

> Hi:
> I ran the STF in localhost, someone else(not same with my ip) accessed my
> STF website. I tried get his IP address by 'req.connection.remoteAddress',
> but the value is always '127.0.0.1'. Why and how to solve the problem.
> English is not my first language.Thank you .
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/459, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_TLKhoCl_QwXkvr19ib2acIZHCkZks5q6aK0gaJpZM4KoHnA
> .
  You don't have rethinkdb running. Read the README.

On Thursday, 3 November 2016, Thinker notifications@github.com wrote:

> `➜ / stf local —allow-remote
> INF/util:procutil 8185 [
> _] Forking
> "/usr/local/lib/node_modules/.stf_npminstall/node_modules/.2.1.0@stf/lib/cli.js
> migrate" INF/db 8186 [_] Connecting to 127.0.0.1:28015
> INF/db 8186 [
> _] Unable to connect to 127.0.0.1:28015 http://127.0.0.1:28015 FTL/db
> 8186 [_] No hosts left to try
> FTL/util:lifecycle 8186 [*] Shutting down due to fatal error
> 
> /usr/local/lib/node_modules/.stf_npminstall/node_modules/.2.11.0@bluebird
> /js/main/promise.js:680
> throw e;
> ^
> ExitError: Exit code "1"
> at ChildProcess.<anonymous> (/usr/local/lib/node_modules/.
> stf_npminstall/node_modules/.2.1.0@stf/lib/util/procutil.js:49:23)
> at emitTwo (events.js💯13)
> at ChildProcess.emit (events.js:185:7)
> at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)`
> 
> Is this what is the problem ?
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/458, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_W_J1fZloXkoBg9KswuM0uX9gxnEks5q6ZdRgaJpZM4KoFkS
> .
 Why did you use the port offset flag? Now everything's running on the wrong
port. You can see from the log messages that the ports are different.

On Thursday, 3 November 2016, Thinker notifications@github.com wrote:

> @sorccu https://github.com/sorccu Rethinkdb has started successfully
> 
> ➜  / sudo rethinkdb --port-offset 1
> Running rethinkdb 2.3.5 (CLANG 7.3.0 (clang-703.0.31))...
> Running on Darwin 16.0.0 x86_64
> Loading data from directory /rethinkdb_data
> warn: Cache size does not leave much memory for server and query overhead (available memory: 595 MB).
> warn: Cache size is very low and may impact performance.
> Listening for intracluster connections on port 29016
> Listening for client driver connections on port 28016
> Listening for administrative HTTP connections on port 8081
> Listening on cluster addresses: 127.0.0.1, ::1
> Listening on driver addresses: 127.0.0.1, ::1
> Listening on http addresses: 127.0.0.1, ::1
> To fully expose RethinkDB on the network, bind to all addresses by running rethinkdb with the `--bind all` command line option.
> Server ready, "ACA80F71_ipt_aol_com_sg2" cce7c577-0f19-454e-b
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/458#issuecomment-258083756, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_b7OUFhD2hB6OXywiE3dDv0fxgGCks5q6ZhDgaJpZM4KoFkS
> .
  No, it's supposed to be like that. Sounds like your setup is missing something.
  Try switching the phone between MTP/PTP mode and see if that changes anything. On Linux sometimes only 1 of them works.

By the way your Ubuntu is so old it's practically useless. Please upgrade, we won't help with ancient software.
 Alternatively, try running adb as root and see if that changes anything. Note that it is NOT enough to run `sudo adb devices` as it simply connects to the existing adb daemon which may or may not be running as root. Run `adb kill-server` first, followed by `sudo adb start-server`. You can call adb without `sudo` after that.
  You're not using it correctly. It's meant to be combined with other images. See the deployment docs, there are links in the README.
  Thanks for the detailed report. Unfortunately STF does not support virtual devices right now. The `PrematureEOFError` means that it was looking for something in the output of a command or stream, and couldn't find it. If you run stf with `DEBUG=adb:* stf local`, you should be able to see the command it attempts to run before that happens. It would be helpful if you could post the context including that debug log, but again, VDs are not really supported right now.
 Wow that's great! Also, super awesome when people are able to figure things out by themselves and even share their solution :)

I wonder if the screen is visible in STF though?
 @strong-code have you tried with connecting virtual devices created in vmware or vbox? Hi again,
I am trying to connect avd with stf but stf is not displaying my emulator  in the devices list, but i have checked in terminal by running command "adb devices" and its showing device there. So what i should to connect stf with avd? I'm sorry but we have so few contributors that we have to limit the scope of STF somehow - currently that includes not supporting emulators since that would take too much time. I do know that some have managed to find a magic combination of settings that makes certain emulators work, but I'm not aware of the details. Note that it may even depend on your hardware and operating system. Perhaps someone else can share their secrets. @strong-code @sorccu No black screen issue for me, everything is working fine now :) That's awesome. If you don't mind, could you share how you set it up? People are always asking so it would be useful. Ok will share the details soon :) Hi,
For a detailed installation guide I need to know which ABI openstf support as when I tried with connecting an emulator having armeabi-7a ABI then it remains in preparing mode but with those ROM having x86 ABI get easily connected. #641 (comment) You can find the installation guide to connect the AVD with STF without any black screen issue here: #641   Because you are doing it wrong. You are not supposed to run `stf local` from `openstf/stf` docker image. Read [DEPLOYMENT doc](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) to understand its proper usage. 
  You updated node and now the native modules are out of date. It would be best if you did `rm -rf node_modules` and then ran `npm install` again.
 It says what the error is. You probably used an older node before. Now
you've upgraded node and the native dependencies were built against the old
version and don't work with the new version without rebuilding. Rm -rf
node_modules and npm install again.

On Fri, Feb 3, 2017 at 0:03 jerry <notifications@github.com> wrote:

> Thank you
>
> —
> You are receiving this because you modified the open/close state.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/451#issuecomment-276980931>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_SpNrGKMswpGJY3vvtMcaw4a0slTks5rYe_IgaJpZM4KfhJv>
> .
>
  I think the reason for that behavior is that if the user left something active that keeps the screen on (like a heavy 3D game), the device would never sleep, destroying the battery and display over time. Therefore the home key is pressed once to avoid that situation.

Maybe we could make it optional, though.
 You will also have to use `--no-cleanup` option otherwise STF will uninstall all new apps installed in user session.
  We are aware of this. The problem is that most devices provide their own UI for the back/home button, and only some of the devices don't.

Because the UI space in the mobile version is premium, we cannot afford to have two home/back buttons (also it looks very ugly).

To fix this we need to detect if the device provides its own home/back buttons on the screen and show/hide our UI buttons accordingly.
  Seems like a problem with brew and/or your shell is broken. It gives you suggestions what to do in that error message, you should do those.

I will close this as off topic, since it happens before anything STF related runs.
  Usually a hardware issue. Hardware is no joke, once you have more than a
few devices connected, you can run into all kinds of issues. Please read
the README and take it seriously.

On Mon, Oct 17, 2016 at 4:06 PM, isisrin notifications@github.com wrote:

> Hi
> I got problem.
> I ran docker image openstf/stf on ubuntu(16.04 LTS)
> and I connected 8 devices.
> when I did remote Control the connections were reconnected every few
> minutes.
> thanks
> 
> [image: screenshot 2016-10-17 pm 3 59 29]
> https://cloud.githubusercontent.com/assets/18637037/19428145/483ba2c0-9483-11e6-96ae-7a1e31e99782.png
> 
> [logs]
> 2016-10-17T06:54:08.623989571Z INF/device:plugins:screen:capture 5602
> [ZX1G22J8HF] Capturing screenshot
> 2016-10-17T06:54:09.061533613Z INF/storage:temp 72 [
> 
> _] Uploaded "ZX1G22J8HF.jpg" to
> "/tmp/upload_cb312176793e59554c85e9e73c1f3efd"
> 2016-10-17T06:54:09.080558609Z INF/device:support:storage 5602 [ZX1G22J8HF]
> Uploaded to "/s/image/b6e9b00a-1be7-40b7-84ee-9e2c6a161f88/ZX1G22J8HF.jpg"
> 2016-10-17T06:54:50.903271005Z IMP/device:plugins:service 5614
> [0d88b43e25995b5a] Agent connection ended, attempting to relaunch
> 2016-10-17T06:54:50.905262096Z INF/device:plugins:service 5614
> [0d88b43e25995b5a] Launching service 2016-10-17T06:54:50.905921097Z
> IMP/device:plugins:service 5620 [0d893faa43e4b116] Agent connection ended,
> attempting to relaunch 2016-10-17T06:54:50.906296579Z
> IMP/device:plugins:service 5614 [0d88b43e25995b5a] Service connection
> ended, attempting to relaunch 2016-10-17T06:54:50.906529248Z
> INF/device:plugins:service 5614 [0d88b43e25995b5a] Launching service
> 2016-10-17T06:54:50.906761579Z IMP/device:plugins:service 5602 [ZX1G22J8HF]
> Agent connection ended, attempting to relaunch
> 2016-10-17T06:54:50.906829794Z IMP/device:plugins:service 5603
> [LGF180Ld952c130] Agent connection ended, attempting to relaunch
> 2016-10-17T06:54:50.907228539Z WRN/device:plugins:touch 5614
> [0d88b43e25995b5a] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:54:50.907291097Z INF/device:plugins:service 5603
> [LGF180Ld952c130] Launching service 2016-10-17T06:54:50.907401795Z
> INF/device:plugins:service 5602 [ZX1G22J8HF] Launching service
> 2016-10-17T06:54:50.907771354Z INF/device:plugins:service 5620
> [0d893faa43e4b116] Launching service 2016-10-17T06:54:50.907830565Z
> INF/device:plugins:touch 5614 [0d88b43e25995b5a] Disconnecting from
> minitouch service 2016-10-17T06:54:50.908782454Z IMP/device:plugins:service
> 5603 [LGF180Ld952c130] Service connection ended, attempting to relaunch
> 2016-10-17T06:54:50.908862095Z INF/provider 42 [_] Device "ZX1G22J8HF" is
> now "offline" (was "device")
> 2016-10-17T06:54:50.909117895Z INF/provider 42 [
> 
> _] Device "0d893faa43e4b116" is now "offline" (was "device")
> 2016-10-17T06:54:50.909174964Z INF/device:plugins:service 5603
> [LGF180Ld952c130] Launching service 2016-10-17T06:54:50.909251229Z
> FTL/util:lifecycle 5614 [0d88b43e25995b5a] Forward shell ended; we shall
> share its fate 2016-10-17T06:54:50.909453004Z INF/provider 42 [_] Device
> "LGF180Ld952c130" is now "offline" (was "device")
> 2016-10-17T06:54:50.909578086Z INF/provider 42 [
> 
> _] Lost device "0d88b43e25995b5a" (device) 2016-10-17T06:54:50.909588111Z
> FTL/util:lifecycle 5614 [0d88b43e25995b5a] Shutting down due to fatal error
> 2016-10-17T06:54:50.909591211Z WRN/device:plugins:touch 5603
> [LGF180Ld952c130] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:54:50.909862803Z INF/provider 42 [_] Shutting down device
> worker "0d88b43e25995b5a"
> 2016-10-17T06:54:50.909969323Z INF/provider 42 [
> 
> _] Lost device "ZX1G22J8HF" (offline) 2016-10-17T06:54:50.910080705Z
> INF/device:plugins:touch 5603 [LGF180Ld952c130] Disconnecting from
> minitouch service 2016-10-17T06:54:50.910196862Z INF/provider 42 [_]
> Shutting down device worker "ZX1G22J8HF"
> 2016-10-17T06:54:50.910367095Z INF/provider 42 [
> _] Lost device "0d893faa43e4b116" (offline) 2016-10-17T06:54:50.910652415Z
> INF/provider 42 [_] Shutting down device worker "0d893faa43e4b116"
> 2016-10-17T06:54:50.910753233Z INF/provider 42 [
> 
> _] Lost device "LGF180Ld952c130" (offline) 2016-10-17T06:54:50.910981088Z
> IMP/device:plugins:service 5602 [ZX1G22J8HF] Service connection ended,
> attempting to relaunch 2016-10-17T06:54:50.911282579Z INF/provider 42 [_]
> Shutting down device worker "LGF180Ld952c130"
> 2016-10-17T06:54:50.912342588Z INF/provider 42 [
> _] Cleaning up device worker "0d88b43e25995b5a"
> 2016-10-17T06:54:50.912395121Z INF/provider 42 [_] Cleaning up device
> worker "ZX1G22J8HF"
> 2016-10-17T06:54:50.912447600Z INF/provider 42 [
> _] Cleaning up device worker "0d893faa43e4b116"
> 2016-10-17T06:54:50.912461654Z INF/provider 42 [_] Cleaning up device
> worker "LGF180Ld952c130"
> 2016-10-17T06:54:50.912489134Z INF/provider 42 [
> 
> _] Gracefully killing device worker "0d88b43e25995b5a"
> 2016-10-17T06:54:50.912838166Z FTL/util:lifecycle 5603 [LGF180Ld952c130]
> Forward shell ended; we shall share its fate 2016-10-17T06:54:50.912964560Z
> INF/provider 42 [_] Gracefully killing device worker "ZX1G22J8HF"
> 2016-10-17T06:54:50.913282052Z INF/provider 42 [
> _] Gracefully killing device worker "0d893faa43e4b116"
> 2016-10-17T06:54:50.913432464Z INF/provider 42 [_] Gracefully killing
> device worker "LGF180Ld952c130"
> 2016-10-17T06:54:50.913831729Z INF/device:plugins:service 5602
> [ZX1G22J8HF] Launching service
> 2016-10-17T06:54:50.913908848Z FTL/util:lifecycle 5603 [LGF180Ld952c130]
> Shutting down due to fatal error
> 2016-10-17T06:54:50.914426458Z INF/provider 42 [
> 
> _] Device worker "0d88b43e25995b5a" has retired
> 2016-10-17T06:54:50.915527837Z WRN/device:plugins:touch 5602 [ZX1G22J8HF]
> Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:54:50.917165485Z INF/device:plugins:touch 5602 [ZX1G22J8HF]
> Disconnecting from minitouch service 2016-10-17T06:54:50.917193298Z
> INF/provider 42 [_] Device worker "LGF180Ld952c130" has retired
> 2016-10-17T06:54:50.917396807Z IMP/device:plugins:service 5620
> [0d893faa43e4b116] Service connection ended, attempting to relaunch
> 2016-10-17T06:54:50.917571845Z INF/device:plugins:service 5620
> [0d893faa43e4b116] Launching service
> 2016-10-17T06:54:50.918618450Z WRN/device:plugins:touch 5620
> [0d893faa43e4b116] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:54:50.919414219Z INF/device:plugins:touch 5620
> [0d893faa43e4b116] Disconnecting from minitouch service
> 2016-10-17T06:54:50.919669171Z FTL/util:lifecycle 5602 [ZX1G22J8HF]
> Forward shell ended; we shall share its fate
> 2016-10-17T06:54:50.919859674Z FTL/util:lifecycle 5602 [ZX1G22J8HF]
> Shutting down due to fatal error
> 2016-10-17T06:54:50.920585553Z FTL/util:lifecycle 5620 [0d893faa43e4b116]
> Forward shell ended; we shall share its fate
> 2016-10-17T06:54:50.920755405Z FTL/util:lifecycle 5620 [0d893faa43e4b116]
> Shutting down due to fatal error
> 2016-10-17T06:54:50.923652475Z INF/provider 42 [
> _] Device worker "0d893faa43e4b116" has retired
> 2016-10-17T06:54:50.923815546Z INF/provider 42 [_] Device worker
> "ZX1G22J8HF" has retired
> 2016-10-17T06:54:51.176136496Z INF/provider 42 [
> _] Found device "ZX1G22J8HF" (offline) 2016-10-17T06:54:51.176858105Z
> INF/provider 42 [_] Found device "0d893faa43e4b116" (offline)
> 2016-10-17T06:54:51.177455516Z INF/provider 42 [
> _] Found device "LGF180Ld952c130" (offline) 2016-10-17T06:54:51.177984664Z
> INF/provider 42 [_] Found device "0d88b43e25995b5a" (offline)
> 2016-10-17T06:54:51.195299701Z INF/reaper 36 [reaper001] Device
> "ZX1G22J8HF" is present
> 2016-10-17T06:54:51.195457639Z INF/provider 42 [
> _] Registered device "ZX1G22J8HF" 2016-10-17T06:54:51.195489198Z
> INF/provider 42 [_] Device "ZX1G22J8HF" is now "device" (was "offline")
> 2016-10-17T06:54:51.201810163Z INF/reaper 36 [reaper001] Device
> "0d88b43e25995b5a" is present
> 2016-10-17T06:54:51.201982851Z INF/provider 42 [
> _] Registered device "0d88b43e25995b5a" 2016-10-17T06:54:51.202082193Z
> INF/provider 42 [_] Device "0d88b43e25995b5a" is now "unauthorized" (was
> "offline")
> 2016-10-17T06:54:51.202133497Z INF/reaper 36 [reaper001] Device
> "LGF180Ld952c130" is present
> 2016-10-17T06:54:51.202659083Z INF/reaper 36 [reaper001] Device
> "0d893faa43e4b116" is present
> 2016-10-17T06:54:51.202733470Z INF/provider 42 [
> _] Registered device "LGF180Ld952c130" 2016-10-17T06:54:51.202920811Z
> INF/provider 42 [_] Lost device "LGF180Ld952c130" (offline)
> 2016-10-17T06:54:51.203105193Z INF/provider 42 [
> _] Registered device "0d893faa43e4b116" 2016-10-17T06:54:51.250182121Z
> INF/provider 42 [_] Device "0d893faa43e4b116" is now "unauthorized" (was
> "offline")
> 2016-10-17T06:54:51.250472460Z INF/provider 42 [
> _] Device "0d88b43e25995b5a" is now "device" (was "unauthorized")
> 2016-10-17T06:54:51.264482996Z INF/provider 42 [_] Device
> "0d893faa43e4b116" is now "device" (was "unauthorized")
> 2016-10-17T06:54:51.548334762Z INF/device:support:push 5654 [ZX1G22J8HF]
> Sending output to "tcp://127.0.0.1:7116"
> 2016-10-17T06:54:51.550173910Z INF/device 5654 [ZX1G22J8HF] Preparing
> device
> 2016-10-17T06:54:51.571010307Z INF/device:support:push 5660
> [0d88b43e25995b5a] Sending output to "tcp://127.0.0.1:7116"
> 2016-10-17T06:54:51.572797424Z INF/device 5660 [0d88b43e25995b5a]
> Preparing device
> 2016-10-17T06:54:51.588270009Z INF/device:support:push 5666
> [0d893faa43e4b116] Sending output to "tcp://127.0.0.1:7116"
> 2016-10-17T06:54:51.590088799Z INF/device 5666 [0d893faa43e4b116]
> Preparing device
> 2016-10-17T06:54:51.864222550Z INF/device:support:sub 5654 [ZX1G22J8HF]
> Receiving input from "tcp://127.0.0.1:7114"
> 2016-10-17T06:54:51.864904611Z INF/device:support:sub 5654 [ZX1G22J8HF]
> Subscribing to permanent channel "
> 
> _ALL" 2016-10-17T06:54:51.884217232Z INF/device:support:sub 5660
> [0d88b43e25995b5a] Receiving input from "tcp://127.0.0.1:7114
> http://127.0.0.1:7114" 2016-10-17T06:54:51.885009031Z
> INF/device:support:sub 5660 [0d88b43e25995b5a] Subscribing to permanent
> channel "_ALL"
> 2016-10-17T06:54:51.904554634Z INF/device:support:sub 5666
> [0d893faa43e4b116] Receiving input from "tcp://127.0.0.1:7114"
> 2016-10-17T06:54:51.905308961Z INF/device:support:sub 5666
> [0d893faa43e4b116] Subscribing to permanent channel "
> 
> _ALL" 2016-10-17T06:54:51.917866675Z INF/device:support:properties 5654
> [ZX1G22J8HF] Loading properties 2016-10-17T06:54:51.960000397Z
> INF/device:support:properties 5660 [0d88b43e25995b5a] Loading properties
> 2016-10-17T06:54:51.980707830Z INF/device:support:properties 5666
> [0d893faa43e4b116] Loading properties 2016-10-17T06:54:51.981540088Z
> INF/device:support:abi 5654 [ZX1G22J8HF] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:54:51.992886284Z INF/device:support:abi 5660
> [0d88b43e25995b5a] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:54:52.013786997Z INF/device:support:abi 5666
> [0d893faa43e4b116] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:54:52.151963019Z INF/device:resources:service 5660
> [0d88b43e25995b5a] Checking whether we need to install STFService
> 2016-10-17T06:54:52.174289890Z INF/device:resources:service 5666
> [0d893faa43e4b116] Checking whether we need to install STFService
> 2016-10-17T06:54:52.185796827Z INF/device:resources:service 5654
> [ZX1G22J8HF] Checking whether we need to install STFService
> 2016-10-17T06:54:52.596020867Z INF/provider 42 [_] Found device
> "LGF180Ld952c130" (offline)
> 2016-10-17T06:54:52.608918618Z INF/reaper 36 [reaper001] Device
> "LGF180Ld952c130" is present
> 2016-10-17T06:54:52.608980336Z INF/provider 42 [
> _] Registered device "LGF180Ld952c130" 2016-10-17T06:54:52.726313506Z
> INF/provider 42 [_] Device "LGF180Ld952c130" is now "device" (was
> "offline")
> 2016-10-17T06:54:52.765529087Z INF/device:resources:service 5660
> [0d88b43e25995b5a] Running version check
> 2016-10-17T06:54:52.788977101Z INF/device:resources:service 5666
> [0d893faa43e4b116] Running version check
> 2016-10-17T06:54:53.003063465Z INF/device:resources:service 5654
> [ZX1G22J8HF] Running version check
> 2016-10-17T06:54:53.037350898Z INF/device:support:push 5690
> [LGF180Ld952c130] Sending output to "tcp://127.0.0.1:7116"
> 2016-10-17T06:54:53.039164399Z INF/device 5690 [LGF180Ld952c130] Preparing
> device
> 2016-10-17T06:54:53.323870823Z INF/device:support:sub 5690
> [LGF180Ld952c130] Receiving input from "tcp://127.0.0.1:7114"
> 2016-10-17T06:54:53.324757058Z INF/device:support:sub 5690
> [LGF180Ld952c130] Subscribing to permanent channel "
> 
> _ALL" 2016-10-17T06:54:53.378511781Z INF/device:support:properties 5690
> [LGF180Ld952c130] Loading properties 2016-10-17T06:54:53.578996376Z
> INF/device:resources:service 5660 [0d88b43e25995b5a] STFService up to date
> 2016-10-17T06:54:53.580116264Z INF/device:plugins:service 5660
> [0d88b43e25995b5a] Launching agent 2016-10-17T06:54:53.601678636Z
> INF/device:resources:service 5666 [0d893faa43e4b116] STFService up to date
> 2016-10-17T06:54:53.602956295Z INF/device:plugins:service 5666
> [0d893faa43e4b116] Launching agent 2016-10-17T06:54:53.692333597Z
> INF/device:support:abi 5690 [LGF180Ld952c130] Supports ABIs armeabi-v7a,
> armeabi 2016-10-17T06:54:53.822906470Z INF/device:resources:service 5654
> [ZX1G22J8HF] STFService up to date 2016-10-17T06:54:53.827799412Z
> INF/device:plugins:service 5654 [ZX1G22J8HF] Launching agent
> 2016-10-17T06:54:54.078570097Z INF/device:resources:service 5690
> [LGF180Ld952c130] Checking whether we need to install STFService
> 2016-10-17T06:54:54.291186964Z INF/device:plugins:service 5660
> [0d88b43e25995b5a] Launching service 2016-10-17T06:54:54.293209493Z
> INF/device:plugins:service 5660 [0d88b43e25995b5a] Agent says: "Listening
> on @stfagent" 2016-10-17T06:54:54.294975155Z INF/device:plugins:service
> 5660 [0d88b43e25995b5a] Agent says: "InputClient started"
> 2016-10-17T06:54:54.314626127Z INF/device:plugins:service 5666
> [0d893faa43e4b116] Launching service 2016-10-17T06:54:54.332796297Z
> INF/device:plugins:service 5666 [0d893faa43e4b116] Agent says: "Listening
> on @stfagent" 2016-10-17T06:54:54.333435636Z INF/device:plugins:service
> 5666 [0d893faa43e4b116] Agent says: "InputClient started"
> 2016-10-17T06:54:54.731462027Z INF/device:resources:service 5690
> [LGF180Ld952c130] Running version check 2016-10-17T06:54:54.896505528Z
> INF/device:plugins:service 5654 [ZX1G22J8HF] Launching service
> 2016-10-17T06:54:54.924954643Z INF/device:plugins:service 5654 [ZX1G22J8HF]
> Agent says: "Listening on @stfagent" 2016-10-17T06:54:54.926348453Z
> INF/device:plugins:service 5654 [ZX1G22J8HF] Agent says: "InputClient
> started" 2016-10-17T06:54:55.164350717Z INF/device:plugins:display 5660
> [0d88b43e25995b5a] Reading display info 2016-10-17T06:54:55.170299700Z
> INF/device:plugins:display 5666 [0d893faa43e4b116] Reading display info
> 2016-10-17T06:54:55.171152317Z INF/device:plugins:phone 5660
> [0d88b43e25995b5a] Fetching phone info 2016-10-17T06:54:55.175021969Z
> INF/device:plugins:phone 5666 [0d893faa43e4b116] Fetching phone info
> 2016-10-17T06:54:55.182532065Z INF/device:plugins:identity 5666
> [0d893faa43e4b116] Solving identity 2016-10-17T06:54:55.183988853Z
> INF/device:plugins:solo 5666 [0d893faa43e4b116] Subscribing to permanent
> channel "DN15WvUZyQjEfWSmB188VWBCI0I=" 2016-10-17T06:54:55.185045062Z
> INF/device:plugins:screen:stream 5666 [0d893faa43e4b116] Starting WebSocket
> server on port 7472 2016-10-17T06:54:55.189002342Z
> INF/device:plugins:identity 5660 [0d88b43e25995b5a] Solving identity
> 2016-10-17T06:54:55.190420297Z INF/device:plugins:solo 5660
> [0d88b43e25995b5a] Subscribing to permanent channel
> "7F5DWBw5aElSb+BKz+dX3ADnuhM=" 2016-10-17T06:54:55.191613799Z
> INF/device:plugins:screen:stream 5660 [0d88b43e25995b5a] Starting WebSocket
> server on port 7512 2016-10-17T06:54:55.299109706Z INF/device:plugins:touch
> 5666 [0d893faa43e4b116] Touch origin is top left
> 2016-10-17T06:54:55.300725051Z INF/device:plugins:touch 5666
> [0d893faa43e4b116] Requesting touch consumer to start
> 2016-10-17T06:54:55.302221929Z INF/device:plugins:touch 5666
> [0d893faa43e4b116] Launching screen service 2016-10-17T06:54:55.309383568Z
> INF/device:plugins:touch 5666 [0d893faa43e4b116] Connecting to minitouch
> service 2016-10-17T06:54:55.323810359Z INF/device:plugins:touch 5660
> [0d88b43e25995b5a] Touch origin is top left 2016-10-17T06:54:55.325452918Z
> INF/device:plugins:touch 5660 [0d88b43e25995b5a] Requesting touch consumer
> to start 2016-10-17T06:54:55.327166601Z INF/device:plugins:touch 5660
> [0d88b43e25995b5a] Launching screen service 2016-10-17T06:54:55.333981542Z
> INF/device:plugins:touch 5660 [0d88b43e25995b5a] Connecting to minitouch
> service 2016-10-17T06:54:55.347677135Z INF/device:plugins:touch 5666
> [0d893faa43e4b116] minitouch says: "Type B touch device touch_dev
> (1079x1919 with 10 contacts) detected on /dev/input/event1 (score 1100)"
> 2016-10-17T06:54:55.371914050Z INF/device:plugins:touch 5660
> [0d88b43e25995b5a] minitouch says: "Type B touch device touch_dev
> (1079x1919 with 10 contacts) detected on /dev/input/event1 (score 1100)"
> 2016-10-17T06:54:55.419830880Z INF/device:plugins:touch 5666
> [0d893faa43e4b116] minitouch says: "Connection established"
> 2016-10-17T06:54:55.421505002Z INF/device:plugins:touch 5666
> [0d893faa43e4b116] Reading minitouch banner 2016-10-17T06:54:55.445210772Z
> INF/device:plugins:touch 5660 [0d88b43e25995b5a] minitouch says:
> "Connection established" 2016-10-17T06:54:55.446752868Z
> INF/device:plugins:touch 5660 [0d88b43e25995b5a] Reading minitouch banner
> 2016-10-17T06:54:55.472356028Z INF/device:plugins:vnc 5666
> [0d893faa43e4b116] Starting VNC server on port 7474
> 2016-10-17T06:54:55.477904834Z INF/device:plugins:browser 5666
> [0d893faa43e4b116] Loading browser list 2016-10-17T06:54:55.486123555Z
> INF/device:plugins:browser 5666 [0d893faa43e4b116] Updating browser list
> 2016-10-17T06:54:55.491183003Z INF/device:plugins:mute 5666
> [0d893faa43e4b116] Will not mute master volume during use
> 2016-10-17T06:54:55.501723792Z INF/device:plugins:vnc 5660
> [0d88b43e25995b5a] Starting VNC server on port 7514
> 2016-10-17T06:54:55.504178418Z INF/device:plugins:browser 5660
> [0d88b43e25995b5a] Loading browser list 2016-10-17T06:54:55.511336569Z
> INF/device:plugins:browser 5660 [0d88b43e25995b5a] Updating browser list
> 2016-10-17T06:54:55.513510424Z INF/device:plugins:mute 5660
> [0d88b43e25995b5a] Will not mute master volume during use
> 2016-10-17T06:54:55.562352618Z INF/device:resources:service 5690
> [LGF180Ld952c130] STFService up to date 2016-10-17T06:54:55.566468140Z
> INF/device:plugins:service 5690 [LGF180Ld952c130] Launching agent
> 2016-10-17T06:54:55.599121827Z INF/device:plugins:forward 5666
> [0d893faa43e4b116] Launching reverse port forwarding service
> 2016-10-17T06:54:55.608242146Z INF/device:plugins:forward 5666
> [0d893faa43e4b116] Connecting to reverse port forwarding service
> 2016-10-17T06:54:55.639510662Z INF/device:plugins:forward 5660
> [0d88b43e25995b5a] Launching reverse port forwarding service
> 2016-10-17T06:54:55.643388433Z INF/device:plugins:forward 5660
> [0d88b43e25995b5a] Connecting to reverse port forwarding service
> 2016-10-17T06:54:55.832527754Z INF/device:plugins:display 5654 [ZX1G22J8HF]
> Reading display info 2016-10-17T06:54:55.906204979Z
> INF/device:plugins:phone 5654 [ZX1G22J8HF] Fetching phone info
> 2016-10-17T06:54:55.951877310Z INF/device:plugins:identity 5654
> [ZX1G22J8HF] Solving identity 2016-10-17T06:54:55.954126857Z
> INF/device:plugins:solo 5654 [ZX1G22J8HF] Subscribing to permanent channel
> "jox4VAeTQgRzrwEW8XQyblTf5Iw=" 2016-10-17T06:54:55.958112210Z
> INF/device:plugins:screen:stream 5654 [ZX1G22J8HF] Starting WebSocket
> server on port 7484 2016-10-17T06:54:56.172140726Z INF/device:plugins:touch
> 5654 [ZX1G22J8HF] Touch origin is top left 2016-10-17T06:54:56.173974899Z
> INF/device:plugins:touch 5654 [ZX1G22J8HF] Requesting touch consumer to
> start 2016-10-17T06:54:56.175714229Z INF/device:plugins:touch 5654
> [ZX1G22J8HF] Launching screen service 2016-10-17T06:54:56.191331677Z
> INF/device:plugins:touch 5654 [ZX1G22J8HF] Connecting to minitouch service
> 2016-10-17T06:54:56.342914405Z INF/device:plugins:touch 5654 [ZX1G22J8HF]
> minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
> 2016-10-17T06:54:56.368257764Z INF/device:plugins:service 5690
> [LGF180Ld952c130] Launching service 2016-10-17T06:54:56.391396824Z
> INF/device:plugins:service 5690 [LGF180Ld952c130] Agent says: "Listening on
> @stfagent" 2016-10-17T06:54:56.391965603Z INF/device:plugins:service 5690
> [LGF180Ld952c130] Agent says: "InputClient started"
> 2016-10-17T06:54:56.396186758Z INF/device:plugins:touch 5654 [ZX1G22J8HF]
> minitouch says: "Type B touch device atmel_mxt_ts (1439x2559 with 16
> contacts) detected on /dev/input/event0 (score 1100)"
> 2016-10-17T06:54:56.396605443Z INF/device:plugins:touch 5654 [ZX1G22J8HF]
> minitouch says: "Note: hard-limiting maximum number of contacts to 10"
> 2016-10-17T06:54:56.448174950Z INF/device:plugins:connect 5666
> [0d893faa43e4b116] Listening on port 7473 2016-10-17T06:54:56.454954881Z
> INF/device 5666 [0d893faa43e4b116] Fully operational
> 2016-10-17T06:54:56.500396699Z INF/device:plugins:connect 5660
> [0d88b43e25995b5a] Listening on port 7513 2016-10-17T06:54:56.507186809Z
> INF/device 5660 [0d88b43e25995b5a] Fully operational
> 2016-10-17T06:54:56.514640893Z INF/device:plugins:touch 5654 [ZX1G22J8HF]
> minitouch says: "Connection established" 2016-10-17T06:54:56.517105401Z
> INF/device:plugins:touch 5654 [ZX1G22J8HF] Reading minitouch banner
> 2016-10-17T06:54:56.568073058Z INF/device:plugins:vnc 5654 [ZX1G22J8HF]
> Starting VNC server on port 7486 2016-10-17T06:54:56.576126341Z
> INF/device:plugins:browser 5654 [ZX1G22J8HF] Loading browser list
> 2016-10-17T06:54:56.627195876Z INF/device:plugins:browser 5654 [ZX1G22J8HF]
> Updating browser list 2016-10-17T06:54:56.632479351Z
> INF/device:plugins:mute 5654 [ZX1G22J8HF] Will not mute master volume
> during use 2016-10-17T06:54:56.895055683Z INF/device:plugins:forward 5654
> [ZX1G22J8HF] Launching reverse port forwarding service
> 2016-10-17T06:54:56.906683270Z INF/device:plugins:forward 5654 [ZX1G22J8HF]
> Connecting to reverse port forwarding service
> 2016-10-17T06:54:57.322277549Z INF/device:plugins:display 5690
> [LGF180Ld952c130] Reading display info 2016-10-17T06:54:57.473244540Z
> INF/device:plugins:phone 5690 [LGF180Ld952c130] Fetching phone info
> 2016-10-17T06:54:57.490166587Z INF/device:plugins:identity 5690
> [LGF180Ld952c130] Solving identity 2016-10-17T06:54:57.492044732Z
> INF/device:plugins:solo 5690 [LGF180Ld952c130] Subscribing to permanent
> channel "pkQkU4Ion94E7Za4M2L4Gd71GJI=" 2016-10-17T06:54:57.495932662Z
> INF/device:plugins:screen:stream 5690 [LGF180Ld952c130] Starting WebSocket
> server on port 7528 2016-10-17T06:54:57.783423287Z WRN/device:plugins:data
> 5690 [LGF180Ld952c130] Unable to find device data { serial:
> 'LGF180Ld952c130', 2016-10-17T06:54:57.783484803Z platform: 'Android',
> 2016-10-17T06:54:57.783493487Z manufacturer: 'LGE',
> 2016-10-17T06:54:57.783498240Z operator: null,
> 2016-10-17T06:54:57.783502858Z model: 'LG-F180L',
> 2016-10-17T06:54:57.783507048Z version: '4.4.2',
> 2016-10-17T06:54:57.783511223Z abi: 'armeabi-v7a',
> 2016-10-17T06:54:57.783515914Z sdk: '19', 2016-10-17T06:54:57.783520105Z
> product: 'geehrc4g_lgu_kr', 2016-10-17T06:54:57.783524591Z display:
> 2016-10-17T06:54:57.783529152Z { id: 0, 2016-10-17T06:54:57.783533180Z
> width: 768, 2016-10-17T06:54:57.783537233Z height: 1280,
> 2016-10-17T06:54:57.783541284Z xdpi: 319.7900085449219,
> 2016-10-17T06:54:57.783545365Z ydpi: 318.7449951171875,
> 2016-10-17T06:54:57.783549413Z fps: 60, 2016-10-17T06:54:57.783553476Z
> density: 2, 2016-10-17T06:54:57.783557502Z rotation: 0,
> 2016-10-17T06:54:57.783561568Z secure: true, 2016-10-17T06:54:57.783565571Z
> size: 4.679082154320592, 2016-10-17T06:54:57.783569834Z url:
> 'ws://192.168.1.7:7528 http://192.168.1.7:7528' },
> 2016-10-17T06:54:57.783574194Z phone: { imei: '354282056622539', network:
> 'UNKNOWN' } } 2016-10-17T06:54:57.785349245Z INF/device:plugins:touch 5690
> [LGF180Ld952c130] Touch origin is top left 2016-10-17T06:54:57.786182347Z
> INF/device:plugins:touch 5690 [LGF180Ld952c130] Requesting touch consumer
> to start 2016-10-17T06:54:57.787230767Z INF/device:plugins:touch 5690
> [LGF180Ld952c130] Launching screen service 2016-10-17T06:54:57.793957626Z
> INF/device:plugins:touch 5690 [LGF180Ld952c130] Connecting to minitouch
> service 2016-10-17T06:54:57.944750960Z INF/device:plugins:touch 5690
> [LGF180Ld952c130] minitouch says: "Note: device /dev/input/event7 was
> outscored by /dev/input/event2 (1100 >= 1000)"
> 2016-10-17T06:54:57.945187261Z INF/device:plugins:touch 5690
> [LGF180Ld952c130] minitouch says: "Note: device /dev/input/mice is not
> supported by libevdev" 2016-10-17T06:54:57.963326462Z
> INF/device:plugins:touch 5690 [LGF180Ld952c130] minitouch says: "Type B
> touch device touch_dev (1535x2559 with 10 contacts) detected on
> /dev/input/event2 (score 1100)" 2016-10-17T06:54:58.034633081Z
> INF/device:plugins:connect 5654 [ZX1G22J8HF] Listening on port 7485
> 2016-10-17T06:54:58.036336170Z INF/device 5654 [ZX1G22J8HF] Fully
> operational 2016-10-17T06:54:58.106914664Z INF/device:plugins:touch 5690
> [LGF180Ld952c130] Reading minitouch banner 2016-10-17T06:54:58.108093573Z
> INF/device:plugins:touch 5690 [LGF180Ld952c130] minitouch says: "Connection
> established" 2016-10-17T06:54:58.154031164Z INF/device:plugins:vnc 5690
> [LGF180Ld952c130] Starting VNC server on port 7530
> 2016-10-17T06:54:58.155376577Z INF/device:plugins:browser 5690
> [LGF180Ld952c130] Loading browser list 2016-10-17T06:54:58.273498113Z
> INF/device:plugins:browser 5690 [LGF180Ld952c130] Updating browser list
> 2016-10-17T06:54:58.278800554Z INF/device:plugins:mute 5690
> [LGF180Ld952c130] Will not mute master volume during use
> 2016-10-17T06:54:58.580110331Z INF/device:plugins:forward 5690
> [LGF180Ld952c130] Launching reverse port forwarding service
> 2016-10-17T06:54:58.586568181Z INF/device:plugins:forward 5690
> [LGF180Ld952c130] Connecting to reverse port forwarding service
> 2016-10-17T06:55:00.102789178Z INF/device:plugins:connect 5690
> [LGF180Ld952c130] Listening on port 7529 2016-10-17T06:55:00.104501314Z
> INF/device 5690 [LGF180Ld952c130] Fully operational
> 2016-10-17T06:55:00.117038929Z INF/util:datautil 66 [_] Device database
> does not have an entry for "LGF180Ld952c130" (model
> "LG-F180L"/"geehrc4g_lgu_kr"). This is not an error, it only means that we
> don't have data for it yet.
> 2016-10-17T06:55:00.210713260Z IMP/device:plugins:service 5476 [584eb6a1]
> Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:00.211120066Z IMP/device:plugins:service 5470
> [0acc27f325995e40] Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:00.211468184Z IMP/device:plugins:service 5494 [8511aff5]
> Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:00.212015110Z INF/provider 42 [
> 
> _] Device "0acc27f325995e40" is now "offline" (was "device")
> 2016-10-17T06:55:00.212345075Z INF/device:plugins:service 5494 [8511aff5]
> Launching service 2016-10-17T06:55:00.212474863Z INF/provider 42 [_]
> Device "8511aff5" is now "offline" (was "device")
> 2016-10-17T06:55:00.212551110Z INF/device:plugins:service 5470
> [0acc27f325995e40] Launching service
> 2016-10-17T06:55:00.213030689Z INF/provider 42 [
> _] Lost device "584eb6a1" (device) 2016-10-17T06:55:00.213228103Z
> INF/provider 42 [_] Shutting down device worker "584eb6a1"
> 2016-10-17T06:55:00.213314536Z INF/provider 42 [
> _] Lost device "0acc27f325995e40" (offline) 2016-10-17T06:55:00.213408980Z
> INF/provider 42 [_] Shutting down device worker "0acc27f325995e40"
> 2016-10-17T06:55:00.213480556Z INF/provider 42 [
> _] Lost device "8511aff5" (offline) 2016-10-17T06:55:00.213581759Z
> INF/provider 42 [_] Shutting down device worker "8511aff5"
> 2016-10-17T06:55:00.213767225Z IMP/device:plugins:service 5470
> [0acc27f325995e40] Service connection ended, attempting to relaunch
> 2016-10-17T06:55:00.213936971Z INF/device:plugins:service 5470
> [0acc27f325995e40] Launching service
> 2016-10-17T06:55:00.213977939Z IMP/device:plugins:service 5494 [8511aff5]
> Service connection ended, attempting to relaunch
> 2016-10-17T06:55:00.214226006Z INF/device:plugins:service 5494 [8511aff5]
> Launching service
> 2016-10-17T06:55:00.214674046Z WRN/device:plugins:touch 5470
> [0acc27f325995e40] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:55:00.214933883Z INF/provider 42 [
> 
> _] Cleaning up device worker "584eb6a1" 2016-10-17T06:55:00.215005515Z
> WRN/device:plugins:touch 5494 [8511aff5] Shell keeping minitouch running
> ended unexpectedly 2016-10-17T06:55:00.215295771Z
> INF/device:plugins:service 5476 [584eb6a1] Launching service
> 2016-10-17T06:55:00.215524626Z INF/device:plugins:touch 5470
> [0acc27f325995e40] Disconnecting from minitouch service
> 2016-10-17T06:55:00.216040577Z INF/device:plugins:touch 5494 [8511aff5]
> Disconnecting from minitouch service 2016-10-17T06:55:00.216074629Z
> IMP/device:plugins:service 5476 [584eb6a1] Service connection ended,
> attempting to relaunch 2016-10-17T06:55:00.216266164Z INF/provider 42 [_]
> Cleaning up device worker "0acc27f325995e40"
> 2016-10-17T06:55:00.216325688Z INF/provider 42 [
> _] Cleaning up device worker "8511aff5" 2016-10-17T06:55:00.216405991Z
> INF/provider 42 [_] Gracefully killing device worker "584eb6a1"
> 2016-10-17T06:55:00.216573177Z INF/provider 42 [
> _] Gracefully killing device worker "0acc27f325995e40"
> 2016-10-17T06:55:00.216696992Z INF/provider 42 [_] Gracefully killing
> device worker "8511aff5"
> 2016-10-17T06:55:00.217063392Z INF/device:plugins:service 5476 [584eb6a1]
> Launching service
> 2016-10-17T06:55:00.217621764Z FTL/util:lifecycle 5470 [0acc27f325995e40]
> Forward shell ended; we shall share its fate
> 2016-10-17T06:55:00.218153356Z FTL/util:lifecycle 5470 [0acc27f325995e40]
> Shutting down due to fatal error
> 2016-10-17T06:55:00.219819806Z WRN/device:plugins:touch 5476 [584eb6a1]
> Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:55:00.220518503Z INF/device:plugins:touch 5476 [584eb6a1]
> Disconnecting from minitouch service
> 2016-10-17T06:55:00.222220748Z FTL/util:lifecycle 5476 [584eb6a1] Forward
> shell ended; we shall share its fate
> 2016-10-17T06:55:00.222485725Z FTL/util:lifecycle 5476 [584eb6a1] Shutting
> down due to fatal error
> 2016-10-17T06:55:00.223124436Z INF/provider 42 [
> 
> _] Device worker "0acc27f325995e40" has retired
> 2016-10-17T06:55:00.224602013Z FTL/util:lifecycle 5494 [8511aff5] Forward
> shell ended; we shall share its fate 2016-10-17T06:55:00.224775545Z
> FTL/util:lifecycle 5494 [8511aff5] Shutting down due to fatal error
> 2016-10-17T06:55:00.225603387Z INF/provider 42 [_] Device worker
> "584eb6a1" has retired
> 2016-10-17T06:55:00.227746281Z INF/provider 42 [
> _] Device worker "8511aff5" has retired 2016-10-17T06:55:00.355471720Z
> INF/provider 42 [_] Found device "8511aff5" (offline)
> 2016-10-17T06:55:00.356319545Z INF/provider 42 [
> _] Found device "0acc27f325995e40" (offline)
> 2016-10-17T06:55:00.356918794Z INF/provider 42 [_] Found device
> "584eb6a1" (offline)
> 2016-10-17T06:55:00.374589968Z INF/provider 42 [
> 
> _] Registered device "0acc27f325995e40" 2016-10-17T06:55:00.374726304Z
> INF/reaper 36 [reaper001] Device "0acc27f325995e40" is present
> 2016-10-17T06:55:00.376174877Z INF/reaper 36 [reaper001] Device "8511aff5"
> is present 2016-10-17T06:55:00.376349057Z INF/provider 42 [_] Registered
> device "8511aff5"
> 2016-10-17T06:55:00.379766860Z INF/provider 42 [
> _] Device "8511aff5" is now "unauthorized" (was "offline")
> 2016-10-17T06:55:00.383593739Z INF/provider 42 [_] Registered device
> "584eb6a1"
> 2016-10-17T06:55:00.383670823Z INF/provider 42 [
> 
> _] Lost device "584eb6a1" (offline) 2016-10-17T06:55:00.386955587Z
> INF/reaper 36 [reaper001] Device "584eb6a1" is present
> 2016-10-17T06:55:00.438179671Z INF/provider 42 [_] Device
> "0acc27f325995e40" is now "device" (was "offline")
> 2016-10-17T06:55:00.441652045Z INF/provider 42 [
> 
> _] Device "8511aff5" is now "device" (was "unauthorized")
> 2016-10-17T06:55:00.788113165Z INF/device:support:push 5702
> [0acc27f325995e40] Sending output to "tcp://127.0.0.1:7116
> http://127.0.0.1:7116" 2016-10-17T06:55:00.788133159Z
> INF/device:support:push 5703 [8511aff5] Sending output to
> "tcp://127.0.0.1:7116 http://127.0.0.1:7116"
> 2016-10-17T06:55:00.789881243Z INF/device 5703 [8511aff5] Preparing device
> 2016-10-17T06:55:00.789915001Z INF/device 5702 [0acc27f325995e40] Preparing
> device 2016-10-17T06:55:01.091612077Z INF/device:support:sub 5703
> [8511aff5] Receiving input from "tcp://127.0.0.1:7114
> http://127.0.0.1:7114" 2016-10-17T06:55:01.092135074Z
> INF/device:support:sub 5702 [0acc27f325995e40] Receiving input from
> "tcp://127.0.0.1:7114 http://127.0.0.1:7114"
> 2016-10-17T06:55:01.092281784Z INF/device:support:sub 5703 [8511aff5]
> Subscribing to permanent channel "_ALL"
> 2016-10-17T06:55:01.092968050Z INF/device:support:sub 5702
> [0acc27f325995e40] Subscribing to permanent channel "
> 
> _ALL" 2016-10-17T06:55:01.142470193Z INF/device:support:properties 5703
> [8511aff5] Loading properties 2016-10-17T06:55:01.168986065Z
> INF/device:support:properties 5702 [0acc27f325995e40] Loading properties
> 2016-10-17T06:55:01.200100930Z INF/device:support:abi 5702
> [0acc27f325995e40] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:55:01.200179092Z INF/device:support:abi 5703 [8511aff5]
> Supports ABIs armeabi-v7a, armeabi 2016-10-17T06:55:01.343090178Z
> INF/device:resources:service 5702 [0acc27f325995e40] Checking whether we
> need to install STFService 2016-10-17T06:55:01.377530003Z
> INF/device:resources:service 5703 [8511aff5] Checking whether we need to
> install STFService 2016-10-17T06:55:01.776256765Z INF/provider 42 [_]
> Found device "584eb6a1" (offline)
> 2016-10-17T06:55:01.792105481Z INF/reaper 36 [reaper001] Device "584eb6a1"
> is present
> 2016-10-17T06:55:01.792184150Z INF/provider 42 [
> _] Registered device "584eb6a1" 2016-10-17T06:55:01.888667648Z
> INF/provider 42 [_] Device "584eb6a1" is now "device" (was "offline")
> 2016-10-17T06:55:01.953942619Z INF/device:resources:service 5702
> [0acc27f325995e40] Running version check
> 2016-10-17T06:55:02.036442734Z INF/device:resources:service 5703
> [8511aff5] Running version check
> 2016-10-17T06:55:02.227380847Z INF/device:support:push 5726 [584eb6a1]
> Sending output to "tcp://127.0.0.1:7116"
> 2016-10-17T06:55:02.229141460Z INF/device 5726 [584eb6a1] Preparing device
> 2016-10-17T06:55:02.513001368Z INF/device:support:sub 5726 [584eb6a1]
> Receiving input from "tcp://127.0.0.1:7114"
> 2016-10-17T06:55:02.513506539Z INF/device:support:sub 5726 [584eb6a1]
> Subscribing to permanent channel "
> 
> _ALL" 2016-10-17T06:55:02.613956543Z INF/device:support:properties 5726
> [584eb6a1] Loading properties 2016-10-17T06:55:02.709733761Z
> INF/device:support:abi 5726 [584eb6a1] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:55:02.773649438Z INF/device:resources:service 5702
> [0acc27f325995e40] STFService up to date 2016-10-17T06:55:02.777786455Z
> INF/device:plugins:service 5702 [0acc27f325995e40] Launching agent
> 2016-10-17T06:55:02.929374886Z INF/device:resources:service 5703 [8511aff5]
> STFService up to date 2016-10-17T06:55:02.933756874Z
> INF/device:plugins:service 5703 [8511aff5] Launching agent
> 2016-10-17T06:55:03.120296318Z INF/device:resources:service 5726 [584eb6a1]
> Checking whether we need to install STFService
> 2016-10-17T06:55:03.477001667Z INF/device:plugins:service 5702
> [0acc27f325995e40] Launching service 2016-10-17T06:55:03.492406897Z
> INF/device:plugins:service 5702 [0acc27f325995e40] Agent says: "Listening
> on @stfagent" 2016-10-17T06:55:03.493306476Z INF/device:plugins:service
> 5702 [0acc27f325995e40] Agent says: "InputClient started"
> 2016-10-17T06:55:03.629125838Z INF/device:resources:service 5726 [584eb6a1]
> Running version check 2016-10-17T06:55:03.750140511Z
> INF/device:plugins:service 5703 [8511aff5] Agent says: "Listening on
> @stfagent" 2016-10-17T06:55:03.787790828Z INF/device:plugins:service 5703
> [8511aff5] Launching service 2016-10-17T06:55:03.789367464Z
> INF/device:plugins:service 5703 [8511aff5] Agent says: "InputClient
> started" 2016-10-17T06:55:04.305240378Z INF/device:resources:service 5726
> [584eb6a1] STFService up to date 2016-10-17T06:55:04.306276762Z
> INF/device:plugins:service 5726 [584eb6a1] Launching agent
> 2016-10-17T06:55:04.318748657Z INF/device:plugins:display 5702
> [0acc27f325995e40] Reading display info 2016-10-17T06:55:04.324347688Z
> INF/device:plugins:phone 5702 [0acc27f325995e40] Fetching phone info
> 2016-10-17T06:55:04.331508699Z INF/device:plugins:identity 5702
> [0acc27f325995e40] Solving identity 2016-10-17T06:55:04.333103636Z
> INF/device:plugins:solo 5702 [0acc27f325995e40] Subscribing to permanent
> channel "FMWTMkLnoFBQN/l3qJQtoA02BwM=" 2016-10-17T06:55:04.334468833Z
> INF/device:plugins:screen:stream 5702 [0acc27f325995e40] Starting WebSocket
> server on port 7524 2016-10-17T06:55:04.438206497Z INF/device:plugins:touch
> 5702 [0acc27f325995e40] Touch origin is top left
> 2016-10-17T06:55:04.439935467Z INF/device:plugins:touch 5702
> [0acc27f325995e40] Requesting touch consumer to start
> 2016-10-17T06:55:04.441504374Z INF/device:plugins:touch 5702
> [0acc27f325995e40] Launching screen service 2016-10-17T06:55:04.445628171Z
> INF/device:plugins:touch 5702 [0acc27f325995e40] Connecting to minitouch
> service 2016-10-17T06:55:04.483956284Z INF/device:plugins:touch 5702
> [0acc27f325995e40] minitouch says: "Type B touch device touch_dev
> (1079x1919 with 10 contacts) detected on /dev/input/event1 (score 1100)"
> 2016-10-17T06:55:04.553545182Z INF/device:plugins:touch 5702
> [0acc27f325995e40] minitouch says: "Connection established"
> 2016-10-17T06:55:04.555573245Z INF/device:plugins:touch 5702
> [0acc27f325995e40] Reading minitouch banner 2016-10-17T06:55:04.613911485Z
> INF/device:plugins:vnc 5702 [0acc27f325995e40] Starting VNC server on port
> 7526 2016-10-17T06:55:04.619801371Z INF/device:plugins:browser 5702
> [0acc27f325995e40] Loading browser list 2016-10-17T06:55:04.628045965Z
> INF/device:plugins:browser 5702 [0acc27f325995e40] Updating browser list
> 2016-10-17T06:55:04.632163687Z INF/device:plugins:mute 5702
> [0acc27f325995e40] Will not mute master volume during use
> 2016-10-17T06:55:04.683962014Z INF/device:plugins:display 5703 [8511aff5]
> Reading display info 2016-10-17T06:55:04.742063784Z
> INF/device:plugins:forward 5702 [0acc27f325995e40] Launching reverse port
> forwarding service 2016-10-17T06:55:04.752147689Z
> INF/device:plugins:forward 5702 [0acc27f325995e40] Connecting to reverse
> port forwarding service 2016-10-17T06:55:04.813332579Z
> INF/device:plugins:phone 5703 [8511aff5] Fetching phone info
> 2016-10-17T06:55:04.821442827Z INF/device:plugins:identity 5703 [8511aff5]
> Solving identity 2016-10-17T06:55:04.823424906Z INF/device:plugins:solo
> 5703 [8511aff5] Subscribing to permanent channel
> "+CxO2iowp9IVn72MKxk2c+puwNI=" 2016-10-17T06:55:04.827391296Z
> INF/device:plugins:screen:stream 5703 [8511aff5] Starting WebSocket server
> on port 7496 2016-10-17T06:55:04.870416937Z INF/device:plugins:service 5726
> [584eb6a1] Launching service 2016-10-17T06:55:04.885847082Z
> INF/device:plugins:service 5726 [584eb6a1] Agent says: "Listening on
> @stfagent" 2016-10-17T06:55:04.888637926Z INF/device:plugins:service 5726
> [584eb6a1] Agent says: "InputClient started" 2016-10-17T06:55:04.967694250Z
> WRN/device:plugins:data 5703 [8511aff5] Unable to find device data {
> serial: '8511aff5', 2016-10-17T06:55:04.967725750Z platform: 'Android',
> 2016-10-17T06:55:04.967731882Z manufacturer: 'LGE',
> 2016-10-17T06:55:04.967736698Z operator: null,
> 2016-10-17T06:55:04.967740924Z model: 'LG-F260S',
> 2016-10-17T06:55:04.967745046Z version: '4.4.2',
> 2016-10-17T06:55:04.967749101Z abi: 'armeabi-v7a',
> 2016-10-17T06:55:04.967753969Z sdk: '19', 2016-10-17T06:55:04.967769717Z
> product: 'fx1sk_skt_kr', 2016-10-17T06:55:04.967774490Z display:
> 2016-10-17T06:55:04.967778605Z { id: 0, 2016-10-17T06:55:04.967782827Z
> width: 720, 2016-10-17T06:55:04.967786941Z height: 1280,
> 2016-10-17T06:55:04.967791011Z xdpi: 326.5710144042969,
> 2016-10-17T06:55:04.967795112Z ydpi: 328.40399169921875,
> 2016-10-17T06:55:04.967799133Z fps: 60, 2016-10-17T06:55:04.967803263Z
> density: 2, 2016-10-17T06:55:04.967807367Z rotation: 0,
> 2016-10-17T06:55:04.967811388Z secure: true, 2016-10-17T06:55:04.967815399Z
> size: 4.477991395714372, 2016-10-17T06:55:04.967819773Z url:
> 'ws://192.168.1.7:7496 http://192.168.1.7:7496' },
> 2016-10-17T06:55:04.967824203Z phone: { imei: '355706052813097', network:
> 'UNKNOWN' } } 2016-10-17T06:55:04.969720954Z INF/device:plugins:touch 5703
> [8511aff5] Touch origin is top left 2016-10-17T06:55:04.970641834Z
> INF/device:plugins:touch 5703 [8511aff5] Requesting touch consumer to start
> 2016-10-17T06:55:04.971960875Z INF/device:plugins:touch 5703 [8511aff5]
> Launching screen service 2016-10-17T06:55:04.975577225Z
> INF/device:plugins:touch 5703 [8511aff5] Connecting to minitouch service
> 2016-10-17T06:55:05.285710443Z INF/device:plugins:touch 5703 [8511aff5]
> minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
> 2016-10-17T06:55:05.325952550Z INF/device:plugins:touch 5703 [8511aff5]
> minitouch says: "Type A touch device synaptics_ts (1540x2560 with 11
> contacts) detected on /dev/input/event2 (score 1000)"
> 2016-10-17T06:55:05.326409867Z INF/device:plugins:touch 5703 [8511aff5]
> minitouch says: "Note: hard-limiting maximum number of contacts to 10"
> 2016-10-17T06:55:05.589492106Z INF/device:plugins:connect 5702
> [0acc27f325995e40] Listening on port 7525 2016-10-17T06:55:05.591225033Z
> INF/device 5702 [0acc27f325995e40] Fully operational
> 2016-10-17T06:55:05.670599436Z INF/device:plugins:display 5726 [584eb6a1]
> Reading display info 2016-10-17T06:55:05.691827522Z
> INF/device:plugins:touch 5703 [8511aff5] minitouch says: "Connection
> established" 2016-10-17T06:55:05.695412675Z INF/device:plugins:touch 5703
> [8511aff5] Reading minitouch banner 2016-10-17T06:55:05.735545162Z
> INF/device:plugins:vnc 5703 [8511aff5] Starting VNC server on port 7498
> 2016-10-17T06:55:05.737757345Z INF/device:plugins:phone 5726 [584eb6a1]
> Fetching phone info 2016-10-17T06:55:05.738440911Z
> INF/device:plugins:browser 5703 [8511aff5] Loading browser list
> 2016-10-17T06:55:05.776913372Z INF/device:plugins:identity 5726 [584eb6a1]
> Solving identity 2016-10-17T06:55:05.779200924Z INF/device:plugins:solo
> 5726 [584eb6a1] Subscribing to permanent channel
> "FXuFnqglunHbDC4CJPZAIn+6Q48=" 2016-10-17T06:55:05.783045747Z
> INF/device:plugins:screen:stream 5726 [584eb6a1] Starting WebSocket server
> on port 7520 2016-10-17T06:55:05.839871988Z INF/device:plugins:browser 5703
> [8511aff5] Updating browser list 2016-10-17T06:55:05.840786026Z
> WRN/device:plugins:browser 5703 [8511aff5] Unmapped browser
> "com.nate.android.portalmini" 2016-10-17T06:55:05.845757573Z
> INF/device:plugins:mute 5703 [8511aff5] Will not mute master volume during
> use 2016-10-17T06:55:05.950477402Z INF/device:plugins:forward 5703
> [8511aff5] Launching reverse port forwarding service
> 2016-10-17T06:55:05.959678168Z INF/device:plugins:forward 5703 [8511aff5]
> Connecting to reverse port forwarding service
> 2016-10-17T06:55:06.056835986Z WRN/device:plugins:data 5726 [584eb6a1]
> Unable to find device data { serial: '584eb6a1',
> 2016-10-17T06:55:06.056869136Z platform: 'Android',
> 2016-10-17T06:55:06.056875758Z manufacturer: 'SAMSUNG',
> 2016-10-17T06:55:06.056880037Z operator: null,
> 2016-10-17T06:55:06.056884183Z model: 'SHV-E330S',
> 2016-10-17T06:55:06.056888267Z version: '5.0.1',
> 2016-10-17T06:55:06.056892358Z abi: 'armeabi-v7a',
> 2016-10-17T06:55:06.056896754Z sdk: '21', 2016-10-17T06:55:06.056900892Z
> product: 'ks01lteskt', 2016-10-17T06:55:06.056904971Z display:
> 2016-10-17T06:55:06.056909010Z { id: 0, 2016-10-17T06:55:06.056913160Z
> width: 1080, 2016-10-17T06:55:06.056917411Z height: 1920,
> 2016-10-17T06:55:06.056921413Z xdpi: 442.45098876953125,
> 2016-10-17T06:55:06.056925488Z ydpi: 439.35101318359375,
> 2016-10-17T06:55:06.056929556Z fps: 60, 2016-10-17T06:55:06.056933622Z
> density: 3, 2016-10-17T06:55:06.056937656Z rotation: 0,
> 2016-10-17T06:55:06.056941653Z secure: true, 2016-10-17T06:55:06.056945732Z
> size: 5.005581516669951, 2016-10-17T06:55:06.056950081Z url:
> 'ws://192.168.1.7:7520 http://192.168.1.7:7520' },
> 2016-10-17T06:55:06.056954472Z phone: { imei: '356432056958486', network:
> 'UNKNOWN' } } 2016-10-17T06:55:06.058462776Z INF/device:plugins:touch 5726
> [584eb6a1] Touch origin is top left 2016-10-17T06:55:06.059172156Z
> INF/device:plugins:touch 5726 [584eb6a1] Requesting touch consumer to start
> 2016-10-17T06:55:06.060139666Z INF/device:plugins:touch 5726 [584eb6a1]
> Launching screen service 2016-10-17T06:55:06.070462145Z
> INF/device:plugins:touch 5726 [584eb6a1] Connecting to minitouch service
> 2016-10-17T06:55:06.563770342Z INF/device:plugins:touch 5726 [584eb6a1]
> minitouch says: "Note: device /dev/input/mice is not supported by libevdev"
> 2016-10-17T06:55:06.692035236Z INF/device:plugins:touch 5726 [584eb6a1]
> minitouch says: "Type B touch device sec_touchscreen (1079x1919 with 10
> contacts) detected on /dev/input/event3 (score 1100)"
> 2016-10-17T06:55:06.796635874Z INF/device:plugins:touch 5726 [584eb6a1]
> Reading minitouch banner 2016-10-17T06:55:06.798000909Z
> INF/device:plugins:touch 5726 [584eb6a1] minitouch says: "Connection
> established" 2016-10-17T06:55:06.838168927Z INF/device:plugins:vnc 5726
> [584eb6a1] Starting VNC server on port 7522 2016-10-17T06:55:06.839774391Z
> INF/device:plugins:browser 5726 [584eb6a1] Loading browser list
> 2016-10-17T06:55:06.872561991Z INF/device:plugins:browser 5726 [584eb6a1]
> Updating browser list 2016-10-17T06:55:06.878002866Z
> INF/device:plugins:mute 5726 [584eb6a1] Will not mute master volume during
> use 2016-10-17T06:55:07.115513708Z INF/device:plugins:connect 5703
> [8511aff5] Listening on port 7497 2016-10-17T06:55:07.120496481Z
> INF/device:plugins:forward 5726 [584eb6a1] Launching reverse port
> forwarding service 2016-10-17T06:55:07.122631534Z INF/device 5703
> [8511aff5] Fully operational 2016-10-17T06:55:07.128430029Z
> INF/device:plugins:forward 5726 [584eb6a1] Connecting to reverse port
> forwarding service 2016-10-17T06:55:07.144425087Z INF/util:datautil 66 [_]
> Device database does not have an entry for "8511aff5" (model
> "LG-F260S"/"fx1sk_skt_kr"). This is not an error, it only means that we
> don't have data for it yet.
> 2016-10-17T06:55:08.223500893Z INF/device:plugins:connect 5726 [584eb6a1]
> Listening on port 7521
> 2016-10-17T06:55:08.226433706Z INF/device 5726 [584eb6a1] Fully operational
> 2016-10-17T06:55:08.245764499Z INF/util:datautil 66 [
> _] Device database does not have an entry for "584eb6a1" (model
> "SHV-E330S"/"ks01lteskt"). This is not an error, it only means that we
> don't have data for it yet. 2016-10-17T06:55:11.780513348Z INF/provider 42
> [_] Providing all 8 device(s)
> 2016-10-17T06:55:19.652363626Z IMP/device:plugins:service 5666
> [0d893faa43e4b116] Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:19.653098522Z INF/device:plugins:service 5666
> [0d893faa43e4b116] Launching service
> 2016-10-17T06:55:19.653451447Z IMP/device:plugins:service 5654
> [ZX1G22J8HF] Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:19.655357345Z INF/provider 42 [
> _] Device "ZX1G22J8HF" is now "offline" (was "device")
> 2016-10-17T06:55:19.655626260Z INF/provider 42 [_] Device
> "0d88b43e25995b5a" is now "offline" (was "device")
> 2016-10-17T06:55:19.655663441Z IMP/device:plugins:service 5660
> [0d88b43e25995b5a] Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:19.655802922Z INF/provider 42 [
> 
> _] Device "LGF180Ld952c130" is now "offline" (was "device")
> 2016-10-17T06:55:19.655862340Z INF/device:plugins:service 5660
> [0d88b43e25995b5a] Launching service 2016-10-17T06:55:19.656080657Z
> INF/provider 42 [_] Lost device "0d893faa43e4b116" (device)
> 2016-10-17T06:55:19.656203539Z INF/provider 42 [
> 
> _] Shutting down device worker "0d893faa43e4b116"
> 2016-10-17T06:55:19.656695901Z IMP/device:plugins:service 5690
> [LGF180Ld952c130] Agent connection ended, attempting to relaunch
> 2016-10-17T06:55:19.658034863Z INF/provider 42 [_] Cleaning up device
> worker "0d893faa43e4b116"
> 2016-10-17T06:55:19.658879021Z IMP/device:plugins:service 5660
> [0d88b43e25995b5a] Service connection ended, attempting to relaunch
> 2016-10-17T06:55:19.659075859Z INF/device:plugins:service 5660
> [0d88b43e25995b5a] Launching service
> 2016-10-17T06:55:19.660214230Z INF/device:plugins:service 5690
> [LGF180Ld952c130] Launching service
> 2016-10-17T06:55:19.660904789Z WRN/device:plugins:touch 5660
> [0d88b43e25995b5a] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:55:19.661459280Z INF/provider 42 [
> 
> _] Lost device "ZX1G22J8HF" (offline) 2016-10-17T06:55:19.661565171Z
> INF/device:plugins:touch 5660 [0d88b43e25995b5a] Disconnecting from
> minitouch service 2016-10-17T06:55:19.661628858Z INF/provider 42 [_]
> Shutting down device worker "ZX1G22J8HF"
> 2016-10-17T06:55:19.661828144Z INF/provider 42 [
> 
> _] Lost device "0d88b43e25995b5a" (offline) 2016-10-17T06:55:19.661870958Z
> IMP/device:plugins:service 5690 [LGF180Ld952c130] Service connection ended,
> attempting to relaunch 2016-10-17T06:55:19.662070034Z INF/provider 42 [_]
> Shutting down device worker "0d88b43e25995b5a"
> 2016-10-17T06:55:19.662149456Z INF/provider 42 [
> _] Lost device "LGF180Ld952c130" (offline) 2016-10-17T06:55:19.662362978Z
> INF/provider 42 [_] Shutting down device worker "LGF180Ld952c130"
> 2016-10-17T06:55:19.662439053Z INF/provider 42 [
> 
> _] Gracefully killing device worker "0d893faa43e4b116"
> 2016-10-17T06:55:19.663493247Z FTL/util:lifecycle 5660 [0d88b43e25995b5a]
> Forward shell ended; we shall share its fate 2016-10-17T06:55:19.663629562Z
> INF/provider 42 [_] Cleaning up device worker "ZX1G22J8HF"
> 2016-10-17T06:55:19.663791645Z INF/provider 42 [
> 
> _] Cleaning up device worker "0d88b43e25995b5a"
> 2016-10-17T06:55:19.663862479Z INF/device:plugins:service 5690
> [LGF180Ld952c130] Launching service 2016-10-17T06:55:19.663944529Z
> INF/provider 42 [_] Cleaning up device worker "LGF180Ld952c130"
> 2016-10-17T06:55:19.664154415Z INF/provider 42 [
> _] Gracefully killing device worker "ZX1G22J8HF"
> 2016-10-17T06:55:19.664276573Z INF/provider 42 [_] Gracefully killing
> device worker "0d88b43e25995b5a"
> 2016-10-17T06:55:19.664387061Z WRN/device:plugins:touch 5690
> [LGF180Ld952c130] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:55:19.664631637Z INF/provider 42 [
> 
> _] Gracefully killing device worker "LGF180Ld952c130"
> 2016-10-17T06:55:19.664899612Z INF/device:plugins:touch 5690
> [LGF180Ld952c130] Disconnecting from minitouch service
> 2016-10-17T06:55:19.665374711Z FTL/util:lifecycle 5660 [0d88b43e25995b5a]
> Shutting down due to fatal error 2016-10-17T06:55:19.668493392Z
> FTL/util:lifecycle 5690 [LGF180Ld952c130] Forward shell ended; we shall
> share its fate 2016-10-17T06:55:19.668948217Z FTL/util:lifecycle 5690
> [LGF180Ld952c130] Shutting down due to fatal error
> 2016-10-17T06:55:19.669770468Z INF/device:plugins:service 5654 [ZX1G22J8HF]
> Launching service 2016-10-17T06:55:19.671251104Z IMP/device:plugins:service
> 5654 [ZX1G22J8HF] Service connection ended, attempting to relaunch
> 2016-10-17T06:55:19.671701944Z INF/device:plugins:service 5654 [ZX1G22J8HF]
> Launching service 2016-10-17T06:55:19.671805139Z INF/provider 42 [_]
> Device worker "0d88b43e25995b5a" has retired
> 2016-10-17T06:55:19.672674178Z WRN/device:plugins:touch 5654 [ZX1G22J8HF]
> Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:55:19.673302630Z INF/device:plugins:touch 5654 [ZX1G22J8HF]
> Disconnecting from minitouch service
> 2016-10-17T06:55:19.673750935Z INF/provider 42 [
> 
> _] Device worker "LGF180Ld952c130" has retired
> 2016-10-17T06:55:19.675686399Z FTL/util:lifecycle 5654 [ZX1G22J8HF] Forward
> shell ended; we shall share its fate 2016-10-17T06:55:19.676020380Z
> FTL/util:lifecycle 5654 [ZX1G22J8HF] Shutting down due to fatal error
> 2016-10-17T06:55:19.676156236Z IMP/device:plugins:service 5666
> [0d893faa43e4b116] Service connection ended, attempting to relaunch
> 2016-10-17T06:55:19.676411638Z INF/device:plugins:service 5666
> [0d893faa43e4b116] Launching service 2016-10-17T06:55:19.679633091Z
> INF/provider 42 [_] Device worker "ZX1G22J8HF" has retired
> 2016-10-17T06:55:19.682187633Z WRN/device:plugins:touch 5666
> [0d893faa43e4b116] Shell keeping minitouch running ended unexpectedly
> 2016-10-17T06:55:19.682661523Z INF/device:plugins:touch 5666
> [0d893faa43e4b116] Disconnecting from minitouch service
> 2016-10-17T06:55:19.684019333Z FTL/util:lifecycle 5666 [0d893faa43e4b116]
> Forward shell ended; we shall share its fate
> 2016-10-17T06:55:19.684770210Z FTL/util:lifecycle 5666 [0d893faa43e4b116]
> Shutting down due to fatal error
> 2016-10-17T06:55:19.688246967Z INF/provider 42 [
> _] Device worker "0d893faa43e4b116" has retired
> 2016-10-17T06:55:19.923604669Z INF/provider 42 [_] Found device
> "ZX1G22J8HF" (offline)
> 2016-10-17T06:55:19.924472778Z INF/provider 42 [
> _] Found device "0d893faa43e4b116" (offline)
> 2016-10-17T06:55:19.925162039Z INF/provider 42 [_] Found device
> "LGF180Ld952c130" (offline)
> 2016-10-17T06:55:19.925870800Z INF/provider 42 [
> 
> _] Found device "0d88b43e25995b5a" (offline)
> 2016-10-17T06:55:19.946388010Z INF/reaper 36 [reaper001] Device
> "ZX1G22J8HF" is present 2016-10-17T06:55:19.946538790Z INF/provider 42 [_]
> Registered device "ZX1G22J8HF"
> 2016-10-17T06:55:19.946584694Z INF/provider 42 [
> 
> _] Registered device "0d88b43e25995b5a" 2016-10-17T06:55:19.946695071Z
> INF/reaper 36 [reaper001] Device "0d88b43e25995b5a" is present
> 2016-10-17T06:55:19.949423761Z INF/reaper 36 [reaper001] Device
> "LGF180Ld952c130" is present 2016-10-17T06:55:19.949729595Z INF/provider 42
> [_] Registered device "LGF180Ld952c130"
> 2016-10-17T06:55:19.951672153Z INF/reaper 36 [reaper001] Device
> "0d893faa43e4b116" is present
> 2016-10-17T06:55:19.951800921Z INF/provider 42 [
> _] Registered device "0d893faa43e4b116" 2016-10-17T06:55:19.956382375Z
> INF/provider 42 [_] Device "ZX1G22J8HF" is now "unauthorized" (was
> "offline")
> 2016-10-17T06:55:19.956745864Z INF/provider 42 [
> _] Device "LGF180Ld952c130" is now "unauthorized" (was "offline")
> 2016-10-17T06:55:19.957180977Z INF/provider 42 [_] Lost device
> "0d88b43e25995b5a" (offline)
> 2016-10-17T06:55:19.960219977Z INF/provider 42 [
> _] Device "LGF180Ld952c130" is now "device" (was "unauthorized")
> 2016-10-17T06:55:19.960571939Z INF/provider 42 [_] Device "ZX1G22J8HF" is
> now "device" (was "unauthorized")
> 2016-10-17T06:55:20.014708144Z INF/provider 42 [
> 
> _] Device "0d893faa43e4b116" is now "device" (was "offline")
> 2016-10-17T06:55:20.315418682Z INF/device:support:push 5738
> [LGF180Ld952c130] Sending output to "tcp://127.0.0.1:7116
> http://127.0.0.1:7116" 2016-10-17T06:55:20.317219322Z
> INF/device:support:push 5739 [ZX1G22J8HF] Sending output to
> "tcp://127.0.0.1:7116 http://127.0.0.1:7116"
> 2016-10-17T06:55:20.317292744Z INF/device 5738 [LGF180Ld952c130] Preparing
> device 2016-10-17T06:55:20.319039625Z INF/device 5739 [ZX1G22J8HF]
> Preparing device 2016-10-17T06:55:20.339677157Z INF/device:support:push
> 5750 [0d893faa43e4b116] Sending output to "tcp://127.0.0.1:7116
> http://127.0.0.1:7116" 2016-10-17T06:55:20.341543569Z INF/device 5750
> [0d893faa43e4b116] Preparing device 2016-10-17T06:55:20.630746121Z
> INF/device:support:sub 5739 [ZX1G22J8HF] Receiving input from
> "tcp://127.0.0.1:7114 http://127.0.0.1:7114"
> 2016-10-17T06:55:20.630786266Z INF/device:support:sub 5738
> [LGF180Ld952c130] Receiving input from "tcp://127.0.0.1:7114
> http://127.0.0.1:7114" 2016-10-17T06:55:20.631479209Z
> INF/device:support:sub 5739 [ZX1G22J8HF] Subscribing to permanent channel "_
> ALL"
> 2016-10-17T06:55:20.631537763Z INF/device:support:sub 5738
> [LGF180Ld952c130] Subscribing to permanent channel "
> 
> _ALL" 2016-10-17T06:55:20.656391692Z INF/device:support:sub 5750
> [0d893faa43e4b116] Receiving input from "tcp://127.0.0.1:7114
> http://127.0.0.1:7114" 2016-10-17T06:55:20.657217429Z
> INF/device:support:sub 5750 [0d893faa43e4b116] Subscribing to permanent
> channel "_ALL"
> 2016-10-17T06:55:20.682376112Z INF/device:support:properties 5738
> [LGF180Ld952c130] Loading properties
> 2016-10-17T06:55:20.734105950Z INF/device:support:properties 5750
> [0d893faa43e4b116] Loading properties
> 2016-10-17T06:55:20.740386818Z INF/device:support:properties 5739
> [ZX1G22J8HF] Loading properties
> 2016-10-17T06:55:20.769535634Z INF/device:support:abi 5750
> [0d893faa43e4b116] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:55:20.783396167Z INF/device:support:abi 5738
> [LGF180Ld952c130] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:55:20.844262838Z INF/device:support:abi 5739 [ZX1G22J8HF]
> Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:55:20.899284283Z INF/device:resources:service 5750
> [0d893faa43e4b116] Checking whether we need to install STFService
> 2016-10-17T06:55:20.923742151Z INF/device:resources:service 5738
> [LGF180Ld952c130] Checking whether we need to install STFService
> 2016-10-17T06:55:21.211353258Z INF/device:resources:service 5739
> [ZX1G22J8HF] Checking whether we need to install STFService
> 2016-10-17T06:55:21.415748428Z INF/provider 42 [
> 
> _] Found device "0d88b43e25995b5a" (offline)
> 2016-10-17T06:55:21.430535531Z INF/reaper 36 [reaper001] Device
> "0d88b43e25995b5a" is present 2016-10-17T06:55:21.430640612Z INF/provider
> 42 [_] Registered device "0d88b43e25995b5a"
> 2016-10-17T06:55:21.492687066Z INF/provider 42 [
> 
> _] Device "0d88b43e25995b5a" is now "device" (was "offline")
> 2016-10-17T06:55:21.558551803Z INF/device:resources:service 5750
> [0d893faa43e4b116] Running version check 2016-10-17T06:55:21.581008115Z
> INF/device:resources:service 5738 [LGF180Ld952c130] Running version check
> 2016-10-17T06:55:21.830928095Z INF/device:support:push 5774
> [0d88b43e25995b5a] Sending output to "tcp://127.0.0.1:7116
> http://127.0.0.1:7116" 2016-10-17T06:55:21.832668971Z INF/device 5774
> [0d88b43e25995b5a] Preparing device 2016-10-17T06:55:22.074239741Z
> INF/device:resources:service 5739 [ZX1G22J8HF] Running version check
> 2016-10-17T06:55:22.118258436Z INF/device:support:sub 5774
> [0d88b43e25995b5a] Receiving input from "tcp://127.0.0.1:7114
> http://127.0.0.1:7114" 2016-10-17T06:55:22.119035838Z
> INF/device:support:sub 5774 [0d88b43e25995b5a] Subscribing to permanent
> channel "_ALL"
> 2016-10-17T06:55:22.192106962Z INF/device:support:properties 5774
> [0d88b43e25995b5a] Loading properties
> 2016-10-17T06:55:22.221301321Z INF/device:support:abi 5774
> [0d88b43e25995b5a] Supports ABIs armeabi-v7a, armeabi
> 2016-10-17T06:55:22.351286754Z INF/device:resources:service 5774
> [0d88b43e25995b5a] Checking whether we need to install STFService
> 2016-10-17T06:55:22.376345812Z INF/device:resources:service 5750
> [0d893faa43e4b116] STFService up to date
> 2016-10-17T06:55:22.378578224Z INF/device:plugins:service 5750
> [0d893faa43e4b116] Launching agent
> 2016-10-17T06:55:22.612232337Z INF/device:resources:service 5738
> [LGF180Ld952c130] STFService up to date
> 2016-10-17T06:55:22.613827039Z INF/device:plugins:service 5738
> [LGF180Ld952c130] Launching agent
> 2016-10-17T06:55:22.980393487Z INF/device:resources:service 5774
> [0d88b43e25995b5a] Running version check
> 2016-10-17T06:55:22.984299161Z INF/device:resources:service 5739
> [ZX1G22J8HF] STFService up to date
> 2016-10-17T06:55:22.988534279Z INF/device:plugins:service 5739
> [ZX1G22J8HF] Launching agent
> 2016-10-17T06:55:23.156630689Z INF/device:plugins:service 5750
> [0d893faa43e4b116] Agent says: "Listening on @stfagent"
> 2016-10-17T06:55:23.208759719Z INF/device:plugins:service 5750
> [0d893faa43e4b116] Launching service
> 2016-10-17T06:55:23.210362624Z INF/device:plugins:service 5750
> [0d893faa43e4b116] Agent says: "InputClient started"
> 2016-10-17T06:55:23.645613670Z INF/device:plugins:service 5738
> [LGF180Ld952c130] Launching service
> 2016-10-17T06:55:23.690379827Z INF/device:plugins:service 5738
> [LGF180Ld952c130] Agent says: "Listening on @stfagent"
> 2016-10-17T06:55:23.691314812Z INF/device:plugins:service 5738
> [LGF180Ld952c130] Agent says: "InputClient started"
> 2016-10-17T06:55:23.801693083Z INF/device:resources:service 5774
> [0d88b43e25995b5a] STFService up to date
> 2016-10-17T06:55:23.802964099Z INF/device:plugins:service 5774
> [0d88b43e25995b5a] Launching agent
> 2016-10-17T06:55:23.961882989Z INF/device:plugins:service 5739
> [ZX1G22J8HF] Launching service
> 2016-10-17T06:55:23.998881450Z INF/device:plugins:service 5739
> [ZX1G22J8HF] Agent says: "Listening on @stfagent"
> 2016-10-17T06:55:24.001096767Z INF/device:plugins:service 5739
> [ZX1G22J8HF] Agent says: "InputClient started"
> 2016-10-17T06:55:24.084424046Z INF/device:plugins:display 5750
> [0d893faa43e4b116] Reading display info
> 2016-10-17T06:55:24.101199955Z INF/device:plugins:phone 5750
> [0d893faa43e4b116] Fetching phone info
> 2016-10-17T06:55:24.108561741Z INF/device:plugins:identity 5750
> [0d893faa43e4b116] Solving identity
> 2016-10-17T06:55:24.109473909Z INF/device:plugins:solo 5750
> [0d893faa43e4b116] Subscribing to permanent channel
> "DN15WvUZyQjEfWSmB188VWBCI0I="
> 2016-10-17T06:55:24.111200014Z INF/device:plugins:screen:stream 5750
> [0d893faa43e4b116] Starting WebSocket server on port 7456
> 2016-10-17T06:55:24.188904670Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] Touch origin is top left
> 2016-10-17T06:55:24.190589170Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] Requesting touch consumer to start
> 2016-10-17T06:55:24.192038696Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] Launching screen service
> 2016-10-17T06:55:24.199152600Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] Connecting to minitouch service
> 2016-10-17T06:55:24.235994604Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] minitouch says: "Type B touch device touch_dev
> (1079x1919 with 10 contacts) detected on /dev/input/event1 (score 1100)"
> 2016-10-17T06:55:24.309265392Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] minitouch says: "Connection established"
> 2016-10-17T06:55:24.310559645Z INF/device:plugins:touch 5750
> [0d893faa43e4b116] Reading minitouch banner
> 2016-10-17T06:55:24.369191998Z INF/device:plugins:vnc 5750
> [0d893faa43e4b116] Starting VNC server on port 7458
> 2016-10-17T06:55:24.374782849Z INF/device:plugins:browser 5750
> [0d893faa43e4b116] Loading browser list
> 2016-10-17T06:55:24.381753547Z INF/device:plugins:browser 5750
> [0d893faa43e4b116] Updating browser list
> 2016-10-17T06:55:24.387175641Z INF/device:plugins:mute 5750
> [0d893faa43e4b116] Will not mute master volume during use
> 2016-10-17T06:55:24.501265778Z INF/device:plugins:forward 5750
> [0d893faa43e4b116] Launching reverse port forwarding service
> 2016-10-17T06:55:24.508736390Z INF/device:plugins:forward 5750
> [0d893faa43e4b116] Connecting to reverse port forwarding service
> 2016-10-17T06:55:24.516354458Z INF/device:plugins:display 5738
> [LGF180Ld952c130] Reading display info
> 2016-10-17T06:55:24.558653054Z INF/device:plugins:service 5774
> [0d88b43e25995b5a] Agent says: "Listening on @stfagent"
> 2016-10-17T06:55:24.598237607Z INF/device:plugins:phone 5738
> [LGF180Ld952c130] Fetching phone info
> 2016-10-17T06:55:24.610036000Z INF/device:plugins:identity 5738
> [LGF180Ld952c130] Solving identity
> 2016-10-17T06:55:24.610582875Z INF/device:plugins:service 5774
> [0d88b43e25995b5a] Launching service
> 2016-10-17T06:55:24.612854984Z INF/device:plugins:solo 5738
> [LGF180Ld952c130] Subscribing to permanent channel
> "pkQkU4Ion94E7Za4M2L4Gd71GJI="
> 2016-10-17T06:55:24.613848270Z INF/device:plugins:service 5774
> [0d88b43e25995b5a] Agent says: "InputClient started"
> 2016-10-17T06:55:24.617907465Z INF/device:plugins:screen:stream 5738
> [LGF180Ld952c130] Starting WebSocket server on port 7476
> 2016-10-17T06:55:24.718292012Z WRN/device:plugins:data 5738
> [LGF180Ld952c130] Unable to find device data { serial: 'LGF180Ld952c130',
> 2016-10-17T06:55:24.718320797Z platform
  I'm pretty sure the Java method only works the app that code is included in.
 Btw what device is it?

On Wednesday, 26 October 2016, shengxiang notifications@github.com wrote:

> I write a program which use screencap can reach 1~2 fps. Maybe totally
> write in C will up to 4~7 fps
> 
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/444#issuecomment-256228505, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_acNtARtUETp1rBTmW9tY_O7Wjuvks5q3rJFgaJpZM4KXDA1
> .
 [here](https://www.npmjs.com/package/minicap-prebuilt)
  It's stable enough as it is right now, let's wait if someone picks it up and it becomes a community project.
 If no one does, then we might reconsider at some point in the future.
 RethinkDB has now been purchased, relicensed to Apache 2.0, and donated to the community. This 99% ensures that someone will pick it up again.

https://www.joyent.com/blog/the-liberation-of-rethinkdb  Now that the [Pixel phone](https://madeby.google.com/phone/) has been released, we should verify that it works with STF.

Unfortunately, it's unclear when orders will open in Japan where we're located, in the past it has taken quite a while, even months. Even if you try to purchase using VPN from the US store, it won't let you select a non-US payment method. Although likely possible with enough time and effort, it's not worth it to attempt to work around all the restrictions.

In short, it's unclear if we'll actually have a device before real users do.

On the off chance that someone wants to donate one of these devices (w/ any specs), please feel free to offer.
 I think you're using an old version. Be sure to use STF 2.1.0 or newer. Would be great to hear if it works!
 Great! One more thing, do you see the following message in the log output?

> Found 7.1 Developer Preview SurfaceComposerClient::setDisplaySurface

Should be grouped under screen or minicap.
 Thanks, awesome info! Means that unlike the 7.1 Developer Preview build, they're actually using the AOSP source they published.
  Interesting question. I think at around $50-60 there may be quite a few models, but $30 seems a bit low. Perhaps a used device in fairly poor condition?
 Since the question was interesting and obviously low cost to try, I found an [iPro Wave 3.5](http://www.ipromobile.hk/index.php?ac=article&at=read&did=904) that sold for $32.39 when I bought it on [Aliexpress](https://www.aliexpress.com/item/New-Hot-Sale-Original-Ipro-Phones-i9355-MTK6571-Smartphone-Dual-Core-3-5-Inch-Dual-Cameras/32651879143.html). Shipping is free but can take a random amount of time, mine was quite fast, a week or so. That exact listing seems to be a few dollars more expensive now, but if you look at the store's other items, you can find it for a few dollars less too (they have multiple listings for the same phone).

I can confirm that the Wave is actually fairly good. It runs what looks like an unmodified Android 4.4.2, and is honestly surprisingly smooth even in the STF UI. Comes with the Play Store, too. The box and everything is in English, doesn't seem to be aimed at the Chinese market. Now obviously it does look somewhat cheap, but perhaps $50 cheap, not $32. So higher than expected value there as well.

The only downside is that the USB serial number is uninitialized (it's `0123456789ABCDEF`). Therefore you'd currently only be able to connect one of them to STF.

And Android 4.4 is getting pretty old, so there's that too. It's super unlikely that there will ever be any updates for this model.

Overall, very good value for $32. Seems like iPro makes decent, cheap devices if you want to try another model (just keep the serial number issue in mind).
 It runs a MediaTek processor, and there seem to be some programs like SN Write Tool that _may_ allow you to do that. It's Windows only so I haven't tested it. Alternatively if you can manage to root the phone, it's possible.
  I don't think you understand how the API works... you login once and create
an API token in the UI. You can then use the API methods with that token
(i.e. as that user). You definitely do NOT send anything to the login
endpoint.

On Tuesday, 4 October 2016, Black Eagle Coder notifications@github.com
wrote:

> this is not usefull API, thank you so much
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/439#issuecomment-251353051, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_Tt0M0LCvpLRg_lqGGSXIM5OAcInks5qwitigaJpZM4KNceH
> .
  Hi Sorccu,

Please open a new branch and add logout button, i cannot develop it because of websocket or you can write code piece for logout function and i can add my project ?
 That's not how open source works... I don't work for you. You can make a feature request and **maybe** someone will look into it at some point _if and when they want_.
 Yes, you are right Sorccu but i said **please**. 
 @cemakkok You should feel free to open issues, but you shouldn't ask someone in particular since that is just asking to work for free. Someone else might want to implement it also.

Since this is open source, everyone works on their spare free time and the issues they care most first. 

If you really need it ASAP you can try posting a bounty [here](https://www.bountysource.com/issues/38007749-logout-branch) and someone might give it a chance. 
  Moved from #407:

```
INF/device:plugins:touch 14966 [c806b880] Touch origin is top left
INF/device:plugins:touch 14966 [c806b880] Requesting touch consumer to start
INF/device:plugins:touch 14966 [c806b880] Launching screen service
INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service
INF/device:plugins:touch 14966 [c806b880] minitouch says: "/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied"
WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly
INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service
INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service
INF/device:plugins:touch 14966 [c806b880] Launching screen service
INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service
INF/device:plugins:touch 14966 [c806b880] minitouch says: "/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied"
WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly
INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service
INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service
INF/device:plugins:touch 14966 [c806b880] Launching screen service
INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service
INF/device:plugins:touch 14966 [c806b880] minitouch says: "/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied"
INF/device:support:push 14990 [LE67A06180224872] Sending output to "tcp://10.241.54.16:7270"
INF/device 14990 [LE67A06180224872] Preparing device
WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly
INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service
INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service
INF/device:plugins:touch 14966 [c806b880] Launching screen service
INF/device:plugins:touch 14966 [c806b880] Connecting to minitouch service
INF/device:plugins:touch 14966 [c806b880] minitouch says: "/system/bin/sh: /data/local/tmp/minitouch: can't execute: Permission denied"
WRN/device:plugins:touch 14966 [c806b880] Shell keeping minitouch running ended unexpectedly
INF/device:plugins:touch 14966 [c806b880] Disconnecting from minitouch service
WRN/device:plugins:touch 14966 [c806b880] Will not apply desired state due to too many failures
INF/device:plugins:touch 14966 [c806b880] Stopping minitouch service
FTL/device 14966 [c806b880] Setup had an error Error: Failed more than 3 times in 10000ms
    at TouchConsumer._failLimitExceeded (/app/lib/units/device/plugins/touch/index.js:230:26)
    at FailCounter.emit (/app/node_modules/eventemitter3/index.js:117:35)
    at FailCounter.inc (/app/lib/util/failcounter.js:29:10)
    at TouchConsumer._outputEnded (/app/lib/units/device/plugins/touch/index.js:223:24)
    at RiskyStream.emit (/app/node_modules/eventemitter3/index.js:115:35)
    at RiskyStream.<anonymous> (/app/lib/util/riskystream.js:14:12)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:185:7)
    at endReadableNT (_stream_readable.js:973:12)
    at _combinedTickCallback (internal/process/next_tick.js:74:11)
From previous event:
    at startConsumer (/app/lib/units/device/plugins/touch/index.js:511:14)
    at /app/lib/units/device/plugins/touch/index.js:526:12
    at SerialSyrup.ParallelSyrup.invoke (/app/node_modules/stf-syrup/lib/parallel.js:54:24)
    at /app/node_modules/stf-syrup/lib/serial.js:43:33
    at _combinedTickCallback (internal/process/next_tick.js:67:7)
    at process._tickCallback (internal/process/next_tick.js:98:9)
FTL/util:lifecycle 14966 [c806b880] Shutting down due to fatal error
INF/provider 1 [*] Cleaning up device worker "c806b880"
ERR/provider 1 [*] Device worker "c806b880" died with code 1
```
 I actually happen to have a ZUK Z1 and can confirm that this issue happens. It seems like the system does not allow files in `/data/local/tmp` to be executable, making it potentially impossible to place binaries there.

```
shell@k9:/data/local/tmp $ touch a
shell@k9:/data/local/tmp $ ls -Z a
-rw-rw-rw- shell    shell             u:object_r:shell_data_file:s0 a
shell@k9:/data/local/tmp $ chmod 0777 a
shell@k9:/data/local/tmp $ ls -Z a
-rw-rw-rw- shell    shell             u:object_r:shell_data_file:s0 a
```

If so, not sure if there's an easy fix.
 Yeah that's one option. So do you have a rooted device or did you use the `app_process` trick?
 Yeah, that's the one.
 I'm working on a workaround for this but no promises on when it'll be ready. Hmm that's a good idea, I had been thinking about installing a separate app for that (or possibly reusing STFService but it may possibly not have worked due to dependency ordering, not 100% sure). I can verify that the change does work on my Z1. This is now fixed in master. It tries to install to `/data/local/tmp` first, but if the installed file doesn't have the executable bits after installation, it uses `/data/data/com.android.shell` instead. Works on my Z1.  PRs are accepted.

Otherwise, probably never since it would mean a completely rewrite, and if we get time to make a full rewrite we might choose a different library.
  You're using an old version of STF. You MUST have v2.0.1 or higher.

On Tuesday, 27 September 2016, 0x88l notifications@github.com wrote:

> step:
> 1.connect an android 7.0
> 2.restart stf
> 3.the devices can't be recognized
> devices list:
> 012e8e2764d6bccc device product:bullhead model:Nexus_5X device:bullhead
> 
> this is the err log:
> [image: image]
> https://cloud.githubusercontent.com/assets/18346467/18857874/118e0a86-849a-11e6-8864-f178c55bacba.png
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/434, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_Wv6HYYkI5gDQ_JBdvpWOFz0_Qw0ks5quHsrgaJpZM4KHL1V
> .
 I believe this issue was fixed by updating your STF :)
  <!---

IF YOU REMOVE THIS TEMPLATE WE WILL CLOSE YOUR ISSUE WITHOUT RESPONSE.
Just read it. See the commonly asked questions and fill in the details we're asking, it saves so much of our time.

Hi there!

Please be sure to run `stf doctor` before submitting an issue. Please include screenshots, command output and log files if any.

=== SUPER COMMON QUESTIONS ===

Q. I'm having issues when multiple devices are connected.
A. Usually caused by insufficient USB power supply or other hardware issue we can't do anything about.

Q. Can I connect a device to STF over WIFI?
A. Yes, with the `--allow-remote` option. However, ADB over WIFI can easily be 10x slower than USB, so don't expect too much.

Q. How do I connect to my local STF from another computer?
A. Try the `--public-ip` option or do a full deployment. See DEPLOYMENT.md in the doc folder.

Q. Can I run STF on multiple machines?
A. Yes, if you do a full deployment. See DEPLOYMENT.md in the doc folder.
-->
## What's the problem (or question)?

Hi, i have changed some .js file and restart the OpenSTF, i cannot show any difference. What can i do to show it ?
## What should have happened?

<!--- If you're describing a bug, tell us what should happen -->

<!--- If you're suggesting a change/improvement, tell us how it should work -->
## Do you have an idea for a solution?

<!--- Not obligatory, but suggest a fix/reason for the bug, -->

<!--- or ideas how to implement the addition or change -->
## How can we reproduce the issue?

<!--- Provide unambiguous set of steps to reproduce this bug. Include code to reproduce, if relevant -->

1.
2.
3.
4.
## Help us understand your issue by providing context.

<!--- How has this issue affected you? What are you trying to accomplish? -->

<!--- Providing context helps us come up with a solution that is most useful in the real world -->
## Please tell us details about your environment.

<!--- Include as many relevant details about the environment you experienced the bug in -->
- Are you using `stf local` or a [full deployment](doc/DEPLOYMENT.md): 
- Version used (git hash or `stf -V`): 
- Environment name and version (e.g. Chrome 39, node.js 5.4): 
- Operating System and version: 
- If there was a problem with a specific device, run `adb devices -l` and paste the relevant row here: 
 When you install STF from git for the first time, `npm install` runs a script that builds a static copy of the resources. You can run `gulp clean` to get rid of them (or `./node_modules/.bin/gulp clean` if you don't feel like installing gulp for that).
 It will work unless you need a new native dependency.

On Tue, Aug 22, 2017 at 20:09 RAHUL RAJ CHAKRAVORTY <
notifications@github.com> wrote:

> hi,
> I want to know that if I want to customize a page in STF and then after
> customization if I build my own image and push it on dockerhub, and then
> pull it while deploying it to real server, the docker file that you
> provided will do work for building that image or I have to modify something
> in the docker file?
>
> Thanks in advance!
>
> —
> You are receiving this because you commented.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/433#issuecomment-323994616>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_eOITfILhkdHqJf0LzHgadbmyWcwks5sarbYgaJpZM4KGYmE>
> .
>
  I think this should be fixed in master already.

On Monday, 26 September 2016, 0x88l notifications@github.com wrote:

> There is a bug with android 6.0. Maybe it happened in adbkey-logcat.
> device:
> 1. huawei PLK-TL01H product:QK1503_A01 model:1503_A01 device:QK1503_A01
> 2. 360:product:QK1503_A01 model:1503_A01 device:QK1503_A01
> 
> step:
> 1.click one fo android 6.0 device to control
> 2.click the get logcat
> 
> result:
> [image: image]
> https://cloud.githubusercontent.com/assets/18346467/18831383/eaf13a1a-8417-11e6-8f81-f5cb8a5bf531.png
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/432, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_drS2Rcbt3ARwbnaUd11N2T_C2x0ks5qt6HIgaJpZM4KGYMv
> .
 This should be fixed in the latest versions (I think 2.1.0). Please open a new ticket if not.
  Yeah, I've been wanting to rewrite the provider for quite some time now. Thanks for the PR!
  Not sure about 1 and 2, my guess would be no/difficult due to restrictive android permissions. As for 3, see https://github.com/openstf/STFService.apk. 
  Thanks for the report and log output.

I can't find a place to buy a G730-U00, so I'd say the chances of this issue getting looked into are very slim. However, perhaps fixing some other Huawei device that's easier to buy would fix this one as well.
 Let's keep this issue open so that it's easier to find if someone else searches for it.
 I have an idea that will probably make most devices work. But no time to do it right now.
 I'm not 100% decided if I would want to open source that method or not yet.

Perhaps you could try `screenrecord -o raw-frames`.
 Perhaps it is similar, I have not looked at Vysor's source code. But we are aware of Vysor, yes.
 @jonqchk I can see from your log that your device was running Android 4.2. We've just pushed a fix for many 4.2 devices in STF 2.3.0. Please try it and report back if it works.
  It has been discussed here. https://github.com/openstf/stf/issues/170
 Reason why STF does not allow 2 users to have same adb keys is because STF uses adb keys to identify user in remote connect. So, one adb key can only belong to one unique user.

Is there any specific reason for using two different tokens for automated tests on same machine? Can't this be done with same user token?
 This is the way it works. The key must be unique for each user, since `adb connect` doesn't send any other identifying information. If two users had the same key, we would not be able to figure out which one is trying to connect.
 One possible work around is to store adbkeys of various teams on docker-machine and use data volume option (`-v`) while `docker run`. By this you will not have to create different docker images for different team just because of adbkey.
  It is working fine on my system. Could you provide your provider's systemd unit file and logs when device get disconnected due to timeout.
 ```
nohup stf provider --name --connect-sub tcp://:7250 --connect-push tcp://:7270 --storage-url http://cloud.qaprosoft.com --public-ip --group-timeout 3600 --no-cleanup &
```

Is this exactly the same command which you ran? Because you missed some options such as `--name` & `--public-ip`

Try something like below:

```
stf provider --name SOME_PROVIDER_NAME --connect-sub tcp://:7250 --connect-push tcp://:7270 --storage-url http://cloud.qaprosoft.com --public-ip CURRENT_MACHINE_IP --group-timeout 3600 --no-cleanup &
```
 that is because `<>` is syntax for comments in markdown.

Anyways, this is really weird why this is happening in your setup. I just checked again and wrote logs as you mentioned. It is working just fine.
  USB hubs without power are useless since the devices will get discharged fast. You'll not be able to use the devices more than what the charge lasts, which is usually less than 1 day.

If you care about batteries dying after 2 years, the only real solution is to not use batteries at all.

Instead you can use electrical power from an external source to the internal battery connection pads with wires. That's going to be a DIY job and you need care to ensure correct voltages and polarity.

Also, some devices work without having a removable battery connected, just the USB power, so you might try this first.
 I think that's the downside of device labs and you can't really do much
about it, short of bypassing the battery at least. I'd say 2 years is a
fairly good run, though. I've heard of cases where they have to change
batteries every few months, but that wasn't with STF - they were using
something else. Our devices lasted for about two years too, now after 2.5-3
years I hear that about half are experiencing similar issues (haven't seen
the situation by myself, though).

If you go with regular hubs you're going to have huge stability issues.
That's the tradeoff. Some devices may be so unstable that you wouldn't even
be able to use them for a few minutes, let alone two years.

On Thursday, 15 September 2016, ericzered notifications@github.com wrote:

> Thanks for the fast answer,
> I've tried to plug my android without battery and they didn't want to
> start...
> Last year I've plugged a Nexus 6 on my hub and 10 month after the battery
> looks like it will explose.. Same for my Galaxy Note 3, a Huawei, a Galaxy
> Tab 4, ect...
> So it's more about security (I'm afraid that a phone will start a fire)
> that care about batteries.
> I will try fex days with 4 x 4 ports hub to see if it can deal with
> charge...
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/426#issuecomment-247331602, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_ez1EbGSKlF62GT-8MpLj3BfNuulks5qqUuMgaJpZM4J92dr
> .
 Yes, removing the battery and replacing it with a static power supply is a good method, but labor intensive and quite a bit of knowledge is required to make sure you don't fry your device. Plus some devices are difficult to open, as they don't have replaceable batteries. In any case I've seen a working example of that.
 Personally I'm thinking an occasional "battery conditioning" might help. For example, you could cut off the device for a day or two once a month or so, until it has <20% or <10% battery left, and then reconnect. It may prevent the issue from happening, but obviously testing would be required.
 There is no solution, however you can significantly reduce future issues by introducing airflow. Buy a few fans (USB powered are fine) and make sure they're blasting directly at the back side of the devices. It’s a small investment. Why not try it out? I don’t have any “proof,” however I can say from personal experience that after applying constant airflow to a set of devices (a few of which had already started to expand), not a single new device went bad and the ones that had swollen already did not get any worse. It’s been running pretty much unchanged for over a year since airflow was added.  You can try with the [STF API](https://github.com/openstf/stf/blob/master/doc/API.md).
We also have a sample using appium here: https://github.com/openstf/stf-appium-example
  Some of our dependencies use it and we have no choice but to wait for them to catch up.
 We've changed to pug as far as STF is concerned. Some child dependencies may still use jade, but we don't.

If you want to know what are the breaking changes look here: https://github.com/pugjs/pug/issues/2305
  Use the `--group-timeout` parameter to choose a longer timeout. STF extends the timeout every time there's a user action (e.g. when the user touches the screen, or in this case, whenever something is written to the device you're `adb connect`ing to). You haven't told us anything about what, and how, you're  testing, but if you simply launch something and wait for it to finish, it's likely that STF doesn't see any "user activity" on the socket and considers the usage session ended. Either increase the timeout or make sure you're doing something every now and then.
 you can also set `--group-timeout` per device while reserving a device. Some thing like below:

``` js
var device = {serial: 'yyyy', timeout: 900000 }

clientWithPromise.then(function(api) {
  return api.user.addUserDevice({device: device})
    .then(function(res) {
      console.log(res.obj)
      // { success: true, description: 'Device successfully added' }
    })
})
.catch(function(err) {
  console.log(err)
})
```
  It would help if you pasted the error (or a screenshot of it) here, and let
us know exactly what changes you made.

On Wednesday, 7 September 2016, Darshan notifications@github.com wrote:

> I need to add some modules to extend the UI features in stf, how to add
> the modules,
> So that i should not get any dependency injection module error.
> 
> Please help me out in this.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/421, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_SfCVHbF-QXu24Diz2jY7BpjrmK5ks5qnrZVgaJpZM4J25Rk
> .
  Remove the entire node_modules folder and run npm install again.

On Wednesday, 7 September 2016, fanyuRN notifications@github.com wrote:

> I meet a problem, and I red #250
> https://github.com/openstf/stf/issues/250;but it seem to no effect;I
> have tried npm rebuild zmq;
> [image: 9a0b8add-fba8-4bbd-90b0-678d11addee7]
> https://cloud.githubusercontent.com/assets/20810414/18308165/f80309dc-7525-11e6-88b5-a721283fe117.png
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/420, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_VII4GDK4sV_ndvyRBr_CqnGhP9Oks5qnozzgaJpZM4J2wIP
> .
 Ok, maybe it's easier if you do `npm uninstall -g stf` followed by `npm install -g stf`if you've installed it globally.
 Not sure, your installation is fucked up. I would really recommend using
NVM to install node instead of using your distro's package manager.

On Sun, Jun 11, 2017 at 22:21 何明阳 <notifications@github.com> wrote:

> @sorccu <https://github.com/sorccu> look this,how to solve
> [image: qq 20170611211931]
> <https://user-images.githubusercontent.com/11188841/27011328-baf11fca-4eeb-11e7-8a16-c7110b831260.png>
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/420#issuecomment-307628776>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_T3LeP-dM2YIGSgzuFIxkdM41eSFks5sC-npgaJpZM4J2wIP>
> .
>
  Hi,

Can i add new users with basic authorization groups in OpenSTF console ? 
For example someone can test on some devices, another group can test on all devices. 
 No, not right now, but perhaps in the future.

On Wednesday, 7 September 2016, Cem AKKÖK notifications@github.com wrote:

> Hi,
> 
> Can i add new users with basic authorization groups in OpenSTF console ?
> For example someone can test on some devices, another group can test on
> all devices.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/419, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_RUxBC_3kASEUtlVeZIlvGnyE3xHks5qnmZggaJpZM4J2nKC
> .
  You can use the --group-timeout parameter or perhaps the --no-cleanup
parameter.

On Tuesday, 6 September 2016, Martin Woit notifications@github.com wrote:

> What's the problem (or question)?
> 
> Hi,
> First: Thanks for this wonderful tool! You did a great job!!
> 
> While using STF one question appeared very often: Is it possible to
> increase the timeout of a device stay connected to a user? After some time
> of inactivity the user will be removed from the device and the session will
> be cleared. This means the app under test with all its data is also gone
> and has to be installed again. Sometimes this is very painful.
> What should have happened?
> 
> Let the device stay longer occupied by a user.
> Do you have an idea for a solution?
> 
> Add a parameter while starting stf, e.g. --session-timeout 120 #min
> How can we reproduce the issue?
> 
> 1.
> 2.
> 3.
> 4.
> Help us understand your issue by providing context. Please tell us
> details about your environment.
> - we are using stf local
> - Version used (git hash or stf -V): 1.1.1
> - Environment name and version: Chrome 52.0.2743.116 (64-bit), node
>   v4.2.6
> - Operating System and version: Ubuntu 16.04.1
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/418, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_YAWn-zA2NvCrVOUqt17cpU1kvZsks5qnTeVgaJpZM4J1qH4
> .
  ADB on OS X is very unreliable. I would recommend deploying STF on Linux if
possible.

On Thursday, 8 September 2016, Helder Sousa notifications@github.com
wrote:

> I have the same problem i can't find the reason for this to happen, i
> think the problem can be associated to hubs.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/417#issuecomment-245592427, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_XBeCpE_lToWQj2ewOPsx7GXfWimks5qoAm5gaJpZM4J1l9R
> .
  It means that something was already listening on that port. Perhaps you ran `adb devices` on that machine at some point? Run `adb kill-server` and try again.

Pulling the image before running it ensures that you're always running the latest code with the latest improvements. It's just how our sample images currently are, you can modify them if you don't like that.
 All I can say is that the deployment docs work, I've used them several times. Check what rethinkdb complains about by running `systemctl status rethinkdb`.

The adb docker image is configured to use host networking, so other programs would still be able to use it just like before. If you don't need it, if you have to modify the provider unit to not require the adbd service.
 And how did you start the adbd container?

On Thursday, 20 October 2016, slakshmiumesh1 notifications@github.com
wrote:

> docker run --rm -ti --net container:adbd sorccu/adb adb devices
> 
> when I run this command I didn't see the devices attached.
> 
> docker@boot2docker:~$ docker run --rm -ti --net container:adbd sorccu/adb
> adb devices
> List of devices attached
> 
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/415#issuecomment-255068128, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_cJ7T5VI_evP7ONYX-HFzjb0lBrDks5q10ESgaJpZM4J06f2
> .
 Also, if you are using boot2docker, you will have to mount your host OS's USB devices to boot2docker VM otherwise you will not see anything.
  It says what the error is, you already have something running on port 7100.
  Guys, can you share your experience under my post, i need help.

https://github.com/openstf/stf/issues/493  Just stop wasting your time and go with the docker deployment. It's definitely possible to run the commands by yourself without docker, but it would be extremely time consuming to help you with that, so we will not. You can try to take a look at the deployment guide and steal/modify the commands from there.  Basically we did hard work, using private APIs.

So nothing in STF requires root permissions.

If you want to know more details about the implementation, please check our following presentation: 
https://www.youtube.com/watch?v=7FBvRiCdRgs

If you want custom consultation services, you can contact us at contact@openstf.io
  You can run test with any Appium client library using STF API. Check this [sample example](https://github.com/openstf/stf-appium-example) which uses Ruby Client library. You do not need to add any extra STF specific capability. Just assume that you are running test on device connected to your local machine.
  Which model is it? Can you just run `adb devices -l` and paste the model, product and name here?

Also, I've seen this once before. Turns out that there was some sort of an antivirus app running on the device, and for some reason it didn't like STFService, so it prevented the service from being started. Uninstalling the antivirus apps made it work again. It was one of `CMSecurity.apk` or `DrBooster.apk`.
 Here's how you can check. Do not have STF running while you do this.

In one shell, run:

``` sh
adb logcat -s 'ActivityManager:*'
```

Now, in another shell, attempt to start the service manually:

``` sh
adb shell am startservice --user 0 -a jp.co.cyberagent.stf.ACTION_START -n jp.co.cyberagent.stf/.Service
```

Watch the log and perhaps you'll see something like this:

```
W/ActivityManager(  854):  App Op not allow to start app jp.co.cyberagent.stf/10123
```

If you see that or something like that, it's one of the antivirus programs getting in the way.

And this is how the offending applications were removed:

``` sh
adb uninstall com.trendmicro.dr.booster
adb uninstall com.cleanmaster.security
```

For good measure, perhaps uninstall STFService once too:

``` sh
adb uninstall jp.co.cyberagent.stf
```

Now if you unplug the device once and plug it back in, STF should be able to reinstall the service and launch it.
 Not sure, possibly because the app doesn't have a launcher activity it looks suspicious. Or perhaps because of the private APIs.
 Thanks for the useful log. Based on the somewhat poor english in the log output it seems like there's still some kind of an antivirus or blocker running. Would be very interesting to know which app it ends up being. You can try something like `adb shell pm list packages -3` to show all 3rd party packages in the system.
 I want to see it myself and hopefully fix it. I've ordered that phone from Aliexpress. Will probably arrive by the end of the month.
 Well it's possible it's a system package as well. Perhaps try to take out
the -3 flag and see if there's anything there?

It'll be at least a month before I can do anything about this myself.

On Wednesday, 31 August 2016, xiaweixing notifications@github.com wrote:

> test@ubuntu:~$ adb -s LE67A06180224872 shell pm list package -3
> package:jp.co.cyberagent.stf
> package:io.appium.settings
> package:com.letv.bbs
> package:com.futurestar.mkmyle
> package:com.wochacha
> package:com.snda.wifilocating
> package:com.linksure.wifimaster
> package:com.snda.wifisocial
> package:com.baidu.BaiduMap
> package:com.example.test
> package:io.appium.android.ime
> package:com.lantern.test
> package:com.sina.weibo
> package:lbs.cmri.cmcc.com
> package:org.dsjzj.mytracks
> package:io.appium.unlock
> package:cn.wps.moffice_eng
> test@ubuntu:~$
> 
> I am thinking, is it possible that some ROMs themselves have some kind of
> restrictions?
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/407#issuecomment-243637916, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_cqcxJpHUySdMk-otT3O8lBHM-W4ks5qlOH5gaJpZM4JqgwC
> .
 I've just updated STFService.apk for an unrelated reason - I'm curious if you're seeing any change with this issue? Can you update your STF and try again? Use master or the :latest docker tag.
 I have now received the Le_X620 and I can confirm that it has that issue. However I seem to have found the cause.

At least for Le_X620, it does NOT have anything to do with an antivirus. It seems that trying to launch a service while the app is not running already counts as an "Auto Launch" and the system prevents that by default. I tried with a brand new application with an empty service and got the same result.

What you have to do is:
1. Add the device to STF and let it install the service application. It's OK if it starts failing.
2. Go to `Settings` on the device.
3. Look for `Permissions` under `Personal`.
4. Choose "You have allowed X apps to auto launch".
5. Toggle STFService ON.
6. You're done, the device now works with STF.

Here's a gif of how to do it:

![le_x620](https://cloud.githubusercontent.com/assets/32509/18616701/72d94094-7dfb-11e6-875c-f4ebdf0e61da.gif)
 One issue per device please. Closing this one, created a new one for ZUK Z1.
  Use the `--no-cleanup` option when starting STF.
 Your STF is too old, then.
  I think that device probably doesn't work.
 Probably the same issue as #366.
 Like I said, that device doesn't work. Same issue happens on some other low-end Samsung devices as well.
 No need to close the issue, it's useful as a reminder. But for now I'm not sure if we can do anything about it.
 Both should be fixed in STF 2.2.0 :)
  Duplicate of  https://github.com/openstf/minitouch/issues/5
  There's a link in the README. The minicap repo has full instructions.
  There is no such feature right now.
  gulp v4 is not released yet. Any specific reason to use unreleased version? Also, what are the errors?
 Run `./node_modules/.bin/gulp` instead of your global gulp. So, e.g. `./node_modules/.bin/gulp clean` would be equivalent to `gulp clean`.
  > I triggered an execution using appium and opened the STF dashboard which shown a Devices page. I clicked on the device where the execution is happening, because I was expecting it will show me the execution. But the moment I clicked on it, it released the device from me causing the automation failure.

I don't think it is releasing device until you are clicking "Stop Using" button. 

To view the execution,
-> Go to device list
-> Click device control url from "Product" column as shown in this demo video, https://github.com/openstf/stf-appium-example/blob/master/doc/demo.gif
 Also you must be logged in from same user whose access token you are using.
 @email2vimalraj are you looking to even prevent touches to the screen?

By the way if you press `SHIFT + CLICK` when using a device you can see only the view, is this something similar to what you want?
  If you're on Linux, it would be very easy to just use the docker image
which has all the necessary deps.

On Monday, 8 August 2016, yuqlabson notifications@github.com wrote:

> @tadesushilgithub https://github.com/tadesushilgithub command brew in
> CentOS does not work!
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/393#issuecomment-238130834, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_dXUI7B0xwk2Fx9SyUkaBGUDJZm6ks5qdpllgaJpZM4JdgNY
> .
  Why does everyone want to do that now? This has been asked at least 5 times in the past week.

It's possible to do it and in fact it's quite easily exposed in one of our dependencies. A little bit of grepping will easily find it.

I can give advice if you're looking to improve STF or fix a bug, however since it sounds like you just want to rip one feature off, I'd prefer if you at least did the grepping yourself since we've done all the work for you already. Correct me if I'm wrong, though.
  It's our own custom made design, designed by yours truly + @gunta. The rails (shelves) are not actually powered, there are USB hubs velcroed to the back side. The front side is velcro as well, although we've heard that 3M DualLock would be better. Works well either way.

I'm not sure when we'll have the time to clean up the drawings... this is actually a duplicate of the legendary issue #1.

Maybe we could arrange something if you're super interested. Let me know if so.
 The design allows the shelves to be rotated to any angle (within reason), and it can even be taken off entirely just by picking it up. The weight of the shelf is enough to keep the angle once set.
  Not really, Nexus 7 should work fine.

On Saturday, 6 August 2016, haihaoshen notifications@github.com wrote:

> any idea? thanks.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/390#issuecomment-238014821, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_aMdc5lyZLLprAwYyOP4JMmHFmVBks5qdFPOgaJpZM4JboVI
> .
  Basically your requirement is to release all user devices once he leaves STF.

I don't think your current idea of logout will serve your requirements as deleting session from browser will not change device owner in STF's database. So, if you want to release all devices from a user you will have to implement a new websocket message something like [this](https://github.com/openstf/stf/blob/master/lib/units/websocket/index.js#L188-L199) which will tell backend to update devices ownership.

Once you are done with this implementation, you can add a new button something like "Stop Using All" in device list which will call above implemented message.

Anyways, currently STF releases all the device which are not being used for `--group-timeout` time which is `15 mins` by default. So, even if a user forget to release device before leaving STF, that device will be released after 15 mins.
  It’s not functional. Don’t use it.  Hi, yes we want to provide deeper integration like you describe.
Since most of the work can be done by using STF (instead of inside STF), a new repository would be expected for this integration. 
We are having time constraints right now, so any contribution would be very appreciated.
 Since the current API exposes an ADB device, you can use or build any other
tool that requires an ADB connection. That new tool doesn't necessarily
have to be directly in the STF repository, STF just provides access to the
device. Depends on the use case, though.

On Tuesday, 2 August 2016, Benjamin Gericke notifications@github.com
wrote:

> Hey, thanks for the quick answer.
> What du you exactly mean by "new repository would be expected"?
> Like some kind of "new project" which is afterwards used by STF?
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/387#issuecomment-236878176, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_ci2gHUthGiBML91tzpwDedEPQ15ks5qbysrgaJpZM4Jac4V
> .
 Mostly yes, but this will depend on how much changes need to be made in the current STF code.

Since we currently don't know, but we want to make this work in an easy and straightforward way, I've created a new repository [here](https://github.com/openstf/stf-appium). 

Let's keep the discussion [there](https://github.com/openstf/stf-appium/issues/1) 
and any possible prototype for making this automation possible.
 As a reference, in the past before developing STF we tried to use Selenium Grid as a backend but we had to drop it out because we found it to be unreliable. So we are not fans of Selenium Grid.

You might want also to try the [Jenkins plugin](https://wiki.jenkins-ci.org/display/JENKINS/Open+STF+Plugin). 

Other than that, if you're able to make it work, we would love to check it.
  No you cannot right now. There are several issues about the same thing already, closing this one as duplicate.
  Thanks!
  Perhaps you could use the notes column in the detailed view. Double click the value (empty by default) and you should be able to enter a note for each device.
 Also, if the devices go offline often, but you only have 20 devices, then it's probably a hardware issue.
 What do you mean by device name? What is the value you want to see?
 Interesting problem, but it looks like it isn't a standard Android feature, and therefore there's no API to access the user-specified device name. Some have had success accessing the bluetooth adapter's device name.
 I think one way you could do it would be to use Contacts, and look up the device owner's profile or a specific contact. You could then use the contact fields to store information.

Alternatively if you're OK with building your own app, you could just store it in a local file, database or wherever.
  No, You cannot do this right now.
  It's in adbkit, one of our dependencies.

On Friday, 29 July 2016, likezjuisee notifications@github.com wrote:

> Use adb connect to connect to a remote device as if it was plugged in to
> your computer, regardless of ADB mode and whether you're connected to the
> same network
> Run any adb command locally, including shell access
> Android Studio and other IDE support, debug your app while watching the
> device screen on your browser
> Supports Chrome remote debug tools
> 
> If I want to learn this function, so could you tell me where is the
> relative code in the project? Thx.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/381, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_RENCFy7vHJqN1I1wSksVn0hX6Ayks5qaZWIgaJpZM4JX5YG
> .
 Look, we went through all the trouble to research everything, spending days
if not weeks looking at packet captures, then we actually built it by
ourselves, and finally gave it away for free. Surely you can do a little
grepping to find out where it is?

Alternatively we can provide detailed advice at a hourly rate.

On Friday, 29 July 2016, likezjuisee notifications@github.com wrote:

> Could you show me the detail? I am not very clearly yet.
> 
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/381#issuecomment-236102506, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_a2Jfzx0VTzMMiaWk3YfLDHi1V38ks5qaZmMgaJpZM4JX5YG
> .
 If you find a bug or want to expand the features, then feel free to ask for help. But we don't provide help if it's something you can look up relatively easily by yourself, because that takes time and doesn't improve the project.
  It should already set a cookie. Currently it isn't possible to disable the login entirely.

Probably duplicate of #37.
 Basically you just need to sign a JWT using the STF session secret that includes the name and email address (=id) of the user, and then pass it to STF using a query parameter, like [this](https://github.com/openstf/stf/blob/d104e940838a77b02d088795f59691d5a0381b2c/lib/units/auth/mock.js#L98) and [this](https://github.com/openstf/stf/blob/d104e940838a77b02d088795f59691d5a0381b2c/lib/units/auth/mock.js#L111). That user will then be logged into STF.
 There is no registration. You are assumed to have your own
authorizationsystem set up already, or use mock login.

On Tuesday, 1 November 2016, uniquezhuo notifications@github.com wrote:

> excuse me, I have no username and password; where I can sign up.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/380#issuecomment-257537942, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_U7i6NoDCjMAyMFO9_Qm1LnwnwJoks5q5xmjgaJpZM4JXH_V
> .
  Create a new key you're not using and post it here so we can see what it
looks like.

On Thursday, 28 July 2016, Alvaro notifications@github.com wrote:

> What's the problem (or question)?
> 
> Im trying to add a adb key but the app is not recognising the format. The
> last part of the file reads like:
> = name@name.host.com <javascript:_e(%7B%7D,'cvml','name@name.host.com');>
> What should have happened?
> 
> It should accept my key. The popup is closing without any answer.
> Do you have an idea for a solution? How can we reproduce the issue? Help
> us understand your issue by providing context. Please tell us details
> about your environment.
> - Are you using stf local or a full deployment
>   http://doc/DEPLOYMENT.md:
> - Version used (git hash or stf -V):
> - Environment name and version (e.g. Chrome 39, node.js 5.4):
> - Operating System and version:
> - If there was a problem with a specific device, run adb devices -l
>   and paste the relevant row here: I am accessing through other computer
>   using stf local with a public ip
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/379, or mute the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_U-D4QvzrN6lD38SkKg4RTH1ErKjks5qaI8SgaJpZM4JXG68
> .
  I'm not going to get into a religious debate about databases. We felt like learning something new, and the fact that they provide official Node.js drivers was also a huge plus. It's written in modern C++ with SSD optimizations in mind from the start, and it boots up with just one command without any configuration whatsoever. And it comes with a built-in admin panel that's very usable and looks great.

The new real time functionality is also very interesting but it did not exist at the time.

If you'd like to use another database, you pretty much just need to rewrite one file, `lib/db/api.js`, so that's an option if you want to go through all the trouble.
  Yeah, STF hasn't been optimized for that scenario. It was originally made for internal networks only.
 This problem can also occur in internal networks if your wifi is too weak or it is being shared by many people. STF client side is not optimised for weak network connection.
  Just sometimes or always?
 You could try https://github.com/mattinsler/longjohn to get a more usable stack trace. Might be a bit annoying to do with the docker deployment, though. Unfortunately the current units pull the image before running it (which is a bit of a mistake, I'm using a different method now), so even a `docker commit` wouldn't apply your changes reliably. Might have to either modify the units or run from the cloned repo.
 Could possibly be a TCP timeout, and therefore perhaps related to #100.
 That's super useful. Perhaps we should include longjohn by default... might have a bit of a performance penalty, though, so would need to study the code.
 Nice. Perhaps using it only when DEBUG is true (if there is a performance penalty) would be useful too.
  They're from http://fontawesome.io/. May be a bit out of date but you should be able to use most of the icons listed there.
  Thanks, that's useful. Just to be clear though, it only works on Linux
right (and not with Docker for Mac)? Someone's bound to ask later.

On Wed, Jan 4, 2017 at 3:41 mirceanis <notifications@github.com> wrote:

> Hi,
>
>
> There must be a good reason people keep saying stf local is not meant for
> docker.
>
>
> However, I've managed to put together a docker-compose.yml that seems to
> work.
>
>
> rethinkdb:
>
>   image: rethinkdb:2.3
>
>   ports:
>
>     - "8080:8080"
>
>     - "28015:28015"
>
>     - "29015:29015"
>
>   restart: always
>
>   volumes:
>
>     - "/srv/rethinkdb:/data"
>
>   command: "rethinkdb --bind all --cache-size 2048"
>
>
>
> adbd:
>
>   image: sorccu/adb
>
>   privileged: true
>
>   ports:
>
>     - "5037:5037"
>
>   restart: always
>
>   volumes:
>
>     - "/dev/bus/usb:/dev/bus/usb"
>
>
>
> stf-local:
>
>   image: openstf/stf
>
>   links:
>
>     - rethinkdb
>
>     - adbd
>
>   ports:
>
>     - "7100:7100"
>
>     - "7110:7110"
>
>     - "7120:7120"
>
>     - "7400-7500:7400-7500"
>
>   restart: always
>
>   command: stf local --public-ip 192.168.1.127 --provider-min-port 7400 --provider-max-port 7500 --adb-host adbd
>
>
>
> Obviously, you'll have to replace the --public-ip from the last line with
> the IP address of your docker host.
>
>
> With this setup, I'm able to access my devices by going to
> http://192.168.1.127:7100
>
>
> I hope it helps
>
>
>
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/374#issuecomment-270189145>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_TaQHbyZkGVuGenIKBN7h3vbvWqPks5rOpZRgaJpZM4JTpf2>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
  `stf local` is for development only, it isn't meant to be used for a 24/7 deployment. It MIGHT work, but it might not. For stability, you'd want a full deployment (see the deployment guide).

Anyway make sure that all output gets fully consumed. I remember one case from a really long time ago (should not happen anymore) where we were using another tool (perhaps nodemon, can't be sure anymore) to keep the program up and running. However, that program had some kind of a bug or misconfiguration, and it would run out of buffer space entirely. The program would then get blocked permanently and nothing would work. Make sure you're not doing something similar. 
  Sure, please see #123.
  You can see the issue right there in the log. Also, next time please format the log output by wrapping it within ```.
  ADB (which is provided by the Android SDK and is used by STF) is not stable on OS X. It is very common for devices to disappear randomly, needing to be unplugged and plugged in again. If you need to run STF on OS X, you're on your own pretty much. We only support Linux since it's much, much more stable.
  The README includes all the hardware information we give away. We can't give you advice about your custom hardware because it's incredibly expensive and/or time consuming to do that. If you decide to use something else than what we have in the README, you are on your own (although you could perhaps use our consultation services for that if you wanted to). 

Anyway, a Mac Pro would be an incredibly bad idea. You would most likely be unable to handle anything more than 10-12 devices. You need to use PCIe USB cards or you're most likely screwed.
  <!---

IF YOU REMOVE THIS TEMPLATE WE WILL CLOSE YOUR ISSUE WITHOUT RESPONSE.
Just read it. See the commonly asked questions and fill in the details we're asking, it saves so much of our time.

Hi there!

Please be sure to run `stf doctor` before submitting an issue. Please include screenshots, command output and log files if any.

=== SUPER COMMON QUESTIONS ===

Q. I'm having issues when multiple devices are connected.
A. Usually caused by insufficient USB power supply or other hardware issue we can't do anything about.

Q. Can I connect a device to STF over WIFI?
A. Yes, with the `--allow-remote` option. However, ADB over WIFI can easily be 10x slower than USB, so don't expect too much.

Q. How do I connect to my local STF from another computer?
A. Try the `--public-ip` option or do a full deployment. See DEPLOYMENT.md in the doc folder.

Q. Can I run STF on multiple machines?
A. Yes, if you do a full deployment. See DEPLOYMENT.md in the doc folder.
-->
## What's the problem (or question)?

<!--- If describing a bug, tell us what happens instead of the expected behavior -->

<!--- If suggesting a change/improvement, explain the difference from current behavior -->

Galaxy J1 Mini SM-J105H reportedly does not work due to a minicap failure, as can be seen in the logs below.

```
INF/device:plugins:screen:stream 36181 [xxxxxxxxxxxxxxxx] Reading minicap banner
INF/device:plugins:screen:stream 36181 [xxxxxxxxxxxxxxxx] minicap says: "INFO: (jni/minicap/minicap.cpp:444) New client connection"
WRN/device:plugins:screen:stream 36181 [xxxxxxxxxxxxxxxx] Connection to minicap ended unexpectedly
INF/device:plugins:screen:stream 36181 [xxxxxxxxxxxxxxxx] Disconnecting from minicap service
FTL/device:plugins:screen:stream 36181 [xxxxxxxxxxxxxxxx] Frame producer had an error Error: Failed more than 3 times in 10000ms
    at FrameProducer._failLimitExceeded (/usr/local/lib/node_modules/stf/lib/units/device/plugins/screen/stream.js:220:26)
    at FailCounter.emit (/usr/local/lib/node_modules/stf/node_modules/eventemitter3/index.js:73:35)
    at FailCounter.inc (/usr/local/lib/node_modules/stf/lib/util/failcounter.js:29:10)
    at FrameProducer._socketEnded (/usr/local/lib/node_modules/stf/lib/units/device/plugins/screen/stream.js:207:24)
    at RiskyStream.emit (/usr/local/lib/node_modules/stf/node_modules/eventemitter3/index.js:71:35)
    at RiskyStream.<anonymous> (/usr/local/lib/node_modules/stf/lib/util/riskystream.js:14:12)
    at emitNone (events.js:91:20)
    at Socket.emit (events.js:185:7)
    at endReadableNT (_stream_readable.js:926:12)
    at _combinedTickCallback (internal/process/next_tick.js:74:11)
    at process._tickCallback (internal/process/next_tick.js:98:9)
FTL/util:lifecycle 36181 [xxxxxxxxxxxxxxxx] Shutting down due to fatal error
INF/provider 36173 [*] Cleaning up device worker "xxxxxxxxxxxxxxxx"
ERR/provider 36173 [*] Device worker "xxxxxxxxxxxxxxxx" died with code 1
INF/provider 36173 [*] Restarting device worker "xxxxxxxxxxxxxxxx"
```
## What should have happened?

<!--- If you're describing a bug, tell us what should happen -->

<!--- If you're suggesting a change/improvement, tell us how it should work -->

It should have been operable like any other device.
## Do you have an idea for a solution?

<!--- Not obligatory, but suggest a fix/reason for the bug, -->

<!--- or ideas how to implement the addition or change -->

Need to search for a fix or workaround in minicap.
## How can we reproduce the issue?

<!--- Provide unambiguous set of steps to reproduce this bug. Include code to reproduce, if relevant -->
- [x] 1. Buy a Galaxy J1 Mini SM-J105H 
- [ ] 2. Connect it to STF
## Help us understand your issue by providing context.

<!--- How has this issue affected you? What are you trying to accomplish? -->

<!--- Providing context helps us come up with a solution that is most useful in the real world -->
## Please tell us details about your environment.

<!--- Include as many relevant details about the environment you experienced the bug in -->

Known to be irrelevant in this particular case.
 More details about the exact model:

```
WRN/device:plugins:data 36183 [xxxxxxxxxxxxxxxx] Unable to find device data { serial: 'xxxxxxxxxxxxxxxx',
  platform: 'Android',
  manufacturer: 'SAMSUNG',
  operator: 'Robi',
  model: 'SM-J105H',
  version: '5.1.1',
  abi: 'armeabi-v7a',
  sdk: '22',
  product: 'j1mini3gxx',
```
 Ordered with donation funds for ~$105 incl. shipping. This has the potential to fix many other Samsung devices as well.
 Device arrived... it may have been stolen. The seal had been broken and the device is locked, asking for the previous owner's Google account. Very unexpected considering the eBay seller had nearly 7000 feedback with 99.2% positive rating.

Initiating claim process.
 Checked other samsung devices, Working fine with followings:
- Samsung Galaxy S7 Edge
- Samsung Galaxy S6
- Samsung Galaxy A5 2016

Not working with:
- [Samsung Galaxy A7 2016](http://www.samsung.com/in/consumer/mobile-devices/smartphones/galaxy-a/SM-A710FZDFINS)

More Info:

```
  platform: 'Android',
  manufacturer: 'SAMSUNG',
  model: 'SM-A710F',
  version: '5.1.1',
  abi: 'armeabi-v7a',
  sdk: '22',
  product: 'a7xeltexx',
  display:
   { id: 0,
     width: 1080,
     height: 1920,
     xdpi: 403.4110107421875,
     ydpi: 403.0409851074219,
     fps: 59,
     density: 3,
     rotation: 0,
     secure: true,
     size: 5.464510452525597 },
 }
```

Error logs:

``` bash
INF/device:plugins:screen:stream 93876 [xxxxxxxxxx] minicap says: "INFO: (jni/minicap/minicap.cpp:444) New client connection"
WRN/device:plugins:screen:stream 93876 [xxxxxxxxxx] Shell keeping minicap running ended unexpectedly
INF/device:plugins:screen:stream 93876 [xxxxxxxxxx] Disconnecting from minicap service
FTL/device:plugins:screen:stream 93876 [xxxxxxxxxx] Frame producer had an error Error: Failed more than 3 times in 10000ms
    at FrameProducer._failLimitExceeded (/Users/xxx/Devel/openstf/stf/lib/units/device/plugins/screen/stream.js:222:26)
    at FailCounter.emit (/Users/xxx/Devel/openstf/stf/node_modules/eventemitter3/index.js:73:35)
    at FailCounter.inc (/Users/xxx/Devel/openstf/stf/lib/util/failcounter.js:29:10)
    at FrameProducer._outputEnded (/Users/xxx/Devel/openstf/stf/lib/units/device/plugins/screen/stream.js:215:24)
    at RiskyStream.emit (/Users/xxx/Devel/openstf/stf/node_modules/eventemitter3/index.js:71:35)
    at RiskyStream.<anonymous> (/Users/xxx/Devel/openstf/stf/lib/util/riskystream.js:14:12)
    at emitNone (events.js:72:20)
    at Socket.emit (events.js:166:7)
    at endReadableNT (_stream_readable.js:921:12)
    at nextTickCallbackWith2Args (node.js:442:9)
    at process._tickCallback (node.js:356:17)
FTL/util:lifecycle 93876 [xxxxxxxxxx] Shutting down due to fatal error
INF/provider 93125 [*] Cleaning up device worker "xxxxxxxxxx"
ERR/provider 93125 [*] Device worker "xxxxxxxxxx" died with code 1
```
 After OS update to 6.0, Samsung Galaxy A7 2016 is working fine.
 Hmm, that's very interesting...
 These should all work in STF 2.2.0 :)
  So far, 19/20 times, this error has been caused by the gm binary either not
being installed or not being in PATH.

On Fri, Feb 3, 2017 at 0:26 bentonglove <notifications@github.com> wrote:

> I have exactly the same problem as niuniudd had. Can someone help out
> there? Thanks!
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/364#issuecomment-276987932>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_ad-TRMya-qqgjWPo_LDpyKik8Tdks5rYfWHgaJpZM4JJDcn>
> .
>
 There have been at least 20 issues about this thing. So far, in 99% of the
cases, it has been an issue with the the gm binary not being found.

I would highly recommend pasting the stf log output from when you take the
screenshot, all the way till you see the broken image. Otherwise there's
nothing more I can say.

On Wed, Feb 22, 2017 at 11:56 AM, xiaobeiying <notifications@github.com>
wrote:

> @bentonglove <https://github.com/bentonglove> Screenshot isnot work here.
> I also have "ProtoBuf" problem.
>
> administrator@ubuntu:~$ stf doctor
> INF/util:doctor 16163 [*] OS Arch: x64
> INF/util:doctor 16163 [*] OS Platform: linux
> INF/util:doctor 16163 [*] OS Platform: 3.13.0-24-generic
> INF/util:doctor 16163 [*] Using Node 7.4.0
> INF/util:doctor 16163 [*] Using RethinkDB client 2.3.3
> INF/util:doctor 16163 [*] Using ZeroMQ 4.1.4
> INF/util:doctor 16163 [*] GraphicsMagick 1.3.21
> INF/util:doctor 16163 [*] ProtoBuf 3.0.0
> ERR/util:doctor 16163 [*] Current ProtoBuf version is not supported, it has to be ~2
> INF/util:doctor 16163 [*] Local ADB 1.0.31
> INF/util:doctor 16163 [*] Local RethinkDB server 2.3.5~0trusty
> /usr/local/lib/node_modules/stf/node_modules/semver/semver.js:293
>     throw new TypeError('Invalid Version: ' + version);
>     ^
>
> TypeError: Invalid Version: 2.3.5~0trusty
>     at new SemVer (/usr/local/lib/node_modules/stf/node_modules/semver/semver.js:293:11)
>     at Range.test (/usr/local/lib/node_modules/stf/node_modules/semver/semver.js:1036:15)
>     at Function.satisfies (/usr/local/lib/node_modules/stf/node_modules/semver/semver.js:1085:16)
>     at unsupportedVersion (/usr/local/lib/node_modules/stf/lib/util/doctor.js:13:15)
>     at /usr/local/lib/node_modules/stf/lib/util/doctor.js:95:7
>     at /usr/local/lib/node_modules/stf/lib/util/doctor.js:50:22
>     at ChildProcess.exithandler (child_process.js:202:7)
>     at emitTwo (events.js:106:13)
>     at ChildProcess.emit (events.js:191:7)
>     at maybeClose (internal/child_process.js:885:16)
>     at Socket.<anonymous> (internal/child_process.js:334:11)
>     at emitOne (events.js:96:13)
>     at Socket.emit (events.js:188:7)
>     at Pipe._handle.close [as _onclose] (net.js:501:12)
>
> Do you have resolved this problem？
> @sorccu <https://github.com/sorccu> Need your help...
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/364#issuecomment-281553794>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_RlWYN9q7ADZGnyEb-Nn8gVThYBwks5re6PxgaJpZM4JJDcn>
> .
>
  Don't remove the issue template, now I have to waste time asking you the same questions again.

That particular issue can happen on some devices if frames are not being read from it quickly enough. Which device is it? Please post the output of `adb devices -l`, it contains the necessary details.
 I don't have that one, but I know that Redmi Note 2 works fine at least.
 That sounds weird, but I've now made the timeout configurable in https://github.com/openstf/stf/commit/72a16ed2ff559d1ea895c0213fa805c140b5948a. Could be the same as #100. For usage of `ZMQ_TCP_KEEPALIVE` and `ZMQ_TCP_KEEPALIVE_IDLE` see https://github.com/openstf/stf/pull/104#issuecomment-149859430.

Note that the message can also imply that you have too many devices connected on that machine, or that the device isn't receiving enough power. It can be caused by many things. Do you have USB tethering or personal hotspot enabled on that device? Note that the current codebase does not have `waitForPort` anywhere anymore. Try using the latest version of STF and let us know if anything changes. Seems that this issue was resolved. Closing. Thanks!  You updated your Node.js and now the native extensions that were built for an older version no longer work.

Remove the `node_modules` folder and run `npm install` again.
  Your processor sucks. Get a PCIe USB card or you're just wasting your own time. Additionally, #354 may be related.
 Or more precisely, the chipset sucks. Recent consumer Intel chipsets are not good with a large number of USB devices.
  There is no information whatsoever in this issue, so I'm closing it.
  App switch key is already there in the master branch (see [CHANGELOG.md](https://github.com/openstf/stf/blob/master/CHANGELOG.md)), which you can use either by building from source or by using the docker images. You'll then have 4 buttons in the blue bottom bar.  See stf <command> -h and/or the deployment guide

On Tuesday, 28 June 2016, 0x88l notifications@github.com wrote:

> There is to many stf's parameters.But there haven't a example of them.Can
> anybody provide it ?
> 
> root@boyaatest:/home/boyaa-test# stf --help
> 
> Usage: stf [options] [command]
> 
> Commands:
> 
> provider [options] [serial...]          start provider
> device [options] <serial>               start device worker
> processor [options] <name>              start processor
> reaper [options] <name>                 start reaper
> triproxy [options] <name>               start triproxy
> auth-ldap [options]                     start LDAP auth client
> auth-oauth2 [options]                   start OAuth 2.0 auth client
> auth-saml2 [options]                    start SAML 2.0 auth client
> auth-mock [options]                     start mock auth client
> auth-openid [options]                   start openid auth client
> notify-hipchat [options]                start HipChat notifier
> notify-slack [options]                  start Slack notifier
> log-rethinkdb [options]                 start a rethinkdb log recorder
> poorxy [options]                        start a poor reverse proxy for local development
> app [options]                           start app
> websocket [options]                     start websocket
> storage-temp [options]                  start temp storage
> storage-s3 [options]                    start s3 storage
> storage-plugin-image [options]          start storage image plugin
> storage-plugin-apk [options]            start storage apk plugin
> migrate                                 migrates the database to the latest version
> generate-fake-device [options] [model]  generates a fake device for testing
> local [options] [serial...]             start everything locally
> doctor [options]                        diagnose issues before starting
> 
> Options:
> 
> -h, --help     output usage information
> -V, --version  output the version number
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/357, or mute the thread
> https://github.com/notifications/unsubscribe/AAB-_WQZkS8XionzZ9jd9a0JRlFbjA7Fks5qQPH8gaJpZM4I_8MB
> .
  Rebuild the whole docker image.

On Thursday, 22 September 2016, HellDima notifications@github.com wrote:

> I have the same question, but to do it with docker.
> How can i gulp the project on docker?
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/356#issuecomment-248863511, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_VgNBBKJ6L5nfmXegK5aGA3qowXmks5qslaegaJpZM4I-8_U
> .
  ADB access gives you permissions that normal apps cannot have. Otherwise you'd have to root your device. STF doesn't support that scenario right now.
 As you can see, they only provide remote control for a limited set of devices (although their collection is already large and keeps increasing). It means that there is no single method to make all devices magically work. I am not sure how exactly their app works, but in the past some vendors like RealVNC have made contracts with manufacturers to include libraries for their use. It could be the case here, but who knows. Traditionally injecting touch events is only possible in your own app. Could be that they are using some sort of an overlay on the whole screen, although I haven't tried it. Displaying the screen without rooting is possible from Android 5.0, with some limitations (secure views like YouTube can't be viewed).
  Operating system IS relevant.
 Your old ubuntu probably has libmtp installed, which changes device permissions and makes ADB unable to see them. Try running adb as root and see if anything changes.

ALL devices should be able to connect. Sometimes you have to choose between MTP and PTP mode, but one will work.
 Sure, however it's easier to check if it's the cause or not by temporarily switching to root.
  That scenario is well supported. Your own separate authentication app and STF only need to know the secret key which is used to sign the JWT token. Essentially your app checks whether the login details are valid, and if they are, it generates a JWT token containing basic user information. It then signs the token using the secret key. Then it redirects to STF with the token as a URL parameter. STF checks that the JWT signature matches and if so, accepts the login using the provided information.

I can't give you step by step instructions. Honestly that would be a waste of time. Please look at one of the existing plugins, like the [LDAP plugin](https://github.com/openstf/stf/blob/master/lib/units/auth/ldap.js) for example, and just do the same thing. There's so little code that it should be fairly obvious what it does.

Perhaps try to get the built-in LDAP plugin working first, and then try to replace it with your own?
 tadesushilgithub, 
1 - You have to pull STF project from github and run from file.
2 - Run "gulp build" command  in stf folder, this process do all jade extension files convert pug file.
3 - Now you can add button in menu.pug file not menu.jade.
4 - Run "gulp clean" command for every file changes, you can "gulp clean" when STF is running
  Based on the bug reports over time, we probably do have a known problem with streaming somewhere, but it's unclear where it is. Could be adbkit. We have not been able to reproduce the issue or make a test case for it.
  Try using the `--lock-rotation` flag to make it more reliable. Otherwise the device may realize it's not actually rotated, and turn back immediately.
 I believe this was resolved with the comment above. Feel free to open a new issue if not.
  It is a feature.
 We should add a flag to disable it though.

On Monday, 6 June 2016, 0x88l notifications@github.com wrote:

> Thanks.
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/346#issuecomment-223918395, or mute
> the thread
> https://github.com/notifications/unsubscribe/AAB-_Sto_kWIrw3gH04zo69T5cY0htIBks5qI_FdgaJpZM4Iuryp
> .
 Ok I finally added it. You can now use `stf local -C` or `stf local --no-cleanup`. Same for the provider unit if you run it separately. Thanks!
  LGTM
  When you create an issue, there's a template that you seem to have removed. It includes commonly asked questions, like "Q. How do I connect to my local STF from another computer?" which applies in this case as well.
  Looks like you've changed the STF logo (visible before you edited), meaning that you've modified the source code. Could be an issue you've created yourself.

I would suspect incorrect configuration.
 Most probably its related to TCP Connection timeout. It depends on how your local network is configured. 

One solution to solve this is by setting `ZMQ_TCP_KEEPALIVE` & `ZMQ_TCP_KEEPALIVE_IDLE` environment variable to your providers.
 If you are running all other stf micro services such as (stf-app, stf-auth ...) in same machine then you only need to add these variable in provider. If you are using CoreOS + Fleet then they might be running on different machines then you will have to add these variables in other services(which are using zmq socket) too.

Basically you will have to make sure that all the TCP connections between your servers do not die.

Unit file looks okay to me.
 looks like you have added some extra spaces in `-e "ZMQ_TCP_KEEPALIVE =1"`. It might not work because of that space. Change it to `-e "ZMQ_TCP_KEEPALIVE =1"` -> `-e "ZMQ_TCP_KEEPALIVE=1"`

Also, always write source code in markdown code block for better visibility.
 By definition TCP_KEEPIDLE is

> The time (in seconds) the connection needs to remain idle before TCP starts sending keepalive probes, if the socket option SO_KEEPALIVE has been set on this socket.

Can you guys try again with `ZMQ_TCP_KEEPALIVE_IDLE=300`
  It says you don't have zeromq libraries installed.
  can you post `stf doctor` output and also stf logs
 Those warnings have no effect on functionality. It only means that we don't have an image or a name for those devices.
 Could be due to many reasons. Perhaps you're using the `--public-ip` option and setting it incorrectly. Or perhaps you have a firewall blocking something. The information you've posted so far is not very useful to be honest. It's borderline impossible to say anything about the situation.
 When you create an issue there's a template that shows you the basic things we need. Why did you remove it?

We would need, at the very least, the full command you use to launch stf, the `adb connect` command you run, and the logs from when you run it. Or the entire log preferably.

Start by disabling the firewall entirely and see if that helps, though.
  Hey thanks! Don't mind about the Travis failure, it's a bit screwed up right now. I'll merge this if you can fix the small thing I commented on separately.

Also thanks for keeping to the existing coding style!
 Thanks!
  You upgraded node without doing 'npm rebuild' to recompile native
extensions.

On Tuesday, 31 May 2016, Lutvi Rosyady notifications@github.com wrote:

> Hi There,
> 
> I got this issue when installing STF and running stf local the error
> something like this :
> 
> INF/util:procutil 1899 [_] Forking "/Users/lutvirosyady/stf/lib/cli.js migrate"
> INF/db 1900 [_] Connecting to 127.0.0.1:28015
> undefined:1
> ERROR: Received an unsupported protocol version. This port is for RethinkDB queries. Does your client driver version not match the server?
> ^
> 
> SyntaxError: Unexpected token E in JSON at position 0
>     at Object.parse (native)
>     at Socket.handshake_callback (/Users/lutvirosyady/stf/node_modules/rethinkdb/net.js:624:35)
>     at emitOne (events.js:96:13)
>     at Socket.emit (events.js:188:7)
>     at readableAddChunk (_stream_readable.js:172:18)
>     at Socket.Readable.push (_stream_readable.js:130:10)
>     at TCP.onread (net.js:542:20)
> 
> /Users/lutvirosyady/stf/node_modules/bluebird/js/main/promise.js:677
>             throw e;
>             ^
> ExitError: Exit code "1"
>     at ChildProcess.<anonymous> (/Users/lutvirosyady/stf/lib/util/procutil.js:49:23)
>     at emitTwo (events.js:106:13)
>     at ChildProcess.emit (events.js:191:7)
>     at Process.ChildProcess._handle.onexit (internal/child_process.js:204:12)
> 
> For you detail information when I run stf doctor I got result like this
> as follow :
> 
> Users/lutvirosyady/stf/node_modules/zmq/node_modules/bindings/bindings.js:83
>         throw e
>         ^
> 
> Error: Module version mismatch. Expected 48, got 14.
>     at Error (native)
>     at Object.Module._extensions..node (module.js:568:18)
>     at Module.load (module.js:458:32)
>     at tryModuleLoad (module.js:417:12)
>     at Function.Module._load (module.js:409:3)
>     at Module.require (module.js:468:17)
>     at require (internal/module.js:20:19)
>     at bindings (/Users/lutvirosyady/stf/node_modules/zmq/node_modules/bindings/bindings.js:76:44)
>     at Object.<anonymous> (/Users/lutvirosyady/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:541:32)
>     at Object.Module._extensions..js (module.js:550:10)
>     at Module.load (module.js:458:32)
>     at tryModuleLoad (module.js:417:12)
>     at Function.Module._load (module.js:409:3)
>     at Module.require (module.js:468:17)
>     at require (internal/module.js:20:19)
> 
> Could you please help with this, so I can start to use STF.. :-)
> Much appreciated for all your help here..
> 
> Cheers,
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/337, or mute the thread
> https://github.com/notifications/unsubscribe/AAB-_bb_go_hEU4BmMY-NpZO2bM3No1Lks5qG63ogaJpZM4IqJzY
> .
  Our example deployment setup does not provide a solution for automatic service discovery, as there are simply too many solutions out there. A lazy method would be to use a MachineID condition in your fleet unit files to ensure they stay on the same machine.

As for the reboot, perhaps your cloud-config doesn't start with `#cloud-config`? It MUST start with that line or it will be ignored. Make the contents are properly indented too. Otherwise I'm not sure, other than that perhaps it's not reading the cloud config from the location you think it is. But that's a CoreOS question, not an STF question. 
 Wow I haven't seen that validator tool before. Thanks for the link. Sorry for not being very useful, but right now spending time even responding to our own issues is essentially lost time, and therefore lost money to us. Hopefully it's understandable why we're not very interested in answering questions about unrelated projects.
  Please search closed issues, this has been asked many many times.
 No, that would be a huge waste of time. Just search.
  Maybe your STF version is too old.
  The issue is not related to STF. Something is wrong with your hardware. Usually it's caused by insufficient power supply. You'll see the same by running `adb devices -l`.
  Check [DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) and [setup-exmaples](https://github.com/openstf/setup-examples)
  It's super easy to build the docker image... you literally just clone the repository and run `docker build .`. I am not sure how you've managed to even make that error happen, but it looks like you may have compiled the native modules on Linux and are now trying to run them on OS X.
  Duplicate with https://github.com/openstf/stf/issues/118
  Currently there is no such feature in STF.
  You probably didn't install graphicsmagick.

On Tuesday, 28 June 2016, joaopedroms22 notifications@github.com wrote:

> hi @Lubricy https://github.com/Lubricy,
> 
> Did you already solve this issue?
> I'm with a similar problem , but in my case the MiniCap works perfectly ,
> at least openstf stderr shows no error , but the screenshot is not shown in
> openstf web interface . Follow the log openSTF and managed to open the
> image without problems , so the problem is not in taking the screenshot but
> the referral to the openSTF interface.
> Any suggestion @sorccu https://github.com/sorccu ?
> 
> I'm using OS X as well, with El Captain 10.11.5.
> 
> Regards
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/321#issuecomment-229010508, or mute
> the thread
> https://github.com/notifications/unsubscribe/AAB-_XF6VD6gexdkw6auwtZLrrVH4IiLks5qQPW9gaJpZM4IZ-SA
> .
 So far every single time the screen has looked like that, graphicsmagick
hasn't been installed. Could you check that the gm command works?

On Tuesday, 28 June 2016, joaopedroms22 notifications@github.com wrote:

> I have all installed dependancy . I had before the openstf housed in a
> machine with Linux , and screenshots working properly , only since I moved
> to OS X is no longer functioning properly .
> I leave here a screenshot of the interface and openSTF as appears
> screenshot:
> http://imgur.com/KEUI1CV
> 
> Thanks for your help.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/321#issuecomment-229014421, or mute
> the thread
> https://github.com/notifications/unsubscribe/AAB-_TH3Sc9K_CTnDWBjLJ47XnSQ-o8vks5qQPqJgaJpZM4IZ-SA
> .
  Have you run `gulp clean` and after that `npm install` ?
  Do you mean that even if you change it to zh_CN from the UI it gets back to EN ?
 Supposedly STF should auto-detect the browser language, however there might be a bug.

Can you paste the output you get from here: http://jsbin.com/qirazahuyi/edit?console ?
 @0x88l so can you paste the output from here:  http://jsbin.com/qirazahuyi/edit?console ? I think there may be a bug related to the language matching.
 @0x88l So I found the bug, thank you!
  I don't think the size of the package is related. The automatic launcher activity detection seems to be failing for some reason. Is there any chance you could send the `.apk` file to me?
 Could you also send me the TVGames apk?
 And which operating system and which version of Node.js are you using? You seem to have removed all the details from the template again so I'm forced to ask them one by one, which is super slow.
 `stf local` or full docker deployment? 
  When you create an issue on GitHub, there's a template that you must fill in. Without the information in the template, you're not giving us enough information to do anything about the problem without wasting hours of our own time. For example, you're saying that the website crashes. That doesn't really say anything to us. Please create a new issue and fill in the issue template, and include the log messages that show the crash.
  You probably have the resources built already, meaning that it won't rebuild them. Run `gulp clean` once and you should be able to modify everything after that.
  If you want to test you need to run `gulp translate`.

Note that we are managing all the translations at Transifex since its better than just plain Github for contributing.

I've created the Thai language over it, so can you upload the translated file to [https://www.transifex.com/openstf/stf/]() ? You will need to register and apply for the Thai language only once, then you and other contributors will be able to do all the translations online.

After that you'll be able to send a pull request following the steps [here](https://github.com/openstf/stf#translating).
 No, you need to run `gulp translate` after that if you want to check.

But you can skip this, just upload the `po` to Transifex and we can do the rest.
  This is very basic stuff so you might be better having someone close to help you, or asking over [stack overflow](http://stackoverflow.com).

Having said that,

First uninstall the globally installed stf (if you have it installed)
`npm uninstall -g stf`

Then do a fresh checkout
`git clone https://github.com/openstf/stf.git`

Fetch all NPM and Bower modules
`npm install`

Make stf directly accessible from command line
`npm link`
  Build and run our master branch and use the [SIGUSR1 signal](https://nodejs.org/api/debugger.html#debugger_advanced_usage) to enable the debugger for the process you want to debug. Or launch one of the processes separately and do the same thing.
  It looks more or less correct to me. What exactly is not working?
 I don't think you can use localhost for google oauth2. Google server will make a request on your callback url, so it should be a public domain.
 It [says that you can](https://developers.google.com/identity/protocols/OAuth2WebServer#creatingcred), at least for testing purposes:

> You can also create and edit redirect URIs from this page, by clicking a client ID. Redirect URIs are the URIs to your application's auth endpoints, which handle responses from the OAuth 2.0 server. You must change this value from the default example to the URI of your application's auth endpoint before you can use OAuth 2.0. For testing, you can specify URIs that refer to the local machine, such as http://localhost:8080. You should design your app's auth endpoints in a way that doesn't expose authorization codes to other resources on the page.

Technically it is possible since the callback URL gets returned to the browser. Google doesn't have to be able to access the URL.
 yeah, you are right. I tried it long ago that time google did not used to accept localhost as domain while app registration. But yeah, in oauth2.0 protocol, all the redirections are through browser so localhost should be fine.
 Looks like your user info endpoint is incorrect. According to https://developers.google.com/identity/protocols/OpenIDConnect#discovery it should be `https://www.googleapis.com/oauth2/v3/userinfo` (or you can remove the /v3/ for latest version).

I've just tried this myself and was able to get it working with the following configuration:

``` bash
export OAUTH_AUTHORIZATION_URL="https://accounts.google.com/o/oauth2/v2/auth"
export OAUTH_TOKEN_URL="https://www.googleapis.com/oauth2/v4/token"
export OAUTH_USERINFO_URL="https://www.googleapis.com/oauth2/v3/userinfo"
export OAUTH_CLIENT_ID="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA.apps.googleusercontent.com"
export OAUTH_CLIENT_SECRET="BBBBBBBBBBBBBBBBBBBBBBBB"
export OAUTH_CALLBACK_URL="http://localhost:7100/auth/oauth/callback"
export OAUTH_SCOPE="openid email"

# Now you can just run stf local without the annoying auth options.
stf local --auth-type oauth
```
 Looks like [Google doesn't allow private IPs in the callback URL](http://stackoverflow.com/questions/24736168/error-invalid-request-device-id-and-device-name-are-required-for-private-ip). There are some workarounds in the Stack Overflow post.

What you can do is to buy a domain or set up a subdomain for an existing domain, and point it to a private IP. You might as well do the [full deployment](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) then, though.
 I've added some documentation for the Google provider in b61df410f72505367728c4d05ef53449eadd4d69. I'll close this ticket now since the issue is solved, the private IP thing is beyond our control.
 Doesn't sound like that has anything to do with STF?  It does, with the `--allow-remote` option. However, there are several problems with that. The ADB wifi protocol is very, very slow. It can easily be 10x slower than USB. If you search the issues you can find more detailed information.
 No, just connect to it normally with `adb connect`. Just keep in mind that there's nothing we can do about the slowness.
 No... that's not how it works. You need to read http://developer.android.com/tools/help/adb.html#wireless. Please try to figure it out on your own, this isn't a bug and walking you through it is a huge waste of our time.
  Depends on what kind of information you want. Internally STF uses [STFService.apk](https://github.com/openstf/STFService.apk) which provides all the device information through TCP connection.
  No, please use [nvm](https://github.com/creationix/nvm) to install node.
  You're right, it was a bug in one of our own dependencies. I've pushed a fix with tests to prevent future breakage. Should be fixed in master now, but remember to run `npm install` to update your dependencies.
  Sounds like your RethinkDB is too old, or possibly too new. Please post the exact version.
 When you submit a new issue, there's a template with required information. It seems like you've removed the whole template. We can't help you because you're not giving us enough information.
 @0x88l Can you at least paste the output of `stf doctor`?
 Can you post the output of `stf doctor`?
Also can you post what error you get when "npm download"?

If you don't post any of the required information no one will be able to help you.
 Can you post what you get after doing `npm install` ?
 Yes
 First, never run npm as root, it causes all kinds of things (mostly native
extension builds) not to work properly as some kind of a security measure.
Use your own user, create a separate user, or use something like the nobody
user.

Second, If you want to install from master, you have to clone the
repository first. Otherwise it might be missing some things that are
normally built before publishing. After running npm install in the repo,
run npm link and it will be accessible globally.

On Wednesday, 20 April 2016, 0x88l notifications@github.com wrote:

> The log:
> 
> root:~# npm install -g --save
> https://github.com/openstf/stf/tarball/master
> npm WARN deprecated jade@1.11.0: Jade has been renamed to pug, please
> install the latest version of pug instead of jade
> /usr/local/bin/stf -> /usr/local/lib/node_modules/stf/bin/stf
> 
> jpeg-turbo@0.4.0 install
> /usr/local/lib/node_modules/stf/node_modules/jpeg-turbo
> node-pre-gyp install --fallback-to-build
> 
> [jpeg-turbo] Success:
> "/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v47-linux-x64/jpegturbo.node"
> is installed via remote
> 
> dtrace-provider@0.6.0 install
> /usr/local/lib/node_modules/stf/node_modules/dtrace-provider
> node scripts/install.js
> 
> bufferutil@1.2.1 install
> /usr/local/lib/node_modules/stf/node_modules/bufferutil
> node-gyp rebuild
> 
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/root/.node-gyp/5.10.0"
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/local/lib/node_modules/stf/node_modules/bufferutil/.node-gyp"
> make: Entering directory
> '/usr/local/lib/node_modules/stf/node_modules/bufferutil/build'
> CXX(target) Release/obj.target/bufferutil/src/bufferutil.o
> SOLINK_MODULE(target) Release/obj.target/bufferutil.node
> COPY Release/bufferutil.node
> make: Leaving directory
> '/usr/local/lib/node_modules/stf/node_modules/bufferutil/build'
> 
> utf-8-validate@1.2.1 install
> /usr/local/lib/node_modules/stf/node_modules/utf-8-validate
> node-gyp rebuild
> 
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/root/.node-gyp/5.10.0"
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/local/lib/node_modules/stf/node_modules/utf-8-validate/.node-gyp"
> make: Entering directory
> '/usr/local/lib/node_modules/stf/node_modules/utf-8-validate/build'
> CXX(target) Release/obj.target/validation/src/validation.o
> SOLINK_MODULE(target) Release/obj.target/validation.node
> COPY Release/validation.node
> make: Leaving directory
> '/usr/local/lib/node_modules/stf/node_modules/utf-8-validate/build'
> 
> zmq@2.14.0 install /usr/local/lib/node_modules/stf/node_modules/zmq
> node-gyp rebuild
> 
> gyp WARN EACCES user "root" does not have permission to access the dev dir
> "/root/.node-gyp/5.10.0"
> gyp WARN EACCES attempting to reinstall using temporary dev dir
> "/usr/local/lib/node_modules/stf/node_modules/zmq/.node-gyp"
> make: Entering directory
> '/usr/local/lib/node_modules/stf/node_modules/zmq/build'
> CXX(target) Release/obj.target/zmq/binding.o
> SOLINK_MODULE(target) Release/obj.target/zmq.node
> COPY Release/zmq.node
> make: Leaving directory
> '/usr/local/lib/node_modules/stf/node_modules/zmq/build'
> /usr/local/lib
> └─┬ stf@1.1.1
> ├─┬ adbkit@2.4.1
> │ ├── adbkit-logcat@1.0.3
> 
> —
> You are receiving this because you commented.
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/305#issuecomment-212391076
  Thank you for your contribution!
Merged in master.
  You're right, I just updated and it doesn't work.
 Looks like the screen has been abusing display: table-row. It doesn't actually contain any table-cells.
 This should be fixed now. Could you build from master and try again?
 You're probably using prebuilt assets. Run `gulp clean` to always rebuilt assets on run, or `gulp build` to rebuild assets once. You can also use `./node_modules/.bin/gulp <command>` if you don't have gulp installed yet.
  None of the core developers uses Windows. It might be possible to make it work but we don't really care, to be honest. Our only officially supported deployment platform is Linux for now. 

Since you're asking for a very detailed guide, you could perhaps try posting a bounty on this issue, and maybe someone who knows how to do it will respond.

[![Bountysource](https://api.bountysource.com/badge/issue?issue_id=32851453)](https://www.bountysource.com/issues/32851453-is-there-a-doc-about-deploy-stf-on-win7)
  This is already implemented in 2.0.0 branch and will be available in next major release. If you want to use it now, then use 2.0.0 branch. To know more about its usages refer this https://github.com/openstf/stf/pull/200
  Read [this](https://github.com/openstf/minicap/blob/master/README.md) and [this](https://github.com/openstf/minicap/tree/master/jni/minicap-shared) for documentation. And there are also some instructions in this [issue](https://github.com/openstf/minicap/issues/8) which may be helpful
  You can have more than one stf-triproxy-dev running if you need extreme scalability, but your graph is a bit off. The stf-triproxy-dev is a contact point for ALL the services running on ALL the provider machines. Therefore if you put it directly on a provider machine, all other provider machines and stf-processors would have to connect to that one.

Like the deployment docs say, the provider machines are only supposed to have adbd and stf-provider running. You should put the stf-triproxy-dev unit wherever it's convenient, usually the application server. Keep in mind that the triproxies are bind points, i.e. they must have some kind of a static address e.g. a dns entry or a static IP. If you put the triproxy on the provider machine, all other machines will need to know its address, which is annoying and even impossible in some environments. I would recommend getting started with only one stf-triproxy-dev, and if you really, really insist, you can try adding more once you get that running.
  Yes, please translate from https://www.transifex.com/openstf/stf/dashboard/ if possible.
  Can you paste the output of `stf doctor` ?
 You updated node and didn't run 'nom rebuild' to rebuild native extensions.
This is like the 5th time this exact same question has been asked in the
last 1-2 weeks.

On Monday, 6 June 2016, Lutvi Rosyady notifications@github.com wrote:

> Users/lutvirosyady/stf/node_modules/zmq/node_modules/bindings/bindings.js:83
>         throw e
>         ^
> 
> Error: Module version mismatch. Expected 48, got 14.
>     at Error (native)
>     at Object.Module._extensions..node (module.js:568:18)
>     at Module.load (module.js:458:32)
>     at tryModuleLoad (module.js:417:12)
>     at Function.Module._load (module.js:409:3)
>     at Module.require (module.js:468:17)
>     at require (internal/module.js:20:19)
>     at bindings (/Users/lutvirosyady/stf/node_modules/zmq/node_modules/bindings/bindings.js:76:44)
>     at Object.<anonymous> (/Users/lutvirosyady/stf/node_modules/zmq/lib/index.js:6:30)
>     at Module._compile (module.js:541:32)
>     at Object.Module._extensions..js (module.js:550:10)
>     at Module.load (module.js:458:32)
>     at tryModuleLoad (module.js:417:12)
>     at Function.Module._load (module.js:409:3)
>     at Module.require (module.js:468:17)
>     at require (internal/module.js:20:19)
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/296#issuecomment-223864910, or mute
> the thread
> https://github.com/notifications/unsubscribe/AAB-_TExcPTqhIS-BUj2VZZf2YUk3I3aks5qI51zgaJpZM4ICGVg
> .
 Ok, so it looks like `npm rebuild` alone is not enough on Node 6.x. For future reference, if it still doesn't work, I would recommend simply doing `rm -rf node_modules` followed by `npm install`. It should then work as usual.
  Looks to me like you did not follow the instructions. You need to include `http://` or `https://` in `--storage-url` like the deployment guide shows.
  Sorry to take so long. I've applied this to master, and we're hoping to merge 2.0.0 soon into master as well.
  Looks like you are trying to run setup example which is in different repo. Please don't mix issues between different repository. 

Also, it's hard to identify problem with current information. Please post everything what you have done to run that sample with fleetctl logs.
  Difficult to say, as it would take lots of time to implement. Consider [donating to the project](https://salt.bountysource.com/teams/openstf) to allow us to spend more developer time on it. For now let's keep this in #64.
  Yeah some Lenovo devices are known not to work with STF right now. Personally I don't have any so I can't really do anything. Please consider donating the problematic Lenovo device or a similar device to us.

Alternatively, you can click the badge below to start a bounty on this issue and maybe we or someone else will take a look at it if it reaches a reasonable value.

[![Bountysource](https://api.bountysource.com/badge/issue?issue_id=31981649)](https://www.bountysource.com/issues/31981649-a-set-of-lenovo-a850-devices-constantly-drop-connections)
 There's a good chance that your device might work now in STF 2.3.0. Please test and report back!
  You are getting this error because you are doing it wrong. You are not supposed to run `stf local` from Docker. `stf local` was made for development purpose not for deployment. If you want full deployment using docker then follow this [Deployment doc](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md). It has everything you need for full deployment.

Anyways, the reason you are getting that error is because [STF docker image](https://github.com/openstf/docker-openstf-base/blob/master/Dockerfile) does not have `adb` in it. For `adb` it uses different image [docker-adb](https://github.com/sorccu/docker-adb/blob/master/Dockerfile). `stf local` requires `adb` to be installed and should be in `$PATH`.

One more thing, if you want to deploy stf using docker, I will not recommend to use OS X as it does not support docker natively. Use docker supported OS such as CentOS, Ubuntu etc.
  Looks like you're trying to use STF from another phone. We have some known rendering performance issues in that area (mobile Safari and Chrome) that cause most of that lag. The frame producer on the origin device, with its current architecture, waits for the current frame to be fully read before sending the next frame. Since the rendering on the phone is very slow to begin with, this further compounds the effect, and can even lead to the image getting stuck like you saw (although it could have been caused by another issue as well) once the internal buffer queue runs out of space.

I agree that it is definitely a use case we want to support, but it isn't possible right now due to our limited resources. We're working on something that will hopefully allow us more time in the future.
 To be a bit clearer the problem is essentially our current "video" delivery method. There may be some low hanging fruits to improve the performance somewhat, but I think it'll require a larger architectural change to become fully responsive.

Find us funding and we can do it ;)
 Well that doesn't sound right. Any chance you're using ADB over wifi?
  We still recommend the plugable hub. Closing the issue as it's pretty old and the situation has likely been resolved in some way already.  It sounds like they've just renamed some symbols. Anyway the part of STF that needs the private APIs isn't actually an app, it's a simple binary. Some changes may be required but I don't think it'll be a problem.

If I uprade my Nexus 9 to N, I won't have any 6.0 devices left. If someone donates an N-compatible device we can take a look at it faster.
 I mean, STF won't work right now because we don't have a precompiled shared library for N yet. I'm just saying that it should be possible.
 Hopefully soon. I've added a [contribution link](https://salt.bountysource.com/teams/openstf) to the README, please feel free to pledge your support if you'd like to get N support faster :)
 Thanks to a few generous donations from @juliusspencer and others, we should be able to purchase a Nexus 5X for Android N development with the donations we've received so far! I will keep you updated.
 I've scheduled a withdrawal from Bountysource and ordered a Nexus 5X from a reasonably priced seller. It should arrive this weekend (or perhaps a little later). I'll get working on N once it arrives. 
 Yes that would be a separate issue, but some devices indeed do not work. It's difficult to say if that's the case here, as there can be many different causes. Anyway please create an issue per device that doesn't work, and include as much information as possible. Unfortunately most of the time the issues are difficult or borderline impossible to solve without having physical access to the device, so what we can do is quite limited. We could perhaps try to buy second hand devices, but sadly even having access to a device doesn't guarantee success, and even if it works out it can take several days of developer time.
 Ok, I've received and flashed the 5X. It seems that the current N version works without any changes to STF. It still introduces itself as SDK 23, which is likely to change over time, but at the very least there seem to be no breaking API changes so far.

So, the status as of Android N Preview 1 is that **it works as-is**. I will keep monitoring the preview updates.
 It turns out that Developer Preview 2 was just released, and that's what I actually tested even though the site wasn't fully updated yet. Android N Preview 1 will therefore go untested.

So, to correct my previous statement, it's Android N Preview 2 that has been tested and works fine.
 Should work now if you build from master.
 Our "app" that requires private API access is not an app. It's a stand-alone binary run inside the device as the shell user. Therefore the same rules don't apply.
 And for what it's worth, it works fine on a Nexus 5X running Preview 4 (which runs SDK 24) without any notifications.
 I've now verified that current master still works great on Android N Developer Preview 5, which is near-final (even branding has been changed to Android 7.0 already).
 I just tried on NRD90S and it works fine. Haven't checked NRD90M but it should also work just fine.
 Not sure why this issue is still open. Android N has been supported for a long long time.  device-db hasn't been updated since 2 years. You can add device images here, https://github.com/openstf/stf-device-db by sending PR.  Looks like a WebSocket problem, check the developer tools on Chrome for ideas. 50% of the time it's a configuration issue, the other 50% a firewall that you may or may not know about.
  It's not supposed to happen and we could probably fix it, I have a rough idea of what's going on and some potential solutions planned (but it's not that simple). Problem is that even finding out the root cause (or a reasonably plausible cause) can take several days of work, let alone the time it takes to actually fix it. Also, I don't have any device that exhibits that behavior, so I couldn't even test it.

So far no one has been willing to donate even a single device, ever. I would be happy to own every single Android device in the world, but the sad reality is that we can't shell out hundreds or thousands of dollars per month on new devices. We are looking into offering some commercial services in the near future that would pay for both developer time and new hardware. Alternatively if we could get some kind of bug bounties going on with reasonable rewards, we could then probably look into these things faster. Let me know if you're interested.
  That's not recommended because adb over wifi is super super slow. You can search past issues for more details.

I suspect your issue may be caused by a firewall, but perhaps not. Open your browser's developer tools. There should be a failed WebSocket request. Take a screenshot of that request incl. headers if there are any, and post it here.
 How are you launching stf? If you use `stf local --public-ip 1.2.3.4`, then you should only access http://1.2.3.4:7100. If you don't give the `--public-ip` option, then you should only access http://localhost:7100. You can't mix them reliably.
 No, it doesn't have a launcher action so that it doesn't interfere with the
original UI. You can still access and uninstall it from settings, though.

On Wed, Mar 2, 2016 at 7:14 PM, Matthieu33 notifications@github.com wrote:

> Am I supposed to have a "STF" folder (or similar) on my smartphone ?
> Because I just have the "STFService" application and I can't even locate
> where it is installed...
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/270#issuecomment-191170251.
  That's not a problem. It just means that we don't have a picture for that device. Also, stop spamming. Within just a few hours, you emailed us directly in Chinese, which we cannot read, then posted this issue, and are spamming other issues as well.

Furthermore, your device is broken. USB serial numbers are supposed to be unique, but yours is "0123456789ABCDEF". It means that the manufacturer has no idea what they're doing. STF does not work if you have multiple devices with the same serial number connected to the system. If you had multiple devices connected to the system, this is most likely the reason.

Anyway please post the full log output, all the way from `stf local`, otherwise it's impossible to say anything.
 A missing picture is not a problem. It just won't look pretty in the UI.

You need to show the full log or there's nothing I can do to help.
  Did you run adb connect ip:port? Also using adb over wifi is a bad idea
(even though it works), search the issues to find out why.

On Friday, 19 February 2016, brunotvaz notifications@github.com wrote:

> When I connect the phone using the USB cable, STFService starts and
> everything seems to work fine.
> As soon as I disconnect the USB cable the phone appears disconnected in
> the STF webpage.
> I've also rebooted the phone and tried to connect 1st via network and no
> STFService was started. Meaning that the server couldn't see the phone?
> From the STF machine (UBUNTU) I run the following command:
> telnet 192.168.1.65 5555
> The phone replied with:
> Escape character is 'ʌ]'
> Which means that there is a connection from STF to the smartphone port
> 5555 so why doesn't ADB over network works ?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/268#issuecomment-186243815.
 STF over WIFI with USB devices is fine. ADB over WIFI is super slow, and if you connect those devices to STF they will also be very slow, because there's nothing we can do to fix the slowness of ADB itself.
  Currently you'd have to fork, since the built-in plugins are quite interconnected due to permission issues and device workarounds. It's an interesting topic, though. Perhaps we could make it simpler for at least some types of plugins.
  May I ask what kind of an application requires 2.5GB of disk space?
  Yeah, it would be great and it's definitely something we'd like to have at some point. However, nearly all our development time is unpaid right now, and I guesstimate it would take up to several weeks of full time work to get it done. So basically there's a financial barrier that's keeping this from being implemented for now.

This ticket will be kept open as the official emulator support ticket.
 @rseek Nice. That means that you might have to only change [minicap](https://github.com/openstf/minicap) to make the screen work also. Let us know if you make any progress ;)
 Can you explain a little more about what you want to do? What is minicap-niop? Where's the link to the changes? Currently your links go to our repository, which doesn't have any of those changes.

I can't include any binaries that I haven't built myself, but I would consider adding them to the package if I was able to build them myself. Again, more details needed, though. I am slightly confused, but if the emulator is x86, wouldn’t STF already attempt to load the x86 minicap and minicap.so? You mentioned earlier that the generated binaries didn’t work on a real device, so they needed to be in a separate folder. But Nexus 5 isn’t an x86 device. Did you perhaps attempt to run the x86 binaries on your Nexus?

If there are no changes to the binaries, I don’t really see how it would break real devices. Let me know if I’ve misunderstood, though. Don't worry you provided details and tested things out. Good work.  The shelves are our own design and they were custom made. If you really really want one, I guess we could have one made for you... but it would be very expensive.
 Duplicate to https://github.com/openstf/stf/issues/1
  It's possible with `stf local --allow-remote`, but there's no point, and if you want to use it locally there are some drawbacks listed in the README. There are already many issues about this same thing but as a small recap:

The ADB wifi/TCP protocol is super inefficient and has huge overhead. If you try it yourself, without STF, you'll see a difference even with just regular `adb shell`. The latency and transfer speed can very easily drop to 1/10th (or less) of what you'd get with USB, which completely kills the STF screen performance.

Furthermore, many devices turn wifi off or at the very least disconnect from the network when they're idle, in order to conserve power. This means that your ADB connection will die all the time and someone will have to reconnect it.

Finally, you won't be able to test real 3G/4G or Airplane Mode if you connect your devices over wifi. You can't turn wifi off or choose another wifi network either.

So yeah. It's just not worth it in any sense.
  No, you cannot do this via `stf local`. `stf local` is made for development purpose not for production.

As said earlier, you will need to do a full deployment as described [here](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) to use multiple providers.
 Yes it does, but you need to know what you're doing like you apparently do :) Anyway we only provide step-by-step instructions for a full deployment and `stf local` isn't super reliable, it might fail to restart processes that die and we know it has other bugs too.
  You can set optional `timeout` parameter while adding a new device, something like this

``` js
var device = {serial: 'yyyy', timeout: 900000 }

client.then(function(api) {
  return api.user.addUserDevice({device: device})
    .then(function(res) {
      console.log(res.obj)
      // { success: true, description: 'Device successfully added' }
    })
})
.catch(function(err) {
  console.log(err)
})
```

`timeout` is in ms
 Currently, you cannot reset the `timeout` for the devices being used. You can only set it while adding a new device. 
 @vbanthia how can i use your code sample, i cannot see any sample in the project like that api.user....., how can i get client object ?  for example i wanna add this code to work when client click a device. 

Which js class, must i edit ?

Thanks for your answer.
  You need to do a full deployment, as described in [DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md). This allows you to provide devices from multiple machines.
  Not all devices work. It's hard to say if this is one of those cases, it could be due to many other reasons as well, such as a bad USB connection.

Please update the ticket with the exact model number of your device. You can get the necessary details by running `adb devices -l`.

We most likely don't have the device so we can't test it. If you'd like us to look into it, considering becoming a [hardware sponsor](https://github.com/openstf/stf#sponsors-wanted). 
 I think we had one and it worked fine. Samsung makes many country-specific models and sells them under the same name. Sometimes the differences can be huge. Please give the exact model number as shown by `adb devices -l`.
 You mean the model number and not the device serial number, right? The model number is nothing more than a string in build.prop. Personally I've never seen it change, but it is possible for a software update to change it, or to even modify it freely on a rooted phone.

The device serial number, in theory, cannot change. However, sometimes weird things happen. We had this one Disney-branded device that would sometimes give `1234567890ADCDEF` as its serial number early in the boot process (but still connected to `adb`). After it got a bit further, it showed the actual serial number. This stopped happening after a while, though, so I think a software update may have resolved the issue.

We also had a dirty cheap $50 phone that had the serial number permanently set to `1234567890ADCDEF`. We never plugged it in to the system.
  Could be possible I suppose, but making it 100% foolproof is unlikely. Additionally, it would require root, which none of our other current functionality requires. So, it would only work on rootable ROMs. 

To be honest it's kind of a niche feature, and I don't think we'll implement it any time soon. Most device providers don't have a need to hide information, all they care about is resetting the device after use.

If you'd really like to have that feature anyway, we may be able to implement and support it commercially.
  1. Nope
2. Every broken device has a different cause & workaround. It's nearly impossible to tell you what you need to do, you have to figure it out yourself. And it's almost impossible to do it remotely. We'd have to spend several hours, perhaps even days with the device. You can become a [hardware sponsor](https://github.com/openstf/stf#sponsors-wanted) if you'd like us to look into it.

Personally I haven't seen that error before, so it would probably take several days to fix.
 No, if someone wants these devices supported, they have to send me one.

Otherwise all you can do is wait.
 But please create a new issue for that specific device. That way it's easier to see which devices are not working.
 It seems like the I9082 is upgradable to 4.2 (originally 4.1), and @chanchifan's I9152 is 4.2. We've just pushed a fix for many 4.2 devices in STF 2.3.0, could you try and see if those devices work now? And @prateekagarwal60 please let us know which Android version your device was running.
 Ah, I can see from the log that it was running on SDK 17, which is 4.2. I believe both of these devices have a very good chance of working now, but please report back with results.
  well if you are just looking for a work around then I can suggest one.

Generally `80` & `443` ports are open in most of the firewalls. You can use `--poorxy-port` option while running stf server and set port = 80. In order to use `80` port, you need to start stf as sudo. Run command will look something like this

``` bash
sudo stf local --public-ip x.x.x.x --poorxy-port 80 
```

There will still be a limitation, you won't be able to use stf's `remote-debug` feature as it needs more open ports `7400 ~ 7700` in case you are running stf as `stf local`.
 In that case you can't use `stf local` since it doesn't expose all the
options you need. You would need to do a full deployment as described in
https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md.

On Thu, Jan 14, 2016 at 1:52 PM, lincoln notifications@github.com wrote:

> vbanthia,First Thanks.
> 
> then, i have to say sorry. i have not describe my problems clearly.
> Actually, my network environment as follow:
> proxy machine(with public ip machine) STF Server machine(with local ip
> machine)
> 
> user ---- public-ip:portA ---- Local-IP:portB
> the protA is not same as portB, in this case what can i do if user want to
> access our STF server?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/252#issuecomment-171529387.
 Most likely a firewall issue. Unless you do a full deployment, as mentioned earlier, the device screen goes through a different port which you must also open. In fact you have to open a whole range of ports for the screen. Either do a full deployment or tweak your firewall.

Also, many Windows machines don't like it when you use WebSockets on port 80. The connection tends to cut off after 10 seconds or so. I would recommend using a different port (ideally with HTTPS).

Anyway can't really help with the firewall issue. It's entirely up to you. You can check your developer console in your browser to see where it's trying to connect to. You have to then make sure that the connection to that address and port isn't being blocked by anything on either side.

OR this is a device that doesn't work yet. If so, consider becoming a [hardware sponsor](https://github.com/openstf/stf#sponsors-wanted) so that we can fix it for you.
 You choose the range yourself or leave it as default, which is 15000-25000 (an overly large number but hey, at least it's large enough). See `stf local --help` or `stf provider --help` depending on your setup.
 Use the [deployment guide](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md). `stf local` is for local development only, though you may be able to use the `--public-ip` option to make it accessible from elsewhere. Can't help you with that, though.  How did you install stf?

On Friday, 18 March 2016, labolado notifications@github.com wrote:

> I got the error two. I've installed jpeg-turbo successfully.
> 
> My System is MacOS 10.11.3
> 
> INF/device 14593 [64a6515b7803] Preparing device
> FTL/device 14593 [64a6515b7803] Setup had an error Error: Cannot find module '/usr/local/lib/node_modules/stf/node_modules/jpeg-turbo/lib/binding/node-v47-darwin-x64/jpegturbo.node'
>     at Function.Module._resolveFilename (module.js:339:15)
> 
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/251#issuecomment-198222179
 Super old issue but @dpn's answer is good. Closing.  If you're using an older version of Node with NPM 2, you're probably hitting npm/npm#5400. You can try running `npm rebuild zmq` if you don't want to upgrade, but I would strongly recommend using Node 5.x instead.

Please close the ticket if this solves your issue.
 rm -rf node_modules && npm install

On Sat, 19 Nov 2016 at 15:31 tobecrazy notifications@github.com wrote:

> Got the same error message , is this issue be resolved?
> 
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/250#issuecomment-261696935, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_TLtB2nwUdMtQavymSsnB8MYgOtgks5q_pezgaJpZM4HEHJZ
> .
  First of all, with this information no one can help you. Report detailed issue, this one is just wasting our time.

Looks like, you are trying to run setup example. Provide full detail about your environment, command you ran for setup and your problem.

Lastly, keep title short and write details in description block.
  LGTM
 :+1: 
 Thank you!
  You can check this PR as a reference for coding style

https://github.com/openstf/stf/pull/223/files
 looks like there are many modules which are imported but never used. Please remove those.
 well, there is still one point you have not fixed yet. https://github.com/openstf/stf/pull/247#discussion_r49556805

Personally, I do want to use passport-xxxx for all our auth unit for code consistency and maintenance point of view. If you really have any strong reason to not use passport, we would be okay. 

If you need more example for `passport-openid`, I think this can help you. https://github.com/jaredhanson/passport-openid/blob/master/examples/signon/app.js

If you make these changes, then it will be `LGTM` from my side.
 Thanks for your research. I suggested `passport-openid` to keep consistency. I have made one more minute comment. If you fix that plus this one https://github.com/openstf/stf/pull/247#discussion_r49556805, I will merge it.
 No, it is not related to passport. It is only a coding convention. Just to separate openid related options. You can check saml and oauth unit to see how protocol specific options are set.
 LGTM
 Merged in master!
  Could you provide more information about your setup?

Please also provide STF logs 
 If there's no screen but it otherwise works fine, you may have missed the `--public-ip` option. You need to set it to access STF from another computer.
  Well, as far as I know. This is an intentional feature not a problem. When you are sharing devices with others, you don't wanna keep development binaries inside device.

This is how this feature works,
1. `device unit` will store a list of pre-installed apps when device is connected to provider
2. on `group.leave` (Stop Using), it will again list packages and uninstall all the new apks installed by the user.

In case, XiaoMi, Huawei, Nexus is not uninstalling app after device session is over, then there is a problem. Can you recheck again on those devices? In case they don't uninstall apps, could you also post stf logs.
 Well logs in my case looks like this

```
IMP/device:plugins:group 5244 [EP7351U3WQ] No longer owned by "enigma@gmail.com"
INF/device:plugins:group 5244 [EP7351U3WQ] Unsubscribing from group channel "CofgpJOkQ5Oi//7sPUsT9g=="
INF/device:plugins:cleanup 5244 [EP7351U3WQ] Cleaning up package "com.vbanthia.androidsampleapp"
```

As you can see the last line, it is from `cleanup` plugin, which clean all the new added apps. In my case it was `com.vbanthia.androidsampleapp`. `cleanup` plugin uninstalled it.

I think, the reason why stf is not uninstalling apk in your case is because your apk was already present in the device when your first connected it to stf. So according to `cleanup` plugin, it is not a new entry. I know this is not very good design but we are working on making it better and probably release it in next big release.

So, I advice you to clean your device first i.e, uninstall all the unnecessary apk and then connect it to stf provider.

If the above solution does not works, then it may be problem with your device. I am not sure if we can provide any support remotely. In this case you can either debug your self by debugging [cleanup plugin](https://github.com/openstf/stf/blob/master/lib/units/device/plugins/cleanup.js) or being a [Hardware Sponsor](https://github.com/openstf/stf#sponsors-wanted)
 Well currently it is not possible to hide this feature without changing the code itself.

In case you are okay with editing code and building stf yourself then just comment out the below line, stf will not uninstall any app later.

https://github.com/openstf/stf/blob/master/lib/units/device/index.js#L35
 It's now possible to disable the cleanup plugin by using `stf local -C` or `stf local --no-cleanup`. Same for the provider unit if you use it separately.
  I have used it once and did not find any problem with STF
  Looks to me like you already have one `stf local` running. Are you perhaps trying to run the command you posted in addition to `stf local`? Because that would be wrong, you only need to run the command you posted above. Alternatively, you may want to check if some node processes were accidentally left behind somehow from a previous run.
 Also, don't set the `--port` option. Your `--ldap-url` should be `ldap://10.11.200.201:3268`.
 Even if stf local says it's shutting down everything, there can be a bug.
Overall stf local is not meant to be very reliable since it's supposed to
be for development only. You need to check your running processes somehow
(with ps maybe) and kill any unexpected stf node processes. It doesn't
usually happen but seems to have happened anyway in this case.

On Friday, 8 January 2016, romitincedoinc notifications@github.com wrote:

> HI Sorccu
> 
> Now have update the command:
> 
> stf local --public-ip 10.11.215.37 --auth-type ldap --auth-options
> '["--ldap-url","ldap://10.11.200.201:3268","--ldap-search-dn","
> CN=Users,DC=ibtechnology,DC=com","--ldap-bind-dn","DC=ibtechnology,DC=com","--app-url","
> Mail.incedoinc.com"]'
> 
> Still no success:
> 
> /usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:324
> throw err;
> ^
> Error: Address already in use
> at Socket.bindSync
> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:322:15)
> at module.exports
> (/usr/local/lib/node_modules/stf/lib/units/triproxy/index.js:21:7)
> at
> Command.program.command.description.option.option.option.option.option.option.option.option.option.option.option.option.action.require.port
> (/usr/local/lib/node_modules/stf/lib/cli.js:282:32)
> at Command.listener
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:301:8)
> at Command.EventEmitter.emit (events.js:98:17)
> at Command.parseArgs
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:615:12)
> at Command.parse
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:458:21)
> at Object. (/usr/local/lib/node_modules/stf/lib/cli.js:1134:9)
> at Module._compile (module.js:456:26)
> at Object.Module._extensions..js (module.js:474:10)
> at Module.load (module.js:356:32)
> at Function.Module._load (module.js:312:12)
> at Function.Module.runMain (module.js:497:10)
> at startup (node.js:119:16)
> at node.js:902:3
> FTL/cli:local 4115 [
> 
> _] Child process had an error ExitError: Exit code "8" at ChildProcess.
> (/usr/local/lib/node_modules/stf/lib/util/procutil.js:49:23) at
> ChildProcess.EventEmitter.emit (events.js:98:17) at
> Process.ChildProcess._handle.onexit (child_process.js:797:12) INF/cli:local
> 4115 [_] Shutting down all child processes
> 
> /usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:324
> throw err;
> ^
> Error: Address already in use
> at Socket.bindSync
> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:322:15)
> at module.exports
> (/usr/local/lib/node_modules/stf/lib/units/triproxy/index.js:21:7)
> at
> Command.program.command.description.option.option.option.option.option.option.option.option.option.option.option.option.action.require.port
> (/usr/local/lib/node_modules/stf/lib/cli.js:282:32)
> at Command.listener
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:301:8)
> at Command.EventEmitter.emit (events.js:98:17)
> at Command.parseArgs
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:615:12)
> at Command.parse
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:458:21)
> at Object. (/usr/local/lib/node_modules/stf/lib/cli.js:1134:9)
> at Module._compile (module.js:456:26)
> at Object.Module._extensions..js (module.js:474:10)
> at Module.load (module.js:356:32)
> at Function.Module._load (module.js:312:12)
> at Function.Module.runMain (module.js:497:10)
> at startup (node.js:119:16)
> at node.js:902:3
> root@ronit-HCL-Desktop:/home/ronit# stf local --public-ip 10.11.215.37
> --auth-type ldap --auth-options '["--ldap-url","ldap://10.11.200.201:3268","--ldap-search-dn","
> CN=Users,DC=ibtechnology,DC=com","--ldap-bind-dn","DC=ibtechnology,DC=com","--app-url","
> Mail.incedoinc.com"]'
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js migrate" INF/db
> 4151 [_] Connecting to 127.0.0.1:28015
> INF/db:setup 4151 [
> _] Database "stf" already exists INF/db:setup 4151 [_] Table "users"
> already exists
> INF/db:setup 4151 [
> _] Table "devices" already exists INF/db:setup 4151 [_] Table "logs"
> already exists
> INF/db:setup 4151 [
> _] Index "users"."adbKeys" already exists INF/db:setup 4151 [_] Index
> "devices"."owner" already exists
> INF/db:setup 4151 [
> _] Index "devices"."present" already exists INF/db:setup 4151 [_] Index
> "devices"."providerChannel" already exists
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js triproxy app001
> --bind-pub tcp://127.0.0.1:7111 http://127.0.0.1:7111 --bind-dealer
> tcp://127.0.0.1:7112 http://127.0.0.1:7112 --bind-pull
> tcp://127.0.0.1:7113 http://127.0.0.1:7113" INF/util:procutil 4149 [_]
> Forking "/usr/local/lib/node_modules/stf/lib/cli.js triproxy dev001
> --bind-pub tcp://127.0.0.1:7114 --bind-dealer tcp://127.0.0.1:7115
> --bind-pull tcp://127.0.0.1:7116"
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js processor proc001
> --connect-app-dealer tcp://127.0.0.1:7112 http://127.0.0.1:7112
> --connect-dev-dealer tcp://127.0.0.1:7115 http://127.0.0.1:7115"
> INF/util:procutil 4149 [_] Forking
> "/usr/local/lib/node_modules/stf/lib/cli.js processor proc002
> --connect-app-dealer tcp://127.0.0.1:7112 --connect-dev-dealer tcp://
> 127.0.0.1:7115"
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js reaper reaper001
> --connect-push tcp://127.0.0.1:7116 http://127.0.0.1:7116 --connect-sub
> tcp://127.0.0.1:7111 http://127.0.0.1:7111" INF/util:procutil 4149 [_]
> Forking "/usr/local/lib/node_modules/stf/lib/cli.js provider --name
> ronit-HCL-Desktop --min-port 7400 --max-port 7700 --connect-sub tcp://
> 127.0.0.1:7114 --connect-push tcp://127.0.0.1:7116 --group-timeout 900
> --public-ip 10.11.215.37 --storage-url http://localhost:7100/ --adb-host
> 127.0.0.1 --adb-port 5037"
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js auth-ldap --port
> 7120 --secret kute kittykat --app-url http://10.11.215.37:7100/
> http://10.11.215.37:7100/ --ldap-url ldap://10.11.200.201:3268
> http://10.11.200.201:3268 --ldap-search-dn
> CN=Users,DC=ibtechnology,DC=com --ldap-bind-dn DC=ibtechnology,DC=com
> --app-url Mail.incedoinc.com http://Mail.incedoinc.com" INF/util:procutil
> 4149 [_] Forking "/usr/local/lib/node_modules/stf/lib/cli.js app --port
> 7105 --secret kute kittykat --auth-url http://10.11.215.37:7100/auth/ldap/
> --websocket-url http://10.11.215.37:7110/"
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js websocket --port
> 7110 --secret kute kittykat --storage-url http://localhost:7100/
> http://localhost:7100/ --connect-sub tcp://127.0.0.1:7111
> http://127.0.0.1:7111 --connect-push tcp://127.0.0.1:7113
> http://127.0.0.1:7113" INF/util:procutil 4149 [_] Forking
> "/usr/local/lib/node_modules/stf/lib/cli.js storage-temp --port 7102"
> INF/util:procutil 4149 [
> _] Forking "/usr/local/lib/node_modules/stf/lib/cli.js
> storage-plugin-image --port 7103 --storage-url http://localhost:7100/
> http://localhost:7100/" INF/util:procutil 4149 [_] Forking
> "/usr/local/lib/node_modules/stf/lib/cli.js storage-plugin-apk --port 7104
> --storage-url http://localhost:7100/"
> INF/util:procutil 4149 [*] Forking
> "/usr/local/lib/node_modules/stf/lib/cli.js poorxy --port 7100 --app-url
> http://localhost:7105/ --auth-url http://localhost:7120/ --websocket-url
> http://localhost:7110/ --storage-url http://localhost:7102/
> --storage-plugin-image-url http://localhost:7103/
> --storage-plugin-apk-url http://localhost:7104/"
> 
> /usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:324
> throw err;
> ^
> Error: Address already in use
> at Socket.bindSync
> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:322:15)
> at module.exports
> (/usr/local/lib/node_modules/stf/lib/units/triproxy/index.js:21:7)
> at
> Command.program.command.description.option.option.option.option.option.option.option.option.option.option.option.option.action.require.port
> (/usr/local/lib/node_modules/stf/lib/cli.js:282:32)
> at Command.listener
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:301:8)
> at Command.EventEmitter.emit (events.js:98:17)
> at Command.parseArgs
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:615:12)
> at Command.parse
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:458:21)
> at Object. (/usr/local/lib/node_modules/stf/lib/cli.js:1134:9)
> at Module._compile (module.js:456:26)
> at Object.Module._extensions..js (module.js:474:10)
> at Module.load (module.js:356:32)
> at Function.Module._load (module.js:312:12)
> at Function.Module.runMain (module.js:497:10)
> at startup (node.js:119:16)
> at node.js:902:3
> 
> /usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:324
> throw err;
> ^
> FTL/cli:local 4149 [
> 
> _] Child process had an error ExitError: Exit code "8" at ChildProcess.
> (/usr/local/lib/node_modules/stf/lib/util/procutil.js:49:23) at
> ChildProcess.EventEmitter.emit (events.js:98:17) at
> Process.ChildProcess._handle.onexit (child_process.js:797:12) Error:
> Address already in use at Socket.bindSync
> (/usr/local/lib/node_modules/stf/node_modules/zmq/lib/index.js:322:15) at
> module.exports
> (/usr/local/lib/node_modules/stf/lib/units/triproxy/index.js:21:7) at
> Command.program.command.description.option.option.option.option.option.option.option.option.option.option.option.option.action.require.port
> (/usr/local/lib/node_modules/stf/lib/cli.js:282:32) at Command.listener
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:301:8) at
> Command.EventEmitter.emit (events.js:98:17) at Command.parseArgs
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:615:12) at
> Command.parse
> (/usr/local/lib/node_modules/stf/node_modules/commander/index.js:458:21) at
> Object. (/usr/local/lib/node_modules/stf/lib/cli.js:1134:9) at
> Module._compile (module.js:456:26) at Object.Module._extensions..js
> (module.js:474:10) at Module.load (module.js:356:32) at
> Function.Module._load (module.js:312:12) at Function.Module.runMain
> (module.js:497:10) at startup (node.js:119:16) at node.js:902:3
> INF/cli:local 4149 [_] Shutting down all child processes
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/240#issuecomment-169971166.
 Looks like you should set `--ldap-search-field` to the LDAP field that contains the username, and you may also need to change `--ldap-search-scope` and `--ldap-search-class` if the [defaults](https://github.com/openstf/stf/blob/b9fd290da8e87679972dea4c430bb6f71bd82c84/lib/cli.js#L351) aren't good for you.
 No. It depends entirely on your LDAP server.
 In that case you are missing one of the required properties. Check `stf auth-ldap --help` for the available options.
 Looks like you're missing `--ldap-search-field`.
 The error message says exactly what's wrong. `Error: Hostname/IP doesn't match certificate's altnames: "IP: 172.17.17.2 is not in the cert's list: "` You connected using the IP address, but the certificate is for a hostname. Or perhaps has no value set at all since the value is empty? Either way, the certificate doesn't match and it can't connect. Figure out what the hostname is supposed to be and use that instead. Alternatively you can try using `export NODE_TLS_REJECT_UNAUTHORIZED=0` before running STF, although I'm not sure if it applies to this issue, and is of course a security risk.
 Yes, we have written the [deployment guide](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) for that. `stf local` is for development use only. Unfortunately the `--websocket-url` option is not configurable for `stf local` right now at all.
 It's a required argument. It's a signing secret used to verify the authentication token. If someone knows your `--secret`, they can create a valid token and log in to your system. You must give the same `--secret` to your auth, app and websocket units or they won't be able to work together. For `stf local` it defaults to `'kute kittykat'`, which is why you don't need to set it.
 Sounds like it can't find the email field of your user. One of [these](https://github.com/openstf/stf/blob/48d621b1940058b5a4d979e35dc5eb2132c52946/lib/util/ldaputil.js#L120) is required.

Currently STF requires an email address to use as a primary key. If your LDAP doesn't have email addresses, you'll have to add them somehow.
 This issue is very old and has been resolved.  It's [this one](https://github.com/openstf/stf/blob/b9fd290da8e87679972dea4c430bb6f71bd82c84/lib/units/device/plugins/touch/index.js).
 That's the only one we have. But it's doing exactly what the [minitouch](https://github.com/openstf/minitouch) documentation shows.
  Not yet, but progress is being made in the 2.0.0 branch.
 It is not possible through STF UI but can be done through API. All you need to do is,
- Reserve all target devices where you want to install your apk using REST API
- Remote Connect to those devices
- Install apk using `adb -s SERIAL install /path/to/apk`

Here is the API documentation, https://github.com/openstf/stf/blob/master/doc/API.md
  It might or might not work, none of our collaborators use Windows and therefore we never test it. Please contribute instructions for Windows if you manage to get it to work, though.
  ~~minicap~~ minitouch doesn't provide a WebSocket server. It's a raw socket. Raw sockets are very different from WebSockets. You MIGHT be able to use something like http://websocketd.com/ if you really don't feel like playing with sockets yourself, but I've never tried using it.
 Why does your log still show a HTTP request?
  Not through the UI, but the functionality does exist in the backend and even in the client side JavaScript. It's not exposed since we don't have a multi-device UI yet. @vbanthia is doing great work with the API in the upcoming 2.0 release, so you may be able to do that programmatically in the future. The initial API endpoints will not expose all functionality, though.

If you really want to try the hidden functionality, there's a secret way. But it's not very useful for real work. Actually perhaps I shouldn't even mention it. But here goes. If you go to the device list and open your developer console, you'll find that there's an ugly global variable called `cc` (you can call it Control Center or whatever you like). It exposes the ControlService's methods (such as [`.openBrowser(url)`](https://github.com/openstf/stf/blob/b9fd290da8e87679972dea4c430bb6f71bd82c84/res/app/components/stf/control/control-service.js#L207)) on the whole device list, but there are caveats. First and foremost, it was and is for quick debugging, nothing more. Therefore it's quite stupid, and won't even ignore devices that are offline. It simply controls ALL devices in the list. You'll still get the desired end result but the promise won't return as cleanly as it should. There's also a separate control group for your "device group", or the set of devices you're currently using, but that one isn't exposed. Another thing is that even though the command will go to all devices, it won't actually wake them up unless someone is actively using them. Therefore to see the effect you'd have to first click "use" on all the devices in the list first to unlock them, and then run the command. IIRC you can shift or alt click on the use button to avoid going to the device page. 
 By the way if you'd be willing to contribute some of your time to assist and/or provide guidance with WebRTC, we could make the screen even faster ;)
 Currently we are not using it due to the large time investment required to learn everything required, and not having a sponsor to cover the development cost. But there is a huge incentive in doing it, for the following two reasons:

There's huge demand for WAN access due to people wanting to install STF on cloud providers, while running just the `stf provider` on physical machines. Currently it can be done, but latency and bandwidth can be an issue. Even when they are less of an issue (i.e. when the servers are not that far), it's still not an ideal situation. WebRTC would allow users on the same network to go through their internal network instead, improving latency.

Additionally, and perhaps more importantly, our screen capture method is not actually as fast as it could be. If we had WebRTC, we would be able to convert and send hardware accelerated raw x264 frames from the device and push these through the WebRTC connection. Not only would capturing be faster, but the smaller frames would transfer much faster through the bandwidth-limited ADB connection. We should then have an easy, efficient and low effort method to render these in the browser, since it would essentially be the same as a remote webcam from the browser's perspective.

I've been trying to read on how we could produce a WebRTC video stream from raw x264 frames, but so far haven't been successful in doing it. I'd guesstimate it would take 4 weeks or even more if I had to attempt to learn everything from scratch by myself, and currently it's just not possible.
  This PR implements RESTful APIs for STF which will make possible to use STF for test automation.
Detailed discussion can be seen [here](https://github.com/openstf/stf/issues/38)

In order to implement APIs, I did following things.
- Created a new api unit
- Used [swagger](http://swagger.io/) to define apis
- Moved all the current apis in app unit to new api unit
- Authorisation using accessToken which can be creating from STF UI. Refer (https://github.com/openstf/stf/pull/190)

API Documentation can be found [here](http://vbanthia.github.io/angular-swagger-ui/)
### How to use these API's for test automation?

Basic idea behind test automation is by using STF's remote debugging feature. By this feature you can remotely connect STF device to you machine(client). [More about this feature](https://github.com/openstf/stf/wiki/%5Ben%5D-Remote-Debug)
### How to connect device
1. Get all the devices using `GET /devices/` endpoint. You can also use `fields` query parameter to get only useful information such as `GET /devices?fields=owner,ready`. You can filter the usable device by filtering devices whose `owner==null`
2. Next step will be to request a usable device from STF server. You can do this by sending a POST request to `/user/devices` endpoint with `serial` in request body. Since this request is going to be asynchronous, STF will return you a polling URL. You can use this polling url to check if device is added into your devices (group).
3. Once device is added into your devices(`/user/devices`). You can ask STF server to start remote debugging using `POST /user/devices/{serial}/remoteConnect` endpoint. This will again return a polling url like `/user/devices/{serial}`. You can check if remoteConnect is finished by `GET /user/devices/{serial}?fields=remoteConnect`. If it is true, you can get `remoteDebugUrl` from device information i.e `/user/devices/{serial}?fields=remoteDebugUrl`. After getting this url you can use this url for remote connection and then you can run most of the automated test such as appium, calabash etc.
4. Once test are over, don't forget to disconnect remote debug and release the device by `DELETE /user/devices/{serial}/remoteConnect` and `DELETE /user/devices/{serial}`
### NOTE

Those who wants to try this branch, they can use `npm install stf@2.0.0-beta` or docker image  `docker pull openstf/stf:v2.0.0-beta`
 @HelderVSousa 

I merged some recent UI fix from master to this branch. Check once again. In case if it is not working, please also provide errors detail with your environment info which you can get from `stf doctor`
 @dhartwich1991 

I tried reproducing this but could not. Most probably you are still using `master` branch. Can you confirm this?

In case problem is not resolved, please post stf logs too.
 Github is the right place for discussion.

Are you able to connect same device from STF UI? In case yes, how much time does it take to get device connected after pressing "Use" button.

This error is raised when `stf api` service is not getting JoinGroupMessage (or device connected) message from backend within 5 second. Code related to this error is [here](https://github.com/openstf/stf/blob/2.0.0/lib/units/api/controllers/user.js#L127-L134)
 @fbatogo 

One more thing, if you want STF Java Client for Jenkins plugin, you can generate one using [Swagger online codegen](http://editor.swagger.io/) and [STF swagger.yaml](https://github.com/openstf/stf/blob/2.0.0/lib/units/api/swagger/api_v1.yaml) 
 @fbatogo 
Sorry, I could not look into your issue, will try to check this sometime next week.
 @fbatogo 

Good to know that its working now.

The reason why it was running and not raising any error was because of ZeroMQ behaviour. As you can see API unit uses `7150` and `7170` port to connect with stf's app side sub and push sockets respectively. Unlike HTTP, zeromq's "client" socket does not raise any error if zeromq's "server" are not running. So, previously API unit was listening at `7250` and `7270` port but it was not getting any `device connected` response since those message were sent on `7150` and `7170` ports.

I will try to figure out much better way to log the proper error message in case client is using wrong port. Thanks for troubleshooting.
 Read this https://github.com/openstf/stf/blob/2.0.0/doc/API.md and use 2.0.0 branch 
 Without STF logs, I cant interpret anything.
  To use ldap, you will need to start you stf-auth unit using ldap settings. You can find ldap related options using `stf auth-ldap --help` command. After reconfiguration restart you `stf-auth` unit.

In case you are using `stf local` then check ldap related options using `stf local --help`
 or check https://github.com/openstf/stf/issues/47
 Duplicate of https://github.com/openstf/stf/issues/47
  No, but then again I have not researched this topic very well.

On Mon, Jan 30, 2017 at 22:22 Cem AKKÖK <notifications@github.com> wrote:

> Yeah, that is so important. Do you have an any idea @sorccu
> <https://github.com/sorccu> ?
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/213#issuecomment-276060989>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_coGTn7hdnGqSaw6hKtjylPW3X-Hks5rXeQPgaJpZM4G8oxs>
> .
>
 That is very interesting. I was under the impression that the images were all signed and could therefore not be modified. This would at the very least require an unlocked bootloader, right?

Also, forgive me for copy/pasting your Gist here but we've had some links disappear earlier, so I'll just put it here for safe keeping if that's OK.

```sh
#!/bin/bash

if [ -n "$1" ];then
	./simg2img "$1" a.img
else
	./simg2img userdata.img a.img
fi

mount -o loop a.img d
mkdir -p d
export BASE=$PWD

(cd d
	(
		mkdir misc
		chown 1000:9998 misc
		chmod 01771 misc
		(
			cd misc

			mkdir adb
			chown 1000:2000 adb
			chmod 02750 adb
			(
				cd adb

				cat ~/.android/adbkey.pub > adb_keys
				echo >> adb_keys
				cat $BASE/adbkey.pub >> adb_keys
				echo >> adb_keys
				chown 1000:2000 adb_keys
				chmod 0660 adb_keys
			)
		)

		mkdir property
		chown 0:0 property
		chmod 0700 property
		(
			cd property
			echo -n 'mtp,adb' > persist.sys.usb.config
			chown 0:0 persist.sys.usb.config
			chmod 0600 persist.sys.usb.config
		)
	)
)
umount d

e2fsck -yf a.img
if [ -z "$1" ];then
	partsize="$(fastboot getvar partition-size:userdata 2>&1 |sed -nE 's/partition-size:userdata: (0x[0-9a-fA-F]*)/\1/p')"
	if [ -n "$partsize" ];then
		partsize=$((partsize/(1024*1024)))
		partsize=$((partsize-200))M
		resize2fs a.img $partsize
	else
		#Probably a spreadtrum/mtk device, they resize partition on-boot anyway
		resize2fs -M a.img
	fi
fi
./ext2simg a.img v.img
fastboot flash userdata v.img
fastboot reboot
```  I don't think it's possible to root all or even most devices from STF. Many
devices require you to unlock the bootloader, and then install a custom
recovery. This requires physical interaction on the device. In some cases,
like HTC, you may even have to register on their website to get an unlock
code. I have an HTC One M8 and had to do that.

If we somehow managed to do that, we would still lose ADB access to the
device since the ADB keys reset, and USB debugging is off by default
anyway. And, by resetting the phone with rooted firmware, before you even
get to settings to turn USB debugging on, you'd have to deal with the
initial prompts about setting up wifi, your name, google account etc.

It might be possible for some devices, as long as you don't have to erase
the user partition, but I don't think it's really worth it. It would be a
HUGE maintenance cost and a never ending source of issues.

Feel free to try to implement it yourself, though :)

On Saturday, 2 January 2016, th3prince1 notifications@github.com wrote:

> That's a good idea. The Wugfresh tool kit is great for rooting Nexus
> devices. However the tool kit is only for windows at the moment. The link
> says Linux users can use an app called Wine to run the root software on
> linux
> 
> Link to Rooting tool kit on linux discussion
> http://goo.gl/aSVbvR
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/212#issuecomment-168363134.
   :+1: 
  Like the README says, you have to build from master if you want Android 6.0 support. We're trying to release a new version as soon as we have time.
  I don't think those instructions are correct specially `installation` part.

If you are installation stf globally using `npm install -g stf`. You don't need to do `npm install` again.
Just skip the second step. You already install stf in `npm install -g stf` command.

Go to the step 3 and run stf app
 Also, if you are using Virtual box, you won't be able to see devices until and unless you use [usbfilters](https://www.virtualbox.org/manual/ch03.html#idp46608643879360)

BTW, what host OS are you on? Windows? Mac? or something else?
 well, ideally it should work if you are using Virtual Box. Installation will go smooth. The only problem will be filtering usb devices in Virtual box every time you add new one.

Other way you can try is by installing some linux OS on bare metal by making hard disk partition. This will give you real Linux OS instead of VM.
 we cannot figure out the problem if you don't provide us error log or other important information regarding your setup.
 If the installation doesn't show any errors, it could be that you're
hitting a known bug in npm 2. Try running npm rebuild zmq OR upgrade to
latest node 5.x (that comes with npm 3).

On Tuesday, 22 December 2015, knopsl <notifications@github.com
<javascript:_e(%7B%7D,'cvml','notifications@github.com');>> wrote:

> Started from scratch with instructions:
> https://gist.github.com/pvsune/a2122369f91d2a518271
> just used sudo npm install -g stf
> then started rethinkdb (which works fine)
> the started stf with "stf local" command
> Errors in TXT
> error_when_startstf.txt
> https://github.com/openstf/stf/files/69709/error_when_startstf.txt
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/208#issuecomment-166619958.
  Which version of Android was the device running? If 5.1, there's a good chance that STF 2.2.0 fixed the issue.
  @drogjh 
Can you provide more info about your problem.
  You need to give more details or no one can help. Also, please don't mention me directly asking for help, maybe someone else will answer.
- Are you trying to add a device to STF via `adb connect`, or are you using the `adb connect` remote debugging functionality?
- If you're using remote debugging, are you running the `adb connect` command on the same machine where STF is running, or a different one?
- Where do you see the `offline` status? Perhaps by running `adb devices`?
  This PR implements RESTful APIs for STF which will make possible to use STF for test automation.
Detailed discussion can be seen [here](https://github.com/openstf/stf/issues/38)

In order to implement APIs, I did following things.
- Created a new api unit
- Used [swagger](http://swagger.io/) to define apis
- Moved all the current apis in app unit to new api unit
- Authorisation using accessToken which can be creating from STF UI. Refer (https://github.com/openstf/stf/pull/190)

API Documentation can be found [here](http://vbanthia.github.io/angular-swagger-ui/)
### How to use these API's for test automation?

Basic idea behind test automation is by using STF's remote debugging feature. By this feature you can remotely connect STF device to you machine(client). [More about this feature](https://github.com/openstf/stf/wiki/%5Ben%5D-Remote-Debug)
### How to connect device
1. Get all the devices using `GET /devices/` endpoint. You can also use `fields` query parameter to get only useful information such as `GET /devices?fields=owner,ready`. You can filter the usable device by filtering devices whose `owner==null`
2. Next step will be to request a usable device from STF server. You can do this by sending a POST request to `/user/devices` endpoint with `serial` in request body. Since this request is going to be asynchronous, STF will return you a polling URL. You can use this polling url to check if device is added into your devices (group).
3. Once device is added into your devices(`/user/devices`). You can ask STF server to start remote debugging using `POST /user/devices/{serial}/remoteConnect` endpoint. This will again return a polling url like `/user/devices/{serial}`. You can check if remoteConnect is finished by `GET /user/devices/{serial}?fields=remoteConnect`. If it is true, you can get `remoteDebugUrl` from device information i.e `/user/devices/{serial}?fields=remoteDebugUrl`. After getting this url you can use this url for remote connection and then you can run most of the automated test such as appium, calabash etc.
4. Once test are over, don't forget to disconnect remote debug and release the device by `DELETE /user/devices/{serial}/remoteConnect` and `DELETE /user/devices/{serial}`
 I'm not really a fan of the pollingUrl thing. I understand the reason why it's there but it just feels clumsy. Also, although it kind of works in this case, we will eventually need other endpoints that need to receive replies in real time. For example we could have an endpoint to run a shell command, and return the output to the caller. So, I think it would be worth it to attempt to at least partially decide a method to deal with situations like that here and now.

In this case, since we're dealing with a non-transaction message, I would suggest at least trying something like this:
1. Start listening to GroupJoin messages on the global channel.
2. Send the message just like you're doing it now.
3. Set a timeout for a reasonable value. I think 5 seconds is perfectly fine if the system is healthy.
4. If we hit the timeout, return some HTTP failure code. I'm not sure which one right now. _Maybe_ 504 Gateway timeout.
5. Meanwhile, keep checking every GroupJoin message that comes in.
6. If a GroupJoin arrives with the correct serial number, compare the owner.
   - If the owner does not match the one the API request was made for, someone else took it and we should return an error code.
   - Otherwise, if the owner matches, that's a success. Then it's up for debate whether we should immediately return the device data, or require one more request to the device data endpoint.
   - In either case, clear the failure timeout.
7. Stop listening to GroupJoin messages.

If starting/stopping the listeners is difficult because of the router, I would perhaps suggest having the listener always on in the app scope (not per request). Create another EventEmitter that's accessible by both the router callback and the request handler. In the router callback, simply emit the received event in whatever format is convenient. You still need to make sure you do `.on()` and `.removeListener()` in the request handler, but you won't have to mess with the router which should make it easier.
 Update after Review
- Removed nested code
- Removed pollingUrl and made all the api synchronous using 5 second timer
- Typo fixes
 Finished writing documentation. Merging this into 2.0.0 since its getting too big.
 Some people are complaining, but I am still not able to reproduce this. Can you tell me how are you making requests? Through browser or through command line?

First try to make request through browser itself to check if you are using proper branch. After login open `http://localhost:7100/api/v1/swagger.json` url. In case if it is still redirecting, please post STF logs and chrome dev tool's network tab screenshot.

For command line usage, refer this doc - https://github.com/openstf/stf/blob/2.0.0/doc/API.md
  Any chance you could provide a test `.apk` file that fails?

I've been suspecting for a while now that the installation may be losing an initial chunk of data, but I've never been able to reproduce it myself. I've seen it happen a few times in the error logs, and yours may or may not be one of those cases. I've checked the code quite a few times in the past, but I haven't seen any obvious spot where it could happen. If the same file works when someone else is trying to use it, possibly on a local STF installation, then that's most likely what's happening. If it doesn't work locally either, then it should be something fairly easy to fix.
  Are you running npm as root, or perhaps with sudo? Because NPM doesn't like
when you do that.

On Tuesday, 1 December 2015, Tierney0115 notifications@github.com wrote:

> gyp: Undefined variable yasm_format in deps/libjpeg-turbo.gyp while
> loading dependencies of binding.gyp while trying to load binding.gyp
> gyp ERR! configure error
> gyp ERR! stack Error: gyp failed with exit code: 1
> gyp ERR! stack at ChildProcess.onCpExit
> (/root/node-v4.1.2-linux-armv7l/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:355:16)
> gyp ERR! stack at emitTwo (events.js:87:13)
> gyp ERR! stack at ChildProcess.emit (events.js:172:7)
> gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:200:12)
> gyp ERR! System Linux 3.10.82-39
> gyp ERR! command "/root/node-v4.1.2-linux-armv7l/bin/node"
> "/root/node-v4.1.2-linux-armv7l/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js"
> "configure" "--fallback-to-build"
> "--module=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm/jpegturbo.node"
> "--module_name=jpegturbo"
> "--module_path=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm"
> gyp ERR! cwd /root/stf-master/node_modules/jpeg-turbo
> gyp ERR! node -v v4.1.2
> gyp ERR! node-gyp -v v3.0.3
> gyp ERR! not ok
> node-pre-gyp ERR! build error
> node-pre-gyp ERR! stack Error: Failed to execute
> '/root/node-v4.1.2-linux-armv7l/bin/node
> /root/node-v4.1.2-linux-armv7l/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js
> configure --fallback-to-build
> --module=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm/jpegturbo.node
> --module_name=jpegturbo
> --module_path=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm'
> (1)
> node-pre-gyp ERR! stack at ChildProcess.
> (/root/stf-master/node_modules/jpeg-turbo/node_modules/node-pre-gyp/lib/util/compile.js:83:29)
> node-pre-gyp ERR! stack at emitTwo (events.js:87:13)
> node-pre-gyp ERR! stack at ChildProcess.emit (events.js:172:7)
> node-pre-gyp ERR! stack at maybeClose (internal/child_process.js:818:16)
> node-pre-gyp ERR! stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:211:5)
> node-pre-gyp ERR! System Linux 3.10.82-39
> node-pre-gyp ERR! command "/root/node-v4.1.2-linux-armv7l/bin/node"
> "/root/stf-master/node_modules/jpeg-turbo/node_modules/.bin/node-pre-gyp"
> "install" "--fallback-to-build"
> node-pre-gyp ERR! cwd /root/stf-master/node_modules/jpeg-turbo
> node-pre-gyp ERR! node -v v4.1.2
> node-pre-gyp ERR! node-pre-gyp -v v0.6.10
> node-pre-gyp ERR! not ok
> Failed to execute '/root/node-v4.1.2-linux-armv7l/bin/node
> /root/node-v4.1.2-linux-armv7l/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js
> configure --fallback-to-build
> --module=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm/jpegturbo.node
> --module_name=jpegturbo
> --module_path=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm'
> (1)
> npm verb unsafe-perm in lifecycle true
> npm info jpeg-turbo@0.3.0 Failed to exec install script
> npm verb unlock done using
> /root/.npm/_locks/jpeg-turbo-712d5d6e1a1ca886.lock for
> /root/stf-master/node_modules/jpeg-turbo
> npm verb stack Error: jpeg-turbo@0.3.0 install: node-pre-gyp install
> --fallback-to-build
> npm verb stack Exit status 1
> npm verb stack at EventEmitter.
> (/root/node-v4.1.2-linux-armv7l/lib/node_modules/npm/lib/utils/lifecycle.js:214:16)
> npm verb stack at emitTwo (events.js:87:13)
> npm verb stack at EventEmitter.emit (events.js:172:7)
> npm verb stack at ChildProcess.
> (/root/node-v4.1.2-linux-armv7l/lib/node_modules/npm/lib/utils/spawn.js:24:14)
> npm verb stack at emitTwo (events.js:87:13)
> npm verb stack at ChildProcess.emit (events.js:172:7)
> npm verb stack at maybeClose (internal/child_process.js:818:16)
> npm verb stack at Process.ChildProcess._handle.onexit
> (internal/child_process.js:211:5)
> npm verb pkgid jpeg-turbo@0.3.0
> npm verb cwd /root/stf-master
> npm ERR! Linux 3.10.82-39
> npm ERR! argv "/root/node-v4.1.2-linux-armv7l/bin/node"
> "/usr/local/bin/npm" "install" "--verbose" "--unsafe-perm"
> npm ERR! node v4.1.2
> npm ERR! npm v2.14.4
> npm ERR! code ELIFECYCLE
> 
> npm ERR! jpeg-turbo@0.3.0 install: node-pre-gyp install
> --fallback-to-build
> npm ERR! Exit status 1
> npm ERR!
> npm ERR! Failed at the jpeg-turbo@0.3.0 install script 'node-pre-gyp
> install --fallback-to-build'.
> npm ERR! This is most likely a problem with the jpeg-turbo package,
> npm ERR! not with npm itself.
> npm ERR! Tell the author that this fails on your system:
> npm ERR! node-pre-gyp install --fallback-to-build
> npm ERR! You can get their info via:
> npm ERR! npm owner ls jpeg-turbo
> npm ERR! There is likely additional logging output above.
> npm verb exit [ 1, true ]
> npm verb unbuild node_modules/jpeg-turbo
> npm info preuninstall jpeg-turbo@0.3.0
> npm info uninstall jpeg-turbo@0.3.0
> npm verb unbuild rmStuff jpeg-turbo@0.3.0 from
> /root/stf-master/node_modules
> npm info postuninstall jpeg-turbo@0.3.0
> npm verb gentlyRm don't care about contents; nuking
> /root/stf-master/node_modules/jpeg-turbo
> 
> npm ERR! Please include the following file with any support request:
> npm ERR! /root/stf-master/npm-debug.log
> 
> Thanks
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/194.
 I will look into this sometime this week, I had to replace the cooler on my
XU4 because the default one is a bit noisy.

On Wed, Dec 2, 2015 at 10:24 AM, Tierney0115 notifications@github.com
wrote:

> I have tried other user as well and they all have the same error when npm
> install jpeg-turbo@0.3.0 package. It seems like it has some error to
> rebuild the module:
> module=/root/stf-master/node_modules/jpeg-turbo/lib/binding/node-v46-linux-arm/jpegturbo.node
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/194#issuecomment-161149594.
 It should work now, but you should run `npm update jpeg-turbo` in your stf repo first to make sure it gets v0.3.2 instead of v0.3.1.

By the way my XU4 is 100% silent now, and runs at 40-50° when idle, and between 60-75° when doing heavier things. If you max out all 8 cores with `stress --cpu 8` it does go above 95° after a minute or two, though. I'll keep trying different cooling options, but I think this one's already pretty good for our purposes.

Thanks for reporting the issue!
  This feature allow user to generate an access token. Using that token users will be able to access STF API.

UI looks like this.

 ![screen shot 2015-11-26 at 02 44 57](https://cloud.githubusercontent.com/assets/7875161/11404971/45e4124c-93e8-11e5-8e60-86b198633fb0.png)

![screen shot 2015-11-26 at 02 45 11](https://cloud.githubusercontent.com/assets/7875161/11404999/7f29e6d0-93e8-11e5-86bf-d5cde3e0baf5.png)

![screen shot 2015-11-26 at 02 46 08](https://cloud.githubusercontent.com/assets/7875161/11405033/ae582f0c-93e8-11e5-9b39-7fa90842ee81.png)

![screen shot 2015-11-26 at 02 45 36](https://cloud.githubusercontent.com/assets/7875161/11405003/8c1f3854-93e8-11e5-95fc-f963ab9f9810.png)

![screen shot 2015-11-26 at 02 45 53](https://cloud.githubusercontent.com/assets/7875161/11405069/e1935f40-93e8-11e5-94a5-ac221307a991.png)

![screen shot 2015-11-26 at 02 46 31](https://cloud.githubusercontent.com/assets/7875161/11405038/b888a236-93e8-11e5-8fcc-9176a9a3929f.png)

![screen shot 2015-11-26 at 02 46 42](https://cloud.githubusercontent.com/assets/7875161/11405041/ba6c3fae-93e8-11e5-98d4-bd4279170678.png)

![screen shot 2015-11-26 at 02 46 54](https://cloud.githubusercontent.com/assets/7875161/11405045/bd6cb7ba-93e8-11e5-8bb7-da38bb178474.png)
 You cannot use it now. This PR is a subtask for implementing APIs. 
 Could you add an initial version of an express middleware to do the API auth? Currently it's LGTM if you address the expiry thing, but since the token is not actually being checked anywhere, I'm a little worried that we might be missing something that would otherwise be obvious if there was an implementation.
 You can check the API auth here in swagger branch.

https://github.com/openstf/stf/blob/SWAG/lib/units/api/middleware/auth.js#L11-L29
 @sorccu 
I have fixed default expiry and token format problem in https://github.com/openstf/stf/commit/8a342daef9e422cd50f9fb51a4e5afab55ab951c and https://github.com/openstf/stf/commit/6d99bace91f2637bf6f5ed9c4c530b199556a6a3. I am merging thing PR for now, in case you have other suggestion, just let me know. I will make those changes in another PR.
  Thank you for the report.
It may be a bit difficult to fix these kind of CSS bugs, flickers in one browser, doesn't flicker in another.
However, we appreciate bug reports of any kind, details matter.

Its ok to open multiple issues as you're doing now. It is easier to keep track and actually fix the bugs one by one.
  Well, it should work.

Can you check if the below command is launching setting app in your Samsung device.

```
adb -s DEVICE_SERIAL shell am start -a android.intent.action.MAIN -n com.android.settings/.Settings
```
 Did you run that command in the server machine(where device is connected and stf is running) or some where else?

Since, STF can access the devices `device not found` error is bit weird.

Please do following things
1. Post stf logs when you click setting button
2. Open settings app manually in the device and run following command and post outputs here.

```
adb -s DEVICE_SERIAL shell dumpsys window windows | grep -E 'mCurrentFocus|mFocusedApp'
```

Don't forget to run command in the machine where it is connected.
  Duplicate of #83.
 Could you give more details about your use case. With current information, we are not getting anything.
  Thanks for reporting the bug.

It will be fixed once this [PR](https://github.com/openstf/stf/issues/186) is merged.
 Hi! 
Thanks for your feedback, definitely we welcome contributions.

About the Appium integration, there is some discussion about the test automation, check [here](https://github.com/openstf/stf/issues/38). This has chances of being implemented soon-ish.

As for iOS support, you can check [here](https://github.com/openstf/stf/issues/64). This has less chances of happening anytime soon, however any contribution would be appreciated.

The "Save Screenshot" behaviour you mention is a known bug and we'll fix it asap (actually its the first time we hear of someone actually using this feature).

Honestly I don't remember of us talking to any Testobject employee, but it may be just bad memory ;)
  Theoretically it should work until and unless you are not adding a new OS level dependency and using latest kernels and docker.

You may get npm installation error sometime in that case just try rebuilding.

If you not able to build image by your own then you can also use cloud services to build docker image such as docker hub.
  No, STF isn't designed to work with emulators. It's because they don't use
SurfaceFlinger for rendering like real devices. It might be possible to
make some emulators work, but I don't think it's worth the time and effort.

If you have a compelling use case, feel free to let us know.

On Monday, 23 November 2015, tongtong301 notifications@github.com wrote:

> When I using "adb connect“ to a Visual Studio Emulator for Android,the
> micap,minitouch can be installed and run, and when I slide,the emulator
> slide normal, but the screen on the dashborad is always black.
> Can you tell me the reason?If I use Genymotion,will it work?
> Thx.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/181.
  Merging to openstf/adbkit#41.
  Once we add minify support, minifying should do it.

However we had problems with UglifyJS and annotations in the past, so we disabled it for the moment.

The way to do it is to use [ng-anotate](https://github.com/olov/ng-annotate) + UglifyJS.
It should be done only on `gulp build`
 The file includes source maps and other debugging information. For us it
wasn't really a problem since everything was in the local network anyway.
You should be able to get it to around 500KB by tweaking webpack options
(and doing the stupid angular thing).

On Thursday, 12 November 2015, 竹逊 notifications@github.com wrote:

> Hi, i find the [id].[hash].chunk.js file is very large, about 4M, are
> there any options in stf to make it smaller?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/173.
 Have you produced any solution about this issue?  Aren't sensor API's Read Only or listeners. What I mean is you can detect a shake in your device using these sensors. You cannot create them. You cannot make device tilt left. 

Do you know any way to create these motions using adb or some hidden apis?

One way will be to design the device rack which can shake and tilt devices.
 It is possible, for example there's [SensorSimulator](https://code.google.com/p/openintents/wiki/SensorSimulator) even though it's very old now. I'm pretty sure there was something a bit newer too, but I can't find it right now. Personally I haven't spent much time looking into what it does, but I suspect it just uses DDMS. I've often thought about having a 3d model of the device (or more likely just an extruded rectangle) in the UI which you could then drag to change sensor values. Seems like a lot of work, though.
  Well, I don't think the problem is with rethinkdb. Because client never access database directly.

Regarding 

> "Device database does not have a match for device xxx"

This error means that the device which are using is not present in [STF Database](https://github.com/openstf/stf-device-db)

The grey screen problem is because client is not able to make websocket connection. `stf local` uses port range between 7400 ~ 7700 for these connections. Can you check if these ports are open? 

Better way to debug this problem is by using chrome developer tool and check what kind of error are you getting in WebSocket connections.
 > Do you mean the ports on PC which running the stf local?

Yeah I meant that.

Btw, What kind of proxy are you using? Can you give me more details.

In general, client will make two connection with server. One at 7100 port which is okay in your case since you can see web app. The other connection is for screen. STF will choose a port between 7400 ~ 7700 and then your client will establish a websocket connection to see device screen. Make sure that you can access these port while using proxy from your client.
 You can also change port range by providing `--provider-min-port` & `--provider-max-port` options while running `stf local`
 Closing this issue assuming problem is fixed, since the reporter has not reported any progress.

Feel free to reopen this issue if you face similar problem.
  Is `stf local` running on the same machine as Android Studio?

Have you confirmed your ADB key in the STF UI?
 Do both users have unique ADB keys? Are both of them verified?
 Does his computer work with normal remote adb ('adb tcpip 5555' & adb
connect ip-of-device)?

On Friday, 6 November 2015, luxiaomai notifications@github.com wrote:

> Second user don't have key, no add keys dialog pops up after he run "adb
> connect 10.xx.xx.xx:7409".
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/170#issuecomment-154276721.
 @sorccu 
Currently, two users cannot have same ADB keys. But I think we should allow users to share keys.

A valid use case is when you will use STF APIs for test automation. For example, if you are running test from Jenkins slave using access token that Jenkins slave machine can be shared by many users.
 Allow how? How would we know who's trying to use it then?
 yeah, that we will need to figure it out. But I just realised that there will be use cases where user will be sharing adb-keys. I cannot think any good solution for now, but will keep this in mind.
 I think GitHub deploy keys behave in a very similar way. Each deploy key for every repository must be unique, since that's the only way they can know which repository it's for. And yes, it is super, super annoying with CI, but since even GitHub hasn't been able to solve that issue, it could be that it simply cannot be solved without modifying ADB's authentication mechanism, which would require modifying the adb binaries themselves, or tunneling the whole connection somehow (which wouldn't actually be bad for security with something like openssh, but would complicate usage).
 GitHub can and does partially solve the issue by providing alternate ways to authenticate (like personal access tokens), but since we're stuck with what the adb binary gives us right now, we can't do the same.
 yeah, this will be difficult.

And for problem with shared machine(Jenkins Slave) we can advise user to use access token of "bot" user instead of their own. And use same bot user for tests targeting on that machine.
  Well, this is a known bug which is already fixed in master branch. Looks like you have installed stf using npm and npm latest version is pretty old compare to master branch. Refer: https://github.com/openstf/stf/issues/117

You have two choices.
1 Add 'present' index manually in devices table
- Go to rethinkdb administrative UI (http://localhost:8080)
- Open Data Explorer
- Add index using query 

``` js
 r.db("stf").table("devices").indexCreate('present');
```
- Make sure your device table should look like below, check using this query.

```
r.db("stf").table("devices").info();
```

Output

``` json
{  
   "db":{  
      "id":"7195ff75-7ddf-49b5-99e9-64cebbd75da8",
      "name":"stf",
      "type":"DB"
   },
   "doc_count_estimates":[  
      0
   ],
   "id":"e4363c74-eaa3-42b6-b4d7-f019caed0bf6",
   "indexes":[  
      "owner",
      "present",
      "providerChannel"
   ],
   "name":"devices",
   "primary_key":"serial",
   "type":"TABLE"
}
```

2 Use master branch

You can find instruction [here](https://github.com/openstf/stf/issues/149#issuecomment-150489725)
 Most probably the problem is related to [this rethinkdb bug](https://github.com/rethinkdb/rethinkdb/issues/4694). I am now able to reproduce this with rethinkdb < 2.1.3

These are my findings with different rethinkdb versions.

2.1.1 - X
2.1.3 - O
2.1.4 - O
2.1.5 - O

The problem is because indexes in devices tables are being created parallel and only the last one is actually being created.
 Problem occurs only with older `rethinkdb`.

Now, you can run stf doctor command in order to confirm all the stf dependencies.
  > which makes me confused to understand difference between stf local and actual deployment.

STF is a distributed application which means it is supposed to be run on a cluster of computers in production environment instead of a single machine. stf local feature is developed just for development purpose. You are not supposed to use it in production environment.

In order to deploy STF app in production, you will need
1. A cluster of computers where you can connect your devices
2. A tool which can deploy, stf docker container in the cluster

There are many ways to do this but [STF's Deployment doc](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) suggests, [CoreOS + Fleet combination](https://coreos.com/). CoreOS is to make cluster and Fleet is run STF services inside cluster.

I highly recommend you to go through all the [CoreOS documentation](https://coreos.com/docs/) even if you don't plan to use CoreOS because that will give you an idea about computer cluster. After you finish reading these docs and if you reread the deployment doc, you will automatically understand everything.

> Do i need to install all the requirements explicitly on my ubuntu machine including rethinkdb ?

No, you do not need to install any thing on your ubuntu machine. All the required dependencies are already installed in docker image. You should consider reading [docker documentation](https://docs.docker.com/) regarding how docker works.

>  including rethinkdb ?

There are many ways you can create database (rethinkdb) cluster. You can use or not use docker, its totally your choice. https://github.com/openstf/stf/issues/163 might helps.
 Well, this is a known bug which is already fixed in master branch. Looks like you have installed stf using npm and npm latest version is pretty old compare to master branch.

You have two choices.
1 Add 'present' index manually in devices table
- Go to rethinkdb administrative UI (http://localhost:8080)
- Open Data Explorer
- Add index using query 

``` js
 r.db("stf").table("devices").indexCreate('present');
```
- Make sure your device table should look like below, check using this query.

```
r.db("stf").table("devices").info();
```

Output

``` json
{  
   "db":{  
      "id":"7195ff75-7ddf-49b5-99e9-64cebbd75da8",
      "name":"stf",
      "type":"DB"
   },
   "doc_count_estimates":[  
      0
   ],
   "id":"e4363c74-eaa3-42b6-b4d7-f019caed0bf6",
   "indexes":[  
      "owner",
      "present",
      "providerChannel"
   ],
   "name":"devices",
   "primary_key":"serial",
   "type":"TABLE"
}
```

2 Use master branch

You can find instruction [here](https://github.com/openstf/stf/issues/149#issuecomment-150489725)
 nice!
 @romitincedoinc 

Can you tell, which rethinkdb version you were using?
  This should be fixed in the master branch. See #138 for details.
  Because that's not how containers are supposed to work (although I'll admit that it is an almost religious issue). There should be only one process (+ possible worker processes) per container. You could argue that we should just put both of them inside the same container and use supervisor or something else to manage them, but I would just reply that you're doing it wrong, i.e. the _Virtual Machine_ way, not the _container_ way, so don't waste your time.

Also, having the DB and the app on the same server is not a proper, scalable deployment.

The [deployment guide](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) provides some examples. It's a bit heavy, yes, but it's meant to be that way.
 #122 might also help if you're not using docker for RethinkDB.
  Merging to openstf/adbkit#41.
  People always ask this, it's because you don't have GraphicsMagick
installed, or it's not in your PATH.

On Thursday, 29 October 2015, hemant4524 notifications@github.com wrote:

> When i press screenshot button press disconnect stf server connection.
> 
> Logs:
> Capturing screenshot
> INF/storage:temp 3724 [*] Uploaded "591ed406.jpg" to
> "/var/folders/_2/gtz250tn4ql569c0y733t8tc0000gn/T/upload_be05e340923862c495043ede59fd8e75"
> INF/device:support:storage 3728 [591ed406] Uploaded to
> "/s/image/6bc210e8-fd35-4333-b1e2-a2cfcd8ed991/591ed406.jpg"
> events.js:141
> throw er; // Unhandled 'error' event
> ^
> 
> Error: spawn gm ENOENT
> at exports._errnoException (util.js:874:11)
> at Process.ChildProcess._handle.onexit (internal/child_process.js:178:32)
> at onErrorNT (internal/child_process.js:344:16)
> at doNTCallback2 (node.js:439:9)
> at process._tickCallback (node.js:353:17)
> ERR/poorxy 3727 [
> 
> _] Proxy had an error Error: socket hang up at createHangUpError
> (_http_client.js:203:15) at Socket.socketOnEnd (_http_client.js:288:23) at
> emitNone (events.js:72:20) at Socket.emit (events.js:166:7) at
> endReadableNT (_stream_readable.js:903:12) at doNTCallback2 (node.js:439:9)
> at process._tickCallback (node.js:353:17) FTL/cli:local 3713 [_] Child
> process had an error ExitError: Exit code "1"
> at ChildProcess.
> (/Users/software/Downloads/DeviceTest/stf-master/lib/util/procutil.js:49:23)
> at emitTwo (events.js:87:13)
> at ChildProcess.emit (events.js:172:7)
> at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)
> INF/cli:local 3713 [
> 
> _] Shutting down all child processes INF/util:lifecycle 3715 [app001]
> Winding down for graceful exit INF/util:lifecycle 3716 [dev001] Winding
> down for graceful exit INF/util:lifecycle 3717 [proc001] Winding down for
> graceful exit INF/util:lifecycle 3718 [proc002] Winding down for graceful
> exit INF/util:lifecycle 3719 [reaper001] Winding down for graceful exit
> INF/util:lifecycle 3723 [_] Winding down for graceful exit
> INF/util:lifecycle 3720 [
> _] Winding down for graceful exit INF/util:lifecycle 3721 [_] Winding
> down for graceful exit
> INF/auth-mock 3721 [
> _] Waiting for client connections to end INF/util:lifecycle 3722 [_]
> Winding down for graceful exit
> INF/provider 3720 [
> 
> _] Gracefully killing device worker "591ed406" INF/util:lifecycle 3728
> [591ed406] Winding down for graceful exit INF/device:plugins:screen:stream
> 3728 [591ed406] Requesting frame producer to stop WRN/db 3717 [proc001]
> Connection closed INF/device:plugins:screen:stream 3728 [591ed406]
> Disconnecting from minicap service WRN/db 3718 [proc002] Connection closed
> INF/db 3717 [proc001] Connecting to 127.0.0.1:28015
> http://127.0.0.1:28015 INF/db 3718 [proc002] Connecting to
> 127.0.0.1:28015 http://127.0.0.1:28015 WRN/db 3719 [reaper001] Connection
> closed INF/db 3719 [reaper001] Connecting to 127.0.0.1:28015
> http://127.0.0.1:28015 IMP/device:plugins:group 3728 [591ed406] No longer
> owned by "hpatel@yopmail.com
> <javascript:_e(%7B%7D,'cvml','hpatel@yopmail.com');>"
> INF/device:plugins:group 3728 [591ed406] Unsubscribing from group channel
> "vb79K3IVRUubV2CtbBAl1A==" WRN/db 3723 [_] Connection closed
> INF/db 3723 [
> _] Connecting to 127.0.0.1:28015 http://127.0.0.1:28015 INF/provider
> 3720 [_] Device worker "591ed406" stopped cleanly
> INF/provider 3720 [*] Device worker "591ed406" has retired
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/156.
 Yeah, but if you get the `Error: spawn gm ENOENT` error it means GraphicsMagick is not installed. Otherwise it works fine, there has never been any other reason for broken images yet.
 Closing this issue as this is not the problem of this project. If you follow the README and install all the dependencies as per instructions, screenshot feature should be working properly.
  @vbanthia is correct.

Alternatively you can use an SSH tunnel, `socat` or some other way to make the port accessible.

For example you could run this command on the app server where `stf local` is running:

``` bash
ssh user@server -L 5037:127.0.0.1:5037
```

.. which makes the remote ADB server available on the same port on the app server. You wouldn't even need to use `--adb-host`. `adb forward` still wouldn't work globally, though. For that, the modified adb command is the simplest solution.
  We're using webpack and gulp for building.

First run `gulp clean` to get rid of the `build` directory.

After that, just running `stf local` will take care of rebuilding on the fly any front-end asset with webpack.
 @LiufxLucky365 if you want to develop you're supposed to use code from github, not from npm.
Grab your stf from https://github.com/openstf/stf.git
  Thanks!
  That's because the URL is http://localhost:7100 just like the README says.
 Are you following the README exactly? If not, you need to post every single command you ran, starting from `git clone`, or we can't help.
 Great!
  Look, just do it EXACTLY like the README tells you to do. Your setup looks like you did something way, way different. For OS X there's even a oneliner that installs all the dependencies (as long as you've got homebrew installed).
 Can you post at least the version of your software and also how you installed `node/npm`?

```
node -v 
npm -v 
brew -v
sw_vers
```
 Seriously, if you need to install from source, this is all you need to do:

``` bash
brew install rethinkdb graphicsmagick zeromq protobuf yasm pkg-config
git clone https://github.com/openstf/stf.git
cd stf
npm install
```

Now open a new shell and start rethinkdb with:

``` bash
# run in the "stf" folder
rethinkdb
```

If it complains that port 8080 is already being used, try:

``` bash
# run in the "stf" folder
rethinkdb --http-port 8090
```

And then simply:

``` bash
# run in the "stf" folder
bin/stf local
```

Or if you don't want to type `bin/stf` all the time:

``` bash
# run in the "stf" folder
npm link
```

And now you can run this from anywhere:

``` bash
stf local
```
 Sounds like your installation failed. Please follow the instructions in the README exactly. Alternatively, network errors during installation can break the it.
  @vbanthia researched this a bit in #166. Any chance you could attempt to verify his findings?
 @neofreko any update on the above?
 Closing this PR as problem was in `rethinkdb`. Above problem will occur if you are using rethinkdb < 2.13

Now, you can run `stf doctor` command in order to confirm all the stf dependencies. 
  I just tried this and it's 100% awesome. One thing though, the input seems to have slight transparency to it - depending on the columns you have active the positioning kind of makes it look like the column on the left on the previous row is the input placeholder value. It's a bit confusing. I would suggest dropping the transparency.

<img width="445" alt="screen shot 2015-11-14 at 4 08 09 pm" src="https://cloud.githubusercontent.com/assets/32509/11162549/ff7463ae-8ae9-11e5-8bc3-8e03e42b7f67.png">
 LGTM for merging if you fix the transparency thing.
 @sorccu 

The transparency problem is only with "device-not-usable" class. Since you are using fake-devices thats why you are having this problem. As you can see [here](https://github.com/openstf/stf/blob/master/res/app/device-list/device-list.css#L12) opacity for this class is being set as 0.8. And in css when you change opacity, it also changes maximum opacity for all the child elements. So even I set opacity for device note form, it will be only 0.8

Possible solutions:
1. Don't make it as child of table row (which will be too messy)
2. Instead of changing opacity, use something else to show device is not usable for "device-not-usable" class

Do you know any better solution?
 Could not come up with a great solution. Added a work around in commit https://github.com/vbanthia/stf/commit/d3c8d3d0f6e0890dd0bd863c68e772de0bee62f2. Using light gray font color in case of "device-not-available" class instead of opacity. This will solve the transparency problem.

![screen shot 2015-11-14 at 20 14 12](https://cloud.githubusercontent.com/assets/7875161/11163297/b3ccbbcc-8b0c-11e5-891b-ffb59f9fc21b.png)
 IMO that's a good solution, in fact per row opacity might potentially have been slowing down the rendering of the list a little. And I'm not actually using fake devices, I have a whole bunch of them but I mostly keep only one or two connected since I don't have a proper shelf at home (yet!).
 Looks good to me, feel free to merge with or without fixing that last nitpick of mine.
 Thanks, merging it.
  If you follow the README it will work just fine.
 Yeeeeah nope. It's all in the README. Good luck though.
  It's in the README. Just clone the repo and start from https://github.com/openstf/stf#building.
  Cannot reproduce.

Tried with:
- Windows 7 (Version 6.1.7601)
- Chrome 46.0.2490.80 m (Latest)
- IE 10.0.9200

On Chrome I was able to see English or any language without problems. 
IE also worked (at least the device list works fine; controlling the device has a bug so it doesn't).

Can you post a screenshot? Is your Windows edition special or somehow have some different font settings? Do you have an `adblocker`?
Try with disabling all the extensions in Chrome.
 One of my colleague also had the same problem in his windows machine, I don't know his environment details. But he fixed this problem by enabling DirectWrite flag for chrome.

These are the instructions to enable DirectWrite flag. http://www.tekrevue.com/tip/chrome-font-rendering-windows/
 Couldn't reproduce with neither toggling DirectWrite nor ClearType on Windows 7.
It could be the GPU, GPU drivers or ad-blocking.

@Tierney0115 can you try disabling all Chrome extensions?
 @Tierney0115 did you deleted Lato from the CSS or from your system fonts?
 @Tierney0115 which one? CSS or system fonts?
  The problem with remote debugging and proxying/load balancing is that the
only thing that uniquely identifies a device is the ip:port pair. "adb
connect" doesn't even send the hostname it's trying to connect to to the
server (i.e. there's nothing like the "Host" HTTP header). Therefore your
load balancer either needs to have as many ip addresses assigned to it as
you have devices, or you have to open a separate port for each device.
Also, ADB doesn't support IPv6. So while it's possible, it would be very
complex.

On Thursday, 22 October 2015, 竹逊 notifications@github.com wrote:

> if i want to use this feature through nginx, do i need to set tcp proxy?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/143#issuecomment-150099012.
 I think he wants to expose all devices via a single address, so that he
only needs to make the load balancer accessible.

On Thursday, 22 October 2015, Lenciel notifications@github.com wrote:

> For remote debugging you can read the google official docs first,
> especially the port forwarding section
> https://developer.chrome.com/devtools/docs/remote-debugging
> 
> And what do you mean by "use this feature through nginx"...Do you mean you
> want to deploy stf on real server (not run locally), and the web container
> you use is nginx? Then you will need a lot of public ip for this.
> 
> By the way...
> 
> Hi, i am really amazing about the remote debug feature
> 
> Generally you should not say you are amazing...it is the feature that is
> amazing.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/143#issuecomment-150099955.
  You're right. This was caused by #104, although only on some platforms (by mac and boot2docker were both perfectly fine). I've pushed a fix and the latest docker image should solve the issue. You can check #104 for more details.
 By the way, if you use docker, your host system doesn't need to have zeromq installed. It's included in the docker image.
  You're right, this is caused by a relatively recent change (well, ~2-3 months) to the way ports are passed to the workers.
 This should now be fixed.
 Yes I know. I believe it's a bug in our code. Overall I'm not very happy with the provider unit right now, it needs a rewrite.
 I would look into why the workers are restarting so much in the first place. It's possible that there's still a bug in our code, but if you encounter the bug after only 1 day, then the workers must be dying practically all the time. I'm pretty sure you said you were using an ODROID-XU4, but it's difficult to say anything without precise details about your system. You should tell us everything about your power adapter, the development board, the OS it's running, the output from `uname -a`, whether you're using a USB hub (and if so, which hub and which power adapter), and the USB cables you're using.
 I'm not at home right now but I'm on Arch Linux and I'm pretty sure the kernel version is 3.10.92 or something. You might want to look into updating the kernel, there are USB-related fixes in basically every release. I'm also running Linux [4.2](http://odroid.com/dokuwiki/doku.php?id=en:xu4_building_kernel) on one of my other XU4s. It took about 10 minutes to crosscompile on a quad core i7 from 2014 or so. So far I have not done extensive testing with the newer kernel, but I would definitely give it a try given the amount of problems you have. Hardkernel will also attempt to provide Linux 4.4 once it becomes stable.
 I only have a single Android 6.0 device, a Nexus 9. It's running perfectly on my Arch Linux XU4, and it's connected directly to one of the USB 3 ports.

While we should certainly make sure that the `--screen-port` problem doesn't occur at all, getting the error means that the worker is dying practically all the time. Even if the error was fixed, the device would be practically unusable, since it would just die in the middle of a user session. Usually it indicates a weak USB connection, or that one of the services the worker requires isn't working properly. Even if you see the devices with `adb devices`, they could be losing connectivity momentarily.

I would suggest doing the following on the problematic provider:
1. Run `nc localhost 5037`
2. Write `0012host:track-devices`, hit enter and keep watching
3. Start the STF provider on that machine, and save the log output somewhere
4. If you start getting output from track-devices often, it means that some devices are getting dropped on ADB level. This could also be caused by bad socket handling on our side, causing ADB to reset the connection, though.

If it doesn't seem to work, I would need to see the whole log from the start, all the way from `stf provider ...` to until you start getting the `--screen-port` error. For an even more informative log, you can try setting the DEBUG environment variable to `*`, like this: `DEBUG=* stf provider ...`. You can find my email address in my profile if you'd rather send it privately.

You can also try running ADB with `ADB_TRACE=all adb start-server` to get more output from ADB side. You'll get a huge amount of information, though.

Anyway without proper logs I can only take random guesses, since it's working fine for me.

I would definitely try updating the kernel too. It's a relatively low effort thing to do, and might actually end up fixing the issue.
 Note that I don't necessarily mean that there's a bug in the Linux kernel. However, many USB devices/chips have vendor or even device specific workarounds hardcoded in the kernel. Since Linux 3.10 is originally from 2013, it could be that it simply doesn't have the necessary workarounds for your hardware. And then your Android 6.0 devices are somehow causing the issues to appear, that may otherwise have been fixed in newer kernels.
 It's usually caused by manufacturer modifications of the private Android APIs minicap uses. I'm not sure if that's what happening in this case, I would have to see the logs. Anyway, it seems to mostly happen on Chinese devices, for some reason. Perhaps they like to customize their ROMs more. For other devices, I would say that overall less than 1% have this problem. Usually, fixing a problem on one device from the same manufacturer makes all other devices from that manufacturer work too, but there have been some exceptions.

Fortunately, though, it's usually possible to find some kind of a workaround for almost any device. However, it's almost impossible to do it without having access to the device. Furthermore, temporary access is not usually enough. If we lose access to a device, then it might stop working again at some point since we can't test it anymore.

Since the project is open source, we don't have the money to buy every device in the world. If you'd really like to get these devices working, consider becoming a [hardware sponsor](https://github.com/openstf/stf#sponsors-wanted).
  Check `stf local --help` and `stf auth-mock --help`.
  Added some comments, can you take a look? Might have more comments later
 No need for a new PR, just update your branch and the changes will show up here.
 I made some changes in https://github.com/openstf/stf/tree/hogehoge-banana-s3insteadoftmp. I don't have S3 set up, can you check that it still works?
  Authentication is provided by small, separate web apps. Use one of the units in https://github.com/openstf/stf/tree/master/lib/units/auth as an example and make your own. And since they're separate apps, as long as yours does the same thing (forwards to STF with a signed JWT token in query parameters), it doesn't even need to be written in JS. Use the source code as your guide.
  I'm not completely sure what you mean, but if you're using a remote device, the remote address _is_ the serial as far as ADB/STF are concerned. So, in your case it would be `"172.18.176.103:5555"`.

By the way using remote devices with STF is not recommended. The ADB remote protocol is very slow, it will be many times slower than just using USB directly.
 Ok, well, knowing that is actually kind of tricky... it's because there are several independent components that update the device information, and whether a device is usable or not depends on several different pieces of information. The only parts in the system that know the full state of a device are a) the client browser, and b) the device worker itself. So, you have to implement the same logic in your system.

The logic is here: https://github.com/openstf/stf/blob/master/res/app/components/stf/device/device-service.js#L56
 No. Everything inside the `res` folder runs on the client side only.
 Why can you not just use the code I linked? All the parameters (except
"using") are available in the database...

On Friday, 16 October 2015, LiufxLucky365 notifications@github.com wrote:

> i find what i need from the console output:
> 
> INF/provider 3444 [_] Found device "172.18.176.138:5555" (offline)
> INF/provider 3444 [_] Registered device "172.18.176.138:5555"
> INF/reaper 3443 [reaper001] Device "172.18.176.138:5555" is present
> INF/provider 3444 [_] Device "172.18.176.138:5555" is now "device" (was "offline")
> INF/device:support:push 3463 [172.18.176.138:5555] Sending output to "tcp://127.0.0.1:7116"
> INF/device 3463 [172.18.176.138:5555] Preparing device
> INF/device:support:sub 3463 [172.18.176.138:5555] Receiving input from "tcp://127.0.0.1:7114"
> INF/device:support:sub 3463 [172.18.176.138:5555] Subscribing to permanent channel "_ALL"
> INF/device:support:properties 3463 [172.18.176.138:5555] Loading properties
> INF/device:support:abi 3463 [172.18.176.138:5555] Supports ABIs armeabi-v7a, armeabi
> INF/device:resources:service 3463 [172.18.176.138:5555] Checking whether we need to install STFService
> INF/device:resources:service 3463 [172.18.176.138:5555] Running version check
> INF/device:resources:service 3463 [172.18.176.138:5555] STFService up to date
> INF/device:plugins:service 3463 [172.18.176.138:5555] Launching agent
> INF/device:plugins:service 3463 [172.18.176.138:5555] Launching service
> INF/device:plugins:service 3463 [172.18.176.138:5555] Agent says: "Listening on port 1090"
> INF/device:plugins:service 3463 [172.18.176.138:5555] Agent says: "InputClient started"
> INF/device:plugins:display 3463 [172.18.176.138:5555] Reading display info
> INF/device:plugins:phone 3463 [172.18.176.138:5555] Fetching phone info
> INF/device:plugins:identity 3463 [172.18.176.138:5555] Solving identity
> INF/device:plugins:solo 3463 [172.18.176.138:5555] Subscribing to permanent channel "x/7BGbNJ2M+jTdnf9l9ehmN2x4E="
> INF/device:plugins:screen:stream 3463 [172.18.176.138:5555] Starting WebSocket server on port 7400
> INF/device:plugins:browser 3463 [172.18.176.138:5555] Loading browser list
> INF/device:plugins:browser 3463 [172.18.176.138:5555] Updating browser list
> WRN/device:plugins:browser 3463 [172.18.176.138:5555] Unmapped browser "com.snda.wifilocating"
> WRN/device:plugins:browser 3463 [172.18.176.138:5555] Unmapped browser "com.baidu.searchbox"
> INF/device:plugins:mute 3463 [172.18.176.138:5555] Will not mute master volume during use
> WRN/device:plugins:data 3463 [172.18.176.138:5555] Unable to find device data { serial: '172.18.176.138:5555',
> 
> I can see the new device's life cycle. So i think i can insert hook code
> in the nodejs's server side, write these in a db, so i can share the
> devices' state with my platform. Do you think this plan can be realized ?
> 
> Do you have another better ?
> 
> sorry for disturb you so much....
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/131#issuecomment-148661913.
 The JSON you posted contains the `present`, `status`, `ready` and `owner` fields. You can therefore do the equivalent of  `data.usable = data.present && data.status === 3 && data.ready && (!data.owner || data.using)` in your own code, in any language (although you'll have to remove the "using" condition since there's no property for it).
 Just read the data from the database like you did earlier. You can use
RethinkDB changefeeds (https://rethinkdb.com/docs/changefeeds/javascript/)
to watch for updates in realtime.

On Friday, 16 October 2015, LiufxLucky365 notifications@github.com wrote:

> The JSON i posted ? i think your mean is that i insert some code into the
> function sync, so when the client side sync the device state to the server,
> it also sync the state to my own platform. is it right ?
> 
> can you tell me when the function sync execute ?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/131#issuecomment-148676132.
 - `owner` is null when no one is using a device, otherwise an object describing the owner
- `ready` is true if STF has finished initializing the device (i.e. when you see the "Fully operational" message in the logs)
- `present` is supposed to be true if the device is physically connected to the system. HOWEVER, it can also be false if a device stops sending a heartbeat message to the system for some reason (like process death) even if the device is still physically connected. For example, if a device shuts down, it will still be physically connected but the system won't know about it, so it'll have `present: false`. If the system starts receiving heartbeat messages from that device again, then it's set to `present: true` again.
- `status` is one of https://github.com/openstf/stf/blob/master/lib/wire/wire.proto#L159. `OFFLINE` is different from `present`, if a device is `OFFLINE` it usually means that the ADB connection is either still being initialized or could not be established. If a device stays `OFFLINE` for a long time, it usually means that the system doesn't have enough resources to handle that many USB devices, or that there is not enough power available.
  We recommend systemd for that.
  We just modify the DB directly since RethinkDB is pretty easy to use and
the notes almost never change. It will become editable if someone
implements it, personally I don't have time for it right now.

The original intention was to show which ones of our devices had
carrier billing accounts available.

On Thursday, 15 October 2015, Vishal Banthia notifications@github.com
wrote:

> Device List has a "Notes" column. I don't know what was the real intention
> behind this feature, but I can say it will be good to write notes or
> remarks for a device.
> 
> Currently, it is only ReadOnly and there is no way to update this from STF
> UI. Only way is to update DB directly.
> 
> Can you tell me what was the real intention behind this column? And is
> there any plan to make it editable?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/124.
  Dear all,

I've been exploring and wondering how to remove those devices that we know we'll no longer be using for testing in our STF interfaces. How could we remove their log from the app in order to clear and update the interface with the used and existing devices?

Many thanks,

Marco
 Hi,

You have to open the RethinkDB admin UI, usually localhost:8080. Go to the
data explorer and run:

``` js
r.db('stf').table('devices').get('SERIAL').delete()
```

Where SERIAL is the device serial (you can toggle it on in the detailed
device list).

On Thursday, 15 October 2015, Marco Antonio Martín notifications@github.com
wrote:

> Dear all,
> 
> I've been exploring and wondering how to remove those devices that we know
> we'll no longer be using for testing in our STF interfaces. How could we
> remove their log from the app in order to clear and update the interface
> with the used and existing devices?
> 
> Many thanks,
> 
> Marco
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/123.
 Thank you very much, @sorccu ! It worked perfectly. It's amazing to continue learning and developing with this beautiful tool STF is.
  With environment variables: https://github.com/openstf/stf/blob/master/lib/db/index.js#L16
 If it's server-side code, then yes.

On Thursday, 15 October 2015, LiufxLucky365 notifications@github.com
wrote:

> Yes, thanks. I just find that.
> 
> Another small question, if i change the nodejs code under
> '/usr/local/lib/node_modules/stf/', and restart the STF, do the change code
> work ?
> 
> Thanks.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/122#issuecomment-148258287.
 Yes, it's being used all the time because that's what the official deployment guide uses (although docker sets the environment variable). My best guess is that your firewall is blocking that port. Might want to check your iptables, ipfw or similar.
  In general all Android-based systems like MIUI, Amazon's Fire OS, CyanogenMod etc. are fully supported (with the exception of Firefox OS). However, because we use private APIs behind the scenes, some individual models don't work. I don't have an EMUI device to test with right now so I can't say anything about that, but I know that all versions of MIUI work fine. For example, I have a Redmi Note 2, Meizu M2 Note, and a ZTE V5 PRO right here, and they all work just fine.

However, I believe Redmi Hongmi is one of the phones that does not work right now, so if that's the one you tried, perhaps try something else instead.

Also, by "failing to connect" I assume you are getting some kind of errors in the logs. Could you perhaps post the logs here? Feel free to remove any identifying information first, though.
  Thank you!
  The UI is not functional yet, we're working on it.
  I am aware of this bug, but have never been able to reproduce it myself. Anyway it should be easily solvable for doing an `indexWait()` in `migrate`. Are you using an HDD or an SSD on that machine?
 This should be fixed now, in 66fbadbd5d3ba39d4ae38d73cc8159ec521ddc9b. Commit message was cut short because the ticket number accidentally went on a new line, and because it began with a #, it became a comment.
  It's our own design, but we had it made at a company that specializes in making office furniture/design. We're planning on open sourcing the design as well, but I haven't had time to clean up the plans yet. The original ticket is #1, so I'm closing this one as a duplicate for now.
 If you _really_ need to buy one directly, I could probably have one made for you, but it would be very expensive. I'd have to think about it a bit more, but we're talking somewhere around $2000-3000 for a single shelf that houses 50-56 devices. Shipping would be very expensive as well. And that's without PCs, hubs, switches and cables.
  Yeah, that's the way to do it right now. As a side note, we need to work on the `--help` output, many of the descriptions are not actually very helpful to beginners right now.
  Is it possible that your zeromq library might be super old? 3.x or 4.x should work fine.
 If you're on Ubuntu 12.04, they only seem to have an old version available. On newer versions you should be using libzmq3-dev (or similar on different distributions). While we could catch and ignore the exception thrown by the old version, I'm not sure if we care enough about supporting ancient software.
 The keepalive options have now been made optional, so this should be "fixed" as well. However, what I said earlier still stands. Ubuntu 12.04 is simply too old, we're not going to spend much time fixing it.
  Build from master, 1.0.10 isn't compatible yet.

On Tuesday, 13 October 2015, 竹逊 notifications@github.com wrote:

> Hi, i use nexus 5 and install android 6.0 on it, but when i start stf, i
> find the error below
> can you give me some suggestions to fix the problem? thank you
> 
> INF/device:plugins:service 19293 [0642e51a005db76f] Launching agent
> FTL/device 19293 [0642e51a005db76f] Setup had an error TimeoutError:
> operation timed out
> at Timer.listOnTimeout (timers.js:119:15)
> From previous event:
> at /home/zhuxun/COMPANY/stf/stf/lib/units/device/plugins/service.js:80:14
> at processImmediate as _immediateCallback
> From previous event:
> at openAgent
> (/home/zhuxun/COMPANY/stf/stf/lib/units/device/plugins/service.js:77:10)
> at /home/zhuxun/COMPANY/stf/stf/lib/units/device/plugins/service.js:699:12
> at SerialSyrup.ParallelSyrup.invoke
> (/home/zhuxun/COMPANY/stf/stf/node_modules/stf-syrup/lib/parallel.js:54:24)
> at /home/zhuxun/COMPANY/stf/stf/node_modules/stf-syrup/lib/serial.js:43:33
> at process._tickCallback (node.js:355:11)
> FTL/util:lifecycle 19293 [0642e51a005db76f] Shutting down due to fatal
> error
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/108.
 Duplicate of #105.
  The protobufjs update breaks something when a decide is connected. Will look into it later.
 Old, blocking change is in #120
  It already works, but you have to build from master or use the :latest tag
if you're using docker.

On Saturday, 10 October 2015, 竹逊 notifications@github.com wrote:

> Hi, android 6.0 comes , is there any schedule to support android 6.0 ?
> i think maybe to build an android 6.0 minicap.so will work?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/105.
  Nice, but it seems kind of annoying to have to call a separate method every time you want to create a socket. I would perhaps prefer something like this:

``` js
var push = zmqutil.socket('push')
```

instead of

``` js
var push = zmq.socket('push')
zmqutil.setTCPSocketOpts(push)
```

and then zmqutil would be:

``` js
module.exports.socket = function() {
  var sock = zmq.socket.apply(zmq, arguments)
  sock.setsockopt(zmq.ZMQ_TCP_KEEPALIVE, 1)
  sock.setsockopt(zmq.ZMQ_TCP_KEEPALIVE_IDLE, 300)
  return sock
}
```
 Looks good to me, but I'll have to run it first to make sure things still work. Will merge tonight.
 One thing: there may be some unused `require('zmq')` calls left behind now since almost everything uses zmqutil.
 Thanks!
 Turns out this breaks at least on latest stable CoreOS when using `--net host` with docker. We also have a separate report of the same thing in #139. It looks like the value for ZMQ_TCP_KEEPALIVE_IDLE doesn't make sense, but pending further investigation I have simply made the keepalive options optional in 8e8f2d17b7.

Now you have to export or set environment variables to get the functionality:

```
ZMQ_TCP_KEEPALIVE=1 ZMQ_TCP_KEEPALIVE_IDLE=300 stf local
```

or

```
docker run \
  -e ZMQ_TCP_KEEPALIVE_IDLE=1 \
  -e ZMQ_TCP_KEEPALIVE_IDLE=300 \
  openstf/stf:latest stf triproxy ...
```

**EDIT: Timeouts are in seconds. Reduced value form 30000 to 300. The value is just an example, try a lower value if needed.**
 Yeah, but it looks like ZMQ_TCP_KEEPALIVE_IDLE actually does this:

> ZMQ_TCP_KEEPALIVE_IDLE: Override TCP_KEEPCNT (or TCP_KEEPALIVE on some OS)

and then

> TCP_KEEPCNT (since Linux 2.4) The maximum number of keepalive probes TCP should send before dropping the connection. This option should not be used in code intended to be portable.

That seems kind of different than we want. Looks like these seems more appropriate:

> TCP_KEEPIDLE (since Linux 2.4)
>        The time (in seconds) the connection needs to remain idle
>        before TCP starts sending keepalive probes, if the socket
>        option SO_KEEPALIVE has been set on this socket.  This option
>        should not be used in code intended to be portable.
> 
> TCP_KEEPINTVL (since Linux 2.4)
>        The time (in seconds) between individual keepalive probes.
>        This option should not be used in code intended to be
>        portable.
 Yeah, seems to be that way: https://github.com/zeromq/libzmq/commit/d9f32611adcb2a3c2c46748b16056def10391192

Either way, it looks the the values for `setsockopt()` are supposed to be seconds, not milliseconds.
  It's because you didn't install GraphicsMagick. You need to have all the requirements installed or it's not going to work.
 Well, technically you can use method you want, as long as the `gm` binary can be found in your `$PATH`.
  Yes, see [doc/DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md).
  It will take time to review this PR because it is so big.
 Getting a `WARNING: Tried to load angular more than once.`
Be sure to not include angular again since its already in the global namespace.
 I think I would do something like this instead of polling every minute. It's not necessarily the best way though. Also, make sure to read all the way to the end.
1. Add `lib/units/device/plugins/reserve.js`
2. In there, start listening for a `ReserveUpdateMessage`, and send a `ReserveUpdateRequestMessage` when the device worker loads (just a sample name)
3. `processor` receives it, loads the full schedule for that device from the database, and a `ReserveUpdateMessage` back to the device with the details
4. The device worker wait for the nearest reservation, if any.
   - By either setting a timeout for the nearest job - 10s, and then kicking out whoever is using the device (if anyone) and make the scheduled user the owner, `setTimeout()` isn't super accurate so it should trigger a bit earlier (and it won't do much harm)
   - OR perhaps instead of `setTimeout`, always have a `setInterval` running in the background in the device process (perhaps checked once per minute). When the callback triggers, check the internal state if the next reservation is closer than the next internal. If so, kick out current user and make the scheduled user the owner.
5. If a new reservation is made, send a new `ReserveUpdateMessage` with the full schedule to the device channel
   - Update internal in-memory state
   - Clear `setTimeout` or `setInterval`, run a check immediately, and set up new timers

Step 5 could be made easier if we handled messages from the application side in the processor. That way you could just send a tiny message to the processor and it would load and send a full `ReserveUpdateMessage` to the device channel. However since it's not possible right now, what you'd probably have to do is to create the full `ReserveUpdateMessage` in the `websocket` or `app` unit, and then send it as-is to the processor.

HOWEVER, I like having the reservation functionality completely separate from the device process like it is in your patch (reaper style). It makes it easier to manage. It would be best if you could adapt the steps in your `scheduler` unit instead. You could then even use RethinkDB's `.watch()` in the `scheduler` unit to load schedule changes in real time, and send `ReserveUpdateMessage` to appropriate devices when necessary. That you you wouldn't necessarily have to send a separate message from the `websocket` or `app` unit to the `scheduler` unit, it would automatically see all changes.
  Haven't seen this problem before, but like you said we only use OS X for development. Please keep us updated if you find a solution.
 Great, thanks for doing the research! I can say that we have never had this exact same problem, but then again we've only used CoreOS so far, which I suppose may have different defaults. It would be great if others could verify that your solution works for them.

Furthermore, it sounds like it would be good to add the options to all ZMQ sockets, not just the subscriptions. I will look into adding your suggested patches into the application code, but it may take a while since I am somewhat busy right now. I would be happy to accept a pull request, though.
  You'd have to take the auth-mock service unit and modify it with LDAP options. You can check `stf auth-ldap --help` or #47 for guidance. I'm closing this one as a duplicate of #47 for now.
  Yes, but due to ADB USB protocol overhead, it's super slow and unreliable. It's because the protocol sucks and not something we can really fix. When running locally, you can use `stf local --allow-remote`, but then you will not be able to use the demote debugging functionality, as STF would confuse the fake device with a real one and try to set it up, but get confused because the same device is connected twice.
  Because you're getting a HTTP 502 error, it means that your request arrived to nginx, but it was unable to connect to the backend server. The backend server in this case being `stf-storage-plugin-apk`. Either your nginx.conf is wrong, or you don't don't have `stf-storage-plugin-apk@.service` running.
 Looks like you forgot to replace the storage URL somewhere. It's trying to connect to `stf.example.org`.

All command line options are in `lib/cli.js`. The `--save-dir` command line argument translates to the saveDir option in JS code. But it doesn't look like you are having problems with the upload. It seems to me it's uploading just fine, but then when it tries to access the manifest via the apk plugin you hit that error.
  You have to build and install the latest master. NPM has not been updated yet.
 I know that at least emulators don't work, since they don't expose any linux touch devices. It should be doable but we haven't really focused on that. Not planned currently unless someone convinces us.
  Good catch. Unfortunately it looks like pull-left might break the layout of the dropdown:

<img width="146" alt="screen shot 2015-09-28 at 10 49 33 pm" src="https://cloud.githubusercontent.com/assets/32509/10137184/40fffa26-6633-11e5-953f-ddf053e2f484.png">
 I'm not sure if I get it, why are you running npm link every time? To compile the client-side JS?
 It uses the built resources if they exist, otherwise they're compiled on-demand and recompiled automatically as you change files. Just run `gulp clean` first to get rid of the generated artifacts.
  There was a bug. If you build from master now, it should work with `stf local serial1 serial2`.
  Nice, I will merge this if you address my comments. Most of them are simple text changes.
 Sorry I'm a little busy right now but I'll check this over the weekend :(
 Thanks! I will ask @gunta if he might be interested in styling it a bit more.
  Thank you, this is very interesting. Have you tried this on an older device yet (2.3)?

Also could you remove the `console.log()`s?
 @codeskyblue we don't have "Refresh" in any part of stf because everything is realtime.

Could you implement it as a realtime monitoring feature (this will need implementation on the device side, just like the rotation watcher).
  Yes, by using `stf local SERIAL_OF_YOUR_DEVICE_HERE`. You can get the serial from STF's device list,  running `adb devices` or just from going through STF's output.
  There can be many reasons. It's possible that you didn't enable USB debugging yet. It's also possible that the USB connection is too weak for some reason, try a different port or cable.
 Does it make any difference if you upgrade to latest Node 4.x?
  Thank you!
  Your assumptions are correct, and `--storage-url` goes to storage-temp. One thing though is that your route is called "newprovider" but in your browser it's "remotehost". However, since you're getting a gateway timeout, I think you actually have them correct in your real configuration. When you get a gateway timeout, it means that nginx was unable to connect to the backend server. So basically if you have `proxy_pass http://PUBLIC_IP_OF_PROVIDER:$port/;`, then your nginx server isn't able to connect to the PUBLIC_IP_OF_PROVIDER. It means that either nothing is running on that port, the port is blocked/firewalled or that your webserver can't access that IP at all.

Two things:
1. Make sure `iptables` on the new provider isn't very restrictive, it needs to have a whole bunch of ports open. Might be worth disabling iptables just to see if that's the issue.
2. I don't think you did this, but just in case: even though the option is called `--public-ip`, it actually means "public within your network" (i.e. an internal IP all of your users are able to access). While a real public IP might also work, you'd have to do a lot of extra work setting it up and latency would suffer.
 Great! Note that you can set up a firewall if you want, but you'll need to make sure the range between `--min-port=15000` and `--max-port=25000` is open. You can use a smaller range if you wish.
  The request goes through WebSockets. If you look at the picture [here](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md), the message flows as follows:
1. Browser sends a WebSocket message
2. One of the `websocket` units receives the message and translates it to Protocol Buffers
3. The `websocket` unit sends the message via PUSH to the app side `triproxy`'s PULL
4. The app side `triproxy` takes the message as-is and randomly forwards it via DEALER to one of the `processor` DEALERs
5. The `processor` doesn't do anything yet (although it could if necessary), it simply forwards the message via DEALER to the device side `triproxy`'s DEALER
6. The `triproxy` takes the message as-is and uses PUB to publish the message the the device's channel (which is included in the message)
7. The `dev` unit that is listening on that channel receives the message via its SUB.
8. If the device is in a group, it leaves that group (and clears its in-memory state)
9. The `dev` sends a GroupLeave message and sends it via PUSH to the device side `triproxy`
10. The `triproxy` takes the message as-is and randomly forwards it to one of the `processor`'s DEALEREs
11. The `processor` receives the message, reads it, and modifies the database to remove the owner from that device
12. The `processor` forwards the message via DEALER to the app side `triproxy`'s DEALER
13. The `triproxy` receives the message and PUBs it to all the `websocket` units
14. All the `websocket` units receive information that the device no longer has an owner
15. The `websocket` units emit a WebSocket message to all the connected browsers
16. The browsers receive the message, update their internal state in JavaScript and re-render the UI if necessary

I'll admit that's a bit complicated, but it makes the system more scalable since you can easily increase the number of `processors`, `websockets`, and if necessary, `triproxies` as well. Nearly all internal communication in STF works this way.

If you remove the owner directly from the database, you skip step 8, and the device doesn't know it's no longer supposed to be in a group, since that information is also stored locally in memory. It will time out (i.e. automatically leave the group) after 15 minutes of inactivity, though, so it should eventually become usable.
 Also we don't actually use `RotationWatcher.apk` in STF. It's a companion program for `minicap` in case you want to use it by itself :) Otherwise it's very nice.
 Nice graph, perhaps we could add it to `README` or `DEPLOYMENT`.
 @LiufxLucky365 having to wait for timeout is a different issue, open a new ticket for it.
 @LiufxLucky365 actually its a different problem.
A) luisxiaomai wants a way to stop all the devices on user logout (we don't have a sign-out UI yet).

B) You want to stop the devices being used by your users because they close the browser directly. 

Adding logout support will not fix your issue because your users will still be closing the browser directly, thus not logout. 
What could fix the issue for your users could be: 1) lower the timeout to something like 30 seconds, or 2) add an option to release the devices on `window.close`.
  The hardware guide exists for a reason. Once you scale past just a few devices, you WILL run into problems unless you know what you're doing. At the very least, get a powered USB hub (with enough power! Most powered USB hubs are actually only able to support 3-4 devices simultaneously). If you are in China, I would recommend the ORICO brand. Our recommended hub is essential a rebrand of an ORICO USB 2.0 hub with BC 1.2 support. For example, [this hub](http://www.aliexpress.com/store/product/2014-New-Design-ORICO-BH7-U3-BK-ABS-7-Ports-USB3-0-BC1-2-Charging-HUB/105327_2026659970.html) should be OK. You should have more options on Chinese sites, though.
  I think it's good, I added some feedback. Overall, though, our whole screenshot section needs way more love than it's receiving right now.
 @codeskyblue Thank you. Before merging this, I have some UX-related questions.

There are more than one way to do this, so want to make sure we choose the best way.

A) Take `X` shots every `1` second, fixed, default `50` shots (your PR)
B) Take shots every `1` second, for `X` seconds long, default `50` seconds long (same, just different wording)
C) Take shots every `X` milliseconds, for `Y` seconds long, default `1000ms` for `50` seconds long

If we later add `screenrecord` (movie) capabilities, it would be in seconds, so `C` is more consistent with this.

We don't want to overcrowd the UI with buttons for features not used as often. 
In this case a [dropdown](https://angular-ui.github.io/bootstrap/#/dropdown) button fits well with this.

```
[Take Screenshot Continuously][v]
|
> Every [1000] ms
> For [50] seconds long
```

It also would be nice to save these values with the `SettingsService` so the user doesn't have to enter the values every time.
 This branch is outdated, if you want to use it, rebase it with master branch.
  Not yet.

On Tue, Sep 15, 2015 at 3:04 PM, shengxiang notifications@github.com
wrote:

> I look the docs, but didn't found any keyword about api.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/80.
 Duplicate with https://github.com/openstf/stf/issues/38
  I'm not sure if that's a bug - you're just using ImageMagick instead of GraphicsMagick. I'm worried that this patch would break the app for GraphicsMagick users.
 I will close this pull request for now since it would break `gm`, but in the future we might add a command line option for choosing gm/imagemagick manually.
  You have a crappy USB host controller and/or USB hub if you're using one. It's disconnecting so much that STF runs out of ports and fails to even put them back into the pool. That's a bug, but even if we fixed it your system wouldn't be usable. If you're using a hub you're most likely just going to have to throw it away, it's worthless. I recommend reading the troubleshooting section in our README and possibly our hardware recommendations, too.

We've seen the problem before when some guys scavenged random parts from their dead PCs and tried to put a provider there. USB is NOT easy once you have more than a few devices connected.
 And it could also be caused by crappy USB cables. Just go through the troubleshooting section, we have encountered every single issue listed there.
  Node 4.0.0 was released two days ago, we still don't support it.
Try to use the previous node 0.12 version until we add support for the new node.js.
 Actually Node 4 is supported since a few weeks ago, you don't have to modify package.json. We're currently developing with 4.1.2. And please don't update random modules, there's a reason why some of them are not using their latest versions. The error you're seeing is #106.
  Hi,

You seem to be using my old rethinkdb image. I made it when there was no official rethinkdb image available yet, and we are not using it anymore. It's not supposed to be in our docs, how did you find it? I won't remove it in case someone's still using it, but I just added deprecation notice to the repo to prevent this from happening again.

It's possible that your connection problems are caused by the driver being too new for the old image, but more likely it's a problem with the `--canonical-address` flag.

Additionally, with your current config you'll lose your data when the container shuts down.

Here's our unit (but you may want to at least update the rethinkdb version):

``` systemd
[Unit]
Description=RethinkDB
After=docker.service
Requires=docker.service

[Service]
EnvironmentFile=/etc/environment
TimeoutStartSec=0
Restart=always
ExecStartPre=/usr/bin/docker pull rethinkdb:2.0.4
ExecStartPre=-/usr/bin/docker kill %p
ExecStartPre=-/usr/bin/docker rm %p
ExecStartPre=/usr/bin/mkdir -p /srv/rethinkdb
ExecStartPre=/usr/bin/chattr -R +C /srv/rethinkdb
ExecStart=/usr/bin/docker run --rm \
  --name %p \
  -v /srv/rethinkdb:/data \
  -e "AUTHKEY=YOUR_AUTHKEY_HERE" \
  -p 8080:8080 \
  -p 28015:28015 \
  -p 29015:29015 \
  rethinkdb:2.0.4 \
  rethinkdb --bind all --canonical-address ${COREOS_PRIVATE_IPV4} \
    --cache-size 8192
ExecStop=-/usr/bin/docker stop -t 10 %p
```

Note that we are NOT running the ambassador on the database host itself, although you can certainly do it that way if you like.

Alternatively if you find specifying the `--canonical-address` annoying, you could just use host networking and it should bind to the right address.

``` systemd
[Unit]
Description=RethinkDB
After=docker.service
Requires=docker.service

[Service]
EnvironmentFile=/etc/environment
TimeoutStartSec=0
Restart=always
ExecStartPre=/usr/bin/docker pull rethinkdb:2.0.4
ExecStartPre=-/usr/bin/docker kill %p
ExecStartPre=-/usr/bin/docker rm %p
ExecStartPre=/usr/bin/mkdir -p /srv/rethinkdb
ExecStartPre=/usr/bin/chattr -R +C /srv/rethinkdb
ExecStart=/usr/bin/docker run --rm \
  --name %p \
  -v /srv/rethinkdb:/data \
  -e "AUTHKEY=YOUR_AUTHKEY_HERE" \
  --net host \
  rethinkdb:2.0.4 \
  rethinkdb --bind all \
    --cache-size 8192
ExecStop=-/usr/bin/docker stop -t 10 %p
```
 Also... if you do set an auth key, you'll have to open the web UI the first time and run

``` javascript
r.db('rethinkdb').table('cluster_config').get('auth').update({auth_key: 'newkey'})
```

As per https://rethinkdb.com/docs/security/. It used to be possible to do it from the command line more easily.
 Our units have the `127.0.0.1` you removed and they work fine. Nginx runs in a docker container on a separate host, but that shouldn't matter.
 Ok I went through our units and it looks like I have made a mistake with the example nginx configuration. We are actually using two nginx instances. One of them is on a separate server, and the other is on the same server as the app units with `--net host` enabled, and it's referencing `127.0.0.1` in the config files. That's why it works for us. I'll fix up the documentation later. I think the best option is to remove the 127.0.0.1 for now as you've done.
 I have updated the documentation to remove 127.0.0.1 and added an example rethinkdb.service.

As for the screen not showing up, I think looking at your Chrome developer tools should prove more useful. Go to the network tab, filter by WebSockets and see if something happened with the screen WebSocket.

@MichaelMadsen You can also get rid of the https error by giving the appropriate units `-e NODE_TLS_REJECT_UNAUTHORIZED=0`.
 Done.
 Could you show your nginx config?
 Nice catch! I didn't spot it either...

Btw I added `NODE_TLS_REJECT_UNAUTHORIZED=0` to the docs as well. Let's try to make them as complete as possible now.
 Great!
 Not necessarily, it's certainly possible. However we provide no instructions for that.  Thanks!
  Maybe try accessing it with http://localhost:7100 instead of http://127.0.0.1:7100?
 Do you mean that you want to run both of them on the same port? Or that you can't use 127.0.0.1 in your proxy_pass? If the latter, you can either use `[::1]` or `localhost` instead, or tweak your system settings to somehow not discriminate against IPv4. I'm not sure how to do that so you'll have to do some googling.
 @kartx22 

Is `adb` properly installed in your system?

You have to install all the prerequisites before running `stf local`.
https://github.com/openstf/stf#requirements
  Looks like there was a commit last month and the ambassador image got rebuilt. Something probably changed and broke things.
- https://github.com/CenturyLinkLabs/ctlc-docker-ambassador
- https://hub.docker.com/r/ctlc/ambassador/
 I know that only one line changed, but it caused a full rebuild of the docker image. Something must have changed during that rebuild.
 I'm trying it at home and it's not working. But I know for certain that we've been using the same unit (with automatic docker pull) for probably around 2 years and it has always worked, even on new machines. But it looks like we'll have to find an alternative now.
 Oh... you know guys, it actually works. The image is buggy and you do get the errors every time. However, it still manages to open the link behind the scenes. Anyway that's bad, so I'll try think of something.
 Please try to change your unit configurations to use `openstf/ambassador`. Other than that the usage stays the same.
  Have you seen https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md?
  Thanks!
  Thank you for your contribution!

Your PR has two unrelated commits ("add install doc" and "fix script") so I've cherry picked just the "add zh translation" commit and pushed to `master` already.

However, the translations are not supposed to be translated directly from the `JSON file` (everything is automated), but from the **Gettext .po file**. 
So could you submit a PR again against a new `stf.zh.po` file? 

You don't need to use Transifex, you can ask your colleague to just use a free GUI tool like [PoEdit](http://poedit.net) for doing the translations.
 @codeskyblue 
First pull the latest stf from master, install all external dependencies, and do a `npm install`.
After that for compiling you'll only need to run `gulp translate:compile`.
  Thanks, it's a bug that went unnoticed for a really long time. In fact I'm not even sure how on earth we didn't encounter it before... We use the exact same unit template and it pulls the latest image, which had this same problem for a long long time even before yesterday's update. Complete mystery.

Please pull the latest image to fix the issue.
  Sorry for the late response. The deployment docs unfortunately had many mistakes (see #76 if interested) and were updated a while ago to be more complete. Closing this ticket for now.
  Hi,

The devices use a configurable port range, 15000-25000 by default. You can
decrease the range if you like (it's very generous - one device shouldn't
need more than 2 ports), but you'll have to make sure that range is open.
Try the help output to see the options.

The other necessary ports are configurable and can also be seen in the help
output (or the deployment guide if you're doing that).

On Monday, August 31, 2015, clm notifications@github.com wrote:

> Hi,unverb. I'm trying to deploy STF to actual servers,but there is some
> questions when i start .service units, especially the unit configuration of
> nginx.service,i have pulled the docker image of nginx:1.7.10,should i have
> to install nginx separately?can you give me some consultation or steps? how
> to deploy the separate unit for RethinkDB? My email is
> yuan890811@163.com.Thanks
> <javascript:_e(%7B%7D,'cvml','yuan890811@163.com.Thanks');>.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/67#issuecomment-136234846.
 Well, all network services are bound to run a little slower once you're no longer running things locally. It shouldn't be terribly slow, though. Are you accessing it via a public network or from an internal network? We've only ever used internal networks. 
 Can't help with that, sorry. It was not meant for public use and has never
been tested with one.

On Monday, August 31, 2015, unverb notifications@github.com wrote:

> I am accessing public network. This is very slow. How to fix it? Change
> capture frame rate or ..? @sorccu https://github.com/sorccu
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/67#issuecomment-136355357.
  Can you clarify what kind of guidance you're looking for?
  Hi,

You forgot the `--link` option. See https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md.
 Hi,

Sorry but that's beyond the scope of STF and the resources we have right
now. The deployment guide is meant for those who are already familiar with
the software we use, or otherwise able to adapt the instructions to their
system.

Note though that you don't have to set up https if creating the certs is
too much trouble.

On Monday, August 31, 2015, clm notifications@github.com wrote:

> Thanks,I have tried it,but it doesn't work. Now i want to ask another
> question,should i have to install nginx separately in my host? I have
> pulled the docker image of nginx:1.7.10,Should i have to create the file of
> nginx.conf by myself and deploy it like
> https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md? how to
> create the file like cert.pem cert.key dhparam.pem?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/65#issuecomment-136238846.
 I can guarantee that the instructions work as long as you know how you're
supposed to use them, since the system we use is identical except for a few
configuration options. So I know that it works, but I can't really help if
you or someone else can't get it running, because that would take way more
time than I can afford :)

On Mon, Aug 31, 2015 at 12:20 PM, clm notifications@github.com wrote:

> Oh,i see,thanks.
> It's means that i must deploy the platform of STF by myself if i want to
> run it on real servers,the file
> https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md just a
> reference. There are a lot of things I should to change or create in my
> way.It will not work if i deploy it just like the description of DEPLOYMENT
> .
> 
> thanks again, I will learn it by my best.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/65#issuecomment-136241739.
  Hi,

Thanks for the awesome work. We would like to have iOS support, yes. However we currently do not have the resources to develop it by ourselves, but if someone provides a reasonably functional version I may be able to port the rest of the functionality. I would be very interested in seeing what you've got so far.

Btw you mentioned you were hoping to perhaps compress TIFF frames into PNG. I think PNG is a lost cause for screen capture purposes as the compression is very very slow compared to JPG. JPG (w/ libjpeg-turbo) is the fastest method we've found so far, but over time we're planning on moving away from JPG frames to transferring raw x264 frames instead. As long as the device supports hardware encoding, this method should yield the highest FPS.
 Great, really looking forward to this :)
 Amazing. 

For capturing images, I get that you are using `com.apple.mobile.screenshotr` which firsts captures a `TIFF` frame and then you have to convert it to `JPEG`; which will not get you the max frame-rate.

Since iOS 8 there is [`com.apple.cmio.iOSScreenCaptureAssistant`](https://github.com/libimobiledevice/libimobiledevice/issues/122) which gives you an encoded video stream. If you are able to get the stream (you _may_ have to do some [reverse-engineering](https://www.aorensoftware.com/blog/2011/08/20/exploring-airplay-mirroring-internals/)) and then somehow forward that to the browser, you'll probably get the highest FPS. 

On the Browser side then you could try to do any necessary processing and show it by using `Media Source Extensions` or `WebRTC`.

If you need any help in getting the approval of stakeholders, just let them know that we can add the name of your company in the credits as a big contributor on [http://openstf.io](http://openstf.io), if that is the case just let us know ;)
 @kwv any update on this? :)
 If you feel like you need an iOS implementation faster, consider posting a bounty on this issue (see badge below). If the bounty gets large enough, perhaps we or someone else will take a look at it.

[![Bountysource](https://api.bountysource.com/badge/issue?issue_id=26213277)](https://www.bountysource.com/issues/26213277-ios-support)
 @daluu 

XCode supports testing multiple real devices using UIAutomator since v6.3.2

https://github.com/appium/appium/issues/273#issuecomment-110145744
 @codeskyblue it works also on Android, should be able to be used without problems
 Well its for different use cases afaik, at least currently.
 I think that's probably the reason why no one has contributed a solution
yet. It takes a huge amount of developer time and there are clearly
financial benefits for end users. In other words it would be a viable
product. Not many are willing to give that away for free.

On Tuesday, 21 June 2016, Naresh Jain notifications@github.com wrote:

> any update on iOS support?
> If anyone has a iOS solution available for OpenSTF please share, that will
> help my company to reduce cost on devices.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/64#issuecomment-227408518, or mute
> the thread
> https://github.com/notifications/unsubscribe/AAB-_bzGMKCJOp7_YKDQZARghu4O20xWks5qN8WwgaJpZM4FyyUk
> .
 They probably meant that Apple wouldn't allow you to publish an app that does that. However, you should be able to use private APIs to your heart's content if you never publish your app in the App Store.
 Note that on iOS the home screen is quite slow for some reason. You can capture screenshots faster in some other views (e.g. Safari). I can confirm that around 4-5 FPS is possible with this very basic method.
 WDA screenshots suck, don't bother. It stops capturing during any animation or significant activity.
 Above repo has been transferred to the OpenSTF org. here: 
https://github.com/openstf/ios-minicap
 I believe so, but it's untested as we're improving things. Anyway it's still very much a prototype with bugs and all. It will take time to polish it. Let's not start asking too much. You can help by testing it yourself and reporting the results.
 My understanding is that for touch events, Remote simply adds code to the app you build. I'm not sure if it can send events to any app / system.
 No, it's super, super slow. And unreliable. Can take 5-15s for an event to
register.

On Sun, 20 Nov 2016 at 1:58 Ashraf Ali notifications@github.com wrote:

> Could we not use appium/WebDriverAgent to send the touch events commands
> to the device since it was designed to run automation tests
> 
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/64#issuecomment-261725275, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_cUX0EvPxfYueY8qY9IySPOqVx8sks5q_yqhgaJpZM4FyyUk
> .
 Facebook isn't omnipotent. We've been using WDA for touch events internally
and it's the worst. Latency of touch and key events is easily several
seconds, sometimes even tens of seconds. To be fair, I believe most of the
issues are due to XCUITest rather WDA itself.

It's also extremely unreliable and can often go into a weird state that you
can only recover from by rebooting the device.

In short: it works, but is a nightmare to work with. We will never
integrate it with STF in its current state. If the situation improves we'll
think again.

On Wed, Jan 18, 2017 at 6:14 Justin Watts <notifications@github.com> wrote:

> @sorccu <https://github.com/sorccu> I am not sure if that is true these
> days, especially with the release of this library from Facebook:
> https://github.com/facebook/WebDriverAgent
>
>
>
>
> —
> You are receiving this because you were mentioned.
>
>
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/64#issuecomment-273301639>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_frCNEyp0a5oT4XQGHhuXXbQepERks5rTS9OgaJpZM4FyyUk>
> .
>
 USB. If you'd like to help, feel free to make a sample app to demonstrate
the responsiveness. Based on my personal experience with WDA I really don't
think it's possible to make it work well with real time control, but would
be happy to be proven wrong.

On Wed, Jan 18, 2017 at 23:41 Justin Watts <notifications@github.com> wrote:

> We also use it internally, but have found it to be quite snappy and
> stable. Are you pushing events over Wifi or USB?
>
>
>
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/64#issuecomment-273492592>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Zw2a3JOGxN6Cxj22l7UJAT5o5Blks5rTiSqgaJpZM4FyyUk>
> .
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
>
 Yeah, there are many paid and/or closed source offerings out there.

On Tue, Jan 31, 2017 at 5:01 PM, Martin Woit <notifications@github.com>
wrote:

> It looks like someone has figured out how to do it the STF way with ios
> devices ... https://kobiton.com/
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/64#issuecomment-276298403>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_Y_EcwlFsMwv_HA_ogxlbXC5ErWqks5rXupjgaJpZM4FyyUk>
> .
>
 That's great! Do you think you'd be able to share your example's source code? I've also been looking into reading data from the USB endpoint iOSScreenCapture opens. I've been able to capture some raw data from it, but haven't had time to figure out the format yet. I suspect it's deceptively simple, though. Do you know what the output format is?

The only downside of doing the capture that way is that the device menu bar switches to a static view when the endpoint is open. For example, time is always "9:41" and other icons are hidden. No. This isn't a paid product, please try to learn to respect people's free
time.
On Tue, Mar 28, 2017 at 18:23 Sai Krishna <notifications@github.com> wrote:

> @sorccu <https://github.com/sorccu> any updates on this ?
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/64#issuecomment-289713329>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_VV-IhJUC20TS8NPWNKNwsmij_vuks5rqNGGgaJpZM4FyyUk>
> .
>
 I don’t think anyone is actively working on it right now. Comtributions are welcome :) People tend to think that relatively popular open source projects have some magic behind them that somehow produces funding to the team, but that’s rarely the case. As we have no business model, “the team” quite literally makes nothing from it, aside from the occasional donation. All the time we spend on the project is free, unpaid labor, that is directly out of our own leisure time. We even buy our own devices with our own money. Considering that, don’t you think you’re being a bit unfair? Guys thanks for your hard work but can you please take this discussion to your repo :)  I think your device is too old. We only support armeabi-v7a (with neon) and newer. In fact yours is the first armeabi-only device ever reported to us. Just to be sure, can you post the output of:

``` bash
adb shell getprop | grep '^ro\.'
```
 Then use adb's -s option with the right serial number (you can see it in
the logs).

On Tuesday, August 25, 2015, Mehmet Bora Ezer notifications@github.com
wrote:

> I have many devices. This command is not valid.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/63#issuecomment-134257112.
 Hmm, can you try adding -E to the grep command?

On Tuesday, August 25, 2015, unverb notifications@github.com wrote:

> The output of this command to empty all devices.
> 
> Command
> 
>  adb -s [SERIAL] shell getprop | grep '^ro.'
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/63#issuecomment-134259267.
 Currently you can't exclude just one device, you'd have to actually unplug it.
 By the way could you let me know what device this is? I'd want to know the model number at least. Either `adb shell getprop | grep -E '^ro\.'` or `adb devices -l` should give enough information about the device, including the model number.
 Thanks! I can take a look if someone is willing to donate one of these super old devices. I might eventually buy one myself but funds are limited right now. I've posted a small update in the README.
 I got a used Wildfire S off of Ebay for ~$30. Might look into it some day but no promises of any kind.  Sorry for the late response. The deployment docs unfortunately had many mistakes (see #76 if interested) and were updated a while ago to be more complete. Closing this ticket for now.
 Here is the error logs
> Jul 04 16:08:17 linux-rahul docker[31200]: INF/db 1 [dev] Unable to connect to 172.17.0.7:28015
Jul 04 16:08:17 linux-rahul docker[31200]: FTL/db 1 [dev] No hosts left to try

Either your db is not running or your unit files are not configured properly. `RETHINKDB_PORT_28015_TCP=tcp://rethinkdb.stf.example.org:28015` is this the exact line you have in there?  Have you thought about replacing it with the real address of the rethinkdb
server?

On Wed, Jul 5, 2017 at 21:49 RAHUL RAJ CHAKRAVORTY <notifications@github.com>
wrote:

> where? in rethinkdb-proxy-28015 unit ??
>
> yes it is the exact line
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/openstf/stf/issues/62#issuecomment-313093156>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAB-_UgbGIkxHkgoQmGS3a8I-m2R3m2Xks5sK4ZZgaJpZM4Fw3VX>
> .
>
 Please use ``` to format your code. If you don't do that, it looks bad and some characters may not be shown at all, like `\`. 

I don't see anything relevant in that log. Perhaps you cut it a bit short.  Maybe your sudo is configured to ignore your PATH. Try running `sudo node -v` and see if it works or not. If not, you need to find a way to fix it.
 It's a bit late, but you can get around that problem by using [nvm](https://github.com/creationix/nvm). Although I'm pretty sure you shouldn't need sudo with homebrew's node either... anyway it's an old issue now, but if it happens again, try running brew doctor to see if it can find something wrong with your installation. Note that you're practically NEVER supposed to use sudo with homebrew.
  Do you mean the log function in the STF UI, or just `adb logcat`?
  There is considerable overhead in the ADB TCP protocol (used in `adb connect`) that we can do nothing about, but I've never felt it was _that_ slow.

I just tried it on my localhost (so it's a little bit different than yours, but still) and got the following results:

``` bash
Simos-MBP~ % time ~/Library/Android/sdk/platform-tools/adb -s localhost:7401 install -r HelloApp.apk
7034 KB/s (693077 bytes in 0.096s)
    pkg: /data/local/tmp/HelloApp.apk
Success
~/Library/Android/sdk/platform-tools/adb -s localhost:7401 install -r   0.02s user 0.01s system 0% cpu 3.546 total
Simos-MBP~ % time ~/Library/Android/sdk/platform-tools/adb -s SERIAL install -r HelloApp.apk
7403 KB/s (693077 bytes in 0.091s)
    pkg: /data/local/tmp/HelloApp.apk
Success
~/Library/Android/sdk/platform-tools/adb -s SERIAL install -r   0.02s user 0.01s system 0% cpu 3.470 total
```

So yeah, we do have a little bit of overhead but it's way under 10%.

Is it possible that you actually switched your device to TCP mode, and tried to connect to that? Because that's always super super slow, every time.
 This may be caused by openstf/adbkit#41.
 Can you update your adbkit to 2.4.0 and try the same thing you did before, and report your results to openstf/adbkit#41?
 or update stf to latest one i.e `v1.1.1`
 It would be really interesting to know what in your network causes this :(
Unfortunately we can't reproduce the issue.

Is it possible you may have torgotten to run npm install after updating you
repo?

On Friday, 15 January 2016, agrieve notifications@github.com wrote:

> Updated to v1.1.1, but sadly the speed was a whopping 32kb/s
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/58#issuecomment-171865364.
 If you feel confident enough about letting me ssh to a machine in your
network from which the behavior is observable, I could try to look into it
this weekend. Alternatively remote desktop but it might take a long time.

On Friday, 15 January 2016, agrieve notifications@github.com wrote:

> The stf update required me to update my version of rethinkdb, so def. did
> get updated.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/58#issuecomment-171866213.
  Nope, it's a very very low priority for us.
  If you don't have an auth key for rethinkdb, just don't set the environment variable.

Disabling auth is not possible right now, see #37. Use the mock auth if you don't have anything else.

I would suggest using the docker images because they include all the dependencies (although you'll have to set up rethinkdb separately) and you won't have to install anything separately (except RethinkDB). See [doc/DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) for details.

I would also strongly recommend running RethinkDB on another host. ADB is only required on nodes where you have devices connected. The rest of the dependencies would be good to have everywhere.
 I think you're having some kind of network issues. Maybe something's blocking the connection?

Worst-case scenario, if you're unable to solve the connectivity issues, you can [build the base image](https://github.com/openstf/docker-openstf-base) too, with `docker build -t openstf/base:v1.0.1 .`. You should then be able to build the image in this repository.
 You have to run the docker build command from the folder where you cloned
the stf repo.

On Thursday, August 13, 2015, yuancc notifications@github.com wrote:

> I change the contents of Dockerfile "RUN export
> PATH=/app/node_modules/.bin:$PATH && npm install && bower install
> --allow-root && gulp build" to "RUN export
> PATH=/usr/local/lib/node_modules/.bin:$PATH && npm install && bower install
> --allow-root && gulp build" ,the question still exist!
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/56#issuecomment-130623522.
 The openstf/base image does NOT include STF. It only exists so that the main build in this repo doesn't take too long. You need to pull or build openstf/stf, although the units will attempt to do it for you.

The example URL does not work because it's an example URL. You need your own domain (or you can just use your IP) and then you'll have to modify the unit configs with the new URL.

You should create a separate unit for RethinkDB (preferably on another server) and expose its ports. Then you need to then modify `rethinkdb-proxy-28015.service` so that it's able to connect, and start it. Then you start the migrate unit and let it finish. Then you start the rest of the units, order is not that important but you should launch the provider last.

Sorry but I don't think I can provide anymore support with this issue, it's taking way too much time. The deployment docs are meant for advanced users who have prior experience with docker and systemd.
 It says failure, but because the command is prefixed with -, the failure is only mentioned in the logs but doesn't prevent the unit from starting. It's normal to see it in the logs.

We just improved the deployment docs to include a sample rethinkdb.service, that might help.
  They're used for routing ZeroMQ PUB/SUB messages.
  Hmm, perhaps you're somehow running 32-bit node with 64-bit libs? Try with 64-bit node instead.
  Well, it looks like whatever the thin client is, it doesn't expose any touch devices. Can you run `adb shell getevent -ilp` and paste the output here? I have a feeling there's probably nothing we can do, though.
 Yeah, because it uses a different API that didn't support multi-touch until recently.

Unfortunately I'd have to say that we are not very interested in this issue right now, since our resources are very limited and we have so far only dealt with touch devices.

I may consider working on this at some point, but don't expect too much.
 Well, you have a touch device, but it's not a multitouch device. Currently we only support multitouch devices in [minitouch](https://github.com/openstf/minitouch), since that's all we've ever had. Can you run `adb shell getprop | grep -E '^ro\.'` and paste the output so that I can see which device it is?
 Ummm so it's something like this? http://en.senter.com.cn/products_detail/&productId=128.html
 That's a different issue. See #477.  Check https://github.com/openstf/minicap. All the source code is available there.
  It works for me on OS X. Is it possible that your firewall might be blocking something?
 I just tried again and it does work for me. I haven't done anything special, the command alone should be enough. One thing to watch out for, though, is that even though it's called `--public-ip`, it actually means "accessible from your internal network". So, I'm pretty sure you didn't do this, but I'll just say it as one possibility: if you got the IP from, say, https://www.whatismyip.com/, it most likely won't work. 

This could be somehow related to #31 though. We're still not sure what the cause for that one is.
  You can check [doc/DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) for a setup similar to ours, although you'll have to be able to figure out how to distribute the units yourself.
  Send the process you want to debug a signal to trigger the debugger. See https://nodejs.org/api/debugger.html#debugger_advanced_usage.

I'm closing this ticket as the signal works fine, even though it is a little bit more annoying to use. I'm not sure if we can make it any easier right now, but feedback and patches are definitely welcome.
  By starting multiple provider units on multiple PCs. See [doc/DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md) for more information.
  Hi,

There's a relevant reply in #46, but it's kind of unrelated otherwise so I'll just paste my reply here once more for search purposes:

---

You can use OAuth 2.0 or LDAP. Some information is available in [doc/DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md). Note that you're not supposed to run STF with `stf local` in production, although it can be done. Here's my reply to someone else who asked privately:

---

As for authentication, what do you currently use? If you trust your developers enough that they're not going to claim to be someone else, you could just use the mock login while you're testing the system. Alternatively, we provide an implementation for LDAP and OAuth 2.0.

Although the processes are meant to be started separately, you COULD use either with of those with `stf local` like this:

```
stf local --auth-type oauth2 \
  --auth-options '[ 
    "--oauth-authorization-url", "https://sso.company.example.org/as/authorization.oauth2",
    "--oauth-token-url", "https://sso.company.example.org/as/token.oauth2",
    "--oauth-userinfo-url", "https://sso.company.example.org/idp/userinfo.openid",
    "--oauth-client-id", "YOUR_CLIENT_ID",
    "--oauth-client-secret", "YOUR_CLIENT_SECRET",
    "--oauth-callback-url", "https://stf.example.org/auth/oauth/callback",
    "--oauth-scope", "openid email"
  ]'
```

If that looks a bit weird, it's because it's not really meant to be super convenient - just possible.

You may also need to export NODE_TLS_REJECT_UNAUTHORIZED=0 in case you're using a self-signed cert. 

Similarly, you could support LDAP (or possibly ActiveDirectory) with the auth-ldap provider (or `--auth-type ldap` with `stf local`). Check `stf auth-ldap --help` for the available options.

We are planning on improving the documentation over time, however there are still a few bugs we want to fix first.

Also, be sure to read the Troubleshooting section of the README, especially if you're planning on using Intel processors, as you might find out you're only able to support 8-12 devices per machine otherwise!

Hope this gets you going for now.
 See `stf auth-ldap --help` for the available options. You yourself have to know which options you have to set and to which values.
 The syntax is correct, but you don't have enough options. You should add at least `--ldap-search-dn` and `--ldap-search-field`, and possibly `--ldap-search-scope` and/or `--ldap-search-class` if your company is using different values.
 As you can see in the logs, it says `INF/db 2204 [] Unable to connect to 127.0.0.1:28015`. It means stf is not able to connect to db. Did you start `rethinkdb` before running stf?
  You most likely don't have GraphicsMagick installed (the `gm` command). It's listed in the requirements.
 You can use OAuth 2.0 or LDAP. Some information is available in [doc/DEPLOYMENT.md](https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md). Note that you're not supposed to run STF with `stf local` in production, although it can be done. Here's my reply to someone else who asked privately:

---

As for authentication, what do you currently use? If you trust your developers enough that they're not going to claim to be someone else, you could just use the mock login while you're testing the system. Alternatively, we provide an implementation for LDAP and OAuth 2.0.

Although the processes are meant to be started separately, you COULD use either with of those with `stf local` like this:

```
stf local --auth-type oauth2 \
  --auth-options '[ 
    "--oauth-authorization-url", "https://sso.company.example.org/as/authorization.oauth2",
    "--oauth-token-url", "https://sso.company.example.org/as/token.oauth2",
    "--oauth-userinfo-url", "https://sso.company.example.org/idp/userinfo.openid",
    "--oauth-client-id", "YOUR_CLIENT_ID",
    "--oauth-client-secret", "YOUR_CLIENT_SECRET",
    "--oauth-callback-url", "https://stf.example.org/auth/oauth/callback",
    "--oauth-scope", "openid email"
  ]'
```

If that looks a bit weird, it's because it's not really meant to be super convenient - just possible.

You may also need to export NODE_TLS_REJECT_UNAUTHORIZED=0 in case you're using a self-signed cert. 

Similarly, you could support LDAP (or possibly ActiveDirectory) with the auth-ldap provider (or '--auth-type ldap`with`stf local`). Check`stf auth-ldap --help` for the available options.

We are planning on improving the documentation over time, however there are still a few bugs we want to fix first.

Also, be sure to read the Troubleshooting section of the README, especially if you're planning on using Intel processors, as you might find out you're only able to support 8-12 devices per machine otherwise!

Hope this gets you going for now.
 Read the README for installation instructions. I can't help you with this. It's your responsibility to make your development environment work. The instructions provided in the README work. Nothing in the README says to run `sudo npm install graphicsmagick` so clearly you have not read it. You can't install it via npm. If you can't get it installed, consider using the docker image instead which includes (almost) everything.  You need to have a rethinkdb container running as well, and then link to it. There's a bit more complicated example over at https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md, but you could skip the proxy container and just link against the rethinkdb container if you like.
 Depends on how much you've used Docker before (especially with linked containers), and what OS you're running on. It won't work on OS X with boot2docker because it won't be able to see your USB devices.
 Yes it would be possible to configure the USB ports, however it's annoying and reliability is questionable. In fact https://github.com/openstf/setup-examples does that but some people are having issues.

The adb port forward thing may or may not work, but you could do pretty much the same thing with `socat` or similar common tools. Or try setting the ADB_HOST and ADB_PORT environment variables and STF will try to use those. Functionality is untested, though.
  Actually we haven't tested with any Android TV versions yet. Can you post the
output from 'adb shell getprop | grep ro.product' and 'adb shell getprop |
grep ro.build.version' here?

On Thursday, July 30, 2015, 竹逊 <notifications@github.com
<javascript:_e(%7B%7D,'cvml','notifications@github.com');>> wrote:

> i run on my android tv box and gets this error
> minicap error: "ERROR: (external/MY_minicap/src/minicap_17.cpp:123: errno:
> Invalid argument) Unable to lock next buffer BAD_VALUE (-22)"
> is it something wrong with my android device or can i do something to fix
> it?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/44.
  The same error i am getting with one of the avd, well if you remember then please tell me how did you solved this error? That doesn't have anything to do with this issue. The error can occur if the worker process dies, which based on your other posts is indeed happening.  Hi, `-o` is for a different thing, you want to use `rethinkdb --http-port 8081` instead.
  Can you run `adb shell getprop | grep ro.product`  and paste the output? There shouldn't be any private information there.
 Unfortunately we don't have any Neken devices to test with (I actually learned that the maker exists from your post :bowtie:), so I might not be able to help right now.
 We have a Lenovo Yoga Tablet 8 that exhibits the same behavior, it's our only device that does that. I'll try to look at it at some point.
 There's a good chance that this was fixed by STF 2.3.0. Please try and report back with your findings. @rseek I am not sure about HUAWEI U8825-1, please create a new issue for it if the problem still exists, and remember to post the log output there. Thanks!
  Hi,

What does `stf -V` output?
 Did you install from NPM with `npm install -g stf`? I just tried it and it works on my computer.
 Glad you got it working. Can I ask how you built it? From the logs it looks like you managed to install it globally after building, could you post the commands you used so that we can anticipate this in the future?
  We support pushing files (currently only APK files), so might as well support pulling a file from a path.
 Yes, in the end a **File Explorer** is in the roadmap. Something like [this](http://zendelsolutions.com/zendel/projects/angular-filemanager/).
 @vrunoa Right now we have few resources, so the answer is no. 
Contributions are welcome! 
If you need any help implementing or have any questions don't hesitate to ask here.
 We appreciate any contribution. Thank you for your work and looking forward to it.
 True, I'll close it. However it seems that it doesn't quite work an all recent Android versions, I've had trouble getting it to work on Nexus 5X running Android 7. The list is always empty. But I think that should be a separate issue. Thanks!
  Hi,

We are of course planning to offer automation, but currently we're pretty much fully booked with other bugs & requests.

We're hoping to have something available (perhaps limited to just 1 testing framework like Espresso) in a few months, but we can't make any promises. At first we're just planning on just creating a fairly simple API to reserve devices with the desired features, with the possibility to enumerate the devices in the response and `adb connect` to them yourself. We'd then build the real automation on top of this API.

Help would indeed be much appreciated, but our vision regarding this is not clear yet. Right now what would be very useful (aside from a complete implementation) would be a detailed description of how you would like the system to work, including any testing frameworks you need. 
 That's more or less what we were planning to do at some point, so it would be very helpful indeed if you could have a go at it.

I prefer reserve/release as they are easier to understand (for me, anyway).
 `Lock/Unlock` can be confused with the screen rotation indeed. 
`Reserve/Release` sounds good.

The next step would be to reserve based on device `capabilities`, not only `serial`.
 @vbanthia you can use the preliminary UI for the access tokens in `res/app/settings/keys/access-tokens` (you'll need to uncomment it on `settings/keys/keys.jade`).
 @jlhonora yes, we want to integrate any of the great tools available.
However we need first an API that its platform/tool agnostic first.
 About the `connect.start` thing, I'm actually not very happy about having to retrieve the URL this way even in the current UI. Ideally I'd like to store it in the database, but the reason why it's not there right now is due to a complex dependency graph for the device `identity` module, which would otherwise be the prime candidate for storing the URL (since it currently also stores the screen WebSocket URL). Currently it has to be accessible before most of the services start. Although I guess we could create a new message for it so that it doesn't have to rely on `identity`.
 Feature will be available in next major release.

https://github.com/openstf/stf/pull/200
 I haven't tried these tools yet but theoretically they should also work. All you need to do is,
1. Reserve the device
2. Remote connect 
3. Start your test assuming device is connected to your own machine. 
  No, it is not possible to disable authentication right now.
 The current app doesn't support this, but we may offer a more lightweight version of STF at some point without auth or any advanced features. Closing as wontfix for now.
  Weird, we have the same device and it works. Can you open the developer tools in Chrome and see if you might have some sort of errors in the console?
 Could you try in incognito mode (and make sure no extensions are enabled) just to see if it makes a difference? We had something similar happen a long long time ago and that was the reason.
 Can one of you guys (or both) provide the full output from `stf local`, up to where you attempt to use the device and only see gray? There shouldn't be any private information there except perhaps usernames in paths, although more importantly your phone's IMEI and phone number may be visible if the device wasn't found in our database.
 Did you attempt to use the device when that log was being captured? I'm not seeing any evidence of the screen WebSocket being used (or actually the device being used at all).
 I need the log to be able to say anything, but could you pull the latest master from Git and try `stf local --provider-min-port 15000 --provider-max-port 25000`? Perhaps a firewall/iptables/something is blocking one of the default ports (7400-7700). I wouldn't say it's very likely but worth a try anyway.
 FWIW here's the same Nexus 7 with the same Android version running in our system.

![screen shot 2015-07-28 at 12 40 23 pm](https://cloud.githubusercontent.com/assets/32509/8923043/3dcf3ac6-3526-11e5-8faf-6eb3ae02aac0.jpg)
 Here's my Galaxy Nexus working fine. :(

![screen shot 2015-07-28 at 2 15 49 pm](https://cloud.githubusercontent.com/assets/32509/8924035/a4e7e304-3533-11e5-97a4-c269408a28af.jpg)
 I'm closing this ticket in favor of the earlier #31. Let's continue there.
  You can with the new **stf 1.0.8** version.
Control a device and then try clicking `Dashboard -> Apps -> Manage Apps`.
It should open a list of running process (unfortunately this doesn't work for old Android devices yet).
  I don't think there's anything we can do about the camera. I think they're bypassing the Android rendering layer somehow to combat the lag. Considering our limited resources I don't think we can spend any time on this. Sorry :(
  Hi,

Unfortunately we have very limited resources and are therefore only able to
document a very narrow range of possible deployments. What you can do,
though, is to take the `docker run` commands from the example unit files
and write corresponding service configs for whatever init system you're
using, or if you don't even have access to docker, just take note of the
environment variables and the stf commands. It will be a lot more tricky
without docker, though. Also, remember to replace %p and %i where
necessary, %i means the unit filename after @ (if you were using systemd)
without extension, and %p means the part before @ (or the whole name
without extension if none).

However, if you only have a single computer, you might as well use `stf
local --public-ip <your ip here>` the make things easier for yourself.
Making sure that it restarts if it dies is left to you. If you need it to
run on port 80 you could set up a simple nginx reverse proxy, or for a
super lazy solution add a `--port 80` option and run STF as root, but
that's not secure at all.

Simo

On Mon, Jul 27, 2015 at 10:00 PM, 竹逊 notifications@github.com wrote:

> hi, my computer doesn't has systemd and it uses init , can stf deploy on
> my computer?
> and my computer only has one port for public net and the port is 80, how
> can i deploy stf on my computer and visit it from the public net?
> thank you for this wonderful project , it helps me a lot
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/33.
 Closing this ticket because we don't have the resources to test and keep up another set of deployment instructions.
  What kind of a feature are you looking for?
 According to [this](http://developer.android.com/intl/zh-CN/about/dashboards/index.html), Android devices over 4.4 are just about 50%. 
In order to support this in older versions we will have to look for another way.

Currently you can use `screenrecord` from the Shell command, however you will not be able to download the file, for that follow this other issue #39.
 @codeskyblue Sure, make a PR and we can evaluate it. 
It would be good if it's also implemented server-side and not only client side.
 It does make sense, but unfortunately we have no time to implement it.
  Hi, please let us know the following:
- Which browser (and version) are you using?
- Which version of Android is your Galaxy Nexus running?
- The exact command you use to run STF (e.g. just `stf local`)
- The exact URL you use do access STF (e.g. just `http://localhost:7100`)

It would also help if you could provide the full output of `stf local`, although you might want to redact the IMEI and phone number that may be visible if we don't have the device in our device database. The log message should begin with a yellow `WRN`.
 Also, if you have any other device, it would be helpful if you can check if that one works.
 Turns out we do have the Japanese version of Galaxy Nexus somewhere (with 4.2.2), I'll try it ASAP. I'm pretty sure it will work on my computer, though.
 From the logs you sent it looks like it does manage to open up the WebSocket just fine since minicap gets started and stopped as it should. So I don't think it's a network issue, unless something blocks the WebSocket binary frames.

Can I ask what specs you have on your computer (both the STF app server and your local client if different)?

Additionally, I would be interested in knowing at least the following:
- Does the network panel show anything when the screen is grey?
- The full network log from before you control the device to you seeing the grey screen for the first time. You can copy all the logged information by right clicking in the network tab and selecting Copy All as HAR (on Chrome at least). Alternatively the "Save as HAR with content" may be more informative.

If there's nothing in there either, we may have to resort to screen sharing if somebody's willing to let me do that.
 I'll be away until next Tuesday, but I'll take a look when I return.

On Wednesday, July 29, 2015, Jonathan Almeida notifications@github.com
wrote:

> Can I ask what specs you have on your computer (both the STF app server
> and your local client if different)?
> 
> Right now, I'm testing this all locally on the same server machine which
> is a fresh install of Ubuntu 15.04.
> Processor: Intel Core i7 CPU 860 @ 2.80GHz
> Graphics: GeForce GTS 240 (default nouveau drivers)
> 
> Does the network panel show anything when the screen is grey?
> 
> There is some network i/o going on (comparing it to a working Nexus 5),
> but there isn't any change when interacting with the device while I can see
> the interactions taking place irl.
> 
> The full network log from before you control the device to you seeing the
> grey screen for the first time.
> 
> Here are the HAR logs with and without interaction with the device:
> https://www.dropbox.com/s/36zrssykcckvgn3/HAR%20logs.zip?dl=0
> 
> If there's nothing in there either, we may have to resort to screen
> sharing if somebody's willing to let me do that.
> 
> I'd be happy to help via screen sharing, if we can't figure out the issue
> otherwise!
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/31#issuecomment-125827104.
 @swarawan Do you happen to have more than one device connected with the same serial number?
 Works for me.

<img width="637" alt="screen shot 2015-08-07 at 3 16 28 pm" src="https://cloud.githubusercontent.com/assets/32509/9129840/8ec80bee-3d17-11e5-8321-696b9ec358ae.png">

<img width="885" alt="screen shot 2015-08-07 at 3 17 42 pm" src="https://cloud.githubusercontent.com/assets/32509/9129846/91c00c5c-3d17-11e5-9b12-e9f0e8f1f74b.png">

Can you tell me how you installed STF? The exact commands you used? I would also like to see the exact command you use to launch STF.
 So you installed stf with `npm install -g stf`? If you run `stf -V` what does it show?
 Well, I just tried it with the NPM version and it just works. The IP gets replaced like it's supposed to. Starting to get out of ideas, but what's your node version (`node -v`)?
 Mine's the same version. No, there really is nothing you have to edit. It should just work. If you can post the full output of `stf local --public-ip 172.17.2.130` that might help, but other than that I'm not sure if there's anything I can do since I can't reproduce the issue. 
 Yeah I think we'll have to do that. I'll PM you with details.
 Looks like the AT&T Galaxy Nexus (Android 4.3) is not sending any frames for some reason. Since our Galaxy Nexus works, I will try to update it to 4.3 to see if there's a difference there.

The other failing device, GT-P7510, is the first device I've ever seen that doesn't support NEON. This was confirmed with https://github.com/sorccu/smallfeat. Minicap uses libjpeg with NEON optimizations to improve encoding speed. We could potentially detect neon support at runtime, but I'm not sure if it's worth it - since the CPU is super old to start with, the capture rate would presumably be super slow.
 That particular Chrome issue has been fixed, see #303. You'll have to build from master or use the latest docker images, though.
  Running a provider on a Pi (v2) is definitely something we want to support, but as we currently depend on Node.js I assume it would be a bit of a hurdle. I currently don't have a Pi to test with, so there's not much I can say right now. Definitely interested in hearing if you or someone else manages to get it to work.
 I ordered a Pi 2, will update the ticket once there's progress. No promises
though.

On Sunday, July 26, 2015, Jelmer Koppelmans notifications@github.com
wrote:

> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/30.
 Actually I'm not planning on running RethinkDB on the RPI, it needs more RAM for smooth operation. The rest of STF _may_ run OK, but I'm mostly interested in running the device provider there and nothing else. It would connect to another server running the app itself.
 That's awesome! I guess you didn't bother with docker and just did the whole installation yourself?
 Progress so far with my RPi2 running Arch Linux & Docker:
- Built and pushed the [base image](https://registry.hub.docker.com/u/openstf/armv7hf-base/) to Docker Hub
- Ran into problems with the stf Dockerfile where in `ENV /path:$PATH` the `$PATH` gets replaced with an empty string. Not sure why this is happening.
 Figured out the cause, will wait till resin-io-library/resin-rpi-raspbian#3 gets fixed.
 I added a temporary workaround, the STF image is now available as [openstf/arm7hf-stf](https://hub.docker.com/r/openstf/armv7hf-stf/).

Still need to create an image for ADB.
 Make sure that your RPi is using a 2A power adapter. I find that providing any less power to the PI makes USB connections highly unstable. Also, power hungry devices tend to not work so well anyway. You could try [increasing the USB current](http://raspberrypi.stackexchange.com/questions/27708/is-setting-max-usb-current-1-to-give-more-power-to-usb-devices-a-bad-idea).

ODROID-XU4 is more expensive, but a much, much better fit with its Battery Charging 1.2 support, dedicated USB 3.0 bus, 1GB ethernet, eMMC 5.0 boot disk support, and 4A power adapter. The only downside is the somewhat noisy fan but I've replaced mine. All future ARM development will be done on ODROID-XU4.
 Should be fine, but personally I'm not going to use a hub anymore, which should greatly increase reliability and concurrency. You should be able to buy 10 or more XU4s for the price of our recommended components and hubs. Depending on whether you decide to utilize the USB 2 port as well (I won't), 10 XU4s can support either 20 or 30 devices. An additional benefit is that since there are fewer devices per machine, it becomes much less annoying to update & reboot the machines since you'll only lose 1-2 devices per machine. You could even set up automatic updates and reboots without having to worry too much about anything. Also, since you can give each provider a unique name, it should become way easier to physically find a missing or misbehaving device.

I'm not done with my own setup yet, though.
 Could you try [this](http://forum.odroid.com/viewtopic.php?f=95&t=15302) to see if it helps at all? Apparently there were some problems with their manufacturing process that left the USB 3 ports a bit dirty on some boards. Try cleaning them and report back.
 That's weird. My XU4 is very stable, although I only have one Nexus 9
connected to one of the USB 3 ports. In the past 10 days the device worker
has only died once, however it seems to have been due to Android stopping
the STFService rather than the USB connection actually dying.

On Wed, Dec 30, 2015 at 12:49 PM, Tierney0115 notifications@github.com
wrote:

> Thank you for your help. I have tried this method but not work for my
> ODroid. I have many Odroid all have the same problem. Finally we choose USB
> HUB 2.0 to enhance the stability.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/30#issuecomment-167932224.
 We now have an automated nightly build for armv7l available at https://hub.docker.com/r/openstf/stf-armv7l, and as a bonus it's a lot smaller than before.

The one thing that's missing is a good, up to date adb container for arm. It isn't easy to compile adb separately, unfortunately.
 You can take a look at https://github.com/openstf/stf/blob/master/doc/DEPLOYMENT.md for guidance. It's not really meant for beginners but maybe it'll help.

Even though there's only a single docker image, you can launch any of the internal processes with it like the guide explains. It contains (almost) everything STF needs, with the exceptions being adb and rethinkdb.

Among other reasons, the benefit of supporting only a docker-based installation is that we mostly don't have to deal with people asking how to install dependencies, installing them incorrectly, using wrong versions, botching permissions, and we don't have to provide separate instructions for the various Linux distributions out there or deal with their outdated packages.  Reasons:
- Old devices CPU are too slow (Slow JPEG encoding)
- STF->Client Network speed may be too slow (Poor Wifi)
- Client browser may be too slow (Mobile browser / Old PC)

Ways to do it: 
- Manual quality control: Low/Med/High
- Auto quality control: Measure each blob loading time
  Have 3 L/M/H breakpoints for when the value goes below 

What to adjust:
- Image size
- JPEG image quality
 I think it would be easier to understand if it was a slider between speed and quality, rather than having 3 levels to choose from. Then it would also be clearer why the option exists.
  - Resize when rotating
- Resize when loading

Already doing it for the Standalone mode.
But in normal mode it might be annoying so test it first.
  In that case you want to use `stf local --public-ip <your computer's private ip here>`. You can then connect to STF by using the ip:port combo.

Note that we currently have a severe performance regression on iOS, it won't be very usable at all. Working on it!
  We have a prototype for that but it requires an extra cable in the
headphone jack (or root), since it's not possible without system
permissions. (Although I'd certainly like to be proven wrong)

On Thursday, July 23, 2015, Viacheslav Frolov notifications@github.com
wrote:

> Really great software! Thanks very much! [image: :+1:]
> 
> There is a bit crazy idea - if it is ever possible - to redirect sound
> input/output to browser?
> Might be useful for testing.
> 
> What do you think?
> 
> Also then one can finally leave phone at home and make calls from browser
> :-)
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/22.
 It would take so much time that I doubt we'll be able to offer the feature for free.
 I don't think it's a good idea anymore. Many new devices come without a headphone jack.

I have no time to explain it in detail but just get an analog audio -> usb converter. Then you'll get USB audio that you can read with standard utilities. You can get started with a cheap one, but they don't usually have the most suitable specs.  Looks like you're missing pkg-config. It's included in the README in the
master branch, make sure you installed all the requirements.

On Thu, Jul 23, 2015 at 3:21 AM, Ashwin Preetham Lobo <
notifications@github.com> wrote:

> [image: screen shot 2015-07-22 at 11 50 50 pm]
> https://cloud.githubusercontent.com/assets/1861729/8833487/8c7b78d2-30cc-11e5-88f8-2f5ecb49e01e.png
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/21.
 Hmm, could be a `$PATH` problem then. If you run `which -a pkg-config`, what output does give you?
 Well, it's kind of unrelated to STF so I'm not sure how much I'll be able to help, but what does `echo $PATH` say?
 Seems ok to me... difficult to say really. You might want to run `brew doctor` to check if you have any problems with homebrew.
 Hi, this ticket isn't really related to STF so I'm closing it to make the list of open issues more manageable. Hope you get your environment sorted out.
  Hmm, I think you're probably missing GraphicsMagick (the `gm`) command. Perhaps [this](https://github.com/openstf/docker-openstf-base/blob/master/Dockerfile) will help you find the right packages?

Let me know how it turns out.
  The screenshot page hasn't received a lot of love so far, although similar persistence issues can be found on all tabs. This is one of the many areas we're planning to improve at some point :(
 The screenshot page has a separate Angular Controller that keeps track of its own state. When you move to a different tab the controller gets destroyed and the state is lost. This is a design issue on our side, all state should persist. The current code is [here](https://github.com/openstf/stf/blob/master/res/app/control-panes/screenshots/screenshots-controller.js), but there's not much to improve there without solving the state issue.
 Yes, that's one of the many things we're working on, but we're heavily
backlogged. If you feel like helping that would be great too :)

On Wednesday, July 22, 2015, Vijay Rawat notifications@github.com wrote:

> @sorccu https://github.com/sorccu Thanks found it. By state persistence
> I assume you are talking about client side tab's state. But shouldn't we
> save the screenshots for a device in db itself so that in the next session
> user can see his/her screenshots?
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/19#issuecomment-123652647.
  Hi!

STF is supposed to run in a server (Linux or Mac).

We don't support installation in Windows, sorry. I have just updated `package.json` to reflect that.

Once you get STF installed in a server, you will be able to access that server from your Windows machines without any problem (even from Internet Explorer).
 I don't think blacklisting w32 is fair. Although we never tried it, it might work via cygwin as long as you're determined enough to get everything necessary installed. I reverted the commit and put a small reminder about Windows to the installation docs.
 @Azusanya We don't provide Windows support, but the error looks like you don't have Git installed (or it's unable to find it for some reason).
  @nasahapps Can I ask how you installed node? Looks to me like you probably used the official installer, but I'm asking just to be sure.
 @nasahapps It does work for me on latest Yosemite, although brew installed the latest Node.js (0.12.7) instead of 0.12.0. Perhaps try upgrading?

I've seen the same error before due to having my repo inside Dropbox and/or BitTorrent Sync (they presumably "recovered" some of the files NPM wanted to delete before it got to delete the folder), but I don't think that's the case here. 

I've also seen similar errors occur due to permission problems, although the logs usually tell you if that's the case (it's usually a small message before the other errors). Might be worth running `brew doctor` and Disk Utility's Repair Disk Permissions just to be sure, though.
  Remote hosts are disabled by default because you can easily get into a situation where ADB is seeing the device twice (once as a USB device and once as a remote device). STF would then try to set up both and fail.

To enable remote devices, you can run `stf local --allow-remote`.

HOWEVER, you must keep a few things in mind.
1. After running `adb tcpip 5555` you must **unplug the device** first, and only after that run `adb connect ip:port`.
   - **If you don't do it in this order STF won't work because it tries to set up the same device twice.**
2. You CANNOT use the remote debugging feature (STF's `adb connect`) on the same computer where STF runs.
   - **STF will see the same device twice and fail, because it's already connected locally.** 
   - You can use remote debugging from other computers freely (with the `--public-ip` option)
3. `adb tcpip` is super slow. It's much, much slower than USB.

To make things a bit easier, you can give `stf local` a device id and it will ignore other devices. For example, `stf local --allow-remote phone-ip:5555` would prevent STF from trying to set up any other device than `phone-ip:5555`.
 The issue includes a solution. Furthermore, there are at least 5 more
issues about this. It's not enabled by default because it's a very bad
idea. Read some of the earlier issues to find out why.

On Wednesday, 7 September 2016, xiaweixing notifications@github.com wrote:

> I got the same issue, any resolution yet?
> 
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/16#issuecomment-245195977, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AAB-_YguiHTfnBPWd4XAsA-Z7uXlNkQ3ks5qnmUZgaJpZM4Fac0z
> .
  @tonatiuhromero 
We are planning to add a "view only mode" feature in the future
It will not be only a single device though, 
it will be a screen showing multiple devices at the same time in realtime.

@paulirish 
About the shift-click feature I've just opened another ticket #13 so we can keep the discussion there.
 @tonatiuhromero Actually in an old version of STF we had the ability to see multiple device logs at the same time in a single window. So we have to reimplement this, thanks for the reminder.
  Thank you!
We'll have a look.
 Truth to be told we have spent relatively little time perfecting the client-side implementation (which is actually quite hacky), because we initially were not able to produce frames quickly enough to start with. And even though we now are able to do that, we still had our old assumptions and didn't even bother checking if there might be some additional gains to be made there. Thanks for the reminder and detailed information!
  I submitted a [ticket here](https://code.google.com/p/chromium/issues/detail?id=388206) 1 year ago, but current status is WontFix because "We are experimenting with alternative ways of implementing wireless debugging".

As long as there is any update on this, we need to update this ticket.
 @paulirish 
That sounds good.

> For the attached device, you have a listing of the open tabs under the input field to launch a new one.

I'm a bit unsure about this one, listing all the tabs open in a device might make it browser-dependent (unless we can make tab listing work even on default browsers).

> You have an inspect button for them, clicking them opens devtools, probably embedded into STF instead of a separate window. So I still get the minicap + interaction of stf but with the full devtools over debugger protocol

Does this kind of interaction would be possible without requiring the security permissions of a Chrome extension? 
  Thanks, I'll add it in a few hours. If you can provide an icon for `com.chrome.canary`, I can add it too even though the app itself is not public.
  Hi!

Be sure to use 1.0.3 or later (and do `npm install` for updated deps) if you want to try `adb connect`. We had a bug in our implementation that newer versions of ADB brought up.

The error you're seeing is actually a bit different. You see, STF also supports `adb connect`ed devices. So what happens is that STF sets up your local USB device first. Then do you `adb connect` and it sees a second device, and tries to set it up too. However because you already had STF running on that device it fails because of the "double-setup". I'm currently thinking about perhaps disabling `localhost` sources from being set up automatically without some command line option, but what you can do right now is to give `stf local` the serial numbers you want to use, and it will ignore the rest (incl. the `adb connect`ed device), like this: `stf local T076001226`.

You should be able to see both your USB device and the remote device in your chrome developer tools. However, Android Studio is somewhat buggy and will not let you have the same device connected twice, causing random freezes and/or broken functionality in the UI. This happens with the non-STF `adb connect` too if you leave your USB device connected after `adb tcpip 5555`.

Also, since you're testing things out I'll just quickly mention that there's a bug in our reverse port forwarding implementation (Node.js side), causing occasional process deaths if you use that feature. I'm rewriting that part right now. 
 By the way it would be super awesome if we could get built-in support for `adb connect` in Chrome. There's an open ticket for it but it's being ignored because of the low performance of the native implementation. But it's not the only implementation ;)
 Hi! 

>   built-in support for adb connect in Chrome. 
> can you point me to the ticket?  

I've opened a [Chromium ticket here](https://code.google.com/p/chromium/issues/detail?id=388206) 1 year ago, but current status is WontFix because "We are experimenting with alternative ways of implementing wireless debugging." Do you have any update on this? 
If there is any work we can do to add support for Chrome directly (without needing to install ADB) we would gladly do it, and it would be awesome.
I've opened the #10 STF ticket to keep track of this.

> (speaking of performance, the perf of minicap is amazing.)

We are planning to make it even faster, the goal is 60fps on any decent device.
 Hi, I may be mistaken here but I believe what you're doing right now is:
1. Running `stf local` without any extra args
2. Then on the same machine, running `adb connect localhost:7401`

Doing this causes STF to see the same device twice (because ADB is seeing it twice). Then it tries to set up the same device using both the USB serial and the IP/port pair (which is used as the remote serial). Then it fails since they try to set up the same resources.

With 1.0.3, you can prevent this by running `stf local <your_device_serial_here>` instead of just `stf local`. This will cause STF to ignore the "new" device that `adb connect` adds.

Anyway, I just pushed a change to `master` to require an `--allow-remote` option if you really, really want STF to try and set up remote devices too. This should solve the problem, can you check and confirm? You'll of course still be able to see the device in your chrome developer tools.
  Merged, thanks! I think I'll do as you say and change the default version to 'latest'. The auth problem sounds like it may be a bug, would you be willing to create a separate issue for it?
  Hi,

Could you show me the command you used to launch STF (e.g. `stf local`)? Looks like the log cuts off a bit. I would also like to know which OS and browser you're using.

The CSRF token is sent over inside a cookie. Is it possible that you may be blocking the cookie?
  Hi,

Thank you!

You can change the IP address STF uses by launching STF with `stf local
--public-ip 192.168.1.100`. You should then be able to access it from other
machines via http://192.168.1.100:7100.

Note that for a real deployment you would not use `stf local` at all, but
instead start all the processes separately. Currently we lack documentation
for doing that, but `lib/cli.js` might give you a few hints. Later on we'll
publish systemd unit configurations to make it easier.

You can change the RethinkDB address by setting the RETHINKDB_PORT_28015_TCP
environment variable (it's link docker --link format). By default it's
`tcp://127.0.0.1:28015`. Users will not connect to the database directly,
though, so you usually don't have to change the address if you run STF
locally.

So, if you wanted to change both the public IP and the RethinkDB address,
you'd launch STF with something like this:

```
RETHINKDB_PORT_28015_TCP=tcp://192.168.1.100:28015 stf local
--public-ip 192.168.1.100
```

And you should be OK.
  Hi,

Thanks for the feedback. We're going to open source our shelf design
shortly!

On Thursday, July 2, 2015, Mark Murphy notifications@github.com wrote:

> The documentation in your README for relevant hardware is excellent! You
> might consider adding another section, with advice on the physical setup of
> the device farm.
> 
> For example: what exactly is shown in the photo at the top of the README,
> with the aluminum(?) slats holding the devices? My initial reaction was a
> rackmount system, but I would think that we would see holes in the vertical
> supports, and such holes do not appear in the photo.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/openstf/stf/issues/1.
 Sorry, we have no time to clean up the design for release. Furthermore, we
are targeting different hardware now, requiring a different design.

On Monday, 20 June 2016, joaopedroms22 notifications@github.com wrote:

> Hi @sorccu https://github.com/sorccu ,
> 
> There are some news about this topic or when will be released?
> 
> Regards
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/openstf/stf/issues/1#issuecomment-227109718, or mute
> the thread
> https://github.com/notifications/unsubscribe/AAB-_QmupwLIkMeecP9iTIMGhQk5c02fks5qNm-bgaJpZM4FQlK2
> .
