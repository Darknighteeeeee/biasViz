  **Description:**
- A-Frame Version 0-8-0: example showcase helloworld screenshot https://aframe.io/docs/0.8.0/introduction/html-and-primitives.html
I've updated the JPG to PNG as JPEG has lower quality by larger file size.:  https://upload.wikimedia.org/wikipedia/commons/6/62/A-Frame_Hello_World_example.png
So it would be good if it could updated.
I could handle any small improvement suggestion, as I have the graphic with text-layers.
 Oh* ok, done, but it doesn't include a Github link, instead a Wikimedia link!?  Hello,

I'm using A-Frame 0.8.2 with Vue.js 2.5.13 on Chrome 69.

In my scene, I have entities using gltf-model component, and an a-sky to have a 360 image as a background. In various cases (like having 10 entities at the same time, destroying/creating entities with v-for, destroying/creating the scene with v-if ), I get this error : 
 `THREE.WebGLRenderer: Context Lost`

The scene is broken, even reloading the tab doesn't help. Only opening a new tab allows recovering.

I had a look at https://github.com/mrdoob/three.js/issues/11435 and tried to apply this to my case, with no success : 

- listening to the `webglcontextlost` event on the `canvas` property of A-Frame scene object : it is fired properly.
- calling `forceContextRestore` on the `renderer` property of A-Frame scene object. Sometimes the scene object is `undefined`.
- listening to the `webglcontextrestored` event on the `canvas` property of A-Frame scene object : it is never fired.
- calling `reload` on the  A-Frame scene object : I get the `not a function` error.


Do you plan to manage this error at A-Frame level ? 
Anyway, how can I handle this problem which makes the experience very unstable ? 
Thanks in advance :)

- A-Frame Version: 0.8.2
- Platform / Device: Windows 10 on a laptop with a second display (which may trigger the error, as stated in the three.js issue mentionned above)
- Reproducible Code Snippet or URL:

 I actually see two problems : 
- there is an "amount" of entities which triggers the error;
- destroying entities with vue.js reactive features (v-if, v-for) doesn't free the entities from the total amount : when new ones are created, the error is triggered. The problematic number of entities is actually around 30, 20 MB each. The error occurs when the RAM gets around 90% (my laptop GUI uses shared memory). 

I changed the code so that entities aren't destroyed/created, I rather have all the entities loaded at once, and I make each visible or not during the experience. This way, the RAM is constant. Another workaround is necessary :  after the experience is finished, I reload the page to free the RAM for the next experience.

Previously, I tried to set/remove `gltf-model` attribute on the pool of entities, but the problem still occured. I looked at `gltf-model` code : on `remove`, it performs `removeObject3D('mesh')`, which doesn't cause the RAM to be freed. The loader works like a charm, but we're missing an unloader, I guess :) This is a problem, because in a database-oriented SPA, you want to be able to dynamically load entities without getting closer and closer to a crash :) 

To sum-up, I see the following issues : 
- the gltf loader doesn't free the RAM at remove
- the _context lost error_ isn't managed

All that being said, thank you very much for this excellent piece of technology, which makes VR so accessible :) 




  Hello all, when I go to the A-Frame site or any glitch project, if I try dragging my mouse on the scene to look around the camera starts spinning and points downwards. If I stop dragging the mouse it stays pointed down. If I try to readjust the camera view it starts spinning again.

I have tried disabling Tracking Protection, Privacy Badger, and HTTPS Everywhere, as those sometimes give me issues on other sites, but it doesn't seem to change anything here. 

It doesn't seem to happen on other WebVR things (such as [React's 360 here](https://github.com/facebook/react-360)). It also seems fine on Edge.

Let me know if there is anything else I can provide to help.

- A-Frame Version: Looking at the source for some of the A-Frame examples: 0.5.0, 0.7.1, and 0.8.2
- Platform / Device: Kubuntu 18.04 and Windows 10 on Firefox 62.0.2

 I think I found the cause. It was happening on other computer's if I had signed into Firefox. So I looked through my `about:config` settings to see if anything I had set might be causing it. Turns out the `privacy.resistFingerprinting` was set to true. Once I set it to false (which is default) it stopped behaving that way. 

Not sure exactly what part of `privacy.resistFingerprinting` was affecting it, but here is the [list of things it does](https://wiki.mozilla.org/Security/Fingerprinting). Ideally both would work (considering other WebVR things seemed fine), but at least there is a workaround for now.  Unless my understanding of basic geometry is incorrect (I always reserve the right to be incorrect), a hexagon has ~7~  **6** segments.

**Description:**

**Changes proposed:**
-
-
-
 Hexagon actually has 6; heptagon has 7. @dsinni lol, uh, yeah, whoops  Im working on a component that makes it intuitive to set up local clipping planes around geometries,
everything is working except that there is an inconsistency on what the right eye sees from the left

![clipping](https://user-images.githubusercontent.com/10274697/46055425-c2f81880-c100-11e8-9527-aed88b3b45f6.PNG)

- A-Frame Version: 0.8.2
- Platform / Device: all
heres a link to the glitch
https://clipping-planes.glitch.me/
 maybe you can try this patch against threejs 
https://github.com/mrdoob/three.js/pull/14950 That fixed it! It also fixed a similar issue with spot lights, strangely enough it didn't fix the frustum culling it was intended too.
  **Camera component componentchanged no longer fire**

- A-Frame Version: 0.8.2
- Platform / Device: macOS all browsers
- Reproducible Code Snippet or URL: https://codepen.io/squaretone/full/WgqaqQ

This worked in versions prior to 0.8.2. In the above pen, we subscribe to the `componentchanged` event of the camera and write the rotation output to the a-text when the event fires.  The `componentchanged` event is never emitted. If you change the referenced version of A-Frame back to 0.8.0 the example works.

Are event listeners no longer supported on the camera or is there a possible bug?

Thanks.
  @ngokevin i would like test this change, how do you generate the memory statistics?
  Hello! 
Can I use fisheye projection with A-frame instead of equirectangular? If you use UV maps laid out according to the fisheye projection it should work.  But that would involve creating your own UV map in a 3d program.  It would not work on a default primitive sphere in aframe.

These geometries may be of use to you.

https://github.com/AndrewHazelden/Panoramic_Geometry_Collection ![image](https://user-images.githubusercontent.com/7503097/45931254-83330480-bf39-11e8-82c5-e67811eee3ee.png)

this mesh is laid out for thetaS  as an example.  https://github.com/AndrewHazelden/Panoramic_Geometry_Collection/blob/master/meshes/ricoh_theta_s_mesh.obj  I use state event bubbling quite a lot for advanced interactions using super hands. For example, a selectable component which listens for state end events coming from the grabbed or clicked states of any if its children to keep track of the last selected child. I assume it is performance, but if we're not going to bubble them (which is kinda the point of using events for that IMO), then maybe you want to consider removing and reimplementing...  **Description:**
In the console, I get this:
```
core:schema:warn 
Unknown property `color` for component/system `material`. 
```
- A-Frame Version: 0.8.2
- Platform / Device: Laptop

I have a couple times that I mention color in material, but I don't know which one. About what?  Hmm. Appears to be working for me in `0.8.2`.

I forked the boilerplate, added a click listener, and disabled movement and look controls and it is logging every click.

The sphere is the clickable entity, not that you'll have much choice in the matter. :D

**Code**:
https://glitch.com/edit/#!/safe-tiglon

**Demo**:
https://safe-tiglon.glitch.me/
  I think the original experiments with simpler shader had other artifacts that were font specific.
If those are gone now (either no one uses the broken fonts anymore, or something else fixed it) then I am all for simplifying, +1 from me  Equivalent to reverseMouseDrag for mobile and tablet.

**Description:** added a reverseTouchDrag parameter

**Changes proposed:**
- using direction as it was used for reverseMouseDrag  Probably better especially since I can't imagine situations where one would want to have the opposite behavior on mouse vs touch. Still being curious about "creative" or artistic usages and wanted to preserve compatibility I didn't want to "take the risk". Up to you.   Im trying to make an gltf object,

First i make that object in aframe inspector and export them with this tools in the picture
![screenshot_2018-09-04_05-46-29](https://user-images.githubusercontent.com/29292018/45002894-257c5e00-b006-11e8-9aa7-6efc8ec43c1b.png)

then, im place the gltf model.and it doesn't show the opacity anymore
![k](https://user-images.githubusercontent.com/29292018/45002917-8a37b880-b006-11e8-9fa7-eb2d6aa9ad18.png)

Cheers,

- A-Frame Version:0.8.2
- Platform / Device:linux xubuntu 18.04 / lenovo g40-45
- Reproducible Code Snippet or URL:


 without gltf : 
https://sharp-penguin.glitch.me/
code> https://glitch.com/edit/#!/sharp-penguin

with gltf :
https://zesty-hide.glitch.me/
code> https://glitch.com/edit/#!/zesty-hide
 ok thank you, i will waiting   
![transparent-image](https://user-images.githubusercontent.com/369339/44789786-256dff80-abbb-11e8-9dbb-e3d680987dba.png)
Hi 
I am using .png rounded corner image with entity tempalate as data thumbnail when I go to virtual mode... rounded corner image appearing with black square box (see screenshot for further understanding ).
can you please help me into this issue ?
```
<img id="subway" crossorigin="anonymous" src="images/new/subway.png">
<a-entity id="links" layout="type: line; margin: 2.5" position="-5 4.6 -4">
   <a-entity template="src: #link" data-src="#expense-subway" opacity="0.5" transparent="true" rotation="0 30 0" data-thumb="#subway" class="links"></a-entity>
</a-entity>
```  **Description:**

- A-Frame Version: 0.8.2
- Platform / Device: All
- Reproducible Code Snippet or URL: https://github.com/mayognaise/aframe-mouse-cursor-component

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Hello it's about the component from https://github.com/mayognaise/aframe-mouse-cursor-component.

Here is the example. https://glitch.com/edit/#!/lapis-girdle?path=index.html:27:7

Click the cube using the mouse and it will turn to blue then click it again to turn it back to pink that was what I expecting but when I changed the version of  Aframe to 0.8.2 it will not work anymore. Thanks The `aframe-mouse-cursor-component` is outdated and no longer necessary. Use the `cursor` component setting the `rayOrigin` to `mouse`:

```
<a-entity cursor="rayOrigin: mouse;" raycaster="objects: .clickable;">
  <!-- Add any cursor geometry here -->
</a-entity>
```

**Code**: https://glitch.com/edit/#!/whispering-writer?path=index.html:25:8

**Demo**: https://whispering-writer.glitch.me/

 Hi @dsinni I have tried the demo in android Chrome  version 68.0.3440.91 in Huawei GR3 2017 Android version 7 and I can't change the color of the cube by touching or tapping it. I also inspect the Demo in Chrome Version 68.0.3440.106 in my laptop and I saw some warnings and errors. 
![touchissue](https://user-images.githubusercontent.com/22828729/44942564-03f15b80-ade7-11e8-94b7-b88646714641.png)
 @jayson04  I can confirm that I'm experiencing an extreme lag (it does sometimes change) when clicking on Android in that demo, but I only forked your code and updated the cursor entity as an example of how to use `rayOrigin`.

I suspect the issue lies within some of the surrounding code, e.g., code not being properly encapsulated within components or systems, or placed in the wrong part of the document, etc.

I recommend wrapping your code in a component to see if you have better results.  

There's also a strange button script at the bottom of the body, which I'm not sure of its purpose. 

If I have time, I'll make another demo from scratch to see if I can reproduce the issue.  @dmarcos: I can confirm that this is currently an issue in every Android browser that I've tested using both A-Frame `0.8.2` and the current `master` branch `d611e70`.

I created a simplified demo and tested in the current versions of Samsung Internet, Chrome, Chrome Dev, Canary, Firefox, Edge all with the same results. Touching only works sporadically and is either non-responsive or extremely laggy.

It works perfectly on PC, even on my touch screen, but no good on Android. I just tested with Safari on iOS as well with the same results as Android.

**Code**: https://glitch.com/edit/#!/abrupt-donkey

**Demo**: https://abrupt-donkey.glitch.me

 Thanks, @ngokevin. I removed the cursor from camera and fixed the typo, and the issue persists. I'll open a new issue with a more accurate title. @ngokevin @dmarcos Scratch that. It appears the cursor needs to be at the bottom of the scene. Simply removing it from the camera wasn't enough. I'm not sure if that's something that needs to be either addressed or documented.

After moving it to the bottom of the scene, it functions as expected: https://abrupt-donkey.glitch.me/
  **Description:**
This fixes controllers not being able to reconnect on Oculus Go and GearVR. The bug seems to just be due to a copy/paste error. This brings these 2 in line with the otehr controller components, keeping the `controllersupdated` event bound solong as the entity is playing. This is particularly important on Oculus Go as exiting VR causes the controller to disconnect (as far as the gamepad API is concenred) and the controller will reconnect when entering VR.

**Changes proposed:**
- Support disconnecting and reconnecting Oculus Go and GearVR controllers
  Currently the default to `preserveDrawingBuffer` is `false` when setting up `THREE.WebGLRenderer`. Can we provide users with an option to set this to `true` to allow them to mirror their scene on the desktop after entering VR?

A similar issue was discussed in [issue 926](https://github.com/aframevr/aframe/issues/926). According to this thread however, re-initializing the renderer did not succeed for the user unless they modified this parameter directly in aframe.js.

This issue was prompted by the following [tweet](https://twitter.com/thomasbalou/status/1030719598407110656).
  **Description:**

Expanding the commit-ish to the full hash doesn't harm us (and is good practice anyway,) and by doing so it lets us far more easily resolve the dependency and actually be able to install the package under, for example, PNPM. 

See pnpm/pnpm#1127

**Changes proposed:**
- Expand the commit-ish for document-register-element to the full hash
 Thank you!  This appears to be completely breaking the experience on Oculus Go, the camera appears significantly higher up than expected, and the arm model seems to no longer line up.

Also narrowed down another issue I was seeing in `aframe-physics-extras` to this commit. Not 100% sure what the cause was but it seems something about initialization order has changed. The issue was a race condition in `aframe-physics-extras` and not actually an aframe bug, but interesting to note that this triggered the issue, as it might also cause similar issues elsewhere. i have still some problems after the  d404990  

reverting e0c8ff7 solve my problem with my avatar loading and physics 

what exactly should e0c8ff7 solve? @ngokevin  plz reopen the bug (i will try to make a simple sample showing the problem)  **How to perform an event in JS when a Videosphere reaches a particular instant in its time duration**

e.g. 
I want an alert when 360 video is at 8th second. Now this is significantly different than this :
```
AFRAME.registerComponent('foo',{
    init:function(){
    setTimeout(function(){
    alert("8 seconds reached");
    },8000);
```
Because I believe that in this case the time for downloading the ASSET(**video**) is not counted.
It will **just get executed in 8 seconds** whether or not video has loaded to play.
**Am I thinking correct** ?

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  https://github.com/aframevr/aframe/issues/3675

Adding in utils.bindEvent like you suggested. I had to make a small change to component.js to execute each decorator when a new component is instantiated.. In my own version I was just monkey patching this in by wrapping some core A-frame functions.

Should this also go in the A-frame documentation? I'm happy to add it in just let me know where you think it should go.

 hmm I'm not sure that failure is related to the event decorators. Looks like its one of the a-animation tests. Understood, it is quite a high level abstraction. Now that I know that this complexity is definitely not what you want I can simplify the code a great deal if that can change your mind? Atm its written a lot more generally then is needed to handle the specific case of binding event listeners in init/remove and defaulting to the property name. Unfortunately it would still need that call to executeDecorators (or something thereto) in component.js.

I came up with this because I wanted event handling in A-Frame to look and feel more like in Unity 3D. In Unity common GameObject events like 'OnCollisionEnter', 'OnEnable' etc are mapped functions on components with the same name. Compared to addEventListener/removeEventListener/function.bind() I think its a more declarative, easier on the eyes way of managing events. Although there needs to be a bit of magic in the background to make it work. I'm rewriting it now, it can be way waaayy more simple. With all jargon fluff removed.
 New version is much simpler. No more jargon fluff about decorator functors. It should be more clear how it actually works now. I'm still not sure how to avoid that change in component.js, any suggestions for what you had in mind?  **Description:**
Minor grammar edits to docs page.
**Changes proposed:**
- changed "that with" to "that have" on line 30
- fixed blocky sentences on line 44  I could see this happening as a result of mixing different community components add a console warning on setAttribute for position, rotation, scale (depreciation) ?   **Description:**

- A-Frame Version: 0.8.2
- Platform / Device: Chrome/Oculus Go browser
- Reproducible Code Snippet or URL: please the bottom

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

I'm thinking of using Motion JPEG stream served via http as a source of 360 deg images, for example [mjpeg-streamer](https://github.com/jacksonliam/mjpg-streamer) which can capture JPEG frames from a web cam and streams via HTTP. However, currently `<a-sky src=...>` shows only the first frame of streaming. Is it possible to show Motion JPEG streams using aframe?

### Example
Tried streaming JPEG frames using mjpeg-streamer as described [here](https://github.com/jacksonliam/mjpg-streamer/blob/master/mjpg-streamer-experimental/plugins/output_http/README.md).

This html shows only the first frame of JPEG streams while `<img src="/?action=stream">` works fine.

```html
<html>
  <head>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
        <a-sky src="/?action=stream"></a-sky>
    </a-scene>
  </body>
</html>
```
 Thank you for your comment. I created a component like this and it worked. (this is the first time for me to use both aframe and three.js so it may not be an ideal code though).

```javascript
AFRAME.registerComponent('box', {
    schema: {
        width: { type: 'number', default: 1 },
        height: { type: 'number', default: 1 },
        depth: { type: 'number', default: 1 },
        color: { type: 'color', default: '#AAA' }
    },

    init: function () {
        var data = this.data;
        var el = this.el;

        this.loader = new THREE.TextureLoader();

        this.geometry = new THREE.BoxBufferGeometry(data.width, data.height, data.depth);
        this.material = new THREE.MeshPhongMaterial({
            map: this.getImage()
        });
        this.material.needsUpdate = true;
        this.mesh = new THREE.Mesh(this.geometry, this.material);
        el.setObject3D('mesh', this.mesh);
    },

    tick: function (time, timeDelta) {
        this.mesh.material.map.img = this.getImage();
        this.mesh.material.map.needsUpdate = true;
    },

    getImage: function() {
        return this.loader.load("/?action=stream");
    }
});
```  Include source files in the installed A-Frame package to allow developers to reference individual files and debug easier.

See discussion on https://github.com/aframevr/aframe/pull/3712 Of course do whatever you want but just be aware using `src` directly from npm is an anti-pattern.

the package.json file lists the entry point into the library. Other than that nothing about any npm package is required to stay the same. Every version could rename or move every single file. If you're linking directly to src then you're basically making a very brittle build for yourself and/or binding the developers hands as it means they aren't free to refactor as they see fit if they don't want to break your project. Not that I expect them to rename or move files but projects do do that from time to time and if you use npm as it's meant to be used going through the package.json's entry point then nothing should break.  **Description:**

Most modern browsers now support [EcmaScript modules](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#Browser_compatibility) with `import` / `export` syntax.

This means that people could start importing and using modules on the web without having to use something like Webpack or Browserify to make bundles which IMO makes it a lot easier to experiment with these things.

ESM also gives us an obvious way to import and publish complicated dependencies. If somebody has a cool a-frame plugin that they built, users can make use of it by simply `import`ing it from the URL it's published at without doing the CommonJS compiling dance or requiring authors to pre-compile their plugins.

Ultimately, I think this will make it easier for people to create small bits of reusable aframe code and reduce the barrier to entry for new users and help grow the ecosystem while promoting modern JavaScript practices.
  **Description:**

Web VR experiences are not working on chrome 68 screen appears to be frozen and drag gesture has to be used to interact with experience.

- A-Frame Version: 0.8.2

- Platform / Device: chrome 68/ android

- Reproducible Code Snippet or URL: https://aframe.io

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Saw the same problem. Sometimes, instead of this, I have the same problem as #3476 which was supposed to be fixed by using the latest version of A-Frame and Polyfill on Chrome 66. Nevertheless, I have Chrome 68 with latest versions of both A-Frame and Polyfill. On some web VR apps, I have the same problem. Take, for example, https://vivid.unit9.com which on Android 8 it freezes position on Firefox latest version, and on (mobile) Chrome latest it's extremely sensitive (as mentioned in #3476). https://konterball.com works fine on Firefox Android, but the A-Frame camera goes crazy when running on Chrome Android. Also double-checked, I presumed something was wrong with these sites instead of my client. However, not even https://aframe.io examples work for me. When I run most of them on Android Chrome, I still get the error mentioned in #3476. Should I comment there? Or open a new issue? @dmarcos Yeah I double checked it.
Chrome version : 68.0.3440.91
And I am facing this issue on Lenovo Android 6.0 
and Moto g5 android 7.1.2
 I only have this two devices for testing. https://aframe.io/aframe/examples/showcase/anime-UI/
This also appears to be frozen. @dmarcos One more thing if I host a scene locally on http server it works fine but if I change it to https I need to drag  to interact with it. Yeah https://webvr.info/samples/03-vr-presentation.html?polyfill=1 is working. Yeah https://immersive-web.github.io/webvr-polyfill/examples/ is also working So what does that mean that the webvr-polyfill examples are working?  By accident in my [commit](https://github.com/aframevr/aframe/commit/6c593aafea5f0eee59b5f673cfa679ed0da8cba1), I've deleted `---` which seem to be necessary for the docs creator.

  **Description:**

When using "laser-controls" on the currently-in-development version of aframe with an Oculus Go, the OGO model is shown on the screen as expected, but it is much too low - like our arms extend to our thighs and we hold the controller there instead of having the arm folded in a more natural pose.

In contrast, the GearVR controller model in version 0.8.0 is higher, in a more natural pose. That version doesn't have the Oculus Go controller model, though.

I haven't been able to test other controllers, so I don't know whether the problem is specific to the Oculus Go.

- A-Frame Version: master
- Platform / Device: Oculus Go
- Reproducible Code Snippet or URL:

```
<script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.js"></script>
<a-scene  antialias="true" cursor="rayOrigin:mouse">
<a-entity laser-controls="hand: right"></a-entity>
```
Full code at:
https://glitch.com/edit/#!/aframe-laser-controls
demo at:
https://aframe-laser-controls.glitch.me/ Is there some way to raise it, a workaround? Sounds like something may be causing issues with the arm model, in src/components/tracked-controls.js
Question, if you explicitly add a camera e.g. using <a-camera>, does the observed behavior change?
 I'm sorry @machenmusik, using what ? It looks like github ate your tags. I've noticed this also when testing with Vive Focus for our incoming vive-focus-controls component. In the laser controls example scene on master, the controller is located correctly, but the camera is far too tall. 

When using the focus in our project, on 0.8.2 with a camera rig structure, the location of the camera and controller are correct. That was supposed to be using a-camera, I think.  I am guessing that changes to the way position and user height are now managed by aframe may have messed up arm model behavior when not in a camera rig It's not limited to the arm model, though. The camera cursor appears pretty low as well (you have to look down to see it), since the camera Y is too high. The height of the arm model is quite possibly accurate when placed within the rig. I think this may be #3748 I can only confirm this. Been trying to messa round with the armModel parameter. It actually just makes it worse. I also encountered the same problem.
It seems that both of A-Frame and Three.js(WebVRManager) are adding user height.

three.js: https://github.com/mrdoob/three.js/blob/3148b9e3783ecf2eeaa3d1ca7242d6bcf082fac5/src/renderers/webvr/WebVRManager.js#L262
 Would this also be why the "cursor" doesn't work with the oculus go? It's always to low and won't track the camera at all.  **Description:**

- A-Frame Version: 0.8.2
- Platform / Device: HTC vive / Alienware R13 running firefox
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/

To reproduce issue open the hello world example and take a screenshot using ctrl + alt + s to take a regular screenshot or ctrl + alt + shift + s to capture an equirectangular panorama as documented at https://aframe.io/blog/screenshot/

Equirectangular screenshots are blank and and regular screenshots are now split screen and off center

Equirectangular screenshot:
![screenshot-hello world a-frame-1534047324763](https://user-images.githubusercontent.com/34930772/43998529-e0ea2876-9e3a-11e8-86f6-71d61c52e3a8.png)

Regular screenshot:
![screenshot-hello world a-frame-1534047315918](https://user-images.githubusercontent.com/34930772/43998530-e64269c8-9e3a-11e8-992a-32fceb8a444c.png)

The off center issue is hard to see in the hello world example so here is one from my own project

![screenshot-wikimmerse-1534046948967](https://user-images.githubusercontent.com/34930772/43998535-ff768488-9e3a-11e8-8b07-f4bec35065ae.png)

 Ah fair enough, in previous versions I've taken screenshots in VR using the vive buttons and they've turned out great. Is the intention to only support 2D screenshots? If that's the case I'll close this.  使用npm install 下载依赖失败  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: desktop
- Reproducible Code Snippet or URL:

https://aframe.io/docs/0.8.0/components/cursor.html

At the bottom in the section on Adding Visual Feedback the animation triggers
on the `cursor-fusing` event. The correct event is `fusing`. (perhaps it was different in the past)?

The current example will not work correctly if the reader copy and pastes.  Documenation for `a-entity` `stateadded` and `stateremoved` event says `evt.detail.state` contains the state that was added/removed, and the example shows the same: 
```
entity.addEventListener('stateadded', function (evt) {
  if (evt.detail.state === 'selected') {
    console.log('Entity now selected!');
  }
});
```
but  `state` is not actually defined on detail. Instead `evt.detail` is set directly to the state. https://github.com/aframevr/aframe/blob/030023f5aab128ce0cbe7aa24b83de5ec248cc04/src/core/a-entity.js#L750

Either the documentation is wrong or `a-entity` should be updated to emit `{state: state}`. A third option would be to imply that `addState` should be passed an object, but given nothing in a-frame does that, it is probably not correct.

- A-Frame Version: head
- Platform / Device: any
  **Description:**

Hello, I was hoping to create a loading screen in Aframe. I found the page below, it's about object loading but I couldn't figure out how to use it...
https://aframe.io/docs/0.8.0/core/asset-management-system.html#lt-a-asset-item-gt

```
var models = document.getElementsByClassName("model");

/*trial 1*/
for(var i in models){
    models[i].addEventListener("loaded",()=>{console.log("loaded!")});//CAN'T FIND addEventListener
}

function OnLoaded(){
console.log("loaded!");
}

/*trial 2*/
for(var i in models){
    models[i].loaded  = OnLoaded;
}
```

On the html file, I have some `<a-asset-item class="model" id="mainModel" src="./models/mainModel.obj"></a-assets-item>` ,

I stored all of models that has `model` class. And I tried to add event listener to its child but it said `"addEventListenr is not a function"` I don't think there is addEventListener to this element. 

So I console.logeed the children and I saw some events like variables in it (onclick, onmousedown etc..)
and added the variable, "loaded" and "model-loaded" to the children. This time no error but nothing happened.

I also tried with the event name "model-loaded" but also didn't work...
https://github.com/aframevr/aframe/blob/master/src/components/obj-model.js#L51

Can someone give me some examples of how to use `loaded` event for`<a-assets-item>`?
Thanks in advance.

- A-Frame Version: 0.7.1
- Reproducible Code Snippet or URL:
  **Description:** 

Project page with 0.8.2: https://zest-sandal.glitch.me/ 
Same page using 0.8.0: https://amber-girdle.glitch.me/ 

Whether entering fullscreen or actually using VR, hitting the button in the bottom right results in an error in both Firefox and Edge.  `too much recursion[Learn More] three.js:4791`. I haven't determined if this is only related to spectator camera or if similar scenarios would produce the same result. 

- A-Frame Version: 0.8.2
- Platform / Device: Windows 1803
- Reproducible Code Snippet or URL: https://zest-sandal.glitch.me/ 


  Screen looks like helicopter crash on multiple Android/Google phones. Works great on Iphones but other phones are not handling aframe correctly. The scene keeps spinning out of control. Is there a fix for this?

- A-Frame Version: 0.8.0
- Platform / Device: Android / Google
- Reproducible Code Snippet or URL:  http://artgala.lamplightheritage.com/

  **Description:** fixed bugs for documentation https://github.com/aframevr/aframe/issues/3684 and https://github.com/aframevr/aframe/issues/3688

**Changes proposed:**
- oculus go controls 
- introduction page order incremented to fix bottom links
  **Description:**
I have ran into an issue while experimenting with AR.js (https://github.com/jeromeetienne/AR.js/issues/146) that required me to enable [logarithmicDepthBuffer](https://threejs.org/examples/?q=log#webgl_camera_logarithmicdepthbuffer). AFrame does not include this option, so I thought that I would include it myself. 

**Changes proposed:**
- added logarithmicDepthBuffer option to the scene as an attribute.
- added logarithmicDepthBuffer option to renderer component (not able to modify after scene initialization)
 I don't think the component version of this actually works.

`<a-scene renderer="logarithmicDepthBuffer: true">`
When setting logarithmicDepthBuffer on [the renderer component](https://github.com/aframevr/aframe/blob/master/src/components/scene/renderer.js#L47), the property is checked to make sure it's not being changed after initialization, but it's never actually set on the renderer, nor is it [used by a-scene](https://github.com/aframevr/aframe/blob/master/src/core/scene/a-scene.js#L529). I think it needs to be treated just like antialias [here](https://github.com/aframevr/aframe/blob/master/src/core/scene/a-scene.js#L533).

`<a-scene logarithmicDepthBuffer="true">`
The attribute on the primitive works fine. Yes @andreyrd you're exactly right. `logarithmicDepthBuffer` is a property that can only be set on the renderer's creation just like `antialias`.  The renderer component only allows you to modify the renderer's settings after initialization, limiting you to only a few different properties to modify.

I noticed a note made in the code [here](https://github.com/Tino-F/aframe/blob/d210a212d5666c7e5e5b36e557073e674df85f86/src/components/scene/renderer.js#L31) to enable modification of `antialias` in the renderer component for v0.0.9. Of course when this gets implemented, doing the same for logarithmicDepthBuffer will more than likely be a matter of copying and pasting Not sure if this is a bug but using logarithmicDepthBuffer, rendering text is problematic. In fact, no text is rendered. 

JSFiddle here: https://jsfiddle.net/7aLh69gq/17/

You can toggle the logarithmicDepthBuffer setting from false to true and see the effects of it on the text. Moving the text forwards or backwards has no effect.   **Description:**

I found that the click event will not trigger again seem like the 'a-element' still focused
on mobile. I need to click the sky or other 'a-element' than the same 'a-element' can trigger the click event again.

I'm using the 0.8.2 version and it works if I back to use 0.7.0 version. So I believe that's the 0.8.x version bug.

- A-Frame Version: 0.8.2
- Platform / Device: Use chrome to simulation mobile environment.
- Reproducible Code Snippet or URL:


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 https://jsfiddle.net/9en8zt3q/

Use Chrome to monitor mobile environment by toggle device toolbar then reload the page.
Click the same `a-element` second time will not trigger alert again.

If you click another `a-element` after clicking the first `a-element`, it works.
If you change back to 0.7.x version, it works. @dmarcos Can it be related with [raycaster new event triggering](https://github.com/aframevr/aframe/pull/3250)?  **Description:**
Cleaned up an old experiment of mine, seems to be simple enough to be an example - let me know if you like it.


**Changes proposed:**
- added example

 Is the build failing on `component color animation: 'from' is not defined` related to my PR ? Hi, I've changed the link, made a weird link at first, hope its okay now :)  The caveats at the bottom of the page are no longer accurate. Specifically, the video can work in the browser when not on the home screen (line removed); and since iOS 11,  user interaction is required to play video. 

**Description:**

**Changes proposed:**
-
-
-
  Hello everyone. It seems since version 0.7.1 you can't click on objects wrapped in an a-entity tag.
[See fiddle](https://jsfiddle.net/9ex5Ljgp/22/) Hey @dmarcos 
I was using the most recent version. I need it for the canvas bounds scroll fix.
https://rawgit.com/aframevr/aframe/5d5590d/dist/aframe-master.min.js So I guess this problem is newer than 0.8.0. Similarly, I need the fix that is in master for 0.9.0 for this sound bug: https://github.com/aframevr/aframe/pull/3631 , but it is disabling all my click events.  How should a proceed adding the asset-sound-test branch to v0.8.2?
I tried this:

    git checkout v0.8.2
    git checkout -b asset-sound-test
    git cherry-pick 2a899cfcad336b
    npm run dist

Now some audio is working, some click events are working, but it's still is kind of broken.

Maybe because I'm getting an error that is looping very quickly:
THREE.WebGLRenderer: .animate() is now .setAnimationLoop().  a-frame.master.js:52009

      Also, I have click events to play the sound. Now they play even if the object is not visible, which wasn't the case before.  **Description:**

I understand that @greggman 's motivation behind this commit is to make it faster to install A-Frame as dependency:
https://github.com/aframevr/aframe/commit/53f58fee02783e366ba8ecf3ec6a360f28c8a65a#diff-b9cfc7f2cdf78a7f4b91a753d10865a2

However, I've been using A-Frame since day 1, and in all larger projects I've always included from source, ie. `require('aframe/src')` rather than  `require('aframe')`. Why? Because A-Frame is constantly evolving, and I often see the need to debug my way deep into A-Frame's code base to resolve issues both in my own code and in A-Frame's code base.

I also use some of A-Frame utilities and components independently of the A-Frame build, and again I do that by including the relevant file directly  from source.

After the change in the commit above, such things are no longer possible, and I can see that it already causes issues, so ie. this commit had to be made:
https://github.com/aframevr/aframe/commit/123102167dc4981c9ec24b36e47a0e8f746a0ecf#diff-b9cfc7f2cdf78a7f4b91a753d10865a2

**Changes proposed:**
- Let's rollback this change, since there's harm in installing all the files, but there's a big problem for developers such as me if we don't install all the files.

 Hasn't been fragile at all for me, and I've included from source since version 0.1.0. Plenty of things break in A-Frame, but I've never had any build-related issues.

If I'm the only who sees this change as a problem, I understand why we cannot merge this PR, I just find the whole "change package.json and npm link"-dance annoying when I'm debugging. That would work for me, want me to submit a PR for that?  All right, new PR here: https://github.com/aframevr/aframe/pull/3733  **Description:**

Solves #3410
Would like to see this in the next build

**Changes proposed:**
- Update canvas bounds on scroll
 @ngokevin What happened with the build? Did I do something wrong with the pull request? Doesn't work, breaks controls completely.  **Description:**

- Reproducible Code Snippet or URL:  https://glitch.com/~aframe

The code in the remixable Glitch demo used in the [Getting Started](https://aframe.io/docs/0.8.0/introduction/) tutorial has errors (e.g. someone replaced opening tags for sphere and cylinder primitives with box).

```
    <a-scene>
      <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" shadow></a-box>
      <a-box position="0 1.25 -5" radius="1.25" color="#EF2D5E" shadow></a-sphere>
      <a-box position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D" shadow></a-cylinder>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
```

should be:

```
    <a-scene>
      <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
      <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
```
  Description:
360° videos in Aframe's videosphere are not working correctly in the last versions of Chrome desktop. In particular, the video blinks (video alternates visible frames with white frames) while it is playing and is completely white when it is paused, in Chrome v67. Instead, in v66 the video works but is continuosly vibrating.
The videos work well on Firefox and on Chrome for Android. 

- A-Frame Version: 0.8.1/ 0.8.2
- Platform / Device: Chrome Desktop v66/67
- Reproducible demo: you can use the code of the videosphere example in Aframe's homepage.  Hi,

WASD, Controller and Touch Movement Controls get disabled when entering VR headset mode.

Is there a way to keep these movement controls active in the headset?

Thanks!  In cursor.js add 
`window.addEventListener('scroll', this.updateCanvasBounds)`
below the line
`window.addEventListener('resize', this.updateCanvasBounds)`

Solves #3410 
 I've created a pull request. #3710   Setting a repeat value on a texture and making a MeshPhongMaterial out of it is sending the warning
`THREE.MeshPhongMaterial: 'repeat' is not a property of this material.`
But repeat does have the desired effect so it must be a property?
when I remove repeat the textures stretch and don't repeat

- A-Frame Version: 0.8.2
-Chrome


```

for (let key in MAP_TYPES) {
      maps[key] = new THREE.TextureLoader().load("/src/assets/"+texture+"/"+MAP_TYPES[key]);
      maps[key].wrapS = THREE.RepeatWrapping;
      maps[key].wrapT = THREE.RepeatWrapping;
      maps[key].repeat.set(hscale, vscale);
    }

    const mat = {
      color: material.color,
      map: maps.color,
      normalMap: maps.norm,
      shininess: 30,
      aoMap: maps.occ,
      aoMapIntensity: 0.5,
      repeat: 100,
    }

    //take mat params and create a new material
    obj.material = new THREE.MeshPhongMaterial(mat);

```
  I changed the default geometry  and put new settings but it generate this warnings 

![image](https://user-images.githubusercontent.com/26094902/42953539-ab370366-8b48-11e8-80f4-69913095417e.png)


- A-Frame Version: 0.8.2
- Platform / Device: All
- Reproducible Code Snippet or URL: 

       ```
         <a-camera look-controls-enabled id="cameracontrolers" stereocam="eye:right">
            <a-cursor fuse="true" objects=".interactive" position="0 0 -1" geometry="primitive:circle;radius: 0.008; segmentsTheta: 32" material="color: #fff; shader: flat"></a-cursor>
          </a-camera>
```

 ```
<html>

<head>
    <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
    <!-- <script src="test.js"></script> -->
</head>

<body>
    <a-scene>
        <a-camera look-controls-enabled id="cameracontrolers">
            <a-cursor fuse="true" objects=".interactive" position="0 0 -1" geometry="primitive:sphere;radius: 0.008;" material="color: #fff; shader: flat"></a-cursor>
        </a-camera>
        <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
        <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
        <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
        <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
        <a-sky color="#ECECEC"></a-sky>
    </a-scene>
</body>

</html>

```

I just took the default page and added my code, It still cause warning

![image](https://user-images.githubusercontent.com/26094902/43004203-09348d94-8bfd-11e8-97bb-b384ef317330.png)

  **Description:**
Fixes typos in docs

**Changes proposed:**
- interactions-and-controllers.md - treatent should be treatment
- /components/material.md - caches textures are to not push should be so as to not push
-  **Description:**

PR #3095, which fixed #3092 wherein default values for array types were not being used, introduced cloning of array properties by converting them to JSON and back. For me, this means calling setAttribute for a component (when the array property itself is not being updated) converts an array of Date objects to an array of strings and also breaks any existing references to that array property value.

Perhaps #3092 could be solved in the schema parser instead by taking an empty string to mean "use the default" and #3095 could then be reverted. I will create this PR if you agree or if a better solution arises.  @dmarcos the behavior previous to #3095 was indeed to treat arrays differently in the clone function. Wouldn't that just reintroduce #3092? If you're OK with that, I'll send the PR (perhaps with a documentation note that arrays can't have default values) Ah I did misunderstand. Thank you. This would solve the type changing, but it would still break the references. Preserving the array object became the behavior in 0.4.0 and discussion in #2227 determined this would be the desired behavior, which was subsequently documented and tested in #2434.

I will prepare a PR that preserves this behavior and keeps array default values functional.   **Description:**

- A-Frame Version: master
- Platform / Device: oculus go
- Reproducible Code Snippet or URL:

```html
      <a-entity laser-controls raycaster="showLine: true; far: 4; objects: .clickable" line="color: white; opacity: 0.5"></a-entity>
      
       <a-entity id="scrubber" class="not-clickable" position="0 0 0"  rotation="0 162 0" visible="true">
          <a-curvedimage change-color-on-hover class="clickable" id="scrubber-main" position="0 0 -4" rotation="0 0 0" scale="1 1 1" geometry="height: 1; openEnded: true; thetaLength: 36; thetaStart: 0; radius: 8;" material="src: #sample-image"></a-curvedimage>
      </a-entity>
```
^ Using a sample image and the `change-color-on-hover` component from the docs.

Originally I filed #3692 when having trouble getting point/click to work, but then tracked it down to using `curved-image`. Basically the pointer coordinates do not correctly map to curved surface.

The math to fix this issue might be difficult as there are a number of variables to consider:

1. Position, rotation, `radius`, `theta-length` and `theta-start` of curved image
2. Position and rotation of parent entities, as shown in the above example
3. Raycaster position offset
    (I haven't been able to change the oculus go controller model position from origin but noticed that it is possible to change the beam origin, so that might come into play here)

By tinkering I was able to set the image into odd positions where the `mouseenter` would partially register in a segment of the image, but not the entire thing.

I was also not able to find an easy solve by simplifying the example as much as possible (removing the wrapper entity, removing rotation and position, etc.). i testing this with aframe master and see some problems not intersection in the a-sphere
ah works fine on the box   raycaster="objects: .box" so all looks good 
https://codepen.io/anon/pen/VBLqgY/?editors=1111

(original code from https://github.com/aframevr/aframe/issues/1841)  @dmarcos Right, the ray does not intersect with the curved-image correctly. Depending on target position sometimes it will get partial intersection (like the highlight will work on a portion of the curved surface but not all of it). Sorry that I didn't have time to create a full example, but our team switched to Unity after we dropped a bunch of time on this problem. Should be fairly easy to spin up a scene with a curved image, drop the change-color-on-hover script on it, and validate.   when i use aframe load .obj models ,there is an error occur, any .obj model can not load. who can help me,thanks !!
![image](https://user-images.githubusercontent.com/11953198/42436174-b05aa218-838b-11e8-9b6b-af95b5b9bd00.png)

```js
import 'aframe';
import 'aframe-animation-component';
import 'aframe-particle-system-component';
import 'babel-polyfill';
import {Entity, Scene} from 'aframe-react';
import React from 'react';
import ReactDOM from 'react-dom';

class AframeScene extends React.Component {
  constructor(props) {
    super(props);
    this.state = {color: 'red'};
  }

  changeColor() {
    const colors = ['red', 'orange', 'yellow', 'green', 'blue'];
    this.setState({
      color: colors[Math.floor(Math.random() * colors.length)]
    });
  }

  render () {
    return (
      <Scene>
		<a-assets>
        <a-asset-item id="myModelObj" src="assets/models/test/box.obj"></a-asset-item>
        <a-asset-item id="myModelMtl" src="assets/models/test/box.mtl"></a-asset-item>
      </a-assets>
	  <a-entity obj-model="obj: #myModelObj; mtl: #myModelMtl" scale="1 1 1" position="-30 -15 -30" rotation="0 0 0"></a-entity>

      </Scene>
    );
  }
}

export default AframeScene;
```  Awesome-aframe has been discontinued and now just refers users to aframe.io.

**Description:**
Awesome-aframe has been discontinued and is seemingly no longer a helpful resource

**Changes proposed:**
Remove awesome-aframe components from the learning resources list.
 Of course! Thank you.  I have a scene with aframe 0.8.2 in Chrome 67 and in Firefox Quantum 60. I have an a-ring element within a a-sphere element.
````
 <a-sphere radius='2' color='${color}'>
      <a-ring radius-inner='0.9' radius-outer='1' color='black' position='0 0 -1.8'></a-ring>
 </a-sphere>
````
If I set the position to ``0 0 1.8`` all is fine, but when I position the ring on the other side of the sphere and then rotate the sphere 180 degrees the ring is invisible. If I rotate the ring by 180 degrees, then it become visible again.

So it seems the ring is invisible from behind. Is this intentional or is it a bug?
 Clear, thank you  **Description:** the docs about oculus-go-controls are missing.

- A-Frame Version: Docs 
- Reproducible Code Snippet or URL: [https://github.com/aframevr/aframe/blob/3cce61a1d7421d8b06f87c4e7819cc54fb4d3a27/docs/introduction/interactions-and-controllers.md#L351](https://github.com/aframevr/aframe/blob/3cce61a1d7421d8b06f87c4e7819cc54fb4d3a27/docs/introduction/interactions-and-controllers.md#L351)

Broken link: https://github.com/aframevr/aframe/blob/3cce61a1d7421d8b06f87c4e7819cc54fb4d3a27/docs/components/oculus-go-controls.md


 Sure I'll do it now! 😄  I have been looking at 
https://github.com/aframevr/aframe/blob/master/src/components/gearvr-controls.js 
and 
https://github.com/aframevr/aframe/blob/master/src/components/oculus-go-controls.js

They're almost identical the only difference is the controller model and button colors. 

https://www.diffchecker.com/XdfsVLq7

In a future change, could those two classes be merged to prevent code duplication and increase fixes or addons to them?   This test makes sure that sound component can load the same audio resource more than once. This is a test for #3623. This is a test for #3454 too.  when i load .obj model,there is an error, anyone who can help me,thanks!
![image](https://user-images.githubusercontent.com/6321966/42410405-c4074ef4-821b-11e8-8783-dca4957f730b.png)

![image](https://user-images.githubusercontent.com/6321966/42410402-b3c3e70a-821b-11e8-9646-8ef46f601a78.png)
  **Description:**
According the source code this value is by default true. Is the documentation at fault or the code?

**Changes proposed:**
- Edit the documentation to correctly show the default value
-
-
  A `line` component will not update if using a cached `THREE.Vector3` to call `setAttribute`. I believe this is because `deepEqual` is used in component to determine if an attribute was actually updated or not. As such, this probably affects other components that similarly allow (or at least don't explicitly disallow) the use of THREE vectors. 

Aside from updating the `deepEqual` method, another option may be to allow forcing an update via another attribute like `needsUpdate`. 

```
        init() {
          this.end = new THREE.Vector3();
        },
        
        tick() {
          this.end.set(Math.random(),  Math.random(),  Math.random());
          this.el.setAttribute("line", {end: this.end}); //will not update after the first tick
        }
```
- A-Frame Version: 0.8.2
- Platform / Device: any
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/heavenly-piranha
 @InfiniteLee Another alternative is to save the object you get from `getAttribute`, change the value of `end`, and then use `setAttribute` with `clobber` set to `true`. e.g. https://github.com/mozilla/hubs/commit/4d5559d2cd57d82631d4308400265017b9eed1ef#diff-bafcf688d672a56b722fa967f5b16acbR51  Fixes #3531

I added docs for `stringify`, but I don't what `if` is about (mentioned in issue).  @donmccurdy any hint about that?  Fixes #3630  **Description:**
I'm trying to use aframe 0.8.2, but i don't know why, there are two camera icon after the page loading
like that:
![doppia_icona](https://user-images.githubusercontent.com/6594262/42135340-f81a2a3a-7d49-11e8-9f66-a952d16ceb2a.png)

Any suggestions ?

- A-Frame Version: 0.8.2
- Platform / Device: Linux, Browser
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I fixed, with a-assets tag and i've loaded the img on a-sky from javascript. I've read an old issue about double download of img on load, so i tried and works.  Sure! I'll be happy to get on this. Sure thing, will look into this within the next few days! Thanks for the clarification of where to put it.  three.js r93 includes experimental & incomplete [WebXR support](https://github.com/mrdoob/three.js/pull/13978/files#diff-c0e88b98497597a015ecf238e91ac3a0R292), but it's incompatible with [code in `AScene.setupRenderer`](https://github.com/aframevr/aframe/blob/master/src/core/scene/a-scene.js#L508) that expects `renderer.vr.setPoseTarget` to exist (since `renderer.vr` may be a brand-new `WebXRManager` that doesn't have `setPoseTarget`.) This will throw an exception if it runs in a browser with WebXR support. For example, you can reproduce this problem in desktop Chrome if you turn on "WebXR Device API" in chrome://flags and load more or less any A-Frame scene you like.

It seems to me that a proper fix would be for three to support `setPoseTarget` on `WebXRManager`, but in the meantime, if we wanted to, we could effectively disable three's WebXR support in A-Frame by manually forcing the `WebGLRenderer` to use a `WebVRManager`.

- A-Frame Version: 0.8.2 (after [r93 upgrade](https://github.com/aframevr/aframe/pull/3609))
- Platform / Device: Desktop Chrome (WebXR support enabled)
 Given that Diego added this for WebVRManager in r89, is there an expectation that someone already knows to add it to WebXRManager as well?  Is there an open three.js issue on it? @ngokevin 
i think this should be reopend threejs #r96  works fine with WebXR in google chrome Canary 
aframe master fails with the setPoseTarget   On the latest version of Aframe, two fantom gamepads are declared even if using the CV1 remote.

- A-Frame Version: 0.8.2
- Platform / Device: oculus CV1 and Firefox (latest)
- Reproducible Code Snippet or URL: 

Vrsearch.arthur-moug.in

Console.log(navigator.getGamepads());


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 it shouldn't happen. We enumerate the Oculus Touch with Oculus runtime. The amount of gamepads is according to the controllers that are turning on currently. https://github.com/wmurphyrd/aframe-super-hands-component/issues/140#issuecomment-401458291

In this issue you have pictures showing the issue  Previously, this would just fail silently. This branch is running a lot of user code (i.e. component `init`) so it's frustrating not to get any console output if it fails.

An easy way to test is to open one of the examples and throw an error during `init`.  When trying to detect the movement of the camera's position, the only change I can detect is the camera's rotation.  To move the camera around, I'm using the [A-Frame Extras](https://github.com/donmccurdy/aframe-extras) library. 

- A-Frame Version: 0.8.0
- Platform / Device: Mac OS X Sierra (10.12.6)
- Reproducible Code Snippet or URL:

```
document.addEventListener("DOMContentLoaded", function(event)
{
        document.querySelector("a-entity[camera]").addEventListener("componentchanged", function (evt)
    	{
    	        // The console message outputs 'rotation' and never outputs 'position'
                console.log("Event name: " + evt.detail.name); 
    		if(evt.detail.name === "position")
    		{
    		    console.log("Camera has moved from " + evt.oldData + " to " + evt.newData); 
    		}
    		else
    		{
    		     console.log("position has not changed"); 
    		}
    	});
});
```

Here's my HTML: 

```
<a-entity id="rig" movement-controls position="0 0 0">
      <a-entity camera position="0 1.6 0" look-controls="pointerLockEnabled:false"></a-entity>
 </a-entity>
``` @ngokevin What portion of the code would I need to update so that the event fires on the rig?   I had tried that before with no luck. Here's an example I put together and if you view the console, none of the console messages in the code will execute: [https://codepen.io/anon/pen/XYPLMP](https://codepen.io/anon/pen/XYPLMP) I was able to get the `tick` handler to work for the camera `position`.  However, is there a way to prevent `tick` from running when you're not moving the camera position?  I have a code like this, to display image on camera:

`<a-camera>
<a-image src="../images.png" width="0.5" height="0.5" position="0 0 -1"></a-image>
</a-camera>`

How to Increase & decrease image size when i put two finger and swipe on screen? Can you help me?

Sorry for my bad english. :(  **Description:**
When I use the WASD controls for moving around, it glitches me to the outside of the world.
- A-Frame Version: 0.8.2
- Platform / Device: Chrome on linux
- URL: https://hover-tech.glitch.me/journey.html
- Code: https://glitch.com/edit/#!/hover-tech?path=public/journey.html:13:61
  Hello! I am experiencing a gyro problem on 2 phones except they are accessing the gyro but with either random input, or very very sensitive input. If i keep my hand still and don't move it is almost still but i can see the micromovements on screen with my hand's micro shaking.

The Gyro works 100% fine with this link:

https://aframe.io/examples/showcase/sky/

but not the image gallery:
https://aframe.io/examples/showcase/360-image-gallery/

Honor 6x | Android 7.0 EMUI 5.0.2 / Google Chrome 67.0.3396.87 / aframe 0.8.2
&
Samsung S8 | Android / Google Chrome 67.0.3396.87 / aframe 0.8.2

Thanks!

P.S I noticed a different thread had a "No gyro working issue" that was fixed recently, with aframe.io 8.0.2, chrome 65 Samsung S8 so I believe this is a different problem. 
 I also wanted to confirm that non of the examples using AFrame 0.8.2 are working on my Pixel with Chrome 67. Gyro does not work at all. Oddly enough, my own project that uses AFrame 0.7 and this example: https://aframe.io/examples/showcase/animation/ which uses AFrame 0.5 work great.

I upgraded my project to AFrame 0.8.2 to work around the Android m65 issue, seems like 0.8.2 has its own problems.  **Description:**
adding workshop resources  When I try to view the 360 video example on the a-frame website with my Oculus Go, it works until I click the VR icon to go into true 360 format, and then all I get is a black screen. It was working this morning, so I am unsure what could have changed. same issue with stereo 360 
bit.ly/test-stereo
this link show a correction of the stereo component and worked well in vr few days ago. I have seen this as well (working, then not working), wondered if the change might be caused by an update to the Go browser.

But it still works in some scenes even after emptying the Go browser cache, so I have some investigating to do. Known issue. Fixed in 4.6.2. Caused by some issues when introducing foveated rendering.  As workaround - disable Fixed foveation in chrome://flags (set it to None). the workaround works, thanks!
Is there a way to fix it in production? Definitely, it will be fixed in the next release. Indeed, disabling foveation works. Had the same problem with simple photosphere. @Utopiah @WellanDraco  Where can disable foveation on Oculus Go (Oculus Browser) or A-Frame? on the browser via the flags page... that's why I asked for a fix in production (cant ask every user to modify their flags) @VasuBhog  On the browser, the reason why i asked for a fix for production (cant ask every GO user to set flags before accessing vr)...  I tried to play a video when marker is detected but in aframe the video started to play when the page loads. Due to this, when marker is detected the video is not playing from beginning. And also the auto play is not working in IOS safari (mobile). I also want to hide and stop the video when marker goes out of the screen.
Is there any working event listener when the marker is detected?

@jhsu  @RSpace  @arpu @bnolan  @andygill  Yes @dmarcos   This resolves #3276.  Perhaps worth noting/documenting that it also changes the behavior when recursive is true such that it no longer traverses the entity hierarchy.  I think I just ran into this issue. Using the latest from master recursive:true no longer works. I can target the nested elements by using a class but if they don't have a class there is no way to target them.  This pretty much breaks the default behavior.  **Description:**

The initial/default camera rotation seems to be wrong since an update to Chrome/Android. As seen in the example, the camera should face the logo at the start (which it does on desktop). However on the device specified below the camera faces 180 degrees.

Side note - is there a 'look at' type method for the camera that would correct this for me in the short term?

- A-Frame Version: 0.8.2
- Platform / Device: Chrome 67.0.3396.87 / Android 8.0.0 / OnePlus 3T
- Reproducible Code Snippet or URL: https://www.homerandfarley.com/

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

![screenshot_20180618-124929](https://user-images.githubusercontent.com/1055769/41534535-c6ea83e0-72f6-11e8-8e54-e21309d7f746.jpg)

 @homerjam I just checked your website on my Honor 6x and it seems to be working fine, unless i don't understand your issue. Can you confirm it is still a problem?

Honor 6x | Android 7.0 EMUI 5.0.2 / Google Chrome 67.0.3396.87 / aframe 0.8.2 Hi @Xrispy7 thanks for testing. Yep still a problem, just to help clarify the first image is what you should see on entry to the site, the second is what you actually see...

1. Correct view:

![screenshot_20180625-101308](https://user-images.githubusercontent.com/1055769/41841645-bf7003c8-7860-11e8-880d-acc439448b35.jpg)

2. Actual view (on my device):

![screenshot_20180625-101258](https://user-images.githubusercontent.com/1055769/41841687-d911f430-7860-11e8-9a54-deab47073644.jpg)

 That's odd, I'm new to A-frame but it's possibly a device or chrome browser issue because your site loads correctly on my device.

Honor 6x | Android 7.0 EMUI 5.0.2 / Google Chrome 67.0.3396.87 
![screenshot_20180625-124529](https://user-images.githubusercontent.com/4562279/41872488-f1246a2e-7876-11e8-8f7a-e5d9430a54c8.png)


 I suspect you are correct. I've attempted to raise an issue for OnePlus as that seems more likely. Leaving open for now until I get clarity. Same issue in Canary. I suppose this would indicate a device/sensor problem? FWIW this also happens on the A-Frame examples. I have now filed a report with OnePlus.

In the meantime if anyone has any ideas for a workaround (I can detect a OnePlus device using user agent) that'd be appreciated. I'm wondering if I can somehow offset the devices accelerometer Y rotation - not sure at what stage I need to do this though - Browser/Three.JS/WebVR Polyfill/A-Frame?? I think I have tracked down where the offset needs to go: https://github.com/immersive-web/cardboard-vr-display/blob/d97e0ec3e4144bd227b498bd7afa6f6270f712d2/src/sensor-fusion/fusion-pose-sensor.js#L183 Due to the sensors being incorrect on specific devices, not sure how this is something the polyfill can detect and handle, and should most likely be handled after receiving an updated pose -- can probably be handled by nudging the A-Frame camera on every frame; more info: https://github.com/immersive-web/webvr-polyfill/issues/310#issuecomment-417356998  **Description:**

- A-Frame Version: 0.8.2
- Platform / Device: Chrome
- Reproducible Code Snippet or URL: Any with timeout

Currently setting timeout to 1 will cause a WebGL error for video about non-power of two textures, because the texture isn't loaded yet. onloadeddata should at least be called once before play and resolve() can be called on first onloadeddata callback.

Next to that, the buffer might never reach 100% of the video length, and thus the user might have to wait -say- 2.5 seconds out of 3 seconds (when timeout = 3). This is expected behaviour because most browsers only buffer a very small portion of the video. Also this is very browser dependent and will lead to different behaviours across browsers.

An alternative could be to update the timeout when onprogress is called, with -say- 1 second instead. Each progress call grants another 1s timeout. This way the user only waits a max of 1 second after buffer loading ends. But this could also behave differently across browsers.

What usually is done to fix the buffer loading ending early, is to play through the entire audio/video first, which will ensure the entire clip is loaded in cache. However, with cubemap videos the filesize will be so large it might very well be cleared from cache again anyway.

It's probably better to at least disable timeout functionality by default (instead of 3000ms). Right now, most browsers will wait 3 seconds while actual loading ends very early. If you set timeout to 1 you may get that error once but for me videos still work once you get through user gesture click to play etc.

I thought that if you didn't want to wait you can stop putting your videos within a-assets, but that was a long time ago and maybe that has changed since then.  `THREE.Object3D.getWorldPosition` [already internally calls](https://github.com/mrdoob/three.js/blob/12e7e072a595dfba6374a36c76da308ec0a04cf4/src/core/Object3D.js#L446) `updateMatrixWorld` in order to always produce an up-to-date position, so we don't want to call it ourselves first -- that's just doing the work twice. By the way, I would be interested to understand why `raycaster.checkIntersections` calls `setTimeout(updateLine)` at the end. Why can't it just call `updateLine` directly? Alternatively, can `drawLine` happen in the next `tick`, instead of in a separate timeout? I ask because the raycaster code is fairly performance-sensitive for our team and `setTimeout` is relatively slow.  > I would love to hear what effects people want to see first.

Santa is coming! :D My wish list, in order: SSAO, Screen space reflections, Chromatic Aberration, Noise/grain. This is awesome and will give webVR visuals a much needed push! feiss's list is pretty much it, I think those are the most needed (SSAO above all). As a super low-priority one I'd suggest a glitch/digital distortion effect. I would love to see effects related to simulations of how people would see aframe experiences with various vision problems. Filters for viewing red/green color blindness would be the first one I would appreciate! [Reference: Be Kind to the Color Blind](http://www.particletree.com/features/interfaces-and-color-blindness/)   THANK YOU!!!!! SSAO, Screen Space Reflections, Chromatic Abberation, Motion Blur would definitely be wanted. PLEASE PLEASE ADD DoF for 2D!!!!!  Looks great, color grading/tonemapping/color curves or however you like to call it would be high on the list for me. Based on some basic paint.net effects I like, my favorites are:

Artistic - Ink, Oil, and Pencil
Blurs - Gaussian, Motion, Radial
Distortion - Crystalize, Tile Reflection, Dents
Style - Edge Detect, Emboss

All should be animatable! :) looks very nice but why not use the soucecode from Threejs examples as import ? 
like the https://github.com/mrdoob/three.js/blob/dev/examples/js/postprocessing/UnrealBloomPass.js 


 it would be possible with the webpack three plugin 
https://github.com/mrdoob/three.js/issues/9562#issuecomment-415022483 or maybe using this threejs https://github.com/vanruesc/postprocessing
i only add some findings to this PR

some more shaders 
https://github.com/libretro/glsl-shaders  It is essential for non-English users like me to know how to use non-ASCII characters in A-Frame. I added a section about how to generate a custom msdf font to use non-ASCII characters. In my case, it is Japanese characters. Is it okay to merge this PR? Is there anything missing?  Android WebView using Chrome Canary (Chrome 69) breaks devicemotion event for aframe.io samples.

We are seeing this with our own app that uses android WebView, but testing it with an app called WebView from the play store shows the same issue. Get chrome canary. Go to your developer settings on your phone and set webviews to use chrome canary. finally use the webview app to go to aframe.io. looks like the device motion event is broken? 

- A-Frame Version: 0.8.2
- Platform / Device: Android WebView Running Chrome Canary (Chrome 69)
  **Description:**
Adding an attribute to the scene component which allows you to set a maximum height/width.
Currently, you get some big frame drops on high-density screens in a full width window – especially on iMacs & Macbooks with retina screens and slightly less powerful GPUs.

Was just a first stab.
Would it be more useful with a separate width and height attribute?
Tried this rather than a pixel ratio attribute, as you can make the most of the high-density screen at smaller sizes. Great!

I've implemented the two separate attributes, and added them to the renderer schema to stop the warning. Though the default doesn't do anything. 

Size caps are ignored in VR mode.

I'll update the documentation also, if that's all okay?

EDIT: Will figure out what's going wrong with the test failing Ahh, of course.

Let's say your screen was 1920x1080 at pixel ratio of 3 – and the cap is set to 2560 x 2560. If the pixel ratio was then set to 1 but a size larger than the screen, would it cause any problems? Agreed that would be much simpler – but maybe there's value in the max size, since it means you can make the most of the pixel ratio at smaller window sizes where it wouldn't be a frame rate issue?
Perhaps we could add an option for pixel ratio also?

I've just pushed a change that should hopefully fix the sizing on retina screens.  Hi,
I have draco compressed GLTF images which needs to be loaded using aframe. When trying to load it using the new gltf-model component I am getting "components:gltf-model:warn THREE.GLTFLoader: No DRACOLoader instance provided." error. I hope this is because there is no option to specify the dracoloader which can be passed as argument to the threejs GLTFLoader -> setDRACOLoader function. Please help... Tried to check the above solution by hardcoding the decoder path instead of passing as a parameter. Now getting "defs.map is not a function" error in GLTFParser.prototype.getDependencies function. Seems like defs is an Object but the map function is available only for Array in javascript..Can some one help me to identify a solution for this? Thanks for the suggestion. The model I had did not work in GLTF viewer as well. 
After some analysis, I came to know the information in the model was lost when using the gltf-pipeline master branch. 
Now I have used the 2.0 branch of the Gltf-pipeline with draco compression option and it worked fine. Once again thanks a lot for your guidance. Hi @ainian 

Could you by any chance outline the steps you followed to get your gltf-pipeline optimised model working in the current version of a-frame?

My model loads in the gltf-viewer but isn't loading in my own test...

```
components:gltf-model:warn Cannot read property 'byteStride' of undefined 
aframe-master.js:55211 Timer 'GLTFLoader' already exists
```

Thanks in advance! I'd be really curious to see how you did this as well, @ainian !  **Description:**
When using the following code for using an .obj file, this does not get correctly displayed.
Am I doing something wrong ?

- A-Frame Version: 0.8.2
- Platform / Device: Windows
- Reproducible Code Snippet or URL:
```
  <a-scene vr-mode-ui="enabled: false">    
    <a-assets>
      <a-asset-item id="ass-obj" src="./shop_3002.obj"></a-asset-item>
      <a-asset-item id="mat-mtl" src="./material.mtl"></a-asset-item>
    </a-assets>
    <a-entity camera look-controls>
      </a-entity>
        <a-entity id="target" obj-model="obj: #ass-obj; mtl: #mat-mtl" position="0 0 0" scale="0.001 0.001 0.001" rotation="-90 0 0">
      </a-entity>
   </a-scene>
```
![3002 - 3d builder](https://user-images.githubusercontent.com/39618522/41350812-a57c7212-6f14-11e8-887b-0dff05d78ec2.png)
![3002 - aframe](https://user-images.githubusercontent.com/39618522/41350813-a59a99c2-6f14-11e8-8844-36b8b9a02c9e.png)


[shop_3002.zip](https://github.com/aframevr/aframe/files/2098045/shop_3002.zip)


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Hi, I followed your instructions, it shows correctly after export from blender to gltf format.

What happens in your exporter that corrects this model ?? Or what is wrong in the model that you correct ?

Thanks  Getting updated files

**Description:**

**Changes proposed:**
-
-
-
  Hi, This is more of a question than a bug. Is there a way to supply a model object(gltf) rather than through a URL? I ask because Im using webpack and the company project config is not very lenient towards loading URLs which arent part of the project source.  this feature was deprecated in three.js/commit/a07f3f7037a5abd58b6335a6a4bd168b0e11393e

**Description:**
remove attempt to use deprecated three.js feature

**Changes proposed:**
- remove line 10 from `src/components/collada-model.js`

**Questions**
I was unclear on if I should commit the updated/built files? It's really only `src/components/collada-model.js` that changed. Should be good now?  **Description:**

- A-Frame Version: newest
- Platform / Device: Oculus Go or alternatives
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/360-image-gallery/

I'm looking for a portable VR headset which is supported by aframe.  So does anybody know if the Oculus Go can show the 360 image gallery example?

https://aframe.io/examples/showcase/360-image-gallery/

If yes, how can you upload the aframe code to the Oculus Go? Do you need a Wireless connection to the PC? Or must it be accessed by a browser - if so does Oculus Go have a inbuilt browser and internet connection?

Are there also any other portable VR headsets like Oculus Go (no cardboards, no smartphones) in the market which can be used with aframe? Any proposals?
 The 360 image gallery example is not working on the Oculus Go (Version 88830.2550.0). Screen stays grey, selecting the VR button has no effect.
![com oculus vrshell-20180726-213451](https://user-images.githubusercontent.com/3518808/43284507-4ee363fa-911c-11e8-9b96-9fa44404d94d.jpg)
 This example uses aframe Version 0.3.2. Could you try to use any other aframe html site with newer build 0.8.0. Also would it be possible to save aframe code local to oculus go and load it with the in-built broswer from the internal storage? (This would be required if there was no internet connection for any reason) A-frame 0.8.0 works fine on the oculus go. I just wanted to inform that the example discussed here doesn't work. Thanks for pointing out that the 360 image gallery is based on an older aframe version, so that should be the reason why it's not working on the oculus go. 

Probably it would be good to update the example.  **Description:**

- A-Frame Version: 8.2
- Platform / Device: I-Phone
- Reproducible Code Snippet or URL: [JSFiddle](https://jsfiddle.net/Spencer101/u645omwj/1/)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

I made a VR world where you look around and tap to move forward. However, when you go into VR mode on a mobile device, for some reason you don't move forward. I think that this is a bug in aframe. Please help me figure this out, I have been trying to fix it for hours.
 I don't get how to use rigs though.
I tried and I couldn't figure it out.
 @Spencer1O1 ask question on [stackoverflow](https://stackoverflow.com/questions/ask?tags=aframe)  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: I-phone
- Reproducible Code Snippet or URL: [JSFiddle](https://jsfiddle.net/Spencer101/u645omwj/)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

I made an aframe vr world, and when you are not in vr mode, if you tap, it moves you forward. However, whenever I switch to vr mode on mobile, the tapping doesn't work. Also, what is up with the screen getting darker when you tap in any mode on mobile?
  Description:
When I view my page on an i-pad it doesn't allow me to move. Is there a fix?

- A-Frame Version: 0.8.2
- Platform / Device: Chrome on IOS
- Reproducible URL: [HoverTech](hover-tech.glitch.me/journey.html)
 As you do with WASD of the arrow keys.  **Description:**

-6.0/7.0/8.2:
- Chrome:
-https://upward.glitch.me/

On the project I am working on,
Gltf model can be only loaded in A-frame 6.0, never works on any newer version
For any one who has the same issue, the 6.0 Afrmae is here https://aframe.io/releases/0.6.0/aframe.min.js
  Document how to disable the stereoscopic view on desktop mode when using HTC Vive... Why it is default? Don't make sense to me...

- A-Frame Version: 0.8.2
- Platform / Device: Desktop
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/

![image](https://user-images.githubusercontent.com/16566338/41078075-cffa16b2-69f0-11e8-8e65-6e8774e64f13.png) Ok. How to use spectator? Don't exist documentation about it or any example... I set true to spectator and I continue see the setereoscopic mode on desktop... 

I continue talking about it, because I will present a talk in this weekend using an HTC Vive on stage and it's out of ideia using the stereocopic mode during the talk... I really need desable this... I don't want create a websocket server to replicate all my scene on another browser because of this... Page Not Found :( <img width="1440" alt="screen shot 2018-06-08 at 15 49 35" src="https://user-images.githubusercontent.com/16566338/41175466-8f98199a-6b33-11e8-9953-81b21010fc9b.png">
 It works if I use > https://oceanic-market.glitch.me/ but I'm not test using Vive yet.

Thank for your time @dmarcos.   This test makes sure that sound component can load the same audio resource more than once. A test for #3623. This test fails now. I will recreate this PR.  **Description:**

- A-Frame Version: 0.8.2
- Platform / Device: Chrome
- Reproducible Code Snippet or URL: Below

Running `AFRAME.utils.styleParse.stringify` on attributes with coordinates outputs `[object Object]` instead of correct coordinates.

Example:

```js
AFRAME.utils.styleParse.stringify({
	"depth": 1,
	"distance": {"x": 1, "y": 0}
})
// "depth: 1; distance: [object Object]"
```

Shouldn't it use the `AFRAME.utils.coordinates.stringify` by default on coordinate type attributes? @dmarcos how do I get the changes that A-Frame Inspector does to the scene? I see there is an external `generateHtml` function. Shouldn't it be accessible?  Events `mouseenter` and `mouseleave` (from `cursor` component) are triggered each time on parent element when moving cursor between child and parent element. 

Shouldn't `mouseleave` be triggered only if cursor is moved away from parent and it's descendants? If no, maybe this beaviour should be documented?

- A-Frame Version: 0.8.2
- Platform / Device: Chrome / Firefox
- Reproducible Code Snippet or URL: https://codepen.io/anon/pen/jKrWEZ

  If I use an audio resource(sound.mp3 for example) in an entity only, then it works, but if I use it in more than two entities, then only the first entity can load that resource and the other entities fail to load it. That is because AudioContext.decodeAudioData() is a destructive function, once an ArrayBuffer is given to that function, that ArrayBuffer becomes empty. An empty ArrayBuffer remains in THREE.Cache. Then if the next sound component uses the same audio resource(the same asset or the same url), since that ArrayBuffer is already empty, decodeAudioData fails to load, so other sound components can't load the audio.

AFAIK this is a problem of THREE.AudioLoader. But I would like to fix it in aframe's sound component because it is a basic feature of aframe and beginners like me must be confused by this bug. Could you advise me something? My idea is to implement a custom audio loader based on THREE.AudioLoader. I will make a pull request.

- A-Frame Version:0.8.2
- Platform / Device:All
- Reproducible Code Snippet or URL:https://jsfiddle.net/yuseit/egsdcm47/23/

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Yes, I will do. Thank you. This issue has already been reported on THREE.

mrdoob/three.js#13710 This may be a dupe of #3454  This problem has been fixed in three.js r94.  **Description:**
I tried rendering out a scene with several models in it and enabled the WebVR flag to check it out on a daydream headset on a Samsung Galaxy S8, but the scene just froze and the gyro wasn’t functioning in Magic Window Mode. **I was able to pan the scene** with my finger in Magic Window Mode and **the gyro did function when I entered VR Mode**

I tried out the default A-frame scene which I have linked below and faced the same issue. Tested out the same on a Pixel 2 XL and a One Plus 6 and had the same results.

- A-Frame Version: 0.8.2
- Platform / Device: Galaxy S8, One Plus 6, Pixel 2 XL
- Reproducible Code Snippet or URL: https://lush-waitress.glitch.me/
- Chrome Version on Galaxy S8: 67.0.3359.158
- Chrome Version on One Plus 6: 67.0.3396.68 
- Chrome Version on Pixel 2 XL: 67.0.3396.68 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 VR Mode works just fine, I'm talking the gyro not working while opening the above scene and viewing it in basic 360 mode when the WevVR flag is enabled. The gyro works just fine when I enter VR but not when I'm in 360 mode.

Linked a video here : https://youtu.be/KBMdWM9opG0  **Description:**
https://github.com/aframevr/aframe/issues/3573
Matching the name change in three.js to fix a NaN error in the stats panel

Not sure why the vertices stopped working also, as I couldn't find the change that broke this – are vertices shared? If so the calculation for vertices will be incorrect.

EDIT: Ignore my stupid mistake with the vertex calculation!
 Just found this: https://github.com/mrdoob/three.js/pull/13404
Should vertices be removed from the panel all together? Done, thanks!  Checked on #3607, and on a [hebrew keyboard](https://www.lexilogos.com/keyboard/hebrew.htm) to get some touch on how it works, how about this:
- reverse word order in a line, and check each word:
a) if numbers, don't reverse the characters
b) if in the alphabet, likewise
otherwise reverse characters. 
Keep the line order intact.


like i did [here](https://github.com/gftruj/aframe/blob/3612/src/components/text.js#L326-#L375).

- if right-to-left, [anchor to right](https://github.com/gftruj/aframe/blob/3612/src/components/text.js#L282), and [align to right](https://github.com/gftruj/aframe/blob/3612/src/components/text.js#L329).

Seems to be [working](https://imgur.com/a/5UPPUdt), checked it out with some weird(polish) characters.
  **Description:**

Hi, I was wondering if there is a way to create hotspots in aframe without utilizing the components like in the "360 Gallery" in the example page. And create hotspot via DOMElements to overlay on top of the canvas.

I stumbled upon this [link](https://www.youtube.com/watch?v=xOCNWqnuqoI): and was hoping to get some calrification if the "<a-hotspot>" tag exist at all in the current aframe?

Thank you in advance.

- A-Frame Version: v0.8.0 Latest
- Platform / Device: MacOSX High Sierra
- Reproducible Code Snippet or URL:
  https://github.com/mrdoob/three.js/wiki/Migration-Guide#r92--r93
https://github.com/mrdoob/three.js/milestone/6?closed=1

`npm test` passes, and I ran all tests and examples in localhost:9000/examples on Ubuntu Firefox, without VR, and fixed a few simple warnings that flew out related to recent three.js API deprecations. Everything looks good at a glance.

It would probably be nice to test VR.

(Actually, the "Generic Logo" example doesn't work for me. But it doesn't seem related -- it also doesn't work for me on the [live site](https://aframe.io/aframe/examples/animation/generic-logo/). Tried Firefox and Chrome both.)  text elements render hebrew text in reverse string order.
simply reversing the string is not sufficient because it will introduce errors for multilingual text, multi-digit numbers, and multi-line wrappings  Hi there,

I need to delay the loading with webpack. I'm using vuejs with axios to get my media url on mouted, and I get an unrecoverable components:texture:warn Video element was defined without `src` nor `srcObject` attributes.   Test out a fix for #3603

This (probably) shouldn't be merged until the upstream fix (immersive-web/webvr-polyfill#323) is merged in. I'll update this PR at that time The linked issue was superseded by one on the upstream: https://github.com/immersive-web/cardboard-vr-display/pull/25

I believe @jsantell landed a PR in that upstream-upstream repo that fixes this: https://github.com/immersive-web/cardboard-vr-display/pull/28 

Not sure if it has made it into a webvr-polyfill release (ie what is actually consumed by aframe) yet, though The change has landed downstream in webvr-polyfill `0.10.7` which no longer uses `screen`  honestly I think you only need aframe-master.js

**Description:**

include only files in `dist` in npm pacakge

**Changes proposed:**
- include only files in `dist` in npm pacakge

see #3600  I'm curious why do docs need to be installed with npm?

Does the aframe library reference the docs directly? Is there some place where it says if you want to read the docs to go to `<currentfolder>/node_modules/aframe/docs`? 

npm's point is to install code libraries. Those packages then often get bundled into apps. Anything in those folders get included into those apps. For example if someone makes an electron app or a phonegap app and includes aframe those docs will then be embedded in their app.

It seems like if people want docs locally they should clone the repo. npm packages are not for docs they are for code. Generally docs should appear somewhere else.

Just trying to understand why docs should be included. > The Markdown files (just flat files) shouldn't be included in applications if they aren't required. 

Unfortunately that's not true. The app has no way of knowing what files are needed. Require is not enough to tell. Some libraries have files the code references either by loading directly (node, electron) or by XHR/Fetch (browser) whether it's images, fonts, svgs, icons etc so they always have to include everything included in whatever npm downloads.
  this will probably work but it seems like the [canvas-texture](https://github.com/aframevr/aframe/blob/master/examples/test/canvas-texture/components/draw-canvas-rectangles.js) example will need to do something to set `needsUpdate` for the texture inside its `tick` handler  Awesome work with Aframe, really appreciates it!

I want to ask about performance on the Oculus Go, I am with the stats module only getting 46 fps for what is a really simple scene, also without the anti-alias attribute.

https://glitch.com/edit/#!/lunar-stealer?path=index.html:10:116

![image](https://user-images.githubusercontent.com/1126497/40458713-ca5bf278-5efd-11e8-89f4-e8f4c90905fa.png)

The image taken inside the Oculus weirdly says 63, must be the way it takes a screenshot that gives the browser more cpu time as the screen goes black while it does it, but the raf says correctly 24,5 which would be 1000/24,5=40,8 fps

I know it is probably premature optimization, but shouldn't it be able to get 60 fps and a raf of 16? Will this make the animation stutter if the scene just get a little more complicated? In my experience, the perf tool itself has some overhead. Does it feel much smoother when you disable it?  **Description:**

Hello, i'm using the tag "a-text" because i wanna see some words on the browser canvas, for example

"hello: 1
 github: 2"

but i wanna show the words "hello" and "github" in bold, and the numbers. Like this:

"**hello**: 1
**github** : 2"

Does anyone knows how to do this?

Thanks

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

- A-Frame Version: 0.8.2
- Platform / Device:smatphone huawei
- Reproducible Code Snippet or URL: m.piacenzaromana/vrtour

Hi, I'm a beginner in this world!
I have a problem with rotation right-left only huawei mobile device with Chrome 66.
I've already solved the problem of hypersensitivity after the last update of Chrome, but I did not find the solution for this bug.

Can you help me, please?
 I am also having problems with rotation on "Huawei P8 Lite - 2017"  Yeah, that is what I thought you and Don meant while discussing #3129 Right, but if you are already doing that yourself programmatically, the raycaster component doesn't really help because (unlike intersections) I don't think new and cleared are saved on the component.
 I think the use cases that were discussed were things like "I'm manipulating something, and don't care about others until no longer intersecting" which can be programmatic calls to getIntersection for the entity (or entities) of interest. Are the intersect**ed** events commonly used in practice? I've always just used on the inersect**ion** events as `super-hands` does its own version of communicating to the affected entities. Could save even more performance if these were removed. Would it be simpler to just include a reference to the raycaster component in the event detail, instead of a reference to its `getIntersection` function?  **Description:**

When I put the aframe script at the bottom I get this message

> A-Frame:warn Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML. 
aframe.min.js:26:633

- A-Frame Version: 0.8.0 (Date 2018-03-11, Commit #82934b02)
- Platform / Device: N/A
- Reproducible Code Snippet or URL: N/A

What is really the issue here? It seems to work at the bottom. I'd think a-frame would scan the DOM on startup. Is there an example of a concrete issue that putting the script at the top solves? Just trying to both make sure it's not voodoo that it should be at the top and also understand the issues for my own knowledge of custom elements. Hmm, ok, well, putting at the bottom works just fine so I think maybe it's not doing what you think it's doing.

It would be good to know a concrete reason why I needs to be at the top vs just voodoo since it's working just fine at the bottom.

http://greggman.github.io/doodles/test/aframe-script-at-bottom/aframe-script-at-bottom.html  Simple "then" to "than" typo fix.
  Some of the demos on https://aframe.io/ are "cock-eyed" in the Oculus Go for some reason. For example:
* Hello Metaverse
* Snowglobe
* Animation (also extremely choppy)

Others work perfectly fine:
* Anime UI
* Shopping
* Hello WebVR

For the bottom list, I click on the Cardboard icon and they just work. For the first list, clicking on the cardboard icon zooms the screen up but it's still 2D, and I'm presented with several viewing options (3D, 360, 360 3D, 180, 180 3D). None of them look right.

![com oculus vrshell-20180515-083442](https://user-images.githubusercontent.com/12532733/40060318-ecbf1a9a-581b-11e8-8019-60f8cad10346.jpg)
![com oculus vrshell-20180515-083931](https://user-images.githubusercontent.com/12532733/40060327-f476d9bc-581b-11e8-9acc-f5b5eaaa7781.jpg)
 @dmarcos Thanks! I literally _just_ figured out that these were using 0.5.0 rather than 0.8.0.  **Description:**
simple methods to implement on videosphere

**Changes proposed:**
- how to set current time of video in videosphere
- how to play video
 can update more methods should this be useful Updated the PR to add the link, am uncertain if the link is to the right location.

Is it a common issue in github where we are unable to test the linking accuracy since the preview of links are stored in a hosting URL?

Thank you @ngokevin for the learning experience !   **Description:**

I have been searching for a while now through the various documentations, but I have yet to find if there is a way to obtain the real time position information for the controllers in the VR environment. Once the controllers are loaded and in the scene I have tried to obtain position data from

controller_left.getAttribute('position')

as well as

controller_left.object3D.position

However both always say that the controllers are at (0,0,0) even when I move them. It would seem the components I am using know where the controllers are so that sphere-collider and things like that work, however I would like to get the real time position data myself to see where the controllers are in the VR environment.

- A-Frame Version: 0.7.0
- Platform / Device: Firefox / Vive
- Reproducible Code Snippet or URL:

https://glitch.com/edit/#!/jolly-nurse?path=views/index.html:18:49
  **Description:**
I have created a normal (bump) map in Substance Painter using a hard surface decal of a vent. When viewed in Painter with a light shining from above, it appears seemingly correct. This is further validated when exporting the map and viewing the same scene in Maya (StingrayPBR material). Lastly, when converting to a glTF (using the Facebook FBX2glTF converter) and viewing the scene in Don McCurdy's glTF viewer, it also appears correct. However, when loading that glTF into A-Frame and adding lights, the normal map appears reversed. (see attached images)
I have replicated this with a handful of normal maps, hand-painted or otherwise.

- A-Frame Version: 0.8.0
- Platform / Device: PC
![aframe_normalreversal](https://user-images.githubusercontent.com/31968496/39954826-997639a2-557a-11e8-8711-3c9bab4a75c9.jpg)





- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Actually, the FBX exported from Maya had its textures embedded before converting to glTF. And again, the glTF file appears correct— it’s only when it gets added to A-Frame that the normal gets flipped. Unless I’m misunderstanding what you mean by ‘textures included in the model’. Are you perhaps referring to a .glb vs .glTF? what does this look like with 0.8.2 / latest master?

On Sun, May 13, 2018 at 8:43 PM, Don McCurdy <notifications@github.com>
wrote:

> Oops, I should have looked at the images before replying. Never mind about
> the "textures included" thing. Does this scene use a mirror modifier by any
> chance? This looks like a bug from previous versions of three.js. You may
> be able to manually fix this after import with something like:
>
> var el = document.querySelector('#my-model');
> el.object3D.traverse((node) => {
>   if (node.isMesh) {
>     node.material.normalScale.y *= -1.0;
>   }
> });
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3580#issuecomment-388668693>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AB-_4nArwmncG_T52HHPEqmUIDEL8NxVks5tyNNHgaJpZM4T8T-y>
> .
>
 Upon further investigation, it appears that this bug is only occurring on Mozilla Hubs. Still troubleshooting what's causing it, but it's not an a-frame specific bug.  `coordinates.parse` winds up accounting for a moderate amount of time if you do per-frame updates of attributes containing new string or object coordinates. (In our project, an example was a raycaster component which we updated with a new direction and origin each frame.) This change makes it between 2x and 10x faster in both the string-input and object-input cases in Firefox and Chrome (depending on input characteristics) while being more or less equally straightforward.

[Here's a JSPerf comparing the old and new versions](https://jsperf.com/a-frame-coordinates-parsing/8).

There's one edge case I'm worried about. In the old version, if you gave the input `{x: 1, y: "2", splatoon: "42", "whiz": "bang"}`, it would return `{x: 1, y: 2, splatoon: 42, whiz: NaN}`. That is, it would parse any string keys at all in the input, even ones that it didn't know anything about, and even ones that aren't floats. That behavior seems strange to me, it didn't seem documented anywhere, and no test was exercising it, but it's true. If that behavior is important, then let me know and I'll hack it back in. I made the style changes you suggested. The test failure was a real bug; it was the new version doing a bad job of handling the empty string or a string with all spaces as input. It should line up now. Performance still seems equally good.

Thanks for the advice about reusing the same object, that advice could really be worth its weight in gold for us -- if not here, in other places. I'm not sure anyone on our team realized that!  **Description:**
I customize a component and use html to render the canvas for three. I can't add components to the back of the camera once I use the html2canvas library. The effect of viewing through interactions is like this.
**normal**
![1721525861294_ pic_hd](https://user-images.githubusercontent.com/16772834/39810407-79fac3aa-53b7-11e8-8779-9cfdad807559.jpg)

**mine**
![1711525861293_ pic_hd](https://user-images.githubusercontent.com/16772834/39810442-998a2562-53b7-11e8-9601-376cc3ec4496.jpg)

**my components**
![image](https://user-images.githubusercontent.com/16772834/39810507-cb53ddb8-53b7-11e8-8bba-c2f0d833a4c5.png)

- A-Frame Version: 0.8.2
- Platform: Chrome
 Calling html2canvas in the init method of AFRAME.registerComponent will cause this component to be created loop. this may be a bug.  In a dynamically created scene DOM, the antialias attribute seems to be ignored when viewing in the Gear VR:
- code: https://bklava.github.io/issues/aframe/gear-antialias/dynamic.html
- result: https://bklava.github.io/issues/aframe/gear-antialias/dynamic.jpg

Dynamic result detail:
![Dynamic](https://bklava.github.io/issues/aframe/gear-antialias/dynamic-detail.jpg)

Notice that the antialias attribute is set:
```javascript
scene.setAttribute('antialias', 'true');
```
This is not an issue if the scene DOM is statically created:
- code: https://bklava.github.io/issues/aframe/gear-antialias/static.html
- result: https://bklava.github.io/issues/aframe/gear-antialias/static.jpg

Static result detail:
![Static](https://bklava.github.io/issues/aframe/gear-antialias/static-detail.jpg)

Neither if AFrame is downgraded to 0.6.0: https://bklava.github.io/issues/aframe/gear-antialias/dynamic-6.html

Am I missing something?

- A-Frame Version: 0.8.2
- Platform / Device: Android / Samsung S7 + Samsung Internet + Gear VR
- Reproducible Code Snippet or URL: https://bklava.github.io/issues/aframe/gear-antialias/dynamic.html @dmarcos Yes, exactly the same. I've just checked it.  

- A-Frame Version: A-Frame Version: 0.8.2 (Date 2018-05-07, Commit #050cbaf) three Version: 0.92.0 
- Platform / Device: Version 66.0.3359.139 (Offizieller Build) (64-Bit)
- Reproducible Code Snippet or URL: https://a-frobot.github.io/aframe/examples/performance/cubes/

https://github.com/mrdoob/three.js/commit/bd8f751f73a8c849540ffeb7346d697145c2b9f5#diff-489f2404e69a7f3736ada32f3af6c3c3
 the stats Vertices and Faces are NaN
looks like the https://github.com/aframevr/aframe/blob/master/vendor/rStats.extras.js needs an update 


   **Description:**
It appears that the cones of spotlights, when seen shining on a surface, are rendering to the opposite eye. This is most obvious when setting a spotlight's penumbra to zero, pointing it downward near a wall. This seems unrelated to cast shadows as it is observable with or without them.

- A-Frame Version: 0.8.0
- Platform / Device: PC / Oculus Rift
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 @dmarcos I haven't-- but it's tricky to find examples that have HMD support. Curious if there's been any progress on this... This is very easy to reproduce. Just add a box with full roughness (so as not to get confused by specular highlight) and place a downward-facing spotlight next to it. It helps if the box has a texture on it, or at least place another geometry right near the wall surface so you can compare your eyes' focus. I've tried this in an earlier version of a-frame-- I think it was 0.7.0-- and it did NOT occur. So perhaps this bug got introduced somewhere later.  I have tested out Aframe with Oculus Go and the experience is not as great in terms of resolution compared to React 360. I am not sure what it can be?

https://github.com/facebook/react-360

It is pretty difficult to debug since you can't see the developer toolbar in the Oculus Go webbrowser.

I have searched the docs and the issues and it seems to be something with similar to mobile devices asking about the resolution, but I am creating a new issue because I have not seen it compared to React360 (prev. ReactVR) where the resolution is good. @dmarcos Thanks for replying

It is the aframe example with the 3 red, yellow, blue objects, where the straight lines on particular the blue square is really rought.

There is no anti-alias on that line as you can see the line drop down as if the pixels where that huge, but they aren't they are just rendered double the pixels and with no anti-alias

Here is the image on my macbook pro.
![image](https://user-images.githubusercontent.com/1126497/39716999-3fb75072-5232-11e8-8a19-884cdd20fd7b.png)

I can't record in full screen as it stops immediately after

![image](https://user-images.githubusercontent.com/1126497/39717201-d3837556-5232-11e8-889c-8f86363f8a01.png)
 Also the grey background is suddenly white when VR is activated down in the corner, which makes it super bright and unconfortable to look at, compared to the grey color. @dmarcos I could not see that in the documentation, therefore I thought it did not exist anymore.

Should it exist on this page?
https://aframe.io/docs/0.8.0/core/scene.html Just tested it again and yeah that is what is needed.  @dmarcos Awesome, thanks for the help!  **Description:**

- A-Frame Version: 0.8.x
- Platform / Device: Windows 10 / Firefox 59.0.3
- Reproducible Code Snippet or URL: https://github.com/fernandojsg/aframe-teleport-controls

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Using A-Frame teleport controls with A-Frame 0.7.0 is fine but since 0.8.x it is not possible to teleport any more: hands and teleportation sphere are still shown but no teleportation any more.
Since all A-Frame applications which also support mobile devices are forced to upgrade to 0.8.2 because of the recent mobile Chrome update a quick solution for using A-Frame teleport controls with 0.8.2 would be great.
Many thanks in advance. http://www.winz-it.de/vr/index.html             <a-entity id="left"
                      teleport-controls="button: trigger; collision-entities: #hall_low_floor"
                      hand-controls="left"
                      visible="true"
                      position="-10 30 120">
                <a-animation attribute="position"
                             dur="14000"
                             easing="ease-in-out"
                             to="0 1 -15">
                </a-animation>
            </a-entity>
 You're right, now it's working. Many thanks from Germany! :-)  Hi, I am having trouble on-boarding A-Frame at my company because the security review process requires that all dependencies be downloaded from http://npmjs.com but the [package.json](https://github.com/aframevr/aframe/blob/master/package.json) includes two dependency libraries from Github.

```
"debug": "ngokevin/debug#noTimestamp",
"document-register-element": "dmarcos/document-register-element#8ccc532b7",
```

Is there any reason these two libraries are being pulled in from Github instead of traditional NPM?

It seems they are also available on NPM:

- https://www.npmjs.com/package/debug
- https://www.npmjs.com/package/document-register-element

I can make a fork and change that myself, but I'm worried there is some reason _these versions_ of `debug` and `document-register-element` are being used. Will it break something if I switch to the NPM versions? What's so special about these anyway?

Thanks for any advice. That's a great idea! I would really appreciate if you would consider making the official A-Frame npm dependencies include scoped npm packages for those currently existing as github repos. I work at a very large firm and intend to expose thousands of users to A-Frame (already have lots of working demos) when I can finally get through this security review.

If you also include the devDependencies I personally pledge to contribute in a meaningful way (on company time!) to the project and rally similar support from developers on my visualisation team. Specifically, we are working on displaying infrastructure metrics and virtual representations of data centres in A-Frame's 3D environments, so I hope to on-board the library internally and come back with some interesting examples/contributions to this community. Thank you! I have made the same arguments (anyone can publish to NPM so why would that be more 'secure' than Github?). The answer seems to be more about process than security. I've escalated/complained about this situation but I'm not optimistic about being granted an exception.

I acknowledge this isn't really your problem, but just to explain more about the company I work for and to tell you about a few others I've been asking around with this same situation; I don't think I'm the only one who is being denied usage of A-Frame because of this silly situation.

Basically we have an internal NPM. As a developer I ask to get a new library on-boarded, and so they assign somebody to do the review and copy the library + dependencies to the in-house version of NPM. Then once it's on-boarded I can use it with company tools like a regular NPM, but the links will all refer to the vetted dependencies coming from the internally hosted copies. In this case, since the package.json refers to a few Github repos, they don't have the architecture setup to handle the distribution of those non-NPM packages. Furthermore, the person responsible for doing the copy to internal NPM, is not a developer and it's considered a kind of grunt-work, so they don't really accept my complaints or reasoning behind how to package the bundled release. I work in a highly government regulated environment where external resources are completely blocked to production applications, forcing everyone to go through this 'security process.' It's terrible!

So I'm kind of stuck appealing to you to help me get it all working with NPM from the official A-Frame repo so I can complete the on-boarding and distribute my 3D environments to other employees. Even if I make my own package.json including the scoped packages, I have to provide them with an NPM link and ultimately republish a scoped version of A-Frame. Then I'm stuck convincing the company to on-board a library from my personally-maintained version instead of the "real" one. It's so annoying, we work for these huge corporations who want to try out the latest stuff but they really don't offer much flexibility when it comes to actually getting those tools into the environment.

Finally, I would like to acknowledge your concern/opposition to the forked scoped packages, even though I don't have a better suggestion. Ok so in conclusion it looks like I will have to re-publish A-Frame, while either making scoped packages from those Github repos or I might just take the release version and throw it into a package to publish it myself.

Thank you all for taking the time to learn about this rather silly corner-case of corporate development using A-Frame, I really appreciate it. I have uploaded scoped copies of the required branches/commits from the github repositories, updated package.json + relevant imports, and re-uploaded a scoped version of A-Frame. Additionally, I copied roboto.css font into the package so there are no external downloads necessary whatsoever. 
https://www.npmjs.com/package/@ajwest/aframe

I will try to maintain any updates in my "captive" branch:
https://github.com/IntegersOfK/aframe/tree/captive

Thank you all for the suggestions, I hope this will help other people like me who need all dependencies to be contained within NPM directly.  **Description:**

On Android devices, across all browsers, some aframe examples shake like crazy at the smallest movement.
 
- A-Frame Version: 0.8.0 (and V 0.7.0/ 0.7.0 too)
- Platform / Device: Android (all, but tested on One Plus 5, Sony Xperia Z3 and Z5 Compact, Pixel 1 and Pixel 2)
- Reproducible Code Snippet or URL: Official [aframe videosphere Example](https://aframe.io/examples/showcase/videosphere/) or [aframe lights showcase](https://aframe.io/examples/showcase/lights/) 

[Here are some screen recording of the issue](https://photos.app.goo.gl/cFYv79UxouZsgKvF6)  _(Note that I was actually holding this device pretty still, not shaking it around!)_

[aframe-jolting-bug-video.mp4.zip](https://github.com/aframevr/aframe/files/1964161/aframe-bathroom.copy.mp4.zip)




 Thanks for your reply 😄 

I'm using Chrome (Canary) 68.0.34, but the same issue exists in the latest version of Firefox also. 
The latest available version of aframe on the releases, and through Yarn is still 0.8.1, where this bug still persists.

When I manually updated aframe version, it worked in Firefox, but not Canary (both incognito/ private browsing version).

[Here's a video outlining the issue in Chrome ](https://photos.app.goo.gl/n4ncNM4hf7L5T4XX6) @Lissy93 I had the same issue after I checked out a new version of the library. I ended up backing up my files into a new folder and doing a pull of the repo. I don't know why that worked, but it did and I'm happy. Yeah, it's fixed in 0.8.2. Thanks to Dmarcos and jsantell  for the polyfil 💯  Fixed for me as well. Thanks  we noticed this after getting errors when running babel on
a-frame, which enables strict mode that turns that assignment
into an error

**Description:**

**Changes proposed:**
-
-
-
 @dmarcos according to the standard this will never work, since that property is read only. i'll leave you guys to decide what to do though    71334 |   geometry.update(utils.extend({}, data, {
  71335 |     font: font,
  71336 |     width: computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor),
> 71337 |     text: data.value.toString().replace(/\\n/g, '\n').replace(/\\t/g, '\t'),
  71338 |     lineHeight: data.lineHeight || font.common.lineHeight
  71339 |   }));
  71340 | }
 
start from this
  52 | tvSwitch() {
> 53 |   this.setState({
  54 |     tv: this.state.tv?false:true
  55 |   });

please help   **Description:**

The camera position in mobile updates its angles when devicecmotion or touchmove events are fired. But in the case of touchmove only the theta (and thus the horizontal axis) is updated and the user cannot view up in the scene using touch events.

TouchPanner.prototype.getOrientation only uses theta.

How could we do to enable vertical and horizontal move with touch events like in the devicemotion events.

I know that combining devicemotion and touchpanner (both directions) at the same time can be a mess if not well implemented (I saw viewers that have implemented it with a very good user experience). 
Can I use touch panner in both directions and disable devicemotion? It would be perfect for people that is looking in an scene from a mobile and don't want to move the hand all around and want to see the scene (rotate the camera) only touching the mobile and not moving the arm and hand around.

Helppp

Thank you :)
 I only use webvr polyfill, do I have to modifiy the touchpanner and posesensor objects? I use the aframevr fork webvr-polyfill from immversive  Hi everyone,

One thing that has running in the back of my mind using this framework (and other javascript libraries) is why are all events, types, etc. left to the developer to type properly?

Could a framework like Aframe benefit from having all this string types saved as consts somewhere like (very rough implementation):

```javascript
//aframe.constants.js

const EVENT
{
    LOADED = 'loaded',
    MESHLOADED = 'object3DSet';
};

const SCHEMA_TYPE
{
    ASSET = 'asset',
    BOOLEAN = 'boolean'
    STRING = 'string'
};

module.exports = { 
    EVENT,
    SCHEMA_TYPE
 };
```
```javascript
//myComponent.js

AFRAME.registerComponent('mdmu-cutout-material', {
    schema: {
        property0:     {type:AFRAME.SCHEMA_TYPE.ASSET, default:''},
        property2:     {type:AFRAME.SCHEMA_TYPE.BOOLEAN, default:false},
        property3:     {type:AFRAME.SCHEMA_TYPE.STRING, default:''}
    },
    init: function() {
        this.el.addEventListener( AFRAME.EVENT.MESHLOADED, () => { console.log('loaded!'); });
    }
};
```

I know it is definitely more verbose but it may be helpful for beginners to have one place to see all functionality that could be "hidden" or "scattered across several pages of documentation (e.g. one place to see all events we can listen to aid async functionality). It will also make sure we reduce typing errors (something I am huge proponent of in C languages as compile and run-time errors are much better than invisible ones).

Thoughts?
 Thanks for the thoughtful considerations Diego.  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: Desktops
- Reproducible Code Snippet or URL: 

Not sure if this topic belongs here but I have an a-entity text inside an a-box element and the text looks blurred out 

![words blurry why](https://user-images.githubusercontent.com/34080430/39238340-8955997c-48b0-11e8-998c-ddf2956fb049.JPG)

These are the lines the box is in
```
<a-box id="box1" material="src: img/info.svg; transparent:true;" position="0 2 -1.8" rotation="0 0 0" depth="0" width="1" height="1" scale="0.001 0.001 0">
    <a-entity id="info" width="1" position="0 0 0.6" text="value: This is the Mac desktop computer IXD has purchased to supply their students with adequate equipment so that they are capable of accomplishing projects even if they do not have their own Mac OS based system; color:#000;">
    </a-entity>
    <a-circle id="box1-close" radius="0.06" class="clickable" material="src: img/close.svg; transparent:true;" remove-yellow position="0.4 0.4 0.6" rotation="0 0 0" scale="1 1 0"></a-circle>
</a-box>
```
I suspect the problem may be with the anti aliasing but I have already manually turned it on in my a-scene Also having this problem. Any opacity < 1 on the container behind it seems to cause a lot of the issue. The second I make the opacity 1 again the clarity improves dramatically Looks to me as if it is trying to antialias against black... but it also looks as though the the text is behind the svg texture on the box?  Unless the camera has been flipped around...  This is a great discussion. Thanks for starting it.

I have run into similar issues; though admittedly it may be due to my coding style not completely being moved over to the appropriate style of js. I find the "loaded" event is a bit of a misnomer as it doesn't account for the actual content within the entity being loaded (i.e. a model and its associated textures/materials are not necessarily loaded as well). This may be where these issues are stemming from because any advanced functionality is diving into three.js/webgl layer and everything may not be set just yet.

When building a couple of components that accessed materials/meshes I had to approach similarly to Don's tick method. I see there is an "object3Dset" event I can listen to but that also doesn't necessarily mean the material is set correct?

Also, what about use cases where there are multiple dependencies within the ThreeJS layer. I am just getting to understand promises in js but how would we approach this within an asynchronous event-driven model (without having to resort to a bunch of questionable booleans in a tick)?

**Question**: Are some of these issues related to trying to maintain two areas where setting properties can take place: setAttribute(...) as position/scale/rotation as attributes vs. setting them directly to the object3D.position.set(...)?

_e.g. of a rough component attempt I have been having troubles with (replacing the standard material with a basic material for my boundary wireframes). Sometimes shadows pop up (or not) depending on whether the parent entity (an avatar head with shadows enabled) loads before or after this child element (facial texture cutout material)._

```javascript
AFRAME.registerComponent('cutout-material', {
    schema: {
        src:            {type:'asset',   default:''},
        alphaTest:      {type:'number',  default:0.5},
        castShadow:     {type:'boolean', default:false},
        receiveShadow:  {type:'boolean', default:false},
        shading:        {type:'boolean', default:true}, //shading at al
        renderSide:     {type:'string',  default:'double'} //front, back, double
    },
    multiple: false, //do not allow multiple instances of this component on this entity
    init: function() {
        this.loader = new THREE.TextureLoader();
        this.applyMats();
        this.el.addEventListener('object3dset', this.applyMats.bind(this));
    },
    //custom function
    applyMats : function () {
        const Context_AF = this;
        const mesh = Context_AF.el.getObject3D('mesh');
        if (!mesh) return;

        if ( Context_AF.data.src === '' ) {
            console.warn('No src defined in component');
        } 
        else {
            Context_AF.loader.load( Context_AF.data.src,   
                function onLoad(texture) {
                    //texture.anisotropy = 16;

                    const customDepthMaterial = new THREE.MeshDepthMaterial( {
                        depthPacking: THREE.RGBADepthPacking,
                        map: texture,             
                        alphaTest: Context_AF.data.alphaTest  
                    });

                    const basicMaterial = new THREE.MeshBasicMaterial();

                    let renderSide = THREE.DoubleSide;
                    if ( Context_AF.data.renderSide === 'front' ) {
                        renderSide = THREE.FrontSide;
                    }
                    else if ( Context_AF.data.renderSide === 'back' ) {
                        renderSide = THREE.BackSide;
                    }

                    if (mesh) {
                        mesh.traverse(function (node) {

                            if (!Context_AF.data.shading) {
                                node.material = basicMaterial;
                            }

                            node.castShadow = Context_AF.data.castShadow;
                            node.receiveShadow = Context_AF.data.receiveShadow;

                            console.log(Context_AF.data.castShadow);
                            console.log(Context_AF.data.receiveShadow);

                            //if (node.material) {
                                //https://stackoverflow.com/questions/43848330/three-js-shadows-cast-by-partially-transparent-mesh?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa\
                                node.material.map           = texture;
                                node.material.side          = renderSide;
                                node.material.alphaTest     = Context_AF.data.alphaTest;
                                node.customDepthMaterial    = customDepthMaterial;

                                node.customDepthMaterial.needsUpdate    = true;
                                node.material.needsUpdate               = true;
                            //}
                        });
                    }

                    Context_AF.el.emit('materialset');
                },
                function onProgress(xmlHttpRequest) {
                    //xmlHttpRequest.total (bytes), xmlHttpRequest.loaded (bytes)
                },
                function onError(message) {
                    var message = (error && error.message) ? error.message : 'Failed to load texture';
                    console.log(message);
                }
            );
        }
        

        
    },
    //update: function () {},
    // tick: function(time, timeDelta) {},
    // tock: function(time, timeDelta) {},
    // remove: function() {},
    // pause: function() {},
    // play: function() {},
    // updateScheme: function(data) {}
});
``` Thanks for the response @ngokevin. And thanks for pointing to the 'materialtextureloaded' event - I must have missed that in the documentation. I suppose it gets a bit hairy trying to track down what events exist and what I can listen to before doing something - and if I need multiple things to exist/be set before doing something else.

I really like the idea of forcing some sort of synch on entity. It would be really handy, at least from those of us just jumping in and without the years of experience of knowing what hooks exist. Well perhaps it is my own idiosyncrasies as it doesn't seem too far out of reach at all.  A-Frame is adding grey border around the opaque part of png image. Unable to figure out why this is happening. I would be glad to know if anyone has solved this issue.

- A-Frame Version: 0.8.0
- Platform / Device: ALL
- Reproducible Code Snippet or URL:

<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>decke wand boden TEST VR mit sky Ebenen</title>
    <meta name="description" content="decke wand boden TEST VR mit sky Ebenen">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <script src="assets/aframe_min.js"></script>
    <script src="assets/aframe-animation-component-4-1-2.min.js"></script>
    <script src="assets/aframe-event-set-component-4-1-1.min.js"></script>
   </head>

        <a-assets>
			<img id="pano00" lazy-load="chunk: 0" crossorigin="anonymous" src="http://schneewind.decke-wand-boden.de/images/Panorama09-2.png">
			<img id="pano01" lazy-load="chunk: 1" crossorigin="anonymous" src="http://schneewind.decke-wand-boden.de/images/Panorama08-2.png">
		</a-assets>
	
	<a-entity>
		<a-sky id="Boden" src="#pano00" rotation="0 -130 0" radius="5000" transparent="true"></a-sky>
	</a-entity>

	<a-entity>
		<a-sky id="Raum" src="#pano01" rotation="0 -130 0" radius="5000" transparent="false"></a-sky>
	</a-entity>


      <!-- Camera + cursor -->
    <a-entity laser-controls></a-entity>
        <a-entity camera="userHeight: 1.6; fov: 60" wasd-controls="true" look-controls mouse-cursor position= "" ">
            <a-cursor id="cursor" fuse="true" animation__click="property: scale; startEvents: click; from: 0.1 0.1 0.1; to: 1 1 1; dur: 150" animation__fusing="property: scale; startEvents: fusing; from: 1 1 1; to: 0.1 0.1 0.1; dur: 1000" animation__leave="property: scale; startEvents: mouseleave; to: 1 1 1" event-set__1="_event: mouseenter; color: #eab11c" event-set__2="_event: mouseleave; color: grey" raycaster="objects: .link" position="" rotation="" scale="" visible="" material="" cursor="" geometry="" color="grey"></a-cursor>
    </a-entity>

    </a-scene>

</body>
</html>
 @deckewandboden Maybe try adjusting the `material.alphaTest` property: https://aframe.io/docs/master/components/material.html#properties_alphatest  Can we get the link back up to date so it matches the latest version e.g. https://aframe.io/releases/0.8.0/aframe.min.js -
Was this deliberate or is that just a publishing bug?  **Description:**

According to the A-Frame docs (https://aframe.io/docs/0.8.0/components/material.html#properties_visible), raycasters should ignore entities with `material="visible: false;"` rather than those with `visible="false"`.

It appears that the opposite is happening.

- A-Frame Version: `0.7.*` - `0.8.*`
- Reproducible Code Snippet or URL: https://codepen.io/dansinni/pen/bMEKxQ

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

According to the A-Frame docs (https://aframe.io/docs/0.8.0/components/material.html#properties_visible), raycasters should ignore entities that have `material="visible: false;"`. This doesn't seem to be the case when `raycaster="objects: ... ;"` is defined. In this case, all qualifying objects are raycasted regardless of visibility.

Should `material.visible` not still affect raycasting on these entities?

- A-Frame Version: `0.7.*` - `0.8.*`
- Reproducible Code Snippet or URL: https://codepen.io/dansinni/pen/deYXZa

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I had the problem few days ago and `material="visible: false;"` didn't work neither.

My solution today is to set a class `.interactible` on my visible entities which should interact with the  raycaster.

On my cursor I setted 
``` 
<a-entity id='myCursor'
    cursor="fuse: true;"
    raycaster="interval: 200; objects: .interactible"
      ...
```

Then, after each interactible objects update I launch 
```AFRAME.scenes[0].querySelector('[raycaster]').components.raycaster.refreshObjects();```

Hope it can help. Thanks, @ArnaudRemi @ngokevin @donmccurdy . I typically use the same practices you outlined, @ArnaudRemi , however the `material.visible` functionality doesn't work as documented, hence the issue.

I may be mistaken, but I'm pretty sure I still had to manually refresh the objects when adding/removing classes for raycaster objects. I'll have to test this again to be sure.

I have a somewhat related issue open (#3552), also with a demo illustrating that `material="visible: false;"` doesn't appear to affect the raycaster regardless of whether or not raycaster objects are defined. The only difference between this issue and #3552 is that, in the latter, `visible="false"` is ignored by the raycaster rather than `material="visible: false;"`. This seems to be the opposite of what is documented. I hit this issue recently and found the following three.js change log item from r72: https://github.com/mrdoob/three.js/issues/6758

This behavior matches what @dsinni describes and seems like a conscious design decision on three.js's part that's been around for a couple years.

The "Raycasters will ignore invisible materials." line in the documentation has been there since 0.3.0, which used r76.1.  But I was able to reproduce the raycaster intersecting an object with `material="visible: false;"` in 0.3.0 (gaze to the right of the yellow box):

```html
<html>
<head>
    <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
    <script>
        // Component to change to random color on click.
        AFRAME.registerComponent('cursor-listener', {
            init: function () {
                var COLORS = ['red', 'green', 'blue'];
                this.el.addEventListener('click', function (e) {
                    var randomIndex = Math.floor(Math.random() * COLORS.length);
                    this.setAttribute('material', 'color', COLORS[randomIndex]);
                    this.setAttribute('material', 'visible', true);
                    console.log('I was clicked!', e);
                });
            }
        });
    </script>
</head>
<body>
<a-scene>
    <a-entity camera="userHeight: 1.6" look-controls wasd-controls>
        <a-entity raycaster="objects: .clickable" cursor="fuse: true" position="0 0 -1" scale="0.05 0.05 0.05" geometry="primitive: ring" ></a-entity>
    </a-entity>
    <a-entity material="visible: false;" class="clickable" cursor-listener geometry="primitive: box" position="1 0 -3"></a-entity>
    <a-entity material="color: yellow;"  class="clickable" cursor-listener geometry="primitive: box" position="0 0 -3"></a-entity>
    <a-sky color="#ECECEC"></a-sky>
</a-scene>
</body>
</html>
``` So, while it seems that the documentation is the inverse of what is true between `material="visible: false;"` and `visible="false"`, would it still not make the most sense for the raycaster to ignore an entity with `visible="false"` regardless of whether or not it qualifies as a raycaster object? That, to me, seems like the most consistent way of handling it.

If it's desired for the entity to not be visible while also being raycastable, `material="visible: false;"` can still be used. This seems cleaner to me than having to add/remove/replace query selectors.

Out of curiosity, if this method were to be used, would raycaster objects still need to be refreshed manually?  Thanks for the reply @ngokevin. I'm sure you have it all figured out, because you're the dude. haha. But it seems rather complex for something somewhat trivial.

If the raycaster ignores `visible="false"` but not `material="visible: false;"` then the latter could be used for invisible, raycastable entities. The problem is that, _when_ using raycaster objects, _both_ are raycastable.

I'm wondering if it's possible to still follow the former paradigm _even when_ raycaster objects are defined, since there are two workable options to choose from already without needing to use external components.

Essentially, I think it would be beneficial to have a way (right out of the box) to make a qualifying raycaster object _not_ be raycastable due to its invisibility.

Is this something that could even be done in A-Frame, or would it need to be implemented in THREE.js? Don't be modest, @ngokevin; you are a wizard.

I feel like I may not be communicating my thoughts very well, though. I'm not suggesting solely depending on visibility, but more a combination of raycaster objects _and_ visibility, i.e., the raycaster handling visibility the same way regardless of whether or not raycaster objects are defined. This is not currently the case. Both `material.visible` and `visible` are completely disregarded (the entity is still raycastable) if raycaster objects are defined. This is inconsistent with how the raycaster behaves when they are _not_ defined.

I agree that a better system can be utilized to keep track (for those who are savvy enough), but the inconsistency has potential to cause confusion when a simple approach could be possible.  On Android devices, the camera is not moving when rotating the device. If you tilt it, its moving correctly. Same functionality works without a problem on iOS devices.

- A-Frame Version: 0.6.1 / 0.7.1 / 0.7.1
- Platform / Device: Android 8.0.0 / OnePlus 5  (and other devices)
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/360-image-gallery/ Most likely this is a known error of the current version of chrome. Does your phone have issues using firefox?  Just check out package.json from: https://registry.npmjs.org/aframe/-/aframe-0.8.2.tgz
 

"three": "github:supermedium/three.js#r90fixMTLLoader",

 so whats the solution here? Documentation says r92 and it breaks things in my project because of the changes to the lights par glsl fragments so if you are modifying default shaders you'll get errors.  I'm seeing issues with r90 in the latest version of
Android Chrome Version 69.0.3497.100.

Camera doesn't rotate until you get into VR mode. Similar to the symptoms of #3731

r94 seems fine.
  **Description:** Adds support for using / displaying the Oculus Go controller. Addresses #3390.

**Changes proposed:**
- Adds a new component and tests for `oculus-go-controls`, which is pretty close in functionality to the GearVR controller. A lot of this is duplicated code right now, which can likely be consolidated.
- Sets up the Oculus Go controller model from the CDN to support button highlighting.
- Removes workaround from `tracked-controls` to have multiple gamepad id prefixes in one string (since we now have a separate component for Oculus Go controllers) @dmliao Is there somewhere I can test this easily? Would love to test it out! @dmliao @dmarcos I tried it and it works! Really great!

However it works different from the normal in-game Oculus Go controller in that it follows the heads rotation where the Oculus Go controller normally follows a certain circle on the radius on that, eg. does not follow your heads rotation.

I think I like the default behavior as when I move my head, I don't my move hands at the same time, but with Aframe it looks like I move my hand which I don't.

Can the Oculus Go controller be made fixed as an option? I think the basic arm model A-Frame uses is different than what other native apps use... @dmliao @DigiTec is more information on the standard Go arm model available?

Not using any arm model at all could be somewhat problematic as the controller would be rooted at the wrong spot it you turn 180 degrees and start interacting @machenmusik 

> Not using any arm model at all could be somewhat problematic as the controller would be rooted at the wrong spot it you turn 180 degrees and start interacting

There are several things that makes it works without arm:
- You will still have the ray
- The controller runs on its own circle, so it can go all around but on either your right and left side from a start
- The Oculus button pressing it resets the direction, but looking and pointing the same direction.

But doing the arm model, it will be more confusing as with WebVR you just came from the default and then into a weird Aframe arm model. It feels really weird. I am not sure what you are suggesting would be providing the positional update for the Go controller with no arm model, as it is not a 6DOF controller and the Go doesn't know where it is.  If you are saying that the browser is providing a full 6DOF pose using the native arm model, that would be great, but I would like to get some level of confirmation from the committers, as I expect they would have disabled the arm model if it was not required. That being said, it looks as though there is a simple flag to disable arm model if you like, see
https://github.com/aframevr/aframe/blob/961ba488d68e04eb1880e2988e53846279ed9b70/src/components/oculus-go-controls.js#L29 @machenmusik The oculus controller turns in the black radius where the red circle is the head 

![image](https://user-images.githubusercontent.com/1126497/39822081-025ad39c-53aa-11e8-842d-38af6d454613.png)
 @kevinsimper right, but if you turn around (turn your head 180 degrees), without any arm model, your right hand would then become your left hand... the arm model is what keeps your right hand on the right.  Also you can turn it off if you don't like it, as described above. @machenmusik We can't change how it works inside the Oculus Go, so shouldn't it work the same inside Aframe so that people don't get confused?

It also works that way inside games: https://www.facebook.com/kevinsimper/videos/10157280187933539/

Edit: Also thought, you arm and hand does not move when your head do. That is why it feels weird when I tried it. @kevinsimper actually there is a native arm model for Oculus Go, and here is how to prove it... find a swivel chair and sit in it; put on your Oculus Go, go to the Home screen, center the controller and hold it out in front of you with your right hand; spin in the swivel chair slowly clockwise.  You'll notice at first the controller doesn't move in space, as you mention in your diagram above.  But as you keep spinning, you will notice that the controller starts to move in space to follow your rotation as well; it's the native arm model that is doing that.  Without any arm model, the controller would stay in the same position and would no longer be visible once you had trotted far enough.

The Oculus Go native arm model is almost certainly more sophisticated than the current basic arm model in A-Frame; pull requests with better arm model are certainly welcome, as are suggestions on how it could be improved even without implementation, as you have been doing (thank you BTW!)... and if the behavior with `armModel:false` is more to your liking, that is already a built-in A-Frame option. https://judicious-random.glitch.me seems fine on Oculus Go
(https://glitch.com/edit/#!/judicious-random?path=index.html:3:2)

If all the other 3DOF combinations apply native arm model, maybe we can default to `armModel:false`
- [ ] Oculus Browser on Go
- [ ] Oculus Browser on GearVR
- [ ] Samsung Internet on GearVR
- [ ] Chrome on Daydream
- [ ] anything else I forgot
 oh, I am wrong, armModel doesn't pass through `laser-controls`.  ewww.  will keep trying with that Glitch So the current state of https://judicious-random.glitch.me is coded for the Go only, and there is apparently no position provided when the arm model is disabled; the controller stays put in the floor. :-/  **Description:**
Allow specifying the encoding of the main map on the material. This is important for correct linear/gamma settings.

Looks like:
` <a-entity id="sky" 
            geometry="primitive:sphere; radius:30; phiLength:360; phiStart:0; thetaLength:180" 
            material="src:#skymap; encoding:sRGB"
            rotation="30 0 0">
`
 
**Changes proposed:**
I don't think this change is merge able as-is. But I wanted to get this out there to see if there was interest in doing something similar, or if there are plans to solve this some other way.
 Sweet! Thanks, guys.  - A-Frame Version: 0.8.2
- Platform / Device: Samsung S7 Chrome 66

Using look-controls component on first load, I am able to swipe to change the y rotation of the camera. After enter vr is called, the rotation doesn't change with swipe anymore. Also when you exit vr the rotation doesn't change. The swipe functionality use to work in 0.7.1, regardless if you were in VR or not.

In look-controls.js, debugging shows that the touchmove handler is still firing, but it seems when you try to set the object3d rotation, it doesn't have any effect. 

https://github.com/aframevr/aframe/blob/429591a7d3034f471ea01c4232246aca0fb90b6b/src/components/look-controls.js#L198

```
    el.object3D.rotation.x = hmdEuler.x + pitchObject.rotation.x;
    el.object3D.rotation.y = hmdEuler.y + yawObject.rotation.y;
    el.object3D.rotation.z = 0;

```
 I believe in previous discussions, the typical use case is to apply an orientation offset, not to entirely override which would cause discomfort; currently three.js does not allow such an offset, which is why the recommendation is to use a wrapping entity for that purpose. Thanks for your reply @dmarcos. I agree, after entering vr the accelerometer should override any swipe to control the rotation. However, after exiting vr mode, I would imagine that the user regains swipe control, which doesn't seem to be the case.  I believe it is because the camera continues to ignore any programmatic changes to rotation.

In my scenario, I'm allowing x and y rotation through swipe, so the camera wrapper approach causes strange gimbal lock areas. @dmarcos I modified the look-controls component to implement x-axis rotation. But my tests were using the original look-controls component. 

In #3450, @ngokevin mentions "now threejs controls camera rotation in VR mode." Do you know where we can find that code? @dmarcos having the same issue on Sumsang S7, Huawei P9, XIaomi 6. look-controls no longer works after exit VR mode(works before entering VR mode). Tested with "Hello WebVR" example on Aframe.io.
Browser Chrome 66.0.3359.158
 I have the same issue on Samsung S8 ( Chrome 66.0.3359.158) with Aframe 0.8.2.
Accelerometer doesn't work before to enter on VR Mode
Swipe doesn't work after exit VR mode

Everything works with Aframe 0.7.1  Accelerometer works for me without entering VR on S8 with Samsung Internet, but not Chrome Yes, it works with Samsung Internet but not in Chrome Hello world example does not work... did not try the rest it’s the same (http or https)... it’s does not work.
I tried without iframe .
Anyway the accelerometer works when you Enter in VR @dmarcos 

> "When using a headset you want to honor the user head rotation or it will cause disconfort. It’s a design decision"

Could anyone point me to where this is being done in the code?

I'm trying to do swipe controls on mobile with a separate VR mode where device orientation then takes over.

To do this, I'm firstly removing the default look-controls on load, and then adding a different component to handle rotation which only uses touch/drag. (I'm using  removeAttribute, and setAtrribute to remove and add the components).

(I need look-controls on desktop, so I'm only doing the above on mobile)

That works fine initially, but on entering VR on mobile and then returning from VR,  then trying to do the same again as described above, it no longer works - instead the device rotation is controlling the camera rotation as would be expected from the default look-controls even though I've removed them on exit.

[Here is a link if anyone had like to try it](http://eici.grxp.io/pages/testing.php)
I'm trying on S7 Android. This problem only pertains to mobile, I've no problem on desktop.

I believe this is some way related to the issue above, but if anyone thinks this would be better posed as a a Stack Overflow question or a separate issue, let me know and I'll remove this and try that.

There's something happening in aframe when the device is returning from VR mode, but I can't find where or what is going on. 
  **Description:**
Images with transparency that are placed within a-camera will completely obstruct other images and objects placed elsewhere, only the skybox is shown through the transparent parts of an image and not other images.

This shows an image in the a-camera making parts of other objects invisible if they're within the transparent part of the image:
![alt text](https://i.imgur.com/3GCaHry.jpg)

- A-Frame Version: 0.8.2
- Platform / Device: Chrome, Windows & Android @donmccurdy that worked out great, thank you!
Closing the issue.  As the title, if I play a video and click on the vr-button, it pauses while entering in 360-view. The bug came out after the oculus browser 4.4.0 update of the 04/16/2018.

- A-Frame Version: 0.7.1
- Platform / Device: GearVr on Galaxy S6 - Android 7.0
-Browser version: Oculus Browser 4.4.0


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Could you please send me an example so that I can check that, too? I also have S6 & Gear VR. What kind of example do you mean? A video example? If so, it gets stuck even in the "aframe video example" online, provided in the docs page. There was an issue with viewing WebVR videos in Oculus Browser 4.4.0, which was fixed in 4.4.1. Does this issue still persist if you update the browser? @dmliao  thx for the advice, it's working now :)   **Description:**
Add `blending` property to Aframe Material component
https://github.com/aframevr/aframe/issues/3502

**Changes proposed:**
- Add blending prop to Material component
- Add test

====

I think I've done this right. There's one thing I didn't understand though. If anyone could clarify it would help my understanding of the code.

As i understand it these lines are checking if certain props change, and if they do, we set `needsUpdate` to true
https://github.com/aframevr/aframe/blob/master/src/components/material.js#L127

As explained in the threejs docs this is only needed for certain properties: (https://github.com/mrdoob/three.js/blob/25f4534a5609f55a9d13cff47b1e535b4b109659/docs/manual/introduction/How-to-update-things.html#L175)
 and blending is not one of these.

My question is that I noticed (when writing the tests) that `material.needsUpdate` was true after setting the material.blending attribute. Why is this? I thought it would only be true if we manually set it when we want to trigger a re-render in webGL because e.g. vertex-colors changed.

Thanks Ah yes! Sure will do

On Tue, 17 Apr 2018, 20:12 Kevin Ngo, <notifications@github.com> wrote:

> Cool! Would you mind adding to docs as well? docs/components/material.md
> in the properties table.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/3543#issuecomment-382108395>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AD71whhR_a-7JktFf2QUMaOBgziKVbSzks5tpj6OgaJpZM4TXZAT>
> .
>
 @ngokevin line added to docs. thanks Thanks @samrae7! My hero! :) +1  https://github.com/aframevr/aframe/blob/master/ROADMAP.md  Originally orientation offset was for vive-tracker, did we want to put that back in now? Wait, I thought rotation offset was for hand-controls - if you changed hand-controls to use orientationOffset should be fine though Shouldn't the orientation Euler be applied in order YXZ like elsewhere in A-Frame?  **Description:**

Getting an unexpected token error on roadhog build command

```
sudo yarn build
yarn run v1.5.1
$ roadhog build
Creating an optimized production build...
Failed to compile.

index.js from UglifyJs
SyntaxError: Unexpected token name «of», expected punc «;» [./~/aframe/dist/aframe-master.js:75051,0]

error An unexpected error occurred: "Command failed.
Exit code: 1
Command: sh
Arguments: -c roadhog build
Directory: /Users/a1111/Documents/Projects/diseasenet
Output:
".
info If you think this is a bug, please open a bug report with the information provided in "/Users/a1111/Documents/Projects/diseasenet/yarn-error.log".
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
```

- A-Frame Version: 0.8.1
- Platform / Device: macOS High Sierra
- Reproducible Code Snippet or URL: 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  I just created a function to enable Oculus Go detection.

Opened up a pull-request here: https://github.com/aframevr/aframe/pull/3685

This has been merged.  It would be useful to get the new intersection position of the ray in the same intersected object among frames.

For example: imagine a single plane for a wall, and the user has a laser sabre in his hand, and we want to show the burn in the wall as he hits and moves the sabre on the wall. 

Right now this is impossible with current `raycaster`, because we only get one event `raycaster-intersected` on the first intersection, but on next frames we don't get any more events because the intersected object is the same as in the previous frames. It would be cool to have a `raycaster.getCurrentIntersection(obj)` to get the intersection data on that object *in current frame*.

Performance would not suffer too much, since right now `intersectObjects` is called with all raycastable objects. It would be just a matter of updating the new intersection data. (This behaviour could be enabled/disabled with a parameter in the component, too)

- A-Frame Version: 0.8
- Platform / Device: all
 https://github.com/aframevr/aframe/issues/3129#issuecomment-334779820 is relevant.
but actually @donmccurdy did just that, a getIntersection function 21 days ago, still on master
https://github.com/aframevr/aframe/commit/79cb1546836ab1fa7d402415459ea294c6c3d4b7
  **Description:**
how to prohibition gesture control, only use sensors.

- A-Frame Version: 0.8.1
- Platform / Device: iOS

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  Per discussion on Slack:

In version 0.8.x, `look-controls` was changed to ignore the `rotation` component and directly override `object3d.rotation` -- which appears to have broken some use cases.

This PR modifies `updateOrientation()` in `look-controls` to also take into account the value of the `rotation` component, if present. @ngokevin is that a theoretical concern, or a finding from using supermedium?  Agreed obviously that if it doesn't work in VR then an alternative implementation is needed Ok makes sense to close until we can get accommodation in Three   The trigger on a Cardboard V2 causes a screen touch, so it's common to listen for an click on the scene element or window.  This changes prevents a tap on the a-enter-vr button from propagating to the scene and window, so the other listener doesn't have to disentangle an "enter vr" tap from the Cardboard button.
  **Description:**

On Android 7.1.2 (LineageOS Guava) all objects are displayed in solid black color. Tested with different browsers (Mozilla and Firefox).
Tested on a Motorolla Moto G3. The same device works fine with Android 6 and the problem appears
once it switches to the latest updates of LineageOS 7.1.2.

The problem does not exist on Android 5 and 6.

- A-Frame Version: all
- Platform / Device: Android 7.1.2 (LineageOS Guava) / Motorolla Moto G3
- Reproducible Code Snippet or URL:


 I don't think this is specific LineageOS -- I'm seeing this using Chrome 66.0.3359.158 with LG's stock Android 7.0  (version M21010v; January 1, 2018 security update) with on both my LG Aristo (LG-M210) and my LG Fiesta (LG L63BL)

Edit: Looks like the same issue is reported here: https://stackoverflow.com/questions/48156560/all-shapes-entities-showing-up-as-black-in-a-frame-scenes 
@gabrielgrant It is not browser specific as well, because I tried with the default Android browser, Firefox and a beta version of Chrome.

@dmarcos It is not specific to the device, because I have two completely identical  Motorolla Moto G3 handsets (well, the only difference between them is their color - white and black). One is running LineageOS 7.1.2 and one is running stock Android 6.0.1. The one, equipped with 6.0.1 version renders correctly. The "blacked objects" issue appears only on the LineageOS-equipped handset. Yet, as far as I remember, first my code ran fine on that handset as well and the problem appeared after one of the updates.

 @dmarcos The only errors I see are are two instances of `Failed to recalculate device parameters.` being logged out
![screenshot from 2018-05-24 01 50 16](https://user-images.githubusercontent.com/493968/40474976-3baf67ec-5ef5-11e8-9b25-e811f018b64d.png)

This is coming from here:
![screenshot from 2018-05-24 01 52 30](https://user-images.githubusercontent.com/493968/40475006-49ba6670-5ef5-11e8-90c7-db606ec31519.png)


Full stack if you're interested: 
![screenshot from 2018-05-24 01 50 58](https://user-images.githubusercontent.com/493968/40475032-575ea728-5ef5-11e8-82e0-2b1ac4961975.png)

This seems to be (trying) to load some sort of device parameters from https://dpdb.webvr.rocks/dpdb.json and isn't finding an entry for this device (my device's model number -- LG-M210 -- does not appear in that database). I'm not sure what these parameters are used for, but if this is actually the problem, it seems like this might explain why it is device-specific (though not, afaict, why it would be Android-version specific: the User-Agent string only seems to be matched against device ID). 

![screenshot from 2018-05-24 02 09 40](https://user-images.githubusercontent.com/493968/40476324-9e734486-5ef8-11e8-84c5-61b8f937a97c.png)


This DB's info seems to mostly be about display size, though. AFAICS the canvas, at least, seems to be getting set up correctly, so it's totally possible this is a red herring. OTOH it's also possible the black models are coming from some problem with a texture buffer being improperly allocated (perhaps because of this exact missing resolution info).

In either case, I'm a bit out of my depth. Looks like both you and @ngokevin are in the bay area. I'm in SF too and have several of these devices for testing. I'd be happy to get you one of them, or can just supply you with more info if that's easier.
 @dmarcos no, it does not render the graphic object at all.

 Hmmm...it certainly isn't a problem with all WebGL texturing, though -- https://fltr.world/ (simple texture demo implemented with three.js shaders) works fine, as does https://webglsamples.org/aquarium/aquarium.html

As for https://threejs.org/docs/scenes/material-browser.html#MeshStandardMaterial -- it doesn't work with the default settings (colored material), but changing the material to have an emissive color seems to work fine so to clarify: you don't think that device parameter DB issue is related, right? @dmarcos Yup, was just in the process of searching their issue tracker for anything related before doing so :) Makes sense, just wanted to confirm if it doesn't ruin the experience, maybe you could try different shader
like `flat` as a workaround?  (`material="shader:flat"`)

On Thu, May 24, 2018 at 1:26 PM, Gabriel Grant <notifications@github.com>
wrote:

> Makes sense, just wanted to confirm
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3523#issuecomment-391795329>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AB-_4gbNwwBdNuqiplyeMbpEAR8aTQBfks5t1u1fgaJpZM4TH_DS>
> .
>
 Filed here: mrdoob/three.js#14137 @machenmusik thanks, should have thought of using other non-flat shaders. Tried a few and posted the results here: https://github.com/mrdoob/three.js/issues/14137#issuecomment-391880854

In particular, MeshLambertMaterial seems like a good alternative. Are all the default three.js materials already registered in A-frame? I only see "standard" and "flat" mentioned on the material page: https://github.com/aframevr/aframe/blob/master/docs/components/material.md (I know this isn't really the appropriate venue for that question, but seems like useful context to have here for people trying to work around this issue) I think only standard and flat are built in at the moment.  But @dmarcos @ngokevin @donmccurdy is there any particular reason?  Request for Lambert sounds reasonable, for example... And THREE includes all of them either way. Nope: 
`<a-entity geometry="primitive: box" material="flatShading: true; color: blue"></a-entity>` just renders as black

`<a-entity geometry="primitive: box" material="shader: flat; color: blue"></a-entity>` renders as blue, but (obviously) flat @dmarcos yes, that certainly sounds like the issue is a problem with the shader using something unsupported. Though if it is, in fact, the same problem as the previously-closed related issue, it doesn't sound particularly specific to any given device: we have repros on 15 different devices from 7 manufacturers, and @EerikKivistik [says they "are getting a few hundred reports a week from our users"](https://github.com/mrdoob/three.js/issues/12679#issuecomment-380071840)

My guess is the issue is something to do with the Qualcomm Snapdragon 425/Adreno 308 GPU -- I believe that's the (extremely common) low-/mid-range chip used in most (all?) of the devices reporting this issue (as well as most other common low-/mid-range Android devices available in the market these days) @teodorg would you be able to confirm that the two test cases we've isolated in [the three.js issue](https://github.com/mrdoob/three.js/issues/14137#issuecomment-396514995) are reproducible on your Moto G3?

(note: the second issue causes the phone to crash completely and hard-restart, so make sure you don't have anything important open that you'll lose, and I'd recommend testing it in an incognito tab to avoid getting stuck in [the same restart loop I did](https://github.com/mrdoob/three.js/issues/14137#issuecomment-396348889))

https://bugs.chromium.org/p/chromium/issues/detail?id=851870
https://bugs.chromium.org/p/chromium/issues/detail?id=851873 FWIW it seems this issue is specific to high precision, and so is avoidable in three.js by forcing rendering with `mediump`. Is there any way to do that in AFrame? @gabrielgrant I sent out test builds to some of our users who are having this issue and will report back if "mediump" solves the problem out in the wild. Any ideas on how to detect devices that need to be forced to "mediump" that does not involve doing an offscreen canvas render test on startup? @gabrielgrant So far, all the Android 7.0+ devices are rendering on "mediump" with the expected artifacts, but at least materials work. As for older devices running Android 5.0, it seems to make no difference, with everything still rendering completely black. @EerikKivistik Oh, interesting -- didn't know this issue affected anything earlier than Android 7.0

In terms of detecting affected devices -- that depends on whether you want to actually test for the failure, or just check for devices that are known to exhibit the issue. AFAIK this fails on devices if, and only if, they have an Adreno 308 GPU.

I think you need to create a canvas to get the webgl context, but i think once you have that canvas, you should be able to do detection on the device params without actually having to render anything. Something like this should do the trick:

```
let canvas = document.createElement('canvas');
let gl = canvas.getContext('webgl');
let dbgRenderInfo = gl.getExtension("WEBGL_debug_renderer_info");
let unmaskedRenderer = gl.getParameter(dbgRenderInfo.UNMASKED_RENDERER_WEBGL);
let unmaskedVendor = gl.getParameter(dbgRenderInfo.UNMASKED_VENDOR_WEBGL);
```
My devices report the vendor as `Qualcomm` and the renderer as `Adreno (TM) 308`:  https://github.com/mrdoob/three.js/issues/14137#issuecomment-392877172

but I don't know if that is the case for all affected devices. So actually testing the feature is probably safer.

What is the specific rendering test you're using? If you have access to (or have users who have) other affected devices and are able to test, it would be useful to know whether these params (and others; screenshots from webglreport.com would be awesome) are consistent @EerikKivistik Looking back at [your original list of devices on which you'd seen the failure](https://github.com/mrdoob/three.js/issues/12679#issuecomment-375980801), they were all Android 7+ (except for the one Android 4.4 device, that i assumed was probably a red herring). Are there other devices you know of now that weren't listed there?

Also curious what artifacts you're seeing? There was some @bhouston had said he thought they "fixed the majority of the issues" with `mediump`: https://github.com/mrdoob/three.js/issues/14137#issuecomment-396390858

Edit: actually, looking again, he links to a number of still-unfixed precision issues here: https://github.com/mrdoob/three.js/issues/14137#issuecomment-396562870 @gabrielgrant One example I recently discovered is XiaoMi MiPad 2 (Android version 5.1). The medium precision workaround has no effect there.  

As for the artifacts I will include a screenshot taken from an Android 7.0 device.
![screenshot_2018-06-14-22-55-57-765_com android browser](https://user-images.githubusercontent.com/5612934/41525396-8407ffd8-72e9-11e8-8524-38f456258801.png)

 @EerikKivistik it seems the XiaoMi MiPad 2 has an Intel Atom X5-Z8500 (with an Intel HD Graphics GPU), whereas this issue appears to be specific to the Qualcomm Snapdragon 425, so it sounds like the issue(s) you're seeing with older devices is/are likely some other problem(s) that just happens to have the same symptom. May want to open another issue about those devices (probably against three.js rather than aframe). And in any case, probably best to continue this discussion in https://github.com/mrdoob/three.js/issues/14137 I think this issue is complex and what we need is a set of reproduction cases that we add as three.js examples - maybe webgl_material_precision_varants.html.  It would be the same shader but with highp and mediump in the same scene right beside each other.  Maybe modify the weblg_materials_physical_varants.html to do this.

Maybe even use the webgl debug API to get the GPU name and also display the browser string and display it on screen.  Then eveyone can screenshot their devices once and you can see the GPU, the OS version, the browser version and also whether it works with mediump and/or highp.

I think this is a complex problem and we need to approach it systematically. WE here at Exocortex/Clara.io have more than 25 mobile devices.  Once we have a consistent test bed, we can test on each device and share a screenshot.  If everyone else does this we can likely pinpoint the issues and we can then work to fix them in a systematic way.

The trick is that each error should be reproducible at once in a single example without modifying any DAT-GUI settings.  Thus we only need a single screenshot for each device to know exactly where it stands with regards to bugs.

We do not even have to wait for this to be in the next release, we can use rawgit to view the example in either a PR state or once it is merged into master.  related to https://github.com/aframevr/aframe/issues/3519#issuecomment-378822221

  
https://a-frobot.github.io/aframe/examples/showcase/wikipedia/
A-Frame Version: 0.8.1 (Date 2018-04-03, Commit #3820c9b)

Uncaught ReferenceError: mwNow is not defined

maybe the showcase can be removed?  ok, i only mention remove, because there is no link to this showcase on aframe.io or on the embedded
documentation 

as example and for simple source code reading 
https://aframe.io/aframe/examples/test/embedded/



  all fixes from github:supermedium/three.js#r90fixPoseAndRaycaster are in r91


 no the idea was to to this on a-frobot.github.io after the merge  06:00:05.406 index.js:83 A-Frame Version: 0.8.1 (Date 2018-04-03, Commit #3820c9b)
06:00:05.535 index.js:84 three Version: 0.91.0
06:00:05.536 index.js:85 WebVR Polyfill Version: ^0.10.5

hello world example works fine with chrome 65 ( i cannot test vr :/ ) 

yarn test 
✔ 2090 tests completed
ℹ 28 tests skipped

no errors 
 yeah i have done this with the http://localhost::9000/examples/boilerplate/hello-world/ 
example
but only on fedora and chrome desktop 

i looked all http://localhost::9000/examples/test/   and chrome and all looks "normal" 
 ok i have done some sanity check on all  examples and test on fedora chrome Version 65.0.3325.181 
( can not do vr test :/) 

problems found are in https://github.com/aframevr/aframe/issues/3506  (using old aframe version) 
and https://github.com/aframevr/aframe/issues/3521

yarn test looks good
SUMMARY:
✔ 2090 tests completed
ℹ 28 tests skipped


 I checked out the showcase examples on Firefox/Vive. All except for the Wikipedia example worked.

Unfortunately, this does not resolve #3441. Looks like the fix (mrdoob/three.js#13685) was merged after the r91 release. 

 

 maybe there is a three Release r92 soon? https://github.com/mrdoob/three.js/wiki/Migration-Guide  @dmarcos  i still have the problem on codesandbox.io with the github:supermedium/three.js#r90fixPoseAndRaycaster on 0.8.x  (filesize problem) 0.7.x works fine 
i ask the codesandbox dev to solve this, but they think aframe should fix this 
 @dmarcos  sure, the only idea was to have this,  working in the point release ...  how can i add this to  https://github.com/aframevr/aframe/milestone/8 ? with commit https://github.com/aframevr/aframe/commit/d5bb456c9a23b955b157b671cd5f5d08daea85e2 
 i think this can be closed 
  Currently, laser-controls uses trackpad button for both Daydream (which has no trigger) and for GearVR.  However, the GearVR controller does have a trigger, and A-Frame should use that by default for consistency with native usage.

For example, at the moment one uses the trigger to click the enter VR button when on an A-Frame laser-controls page in Oculus Browser on GearVR, but then one needs to start using the trackpad instead once in VR, which seems / feels odd. https://github.com/aframevr/aframe/blob/master/src/components/laser-controls.js#L73 "help wanted" you mean test it on GearVR? @dmarcos  I have GearVR with controller, what should i change in my code to test this? I think "help wanted" means looking for folks to submit the fix as a pull request to this A-Frame source code repository... and "(easy)" means the required change is simple / straightforward so it is ideal for first-time participants.

Basically, just need to make the GearVR line mentioned above that specifies trackpad down and up
look like the other lines that specify trigger down and up instead. Thank you so much for explaining @machenmusik  done :) hopefully i did it correctly sure @dmarcos that's a great idea. although it's my 4th contribution on github ever :) many thanks @payamspot for your patience and understanding! The trackpad on the Controller corresponds to the trackpad on the headset. Has this been tested to ensure users with only a headset can still use laser-controls, with the trackpad button? I am not sure that would have worked in the first place actually, unless you have both controller and trackpad, since the GearVR trackpad on the side of the headset does not have a pose, and therefore will not be utilized by `tracked-controls` which `laser-controls` builds upon... The description of laser-controls implies that it downgrades to a gaze cursor when no 3DOF or 6DOF controller is available. However, you're right, it does not actually do so. :-(

Proceed! I'd like to warn, that Right Trigger AND Touchpad on the Gear VR controller map to the same thing. For this reason we would expect that if using laser-controls either input would be allowed. We originally did not want the trigger to be activation because we wanted it to be grab, but its like a 50/50 split as to whether or not people use the touchpad or Trigger when activating something, so we wound up just mapping both to the same action and giving up on having the extra button be used for something else. Thanks @DigiTec - so for native consistency it should have both sets of events rather than one or the other  
**Description:**

**Changes proposed:**
-
![livevibelogo](https://user-images.githubusercontent.com/28209737/38177212-05e5d19e-35b2-11e8-9ca8-09911973d6d8.png)
-
-
  The new RS4 update for HoloLens enables WebVR in Edge, but Aframe does not correctly present immersive view. The basic three.js examples such as "cubes" (https://threejs.org/examples/webvr_cubes.html) work on HoloLens, however Aframe 8.0 examples enter full screen click/drag mode instead of vr presentation. With Aframe 7.0, "Enter VR" button does nothing in Hololens.

- A-Frame Version: 8.0
- Platform / Device: HoloLens Edge Browser
- Reproducible with basic Aframe 8.0 example: https://aframe.glitch.me/

 I am closing this issue; Aframe works correctly once the "Enable WebVR" experimental flag is checked in Edge for HoloLens under "about:flags." WebVR is not an experimental feature for Windows 10 desktop Edge browser so I forgot to check this. Is it by design of the hololens that there is no click event in immersive view? If there is a possibility to click can you please document that? I was unable to figure this out yet.

Thanks @DominicBoettger I haven't been able to figure out the click event, but I did receive the following information from a Microsoft contact: 

> Currently both spatial controllers (for the WinMR on Desktop case) and hands (for HoloLens) are exposed via the standard W3C gamepad spec: https://www.w3.org/TR/gamepad/  
Here is documentation on how to use the gamepad API with WebVR:
https://docs.microsoft.com/en-us/microsoft-edge/webvr/input
With regards to HoloLens – you will be able to listen to gamepadconnected and gamepaddisconnected events, and check the button pressed state (on HoloLens – the select action via finger tap will come through as a button pressed state at index 1). This is similar to what you’ll have available with the HoloLens clicker. Wow. Thanks a lot!
I will test this next week. Very interesting!
  Modify oculus-touch-controls to accommodate current model and semi-recent browser / SDK behavioral changes in Touch controller pose.  See discussion in #2965.

Note that the model pose changes are made conditionally to the default Touch model only, and that the positional offset are not exactly perfect still, but IMO slightly better aligned with real-life than previous suggestions.
 (Could use some additional opinions on the pose offsets...) I previously left the pivot offset in there in case others tried it and determined that pivot offset of zero was wrong - I am interpreting the comments as if you've tried it and it looks fine, thus removed that stuff now.

UPDATE: got a chance to check, and the traversal is in fact necessary.  For example, in laser-controls example, the element's Object3D has two children, a Line (for the laser, presumably) and a Group... which implies that other components could pile on in there, and we want to make sure we only rotate the specific model in question.

TL;DR I think we're down to minimal fix at the moment.  This makes it hard to disambiguate between a situation where you just have one GearVR controller vs. whether you have two Oculus Touch controllers. However it could be desirable behavior since it'll make sure a lot of GearVR-oriented experiences work with Oculus Touch. Maybe this should be an explicit option?

- A-Frame Version: 0.8.0
- Platform / Device: Windows 10 / FF Nightly 61.0a1 (2018-03-31) (64-bit)
- Reproducible Code Snippet or URL:

this.el.setAttribute('gearvr-controls', { hand: 'right', model: false });
this.el.addEventListener('controllerconnected', evt => {
  console.log('controllerconnected', evt.detail.name);
});

Output:
controllerconnected oculus-touch-controls
controllerconnected gearvr-controls 0.8.0 had a gearvr-controls bug that has been fixed in master, can you retry with latest? More specifically, https://github.com/aframevr/aframe/pull/3489 Now merged into latest master  Thanks, Don. As the document is publicly available now, for the sake of honesty and clarity, I would like to add that the texture I used in that PDF was created by the Sketchfab user **proxy_doug**.

In particular, it was included in the assets I downloaded to create my submission for the Mozilla WebVR Medieval Fantasy Experience Challenge, and this is the link to his collection:

https://sketchfab.com/models/6429e3f908f74be3bd157b5cb0c01e81  **Description:**
When entering VR mode on iPhone browsers the browser does not go fullscreen but instead keeps its bars present.

It looks like this and doesn't work well with cardboard:
![alt text](https://i.imgur.com/1HwResp.jpg "iPhone/A-frame")

- A-Frame Version: Master dist. 12d8721
- Platform / Device: iPhone SE (iOS 11), Chrome & Safari.
  **Description:**

The examples hosted at https://aframe.io/aframe/examples/animation/aframe-logo/, etc have not been updated and still use v0.7.0. They're often very useful for confirming bugs with the latest release, so it would be useful to update them.

- A-Frame Version: 0.8.0
- Platform / Device: N/A
- Reproducible Code Snippet or URL: https://aframe.io/aframe/examples/animation/aframe-logo/

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 :+1: looks good to me. Thanks having some sort of latest-stable tag might be useful here I agree with that, but the original comment was that they were useful for catching breakage / incompatibilities between versions, meaning the desire was in fact to see the breakage as canary.  I suppose there is the question of whether examples to be copied as you suggest should be moved to glitch or similar in general, and those should be locked to versions as they usually are now.  Relative path would probably work fine for example folders actually, like https://aframe.io/0.8.0/aframe/examples/animation/aframe-logo/  https://aframe.io/examples/showcase/videosphere/

still using aframe A-Frame Version: 0.7.1 (Date 18-10-2017, Commit #b9a751e)

hmm should link to https://github.com/aframevr/aframe/blob/master/examples/boilerplate/360-video/index.html @dmarcos 
the ide awas to test/help people in the bug report https://github.com/aframevr/aframe/issues/3507
 examples/showcase/dynamic-lights/
same using A-Frame Version: 0.6.1 (Date 19-07-2017, Commit #a4b91bc)
  **Description:** When applying multiple sound components to an entity (e.g., `sound__click`), there doesn't seem to be an obvious way (or possibly any way) to identify the sound component's `name` and/or `id` (e.g., `sound__click` and `click`, respectively).

This makes listening for the `sound-loaded` and `sound-ended` events somewhat ineffective as the source component and audio are unknown.

- A-Frame Version: `0.7.*` - `0.8.0`
- Platform / Device: Firefox, Chrome, Edge on Windows 10 (all I've tested)
- Reproducible Code Snippet or URL: https://codepen.io/dansinni/pen/ZxvyLx

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Sounds good, @koganei. I only mentioned `e.target` because I couldn't figure for the life of me how to access that data. `e.detail` definitely seems more appropriate. Thanks.  Hi,
I have the 2d images with different frames. Can i use this library to show the rotation of objects with the frame? if not then how can i change my 2d image for this library to show the rotation. Please help asap. Thanks in advance.   Here is my code 

`<a-scene>
    <a-camera position="0 0 10" cursor-visible="false"></a-camera>
    <a-entity geometry="primitive: sphere;
                radius: 100;
                segmentsWidth: 64;
                segmentsHeight: 64;"
        material="shader: flat; src:#image;"
        scale="-1 1 1" side="double" opacity=".5">
    </a-entity>
</a-scene>`

With A-Frame v 0.8.0 the img materiel is rendered outside the sphere, I tried using side property to change it to inside but never worked. With the same code without using side attribute the materiel is rendered as expected inside the sphere with 0.7.1  Threejs' Material class has the `blending` property which is really useful for faking materials that emit light or other effects. (For example, see the disco lights in [saturday night](https://aframe.io/a-saturday-night))

https://threejs.org/docs/#api/materials/Material.blending

It would be nice to have it available in A-Frame material directly, without having to make a custom component just for changing its value. I would like to have a crack at this. As far as I can see it just means creating a `blending` component that passes the property to three.js in the sme way that e.g. the position component works. Does that make sense? Thanks  @donmccurdy yup, that is exactly what I was asking for :) @donmccurdy @feiss thanks. I'm working on this. Seems straightforward so will be done soon. thanks!    **Description:**

**Changes proposed:**
-
-
-
  I think I am running 7. I will try on 8 and see if it works differently. I would love to show you a demo, but I have managed to create a rather fragmented node project that I don't know how to share without giving you 153 MB worth of files. Forgive me. I'm still super new at this. I can send you just the html file if that helps?  As seen in https://github.com/aframevr/aframe/blob/master/src/shaders/standard.js , the default value for metalness is 0, not 0.5  **Description:**
As described on #3449 if you want to build project which depends on aframe it fails because of ES6 syntax on `aframe-master.js:75038`. This code comes from `a-register-element.js:62`

**Changes proposed:**
I have changed for..of loop:
```javascript
for (var propName of Object.getOwnPropertyNames(newObj.prototype)){}
```
to forEach function call:
```javascript
Object.getOwnPropertyNames(newObj.prototype).forEach(function(propName){})
```
 `npm run test:firefox -- --single-run` crashes for me also on master branch without any changes Yeah, I ran into that while doing #3489 as well.  Maybe you can try forcing an empty commit to get it to try again? yay tests passed  On 0.8.0 the `vive-controls` component no longer works. The controllers are not present on the scene. Code (tested on Nightly 60 with HTC vive):

```html
<a-entity vive-controls="hand: left"></a-entity>
<a-entity vive-controls="hand: right"></a-entity>
```

Thanks! I am also experiencing this same error—controllers are active (events fire) but models are not visible on screen. The suggested changes to Three.js in #3441 do not fix the error. I found instead that by saving the object models locally and manually attaching them to the controllers is the only way to get them to appear. try super-hands!  **Description:**

- A-Frame Version: 0.8.1
- Platform / Device: Windows 10

I'm experiencing an issue with the node package. It keeps freezing when I run `npm install aframe`. 
![image](https://user-images.githubusercontent.com/19154356/37822071-15ecd464-2e8e-11e8-9e12-97eb4e614327.png)

Any advice?
 Are you sure it doesn't simply take time to download the dependencies? I noticed several weeks ago that the git version of three that aframe currently use took time to download. You can look at the running processes to see if you have a git command. `ps aux|grep git` on linux, on Windows I don't know. Thank you @vincentfretin the internet at my office is rather slow so will try again at home tonight where I have a much faster line.  Hi,

Earlier on I was having the same freezing issue. I cleared the npm cache and deleted the node_modules folder and was having the same issue afterwards.

In trying to screencap the issue the behaviour changed and I'm now receiving this error

```
PS D:\WebDev\aframeTest> npm install --save aframe
npm WARN addRemoteGit Error: Command failed: git -c core.longpaths=true config --get remote.origin.url
npm WARN addRemoteGit
npm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:204:12)
npm WARN addRemoteGit     at emitTwo (events.js:106:13)
npm WARN addRemoteGit     at ChildProcess.emit (events.js:191:7)
npm WARN addRemoteGit     at maybeClose (internal/child_process.js:886:16)
npm WARN addRemoteGit     at Socket.<anonymous> (internal/child_process.js:342:11)
npm WARN addRemoteGit     at emitOne (events.js:96:13)
npm WARN addRemoteGit     at Socket.emit (events.js:188:7)
npm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:497:12)
npm WARN addRemoteGit  dmarcos/three.js#r90fixPose resetting remote C:\Users\...\AppData\Roaming\npm-cache\_git-remotes
\git-github-com-dmarcos-three-js-git-r90fixPose-cd804eef because of error: { Error: Command failed: git -c core.longpath
s=true config --get remote.origin.url
npm WARN addRemoteGit
npm WARN addRemoteGit     at ChildProcess.exithandler (child_process.js:204:12)
npm WARN addRemoteGit     at emitTwo (events.js:106:13)
npm WARN addRemoteGit     at ChildProcess.emit (events.js:191:7)
npm WARN addRemoteGit     at maybeClose (internal/child_process.js:886:16)
npm WARN addRemoteGit     at Socket.<anonymous> (internal/child_process.js:342:11)
npm WARN addRemoteGit     at emitOne (events.js:96:13)
npm WARN addRemoteGit     at Socket.emit (events.js:188:7)
npm WARN addRemoteGit     at Pipe._handle.close [as _onclose] (net.js:497:12)
npm WARN addRemoteGit   killed: false,
npm WARN addRemoteGit   code: 1,
npm WARN addRemoteGit   signal: null,
npm WARN addRemoteGit   cmd: 'git -c core.longpaths=true config --get remote.origin.url' }
```

I tried in a new npm project with no other packages installed and received the same issue. Having the same issue. After running install again with the `--verbose` flag, it seems that it's just taking a very long time to download the threejs library.

`verbose 3.042 Performing "GET" request to "https://codeload.github.com/supermedium/three.js/tar.gz/5ef2887ab3621cae54fa129a500424d6caa25b62".`

Just gotta wait it out I suppose Yup, doing a `yarn add aframe` or `npm i aframe` took me more than a minute, even on a pretty fast connection. Aframe: v0.8.2
Node: v8.9.4
Having this issue as well.

Here is the log from --verbose flag.
npm install --save aframe --verbose
npm info it worked if it ends with ok
npm verb cli [ '/usr/local/bin/node',
npm verb cli   '/usr/local/bin/npm',
npm verb cli   'install',
npm verb cli   '--save',
npm verb cli   'aframe',
npm verb cli   '--verbose' ]
npm info using npm@5.6.0
npm info using node@v8.9.4
npm verb npm-session e1123ca191fe3614
npm http fetch GET 304 https://npm.c-code.com/aframe 2591ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/envify 1078ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/@tweenjs%2ftween.js 1119ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/deep-assign 1147ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/present 1488ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/browserify-css 1633ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/three-bmfont-text 895ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/webvr-polyfill 979ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/style-attr 2426ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/promise-polyfill 2634ms (from cache)
npm http fetch GET 304 https://npm.c-code.com/load-bmfont 5154ms (from cache)
⸨░░░░░░░░░░░░░░░░░░⸩ ⠦ fetchMetadata: http fetch GET 304 https://npm.c-code.com/lo
d-bmfont 5154ms (from cache)

I managed to install Aframe v0.7.0 without problems. Me too. 0.7.0 installs fine. +1 wow... took me about 10 minutes to **npm i** aframe@0.8.2...  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: Firefox / Rift
- Reproducible Code Snippet or URL: http://ravenworks.ca/witch/bugdemo/edgedisappear.html

![edge_disappear](https://user-images.githubusercontent.com/8540042/37803073-6bb2e95a-2e03-11e8-8d3c-2c01e565ce90.png)

It seems like the frustum used for frustum culling isn't set right? In VR mode, no matter where I turn my head, I always see objects flicking in and out of existence along the right edge of my field of view. (The example I've linked is a room built out of individual colored tiles, to show the problem clearly.) ah, fair enough!

Probably worth leaving open here too until it's resolved there and pulled in (if only for the next person to come along and try to report it here) actually wait, I just realised, it looks like that thread says the issue is fixed in r91? When is A-Frame planning on targeting that version? Very noticeable after upgrading to A-Frame 0.8.x. Going back to 0.7.x not really an option either, as VR has become very unstable in the newest version of Firefox with 0.7.x. Anything I can do to help move this forward? I've looked into this, and the offending line of code is https://github.com/mrdoob/three.js/blob/dev/src/renderers/webvr/WebVRManager.js#L195.

Fixing this seem be stuck on the WebXR API exposing a combined frustum for both eyes, as described in https://github.com/immersive-web/webxr/issues/203. However, this issue has seen no activity for nearly a year.

I think this is too big of an issue to just wait for something to happen in the WebXR API, which Three.js can then adapt to the benefit of A-Frame. I don't know enough about frustum calculations, but if I did I would submit a PR to Three.js that applied a combined frustum of both eyes at least until it can be fixed in the WebXR API.

Anyone know how to do this?  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: Firefox / Rift
- Reproducible Code Snippet or URL: http://ravenworks.ca/witch/bugdemo/

I have a scene where I'm using a second camera that draws a separate scene into its own WebGLRenderTarget, to make a live flat texture in my scene with GLSL. The scene works perfectly in 2D mode; the big circle accumulates spots forever, in a way that has nothing to do with where the viewer is standing.

However, the moment that I enter VR, the second scene's camera starts following the user's head just like the main camera is. (The big circle will likely immediately become the color of the second scene's clear color, and if you wiggle your head around just right, you can eventually get a distorted view of the surface that the shader is running on.) 

Is there something I'm meant to do to indicate to A-Frame that a secondary camera is not meant to be driven by the user's head in VR mode? That works around it perfectly! Thanks so much!

(Unsure whether I should close the issue now, or leave it open until the workaround isn't needed? Up to you.)  The use case is as follow:

There are multiple objects in the scene some partially hidden. If click events have been placed on all objects, one would expect that the front-most object picks up the click. However, in `0.8.0` this was not happening consistently. When I tried on glitch with a simple 2 objects, it works. But when there are say 10-15 objects it at times picks up and at times fails.

However, changing the aframe ver to `0.7.1` always picks the front-most object.  **Description:**

- A-Frame Version: 0.8.1
- Platform / Device: VR PRIMUS VA4
- Reproducible Code Snippet or URL: 
```html
<a-scene>
     <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" shadow></a-box>
     <a-sphere position="0 1.25 -5" radius="1.25" color="#EF2D5E" shadow></a-sphere>
     <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D" shadow></a-cylinder>
     <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4" shadow></a-plane>
     <a-sky color="#ECECEC"></a-sky>                
     <a-camera position="0 1.6 0" look-controls></a-camera>
</a-scene>
```

It touch control worked in the version 0.7.1. I this new version doesn't works
Also I tried something like
```html
<a-entity id="rig"
          movement-controls
          position="25 0 25">
  <a-entity camera
            position="0 1.6 0"
            look-controls="pointerLockEnabled: true"></a-entity>
</a-entity>
```
but without success.
<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 If I use the same code in the version 0.7.1 the joystick works. If you for example click without glasses the button icon to go to VR you will see that after if you try to move the camera touching it doesn't work with 0.8.1 but it works in 0.7.1. The joystick just rotate it. FYI -- I ran into something on another experiment where previous code that directly manipulated the camera Object3D rotation don't work anymore with look-controls in 0.8.x, because look-controls now uses its own internal pitchObject and yawObject and overwrites the Object3D... so whatever code the joystick was previously using may need to modify the pitchObject and yawObject rotation instead snippet from relevant tick handler:
```
tick: function (t, dt) {
    if (!this.data.enabled) { return; }
    // With latest master, it is recommended to manipulate object3D rotation directly.
    var rotation = this.el.object3D.rotation;
    // FIX: with A-Frame 0.8.x, need to modify pitchObject and yawObject of look-controls, if present.
    var lookControls = this.el.components['look-controls'];
    if (lookControls) { rotation = lookControls.pitchObject.rotation; }
    if (!rotation) { return; }
    if (this.directionX || this.directionY) {
      // Remember, object3D rotation is in radians!
      rotation.x += this.data.dx * THREE.Math.DEG2RAD * this.directionY;
      if (lookControls) { rotation = lookControls.yawObject.rotation; }
      rotation.y += this.data.dy * THREE.Math.DEG2RAD * this.directionX;
    }
  }
``` @machenmusik then is it a bug to fix or I have to implement the above code? sorry but I don't understand very well, it is right that I'm really beginner with this library. None of us have the hardware you do, so part of the complication here is that we don't understand the mechanism that was working previously, but no longer does with 0.8.x - if it was using aframe-extras, I don't think @donmccurdy has updated for 0.8.x, so that is expected; if it was using some other component that directly modified rotation, at present that needs modifications similar to what is posted above.  (Plain A-Frame does not, to my understanding, support joystick input without other components, so not sure if that hardware is generating other events when the joystick moves, for example...) Then in my case I will continue to use the 0.7.1 version until aframe-extra is updated. If I have time I will look into the commits if I can understand which changes broke it. If I discover then I will create a PR OK - then perhaps the right thing to do here is to create an issue in aframe-extras repository referencing this one, then close this one here and await resolution from aframe-extras. @machenmusik this is not regarding with aframe-extras, in the version 0.7.1 it works without use aframes-extra.
@donmccurdy I have to test aframe-extra if my joystick works and I can move around the scenery, it would be great :+1:     **Description:**
A PR for reverseMouseDrag.
The PR is for desktop, should mobile drag be reversed too?


**Changes proposed:**
-fix reverseMouseDrag function
-
-
  **Description:**
In the *Building a 360° Image Gallery* Guide, the example for the "basic scene" has a path to an audio file that is relative. Trying to run this locally will not work unless the user finds the file, downloads it and copies it to the correct path. Not very friendly for first-time users.

**Changes proposed:**
- Use src URL for media on CDN, as per the Glitch example.
  **Description:**

- A-Frame Version: 0.6.1
- Platform / Device: 
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/laneo360-3?path=index.html:10:49

¿How can i make a link to another web page with the a-link?
I'm amateur and i'm really interested in knowing this, please help

i already tried another alternatives but it's resulting impossible to me


  A typed array is no longer passed correctly to a component when setting a property in version 0.8. 

In version 0.7 for  schema: { vert: {type: 'array', default: []} }

console.log(this.data.vert) resulted in:

Float32Array [ 0.058115072548389435, 1.987938124548116e-20, ...

if the incoming array was a typed array. In version 0.8  this same sequence results in :

Object [ 0.058115072548389435, 1.987938124548116e-20, ...

Will this be the default behavior going forward? Passing in typed arrays made the creation of buffer geometry more convenient. 


 I had only been setting the array via a setAttribute call. While not a huge
deal to recast/recreate the typed array it seems unnecessarily waste full
for large arrays like I am passing in (I am dynamically creating complex
buffer geometries).  Adding a custom property definition such as,
"arrayTyped", would probably be a good solution.

On Thu, Mar 22, 2018 at 5:58 PM, Don McCurdy <notifications@github.com>
wrote:

> Was it automatically a typed array before, or only if setAttribute was
> called with a typed array?
>
> Inclined to say the more consistent behavior in 0.8.0 is good, and we can
> recommend use of a custom property definition where typed arrays are wanted.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_aframevr_aframe_issues_3479-23issuecomment-2D375471261&d=DwMFaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=U4d6pDVyay5sXnwRjRk03A&m=X9jWD0CFpQONayJ7DL9EijpQa3gwyqsjXxvhp5KgBYk&s=ublSvJeBBeO_MrhZwEOu0lNzOsYb9jJulqnEMYLJnJA&e=>,
> or mute the thread
> <https://urldefense.proofpoint.com/v2/url?u=https-3A__github.com_notifications_unsubscribe-2Dauth_AjOH-5FrCfrCfd4l7mhFwMypgkQ0f58u0iks5thB6VgaJpZM4Syd5H&d=DwMFaQ&c=pZJPUDQ3SB9JplYbifm4nt2lEVG5pWx2KikqINpWlZM&r=U4d6pDVyay5sXnwRjRk03A&m=X9jWD0CFpQONayJ7DL9EijpQa3gwyqsjXxvhp5KgBYk&s=uv_RcJ9K2-T1cCcglmVTZeJcxoeBk9EqXg3y70gN3_o&e=>
> .
>



-- 

Durscher, Ryan J

dursch@ufl.edu
  We have versions of standalone logo icon, standalone wordmark, wordmark with icon. Will provide vector files by end of week. Thanks for inquiring about this; I am glad the brand will be more consistent. :+1: @caseyyee and I are finalising the logo treatment. we'll get a ZIP of the files posted in this issue by the end of week. thanks for following up on this!  **Description:**
This issue makes the camera jump around like crazy, being super sensitive to any motion whatsoever.
I assume this issue is related to issue [#3458](https://github.com/aframevr/aframe/issues/3458) but instead of the camera moving slowly it moves far too quickly.

Here is a video showing the issue, the video was recorded with the phone held with stable hands.
https://vimeo.com/260723899

- A-Frame Version: 0.8.0
- Platform / Device: Chrome Beta 66 / Oneplus 5 (Android 8.0.0)
 Updating to the latest A-Frame contains an updated webvr-polyfill which fixes these issues -- not sure what A-Frame release contains these changes, though (but introduced after 0.8.0) Any idea when this will be solved? Thanks in advance. yeah, m65 will be replaced with m66 soon and polyfill has been updated with all issues Thanks man! It works 👍 . @dmarcos Is there any way to modify web-polyfill to newest version in Aframe 0.5.0? Since I have already built an large AFrame project with 0.5.0, a lot of thing need to change if i swap to new version of aframe. Thanks in advance. I am using A-frame 0.6.1. How can I fix this without updating to 0.8.0.  What @ngokevin said is the only way, using the 0.6.1 tag:

> You can try to build yourself. Clone the repo, checkout v0.5.0 tag, update package.json, npm run dist. YMMV I've been away for a while from A-Frame. Wanted to test some of my older experiments, but saw this issue. I went to the homepage of A-Frame and noticed the same issue with some of the examples there.
Using Chrome on a new ZTE Axon 7. I noticed this on my Samsung s8 + last night. Aframe .8.2 and chrome m66.  You can modify the web-vr at previous version of Aframe (just need to add a
if condition). Look at the source code of the latest web vr, search keyword
'chrome'. It has a variable corresponding to version of chrome.

gabrieljbaker <notifications@github.com>于2018年5月25日 周五00:46写道：

> I noticed this on my Samsung s8 + last night. Aframe .8.2 and chrome m66.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3476#issuecomment-391741872>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/ARIG8G5kJyOyty3Po5eIsGEdxEHE6Bt9ks5t1sfVgaJpZM4Svx9I>
> .
>
 Hi @ngokevin I am beginner in git. Do you have a video instruction on how to make my own build like what you commented on May 3. Thank you.  The DayDream controls were missing menu and system button tests to make sure that they get remapped and reemitted properly given their remapped names.

Additionally was able to fix up the trackpadchanged to use the deep object check for event state and then copy this across the two new tests.

Found one test that had a leading space in the description, fixed and then changed one assert.ok -> assert.fail which is more appropriate given the context.  This change delinks these event streams so that they can fire independenty of one another. I've also added a sufficiently complete number of tests for the new behaior to make sure all events that should be firing are, looking for negative events (ensuring some events don't fire when they should not) and that the values all come through as expected.

As part of the fix I've supplied some helpers that are now consistently used in tracked-controls.test.js for verifying individual events and streams of events in a more concise way to avoid duplicating a lot of code.

I've also made consistent the use of sinon's spy asserts, which were previously using the ".called" property which reaches into the abstraction further than it should. This also allows us to upgrade certain spy verification's to look for a specific number of calls (calledOnce) which is an overall improvement.

This change cascaded into the oculus-touch-controls.test.js and gearvr-controls.test.js as well. For the oculus-touch-controls, this is mostly assert fixups, but also does some additional deep object verification.

For the gearvr-controls.test.js this included some bug fixes (using wrong event names) when I was trying to make the test fail and could not, only to realize it wasn't sniffing for the right event names. This is in preparation for creation of the oculus-go-controls component and test suite.

**Description:**

**Changes proposed:**
-
-
-
 Test failure is FireFox only. Unrelated to the changes I've made unless I'm missing something. Maybe this is a known issue?

SUMMARY:
✔ 11 tests completed
✖ 1 test failed
FAILED TESTS:
  ✖ "after each" hook for "emits mousedown event on intersectedEl"
    Firefox 59.0.0 (Linux 0.0.0)
  Timeout of 2000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.
  require<["/home/travis/build/aframevr/aframe/tests/__init.test.js"]</</<@/tmp/tests/__init.test.js:57:0 <- /tmp/f633f031b631506f1dd8c8e8c60c723e.browserify:64579:5 Verified that the offending test failure is also on master (updated my local repository master to verify).   **Description:**

- A-Frame Version: v0.8.0
- Platform / Device: Android
- Reproducible Code Snippet or URL: 

in the last version it does not work
 When not in VR mode, that is. While in VR, everything works perfectly. The issue is made worse by the look-controls touch mode not allowing vertical rotation, thus making zenith and nadir areas inaccessible on Android devices while not in VR.  In my case, in VR mode in Chrome only the gyroscope works vertically.   The standard `setAttribute()` function on DOM elements is defined to accept a string for both the attribute name and value. A-Frame breaks this standard by allowing the value passed in to be an arbitrary object. 

This could be brushed away as inconsequential, except Elm's fantastic HTML library and virtual DOM expects attributes to be strings, and thus offers no way to take advantage of A-Frame's more efficient object-passing approach.

Browsers provide another interface to set attributes: through JS properties. Mutating A-Frame components this way would change the interface from:
`entity.setAttribute('position', {x: 1, y: 2, z: 3})`

to:
`entity.position = {x: 1, y: 2, z: 3}`

Apart from it being more concise and maintaining consistency with regular HTML, adding such an interface would enable object assignment to be used in Elm, since Elm provides a means to specify DOM element properties.

This interface to set properties might also provide the opportunity to alleviate some of the overhead associated with the current `setAttribute()`. Thanks for the responses. I think I need to clarify further: Elm is its own programming language, and you can't write JavaScript as part of an Elm program. For manipulating web pages, Elm provides bindings to the DOM API. Since A-Frame is supposed to be HTML-based, we should be able to use it solely through the DOM API. And we can, if we use the standard string-based `setAttribute()` function that is part of the API. Apart from this being clunky to use programmatically, stringifying every value and having A-Frame immediately parse it again adds unnecessary overhead to every call. This is why A-Frame provides other overloads of `setAttribute()`.

However, the overloads defined by A-Frame are not part of the DOM API: Elm doesn't know these overloads exist, and provides no way to call them. A different approach to setting attributes that _is_ part of the API is DOM element properties. DOM element properties are not defined to be solely strings, and so we are allowed to assign arbitrary objects. Elm consequently provides a mechanism to set both standard properties and custom ("[expando](https://developer.mozilla.org/en-US/docs/Glossary/Expando)") properties.

In the case of the example given above, `object3D` is an expando property:
`entityEl.object3D.position.x = 5;`

Unfortunately this is a direct exposure of a Three.js object, and thus I can't create my own "object3D" or my own "position" to assign as a property without using Three.js constructors. I can only mutate the objects that currently exist.

However, I can already assign my own position using the attribute-based interface:
`entity.setAttribute('position', {x: 1, y: 2, z: 3})`

The equivalent functionality I'm proposing is to use standard DOM API properties to achieve this direct value assignment without breaking the HTML/DOM-based abstraction that A-Frame champions:
`entity.position = {x: 1, y: 2, z: 3}`

...where `position` is an expando property backed by a [setter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/set) that redirects the assigned object to the same place `setAttribute()` does.

If the objects assigned via this property interface remain Plain Old Data as attributes currently are, then this solution will work really well with Elm, and of course JS too. If there’s a reason why this API is not reasonable, then that’s fine. But
you don’t seemed to have justified why you couldn’t use properties.

On Wed, 4 Apr 2018 at 9:42 pm, Kevin Ngo <notifications@github.com> wrote:

> Closed #3469 <https://github.com/aframevr/aframe/issues/3469>.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3469#event-1556248595>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AA3hJJIEoCC_vXCqUiU8zurifYPkUn5Eks5tlLGjgaJpZM4SuzNc>
> .
>
 @ngokevin I'm also interested in why this wouldn't be possible.

> ...we won't be bending A-Frame to fit Elm or existing Web tools built for 2D Web.

Elm isn't built for just the 2D web; there's even [a WebGL package for Elm](https://package.elm-lang.org/packages/elm-community/webgl/latest). 

Elm's killer feature is its declarative app architecture which lets you map Model -> View without the usual mess of glue code. Elm's declarative app architecture paired with A-Frame's rock-solid VR and WebGL abstractions would be **insanely cool**. The cherry on top is that A-Frame is already *declarative* and *DOM-based*, which means Elm is tantalizingly close to working with A-Frame *out of the box* ([and kind of did up to 412d162](https://github.com/aframevr/aframe/issues/3460)).

Their names even pun together ;) It would be an absolute tragedy if Elm and A-Frame couldn't play well together.

PS: Thanks for creating A-Frame. It's awesome by itself! @ngokevin I also want to support this, Elm provides a wonderful way for building complex, interactive A-Frame scenes and it feels extremely natural to use the combination of the two. It would be great if this would work again.  Correct handling of post processing when using three's internal webvr support
 @dmarcos I redid the PR cause the rebase didn't went well  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: Firefox or Chrome on desktop
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/lace-coast

The example code should be placing objects so that they appear to be at the location clicked.

The intersection location given seems to have something to do with the location of the last object to have a `mouseleave` event, as if you set `raycaster: "objects: a-sky"` then the location never changes.  **Description:**

Fixes an issue affecting only the Chrome m65 hotfix patch where rotation isn't working correctly when starting from a specific orientation (https://github.com/immersive-web/webvr-polyfill/issues/309) 

**Changes proposed:**
- Update webvr-polyfill from 0.10.3 to 0.10.4
-
-
 I'm able to run the failing test (looks like it hung) locally with `✔ 1025 tests completed`  **Description:**
Camera moves slightly in every direction, whether I'm moving the device or not. Tested on master branch - with webvr-polyfill ^0.10.3 version.
- A-Frame Version: 0.8.1
- Platform / Device: LG X-Power II - Chrome v65
- Reproducible Code Snippet or URL: https://curved-actress.glitch.me/

![Random camera movement gif](https://media.giphy.com/media/zmTp1LVYEjjySTdVYm/giphy.gif)
 @tomegz what rate does this website report for you on that device? http://deviceorientation-rate.glitch.me Related: #3458  @jsantell it oscillates around 15.0 @tomegz that's unfortunately an issue in Chromium 65 -- there may be a patch before the next release, and I've noticed sometimes after restarting Chrome I'm able to get 55hz; other times, around 10.

Chromium bug: https://bugs.chromium.org/p/chromium/issues/detail?id=819413 @jsantell the camera is moving even if I'm not moving the device at all, is that caused by this exact bug? @tomegz there are [two issues](https://github.com/immersive-web/webvr-polyfill/releases/tag/v0.10.3) with Chrome m65, one with devicemotion events lacking rotationRate requiring a deviceorientation fallback in the polyfill for only m65, and another of low rate of updates (~10hz) for both events  2 minor changes
**Changes proposed:**
- default camera height changed to 1.6
- table cells format corrected
  A-frame is not cleaning up after itself when it is removed from the DOM. And as far as I can tell there is no API to destroy the scene manually?

I'm using an embeded a-frame scene in a nuxtjs spa and have noticed when I navigate to different page components the requestAnimationFrame continues to fire (there's also a memory leak I can't figure out but that is a separate issue).

- A-Frame Version: 0.8.1
- Platform / Device: OSX / Chrome
- Reproducible Code Snippet or URL: https://brash-landmine.glitch.me/

Wait 2 seconds then record the performance in dev tools - you can see the raf.

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 In case it's useful for anybody [here is a component](https://gist.github.com/homerjam/56bddc8979e958af2ce0cda03903a185) I'm using to help with renderer management/performance in my use case. Indeed - but in my (overcomplicated) use case I'm manipulating the scene with events from the parent page/window, running this all through postmessage would be a real headache!

[Check it out](https://www.studiothomas.co.uk) if interested.  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: Chrome 65.x, Desktop, Windows 10.
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/wheat-cord

For some reason, using `setAttribute`  will no longer allow me to programmatically rotate the camera via a component's `init`.

Please view the glitch above, view the non-working example, then uncomment the 0.7.1 CDN version to see it work.

I've scoured the API, but can't see any updates to method signatures or the like for this version. This is hard to manage dynamically for no particular benefit that I can see.

Particularly if you're setting camera positions based on HMDs connected, mobile or desktop because now initial rotation needs to be managed on a parent entity, but initial position needs to be managed on the camera (else I get offset problems). It's also difficult to manage inside the Inspector if you want to make quick adjustments.

Also breaks some contrib modules I'm using (camera fence, travel-node). Is there any other way around it? Trying to avoid long churn on upgrading an existing experience.


 I understand the reasons now, however, this doesn't really help with my particular situation unless I'm missing something in those comments.

For instance, to restore basic camera fencing capability, I now need to figure out some way to merge the 'camera rig' angle with the room angle so it makes sense for the user. Unfortunate as I don't particularly have time to wait for contribs to be updated.

![image](https://user-images.githubusercontent.com/236984/37690723-095b0ef2-2d01-11e8-89d9-33e27eb02042.png)

Can I suggest documenting this change so others don't proceed down the v0.8.x route without understanding the breaking changes for existing projects?





 The look-at component / billboarding is also broken by this change. Anything that requires access to or polling the camera rotation. Is there a way to easily calculate the difference in angle between the parent entity and the camera object? see https://github.com/aframevr/aframe/issues/3484#issuecomment-375425307 @donmccurdy Yeah, I'm talking about effectively billboarding, where an entity orients to face the camera. I know that's a common enough feature used in VR experiences. 

It's broken in 0.8 with this change, but I think I've solved it with some quaternion math (which I'm a novice in). 

e.g: in the tick function of the element I need to face the camera, I did this:
```javascript
let q = new THREE.Quaternion().multiplyQuaternions(self.camera.object3D.quaternion, self.cameraRig.object3D.quaternion)
return this.el.object3D.quaternion.copy( q )
```

Probably a bit of a stretch to ask non-devs to discover if they are starting on v0.8 and install an updated `look-at` contrib or other contrib that requires camera rotation, but I'm not sure how to handle that.

  **Description:**

Latest published A-Frame version is `0.8.1`, but matching git tag is missing 
https://github.com/aframevr/aframe/releases
https://github.com/aframevr/aframe/tags

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 ok let's close it then while it would be nice to have versioning to follow some standards...   Try to reverse mouse drag, but nothing happen.

- A-Frame Version: 0.8.0
- Platform / Device: Mac /Chrome
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/righteous-quit


 fixed it in pr:3482
https://github.com/aframevr/aframe/pull/3482  The camera cannot be tilted, also camera movement very slow. 
Dowgrade to ver. 56 of Chrome resolved the issue.

- A-Frame Version: 0.7.1 / 0.8.0
- Platform / Device: Android 7, Chrome 65.0.3325.109
- Reproducible Code Snippet or URL: [Aframe.io](url)

 Same issue with
* A-Frame Version: 0.7.1
* Platform / Device: Android 8, Chrome 65.0.3325.109
* Reproducible Code Snippet or URL: Aframe.io (examples)

AFrame doesn't use the gyros anymore, and behaves as the non-gyro-equipped phones.
It impacts every Android app using Cordova (the webview is based on Chrome) I checked the master, and the #3453 fixes in part the issue.
**Now, the camera have a low refresh rate.**
It's linked to an issue of Chromium : https://bugs.chromium.org/p/chromium/issues/detail?id=819413&desc=3

**Moreover, the VR view is and moves in the wrong way when using aframe master and Chrome 65.0.3325.109.**
It's OK with the old version of Chrome and aframe master. More information on the workarounds and Chrome regressions can be found in the polyfill's [v0.10.3](https://github.com/immersive-web/webvr-polyfill/releases/tag/v0.10.3) release notes @jeanmatthieud the camera moving the wrong way, is this only when you start in landscape? I believe https://github.com/aframevr/aframe/pull/3466 will fix this if that's the issue you're running into No, it's not fixed. What's the result? If it's stuttering on rotation updates, that's a [platform regression on Chrome m65](https://github.com/immersive-web/webvr-polyfill/releases/tag/v0.10.3) and not much we can do to fix in JS land. It's stuck on some random axis, and mobile device movement doesn't do anything anymore on Android Chrome. @dirkk0 what version of the polyfill (or commit of A-Frame build) is being used on that site? @jsantell thanks for looking into this!
it was:
//cdnjs.cloudflare.com/ajax/libs/aframe/0.7.1/aframe.min.js
and is now:
//rawgit.com/aframevr/aframe/4d90df5/dist/aframe-master.min.js
(because we hoped the latest version would somehow mitigate the problem) Do you have a link to the site anywhere where you can reproduce?
 my apologies:
it is indeed stuttering on rotation updates, as you said. I was probably looking at a cached version.
So we need to wait for m66, hoping there is a fix, right?
 There's a fix in m66 for the stuttering, correct -- there may be a m65 update with a fix, but at this point seems unlikely Hi, can anyone tell me if the problem with the VR camera has been solved?

In earlier versions of Chrome it works perfectly. [This webvr-polyfill release](https://github.com/immersive-web/webvr-polyfill/releases/tag/v0.10.3) details what issues are on latest Chrome, and the workarounds employed Having no luck with our site [The Union Project](http://apps.tlt.stonybrook.edu/unionProject/matrix.html) A-Frame 0.8 fixes issues we've been having on mobile with one click causing two click events, but the Gyroscope is totally disabled on chrome Android 65 & beta 66. We are using the dist above with the latest Polyfill version, also clicking is kinda weird and insensitive at times on mobile and in the mobile emulator; but I think the lack of Gyro is more severe.  Hello, I'm new to this and found this thread because I've got no gyroscope in chrome...but i have sound...while in Firefox I have gyroscope but no sound....any suggestions for the best browser to test my projects on that will allow both sound and head movement? Using Galaxy note 4, for now.
Thanks @chngngclrs gyroscope issue fixed (mostly) in latest aframe; audio issue sounds like a codec that Firefox does not support I got the same issue on Samsung S6. When I move right to left or up and down, it moves slowly. I tested on every browser on Samsung S6. But same thing I have found. It's really slow.  Updated the Samsung browser late last night and I get full gyroscope and my
sound is working. So I’ll use this browser for a bit.

On Thu, Mar 29, 2018 at 12:34 AM MD Sabbir Hossain <notifications@github.com>
wrote:

> I got the same issue on Samsung S6. When I move right to left or up and
> down, it moves slowly. I tested on every browser on Samsung S6. But same
> thing I have found. It's really slow.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3458#issuecomment-377136628>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AjuFdzDzX-0ON7JcGQCEvsZQS7Dc5jwyks5tjIBzgaJpZM4Sr03S>
> .
>
 I checked some aframe example on Samsung S6 even on Samsung S6 edge some times. But I have found same problem. It's moving very slow. 
I checked with these examples:
https://aframe.io/aframe/examples/performance/cubes/
https://aframe.io/aframe/examples/performance/entity-count/
https://aframe.io/aframe/examples/performance/animation/
https://aframe.io/aframe/examples/test/geometry-gallery/
And some other. What can I do for this lagging issue? I wonder why the Threejs examples still work on m65?
https://threejs.org/examples/webvr_cubes.html @sabbir420 w/r/t lagging issue: https://github.com/aframevr/aframe/issues/3458#issuecomment-375915490
@dirkk0 three.js examples use an origin trial, so using native WebVR most likely rather than the polyfill, which uses devicemotion/orientation which is the source of issues in Chrome m65 Any news about this? nothing to update on until m66 Can someone tell me if the problem has been solved? Thanks Nope, but hope is m66 is to be released very soon:
https://www.chromestatus.com/features/schedule
I can also confirm that it is fixed in Chrome Canary already. Looks like it's gotten worse with m66 - camera is now moving on it's own: https://drive.google.com/file/d/1CeFykDjUC9GkZxLFqRnhQiROQ_lO1qDl/view?usp=drivesdk are you sure you are on m66? I think so! https://drive.google.com/file/d/1bd_TmtKUqXrTnM79Ls1d4cF8jHC7SGRx/view?usp=drivesdk ok, I have m66 too, now. 
Switching through the example section of aframe.io, I can confirm that some examples work, while others look weird.
I think this is because some of the examples are not on the latest version.
@FeralRizvi what aframe version did you import? I'm on 0.8.0 @dirkk0  Works now!!! Thank you so much @dmarcos ! People my Chrome updated to 66 but the gyroscope bug continues, any solution? Thanks @dmarcos  Yes in the browser only it works, in the phonegap app no longer works. @dmarcos  I understand, but when I come back to the version of my Chrome it works. @dmarcos I understood, thanks, I'll wait for an update. Gyroscope doesn't work before to enter on VR Mode!
I have this issue on Samsung S8 ( Chrome 66.0.3359.158) with Aframe 0.8.2.

It works with Aframe 0.7.1  Gyroscope doesn't work in fullscreen and VR
Android 6 / Chrome 67 /aframe 0.8.2 Indeed, same here. Samsung S8, Android 8, Aframe 0.8.2, Chrome 67. No gyros in the non-vr mode, just the one axis touch movement. I am also experiencing a gyro problem on 2 phones except they are accessing the gyro but with either random input, or very very sensitive input. If i keep my hand still and don't move it is almost still but i can see the micromovements on screen with my hand's micro shaking. 

The Gyro works 100% fine with this link:

https://aframe.io/examples/showcase/sky/

but not the image gallery:
https://aframe.io/examples/showcase/360-image-gallery/

Honor 6x  | Android 7.0 EMUI 5.0.2 / Google Chrome 67.0.3396.87 / aframe 0.8.2
&
Samsung S8 |Google Chrome 67.0.3396.87 / aframe 0.8.2

Thanks! https://aframe.io/examples/showcase/sky/ is using 0.8.2
https://aframe.io/360-image-gallery-boilerplate/ is using Aframe 0.3.2

Older versions of aframe will not work on the latest versions of Chrome Gyro was finally working good with 0.8.2 and Chrome m66.
Now on Chrome m67 it is not working again (not shaking this time, but completely still I can just rotate on one axis swiping with my finger) is it expected? Same problem here: 0.8.2 and Chrome m67: camera not shaking, but no gyro active until entering VR-mode. ~~same issue with Chrome m68 using  0.8.2~~
fixed (update): I got issue with aframe-layout and no error with version 0.8.2 and m68 just the other library causing the issue.

update (issue): there is a slight movement to the left when I intend to focus or stand still (no movement). This slow movement keeping me as a user to notice that my view has been automatically rotating. Is there are quick fix to this issue?

thanks,  two bottom rows of the table were misplaced. Thank you so much :-)
  0 0 0 changed to 0 1.6 0 Thanks :)
  On this section of camera doc: https://aframe.io/docs/0.8.0/components/camera.html#default-camera
position is written as `position="0 0 0"`
I guess it should be `position="0 1.6 0"`
 I added a pull request. 
Hope i did it right, since it's my first time to commit like this :) Thanks @dmarcos Diego  **Description:**

When multiple entities utilize the `sound` component, and use the same audio asset source, only one instance of audio is created in `0.8.*`.

This does work as expected in `0.7.*` as long as an `<audio>` element is used rather than an `<a-asset-item>`.

In `0.8.*`, only the first entity of its kind in the code emits audio and `TypeError: Argument of AudioContext.decodeAudioData can't be a detached buffer - three.js:37939:18` is thrown.

As I expected, `poolSize` has no effect, I'm assuming due to the fact that this is across multiple instances of the `sound` component and not contained within one component.

- A-Frame Version: `0.8.0` and `0.8.1`
- Platform / Device: Chrome, Firefox, Edge on Windows 10 (all I've tested thus far)
- Reproducible Code Snippet or URL: https://codepen.io/dansinni/pen/yKOjem

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 looks like the three positional audio works normal
https://threejs.org/examples/#webaudio_sandbox

could it be this only happend if there are more than one  sounds?  @arpu Thanks for the reply. Yeah, it's not so much the positional audio that's not working; it's more specific to when you have multiple entities using the same audio asset, which is pretty common in my work, so this has been a blocking issue for me. It works well in `0.7.*`, just not in `0.8.0`. Hoping this is addressed soon so I can use `0.8.*` in production. we've resolved the issue on a local branch and will be getting a PR up in the next few hours. Rad. Thanks, @meatwallace. @dsinni - sorry, jumped the gun a little - we'll be opening a PR, but the issue is in Three.js, so not certain what that means for A-Frame exactly as it's using a fork. regardless, i'll post back as soon as I open the PR. Ah, bummer. Okay. Thanks, @meatwallace. Appreciate it. Hoping it can be resolved without too much hassle. It may not be a breaking issue, but it really is an important bug, IMO; I'm surprised more people haven't noticed/reported it (or maybe they have on `three.js`). @dsinni - the PR can be found [here](https://github.com/mrdoob/three.js/pull/13710). Not certain it'll be accepted, as it might be more of a workaround rather than a fix.

We fork A-Frame to hack in some fixes specific to our project's implementation, and have temporarily modified the `build/aframe-master.js` with those changes just to get up and running. Given that A-Frame uses a fork of three, this seemed like the best (temporary) approach for us as we don't want to fork of that too.

@ngokevin - is there any information/advice/direction you can offer here? thanks @dmarcos. there's actually an [existing issue](https://github.com/mrdoob/three.js/issues/10706) already tracking it. I don't think my fix will land, so hopefully someone with more knowledge of three can solve it. This issue is still blocking me from using `0.8.*` in production. 😢  @dsinni - fork A-Frame & edit the dist code directly to reflect the changes made in [this PR](https://github.com/mrdoob/three.js/pull/13710)

if you're importing it as a node module, be sure to update `dist/aframe-master.js`.

if you want 0.8.2, i'd branch from commit `#46b1362` to play it safe, as the commit log around the release looks a little messy.

for what it's worth, we're using commit `#d5bb456` (A-Frame 0.8.2 + Three.js R92) in production without any issues, but we're only targeting the Oculus Browser with the GearVR so I can't verify other platforms. 

additionally, it seems like my PR will be part of Three.js R93, but I don't know when that will be wrapped up into A-Frame. Thanks, @meatwallace. I appreciate the info and will look into what you suggested. I'd just really love to see this in an official release since I often use the CDN version for prototypes.

This is pretty much crucial to doing anything with reusable audio assets, which I think is a pretty big deal, even more so because it's on the Web. I cannot stress this enough.

Does the PR allow for more than two instances of a sound? Yessssssss! Thank you, @dmarcos! Going to check it out right now. Nope, still not working, @dmarcos  :(

I switched to the master in the demo and the issue persists: https://codepen.io/dansinni/pen/yKOjem

Only the rear, left entity is emitting the audio. If you don't hear _any_ audio, you may need to refresh cache (Ctrl + F5, etc.).

Man, was really excited, too. I'm not entirely sure which issue it is in THREE, but the ones I have seen still appear to be open. @meatwallace 's patch appears to be awaiting merge. :/

https://github.com/mrdoob/three.js/issues/10706
https://github.com/mrdoob/three.js/pull/13710
 I just wanted to say that I bit the bullet and employed the changes outlined by @meatwallace and I can confirm that they are working with no noticeable side effects as of yet. A credit to you, sir. Thank you. I'm just trying to be patient as I wait for this to be merged in THREE and A-Frame so we can all move on with our lives. :) looks like it's been pushed out to R94.

i'm pretty naive in this space so I may be incorrect, but I believe my fix introduces potentially non-trivial memory overhead if your app is loading a large audio asset in multiple places at the same time. it's a naive work around to the the loader 'race condition' described in [this issue](https://github.com/mrdoob/three.js/issues/10706), which really needs to be fixed by rearchitecting the entire loader, coming with it's own set of considerations and is well beyond my capacity right now.

@dsinni - it might be worth profiling your app's memory consumption when your reused assets are loaded to see if it's significant in your use case. Looks like this is working in `master` now after bumping three to `r94`, so that's promising! Looking forward to seeing in an official release.

@meatwallace, I hadn't noticed any crippling side effects. Honestly, I'd rather have the the ability to reuse the audio at the cost of performance than not have the option; it's just too important of a feature to not have it.

Thanks to everyone for getting this closer to resolved.

  **Description:**

This also handles Chrome changes in devicemotion in m65-m67. More information can be found in the [0.10.3](https://github.com/immersive-web/webvr-polyfill/releases/tag/v0.10.3) release notes of the issues, but as of now, this is necessary for A-Frame to work in current versions of Chrome.

I'd suggest checking out the [0.10.0](https://github.com/immersive-web/webvr-polyfill/releases/tag/v0.10.0) the release notes as well to confirm there hasn't been any feature changes that is necessary for A-Frame.

I believe this would fix https://github.com/aframevr/aframe/issues/3427

**Changes proposed:**

- Update webvr-polyfill from 0.9.40 to 0.10.3

**Tested**

Pixel
* Chrome Stable 65.0.3325.109 (with/without sensor)
* Chrome Beta 65.0.3325.144
* Chrome Canary 67.0.3370.0
* Firefox on Android 58.0.2
* Samsung Internet 6.4.10.5 (Chrome 56.0.2924.87)

iPhone 10.3.3
* Safari
* Chrome 65.0.3325.152
* Edge 41.11
* Firefox v10.6

iPhone X iOS 11.2.6
* Safari
* Chrome 65.0.3325.152  **Description:**

- A-Frame Version: 0.8.0
- Platform / Device: ALL
- Reproducible Code Snippet or URL:
`<a-camera id="main-camera" rotation="0 180 0" user-height="0"><a-entity cursor="rayOrigin: mouse"</a-entity></a-camera>`

I use camera rotation to start looking at a specific direction when starting my scene. 
I just updated to 0.8 and the rotation option is no longer available.

If this is by design, what is the correct way to handle initial camera rotation?

Thanks
 Worked like a charm! thank you.
Maybe we should put a note in the docs about this?  **Description:**

The `vrdisplayactivate` event can sometimes cause A-Frame to enter VR prematurely. This PR delays `setPoseTarget` until the camera is available.

This may be difficult to repro. It usually occurs in development scenarios, when you're refreshing an app frequently. I've been able to so relatively often with these steps:

1. `git checkout v0.8.0`
1. `npx serve` (use a simple web server instead of `npm start`)
1. visit http://localhost:5000/examples/showcase/anime-UI/
1. make sure your cache is fresh
1. do not leave dev tools open (it causes timing delays)
1. add the example to your bookmark bar
1. enter vr with the button
1. click the bookmark button until it fails

In the failure cases, after you click on the bookmark button, you'll notice that the example fails to enter VR with `vrdisplayactivate` and an error appears in the console `TypeError: this.camera is undefined`. As a side effect, when you click on the "enter vr" button after you've reached this state, the `poseTarget` is uninitialized and you start seeing culling issues.

In the success cases, after you click on the bookmark button, the app re-enters VR with `vrdisplayactivate`.


**Changes proposed:**
- If `vrdisplayactivate` fires before the camera is initialized, delay `setPoseTarget` until the camera is available. Viewing this from another perspective, it means that A-Frame occasionally fails to initialize in time to respond to a `vrdisplayactivate` event. This may be problematic for link transitions and general UX. 

In trying to fix this bug, I attempted to delay entering VR until the camera was ready, however that doesn't work since it breaks the "use gesture" origin if you use a promise or setTimeout/Interval to delay enterVR.

A better fix would be to ensure that the camera is ready as early as possible, but that might require a large-ish refactor. This PR aims to fix the immediate error case. @dmarcos did you commit what we were working on some time ago? (which at the time was mostly early vrdisplayactivate from Oculus Browser, IIRC) @ngokevin Enter VR can't wait because `requestPresent` needs to invoked in a stack that was initiated by a user gesture or by the `vrdisplayactivate` event (which typically happens if you were previously in VR and then refreshed the page or traversed to a new VR app). 
AFAIK, the only methods we have to wait for the camera (Promise, setTimeout, setInterval) will create a new stack that does not retain the original initiator. Ah, good point. It does look like setPoseTarget can be delayed. I'll try it out. You were right! Delaying `setPoseTarget` works. This way we get to enter VR and avoid the culling regression as well.  I've been sitting on this problem for a couple of hours now and can't put my finger on what exactly is going on under the hood to cause the issue but the symptoms are easy to reproduce:

https://codepen.io/PButcher/pen/PRZGRr

Move the mouse cursor down over the blue plane (which sits behind the red plane), on to the red plane, then move the cursor left across the face of the red plane until the raycaster is not intersecting with the blue plane, then move the cursor back to the right. The raycaster emits a `mouseleave` and `mouseenter` event on the red plane as well as a `mouseenter` and `raycaster-intersected` event on the blue plane even though it is not the closest intersection. Furthermore, when you move the cursor upwards over the blue again, the raycaster emits a `raycaster-intersected-cleared` event but not a `mouseleave` event on the red plane.

Here's a terrible GIF of one of my apps that I was upgrading to 0.8.0 from 0.7.x that alerted me to the bug: https://streamable.com/ntaum

I know a lot of work went into optimising the raycaster for 0.8.0, but it looks like some logic was removed that stops events being emitted on new intersections that are further along the ray while there are currently other foreground intersections.

Cheers!

- A-Frame Version: 0.8.0
- Platform / Device: First noticed on Win10, Rift, Firefox. Debugged on Mac with Chrome 64.
- Reproducible Code Snippet or URL: https://codepen.io/PButcher/pen/PRZGRr

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:** origin of the framework name

**Changes proposed:**
- short version of https://twitter.com/joshcarpenter/status/960555753588383749
  **Description:** Controllers activated via `vive-controls` component do not appear, but are otherwise fully functional. The models appear to be present, but fully transparent, as seen in the screenshot below where the transparency sorting issue causes them to make vive controller shaped holes in the torus knot behind them

- A-Frame Version: v0.8.0
- Platform / Device: Vive/FF
- Reproducible Code Snippet or URL: https://wmurphyrd.github.io/aframe-super-hands-component/examples/#events

![20180311211348_1](https://user-images.githubusercontent.com/10034859/37263227-1da7da18-2575-11e8-9ad5-25616722e706.jpg)

 Narrowed it down to the `obj-model` rather than the controller component

https://glitch.com/edit/#!/reflective-stone Also having this issue with some other `obj` files, but not all.  I also have issues with some obj files, namely those using mtl files. Are you seeing this error in the console?

``
THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.
aframe-v0.8.0.js:50683:5
THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.
``

Then it's probably related to the issue described here: https://github.com/aframevr/aframe/issues/3428 - although it's currently not clear to me what the fix  for obj models is. Hm this `.shadowMap.renderReverseSided` warning seems to have nothing to do with transparent objs after all. Still there without any objs. A general issue in A-Frame 0.8.0 it would seem. Seems be a pretty bad bug in Three.js recently introduced by this commit: https://github.com/mrdoob/three.js/commit/ad9093801bbb48c919b82e8514a175d8c26c537d#diff-5f35124cf2254142299033b1b52ef2b8L465

Now any obj model using a material file with `Tr` specified for a material, will get the reverse effect - in most cases a completely transparent or "invisible" material.

It's fairly easy to fix, but this has to happen in Three.js. See my comment here:
https://github.com/mrdoob/three.js/pull/12862#issuecomment-375260770 For anyone that need a quick work around while this is being fixed in Three.js and then rolled into A-Frame, you can add this to your `package.json`:

```
  "resolutions": {
    "three": "github:RSpace/three.js#fixMtlLoader"
  }
```

(This is forked off the Three.js repo and branch A-Frame is currently using, with a single change to fix the mtl loader bug) I think this issue and https://github.com/aframevr/aframe/issues/3488 are two very critical issues in the current version of A-Frame. This issue at least have a work around by forcefully upgrading Three.js version, but the other one breaks many VR experiences quite badly. Getting out an 0.8.3 with those two issues fixed would certainly by worth it in my opinion. Any news on when this Obj transparent issue will be fixed?

I was just wrapping up a project when this bug hit, and now it's sitting in limbo with a deadline approaching. @donmccurdy @dmarcos would you accept a PR to [cherry-pick the mtl loader fix](https://github.com/mrdoob/three.js/pull/13685/files) into the THREE fork you're using and then update A-Frame with that for 0.8.x? @dmarcos it works. Thank you! Can someone verify if cutout transparency works with this patch?

I have exported an obj and mtl file from blender and uploaded it into a-frame. 
But I am still getting either full transparency, or a white background where it should be transparent.

The error messages are now gone. But there doesn't seem to be a change to the models themselves now. After a long time research, and trial and error. I found a solution.

It involves using gltf exporter from Blender and the PBR (material node editor) in Blender with the Cycles Render.

The solution can be found here:

https://github.com/aframevr/aframe/issues/3234  Aframe 0.8.0 switched to using the webvr support provided by three's webglrenderer. The problem is that the renderer submits the frame as part of its render() operations so by the time the tock methods are called the frame is already submitted. This breaks post processing.

To facilitate this case, this PR was submitted in three https://github.com/mrdoob/three.js/pull/11582 . This PR utilizes this functionality to fix post proc Variable name changed, console.log fixed @dmarcos camera is now passed as a third argument to tock which does look much cleaner Fscked up rebase closing this to submit a clean PR  a-animation refers `evt.detail.state` in `onStateAdded` and `onStateRemoved`.
`addState` always sets a state value to `detail` of `emit` and it passed to onStateXXX as `evt.detail`.
So, the state is set to `evt.detail` and `evt.detail.state` is seemed always `undefined`.
This isn't an expected behavior, is it?

- A-Frame Version: master
 This topic was closed but the issue hasn't been fixed yet in master e3d8975.
a-animation still checks `evt.detail.state` which is `undefined`.
Would you like me to make a pull request?  **Description:**

I have a very simple scene with an `a-plane`. When I add an `a-camera`, the plane is not shown (or I cannot see it). The HTML page below (reproducible snippet), shows nothing, but shows a plane if the `a-camera` element is removed. Besides, it worked with 0.7.0.

- A-Frame Version: 0.8.0
- Platform / Device: Firefox 59.0b14 (64 bits) on Debian testing
- Reproducible Code Snippet or URL:

```
<html>
  <head>
    <script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="10" height="4" repeat="4 2" color="blue"></a-plane>
      <a-camera></a-camera>
    </a-scene>
  </body>
</html>
```

Jut in case it may help, this is what I see in the Firefox console:

```
Navigated to http://localhost:8000/bug.html
GET http://localhost:8000/bug.html
[HTTP/1.0 200 OK 2ms]
GET https://aframe.io/releases/0.8.0/aframe.min.js
[HTTP/2.0 200 OK 69ms]
A-Frame Version: 0.8.0 (Date 2018-03-09, Commit #c4f24250)
index.js:86 three Version: github:dmarcos/three.js#r90fixPose
index.js:87 WebVR Polyfill Version: ^0.9.40
index.js:88 THREE.WebGLRenderer 90
three.js:20901:2
THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.
three.js:45181:4
THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.
three.js:45194:4
THREE.WebGLShader: gl.getShaderInfoLog() vertex 0:2(12): warning: extension `GL_ARB_gpu_shader5' unsupported in vertex shader
 1: precision highp float;
2: precision highp int;
3: #define SHADER_NAME MeshStandardMaterial
4: #define STANDARD 
5: #define VERTEX_TEXTURES
6: #define GAMMA_FACTOR 2
7: #define MAX_BONES 0
8: #define BONE_TEXTURE
9: uniform mat4 modelMatrix;
10: uniform mat4 modelViewMatrix;
11: uniform mat4 projectionMatrix;
12: uniform mat4 viewMatrix;
13: uniform mat3 normalMatrix;
14: uniform vec3 cameraPosition;
15: attribute vec3 position;
16: attribute vec3 normal;
17: attribute vec2 uv;
18: #ifdef USE_COLOR
19: 	attribute vec3 color;
20: #endif
21: #ifdef USE_MORPHTARGETS
22: 	attribute vec3 morphTarget0;
23: 	attribute vec3 morphTarget1;
24: 	attribute vec3 morphTarget2;
25: 	attribute vec3 morphTarget3;
26: 	#ifdef USE_MORPHNORMALS
27: 		attribute vec3 morphNormal0;
28: 		attribute vec3 morphNormal1;
29: 		attribute vec3 morphNormal2;
30: 		attribute vec3 morphNormal3;
31: 	#else
32: 		attribute vec3 morphTarget4;
33: 		attribute vec3 morphTarget5;
34: 		attribute vec3 morphTarget6;
35: 		a…
three.js:16670:3
THREE.WebGLShader: gl.getShaderInfoLog() fragment 0:2(12): warning: extension `GL_ARB_gpu_shader5' unsupported in fragment shader
 1: precision highp float;
2: precision highp int;
3: #define SHADER_NAME MeshStandardMaterial
4: #define STANDARD 
5: #define GAMMA_FACTOR 2
6: uniform mat4 viewMatrix;
7: uniform vec3 cameraPosition;
8: #define TONE_MAPPING
9: #ifndef saturate
10: 	#define saturate(a) clamp( a, 0.0, 1.0 )
11: #endif
12: 
13: uniform float toneMappingExposure;
14: uniform float toneMappingWhitePoint;
15: 
16: // exposure only
17: vec3 LinearToneMapping( vec3 color ) {
18: 
19: 	return toneMappingExposure * color;
20: 
21: }
22: 
23: // source: https://www.cs.utah.edu/~reinhard/cdrom/
24: vec3 ReinhardToneMapping( vec3 color ) {
25: 
26: 	color *= toneMappingExposure;
27: 	return saturate( color / ( vec3( 1.0 ) + color ) );
28: 
29: }
30: 
31: // source: http://filmicgames.com/archives/75
32: #define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
33: vec3 Uncharted2ToneMappin…
three.js:16670:3
Unknown pseudo-class or pseudo-element ‘-webkit-full-screen’.  Ruleset ignored due to bad selector.
bug.html:1:121
Error in parsing value for ‘cursor’.  Declaration dropped.
bug.html:1:333
Error in parsing value for ‘cursor’.  Declaration dropped.
bug.html:1:433
The character encoding of the HTML document was not declared. The document will render with garbled text in some browser configurations if the document contains characters from outside the US-ASCII range. The character encoding of the page must be declared in the document or in the transfer protocol.
bug.html
Error: WebGL warning: Exceeded 16 live WebGL contexts for this principal, losing the least recently used one.
three.js:21076:21
THREE.WebGLShader: gl.getShaderInfoLog() vertex 0:2(12): warning: extension `GL_ARB_gpu_shader5' unsupported in vertex shader
 1: precision highp float;
2: precision highp int;
3: #define SHADER_NAME MeshStandardMaterial
4: #define STANDARD 
5: #define VERTEX_TEXTURES
6: #define GAMMA_FACTOR 2
7: #define MAX_BONES 0
8: #define BONE_TEXTURE
9: uniform mat4 modelMatrix;
10: uniform mat4 modelViewMatrix;
11: uniform mat4 projectionMatrix;
12: uniform mat4 viewMatrix;
13: uniform mat3 normalMatrix;
14: uniform vec3 cameraPosition;
15: attribute vec3 position;
16: attribute vec3 normal;
17: attribute vec2 uv;
18: #ifdef USE_COLOR
19: 	attribute vec3 color;
20: #endif
21: #ifdef USE_MORPHTARGETS
22: 	attribute vec3 morphTarget0;
23: 	attribute vec3 morphTarget1;
24: 	attribute vec3 morphTarget2;
25: 	attribute vec3 morphTarget3;
26: 	#ifdef USE_MORPHNORMALS
27: 		attribute vec3 morphNormal0;
28: 		attribute vec3 morphNormal1;
29: 		attribute vec3 morphNormal2;
30: 		attribute vec3 morphNormal3;
31: 	#else
32: 		attribute vec3 morphTarget4;
33: 		attribute vec3 morphTarget5;
34: 		attribute vec3 morphTarget6;
35: 		a…
three.js:16670:3
THREE.WebGLShader: gl.getShaderInfoLog() fragment 0:2(12): warning: extension `GL_ARB_gpu_shader5' unsupported in fragment shader
 1: precision highp float;
2: precision highp int;
3: #define SHADER_NAME MeshStandardMaterial
4: #define STANDARD 
5: #define GAMMA_FACTOR 2
6: uniform mat4 viewMatrix;
7: uniform vec3 cameraPosition;
8: #define TONE_MAPPING
9: #ifndef saturate
10: 	#define saturate(a) clamp( a, 0.0, 1.0 )
11: #endif
12: 
13: uniform float toneMappingExposure;
14: uniform float toneMappingWhitePoint;
15: 
16: // exposure only
17: vec3 LinearToneMapping( vec3 color ) {
18: 
19: 	return toneMappingExposure * color;
20: 
21: }
22: 
23: // source: https://www.cs.utah.edu/~reinhard/cdrom/
24: vec3 ReinhardToneMapping( vec3 color ) {
25: 
26: 	color *= toneMappingExposure;
27: 	return saturate( color / ( vec3( 1.0 ) + color ) );
28: 
29: }
30: 
31: // source: http://filmicgames.com/archives/75
32: #define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
33: vec3 Uncharted2ToneMappin…
three.js:16670:3
``` Of course, you're right. I'm sorry. I hadn't noticed that it is *always* perpendicular to the camera, so I cannot see it even if I use the cursors or the mouse. Thanks a lot, sorry for the noise.  **Description:**

The components defined in an a-primitive's defaultComponents are not immediately accessible via `el.getAttribute()`. They seem to be added on the next tick.

For example on `<a-box>`, the `position` component (which is always added to `<a-entity>`) is available immediately, but `material` and `geometry` are not.

My Glitch snippet shows an example of this. Open the console to see the output.

My output is the following in both Chrome and Firefox:
```
Object { x: 0, y: 0, z: 0 }
null
null
Object { primitive: "box", buffer: true, skipCache: false, depth: 1, height: 1, width: 1, segmentsHeight: 1, segmentsWidth: 1, segmentsDepth: 1 }
Object { alphaTest: 0, depthTest: true, depthWrite: true, flatShading: false, npot: false, offset: {…}, opacity: 1, repeat: {…}, shader: "standard", side: "front", … }
```

- A-Frame Version: 0.7.0 / 0.8.0
- Platform / Device: Mac/PC, Firefox/Chrome
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/tranquil-cod
  **Description:**

- A-Frame Version: 0.8.0

The `intersection` property in the event details for `raycaster` is not documented. From looking at the code, they appear to be the raw [three.js intersectObjects results](https://threejs.org/docs/index.html#api/core/Raycaster.intersectObject).  Without documentation it's impossible to know which fields are intended to be part of the supported API. About documentation of 0.8.0, it should be noted the intersection behavior has changed significantly in 0.8.0, the raycaster only emit the start of intersections, so if you previously used in 0.7.1 the event to show a ring on a plane like it's done in https://urish.github.io/web-ar-experiment/ you apparently need something like this https://github.com/aframevr/aframe/issues/3129#issuecomment-334779820 now. I didn't test this code yet. @ngokevin This probably should be referenced in the 0.8.0 changelog.  as discussed in #3423, 
use RegExp and update multi-prefix syntax; remove GearVR
(might be best to merge *after* the Oculus Browser fix is deployed next Tuesday) @digitec can you confirm whether the Oculus Browser fix has been deployed yet? From #gearvr slack channel today by 
```
DigiTec [3 h 51]
Update, Oculus Browser 4.3.1 is now rolling out and has fixed the GearVR -> Gear VR naming on the controllers. It’s at 10% and on the PTC (public test channel) and will ramp up to 100% between now and Thursday assuming no new issues are uncovered.

If you aren’t familiar with the PTC it is a channel you can get on to get Oculus software a bit earlier (usually a few days in advance) and test it and provide feedback before we launch to public.
``` built version is at https://rawgit.com/chenzlabs/aframe/fix-oculus-gearvr-controller-dist/dist/aframe-master.min.js for testing convenience too late @ngokevin -- see #3489  **Description:**

- A-Frame Version:
0.8.0

- Platform / Device:

Chrome and Firefox / mac

- Reproducible Code Snippet or URL:

```
<a-scene>
       <a-sky color="#030303"></a-sky>
</a-scene>
```

Sky is not rendered, white page instead. Works in 0.7.1

Console Warrnigs:
```
THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.
aframe-v0.8.0.js:50683:5
THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.
```

 quick fix `sky.object3DMap.mesh.material.side = THREE.BackSide` Same for my scenes as well.
Where would I apply that quick fix? Or is this something I should wait for in the next version? Why is this issue closed? Do you intend to fix the bug? Ok, cool. Thanks! `<a-sky>` is back :) Thanks.  Camera move slowly on S7, and only in vertical in S6

- A-Frame Version: 0.8
- Platform / Device: Samsung S6 & S7

[video] https://photos.app.goo.gl/t6f11QtyYpxDAODx1

 Also so OnePlus 3T

Chrome 65 (latest stable)
Version 0.8.0

Basic Example also same kind of slow camera https://aframe.io/examples/ This is due to a change in Chrome m65 which breaks the Polyfill. See here for more info:

https://github.com/immersive-web/webvr-polyfill/issues/307
https://bugs.chromium.org/p/chromium/issues/detail?id=819413
https://bugs.chromium.org/p/chromium/issues/detail?id=796518
https://bugs.chromium.org/p/chromium/issues/detail?id=805146

The fix was merged a day late to make the M65 stable release, and unfortunately the fix ends up causing further issues ([819413](https://bugs.chromium.org/p/chromium/issues/detail?id=819413)).  @dmarcos That's correct. It's a Chrome platform issue that was caused by an incomplete merge (796518 depends on 805146 but it wasn't originally planned for m65).  Also experiencing this on Oneplus 5. 
Vertical movement is extremely slow, horizontal barely works.

Chrome 65.
Android 8.0.0
A-frame version 0.8.0

Works fine on iPhone. Happens, after the Chrome update yesterday, on the Nexus 5X too. 
Yay. \o/

Chrome 65
Android 8.1.0
Aframe Version 0.8.0 Some more info on a separate but similar (and much more impactful) issue in Chrome M66: 

They are changing the rotationRate units in the deviceMotion API from radians -> degrees to be in line with the actual spec. This is a good thing in the long term, but unfortunately, this is going break all existing Polyfilled sites on Chrome (including all A-Frame sites using a locally hosted library). It's already been addressed in the dev version of the Polyfill, which should find it's way into A-Frame soon, but it's going to be a bit of a mess once M66 goes stable. Here are the tickets where this change is currently being tracked:

Chromium - https://bugs.chromium.org/p/chromium/issues/detail?id=541607
Polyfill / cardboard-vr-display - https://github.com/immersive-web/cardboard-vr-display/issues/18

There's a tiny bit of hope that they decide to tweak how they implement this change (there's a suggestion about changing the spec so that it provides a "units" parameter) but most likely all Polyfill dependent sites will need to upgrade to support Chrome M66+.  With iOS 9.2 WebKit now blocks deviceorientation and devicemotion event access from cross-origin iframes. [bug link](https://bugs.webkit.org/show_bug.cgi?id=152299)

- A-Frame Version: latest
- Platform / Device: Ios webkit >= 9.2

as a dirty solution I was thinking about using the iframe postMessage to send devicemotions to the child iframe
something like this:

Father page 
```javascript
if (window.DeviceMotionEvent) {

        /* Add a listener for the devicemotion event */
        window.ondevicemotion = function (deviceMotionEvent) {

            /* Get acceleration on x, y and z axis */
            var x = deviceMotionEvent.accelerationIncludingGravity.x;
            var y = deviceMotionEvent.accelerationIncludingGravity.y;
            var z = deviceMotionEvent.accelerationIncludingGravity.z;
            
             var coordinates = deviceMotionEvent.accelerationIncludingGravity;
            console.log(coordinates)
            /* Get the interval (ms) at which data is obtained from the underlying hardware */
            
            //send the accleration coordinates from parent to child iframe 
            //"*" used to avoid cors protection
            jQuery("#myChildIframe")[0].contentWindow.postMessage(coordinates, '*');
}
```

Children iframe 
```javascript
window.onload = function () {
    window
        .addEventListener('message', function (e) {
           //e.data are the accelerometer from father
           //now how to pass the devicemotions coordinates to aframe??
           
        })
}
```
but how to send the father devicemotion coordinates to the child iframe aframe?




 You could try something like the following and see if it works for you.
```
...

.addEventListener('message', function (e) {
    var event = document.createEvent('Event');
    event.initEvent('ondevicemotion', true, true);

    event.accelerationIncludingGravity = e.data;

    window.dispatchEvent(event);
});

...
```  For example three.js Box Geometry Constructor has some additional arguments to control the number of vertices which comes in handy when using displacement maps. It would be great if the geometry component could reflect the overall constructor options from three.js
 I'm aware that i can register my own custom components. Creating primitives this way is no problem so far. 

We are working on a collaborative online editor/viewer based on aframe and meteor. The user needs to be able to changes various settings of the primitives on the fly. If we need to drop the current mesh and create a new one, the material drops too. I didn't found any hint in the docs how update custom geometries correctly. Ok thanks this is eventually working

````
AFRAME.registerComponent('box-custom',
{
    schema:
    {
        width: {default: 1},
        height: {default: 1},
        depth: {default: 1},
        widthSegments: {default: 1},
        heightSegments: {default: 1},
        depthSegments: {default: 1},
    },
    init ()
    {
        this.createOrUpdateGeometry = (data, el) =>
        {
            const geometry = new THREE.BoxBufferGeometry(data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments)
            var mesh = el.getObject3D('mesh')

            if (mesh)
            {
                mesh.geometry = geometry
            }
            else
            {
                mesh = new THREE.Mesh()
                mesh.geometry = geometry
                el.setObject3D('mesh', mesh)
            }
        }

        this.createOrUpdateGeometry(this.data, this.el)
    },
    update ()
    {
        this.createOrUpdateGeometry(this.data, this.el)
    }
})
```` I just saw it was just missing in the docs (geometry.md) see #3426.  Adding an envMap to a gLTF in aframe is currently counterintuitive and involved, which is a blow to PBR workflows. Currently, one can't use the material component to overwrite attributes of materials imported from gLTF, or .obj with .mtl files.

I've been teaching with a-frame a lot, and this is becoming a common point of confusion with my students (they wonder why their low-roughness materials don't reflect anything, then learn about envMaps and try to add one by setting the attribute with materials, and are confused why it doesn't work)

Some ways this could be approached, not mutually exclusive: 

**1) Allow gLTF & obj+mtl material overwrites from the material component** 
This seems most intuitive to me, is what I tried the first time, and is what some of my students have told me they tried. One would just selectively overwrite attributes (like envMap) using the material component. Curious to understand why this currently isn't allowed. Many circumstances where one might want to overwrite attributes of a material on a gLTF. I can see how it is unintuitive when a gltf gets used to store a whole scene.. but for envMap, a very common use is to apply the same envMap to all scene objects

**2) Ship a-frame with an env-map component (w/sphericalEnvMap support) and have the material component continue to ignore attribute changes on gltf & obj+mtl** 
This makes sense in some ways — the logic being that any attributes not imported via gLTF files can can then be set via aframe components. Is maybe premature [given talk of this possible extension](https://github.com/KhronosGroup/glTF/issues/946). 

**3) Leave as is. Expect users to write a component, traverse the three object graph, and modify materials, and/or let community components fill the need and hope users know (where) to look**  

[gLTF-part](https://github.com/ngokevin/kframe/tree/master/components/gltf-part/) is one partial answer, but this is still trouble when: 
a) using a .glb where it is harder to know the (sometimes auto-generated) keynames that correspond to gltf pieces
b) a gltf contains a single highpoly object that is broken into tons of sub meshes (Unbound's export currently does this.. tho likely something of an edge case).

The problem is solved for me: I've made a simple component that can be attached to gLTFs to inject envMaps and spericalEnvMaps, and I'm thinking about making it work with all entities (to be attached to a scene and propagate to all models that have materials, for example)... I'll publish this shortly, but I wanted to bring it into discussion more broadly as I've seen several newcomers bump into it with the core library. 

ps: <3 <3 <3 a-frame, one of the most important projects going right now Another option would be to build this into a-sky or an a-skybox entity. With an option to source external envmap images, or dynamically make a cubemap screenshot of the scene itself at the start of the sketch. Just thinking out loud here, curious what others think ! Yeah I agree on this. Would be nice if A-Frame had built in functionality for directly setting any material's envMap. Perhaps even better would be a global scene setting that traverses all models and sets it?

For GLTF I actually had to create another GLTF component to support it. An example below (probably rough as I am still wrapping my head around writing components - OT but would be nice if there was a "component extension model" :)

```javascript
"use strict";

//!!TODO : figure out warning about "Timer GLTf exist / doesn't exist"
AFRAME.registerComponent('mdmu-gltf', {
    //dependencies: [''],
    schema: {
        // ... Define schema to pass properties from DOM to this component
        src:    {type: "selector",  default:null},
        envMap: {type: "selector",  default:null},
        color:  {type: "string",    default:"rgb(255,255,255)"}
    },
    multiple: false, //do not allow multiple instances of this component on this entity
    init: function() 
    {},
    update: function(oldData)  
    {
        let OContext    = this;
        let data        = OContext.data;
        let el          = OContext.el;
        OContext.loaded     = false;

        if (Object.keys(data).length === 0) { return; } // No need to update. as nothing here yet

        //reusable functions ...
        let changeColor = (color_rgb) => {
            MDMU.debugLog("COLOR change in mdmu-gltf " + color_rgb);

            let object  = el.getObject3D('mesh');

            if ( object !== undefined ) {
                let color   = color_rgb;

                object.traverse( function ( node ) {
                    if ( node.isMesh ) { 
                        if (node.material) {
                            node.material.color = new THREE.Color(color);
                            node.material.needsUpdate = true;
                        }
                    }
                });
            }
            else {
                console.log("Entity 3Dmesh doesn't exist yet");
            }
        };

        let changeEnvMap = (envMap_url) => {
            MDMU.debugLog("New envMap");

            let object  = el.getObject3D('mesh');

            if ( object !== undefined ) {
                let textureLoader           = new THREE.TextureLoader();
                let textureEquirec          = textureLoader.load( envMap_url );
                textureEquirec.mapping      = THREE.EquirectangularReflectionMapping;
                textureEquirec.magFilter    = THREE.LinearFilter;
                textureEquirec.minFilter    = THREE.LinearMipMapLinearFilter;
                
                object.traverse( function ( node ) {
                    if ( node.isMesh ) { 
                        if (node.material) {
                            node.material.envMap = textureEquirec;
                            node.material.needsUpdate = true;
                        }
                    }
                });
            }
            else {
                console.log("Entity 3Dmesh doesn't exist yet");
            }
        };

        //model change
        if ( (oldData.src !== data.src) && data.src !== null ) {

            MDMU.debugLog("New Model");

            let loader  = new THREE.GLTFLoader();
            // let src     = data.src;
            // let envMap  = data.envMap; 
            // let color   = data.color;

            loader.load( 
                data.src.getAttribute('src'), 
                function(gltf) {
                    let object                  = gltf.scene;
                    let textureLoader           = null;
                    let textureEquirec          = null;
                    if ( data.envMap !== null ) {
                        textureLoader               = new THREE.TextureLoader();
                        textureEquirec              = textureLoader.load( data.envMap.getAttribute('src') );
                        textureEquirec.mapping      = THREE.EquirectangularReflectionMapping;
                        textureEquirec.magFilter    = THREE.LinearFilter;
                        textureEquirec.minFilter    = THREE.LinearMipMapLinearFilter;
                    }
                    
                    object.traverse( function ( node ) {
                        if ( node.isMesh ) { 
                            if (node.material) {
                                node.material.color = new THREE.Color(data.color);
                                if ( data.envMap !== null ) {
                                    node.material.envMap = textureEquirec;
                                }
                                node.material.needsUpdate = true;
                            }
                        }
                    });

                    el.setObject3D('mesh', object);
                    OContext.loaded = true;
                },
                // called when loading is in progresses
                function ( xhr ) {
                    //console.log( ( xhr.loaded / xhr.total * 100 ) + '% loaded' );
                },
                // called when loading has errors
                function ( error ) {
                    console.log( error.message );
                });
        }  
        
        //envMap change
        if ((oldData.envMap !== data.envMap) && (data.envMap !== null)) {
            if (OContext.loaded === true) {
                changeEnvMap(data.envMap.getAttribute('src'));
            }
            else {
                //not loaded try later
                let loaderCheckFunc_EnvMap = setInterval( () => {
                    if (OContext.loaded === true) {
                        //now load
                        changeEnvMap(data.envMap.getAttribute('src'));
                        clearInterval(loaderCheckFunc_EnvMap);
                        loaderCheckFunc_EnvMap = null;
                    }
                }, 1000);
            }
        }

        //color change
        if (oldData.color !== data.color) {
            if (OContext.loaded === true) {
                changeColor( data.color );
            }
            else {
                //not loaded yet - try later
                let loaderCheckFunc_color = setInterval( () => {
                    if (OContext.loaded === true) {
                        //now load
                        changeColor( data.color );
                        clearInterval(loaderCheckFunc_color);
                        loaderCheckFunc_color = null;
                    }
                }, 1000);
            }
        }
    },
    // tick: function(time, timeDelta) {},
    // tock: function(time, timeDelta) {},
    remove: function() {
        this.el.removeObject3D('mesh');
    },
    // pause: function() {},
    // play: function() {},
    // updateScheme: function(data) {}
});
``` Thanks @donmccurdy. Is this the preferred pathway for extending functionality of any component in A-Frame? (via events and adding more components?) Ah I see. This is some great info. to chew on. Thanks again.  I have created a 3d animated model, which I managed to run in threejs
```
 var loader = new THREE.FBXLoader();
        loader.load( 'model.fbx', function ( object ) {

            object.mixer = new THREE.AnimationMixer( object );
            mixers.push( object.mixer );
           console.log(object.animations.length);
            var action = object.mixer.clipAction( object.animations[ 0 ] );
            action.play();

            object.traverse( function ( child ) {

                if ( child.isMesh ) {

                    child.castShadow = true;
                    child.receiveShadow = true;

                }

            } );

            scene.add( object );

        } );
```
It works perfectly on threejs, but how can I use it in aframe, I am trying to create AR app.
I am not getting enough documentation, in AFrame I can display obj model on marker but aframe-extras doesn't seem to work, but Threejs FBX loader works fine. I need help display Threejs object or scene on a-scene or a-entity
 https://stackoverflow.com/questions/49136441/how-can-i-load-a-3d-model-in-aframejs-it-currently-works-fine-in-threejs
I have asked here, hope someone can help here too  **Description:** lot of people get confused on why the camera "doesn't move" once they add it to be able to add the reticle

**Changes proposed:**
- Added look-controls to avoid that.  @dmarcos Looks like the builds aren't updated on the branch that aframe/master is currently pointing to: 
https://github.com/dmarcos/three.js/tree/r90vrfix/build Looks like this is resolved now?   Calling `document.querySelector('a-scene').enterVR()` from within `setTimeout` does not work on Chrome for Android . Throws:

```
webvr-polyfill.js:6442 Uncaught (in promise) DOMException: The play() request was interrupted by a call to pause(). https://goo.gl/LdLk22
M.release @ webvr-polyfill.js:6442
A @ webvr-polyfill.js:1308

a-scene.js:178 Uncaught (in promise) Error: Failed to enter VR mode (`requestPresent`): Unable to present.
    at i (a-scene.js:178)
    at <anonymous>
```

and aframe does not enter in VR mode.

Actual code:

```
setTimeout(function(){
    document.querySelector('a-scene').enterVR();
}, 2000);
```

Although, if I type `document.querySelector('a-scene').enterVR();` from console, it works as expected.  

On Chrome (version 64.0.3282.186) for Linux (Elementary OS 0.4.1 based on Ubuntu 16.04): If I try this from `setTimeout`, aframe does enter in VR mode but not in fullscreen, from console without `setTimeout` it works as expected

- A-Frame Version: 0.7.0
- Platform / Device: Chrome on Android and Linux version 64.0.3282.137
- Reproducible Code Snippet or URL: https://codepen.io/JFarrow/full/pNmdXa/ (same issue happens on any web page)

If you need any more information pardon me and please ask.  
Thanks, a lot for this library. Hi,  
Is it possible to delay entering vr moding after user clicks on enter-vr button?  
Thanks...  A-frame examples do not render in Chrome, because the examples are loaded through an iframe. Chrome does not allow child frames to receive focus for retrieving device information through the WebVR APIs. However, you can explicitly give focus to a child frame (ie. iframe.focus()) to get focus and start rendering the scene. 

The Chrome team discusses their reasoning here (https://bugs.chromium.org/p/chromium/issues/detail?id=817454). 

- A-Frame Version: All
- Platform / Device: Chrome Canary, 66.0.3356.0, Chrome Beta 65.0.3325.85, Chrome 64.0.3282.137 / Samsung S8
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/
 This may be solved by using the message passing mentioned in the [CardboardVRDisplay docs](https://github.com/immersive-web/cardboard-vr-display#iframes) I just want to let you know Chrome won't fix this. And with the webvr flag enabled in Chrome, the scene renders, but the magic window feature does not work. Are there any plans on this issue?

@jsantell The allowvr attribute is present, but doesn't fix this issue, because the chromium engine specifically disallows iframes to render VR without focus.  I'm afraid that with all the latest optimizations to improve performance we could end up losing consistency if things don't work as expected depending on the type of component (eg: As for pos/rot/sca https://github.com/aframevr/aframe-inspector/issues/534).
I honestly would prefer consistency over performance, as you will always have the option to go deep and use the object3D anyway.
Not sure if it could be even needed something similar to `debug=true` to ensure that the `setAttribute/getAttribute` works as you could expect even if you will lose some performance.
 @dmarcos @ngokevin I believe with this change everything should be fine now. Although I'm not sure about how the getAttribute works, I would expect that If I'm modifying the value accessing directly to the `object3D` that won't get me the expected value, but if I'm setting attributes using `setAttribute` it will always return the same value when I'll call `getAttribute` is that correct?
I totally understand that performance is a top priority here but I was afraid to have edge cases because of the performance optimizations that didn't work as you could expect or as they used to work before these optimizations. I believe we must ensure that the whole api regarding `set/get Attributes` is consistent but expose optimizations to the user knowing that they could lead to inconsistent results if you don't know what you're doing.
  **Description:**
#3327 changed the way we calculate tracked controller pose:
- As a side effect, the code no longer updated the individual `position` and `quaternion` properties of the controller object. This prevents users and libraries (like `networked-aframe`) from reading those properties.
- It also removed use of `tracked-control`'s `rotationOffset` property, this lead to `hand-controls` with incorrectly rotated hand models when using the Oculus Rift and Touch, as evident in the tracked-controls example.
- Lastly, it regressed standing matrix application for 3DoF controls -- i.e. standing matrix should only be applied for 6DoF controls, since the controller position is controlled by the arm model, which bases it off the head position.

**Changes proposed:**
- Decompose the tracked object's matrix in to its individual components
- Reintroduce use of the `rotationOffset` property.
- Only apply the standing matrix if the controller is 6DoF
- Add tests to cover these changes.
  **Description:**

I am having problems developing collision systems between a sphere and plane. I have tried many different work arroumds, including generating a hitbox from points and dimensions without any luck.

There seems to be no docs on collision either.

If someone could give me a hand, that would be much appriciated.

- A-Frame Version: 0.7.0
- Platform / Device: Windows 10 x64


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**
I am running the following snippet in a while loop:
`alert(document.getElementById('camera').getAttribute('rotation'));`

This is camera:
`<a-camera id="camera" position="0 0 0" rotation="0 0 0">
    <a-entity id="marker" position="0 15 0"></a-entity>
    <a-plane src="images/cursor.png"  position="0 0 -4" rotation="0 0 0" width="4" height="4"  material="opacity: 1.0; transparent: true"></a-plane>
</a-camera>`

The first time through, it creates the alert box "0 0 0" as it should (the default camera rotation).
Then it will start returning "[object Object]"

I seem to be the only person on the internet to have this problem. I made this conclusion after many hours of tinkering, and searching the web.

- A-Frame Version: 0.7.0
- Platform / Device: Windows 10 x64bit 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

On the following example: https://glitch.com/edit/#!/inconclusive-thrill I'm updating the line between to spheres:
```
line.setAttribute('line', {start: posL, end: posR});
``` 
It doesn't work as expected, but If I add `debug: true` to the scene, it works.

I guess it's something related to the latest changes to optimize the set/getAttribute?
 It works if I do:
```
    line.setAttribute('line', {start: posL.clone(), end: posR.clone()});
```  Faces, vertices, and draw calls remain the same even when the object can no longer be seen

- A-Frame Version: 0.7.1
- Platform / Device: Google Chrome Desktop
- Reproducible Code Snippet or URL:
https://canyon-lentil.glitch.me/ (0.7.0 – works as expected)
https://canyon-lentil.glitch.me/alt.html (0.7.1 – faces, vertices, and draw calls stay constant)
 Fixed now, thanks!  As mentioned in Slack...
```
mchen [5:53 PM]
I can't recall where exactly, but I think that current master has an issue where the camera position in VR is not getting the correct height value (missing the standing matrix offset?) when you read back its position via getAttribute('position') or .object3D.position?

dmarcos [5:55 PM]
@mchen those issues should be gone

mchen [6:02 PM]
https://codepen.io/machenmusik/pen/oEQbab
1. run Firefox and go to that codepen
2. enter VR and put on your Rift
3. look for the Y label, look down, and notice it's negative

dmarcos [6:03 PM]
It is the rendered height wrong?

mchen [6:03 PM]
the text should be headlocked, as a child of entity with active camera.
both the head sphere and the headlocked text are displayed below where they should be, which is why I had to look down
(the headsphere should be rendered where the HMD is, but since you're inside it, you may only see the nose cone)
the value appears to be off by roughly 1.6 :confused:
https://github.com/aframevr/aframe/pull/3327#issuecomment-360019236
The HMD height assertion in (1) is not correct, as demonstrated by this example.

mchen [6:25 PM]
this version shows controllers, for reference... https://codepen.io/machenmusik/pen/QQJyXV
```
- A-Frame Version: latest master
- Platform / Device: Windows 10 / Oculus Rift
- Reproducible Code Snippet or URL: https://codepen.io/machenmusik/pen/QQJyXV
 from https://github.com/aframevr/aframe/pull/3327#issuecomment-360019236
```The "floor" is essentially at y=100, so if my height is 1.51 meters in a 6DOF device the #cameraRig position will be left alone, but the #head position will change to 0 1.51 0, for a cumulative world position of 25 101.51 25.```

What actually seems to be happening is that regardless of camera entity's position originally,
(1) the value gets overridden according to HMD (good)
(2) the Y value is negative, and appears to be off by roughly 1.6, so if I am sitting down and my HMD is about a meter off the floor, the Y position reads back (incorrectly) as between -0.5 and -0.6 -- per our discussion on that prior PR, I expect the Y position to read back as about 1   The hud text is positioned correctly with respect to the headsphere (good),
but the headsphere is in the floor (bad) The headlocked hud text is not locked correctly to the camera, although it is a child of the element containing the camera component.
The headlocked hud text is positioned correctly relative to its headsphere sibling, but both of them are positioned well below the camera, as described earlier.

The scene does appear to be rendered with the camera at the correct height, and the controllers seem correct as well... but the entity with the camera component seems to be getting the wrong Y position value.

For convenience, the scene:
```
<a-scene>
  <a-sky color="#3cf"></a-sky>
  <a-entity id="player">
    
    <a-entity id="hmd" camera position="0 1.6 0">
      <a-text id="hud" position="0 -0.15 -0.25" wrap-count="80" align="center" value="Hi"></a-text> 
      <a-sphere opacity="0.5" scale="0.1 0.125 0.075">
         <a-cone opacity="0.5" color="magenta" position="0 -0.25 -1.05" scale="0.03 0.3 0.04" rotation="-90 0 0"></a-cone>
      </a-sphere>      
    </a-entity>

    <a-entity id="left-hand" laser-controls="hand:left">
     <a-text rotation="-90 0 0" wrap-count="80" align="center" value="L"></a-text> 
      <a-sphere opacity="0.5" scale="0.025 0.02 0.1">
        <a-cone opacity="0.5" color="red" position="0 -0.25 -1" scale="0.5 2 0.5" rotation="-90 0 0"></a-cone>
      </a-sphere>
    </a-entity>
    
    <a-entity id="right-hand" laser-controls="hand:right">
     <a-text rotation="-90 0 0" wrap-count="80" align="center" value="R"></a-text> 
      <a-sphere opacity="0.5" scale="0.025 0.02 0.1">
        <a-cone opacity="0.5" color="blue" position="0 -0.25 -1" scale="0.5 2 0.5" rotation="-90 0 0"></a-cone>
      </a-sphere>
    </a-entity>
    
  </a-entity>
</a-scene>
``` Let me know if these expectations are incorrect:
1 - the player rig position essentially defines the floor
2 - its child entity with camera component should receive the HMD's position, including standing offset from the floor (so if I told Oculus I am 1.5 meters, and the HMD Y position is currently reading 0.5 meters below that point, the child entity should have .getAttribute('position').y = .object3D.position.y = 1
3 - its child entities with controller components should receive the controller's positions, including standing offset from the floor
4- so the relative Y position of controllers and HMD should thus be correct.

At the moment, 1 and 3 are true, but 2 is not, so 4 is not. the strange thing is, the camera *rendering* appears to be done from the correct Y position, but the entities that are supposed to be placed at the position of that entity with the camera are instead being placed in the floor.  Which is why you find yourself looking down at the headsphere rendered beneath the camera vantage point. Working with master last week, I observed an issue which appears to be the same.  Specifically, on desktop (FF &Chrome under OS X) the camera position is correct, but in VR mode in Gear Vr (Oculus & Samsung) the camera appears slightly more than 1.5 m above where it should.

Runnable demo using A-Frame master at http://elfland-glider.surge.sh/arches/index.html

Source code using a "stable" version of A-Frame between 0.7 and 0.8: https://github.com/DougReeder/elfland-glider

There's an attitude indicator which should appear as triangle 1.5m above the user's head, outlined in black. On desktop and Android FF, it appears correctly. In this screenshot taken in VR mode in Gear VR Oculus, you can see the outline (or at least half of it) below the camera: https://hominidsoftware.com/non-public/bug-GearVR.jpg

(There's also a square of random color that appears where the avatar's waist should be.) and stranger yet, today it is working as expected (camera and headsphere are always locked so you see the nose cone properly, headlocked text appears properly) ok, now I am seeing a weirder state - camera Y position shows as correct, and controllers are displayed at the right height, but the controller y positions are in the floor
https://gainful-pirate.glitch.me/ I modified the codepen to show HMD and controller Y positions, and I see the weirder state I was just describing... #3407 may fix this? Yup, I believe #3407 should fix the controller y position. As of Mar 2, I'm still observing this issue in my code.

It should look like https://hominidsoftware.com/non-public/correct.png
Instead it looks like https://hominidsoftware.com/non-public/bug-GearVR.jpg


For the AnimeUI example, initially in flat mode the camera is at the centerline:
![animeui-normal](https://user-images.githubusercontent.com/378430/36931925-550db2e0-1e8e-11e8-84c1-cf63e8537a11.jpg)

When I go to VR mode the camera is above the centerline:
![animeui-bug-vrmode](https://user-images.githubusercontent.com/378430/36931932-889f2c9c-1e8e-11e8-94fb-74f576cecc04.jpg)

When I return to flat mode, the camera is still above the centerline:
![animeui-bug-flatmode](https://user-images.githubusercontent.com/378430/36931935-9c446ae6-1e8e-11e8-8b37-4db24b04069c.jpg)

 Happens for me with the latest (March 23 right) master dist, but only on mobile. Firefox on Mac and Windows and with the Vive appear all fine, but on Android the (non-headlocked) UI objects are suddenly way down when entering VR-mode. Can work-around by increasing the distance between the objects and the camera, but this does of course mess with the sense of depth (and ideally would have consistent results across all platforms). enterVR()
![image](https://user-images.githubusercontent.com/16566338/41011329-c43eafec-6912-11e8-9b6f-56f741bf6b43.png)
The Y axis is negative :(

exitVR()
![image](https://user-images.githubusercontent.com/16566338/41011346-d72a9562-6912-11e8-90c4-d37b8504edb2.png)

How to fix this? @donmccurdy HTC vive and aframe 0.8.2  If a intersection has already been processed in clearCurrentIntersection, it isn't necessary to process it any more.
 Yeah, I agree that making `setIntersection` and `clearCurrentIntersection` checking these inside of them. It makes sense from point of view of capsuling roles, I guess.  **Description:**

Seems that https://aframe.io/docs/master left menu does not contain links to individual component docs

- A-Frame Version: master
- Platform / Device:  Firefox DE
- Reproducible Code Snippet or URL: https://aframe.io/docs/master 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 actually `0.7.0` is fine `master` is a issue Now the `0.8.0` docs are broken. @ngokevin what is the state of this issue? redeploy failed as I see.  **Description:**
看了几天aframe 文档，想请教两个问题：
1.aframe如何创建一个自定义实体，例如一个工件，或者一个建筑之类的，只能通过maya、Blender之类的导出3d模型再导入到aframe吗，可以用aframe直接编码得到吗
2.aframe的点击事件只能是<a-camera>配合<a-cursor>模拟点击事件吗，如何通过获取实体dom，直接绑定事件
谢谢！
- A-Frame Version: 0.7.0
- Platform / Device: windows7
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 a simple translate:
1. How do aframe create a custom thing like a building or something, I can only render a 3d model to aframe from maya or Blender. Can I just use aframe code to get a model directly?
2. Is aframe's click event only match a simulate click event? How do I use aframe to get a physical dom, to combine with event? Thanks!  I added the laser component to my right hand and it points about 45deg to the left of where it should.

[A-frame Laser pointing 45deg to the left](https://i.stack.imgur.com/R5PVh.jpg)

In this image I am pointing at the blue box above the tower using an Oculus Touch controller. As you can see the hand is pointing correctly and feels like it matches my real life hand position quite well but the laser is going about 45deg to the left.

If I rebuild the functionality of the laser component using a raycaster and a cursor component it works fine so I believe it to be a bug with the laser component itself.

- A-Frame Version: 0.7.1
- Platform / Device: Firefox Quantum 58.0.2 (64-bit) / Oculus Rift
- Reproducible Code Snippet or URL:  `<a-entity id="pointerHand" hand-controls="right" laser-controls></a-entity>`

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Tried manually setting the raycast direction like this and it had no effect (tried a few different vectors, nothing changed):
`<a-entity id="pointerHand" hand-controls="right" laser-controls raycaster="direction: 0 0 0"></a-entity>`

I also tried the laser-control on it's own which fixes this issue (the laser points in the correct direction in relation to the controller model) but the Oculus controller models rotation doesnt match it's position in reality making you feel like you're waving around a broken wrist which you have to contort to select things.  I believe thats been well documented by other here in this issue: https://github.com/aframevr/aframe/issues/2965

I've managed to recreate the functionality I need by combining hand-controls, curors and raycaster together although I only get mouseenter/mouseleave on this pointer but I can work around that.

  There doesn't appear to be any documentation for the `pivot` component. I actually just stumbled upon it today while inspecting the examples more closely. I thought maybe it was a custom component since I didn't recall ever seeing it in the docs, but nope. Seems to be a native component.
 @dmarcos: Ah, okay. My mistake then. Thanks. @dmarcos is there an alternative that should be used, or are there no out-of-the-box solutions for rotating an object around a point other than its own center?  **Description:**
Addresses issue: https://github.com/aframevr/aframe/issues/3351 
This allows wasd-controls to be placed in a parent entity around camera and motion controllers and have the motion controllers move with the player

```
<a-entity id="player" wasd-controls="">
	<a-camera wasd-controls-enabled="false"></a-camera>
	<a-entity id="leftHand" teleport-controls="cameraRig: #player" laser-controls="hand: left" raycaster="far:100; objects:.button"></a-entity>
	<a-entity id="rightHand" teleport-controls="cameraRig: #player" laser-controls="hand: right" raycaster="far:100; objects:.button"></a-entity>
</a-entity>
```

**Changes proposed:**
Adds logic to use an independent element for orientation when calculating movement vector. 
cameraRig can be specified explicitly. Falling back from that the control will search child elements for a camera element to use. Falling back from there, the existing behavior is used

 I am still working on my git kung fu, but I think I got the package-lock.json pulled out of the pull request now.  Does the pull request look kosher now?  Just want to make sure you aren't waiting for me to fix anything. Damn. Where can I see the comments? I don't see them in this thread.  I must be blind, but I dont see anything over there except the file changes. You can tell whether you need to do (3) once and trivially, right?  
So it would know when using world rotation was needed? thanks @donmccurdy -- if you think it will be too slow beyond direct descendant, then +1 from me for warnings or errors when the assumption is violated - but please not every frame :-) What if we use object3D's worldToLocal and localToWorld functions (which do not force updates to the matrices) to transform the velocity vector between coordinate spaces? This should allow the orientationEl to be at any position in the scene graph without any penalty for recursing the graph.  **Description:**
while fill = backwards in a-animation, material.color fails to render properly,
throwing THREE.Color: Unknown color #NaNNaNNaN error

- A-Frame Version: 0.7.0
- Platform / Device: fedora 27, firefox 58, x86_64
- Reproducible Code Snippet or URL:
http://www.dredwerkz.cz/aframe/burstbubbles.html

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  
solves the problem in https://github.com/aframevr/aframe/issues/3389
in chrome and firefox on fedora 
  A-Frame controller experiences do not work on Oculus Browser 4.3.0+ on an Oculus Go device.

Previously, the Oculus Go controllers identified themselves as GearVR controllers. However, they are now properly identified as Go controllers, and so now all of the A-Frame controller experiences no longer work; the A-Frame controller code only works on a known set of named controllers. 

In Oculus Browser 4.3.0 and newer - on Oculus Go devices only - the Gamepad.id property now returns "Oculus Go Controller". 

Before Oculus Browser 4.3.0, GamePad.id always returned "Gear VR Controller" on Oculus Go.

On Gear VR devices, Gamepad.id will still be "Gear VR Controller".

Oculus Go controllers have the same functionality as Gear VR controllers:
https://www.oculus.com/blog/pioneering-the-frontier-of-vr-introducing-oculus-go-plus-santa-cruz-updates/

- A-Frame Version: 0.7.1
- Platform / Device: Oculus Browser on Oculus Go
- Reproducible Code Snippet or URL: See https://aframe.io/examples/showcase/a-blast/ - the various A-Frame 'universal' controls components (such as super-hands: https://github.com/wmurphyrd/aframe-super-hands-component) also do not work.

 If possible it would be nice to remove looking at these strings. Also in WebXR API they won't be available.  I would counter with: when the strings are available, it is much more intuitive for the user to have a representation that matches what they would see from their system outside Web context (e.g. to avoid "hey why does my browser think my Touch controller looks like that" as well as "which button means what in this Web thing") - perhaps you are arguing for a generic controller representation, but we basically started with that in A-Frame and quickly evolved to understanding specific controllers instead.  Still being debated in WebXR API discussions from what I see Should be same (or else they would not have been able to function properly as Gear VR Controller)

We should probably keep this issue limited to current Gamepad API, and discuss WebXR future in https://github.com/immersive-web/webxr/issues/319

Send me one and I will fix however we decide ;-) @Marcos, yes, Oculus Go controller has the same buttons as GearVR one. Can someone either test results of 
https://github.com/aframevr/aframe/pull/3423
with Oculus Go, 
or send me one so I can do so? We will verify. If it still doesn’t work we will follow up with a patch. 

> On Mar 10, 2018, at 2:13 PM, Diego Marcos <notifications@github.com> wrote:
> 
> I don't have an Oculus Go to test on. @DigiTec Could you verify if Oculus Go is working now on 0.8.0? Thank you
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub, or mute the thread.
> 
 Any update on this?  The A-Blast example doesn't work at all on my Go; it just shows a big white screen.  The A-Painter example just shows a big black screen.  And the Tracked Controllers example isn't even listed on https://aframe.io/examples/, when viewed on the Oculus Go browser.  Is all that expected? I thought there was a way to see the examples using the latest master A-Frame build, maybe via rawgit - but not sure if that is true for A-Painter, A-Blast, etc. ? Is it intended that mousedown/mouseup are fired not by the trigger, but by the thumb disc on the top of the controller?

That's not what I expected... most native games with any sort of point/click interface (e.g. Pet Lab, Fail Factory, and the Go home UI) all use the trigger as the functional equivalent of clicking a mouse.  Pressing the touch disc is rarely used.  It seems like A-Frame would be better served by mapping the trigger to mouse down/up. I made an example that works on the Oculus Go with the controller for easy test

https://lunar-stealer.glitch.me/ @dmarcos The laser controls example was AWESOME!!! Thank you for that. Is there any example of the camera moving back and forth like a WASD controller with the oculus go?   The Oculus Go controller freezes when re-entering VR. If someone can point me in the right direction, I'd be glad to fix it myself and submit a PR.

Steps to reproduce:

1. Enter VR on the Go in a scene with oculus-go-controls (e.g. https://lunar-stealer.glitch.me/)
2. Press the back button to exit VR
3. Enter VR again
4. The controller appears but is not responsive. Buttons are not highlighted.

This bug also appears (inconsistently) when going through a-link portals. Forgot to add: Version 0.8.2. Will try with master. Also happens with master. For now, my workaround will be to refresh the page when exiting VR. Hi everyone, in my tests the thumb gesture highlight the shape of the trackpad in the 3d model; however, i don't understand how to create addEventListeners with trackpaddown/trackpadup. Any indication is more than welcome. @spleennooname Hi, it can look something like this:

`
this.el.addEventListener('trackpaddown', function(event) {
    /* Your code here */
});
`

This code would go inside of a [custom component](https://aframe.io/docs/0.8.0/core/component.html) which you include in your HTML. `this.el` refers to the same element that your oculus-go-controls is on:

`<a-entity your-controller oculus-go-controls></a-entity>`

Hope this helps! @spleennooname, I created a sample for Oculus Go on Glitch that uses event listeners:
https://glitch.com/edit/#!/amino-go?path=index.html:1:0  // <a-entity "name"></a-entity> 
that should be the same

**Description:**

**Changes proposed:**
-
-
-
 in the following "Removing an Object3D From an Entity" is the same inconsistency
the better name would be "mypointlight" for this component, or...  on master vr-ui  is not shown and inspector does not load correct  my comment  have nothing to do with the Pointer Lock default -> please ignore it 
i will open a separate bug 
https://github.com/aframevr/aframe/issues/3389

@ngokevin i think this this bug can be closed  Nice!  Maybe we should regenerate the older default font with the new tool, and default negate to false (at least for msdf)  so all new msdf fonts we create will work without the flag?  https://github.com/aframevr/aframe/issues/666#issuecomment-302831463
  `THREE.PingPong` is not a defined constant. `THREE.LoopPingPong` is, but does not exhibit the desired behaviour. `THREE.LoopRepeat` seems to be correct.  **Description:**
I am trying to apply wireframe material to a obj-model. However, when I do this, the look controls don't work any more.
- A-Frame Version:0.7.0
- Platform / Device:Chrome/Firefox on windows 10
          

 here is an example code : 

    <a-scene>
        <a-assets>
	    <a-asset-item id="sample-model-obj" src="sample-model.obj "></a-asset-item>
	    <a-asset-item id="sample-model-mtl" src="sample-model.mtl"></a-asset-item>	
	</a-assets>
	<a-obj-model  src="#sample-model-obj"  material="wireframe:true"></a-obj-model>
    </a-scene>


but anyway I managed to fix it by adding a geometry primitive box attribute to the obj model.  I think that pause/play can be changed to make the feature more useful. At the moment if I pause an entity and then open the inspector and close it again then the entity will be played. There's lots of cases where I might pause only part of the scene, such as pausing enemy spawners while the main menu is open, pausing entities in a pool, etc. In fact the current poolable component gets around this issue by wrapping the play() function and ignoring it.

If we took inspiration from Unity then each element could have a flag called: pausedSelf. When this is set true then it and all its children are paused. They remain paused even if their parents are played. Only by setting pausedSelf of that specific element to false will cause it and its children to be played.

It would be simple to create a 'paused' component implemented in a similar way to the poolable component. Any thoughts? I'm happy to pick this up Ok will do, Ill just release my pause component to the registry  **Description:**
It took me a long time to realise that the Gamepad extensions had to be enabled in order to use the controller.

**Changes proposed:**
This is a documentation change. I hope it is clear enough. Yes, I thought about that and the info is up to date on webvr.rocks.
We can then add a link to https://webvr.rocks/chrome_for_android#android, that contains the steps required to make it work.

Another way around would be to inform the developers. For example if a Daydream controller is detected but it doesn't have a `pose` property, then we can emit an event or a warning in the console asking to enable the Gamepad extensions. Is this PR ready to be merged? It was approved 10 days ago.  **Description:**

- A-Frame Version: 0.7.1
- Platform / Device: Firefox 58 on MacOS
- Reproducible Code Snippet or URL:

I have been following the Guides in the Docs, and it seems that one of the Community components recommended in the tutorial <del>no longer even exists</del> has been moved. Specifically, under *Using Community Components* section, there is an instruction to `angle install template`, but this always fails:
```
Installing A-Frame component `template` to `index.html`
A-Frame script tag not found. Assuming latest version.
/usr/local/lib/node_modules/angle/lib/install.js:68
  if (!file) { throw new Error(`${moduleName} not found in A-Frame registry`); }
               ^

Error: template not found in A-Frame registry
    at Command.install (/usr/local/lib/node_modules/angle/lib/install.js:68:22)
    at Command.listener (/usr/local/lib/node_modules/angle/node_modules/commander/index.js:315:8)
    at emitTwo (events.js:126:13)
    at Command.emit (events.js:214:7)
    at Command.parseArgs (/usr/local/lib/node_modules/angle/node_modules/commander/index.js:653:12)
    at Command.parse (/usr/local/lib/node_modules/angle/node_modules/commander/index.js:475:21)
    at Object.<anonymous> (/usr/local/lib/node_modules/angle/index.js:33:4)
    at Module._compile (module.js:643:30)
    at Object.Module._extensions..js (module.js:654:10)
    at Module.load (module.js:556:32)
```

A working link to https://ngokevin.github.io/kframe/components/template/ is provided at one point in the document, but the link provided further down in the docs https://github.com/ngokevin/aframe-template-component is 404 not found. Clearly the latter is what is being used in the A-frame registry.

I guess the Template component could be installed manually from the correct location, but this is a beginner guide, so either the instructions need to be fixed (don't use `angle`?) or the registry needs to be updated?
 Great, thank you!  We have several "Samsung Galaxy J3 Mission" phones. When using this mobile device to view any A-Frame VR scenes, including the official examples at aframe.io/examples, the objects appear black. The sky does have color. This occurs on all the devices, using any browser. This issue does not occur on my personal device which is a "Samsung Galaxy J3 Prime".

- A-Frame Version: 0.7.0
- Platform / Device: Android 7.0 / "Samsung Galaxy J3 Mission" (SM-J327VPP)
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

Simple reproduction: camera entity with a cursor/raycaster as a child entity

- When VR isn't presenting, with or without a `position.y` set on the camera at all, the camera & child renders at the expected position
- When presenting, `position.y` on the camera entity appears to have no effect at all on the camera itself or the child entities
- Tested `position.x` and confirmed the child follows the correct Y axis

Basically, if you explicitly set the camera Y pos to 1.6 so that it matches the environment like Oculus, child entities drop to the floor when presenting. Might be the same issue reported in [this comment](https://github.com/aframevr/aframe/issues/3342#issuecomment-358795710), as if your cursor isn't far enough from the camera, it disappears from sight + your raycaster height is off.

**Details:**

- A-Frame Version: master#7d92f34
- Platform / Device: Oculus Browser/GearVR
- Reproducible Code Snippet or URL: [CodeSandbox Editor](https://codesandbox.io/s/lr709n8xwz), [CodeSandbox Output](https://lr709n8xwz.codesandbox.io/)

 @dmarcos my project is reporting `github:dmarcos/three.js#r89fix` and `2d651b7`, and the CodeSandbox repro the same three version with `5243a56` (latest patch). Issue exists on both.

Is the likely cause of this clear / is there a particular place I should start looking? I'm happy to spend some time investigating myself, although i'm not all that familiar with A-Frame/three.js source.

edit: after reading and fiddling with `WebVRManager#render` and `WebVRManager#getCamera` code for an hour or two I have determined I have no idea what I'm doing 🆘  I have also some difficulties with attaching enteties to my VR camera. Not sure if I'm doing something wrong or if it is a bug. It was working before with v0.7.0.

I have a sphere as a child of my VR camera (simulating the players head). As soon as I enter VR mode (Vive) the children of my camera stay at position 0 0 0, while the viewport (camera jumps to the the relative coordinates within my real room). From there I can see the Sphere follow the movements of my headset but at the position of the scene origin.

I also tried to wrap the sphere and all my head meshes within a single entity wrapper. Still the same behaviour. I may have fixed this in https://github.com/mrdoob/three.js/pull/13350 Er, I meant https://github.com/mrdoob/three.js/pull/13414 I'm not sure about the oculus y-axis issue, but if anyone is interested about the strange behaviour I was discovering on my project: I found a workaround and figured out that I can fix my problem by NOT using the "active: true" option for the camera (maybe I should open a seperate issue for this - but I'm not sure if this is a real issue - or my lack of knowlege about aframe).

In my project The player camera gets initialized later on when the info is pushed by the server. So A-Frame has already created the default camera. So I create a new camera for the player with `<a-entity camera="active: true">` once I received the order by the server.

Now there are two things happening when I enter VRmode (as mentioned it's fixed when I leave out the `active: true` part):

1. the y-position of the camera children (using a sphere with radius 0.3) is exactly off by the height of the sphere (0.6) - which I think should not be the case, as the origin of a sphere should be in the center.

2. The rotation of my camera seems not to be synchronized with the initial headset ratation what makes the children move in the wrong direction. So if the headset for ex. moves forward, the children also move farward but in the direction of their own forward axis which is not the same as the headset anymore. This leads to the strange effect, that you can watch the children dancing around like a mirror of youself from a different position.

As I figured out it seems that I do not have to use the `active: true` option to tell A-Frame to make the new camera the active one. So I can just leave it out and it's then working correctly. Still I feel this looks like a bug to me, right? Yes, I think so, but I will doulbe check when I have time in a couple of days. I'll try to create a stripped down version of my code and see if I can create a simple test case that reproduces the behaviour. @dmarcos @ngokevin master appears to have resolved the issue.  
  **Description:**

When dynamically selecting and attaching a click based event listener to a plane, the event listener does not respond. It does not fire for some reason.

- A-Frame Version: 0.7.0
- Platform / Device: Firefox 58.0.1 (64-bit) (Macbook Pro)
- Reproducible Code Snippet or URL:

===================================
\<html>
    \<head>
        \<script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
    \</head>
    \<body>
        <script>
         AFRAME.registerComponent('click', {
            init: function() {
                this.addEventListeners();
            },
           addEventListeners: function() {
              var el = this.el;

              el.addEventListener('mouseenter', function() {
                  el.setAttribute('scale', '1.25 1.25 1');
              });
         }
         });
         AFRAME.registerComponent('load', {
             init: function() {
                 temp = document.querySelector('#temp');
                 temp.setAttribute('click');
             }
         });
        </script>

        <a-scene load>
            <a-camera>
                <a-cursor>
                </a-cursor>
            </a-camera>

            <a-plane id="temp" color="red" position="0 0 -2">
            </a-plane>
        </a-scene>
    </body>
</html>
====================================

Not sure why the html code is messing up in github issues.

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Same problem occurs in the following scenario showing that it is not a entity loading after scene issue.

AFRAME.registerComponent('load', {
             init: function() {
                this.el.setAttribute('click');
             }
         });

...

\<a-plane id="temp" color="red" load position="0 0 -2"> This issue can be closed. Maybe some documentation needs to be clarified or created.

When using setAttribute with an empty set of arguments, it must be called setAttribute('click', {})  **Description:**
I am making a compass to indicate the camera look at direction
I add a listener to change the compass rotation when camera's rotation changed( component change event).
I found that for A-Frame 0.5.0 , the rotation of compass is really smooth, while in 0.6 or 0.7, it is really lag.

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 before http://bioinformatics.victorchang.edu.au/projects/vrdemo/ (0.5.0)
after https://aframeproject-a5507203.c9users.io/ (0.6.1)
Do not need to upload any file, just click confirm button when you enter the link
Thanks Yes, I tried, same issue. Thank you sooo much  **Description:**
Hi, is it possible to pause rendering loop and update manually (like three.js) ?
- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Dear mate,
I am sooo sorry about that. 
My aim is to increase the performance.
1. As far as I know, the scene will go into infinity rendering loop (ie. keep updating 60 times per second) after loaded. 
2. Instead of doing that, I want it only render for 1 frame after loaded.
3. After that, the scene only update when I tell it to update (such as after changing the rotation or position of  an object).
Thank you soooo much for helping me.  I asked this on the slack channel and @dmarcos advised me to open an issue.

When viewing a basic scene on a Microsoft Windows tablet (with no keyboard attached) or a Samsung tablet, I can scroll horizontally in Chrome and Firefox (but not vertically). In Edge, there is no scrolling allowed at all.

And there is no motion detection on these devices. 

If no vertical scrolling can be achieved is it possible to add a directional button to reproduce the movement?

Can this be rectified or is it just not able to work in these tablets like on an iPad at the moment?

- A-Frame Version: 0.7.0
- Platform / Device: Windows Tablet 

 Anyone? I am charging to tablet now :) so ill let you know

Do you know of any pre-existing vertical scrolling components?  **Description:**
[Vimeo has a demo](https://github.com/vimeo/vimeo-webvr-demo) on how to render Vimeo videos in A-Frame. The A-Frame FAQ should be modified to reflect this.

**Changes proposed:**
Pull request: https://github.com/aframevr/aframe/pull/3356
  **Description:**
[Vimeo has a demo](https://github.com/vimeo/vimeo-webvr-demo) on how to render Vimeo videos in A-Frame. The A-Frame FAQ should be modified to reflect this.

**Changes proposed:**
Added Vimeo support to the FAQ.  why not use the system fonts with canvas filltext? 
the chinese Font should be installed on the System
(https://www.html5canvastutorials.com/tutorials/html5-canvas-text-font-size/) @donmccurdy You got a lot further than I did! 

Apparently, [game devs generate fonts with the exact characters needed for a given script](https://gamedev.stackexchange.com/a/81406). I'm not sure if supporting every character is feasible.  https://codesandbox.io/s/3v9z2z34p6

testing different variants 

canvas-text
a-text (msdf font)
aframe-text-geometry-component

  So, I downloaded a gltf model from sketchfab and put it on different versions of A-frame, Here are my observations - 

On A-frame version 0.5.0, the model looks good. There is minor aliasing issue in the edges but it is negligible.
Link - http://aframe5gltf.surge.sh/

On A-frame version 0.7.0 which is the latest, There is a lot of aliasing and it looks very bad in VR.
Link - http://aframe07gltf.surge.sh/

Interestingly if viewed in Sketchfab viewer in VR mode, the model looks perfect, not even minor aliasing.
Link - https://sketchfab.com/models/192bf30a7e28425ab385aef19769d4b0

Please do watch in a VR headset to clearly observe the issue. I hope to get this solved with your help.

- A-Frame Version: 0.7
- Platform / Device: Samsung S8 / Daydream VR headset / Chrome browser 
- Reproducible Code Snippet or URL: Given above

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Yes, I've tried that as well. No luck. The model still looks bad in VR on latest version while it looks fine on 0.5.0. With or without the setting.  I try to force antialias with `<a-scene antialias="true />`  in VR (GEAR - samsung S7) antialias is disabled. No way to force it ?

  Appear alias after exit VR mode

![568d48da-bbae-4e1c-8fdb-b29c1368ad21](https://user-images.githubusercontent.com/12169245/41250568-ead54f5e-6de9-11e8-8fc5-1600d60ff4e6.png)

Enter VR mode, edges are perfect

![74fe7c03-091f-4e62-ac98-7325544d1156](https://user-images.githubusercontent.com/12169245/41250573-eb7a0eea-6de9-11e8-85ed-85f44cfb10cb.png)
![290c16cb-0755-47f0-821f-91b8719f423f](https://user-images.githubusercontent.com/12169245/41250577-ebe18a7a-6de9-11e8-884c-668243f3a658.png)

Before enter VR mode, edges are perfect

On A-Frame home page, When I turn back from VR mode, the aliases appears on the edges of shapes. Why that happened?
 I think i've found a solution to this problem...
After manually setting `antialias="true"` in `a-scene`, there still appears to be some rough edges on the shapes.
It appears that after turning VR-mode on and off again, the `pixel ratio` has changed in the renderer of the scene (WebGLRenderer.getPixelRatio()).
This is why this problem only appears to be on mobile devices where the device pixel ratio is higher than 1.

A manual fix (that worked for me) would be:
- Add an eventlistener to the scene for when you exit VR-mode
- Set the renderers pixel ratio to the correct pixel ratio:  `document.querySelector('a-scene').renderer.setPixelRatio( window.devicePixelRatio );`

I hope this fix will be implemented soon.  **Description:**
I have an embedded aframe with a 360 image, and the image only appears when i resize the browser windows. I dont know what could be. Im not a programmer but i know a thing or two. I haven't see this problem in the issues so thats why im writing this. please help me.

- A-Frame Version: 0.5.0
- Platform / Device: WEB
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Hi, I've encountered a similar behavior when I activate _embedded_ component in my vue/vue-router/quasar/webpack app (a-frame 0.8.0): 
- case 1 (OK): going directly to the scene url => the scene is visible (canvas width and size have normal values).  
- case 2 (NOT OK) : navigating from one url to the scene url (with vue-router programmatic navigation) => the scene is not visible (canvas width and size are equal to 0). If I resize the browser window,  the scene becomes visible (canvas width and size now have normal values).   Erratum : "canvas width and **height**". In my case, I finally found out that the problem had something to do with quasar modal : if modal shows up before the scene is initialized, the scene is rendered correctly.  Some thoughts
- I think you want to move the rig, and let local roomspace offsets apply to the rig children
- I think you want wasd-controls attached to what it is moving, and it would be good to have a selector reference if you want to also take into account the orientation of a child (like HMD camera)
- when implementing wasd-controls steered by another element like HMD camera, a little care may be required to ensure the proper orientation to move in (as the rig may itself be rotated) LGTM with some possible naming nits...

- there's no reason why the wasd-controls direction source needs to be a camera, so might want a more generic parameter name.

- there's no reason why the teleport-controls movement target needs to be a cameraRig, so might want a more generic parameter name.

- teleportOrigin seems a little verbose given that it's teleport-controls, but not a big deal Sanity check - if you force camera position to `0 1.6 0` will that cause problems in 6DOF VR? Great, confirming - no more user height parameter, entity with active camera will forcibly have position overridden in VR?  (E.g. if there is separate spectator camera, that one will NOT be overridden?) I created pull request to address this issue:
https://github.com/aframevr/aframe/pull/3394
  Entering VR with WinMR crashes Edge browser window.

To reproduce:
0. Set up your WinMR environment and confirm it works fine.
1. Open an Edge window and go to aframe.io Hello WebVR -- or directly to https://aframe-360-video-example.glitch.me/
2. Notice that 360 video plays fine in browser window -- either inside or outside VR.
3. Click the goggles button to enter VR with WinMR.
4. Notice that you get the correct transition animation into WebVR, but that it drops you back to the Cliff House scene (perhaps with a dormant Edge window).  If you started outside VR, notice the Edge window is gone / has crashed.

FYI, that 360 video example is using A-Frame 0.7.1 but this can be reproduced with master as well.
 (Note, my machine is running Insider Preview build, and NVIDIA driver 388.59)
@leweaver can your team confirm? Thanks @dmarcos - what Windows 10 build are you running? The same occurs for me with https://webvr.info/samples/03-vr-presentation.html so it is not A-Frame specific, as it turns out Thanks again - for me it's 
`Version	10.0.17063 Build 17063`

Maybe I need to roll back for now... Hey, thanks for letting me know. I'll take a look around for known issues; but if there isn't something immediate, would you mind collecting a repro in the "feedback hub" app for us? this should collect logs.

https://support.microsoft.com/en-us/help/4021566/windows-10-send-feedback-to-microsoft-with-feedback-hub-app
 (looks like there is a new build available, will try going forward before rolling back) @leweaver just submitted as part of https://aka.ms/Fup824 great thanks, will take a look! will let you know whether build 17074 fixes it, may not know until later tomorrow though I have a hunch as to what bug was causing this; there is a bug in 17063 that could cause this. And the good news is that the fix exists in 17074 - so let me know how you go! For completeness - 
Windows 10 Insider Preview build 17063 is broken (see above).
Update to build 17074 which does NOT suffer from that problem.
Thanks @leweaver @dmarcos for helping to chase down!  i am trying to build a 360 image viewer using phonegap and aframe. I tried a lot of code samples other than displaying 360 image and everything works fine but when i try to display 360 image there is nothing but a black screen

- A-Frame Version: 0.7.0
- Platform / Device: Amazon Fire Phone
I am using the following code.

```
<a-scene id="vrscene">
	<a-sky src="http://appsdevpk.com/360/naran.jpg" rotation="0 -130 0"></a-sky>
</a-scene>
```


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Yes it does i tried to debug it but there is no error in console  **Description:**
See https://aframe.io/docs/0.7.0/components/material.html#transparency-issues for context.

See https://glitch.com/edit/#!/trail-cause for an example of transparency issues.

One cannot use HTML to re-order pool objects, so this adds a backToFront param to pool.requestEntity(). If true, the available object created *last* is returned.  This is useful when each entity pulled from the pool is placed *farther* from the camera than previous entity, as when the player is flying through clouds.

For an example of use, see https://github.com/DougReeder/elfland-glider/tree/master/ginnungagap/index.html#L41

If it would work better as a parameter when creating the pool, I can rework this.

**Changes proposed:**
-
-
-


I agree to license my contributions under the MIT License. Setting the position of entities works fine.

The end goal is transparency working properly.  The renderOrder property does exist on the meshes, but setting it does not appear to have any effect on transparency.  Transparency *does* depend on the order in which objects are created.   See [this glitch](https://glitch.com/edit/#!/trail-cause).  The second cloud is created after the first cloud and is nearer the camera. Transparency works properly for these two entities.  The third cloud is created after the first two, but is further away. The first two entities completely occlude the third, instead of being transparent.

 I'd prefer that transparency be independent of object allocation. However, *renderOrder does not* appear to have an effect, but the *order of allocation does*.  Can you show me an example like [this glitch](https://glitch.com/edit/#!/trail-cause) where transparency works properly, without using the order of allocation?  After pointer lock reached master, i do some testing, it "feels" not good for me, so i revert back to mouse drag ( maybe its only for me because i working a lot with 360 videos) 

 Another vote against pointer lock being on by default, it breaks basic functions like click to play... https://aframevr.slack.com/archives/C0GG937RN/p1516719309000891?thread_ts=1516719309.000891&cid=C0GG937RN The standard way to distinguish between click and drag is to capture position on down, and check to see whether position has changed beyond tolerance on move and/or up... if yes then it's drag, if always no then it's click.  Not sure why that should be any different here? I prefer 'false' by default because with Edge on Mixed Reality portal, when you are in 2D mode (into a 6DoF room but showing your webVR content on a 2D floating window on Edge) if the webpage is trying to lock the cursor, a confirm dialog appears to allow or not to hide the pointer, and if you click Yes, the controllers disappear and is hard to know where are you pointing.  **Description:**

- A-Frame Version: releases/0.7.0
- Platform / Device: PC 
- Reproducible Code Snippet or URL:

As the title, when I  use the following code ,it shows no '大库' 

 
`<a-entity id="text" position="-0.8 3.0 -5.0" text-geometry="value: 4大库;  style: italic; size: 0.5; weight: bold; height: 0; bevelEnabled: true; bevelSize: 0.04; bevelThickness: 0.04; curveSegments: 1"
                    material="shader: flat; color: white; transparent: false; opacity: 0.4"></a-entity>`

 aframe could use  https://github.com/googlei18n/noto-fonts   **Description: Raycast always triggers on objects, even with a manual refresh**

- A-Frame Version: 0.7.0 and 0.7.1
- Platform / Device: Firefox/Chrome
- Reproducible Code Snippet or URL:

I have a-frame scene with a menu that toggles visible/invisible, regardless of its visibility the raycaster always triggers though. So I edited the raycaster to only register .link objects, and I now change the objects classes when toggling the menu, and I also do a manual refresh of the raycaster. Still triggers. My controls:

```
<a-entity camera look-controls>
      <a-entity position="0 0 -3"
                geometry="primitive: ring; radiusOuter: 0.08;
                          radiusInner: 0.05; thetaLength: 360; thetaStart: 90;"
                material="color: cyan; shader: flat"
				        raycaster="objects: .link; recursive: false; autoRefresh: false"
                cursor="maxDistance: 500; fuse: true; timeout: 3000;">
        <a-animation begin="cursor-fusing" attribute="geometry.thetaLength" fill="forwards" from="360" to="0" easing="ease-in"></a-animation>
      <a-animation begin="mouseleave" attribute="geometry.thetaLength" fill="backwards" from="0" to="360" dur="0"></a-animation>
      </a-entity>
    </a-entity>
``` So, ah, for whatever terrifying reason my cursor stops working completely on master... @wmurphyrd Possibly, though I don't believe so because I'm updating both the object's class and the template object's class (and I can see this in the inspector), the raycast just doesn't seem to acknowledge the change?  **Description:**

The default value of `THREE.Material.needsUpdate` is `true`. (It's set to `false` in `renderer.render()`)

Then  we need to set `false` to `material.needsUpdate` before `component.update()` call in shadow component's "sets needsUpdate on material" test to check if `.needsUpdate` is set to `true` in the component.

**Changes proposed:**
- sets `false` to `mesh.material.needsUpdate` before `component.update()` call in the "sets needsUpdate on material" test  **Description:**

There is a bug when doing the widely-used 360 screenshot (https://aframe.io/blog/screenshot/). You can take a screenshot, but when they come out, I mini 2D version of the world appears in the middle of the shot. Here is an example photo where you can see the issue. No solution yet identified.

- A-Frame Version: 0.7.0
- Platform / Device: All

![screenshot-wild-1515678861325](https://user-images.githubusercontent.com/26422030/34890630-9af1f784-f7ca-11e7-87d7-285f6bffc465.png)


 Yes -- if you look in the middle of my photo, you can see mini bamboo shoots and white particles from the particle system. I am not actively using the environment component, so that shouldn't be the issue. The particle system always causes the problem, but those bamboo shoots are just cylinders and shouldn't cause problem. Any thoughts? I'm not the only one experiencing this it seems.  I would like to be able to load an json file <Geometry export >from threejs editor. This json file only include BufferGeometry (a box)     A-Frame support  registerGeometry  such as  THREE.BoxBufferGeometry into frame entity.     but  THREE.BufferGeometryLoader   doesn't work,  Thanks!



  AFRAME.registerGeometry('box_loader', {
               init: function (data) {
                var loader,
             loader = new THREE.BufferGeometryLoader();
              this.geometry=loader.load('box.json',
              function ( geometry ) {
                        });
            }  
      });

 `<a-entity` geometry="primitive:box_loader; buffer: false; skipCache: true" position="-1 1 0" material-override></a-entity>** Thank you for your reply！
You say I have been using the object - model method, because the import object with  materials, can't in aframe scene manually modify the material inside, this is very easy to modify in THREE ,so I want to import the geometry alone, without the import material method, custom geometry components in a - frame, then add <material - override> this component.

In this case I was some inspiration
https://github.com/donmccurdy/aframe-extras/issues/167

I think if we can make this custom geometry components, is of great convenience to many of the specific project, looking forward to


 Thank you again for your reply
Often encounter such a situation, import operators or aframe objects with production softwares 3 dmax, Maya, Blender these modeling software to see the display of the different of the scene, these may be the problem of the export plug-in, you said so designers prefer real time adding color material in the scene, so that the final effect is you need.

In THREE load object is usually only a object  json  file, because it is at the time of loading can be defined to replace the material.If  object -model  loading time A-frame can also modify the material   is pretty good, of course only load the geometry file without material, less data, the speed will be faster.

Think there is such a vr scene, a car inside, if you want to be a key to replace the wheel parts, or   a key to replace body material, no matter use what format loaded geometry, must use the geometry of the custom components.Of course the json as the default format of three, I think is the most appropriate.Continue to look forward to you and the community as early as possible for this function, thanks!  Added a Glitch example to the docs, to demonstrate how to allow mouse clicks on entities with A-Frame.
 Sounds good. Just updated the Glitch project with basic hover effects for interaction feedback.
Decided to use the event-set component for those feedback interactions, since it's simpler to demonstrate than writing custom components in this context. But let me know if you think it should use a custom component with addEventListerer. Awesome, thanks!  **Description:**

- A-Frame Version: 0.7.0 and 6019885
- Platform / Device: Gear VR + Galaxy S6 running Android 7.0
- Reproducible Code Snippet or URL:

1. In Gear VR, launch Oculus browser
2. Navigate to https://aframe.io/examples/showcase/helloworld/
3. Focus reticle on enter-VR button and tap touchpad. Device enters VR mode normally
4. Tap or swipe touchpad
    * expected result: no effect, as no click hander is set
    * actual result: scene crashes w/ toast: "Page has crashed and been recovered"

A tap or swipe on a paired Gear VR Controller does *not* crash the scene

(Samsung Internet VR doesn't properly go to VR mode, so it's unclear whether it has a similar problem) We encountered the same issue while preparing our most recent production release and have determined it was an issue in `uglify-es`. We haven't worked out the exact version that introduced the issue, but we are having success building with `3.2.2`, and were facing the issue when using `3.3.5`. We haven't tested later versions.

We use `yarn`, have `uglify-es@^3.1.8` in our `package.json`, and although we enforce `frozen-lockfile` via `.yarnrc`, through a recent upgrade of `@storybook/react` we bumped our `uglify-es` version unintentionally. We solved it by using [yarn's selective dependency resolution](https://yarnpkg.com/lang/en/docs/selective-version-resolutions/).

I'll update this later when we take a bit deeper of a look at what exactly was going wrong with uglification. Thanks! It's good to know there's a path to getting it working. - `uglify-es@3.3.7` (latest) has the same issue.
- When our page first renders we are seeing `components:text:error ReferenceError: nek is not defined` twice, presumably once for each of our 2 entities with the `text` component.Uglify is butchering [this function](https://github.com/mattdesl/word-wrapper/blob/master/index.js#L32), renaming it's args to something normal like `(a, b, c)` then where you'd expect `a.indexOf`, it puts `nek.indexOf`. Seems to be gracefully handled by A-Frame.
- Other functionality of our app is broken in Desktop Chrome with those versions of UglifyES due to things being `undefined`
- As per this issue, tapping the button immediately causes a crash. Can only speculate as to why, but presumably something similar.

The issue appears to be in UglifyES itself. It's affecting our entire app, not just A-Frame related code. It may be some specific configuration, but for now, we're settling for locking our version to `3.2.2` as we don't have the bandwidth to investigate further.

If someone has time, it'd be worth opening an issue on the Uglify repo. I couldn't see any related issues, but then again, I'm not really sure what I'm looking for.
  I turned a nested entity invisible by using `visible="false"`, the console returned an error that the `shader couldn't compile`. Error coming from `aframe.js`.

If I set it visible to true, the error is not thrown. 

- A-Frame Version: master
- Platform / Device: Google Chrome 63.0.3239.132 / Desktop
- Reproducible Code Snippet or URL: https://fresh-palm.glitch.me/ `alphaTest` should be `1.0` > `alphaTest` >= `0.0`.

https://fresh-palm.glitch.me/cursorbody.js

For example, I set `0.5` and then error disappeared.  **Description:**
A-Frame doesn't seem to render background (whether it's a-sky or cubemap sky, it doesn't matter) when there are no other entities present to render. It happens only on mobile. You can reproduce it in the given URL on mobile device (I use Chrome on mobile). Steps to reproduce:

1.  Drag to a view where no boxes are present
2.  Enter VR Mode
3.  Exit VR Mode

If you exit VR with entities present on screen, everything will render as expected.
If you enter and exit VR when no boxes are present, it will show white screen - no backround. If the screen is white you can drag to a place where entity should be shown, it will finally render everything.
No demos from [https://aframe.io/](url) have this issue since there is always default cursor present on screen. 

Temporary fix I use for my demos is very distant, small entitity as a child of camera.

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL: [private-scent.glitch.me/](url)  (same demo as in [https://github.com/aframevr/aframe/issues/3330](url) - when i don't have AFrame's default cursor, there's nothing to render)

  
    **Description:**
Expected behavior: boxes scale up on click/touch.
  First example uses solely cursor="rayOrigin: mouse" - after i touch the box i expect the click to be emitted immediately, instead it emits after about 1500ms which might be fuseTimeout ( i didn't expect it to fuse after setting rayOrigin to mouse - i thought fuse is only for gaze based ). 
  The second examply uses cursor="rayOrigin: mouse; fuse: false". Again expected behavior is that click fires immediately on touch. Actual behavior: click fires after quick double tap, or tap once and then touchstart/drag anywhere on screen.

In both examples first box seems to be somehow initially selected - after touchmove anywhere on the screen it acts as clicked.

- A-Frame Version: 0.7.0
- Platform / Device: Android, Chrome Mobile
- Reproducible Code Snippet or URL: [Example 1](https://coral-crate.glitch.me/), [Example 2](https://private-scent.glitch.me/)
- Code: [Code example 1](https://glitch.com/edit/#!/coral-crate), [Code example 2](https://glitch.com/edit/#!/private-scent)


 about tomegz's [Example 2](https://private-scent.glitch.me/), i  got same issue in v0.7.1.

then i added log code for mouse event to a testing page   :  [mouse cursor example in codepen ](https://codepen.io/xiongbinsh/pen/vprMRK) something like:

`sceneEl.addEventListener("mousedown",function(e){ console.log(e) ;
console.log(this.components.raycaster.raycaster.ray.direction);
}) ` 

reproducing step:
- in mobile chrome browser(or from desktop chrome "shortcut  Ctrl-Shift-I, Ctrl-Shift-M" to mobile simulator )

- reload the codepen page metioned above and prepare to see logs in chrome dev console.

- tap anywhere in mobile (chrome simulator) screen and check the mouse event and ray direction data in the console outputs.

issue:
on the first time of tap, the ray direction in log is always {x: 0, y: 0, z: -1} 
then tap more times , each time the cursor ray 's direction( Vector3 object )  is not the data of current cursor direction, but the data of previous touch internally.

only found in mobile mode,  it seems  no same issue found in desktop mode of chrome.

 @wmurphyrd  many thanks for the update @wmurphyrd should this issue be closed?  @mkungla yes @aframevr/a-team can you close it!  **Description:**
Environment example not entirely working.

**Changes proposed:**
Fix environment component property (numDressing -> dressingAmount).
  I wanted to raise a question - would there be any drawbacks to updating the glTF-Model to have the ability to pass in a custom THREE.LoadingManager? This thought was brought up because I'm currently trying to handle relative paths in glTF files, and the best way I've found is using the @donmccurdy 's method in his custom glTF-Viewer which uses `THREE.LoadingManager.setURLModifier()` . 
Is there a reason that the LoadingManager is not available by default in Aframe? 

On a related note - @donmccurdy do you see any drawbacks to adding your relative URL interceptor code from your glTF-Viewer library into the official glTF-Model component directly (I could make a pull request depending on what you think)? I'm talking about this method: 
```
       //Intercept and override relative URLs.
        const manager = new THREE.LoadingManager();
        manager.setURLModifier((url, path) => {
          const normalizedURL = rootPath + url
            .replace(baseURL, '')
            .replace(/^(\.?\/)/, '');
          if (assetMap.has(normalizedURL)) {
            const blob = assetMap.get(normalizedURL);
            const blobURL = URL.createObjectURL(blob);
            blobURLs.push(blobURL);
            return blobURL;
          }
          return (path || '') + url;

        });
        const blobURLs = [];
```

- A-Frame Version: 0.7.1
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 this was more difficult than I initially thought - I think a custom component will have to be written that can parse a map of files, rewrite their relative paths, and add them to <a-assets> .. I'll try and bring this up on Slack and see what people have to say.   Nice! I do think that as best practice for 6DOF we could use example that use a player rig and teleport (even if we only do the shoot-the-floor version with laser-controls) The gaze cursor  is now disappearing when in VR mode on mobile devices. See related issue  #3375  I can't seem to get self-shadowing working on GLTF models. I can on the same model, using the .obj format instead though.

- A-Frame Version: v0.7.1
- Platform / Device: Mac OSX High Sierra AND iOS 11
- Reproducible Code Snippet or URL: 

```html
<!DOCTYPE html>
<html>
  <head>
    <title>Hello, WebVR! - A-Frame</title>
    <meta name="description" content="Hello, WebVR! - A-Frame">
    <script src="js/aframe-v0.7.1.min.js"></script>
  </head>
  <body>
      <!-- <a-scene stats> -->
    <a-scene shadow="type: basic;">

      <!-- skull from here: https://sketchfab.com/models/1a9db900738d44298b0bc59f68123393 -->
      <a-assets timeout="10000">
          <a-asset-item id="skull" src="assets/gltf/skull_downloadable/scene.gltf"></a-asset-item>
          <a-asset-item id="skull-obj" src="assets/models/craneo.OBJ"></a-asset-item>
          <img id="skull-diffuse" src="assets/textures/skull_diffuse_UD.jpg">
          <img id="skull-normal" src="assets/textures/skull_normal_UD.jpg">
          <img id="skymap" src="assets/textures/SunnyWheat.jpg" crossOrigin="anonymous">
      </a-assets>

      <a-entity light="type:directional; castShadow:true; intensity:0.4; shadowCameraBias:0.01; shadowCameraVisible:true; shadowMapWidth:1024; shadowMapHeight:1024;" position="1.285 1 1"></a-entity>
      <a-entity light="type: ambient; intensity: 0.5;"></a-entity>

      <a-gltf-model src="#skull" position="1 1.5 -4" shadow="cast:true; receive:true;"></a-gltf-model>
      <a-entity obj-model="obj:#skull-obj;" position="-1 1.5 -4" material="color:#fff; src:#skull-diffuse; normalMap:#skull-normal; sphericalEnvMap:#skymap; roughness:0.8; metalness:1.0;" shadow="cast:true; receive:true;"></a-entity>

      <!-- just some silly 2d circles being used to test shadows at various heights -->      
      <a-circle id="ground0" position="0 0 -4" radius="2" rotation="-90 0 0" shadow="receive:true;" color="#ff0000"></a-circle>
      <a-circle id="ground1" position="0 -0.05 -4" radius="2" rotation="90 0 0" shadow="cast:true;"></a-circle>

      <a-circle id="ground2" position="0 -0.5 -4" radius="4" rotation="-90 0 0" shadow="receive:true;" color="#00FF00"></a-circle>
      <a-circle id="ground3" position="0 -0.55 -4" radius="4" rotation="90 0 0" shadow="cast:true;"></a-circle>

      <a-circle id="ground4" position="0 -1 -4" radius="6" rotation="-90 0 0" shadow="receive:true;" color="#0000FF"></a-circle>
      <a-circle id="ground5" position="0 -1.05 -4" radius="6" rotation="90 0 0" shadow="cast:true;"></a-circle>

      <a-entity id="sky"
        geometry="primitive: sphere; radius: 500;"
        material="shader: flat; side: back; height: 2048; src: #skymap; width: 2048"
></a-entity>
    </a-scene>
  </body>
</html>
```

![screen-shot-2017-12-26-at-10 00 24-pm](https://user-images.githubusercontent.com/264985/34369342-07e6db60-ea89-11e7-8d38-10a7071a7e6d.jpg) Yes, from Sketchfab. That is a good point. I'll test by exporting an object myself later today in Blender, and report back. Yeah looks like that was it thanks. Using the MetalRoughness node in export lead to no issues in rendering. Thanks!

Some brief research into the gltf export shows specGloss is not part of the GLTF 2.0 core anyhow which may explain some things (ext. 'KHR_materials_pbrSpecularGlossiness' required).  **Description:**
It's not obvious that component data is meant to be readonly. This can lead to confusion if a developer modifies data directly and it is later clobbered by a-frame.

**Changes proposed:**
- Add a note to the docs to clarify that component data is readonly and that `setAttribute` should be used instead.
  I can't seem to figure out why the mobile view of a-frame camera aspect ratio (a-marker-camera) is completely off. it's scaled so everything looks skinny in portrait mode, and wide in landscape. I am also getting this error in console:

dpdb.js:79 Failed to recalculate device parameters.

I've adjusted the css, and set the canvas width/height on a settimeout after it renders. Any way around this issue?

The body gets crazy high dimensions on mobile: width: 3557.33px; height: 2668px; margin-left: -1028.67px; margin-top: 0px; 

a-frame 0.7.1 Yes, they work great. I'm on ios 11.2.1, safari, iphone x

    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
    <script src="./dist/aframe-ar.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    </head>
    <body>
    <a-scene embedded arjs rjs='trackingMethod: best;'>
    <a-marker-camera preset="custom" type='pattern' url='./customMarker/pattern-marker5.patt'>
    <a-entity
        animation-mixer="loop: repeat"
        id="Gunnar"
        scale="0 0 0"
        json-model="src: url(./Models/Gunnar-NewYear.json);">
    </a-entity>
    </a-marker-camera>
    </a-scene>
    <div id="confetti"></div>
    </body>
    <script src="jquery.confetti.js"></script>
    <script>
    function init() {
    var stageWidth = $( window ).width();
    var stageHeight = $( window ).height();
    $('.a-canvas').attr('width', stageWidth);
    $('.a-canvas').attr('height', stageHeight);
    console.log(stageWidth);
    }
    setTimeout(function(){
    init();
    }, 2000);
    </script>
    </html>
 Thanks!
  …g.com

http://itkabhie kabhie song and poem - youtube+8801971131144/prefixing.com

**Description:**

**Changes proposed:**
-
-
-
 docs/introduction/docs/introduction/index.mdindex.mdhttp://itkabhie kabhie song and poem - youtube+8801971131144/prefixing.com  The usual case for transparent background is AR.  I don't think we need to force background scene component, if you want to change the background you can just add it yourself...   vec3 change to vec3 or vec4

**Description:**

**Changes proposed:**
-
-
-
  Calling `computeBoundingBox()` on a `TextGeometry` generated by `<a-text>` throws the following exception

```
Uncaught (in promise) TypeError: Cannot read property 'array' of undefined
    at TextGeometry.computeBoundingBox (index.js:117)
    at init ((index):14)
    at i.updateProperties (component.js:250)
    at i.module.exports.Component (component.js:50)
    at new i (component.js:449)
    at HTMLElement.value (a-entity.js:391)
    at HTMLElement.value (a-entity.js:558)
    at HTMLElement.<anonymous> (a-entity.js:525)
    at a-entity.js:320
    at a-node.js:117
```

- A-Frame Version: 0.7.0
- Platform / Device: Windows 10, Chrome 63.0.3239.108
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/text-bounding-box-bug Cool. I'll go check out `three-bmfont-text` and see about putting a bug in over there. https://github.com/mrdoob/three.js/pull/13622

I think this may be related. Made a pr on threejs which should fix this issue.  **Description:**

- A-Frame Version: 0.7
- Platform / Device: 6DOF Mobile headset
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

After https://github.com/aframevr/aframe/commit/3d188db12742d162b2c9e60ffd0222f75acaffa1#diff-b9cfc7f2cdf78a7f4b91a753d10865a2 it seems that userHeight is not applied in devices using null stageParameters and the camera is on ground level. 

Should this be fixed on A-frame or do we need to fix this in Three.js? https://github.com/mrdoob/three.js/issues/11619

I have a wip in the Three.js WebVRManager class to to handle standingTransform and could make a PR if you want the code to be there.

What do you think?
 BTW where is stageParameters.sittingToStandingTransform used now for the headset camera? I only see references in tracked-controls.js file for handling gamepads   **Description:**
Currently most functions in an A-Frame call stack are named "value" due to the way elements are defined and registered.
This change makes use of the [displayName](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/displayName) property on functions to improve call stack readability.

Before:
![Debugger call stack with multiple functions named "value"](https://i.imgur.com/dMcjCXx.png)

After:
![Debugger call stack with properly named functions](https://i.imgur.com/IzFmOaD.png)

**Changes proposed:**
- Name functions on registered elements using the displayName property. The `test.only` was removed in `829dcc0`. Sweet, thanks.  **Description:**

The Oculus controller object is missing the texture file and cannot be reproduced. 
Attached is the missing file.

![external_controller01_col](https://user-images.githubusercontent.com/10402462/34079120-d99ff460-e31e-11e7-958b-5fad5c7ec8de.png)
  In Cordova/PhoneGap using WKWebview, it does not enter the conditional "if (this.isIOS) ", so the issue remains. If I remove the conditional, it fixes it

  I'm a total rookie so I'm probably making a mistake but it seems this line may be missing a '</video>' tag?

**Description:**

**Changes proposed:**
-
-
-
   On touch enabled devices, tapping the screen causes the click event to be called twice - once due to a TouchEvent and once due to a MouseEvent. Need a mechanism to fire only 1 event.

click/touch the red sphere in -
http://asc-702-ubuntuvm.main.ad.rit.edu/VR/electrostatics/index.html

Click causes single change of color. Touch causes 2 changes. So I don't foresee this being 'fixed' anytime soon, thankfully with a little user patience it can be avoided~

So if you have control over the listener method, like if you register a `cursor-listener` method yourself you can make a boolean globally for the dom's overall click method to have it wait a few seconds before setting that boolean to true and allowing your methods to execute:
```javascript
var isDelayed = false;
  $("html").on("click", function() {
    setTimeout(function() {
      isDelayed = true;
    }, 1000)
if (isDelayed) {
 //execute
}
```

In other circumstances, like on a page where we use the A-Frame Link component you can affect object attributes such that they won't double click and misbehave. Link has an `on` prop which defaults to `click`:
```javascript
link.setAttribute('link', {
 "href": "#",
 "title": marker,
 'image': preview,
 'on': "blah"
 });
setTimeout(function() {
 link.setAttribute('link', {
 'on': "click"
 });
 }, 1000);
```

Users who like to click frantically might panic, but most won't notice the subtle delay that waits just long enough to prevent A-Frame Mobile's invisible thumb from clicking on it
 @kezzsim you're seeing this still in 0.8.0? I thought I had fixed this one Oh, Gyro is still broken in 0.8.0 on Mobile Chrome 65 with the current release (`https://rawgit.com/aframevr/aframe/c4aa63e/dist/aframe-master.min.js`)
So we had to roll back to 0.7.1 to get that functionality.

If you have a more elegant solution that can be implemented in 0.7.1 for the time being it would be greatly appreciated, as currently with links this only works a small portion of the time - it appears mobile chrome has a really hard time adding the on click attribute after the object is initialized.

You can see what I've been working on [here](http://apps.tlt.stonybrook.edu/unionProject/matrix.html) to get an idea, I want it to spawn a link entity after clicking on one of those rectangles - but on mobile it normally clicks twice and doesn't give the user any time to look at the preview link, for now I've added the interval which prevents that from happening but now most times on Mobile I can't get it to click at all... Any progress? Or new ideas for a workarounds?  please update the default value in the documentation as well  **Description:**

- aframe-master
- firefox windows10

Firefox console always says selector is empty... 

```
function HotspotText(){
					  var sceneEl = document.querySelector('a-scene');
					  var selector = sceneEl.querySelector('#image-360a-text');
					  var ani = document.createElement('a-animation');
					  ani.setAttribute("attribute", 'visible');
					  ani.setAttribute("begin", '100');
					  ani.setAttribute("to", 'true');
					  selector.appendChild(ani);
					}
```
```
<a-entity id="#image-360a-text"
          position="53.64 -19.48 62.28"
          rotation="0 -143.24 0"
          scale="15 15 15"
          geometry="primitive:plane;height:1.4;width:4"
          material="opacity:0.6;color:black"
          text__appname="align:center;baseline:bottom;color:yellow;value:lorem Ipsum;wrapCount:12;zOffset:0.01"
          text__cityname="color:white;align:center;wrapCount:24;zOffset:0.01;baseline:top;value:#dolor mi">
        </a-entity>
```  https://aframe.io/aframe/examples/boilerplate/360-video/ works.
https://a-frobot.github.io/aframe/examples/boilerplate/360-video/ only shows black. https://a-frobot.github.io/aframe/examples/test/videosphere/ is also broken and only shows black. duplicate of #3287  @mkungla it's not a duplicate in the sense that text being broken is separate from 360 video being broken, right?  although the root cause may be the same.  @ngokevin hmm, so that isn't great... hadn't seen any reason for that to break with newer three.js? So what did we decide to do here, change videosphere to use `side:back`, or make negative scale work again?  (If the former, we probably want to note negative scale change as potentially breaking) (Sadly, yes) I found this issue when trying to use aframe master on my project.
I confirm the issue is related to mrdoob/three.js#12787
I have lots of the following warnings too:
`
THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0
`
`
THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0
`
because of `frontFaceCW` calculation in mrdoob/three.js#12787 (I tested to set it to false and do my own aframe build, the warnings and the black texture issue are gone)

You need `material="side:back; ..."` and a negative scale like scale="-1 1 1" otherwise the texture is flipped. But I still have warnings `.getInverse() can't invert matrix, determinant is 0`.

 My recollection is that changes are needed to `a-sky`, `a-videosphere`, and `a-curvedimage` although I haven't had time yet for PR.  But I haven't seen that matrix error yet The matrix warnings are probably related to other entities in my scene, may not be related to a sphere geometry. @dmarcos @machenmusik 
https://github.com/aframevr/aframe/pull/3370  https://aframe.io/aframe/examples/test/text/ works for me in Safari and Chrome, can you be more specific? from https://a-frobot.github.io/aframe/examples/test/text/index.html
I see some new warnings, something else seems wrong...
```
A-Frame Version: 0.7.0 (Date 2017-12-12, Commit #1c3db47)
index.js:87 three Version: mrdoob/three.js#aa7557123d
index.js:88 WebVR Polyfill Version: ^0.9.40
three.js:21183 THREE.WebGLRenderer 89dev
three.js:5560 THREE.Color: Unknown color #98d8
three.js:5560 THREE.Color: Unknown color #3b532
three.js:5560 THREE.Color: Unknown color #2b490
three.js:5560 THREE.Color: Unknown color #5eda1
three.js:5560 THREE.Color: Unknown color #a0421
three.js:5560 THREE.Color: Unknown color #ef829
three.js:5560 THREE.Color: Unknown color #cde17
three.js:5560 THREE.Color: Unknown color #5d4c9
three.js:5560 THREE.Color: Unknown color #1a6ee
three.js:5560 THREE.Color: Unknown color #31798
three.js:5560 THREE.Color: Unknown color #4642f
three.js:5560 THREE.Color: Unknown color #afffb
three.js:5560 THREE.Color: Unknown color #ae4c5
``` maybe we should only use stable versions of three.js (like webvr-polyfill) ?
not sure why we are using a specific commit that is renderer 89dev ... should rename the issue lot of examples are broken and  issue was introduced by https://github.com/aframevr/aframe/commit/3d188db12742d162b2c9e60ffd0222f75acaffa1   Fixed in #3652  **Description:**
- link to building a basic scene resulted in 404

**Changes proposed:**
-
-
-
  I have a problem in how VR mode is generated in A-Frame 0.7.0 in my Samsung Galaxy S7 Edge. It worked good with A-Frame 0.3.2. Now, with A-Frame 0.7.0, it appears in this way:

![32493841-a6199282-c3bf-11e7-87d3-7662c42292f9](https://user-images.githubusercontent.com/15125922/33676441-08512b42-dab6-11e7-9e73-57fcbf8a52f9.png)


- A-Frame Version: 0.7.0
- Platform / Device: Chrome / Samsung S7 Edge
- Reproducible Code Snippet or URL:

 This is correct:
![screenshot_20171206-185515](https://user-images.githubusercontent.com/15125922/33676901-4f55db04-dab7-11e7-9f26-b6760d3eb7fb.png)

This is incorrect:
![screenshot_20171206-185617](https://user-images.githubusercontent.com/15125922/33676902-4f718282-dab7-11e7-9dcc-40b747b723f2.png)

When I put mobile phone inside a cardboard I see everything doubled. Screen is divided in bad way.
  I've just downloaded Chrome Canary, enabled WebVR flags, and tried A-Frame samples, but although pose seems to work, it doesn't present on the headset, it just goes fullscreen. I tried webvr.info and threejs examples (https://threejs.org/examples/?q=vr#webvr_cubes) and they work.

- A-Frame Version: aframe.io samples
- Platform / Device: win64, htc vive
- Reproducible Code Snippet or URL: http://aframe.io  samples

 (Even when the OpenVR flag is thrown?) I wonder if this is A-Frame taking too long to set up like the vr2vr traversal issues earlier? I have also been experiencing this problem over the last several months.  I just assumed it was a chrome canary issue since firefox worked fine.  However, I was testing with a native three.js app and realized that chrome canary worked fine.   Then I searched google and found this ticket.

Anyway, as of 2018-02-20, I did a git pull, and using 'dist/aframe-master.js', I am now able to enter VR with aframe and chrome canary (not the 'aframe-v0.7.1.js though).   I have problems with either the enter-vr button not showing or not working, so I have to press the "f" key to enter VR.  I also don't seem to get split-screen console tracking in the browser.  But when I put on the HMD, I see everything with tracking.  I have an oculus, but I see the characteristic "steam/vive vr circle", which indicates to me it's  probably doing Vive emulation of some sort.  Also, the default orientation is off (I have to look to the side to see the image) but aside from these issues everything seems to work.  Does the padding handle the various align settings e.g. if you right align, does the padding work correctly, or does it act as left padding and the text goes outside the plane?  If center align, does it pad both sides? Oh ok, so literally just offset, not actually padding.  Nice!   **Description:**

- A-Frame Version:latest
- Platform / Device:PC
- Reproducible Code Snippet or URL:http://wow.techbrood.com/fiddle/35316

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
When I open this page, there is a button in the lower right corner.
![image](https://user-images.githubusercontent.com/9080789/33598267-0c3187c2-d9dd-11e7-8370-98b81a8fb316.png)
I want to use this button to achieve the sub screen effect of the next figure,What should I do?
![image](https://user-images.githubusercontent.com/9080789/33598339-54e659fc-d9dd-11e7-9b89-b97144aefeb8.png)
https://mozvr.com/webvr-demos/demos/nepal/  The latest three.js release corrected how handling gamma output with sRGB colorspace images: https://github.com/mrdoob/three.js/issues/12554

Can we have a build which is bundled with Three.js r88+ release? Even if it's in own branch or not named as `aframe-master.min.js`? A vote for `renderer.gammaOutput = true` and `encoding = THREE.sRGBEncoding` as defaults from me!  **Description:**
The events mouseenter, mouseleve and click are only triggered if the two rays of the controllers meet on the element. A single controller's ray does not emit any of these events.
Example:
https://codepen.io/anon/pen/gXZqNy

- A-Frame Version: 0.7.0
- Platform / Device: FF 64bit
- Reproducible Code Snippet or URL: https://codepen.io/anon/pen/gXZqNy

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Yes, it reproduces in master and the ray of the right controller is truncated. Using v0.6.0 either the left or right ray is truncated. It seems to be changing during a session. The controller which has not a truncated ray correctly triggers the events on the elements.

 If It add objects: [test] to the raycasters, it works. Like in the laser-controls example by A-Frame. But it should work if collisions are tested on everything as well, or? Thanks a lot! Using `near:1` worked, without setting the `object` parameter. I know that using `object` would be best practice for performance reasons. 

I am not sure if we should mention this solution in the docs.  What's the policy for cases when multiple cameras have the "active" attribute set to true? Does A-Frame have a way of guaranteeing that one camera will be the winner based on some criteria? Or will the winner simply be the camera who had active set to true last after all others? The reason I was curious is because in creating an HTML spec (f.e. if w3c were to take ideas from A-Frame) I think there'd need to be a guaranteed definition for "if multiple cameras have the active attribute, which camera is deterministically chosen to be active?" so that multiple implementations reading the HTML can all be spec'd to behave the same way. The answer could possibly be something simple like "the first camera found in pre-order traversal" or something guaranteed. This example answer would require an extra tree traversal before rendering, unless the Three WebGLRenderer is forked and the camera is detected during the render traversal, in which case the renderer call would be just `renderer.render(scene)` without the `camera` arg and would require scenes to contain cameras unlike current Three scenes.

The reason I ask is because I'm thinking about it at [trusktr/infamous](https://github.com/trusktr/infamous/tree/threejs) which is similar to A-Frame in some ways (i.e. using Three.js behind the scenes for WebGL rendering). [Basic Demo](https://codepen.io/trusktr/pen/bYKXLd) Given that A-Frame uses virtual DOM, I would be hesitant to adopt anything that requires updating / relying on full DOM for consistent behavior due to performance considerations.

At the moment, I've done spectator implementation using separate WebGLRenderer (for a traditional 2D spectator view on the PC while rendering to connected HMD, for example) - not sure where @dmarcos has gotten with his latest  **Description:**

- A-Frame Version: aframe-master
- Platform / Device: latest FF 64bit, oculus rift and touch
- Reproducible Code Snippet or URL:

https://codepen.io/anon/pen/ooQXWy

On Master:
When using laser-controls the ray of the right controller is truncated. No entities are attached to the controller (no intersection). The left controller is working (click event as well) and the ray has its full length. The right controller's ray is not going far enough to reach an element to click on.

On 0.7.0 both rays have the right length, but clicking on elements does not work. If there is only one controller, then clicking works as well.

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Yes this example works in 0.7.0. It uses the mousedown event instead of click. But click should work too, or? Ok, thanks. But on current master the ray of one controller is truncated.  Hi
I have a moving box with a camera on top of it. I want to switch to a different camera on the scene. I'm using jquery doubleclick to switch cameras. But when the camera switches, the object stops moving. Any ideas?

- A-Frame Version: 0.7.0 /0.7.1
- Platform / Device: chrome on windows
- Reproducible Code Snippet or URL:

			<a-entity id="GodModeObject" position="7.5 15 -30">
				<a-entity id="godcamera" camera="user-height:1.5" look-controls wasd-controls>
					<a-entity cursor="fuse: false"
						position="0 0 -1.5"
						geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
						material="color: black; shader: flat">
					</a-entity>
				</a-entity>
			</a-entity>
			
			<a-entity id="RedManModeObject">
				<a-animation attribute="position" dur="10000" from="0 2 0" to="0 2 -40" repeat="indefinite" easing="linear"></a-animation>
				<a-box id="red-object" color="#aa000a" height="1.0" width="1" depth="1" position="0 0.5 -2">
				</a-box>
				<a-entity id="redcamera" camera>
				</a-entity>
			</a-entity>
 I've attached the code I'm using. There are 2 files - index.html and
ObjectMotion.js
FYI - I debugged and found that the root cause is due to the "pause" event
emitted by setActiveCamera. when switching from the red camera to the blue
camera.

[sample.zip](https://github.com/aframevr/aframe/files/1516549/sample.zip)
 Never mind. I can circumvent this using the custom events.  If you try to update offset or repeat parameter of a material don't update correctly.

- A-Frame Version: 0.7.0
- Platform / Device: All
- Reproducible Code Snippet or URL: https://spiffy-pear.glitch.me/

```

        self.el.setAttribute('material', 'offset', {
          x: 0,
          y: 0
        });
        self.el.setAttribute('material', 'repeat', {
          x: 1,
          y: 1
        });

        self.el.setAttribute('material', 'opacity', 1);

        // Remove this code comment to see how it works
        // var material = self.el.object3D.children[0].material;
        // material.map.offset.x = 0;
        // material.map.offset.y = 0;
        // material.map.repeat.x = 1;
        // material.map.repeat.y = 1;

```


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Did you find a solultion for this issue? Can confirm this issue Having the same issue. Any suggestions? I can't find the issue in the source. I wrote a material component from scratch, which doesn't show that behaviour. Maybe this helps.

````
AFRAME.registerComponent('mesh-standard-material',
{
    schema:
    {
        /* Shared */

        flatShading: {type: 'boolean', default: false},
        depthTest: {type: 'boolean', default: true},
        depthWrite: {type: 'boolean', default: true},
        wireframe: {type: 'boolean', default: false},
        side: {type: 'string', default: 'front'},
        fog: {type: 'boolean', default: true},
        opacity: {type: 'number', default: 1},

        /* Shader */

        color: {type: 'color', default: '#cccccc'},
        emissive: {type: 'color', default: '#000000'},
        metalness: {type: 'number', default: 0},
        roughness: {type: 'number', default: 0},

        /* Texture */

        map: {type: 'string'},
        mapRepeat: {type: 'vec2', default: {x: 1, y: 1}},
        mapOffset: {type: 'vec2', default: {x: 0, y: 0}},

        /* Normal map */

        normalMap: {type: 'string'},
        normalMapRepeat: {type: 'vec2', default: {x: 1, y: 1}},
        normalMapOffset: {type: 'vec2', default: {x: 0, y: 0}},
        normalScale: {type: 'vec2', default: {x: 1, y: 1}},

        /* displacementMap */

        displacementMap: {type: 'string'},
        displacementScale: {type: 'number', default: 1},
        displacementBias: {type: 'number', default: 0},

        /* EnvMap map */

        envMap: {type: 'string'},
        envMapRefraction: {type: 'boolean', default: false}
    },
    init ()
    {
        this.textureLoader = new THREE.TextureLoader()
        this.material = null
        this.el.addEventListener('model-loaded', () =>
        {
            setTimeout(() =>
            {
                this.createOrUpdateShader({})
            }, 1)
        })
    },
    update (oldData)
    {
        this.createOrUpdateShader(oldData)
    },
    createOrUpdateShader (oldData)
    {
        const newData = AFRAME.utils.diff(oldData, this.data)

        if (!this.material)
        {
            this.material = new THREE.MeshStandardMaterial()
        }

        this.material.flatShading = this.data.flatShading
        this.material.depthTest = this.data.depthTest
        this.material.depthWrite = this.data.depthWrite
        this.material.wireframe = this.data.wireframe

        switch(this.data.side)
        {
            case 'front':
                this.material.side = THREE.FrontSide
                break

            case 'back':
                this.material.side = THREE.BackSide
                break

            case 'double':
                this.material.side = THREE.DoubleSide
                break
        }

        this.material.fog = this.data.fog
        this.material.opacity = this.data.opacity
        this.material.transparent = (this.data.opacity < 1)
        this.material.color = new THREE.Color(this.data.color)
        this.material.emissive = new THREE.Color(this.data.emissive)
        this.material.metalness = this.data.metalness
        this.material.roughness = this.data.roughness
        this.material.normalScale = this.data.normalScale
        this.material.displacementScale = this.data.displacementScale
        this.material.displacementBias = this.data.displacementBias

        this.createOrUpdateMap(newData, 'map')
        this.createOrUpdateMap(newData, 'normalMap')
        this.createOrUpdateMap(newData, 'displacementMap')
        this.createOrUpdateEnvMap(newData)
        this.createOrUpdateMaterial()
    },
    createOrUpdateMap (newData, key)
    {
        if (newData[key])
        {
            const map = this.textureLoader.load(newData[key])
            map.wrapS = THREE.RepeatWrapping
            map.wrapT = THREE.RepeatWrapping
            this.material[key] = map
        }

        if (this.material[key] && !this.data[key])
        {
            this.material[key].dispose()
            this.material[key] = null
        }

        if (newData[key + 'Repeat'] && this.data[key])
        {
            this.material[key].repeat.set(newData[key + 'Repeat'].x, newData[key + 'Repeat'].y)
        }

        if (newData[key + 'Offset'] && this.data[key])
        {
            this.material[key].offset.set(newData[key + 'Offset'].x, newData[key + 'Offset'].y)
        }
    },
    createOrUpdateEnvMap (newData)
    {
        if (newData.envMap)
        {
            const teq = this.textureLoader.load(newData.envMap)
            const seq = THREE.ShaderLib['equirect']
            const meq = new THREE.ShaderMaterial({
                fragmentShader: seq.fragmentShader,
                vertexShader: seq.vertexShader,
                uniforms: seq.uniforms,
                depthWrite: false,
                side: THREE.BackSide
            })

            this.material.envMap = teq
        }

        if (this.data.envMap)
        {
            this.material.envMap.mapping = (this.data.envMapRefraction) ? THREE.EquirectangularRefractionMapping : THREE.EquirectangularReflectionMapping
        }

        if (this.material.envMap && !this.data.envMap)
        {
            this.material.envMap.dispose()
            this.material.envMap = null
        }
    },
    createOrUpdateMaterial ()
    {
        this.el.object3D.traverse((child) =>
        {
            if (child instanceof THREE.Mesh)
            {
                child.material = this.material
                child.material.needsUpdate = true
            }
        })
    }
})
```` I think this also applies to this issue #3387 here too.  Adds a short explainer and links to the animation-mixer component from aframe-extras to help people use animations in their glTF models

**Description:**

I was asked how to get animations for a glTF model to work and I was surprised to find that the documentation mentions nothing about that.

**Changes proposed:**
- Explain that animations are supported via the `animation-mixer` component
- link to aframe-extras docs for the `animation-mixer` component
 @donmccurdy docs fixed :)  @donmccurdy  I modified your example a little bit [codepen](https://codepen.io/mkungla/pen/OOZjjy).
I do agree that expected would be to see `system play` when `scene.play()` is called. 
 
However I never have seen actual usage `.play()` and `.pause()` in systems.  
Using `init()` or `update()` for setting up the system and adding custom methods which can be then called by different components like `this.system.doSomething()` has been more than enough for me and I have a feeling that `.play()` and `.pause()` in system context don not make much sense actually. 

Relevant commits:

docs [6b175ba586d9892b8f842a246506a0f92a44e0e7](https://github.com/aframevr/aframe/commit/6b175ba586d9892b8f842a246506a0f92a44e0e7)  
code [5a2ae56571e6bbc379d9acaba1912468ae690400](https://github.com/aframevr/aframe/commit/5a2ae56571e6bbc379d9acaba1912468ae690400)
  We love AFrame and were looking to create an AFrame-[Mavo](https://mavo.io) demo, because we think it's a match made in heaven.

Sadly, it looks like AFrame components do not behave like normal HTML elements. We'd rather avoid having AFrame-specific code, and I suspect other libraries would have similar concerns.
The whole point of Web Components is that they’re supposed to work like normal HTML elements, and libraries that are element-agnostic should work with them out of the box.

Thankfully, it looks like we can still use `element.attributes[attrName]` and that works as expected.
However, the fact that `element.getAttribute()` returns an object will likely break a lot of code out there that assumes string or null.
Why not use the existing convention where `element.property` returns the object and `element.getAttribute()` the actual string (valid or not)? I can understand why you'd need object-based access instead of string-based for performance, but I don't understand why it's important to provide that object-based access by overwriting a standard method that is supposed to return a string.  If you're going to break the standard, why not do so by adding your own non-standard method so that the original one still works as advertised?  hi
I import model to a-fram with obj and mtl type  like this :  

`<a-obj-model src="models/ladybug.obj" mtl="models/ladybug.mtl" scale="0.03 0.03 0.03"></a-obj-model>
`

How Can I  render this model in a-fram with realistic quality like vray in c4d or similar render engin  Hi Kevin,

my components are kind of relying on this behavior. May we have an API on the raycaster to clear the current selected intersections, so that a new gets thrown each timeout?

Thx @ngokevin, using the method mentioned above would I be able to get the point of intersection aswell?  How to change line width or radius??

a-entity line="start:0 0 -5; end: 5 0 -5; color:#fff;radius:1"

not working ..

thanks   v0.7.1
As title, if I use ```camera.setAttribute('rotation', '0 180 0')```, it changed and successfully triggered componentchanged event; But in case that I change by ```<a-camera :rotation="`${x} ${y} ${z}"></a-camera>```, it won't happen trigger anything. I remember it worked with v0.5.0. Could it possible fixed?  Hello, 

We experience an issue when we preview aframe scenes through Webview in Android apps after Chrome/Webview update to version 62.0 (was working fine on previous versions). The aframe scene initializes and works fine but it does not respond to the device movements (seems like it doesn't communicate with gyroscope to update vr camera's rotation), although rotation using touch events works fine.

We have this problem embedding our project, that uses aframe version 0.5, also had the same result when we tried to embed examples from aframe's website (including https://aframe.io/examples/showcase/helloworld/ which uses version 0.7)

The following permissions/features are defined in AndroidManifest.xml
```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-feature android:name="android.hardware.sensor.gyroscope" />
```

Here is a snippet of the webview initialization code from the Activity class file
```
WebView webView = (WebView) findViewById(R.id.webview);
       WebSettings webSettings = webView.getSettings();
       webSettings.setJavaScriptEnabled(true);
       webSettings.setBuiltInZoomControls(true);
       webSettings.setAllowContentAccess(true);
       webSettings.setAllowFileAccess(true);
       webSettings.setAllowFileAccessFromFileURLs(true);
       webSettings.setAllowUniversalAccessFromFileURLs(true);
       webSettings.setAppCacheEnabled(true);
       webSettings.setBlockNetworkImage(false);
       webSettings.setBlockNetworkLoads(false);
       webSettings.setDatabaseEnabled(true);
       webSettings.setDomStorageEnabled(true);
       webSettings.setJavaScriptCanOpenWindowsAutomatically(true);
       webSettings.setLoadsImagesAutomatically(true);
       webSettings.setSupportZoom(true);
webView.loadUrl("https://aframe.io/examples/showcase/helloworld/");
```
Following are the contents of the build.gradle file
```
apply plugin: 'com.android.application'

android {
   compileSdkVersion 25
   buildToolsVersion "25.0.3"
   defaultConfig {
       applicationId "xxxxxxx"
       minSdkVersion 16
       targetSdkVersion 25
       versionCode 1
       versionName "1.0"
       testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
   }
   buildTypes {
       release {
           minifyEnabled false
           proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
       }
   }
}

dependencies {
   compile fileTree(dir: 'libs', include: ['*.jar'])
   androidTestCompile('com.android.support.test.espresso:espresso-core:2.2.2', {
       exclude group: 'com.android.support', module: 'support-annotations'
   })
   compile 'com.android.support:appcompat-v7:25.3.1'
   compile 'com.android.support.constraint:constraint-layout:1.0.2'
   compile 'com.android.support:design:25.3.1'
   testCompile 'junit:junit:4.12'
}
```

we tested this on 2 Android devices:

- A-Frame Version: 0.5, 0.7
- Platform / Device: 

1. Nexus 5 with Android version 6.0.1 and System Webview 62.0.3202.84
2. Google Pixel with Android version 8.0.0 and Chrome version 62.0.3202.84

Does anyone else have this issue? or knows if there is a fix for that?
 Issue is specific to Android System WebView 62.x or a WebView using Chrome 62.x. It's resolved in Chrome 63, 11 days away from release. We've bundled the CrossWalk WebView with our app and are conditionally using it when we detect the user has 62.x installed.

- [Chromium bug tracker](https://bugs.chromium.org/p/chromium/issues/detail?id=779443)
- [WebVR polyfill issue](https://github.com/googlevr/webvr-polyfill/issues/291) @dmarcos - definitely resolved in Chrome 63.  **Description:**
Umlauts are not rendered when used in an a-text.

- A-Frame Version: 0.7.1
- Platform / Device: -
- Reproducible Code Snippet or URL: https://codepen.io/anon/pen/eeebNx

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  When you download a file, at least on mac, by default the disk permissions of an unzipped directory is 700 instead of 755. This will give you a 403 error if you try to load it via a local webserver.  However, when using the GLTF loader the console never shows this 403 error. Instead you just get a timeout.

Looking at the code to the GLTF loader:

https://github.com/aframevr/aframe/blob/master/src/components/gltf-model.js

The error handling code is not printing the error message to the console. I'm not sure it's even being called. Does 'warn' need to be upgraded to something stronger?

Also, by default, the model is only visible below the user. Is it being placed at 0,0,0?  It's not clear how to move it once loaded.


 if you set position='0 0 -3' on the same entity that i'm loading the model for, then i can see it. so a-assets is hiding the underlying XHR error?

> On Nov 16, 2017, at 3:41 PM, Kevin Ngo <notifications@github.com> wrote:
> 
> It never reaches that point due to <a-assets> timeout.
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub <https://github.com/aframevr/aframe/issues/3237#issuecomment-345098997>, or mute the thread <https://github.com/notifications/unsubscribe-auth/AAQ5yuxbI7dTmC-noq3DcWGWg_6oZoXFks5s3MhHgaJpZM4QhPvy>.
> 

 Hi guys,

FWIW, I'm using Cesium's obj2gltf to convert obj to gltf 2.0. I've been trying to load an object into aframe locally but I cannot properly diagnose what's wrong with the scene because `components:gltf-model:warn THREE.GLTFLoader: Unable to parse model. `. I've tried `chmod 755 model.gtlf` and that doesn't work either.

Just to sanity check the model, I used @donmccurdy gltf 2.0 loader and the model loads correctly with textures. 
![image](https://user-images.githubusercontent.com/11779001/34743935-6696c19a-f540-11e7-9fd7-7c2f6997a08b.png)

Yes, I'm using `live-server`.
[adidas.gltf.zip](https://github.com/aframevr/aframe/files/1616750/adidas.gltf.zip)
  I think there's a issue with text transparency/opacity in the lastest master build. I see a text through a plain with opacity=1.
In 0.7.0 seems fine.

- A-Frame Version: https://rawgit.com/aframevr/aframe/f533f84/dist/aframe-master.min.js
- Platform / Device: Chrome browser
- Reproducible Code Snippet or URL: 
[ex.txt](https://github.com/aframevr/aframe/files/1480023/ex.txt)



 @dmarcos is right. By removing the changes in c1403a27c6ad465ff337c9399365e0da67903112, text renders behind objects again. Tested with latest master 21cc89169a36. @ngokevin @dmarcos I hear the 0.8.0 release is soon. I think you will get a lot of issues filled from this if it remains. I'm on holiday, but I have a long train journey tomorrow when I think I could tackle it. @wmurphyrd my project is full of text and these problems so let me know if you want me to help test anything.  Looks like this was fixed in ff24dbdccd97c798033c2005c521009b4ae55196

https://glitch.com/edit/#!/horn-sparrow?path=index.html:1:0

Should be OK to close this issue  **Description:**
a-frame elements with src attribute are download twice. The devTools show that the two requests are initiated by src-loader.js:102 and three.js:30486. This occurs with aframe.min.js versions 0.7.0 and 0.7.1


- A-Frame Version: 0.7.0 and 0.7.1
- Platform / Device: OSX El Capitan using Chrome 62, Firefox Quantum 57, and Opera 48 browsers
- Reproducible Code Snippet or URL: If you open https://www.utkarshgoel.in/webvr/test1.html or https://www.utkarshgoel.in/webvr/test.html and check the resources requested by the browser in the network tab in devTools, you will see that images PIA15482.jpg and earth_atmos_4096.jpg are requested twice. Further, if you observe the page load process closely, you will onserve that the image doesn't display until both requests for that image are completed.

From the chrome devTools, it appears that for the second request, the browser or the code is adding an "origin" header in the request, which is making the browser believe that the second request is different from the first one.

I'd appreciate if someone can investigate as to why aframe.min.js is causing two requests. Thanks @dmarcos @ngokevin : I tried using a-assets and the browser did not make two requests. Thank you! This works for img and video assets, but not for audio. Can you suggest how to prevent loading audio files twice?  When .dae / .obj / .json models used, the PNG textures transparency applied on those models is not presented, as in other viewers. 

![23600625_10155738955087092_470787031_o](https://user-images.githubusercontent.com/32671100/32894400-6318679c-cae5-11e7-8371-302cf5d53bc9.png)


- A-Frame Version: 0.7.1
- Platform / Device: Mac
- Model URL(.dae) with transparency: [Model.zip](https://github.com/aframevr/aframe/files/1479760/Model.zip)
- Reproducible Code Snippet or URL: 

<a-scene>
        <a-assets>
          <a-asset-item id="cave" src="assets/cave_main.dae"></a-asset-item>
          <a-asset-item id="foliage-obj" src="assets/untitled-scene.obj"></a-asset-item>
          <a-asset-item id="foliage-mtl" src="assets/untitled-scene.mtl"></a-asset-item>
        </a-assets>

         <a-entity collada-model="#cave" rotation="0 180 0"></a-entity>
         <a-entity obj-model="obj: #foliage-obj; mtl: #foliage-mtl" rotation="0 180 0" material="transparent: true"></a-entity>


 @donmccurdy Done  I have a bug with the a-plane tag and it is visible only on fullscreen (VR mode), I am using it to display informations on it with the material attribute ( i am using the library https://unpkg.com/aframe-html-shader@0.2.0 for the html-shader).The a-planes are created dynamically with js and not html (static) and it's visible attribute is changed when a click is made in a obj-model. I am sure the change of the visible attribute is made because we can see the plane on fullscreen (VR mode).  Also even if i'm not on fullscreen the events i have added to the a-plane (click and mouseenter) still work : when i click on the area the a-plane is supposed to be the click and mouseenter event are trigered (even though they are not visible).

- A-Frame Version: 0.6.0
- Platform / Device: Chrome/Firefox on computer
- Reproducible Code Snippet or URL: 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 i'm not sure what you mean, but in the click event the only thing we're doing is changing the visible attribute of the plane. So we are already doing nothing after. Do you have any others test ideas for me to try and find the source of the problem?   This PR is related to issue #3230.

**Description:**
In iOS, orientation changes firing `AScene.resize` may erroneously set the canvas size, reducing the visible area by half:
![portrait](https://user-images.githubusercontent.com/2229853/32746853-93e734fe-c87c-11e7-9df9-6f8694b5b669.PNG)
![landscape](https://user-images.githubusercontent.com/2229853/32746854-93fb6a32-c87c-11e7-918b-5ffa4fa4aaa1.PNG)

This occurs only in non-embedded scenes because the values in `window.innerHeight` and `window.innerWidth` (used by `getCanvasSize()`) are incorrect mid-transition in some browsers. Affected (so far): iOS Chrome, and Safari when the page is launched full-screen via a home screen bookmark.

**Changes proposed:**
- Modify `AScene.resize` to institute a 100ms delay before resizing via `getCanvasSize()` for non-embedded scenes on iOS devices.
  **Description:**

- A-Frame Version: 0.7.x
- Platform / Device: *
- Reproducible Code Snippet or URL: -

Created  experimental repository [mkungla/aframe-lite](https://github.com/mkungla/aframe-lite) where all the excessive noise has been removed reducing repository size **50** times and improving commit log readability. 

**Results**

|  repository  |   commits  | size | 
| -------------- | ------------- | ---- |
| [aframevr/aframe](https://github.com/aframevr/aframe) | 3986 | 233M |
| [mkungla/aframe-lite](https://github.com/mkungla/aframe-lite) | 2644 | 4.4 M |

**Conclusion**

Rewriting Git's history at this stage of the project is rather challenging, but not impossible. I think, in addition to reducing the size of the repository, attention should also be drawn to the readability of Git's history. As @a-frobot already has over 600 commits in less than a year, which is relatively verbose and has created a disturbing noise to track the actual development of A-Frame.

-  `./dist` could be in [aframevr/releases](https://github.com/aframevr/releases) repository
which would not require much effort to update links and references and besides @a-robot could do its job there.
- `./examples` are one of the most biggest git objects in the git object database so it would be reasonable to move these to own repository to avoid repository growth over GB's near future.
- `./docs` and `gh-pages`  could also be painlessly moved to other repository together with A-Frame site content e.g.
- `npm package` could be built by CI/CD where "aframe.js" could be created including injection of package data wanted like version etc. Or better with git annotated / signed tags. Instead of having new commit :ref updating [src/index.js](https://github.com/aframevr/aframe/blob/master/src/index.js#L86) upon every change.

What are your thoughts? Do you see this as a potential issue, or can this become a issue in the near future?


 really it would be better for any assets that may be under `./examples` to be in aframevr/assets to go on CDN, but that probably implies that Safari CORS fixes would need to be widely deployed for that to work

the rest of it is (comparatively speaking) noise floor, isn't it? looks like .git  using 213M
is it possible to reduce this? 
868K	./tests
40K	./scripts
213M	./.git
12K	./.github
30M	./examples
19M	./dist
888K	./src
776K	./docs
48K	./vendor
263M	.
 @arpu basically yes take a look at test repo where I did that [mkungla/aframe-lite](https://github.com/mkungla/aframe-lite) I rewrote the history and removed the noise which makes repo so big. Resulting size I got from ca 200 MB to 4.5 MB

However there will be challenges to do such rewrite. It will impact all forks and devs having to migrate to rewrited history. However that procedure could be written out clearly and easy to follow. @mkungla looks like the --depth  is the best practice here 

git clone --depth 1 https://github.com/aframevr/aframe
12K	./.github
776K	./docs
48K	./vendor
868K	./tests
29M	./.git
30M	./examples
888K	./src
19M	./dist
40K	./scripts
79M	.
 yes in many cases it is the way to go. @ngokevin  what help is here needed? i think this can be closed?  **Description:**
As mentioned [here](https://github.com/aframevr/aframe/issues/1346#issuecomment-340851877) the Samsung Internet VR Browser does not correctly display aframe, instead showing the game through two eyeholes. This pull request was intended to fix that but instead it simply shows the aframe game on a screen (like a watching it on a cinema screen). So this is an improvement but not a fix.

**Changes proposed:**
- Make _isMobile false if on gearvr.
- See [this](https://github.com/aframevr/aframe/issues/1346#issuecomment-340861743) comment made by @dbradleyfl
 I don't understand what is the issue here.
I'm using GearVR with Oculus browser and Samsung Internet VR with no issue with the S8 phone.
Unless you have this issue https://twitter.com/fernandojsg/status/924985106372100096 ?
@fernandojsg was this with a S6 phone and Samsung Internet? Do you still have this issue?
@Marchhill what phone do you use? @vincentfretin sorry forgot to mention I am using S7 Here is a comparison of before and after the pr:
![before](http://i.cubeupload.com/pNn1q4.jpg)
![after](http://i.cubeupload.com/PCCOyh.jpg) This PR is not a fix. A-Frame and other VR Content works fine with Oculus Browser.
Issue described here is latest problem with Samsung Internet it self that no VR content works correctly with that so therefore nothing to do with A-Frame.  GearVR Users have to make sure that their Oculus Software on GearVR is up to date and use shipped Oculus Browser instead of Samsung Internet until last one has solved their bugs.  OK then why don't we suggest that an issue be filed against https://github.com/SamsungInternet/support
similar to 
https://github.com/SamsungInternet/support/issues/22
and close this one here? @dmarcos aha yes that is it  **Description:**

- Latest version of A-frame
- Android

After some testing, i found the issue which i am getting when i try to use [I Am cardboard headset](https://www.imcardboard.com/cardboard-vr-v2-box-132.html) with [Samsung Note 3](https://www.gsmarena.com/samsung_galaxy_note_3-5665.php) .

The problem is that objects are duplicated, while it perfectly works with other devices having screen size under 5.7 in.

Any suggestions?

Thanks

  **Description:**

- A-Frame Version: 0.7.1
- Platform / Device: Samsung S7 gearvr with Oculus VR browser
- Reproducible Code Snippet or URL:

```
<html>
  <head>
    <title>Test Area!</title>
    <script src="https://aframe.io/releases/0.7.1/aframe.min.js"></script>
    <script>
        AFRAME.registerComponent('test', {
          schema: {},
          init: function () {
              var el = this.el;

              el.addEventListener("trackpaddown", function() {
                  document.getElementById("floor").setAttribute("color", "#"+((1<<24)*Math.random()|0).toString(16));
              });
          }
        });
    </script>
  </head>
  <body>
    <a-scene>
        <a-plane id="floor" rotation="-90 0 0" width="100" height="100" color="blue"></a-plane>
        <a-entity gearvr-controls test></a-entity>
    </a-scene>
  </body>
</html>
```

When I try to run this test snippet, the gearvr controller model does not show up and the 'trackpaddown' event is not being fired, I have tried this with multiple aframe versions but to no avail. I have posted this as an issue rather than a support question because [this](https://chenzlabs.github.io/gearvr-controls/) example (that the gearvr component came from) does not seem to work either.

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

- A-Frame Version: 0.7.0
- Platform / Device: Samsung S8 with Cardboard
- Reproducible Code Snippet or URL: https://glimmer-house.glitch.me/

When I try to open any aframe scene with an S8 device, I get double vision and blurry effects. If the lenses are moved far apart, the stereo view gets a little better, but you see everything blurry because the images do not align with the focus centre of the eyes.

So my assumption is that te weird aspect ratio of the S8 (18.5:9 instead of 16:9)  is causing problems with the two vr cameras and the 3d stereo view. The eye centers are not correct because the whole screen is being used for VR.

![screenshot_20171107-132803](https://user-images.githubusercontent.com/25610447/32493841-a6199282-c3bf-11e7-87d3-7662c42292f9.png)
 Are you receiving the "No DPDB device match" warning in the console? Which browser are you using? More importantly, are you using the WebVR polyfill? (can test quickly by checking the output of `navigator.getVRDisplays().then(console.log)`)

We've experienced similar issues when no or incorrect device data was found while using the WebVR Polyfill. It has fallback dimensions which vary in inaccuracy, and it can also calculate the wrong dimensions even on a successful device match if your device uses non-default resolution and the match's data doesn't include resolution specific PPI.

Sorry if this is off base; I don't have an S8 at the moment but we're currently testing across a broad range of devices prior to a product launch and I'm curious if this is related to what we've experienced. My recollection is that S8 forces full resolution for GearVR mode (actually never checked Daydream) but if you are invoking as Cardboard and not Daydream, the phone may use current resolution, which differs if in power saving mode for example (which I personally use whenever out of VR), and that may cause polyfill mismatch.  @mkeblx thoughts? - WebVR Polyfill Version: ^0.9.36
- [CardboardVRDisplay] 
<img width="1217" alt="screen shot 2017-11-08 at 10 50 22" src="https://user-images.githubusercontent.com/25610447/32542369-a8b2fc5a-c472-11e7-9e7e-a718e842dbab.png">

- i don't get a "no DPDB" device match warning
- @mkeblx phone is not in power saving mode
- here are the console errors when entering VR mode

<img width="558" alt="screen shot 2017-11-08 at 10 47 46" src="https://user-images.githubusercontent.com/25610447/32542269-4b67078a-c472-11e7-90dd-8f4a5e94061d.png">

Thanks for leading me trough this, for some reason I did not think about debugging the phone remotely. First time, yeey.
Please let me know if you need more information The same problem occurs with these samples Seems like WebVRRocks/webvr-polyfill-dpdb#25 is related Currently, I have the same problem with Samsung S7 Edge Thank you! Thank you very much.  Yes! With the workaround it works perfectly. So, isn't there a possibility to solve this issue without setting maximum resolution? Thanks a lot everyone. I am in brussels now at the w3c webvr authoring workshop and will try to have a talk with someone that works on the polyfill This was an issue with webvr-polyfil, so it should be fixed with this PR: https://github.com/aframevr/aframe/pull/3492

I think it's safe to close this issue. I'm afraid this seems to still be a problem - I'm using the `master` version of aframe with the latest polyfill and I am still having this issue on a Galaxy S8 when the display resolution is not set to maximum.

- A-Frame Version: 0.8.2 (Date 2018-06-12, Commit #01f2a5d)
- Platform / Device: Samsung S8 with Cardboard
- WebVR Polyfill Version: ^0.10.5
- Reproducible Code Snippet or URL: https://surf-jumper.glitch.me/ (it's just the basic aframe demo)

![image](https://user-images.githubusercontent.com/4929974/41462982-b3dcd1fc-708c-11e8-9ad8-eda572a59915.png)

 This worked for me, coupled with aframe-stereo-component, making use of stereo sky-box entity.


HTML File
```HTML
<script> var jandevice = 0;</script>
<!-- edited aframe json file check below recalculateDeviceParams_ ()--> 
<script src="/third-party/7e5b5c5/aframe-master.js"></script>

      <!-- HTML A-frame entities -->
      <a-entity camera look-controls position="0 0 0" stereocam="eye:left;"></a-entity>

      <!-- aframe-stereo-component enabled a-sky -->
      <a-sky id="sky1" src="#left" stereo="eye:left" phi-start="0"></a-sky>
      <a-sky id="sky2" src="#right" stereo="eye:right" phi-start="0"></a-sky>


<script defer>
  // calling this function when device is not found in DPDB 
  // currently I achieved this by a hackish way, saving an attribute to the main index file.
  // then editing the a-frame-master.js to send the variable over.

  var jandevicemsg = "";
  if(jandevice == 200) {
       jandevicemsg = ("Online device database has current device's global settings."); 
  }
  else if(jandevice == 404) {
       jandevicemsg = ("Online device database does not have current device's global settings."); 
       // where dpdb values not available, call offset function.
       offsetCameraJan();
  } else {
       jandevicemsg = ("VR SDK uninitialized : DPDB not searching for online device database."); 
  }
   alert(jandevicemsg);


  function offsetCameraJan() {

    var screenwidth = window.screen.width;
    var screenheight = window.screen.height;

    // screen height with 16/9 ratio
    var screenheightratiovalue = screenwidth * 16 / 9; 
    var screenoffsetheight = screenheight - screenheightratiovalue;

   // radian offset for screen's actual ratio difference from screen's 16/9 ratio
   // this part still a little iffy, the *2 might be because of the split screen, though it worked on my test phone for this value so hope to get some feedback
   // maybe there is a much more accurate formula
    var radiansoffset = (screenoffsetheight / screenheight) * 180 / Math.PI * 2;
    if(radiansoffset < 0) { radiansoffset = 0; } 
    var sky1 = document.querySelector('#sky1');
    sky1.setAttribute("phi-start", radiansoffset);
  }
</script>
```

Aframe-master.js
```javascript
Dpdb.prototype.recalculateDeviceParams_ = function () {
  var newDeviceParams = this.calcDeviceParams_();
  if (newDeviceParams) {
    
    // added the check jan device.
    jandevice = 200;
    this.deviceParams = newDeviceParams;
    if (this.onDeviceParamsUpdated) {
      this.onDeviceParamsUpdated(this.deviceParams);
    }
  } else {
    //jandevice
    jandevice = 404;
    console.error('Failed to recalculate device parameters.');
  }
};
``` I'm also getting the double-vision problem on a Samsung S8, with a Cardboard viewer and a standard WebVR sample (https://webvr.info/samples/03-vr-presentation.html?polyfill=1), with the resolution turned all the way up to 2960x1440. (I've tried all 3 available resolutions.)

By comparison, the same headset and scene align perfectly on an iPhone 6s.

Is there any other workaround besides changing the screen resolution?

EDIT: Here's the console output from the WebVR polyfill sample. This displays regardless of the resolution the Samsung phone is set to.
![console](https://user-images.githubusercontent.com/2423291/42894656-02b8468a-8a7d-11e8-8b92-61b3f2ef69c4.png)
 @naftalibeder I had success setting the camera offset value for S8.

Can try looking at the phi-start attribute for the stereo cam component.

```html
      <!-- aframe-stereo-component enabled a-sky -->
      <a-sky id="sky1" src="#left" stereo="eye:left" phi-start="0"></a-sky>
      <a-sky id="sky2" src="#right" stereo="eye:right" phi-start="0"></a-sky>
```

javascript method to find the value to offset.
to find the height value from a 16:9 ratio of the screen width
and calculating the radian value from the height difference
and setting the camera offset based on the radian value.
```javascript
    var screenwidth = window.screen.width;
    var screenheight = window.screen.height;

    // screen height with 16/9 ratio
    var screenheightratiovalue = screenwidth * 16 / 9; 
    var screenoffsetheight = screenheight - screenheightratiovalue;

   // radian offset for screen's actual ratio difference from screen's 16/9 ratio
   // this part still a little iffy, the *2 might be because of the split screen, though it worked on my test phone for this value so hope to get some feedback
   // maybe there is a much more accurate formula
    var radiansoffset = (screenoffsetheight / screenheight) * 180 / Math.PI * 2;
    if(radiansoffset < 0) { radiansoffset = 0; } 
    var sky1 = document.querySelector('#sky1');
    sky1.setAttribute("phi-start", radiansoffset);
```

Actually am quite looking forward to see if such a fix will solve yours as well or it has only fixed my specific device. I am having serious issues with this! What is the clear fix for it?  Per discussion on #3210. re: clicking - I can remove the toggling and just make click trigger play, to fix that.
re: first time DOM timing issue and WebGL errors - can you say more about your configuration / browser at the time?  always, or intermittent?  main page, or detail? OK I think those issues are addressed now
- click to play only, no toggling to avoid pause on mouse drag, etc.
- for main page, which uses MP4 and may not be streaming, don't shorten the a-assets timeout

https://github.com/chenzlabs/aframe-360-video-example  **Description:**

- A-Frame Version: 0.7.0, 0.7.1
- Platform / Device: Android 8, Nexus 6P, Iphone 6s+
- Reproducible Code Snippet or URL:

When you try to manually set rotation on camera it works fine on desktop, but has no affect on mobile devices, e.g.:
`  camera.setAttribute('rotation', {x:0, y:0, z:0});` wouldn't work @dmarcos
Thank you, i know that it is bad practice to manually set rotation, but i make it when user does not see anything and seems that is the only possible way in my situation. The idea is to make it possible for user to look at the object closer in special scene and communicate with it using rotation controls. So when user entering this scene his camera should be rotated straight  on the object despite in what direction he was looking before. So this is workflow for interaction: User goes throw scene A -> User clicks on object -> Scene switching animation starts -> User and object got moved to some specific place (scene B) -> Camera rotations sets straight to new object position -> animation ends, user is watching closely on the object.
The problem is that even if I use `cameraEl.setAttribute('look-controls', 'enabled', false);` and the user moves a phone just a little bit camera rotation would be set to its previous rotation from scene A. I think that's because our device is still physically in position looking on object in scene A. Maybe there are some ways to reset initial gyroscope values? So after switching to scene B '0 0 0' values for gyroscope would be set for physical position in which the phone is.  **Description:**

I could not find a reliable way to reliably disable default lights on an `a-scene` which is inserted from JavaScript rather than already present in the HTML. The closest I could get is https://glitch.com/edit/#!/substantial-latex?path=index.html:14:0 , and that does not seem to work on Chrome.

- A-Frame Version: 0.7.0
- Platform / Device: Linux, Firefox developer edition and Chrome 61
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/substantial-latex?path=index.html:14:0
 That does not work for dynamically inserted elements, which is why I opened this ticket. It only works for elements which are already in the HTML. "Whenever we add any lights, A-Frame removes the default lights from the scene." - Could you add your own ambient and directional lights with intensity 0 by default, then in JS remove them on page load?  Per discussion on #2830, this PR replaces the previous example of 360 video in the repo to redirect to an example Glitch.  The example takes advantage of recently-merged #3176 to show how a video can be specified as HLS and MP4.  The primary usage I saw was the sidebar link for 360 video, and rather than changing all of those links to point at Glitch directly (which is not versioned, so potential issues if we change things later), I changed the target to be a stub.  That also allows previous links to the destination from external sites or personal bookmarks to be redirected to the new Glitch.

Is there a list of all the other places to change?  Happy to change those to direct Glitch links where it makes sense As an example of the kind of concerns I have:

- The docs/primitive/videosphere.md page links to the edit page for a Glitch example.  It is unclear to me whether this example link should be changed or not.

- The Glitch example, when you go and look at it, is referencing an older version of A-Frame (0.6.1).  If there were breaking changes between 0.6.1 and now, the same Glitch would be stuck failing for one or the other, as the Glitch itself is not versioned.

- The Glitch example, when you go and look at it, has been edited (probably unintentionally) so that it is rotated 80 degrees instead of 180 degrees.  We need a way to make the Glitch viewable, but require remix to edit.

 ok - anywhere else? ok, so yes there is some confusion.

isn't the A-Frame homepage sidebar this?  (when you click it, currently goes to the boilerplate 360-video example not its source; this changes to go to glitch not its source, but could easily go to its source if that is what you wanted)
https://github.com/aframevr/aframe/pull/3210/commits/7309eca64660e6c7e494afdf7c031fd4e7b23b1a

and you'd simply like to revert this, leaving the previous example unchanged but no longer linked?
https://github.com/aframevr/aframe/pull/3210/commits/aeb4f8166176f37e58eb2d52ae77af87be46f583

 I did specifically ask about the existing documentation but no answer, only about site sidebar:
```
The docs/primitive/videosphere.md page links to the edit page for a Glitch example. It is unclear to me whether this example link should be changed or not.
``` got it, thanks!

The branch for this PR now has just the docs example link change.  Did you want to reopen this one, or have me do another PR?

The homepage link is in a different repo I presume, will find it and address there.  Using latest versions of A-Frame on Android Mobile and iPhone iOS 11

Im using a-frame and a-video with videos in webm and mp4 formats, android and iphone.
With webm all good. With mp4 all good in both platforms also except for one thing that is causing me trouble. When I put the video in loop mode, loop is true, then when the video arrives to the end, and before restarting, the video texture goes black, black rectangle for like 1 frame and then restarts again from the beginning normally. Also when the video gets activated for the first time following the click on a button by a user, again for like half a second the video appears like a black rectangle and then starts playing well and normally. 

What happens when playing the video the first time I can understand as maybe after the button click the video is still loading and that´s why it appears black for half a second. If that´s the case how can prevent the video to show until it is fully loaded?

But the second  case I don´t understand. When the mp4 is set to loop, between end of video and beginning again, it  appears black for a frame or so. Why is that happening and how can I prevent it?
By the way I have noticed that these issues seem to happen more with the iphones than the android, although it happens in both. Thank you for any help

`  <a-video class="video" material="shader: chromakey; src: #video; color: 0 0 1" webkit-playsinline playsinline width=1 height=1 position="0 0 0" rotation="0 0 2" autoplay="true" loop="true"></a-video>`
  I've added a click and mouseenter listener on my cursor but it seems to only work after i open the aframe inspector ( ctrl + alt + i ), it also works using my mouse instead of the cursor (but then not compatible with phone or VR glases) .Any ideas why this could be happening ? I am facing the same problem. Did you find a fix for this? I noticed that with primitives it will work. Objects with custom models will have their size not matching the object size. This will cause the raycaster to not register the clicks. Try using the "geometry='primivitve: box'" on your custom model and you'll notice a tiny box on loading the scene. After opening the inspector it seems like it recalculates the width and height of the objects so the raycaster intersects properly with the objects. Thank you it worked ! I hope they get the problem fixed Sure. 
Here is the code i use for the cursor (when the users on mobile)
cursor.setAttribute('id', 'cursor');
cursor.setAttribute('fuse', 'true');
cursor.setAttribute('fuseTimeout', '500');
cursor.setAttribute('raycaster','objects: .collidable');
camera.appendChild(cursor);	

and then the only thing i do is i create an a-obj-model tag that uses a .obj file to "render" ( not sure for the use of the word) like : 
-var b=document.createElement('a-obj-model');
b.setAttribute('class','collidable');
b.setAttribute ('src','media/pininfo.obj'); //src of my 3D object
// then i added it to the scenes (there are others attributes I set like scale, position, rotation, look-at and maybe some others). And also click event (that trigers with the fuse time out) 
The funny things is i just put an invisble cube in front of one my 3D obj to do the first interaction (with the click event) and then all 3D objects seem to work normally (there is maximum 10 3D obj in average in my scene). Hope it helps !  Ah sorry i'm affraid i can't  I had the same problem and spend the last two days finding out what is going on. It seems that the internal array of the objects the raycaster tries to intersect with only gets populated once on startup. After that, the custom models are loaded, but the internal array of the raycaster does not get updated. My solution was to call raycaster.refreshObjects() AFTER the models had loaded.  **Description:**

Currently, one of the barriers to supporting multiple scenes (see #916) on the same page is that components and systems do not interact correctly when multiple scenes exist.

Each scene contains its own systems, but the last scene to initialise always overwrites the global `Component.__proto__.system` property of its components. This means that systems and components for earlier scenes no longer function correctly (for instance lights don't attach themselves to their correct lights system, meaning default lighting isn't disabled).

This fixes that by initialising components _after_ they have been attached to the scene, and setting their `Component.system` instance property to the correct scene system. Any attempts to update component properties before this happens are queued and then processed after attachment and initialisation; However DOM updates still occur as expected, to ensure DOM manipulation and debug serialisation still all work as expected.

**Changes proposed:**
- `Component.__proto__.system` is now longer set by systems upon system initialisation
- Component initialisation now occurs as a result of the `load()` callback and `updateComponents()` once the entity has been attached to a scene
- Component initialisation sets its local `system` by accessing its local `el.sceneEl.systems`. This occurs immediately within the `Component` base ctor, before local construction and `init` occurs.
- Attempts to update the properties of components before initialisation occurs succeed successfully and update the DOM where expected. The actual component update, however, is queued and only executed once `updateComponents()` has been called on the attached parent entity. I also started clearing sceneEl on entity detach, but this was breaking unit tests, so I undid that.

This feels like a dependency on broken behaviour?

The docs simply say "An entity has a reference to its scene element.". Which would indicate to me it would be null if an entity was no longer attached a scene.

But if it's cleared on detach things break, so I set it back to lingering on whatever it used to be :S Okay, there's also a few tests that intentionally try and access the raw component objects of entities before they're attached to a scene, or attach entities to a `<body>` instead of an `<a-scene>`. These fail :S

I'd be in favour of adding a caveat rule to the first (that the entity must be in a scene before the component objects can be accessed), in order to support multiple scenes, and changing the latter as it feels like incorrect/undefined behaviour.  Currently using the latest versions on PC/Mac/Android/iPhone
My issue is about video formats.
Webm works great but it's not accepted by Apple/iOS.
So I'm looking for an alternative video format that supports Alpha Channel for Apple.
I have tried MOV but it is not playing with aFrame.
What video format does aFrame accept that has alpha channel and is accepted by iOS devices?

It also seems impossible to find anywhere which are the video formats supported by a-Frame. 

The only alternative I found for apple was to use animated gifs with the plugin from mayognaise, but that has a big issue, flickering caused when clearing the canvas in between each frame. 

It would really be great if you actually told me that there is a alpha channel capable video format supported that works on iOS, as I say documentation about the video formats seems impossible to find

Thank you at the end of the day what I need is with a very short video, use alpha transparency that works on both android and iOS,  I Can use a video format , I can use animated GIFS, I can use mp4 and mask out the background color which is constant if that's a possibility, but there must be a way, in android it's so easy with Webm, but ive been all day researching and I cannot find anywhere any way in Safari iOS to put in A-Frame a video with alpha transparency that is recognized by A-Frame and Safari/iOS, 

Video formats: Webm for Android, for safari iOS?
Animated GIFS: The animated gif component has unsolved issues with flickering after clearing canvas in between each frame
Masking out the background of an mp4: no idea if this is possible

any tips? than you again Is this an A-Frame issue, or a question?  IIRC, questions should usually be directed to stackoverflow.com; it sounds as though you are looking for a specific answer on Safari browser video support.

As I understand it, the usual technique is to use a custom shader to make the desired color from the video transparent / not visible. Thank you machenmusik, I will redirect this to slack or other forums then, btw I did exactly that now and it works, an mp4 video with a chromakey shader and that works, however the mp4 video shows well on desktop but shows black rectangle on android

I just checked that mp4 works all well in both desktop and android mobile, it is the addition of the chromakey material that fails on android mobile but works on desktop

 <a-video javi1 class="video" src="#video" webkit-playsinline playsinline width=1 height=1 position="0 0 0" rotation="0 0 2" material="shader: chromakey; src: #video; color: 0 0 1" autoplay="true" loop="true"></a-video>

 You may need to  check the shader for assumed features  or extensions unavailable on mobile.  A codepen / gist / jsfiddle / glitch example can help others examine  thank  you dmarcos, I just raised the issue, and I also discovered something very key:

If i use the chromakey material within the `<a-video>` element, the problem happens
If i use it within a `<a-entity`> element, then  the problem does not happen.

So with `<a-entity>` all works well, but with `<a-video>` it fails.

I would prefer to use it with `<a-video>` it would be better for me for a few reasons, any idea why it works with a-entity but fails with a-video?

This works on both android mobile and desktop:
`<a-entity material="shader: chromakey; src: #video; color: 0 0 1" geometry="primitive: box"></a-entity> `

This works on desktop but fails on android mobile:
`<a-video class="video" src="#video" webkit-playsinline playsinline width=1 height=1 position="0 0 0" rotation="0 0 2" material="shader: chromakey; src: #video; color: 0 0 1" autoplay="true" loop="true"></a-video>
` ok now I know whats going on , I just need help to fix it.

The problem is not a-video or a-entity, it should work ok with a-video.

reason is that in mobile the video is not being started and that's why it shows black,

```
when I use a-video, I start the video on user click like this:
 var els = document.querySelectorAll('.video')
    Array.prototype.slice.call(els).forEach(function(el) {
      el.components.material.material.map.image.play()
    })

```
and this works perfect on both desktop and mobile, when I dont use the shader material
`<a-video id="vidactivate" class="video"  src="#video"></a-video>`

but when i add the shader material:

`<a-video id="vidactivate" class="video" material="shader: chromakey; color: 0 0 1" src="#video"></a-video>`

now the same code to start the video on user click fails, maybe because I have two src="#video"?

how should I change the following code to start the video correctly when I have the chromakey material embedded in a-video?

```
 var els = document.querySelectorAll('.video')
    Array.prototype.slice.call(els).forEach(function(el) {
      el.components.material.material.map.image.play()
    })

```


 I could not test on iOS yet, im sure the same problem happens. But listen, I found the reason now, the last stuff I wrote. It's just that when I embed the material in the a-video

`<a-video id="vidactivate" class="video" material="shader: chromakey; color: 0 0 1" src="#video"></a-video>`

my code to start playing the video fails. That's why it works on desktop (where autoplay works), but not on mobile because on mobile user has to click and the play has to be done manually, and that code to manually play the video is failing  `<a-video id="vidactivate" class="video" material="shader: chromakey; src: #video; color: 0 0 1" src="#video"></a-video> , the correct line` i further simplified the line 
 ` <a-video id="vidactivate" class="video" material="shader: chromakey; src: #video; color: 0 0 1"></a-video>`

and i confirmed it, when  i leave autoplay on it all works, when  i remove it it fails, thats why it works on desktop and not on mobile, my code to manually trigger the video works all great when the chromakey stuff is not embedded in a-video but when i embed it then that code to manually start the video fails What is the javascript code you are using to manually start the video file?  A very common mistake to make is that the `a-video` element does not have the API for media control, that's on the `video` element.  So here you would do something like `document.querySelector('#video').play()` not `#vidactivate` Thank you machenmusik, 
I fixed it now, the keys here were two, first to have a single src parameter and to have it within the material, and second to correct the trigger to adapt to that, this second one connects with what you just described,
`<a-video class="video" material="shader: chromakey; src: #video; color: 0 0 1" webkit-playsinline playsinline></a-video>`

`var videoEl = document.querySelector('#video');videoEl.play();
`
thank you for your support and i will close this issue now, all best ;) Hello @javismiles 
Good that you have found a solution, alternatively have you evaluated APNG?

APNG support is increasing:
https://caniuse.com/#feat=apng

By the way I'm trying to test video ( without alpha) with iOs® using `webkit-playsinline` and `playsinline`but the video does not start, do you have a working example ( with and without alpha)?
Thank you.  **Description:**

- A-Frame Version: 0.7.0
- Platform / Device: Firefox 56.0.2, Windows 7
- Reproducible Code Snippet or URL: https://aframe-gltf-loading.glitch.me/

I'm sure I'm missing something, but I'm seeing something strange happen. In the glitch project linked above, the gltf model fails to load and the `a-assets` event `loaded` fires. However, if I change the `a-asset-item` tag to `a-asset`, the model loads and displays just fine, but the `a-assets` event `loaded` never fires.

To be clear, based on the documentation I would expect to be able to use the `a-asset-item` tag and have the `a-assets` event `loaded` fire after the page has loaded the model.

Thanks! Thanks both for the fast replies! Good to know about the `response-type="arraybuffer"` bit. That solves this, and makes everything behave as I expected. It doesn't appear to matter what the tag name of the glb asset file is. I suppose that's known, though it was news to me.  Nevermind about `a-asset-item` working with any tag name. The model does load just fine with a different tag name (e.g. `<asdf-item>`), but the `loaded` event then never fires on `<a-assets>`.  Less ambiguous date format.

**Description:**
Fixes #3202 

**Changes proposed:**
- Use ISO8601 Format
- Dates will be YYYY-MM-DD

 As I mentioned in #3202, the current format is ambiguous - both for humans and machines.

I'm European, and often find it confusing working out whether 05-10-2017 is in October (as we would write it) or May as Americans would write it.

Similarly, computers parsing log messages will find it easier to ingest the standard ISO8601 format - which is used all over the web. ISO8601 goes largest element to smallest element. Year-Month-Day Hour Minutes Seconds.

I would expect most JS programmers reading the logs to be familiar with it.

* It's the [HTML standard way of representing time](https://www.w3.org/TR/html51/infrastructure.html#dates-and-times)
* [Schema.org](https://schema.org/Date) uses it
* [RFC 3339](https://www.ietf.org/rfc/rfc3339.txt) is functionally identical and commonly used.
* As noted in the PR, JavaScript uses it as [`toISOString()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toISOString)
* [Keep A Changelog](http://keepachangelog.com/en/1.0.0/) also recommend that format.


If you want reduce confusion, you could use [RFC 822](http://www.rssboard.org/rss-profile#data-types-datetime) which looks like `Mon, 15 Oct 2007 14:10:00 GMT` - but that will be confusing to people who don't speak English as the month names will be different.

As I said, I found the logs confusing. I think this simple change would improve things. So I do think there is confusion between mm-dd-yyyy and dd-mm-yyyy, the most common occurrence for me (as I am not European) being travel documentation... but when year comes first it is understood to be yyyy-mm-dd since no one appears to use yyyy-dd-mm (thanks ISO8601 and friends)

> In computer world I personally always assume that month goes first.

If the vast majority of programmers agree with the personal assumption, then agreed not much impetus to change; however if there is significant confusion, this seems like a simple enough change to make

 Thank you 😀  **Description:**
The IIFE in the example code is supposed to be the outer function, not the inner function.
**Changes proposed:**
- Fixed the typo
 Aren't we finding ourselves replacing IIFE and closure variables due to issues like #3200?  are these related #594  Can not play video, only sound no video，why？ `<meta name="apple-mobile-web-app-capable" `content="yes">`
`	
<a-scene >

		<a-assets>
			<video crossorigin="anonymous" id="v" webkit-playsinline="true" playsinline="true" autoplay="true" loop="true" src="07.m3u8" type="application/x-mpegurl"></video>
		</a-assets>

		<a-videosphere id="videosphere" ios10hls rotation="0 -90 0" src="#v" visible="true" autoplay="true" loop="true"></a-videosphere>

		<a-camera mouse-cursor wasd-controls-enabled="false">
		</a-camera>
</a-scene >
 Is there a cross-domain reason? thank you very much，but ios11 Still can not play VR video . m3u8 format @ngokevin  ios11 Still can not play VR video too ，no matter which format i have solve the problem by creating a button to play  After downloading the latest version of Aframe, look-controls is no longer working. 
When using version 0.6.1 and earlier, everything works fine.

Based on a simple diff between the two versions shows some changes in the look-controls.js file regarding Rotation calculation.

Maybe you can let me know what I have to change (setting properties or similar) to get the basic functionality back. 

many thanks

- A-Frame Version: 0.7.0
- Platform / Device: Android 5.1.1 / Epson Moverio BT-300 / Chrome 59.0.3071.125
- Reproducible Code Snippet or URL:
`        

            <a-entity id="cameraCursor" camera="userHeight: 1.6" 
                look-controls 
                wasd-controls>
                <a-cursor id="cursor" radiusInner="0.01" radiusOuter="0.02" color="white"></a-cursor>               
                <a-text value="Camera Position" color="#BBB" position="0.1 0.1 -2" scale='0.3 0.3 0.3'></a-text> 
            </a-entity>

            <a-sky id='sky1'
                color='#000000' 
                transparent='true'>
            </a-sky>

            <a-sphere menu_over color="blue" radius="5" position='0 0 -15' 
                    material='wireframe: true; wireframeLinewidth: 1'></a-sphere>
            <a-text menu_over value='Enter the new World!'
                    color='yellow'
                    position='4 4 -15'
                    scale='4 4 4'></a-text>
            <a-entity gridhelper='size:10000, divisions: 1000000, colorGrid: blue' position='0 -1000 0'></a-entity>
`

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Tracing the console output of the device shows that with the original 0.6.1. aframe-master.js (working version) a warning + error + waring was thrown:
 aframe-master.js:63176  No DPDB device match. 
 aframe-master.js:63111 Failed to recalculate device parameters.
 aframe-master.js:61110 Using fallback Android device measurements.

Corresponding functions:
Dpdb.prototype.calcDeviceParams_
Dpdb.prototype.recalculateDeviceParams_
DeviceInfo.prototype.determineDevice_

In the latest 0.7.0 version, this is no longer the case - no error and no warning. 
I also recompiled the 0.6.1 version myself (npm run dist) and now even with this new version I do get the same behaviour as with 0.7.0. 
So it looks like this error/warning have been fixed there already but was not in the aframe-master.js

This part of the code seems no longer be executed with 0.7.0 (and also the recompile).


 More tests did show that navigator.getVRDisplays() does not return any thing in the newer versions while in 0.6.1 master it returns a CardboardVRDisplay.
`Array(1)
0
:
CardboardVRDisplay
bufferScale_
:
1
cardboardUI_
:
null
deviceInfo_
:
DeviceInfo
displayName
:
"Cardboard VRDisplay (webvr-polyfill)"
distorter_
:
null
dpdb_
:
Dpdb
poseSensor_
:
FusionPoseSensor
viewerSelector_
:
ViewerSelector
__proto__
:
VRDisplay`

What can be the reason for this? Hi, I took a copy of the repository and tried to run it locally but I only receive a black screen with the menu on the top right (Fullscreen | VR(WebVR/Mobile only) | Reset). No errors in the console during the initial load.

I also tried the mentioned examples in the Readme.md file "https://webvr.info/samples/" but they all mention that no VR display can be found.
I wonder what was overwriting the navigator.getDisplays() function as it works with 0.6.1 and do not with later versions? Thanks a lot for your response! Question is why was it working in older versions? Did A-Frame not use Webvr-polyfill? How, where and on which criteria does webvr-polyfill check if a device is supported? 
Three.js deviceorientation examples are working fine on the device, so shouldn't this than be de-coupled anyway from the Display? 
In the older version it was recognized as CardboardVRDisplay. Is this not/no longer supported in webvr-polyfill? many thanks! Many, many thanks for your advice. This solved at least my issue. 
Changed aframe-master/package.json file, dependencies from "webvr-polyfill": "^0.9.36" to  "webvr-polyfill": "0.9.36" and generated a new js file (npm run dist) - and it works again. 
This proofs that version 0.9.40 (which was used due to the compatibility marker) is eliminating several devices. This is maybe also the solution for #3087.
How to proceed with this? should we open an issue on webvr-polyfill for this?
Thanks!! This issue still exists in aframe@0.8.2 & webvr-polyfill@0.10.5. Any ideas/suggestions how to fix this? When I add a single entity (just a box) with a camera of look-controls, as per docs, on mouse drag, entity should get rotated but the camera is rotating & view angle is getting changed.

Device: Google Chrome is up to date, Version 68.0.3435.0 (Official Build) canary (64-bit)
I'm trying to host the example. I will revert with the link very soon Thanks for your reply. So, here is my [glitch](https://grandiose-gong.glitch.me/) which is very basic one. If you look at the HTML, the camera entity has got only look-controls. So as per docs mentioned [here](https://aframe.io/docs/0.8.0/components/look-controls.html), on mouse drag, the box entity should get rotated, instead, camera angle is moving. May I know how to make the box-entity rotate?

I remember this use to happen before.


      <a-scene>
            <a-entity position="0 0 5">
              <a-entity camera look-controls></a-entity>
            </a-entity>
      <a-box position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9" shadow></a-box>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>

 oh now I understood. Appologies to bother you & thanks a ton.  nice catch There is a this.everGotGamepadEvent variable in gearvr-controls.js that seems unused, you may want to remove it too.  
- A-Frame Version: 0.7.0
- Platform / Device: Windows 10, Firefox 56 (64 bit), Oculus HMD and Oculus Touch Controllers
- Reproducible Code Snippet or URL: see attached file - index.txt

In 0.7.0 (this does not happen in 0.6.1) if an a-entity has a hand-controls component AND a laser-controls component then the Oculus touch model is displayed instead of the hand model.
[index.txt](https://github.com/aframevr/aframe/files/1406944/index.txt)

[Incidentally I originally created this example with the angle tool. However that is still generating files using version 0.6.1]  This may well be me misunderstanding something, but it seems that from version 0.6 onwards, removing an `a-entity`'s attribute does not cause a component update. Its internal data caches the previous set value. I believe previous versions fell back to the default value if an attribute was removed. 
This makes it difficult to manage dynamic state components with optional props. Unless there is another way to signal/detect that change to the component?

This codepen highlights the example: https://codepen.io/vasturiano/pen/pWBXJa

`v0.7.1`:
```
(Initialize) undefined -> 0
(Setting prop=1) 0 -> 1
(Remove prop) 1 -> 1
(Setting prop=1) 1 -> 1
(Remove prop) 1 -> 1
(Setting prop=2) 1 -> 2
```

`v0.5.0`:
```
(Initialize) undefined -> 0
(Setting prop=1) 0 -> 1
(Remove prop) 1 -> 0
(Setting prop=1) 0 -> 1
(Remove prop) 1 -> 0
(Setting prop=2) 0 -> 2
```

- A-Frame Version: 0.6.0 and up
- Platform / Device: Chrome
- Reproducible Code Snippet or URL: https://codepen.io/vasturiano/pen/pWBXJa
  **Description:**

- A-Frame Version: 0.7.0
- Platform / Device: chrome
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

hello i tried to merge two objects with this simple code

```
<a-entity id="target" geometry="primitive: box; buffer: false; skipCache: true" material="color: red"></a-entity>
<a-entity geometry="primitive: box; buffer: false; skipCache: true; mergeTo: #target"
          material="color: red" position="1 2 3"></a-entity>
```
and i receive this error

**ERROR Error: Uncaught (in promise): TypeError: Cannot read property 'isPlaying' of null
TypeError: Cannot read property 'isPlaying' of null**

how is possible? i just tried the example of this page

https://github.com/aframevr/aframe/blob/master/docs/components/geometry.md
 i tried but i have difficult to add the mesh to the component. 

i've tried this simple code

```
 AFRAME.registerComponent('mysquare', {
      init: function(){
        var el = this.el; 
        
        var box = new THREE.BoxGeometry(40, 5, 40);
        var boxMesh = new THREE.Mesh(box);
        boxMesh.position.set(25, 0, 25);
        el.setObject3D("mesh", boxMesh);

      }
    })
```
i receive this error message

**ERROR Error: Uncaught (in promise): Error: `Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.
Error: `Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.
    at HTMLElement.value (aframe.js:73911)
    at NewComponent.init (main.js:407)
    at NewComponent.updateProperties (aframe.js:75409)
    at HTMLElement.value (aframe.js:74256)
    at HTMLElement.Object.create.updateComponents.value (aframe.js:74228)
    at entityLoadCallback (aframe.js:74023)
    at emitLoaded (aframe.js:74844)
    at t.invoke (polyfills.js:3)
    at Object.onInvoke (vendor.js:4247)
    at t.invoke (polyfills.js:3)
    at HTMLElement.value (aframe.js:73911)
    at NewComponent.init (main.js:407)
    at NewComponent.updateProperties (aframe.js:75409)
    at HTMLElement.value (aframe.js:74256)
    at HTMLElement.Object.create.updateComponents.value (aframe.js:74228)
    at entityLoadCallback (aframe.js:74023)
    at emitLoaded (aframe.js:74844)
    at t.invoke (polyfills.js:3)
    at Object.onInvoke (vendor.js:4247)
    at t.invoke (polyfills.js:3)
    at c (polyfills.js:3)
    at polyfills.js:3
    at t.invokeTask (polyfills.js:3)
    at Object.onInvokeTask (vendor.js:4238)
    at t.invokeTask (polyfills.js:3)
    at r.runTask (polyfills.js:3)
    at o (polyfills.js:3)
    at <anonymous>**

i tried also the 'add' function but i receive the same message. how is possible?  **Description:**
If you use a template and inject offline AFrame components, these won't ever be initialized in the live DOM world once appended.

```js
var scene = '<a-scene><a-box color="red" position="0 2 -5" rotation="0 45 45" scale="2 2 2"></a-box></a-scene>';

var template = document.createElement('template'); // use 'div' in Chrome
template.innerHTML = scene;
document.body.appendChild((template.content || template).firstElementChild);
```
However, if you change `template` with `div`, as example, you'll see that once appended everything is fine.

This makes AFrame component not suitable for any library that creates them via modern template.

Please note this is a **Chrome** bug only, and I'm not sure if I can fix it via document-register-element polyfill because apparently you are using your own fork.

- A-Frame Version: 0.7.0
- Platform / Device: Chrome (V0 native)
- Reproducible Code Snippet or URL: https://codepen.io/WebReflection/pen/xXMxEO?editors=0010

 OK, without using any library, I can confirm this is an issue with Chrome and native V0 API

If you try this code, you'll see only V1 on the page. Change the string `template` with `div` or any non template element, and it works for both V0 and V1.

```js
document.registerElement(
  'a-test',
  {
    prototype: Object.create(
      HTMLElement.prototype,
      {
        attachedCallback: {value() {
          this.textContent = this.getAttribute('test');
        }}
      }
    )
  }
);
customElements.define('b-test', class extends HTMLElement {
  connectedCallback() {
    this.textContent = this.getAttribute('test');
  }
});
var template = document.createElement('template');
template.innerHTML = [
  '<a-test test="V0"></a-test>',
  '<b-test test="V1"></b-test>'
].join('');
document.body.appendChild(template.content || template);
```

Is AFrame planning to migrate to the V1 part of this polyfill ?

I am not sure I should try to patch a death API, please let me know what are the plans.

If you were on V1 already, every browser would work without any issue with templates.

Best Regards > I have not seen the need for them in my own work either

both [hyper](https://github.com/WebReflection/hyperHTML) and [lit](https://github.com/PolymerLabs/lit-html) HTML, to name just two, use templates to smart-render DOM.

People then [blame the library](https://stackoverflow.com/questions/46797635/aframe-content-not-rendering-on-chrome-with-hyperhtml/46817370) ignoring the V0 vs V1 eternal battle when it comes to Custom Elements, hence I'm here to offer help because I want _hyperHTML_ to work with A-Frame too, it'd be a shame if it cannot.

But there's more to that ... let me explain

> Any other benefits of migrating to V1?

V1 is the only API that has been approved and adopted by all browsers.
By moving to V1 you automatically have:
  * a future proof code that at some point would not need any polyfill at all (with V0 you are stuck with my poly forever but I won't necessarily patch a death API, it's unsustainable work for me)
  * a native hook within the browser, instead of JavaScript hacks provided by my lib
  * classes to develop components instead of the ugly V0 API ... classes can be safely transpiled thanks to [my babel helper](https://github.com/WebReflection/babel-plugin-transform-builtin-classes)
  * better primitives and performance, every attribute triggers changes in V0, only explicit attributes per class trigger changes on V1
  * compatibility with modern templates hence all new libraries that will use the same hyperHTML template-once pattern

Alternatively I'd need to force V0 polyfill even on Chrome, since it might also ditch V0 at any time soon, making AFrame lose its only native supporter at this time.

**So** ... what are the issue you need to patch in V0 ? > The reason we moved to a fork is WebReflection/document-register-element#55

that's a bug report without any answer ... last message is this one:
https://github.com/WebReflection/document-register-element/pull/55#issuecomment-234586837

are you sure you still need that fork? your version might be behind various other fixes/changes

> It has served us well, bug free for more than a year now. 

yeah, DRE is battle tested since about ever: Google AMP, StencilJS and others use it too, happy it works

> if it ain't broke, don't fix it

by definition, Software needs updates/maintenance though ... in this case you have a little issue ... 

> When can we expect V0 to be dropped?

V0 has never landed anywhere, it's dropped since ever.

V1 though, is native in Safari for mac/iOS and Chrome, mobile and Desktop.
That's 70% of the Desktop + 90% of the Mobile Web ... V0 is only and maybe Chrome

If you care about even more robust code and better performance for the majority of the Web, keeping AFrame in V0 is the wrong choice.

If you could tell me what exactly you need/why and how V1 does not work already, I'd be happy to try speeding up needed fixes.

Regards > in case you're interested in volunteering/contributing in testing A-Frame with CEv1

unfortunately I don't have much extra time these days, but if you need any help at any point ping me.

I'll leave this open since it's still a bug to me, feel free to close it though. **FYI** and FWIW [hyperHTML](https://github.com/WebReflection/hyperHTML) now supports AFrame elements (hacked around the issue in core) as you can see in this [Code Pen](https://codepen.io/WebReflection/pen/xXMxEO?editors=0010) at this point I also wonder if you'd be interested in this new polyfill I've just backed, fully based on document-register-element code (but it weights 2.9K instead)
https://github.com/WebReflection/ce-v0

### Features:
  * it's V0 only, no code and issues related to V1
  * it uses V1 when available to mimic V0 behavior. You go native on Safari/WebKit browsers doing nothing on your code
  * it uses exact same code DRE uses for every other browser. No compatibility issues (but I need to validate this putting in same tests DRE has)
  * even if based on V1, it notifies about every attributes like V0 does
  * it's easier to maintain, it doesn't lock you in its V0+V1 logic as it is for DRE
  * it does NOT bring in built-in extends (AFAIK you don't need them) so it still promotes V1 good practices

thoughts ? P.S. [live tests](https://webreflection.github.io/ce-v0/) works on every DRE target browser including IE9

You could also define AFrame components via the Component utility (actually, this independently of the rest of the slimmed down polyfill).

Example:
```js
var MyElement = new Component({
  // the Custom Element name
  name: 'my-element',
  // one or more static property
  static: {
    TEST: 123,
    method() {}
  },
  // alias for createdCallback
  constructor() {},
  // alias for attributeChangedCallback
  onattribute() {},
  // alias for attachedCallback
  onconnected() {},
  // alias for detachedCallback
  ondisconnected() {}
  // any other prototype definition is allowed
  // including getters and setters
});
``` hyperHTML V2 is landing tomorrow and every issue here has been solved.

I still suggest you drop my old poly and use ce-v0 for your components, you'll reduce bundle size and improve performance, but ... hey, it's your call. Just so you have the feedback - I was bitten by this as well. Jumped in to a-frame, new to the webvr space, but very experienced with web components v1.

Created my project with my normal workflow, created custom elements wrapping a-frame scene, etc...

Nothing worked.

I love a-frame, you guys are doing an amazing job, but v1 is the future, looking forward to when I can use a-frame in the modern web components ecosystem.

Also happy to help with porting.  **WebXR bindings**

**Changes proposed:**
- add XREffect
- add XRControls
- add xr-anchor component
  Fixes #3173.  Added test and converted 360 video examples to ensure visibility of correct behavior. > Is it awkward since while videos can be loaded, the a-assets doesn't match the support?

Well, given that the source element for video is often used when the browser should pick from given alternatives, I'm not sure how a-assets should work, which one should it load and wait for, and what if it doesn't match the browser?  I think a note that video using source elements can't be preloaded via a-assets would be fine.  Perhaps that warning should still fire if no src/srcObject attributes (i.e. eliminate that querySelector addition).

For media assets of considerable size, I don't think that preloading every possible variant because we don't know which will be used is a good idea.  Also, streaming assets may not be preloadable, since they may not terminate.  But having a generic way for `a-asset-item` to specify multiple explicit URLs to load would be OK in my book, and might also help the gilt plus associated files problem, if a component could be used on `a-asset-item` to generate the srcs list. Streaming plays like any other video texture.

You don't need to use a-assets unless you want to block the entire UI to load (large) video files, which IMO is actually a bad thing to do in general even with existing src-attribute MP4 files.  (Or giant model files, etc.) IMO, using inline URL tends to be part of the problem, because no one can figure out where the actual media element is to be controlled (which is a FAQ) -- better to append a child video element with whatever you want to scene (outside a-assets) and reference by id/selector it's A-Frame that creates it
https://github.com/aframevr/aframe/blob/master/src/systems/material.js#L144 True, but that's kinda gross.  (Maybe an accessor function on the material component would be nicer.)

Are you requesting more changes here (e.g. reinstate a-assets warning) ?

I think the value of being able to play videos that use source elements, even though they won't be preloaded, is worth the small disconnect (especially if the warning is reinstated and/or tweaked to explain) > is there a common need to support multiple video formats?

Sadly, yes at the moment, as there is not quite a common set of codecs and formats that are supported by all browsers.  For example, no one seemed to notice that examples/test/videosphere is using webm which apparently fails in Safari.  H.264 and MP4 is probably closest at the moment for video, but even then there are outliers like experimental Chromium which do not support. So A-Frame and THREE are perfectly capable of supporting video that does not appear in a-assets, and as we have discussed a significant number of video use cases really don't want to incur preload for hundreds of megabytes or more of video, especially inadvertently on mobile.

My suggestion is to continue to document how to use video with src attribute as has been common A-Frame practice for a while, but also to point out that non-preloaded video elements also work (once we merge this PR) with examples including WebRTC and videos with source elements.

I would also suggest we think about whether we want to continue encouraging use of a-video and a-videosphere components, or would rather discourage in favor of something else like a third party component. @cvan brought up audio, i agree that is different, as preload mistakes are in the single to double digits of megabytes which is less fatal.  Multiple video source support is useful and often needed, it's not about Chromium specifically.

Question, do we find browser caching (often on mass storage and not purely RAM) to be unreliable so we want to use THREE caching (which is in RAM by necessity and thus bloats footprint) ? There is no video.src provided when you use source elements.  That being said, we can require use of element id in those cases @ngokevin yup. The problem with MP4 is that it doesn't do live.  (But that's the other discussion) Latest version correctly gives a-assets warning for examples/test/videosphere (which still works anyway if you're not using Safari), and also correctly gives no warnings for examples/test/video. Can not play VR video on ios[#3192](https://github.com/aframevr/aframe/issues/3192)  ios11 Can not play VR video, m3u8 format Yes, there appears to be a regression in iOS 11 Safari behavior unfortunately, see discussion here: https://github.com/aframevr/aframe/pull/2830#issuecomment-338946580  So can you guys clarify whether video playback actually doesn't work in these scenarios, or whether it's just preload and/or caching? I do understand @dmarcos @ngokevin viewpoint that if it can be done without explicit core support, it is useful to allow external components to provide the functionality unless/until there is a clear candidate to integrate into core.

My understanding, correct me if I'm wrong, is that those playing video on the web are often using something like video.js or other player frameworks.  So maybe the use case to consider is, can A-Frame support the video element usage of the most common player frameworks?  If not, then there are presumably gaps worth addressing in core. > I think it's simpler to prescribe not using a video player framework, it adds a lot more uncertainty.

IMO, that's a little like prescribing not using frameworks atop WebGL.  Simpler, but perhaps less useful. Yes, my point is that useful frameworks distinguish themselves over time, and to stipulate that you can't use them makes the overall solution less useful.  I think we are all hoping that any of the WebVR frameworks proves as useful as THREE has for WebGL, or as others have for video. The basis for video support in A-Frame is (a) the THREE standard and flat shaders accepting src texture, and (b) helper code that lets one specify the media element and the combination of A-Frame and THREE take care of the rest.

Supporting source elements requires no work for (a), AFAIK, and some very specific but clear changes @cvan identified for (b) - several of which are actually cleaner like using properties directly rather than via getAttribute.

Is there a specific objection?  I think most of the complexity around video is around (1) user gesture requirements on mobile, which A-Frame can't solve (2) unsupported codecs and formats, which source element support was specifically designed to mitigate (3) browser quirks especially Safari and iOS which we are considering dropping.

Why not support the intended solution for (2) as @cvan asks?  The browsers will already have done the heavy lifting. From 
https://github.com/aframevr/aframe/blob/master/src/core/propertyTypes.js#L87

```
// Pass through media elements. If we have the elements, we don't have to call
// three.js loaders which would re-request the assets.
```

Maybe we should just be taking the media elements, which the browsers cache as they see fit or are instructed (and thus never having three.js loaders re-request) - inline video urls would then need to be specified as video elements, so it becomes simple to answer the question of how to control the video.... widespread usage of inline forms of `a-video` and `a-videosphere` may be the root of many FAQs on video. @cvan can you confirm it's just cleaning up getAttribute / hasAttribute usage?

@ngokevin I share concerns over complexity for caching etc. and also unwitting preload of giant video files that exacerbate memory constraints, do you think we should take specific steps to avoid? Let's move from abstract to concrete discussion on #3176.  Only slightly more than getAttribute / hasAttribute, have a look.  **Description:**
	<a-scene>
	<a-assets>
		<a-mixin id="corn" 
			geometry="primitive: box; height:1; width:1; depth:1"
			material="shader: standard"></a-mixin>
		<a-asset-item id="corn-ply" src="plants/corn.ply"></a-asset-item>

	</a-assets>
	<a-entity mixin="corn" material="src: #corn-ply"></a-entity>
	</a-scene>

- A-Frame Version: 0.7.0
- Platform / Device: Firefox
- Reproducible Code Snippet or URL:

The documentation for how to use the primitives like box, sphere, cylinder is very clear. But what if I want to reuse the ply model created by magica voxel? Can i do that with mixin?
 Ok. Thanks for the reply, but what I really want to do is to spawn a ply-model. I have been looking into this [aincraft ](https://github.com/ngokevin/kframe/blob/master/scenes/aincraft/components/intersection-spawn.js)example done by kevin. And for the intersection-spawn.js script, it uses mixin, and I do not know how to modify it to spawn ply-model.  **Description:**

When you exit from VR mode, the image is still stereoscopic. You can see it on attached videos.

- A-Frame Version: 0.6.0
- Platform / Device: iPhone/Safari (tested on iPhone 6 and iOS 11)
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/

https://www.youtube.com/watch?v=TyEItePPoPA
https://www.youtube.com/watch?v=lk7ihgJwFQg

  Hi,

I think the documentation needs to be updated here https://aframe.io/docs/0.7.0/core/entity.html#event-detail 

As far as I can tell the ``newData`` and ``oldData`` properties are no longer present on the ``componentchanged`` event.
 Wait. So now to get the new data for position, for example, we do this?
evt.target.getAttribute('position') I updated two days ago and my code stopped working. I couldn't quickly find any documentation saying that now I have to do this: `event.target.getAttribute(event.detail.name)`. Anyways, thanks! @ngokevin I wonder if we should add a warning message into the static evt.detail object for oldName or newName so that if this change breaks code relying on newData or oldData, and you look at the value you are getting, it tells you what you should do instead in human-readable form? Something along these lines maybe:
`warn('event.detail.newData is deprecated. Use event.target.getAttribute(event.detail.name) instead.');`  This looks like a good start and addresses a lot of the issues with mapping lots of input types to higher level semantic events.

A few notes:

When I wrote a similar input manager for Spaciblō (classes here: https://github.com/Spaciblo/spaciblo-core/blob/master/docroot/js/spaciblo-input.js and default schema here: https://github.com/Spaciblo/spaciblo-core/blob/master/docroot/js/spaciblo-default-input-schema.js) it became quickly apparent when making apps that I needed  to know how the higher level event was triggered. So, the app might treat differently events from left- or right-handed controller or from gaze control.

One of my working theories is that a MR app framework needs to keep track of global app state (type of pose data, type of display, type of controllers, etc) so that the input mapping can be entirely swapped out. For example, if a handset is in flat page mode then it needs a different input map handling touch inputs than it would in magic window pass-through AR mode which is also different from when in a HMD doing VR.  So, the same lower level inputs lead to different higher level events, depending on MR mode.

Diego, I suspect that this is related to the conversation that you're having with @blairmacintyre about the use of "presenting" to indicate global app state. It seems like we need state with more info, like a data structure that represents the current display, the UI mode (flat, overlay, in-scene), the reality (pass-through AR, see-through AR, VR), and the input schema.
  **Description:**
It is not possible to change vertexA, vertexB, vertexC, width, height attributes of a triangle primitive. Using it with geometry works. Although triangle.js seems to be ok.

- A-Frame Version: 0.7.0
- Platform / Device: -
- Reproducible Code Snippet or URL: https://codepen.io/anon/pen/BwPgqQ

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 For some reason, it's slightly different to the geometry version.
You need to use vertex-a, vertex-b & vertex-c instead.  Does it apply a scale to `Object3D.scale` based on the initial size of the mesh?  (this is just a complete guess)

I tried searching the source, but it wasn't easy to find.  It appears that A-Frame doesn't allow to create properties that may not exist (or may have null values). For example, an integer or float value will always have a default numeric value, which may not always be appropriate. If I create a numeric property with a `{default: null}` it gets parsed as NaN. Strings with `{default: null}` work seemingly ok but issue a warning (though, inexistent string value may be designated by an empty string, this is not always appropriate).

Apparently, the problem stems from that every property type is made to be serializable to and parsable from a string. But A-Frame usage scenarios are surely not limited to creating an html with string-only attributes. `getAttribute`/`setAttribute` API allows to pass any javascript expression to aframe component properties. The aframe-react library provides a convenient way to pass javascript expressions directly from React components jsx code.

Is there a chance that A-Frame component schema will be extended to accommodate these use cases?

- A-Frame Version: 0.7.0

 I have several use cases. For example, I have a component that creates a carousel out of some given entities. It has a notion of a currently active element index, so it is an integer property, but it can also be a null (no active slide). I couldn't find a way to describe this in a schema without getting a warning from A-Frame. Currently, I use `{active: {default: null}}` but it gives a `core:schema:warn Default value `null` does not match type 'string' in component 'rotator'`

Another use case is for the second part of my original request. I need to pass a callback to a component: 

`<Entity camera look-controls roll-tracker={{callback: cameraRollCallback, threshold: 15}}>
...
</Entity>`

This component tracks camera roll angle and reports it back to the callback. A callback is of an object javascript type and there's no such equivalent in aframe compoenent prop types.

Surely there can be other use cases, but even in those, I find A-Frame component property type list is too restrictive to support these use cases. I don't need to pass the event somewhere else in an aframe ecosystem. Callback passing is an integration point with the outside world: I'm using React and Redux and the callback dispatches the Redux action. If I will emit the event to be subscribed somewhere else I will just move the problem to the other component, this will not solve the problem.

I think you miss the whole point. The point is that aframe component property types apparently are designed around the string representation of their values. And in the reality, no one will use just a string properties for an app bigger than a hello world. One will use React or Angular or anything else and this will require passing native javascript objects around to tie these two worlds. Why restrict that? Ok, what if data is a multidimensional array? Thinking in the "data not logic" paradigm callback could be a design smell. I think I can subscribe to an event in a React component, this solves callback problem. Thank you for the hint.

Still, I think nullable properties and object/array data should be supported. There can be ways to overcome that, but this is the data, I don't see why restrict some forms of it. For example, I have a component that duplicates the model in the desired positions. A column model that gets duplicated around the scene still being a single geometry to optimize a number of render calls.

The component gets passed an array of positions, this is not a permitted data type. 

Of course this is not a single use case. Custom property type is surely a solution, I somehow missed that. Thank you! I would say that one thing that is missing is the ability to declare a custom value on a component level. I can create a custom component property type, but something like this (jsx): `instantiate-geometries={[{position: "1 0 0"}, {position: "2 0 0"}]}` is unsupported I guess.  Is that really the expected behavior?  Shouldn't the canvas stay the correct size for the VR headset's resolution? Hi @cvan,

My fix in #3031 was addressing a specific problem. When the user is in an immersive HMD the priority is for HMD resolution (which is set by the page), since the same canvas object is used both for HMD and desktop rendering. If the page does not use mirroring when presenting (preserveDrawingBuffer=false) then the canvas is not visible on desktop. This is preferred as it also reduces rendering costs.
You shared the video of a mobile example. Do you expect the same behavior on mobile and desktop? I am not quite following, what is the expected behavior.
Do you agree that the canvas on desktop should be resized after exiPresent? 
The behavior is correct with MS Edge (mirroring is off): 
	1. Enter VR
	2. Resize the window
	3. Exit VR
The canvas size is updated. @dmarcos Thank you for fixing this!  **Description:**
%ccomponents:gltf-model:warn %cCannot read property 'color' of undefined%c  color: orange color: inherit color: orange
(anonymous function)	Uncaught (in promise) TypeError: Cannot read property 'color' of undefined

- A-Frame Version: 0.7.0
- Platform / Device:  Crome/Windows10
- Reproducible Code Snippet or URL:
<a-scene  embedded  id="scene" class="scene"
    style=" pointer-events: none; position:absolute; height:100%;  width:100%; margin: auto; top: 0;
        left: 0; right: 0; bottom: 0; z-index:2;"
    vr-mode-ui="enabled: false"  physics="debug: true" debug>
     <a-entity id="camera" class="camera" position="0 360 0"  rotation="-90 0 0">
        <a-camera  user-height="0" camera="active:true"
                  fov="30" wasd-controls-enabled="false" look-controls-enabled="false" >
         </a-camera>
    </a-entity>
    <a-entity id="kolobot" gltf-model="src: url(https://github.com/KhronosGroup/glTF-Sample-Models/blob/master/2.0/AnimatedCube/glTF/AnimatedCube.gltf);"
              rotation="-40 0 0" scale="1 1 1" position="0 0 0">
    </a-entity>
</a-scene>

 Hi @donmccurdy. I've tested all my gltf models, and they all work fine with your online viewer. But I have a more complicated problem - I try to use aframe (v.0.7.0) as the top level layer, which is located above the openslayers map element in [DOM](https://nedol.ru/infodesk/alpha/dist/?mode=id&lat=48.858226&lon=2.294554&zoom=16). And in this case some 3d models (.dae, .json) work without problems, but loading the glTF 2.0 model I get an error ("Uncaught (in promise) TypeError: Cannot read property 'color' of undefined"). @donmccurdy That is my model - https://nedol.ru/infodesk/alpha/src/ddd/kolobot.2.gltf. Now I can see the model on the map, but for unknown reason it looks translucent. 
![image](https://user-images.githubusercontent.com/2842644/31623342-c97ebb90-b2a7-11e7-9073-e74f4cf1e534.png)
 I use gltf 2.0 exporter for Blender with the settings that that doesn't give .bin file. This is another [example]( https://nedol.ru/infodesk/alpha/src/ddd/kolobot.flying.gltf) of model with the same problem.  After adding animation to blender's project I couldn't open [new gltf ](https://nedol.ru/infodesk/alpha/src/ddd/kolobot.2.gltf)in the viewer ('Invalid typed array length: 240'). But new [.glb file](https://nedol.ru/infodesk/alpha/src/ddd/kolobot.walking.glb) it seems works fine in the viewer exept some texture problems. 
![image](https://user-images.githubusercontent.com/2842644/31652035-6d046b1a-b326-11e7-9f9b-327e2f71ab33.png).  
And the .glb animation doesn't work in aframe 
![image](https://user-images.githubusercontent.com/2842644/31652204-0a1a4280-b327-11e7-8614-e644c19a3713.png). 
You can see [demo](https://nedol.ru/infodesk/alpha/dist/?mode=demo&lat=48.858226&lon=2.294554&zoom=16). 

  Per Slack discussion
https://aframevr.slack.com/archives/C0GG937RN/p1507698939000005?thread_ts=1507678947.000225&cid=C0GG937RN

We may want the `material` component to act after `object3dset` or `model-loaded`, and to optionally traverse the model and its children, or apply recursively to the object hierarchy.  (Though we should consider whether to traverse into child A-frame entities then) Maybe some interaction with #2408?  Fix #3151. OK so -

We seem to agree these docs are an improvement.

Both the examples (grid and displacement) are done both as registered shader and custom component, so we actually have @donmccurdy's comment `whynotboth` already.

Ok to merge while working #3155? @dmarcos added that example OK, I think this looks good now, unless someone has a real example to contribute of a custom shader that uses a type that `registerShader` doesn't support  I know it's a WIP, just giving my feedback.
On GearVR, Oculus browser and Samsung Internet, in or out vr mode, the eyes stay at y:0. In vr mode, the controller model appears at configured user-height.
With Samsung Internet, not in vr mode, the camera doesn't move anymore. In Oculus browser, this never worked. I tested on GearVR. For the user height stuff, it's ok now. But there is really something wrong with the camera, it seems that it's the ground that move, not my head. I really want to throw up right now, seriously. :) With a cursor on camera, the cursor doesn't follow my head, it stays where it was initially. @fernandojsg If you want to throw up, you can test that branch with GearVR. :) On my project actually https://github.com/vincentfretin/aframe-sandbox
On which example are you testing? So we can test the same thing. I use [yarn](https://yarnpkg.com) with yarn workspaces in my project. If you want to test it with your branch:
```
git clone git@github.com:vincentfretin/aframe-sandbox.git
cd aframe-sandbox
./workspaces-install.sh
cd workspaces/aframe
git remote add dmarcos git@github.com:dmarcos/aframe.git
git fetch dmarcos removeVREffect
git checkout -b removeVREffect dmarcos/removeVREffect
cd -
yarn
replace `"main": "dist/aframe-master.js"` by `"main": "src/index.js"` in `node_modules/aframe/package.json`
npm start
``` I tried to understand the changes of this PR, but this is too advanced for me to say what could be the issue. Can you see what I describe at least? AFAIK at the moment, they still need to add Rift support to Chrome Canary - but soon experimental Chromium may not be necessary at all Ok, I tested latest master, works great now on GearVR.  Per discussion at https://aframevr.slack.com/archives/C0GG937RN/p1507678947000225
The functionality of `AFRAME.registerShader()` has improved to the point where it is pretty useful, but the documentation for shaders is buried inside `material`, and the documentation for `registerShader()` does not have an example of recent changes which allow very straightforward usage without dipping down into `THREE` materials:
```
/* global AFRAME */
// Grid along X and Z (horizontal planes).

AFRAME.registerShader('grid', {
  schema: {
    color: {type: 'color', is: 'uniform', default: 'white'},
    opacity: {type: 'number', is: 'uniform', default: 1.0},
    thickness: {type: 'number', is: 'uniform', default: 1.0},
    interval: {type: 'number', is: 'uniform', default: 0.01}
  },

  raw: true,

  vertexShader: [
    'precision mediump float;',
    'attribute vec2 uv;',
    'attribute vec3 position;',
    'uniform mat4 projectionMatrix;',
    'uniform mat4 modelViewMatrix;',
    'uniform float interval;',
    'varying vec2 coord;',
    'void main(void) {',
    '  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
    '  coord = vec2(position.x / interval, position.z / interval);',
    '}'
  ].join('\n'),

  fragmentShader: [
    '#extension GL_OES_standard_derivatives: enable',
    'precision mediump float;',
    'uniform vec3 color;',
    'uniform float opacity;',
    'uniform float thickness;',
    'varying vec2 coord;',
    'void main() {',
    '  vec2 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);',
    '  float line = min(grid.x, grid.y);',
    '  if (line > thickness) { discard; } else',
    '  gl_FragColor = vec4(color, opacity);',
    '}'
  ].join('\n')
});
``` Awesome!
Couple of assorted thoughts for useful info in that regard, some rehashed from the Slack debate:

- A general overview of how registerShader wraps around THREE.ShaderMaterial
- A quick explanation about the relationship between Schema and Uniforms, or at least an example
- An example or mention of tock() logic to demonstrate time-based shader code
- (Perhaps a nontrivial example showing how uniforms can be derived from dynamic data like mouse pos, etc.?)
- Best practices?


-useful, external links - depending on the type of service you want the docs to fulfill, but since A-frame is beginner-facing I think mentioning these would do a great service to many who encounter shaders for the first time through Aframe and the docs: 
[THREE.ShaderMaterial](https://threejs.org/docs/#api/materials/ShaderMaterial),
[The Book of Shaders](https://thebookofshaders.com/)
[The Cg Tutorial](http://developer.download.nvidia.com/CgTutorial/cg_tutorial_chapter01.html) ("Cg" is a bit of a misnomer - 99% of it is applicable to GLSL and despite its age it is still one of the best introductions to gpu programming. It's also free:) Thanks @MichaelHazani - how does the current PR match up?  I think the time-varying one may be the most interesting of current examples.  Can you say more about `derived from dynamic data`?  Feel free to make a PR on my fork to include here, which may be easier. So several discussions later, I am still leaning toward partitioning shader functionality into shader, and material functionality into the material component rather than continually requiring one-off replacements (see #3154 and #3155).

#3154 still includes the documentation on custom shader plus material component.  Note that both examples (grid-glitch and displacement) don't need a tick handler actually. See https://glitch.com/edit/#!/aframe-displacement-registershader
Seems cleaner to me.

#3155 will be useful even without custom shaders, assuming that we proceed.
 Re: time reference - first line in vertex shader main computes time from time1000, so I think it still works?

Re: partitioning meaning registerShader and material component changes, yes I am still leaning that way.  The shader data schema makes it easy to change values for the shader, even if you want to make a separate component to do it, works the same as rest of a-frame Just had a chance to catch up on the new suggested docs - I agree, much better, thank you.
In terms of feedback, I think there's still ambiguity in time vs. tick - and the fact the regsiterShader() and registerComponent() examples are next to one another makes the distinction even murkier and less obvious. 

So in other words the one thing I'd love to see is a clearer distinction of when to use each. In that way, I think the docs reflect this ongoing discussion in that the answer to that question is not really obvious, some are doubting the actual need for "registerShader", and the whole thing is a bit up in the air...

For now I'm slightly leaning towards the "why have registerShader() to begin with when it's not fully implemented and this area relies so heavily on exposing threejs/glsl to begin with", but in terms of the docs, I think an opinionated example of when and why to use each would be a welcome clarification. @donmccurdy thanks for heads up on the glitch error.
Duh, forgot to use `type:'time'` instead of `'number'` @michaelhazani ok, updated with opinionated section and removed duplication. @donmccurdy that means I blew away the prior custom component examples, but hopefully you will see why... if not, we can always revert Great stuff - thanks for doing all that. I think this is a huge step up and the examples are excellent and nontrivial. This is the kind of doc I'll be forwarding to beginners / onboarding devs for reference. Thank you!  The changes here use an updated version 0.9.40 of the polyfill that make the accelerometer / gyroscope based sensor fusion work properly on the latest Web Browser for the ODG R-7, which is a landscape-primary device, as well as making A-Frame realize that it should be using it for R-7. ahead of you, https://github.com/googlevr/webvr-polyfill/pull/286 once @jsantell merges into polyfill, if we are using latest master of polyfill in general, then the package.json change can be reverted understood.  looks like it just merged, let me retry without package.json, hang tight just published webvr-polyfill v0.9.40 with the changes to support the R7 :metal:  nice!  OK so now the latest ODG R-7 Web Browser can use polyfill with correct accelerometer/gyro behavior, so you can load up https://r7-aframe.glitch.me/ and look at the boxes to select them.  (Although the display is still monoscopic at the moment.) @dmarcos OK to merge, thx @jsantell ! those github: changes shouldn't have been necessary, I undid by checking out an older version, let me fix ok, package.json fixed looks correct now:
- bump polyfill to 0.9.40, which has R-7 changes
- make A-Frame use accelerometer and gyro for R-7 (with polyfill fixes), like mobile phones
- tweak landscape utils call to work for R-7  Memory is not released after a scene is removed from DOM.

- A-Frame Version: 0.7.0
- Platform / Device: iPad/iPhone
- Reproducible Code Snippet or URL: https://codepen.io/ebhoren/pen/zEjYRO

Make a memory snapshot before adding a scene. 
Another memory snapshot after adding a scene.
Remove the scene and take another memory snapshot.

You will see the memory is not released and just keep increasing each time you remove a scene and add a new one.

Thanks I'm adding/removing scenes because i splitted my app logic in 3 big scenes. 
Each scenes load around 30-40mb on textures and videos.

How can i achieve this by emptying the scene, and his assets, and repopulate it with new elements+assets in the assets manager?  **Description:**

Fixed the docs. The documentation is correct. Nonetheless if you're using non positional tracking device with aframe 0.7.0, and you add a `<a-camera/>` yourself in the scene, your eyes will be at 1.6 because of the following issue https://github.com/aframevr/aframe/pull/3111 Any suggestions how to re-word this? It indeed is confusing 😄  @ngokevin thx I updated the PR, but changed the wording `is not in the ground` to `is not on ground level`

I still don't understand what is said here due the fact: I don't understand the difference between the camer when no in VR and default camera. Can you elaborate the difference? @ngokevin ohhh, now after reading this new section everything makes sense! thanks for the explaination  **from my point of sight, it would be interesting for you to:**

- *including supercollider.js in your framework;*
- *porting libpd to javascript (perharps using emscripten)*
- *compiling csound for aframe*
- *including a Lisp Algorithmic composition framework in a framework such as PWGL*

---

**furthermore:**

- *using an implementation of fft in opencl (i have forked some in case you may want to take a look);*
- *use that to make an implementation of higher order ambisonics/emulating wave field synthesis in stereo;*  The idea was to provide my own model instead, yeah. Something relevant to the scene, that would be used instead of either Vive or Touch controllers. In my case, I had a user who was on a satellite link, and the laser was not showing up at all.  I thought for a while that it was the controller model geometry needed to be downloaded in order for laser controls to work, so I was looking for ways to disable the model-loading, since the laser itself was more important.

I think I was wrong about the reason it wasn't showing up, though, but I did feel limited by needing to load extra geometry for low-bandwidth cases. Having articles explaining how to make custom components sounds like a great idea! For better or worse, I think the examples like `laser-controls` work well enough that folks don't try to clone it and make their own versions like a-blast... so if that a-blast example will show how easy it is (and expose some of the annoyances like having to keep your own list of the higher level controls you need to prospectively add) there will probably be less questions / requests here going forward @ngokevin Ooh yeah, I guess I meant specific examples for a few use cases to see it in action. Even though they are discoverable in the a-frame source, it's not usually my first impulse to check there.  **Description:**

A loaded model (gltf-model) doesn't unload from memory after it removed from DOM.

- A-Frame Version: 0.7.0
- Platform / Device: At least Windows/Chrome (possibly all platforms)
- Reproducible Code Snippet or URL: https://pterko.github.io/aframe/memory_bug_demo/test.html

How to reproduce:
 - Wait until page loads
 - When page loads, take a memory snapshot
 - Wait 10-15s before model will appear and loaded, take a snapshot
 - Wait until model will be deleted, take memory snapshot again

Expected behavior: amount of used memory decreases
Real behavior: amount of used memory don't change
![image](https://user-images.githubusercontent.com/3855974/31297860-475fe166-aaf0-11e7-92da-e68ae860eccf.png)




 I've noticed this in my project as well, though I use a sllightly different version of the gltf loader. When I unmount/unload any gltf object, I run it through a function as below to make sure to dispose of any material/geometry/textures.

Could add this somewhere to the a-frame source but not sure where would be appropriate or if there is a simpler way of doing it.

```
export const disposeObject3D = object => {
  object.traverse(obj => {
    if(obj.material){
      obj.material.dispose();
      if(obj.material.map){
        obj.material.map.dispose();
      }
      if(obj.material.lightMap){
        obj.material.lightMap.dispose();
      }
      if(obj.material.aoMap){
        obj.material.aoMap.dispose();
      }
      if(obj.material.emissiveMap){
        obj.material.emissiveMap.dispose();
      }
      if(obj.material.bumpMap){
        obj.material.bumpMap.dispose();
      }
      if(obj.material.normalMap){
        obj.material.normalMap.dispose();
      }
      if(obj.material.displacementMap){
        obj.material.displacementMap.dispose();
      }
      if(obj.material.roughnessMap){
        obj.material.roughnessMap.dispose();
      }
      if(obj.material.metalnessMap){
        obj.material.metalnessMap.dispose();
      }
      if(obj.material.alphaMap){
        obj.material.alphaMap.dispose();
      }
    }
    if(obj.geometry){
      obj.geometry.dispose();
    }
  });
}
```
 @donmccurdy Yeah this resolved memory leaks when swapping/removing gltf models often.

I'm not exactly sure how the dispose functions work, they emit the following: `this.dispatchEvent( { type: 'dispose' } );` in ThreeJS which triggers events on the renderers to make sure the assets are fully cleared up and deallocated the resources to them.

Otherwise I believe that even if you clear your cache and your local variables, there is still references to those variables on the renderer which it keeps for performance optimisations until you clear them up. Hmm, just taking a look at the code. It looks like `GLTFLoader` uses `GLTFRegistry` not `THREE.Cache` like you mentioned. This means each model would load its own resources and they would be safe to remove, but means that the resources get loaded and allocated separately each time. So if a user detached the object and reattached it to another, all the resources would get reloaded using a different instance of the `GLTFLoader/GLTFRegistry`?

I thought that it was using `THREE.Cache` but maybe that is just the `a-asset-item` that gets cached, not the actual loaded geometries/materials? Correct me if I'm wrong...

I'm not sure of any existing way to check how many objects are referencing a resource. The only way I could think of doing it is traversing the whole scene graph and checking against UUIDs, but that might be a bit much? I think it should be disposed of automatically as its assumed that when a node is removed, the memory it takes up should be removed to but would leave that call to someone else. I see... I mostly use `.gltf`s with separate binaries and textures, so that's why the code works fine for me. If you have multiple `.glb`s then yes it would cause issues if you disposed of resources that are in use elsewhere.

I can't think of a clean way that doesn't require a lot of changes. Maybe if it were something like `THREE.Scene.Clear()/THREE.Renderer.Clear()` that goes through all the resources and clears any that are not being used, but thats probably quite a big task. I think the `dispose-on-detach` is good but not an obvious solution for people to use, would an attribute on the `a-gltf-model` make more sense?  **Description:**

- A-Frame Version: 0.7.0
- Platform / Device: OSX (mid 2015 Macbook Pro) / iOS (iPhone 6)
- Reproducible Code Snippet or URL: 

...
<a-scene>
<a-assets>
                <video loop controls id='vid' src='./assets/video/vid.mp4' type='video/mp4' autoplay muted>
</a-assets>

            <a-entity material="shader: flat; src: #vid" geometry="primitive: plane;" position="0 1.3 -3.1"
            rotation="0 0 0" scale="3 2 2">
<a-scene>
...

This is semi-pseudo because I can't link to an actual file without also triggering CORS issues. To repro please try serving a local mp4 (or presumably any other format - I've tried .flv to confirm).

On loading the simplest video file in a-frame Safari throws the same error mentioned [here](https://github.com/mrdoob/three.js/issues/9716) on iOS as well as desktop. There is no issue if:

1. the file is loaded as a <video> outside of a-frame
2. the file is loaded on Chrome (iOS/OSX)
3. the file is loaded on FF (iOS/OSX)

So, I believe, it really comes down to a Safari webgl issue.

Not sure this can be fixed at the a-frame level but at the very least I wanted to leave a pointer to the original threejs error. I'd also love to know if anyone else is able to create a simple video texture (per the above code) in a-frame and have it work without a hitch on Safari (either iOS or OSX). Oops - can't believe I never encountered it before, thanks. That said, this is bigger than mobile - I'm able to repro on OSX as well. Safari just doesn't play nice across the board. (Unlike the original bug, I'm able to make it work in FF) There are a few issues that could be in play here with Safari.  Longstanding CORS bugs, HW acceleration related shader interactions, HLS quirks vs. usual MP4, codec profile/resolution support just to focus the problem, as I'd mentioned before, the file plays fine in safari without WebGL so I don't think there's some inherent non-gl-related problem in Safari. I suspect this pertains to the  implementation of that particular shader per the detailed debate in the bug I referred to. oh, interesting - autoplay muted works in other browsers (and requires "muted" due to similar restrictions), but you think the problem is related to autoplay rather than that shader error?

Worth a try, anyway - thanks. I'll report back. Update: @mayognaise 's [module](https://www.npmjs.com/package/aframe-video-shader) saved the day - playing on Safari/OSX, stuttering but probably improvable on Safari iOS. Gonna dig under the hood a bit to see how it does it. Does this codepen work if you click?
https://codepen.io/machenmusik/pen/gRPZqd Can you clarify what you mean by "work"? That codepen video is a single frame so there's no way to test whether Safari (or any other browser for that matter) would run into the same issues. The main problem - also evident in this [AFrame Videos example](https://altspacevr.github.io/aframe/examples/test/video/) - is that Safari freezes on the first frame and won't play. OK, how about https://codepen.io/machenmusik/pen/boLZKQ which works for me in Safari on MacOS? Works on safari/iOS! Very interesting, thanks for the example. I’ll take a
closer look on Monday.

On Sat, Oct 7, 2017 at 9:37 AM machenmusik <notifications@github.com> wrote:

> OK, how about https://codepen.io/machenmusik/pen/boLZKQ which works for
> me in Safari on MacOS?
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3136#issuecomment-334947946>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AKfQLmKOJaioKUYu1CTmF1lYObX8DLZKks5sp6iFgaJpZM4Pw6IB>
> .
>
 No problem - the usual culprits with video not working are:
- hosting of the particular media files and either CORS headers, content-type settings, or both
- the particular video settings used to encode don't match what the device/OS will play
- mobile autoplay restrictions
 Very useful, thanks. I had ruled out CORS because it was locally served and
mobile encoding / auto play issues because it worked on FF and Chrome on
iOS, and because it threw this strange old shader warning. But per usual
with Safari all bets are off - and it helps to have a working example.

On Sat, Oct 7, 2017 at 1:32 PM machenmusik <notifications@github.com> wrote:

> No problem - the usual culprits with video not working are:
>
>    - hosting of the particular media files and either CORS headers,
>    content-type settings, or both
>    - the particular video settings used to encode don't match what the
>    device/OS will play
>    - mobile autoplay restrictions
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3136#issuecomment-334963804>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AKfQLmbEPDnJ4jAOmcZHrD52Xs-eU8qBks5sp9-VgaJpZM4Pw6IB>
> .
>
 This weekend I have found that videos with sound won't play on iPhone. They will play if they have no audio tracks, or if the muted attribute is added to the video element.

This happens using Firefox , Chrome and Safari, and when pinned to home screen. iOS 11.01 and 11.02 Yeah, that’s a known restriction - can only auto play muted.

On Sun, Oct 8, 2017 at 5:29 AM SteveX <notifications@github.com> wrote:

> This weekend I have found that videos with sound won't play on iPhone.
> They will play if they have no audio tracks, or if the muted attribute is
> added to the video element.
>
> This happens using Firefox , Chrome and Safari, and when pinned to home
> screen. iOS 11.01 and 11.02
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3136#issuecomment-335003301>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AKfQLkGmdSZMXkEDlyxBpCS5QGkbxzivks5sqL_5gaJpZM4Pw6IB>
> .
>
 https://webkit.org/blog/6784/new-video-policies-for-ios/ > OK, how about https://codepen.io/machenmusik/pen/boLZKQ which works for me in Safari on MacOS?

@machenmusik Thank you for the working example! Our splash screen click event wasn't enough for mobile Safari, it needed the window click. No problem, glad it helped you!  From the comment https://github.com/aframevr/aframe/commit/0b60c12bd48de67c5e82eb1c19159800a07f1ca1#commitcomment-24807425
we changed the `return` to a `break`, but it should really be a `continue`.

I tested with two overlapping cubes, and with the break, sometime I had a cube that stayed in a hover state and the ray wasn't on it. I couldn't reproduce the issue by replacing `break` with `continue`.

#3131 is maybe related to this?
  I've seen the Blender community suggest [this Youtube tutorial series a lot](https://www.blenderguru.com/tutorials/blender-beginner-tutorial-series) for beginners. Maybe, pertaining to texturing, docs should point people to [the video about material nodes](https://www.youtube.com/watch?v=f5Gb1VK98Wc)?

Also, @donmccurdy, a bug in your example above, `event.details` should be `event.detail`  **Description:**
For example: color=" #FF0000" throws an "THREE.Color: Unknown color  #FFFFFF" error. Would it make sense to trim the string?

- A-Frame Version: 0.7.0
- Platform / Device: -
- Reproducible Code Snippet or URL: https://codepen.io/anon/pen/wryJxK

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 https://codepen.io/anon/pen/wryJxK ok will do.  Is there a better way to understand when and how the intersection point changes?  I think that is the primary value of the subsequent events.  Use case - drawing a dot / placing an object on a plane or box where the intersection point is.  Maybe emit the first intersection, and then the recipient should register on the raycaster for further updates for that element?  At the moment, I don't think the intersections are objects that survive across raycasts and update live. I'm thinking use cases like - raycaster detects ground plane and also other objects in environment; if ground plane is first hit, you want live updates to highlight where you want the object placed, but if other objects, you don't highlight (and don't care where until).  For that use case, you want a property that will throttle the intersection count for which events are emitted (e.g. to 1, or 2 if you want to be able to point through objects if required) I thought we wanted to discourage code from reaching into component internals directly (so the implementations can evolve as needed) - if we want this to happen more often, should accessor methods be defined to provide a clean API? OK.  Maybe the JS you're describing can be wrapped in a legacy-helper component as well, if needed. actually, why not 
```
groundEl.addEventListener('raycaster-intersected', el => {
  this.intersectingRaycaster = evt.detail.el.components.raycaster;
});

groundEl.addEventListener('raycaster-intersected-cleared', () => {
  this.intersectingRaycaster = null;
});

...

tick: () => {
  if (!this.intersectingRaycaster) {  return; }
  var intersectionIndex = this.intersectingRaycaster.intersectedEls.indexOf(this.el);
  var intersection = this.intersectedRaycaster.intersections[intersectionIndex];
}
``` ohhhh wait, neither of our JS solutions are quite the same, because raycaster interval is not the same as tick frequency...  IMO biggest raycaster perf boost is throttling raycasts to use appropriate interval. @dmarcos exactly.

@ngokevin so you're thinking not worth making a subscribe per https://github.com/aframevr/aframe/issues/3129#issuecomment-334773254 ?  I actually thought that was cleaner, and is a step toward knowing when no one is interested and avoiding emit entirely @ngokevin ok - or maybe just add a method like getElementIntersection(el) on the raycaster that does the lookup. @machenmusik FYI, in trying to port planes detection of aframe-ar to aframe 0.8.2, I tried some of the proposed code, this is fine to intersect only one object, groundEl in your example @ngokevin but in practice you have several planes, destroying and recreating during the session, and other objects in your scene you want to interact with. I'll give you an example that clearly is difficult to do with the current raycaster code in aframe 0.8.2. With a plane and a cube on the plane, the two are raycastable.
- you have the ray on the plane, raycaster-intersected on the plane, raycaster-intersection with the plane, fine
- then you hover on the cube, the ray intersects both the cube and the plane, raycaster-intersected on the cube, raycaster-intersection with the cube, good
- now you hover on the plane, raycaster-intersected-cleared on the cube good,  raycaster-intersection-cleared with the cube, but no other events for other existing intersections (the plane), how do I move a cursor along the plane now?
I even tried to do this to have a raycaster-intersected event again on the plane:

```
const cursor = document.getElementById("cursor");
const raycaster = document.querySelector("[raycaster]");
raycaster.addEventListener(
    "raycaster-intersection",
    (evt) => {
      var point = evt.detail.intersections[0].point;
      cursor.setAttribute("position", point);
      const el = evt.detail.els[0];
      el.setAttribute("follow-intersection", "follow:true");
});

  raycaster.addEventListener(
    "raycaster-intersection-cleared",
    (evt) => {
      evt.detail.clearedEls.forEach(el => {
        el.setAttribute("follow-intersection", "follow:false");
      });

      // if we still intersect an element, it becomes the one where we follow the reticle
      if (raycaster.components.raycaster.intersections.length > 0) {
        raycaster.components.raycaster.intersectionDetail.els =
          raycaster.components.raycaster.intersectedEls;
        raycaster.components.raycaster.intersectionDetail.intersections =
          raycaster.components.raycaster.intersections;
         raycaster.emit(
           "raycaster-intersection",
           raycaster.components.raycaster.intersectionDetail
         );
      }
  );
```
It did work, but sometime my cursor froze because the plane is destroyed and another one is created I guess, I'm not sure.
And I created a component like this:
```
AFRAME.registerComponent("follow-intersection", {
  schema: {
    follow: { default: false }
  },
  init: function() {
    this.el.addEventListener("raycaster-intersected", evt => {
      this.intersectingRaycaster = evt.detail.el.components.raycaster;
    });
    this.el.addEventListener("raycaster-intersected-cleared", () => {
      this.intersectingRaycaster = null;
    });
    this.cursor = document.getElementById("cursor");
  },
  tick: function() {
    if (!this.intersectingRaycaster) {
      return;
    }
    if (!this.data.follow) {
      return;
    }
    const intersection = this.intersectingRaycaster.getIntersection(this.el);
    if (intersection) {
      this.cursor.setAttribute("position", intersection.point);
    }
  }
});

```
In practice, you have several objects intersected, not only one, so I introduced a follow attribute to only enable the follow intersection behavior for only one intersected object. because updating the cursor from several components is not good at all. :)

So in the end, I gave up, too complex and I'm still having issues with cursor sometime not following on a plane.
I ended up removing all the code above and reintroducing the raycaster-intersection event for all intersections, not only newIntersections.

```
index 6928c87..6b389ae 100644
--- a/src/components/raycaster.js
+++ b/src/components/raycaster.js
@@ -252,9 +252,14 @@ module.exports.Component = registerComponent('raycaster', {
     }
 
     // Emit all intersections at once on raycasting entity.
-    if (newIntersections.length) {
-      this.intersectionDetail.els = newIntersectedEls;
-      this.intersectionDetail.intersections = newIntersections;
+    if (intersections.length) {
+      this.intersectionDetail.els = intersectedEls;
+      this.intersectionDetail.intersections = intersections;
       el.emit('raycaster-intersection', this.intersectionDetail);
     }
 ```

So what do you folks think about this? Do I keep my custom aframe build? Do we add back the raycaster-intersection event for all intersections like I did? An option to select this behavior? @vincentfretin I'm not sure I fully grasp your use case, but I've had success using something similar to your follow component to keep the intersection position updated combined with `super-hands` to address the issue in the third bullet point and re-target the follow component (because you would get a new `hover-start` on the plane after the cube intersection was lost) @wmurphyrd You're right super-hands seems to actually do exactly what I want for my third bullet point. You maintain an array of this.hoverEls, and on unhover on say the cube, you look at next target in this.hoverEls to start the hover on the plane. It appears I'm trying to reimplement what you did in super-hands indeed.
I'm just finding it unfortunate that I now need to add much complexity to my code or add an extra dependency to my project to do what used to work in aframe 0.7.1. I know all those changes are for performance reasons, and I appreciate all your work in this area.
I'll maybe retry this by looking at the super-hands code or using it as a new dependency on my project. But for now, I'll use my custom aframe build. In the original plane-cube example, the problem is that the intersection is
being cleared on the cube but not being started on the plane reliably,
right?

nothing -> plane; plane fires
plane -> cube and plane; cube fires
cube and plane -> plane; cube fires, but plane does not

I don't think we want to fire redundant events per raycaster interval; it
does seem to me, however, that a consistent "intersection-set-has-changed"
event might be worth having, and the default behavior in response could be
to fire off the individual intersection-cleared and intersection events
that are deemed appropriate.

Maybe there should be a "closest" event, which would fire for plane after
cube is no longer intersected, which would solve this?

On Sun, May 13, 2018 at 7:55 AM, Vincent Fretin <notifications@github.com>
wrote:

> @wmurphyrd <https://github.com/wmurphyrd> You're right super-hands seems
> to actually do exactly what I want for my third bullet point. You maintain
> an array of this.hoverEls, and on unhover on say the cube, you look at next
> target in this.hoverEls to start the hover on the plane. It appears I'm
> trying to reimplement what you did in super-hands indeed.
> I'm just finding it unfortunate that I now need to add much complexity to
> my code or add an extra dependency to my project to do what used to work in
> aframe 0.7.1. I know all those changes are for performance reasons, and I
> appreciate all your work in this area.
> I'll maybe retry this by looking at the super-hands code or using it as a
> new dependency on my project. But for now, I'll use my custom aframe build.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3129#issuecomment-388621412>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AB-_4ikLtnc5fVmwbR_PPL8RPAXIqhVTks5tyB8VgaJpZM4PwiK0>
> .
>
 The aframe-ar-plane Glitch has a slightly different solution @ngokevin I don't think two raycasters will work well, but YMMV

@donmccurdy yes I know but if we're going to do that manual processing then why not move more complicated event emission out of raycaster?  The one by one for intersection is inefficient compared to the all in one for cleared, and when using the one by one paradigm I do think it is reasonable for folks to expect cleared events to be symmetrical, which they are not Yeah, I'm thinking maybe we should have an option that turns off all the event emitting (except maybe one when intersections change) so if you want to customize by reading the internals, you don't have to incur the garbage and overhead from the rest. looking at things starting from https://github.com/aframevr/aframe/blob/master/src/components/raycaster.js#L204
I can see that we want to filter out some data up to line 222.
But in cases where we're going to check things by ourselves later, especially the case where we are only interested with intersection with a single entity via getIntersection, there is a bunch of superfluous work and/or garbage from lines 224 through 260; I still think having a single emit would be helpful then (e.g. to avoid having to monkey-patch checkIntersections to match raycaster interval)  I implemented the solution proposed in https://github.com/aframevr/aframe/issues/3124#issuecomment-334589365
 I just rebased because #3127 was merged.  This breaks everything using raycaster, right?  As there is no way AFAIK to detect the behavior change, if we’re going to break the existing contract, maybe better to change event name so compatibility can be achieved by supporting both old and new event names... Maybe it would be nicer to have a helper component that adds a listener that calls the prior contract, so if you need the old behavior you can add raycaster-legacy-events or sonething I completely agree that small breaking changes are allowed, but now that the framework has more traction and wider usage, correspondingly small affordances to ease migration seem more worthwhile to consider. Along the lines of gltf next and legacy, having legacy helper components that throw deprecation warnings once for a point release might be a reasonable approach?  (This may break existing code, right?) Yes definitely, this will break super-hands for GearVR. super-hands is already broken with the merge of #3126 
https://github.com/wmurphyrd/aframe-super-hands-component/issues/79 This is one of those features where it is rarely used, but for any that do, the event detail is always used at the moment. Would it be feasible to determine if there was anything listening and if not just don’t emit at all? Nice! @dmarcos @ngokevin I made a small PR to super-hands https://github.com/wmurphyrd/aframe-super-hands-component/pull/80  **Description:**
The line component that is part of laser-controls does not change its length to the intersection distance as determined by the raycaster component.  What should happen is the line component shortens itself to not extend past the nearest intersection point.  What ends up happening is the line component remains at the raycaster's far value.

- A-Frame Version: 0.7.0
- Platform / Device: Tested with Vive on Firefox 56.0, and GearVR with GearVR controller using Oculus' browser
- Reproducible Code Snippet or URL: May be seen in link-traversal showcase example

Spent a long time trying to figure out why the laser-controls component wasn't correctly changing its laser line length in my own project.  But then I found that the link-traversal example also exhibits the same issue: its laser lines go right through the link portals.

I've found a couple of reasons for this.  One I solved, and the other I worked around.

The first issue I found was that the raycaster stopped calling its drawLine() method as soon as there was a valid intersection.  The reason for this is due to a _return_ call in its tick() method.  Change the _return_ in this code block starting at line 218 in raycaster.js from:

```
// Emit intersection cleared on both entities per formerly intersected entity.
for (i = 0; i < prevIntersectedEls.length; i++) {
  if (intersectedEls.indexOf(prevIntersectedEls[i]) !== -1) { return; }
  el.emit('raycaster-intersection-cleared', {el: prevIntersectedEls[i]});
  prevIntersectedEls[i].emit('raycaster-intersected-cleared', {el: el});
}
```

to a _break_:

```
// Emit intersection cleared on both entities per formerly intersected entity.
for (i = 0; i < prevIntersectedEls.length; i++) {
  if (intersectedEls.indexOf(prevIntersectedEls[i]) !== -1) { break; }
  el.emit('raycaster-intersection-cleared', {el: prevIntersectedEls[i]});
  prevIntersectedEls[i].emit('raycaster-intersected-cleared', {el: el});
}
```

This allows for drawLine() to be properly called with the correct length, which should have been it.  Unfortunately, there appears to be a deeper issue with A-Frame for the next reason.

Within raycaster's drawLine() method there is the following at line 307:

    el.setAttribute('line', lineData);

As far as I can tell, this is perfectly fine.  The trouble is that the line component's update() method never gets called after this.  I've tried splitting out the _start_ and _end_ attributes into their own calls.  I saw someone mention in an issue calling setAttribute() twice to force an update.  I was never able to get the line component's update() method to trigger, so the line always ended up being the same length no matter what was sent to it.

My current work around to fix this is to modify the raycaster's tick() method to remove the line component just before calling drawLine():

```
      // Update line length.
      if (data.showLine) {
        if (intersections.length) {
          if (intersections[0].object.el === el && intersections[1]) {
            lineLength = intersections[1].distance;
          } else {
            lineLength = intersections[0].distance;
          }
        }
	el.removeAttribute('line'); // DAW: Heavy handed change to force a new line as a test
        this.drawLine(lineLength);
      }
```

This forces the line component to be rebuilt within drawLine(), and its attributes end up being correctly set.  I don't like the idea of having to rebuild the line component every tick, so hopefully this issue with setAttribute() can be resolved.
 @DavidWyand Thanks for investigating! I continued your work on this.
@ngokevin adding clone() indeed fixed the issue.
I created PR #3127 with the break and using two vectors to avoid unnecessary clone. It is working great. Thanks for taking care of this guys before I could get to it.  All of the changes are working at my end.
  I've been trying to make [my project](https://github.com/trusktr/infamous) work in Edge, and it's been a pain because v1 works with native classes, and it's a mess trying to transpile/not transpile. I've had no luck with Polymer's (Justin Fagnani's) shim yet. I'm going to also give Andrea's [babel-plugin-transform-builtin-classes](https://github.com/WebReflection/babel-plugin-transform-builtin-classes) a shot.

What are your guys plans, if any, on v1? Have you tried it? Maybe you don't want to. For me it's too late, I'm already settled on using native classes and not turning back, at least not right now. > Good luck

Yeah, it's been tough couple days with nothing working. No matter what I try (transpilation, no transpilation, document-register-element, @webcomponents/custom-elements with and without Justin Fagnani's native-shim, and every permutation of those, I simply always get the `HTMLElement can not be called without 'new'` error.

Well, except I've gotten it to work where CE v1 is natively supported, but that's about it.

@dmarcos made some changes to document-register-element. Do you know what for? With some tinkering, I've gotten v1 to work in IE and up (IE 10+, Edge 12+, Chrome, etc).

---

> so we can have a hierarchy of classes that pretty much call super()

What do you mean? In my cases I have hierarchy of classes using vanilla `document-register-element` where these classes call `super.attributeChangedCallback`, `super.connectedCallback`, etc. Haven't had any problems with that yet.  Thanks @donmccurdy! I wonder if this is a threejs issue - gonna try to break it in three when I get home.  (I thought those wanted to be THREE.Vector3 for performance efficiency)  **Description:**

- A-Frame Version: 0.7.0
- Platform / Device: Chrome on Android phone

I have a scene with "a-camera" placed in the default position. When I enter VR mode on a mobile browser on different Android smartphones the camera automatically goes up of 1.6, while upon exiting VR mode the height doesn't return to the previous value. So the height increases everytime the user enters VR. I have tried to manually set the position of the camera and change the userHeight parameter but the problem remains.

I managed to solve this problem by resetting the camera to the default height -1.6 upon entering VR, but I don't think this is how the camera should work. I have the same issue in Chrome version 62 on Android phone with A-frame Version 0.7.1.  **Description:**

- A-Frame Version: 
A-frame 7.0
- Platform / Device: 
Windows 10 - Firefox 55 and Chrome 61
Android - Chrome Browser 61
- Reproducible Code Snippet or URL:
https://jsfiddle.net/8jmcuaLw/4/

When using a touchscreen the 'click' event does not register properly. 
In above url try clicking the blue box on a touch screen.
Following would be expected:
 - When clicked the blue box should change to a random hue.
What actually happens:
- the 'touch'/'click' does not register on first touch.
- It registers second time but this time I can trigger the click event on the box by clicking anywhere on the screen. Even besides the box.
 Awesome. You are a star. 
let me know if you need anything from me.  **Description:**
- A-Frame Version: 0.7.0
- Platform / Device: MobileVR - Cardboard, Daydream, GearVR
- Reproducible Code Snippet or URL:
`<a-entity camera="userHeight: 1.6" look-controls></a-entity>`
The same happens in an official exmaple:
https://aframe.io/examples/showcase/helloworld/

Every time I enter and exit VR mode on mobile device userHeight offset is added multiple times to camera Y position. I used a quick fix, as follows:
`<a-entity position="0 1.6 0" camera="userHeight: 0.01" look-controls></a-entity>`
This helped, as a very small offset is added to camera height, but I assume it will break things on Vive, Oculus and Windows Mixed Reality headsets. :/
Edit: My quick fix also breaks controller position on Daydream and GearVR.


 In the "enter-vr" event listener I set the userHeight to 0 as a workaround. Works in Cardboard and Gear VR with controllers and I guess in the other HMDs as well.

I am not sure if this actually *is* a bug... Is this the same as #3051 / #3111 (now closed) ? Thanks guys for your comments. Until PR referenced in #3111 is merged to master, I will check out the fix suggested by @weddingdj.  Make sure you test chrome rift/vive/daydream here, as @dmarcos notes we have encountered quirks or issues.  (Actually I am not sure whether we characterized Edge once we realized that we broke Chrome) Yeah, we started down this avenue of approach but backed off at the time with #2984.  One suggestion is to make the interval a system configurable parameter, as for some apps 500ms may be slower than desired (as this impacts all tracked controls, and we no longer have the event listeners which would fire immediately when available) I suspect that if we changed the throttle once we have seen 1 (for 3DOF) or 2 (for 6DOF) tracked controls, we could reduce the interval to almost never. (We should test recent support for Edge as well) It seems to be working fine on GearVR with Oculus browser. I don't see any difference. With or without the patch, the controller motion is smooth. I don't see any difference. Nice - for completeness I think we need to confirm
chromium/Rift+Touch and chrome/daydream - the former being what stopped us before IIRC.

 I thought we merged this already, apparently I was wrong.  Is anything blocking, or just haven't gotten to it yet?  This definitely fix issue #3051 
I don't know how to write a test for this, this seems bound to the VRControls and how it renders in the browser... @dmarcos There is already a hasPositionalTracking check in camera to save the pose (position and rotation of the camera) yes. So you mean saving userHeight? But this is set on the VRControls object, not the camera. I'm really lost with this, and I don't have any positional tracking device to test this, only GearVR. 

What I know it that before #3000, there was no `this.controls.userHeight = this.getUserHeight();` line in look-controls, so the `this.controls.userHeight` stayed at 0.0. Adding a condition to it solved the issue for GearVR. It feels to me as though we are trying to bake too many smarts into the `camera` -- when it comes to uses for render textures and spectator views, the `camera` is just that - not meant to be a stand-in for the user and presumed HMD positioning.  I thought that (in current incarnation) `look-controls` was intended to contain the latter, and that from prior discussions we thought this area might need some refactoring.  My recollection is that recent changes have handed to use absolute positioning not relative positioning for room scale etc., and this repeated application of relative offset may be a vestige of doing things the old way that should not be re-introduced regardless of where? One other thing that seems to differ between positional and non positional tracking devices is that with positional tracking you are placed to z -2 or something like that, and with GearVR you are probably at z: 0. So there are some examples, notably https://github.com/wmurphyrd/aframe-super-hands-component/issues/89 where you are too close to the object, here with the big cube. I just wanted to add that this fix works for me.  It allows my project to work on GearVR with the Oculus browser, and the Vive using Firefox 56.0, without having to make any camera changes.  Thanks!
 @dmarcos Maybe we can merge this and you folks work eventually on a refactoring in another branch? @vincentfretin sorry for breaking GearVR and thank you for issuing the fix. I verified that it works as expected with Window Mixed Reality.  FYI, super-hands currently uses this feature. Until we don't need to do `.is('vr-mode')` that way, we still need states, right?  **Description:**
Fixes #2930 + adds customisable title color prop

**Changes proposed:**
- Adds prop to change link portal **background** color (rather than the hardcoded red)
- Adds prop to change link **title** color
- Refactors link declaration schema to be accordingly specific: borderColor, innerColor and titleColor
- Updates docs accordingly
 @ngokevin thanks and sorry about the weird spaces - working through some linting issues in my local dev env. Won't happen next time;)  This fixes issue #3051
 If `el.getAttribute('camera').userHeight` returned 0, `getUserHeight()` always returned DEFAULT_CAMERA_HEIGHT instead of 0.

` <a-entity camera look-controls />` now renders again userHeight to 0 like it's supposed to. But maybe this fix introduces a regression for #3000, @olga-microsoft can you please verify? Ah, I just looked at it again. It doesn't fix the issue with `<a-camera />` which set camera.userHeight to 1.6 by default". I still have an increasing offset. This fixes only the case where you really want a camera on the floor.  **Description:**

With Gear VR, when I press touchpad or trigger on the controller, the button is not highlighted like the code in gearvr-controls.js suggests.

In gearvr-controls.js, we get the mesh by name `controllerObject3D.getObjectByName('Trigger')` and `controllerObject3D.getObjectByName('Touchpad')` to be able to highlight the buttons when the button is pressed, but the three meshes in https://cdn.aframe.io/controllers/samsung/gear_vr_controller.obj are all called Default when you `console.log(controllerObject3D)`.
To fix it, simply edit in gear_vr_controller.obj the three lines `g Default` in the file to `g Base`, `g Trigger` and `g Touchpad` in this order. Can someone please edit the file on the cdn?

- A-Frame Version:0.7.0
- Platform / Device: Gear VR
 Sure, accessing with children[2] and children[1] works too, PR #3110  **Changes proposed:**
- adding a new example to illustrate interaction in A-Frame
 This is in response to the pull request #3068  @ngokevin i have changed the code that you have asked

- `<script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>`
- `<a-text value="... by hovering on  ... ></a-text>`
- default color - `#E0E0E0` @ngokevin  well if you are satisfied with the result can you remove the **need changes** tag  I'm not sure what you meant in this sentence, but there is definitely a verb missing. Ok, I changed it.  Following [this comment](https://github.com/aframevr/aframe/pull/3040#issuecomment-329412188) on #3040, add a caveats section to warn about HTML APIs not working as expected and linking the F.A.Q. @ngokevin the JavaScript section is no longer there in 0.7.0, is it right? Where should I add the caveats section?  The following schema is not working as expected:
```js
schema: { type: 'array', default: ['a'] }
```

Demo (open the console):
https://codepen.io/lodr/pen/oGWyoM

Expected log:
```
["a"]
```

Actual log:
```
[]
```  Sinde the update to version 0.7.0, the enter vr button injected by the framework is not functioning. You can click the button, but nothing happens. Bug is reproduceable on the Aframe VR examples.

- A-Frame Version: 0.7.0
- Platform / Device: Edge mobile on Lumia 950/ Emulated Lumia 950 and Edge Mobile on Windows 10 Edge in emulation mode.

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Hi, I 'll be using aframe this fall and it would be amazing to try it with my cardboard and on Edge mobile, but unfortunately as reported it doesn't do it anymore. So I guess I am sending some encouragement here ✨ And I would be excited to see an update 😳 😊 
I am also working for Microsoft but not in Edge team 😅 . (Maybe I can still help somehow? At least for testing...) 💜 
 @dmarcos I will have a look 🤓  @dmarcos, getVRDisplays() in Edge on Windows Mobile returns 0 displays. The recommendation is to use Device Orientation API, whenever available, not only for phones.
@Malwine I tried the polyfill link, the scene is jumping around. Our team will investigate, what causes the problem. Let me know if you have a different result. @olga-microsoft Thank you for investigating!! 💛 ❤️ 
I had exactly the same experience with my Lumia 950(Win 10) trying the polyfill link the boxes where jumping around and would only calm a bit when I put the phone on a stable ground (like a table). 😰  
But I had the feeling that it would react on rotating.
When I tried an aframe example I could not rotate(look to the side) with the Windows phone. @dmarcos The [spec](https://w3c.github.io/deviceorientation/spec-source-orientation.html#deviceorientation) mentions that degrees are expected:
"The rotationRate attribute must be ... expressed in degrees per second (deg/s)."
Would it be better to invert the if-clause instead?
 I opened another request which seems to be related after some further research #3190
I work on an android device (Epson Moverio BT-300) which will no longer be detected as a VRDevice since 0.7.0. However, in 0.6.1 it works. Also the Three.js misc_controls_deviceorientation example works fine. When loading the 0.6.1 aframe-master.js the getVRDisplays returns a valid display. with 0.7.0 it does no longer return a display.  thank you! it was fun to build.  **Description:**

- A-Frame Version: 0.7.0
- Platform / Device: Firefox 55.0.3 (32-bit)
- Reproducible Code Snippet or URL: (My own localhost)

Better to explain it with pictures:

A-Frame 0.7.0:
![A-Frame 0.7.0](https://user-images.githubusercontent.com/8230270/30769213-016a4e98-9fe3-11e7-8ef9-bf5104f9aa63.png)

A-Frame 0.6.1
![image](https://user-images.githubusercontent.com/8230270/30769211-f5c3329e-9fe2-11e7-96d8-dabe39503341.png)


In A-Frame 0.6.1 (No code was modified when upgrading to 0.7.0), the oculus rift touch controller used to work with the hands-controller component. In addition, I wasn't receiving this r.mixer is undefined.

If I use the raycaster with the mouse, there isn't any issue.  Any ideas?

Edit (10:16 PM ET): 
This is the code with the entity:
`      <a-entity id="ctrlRight" hand-controls="right" super-hands sphere-collider="objects: a-sphere" laser-controls="hand: right"
` Thanks for the response!!!

@donmccurdy Well, you're right in that by removing laser-controls, hand-controls start working! I know it may look kind of iffy... Do you have any recommendations how would I switch between selecting and grabbing without resorting to a lot of menus (switching the laser-control on and off in a intuitive manner - UX wise).  **Description:**

The full-text search box on aframe.io in the docs section is not working anymore.

- A-Frame Version: 0.7.0
- Platform / Device: Any
- Reproducible Code Snippet or URL:

  Renderer size should only be updated on desktop in fullscreen mode.
Resizing the browser window while presenting leads to the canvas being resized accordingly, which updates resolution in the headset, causing a bad experience. Since Aframe does not rely on Three.js built-in mechanism for resizing the canvas this needs to be handled explicitly in a-scene.js.
Alternative to #3075, follow-up of #3031 
  Link Component

Fix for issue 3077 https://github.com/aframevr/aframe/issues/3077
Flipped the sign on sampleUV.x in the Portal shader that is used by the link component.
 Thanks @machenmusik When do minor bug fixes show up in the main release? Cool. Thanks.  Link Component

Fix for issue 3077 https://github.com/aframevr/aframe/issues/3077
Flipped the sign on sampleUV.x in the Portal shader that is used by the link component
 This is my first pull request, so if I did something particularly bone headed, please let me know. 
This should be a single character change to src/components/links.js I will if I can figure out how to do that Not sure if it was the best way to handle it, but I sent a new pull request with just that file changed. https://github.com/aframevr/aframe/pull/3079  360 photos displayed with <a-link> tag are rendered horizontally flipped. 

- A-Frame Version: 0.7.0
- Platform / Device: Windows 10 Firefox / Oculus Rift

To reproduce:
Take a 360 snapshot of A-Painter splash screen (https://aframe.io/a-painter/) using `<ctrl>-<alt>-<shift>-s`. Note that image is saved with the text facing the expected direction. Use this image in an <a-link>. Note that the image text is horizontally reversed.
 @machenmusik you are correct. It is fixed now. Sorry about that  https://aframe.io/docs/0.7.0/core/component.html#tick-time-timedelta

The number passed is a floating point number. Are they  seconds? The three.Clock() method divides the ms from Date.new() by 1000.

https://github.com/mrdoob/three.js/blob/master/src/core/Clock.js  **Description:**
Adds Windows Mixed Reality to the table of supported headsets

**Changes proposed:**
- Adds one line to the table
- Removes extraneous statement below the table
  **Description:**
Adds Windows Mixed Reality to the table of supported headsets

**Changes proposed:**
- Adds one line to the table
- Removes extraneous statement below the table Ok! I'll close this PR and re-issue it against master  **Description:**

- A-Frame Version:  0.7.0
- Platform / Device: Windows 10 Firefox 55.0.3 64 bit / Oculus Rift with Touch Controllers
- Reproducible Code Snippet or URL: In my simple example code (link below) The left hand controller will activate links just fine, but the right hand one does not

Relevant code:
```
<a-entity laser-controls="hand: left"></a-entity>
<a-entity laser-controls="hand: right"></a-entity>

<a-link href="https://aframe.io/a-painter/" image="#APainterSnapshot" title="Spiral Trails" position="0 1 -4"></a-link>
```

Full code:
https://gist.github.com/anonymous/44baf5e16cea6499c12cd33fd2c6095f  i can' find my textures when I import complex model into scene   **Description:**
three-bmfont-text uses the "mode" property to specify the whitespace mode. The text component just passes its component data directly to the bmfont library. 

Perhaps the component should be changed to rename the property before sending it to the library instead?

**Changes proposed:**
- Change the docs to use the actual bmfont property name.
 Gotcha, I'll open a new pull request with that change.  **Changes proposed:**
- adding an example related to events and interaction in A-frame
- editing `readme.md file` , adding `target="_blank" ` to `<a>` tags

This commit is ready for review. @ngokevin may be there are some back-end issue but this may be a best example to add and showcase.  when i use v0.6.0, the json-model entity can't be selected nor clicked
but v0.5.0 goes well.
so what is the best practice on v0.6.0?
any suggestion would be grateful

here is my code:
`
<a-entity id="bot" cursor-listener class="clickable" animation-control="clip: run; : .3" scale="3.5 3.5 3.5" position="0 -4 -2.5" rotation="0 0 0" animation-mixer="clip: idle"
            json-model="src: url(models/bot4.json);"></a-entity>
`  **Description:**
Since [#0dba182](https://github.com/aframevr/aframe/commit/0dba1828118eed1f69edb9c2bc403b587e3399be#diff-2bf1de3dd522db1514c4c8ff0e3256a8) the 2D render loop does not restart once the headset is disconnected, as `scope.f` is set to undefined in the `cancelAnimationFrame` function.

**Changes proposed:**
- Return the old value for `f` from the `cancelAnimationFrame` function
- Pass that returned value into the new `requestAnimationFrame` function  Hello, 

I have a plane with a html shader defined like this:
```

plane.setAttribute('id', idDesc)
plane.setAttribute('material', {shader:'html', target:tar, ratio:'height', transparent:true, side:'double', fps:1});
plane.setAttribute('look-at','#cam');
plane.setAttribute('height', 5);
plane.setAttribute('width', 4);
plane.setAttribute('visible','false');
```
The problem is, the plane is not fully displayed in normal mode but in full screen mode it is ok.
 Here is some screen shot: 
![notvisible](https://user-images.githubusercontent.com/16747271/30549081-1ebafb8e-9c94-11e7-9cf0-ff564f0b0bb2.PNG)
![visible](https://user-images.githubusercontent.com/16747271/30549085-22360c40-9c94-11e7-9c5e-29626848761a.PNG)

Do you have any explications for this situation?

  **Description:**

If you click links in the bottom menu, they don't get highlighted. The bottom two here:

<img width="364" alt="screenshot 2017-09-18 17 27 27" src="https://user-images.githubusercontent.com/48965/30535998-cd5f102e-9c96-11e7-9a23-916d2016e047.png">


- A-Frame Version: 0.6.0
- Reproducible Code Snippet or URL: https://aframe.io/docs/0.6.0/introduction/javascript-events-dom-apis.html I see the bottom menu highlight OK in Chrome 60:

<img width="303" alt="screen shot 2017-09-20 at 10 03 08" src="https://user-images.githubusercontent.com/151207/30635720-30ab1c22-9deb-11e7-9e64-cd838f641641.png">

But I've replicated the issue in Firefox 55. The 'Removing an Event Listener...' link does not get highlighted.  It might be a screen resolution thing. I have chrome 60 on my 15" Macbook. Similarly if I just scroll the page, the last link wont get highlighted cause presumably it doesn't know which link is active on my big screen. :P

<img width="1920" alt="screenshot 2017-09-20 17 21 04" src="https://user-images.githubusercontent.com/48965/30636461-19761998-9e28-11e7-8798-3737339a7976.png">
  Does this commit solve issue [#2701](https://github.com/aframevr/aframe/issues/2701)?  Just wanted to know because I wanted to take a jab at it if it is still available.  **Description:**
I'm currently working on an application, which will support both Daydream and GearVR controllers.
I've noticed that in official source code method addEventListeners() for both Daydream https://github.com/aframevr/aframe/blob/34d1988430c7541f8e28978b31bb6278ca2b7df7/src/components/daydream-controls.js#L66 and GearVR https://github.com/aframevr/aframe/blob/34d1988430c7541f8e28978b31bb6278ca2b7df7/src/components/gearvr-controls.js#L67 is never invoked. As I understand that's the method, which should emit `trackpad` or `trigger` events to the component.

For now, to solve my issue I've ended up writing my own component, which setups those events for daydream and gearvr controllers, but I think it requires an open discussion on how we should map trackpad/trigger events to raycaster/cursor intersection clicks.

- A-Frame Version: 0.6.1
- Platform / Device: Daydream Controller, Gear VR Controller


<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  I would be absolutely marvellous if someone could create a comprehensive aframe docst for Dash/Zeal/etc. I get:
```
$ npm install && npm run docs

> aframe@0.6.1 docs /Users/steven/code/aframe
> markserv --dir docs --port 9001

/Users/steven/code/aframe/node_modules/websocket.io/lib/socket.js:49
Socket.prototype.__proto__ = EventEmitter.prototype;
TypeError: Cannot read property 'prototype' of undefined
```  **Description:** Every time the user enters the app or VR they are moved upwards by userHeight if one is anything other than 0. and if it is 0 then it is the default value of 1.6.

This bug is present on non positional devices like GearVR, chrome and firefox.

- A-Frame Version: 0.6.1+, not present in 0.6.0
- Platform / Device: Android Chrome, Android Firefox55, Gear VR. Not present w/ VIVE. Others not tested.
- Reproducible Code Snippet or URL:
```
<html>
<head>
	<script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.js"></script>
</head>
<body>
	<a-scene>
		<a-plane position="0 -1.6 0" rotation="-90 0 0" width="1.8288" height="1.8288" color="#A48080"></a-plane>
		<a-plane position="0 0 0" rotation="-90 0 0" width="1.8288" height="1.8288" color="#A4A4A4"></a-plane>
		<a-plane position="0 1.6 0" rotation="-90 0 0" width="1.8288" height="1.8288" color="#80A480"></a-plane>
		<a-plane position="0 3.2 0" rotation="-90 0 0" width="1.8288" height="1.8288" color="#80C680"></a-plane>
	</a-scene>
</body>
</html>
```
https://youtu.be/awjY0GMPox8
 Here's a video if that makes it clearer:
https://youtu.be/awjY0GMPox8 Confirmed. It's happening to me too:

![increasinf-offset](https://user-images.githubusercontent.com/757942/30964996-ed1239e0-a453-11e7-9b95-59c9c77bf4e4.gif) I can confirm there is an issue with 0.7.0 with GearVR and Oculus brower. No issue with 0.6.0 and 0.6.1.
In 0.7.0, no issue with `<a-camera user-height="0" />`, there is an issue with `<a-camera user-height="1" />` (or any value > 0), it increases each time by user-height when you enter, exit, enter vr. The regression should be in a commit between 19 july (post 0.6.1 release) and 14 september (date of this issue) I guess. issue with https://rawgit.com/aframevr/aframe/4487c28/dist/aframe-master.min.js 29 Aug
no issue with https://rawgit.com/aframevr/aframe/ba7d108/dist/aframe-master.min.js 25 Aug #3000 introduced the regression.
If I remove this line https://github.com/aframevr/aframe/pull/3000/files#diff-6285039eee70ed830f70f7d2f7b7dfa5R60 in the look-controls component, I don't have the issue anymore. Please reopen. The fix I did only fixed it for a camera set to userHeight 0. See my comment https://github.com/aframevr/aframe/pull/3105#issuecomment-333461108 I really fixed the issue in #3111 I am getting this same issue as of today in aframe 0.7.0. I am using
```
<a-entity camera="userHeight: 1.6" look-controls>
</a-entity>
```
Edit - sorry it seems to be fixed if I use this instead
```
<a-entity position="0 1.6 0">
    <a-entity camera look-controls>
```  The documentation isn't very clear about how to specify screenshot size.

If I'm using this code:
`document.querySelector('a-scene').components.screenshot.capture('perspective')`
How do I specify a 200x200px screenshot?
  I have read "create with ar.js and aframe",I just find pattern & barcode marker, don't support nft?  it should be create ar with ar.js and aframe,im sorry  Tried out laser controls with WMR. Works much smoother and connect/disconnect is handled correctly  Thanks for the visibility change!

Regarding the other issues, it takes sometimes 5-10 seconds for a controller to be removed from the gamepads array after it is powered off. To determine if the not appearing issue is A-frame or edge, perhaps try the WebVR.info controller sample? https://webvr.info/samples/XX-vr-controllers.html  **Description:**
In a-scene there are 2 disconnect listeners registered, I believe one of them is supposed to be 'connect':
// Exit VR on `vrdisplaydisconnect` (e.g. unplugging Rift headset).
window.addEventListener('vrdisplaydisconnect', this.exitVRTrueBound);
// Exit VR on `vrdisplaydisconnect` (e.g. unplugging Rift headset).
window.addEventListener('vrdisplaydisconnect', this.exitVRTrueBound);

- A-Frame Version: master (4e984156f2f160015008e3f72adc09b71ba59d4c)
 Thanks!
Below vrdisplayconnect listener is removed, but never added, remove too:
window.removeEventListener('vrdisplayconnect', this.enterVRBound);
~Olga

From: Diego Marcos [mailto:notifications@github.com]
Sent: Wednesday, September 13, 2017 10:27 AM
To: aframevr/aframe <aframe@noreply.github.com>
Cc: Olga Milovanova <Olga.Milovanova@microsoft.com>; Author <author@noreply.github.com>
Subject: Re: [aframevr/aframe] vrdisplayconnect event listener should be registered in a-scene (#3045)


Good catch. Just fixed it on 47875a0<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Faframevr%2Faframe%2Fcommit%2F47875a0eb6b05f54acbcc1bb2c135be4b75fc33e&data=02%7C01%7COlga.Milovanova%40microsoft.com%7Cb2e0d3e1763c4c2ebdb408d4faccb518%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636409204499327290&sdata=Sf4C%2BOoVYgCUCCxcLXZh1FWJ36xjA3TY%2Bb618qOFfTQ%3D&reserved=0>

—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Faframevr%2Faframe%2Fissues%2F3045%23issuecomment-329239321&data=02%7C01%7COlga.Milovanova%40microsoft.com%7Cb2e0d3e1763c4c2ebdb408d4faccb518%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636409204499327290&sdata=1nru6eyy%2FnUrMv346KBalVUB5JJX0bzMXE8q5WH46vs%3D&reserved=0>, or mute the thread<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAd4FLxJR3j_chqOj1TGeP89qKiu4k8Jpks5siBB_gaJpZM4PWcuh&data=02%7C01%7COlga.Milovanova%40microsoft.com%7Cb2e0d3e1763c4c2ebdb408d4faccb518%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636409204499327290&sdata=yi%2FRLshZNFB5RN9a5eG8YaN4XbHKu6ZRv6XMQ%2B7%2Fz8M%3D&reserved=0>.
  **Description:**
Updates to be compliant with final assets (https://github.com/aframevr/assets/pull/30)

**Changes proposed:**
- Updated pointing pose node name
- Fixed pointing pose being incorrect when the controller is not at origin on initialization (calculating transforms from glTF root, not parent world position)
- Fixed laser-controls not showing pointing ray on controller reconnection
- Removed erroneous debug code.
  Fix #3041 

To be consistent with the A-Frame API, the patch allows the use of an `<audio>`
tag with a `MediaStream` object in the `srcObject` attribute. E.g.:

```js
// <a-assets></a-assets>
// <a-entity id="speaker"></a-entity>
const speaker = document.getElementById('speaker');
const assets = document.querySelector('a-assets');
navigator.mediaDevices.getUserMedia({ audio: true })
.then(stream => {
  const voice = new Audio();
  voice.id = 'speaker-voice';
  voice.srcObject = stream;
  assets.appendChild(voice);
  speaker.setAttribute('sound', `src:${voice.id}`);
});
```
 Though I can see the argument for not bundling streaming sources into `sound` I think the change to allow audio elements to get passed through untouched is still probably a good idea as it allows one to write a `stream-sound` component without having to do anything hacky. Thank you all for the feedback. Working on it. Hello @cvan, next version is ready for review.

@ngokevin, @netpro2k Despite I understand the argument against `sound` component dealing with streams, I think the patch gives you support for a very simple but common use case in a consistent and straightforward way. Furthermore, the source code might serve as a model for more complex implementations. As I mentioned above, I can totally see the argument for not adding this feature to the `sound` component, but I think the change in this PR to propertyTypes.js that allow audio elements to get passed through untouched is still probably a good idea, otherwise its difficult for people to write a component that handles MediaStreams themselves. Even if "preloading only" was the original intention, `<a-assets>` is also the place for mixins and, as far as I know, mixins can be generated dynamically. From the semantic perspective, it makes sense to contain all the experience assets inside the `<a-assets>` tag. From an API perspective, it is more homogeneous if media elements are treated equally (if the core sound component only needs the URL, that's perfectly fine).

Finally, considering the argument of providing only basic functionality in the core, I'm wondering why #3176 got merged. Yes the `sound` component only needs the url, which it can get from the audio element, other componets that may want an `type: 'audio'` property might need more, so it makes sense for the element to just be passed through unchanged, like canvas, video, and image properties.  Currently, only buffered audio files are supported by A-Frame but supporting [`MediaStream`](https://developer.mozilla.org/en-US/docs/Web/API/MediaStream) sources would enable interesting scenarios such as positional WebRTC audio.  Fix #3039 

The clarification use MutationObserver as an example but the warning generally
states that A-Frame is not updating the DOM. Thank you @ngokevin but I think the place @donmccurdy suggested  (`docs/introduction/javascript-events-dom-apis.md `) was more convenient since it is more likely developers will read it. Also, the warning was more general since we don't know all the DOM APIs that the optimisation could break. E.g.: another API also breaking is `.querySelector()` whith attribute selectors using the value of the attributes. I.e., this won't work:

```js
// <a-entity id="test"></a-entity>
document.querySelector('#test').setAttribute('position', '0 2 0');
console.log('element:', document.querySelector('[position="0 2 0"]'));
```  Following conversations on #3028 , it would be convenient to clarify this API won't work.
  That's correct.  At this time, we still have concerns about the security implications of open-ended link traversal while within VR.  We're discussing how to address these concerns with the WebVR CG and are hoping to land on something everyone is comfortable with in the WebVR 2.0 design.
In the meanwhile, Microsoft Edge does not force an exit from VR when history.pushState() is called, so that might be an interesting approach to investigate for now.    I am able to load a static glTF (v2.0), but when `play-all-model-animations` component is applied, the geometry no longer renders and the console fills with:

```
THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0
```

The glTF v2.0 model I am using is a simple cube rotating, scaling, and translating - exported from blender with embedded buffers using [KhronosGroup glfTF-Blender-Exporter](https://github.com/KhronosGroup/glTF-Blender-Exporter) master (5ffd6ef). If not a bug with the animations component in aframe, could be one with the exporter, or the three.js gltf loader itself.

I have also investigated that the glTF _does_ render in [babylonjs sandbox](http://sandbox.babylonjs.com/), but not in [threejs viewer](https://gltf-viewer.donmccurdy.com/).

- A-Frame Version: current master clone (dist/aframe-master.js - 0cceca4) 
- Platform / Device:  Latest Official Chrome - Version 60.0.3112.113 (Official Build) (64-bit)/ MacOSX Sierra 10.12.6
- Reproducible Code Snippet or URL: (**Codepen**): 

https://codepen.io/stephenrobertsuk/pen/qXePxd

cube glTF: https://s3.amazonaws.com/bug-figures/v2-locrotscale-cube-embedded-buffers.gltf


 Sure:
https://s3.amazonaws.com/bug-figures/cube.blend
Blender Version 2.79 (2.79 2017-09-04)   **Description:**
Edited and updated the introduction in index.md
**Changes proposed:**
-Reorganised content to follow a logical order as such: "What is is A-Frame", "Features of A-Frame", "Getting Started with A-Frame", "Off You Go!"
 Hello @dmarcos. That is the distinction I made (i.e., readme file versus introduction). The rationale is that an intro will have a logical flow whereas the readme is to get up and running as fast as possible. It therefore makes sense for intro to contain what A-frame is, it's main features, how to get started using it, etc.  **Description:**

Hi! recently I was playing with react-vr and I saw that the camera moves as my phone rotates or as I rotate myself, my phone doesnt has gyroscope, I saw some Aframe examples and if I rotate myself the camera doestn move, I test the same example with a phone with gyroscope and it does, Will be Aframe has the same feature that react-vr? It based on device motion events or something else?

- A-Frame Version: all
- Platform / Device: All
- Reproducible Code Snippet or URL: Any sample React VR app
 I test both react-vr example and aframe examples on Chrome for Android in Android 4.4.2 on LG g3

I rotate on myself and aframe doesnt rotate the camera, but in react-vr it does @dmarcos I look quickly on aframe source code and I see that it's using VR Controls to rotate the camera, I test a ThreeJS VR Controls example and if I rotate on my self the camera doesn't move but I use this example [https://threejs.org/examples/misc_controls_deviceorientation.html](url) and if I rotate on myself the camera also moves, so, if the device is mobile phone or some device with no gyroscope, it will be wrong use deviceorientation (like the example above) instead VR Controls?   distance model defaults to 'inverse' not linear

**Description:**
distance model defaults to 'inverse' not linear
**Changes proposed:**
change default from linear to inverse
-
-
  I used the exact same code sample used on aframevr/aframe 360-video example: https://github.com/aframevr/aframe/blob/v0.6.0/examples/boilerplate/360-video/index.html

All I changed was the source url. But the only thing we see is a dark page, not the 360 video we shot with our Samsung Gear 360.

<a-scene>
   <a-assets>
     <video id="video" src="http://siteurl.net/vrvid/cattle.mp4"
           autoplay loop crossorigin="anonymous"></video>
   </a-assets>

   <a-videosphere src="#video" rotation="0 180 0"></a-videosphere>
</a-scene> Here is the URL:

I am using Chrome and Chrome Canary on desktop and chrome on Samsung S8.
The browsers work fine with other 360 Pic (
http://vr.addisfortune.net/newsroom.php/http://vr.addisfortune.net/addis_cattle_market.php)
pages created using aframe.

Here is the one with the issue:
http://vr.addisfortune.net/cattle_market.php



On Thu, Sep 7, 2017 at 5:51 PM, Diego Marcos <notifications@github.com>
wrote:

> What browser? Can you provide a link that uses the video you captured?
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3030#issuecomment-327823739>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/ACURvJKKtezt1O9ZuoC4bxTP86-1ItWnks5sgAL2gaJpZM4PP6x7>
> .
>



-- 

Abel Seyoum Ar'aya

+251-912-37-77-21
+251-91-163-94-70

______________________________________

Ocellinet Software Development P.L.C
Your Partner in Automating Your Domain Expertise
www.Ocellinet.com <http://www.ocellinet.com/>
______________________________________
Dynamic S.tm
Dynamic Interactive Solutions
www.Dynamicstm.com
Dynamicstm@dynamicstm.com
_____________________________________________

The information in this email and in any attachments is CONFIDENTIAL and
may be
PRIVILEGED. If you have received it by mistake, please destroy this message,
delete any copies held on your systems and notify the sender immediately;
you
should not copy it or disclose its contents to anyone. All messages sent to
and
from Ocellinet Software Development P.L.C, Dzineware and Dynamic Solutions
may be monitored to ensure compliance with internal policies and to protect
our business.
Emails are not secure and cannot be guaranteed to be error free because
they can be intercepted, amended, lost, destroyed or contain viruses.
Anyone who communicates with us by email is taken
to accept these risks. The content of any email addressed to our clients is
subject to our usual terms of business.
 I get some security exceptions on the video source:
<img width="1720" alt="browser-sec-exception" src="https://user-images.githubusercontent.com/21671776/30209666-897bacf0-9499-11e7-99f6-ae143cad0d92.png">
 Any detail on the exception?

Does it mean I have to enable SSL on the sub domain?

On Friday, September 8, 2017, vrimaginar <notifications@github.com> wrote:

> I get some security exceptions on the video source:
> [image: browser-sec-exception]
> <https://user-images.githubusercontent.com/21671776/30209666-897bacf0-9499-11e7-99f6-ae143cad0d92.png>
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3030#issuecomment-328079034>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/ACURvE47kUuJiIS0a1UzePn6W1U6JVCQks5sgSTigaJpZM4PP6x7>
> .
>


-- 

Abel Seyoum Ar'aya

+251-912-37-77-21
+251-91-163-94-70

______________________________________

Ocellinet Software Development P.L.C
Your Partner in Automating Your Domain Expertise
www.Ocellinet.com <http://www.ocellinet.com/>
______________________________________
Dynamic S.tm
Dynamic Interactive Solutions
www.Dynamicstm.com
Dynamicstm@dynamicstm.com
_____________________________________________

The information in this email and in any attachments is CONFIDENTIAL and
may be
PRIVILEGED. If you have received it by mistake, please destroy this message,
delete any copies held on your systems and notify the sender immediately;
you
should not copy it or disclose its contents to anyone. All messages sent to
and
from Ocellinet Software Development P.L.C, Dzineware and Dynamic Solutions
may be monitored to ensure compliance with internal policies and to protect
our business.
Emails are not secure and cannot be guaranteed to be error free because
they can be intercepted, amended, lost, destroyed or contain viruses.
Anyone who communicates with us by email is taken
to accept these risks. The content of any email addressed to our clients is
subject to our usual terms of business.
 Try to host the video on the vr.addisfortune.net domain. That is how I initially started out.

I moved the file I the main domain for it has SSL enabled.

On Friday, September 8, 2017, vrimaginar <notifications@github.com> wrote:

> Try to host the video on the vr.addisfortune.net domain.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/3030#issuecomment-328144231>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/ACURvAyKVFL2yAMqrQSpiIO1HuIXp6wAks5sgWSjgaJpZM4PP6x7>
> .
>


-- 

Abel Seyoum Ar'aya

+251-912-37-77-21
+251-91-163-94-70

______________________________________

Ocellinet Software Development P.L.C
Your Partner in Automating Your Domain Expertise
www.Ocellinet.com <http://www.ocellinet.com/>
______________________________________
Dynamic S.tm
Dynamic Interactive Solutions
www.Dynamicstm.com
Dynamicstm@dynamicstm.com
_____________________________________________

The information in this email and in any attachments is CONFIDENTIAL and
may be
PRIVILEGED. If you have received it by mistake, please destroy this message,
delete any copies held on your systems and notify the sender immediately;
you
should not copy it or disclose its contents to anyone. All messages sent to
and
from Ocellinet Software Development P.L.C, Dzineware and Dynamic Solutions
may be monitored to ensure compliance with internal policies and to protect
our business.
Emails are not secure and cannot be guaranteed to be error free because
they can be intercepted, amended, lost, destroyed or contain viruses.
Anyone who communicates with us by email is taken
to accept these risks. The content of any email addressed to our clients is
subject to our usual terms of business.
 Another 360 shot hosted on the sub domain, yet not change!  fix wrong THREE.js geometry link  `MutationObserver` callback is not triggered when changing an attribute:
https://codepen.io/lodr/pen/LjoGwN
 But they are throttled and the issue breaks a property of HTML elements (_to be observables with a MutationObserver_). I don't think this should be closed. Then I think it is worth to mention somewhere in the documentation because this is an unexpected behaviour if A-Frame is claiming it is tool agnostic for being built on the top of HTML. I'm not saying that polling is not the way to go. I'm saying that if A-Frame claims to be built to be tool agnostic and to reuse the knowledge that web programmers already have, breaking HTML invariants or inherent properties is unexpected and should be warned. Anyway, I'll send a PR for clarifying the `MutationObserver` case in the FAQ.  **Description:**

- A-Frame Version: 0.6.1 
- Platform / Device: Windows 10


I have been developing an app that appears to work fine in chrome along with cordova for IOS 

I have tried to create a Desktop version using node webkit but i am getting the following error

>  ReferenceError: THREE is not defined

i understand that aframe.min has three js packaged within it so i'm a bit confused as to why this is not working. I know threejs works in node webkit so i wonder why aframe is having trouble. 

any solutions would be a massive help 
  Thanks! We are taking a look on Edge and will let you know


From: Diego Marcos
Sent: Wednesday, 6 September, 12:40 pm
Subject: Re: [aframevr/aframe] Handle vrdisplayconnect/vrdisplaydisconnect events in VREffect and VRControls (fix #3019) (#3026)
To: aframevr/aframe
Cc: Lewis Weaver, Mention


Tried this on Oculus / Firefox 55 and it fixes the issue.
—
You are receiving this because you were mentioned.
Reply to this email directly, view it on GitHub<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Faframevr%2Faframe%2Fpull%2F3026%23issuecomment-327591523&data=02%7C01%7CLewis.Weaver%40microsoft.com%7C80df86d4f7cb4ae24d8608d4f55f1a83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636403236202247883&sdata=tU3UBs%2BQvQiVygc7hwNeTue%2BHwJiRcOEfFu5aFEfuXE%3D&reserved=0>, or mute the thread<https://na01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fgithub.com%2Fnotifications%2Funsubscribe-auth%2FAYlX0OntJPIc01UNjrKAHPwrs2pbxlc-ks5sfvUggaJpZM4PN7E8&data=02%7C01%7CLewis.Weaver%40microsoft.com%7C80df86d4f7cb4ae24d8608d4f55f1a83%7C72f988bf86f141af91ab2d7cd011db47%7C1%7C0%7C636403236202247883&sdata=Q3sXgAbMLHFRDM7vm%2F6Ms%2Ff5bxxJyIEWXenOqbmTuLs%3D&reserved=0>.


 Hi Diego,
The issue described by Lewis is fixed in Edge too, but this leads to another issue:
1. Load the page 2. Connect a headset 3. Disconnect the headset -> page animation loop is broken.
I couldn't root cause, but VREffect is calling vrDisplay.requestAnimationFrame( f ); even without entering VR.
Does this repro in Firefox? I could open a new issue, but I think it should be fixed as a part of this change if it does. One more thing. After disconnecting the headset while in VR the behavior should be the same as after pressing exit VR button. Currently it stops rendering the scene. @dmarcos The disconnect is still not handled properly. After I disconnected the headset, Enter VR button appeared and clicking it enters fullscreen, but the animation loop is stopped, the scene is not being rendered anymore (fullscreen is black). 
If I plug in headset again, the Enter VR button starts VR as expected (but renders black too) The behavior I described above is with Edge + Win Mixed Reality. 
I just tried with Firefox + Vive. Unplugging freezes the split screen picture and plugging resumes VR. There is no option to return to Desktop on the webpage.
Upd: No errors in console Yes, on https://webvr.info/samples/00-hello-webvr.html I am getting all events for either USB or HDMI plug/unplug. Your change is handling the events, which I can see with the VR button working as expected (fullscreen/HMD is toggled correctly). 
vrDisplay/window.requestAnimationFrame loop terminates after headset is disconnected.
Don't have Oculus Thank you! With this change all looks good, rendering restarts. cancelAnimationFrame should be called in response to vrdisplaypresentchange to prevent spawning multiple render loops.  **Description:**
The cubes in the tracked-controls example do not move when grabbed by Windows Motion Controllers. Additionally, the hand-controls meshes are incorrectly offset from the element center when initially loaded, as they inherit the parent transform (which has been set by the tracked-controls component). Lastly, there is a race condition somewhere, such that sometimes for a single frame `mesh.mixer` does not exist causing a null reference exception.

**Changes proposed:**
- Set the hand-controls mesh position and rotation to zero to ensure it is not offset from the element center
- In the grab component, make a copy of the position rather than pointing to an object reference for use in delta calculations.
- Added a null check to mesh.mixer prior to use.
  is it here that it sets the face limit?  - https://github.com/aframevr/aframe/blob/master/vendor/rStats.extras.js#L121  **Description:**
Minor changes to the "Getting Started" section of index.md

**Changes proposed:**
- Exclamation (!) changed to full stop/period (.)
- Sentence beginning with "Or" changed to "Alternatively, "
 No worries. Feel free to change. It's just my first attempt at helping with docs :)  @larsbergstrom what was the outcome?  With OpenVR, you should see the VRDisplay's RAF callback occur about 4ms before the next vsync.  the frame submitted in this RAF callback will be presented in the vsync following, so you have more than 4ms to render it.  This timing optimizes for both lowest latency and tries to interleave the GPU utilization between the WebGL rendering and the VR reprojection / compositing.

It is not just the matter of getting sufficient refresh rate, but that the sub-frame timing is optimal.  I would suggest that the 2d mirrored display be rendered synchronously with the VRDisplay's frame, and let the browser handle the frame drops in the mirrored display to match up the framerate.

If physics, culling, and other CPU bound operations are not in a WebWorker, these things would be most optimally performed immediately after the submitFrame call in the VRDisplay RAF callback, preparing the next frame.  Ideally, the engine should be ready to perform the GPU heavy operations in response to the VRDisplay RAF callback, and only make minor adjustments to culling as needed to adjust for the updated headset pose at the start of the RAF.  **Description:**
When plugging in an HMD after page load, clicking the Enter VR button still takes you to the 2D mouse driven mode, rather than entering VR.

This appears to be related to ([three.js #12109](https://github.com/mrdoob/three.js/issues/12109))
A workaround could be to re-implement the VRControls class in a-frame; it is only an example in three.js after all and is quite a small class to begin with.

- A-Frame Version: master
- Platform / Device: Windows Mixed Reality
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/ Sorry I omitted that. I have tested the following combinations, it reproduces on all of them:

- Windows Mixed Reality & Microsoft Edge
- Vive & Firefox
- Vive & Chromium

Test steps were:

1. Ensure device is disconnected, and that VR software is shut down
2. Open browser, navigate to https://aframe.io/examples/showcase/helloworld/
3. Connect hardware, wait for the home screen to be visible in the HMD
4. Press Enter VR on the a-frame sample
5. It will enter full screen mode, rather than VR.

A page reload will allow you to enter VR normally.  **Description:**
Can we use a OrthographicCamera in Aframe?
I do really need a Orthographic view instead of Perspective view, but Aframe always uses PerspectiveCamera, can we add options in [camera]?

I tried to write a custom camera Component by replacing 'PerspectiveCamera' in 'src/components/camera.js', but it will show errors (e.g. this.system undefined ...)

Hope someone could give some help. 

- A-Frame Version:  <= 0.6.1 @donmccurdy Thanks, I know how to do a OrthographicCamera now. But I find out other components (e.g. cursor, look-controls) didn't work well with OrthographicCamera. It may need to hack many other components.
@dmarcos I'm doing a data visualization project, it was working with general 2D lib like d3.js, we're trying to re-create all lines in a 3D world. It works well with three.js, and much easier with A-Frame, but we don't like or need the perspective effect. @ngokevin sorry to hijack this old post, but I'm currently building a VR 'editor' and I do agree with that A-Frame should mainly focus on the Perspective Camera, but I do need to switch between PerspectiveCamera (when viewing what the user has build) and OrthographicCamera (when the user is designing). I'm unsure yet on how to make it work (the sample posted above, doesn't really work), but would you accept a PR if I were to build support for it? @promontis I am also trying to implement an orthographic camera but currently struggling with controls. Have you found any useful resources by any chance?
thanks in advance @Jesusbill nope... sorry. I've switched over to BabylonJS as it provides much more out-of-the-box in the areas that I needed, namely a 3D editor. Will use AFrame more for real VR  …element with the possibility to disable the behavior (on by default)

**Description:**
Support mouse input in WebVR by handling vrdisplaypointerrestricted and vrdisplaypointerunrestricted events in MS Edge. It is by design that mozPointerLock* and webkitPointerLock* implementations are not included.

**Changes proposed:**
- In response to vrdisplaypointerrestricted perform requestPointerLock on the canvas element that is used for WebVR rendering
- In response to vrdisplaypointerunrestricted perform document.exitPointerLock if the locked element is the canvas that is used for WebVR rendering
- Give the developer an option to turn off this behavior by calling disableCanvasPointerLock on the scene object.
  **Description:**
Added support for windows motion controllers, with tests, which fixed one or two bugs in tracked-controls class.

Also consolidated the logic used in tracked-controls utils and component for isControllerPresent to a single function.

This PR does not yet have the final controller GLB asset files, - I do plan on uploading those to the a-frame CDN however I am still waiting for the OK internally here.

**Changes proposed:**
- Added error callback on glTF-model component
- Windows Motion Controller support 
- Consolidation of tracked-controls duplicated logic to a single utility function
 Oh yes - I will add to the laser controls class and perform testing. Let me know if you are happy for me to update the PR with that additional commit (and the other minor resolved issues we have discussed) now, or wait. I've updated the PR to add laser-controls support. I would have preferred to do it without emitting the new 'controllerdisplayready' event; however I couldn't get the line-component to update the start/end positions once they have been set once. Have you encountered that?

Note - that the offsets and rotations default to zero/forward; but can be overridden by the data from the glTF model file (we store the offsets on specifically named nodes in the tree, similar to how we do the button transforms). Thanks all for the reviewing! I've pushed another revision that should address those 4 changes. @dmarcos  - Something I have noticed is that the controllers are quite dark in some scenes. It would be nice to have a high-intensity directional light (position: 0, 1, 0) that only lights the controller, not the rest of the scene. I can't see an obvious way to do this, have any tricks? That (which I'll get done now) - and also getting controller assets uploaded to the aframevr/assets repo so that we can modify the URL at the top of the file: [windows-motion-controls.js#L12
](https://github.com/leweaver/aframe/blob/c5df51e70dff4f830ee2bd9a6d2ebc0df39e32cf/src/components/windows-motion-controls.js#L12
) - I put a note this morning on aframevr/assets#1 related to this. I believe I am finished with my changes to this PR. Do I also need to also include the built files under dist/? Sorry forgot to hit enter on this comment box! As you probably noticed, right now this PR version is pointing to: https://cdn.aframe.io/controllers/microsoft/ - I have just submitted https://github.com/aframevr/assets/pull/29 so the URL should be valid soon.

Thanks very much for merging in!  **Description:**

While working on an AR.js + A-Frame app that allows users to draw/paint in AR, I wanted users to be able to use touch events to draw on a mobile device and use device orientation to change camera orientation. Touch events are included in `look-controls` by default, with no disable action allowed. Using `touchmove` events to draw resulted in drawing across the scene in a reverse pan because of the way that `touchmove` is coupled with `look-controls`. In magic window mode, there could be many applications of touch events that would not want to also change device orientation.

**Changes proposed:**
- Add property to look-controls schema
- Check property for true before binding, adding, and removing TouchEvent-related functions
 Thanks for the feedback @donmccurdy and @dmarcos . I will implement those suggested changes soon.  Ideally using fabien-services@benetou.fr instead.    

  
  Add some text to stress that not only you're in trouble if you write some code in a `<script>` tag after `<a-scene>`, but in general if you attach to `<a-scene>` right after it is in the DOM (which IMHO is what is surprising, when you are used to other JS frameworks).

Context: #3002.

**Description:**

**Changes proposed:**
-
-
-
 > What does attach to a-scene mean? Im not sure it provides any extra information. We've said where to put JS code and where not to put it.

Maybe "attach an entity to `<a-scene>`"? The fact is that when I read the current text, I thought it only applied to inlined scripts right after `<a-scene>` and I thought a clarification would help to newbies as me... The fact that it is not enough to write the code in a listener for the DOM ready event should be highlighted. I naively expected that the `<a-scene>` element was ready for children as soon as it was in the DOM, and maybe other would think the same.

However, as I said in the issue, if you don't see it this way, don't mind. I already took too much time from you. OK, thanks a lot!  See #3001 for the problem I found with some code that didn't run in Chrome. Thanks to @dmarcos and @ngokevin, who showed the need to wait until `a-scene` is loaded.

This section of the tutorial is the first one entering into details of how to write JavaScript code to manipulate a scene, so I think it needs these clarifications. Otherwise, you can lose a lot of time and energy until you realize your code should be in a listener for `loaded` of the `a-frame` element.

**Description:**

**Changes proposed:**
-
-
-
 Thanks a lot. However, maybe a more prominent text about that would help. I went through [that page](https://aframe.io/docs/0.6.0/introduction/javascript-events-dom-apis.html#where-to-place-javascript-code-for-a-frame), but I didn't notice the problem. Maybe because I was not using a raw script after `<a-scene>`...

I've submitted a new pull request, #3005, about this, just in case you agree a clarification is convenient. Just close it if not.

In any case, thanks a lot for the support and explanations. OK. Sorry for the noise.  **Description:**

The code below works well in Firefox 55.0 (shows a white box on a blue sky), but fails in Chrome (I've tested in "60.0.3112.113 (Official Build) (64-bit)" (for Debian) and some earlier versions). In Firefox, I don't see anything remarkable in the console, but in Chrome I see the errors below.

The problem seems to be in:

```
browser.js:111 core:a-node:warn You are attempting to attach <A-BOX> outside of an A-Frame scene. 
Append this element to `<a-scene>` instead. 
```

which is weird, since I'm only getting the a-scene, building a minimal a-box, and then attaching the a-box to the a-scene...

Errors in Chrome console:

```
A-Frame Version: 0.6.1 (Date 19-07-2017, Commit #a4b91bc)
index.js:87 three Version: ^0.84.0
index.js:88 WebVR Polyfill Version: ^0.9.36
browser.js:111 core:a-node:warn You are attempting to attach <A-BOX> outside of an A-Frame scene. Append this element to `<a-scene>` instead. 
browser.js:111 core:a-node:warn You are attempting to attach <A-BOX> outside of an A-Frame scene. Append this element to `<a-scene>` instead. 
material.js:151 Uncaught (in promise) TypeError: Cannot read property 'registerMaterial' of undefined
    at i.setMaterial (material.js:151)
    at i.updateShader (material.js:101)
    at i.update (material.js:47)
    at i.updateProperties (component.js:271)
    at i.module.exports.Component (component.js:52)
    at new i (component.js:458)
    at HTMLElement.value (a-entity.js:377)
    at HTMLElement.value (a-entity.js:544)
    at e (a-entity.js:513)
    at Array.forEach (<anonymous>)
...
value @ a-entity.js:495
(anonymous) @ a-entity.js:306
(anonymous) @ a-node.js:117
Promise resolved (async)
value @ a-node.js:115
value @ a-entity.js:302
value @ a-entity.js:84
value @ a-register-element.js:150
value @ a-register-element.js:150
(anonymous) @ (index):11
three.js:19802 THREE.WebGLRenderer 84
```

- A-Frame Version: 0.6.1
- Platform / Device: "60.0.3112.113 (Official Build) (64-bit)" (for Debian) 
- Reproducible Code Snippet or URL:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      var scene = document.querySelector('a-scene');
      var frame = document.createElement('a-box');
      frame.setAttribute('position', {x: 1, y: 2, z: -3});
      scene.appendChild(frame);
    });
    </script>
  </head>
  <body>
   <a-scene>
      <a-sky color="blue"></a-sky>
      <a-camera>
      </a-camera>
    </a-scene>
  </body>
</html>
``` Thanks a lot, and sorry for the noise. That makes a lot of sense.

However, I went carefully through most of the [Introduction](https://aframe.io/docs/0.6.0/introduction), including the [section on JavaScript](https://aframe.io/docs/0.6.0/introduction/javascript-events-dom-apis.html), and didn´t notice about that. Maybe it would be convenient to mention that early in that tutorial, since it can be very confusing when you're starting with A-frame. 

In fact, there is some code in the  [section on JavaScript](https://aframe.io/docs/0.6.0/introduction/javascript-events-dom-apis.html) that suggests that there is no need of waiting until the scene is loaded:

```javascript
var sceneEl = document.querySelector('a-scene');
var entityEl = document.createElement('a-entity');
// Do `.setAttribute()`s to initialize the entity.
sceneEl.appendChild(entityEl);
```

The text there comments about the importance of waiting until an entity is loaded for changing its settings, but says nothing about `a-scene`, which in the above code is assumed to be loaded.

In fact, the same happens with the code right below that one, where once again an entity is attached to `a-frame` without waiting for `a-frame` to be loaded.

I'm opening a pull request to that section stating all this: #3002.  **Description:**
Fixes issue of inconsistent head and controller height offset, for cases when stageParameters property on VR display is null.

**Changes Proposed:**
Provide default user height, if this is the case to be consistent with tracked controls. Thank you @dmarcos for review. I removed the properties under question. 
Merged master in order to get tests to pass.
Please let me know, if there are any more concerns. Thank you! These changes introduced a regression for non positional devices like GearVR, see #3051  **Description:**

- A-Frame Version: 0.6.1
- Platform / Device: chrome
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

Hello,
I want to make a asset component.

First, I set a    `<a-assets id="assets"></a-assets>`  element that did not have a child.
Second, added img source element by assets.appendChild(imgSource). 
And then assets.setAttribute('component','');
The attribute added well when i checked browser developer console.
But the component's init and update function did not work.

Does component can not be applied to `<a-assets>` element?
Anyone know?
thanks.
  @cvan perhaps irrelevant now, but link-traversal example, this codepen (https://s.codepen.io/machenmusik/debug/XaVMWJ/mVAbGERyxabk) and a non-public app @dmarcos ok, as we discussed at OC4 Thanks and sorry @cvan!  **Description:**
I was trying to use these examples and realized they were not working with the most recent versions of A-Frame. Made a copy of the codepen example and added some changes to make it work.

Also the HTML example in the page works different, so I made a few changes, the 'fill' property in both animations started with 'backwards', now the first one starts with 'forwards', and removed the 'fuseTimeout' since it seems that the 'dur' properties in animation Entity take care of that.

  **Description:**

- A-Frame Version: 0.5.0
- Platform / Device: Any device where that has no dedicated display for VR
- Reproducible Code Snippet or URL: -

I am trying to get a message to show when a user has its mobile phone in VR mode but holds it inin portrait position.
I see that there is some code in `aframe/src/components/scene/vr-mode-ui.js:136` to do this.
Unfortunately, it is never triggered, because when entering VR the scene locks the phone in landscape mode (`aframe/src/core/scene/a-scene.js:246`)

Are there any plans to make this feature available again by not locking the orientation of the phone ? I believe it would be better from a UX perspective. I have done further research and I think I understand now, I'll share its results here in case it helps some fellow developers.

The browser on which I want this feature to work is Chrome for Android.
With a vanilla version of the browser, I am able to reproduce the bug as shown here : 

![img_20170825_100036](https://user-images.githubusercontent.com/17003643/29711731-45447320-898e-11e7-9c64-1e5a3a555493.jpg)

But there is a caveat. When the WebVR flag (in `chrome://flags`) is enabled, the WebVR viewer changes : 
- When the flag is turned off, a bespoke viewer is used
![screenshot_20170825-123411](https://user-images.githubusercontent.com/17003643/29716271-a1a3a064-89a2-11e7-80ac-661a70715734.png)
- When the flag is turned on, the Cardboard Viewer is used
![screenshot_20170825-142655](https://user-images.githubusercontent.com/17003643/29716297-ba4659b8-89a2-11e7-82a7-beecb4676610.png)

The Cardboard Viewer will end up being the default one, and its behaviour cannot be changed via HTML code. So this feature cannot be implemented on it.
It might be interesting to implement it on the "bespoke" viewer, though. @ngokevin any thoughts on the above ?  **Description:**

- A-Frame Version: 0.6.1
- Platform / Device: Chrome / Samsung Galaxy S8
- Reproducible Code Snippet or URL: 

I have created a scene with a 8192x4096 sky texture, which renders perfectly on desktops, and also in browser on a Galaxy S8, but when VR view is entered, the sky texture is extremely aliased, as if the filtering is dropped down to a "nearest" filter. If inspecting the actual texture object in the scene, the filtering is on the texture is specified as a THREE.LinearFilter.

The texture has been broken down into two 4096x4096 half-domes, since 4096x4096 is the maximum texture size the mobile GPU supports.

Any idea what could be causing this? It might be interesting to note, that if the scene is rendered with polyfill in firefox on the device, the texture is filtered correctly, and the aliasing is completely gone. Using daydream in Chrome. Also the same thing occurs in Chrome beta. Haven't tried it with Oculus/Samsung Internet/Gear VR, but I can give it a try as well. Here's an example where the issue occurs: https://superhelix.dk/vr/test1/ Furthermore, if VR view is exited, by pressing the app button, the texture then also becomes very aliased in the normal view. I have tested the scene on a Vive headset through Firefox, and the aliasing does not occur here, so it is something specific to Chrome. Ok, I don't think this is fixable by a-frame as such. The problem occurs because Chrome's Daydream renderer apparently subsamples the rendering quite a bit. If I manually resize the rendering canvas, the aliasing disappears, but performance takes a hit.

I guess this should be closed, sorry for the noise ;)

If I am wrong, and this is actually caused by the way that a-frame initialises the rendering system, I'd be interested to hear about it. @markqvist I don't have specific info but have anecdotally heard that AA is forcibly prevented on several mobile platforms. Not sure that you've encountered a bug rather than a "feature" (or, compromise...)  **Description:**
Loading gltf error(the gltf have animation):
```
Uncaught (in promise) TypeError: Cannot read property 'slice' of undefined
    at GLTFLoader.js:979
    at _each (GLTFLoader.js:570)
    at GLTFLoader.js:975
    at <anonymous>
```
- A-Frame Version:0.6.0
- Platform / Device: MacBook Pro (13-inch, 2016, Two Thunderbolt 3 ports) Chrome 60.0.3112.101(64)
- Reproducible Code Snippet or URL:
```
   <a-scene>
        <a-entity position="0 0 4">
            <a-camera></a-camera>
        </a-entity>
        <a-assets>
            <a-asset-item id="tree" src="./monster.gltf"></a-asset-item>
        </a-assets>
    </a-scene>

```
this is monster.gltf(https://github.com/mrdoob/three.js/tree/dev/examples/models/gltf/Monster)
<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  While playing around with this question on [SO](https://stackoverflow.com/questions/45805894/d3-js-makes-entity-disappear-while-using-animation-function-of-a-frame/45806052#45806052), I got into a weird bug, which I don't see reported anywhere.

When an empty` <a-animation>` is appended to a entity, its parent dissapears, because its rotation is changed to 'NaN 0 0'.

Normally i don't see a reason why anyone would append an empty `<a-animation>`, but in that case, it seems the empty entity is created on d3's `append("a-animation");` and I couldn't fix it by changing the rotation attribute, like i tried [here](https://jsfiddle.net/gftruj/soetzojt/2/).

A clean reproducible Code Snippet is [here](https://jsfiddle.net/gftruj/oss28zhs/).


- A-Frame Version: 0.6.1

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**
A few of the a-frame primitives use 'height' and 'width' to refer to properties of the geometry, but the docs seem to assume they're referring to properties of the material. (I'm not sure if this suggests an underlying problem with whatever originally generated these tables in the docs, but it was suggested in the Slack that I just go ahead and edit the docs manually, so I have.)

**Changes proposed:**
- Fix the 'component mapping' and 'default value' for the 'height' and (if used in the geometry constructor) the 'width' attributes, in the docs for the 'a-box', 'a-cone', and 'a-cylinder' primitives
- It seems like someone already fixed the component mappings in 'a-plane', but didn't fix the defaults; I've done that now  **Description:**

The model was converted from .obj to .gltf using [Khronos Blender glTF 2.0 exporter](https://github.com/KhronosGroup/glTF-Blender-Exporter). See the [source files](https://community.elphel.com/files/gltf_test/).

- Firefox:
_TypeError: r.buffers[e.buffer] is undefined[Learn More]_
- Chrome:
 _Uncaught (in promise) TypeError: Cannot read property 'slice' of undefined
    at GLTFLoader.js:977
    at i (GLTFLoader.js:570)
    at GLTFLoader.js:975
    at \<anonymous\>_

- A-Frame Version: 0.6.1
- Platform / Device: Kubuntu 16.04, Chrome and Firefox
- Reproducible Code Snippet or URL:
https://community.elphel.com/files/gltf_test/aframe.html

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  Would it be possible to propagate the `model` property from the `daydream-controls` component up to the `laser-controls` component so that we can hide the controller model but still use laser controls?

https://aframe.io/docs/0.6.0/components/laser-controls.html
https://aframe.io/docs/0.6.0/components/daydream-controls.html Yes! I would still like Daydream controls, I had already tried this before posting the issue and it didn't seem to work:

```html
<a-entity laser-controls="hand: left" daydream-controls="model: false"></a-entity>
```

I just tried again and it didn't work again, no controller model, but also no tracked laser pointer either.

However, the whole reason I was trying to have Daydream-tracked lasers without a model was because I was trying to reduce lag on loading of the 3D controller model, in trying to resolve a bug where the controller wasn't tracking at all for a colleague of mine.  But, overnight I realized that we had just forgotten to enable the `gamepad-extensions` flag on their Pixel device.

Some follow ups:

- For people who still may want to have controller tracking, laser pointing, but no controller model, the workaround that you posted would be fine (for me, anyway) if it worked as expected, but it doesn't seem to at the moment.  Should I open a new issue for that?
- It might be useful for the A-Frame controller docs to put in reminders that the `webvr` and `gamepad-extensions` flags might need to be set on mobile (and possibly other headsets?)..

Thank you!

 Thanks, @ngokevin ! Makes sense.

How do you feel about this also working?

```html
<a-entity laser-controls="hand: left" daydream-controls="model: false"></a-entity>
```  **Description:**

- A-Frame Version: 0.6.1
- Platform / Device: Chrome / Google Pixel
- Reproducible Code Snippet or URL: https://slime-cereal.glitch.me

**Steps To Reproduce**

- Load URL on a Google Pixel device in Chrome
- Put on Daydream View Headset
- Calibrate Daydream controller...
- Point laser at orange/black striped model
- Expected: raycaster truncates at model
- Observed: raycaster shoots right through model, and also through two other OBJs I also tested

**Note**
- Raycaster line seemingly truncates correctly when using the `laser-controls` component but not the `raycaster` component

![screenshot_20170816-144602](https://user-images.githubusercontent.com/699840/29380029-5cbe618a-8292-11e7-971d-509f6ae38aae.png)

 Possibly related to this older issue: https://github.com/ngokevin/aframe-core/issues/797 @machenmusik Yes, it can, I had the same problem, solved it this way:
```
  var raycaster = document.querySelector("#someCamera").components.raycaster;
  var someObj = document.querySelector("#someObj");
  someObj.addEventListener("model-loaded", () => {
    raycaster.refreshObjects();
  });
```
  It seems there are actions for each finger indeed. Switch to animation layout and then:

![image](https://user-images.githubusercontent.com/359872/29466272-93481204-843c-11e7-98f2-a7775e096ca2.png)

But the mesh breaks with some of them, the overall scale changes also.. it needs a detailed analysis.  Adding a animation on the color property and adding the repeat attribute cause the color to be set to #NaNNaNNaN on the next repetition.
The entity becomes white.. :/

- A-Frame Version: 0.6.0
- Platform / Device: MacOS - Chrome 60
- Reproducible Code Snippet or URL:

```html
<a-box transparent="true" color="#007AFF">
  <a-animation attribute="color" to="#000" dur="2000" repeat="Infinity" easing="ease-in-out-bounce">
  </a-animation>
</a-box>
```
Cheers!
Etienne I don't think `Infinity` is a valid value of the repeat attribute. Perhaps you meant `indefinite`?

```html
<a-box transparent="true" color="#007AFF">
  <a-animation attribute="color" to="#000" dur="2000" repeat="indefinite" easing="ease-in-out-bounce">
  </a-animation>
</a-box>
``` @bryik same with any integers ;)  Try adding a `from` attribute:

```html
<a-box position="0 0 -5" transparent="true" color="#007AFF">
  <a-animation attribute="color" from="#007AFF" to="#000" dur="2000" repeat="indefinite" direction="alternate" easing="ease-in-out-bounce">
  </a-animation>
</a-box>
``` Awesome it works haha! Thank you! Although it would be great if this was done by default :)   Do you mean something like this?  https://glitch.com/edit/#!/hollow-author

```html
<!DOCTYPE html>
<html>
  <head>
    <title>360 degree video</title>
    <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
    <script>
      AFRAME.registerComponent('cursor-listener', {
          init: function () {
          var el3 = document.querySelector('#vid');
          el3.parentNode.removeChild(el3);
          this.el.addEventListener('click', function (evt) {
              var sceneEl = document.querySelector('a-scene');
              var el1 = document.querySelector('#textt');
              sceneEl.appendChild(el3);
              el1.setAttribute('visible', 'false');
              var el4 = document.querySelector('#camm');
              el4.parentNode.removeChild(el4);

    });
  }
});
    </script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <video id="video" src="https://ucarecdn.com/fadab25d-0b3a-45f7-8ef5-85318e92a261/"
               autoplay loop crossorigin="anonymous"></video>
      </a-assets>
      <a-entity id="vid">
      <a-videosphere src="#video" rotation="0 180 0"></a-videosphere>
        </a-entity>
     <a-entity id="textt" cursor-listener>
      <a-text align="center" value="Look here to begin" geometry="primitive:plane; height:1.5; width:3.5" material="color:#ef2d5e" position="0 1.5 -5"></a-text>
      </a-entity>
   <a-entity position="0 2.2 4">
    <a-entity camera look-controls wasd-controls>
      <a-entity id = "camm" position="0 1 -4"
                geometry="primitive: ring; radiusOuter: 0.30;
                          radiusInner: 0.20;"
                material="color: cyan; shader: flat"
                cursor="fuse: true">
        <a-animation begin="click" easing="ease-in" attribute="scale"
             fill="backwards" from="0.1 0.1 0.1" to="1 1 1" dur="150"></a-animation>
        <a-animation begin="fusing" easing="ease-in" attribute="scale"
             fill="forwards" from="1 1 1" to="0.1 0.1 0.1" dur="1500"></a-animation>
      </a-entity>
    </a-entity>
  </a-entity>

<a-sky color="#6EBAA7"></a-sky>
      
    </a-scene>
  </body>
</html>
``` Here is one http://vatelier.net/MyDemo/AFrameVideoExample/ but not on Glitch as iOS still requires videos to be on the same domain. @ShaguftaMethwani This example isn't working for me on PC.  Can't we use js video api to make this work? https://aframe.io/examples/showcase/videosphere/ is the current example, which works fine AFAIK  **Description:**

I recently received a sweet Mozilla brand corrugated paperboard mobile VR viewer (no trademark issues here), and I was sad to learn that the nifty touch button/lever didnt't work with `cursor`.

This PR modifies `cursor` to listen for touch input events in addition to mouse events. With this small change, mobile users can have the same level of control as mouse users. This is especially useful in situations where gaze fusing is not optimal, like dragging an object around the scene to move it. (Here's an example of this with this modified version of `cursor` & `super-hands`: https://deserted-ladybug.glitch.me/)

**Changes proposed:**

- Register 'touchstart' and `touchend' listeners on the canvas alongside 'mousedown' and 'mouseup'

**Notes:**

f2bff70 is optional, it centralizes the listing of event types to facilitate future maintenance, but that might be unnecessary 

**Concerns:**

* It's not smart about multiple touches - the first 'touchend' will terminate the `cursor` interaction even if more touches remain active. I'd be happy to add handling for this, but didn't want to add complications unnecessarily. 
* It does not implement 'touchmove' alongside 'mousemove'. Since the event APIs for each are structured slightly differently, this would be more than a simple change. Again, happy to add this if you think it's worth the additional complication
* This might cause some unexpected behavior for projects using `cursor` for gaze fusing and capturing touch input manually for other purposes. If preferred, I could extend the schema make this configurable, either as a flag or as a list of event types.

Thanks to @andrewvee on slack for a discussion that prompted
 I think we're safe because these are registered on the canvas, so no entity events will bubble to these listeners. Will double check on Vive Here's the same example with the 0.6.1 A-Frame dist: https://grey-bench.glitch.me 
And it doesn't respond to touch on my surface in FF55 or Chrome nor on my Moto X in FF55

Putting some listeners on canvas to investigate, I see that a quick tap (our double tap on the surface) will generate 'mousedown', 'mouseup', and 'click' all at once, so that should trigger the cursor. 

However, pressing and holding or dragging does not generate any of the mouse events, so my example where the idea is to press and hold while moving the phone around doesn't work.   **Description:**

In Windows (arguably a popular beginner environment), Python 3 installs the `python` binary, same as Python 2. The `python -m SimpleHTTPServer` command mentioned in the docs will not work in Python 3, which can be mildly confusing to people unfamiliar with the change.

**Changes proposed:**

- Add the alternative command for Py3.
  …at mobile tilt can be disabled

**Description:**
This adds to the component look-controls schema: "tiltEnabled: false/true (default)"

**Changes proposed:**
This allows disabling the current default behavior that tilting a mobile device changes the orientation of the camera--while not in VR mode--i.e. "look around with your phone" mode. The current behavior (tilting) remains the default.
-
-
 I considered that but then if you want to disable tilt only for non-VR mobile mode and then the user enters VR-mode, the code would have to react and reset the hmdEnabled flag for the HMD to work properly. I'm assuming this, I didn't actually test to see if that would be the case. Okay then. I'll just proceed with your recommendation of writing a customized/different look-controls component. I will probably want to do more with it anyway. My goal is to help build websites that can transition somewhat seamlessly from manually navigated 3D (the most likely usecase) through "tilted"/"look around" mobile 3D (less likely), and then finally VR (the coolest, but most niche at this time). I understand your desire to keep A-Frame focused on VR, and possibly AR as well.  Testing with https://wmurphyrd.github.io/aframe-super-hands-component/examples/portals.html
so with aframe 0.7.1 and latest oculus browser, it now loads correctly the scene when traversing a portal. It was not the case in september, it did quit the vr mode and there was some sort of infinite loop.
But after traversing two portals, it starts dropping frames, and eventually freeze... Well today it froze after 4 portals. Probably a memory issue? Is the previous scene freed when we enter a portal? depends whether a-frame is caching things that can be freed e.g. image pano textures

this magic incantation used to force that texture cache to be flushed 
`AFRAME.scenes[0].systems.material.clearTextureCache()`
but that may not be what you want
 I don't know if I can analyze the memory of oculus browser with the remote chrome debugger on my machine. I didn't try it yet, I don't have much experience with this memory recording stuff on chrome.
I know how to use the allocations recording on firefox though, so I can already try with firefox on my machine to see if the memory is increasing when traversing portals. @dmarcos you're right, the link component just do a `window.location = href` in the end.

I did some benchmarks with chrome profiling tool. I'm not seeing a real memory issue, only the usual increase and decrease of memory from the GC of camera position/rotation created objects and arrays (see #3183)
By looking at profiles and the code, I did find an optimization to do in the link component #3224 though.

I guess you can close the issue, the vr2vr traversal works great in itself. The freeze or crash of the Oculus browser is an issue of this browser.  I have a basic a-frame scene with oculus-touch-controls (same thing with laser-controls too). Its off the real angle of my controller by almost exactly 45 degrees. I'm not applying rotation to the controller or any of the parent entities, I've stripped my a-frame to just controller entitties and still have this issue.

![oculus-error](https://user-images.githubusercontent.com/223277/29228993-ee3610a0-7e90-11e7-8125-7eb33f22e765.png)

The blue 'cone' is showing the correct level "straight ahead" vector. Both the oculus controls and the laser ray are tipped 45 degrees relative to reality. This is with A-Frame 0.6.1 IMO, this should be re-opened because: the model of the controller doesn't match the physical position of the controller. In this image I am holding the top surface of the controller level with the "correct" cone. But the model represents the controller as if this surface was tipped down by 45 degrees. But its not.

i.e. BOTH the direction of the laser AND the position of the controller are off by 45 degrees. 

I can understand that the direction of pointing could be potential, but the controller-as-displayed should match the orientation of the real controller, and its off by 45 degrees. In other words: the controller model is way off representing the true orientation of the controller (way off by 45 degrees in one axis) This is still an issue in 0.7.... its pretty disconcerting to have the controller in VR not match your actual hand position by 45 degrees. Here's a workaround for anyone else affected. It also documents the necessary tweaks to fix this upstream (one fix to the laser-controls raycaster, one fix to the controller mesh).

Run `fixOculusTouchPose()` right after loading aframe.js.

```
  function fixOculusTouchPose() {
      // FIX ONE: point raycaster in the right direction
      AFRAME.components['laser-controls'].Component.prototype.config['oculus-touch-controls'].raycaster.direction.y = 0;

      document.addEventListener("DOMContentLoaded", function () {
        document.querySelector("a-scene")
          .addEventListener("loaded", function fixModelPoses() {
            Array.from(document.querySelectorAll('[oculus-touch-controls]'))
              .filter(el => el.components['oculus-touch-controls'].controllerPresent)
              .forEach(el => {
                el.addEventListener('model-loaded', () => {
                  // FIX TWO: align model with raycaster (and reality)
                  var mesh = el.getObject3D('mesh');
                  mesh.rotateX(Math.PI / 4);
                  mesh.translateY(0.06);
                });
              });
        });
      });
    }
``` I found that I had to do a slightly different workaround
https://glitch.com/edit/#!/gainful-pirate?path=oculus-touch-controls-hack.js:1:0  **Description:**
It is currently impossible to provide a full non-HMD experience on mobile devices. The look-controls component bypasses `hmdEnabled` checks for mobile devices, and prevents touch-based pitch adjustment.

In some contexts, mobile users may want to choose between using their phone as an hmd or using pure touch-based interaction.

**Changes proposed:**
- Add new `mobileHmdAlways` configuration option that toggles the `isMobile` bypass.
- Add new `mobileFixedPitch` configuration option that toggles the `onTouchMove` pitch adjustment.
- Default both of the new options to preserve current behavior for backwards compatibility. Developers can use these options to opt in to the new behavior. Thanks for the quick response! I totally understand and that definitely makes sense for most customizations. I'd argue my pull request isn't a customization, but more a compromise of a bug fix.

I don't really want to change anything about how look-controls behaves, essentially, except I want mobile and desktop experiences to be consistent (in other words I don't want mobile devices to get special treatment). Right now look-controls carves out exceptions to its own behaviors (touchmove vs mousemove controlling pitch, `hmdEnabled=false` is ignored), *just for mobile devices*. Shouldn't that special mobile vs. desktop behavior be optional? Thanks so much for taking the time to debate this issue! I don't know much about the other PRs that have been proposed, but here are my arguments in favor of this PR. I had mentioned (1) before, but the conversation seems to have moved on and I wanted to bring it up again because it's relevant to (2).

1. This could really be considered a bug report instead of a feature request: the switches added in the PR are a backwards-compatible way of making things consistent. Phones are not handled consistently compared with all other devices, which feels like a bug. For example, `hmdEnabled` is ignored, only for phones. Pitch control is locked, only for phones.
2. @dmarcos's concern about opening the floodgates is totally valid, but here's one critical difference: as described in (1) above, this isn't really adding new features or behaviors to `look-controls`; it's restoring current functionality across all devices. I don't think there are many other switches anyone could propose that fall within the same narrow scope; there aren't (to my admittedly limited understanding) a bunch of other places where `look-controls` carves out special exceptions just for some class of devices. That could be an easy test to limit the kinds of PRs that would be considered in the future.
3. As @ngokevin mentioned, web developers love their responsiveness, and there are definitely use cases out there (and cases like mine will probably grow, especially if this PR goes through). Making this small change will greatly expand aframe's applicability for web devs (allowing full-featured mixed-device operation), increasing interest and gaining contributors who are eager to help. I don't know if that's a good thing, but probably it is? Hooray for OSS!

On a related note, +1 for @machenmusik's suggestion about exposing more hooks into `look-controls`. It's currently fairly prohibitive to clone a complex component like `look-controls` and be forever locked into merging upstream for the 99% of unchanged code. :)

And lastly, thank you guys so much for your wonderful work that makes this all possible. It's truly appreciated, no matter how this PR goes. That would solve half of the PR, but what about fixed pitch? Is there a reason for defaulting to fixed pitch? It seems weird that mobile devices are gimped out of the gate, especially with the preponderance of Google Cardboard and related "VR headsets" that people use with phones - I added flags to be backwards-compatible, but it's arguably a bug and this is a bugfix. Would it help if I reclassify?

Copying look controls means buying into constantly merging and updating. There's a reasonable standard that could prevent this being a floodgate issue (see [August 28, 2017 comment](https://github.com/aframevr/aframe/pull/2964/#issuecomment-325404273), item #2) in this particular (bug-fixy) case. @dmarcos That probably depends on the usage - for example, all of our scenes have spherical image skyboxes with scenery, so you're not likely to forget which way is down (it's where the grass is),
 especially since it doesn't let you go 'round the horn and flip upside down. Anecdotally, we've hacked the fixed pitch out, and hundreds of users have tried it without being confused or disoriented (yet, anyway). Shouldn't the fixed pitch behavior be opt-in (or at least provide an opt-out)?

Thought from another angle, why isn't it considered as disorienting to pan the scene using mouse on a desktop (i.e. why doesn't desktop + mouse have fixed pitch)? The gestures are very similar: up is up, down is down, and you can't go past the zenith in either. As you wish; I'd think a simple opt-out for a workaround would make it more suitable to the majority of cases, but it's not my project.

I'm unclear: will `hmdEnabled:false` at least be respected on mobile devices going forward, as @ngokevin suggested in https://github.com/aframevr/aframe/pull/2964#issuecomment-333301342? If that requires an update to the PR, I'm happy to do it - half-acceptance is better than zero-acceptance.  Information regarding plane and camera default values

**Description:**
More info for guide
**Changes proposed:**
- 
-
-
 I agree that this is not specific to 360 image example, but it does provide a little more information which would have been helpful when going through the guide. I found myself on the Slack channel in order to get over these hurdles.   Oh, you're right. The docs say it's "0 1.6 0" in desktop mode and "0 0 0" in VR mode. I'm in desktop mode.
https://github.com/aframevr/aframe/blob/master/docs/primitives/a-camera.md What if the comment says something more generic like "You will need to reposition the camera in order to see the planes because of the default settings. You can reposition the camera with "WASD". I'll look at the first guide again.

Are we considering the guides to be sequential or are each stand alone?  Related to Issue #2961

**Description:**

**Changes proposed:**
-
-
-
 What would you recommend doing? It was frustrating not understanding why the example was not working properly. Not yet. I will look into whether the issue is with the `event_set` component or if it is with something else within the code base first.  We want the content of our blog to be relevant for our community and so, we are opening this issue to track all the ideas, suggestions or requests for the content you want to see published.

When participating, think for content relevant to everybody and try to not self-promote. Use GitHub reactions to vote for the ideas you find interesting and help us to keep the community well informed.

[Jump to the conversation](https://github.com/aframevr/aframe/issues/2957#issuecomment-321643672)

## Content requests/suggestions summary

### August, 7th
* [A-Frame 101](https://www.whitesmith.co/blog/a-frame-101/) introductory materials by @afvc  @ngokevin @dmarcos I recently made a tutorial that has lots of little pieces of code, but in codepen, not glitch. I can pass them to glitch if you want to.
And it has a lot of references to the documentation within the code comments as well.
I've made code for most of the basic topics, except audio and video, I think https://www.whitesmith.co/blog/a-frame-101/ Awesome @afvc  can u please write the examples blog for "touch controls" in a-frame @ngokevin in regards to contributing glitch examples, does it not matter whose glitch account they reside on, or would you want to remix them onto the aframe account and link that version in the docs? @ngokevin The self-promotion from having A-Frame docs drive traffic to your personal Glitch account would be a nice incentive for contributing examples.

However, I remember one time I used a Glitch to demonstrate an issue I filed, then later accidentally deleted all the text from the HTML file in the Glitch and couldn't figure out how to restore it as it had so helpfully auto-saved the change. 

I wonder if linking to people's Glitches that can be changed or broken at any point in the future might lead to poor experiences for A-Frame docs users I'm going to gather the suggestions/requests of content per week. I'm happy to see the conversation moves forward. Thanks @afvc for stepping forward and suggest more content. @delapuente maybe a tutorial that explains the differences between using AR in mobile and desktop? It's a simple thing, but for example, I was stuck on it for several days until @cwervo gave me a hand. I can make a codepen or glitch with it.
 Also, I've been seeing loads of people that even with the help of the A-Frame docs have not managed to use obj/dae/gltf properly on blender. For several reasons : not understanding how to install gltf exporter on blender or for not having relative paths in textures and much more.
If there was a tutorial that showed two or three different ways to deal with these issues maybe less people would face them?
(I've had this problem myself for a while, with no solution yet) @ngokevin, @dmarcos and I considered this was a good idea. I don't understand why to close this issue. It was not for me only but a tool for the community to participate demanding more content.  **Description:**
a-image fails totally with the very same code as in the documentation. runs smooth with 020, but sucks completely with later versions as well as the master version. no image is visible, but is there in inspector.

- A-Frame Version: master
- Platform / Device: mozilla nightly-windows
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 yeah. I just did that it worked.  I am quite sure that the story is:
- yes, it is impossible to start audio (or video) without a gesture
- this also is true for Chrome because the iOS Chrome is still based on the underlying Webkit (enforced by Apple) so Chrome on iOS is just a glorified Safari with Google Services built in.

I am not aware of any plans that this might change with iOS11.

There are some threads on Stackoverflow with workarounds that were all somehow 'fixed' by Apple. From Apples standpoint this is the desired behaviour because they don't want their users to max out their bandwidth unknowingly.

I can try to come up with some explanation and example code for Audio Sprites on the sound section and a reference to that in the FAQ, if desired. I just did, and everything works without gestures on Android:
http://curious-electric.com/w/experiments/aframe/audio/

(slightly unrelated - .wav file support seems broken in A-Frame 0.6.1 (or rather in ThreeJS 0.84):
http://curious-electric.com/w/experiments/aframe/audio/index61.html
I thought this was related to #2754 but it also fails on direct load (line 21))

[EDIT: links changed] @wav I will try to find out if this is a ThreeJS problem or not and then add an issue either over there or here.

How would I proceed regarding the audiosprite example?
This won't be a trivial one-liner that I can add to the docs, I'm afraid. Where would it make sense to add an example? Right now my sample code is on my personal webspace:
http://curious-electric.com/aframe/audiosprite/

I could create a glitch or codepen from that? An amusing workaround is to use speechSynthesis. I found that gaze-triggered interactions in A-Frame can trigger new speech events on iOS, if the user has at least once tapped the screen on an element that triggers speech. (e.g. a silent utterance on a START button)

For example, if you had a balloon-popping game, this would work: 
`            speechUtterance = new SpeechSynthesisUtterance();  
            speechUtterance.lang = 'en';  
            speechUtterance.rate = .8; 
            speechUtterance.pitch = 1.6;  
            speechUtterance.name = "Fiona";  
            speechUtterance.text = "Pop!";  
            speechSynthesis.speak(speechUtterance);`

It doesn't seem like much, but audio is so important to VR that even little sounds to confirm actions can go a long way. It's probably best to do real SFX for Android and desktop, then have this alternative up your sleeve for iOS.  What is the current state of this issue?  I have tried implementing a resume() on the audioContext upon user click of a DOM element.  I am seeing that it's state changes to "running", but I'm getting a black screen instead of entering VR.  It would be great if there was a clear instruction on best methods for implementing sound that is compatible with iOS.  I'm using https://github.com/digaverse/aframe-resonance-audio-component to instantiate audio, and perhaps the init functions triggering before unlocking the audio context is causing some issues.  It looks like howler.js [mostly works on iOS](https://github.com/goldfire/howler.js/issues/984). IIRC it works by pre-cooking a big soundSprite, so that may not work with the resonance component. 

   Radius is an invalid parameter. Instead, try scale. Also, demonstrate positioning of sphere within space.

**Description:**

**Changes proposed:**
-
-
-
  …edded scenes

**Description:**
For this issue:
https://github.com/aframevr/aframe/issues/2938
Not sure about the performance impacts, and whether this code should only execute for if scenes have the 'embedded' attribute

**Changes proposed:**
- Using sceneEl.canvas.getBoundingClientRect() to properly calculate the mouse position relative to the canvas Is this what you meant by using the throttledTick and window resize event together? I think this is what you mean, copying the style of 'throttledEmitComponentChanged' in component.js.
I made an example which I have also uploaded [here](http://games.clarklavery.com/aframe-sample/index.html) to test it out by mousing over the central cube. The problem with using the `throttle` wrapper is that if the user does a lot of small quick drags, it won't update to the final result. Doing a single resize works fine though.

The Library drag component library that was being used has the same issue. 
https://github.com/jesstelford/aframe-click-drag-component/blob/master/src/index.js#L132 Ok I've added the debounce function in and it works better now.  - A-Frame Version: 0.6.1
- Platform / Device: Desktop/Mobile
- Reproducible Code Snippet or URL: https://codepen.io/Alxblsk/pen/NvpPPv

Hello all,

I've started learning A-Frame and discovered that in embedded mode clicking on a primitive may not always perform correct in cases, when a-frame container is not fully visible or container is smaller  than browser height. Please take a look on my snippet. With that margin, you can click on the empty space above primitives, but not at the bottom of them. It looks weird.

This is video I've recorded to demonstrate an issue: https://monosnap.com/file/bLZhB5MOz4ChoNy0KwY9M3r4pQzTJI
 I've noticed this on the mouse component before, and I believe it has to do with these lines (153-154 components/cursor.js)
```
mouse.x = (evt.clientX / window.innerWidth) * 2 - 1;
mouse.y = -(evt.clientY / window.innerHeight) * 2 + 1;
```

I fixed it in the component I used by using the bounding client of the canvas to calculate the values
```
const bounds = this.el.sceneEl.canvas.getBoundingClientRect();
const width = bounds.width;
const height = bounds.height;
const left = evt.clientX - bounds.left;
const top = evt.clientY - bounds.top;

mouse.x = (left / width) * 2 - 1;
mouse.y = - (top / height) * 2 + 1;
``` Made the pull request here:
https://github.com/aframevr/aframe/pull/2942 @Alxblsk I think the issue you are having is part of the component you are using rather than a-frame, but for the same reason.
https://github.com/jesstelford/aframe-click-drag-component/blob/master/src/index.js#L132 @calrk This is an example I've found in Internet, to be faster. In my own example, I do not use `aframe-click-drag-component` but still see the same issue. I'll attach another one demo soon.  **Description:**
Currently, creating a link from an entity and using `visualAspectEnabled: false` (to control the styling yourself) throws two errors.

The first one is from the `tick` lifecycle method trying to adjust elements that have never been setup.

The second is a check in `update` considering an `undefined` => `false` being a "new" peekMode and thus calling the `updatePeekMode` function which again, tries to adjust elements that have never been setup.

reproduce:

```
<a-entity link="href: location.html; visualAspectEnabled: false" geometry="primitive: box"></a-entity>
```

**Changes proposed:**
Harden the checks in both functions so you can safely create links with `visualAspectEnabled: false`. @dmarcos updated 👍   when create a link with js. l can't delete the red color in circle.
<img width="739" alt="bug" src="https://user-images.githubusercontent.com/18245929/28992903-5e80fb50-79db-11e7-8308-1f5d6c7d2c27.png">
thank you with much.
```js
    var entityEl = document.createElement('a-entity');
    entityEl.setAttribute('id',`link-${index}`);
    entityEl.setAttribute('link', {
      href: `chart.html?machineId=${item.name}`,
      title: item.name,
      color: getColor(item.status),
      image: 'src/img/sunrise.png',
    });
    entityEl.setAttribute('position', getLoaction(index));
    entityEl.setAttribute('text', {
      value: Math.round(item.data.temp).toString(),
      height: 5,
      width: 8,
      color: 'white',
      align: 'center'
    });
```

 The AFrame Magenta webgl shader color `vec4(0.93, 0.17, 0.36, 1.0) ` is hard coded in the link component https://github.com/aframevr/aframe/blob/v0.6.0/src/components/link.js#L343
  given component:

```js
AFRAME.registerComponent('my-component', {
    schema: { type: 'selector' },
    update: function () {
      console.log('selected element', this.data);
    }
});
```

markup:

```html
<a-box></a-box>
<a-entity my-component="a-box"></a-entity>
```
console logs expected result:
![image](https://user-images.githubusercontent.com/1560884/28900878-12130238-77a9-11e7-811e-7f4fad4947c1.png)

when doing the same when creating element using js:
```js
var scene = document.querySelector('a-scene');
var createEl = document.createElement('a-entity');
createEl.setAttribute('my-component', 'a-box');;
scene.appendChild(createEl);
```

I get this:

![image](https://user-images.githubusercontent.com/1560884/28900918-640cf846-77a9-11e7-897f-4499cef83443.png)

- A-Frame Version: 0.6.1 (tested to work fine with 0.6.0)
- Platform / Device: Chrome, Firefox
- Reproducible Code Snippet or URL:
https://glitch.com/edit/#!/heartbreaking-deposit


 I should point out that if I listen to the loaded event _then_ setAttribute to for component, it works fine. It's happening inside components too @ngokevin 

As an example, this breaks:
https://github.com/aframevr/a-saturday-night/blob/master/src/components/states/dancing.js#L67

when code here expects element returned:
https://github.com/aframevr/a-saturday-night/blob/master/src/components/mimo.js#L7  demo here:
http://curious-electric.com/aframe/throttle/

**Description:**

**Changes proposed:**
-
-
-
 I don't quite understand? What would I use if I need to fire something
every 1/10 second and still need the regular tick function?
As far as I understood (and I tested it) with throttleTick the regular tick
gets replaced, at least in the given example.

On Thu, Aug 3, 2017 at 7:28 PM Kevin Ngo <notifications@github.com> wrote:

> It's not quite correct, I would not use throttle when throttleTick should
> be used. Throttling tick shouldn't be explained in the throttle section.
> I don't think throttle needs to an example, throttleTick could have one
> though.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/2926#issuecomment-320036513>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAmK8jLz_TM_sp0-FRrEdJDtY8Hzf0zgks5sUgM1gaJpZM4OrkzR>
> .
>
 ok, hopefully this works.

On Sat, Aug 12, 2017 at 3:14 AM Kevin Ngo <notifications@github.com> wrote:

> *@ngokevin* requested changes on this pull request.
>
> Oops, I reviewed a few days ago, and never hit Submit Review. Here it is:
> ------------------------------
>
> In docs/core/utils.md
> <https://github.com/aframevr/aframe/pull/2926#discussion_r131982607>:
>
> >
>  Returns a throttled function that is called at most once every
>  `minimumInterval` milliseconds. A context such as `this` can be provided to
>  handle function binding for convenience.
>
> -### `AFRAME.utils.throttleTick (function (t, dt) {...}, interval [, optionalContext])`
> +`throttle` should be used on non-tick functions. `throttleTick` should be used for tick functions.
> +
> +```js
> +AFRAME.registerComponent('foo', {
> +  init: function () {
> +    // Set up throttling.
> +    this.throttled = AFRAME.utils.throttle(this.tack, 500, this);
>
> Can we rename it not tack, that could be a bit confusing against tick.
> ------------------------------
>
> In docs/core/utils.md
> <https://github.com/aframevr/aframe/pull/2926#discussion_r131982853>:
>
> >
>  Returns a throttled function that is called at most once every
>  `minimumInterval` milliseconds. A context such as `this` can be provided to
>  handle function binding for convenience.
>
> -### `AFRAME.utils.throttleTick (function (t, dt) {...}, interval [, optionalContext])`
> +`throttle` should be used on non-tick functions. `throttleTick` should be used for tick functions.
> +
> +```js
> +AFRAME.registerComponent('foo', {
> +  init: function () {
> +    // Set up throttling.
> +    this.throttled = AFRAME.utils.throttle(this.tack, 500, this);
>
> I'd also name throttled to like throttledFunction
> ------------------------------
>
> In docs/core/utils.md
> <https://github.com/aframevr/aframe/pull/2926#discussion_r131982978>:
>
> >
>  Returns a throttled function that is called at most once every
>  `minimumInterval` milliseconds. A context such as `this` can be provided to
>  handle function binding for convenience.
>
> -### `AFRAME.utils.throttleTick (function (t, dt) {...}, interval [, optionalContext])`
> +`throttle` should be used on non-tick functions. `throttleTick` should be used for tick functions.
> +
> +```js
> +AFRAME.registerComponent('foo', {
> +  init: function () {
> +    // Set up throttling.
> +    this.throttled = AFRAME.utils.throttle(this.tack, 500, this);
> +  },
> +  tack: function () {},
> +  tick: function (t, dt) {this.throttled();},
>
> add new lines to the function, and perhaps add some extra code/comments
> before and after the throttled function because it's weird to have the
> only function in tick be a throttled one, else we'd use throttleTick
> instead.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/2926#pullrequestreview-55015173>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAmK8uWJlqjHyURymN7f4Q9hrF76ACaWks5sXPxugaJpZM4OrkzR>
> .
>
  **Description:**
On iOS devices, the application seems to randomly reload. This has been pinpointed to a reload after 30 seconds of inactivity while in VR mode, caused by the iOS wakelock feature. As seen in other wakelock-implementations and issues, the `window.location = window.location` creates this issue.

**Changes proposed:**
Update the wakelock implementation to match other implementation which don't cause this reload-bug.

One thing to mention is the wakelock does not work on iOS (11), however I think it's better to have an application which will sleep after X seconds, instead of an application which will reload every X seconds. No, but the touched lines belong to the `iOSWakeLock()` – it shouldn't have any impact on Android. Or I'm missing something, in that case: enlighten me :-)  i used mesh traversing to make materials transparent and it was done, but not on both sides.
[see screenshot](http://f2.s.qip.ru/lRCWJw82.png)

- A-Frame Version: 0.6.1 RELEASE
- Platform / Device: Google Chrome @ Win64 Desktop
- Reproducible Code Snippet or URL: https://rawgit.com/1d10t/test/05e3fdfb71348aa2a00c1d7bf3b562ad12f95d80/a-frame-webcam-dae.html

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Different from #666 ? @donmccurdy 
Hello, can you give me some advice how I can use this parameter (alphaTest: 0.5) in case of using glTF 2.0? @donmccurdy 
Many thanks for your help, now it works!   **Description:**

Due to the `isMobile` check occuring before the `vr-mode` check, when Daydream is in VR mode, as it's also a mobile device, sensor fusion controls take precedence. Is there scenario I'm not considering in this branching logic?

**Changes proposed:**

If in VR mode with HMD data, use that -- fall back to sensor fusion on mobile after.
 This was originally for Aframe+ WebARonAR[Core|kit] support, and some falsy assumptions on my end I think. Closing for now!  **Description:** `onVRPresentChange` throws error that `evt.display` is undefined. The `display` property exists under `CustomEvent#detail` property and not directly on `CustomEvent`.

**Changes proposed:**
- look for the `isPresenting` at `evt.detail.display.isPresenting`
 ah, right. I forgot [I ran into this on webvr-ui](https://github.com/googlevr/webvr-ui/blob/master/src/webvr-manager.js#L213-L219) as well.

When using the WebVR API it is directly on `event.display` when using a polyfill it is placed inside the `CustomEvent`'s `detail` property.

Pull request updated to look for either. this fixes issue #2849   - A-Frame Version: 0.6.0
- Platform / Device: Desktop
- Reproducible Code Snippet or URL: https://codepen.io/prabhatsinh/pen/LjZPzv

Please check above code pen link, I have added two elements a-box and a-text. Click event is not working in <a-text> element. 

It is working fine in <a-box> element.
 Hi thanks for  quick replay,

but it's working fine in 0.5.0 version, why it's not working in 0.6.0
https://codepen.io/prabhatsinh/pen/OjXBqb

Please check above link It's working in 0.6.0, we need to a plane to make it work in text.

geometry="primitive: plane; width: 1; height: 0.4"
  Pretty much what the title says.

The documentation seems to suggest that the `laser-controls` would work with gaze-based functionality, but as far as I could tell, nothing is implemented yet to support this. Would it be an idea to add an a-cursor to the camera, until a controller is detected? Perhaps as an optional feature? 

I did some tinkering yesterday on how I could see this work as a PoC: https://github.com/realitylab-ruben/aframe/commit/44424ef023205d11e38c4946a19b80bbd1097c01#diff-3f66fed14508fae90dc58b66fac99025  **Description:**
Relying on the random selection to change the color runs the risk of users being unsure if their interactions are sparking a response. For a simple test case (especially when in VR and no console log is available) a guaranteed change is much better. I made this change myself to ensure that the interactions were actually reliable and not glitchy and unresponsive as it seemed with the random selection re-picking the existing color. This should improve first run perceptions of the interaction API.

**Changes proposed:**
- Switch random selection to simple progression through array
  It doesn't feel necessary to manage 2 sets of component code  **Description:**
I've only started working with the Gear controller and AFrame a few days ago, and the first thing I noticed was that the GearVR Controller wasn't exactly working as I expected. Instead of turning around the camera like most applications do, the controller was just rotating in place. 

While this makes sense, I felt that it was a bit confusing and had to work around the component to get the controller to show up in its right place. I think that the GearVR controller should be in a default position just in front of the camera and rotate around the viewer instead of just staying in one spot.

I haven't tested it yet, but I'm assuming that the Daydream has the exact same issue.

**Changes proposed:**
- Add a ```positionOffset``` vector3 value to schema of the ```daydream-controls``` and ```gearvr-controls``` components.
- A child entity will be generated with its position set to the value in the schema
- This child entity will contain the controller model. Because the ```tracked-controls``` will be its parent, the controller will automatically spin around the camera.
- If no position offset is given, the default will be set to ```0.1 -0.1 -0.275```. X will be set to ```-0.1``` if the ```hand``` attribute is set to ```left```.


The PR currently already had the changes mentioned above implemented for the ```gearvr-controls```. Before putting more effort into creating a proper example and changing the ```daydream-controls``` component as well, I first would like to get some feedback before moving on. It would indeed, but I would argue that this would make the model part of the component fairly useless. I can't think of any particular example where the user would want the controller to float in a static point in space where it will only rotate at a single point.

It's also a mechanic that I've, so far, experienced in all Gear-related applications. The only example I could find on short notice is in the [official Samsung Gear VR tutorial](https://www.youtube.com/watch?v=gghYoUlhyVU#t=1m42). In general, the controller is rendered away from the user and rotating around him to give a sense of where he is holding it.

The SDK for both [Daydream](https://developers.google.com/vr/unity/reference/class/gvr-arm-model) and [Gear](https://developer.oculus.com/documentation/unity/latest/concepts/unity-ovrinput/#unity-ovrinput-d7803e81) offer a similar functionality out of the box with their respective Unity SDKs.

What I would, however, admit is that this solution now only works to facilitate the model position and nothing more. If you'd have to add a raycaster, you would need to put the raycaster in another  child entity to the entity holding the gearvr-controls. [I did something similar in my example.](https://github.com/aframevr/aframe/pull/2912/files#diff-321ec347dea00ae9da476ecb4f4ca732R17)

My personal problem is that both ```daydream-controls``` and ```gear-controls``` don't use the same practices out of the box that the official Unity/Unreal SDKs do, and that's what I'm trying to solve here. Maybe I have jumped the gun a bit by trying to fix this in the AFrame repository and I should first see about turning this into a standalone component. Hmm, that's weird, because I'm not seeing it in the Samsung Gear. I've only just now noticed that there is code for an arm model, but it's not working in my own projects, at least not on the Samsung Gear.

This was my mistake then, my apologies. I'll close this pull request and open up an issue. Thanks for your feedback.  Question:  Are the second UV maps used for Lightmaps and AO maps limited to duplicating the first UV set on the object?  or can we set up a second UV set in a 3d application and use that instead?  This could enable things like lightmappers for Aframe etc to work.  Currently it seems that the gltf importer duplicates the first UV set automatically, which precludes using different UV maps that optimize texture sizing and layout on 3d objects.  The use case for allowing custom uv sets would be that you could take a repeating brick texture and tile it while having a Lightmap for the entire scene instead of individual lightmaps for each object.
   updated  three.js r87 will bring a optimized handling of `scene.background` and should work nicely in VR.

https://github.com/mrdoob/three.js/blob/dev/src/renderers/webgl/WebGLBackground.js#L26-L108

I think a-frame should add support for this. Right now I see people creating spheres and adding them to the scene which is not the most optimal way of doing it.

Maybe `<a-background>` as a component could also work. That way one could add more logic to it like converting equirectangular to cubemaps (using `CubeCamera`) automatically. What an awesome addition!

I'm thinking `<a-scene background='whatever'>` would be more in line with the existing API - @mrdoob , can you please elaborate about the reasoning for `<a-background>` and the connection to the automatic cubemap conversion? Is there already a way to do that in three or is that a proposed feature?   **Description:**
This package will let you publish the latest aframe in the Ubuntu store, and from there reach many users on all the supported Ubuntu versions, and more Linux distributions in progress.

**Changes proposed:**
- Add the snapcraft.yaml file
 Hello!

Here at ubuntu we are working in a new packaging and delivery system. If you haven't heard about snaps before, here's a lot of info: https://snapcraft.io/

Obviously, aframe is a building block for other applications, delivering a packaged version of aframe itself is not so useful. But I think having this package in the Ubuntu store will be very nice. First, it will be a showcase for all the Ubuntu users, who then can jump into developing their own scenes. And second, the store has an edge channel that's very useful for crowdtesting. You can automate the delivery of every change made to the master branch, put it in edge, and ask your early adopters and the community of ubuntu testers to give it a try. All of this can be done with a few clicks in https://build.snapcraft.io.

To test this in an Ubuntu 16.04 machine:

    $ sudo apt install git snapcraft
    $ git clone https://github.com/elopio/aframe
    $ cd aframe
    $ git checkout snapcraft
    $ snapcraft
    $ sudo snap install *.snap --dangerous
    $ sensible-browser localhost:9000

(--dangerous because the snap you build doesn't come signed from the store. Once you publish it, your users will just have to do sudo snap install aframe).

If you have any questions, please let me know.

pura vida. @ngokevin well, it depends on how you define niche store. There are millions of ubuntu users. They will all be able to see the aframe showcase snap in the software center, and install it with one click.

We are working on making this extremely low-maintenance. After getting the snapcraft.yaml, you just have to go to https://build.snapcraft.io once, and then it will take care of building and publishing new versions for you. So, I think that giving it a try will require just a little effort, and then you can see the stats and the feedback you receive from the users to decide if you want to make a stable release in the store and keep maintaining it.

Of course, I understand if you decide not to have a snap at this moment. If you change your mind, just ping me and I'll be back to give you a hand.

The tutorial sounds like a very good idea. I will be learning more about aframe next month (that's why I found it, and I made this PR to experiment a little with it). So, I will write the tutorial, about how to deliver a app made with aframe, after I finish my first scene. electron-builder already supports snaps, so it might be fun to combine both :)

Thanks for the review!
pura vida.  **Description:** link component releasted, using past tense

**Changes proposed:**
- link component for link traversal was (instead of will be) released with A-Frame 0.6.1
  **Description:** added Google Blocks in Where can I find assets?

**Changes proposed:**
- added links to Google Blocks on top since it's the largest easiest to use library already (using more complex assets with textures for example from TurboSquid usually brings newcomers to a world of pain)  I'm currently trying to animate a camera's rotation in a scene. The animation should occur after looking at a circle for 1 second.

First I tried to directly animate the camera, apart the fact that it doesn't seem to work on chrome mobile (v57), it seemed to "block" the ability to look on the floor. [Short screen capture of the problem](https://gfycat.com/SmoggyQuarrelsomeDavidstiger).

I then tried to animate a container containing the camera as suggested by kevin [here](https://github.com/aframevr/aframe/issues/2714#issuecomment-305892656). That second option produced an other problem, it seems that all the sky is displaced and I don't understand how to "correct" that. But on the other side, the second option (container) worked in mobile browser, in a cardboard.

My questions are :
- Are theses behaviors expected ?
- If so, any ideas or links to help me understand how to do what I am trying to do ?

My setup :
- A-Frame 0.6.1 & aframe-animation-component
- Windows 10, Chrome 59, Firefox 54
- Reproducible Code Snippet or URL:

Animation on the camera :
[https://codepen.io/apiaget/full/XgLzNQ/](https://codepen.io/apiaget/full/XgLzNQ/)

Animation on a container containing the camera :
[https://codepen.io/apiaget/full/MoMQzV/](https://codepen.io/apiaget/full/MoMQzV/)

I also posted the question on [StackOverflow](https://stackoverflow.com/questions/45194712/a-frame-0-6-1-camera-rotation-animation) but I was starting to think that the behaviour wasn't expected and that it may be a bug somewhere, that is why I am here.

Thanks
apiaget  So we use A-Frame 0.50?
 @dmarcos you mean just by adding THREE.ShaderChunk.fog_pars_vertex to the vertex array of SPE we should be able to fix the problem?   **Description:**

The standard Three.js material has settings to make a material be emissive, meaning it can project light even when the rest of the scene is dark. Currently the emissive property is not exposed inside AFrame. This patch adds the property to the standard Aframe material.

**Changes proposed:**
-
-
-
 I've added the docs.  **Description:**

- A-Frame Version: latest from HEAD
- Platform / Device:  MacOSX El Cap, Chrome & Safari
- Reproducible Code Snippet or URL:

http://localhost:9000/examples/boilerplate/hello-world/

Do a clean checkout from HEAD, npm install, then npm run dev.  The server will come up. Go to the hello-world demo. There is no graphics on screen. Look at the console. There are errors about Tween.js. Is the version of tween incorrect?


```
A-Frame Version: 0.6.1 (Date 19-07-2017, Commit #83eb39b)
index.js:87 three Version: ^0.84.0
index.js:88 WebVR Polyfill Version: ^0.9.36
Tween.js:41 Uncaught TypeError: tween.getId is not a function
    at HTMLBodyElement.add (Tween.js:41)
    at HTMLElement.value (a-entity.js:278)
    at HTMLElement.value (a-entity.js:77)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
    at HTMLElement.wrappedMethod (a-register-element.js:149)
add @ Tween.js:41
value @ a-entity.js:278
value @ a-entity.js:77
wrappedMethod @ a-register-element.js:150
wrappedMethod @ a-register-element.js:149
Tween.js:41 Uncaught TypeError: tween.getId is not a function
    at HTMLElement.add (Tween.js:41)
    at HTMLElement.value (a-entity.js:278)
    at HTMLElement.value (a-entity.js:77)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
add @ Tween.js:41
value @ a-entity.js:278
value @ a-entity.js:77
wrappedMethod @ a-register-element.js:150
wrappedMethod @ a-register-element.js:150
Tween.js:41 Uncaught TypeError: tween.getId is not a function
    at HTMLElement.add (Tween.js:41)
    at HTMLElement.value (a-entity.js:278)
    at HTMLElement.value (a-entity.js:77)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
add @ Tween.js:41
value @ a-entity.js:278
value @ a-entity.js:77
wrappedMethod @ a-register-element.js:150
wrappedMethod @ a-register-element.js:150
Tween.js:41 Uncaught TypeError: tween.getId is not a function
    at HTMLElement.add (Tween.js:41)
    at HTMLElement.value (a-entity.js:278)
    at HTMLElement.value (a-entity.js:77)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
add @ Tween.js:41
value @ a-entity.js:278
value @ a-entity.js:77
wrappedMethod @ a-register-element.js:150
wrappedMethod @ a-register-element.js:150
Tween.js:41 Uncaught TypeError: tween.getId is not a function
    at HTMLElement.add (Tween.js:41)
    at HTMLElement.value (a-entity.js:278)
    at HTMLElement.value (a-entity.js:77)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
add @ Tween.js:41
value @ a-entity.js:278
value @ a-entity.js:77
wrappedMethod @ a-register-element.js:150
wrappedMethod @ a-register-element.js:150
Tween.js:41 Uncaught TypeError: tween.getId is not a function
    at HTMLElement.add (Tween.js:41)
    at HTMLElement.value (a-entity.js:278)
    at HTMLElement.value (a-entity.js:77)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
    at HTMLElement.wrappedMethod (a-register-element.js:150)
```



<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Is this something that would have been caught by unit tests? Does the CI system run the actual webGL code? I did a fresh checkout this morning and everything is fine. It must have been a transitory issue with TweenJS. 

Sent from planet Earth

> On Jul 22, 2017, at 11:52 AM, Don McCurdy <notifications@github.com> wrote:
> 
> Everything is (still) working for me locally. 😕 Tests pass, npm start works, demos work, all on a clean installation of aframe. I'm currently at @tweenjs/tween.js@16.10.0. npm 4.6.1, node v6.9.5. Is it possible there was a bad patch release of tweenjs somewhere around the time we published? Or perhaps related to tweenjs/tween.js#358?
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub, or mute the thread.
> 
  **Description:**
Removing irrelevant text
**Changes proposed:**
- Removing text that might have come from copy-pasting the text from `rotation`
-
-
  **Description:**

- A-Frame Version: 0.6
- Platform / Device: all
- Reproducible Code Snippet or URL: https://stackoverflow.com/a/43947349/4096929

This functionality comes up regularly at events where we're introducing people to A-Frame. Registering and adding a custom component for it seems needlessly complicated.

Adding this to the default A-Frame set of features seems a pretty big win for users, in exchange for a tiny bit of code (per that example in the URL above). No fair going back in time and fixing things before I file them!!


On Sat, Jul 22, 2017 at 3:42 AM Don McCurdy <notifications@github.com>
wrote:

> Oh nice, so #2516 <https://github.com/aframevr/aframe/pull/2516> would
> have just gone live with v0.6... in that case let's add docs and call it
> good.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2892#issuecomment-317094734>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AADDt5BtXHxhzt4tHj-7gRTKa-lF7dDHks5sQP80gaJpZM4OfFCr>
> .
>
  **Description:**

- A-Frame Version:
- Platform / Device: All
- Reproducible Code Snippet or URL: https://aframe.io/docs/0.6.0/components/obj-model.html#troubleshooting refers to a page if more information is needed, and the page link has 0.6.1 in the URL and as a result gives a 404 error on clicking on it.
  **Description:**

Allow mixin assets to have animated components. Think rather than just a _red_ mixin for a material with a red color, allow _pulsating_red_ for a material with an animated color.

```html
<a-assets>
    <a-mixin id="red" material="color: red"></a-mixin>
    <a-mixin id="pulsating_red" material="color: red; opacity: 0.5">
        <a-animation attribute="material.opacity" from="0.5" to="1.0" repeat="100"><a-animation>
    </a-mixin>
</a-assets>
A few flashing signs
```

I think mutations to mixin attributes are already propagated to entities which use the mixin. It would be a natural and perhaps even expected feature to also allow mutations by mixin animation.

- A-Frame Version: future
- Platform / Device: all
- Reproducible Code Snippet or URL: NA
 Jotting down implementation thoughts: 
- add .isPlaying to a-mixin.js
- make .setAttribute for a-mixin.js similar to entities (probably expected anyways)
- force DOM update to trigger MutationObserver
- or have additional onUpdate Tween callback for mixins which updates mixin users (the same as the MutationObserver callback)
 across A-Frame ? Anyways, right, the animation component should work as a mixin.  Well, the animation component also does not support mixins, currently: https://github.com/ngokevin/kframe/issues/90
Keeping this closed since animation as component would be preferable.  **Description:**

Using ` <a-animation> ` for material.opacity resets the ` from ` value to 0 for repeated animation cycles if ` from ` is not explicitly provided.

The first animation cycle works correctly. Subsequent animation cycles use a ` from ` value of 0 instead of the attribute value. Repeated cycles use self.initialValue for ` from `. initialValue appears to be set to an empty object which may not be the intention.

- A-Frame Version: 0.6
- Platform / Device: all
- Reproducible URL: https://glitch.com/edit/#!/plum-mayonnaise?path=public/index.html:11:11

The box opacity is animated from completely transparent to opaque but should be animated from only slightly transparent to opaque. The easy workaround is just to provide the from value as a-animation property.

Other component properties are also be affected. I amended the glitch above to animate the height of the cylinder. It is also reset to 0 during repeats. I think all scalar (Number) properties are affected. Here is the example using a first solution:
https://just-fly.glitch.me/

The used solution is:
```js
getTween: { ...
// Store initial state.
self.initialValue = self.initialValue || cloneValue(from); //currentValue);
...
function getForComponentAttribute () { ...
    if (dataFrom === undefined) {  // dataFrom can be 0.
      from[attribute] = getComponentProperty(el, attribute);
    } else {
      //from[attribute] = dataFrom;
      from[attribute] = typeof (dataFrom) == 'object' ? dataFrom[attribute] : dataFrom ;
    }
```
probably not ideal and not thoroughly tested but a start.
[Why not rely on Tween for the repeats ?]
 I thought a little bit more about a more elegant, concise solution but could not immediately find one. The fixed glitch tests most kinds of animations with the proposed fix and they continue to work.

If desirable, I could prepare an initial PR for further review, first to see if travis testing picks up something ?   I've been playing with the Google Blocks tool and I'm totally amazed by it. I think that aframe will benefit a lot from an easy way to import objects from Blocks. Some points that would need to be discussed are:

- Are there any changes that need to be done for aframe to import Blocks? From the looks of it, it seems to export a pretty standard `obj`, but not sure about material/colors.
- Should we write a tutorial on how to import Blocks creations to aframe?
- It would be great to have a component that takes the URL of a folder with the decompressed contents of the zip exported by blocks and places that in the scene.  **Description:**

- A-Frame Version:06
- Platform / Device: Chrome / Mac
- Reproducible Code Snippet or URL: 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

I have proposed some small fixes for typos and idiom. I hope this helps!

**Changes proposed:**
The changes should be clear in the file. You'll see that I rearranged one sentence to be: "A-Frame aims to define fully immersive interactive VR experiences that go beyond basic 360&deg; content, making full use of positional tracking and controllers." I know that's a fairly large change, but the previous version of the sentence had a subject-verb agreement problem, basically saying "interactive experiences that GOES beyond..." My fix is the best solution I could find to fix the issue.

Line 111: It looks to me that the ".js" I deleted is just stray text at the end of the sentence. I hope I'm reading that right.

Line 132: "built on the notion of HTML" Is that really what we want to say here? Is there a better way to express this idea?
 My pleasure!

> On Jul 15, 2017, at 9:52 AM, Diego Marcos <notifications@github.com> wrote:
> 
> Thank you! 👏
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub, or mute the thread.
> 
  **Description:**
address raycasting
**Changes proposed:**
- add a limitations sections with a short explanation.

 A simplistic example on the page may suffice ?

```html
<a-text value="Hello, World!"></a-text>

<!-- for cursor detection add geometry -->

<a-text value="click me!" geometry="primitive:plane"></a-text>

``` The wording is friendlier now although I think it is preferable to say explicitly that text itself does not work with cursor or raycaster to avoid any confusion.  **Description:**

- A-Frame Version: All
- Platform / Device: All
- Reproducible Code Snippet or URL: The sidebar index on docs. 
I guess it would be better if the primitives come before the other components orderwise.

![capturett](https://user-images.githubusercontent.com/6694476/28238821-c119b968-6979-11e7-9320-33aa9c5b2235.PNG)

  **Description:**

- A-Frame Version: 0.6.0
- Platform / Device: Mozilla Firefox for desktop
- Reproducible Code Snippet or URL:  For example the page https://aframe.io/docs/0.6.0/core/mixins.html
![capturet](https://user-images.githubusercontent.com/6694476/28238701-28eab6ee-6977-11e7-882c-d509c369689e.PNG)

 Hi Can I work on this issue? @ShaguftaMethwani @dmarcos I understand the changes to make but can you people point me in the direction where is the file located. I'm unable to locate the file.  **Description:**

- A-Frame Version: 0.50
- Platform / Device: Chrome on Mac
- Reproducible Code Snippet or URL: Remix a new glitch from https://aframe.io/examples/showcase/360-image-gallery/

The controls in two areas are missing:

* The row with "copy scene", "save to html", "add new entity"

* The row with "translate", "rotate", "scale" (the "local" bit is visible)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Sometimes a hard reload fixes the problem. Some kind of race condition maybe.  Is there an event that emits when the image is actually displayed and not only only loaded.
As I just discovered, event "load" or "loaded" triggers before the image is displayed, specially if the image has a large size.

Thanks for the great work

- A-Frame Version: 0.5 Thanks very much.... it worked perfectly on sky element with image src.  A-Frame 0.6.0
Windows 10 / Oculus Rift

After exiting VR mode in FireFox Nightly the desktop window of Nightly is white and non-responsive. It 
doesn't actually crash with a Windows error but I need to close and restart nightly to carry on.

This shot was taken just after exiting VR mode, shortly after it goes completely white. 

![image](https://user-images.githubusercontent.com/10384836/28130090-0c02c2c6-6736-11e7-8edc-fdebfd1b213f.png) Seems resolved in the latest update.   Hello
I want to turn on the gaze only in **mobile VR mode** but the problem I am facing here is the gaze is turned on mobile hand-held mode also how to enable the gaze only in mobileVR mode

**code:
var cursorEl = document.querySelector('a-cursor');
if (!AFRAME.utils.device.isMobile()) {
  cursorEl.parentEl.removeChild(cursorEl);**

Thanks in advance
  three.js:21805 Uncaught TypeError: Cannot set property 'needsUpdate' of undefined
    at D (three.js:21805)
    at M (three.js:21398)
    at ae.renderBufferDirect (three.js:20243)
    at _ (three.js:21034)
    at ae.render (three.js:20771)
    at THREE.VREffect.render (VREffect.js:394)
    at HTMLElement.value (a-scene.js:475)
    at bind.js:12


It happened when I export .obj file from sketchUp with 'export ribs' parameter
my code: 
`<a-scene>
                    <a-assets>
                        <a-asset-item id="chair-obj" src={`${js_domain}/react/obj/first.obj`}></a-asset-item>
                        <a-asset-item id="chair-mtl" src={`${js_domain}/react/obj/first.mtl`}></a-asset-item>
                    </a-assets>
                    <a-sky color="#d12727">
                        <a-obj-model src="#chair-obj" mtl="#chair-mtl"  position="-2.7 -1.7 -8.61" rotation="0 110 0"  scale="0.001 0.001 0.001"></a-obj-model>
                    </a-sky>
                </a-scene>
`


 https://clara.io/view/58575872-c615-4f48-98a3-8efea64a142f/webgl
[drive-download-20170711T180312Z-001.zip](https://github.com/aframevr/aframe/files/1139819/drive-download-20170711T180312Z-001.zip)
At https://clara.io/ not load textures Hi, thank you very much.  Hi
I hace the same issue with export from sweethome3d when I use obj and mtl, hre the line  : 
c.lights&&(g=h,q.ambientLightColor.needsUpdate= if three.js (it give me the error Uncaught TypeError: Cannot set property 'needsUpdate' of undefined).

I can not find how to fix that....
 this commit in three.js fixes the bug: 
https://github.com/mrdoob/three.js/commit/b319b89f3551ec405b4efa3ee5845f29ff5b76df#diff-c95aa6af1ef517957bfbff6af39992f5

happens with eg. this obj from Google Poly: https://poly.google.com/view/eGI3RS52kJA because there is a path problem with the mtl file. the texture fails to load and the three.js Material gets corrupted, resulting in this error.  For some reason I'm not able to get master to render correctly atm. The fix in three.js will ship in r90 from what I can tell.  FWIW the best workaround to this for me is 0.7.1 with three.js r88 with the `material.lights = false;` patch applied manually.  I can change the rayOrigin from `entity` to `mouse` dynamically, but when i try to change from `mouse` to `entity` nothing append :/ done ;) #2929 @dmarcos do you have time to check the example ? #2929
Need to know if it's a bug or my code :/

Thank you !  **Description:**

After moving the default camera to be inside another entity via a call to `.appendChild`, the camera is frozen and won't respond to `look-controls` movement nor VR-mode headset orientation. 
  
- A-Frame Version: New in 0.6.0, issue does not occur in 0.5.0
- Platform / Device: Nightly & Chromium, desktop & Vive
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/voracious-canvas

The example uses 'camera-ready' to trigger the re-parenting, but this does not appear to be a synchrony issue, as the same behavior can be seen by making the change via the console on a running scene. I found this because `super-hands` `a-locomtor` checks for scenes with the default camera and moves the camera to be a child of itself to enable movement. The feature ended up kinda hacky and re-parenting the camera already caused some strange behavior like losing the `userHeight` value and generating console warnings, so I'd already been thinking of dropping it; just reporting this FYI I think I'm going to move my check earlier in the setup and insert a `a-camera` in the DOM before aframe core checks if a default is needed if no other manually specified camera is found. 

So, I don't need a fix for this issue - just reported it to document it.  **Description:**

- Platform / Device: Desktop Chrome
- Reproducible Code Snippet or URL:  https://aframe.io

These arrows show in the left navbar in Chrome Desktop and don't appear to do anything:

<img width="231" alt="arrows" src="https://user-images.githubusercontent.com/46655/28034421-bea864ec-6576-11e7-99f1-064ad0d6e90d.png">
 Error detail from console:

Uncaught TypeError: Cannot read property 'nextElementSibling' of null
    at getDestNavLink (examples.js:9)
    at HTMLAnchorElement.<anonymous> (examples.js:4)  **Description:**
`AScene.reload` doesn't currently reset attributes and components on the scene element, which is different behavior from every other element in the scene.

**Changes proposed:**
While we can't destroy and re-create the entire scene element like we do for every other element, we can:
-  remove the current components
- delete the current attributes
- re-add the original attributes

This patch fixes #2239.
 Our use case for `reload` is for demoing; we can use it to quickly reset the demo to the initial state without having to leave VR and hit the reload button or implement a more complicated solution. We don't have much state in our application, so it isn't hard to store all of it in A-Frame components. `vrdisplayactivate` would be sufficent for our use case. Unfortunately, our target devices are mobile phones running Chrome for Android with Cardboard viewers and it would be quite the challenge to convince our customers to install a Firefox nightly on every device they want to demo with.

One case for `reload` that `vrdisplayactivate` wouldn't handle is having multiple embedded scenes on one page where you want to be able to reset them, perhaps in a programming tutorial. @dmarcos We also dynamically add and remove elements, which makes the way `reload` works a little more attractive. @ngokevin I do like the idea of moving `reload` to a separate component. If `removeComponent` gets changed to always remove the component and gets documented it should be possible to implement entirely with public API. @ngokevin Come to think of it, I'm not sure there are any hooks a separate component could use to grab the original HTML before it gets modified, so that might need to be added, too. I see three paths forward for `reload`. Here are my thoughts about them:

# Remove `reload` and leave no upgrade path
There's no sense in leaving `reload` in the codebase if it's not going to be fixed. It currently isn't useful at all.

#2239 has four participants, so there is some interest in this functionality. While it's certainly possible to work around the lack of `reload()`, it takes more effort than a single method call.

Reload functionality really needs to be universal in order to work well.  Without core support or a clear de-facto standard to follow, it's likely that some components won't support any given approach.

# Remove `reload` and provide an out-of-core component to handle it
@ngokevin is right that it probably wouldn't take too much effort to move the current implementation into a component. That will require some support from core.  I see three possible ways to make that happen.
 
## Core can expose enough raw functionality to make reloading possible
@dmarcos gives good arguments against this approach. "Here there be dragons" methods don't seem to be the A-Frame way.


## Core can expose something like a `resetComponents` method
This would be safer, but at the price of keeping a fair amount of the logic in core.

## Core can provide a private interface to the component
It's hard to imagine a way to do this which wouldn't be brittle and ugly. 

# Fix `reload`
Moving `reload` out of core doesn't really decrease complexity, just shuffles it around. Keeping it in the core means that changes can be made without having to worry about how they affect the core/component boundary. More aggressive optimizations to `reload`, like keeping `<a-assets>` or the injected `<canvas>` around would be impossible to do cleanly as a component. Yeah, I do think you're misunderstanding our use case a bit. Our customer wants everything to be reset exactly the way it is on initial load, which is why nuking the DOM and restoring it to its initial state like `reload` does is so attractive. Otherwise we'd have to keep track of every individual attribute that could ever change, including entity `position` and `rotation`, and remember to add new attributes to that list if we ever start changing them.

It's entirely possible that trying to change just the things that need to be changed might be faster. Without benchmarks I wouldn't be able to say. There is an overhead to determining what things need to be added/changed/removed and individually making those changes, and `reload` runs pretty quickly. At any rate,`reload` already works much faster than a user can strap a Cardboard viewer to their face, so our customer is satisfied with the performance. That would work for us, but sadly, no buttons on the viewers. That does give me an idea, though. Tomorrow I'll look into seeing if we can get it working with a web app manifest with `display: fullscreen`. A web app manifest doesn't help. `display: fullscreen` actually breaks the polyfill. FYI: after a refactoring of our code, having `reload` isn't as vital to us.  **Description:**

- A-Frame Version: *Commit* 89d1de0782a06a06f022c464cb1c1a31ec18b9ee
- Platform / Device: Samsung Galaxy S7
- Reproducible Code Snippet or URL: https://aframe.io/examples/

Double vision on hello world example, when using a Samsung Galaxy S7, with google cardboard or class vr.
 @dmarcos same problem with the polyfill. Also [this](marchhill.github.io/VR-Maths-Shapes/) is my project that uses the latest A-Frame development version by including it with `https://rawgit.com/aframevr/aframe/538439e/dist/aframe-master.min.js`. It still has double vision. @ngokevin The vision is blurry, and the two images for both eyes do not merge into one. There is one cursor for each eye, so you can see two cursors. I tried this with an iPhone 6S+ and it was not an issue, only on the S7.
![screenshot](http://i.cubeupload.com/bhbmU9.png) I was having the same problem with my S7. Noticed it did not happening with one or two of the examples on aframe.io. Hello Metaverse works. It is using version 0.5.0. Downgraded my project from 0.6.1 to 0.5.0 and it viewed without any issues on the S7, 0.6.0 does not view correctly either. I am having this same issue with Chrome on Galaxy S7 and aframe 0.6 and 0.6.1 . Latest stable Firefox is not having the issue, so assume it to be chrome related? @dmarcos yes, the webvr-polyfill example also displays incorrectly. I have attached screenshots of chrome (displaying incorrectly) and firefox (displaying correctly) on Galaxy s7. 

![screenshot_20170808-065651](https://user-images.githubusercontent.com/2109125/29046101-54ddc09e-7c09-11e7-88c9-cae257a1e920.jpg)
![screenshot_20170808-065808](https://user-images.githubusercontent.com/2109125/29046100-54d786e8-7c09-11e7-87c8-5bd9533dd2fd.jpg)
 Apparently Samsung changed the default resolution of the S7 in an update. [ https://github.com/googlevr/gvr-unity-sdk/issues/421 ] To fix the issue settings > display > screen resolution > WQHD (2560 x 1440) . No more double vision.   **Description:**
Currently the `pivot` component doesn't respond to entityEl.setAttribute because it has no `update` handler.

**Changes proposed:**

- Replacing `init` with `update` to respond to changes
- Taking `oldData` into calculation to yield a desired `pivot` value

Plus, why is `pivot` not in the documentation? Am I missing anything or is it not ready for us to use? Thanks.
  **Description:**

- A-Frame Version: 0.6.0
- Platform / Device: macOS / Chrome, Android / Chrome
- Reproducible Code Snippet or URL: https://jsfiddle.net/jn1e2eo7/

I'm attaching a white `a-plane` to each of the six sides of a black `a-box`, but only three of them are visible. The other three planes do exist because if I enlarge these three planes I can actually see them, but still they go invisible at some certain angles: https://jsfiddle.net/aca7yLno/.

I'm not sure what caused this.
<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  Change the "material" to "geometry".  I have been working on a VR tour of Lancaster castle and have been having some issues with camera rotation since updating from webvr-polyfill v0.9.25 to v0.9.35.

Previously, we were able to rotate the camera within the scene to point in the correct direction after transitioning from one scene to another in order to make the transition feel more natural however this has stopped working on mobile since updating the polyfill and the camera rotation we set seems to be overwritten by the physical rotation of the device, making the transition feel quite jarring.

Here is a link to the project: http://m.lancs.ac.uk/VR/  After updating to 0.6.0 the cursor in VR mode has a visible (and green) line, even with implicit (default) or explicitly setting the raycaster component to `showLine: false`. This actually broke the [mouse-cursor](https://github.com/mayognaise/aframe-mouse-cursor-component) component we rely on: it no longer emitted `click` events when using the mouse or tapping the screen on an entity. It was solved by explicitly adding `line="visible: false"` to the `a-cursor`.

**Broken code (green line is visible in VR mode; mouse-cursor does not work correctly):**
```
<a-entity camera="userHeight: 1.6" look-controls mouse-cursor wasd-controls="enabled: false">
<a-cursor raycaster="showLine: false" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" />
</a-entity>
```

**Working (added `line="visible: false"` to `a-cursor`):**
```
<a-entity camera="userHeight: 1.6" look-controls mouse-cursor wasd-controls="enabled: false">
<a-cursor raycaster="showLine: false" line="visible: false" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" />
</a-entity>
```

- A-Frame Version: 0.6.0
- Platform / Device: Latest Chrome in Windows 10, iPhone 6S on latest iOS
 Makes sensr

Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: Jay Dansand <notifications@github.com>
Sent: Wednesday, July 5, 2017 2:36:49 PM
To: aframevr/aframe
Cc: Subscribed
Subject: [aframevr/aframe] Line component on a-cursor element is visible by default (#2847)


After updating to 0.6.0 the cursor in VR mode is visible (and green), even with implicit (default) or explicitly setting the raycaster component to showLine: false. This actually broke the mouse-cursor<https://github.com/mayognaise/aframe-mouse-cursor-component> component we rely on: it no longer emitted click events when using the mouse or tapping the screen on an entity. It was solved by explicitly adding line="visible: false" to the a-cursor.

Broken code (green line is visible in VR mode; mouse-cursor does not work correctly):

<a-entity camera="userHeight: 1.6" look-controls mouse-cursor wasd-controls="enabled: false">
<a-cursor raycaster="showLine: false" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" />
</a-entity>


Working (added line="visible: false" to a-cursor):

<a-entity camera="userHeight: 1.6" look-controls mouse-cursor wasd-controls="enabled: false">
<a-cursor raycaster="showLine: false" line="visible: false" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" />
</a-entity>


  *   A-Frame Version: 0.6.0
  *   Platform / Device: Latest Chrome in Windows 10, iPhone 6S on latest iOS

—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub<https://github.com/aframevr/aframe/issues/2847>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AcUiPphKy_4gMnMKVaB-HAncAX0viVFiks5sLAHxgaJpZM4OO5pr>.
  **Description:**
Material.src appears to be broken in 0.6.0
Repro:
Set src on image primitive or
Set src in material="src: url"

Tried both with assets and as inline, but both get the same error in the console:
TypeError: Failed to execute 'texImage2D' on 'WebGLRenderingContext': No function was found that matched the signature provided.

- A-Frame Version: 0.6.0
- Platform / Device: Tested on desktop browsers (Chrome, Safari, Firefox)
- Reproducible Code Snippet or URL: 
https://free-harp.glitch.me/
https://glitch.com/edit/#!/free-harp
 Strange I thought inline 'src' was also not working, but appears to work once the correct asset tag is used. Thanks for the tip!  **Description:**
When entering VR via enterVR(), the function is executed twice (once by the initial action triggering the function and then again after the Event "vrdisplaypresentchange" has been fired and then onVRPresentChange calls enterVR again.

This is resulting in substracting the userHeight-Offset twice from the camera-position.

- A-Frame Version: 0.6.0
- Platform / Device: Tested on Chrome / Apple Macbook
- Reproducible Code Snippet or URL: https://heavy-ghost.glitch.me/

Basic A-Frame scene with <a-camera user-height="1.6"></a-camera> --> then switch to VR.

Initial camera position: "0 1.6 0"
Expected camera position after switching to VR: "0 0 0" (userHeight-Offset substracted)
Observed camera position after switching to VR: "0 -1.6 0" (userHeight-Offset substracted twice)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Ah you're right! It was the WebVR Emulator. After disabling it the behavior is back to normal. So I think this can be closed. Thank you!  **Description:**
Controller doesn't appear when I set `<a-entity gearvr-controls="hand: right"></a-entity>` but they do if I set `hand: left`.

- A-Frame Version: 0.6.0
- Platform / Device: Samsung Internet 
- Reproducible Code Snippet or URL:

`<a-entity gearvr-controls="hand: right"></a-entity>`

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Hi @machenmusik, I have my controller set as right handed, to it should be exposed as right handed but I can only make it work setting `hand: lelft` or avoiding set `hand`, and by default is on the left. Confirmed

Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: machenmusik <notifications@github.com>
Sent: Wednesday, July 5, 2017 12:30:46 PM
To: aframevr/aframe
Cc: Subscribed
Subject: Re: [aframevr/aframe] GearVR controller right hand (#2844)


The GearVR Controller has a handedness that is set when you pair it using the Oculus app. (I believe the default is right hand.) If you configured your controller to be left handed, then the GearVR Controller is exposed with left handedness, and so I would expect the behavior you are seeing. Can you confirm whether that is the case?

—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub<https://github.com/aframevr/aframe/issues/2844#issuecomment-313203082>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AcUiPiOikqfaZnIu_xP7BfJ49g308r0qks5sK-RlgaJpZM4OOJn3>.
 @machenmusik I just have bought the S8 and the Gear VR, so I'm not already familiar with the oculus system, but I think I have tried on both (both are called Samsung internet but one is through the oculus launcher, isn't it?) and I don't understand the difference between them.
Tomorrow I'll try it again and I will confirm that the issue is happening on both browsers.
 Ok, I will do more test tomorrow 'cause I don't have the device at home. I can confirm there is an issue with Samsung Internet (not Oculus browser) with Samsung S8 / Gear VR / Aframe 0.7.0. I put in bold what I think is wrong.
**It seems that Samsung Internet read the hand configured in preferences in reverse.**

With Samsung Internet with right hand configured in preferences:
- with `<a-entity gearvr-controls="hand: right">` the controller **doesn't show up**
- with `<a-entity gearvr-controls="hand: left">` the controller shows up on the left
- with `<a-entity gearvr-controls>` the controller shows up on the **left**

With Samsung Internet with left hand configured in preferences:
- with `<a-entity gearvr-controls="hand: right">`  the controller shows up on the right
- with `<a-entity gearvr-controls="hand: left">`  the controller **doesn't show up**
- with `<a-entity gearvr-controls>` the controller shows up on the **right**

With Oculus browser with right hand configured in preferences:
- with `<a-entity gearvr-controls="hand: right">` the controller shows up on the right
- with `<a-entity gearvr-controls="hand: left">` the controller doesn't show up
- with `<a-entity gearvr-controls>` the controller shows up on the right

With Oculus browser with left hand configured in preferences:
- with `<a-entity gearvr-controls="hand: right">` the controller doesn't show up
- with `<a-entity gearvr-controls="hand: left">` the controller shows up on the left
- with `<a-entity gearvr-controls>` the controller shows up on the left Is this an issue with A-Frame or Samsung Internet?
I don't really understand how the hand system config influence A-Frame here.
A-Frame appears to use `DEFAULT_HANDEDNESS: 'right'` always.
Do you guys have some pointers so we can maybe create a bug report to Samsung Internet? if you can use the chrome remote web inspector while running Samsung Internet,
it would be great to understand what navigator.getGamepads() is returning;
Oculus Browser correctly populates the gamepad with a hand property matching left or right.
I wonder if what is happening is that Samsung Internet is not actually returning a hand string, or the wrong one... Thanks @machenmusik I'll try that this weekend. I put a `console.log(gamepads);` in `updateControllerList:` in `tracked-controls.js`
In Oculus browser with right hand in preferences:
![oculus_browser_right_hand](https://user-images.githubusercontent.com/112249/32133676-73d49f90-bbdd-11e7-9a06-c2581be5b7d6.png)

In Oculus browser with left hand in preferences:
![oculus_browser_left_hand](https://user-images.githubusercontent.com/112249/32133678-7f046508-bbdd-11e7-9896-18deeb4dc24c.png)

In Samsung Internet with right hand in preferences:
![samsung_internet_right_hand](https://user-images.githubusercontent.com/112249/32133638-c0edb9de-bbdc-11e7-9287-c15231d15439.png)
It shows `hand: "left"`!

In Samsung Internet with left hand in preferences:
![samsung_internet_left_hand](https://user-images.githubusercontent.com/112249/32133644-d5b098e6-bbdc-11e7-8283-128ad7369892.png)
It shows `hand: "right"`!

So it is definitely an issue in Samsung Internet.
 Now where is the issue tracker for Samsung Internet for VR... I'm searching it... Anybody knows? Found it, I created an issue there https://github.com/SamsungInternet/support/issues/22 @mkeblx ^^ ? I'll have a look soon. Thanks For Samsung Internet handedness bug is resolved. Our next release will have fix in. Brilliant thank you! Thanks @mkeblx !  The [environment component](http://github.com/feiss/aframe-environment-component) is useful in many cases when there is no 3d modelling knowledge and/or when something quick for testing and experimenting is needed.

So, why not more components, systems and tools for getting procedural content easy and fast? For example, they could be useful for:

* Creating and applying textures and materials (using https://github.com/mrdoob/texgen.js/ ?)
* Generating appealing color schemes
* Applying complex animations
* Creating 3d models out of basic primitives and operations
* Creating buildings and cities
* Creating simple avatars
* Creating advanced particle systems
* Creating furniture
* Creating spaceships

and much more!
 Many awesome components already do this ? rain, ocean, polygons, stars .. What is the new idea ?
 Yeah, creating procedural content is not a new idea at all. I just thought that many aframe demos and experiences could benefit from it, and this thread could be a little bookmark of what kind of 'procedural' components could be done and open the subject to discussion and brainstorming. 

Of course mods can close this issue if nobody thinks it is worthy :) Ok, understood. To get started, what would distinguish 'procedural' from other components ? The number of properties ? So the topic could be about complex components with a large (>5?) number of properties?
 Ok, let's assume this is about larger, geometry generating components ? Or just generally about components ? Still a bit unsure.

Thinking a bit bigger here are some ideas.

I would like to see a generalized transformation component which would allow reprojection of coordinates (of any geometry) through custom or a set of predefined functions (not just trafo matrices), on the GPU. The particular use case would be GIS, for AR type applications, using proj4, once double fp on the GPU becomes commonplace.

A complex procedural component could be one which takes the scanned image of a floor plan, or plan of building foot prints of city blocks, and reconstructs 3d walls and doors and windows via image machine learning.

Any kind of geometry reconstruction from images as a component.

A planet generator based on our solar system plus categories of extra solar planets.

Practical domains for parameterized solid objects:
architecture, transportation, mechanical engineering, clothing, furniture, animals, avatars, tree of life, cities, mining, landscape, lab, sculpture, art, music, datamining. Potential guide for more specific brainstorming. A github search for 'generator JavaScript' ?

The label said brainstorming ...



 Instead of creating more components how about some good documentation for how someone could do it? I've basically had to reverse engineer the ocean component to learn how to do dynamic geometry.  > Instead of creating more components how about some good documentation for how someone could do it? I've basically had to reverse engineer the ocean component to learn how to do dynamic geometry.
@joshmarinacci 

Reading [Writing a Component](https://aframe.io/docs/0.6.0/introduction/writing-a-component.html) in particular [Creating the Box Mesh](https://aframe.io/docs/0.6.0/introduction/writing-a-component.html#creating-the-box-mesh) describe precisely that. Maybe [<a-entity>.object3D](https://aframe.io/docs/0.6.0/core/entity.html#object3d) could be linked explicitly in [introduction](https://aframe.io/docs/0.6.0/introduction/) or [Developing with three.js](https://aframe.io/docs/0.6.0/introduction/developing-with-threejs.html). Alternatively the documentation could visually display the stack ([as I've done in a very ugly manner before](http://jsbin.com/yuwive/edit?html,output), as usual 😉) but apparently not everybody is a fan of that. @dmarcos actually it is practically finished... you can take a look at the code here: https://github.com/rlamana/a-aviator. I basically used your official documentation as my only source. This is the first time I use A-Frame so I guess there are probably better ways to do some of the things I did. I look forward to your feedback ;) @fernandojsg done, https://rlamana.github.io/a-aviator/  **Description:**

The <a-animation> element with color as animated attribute does not use the parent element's color as from value. It is necessary to provide an explicit from value.

- A-Frame Version: 0.5.0, 0.6.0
- Platform / Device: all
- Reproducible Code Snippet or URL:

https://glitch.com/edit/#!/almond-taker?path=public/index.html:10:40
https://almond-taker.glitch.me/

The box color should interpolate from blue to red but resets to black as initial color at the start of the animation. dataFrom should already have gone through this check:

https://github.com/aframevr/aframe/blob/af3f89049d10b9037895b9059e5aa430c6f1bf81/src/core/a-animation.js#L95

But I am non sure why this line

https://github.com/aframevr/aframe/blob/af3f89049d10b9037895b9059e5aa430c6f1bf81/src/core/a-animation.js#L107

is placed afterwards, not before the getAnimationValues call.

It may be worthwhile to find out why it works for other attributes but not for color: https://github.com/aframevr/aframe/blob/af3f89049d10b9037895b9059e5aa430c6f1bf81/src/core/a-animation.js#L479
Ah, I see other attributes do the same check. For the initial case when self.initialValue is undefined.

This indicates that the code may benefit from reorganization to avoid that additional checking with duplicated code but that could take longer to figure out.

So, the proposed fix look good to me, as it just follows how other attributes are handled.

The proposed fix (but not the other attribute checks) may be written as:

```
dataFrom = dataFrom || getComponentProperty(el, attribute);
from = new THREE.Color(dataFrom);
```
but I did not actually try this.Does not work for 0 and false.

 https://reminiscent-tip.glitch.me/
applies @takahirox fix . It works for the example, and probably in general. Submit PR and wait for a response ? Perhaps there is a test to add ?
 https://github.com/aframevr/aframe/blob/master/tests/core/a-animation.test.js
It looks like the case when from is missing and from is the current entity value was not tested, so perhaps there is no need to add a test.  **Description:**
The documentation of [cursor](https://aframe.io/docs/0.6.0/components/cursor.html) states it internally uses the [raycaster](https://aframe.io/docs/0.6.0/components/raycaster.html) component which has a property `showLine` that causes a line to be displayed. However the line is still visible even if that property is set explicitly. A fix i found is to add `line="visible: false"` on the cursor entity.

I am attaching two images. The first is a screenshot from VR mode in Xiaomi MI 5 on Google Chrome, where the effect is visible. The second shows the inspector in a desktop version where the line component has the `visible` property set to true despite the `showLine` property set to false on the raycaster component.

- A-Frame Version: 0.6
- Platform / Device: Xiaomi MI5 - Google Chome, GearVR (both only after entering vr mode)
- Reproducible Code Snippet or URL:
```html
<!DOCTYPE html>
<html>
  <head>
    <script src="https://aframe.io/releases/0.6.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-camera>
        <a-cursor></a-cursor>
      </a-camera>
      <a-sky color="#0000FF"></a-sky>
    </a-scene>
  </body>
</html>
```
![aframe_cursor_line](https://user-images.githubusercontent.com/17070569/27831839-a5b66b36-60cc-11e7-8f5c-ae119cad3c0b.png)
![aframe_cursor_inspect](https://user-images.githubusercontent.com/17070569/27832176-05a4e3f0-60ce-11e7-8e07-26a883a9d130.png)


  Is there going to be a 0.6.1 patch release for this bug fix?  **Description:**
This PR fixes a typo in the cursor components event documentation. The correct event for cursor fusing is `fusing` not `cursor-fusing`.

**Changes proposed:**
- Fix typo in cursor component documentation.
 Sorry. On `0.6.0`. On `0.5.0` the documentation is correct.  When trying to set setAttribute('geometry',{primitive: "plane", height: "auto", width: "auto"}); on `<a-entity text>` the plane is not being drawn. However if you change the wrap count programaticaly afterwards the plane is showing. The plane will not update it's width and height if you change the wrap count again.

- A-Frame Version: 0.6.0 master (8d60730)
- Platform / Device: PC


 Hi @dmarcos, we still have the problem;

`var text = document.querySelector('#af-text');
text.setAttribute('geometry',{primitive: "plane", height: "auto", width: "auto"});`

Will not work, but when we change the e.g. wrapCount the textbox will appear.  @dmarcos, yes I am on the master branche as per your suggestion.

@machenmusik, the auto width and height are on the geometry component see:

https://aframe.io/docs/0.6.0/components/text.html

`<a-entity
  geometry="primitive: plane; height: auto; width: auto"
  material="color: blue"
  text="width: 4; value: This text will be 4 units wide."></a-entity>`

The thing is, after creating the entity component with:

`<a-entity text="width: 4; color: #000; value: test text" id="text"></a-entity>`

and adding `geometry="primitive: plane; height: auto; width: auto;" material="color: red"`
in the console (or with javascript) nothing happens. But when you change anything in the text="" section after adding the geometry in the console (or with javascript), the plane appears. Even doing:

`text = document.querySelector('#text);
text.setAttribute('text','bla',1);`

will work. Setting the geometry width and height to an integer indeed works, but I need autoscaling. The documentation says:

> Scaling Geometry to Fit Text
To have the geometry automatically scale with the text, set the geometry component’s width and height properties to auto, and set the text component’s width as desired. In this example, the plane’s width will be set to 4 units, and its height will be set to match the actual height of the text:

And it works as intended in 0.5.0 and 0.6.0, but not when we set it programmatically.

So (imho), I doubt it's an error in the documentation. 

Edit: it seems #2764 has height: auto on the geometry and suffers from the same bug.

Edit2: @dmarcos, could you re-open this issue?  Well, @ngokevin mentions `<a-entity text geometry="primitive: plane; height: auto" material>` in #2764 so `height: auto ` is valid in the geometry component in this case.

  The github tag release notes and any other places should be updated too.  The wakelock feature that is supposed to keep the screen from dimming with NoSleep.js is not working. The demo page for NoSleep.js does work on the same phone.

- A-Frame Version: 0.5.0
- Platform / Device: Samsung Galaxy S7 Edge w mobile Chrome browser
- Reproducible Code Snippet or URL: https://glitch.com/edit/#!/complete-capricorn?path=index.html:171:40

 If you attach the developer tools you can see a warning triggered by nosleep that says that the functionality it uses can only be used in response to a user event. I'm hoping to the it into the VR Mode button and have that be the "User Event"  **Description:**

1) EnterVR button didn't work at all
2) EnterVR button worked only once, since exitVR from external cause wasn't handled.

**Changes proposed:**
- Remove check if isGearVR from utils.isMobile (already done in 0.6.0)
- Add vrdisplaypresentchange callback to a-scene and exit VR correctly on external cause (already done in 0.6.0)
  **Description:**

1) EnterVR button didn't work at all
2) EnterVR button worked only once, since exitVR from external cause wasn't handled.

**Changes proposed:**
- Remove check if isGearVR from utils.isMobile (already done in 0.6.0)
- Add vrdisplaypresentchange callback to a-scene and exit VR correctly on external cause (already done in 0.6.0)

  For other browsers https://github.com/video-dev/hls.js This one has gotten a little stale - do we still want it?  If so, are any further styling changes needed (and if so, what?) Revisiting this, it turns out that changes were needed to make MacOS HLS work... and iOS HLS isn't working again :-/ Does anyone have a non-upgraded iOS 10 device to try, to confirm that iOS HLS behavior regressed between 10 and 11? Great, thanks @cvan - I can't downgrade back to 10.3.3 anymore so that will be super helpful  (1) It's not just iOS.  For example, it actually works better on Edge and WinMR because it has native support, full hardware acceleration, and can handle live.  Same for Android, and especially Oculus Browser.  iOS is actually the worst, since they broke it again with iOS 11.

(2) I don't think there is actually much complexity here, comparatively speaking - can you say more about what you are objecting to specifically, rather than a general less-is-more maintenance sentiment?

(3) Video is an important use case, there is quite a bit of it.  HLS is still used on multiple platforms to deliver live and prerecorded content, 

If you are saying you don't want A-frame to maintain the list of which things need which quirks, I understand.  But having the support to be able to apply workarounds for the quirks is definitely something for core A-Frame.  There is no other way to externally apply the quirks, because even if you set the shader manually, A-frame would set the wrong texture format for THREE to try. To be clear, native HLS is available in Windows (Edge), macOS (Safari at least), iOS (Safari and friends which is everything), Android (Chrome, Samsung Internet, Oculus Browser) so I don't think there should be a question of supporting HLS where commercially reasonable.

I think the question is whether the quirks are worth (1) providing core support to allow and (2) directly facilitating in core.

I do think (1) is critical - for example, allowing the use of formats other than the originally hardcoded RGBFormat for video textures, which is a critical piece without which only black screens would be seen on impacted platforms.

I can understand the push to avoid (2) and push out of core, if usage is minimal.  How many folks visit A-Frame powered sites with macOS Safari?  With iOS?  I don't know the answer.  I do feel relatively confident in saying that the number will drop to zero if it doesn't work.  I also don't know what percentage of that usage includes video, but to be frank since there is no WebVR on either, there isn't a lot else to do with A-Frame there...?  Maybe we need to add analytics tags to A-frame so we can gather this type of info. @dmarcos , @cvan not having adaptive streaming (thus also HLS) is one of the reason video professionals are still using KRPano, despite stating a desire to migrate to A-Frame. I had that precise discussion last week at WebXRParis. PR that helps to fill the gap for 360 videos that do load fast (people using YouTube as a comparison point) makes a huge difference. @Utopiah can you clarify, there is already support in A-Frame for native HLS (although it would appear that Apple broke it in iOS 11) -- is the ask for adaptive streaming regardless of native support (e.g. hls.js, dash.js, and the like) ?  From prior discussions with @dmarcos @ngokevin, that level of support may be more appropriate for components at the moment. @machenmusik yes adaptive streaming regardless of native support, be it within core or as a component (whatever is the most appropriate maintenance wise) there is a clear need for it from video professionals. thanks @Utopiah -- outside the various Apple/Safari breakage bugs (CORS, iOS 11) that is doable now actually... @machenmusik yes I've done it in March and it worked relatively well back then but it was neither complete nor obvious. Just checking - am I right that the current PR no longer needs changes, but that there is still some discussion about removing the BGRA and flip Y functionality and/or quirk detection from core, with @dmarcos @ngokevin for removal, and @cvan @machenmusik @utopiah against?  

If so, can we merge this PR first so the current state is less broken / inconsistent, and open another issue to discuss how to refactor quirk detection etc. out of core? I would also like to point out that having a working HLS example is actually of rather significant benefit to those platforms that support native HLS without Safari's quirks, with the newest notable being Edge for WinMR. I agree that we want to move quirk detection and handling out of core as much as possible.

So IIRC the one thing that needs to be in core is selection of the THREE texture format (e.g. simple RGB vs. RGBA, which then gets interpreted as BGRA by shader in some cases).  Video hardware accelerated decoding actually provides YUV colorspace and it is vastly more efficient to do color space conversion in shader if not intrinsic to the HW acceleration, and if WebGL can get that to us, performance can approach what can be done with native.  Also, not sure if THREE hides, but on some platforms native video runs faster as 32 bit RGBA or ARGB...

So OK, I propose this:

- keep this PR, modify it so it's just about having a working HLS example and ignoring any particular changes for quirks, then merge it.  So it may not work on Safari, but should on Edge et al.

- start working another issue/PR to remove all but the necessary texture format specification from the current quirk accommodations

- in tandem with that PR, make an example component outside core that does the quirks

Agree?

 I think the very simple case of adding, alongside the existing MP4 video demo, an equivalent that uses HLS - which was the original call for action here - has somehow gotten wrapped around the axle of Safari quirks and concern over whether they should be accommodated.

So let us please reset the discussion to be about simply adding a video example that uses HLS instead of MP4, with appropriate files and links from existing examples, and I will do the same to the contents of this PR.  MP4 files are not suitable for live streaming cases, which is the space that support for HLS format and/or Media Source Extensions (MSE) covers nicely.  I presume that if this is done, there will be no objection to merging the PR to provide the example, and we can discuss other concerns separately.

There are several prominent browsers that support native HLS video in A-Frame without any special considerations, which we should use to help politely suggest similar behavior from browsers with broken native HLS support.  Note that browsers that support MSE have other paths to support live content, such as DASH and dash.js, so they may not benefit from adding HLS native support. With all due respect, it seems clear that you guys are not highly fluent in the nuances of video support in browsers.  Let me make a few statements and see whether we agree...

- A-Frame supports video as a core media type, like 3D objects, and audio, and text (which took some convincing, but has proven its value over time.)

- It does this because supporting experiences using (both traditional 2D and newer 180/360) video is a common use case for A-Frame, similar to panoramic 360 images and the various experiences built from and with them.  (Also, new uses of video-as-2D texture mixed with 3D points / mesh are starting to emerge such as DepthKit.)

- The HTML specifications and browser implementations are responsible tor video element and handling, not A-Frame (or three.js).

- The details of video element support for various codecs and container formats (e.g. MP4, webm, HLS) are provided by HTML specifications and browser implementations, and are out of scope for three.js and A-Frame.

- A-Frame introduces a very minimal layer, atop three.js at present, so that the material component can reference video elements much the same way they can reference image elements, and they can be visualized and utilized alongside other (three.js and) A-Frame functionality.

- A-Frame should provide examples of how to use the minimal layer it provides for each core media type, or else it should drop support for the core media type.  (NOTE: This is the intent of the current PR.)

- A-Frame cannot guarantee, and should not attempt to guarantee, that said examples will work on all browser implementations, as that is out of scope.  (This is the discussion we are having about quirks, and should be separated into other issues / PRs.)

Ok? Existing A-Frame video examples work when the browsers provide native support (e.d. Safari, Chrome, Edge, Firefox) but may not work in browsers that don't support that kind of video (if I recall correctly, that includes MP4 in Chromium, and webm in Safari at least).

The same should and will be true for these HLS examples once I strip down this PR.

We can refactor to simplify (by removing quirk special handling) separately.

Ok? @ngokevin I think we agree on the direction, very specifically that A-Frame will continue to support video in core to the extent the underlying implementations expose it, but not include any customizations for deficiencies or quirks in behavior.  In fact we expect to remove existing workarounds in subsequent PRs.  Do I misunderstand?

On the fervent hope that we agree there... I really don't understand the objection to simply having an example of video playback with A-Frame that points at HLS files, to sit alongside the MP4 and webm examples currently distributed.  It's like refusing to have examples of JPEG images, only PNGs... I am still in the air, but I will submit a new PR that has just the examples directory files from here, as I think this PR has confused matters by mixing concerns.

 Ok good, so no objection to examples, but don't want to use the pre-existing examples folder methodology in the repo for reasons above.  Got it, makes sense, thanks! So for the examples like the showcase videosphere which are currently examples folder in repo, do we want to move them out into one glitch with all the examples?  Or individual glitches?  Or just leave them alone? so what is the final decision ? If I want to play hls stream inside aframe, what is the recommended way ? currently I am using videojs library which wraps the video element inside the a-assets. It is working for chrome/firefox/safari on desktop, chrome on android but not on (safari/chrome) on iphone (iOS version 11.0)?  > currently I am using videojs library which wraps the video element inside the a-assets.

Assuming that means video.js with hls.js support, that is required for browsers that do not support HLS natively.

> but not on (safari/chrome) on iphone (iOS version 11.0)?

Unfortunately there seems to be a Safari regression with iOS 11. Hey @machenmusik , 
Thanks for the reply.
So can we expect this to be solved in a few days ? How long could it take before this Safari regression with iOS 11 is taken care of. Is there a thread already open for this ?  I believe this issue is best followed via https://github.com/mrdoob/three.js/issues/9754, which has a long history. BTW, if more typical MP4 video is an option for you, that seems to work OK on Safari as long as you avoid Webkit/Safari CORS bugs and/or if Safari fixes for those bugs have landed in the version you use Thanks @cvan yeah, mp4 is working fine on iphone safari iOS11. Thanks @cvan and @machenmusik for the webkit bug thread and three.js issue thread
  While developing a new site, I noticed my interface was mysteriously broken this morning (6/30/2017). I had not pushed any code changes, but it's pulling in aframe.io/aframe/dist/aframe-master.js which _did change_ last night.

The code that no longer worked is supposed to manage UI elements by automatically readjusting the position of buttons (simple plane geometries) whenever a button is added/removed. It does this by looping all elements (each button is `control`):
```
pos = control.getAttribute('position');
if (pos) {
  pos.x = offset_left;
  control.setAttribute('position', pos);
}
```

I checked `control.getAttribute('position')` and they were all correct, but none of the positions were actually changed in the scene. I tried manually performing `control.setAttribute('position', pos)` via the developer console and noticed something odd: it took **two** calls to `setAttribute` to actually get the element to move. So my updated UI loop (which works again, hooray!):
```
pos = control.getAttribute('position');
if (pos) {
  pos.x = offset_left;
  // For some reason, this now needs to be called twice.
  control.setAttribute('position', pos);
  control.setAttribute('position', pos);
}
```

- A-Frame Version: 0.6.0 (Date 30-06-2017, Commit #13ced44)
- Platform / Device: Firefox and Chrome on Windows 10 (latest stable versions of each)
- Reproducible Code Snippet or URL:
To reproduce, go to https://aframe.io/aframe/examples/boilerplate/hello-world/ and execute this script via the console:
```
var pos = document.querySelectorAll('a-box')[0].getAttribute('position');
pos.x -= 1;
document.querySelectorAll('a-box')[0].setAttribute('position', pos);
// The box does **not** update position, until you run the following line (uncomment before running):
// document.querySelectorAll('a-box')[0].setAttribute('position', pos); // Now it works!
``` A few objects in my experience moved when upgrading to 0.6.0

For me it was happening when I changed the 'position' 'x' attribute-- it reset y to 0 instead of holding onto its previous value. 

In other words, I define an entity at position (0, -.24, 0) and throughout the experience I'm changing that x position, but every time the x position changed it was resetting y to 0. I surmised that I needed to keep redefining y, and that seemed to fix the problem.

`


    //move from -.25 to 0 and scale from 0 to 3 over panotime
    countTime -= 500;

    var xLoadPos = -.25 + (0.25 * (1 - (countTime/panoTime)));

    var xLoadScale = 3 * (1- (countTime/panoTime));

    loadBar.setAttribute('position', 'x', xLoadPos);

    loadBar.setAttribute('position', 'y', "-.24"); //ADDING THIS CODE FIXED IT

    loadBar.setAttribute('scale', 'x', xLoadScale);

` I have multiple things broken with this update. I have two components changing entity rotation in `tick()`.

Firstly, I experience the same problem as @ibrews.

Secondly, I noticed that reversing the order of these components inside HTML tag restored the previous behavior. Is there a test that checks the execution order of `tick()` etc.? If not, we should write one. @ngokevin Probably later, I have no time at the moment, unfortunately, but wanted to let others know. Ah, that makes sense! But quick question: why is that solved by calling `el.setAttribute` a second time? Wouldn't the same `oldData === data` check have the same result? More than likely

Get Outlook for Android<https://aka.ms/ghei36>

________________________________
From: Jay Dansand <notifications@github.com>
Sent: Wednesday, July 5, 2017 2:29:11 PM
To: aframevr/aframe
Cc: Subscribed
Subject: Re: [aframevr/aframe] Entity.setAttribute('position') Not Always Effective (#2829)


Ah, that makes sense! But quick question: why is that solved by calling el.setAttribute a second time? Wouldn't the same oldData === data check have the same result?

—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub<https://github.com/aframevr/aframe/issues/2829#issuecomment-313232199>, or mute the thread<https://github.com/notifications/unsubscribe-auth/AcUiPn1Filh-bXqGXcP4pUrJbXCcUO0jks5sLAAngaJpZM4OKyaE>.
  **Description:**
When I use inspector/network to check the files that are being loaded, I noticed that a lot of the files, images are being loaded twice, sometimes 3 times, resulting in a slow downloading speed.

Can someone explain this ?

I thought it was my code at first, but I checked the official examples, and it is showing the same issue.

I don't know if anyone else sees this issue.

Thanks.

  **Description:**
My project's gyroscope also isn't working on Mozilla Firefox. It's fine on Google Chrome though.

- A-Frame Version: 0.5.0
- Platform / Device: Firefox on Android
- Reproducible Code Snippet or URL: aframe.io

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Please fill up the relevant information (version, device, URL) as it works well everywhere else I tried including on Firefox. Oh, sorry about that. I updated the info. The problem seems to exist only with Firefox on android.  geometry text with another triangulation
https://threejs.org/examples/?q=text

## Why?

Built-in THREE.js triangulation show error messages sometimes.

`THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()`

**https://github.com/7dir/aframe-triangulation-component**

  **Description:**
turn on `stats `
faces 1280 on blank scene


- A-Frame Version: 0.5
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  when selecting element by id in selectorParse, use getElementById instead of querySelector for better performance (https://jsperf.com/getelementbyid-vs-queryselector), and this way it also support id that starts with a digit (querySelector doesn’t support that) Fixed.  **Description:**

Switches back to webvr-polyfill master @ 0.9.35 now that googlevr/webvr-polyfill#267 has landed  Klass  Fix #2809

With the addition of the `extend()` function, the extension mechanism can consider the cases in which the component is absent or is of a primitive type:

1. If both `base` and `extension` are absent, `extend()` will return `undefined`.
2. Else, If `base` or `extension` is absent, `extend()` will returns a copy of the other.
3. Else, If none of them is absent and both are pure JS objects, the second will extend the first as usual.
4. Finally, the `extension` is preferred so a copy of it is returned.  The line in charge of [extending components coming from mixins](https://github.com/aframevr/aframe/blob/master/src/extras/primitives/primitives.js#L81) will return an invalid value when the mixin component is a non-object single-property value such as an string:

```js
data[name] = utils.extendDeep(data[name] || {}, mixinComponents[name]);
```

This is caused by how [`deep-assign`](https://www.npmjs.com/package/deep-assign) works.

Try the following snippet:

```js
const deepAssign = require('deep-assign');
undefined
deepAssign({}, '[camera]');
{ '0': '[',
  '1': 'c',
  '2': 'a',
  '3': 'm',
  '4': 'e',
  '5': 'r',
  '6': 'a',
  '7': ']' }
deepAssign({}, 1);
{}
```
  **Description:**
I'm trying to change the text in an a-text dynamically with setAttribute from Javascript.  The example linked below simply just changes the text to another hardcoded text (compared to initial value) each tick. It works as I expect it too in Chrome ("my text" is shown), but not in Firefox or Safari ("text" is shown). I cannot really see what's wrong here, especially since it works in Chrome. Any ideas?

- A-Frame Version: 0.5.0
- Platform / Device: Firefox/Safari, macOS
- Reproducible Code Snippet or URL: https://pastebin.com/aWytFC2k
  In the past the cursor did not interact with invisible objects by default. This behaviour changed in 0.5.0. and now we have to do extra work to _not_ interact with invisible objects.

Consider the following scenario:

- A raycaster with the objects: .clickable attribute
- An image that, when clicked, will show another image
- The new image, when clicked, will show a graph and a close button that will close all but the first image

What we need to do with 0.5.0 is:

- Add the class 'clickable' on the first image
- When the first image is clicked, make the second image visible _and_  add 'clickable' to it's class
- When the second image is clicked we need to set the graph visible and the close button, and add the class 'clickable' to the close button
- When the close button is clicked we have to set 'visible=false' to the second image, the graph and the close button _and_ remove the class 'clickable' from various objects.
- I did not mention we need to refresh the raycaster each time the class 'clickable' is added or removed

Now consider the above scenario if the cursor does not interact with invisible objects.

When a dev needs interaction with an invisible object isn't it better to hide the object with 'opacity=0'?

Kind regards, and thank you for a great product! Hi @ngokevin, still the same issue when I use:

`<a-box material="visible: false" width="1" height="1" depth="1"  class="clickable"></a-box>` I gave up on this myself. It would be nice.   [docs] update cursor component documentation

- Change 'cursor-fusing' argument in 'Adding visual feedback' to 'fusing'.
  Hi,

the aframe master example regarding 'Adding visual feedback' is wrong;

a-animation begin="cursor-fusing" should be

a-animation begin="fusing"  Still, when you use 'cursor-fusing' as the beginning of an animation the animation will not play. Ah, I see what you mean now.

In my opinion the dev has a choice which cursor (gaze, laser, w/e will be in the future) to use and can therefore set the appropriate cursor in code. When he / she needs a fallback to another cursor there can be a test for HMD that support laser (or other) cursors and if not choose another cursor like a gaze cursor?  **Description:**

I believe components can assume during their initialization that components on child nodes have already been initialized due to the inside-out initialization order. This assumption does not hold up in a scene with no `<a-assets>` declared. 

- A-Frame Version: 0.5.0
- Platform / Device: Win10, Chome, Chromium, Firefox, & Nightly
- Reproducible Code Snippet or URL:

This scene errors when a component on `<a-locomotor>` expects an object to be returned from `getAttribute` on a child node component but gets a string instead: 

```html
<head>
  <title>Most Basic Super-Hands Example</title>
  <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.3.0/dist/aframe-extras.min.js"></script>
  <script src="https://rawgit.com/wmurphyrd/aframe-super-hands-component/master/dist/super-hands.js"></script>
</head>

<body>
  <a-scene>
    <a-locomotor>
      <!-- Make sure your super-hands entities also have controller and collider components -->
      <a-entity hand-controls="left" super-hands sphere-collider="objects: a-box"></a-entity>
      <a-entity hand-controls="right" super-hands sphere-collider="objects: a-box"></a-entity>
    </a-locomotor>
    <!-- hover & drag-drop won't have any obvious effect without some additional event handlers or components. See the examples page for more -->
    <a-box hoverable grabbable stretchable drag-droppable
    color="blue" position="0 0 -1"></a-box>
  </a-scene>
</body>
```

This scene, identical except for the addition of an empty `<a-assets>` loads successfully:

```html
<head>
  <title>Most Basic Super-Hands Example</title>
  <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
  <script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.3.0/dist/aframe-extras.min.js"></script>
  <script src="https://rawgit.com/wmurphyrd/aframe-super-hands-component/master/dist/super-hands.js"></script>
</head>

<body>
  <a-scene>
    <a-assets></a-assets>
    <a-locomotor>
      <!-- Make sure your super-hands entities also have controller and collider components -->
      <a-entity hand-controls="left" super-hands sphere-collider="objects: a-box"></a-entity>
      <a-entity hand-controls="right" super-hands sphere-collider="objects: a-box"></a-entity>
    </a-locomotor>
    <!-- hover & drag-drop won't have any obvious effect without some additional event handlers or components. See the examples page for more -->
    <a-box hoverable grabbable stretchable drag-droppable
    color="blue" position="0 0 -1"></a-box>
  </a-scene>
</body>
```

This can definitely be solved in the component by not making the assumption, but I thought it was worth documenting for you.  Here it is with decomposed primitive:

https://glitch.com/edit/#!/denim-straw

The issue is still the same https://github.com/wmurphyrd/aframe-super-hands-component/blob/master/reaction_components/locomotor-auto-config.js  Get the `navigator.getGamepads()` to line up with controller entities in the scene markup. 

From @donmccurdy from the A-Frame Slack:

> A-Frame makes an assumption about which gamepad is right/left though (or maybe it's in the gamepad API?) so custom components have to match that.

It looks like [`this.controller` in `tracked-controls`](https://github.com/aframevr/aframe/blob/master/src/components/tracked-controls.js#L78) does this, but there's currently no component level way to pass along this information, so we're left doing something like `var controllers = navigator.getGamepads()`.

Since it pretty closely follows this issue: maybe there also oughta be a declarative way for handling button input and touch/pressed values? e.g. `leftTrackPadPressed = "LeftTrackPadPressedFn";` re: @donmccurdy 

I'm interested in getting events from the gamepad, that ideally include information like current state of the buttons and position/rotation — for example, to make a component that vibrates the controllers when a certain button is pressed, it'd be nice to just listen to specific button presses and vibrate `this.el.controller`. ~I'm also in favor of passing `hand: 'left' | 'right'` in the `controllerconnected` event, to get a baseline assuming the controllers support handedness.~ Actually, @donmccurdy, in writing the below I found that `tracked-controls`
 events (anecdotally, off of `buttonchanged`, but we can assume WLOG) returns the hand info in `e.detail.target.components['tracked-controls'].controller.hand`. That's still pretty cumbersome, but it's worth maybe just documenting this for now?

---

re: @dmarcos 
I've been looking for something like a streamlined version of accessing `document.querySelector('a-scene').systems['tracked-controls'].controllers` with a mapping between an controller and the element it originates from. Right now to do, for example, a very arbitrary fire-on-every-button-change, vibration call, you'd do something like the following:

``` javascript
document.querySelector('[tracked-controls]').addEventListener('buttonchanged', function (e) {
   e.detail.target.components['tracked-controls'].controller.hapticActuators[0].pulse(e.detail.state.value  / 2, 100)
})
```

Now that I've dug down into it, I feel like this satisfies what I was originally asking for, but the ergonomics could be better, such as surfacing `e.detail.controller` in the event response or declaratively allowing a function to handle a given controller, for example:

``` javascript

function triggerHandler (controller, buttonValue) { /* do stuff with this information */}
function trackpadHandler (controller, buttonValue) { /* do stuff with this information */}
/*... etc.*/
----
<a-entity tracked-controls="triggerHandler: triggerHandler; trackpadHandler: trackpadHandler; controller: 0; idPrefix: OpenVR;"></a-entity>
```

The example above is probably too vendor specific, but we can abstract it higher (gotta reference the WebVR and Gamepad API specs if I actually find the time to work on this) to handle buttons input. I've heard about controller/input support in 0.6.0, maybe this is redundant/can be coupled with that implementation? Yeah, while working through the issues I brought up at the top of this, there doesn't seem to be much actionable work here, although getting the haptics API would be a different conversation that can be picked up later, in a different thread when appropriate. Also, now that I think about it, the complexity surrounding handling controller input is such that a declarative model would be more obfuscation than enlightening, thanks @dmarcos.  **Description:**

A-frame has the option to register custom geometries:
https://aframe.io/docs/0.5.0/components/geometry.html#register-a-custom-geometry
The documentation mentions and the expectation would be that there is an update life cycle method, similar to components.

However, the update method of a registered custom component seems to be never invoked. Instead, the geometry component calls the init method when attributes change. This works for the built-in geometries but may not work for custom geometries.

- A-Frame Version: 0.5.0
- Platform / Device: all
- Reproducible Code Snippet or URL: https://heavy-client.glitch.me/
There is an update method which prints to the console. It is never called, eg. not at the initial init nor after clicking the button.

Solutions may include to either clarify documentation (deprecate custom geometries update) or add hook into custom update in geometry component update.
 https://aframe.io/docs/0.5.0/components/geometry.html#register-a-custom-geometry

now mentions update as a lifecycle method. I can prepare a short PR to clarify this doc section if desired.

 Yeah, as it is, registerGeometry does not really provide advantages over registerComponent for custom THREE Geometries, as far as I can tell.  **Description:**

Make custom geometry example code functional (it wasn't):
THREE.Geometry.vertices needs to be a flat array.
BoundingBox and Normals need to calculated.
The example vertices were colinear (!), replace with triangle

https://glitch.com/edit/#!/abounding-minute?path=index.html:18:8
for code and live preview

**Changes proposed:**

- see commit
-
-
  https://github.com/aframevr/aframe/pull/2757#issuecomment-309135066

The peers broke semver by requiring sinon 2, but sinon 2 has too much deprecation noise.

cc @ngokevin Yea a revert won't cut it, that will just put it back into a broken state. This PR should be what you want. rebased Should this go into the angle template as well ? I just had what seemed to be same/similar issue using angle initcomponent, the npm install.  **Description:**
Fix typo on the [building a basic scene page](https://aframe.io/docs/0.5.0/guides/building-a-basic-scene.html#tweaking-lighting) under the tweaking light title.

**Changes proposed:**
- from `<a-light>s` to `<a-lights>` Alright, my bad. Still sounds kinda weird. Shouldn't it be `<a-light>` without the s? Ah, that's why. 🆒   The position attribute implies that this component alone can do positional audio, which is not true (as of 0.5)
To have positional audio, you need to attach this to another entity.

**Description:**

**Changes proposed:**
-
-
-
  **Description:**

- A-Frame Version: 0.5.0
- Platform / Device: Windows, Internet Explorer 11.1198.14393.0

Hi guys,
Thank you for the great framework. I am working on a project that requires support for IE11.
I have noticed an issue with the aframe 0.5.0 version. I am trying to make a screenshot of the current canvas. The operation fails at [this line](https://github.com/aframevr/aframe/blob/990e9272dc9ddc463a7707fae885c2afd26f9006/src/components/scene/screenshot.js#L224 ) in screenshot component. The issue is that TypedArray.prototype.slice is not supported in this version of IE. Would you consider supporting the functionality in IE 11?

Thanks. Hi @donmccurdy 
Thanks a lot for the suggestions and linked issues. I have checked the issues as well. I guess if new need to support it we will go with the polyfill. 
Thanks for your time and keep up the good work 👍 !  Hi,

I've made a presentation for a client in Aframe. All is working well except on iOS devices iPhone 5S, 6,  iPad mini 1 and the iPad Air 1. iOs is at the latest version (10.3.2).

The presentation is 86MB in total and contains a GLTF 1 model, and about 15 sky spheres. The offending device(s) will reload the presentation at random points in time as well as at random events.

While debugging iOS Safari the following appeared on the dev console on my Macbook when they where connected:

===========================================================

[Warning] Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic (aframe-master.min.js, line 134)
[Debug] GLTFLoader: 3616.442ms (aframe-master.min.js, line 120)
[Warning] THREE.WebGLShader: gl.getShaderInfoLog() (3) (aframe-master.min.js, line 101)
"fragment"
"WARNING: 0:187: Overflow in implicit constant conversion, minimum range for lowp float is (-2,2)
"
"1: #extension GL_OES_standard_derivatives : enable
2: #extension GL_EXT_shader_texture_lod : enable
3: precision highp float;
4: precision highp int;
5: #define SHADER_NAME MeshStandardMaterial
6: #define STANDARD 
7: #define GAMMA_FACTOR 2
8: #define USE_ENVMAP
9: #define ENVMAP_TYPE_SPHERE
10: #define ENVMAP_MODE_REFLECTION
11: #define ENVMAP_BLENDING_MULTIPLY
12: #define USE_NORMALMAP
13: #define NUM_CLIPPING_PLANES 0
14: #define UNION_CLIPPING_PLANES 0
15: #define TEXTURE_LOD_EXT
16: uniform mat4 viewMatrix;
17: uniform vec3 cameraPosition;
18: #define TONE_MAPPING
19: #define saturate(a) clamp( a, 0.0, 1.0 )
20: uniform float toneMappingExposure;
21: uniform float toneMappingWhitePoint;
22: vec3 LinearToneMapping( vec3 color ) {
23: 	return toneMappingExposure * color;
24: }
25: vec3 ReinhardToneMapping( vec3 color ) {
26: 	color *= toneMappingExposure;
27: 	return saturate( color / ( vec3( 1.0 ) + color ) );
28: }
29: #define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )
30: vec3 Uncharted2ToneMapping( vec3 color ) {
31: 	color *= toneMappingExposure;
32: 	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );
33: }
34: vec3 OptimizedCineonToneMapping( vec3 color ) {
35: 	color *= toneMappingExposure;
36: 	color = max( vec3( 0.0 ), color - 0.004 );
37: 	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
38: }
39: 
40: vec3 toneMapping( vec3 color ) { return LinearToneMapping( color ); }
41: 
42: vec4 LinearToLinear( in vec4 value ) {
43: 	return value;
44: }
45: vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
46: 	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );
47: }
48: vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
49: 	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );
50: }
51: vec4 sRGBToLinear( in vec4 value ) {
52: 	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );
53: }
54: vec4 LinearTosRGB( in vec4 value ) {
55: 	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );
56: }
57: vec4 RGBEToLinear( in vec4 value ) {
58: 	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
59: }
60: vec4 LinearToRGBE( in vec4 value ) {
61: 	float maxComponent = max( max( value.r, value.g ), value.b );
62: 	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
63: 	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
64: }
65: vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
66: 	return vec4( value.xyz * value.w * maxRange, 1.0 );
67: }
68: vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
69: 	float maxRGB = max( value.x, max( value.g, value.b ) );
70: 	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );
71: 	M            = ceil( M * 255.0 ) / 255.0;
72: 	return vec4( value.rgb / ( M * maxRange ), M );
73: }
74: vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
75: 	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
76: }
77: vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
78: 	float maxRGB = max( value.x, max( value.g, value.b ) );
79: 	float D      = max( maxRange / maxRGB, 1.0 );
80: 	D            = min( floor( D ) / 255.0, 1.0 );
81: 	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
82: }
83: const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
84: vec4 LinearToLogLuv( in vec4 value )  {
85: 	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;
86: 	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));
87: 	vec4 vResult;
88: 	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
89: 	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
90: 	vResult.w = fract(Le);
91: 	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;
92: 	return vResult;
93: }
94: const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
95: vec4 LogLuvToLinear( in vec4 value ) {
96: 	float Le = value.z * 255.0 + value.w;
97: 	vec3 Xp_Y_XYZp;
98: 	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);
99: 	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
100: 	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
101: 	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;
102: 	return vec4( max(vRGB, 0.0), 1.0 );
103: }
104: 
105: vec4 mapTexelToLinear( vec4 value ) { return LinearToLinear( value ); }
106: vec4 envMapTexelToLinear( vec4 value ) { return LinearToLinear( value ); }
107: vec4 emissiveMapTexelToLinear( vec4 value ) { return LinearToLinear( value ); }
108: vec4 linearToOutputTexel( vec4 value ) { return LinearToLinear( value ); }
109: 
110: #define PHYSICAL
111: uniform vec3 diffuse;
112: uniform vec3 emissive;
113: uniform float roughness;
114: uniform float metalness;
115: uniform float opacity;
116: #ifndef STANDARD
117: 	uniform float clearCoat;
118: 	uniform float clearCoatRoughness;
119: #endif
120: varying vec3 vViewPosition;
121: #ifndef FLAT_SHADED
122: 	varying vec3 vNormal;
123: #endif
124: #define PI 3.14159265359
125: #define PI2 6.28318530718
126: #define PI_HALF 1.5707963267949
127: #define RECIPROCAL_PI 0.31830988618
128: #define RECIPROCAL_PI2 0.15915494
129: #define LOG2 1.442695
130: #define EPSILON 1e-6
131: #define saturate(a) clamp( a, 0.0, 1.0 )
132: #define whiteCompliment(a) ( 1.0 - saturate( a ) )
133: float pow2( const in float x ) { return x*x; }
134: float pow3( const in float x ) { return x*x*x; }
135: float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
136: float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
137: highp float rand( const in vec2 uv ) {
138: 	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
139: 	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
140: 	return fract(sin(sn) * c);
141: }
142: struct IncidentLight {
143: 	vec3 color;
144: 	vec3 direction;
145: 	bool visible;
146: };
147: struct ReflectedLight {
148: 	vec3 directDiffuse;
149: 	vec3 directSpecular;
150: 	vec3 indirectDiffuse;
151: 	vec3 indirectSpecular;
152: };
153: struct GeometricContext {
154: 	vec3 position;
155: 	vec3 normal;
156: 	vec3 viewDir;
157: };
158: vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
159: 	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
160: }
161: vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
162: 	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
163: }
164: vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
165: 	float distance = dot( planeNormal, point - pointOnPlane );
166: 	return - distance * planeNormal + point;
167: }
168: float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
169: 	return sign( dot( point - pointOnPlane, planeNormal ) );
170: }
171: vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
172: 	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
173: }
174: mat3 transpose( const in mat3 v ) {
175: 	mat3 tmp;
176: 	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);
177: 	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);
178: 	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);
179: 	return tmp;
180: }
181: 
182: vec3 packNormalToRGB( const in vec3 normal ) {
183: 	return normalize( normal ) * 0.5 + 0.5;
184: }
185: vec3 unpackRGBToNormal( const in vec3 rgb ) {
186: 	return 1.0 - 2.0 * rgb.xyz;
187: }
188: const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
189: const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );
190: const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
191: const float ShiftRight8 = 1. / 256.;
192: vec4 packDepthToRGBA( const in float v ) {
193: 	vec4 r = vec4( fract( v * PackFactors ), v );
194: 	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
195: }
196: float unpackRGBAToDepth( const in vec4 v ) {
197: 	return dot( v, UnpackFactors );
198: }
199: float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
200: 	return ( viewZ + near ) / ( near - far );
201: }
202: float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
203: 	return linearClipZ * ( near - far ) - near;
204: }
205: float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
206: 	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
207: }
208: float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
209: 	return ( near * far ) / ( ( far - near ) * invClipZ - far );
210: }
211: 
212: #ifdef USE_COLOR
213: 	varying vec3 vColor;
214: #endif
215: 
216: #if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )
217: 	varying vec2 vUv;
218: #endif
219: #if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
220: 	varying vec2 vUv2;
221: #endif
222: #ifdef USE_MAP
223: 	uniform sampler2D map;
224: #endif
225: 
226: #ifdef USE_ALPHAMAP
227: 	uniform sampler2D alphaMap;
228: #endif
229: 
230: #ifdef USE_AOMAP
231: 	uniform sampler2D aoMap;
232: 	uniform float aoMapIntensity;
233: #endif
234: #ifdef USE_LIGHTMAP
235: 	uniform sampler2D lightMap;
236: 	uniform float lightMapIntensity;
237: #endif
238: #ifdef USE_EMISSIVEMAP
239: 	uniform sampler2D emissiveMap;
240: #endif
241: 
242: #if defined( USE_ENVMAP ) || defined( PHYSICAL )
243: 	uniform float reflectivity;
244: 	uniform float envMapIntensity;
245: #endif
246: #ifdef USE_ENVMAP
247: 	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )
248: 		varying vec3 vWorldPosition;
249: 	#endif
250: 	#ifdef ENVMAP_TYPE_CUBE
251: 		uniform samplerCube envMap;
252: 	#else
253: 		uniform sampler2D envMap;
254: 	#endif
255: 	uniform float flipEnvMap;
256: 	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )
257: 		uniform float refractionRatio;
258: 	#else
259: 		varying vec3 vReflect;
260: 	#endif
261: #endif
262: 
263: #ifdef USE_FOG
264: 	uniform vec3 fogColor;
265: 	varying float fogDepth;
266: 	#ifdef FOG_EXP2
267: 		uniform float fogDensity;
268: 	#else
269: 		uniform float fogNear;
270: 		uniform float fogFar;
271: 	#endif
272: #endif
273: 
274: float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
275: 		if( decayExponent > 0.0 ) {
276: #if defined ( PHYSICALLY_CORRECT_LIGHTS )
277: 			float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
278: 			float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
279: 			return distanceFalloff * maxDistanceCutoffFactor;
280: #else
281: 			return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
282: #endif
283: 		}
284: 		return 1.0;
285: }
286: vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
287: 	return RECIPROCAL_PI * diffuseColor;
288: }
289: vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
290: 	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
291: 	return ( 1.0 - specularColor ) * fresnel + specularColor;
292: }
293: float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
294: 	float a2 = pow2( alpha );
295: 	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
296: 	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
297: 	return 1.0 / ( gl * gv );
298: }
299: float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
300: 	float a2 = pow2( alpha );
301: 	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
302: 	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
303: 	return 0.5 / max( gv + gl, EPSILON );
304: }
305: float D_GGX( const in float alpha, const in float dotNH ) {
306: 	float a2 = pow2( alpha );
307: 	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
308: 	return RECIPROCAL_PI * a2 / pow2( denom );
309: }
310: vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
311: 	float alpha = pow2( roughness );
312: 	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
313: 	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );
314: 	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
315: 	float dotNH = saturate( dot( geometry.normal, halfDir ) );
316: 	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
317: 	vec3 F = F_Schlick( specularColor, dotLH );
318: 	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
319: 	float D = D_GGX( alpha, dotNH );
320: 	return F * ( G * D );
321: }
322: vec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {
323: 	const float LUT_SIZE  = 64.0;
324: 	const float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;
325: 	const float LUT_BIAS  = 0.5/LUT_SIZE;
326: 	vec3 N = geometry.normal;
327: 	vec3 V = geometry.viewDir;
328: 	vec3 P = geometry.position;
329: 	float theta = acos( dot( N, V ) );
330: 	vec2 uv = vec2(
331: 		sqrt( saturate( roughness ) ),
332: 		saturate( theta / ( 0.5 * PI ) ) );
333: 	uv = uv * LUT_SCALE + LUT_BIAS;
334: 	return uv;
335: }
336: void clipQuadToHorizon( inout vec3 L[5], out int n ) {
337: 	int config = 0;
338: 	if ( L[0].z > 0.0 ) config += 1;
339: 	if ( L[1].z > 0.0 ) config += 2;
340: 	if ( L[2].z > 0.0 ) config += 4;
341: 	if ( L[3].z > 0.0 ) config += 8;
342: 	n = 0;
343: 	if ( config == 0 ) {
344: 	} else if ( config == 1 ) {
345: 		n = 3;
346: 		L[1] = -L[1].z * L[0] + L[0].z * L[1];
347: 		L[2] = -L[3].z * L[0] + L[0].z * L[3];
348: 	} else if ( config == 2 ) {
349: 		n = 3;
350: 		L[0] = -L[0].z * L[1] + L[1].z * L[0];
351: 		L[2] = -L[2].z * L[1] + L[1].z * L[2];
352: 	} else if ( config == 3 ) {
353: 		n = 4;
354: 		L[2] = -L[2].z * L[1] + L[1].z * L[2];
355: 		L[3] = -L[3].z * L[0] + L[0].z * L[3];
356: 	} else if ( config == 4 ) {
357: 		n = 3;
358: 		L[0] = -L[3].z * L[2] + L[2].z * L[3];
359: 		L[1] = -L[1].z * L[2] + L[2].z * L[1];
360: 	} else if ( config == 5 ) {
361: 		n = 0;
362: 	} else if ( config == 6 ) {
363: 		n = 4;
364: 		L[0] = -L[0].z * L[1] + L[1].z * L[0];
365: 		L[3] = -L[3].z * L[2] + L[2].z * L[3];
366: 	} else if ( config == 7 ) {
367: 		n = 5;
368: 		L[4] = -L[3].z * L[0] + L[0].z * L[3];
369: 		L[3] = -L[3].z * L[2] + L[2].z * L[3];
370: 	} else if ( config == 8 ) {
371: 		n = 3;
372: 		L[0] = -L[0].z * L[3] + L[3].z * L[0];
373: 		L[1] = -L[2].z * L[3] + L[3].z * L[2];
374: 		L[2] =  L[3];
375: 	} else if ( config == 9 ) {
376: 		n = 4;
377: 		L[1] = -L[1].z * L[0] + L[0].z * L[1];
378: 		L[2] = -L[2].z * L[3] + L[3].z * L[2];
379: 	} else if ( config == 10 ) {
380: 		n = 0;
381: 	} else if ( config == 11 ) {
382: 		n = 5;
383: 		L[4] = L[3];
384: 		L[3] = -L[2].z * L[3] + L[3].z * L[2];
385: 		L[2] = -L[2].z * L[1] + L[1].z * L[2];
386: 	} else if ( config == 12 ) {
387: 		n = 4;
388: 		L[1] = -L[1].z * L[2] + L[2].z * L[1];
389: 		L[0] = -L[0].z * L[3] + L[3].z * L[0];
390: 	} else if ( config == 13 ) {
391: 		n = 5;
392: 		L[4] = L[3];
393: 		L[3] = L[2];
394: 		L[2] = -L[1].z * L[2] + L[2].z * L[1];
395: 		L[1] = -L[1].z * L[0] + L[0].z * L[1];
396: 	} else if ( config == 14 ) {
397: 		n = 5;
398: 		L[4] = -L[0].z * L[3] + L[3].z * L[0];
399: 		L[0] = -L[0].z * L[1] + L[1].z * L[0];
400: 	} else if ( config == 15 ) {
401: 		n = 4;
402: 	}
403: 	if ( n == 3 )
404: 		L[3] = L[0];
405: 	if ( n == 4 )
406: 		L[4] = L[0];
407: }
408: float integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {
409: 	float cosTheta = dot( v1, v2 );
410: 	float theta = acos( cosTheta );
411: 	float res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );
412: 	return res;
413: }
414: void initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {
415: 	rectPoints[0] = pos - halfWidth - halfHeight;
416: 	rectPoints[1] = pos + halfWidth - halfHeight;
417: 	rectPoints[2] = pos + halfWidth + halfHeight;
418: 	rectPoints[3] = pos - halfWidth + halfHeight;
419: }
420: vec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {
421: 	vec3 N = geometry.normal;
422: 	vec3 V = geometry.viewDir;
423: 	vec3 P = geometry.position;
424: 	vec3 T1, T2;
425: 	T1 = normalize(V - N * dot( V, N ));
426: 	T2 = - cross( N, T1 );
427: 	mat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );
428: 	vec3 clippedRect[5];
429: 	clippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );
430: 	clippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );
431: 	clippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );
432: 	clippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );
433: 	int n;
434: 	clipQuadToHorizon(clippedRect, n);
435: 	if ( n == 0 )
436: 		return vec3( 0, 0, 0 );
437: 	clippedRect[0] = normalize( clippedRect[0] );
438: 	clippedRect[1] = normalize( clippedRect[1] );
439: 	clippedRect[2] = normalize( clippedRect[2] );
440: 	clippedRect[3] = normalize( clippedRect[3] );
441: 	clippedRect[4] = normalize( clippedRect[4] );
442: 	float sum = 0.0;
443: 	sum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );
444: 	sum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );
445: 	sum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );
446: 	if (n >= 4)
447: 		sum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );
448: 	if (n == 5)
449: 		sum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );
450: 	sum = max( 0.0, sum );
451: 	vec3 Lo_i = vec3( sum, sum, sum );
452: 	return Lo_i;
453: }
454: vec3 Rect_Area_Light_Specular_Reflectance(
455: 		const in GeometricContext geometry,
456: 		const in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,
457: 		const in float roughness,
458: 		const in sampler2D ltcMat, const in sampler2D ltcMag ) {
459: 	vec3 rectPoints[4];
460: 	initRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );
461: 	vec2 uv = ltcTextureCoords( geometry, roughness );
462: 	vec4 brdfLtcApproxParams, t;
463: 	brdfLtcApproxParams = texture2D( ltcMat, uv );
464: 	t = texture2D( ltcMat, uv );
465: 	float brdfLtcScalar = texture2D( ltcMag, uv ).a;
466: 	mat3 brdfLtcApproxMat = mat3(
467: 		vec3(   1,   0, t.y ),
468: 		vec3(   0, t.z,   0 ),
469: 		vec3( t.w,   0, t.x )
470: 	);
471: 	vec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );
472: 	specularReflectance *= brdfLtcScalar;
473: 	return specularReflectance;
474: }
475: vec3 Rect_Area_Light_Diffuse_Reflectance(
476: 		const in GeometricContext geometry,
477: 		const in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {
478: 	vec3 rectPoints[4];
479: 	initRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );
480: 	mat3 diffuseBrdfMat = mat3(1);
481: 	vec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );
482: 	return diffuseReflectance;
483: }
484: vec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {
485: 	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
486: 	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
487: 	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
488: 	vec4 r = roughness * c0 + c1;
489: 	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
490: 	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;
491: 	return specularColor * AB.x + AB.y;
492: }
493: float G_BlinnPhong_Implicit( ) {
494: 	return 0.25;
495: }
496: float D_BlinnPhong( const in float shininess, const in float dotNH ) {
497: 	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
498: }
499: vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
500: 	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
501: 	float dotNH = saturate( dot( geometry.normal, halfDir ) );
502: 	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
503: 	vec3 F = F_Schlick( specularColor, dotLH );
504: 	float G = G_BlinnPhong_Implicit( );
505: 	float D = D_BlinnPhong( shininess, dotNH );
506: 	return F * ( G * D );
507: }
508: float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
509: 	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
510: }
511: float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
512: 	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
513: }
514: 
515: #ifdef ENVMAP_TYPE_CUBE_UV
516: #define cubeUV_textureSize (1024.0)
517: int getFaceFromDirection(vec3 direction) {
518: 	vec3 absDirection = abs(direction);
519: 	int face = -1;
520: 	if( absDirection.x > absDirection.z ) {
521: 		if(absDirection.x > absDirection.y )
522: 			face = direction.x > 0.0 ? 0 : 3;
523: 		else
524: 			face = direction.y > 0.0 ? 1 : 4;
525: 	}
526: 	else {
527: 		if(absDirection.z > absDirection.y )
528: 			face = direction.z > 0.0 ? 2 : 5;
529: 		else
530: 			face = direction.y > 0.0 ? 1 : 4;
531: 	}
532: 	return face;
533: }
534: #define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)
535: #define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))
536: vec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {
537: 	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);
538: 	float dxRoughness = dFdx(roughness);
539: 	float dyRoughness = dFdy(roughness);
540: 	vec3 dx = dFdx( vec * scale * dxRoughness );
541: 	vec3 dy = dFdy( vec * scale * dyRoughness );
542: 	float d = max( dot( dx, dx ), dot( dy, dy ) );
543: 	d = clamp(d, 1.0, cubeUV_rangeClamp);
544: 	float mipLevel = 0.5 * log2(d);
545: 	return vec2(floor(mipLevel), fract(mipLevel));
546: }
547: #define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)
548: #define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)
549: vec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {
550: 	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;
551: 	float a = 16.0 * cubeUV_rcpTextureSize;
552: 	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );
553: 	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;
554: 	float powScale = exp2_packed.x * exp2_packed.y;
555: 	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;
556: 	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;
557: 	bool bRes = mipLevel == 0.0;
558: 	scale =  bRes && (scale < a) ? a : scale;
559: 	vec3 r;
560: 	vec2 offset;
561: 	int face = getFaceFromDirection(direction);
562: 	float rcpPowScale = 1.0 / powScale;
563: 	if( face == 0) {
564: 		r = vec3(direction.x, -direction.z, direction.y);
565: 		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);
566: 		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
567: 	}
568: 	else if( face == 1) {
569: 		r = vec3(direction.y, direction.x, direction.z);
570: 		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);
571: 		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
572: 	}
573: 	else if( face == 2) {
574: 		r = vec3(direction.z, direction.x, direction.y);
575: 		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);
576: 		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;
577: 	}
578: 	else if( face == 3) {
579: 		r = vec3(direction.x, direction.z, direction.y);
580: 		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);
581: 		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
582: 	}
583: 	else if( face == 4) {
584: 		r = vec3(direction.y, direction.x, -direction.z);
585: 		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);
586: 		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
587: 	}
588: 	else {
589: 		r = vec3(direction.z, -direction.x, direction.y);
590: 		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);
591: 		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;
592: 	}
593: 	r = normalize(r);
594: 	float texelOffset = 0.5 * cubeUV_rcpTextureSize;
595: 	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;
596: 	vec2 base = offset + vec2( texelOffset );
597: 	return base + s * ( scale - 2.0 * texelOffset );
598: }
599: #define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)
600: vec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {
601: 	float roughnessVal = roughness* cubeUV_maxLods3;
602: 	float r1 = floor(roughnessVal);
603: 	float r2 = r1 + 1.0;
604: 	float t = fract(roughnessVal);
605: 	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);
606: 	float s = mipInfo.y;
607: 	float level0 = mipInfo.x;
608: 	float level1 = level0 + 1.0;
609: 	level1 = level1 > 5.0 ? 5.0 : level1;
610: 	level0 += min( floor( s + 0.5 ), 5.0 );
611: 	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);
612: 	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));
613: 	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);
614: 	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));
615: 	vec4 result = mix(color10, color20, t);
616: 	return vec4(result.rgb, 1.0);
617: }
618: #endif
619: 
620: uniform vec3 ambientLightColor;
621: vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
622: 	vec3 irradiance = ambientLightColor;
623: 	#ifndef PHYSICALLY_CORRECT_LIGHTS
624: 		irradiance *= PI;
625: 	#endif
626: 	return irradiance;
627: }
628: #if 1 > 0
629: 	struct DirectionalLight {
630: 		vec3 direction;
631: 		vec3 color;
632: 		int shadow;
633: 		float shadowBias;
634: 		float shadowRadius;
635: 		vec2 shadowMapSize;
636: 	};
637: 	uniform DirectionalLight directionalLights[ 1 ];
638: 	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
639: 		directLight.color = directionalLight.color;
640: 		directLight.direction = directionalLight.direction;
641: 		directLight.visible = true;
642: 	}
643: #endif
644: #if 2 > 0
645: 	struct PointLight {
646: 		vec3 position;
647: 		vec3 color;
648: 		float distance;
649: 		float decay;
650: 		int shadow;
651: 		float shadowBias;
652: 		float shadowRadius;
653: 		vec2 shadowMapSize;
654: 	};
655: 	uniform PointLight pointLights[ 2 ];
656: 	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
657: 		vec3 lVector = pointLight.position - geometry.position;
658: 		directLight.direction = normalize( lVector );
659: 		float lightDistance = length( lVector );
660: 		directLight.color = pointLight.color;
661: 		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
662: 		directLight.visible = ( directLight.color != vec3( 0.0 ) );
663: 	}
664: #endif
665: #if 0 > 0
666: 	struct SpotLight {
667: 		vec3 position;
668: 		vec3 direction;
669: 		vec3 color;
670: 		float distance;
671: 		float decay;
672: 		float coneCos;
673: 		float penumbraCos;
674: 		int shadow;
675: 		float shadowBias;
676: 		float shadowRadius;
677: 		vec2 shadowMapSize;
678: 	};
679: 	uniform SpotLight spotLights[ 0 ];
680: 	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {
681: 		vec3 lVector = spotLight.position - geometry.position;
682: 		directLight.direction = normalize( lVector );
683: 		float lightDistance = length( lVector );
684: 		float angleCos = dot( directLight.direction, spotLight.direction );
685: 		if ( angleCos > spotLight.coneCos ) {
686: 			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
687: 			directLight.color = spotLight.color;
688: 			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
689: 			directLight.visible = true;
690: 		} else {
691: 			directLight.color = vec3( 0.0 );
692: 			directLight.visible = false;
693: 		}
694: 	}
695: #endif
696: #if 0 > 0
697: 	struct RectAreaLight {
698: 		vec3 color;
699: 		vec3 position;
700: 		vec3 halfWidth;
701: 		vec3 halfHeight;
702: 	};
703: 	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;
704: 	uniform RectAreaLight rectAreaLights[ 0 ];
705: #endif
706: #if 0 > 0
707: 	struct HemisphereLight {
708: 		vec3 direction;
709: 		vec3 skyColor;
710: 		vec3 groundColor;
711: 	};
712: 	uniform HemisphereLight hemisphereLights[ 0 ];
713: 	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
714: 		float dotNL = dot( geometry.normal, hemiLight.direction );
715: 		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
716: 		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
717: 		#ifndef PHYSICALLY_CORRECT_LIGHTS
718: 			irradiance *= PI;
719: 		#endif
720: 		return irradiance;
721: 	}
722: #endif
723: #if defined( USE_ENVMAP ) && defined( PHYSICAL )
724: 	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
725: 		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
726: 		#ifdef ENVMAP_TYPE_CUBE
727: 			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
728: 			#ifdef TEXTURE_LOD_EXT
729: 				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
730: 			#else
731: 				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
732: 			#endif
733: 			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
734: 		#elif defined( ENVMAP_TYPE_CUBE_UV )
735: 			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
736: 			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );
737: 		#else
738: 			vec4 envMapColor = vec4( 0.0 );
739: 		#endif
740: 		return PI * envMapColor.rgb * envMapIntensity;
741: 	}
742: 	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {
743: 		float maxMIPLevelScalar = float( maxMIPLevel );
744: 		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );
745: 		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
746: 	}
747: 	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {
748: 		#ifdef ENVMAP_MODE_REFLECTION
749: 			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );
750: 		#else
751: 			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );
752: 		#endif
753: 		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
754: 		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );
755: 		#ifdef ENVMAP_TYPE_CUBE
756: 			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
757: 			#ifdef TEXTURE_LOD_EXT
758: 				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
759: 			#else
760: 				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
761: 			#endif
762: 			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
763: 		#elif defined( ENVMAP_TYPE_CUBE_UV )
764: 			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
765: 			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));
766: 		#elif defined( ENVMAP_TYPE_EQUIREC )
767: 			vec2 sampleUV;
768: 			sampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );
769: 			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;
770: 			#ifdef TEXTURE_LOD_EXT
771: 				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );
772: 			#else
773: 				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );
774: 			#endif
775: 			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
776: 		#elif defined( ENVMAP_TYPE_SPHERE )
777: 			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );
778: 			#ifdef TEXTURE_LOD_EXT
779: 				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
780: 			#else
781: 				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );
782: 			#endif
783: 			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
784: 		#endif
785: 		return envMapColor.rgb * envMapIntensity;
786: 	}
787: #endif
788: 
789: struct PhysicalMaterial {
790: 	vec3	diffuseColor;
791: 	float	specularRoughness;
792: 	vec3	specularColor;
793: 	#ifndef STANDARD
794: 		float clearCoat;
795: 		float clearCoatRoughness;
796: 	#endif
797: };
798: #define MAXIMUM_SPECULAR_COEFFICIENT 0.16
799: #define DEFAULT_SPECULAR_COEFFICIENT 0.04
800: float clearCoatDHRApprox( const in float roughness, const in float dotNL ) {
801: 	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
802: }
803: #if 0 > 0
804: 	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
805: 		vec3 matDiffColor = material.diffuseColor;
806: 		vec3 matSpecColor = material.specularColor;
807: 		vec3 lightColor   = rectAreaLight.color;
808: 		float roughness = material.specularRoughness;
809: 		vec3 spec = Rect_Area_Light_Specular_Reflectance(
810: 				geometry,
811: 				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,
812: 				roughness,
813: 				ltcMat, ltcMag );
814: 		vec3 diff = Rect_Area_Light_Diffuse_Reflectance(
815: 				geometry,
816: 				rectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );
817: 		reflectedLight.directSpecular += lightColor * matSpecColor * spec;
818: 		reflectedLight.directDiffuse  += lightColor * matDiffColor * diff;
819: 	}
820: #endif
821: void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
822: 	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
823: 	vec3 irradiance = dotNL * directLight.color;
824: 	#ifndef PHYSICALLY_CORRECT_LIGHTS
825: 		irradiance *= PI;
826: 	#endif
827: 	#ifndef STANDARD
828: 		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
829: 	#else
830: 		float clearCoatDHR = 0.0;
831: 	#endif
832: 	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );
833: 	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
834: 	#ifndef STANDARD
835: 		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
836: 	#endif
837: }
838: void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
839: 	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
840: }
841: void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
842: 	#ifndef STANDARD
843: 		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
844: 		float dotNL = dotNV;
845: 		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );
846: 	#else
847: 		float clearCoatDHR = 0.0;
848: 	#endif
849: 	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );
850: 	#ifndef STANDARD
851: 		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );
852: 	#endif
853: }
854: #define RE_Direct				RE_Direct_Physical
855: #define RE_Direct_RectArea		RE_Direct_RectArea_Physical
856: #define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
857: #define RE_IndirectSpecular		RE_IndirectSpecular_Physical
858: #define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )
859: #define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )
860: float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
861: 	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
862: }
863: 
864: #ifdef USE_SHADOWMAP
865: 	#if 1 > 0
866: 		uniform sampler2D directionalShadowMap[ 1 ];
867: 		varying vec4 vDirectionalShadowCoord[ 1 ];
868: 	#endif
869: 	#if 0 > 0
870: 		uniform sampler2D spotShadowMap[ 0 ];
871: 		varying vec4 vSpotShadowCoord[ 0 ];
872: 	#endif
873: 	#if 2 > 0
874: 		uniform sampler2D pointShadowMap[ 2 ];
875: 		varying vec4 vPointShadowCoord[ 2 ];
876: 	#endif
877: 	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
878: 		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
879: 	}
880: 	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {
881: 		const vec2 offset = vec2( 0.0, 1.0 );
882: 		vec2 texelSize = vec2( 1.0 ) / size;
883: 		vec2 centroidUV = floor( uv * size + 0.5 ) / size;
884: 		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );
885: 		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );
886: 		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );
887: 		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );
888: 		vec2 f = fract( uv * size + 0.5 );
889: 		float a = mix( lb, lt, f.y );
890: 		float b = mix( rb, rt, f.y );
891: 		float c = mix( a, b, f.x );
892: 		return c;
893: 	}
894: 	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
895: 		shadowCoord.xyz /= shadowCoord.w;
896: 		shadowCoord.z += shadowBias;
897: 		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
898: 		bool inFrustum = all( inFrustumVec );
899: 		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
900: 		bool frustumTest = all( frustumTestVec );
901: 		if ( frustumTest ) {
902: 		#if defined( SHADOWMAP_TYPE_PCF )
903: 			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
904: 			float dx0 = - texelSize.x * shadowRadius;
905: 			float dy0 = - texelSize.y * shadowRadius;
906: 			float dx1 = + texelSize.x * shadowRadius;
907: 			float dy1 = + texelSize.y * shadowRadius;
908: 			return (
909: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
910: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
911: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
912: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
913: 				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
914: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
915: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
916: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
917: 				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
918: 			) * ( 1.0 / 9.0 );
919: 		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
920: 			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
921: 			float dx0 = - texelSize.x * shadowRadius;
922: 			float dy0 = - texelSize.y * shadowRadius;
923: 			float dx1 = + texelSize.x * shadowRadius;
924: 			float dy1 = + texelSize.y * shadowRadius;
925: 			return (
926: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
927: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
928: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
929: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
930: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +
931: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
932: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
933: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
934: 				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
935: 			) * ( 1.0 / 9.0 );
936: 		#else
937: 			return texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
938: 		#endif
939: 		}
940: 		return 1.0;
941: 	}
942: 	vec2 cubeToUV( vec3 v, float texelSizeY ) {
943: 		vec3 absV = abs( v );
944: 		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
945: 		absV *= scaleToCube;
946: 		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
947: 		vec2 planar = v.xy;
948: 		float almostATexel = 1.5 * texelSizeY;
949: 		float almostOne = 1.0 - almostATexel;
950: 		if ( absV.z >= almostOne ) {
951: 			if ( v.z > 0.0 )
952: 				planar.x = 4.0 - v.x;
953: 		} else if ( absV.x >= almostOne ) {
954: 			float signX = sign( v.x );
955: 			planar.x = v.z * signX + 2.0 * signX;
956: 		} else if ( absV.y >= almostOne ) {
957: 			float signY = sign( v.y );
958: 			planar.x = v.x + 2.0 * signY + 2.0;
959: 			planar.y = v.z * signY - 2.0;
960: 		}
961: 		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
962: 	}
963: 	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
964: 		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
965: 		vec3 lightToPosition = shadowCoord.xyz;
966: 		vec3 bd3D = normalize( lightToPosition );
967: 		float dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;
968: 		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )
969: 			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
970: 			return (
971: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
972: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
973: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
974: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
975: 				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
976: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
977: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
978: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
979: 				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
980: 			) * ( 1.0 / 9.0 );
981: 		#else
982: 			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
983: 		#endif
984: 	}
985: #endif
986: 
987: #ifdef USE_BUMPMAP
988: 	uniform sampler2D bumpMap;
989: 	uniform float bumpScale;
990: 	vec2 dHdxy_fwd() {
991: 		vec2 dSTdx = dFdx( vUv );
992: 		vec2 dSTdy = dFdy( vUv );
993: 		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
994: 		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
995: 		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
996: 		return vec2( dBx, dBy );
997: 	}
998: 	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
999: 		vec3 vSigmaX = dFdx( surf_pos );
1000: 		vec3 vSigmaY = dFdy( surf_pos );
1001: 		vec3 vN = surf_norm;
1002: 		vec3 R1 = cross( vSigmaY, vN );
1003: 		vec3 R2 = cross( vN, vSigmaX );
1004: 		float fDet = dot( vSigmaX, R1 );
1005: 		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
1006: 		return normalize( abs( fDet ) * surf_norm - vGrad );
1007: 	}
1008: #endif
1009: 
1010: #ifdef USE_NORMALMAP
1011: 	uniform sampler2D normalMap;
1012: 	uniform vec2 normalScale;
1013: 	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {
1014: 		vec3 q0 = dFdx( eye_pos.xyz );
1015: 		vec3 q1 = dFdy( eye_pos.xyz );
1016: 		vec2 st0 = dFdx( vUv.st );
1017: 		vec2 st1 = dFdy( vUv.st );
1018: 		vec3 S = normalize( q0 * st1.t - q1 * st0.t );
1019: 		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );
1020: 		vec3 N = normalize( surf_norm );
1021: 		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
1022: 		mapN.xy = normalScale * mapN.xy;
1023: 		mat3 tsn = mat3( S, T, N );
1024: 		return normalize( tsn * mapN );
1025: 	}
1026: #endif
1027: 
1028: #ifdef USE_ROUGHNESSMAP
1029: 	uniform sampler2D roughnessMap;
1030: #endif
1031: #ifdef USE_METALNESSMAP
1032: 	uniform sampler2D metalnessMap;
1033: #endif
1034: #ifdef USE_LOGDEPTHBUF
1035: 	uniform float logDepthBufFC;
1036: 	#ifdef USE_LOGDEPTHBUF_EXT
1037: 		varying float vFragDepth;
1038: 	#endif
1039: #endif
1040: 
1041: #if NUM_CLIPPING_PLANES > 0
1042: 	#if ! defined( PHYSICAL ) && ! defined( PHONG )
1043: 		varying vec3 vViewPosition;
1044: 	#endif
1045: 	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
1046: #endif
1047: 
1048: void main() {
1049: 	#if NUM_CLIPPING_PLANES > 0
1050: 	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {
1051: 		vec4 plane = clippingPlanes[ i ];
1052: 		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;
1053: 	}
1054: 		
1055: 	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
1056: 		bool clipped = true;
1057: 		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {
1058: 			vec4 plane = clippingPlanes[ i ];
1059: 			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;
1060: 		}
1061: 		if ( clipped ) discard;
1062: 	
1063: 	#endif
1064: #endif
1065: 
1066: 	vec4 diffuseColor = vec4( diffuse, opacity );
1067: 	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
1068: 	vec3 totalEmissiveRadiance = emissive;
1069: 	#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)
1070: 	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;
1071: #endif
1072: 	#ifdef USE_MAP
1073: 	vec4 texelColor = texture2D( map, vUv );
1074: 	texelColor = mapTexelToLinear( texelColor );
1075: 	diffuseColor *= texelColor;
1076: #endif
1077: 
1078: 	#ifdef USE_COLOR
1079: 	diffuseColor.rgb *= vColor;
1080: #endif
1081: 	#ifdef USE_ALPHAMAP
1082: 	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
1083: #endif
1084: 
1085: 	#ifdef ALPHATEST
1086: 	if ( diffuseColor.a < ALPHATEST ) discard;
1087: #endif
1088: 
1089: 	float specularStrength;
1090: #ifdef USE_SPECULARMAP
1091: 	vec4 texelSpecular = texture2D( specularMap, vUv );
1092: 	specularStrength = texelSpecular.r;
1093: #else
1094: 	specularStrength = 1.0;
1095: #endif
1096: 	float roughnessFactor = roughness;
1097: #ifdef USE_ROUGHNESSMAP
1098: 	vec4 texelRoughness = texture2D( roughnessMap, vUv );
1099: 	roughnessFactor *= texelRoughness.r;
1100: #endif
1101: 
1102: 	float metalnessFactor = metalness;
1103: #ifdef USE_METALNESSMAP
1104: 	vec4 texelMetalness = texture2D( metalnessMap, vUv );
1105: 	metalnessFactor *= texelMetalness.r;
1106: #endif
1107: 
1108: 	#ifdef DOUBLE_SIDED
1109: 	float flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );
1110: #else
1111: 	float flipNormal = 1.0;
1112: #endif
1113: 
1114: 	#ifdef FLAT_SHADED
1115: 	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
1116: 	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
1117: 	vec3 normal = normalize( cross( fdx, fdy ) );
1118: #else
1119: 	vec3 normal = normalize( vNormal ) * flipNormal;
1120: #endif
1121: #ifdef USE_NORMALMAP
1122: 	normal = perturbNormal2Arb( -vViewPosition, normal );
1123: #elif defined( USE_BUMPMAP )
1124: 	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
1125: #endif
1126: 
1127: 	#ifdef USE_EMISSIVEMAP
1128: 	vec4 emissiveColor = texture2D( emissiveMap, vUv );
1129: 	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
1130: 	totalEmissiveRadiance *= emissiveColor.rgb;
1131: #endif
1132: 
1133: 	PhysicalMaterial material;
1134: material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
1135: material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );
1136: #ifdef STANDARD
1137: 	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
1138: #else
1139: 	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
1140: 	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );
1141: #endif
1142: 
1143: 	
1144: GeometricContext geometry;
1145: geometry.position = - vViewPosition;
1146: geometry.normal = normal;
1147: geometry.viewDir = normalize( vViewPosition );
1148: IncidentLight directLight;
1149: #if ( 2 > 0 ) && defined( RE_Direct )
1150: 	PointLight pointLight;
1151: 	
1152: 		pointLight = pointLights[ 0 ];
1153: 		getPointDirectLightIrradiance( pointLight, geometry, directLight );
1154: 		#ifdef USE_SHADOWMAP
1155: 		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ 0 ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ 0 ] ) : 1.0;
1156: 		#endif
1157: 		RE_Direct( directLight, geometry, material, reflectedLight );
1158: 	
1159: 		pointLight = pointLights[ 1 ];
1160: 		getPointDirectLightIrradiance( pointLight, geometry, directLight );
1161: 		#ifdef USE_SHADOWMAP
1162: 		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ 1 ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ 1 ] ) : 1.0;
1163: 		#endif
1164: 		RE_Direct( directLight, geometry, material, reflectedLight );
1165: 	
1166: #endif
1167: #if ( 0 > 0 ) && defined( RE_Direct )
1168: 	SpotLight spotLight;
1169: 	
1170: #endif
1171: #if ( 1 > 0 ) && defined( RE_Direct )
1172: 	DirectionalLight directionalLight;
1173: 	
1174: 		directionalLight = directionalLights[ 0 ];
1175: 		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
1176: 		#ifdef USE_SHADOWMAP
1177: 		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ 0 ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ 0 ] ) : 1.0;
1178: 		#endif
1179: 		RE_Direct( directLight, geometry, material, reflectedLight );
1180: 	
1181: #endif
1182: #if ( 0 > 0 ) && defined( RE_Direct_RectArea )
1183: 	RectAreaLight rectAreaLight;
1184: 	
1185: #endif
1186: #if defined( RE_IndirectDiffuse )
1187: 	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
1188: 	#ifdef USE_LIGHTMAP
1189: 		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;
1190: 		#ifndef PHYSICALLY_CORRECT_LIGHTS
1191: 			lightMapIrradiance *= PI;
1192: 		#endif
1193: 		irradiance += lightMapIrradiance;
1194: 	#endif
1195: 	#if ( 0 > 0 )
1196: 		
1197: 	#endif
1198: 	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )
1199: 		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );
1200: 	#endif
1201: 	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
1202: #endif
1203: #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
1204: 	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );
1205: 	#ifndef STANDARD
1206: 		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );
1207: 	#else
1208: 		vec3 clearCoatRadiance = vec3( 0.0 );
1209: 	#endif
1210: 	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );
1211: #endif
1212: 
1213: 	#ifdef USE_AOMAP
1214: 	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
1215: 	reflectedLight.indirectDiffuse *= ambientOcclusion;
1216: 	#if defined( USE_ENVMAP ) && defined( PHYSICAL )
1217: 		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
1218: 		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
1219: 	#endif
1220: #endif
1221: 
1222: 	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
1223: 	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
1224: 	#ifdef PREMULTIPLIED_ALPHA
1225: 	gl_FragColor.rgb *= gl_FragColor.a;
1226: #endif
1227: 
1228: 	#if defined( TONE_MAPPING )
1229:   gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
1230: #endif
1231: 
1232: 	  gl_FragColor = linearToOutputTexel( gl_FragColor );
1233: 
1234: 	#ifdef USE_FOG
1235: 	#ifdef FOG_EXP2
1236: 		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );
1237: 	#else
1238: 		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
1239: 	#endif
1240: 	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
1241: #endif
1242: 
1243: }
1244: "
[Warning] Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic (aframe-master.min.js, line 134, x4)

=====================================================

I don't know if it is related or not.


- A-Frame Version: master
- Platform / Device: iPhone / iPad (except iPhone 7)
- Reproducible Code Snippet or URL: 


 Hi @donmccurdy,

thank you for your answer.

The gltf model itself is 'only' 14.4MB, but the total presentation is about 84MB.

It's a collada model converted to GLTF 1. I will see about lowering the size for the model.

Thanks!

 When there where 2 spheres this problem did not occur, so there seems to be some memory issue in this presentation. I just included a 28MB collada model and the safari browser kept reloading the page.

 I have managed to downsize the equirectangular images and other images in the presentation and the total size is now about 54MB. It still will crash at some point and cause safari to reload the page. Have that in the nightly update for win10. It hits aframe and crashes the
browser. Hopefully it's fixed tomorrow. I couldn't work all morning.

On Jun 19, 2017 7:48 PM, "Kevin Ngo" <notifications@github.com> wrote:

> Also helps is rather than 15 skyspheres, have one at a time and swap out
> the image
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2783#issuecomment-309621112>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAXATv9j-TNQ-SZBP7MGEALR9dsyXISJks5sFyTVgaJpZM4N7tTI>
> .
>
 Hi @ngokevin, I've tried the version you recommend but that version has a bug where the cursor is interacting with hidden objects (visible="false").

Edit: so the rayraster is supposed to interact with invisible objects? In that case I have some rewriting to do.  I've been working on a VR game within A-Frame. When I started testing on devices (iPhone 7/iPhone 7 Plus running Safari, and Samsung Galaxy S6 running Chrome), I began to notice the page would randomly refresh, which is an issue for us, as it restarts the game.

This is happening with the demos on their website, as well as our self-hosted game.

Has anyone experienced this issue, and/or know what the issue or the solution is?

- A-Frame Version: 0.5.0
- Platform / Device: iPhone 7/7 Plus
- Reproducible Code Snippet or URL: [https://aframe.io/examples/hello-metaverse/]
 It hasn't happened once on a desktop (am I correct in saying that 2D is desktop). We've only had this page refresh issue on devices, most regularly in VR mode. I believed it was an issue on our end, until we started testing on a-frame.io examples, and it happened there too.  We're still very much having this issue on multiple devices on a-frame's own projects. Admittedly, on the iPhone 7 Plus it's less regular than the iPhone 7, sometimes 5 minutes, sometimes 1 minutes. I recommend leaving your phone in the VR mode until it happens. If you notice that i's no longer in VR mode, a page refresh has occurred. 

I'm very much in need of a solution or an explanation to this, so I'm not prepared to close this issue at this point. Hi, I'm having the same issue. On the basic Hello Web VR example, if I just leave my iPhone sat for a few minutes, I'm booted out of VR mode and the attached logs in console.

![screen shot 2017-06-16 at 09 16 04](https://user-images.githubusercontent.com/2477827/27218114-b1f4f248-5274-11e7-86c4-97fbc68d7006.png)
 So after getting an unminified version of the files, I have found out that there is an issue with the iOSWakeLock function (lines 80195 and 80195 of aframe-master.js from v0.5.0).

	function iOSWakeLock() {
		var timer = null;

		this.request = function() {
			if (!timer) {
				timer = setInterval(function() {
					window.location = window.location;
					setTimeout(window.stop, 0);
				}, 30000);
			}
		}

		this.release = function() {
			if (timer) {
				clearInterval(timer);
				timer = null;
			}
		}
	}

From what I can gather, it is a function to keep the screen from timing out. This has not worked for us and we've had to change phone settings to accomplish this. This also explains why it only occurs on iOS. If anyone can shed any light on why this might be happening that would be great. In the meantime, I've commented this out. @cvan All of the iPhones with this issue had their display settings set to never auto-lock.  I'm experiencing the same issue, after every 30s without interaction in VR-mode, the app will reload itself. I'm on iOS 11.0 with the screen-lock setting on 5 minutes. Hi 👋 ,

I am currently running into this issue on iPhone 6S & X (Safari) and my MacBook Pro Retina 2015 and 2016 (on Google Chrome w/ the iPhone simulator). The refresh happens exactly 30 seconds after instantiating the app. Steps to reproduce:

- Visit https://aframe.io/examples/hello-metaverse/ via Google Chrome on your computer.
- Go into Inspect Mode, and toggle mobile simulator. Pick any iPhone model.
- Click VR Mode button on bottom right and switch to landscape mode.
- Now wait for 30 seconds, and you will see that the page refreshes.

Same thing is happening when I load my app up in VR mode on my iPhone. The page refreshes exactly after 30 seconds, and there are no logs at the moment it happens to tell me why it's happening. 

Note that the app does NOT refresh if I pull it up on an Android (in VR mode), so this is definitely a problem with iOS.

After digging around, [this line](https://github.com/aframevr/aframe/blob/master/vendor/wakelock/wakelock.js#L50) seems to be the culprit. It sets the `window.location` to `/`, which is what was refreshing the page. 

I've commented that line out in my production bundle, but I still don't really understand the issue with it. I know it's related to keeping the phone awake, but there has to be another way of doing that instead of directly setting `window.location`.

If anyone can shed some light on this, it would be much appreciated! :) I've uncommonly heard similar reports on using WebVR polyfill and it comes down to the wakelock. Hi, I'm having the same issue on iOS 11.

However, [NoSleep.js](https://github.com/richtr/NoSleep.js) that similar to wakelock.js of A-frame is successfully working. 😃 
I compared NoSleep.js and wakelock.js, then found the following difference.

### NoSleep.js
It plays the video for iOS 11.
https://github.com/richtr/NoSleep.js/blob/01b379d53cd89c15052b7ab92da319812b7c823b/src/index.js#L3-L7

### wakelock.js of A-frame
It does NOT play the video for iOS 11.
https://github.com/aframevr/aframe/blob/619d57c9a41efe127052897e734322cc67c25e5b/vendor/wakelock/wakelock.js#L67-L68

Does anyone think that replacing with NoSleep.js is a good idea? NoSleep.js has already been included in A-frame **0.8.2** through `webvr-polyfill`.
I noticed it now. :sweat_smile:

I can see its successful work on my iPhone7 (iOS 11), and think this issue has been solved. :+1: :+1:  **Description:**

- A-Frame Version: latest master
- Platform / Device: Gear VR, Oculus browser
- Reproducible Code Snippet or URL: http://aframe-master.glitch.me/

This regression happened after fixing #2614 
The enter VR button briefly appears, then disappears.

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 @dmarcos http://aframe-master.glitch.me/ uses the master which a-frobot commited just after #2751 has been commited (https://github.com/aframevr/aframe/commits/master).  Small feature request: expose the vertexColors property in the `material` component. So users can do like
```
<a-entity myComponentThatGeneratesABufferGeometry="height: 1.23; radius: 4.56" material="opacity:0.5; vertexColors=2">
```
I'm building several such "myComponentThatGeneratesABufferGeometry" that use vertex coloring e.g. http://https://github.com/morandd/aframe-heatmap3d  It'd be cleaner to re-use the AFrame `material` component, if one is provided, rather than have the user pass in all the material properties to my component so I create the material internally.

thanks for considering


  Description:
Documentation Issue
The paragraph (described below) in section indicated by link below has a typo:
https://aframe.io/docs/0.5.0/introduction/entity-component-system.html#syntax

Excerpt of passage which needs correction:

...This syntax takes the form with a semicolon (:) separating property names from property values, and a colon (;) separating different property declarations: ...

Correction should be:

...This syntax takes the form with a colon (:) separating property names from property values, and a semicolon (;) separating different property declarations: ...

**Description:**

**Changes proposed:**
-
-
-
  -**Issue**: 
I have a few images in <a-assets>, which are being used as the src for <a-sky>. I am also adding new images to <a-assets> dynamically, using javascript. Initially, when the page loads, all the images are downloaded. When I change the src of <a-sky> to an image which is already downloaded, it re-downloads the image again, instead of loading a cached version of the same. Also, once I add a new image to <a-assets> and change the src of <a-sky> to this, it downloads the image every time, instead of using the cached version.

Is there an event listener that can be used to keep track of whether an image is cached or not?

- **A-Frame Version**: 
0.5.0

- **Platform / Device**: 
Ubuntu 16.04

- **Browser**:
Google Chrome Version 59.0.3071.86 (Official Build 64-bit) Thanks, @donmccurdy !
I figured out the error related to caching. 

I had another query. I am accessing the same set of images multiple times using <a-sky>. After the initial download, when the images are accessed, another request is being sent to the source of the image, which returns a 304 (not modified) status code. I wanted to know if there is a way in a-frame to keep track of how the requests for these assets is being made, and also what the response for such requests may be.

**PS**: I don't have any back-end code, nor am I using XHR requests. I want to know if we can access the status code of the response of the image (or other assets) being requested by aframe using client-side JS only.  
 Thanks, @donmccurdy !
I wanted to use the status code to check if an image is already downloaded and to choose whether to show a loader or an animation based on the browser response. If it's downloaded, then I would show an animation for changing the sky, else I would show a loader until the image downloads.
Any idea of how this can be checked and implemented in a-frame?

Also, yes @ngokevin 304 is Not Modified client redirection response code. It is an implicit redirection to a cached resource.  Thanks, @ngokevin and @donmccurdy .   **Description:**
**Documentation Issue**
The paragraph (described below) in section indicated by link below has a typo:
https://aframe.io/docs/0.5.0/introduction/entity-component-system.html#syntax

**Excerpt of passage which needs correction:**

...This syntax takes the form with a **semicolon** (:) separating property names from property values, and a **colon** (;) separating different property declarations: ...


**Correction should be**:

...This syntax takes the form with a **colon** (:) separating property names from property values, and a **semicolon** (;) separating different property declarations: ...


 Thanks i will update.  I 'll first read the docs.

BR/KK Done!  

**Pull Request Created:**
Docs: Corrected Typo changed word semicolon to colon and vice-versa **#2777**  So its an issue on my Windows 10 computer and a coworker's Windows 10, and our Alpine servers running docker.
However it works fine on a coworker's Mac and another Windows 10 computer. 
May be related to the new Windows 10 update? but that wouldn't explain your mac or our docker servers...

Fails:
Windows 10 : npm v5.0.0
Windows 10 : npm v5.0.3
Alpine/Linux : npm v3.10.10

Works:
Windows 10 : npm 3.10.8
Mac : npm (not sure)

Getting this on our servers as well, but they've been running updates for a while with no issues before now
npm ERR! error: cannot run ssh: No such file or directory
npm ERR! fatal: unable to fork

Still looking into it and will let you know if I find more.
Thanks Thanks, been able to work around it using `npm install aframevr/aframe` for now.
It may have to do with the npm cache. I cleared mine earlier and the problem has come up for me, so might be able to replicate it by clearing it. I'll test this tomorrow on a computer that is currently working fine. I've been testing `npm install aframe` today and I've tried with npm version 3.10 and 4.2 without success. Actually there were no issues to begin with, but as soon as I cleared my npm cache I started getting these errors:

```npm ERR! git rev-list -n1 a02a8089b: fatal: ambiguous argument 'a02a8089b': unknown revision or path not in the working tree.```

So after a lot of testing and searching, I've come up with this:
There's - as mentioned earlier - a dependency to the dmarcos/webvr-polyfill repository at a specific commit SHA number ([a02a8089b](https://github.com/dmarcos/webvr-polyfill/commit/a02a8089b)). This commit however doesn't seem to be associated with any branch, so that might be the reason why git can't locate this commit. After looking through the commits on all the different branches on the dmarcos/webvr-polyfill repository I found one commit that looks almost the same as the a02a8089b commit, and it's this one: [dmarcos/webvr-polyfill@ 9faf790](https://github.com/dmarcos/webvr-polyfill/commit/9faf790). It could look like a force push has been done to the dmarcos/webvr-polyfill repository, which has resulted in the SHA numbers to update, which is then causing the installation error where git can't locate the a02a8089b commit.

So, there shouldn't be any problem as long as you've previously installed aframe without issues and don't clear your npm cache - as the cache has remembered the reference to the a02a8089b commit. However if you either clean your npm cache or install a new npm version you will start getting errors. @dmarcos Yes this is working fine on my local and deployment servers now. 

Thanks,
Clark npm install aframe fails again

 Command failed: /usr/local/bin/git clone -q git://github.com/dmarcos/document-register-element.git /Users/NathanielSena/.npm/_cacache/tmp/git-clone-ea92f8b7
 npm -v
5.5.1
node -v
8.4.0  **Description:**
Daydream controller doesnt work and entering VR Mode throws a critical error, somehow it works in custom builds and older versions of Aframe.

- A-Frame Version:
Tried various ones, first ofc the latest one 0.5.0 (master/f850c2f),
then some of the last 2 days 0.5.0 (master/9266cfd) and so on,
then I bundled an A-frame version with an older VR Polyfill (0. which PlayCanvas uses in their [WebVR example](https://playcanv.as/p/sAsiDvtC/) because this somehow still works including the Daydream controller,
nothing worked.

- Platform / Device:
**Hardware** ZTE Axon 7 + Google Daydream View
**OS** LineageOS 14.1 running Android 7.1.2 (lineage-14.1-20170612-nightly-axon7-signed) 2017-06-12 10:29:17 
**UA** Mozilla/5.0 (Linux; Android 7.1.2; ZTE A2017U Build/N2G47O) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/59.0.3071.92 Mobile Safari/537.36

Yes its flashed, because ZTE just released a working 7.1 Nougat/Daydream version some days/weeks ago and there was no official version which supported daydream in February. I will also test if the error still occurs with the manufacturer stock version soon, but since it works on PlayCanvas and older A-frame examples i think this _makes no difference_.

- Main error:
Uncaught (in promise) Error: Failed to enter VR mode ('requestPresent'): Presentation request was denied
-> after triggering the VR mode button and thus the Daydream (Pls insert your device) screen never appears.

- Reproducible Code Snippet or URL:
Every **current** example from A-Frame on the mainpage and from private projects using current versions, too i.e. [ground control vr](https://github.com/aframe-capstone/ground-control-vr).
[Codepen](https://codepen.io/intenser/pen/gRMGBq)

- Working examples are:
-- [webvr.yoga](http://webvr.yoga) (working daydream controller)
-- [webvr.playcanvas.com](https://playcanv.as/p/sAsiDvtC/) (even tho it throws other errors and its not completly compareable it still shows the controller works in web with my setup)
-- https://webvr.info/samples/XX-vr-controllers.html?polyfill=1 (this works as intended like in gaze is no controller interaction just by touch you can change the background, then I enter VR mode the daydream window pops up and the controller is able to change the background on click)

- Screens
-- webvr.yoga which works
![aframe-webvryoga-test](https://user-images.githubusercontent.com/6901764/27070212-5348a388-5018-11e7-81cd-36d937f86b30.jpg)
-- aframe boilerplate with aframe master branch
![aframe-boilerplate-test](https://user-images.githubusercontent.com/6901764/27070213-534a0d2c-5018-11e7-8496-eb04d510be6b.jpg)
-- aframe boilerplate with aframe master branch and old polyfill (9.0.25 -> which is the same playcanvas uses atm)
![aframe-boilerplate-old-poly-test](https://user-images.githubusercontent.com/6901764/27070214-534e571a-5018-11e7-9504-42f7ca956836.jpg)
 Iam so stupid sorry, you're right both times. I didnt find any deeper description about how to implement the controller because daydream component site is [not ready yet](https://aframe.io/docs/0.5.0/components/daydream-controls.html) (I guess?!) so i ripped it from another repo. I updated the pen however, still not sure if thats the _best_ implementation for testing if the controller works or not, but that the default daydream VR mode is not starting is at this point enough I guess.

About the flags: I disabled the following chrome://flags/ (WebVR, WebVR experimental rendering optimizations and Chrome VR). Now Aframe is switching to stereoscopic view but the daydream application is still not starting to enable the controller. Errors ahead:

![errors](https://user-images.githubusercontent.com/6901764/27086981-1826020a-5054-11e7-93a0-0bef5e11eae8.jpg)

The PlayCanvas example still works however, the webyoga site is now broken, too (just stereoscopic gaze view without controller) and the webvr xx controller example still works. @cvan Yes its the same problem or at least close to it. I was not sure about it while opening the issue, thanks for the reference.
@machenmusik The thing that confused me with the polyfill is that while the WebVR flag is activated, the polyfill seems to be still active partly. However i tried various chrome browsers (beta, canary, etc.), versions and also Aframe (master) and vrpoly configurations (0.9.24-latest) and nothing seems to "work".

Just for clarification of a "working" daydream component / webvr application with a Daydream mobile device:
1. Loading site (your latest example for instance) on mobile device in gaze view (fixed crosshair to view)
2. Clicking VR button in lower right corner to enter "VR mode"
3. Enter Daydream ["Put your Phone into the Daydream View" ](http://i-cdn.phonearena.com/images/reviews/201314-image/Daydream-View-Review-014.jpg)
4. [ Pair Daydream controller Room](https://www.vrheads.com/sites/vrheads.com/files/styles/larger/public/field/image/2016/11/daydream-controller-failure.jpg?itok=pW1er5Vf)
5. Come back to site in stereoscopic view including [a visible controller](https://developers.google.com/web/showcase/2017/images/playcanvas/activate.png)

Is this how you experience it on your Pixel phone? @machenmusik 

What happens in my case is 1. -> 2. -> 3. -> 4.  but then come back to stereoscopic view and the controller does not appear, I just get gaze view with gaze controls without controller events at all. But as I said before this works in several other WebVr applications even with poly or/and webvr flag, it does not matter. Also the controller is theoretically available, same as the daydream view, tested here:

<img width="715" alt="screen shot 2017-06-14 at 14 05 45" src="https://user-images.githubusercontent.com/6901764/27141037-683042d2-5127-11e7-9d11-ddf134f5bcb1.png">

[code here](https://codepen.io/intenser/pen/dRpmoe) (its not clean cause I tried a lot various stuff with a friend this morning)

I completely understand that you want to focus on officially supported devices, but the ZTE Axon 7 which I use is one of the [first supported Daydream devices](https://vr.google.com/daydream/smartphonevr/phones/) and I think it should therefor be considered. I'm not the best developer but I'm pretty sure its just a minor issue regarding the adjustment of code once the problem is detected.
 Ok the flashed OS thing is not much of a difference since my brother has the same phone with original OS and its not working there, too (same issues just slighty other UA). But sure you are right if no one can debug it since the lack of the hardware it wont work out. *cries deeply* @machenmusik if the page is insecure it usually shows even in vr mode that the page is "not safe", however I tested everything, including the flag/token and without it I also pressed every button multiple times while in stereoscopic view its strange the controller seems to be there codewise but it simply doesnt work. I can confirm that the regular chrome browser does not work in every case, just canary or beta. The problem is I get no specific error or like no informative error which shows up that is different from playcanvas or the webvr.info examples which still work (like there are warnings and errors regarding dpdb and device size but thats it). In your example on codepen I only have gaze view BUT the webvr mode kicks in after pressing the vr button, otherwise the 3. "Put your Phone into the Daydream View" part from the post above would not start cause of the missing token/flag. 

Regarding the flashed OS I will visit my brother tomorrow and try it with his phone (I already did that but I missed the flags I guess). Problem with ZTE is their shipping of updates, so there is only 7.1.1 available for stock builds and I guess that will make a huge difference to the current Pixel Android builds but we will see.

Latest UA btw from the different builds in case its needed somewhere (same phone/hardware both times)

Lineage latest
`Mozilla/5.0 (Linux; Android 7.1.2; ZTE A2017U Build/N2G47O) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3129.3 Mobile Safari/537.36`

Stock ZTE Android
`Mozilla/5.0 (Linux; Android 7.1.1; ZTE A2017G Build/NMF26V) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.83 Mobile Safari/537.36` Do either of these work?
You'd have to manually enable WebVR and Gamepad Extensions in chrome://flags due to Codepen as per https://github.com/aframevr/aframe/issues/2769#issuecomment-308418328
 
https://codepen.io/machenmusik/pen/VMNgzg (aframe master)

https://codepen.io/machenmusik/pen/NggmZW (older pre-0.7.0-derived) Then it seems like a 0.7.0 regression...  Similar feature request in #2077  mentioned https://github.com/aframevr/aframe/pull/2755#issuecomment-307951970

cc @ngokevin  Everything should be addressed.  **Description:** 
When using <a-assets>, the <audio> src ('#audiosource') currentTime property does not seem to update. I am currently attaching a sound component to an <a-entity> ('#entity') and printing out the currentTime of the src which plays on init(). The return is always 0 even though the sound is playing.

```
<a-assets><audio id="audiosource" src="audio.mp3"> </a-assets>
<a-entity id="entity" sound="src:#audiosource; loop: true; autoplay: true; volume:2" ></a-entity>

<script>
var sound = document.querySelector('#audiosource');
// - some skipped code
console.log (sound.currentTime); // - this prints every render`
```

- A-Frame Version: 0.5.0


 When referencing to the sound component on the entity, the reference points to an undefined object. Using `pool` and `audioSource.context` does return the current time of the entity's sound component, however, it continues to increase even then when the sound source has stopped. This maybe because the sound pool object is "playing" even though it has stopped.  **Description:**
Hi,
I think there is a problem that VR mode is not rendered correctly in Firefox android browser, it has huge amount of aliasing and terrible resolution. the non-VR works fine and Chrome doesn't have this issue. Screenshots were taken with Aframe.io example.  
![screenshot_20170612-151101](https://user-images.githubusercontent.com/7551964/27051077-ccaad39a-4f82-11e7-89f8-678bcb816e96.png)
![screenshot_20170612-151108](https://user-images.githubusercontent.com/7551964/27051078-ccabc43a-4f82-11e7-9f01-1377c32f4c29.png)

- A-Frame Version: 0.5.0
- Platform / Device: Android 7.0, Firefox 53.0.2 on Galaxy S7 and Huawei P9
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 @dmarcos Samsung Galaxy S7 and Huawei P9 It no longer works at all on nightly or firefox developer on my desktop and hasn't since Monday. Developer opens the page but crashes on click to VR and nightly just crashes on page load. Wish I hadn't updated now.  @dmarcos I am also experiencing the same rendering issues as @cuitingcheng on a Nexus 6P.  I also have this issue. Furthermore, the sensors are not being used in FF on Android, so we get a still picture instead of a moving scene when we move the phone.(Samsung S7). This can be closed right?  https://github.com/aframevr/aframe/issues/2591


 **Description**

- Mentioning a-frame being understandable without three.js knowledge

**Changes proposed**

- Added a line in the docs.  **Description:**
- The closing tag of HTML is labelled as the 'Opening tag'

**Changes proposed:**
- A different image with correct labels


 It was in the a-box tag, but yes not a cdn. Nevermind. I'll change the url  aFrame does not work on Windows 7 IE11. On a Windows 7 machine on IE11 open up any of the demos from the website. ie:

https://aframe.io/examples/showcase/helloworld/

The first Javascript error in the console is:

 var evt = new CustomEvent(name, data);
  el.dispatchEvent(evt);

But fixing this just leads to several more errors.

- 0.5
- Windows 7 desktop PC
- Reproducible Code Snippet or URL:

https://aframe.io/examples/showcase/helloworld/

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I got the basic stuff in Aframe working now in IE11. I added the following Javascript to my main page:

	```
    (function () {
        if ( typeof window.CustomEvent === "function" ) return false;
          function CustomEvent ( event, params ) {
           params = params || { bubbles: false, cancelable: false, detail: undefined };
           var evt = document.createEvent( 'CustomEvent' );
           evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
           return evt;
        }
        CustomEvent.prototype = window.Event.prototype;
        window.CustomEvent = CustomEvent;
    })();
	```

And it seems to do the trick. I don't know yet if it will work for complex examples beyond boxes and text though @zubairq 

I have tried inserting this at the top and bottom of my code in a dedicated <script> tag but it still doesn't work.

I don't get any error... the main image (I use for the background) does not load...

Any ideas? @donmccurdy None actually.

? My original file had jquery and other HTML5 elements included but I have dragged it back to what below

```
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="aframe.min.js"></script>
</head>

<body>
<!-- A-Scene -->
<a-scene cursor="rayOrigin: mouse" class="a-scene">

  <a-assets> 
  	<img id="skyTexture" src="tram.jpg">
  </a-assets>
  
  <a-plane geometry="primitive: circle" position="0 -3 0" color="black" rotation="-90 0 0"  width="5" height="5"></a-plane>
  <a-sky src="#skyTexture"></a-sky>
  
  <a-camera camera="near: 0.1; user-height: 0.1" rotation="0 90 0"></a-camera>

</a-scene>
<script language="javascript">
	(function () {

		if ( typeof window.CustomEvent === "function" ) return false;
		  function CustomEvent ( event, params ) {
		   params = params || { bubbles: false, cancelable: false, detail: undefined };
		   var evt = document.createEvent( 'CustomEvent' );
		   evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
		   return evt;
		}
		CustomEvent.prototype = window.Event.prototype;
		window.CustomEvent = CustomEvent;
	})();
</script>
</body>
</html>

```
-- This is in the console -- 
   ```
HTML1527: DOCTYPE expected. Consider adding a valid HTML5 doctype: "<!DOCTYPE html>".
   File: index2.html, Line: 1, Column: 1
   A-Frame Version: 0.6.1 (Date 19-07-2017, Commit #a4b91bc)
   three Version: ^0.84.0
   WebVR Polyfill Version: ^0.9.36
   SCRIPT445: Object doesn't support this action
   File: aframe.min.js, Line: 447, Column: 2073
   core:a-assets:warn Asset loading timed out in   3000 ms
```
Works in Chrome Ok, I have gone back to my original file (sorry for the confusion)... 
linked to a non-minified js _**(https://cdnjs.cloudflare.com/ajax/libs/aframe/0.7.1/aframe.js)**_
and this is my console


```
   HTML1300: Navigation occurred.
   File: index.html
   A-Frame Version: 0.7.1 (Date 18-10-2017, Commit #760f3a2)
   three Version: ^0.87.0
   WebVR Polyfill Version: ^0.9.36
   SCRIPT445: Object doesn't support this action
   File: aframe.js, Line: 80411, Column: 3
   core:a-assets:warn Asset loading timed out in   3000 ms
   core:schema:warn Unknown property `height` for component/system `geometry`. 
   core:schema:warn Unknown property `width` for component/system `geometry`. 
   SCRIPT5007: Unable to get property 'setSize' of undefined or null reference
   File: aframe.js, Line: 76482, Column: 9
   SCRIPT5007: Unable to get property 'setSize' of undefined or null reference
   File: aframe.js, Line: 76482, Column: 9


``` @sim3083 You can see the HTML file I used here with the code in it working for IE, where you can see the bubbling code:

https://github.com/zubairq/visifile/blob/master/public/index.html

and this references

<script type="text/javascript" src="es6-shim.js"></script>

which is here

https://github.com/zubairq/visifile/blob/master/public/es6-shim.js

But I couldn't get Aframe 0.71 to work which is why I stayed on 0.70 @dmarcos 

Sorry I have used the wrong file... 

**Using aframe 0.7.0 without the js**
 - nothing loads at all - no console errors

**Using aframe 0.7.0 and the js from this post**
-  get no issues but the main image loads without any aframe functionality.



**Using aframe 0.7.1 without the js**
 - nothing loads
```
   A-Frame Version: 0.7.1 (Date 18-10-2017, Commit #760f3a2)
   three Version: ^0.87.0
   WebVR Polyfill Version: ^0.9.36
   SCRIPT445: Object doesn't support this action
   File: aframe.min.js, Line: 445, Column: 2257
```
var o=new CustomEvent(t,r);e.dispatchEvent(o)}, is the error -> Object doesnt support this action (which you mentioned above)

**Using aframe 0.7.1  and the js from this post**
- I get 107 errors and 17 warnings, it starts like below
```
   A-Frame Version: 0.7.1 (Date 18-10-2017, Commit #760f3a2)
   three Version: ^0.87.0
   WebVR Polyfill Version: ^0.9.36
   THREE.WebGLRenderer 87
   THREE.WebGLRenderer: WEBGL_depth_texture extension not supported.
   THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
   THREE.WebGLRenderer: OES_texture_half_float extension not supported.
   THREE.WebGLRenderer: OES_texture_half_float_linear extension not supported.
   THREE.WebGLRenderer: OES_standard_derivatives extension not supported.
   THREE.WebGLRenderer: ANGLE_instanced_arrays extension not supported.
   THREE.WebGLRenderer: OES_element_index_uint extension not supported.
   WEBGL11095: INVALID_OPERATION: clearStencil: Method not currently supported
   File: aframe.min.js, Line: 105, Column: 3544
   core:schema:warn Unknown property `height` for component/system `geometry`. 
   core:schema:warn Unknown property `width` for component/system `geometry`. 
   THREE.WebGLShader: Shader couldn't compile.
```

I have just applied basic functionality using examples from the a-frame site, was hoping just to get it working in IE without too much hassle but this may not be possible

Thanks for your help so far Personally, I would prefer they not use it at all but I am trying to cover all bases. 

So no go then? @sim3083 I tried to follow the thread but I got a bit lost. Could you post just ONE message where you list the problem top down so that I can understand what you are trying to achieve and what you have tried? (Sorry but I suffer from bad short term memory so I need stuff explained in baby steps - I am not being sarcastic either ) @sim3083 Alternatively if you could post an online link to your example then I can try it in IE 11 and try and fix it myself @zubairq 

That's totally fine... I had a couple of different versions running to see what I could get to work.

http://repo3.cfals.info/tram_supply/index2.html

That's the simple one, I have one with more complexity and some jquery but need to see if this works first.

Thanks! @sim3083 Some of the AFrame stuff works on IE11. The demo of our product, Visifile is here:

http://139.162.228.5/

It is AFrame 0.7 and works on IE 11, you can try it to see. Are you saying that the link you posted does not work with IE 11?

http://repo3.cfals.info/tram_supply/index2.html
 @dmarcos I am not sure what you mean by ¨THREE path that uses any of the WebGL missing extensions or methods¨, could you give me an example? @zubairq your example does not work in Chrome or IE11

`VM126:164 WebSocket connection to 'ws://139.162.228.5/websocket' failed: Error during WebSocket handshake: Unexpected response code: 307`

The link I posted does not work in IE11

 @sim3083 Could you provide me with some details of where you are running this from? It sounds to me like you are running this either from a restricted network access PC or on a corporate network where they discallow certain websocket connections, as the error you get is caused by Websockets, not AFrame @zubairq It is from a work network... does this mean its another barrier for this working in IE? @dmarcos @zubairq 
IE11 Firefox and Chrome all show that error going through the network

**Outside the network**
Chrome works
Firefox works
IE11 - blank screen with this in console
```
THREE.WebGLShader: Shader couldn't compile.

THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(61, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(124, 1): syntax error, unexpected UNSUPPORTED_TOKEN

```
Ill try and compare @zubairq version with mine and see if I can spot what I am doing wrong Thanks @dmarcos 

I have yet to see a working version on IE11 or less so at the moment I am assuming it cant be done... I have tried to apply the code from this page with no success so not sure what to do @sim3083 Just so that I can look further into this, do you get the error on IE:

THREE.WebGLShader: Shader couldn't compile.
 
when you go to this link

http://139.162.228.5/

?
 @sim3083 But it CAN be done in IE11. I have seen over 80 different Windows 7 PCs with IE11 run Aframe from the link http://139.162.228.5/ @zubairq this is what i get when looking at it in IE11 (outside the network)


```
   A-Frame Version: 0.7.0 (Date 22-09-2017, Commit #75ac4d8)
   three Version: ^0.87.0
   WebVR Polyfill Version: ^0.9.36
   THREE.WebGLRenderer 87
   WEBGL11095: INVALID_OPERATION: clearStencil: Method not currently supported
   File: aframe.min.js, Line: 105, Column: 3544
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(61, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(124, 1): syntax error, unexpected UNSUPPORTED_TOKEN

   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(67, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(134, 1): syntax error, unexpected UNSUPPORTED_TOKEN

   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(62, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(125, 1): syntax error, unexpected UNSUPPORTED_TOKEN

   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(67, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(134, 1): syntax error, unexpected UNSUPPORTED_TOKEN

   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: INVALID_OPERATION: useProgram: Program not linked
   File: aframe.min.js, Line: 105, Column: 4729
   WEBGL11039: INVALID_OPERATION: drawArrays: This context does not have a current program
   File: aframe.min.js, Line: 104, Column: 3671
   WEBGL11042: Too many errors encountered - no more errors will be logged
   File: aframe.min.js, Line: 105, Column: 4729
   **** window.when_queries_changes = function(fields) { called
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
 Shader compilation errors
(3, 1): Internal compiler error

   Browser received from server socket: {
  "message_type": "client_get_all_queries"
}
   Browser received from server socket: {
  "message_type": "client_get_all_queries_done"
}
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(61, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(124, 1): syntax error, unexpected UNSUPPORTED_TOKEN

   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLShader: Shader couldn't compile.
   THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog Shader has not been successfully compiled
 Shader compilation errors
(68, 1): syntax error, unexpected UNSUPPORTED_TOKEN
 Shader compilation errors
(135, 1): syntax error, unexpected UNSUPPORTED_TOKEN


``` @zubairq 

Are you able to have a look at this file and tell me if it runs for you in IE11 (or lower) or what I have to do to get it to run?

http://repo3.cfals.info/tram_supply/index2.html

Thanks @sim3083 Ok, I will try that later today @zubairq thanks heaps... may mean I cant use a-frame which is a real shame @sim3083 I just tried the link http://repo3.cfals.info/tram_supply/index2.html in Chrome on my Mac and I only get a JPEG on the screen, nothing in AFrame though, is that the correct behaviour? @zubairq sorry try it now @sim3083 Ok, that works on my mac. I'll try IE11 later today @zubairq great cheers @sim3083  http://repo3.cfals.info/tram_supply/index2.html  works in Chrome from work network @sim3083  doesn't work from IE 11 on my work network @sim3083 I looked at the "View source" of the page  http://repo3.cfals.info/tram_supply/index2.html  but I couldn't see the extra IE code that I suggested you add though:

(function () {
    if ( typeof window.CustomEvent === "function" ) return false;
      function CustomEvent ( event, params ) {
       params = params || { bubbles: false, cancelable: false, detail: undefined };
       var evt = document.createEvent( 'CustomEvent' );
       evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
       return evt;
    }
    CustomEvent.prototype = window.Event.prototype;
    window.CustomEvent = CustomEvent;
})();
 @sim3083 Look at :+1: 

https://github.com/zubairq/visifile/blob/master/public/index.html

and copy the header and meta tags and also


			(function () {

                  if ( typeof window.CustomEvent === "function" ) return false;

                  function CustomEvent ( event, params ) {
                    params = params || { bubbles: false, cancelable: false, detail: undefined };
                    var evt = document.createEvent( 'CustomEvent' );
                    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
                    return evt;
                   }

                  CustomEvent.prototype = window.Event.prototype;

                  window.CustomEvent = CustomEvent;
                })();


and also the sript

	es6-shim.js 

then it should work @zubairq Thanks for your efforts

I added the code and copied the aframe and es6 js files to my location gave it a go (at the same address) and it gave me the same errors as the ones I posted above (the long one) 

See if it works for you in IE11

S


 @sim3083 It's fine, I committed on the AFrame forum that I will try and get AFrame working with IE11 so I will stick by my word, as long as I know it is still possible

Can you update the example https://github.com/zubairq/visifile/blob/master/public/index.html
with the changes then I can test it and see what you have added. @sim3083 I mean can you update http://repo3.cfals.info/tram_supply/index2.html
 Already done @zubairq  @sim3083 Ok, super, I can test it in IE next week at work @sim3083 works fine for me now, on IE 11.0.9, what version of IE do you have and is it running in Edge mode? 11.0.9600.16428 

Is this through your work network? When I test it at work I get nothing and no errors, outside of work I get the errors from above

Can you also test the below link? It has some jquery overlays on it

http://simonbertoli.com/aaa/

 @sim3083 Yes, it was IE11 on work network with Win 7. I'll try the other link today. My suggestion is to try the link  http://repo3.cfals.info/tram_supply/index2.html on someone else's IE 11 Win 7 and Win 10 that you know so that you can debug it more easily @sim3083 The link http://simonbertoli.com/aaa/  does not work on IE11 in work network @zubairq both links on IE 11 Win 7 and Vista do not work for me outside of the network @sim3083 How many different IE11 physical PCs did you try the http://repo3.cfals.info/tram_supply/index2.html  link with?  I was getting a peerdep error without this update: https://travis-ci.org/kellyselden/aframe/jobs/241841600#L384-L386

I figure we aren't getting it yet here because we have a primed npm cache on travis. Yep, I should be able to submit that quick.  In response to https://github.com/aframevr/aframe/pull/2755#discussion_r121292464.

This makes running in node more happy and eliminates the need for this change https://github.com/aframevr/aframe/pull/2755/files#diff-97c6b758b49a87147586d2d87795312aR38.

cc @ngokevin Sounds good. I'll take a look. Also, if you can think of a test that would have caught this regression, I would be happy to include/write it.  similar to #2747 and #2752.

This is the last piece. After this, using aframe in node will only require a `global.window` mock.  Hello,
I think the sound example in the documentation is broken on master. It works perfectly on the 0.5.0 release but not on the latest commit of the master branch.

- A-Frame Version: master
- Platform / Device: Windows 10 - Firefox Nightly 
- Reproducible Code Snippet or URL: https://aframe.io/docs/0.5.0/components/sound.html#preloading-a-sound-asset

When I do the exact same thing from the documentation on master, I have this error in the console:

> TypeError: Argument 1 of BaseAudioContext.decodeAudioData does not implement interface ArrayBuffer.

Thank you for reading this. This happens to me when I preload an audio file and then try to play the sound using .playSound(), but everything plays fine when the audio isn't preloaded and autoplay is set to true. I'm looking around in the source but I wanted to let you know in case that rang a bell for you. I know you guys reworked the way assets were cached between 0.5.0 and 0.6.0 Using `THREE.Cache` was added to resolve an issue where images were being downloaded more than once: https://github.com/aframevr/aframe/issues/2472, but unfortunately I think this code doesn't work for audio (and possibly video, but I'm not sure).
If you set `preload=auto` in an `audio` element, then  `aframe` sticks the loaded audio _element_ into `THREE.Cache` once the browser finishes downloading the audio:
https://github.com/aframevr/aframe/blob/master/src/core/a-assets.js#L165
Later when the `sound` component uses the `THREE.FileLoader` to load the audio, it pulls the audio element from the cache and throws the error @HAZARDU5 linked above:
```Uncaught (in promise) TypeError: Failed to execute 'decodeAudioData' on 'BaseAudioContext': parameter 1 is not of type 'ArrayBuffer'.```
(The loader returns the cache hit here: https://github.com/mrdoob/three.js/blob/master/src/loaders/FileLoader.js#L42).
I think sticking the audio element into the `THREE.Cache` is a bug, because what we actually wanted in there was an `ArrayBuffer`, not an `HTMLElement`. A workaround is to use `a-asset-item` instead of an `audio` element inside of `a-assets`, and set the `response-type` to `arraybuffer`. That way, `a-asset-item` will load the audio using `THREE`'s file loader and the Cache will have an ArrayBuffer:
https://github.com/aframevr/aframe/blob/master/src/core/a-assets.js#L109

e.g.            `<a-asset-item id="mySound" src="assets/audio/mySound.wav" response-type="arraybuffer"></a-asset-item>`

@ngokevin I suggest the documentation for the `sound` component be changed to reflect this too, because as-is, the preloading audio example does not work:
https://aframe.io/docs/0.7.0/components/sound.html#preloading-a-sound-asset
  
   @dmarcos I think we'd want to store an `arraybuffer`, but since the browser is the one loading the audio for an `audio` tag, I don't know of a way to get an `arraybuffer` out of the `audio` element. The `a-asset-item` workaround works because the `THREE.FileLoader` is makes an `XMLHttpRequest`, and that request is configured to return an arraybuffer: https://github.com/mrdoob/three.js/blob/master/src/loaders/FileLoader.js#L253
   I also run into this bug (in 0.7.1) with preload="auto" and then trying to do audio.play() in a click handler (so that it activates the audio on mobile).

FWIW I'm able to use this workaround, based on @johnshaughnessy recommendation:

`<a-asset-item id="mySound" src="assets/audio/mySound.mp3" response-type="arraybuffer"></a-asset-item>`

Then instead of trying to do audio.play() in a click handler, I instead look up the element with the sound component and do: 
`soundEntity.components.sound.stopSound(); 
soundEntity.components.sound.playSound();`

From some reason the stopSound call is necessary for it to work on iOS (~11.2). @madebynoam Worked for ogg files in A-Frame 0.8.2 as well  **Description:**

Corrected the threejs URL in the documentation to point to the correct location

**Changes proposed:**
- Updated the documentation as proposed by @superjose here https://github.com/aframevr/aframe/issues/2733

The last commit is the only one needed. Missed one link in the first one.

  similar to #2747 Correct. I believe the main use case for aframe in node is to build the objects, not (yet) DOM manipulation.  I want to record a vr motion video of my house.
How can I do it?  * Enable the entity setAttribute API to accept partial updates of multi-property components when using a CSS-style property string
* Enable the use of the `clobber` flag under same scenario
* Remove single-use helper functions in a-entity for updating a single property of multi-property components
* Add unit tests and update a test where behavior changed

Details:

Previously, it was only possible to do partial updates when passing objects. Extending this behavior (and the clobber flag) to CSS-style strings requires differentiating those strings from simple property names, as a string in the second parameter could be either one.

This is handled by calling out to `utils.styleParser` and checking the return type, which is redundant to work done inside the component. This inefficiency could be reduced perhaps by reworking slightly the interface between the entity and component to pass the parsed result down; or a different mechanism of differentiation could be devised.

However, using strings in either capacity (CSS-style or the single property update form) is inherently a less efficient convenience for the object form, and their use should be discouraged when performance matters (e.g. `tick`).

The `clobber` flag (third parameter to setAttribute) behavior in this scenaro has now changed: previously, any time the second parameter was anything other than an object, `clobber` was treated internally as true. Now, CSS-style strings are treated the same as objects, where it defaults to false but is configurable by parameter.

This means that `el.setAttribute(‘myComponent’, ‘’)` previously would reset the component to its default values (because it was clobbering and not passing any new values). To get the same behavior as before, use `el.setAttribute(‘myComponent’, ‘’, true)`. One unit test was updated to reflect this change.

Finally, `entity.updateComponentProperty` has very little logic, is not a public API, and was only called by `setAttribute`; so it was simply merged in and its unit tests removed. Thanks for the feedback @dmarcos. I went ahead and amended your suggestions into the commit and then rebased it onto master.   It makes it easier to run in Node, because you have to provide these mocked globals before requiring aframe. For example: https://github.com/kellyselden/ember-aframe/blob/master/index.js#L15-L37  I also lean to the consolidation as it will future proof the api. On the other hand it breaks component with dependencies and may also conflict with anyone setting a config property of his own. Maybe you could call on all component writers to consult/prepare them @donmccurdy I think the point is to keep prototype pollution to a minimum. The property name could vary, for instance I was thinking of "meta" or something, but it doesn't really make a difference for me at least @machenmusik you're right and it probably won't. I did this PR at some point https://github.com/aframevr/aframe/pull/1437 . I lean more for a simple solution right now though as it would cover present needs. If more is needed in the future it can be provisioned then on top of the flag which would have minimal impact @donmccurdy if you mean being able to specify an alternative system for components, I'm also all in for that. It would make the effect components tidier @machenmusik postprocessing is covered adequately as it is right now. Systems always run after components and there can be only one system that finally outputs to canvas. So there are two lanes of order (components then system) and that's good enough.

The use case for more prioritization would be to have a screenshot system that would always run after the post processing system to record the final frame @machenmusik the screenshot component basically redraws the scene on its own so it's not very efficient and no post processing. On its good side it can draw into cubemaps and do 360 video.  Changes 1a45e04 and 7e459ed refactored the relationship of `entity.setAttribute`, `component.updateProperties`, and the responsibility of merging new attributes with earlier ones (provided a clobber isn’t explicitly requested).

The component now has that responsibility, but `entity.updateComponentProperty`, the function responsible for the updating of a single component property, still maintains logic that merges attribute values.

This change simplifes the logic of that method to only pass the new attribute down to the component, which will then perform the merge itself.

This isn’t likely to yield any performance improvements, because a new object is allocated either way and redundant copies were already protected against, but it makes the logic of these files more consistent.

See https://github.com/aframevr/aframe/pull/2729

**note** on my machine I am only able to run the tests in Firefox Hey @ngokevin, I haven't seen the intermittent failures reproduce on my machine, and I also just submitted a PR that touches this code again. When you get a chance I hope you can take a look (https://github.com/aframevr/aframe/pull/2748) and provide feedback, and also let me know if you're still seeing failures?    system.update() is not called when system attributes are modified via the web inspector while setAttribute() works as expected.

- A-Frame Version: master
- Platform / Device: All  want to work assign me @ngokevin  Hi @amitsin6h, thanks for stepping up for this bug. Feel free to work on this bug and create a PR, if you have any questions you can ask on #issues slack channel of a-frame (https://aframe.io/community/#slack).  @ngokevin Are you just asking to change sources such as src/components/laser-controls.js to master/src/components/laser-controls.js, docs-v0.7.0/src/components/laser-controls.js, etc. in every doc page in all of the branches?  xirvr's gltf component has been merged in #2333  **Hi everyone! Just a quick note to change the urls for the Threejs website.:**

In here: 
- https://github.com/aframevr/aframe/blob/master/docs/components/material.md
- https://aframe.io/docs/0.5.0/components/material.html#standard

Urls have this form:
https://threejs.org/docs/#Reference/Materials/ShaderMaterial

Threejs has this urls:
https://threejs.org/docs/#api/materials/ShaderMaterial


Apparently Threejs has renamed the #Reference for #api. 
 Woot. My bad. I messed up with the PR :/ sorry for that!!! I didn't want to commit anything. 

I just want to point out that in the aframe website the URLs from threejs seem off: 
https://aframe.io/docs/0.5.0/components/material.html#standard

If you look for "THREE.MeshStandardMaterial" you'll see that the URL points to a 404 Not found location. 

The hashtag "#Reference" has been swapped for "#api"

I'll reopen a new PR.  **Description:**

A-Frame crashes when having a cursor and a Collada model in the same scene, and looking at most parts of the model. For example [this model](https://3dwarehouse.sketchup.com/model/9437690f-9220-4abd-8235-93e2296a0644/Iskren-Marinov-Comp) crashes A-Frame when looking at the paintings. Seems to be the same problem as [here](https://stackoverflow.com/questions/40114053/collada-model-causes-a-frame-to-crash-when-panning-around).

- A-Frame Version: 0.5.0
- Platform / Device: Windows 10 [Same issue?](https://github.com/aframevr/aframe/issues/2319)  Thanks for this fix! I was taking a look at it a few days back, and I noticed that `a-entity.updateComponentProperty` still performs property merging for the case of single property updates:

https://github.com/aframevr/aframe/blob/master/src/core/a-entity.js#L551

This should be duplicated work now; instead of `extend`ing the previous `attrValue` object, `updateComponentProperty` could just call into `updateComponent` (which it already does) with a new simple object, `{[property]: propertyValue}`.

This is most likely a small amount of overhead, but it is something to think about if this area gets touched again. Sure thing! Check out https://github.com/aframevr/aframe/pull/2743  Description:

this.el.setAttribute('mixin' , '');
is throwing an error "'querySelector' on 'Element': 'a-mixin#' is not a valid selector."

Changes proposed:
Adding another attribute can eliminate the error

this.el.setAttribute('mixin', this.data.mixin);

  #2280 
**Description:**

this.el.setAttribute('mixin' , '');
is throwing an error "'querySelector' on 'Element': 'a-mixin#' is not a valid selector."


**Changes proposed:**
Adding another attribute can eliminate the error

-this.el.setAttribute('mixin', this.data.mixin);
-
-
 Alright sorry!
  **Description:** The HTML file that the visual inspector exports is wrong when it is opened in the browser. This does not show well the scene that was worked.

- A-Frame Version: 0.5.0
- Platform / Device: Firefox desktop for MAC OX  How can we upload a video link from youtube in a-frame?
I want to make a youtube video as the background but I am not able to include iframe in a-sky tag.
Can anyone help me out?
  **Description:**
enables the user to pinch in and out to move forward/backward on mobile

**Changes proposed:**
- Add a dolly to modify position on mobile
- Enable 2 fingers touch for pinch
- Get fingers distance on touchmove to figure pinch in/out and move on z axis accordingly
 Ok, thanks for letting me know! I thought it was a nice added feature but I should've checked with you beforehand indeed. Hope I haven't wasted your time too much. Thanks!  **Description:**

By switching out models and lights dynamically in a scene, I have exposed an issue in the light component where a null reference exception occurs when creating a new spot or directional light where the target is already loaded.

`setLight` calls `getLight` which calls `onSetTarget`. `onSetTarget` expects `this.light` to be present, which works as long as the target is not loaded, since an event listener is set up in `getLight`, giving `this.light` time to get set in `setLight`. When the target is not loaded, however, `onSetTarget` is called immediately and `this.light` is undefined.

**Changes proposed:**
- Added tests to expose the issue
- Call `onSetTarget` with the new light to set the target on, instead of relying on `this.light`
- ~~Continue to also set target on `this.light` if present (this was necessary to get all tests passing, not sure why)~~
  I am try to rotate the 360 image using 
<a-animation attribute="rotation" fill="both" easing="linear" dur="40000" to="0 500 0" repeat="indefinite"></a-animation> it's working fine 
But inside 360 image I am using some of the icons and labels while I try to rotate the image the icons and labels are going out of the environment 

**Any one tell me that How to rotate the camera** ? Instead of rotating an Image

Thanks in advance 

 Add `id="camera"` to your `<a-camera>` element and do:

```js
document.getElementById('camera').setAttribute('rotation', '0 45 0');
``` Hello nwoltman
The above code is not working it just changes the image direction to "y" the camera is not get rotating 
I need an rotation like this https://livetour.istaging.com/57ecd104816dfa005668e914 and as well I need floor plan also how to do
Thanks in advance
 @Kumaresh-Rajalingam Yes the code I gave you is an example of how to rotate the camera to a specific rotation. I didn't realize you were asking how to do a rotation animation. Try following the [animations guide](https://aframe.io/docs/0.5.0/core/animations.html) and use an `<a-animation>` inside your `<a-camera>`. There's also an A-Frame Slack channel where you can get more help: https://aframevr-slack.herokuapp.com/
There's always [Stack Overflow](https://stackoverflow.com/questions/ask) as well. @nwoltman have you check the above link that I sent? I need an rotation like this   I have a use case where an object is switching from selectable to a non-selectable state. I do this by changing the class name from 'screen selectable' to just 'screen' (raycaster is set up with '.selectable' selector).  

It appears that the raycaster component does not react to class name changes, it only detects a change when an element is added or removed from DOM.

- A-Frame Version: 0.5.0 and current master @ngokevin I just think that this is not a corner or a rare case - changing a class name of an element so that it triggers (or does not trigger) a selector match. Why not do an extended check in the raycaster component (maybe just reacting on "class" attribute changes)? Is it a performance consideration?   The physical based rendering of A-Frame is limited because these values can only come from integers. Popular physical based pipelines like Substance Designer generate texture maps for diffuse, roughness, metalness, and normal. 

 I think it could still be valueable having it available for primitives and non-exported, here's why.

Even though i'm artist who's capable of using blender3d and exporting fancy models with fancy maps, a more simpler VR artist may only know how to use primitives and seamless repeatable textures.  Having roughnessMap and metalnessMap could allow seamless PBR textures for less skilled artists to create powerful materials on simple objects.   

I know it seems kind of crazy, but when I just started out as an artist in VR, all I could build with was cubes and spheres and simple cylinders that I scaled just so. It took me a long while to build up to being a 3d artist, but meanwhile I wanted every cool effect I could get away with on those primitives :)

 @dmarcos Yes sir.  Imagine an artist creating a library of PBR material sets (leather, rough metal, concrete, etc.)  Places like this exist already somewhat: http://freepbr.com/

Here's the program I personally use that is simplest, it allows you to drop on an image of a material, make it seamless, and adjust values to get correct roughness and metalness, then export the maps: 

https://www.allegorithmic.com/products/bitmap2material I agree that building with primitives is a good start as a gateway to working with Blender and more sophisticated modelling tools. 

 

I think there is a lot of room for expansion of basic primitive parameters in AFRAME, perhaps some sort of more universal primitive component would be valuable. 

 

If you are looking for ‘all of the effects’, what I think would be most interesting is if it was possible to support all the primitive parameters Second Life / OpenSimulator offer. ( which are documented here http://wiki.secondlife.com/wiki/LlSetPrimitiveParams ) . 

 

Some things that are missing from aframe that are useful in SL are things like path cut, hollow, twist, and shear. They also have flexible primitives. And the big thing I find missing from aframe is unique textures (and attributes such as shininess / roughness) on a per face basis. ( Of course there are some components with different properties, but none that are as far reaching as the above ). 

 

An aframe extended primitive component that had a 1:1 match for each of the Second Life / Opensim primitive parameters would open the door to bringing a lot of already created 3d content to the web.  

 

People make quite complex structures with these platforms and primitives because of the wide variety of deformations and attributes presented. AFRAME would benefit from supporting more of these.

 

From: Richard [mailto:notifications@github.com] 
Sent: Sunday, May 28, 2017 10:05 AM
To: aframevr/aframe <aframe@noreply.github.com>
Cc: Subscribed <subscribed@noreply.github.com>
Subject: Re: [aframevr/aframe] Support Metalness and Roughness from Texture (#2709)

 

I think it could still be valueable having it available for primitives and non-exported, here's why.

Even though i'm artist who's capable of using blender3d and exporting fancy models with fancy maps, a more simpler VR artist may only know how to use primitives and seamless repeatable textures. Having roughnessMap and metalnessMap could allow seamless PBR textures for less skilled artists to create powerful materials on simple objects.

I know it seems kind of crazy, but when I just started out as an artist in VR, all I could build with was cubes and spheres and simple cylinders that I scaled just so. It took me a long while to build up to being a 3d artist, but meanwhile I wanted every cool effect I could get away with on those primitives :)

—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub <https://github.com/aframevr/aframe/issues/2709#issuecomment-304520612> , or mute the thread <https://github.com/notifications/unsubscribe-auth/ACFXvg7NCke3cPe6CTwL0lpL9HUuYO15ks5r-Y0VgaJpZM4Noij_> .  <https://github.com/notifications/beacon/ACFXvjtDVaBDZdveajh8h4ilUDl6hRP3ks5r-Y0VgaJpZM4Noij_.gif> 

 Absolutely agree @rob-lindman  I think one opportunity for A-frame is to make powerful features accessible to people who may only know HTML.  Having people use gltf, three.js materials, and even just the amount of time to break open a 3d editor to make something simple is pretty non-trivial for a large number of people.  Even myself, sometimes I just want to take a shortcut and use a simple primitive instead of busting open blender just to generate a cube, unwrapping, materializing, etc. Sometimes I just want a set of simple beautiful shapes I can play with seamless textures. @donmccurdy 

It's been my observances in VR that many artists tend to go through various phases:

1. building with rough solid colored objects
2. minecrafter types capable of assembling complex objects with basic primitives (guns made from blocks)
3. primitive tweakers who play with complex textures (usually seamless) to get an even more detailed object
4. 3d artists who can model, but they don't know how to render textures, and use basic textures on simple uv maps
5. 3d artists who can model and  render textures but not know how to do advanced shaders or baked effects
6. people who can do it all

This feature is for satisfying artists that fall into the type 3 and 4 category.  They've gathered enough skills to know textures are cool and want to know how to exploit them, but their 3D skills are lacking.  It's an important bridge zone because the cost of learning 3D modeling is generally VERY high. The artist looks for anything to keep their sanity with something beautiful while their skills advance. The emphasis usually is on seamless textures, alpha masks, texture repeats/offsets, when you have no capability to generate UVs of your models, people on the lower spectrum of 3d modeling capabilities rely upon the UV maps of your default primitives.

There's providers of seamless PBR textures out there and builders tend to learn from each other the tricks of their appropriate skill level.  Here's one such provider of material textures:

http://freepbr.com/

The only reason I suggest this feature is in the attempt to give low skilled people a cool effect in a manner that seemed in alignment with stuff that exists.  It's entirely possible a-frame doesn't not have interest in such lower capability artists and that's fine.  So please don't let me push this forward too far beyond the project owner's own interests.  Just offering one possibility of could be.

I think there's alot of ex-Second Lifers wondering if a-frame could be the basis of the next metaverse, and we're transferring our own experiences onto your project. Take from it what inspiration you like or not. =)
 An opinion:
A-Frame nominally supports THREE.MeshStandardMaterial so should support roughnessMap and metalnessMapsince as they're part of it
-OR-
give a warning that they're NOT supported. It took a few hours of experimentation to confirm this.

A use case:
My client wants shiny metals. My 3D artist works with Maya which, apparently, can't export shiny, and converting to glTF is not an option (their preferred format is fbx, which is proving to be a nightmare).

Again, after experimentation I found a workaround, by applying them to the underlying object3D with JavaScript. This seems to be unnecessary friction.

Unless it's onerous to implement, isn't it better to have something and not need it, than not have something and need it?

In time, glTF will likely be widely supported, but unfortunately that's not the case now. Shouldn't A-Frame try to support existing formats and properties as well as possible to minimise friction with the limited tools we have available to us?

Thanks.
 Yes, I realise that materials can't be applied to models (as I found out the hard way).

The fbx issues are a bit of a red herring, my real problem is not being to apply metalness and roughness maps to an obj.

Converting would add at least two steps to the process (almost certainly more) and they're not prepared to do that as their current pipeline works fine, nor do we have the time.

I've tried various conversion tools but none worked.

Yes, fbx is a nightmare, but that's what I was given initially. Now, we're using obj.

@ngokevin 
hi, I'm using MeshStandardMaterial's features. :)
Is it THAT easy to write a component for MeshStandardMaterial? @donmccurdy what's your workflow? How is it with shiny metal? The problem in the thinking in this thread is people seem to only imagine
two users of aframe:

3d noobs who should be content with phong

Uber 3d artists who should all convert their assets to the format flavor of
the month.  **Description:** Raycaster component caches raycatching objects by querying for them, then storing them on a property. However, this cache is [only updated/invalidated when an element is added/removed](https://github.com/aframevr/aframe/blob/6511a237a9c762347fbc65c3bcf98b2772691c24/src/components/raycaster.js#L41).

 I ran into this corner case when adding/removing the classname I'm using to mark elements for raycatching. Of course, adding and removing the class will not trigger the `child-attached` event and so the cache will remain incorrect.

**What should happen:** ideally, raycatching should happen on elements that have that class _at time of intersection_.

The caching of this DOM query looks to be a performance optimization. Do we know if the DOM query is actually a bottleneck here?

- A-Frame Version: master
- Platform / Device: all
- Reproducible Code Snippet or URL: n/a

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 Also, stray thought: we should be able to filter out entities with `visible: false` by default, right? That seems reasonable. Thanks!  I've written [ambient declarations](https://www.typescriptlang.org/docs/handbook/declaration-files/introduction.html) for a-frame in order to provide type support for TypeScript. I created a ticket a few months ago (DefinitelyTyped/DefinitelyTyped#11696) to track interest and recently I've been asked to merge these typings in to a standard place for consumption.

It would be great to include TypeScript support w/ A-Frame. This doesn't require any code to be rewritten, just include [a .d.ts file like this](https://github.com/devpaul/aframe-typings/blob/master/src/AFRAME.d.ts) as part of the release and add some tests to exercise the typings against A-Frame.

Benefits include:

1. IDE support via intellisense and better code completion for A-Frame and it's dependencies (e.g. Three.js) (this is great for new users)
1. Eliminates common errors stemming from typos and misuse
1. Including in A-Frame would keep typings current w/ releases
1. Zero runtime const (ambient declarations are not part of executed code)
1. Better support for Angular and TypeScript users

By including typings w/ A-Frame, TypeScript users will immediately have types available and it would have no effect on non-TypeScript users.

I'm happy to answer any questions. If there's enough interest I'll submit a PR. I forgot to mention, if people would like to experiment w/ current ambient declarations there's a boilerplate here: https://github.com/devpaul/ts-dojo-aframe-boilerplate > If the .d.ts file will have to be updated by hand regardless, then I think it would be better to maintain it outside of this repo — none of us are using TS here, and it's likely to go stale.

I think this is the key point. If there's sufficient community support then it's worthwhile to add typings as part of A-Frame. If support and upkeep may be an issue then it's OK as a separate project. The biggest drawback to this is the release of typings wouldn't be tied to A-Frame, which isn't huge if the community isn't yet there.

> A-Frame's API is also primarily through the DOM

I love A-Frame's usage of the DOM. Typings would lower the barrier to entry as users start working directly with elements or writing custom components. Having Threejs typings for `object3d` and the other more complex dependencies of A-Frame has helped me quite a bit.

> If typings were in the repo, how are they served?

Bundled typings are indicated via a `types` entry in `package.json` that points to a file (e.g. aframe.d.ts) distributed with the package. Docs: https://www.typescriptlang.org/docs/handbook/declaration-files/publishing.html

> By adding typings to the repo, do we get any advantage for maintaining them

When we added [typings to Dojo](https://github.com/dojo/typings) we identified a number of bugs in the code and tests that didn't correctly test the code. We did this by writing a script to convert our tests to ESM module format and then used TypeScript to compile the tests against the typings we created by hand.

> could typings be generated from our JSDoc automatically?

While there are [projects](https://www.npmjs.com/package/tsd-jsdoc) out there that attempt this, I wouldn't recommend it. The main benefit of adding typings to a project like A-Frame is to lower the barrier to intermediate development when users start writing custom entities and components and need to deal w/ threejs or other dependencies. Automated solutions aren't typically very good at linking to external projects (good linkers are hard to write).

> If we can automate the typings here in a way that wouldn't be possible in another repo

If typings are published in DefinitelyTyped they'll be available as a separate package. TypeScript users could install it via `npm i @types/aframe`. The biggest drawbacks here is the release of types will lag A-Frame and since typings are separate their versions are not tightly coupled. A major API change and a lagged release of typings will stall TypeScript users from using the latest A-Frame.

But everything is trade-offs, right? If there's enough community support to warrant adding typings to A-Frame, or there enough of a benefit to A-Frame to include them, then we should. Until there's an overwhelming call for it I'm happy to publish typings in DefinitelyTyped.  I've set up two simple test cases:

1) 1000 planes are rendered via `a-plane` tag
2) 1000 plane geometries are added via `new THREE.Mesh(new THREE.PlaneGeometry(1, 1))` and then `scene.add(plane)`

On my PC performance in roughly the same when the camera is still ~ 80 fps. However when I start dragging the mouse to rotate the camera the 1st test case shows a performance drop to 15fps, while the 2nd renders the same 80 fps.

Moving camera with wasd controls does not cause fps to drop.

What could be the reason for this performance drop?

The scene doesn't have a cursor, so I guess this cannot be caused by raycaster checking collisions.

- A-Frame Version: 0.5.0 and current master was tested  @ngokevin Thank you, actually, the issue is connected to react or aframe-react which I'm using, I will file an issue in the proper place  Is this issue still being worked on? Hi @rttomlinson, thanks for stepping up for this bug I dont think anyone is working on this. Feel free to work on this bug and create a PR, if you have any questions you can ask on #issues slack channel of a-frame (https://aframe.io/community/#slack).  I see that @rttomlinson has considered working on this and probably still is.  I am a new contributor to open source projects and would like to get involved.  Considering this is still an open issue, can I work on it as well?

Thanks! Hi Jiel,

Feel free to take it over. I haven't had much time lately. Let me know if
you have any questions!

On Wed, Sep 27, 2017, 08:04 Jiel (Jyle) Selmani <notifications@github.com>
wrote:

> I see that @rttomlinson <https://github.com/rttomlinson> has considered
> working on this and probably still is. I am a new contributor to open
> source projects and would like to get involved. Considering this is still
> an open issue, can I work on this issue as well?
>
> Thanks!
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2701#issuecomment-332499029>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/ALEQEzIW3moXXY7bB5W1Kh6vmIdqwPxoks5smjm0gaJpZM4Nl3NO>
> .
>
 Thanks @rttomlinson.  There has been a commit that I referenced that looks as if the issue has been solved, so before I start I would like to hear from someone from the A-Frame team so I can perhaps get working on another issue.  If I have any questions though, I will definitely ask! Thanks for clarifying @dmarcos, I appreciate it!  **Description:**

This uses the [googlevr/webvr-polyfill] directly again instead of the aframe fork after talking with @dmarcos on what things needed to be fixed to eliminate the need for Aframe to maintain their own fork, in addition to general support and communication from us on the polyfill end. Did lots of triaging this week and cleared out some low hanging fruit in addition to:

* [support Android Webview in polyfill](https://github.com/googlevr/webvr-polyfill/issues/114)
* [Syncing the dpdb with polyfill, and consolidating all information regarding the dpdb](https://github.com/webvrrocks/webvr-polyfill-dpdb)
* [Clearing out PRs that were in aframe fork and not in the master](https://github.com/googlevr/webvr-polyfill/commit/d873027a71d07f3d2154fa599d49764a515c73e3)

There are outstanding issues in the polyfill, of course, so please let me know if you're aware of any bad bugs and to help out with priority, because Aframe is by far the biggest consumer of the polyfill (I'm guessing, anyway), so try it out and let me know if there's anything else on our end needed to no longer need a fork.

Thanks! @dmarcos thanks! Let me know if there's any questions or anything I can do on the polyfill end to help We found a nasty bug in Chrome for Android when native WebVR is enabled (either via origin trial or chrome://flags) where `getVRDisplays()` hangs, resulting in the polyfill never kicking in, same issue as #2444 I believe. [The patch](https://github.com/googlevr/webvr-polyfill/pull/248) is still up for review, but would love to get a build out and get this in aframe 0.6.0 since it seems like this will break easily as more enable origin trials
 Bumped PR to use `0.9.34` which includes patch from https://github.com/aframevr/aframe/pull/2700#issuecomment-305359753 Changing the polyfill from @dmarcos ' branch to the official version 0.9.34 completely break VR presentation on the Rift and Vive in Chrome WebVR June 6 build. When I click the button to enter VR, it goes fullscreen and picks up the position from the HMD, but it doesn’t do the usual “split-screen” view and the HMD is black.  I haven't tested with Firefox.

I have resolved this for myself by making a branch where this specific commit is reverted, but I haven't done a PR for the revert, as I expect the team would rather investigate the issue and get A-Frame working properly with the official polyfill version. Thanks for the heads up, @RSpace. Creating a bug on webvr-polyfill, dug into this a bit   Yeah, multi-language docs need integrates into the docs  **Description:**
Testing the A-Frame demos with a Sony Z3C, Firefox for Android 53.0.2 crash with VR effect
Testing the demos from the WebVR polyfill, same Firefox works nice. The VR effect from original polyfill looks great in FF for Android

- A-Frame Version:
v0.5.0
- Platform / Device:
Firefox For Android in Sony Z3 Compact
- Reproducible Code Snippet or URL:
A-Frame demos
 I'm trying with the three.js examples, but I see a message saying my broswer does'nt support WebVR for the webvr section examples (same for chrome). There's no crashes
With the Google's WebVR polyfill examples, FF for android works very nice. There's no crashes
The VR effect works fine from A-Frame demos in Chrome

So... there is this bug filed Mozilla's Bugzilla https://bugzilla.mozilla.org/show_bug.cgi?id=1340876. I attached a video with the crash here All the no webvr examples works, no crashes :-)  Webvr crashes on everything I'm using except Chromium. Chromium just won't launch into VR but has a never ending loading. NVidea 1080ti on Win10. I don't expect to hear back since I've been complaining since Monday.  In Nightly for Android (Sony Z3C), there is no way to get the VRDisplay, so the WebVR is not so VR Solved now with version 0.6.1  Just a note that I recently used the gltf 2.0 exporter for blender and found using the core `gltf-model` component doesn't work currently, subsequently found this thread.

Has there been any work on getting the 2.0 spec working with `gltf-model` yet? @sirkitree You can use `gltf-model-next` from @donmccurdy 's A-Frame Extras package https://github.com/donmccurdy/aframe-extras/blob/master/src/loaders/gltf-model-next.js I feel Blender's glTF2 exporter more stable than the old one, I think people will have less troubles with glTF2 and will not need COLLADA at all. Also, the development of the exporter is very active and I think @UX3D-nopper will respond promptly.

My only concern is that right now you have to use special material nodes that aren't included in Blender to make it work. I don't know how clear this will be to newcommers, I'll check this issue out. Khronos will sooner or later get in touch with the Blender community. Goal is to integrate the glTF 2.0 exporter into the offical Blender repository.
Another goal is, to replace the current material nodes with an internal Blender node, that the mentioned confusion is eliminated. Optimal would be a "glTF 2.0 node" inside Blender, which is using Eevee.  **Description:**

Following links on the web to create a component, I landed on the [angle npm page](https://www.npmjs.com/package/angle). About halfway down the page, there is a link to the writing a component documentation that is broken. The link reads "how to write a component".

**Suggestion:**

The link should be replaced with this `https://aframe.io/docs/0.5.0/introduction/writing-a-component.html`

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  hi cavin

 my 360 video is not working as well as which ever video path you provide only 
that is working can you tell why


thanking you
Janavee  **Description:**

- A-Frame Version: lastest
- Platform / Device:  web

We are building a tool for 3D view of home decoration, customers can click on a sofa and it will show or hide in the 3D view.

They provide me panorama images of the home background, and a sofa image of the same size but transparent except the sofa part. 

I tried: 
```
<a-sky src='background.jpg' />
<a-sky src='sofa.jpg' />
```
expecting them to overlay. But sofa image block the background, despite being transparent.

How am I going to achieve my goal?



<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**
What about adding a padding property to the text component?

A padding defines the space around a text. So any text would look better when using the text component with a plane primitive with a material colour.

- A-Frame Version: 0.5.0
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

**Changes proposed:**
-
-
-
  **Description:**
Addressing #2673  With the latest controller update, the ID string is still "Daydream Controller", and works on the webvr.info examples -- the glitch link above doesn't have any results in `navigator.getGamepads()` and some errors with loading the DPDB that can be traced back to ONLINE_DPDB_URL [being a cached JS object](https://github.com/aframevr/webvr-polyfill/commit/75324f14c201d71610ec5a3f9988393c64757ac8) rather than URL from the webvr-polyfill fork, maybe that's the culprit?  **Description:**
There were a small grammar error and a broken link to `gifpardy`.

  It would be great to have a way to render a text on a background with some padding around it.

I’ve tried an example from docs, however, it seems that auto width mode actually sets the maximum width of the container, leaving the gap on the right:

<img width="616" alt="screen shot 2017-05-18 at 14 31 53" src="https://cloud.githubusercontent.com/assets/1079094/26206794/cc6a5788-3bf6-11e7-9c35-2aa398a22657.png">

What I would like to achieve is an ability to render a label with some background around it (similar to Bootstrap labels for example)

Here is a hacky solution that I came up with:

```javascript
import AFRAME from 'aframe';


const fontWidthFactor = 1000;

AFRAME.registerComponent('text-auto-width', {
    dependencies: ['text'],
    schema: {
        padding: {default: 0}
    },
    init() {
        // Hook into text component's updateLayout method
        const textComponent = this.el.components.text;

        const textMesh = this.el.object3D.children[1];

        if (textMesh.geometry.layout) {
            resize(textMesh.geometry.layout);
        } else {
            const origUpdate = textComponent.updateLayout;

            textComponent.updateLayout = (data) => {
                origUpdate.call(textComponent, data);

                resize(textMesh.geometry.layout);
            };
        }

        const resize = (layout) => {
            const {value, width} = this.el.getAttribute('text');

            const metrics = layout.computeMetrics(value, 0, value.length, Math.INT_MAX);

            const actualWidth = metrics.width * width / fontWidthFactor + this.data.padding * 2;

            const geometry = this.el.getAttribute('geometry');

            this.el.setAttribute('geometry', {...geometry, width: actualWidth});
        }
    }
});
``` @ngokevin `align: center` has nothing to do with auto sizing, it will render container with the same width +1 for text padding @eng1neer did you end up finding a solution to this? I tried using the code you posted but I get "TypeError: textMesh is undefined"  Avoid memory allocation produced by string.split() in setAttribute function, which is called in the RAF after each TWEEN update animation   **Description:**

- A-Frame Version: 0.5.0
- Visual inspector: 0.3.0
- Platform / Device: Windows 10
- Browser: Chromium
- Reproducible guideline: Just open the visual inspector on a computer where the icon font is not installed.

On the top on the right side, I could see three buttons for translate, rotate and scale. But I couldn't see the icons. I've seen that the inpector using this code:

```html
<a title="translate" class="button fa fa-arrows active"></a>
<a title="rotate" class="button fa fa-repeat"></a>
<a title="scale" class="button fa fa-expand"></a>
```

So I'm thinking that the icon font you're using is missing in the inspector. The icon font _(probably font awasome I think)_, is not installed on my computer.

![image](https://cloud.githubusercontent.com/assets/16222780/26054408/bb2e3e26-396c-11e7-9bff-9dc3309f7224.png)

  When a camera is set to active=false, it should call pause() on itself.

Currently a camera with look-controls will still move in response to mouse movements even when it is not the active camera.  This can be strange/problematic because then when you switch back to the look-control'ed camera it will be pointing in some random direction, since it's been controlled according to onscreen mouse movement even while inactive.

- A-Frame Version: 0.5.0
- Platform / Device: all
- Reproducible Code Snippet or URL:


  Dont show the text on Chrome in Android 4.4.2 (my phone) but also on iOS S6, on Firefox for Android works!

- A-Frame Version: 0.5
- Platform / Device: Chrome and Chrome Canary on Android 4.4.2
- Reproducible Code Snippet or URL:  

<a-scene stats>
     <a-entity position="0 6 4" rotation="0 180 0">
            <a-camera>               
                <a-text value="Hello" color="black" position="0 1.5 -3" scale="1.5 1.5 1.5"></a-text>
                <a-cursor></a-cursor>              
            </a-camera>
      </a-entity>
</a-scene> https://s3.amazonaws.com/dariodiazbucket/chrome-issue.html

On chrome desktop works! on Chrome for Android the geometry-text works but the <a-text> dont show Yes, it's a LG G3 D693-AR which runs Android 4.4.2 with 3.4.67 kernel version, I have Chrome version 58. I test it with all the documentation stock fonts but it didn't work I'll test if that Chrome version or my Android version has OpenGLES and comment here, thanks for your time! [Related?](https://github.com/bryik/aframe-bmfont-text-component/issues/28) I thought the cause might be the use of highp precision in the SDF shader because [MDN says highp may not work on old phones](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/WebGL_best_practices). The phones in both of these issues have similar GPUs (Mali-400). On Chrome 58 on a Pixel, this is the result for me
![screenshot from 2017-05-19 10 49 31](https://cloud.githubusercontent.com/assets/641267/26260139/fcf2c338-3c80-11e7-80d5-5e7931ed13f3.png)
 @dmarcos 

THREE.WebGLRenderer: OES_texture_float extension not supported.
THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
THREE.WebGLRenderer: OES_texture_half_float extension not supported.
THREE.WebGLRenderer: OES_texture_half_float_linear extension not supported.
THREE.WebGLRenderer: ANGLE_instanced_arrays extension not supported.
THREE.WebGLRenderer: OES_element_index_uint extension not supported.
THREE.WebGLRenderer: highp not supported, using mediump instead.
THREE.WebGLRenderer: image is not power of two (236x236). Resized to 256x256 <img crossorigin=​"anonymous" src=​"/​ball-texture.jpg">​

THREE.WebGLRenderer: EXT_texture_filter_anisotropic extension not supported.
THREE.WebGLShader: Shader couldn't compile.
THREE.WebGLShader: gl.getShaderInfoLog() fragment ERROR: 0:5: 'highp' : precision is not supported in fragment shader
THREE.WebGLProgram: shader error:  0 gl.VALIDATE_STATUS false gl.getProgramInfoLog invalid shaders   ERROR: 0:5: 'highp' : precision is not supported in fragment shader
 

this is the "cleaned" output from my Chrome for Android, as I see my phone doesnt support a WebGL feature so, a-text works but my phone doesnt support it, maybe a fallback if its possible to display text  **Description:**

Touching Daydream touchpad causes `TypeError cannot read property 'length' of undefined`. Because of this TypeError, I also seem not to get `axismove` or `trackpadmoved` events.

This is apparently a bug that @dmarcos is familiar with because I was able to [find a fix he landed to try to work around it](https://github.com/aframevr/aframe/blob/2827f9c49934e9b11206bb8bdf1bcb0a82d618dc/src/components/tracked-controls.js#L296). I gather the empty touches array was added in https://github.com/aframevr/aframe/pull/2537 to avoid this problem, but somehow `touches` doesn't seem to make it on to the event? Here is the exact content of the `touchstart` event fired from the Daydream trackpad (captured in Chrome remote devtools):

```
CustomEvent {isTrusted: false, detail: Object, type: "touchstart", target: a-entity, currentTarget: Window…}
bubbles: true
cancelBubble: false
cancelable: false
composed: false
currentTarget: null
defaultPrevented: false
detail: Object
eventPhase: 0
isTrusted: false
path: Array(6)
returnValue: true
srcElement: a-entity
target: a-entity
timeStamp: 128821.66500000002
type: "touchstart"
__proto__: CustomEvent
```

Changing https://github.com/aframevr/webvr-polyfill/blob/master/src/touch-panner.js#L48 to read

```javascript
TouchPanner.prototype.onTouchStart_ = function(e) {
  if (e.touches) {
    // Only respond if there is exactly one touch.
    if (e.touches.length != 1) {
      return;
    }
    this.rotateStart.set(e.touches[0].pageX, e.touches[0].pageY);
    this.isTouching = true;
  }
};
```

does solve the problem. After vendoring aframe and hacking that in, I get no more errors, and `axismove` and `touchmoved` events all work.

- A-Frame Version: master
- Platform / Device: Chrome Canary / Pixel XL/ Daydream Controller
- Reproducible Code Snippet or URL: any time Daydream Controller is connected @machenmusik just a heads-up... I am using a-frame master from just a couple hours ago. @machenmusik note this change wont fix it, since `touches` is still referenced without a check below https://github.com/chenzlabs/webvr-polyfill/commit/87130ae1ffb8d5c33fe78dc10ea4a0da279eb173#diff-4c2e10343ad71eef9d298507c2d3dcadR48 @machenmusik oh oops, looks like we both just created a PR https://github.com/googlevr/webvr-polyfill/pull/228 @machenmusik should I also submit a PR to aframevr/webvr-polyfill? @machenmusik oh dang, good point. I'm ok to go with either PR. If yours will produce a cleaner merge history then so much the better. @machenmusik let's just use yours if it has the cleaner commit history. Interesting... just pulled up https://webvr.yoga on Daydream and I don't get the same TouchPanner touchstart TypeError.

https://webvr.yoga is using https://github.com/ryanbetts/aframe-daydream-controller-component rather than the daydream-controls component in `master` so there are likely to be differences.  I want to play 360 live stream video come from webrtc client, how? Thank you detail feedback. A quesiton, what your "normal video streaming" mean? I just want to play live 360 stream by Webrtc, I dont know how to use aframe to render that live 360 video. In demo code, only play the local video file.  **Description:**
As of ~11:30CST May 9, the latest a-frame inspector min.js as retrieved from unpkg.com e.g. by the A-Painter demo is now throwing errors whenever an entity is selected which has a material component with a src or other map (or asset?) property.  The error manifests as a "e.match is not a function" js error in an obscurely nested minified block in which e appears to be the actual parsed asset object, and the function appears to be attempting to re-parse it as a URL or asset ID, e.g. comparing "#"===e[0] and then looking it up as a # id if true, or attempting to parse it as a URL (using string .match) if false.

As a side-effect, many inspector fields for map/asset properties now show as empty boxes with [object] as the source, rather than as previews with the corresponding asset #id as the source.

Edit: in fact, upon further experiments with debugging off, the errors derail the whole Inspector and Scene refresh flow to the point where any material updates in the inspector become impossible.  Definitely a priority bug, I would think.

- A-Frame Version: aframe-inspector@0.5.2
- Platform / Device: Windows Chrome
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/a-painter/

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 a variety of other issues, likely related, also show up, some suggesting a corrupted/misfiled canvas context, others that sound like somewhere that _is_ expecting a valid parsed object are instead getting some earlier state e.g. a raw string, although I am having difficulty isolating deterministic repro steps.  Clicking between entities with different types of shader, or with and without materials, seems to re-trigger most types of error, somewhat arbitrarily.
![match_not_a_function](https://cloud.githubusercontent.com/assets/28572171/25866228/5e7e52fc-34bb-11e7-898e-c97832f198b0.png)
![callstack](https://cloud.githubusercontent.com/assets/28572171/25866231/608746d0-34bb-11e7-8178-13cc2a0138f6.png)

 Just found the inspector's independent github.  Would it be worth closing this out here and re-opening it there, or is it already being ingested for action?

Edit: A locally-linked (e.g. inspector="url: scripts/aframe-inspector.min.js" in the scene tag) inspector latest-zip-downloaded from the inspector github does not, at least initially, appear to be exhibiting this issue, so it may be tangled up in how the latest-version auto-URL is being resolved.  However, latest listed _release_ does appear to be 0.5.2, which looks like what is being remotely loaded, so... no explanation as of yet :-P

Edit 2: locally-sourced 0.5.2 just threw the match error.  crisis not averted.  Hi, how can I load the model like this?
[world - old.ply.zip](https://github.com/aframevr/aframe-boilerplate/files/986207/world.-.old.ply.zip)


- A-Frame Version: 0.5.0
- Platform / Device: edge or chrome with gtx 1060
- Reproducible Code Snippet or URL:

```

<a-scene>

<a-entity id="entity" ply-model="src: url(world - old.ply)" position="0 0 0" rotation="-90 0 0"></a-entity>

</a-scene>
```
  There's distortion on the top and bottom of the 360 image 

Here's the screenshots from the A-frame demo:
http://imgur.com/a/0Fd0K

Any idea how to fix it? Hi @dmarcos ,

The distortion isn't caused by an artifact of the camera. The reason is because the experience we are building uses 360 rendered images, and have being reproduced on another viewer (made with Unity) with no artifact.

Here are the comparison:
viewer built with Aframe with artifact:
![image](https://cloud.githubusercontent.com/assets/7750800/25828518/8dabff90-341e-11e7-9b2b-1175ea62e0c9.png)

viewer built with Unity without the artifact using the same image:
![image](https://cloud.githubusercontent.com/assets/7750800/25828510/8000f026-341e-11e7-875c-efd68eb37e90.png)
 @machenmusik We are using 0.5.0 for this project.

@dmarcos Here's the link to our test demo we are building
https://beta.babylonvr.ca/viewer

For comparison, here's the exact same image we used but with react VR, they somehow fixed the problem
http://test1.babylon360.com/vr/

 I think Pannellum gets around this kind of distortion by ["using an exact mathematical mapping from an equirectangular image to a rectilinear view"](https://github.com/mpetroff/pannellum/issues/142). Implementing [this](https://github.com/mpetroff/pannellum/blob/master/doc/pannellum-equirectangular-projection-reference.pdf) looks pretty difficult...cube maps are an easier solution. @machenmusik The codepen uses a video as a source, which seem to work, but I can't get it working with a photo even at higher detail @machenmusik 
I tried it with a flickr 360 photo
http://codepen.io/starwaver/pen/MmVQKp Here's the same photo uploaded on facebook with no distortion
https://www.facebook.com/starwaver/posts/10211510609455389 @dmarcos 
Many consumer cameras take non-power of 2 photos which I think is problem for apps that are photo galleries. I think it would be helpful to enable it.  We tried it and apparently uploading a power of 2 photo doesn't help, but adding npot:true does seem to fix it.

Also sphere segment doesn't seem to affect it much, but higher segment does drop the performance quite a bit. Nice catch @machenmusik, `npot:true` is a significant improvement!

![npot](https://cloud.githubusercontent.com/assets/12419712/25978884/1a9f4c88-3693-11e7-82b6-654295b2fc0d.jpg)
 @machenmusik but why npot:true also significantly improve this issue on a 4096x2048 image. Is it already a power of 2 image?  **Description:**

When loading in the Oculus browser the 'EnterVR Goggles' get hidden because the `auto-enter.js` file tries to auto-enter-vr, but requires a user interaction and the goggles don't re-appear. 

- A-Frame Version: 0.5.0
- Platform / Device: GearVR, Oculus Browser
- Reproducible Code Snippet or URL: Any of the Aframe.io Examples
 This doesn't occur on master.  Is this one dead? well, we got #3176 merged successfully, but #2830 didn't make it, and there seems to be understandable negative feedback on accommodating browser specific quirks in core.  Safari tech preview should finally fix their ancient CORS problem, so that particular aspect shouldn't be required going forward at least.

@dmarcos @ngokevin @donmccurdy thoughts? sidebar: @cvan let me know what you think of the example in #3210 that has multiple sources and HLS, along with some crude click-to-play scripting per the above  http://stackoverflow.com/questions/43774660/aframe-remove-texture

The issue is that removing a texture either doesn't work, or creates a "black" surface. You can see the code pen: https://codepen.io/msj121/pen/JNrWxg

```
//Neither work:
sphere.setAttribute("src","");
sphere.setAttribute('material', {src: ''});
```

Uses: https://aframe.io/releases/0.5.0/aframe.min.js

 These don't work either:

```js
entity.removeAttribute('src');
entity.removeAttribute('material', 'src');
```

---

Also, if I have an entity that looks like this:

```jsx
<a-sky shader="flat" src="/image.jpg"></a-sky>
```

This works:

```js
entity.setAttribute('material', {}, true); // `shader` and `src` go back to their defaults
```

But this doesn't work:


```js
entity.setAttribute('material', {shader: 'flat'}, true);
```

So it seems like `src` doesn't get removed if the `shader` property doesn't change. Looks like this is fixed in v0.6.x  I want to work on this Hi @BhuvanaMeenakshi, I wasn't sure if you had a chance to take a look at this yet. It was in an area I recently studied so I thought I'd give it a go. Seeking feedback. Yes @gregfagan you may proceed!   i have an object i want to go from state A to state B and stay there while being triggered by mouseenter, thing is it keeps rerunning the animation when you re enter the shape, is there any way to kill the trigger once the animation ends?

A-frame 0.50
pc
<a-animation easing="ease-in-out" begin="mouseenter" attribute="scale" dir="normal" dur="2000" to="1 40 1" repeat="0" delay="1000" ></a-animation>
 @shikuru  You can remove event handler which is responsible for starting an animation on animation end.

```
<a-scene>
      <a-image id="obj" src="xyz.jpg" position="0 0 -10" height="6" width="9" scale="1 1 1">
             <a-animation attribute="position" from="0 0 -10" to="-5 0 -10" begin="startAnim" dur="1000" fill="forwards">
      </a-image>
</a-scene>
```

---------------Javascript-----------------

```
var startAnimListener = function(){
   document.querySelector('#obj').emit('startAnim');
}

var removeAnimListener = function(){
    document.querySelector("#obj").removeEventListener("mouseenter", startAnim);
}
document.querySelector("#obj").addEventListener("mouseenter", startAnimListener);
document.querySelector("#obj").addEventListener("animationend", removeAnimListener);
```  I was trying to implement aframe wrapper around threejs ObjLoader2 (https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJLoader2.js) and found an issue when an asset defined in a-assets tag and then used by ObjLoader2 was cached in a text format while the loader was requesting it as an ArrayBuffer:

https://github.com/aframevr/aframe/blob/v0.5.0/src/core/a-assets.js#L102

Loader received a string when it was expecting ArrayBuffer.

Other loaders from threejs examples may be affected too.

- A-Frame Version: 0.5.0
- Platform / Device: All  If used in a naive way, ParseInt returns weird results like [3, NaN, NaN]. See for example http://stackoverflow.com/questions/262427/javascript-arraymap-and-parseint

Remove a ; which was a syntax error.  **Description:**
As look-controls cursor setup only done in init would not work correctly if
changed during runtime.

**Changes proposed:**
-Modify to do on setup + change of enablement state.
-Also, fix for #2635
  Yeah this would be nice.

Types of cursors:

- gaze-based (Cardboard)

- controller-based (Daydream, Vive, Oculus)

- mouse-based (Desktop)

Mayognaise's mouse cursor is designed differently, but gaze and controller cursors could be integrated somehow. 

For tracked controls, the positioning of the laser relative to the model presents a potential complication. Different controllers may require different positioning.   **Description:**

- A-Frame Version: 5
- Platform / Device: Windows 10 Gaming Rig
- Reproducible Code Snippet or URL: Not the Issue

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. --> 

Thank you for creating this coding language. I did learn three.js a few years ago and it was a monster. This should seriously be part of HTML specs. Amazing work. I can't thank you all enough. 

I'm posting here because it seems logical even though it could be considered a help issue. I have noticed on codepen that all of the experiments in AFrame stop dead at any interactivity. So, the assimilation and saturation is huge when just adding elements to a static scene. But once a person tries to add interactivity such as look here and teleport or click this and change that support falls apart. Suddenly it's assumed that one has years of programming experience or even has time to study it just to make simple interactivity. If I had to spend hours trying to learn back end languages in order to create an href tag I never would have become a web designer in 1991. 

So, my request is a code snippet section in GitHub. For instance, I borrowed simple code and read the docs and figured this out: 


To Teleport.

Header code:
```
<script>
  AFRAME.registerComponent('set-camera', {
    schema: {default:''},
    init() {
      const camera = document.querySelector('a-camera');
      this.el.addEventListener('click', () => {
       camera.setAttribute('position', this.data);
      });
    }
  });
</script> 
```

HTML code:

`<a-sphere color="#F44336" set-camera="0 2 -189"></sphere>`

To Set rotation:

Header Code:

```
<script>
AFRAME.registerComponent('set-rotation', {
    schema: {default:''},
    init() {
      const camera = document.querySelector('a-camera');
      this.el.addEventListener('click', () => {
       camera.setAttribute('rotation', this.data);
      });
    }
  });
</script>
```

HTML
`
<a-sphere set-rotation="0 90 0"></sphere>`

and on and on. Please add simple scripts as a link to aframe.io and examples. 

This will speed adoption much faster I believe. I am in the process of completely learning everything now because of what aframe can do. I believe once people can add interactivity it will inspire those that want to program at a higher level. Does this make sense? 
 Thanks, Kevin. This is fantastic stuff. This was the issue I was having
that I didn't realise these components did that. If the event component was
part of the docs in a way for one would see that as the next step. So,
build a static environment, add interactivity by including this specific
component. Maybe drill down in a blog post about how the simpler component
using events was programmed so that someone could follow the logic. My fear
is that many web designers see javascript includes as walled gardens and
can't even figure out how the code actually works.

I am having an issue with the other link you sent me. I downloaded the
GitHub folder and found that the files are not in a position in relation to
the index.html pages.I assume it's a GitHub thing. I'll figure it out.

If you are ever in Denver look me up. Do you know anyone doing this work
here in Denver?

I'm also looking at starting a WebVR Meetup here and possibly just promote
A-Frame if I don't have any ReactVR fans locally. Thoughts on this idea?

Thanks again for a truly awesome tool.

Steve Luiting
http://sluiting.weebly.com
P: 720.563.9377

On Tue, May 2, 2017 at 11:14 AM, Kevin Ngo <notifications@github.com> wrote:

> Closed #2644 <https://github.com/aframevr/aframe/issues/2644>.
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2644#event-1065954494>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAXATgeEv1TdfI6sO6uj3A8MAadcya_0ks5r12SQgaJpZM4NOUit>
> .
>
 I will check out the school. Thanks. I'm working on this at the moment:
http://cablecenter.org/vr/chof2017/

I've used your events component for interactivity and it makes life simple
for sure. The only one complete is Steve Burke at the very beginning. If
you click on his picture it brings up text and videos. Off line the videos
work great but online the second video doesn't show up but does play. On
Android phones it doesn't play.

As you can see I'm not afraid of code and hack entire blocks of it to get
what I want. I do need to slow down, go back and cover the basics. I guess
this is how I learn, I jump in and realise what I don't understand later.

It looks like I need a true preloader for the videos and audio. The audio
intro gets messed up because of the video loading I believe.

I know someone has done experiments with YouTube videos and Mr. Doob had
examples a while back on adding YouTube videos three.js but this may be an
issue for me. I have 20 years x 6 videos that I wanted to add into the
exhibit. Ambitious, yah, maybe even crazy.

Still, this is what I have been waiting for. I'd be happy to help out in
any way I can. If you know anyone that I can pay to help with the video
aspects and preloading I do have a budget.

The events component is great. I'm wondering if the event component can do
animation? I see that event-set__8="_event: click; _target: #myitem;
position: 0 2 4;" But could I do aniamtion somehow like
event-set__8="_event: click; _target: #mycamera; animation.to: 0 2 4;"?

Thanks again!

Steve Luiting
http://sluiting.weebly.com
P: 720.563.9377

On Thu, May 4, 2017 at 11:34 AM, Kevin Ngo <notifications@github.com> wrote:

> There's also https://aframe.io/school/, the docs have the 360 image
> gallery guide that goes over the interactivity and event setter with link
> to demos, and we're currently updating docs too
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2644#issuecomment-299255837>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAXATnKu8PydiR7_9mXvF0jaUoOLI5Pmks5r2gw6gaJpZM4NOUit>
> .
>
  well not really a typo tho

changes gearvr-controls in the example code to daydream-controls  **Description:**
I cloned a version of 360-image-gallery-boilerplate onto my computer and modified it to have 15 panoramas. On the iPad mini (Safari), when I switch between new photospheres (going to photospheres that I have not been to already), the experience gets slower and slower until it forces the tab to reload. This doesn't happen when going to previously visited photospheres.

I am currently working on a panorama viewer built with Aframe and some homes that we use have more than 40 panoramas. I have put together the example described above based on 360-image-gallery-boilerplate to see if it has to do with my code or with Aframe.

Could it be that there is some kind of memory leak caused by the updating of the material src attribute?

Thanks,

- A-Frame Version: 0.5.0
- Platform / Device: iOS 10.2.1 / iPad mini
- Reproducible Code Snippet or URL: [here is a link to the repo for my example](https://github.com/frankymacster/360-image-gallery-boilerplate)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 `Texture.dispose()` didn't seem to work for me. I seemed to still be getting a memory leak. I ended up doing something like this instead:

``` javascript
let material = this.el.components.material.material;
if (!material.map) {
  material.map = new THREE.TextureLoader().load(src);
} else {
  material.map.image.src = src;
  material.map.needsUpdate = true;
}
```

I noticed that `THREE.TextureLoader` creates a new `THREE.Texture` object every time `el.setAttribute('src', src)` is called. This was creating a leak on the GPU as `gl.texImage2D` were accumulating. It's for this reason, I guess, that we need to call `Texture.dispose()`. But even when I call it, the memory leak occurs but at a slower rate. Setting the source this way `material.map.image.src = src` removed the memory leak completely.

Wouldn't it be more streamlined if `el.setAttribute('src', src)` would instantiate a `THREE.TextureLoader` only the first time it is set and afterward just change the image src?

Thanks again This is still an issue. I observed the same thing going on in AFRAME 0.8.2. I get the impression that the textures are not being disposed when the src attribute of a component is updated.  For example, let's say that a button is clicked and a `<img>` is appended to the `<a-assets>` at runtime, is this supported? I would like to use `<a-assets>` caching capabilites but not preload all my assets at page load.
  Checking look-controls-enabled before adding a-grabbing class to body.

Ref - https://github.com/aframevr/aframe/issues/2633 ```js
if (!this.data.enabled) { return; }
```  
 at beginning might be a little cleaner. A related issue that can tackle is that there is still the open hand grab-cursor in `init` being added even if not enabled which don't want so would need to only do if `enabled`. Created new PR - https://github.com/aframevr/aframe/pull/2642/files Cool. 
One more thing.. the deferred `sceneEl.addEventListener('render-target-loaded', enableGrabCursor);` also needs to be only be called if enabled so could put the check around both if & else.  **Current Behavior:** When the `src` attribute of an `<a-videosphere>` is changed, the difference is reflected in the DOM only.
**Expected Behavior:** When the `src` attribute of an `<a-videosphere>` is changed, the new video asset should be rendered.

- **A-Frame Version:** 0.5.0
- **Platform / Device:** Firefox Nightly 55.0a1, OSX 10.11.6
- **Reproducible Code Snippet or URL:** https://codepen.io/aidanfeay/project/full/XmgpOD
- **Stack Overflow link:** http://stackoverflow.com/questions/43664953/changing-sources-on-videosphere-updates-dom-but-doesnt-render I found a sort of workaround by changing the shader when I set the video src. Not ideal but it triggers an update.
```videosphere.setAttribute('material', 'shader: flat; color: #ffffff; src: '+data.src);``` It appears that changing the `material` attribute (even without the shader property) works while changing the `src` attribute does not.

```
videosphere.setAttribute('src', '#video'); // NO CHANGE
videosphere.setAttribute('material', 'src: #video;'); // SUCCESS
```  **Description:**

- A-Frame Version: 0.5.0 (Date 10-02-2017, Commit #110055d)
- Platform / Device: OSX 10.12 Chrome 57
- Reproducible Code Snippet or URL: https://codepen.io/deva/pen/eWgYeo

In my application I would like to remove the *look controls* and set some custom behaviours.

I removed controls from the camera as display below but I can still see the grab-cursor while clicking/dragging the scene.

```
<a-camera look-controls-enabled="false" wasd-controls-enabled="false">
```

 Created PR : https://github.com/aframevr/aframe/pull/2637 Created new PR - https://github.com/aframevr/aframe/pull/2642/files  I'm developing a Vocaloid viewer with a-mmd.js and ar.js but is not possible to reuse my entities twice not even removing it from the scene.

I hope the music and vmd file is reloaded, but only the mmd file is loaded again.

The script is located here: https://gist.github.com/kurai021/1187ec95e0f438d18ecd79b92f799c0c

What I'm doing wrong?
 Hi. Both options create an entity with different attributes, but first remove the entity created with the other option (if exist), the problem is that I can't create an entity again with the same attributes after it has been removed with the other option. OK, I could solve it, the problem is that by default it is called THREE.Cache.enabled = true, that seems to prevent the reuse of textures, audio, images etc ... once they were already used and removed from the entity. Would not it be more practical to keep it disabled (I don't know if it could be better to save memory) or to pass a method to configure the cache in Three.js? I mean, prevent reinitialization of entities. I don't have a simple example (with codepen as example) but you can check my use case in my repo https://github.com/kurai021/aframe_demos, open ar_vocaloid example. Disabling cache I can reuse sounds and textures without cloning the entity, And I guess could be better for memory but bad for network as you say  Added a warning in registerPrimitive when the user has provided mappings keys that are not all lower case. Since the DOM reports all element attributes in lower case (regardless of how the user typed them in the HTML source), the mappings keys must also be lower case.

This issue was discussed here
  https://github.com/aframevr/aframe/issues/2629
A separate PR was previously accepted to update the documentation to mention that mappings are case-sensitive.

**Description:**

**Changes proposed:**
-
-
-
 switched from console.warn to warn() and added braces around if. I hope it's OK (but please take a quick look - I'm not such a genius with javascript)  
The keys in the "mappings" struct in registerprimitive are case-sensitive and must be lower case to work.
This is totally non-obvious. 

Could you either add a mention about this in the doc page 
  https://aframe.io/docs/0.5.0/primitives/#register-a-primitive

or resolve this in primitives.js.  I think that the DOM is returning the element attribute names using either lower case or whichever case the user happened to use, but there are a number of instances like "mappings[attr]" which is a case-sensitive lookup between the DOM attribute and the mapping name.

There is something about camelCase in addComponentMapping but it's not clear to me what this is.

- A-Frame Version:  0.5.0
- Platform / Device: all
- Reproducible Code Snippet or URL:

AFRAME.registerPrimitive('a-myNewComponent', {
	defaultComponents: {
		myNewComponent: {}
	},
	mappings: {
		width: 		'myNewComponent.width', // fine
		defaultColor: 'myNewComponent.defaultColor', // Should work, but fails
		lineopacity:	'myNewComponent.lineOpacity' // works if I do this
	}
})


 thanks!   I understand the reason behind not letting to change material properties of entities with MTL materials assigned (there may be several materials in one MTL etc.) but isn't it useful to be able to turn the model wireframe or change polygon rendering mode from to double-sided? At the moment visual inspector lets you change material properties but none of them take effect.

Besides this general question, is there a way to change the underlying material that was loaded from .MTL?

- A-Frame Version: 0.5.0
 @ngokevin Thank you. What about the first part of a question? Can it be considered a feature-request?  Hello,

some examples are linked to Glitch only where I'm not able to read clear license for the examples.
I prefer to use Github for local development and where I can find a clear license ( MIT ).

Is it possible to have all examples on Github too if someone like me do not want to use Glitch?

Thank you.
  Pointerlock would be really valuable for me, I'd be glad to help with the implementation!

Pointerlock on focus seems most natural to me. Mousedrag is a drag D; What if there are multiple Aframe scenes on a page, or lots of other content on the site to scroll through? The only other situation I can think of is if there is lots of content at the top of a page and an A-Frame scene at the bottom. The user could be confused as to why there is no pointer.

I am all for Pointer Lock, though. What is the current third-party component? I like this idea and think this really should be in by default.  It's painful to develop by dragging the mouse cursor around and really doesn't provide that great of an experience for desktop users checking out aframe experiences.

I know there exists some modules out there that kinda have done this, but they are flakey and unmaintained.  **Description:**

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
Aframe  image sky  display quality and the original agreement？  ... so there is no way to actually pass in empty string in distinguishable fashion (e.g. `{type:'string', default:undefined}` doesn't work since empty string BECOMES undefined)

codepen example http://codepen.io/machenmusik/pen/XRjYBO

note that it doesn't actually matter whether type is string or omitted entirely. use case: Vive tracker has `OpenVR ` id prefix, and empty string for hand.  this bug makes it impossible to actually pass in empty string to `hand` in `tracked-controls` to match properly.  see undesirable workaround in vive-tracker PR #2583  i am using videosphere on my project and have noticed high CPU usage in pc, usually causing heavy lags and on mobile, the mobile heats up really quickly and there is quick battery discharge due to this. is there any fix?

- A-Frame Version: 0.5.0 (Date 14-04-2017, Commit #417e890)
- Platform / Device: One plus 2 / Dell Laptop 4GB ram
- Reproducible Code Snippet or URL:



<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
    two questions to start:

what browser and os?
what font, and msdf or sdf?
 looks like the msdf shader is incorrectly applying opacity before discards... sdf shader looks right... can you confirm sdf is ok and msdf (default) is broken?  if so, easy fix. no, actually msdf is the default text font/shader...  can you try #2620 and see if it fixes for you?  worked locally for me (some more detail on default shader - because the default font is actually msdf, the shader actually used gets changed under the hood even when set to sdf) that was the result of discussions where only font that was msdf is the default one, every other font is sdf, and we didn't want to make everyone override shader as well as font.  maybe making default property something like auto-sdf would be clearer (pick sdf or msdf depending on font)  **Description:**
Example code did not align with example text
**Changes proposed:**
- changed 'light' to 'geometry' in description
- added necessary 3rd argument to example code
  What about using some threejs exporter?  Can observe it is momentarily shown before being hidden.

- A-Frame Version: 0.5 / master
- Platform / Device: Oculus Browser - Gear VR
- Reproducible Code Snippet or URL:
https://aframe-master.glitch.me Will do. How is it possible to debug this ? 
Does entering VR work for someone ? For me the Oculus Browser only shows an Window with the Scene. I tested aframe.io in the new Gear VR 2017 and the VR enter button disappears even before I can click on it to enter VR. The site loads, the button is visible for a brief moment, then it disappears. Mabye it has something to do with the mobile version / css of aframe.io
(Oculus browser)
 I investigated and it looks like if the exit-vr event is not triggered. I realised that because I listen to the exit-vr event on the scene and remove my grid component and it is never removed when leaving VR in Gear VR with controller. And the camera rotation is not reset after leaving VR. Maybe it has to do with the controller button click? @dmarcos  When loading a scene/page:
![screen shot 2017-06-07 at 22 18 57](https://user-images.githubusercontent.com/3025886/26909579-b58af476-4bcf-11e7-8c33-a91c1b310402.png)

If I touch the touch pad of the controller:
![screen shot 2017-06-07 at 22 20 27](https://user-images.githubusercontent.com/3025886/26909587-c2d22c9e-4bcf-11e7-981c-3fdf270ba266.png)

No output when entering or leaving VR mode. Yes, it is the current master. I put some debug statements into the exitVR method and it is never called. To me it looks like that the VR controller is exiting VR mode but a-frame still thinks it is in VR. That's why the camera rotation after exiting is the same angle as in VR before, and, of course, no enter VR button is shown. Yes, entering VR works fine. The Oculus Browser. I tried with #2707 but still no success. Is it possible that the click on the back button of the Gear VR controller is just not taken into account by a-frame? Any hint where I could debug in the code? No, it is never called. These were my debug statements (none of them were called):

```
exitVR: {
      value: function () {
        var self = this;

console.log('0');
        // Don't exit VR if not in VR.
        if (!this.is('vr-mode')) { return Promise.resolve('Not in VR.'); }

console.log('1');
        exitFullscreen();

console.log('2');
        if (this.checkHeadsetConnected() || this.isMobile) {
console.log('3');
          return this.effect.exitPresent().then(exitVRSuccess, exitVRFailure);
        }
console.log('4');
        exitVRSuccess();
        return Promise.resolve();

        function exitVRSuccess () {
console.log('EXIT VR SUCCESS');
``` Yeah, I use a remote console. @ngokevin should I test your fix? Or do you have a Gear VR at hand? I applied your changes but it did not work. Why would we fire onvrdisplaydeactive? We aren't unmounting. The spec seems pretty clear here.

> onvrdisplaydeactivate A user agent MAY dispatch this event type to indicate that something has occured which suggests the VRDisplay should exit presentation. For example, if the VRDisplay is capable of detecting when the user has taken it off, this event SHOULD fire when they do so with the reason "unmounted".

We are firing or should be firing onvrdisplaypresentchange

> onvrdisplaypresentchange A user agent MUST dispatch this event type to indicate that a VRDisplay has begun or ended VR presentation. This event should not fire on subsequent calls to requestPresent() after the VRDisplay has already begun VR presentation. Just tested the example from https://aframe-master.glitch.me and now the enter vr button does not disappear. Tested on Samsung Galaxy S7 with Gear VR 2 in Oculus browser. It does not work when testing https://aframe-master.glitch.me in Oculus browser, Gear VR with controller, Samsung Galaxy S7, at least for me (I reloaded the site a few times). The button still disappears after leaving VR and the camera rotation is wrong. Has the fix already been commited to the latest master? @weddingdj You are correct. I misread the issue title. When accessing the a-frame examples from https://a-frame.io (with a-frame 0.5.0) there was no enter vr button on Gear VR2 for me in the first place (couldn't enter vr mode at all).
When using a-frame master as in https://aframe-master.glitch.me, the enter vr button is shown, but disappears after exiting vr mode (as this issue title suggests). Sorry for my misunderstanding. The entitled bug still persists.   **Description:**

Video tags assume that autoplay/controls should be set if absent from video elements.
This seems to deviate from the expected standard as described here:
https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video#Attributes

`webkit-playsinline` is superseded by `playsinline` and should be set as well

**Changes proposed:**
- adhere autoplay and controls attributes if not set (do not automatically assume autoplay / controls is intended)
- check video tag correctly and set playinline where webkit-playsinline is set
  sometimes when running `npm run test:chrome`
this happens:
```
SUMMARY:
√ 825 tests completed
i 2 tests skipped
× 1 test failed

FAILED TESTS:
  a-scene (with renderer)
    × clock
      Chrome 57.0.2987 (Windows 10 0.0.0)
    AssertionError: expected 0 to be above 0
        at Function.assert.isAbove (node_modules/chai/chai.js:2405:35)
        at Context.<anonymous> (c:/Users/machenmusik/AppData/Local/Temp/tests/core/scene/a-scene.test.js:416:0 <- C:/Users/machenmusik/AppData/Local/Temp/472879a1449f76b792fa2ebcec1be11b.browserify:88162:12)
```  …across controllers

should fix #2606 
  looks like gearvr-controls still has the addEventListeners outside injectTrackedControls (that we reverted)  I recently started playing with A-Frame. Awesome tool! My favourite feature the inspector. Also the entity component system is so powerful.

As someone coming from React I had a hard time re-using existing structures e.g. a tree build out of a tree trunk and tree crown object. I found a repository with various examples, but I was wondering if this concept makes sense in the core.
Here my outcome so far: https://github.com/nikgraf/webvr-experiments/blob/master/a-frame/v3-forest/index.html#L11-L16

I was thinking about this:

```
<a-define-template id="tree">
  <a-obj-model src="assets/tree-crown.obj" mtl="assets/tree-crown.mtl" position="0 2.5 0"></a-obj-model>
  <a-obj-model src="assets/tree-trunk.obj" mtl="assets/tree-trunk.mtl" position="0 0 0"></a-obj-model>
</a-define-template>

<a-entity template="tree"></a-entity>
```

Does that make sense for A-Frame? @ngokevin that's awesome! Going to migrate my examples to that one.  It'd be nice if all of the inspector's styling was prefixed to prevent collisions from user styles. `button` -> `inspector-button`, etc.  Provides core support needed for iOS 10 HLS playback discussed in #1416.

Note that this leaves video flipped in Y dimension and also with B and R color channels reversed.
It is expected that corrections can be applied using custom shaders.
(Accommodating those corrections using the built-in shaders is outside the scope of this PR.)
 (Due to the current Mobile Safari CORS issue, this is a bit of a PITA to diagnose / address / test as the A-Frame page and the HLS content must have the same domain.) > Is that better than the video not playing at all?

Without this change, there is no way to make it work at all.
With this change, it is actually simple to use custom shader to fix flip and channel order.

So yes, this change is much better than the video not playing at all... see discussion in #1416
 ok, the switching could probably use a little better guard (e.g. auto-switch if it's a shader like standard or flat we know won't work) if you wanted to touch up the PR due to CORS issues with Mobile Safari, in order to test this, your HTML page must be in the same exact domain as the IDevice-compatible video content (m3u8 manifests and ts / aac files),  Subdomains will not work at present. How about play the live 360 stream from webrtc?  **Description:**

**Changes proposed:**
- links were generating 404 page error, after correction the problem resolved.
- proper reference was not given for "entity-component-system",hence added.

 Should I create a pull request there? ok.  There is a great locomotion solution out there called [Freedom Locomotion](https://hugerobot.itch.io/freedom-locomotion-vr) ([video](https://youtu.be/LiQJS8ir9sQ)) that can be implemented as a camera/hand-controls component.  **Description:**

- A-Frame Version: all
- Platform / Device: all
- Reproducible Code Snippet or URL:

While I know that the position, rotation and scale values if given for a single entity are simply forwarded to three.object3d() and I happen to know that three does sensibly apply these transformations in the proper scale, rotation, then position order, I could not find a clear (or any) statement in the aframe docs which confirm that. aframe aims to be understandable without three.js knowledge.

Perhaps just a sentence in entity initial paragraph, or in the Parent-Child transform section. I want to work on #2591 problem  The end effect of position, scale and rotation depends on the order in which these are applied. Please verify that the order is indeed scale, then rotation, then position (translation). Hi @P00jaT, I hope you are working on this. Feel free to work on this bug and create a PR, if you have any questions you can ask on #issues slack channel of a-frame (https://aframe.io/community/#slack). Keep us updated on this issue once you have made any progress.  **Description:**

**Changes proposed:**
- Fix the link for the vive requirements
  Hello,
The link "Vive recommended requirements" into the documentation is broken.
https://aframe.io/docs/master/introduction/device-and-platform-support.html#hardware-specifications

I think the page has been moved to https://www.vive.com/us/ready/

I did a pull request here: https://github.com/aframevr/aframe/pull/2587
  if gyro is disabled(default is enabled), user is only drag to rotate camera, user can't use mobile auto move, like this video demo
it is used for mobile device
https://youtu.be/Yysc7OlDbzw

you can use it and test it on mobile
```
<a-camera gyro-enabled="false"></a-camera>
```  Support for vive-tracker.

Handles quirk in Nightly where gamepad id strings are same for both controllers and trackers (either all `OpenVR Gamepad` or `OpenVR Tracker`), but hand properties are correct.

At the moment, applies a rotation correction to what gamepad API returns to make it behave more like Vive controller / natural expectations -- specifically, the rotation correction makes it so that the controller pose aligns with the corrected pose if you take the tracker, put it on top of the touchpad, and rotate so the LED-bearing protrusion points toward the strap / bottom of the handle -- but this may be removed pending discussions.

The rotation correction can be avoided by explicitly specifying zero rotation, e.g. `<a-entity vive-tracker="index:0; rotation:0 0 0">`

Uses tracker model from https://github.com/aframevr/assets/pull/22 with corrected pose orientation. per separate discussion, rather than using getGamepadsByPrefix, now uses controllers list from tracked-controls system (what is this new failing node test about?)
```
TypeError: exports.humanize is not a function
      at Function.formatArgs (node_modules\debug\node.js:93:24)
      at enabled (node_modules\debug\debug.js:99:33)
      at processPropertyDefinition (src\core\schema.js:88:7)
      at src\core\schema.js:39:24
      at Array.forEach (native)
      at module.exports.process (src\core\schema.js:38:23)
      at module.exports.registerComponent (src\core\component.js:355:26)
      at Object.<anonymous> (src\components\tracked-controls.js:18:28)
      at require (internal/module.js:20:19)
      at Object.<anonymous> (src\components\index.js:22:1)
      at require (internal/module.js:20:19)
      at Object.<anonymous> (src\index.js:70:1)
      at require (internal/module.js:20:19)
      at Context.<anonymous> (tests\node\test.js:32:18)
``` Yes this is definitely functional as is. The offset is not a big deal and honestly the controllers also exhibit "drift" between Firefox and the SteamVR interface, so I'm not sure it's anything specifically related to the trackers. (You can see this for yourself by pressing the system menu button rapidly on the touch controllers to switch between the Firefox output and the SteamVR system menu.) @dmarcos you were advancing an alternate with your spectator camera work, should this be closed? No I don't think it's a PR yet If there's a discussion happening around spectator cameras, I'd love to read it :) @NellWaliczek I haven't seen what @dmarcos is cooking up yet.  A Glitch version of an old codepen I did is here https://glitch.com/edit/#!/aframe-spectator-camera Was working perfectly, @kfarr and I were playing with it... not blocked AFAIK, but was sitting around working for months and never got merged, then @dmarcos said he was going to redo entirely as part of spectator camera work so I gave up on this one. Rather than fix the new conflict, I'd like to close this because @dmarcos has said that a separate PR will be done along with some spectator camera functionality.  But looking back here, I don't see either the new PR yet (and looks like @NellWaliczek is interested here too) or @dmarcos explicitly confirming...

Can core team confirm this is deprecated now so I can close?  Or close it yourselves?
Or if that is deferred for some reason, and we do actually want to merge this, let me know  if you like, you can take over #2583  if gyro is disabled(default is enabled), user is only drag to rotate camera, user can't use mobile auto move, like this video demo
it is used for mobile device
https://youtu.be/Yysc7OlDbzw alright, I'll resend a pull request  Several property types (`audio`, `asset`, `map`, `model`) expect to support either an id selector string (`#` followed by `id` value to match) or arbitrary string that is often a URL (e.g. `https://cdn.aframe.io/foo`).  

However, the code to handle the id selector string uses `querySelector`, which is stricter on id values than necessary (e.g. can't start with digit), and also looser on actual selector values than necessary (e.g. would allow resolution of class selectors and others).

Per discussion in Slack, the suggested resolution is to change the id selector string resolution to use `getElementById` which should resolve both being overly strict on id and being overly loose on selector.  e.g. `.getElementById(selector.substring(1))` -- and also to update the property type documentation to clarify what is actually supported. example: http://codepen.io/machenmusik/pen/rmNpjO  **Description:**
When using the fullscreen mode in Safari/iOS, the navigation bar stays active.

I am raising this as an issue here, as the WebVR Polyfill Examples are working on iOS, but aframe does not. So it doesn't seem to be an iOS problem.

I was investigating why it is not working with aframe, but the only difference I found is that the examples are calling requestPresent handing over a canvas object. 
`        vrDisplay.requestPresent([{ source: webglCanvas }]).then(function () {
...`

Can this be the reason? I tried to add a canvas and call with the source, but it didn't work...

Also interesting the comment:

>       function onVRRequestPresent () {
>         // This can only be called in response to a user gesture.

Is this ensured in aframe?


WebVR-Examples: 
https://webvr.info/samples/
WebVR-Example-Code:
https://github.com/toji/webvr.info/blob/master/samples/03-vr-presentation.html

-  A-Frame Version: 5.0
- Platform / Device: iOS/Safari
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I checked what happens if you go to Fullscreen with the WebVR sample, it wraps a fullscreen wraper div around the canvas and also changes the canvas size. Tried to do this with a listener when entering VR, but it didn't work:


        document.addEventListener("enter-vr", function() {

          this.fullscreenWrapper_ = document.createElement('div');

          var cssProperties = [
            'height: ' + Math.min(screen.height, screen.width) + 'px !important',
            'top: 0 !important',
            'left: 0 !important',
            'right: 0 !important',
            'border: 0',
            'margin: 0',
            'padding: 0',
            'z-index: 999999 !important',
            'position: fixed',
          ];
          this.fullscreenWrapper_.setAttribute('style', cssProperties.join('; ') + ';');
          this.fullscreenWrapper_.classList.add('webvr-polyfill-fullscreen-wrapper');





        this.fullscreenElement_ = document.getElementById("ascene");
        console.log(document.getElementById("ascene"));
        var parent = this.fullscreenElement_.parentElement;
        parent.insertBefore(this.fullscreenWrapper_, this.fullscreenElement_);
        parent.removeChild(this.fullscreenElement_);
        this.fullscreenWrapper_.insertBefore(this.fullscreenElement_, this.fullscreenWrapper_.firstChild);
        this.fullscreenElementCachedStyle_ = this.fullscreenElement_.getAttribute('style');
}

 I found a workaround (don't know how and if you want to implement this though):

3 things to do:

Change CSS for HTML and BODY and set a-scene fixed to 0

```
    body {
      overflow: scroll !important
    }

    html {
      position: relative !important
    }

    a-scene {
      position: fixed;
      top: 0;
      left: 0
    }
```

Add a div in body that makes the page larger
```
  <div style="height:150vh;">
        
  </div>
```


Add an eventListener that scrolls the page down on EnterVR:
```
        document.addEventListener("enter-vr", function() {
          window.scrollTo(0,document.body.scrollHeight);
        });
```

Now there is no menu bar anymore. You can still scroll up, but at least it has the same effect as fullscreen :) @derhuebiii 

I tried your workaround but nothing happens. Bars a still there. Do I need place the event listener on a special place in my HTML?

You put html twice in your css. This can be one right? Or has one of the htmls be somethings else.

Thanks for investigating this! 
  @rambambulli 
HTML in CSS only needs to be there once, it's a copy paste error.

The listener shouldn't matter where as long as it's loaded when pressing the VR Button.

Worth to mention my header looks like this:
```
<html>
<head>
    <title>My A-Frame Scene</title>
    <meta name="viewport" content="width = device-width, initial-scale = 1.0, minimum-scale = 1, maximum-scale = 1, user-scalable = no" />

    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
```


You could check two things:
1. is the event listener firing (check with console or alert)
2. can you scroll the page manually? in my case, if I open my code in Chrome (on computer), there is a scrollbar now and I can scroll down (but the aframe isn't moving). If not you might need to check the css overflow on your page.

I am testing with iPhone6SE btw. If this won't helpI will upload my example and send you the link to test if my code works for you.

(2. reminds me that this whole workaround should only be applied after a check if Safari is used to avoid unnecesary scrollbars) @derhuebiii 

thanks for your time. Now it works but when I move from vr to pano and back the a-scene is a bit smaller resulting in a white line on the bottom or on the right (depending on landscape or portrait of course)

The strange part is that when I place a bookmark of the scene on my IPhone start screen is works perfect. 

I'll keep on testing :(. Thanks @rambambulli Yes it is not a final perfect solution, more a quick hack. But it is something to work with and maybe build a solution.

For the start screen I heard that if you do this, iPhone allows "real" fullscreen. So this "hack" should even also only be activated in browser mode.

Maybe the aframe team can help on how to go on from here? As it is working in WebVR polyfill this sounds like an aframe topic for me, anyone from the team can point to someone who can have a look at this? Happy to support but this whole topic about identifying device and fullscreen seems a bit complex. > If you load your phone in landscape mode, the "pseudo-fullscreen mode" won't trigger. But, if you turn your phone back to portrait mode and then back to landscape mode, the "pseduo-fullscreen mode" will trigger.

Yes, that's correct, didn't realize that before. If this workaround would be implemented a "pop-up"/modal like we get when entering the VR mode in portrait mode that a turn to portrait and back helps would also help for that problem. Of course not optimal, but the best we might get currently with iOS...

It is the same for the WebVR samples I referred to above, another hint for iOS behaviour.  Using selectors for images / videos / canvas only works when the selector is by id (starts with `#`) although the selector syntax is more general.  This PR allows class selector (e.g. `.main-video`) to work as well. working example (using for with built version of PR)
http://codepen.io/machenmusik/pen/aWbpYb unfortunately, some assets don't work by id -- e.g. `<video id='1'>` will fail to be accessible via selector `#123`, Firefox / Nightly will throw errors. the standard querySelector behavior is to allow class and only return first (which may be only).  seems to me that aframe should respect browser implementation decision to allow and just pass it through abandoning this approach per discussion, in favor of better documented id selector or string requirement (and using getElementByID to resolve id)  **Description:**

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 sorry this wasnt an issue i typed and pressed enter, thot it was in the search bar but cannot delete this
i have no issue  This adds a triangle geometry as discussed in #2535.
It is specified by 3 vertices, `vertexA`, `vertexB`, and `vertexC`.

If there is nothing need to amend regarding to property names, default values etc., I will send a PR to add docs. Yes, I think it make sense since the other geometries are centered by default.
I have just added a commit for that. vertexA/B/C seems a little verbose.  i take it there is some problem preventing an array of vec3?  if so, maybe we should change that - I am thinking something like vertices or verts as vec3 array would be better, and that would give use plumbing to support strips and other more advanced primitives? @machenmusik 
I've considered using an array of vec3 also, but I'm not sure. JS array doesn't have fixed length, so either we need additional check on array length during input, or have additional specification on how to handle longer/shorter array. I think using 3 (or even 4) vec3 variables instead of using array is still acceptable.

Building strip or other geometries of course is a different case, and I agree array would be more suitable when the vertex input amount is varied or very large.

Let me know if I've missed anything. :) for just basic triangle this is probably fine.  my worry is that people will try to make thousands of these because they can't do strips and then wonder why performance isn't what it could be.  so i naturally jump to syntax that also would work for strips etc. > make thousands of these because they can't do strips

People probably will, as well as thousands of boxes and spheres too ;)
I guess that means we have to add strip and other more advanced geometries...

For now, I will leave it as `vertexA`, `vertexB`, and `vertexC`. Documentation is added. Also found out my initial implementation has no UVs, so I added some code to compute a sensible set. Rebased on top of master to trigger a TravisCI build. Bump ;)  I'm trying to load a model with a material applied to it using the example from the docs https://aframe.io/docs/0.5.0/components/obj-model.html

However, it seems that material is not being applied and the warning is shown in the javacript console:

`components:obj-model:warn Material component properties are ignored when a .MTL is provided` 

I've also tried to run example from this repository (`examples/test/model`) and the above warning is also shown. Textures are applied correctly, but when I remove texture from .mtl file (`map_Kd crate.jpg`) the material described in .mtl seems to be not applied.

What exactly does the above warning mean?


- A-Frame Version: 0.5.0
- Platform / Device: Google Chrome

  Just digging into this and redux thanks to this bug and the blog post (thanks!).

So I'd like to suggest that there should definitely be discrete state machines, with their own state object, below the level of scene.

I anticipate wanting a tag like` <activity/> `with a free standing game or interaction that users might approach and interact with at a level below the whole scene. It might even have a collision field associated with it to start and stop it as you approach etc.  Robustness tweaks for tracked-controls
- if matching hand filter supplied to isControllerPresent, and gamepad provides no hand, use DEFAULT_HANDEDNESS for matching purposes
- defend against missing pose
- allow system-level specification of id prefixes that should always be included when present in controller list, e.g. if pose is sometimes missing the line in question:
`If the hardware cannot supply any pose values, MUST be set to null.`
You and I read that differently.
For example, if the controller is paired but currently disconnected, then the hardware cannot supply any values, and pose must be null.  Even where gamepad must have worked at one point, this can happen if your batteries run out.  The guards are to ensure that A-Frame survives cases where pose is null even if only temporarily, rather than throwing errors that prevent correct processing. if 6DOF controllers leave the tracking volume / frustrum,
would they have null pose?
or would.they have orientation (from accelerometers), but null position?
 would be good to understand what browsers actually do including previously mentioned exceptional cases.
if all browsers interpret as you say, i don't know how some of these conditions are detectable (e.g. if there must always be a pose, then what pose values should be provided while disconnected?)  Just looking through the source it appears A-Frame is still using the old "v0" Custom Elements API, which is only natively supported in Chrome. The newer v1 API is now natively supported in Safari, Chrome and has support from Firefox and Edge. Native support in mobile Safari should make initializing large scenes faster. @ngokevin Custom Elements v1 is way more supported than Custom Elements v0 which you're currently using. Safari, Firefox and Edge will never support v0. I'll take it to #567, since I wrote the v1 polyfill.  you still need the hand filter, for cases where it gets passed down (e.g. hand-controls="left" should only match daydream-controls if left hand) -- did you want to make it so default hand is empty that would be accepted for any hand? it's not just hand-controls.  shoot-controls for a-blast is handed.  in a-paint, paint-controls (I think) is handed.  goes back to the whole top-down declarative vs. bottom-up assembly discussion.  because of the original paradigm and examples, most apps out there declare what they want to see like hand-controls, and deal with what ends up getting populated.  if you want to be able to use daydream-controls without filtering on hand, that is easy, but that is kinda the opposite of what this PR does (removing filtering and forcing incompatibility) the commit only removes from docs, if you want to allow default to accept either hand, I think that change needs to be made to `src/components/daydream-controls.js` right? The existing daydream-controls implementation is based on oculus / vive / tracked-controls core components (most of which predates my involvement, so others may need to weigh in on earlier context).  Those have all leveraged the same structure: 

tracked-controls handles the real interfacing with gamepad API, and has schema values that let the app filter which controller the component should bind to and represent.  (I have generally described that that the top-down approach, where the user specifies what they want, and if present the components do appropriate bindings.)

higher-level components (e.g. oculus-touch-controls and vive-controls ) are allowed and indeed encouraged to be multiply specified, and only those actually present are bound using tracked-controls.

The approach you are suggesting (remove the hand property, have the component use what it provides to you) is what I generally describe as bottom-up approach -- which was previously rejected when proposed w.r.t. oculus and vive, specifying multiple options explicitly was deemed preferable.

In your proposal, not only would you remove the hand property, you'd also want to expose the hand through the component in use -- which is actually what the hand property provides for?

> 2, Specifying both hands is confusing (solution to problem 1):
> `<a-entity daydream-controls="hand: left"> <a-entity daydream-controls="hand: right">`

Actually, I believe we proposed that to allow either hand to match depending on what was actually exposed via gamepad API, the usage should be what you stated was preferable:

> `<a-entity daydream-controls>`

by keeping the hand property, but having it default to a value (either blank, or "either") that would simply omit the hand filter given to isControllerPresent.

In that case, the natural behavior is as described as preferable, but also a specific hand filtered binding can still be specified.
 Using a specific example to illustrate...

Let's say that by necessity and design, I have a separate model for left hand and right hand, and I'd like to use declarative specification to accomplish the following:

1. If I don't have a Daydream controller available, don't show either hand model.

2. If I do have a Daydream controller available, use the correct hand model based on whether the system decided that the Daydream controller represented left or right hand.

If we remove the hand property, there is no way to do this with `<a-entity daydream-controls obj-model=...>`.

If we keep the hand property to use as filter, then this would be done the same way as with oculus or vive:
`<a-entity daydream-controls="hand:left" obj-model=(details for left hand model)><a-entity>`
`<a-entity daydream-controls="hand:right" obj-model=(details for right hand model)><a-entity>`
and only one of the entities would actually get the controller.

In the case where the model is the same (e.g. a sword or pistol that looks the same regardless of hand), then the preferred specification in both scenarios is presumably the same...
`<a-entity daydream-controls obj-model=(details for non-specific model)></a-entity>`
so I am unclear as to the benefit of removing the hand property altogether.
  - A-Frame Version: 0.5.0

Don McCurdy asked me to file this as a bug. The community needs a more thorough documentation of materials and shader development for aframe. 
Robust, useful, and well documented examples to use as a jumping off point
Documented tutorials and walk throughs of the process
Coverage of the current methods and deprecating any outmoded examples in the current docs
Explanations of the different approaches and why to use which ones - when to use a component, etc.

 If it's to wrap an existing three.js shader to make it usable in AFrame as a component, it would be great to take mesh_standard and maybe a toon shader?
If it's to demonstrate writing one from scratch a good phong is a great boilerplate and jumping off point. People can extend Phong pretty quickly to do novel things.
 Actually meshStandard is only partially implemented - there is no lightmap support for instance. Also - if I were to do it I would reveal the shader attributes to the component interface with the same names. I understand that 'src' is a standard web dev attribute, but in the underlying shader it's 'map'. But aside from that - yes - show how to wrap the other three.js shaders so that when new ones are introduced it's easier for the dev community to make it available to designers and artists. The noise example is great - clean and to the point. It's a lot easier to follow than some other shader examples I've seen. The inclusion of time is a good addition and very instructional. It would be great to show an example that took each of the different types of attributes - float, vector, color, image, etc., and then had comments (over)explaining their implementation - what goes where and why.

I would agree that external dependencies may be best left to more advanced examples.

The noise shader reminded me of a shader I wrote for Unity that takes a sequence of images rendered of an explosion in Houdini, but looking in from the surface of a sphere (like an inverted pano render). By encoding z-depth and color into the frames I was able to "recreate" the explosion on a poly mesh sphere where the vertices and the color were changing according to the actual rendered simulation. The missing chunks for me here are how to pull in an image for the texture atlas, or a movie file, and floats and vectors for control parameters.   - A-Frame Version: 0.5.0
- Platform / Device: iOS Safari
- Reproducible Code Snippet or URL:

https://aframe.io/examples/showcase/360-image-gallery/ on iOS

```
// Add this to any entity, taken from 360 example
sound="on: click; src: #click-sound;"
```

Any attempts at playing a sound using the `sound` component by leveraging `fuse` on the cursor to trigger the `click` handler does not work.

This shouldn't be the case. The user has made an explicit action/gesture to start audio. That's the only documented rule for iOS, so the implementation under the hood should be the issue to my knowledge. Problem is, the "explicit" action is staring in one place for an extended period of time, which Apple doesn't consider a user gesture.

**Docs:**

- https://developer.apple.com/library/content/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW1

- https://developer.apple.com/library/content/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html#//apple_ref/doc/uid/TP40009523-CH2-SW1

This is different than autoplay audio, which is an issue with the iOS Safari implementation (imo) and not within the scope of this discussion.

The same code does play audio when downloaded to the homescreen. That's okay, but a considerably worse user experience that I'm currently not interested in.

_**Update**: Realized the issue is using `fuse`. Fuse doesn't propagate the same way a click does and therefore doesn't count as a user gesture. Updated the title + description. Worried the best that we can do is update the docs to warn that `fuse` causes audio to not trigger on iOS._ Also relevant https://www.ibm.com/developerworks/library/wa-ioshtml5/#N101DA

It feels like as long as `audio.play()` is within an event handler for `click` this should work but I'd imagine the issue is that we programmatically trigger the `click` event for `fuse` and Apple is smart enough to not count that. Is this true? @ngokevin very fair. Thank you!  - A-Frame Version: 0.5.0
- Platform / Device: Safari
- Reproducible Code Snippet or URL:
```
components:sound:warn All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute. +7s
```

How do I trace back this warning a specific entity? All I know is that it's some entity that has a sound component. 0 identifier being given and in many instances there are too many entities to reason out which one it is. @ngokevin awesome! Thank you.  I'm using the look-controls component on a Pixel C tablet and noticed that I can only pan left to right when dragging the screen around. This is also happening on the Hello WebVR example. 

On a related note, when I switch over to full screen/cardboard mode, the example has access to the Pixel C's gyroscope and responds accordingly.

I should have access to the gyroscope by default (like the way it's being handled on a pixel phone) but it's currently not the case.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome / Android / Pixel C
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/ I also have the same issue on iOS and Chrome mobile sims. @dmarcos Is there an option to turn it on?  What would be the best solution if some of the mobile browsers don't support gyro within aframe? (can I turn it into drag control mode with a button or automatically)  Sounds reasonable. We store specific objects likes `vec2`, `vec3`, and `vec4` anyway. I don't see why a more broad `object` `type` would be bad.   I tried loading various glTF models but they never render right when I go into VR mode on the Vive.  They are in the correct place in space, but the location in the two eye views is very different so they are impossible to fuse.

This happens both with my own models and with models from [glTF examples repository](https://github.com/KhronosGroup/glTF-Sample-Models).

In the super simple example linked below the duck is on top of the plane in a regular webgl view, but is way off when you go into VR mode.

Perhaps related, when I go into the inspector the glTF models don't rotate with the rest of the scene and don't update when they are transformed.  I suspect they aren't being correctly added to the scene by the loader (or something).

- A-Frame Version: [0.5.0](https://aframe.io/releases/0.5.0/aframe.min.js)
- Platform / Device: Vive
- Reproducible Code Snippet or URL: [http://pieper.github.io/sites/gltf-question/](http://pieper.github.io/sites/gltf-question)
[source code](https://github.com/pieper/sites/tree/175aad3eadd62fdf9a339c24d4a1daefa65acaf9/gltf-question)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

 @dmarcos Thanks for checking, yes, brainstem model works.  But the ones that fail are not just my own models, I'm testing models from the glTF repository and they all seem to have the same problem.

The example uses the [the duck model](https://github.com/KhronosGroup/glTF-Sample-Models/blob/master/1.0/Duck/glTF-Embedded/Duck.gltf) from the glTF site.

I updated the page to include brainstem and the duck next to each other and they look fine until I go into VR (on Vive) or into Inspect mode.  http://pieper.github.io/sites/gltf-question
 Thanks @donmccurdy!  That looks like exactly the issue.  I'll doublecheck and then close this. Confirmed.  Thanks again.  **There is any way to use accelerometer and gyroscope values in aframe from an arduino**
*The arduino side is ok , getting values from serial,so next i need to give this value to aframe .



 how the aframe get accelerometer and gyroscope values when we using it in mobile , so can i give the values externally if am using computer....?  **Description:**

documentation update

**Changes proposed:**
- added missing closing tag in a-collada-model documentation
  Currently, you can use the following to invert the scroll direction of a camera on desktop:
`<a-entity camera look-controls="reverseMouseDrag: true"></a-entity>`

This, however, does not work on mobile; it would be useful to have a `reverseTouchDrag` option for mobile.
 I have done it in my fork, branch: project-custom-0.5.0 and find keyword reverseMouseDrag. It's simple to add condition **What about this** (shorter code) ? @ngokevin @dmarcos 

```
var modifier = this.data.reverseMouseDrag ? -1 : 1;
rotation = {
  x: ( radToDeg(hmdEuler.x) + radToDeg(pitchObject.rotation.x) ) * modifier,
  y: ( radToDeg(hmdEuler.y) + radToDeg(yawObject.rotation.y) ) * modifier,
  z: radToDeg(hmdEuler.z)
};
``` Proposed https://github.com/aframevr/aframe/pull/3761 @Utopiah Oh thanks, I tho this is added a long time ago. But still not? @l2aelba not AFAIK cf https://github.com/aframevr/aframe/blob/master/src/components/look-controls.js#L19 but I might be missing something @Utopiah I am not sure also. But I see something for **directions** in the doc.

https://aframe.io/docs/0.8.0/core/animations.html#attributes_direction

Long time I am using **aframe** :D
 @l2aelba that's related to entity animation (being replaced by the way, cf https://github.com/aframevr/aframe/pull/3678) and has no relation with look controls. @Utopiah Aha ! So thanks so much.  @Utopiah closing?  This PR, which includes #2538 in its entirety (and is intended to be merged afterward), should add support for the new 3DOF Gear VR Controller as proposed at https://webvr.slack.com/?redir=%2Farchives%2FC0EEECMA5%2Fp1490839724160554

Note that at time of this writing, this PR has not yet been tested on a supporting browser with supported hardware.  Once such testing has been completed, this comment will be edited appropriately. rebased, but will need changes when #2513 is merged rebased, onto latest master and also #2567 i am not sure whether it will work without it.  @mkeblx does it work with only the commits after "add gearvr controls", and if so are you able to say that for only Samsung Internet, or also Oculus Browser? removed portions from closed #2567 -- @mkeblx does codepen still work? fixed conflict with @ngokevin hand-controls changes got confirmation that this PR still works after removing portions of closed #2567.
if #2513 is merged before this one, I will update to conform.
otherwise, should be good to go Added controller model https://github.com/aframevr/assets/pull/20 (Thanks @840labs)

@machenmusik Something like below should work if you want to modify in this PR.
```js
buttonMeshes.trigger = controllerObject3D.getObjectByName('Trigger');
buttonMeshes.trackpad = controllerObject3D.getObjectByName('Touchpad');
// Offset pivot point # can be removed
// controllerObject3D.position.set(0, 0, 0);
```
Note: Pivot should be not needed, set to center of trackpad like pivot on Daydream controller location.
 @mkeblx updated to use your model (I hope).  Does http://codepen.io/machenmusik/pen/QvLjbx still work and do you see the new model? Yep looks good! 

![com oculus vrshell-20170413-202106](https://cloud.githubusercontent.com/assets/293795/25032234/482d1094-2087-11e7-8b82-7d5dec4915eb.jpg)

(and the touched: undefined is only after exit out of Presenting; only accessible when presenting)
 @mkeblx niiice!  one more to try -- we're trying to land #2513, this codepen brings this PR into line with that one, does it work as well?  http://codepen.io/machenmusik/pen/Gmgmgw Yes that works.  (sounds like images will work more like canvas and video now)  cross-env 4 is stable in my projects.  **Description:**
If I use 'a-animation' on an object using a cursor to trigger it on mouseenter and mouseleave, this works in principle. After running the animation the first time there is a problem when I only "very quickly" hover over the object. It jumps suddenly to the scale set in the first animation in "to". 

You can check this error on first starting the animation and hovering out. Then quickly hover over the sphere and move again away from it. [JSFiddle](https://jsfiddle.net/c4cu639d/7/)

Does not appear when waiting until animationend.

```
  <a-scene vr-mode-ui>


      <a-sphere position="0 0 -5" radius="1" color="red">
        <a-animation begin="mouseenter" end="mouseleave" fill="forwards" repeat="0"
         direction="normal" attribute="scale" from="1 1 1"
         to="3 3 3" dur="1000"></a-animation>
         <a-animation begin="mouseleave" end="mouseenter" repeat="0" fill="forwards"
          direction="normal" attribute="scale"
          to="1 1 1" dur="1000"></a-animation>
      </a-sphere>


    <a-camera id="camera">
      <a-cursor color="#4CC3D9"></a-cursor>
    </a-camera>


  </a-scene>
```

- A-Frame Version: 0.5
- Platform / Device: Chrome
- Reproducible Code Snippet or URL: [JSFiddle](https://jsfiddle.net/c4cu639d/7/)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 @ngokevin this can be closed, I believe. I'm able to repro behaviour in 0.5 but not in 0.7.0. (maybe @derhuebiii would like to confirm.)  Is there a way to use a custom fragment shader for a material? If not, this feature should be added.  If so, the documentation should specify it.

I'd be glad to work on either. Thank you @donmccurdy that example is great! Maybe we should document its existence?  **Description:**

Since assets do not load well when the html page is not served from a server, let the user know in the form of a warning.

- Fixes #2533  **Description:** This PR adjusts the documentation for installing MagicVoxel on macOS so that it is accurate for the latest version of macOS, Sierra. 

**Changes proposed:**
- Update screenshot of the **Security & Privacy** settings panel.
- Adjust MagicVoxel documentation so that the installation steps are accurate for the latest version of macOS, Sierra.
- Add link to official Apple [documentation](https://support.apple.com/kb/PH25088?locale=en_US) on unidentified developers.
  This PR adds support to `tracked-controls` for non-6DOF controllers, for example the Google Daydream controller, by using camera position and a primitive arm model to emulate positional data.  As they should now be supported, this PR also adds `daydream-controls` and `gearvr-controls` alongside `oculus-touch-controls` and `vive-controls`.  Lastly, it includes support for allowing zero-DOF controllers, for example Gear VR Touchpad, by using camera orientation (disabled by default, but enabled for `examples/showcase/tracked-controls/` since otherwise that does nothing in zero-DOF cases). is there a need to back it out?  won't do anything unless you explicitly enable zero-DOF, and then you presumably want it to do something (with the current trackpad) if we think that 0.6.0 will be shipped before the GearVR controllers are available, I would agree.  but the controller release is happening quite soon (3 weeks from now) ok, let me see if i can split into this PR for controllers we can exercise now (Daydream; any other 3DOF gamepads?) and a separate one for GearVR once we can confirm with those.  Ideally we would be able to confirm support to be available before or at launch, not afterward.  (The existing code in this PR may just work.) (got the change in between reboots.) handedness: yeah we discussed just above, https://github.com/aframevr/aframe/pull/2538#pullrequestreview-30922825

laggy/slow - when I was using, there was a bit of delay after doing daydream enter-vr dance and then it would settle down to be fast.  what were you using, got a URL / codepen / glitch / etc.?
 (if you are using more complicated models with daydream controller, daydream GPU is still way worse than any desktop so you may be running into scene complexity issues?) @dmarcos mentioned yesterday that three.js does the same thing so doesn't seem like A-Frame has much to do with it (maybe browser) yes that was the conclusion @dmarcos and I came to yesterday (perf not us, hand --> defaultHand) -- looks like some editorial nits but very close now ok?  Due to unfortunate name collision, add empty touches array to avoid Daydream error in TouchPanner.  suggest a new key in the schema to indicate whether to be used when single property is given -- can't use default since that refers to the default value.  maybe `singleProperty` -- and if no schema property has that set to true, then single property syntax is not allowed for that component.

```
schema: {
  position: {type: 'vec3', default: {x:0, y:0, z:0}, singleProperty: true}
}
```  this is a request for a new primitive, the triangle. It can be used easily in scenes with houses in it.  Related: #2700   **Description:** calling `el.setAttribute('mixin', 'some-new-mixin-id')` on an element that already has a mixin attribute with a value does not swap out the existing mixin with the new one.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome 57 macOS
- Reproducible Code Snippet or URL: http://codepen.io/anon/pen/zZMXrG Weird. Going to try and fix it. 👍 . Thanks! Looks like it is changing the `mixin` property on the element but not the actual traits that the `mixin` has.

```html
<a-plane id="plane" mixin="zero" 
color="blue" position="0 2 -5"
 width="5" height="5" 
rotation="" scale="" 
visible="" material="" geometry=""></a-plane>

<a-plane id="plane" mixin="fortyfive" 
color="blue" position="0 2 -5" 
width="5" height="5" 
rotation="" scale="" 
visible="" material="" geometry=""></a-plane>
``` Oh thanks @ngokevin. So the component data doesn't update. But it should still update the scene right? Is this not working because the invoked `setAttribute` method is on the html node and not A-frame's `setAttribute` method? And the component data doesn't update when using it from the link @ngokevin sent. Also instead of `setTimeout` don't we use the `tick` method instead? I ran into this issue as well. I thought, "well that's fine, I'll just go fix it". I think I know what is happening now, but I do not think I have enough knowledge of the rest of the A-Frame internals to know the best way to go about fixing this. If the below is useful, great. If it suggests a path to a solution that is easy to explain I'd be happy to take a shot at making a PR, but at the moment it seems to me that a solution would need to go deeper than my level of understanding. If neither is the case, then this is just my documentation of my first foray behind the A-Frame [a-]scene!

My trail started in [a-entity.js](https://github.com/aframevr/aframe/blob/050cbaf249ec34bb378a3a3c304a4fe6e71c069b/src/core/a-entity.js#L459):
```
  updateComponents: {
...
      for (name in componentsToUpdate) {
        data = mergeComponentData(this.getDOMAttribute(name),
                                  extraComponents && extraComponents[name]);
        this.updateComponent(name, data);
        delete componentsToUpdate[name];
}
```
When `updateComponents` runs after changing the mixin id, `this.getDOMAttribute(name)` is returning the value of the attribute with mixins included. Thus `mergeComponentData` is giving precedence to the old mixin values and the new ones (contained in `extraComponents`) never get written. The comment on `getDOMAttribute` [here](https://github.com/aframevr/aframe/blob/050cbaf249ec34bb378a3a3c304a4fe6e71c069b/src/core/a-entity.js#L727) suggests that it should not be including mixins. 

The only relevant difference here between `getDOMAttribute` and `getAttribute` (which by its comment _is_ supposed to include mixin values) is that they look at `this.attrValue` and `this.data` respectively. However setting a mixin calls `updateComponents` which calls `component.updateProperties`, which updates both `this.attrValue` and `this.data`, so `this.attrValue` gets populated with mixin values, which looks to be incorrect.

So, assuming the above is correct, I'm not sure where to go from here. The comment on `getDOMAttribute` would suggest that we don't want to use `updateProperties` when updating a component with mixin values, but we do need to update the component's `data`, and I'm not sure how best to do that without `updateProperties`. Do we need a whole separate update path, starting with [the loop](https://github.com/aframevr/aframe/blob/050cbaf249ec34bb378a3a3c304a4fe6e71c069b/src/core/a-entity.js#L429-L433) in `updateComponents` which finds all mixin attributes? But then it seems like `updateProperties` is doing a lot of other useful stuff that should happen for mixin values as well. I'll stop speculating on things I don't yet understand.  **Description:**

Fix for issue #2366 

**Changes proposed:**
- Added a note to to the documentation about how `appendChild` is async, and a possible workaround. 

  **Description:**

I was giving an A-Frame talk and wanted to show the Inspector… Could not make it because I didn't have a working network connection. At that time, I didn't know that the Inspector was being pulled on the fly, and the "Loading…" message was being shown indefinitely, no errors on the console, and I found it confusing.

This shows an error message in the "loading" magenta button when the injected `<script>` tag fires an `error` event.

**Changes proposed:**

- Add an `onerror` event handler that shows an error message in place of "Loading…"

  Continuing on this question #2518 using A-frame **version 0.5.0**, I would like that there is an option to enable databinding using Angular 2 or React in a next version of A-frame. 

In my opinion is the performance a little bit better when you're using databinding related to write if by yourself. Because not experienced programmers doesn't always think about the performance of JavaScript.

By using always `document.getElementById` for a lot of controles, the HTML DOM must be inspected every time and not performance at all. For anyone finding this issue as of July 2017 onwards who might still be interested in the full picture: it doesn't work.

A-Frame components are impervious to Angular 2+ binding – it just does nothing in almost every case. The [Angular2_VR_Starter](https://github.com/brakmic/Angular2_VR_Starter) project that @ngokevin mentions doesn't make use of data binding whatsoever, and the lengths to which the author went to simply load up a scene using Angular as a basic launch platform are quite extensive. Angular feels less.. "familial" in the context of this app – more like a creepy uncle.

On a side note (just reporting from personal experiences), Angular 1.* doesn't exactly play nicely with A-Frame WRT data bindings either; a lot of them will _work_, but most of them present quirky issues with seemingly no remedy when used in real scenarios. Upgrading to my 1.* app to 4.* was my troubleshooting step for this since Angular 2+ seems much more "React-y" than its predecessor; turns out this is a misguided assumption.

> I don't know what's needed to work with Angular 2, or maybe it does work.

Perhaps it's time to consider removing Angular from the list of libraries under [this page/section's "Tool agnostic" subheading](https://aframe.io/docs/0.6.0/introduction/#features)? It works great with React (which is a solid achievement!) but there doesn't seem to be any interest from the A-Frame side in investigating compatibility with anything else but React (if I'm interpreting this thread correctly). Putting Angular and React in the same list seems more misleading the more information we have. Yup, it just suffers from too little ROI. What was done in that integration was really quite clever, but really just the bare minimum of what A-Frame can offer and not much room to go upwards.  **Description:**

- A-Frame Version: 0.5.0 (on master)
- Platform / Device: Chrome Desktop, Firefox Desktop
- Reproducible Code Snippet or URL:  Example:  Text Anchors

"Failed to execute 'requestFullscreen' on 'Element': API can only be initiated by a user gesture."  **Description:**

In some cases a component can be created and unmounted before it has fully finished loading. This leads to errors when the entityLoadCallback tries to access the isPlaying property of the parent element (as it no longer exists).

![screen shot 2017-03-24 at 11 23 43](https://cloud.githubusercontent.com/assets/6763606/24294923/7186f9f2-1090-11e7-8ba5-8f8e42c480cb.png)
![screen shot 2017-03-24 at 11 24 04](https://cloud.githubusercontent.com/assets/6763606/24294924/71880022-1090-11e7-9a0c-39604c5ce7c9.png)


**Changes proposed:**
- Check for existence of entity parent
 @ngokevin - Sorry for lack of response (I was swamped with work stuff for a bit). Thanks very much for adding the test / fixing.  you mean should be able to override base URL, right?

https://github.com/aframevr/aframe/blob/master/src/components/oculus-touch-controls.js#L5
hmm, `vive-controls` doesn't have a base URL.

There is a larger question here, IMO, of whether all of the cdn.aframe.io links that core components use should be able to have their base URL redirected for offline use, not just the models for tracked controllers (e.g. fonts) is it enough to export the base URL variables for whatever components need to do this? (this is easy enough that we may want to find a willing first-time participant looking to jump in) then you have to do it for left and right, obj and mtl, per instance... seems pretty tedious... and needs to be done for `hand-controls` too either way. not worried about schema, just that there are multiple urls that all need to be overridden together. for the static use case, the filenames would all be the same, just need to change the base URL to something local. more insidious is the case where someone is using `hand-controls` and not directly specifying oculus or vive... need to override for all instances, which putting in schema won't accomplish. yes but the use case mentioned here is how to embed the stock models for self contained usage.  in that case really you would need other cdn.aframe.io files as well Hi @dmarcos @machenmusik @ngokevin, is this issue still being discussed? If not, can you please summarize how a newbie can work on this?

Thanks :-)
 Hey everyone! I am a new contributor and am looking for some issues to work on.  This one has piqued my interest and I would be open to understanding how I can help.  I noticed that there was a comment by @machenmusik that it is easy enough for a first-time participant to tackle it.  

How can I help?  **Description:**

The AFRAME.utils-Function "deepEqual" causes an Infinite-Loop leading to a Maximum Call Stack Error when a Component-Property is updated under the following circumstances:

--> The Property is an Entity (e.g. when Property-Type is "Selector" and an Entity has been loaded and needs to be compared for differences using deepEqual).

Since an Entity contains references to itself, deepEqual will end up comparing the same things over and over, resulting in an infinite loop.

- A-Frame Version: 0.5.0
- Platform / Device: All.
- Reproducible Code Snippet or URL:

SAMPLE-COMPONENT:

```
AFRAME.registerComponent('reproduce', {

    schema: {
        object: {type: 'selector', default: ''},
        other: {default:false}
    },

    init: function () {},

    update: function (oldData) {},
});
```

SAMPLE-HTML:

```
<a-scene>
    <a-entity id="test"></a-entity>
    <a-entity reproduce="object:#test; other:false"></a-entity>
</a-scene>
```

Steps to reproduce:
1. Load the Scene with the component
2. Change the Property "other" to "true"
3. Infinite-Loop happens
  **Description:**

#2497

**Changes proposed:**
- Expose `material.alphaTest` and `material.depthWrite` properties
- Sets `material.needsUpdate` `true` if `material.alphaTest` is updated (Three.js manner)
  Press `flashLight` button in example
Screenshot: https://gyazo.com/c6b620150e884cfc24fac9e9b9bb9d25

- A-Frame Version: 0.5.0
- Platform / Device: Google Chrome
- Reproducible Code Snippet or URL: https://codepen.io/Disorrder/pen/jBzExv

 @ngokevin what? You say that a-frame doesn't update values in attributes, but it does! 
Animation goes good, but after animation DOM attribute value is set to undefined!
I mean, fill="backwards" doesn't work as expected, it breaks light after animation! I expect that a-animation will set "from" value to attribute, but not undefined 
If you don't understand our need another example, please let me know  @ngokevin 
[example one](http://codepen.io/anon/pen/dpmpJP) with aframe version **0.1.3** - OK (example from [this page](https://aframe.io/docs/0.5.0/components/cursor.html#adding-visual-feedback))
[example two](http://codepen.io/Disorrder/pen/JWqWOx) with aframe version **0.5.0** - Animation bug!
Please, compare cursor animation and reopen this issue! It's critical in using standart `a-animation` component :(  Per discussion on #2423, this PR separates the axismove changes and omits the emulated property.

This PR extends #2413 / #2415 to oculus-touch-controls as thumbstickmoved, and also addresses spurious axismove events discussed in #2423. @cmvanb - we decided to close #2423 in favor of this PR, which should have the same benefits `buttonchanged` is a slightly different but used event; personally not in favor of `abuttonup`, `abuttonchanged`, `bbuttonchanged`, etc. due to being too close to the separately used `buttonup`, `buttonchanged`, etc. -- but it is of course technically possible by changing mappings here and also in #2446.  @dmarcos @ngokevin any more thoughts on this one?  hoping to get #2446 in as well, but this one first.

interested in outside perspectives on backward compatibility (whether the event names change is problematic for existing usage) -- I think right now most things use trigger / thumbstick / grip which aren't changing.   axismove events similar to #2413 / #2415 for oculus touch (prior commits were vive specific, which frankly we should really avoid where possible in future...) ```
This PR extends #2413 / #2415 to oculus-touch-controls as thumbstickmoved, and also addresses spurious axismove events discussed in #2423.
``` summing up recent comments - in `daydream-controls`, `everGotGamepadEvent` is in fact used in `onControllersUpdate`, which is more efficient.  `oculus-touch-controls` was not and so was checking for controller presence every tick, so changed it to stop doing that if `everGotGamepadEvent` (like the other controllers). > The analog buttons (triggers in Vive an Oculus) return duplicated touchstart / touchend events on a single press.

Hmm, if that's true it sounds as though real events are working correctly and we can remove the emulation stuff altogether?  Otherwise I would expect only some doubling... will look at suppressing actual when we are doing emulation.

> The tracked controllers example only shows one hand with Vive while it works with both hands on Oculus

That is the usual symptom of problems with gamepadconnected/disconnected issues.  Are you sure you tried the latest version including `d8ae5cc`?  When we were working on things this afternoon (notably the support-vive-tracker-dist codepen) I saw both hands with Nightly and Vive just fine...

I am thinking that given the apparently unreliable behavior of gamepadconnected/disconnected propagation, maybe those handlers should be removed altogether again for now (as you suggested in comments), and we should send (throttled) events to cause periodic check from system level.  If we don't throttle, we'll be in the scale-unfriendly pattern of each candidate controller component redoing its own version of checkIfControllerPresent every tick -- which is soon to be two hands times four controller components, and maybe five if you count vive-tracker. With vive trackers, i saw only one gamepadconnected fire on one of the vive-tracker components, in a scene with two actual trackers and two separate entities, each with one instance of vive-tracker set to filter for the right index.  Since only one instance received it, that was the one that realized it was present and decided to show up.

gamepadconnected doesn't know anything about index, so for that to work, the expectation is that the gamepadconnected event would propagate to all listening components, so they can do their own checks against the system controllers list.  If the two tracker connections were coalesced into a single gamepadconnected event, things would still work if that event fired when both were available via gamepad API, and if all the listening components actually received it.

can't use the codepen I had before as example since I committed the changes back to checking on controllersupdate. so I think we're good now, but you're probably gonna want to have GitHub squash when merging Since #2545 was merged first, I've incorporated the salient aspects of #2588 here now per discussion.  to fix Nightly issue with null stageParameters,
add camera userHeight if null stageParameters;
to keep tests working, only getVRDisplays when VR entered.

(NOTE: tried to move getVRDisplays from system into component where dolly is,
but got weird effect where right hand was applying offset but right hand wasn't,
so there may still be some strange race condition somewhere)
 Works well.  Tested in both Firefox Nightly and Daydream for 3DOF support. 

Prob want to squish the commits.

Thanks for the patches + reviews! (@ngokevin you can squash at merge time via Github, correct?)  #It would be very convenient to have methods to add and remove mixins using using Javascript in the same way class names are handled:

https://developer.mozilla.org/en-US/docs/Web/API/Element/classList

ie:
entity.components.mixin.add('');
entity.components.mixin.remove('');

Otherwise you have to manually manage the string.
 Yeah, that makes more sense rather than digging into the component.  👍  Since order is important, where would `el.addMixin()` add ?
Maybe `el.appendMixin()` and `el.prependMixin()` ?  **Description:**

It returns false in FF and Chrome, even if there is a Oculus DK2 connected and working.

- A-Frame Version: 0.5.0
- Platform / Device: Windows PC, FF, Chrome
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I still works, I don't know if it is officially supported. I just wanted to make sure checkHeadsetConnected() returns true.  Is it planned to support Daydream controller?
  (1) shouldn't this actually be done in the tracked-controls system that finds new controllers?
(2) shouldn't the type be the gamepad ID, if not the gamepad state itself?  I am not entirely understanding what this provides in addition to ongamepadconnected events, maybe it is simply the abstraction? would also like to understand the intended behavior in light of #2423 and #2446 e.g. what should be done if anything for emulated situations? if the general idea is to have the components re-emit their own version of `gamepadconnected` when they are going to inject, don't we also want something for `gamepaddisconnected`, and make it independent of 3DoF vs. 6DoF for example daydream controller and upcoming gearvr controller?  (maybe even gearvr touchpad to the extent folks continue to use that with Carmel?) @fernandojsg I see, so by `type` you really meant source component i.e. `oculus-touch-controls` or `vive-controls` which is not immediately obvious from the injected `tracked-controls`-- if we go back to the original decision to have all the different types of possible components attached, I think the pattern you are looking for is actually the `auto-detect-controllers` approach and then the particular injected component would be available through the standard eventing for new component addition, rather than only ambiguous `tracked-controls`.  Given the current decision there, it seems as though the injected `tracked-controls` should have some indication of source component, so you can tell that the parent of the injected `tracked-controls` is vive or oculus.  Does that sound like what you are looking for? > standard eventing for new component addition

Looks like there may be stale documentation
https://aframe.io/docs/0.5.0/core/entity.html#events_componentinit
https://aframe.io/docs/0.5.0/core/entity.html#events2_componentinitialized

If the name & id of the source/parent component doing the injection were available as part of as well as injected name/id/data, then this pattern would be generalizable to listening for and filtering `componentinitialized` which would be a nice solution.  Thoughts?
 Maybe no changes are required?
Have a look at `which-controller-present` in this CodePen...
http://codepen.io/machenmusik/pen/qroKWN > I've updated my PR with the component code of @machenmusik included directly on the tracked-controls . So we don't need that extra component and it's cleaner also as we don't need to remember to include that component. What do you think?

So where did we end up with this one after all?  Looking at it again, I think @fernandojsg proposal would work, and if other third-party components obey the `controllerPresent` convention, they could participate as well.

> I believe this is the case when you include directly tracked-controls instead of vive-controls or oculus-controls the specific controls inject tracked controls when the controllers is already available, but if you just inject tracked-controls by yourself you won't get 100% of the cases.

True but if you inject `tracked-controls` yourself (rather than letting `oculus-touch-controls`, `vive-controls`, `daydream-controls` etc. do their detection) then you should know what you are doing and not need the signal event to tell you.

> I imagine an entity wanting to subscribe to the controller but not use a tracked-controls component

For `oculus-touch-controls`, `vive-controls`, `daydream-controls` this is not possible as they rely upon `tracked-controls` for button / axis / pose update (and recording/replay takes full advantage of that fact). I'm not sure how that actually helps the original use case @fernandojsg was trying to solve (need to know whether oculus-touch-controls or vive-controls is actually connected) -- the upper level enjoys the abstraction of not having to know the raw gamepad id strings, but only the higher-level component abstractions,.. my recollection is that some components need to do their own filtering using getGamepadsByPrefix
... and also we only want the event to fire when things change, if we fire when isControllerPresent is true it will spam multiple times every tick. thinking about problems separately,

to solve "how do i know which component injected this tracked-controls" just add a string to schema that higher level components fill in with their name when injecting.  then you can read it even if you missed the event.

to fire an event when you see a new controller would ideally be gamepadconnected/disconnected from browser, but in practice i have not seen that work correctly so systems component would probably have to fire - perhaps on scene as we were discussing previously.  

but putting the two together is slightly trickier as for fernando's use case, you only want the event AFTER you can read which component injected.  So maybe fire event from tracked-controls schema update on that property. the less invasive change makes sense to me, bigger refactor if any can happen post-0.6.0 I think the event needs to fire only when this.controllerPresent changes state, not just when isControllerPresent would return true? and really the event should probably only fire after tracked-controls has been injected, so that anything from tracked-controls may be accessible? @dmarcos had suggested that controllerpresent handling be moved into tracked-controls (utils?) - maybe checkIfControllerPresent should move to utils in order to accomplish, and take a callback function to fire if changed (after which the event could be generated) where that callback may differ across higher-level components @fernandojsg if you look at the vive-tracker PR, you can see a change to the way tests are mocked -- just change the system controllers list to what you need it to look like i believe that due to issues with gsmepadconnected/disconnected propagation, that is still needed to reliably detect controllers, but would be happy to be proven wrong  When I open a scene in the visual inspector, add an entity via the UI and try to export the scene via the "Export to HTML" button, the default scene is exported and the new element is missing.
 Did you resolve it I am having same issue .  Thumbnail images we're not available as PNGs, only as JPGs.

**Description:**
Fixing broken images for users running documentation.

**Changes proposed:**
- Changing thumbnail image links to .jpg
![2017-03-17_22-21-54](https://cloud.githubusercontent.com/assets/5576685/24069231/3bc7b160-0b60-11e7-9e07-9fed6078b37f.png)
  **Description:**

When trying to create a raycaster, it refuses to emit the event that it intersected with an object. It seems to only work if I were to wrap sphere around box as well but then the far attribute of raycaster does nothing and continues to maintian infinite length. Just looking for a way for an event to trigger if box intersects sphere.

- A-Frame Version: 0.5.0
- Platform / Device:
- Reproducible Code Snippet or URL:
`<script>
    AFRAME.registerComponent('collider-check', {
        dependencies: ['raycaster'],
        init: function () {
            this.el.addEventListener('raycaster-intersected', function () {
            console.log('Player hit something!');
            });
        }
    });
  </script>`
`<a-scene>
        <a-entity position="0 0 4">
            <a-entity id="cam" camera></a-entity>
        </a-entity>

        <a-entity id="sphere" collider-check geometry="primitive: sphere; radius: .5" material="color: red" position="0 0 0">
            <a-entity raycaster="objects: .collidable" position="0 0 0" rotation="90 0 0"></a-entity>
        </a-entity>
        
        <a-entity class="collidable" geometry="primitive: box" material="color: blue; opacity: .3" position="-1 0 0" wasd-controls></a-entity>
    </a-scene>`

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I'm not entirely sure but what I found out was that the collider-check tag on the sphere created a raycaster with default settings on the sphere entity itself rather than using the parameters of the wrapped raycaster. I removed the wrapped ray caster and adjusted the raycaster on the sphere and it worked fine.

Sent from my iPhone

On Mar 17, 2017, at 2:53 PM, Kevin Ngo <notifications@github.com<mailto:notifications@github.com>> wrote:


Thanks for filing. I wonder if it's an issue with the collidable entity not being initialized in time the raycaster does its querySelector, even though the raycaster should be listening for attached entities. What happens if you swap the order, or remove the objects check?

—
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub<https://github.com/aframevr/aframe/issues/2501#issuecomment-287441753>, or mute the thread<https://github.com/notifications/unsubscribe-auth/ANWfLkJeM71iwN_JzLXATM5fOPsAYDgxks5rmtamgaJpZM4Mg95f>.
  **Description:**
This fixes issue #2412. The code(shown below) from the issue now returns true. If a type `vec2` or `vec3` is given, the normalization procedure should run `parse` and change it into an object with the correct coordinates.

```
<script>
  AFRAME.registerComponent('test', {
    schema: { v: {type: 'vec2', default: '1 1'} }
  });
</script>
<a-scene>
  <a-entity test></a-entity>
</a-scene>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    var e = document.querySelector('a-entity');
    var def = e.components.test.schema.v.default;
    var shouldBeTrue =
      JSON.stringify(def) === JSON.stringify(e.getAttribute('test').v);
    console.log('Are equal?', shouldBeTrue);
  });
</script>
``` 

**Changes proposed:**

`processPropertyDefinition` now runs `parse` on the default string values such as `'1 1'` into `{x: 1, y: 1}` and `'2 2 2'` into `{x: 2, y: 2, z: 2 }`. The function `parse` was labeled `parseCoordinates` to be more clear and avoid conflicting names in the file. Not sure if that was necessary though.

An error is given if the string does not have 2 or 3 values separated by an empty space. For example, `type: 'vec2` and `default: 1 1 1` would run `warn('Default value for type vec2 can only be 2 coordinates')`.  Yeah it was definitely hacky. I agree, probably the better solution is to have the default values be parsed correctly from the beginning. So would it be better if I made a utility function that checks if the `defaultVal` contains the correct values and then run it in `processPropertDefinition` if `typeName === 'vec2'` or if `typeName === 'vec3'`?
 Yeah. What are the different types and their default values? Would have to have to perform checks on all of them.  **Description:**
In order to fix issue #2494 
[THREE.PlaneGeometry](https://threejs.org/docs/?q=plane#Reference/Geometries/PlaneGeometry) docs

**Changes proposed:**
- add segments
  I missed this in renaming #2496  Let me take this. I think we should set `material.needsUpdate = true` in `updateMaterial()` if `alphaTest` value is updated, correct? :+1:  Was going to post this.  A new version has been released with some bugfixes for recent versions of chrome on android.  Created a PR on that fork: https://github.com/dmarcos/webvr-polyfill/pull/2  This one for example is fixed in 0.9.26: https://github.com/googlevr/webvr-polyfill/issues/202   I can't understand is there segments settings on the `a-plane`?
[a-plane](https://aframe.io/docs/0.5.0/primitives/a-plane.html#attributes_segments_width) primitive doc
[plane](https://aframe.io/docs/0.5.0/components/geometry.html#plane) geometry doc
Well, Three.js [PlaneGeometry](https://threejs.org/docs/?q=plane#Reference/Geometries/PlaneGeometry) has `widthSegments` and `heightSegments` and them works as expected

- A-Frame Version: 0.5.0
- Platform / Device: Google Chrome
- Reproducible Code Snippet or URL: https://codepen.io/Disorrder/pen/WpZqEJ

**UPD**: yep, there is [no support](https://github.com/aframevr/aframe/blob/master/src/geometries/plane.js#L13) for this attrs. Please, add them :)
  **Description:**
This PR fixes issue #2359. `div.a-enter-vr` extends across the window blocking cursor clicks / cursor grabbing events passing to the scene.

**Changes proposed:**
Changed css of `a-enter-vr`. Removed `height` and `width`. It seems like the `div` is only used for the button.
 Oops. Will fixed that. Thanks @ngokevin.  Now that #2484 has landed, we can begin to iterate on the node experience and make it better. This removes the need to mock `require` to ignore css requiring in node (which is a bundler-only feature). I changed to value exports instead of functions.

When adding tests. I found out that not only is `process` mocked by browserify/karma, all node globals are mocked (found by debugging chrome while karma was running). This meant I had to get a little more explicit with environment detection. rebased and updated.  Objects just in `a-scene` DOM are displaying good, but if wrap them into `a-entity` they disappear.

- A-Frame Version: 0.5.0
- Platform / Device: Google Chrome
- Reproducible Code Snippet or URL: https://codepen.io/Disorrder/pen/OpmWKJ @dmarcos [pug](https://pugjs.org) with no libs
@ngokevin thanks  so it seems that you want a separate component that will apply default user height like camera, and use that instead of default camera behavior?      After #2476 and #2477 were merged, it is now possible to run aframe in node. This is a regression test to preserve this functionality as aframe grows, and to iterate upon to make it run better in node. This is a partial solution to #2031, but there will most likely need to be more work.

I tried to put the test in `tests/` first, but it made the globbing [here](https://github.com/aframevr/aframe/blob/3b9d8f419d45f3167d0053208cab6fb557dd8b22/tests/karma.conf.js#L24) difficult because `tests/!(node)/**/*.test.js` kept ignoring the `tests/__init.test.js`. @ngokevin Renamed to "/tests/node/test.js". I figured it would clearer to call it test to know what it is doing. I can still rename it "index.js" if you desire.    mainly to have editors enforce the 2 space indents.  **Description:**

In version 0.3.0, non-visible entity does not interact with raycaster,

but in 0.5.0, non-visible entity still interact with raycaster,

any reason why this is such a case ?

my scenario is that I have multiple scenes with multiple control entities, with version 0.5.0, I can't simply set those not-in-the-scene entities non-visible.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome
- Reproducible Code Snippet or URL:

 I think it is important that the raycaster is interacting with non-visible entities. For example if I want to show the cursor (attached to the camera) when it is entering an invisible sphere, I want exactly that behaviour. So you can create user interfaces where the cursor only appears when the user can trigger an action. @ngokevin thanks kevin

Which `el` is it in this case? I did `AFRAME.scenes[0].querySelector('[raycaster]').components.raycaster.refreshObjects();`
works well.

hope it helps.  **Description:**
This PR fixes #2450. Just a minor change in the function name. The function isCoordinate should be plural. Modified to be areCoordinates.

**Changes proposed:**
isCoordinate was modified to be areCoordinates I see what you are saying. Would it not be better to be consistent with good grammar when naming functions though? I suspect that although the other functions are named `isXXX`, they are grammatically correct. I feel like that would be more intuitive for other users that are using A-Frame when they are building their own apps to have function names to be grammatically correct. 😄  @dmarcos I would argue that developer ergonomics should be considered as well. When I first saw `isCoordinate` on the `AFRAME` global, I had to second guess and look up the docs/implementation. I didn't know if it was testing a single number or a string of numbers. Eliminating that confusion would be worth it IMO. Can you link to the type definition? I can't find it in the source. @dmarcos The more I think about it you are right, `areCoordinates` sounds like it might take an array as a param or multiple params to test them all. @kellyselden Good point. It does sound like you would input more than one set of coordinates if you have `areCoordinates`. 

@dmarcos Yeah you're right. Will change it.  When I rotate an entity it sometimes comes back with an e-notation number. For example, the number coming back was:

`-71.99999999999999 62.074139506678954 -1.5056867448590336e-22`

This number isn't recognized by isCoordinate and my entity would disappear.

I've modified the regex pattern to successfully match a number with e-notation.
 You're welcome :)  **Description:**
This allows customizing the size of the "perspective" screenshots taken by specifying the width and height e.g. <a-scene screenshot="width: 1024; height: 1024">. Before this only applied to "equirectangular" screenshots, and "perspective" just took the current dimensions of the scene canvas. 

**Changes proposed:**
copy line 166 to line 151

  Looking at the network console (in FF Nightly & Canary), the [boilerplate example for panorama](https://aframe.io/aframe/examples/boilerplate/panorama/) downloads the a-sky source image twice.

It appears this SO may be related:
http://stackoverflow.com/questions/38978890/mozilla-a-frame-loads-images-twice

When using a-assets instead, I'm seeing a 3rd download of the same image.
```
<a-scene>
    <a-assets>
        <img id="sky" crossorigin="anonymous" src="https://aframe.io/aframe/examples/boilerplate/panorama/puydesancy.jpg">
    </a-assets>
    <a-sky src="#sky"></a-sky>
</a-scene>
```

![aframe-network1](https://cloud.githubusercontent.com/assets/25775913/23731843/a4294e96-0424-11e7-868a-302d8e681c51.png)
![aframe-network2](https://cloud.githubusercontent.com/assets/25775913/23731845/a9752a3c-0424-11e7-9023-5a543e1e5f31.png)
 I'm still seeing 3 GETS when using `<a-asset-item>` One consequence of this is that even with `<a-asset-item>` resources, it's difficult to reliably reason about download progress due to the abundance of non-meaningful XHR progress events. Thanks for the fix I was eager to try it. When I switch to current aframe-master.min I get: 
```
three.js:19131 DOMException: Failed to execute 'texImage2D' on 'WebGLRenderingContext': Tainted canvases may not be loaded.
```

Switching back to 0.5.0 fixes it. What is strange is not all images are affected. The assets are dynamically appended to `<a-assets>`. I am trying to build a simple demo of the issue.  Thanks for the quick reply. If you run this locally once and browser refresh it will raise this error. 
```
Failed to execute 'texImage2D' on 'WebGLRenderingContext': The cross-origin image at https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg
```
If you switch back to 0.5.0 there is no exception. I assumed it was related to a change in caching system.

```html
<html>
	<head>
		<script src="/libs/aframe-master.min.js"></script>
		<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.5.0/aframe.min.js"></script>-->
	</head>
	<body>
		<a-scene>
			<a-assets></a-assets>
			<a-sky id="sky"></a-sky>
		</a-scene>

		<script>
			var assets = document.querySelector('a-assets')
			var asset = document.createElement('img');
	                asset.setAttribute('id', 'source');
	                asset.setAttribute('src', 'https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg');
	                asset.setAttribute('crossorigin', 'anonymous');
	                assets.appendChild(asset);

	                document.querySelector('a-sky').setAttribute('src', '#source');
		</script>
	</body>
</html>
```

I had pasted the wrong one above, fixed as you said by adding `crossorigin` in the original project. Ok might be my browser then. I go to https://aframe-2472.glitch.me/, refresh and get `Failed to execute 'texImage2D' on 'WebGLRenderingContext': The cross-origin image at`. Thanks for your help. I know I'm pushing but I asked some friends to test, it's def a bug found only in Chrome and yes it happens to all users. There is no issue on Firefox tho. Simply open your demo https://aframe-2472.glitch.me/, in chrome, and refresh. The result will be a  dark screen and a console error `Failed to execute 'texImage2D' on 'WebGLRenderingContext': The cross-origin image at ...`. 

Here's a recording of the steps above, running on most recent Chrome version using your demo. To trigger the dark screen I just refreshed `cmd+r`. 
http://recordit.co/qbmzxjwtlt I can confirm the behaviour @pasdoy reports on Chrome/Windows. The cross-origin image cannot be loaded as a texture when it is fetched from the disk cache. Works for me!

![image](https://cloud.githubusercontent.com/assets/3148617/24931499/6990279a-1f05-11e7-88b5-46ee24374bb5.png)

  just FYI, changes along these lines were rejected in the time of the Chromium bug (see #2217, this would be always fixing timestamps rather than detecting) -- but maybe folks will reconsider now that Nightly exhibits the issue...  **Description:**
I am creating an editor for HTML content where one building block is for aframe blocks. 
For this I am using an iframe to which the HTML code gets pushed via document.open/write/close.

If I push an aframe scene the first time, this works all fine. If I do it a second time, I get the error:
```
Uncaught TypeError: Cannot redefine property: vrEnabled
    at Function.defineProperty (<anonymous>)
    at M.enablePolyfill (webvr-polyfill.js:7699)
    at new M (webvr-polyfill.js:7631)
    at Object.M.14../util.js (webvr-polyfill.js:5606)
    at s (webvr-polyfill.js:1)
    at e (webvr-polyfill.js:1)
    at webvr-polyfill.js:1
    at u (webvr-polyfill.js:1)
    at Object.<anonymous> (webvr-polyfill.js:1)
    at Object.50 (webvr-polyfill.js:7830)
```
 
I solved my problem by adding "configurable=true" to the aframe.js :

> WebVRPolyfill.prototype.enablePolyfill = function() {
>   // Provide navigator.getVRDisplays.
>   navigator.getVRDisplays = this.getVRDisplays.bind(this);
> 
>   // Provide the VRDisplay object.
>   window.VRDisplay = VRDisplay;
> 
>   // Provide navigator.vrEnabled.
>   var self = this;
>   Object.defineProperty(navigator, 'vrEnabled', {
>     configurable:true,

Anyway there should (or maybe is) another solution to fix that problem of reloading an  a-scene element?

Thanks!
Kr,
Gerd

- A-Frame Version: 0.5
- Platform / Device: Chrome (or probably any browser with WebVR polyfill)
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->




 https://github.com/googlevr/webvr-polyfill/issues/200#issuecomment-287101643

Has been closed in WebVR Polyfill  **Description:**
 When in inspector mode and moving/changing an entity position/rotation/scale the input boxes updates and shows the values but when copied to clipboard the values of the attributes does not show.

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:
![bug](https://cloud.githubusercontent.com/assets/10770341/23690564/8a8aeeee-03fd-11e7-9318-070335e55620.PNG)
![bug2](https://cloud.githubusercontent.com/assets/10770341/23690563/8a881606-03fd-11e7-9ddd-91fb73069efd.PNG)

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

- A-Frame Version: 0.5
- Platform / Device: Mac OS X / Nightly

Components don't have a reference to their system at `this.system`, it's a reference to a function named `newSystem`. This happens when the system is registered _before_ the component is registered.

Changing the order of registration (so component goes first, system seconds) yields the correct behavior.
 Hmm...not sure what you mean. I did this and they do `console.log` a similar object `NewSystem` containing `sceneEl`.
```
      AFRAME.registerSystem('system-before', {
        schema: {},
        init: function () {}
      });

      AFRAME.registerComponent('system-before', {
        init: function () {
          console.log('THIS SYSTEM BEFORE', this.system);
        }
      });

      AFRAME.registerComponent('system-after', {
        init: function () {
          console.log('THIS SYSTEM AFTER', this.system);
        }
      });

      AFRAME.registerSystem('system-after', {
        schema: {},
        init: function () {}
      });
``` Hi @dye784,

Check out this codepen: http://codepen.io/anon/pen/PpdMxM

Popping out the console we can see that `this.system` is a function and not an object.

However, this other codepen (http://codepen.io/anon/pen/QpVeeK), which is exactly the same but with the system / component declaration reversed, we can see that `this.system` is the Object, as expected.
  **Description:**

Even though the `geometry` component appears to try and merge meshes, `mergeTo` seems to fail when trying to merge two `a-obj-model` entities.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome desktop
- Reproducible Code Snippet or URL:

In this example, the second chair is not visible.

````
<html>
<head>
	<script src="aframe-v0.5.0.min.js"></script>
</head>
<body>
	<a-scene>
		<a-assets>
			<a-asset-item id="chair-obj" src="chair.obj"></a-asset-item>
		</a-assets>
		<a-obj-model id="firstChair" geometry="buffer: false; skipCache: true" material="color: red" src="#chair-obj"></a-obj-model>
		<a-obj-model geometry="buffer: false; skipCache: true; mergeTo: #firstChair" src="#chair-obj" position="0 0.1 0"></a-obj-model>
	</a-scene>
</body>
</html>
```` Here is the chair model used in the example (you will have to unzip).

[chair.zip](https://github.com/aframevr/aframe/files/822998/chair.zip)
  **Description:**

This PR lets `gltf-model` accept glTF file which doesn't include default scene parameter.

    this.loader.load(src, function gltfLoaded (gltfModel) {
      self.model = gltfModel.scene;

`gltfModel.scene` (default scene) is optional in glTF specification.
If it isn't specified in the data file, let's use `gltfModel.scenes[0]` instead.
This follows Three.js glTF loader example.

https://github.com/mrdoob/three.js/blob/75384cfe6341b823e96cbec673c4ad92389b20cf/examples/webgl_loader_gltf.html#L231

**Changes proposed:**
- if default scene isn't specified in the glTF file, use scenes[0] instead.
 Added  **Description:**

In the example below, I create some boxes dynamically (you have to look down, step back to see them). The right-hand ones are merged with the leftmost one.

When using WASD to move around (and mouse to look) notice that as soon as the leftmost box goes out of frame the other boxes _also disappear._ It's as if the clipping calculation has (correctly) determined that the leftmost box no longer needs to be drawn, but then also stops drawing the others.

At a guess, perhaps the bounding dimensions of the merged group are still considered to be the same as the bounding dimensions of the first box?

**BONUS BUG:** in this example, the number of boxes that appear seems to be related to how quickly you start looking around (i.e. bring them into frame). If you wait a few seconds you get all 10. If you start moving immediately you may only see 3 or 4.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome desktop
- Reproducible Code Snippet or URL:

```
<html>
<head>
	<script src="aframe-v0.5.0.min.js"></script>
	<script>
		AFRAME.registerComponent( 'dynamic', {
			init: function() {
				this.data.tick = 0;
			},
			tick: function() {
				this.data.tick++;
				if ( this.data.tick === 1 ) {
					var target2 = document.createElement( 'a-entity' );
					target2.setAttribute( 'id', 'target' );
					target2.setAttribute( 'geometry', 'primitive: box; buffer: false; skipCache: true' );
					target2.setAttribute( 'color', 'green' );
					this.el.appendChild( target2 );
				}

				if ( this.data.tick % 10 === 0 && this.data.tick >= 10 && this.data.tick < 100 ) {
					var target2Merge = document.createElement( 'a-entity' );
					target2Merge.setAttribute( 'geometry', 'primitive: box; buffer: false; skipCache: true; mergeTo: #target' );
					target2Merge.setAttribute( 'position', ( this.data.tick / 5 ) + ' 0 0' );
					document.querySelector( 'a-scene' ).appendChild( target2Merge );
				}
			},
		} );
	</script>
</head>
<body>
	<a-scene>
		<a-entity dynamic>
		</a-entity>
	</a-scene>
</body>
</html>
```  **Description:**

When creating entities dynamically, if you attempt to merge them, they appear to take their world position/rotation rather than their parent position/rotation.

Here's an example. I create two sets of merged geometries. One is done manually in the HTML. Even though it is embedded inside a positioned/rotated parent, it works fine.

The other set of merged geometries is created dynamically. I have tried to mimic the manual HTML exactly. However you can see that the second box in the set, rather than being embedded inside the first in the set, is positioned 1m to the right. I believe it is getting this from the world co-ordinates.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome desktop
- Reproducible Code Snippet or URL:

```
<html>
<head>
	<script src="aframe-v0.5.0.min.js"></script>
	<script>
		AFRAME.registerComponent( 'dynamic', {
			init: function() {
				this.data.tick = 0;
			},
			tick: function() {
				this.data.tick++;
				if ( this.data.tick === 10 ) {
					var target2 = document.createElement( 'a-entity' );
					target2.setAttribute( 'id', 'target2' );
					target2.setAttribute( 'geometry', 'primitive: box; buffer: false; skipCache: true' );
					target2.setAttribute( 'color', 'green' );
					this.el.appendChild( target2 );
				}

				if ( this.data.tick === 20 ) {
					var target2Merge = document.createElement( 'a-entity' );
					target2Merge.setAttribute( 'geometry', 'primitive: box; buffer: false; skipCache: true; mergeTo: #target2' );
					target2Merge.setAttribute( 'rotation', '0 45 0' );
					this.el.appendChild( target2Merge );
				}
			},
		} );
	</script>
</head>
<body>
	<a-scene>
		<a-entity rotation="45 0 0" position="-1 0 0">
			<a-entity id="target1" geometry="primitive: box; buffer: false; skipCache: true" material="color: red"></a-entity>
			<a-entity geometry="primitive: box; buffer: false; skipCache: true; mergeTo: #target1"
				rotation="0 45 0"></a-entity>
		</a-entity>

		<a-entity rotation="0 0 0" position="1 0 0" dynamic>
		</a-entity>
	</a-scene>
</body>
</html>
```  close #2443 update moz logo
- added the new logo and bumped up the size slightly in css to mirror old logo
 definitely~i'll look into it updated~ oh gotcha i wasn't using ruler. try now  I was confused for a moment when inspecting `AFRAME.utils.coordinates.isCoordinate` in the debugger. Seems it should be renamed (or aliased) to `areCoordinates`.

https://www.quora.com/Are-coordinates-plural-or-singular I take it that label means you agree? If so, are you worried about breaking changes? Should it be aliased with a deprecation warning? @dmarcos I like the idea of `isCoordinates`, saying "is of type `coordinates`". @kellyselden , @dmarcos That's a good point since it's supposed to be read as type of coordinates.  mchen [12:59 PM] 
interesting default camera Y height behavior with current master...
http://codepen.io/machenmusik/pen/JWXGap

With Rift and latest Chromium, when using the auto-enter/exit VR, user height is correct both outside VR (default user height 1.6) and in VR (true HMD height), first time and every time.  That consistency is provided by #2428.

With Rift and latest Chromium, when manually clicking the enter VR button but not wearing the HMD, user height is correct outside VR (default user height 1.6) but wrong inside VR (e,g, camera placed higher than true HMD height once you put it on).

With Rift and latest Nightly, it appears that vrdisplayactivate is not working and therefore neither is auto-enter VR (i.e. you put on the Rift, see nothing, and still have to click the button).

With Rift and latest Nightly, when manually clicking the enter VR button but not wearing the HMD, user height is always 1.6 since it just goes fullscreen and doesn't try to enter VR at all.  In fact, it won't try to enter VR at all unless you reload the page.

With Rift and latest Nightly, when manually clicking the enter VR button while wearing the HMD, user height is correct outside VR (default user height 1.6) but wrong inside VR (e,g, camera placed lower than true HMD height once you put it on, apparently by 1.6 the default user height), first time and every time.  That consistency is provided by #2428.

So two apparent bugs:
(1) Nightly vrdisplayactivate is not working.
(2) Manually entering VR via UI button seems to have some issue with getting initial HMD position/height, and since applied as deltas by `look-controls`, that stays wrong while in VR. using http://chenz.org/vr-camera-height.html to avoid any potential issues with codepen,
same behavior above is seen.
 With Rift, 

if you place a breakpoint at src/components/look-controls.js line 214
and then evaluate some variables in console,

Nightly, which does *NOT* work properly, does *NOT* return stageParameters:

this.dolly.position  
`Object { x: 0.2644968032836914, y: -0.8083080649375916, z: -0.9467211961746216 }`
this.controls.getVRDisplay()  
`VRDisplay { isConnected: true, isPresenting: true, capabilities: VRDisplayCapabilities, stageParameters: null, displayId: 1, displayName: "Oculus VR HMD", depthNear: 0.005, depthFar: 10000 }`

Chromium, which works properly, does provide stageParameters:

this.dolly.position
`Vector3 {x: 0.009547733701765537, y: 0.5052434802055359, z: 0.014989607967436314}`
this.controls.getVRDisplay().stageParameters
`VRStageParameters {sittingToStandingTransform: Float32Array[16], sizeX: 2.0250000953674316, sizeZ: 2.0250000953674316}` With Vive,

if you place a breakpoint at src/components/look-controls.js line 214
and then evaluate some variables in console,

Nightly works properly, and stageParameters are returned:

 this.dolly.position  
 `Object { x: 0, y: 0.75, z: 0 }`  
 this.controls.getVRDisplay().stageParameters  
 `VRStageParameters { sittingToStandingTransform: [16], sizeX: 1, sizeZ: 1 }`

Chromium, which also works properly, does provide stageParameters:

this.dolly.position
`Vector3 {x: -1.1390511989593506, y: 0.31331753730773926, z: -0.6187263131141663}`
this.controls.getVRDisplay().stageParameters
`VRStageParameters {sittingToStandingTransform: Float32Array[16], sizeX: 0, sizeZ: 0}` So it appears that the camera height issue is result of a bug in Oculus Rift support in Nightly where the stageParameters are not returned on the VRDisplay, and so the code cannot correctly adjust for roomscale.

Who from Mozilla can confirm and address?  @kearwood?  @cvan? Thanks for spotting the missing stageParameters for Oculus.  Oculus wasn't capable of roomscale when we first implemented support.  Since then, we have updated to the newer Oculus SDK with support for the Oculus Guardian system and will be adding stageParameters for Oculus:

https://bugzilla.mozilla.org/show_bug.cgi?id=1344393

You can expect this to be implemented early next week. Great, thanks @kearwood!  While modernizing, it would be great to expose capacitive events for Oculus Touch, but that is probably a little more work. sorry I haven't had time yet - anyone had a chance to test latest Nightly with Rift for stageParameters? latest Nightly exhibits same behavior @kearwood Running latest Nightly, I now see that Rift HMD height is correct, but the Touch controllers are still in the floor the way the HMD used to be :-/  @kearwood thoughts? Codepen for the Y height issue which appears to now impact Touch controller, not HMD...
http://codepen.io/machenmusik/pen/aJNejw
@dmarcos @ngokevin @kearwood let me know if you would prefer to close this issue and open a new one on the controller.  (@fernandojsg do you see this with your recent A-Blast Touch changes?) I would think it's something like the room transform not being applied to the controller pose?  ie:

https://github.com/mrdoob/three.js/blob/dev/examples/js/controls/VRControls.js#L127

 (not sure why that should differ across browsers though?) looks like tracked-controls should be doing this already?  (before my time though)
https://github.com/aframevr/aframe/blob/master/src/components/tracked-controls.js#L87
https://github.com/aframevr/aframe/blob/master/src/systems/tracked-controls.js#L17 patch for applying user height when null stageParameters in #2446 but should probably test with daydream controller to make sute it doesn't break 3DoF @machenmusik can we break that commit into a separate PR?   I think the emulation pieces need to be discussed in more detail before we can commit to those changes.   

I will give it a spin on daydream and report 

Hugely appreciate the patches! i think that commit may be separable, but you can try it on daydream now using chenzlabs master via rawgit (which I think I have codepen for...) Horray!   I just cherry picked the commit 53d72ca545367c1b7af7e4cd1e47f977cc95b831 and it seems to resolve the issue with the rift and also works with daydream as well. ok great!  i am tied up for some time, if you want to do a PR with just that cherry pick feel free - but I do think we should commit the rest of the changes needed to fully leverage recent Nightly support for Oculus Touch ASAP, or else the controllers still won't be entirely usable @machenmusik gotcha.  Will take a look at the rest of the PR. I got a few minutes to submit #2510  **Description:**

- A-Frame Version: 0.5.0
- Platform / Device: Mac / Chrome latest
- Reproducible Code Snippet or URL:

If I'm changing the visibility of an entity having children (ex. a-box,...)  the cursor is not able to click if the entity is set to visible.

Cursor
```
<a-cursor raycaster="recursive:true; objects: a-entity[visible='true'] *"  ... >
    ...
</a-cursor>
```

Entity
```
<a-entity visible="false">
    <a-box widht="2" height="2" depth="2" ...></a-box>
</a-entity>
```

Changing the visibility via JS and setAttribute('visible', 'true') no click events will be triggered.

Thank you for your help! Perfect! Thank you!  This PR adds support to #2513 for the different Oculus Touch controller mapping exhibited by the current Firefox Nightly build(s).  Note that Nightly is currently NOT exposing capacitive touch events as Chromium does; therefore, some `hand-controls` poses are more cumbersome since buttons need to be fully actuated rather than merely touched.

Per discussion, this PR no longer includes #2423 in its entirety, as another approach has been agreed to fix #2379. :)
Are you asking for docs change to provide a fuller explanation, or code change, or something else?  

The reason why `emulated` is needed is because per some of our original discussions on how to support multiple types of controllers, the strategy employed is to speculatively pre-attach the various components that could be used (`oculus-touch-controls` and `vive-controls`), and they are supposed to do nothing if their respective controllers are not present.  When #2314 committed changes to always attach event listeners, that broke the do-nothing contract, and so with both `oculus-touch-controls` and `vive-controls` attached, both components reacted to events that something like `tracked-controls` would generate, leading to e.g. double-event bug #2379.  If applications perform non-idempotent operations as a result of getting tracked controller events, the effects can be more significant.

To fix #2379, the do-nothing-by-default contract is restored, but then emulation / replaying needs some other mechanism to indicate that the events should be acted upon even though the physical controller is not present.  That is the `emulated` flag.  

Although, actually it turns out that for replay examples like https://ngokevin.github.io/kframe/scenes/aincraft/?avatar-recording=recording.json 
even #2314 was not really enough to allow correct functionality, because it is `tracked-controls` events that are actually being replayed, and `tracked-controls` was only injected when the controllers were physically present.  (in the example, you would not see the hand pose change.) -- you need to explicitly have `tracked-controls` present (but it must not match any actual controller, to avoid collisions in events between actual and replay), and if either #2446 or #2423 is included, then you need to add `emulated:true` to whichever one of `oculus-touch-controls` or `vive-controls` you'd like the replay to use.
 (@ngokevin said this: https://github.com/aframevr/aframe/pull/2423#issuecomment-283795941) I liked @ngokevin 's commentary so added something along those lines to the docs, to @dmarcos 's point.

Anything more you'd like to do with this?  I think we can deprecate #2423 in favor of this one. @dmarcos per discussion on #2513...

> Note that Nightly is currently NOT exposing capacitive touch events as Chromium does; therefore, some hand-controls poses are more cumbersome since buttons need to be fully actuated rather than merely touched.

It appears that Nightly is currently exposing trigger as axis ONLY, so in order to generate typical button events (down/up, even if we ignore touch), there is no choice but to add some emulation code (see https://github.com/aframevr/aframe/pull/2446/commits/b2f803edb08a7e80886fe67749057d2ed39f400c) 
 update: latest nightly builds appear broken, however the 3-22 build has oculus touch mapping as 6 buttons and 2 axes (albeit without touch) - as that is same as chromium, may be able to simplify the mapping again.  closing this for now  > I feel after you release the trigger, the button value isn't completely at 0. But at a value close to 0. We need to introduce a threshold.

Thresholding probably belongs in browser, but could probably be done in component as workaround.  Was doing this to synthesize touches, sounds like it may be needed to generate real button presses?
https://github.com/aframevr/aframe/blob/master/src/components/oculus-touch-controls.js#L178
(Assuming you mean Touch here, but not Vive?)

> The models are also a bit too bright. They look flat-shaded. Maybe we can make the material less shiny / reflective / darker?

I agree that less shiny would be better; can/should someone with better modeling chops change them to GLTF as well? oh ok - so you want to steal the oculus-touch code and also apply threshold to buttons then?  **Description:**

When I add a WebVR origin trial token to my A-Frame application, the "cardboard mode" mode partly breaks. I still get a stereo image rendered, but the rotation of the phone is not translated to rotation in VR. As a result, the image is "stuck" in cardboard mode and the VR experience is broken.

I suspect this is related to some of the `isMobile()` checks in `look-controls` and elsewhere. It seems like A-Frame hasn't been updated to accommodate regular phones supporting the WebVR API yet.

Examples - must be opened in Chrome 56 on an Android phone to see the issue (enter VR mode):

- _Without_ the origin trial token (WebVR API is _not_ used): https://viewer.cimmerce.com/test/hello_world_regular.html
- _With_ the origin trial token (WebVR API _is_ used): https://viewer.cimmerce.com/test/hello_world_origin.html

Though these examples use A-Frame 0.5.0, my own app uses the newest master version of A-Frame, and has the same issue. I'd be happy to submit a PR, but I think some discussion is needed on how WebVR API support on phones should be handled going forward.

- A-Frame Version: 0.5.0
- Platform / Device: Chrome 56 on Android 6 (Samsung Galaxy S6)
 Yes, if I, in Android Chrome, enable WebVR at chrome://flags and visit
https://aframe.io/examples/ the issue is immediately appearant.

On Thu, 9 Mar 2017, 03:13 Kevin Ngo, <notifications@github.com> wrote:

> We can force enable WebVR through the browser config on mobile to test,
> right?
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2444#issuecomment-285233410>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAAW8DnAzGrmCLT3WAjXgvITx9yubcmyks5rj2BBgaJpZM4MPm1c>
> .
>
 I have just tested the A-Frame examples and my own A-Frame 0.5.0 app with Chrome 58 for Android with WebVR enabled in chrome://flags: It works!

I get a prompt to install Google VR Services when I enter the page, and after installing that, I can switch to "real" WebVR mode from the browser. Rendering is still not on par with the old "fake" WebVR mode, but hopefully the Chrome team is working on that.  **Description:**

This PR adds `responseType` attribute to `a-asset-item`.
It's necessary for `THREE.GLTFLoader` in r84. #2378
And it'll be helpful for user components which need `arraybuffer` data.

It has a limitation.
If we attempt to load the same data as different `responseType`s,
only the `responseType` of the first attempt is applied
because it loads from cache  if exists.

I think it won't cause any problems because
there's no situation that we wanna load the same data with different `responseType`s.
(If exists, let me know.)

**Changes proposed:**
- Add `responseType` attribute to `a-asset-item`. 
- Add `responseType` tests
 Thanks for the update!

I have a question.

You changed the order of

    THREE.Cache.remove(XHR_SRC);
    var assetItem = document.createElement('a-asset-item');

Is there any special reasons you needed to change?
And if so, we should change the order here, too?

https://github.com/aframevr/aframe/blob/3c074bdde332f3d28649eb9bbf3c3e207107fe9d/tests/core/a-assets.test.js#L276  **Description:**

The behavior of `setAttribute('component', {...}) changed starting with v0.4.0 such that array property types behave uniquely. 

1. Arrays are assigned by reference, so later changes to the variable that was passed in `setAttribute` will also be reflected in the component data
2. Updating an array property by passing it in an object to `setAttribute` will never trigger the component's `update` method (because it is assigned by reference [here](https://github.com/aframevr/aframe/blob/master/src/core/a-entity.js#L707) before the check for changes to call update [here](https://github.com/aframevr/aframe/blob/dec48d73bbe0d0189ae203eb12431ffc5521e0a2/src/core/component.js#L221))

See full discussion in #2227. 

**Changes proposed:**

- Document current behavior
- Add test cases to detect future changes in behavior

I also added documentation of the clobber update flag, but I can remove this if its not something you want in the docs. 
  "Uncaught (in promise) TypeError: Cannot read property 'isPlaying' of null" originally reported in #1483 still happens in rare cases. Upgrading to 0.5.0 does not fix this issue.

- Added check for self.parentEl before calling self.parentEl.isPlaying() to guard against edge cases where parent is null after dynamic DOM shuffling @ngokevin Hmm, that sounds reasonable – okay, I'll try to come up with a Codepen with the simplest possible reproduction. It may prove tricky as it is _quite_ an edge case (would probably only show up in limited scenarios, i.e. integrations) but I can definitely confirm there is still at least one more scenario where `self.parentEl` ends up null.

Apologies for the half-baked pull request!  This PR attempts to resolve #2394, which happens repeatedly on Rift and infrequently on Vive. @RSpace trying this blind as I can't test until weekend, if you have a chance to try it please comment with your findings @dmarcos see further discussion in #2394 -- the re-entry problem is avoided by not doing removeHeightOffset/addHeightOffset (which is what happens when you set userHeight to 0) or restoreCameraPose (which currently cannot be avoided).  A first workaround would be to also decline to change position/rotation in restoreCameraPose when userHeight is 0, but that does not seem to be the core problem... I can confirm that this PR fixes the issue. I no longer get the wrong height when entering VR the second and additional times on the Oculus Rift. I have also tested on other devices and seen no regressions:

* Oculus Rift, Win 10, Chromium VR Feb 17 build: OK 
* HTC Vive, Win 10, Chromium VR Feb 17 build: OK
* Gear VR, Android 6, Chrome 56: OK
* Cardboard, Android 6, Chrome 56: OK

Thanks a lot for finding and fixing the issue @machenmusik ! I definitely recommend merging this PR before next release. @dmarcos if this fixed it (yay!) the problem was that the delta application of pose that `look-controls` does was not being properly reset when exiting VR, which only manifests the second and subsequent times VR is entered. @RSpace thanks so much for the effort to verify especially regression check! @dmarcos have you had a chance to consider?  happy to say it definitely works.
http://codepen.io/machenmusik/pen/ZeGxZe  Fixes #2426

Microsoft Edge doesn't report HMD orientation before requestPresent (for  privacy reasons) which causes checkHeadsetConnected() to always return false; on Microsoft Edge, the 'Enter VR' button falls back to the fullscreen experience, and the content is not rendered in the HMD.

Fix it is to add a vrDisplay.isConnected check (if available) to get the correct answer from hardware.
-
-
 done  isn't flushToDOM() expensive? you should be able to move something without owning it, personally i think reparenting should be reserved for more durable reasons.  i think of it more like tractor beam unless you are really grabbing to wield, not grab-and-drop.  should be able to do tractor beam with 3DOF, if you are moving like in editor not purely physical analog, you want to be able to push and pull much farther than 6DOF range of motion, so trackpad/thumbstick anyway resyncing by using unmodified world position / rotation would only work if no new parent has nonzero offsets, right?   We have an a-entity with a number of children that we are trying to re-parent to the left or right Vive controller based on the menu pressed. When doing so we receive an TypeError from index.js:270 that states, "position is undefined"

We have tried the flushToDOM() call on the entity prior to the appendChild() that you recommend above. We have also tried the initial list of stuff above where we cloneNode() prior to appendChild() followed by removeChild(). Nothing has worked.

Here's the call stack if it helps,
 `TypeError: position is undefined[Learn More]
index.js:270
setPositions/<
index.js:270
forEach self-hosted:281:13 setPositions
index.js:267
remove
index.js:101
value
a-entity.js:428:6
[161]</module.exports/</<
bind.js:12:13
forEach self-hosted:281:13 value
a-entity.js:106:6
m
document-register-element.js:2:1464
l
document-register-element.js:2:80
o/<
document-register-element.js:2:210
r
document-register-element.js:2:4796
[16]</</r[a]/O</<
document-register-element.js:2:4917` I've been working on a setup for re-parenting objects, including the camera. I want to do this to utilise the transform updates of the parent, but maintaining the worldspace of the child object as it is parented and unparented.

Use cases: an elevator or tray of objects. 

Keeping the worldspace transform and rotation of the child would allow a camera to step on an elevator, move freely whilst on it, then step off on a different floor seamlessly.

I found the following code works great for non-kinematic type objects. 

```
          child.object3D.parent.updateMatrixWorld();
          // remove child from scene and add it to parent
          THREE.SceneUtils.attach( child.object3D, child.sceneEl.object3D, parent.object3D );
```

When I test the code out with the camera, however, there's a transform jump as I transition on or off the parent object. It looks like the camera worldtransform is stuck at the initial spawn point. 

```
CAMERA
[BEFORE]
Child Position (world) Vector3 { x: 1.11, y: 1.6, z: -17.91 }
Old Parent Position Vector3 { x: 0, y: 0, z: 0 }
[AFTER]
New Parent Position Vector3 { x: 0, y: -0.14, z: -20 }
Child Position (world) Vector3 { x: 1.11, y: 1.45, z: -37.94 }
Child Position (local) Vector3 { x: 1.11, y: 1.6, z: -17.94 }

STATIC OBJECT
[BEFORE]
Child Position (world) Vector3 { x: 0, y: 5, z: -12 }
Old Parent Position Vector3 { x: 0, y: 0, z: 0 }
[AFTER]
New Parent Position Vector3 { x: 15, y: 0, z: -3 }
Child Position (world) Vector3 { x: 0, y: 5, z: -12 }
Child Pposition (local) Vector3 { x: -15, y: 5, z: -9 }

```
Any thoughts on how to resolve this? 
 What about some sort of temporary parent-constraint for when we don't want to mess with the scene hierarchy, inspired by [Maya](https://knowledge.autodesk.com/support/maya/learn-explore/caas/CloudHelp/cloudhelp/2016/ENU/Maya/files/GUID-2FC0EE9E-A8D5-4B2A-A751-8B926389497A-htm.html)?

Here is an example component [on Glitch]( https://glitch.com/edit/#!/aframe-parent-constraint ). I haven't battle tested it yet but perhaps a start?

Probably should have some keepOffset functionality ...

```javascript 
AFRAME.registerComponent('parent-constraint', {
    //dependencies: ['mdmu-gltf', 'mdmu-controls'],
    schema: {
        parent:                 {type: "selector", default:null},
        position:               {type: "boolean",  default:true},
        rotation:               {type: "boolean",  default:true},
        scale:                  {type: "boolean",  default:true},
        copyParentTransforms:   {type: "boolean",  default:false}, //just want it to match all transforms of "parent" (overrides everything else)
        maintainOffset:         {type: "boolean",  default:false}
    },
    multiple: false, //do not allow multiple instances of this component on this entity
    init: function() {
        this.psuedoParent = null;
    },
    update: function(oldData)  {
        const Context_AF    = this;
        const data = this.data;

        if (Object.keys(data).length === 0) { return; } // No need to update. as nothing here yet

        //model change
        if ( (oldData.parent !== data.parent) && data.parent !== null ) {

            //have to keep checking if everything is ready first ...
            let loopCounter = 0;
            const checkChildParentLoadStatus = () => {
                Context_AF.psuedoParent = document.querySelector('#' + data.parent.getAttribute('id'));
                if (Context_AF.psuedoParent !== null) {
                    if ( Context_AF.psuedoParent.hasLoaded && Context_AF.el.hasLoaded ) {
                        Context_AF.setupConstraint();
                        clearInterval(constraintLoop);
                    }
                }

                if (++loopCounter > 20) {
                    console.log( "Warning! : problems setting parentConstraint" );
                    clearInterval(constraintLoop);
                }
            };
            const constraintLoop = setInterval(checkChildParentLoadStatus, 100);

            // document.querySelector('a-scene').addEventListener('loaded', () => {
            //     Context_AF.setupConstraint();
            // });
        }

        //remove this component if you want to break constraint .... setting to null will do nothing. 
        //To disable temporary set position, rotation, scale to false ..
    },
    setupConstraint: function () {
        const Context_AF    = this;
        const data = this.data;
        
        Context_AF.originalWorldTransform         = Context_AF.el.object3D.matrixWorld.clone();
        Context_AF.originalLocalTransform         = Context_AF.el.object3D.matrix.clone();
        //Context_AF.originalLocalTransform.compose(Context_AF.el.object3D.position, Context_AF.el.object3D.quaternion, Context_AF.el.object3D.scale); //save for later

        console.log( this.originalWorldTransform );

        let position_P              = new THREE.Vector3();
        let position_C              = new THREE.Vector3();
        let rotation_P              = new THREE.Quaternion();
        let rotation_C              = new THREE.Quaternion();
        let scale_P                 = new THREE.Vector3();
        let scale_C                 = new THREE.Vector3();

        Context_AF.psuedoParent.object3D.matrixWorld.decompose(position_P, rotation_P, scale_P);
        Context_AF.el.object3D.matrixWorld.decompose(position_C, rotation_C, scale_C); //apply saved local transform

        //save transform offset between pseudo-parent and this object
        Context_AF.diffPos = position_C.clone();
        Context_AF.diffPos.sub(position_P);

        //get rot diff. QTransition = QFinal * QInitial^{-1} 
        //https://stackoverflow.com/questions/1755631/difference-between-two-quaternions
        Context_AF.diffQuat = rotation_C.clone();
        rotation_P.inverse();
        Context_AF.diffQuat.multiply(rotation_P);

        Context_AF.diffScale = scale_C.clone();
        Context_AF.diffScale.sub(scale_P);
        Context_AF.diffScale.x = Math.abs(Context_AF.diffScale.x);
        Context_AF.diffScale.y = Math.abs(Context_AF.diffScale.y);
        Context_AF.diffScale.z = Math.abs(Context_AF.diffScale.z);

        //Context_AF.el.object3D.matrixAutoUpdate   = false; //we want to manually update here and not have conflicts elsewhere
    },
    tick: function(time, timeDelta) {
        if (this.psuedoParent !== null) {
            const Context_AF    = this;
            const data          = Context_AF.data;

            let parentObject3D          = Context_AF.psuedoParent.object3D;
            let thisObject3D            = Context_AF.el.object3D;
            let worldMat_Constraint     = new THREE.Matrix4();
            let worldMat_NoConstraint   = new THREE.Matrix4();
            let position_P              = new THREE.Vector3();
            let position_C              = new THREE.Vector3();
            let rotation_P              = new THREE.Quaternion();
            let rotation_C              = new THREE.Quaternion();
            let scale_P                 = new THREE.Vector3();
            let scale_C                 = new THREE.Vector3();

            //get world matrix of pseudo-parent we want to constrain to
            worldMat_Constraint.copy( parentObject3D.matrixWorld ); 

            //get world matrix of this object if we didn't apply a constraint (taking into account local transform)
            worldMat_NoConstraint.copy( thisObject3D.parent.matrixWorld );         
            worldMat_NoConstraint.premultiply( this.originalLocalTransform );

            //const originalWorldTransform = worldMat_NoConstraint.clone();

            //break down into individual transforms ... thanks for the handy function THREEjs!
            worldMat_Constraint.decompose(position_P, rotation_P, scale_P);
            worldMat_NoConstraint.decompose(position_C, rotation_C, scale_C); //apply saved local transform

            //if we want to ignore constrain on one of these transforms we will "reset" it back to what it would be with no constraint applied
            if (!data.position) {
                position_P.copy(position_C);
            }

            if (!data.rotation) {
                rotation_P.copy(rotation_C);
            }

            if (!data.scale) {
                scale_P.copy(scale_C);
            } 

            //if we want to main offset else we don't
            if (data.copyParentTransforms) {
                //recompose world matrix with adjusted transforms
                worldMat_Constraint.compose(position_P, rotation_P, scale_P); 
            }
            else {
                let posMat = new THREE.Matrix4();
                let posMat_Off = new THREE.Matrix4();
                posMat.makeTranslation(position_P.x, position_P.y, position_P.z );
                posMat_Off.makeTranslation(this.diffPos.x, this.diffPos.y, this.diffPos.z );

                let rotMat = new THREE.Matrix4();
                let rotMat_Off = new THREE.Matrix4();
                rotMat.makeRotationFromQuaternion(rotation_P);
                rotMat_Off.makeRotationFromQuaternion(this.diffQuat);

                let scaleMat = new THREE.Matrix4();
                let scaleMat_Off = new THREE.Matrix4();
                if ( scale_P.length() > Number.EPSILON ) { //zero-vector will throw a bunch of errors here ...
                    scaleMat.makeScale(scale_P.x, scale_P.y, scale_P.z);
                }
                if ( this.diffScale.length() > Number.EPSILON ) {
                    scaleMat_Off.makeScale(this.diffScale.x, this.diffScale.y, this.diffScale.z);
                }

                worldMat_Constraint.identity();

                if ( data.maintainOffset ) {
                    if (data.rotation) { 
                        worldMat_Constraint.premultiply( rotMat_Off );
                    }
                    if (data.scale) {
                        worldMat_Constraint.premultiply( scaleMat_Off );
                    }
                    if (data.position) {
                        worldMat_Constraint.premultiply( posMat_Off );
                    }

                    if (data.rotation) { 
                        worldMat_Constraint.premultiply( rotMat );
                    }
                    if (data.scale) {
                        worldMat_Constraint.premultiply( scaleMat );
                    }
                    if (data.position) {
                        worldMat_Constraint.premultiply( posMat );
                    }
                }
                else {
                    if (data.scale) {
                        worldMat_Constraint.premultiply( scaleMat );
                        worldMat_Constraint.premultiply( scaleMat_Off );
                    }
                    if (data.rotation) { 
                        worldMat_Constraint.premultiply( rotMat );
                        worldMat_Constraint.premultiply( rotMat_Off );
                    }
                    if (data.position) {
                        worldMat_Constraint.premultiply( posMat );
                        worldMat_Constraint.premultiply( posMat_Off );
                    }
                }
            }

            //set new matrix and manually update
            const invOriginal = new THREE.Matrix4().getInverse(thisObject3D.matrix);
            thisObject3D.applyMatrix( invOriginal ); //reset this objects matrices
            thisObject3D.applyMatrix( worldMat_Constraint );
        }
    },
    remove: function() {
        //this.el.object3D.matrixAutoUpdate = true;   //give back control of update to framework
    }
}); 
```

EDIT: original code was very broken, though this still can be optimized (especially num of vars)
EDIT2: fixed a couple of bugs
EDIT3: was subverting THREEjs transforms updating pattern. Updated to follow in line with use expectations.  (Per request, this PR no longer extends #2413 / #2415 to `oculus-touch-controls` as `thumbstickmoved`)

Should fix #2379.
 Verified on both Vive (via SteamVR/OpenVR support) and Touch (direct Oculus support) with latest experimental Chromium. Looks like a nice upgrade. After #2415 was merged, I noticed that the trigger on the HTC Vive also fires onAxisMove (z axis) events. Does this PR handle the trigger axis as 'triggermoved' or as 'trackpadmoved'? trigger is not an axis, it is a button with a value associated -- or at least that is the case with Chromium.  per discussion with @dmarcos in Slack, we should definitely avoid browser-specific ids and button/axis mappings if possible, bleah. `axismove` events should have been fired before #2415 as well, meaning that you could easily handle `axismove` yourself if need be.  but for buttons with values, as trigger should be (and grip for Touch as well), it looks like no specific event was fired when the value changed, only the more generic `buttonchanged` that is also fired on up/down/touchstart/touchend. Ok, so 'buttonchanged' still needs to be fired correctly for this specific case (htc vive trigger), with the correct value? Does the oculus touch grip work like this already? `buttonchanged` should be firing now, see https://github.com/aframevr/aframe/blob/master/src/components/tracked-controls.js#L151

oculus-touch-controls and vive-controls provide mappings to friendly names for up/down/touchstart/touchend, but looks like they don't handle changed.  that can be added, but would like to settle the button/axis disparity between Chromium and Nightly first to avoid redoing work.  @dmarcos any more word from Gecko folks? @cmvanb if you have time in next few days, can you confirm which environments (browser / HMD+controllers) receive events such as `triggerchanged` with the latest PR? I can test FF nightly + Vive for you. I will also try Chromium + Vive, although Chromium didn't work last time I tried. Will do that tonight or tomorrow. I don't have an Oculus to test with. (FYI, there is a brand new experimental chromium that resolves previous issues with latest steamvr) I tested the branch with vive + FF nightly 54.0a1 (2017-02-23) (64-bit).

When clicking the trackpad, 'trackpadchanged' event is fired (multiple times/frames) as expected.
When sliding a finger over the trackpad, 'trackpadmoved' event (multiple times/frames) is fired as expected. The x/y values are correct.
When pulling the trigger down (fast), several events are fired in this order:
'trackpadmoved'
'trackpadmoved'
'triggerdown'
'triggerchanged'
'trackpadmoved'
'triggerchanged'

On releasing the trigger:
'trackpadmoved'
'triggerup'
'triggerchanged'
'trackpadmoved'
'triggerchanged'

It seems like the 'trackpadmoved' event is still being fired for the trigger. Otherwise, the values seem correct to me.

PS: Chromium still isn't working for me. I'm using the version made available here: https://webvr.info/get-chrome/ thanks @cmvanb !

I believe there is currently a fundamental difference in how the latest experimental Chromium and Nightly model Vive and Touch expose controllers with respect to buttons and axes.

Chromium represents trigger (Vive and Touch) as a button that has an analog value, and not as an axis... same thing for grip on Touch.  The only axes are trackpad (Vive) and thumbstick (touch).

Nightly appears to be representing buttons that have analog values (like trigger) as axes, for example the new Oculus Touch support was exposing controllers with 3 buttons and 4 axes in Nightly, rather than the 6 buttons and 2 axes in Chromium,  This causes problems since `axismove` events are currently fired by `tracked-controls` when trigger changes, with no indication of which axes changed.

@cmvanb can you confirm whether the `triggerchanged` button state provides an analog value using Nightly?  If not, then even the button events are inconsistent, so suppressing spurious `trackpadmoved` events would not suffice.

IMO it is highly undesirable to have browser-specific gamepad API mappings for the same controllers on the same machine.  @cvan @kearwood @toji - would appreciate your thoughts on how best to resolve discrepancies. Easiest way to "split" the axismove handling is to simply comment out the onAxisMoved handler, in which case the code won't fire.  but remember there is already a different version of axismove committed into master for vive only, not for oculus, so we'd be disabling that vive-only functionality by doing so so rather than split out the axismove handling, I added axis change propagation, which allows culling of spurious moves. @cmvanb if you get the chance, can you check to see whether the latest version of this PR prevents the spurious `trackpadmoved` events you were seeing before? @dmarcos relayed discussion with Mozillans where different Oculus Touch button/axis mapping is not likely to change soon (unlike id string).  Can I urge Mozillans to reconsider?  At least make analog buttons like trigger and grip generate actual button events, rather than treating them like sliders... otherwise even simple trigger button down/up will become unreliable See https://github.com/aframevr/aframe/pull/2446#issuecomment-283754949 @ngokevin you might actually be better off also capturing emitted events from `oculus-touch-controls` and `vive-controls` (perhaps daydream and gearvr, not sure about leap hands) as well as those from tracked-controls, at which point you don't even need emulated true, you just need the app to be paying attention. should we deprecate this in favor of #2446? Right.  if you merge this PR, #2446 will simplify itself :-) so which things between this and #2446 want to be separate PRs?  there is some overlap so may be nontrivial (e.g. https://github.com/aframevr/aframe/pull/2423#issuecomment-283206116), and i am tied up for a little while

i think we definitely want the fix for #2448 that @caseyyee confirmed via cherry-pick, that one is easy (now #2510), but maybe not entirely done with Nightly Rift+Touch without #2446

i think we need to fix the double-event issue introduced unless we move back to `auto-detect-controllers` paradigm, and IIRC the axismove changes here are needed now to prevent spurious events from prior vive-specific PR / Nightly having control elements be both buttons and axes, so a bit hesitant to separate temporarily only to have them merged back together shortly w.r.t. separating PRs: I think these delineations would work

- cherry-picked #2510 - already done

- axismove and nightly touch support - need new mapping structure for both

- emulated

may get a chance to look at that late this evening.  A-Frame inspector logic to export an entity (currently inside the [getClipboardRepresentation()](https://github.com/aframevr/aframe-inspector/blob/4a442d0ca566f7435519c090254d7bd8fb3a1c50/src/actions/entity.js#L142) action) could be simplified if optimisations based on removing implicit components and default values are in A-Frame. This way, the representation which depends on A-Frame entity internals is decoupled from the inspector.  i am using react class to add dynamic elements 

cameraPosition(){
    var cameraEl = document.querySelector('#camera');
    var worldPos = new THREE.Vector3();
    worldPos.setFromMatrixPosition(cameraEl.object3D.matrixWorld);
    return (worldPos);
  }

  handler(){
    var el=$('a-scene');
    var pos=this.cameraPosition()
    var position=pos.x+" "+pos.y+" "+pos.z;
    var newEL=$('<a-cylinder  position="'+position+'" id="data-'+this.state.count+'"click-drag color="green" ></a-cylinder>').on('click',function(){
      $(this).on('dragend',function(data){
        console.log(data)
      })
    })
    el.append(newEL);
    this.setState({count:this.state.count+1});
  }


but the newly created element doesn't  register the component click-drag I'm not sure, but a couple of thoughts come to mind:

Firstly, I would see if the component registers if you add it _after_ appending it to the DOM (by using .setAttribute).

Secondly, I would try adding the node using native DOM methods, rather than jQuery. It's possible the way jQuery manipulates the DOM isn't genial to how A-Frame listens for new scene nodes. A-Frame is not magic and does not, to my knowledge, use generic DOM mutation events to discover changes - it wraps specific DOM methods with interceptors that trigger Three.js operations.

(I wish the project was more clear about this, however - at present it's quite hard to use DOM scripting confidently because it's difficult to reason about what A-Frame expects).

As an aside, though - why are using jQuery in a React project? React already 'does' DOM manipulation. The whole purpose of JSX is to not have to create awkwardly interpolated template strings everywhere. Using jQuery in a React project is like buying a Ferrari and then taking it around town on the back of a flatbed truck.  **Description:**

`a-asset-item` is for preloading and caching assets.
But glTF data consists of glTF file and other files specified in the glTF file, like
.bin, .glsl, image(texture) files.

`<a-asset-item id="model" src="something.gltf"></a-asset-item>` preloads only .glTF file.

How can we preload all the involved files?

Do we make glTF special `a-asset-item` in which it loads glTF with `THREE.GLTFLoader` ?

- A-Frame Version: 0.5.0
- Platform / Device: Any
 > Does this block #2378?

No, different topics.

Yep, this isn't serious issue (yet) and isn't glTF specific.
I agree with adding `type="model"` property. (Or `all`?)
Let's keep discussing slowly to see if it's ok and there's any other better ways.
 we could infer from the `src` attribute that it's a glTF and do some superficial parsing to extract the assets and preload 'em so they're at least in the browser cache when the GLTFLoader does the heavy lifting? Seems to me that, assuming it's possible, the use of .glb (single file) should be encouraged if folks want to be able to preload as a generic single file?  

If taking the approach of having asset items invoke loaders, maybe just a preload boolean in the loaders (or some other not-horrible way the components should know).  If we use video as an comparative use case, if you want to preload video, you usually specify as element within a-assets, then reference by selector when you use it. +1 for focusing on .glb now that it's easy enough to make that happen.

A suggestion:
- optional field for asset items identifying the event name they wait for (e.g. `loaded`, `model-loaded`, `materialtextureloaded`)
- asset item types that are well known like image, video sound should have appropriate events utilized
- model parsing should fire an event when done, if it doesn't already, so it would be simple to wait for per the above  For example, make it less error prone for your app to stay in sync with upstream changes to `DEFAULT_CAMERA_HEIGHT`. My app is updating the position of a camera, and needs to keep the `DEFAULT_CAMERA_HEIGHT` around to offset the Y param when setting, because the camera is auto adding 1.6 to the Y. Otherwise, the Y param of the camera jumps by +1.6 every time I set it. Are you looking for this value?
`document.querySelector('[camera]').components.camera.data.userHeight`
 Perhaps you can set the camera user height property to zero to avoid the offset?

http://codepen.io/machenmusik/pen/QdewNZ >Are you looking for this value?
document.querySelector('[camera]').components.camera.data.userHeight

It would be nice to have the value before the camera is rendered.

> Perhaps you can set the camera user height property to zero to avoid the offset?

I want to use the default user height.

My flow is as follows:

```hbs
<a-camera position={{position}}></a-camera> // y = 0
```

```js
let position = document.querySelector('[camera]').getAttribute('position'); // y = 1.6
```

```hbs
<a-camera position={{position}}></a-camera> // y = 1.6
```

```js
let position = document.querySelector('[camera]').getAttribute('position'); // y = 3.2
``` > You can access the default value before initialization like this: AFRAME.components.camera.schema.userHeight.default

@dmarcos I saw that value when sniffing, but it only ever shows 0 for me. Even when on desktop and without a camera or scene. given that the default user height is not coming from VR or HMD setup, but is instead a hardcoded value, perhaps to avoid the offset issue, you can handle user height yourself and don't let the framework code mess things up for you. > Can you use cameraEl.getAttribute('camera').userHeight to get the value?

@ngokevin mentioned up here https://github.com/aframevr/aframe/pull/2418#issuecomment-281202407

That is the right value, but it would be very convenient to have that value after I import aframe, but before I start rendering the scene/generating html. it looks like because of the way handlebars is being used, you'd like to remove (subtract) the user height offset, but that rather than simply setting userHeight to zero so that no offset is applied, you'd like to be able to access the default user height value.  Assuming that's the case, and you would therefore use @dmarcos suggestion except that you see the wrong value at present, perhaps that should be filed as a bug so that the behavior can be corrected for you, rather than asking for internal constants to be exposed? interesting: 
- the default camera userHeight is, in fact, zero.
- if no camera is defined, and one is therefore injected into the scene, it gets a userHeight of 1.6, which is the value of an unexposed constant.
- because the userHeight is only set to non-default value upon injection, it is not available at time of `loaded` event, however it is available at `renderstart`

```
<script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
<a-scene debug>
  <a-sky color="#3CF"></a-sky>
  <a-text align="center" position="0 1 -2" value="Hi there."></a-text>
</a-scene>
<script>
  document.querySelector('a-scene').addEventListener('renderstart', function (evt) {
    document.querySelector('a-text').setAttribute('value', 'Default camera userHeight:\n' + evt.detail.target.camera.el.components.camera.data.userHeight);
  });
</script>
```
 @machenmusik You are right, there may be a bug somewhere in here that I am trying to work around, but I'm so new to Aframe so I just hacked around it for the time being. I think what I observed was if you initially render this

`<a-camera position="0 0 0">`

position Y evaluates to 1.6. Then if you change it after render using handlebars (ember.js might remove the element and re-add it) to this

`<a-camera position="5 0 6">`

position Y evaluates to 0 now, because after initial render, Aframe stops autopositioning the Y param.

(my workaround code if anyone is interested)
https://github.com/kellyselden/ember-a-frame/blob/v0.0.2/tests/dummy/app/components/my-camera.js#L9
https://github.com/kellyselden/ember-a-frame/blob/v0.0.2/tests/dummy/app/components/my-camera.js#L19-L20
https://github.com/kellyselden/ember-a-frame/blob/v0.0.2/tests/dummy/app/components/my-camera.js#L46-L52 A simpler approach may be to use something similar to the previous snippet to get the default userHeight from the injected camera, then modify said camera by setting userHeight to 0 so that offsets will no longer be applied, and to whatever subsequent Y values you want.  But I'm not sure that is necessary since the default userHeight is hardcoded to 1.6, so you don't really need to wait for renderstart since you know what you are going to get back. > But I'm not sure that is necessary since the default userHeight is hardcoded to 1.6, so you don't really need to wait for renderstart since you know what you are going to get back.

This is the original issue. I know the hardcoded value is 1.6, but to make my app less brittle, I'd like to get the value from the framework in case it ever gets tweaked. OK, then go ahead and wait for renderstart... e.g.
http://codepen.io/machenmusik/pen/GWpxzY @machenmusik https://github.com/aframevr/aframe/pull/2418#issuecomment-282888041

> That is the right value, but it would be very convenient to have that value after I import aframe, but before I start rendering the scene/generating html.

I feel like we are going in circles. I've laid out the use case why it would be nice to have the value as a constant and not a runtime calculated value. The remaining question is whether it is worth it for you all to expose it. @ngokevin It was mentioned above that `AFRAME.components.camera.schema.userHeight.default` should have it, but it is only ever zero in my testing, when it seems like it should be 1.6. Maybe there's bug there where it is not 1.6 when it is supposed to be? If so, that would be a good alternative to a public constants section. @kellyselden - @ngokevin statement matches my observations above https://github.com/aframevr/aframe/pull/2418#issuecomment-282892629 it seems that you want two things to happen:

1 - let aframe pick the default camera height

2 - let your code set the height to the value it wants

and that due to your current methodology, you would need a private constant due to the default camera having a non-zero userHeight offset value.

the codepen above is an alternative method that still satisfies 1 and 2, but removes the requirement for the private constant to be exposed to your code, because the camera userHeight gets set to zero and thus you no longer need to offset the desired Y value by the userHeight.

without understanding more about your specific use case, it isn't clear why the alternate method does not suffice.
 Closing for now. @machenmusik's workaround is better than my workaround. It makes waiting for first render not as bad as before. Will reopen if any new info arises.  what's this ? a custom element ?

```
<a-scene>
``` Thanks for your reply!  **Description:**
Exposes 'axismove' events from tracked-controls component in vive-controls as 'trackpadmoved'.

https://github.com/aframevr/aframe/issues/2413

**Changes proposed:**
- add onAxisMoved event listener function, which exposes the underlying event
 really we should do this for any controller button with axes, right? stated properly... in thinking about this a little more after having coffee, i think what we currently lack is a proper mapping of axes to buttons (or lack thereof) - as an example, if a controller had both 2-axis depressable stick (touch style) and 2-axis trackpad (vive style) we might want button mappings thumbstick and trackpad, and axismove events would ideally be mapped to thumbstick and trackpad as appropriate.

but in current degenerate state, maybe hardcoding it for those controllers is okay for now. i am kinda indifferent to turning axis values into a map, the nice thing about array representation is it supports 1D, 2D and in theory 3D Updated PR per review comments. should event be trackpadmove, along the lines of mousedown/up/move? @dmarcos #2379 may make this tricky to support correctly on touch as well, have you folks made any progress in fixing? i think there may be confusion issues due to #2379 (@dmarcos since you changed listeners to be attached always, an entity that has both vive and touch controls will emit both vive and touch events on axismove) but following the pattern it should be straightforward to adopt similar for touch (thumbstickmoved).  might be worth generalizing all that to gamepads though since it has nothing to do with tracked controls pose  This is done, right?  Although there seem to be some spurious events firing per discussion on #2423   If the type is explicitly given or inferred, the normalisation procedure of a schema property should also normalise its default value making it pass through the `parse` function. This would allow using the attribute string representation as the default value (see bug #2410)

- A-Frame Version: master
- Platform / Device: all
- Reproducible Code Snippet or URL:

```html
<script>
  AFRAME.registerComponent('test', {
    schema: { v: {type: 'vec2', default: '1 1'} }
  });
</script>
<a-scene>
  <a-entity test></a-entity>
</a-scene>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    var e = document.querySelector('a-entity');
    var def = e.components.test.schema.v.default;
    var shouldBeTrue =
      JSON.stringify(def) === JSON.stringify(e.getAttribute('test').v);
    console.log('Are equal?', shouldBeTrue);
  });
</script>
``` Cool. Will work on this one.   I think it would be nice if we could add a inline help into the data scheme for component/system. Thus devs can describe how to use each data field of their components and making them easier to reuse by others devs.

The format of the help string may be plaintext or markdown.

usecase: Thus one can easily extracts it. e.g. to be display in the inspector. to play with a component from the inspector is very nice to learn

usecase 2: automatic generation of documentation. e.g. we autogenerate a markdown output, and then copy that directly a github README.md   I consider accessing sub objects pretty important. It would allow users to pack all (or many) objects in just one scene, so it can be much more convenient both authoring the assets and loading them (with the additional benefit of having only one request). Also, I can imagine a lot of cases where you want to access to a subobject for changing its properties. Think for example, changing the color of a button of a controller, rotating a head, fading out a tooltip..)

A-Frame helps user to layout and customize basic objects very easily in a declarative way, but when it comes to full, complex or simple 3d models, it just load them and tell the user: "ok, now you are alone with this object and threejs, I won't help you any more". And I think that is a big barrier for many users.

I think we could help in two ways:

1. Adding a model-object component like the one suggested in this issue. Declarative, easy, very A-Framey.

2.  Adding a lightweight abstraction API of threejs tightly coupled to the A-Frame component structure, introduced by @dmarcos in his lastest post. I initially thought of something like this:

```javascript
get(selector)
setVisible(selector, visible)
hide(selector)
show(selector)
toggleVisible(selector)    
remove(selector)
setMaterial(selector, material)
setLambert(selector, params)
setPhong(selector, params)
setConstant(selector, params)
fadeTo(selector, to, duration, delay)
fadeIn(selector, duration, delay)
fadeOut(selector, duration, delay)
setMaterialParameters(selector, params)
setShape(selector, shape, weight, duration, delay) //shape keys
play(selector, animation, delay) //animations
stop(selector)
getMaterials(selector) //keyed array with of all materials

properties: 
.loaded // model is loaded
.materials[] // keyed array with all materials
.meshes[] // keyed array with all objects
```

* parameter `selector` can be a string or an array of strings, for selecting objects by name. Regexp could be an option too. 

Example of use:
```javascript
      AFRAME.registerComponent('mycomponent', {
        modelLoaded: function(evt) {
          this.setLambert('cube1', {color:'red'});
          this.setPhong('cube2', {color:'green'});
          this.setMaterialParameters('head', {map:'#facetex2'});
          this.setShape('face', 'mouthopen', 1, 2});
          this.fadeOut('sphere', 5, 10);
        },
        tick: function (time, delta) {
          if (!this.loaded) { return; }
          this.meshes['chair'].position.x = Math.sin(time / 100) * 0.1;
        }
      })
```

(of course this is not a very well thought implementation, take it as a simple and naive first approach) Another way I was thinking of this was to make the model loader create A-frame entities with selector-friendly id values from the sub-object names, which is along the lines of loading a scene or hierarchy rather than object by object

Sorry just realized @donmccurdy said much the same, apologies for duplication So maybe a hierarchical loader that is different, that would unpack into an entity tree... model-tree?  Separate from single-entity loaders to avoid confusion. Yeah I think preserving structure is important in many use cases, for example when you want to grab references to joints for a skinned mesh.

I like the idea of 2 components, 1 for cloning individual objects out of the model (the original thing proposed above) and 1 for making existing objects in the model hierarchy selectable and configurable with components.

For example:
```html
<a-assets>
  <a-asset-item id="room" src="room.gltf"></a-asset-item>
  <a-asset-item id="avatar" src="avatar.gltf"></a-asset-item>
</a-assets>

<!-- clone the mesh named "chair" from room.gltf into the scene -->
<a-entity model-object="from:#room; obj:chair"></a-entity>

<!-- Make references to  the specific named nodes inside avatar.gltf available as aframe entities -->
<a-entity id="player" gltf-model="#avatar">
  <a-entity id="head" camera look-controls wasd-controls></a-entity>
  <a-entity id="left-hand" model-selector="left_hand_joint" hand-controls="left"></a-entity>
  <a-entity id="right-hand" model-selector="left_hand_joint" hand-controls="right"></a-entity>
</a-entity>
```

This is nicer than the approach of just inflating all entities as it both saves you the overhead of doing so and also allows you to declaritively configure the components to bind to parts of the model.

I see 2 tricky bits here:
1. The 1:1 mapping of the ThreeJS hierarchy to the aframe hierarchy is broken down a bit here, the `model-selector` entities actually represent some entities that might be deeply nested in the parent's structure but only show 1 level of nesting in aframe. Not sure how this would be done without adding some hacks to `setObject3D`.
2. Ideally there would be a way to defer initializing the other components on the entity until the model has loaded in a way that doesn't require those components to know they are dealing with entities inflated from a model file. Maybe this could be solved by doing something similar to `aframe-template-component` like:

```html
<a-assets>
  <a-asset-item id="avatar" src="avatar.gltf">
  </a-asset-item>
  <script id="avatar-selector-tempalte">
    <a-entity id="head" camera look-controls wasd-controls></a-entity>
    <a-entity id="left-hand" model-selector="left_hand_joint" hand-controls="left"></a-entity>
    <a-entity id="right-hand" model-selector="left_hand_joint" hand-controls="right"></a-entity>
  </script>
</a-assets>

<a-entity id="player" gltf-model="src: #avatar selector-template: #avatar-selector-template"></a-entity>
``` @ngokevin this is cool for handling the first case, where you want to clone individual objects out of a gltf file, but doesn't work for the case where you only want to reference nodes but keep them in their original hierarchy. My current usecase for this is referencing joints for skinned meshes and specific materials. Yep, that's what I am doing now, would just be nice to have some declarative way to get at these so reusable components (with no knowledge that they are operating on some deeply nested node) could be added to them.  the pool component is creating the pool of entities twice. 

in init and in the update that runs after init. 

`if (oldData.mixin !== data.mixin || oldData.size !== data.size)` (line 43)  is returning true and triggering a second pool to be created. (I think because oldData has no value on this first run of update?)

- A-Frame Version: 0.5.0, 0.4.0
- Platform / Device: desktop browser tested
- Reproducible Code Snippet or URL: aframe/examples/test/pool (checking the pages html will confirm 20 'laser' entities instead of 10)


  You should probably wait with adding the token until A-Frame has been fixed to work with WebVR in mobile Chrome. See https://github.com/aframevr/aframe/issues/2444. Seeing [some issues](https://github.com/googlevr/webvr-polyfill/issues/199) here with regard to Chrome with native WebVR API on (via origin trials) where getVRDisplays() hangs and the polyfill does not polyfill.  **Description:**

Hi bro's
Today, an another tricky question. 
I notice, asset managment system trigger for each asset ( img , video ....) an another XHR request making impossible to check each asset loading state
In extenso: 2 times img xhr make the first img ( dom element ) having complete state to true whereas the img is not complete. 
The second fact is that it makes 2 load from 2 initiator making event handling on loading state and ready state wrong anytime. 
2 solutions: Let dom handle Xhr's Requests for IMG and VIDEOS and then update three.js texture with img or video blob (making partial video stream possible ).
You will probably have to listen to DOMMutations on a-assets
The second one is to create diffrents Events for video and img loading and complete and attach those events on elements, but it won't correct Double Loading ( Thx to Aframe Asset Managment System ).

Cordialy, 
An Aframe Lover.

- A-Frame Version: 0.5.0 
- Platform / Device: All Platforms
- Reproducible Code Snippet or URL:
No need to have a complex reproduce, just put multiple img elements into a-asset and then look the network graph, also try to catch loaded events :). 
<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

When I develop locally using `aframe.min.js`, it doesn't look as though any of the SDF fonts get loaded. When I switch to `aframe-master.min.js`, the fonts are fetched by XHR. 

This confused me a little when first developing. Does this file need to be patched / updated?

- A-Frame Version: `aframe-v0.5.0.min.js` in `110055d`.
- Platform / Device: all browsers
- Reproducible Code Snippet or URL:

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>A-Frame Demo</title>
    <script src="js/aframe.min.js"></script>
</head>
<body>
    <a-scene auto-enter-vr="display:all">
        <a-text
                id="textPrimitive"
                position="0 1 -4"
                align="left" anchor="left" width="5"
                value="anchor='left' (default align) 123456789012345678901234567890123456789012345678901234567890">
        </a-text>

        <a-entity
                position="0 2 -4"
                geometry="primitive: plane; width: 5"
                material="color: #333333"
                text="color: white; anchor: center; font: sourcecodepro;
                  value: anchor='center' (default align) SourceCodePro 123456789012345678901234567890123456789012345678901234567890"
        ></a-entity>

        <a-entity
                position="0 3 -4"
                text="color: white; baseline: top; anchor: right; width: 5; font: aileronsemibold;
                  value: anchor='right' baseline='top' (default align) Aileron-Semibold 123456789012345678901234567890123456789012345678901234567890"
        ></a-entity>

        <a-entity
                position="0 4 -4"
                text="color: white; align: left; width: 5; font: exo2semibold;
                  value: align='left' (default anchor) Exo2SemiBold 123456789012345678901234567890123456789012345678901234567890"
        ></a-entity>

        <a-entity
                position="0 5 -4"
                text="color: white; align: center; width: 5; font: kelsonsans;
                  value: align='center' (default anchor) KelsonSans 123456789012345678901234567890123456789012345678901234567890"
        ></a-entity>

        <a-entity
                position="0 6 -4"
                text="color: white; align: right; width: 5; font: monoid;
                  value: align='right' (default anchor) Monoid 123456789012345678901234567890123456789012345678901234567890"
        ></a-entity>

        <a-entity
                position="0 7 -4"
                geometry="primitive: plane; width: 8; height: auto"
                material="color: #0000FF"
                text="color: white; align: center; font: https://cdn.aframe.io/fonts/DejaVu-sdf.fnt;
                  value: a-plane align:center (anchor:align) DejaVu width 8 1234567890123456789012345678901234567890">
        </a-entity>

        <a-sky color="#222"></a-sky>
    </a-scene>
</body>
</html>
```
 The font data is not contained within the aframe JS, they are loaded via CDN.

You raise a good point / question of whether the default font should be fully embedded, but doing that may increase the size of JS file as well as penalizing those that only want to use custom fonts.

@dmarcos @ngokevin was there some issue in creating the aframe-v0.5.0.min.js file, that does not exist in aframe-master.min.js? @machenmusik - it wasn't that I expected the script to directly embed the font file; rather that I expected the script to fetch the font by AJAX, like the `master` bundle. I assume this is the intended behavior whatever the release. if you are loading your web page from file system, there may be a security permissions issue.
are you using a local server e.g. `npm start`? 

see this codepen which works with aframe.min.js:
http://codepen.io/machenmusik/pen/rjXNmq per https://github.com/aframevr/aframe#builds ...

To use the latest stable build of A-Frame, include aframe.min.js:

```
<head>
  <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
</head>
``` @machenmusik I was operating the page from a local webserver, yes. I didn't see any permissions issues in the console - in fact, the network tab showed no outbound XHRs for fonts at all (e.g. to `cdn.aframe.io/fonts/Roboto-msdf.json`). It was very curious.

In the end, I just used the master build, and now text renders absolutely fine. I have never used the dist/aframe-v0.5.0.min.js file, not sure it is built correctly... @dmarcos @ngokevin?
When you said aframe.min.js, I thought you meant https://aframe.io/releases/0.5.0/aframe.min.js which seems to work fine as shown in codepen. I cannot replicate the issue any longer.

See this jsbin - https://output.jsbin.com/becumezaya/1 - where I'm pulling in the version of `aframe-v0.5.0.min.js` that was committed with the [0.5.0 release](https://github.com/aframevr/aframe/commit/110055d70ec0fa870ea566b9705406498431ab54#diff-374fe7cddd9a8e5ffec5bb33cc6f4c18) (#110055d). The fonts render absolutely fine. Looking at the network panel for font requests, all seems well.

I'm really at a loss to explain my problem. The only thing that occurs to me is that I my local network connectivity is poor - I'm part of a large team that right now has to share a single consumer-grade broadband connection, using a single consumer-grade router. Perhaps my font requests were just the victim of QOS or something? Or perhaps our poor router just couldn't handle all the connections.

I've seen delays in font rendering before - is there a way to make A-Frame wait for font assets before rendering? Would adding them as `a-asset-item`s work?  the reason to have the check inside setMap is to handle the case where the property has changed in between the original call and the texture load that results in setMap (i.e. if you asked a texture to be loaded then changed it before the load completes, don't apply the texture in setMap)

removing it will cause a regression and hard to trace errors... it seems that the check to avoid redundant texture load operations wouldn't work then, also not sure it would work correctly for cases whether multiple textures being loaded for same material/shader.

what in #2393 annoys you? probably some way to make the falsy possibilities (specifically null and empty string) unified before the setMap check, if that is what was ugly to you @dmarcos take a look at latest #2393 ?  should be much more comprehensible    One suggestion for a topic: what are the goals for the impact that A-Frame has outside of code base deliverables?

For example, we would like to enable x number of web developers who have no prior 3D/VR experience to be able to rapidly prototype applications; or y number of useable A-Frame projects are built, or support for A-Frame on z devices.

It doesn't need to be this specific to start, but it'd be very helpful even to have a basic discussion. The outcome of this discussion would be actionable items that regional advocates can implement to drive them forward, such as meetups or hackathons around topic  x, y, or z, and for a basic agreed upon mechanism to measure the progress of these efforts.  Fixes #2388  easiest way to test - run local instance with this change via `npm start`, and load @fernandojsg's codepen on same machine, changing aframe script src to `http://localhost:9000/build/aframe.js` ok, LGTM now... @dmarcos take a look at latest? should be much more comprehensible specifically, latest added comments try to better explain why having a single remembrance of last texture load attempt is insufficient, per discussion on #2402 LGTM... @dmarcos ?  Thanks for your work on this. Sometimes it's hard to make sense why a model isn't showing up correctly, and this will prove really useful. For example, I have a collada model with some squishy stretch marks which may be related to bump/normal maps. I'll remove them tonight and see if the problem persists. Hi @donmccurdy, if I understand it correctly this issue is open to add a new section on https://aframe.io/docs/0.5.0/introduction/faq.html page, may be right after "Which 3D model formats work?" section?  **Description:**

- A-Frame Version:
- Platform / Device:
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 These are my init and remove functions which worked for me. Basically I have removed the listeners in the remove() function. 

  init: function () {
    // this.id = Math.floor((Math.random() * 100000) + 1);
    // console.log("init cursor " + this.id);
    var cursorEl = this.el;
    var canvas = cursorEl.sceneEl.canvas;
    this.fuseTimeout = undefined;
    this.mouseDownEl = null;
    this.intersectedEl = null;

    // Wait for canvas to load.
    if (!canvas) {
      cursorEl.sceneEl.addEventListener('render-target-loaded', this.init.bind(this));
      return;
    }

    // Attach event listeners.
    this.binderMouseDown = this.onMouseDown.bind(this);
    this.binderMouseUp = this.onMouseUp.bind(this);
    this.binderRaycasterIntersection = this.onIntersection.bind(this);
    this.bindeRaycasterIntersectionCleared = this.onIntersectionCleared.bind(this);

    canvas.addEventListener('mousedown', this.binderMouseDown);
    canvas.addEventListener('mouseup', this.binderMouseUp);
    cursorEl.addEventListener('raycaster-intersection', this.binderRaycasterIntersection);
    cursorEl.addEventListener('raycaster-intersection-cleared', this.bindeRaycasterIntersectionCleared);
  },

  remove: function () {
    // console.log("remove cursor " + this.id);
    var cursorEl = this.el;
    var canvas = cursorEl.sceneEl.canvas;
    canvas.removeEventListener('mousedown', this.binderMouseDown);
    canvas.removeEventListener('mouseup', this.binderMouseUp);
    cursorEl.removeEventListener('raycaster-intersection', this.binderRaycasterIntersection);
    cursorEl.removeEventListener('raycaster-intersection-cleared', this.bindeRaycasterIntersectionCleared);
  },  **Description:** Regarding the file size of the final build I would like to make a few suggestions on how to reduce it.

- A-Frame Version: 0.5.0

First of all I think A-Frame is a great piece of software. It's API over the DOM elements was very novel for me and IMHO it's great to build even complex, fast and maintainable applications. So keep doing! Hope I can help with some PRs on the way. 👍 

So let's talk about some ideas in how to improve the final build size.

- *Remove `warn`, `console.warn` and other similar calls in the final build.* Similar to React I IMO it's nice practice to have code warnings to help developers only in the development and not production/minified version of A-Frame. Played around with this a little and was able to reduce file size by 20 KB. Finding more parts of the code only used for improving developer experience can increase this savings even more.

- *Do not include the whole package.json.* Have the version numbers of A-Frame and three.js is again really useful in development. However I thinks it's not necessary to include the whole package.json into the build. This can either be fixed by a similar matter like in the first suggestion, or by defining global variables read from the package file to get included in the build as simple variables.

Maybe you have other ideas and ways in mind how to further improve the build size? Happy to hear what you think.
 Thanks for the quick reply.

> A-Frame doesn't require use of a bundler

Talking about JSX, you're probably right. This language extension needs a proper build process. But essentially React also works without any build process at all by using `React.createElement` or the [`React.createFactory`](https://facebook.github.io/react/docs/react-api.html#createfactory) methods.

> My vote would be to avoid introducing separate production and development builds, because for many users just opening the JS console is an "AHA" moment.

I totally agree with this. And I favor libraries working with schema validations and developer warnings to improve performance and reduce errors. My proposal however would be to use the minified version of A-Frame also as the production build (which IMHO goes hand in hand), similar to how React or other libraries are doing it when you use the minified version from some CDN. React also claims to have better performance in the minified version by removing for example component property validation. Maybe similar techniques are also possible with A-Frame?

In short: IMO the minified version is also the production build and should as such be as small and performant as possible, while the development build is the unminified version providing better developer experience.

> Perhaps we could consider moving from Browserify to Webpack or Rollup (I believe the latter two support tree-shaking?).

Thought the same and would like to create a PR for moving to Webpack if appropriate. > As Don said, React is a different ecosystem where you're pretty much mandated to use build tools. Even though you could theoretically do it, no one uses React without build tools.

To be clear, I don't want use React to compare the build process. I agree, that A-Frame should be useable without one. What I wanted to compare is the difference between production and development build, between minified and unminified version of A-Frame.

> I'd be interested in seeing the build size comparisons, and I do prefer Webpack, but I don't think you save much size besides the tiny overhead for each module.

I think that this is better than nothing. We want to use A-Frame to be able to quickly build 3D embeds into bigger editorial articles working both on desktop and mobile. We are happy about every byte we can spare on the way.

One thing I'd like to add is the compatibility with other Webpack, Rollup and browserify setups. I would like to use the refactoring to also make it easier to include A-Frame and Three.js into an existing build process. This would also solve issues like https://github.com/aframevr/aframe/issues/1989 or https://github.com/aframevr/aframe/issues/1041. **AFAIK this will not mean to break compatibility with CDN usage. My goal would be to have the same build steps and build files exporting to global, like before.**

If you have any more feedback, don't hesitate to share it. A quick update: Worked on the refactoring for a while now and was able to reduce the file size of the minified build to 976 kB (268 kB gzipped). This build still includes the warnings. So there is a bit more, we can gain.

Though I still have a problem with using this build in the examples due to a weird behaviour of the Webpack `style-loader`. Hope to be able to fix it soon. @donmccurdy very nice findings. Will try to tackle what is possible with Webpack. Especially the working on the size of the SVG files sounds promising.

> The size of the assets that the average VR application is going to load will make a-frame build size negligible in comparison.

@dmarcos Agree on this. We just had the problem of creating low-poly meshes to reduce script size. Nice to know, that the controllers can be simplified, too.

> Can you provide more info about your particular use case? How big is the a-frame build compared to other assets that your average embed loads?

I'm working for the interactive team of an online news site and we plan to create more 3D and VR visualisations to enhance reading experience. More than 50 % of our users surf the website with a mobile device, therefore the size of assets is very important for us. The average size of embed assets is between 60 to 200 kB. But we are aware that WebGL based experiences come with some overhead. However as I said we are happy for every byte we can spare. I'm very sorry, but my job situation changed and I'm therefore not able to spend so much time on this issue any longer. I'll try to find time in the coming month to create a WIP PR to share my current state with implementing Webpack.  The example scene has a texture that isn't available and have entities positioned on the camera. Newcomers might wonder what's "wrong".

**Description:** fixed the simple scene

**Changes proposed:**
- remove the texture
- positioned entities properly
  **Description:**

- A-Frame Version: 0.5.0
- Platform / Device: Linux (Solus)
- Reproducible Code Snippet or URL:
  * Followed these steps: https://github.com/aframevr/aframe#local-development
  * Try to run a-frame which results in an error: `npm run start`

```
$ npm run start

> aframe@0.5.0 start /data/Projects/a-frame/aframe
> npm run dev


> aframe@0.5.0 dev /data/Projects/a-frame/aframe
> npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify


> aframe@0.5.0 build /data/Projects/a-frame/aframe
> mkdirp build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js


> aframe@0.5.0 browserify /data/Projects/a-frame/aframe
> browserify src/index.js -s 'AFRAME' -p browserify-derequire "--debug" "-t" "[envify" "--INSPECTOR_VERSION" "dev]" "-o" "build/aframe.js"

[0000] info  Server running at http://172.16.1.89:9000/ (connect)
[0001] info  LiveReload running on 35729
events.js:160
      throw er; // Unhandled 'error' event
      ^

Error: watch examples ENOSPC
    at exports._errnoException (util.js:1022:11)
    at FSWatcher.start (fs.js:1429:19)
    at Object.fs.watch (fs.js:1456:11)
    at createFsWatchInstance (/data/Projects/a-frame/aframe/node_modules/chokidar/lib/nodefs-handler.js:37:15)
    at setFsWatchListener (/data/Projects/a-frame/aframe/node_modules/chokidar/lib/nodefs-handler.js:80:15)
    at FSWatcher.NodeFsHandler._watchWithNodeFs (/data/Projects/a-frame/aframe/node_modules/chokidar/lib/nodefs-handler.js:228:14)
    at FSWatcher.NodeFsHandler._handleDir (/data/Projects/a-frame/aframe/node_modules/chokidar/lib/nodefs-handler.js:407:19)
    at FSWatcher.<anonymous> (/data/Projects/a-frame/aframe/node_modules/chokidar/lib/nodefs-handler.js:455:19)
    at FSWatcher.<anonymous> (/data/Projects/a-frame/aframe/node_modules/chokidar/lib/nodefs-handler.js:460:16)
    at FSReqWrap.oncomplete (fs.js:123:15)

npm ERR! Linux 4.9.7
npm ERR! argv "/usr/bin/node" "/usr/bin/npm" "run" "dev"
npm ERR! node v6.9.5
npm ERR! npm  v3.10.10
npm ERR! code ELIFECYCLE
npm ERR! aframe@0.5.0 dev: `npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the aframe@0.5.0 dev script 'npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the aframe package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs aframe
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls aframe
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     /data/Projects/a-frame/aframe/npm-debug.log

npm ERR! Linux 4.9.7
npm ERR! argv "/usr/bin/node" "/usr/bin/npm" "run" "start"
npm ERR! node v6.9.5
npm ERR! npm  v3.10.10
npm ERR! code ELIFECYCLE
npm ERR! aframe@0.5.0 start: `npm run dev`
npm ERR! Exit status 1
npm ERR! 
npm ERR! Failed at the aframe@0.5.0 start script 'npm run dev'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the aframe package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     npm run dev
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs aframe
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls aframe
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     /data/Projects/a-frame/aframe/npm-debug.log
```

 The accepted answer works. After upping my inotify max watches I was able to run ```npm start``` and with active reloading and nodejs running stable.

For future reference this is the command used. You probably can also use ```npm dedupe``` to reduce the number of files that Grunt wants to keep an eye on. 

```echo fs.inotify.max_user_watches=582222 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p``` Did not work for me:

sh: 1: mkdirp: not found

npm ERR! Linux 4.4.0-62-generic
npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "run" "build"
npm ERR! node v4.2.6
npm ERR! npm  v3.5.2
npm ERR! file sh
npm ERR! code ELIFECYCLE
npm ERR! errno ENOENT
npm ERR! syscall spawn
npm ERR! aframe@0.5.0 build: `mkdirp build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js`
npm ERR! spawn ENOENT
npm ERR! 
npm ERR! Failed at the aframe@0.5.0 build script 'mkdirp build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js'.
npm ERR! Make sure you have the latest version of node.js and npm installed.
npm ERR! If you do, this is most likely a problem with the aframe package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     mkdirp build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js
npm ERR! You can get information on how to open an issue for this project with:
npm ERR!     npm bugs aframe
npm ERR! Or if that isn't available, you can get their info via:
npm ERR!     npm owner ls aframe
npm ERR! There is likely additional logging output above.
npm ERR! Linux 4.4.0-62-generic
npm ERR! argv "/usr/bin/nodejs" "/usr/bin/npm" "run" "build"
npm ERR! node v4.2.6
npm ERR! npm  v3.5.2
npm ERR! path npm-debug.log.2343658631
npm ERR! code EACCES
npm ERR! errno -13
npm ERR! syscall open

npm ERR! Error: EACCES: permission denied, open 'npm-debug.log.2343658631'
npm ERR!     at Error (native)
npm ERR!  { [Error: EACCES: permission denied, open 'npm-debug.log.2343658631']
npm ERR!   errno: -13,
npm ERR!   code: 'EACCES',
npm ERR!   syscall: 'open',
npm ERR!   path: 'npm-debug.log.2343658631' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm ERR! Please include the following file with any support request:
npm ERR!     /var/www/html/aframe/npm-debug.log


I tried after executing the suggested command by @donmccurdy 

Regards. Tried with changing the ownership & with root, but the issue still persists.

npm ERR! Tell the author that this fails on your system:
npm ERR!     mkdirp build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js
  **Description:** The screenshot component doesn't save the projection type as equirectangular in EXIF metadata.

- A-Frame Version: 0.4.0 and above
- Platform / Device: all
- Reproducible Code Snippet or URL: https://aframe.io/examples/showcase/helloworld/
 Reached the same conclusion, too heavy for that very specific use case, wondering if someone has a lighter solution. Yes it's precisely what I did before cf https://twitter.com/utopiah/status/831496563780378625 so... in case others stumble upon the same issues:

1. `<ctrl>+<alt>+<shift>+s`
1. `exiftool -ProjectionType="equirectangular" myscreenshot.png`

Optionally if for Facebook
1. `convert myscreenshot.png myscreenshot.jpg`  Hi,
I'm getting this error-message when I'm opening any Scene that uses A-Frame 0.5.0 on my iPhone 6s.

<img width="962" alt="screen shot 2017-02-14 at 11 55 43" src="https://cloud.githubusercontent.com/assets/125398/22926492/0f954ed4-f2ad-11e6-8f3f-2566c7516af1.png">

It's a bug in the WebVR Polyfill, but I'm reporting it here because it looks like this fork of the Polyfill is only used for A-Frame:
https://github.com/dmarcos/webvr-polyfill#a02a808 (probably related to #2008 and #2352 )

In @dmarcos version the path to the dpdb.json is relative, not absolute like in the master of the WebVR Polyfill.

The JSON is getting required by `var ONLINE_DPDB_URL = require('./dpdb.json');` so ONLINE_DPDB_URL already is the JSON object, not a path to a JSON file like in the polyfill master. 

The Bug is that the url in the xhr-request  `xhr.open('GET', ONLINE_DPDB_URL, true);` is the required JSON object - not a URL -  which is the cause for the 404 error. There's no need for the xhr-request because the JSON object is already stored in ONLINE_DPDB_URL.

The Bug is in https://github.com/dmarcos/webvr-polyfill/blob/master/src/dpdb/dpdb.js#L22 line 22-61


 Also the commit referenced here `"webvr-polyfill": "dmarcos/webvr-polyfill#a02a8089b"` in the package.json of a-frame  doesn't exist. It should be `#a02a808` instead of `#a02a8089b`.
https://github.com/aframevr/aframe/blob/master/package.json#L43 Hi @dmarcos ,
the bug probably occurs on all mobile devices. I only tested it with my old iPhone 5 and my 6s Plus, but since it fails to load the online DPDB (which should happen on both Android and iOS) you should be able to reproduce it on an Android phone...

On desktop i can reproduce the Bug when I use the Custom User Agent "iPhone" in the 'Responsive Design Mode' in the Firefox Dev Tools. This makes the polyfill return true when running the isMobile and isIOS checks.

1. Open https://aframe.io/examples/showcase/helloworld/ in Firefox
2. Open DevTools and enter 'Responsive Design Mode'
3. Write "iPhone" in the 'Custom User Agent' field 
4. Reload the page

When I do this, I'm getting the same error-messages that I get on my iPhone: 
- Error loading online DPDB
- And the 404

<img width="1403" alt="screen shot 2017-02-19 at 11 44 17" src="https://cloud.githubusercontent.com/assets/125398/23101657/182b87a8-f699-11e6-90b4-22bbc00456c5.png">

<img width="1630" alt="screen shot 2017-02-19 at 11 48 04" src="https://cloud.githubusercontent.com/assets/125398/23101669/54d4f93c-f699-11e6-8228-aeae792225d6.png">

 A possible Bugfix when requiring the online DPDB with a relative path:
https://github.com/dmarcos/webvr-polyfill/blob/master/src/dpdb/dpdb.js#L40
```javascript
  // XHR to fetch online DPDB file, if requested.
  if (fetchOnline) {
    // Set the callback.
    this.onDeviceParamsUpdated = onDeviceParamsUpdated;

    // BUGFIX: Use the JSON object already stored in ONLINE_DPDB_URL 
    // after requiring './dpdb.json' instead of making a XMLHttpRequest with the Object as URL
    this.dpdb = ONLINE_DPDB_URL;
    if (this.dpdb) {
      this.recalculateDeviceParams_();
    } else {
      // Error loading the DPDB.
      console.error('Error loading online DPDB!');
    }
    /**
    var xhr = new XMLHttpRequest();
    var obj = this;

    ////////////////////
    // BUG: This is where the request to [object Object] happens and the cause for the 404
    ///////////////////

    xhr.open('GET', ONLINE_DPDB_URL, true);
    xhr.addEventListener('load', function() {
      obj.loading = false;
      if (xhr.status >= 200 && xhr.status <= 299) {
        // Success.
        obj.dpdb = JSON.parse(xhr.response);
        obj.recalculateDeviceParams_();
      } else {
        // Error loading the DPDB.
        console.error('Error loading online DPDB!');
      }
    });
    xhr.send();
    **/
  }
``` Got the same error on Chrome running on Android...
Any solution?
Thanks,
DD I've had the same error on Chrome on Android too, didn't have a chance to find a solution... switched back to A-Frame 0.4.0 instead for the time being, not sure if the error actually breaks anything but was having a different plugin issue which also was fixed by dropping to 0.4.0.

Whatever the issue is, wasn't there in 0.4.0. It doesn't come up on desktop for me. But comes up on Chrome for Android and I think I also saw it when testing on iOS safari. it seems to me that the correct solution is:
(1) the DPDB JSON file that is to be required should be for DPDB_CACHE, not for ONLINE_DPDB_URL.
(2) if the intent is to avoid making an external call and to always use the DPDB cache, the simplest way is to act as if (or actually make sure) fetch_online is set to false; then the XHR will never happen.
(3) if the intent is to still make an external call, then ONLINE_DPDB_URL should be set to the appropriate URL string value. I have the same issue on Chrome 56.0.2924.87 on Android 6.0.1 (Samsung S5; tested with aframe master and 0.5.0). Also the examples on aframe.io does not work with Chrome 56 only with Chrome Dev, I guess the latter supports the WebVR API and don't have to use the polyfill. I tried the bugfix suggested by @Stefie and it resolves the issue. But another error occured afterwards:

> Uncaught (in promise) DOMException: Failed to load because no supported source was found.

also this call:

https://github.com/aframevr/aframe/blob/v0.5.0/src/core/scene/a-scene.js#L190 

failed on my Samsung S5 with Chrome 56. Regrettably, I don't have the exact error message anymore.

I resolved the issue by replacing `"webvr-polyfill": "dmarcos/webvr-polyfill#a02a8089b"` with `"webvr-polyfill": "^0.9.26"` in the `package.json` of the aframe project (master). I used [npm link](http://www.asyncdev.net/2013/12/working-on-related-node-modules-locally/) to use my adapted aframe version in my other project.

I don't know the root cause of the problem. I also compared the entry for my device in the https://github.com/googlevr/webvr-polyfill/blob/master/src/dpdb/dpdb-cache.js with the one in the "dmarcos/webvr-polyfill#a02a8089b" fork, but they are the same.

I also tested the current aframe master version (which cause the issue on my device) on a Google Pixel with the same browser version but Android 7 and it runs without problems on the Pixel.

Update: even the fixed version leads to a Chrome crash on my S5. But on a Pixel phone and a Nexus 5x it works fine. So, basically -

- we've forked webvr-polyfill because the online DPDB store is outdated, and we don't know who at Google can update it
- we want to use our own JSON of device params instead (`dpdb.json`)
- we're pulling that into dpdb.js with a require: `var ONLINE_DPDB_URL = require('./dpdb.json');`
- we're passing that 'URI' (actually an object) to XHR.open. Naturally, this fails, because it is not a string. We end up fetching a URI that ends with '[Object object]'.

I can think of three fixes, in order of work required:

1. Stop fetching DPDB over the network and just use our up-to-date JSON directly. For instance, we could merge our device data into dpdb-cache.js and instantiate DPDB with its `fetchOnline` set to false;
2. Poke / help / bribe / beg someone at Google to make them update their DPDB data, to support more devices, and then get rid of our own device definitions;
3. Create an open DPDB repository that anyone can submit changes to, serve it somewhere and make a PR so webvr-polyfill uses it. I've created a PR to fix this issue over in the webvr-polyfill fork. If anyone could take the time to look at it, that'd be really helpful: https://github.com/aframevr/webvr-polyfill/pull/3. @dmarcos I believe it's @borismus' team. However -

> unfortunately given my team's focus on Daydream, just haven't had time to split things up or add to dpdb.

https://github.com/googlevr/webvr-polyfill/issues/147#issuecomment-248077259 @cvan and I have been working on syncing up @thoragio's initiative at [webvrrocks/webvr-polyfill-dpdb](https://github.com/WebVRRocks/webvr-polyfill-dpdb) which publishes the DPDB at https://dpdb.webvr.rocks/dpdb.json instead of the no-longer-updated https://storage.googleapis.com/cardboard-dpdb/dpdb.json. The latest version of [webvr-polyfill](https://github.com/googlevr/webvr-polyfill) is in sync with this, as well as has the correct online URL, so #2700 will fix this issue  As per #2321.

Note that the example hasn't been tested on the documentation server due to CSP limitations.

**Description:** Adding an example, tips and limitations

**Changes proposed:**
- clarified documentation with examples with CSS customization
  The idea here is to click over a part (it's a CAD system looking complicated object made of many pieces) and have the piece clicked move to the side (kind of like an exploded parts diagram).
Works fine on Chrome, on Nightly it jumps instantly to new position, and what it's supposed to do is animate to new position (which works with Chrome).

JS code to have parts listen for click and emit a "move" event:
```
//onClick move part of the model
var i = 1;
for (i = 1; i < parts.length; ++i) {
    parts[i].addEventListener("click", function(){
        this.emit("move"); //emit is an aframe function that can be used to trigger animation
    });
};
```
aframe markup:
  `<a-mixin id="shiftParts" attribute="position" begin="move" from="0 0 0" to="-3 0 0" dur="1000" easing="ease" direction="alternate" ></a-mixin>`


- A-Frame Version: 0.5.0   A-Frame Version: 0.5.0 (Date 10-02-2017, Commit #5425acc)
Nightly: 54.0.a1
Chrome: Version 56.0.2924.87 (64-bit)
- Platform / Device: Windows 10
- Reproducible Code Snippet or URL:

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  is this due to https://github.com/aframevr/aframe/pull/2314#issuecomment-275812279 ?
specifically, if the event listeners for both `oculus-touch-controls` and `vive-controls` are active regardless of whether they are present... i think if you're not going to emulate the gamepad api (which would naturally emulate presence) then you need to inject something into the appropriate isControllerPresent to only attach when actively emulating, rather than leaving multiple instances of controls components with active listeners.  brings back to mind some of the earlier debates LOL.  note that if you have real vive and emulate touch or other supported controls, you would still have problems in all likelihood @dmarcos ?  perhaps you can add an `emulated` property that controls the event listener behavior when not present, as @ngokevin suggests  **Description:**

I've run into this problem while I was trying to bump Three.js to r84.

In r84 `THREE.GLTFLoader` expects that glTF file is loaded as arraybuffer.
(In r83 it loads as text)

https://github.com/mrdoob/three.js/blob/r84/examples/js/loaders/GLTFLoader.js#L28

But `a-asset-item` loads data as DOMString(text) in advance and keeps it in `THREE.Cache`.

`THREE.FileLoader` returns cached data if cache hits.

I mean, `THREE.FileLoader` returns cached text even though
`THREE.GLTFLoader` sets `THREE.FileLoader.setResponseType('arraybuffer')`
if `a-asset-item` loads in advance.

Actually `gltf-model.test` fails because of this issue with Three.js r84.

I have some ideas in my mind to solve this problem.

1. We don't use `a-asset-item` for `gltf-model`. Easy but inconvenient.
2. Disable `THREE.Cache`. Easy but worse performance.
3. Enable arraybuffer `a-asset-item` (#2112). (Add responseType prop?)
4. `a-asset-item` checks the extension of file and loads as arraybuffer if it's .gltf or .glb

I prefer 3.
Which one do you guys like or any other better ideas?

/cc @donmccurdy 
 IMO, it'd be nice to have 3. and 4.

We provide a way to set responseType in `a-asset-item` like this

    <a-asset-item id="model" responseType="arraybuffer" src="model.gltf"></a-asset-item>

It'd be worth for A-Frame non-core components which need to load data as non-text.
(`a-mmd` I've making is actually one of them)
They document the data type.

And also `a-asset-item` automatically sets appropriate responseType for the data which
A-Frame core supports. (arraybuffer for .gltf and .glb)
 I'm working on updating `a-asset-item` and have two questions.

1. Why does `a-asset-item` call `THREE.Cache.files[src] = responseText;` 

https://github.com/aframevr/aframe/blob/d055cfc56ef263d69c89c266921d6d9c4f5c3691/src/core/a-assets.js#L102

although it's called in `THREE.FileLoader`?

https://github.com/mrdoob/three.js/blob/accd0b3b2067ac05cd2557252ba4394fd04c7939/src/loaders/FileLoader.js#L137

And if it needs to explicitly call, why doesn't it use `THREE.Cache.add(src, responseText);`?

2. In `a-assets.test.js` this `var XHR_SRC = 'base/src/README.md';` is the path to non-exist file.

https://github.com/aframevr/aframe/blob/96df6c1f22fdf72c392be710d945bb9e8684b05c/tests/core/a-assets.test.js#L8

Is this intended?
 I tried. The all tests passed. I think I can remove.

Just in case, I checked if cache works with primitives/model example.

![image](https://cloud.githubusercontent.com/assets/7637832/23336404/244bcbb6-fb84-11e6-9214-4cf3a6d58baf.png)

1. before removing (ignore .dae because `THREE.ColladaLoader` doesn't support `THREE.Cache` in r83)
![image](https://cloud.githubusercontent.com/assets/7637832/23336396/d38d9128-fb83-11e6-925d-6532e628e896.png)

2. after removing. Still asstes are downloaded only once.
![image](https://cloud.githubusercontent.com/assets/7637832/23336395/b22170ea-fb83-11e6-85e4-57a95468f31d.png)

3. after I remove and comment out `THREE.Cache.enabled=true`. Assets are downloaded twice. 

https://github.com/aframevr/aframe/blob/6306459b2d193d7951e52ffb10bdfb3c10cdbea8/src/lib/three.js#L18

![image](https://cloud.githubusercontent.com/assets/7637832/23336400/e76fff46-fb83-11e6-8df0-b90d0a9ce3cf.png)
 And I guess

>In a-assets.test.js this var XHR_SRC = 'base/src/README.md'; is the path to non-exist file.

is a bug.

I'll make PR to fix them.
 BTW, what's this line in src/lib/three.js for?

    if (THREE.Cache) {

https://github.com/aframevr/aframe/blob/6306459b2d193d7951e52ffb10bdfb3c10cdbea8/src/lib/three.js#L17
  Use of Object.Assign causes React-Native to throw this error:

> One of the sources for assign has an enumerable key on the prototype chain. Are you trying to assign a prototype property? We don't allow it, as this is an edge case that we do not support. This error is a performance optimization and no spec compliant.

I see the error itself inside the android emulator upon launch.

- A-Frame Version: 0.5.0
- Platform / Device: OSX / Android Emulator Samsung Galazy S7

```
import 'aframe';
import {Entity, Scene} from 'aframe-react';
import React, { Component } from 'react';
import ReactDOM from 'react-dom';
import {
  AppRegistry,
  StyleSheet,
  Text,
  View
} from 'react-native';

export default class test2 extends Component {
  render() {
    return (
      <WebView
        source={{uri: '[URL]'}}
        />
    );
  }
}
```

AppRegistry.registerComponent('test2', () => test2);

Apparently the only solution is to revert to earlier versions of React Native. Is there another alternative? Can the same thing be achieved in a different way that won't cause this error?

References:
http://stackoverflow.com/questions/42196398/react-aframe-object-assign-error
https://github.com/facebook/react-native/issues/3634
https://github.com/facebook/react-native/issues/5507  **Description:**

This PR adds panner options to `sound` component.

**Changes proposed:**
- add `distanceModel`, `refDistance`, `rolloffFactor`, and `maxDistance` options to `sound` component

#2287
  **Description:**

Simply as title: just add a closing parentheses on one sentence. sure, thanks :)  I do wonder whether there will actually be only one specific string, vs. "OpenVR Controller" "OpenVR Gamepad" "OpenVR Flight Stick" "OpenVR Tracker" -- it may be that we end up needing prefix support agree.  may be a challenge to get consistent values across OS, as not all controllers have same ID namespaces like USB PID/VID  … new 'OpenVR Controller'

```
Note that due to recent browser-specific changes, Vive controllers may be returned
by the Gamepad API with id values of either "OpenVR Gamepad" or "OpenVR Controller",
so using idPrefix for Vive / OpenVR controllers is recommended.
```
 separating from #2191 so they can be discussed and merged independently

This is now necessary to accommodate both old and new Vive controller change in gamepad id string.  when you say `a-scene transmogrifier=...` you are creating a scene component.  systems are afaik not configurable in that manner... nowhere on that doc page do I see any example of syntax that would allow for configuring a system in the same manner one would configure. scene component.  so it is not at all clear to me, as a relative newcomer, that there is any expectation to be able to declare `a-scene systemName="systemProps: propValues"` so if you are saying you want that behavior, i would strongly suggest namespace prefix e.g. `a-scene system:name="propNames: propValues"` to specify and disambiguate. so what is the intended difference (if any) between system and scene component, except that systems get a reference injected into non-scene component instances, and do not need to be explicitly declared?  Default values taken from https://github.com/aframevr/aframe/blob/master/src/extras/primitives/primitives/a-curvedimage.js

**Description:**

**Changes proposed:**
-
-
-
  **Description:**
Entering VR mode, then exiting VR mode (via the small x in the top left corner), causes the enter VR icon to disappear, with the inability to enter VR mode again. Tested with a variety of apps, from our own to A-Frame's examples, with the same result each time.

When testing with [https://aframe.io/examples/](https://aframe.io/examples/), the following errors result when entering VR mode:
```
Uncaught (in promise) DOMException: play() can only be initiated by a user gesture.
AndroidWakeLock.request @ wakelock.js:34
(anonymous) @ wakelock.js:7
module.exports.fireEvent @ index.js:50
(anonymous) @ a-node.js:215
value @ a-node.js:214
enterVRSuccess @ a-scene.js:161
```
and
```
aframe.io/:1 Uncaught (in promise) DOMException: The page needs to be fullscreen in order to call screen.orientation.lock().
```

- A-Frame Version: 0.4.0
- Platform / Device: 12/16/16 Android Chromium build on Google Pixel/Daydream
- Reproducible Code Snippet or URL: No code snippet, but can provide screenshots (?) if desired? perhaps muting the video would help @Hermanya I'm not sure what you mean - we were never playing video. We were just entering/exiting VR mode on a variety of apps. `wakelock.js` is using a video under the hood to keep the device awake. `play()` fails because mobile chrome requires the user to tap on something on the screen in order to play a video. The only way around that is to mute the video, so that it's more like a gif and less annoying to the user. Thank you for explaining the errors that were encountered! But, I guess I'm confused now - I'm not sure how they tie into the enter VR button disappearing after exiting VR mode, or how that can lead to a solution to it. Judging by what you've said, that's the source of the errors, but it appears the errors may be independent of what we were experiencing then - our main issue was that when you clicked the enter VR mode, and entered, then exited, there was no way to re-enter VR mode (the button disappears) without refreshing the page.  I tried many threejs examples both which use the touch controller on FF Nightly and Chromium VR 

- https://threejs.org/examples/webvr_vive_dragging.html
- https://threejs.org/examples/webvr_vive_paint.html
- https://threejs.org/examples/webvr_vive_sculpt.html

But when I launch these aframe examples my controllers Stay locked at the first position where they show up when toggling the VR mode...

- https://aframe.io/a-painter/
- https://imgntn.github.io/jBow/


Any suggestion about what can be the issue ?

- Platform / Device: Window 10 oculus

 It's a known Apainter issue, not Aframe, with an open PR cf https://github.com/aframevr/a-painter/issues/183 you can try https://a-painter.herokuapp.com to see if that works for you with Touch in the interim?  **Description:**
Currently dataset is not pass through mixin component. 
document.querySelector('#my-first-cat').dataset (See example ) will result to contain only data-name. 

It will be powerfull to pass dataset through mixin (In a lot of case this is helpfull )
```
<a-asset>
            <a-mixin id="cat-mixin" 
            look-at="[camera]" 
            scale=".16 .16 .16" 
            data-eyes="brown"
           data-name="Nyancat" // will be the default data-name and overided by entity dataset
            text="value: miam"
            template="src: template/cat.template; type: html" ></a-mixin>
</a-asset>
<a-entity  id="my-first-cat" mixin="cat-mixin" data-name="Miaous" >

```
- A-Frame Version:
v0.4.0
- Platform / Device:
ALL
- Reproducible Code Snippet or URL:
NONE
<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**
For the component a-assets your video expect to be
```
<a-video src="airbending.mp4"></a-video>
```
Wich is not W3C compliant. 
The best implementation should be: 
```
            <video preload="auto"  autoplay="false" id="my-video-1" loop="false" webkit-playsinline playsinline controls muted>
                <source src="airbending.mp4" type="video/mp4"/> // At least one source
                 <!-- <source src="movie.ogg" type="video/ogg">-->
                  <!-- <a-entity text="value:fallback text for video">-->
            </video>
```
But you dont let in aframe master the possibility of using sources inside video tag.
If people use the source tag instead of scr directly inside video tag you send a warn about no src or srcObject but it's wrong.
The video contain an src object in source child element, and the best source tag is chosen to match best format for each navigators.
- A-Frame Version:
v0.4.0
- Platform / Device:
ALL
- Reproducible Code Snippet or URL:
None i do think the complaint about the warning is legitimate - as a compromise to get the video regression fix committed, i left in the warning, but to the author's point, src and srcObject on video element are not the only ways to attach valid sources to video objects. @maissani per discussion, when you mention the reference in `a-assets`, you mean `video` not `a-video` correct? yes, i mean video not a-video
If you use video with source like mentioned before, you will trigger a console.warn that is implemented on your library because currently: Aframe expect an src attribute.
The video will play in 3D environment but the warning hasn't to be triggered and at least aframe should take the right source that the navigator takes. 
if it's implemented directly with src in video use src in video.
and if a source or multiple source are implemented, chose the right source that the navigator has to take to provide the src attribute in aframe side.  @dmarcos , you check the ```video``` tag not the ```a-video``` tag, in ```a-asset```.
Playinline take no sence to VR context and controlls too but first: 
Playinline => Make able to play video on IOS 
Controlls => The same + with video you should play and pause video  after loaded to make it playable in VR without mouse cotrols on CHROME on Android and on IOS. 

Do you want me to send you IOS and Chrome on Android Issues related to video autoplay on mobile devices ? 
 
 This issue is only related to W3C compliance (http://www.w3schools.com/html/html5_video.asp)   (IE your example: https://aframe.io/docs/0.4.0/core/asset-management-system.html#example) 
You can also check : HTML Video - Browser Support in the W3C compliance reference
console.warn that hasn't to be there 
or at least made aframe component a-asset able to read the source src from video source child ellement as the src of the video.
 my preference, as per discussion on the original PR, is to let media elements do what they do and get A-Frame out of the validation business here by nixing the check and warning, rather than taking on the burden of reflecting changes throughout the evolution of media element usage in HTML5.  specifically, if using video element by selector reference, assume they know what they are doing and omit check and warning.  @dmarcos @ngokevin thoughts? I want to work on this Hi @BhuvanaMeenakshi, thanks for stepping up for this bug. Feel free to work on this bug and create a PR, if you have any questions you can ask here or on #issues slack channel of a-frame for quicker reply or discussion (https://aframe.io/community/#slack). Keep this issue updated once you make any progress :-)
  **Description:**
Fixes #2008 

The blurry effect from #2008 was actually caused by incorrectly setting BUFFER_SCALE to 0.5 even on iOS 10.

**Changes proposed:**
- The workaround was created to fix webvr-polyfill/issues/102, however they PRed a different solution for it since, so this workaround in aframe might not be needed at all (haven't tested). Just tried master + this patch on an iPhone 7 Plus w/ iOS 10 and it does indeed fix the issue for me! Finally! thank you @nullcode   On my phone (nexus 6x), as I add more geometry to my scene I've noticed that head tracking becomes slow, stuttery or shaky. However using touch to look around is as smooth as butter. This seems a bit odd to me.

I've created a scene to help explain the issue: https://jsfiddle.net/xkzbwh3u/
On my phone when head tracking:
001 - 100 boxes  = is fine
100 - 200 boxes  = some noticeable shakiness after sudden movements and slight stuttering
500- 1000 boxes = very shaky, stuttery and sluggish

As explained above, looking around by simply touching or swiping the screen shows no shakiness at any of these ranges, at least not from what I can tell.

It looks like, to me, that Android's accelerometer is finding it harder and harder to provide data to the browser as I fill up the scene with objects.

Is there anything that can be done about this? Hi @ngokevin, thanks for your performance suggestions. Do you have any advice for collada models? Can you `mergeTo` a collada model? I'm experiencing the same problem on Android (7.0, OnePlus 3T). I realize this issue doesn't lie solely with A-Frame, but I think it's an important one as new VR creators try to get up and running quickly and want to show off their creations on whatever hardware they have.

@ngokevin A couple of questions if you don't mind:

- Do you have links to any resources about this issue at the Android level? I'd be curious why it exists and if there is any effort to resolve it.
- Is it possible that the WebVR spec will eliminate this "sensor lag" for mobile devices such as Android?
- Are there any possible non-graphics workarounds, such as smoothing the sensor input across a couple frames? I ask because I'm curious if this would help, and I assume it would need to happen within the `look-controls` component. I haven't found any code to suggest this is being done.

I just started tinkering with A-Frame, and built my first VR experience. I'm extremely impressed how it works with tried and true web technologies, and how low the barrier to entry is. That being said, this issue _increases_ the barrier to entry for anyone using Android. I do have several hundred boxes in my scene, but my phone easily renders it at 60+ fps. There's no apparent performance issue, though the head tracking is still jittery. While my demo served the purpose of learning about A-Frame, it's difficult to show others with all the stutter.

The boxes in my scene are all colored differently (based on some math), so merging the geometry would mean rewriting the entire demo to use a shader, texture, or other means of achieving the same image. Given that modern hardware has no problem rendering this scene as is, it's hard to find motivation/time to rewrite this toy just so Android sensor readings _may be_ more performant. Further, anyone who is new to 3D may be able to populate a scene with primitives, but needing to aggressively tune the performance of such simple scenes could easily be a turn-off.

I appreciate any information on this!
 Thank you for the quick response. This definitely makes sense.

Given that this won't be an issue with proper WebVR support, I can understand setting lower expectations for polyfilled experiences. Thanks again 🙂 Worth to mention that callibrating the sensor on my Galaxy S7 just did wonders. I thought it was laggy fps-wise but then I figured it was running quite smoothly without the gyrosensor.

Callibration on S7 is making this "8" with the phone, Google has a good explanation here:
https://support.google.com/maps/answer/6145351?hl=de  `renderSingleSided` and `renderReverseSided` properties I requested aren't supported yet?

https://github.com/donmccurdy/aframe-extras/issues/117
 Thanks! Just curious to know if we can dynamically enable/disable shadow after scene is rendered once? OK, I see.

I inserted some comments in the code to support dynamic updates just for your information.  Using mergeTo seems to always cause this error. The merging itself seems to work, but the error breaks other things in my app. 
`Uncaught (in promise) TypeError: Cannot read property 'isPlaying' of null`

http://codepen.io/jonikorpi/pen/EZLQoG
```html
<script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>

<a-scene>  
  <a-entity 
    id="mergeTarget" 
    position="0 1 -1"
    geometry="primitive: box; height: 1; width: 1; buffer: false; skipCache: true" 
    material="shader: flat; color: red;"
  />
  
  <a-entity 
    id="merger" 
    position="0 1.5 -1"
    geometry="primitive: box; height: 1; width: 1; depth: 1; buffer: false; skipCache: true; mergeTo: #mergeTarget"
  />
  
</a-scene>
```

- A-Frame Version: 0.4.0
- Platform / Device: Chrome/macOS latest
- Reproducible Code Snippet or URL: http://codepen.io/jonikorpi/pen/EZLQoG Agreed. Seeing the same problem with 0.5.0 +1, still getting the same error... +1 at 0.6.1 +1 at 0.7.0
note: I'm using aframe-react though.  **Description:**

When developing a web extension, presence of A-Frame's `<a-scene></a-scene>` causes Chrome to make the popup very narrow. It causes Firefox to crash. I've attached a link to minimal repro. 

In my extension I attempted to set the popup's width by setting `width`, `position` and other css styles on `body`, `a-scene` and other elements. In all cases, **Chrome sets width of the popup to its minimum**, yet A-Frame correctly renders the 3D objects in the scene - they're just hard to see in such a narrow window.

- A-Frame Version: 0.4.0
- Platform / Device: Chrome/Firefox on Windows 10
- Reproducible Code Snippet or URL: https://gist.github.com/AmadeusW/478b521e49bc4bbc612c623249a44fa8

- Chrome screenshot
![image](https://cloud.githubusercontent.com/assets/1673956/22581532/843f30ea-e995-11e6-9658-f1579a0faf81.png)
- Chrome screenshot without `<a-scene>`
![image](https://cloud.githubusercontent.com/assets/1673956/22581621/56075b34-e996-11e6-8172-d2659b859ab0.png)



 Thanks for pointing me in this direction. It turns out that A-Frame sets `html`'s `display: fixed;` which breaks the Chrome popup.

I'm curious why A-Frame needs to change `html` display style. Does it have to do with `iframe` scenarios?

![image](https://cloud.githubusercontent.com/assets/1673956/22620885/2534ba12-eaca-11e6-80d3-26e62934ac0a.png)


  Encountered the same problem，how to triggers enter VR presentation? I use the last version chrome mobile browser，and it works！it seem to some browser does not support the VR presentation any more.  **Description:**
Position change is only firing when position actually changes. The rotation is firing constantly.

- A-Frame Version: 0.4.0
- Platform / Device: Chrome
- Reproducible Code Snippet or URL:

var entity = document.querySelector('a-camera');
entity.addEventListener('componentchanged', function (evt) {
  if (evt.detail.name === 'rotation') {
    console.log('rotation');
  }
});

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

The component name should be changed from "foo" to "bar" to match the one defined in the JavaScript code.

**Changes proposed:**
- Change the component name from "foo" to "bar".
  **Description:**

**Changes proposed:**
-
-
-
 I updated this again, not sure if this information made it. :-) ok, I took another stab on on it.

On Tue, Feb 28, 2017 at 10:42 AM chris van wiemeersch <
notifications@github.com> wrote:

> *@cvan* commented on this pull request.
> ------------------------------
>
> In docs/introduction/faq.md
> <https://github.com/aframevr/aframe/pull/2338#discussion_r103412562>:
>
> > @@ -136,6 +136,16 @@ texture. There are some components in the ecosystem that enable this:
>
>  - [HTML Shader][html-shader]
>
> +## Which 3D model formats work?
> +
> +The [ThreeJS JSON format](https://threejs.org/examples/?q=webgl_loader_json) works best, since it is the default loader ([example](http://curious-electric.com/aframe/json/)).
> +
> +[Wavefront (`.obj`)](https://en.wikipedia.org/wiki/Wavefront_.obj_file) is an old, established and well known format, but has some limitations like the lack of vertice colors support ([example](http://curious-electric.com/aframe/obj/)).
> +
> +[COLLADA (`.dae`)](https://en.wikipedia.org/wiki/COLLADA) is an XML based format with a very rich feature set ([example](http://curious-electric.com/aframe/collada/)).
> +
> +In comparison to COLLADA, the supported features of [glTF (`.gltf`)](https://en.wikipedia.org/wiki/GlTF) are very similar. However, because glTF focuses on providing a “transmission format” rather than an editor format, it is more interoperable with web technologies ([example](http://curious-electric.com/aframe/gltf/), [more information](https://aframe.io/docs/master/components/gltf-model.html#why-use-gltf)).
>
> I would link to https://aframe.io/aframe/examples/primitives/models/ and
> https://aframe.io/aframe/examples/test/model/
>
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/2338#pullrequestreview-24196099>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAmK8qRHn8cIwqB9iAb3b4dUTmKXyVAjks5rg-vsgaJpZM4LzwTQ>
> .
>
  I don't have any code comments, but wanted to say thanks for this PR and glTF FTW :)   fixes #2329 this is turning out to be more insidious than expected...  still working on it

i can see now why the implementation did what it did, in that once the change makes entities require geometry in order to intersect, a slew of the tests break because they never actually cared, and doing it correctly is not as simple as one would expect.

(frustrating, because functionally things work correctly...) looks like there is an issue with refreshObjects() happening before geometry is attached (and thus there are no children of the entity's object3D to add yet).  if there is some better way to understand when refreshObjects() can be invoked correctly, that would be most welcome... ok now I am a little baffled, as `npm run test:chrome` works locally with all non-skipped tests passing, but apparently something in travis-ci changes, and things fail. # [Codecov](https://codecov.io/gh/aframevr/aframe/pull/2331?src=pr&el=h1) Report
> Merging [#2331](https://codecov.io/gh/aframevr/aframe/pull/2331?src=pr&el=desc) into [master](https://codecov.io/gh/aframevr/aframe/commit/652f23f3862c2b6622ed03fe0e2b1450ee49c4ab?src=pr&el=desc) will **increase** coverage by `0.03%`.


```diff
@@            Coverage Diff            @@
##           master   #2331      +/-   ##
=========================================
+ Coverage   85.97%     86%   +0.03%     
=========================================
  Files         109     109              
  Lines        4519    4538      +19     
=========================================
+ Hits         3885    3903      +18     
- Misses        634     635       +1
```


| [Impacted Files](https://codecov.io/gh/aframevr/aframe/pull/2331?src=pr&el=tree) | Coverage Δ | |
|---|---|---|
| [src/index.js](https://codecov.io/gh/aframevr/aframe/compare/652f23f3862c2b6622ed03fe0e2b1450ee49c4ab...5f9ba4cc4174721a0e7c405885e06a38f83dfd47?src=pr&el=tree#diff-c3JjL2luZGV4Lmpz) | `97.72% <100%> (ø)` | :white_check_mark: |
| [src/components/raycaster.js](https://codecov.io/gh/aframevr/aframe/compare/652f23f3862c2b6622ed03fe0e2b1450ee49c4ab...5f9ba4cc4174721a0e7c405885e06a38f83dfd47?src=pr&el=tree#diff-c3JjL2NvbXBvbmVudHMvcmF5Y2FzdGVyLmpz) | `98.79% <96.29%> (-1.21%)` | :x: |

------

[Continue to review full report at Codecov](https://codecov.io/gh/aframevr/aframe/pull/2331?src=pr&el=continue).
> **Legend** - [Click here to learn more](https://docs.codecov.io/docs/codecov-delta)
> `Δ = absolute <relative> (impact)`, `ø = not affected`, `? = missing data`
> Powered by [Codecov](https://codecov.io/gh/aframevr/aframe/pull/2331?src=pr&el=footer). Last update [652f23f...d9c5ed2](https://codecov.io/gh/aframevr/aframe/compare/652f23f3862c2b6622ed03fe0e2b1450ee49c4ab...d9c5ed253b8fecc2523b0858c85702d650bb9b9c?el=footer&src=pr&el=lastupdated). Read the [comment docs](https://docs.codecov.io/docs/pull-request-comments). latest PR incorporates this...
```
ngokevin [8:00 PM] 
i suggest in the raycaster component, we do a refresh on:
1. `sceneEl.addEventListener('loaded')`
2. `sceneEl.addEventListener('child-attached')` + `loaded` on that attached child
``` Any update about this fix ?  all the tests work, the latest version of PR uses strategy suggested,
maybe it got a bit buried in the push to 0.5.0...

I believe the raycaster interval fix was merged into 0.5.0 separately,
but the remainder is sitting ready and waiting @dmarcos @ngokevin now that 0.5.0 rush is over, are we ok to take this? it can be significantly more expensive to do recursive raycast where non-recursive suffices as well, but perhaps @maissani and others can comment if it still works, sure... @maissani @donmccurdy is this PR still useful to you?  (also rebased against something more recent) @donmccurdy @dmarcos @ngokevin anything else on this one?  ### Description:
#### Raycaster doesn't trigger objects when recursive is set to false
### Environment:
- A-Frame Version: 0.4.0 (refs: 87c934aae6c85ac05af48e3c569db584197fb946)
- Platform / Device: Tested on Chrome
- Reproducible Code Snippet or URL: 
### Editor : 
https://ide.c9.io/maissani/testvr
### Application: 
https://testvr-maissani.c9users.io
### Files: 
https://preview.c9users.io/maissani/testvr
ps: I introduced a console.log line 59310 in aframe-v4.js to reveal intersection value behavior
<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
### Expected Behavior and Issue
Raycaster with recursive true currently working properly. 
Raycaster with recursive false is not working properly: it doesn't trigger on Objects. 
It seems that 
```JavaScript
intersections = this.raycaster.intersectObjects(this.objects, data.recursive)
```
Doesn't  return any intersection when set to false
This bug is probably related to Three.js or not

A simple workAround tho fix this is to set to true whatever ( and then rollback when it's fixed on three.js), and add a conditional check to get only the parrent object (only if he is the origin of intersection ) (is the wrapping that is done always only one level deep?)  Has drawing 3D maps using AFrame been tried before ?
If its been done before, can you provide an example code snippet ?

Thanks for your help!
  I see that 0.4.1 is published on [npm](https://www.npmjs.com/package/aframe) but I don't see it in the releases page her nor do I see the 0.4.1 tag.

Has the tag just not been pushed? I see that master's [package.json](https://github.com/aframevr/aframe/blob/652f23f3862c2b6622ed03fe0e2b1450ee49c4ab/package.json#L3) states 0.4.0.

Thanks! 
   hmm, this file is a copy of sizes.html that just uses msdf font instead on the left...

On January 28, 2017 10:26:39 PM EST, Kevin Ngo <notifications@github.com> wrote:
>ngokevin commented on this pull request.
>
>
>
>> +      <a-text mixin="msdf-text" position="-3 3 0"
>wrap-count="40"></a-text>
>+      <a-text mixin="msdf-text" position="-3 3.5 0"
>wrap-count="50"></a-text>
>+      <a-text mixin="msdf-text" position="-3 4 0"
>wrap-count="60"></a-text>
>+      <a-text mixin="msdf-text" position="-3 4.5 0"
>wrap-count="70"></a-text>
>+      <a-text mixin="msdf-text" position="-3 5 0"
>wrap-count="80"></a-text>
>+
>+      <a-text mixin="text" font="kelsonsans" position="3 0 0"
>wrap-count="20"></a-text>
>+      <a-text mixin="text" font="kelsonsans" position="3 2 0"
>wrap-count="30"></a-text>
>+      <a-text mixin="text" font="kelsonsans" position="3 3 0"
>wrap-count="40"></a-text>
>+      <a-text mixin="text" font="kelsonsans" position="3 3.5 0"
>wrap-count="50"></a-text>
>+      <a-text mixin="text" font="kelsonsans" position="3 4 0"
>wrap-count="60"></a-text>
>+      <a-text mixin="text" font="kelsonsans" position="3 4.5 0"
>wrap-count="70"></a-text>
>+      <a-text mixin="text" font="kelsonsans" position="3 5 0"
>wrap-count="80"></a-text>
>+
>+      <a-sky color="#3CF"></a-sky>
>+      <a-entity position="0 2 3.7">
>
>In our text examples, I'd try to leave the camera at the default 0, 0,
>0, and place the content in the desired places instead.
>
>-- 
>You are receiving this because you authored the thread.
>Reply to this email directly or view it on GitHub:
>https://github.com/aframevr/aframe/pull/2325#pullrequestreview-18985568

-- 
Sent from my Android device with K-9 Mail. Please excuse my brevity. it only switches the shader if one is trying to use the default sdf shader with a font that matches msdf pattern (as sdf shader will not work correctly with msdf font image) - if they choose another shader explicitly, this will not apply.

On January 28, 2017 10:25:52 PM EST, Kevin Ngo <notifications@github.com> wrote:
>ngokevin commented on this pull request.
>
>
>
>> @@ -161,7 +163,10 @@ module.exports.Component =
>registerComponent('text', {
>     }
> 
>     // Shader has changed. Create a shader material.
>-    NewShader = createShader(this.el, data.shader, shaderData);
>+    // For convenience, if font matches MSDF naming convention, change
>sdf to msdf.
>+    shaderName = data.shader;
>+    if (data.shader === 'sdf' && data.font.indexOf('-msdf.') >= 0) {
>shaderName = 'msdf'; }
>
>A string check is fragile. The shader is configurable, maybe just let
>people set the shader. But we can switch it if it matches a stock MSDF
>font.
>
>-- 
>You are receiving this because you authored the thread.
>Reply to this email directly or view it on GitHub:
>https://github.com/aframevr/aframe/pull/2325#pullrequestreview-18985558

-- 
Sent from my Android device with K-9 Mail. Please excuse my brevity. (in case it wasn't clear, the default shader change to msdf does apply to the newly added built-in roboto msdf font, but also applies to any others that follow the naming suffix paradigm) for yOffset, not sure it's that simple since at the moment, the returned fonts are loaded once and cached for reuse, but having individual yOffset values per font instance would require separate copies of fonts.  thoughts?  …depend on it  Hi,

Point is a basic primitive of THREE.js but it's not available as `a-point` in core. I suggest putting it in core.

I'm the author of aframe-point-component
https://github.com/naugtur/aframe-point-component

Let me know if you're interested and I'll make a PR Yes, sure I am. I'll publish this to registryif you say no. Just wanted to check if you'd consider including it in core, because it seems to me it belongs with sphere, box, circle etc.

I have another component in the making and I'll publish it soon.
  The rotation component is continuously updated on a static camera entity (possible performance implications?).

- A-Frame Version: 0.4.0
- Platform / Device: Mac / Firefox 51.0.1
- Reproducible Code Snippet or URL: 

[https://gist.github.com/i3games/80636bb3bf2b2aa7d09569013d1df123](https://gist.github.com/i3games/80636bb3bf2b2aa7d09569013d1df123)

check console.log

The new values for pitch, yaw and roll are the same as the old values (0,0,0). `isSinglePropSchema` in line 202  of `aframe/src/core/component.js` for rotation is true which shortcuts the and-expression, so equality is not tested and the statement never returns. Then in 217 `el.emit('componentchanged', {` happens.

`isSinglePropSchema` is true, because in line 13 of `aframe/src/core/schema.js` 

```
if ('type' in schema) {
    return typeof schema.type === 'string';
}
```
`schema.type` is "vec3" so `typeof schema.type` is "string".

Maybe that points in some direction.  **Description:**
As requested: https://github.com/aframevr/aframe/issues/2318  **Description:**
When a scene contains both an entity with `raycaster` and a `<a-collada-model>` there's an error thrown:
`attributes.position is undefined     [aframe-0.4.0.js:16129:10]`

Waiting for the model to be loaded before attaching the raycaster fixes the issue.
https://github.com/aframevr/aframe/pull/1497 might be related

Order of elements in DOM doesnt matter

- A-Frame Version: 0.4.0 & latest master
- Platform / Device: FF 50.1
- Reproducible Code Snippet or URL: https://codepen.io/anon/pen/ygzxyj This [sounds familiar](https://github.com/aframevr/aframe/issues/2158).

@ngokevin Is it the same issue except for collada instead of obj?  Done: https://github.com/aframevr/aframe/pull/2320

Please ask someone with access to the mozvr account on CodePen to change the example to my fork: http://codepen.io/thoragio/pen/jyGeEJ

With the `<script>` tag in the HTML panel, it is abundantly clear. Newbies to CodePen won't know about adding script tags in the gear menu.
  Hey @ngokevin I can write the guide. I just wanted to know that what format should the doc be in?
Should it be a md file, doc file or any format would work?  

**Description:**
Added ability to get the canvas of a screengrab of the scene by doing `sceneEl.components.screenshot.getCanvas()` - in order that screengrabs could be programmatically uploaded to server etc. using .toBlob()

It's based on the existing `.capture()` method, and you can specify a projection (`equirectangular`) - default - or regular screenshots (`perspective`)

Hinted at in conversation here - https://github.com/aframevr/aframe/issues/926#issuecomment-261511950

**Changes proposed:**
- add .getCanvas() method, which returns a canvas object with rendered projection
- keep existing .capture() method, for backward compatability.
 Aaah, need help. Build is failing on Firefox 51 - " capture is called when key shortcut is pressed" - but I'm testing in FF51, and keyboard shortcuts are working...  😊 - Code in haste, repent in public... will fix now 🍾 🎉   **Description:**
Added ability to move vertically touching screen in not vr-mode

https://github.com/aframevr/aframe/issues/2306 
I just bumped up against this issue as well, and I see it has been raised several times in the github discussion.

It's a bit confusing for us A-Frame users because the "look-controls" component covers 3 quite different interaction styles: desktop with a mouse, mobile with multitouch, and VR/magic window mode. 

Why not allow pitch, within definable min and max angles, in touchmove in look-controls? This makes sense for my use case, and from the previous queries about this, it seems I'm not alone. Alternatively, another way to do this could be to add a toggle to look-controls so that ptich/yaw are controlled by single touch in 2d mode, and by deviceorientation in vr mode.

Overall, it would be really nice if it were easier to switch between camera control schemes between default, touchscreen device, and VR/magic window. For example on the deskop or mobile device, maybe you start with orbit controls, but then when you enter VR with a headset/cardboard/"magic window" mode, you switch to free-look controls.  Currently we users have to write our own components to juggle cameras, but I think having some defaults baked into AFrame would be quite helpful. Over in the orbit-controls I submitted a PR with to add a "vrCamera" attribute, which lets the user specify a different camera element ID that gets activated on enter-vr, then switch back to orbit on exit-vr. Until (...) this is accepted I have written my own component to do this juggle.

Ok, sorry for a bit of a soliloquy/jeremiad. AFrame is awesome! Just trying to offer some constructive contributions -- and I'm happy to make some PRs to manifest this if that's helpful.





 
Yep, understood about wanting to keep it simple. However I would say the current state of affairs having to juggle cameras is not so user friendly. 

My situation is I think a pretty common one:
I want to show off a 3d object on a web site. It should work on the desktop, on a phone/tablet, and with a VR headsset or cardboard. Some scenes I want to show using orbit controls, and some scenes I want to use a free look camera.

I thought this would work out of the box so to say.

Here is the logic to switch cameras to accomplish this:

```
Scenes using the orbit-controls paradigm
	On Desktop:
		start: use orbit controls
		enter-vr: save orbit cam position. Switch active cam to look-controls. 
		exit-vr: save look-control position. Restore orbit-cam position. Switch active to orbit cam
	On mobile:
		start: use orbit-controls
		enter-vr: save orbit cam position. Switch active cam to look-controls. 
		exit-vr: save look-control position. Restore orbit-cam position. Switch active to orbit cam

Scenes using the look-controls paradigm
	On Desktop:
		start: use look-controls
		enter-vr: Remain in look-controls mode
		exit-vr: Reset camera pitch to 0'. Remain in look-controls mode
	On mobile:
		start: use multitouch-look-controls*
		enter-vr: switch to regular look-controls
		exit-vr: switch to multitouch-look-controls

*multitouch-look-controls adds two gestures: single finger up/down drag to pitch, and pinch to zoom/dolly.
```

If I were to share my "controller controller" code for the above,  any suggestions where best I should contribute it? For new users (like me) there are already plenty of camera controller components floating about, so it would be nice to contribute this code / readme / blog entry to an established codebase.
 
  should the motion capture components be hooked up to the utils and systems portions so the event replay makes it actually appear as though the controllers are present and returning the appropriate pose data?  I thought we intentionally abstracted tracked-controls etc. from the actual gamepad API for precisely this purpose... contrary view - the utils and system functions are part of core, allowing
the gamepad api to be wrapped/replaced so that existing APIs can be used
seems better to me than creating the opportunity for dueling systems trying
to fire the same events.  and if it can be done with the core API
navigator.getGamepads() etc. then even software that would not be aware of
the emulation would obey...

On Fri, Jan 27, 2017 at 6:25 PM, Diego Marcos <notifications@github.com>
wrote:

> The capture components won't be part of the core so I prefer them to use
> the same public API as any others. This change is innocuous for the normal
> use of the vive/oculus components. We can revisit if it ends up being a
> problem.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/2314#issuecomment-275801798>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AB-_4t4Czy63EalJqYVL4rV_lMCC5BxGks5rWnzVgaJpZM4LuJev>
> .
>
 you may only need to modify / wrap `trackedControlsUtils.getGamepadsByPrefix()` ... if this doesn't cause problems when using multiple (e.g. both oculus touch and vive), that may work, but for more complex interactions you may need the actual gamepad api values, not just derived events, which is why I mention an alternate strategy of providing mock data and events which at the moment is fed by the tracked-controls utils functions.  (rather than monkey patching, exposing API to allow injection... also used for testing anyway, IIRC the controls classes had to provide local overrides for getGamepadsByPrefix for that purpose) ```
mchen [8:07 PM] 
re: recorder and tracked controller events - the worry I have is that if the app uses both aframe controls and also gamepad api (e.g. arcade), recorder replays may not work well / correctly... and that if during recording playback the gamepad api input isn't turned off, chaos may ensue

[8:08]  
even if you ignore the former, you will probably want to address the latter

ngokevin [8:08 PM] 
you mean you’re not using tracked-controls?

mchen [8:08 PM] 
both tracked-controls (via oculus-touch-controls and vive-controls) and actual gamepad API -- to support actual gamepads, Ooculus remote, etc.

[8:10]  
even if i wasn't, it's not clear that playback would only ever occur without HMD and controllers present/active...

ngokevin [8:10 PM] 
what are some things our recorder would not pick up from your arcade?

[8:10]  
because the gamepad API doesn’t emit events right? you have to poll it for button states

mchen [8:12 PM] 
right.  so there is code that looks at gamepad states, across all of them, and does the right translation into keys for JSMESS emulator to see

[8:13]  
if you are recording tracked controller events only, would fail completely for this case
```  **Description:**
a-scene stats are too dark
**Changes proposed:**
- added color property to stats style (fixes #2266)
-
-
  **Description:**

I'm loading an OBJ model with a single color map/texture. I use the `<a-assets>` tag to load both the obj-file and the texture file.

For some reason, the texture is downloaded 3 times. It doesn't hit the cache any of those times:

![aframe_texture_download](https://cloud.githubusercontent.com/assets/5872/22287801/7801dc94-e2f4-11e6-8464-233bd3231774.png)

An additional problem, which made me aware of the issue, this seem to make the model unable to load and render in Safari (desktop and mobile), as it fails with with CORS related error the third time it attempts download the texture:

![image](https://cloud.githubusercontent.com/assets/5872/22287924/0626787c-e2f5-11e6-9fb9-32a90fa72cf6.png)

(It's not a general CORS issue, as it renders fine in other browsers, although the texture is still downloaded three times)

- A-Frame Version: 0.4.0
- Platform / Device: Any (Tested in Chrome, Safari and Firefox)
- Reproducible Code Snippet or URL: http://codepen.io/fabricius/pen/ZLJvoz


 Upvoting as this issue still exists in 0.5.0 within Chrome, Safari and Firefox.  Good to hear it's not just me. Judging on the number of open issues I don't think the core team will get to this anytime soon then. A PR is probably needed to get this fixed, but I don't have bandwidth to debug and fix the issue at the moment either.  I understand this is mentioned briefly in `getting-started.md`, but it's done as kind of an option? It implies you can either 'Grab the Boilerplate' _or_ 'Include the JS Build' (from CDN). And indeed the latter will work up to a point, but it breaks at this step.
 Sure I can do that. However can we have both?

The reason I say is that, at the moment, there isn't a 'flow' that goes from 'Getting Started > Guides'. At the moment the flow (which is a little confusing) goes:

aframe.io > Get Started > Device & Platform Support > Best Practices > FAQ > The End

To get to the guides, you then have to backtrack to question 3 in the FAQ and click the 'guides' link? I think that would be better. Maybe it should go:

aframe.io > Introduction >  Device & Platform Support > Get Started > Guides

Really the 'Best Practices' and 'FAQ' are not something a newbie needs to read? Okay made the changes to Getting Started as requested.

Not sure how to change the 'flow' of the pages though (i.e. make 'Devices & Performance > Getting Started')? Is that outside the GitHub project? I think there's a separate discussion here. Do you want to merge this PR and I'll start a new issue?

Separate discussion:

* At the moment, the first time the doc mentions 'asset management' or 'entities' or 'lights' is in Best Practices. Readers have had no introduction before that. So even if it wouldn't hurt beginners to read Best Practices and the FAQ, they won't necessarily be able to understand them.

* At the moment, the Getting Started section ultimately leads to the FAQ, the 3rd question of which is 'how can I get started'. This is a bit circular :) However it's the only way you get to the guides. All done. Please review.  **Description:**

- A-Frame Version: V4
- Platform / Device: Nexus 9
- Reproducible Code Snippet or URL: http://codepen.io/tinchoforever/pen/ZLyEbj
This on a tablet (nexus 7 or 9) or Ipad should be 
1) Enabling by default devicemotion camera 
2) on vr mode, go full screen. 
On Aframe 2.0, 1) works and 2) says your device doesn't support webvr mode. I have been checking Google WebVr Poly and it works there perfectly. My guess is that this is something inside how Aframe decides to use VR Mode and Gyroscope Control of the Camera by default.
  here with Aframe 2
http://codepen.io/tinchoforever/pen/ggROwL Aframe 4
![aframe-4](https://cloud.githubusercontent.com/assets/719504/22203403/acb54944-e14b-11e6-81d3-f91fe1efd0aa.gif)
Aframe 2 
![aframe-2](https://cloud.githubusercontent.com/assets/719504/22203404/acb68f66-e14b-11e6-977a-a68580f60e8f.gif)
 In Aframe 4, I'm only enable to move the camera using touch but no movement.


The expected behavior should be

1. Vr Mode should go to full screen on tablets.
2. Moving camera with Device Motion should be default on tablets too.
 I've discussed over Aframe Slack about this, we checked over Google WebVr Polyfill and there is no restriction for this on their lastest version. 
Our guess is that there is something where we ask ismobile but on a tablet is not.

An Any help is welcome we are happy to help to create the fix for this issue @ngokevin do you have any idea why 2. was working on Aframe 2.0 but not on Aframe 4.0? Any ideas where to check? Both return **false**
For some reason Aframe 2.0 let us use the accelerometer.

 Check the examples, now both have the alert with the result.
Aframe 4 : AFRAME.utils.device.isMobile()
Aframe 2 AFRAME.utils.isMobile() What do you think ? @donmccurdy  @dmarcos  
Mozilla.5.0 Linux Android 6.0.1 Nexus 9, Apple WebKit, Chrome 49 Mozilla/5.0 (Linux; Android 6.0; Nexus 9 Build/MRA58K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/49.0.2623.105 Safari/537.36
 @dmarcos testing now... finger cross Amazing, this fix the use of gyroscope but going to full screen mode is not possible :(
@dmarcos  No Errors.  **Description: When the screenshot function is called, it creates an image without any anti-aliasing and in a poor resolution, no matter which resolution parameter (width/height) is passed. Also, taking screenshots on iOS 10 is not possible inside Safari / Chrome or Firefox.**

- A-Frame Version: 4.0
- Platform / Device: Any
- Reproducible Code Snippet or URL: http://www.abnahme.mxo.cc/milon/index_desktop.html 

![screenshot-milon q clubvr configurator-1485277659947](https://cloud.githubusercontent.com/assets/24720753/22258045/57e02bc6-e260-11e6-8eb9-2a06902f37d1.png)

 > `antialias="true"` will help.

Does it? Here is a screenshot taken of [a CodePen](https://codepen.io/bryik/pen/pwGgWL) with `antialias="true" screenshot="width: 960; height: 500"`:

![screenshot-codepen - a-frame screenshot width-height-1499908475067](https://user-images.githubusercontent.com/12419712/28146350-286423fe-6747-11e7-889c-37b23b8c0a5a.png)


There is also distortion when taking a screenshot of the CodePen (CodePen's debug mode fixes this), but that's another issue. Being able to set the size of the screenshot to 960x500 is nifty for making [bl.ock](https://bl.ocks.org/-/about) previews, but AA is kind of necessary for this.

I suppose I could take a 3840x2000 screenshot and then resize to 960x500.  I have an ionic2 app with videosphere and in ios  touching vertically the screen I can´t get tilt effect (If I move my device it work). It doesn´t work in android neither. I try it in browser and works ok.

- A-Frame Version: 0.4.0
- Platform / Device: Ios 10 / Iphone 6S
- Reproducible Code Snippet or URL:
 @dmarco 
I mean, you can move videosphere touching your screen, can you? ... well, if you move right and left the vide move but if you move your finger up and down the video doesn´t move (tilt effect)... I hope I have explaind In the screenshot I have attached you can see warnings and error I have. In fact, last warning appear just when I touch the screen.. 
If I move the device vertical and horizontal movement works ... 

![aframe-error](https://cloud.githubusercontent.com/assets/1634767/22260149/5a538fc6-e268-11e6-8894-ed311266a40f.jpg)
 @dmarcos you can try accessing with your mobile browser to https://aframe.io/examples/. You can check what I meaning  @ngokevin I understand if you are in vr mode tilt doesn't work but if you aren't , in my opinion, it should work ... however could you make me an example about "play" with camera and vertical panning?

Thanks  I have implemented this and created a pr here
https://github.com/aframevr/aframe/pull/2315

Please take a look at this.
  If the stats UI element is active, the Framerate in Firefox Nighly drops below 10 fps, while Chrome maintains arround 47 fps.

Here is a side by side comparison:

![image](https://cloud.githubusercontent.com/assets/708137/22187166/c55eb8e4-e101-11e6-829f-a6876343cea1.png)

In addition, if the "w" key is pressed in Firefox Nighly, the camera starts to "jump": 

![f616df35-f30e-403f-ac1d-babfe13dda7a](https://cloud.githubusercontent.com/assets/708137/22187270/7b562e9c-e103-11e6-9635-f9d094ebba11.GIF)

I had this behaviour in my project, but this is also repoducable with the aframe hello-world demo.

Chrome: Version 55.0.2883.87 m (64-bit)
Firefox Nighly: Version 53.0a1 (2017-01-22) (32-bit)

- A-Frame Version: 0.4.0
- Platform / Device: Windows 10, Lenovo T560
- Reproducible Code Snippet or URL: https://aframe.io/aframe/examples/boilerplate/hello-world/

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
  **Description:**

The scene is embedded inside a bootstrap modal dialog and the shouldCaptureKeyEvent method ( https://github.com/aframevr/aframe/blob/master/src/utils/index.js#L176 ) returns false because, in my case document.activeElement is the modal dialog div which does not equal to the document.body. 

`return document.activeElement === document.body;`

What is the reason for this statement? 

- A-Frame Version: 0.4.0
- Platform / Device: Chrome, Firefox
- Reproducible Code Snippet or URL: 

<!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->
 I see. In my case the modal-body contains the scene and I show the modal dialog when the users clicks a button (http://getbootstrap.com/javascript/#modals). It is a standard use. The console shows that document.activeElement  is `<div class="modal fade" tabindex="-1" role="dialog">` instead of body, because the focus is set on the modal div and not the body.

Would it be possible to just take WASD user input when the focus is on the canvas? I will play with it, either we leave the impl. as it is, or I propose a change. I just saw that I can manually set the focus to an element so I could force the focus to the body, even if the modal is open. Let's see how it goes.

I think my use case is specific and I guess that not having WASD navigation in a scene which is  embedded is ok for most people. I had no success in setting the focus on body manually, after opening the bootstrap modal dialog. My personal solution would be to patch aframe.js and override the method in utils.js unless you say that WASD navigation must work for embedded scenes, no matter where they are embedded. But I have no idea how this could be achieved, without eg. triggering input in textfields. One possible solution would be to add `tabindex="1"` ( http://stackoverflow.com/questions/29992688/how-to-keep-the-focus-on-a-canvas-always ) to each injected canvas which forces the focus on the canvas and not on the body. If I could reference the current canvas in https://github.com/aframevr/aframe/blob/master/src/utils/index.js#L176 we could do `return document.activeElement === canvas`

How do I get the current canvas in utils?

I could setup a codepen with several embedded canvas including one in a bootstrap modal and see if the behaviour is as expected. @cvan Thank you for your code examples, I am sure it works that way. In my case I am dynamically loading a template partial from an REST endpoint depending on a certain type of content (photo sphere, video sphere, models, etc.) and I append the loaded template code (a-frame scene) to an element within the bootstrap modal dialog. I don't like the idea of loading a template which represents an html document (and I don't like iframes). But that's just my personal taste and my special use case. ;-)

I think for all other people wanting to load an a-frame scene into any sort of modal dialog window (which takes the focus) your solution should be fine. Although the `canvas tabindex="1"` solution is not too bad  in my opinion (http://stackoverflow.com/questions/29992688/how-to-keep-the-focus-on-a-canvas-always).  On my environment, both works.

At Hello world example https://aframe.io/aframe/examples/boilerplate/hello-world/

I ran this on console

    var scene = document.querySelector('a-scene')

    var cylinder = document.createElement('a-cylinder');
    cylinder.setAttribute('color', '#888888');
    cylinder.setAttribute('height', '1.5');
    cylinder.setAttribute('position', '3 1 0');
    scene.appendChild(cylinder);

    var cylinder2 = document.createElement('a-cylinder');
    scene.appendChild(cylinder2);
    cylinder2.setAttribute('color', '#888888');
    cylinder2.setAttribute('height', '1.5');
    cylinder2.setAttribute('position', '-3 1 0');

Result

![image](https://cloud.githubusercontent.com/assets/7637832/22179865/13390270-e014-11e6-99c5-5cd34d8d804f.png)

Have I missed something?
  To add A-Frame to RGSoC, we need following info:

* Select Tasks or Features on which students can work within 3 months (github issue links).
* Skills required for each the issue.
* Mentors for each issue.

More info - http://railsgirlssummerofcode.org/guide/projects/

Deadline to apply - Jan 31st, 2017. Hey @dmarcos 

The idea list of outreachy is also out yet I cant find a project related to aframe. (https://wiki.mozilla.org/Outreachy)

Are there any pending projects related to aframe/aframe-inspector that can be added to the list?

Regards
Princi Vershwal  In v0.4.0, using a mixin doesn't work with [aframe-animation-component](https://github.com/ngokevin/kframe/tree/master/components/animation)

```
<html>
<head>
  <title></title>
  <script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>
  <script src="https://rawgit.com/ngokevin/aframe-animation-component/master/dist/aframe-animation-component.min.js"></script>
  </head>
<body>
<a-scene>
  <a-assets>
    <a-mixin id="anim-mixin" property="rotation" dur="500"></a-mixin>
  </a-assets>

  <a-box geometry="height: 1; depth: 1; width: 1"
         material="color: red"
         position="0 1 -2"
         mixin="anim-mixin"
         animation="to: 0 180 0"></a-box>

  <a-sky color="#ececec"></a-sky>
</a-scene>
</body>
</html>
```
  **Description:**
Upon scene init, vive-controls component raises `Uncaught TypeError: Cannot read property 'rotation' of undefined`. Upon button press, vive-controls raises `Uncaught TypeError: Cannot read property 'material' of undefined`

Q are you using the built-in vive controller model?
A yes no change

Q do you inject controls / hands, or declare them a priori in your scene?  are tracked-controls there right off the bat (too early?) or does it wait for vive-controls or oculus-touch-controls to inject them?
A vive controls injected

- A-Frame Version: 0.4.0 (master 18-01-2017 commit #1b9bea1)
- Platform / Device: Windows 10 / Chromium 2016-12-23 build / HTC Vive
- Reproducible Code Snippet or URL: kfarr.github.io/aframe-city-builder From Slack 2017/01/22
kfarr [1:51 PM] 
@mchen fyi removing wasd controls prevents the `Uncaught TypeError: Cannot read property 'rotation' of undefined` however i still see many `Uncaught TypeError: Cannot read property 'material' of undefine` upon button presses @kfarr doesn't seem to happen in normal operation.

are other inadvertent invocations of onButtonUp/Down/TouchStart/TouchEnd/Event providing invalid button names?

what button name is appearing in 
https://github.com/aframevr/aframe/blob/master/src/components/vive-controls.js#L216
in your situation? Yes using master. The culprit seems to be things related to vive trackpad. `onButtonTouchStart` and `onButtonTouchEnd` for example  By allowing an alphatest, transparencies in models loaded will now work better.

I personally believe this should be an option able to be set in the schema... Perhaps this should only be added in once schema has been updated and changed to allow for multiple variables without breaking backwards compatibility? I do think single variable schemas should be removed as they limit functionality WAY too much for the future, unless there is a way to set one of the multiple variables as the default for single variables.


As far as I can tell this pull request of tested code should not be added to the repo yet as alphatest might cause undesired consequences like hiding a material that has no texture set to it because the file wasn't found etc.... I do think its a good example of possibilities for model loading and the necessity to fine tune things, as models are beastly complicated to get right.

 I think this is a property for the model loading process itself. It seems inefficient to load the model, then to loop through all materials after an event. Seeing as though complex models with multiple sprites can have 100s to loop through.

That being said, I have noticed with some collada models that they simply don't load properly without this setting being adjustable, it is not about adjusting a model to me, but loading it properly in the first place. 

For instance, sprites in models tend to have transparent backgrounds (so flowers in a model), but these show up as artifacts without using this setting. By default I think it should be turned on, but at the very least I think it should be exposed. 

Currently I am using my version of the collada-loader and it seems to work well. So far, only faces where the material was not loaded might disappear as it assumes it is transparent due to a lack of data/colour.

I thought collada was the main support with gltf to come later? I think both are good. Sadly the GLTF issue I have run into is that many are binary and not ascii.  Fair enough. It will be the same issue with GLTF, I do understand that covering all cases would create a large library. I do think that this specific property having a default might actually reduce bugs for model loading quite a bit.

Perhaps something I will try to take up with ThreeJS themselves though they do not focus too much on model loading from the bug reports I saw.

  (same with `oculus-touch-controls`)  In the [**Adding Audio**](https://github.com/aframevr/aframe/blob/master/docs/guides/index.md#adding-audio) section of the official docs, the following source file link seems to be dead:

https://cdn.aframe.io/basis-guide/backgroundnoise.wav

If this isn't the correct repo for this issue, let me know where it should migrate to!  **Description:**

This PR enables mixin ids following/followed by/separated with spaces, tabs, and new lines like this
`el.setAttribute('mixin', '  id1\tid2\n\nid3  ');`
It'd be useful for users.

Refer to #2291

  **Description:**

This PR adds `el.mixinEls.length` check for mixin clear test to get the test stricter.

Refer to #2291
  **Description:**

This PR enables `el.setAttribute('mixin', '')` (#2280).
It clears all mixins of el.

This PR doesn't touch `removeAttribute('mixin')` because
another guy is working on here #2282
 BTW, I'm thinking to replace `new(old)Mixins.split(' ')` with `new(old)Mixins.trim().split(/\s+/)`.
The latter can accept two or more spaces, tabs, and new lines.
It'd be useful for users.

    (example in the console)
    -> var str = ' abc def\tghi\n jkl  mn  '
    <- undefined
    -> str
    <- " abc def	ghi
         jkl  mn  "
    -> str.split(' ')
    <- ["", "abc", "def	ghi↵", "jkl", "", "mn", "", ""]
    -> str.trim().split(/\s+/)
    <- ["abc", "def", "ghi", "jkl", "mn"]

What do you guys think?   I think the appropriate line is 
https://github.com/aframevr/aframe/blob/master/src/components/vive-controls.js#L162
no idea why you're not seeing it trigger for vive, as I don't think anything has changed there... did the model files somehow change during the CDN adjustments? (taking a quick look...)
the vive triggers move for me... maybe browser is not setting analog value correctly anymore and only giving you 0 or 1? (@dmarcos need any changes before merge?)  I am interested in the writing for the documentation for it. I'm working on this except for documentation.

@donmccurdy 
Why do you think default distanceModel should be linear though
default PannerNode.distanceModel (= THREE.PositionalAudio.distanceModel) is inverse?
https://developer.mozilla.org/en-US/docs/Web/API/PannerNode/distanceModel
 I see, thanks! @wildaces215 
Panner options has been added.
Do you wanna update the documentation for it? :D

https://aframe.io/docs/0.5.0/components/sound.html I want to work on this Hi @BhuvanaMeenakshi, it seems @wildaces215 is already working on this. If you dont see any updated from @wildaces215 in next few days, you can pick this one, till then feel free to explore other open issues :-) I've get caught up on things it free sorry about the inconvenience

On Fri, Jun 16, 2017 at 4:06 PM, Kevin Ngo <notifications@github.com> wrote:

> I don't think anyone's working on it. It seems a lot of people are just
> commenting "i want to work on this" on a lot of issues and not doing
> anything. If people are interested and the issue doesn't seem to be active,
> I'd just create a PR versus a comment.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2287#issuecomment-309121995>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AMkWId-EH9InKIg6V0_26Gem-Qef0un0ks5sEuA-gaJpZM4LkwLU>
> .
>
  Hi, I wanted to have a limited view in my app so I cloned the `look-controls` component according to this [SO answer](https://stackoverflow.com/questions/41038973/how-can-i-constrain-rotation-of-an-a-camera-aframe/41150640#41150640) by @ngokevin. But it breaks if `reverse-mouse-drag="true"`

0.4.0
Web / Desktop
[jsfiddle](https://jsfiddle.net/cuebtvLm/3/)

Any thoughts?
  maybe related links to registry demos then  **Description:**
Allows entity.removeAttribute(`mixin`) 
 Well, is this change good enough?
I think we should call `unregisterMixin` for all registered mixins for `removeAttribute('mixin')`.
 @takahirox I see what you mean with that. I'm seeing how it can be approached with unregistering all mixins, then removing the mixin attribute.

@ngokevin it looks like a-mixin.js sets up the object initially, then mixin update logic is handled in a-node.js. If we want to approach update logic in a-mixin.js, I wonder what the best approach is.  Is this about building an interface-builder in VR? Or assembling an interface in HTML, then have it show up as a VR interface?

This is definitely hard because there are no user guidelines and best practices for what a user interface should be like in VR. A lot of UI is trending towards laser-pointer based because we're so used to 2d surfaces and mouse.

Is the focus on data-display? Or about button pushing (like implementing levers, knobs, dials, buttons, etc)?

What's the goal here? It was very difficult to find one set of movement/interaction code to accommodate mobile, typical desktop/laptop web, phone VR, PC VR, and roomscale, controllers / gamepad / remote.  Even just the VR subset of that was challenging. Boris' Ray-Input will help tremendously https://github.com/borismus/ray-input as it adapts to Daydream, Cardboard, Vive/Oculus, as well as mouse input types. ... touchscreen for non-VR mobile?  touchpad on laptops as well as mouse?  what if you want movement not just gaze selection?   feels almost like a topic with blog posts from various folks on what worked well and didn't -- here, with an eye on implementing with A-Frame... ok great that makes it much more straightforward, although perhaps less widely applicable (thinking of Daydream 3DOF, if not GearVR) I confirm this is a recurrent need for newcomers. Hey all, great conversation sorry for being late to jump in. I like the
idea of breaking this up into a series of blog posts about "VR UI First
Practices" that includes both the UI challenge scenario and then the
code-based solution with a link to a repo or component at the end. I'm
happy to take one on with regards to city builder. My topic could be
something like - "creating interface for previewing and selecting objects
across Oculus and Vive".

Maybe if a few more folks can commit to topics and a proposed date for
their writeups? I could commit to a first draft by Jan 30 for mine. And
then someone from Mozilla can make a nice intro / context post.

On Fri, Jan 13, 2017 at 6:02 AM, Fabien Benetou <notifications@github.com>
wrote:

> I confirm this is a recurrent need for newcomers.
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2281#issuecomment-272449499>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AActzVjompS8r3GrH7nOcER2_9IFydyRks5rR4P0gaJpZM4LidW9>
> .
>
 Are we definitely looking for all original content here or would a page with curated links with a blurb about what they're good for also be helpful?  Cool, I haven't built anything with 6DoF (yet!) but I'd be happy to get a further reading list started. Okay did a first draft here, comments enabled and welcomed: https://docs.google.com/document/d/1RvmQ-ExpLIQFr8kK4d67jndI070dCtz3AI2BeJYYJjY/edit I've revised (edited down) and prepared a Medium post. It's ready to publish, but I'm in no hurry as I'm hoping that we'll have a stable Chromium build soon so people can actually use this: https://medium.com/@kfarr/38b0c86ed7b7 we need a builder interface like unity3d  I want to work on this
 this.el.setAttribute('mixin', this.data.mixin);

Hope this can resolve?
  Why is the 0.4.0 version's resolution so bad in VR mode? 
I did not change any rendering parameters! 
**version 0.3.2 is good!** 
Running on iOS 9.2.1 Cordova 4.3.1

 screenshot:
![img_3661](https://cloud.githubusercontent.com/assets/25084319/21899269/9f5a8f08-d92a-11e6-85bb-dea232510a8b.PNG)
![img_3662](https://cloud.githubusercontent.com/assets/25084319/21899270/a05ae330-d92a-11e6-865f-5d608264d7e2.PNG)
  When clicking the "Enter VR" icon (the goggle icon), to enter in VR mode, the screen periodically turns black. The issue seems to occur at random times.

We have tried using both A-Frame version 0.3.0 and 0.3.2., but with no difference in behavior.

Whether it fails (renders black or is successful) I recieve the following errors:

aframe.min.js:281 Uncaught TypeError: Cannot read property 'length' of undefined
at r (aframe.min.js:281)
at M.fireVRDisplayPresentChange_ (aframe.min.js:58)
at HTMLDivElement.s (aframe.min.js:58)

aframe.min.js:149 Uncaught (in promise) DOMException: 
A call to screen.orientation.lock() or 
screen.orientation.unlock() canceled this call.

index.html#/lobby:1 Uncaught (in promise)     
DOMException: screen.orientation.lock() is not available on this device.
The issue seems to vary in occourance depending on device.

Tested on: Samsung Galaxy S6/S6 Edge Nexus 6x One plus 3

Tested on Google Chrome: WebGL activated also tried with WebVR.

- A-Frame Version: 0.3.0 and 0.3.2
- Platform / Device: Android, Samsung Galaxy S6, Samsung Galaxy S6 edge, Nexus 5x
- Reproducible Code Snippet or URL:

<a-scene vr-mode-ui="" fog="type: exponential; color: #AAA; density: 0.00009;">

    <a-assets>
        <video id="video" src=""></video>

        <img id="skybox" src="img/lobby/skybox.jpg" />

        <img id="earth" src="img/lobby/earth.jpg" />
        <img id="sun" src="img/lobby/sun.jpg" />
        <img id="moon" src="img/lobby/moon.jpg" />

        <img id="frame-content" src="img/lobby/frame-content.png" />
        <img id="frame-selected" src="img/lobby/frame-selected.png" />
        <img id="button-play" src="img/lobby/button-play.png" />
        <img id="button-pause" src="img/lobby/button-pause.png" />
        <img id="button-stop" src="img/lobby/button-stop.png" />
        <img id="button-left" src="img/lobby/button-left.png" />
        <img id="button-right" src="img/lobby/button-right.png" />
    </a-assets>

    <a-entity id="lobby-content" visible="true">

        <a-sky src="#skybox" radius="6000">
            <a-animation ease="ease-in-out-sine" dur="200000" repeat="indefinite" attribute="rotation" fill="forwards" from="-240 360 0" to="120 0 0"></a-animation>

            <!--Sun-->
            <a-sphere src="#sun" color="yellow" position="0 -100 0" rotation="90 0 0" scale="10 10 10"></a-sphere>
            <a-light type="point" intensity="1.5" color="white" position="0 -500 0"></a-light>

            <!--Moon-->
            <a-sphere src="#moon" color="white" position="0 100 0" scale="5 5 5"></a-sphere>
            <a-light type="point" intensity="0.2" color="white" position="0 500 0"></a-light>
        </a-sky>

        <!--Earth-->
        <a-sphere src="#earth" position="0 -9.5 0" scale="9 9 9">
            <a-animation ease="ease-in-out-sine" dur="150000" repeat="indefinite" attribute="rotation" fill="forwards" from="5 0 34" to="5 360 34"></a-animation>
        </a-sphere>

        <!-- Control panel with frames, video thumbnails & left-, right- & play buttons -->
        <a-entity position="0 2 -25" scale="1.2 1.2 1">
            <a-image src="#frame-content" scale="16 10 0"></a-image>

            <!-- Left arrow button -->
            <a-image class="clickable" button-prev position="-10 0.5 0" src="#button-left">
                <a-animation begin="cursortrigger" end="cursorabort" attribute="material.color" fill="forwards" from="white" to="#19DC19" dur="2000"></a-animation>
                <a-animation begin="cursorabort" attribute="material.color" fill="forwards" to="white" dur="200"></a-animation>
            </a-image>

            <!-- Right arrow button -->
            <a-image class="clickable" button-next position="10 0.5 0" src="#button-right">
                <a-animation begin="cursortrigger" end="cursorabort" attribute="material.color" fill="forwards" from="white" to="#19DC19" dur="2000"></a-animation>
                <a-animation begin="cursorabort" attribute="material.color" fill="forwards" to="white" dur="200"></a-animation>
            </a-image>

            <a-entity position="-3.5 2 0" scale="5 2.5 1">
                <a-image id="frame00" material="opacity: 0;" src="#frame-selected" position="0 0 0.1" scale="1.2 1.4 1">
                    <a-animation begin="focusstart" end="focusend" attribute="material.opacity" to="1" dur="200"></a-animation>
                    <a-animation begin="focusend" attribute="material.opacity" to="0" dur="200"></a-animation>
                </a-image>
                <a-image target id="video00" class="clickable" position="0 0 0.2"></a-image>
            </a-entity>

            <a-entity position="3.5 2 0" scale="5 2.5 1">
                <a-image id="frame01" material="opacity: 0;" src="#frame-selected" position="0 0 0.1" scale="1.2 1.4 1">
                    <a-animation begin="focusstart" end="focusend" attribute="material.opacity" to="1" dur="200"></a-animation>
                    <a-animation begin="focusend" attribute="material.opacity" to="0" dur="200"></a-animation>
                </a-image>
                <a-image target id="video01" class="clickable" position="0 0 0.2"></a-image>
            </a-entity>

            <a-entity position="-3.5 -2 0" scale="5 2.5 1">
                <a-image id="frame02" material="opacity: 0;" src="#frame-selected" position="0 0 0.1" scale="1.2 1.4 1">
                    <a-animation begin="focusstart" end="focusend" attribute="material.opacity" to="1" dur="200"></a-animation>
                    <a-animation begin="focusend" attribute="material.opacity" to="0" dur="200"></a-animation>
                </a-image>
                <a-image target id="video02" class="clickable" position="0 0 0.2"></a-image>
            </a-entity>

            <a-entity position="3.5 -2 0" scale="5 2.5 1">
                <a-image id="frame03" material="opacity: 0;" src="#frame-selected" position="0 0 0.1" scale="1.2 1.4 1">
                    <a-animation begin="focusstart" end="focusend" attribute="material.opacity" to="1" dur="200"></a-animation>
                    <a-animation begin="focusend" attribute="material.opacity" to="0" dur="200"></a-animation>
                </a-image>
                <a-image target id="video03" class="clickable" position="0 0 0.2"></a-image>
            </a-entity>

            <a-image lobby-play-button class="clickable" id="lobby-play-button" src="#button-play" visible="false" position="0 -6.5 0" scale="1.5 1.5 0">
                <a-animation begin="cursortrigger" end="cursorabort" attribute="material.color" fill="forwards" from="white" to="#19DC19" dur="2000"></a-animation>
                <a-animation begin="cursorabort" attribute="material.color" fill="forwards" to="white" dur="200"></a-animation>
            </a-image>
        </a-entity>
    </a-entity>

    <a-camera id="main-camera">
        <a-cursor hackursor color="#05669F">
            <a-animation begin="cursortrigger" end="cursorabort" easing="ease-in" dur="2000" attribute="scale" fill="forwards" from="2 2 1" to="1 1 1"></a-animation>
            <a-animation begin="cursorabort" easing="linear" dur="200" attribute="scale" fill="forwards" from="2 2 1" to="1 1 1"></a-animation>
            <a-animation begin="cursortrigger" end="cursorabort" easing="linear" dur="2000" attribute="material.color" fill="forwards" from="white" to="#05669F"></a-animation>
            <a-animation begin="cursorabort" easing="linear" dur="200" attribute="material.color" fill="forwards" from="white" to="#05669F"></a-animation>
        </a-cursor>
    </a-camera>

    <a-entity visible="false" id="buttons-control-frame" position="0 -4 -4" scale="0.5 0.5 0.5" look-at="#main-camera">
        <a-image src="#frame-content" scale="5 3 5"></a-image>
        <a-image control-button class="clickable" src="#button-stop" position="-0.6 0 6">
            <a-animation begin="cursortrigger" end="cursorabort" attribute="material.color" fill="forwards" from="white" to="#19DC19" dur="2000"></a-animation>
            <a-animation begin="cursorabort" attribute="material.color" fill="forwards" to="white" dur="200"></a-animation>
        </a-image>
        <a-image control-button id="buttons-play-pause" class="clickable" src="#button-pause" position="0.6 0 6">
            <a-animation begin="cursortrigger" end="cursorabort" attribute="material.color" fill="forwards" from="white" to="#19DC19" dur="2000"></a-animation>
            <a-animation begin="cursorabort" attribute="material.color" fill="forwards" to="white" dur="200"></a-animation>
        </a-image>
    </a-entity>

</a-scene>
 For information: it's inside an a-scene, editor just wont allow it for some reason.

@dmarcos: Yes, I've also tried updating to 0.4.0, same problem. I just tried to run the showcase HelloWorld on the phone, works perfectly. It's built with Ionic / Angular.js, the scene can run independently, at least the VR mode can. Clicking VR-Mode works 50% of the times, and it's possible to use the Android back button and spam untill it is successful.

The scene I provided is a lobby scene which is a view for itself, I can provide the controller and service it uses, but as far as I can tell, it doesn't actually have anything to do with the VR-mode button.

Can you perhaps be specific in what you would like to see?

  ya i will do it
  When `<a-scene>` is created, it scrolls the document to the top of the page. Note that the `embedded` attribute is also set.

- A-Frame Version: 0.4.0
- Platform / Device: Chrome / Firefox
- Reproducible Code Snippet or URL:

The below will create the scene after a 5 second interval. If scrolled to the bottom, the page will jump back to the top on initiation.

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>
	<style>
		.bottom { 
			position: absolute;
			top: 4000px;
		}
	</style>
</head>

<body>
	<div class="bottom">
		<p>Bottom</p>
	</div>
	<div id="vr-scene"></div>
	<script>
		var initSceneInterval = setInterval(function(){ initScene(); }, 5000); //interval so will slide without interaction as well
		function initScene () {
			var vrScene = document.createElement("a-scene");
			var embedded = document.createAttribute("embedded");
			vrScene.setAttributeNode(embedded); 
			document.getElementById("vr-scene").appendChild(vrScene);
		}
	</script>
</body>
</html>
```

  thanks!  **Description:**

**Changes proposed:**
-added one sentence telling user to put their javascript after the scene
-
-
  **Description:**

**Changes proposed:**
-change errant ; to ,
-add ; at end of line
 Thanks for your patience. This is my first commit to a big open source project.  I can add the following disclaimer in the Getting Started Guide under Play With CodePen:

CodePen is a playground for front-end web development. We can edit HTML and JavaScript directly in the browser with its text editor, see changes live, and share code snippets. This is a fast way to dive in without having to download or install anything. Check out the official MozVR CodePens and the A-Frame Hello World CodePen:

**Disclaimer:** You need to add the **allow-vr** attribute to a-frames to use the Codepen example with WebVR or on your VR device.

 Oh I see, 

**Disclaimer:** VR mode won't work right now until the`allow-vr` attribute is added to CodePen's I-Frames.

How's that?  <!-- If you have a support question, please ask at https://stackoverflow.com/questions/ask/?tags=aframe rather than filing an issue. -->

**Description:**

Create an a-scene with stats (<a-scene stats ...). The text is black on dark gray. This is very difficult to read, especially on mobile devices where the font is smaller.

<img width="322" alt="screen shot 2017-01-10 at 1 10 47 pm" src="https://cloud.githubusercontent.com/assets/122875/21823120/13e86ab6-d737-11e6-810e-9c9eb7d01b0a.png">


- A-Frame Version: 0.4.0
- Platform / Device: Mac Chrome / iOS 
- Reproducible Code Snippet or URL: https://mitchallen.github.io/birdseye.html
 you can also try
https://github.com/chenzlabs/stats-in-vr @dmarcos, @ngokevin okay, I'll review the contrib guide and do that tomorrow.  donmccurdy [3:54 PM] 
Ok, so, if you're on roomscale devices definitely avoid `kinematic-body`
if not, I think i would do something like this: https://github.com/donmccurdy/aframe-extras/blob/master/examples/walls/index.html
rather than putting height on the camera (edited)

[3:55]  
since physics needs to know about that height

giordy [3:55 PM] 
i’m using it for mobile

[3:56]  
for roomscale i’m using the teleport-controls

donmccurdy [3:56 PM] 
Ok cool

giordy [3:56 PM] 
but I can’t have both in the same scene as teleport-controls want a separate camera object

donmccurdy [3:57 PM] 
Kk, haven't had the chance to try `teleport-controls` myself yet

giordy [3:57 PM] 
i spent all day today trying to get it work with the physics engine but it gave me all sort of problems

[3:57]  
but then again my js skills are quite limited

[3:59]  
if you wanna take a look at what i’ve done you can find my scene at http://www.pippistarace.it/aframe/ (without controls)

donmccurdy [3:59 PM] 
Yeah, i don't have any expectation that kinematic-body can work with roomscale.. it's just hard to do, and the experience would be so bad that it's really not worth it.

giordy [4:00 PM] 
or http://www.pippistarace.it/aframe/indexrift.html (with controls but no physics)

leupsi [4:00 PM] 
Please have a look at the modified version of the Playground example. The barrier to limit the world works fine, only problem is the camera is bouncing back when colliding. And it doesn't work when wasd-controls are used, no idea why that. I think it's quite useful when playing the scene on a cardboard, so the user does not lost himself in white. http://leupsi.com/interaction/aframe/barrier/

giordy [4:01 PM] 
yeah i figured as much…I need to find a way to toggle between the two on the same scene, i suppose I need to dynamically delete or change a bunch of entities

[4:03]  
@leupsi it looks fine on safari, what do you mean it’s bouncing back?

donmccurdy [4:03 PM] 
@leupsi i don't see the bouncing either.. to some extent that's controlled by restitution: `physics="restitution: 0.3"` for example.

[4:04]  
`wasd-controls` won't work with physics though. There are specific accomodations in `universal-controls` for physics to be possible.

leupsi [4:05 PM] 
Okay thank's for the clarification @donmccurdy

[4:06]  
So flying is not possible with physics enabled?

donmccurdy [4:09 PM] 
I don't know. I would try adding `universal-controls="fly: true"` also. But I haven't been doing much with kinematic-body lately, focusing more on roomscale.

giordy [4:09 PM] 
try to set gravity to 0 and add jump-ability="maxJumps: 3; distance: 10;"

[4:10]  
:stuck_out_tongue: like neo in the matrix

leupsi [4:12 PM] 
Preparing for the next moon mission? :stuck_out_tongue:

donmccurdy [4:24 PM] 
haha well it's realistic at least :laughing:

leupsi [4:32 PM] 
@donmccurdy `universal-controls="fly: true"` works but it's super sensitive and w and s are inverted on the axis, so they move up and down. Anyways is it possible to set the sensivity of "fly"?

donmccurdy [5:06 PM] 
Settings are here: https://github.com/donmccurdy/aframe-extras/blob/master/src/controls/universal-controls.js
GitHub
donmccurdy/aframe-extras
aframe-extras - :confetti_ball: Add-ons and helpers for A-Frame VR.
 

[5:07]  
It's not inverting axis like a flight simulator or anything, you'll need to write custom code if that's what you're going for

mchen [8:04 PM] 
> but I can’t have both in the same scene as teleport-controls want a separate camera object

say more?

...

----- Yesterday January 9th, 2017 -----
giordy [3:06 AM] 
@mchen the only way I got the kinetic-body to work is with the following code

```html
<a-entity id=player camera kinematic-body universal-controls position=" 0 1.764 0">
           <a-entity id=cursor cursor="fuse: true; fuseTimeout: 0" raycaster="far: 8;" scale="0.01 0.01 0.01" position="0 0 -1" geometry="primitive: ring" material="color: #2E3A87 ; shader: flat"></a-entity>
       </a-entity>
```

[3:08]  
@mchen but to have the teleport-controls to follow the “player” entity it needs to be like this

```html
<a-entity id=player position="-26 0 -16">
           <a-camera>
           </a-camera>
           <a-entity auto-detect-controllers="singlehand:right" teleport-controls="playerEntity:#player;collisionEntity:#floor;button: trigger;startEvent: down;endEvent:up"></a-entity>
       </a-entity>
```
(edited)

[3:09]  
notice that in the second example the camera is separate from the “player” entity

[3:14]  
this was the only way to get it to work properly, if I add the teleport controls to the first example then all hell breaks lose. (i.e. controllers Y position becomes higher than the camera, when I try to teleport the ray rotates both with the controller AND the camera)

[3:14]  
i think it’s because teleport-controls doesn’t like being a child of the camera, but the issue might also be with the generic tracked-controllers since the position is also wrong (edited)

chrisnovello [5:17 AM] 
joined #issues

mchen [8:33 AM] 
i don't get where you were trying to have controllers in the first example...

giordy [9:17 AM] 
@mchen when I get home I will publish a new html with what I am talking about

sean-lerner [9:18 AM] 
joined #issues. Also, @itsravenous joined, @jeff.gayle joined, @kabbi joined.

giordy [3:05 PM] 
@mchen here are the different scenarios that I tried:

giordy [3:08 PM] 
added this HTML snippet

```
 <a-entity id=player camera="userHeight:1.6" universal-controls kinematic-body position="-26 0 -16">
            <a-entity id=cursor cursor="fuse: true; fuseTimeout: 0" raycaster="far: 8;" scale="0.01 0.01 0.01" position="0 0 -1" geometry="primitive: ring" material="color: #2E3A87; shader: flat"></a-entity>
            <a-entity auto-detect-controllers="singlehand:right" teleport-controls="playerEntity:#player;collisionEntity:#floor;button: trigger;startEvent: down;endEvent:up"></a-entity>
        </a-entity>
```

giordy [3:09 PM] 
(you can try it at this url: http://www.pippistarace.it/aframe/teleportnphysics-test2.html) (edited)

[3:10]  
with this the physics collisions work, but the controllers are placed too high and rotate both with the physical controller and the headset.

giordy [3:10 PM] 
added this HTML snippet

```
        <a-entity id=player position="-26 0 -16">
            <a-camera universal-controls kinematic-body>
                <a-entity id=cursor cursor="fuse: true; fuseTimeout: 0" raycaster="far: 8;" scale="0.01 0.01 0.01" position="0 0 -1" geometry="primitive: ring" material="color: #2E3A87; shader: flat"></a-entity>
​
            </a-camera>
```

Add Comment Click to expand inline 8 lines

mchen [3:10 PM] 
right, because the controllers are children of the camera and thus headlocked, which you don't want.

giordy [3:11 PM] 
with the second example (that you can try at http://www.pippistarace.it/aframe/teleportnphysics-test2.html) the controllers and teleport work fine, but the physics don't work (i am able to go through walls) (edited)

[3:14]  
i think i'm going to have 2 versions of the gallery anyways, one for the full HMDs and the other one for mobile/browsers

[3:15]  
this is what I was talking about when I was saying that I can't have the kinematic-body and the teleport-controls in the same scene

tltmedia [3:16 PM] 
I keep falling through the floor :stuck_out_tongue:

mchen [3:37 PM] 
shouldn't the kinematic body be on the player not the camera in the second example?

giordy [3:48 PM] 
i tried both, it doesn't make a difference

[3:50]  
and if I don't set gravity to 0 it falls through the floor. i even tried to set the y position at something higher than 0 (ex. 1.6 like i have it in the first example) but it still doesn't work

...

mchen [10:37 PM] 
@giordy the reason why the player falls through the floor when you put the kinematic-body on it is actually quite simple.  you have your floor-box aboze zero.  so since the player y is zero, as soon as you make it the kinematic body, it is already below the top surface of the floor and starts falling.  move your floor down so the top edge is at zero, and that problem goes away...

[10:38]  
what I wonder is whether at y=0 the player is able to move under the walls, so maybe cheat the player up a tiny bit?

mchen [10:44 PM] 
no, i see what the other problem is.  the way you have test2 set up, you are actually moving the camera, not the player.  so if the player is the kinematic body, it's sitting in a place with no collisions, and you're moving the camera through walls while the player that you're checking is in the same spot.

[10:45]  
... and it is quite possible/likely that several of the movement controls you are using will not like being on the player instead of the camera, which is why for the arcade I stopped using wasd-controls for example

mchen [10:52 PM] 
@donmccurdy given a player construct, is there a way to make `universal-controls` move the player not the camera (which is currently being moved anyway via direct vr hmd changes) ? (edited)

[10:53]  
by player construct, I mean something like

```
<a-entity id="player" kinematic-body universal-controls>
<a-camera></a-camera>
<!-- hand controls would also be children of player, peer of camera -->
</a-entity>
```

(edited)

donmccurdy [11:00 PM] 
@mchen that example looks like it should work, it just moves whatever entity it's attached to.

[11:01]  
Eh, well except that the hand controls are going to be positioned in absolute coordinates

[11:01]  
so any motion or rotation of the camera is messing with that.

michael.andrew [11:35 PM] 
Probably better to just move the world around the player so the hand control positions stay correct. I’m having similar issues at the moment with something I’m working on.


----- Today January 10th, 2017 -----
danodejos [2:24 AM] 
joined #issues

mchen [2:27 AM] 
@donmccurdy ... yeah, that appears to be causing @giordy issues

donmccurdy [2:31 AM] 
Ok, I don't have an easy solution to that. Hand controls are not designed to be nested inside a moving entity, whether it's `universal-controls` or `look-controls`. (edited)

[2:32]  
I should probably also reiterate, `kinematic-body` is fundamentally incompatible with roomscale VR, so there are a lot of things likely to go wrong here.

mchen [2:33 AM] 
right.  proper structure IMO is player entity as parent of both camera and controllers (and any other tracked objects in that roomscale space, I suppose)

donmccurdy [2:34 AM] 
What does the player entity do, in that case?

[2:34]  
or provide?

mchen [2:34 AM] 
prevents you from having to move all three independently...

[2:35]  
in theory you can teleport the roomscale space around, instead of moving the entire world

donmccurdy [2:35 AM] 
So, like teleportation would move the player, but walking in roomscale would just move the camera?

[2:35]  
Ok yeah. That seems right to me.

mchen [2:35 AM] 
camera does what camera does, yeah.

[2:36]  
when you say kinematic-body is incompatible with roomscale, i've only seen your physics system use dynamic and static bodies...?

donmccurdy [2:37 AM] 
To adjust the example above, then:

```html
<a-entity id="player">
  <a-entity camera universal-controls></a-entity>
  <!-- hand controls would also be children of player, peer of camera -->
</a-entity>
```

^Is what I'd suggest. I think that should work equally well with `<a-camera/>` in place of the inner entity. Teleport controls wouldn't know about the player wrapper, but if we decide that's the right structure we could consider setting that up.

[2:38]  
Yeah, for exactly that reason I've omitted the `kinematic-body` component from aframe-physics-system. It's just in aframe-extras, with an "experimental" label on it.

mchen [2:39 AM] 
doesn't work right if you do that, universal controls artificially moves the camera without the controllers and screws up the roomspace

[2:39]  
IMO, we may just want to attach the controls to the player and move that...

donmccurdy [2:40 AM] 
Hm? That's what we just said though, `universal-controls` moves the camera the same way that `look-controls` does.

[2:40]  
are we talking about roomscale here?

mchen [2:40 AM] 
yes

[2:41]  
orientation adjustment doesn't mess up controller position, but when you start using wasd-controls or something to actually do translation, that gets weird

donmccurdy [2:41 AM] 
Ok, gotcha, I thought we were talking about tracked HMD movement / walking. When you walk in roomscale, `universal-controls` needs to move the camera.

mchen [2:42 AM] 
if you are wearing the HMD / camera, it's cool.

[2:42]  
ohhh right, you have universal-controls doing hmd-controls in the refactor.

[2:42]  
but the artificial stuff shouldn't muck up the roomscale relationships.

[2:43]  
which may mean another refactor...

donmccurdy [2:43 AM] 
Yeah, lots of possible inputs to universal controls. Could be a gamepad, there's even some teleportation support built in.

[2:44]  
I'm nervous about having `universal-controls` try to move different entities depending on the input device, that's hard to plan around...

[2:44]  
Another option would be to refactor hand-controls to just assume they're relative to the camera

[2:45]  
so you can always do:

```
<a-camera universal-controls>
  <!-- hand controls here -->
</a-camera>
```

[2:45]  
that's the approach I took with leap motion, and it worked nicely.

[2:45]  
(but it's also much easier with leap motion ...)

[2:46]  
Let's move discussion to a github issue, getting late here, and it would be worth having a record of this.

mchen [2:46 AM] 
k

donmccurdy [2:47 AM] 
original goal of universal-controls was to support locomotion from different input devices
ideally goal of some "player" abstraction would be to support locomotion AND tracked controls from various sources.

[2:48]  
fine with me if that requires rewriting stuff somewhat related:
```Updated A-Frame Arcade http://chenz.org/aframe-arcade/ to use physics for handling movement and collisions... nontrivial to make teleport, roomscale w/controllers, and traditional arrow keys / mouse drag/ scroll all work.  if folks get a chance to try it and let me know if there are things that don't work well, I'd love the feedback (DM me)```
that uses a fork of @fernandojsg aframe-teleport-controls that has been taught how to (1) move player entity, not camera and controllers (2) move physics bodies as well as non-physics entities
and has its own equivalent of arrow key `wasd-controls` as well as multi-tap/click, mouse scroll / drag, D-Pad / stick movement... http://chenz.org/aframe-arcade/ does something very similar to (C) actually, although the `teleport-controls` string looks a little different to specify the player entity that should be moved (IMO that is actually better than having a hidden need for `tracked-controls` and moving anything it finds with that component, active or not). (A) breaks tracked controllers badly at the moment.
(B) gets very ugly w.r.t. locomotion IMO especially if rotation is included > Let's exclude `kinematic-body` from discussion

http://chenz.org/aframe-arcade/ is now using `aframe-physics-system` and `dynamic-body` / `static-body` for movement and collisions as of this morning. @fernandojsg right, that is what i am doing as well, with some mods to your teleport controls... (1) allow other objects to block the teleport arcs (2) move player entity if specified (3) move physics body not object3d if present... chenzlabs/aframe-teleport-controls

found a physics combination that works ok with teleport for chenz.org/aframe-arcade (player as dynamic body) although i would rather have standard gravity and a few nonexistent types of constraints instead I'm using a similar approach in my project, my player object looks like this:

```
 <a-entity id=player position="-26 0 -16">
            <a-camera>
            </a-camera>
            <a-entity id=controllerleft oculus-touch-controls="hand:left" mixin="controller"></a-entity>
            <a-entity id=controllerright oculus-touch-controls="hand:right" mixin="controller" teleport-controls="playerEntity:#player;collisionEntity:#floor;button: grip;startEvent: down;endEvent:up"></a-entity>
 </a-entity>
```

Unfortunately this approach breaks whatever component uses the controller's position because in this case it becomes relative to the parent object instead of the scene.

As you can see I'm using both teleport-controls (the ones forked by @machenmusik, which allows me to have the player start at a different location other than 0 0 0) and super-hands components.

To get it to work correctly with this configuration (i.e. controllers attached to another entity instead of the scene) I had to modify both the @donmccurdy 's sphere-collider (already merged) and @wmurphyrd (still need to do the pull request) by [changing all references to the controller's position attribute to controller.object3D.getWorldPosition()](https://github.com/donmccurdy/aframe-extras/commit/d7eb72f586001f1908b39f7a8125ba48d093d848).

It's a bit of a hack but it works for me. I'm sure you guys can find a much better solution though, I'm a newbie here... yeah there was/is a habit where everything is assumed to be a direct descendant of scene (without saying so)

almost wonder if it would be better to have current usage of position be called localPosition... but that would likely break everything Seems like this is going to be an ongoing point of confusion for creators.
While digging into the THREE.js API works, it's not in line with the spirit
of A-Frame.

One option would be flag parameter in getAttribute to specify relative v.
absolute. Probably not ideal, though, since it would have inconsistent
effects depending on the attribute (I think only position, rotation, and
scale would benefit from this)

On Tue, Jan 24, 2017, 9:56 AM machenmusik <notifications@github.com> wrote:

> yeah there was/is a habit where everything is assumed to be a direct
> descendant of scene (without saying so)
>
> almost wonder if it would be better to have current usage of position be
> called localPosition... but that would likely break everything
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/2265#issuecomment-274845024>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AJkeqzx3OEN3SN1FyJzBWkHZuEf8azeuks5rVh8tgaJpZM4LfhrW>
> .
>
 I don't think modifying getAttribute would match (sounds like getComputedAttribute, which I presume went away for a reason) - maybe just standard API for these like AFRAME.utils.___ (which can actually be implemented via THREE, and replaced with alternatives if someone wanted to use A-Frame over a different backend) I had an idea the other day for another solution that more is consistent with the API: new default components world-position, world-rotation, & world-scale.

* Use the same `getAttribute` and `setAttribute` API, handling the appropriate transformations and updates
* Essentially invisible to creators unless they need the interface, but also easier to discover when they do need it than a utils method
* For entities that have no `object3d`, can failover to traversing the DOM hierarchy to determine the absolute position/rotation/scale taking the teleport case, it's not enough to have get-only e.g. to propagate camera change to controllers.  that would only work if one had a player / camerarig entity that owned both, and assumes only one level of hierarchy.

Why not allow setting using global coordinates, which would be done by setting local to the appropriate computed global-to-local delta? yes, but if you want to move it to global coordinates, not being able to set using global coordinates will be a problem. I'm not sure we should assume that the player/camerarig is a direct descendant of scene, in the same way we shouldn't assume that camera and controller entities are a direct descendant of scene.  I agree that the most common case is that way right now, but I can see a outer world-offset entity, with a player entity inside that which contains camera and controllers... thinking about this a little more, position and scale are pretty easy, but rotation may not be.  Maybe read-only globals plus utils functions to set relative to a given entity?  And, the geometries aren't getting merged, possibly because of a wrong property check (in merging demo the both have buffer=false).  Nice.  I have pretty limited time this next few months, but do think this is super important for 3D web for all the reasons Don mentioned and we all already know :)

@ngokevin how do you suggest we do this?  There's very little in the component itself that's glTF specific, most of what's in the component I made is build tools and demo -- I would assume it's as easy as copy pasting the Collada component and changing a few lines to make glTF part of core?  The command line Collada to glTF converter works quite well, but it's fairly tricky to set up.  There is an online converter that works for testing, but doesn't build to multiple files so binary data (even when not in binary mode) is baked in, making it giant / slow to parse.

Autodesk has an FBX to glTF converter, to my understanding coming out quite soon, which I expect to be pretty strong.  Autodesk also has a new project that is WebGL focused, which I'd be surprised if it didn't integrate glTF soon (Project Play).

Blender has an exporter plugin, but haven't used it -- I've only heard one person trying to use it, and I think they had problems with it.  

All things considered, I think the Collada to glTF converter is worth the headache of getting it running (just like most front-end developers are now used to the permission problems Node initially has when they are not used to a Linux system).

... but confess that I'm biased ;)  Also, figured I'd point out that with Unity, you can make things like this:

[https://vimeo.com/181420338](https://vimeo.com/181420338)
[https://vimeo.com/192071365](https://vimeo.com/192071365)
[https://www.youtube.com/watch?v=tVHH3-bP-fE](https://www.youtube.com/watch?v=tVHH3-bP-fE)

It might be that a run-time focused library (i.e. ThreeJS + AFrame, Babylon, regl) won't catch up to what a compile time library (Unity, Unreal; leveraging Emscripten and soon Web Assembly) -- but if (Three/AFrame) it is to have a chance, the kind of shader, geometry, and animation work in the above three examples needs to be done by a designer and exported in a way the run-time libraries can use them -- trust me, trying to code these is insanity :)

One more side note on adoption, Babylon has support for glTF, and I believe someone is working on an importer for regl as well.  > It also makes it impossible to preserve private APIs within A-Frame core.

Can someone explain why private APIs within A-Frame core are needed, preferably with examples?

> But I recognize that neither of those is a good solution when the component depends on various utils or helpers.

Right, I think part of the idea here is to make utils and helpers exposed non-private, so that nontrivial new component functionality can be developed without having to be in core in order to depend upon private APIs. To use a potentially flawed Windows analogy... do we see A-Frame core as Win32 API on which a variety of functionality and components can be developed?  Or as MFC where a framework and components are provided, and more can be created by following the paradigm? @ngokevin so sounds like aframe non-component is like win32 API (private APIs may be required) and aframe components are like MFC atop public win32 API.  if so, gets my vote at present  Hey,

If I click on an intersected component, which fires a click event, the intersection point never shows the clicked point but just the position, where the cursor entered the component.

Any help?

my javascript:
```

var paper = document.querySelector("#paper");
paper.addEventListener('click', function(evt){
 console.log('clicked @: ', evt.detail.intersection.point);
});
```

my entity:

```
<a-entity geometry="primitive: plane; height: 6.1; width: 8" material="src: #p-dr-mtl" class="paper" id="p-dr" position="0 10 0" rotation="-35 0 0" scale="0 0 0">
            <a-animation attribute="position" begin="getPaper" to="0 5.25 -1.2"></a-animation>
            <a-animation attribute="scale" dur="2000" begin="getPaper" to="0.2 0.2 0.2"></a-animation>
</a-entity>
```
 Hey! Thank you. I had a wrong/old version of a-frame.  A-Frame Text component Dynamic Data needed help 

If so examples and demos any pls ...  Add support for NPOT texture settings e.g. material="src:#imgElement; npot:true"
Fix support for texture offset / repeat (broken defaults and broken apply logic) This fixes #2252    before executing callback from material.src load, check to make sure we still should (i.e. that the textureSrc still matches); also, clear textureSrc when material.src is cleared to correctly detect subsequent changes unless you have some way to make an image load delay for long enough to trigger the race condition during testing, not reliably that I can think of... ok I don't know what happened, I think that somehow #2199 got roped into this one... rebased to get rid of all that noise, we can deal with that on #2199 itself changes made to #2199.

is this one good to go now? @dmarcos have you come up with an alternative fix, or has this version grown on you?  When material.src is reused, possible race conditions may prevent the desired src from being visible.

- A-Frame Version: 0.4.0
- Platform / Device: multiple
- Reproducible Code Snippet or URL:

1. Find an image URL that takes a while to be loaded.
2. Set up a scene with an entity that loads material.src from that URL (directly via src, or indirectly via selector)
3. After material.src is set, but before the image URL finished loading, change material.src to something else (e.g. a canvas)

Expected result - the canvas will remain visible as material.src, and the image load will be ignored.
Actual result - despite material.src referencing the canvas, the image load will overwrite the canvas and remain visible.  In order to make the canvas visible again, some hijinx is required due to another issue I will file separately  (that assumes the browser would allow it...)
there is already code in 0.4.0 that will auto-enter for Carmel; 
the intent was to be able to provide empty string to auto-enter regardless of display,
but in practice I'm not sure that the parsing allows empty string to survive through to init (at present, when auto-enter fails, the button to enter VR again later does not reappear for some reason, so there is a penalty for trying but failing) so using the 0.4.0 auto-enter-vr, if you know the VR display name you want to auto-enter and can modify the display parameter for the auto-enter-vr component accordingly, that might work...

IMO not good to avoid page reload since scripts won't re-run etc. also see #2298 @caseyyee my current working pattern is to use experimental Chromium and Rift; since that sends vrdisplayactivate, all you need to do is lift the headset up far enough for it to trigger deactivate, then let it drop back down to reactivate and bam! you are back in VR @ngokevin the reload should be detected as a "subsequent navigation / refresh", I would think...  **Description:**

If you try to do something like the below, you'll get knock on errors in raycaster and cursor due to there being no scene element.   I'm still getting used to the codebase so I just added these patches, but perhaps the right way to handle it would be to actually stop the element from appending if there is no nearby scene, instead of just warning.  testing for a scene in many different places seems redundant, but please advise :) 

https://github.com/aframevr/aframe/issues/2225

```
var el = document.createElement('a-entity');
el.setAttribute('cursor','')
document.body.appendChild(el);

```

**Changes proposed:**
- warn if no scene element in raycaster and cursor
- return early so we dont throw an error.
-
  **Description:**

This PR adds a console warning if you try to append an element without a scene nearby.

Previously, this code 'failed silently' -- your entities need to be children of a scene.
```
var el = document.createElement('a-entity');
document.body.appendChild(el);
```

Now it displays a warning 
```You are attempting to attach an entity outside of the A-Frame scene. Try appending to the "a-scene" element. ```

https://github.com/aframevr/aframe/issues/2225

**Changes proposed:**
- Check is there is a closest scene before loading.


P.S.  Please let me know if there's an earlier place we should be doing this check -- it does end up actually appending the element to the document body, which seems undesirable, but harmless i guess since it doesn't do anything.  If someone missing the warning and sees the element in the DOM, it could be confusing.  Also not sure if there's a performance impact from checking this for all elements (doesn't seem like it.)
 yep! -- i just noticed that object3D error is actually coming from the cursor component that is being appended in the issue, so i think that here the warning will be sufficient and i can open another pull to try to exit early on no object3d on the raycaster :) thanks -- didn't know about the warn utility, i'll be sure to use it next time.    

**the reload() method for a scene only shows a blank white page:**

- A-Frame Version: 4.0
- Platform / Device: tried on safari & chrome on macOS and windows 
- Reproducible Code Snippet or URL: 
with any scene open, just run document.querySelector('a-scene').reload(); in the developer console.
 Hey there, I got the same error.
Are there any updates to this issue? same here same @dmarcos i had aframe running as a thumbnail in a corner and when clicked it takes over the page. when it loads small like that the images are very compressed, if you just change the size the image compression becomes very visible. once it is large i destroyed the aframe and built it again so that the images appeared larger. if i had the ability to reload instead, the other state information like position of camera would not be lost on destroy and rebuild.  **Description:**
License updated  **Description:**
Added missing line to draw circle for face & minor /punctuation

**Changes proposed:**
Also the codepen link is dead - https://codepen.io/dirkk0/pen/MbJEy

I have created one at https://codepen.io/TechnoBuddhist/pen/MJWVJN  but haven't proposed the change in case you want to keep it 'in house'.

  **Description:**

**Changes proposed:**
-
-
-
 agree with @dmarcos also see #2265  **Description:**
This PR adds the keyboard shortcut for equirectangular screenshots to the docs.

https://github.com/aframevr/aframe/issues/2203

**Changes proposed:**
Change markdown to show shortcut.  **Description:**

This PR checks for uppercase characters in component names.  Since HTML changes these to lowercase, it's important that users have a warning about how to correctly access their components.

https://github.com/aframevr/aframe/issues/2139

**Changes proposed:**
- Use a regex to test the name for uppercase, warn if this is the case.
  **Description:**

- A-Frame Version: 4.0
- Platform/Device: Oculus Rift + Oculus Touch
 & http://www.pippistarace.it/aframe/helloworld2.html

The Oculus Touch controllers stay relative to 0 0 0 even though the camera has been set at a different position during loading of the scene.

this is a demo scene with the oculus touch enabled and the camera set to 0 0 0 http://www.pippistarace.it/aframe/helloworld1.html

this is another demo scene where the camera has been set at a different location. I would expect the touch controller to somehow be relative to the camera but instead they stay at 0 0 0 and can be seen from a distance
http://www.pippistarace.it/aframe/helloworld2.html I didn't change any of the `tracked-controls` position logic in the recent refactor, so I expect this would have been true previously as well... but I think the issue with the second scene is that the camera is specifically offset from the controllers due to the non-shared parent entity, so I think it is working as expected... @dmarcos @fernandojsg thoughts? well the issue that I am having is that my scene is dynamically generated and the camera starts somewhere far from 0 0 0. 
Is there a way to move the controllers or give them a starting location as well? you should be able to give them a position, @fernandojsg added that before I got here IIRC you are correct, if I set a similar position as the camera then the controllers show up.
I did try it before  but I did not realize that if I set the SAME position as the camera the controllers end up a little behind and cannot be seen. Once I saw their position in the inspector I was able to correct it. 

One issue that I found is that if I start with the camera rotated by a certain amount (i.e. 90 degrees) then the controllers will always be facing the wrong direction, even if I specify the same rotation as the camera.

Another issue that I found is that changing the position completely breaks the teleport-controls, every press seems to teleport somewhere else instead of the target at the end of the arc.

I've added the teleport controls to the two html files so that you can try it out you can see how i am using teleport in my gallery example... yeah i don't think there is rotation offset support in `tracked-controls` - not sure how far we should go, feels like a better control of roomspace may be helpful rather than these one-offs not sure if but if camera and controllers have shared parent that has rotation offset but position is done to each child individually, that may work for now including for teleport?  i think the teleport code needs to understand world to local conversion when computing position offset @giordyb sounds like the remaining issue you are having is really with teleport controls and not with tracked controllers anymore?  should we edit title and/or close this issue? is the behavior from Nightly correct?  i would expect that if (direct) oculus support is enabled, openvr should not be used for oculus devices? @machenmusik yes, it looks like the issue is limited to the teleport controls, I believe we can close the issue.
@caseyyee I did all my tests with chromium for webvr. I can't close this issue.  But... @giordyb I believe I have a fix in chenzlabs/aframe-teleport-controls

@caseyyee any way to try out the direct support in upcoming Nightly to make sure there aren't any discrepancies? @machenmusik I tried the teleport control version that you mentioned but I think it's broken, even at 0 0 0 i'm not getting anything when I press the trigger, and all I did was replacing the JS script  @giordyb you should close this issue and we should move the discussion to teleport-controls projects...
were you using my version before, or @fernandojsg ?  mine changed to use hand gesture events, so if you were using @fernandojsg then you need to change some of the parameters @machenmusik agreed, I will close the issue.  Just updating the pointer to the correct one for the Understanding Component-Entity-Systems article.  Using the new setAttribute non-clobbering object update to replace an array property will update the schema data but will not trigger the update method. 

- A-Frame Version: v.0.4.0
- Platform/Device: Chromium WebVR v.55
```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/0.4.0/aframe.js"></script>
    <script>
      AFRAME.registerComponent('update-test', {
        schema: { arr: { default: ['#000', '2', '3'] } },
        init: function() {
          this.target = document.getElementById('dataTarget');
          this.el.sceneEl.addEventListener('loaded', this.send.bind(this));
        },
        send: function() {
          this.target.setAttribute('receiver', {arr: this.data.arr});
          console.log("Should see a second 'receiver updated' log before this line and the cube changed to black color, but the schema data in the target gets changed without triggering update():", 
                      JSON.stringify(this.target.components.receiver.data.arr));
        }
      });
      AFRAME.registerComponent('receiver', {
        schema: { arr: { default: ["#CCC"] } },
        dependencies: ['material'],
        update: function() {
          if(this.data.arr[0]) {
            this.el.setAttribute('material', 'color', this.data.arr[0]);
          }
          console.log('reciever updated', JSON.stringify(this.data.arr));
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-box id="dataTarget" receiver position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
      <a-sphere update-test position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
  </body>
</html>
```

In this example, I expect to see 'receiver updated' logged two times (once on initialization and again on the `setAttribute` call from `update-test.send()`) and for the cube to turn black. Instead there is no second update log, and the cube stays gray, but the log output from `update-test.send()` shows that `recevier.data` is indeed changed. 

Trying to trace this in my Adit app, it looks like somewhere in the update process the target's schema property gets set by reference to the replacement array object, so the check in `component.updateProperties()` for whether there has been any change in order to trigger update always comes up false.  Thanks for adding the array item comparison, but I still have the assignment by reference issue:

```html
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://rawgit.com/aframevr/aframe/master/dist/aframe-master.js"></script>
    <script>
      AFRAME.registerComponent('update-test', {
        schema: { arr: { default: ['#000', '2', '3'] } },
        init: function() {
          this.target = document.getElementById('dataTarget');
          this.el.sceneEl.addEventListener('loaded', this.send.bind(this));
        },
        send: function() {
          this.target.setAttribute('receiver', {arr: this.data.arr});
          setTimeout(this.sendAgain.bind(this), 1000);
        },
        sendAgain: function() {
          console.log('Receiver data before updating sender data: ',
                      JSON.stringify(this.target.components.receiver.data.arr));
          this.data.arr[0] = '#FFF';
          console.log('Sender data updated: ', JSON.stringify(this.data.arr));
          console.log('Receiver data before calling setAttribute: ',
                      JSON.stringify(this.target.components.receiver.data.arr));
          this.target.setAttribute('receiver', {arr: this.data.arr});
          console.log('Should have seen a third receiver update, receiver data is: ',
                      JSON.stringify(this.target.components.receiver.data.arr));
          console.log('this.data.arr === this.target.components.receiver.data.arr', this.data.arr === this.target.components.receiver.data.arr);
        }
      });
      AFRAME.registerComponent('receiver', {
        schema: { arr: { default: ["#CCC"] } },
        dependencies: ['material'],
        update: function() {
          if(this.data.arr[0]) {
            this.el.setAttribute('material', 'color', this.data.arr[0]);
          }
          console.log('reciever updated', JSON.stringify(this.data.arr));
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <a-box id="dataTarget" receiver position="-1 0.5 -3" rotation="0 45 0" color="#4CC3D9"></a-box>
      <a-sphere update-test position="0 1.25 -5" radius="1.25" color="#EF2D5E"></a-sphere>
      <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
      <a-plane position="0 0 -4" rotation="-90 0 0" width="4" height="4" color="#7BC8A4"></a-plane>
      <a-sky color="#ECECEC"></a-sky>
    </a-scene>
  </body>
</html>
```

After calling `setAttribute`, update-test.data.arr and receiver.data.arr become the same object, so changes to update-test.data.arr appear in receiver.data.arr and the check for a difference between the two (to trigger `update()`) is always false @wmurphyrd that makes sense to me. If you modify the internal representation directly and then try to update via `setAttribute()` without actually updating, it does not make sense to trigger an update. Sorry, @wmurphyrd. Now I realise. You are expecting a copy of the attribute because that is the way regular attributes work. Avoiding memory sharing is delicate since it can incur in performance penalties. @ngokevin @dmarcos @fernandojsg thoughts?  **Description:**

- A-Frame Version: 0.4.0
- Platform/Device: iOS 10.2/Chrome, Safari

Hello,
I would like to hide and show some HTML blocks while toggling A-Frame's VR Mode:

```
// Enter VR Mode and hide some DOMs
// opaicty: 0 is applied by .lightOff
AFRAME.registerComponent('entering-vr', 
{
    schema: 
    {
        type: 'selector'
    },

    init: function () 
    {
        var enterButton = document.querySelector('.a-enter-vr-button');
        enterButton.addEventListener('click', function () 
        {
            document.querySelector('.site-header').classList.add('lightOff');
            document.querySelector('.featuredImage').classList.add('lightOff');
        })
    }
});

// Exit VR Mode and restore visibility
AFRAME.registerComponent('exting-vr', 
{
    schema: 
    {
        type: 'selector'
    },

    init: function () 
    {
        function removeLightOff()
        {
            document.querySelector('.site-header').classList.remove('lightOff');
            document.querySelector('.featuredImage').classList.remove('lightOff');
        }

        // On Clicking [X] Button in Mobile
        var exitButton = document.querySelector('.a-orientation-modal button');
        exitButton.addEventListener( 'click', removeLightOff() );

        // On Exiting Fullscreen in Desktop
        if (document.addEventListener)
        {
            document.addEventListener('webkitfullscreenchange', exitHandler, false);
            document.addEventListener('mozfullscreenchange', exitHandler, false);
            document.addEventListener('fullscreenchange', exitHandler, false);
            document.addEventListener('MSFullscreenChange', exitHandler, false);
        }
        function exitHandler()
        {
            if (document.webkitIsFullScreen || document.mozFullScreen || document.msFullscreenElement !== null)
            {
                removeLightOff();
            }
        }
    }
});
```

It worked pretty well in Desktop browsers. However, it didn't always work in mobile devices. "Sometimes" it added .lightOff to .site-header and .featuredImage. Clicking X button in .a-orientation-modal never removed .lightOff.

How do I make toggling always work in mobile devices?
Thanks!  **Description:**

It's not possible to add components programmatically to elements that are not yet mounted to the DOM. Discovered in ngokevin/aframe-react#52, if attempting to inject an element that contains components into the DOM, the `this.el.sceneEl` property in the component does not yet exist, causing an error in most components.

- A-Frame Version: 0.4.0
- Platform/Device: Chrome OSX
- Reproducible Code Snippet or Demo URL [highly encouraged]:

```js
var el = document.createElement('a-entity');
el.setAttribute('cursor', '');
document.body.appendChild(el);
```

`Uncaught (in promise) TypeError: Cannot read property 'object3D' of null`
 Yes, in the aframe-react bug it is injected within the a-scene entity. Changing the STR to `document.querySelector('a-scene').appendChild(el)` does work in examples I just tried. Maybe it is aframe-react only, but not sure (yet) what in aframe-react could cause this Thanks! seems that the object3D error is related to trying to append the ```cursor``` component -- added the warning but will also open a pull to try to handle the cursor error.  **Description:**
\<a-animation\> doesn't animate on the Vive. When an animation is triggered, the entity teleports to the end location and doesn't animate through.
- A-Frame Version: Master (bleeding edge)
- Platform/Device: HTC Vive
- Reproducible Code Snippet or Demo URL [highly encouraged]:

Suppose we have the following code:
```
<a-entity id="user">
      <a-camera></a-camera>
      <a-entity id="vive-controls-switch">
          <a-entity vive-controls="hand: left"></a-entity>
          <a-entity vive-controls="hand: right" vive-cursor></a-entity>
      </a-entity>
</a-entity>
```
You would expect that when we animate `#user`, the whole bit would animate, like it does on other platforms. However, the animation seems to skip and teleport to the end. What could be causing this?  So I'm trying to simply load a obj model and a material to a basic <a-scene> ... It is a 3d model at the following dimension ( 19.2 MB (20,156,958 bytes)) ... Is it too big for the scene? 

- A-Frame Version:
0.4.0

- Platform/Device:

web

- Reproducible Code Snippet or Demo URL [highly encouraged]:

<html>

<head>

<script src="https://aframe.io/releases/0.4.0/aframe.min.js"></script>

</head>
<body>
<a-scene>
  <a-assets>
    <a-asset-item id="crate-obj" src="model_mesh.obj"></a-asset-item>
    <a-asset-item id="crate-mtl" src="model_mesh.obj.mtl"></a-asset-item>
  </a-assets>
</a-scene>
</body>
</html>

  **Description:**
I'm a développer working currently with Aframe library. 
I have to handle zoom and fov with an Aframe camera. 
My problem is when i use Aframe camera and when i set the zoom, the display aspect is strongly wrong. 
I have see a PR this morning talking about that, this is a bug on camera, because when the developper set the camera aspect it's strongly wrong to take window.heigh and window.width.
It's also wrong when set camera aspect with data.aspect and not registring it on schema because it makes people able to pass variables into data.aspect but with getting a warn. 
My opinion is that data.aspect should be registred in schema and that aspect has to be dynamicly set when embeded.
You can test it, by pull Aframe v0.4.0 and by changing camera fov and zoom. 
I think this should be quickly fixed because it's break some feature like zoom.
 
- A-Frame Version: v0.4.0
- Platform/Device: All Platform
- Reproducible Code Snippet or Demo URL [highly encouraged]:
 This is the PR that i highly recomend to merge: https://github.com/aframevr/aframe/pull/2216 .  Sorry for the long time with no responses. 
Aspect should be on schema as long as you store it with data.aspect: 
- The first reason is because everyone can set aspect by using aspect attribute because you made it accessible, it will just trigger a warn. My opinion is that when you made it accessible, you should made it public, if you dont want to made it accessible you should do not use public variables or methods. 
- The second reason is that it's a good entry point to create effect like speed , fat effects etc....

Aspect Ration should be Always set dynamicly:
- when embeded, because when you are in a embeded mode you can have a viewport that is not reflecting to the real viewport: This made default Aframe Behavior breaking ( Aspect Ratio will not display at the right value )   **Description:**

This PR fixes the coordinates override bug in `coordinates.parse()` that
property value 0 is overridden by defaultVec's when object is given to the method.
Animation pivots/warps examples went wrong because of this bug and this PR fixes them.
 Done  Does AFrame support re-rendering from the DOM? In other words, if the DOM is modified (say with Socket.io), can AFrame be triggered to reload the scene with information taken from the DOM? Thanks very much. You're right -- my mistake. I made an error in the program and that was the reason why the objects weren't showing up. Sorry for the trouble.  Make sure time doesn't go backwards, and that deltas are reasonable.

Experimental versions of Chromium used for WebVR have a known issue
where the requestAnimationFrame timestamp is off by 1000
(microseconds instead of milliseconds)
 This is a more thorough solution to the issue #2207 behind PR #2208  On the one hand, I understand entirely this sentiment.  (Although personally I prefer this one as it makes all A-Frame `tick` handling immune to stupid `requestAnimationFrame` time behavior, not the specific off-by-1000 Chromium bug.)

On the other hand, the experimental builds are the only ones with native Oculus support, are commonly used for both Rift and Vive WebVR development, and are currently susceptible to loss of controller updates...  as it is not an A-Frame bug, I am not sure we want this to break loudly in QA vs. writing a `warn` message to logs and continuing on.  If you prefer to switch `tracked-controls` support to use `throttle` rather than `throttleTick`, rather than introducing workarounds into either `throttleTick` or the core itself, I can make a PR for that, but I don't think we should just leave things broken as-is.  > Firefox Nightly also supports both.

Really?  when I run Nightly, it only supports Oculus via SteamVR, so Touch controllers show up as OpenVR Gamepads and lose many of their unique characteristics...? > If you prefer to switch tracked-controls support to use throttle rather than throttleTick, rather than introducing workarounds into either throttleTick or the core itself, I can make a PR for that, but I don't think we should just leave things broken as-is.

I think we are pretty close to done on #2192, if you prefer I can add the change from `throttleTick` to `throttle` in that PR OK, understood.  I will change `throttleTick` to `throttle` as part of #2192 and close this PR  **Description:**

At camera component update, aspect ration is not managed for embedded scenes: this PR fixes it.

**Changes proposed:**
- handle camera aspect at update => used to be (window.innerWidth / window.innerHeight), now is handled by a scene-like function to get aspect ratio. I just realized I didn't explain why I needed this here: my problem is not on resize, it's when I change zoom or fov (for instance). At this moment there are no resize event and the aspect ratio is still recalculated... currently based on the window size. I wanted to dynamically be able to update camera properties only  By the way, your proposal seems good to me as well, it's just not the same use-case Well, I do not need to reset the aspect ratio at update time, but *someone* probably does or this code wouldn't be here:
```javascript
camera.aspect = data.aspect || (window.innerWidth / window.innerHeight);
```
Actually `data.aspect` suggests it should be possible to set aspect in camera properties, but it's not present into the schema.

So let me sum up the conversation here:

1 - Either the aspect should be into the camera properties
    - It should be into the schema
    - It definitely should be in the `update` method
    Or it shouldn't:
    - No point updating the aspect at all at update time

2 - The calculation of the ratio is currently delegated to the scene: it should move to the camera component and triggered by a `canvasresized` event from `a-scene`

On the first point, I have no use-case on the top of my head, but I usually like to be able to set components properties where they make sense. And someone probably had this in mind or there wouldn't be a `data.aspect` at all. Not my call...

On the second point: either you want to be able to set the `aspect` on the camera component schema, and then it makes sense to handle resize here, either you don't and it's perfectly fine delegating it to `a-scene` as it is now. What do you think ?
 Is this PR still under consideration? Yes, sorry, what I meant was: is @radenui still willing to finish those?

If not, I could fork this PR and apply the missing changes.  **Description:**

This PR updates Three.js to r83.
It passed `npm test` and I confirmed examples keep working.
LMK if there's any other tests I need to check.

#2212

**Changes:**
- Rename `THREE.XHRLoader` with `THREE.FileLoader` in `a-assets`
- Update sound component for `THREE.Audio` which generates `source` when it  starts to play in r83.
  fix typo  **Description:**

This PR fixes the description of `coordinates.parse` doc.  **Description:**

If I'm right, `isCoordinate` test is wrong because
'rejects invalid coordinate' doesn't reject.

This PR fixes this issue.
The root issue was `regex` is missing `^` and `$` and
it has matched four or more space separated numbers.
  **Description:**

This PR fixes the null parse test of coordinates.
`coordinate.parse(null)`  returns `undefined` if `defaultVec` isn't given.

LMK if not test but `coordinate.parse` impl is wrong, 
(I mean, if it should return `null` for null parse)
I'll close this PR end make another PR to fix the impl.
 Done I haven't updated null parse impl in this PR.
I'm gonna file another issue for it and discuss the specification there.
  **Description:** Since there is a method AFRAME.utils.device.checkHasPositionalTracking() then the next step would be to check if 6 degrees of freedom controllers are available and if so, use them.

- A-Frame Version: any
- Platform/Device: PC not sure whether it is currently possible to distinguish 3DOF from 6DOF in gamepad API, as I don't have Daydream?  also due to security concerns, gamepad API does not allow enumeration until controllers are used.  There may be a way to do something like this with tracked-controls utils function isControllerPresent working on a virtual gallery for my mom (shh it's a surprise...)

I am not trusting `gamepadconnected` to work (maybe it will consistently at some point) 
and have an example using `AFRAME.utils.trackedControls.isControllerPresent(this.el.sceneEl, undefined, {})` which needed a scene reference to get at systems 

(and if you use `gearvr-controls`, then `|| AFRAME.utils.gearVRControls.isControllerPresent()` which doesn't need a scene reference)  **Description:**
Unlike normal entities, primitives do not have this.el.sceneEl

- A-Frame Version: 0.4.0
- Platform/Device: Windows Chrome browser
- Reproducible Code Snippet or Demo URL [highly encouraged]:

compare <a-plane src="..."> to <a-entity material="src:..."> in debugger; missing sceneEl causes texture load failure for example IIRC, this was trying to use a-text primitive... ... although I may be wrong, definitely something I tried using in the holiday gallery I put together looks like someone in Slack questions channel is having similar issue with `a-sky`, maybe that was it...  add bmfont-text component and a-text primitive to core from https://github.com/chenzlabs/aframe-bmfont-component yep, makes sense, the PR to @fernandojsg 's version is mine and incorporated here I have merged the output from @fernandojsg component PR review into this PR. IMO, it's better to work issues here where we don't necessarily have to concern ourselves with compatibility with prior uses of the actual component.

Sidebar, it is a nuisance that you can't use the same source between standalone and proposed core... which would make this sort of thing much easier if working components could literally be pulled into core > @machenmusik What does it mean working components?

when you're developing a component, you typically start with it being standalone, and only later does it potentially merit proposal for inclusion into core.  when such proposals are done, it is a shame that there is a bunch of manual editing required to go from standalone component to core PR... e.g. rename component index.js to component.js, relative require statements as opposed to global AFRAME, to THREE or not to THREE :-), component boilerplate doesn't understand docs or tests, etc. squashed the PR edits here.
what else is needed? i made a crude attempt to cache fnt/png requests in a separate branch, is it better to get baseline in then do later, or try to do all at once? could use some more eyes on the new custom shader (avoid horrible aliasing when text gets too small) would `text` be too prone to namespace collisions? Could definitely use help on tests, another case of inheriting something with none... and often visual verification is important... if `text` won't cause collision issues great.  it does have a property called text though, so that might be a little strange.  did you want me to change the component name, or were you going to take care of that? gonna be a few hours at minimum on my end, if you have the cycles go ahead if you folks have better suggestions than using gl_FragCoord.w as a guess of when to drop the alpha test (which makes the distant appearance even worse) and blend, let me know.  there are still some cases like extreme off-axis viewing that the custom shader doesn't do much for... so I changed the name to `text`, and switched aframe-arcade over to it, if you'd like to have a look / test drive remember the concern about namespace collisions?
```aframe-master.js:71618 The primitive a-text has a mapping collision. The attribute text has the same name as a registered component and has been renamed to text-text```
so renaming in the primitive at least...
 already did `<a-text value="hi there">` so we are good there, question is whether to change for `text` as well to make it consistent `text.value` is in there.  we have candidate docs now, functionality LGTM at the moment, any headway on tests?  not sure if there were any from prior incarnations to leverage re: other implementations - yeah that would probably be useful, although it could probably use a broader perspective if someone has tried them all re: moving promise caching to FileLoader - one danger there is loss of granularity (e.g.caching small things like fonts but not always large things like videos that are being progressively streamed) - aframe texture promise cache is separate from this font promise cache, etc. awesome!  thanks to everyone for sticking with it! 

maybe we should add showing "Hello World!" to the A-Frame hello world example...  texture variables with is:'uniform' and type:'map' now work with default init and update handlers

so now you can just do things like this:
```
    AFRAME.registerShader('offset-repeat', {
        schema: {
            // the texture source (probably a video)
            src: {type: 'map', is: 'uniform'},
            // texture parameters
            offset: {type: 'vec2', default: {x: 0, y: 0}, is: 'uniform'},
            repeat: {type: 'vec2', default: {x: 1, y: 1}, is: 'uniform'}
        },

        vertexShader: [
          'varying vec2 vUV;',
          'void main(void) {',
          '  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
          '  vUV = uv;',
          '}'
        ].join('\n'),

        fragmentShader: [
          'uniform sampler2D map;',
          'uniform vec2 offset;',
          'uniform vec2 repeat;',
          'varying vec2 vUV;',
          'void main() {',
          '  gl_FragColor = texture2D(map, vec2(vUV.x / repeat.x + offset.x, vUV.y / repeat.y + offset.y));',
          '}'
        ].join('\n')
    });
``` The existing Shader.prototype, with these changes, will handle some of the annoying grunt work of updating values for attributes and uniforms, but will let you do it yourself if you leave out e. g. `is:'uniform'`

IMO this PR has a lot of benefit for those 99.99% of us that are not hardcore shader people (e.g. I don't need any custom stuff anymore for the various shaders I did now that there is basic texture support)

Nothing stops someone from doing their own more direct ShaderMaterial usage with this merged... so for more advanced users, they can always go ahead and do as suggested in #2047, and if they are using values with supported types, they can use the convenience mappings.
 #2047 may simply be an example of how to use more directly, maybe the ones mentioned in Slack, and zero code change  for the simple shaders I am using, it's actually quite convenient.
e.g. here is the previous trivial example, which contains a lot of useless busywork
```
    // this shader uses offset and repeat
    AFRAME.registerShader('offset-repeat', {
        schema: {
            // the texture source (probably a video)
            src: {type: 'map'},
            // texture parameters
            offset: {type: 'vec2', default: {x: 0, y: 0}},
            repeat: {type: 'vec2', default: {x: 1, y: 1}}
        },

        uniforms: {
            // the texture value (once the texture source is loaded, update)
            map: { type: 't', value: null },
            // texture parameters
            offset: {type: 'vec2', value: {x: 0, y: 0}},
            repeat: {type: 'vec2', value: {x: 1, y: 1}}
        },

        init: function(data) {
            this.material = new THREE.ShaderMaterial({
                uniforms: this.uniforms,
                vertexShader: this.vertexShader,
                fragmentShader: this.fragmentShader
            });
        },

        update: function (data) {
            AFRAME.utils.material.updateMap(this, data);
            this.uniforms.map.value = this.material.map;
            this.uniforms.offset.value = data.offset;
            this.uniforms.repeat.value = data.repeat;
        },

        vertexShader: [
          'varying vec2 vUV;',
          'void main(void) {',
          '  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
          '  vUV = uv;',
          '}'
        ].join('\n'),

        fragmentShader: [
          'uniform sampler2D map;',
          'uniform vec2 offset;',
          'uniform vec2 repeat;',
          'varying vec2 vUV;',
          'void main() {',
          '  gl_FragColor = texture2D(map, vec2(vUV.x / repeat.x + offset.x, vUV.y / repeat.y + offset.y));',
          '}'
        ].join('\n')
    });
```
and here it is after the PR changes, which is what I expected:
```
    // this shader uses offset and repeat
    AFRAME.registerShader('offset-repeat', {
        schema: {
            // the texture source (probably a video)
            src: {type: 'map', is: 'uniform'},
            // texture parameters
            offset: {type: 'vec2', default: {x: 0, y: 0}, is: 'uniform'},
            repeat: {type: 'vec2', default: {x: 1, y: 1}, is: 'uniform'}
        },

        vertexShader: [
          'varying vec2 vUV;',
          'void main(void) {',
          '  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
          '  vUV = uv;',
          '}'
        ].join('\n'),

        fragmentShader: [
          'uniform sampler2D map;',
          'uniform vec2 offset;',
          'uniform vec2 repeat;',
          'varying vec2 vUV;',
          'void main() {',
          '  gl_FragColor = texture2D(map, vec2(vUV.x / repeat.x + offset.x, vUV.y / repeat.y + offset.y));',
          '}'
        ].join('\n')
    });
```

 utils / boilerplate functions already exist - they are used internally by the default init and update functions
(I don't know why attributes is commented out, nor whether it is safe to uncomment)
```
  init: function (data) {
    this.attributes = this.initVariables(data, 'attribute');
    this.uniforms = this.initVariables(data, 'uniform');
    this.material = new THREE.ShaderMaterial({
      // attributes: this.attributes,
      uniforms: this.uniforms,
      vertexShader: this.vertexShader,
      fragmentShader: this.fragmentShader
    });
    return this.material;
  },
```
and
```
  update: function (data) {
    this.updateVariables(data, 'attribute');
    this.updateVariables(data, 'uniform');
  },
```
I don't really see a need to remove them, or to further augment them beyond this PR.

The utils handling in this PR to expose the pre-existing texture support for custom shaders is *extremely* useful.

#2047 is probably a simple example of doing those and additionally manipulating your own variables (I don't have anything that needs it, but I think @donmccurdy found one) - zero code change.
 I don't think that having either what is there now, or this PR, would imply or require full support for all THREE types.  There is a clear pattern to follow if others want to add support for other types (including cubemaps, now that the texture handling is figured out for them and all that is needed is the right entries in the property type mapping table) without this PR it is rather tricky to figure out what is going on with the texture mapping (including the oddball cases where the vestiges of the whole src-or-element issue decide they will try and make a copy of your video and you start hearing double) without this PR, the `map` property type doesn't work correctly ;-)

yeah, clearly it is down to
> more code/API to maintain versus the benefit

I agree with @dmarcos that the surface area of the API is not likely to change radically;
the benefit is being able to do many common custom shaders easily, so IMO it's worth it.

re: #2047 -- 
the example you posed is non-functional and lacks how you would propose literally any parameters be populated or properly conveyed to the shader.
```
AFRAME.registerShader('myshader', {  // or registerMaterial to map to three.js API
  schema: {},

  init: function () {
    this.material = new ShaderMaterial({
      // ...
    });
  }
});
```

If you are going to leave that as an exercise to the reader, that seems a large step backwards from either what is there now or this PR.  

As things stand right now without this PR, the necessary utility functions are not usable for other purposes besides the built-in `flat` and `standard` shaders that expect `data.src` to become `material.map`

With this PR, that API can easily do simple shaders for common needs ("e.g. how do I offset a texture") as well as less common needs such as 2D image / video manipulation.  The latter especially is of significant benefit. OK so we are leaving this open for now pending more property types / ShaderMaterial properties?  if so, would be good to have a list here for review later re: #2032 -- can the schema code handle properties that are objects/maps (to hold texture parameters) ? OK so the codecov thing now is saying
 81.53% (Diff 100%) ... hampered by, as I understand it, a general lack of tests at all in this area prior to this PR as well?  same thing I ran into with vive-controls earlier.  if there are some minimal criteria (like the semistandard checking) it would be good to add them earlier in the pipeline, it's not entirely reasonable to enforce different standards on external submissions Did some tests, code coverage looks good now.  OK to merge and open issue for remaining property types? @dmarcos let me know if anything else is needed here thanks!
 does this solve #2159  **Description:**

- A-Frame Version: 0.4
- Platform/Device: Windows
- Reproducible Code Snippet or Demo URL [highly encouraged]: http://codepen.io/alexcheninfo/pen/YpgjQX

If you use `embedded` and  `vr-mode-ui="enabled: false"` simultaneously, you get: 

`aframe.min.js:103Uncaught (in promise) TypeError: Cannot read property 'classList' of null(…)`
 @ngokevin Got it. Thanks.
  For distortion map properties such as `displacementScale`, `displacementBias` and `normalScale`
 This affects docs back to v0.3.1 I believe  Fixes https://github.com/aframevr/aframe/issues/2190 @dmarcos @ngokevin looks like 0.4.0 model syntax changed and broke prior `vive-controls` model usage; for those that were using its built-in model, this is an important fix  **Description:**

It should be possible to use A-Frame embedded without the VR mode UI enabled. After all, embedding often means a heavily customized solution including custom UI to enter and leave VR.

**Changes proposed:**

- Only add and remove `embedded` class from Enter VR element if it exists in the DOM
- Added test for `embedded` component, which tests the component's ability to work both when the `vr-mode-ui` component is enabled and disabled.  Per discussion on #2183, `gearvr-controls` will not be included in core, but will be available as a separate component.  These changes are needed for `hand-controls` to be compatible with `gearvr-controls` and other separate controller components. The separate `gear-controls` component is now available at https://github.com/chenzlabs/gearvr-controls

Once this PR is merged, I can change the aframe reference in package.json back to mainline. > Can you remind me again why are these changes necessaries to incorporate the gear-vr touchpad?

Most of the changes are to properly isolate Oculus Touch specific behaviors to isOculusTouch rather than !isVive (which works when there are only those two, but will fail immediately with successive controllers)
 ok, added:
`// return true so handleButton knows something changed` (squashed commits a bit for convenience) @dmarcos good to merge now? Something strange is happening with the `hand-controls` tests when I try to remove `process.nextTick` from a few places...  runs fine locally with `npm run test:chrome` but then gets failures... will need to revert that  thx - apparently it takes longer than next tick for the entity to load in setup then... aargh something went wrong in rebase... looking at it now @dmarcos OK now @dmarcos ok reconstituted lost jsdoc edit  update to use new hand animations from arturitu via rawgit
TODO: update to aframe CDN URLs once published
TODO: unused poses
 may want to do #2192 first to avoid spurious conflicts, as it uses the hand animation names that are then updated as part of this one rebased but not yet double-checked.  still recommend new CDN URLs to avoid breaking npm builds that already pulled down old code... ran this last night looked ok on Touch... I am guessing this one may be waiting for point release tested working with latest experimental Chromium and Oculus Touch;
using Nightly plus Vive, gamepad id has changed from `OpenVR Gamepad` to `OpenVR Controller` latest version confirmed working with `examples/showcase/tracked-controls` in VR on:

latest Nightly 54.0a1 (2017-02-08), latest SteamVR 1485823399 , OpenVR API 1.02 DLL, Vive controllers
`OpenVR Controller` x2 (when in concert with https://github.com/aframevr/aframe/pull/2370)

latest experimental Chromium 56.0.2910.0, Oculus 1.11.0.335615 (1.11.0.335772), Rift and Touch controllers

older experimental Chromium 56.0.2900.0, older SteamVR vrserver.exe 1481163074, Vive controllers
`OpenVR Gamepad` x2
(see https://github.com/toji/chrome-webvr-issues/issues/135#issuecomment-278556238 for details) separating the old-and-new Vive support into
https://github.com/aframevr/aframe/pull/2370  In current chromium the vive controls do not get tracked anymore using the `vive-controls` component:
They are rendered at their correct position at pageload (!), but do not move.

- There is no error in the console.
- It works in Firefox with *WebVR Plus* extension.
- The controls did work for me with aframe 0.3.2.

Did not test whether this also occurs with the `tracked-controllers` component..

- A-Frame Version: `0.4.0`
- Platform/Device: HTC Vive, chromium 53
- [codepen](https://codepen.io/anon/pen/PbVdbB)
 a few comments...
- I thought, although I could be wrong, that chromium 53 is too old for webvr etc. ?
- I suspect that the issue may be due to this: because of the multiple controller support, each of the individual components (`oculus-touch-controls` and `vive-controls`) do not inject a default `tracked-controls` instance automatically i.e. do not have `dependencies: ['tracked-controls']` -- as well as a change to default `tracked-controls` values not to auto-select the first OpenVR Gamepad which was causing difficulties with Oculus Touch integration.
- now that the default `tracked-controls` instance does not auto-match first Vive wand, it may be safe to reintroduce the `tracked-controls` dependency, but I am not certain that will solve the issue.
- the new Gear VR Touchpad PR does inject a default `tracked-controls` instance on right hand, perhaps @noerw can try using https://rawgit.com/chenzlabs/aframe/f895024d88a41926c2337a5235b77b5be04f76ef/dist/aframe-master.js to see if that makes the right hand work?  or to add `tracked-controls` with no parameters to each hand? @dmarcos @noerw i was unable to reproduce this, however I note that this is precisely the behavior that occurred when the `hand-controls` models were changed this morning without https://github.com/aframevr/aframe/pull/2188 ... the missing animations caused errors, and position was apparently not being updated. I see that PR is closed, maybe we do actually want it after all... I tested again, and can still reproduce it.
@machenmusik Your proposed `tracked-controls` fixes did not work.

However, I told you some wrong facts yesterday:
- running chromium 56.0.2902 x64
- the following appears in the console twice. In Firefox directly on pageload, in Chromium once i enter VR mode:
```
components:obj-model:warn Material component properties are ignored when a .MTL is provided (aframe.js:327:8)

THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead (aframe.js:49259:3)
```

ps: can't reopen the issue.

**edit**: I doubt that its about the model, as it works with aframe 0.3.2, which references the same model (?).
Can you propose some commits which I can test against, since the bug has been introduced between 0.3.2 and 0.4.0? sorry, model for hand-controls changed, i don't think vive-controls did

where is the chromium build you use coming from?  i use tojiro's from webvr.info with your codepen, if I add debug to the scene
```
<a-scene debug antialias="true">
  <a-entity vive-controls="hand: left"></a-entity>
  <a-entity vive-controls="hand: right"></a-entity>
</a-scene>
```
and inspect the a-frame view, it is clear to see that the controls are definitely getting position and rotation updates... 

but I think the url(...) syntax may have been deprecated in 0.4.0 and thus no model.... let me confirm  @dmarcos can you get #2194 into mainline?

@noerw can you confirm that this one works: 
https://rawgit.com/chenzlabs/aframe/5feeec6f625013e3381a397ea0433efb0b4c4352/dist/aframe-master.js see #2207  yeah, the version you linked works, as well as current master, thanks!
sorry for the late reply  implement https://github.com/aframevr/aframe/issues/2136 so... `tick` has a specific signature `function (time, delta)` which is why calling this `throttleTick` makes sense, it won't work generically for functions that don't have compatible signatures or calling patterns. if one of you would like to make a quick mod to this that does not use the time values passed by `tick` but generically calls `Date.now()` itself, that may make more sense as a generic throttle... > If you debounce the tick and later change the component you might end up with a strange behaviour and then remember / rediscover that tick was being debounced

if you replace tick with function, still generically true.  not sure why you are specifically concerned with tick here

> In this case updateControllerList should be the pne debouced and documented on the method

IMO no, that may be called from other places that should not be throttled


 > updateControllerList: utils.throttle(function updateControllerList() { ... }, 100);

you are assuming, incorrectly, that the only caller to this function is the tick handler.  Consider that other callers may be extremely confused to find that their immediate call attempt (e.g. due to onGamepadConnected / Disconnected) is not made... the throttling should be confined to the intended surface, which is to say the periodic check should happen no more often than X.

BTW, if you only update every 100ms, then your controller pose and state is only updated every 100ms, which is not acceptable from a user standpoint. ticks in general are not throttled by this, just this specific tick handler, which seems appropriate.  per your objection above, in systems tracked-controls I call the throttled handler throttledTick so it is obvious when debugging. @ngokevin agree but original request was for common case of throttling all periodic handling for a tick handler, using the time passed in to avoid superfluous calls to get redundant time values, which is what the PR addresses. (I have some slight concern that generic throttle will be abused and it will be difficult to understand why calls aren't being made when debugging.) I kinda like @ngokevin 's thought, but then it is annoying to not be able to see what throttledUpdateControllerList does.  Maybe this is more clear / readable (if it would work)...
```
throttledUpdateControllersList: throttle(function () { this.updateControllersList(); }, 10, this),

tick: function () {
  this.throttledUpdateControllersList();
}
```
But I am not sure that `this` would resolve correctly here.

Note that this is only more clear when there is a bunch of other stuff being done in the function, rather than just a method call.  I agree that @dmarcos that convention may eliminate the need @ngokevin agree, I left throttleTick in there and made a throttle as well.

case in point, the tick handler has to update and emit, so you have to make a throttledTick function that does exactly what is there anyway, and at that point you may as well use the more efficient form that gets time passed in. This code looks good to me.

You may want to use a window.performance.now polyfill for more accurate timestamps. We wrote [a polyfill](https://github.com/tweenjs/tween.js/blob/master/src/Tween.js#L72) for window.performance.now in tween.js.

Also, this could be useful for users of tween.js. I might borrow the code and include it in tween.js as a utility. @mikebolt thanks, agree - @ngokevin is there a standard way to do in aframe?

should this throttle be published as a (tiny) separate npm module that aframe picks up,
to make it easier to reuse in TWEEN.js etc. ?  a recent change to hand-controls models exposed a weakness when animations are missing;
this PR makes hand-controls defensive i.e. the missing animations won't play, but won't break other things the problem is that animations were breaking more than just themselves, really model errors should not prevent eventing and pose updates  i like this idea. i even got an implementation of this. ok it is 2y old and in pure three.js. but it shows how simple the implementation can be.

https://github.com/jeromeetienne/threex.loop/blob/master/threex.loop.js#L114  **Description:**

- A-Frame Version: 0.4.0
- Platform/Device: Firefox 50.0.2 / Fedora 24
- The `console.log('A-Frame Version:', pkg.version);` in line 64967 of aframe reports version 0.3.2

How to reproduce:

- `npm install aframe`
-  include `<script src="./node_modules/aframe/dist/aframe.min.js"></script>` in your body or head.
- open site in browser and open the console


  The `gearvr-controls` component interfaces with the "Gear VR Touchpad"
controller exposed by the Carmel and Samsung Internet VR browsers.  
As that controller has no pose,
the `tracked-controls` component cannot provide its usual
functionality (but an instance is added anyway since other components such 
as `aframe-teleport-controls` use that to find controller entities).  Instead,
the `look-controls` component is added to mimic a 3DOF controller using HMD orientation,
similar to gaze-based cursors.

This component adds button mappings and events, but does not currently provide
a controller model since it is assumed that end users will use this indirectly
through higher level components such as the hand-controls component.  

When used via `hand-controls`, as there is only one "Gear VR Touchpad",  
currently this component will only bind to the right hand, not the left. >The application should detect if there are tracked controllers and if not used an alternative interaction method (e.g: gazed based cursor) that better adapts to the capabilities of the device

Yes, this gets back to some of the original conversation on #2124 and #2132.

These changes allow applications to do that easily by using `hand-controls='right'`, rather than having to explicitly include all of `oculus-touch-controls`, `vive-controls` and `carmel-gearvr-controls` and handle them separately which is tedious and scales poorly (what are they supposed to do with Daydream then)?

And rather than having a well-known component responsible for figuring out which controllers are attached and only injecting the right one(s) -- that was `auto-detect-controllers` -- since you guys specifically rejected that approach in core previously, but then we still have higher level like `hand-controls` in core so people can use "out of the box" rather than having to go hunt everything down in the registry. > I have no idea how you're supposed to control your hands with 2 axis. I feel that the touchpad is more appropriate to be paired with a gazed based cursor. 

@dmarcos I just realized, you may not have understood from the description that this is basically what the PR does -- modified the description to make it more obvious that for Carmel GearVR, it is `look-controls` and HMD orientation that is used for controller pose, not the 2D position from the touchpad. IMO, there's no particularly good reason why `hand-controls` needs to be exclusive.  For zero-DOF controllers like GearVR, the hand position and pose can be emulated from player position and HMD (gaze), and the hand model as visual representation and pointing animation can still be retained.  For 3DOF like Daydream, the hand position can be emulated from player position, and the actual controller orientation can be used.

As previously discussed, I think most of this comes up because `hand-controls` is in core and serves as showcase example as well.  If you'd like a switch to enable/disable emulation, that makes sense to me...

ugh, but I forgot that the hand-controls schema has nowhere to put a switch at present :-/ So as things stand there are no examples of what to do with A-Frame on GearVR (and Daydream),  I agree with your statement that the tracked-controls example really calls out for Touch and/or Vive controllers, but I think https://chenzlabs.github.io/aframe-teleport-controls/mesh/ shows that the hand-controls component can still be useful in other situations.  It sounds as though you are asking those looking to support the most numerous VR platforms by far to go outside A-Frame, rather than also having examples of how to use non-tracked controllers as part of A-Frame. Maybe all that needs to change here to accommodate your perspective is that `hand-controls` should not inject `gearvr-controls` -- but this code should still exist in core; if one wants to allow GearVR emulated hand control, then simply do `<a-entity hand-controls="right" gearvr-controls>` (or left) -- and if not, `gearvr-controls` is available to be leveraged directly.  

If you agree, I will happily make that simple change right now the mouse/touchpad emulation is activated for GearVR when using Samsung Internet VR browser, and there is specific hackery to leverage the Carmel gamepad mapping.  The first could be made more generic like the auto-enter discussion, but the second probably shouldn't be.  are you suggesting splitting those into two components? OK, but even with `gearvr-controls` moved out of core, the other small changes (e.g. use !isOculusTouch rather than isVive) are needed for compatibility.  I will close this one, and make a separate PR for the compatibility changes without the GearVR controls. (the `gamepad-controls` comment is interesting though, as it makes the case to include emulated tracking in core to accompany them, for responsive controls more generically supported)  **Description:**
When adding a "a-obj-model" element to the DOM during runtime, the position attribute does not appear to be respected and the resulting model is placed at 0 0 0 instead of the specified position value.

- A-Frame Version: 0.4.0
- Platform/Device: PC / Vive
- Reproducible Code Snippet or Demo URL [highly encouraged]:

This is a snippet from my code (which uses jquery, not tested with vanilla js), note the workaround at the end and the comments. All attributes passed to the appendObject function are strings.

```
       function appendObject(id, file, scale, position, rotation, scale) {
         console.log(position);
         $('<a-obj-model />', {
           id: id,
           class: 'city object children',
           position: position,  // doesn't seem to do anything
           scale: scale,
           rotation: rotation,
           scale: scale,
           file: file,
           src: '#' + file + '-obj',
           mtl: '#' + file + '-mtl',
           appendTo : $('#city')
         });
        document.getElementById(id).setAttribute("position", position); // this does set position 
       }
  `AFRAME.utils.coordinates.stringify` will produces scientific notation for values near zero. If this ends up in a `y` component of the `to` for a `position` animation, the object will vanish with the console error:

>THREE.Color: Unknown color -0.5 1e-11 -1

The values in the error are the stringified position coordinates. 

The animation works normally if this number notation appears in `x` or `z` but not `y`

- A-Frame Version: 0.3.2, 0.3.0
- Platform/Device: Chromium WebVR 55; Chrome 55
- Reproducible Code Snippet or Demo URL: http://codepen.io/anon/pen/pNQqOR (watch the box)

I saw when searching to see if this had been reported already that `<a-animation>` may be on a deprecation path, so this issue may not be worth addressing
 Here's the problem:

https://github.com/aframevr/aframe/blob/master/src/core/a-animation.js#L378

https://github.com/aframevr/aframe/blob/master/src/utils/coordinates.js#L4

https://github.com/aframevr/aframe/blob/master/src/core/a-animation.js#L382
  **Description:**
the git clone url `git clone git@github.com:aframevr/aframe.git` have an issue []( https://github.com/aframevr/aframe/issues/2178l) also `git clone https://github.com/aframevr/aframe.git` this one working fine

change " git clone git@github.com:aframevr/aframe.git" to "git clone https://github.com/aframevr/aframe.git" @dmarcos 
 [here](https://github.com/aframevr/aframe/issues/2178)

Permission denied (publickey). fatal: Could not read from remote repository.
while am trying to Local Installation and Development via
`git clone git@github.com:aframevr/aframe.git`
but stuck here
```
Cloning into 'aframe'...
Permission denied (publickey).
fatal: Could not read from remote repository.
```
[](https://github.com/aframevr/aframe/issues/2178) @dmarcos i think` git clone https://github.com/aframevr/aframe.git` this one is more simple to use . if someone did't setup the key and he will stuck there ,especially newbies like me   while am trying to Local Installation and Development via 
`git clone git@github.com:aframevr/aframe.git` 
but stuck here 
```
Cloning into 'aframe'...
Permission denied (publickey).
fatal: Could not read from remote repository.
``
OS :- windows 10 


 thanks @donmccurdy , now working fine   If it does supports Adaptive streaming then Can you please provide adaptive streaming supported videos for testing? latest master needs #2129 As long as media source extensions are supported it is possible to build a component that could support adaptive streaming. I would not suggest this be part of A-Frame core. So the answer would be no, A-Frame video elements do not support adaptive bitrate streaming out of the box but it would be possible for a third-party component to provide that functionality.  Hi,
I want to build an APK using cordova, were i'm using the A-frame videosphere asset. I know that Chrome doesn't support A-Frame videospheres completely for now, but I hoped that it would be working with an APK. 
But there is my problem : I can hear the sound of my video running but i can only see a white screen displayed on my mobile when i start the APK. Clicking, reloading, moving around, nothing closes this screen...
Maybe Android does not support A-Frame videospheres too ?
If you could bring me more information about my problem, it would be great :)
Thank you ! Hi @Charton100774 , sorry to up this post but I encountered the same problem using cordova and I can't find solution on stackoverflow or web in general :/ 
So I would want know if you have the answer or if you have open a stackoverflow issue that I missed ?  After trying to implement continuous and dynamic animation, I've come so solution via TWEEN:

```
AFRAME.registerComponent('camera-seeker', {
    	init() {

    		let el = this.el;
			this.CAMERA = document.querySelector('#player');
    		this.newCords = {};
    		this.seekAnim = new AFRAME.TWEEN.Tween(this.el.getAttribute('rotation'))
    			.easing(AFRAME.TWEEN.Easing.Linear.None)
    			.onUpdate(function () {
    				el.setAttribute('rotation', { x: this.x, y: this.y, z: this.z });
    			});
    	},
    	tick () {
    		this.seekAnim.to(this.CAMERA.getAttribute('rotation'), 5000).start();
    	}
    });
```

I've tested example from TWEEN github: 

```
    init() {

    		var coords = { x: 0, y: 0 };
			var tween = new TWEEN.Tween(coords)
			    .to({ x: 100, y: 100 }, 1000)
			    .onUpdate(function() {
			        console.log(this.x, this.y);
			    })
			    .start();

	    	requestAnimationFrame(animate);

			function animate(time) {
			    requestAnimationFrame(animate);
			    TWEEN.update(time);
			}
    }
```
Everything looks more less in Chrome, but in Nightly, duration seems to be awkward:
![ezgif com-video-to-gif](https://cloud.githubusercontent.com/assets/5468045/21119988/c4dfa030-c0cd-11e6-8f9c-c88915e42e4d.gif)
![ezgif com-video-to-gif 1](https://cloud.githubusercontent.com/assets/5468045/21120040/043b54cc-c0ce-11e6-9c7a-a091d719410e.gif)

For some reason TWEEN skipping animation framerate and any animation via TWEEN executes regardless duration set.

**Working perfectly without AFRAME, only TWEEN appended in header:**
![ezgif com-video-to-gif 2](https://cloud.githubusercontent.com/assets/5468045/21120314/529eb5c2-c0cf-11e6-82a9-07346b342e31.gif)

In all examples I've build a-frame with both older and latest versions of tween.

- A-Frame Version: 0.4.0
- Platform/Device: Windows 10, Nightly 53.0a1 (2016-12-12) (64-bit) I suspect the issue is related to the errors that appear in Firefox but not in Chromium. requestAnimationFrame isn't guaranteed to be called 60 times per second. It looks like some computationally expensive code (resizing a texture) had a higher priority than requestAnimationFrame. Try delaying the code by a second or two and see if that fixes the problem. 

I also strongly recommend resizing the texture yourself, so that it doesn't slow down the client in the future.  **Description:**

Hello,

Currently on a mobile device I can only enter in the VR mode. I can't enter on the classic regular fullscreen mode, which is disturbing because I would like to hide the address bar like in desktop fullscreen option. Why don't we have both icons like in Google's VR script?

https://storage.googleapis.com/vrview/index.html?image=https://i.imgur.com/lOKJwUy.jpg

I have tried the hack `window.scrollTo(0,1);` with no luck.

It seems to be relative to #1060 but I did not found how to do it.

- A-Frame Version: latest
- Platform/Device: Android device
- Reproducible Code Snippet or Demo URL [highly encouraged]: https://aframe.io/examples/showcase/sky/
 Thanks!  **Description:**
Event names for vive-controls had wrong description

**Changes proposed:**
- Switch trackpad and trigger event names to match correct description  As I understood, one-way event handling between two components should look like:
```
//component A
document.querySelector('#componentB').emit('custom', {}, false);

//componentB
this.el.addEventListener('custom', function (event) {
  //event is new some native event
})
```

Confusion for me is ```event``` parameter. As I saw, it should actually respond with ```{name, data}``` but received object with bunch of private data.

What is the way to properly handle event between components? 

- A-Frame Version: 0.4.0
 Probably I've become too comfort with event system with same input-output. As input to trigger is ```{ name, data }```, output suggested would be ```{ event, data }``` where event containing own properties and data is link to event.data. Anyway thanks for great framework.  both with an initial attempt (which may fail, but works on Carmel)
and also on vrdisplayactivate (e.g. when you put the HMD on with Chromium) am investigating how to correctly add this functionality to all scenees by default, so examples using aframe will just work with Carmel and other browsers that allow entering VR without user action and don't emit vrdisplayactivate; for now, you can use this and just say `a-scene auto-enter-vr` hmm OK, a component version is currently in a PR to a-painter; pointers to add to registry would be helpful.  The original idea was to detect Carmel and auto-enter VR so that A-Frame sites would work unmodified, which would presumably belong as a PR here, in which case it should not be an external component, correct?  Will modify this PR to be scoped to Carmel only since it has no other way to enter VR... OK so... according to Justin, the Carmel UA is indistinguishable at the moment, and the gamepad 'Gear VR' doesn't appear to be available (probably the general issue where gamepads aren't enumerable until first used, for security purposes) -- so the way to have it auto-enter VR for Carmel is to have it auto-enter in general.

To add to all scenes by default, so A-Frame scenes just work with Carmel, I added `auto-enter-vr` last in the list of default scene components (rather than first, which didn't work).

I thought that the `enter-vr-ui` component was about showing the button that lets you enter / exit VR, not actually doing it, so that was related but separate UI functionality.  At present, with both enabled, an A-Frame scene will auto-enter VR< and if/when you exit, you will see the normal button to allow re-entry.  **Description:**
When removing the src-Attribute of the material-component or when removing the entire material component from an entity, the texture remains in memory.

This causes memory leaks (especially on mobile) when dealing with a lot and/or large textures. THREE.js will remove a texture from memory when "dispose()" is called on it.

Like this:
this.el.object3DMap.mesh.material.map.dispose();

Example:

http://lab.immersiveweb.ch/aframe/

Click on the left box: Removes Material (Texture count in stats remains the same)
Click on the right box: Disposes Texture and then removes Material (Texture count in stats drops)


Should we consider adding this behaviour into the Material-Component?

- A-Frame Version: 0.3.2
- Platform/Device: All
- Reproducible Code Snippet or Demo URL [highly encouraged]: http://lab.immersiveweb.ch/aframe/
 @ngokevin Can you please post a step by step guide how to fix this problem? I can't quite follow your above answer. Thanks @donmccurdy  Thanks but why on npm is still the old 0.5 version?
https://www.npmjs.com/package/aframe  Can confirm, the primitive `models` example throws the same error for me.

It seems to the stem from the `a-obj-model` primitive - removing it allows the scene to render without error.
Also changing the `a-obj-model` primitive to a component like so seems to allow the crate model to render normally.:

```diff
diff --git a/examples/primitives/models/index.html b/examples/primitives/models/index.html
index 5559ae2..6cd9939 100644
--- a/examples/primitives/models/index.html
+++ b/examples/primitives/models/index.html
@@ -20,7 +20,7 @@
        <a-camera></a-camera>
       </a-entity>

-      <a-obj-model src="#crate-obj" mtl="#crate-mtl"></a-obj-model>
+      <a-entity obj-model="obj: #crate-obj; mtl: #crate-mtl"></a-entity>

       <a-collada-model src="#tree1" position="1 0 -1" rotation="0 30 0"
                        scale="1.4 1.4 1.4"></a-collada-model>
```
  **Description:**
make stats an entity injected into camera so they are visible in and out of VR

**Changes proposed:**
src/components/scene/stats.js to the extent that the current stats component is useful, this should be a nice improvement;
not sure what is going on with the failed check though, advice welcome (@ngokevin are there any issues, or has no one had a chance to look at it yet?) In the meantime, this is available as `stats-in-vr` component in registry, if we want to include in core, should probably pull in latest changes Agree this can live as a 3rd party component, and that the original PR is stale now... although really something should be done to the built-in stats to make them not entirely useless in VR.  Fixes #2160
  **Description:**
Right now there is no way to register a src to be loaded as a texture to be sampled by a custom shader.

Something like this or any variation would be nice:

```
    diffusetex: { type: 'src', is: 'uniform' }
    normalmap: { type: 'src', is: 'uniform' }
```

- A-Frame Version: 0.4.0
- Platform/Device: any

This might be also related to #2147  yes, or you can replace the default init/update handling and handle uniforms yourself.  will see if i can post an example ```
    // this shader uses offset and repeat

    AFRAME.registerShader('offset-repeat', {
        schema: {
            // the texture source (probably a video)
            src: {type: 'map'},
            // texture parameters
            offset: {type: 'vec2', default: {x: 0, y: 0}},
            repeat: {type: 'vec2', default: {x: 1, y: 1}}
        },

        uniforms: {
            // the texture value (once the texture source is loaded, update)
            map: { type: 't', value: null },
            // texture parameters
            offset: {type: 'vec2', value: {x: 0, y: 0}},
            repeat: {type: 'vec2', value: {x: 1, y: 1}}
        },

        init: function(data) {

            this.material = new THREE.ShaderMaterial({

                uniforms: this.uniforms,

                vertexShader: this.vertexShader,

                fragmentShader: this.fragmentShader

            });
        },



        update: function (data) {
            AFRAME.utils.material.updateMap(this, data);
            this.uniforms.map.value = this.material.map;
            this.uniforms.offset.value = data.offset;
            this.uniforms.repeat.value = data.repeat;
        },



        vertexShader: [
          'varying vec2 vUV;',
          'void main(void) {',
          '  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);',
          '  vUV = uv;',
          '}'
        ].join('\n'),

        fragmentShader: [
          'uniform sampler2D map;',
          'uniform vec2 offset;',
          'uniform vec2 repeat;',
          'varying vec2 vUV;',
          'void main() {',
          '  gl_FragColor = texture2D(map, vec2(vUV.x / repeat.x + offset.x, vUV.y / repeat.y + offset.y));',
          '}'
        ].join('\n')
    });
``` (might be worth making updateMap more broadly reusable for these purposes, but for single texture this is simpler) if type 'map' worked properly out of the box, my example would have been literally just schema and shaders, which was where i thought the line was (and should be). I'm quite new to aFrame, looking to write a simple fragment shader that animates a texture. If I'm following this thread correctly, registerShader is likely to continue to evolve so my best bet is to use registerComponent and work directly with the threejs ShaderMaterial API?  Many thanks! I like the way that example just uses THREE values without worrying about types, maybe that passthrough type plus map (texture) should be the limit of what registerShader() is willing to do #2199  **Description:** @sirkitree [reported](https://github.com/bryik/aframe-vive-cursor-component/issues/2) yesterday that using the vive-cursor component with A-Frame master causes a crash. I thought this was a problem with the component at first, but adding A-Frame's own raycaster component to an entity with vive-controls causes the same crash.

- A-Frame Version: master
- Platform/Device: Desktop
- Reproducible Code Snippet or Demo URL [highly encouraged]: 

[CodePen With master](https://codepen.io/bryik/pen/womdvL) (crash).

[CodePen With 0.3.2](https://codepen.io/bryik/pen/XNERmR) (runs fine).
 Thanks for filing here @bryik! does this still occur with latest master? Nope, the master CodePen example no longer crashes. Seems this was fixed!
 I think it's back. Adding `raycaster` to an entity with `vive-controls` causes Nightly to crash with A-Frame 0.5.0.

[Example](https://codepen.io/bryik/pen/BRMjxB).

Console dump:

![image](https://cloud.githubusercontent.com/assets/12419712/26369957/466d0636-3fc4-11e7-857f-33285031a153.png)

 That example CodePen I posted earlier does not crash when [master is used instead of 0.5.0](https://codepen.io/bryik/pen/VbgmXw). Fixed by [this PR](https://github.com/aframevr/aframe/pull/2696), I take it. 

Thanks @ngokevin!

  When adding a url as such:

`<a-sphere material="src:url(...)"></a-sphere>`

I get: 

> No 'Access-Control-Allow-Origin' header is present on the requested resource

Is it possible that inline urls could be made to allow for crossorigin as  a property of the material?

Reposted here (in case it is not a bug): https://stackoverflow.com/questions/40955781/cors-inline-material-for-aframe I actually DO have CORS setup on my amazon server. It works correctly when the file is added as part of the <a-assets> with crossorigin attribute.

`<img id="alibrary" src="https://s3.amazonaws.com/..." crossorigin="anonymous">`

The problem is when I try to set the url on the object itself not in a-assets:

`<a-image src="url(...)" position="0 0 -2" width="2" height="2"></a-image>`

I get the following error:
> XMLHttpRequest cannot load https://s3.amazonaws.com.... No 'Access-Control-Allow-Origin' header is present on the requested resource. Origin is therefore not allowed access.
 Personally I don't care too much as I use the <a-assets> as a workaround, but I have experienced CORS issues when using the url on the object directly. If your request doesn't specify an Origin header, S3 won't include the CORS headers in the response. is the issue solved ? I am facing the same problem  still on problem @bhibi I solved the problem I was facing. Can you elaborate your case ? thx @codechikbhoka i had some problem with adding image, .jpg file work flawless but i cant add my .png image with transparent background. I guess I am having the same error, when I put the image link using imgix ( a service similar to cloudinary ) directly in the html with `<img>` tag everything works, however when I put it in the a-frame tag, it doesn't work
`<a-scene>
  <a-sky src="https://example.imgix.net/example/example.jpg?lossless=True" rotation="0 0 0"></a-sky>
</a-scene>
`
This is all what I have in the page, a simple 360 image served from an external source over HTTPS.


I contacted the customer support of imgix and that was their reply 
> We set an Access-Control-Allow-Origin header on every request that has an origin set. I've attempted to replicate this issue, but by specifying an origin the header is appearing correctly:
> 
> curl -H 'Origin: https://www.example.com' -I 'https://example.imgix.net/example/example.jpg?lossless=True'
> 
> HTTP/1.1 200 OK
> Cache-Control: max-age=1800
> Last-Modified: Thu, 23 Mar 2017 16:59:49 GMT
> Server: imgix-fe
> Fastly-Debug-Digest: e346dbbe2366c50ca5a8f3708699c7a048bffdfc5dc2c63592c41a9c99f7f6b3
> Content-Length: 4088928
> Accept-Ranges: bytes
> Date: Thu, 23 Mar 2017 17:01:02 GMT
> Age: 68
> Connection: keep-alive
> Content-Type: image/jpeg
> X-Imgix-Request-ID: da63a9d66b2ab49a83e3fa2455b20426fd9911e8
> Access-Control-Allow-Origin: *
> X-Content-Type-Options: nosniff
> X-Served-By: cache-lax8632-LAX, cache-sjc3123-SJC
> X-Cache: MISS, HIT
> X-Cache-Hits: 0, 1
> Please ensure that the origin is being set on every request to ensure that the header is sent from our end.
> 



Please help me fix this error.
Thanks in advance. what happens is, when you request a resource from a third party, you have to mention the origin tag in the request. Then only that third party will send you response with Access-Control-Allow-Origin header. So to do this in aframe, you should add crossorigin=anonymous in your img item in your a-asset.

This should work: 

https://gist.github.com/codechikbhoka/3c0135b88ec1fd876377d091a19f92df @codechikbhoka Thank you so much Vivek, That solved it for me! @ngokevin Using the asset management system did not fix the issue. 

```
<a-assets>
        <img id="asset-scene-url" src="{{location.scene_img_url}}">
<a-assets>

  <a-sky ng-click="print()" src="#asset-scene-url"></a-sky>
```

Where location.scene_img_ur is an s3 asset with CORS enabled. Issue still remains.



## FIX can be found above. Add  crossorigin="anonymous" to the img tag within a-assets @ngokevin the problem with **Chrome** (and **Safari**) is probably within [this piece of code](https://github.com/aframevr/aframe/blob/16679ab3518d7d07b4c61abd7817d2ca5098da60/src/utils/src-loader.js#L91-L103).

It "checks" that the to-be-loaded src is indeed an image, without setting the `crossOrigin` value. The browser then probably caches the received headers and since it was NOT requested with the `Origin` header, the `Access-Control-Allow-Origin` header is not present in the cached response.

Then it proceeds to load the image (using **three.js**' [`ImageLoader`](https://github.com/mrdoob/three.js/blob/fdc8b669b30323aedd4126ef7d5ef3362203c0fd/src/loaders/ImageLoader.js#L76)), but since this time the `crossOrigin` is set (`"anonymous"` by default) and the header is not set in the cache, the browser cancels it because of *CORS*. @codechikbhoka not able to access your solution. could you please resend it?
https://gist.github.com/codechikbhoka/3c0135b88ec1fd876377d091a19f92df url is not accessible.

Thanks in advance I am still getting trouble with this. I can not use both the inline and `crossorigin` method from an S3 bucket. I have used Aframe React, Vanilla Aframe (mostly `a-image`), the asset system using `<img src=whatever crossorigin="anonymous" />`, and I tried to apply a texture to a plane to try and render out my image but I am not succeeding.   Hello!

I'm trying to get vue/nuxt.js working in tandem with a-frame however a-frame isn't loading properly. Sometimes the scene loads other times it loads content from one template but not from another on other occasions it just doesn't load at all. It looks like the two libraries are racing each other while loading.

Does anyone kmow how to get a-frame working with nuxt.js / vue?

Cheers :)  Hi I wanted to know if this is still in implementation or if there is another component out there that has same functionality to create a "load screen" before all assets are loaded fluidly.  - A-Frame Version: 0.3.2
- Platform/Device:
    - iOS 10.10 / iPod touch
    - iOS 9.3.5 / iPhone 5
    - android 6.0.1 / Samsung Galaxy S6 / Chrome 
- Reproducible Demo URL: https://aframe.io/examples/showcase/videosphere/

I am following the instructions of adding to home screen, launching the home screen app but I get a black screen in place of video. Same result also without using home screen.

With remote debugger I get a lot of instances of this:
`[Warning] Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic (aframe.js, line 55911, x24)`

When entering VR mode I get another error:
```
[Error] TypeError: null is not an object (evaluating 'link.nextElementSibling')
	getDestNavLink (examples.js:64)
	(anonymous function) (examples.js:29)
```

I know this has been discussed on #316, but all the constraints mentioned there have been fulfilled, yet it does not work.
 I am having the same issue, same black screen, in fact have ~never~ been able to get <a-videosphere> to work on mobile (iOS 10.x). Followed all instructions verbatim, including adding the metatag, inline-video, pin to home screen, etc. in all permutations. What are we missing here? I am having the same issue. Any chance it is a problem with the CDN? I mean... it shouldn't, but I can't figure out whats wrong at all. Desktop mode works fine. https://github.com/aframevr/aframe/issues/1846 up Probably this happens because the video file should be served from the same origin - this is how mobile Safari works. Here video file is served from CDN domain.  **Description:**
The docs refer to the ground color prop in hemisphere light as groundColor. But the code refers to it as groundcolor. Should this be case insensitive?

**Changes proposed:**
- Update groundcolor to groundColor in light.js.  Hi,

I wanted to play around with a-frame animations and things looked in stable chrome (54.0.2840.9), but when I switched to the webvr enabled chrome build from https://webvr.info/get-chrome/ my animations stopped working properly. They still did something, but no smooth animation. Best see for yourself, can be reproduced with the anime ui example as well: https://aframe.io/examples/showcase/anime-UI/. (Quite possible this is a webvr issue in chrome, I just can't say. /cc @toji) It stopped working in the latest chrome build for WebVR from 29th October 2016.
In the release from the 23rd of September 2016 animations are working fine: https://drive.google.com/drive/folders/0BzudLt22BqGRbHdGOTdiaTBkZXM This might be the issue ([source](https://docs.google.com/document/d/1dP9m3WLh2lsBs9jJ9LRwv1l0AtuBQAqGLAV-fUbtz2U)):

> The timestamp passed to the requestAnimationFrame callback is off by a factor of 1000, the function erroneously receives microseconds instead of milliseconds.

This will definitely mess up tween.js. see #2207 and #2217  **Description:**

The "build a more advanced scene" link was broken, since the filename changed.

**Changes proposed:**
- Update the `[next]` link.

  **Description:** I started to work on an MR component attaching the camera to a controller then planning to take screenshots through that secondary camera. Sadly it seems the screenshot component is implicit or rather only assumes one camera. It works in most case but in this specific one, which I believe is quite interesting it doesn't.

- A-Frame Version: master
- Platform/Device: Chromium + Vive
- Reproducible Code Snippet or Demo URL [highly encouraged]: http://jsbin.com/qujuzaz/edit?html,output
  1. a fast easy way to provide some order would be adding a tock() method on components. All tocks() would be guaranteed to run after ticks(). Post processing doesn't need changes to the core, I'm currently implementing it on top of regular master.

2. This can provide some ordering right now. Systems always run after components.

3. Having tick/tock on shaders would be great and would simplify the implementation of complex materials, like using procedurally generated textures etc  Thanks for figuring out the original issue! :+1:  **Description:**

Opting out of fog with `material="fog: false; shader: flat"` no longer works on `master`:

```
<a-scene fog="type: linear; color: #AAB; far: 30; near: 0">
  <a-sphere
    position="0 10 0"
    radius="10"
    color="#93648D"
    material="fog: false; shader: flat"
  ></a-sphere>
</a-scene>
```

- A-Frame Version: `master` (909e5ec89cd2e0e11f56db51819deef170f0a115)
- Platform/Device: Desktop Chrome
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  - `master` (not working): http://codepen.io/anon/pen/YpxPxz
  - `0.3.2` (working): http://codepen.io/anon/pen/NbvPvj

_Edit_: It appears to be working correctly on 32b1378109361e898eb47e51d1a7691013402c8b, which means something went wrong between [32b1378...909e5ec](https://github.com/aframevr/aframe/compare/32b1378109361e898eb47e51d1a7691013402c8b...909e5ec89cd2e0e11f56db51819deef170f0a115/)

_Edit 2_; Some `git bisect`ing reveals, the first bad commit is 8b0df2365c77dd43666afb6f63e922b4d4037753 / #2106 

_Edit 3_: Confirming; reverting the commits in #2106 fixes this issue.  **Description:**

- A-Frame Version: `master` (#2108)
- Platform/Device: All
- Reproducible Code Snippet or Demo URL [highly encouraged]:

When setting a component schema such as:

```javascript
schema: {
  foo: {
    type: 'string',
    default: null,
  }
}
```

The values set on `this.data` don't reflect the default `null`, instead, we end up with an empty object.

The problem is introduced by [this line](https://github.com/dmarcos/aframe/blob/53eae6d00a6eca53e494b6e3f2887251a36549a3/src/core/component.js#L334):

```javascript
data[key] = typeof defaultValue === 'object' ? utils.extend({}, defaultValue) : defaultValue;
```

The `utils.extend` returns a new empty object.

---

## The Fix

Instead, it should check to see if it's actually an object, maybe via one of these two methods:

```javascript
data[key] = Object.prototype.toString.call(defaultValue) === '[object Object]' ? utils.extend({}, defaultValue) : defaultValue;
```

or

```javascript
data[key] = (defaultValue.constructor && defaultValue.constructor === Object) ? utils.extend({}, defaultValue) : defaultValue;
```

Personally; I prefer the first option as it protects against the mutable `.constructor` property being modified by userland code.

---

_Edit_: Am happy to open a PR; just give the :+1: for one of the two solutions above, and I'll get it done. That works too :)

There's nothing else that reports `typeof` as `'object'` which we'd need to special-case here too?  **Description:**  A component named _namedcomponent_ get registered and works whereas _NamedComponent_ or _namedComponent_ silently fails.

- A-Frame Version: master
- Platform/Device: desktop Firefox stable
- Reproducible Code Snippet or Demo URL [highly encouraged]: http://jsbin.com/jovuwut/edit?html,output
 Add this code:

    var el = document.getElementsByTagName('a-scene')[0];
    console.log(el.attributes);

The resulting NamedNodeMap only contains "namedcomponent". HTML ignores the capitalization of attributes. You can use the capitalized version and register a lower-case component, but not visa-versa.

There is no fix, but the code can and should produce a warning, and this should be documented.
  (@ngokevin this is done right?)  refactor hand-controls per discussion on https://github.com/aframevr/aframe/pull/2124 @dmarcos @ngokevin take a look at this refactor, pulling over salient comments from prior discussion...

>> An alternative is to leave oculus-controls and vive-controls to handle the model loading. That would mean some potential code duplication but everything is simple and clear

> the alternative you suggest is basically the current refactor, with `modeled-controllers` basically meaning "platform please detect and inject for me" - so to add autodetect of `daydream-controls`, one would simply add to `prefixMapping` in `modeled-controllers` which would detect the controller via gamepad extensions id prefix

renamed `modeled-controllers` to `auto-detect-controllers` to make its function more obvious @dmarcos bringing the discussion over to the refactor...

> Authors don't have to enumerate the controllers manually. For instance hand-controls (and other high level controls schema) would do the instantiate and configure them in the init method: ```
el.setAttribute('vive-controls' { ... });
el.setAttribute('oculus-controls' { ... });```
The capabilities of each controller are very different. Daydream is only 3DOF, Vive has a touchpad, Touch has two analog joysticks and two triggers. Each application and type of controls should decide what input to use and how integrate it. Integration is not straight forward and there's going to be cases where you cannot simply support all inputs for your interaction model. You cannot for instance do a-painter with a Daydream controlller or there might be an application that uses the two analog triggeres of the Oculus Touch in a way that won't work in a Vive controller. We should favor highly reusable non opinionated components in the core and let 3rd parties to compete on the higher levels of abstraction.

right, for example `tracked-controls` should not assume that tracked controls always have handedness, and it should remain possible to use `oculus-touch-controls` or `vive-controls` explicitly.

it sounds as though you may prefer that `auto-detect-controllers` add every possible type of vendor control and let each of them sort it out individually, but that doesn't seem to scale well to me vs. detecting and adding the right one when asked to auto-detect. >  We should favor highly reusable non opinionated components in the core and let 3rd parties to compete on the higher levels of abstraction.

right.  but `hand-controls` is in the stock package, and if we had a dozen types of controllers, it seems more efficient to auto-detect the right one (with that logic in a different component) than to add 12, which is why this refactor places `auto-detect-controllers` in the stock package; that makes `hand-controls` just an example of how to handle model and events (and delegate auto-detection), which authors can then modify as they see fit. imagine there are a dozen types of vendor controls.  you're suggesting that each entity should drag around 11 dead attribute specifications along with the 1 live one to avoid auto-detection, which although possible seems cumbersome and does not scale well... 

remember, each needs a hand specified, and a flag to determine whether or not to use default model... as opposed to just `<a-entity auto-detect-controllers="hand:left; model:false"></a-entity>`

in addition it allows a badly written one to interfere with other working ones.  

that approach is allowed in this refactor (nothing stops one from doing exactly what you said), I do not believe that said approach should be recommended by implementing `hand-controls` in core that way.  if you would prefer to move both `hand-controls` and `auto-detect-controllers` out of core, that would make sense to me, but then I suspect enough folks would use them that we'd want to move back into core... +counter-example - there are already at least four real types of full hand controllers - the granddaddy Hydras, Vive wands, PS Move, and Oculus Touch - and one partial (3DOF Daydream controller).  That ignores button-only handheld controllers like Oculus Remote and actual gamepads.

Although each has unique characteristics, every one of the full or partial hand controllers can easily provide point-and-OK/Back to support simple experiences, which merely requires loose coordination of button event naming to make possible here. @ngokevin seems like you are saying you'd like to keep this open but unmerged for now, which leaves the current state of aframe supporting only vive wands due to hardcoding.  IMO, merging this PR is better than ignoring Touch entirely (although it could definitely use proper models), with a better pattern to leverage for the immediate and near future. IMO it's actually easier not to have to support simultaneous usage on same entity short term (less to fix with existing vive, and to test), but obviously go ahead and implement if you think it's quicker for you.

Is there a better way to leverage the system.controllers array that `tracked-controls` maintains, rather than eaxh vendor control making its own calls to navigator.getGamepads() ?  At the moment, you need to know exactly what to tell tracked-controls to use, so it seems you can't use a singleton component to get the controllers array (once overall, not once per tracked-controls instance) and then specify which you want tracked via atrribute injection. problem might be too strong a word.

because the hand attribute on OpenVR Gamepad is currently unreliable, vive uses hardcoded id and controller values (and that controller number is relative, not absolute index).  for Oculus Touch, the hands appear to be named differently at present so values could be hardcoded as well, but if they fix the reliability of hand atrributes on OpenVR Gamepad, then vive will have to enumerate

though, a little worried about tick handler for tracked-controls calling getGamepads() every time... times number of instances? > `tracked-controls` should not call `getGamepads` on every tick.

But... https://github.com/aframevr/aframe/blob/master/src/systems/tracked-controls.js#L20 ?

right now, if you have both `oculus-touch-controls` and `vive-controls` on an entity, you should only get one `tracked-controls` unless you have both, but won't button events etc. fire on each?  need to know whether the `tracked-controls` instance is the one the vendor control component specified or not? > If it is not present then you do nothing :). The component stays quite and out of the way.

but it still installs event handlers, which tracked-controls will fire on both, right? thanks for the suggestions... am wondering whether there is any actual guarantee that the controllers will not disappear and reappear in different enumerated order for example.   how often does the system tick handler fire? can probably update the controller list at a much lower frequency... OK, take a look at the latest - since you prefer multiple specification to auto-detect at the moment, `hand-controls.js` does it that way, with auto-detect commented out. @dmarcos @ngokevin updated as per your requests.  anything else preventing merge? I believe a general issue remains w.r.t. gamepad access, where the user currently has to use one of them to press a button or something before the browsers will allow access via navigator.getGamepads -- similar to the enterVR issues -- not necessarily for aframe to fix, but it might be a good ideal to allow entering vr to also make the relevant controllers accessible. (made some additional changes while fixing a-painter) (not sure why `npm run test:docs` failed in CI... no changes there...? works on my machine...) ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/2132?src=pr) is 78.35% (diff: 10.09%)
> Merging [#2132](https://codecov.io/gh/aframevr/aframe/pull/2132?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **5.05%**

```diff
@@             master      #2132   diff @@
==========================================
  Files           103        105     +2   
  Lines          3911       4199   +288   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           3262       3290    +28   
- Misses          649        909   +260   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [be87d38...1174599](https://codecov.io/gh/aframevr/aframe/compare/be87d38cf97c23a5fedc0552371be247ea2521b7...11745998d038679c6489cedbf0b08ac7500d775e?src=pr) @ngokevin @dmarcos anything else needed? @fernandojsg whoops latest event stuff must have broken something, will take a look.  are you testing on vive or rift-touch? @fernandojsg with the tracked-controls example, for me the cubes are placed too far for me to reach... using arrow keys to move camera doesn't move hands - any suggestions? @fernandojsg found the bug, committed fix @dmarcos suggest we get this PR merged first, then have a much smaller PR to make pointing/pistol then trigger invoke teleport in that one example? > If you press and/or release the grip button it does the animation instantly, but if you do the same for the trigger it takes a time to change the state, having so much delay.   In fact if you keep pressing the trigger the animation doesn't change at all.

the animations provided were: pointing, pistol, fist, thumb, touch.

when you press grip: 
pulling/pressing and touching the surface and trigger buttons are equivalent from a gesture standpoint
(although trigger touch is currently emulated from small analog values due to browser bugs),
which may explain what you are seeing;
if inactive surface buttons and trigger, you'll get pistol;
if active surface buttons but not trigger, you'll get pointing;
if inactive surface buttons but active trigger, you'll get thumb;
if active surface buttons and trigger, you'll get fist.

best I could manage with what was provided...
 @fernandojsg crossed comments...
>I just noticed that there're no events for just "touch" buttons as they do on oculus games

Actually there are touchstart/end events, did I forget to mention in docs?

> Is it because the gamepad api doesn't expose them yet?

no, but there is trigger and grip touch emulation (analog values too small to count as press/pull) due to current browser bugs
 looks like `vive-controls` didn't have any tests before, so will need to take a look at a different example... any suggestions? @fernandojsg @dmarcos @ngokevin may have found what looked like animation issue... changing emulated touch threshold helped, seems as though someone is smoothing values, so would take a while to get small enough... try now  **Description:** positive to encourage newcomers to write component and embrace the ECS pattern

**Changes proposed:**
- switched the recommended way (component) up and scene.hasLoaded down as specific-case only alternative.   (this fixes regression that broke https://www.w3.org/TR/media-source/ for video playback) that is what I am doing manually, you may not be able to correctly create the video element from just src.  my understanding is that when a string is specified, it will not have a tagName attribute and so will not be passed as either a canvas or video element directly.  am i missing something? (for clarity, the existing a-frame examples work fine with this change, and so do MSE videos) I just came across this same issue - completely breaks [`aframe-video-billboard`](https://github.com/jesstelford/aframe-video-billboard) component (I opened a duplicate PR in #2141 before I saw this one).

> previously components always accepted a string

Which components are you referring to? I can only see this logic within the `material` component, and before #2054, the logic was the same as what @machenmusik has provided above (but in a different place).

> Ensure it has a src set.

What about [when it's `srcObject`](https://github.com/jesstelford/aframe-video-billboard/blob/d985dda5fef90a12662274494ad8dc8e6093ea73/src/component.js#L175)? The aframe code is simplified by skipping those extra checks and passing it on straight to three.js to let it handle the specifics of using a `<video>` element as a texture.

> If it is a URL, then maybe [...]

This PR is good to fix the regression - do you think the new functionality could be done as a future enhancement / a separate PR? (my personal use-case just needs the regression fixed on `master` - I'm using a fork with this PR applied in the meantime) @ngokevin I think the difference of opinion we have is your assertion that the previous behavior always returned string, which @jesstelford described above.  really what happened is #2054 broke video cases other than trivial examples, and we'd like to restore the original (working) behavior for video elements as part of 0.4.0 release while further steps are discussed. for those not aware, it is common video player practice to attach the player logic (event listeners etc.) to the provided video element, so creating a different video element with same src may not yield the same behaviors (i.e. may not play properly) - the same is true for many a-frame elements... > If it is a selector, just return the element. Ensure it has a src set.

i am not sure that it should be a-frame's place to attempt to validate all possible ways an element could be considered valid, that seems brittle and not easy to maintain going forward (e.g. @jesstelford srcObject rather than src).  if you agree with "if it is a selector, just return the element" then merging this PR will help ensure that prior use cases that expected and accepted said behavior will continue to work (not only canvas, but also video)  > If it is a selector, just return the element. Ensure it has a src set.
If it is a URL, then maybe we create a media element for them, setting the src, ensure crossorigin and playsinline. And we append it to <a-assets> so they have a reference to it if they want to control media playback.

I believe the video material handling already does 2; this PR provides 1 other than the src validation per prior comment.  in theory, we could compromise by adding check for either src or srcObject in the case of video, but really THREE.js is permissive and it seems better to just pass through the video element.  if you feel strongly that the check for src or srcObject is truly necessary to merge the pull request, please let me know ASAP. @ngokevin this also fixes #2126, and thanks to https://github.com/aframevr/aframe/blob/master/src/systems/material.js#L123, it behaves as you describe, except for "Ensure it has a src set" - primarily due to cases such as @jesstelford where not having a src set is valid.  Rather than coming up with a different fix for #2126, can we work to get this merged?  At minimum, we would need to check for either src or srcObject as mentioned above, if you feel strongly that a-frame should take on the validation burden, but otherwise I think we are all good here... @ngokevin @dmarcos does this still need changes?  if so, only "check for either src or srcObject as mentioned above" or something else as well?

>this also fixes #2126, and thanks to https://github.com/aframevr/aframe/blob/master/src/systems/material.js#L123, it behaves as you describe, except for "Ensure it has a src set" - primarily due to cases such as @jesstelford where not having a src set is valid. Rather than coming up with a different fix for #2126, can we work to get this merged? At minimum, we would need to check for either src or srcObject as mentioned above, if you feel strongly that a-frame should take on the validation burden, but otherwise I think we are all good here... as compromise, added warning if video element has neither src nor srcObject
(because existing behavior for invalid video is to warn)
hopefully we are now OK to merge

> thanks to https://github.com/aframevr/aframe/blob/master/src/systems/material.js#L123, it behaves as you describe

> If it is a selector, just return the element. Ensure it has a src set.
If it is a URL, then maybe we create a media element for them, setting the src, ensure crossorigin and playsinline. And we append it to <a-assets> so they have a reference to it if they want to control media playback. (@dmarcos @ngokevin added warning if no src or srcObject, this one should be good to go now.) @dmarcos @ngokevin is there something holding up merge of this PR? Thanks for the merge @ngokevin :tada:  **Description:**
When you click View Source in the audio visualizer example, you are taken to a link that Github says does not exist.
- A-Frame Version:
- Platform/Device:
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  **Description:**
support Oculus Touch in Chromium builds, along with Vive

**Changes proposed:**
- added rotationOffset in tracked-controls to allow adjustment of hand model rotation
- modify vive-controls to understand both Oculus Touch and OpenVR Gamepad, and pass rotationOffset
- modify hand-controls to pass per-hand rotationOffset through vive-controls to tracked-controls tested with Touch, kfarr confirmed I believe.  also tested with Vive wands. original intent was to make hand-controls just work.  but hand-controls is hardcoded to use vive-controls which uses tracked-controls.  maybe what is really needed is a generic modeled-tracked-controls or something, and then vive-controls and oculus-touch-controls could have their own models just like hand-controls.  but that seemed a larger refactor than needed to just get things working... especially assuming that many folks just want to use hand-controls to abstract left and right hand without having to know which kind... my thoughts were:

**tracked-controls** 
... stays as low-level tracking 
... suggest the filtering to OpenVR Gamepad be removed as previously mentioned
... should we consider calling this tracked-entities or similar, since they may not necessarily be controllers?
**modeled-tracked-controls**
... does most of what what vive-controls does now, but no model (or maybe generic model)
... button mapping, determination of which controllers to bind for specified hand
... maybe modeled-controllers would be a better name
**hand-controls**, **vive-controls**, **oculus-touch-controls**
... add specific models and gamepad id filtering (e.g. vive = OpenVR Gamepad, oculus-touch = Touch naming)
 perhaps not, but that makes `tracked-controls` fatter and may inflict upon it model-specific filtering and button mapping -- at the moment tracking is uniform regardless of controller vendor, but button/event mapping may not be... so in theory `modeled-controllers` could use `tracked-controls` generically for positioning, but then inject model-specific components for button/event mapping based on gamepad id pattern?
then again, I may be overthinking it... thoughts on https://github.com/chenzlabs/aframe/tree/refactor-hand-controls
(still WIP) ?

tracked-controls

modeled-controllers ... looks at available controllers and inject mapping
- vive-controls ... has mapping and model, matches specified hand and injects tracked-controls
- oculus-touch-controls ... has mapping and model, matches specified hand and injects tracked-controls

hand-controls ... uses modeled-controllers, which is agnostic

that way, oculus-touch-controls and vive-controls can implement events both common and unique, they select specific controllers to use according to their logic; pattern for others is clear; one can specifically request touch and/or vive as well, at the cost of some duplication between (which originally I was thinking of hoisting to modeled-controllers) @dmarcos I didn't want to bind that up with the hand model in hand-controls, thus the intermediate layer modeled-controllers.

https://github.com/chenzlabs/aframe/tree/refactor-hand-controls 
works for Touch on Chromium, any chance you can test on Vive?  happy to close this and do a pull request for that one if desired, although Touch needs diifferent models... ok you prefer a heavier tracked-controls, fine but I don't think having tracked-controls do modelSrc will suffice given that there are different types of models that could be used etc. (actually i am having similar discussion that video cannot be fully specified only looking at src) - in the refactor I was working on, that seems relatively close to what you describe except that you prefer the modeled-controllers functionality to be merged into tracked-controls; in the meantime I will close this pull request in favor of the refactor.  thanks! actually though, I disagree that authors should have to enumerate all the controller types they could possibly support, including ones that don't exist yet, the framework should handle that internally unless specified IMO... it should be possible for the author to simply say that want hand-controls left and right, and in the refactor, hand-controls does that by using modeled-controllers; the author is free to explicitly use vive-controls or oculus-controls independently. the alternative you suggest is basically the current refactor, with modeled-controllers basically meaning "platform please detect and inject for me" - so to add autodetect of daydream-controls, one would simply add to prefixMapping in modeled-controllers which would detect the controller via gamepad extensions id prefix

(i will submit the refactor as pull request soon so we can transition this discussion) (Further discussion appears in #2132.)  Latest version of aframe v0.3.2 uses tween.js v15.0 which is more than a year old. 

I am getting npm warnings because few of the dependent packages are very old and has security issues:

npm WARN deprecated minimatch@2.0.10: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue
npm WARN deprecated minimatch@0.2.14: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue
npm WARN deprecated graceful-fs@1.2.3: graceful-fs v3.0.0 and before will fail on node releases >= v7.0. Please update to graceful-fs@^4.0.0 as soon as possible. Use 'npm ls graceful-fs' to find it in the tree.

Here is dependency tree of packages.

tween.js@15.0.0 
│ │ ├─┬ gulp@3.9.1 
│ │ │ ├── archy@1.0.0 
│ │ │ ├── deprecated@0.0.1 
│ │ │ ├─┬ gulp-util@3.0.7 
│ │ │ │ ├── array-differ@1.0.0 
│ │ │ │ ├── array-uniq@1.0.3 
│ │ │ │ ├── beeper@1.1.1 
│ │ │ │ ├─┬ dateformat@1.0.12 
│ │ │ │ │ ├── get-stdin@4.0.1 
│ │ │ │ │ └─┬ meow@3.7.0 
│ │ │ │ │   ├─┬ camelcase-keys@2.1.0 
│ │ │ │ │   │ └── camelcase@2.1.1 
│ │ │ │ │   ├─┬ loud-rejection@1.6.0 
│ │ │ │ │   │ └─┬ currently-unhandled@0.4.1 
│ │ │ │ │   │   └── array-find-index@1.0.2 
│ │ │ │ │   ├── map-obj@1.0.1 
│ │ │ │ │   ├─┬ normalize-package-data@2.3.5 
│ │ │ │ │   │ ├── hosted-git-info@2.1.5 
│ │ │ │ │   │ ├─┬ is-builtin-module@1.0.0 
│ │ │ │ │   │ │ └── builtin-modules@1.1.1 
│ │ │ │ │   │ └─┬ validate-npm-package-license@3.0.1 
│ │ │ │ │   │   ├─┬ spdx-correct@1.0.2 
│ │ │ │ │   │   │ └── spdx-license-ids@1.2.2 
│ │ │ │ │   │   └── spdx-expression-parse@1.0.4 
│ │ │ │ │   ├─┬ read-pkg-up@1.0.1 
│ │ │ │ │   │ └─┬ read-pkg@1.1.0 
│ │ │ │ │   │   ├─┬ load-json-file@1.1.0 
│ │ │ │ │   │   │ └── strip-bom@2.0.0 
│ │ │ │ │   │   └── path-type@1.1.0 
│ │ │ │ │   ├─┬ redent@1.0.0 
│ │ │ │ │   │ ├── indent-string@2.1.0 
│ │ │ │ │   │ └── strip-indent@1.0.1 
│ │ │ │ │   └── trim-newlines@1.0.0 
│ │ │ │ ├─┬ fancy-log@1.2.0 
│ │ │ │ │ └── time-stamp@1.0.1 
│ │ │ │ ├─┬ gulplog@1.0.0 
│ │ │ │ │ └── glogg@1.0.0 
│ │ │ │ ├─┬ has-gulplog@0.1.0 
│ │ │ │ │ └── sparkles@1.0.0 
│ │ │ │ ├── lodash._reescape@3.0.0 
│ │ │ │ ├── lodash._reevaluate@3.0.0 
│ │ │ │ ├─┬ lodash.template@3.6.2 
│ │ │ │ │ ├── lodash._basecopy@3.0.1 
│ │ │ │ │ ├── lodash._basetostring@3.0.1 
│ │ │ │ │ ├── lodash._basevalues@3.0.0 
│ │ │ │ │ ├── lodash._isiterateecall@3.0.9 
│ │ │ │ │ ├─┬ lodash.escape@3.2.0 
│ │ │ │ │ │ └── lodash._root@3.0.1 
│ │ │ │ │ ├── lodash.restparam@3.6.1 
│ │ │ │ │ └── lodash.templatesettings@3.1.1 
│ │ │ │ ├─┬ multipipe@0.1.2 
│ │ │ │ │ └── duplexer2@0.0.2 
│ │ │ │ ├── object-assign@3.0.0 
│ │ │ │ ├── replace-ext@0.0.1 
│ │ │ │ ├─┬ through2@2.0.1 
│ │ │ │ │ └─┬ readable-stream@2.0.6 
│ │ │ │ │   └── isarray@1.0.0 
│ │ │ │ └─┬ vinyl@0.5.3 
│ │ │ │   └── clone-stats@0.0.1 
│ │ │ ├─┬ liftoff@2.3.0 
│ │ │ │ ├─┬ fined@1.0.2 
│ │ │ │ │ ├── lodash.assignwith@4.2.0 
│ │ │ │ │ ├── lodash.isempty@4.4.0 
│ │ │ │ │ └─┬ parse-filepath@1.0.1 
│ │ │ │ │   ├─┬ is-absolute@0.2.6 
│ │ │ │ │   │ └─┬ is-relative@0.2.1 
│ │ │ │ │   │   └─┬ is-unc-path@0.1.1 
│ │ │ │ │   │     └── unc-path-regex@0.1.2 
│ │ │ │ │   ├── map-cache@0.2.2 
│ │ │ │ │   └─┬ path-root@0.1.1 
│ │ │ │ │     └── path-root-regex@0.1.2 
│ │ │ │ ├── flagged-respawn@0.3.2 
│ │ │ │ ├── lodash.isplainobject@4.0.6 
│ │ │ │ ├── lodash.isstring@4.0.1 
│ │ │ │ └── lodash.mapvalues@4.6.0 
│ │ │ ├── minimist@1.2.0 
│ │ │ ├─┬ orchestrator@0.3.8 
│ │ │ │ ├── end-of-stream@0.1.5 
│ │ │ │ └── sequencify@0.0.7 
│ │ │ ├── pretty-hrtime@1.0.3 
│ │ │ ├── tildify@1.2.0 
│ │ │ ├─┬ v8flags@2.0.11 
│ │ │ │ └── user-home@1.1.1 
│ │ │ └─┬ vinyl-fs@0.3.14 
│ │ │   ├── defaults@1.0.3 
│ │ │   ├─┬ glob-stream@3.1.18 
│ │ │   │ ├── glob@4.5.3 
│ │ │   │ ├─┬ glob2base@0.0.12 
│ │ │   │ │ └── find-index@0.1.1 
│ │ │   │ ├── ordered-read-streams@0.1.0 
│ │ │   │ └── unique-stream@1.0.0 
│ │ │   ├─┬ glob-watcher@0.0.6 
│ │ │   │ └─┬ gaze@0.5.2 
│ │ │   │   └─┬ globule@0.1.0 
│ │ │   │     ├─┬ glob@3.1.21 
│ │ │   │     │ ├── graceful-fs@1.2.3 
│ │ │   │     │ └── inherits@1.0.2 
│ │ │   │     ├── lodash@1.0.2 
│ │ │   │     └─┬ minimatch@0.2.14 Gulp is no longer a dependency of Tween.js. It was a development-only dependency. Tween.js is a 100% standalone JavaScript file.

It should be safe to update. I just released [version 16.4](https://github.com/tweenjs/tween.js/releases) through Github, but it won't be on npm until @sole updates it.  **Description:**
When I test VR mode at Android device(by google cardboard), It seems no stereo effect? things are shown seperately and my eyes can not identify they are stereo.
![image](https://cloud.githubusercontent.com/assets/22290786/20452972/5c2676c8-ae52-11e6-8b79-b96e298f8fed.png)
Code here(I uploaded codes' screen shot for easy reading):
<img width="973" alt="part1" src="https://cloud.githubusercontent.com/assets/22290786/20460858/77c87220-af2c-11e6-81a4-3ab6eca34043.png">
<img width="906" alt="part2" src="https://cloud.githubusercontent.com/assets/22290786/20460859/7c8c22c0-af2c-11e6-8567-6584bdbbb6a9.png">
<img width="905" alt="part3" src="https://cloud.githubusercontent.com/assets/22290786/20460860/7fbd83bc-af2c-11e6-8e76-5c4a55dac042.png">
<img width="767" alt="part4" src="https://cloud.githubusercontent.com/assets/22290786/20460861/845aed56-af2c-11e6-948f-8608fba7362b.png">

Thanks in advance!
- A-Frame Version: 0.3.2
- Platform/Device: Android 6.0
- Reproducible Code Snippet or Demo URL [highly encouraged]:  The picture in two eyes are different, however when I put my phone into cardboard, they did not match each other, which means the entities overlap, but not come to one integrated stereo things..
@dmarcos 
Thanks!
 Are you sure that the phone is centered in the cardboard?
The original cardboard is (in)famous for not holding the phone correctly. That's why I don't use a cardboard-cardboard anymore, rather this one:
http://www.homido.com/en/shop/products/homido-mini
especially when I show it to clients.
  @dirkk0    Thanks for recommending this convenient device~!
However I have tried other websites like the demo:  [https://shopifyvr.myshopify.com/pages/virtual-reality](url)
It works fine on the cardboard.... 
I do not no what goes wrong then...... 
 @ngokevin  I am using HUAWEI Mate 8, and here is my device information, thanks!
<img width="344" alt="device_info1" src="https://cloud.githubusercontent.com/assets/22290786/20547711/09f1126e-b159-11e6-95de-2648b7b47cb0.png">
<img width="341" alt="device_info2" src="https://cloud.githubusercontent.com/assets/22290786/20547713/0af7b5f0-b159-11e6-8153-869ec048cfe0.png">
 @ngokevin 
Thanks, looking forward to the fixed version! :) FWIW, I am experiencing a similar issue with a Samsung Galaxy S7 Edge. A-Frame scenes rendered in VR mode using the Chrome browser on the S7 have a "double vision" effect, but other cardboard apps work fine, and even the ShopifyVR link above is OK when using Chrome. I was having this issue on Pixel XL. The problem is that the dpdb within Googles webVR polyfill that a-frame uses doesn't have your devices settings. We have to wait till Google updates that database. 

In the mean time I fixed the issue I was having by doing the following:
- use a local version of the a-frame js
- in that js file find DPDB cache
- copy and paste a device entry in the cache
- change the ua to the user agent string for your device
- change the mdmh to your phones maker and device name
- change dpi to that of your device (this is the Actual DPI X and Y which is at the bottom of your second screen of device information)
- bw is bezel width, change this to the width of your devices bezel. Most phones are 3mm I believe.
- search in the a-frame js file for xhr.open('GET', ONLINE_DPDB_URL, true); then change true to false. This will stop the polyfill from asking for the online dpdb and will instead use the cache that you've edited.

This is what I added for the Pixel XL and it fixed the double vision issue I was having:

  {
  "type": "android",
        "rules": [{
            "mdmh": "Google/*/Pixel XL/*"
        }, {
            "ua": "Pixel XL"
        }],
        "dpi": [537.9, 533],
        "bw": 3,
        "ac": 1000
  },

The entry for your device might be this, I would check the user agent is correct for your device:

  {
  "type": "android",
        "rules": [{
            "mdmh": "Huawei/*/NXT-AL10/*"
        }, {
            "ua": "HUAWEINXT-AL10"
        }],
        "dpi": [365.76, 366.676],
        "bw": 3,
        "ac": 1000
  }, @garethwilliams Thank you for your suggestion, which worked perfectly for getting rid of double vision with my Galaxy S7.  Same problem on Moto G4, I followed the above but also had to add one other line change and I used `ua` (user agent) as my rule not `mdmh` which I'm not even sure what that is because I found this in the code:

```
Dpdb.prototype.matchRule_ = function(rule, ua, screenWidth, screenHeight) {
  // We can only match 'ua' and 'res' rules, not other types like 'mdmh'
  // (which are meant for native platforms).
```

I went for:

```
{
    "type": "android",
    "rules": [
      { "ua": "Moto G (4)" }
    ],
    "dpi": 401.0,
    "bw": 4,
    "ac": 1000
  }
```

I also found this line :

```
this.dpdb_ = new Dpdb(true, this.onDeviceParamsUpdated_.bind(this));
```

and changed `true` to `false` (preventing searching for the DPDB online.
 @ngokevin I'm trying to move this forward with the maintainers of the WebVR Polyfill repo:
https://github.com/googlevr/webvr-polyfill/issues/184

In the meantime, I took a snapshot of the 0.4.0.min release and changed the DPDB URL to mine, so you can test it out by loading A-Frame from here:
https://rawgit.com/thoragio/vr-aframe-dist/master/040/aframe-v0.4.0.min.js

Everyone else following this issue, please try it and see if it fixes your stereo-rendering problem (it did for me on my S7). @thoragio looks the same way as the official release on iPhone 7+ @giordyb can you go to the link below and copy/paste the output from it on your 7+?
http://btco-code.appspot.com/debug/screen_test.html
 Here you go:

UA: Mozilla/5.0 (iPhone; CPU iPhone OS 10_2 like Mac OS X) AppleWebKit/602.3.12 (KHTML, like Gecko) Version/10.0 Mobile/14C92 Safari/602.1
computed resolution: 2208 x 1242
screen.width: 414
screen.height: 736
screen.availWidth: 414
screen.availHeight: 736
window.devicePixelRatio: 3 @giordyb thanks. There is an entry for these screen dimension already in the DPDB cache:
`{"type":"ios","rules":[{"res":[1242,2208]}],"dpi":[453.6,458.4],"bw":4,"ac":1000}`

So it seems that the blur issue in [2008](https://github.com/aframevr/aframe/issues/2008) is separate from the stereo-effect issue in this thread. @dmarcos As discussed in Slack, I've submitted the PR to update the DPDB URL to my cache: https://github.com/googlevr/webvr-polyfill/pull/190  It would be great to add <a-star> component with embeded webgl shader as per can be found in http://stars.chromeexperiments.com/

@ngokevin maybe something like your https://github.com/ngokevin/kframe/tree/master/components/sun-sky/ without the sky : ) @ngokevin Thanks for sharing.

Unfortunately This component is only 2d and has not been updated for sometime : (
  **Description:**
I would like to suggest some degree of implementation of form controls ou input controls for that matter.
I am aware that VR input is in its very early stages ( leapmotion ) but the framework could branch out a spec for that. 

- A-Frame Version: Any
- Platform/Device: Any
- Reproducible Code Snippet or Demo URL [highly encouraged]: N/A

Regards something like this? https://fuleinist.github.io/aframe-vr-survey/
 @fuleinist yes. Something of the kind.
@dmarcos imagine a 360º CMS in which a user can view and input stuff.

For example from 0º to 90º ( approx ) we see a listing. From 90º to 180º we can input data in the form. From 180º to X we can edit another record or navigate to other page. We have only to shift our heads in the direction of what we want to do in the CMS.

BTW: This does not have anything to do with Aframe, but with speech recognition available in the browser we can also add some degree of control in this "vrCMS" xD
 Thumb up for VR CRM : )  It's probably achievable even with a Wordpress
Plugin,  just need someone to develop it.

On Sat, Nov 19, 2016 at 12:18 AM, jarodium notifications@github.com wrote:

> @fuleinist https://github.com/fuleinist yes. Something of the kind.
> @dmarcos https://github.com/dmarcos imagine a 360º CMS in which a user
> can view and input stuff.
> 
> For example from 0º to 90º ( approx ) we see a listing. From 90º to 180º
> we can input data in the form. From 180º to X we can edit another record or
> navigate to other page. We have only to shift our heads in the direction of
> what we want to do in the CMS.
> 
> BTW: This does not have anything to do with Aframe, but with speech
> recognition available in the browser we can also add some degree of control
> in this "vrCMS" xD
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/2114#issuecomment-261529448,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/ABHB2mJmN0EdcixYc9vaezWZXfNhFVewks5q_aWVgaJpZM4K2RKj
> .
  **Description:**

I think letting \<a-asset-item> support arraybuffer will be useful for components.
Actually \<a-mmd> I'm working on needs MMD assets data downloaded as arraybuffer.

https://github.com/takahirox/a-mmd

IMO, it's a good idea that \<a-asset-item> supports `responseType` (or just `type`?) attribute like this.

    <a-asset-item id="model" responseType="arraybuffer" src="model.pmd"></a-asset-item>

Adding `XHRLoader.setResponseType()` right before calling `XHRLoader.load()` can enable this feature.

https://github.com/aframevr/aframe/blob/96df6c1f22fdf72c392be710d945bb9e8684b05c/src/core/a-assets.js#L99-L113

    var self = this;
    var src = this.getAttribute('src');
    var responseType = this.getAttribute('responseType');
    if (!responseType) { responseType = 'text'; }
    fileLoader.setResponseType(responseType);
    fileLoader.load(src, function handleOnLoad (response) {
      THREE.Cache.files[src] = response;
      self.data = response;
      setTimeout(function load () { ANode.prototype.load.call(self); });
    }, ....
 I'll make a PR if this update sounds good to you guys.
 I plan to write document to describe which attribute should be downloaded
as arraybuffer for my component.

If two components attempt to download the same assets as different type,
the type will be the first attempted response type because of THREE.Cache
(if THREE.Cache is enable. It should be enabled for pre-downloading).

But I don't think it won't be a problem in general
because there may be no case that an asset is needed as two or more different types.

If we wanna avoid this conflict issue,
it may be one of the ways to keep the cache with url + response type key.
  
![screen shot 2016-11-17 at 10 25 43 pm](https://cloud.githubusercontent.com/assets/19437970/20417650/e08f7d0e-ad14-11e6-9359-05b67f5a5204.png)

![screen shot 2016-11-17 at 10 26 10 pm](https://cloud.githubusercontent.com/assets/19437970/20417656/e64499dc-ad14-11e6-98f4-0205b12dd697.png)



  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/2106?src=pr) is 83.57% (diff: 97.36%)

> Merging [#2106](https://codecov.io/gh/aframevr/aframe/pull/2106?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **0.06%**

``` diff
@@             master      #2106   diff @@
==========================================
  Files           103        103          
  Lines          3888       3891     +3   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           3247       3252     +5   
+ Misses          641        639     -2   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [0e557e1...5a1cd74](https://codecov.io/gh/aframevr/aframe/compare/0e557e11bfbdfb58b8ffeddbc0ecfcd7e00f2ebf...5a1cd7480987042248e18a9d22b7191218020d7b?src=pr)
  Hi, I added Matrix4 property type #2069
Would you review the code because I'm still new to A-Frame.
LMK if there's any issues.

**Description:**

Add 'matrix4' property type.

Default value is
[1, 0, 0, 0,
 0, 1, 0, 0,
 0, 0, 1, 0,
 0, 0, 0, 1]

Input value is assumed as space separated strings.
ex: '0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15'

If elements# is greater than 16, it'll be forced to be 16.
If elements# is less than 16, the shortage will be filled with default value.

**Changes proposed:**

 I prefer row-major format as user input because easier to read for A-Frame users.
They can easily edit in their HTML.

 I've updated.

- export as `utils/matrices.js` like `utils/coordinates.js`
- add `Matrix3`
- type names are `mat3/mat4` like `vec2/vec3/vec4`
- End user sees matrix as row-major format while it's handled as column-major in A-Frame/Three.js
- parse(): row-major space separated string input and column-major array output
- stringify(): column-major array input and row-major space separated string output

I want to discuss
- what type/format of parse() and stringify() input/output/defaultValue should be
  **Description:**
Fixed a typo in example code

**Changes proposed:**
- removed a `</a-mixin>` that shouldn't be there  **Description:**

I've run into this error on the latest master branch.

    $ npm run test:docs

    > aframe@0.4.0 test:docs C:\Users\takahiro\Documents\aframe
    > node scripts/docs-link-check.js

    docs/introduction/index.md
        Link definition not being used: integrationimage

    npm ERR! Windows_NT 10.0.14393
    npm ERR! argv "C:\\Program Files\\nodejs\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "run" "test:docs"
    npm ERR! node v4.6.0
    npm ERR! npm  v2.15.9
    npm ERR! code ELIFECYCLE
    npm ERR! aframe@0.4.0 test:docs: `node scripts/docs-link-check.js`
    npm ERR! Exit status 1
    npm ERR!
    npm ERR! Failed at the aframe@0.4.0 test:docs script 'node scripts/docs-link-check.js'.
    npm ERR! This is most likely a problem with the aframe package,
    npm ERR! not with npm itself.
    npm ERR! Tell the author that this fails on your system:
    npm ERR!     node scripts/docs-link-check.js
    npm ERR! You can get information on how to open an issue for this project with:
    npm ERR!     npm bugs aframe
    npm ERR! Or if that isn't available, you can get their info via:
    npm ERR!
    npm ERR!     npm owner ls aframe
    npm ERR! There is likely additional logging output above.

    npm ERR! Please include the following file with any support request:
    npm ERR!     C:\Users\takahiro\Documents\aframe\npm-debug.log


It seems #2085 causes this issue so I've fixed.
  **Description:**
When I try to load the example video scene from https://aframe.io/examples/showcase/videosphere/ I just get a black screen on Chromium. 
- A-Frame Version: 0.3.2
- Platform/Device: Chromium
- Reproducible Code Snippet or Demo URL [highly encouraged]:
Here's my console output
<img width="304" alt="aframeconsole" src="https://cloud.githubusercontent.com/assets/6880862/20282519/e100f176-aa69-11e6-81b7-c1a4bc92f8ba.PNG">
 How can I do this?

Hack Prius,
Hack Love,
Hack Life.
-J
facebook.com/HackLifePrius

On Mon, Nov 14, 2016 at 1:00 PM, Kevin Ngo notifications@github.com wrote:

> Make sure your codec is compatible with Chromium, which only has FOSS
> codecs.
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/2093#issuecomment-260461031,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/AGj-XrH-6H20Hf2pmGSMGn_vpjpPbLDdks5q-Mv1gaJpZM4KxzTH
> .
 isn't this due to stock Chromium lack of support for H264 / MP4?
 Thanks guys! When the stable Chrome (not Chromium) has WebVR abilities, will I be able to play this codec?
 yes - and supposedly there is some tricky way you can roll your own custom chromium build for testing that enables them
 Can you please link me to wherever you heard that?
  **Description:**

- A-Frame Version: 0.3.2
- Platform/Device: Windows/Oculus Touch
- Reproducible Code Snippet or Demo URL [highly encouraged]: Get https://aframe.io/a-painter/ to work with Oculus Touch controller models and input. 

 see https://github.com/aframevr/aframe/pull/2132  As the title says, video playback on mono 360 video on both safari/chrome is laggy/slow when in VR mode. Plays back fine on all other devices and in non VR mode on both browsers (ios safari, ios chrome). 

I saw that in the previous versions the poor quality vr mode on ios was due to an issue in safari with resize. The quality in this versions (.3.2) vr mode on ios is much better. Only issue I've noticed so far is VR mode video playback.


- A-Frame Version: 0.3.2
- Platform/Device: iOS 10.2 Safari/Chrome, iPhone 6s Plus, 
- Reproducible Code Snippet or Demo URL [highly encouraged]: Will provide a stripped down link ASAP
 Creating a simplified version of my site showed me that its not 0.3.2 but something in the rest of my site (1 video sphere, 5 image spheres, and 26 2D videos that can be triggered to play on planes within the 3D scene). Playback of just my video sphere in 0.3.2 is smooth. 

Something must have changed. Going to chase that down and will followup. 
  **Description:**
- Added FAQ per open issue request
- Fixed a typo in a code example
- Adjusted the a-ocean component property from "height" to "depth" since "height" does not have any effect (only width and depth affect the X & Z axes; Y axis is not adjustable by the component).
  Would be good to keep it coherent with existing stats component i.e. make the in VR mode display the situation (FPS at least) cf https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js#L29 rather than just hiding it.
 see #2162   This seems pretty reasonable. In the way we use Unity, we simply have "components", and "components that happen to be singletons and are accessed in a static way". Coming from this mindset, it seems more important that there is an easy way to access system instances, rather than some sort of automatic registration or association. 

This could look pretty close to your normal component + flag suggestion where we: 

1) Remove the existing system implementation
2) Adding a  `system: true` flag

Where the flag:

1) Enforces that the component can only go on the scene (effectively enforcing a singleton)
2) Automatically puts the instance of this component on `AFRAME.systems` when it is instantiated (instead of the definition)

Auto-instantiation seems like it might be tricky. I feel like it would be better to let users decide when they have a system on their scene (and this allows for non-optional configuration). 
 what @GavanWilhite said plus a "requires: [component, component]" property on components. This will make sure that singletons are created on scene as needed. 

Mind though that systems currently serve not only as singletons but also provide some execution order. At the very least they would have to be separated from common components and run on a different step, as is currently.
 @ngokevin yeah but if foo and baz have ticks() on them it is not guaranteed that the foo-system's tick() will run after the child components, as is the case right now with systems
  Addition of the Matrix4 property type for creation of Matrix4 objects to assist in the creation of quaternions.   not standard as suggested in the docs

**Description:**

- A-Frame Version:
- Platform/Device:
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  https://aframe.io/docs/master/core/asset-management-system.html#events

I understand that A-Frame nodes can emit a 'loaded' event, so that makes sense for `<a-asset-item>`, but then the documentation says "Images are a standard DOM element so we can listen to the standard DOM events." and then refers to a same-named 'loaded' event. I'm unaware of any standard DOM event 'loaded', only 'load'. Are the HTML <img> elements in <a-assets> augmented with a special A-Frame 'loaded' event which we should use, or should we stick with standard DOM event 'load'?

If the former, then the language should be changed from "Images are a standard DOM element so we can listen to the standard DOM events." to something like "A-Frame extends standard DOM elements, so we can listen to the 'loaded' event that nodes in A-Frame emit when they have finished loading.

If the latter, then the event name [here](https://aframe.io/docs/master/core/asset-management-system.html#lt-img-gt) should be changed to 'load'.

This is my first GitHub issue, please let me know of any mistakes.

- A-Frame Version: master, 0.3.2, 0.3.0  **Description:**

Minor fixes

**Changes proposed:**
- Broken link
- The 1-unit plane entities were overlapping due to insufficient margin in the example code, so upped it to 1.5 units to give them some spacing

  A-frame API is quite explicit rather than implicit so I would make it an attribute of `<a-sky>` primitive. But given the `<a-sky>` primitive is just a sphere I don't know if something like this can be expressed by the primitive API. Does it make sense, @ngokevin?  **Description:**

Fix broken link in text
  **Description:**

Just fixes a markdown typo around the link to the minified K-Frame source.

 The link is currently broken on the [live page](https://aframe.io/docs/0.3.0/guides/building-with-components.html#using-third-party-components). The `k-frame.min.js` link in the **Using Third-Party Components** section points to `https://aframe.io/docs/0.3.0/guides/kmin`, which is a 404. The current/broken markdown is `[k-frame.min.js](kmin)`. `kmin`, not being a fully qualified URL, is being treated as a relative link from the current page.

The majority of the links on that page are using variable substitution in the form of `[displayed text][variable for href]`. If you look at the other links in that same section (and really the whole file), they are in this format. The variables are defined at the bottom of [the markdown file](https://raw.githubusercontent.com/aframevr/aframe/master/docs/guides/building-with-components.md).
  It would be so great to have it! The way I have seen reduced modes used lately is for webcam image insertion when not set up to do full mixed reality capture.  So maybe mono-full spectator with optional webcam p-in-p would be nice for that  **Description:**
On the iPhone SE, VR mode won't go to fullscreen. The navigation bar stays visible (see screenshot).
This problems occurs in Chrome as well as Safari. 

![screenshot-iphone-se](https://cloud.githubusercontent.com/assets/1700302/19977502/1643ff78-a1f4-11e6-8b90-56dc2d902106.jpg)

- A-Frame Version: 0.3.0
- Platform/Device: iOS10 / iPhone SE
- Reproducible Code Snippet or Demo URL [highly encouraged]: https://aframe.io/examples/showcase/sky/
 Thanks for your response!

I recreated the A-Frame example to play around with setting window.scrollTop to 0.
It didn't work out for me.. Ended up with this piece of code (demo: http://vr.kevindh.nl):

```
<html>
<head>
  <title>A-frame example</title>
  <script src="https://aframe.io/releases/0.3.0/aframe.min.js"></script>
</head>

<body>
  <a-scene>
    <a-sky src="R0010471.JPG" rotation="0 -130 0"></a-sky>
  </a-scene>

  <script type="text/javascript">
  var scene = document.querySelector('a-scene');
  scene.addEventListener('enter-vr', (event) => {
    window.scrollTop = 0;
  });
  </script>
</body>
</html>
```

Still showing the navigation bar in VR mode like this:

<img width="654" alt="screen shot 2016-11-10 at 22 38 31" src="https://cloud.githubusercontent.com/assets/1700302/20195363/87c06996-a796-11e6-8852-195f459618ae.png">

Any ideas?
From this point I'm pretty unsure what to do, but if I can do anything to contribute to solve this problem.. I'm happy to help.
  **Description:**
Fix a broken link in the 0.3.0 docs.

**Changes proposed:**
- small change to link

  **Description:**
add link to support page on aframe.io under find out more:
**Changes proposed:**
-
-
-

  **Description:**

I'm writing a A-Frame DOM->JSON scene save/loader.

OBJ-Models that have property "obj: url(assets/asset.obj)" (and mtls) get their sources trimmed. When iterating through the elements, you get something like this:

    Object {mtl: "assets/asset.mtl", obj: "assets/asset.obj"}

When loading this back as an element by doing:
    element.setAttribute( propertyName, propertyObject );

A-frame will throw an error:

    aframe.js:62939 Uncaught (in promise) DOMException: Failed to execute 'querySelector' on 'Document': 'assets/BlackCW_Rand_LOD0.mtl' is not a valid selector.

This is because 

1. The url('') part is stripped and

2. This function

    function assetParse (value) {
      var parsedUrl = value.match(/\url\((.+)\)/);
    ...

is too lax with matching url() and when that fails it looks for an element id immediately. 

What I think A-Frame should do is match the url('') part, then if that fails, match the hashtag ('#') part for an existing element, then finally if all else fails, simply load the argument as the url.

Either that, or provide the original, unmodified string with the url('') in-tact. 





- A-Frame Version: Master
- Platform/Device:
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  **Description:**

When you are inside A Painter and click "V" to automatically save a snippet of the painting. Immediately after 2-3 seconds the user experiences a lot of bright vertical and horizontal lines inside Vive which makes the application unplayable. This is NOT reflected in the external monitor. Only inside the VIVE. Was reliably reproducible in the version I tested till day before yesterday.

- A-Frame Version:

Using https://aframe.io/a-painter/ (date: 28-30 November)

- Platform/Device:

HTC Vive / Chromium Sep 23 version.

- Reproducible Code Snippet or Demo URL [highly encouraged]:

Can't.
The device used is VR Ready setup from Mozilla Berlin office. With Chromium downloaded and configured on 27th October.  Its appear that `init()` is getting called with `this.data` not populated when it is early-instantiated via the dependency logic.

`this.data.foo` will be undefined in `init()` for this entity `<a-entity component-that-is-depended-on="foo: bar" component-with-dependency></a-entity>`

https://github.com/aframevr/aframe/blob/master/src/core/a-entity.js#L358

My guess is that the solution may end up involve retrieving the `attrValue` if `isDependency` is `true` before calling this:
https://github.com/aframevr/aframe/blob/master/src/core/a-entity.js#L331 Investigating..
 So here is a example for the issue: http://codepen.io/team/altspacevr/pen/395fe11ce0019dba71d64ba6ccc39507/?editors=1000

Trying to play with your test to tell. The reverse order from what you have there is the issue I am pointing at. I tried flipping the order of your calls, but that doesn't affect the test. My guess is that it may have something to do with how the HTML is parsed vs JS setAttribute calls. 
  In Three.js, "renderer.getMaxAnisotropy()" makes it easy to set anisotropy to the max supported value. I wasn't sure how to do this in A-Frame and often set it to 16 (the value for my GPU). Something like `anisotropy: max;` or `anisotropy: auto;` would be nice.

[Anisotropy example (16x vs default)](https://bl.ocks.org/bryik/a82893253ea55f401af114778bc5453b).

**edit:** come to think of it, maybe 16 is the standard max? I'm not sure how much this actually varies in modern GPUs
 after the last set of custom shader changes, do we still have the issues originally described?  multi-texture custom shaders should be easily doable now... @donmccurdy right, I had gone to the assumption that those interested in such things would go directly to custom shader and avoid `material` altogether  **Description:**

- A-Frame Version: 0.3.2
- Platform/Device: node.js

I wanted to make an aframe demo with react using [next.js](https://github.com/zeit/next.js) doing isomorphic rendering. Importing `aframe` won't work since node does not recognize the window global.

It would be great to adapt aframe to work with node so it can be used on isomorphic apps
 @ngokevin @impronunciable I have created a repo [https://github.com/ltfschoen/react-fluxible-test](https://github.com/ltfschoen/react-fluxible-test) that shows how to incorporate A-Frame React into a Fluxible app (i.e. uses isomorphic architecture with server-side rendering) #2484 should get you almost all the way there.  **Description:**

**Changes proposed:**
-
-
-

 yup
  **Description:**

- A-Frame Version: master - `<script src="https://rawgit.com/aframevr/aframe/master/dist/aframe.min.js"></script>`
- Platform/Device: `Chromium Version 55.0.2842.0 (64-bit) Aug 29 WebVR build`, `Windows 10`, `HTC Vive`, `Steam VR Oct 10 Build`
- Reproducible Code Snippet or Demo URL [highly encouraged]:
`index.html` from:
[http://bl.ocks.org/micahstubbs/8b86aabbae0c849d9e12f39d7df10eae](
![image](https://cloud.githubusercontent.com/assets/2119400/19845042/44bd496a-9ef0-11e6-95c5-6708d2eefc98.png)
)

good news 😃 when I `<ctrl> + <alt> + s` while in VR mode, aframe produced an image file for me and saved it in my windows downloads folder.

bad news 😅 it doesn't look like it's an image of my scene.  just all black (Windows preview)or all white (in Chrome) depending on how I open it 

[screenshot-a-frame - bl ocks - d3-1477891143292.png](https://cloud.githubusercontent.com/assets/2119400/19844999/e11b1a68-9eef-11e6-8e72-0b9621e433e8.pn)
![screenshot-a-frame - bl ocks - d3-1477891143292](https://cloud.githubusercontent.com/assets/2119400/19844999/e11b1a68-9eef-11e6-8e72-0b9621e433e8.png)
 one more blank screenshot image, this time taken from normal 2D mode, not in VR
`screenshot-a-frame - bl ocks - d3-1477959291419.png`
![screenshot-a-frame - bl ocks - d3-1477959291419](https://cloud.githubusercontent.com/assets/2119400/19875915/307d19b4-9f8e-11e6-84cc-cf05211d302c.png)
 👍 
  **Description:**
try write a clock or timer
- A-Frame Version: 0.3.0
- Platform/Device: Desktop Chrome
- Reproducible Code Snippet or Demo URL [highly encouraged]:

``` js
function ttimer(){
  var options = {
    hour: 'numeric',
    minute: 'numeric',
    second: 'numeric'
  };
  var el_ttimer=document.querySelector('#a-ttimer');
  var d = new Date();
  el_ttimer.setAttribute('text', 'text: '+d.toLocaleString("ru", options)+'; font: Droid Sans Mono; size: .77;');
}
setInterval(ttimer, 1000);
```

``` html
<a-entity a-ttimer position="-12 0 -5" id="a-ttimer"></a-entity>
```
# question

how update text smoothly? timer for example
how create new primitives in scene smoothly?
have you best practice for it?

ps
thanks
  **Description:**
ISSUE:
 I’ve tried to utilize a combination of assets on my scene which has lead me down the path of buffering and optimization in order to achieve a relatively smooth experience.

Specifically, I’ve tried to attach a 300mb .mp4 to a <a-videosphere/>, and even though the rest of the assets don’t present much of an issue, the video will freeze and hit download bumps every so often.

The conclusion: download all assets before starting the scene.

assets.js checks that all mediaElements have a combination of autoplay and preload=“auto” before buffering, but also, there is no way of monitoring the progress of the download of ALL assets (img, a-asset-item, mediaElements).

**Changes proposed:**
The goal is to have a progress bar that feeds from easily-accessible data.

I decided to make a global object that holds individual loaded/total combinations per asset and triggers a function that adds up all these values to estimate a percentage of progress.

To the current structure of assets.js, I added a few lines that do the following:
- I created the global object assetsElement
- within createdCallback in registerElement(‘a-assets’) I added this.loadedData = 0; which makes progress updates easily accessible
- I add any xhr items to assetsElement
- created a new callback to the xhrLoaded which updates values to assetsElement object for any <a-asset-item>
- I removed the validation for the existence of autoplay in mediaElementLoaded(el), instead, it only checks if preload==‘none’
- in function checkProgress() I add new mediaElements to assetsElement object
-  in checkProgress(), after running through the buffer cycle,  assetsElement loaded value is updated for each mediaElement key
- Both in the xhrLoaded and the mediaElementLoaded the function assetsProgress() is used to add up all the loaded and total values of assetsElement, it returns a percentage which is used to update loadedData in the parentNode (<a-assets>).
- Finally, both the xhrLoaded and mediaElementLoaded emit(‘progress’) to the parentNode (<a-assets>)

USAGE:
- preload=“auto” for any media elements (img, video) will add it to the percentage tally. xhr's are added by default.
- the value of loadedData can be grabbed as follow:
  var loadingAssets = document.querySelector('a-assets');
  loadingAssets.addEventListener("progress",function(evt){
  if(this.hasLoaded){
      console.log(this.loadedData)
  }
  });

PROBLEMS:
- The only way to buffer audio files is by adding autoplay, which starts playing all the audio files at once from the beginning.  For now, I’ve left all audios with preload=“none” and no autoplay
- image file sizes should be accessible as well, just to be consistent.
 @ngokevin is there anything I need to do here?
 When I first removed the autoplay + preload combination I started getting an error related to asset items that didnt have a preload, which is why im treating no-preload tag the same as a "none".  Ideally all media should have a preaload value, but audios are tricky since they don't begin preloading unless autoplay is included, and if autoplay is added then they all start playing while the download is happening.
 That would be great.  I managed to get this working, but after it was
approved on GitHub Kevin dug a bit further and bumped into the same issues
I had found during my work: I can't get a percentage read on
HTMLMediaElements.

This forced me to group these loads in everything XHR and everything that
was media.  The goal of this was to be able to Cache media and minimize
future loads, but that's not happening.

Have you taken a look at the code?  I haven't touched on this for a while
(I jumped on mastering VR in after effects, learning Unity and learning
React)... but it'd be nice to get back on aframe.io

I have a huge interest in getting video to work right on WebVR, and this is
definitely and stepping stone in that direction.

On Wed, May 3, 2017 at 7:42 AM, chris van wiemeersch <
notifications@github.com> wrote:

> @jonalex <https://github.com/jonalex> let me know if you need help with
> this; I'm excited about this functionality
>
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/2027#issuecomment-298888023>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AHRhpbWEfJjhBFJzFOrtNIheNqsNr3Wxks5r2Gg_gaJpZM4KkWCP>
> .
>
  **Description:**
add link to README
**Changes proposed:**
## -add link to aframe.io's Device & Platform support page under `Find out more:`
## 

update forked repo
 Working on it now.

Just to clarify something. Is calling git pull on the upsteam/master to my
local master effectively the same as a rebase of my local master branch
with the upsteam/master branch because of fast-forward merging? Thanks

Renzo

On Sat, Oct 29, 2016 at 4:10 AM, Kevin Ngo notifications@github.com wrote:

> Closed #2020 https://github.com/aframevr/aframe/pull/2020.
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/pull/2020#event-840490940, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/ALEQE2mfJ8OTOqbVbmexkUSoRVzBmcq3ks5q4kiXgaJpZM4KjE3S
> .
  **Description:**
browser badges and support links
**Changes proposed:**
-add browser badges for chrome, firefox, opera, ie, safari
## -add links for additional information
 I'll create a new pull request. I realized that my branch was off the docs0.3.0 branch. I'm assuming I want to branch from master and make a pull request to master. Thanks.
  **Description:**

Fixed typo. #2015

**Changes proposed:**
  **Description:**

Hi, I'm new to A-Frame.

I think this line

https://github.com/ngokevin/aframe/blob/5af7916d8460d7f5ecc61fcdcbc9bf6d3afb6f0e/src/core/a-assets.js#L86

```
var src = src = this.getAttribute('src');
```

should be

```
var src = this.getAttribute('src');
```

correct?

If I'm right, I'll make PR to fix.
 I see, I'll make PR, thanks!
  Questions regarding workflow
Is the following is what you have in mind?

- When one clicks on the context the visual inspector script will be injected into the aframe scene
- It then invokes the visual inspector in the editing mode
  I wanted to throw in a suggestion for this alternative:

```
  AFRAME.registerComponent('component', function( context ){
    //  context = this in the old use-case
    //  anything in this closure is "private" unless returned
    const path = context.data.path;        

    context.el.addEventListener( 'model-loaded', function( result ){
      //  no "this" confusion
    });

    function tick( dt ){
      //  define a tick, with access to everything private
    }

    function reset(){
      //  even custom functionality
    }

    //  return anything required for components
    return {
      schema: {
        type: 'string'
      }          
      tick,                    
      reset,
    }
  });
```
- The function passed in IS the init function. It returns the object normally required by components.
- Allows for private state to be shared between utility functions (update, init, tick).
- Avoids "this" entirely
- Can be implemented as a parallel path if need be: AFRAME.registerComponentFn( ... )
- Or AFRAME.registerComponent can check if the second arg is a function, run that function and use it as its init object, extending existing code.

One last tiny bonus: init function can be passed important things like this, el, renderer, etc so component writers don't need to guess how to deference things like renderer (this.el.sceneEl.renderer...). The init function can pass that ( `function( context, scene, renderer )` ).
 Yup :) This is what I proposed, registerComponentFn or have registerComponent check if the second argument is a function, or I just create a thirdparty thing and use it myself. 

Anyway, I'm happy to articulate the issue and why I think this is an improvement. I first learned of writing JS without using this from Douglas Crockford in [this talk](https://www.youtube.com/watch?v=PSGEjv3Tqo0&t=6m) (timestamped link).

I'll be the first to admit it's "opinionated". But hey, what interesting person have you ever met that doesn't have an opinion?

# Issue 1: Callbacks and "this"

Here's a typical a-frame component:

```
  AFRAME.registerComponent('component', {        
    schema: {
      type: 'string'
    },
    init: function(){
    }
  });
```

Any time I want to get "data", I have to access "this". Say, then, I need to write callbacks and then use "data":

```
      this.el.addEventListener( 'model-loaded', function( event ){
        event.detail.model.material.color.setHex( this.data );
      });
```

Oops. "this" refers to the function callback. This is one of the most common pitfalls for beginners in JS. So instead, I may try to do the ES6 arrow function (or fall back to "bind" in older browsers):

```
      this.el.addEventListener( 'model-loaded', ( event )=>{
        event.detail.model.material.color.setHex( this.data );
      });
```

A common strategy is to defer "this" into "that"?

```
    const that = this;
    this.el.addEventListener( 'model-loaded', function( event ){
      event.detail.model.material.color.setHex( that.data );
    });
```

That's a bit confusing to read since you have to have two separate "this" to keep track of in your head. Instead, let's simply deference what we need:

```
      const data = this.data;
      this.el.addEventListener( 'model-loaded', function( event ){
        event.detail.model.material.color.setHex( data );
      });
```

But why do this deferencing? Couldn't a function just have passed me this data?

```
    function( data ){
      this.el.addEventListener( 'model-loaded', function( event ){
        event.detail.model.material.color.setHex( data );
      });
    }
```

In fact, let's go a step further:

```
    function( el, data ){
      el.addEventListener( 'model-loaded', function( event ){
        event.detail.model.material.color.setHex( data );
      });
    }
```

Boom. This is totally gone. Was there ever a need for "this" to begin with? Other than attaching everything in it as a bundle? Instead, if we're fancy with ES6 [destructuring](https://simonsmith.io/destructuring-objects-as-function-parameters-in-es6/):

```
    function( { el, data } ){          
      el.addEventListener( 'model-loaded', function( event ){
        event.detail.model.material.color.setHex( data );
      });
    }        
```

That's a single object (what used to be "this") passed into the argument parameter (context) and now we have both el and data, free from deferencing.

# Issue 2: Sharing State

Back to our initial example, we're adding a tick function to our component:

```
  AFRAME.registerComponent('component', {
    schema: {
      type: 'string'
    },
    init: function(){
    }
    tick: function(){
    }
  });
```

Our component needs an animation mixer:

```
    init: function(){
      const mixer = new THREE.AnimationMixer();
      //  set it up
    }      
```

Tick needs to access it, but has no way of doing so. We've been forced to attach it to the only shared space, "this":

```
    init: function(){
      this.mixer = new THREE.AnimationMixer();
      //  set it up
    }

    tick: function( dt ){
      this.mixer.update( dt );
    }
```

In a closure, this is very easy to understand:

```
    function init(){
      const mixer = new THREE.AnimationMixer();
      function tick( dt ){
        mixer.update( dt );
      }
      return {
        tick
      };
    }
```

This has the added bonus of hiding the mixer (private, in the closure) until users of this component absolutely has to have it. If it turns out we need to expose it, we can do this:

```
    function init(){
      const mixer = new THREE.AnimationMixer();
      function tick( dt ){
        mixer.update( dt );
      }
      return {
        tick,
        mixer
      };
    }        
```

Anyway, I don't really have a dog in this race. This is just my 2cents, and how I write code, and yes it's my opinion that it's far superior to using this unless it's for performance reasons.
 So I went ahead and tried it myself to see if it was feasible. It, kind of is?

Here's my fork: https://github.com/mflux/aframe
Not sure how you're supposed to try forks. I'll leave that up to you.

There's an example that uses this:
https://github.com/mflux/aframe/tree/master/examples/boilerplate/hello-world-componentfn

My modified registerComponentFn function:

```
module.exports.registerComponentFn = function (name, fn) {
  var NewComponent;
  var proto = {};

  const definition = fn();

  if (name.indexOf('__') !== -1) {
    throw new Error('The component name `' + name + '` is not allowed. ' +
                    'The sequence __ (double underscore) is reserved to specify an id' +
                    ' for multiple components of the same type');
  }

  // Format definition object to prototype object.
  Object.keys(definition).forEach(function (key) {
    proto[key] = {
      value: definition[key],
      writable: true
    };
  });

  if (components[name]) {
    throw new Error('The component `' + name + '` has been already registered. ' +
                    'Check that you are not loading two versions of the same component ' +
                    'or two different components of the same name.');
  }
  NewComponent = function (el, attr, id) {
    Component.call(this, el, attr, id);
    const methods = this.setup({
      context: this,
      el,
      attr,
      id,
      sceneEl: el.sceneEl,
      scene: el.sceneEl.object3D,
      object3D: el.object3D,
      data: buildData(el, this.name, this.schema, attr)
    });

    for (let key in methods) {
      this[ key ] = methods[ key ];
    }

    if (!el.hasLoaded) { return; }
    this.updateProperties(this.attrValue);
  };

  NewComponent.prototype = Object.create(Component.prototype, proto);
  NewComponent.prototype.name = name;
  NewComponent.prototype.constructor = NewComponent;
  NewComponent.prototype.system = systems && systems.systems[name];
  NewComponent.prototype.play = wrapPlay(NewComponent.prototype.play);
  NewComponent.prototype.pause = wrapPause(NewComponent.prototype.pause);

  components[name] = {
    Component: NewComponent,
    dependencies: NewComponent.prototype.dependencies,
    multiple: NewComponent.prototype.multiple,
    parse: NewComponent.prototype.parse,
    parseAttrValueForCache: NewComponent.prototype.parseAttrValueForCache,
    schema: utils.extend(processSchema(NewComponent.prototype.schema)),
    stringify: NewComponent.prototype.stringify,
    type: NewComponent.prototype.type
  };
  return NewComponent;
};
```

Some notes:
- This only works because I had access to Component.prototype. Since it's not exposed anywhere normally on AFrame's namespace, I couldn't write a stand-alone version. If AFrame exposed Component.prototype, I could write a version that's used by third-parties without any other modification to AFrame.
- The function that's passed into AFRAME.registerComponentFn can't actually be the init function because at this stage we're still registering the component. To get around this, I created a "setup" function that gets returned (along with schema). It's not perfect but it works.
- Setup is called on the NewComponent's constructor. Setup returns an init, tick, and anything else and over-writes the prototypes defaults. This is not as fast as calling prototypes, as benchmarks will tell you, but it's good enough for me.
- I couldn't figure out how to initialize buildData for multi-variable schemas. It just doesn't work until I hit updateProperties (but that calls init() so I can't do that before my setup()).

Here's example component:

```
AFRAME.registerComponentFn('test-component', function(){

  function setup( {context, el, attr, id, scene, object3D, data } ){

    console.log( el );
    console.log( object3D );
    console.log( scene );
    console.log( data );

    const mesh = el.getObject3D( 'mesh' );

    const clock = new THREE.Clock();
    const speed = data;

    function init(){

    }

    function tick( dt ){
      mesh.material.color.r = Math.abs( Math.sin( clock.getElapsedTime() * speed ) );
    }

    return {
      init,
      tick
    };
  }

  return {
    setup,
    schema: {
      type: 'float'
    }
  }
});
```

Notes:
-  I really like writing components this way what can I say...  AFrame can be configured to return a bunch of commonly used things to setup() and I just extract them in setup's function argument. 
- Anything declared inside setup() is global only to the component itself and accessible by tick, play, pause, update, etc. 
- Anything declared in the function passed into registerComponentFn is also global to all components of this type, which is really cool because you can have "systems" that handle load order, or batch meshes together of the same component type. You can have one OBJLoader for all obj-models here. You can also define constants for all same-type components.

My conclusions from this exercise:
- I haven't ran benchmarks but I'm willing to bet this will have a performance cost. This might be a deal-breaker for some people.
- IMO it's much more flexible and cleaner than "this" mess. It's functional, and uses language features better.
- A stand-alone version of this is impossible to write without small changes to AFrame (Component.prototype needs to be exposed... probably).
  Experiencing similar problems on Android (HTC 10). Attached screenshots show Aframe (left) compared to a native android application (right)
![issue_aframe](https://cloud.githubusercontent.com/assets/14555156/19935834/bccf0c18-a11b-11e6-8a73-04200a5f6928.jpg)
.
 I'm experiencing what I think is the same issue on both Android (Moto X 2014) and iOS (iPhone 6). Cardboard view is very pixellated. Here's a screenshot from the Android: 
![pixelratio1](https://cloud.githubusercontent.com/assets/1204802/20431386/fe90c2ec-ad99-11e6-948a-1c48fcc65fca.png)

As a hack, I tried to change the pixel density from `renderer.setPixelRatio( 1 );` to `renderer.setPixelRatio( 3 );` in https://github.com/aframevr/aframe/blob/master/vendor/VREffect.js#L128. This drastically improves the visuals:

![pixelratio3](https://cloud.githubusercontent.com/assets/1204802/20431433/3988e1b8-ad9a-11e6-96fa-4c381f25ebdb.png)

however performance takes a huge hit, and cardboard view is very stuttery.

You'd presume this is natural since the first one has a `canvas` of 640x360 and the second one has a full HD 1920x1080 `canvas`. However [this photosphere aframe example](https://aframe.io/examples/showcase/sky/) also runs at a buttery smooth full 1080p `canvas`, I remote debugged to verify and here's the markup output: 

```
<canvas class="a-canvas a-grab-cursor fullscreen" data-aframe-canvas="true" width="1920" height="1080" style="position: absolute; top: 0; left: 0; width: 640px; height: 360px; border: 0; margin: 0; padding: 0 10px 10px 0;"></canvas>
```

I also compared with the latest 0.4.0 version running locally at http://192.168.1.35:9000/examples/boilerplate/panorama/ and there appears to be a noticable performance decrease compared to the https://aframe.io/examples/showcase/sky/ version. 

Any tricks, workarounds, ideas as to what I might be doing wrong? Thanks aframe wizards!
 I'm having the same issue on an iPhone 7plus with iOS 10.2 I'm pretty interested in helping with this. Would love iOS support to be fixed for all the projects I'm currently working on – nearly 50% of our customers' use cases require an iOS device + cardboard.

What can I do to help push this along? @ngokevin Is this confirmed to be a WebVR polyfill bug?  Sounds as though there are multiple popular models not accommodated;
perhaps we can accumulate affected models not present in
https://github.com/googlevr/webvr-polyfill/blob/master/src/dpdb/dpdb-cache.js
(and ideally correct values to be used as well)
? e.g.
https://github.com/borismus/webvr-boilerplate/issues/146

https://github.com/googlevr/webvr-polyfill/issues/164
Galaxy S7 family is missing too

https://github.com/googlevr/webvr-polyfill/issues/129 Ah. I'm experiencing it on an iPhone 6. Didn't realize that it would be so device specific. I'll take a closer look. Thanks for pointing me in the right direction @machenmusik! There appear to be two avenues to fix
(1) fork webvr-polyfill, modify cache values (or the generated js) and use them
(2) get them to update the DPDB values online and in cache I created a PR with some device settings I found in various GH issue threads:
https://github.com/googlevr/webvr-polyfill/pull/183

@ngokevin shall we wait a couple of days to see if they implement this, or do you want me to create a new npm package? If the latter, what should I call it (aframe-webvr-polyfill)?

If I go the new package route, what should I do about the `ONLINE_DPDB_URL` URL?
https://github.com/googlevr/webvr-polyfill/search?utf8=%E2%9C%93&q=ONLINE_DPDB_URL
My preference would be to just disable it and then keep the package up-to-date with any new devices as they are reported. I am wondering if this issue and [2117](https://github.com/aframevr/aframe/issues/2117) are related or not. I don't know the xdpi and ydpi values for the iPhone 6 or 7+, but the Android phone above (HTC 10) is not in the DPDB cache. So it is not clear if updating the DPDB cache will solve this issue as well, or only the stereo rendering issue in 2117. @ngokevin Yeah, iPhone 6 is affected. It's fine using Aframe v0.3.2 but not in 0.4. @ngokevin @ryanbetts See my recent post in issue [2117](https://github.com/aframevr/aframe/issues/2117#issuecomment-271859295). It seems that issue and this one are not related.

v0.3.2 was using v0.9.15 of the webvr-polyfill, while 0.4.0 is using 0.9.23 or higher. I checked the repo and quite a few changes were made since 0.9.15. Unfortunately my knowledge of the WebVR internals is not good enough to try and figure out which of those changes started causing the issue. However, given that Kevin first posted this issue on 26 October, I presume the modification happened [around or after v0.9.21](https://github.com/googlevr/webvr-polyfill/commits/master?after=Y3Vyc29yOsgoZn5T6%2B5isKMAu9z1ZdOtiII8KzM0) which was released on 8 October and before 0.9.22 on 31 October. Curiously there were versions 0.9.3 and 0.9.4 released in between those two, and then they picked up the old number sequence again.

The largest chunk of changes (486 additions) was [this commit](https://github.com/googlevr/webvr-polyfill/commit/a6071733261a8bd3ffc7b24239e589bd7646b50d) that lead to the 0.9.3 release on 11 October. I can confirm that on iOS 10.2 with iPhone 7+ reverting back to aframe 0.3.2 fixes the issue. @ngokevin wrote on 4 Jan:
> Thanks! Yeah, we can give it a couple of days.

Well, they merged my [PR](https://github.com/googlevr/webvr-polyfill/pull/183), but it has not been released into a new distribution (remaining at 0.9.25 in NPM). Also, still no reply from the WebVR guys to my offer maintain the DPDB list: https://github.com/googlevr/webvr-polyfill/issues/184

Does it make sense to take the drastic step to fork the WebVR polyfill repo and revert back to version 0.9.15 (same version 0.3.2 uses) to fix the issue here, and also deal with the Stereo effect issue ([2117](https://github.com/aframevr/aframe/issues/2117#issuecomment-271859295)) at the same time? Forking like this kind of sucks, but less-than-ideal A-Frame experiences in cardboard on the latest and greatest mobile phones is starting to get old.
 @thoragio 
I've tried to use a custom aframe v0.4.0 with webvr-polyfill v0.9.15, but unfortunately all I get is a white screen when entering VR. The same app works with 0.3.2 though. @nullcode I ran into the exact same problem. I'm glad to hear the problem is reproducible; I thought I was going crazy.

My assumption is that there is an issue with the dependencies. I think when the 0.3.2 distribution was compiled, the dependency versions for webvr-polyfill were different than what are currently being pulled through now when we compile our custom 0.4.0 builds. @thoragio have you found any working combination? I tried webvr-polyfill 0.9.16, master, v1.0.0 (from github tag). The last two does not split the screen in VR mode, very weird. @nullcode no, not yet. I haven't had much time to work on it. What I was planning to try next was to build 0.9.15 with the older versions of its dependencies. IIRC, there were only 2 or 3 and they had not seen too many changes since the release of 0.9.15 so mix-and-matching them to get the original combination will probably not take too many iterations.

I don't want to try building anything after 0.9.15 because I have no idea where the blurry-vision bug was introduced. I am experiencing same blurry/low res textures when browsing page on my Samsung Gear VR in Samsung Browser (webvr-enabled). Did try multiple aframe versions without any luck.
Desktop/Cardboard look nice and sharp. I am using draw component with text-wrap for displaying text. The text is so blurry its unreadable.  I noticed that aframe 2.0.0 displays my images sharp on iphone/android while 3.2.0/4.0.0 display fine on android but very blurry on iphone (safari/chrome). I figured this out guys, it was actually a bug in aframe, not webvr-polyfill, check #2352  Link above doesn't do the job for me in Chrome on HTC 10 with Android 7.

Aframe in Chrome:
![blurry-problem-aframe](https://cloud.githubusercontent.com/assets/14555156/23632272/76c80b7c-02c1-11e7-9701-24d01f0518c3.jpg)

Native Android cardboard viewer:
![blurry-problem-native](https://cloud.githubusercontent.com/assets/14555156/23632284/87136e4a-02c1-11e7-892c-35ed829f2b02.jpg)

Comparison (cropped):
![artboard 1](https://cloud.githubusercontent.com/assets/14555156/23632443/2ad0df4a-02c2-11e7-801b-815ef644f92d.png)


Maybe I'm just expecting too much though :) I was hopeful for a moment (to see some kind of improvement), but adding the antialias-attribute like `<a-scene antialias="true">` didn't change a thing actually. Oh okay, that makes sense! No problem, thanks for the effort! Same on Samsung S8 on Gear VR using Samsung Internet browser inside the headset.. Very blurry images and text its unusable.. BUT using the cardboard or without a headset in VR mode is crystal clear. ....  I've just noticed the same issue on S8 + GearVR especially when importing models. Adding antialiasing to the scene `<a-scene antialias="true">` actually helped quite a lot.  typo: Raycasters ignore invisible materials
  Hello, I'm new to contributing to open source software. How can I help with this and who do I contact?
 Found the Contributing guidelines right after I posted that. My bad and thanks!
  The sound in a 360 degree video is not tracked. If you make a video with the Gear 360 and play it in the Gear VR the Oculus software is tracking the sound when you move your head. Is this possible with Aframe?
 So, demux video and sound and position both in the same direction with Aframe? I guess it would work if both are in sync when the video and sound start playing. I will experiment with it, thanks.

I wonder if the Gear 360 records binaural sound.
 No they were not taken with professional rigs .When you take a video with the Gear 360 it has sound tracking in the Gear VR (I have both). However the video's don't have sound tracking on youtube, for instance. I did see a video once taken with the LG 360 cam that had sound tracking on youtube.

But I think you're right in saying that they don't have binaural recording capacities.
  @ngokevin Thanks for logging this. I remember how long it took for me to figure out that was the cause initially. It should save people some time.
  **Description:**
my components, working fine in aframe 0.2.0 no longer work in 0.3.0 or 0.3.2 
more than that, the "happyface example" works in firefox on 0.3.0, not in 0.3.2

I have no clue why upgrading break them. I get no feedback in the error console...
- A-Frame Version: 0.3.0, 0.3.2 
- Platform/Device: chrome/firefox on mac
- Reproducible Code Snippet or Demo URL [highly encouraged]:

http://64.137.164.54:3000/0.3.2
http://64.137.164.54:3000/0.3.0
http://64.137.164.54:3000/0.2.0
  Caveat: I'm new to A-Frame and don't understand all the implications of why this design decision was made. But I'm approaching it trying to incorporate A-Frame into an existing Webpack application where we're trying to avoid adding `window.stuff` and instead keep everything scoped inside the modules that use them.

The `window.AFRAME` global runs counter to that pattern.

I know it's possible to `import AFRAME from 'aframe'` in an individual module, so that we don't have to introduce a new global to our `.eslintrc`. But that doesn't prevent `AFRAME` from being exposed as a global at all, and opens us up to all the possible bugs and issues that come with that.

The problem with changing this, from what I understand, is that the ecosystem depends on `AFRAME` existing as a global; i.e., third-party components don't need to be ES6 or CommonJS modules that `import AFRAME from 'aframe'` or `var AFRAME = require('aframe')` — they just work. And that's necessary for making third-party components available in environments that don't use NPM or a module system, and everything needs to be imported with `<script>` tags.

I'm coming from the React world where third party components are pretty much all released as NPM modules, but I know that a lot of them also release versions that are backwards-compatible with `<script>` tagging.

Anyway, the last thing I want to be is the ES6 hipster bursting into this community and demanding we all do things differently around here, but I'm interested in knowing what people's thoughts are on this issue. I can see how it'd be a breaking change to make A-Frame conform to the hip new module patterns, but in codebases that use things, attaching a global can be a pretty big concern.
 Yeah, I guess the debate about whether _some_ things can be globals, or if _nothing_ can be a global, is philosophical in a Webpack 1.x context. What I'm concerned about is that A-Frame in its current form won't allow me to tree-shake.

Obviously to take full advantage of that I'd need to be able to `import { registerComponent } from 'aframe'` which is a bigger issue, but I think with an async bundle loader I can still defer loading the whole A-Frame library until after the page with A-Frame calls gets loaded.

Or maybe it'd just wait to attach it to the global until after, and then it'd be fine if it's still hanging around if the user clicks away from that part of the app. But it's still not something I have to worry about with most other large frameworks in the NPM ecosystem that aren't attaching themselves to the window.

Maybe it's not an urgent change; aside from some early tree-shaking build systems I can't off the top of my head come up with a killer app for switching over entirely to the module pattern. As those mature, though, I think it could be more of a pressing issue.
  Is Aframe compatible with the PS4? The PS4 UX seems to be based on webgl for the most part from what I read but I can not load sky spheres with equirectangular photo's in the web browser. The web browser is based on webkit. The vr symbol appears in the lower right by the way.

It would be nice to get this to work because of the PSVR headset release.

Version I tested was 0.2.0.
 [This guy](http://blog.greggant.com/posts/2016/04/07/exploring-and-developing-for-the-ps4-browser.html) says the PS4's browser does not support WebGL (blog post from April 7th, 2016).

FWIW, PsVita definitely doesn't work (tried it myself a few days ago).
 The PS4 actually scores the highest among consoles in WebGL speed, yet Sony appears to be blocking WebGL content purely out of some morbid fear that PS4 users might play HTML5-games with Xbox users.

![](http://i.imgur.com/JO0wWsE.png)
  This will add the badge to show its version on CDNJS and also link to its page on CDNJS!
 you're welcome
  Thanks for letting me know, will have a look. But I have to create a screenshot programmatically, not manually.
 Something like `document.querySelector('[screenshot]').components.screenshot.capture()` should work @chriscar
  **aframe 0.3.0**
Im trying to raycast from mouse location opposed to the center of camera. Is there a way to implement this currently? Ive moved my cursor to the mouse location and can "click" when I align the mouse and center of camera over my object. 

I found this component, but it is for pre raycaster functionality. 
https://github.com/mayognaise/aframe-mouse-cursor-component

Im going to keep pushing on it and working on my own component, but wanted to ask if anyone has had any success. 

Thanks
  **Description:**
I need to build a project which need to know which aspect is the user seeing.
- A-Frame Version:0.3.0
- Platform/Device:ALL
- Reproducible Code Snippet or Demo URL [highly encouraged]:
 simply the current direction the user is facing.The position attribute on a-entity is static in html.So if I use document.getSelectorAll(“position”) wasn't the user currently facing position.
 I know what's wrong with my code.I didn't get the camera's rotation, but get the static content inside the camera,so it would always be static null.
  I cannot get the "end" attribute in a-animation to stop the animation...

Currently i have the following Pen demonstrating the behaviour:
http://codepen.io/msj121/pen/obmvrE?editors=1111

The current code is as follows:

```
<a-cube position="-1 0.5 1" rotation="0 45 0" width="1" height="1" depth="1" color="#4CC3D9">
    <a-animation begin="mouseenter" end="mouseleave" attribute="rotation" repeat="10" easing="linear" dur="1000" direction="alternate" from="0 0 0" to="45 45 45"></a-animation>
</a-cube>
```

It does not work even if manually emitting the events as shown on codepen.
 Calling: stop() on the animation itself does indeed work, though it jumps to the end animation instead of stopping in the middle or finishing the animation. That can look very glitchy, but that is an enhancement.
 Calling a-animation.data, doesn't show an "end" value. even on the a-animation above which does have an "end" value
  **Description:**
Fails to show even hello world example,

http://imgur.com/a/b9fAg
- A-Frame Version: 0.3.2
- Platform/Device: 
  elementary OS 0.4 Loki (64-bit), elementary OS 0.4 Loki (64-bit), 
  Google Chrome   54.0.2840.59 (Official Build) (64-bit)
  Revision    5b2f167ccdaed3f1a90ec1084715fbb91b8d25b0-refs/branch-heads/2840@{#726}
  OS  Linux 
  JavaScript  V8 5.4.500.31
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  https://aframe.io/examples/showcase/helloworld/

JS console:

A-Frame Version: 0.3.2
index.js:64three Version: ^0.76.1
index.js:65WebVR Polyfill Version: 0.9.15
three.js:24764THREE.WebGLRenderer 76
three.js:28591THREE.WebGLRenderer: WEBGL_depth_texture extension not supported.
 Works with same system but Firefox browser. Same warnings in js console.
 Can't believe I didn't think to check that. None of the three.js examples work either. I guess its a chrome browser issue on Linux / Ubuntu / Elementary OS.
 For anyone that runs into this:

http://askubuntu.com/questions/299345/how-to-enable-webgl-in-chrome-on-ubuntu
  In the aframe.io examples, as the content is displayed in iframes, you need to add "allowvr" to the iframe attribute, otherwise you get the following error:

```
 DOMException: Access to VR devices is not allowed in this context.
```
- A-Frame Version: 0.3.2
- Platform/Device: Chromium 55.0.2869.0 (64-bit)
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  You can see it in the console for this web page:
  https://aframe.io/examples/showcase/spheres-and-fog/
  **Description:**

'raycaster-intersection' passes a reference to this.intersectedEls array. This means if a developer does something destructive, it breaks the behaviour of the raycaster. Should pass a copy of the array instead.
- A-Frame Version: master
- Platform/Device: all
- Reproducible Code Snippet or Demo URL [highly encouraged]:
  **Description:**
Trying to get the raycaster to emit events on videosphere but so far it never works. 

`document.querySelector('#video_sphere').addEventListener('click', function (evt) { console.log("video sphere clicked); });`
- A-Frame Version: 0.3.0
- Platform/Device: desktop
  **Description:**

Fixed the issue described in bug #1959 and added a test. 
  **Description:**

Moved in a couple more of the THREE.js properties WRT wireframes. 

The default width is set to 2 so that it looks cleaner on VR Headsets

If there are reasons for them not being included that is fine and I just thought it could be useful.

**Changes proposed:**

Allow standard and flat materials to use wireframes.
 Just checking you were interested before tests and docs, will do them now. :smile: 
  - A-Frame Version: 0.3.0
- Platform/Device: 56.0.2884.0 canary (64-bit)
- Reproducible Code Snippet or Demo URL:

I am using A-Frame with Angular 2.
http://plnkr.co/edit/NQhc7aQ9WmTmNEZFkHpA?p=preview

All images on page 1, 2 and 3 are supposed to be at the center of the screen.

When you drag the image on page 1, and then go to page 2. The location of image on page 2 will be affected (not in the center of the screen),  which is wrong.

Then when you go back page 3, the image is at the center of the screen which is correct.

So the issue is that `<a-scene>` will affect and only affect next page's `<a-scene>` position.
 Let me do a small test without Angular 2
  - A-Frame Version: 0.3.0
- Platform/Device: OSX/Chrome 53

Hello, 
Thanks for the fantastic product for VR/360!

I would like to show 2 A-Frames as a slideshow by using Slick Slider.
But nothing showed, and I removed Slick Slider, leaving just 2 basic sets of A-Frames with "embedded" attribute. The situation remained the same. 

Do A-Frame restrict only 1 in a page?
(For just 1, it works well!)

Thank you!
  **Description:**
The sentence didnt make much sense
## **Changes proposed:**
## 
## 

I think this might be a typo
  **Description:**
`<a-assets>` should move into `<a-scene>`, or it will show the error:

> aframe.js:60419Uncaught Error: <a-assets> must be a child of a <a-scene>

outside of CodePen.

**Changes proposed:**
move `<a-assets>` inside of `<a-scene>`, and update the demo link.
 you are welcome!
  I saw the demos are all using images to show text. It will be great to have something like text box.
 Thanks, that is very helpful!
 @ngokevin Thanks! Those are very helpful suggestions. It will be great to add these in the the A-Frame document.

Feel free to close this if need.
 Apparently, [ReactVR will use SDF font text](https://youtu.be/8BHOztuaj-4?t=16m33s). 

Displaying text is a common need, so it would be nice for A-Frame to have a built-in solution. Though @donmccurdy has a point about "different approaches [being] better for different things"; e.g. HTML-to-canvas for foreign languages.

Downsides of bmfont-text:
- character set is limited
- my implementation is hackey and the dependencies are complex
- components (color, opacity) do not work 'natively'
- [offset](https://github.com/bryik/aframe-bmfont-text-component/issues/14) and other issues
  **Description:**
- A-Frame Version: 0.3.0
- Platform/Device: Chrome 55.0.2849.0 canary (64-bit)
- Reproducible Code Snippet or Demo URL [highly encouraged]:

Orginally asked on [Stack Overflow](http://stackoverflow.com/questions/39936638/cannot-read-property-getorcreategeometry-of-undefined)

I am using A-Frame with Angular 2.

The code is simple, showing a curved image:

```
  <a-curvedimage src="https://upload.wikimedia.org/wikipedia/commons/b/be/Random_pyramids.jpg"
    position="0 2 -20"
    theta-length="72"
    height="2.6">
  </a-curvedimage>
```

Without Angular 2 router, it works well: [working plunker](http://plnkr.co/edit/pqmTU1yaISCijItyVytD?p=preview)

After adding Angular 2 router, I got the error below. [issue plunker](http://plnkr.co/edit/NiqSRd6hduE5yCboTVZs?p=preview)

> VM14540 aframe.min.js:75 Uncaught TypeError: Cannot read property
> 'getOrCreateGeometry' of undefined

[![enter image description here](http://i.stack.imgur.com/cR8Wf.png)](http://i.stack.imgur.com/cR8Wf.png)

And I found if I remove these two `theta-length="72" height="2.6"` in the issue plunker, it won't through the error.

I want to use `theta-length="72" height="2.6"` and the router together. What may cause this? Thanks
 @ngokevin can u copy your explaination from Stack Overflow to here. Here I can @ someone who may offer help.
 I had the same problem (but I'm using Meteor + React + aframe 0.3.1).

**I solved it by waiting scene to load before adding content into scene.**

This is how I check if scene is loaded:

```
let scene = document.querySelector('a-scene');
if(scene && scene.hasLoaded) { 
   // scene is loaded
}
```

Try to make setInterval or something.
 @perak thanks,

After changing to the codes below, it won't give error for me. I will ask around see if a there is a clean solution.

http://plnkr.co/edit/69TJZhkZUsG6aiNObsed?p=preview

``` html
    <a-scene>
      <a-curvedimage
        *ngIf="show"
        src="https://upload.wikimedia.org/wikipedia/commons/b/be/Random_pyramids.jpg"
        position="0 2 -20"
        theta-length="72"
        height="2.6">
      </a-curvedimage>
    </a-scene>
```

``` ts
  show = false;

  ngOnInit() {
    // not loaded

    setTimeout(() => {
      // loaded
      this.show = true;
    });
  }
```
 @ngokevin thanks for reminding the `loaded` event. And also thanks the help from @alxhub and @DzmitryShylovich on Gitter.

``` ts
<a-scene (loaded)="onLoaded()">
  <a-curvedimage
    *ngIf="show"
    src="https://upload.wikimedia.org/wikipedia/commons/b/be/Random_pyramids.jpg"
    position="0 2 -20"
    theta-length="72"
    height="2.6">
  </a-curvedimage>
</a-scene>
```

``` ts
show = false;
onLoaded() {
  this.show = true;
}
```

I guess this will be the final way. http://plnkr.co/edit/MkQkrneTXYcZ1w6YFoLm?p=preview
  I'm running into a blank white screen when I toggle on VR mode on some of the Vive examples. In addition, no video data is sent to my Vive. AFrame's APainter works but the following demos do not: 

https://apps.tlt.stonybrook.edu/hanoi/
http://tbaloo.com/tumbvr
https://ngokevin.github.io/aframe-draw/

Is this an issue on my end? Or was there an update that caused an issue with these VR demos? I ran into the issue locally as well using AFrame version 0.3.1. I'm also using Chromium version 55.0.2869.0. 
 @ngokevin That worked like a charm. Thanks 🎉 
 Hi, I made the Towers of Hanoi game (https://apps.tlt.stonybrook.edu/hanoi/) and just updated to A-Frame 0.3.2, and everything is working with the Vive once again. Just putting a note here for future reference 😃 
  **Description:**

Hi, 

The top and bottom of the code in the following section of the documentation is being rendered as text.

https://aframe.io/docs/0.2.0/components/geometry.html#defining-your-own-geometry

I don't think it's markdown else I would offer some solutions, but aesthetically speaking it should look like this.

```
AFRAME.registerComponent(‘my-geometry’, { // Called on component attach and data update. 

    update: function () { // Grab the mesh. 
             var mesh = this.el.getOrCreateObject3D(‘mesh’, THREE.Mesh);  // Provide your own geometry.
             var geometry = mesh.geometry = new THREE.Geometry();
             geometry.vertices.push(
                       new THREE.Vector3(-10,  10, 0),
                       new THREE.Vector3(-10, -10, 0),
                       new THREE.Vector3( 10, -10, 0) );

               geometry.faces.push(new THREE.Face3(0, 1, 2));
               geometry.computeBoundingSphere();

      }, 
      remove: function () {  // Called on component detach. 
            this.el.getObject3D(‘mesh’).geometry = new THREE.Geometry(); 
      } 
});

```

Thanks!
  Function leaveCurrentIntersection() on [this line](https://github.com/aframevr/aframe/blob/37c33d2cc88de369feff7027f3d1e24b305ef496/src/components/cursor.js#L106) doesn't exist. I changed it to clearCurrentIntersection(), it seemed working. 

Probably unrelated to this, but [this line](https://github.com/aframevr/aframe/blob/37c33d2cc88de369feff7027f3d1e24b305ef496/src/components/cursor.js#L139) doesn't seem right either as clearCurrentIntersection() doesn't take any argument.

BTW, not sure if anyone tried this component with raycaster as described [here](https://aframe.io/docs/0.3.0/components/cursor.html#configuring-the-cursor-through-the-raycaster-component), the object selector doesn't work.
- A-Frame Version: master
- Platform/Device: all
- Reproducible Code Snippet or Demo URL [highly encouraged]:
 Regarding the raycaster issue, I looked a little further at it, and this line looks suspicious

https://github.com/aframevr/aframe/blob/master/src/core/a-entity.js#L358

> self.initComponent(component, undefined, true);

It looks like that the raycaster component was initialized as a dependency, and the above line initialized it without its attributes. If that's right, chances are many other components may also be initialized without their attributes.
 Gonna take a look at this right now!
  **Description:**
I'm appending elements to my "a-scene" dynamically. When I try to setAttribute for position or various other aframe component properties nothing changes.  Whats weird is when I switched to aframe 0.2.0 it works. 

html: 

``` html
<head>
  <!-- aframe.js -->
  <!-- custom_components.js -->
  <!-- script_that_appends_elements_to_scene.js -->
</head>
<body>
  <a-scene> <!--<a-entity id="spawnedContent">---appended elements go here -------</a-entity>  --> </a-scene>

</body>
'''
inside my script:
var container = document.createElement('a-entity');
$(container).appendTo( "#spawnedContent");
container.setAttribute('position','0 0 -10');

- A-Frame Version: 0.3.0
- Platform/Device: desktop

```
 Just tried, same result in 0.3.0
![aframe](https://cloud.githubusercontent.com/assets/4534991/19017286/5f2c4102-87e9-11e6-9383-8e0d967ceca5.PNG)

but when i switch to 0.2.0
![aframe2](https://cloud.githubusercontent.com/assets/4534991/19017293/8696b66e-87e9-11e6-9228-5883580b1708.PNG)
 Thanks!
  **Description:**
In ios 9.3.5 safari couldn't full screen.Safari's tab bar and title bar still on it.So vr mode seems not good.
- A-Frame Version:0.3.0 & 0.3.1
- Platform/Device:iPhone6plus ios 9.3.5 safari
- Reproducible Code Snippet or Demo URL [highly encouraged]:http://www.fanoi.com/webvr/release/index.html
 Finally I found that safari with more than one tab would fail to full screen.
 Sorry but set what to hide? I've got the same problem with 0.3.0 and iOS Safari. Title and tab bars stay on always. I'm still running on iOS 9.3.5 (same as above report), on an iPhone SE. There are no options to hide the tab and title bars.
 Will try. Thanks.

And... no. Doesn't work. :( Although I may be calling this at the wrong time:

```
  <body>
    <a-scene>
      <a-sky src="puydesancy.jpg" rotation="0 -130 0"></a-sky>
    </a-scene>
    <script>
      window.scrollTop = 0;
    </script>
  </body>
```

Probably needs some event listener setup. Which makes me wonder: **what events are generated when we enter/exit stereo mode?**
 Same problem here. Also not working with the examples on aframe.io.

Testing with WebVR Sampels it works though. I also tried to copy the meta tags from there, didn't help:
```
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
```

Is there any solution? The Safari devs (and Apple?) are to blame for this issue and I don't see how aframe could fix that. That said, I've worked around the problem by saving all (aframe) sketches to the home screen on my iPhone. I would close this issue if I were you. @gamecubate 
I don't agree, as said if I use those examples: https://webvr.info/samples/ I am able to get to fullscreen (in Safari). I can still drag the navigation bar by dragging the page, but at least initially it is in fullscreen. So there seems to be a way, right? I didn't manage to figure out how though. I found a workaround for everyone who is interested:
https://github.com/aframevr/aframe/issues/2577#issuecomment-296100258  While using A-Frame for a panoramic image I noticed that the image wasn't rotating properly. After some investigation I noticed that it wasn't reading the xmpmeta data to figure out the correct orientation.

Here is an example: http://codepen.io/steven10172/pen/vXJZzE
Here is the desired behavior: http://www.joshuanaylor.com/pannellum/

The pannellum library has a method [(method source)](https://github.com/mpetroff/pannellum/blob/master/src/js/pannellum.js#L445L535) that reads the tags on the image to see what the proper heading, horizon pitch, and horizon roll should be set to.
 This also looks like it does the correction calculations: https://github.com/mpetroff/pannellum/blob/master/src/js/libpannellum.js#L464L490
  It's definately needed, I've hacked the update() functionality in the postproc PR but reusing the Component prototype makes more sense
  **Description:**
- A-Frame Version: aframe-v0.3.0.js
- Platform/Device: Android WebView
- Reproducible Code Snippet or Demo URL [highly encouraged]:

A-Frame used to work fine in version 0.2.0
My app runs by default in fullscreen.

When I try clicking on the Enter VR button this error is output in the console:

`a-scene.js:175 Uncaught (in promise) Error: Failed to enter VR mode (`requestPresent`): Unable to present.(…)enterVRFailure @ a-scene.js:175`
 Possibly related to:  #1933
 Also related to https://github.com/borismus/webvr-polyfill/issues/114
 This might be a tricky one. I have bypassed the fullscreen problem, then a problem with the orientation lock not being available on the webview.

The Enter VR mode button then disappears for the rest of the session, without leaving any console log.
Not really sure what to do with that one... Something is clearly not firing when it should be.
 Just the same thing happens to me (same console output) + "Enter-VR" not possible in Chrome 4.2 on an Android LG 5. However with Chrome 4.3 (Beta) works ok...
 I think that is because Chrome Beta supports the WebVR 1.0 spec and prod does not.

Eventually, the webview will support the spec, but there will still be problems with a-frame because of the fullscreen indicator and orientation lock code.
 This is still broken in v0.4.0 and on the master branch. In v0.2.0 it was working perfectly.   **Description:**
## **Changes proposed:**
## 
## 

"fusing" doesn't work, while "cursor-fusing" does, as mentioned in the cursor docs
  How to listen e.g. OBJ loader loading progress?
We know all loaders in aframe were using THREE.XHRLoader( url, onLoad, onProgress, onError ), which has 'onProgress' to handle XHR progress event. But in aframe, loaders just call THREE.XHRLoader( url, onLoad) with first two vars. Giving us no API to handle loading progress.

I think we need add some apis to do that.
 +1
  Hi!

I'm building a WebVR app for mobile using Apache Cordova and, obviously, aframe. This app will systematically be used with HMD on, so I wanted to have the VR mode enabled at startup. I used the `enterVR()` method, but I get a `Failed to execute 'requestFullScreen' on 'Element': API can only be initiated by a user gesture.` warning that prevents me from doing so. The thing is cordova already handles the fullscreen stuff, so I really do not need it to be enabled.

Is there already some option or property to disable this behaviour for specific kind of case like mine ? If not, I'd be happy to help if you would point me out to the right direction. I've looked a bit into aframe sources and couldn't find any reference to the actual method call that triggers this fullscreen API.

Thanks !
- A-Frame Version: `0.3.0`
- Platform/Device: Samsung Galaxy S7 / Cordova
- Reproducible Code Snippet or Demo URL:

Simply open [an example](https://aframe.io/examples/) in your (Android) mobile browser, plug it in your computer and [open the console](https://developers.google.com/web/tools/chrome-devtools/debug/remote-debugging/remote-debugging). Type `document.querySelector('.a-enter-vr-button').click()` and feel my sorrow 😢
 Thank you !

If this is ok with you, I can submit a PR that would basically just add a `noFullScreenVR` property to the `a-scene` entity and check for it before calling the `requestFullScreen`.

The warning does prevent the stereo mode. I'm not sure I understand what you mean by `detect a fullscreen/native/pinned context` though :/
 Well, this is not only cordova related. For instance, this could be useful for other hybrid mobile app frameworks, but also for nw.js or Electron. In fact, any web app that can run outside a proper "browser" and thus can handle at a higher level the process of making the page fullscreen.

Couldn't we just check `(window.innerHeight === window.screen.height && window.innerWidth === window.screen.width)` ? I think this would be a correct way to detect if the app is already in fullscreen or not. What do you think ?
 After some research and attempts in aframe, found out this is related to webvr-polyfill. Also found that [someone raised the issue in June](https://github.com/borismus/webvr-polyfill/issues/114) and bumped it.
  **Description:**
The opacity parameter in the sphere primitive seems to be breaking at least on the iPhone 6s.
- A-Frame Version: 0.3.1
- Platform/Device: iPhone 6s
- Reproducible Code Snippet or Demo URL: http://words2map.com (working example, currently with opacity commented out)

Code, with opacity included:

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>3D Data Visualization for Virtual Reality with Words2Map</title>
    <script src="js/aframe.min.js"></script>
    <script src="https://rawgit.com/bryik/aframe-bmfont-text-component/master/dist/aframe-bmfont-text-component.min.js"></script>
    <script src="https://rawgit.com/ngokevin/aframe-look-at-component/master/dist/aframe-look-at-component.min.js"></script>

  </head>
  <body>
    <a-scene fog="type: linear; color: #FFFFFF; far: 40; near: 0">
      <a-entity position="0 0 0" rotation="0 0 0" id="root_entity"></a-entity>
      <a-entity camera look-controls wasd-controls position="0 0 0" rotation="0 0 0"></a-entity>
      <a-sky color="#FFFFFF"></a-sky>
    </a-scene>

    <script>
      function add_nodes(words, positions, colors) {

        for (i=0; i<positions.length; i++) {
            // sphere
            var sphere_base = document.createElement("a-entity");
            sphere_base.setAttribute("position", positions[i]);
            var sphere = document.createElement("a-sphere");
            sphere.setAttribute("position", "0 0 0");
            sphere.setAttribute("radius", "0.8");
            sphere.setAttribute("color", colors[i]);
            sphere.setAttribute("opacity", "0.9");
            sphere_base.appendChild(sphere);
            document.getElementById("root_entity").appendChild(sphere_base);
            // word
            var word_base = document.createElement("a-entity");
            var sphere_position_for_word = positions[i];
            var xyz = sphere_position_for_word.split(" ")
            var x = parseFloat(xyz[0])
            var y = parseFloat(xyz[1])
            var z = parseFloat(xyz[2])
            var rho = Math.sqrt((x*x) + (y*y) + (z*z));
            var phi = Math.atan2(y, x);
            var theta = Math.acos(z / rho);
            var newRho = rho - 0.8
            var newTheta = theta //+ 0.05 // rotate the word 5 degrees above of the sphere
            var newPhi = phi //+ 0.05 // rotate the word 5 degrees to the right of the sphere
            var newx = newRho * Math.sin(newTheta) * Math.cos(newPhi);
            var newy = newRho * Math.sin(newTheta) * Math.sin(newPhi);
            var newz = newRho * Math.cos(newTheta);
            xyz[0] = newx // String(parseFloat(xyz[0]) + 0.6)
            xyz[1] = newy // String(parseFloat(xyz[1])) // add to current z value, so word is over node
            xyz[2] = newz
            var word_position = xyz.join(" ")
            var word_text = "text: " + words[i].replace("_", " ") + "; align: left; color:" + colors[i] + ";"
            word_base.setAttribute("position", word_position);
            word_base.setAttribute("bmfont-text", word_text);
            word_base.setAttribute("scale", "5 5 5")
            word_base.setAttribute("rotation", "0 0 0")
            word_base.setAttribute("look-at", "0 0 0")

            document.getElementById("root_entity").appendChild(word_base);

        }
      }

      xhr = new XMLHttpRequest();
      var url = "http://words2map.com/visualize";
      xhr.open("POST", url, true);
      xhr.setRequestHeader("Content-type", "application/json");
      xhr.onreadystatechange = function () { 
        if (xhr.readyState == 4 && xhr.status == 200) {
            var json = JSON.parse(xhr.responseText);
            var words = json["words"]
            var coordinates = json["coordinates"]
            var colors = json["colors"]
            add_nodes(words, coordinates, colors)
        }
      }

      var data = JSON.stringify({"words2map":"hihihi"});
      xhr.send(data);

    </script>

  </body>
</html>


```
  **Description:**
## **Changes proposed:**
## 
## 
  I've been teaching workshops/giving talks on A-Frame for 8 months now & I've consistently recommended the `animation` component over the built in for the reasons Kevin outlined at the top of this issue, in addition to being easier for newcomers to grok.

Just wanted to chime in that `<a-animation>` sounds like it does more harm than good being in core & it would be good to remove if it makes maintenance harder (seems like it does) _before 1.0_ (even if that's not on track for 0.8, as that release train is probably happening soon)  hi @darkwing, @cvan. How can a newbie work on this? Is this about creating two a-frame scenes with and without optimize-js and see the different in load-times?  Hotspot functionality in aframe panorama,can anybody guide me or give me some clues on how to make this possible
 @donmccurdy @darkwing   Please make sure the question is considered a good fit for Stack Overflow before redirecting people there or reposting support issues there.  Specifically, this question is unclear and very broad. 

See: [What topics can I ask about here?](http://stackoverflow.com/help/on-topic) and [What types of questions should I avoid asking?](http://stackoverflow.com/help/dont-ask)

Thanks :-)
 Sorry for the late response!!

By the "hotspot" functionality I mean,overlaying some graphic markers or icons on specific cardinal points in a vr panorama scene,clicking upon whom will take us to a new scene.
 One more thing,does a-frame already comes with implementation for Yaw,Pitch & Roll or do I have to make it ?
 This is my sample 360ImageView
[http://ensoimmersive.co.in/](url)


How do I add Hotspot functionality in aframe panorama,can anybody guide me or give me some clues on how to make this possible

Thanks http://ensoimmersive.co.in/ @ngokevin
can you please share the link of the document adding hotspot 
see this is as example one https://pannellum.org/documentation/examples/hot-spots/ I want to make it same as in A-Frame At least say how to add the pop for those icons http://ensoimmersive.co.in/ How to add text in 360 degree photos using A-Frame 
The text should be like a popup message when the cursor goes to any icons it should popup the text

Example: consider that I am in kitchen when the cursor is goes to kitchen icon it should popup the text "kitchen"

Thanks  **Description:**

i need add a loading effect before aframe render the whole scene, it looks nothing related in our document, any ideas?
- A-Frame Version: 0.2.0
- Platform/Device: iOS
  Is there a method I could use, to cheat the A-Frame framework, to think that a desktop browser (Raspberry Pi's for this case), is compatible with side-by side VR? This would be such a useful thing for non-mobile devices.
 @aframevr anything?
 @ngokevin Technically, that's both. I need it to render stereoscopically on a device without VR capabilities, as desktop browsers identify themselves, and I want to later pass in custom accelerometer values to the framework. On a rPi.
 @ngokevin Thanks, will look into it.
Can I then feed the camera with values somehow? 
 The `isMobile` hack no longer works. https://github.com/aframevr/aframe/issues/1009#issuecomment-342028445 Can we please re-open since the isMobile hack no longer works? Development while you don't have access to a VR device.  It is helpful to see what the actual output will look like. ... I'm sure there are others, but that is the one that concerns me. I simply need to see the actual output, and others have also requested it.  "Similar", is just not enough for my case.  I'm not sure the web extension will work for me as I am using Electron. Mono rendering is not accurate enough because I need to manage exactly what is visible from a static camera position.  The distortion causes that to be a little different from the mono view.  I don't see any reason why using electron would prevent presentation on VR hardware, but maybe I'm missing something? Thanks, I only need to support Oculus Rift. OK, so I would need to use Firefox? Of course.  I will look into using firefox in kiosk mode or something.  Is there a firefox extension to simulate VR hardware? I actually have a use case for this too. I need to be able to render content directly to one eye or the other, and I need to be able to debug this to make sure it's working correctly. This is pretty challenging to do with aframe right now. Can we reopen this one? @dmarcos 

Edit: to answer the reasonable question "why would you want to do that?" the answer is that I have a CV application that's measuring pupil response to light and needs to be able to compare pupils.  **Description:**
When calling pause() on a sound component, the sound pauses but it feels as if the counter for the sound playback is still ongoing (it is as if pause() just mutes the volume) and calling play() does not resume the audio where it left off, but instead however many X seconds have passed since the initial pause().
- A-Frame Version: 0.3.0
- Platform/Device: Desktop Chrome 53.0.2785.116 m
- Reproducible Code Snippet or Demo URL [highly encouraged]:

HTML:
`<a-entity id="soundEntity" sound="src: #black; on: mouseenter" position="0 5.2 0.3" scale="0.2 0.2 0.2"></a-entity>`

JavaScript:

```
var soundEntity = document.querySelector("#soundEntity");
soundEntity.addEventListener("stateremoved", function(evt) {
    if (evt.detail.state === "cursor-hovered" && soundEntity.components.sound.isPlaying) {
        soundEntity.components.sound.pause();
    }
});
soundEntity.addEventListener("stateadded", function(evt) {
    if (evt.detail.state === "cursor-hovered" && !soundEntity.components.sound.isPlaying) {
        soundEntity.components.sound.play();
    }
});
```

Also if I were to log `soundEntity.components.sound.sound.context.currentTime` after a call to pause or play, the counter has a gap of however many seconds I wait between each pause and play. Any help with this would be greatly appreciated, thanks.
 Thanks, pausing/playing directly on the HTML5 audio element works as expected.
  **Description:**

Found a typo.
## **Changes proposed:**
## 
## 

Found a typo.
  **Description:**
Fixing [Issue #1881 ](https://github.com/aframevr/aframe/issues/1881#issuecomment-244658276), where a previous change caused a regression for usage of the dynamic src element.
Now handling when src is not present, where it will return null or an empty string - [https://developer.mozilla.org/en/docs/Web/API/Element/getAttribute](https://developer.mozilla.org/en/docs/Web/API/Element/getAttribute)

**Changes proposed:**
- If src is null, set cross origin instead of throwing error
  **Description:**
in vr mode on iphone,all of the images is very blurry,but is very clear in vr mode on android.example:
1.https://github.com/aframevr/aframe/blob/master/examples/boilerplate/panorama/index.html
2.https://aframe.io/examples/showcase/composite/
- A-Frame Version:all version
- Platform/Device:iphone
- Reproducible Code Snippet or Demo URL [highly encouraged]:
 Thanks,ngokevin, I have tested it in ios10, the images is clear in vr mode,but I use workaround you mentioned above,I add code before a-frame,but the image still broken in vr mode in ios9. sample is here:
http://www.modx.com.cn/vr/test2.html
  **Description:**
## **Changes proposed:**
## 
## 
  **Description:**
webkit-playsinline not working in iOS10. videosphere was working perfectly fine but now will only start video in iOS full screen player. seems to be a bug from Apple?
- A-Frame Version: 0.3.1
- Platform/Device: iPhone6
 I believe the attribute is no longer prefixed, so perhaps try using `playsinline`
 Thanks Brian, added playsinline and it start to work

However webkit-playsinline is still specified in
https://developer.apple.com/library/content/releasenotes/General/WhatsNewInSafari/Articles/Safari_10_0.html.
Don't know where it went wrong still.

On Thu, Sep 15, 2016 at 6:18 AM, Brian Blakely notifications@github.com
wrote:

> I believe the attribute is no longer prefixed, so perhaps try using
> playsinline
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/1906#issuecomment-247140207,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/ABHB2vcI7NJOJPd_zoZHW0iri-7UaVUuks5qqFajgaJpZM4J8WPF
> .
 I have also noticed the video will still play with
only webkit-playsinline in most of the in app webviews.

On Thu, Sep 15, 2016 at 6:18 AM, Brian Blakely notifications@github.com
wrote:

> I believe the attribute is no longer prefixed, so perhaps try using
> playsinline
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/1906#issuecomment-247140207,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/ABHB2vcI7NJOJPd_zoZHW0iri-7UaVUuks5qqFajgaJpZM4J8WPF
> .
 @ngokevin  also noticed the video will not auto play in mobile iOS unless muted.

try to fire play() in js but still no luck.
 The blog goes over all of this in detail:

https://webkit.org/blog/6784/new-video-policies-for-ios/
 Yeah, most rich content involving video will still need a click.

This is how to detect whether you need to show a "play" button or something:

https://developers.google.com/web/updates/2016/03/play-returns-promise
 Just for reference. This is a blog post from Apple regarding the changes in `playsinline` for iOS 10 

https://webkit.org/blog/6784/new-video-policies-for-ios/
 That was the only information I found about why playsinline is no longer prefixed and what policies to follow to make it play. 

Also considering that Desktop Safari doesn't have the same restrictions as iOS does it makes sense to review the article to see if there are additional changes to make Hm. I'm still not able to get this working using the following:

```
<!DOCTYPE html>
<html>
  <head>
    <title>Video Test</title>
    <meta name="description" content="Video Test">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
    <script type="text/javascript">

    </script>
  </head>
  <body>
    <a-scene>
        <a-assets>
          <video id="video" src="./assets/video/IMG_1040.MOV" width="1080" height="1920" webkit-playsinline playsinline muted></video>
        </a-assets>
      <a-video src="#video" position="0 0 -4" rotation="0 0 -90" width="4.8" height="2.7"></a-video>
      <a-plane position="0 -4 0" rotation="-90 0 0" width="10" height="10" color="pink"></a-plane>
      <a-sky color="skyblue"></a-sky>
    </a-scene>
  </body>
</html>
``` @cvan , 

Sorry, should've put that in my original post. This is an issue on Safari on both desktop 10.1.1 and iOS 10.3.2. 

I tried converting as you suggested above, but even after pinning it to the homescreen, I'm still getting black boxes. 

If anyone has a working repo with an example video of this working, that would be super helpful. As the Docs [read](https://aframe.io/docs/0.5.0/primitives/a-video.html#caveats):

> Inline video support on iOS 10 may change this.

 @cvan ,

So to gut-check myself, I just ran this on a live server (on a real, public domain), rather than locally, and it works. For anyone moving forward - if you check this on macOS using a PHP -S server, it will not work. Has anyone been able to trigger audio? 

If I remove the `muted` attribute from the `<video>` element, I am unable to play the video. Adding an `onclick` trigger (via a cube or something), with `videoName.play()` gives an error in iOS 10. 

I'm happy to make a new issue for this, but didn't want to be duplicitous.  Markup:
```
    <a-scene>
    	<a-entity position="0 .6 4">
    	    <a-camera>
    	        <a-entity id="mycursor" cursor="fuse: true; fuseTimeout: 500; max-distance: 30;"
    	        position="0 0 -5"
    	        geometry="primitive: ring"
    	        material="color: blue; shader: flat">
    	        </a-entity>
    	    </a-camera>
    	</a-entity>
    	<!-- "button" -->
    	<a-entity id="audio-trigger-button" geometry="primitive: box" material="color: red" position="0 0 -2"></a></a-entity>
        <a-assets>
          <video id="video" src="./assets/video/vid-audio.mp4" width="1080" height="1920" ></video>
         </a-assets>
      <a-video src="#video" position="0 0 -4" rotation="0 0 -90" width="4.8" height="2.7"></a-video>
      <a-video src="#video" position="-4 0 0" rotation="0 90 -90" width="4.8" height="2.7"></a-video>
      <a-video src="#video" position="4 0 0" rotation="0 -90 -90" width="4.8" height="2.7"></a-video>
      <a-video src="#video" position="0 0 4" rotation="0 0 -90" width="4.8" height="2.7"></a-video>
      <a-video position="0 -3 0" rotation="-90 0 0" width="10" height="10" color="pink"></a-video>
      <a-sky color="skyblue"></a-sky>
    </a-scene>
    <script>

    var button = document.getElementById('audio-trigger-button');
    var testVideo = document.getElementById('video');
    button.onclick = function() {
    	console.log('button clicked');
    	testVideo.play();
    }
    </script>
```
Error:
`SecurityError (DOM Exception 18): The operation is insecure.`

If I add `muted` back into the `<video>` it triggers the play just fine (but without sound). I'm not sure if this is directly related to this issue, but I'm having trouble triggering audio on iOS devices. I'm listening for click events that play audio assets. I'm curious is anyone else is having a similar issue on iOS devices or if you know of a solution?   **Description:**
It seems that you can no longer set the fuse timeout of a cursor using `timeout`. This looks only partially reflected in the docs.
**Changes proposed:**
- Change `timeout` to `fuseTimeout` in the cursor docs

Anyway, Thanks a lot for the great work that you've done on this project ! It's awesome :smiley: 
  In my ar-scene setup, I want to replace the default camera entity with my own "ar-camera" entity, if the user did not create one in the scene.

So, in the scene's "loaded" callback (play method, actually), I grab a list of cameras, and look for an "ar-camera" entity.   This is all good.

BUT, I also want to disable any camera that is already there by setting active=false.

The problem is that the camera system ALSO has a "loaded" callback, in which it creates a default camera (if there isn't one) and attaches it to the scene.

Unfortunately, the a-node attachedCallback does not seem to run for these new nodes until after all of the various "loaded" handlers are run.  Which means that this.sceneEl in these nodes is not set, so when I call  `cameraEl.setAttribute('camera', 'active', false);` on the default camera that the camera system created, it throws an error inside the camera's init method (since setAttribute calls updateComponent which calls init on the uninitialized component (in a-entity.js).

It seems that there needs to be something in there to check (during init, I guess?) it's it's attached BUT the attached callback hasn't been called?  If so, do the same work (like setting the sceneEl)?
 The problem is that I'm running my code in the "loaded" callback; I have set up an event on "camera-set-active" but it wasn't running for the default camera because the event is fired in its "loaded" callback, before my loaded callback is executed ... at least that's what I think is happening, since my handler isn't running for the default camera.  To solve this, I also ran the same callback once in my loaded callback, which ran into the problem above.
 I know, it's fun (if confusing)...

I was setting the camera-set-active callback up in loaded ... I only want to check for cameras after the scene is loaded, in case the programmer has created an "ar-camera".  I guess I could try a different tack, setting the callback up at init, and watching for an ar-camera, and then creating the ar-camera in loaded.

Although, while this may work, it side steps the larger problem;  I don't think the setAttribute command should be raising an error.  Perhaps "init" on the node should check if the node is attached to the DOM and check for the existence of a scene (if sceneEl isn't set) and set it (as is done in in AttachedCallback) if it's not set.  
 I really don't want to set up a `nodeready` callback on each of these cameras, although I guess I could do that (check if `sceneEl` is null, if so set up a callback to do the "active = false" when it's ready).  Yuck. :)

The code is my argon-aframe stuff (github.com/argonjs/argon-aframe).  The offending code is in the "play" method of ar-scene.js.  Right now, the code in the repo is only using a callback on camera-set-active, which isn't getting called for the default camera ... all the time.  The weird thing is, it was getting called sometimes, but I discovered it not getting called in a more complex app I was building which starts out with an empty ar-scene and adds to it programmatically.

I replaced the addEventListener in that play method with a function that I set on the listener, and call:

```
          var fixCamera = function () {
            var arCameraEl = null;
            var cameraEls = self.querySelectorAll('[camera]');
            for (i = 0; i < cameraEls.length; i++) {
                cameraEl = cameraEls[i];
                if (cameraEl.tagName === "AR-CAMERA") { 
                  arCameraEl = cameraEl;
                  continue; 
                }
                cameraEl.setAttribute('camera', 'active', false);
                cameraEl.pause();
            }

            if (arCameraEl == null) {
                var defaultCameraEl = document.createElement('ar-camera');
                defaultCameraEl.setAttribute(AR_CAMERA_ATTR, '');
                defaultCameraEl.setAttribute(constants.AFRAME_INJECTED, '');
                self.appendChild(defaultCameraEl);
            }
          }
          // if there are any cameras aside from the AR-CAMERA loaded, 
          // make them inactive.
          this.addEventListener('camera-set-active', fixCamera);
          fixCamera();
```

The `cameraEl.setAttribute('camera', 'active', false);`ends up raising an exception because the cameraEl is set to the default camera, which hasn't had it's attachCallback method called yet, so it's not ready.
 Ok, I leveraged the `nodeready` event to work around this issue.  It's kinda ugly though.
 @blairmacintyre working code?
please Seems like there should be a simpler way to allow a-frame users to specify what the "default camera" for a scene should be, rather than them overriding the default camera after it has already been added to the scene.

f.e. `<a-scene default-camera="other-type-of-camera">` and if no camera is specified in the HTML, then the _first and only_ camera will be `other-type-of-camera` without having overriden some other camera.  Hello folks. I don't know if is a bug, but I'm trying to understand how could I change the entity SRC in an animation. I'm using the 3.0 version. 

With my code the entity material is empty.

`<a-entity id="parent" geometry="primitive: plane; width: 0.1; height: 0.1;rotation:0 0 0" position="0 -1 -1" material="src: #menu_hamburger; shader: flat; transparent:true; depth: 1; opacity: 1"><a-animation begin="mouseenter" attribute="material.src" from="#menu_hamburger" to="#menu_mais" dur="1000"></a-animation><a-animation attribute="material.opacity" begin="mouseenter" to="0.5" dur="100"></a-animation><a-animation attribute="material.opacity" begin="click" to="0" dur="100"></a-animation><a-animation attribute="material.opacity" begin="mouseleave" to="1" dur="100"></a-animation></a-entity>`
 Hello @cvan! Thanks for your answer but the problem is still the same. Best!
 Huge Thanks @ngokevin the component worked! Best.
  **Description:**

(In reference to [this discussion](https://aframevr.slack.com/archives/general/p1473594376000181) on Slack.)

I have a `cursor` in an aframe-react app. I'd like to know when it gains or loses the `cursor-hovering` state and have my app react to it.

If I understood the reply on Slack correctly, there is no way to listen to these events?
- A-Frame Version: 0.3.0
- Platform/Device: all
 My original question in Slack was probably poorly phrased. :) Was supposed to be more about aframe-react anyway. `stateadded` and `stateremoved` were exactly what I was looking for and looks like aframe-react Entities have them as props.

Gonna close this issue. Thanks for the help!
 In my case got strange behavior using jQuery

`mouseenter` `mouseleave` have to be added using `addEventLister` ...weird! 
but `stateadded`and `stateremoved` are working fine.

I tested v2 and v3 of (google hosted) jQuery 

```
$(document).ready(function(){
			// click working fine OK
			$('.clickable').click(function (ev) {
				console.log(this.id + ' was clicked!');
			})
			// addEventListener OK
			.each(function(i, el){
				el.addEventListener('mouseleave', function(ev){
					console.log("dom ev leave " + this.id);
				});
				el.addEventListener('mouseenter', function(ev){
					console.log("dom ev enter " + this.id);
				});
			})
			// jquery mousenter - mouseleave not working KO
			.on('mouseleave', function(ev){
				console.log("jquery leave " + this.id);
			})
			.on('mouseenter', function(ev){
				console.log("jquery enter " + this.id);
			})
			.mouseleave(function(ev){
				console.log("jquery leave " + this.id);
			})
			.mouseenter(function(ev){
				console.log("jquery enter " + this.id);
			})
			// jquery staeadded - stateremoved working fine! OK
			.on('stateadded', function(){
				console.log("jquery stateadded " + this.id);
			})
			.on('stateremoved', function(){
				console.log("jquery stateremoved " + this.id);
			});
		});
```    In the current implementation, when fusing on an entity only the _first_ successful fusing is emitting a 'click' event on that entity. 
When not leaving the entity with the cursor no more fusing will be done. Clicking with the mouse propagates of course further 'click' events.

My expectation would be that also fusing several times on an entity should be processed by AFrame. Sso that a fusing is the same as a mouse click.

Thanks
- A-Frame Version: 3.0.0
- Platform/Device: any
  **Description:**

I would expect the image to move like everything else on the Web: in the opposing direction to my drag.  That behavior is more tactile.  Currently, the sphere POV follows the mouse drag.

I performed internal tests before opening this ticket.  All users pulled down on the mouse to look up.
- A-Frame Version: 0.3.1
- Platform/Device: Desktop
- Reproducible Code Snippet or Demo URL [highly encouraged]: N/A
  **Changes proposed:**
- Fix broken internal link in Component page
  **Description:** The image in a-assets is not loaded at the first time and have to refresh the page to get it working. The problem is only on iOS device.
- A-Frame Version: 0.3.1
- Platform/Device: iOS
- Reproducible Code Snippet or Demo URL [highly encouraged]: https://jsfiddle.net/s2ct3ztn/
  **Description:**

**Changes proposed:**
## \- Fix the link to guides on the introduction page
## 
  Is there any detailed description of the VOX file format, apart from the [MagicalVoxel](https://ephtracy.github.io/index.html?page=mv_vox_format) page?

Do the links below refer to the VOX format used in MagicalVoxel?
- [Voxlap Voxel Model File](http://fileinfo.com/extension/vox)
- [Ken's Voxlap 6 Model File](http://fileinfo.com/extension/kv6)

On the homepage of [Ken Silverman](http://advsys.net/ken/build.htm) I found the following description of the file format.

> What's the .VOX file format?
> 
> Both SLABSPRI & SLAB6 support a simpler, uncompressed voxel format using the .VOX file extension. (See the documentation that comes with those programs.) The .VOX format is simple enough to fit a description of it right here. Here's some C pseudocode:
> 
> long xsiz, ysiz, zsiz;          //Variable declarations
> char voxel[xsiz][ysiz][zsiz];
> char palette[256][3];
> 
> fil = open("?.vox",...);
> read(fil,&xsiz,4);              //Dimensions of 3-D array of voxels
> read(fil,&ysiz,4);
> read(fil,&zsiz,4);
> read(fil,voxel,xsiz_ysiz_zsiz); //The 3-D array itself!
> read(fil,palette,768);          //VGA palette (values range from 0-63)
> close(fil);
> In the voxel array, use color 255 to define your empty space (air). For interior voxels (ones you can never see), do not use color 255, because it will prevent SLABSPRI from being able to take advantage of back-face culling.

Is it correct? Is the VOX file format described here the same as the one used by MagicalVoxel/AFrame? 
  **Description:**
## **Changes proposed:**
## 
## 
  Since a-videosphere is 

> an entity that prescribes a large sphere with the html5 video texture mapped to the inside

. Is it possible to render youtube embeded iframe texture instead?
 You can retrieve te url of a video with the youtube api. See https://developers.google.com/youtube/js_api_reference#Retrieving_video_information and look at the player.getVideoUrl():String function.
 Thanks but the youtube video url is still not playable in video tag

On Sun, Sep 4, 2016 at 8:24 PM, vrimaginar notifications@github.com wrote:

> You can retrieve te url of a video with the youtube api. See
> https://developers.google.com/youtube/js_api_reference#
> Retrieving_video_information and look at the player.getVideoUrl():String
> function.
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/1889#issuecomment-244594921,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/ABHB2jReQbHL9qKQp0tzvU6ZALTmdRDqks5qmpxpgaJpZM4J0S0E
> .
 @ngokevin  I did manage to use mediaelement.js and add a youtube flat video into the scene, but not as  a videosphare. 

Based on what youtube provided, seems the only ways is to render their iframe as a sphere. 
  **Description:**
According to the [documentation](https://aframe.io/docs/0.3.0/core/animations.html#easing) the **easing** attribute controls the pace of an animation. Yet if one uses **easing** and not **easin** in an Aframe scene the entire scene blocks.
- A-Frame Version: at least 0.2 and 0.3
- Platform/Device: all
- Reproducible Code Snippet or Demo URL [highly encouraged]: http://jsbin.com/xaqumi/edit?html,output
 Correct, thanks, not sure how I managed to miss than especially since I used easing before without issues ;)
  I just tried an aframe experiment with the Vive. Having the Chrome console open, the display size on PC screen was reduced, and I noticed the quality in the headset was worse than usual. It seems that the renderer size depends on the size of the original window. It should depend on the hardware (if PC=>Full HD, if smartphone=>HD) instead.
Try launching an aframe on the Vive with a very small browser window to reproduce
- A-Frame Version: 0.3
- Platform/Device: Windows 10 with HTC Vive on Google Chromium 53.0.2744.0 (64bit)
- Reproducible Code Snippet or Demo URL [highly encouraged]: any aframe demo (like https://aframe.io/examples/showcase/composite/)
  ![image](https://cloud.githubusercontent.com/assets/5400381/18213049/8e2cba72-7146-11e6-9201-c593c21a979a.png)
  **Description:**
A fix to the cursor.js component to ensure that `mouseenter` and `mouseleave` events fire reliably when multiple objects intersect the cursor's raycaster. 

**Changes proposed:**
- created a new function called `leaveCurrentIntersection` to handle triggering leave events, resetting the fuse timer, etc.
- leaveCurrentIntersection is now triggered in the `onIntersection` function if a current intersection already exists
- leaveCurrentIntersection is triggered in `onIntersectionCleared` only if the event is fired on the currently intersected element
- added test cases to the Cursor test example 
 I've added to the pull request to attach intersection information to all of the cursor event payloads to match the specs of this stackoverflow post:
http://stackoverflow.com/a/38667473/6781113
  We are using a dynamic source attribute to the video tag and that's not working anymore in version 0.3.0. The reason we do this is to stream different bitrate and or resolution video to client devices. The error is: TypeError: r is null,   

...ossorigin")?e:(r=e.getAttribute("src"),r.indexOf("://")===-1?e:extractDomain(r)=...

I suppose it has something to do with the error handling for wrong formatted src attributes implemented a couple of days ago (#899).

Question: can we have the implmentation back from 0.2.0 where a src attribute was not mandated in the video tag? 
- A-Frame Version: 0.3.0
- Platform/Device: all
- Reproducible Code Snippet or Demo URL [highly encouraged]:

<a-scene>
     <a-assets>
         <video id="#video"/>
     </a-asset>
     <a-videospehere src="#video"/>
</a-scene>

```
   [javascript to determine device/os]
   video =  document.getElementById('video');
   source = document.createElement('source');

source.setAttribute('src', src);
video.appendChild(source);
video.play();
```

The above is simpliflied code (there should be some code there???)
 We tested 0.3.0 stable and the difference with 0.2.0 is that there seems to be an added check if the src attribute exists and if not it throws the above error. In 0.2.0 there was no check for the src attribute in the video tag (assets --> video).
 I wonder if autoplay works on the workaround you propose. I will try and see if that works. And by the way, thank you (and the others on the team) for a great framework and the effort you put in it.
  **Description:**
Currently, rStats displays a large white background behind counters under the alarm state. This was added for visibility in #1874, however it's aggressive compared to the rest of the rStat dashboard.

![rstatcolorchange](https://cloud.githubusercontent.com/assets/7256178/18153870/0ca84576-6fb5-11e6-9bb0-e093bb13bcbe.gif)

**Changes proposed:**
- When a counter/label enters the alarm state, a white text shadow highlights the red text to make it more readible and visible without being as intrusive as a wide white background. The text shadow makes use of 9 levels of shadow to form a composite & dense coloring around the red text.
- This solution was discussed in #1630.

![rstatcolorchange7](https://cloud.githubusercontent.com/assets/7256178/18153888/2130d260-6fb5-11e6-8b6c-b259a4e403b2.gif)
 Sure, I can do that later tonight
 Went ahead and opened a PR to rstats with a CSS class based solution here -> https://github.com/spite/rstats/pull/24
  **Description:**
rStats currently displays red text to alarm the user of stats that are less than optimal. This PR attempts to address #1630 ( red text behind the current gray background is hard to read ).

![screen shot 2016-08-29 at 9 15 06 pm](https://cloud.githubusercontent.com/assets/7256178/18075875/b68068e6-6e2d-11e6-873a-cf76f7044c0a.png)

**Changes proposed:**
- When a counter/label enters the alarm state in rStat, a white background highlights the red text to make it more visible and readable.

![rstatcolorchange](https://cloud.githubusercontent.com/assets/7256178/18075808/3d11a18c-6e2d-11e6-82f5-578f531c673a.gif)
  **Description:**
Hi guys,

I understand it's a known issue while is there a walk around or a timeline for resolving this issue for aframe master version?

Thanks & Best Regards,
- A-Frame Version: 0.3.0
- Platform/Device: iPhone6
 Thanks Kevin : )

On Wed, Aug 31, 2016 at 10:31 AM, Kevin Ngo notifications@github.com
wrote:

> We bumped the webvr-polyfill which had some issues with iOS. There is
> currently a bug in iOS Safari related to canvas resizing such that if we
> had it at full resolution, VR mode would look broken until you turned the
> phone. This should be fixed in iOS 10, so we told A-Frame to give it full
> resolution for iOS 10 Safari.
> 
> If you want full resolution (but it will look broken until you turn the
> phone), you can set window.WebVRConfig = {'BUFFER_SCALE': 1} before you
> include A-Frame.
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/1873#issuecomment-243623896,
> or mute the thread
> https://github.com/notifications/unsubscribe-auth/ABHB2jIMc7LrihwX6uccv1-yjzFHYWa_ks5qlMtXgaJpZM4Jv6LX
> .
  what can I do ? I am a  tiro，and my English is poor,QAQ
  **Description:**
in the  Skeleton  18 line   there  have a  extra  `</a-cursor>`
**Changes proposed:**
## -`<a-cursor id="cursor"></a-cursor>`

-`<a-cursor id="cursor">`
 I  am  not sure ,maybe in line 23
  Found a few things in init that I thought could be shortened.
 Updated!
  **Description:**
[Issue 269](https://github.com/aframevr/aframe/issues/269)

Switch to ghpages module instead of calling gh-pages directly with a custom script
(aframe-boilerplate also uses ghpages, not a custom script)

**Changes proposed:**
- Delete script file
- Add 0.0.8, latest ghpages version, as a dev dependency
- Change command to push contents of gh-pages to user or aframe github page
 I believe so - [https://zeouterlimits.github.io/aframe/](https://zeouterlimits.github.io/aframe/)
  Appears to fix transient test failures.
 Removing the element in `inspector.test.js` doesn't remove it completely.
 Spoofed URL -- good call!  Updated!
 IMO a URL check is essentially a check that component settings are passed along properly, which isn't specific to this change.  
 Updated to axe `script` tag.
    Do we want to create a separate command for SSL to avoid the annoying SSL warnings the first time we hit the dev site?
  **Description:**
For issue #1846 task 
**Changes proposed:**
Please download the video via https://drive.google.com/file/d/0B4IIadesQuavN0puUjNqLV84bG8/view?usp=sharing
 Hi Kevin,

You can but the resolution is too low on big screen.... And this issue only
happen on iOS so far

Best Regards,

On Fri, Aug 26, 2016 at 6:50 AM, Kevin Ngo notifications@github.com wrote:

> Thanks, should we just use that video on desktop too?
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/pull/1858#issuecomment-242536119, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/ABHB2pJ-NaYrP_rtqg2CTrW0r9CNNVm5ks5qjgAKgaJpZM4JtfJI
> .
 I'd suggest to wait and see if mobile safari's html5 player will be upgraded to resolve this after iOS10's release
 Having encountered similar problems I usually serve 2 different video, 1 for desktop in high res and 1 for mobile (not just iOS) that is usually significantly lower.  **GearVR camera height incorrect:**
- A-Frame Version: 3.0
- Platform/Device: GearVR
## To reproduce
- Install browser inside GearVR Oculus homepage
- Turn on WebVR (using `internet://webvr-enable`)
- goto https://aframe.io/
- click to enter VR.

You are at height 0, the floor, not 1.8, like Carboard and 2D screen versions.

I see in the documentation: https://aframe.io/docs/0.3.0/components/camera.html

_"When not in VR mode, userHeight translates the camera up to simulate human height. The injected camera has this set to 1.8 (meters). When entering VR, this height offset is removed such that the absolute position return from the VR headset is used. This is very convenient for experiences that work both in and out of VR, as well as making experiences look decent from the monitor as opposed to clipping the ground if the headset was resting on the ground."_

So I suspect that we need a special case for fixed-position headsets, like the GearVR, to use the 1.8.
 Will this be fixed in the future by default without the component? Or should I put this into my scenes from now on.
 I think AFRAME.utils.isGearVR should be AFRAME.utils.isGearVR(), otherwise it's just checking for the existence of the function (and so it returns true for other browsers).

Does this workaround need a component, or could it perhaps be simplified with something like:

```
if (AFRAME.utils.isGearVR()) {
    cameraEntity.setAttribute('position', '0 1.8 0');
}
```

Like @msj121 I am worried about this breaking in the future though. Also, it fixes your height in fullscreen mode, but it breaks your starting height when viewing inside the initial Gear VR browser frame.
  Took a stab at #1535 ; reuses existing function, avoids unnecessary processing.
 I plan to do so early this week.
 Starting these tests tonight.
  There's been talk of updating the scenes with a more expansive rewrite but I've quickly made some language updates to the guides as they appear now.
 I'll revisit we vs. you vs. passive once I get more sleep.  The guides use both "we" and "you" at the moment, thus their voice jumps about.
  Like the `apple-mobile-web-app-capable` point, adding note that this attribute is automatically added by A-Frame so users don't think they need to add it.
 I thought you had meant section; updated.
  This is very common in other VR framework (e.g. https://www.assetstore.unity3d.com/en/#!/content/23585). So it will be triggered if the camera nod or shake for more than 3 times. 

It can be very useful to track head gestures. and gather user feedback without a controller.
  I'm trying to use an OBJ model without MTL, and specify the material by hand, using a `material` component. If I put the obj-model first:

``` html
<a-entity obj-model="obj: #my_model" material="color:#ff0000"></a-entity>
```

the material is ignored, and a default material is added (checked with inspector). But if I swap the order and put the material component first:

``` html
<a-entity material="color:#ff0000" obj-model="obj: #my_model" ></a-entity>
```

...the correct material is applied
- A-Frame Version: 0.3.0
- Platform/Device: Chromium + Windows + HTC Vive
  **Description:**
Adds test for Inspector

**Changes proposed:**
None
 Updates:
1.  Added the attributes you suggested; I held off originally to avoid code bloat for sake of test but since we're already using `aframe-injected` elsewhere, probably good to be consistent.
2.  Not adding `remove()` test since default components cannot be removed at present.
  a-videosphere is not working in mobile safari on iOS device.

A-Frame Version: 0.3.0
Platform/Device: iPhone 6 Safari iOS ver 9.3.4

Example page shows a full black screen, finger tab will not initiate video playback.

Compared side by side with with a-video. followed steps in https://aframe.io/docs/0.3.0/primitives/a-videosphere.html#caveats. a-video works perfectly fine while a-videosphere is not on iOS

```
<a-assets>
      <video webkit-playsinline autoplay loop crossorigin  id="video"  src="city.mp4"></video>
      <video webkit-playsinline autoplay loop crossorigin id="video1"  src="john.mp4"></video>
</a-assets>

<a-videosphere src="#video" rotation="0 180 0" ></a-videosphere>
<a-video src="#video1" width="16" height="9" position="20 0 -10"></a-video>
```
 @ngokevin added iphone-inline-video as well as muted on tag. still has the same problem.

I doubt it's related to user interaction on video play event since a-video works fine once I  pined the webpage to the iOS homescreen.
 wow, videosphere actually worked after I reversed the video content....

the city video is the same 360 video on aframe.io demo page. The other one is just a random mp4 video. Now it's confirmed to be a problem with the video file.

After some google search I believe now this is the root: 

> One important thing to note is that "iDevices" doesn't support all the varieties of mp4. Here is a small list about MPEG-4 and H.264 supported varieties.
> According to Apple official website, iPad or iPhone 4S is only compatible with H.264 or MPEG-4 video format with the following specifications:
> If it is MPEG-4 video, it should meet: up to **2.5 Mbps**, 640 by 480 pixels, 30 frames per second, Simple Profile with AAC-LC audio up to 160 Kbps per channel, 48kHz, stereo audio in .m4v, .mp4, and .mov file formats;
> 
> https://confluence.atlassian.com/confkb/unable-to-play-embedded-mp4-videos-on-ipad-or-iphone-in-confluence-305037325.html

![capture](https://cloud.githubusercontent.com/assets/1163738/17919614/36cf1da0-6a12-11e6-89b9-f60a14bc68a4.PNG)

Will try to downgrade the total bit rate to less than 2.5Mbps and will see how we goes.
 No Problem. Works well after rate downgrade. Wish Apple make a better html5 video player in iOS10. This issue can be closed for now : )
 The way we do it;
- Check for the least powerful device to run the video on (we target the iPhone 5S as the least powerful device on iOS).
- Encode three video's from the source material (in our case 3840 x 1920 50mb/s h.265). Reencode to h.264 15mb/s for desktops and mobile devices with a 2560 x 1440 resolution. Reencode to 1920 x 960 h.264 15 mb/s for all other mobile devices except the iPhone / iPad. For idevices use 1366 x 683 h.264 5 mb/s. It runs smooth and looks very crisp.
- For reencoding a video use Handbrake with audio passthrough.  
 Hi @ngokevin, Is this issue good as 'help wanted (easy)'?  Here is a lower resolution version that works on an iPhone 6S with iOS10 10 https://vatelier.net/MyDemo/videosphere-showcase/ 

The video file itself is https://vatelier.net/MyDemo/videosphere-showcase/city_halfres.mp4 that I downgraded using `ffmpeg -y -i city.mp4 -vf scale=2048:1024 city_halfres.mp4`. @cvan you're right it's just the resolution @fuleinist but it can not work on iOS 11, i have try all kinds of solution. is any other people like me ? i have solve this problem with creating a  button to play can you pleas post the code.  i have also try all kinds of solution. The 360 video example on Glitch should have click to play, if I recall correctly...

Generally the issue is browser restrictions on autoplay of video/audio, and not A-Frame. <script>
 window.addEventListener('click', function () {
   var v = document.querySelector('#vid');
   v.play();
 });
 </script>

` <a-assets>
   <video id='vid' src="imgs/video-1920x960.mp4" autoplay>
 </a-assets>
 <a-scene>
   <a-sky rotation="0 -90 0" src="#vid"></a-sky>
  </a-scene>`

have this simple code. it work in firefox , not in safari. can you tell me where is the problem see https://glitch.com/edit/#!/aframe-360-video-example
(try it here: https://aframe-360-video-example.glitch.me ) Not sure GitHub issues are the best place for this kind of support but it
does highlight that more complete and documented examples are needed.
 There is actually a section in the FAQ about this, e.g. https://aframe.io/docs/0.8.0/introduction/faq.html#why-does-my-video-not-play-on-mobile

Since then, however, the restrictions on autoplay content have spread from mobile to desktop, and it doesn't look like the documentation has kept up with that aspect.

You are right of course that "how do I" questions usually get asked and answered on StackOverflow or similar.

On September 17, 2018 1:27:25 AM EDT, Fabien Benetou <notifications@github.com> wrote:
>Not sure GitHub issues are the best place for this kind of support but
>it
>does highlight that more complete and documented examples are needed.
>
>
>-- 
>You are receiving this because you commented.
>Reply to this email directly or view it on GitHub:
>https://github.com/aframevr/aframe/issues/1846#issuecomment-421893018

-- 
Sent from my Android device with K-9 Mail. Please excuse my brevity.  **Description:** Updates the docs with details about the new properties of the Standard Shader

**Changes proposed:**
- Add details for spherical environment maps
- Add details about the different types of distortion maps
- Update the default value of the displacement bias to something more sensible.
  How does that relate to `<a-assets><img src></>`?  Does having two different attributes add complexity?
 The src attribute has been around for ages and is completely understood by web developers. In my opinion changing the src attribute to asset adds complexity.
 Hey! I'm just into learning A-Frame and came across this. I wanted to comment on this because it really felt weird seeing a "src" attribute used to reference a CSS-ish selector. I mean, src is always used for implicit filenames. 
That said, although I've just started learning A-Frame I see the "src" used like everywhere, so deprecating this is gonna lead to serious code-breaks I think.
  **Description:** The documentation says we can ["customize the raycasting pieces of the cursor...by changing the raycaster component properties"](https://aframe.io/docs/0.3.0/components/cursor.html#configuring-the-cursor-through-the-raycaster-component). But attempting to restrict the cursor to a certain class using the raycaster's 'objects' property does not work (all entities remain active).

CodePen: https://codepen.io/bryik/pen/VjRgyk
- A-Frame Version: 0.3.0
- Platform/Device: Chrome/Windows
 This may be caused by confusion between the raycaster created by the cursor (as a dependency) and the raycaster added in markup.

I had the same problem with the vive-cursor component and "solved" it by having the raycaster's 'objects' property be set by vive-cursor during initialization.
 > I wonder if it's a component initialization order issue.

Putting the raycaster component before the cursor component [works as it should](https://codepen.io/bryik/pen/PzAGRa).

The code sample on the cursor's doc page could be amended, but ideally the order wouldn't matter.
  **Description:**

Just add some syntax highlighting to the code snippets in the `README.md`.

**Changes proposed:**
- Change markdown code format from indenting to backticks. This allows syntax highlighting.
  **Description:**
## **Changes proposed:**
## 
## 

Update Link href to `mixin` documentation page.
  **Description:**
- A-Frame Version: 0.3.0
- Platform/Device: any

The description of the "update-raycaster" is component is confusing, especially as this is the second tutorial beginners will be reading. Without diving deep into the source of [the image gallery boilerplate](https://github.com/aframevr/360-image-gallery-boilerplate) it is impossible to understand. Most crucial, there is no mention of the element the component is attached to. The "set-image component" should have more explanation as well. 

I can try a documentation update / pull request if desired and not already in the works.
 I think the sequence of tutorials is quite good. One for HTML, one for using / writing components and one for MagicaVoxel which I'm looking into right now.  Just needs some more detail on the components.
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1837?src=pr) is 81.73% (diff: 100%)

> Merging [#1837](https://codecov.io/gh/aframevr/aframe/pull/1837?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **2.52%**

``` diff
@@             master      #1837   diff @@
==========================================
  Files           101        103     +2   
  Lines          3590       3598     +8   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
- Hits           3025       2941    -84   
- Misses          565        657    +92   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [50353ca...b4a0b98](https://codecov.io/gh/aframevr/aframe/compare/50353ca756d2a32bf963016f12c0494498c1a6ac...b4a0b98568723c28957179fe30f2c7d1cf5e850c?src=pr)
  **Description:**
In current documentation, 0.3.0+, as of 2016/08/20, the linked Tracked-Controls does not exist, and so the reader gets a 404.
Additionally, within Hand-Controls, the path for both the nonexistent TC and the present Vive-Controls is incorrect
For [Issue 1828](https://github.com/aframevr/aframe/issues/1828)

**Changes proposed:**
- New file, tracked-controls.md
- Change to path in hand-controls.md to reference files in current folder
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1836?src=pr) is 81.73% (diff: 100%)

> Merging [#1836](https://codecov.io/gh/aframevr/aframe/pull/1836?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1836   diff @@
==========================================
  Files           103        103          
  Lines          3598       3598          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2941       2941          
  Misses          657        657          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [e581833...4816dc2](https://codecov.io/gh/aframevr/aframe/compare/e5818331c84db8f6dcdfb8da52de812add60cc09...4816dc26352ed26abc572fd7c81cb0c1fb07a9b0?src=pr)
 Thanks for the feedback, updated.
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1835?src=pr) is 81.73% (diff: 100%)

> Merging [#1835](https://codecov.io/gh/aframevr/aframe/pull/1835?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1835   diff @@
==========================================
  Files           103        103          
  Lines          3598       3598          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2941       2941          
  Misses          657        657          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [e581833...0d55bf0](https://codecov.io/gh/aframevr/aframe/compare/e5818331c84db8f6dcdfb8da52de812add60cc09...0d55bf02fd880f206594ec3ede05eef6c3708727?src=pr)
  Go here https://aframe.io/

These two demo cannot show
- 360 Video https://aframe.io/examples/showcase/videosphere/
- Panorama https://aframe.io/examples/showcase/sky/
 You are welcome, looks awesome!
 videosphere only can show on PC browser.
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1832?src=pr) is 81.61% (diff: 60.00%)

> Merging [#1832](https://codecov.io/gh/aframevr/aframe/pull/1832?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **0.03%**

``` diff
@@             master      #1832   diff @@
==========================================
  Files           101        102     +1   
  Lines          3569       3573     +4   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2914       2916     +2   
- Misses          655        657     +2   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [9af186e...4362fa1](https://codecov.io/gh/aframevr/aframe/compare/9af186e1969002d1fefe1d3258603dc1570df31d...4362fa1527355e126a254ee67486b2bf7d887e49?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1831?src=pr) is 81.64% (diff: 100%)

> Merging [#1831](https://codecov.io/gh/aframevr/aframe/pull/1831?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1831   diff @@
==========================================
  Files           101        101          
  Lines          3569       3569          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2914       2914          
  Misses          655        655          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [9af186e...2023433](https://codecov.io/gh/aframevr/aframe/compare/9af186e1969002d1fefe1d3258603dc1570df31d...2023433e3f4b3227ca0879dfae600ec4f0b5432c?src=pr)
  This information would help us identify more easily if there's a real bug or if it's user error, and give us a realistic code snippet to use to fix a bug.
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1830?src=pr) is 81.64% (diff: 100%)

> Merging [#1830](https://codecov.io/gh/aframevr/aframe/pull/1830?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1830   diff @@
==========================================
  Files           101        101          
  Lines          3569       3569          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2914       2914          
  Misses          655        655          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [61c9222...2a95a64](https://codecov.io/gh/aframevr/aframe/compare/61c922298c9612c4b7e44e7e13513d6fab0ebe49...2a95a6405a22c1d736db90356318fa4933327e55?src=pr)
 Steps to reproduce are great but even better, IMO, is a working demo if available.  It's easier to ask for more and get less than visa versa.
 Updated with @dmarcos 's idea; much softer.
  No spaces front or back
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1829?src=pr) is 81.64% (diff: 100%)

> Merging [#1829](https://codecov.io/gh/aframevr/aframe/pull/1829?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1829   diff @@
==========================================
  Files           101        101          
  Lines          3569       3569          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2914       2914          
  Misses          655        655          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [61c9222...36fde17](https://codecov.io/gh/aframevr/aframe/compare/61c922298c9612c4b7e44e7e13513d6fab0ebe49...36fde178d3dc0ad7156a987c5d9035148c8ef2e5?src=pr)
  *\* Description **

Adding additional material attributes to the Standard material.

Demo: https://samsunginternet.github.io/a-frame-demos/super-standard.html

**Changes proposed:**

Add additional attributes to the Standard material to allow for the use of:
- Spherical Environment Maps
- Displacement Maps
- Normal Maps
- Ambient Occlusion Maps
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1826?src=pr) is 82.53% (diff: 94.54%)

> Merging [#1826](https://codecov.io/gh/aframevr/aframe/pull/1826?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **0.79%**

``` diff
@@             master      #1826   diff @@
==========================================
  Files           103        103          
  Lines          3598       3648    +50   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2941       3011    +70   
+ Misses          657        637    -20   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [973b69b...6e3169d](https://codecov.io/gh/aframevr/aframe/compare/973b69b76689560249e1f0831d2a2a347ebb452b...6e3169db2f142e72e109833a63efde103bd505db?src=pr)
 Sure, I'll revert those out.
 @dmarcos do you think anything else needs to be done on this PR?
 Yeah i'll take a look. 
 Environment maps don't seem to emit anything once they are loaded I could check in a setInterval until it passes but that is a little hacky. I couldn't see how you were checking loading for cube envMaps.
 It's fine I will add a el.emit('envmap-loaded') to both and the write tests for both to listen for that.
 I have added tests for environment maps and fixed a bug when loading cube environment maps via 6 urls.
 I think that is everything.
I don't feel comfortable resolving the conflicts as my git is showing me it is the whole file in conflict some how?!  Would someone else be able to resolve it?
 About the example I will put something together later once I have some assets I feel comfortable sharing. The Ninja is from three.js and sky sphere photo has people in.
 I think that has merged correctly.
I had a weird bit where some code had been duplicated. Fixed. PR looks sane. Tests pass.
 Thanks for your help, I'll do a rebase on Monday, taking a day off
tomorrow. :)

On Sun, 21 Aug 2016, 00:10 Marko Kungla, notifications@github.com wrote:

> #67e1ecd worked and can be squashed when merging but good idea to sort out
> your fork anyway :)
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/pull/1826#issuecomment-241229271, or mute
> the thread
> https://github.com/notifications/unsubscribe-auth/AEB5MrMh95TVszUCW5O0kvsTtZs-jLJzks5qh4lVgaJpZM4JobKS
> .
 Apparently I cannot let myself relax :stuck_out_tongue_closed_eyes: rebased it to make the commits nice.
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1825?src=pr) is 81.73% (diff: 100%)

> Merging [#1825](https://codecov.io/gh/aframevr/aframe/pull/1825?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1825   diff @@
==========================================
  Files           103        103          
  Lines          3598       3598          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2941       2941          
  Misses          657        657          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [d3ad2e7...6cb79ae](https://codecov.io/gh/aframevr/aframe/compare/d3ad2e7ba343bc59d31582e471bbdd8235a68511...6cb79ae11bef587f888f8467ba5091ae2c802059?src=pr)
  I would like to see the ability to record and add additional cameras to scenes and export the views. Something similar to NVIDIA's ANSEL.
 @cvan @ngokevin was right I am definitely interested in your that too
  **Description:**
## **Changes proposed:**
## 
## 

CHANGELOG.md says "Default camera is now positioned at 0, 1.6, 0 rather than 0, 1.8, -4. In VR mode, the 1.6m height offset as defined by camera.userHeight is removed. (#1474, #1718)"

but in v0.3 doc, still v0.2 value of Default camera position (0, 1.8, -4).

My English is so poor~Sorry
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1821?src=pr) is 81.64% (diff: 100%)

> Merging [#1821](https://codecov.io/gh/aframevr/aframe/pull/1821?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1821   diff @@
==========================================
  Files           101        101          
  Lines          3569       3569          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2914       2914          
  Misses          655        655          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [b55700e...e56b661](https://codecov.io/gh/aframevr/aframe/compare/b55700e96963e37a01441f6f7dd31d58c51e803d...e56b661f6592b46bc496e9a523af166fc0f10725?src=pr)
  Hi, i tried updating a-animation from, to attributes with `animationEl.setAttribute('to','0 0 1')`
but it never goes right!
after calling aSceneEl.appendChild(animationEl) , it always take the first value and never the updated value
- A-Frame Version:0.3.0
- Platform/Device:Kali Linux 2.0 / Chrome Version 50.0.2661.86 (64-bit)
 I am having the same issue and I believe a-animation will not respond to data change via setAttribute.

You can try to use component api to bind an a-animation to the object. which has been explained in https://aframe.io/docs/0.3.0/guides/build-with-components.html

Sample Script:

```
  /**
   * Setup fade-in + fade-out.
   */
  setupFadeAnimation: function () {
    var data = this.data;

    if (data.target.is('set-image-animation-ready')) { return; }

    // Create animation.
    var animation = document.createElement('a-animation');
    var animationData = {
      attribute: 'material.color',
      begin: 'set-image-fade',
      direction: 'alternate',
      dur: data.dur,
      repeat: 1,
      from: 'white',
      to: 'black'
    };
    Object.keys(animationData).forEach(function (attr) {
      animation.setAttribute(attr, animationData[attr]);
    });

    // Append animation.
    data.target.appendChild(animation);
    data.target.addState('set-image-animation-ready');
  }

```
 I wonder what is the reason a-animation does not respond to updates? Will this be fixed or is it so by design?  Looking at this one.
  Minor fixes for ramp up to 0.3.0
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1816?src=pr) is 81.93% (diff: 100%)

> Merging [#1816](https://codecov.io/gh/aframevr/aframe/pull/1816?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1816   diff @@
==========================================
  Files           100        100          
  Lines          3548       3548          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2907       2907          
  Misses          641        641          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [fb09d80...711efb0](https://codecov.io/gh/aframevr/aframe/compare/fb09d807ca1d1cb537e20c0cb9f454cbf3ddb8fd...711efb0157d7f17bc282c1e0835057adeefddc3b?src=pr)
  This has been bothering me; need consistency! :)
 We could but it seems a bit out of place; we require a space between `function` and `(`, and then `)` and `{`.  IMO spaces looks much more elegant and easy to read.
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1813?src=pr) is 81.93% (diff: 100%)

> No coverage report found for **master** at 8903e03.
> 
> Powered by [Codecov](https://codecov.io?src=pr). Last update [8903e03...854108f](https://codecov.io/gh/aframevr/aframe/compare/8903e030956400d2ae086fee33ac173526e048b3...854108f82dcb3f7a777b49d5455f51f535df9797?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1812?src=pr) is 81.93% (diff: 100%)

> Merging [#1812](https://codecov.io/gh/aframevr/aframe/pull/1812?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1812   diff @@
==========================================
  Files           100        100          
  Lines          3548       3548          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2907       2907          
  Misses          641        641          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [2dad01c...de74077](https://codecov.io/gh/aframevr/aframe/compare/2dad01cb2a54a3467a41d6d25dacbdf711015354...de7407717c9585ebb9d6543405619eb7de5eb55e?src=pr)
  **Description:** trying to see examples on https://aframe.io/examples/showcase/hello-world/ but they don't load, the dev console shows errors of requests trying to load files from localhost, like: 

```
Blocked loading mixed active content “http://localhost:9000/examples/boilerplate/hello-world/”
Blocked loading mixed active content “http://localhost:4000/examples/index.json”
```

in the top of the html file (ctrl+u) there are some urls pointing to localhost:

```
  data-site-base-url="http://localhost:4000"
  data-site-root-path="/"
  data-site-home-url="http://localhost:4000/"
  data-lib-home-url="http://localhost:9000"
  data-lib-examples-url="http://localhost:9000/examples"
```
- A-Frame Version: the one deployed in aframe.io
- Platform/Device: firefox nightly, ubuntu 16.04
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1810?src=pr) is 81.93% (diff: 100%)

> Merging [#1810](https://codecov.io/gh/aframevr/aframe/pull/1810?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1810   diff @@
==========================================
  Files           100        100          
  Lines          3548       3548          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2907       2907          
  Misses          641        641          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [13f11e5...a9bfd5c](https://codecov.io/gh/aframevr/aframe/compare/13f11e588fa9e0028dd6ed5bc972bc1ffdbac9b8...a9bfd5c48f50588fde065244a43dadec09f24100?src=pr)
  **Description:**
Is there a way to have opacity attribute on  a-entity so all objects included can be hide and show triggered by an animation?
- A-Frame Version: 0.2.0
- Platform/Device: All
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1808?src=pr) is 81.93% (diff: 66.66%)

> Merging [#1808](https://codecov.io/gh/aframevr/aframe/pull/1808?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **<.01%**

``` diff
@@             master      #1808   diff @@
==========================================
  Files           100        100          
  Lines          3547       3548     +1   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2906       2907     +1   
  Misses          641        641          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [8d6bdff...a29d876](https://codecov.io/gh/aframevr/aframe/compare/8d6bdff3bc2ea4ff16b00d17c48c0fefffb799c5...a29d87694a278cbb1ee6deabb2428206c130cfe9?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1807?src=pr) is 81.92% (diff: 100%)

> No coverage report found for **master** at b4f0af1.
> 
> Powered by [Codecov](https://codecov.io?src=pr). Last update [b4f0af1...69c3aa1](https://codecov.io/gh/aframevr/aframe/compare/b4f0af188d422c5361162c2946827db0ecf0a516...69c3aa1119bc48cd29c76bbdc1f6ba7198fbe24f?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1806?src=pr) is 82.48% (diff: 86.66%)

> No coverage report found for **master** at 8903e03.
> 
> Powered by [Codecov](https://codecov.io?src=pr). Last update [8903e03...6db1133](https://codecov.io/gh/aframevr/aframe/compare/8903e030956400d2ae086fee33ac173526e048b3...6db1133ae99c0ce45647bb25937574d6ff3521fa?src=pr)
   ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1803?src=pr) is 81.93% (diff: 50.00%)

> No coverage report found for **master** at a8b3c4c.
> 
> Powered by [Codecov](https://codecov.io?src=pr). Last update [a8b3c4c...05deb4d](https://codecov.io/gh/aframevr/aframe/compare/a8b3c4c719232211bca8e086520404299469b44f...05deb4de1b081e75528feedcc3e8f2c20f924676?src=pr)
  This does fix the issue, but the grabbing cursor is gone.
 All good with the CodePen now.
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1798?src=pr) is 81.94% (diff: 100%)

> Merging [#1798](https://codecov.io/gh/aframevr/aframe/pull/1798?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **<.01%**

``` diff
@@             master      #1798   diff @@
==========================================
  Files           100        100          
  Lines          3546       3545     -1   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
- Hits           2906       2905     -1   
  Misses          640        640          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [115cecc...3620676](https://codecov.io/gh/aframevr/aframe/compare/115cecc59e96db58722a479985ac6351827c34e8...36206766632b5b7ecaed40a89cd27d7fc676dccc?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1794?src=pr) is 82.03% (diff: 100%)

> Merging [#1794](https://codecov.io/gh/aframevr/aframe/pull/1794?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will not change coverage

``` diff
@@             master      #1794   diff @@
==========================================
  Files           100        100          
  Lines          3546       3546          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
  Hits           2909       2909          
  Misses          637        637          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [47e3cbe...003ff49](https://codecov.io/gh/aframevr/aframe/compare/47e3cbe3f5e0c8c0e4e1a50e4ac4765660ff32eb...003ff49c04fcf1b6c9db63a4ca6e3bb472ab551c?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1792?src=pr) is 82.06% (diff: 100%)

> Merging [#1792](https://codecov.io/gh/aframevr/aframe/pull/1792?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **0.02%**

``` diff
@@             master      #1792   diff @@
==========================================
  Files           100        100          
  Lines          3546       3551     +5   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2909       2914     +5   
  Misses          637        637          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [47e3cbe...650378c](https://codecov.io/gh/aframevr/aframe/compare/47e3cbe3f5e0c8c0e4e1a50e4ac4765660ff32eb...650378c6b373036bd68408f6fd45ace41fd38460?src=pr)
 Since you wait for the scene to be loaded... the lights defined in the html will be there already right?
Don't you need to check for lights in the scene at the start of setupDefaultLights, and not create them in the first place then? That would also make it even more in line with camera.
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1791?src=pr) is 82.03% (diff: 100%)

> Merging [#1791](https://codecov.io/gh/aframevr/aframe/pull/1791?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **0.02%**

``` diff
@@             master      #1791   diff @@
==========================================
  Files           100        100          
  Lines          3546       3546          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2908       2909     +1   
+ Misses          638        637     -1   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [84403f0...4d87294](https://codecov.io/gh/aframevr/aframe/compare/84403f08a109db7805ca3f26ba935afdffab1027...4d87294a7993179a60179872edf4f794e6ee7680?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1790?src=pr) is 82.03% (diff: 100%)

> Merging [#1790](https://codecov.io/gh/aframevr/aframe/pull/1790?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **0.25%**

``` diff
@@             master      #1790   diff @@
==========================================
  Files           100        100          
  Lines          3546       3546          
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2900       2909     +9   
+ Misses          646        637     -9   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [587eee7...59b372f](https://codecov.io/gh/aframevr/aframe/compare/587eee7de603dabe5678c21c080b29240724feee...59b372fc51cae61b19e670d9076a90b649d35e4f?src=pr)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1789?src=pr) is 81.78% (diff: 71.87%)

> Merging [#1789](https://codecov.io/gh/aframevr/aframe/pull/1789?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **0.14%**

``` diff
@@             master      #1789   diff @@
==========================================
  Files           100        100          
  Lines          3524       3546    +22   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2887       2900    +13   
- Misses          637        646     +9   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [58559fb...66b63ad](https://codecov.io/gh/aframevr/aframe/compare/58559fb4e21c7a7bf09aa2d85607e687b6abd757...66b63ad55931c6fb663260178ec8bf5a54ce3f86?src=pr)
 I am desperately needed to fix a cross domain issue, apparently this is not the solution, it shows the same error like before to me:

![image](https://cloud.githubusercontent.com/assets/5538753/18401230/144c73e8-770c-11e6-880e-9e58ec26cd45.png)
  ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1788?src=pr) is 81.85% (diff: 100%)

> Merging [#1788](https://codecov.io/gh/aframevr/aframe/pull/1788?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **0.06%**

``` diff
@@             master      #1788   diff @@
==========================================
  Files           100        100          
  Lines          3524       3511    -13   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
- Hits           2887       2874    -13   
  Misses          637        637          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [58559fb...9f78d98](https://codecov.io/gh/aframevr/aframe/compare/58559fb4e21c7a7bf09aa2d85607e687b6abd757...9f78d98bde2c3ec353a55da1ffb2e9a8887bd81e?src=pr)
  @ngokevin This issue interests me. Can I help?
 @ngokevin I am thinking that the script could be executed by NodeJS when running `npm start` and then shows in the output the grammar errors and typos. Any thoughts?
 @mkungla I understand your point. I agree, that would be a better way of doing it. Thanks for your feedback.
 @cvan Perhaps we could try it and compare with @ngokevin's suggestions to see which works best.
 @cvan Thanks, it's appreciated :)
 @ngokevin I have been experimenting with Gingerbread and it has been pretty inaccurate on correcting the errors of the MD files in docs. Upon every new line, it wants a capital letter and it tried to change `<a-scene>` to `<a-scan>`.
 @ngokevin Great idea! Should we also trim all the `.md` files stuff like `#`?
 I want to work on this..   ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1783?src=pr) is 70.95% (diff: 100%)

> No coverage report found for **master** at ce210cb.
> 
> Powered by [Codecov](https://codecov.io?src=pr). Last update [ce210cb...060a591](https://codecov.io/gh/aframevr/aframe/compare/ce210cbfaeebad8557c0c42745092de058e10e8f...060a591fc47a8d1f4158e3ee24b13e26be0a94f8?src=pr)
  One idea I had and have seen before is, instead of `this.blah, this` all the time, doing `'blah', this` and assuming that `this` holds the function if the first argument is a string. i.e:

```
module.exports.bind = function (fn, ctx) {
  if(typeof fn === 'string') fn = ctx[fn];
  return function bound () {
    return fn.apply(ctx, arguments);
  };
};

bind('onKeyUp', this);
```
 Yep; left off late at night.  Will add tests today!
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1782?src=pr) is 82.05% (diff: 93.33%)

> Merging [#1782](https://codecov.io/gh/aframevr/aframe/pull/1782?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will increase coverage by **0.12%**

``` diff
@@             master      #1782   diff @@
==========================================
  Files           100        101     +1   
  Lines          3548       3573    +25   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2907       2932    +25   
  Misses          641        641          
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [fb09d80...d091397](https://codecov.io/gh/aframevr/aframe/compare/fb09d807ca1d1cb537e20c0cb9f454cbf3ddb8fd...d091397d6868fabe1427620de304cd5533b05917?src=pr)
 Test added.
 Updates made!
  There was a small English grammar error in the FAQ documentation.

Text was: Why does my asset (e.g., image, video, model) not _loading_?
Text is now: Why does my asset (e.g., image, video, model) not _load_?

Closes Issue #1772 
  There is currently a grammar error in the FAQ documentation.

Currently the text says: _"Why does my asset (e.g., image, video, model) not loading?"_

I think it should be changed to either:
Why _is_ my asset (e.g., image, video, model) not loading?
or
Why does my asset (e.g., image, video, model) not _load_?
 @mkungla - Yep, I'll do it today. Because it's such a small change I wasn't sure if it's worthy of a pull request or just a quick change. PR incoming!
  A quick docs search didn't provide information about browser support.  It would be cool to provide a minimum browser version alongside the device / mobile support in FAQ.

We should also consider adding a brief device/mobile support block to the Docs "Overview" page as people will probably want to know this before getting started.
 I agree with CanIUse as a general rule but people look for browser names at a glance, and since the WebVR spec probably chances fairly slowly, it may be worth adding the browser names as keywords.
 Your link 404s for me, btw
  @ngokevin I like it, flexibility is always welcome in my opinion.
 @cvan Does this affect my work in https://github.com/aframevr/aframe-site/issues/110 and https://github.com/aframevr/aframe-site/issues/111 ?
 @Coder206 Noted!
 My fork of A-Frame now includes a Service Worker you can check in https://delapuente.github.io/aframe

The experiment allows revisiting demos offline after you already visited it while online, including the index of all demos.

Some of the current problems include:
  - [ ] Dealing with 360º video since cache API does not store 206 ranged responses. 
  - [ ] Adding the SW to the dev workflow in a non-intrusive way. Perhaps caching assets but not js files during development.
  - [ ] Improving first visit experience by pre-caching assets for VR experiences we know the user will visit sooner than later.

Regarding the last problem, I'm worried about space. VR demo experiences tend to be ephemeral but bandwidth consumers. Assets weight is why I prefer to be lazy when pre-caching.  **Description:**
`CustomEvent#target` is a read only property.
The removed line yielded an error when using strict mode.

**Changes proposed:**
- Remove assignment to `CustomEvent#target`
  **Description:**
Fixed a broken-link in documentation.

**Changes proposed:**
## \- Link points to the correct page now.
## 
  @ngokevin made a good point about using `NodeList.prototype.forEach`/`map` which probably wont fly on older Android/iOS.  Stick with the old I guess.
 @mkungla I submitted a PR with Array.from last week but @dmarcos thought we should use `Array.prototype.slice` instead so we could accommodate older browsers.
 @mkungla We could consider adding `querySelectorAll` to the `ANode` prototype which would return an array via `Array.prototype.slice.call(NodeList)` ; that way we're always working with an array when we query.
 Issues fixed.
  Tiny cleanup; `closestScene` starts with the current node so no need to repeat it with the ternary.
  **Description:**
Only literal a-entity elements were counted for aframe stats

**Changes proposed:**
counts all <a-*> elements excluding a-animations,  a-assets and it's children.

Not sure yet how and if this stat is updated when children are parsed / attached.
An alternative is to keep track of entities being created.
An addition could be to give stats on the different kinds of entities.

code review please if this is good programming / performance, ...
  Seeing this on everything on master.
 Closing this as I no longer see it, may have been a caching issue.
  - Shortens code to ones less QSA and one less `for` 
- Using forEach since `this.qsa` returns an `Array`
  re: https://github.com/aframevr/aframe/issues/798

Added as an attribute to not muddle the CSS classes, while still able to select with QSA.  This also adds to only `a-` elements as well as the `<video>` created by `material.js`.  

Purposely did not add to meta tag, the original canvas, or the `vr-mode-ui` elements as they're simply for VR mode in/out.

Let me know what you think of this.
 Updated!
 Added to VR elements and metas, updated test.
  I made the issue #1541 in another thread and I notice the same thing.
I tested v0.2.0 and the latest master branch in various devices, iPhone 6, Samsung Note 6, Redmi Note 4g and Samsung S6 with Google Cardboard. They all give the same result as @ngokevin testing.
As you guys mentioned it's the problem from webvr-polyfill but I think this is an important bug to A-Frame too.
My team has been trying to build a demo site with A-Frame but we really can't accept the display quality from the master branch, especially for text display. It's almost unreadable when the font size isn't huge enough on the screen.
It may increase the performance on mobile but I believe the current image quality isn't enough for quality production.
 I would like to reopen this, as it's still a problem on iOS 9 and below.
 This seems definitely not entirely fixed yet. Also on iOS 10 when you switch to VR-Mode when holding the Phone in Portrait-Mode.

I can reproduce it with the following example on an iPhone 6S with iOS 10 like this:
1. Open "https://aframe.io/examples/showcase/sky/" in Safari.
2. Hold your Phone in Portrait Mode & Switch to VR-Mode
3. Hold you Phone now in Landscape Mode --> you will see Blurry Textures
4. Quit VR-Mode
5. Hold your Phone in Landscape Mode & Switch to VR-Mode
6. Perfectly Sharp Textures

Is this still being addressed currently? Let me know if I can help in any way.
  As requested.
  **Description:**

Hi, I could not get the VideoSphere demo to work on Android or iOS devices. Is that a current limitation to the aframe.js library or is the demo code out of date? 

Specifically this one:
https://aframe.io/examples/showcase/videosphere/

I'd love to use aFrame for 360 video on mobile devices.
- A-Frame Version: Any
- Platform/Device: iOS, Android
  **Description:**
When I use video and videosphere in HTML5. I want to specify the width,height and position of the video player.  But It can't work. The web browser also shows the full screen and the video can be dragged any direction.
Who can help me? Thanks a lot
.
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360 Video</title>
    <meta name="description" content="360 Video — A-Frame">
    <script src="js/aframe.js"></script>
  </head>
  <body> <div style="width:300px; height:200px;">
    <a-scene>

```
  <a-assets>

    <video id="video" src="https://ucarecdn.com/bcece0a8-86ce-460e-856b-40dac4875f15/"
           autoplay loop height="200" width="300" controls="controls" ></video>
  </a-assets>

  <a-videosphere src="#video" rotation="0 180 0"></a-videosphere>

</a-scene>  </div>
```

  </body>
</html>
- A-Frame Version: 0.2.0
- Platform/Device:  PC computer
  **Description:** 

With 0.2.0 I can click on the window and walk around with the WASD keys. But with master, control stays with the editor often resulting in WASD characters being added to code accidentally. Autorun makes this extra frustrating.

Master: http://codepen.io/bryik/pen/dXgQdQ

0.2.0: http://codepen.io/bryik/pen/yJRQKr
- A-Frame Version: master
- Platform/Device: Desktop Chrome/Codepen
 I would imagine this is an issue regarding CodePen and not A-Frame.
 @bleonard252 I don't think so, Codepen works fine with A-Frame 0.2.0.
 Oh, yeah. Then maybe it's priority? Idk
 Hmm, adding [a camera with wasd-controls but no look-controls](http://codepen.io/bryik/pen/AXNvYZ) fixes the issue. 

I guess the problem is with look-controls?
 Are you sure this is fixed? I'm still experiencing the problem with the latest dist: https://codepen.io/bryik/pen/bZzXGP
 @ngokevin Do you have a link I could try? How do I test it?
 Dang. The only other clue I came across was that the problem does not occur with the [dist from 26 days ago](https://github.com/aframevr/aframe/blob/43cfbc0c18cc1da1d2d0230f75643fdfb2252a28/dist/aframe.js). Not sure if that helps.

Codepen: https://codepen.io/bryik/pen/XKOXWg
 Ya, that works!

The grabby hand is gone though.
  spot and directional light have a target, this lets the user set it with a selector.

when no target is set, the target is added to the light itself, with an offset of (0 0 -1), this intuitively let's you control the spotlight direction with it's rotation. (pointing -Z).
haven't done this with directional lights, so not to break anything, when someone sets directional by position offset, pointing to 0 0 0 by default, or to the new target.

a test is here : http://www.frederickdesimpel.be/test/webVR/Aframe/lighttarget/

might need further tests to see if anything strange happens when removing the component.

Also fixed a bug where spotlight angle was only set with degToRad when it is created, further updates were set in radians.
 Just found out it doesn't work on firefox.

EDIT: The error in firefox with the above test has something to do with [#1483](https://github.com/aframevr/aframe/pull/1483).
 2nd commit fixes firefox... i didn't set the target on light creation. Which is odd that it worked in chrome then... does chrome fire the update handler multiple times ?

I added a switch case to check for the different cases of the key. Now you can also set target back to null.

[test example here](http://www.frederickdesimpel.be/test/webVR/Aframe/lighttarget/test2.html). try changing the target of spotlight between #redsphere and #whitesphere or null in DOM inspector. If you set it to null, you can also change rotation of spotlight.
 I'm looking into testing... still eluding me a bit...

EDIT: but making progress...
 Hold on.. it still doesn't behave as expected...
 Ok. It should work pretty robust now.

Made the getlight function a method inside the component, so i could set this.defaultTarget.
Moved the spotlight specific setup of that defaultTarget inside the setlight method. It is now added to the light elements object3D group, instead of to the light itself.
Added var self in the update method, so i could reference this.defautTarget in the each function.

Added a temporary fix for [issue #1624](https://github.com/aframevr/aframe/issues/1624), otherwise i couldn't get spotlight orientation correct.

there's a suite of unit test for light target, as wel as for both bugfixes.

I'll see if i can still make a test example before 0.3 releases...
 rebased and squached..
  **Description:**
Model scale is really off.  Very noticeable in the Rift/VIVE headsets.

**Changes proposed:**
Updates the scene scale so that it's more proportional to the size of the user and contents of screen.
  All references to `parentEl` could be removed here and elsewhere since it's not needed; `parentNode` should cover everything.  Or is `___El` a standard?
  **Description:**
Saw this when looking for info for the docs.

I might be wrong, but wouldn't it make more sense that the object3D is already present when the event is fired?

**Changes proposed:**
first attach the object3d then emit the child-attached event.
  Not sure why git keeps adding the other commits... that's just keeping things synched right?

Anyways, had an error in my previous PR about this docs section, and some more updates:

**Docs: event section of entity.md**
fixed error in list of events
added event schemachanged
fixed error in componentchanged example
 using evt.detail instead of evt directly
added child-attached example
  **Description:**
Issue #1628 

Documentation suggests, that: 

> Positive Y Axis extends down

It's the other way around.

**Changes proposed:**
Literally this:
`Negative Y axis extends down. Positive Y Axis extends up.`
  The goggles icon is a must, IMO.  Users don't care what it takes to get the 3D experience, full screen or not -- they want to be promised VR.
  Much shorter than a `for` loop.

This is the third or fourth usage of `A.p.s.call` -- should we consider a `ANode.prototype.query` method for querying children and returning an `Array` as a standard?
  **Description:** The hand-controls component is adding events twice, once during a manual "addEventListeners()" call in init() and a second time when play() is automatically called after update(). Additionally, a few other changes were made based on [@ngokevin's comment on the issue](https://github.com/aframevr/aframe/issues/1704).

**Changes proposed:**
- Remove "addEventListeners()" call in init()
- Rename "stop()" to "pause()"
- ~~Move addEventListeners/removeEventListeners into pause() and play()~~
- Fix typo in component docstring ("HAndle" -> "Handle")
 OK. I redid the last commit. The add/remove eventListener methods should be back as they used to be. 

Still new at this, so let me know if the PR didn't update correctly.
  **Description:** I think the hand-controls component is adding events twice, once during a [manual "addEventListeners()" call](https://github.com/aframevr/aframe/blob/master/src/components/hand-controls.js#L27) in init() and a second time when play() is called after update().

Also the ["stop()" method](https://github.com/aframevr/aframe/blob/master/src/components/hand-controls.js#L34) should be "pause()", right?

I can do a PR, if desired.
- A-Frame Version: master
- Platform/Device: all
 OK, I'll make the changes and do a PR.
  @dmarcos mentioned Array.from doesn't meet support requirements so this PR reverts to old method of NodeList to array conversion.
  how can i Relative Rotation sky but button stop on that  ?

<a-sky id="sky"  rotation="0 -60 0" radius="5000" color="#fff" >
         <a-animation attribute="rotation" from="0 1.5 0" to="0 -358.5 0" begin="0" dur="160000" repeat="infinite" easing="linear"></a-animation>
         </a-sky>

but the button will move with the sky !!
thanks so much 
  My first Pull Request for Aframe, or the whole of github for that matter...

Extended the table with each events detail properies. 
Added componentremoved event
Changed titles order, with example last
 hmm. something went wrong...
 happy to do something in return, however small :-)
  I was triggering an animation with sound, exactly using

```
document.querySelector('#gruppo_uno').addEventListener('sound-ended', function(){
       document.querySelector('#vignetta1_arrow_up').setAttribute('visible','true');
    });
```

but on IOS sound-ended does not even seem to work, and i don't seem to get any audio playing.

I tried even with simpler stuff like 

```
  <a-scene>
  <a-entity sound="src: assets/audio/03.vignetta3.mp3; autoplay: true"></a-entity>
</a-scene>

```

but i get no sound from IOS. Any idea?
- A-Frame Version: 0.2.0
- Platform/Device: IOS 
  **Description:**
Can 'a-sky' support any degree, not only 360?  
for example: 180 degree. and then, the mouse can only drag the area of the 180 degree.
thanks very much!
- A-Frame Version:
- Platform/Device:
 I just try this, but it doesn't have any effect... please for some help, thank you!

```
<a-sky id="background" src="plan.jpg" theta-length="180">
```
 Hi.
I encountered the same problem with 0.3.2 version.
 ``<a-sky theta-length="90" src="#sky"></a-sky>`` has no effect.
But the following works:
```<a-entity geometry="primitive: sphere; thetaLength: 90; radius: 5000; segmentsWidth: 64; segmentsHeight: 20" scale="1 1 -1" material="src: #sky; shader: flat"></a-entity>```
  Another small nit to knock down  code.
 If we want to support old browsers without `Array.from`, we should back this out (https://github.com/aframevr/aframe/pull/1642) and use `Array.prototype.slice` (https://davidwalsh.name/nodelist-array).
 Updated.  Feel free to just close if you don't want it
 Closing in favor of another.
  This seemed structured weirdly so I made a more simple update.
 My bad, didn't know that existed!  Sorry!
  **Description:**
- A-Frame Version:0.2.0
- Platform/Device:iphone
  Is there any solution for this problem by now? I have:
- video without sound in iOS Safari
- sound and no video when I pin in it to the homescreen
- video and sound from other sources than the video in Chrome (Dektop)
- no problems in Safari (Desktop) @antesberger i only get video without sound on iOS Safari. Downloading to homescreen gives me sound and video. I'd check the filesize/encoding of your video maybe?

My big issue is that in iOS Safari even if I write my own sound handlers I get complaints from some global component about the `poolSize` that I don't get on desktop. @ngokevin is there a default `poolSize` that gets set only on mobile?

I can't figure out how to identify which entity is playing my random sound (via bubbling up I guess?) and has the default pool size. 

Frankly I'm confused as to how Aframe is even aware I'm playing these audio files, as this warning occurs even when the `<audio>` are outside the `<a-scene>` and `<a-assets>` and triggered via JS.

Aframe version 0.5.0 ```
components:sound:warn All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute. +8s
```

Which component is this?  **Description:**

On IOS and Mac OS, safari browser!! There is no 'navigator.getGamepads()' function! so this cause html could not run properly! In my html file, there is only a "a-sky" entity. very simple~

code in aframe.js:
`/**
- Tracked controls system.
- It maintains a list with the available tracked controllers
  */
  module.exports.System = registerSystem('tracked-controls', {
  init: function () {
    var self = this;
    this.controllers = [];
    if (!navigator.getVRDisplays) { return; }
    navigator.getVRDisplays().then(function (displays) {
      if (displays.length > 0) {
        self.vrDisplay = displays[0];
      }
    });
  },
  
  tick: function () {
    //var gamepads = navigator.getGamepads();  <== error in here!
    var gamepads = navigator.getGamepads?navigator.getGamepads():[]; <== run well!
    var gamepad;
    var controllers = this.controllers = [];
    var i;
    for (i = 0; i < gamepads.length; ++i) {
      gamepad = gamepads[i];
      if (gamepad && gamepad.pose) { controllers.push(gamepad); }
    }
  }
  });`
- A-Frame Version:master
- Platform/Device: iphone 6s and Mac book pro, safari
  **Description:**
- A-Frame Version:master
- Platform/Device:all

I know set Gemotry.vertices to null is well for performance. but some times i want align entitys on the vertices. this can be very useful..
So, is there any way to get the vertices? or add a callback at later version??
Thanks!~~
: P
 yeah...you're great!~~ I've found the position prop but don't know it flattened outt!
Haha...thank you...
  This is the first I've heard of budo being slow, I think as with most code it's just a matter of benchmarking to determine the culprit. Can you provide more details about what is slow? Maybe a test repo I can try on Windows?
 Just FYI — I noticed you guys are still using budo in AFrame. If anybody is experiencing LiveReload hangs/issues with budo, try installing the following branch which does not rely on tiny-lr, but a custom WebSocket implementation. It should be a bit faster and more reliable and runs on the same server/port as budo.

```sh
npm install mattdesl/budo#feature/livereload-rework
```

See here for details:  
https://github.com/mattdesl/budo/issues/194  Description:
A number of places in the source assumed that the only possible scene would be an 'a-scene' element. In most places in the code, however, the .sceneEl (property on any element contained in a scene) and .isScene (property on a scene) are used. By directly using 'a-scene' (when searching for elements, and so on), we cannot create new kinds of scenes.

Changes proposed:

replace different references with existing alternatives (el.sceneEl, el.isScene)
add new closestScene() method to a-node.js, and use it instead of closest('a-scene')
add new findAllScenes() method to utils.js, and use it instead of document.querySelectorAll('a-scene');
 I'd submitted a PR on this already, but it had extraneous stuff in it.  So, I cleaned out my repository, re-applied the changes an resubmitted.
  **Description:**
A number of places in the source assumed that the only possible scene would be an 'a-scene' element.  In most places in the code, however, the .sceneEl (property on any element contained in a scene) and .isScene (property on a scene) are used.  By directly using 'a-scene' (when searching for elements, and so on), we cannot create new kinds of scenes. 

**Changes proposed:**
- replace different references with existing alternatives (el.sceneEl, el.isScene)
- add new closestScene() method to a-node.js, and use it instead of closest('a-scene')
- add new findAllScenes() method to utils.js, and use it instead of document.querySelectorAll('a-scene');
 Ignore this.  I need to clean up the commit (I can't figure out why it decided all of scene.js was changed, but I doubt you want this in your build).  I'm going to start again.
 I am not sure.  It only did it to that file.  I don't think I'm using hard tabs (using vs-code, I thought it defaulted to spaces).
  Removed misleading camera configurations under examples.
Surrounded cameras with entities where it was causing problems
under examples, like A-Frame Logo, Curved Mockups etc.
  Hi!
A frame looks like a really good framework, but I have some issues with the API.
I see that there are only position, rotation and scale attributes but no transform matrix. There are many cases where handling this data as one transform matrix is quite easier (currently having such a case myself).
I guess internally these are combined to a transform matrix, so this should only be an API extension.
However I see a problem with this because then the parameters position, rotation and scale are interlinked with the transform matrix.
Is this intended design or just some missing feature?
- A-Frame Version: 0.2.0
- Platform/Device: -
 @ngokevin 
Thanks. It seems I have to dig a bit deeper to do this via three.js. Writing a higher order component sounds like a good alternative but a bit unnecessary to decompose a matrix to then compose it again.
 > Yeah, I would just apply the matrix to the Object3D.

In this case other components like those provided by `networked-aframe` don't react to changes, as in modifying the transform of an Object3D directly won't sync over the network. `networked-aframe` only works when using the a-frame APIs directly to update data and avoiding the underlying Three.js objects (f.e. only using `setAttribute('position', ...)`.  **Description:**

The Flat vs VR explanation on "Device & Platform Support" is great.

However, a doc about "UI Controls" in general, 
incorporating the user's motion (WASD, touch, etc.) and view (look-controls, etc.), 
would be _extremely_ helpful!

There are so many potential inputs and outputs for A-Frame now, 
even without considering physics, 
it's very difficult to define suitable interfaces for all potential devices.

Even just a list of all available options (both for looking and for moving) would be very useful.
- A-Frame Version: 0.3.0 / Master Docs
- Platform/Device: N/A
 That works!
 This may be beyond the scope of AFrame docs, 
but it sure would be nice to have a page, even a community-maintained wiki page, where devs could keep track of the ever-changing HTML5 browser issues that directly affect AFrame scenes. Basically, a list of "gotchas" that apply to relevant HTML5 APIs.

For example, iOS requires a user event to trigger audio. That requirement actually got _more_ specific in iOS9--now it apparently requires a touchend/mousedown event (a touchstart event won't suffice anymore).**

These issues are often poorly documented (good luck learning about that iOS9 change in Apple Docs!), and often they narrowly impact advanced HTML5 techniques utilized in AFrame scenes. 

Maybe a resource exists elsewhere for this, but I haven't seen it. 

A simple (github) wiki page, linked to from Docs in the Community section, would be a great start. 

I have a feeling it would naturally be used and maintained without much effort. It could prevent a lot of needless headaches, help devs more efficiently maintain their scenes when something like that iOS9 change occurs, and create another incentive for devs in general to pay attention to the AFrame community.

**fixed in iOS9.0.3
^--(these are exactly the details I'm referring to, haha)
  **Description:** Just ran into this while testing pause() on a component attached to the same entity as vive-controls.

**Changes proposed:**
- Change "removeEventLister" to "removeEventListener"
  **Description:**
As of now passing a .dds `src` to a material will cause the component to interpret it as a video and not work properly.

Is there any intention of implementing DDS support into aframe?

In the meantime is there any workaround to get .dds files to load properly?

Thanks!
 So I guess that's a `no` on a first-party implementation.

Gonna go the custom component route then, thanks.
 @Pupix 
Was wondering if you got this to work? I'm trying to wrap my head around it and can't load in the .dds texture at all. Any help would be most appreciated @JunkYardRobotBoy I've made a custom component as kevin suggested. 
Something like this

```js
AFRAME.registerComponent('texture', {

    /** CONFIG ***/

    schema: {
        src: { type: 'src' }
    },

    /** LIFECYCLE ***/

    init() {
        this.texture = null;

        this._loader = new THREE.DDSLoader();
    },

    update() {

        this.texture = this._loader.load(this.data.src);

        // Do whatever with this.texture here
    }

});

```


and use it like so

```js
const entity = document.createElement('a-entity');

entity.setAttribute('texture', `src: url(${paths.texture})`);
window.scene.appendChild(entity)
``` @Pupix 
Cheers! Thanks for this. Trying to set it as a cube-env-map on some gltf models now!
Thanks heaps!  **Description:**

Today when i test demo on https://github.com/aframevr/awesome-aframe, I found that all the components's demo in my phone are bad!  This is big trouble becase last time in a month ago them are very well!
Now, I test the example in https://aframe.io/examples/ , also bad!
what happen?? when i put my phone horizontal, and click webVR button into VR mode, the screen's orientation is displays vertically.. I mean that screen split in two pictures in horizontal, but every picture displayed vertically, and DeviceMotionEvent also works bad!

the error is like this:
![wrong_01](https://cloud.githubusercontent.com/assets/9690703/17029900/c03e1cb8-4f9f-11e6-8223-57137300e9ec.jpg)

![wrong_02](https://cloud.githubusercontent.com/assets/9690703/17029523/1a745ef6-4f9e-11e6-8ef1-52f583e2a508.jpg)

In fact the right result should be like this:
![right_01](https://cloud.githubusercontent.com/assets/9690703/17029530/1cb28ecc-4f9e-11e6-8b67-b5576bf63d4f.jpg)

![right_02](https://cloud.githubusercontent.com/assets/9690703/17029921/dafb6cc2-4f9f-11e6-84e5-111402698fb9.jpg)

I have some test, and find that if I put my phone horizontal before the web complete! then it works fine in horizontal, but i can't rotate my phone to vertically, becase the problem will happen again! if I put my phone horizontal after the web complete, it works bad with wrong orientation!!

er.....someone understand????? this bug not happen in iphone's safari!~
- A-Frame Version: Latest version
- Platform/Device: Android 4.4.0 Sumsung Galaxy Note2 N7100
 oh no...not just my device... I have test  some other device ....and all bad! so.. is the file "https://aframe.io/aframe/dist/aframe.js" or file "https://aframe.io/aframe/dist/aframe.min.js" had modified??? 
And i have test some other example at "https://github.com/aframevr/awesome-aframe", I find some example use other file address like "http://drawvr.com/tron/aframe.min.js"..the problem also happen...so I don't know if the last version have the problem or the bug always exist... (in fact i remember last test the demos are fine in one or two month ago! but now i'm not sure!!  ~~(_._)~~~)

Thanks for reply..... please Identify the problem. in Android device, chrome..version?? er... my device's chrome version is 51...other device's version unknow. But the examples all rendered well!!

step:
1. put your android device vertically and visit examples at https://aframe.io/examples/showcase/anime-UI/ or other website.
2. when the webpage load complete, click "vr mode" button.
3. put your device horizontal!  <== running bad! two pictures split along Xaxis but every picture's orientation along Yaxis...
 @michael829 

> oh no...not just my device... I have test some other device ....and all bad!

can you post 
1. Android Versions
2. Which mobile browser
you tested and have this problem. 

@dmarcos I can reproduce  this on Android 4.4.4 browsers with WebKit engine, Firefox works still fine.
So probably problem is coming from some latest updates for android 4.x. Since when I now powered up my testing (also Samsung) phone, it  made lot of updates including "Android System updates" and both Android Browser and Chrome got updated and indeed after these updates seems that orientation is messed up on all WebKit browsers, while it was working before just fine. Definitely worth investigating since this problem now persists on `master`. 
 oh Thanks god...!~  this problem are happen to Android webkit browser....my tested device are android and browser are webkit browser... no firefox..you know, most people are use webkit browser... so I didn't expect it works fine on Firefox and have no test on Firefox... so sorry...

And.. I have't update my device since last june....my Android version is Android 4.4.4...Chrome version is 51.0.2704.81 ...

Thank you for reply...very thank you!~
  **Description:**
Fixes https://github.com/aframevr/aframe/issues/1129

I suspect this one will require much more work.  I've run tests and all passes but things to consider:
-  Is this a breaking change moving forward where API docs must be updated?  Is it work the breaking change?
-  What other components may need updating to accommodate an array instead of a NodeList?
  should this be implemented as a component/system?
 I'm gonna try to take a look into this, hopefully will have a PR for this soon
 @ngokevin yeah pretty much! 
If it was possible, we'd have to do some weird stuff to the DOM to add a <meta> tag (then also some verification step), which, as a concern, might be better left off for the user to take care of themselves.  **Description:**
Fixes #704 

**Changes proposed:**
- One reservation here is that the `value` method can get called many times and that this warning may become overwhelming.  Let me know what you think.
  **Description:**
Many examples use the `begin` attribute instead of new `delay` attribute so I've fixed them to avoid warning.  I've also updated a broken image path.
  **Description:**
The "Declarative" links on the A-Frame Examples page are 404'ing  :(

**Changes proposed:**
- Remove said links until the examples are in place.
  **Description:**
WebVR uses the OpenVR SDK and thus supports the HTC Vive. I've tested it myself :)

**Changes proposed:**
- Add HTC Vive to list of compatible platforms on the index page.
  Not really an issue but... Wouldn't it be better to rename the cursor component to reticle, and have a regular cursor component as well ?
 yeah, a regular cursor would be the mouse cursor when on desktop...

Or come to think of it... in VR you can have both a gaze reticle, and a virtual mouse cursor if someone makes a vr GUI element with a 'mouse' or for instance text area cursor..

renaming might indeed be cumbersome, but the longer you wait...
  As dependencies where update last time around release of 0.2.0 then it would be wise to check over and update these for 0.4.0 since only some got updated for 0.3.1. Since some dependency updates may fix some issues, introduce new issues and some dependencies currently used are about become deprecated (or have their dependencies which are about to become deprecated)!

<table>
<caption><h3>Dependencies (Last updated @ 20 Aug 2016)</h3></caption>
<thead><tr><th>Package</th><th>Currently used </th><th>Latest Version</th><th>To be used for 0.4.0</th></tr></thead>

<tbody>

<!-- browserify-css -->
<tr>
<td><b>browserify-css</b></td>
<td><code>0.8.4</code></td>
<td><code>0.9.1</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
This update adds a onFlush option and  bug fixes for `processRelativeUrl` and few other BUGS
<br>
</td></tr>

<!-- debug -->
<tr>
<td><b>debug</b></td>
<td><code>^2.2.0</code></td>
<td><code>2.2.0</code></td>
<td><code>^2.2.0</code></td>
</tr><tr><td></td><td colspan="3">
No changes there
</td></tr>

<!-- deep-assign -->
<tr>
<td><b>deep-assign</b></td>
<td><code>^2.0.0</code></td>
<td><code>2.0.0</code></td>
<td><code>^2.0.0</code></td>
</tr><tr><td></td><td colspan="3">
No changes there
</td></tr>

<!-- document-register-element -->
<tr>
<td><b>document-register-element</b></td>
<td><code>#8ccc532b7</code> </td>
<td><code>1.0.0</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
Should not use commits as dependency
<a href="https://github.com/WebReflection/document-register-element/pull/55"  target="_blank">WebReflection/document-register-element/pull/55</a>
</td></tr>

<!-- object-assign -->
<tr>
<td><b>object-assign</b></td>
<td><code>^4.0.1 = 4.1.0</code> </td>
<td><code>4.1.0</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
Current semver uses currently latest release
</td></tr>

<!-- present -->
<tr>
<td><b>present</b></td>
<td><code>0.0.6</code> </td>
<td><code>1.0.0</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
No changes in code just 0.0.6 is considered to be 1.0.0
</td></tr>

<!-- promise-polyfill -->
<tr>
<td><b>promise-polyfill</b></td>
<td><code>^3.1.0 = 3.1.0</code> </td>
<td><code>6.0.1</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
This update will add unhandled rejection warnings to the console. Removes non standard functionality of passing multiple params to Promise.all. You must pass an array now. You must change this code
<pre>
Promise.all(prom1, prom2, prom3);
// to
Promise.all([prom1, prom2, prom3]);
<pre>
adds support for subclassing, and fixes quite some BUGS and replace deprecated code!

</td></tr>

<!-- style-attr -->
<tr>
<td><b>style-attr</b></td>
<td><code>^1.0.2 = 1.2.0</code> </td>
<td><code>1.2.0</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
Current semver uses currently latest release
</td></tr>

<!-- three -->
<tr>
<td><b>three</b></td>
<td><code>^0.76.1</code> </td>
<td><code>0.81.0</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
0.76.1 -> 0.81.0 has ~75 bug fixes<br>
A-Frame tests pass with `0.77.1` and fail with any newer version
<pre>
// FAILED TESTS:
material > update
material system > texture caching > loadImage
</pre> </td></tr>

<!-- tween.js -->
<tr>
<td><b>tween.js</b></td>
<td><code>^15.0.0 = 15.0.0</code> </td>
<td><code>16.3.5</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
15.0.0 -> 16.3.4 has ~30 bug fixes 
16.3.5 fixes some BUGS
</td></tr>

<!-- webvr-polyfill -->
<tr>
<td><b>webvr-polyfill</b></td>
<td><code>0.9.15</code> </td>
<td><code>0.9.18</code></td>
<td>:grey_question: </td>
</tr><tr><td></td><td colspan="3">
Support VRLayer bounds configuration,<br>
Set the quaternion to be looking in the -z direction by default<br>
Fix predistortion bug.
</td></tr>
    
</tbody>  
</table>
 
  @rafaeleyng #1629 _merged to master_ 

```
// Setting it on element
<a-entity sound="src: url(river.mp3);"></a-entity>
// Using asset managment
<a-scene>
  <a-assets>
    <audio id="river" src="river.mp3">
  </a-assets>
  <a-entity sound="src: #river"></a-entity>
</a-scene>
```
 @rafaeleyng since aframe depends on threejs and browsers limitation of the WebAudio API then most of it's behavior comes from there. You can't really compare images and audio since one is resource and other is buffer! So if you re enter the room then you see new request since request is made to reconnect the buffer. At this point there isn't cross browser way how to switch between cached audio buffer for audio element after it is initialized so therefore audio buffer is reloaded which is not a blocker since buffer does not download entire resource (as with images). So if you have audio file with 1 hour of sound track then your audio is not downloaded entirely but based on browser buffered some seconds ahead which is expected when you user might visit the scene only for few minutes. Difference between using aframe asset management or using audio source directly on element is that asset management will make sure that audio stream is ready to play as soon as scene is rendered while specifying src  on element  will first render the scene and then attends to buffer the audio.
 so therefore based on issue `How to use correctly assets management for audio?` I don't find that this issue should be reopened since it does not direct real issue and it is covered how to use that! If something is unclear bring your questions into [slack](https://aframevr.slack.com/messages)
  @ngokevin 

**Description:**
## **Changes proposed:**
## 
## 

A quick step by step for brand new users/beginners to get them started with A-frame.
 Yup.  Totally understand the endorsement aspect.  Just wanted to get something down for the total beginner when they are looking at the docs and then work from there.  Most important is to get this in the right place for new people in the funnel when they learn about A-frame, wherever that may be.    

Sounds like when you read it, it was longer than it ideally should be?
 Do you think there is a path for beginners to start now with A-frame or do they need to wait until the next version?
  When debugging the frame rate on an iOS device, if the frame rate is less than 30 the text is red against the pink background making it difficult to read. Can the background or the text colour be more contrasting?
- A-Frame Version: 0.2.0
- Platform/Device: iPhone 6s iOS 9.3

![framerate](https://cloud.githubusercontent.com/assets/2892400/16763026/fd54f4f6-481e-11e6-85d2-db02423d6504.jpg)
 i second that.

now with the editor coming, maybe style it more like the editor gui ?

i may try something later this week...
 I know this is closed, but.. the red text is still unreadable.
 I opened a PR to try to solved this by highlighting red text with a white background to make it more visible & readable. Take a look at #1874!

Before:
![screen shot 2016-08-29 at 9 15 06 pm](https://cloud.githubusercontent.com/assets/7256178/18075899/ef7b9a26-6e2d-11e6-9ebe-ec6811f1f098.png)

After:
![rstatcolorchange](https://cloud.githubusercontent.com/assets/7256178/18075901/f508268a-6e2d-11e6-9e01-e1b194b4b1df.gif)
 Sure @ngokevin 

I played around with a few arrangements with text shadows and here's an approach I found:

Red text backed by a composite white text shadow (10 levels of shading)
![rstatcolorchange5](https://cloud.githubusercontent.com/assets/7256178/18115678/1f2afa3c-6ef6-11e6-9be5-19e894677ae1.gif)

Its similar to my original attempt with the white text background, but less agressive with shadowing where it needs to be. What do you think?
 Definitely! How's this @ngokevin ? Lowered the overall blur radius to 1/3 the size of the last example and kept about the same shadow density to maintain readability.

![rstatcolorchange7](https://cloud.githubusercontent.com/assets/7256178/18138133/32cb99b0-6f60-11e6-8c08-33a49aa9b380.gif)

``` css
/*Text Shadow Values*/
0px 0px 0px #b70000, 0px 0px 1px #ffffff, 0px 0px 1px #ffffff, 0px 0px 2px #ffffff, 0px 0px 2px #ffffff, 0px 0px 3px #ffffff, 0px 0px 3px #ffffff, 0px 0px 4px #ffffff, 0px 0px 4px #ffffff
```
 Cool! I went ahead and opened a PR for this new solution in #1880 
 Revisiting this issue now that https://github.com/spite/rstats/pull/24 is merged in to rstats. Thoughts on how to proceed @ngokevin? :)
 Cool, just opened https://github.com/aframevr/aframe/pull/1885 for this!
  **srcChanged**
I had to update audio src which caused these warnings.
`THREE.Audio: .load has been deprecated. Please use THREE.AudioLoader.`

Although this is not big issue I came across another problem that I could not play previous audio again.
so changing `src` on same entity back to audio which was already played causes

```
The buffer passed to decodeAudioData contains an unknown content type.x
EncodingError: The given encoding is not supported.
```

This happens since Three. `THREE.XHRLoader.load` returns for already played audio cache which is instance of `ArrayBuffer`, but THREE.context.decodeAudioData expects instance of `AudioBuffer`

**Changes proposed:**
- use THREE.AudioLoader  instead of THREE.Audio.load 
- Do not let `Tree` to cache audio files
 @dmarcos  

> Can we maybe initialize this in the init method?

Yes, I added commit which initializes `AudioLoader` in the `init` method now.

> Why do we need to remove from cache the audio to play it again?

Consider following scene using current aframe.js and that you have some tracks like `1.mp3` and `2.mp3`

``` html
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui">
<script src="https://raw.githubusercontent.com/aframevr/aframe/master/dist/aframe.js"></script>
</head>
<body>
<a-scene>
    <a-entity sound="src: 1.mp3; autoplay: true" position="0 1 0"></a-entity>
</a-scene>
</body>
</html>
```
-  As you load your scene track 1 will start playing
- Now modify DOM  audio src to `src: 2.mp3` and you'll hear second track
- When you modify DOM back to `src: 1.mp3` you get silence and following errors

```
The buffer passed to decodeAudioData contains an unknown content type.{url}
EncodingError: The given encoding is not supported.
```

If you now use following aframe.js which has this PR applied

``` html
<script src="https://raw.githubusercontent.com/mkungla/aframe/sound-AudioLoader-test/dist/aframe.js"></script>
```

So removing file from TREE.Cache removes these errors and you can shuffle the tracks without any problems. 

It seems to be problem with TREE.js Cache which passes ArrayBuffer to AudioLoader.decodeAudioData while last expects instance of AudioBuffer. I have opend issue at TREE as well about that and keep eye on where it goes. For now I find that using  `THREE.Cache.remove(data.src);` is securest way to ensure that aframe's audio src can modified, setting new sources and setting it also back to already played source.
 @ngokevin I'll go over all filed issues and collect some additional information before I file new issue about sound component what we talked about. Since this PR improves a lot compared to masters `if (srcChanged) { sound.load(data.src); }` and it self does not introduce new issues then I find that these other questions should handled separately.
  **Description:**

Docs for 'position' component state the following for the y axis: "Positive Y Axis extends down.".  I believe the positive Y axis actually points up, which would be the expected orientation for right-handed coordinates.
- A-Frame Version:
  0.2.0
- Platform/Device:
  Any
    @rafaeleyng hey I built an app very recently that did the exact same thing you are working on.  I know I ran into a simular issue though I can't remember exactly how I fixed it.  Do you have a repo I can look through your code to help you with the issue?

I think ultimately I had ended up doing 8 different sky's and preloading the assets on them then used show - hide to toggle which one you were in.  This ended up not leading to crashes though I never tried as high as 20 assets.

I also used curved-images as my navigation component and a combination of cardboard tap and look at mechanisms to trigger the scene change.  If your code is proprietary I may not be able to help look through and find an answer, but I remember when I kept changing the source on the same sky that I was having the "appearance" of a memory leak where the RAM continually got larger.  When I toggled between seperate sky's I hit a max roof that memory never got higher (around 250mb)
 @rafaeleyng Cool I'm at work at the moment I looked around the code but nothing jumped out at me.  I'll try to clone it down and run later.  But you might figure out the issue before then 😄.
 @rafaeleyng honestly I didn't like the solution either.  I was just on a deadline to get that walkthrough working by a certain day for the apartment complex that wanted it.  Because of that digging further into the why's behind this weren't an option.  

If you want to keep this issue open as you further deep dive the reason's I think that is very reasonable.  Hopefully I can get some time this afternoon to look into it myself now that I do have a bit more time to readdress the issue.

I'll probably instead of cloning yours just come up with the minimum example to show it and start deep diving the aframe source.

Good to hear you have it working well now though 😄 
Happy coding!
 @rafaeleyng no worries sorry we didn't get a more in depth solution to this. I know I had asked @ngokevin about this before but we never got to the bottom of it.  Maybe texture caching isn't working as expected.
  A spotlight entity doesn't orient itself with a lookat component.
 Looks like the threejs spotlight has a .target object by itself. That also explains why you can't set a spotlight's orientation.

Either the orientation and lookat components will have to take this into account ( which would nicely abstract this away from the user), or an additional component that sets this target is required.

Or maybe the light system can keep track of them.
 been playing a bit with a quick spottarget component... if the spotlight.target is added as a child of the light, and it's pos set to  0 0 -1 orientation works as expected ( with the spot pointed along it's -z axis)
 I've been having some of these same issues when using `SpotLight` from THREE, in general. There seems to be a lot of confusion and discussion about using targets and both @BenJenkinson and @WestLangley left comments detailing a history of these issues [here](https://github.com/mrdoob/three.js/issues/7132#issuecomment-154400735) and [here](https://github.com/mrdoob/three.js/issues/5870#issuecomment-69117498), respectively.

I don't know if that's going to be of any help, however.
 by adding the light.target to a given object, you get tracking for free :-)

I'm almost done with a component for (spot) light targets. Will have to check if it works for directional lights too, which also have a .target.
 I'll look into it. To have all the options you need a seperate component, but maybe the basics of it can be included in the light component yes.

Maybe tagetobject (selector) and a targetoffset, so you can also give a coordinate in worldpos (relative to scene if you don't specify an object.

And have it default to be added to the light itself, with an offset of (0 0 -1), so it looks down -Z  ? and regular rotation works

been a while i worked on that... will have to see if all that can be added to light component in a clear way

All that being said, there is also still [this issue](https://github.com/aframevr/aframe/issues/1624)
 or scratch that... just being able to set the target object is sufficient. You can always create an a-entity , hook that up and set the world position or any offset with that.
 Works like a charm now: https://github.com/aframevr/aframe/pull/1728
  the cone of a spot light seems to be a unit higher then it's origin :
http://www.frederickdesimpel.be/test/webVR/Aframe/spot-bug.jpg
 not sure if it is the spotlight itself that is in the wrong place or the editor's cone visualisation.
 Is this related to #1621?
 no this is just about the position of the object
 @fernandojsg i don't seem to have it around anymore... should be easy to recreate, it was just a spotlight and a sphere to check it's position...

can't seem to get into the editor anymore for the moment, so i can't recreate it now.
 @fernandojsg i have a scene that clearly shows the problem:

http://www.frederickdesimpel.be/test/webVR/Aframe/test11-spot-showbug-spotPos.html

the yellow line is from the light aframe element position, the white line is from the position of the light itself attached to the elements object3D. it is exactly one unit too high.
 Made a temporary fix [here](https://github.com/aframevr/aframe/pull/1728#issuecomment-239141088). The functionality to the end user should be as expected. The real cause can be hunted upon later...
  **Description:**
While systems now have schemas and get configured in init() they don't support update() and so can't be reconfigured dynamically.
- A-Frame Version:
- Platform/Device:
  **Description:**
- #859 Could be potentially closed

**Changes proposed:**
- `cursor.timeout` -> `cursor.fuseTimeout`
- `raycaster: { }` -> `raycaster: { far: 1000 }`

Added default value for raycaster.far
  **Description:**
My Collada Model objects are displayed in different places depending on if i watch them in "normal" mode or in vr mode.
- A-Frame Version: Newest available in this repository
- Platform/Device: OnePlus 2, Chrome Browser
  I'm currently trying to get an Aframe project running in a React Native Webview and running into errors reminiscent of the ones discussed here: https://github.com/borismus/webvr-boilerplate/issues/111

I've tried this in three separate emulated devices (Nexus 5, Nexus 6P and Galaxy S6 all running Android 6.0) and each of them produce the following error stack:

![screen shot 2016-07-05 at 2 07 29 pm](https://cloud.githubusercontent.com/assets/4313386/16595303/892b69f0-42bc-11e6-874c-ea37fb0686d3.png)
  **Description:**
When using the last version (top of tree) of aframe on mobile, the non-VR mode doesn't allow the user to move his phone around in "magic window" mode, you have to use your finger and moving up/down is not possible.
A version to check it out is here:
http://codepen.io/thomasbalou/pen/rLwQrY
- A-Frame Version:
  top of tree
- Platform/Device:
  Samsung Galaxy S6 with Chrome 51
 Indeed it does, maybe you fixed a bug in-between? Anyway everything's fine now, thanks!
  **Description:**
Pretty much as a camera with cursor intersects a model the system fails. Tried it with simplified demo scene from the aframe.io website.

http://codepen.io/msj121/pen/AXrxkE

```
raycaster.js:98 Uncaught TypeError: Cannot read property 'emit' of undefinedemitEvents 
@ raycaster.js:98 tick 
@ raycaster.js:96 (anonymous function) 
@ a-scene.js:291 value 
@ a-scene.js:289 value 
@ a-scene.js:314
```
- A-Frame Version: Master
- Platform/Device: Chrome
 Thanks
  **Description:**
I'm guessing this is an intentional feature, 
but it would be _great_ if there were a way to disable it or easily work around it.

The "Begin" property for animations is chained to the actual animation loop.
If Begin is set to "5000", and if the animation is set to loop indefinitely, 
there will be a 5000ms pause between each iteration of the loop.
## 

I think TweenJS addresses this. In addition to allowing "wait" time to be chained into a loop (essentially, the same as "begin"), TweenJS has the option to begin a looped animation "paused" and simply wait to fire it.

Is there a simple way to delay the start of a looped animation in AFrame _without_ incorporating that delay time into every iteration of the loop?

Thanks!
- A-Frame Version: 0.2.0
- Platform/Device: Mac OS 10.11
 > I think TweenJS addresses this.

Sadly, it does not.

> Is there a simple way to delay the start of a looped animation in AFrame without incorporating that delay time into every iteration of the loop?

Only if you write your own mechanism to replace what is currently used within [`a-animation`](https://github.com/msimpson/aframe/blob/d023bcb88cb5aa22a3d8af25eab591992dfeb0cd/src/core/a-animation.js#L142).

In general, this is a duplicate of #1401. And note: `delay` has been added instead of using `begin` as a delay (in master). Although, `delay` in this case would behave the same and a wait is incurred upon every loop. This is simply how tween.js is written.
 Ah, I didn't see #1401 when I searched. Sorry bout that. I appreciate the update though!
 Great!
I've been running setTimeouts to control certain animations as a workaround.
Not ideal.
  just wondering... since these are the same shortcuts... will this replace the browsers inspector? can' t we have both?
 ## [Current coverage](https://codecov.io/gh/aframevr/aframe/pull/1599?src=pr) is 81.64% (diff: 33.33%)

> Merging [#1599](https://codecov.io/gh/aframevr/aframe/pull/1599?src=pr) into [master](https://codecov.io/gh/aframevr/aframe/branch/master?src=pr) will decrease coverage by **0.28%**

``` diff
@@             master      #1599   diff @@
==========================================
  Files           100        101     +1   
  Lines          3548       3569    +21   
  Methods           0          0          
  Messages          0          0          
  Branches          0          0          
==========================================
+ Hits           2907       2914     +7   
- Misses          641        655    +14   
  Partials          0          0          
```

> Powered by [Codecov](https://codecov.io?src=pr). Last update [18e580f...aa6bd7c](https://codecov.io/gh/aframevr/aframe/compare/18e580f0c7d7262370fc9e46410d559ed9dd8eea...aa6bd7c8d67c0c15554bd88c97e051bd9f449967?src=pr)
  I'm especially interested in controller events. That may need to be distinct from cursor/mouse events though. Oculus Touch controllers in unity include three types of events: [Button, Touch, and Near Touch](https://developer.oculus.com/documentation/game-engines/latest/concepts/unity-ovrinput/#unity-ovrinput-usage-buttontouchneartouch). 

I would imagine those translating to:
- `gamepadbuttondown` / `gamepadbuttonup`
- `controller-touchstart` / `controller-touchstop`
- `controller-neartouchstart` / `controller-neartouchstop`

Little verbose but meh. The "Near Touch" events potentially come into play with physics, where you want to be able to push objects around but also 'grab' them with a button press. Grabbing is hard if the thing rolls away every time you make contact. :)
  This addition would close #1578 
- A-Frame Version: *
- Platform/Device: *
 You would still get full snapshot from tag related to release if you want to get snapshot of the repository. 
`$ git checkout tags/<tag_name>`
Isn't point of **release** something which is production ready, which this case is only `dist/*`

Other option would be to use [GitHub API Upload a release asset](https://developer.github.com/v3/repos/releases/#upload-a-release-asset) which enables you to upload extra archives under release downloads like I uploaded, see example aframe-0.2.0-dist.zip at [Example Tag 0.2.0](https://github.com/mkungla/aframe/releases/tag/0.2.0).

Since you can upload release assets any given point then you could upload cleaner dist archives for also for actual 0.2.0 version.

```
curl -u <your-github-username> -XPOST -H "Content-Type:<archive-content-type>" --data-binary @<archive-name> "https://uploads.github.com/repos/aframevr/aframe/releases/<release-id>/assets?name=<archive-name>"
```
 @dmarcos Yes I do use browser files in cases where it is appropriate/required to use them and these cases I'm only interested on dist files and most annoying is to manually select dist and LICENSE when you really do not want to have other `src` files included your production env, almost all projects which can be used with browser files follow one of the patterns, for instance [twbs/bootstrap - releases](https://github.com/twbs/bootstrap/releases) and [Facebook/react - releases](https://github.com/facebook/react/releases). Most use second method I described here, as you see there is `-dist` archive uploaded for each release. For instance there is also github account [components](https://github.com/components) which is creating dist packages out of popular repositories and started since many of these did not distribute clean archives by themselves, which is slowly changing these days and commonly one or other method is used. Up to date various packages from vendor space [components](https://github.com/components)) were downloaded a lot before original repos started to use cleaner distribution packages. End of the day it comes down to that if your library can be distributed as browser files then release archives should contain only production files and if your library should be used only with npm and bundled for production, then archives don't matter anyway. 
While my personal opinion is that since full snapshot of release can obtained from git tag or npm then archives could be really just distribution files, but if there is any possible argument why One could be interested to find in archive full snapshot then suggestion would be to use .gitattributes only to exlude same pattern like you ignore in  `.npmignore` for consistency and have a release post hook to upload third archive with only dist files, so:

```
# .gitignore
# Directories and files to ignore from release archives
examples export-ignore
tests export-ignore
.gitignor export-ignore
.gitattributes export-ignore
```
 Eventually .gitattributes should be present anyway, perhaps not only to discuss under this pull request what should release archive look like, but what should initial .gitatributes look like. In this case just give this pull request new title. Some suggestions would be then.

```
# .gitattributes
# Directories and files to ignore from release archives
examples export-ignore
tests export-ignore
.gitignor export-ignore
.gitattributes export-ignore

# Auto detect text files and perform LF normalization
# JS files must always use LF for tools to work
* text=auto
* eol=lf
dist/aframe-v0.2.0.min.js -diff binary minified
dist/aframe-v0.2.0.js.map -diff binary minified
dist/aframe.min.js -diff binary minified
*.js text
*.html text
*.npmignore text
*.md text
.ackrc text
.gitattributes text
.gitignore text
.jshintrc text
.nojekyll text
.travis.yml text
LICENSE text

*.jpg  -diff binary image
*.jpeg -diff binary image
*.png -diff binary image

# not sure about these
*.svg -diff binary
*.mtl -diff binary
*.obj -diff binary
```
 @dmarcos the extra zip is uploaded via GitHub API. My previous comment includes `CURL` example how to upload extra archives to releases, I also made example tag under my fork where you see third archive see `aframe-0.2.0-dist.zip`: [Example Tag 0.2.0](https://github.com/mkungla/aframe/releases/tag/0.2.0) which is uploaded via API not with .gitattributes. I also mentioned above that perhaps indeed just use this method to upload extra archive and use this PR just for initial .gitattributes for other purpose. Example contents above.
 `*-diff binary*` would keep your diffs clean
 @ngokevin 

> The one you posted, is all that does is just add EOF newlines?
- `* text=auto * eol=lf` will not only add correct line feeds if missing, but also corrects EOF if any of the files end with incorrect line feed so if contributors used editor inserts `CRLF` instead of `LF` then upon `git commit` git will show self explaining message: 

```
warning: CRLF will be replaced by LF in aframe.js.
The file will have its original line endings in your working directory.
```

This is real life example since latest state of `master` branch `/dist/aframe.js` seems to have  `CRLF` line feed instead of `LF`. As we all know we are past of the age of _Carriage Return_ and should exclusively use `LF` instead.
- `binary`
  Would tell which files git should not attend to create text diffs. This will make your repo cleaner and eventually commit objects smaller. for instance `*.png diff=exif` option would let you actually compare diffs of images if really would need that.
- `-diff` just don't generate diff object for file or pattern

As conclusion of this PR for me it seems that #1578 should be detached from this PR and discuss whether to upload 3rd archive via GitHub API as release asset like React and others too or not. 
And use this PR just use for `.gitattributes`. Are you going to use it and if yes then initial contents can be commited to this PR. If you are certain that you will not use `.gitattributes` for any purpose then this PR can be closed. 
 http://stackoverflow.com/a/25125870/1318830
 @ngokevin ready to go.
 Aight everything it is!
  Been trying to set rotation on a camera after it's been moved using setAttribute.  Every time I apply a value, be it a string ("0 0 0") or an object ({x: 0, y: 0, z: 0}), the value won't update or change.  Editing things like position work fine.  Rotation is the only one causing an issue

[Example](https://butt.githubusercontent.com/assets/2099658/16422311/8c0fb7c4-3d1d-11e6-9aca-d4bec1f1239f.png)

For reference, the HTML structure for Camera is:

```
<a-entity>
    <a-camera id="camera" position="0 1.75 2" rotation="0 0 0">
        <a-cursor color="#2E3A87"></a-cursor>
    </a-camera>
</a-entity>
```
- A-Frame Version: 0.2.0
- Platform/Device: Chrome 51.0.2704.103 (Official Build) (64-bit)
  **Description:**
Documenation Update

**Changes proposed:**

Changed the line about render-start as it has been updated in the master code. Not sure when the changes to these files will update the website, perhaps wait until 0.3
  Where do you see Oculus Touch and Daydream controllers fitting into these layers of abstraction? I see that `hand-controls` depends on `vive-controls`, wondering if those need to be more loosely coupled.

The component API (`<a-entity hand-controls="left"/>`) seems super clean though; presumably we can change the layers of abstraction later without breaking that.

EDIT: Maybe Daydream controllers would need to be separate components, since they're not 6dof.
 I was having trouble getting both Vive controllers working, but finally figured it out. Turns out the receiver for my wireless mouse was being detected as a gamepad and somehow kept taking the place of the second vive controller. Removing the receiver and restarting my computer solved the problem.

The tricky part was that [Tojiro's VR controller demo](https://toji.github.io/webvr-samples/XX-vr-controllers.html) and Steam VR detected both controllers without issue.

**edit:** Actually, I disconnected two receivers (one was for a mouse, the other for an Xbox One controller). I'm not sure which was causing the problem.
  I imported equirectangular photo correctly but its displaying a little wrong, i can't explain whats wrong exactly but you can see it on screenshot.

Here is aframe version :http://imgur.com/Tg50DSt
And here is how it looks on Ricoh THETA website: http://imgur.com/eqfCzaV

Theta360 uses three.js and WebGL too but their image looks better.
 Ok, i'll try that, it definitely looks like that is my problem. 
Thanks, will report what i found.
  There's some pretty detrimental bugs related to the version of threeJS that prevent proper material decoding of collada.

WebVR also doesn't work properly on the 0.2.0 release.
 Oh wow! That is soon. Thanks

On Sunday, June 26, 2016, Diego Marcos notifications@github.com wrote:

> I suggest that you move to master that wil be 0.3.0 soon (1-2 weeks) We
> prefer to focus on getting 0.3.0 rather on a 0.2.1
> 
> —
> You are receiving this because you authored the thread.
> Reply to this email directly, view it on GitHub
> https://github.com/aframevr/aframe/issues/1579#issuecomment-228617373,
> or mute the thread
> https://github.com/notifications/unsubscribe/AAR8mjrYl-xZvUEtuphveZY8u4rxoKg1ks5qPtA1gaJpZM4I-fjV
> .
  Shouldn't this repo use .gitattributes to have bit cleaner release archives?

**Possible contents could be:**

```
# Exclude git files and other files starting with .
.* export-ignore
# As in .npmignore
examples export-ignore
test export-ignore
```

> Besides these suggested above almost everything besides `dist` `LICENSE` and some essential files could be ignored, since that won't affect `npm` and usage of release archives becomes handy only when you want to use browser files in production. As in development you would never use release archives anyway!
- A-Frame Version: *
- Platform/Device: *
 Sure
 Could be then

```
.* export-ignore
*.html
docs export-ignore
examples export-ignore
scripts export-ignore
src export-ignore
tests export-ignore
vendor export-ignore
package.json
ORGANIZATION.md
```
 See [Example Tag 0.2.0](https://github.com/mkungla/aframe/releases/tag/0.2.0) release archives for example what release archives would contain. I can create a pull request as soon it's confirmed that only `dist/*`,`README.md`, `LICENSE` should be included in release archives.
  Please check [my demo site](http://www.watertalkgame.com:3000/demo.html)

As I was accessing the site using my iPhone6s(iOS9.3.2), I notice that I CANNOT swipe up/down to watch the video in a different angle, but I CAN swipe horizontally.

However, as you should notice, swiping up/down is ok when using desktop

Thank you
- A-Frame Version:  0.2.0
- Platform/Device:  iPhone6s(iOS9.3.2),
 I think it'll be useful to allow users without a headset to swipe up and down to look up and down. Is there a way to enable that ?   as a developer, I like the idea of `link`,  as it feels a bit more intuitive  Very cool. It works in nighlty, nightly actually started working again
after today's oculus upgrade. I noticed that if I start in sunrise.html the
labels for the Oculus controllers overlap.

Steve Luiting
http://sluiting.weebly.com
P: 720.563.9377

On Mon, Jun 26, 2017 at 2:36 PM, Kevin Ngo <notifications@github.com> wrote:

> Alright, Nightly enters for me now. Camera had a low height for a bit
> until I restarted. But I experienced that the enter VR wasn't kicking in
> after navigation, and the portals are too large/far away (I can't walk up
> to them, and or poke my head thru because they look huge)
>
> —
> You are receiving this because you are subscribed to this thread.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/pull/1575#issuecomment-311174562>, or mute
> the thread
> <https://github.com/notifications/unsubscribe-auth/AAXATnznpeLqzAXr9lSnLV3yiBnAHTp4ks5sIBZXgaJpZM4I8aW3>
> .
>
 Am I doing something wrong or maybe I don't get it, should we be able to "click" on them with mouse/trackpad?

edit: similar to this BUT instead of hovering/waiting to load you can Tap/Click on them instead? https://aframe-gallery.glitch.me/  The ability to customize the UI of A-Frame would be nice, at the beginning maybe through `aframe.css`?
  **Description:** How To Load *.fbx
- A-Frame Version:0.2
- Platform/Device:chrome,firefox ie....

Thank You
 @HUKE1987 you'll probably want to convert it to another format, THREE.js support for `.fbx` is limited. You can do use a Blender to do this, or upload the model to Clara.io and export it as `.obj`, `.dae`, etc.
  **Description:**

I found that `fog: false` wasn't working with the following:

``` html
 <a-scene fog="type: linear; color: #AAB; far: 30; near: 0">
    <a-entity geometry="primitive: sphere; radius: 50" material="src: url(../_skies/greencubes.png); side: back; fog: false;"></a-entity>
 </a-scene>
```

However, `<a-sky>` plus `material="fog: false"` _was_ working, so I dug into the sky primitive [source](https://github.com/aframevr/aframe/blob/master/src/extras/primitives/primitives/a-sky.js), and found it was using `shader: flat`

So I added `shader: flat` to my entity, and everything works:

``` html
<a-scene fog="type: linear; color: #AAB; far: 30; near: 0">
    <a-entity geometry="primitive: sphere; radius: 50" material="src: url(../_skies/greencubes.png); shader: flat; side: back; fog: false;"></a-entity>
</a-scene>
```

I feel we should call this out in the [docs](https://aframe.io/docs/0.2.0/components/fog.html).
- A-Frame Version: master
- Platform/Device: OSX El Capitan, Chrome 51
  **Description:**

Cursor events like enter/leave don't fire properly when another object is behind the targeted object. If the cursor leaves an edge of the object that "overlaps" another object, the leave event does not fire. If the cursor leaves an edge of the object that has nothing behind, the leave event fires properly. 

It seems like we need a way to make cursor/raycaster ignore certain objects. And/or the inverse: an option to ignore all by default. I'll upload a sample scene. In meantime, here's the markup. 

``` html
<html>
  <head>
    <meta charset="utf-8">
    <title>Transition: WebVR to WebVR</title>
    <script src="../_js/lib/vendor/aframe.min.js"></script>
    <style>
      html {
        background: #131313;
      }
    </style>
  </head>
  <body>
    <a-scene fog="type: linear; color: #AAB; far: 30; near: 0">

      <a-assets>
        <img id="highlight1" src="../_images/radial-highlight.png">
        <img id="shadow3" src="../_images/radial-shadow-3.png">
        <img id="loading" src="../_images/loading-1.png">
      </a-assets>

      <!-- Camera -->      
      <a-entity position="0 1.7 5">
        <a-entity camera="near: 0.1" look-controls wasd-controls="acceleration: 30">
          <a-entity cursor geometry="primitive: ring; radiusOuter: 0.026; radiusInner: 0.02" material="color: #FFF; shader: flat;" position="0 0 -1"></a-entity>
        </a-entity> 
      </a-entity>

      <!-- Ground Highlight -->
      <a-image position="0 -.2 5" src="#highlight1" rotation="-90 0 0" scale="30 30 30"></a-image>

      <!-- Orange -->
      <a-entity position="0 0 -5">
        <a-sphere position="0 4.2 0" radius="4.2" color="#F16745" roughness="0.8" width-segments="52" height-segments="52"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="3 3 3"></a-image>
      </a-entity>

      <a-box material="color: #7BC8A4" position="0 5.5 1">
        <a-event name="cursor-mouseenter" color="#FFF"></a-event>
        <a-event name="cursor-mouseleave" color="#7BC8A4"></a-event>
      </a-box>

      <!-- Green -->
      <a-entity position="-3 0 0">
        <a-sphere id="link" position="0 1.75 0" radius="1.75" color="#7BC8A4" roughness="0.7">
          <a-event name="cursor-mouseenter" color="#FFF"></a-event>
          <a-event name="cursor-mouseleave" color="#7BC8A4"></a-event>
        </a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="1.75 1.75 1.75"></a-image>
      </a-entity>

      <!-- Blue -->
      <a-entity position="1 0 0">
        <a-sphere position="0 1 0" radius="1" color="#4CC3D9" metalness="0.1"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="1 1 1"></a-image>
      </a-entity>

      <!-- Yellow -->
      <a-entity position="3 0 1">
        <a-sphere position="0 0.5 0" radius="0.5" color="#FFC65D"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="0.5 0.5 0.5"></a-image>
      </a-entity>

      <!-- Purple -->
      <a-entity position="20 0 -2">
        <a-sphere position="0 10 0" radius="10" color="#93648D" segments-width="52" segments-height="52"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="9 9 9"></a-image>
      </a-entity>

      <!-- Yellow -->
      <a-entity position="-24 0 -34">
        <a-sphere position="0 18 0" radius="18" color="#FFC65D"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="8 8 8"></a-image>
      </a-entity>

      <!-- Green -->
      <a-entity position="25 0 20">
        <a-sphere position="0 12 0" radius="12" color="#7BC8A4"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="8 8 8"></a-image>
      </a-entity>

      <!-- White -->
      <a-entity position="-15 0 5">
        <a-sphere position="0 3 0" radius="3" color="#ECECEC"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="3 3 3"></a-image>
      </a-entity>

      <!-- Orange -->
      <a-entity position="-6 0 6">
        <a-sphere position="0 1 0" radius="1" color="#F16745" roughness="0.8"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="1 1 1"></a-image>
      </a-entity>

      <!-- Yellow -->
      <a-entity position="-20 0 30">
        <a-sphere position="0 30 0" radius="30" color="#FFC65D" roughness="0.7"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="15 15 15"></a-image>
      </a-entity>

      <!-- Blue -->
      <a-entity position="-1 0 14">
        <a-sphere position="0 2 0" radius="2" color="#4CC3D9"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="2 2 2"></a-image>
      </a-entity>

      <!-- Orange -->
      <a-entity position="10 0 15">
        <a-sphere position="0 4 0" radius="4" color="#F16745" roughness="1"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="2 2 2"></a-image>
      </a-entity>

      <!-- Blue -->
      <a-entity position="6 0 4">
        <a-sphere position="0 1.5 0" radius="1.5" color="#4CC3D9" ></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="1.5 1.5 1.5"></a-image>
      </a-entity>

      <!-- Yellow -->
      <a-entity position="5 0 14">
        <a-sphere position="0 .6 0" radius=".6" color="#FFC65D" roughness="0.8"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="0.6 0.6 0.6"></a-image>
      </a-entity>

      <!-- Purple -->
      <a-entity position="5 0 25">
        <a-sphere position="0 2 0" radius="2" color="#93648D" roughness="0.8"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="2 2 2"></a-image>
      </a-entity>

      <!-- White -->
      <a-entity position="2 0 15">
        <a-sphere position="0 0.2 0" radius="0.2" color="#ECECEC" roughness="0.8"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="0.2 0.2 0.2" opacity="0.5"></a-image>
      </a-entity>

      <!-- Purple -->
      <a-entity position="4 0 10">
        <a-sphere position="0 0.15 0" radius="0.15" color="#93648D" roughness="0.8"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="0.25 0.25 0.25" opacity="0.6"></a-image>
      </a-entity>

      <!-- Blue -->
      <a-entity position="4 0 11">
        <a-sphere position="0 0.1 0" radius="0.1" color="#4CC3D9" roughness="0.8"></a-sphere>
        <a-image src="#shadow" rotation="-90 0 0" scale="0.15 0.15 0.15" opacity="0.6"></a-image>
      </a-entity>

      <!-- Green -->
      <a-entity position="5 0 11">
        <a-sphere position="0 0.3 0" radius="0.3" color="#7BC8A4" roughness="0.7"></a-sphere>
        <a-image src="#shadow3" rotation="-90 0 0" scale="0.25 0.25 0.25" opacity="0.6"></a-image>
      </a-entity>

      <!-- Background -->
      <a-sky color="#AAB"></a-sky>

    </a-scene>

  </body>
</html>
```
- A-Frame Version: Master (June 22)
- Platform/Device: El Capitan OSX, Chrome 51
 Here's a test scene: https://jcarpenter.github.io/aframe-bugs/cursor-20160620/index.html Roll over the green sphere and the white box to see what I mean.
 Correction: I'm on master.

I did some more digging into this, and discovered the same problem with cursor-mouseleave. I experimented with restricting raycaster to a single class of objects (`cursor raycaster="near: 0; far: 5; objects: .live"`), and it resolves the problem.
 Errr.. -almost- resolves the problem. Restricting raycaster `objects` to one class helps, but now I have several buttons side-by-side, and am hitting similar problems. It looks like `cursor-mouseleave` is global, not per object. If I move my cursor off an raycaster-active (?) object A, but another raycaster-active object B is behind it, intersecting with the ray, the `cursor-mouseleave` on object A does not fire.
  **Description:**

Am trying to setAttribute on an implicitly defined attribute of an element. All entities are automatically assigned a rotation attribute. I'm trying to edit it. Everything works if I manually define a rotation attribute, but things break if I don't. Here's a test case.

``` html
<html>
  <head>
    <meta charset="utf-8">
    <title>Transition Test 2</title>
    <script src="../_js/aframe.min.js"></script>
  </head>
  <body>

    <a-scene>

      <!-- Rotation not set -->
      <a-entity id="greenPlane" geometry="primitive: plane;" position="0 0 -2" material="color: green; side: double"></a-entity>

      <!-- Rotation set -->
      <a-entity id="yellowPlane" geometry="primitive: plane;" position="0 2 -2" material="color: orange; side: double" rotation="10 10 10"></a-entity>

    </a-scene>

    <script>

      var greenPlane = document.getElementById('greenPlane');
      console.log( greenPlane.getAttribute('rotation') ) // Returns blank
      console.log( greenPlane.getComputedAttribute('rotation') ) // Returns Object
      greenPlane.setAttribute('rotation','z', 30); // Fails. Object disappears.

      var yellowPlane = document.getElementById('yellowPlane');
      console.log( yellowPlane.getAttribute('rotation') ) // Returns Object
      console.log( yellowPlane.getComputedAttribute('rotation') ) // Returns Object
      yellowPlane.setAttribute('rotation','z', 30); // Works. Object rotates 30° on z axis.

    </script>

  </body>
</html>
```
- A-Frame Version: Master (June 22)
- Platform/Device: OSX El Capitan, Chrome 51
  **Description:**
Repeat need not be an integer, like underlying threejs material:texture property.

**Changes proposed:**
Change repeat values to parse as float instead of int.
  **Description:**
Currently it seems only images and videos can be used as texture sources for entities.

This PR adds the ability to use a canvas as the texture source for an entity. It includes a less-than-graceful hack so that THREE.js treats the canvas as a video and handles the continuous update of it.

**Changes proposed:**
- adds loadCanvas to systems/material.js
- adds isCanvas to validateSrc in /utils/src-loader.js
- adds an example.

Kind regards,
Matt
 Hey up, I've made those changes. Would you prefer I collapse all changes to a single commit and force-push or is multiple commits OK? (BTW, cheers for the ace library!)
  **Description:**

Enables post scene rendering operations in aframe.

**Changes proposed:**

Extends a-scene element with a .renderTarget(to be set by a component/system on demand) to enable the rendering of the scene in a texture.
Adds a tock() method on components/systems where post scene rendering logic can be performed.
An example showcasing the functionality is included.

https://wizgrav.github.io/aframe-clubber/demo/
 @dmarcos implementing the final compositor as a system does away with the need for ordered execution of behaviors so this PR provides all that's needed for post processing. This setup is more proper since there can be only one compositor active. I also included the example as there is no need anymore for further PRs for ordering as discussed with @ngokevin . 

Ordered execution could be implemented with something complex like the graph approach or something as simple as using a boolean flag on components to switch between behaviors.unshift/push in a-scene's addBehavior, but that's now unrelated to post proc and can be decided at a later time
 VREffect additions submitted to three.js dev mrdoob/three.js#9172
 @dmarcos Yeah that was very responsive and kind of them actually. I'll include the latest VREffect from three/dev in this PR. Also, a guy from the slack channel asked me and so I've also made another example. The approach taken on that, while not as efficient as I'd like, is more akin to the effect composer from three.js. Post effect components are very easy to write as they're just wrappers over the various three shaders. They just provide a shaderMaterial to the compositor system for blending to screen and a namespace to update uniforms. Should I include that as well? 

http://wizgrav.github.io/aframe/examples/test/post-processing-grain/
 @fernandojsg I've updated the compositor to use VREffect instead of the vanilla WebGLRenderer for outputting to screen, can you check the examples now? Unfortunately I don't have an hmd available currently. I hacked a bit on webvr-polyfill and vr-mode-ui to enable vr on desktop and got an image that looked proper but failed to make the view rotate. I'll check on a mobile later on

UPDATE: I have the suspicion that vrHMD.submitFrame(); in VREffect is the culprit here
 @fernandojsg I patched VREffect for hmd frame submission to be performed manually. I haven't updated this PR with the changes, which will also have to be propagated to three.js. Please check the live examples to see if it fixes the issue.

http://wizgrav.github.io/aframe/examples/test/post-processing/
http://wizgrav.github.io/aframe/examples/test/post-processing-grain/
 @fernandojsg I think the issue with the single eye rendering was that the renderer's viewport was left on the second half of the frame in VREffect.render(). I've now updated the live examples to deal with this as well. Does firefox still use the pre-1.0 webvr api? In that case it would not trigger the issue with the frame submission. Chromium on the other hand does, are you certain that the chromium build can't playback videos? In any case I'll make another example without video when I get back home in the afternoon
 Ok at least we're getting somewhere, this seems like a size mismatch between renderer and renderTarget at some point in the pipeline(probably due to the dpr handling). We can debug it further later when I get back from work, if you're available on slack
 The last commit adds several stuff in VREffect, notably the ability to manually submit the canvas to the hmd and also graceful access to the hmd.requestAnimationFrame to take advantage of the higher fps. An alternative approach would be a single method to get the hmd object back and call the methods on that directly but having VREffect handle the functionality seems more natural. The autoSubmit flag will be necessary in any case. The frame has to be submitted to the hmd after post proc has finished, as it is right now it writes the scene into the texture and immediately submits the canvas without any data in it.

Render target size setting is done more tightly now, I'd appreciate some feedback from people with hmds to see how it actually works (I don't currently have access to one)
 @ngokevin the compositor is better implemented as a system. This is more in line with existing component sets like @donmccurdy physics. Besides being more logically correct as there can be only one compositor in the scene, It also aleviates the need for ordered execution for post processing.

I also thought that we could get away with a two liner for having a minimum of ordering guarantees. Something like defining an "important" boolean flag on components that would switch between unshift() and push() to the behaviors.tick/tock arrays in a-scene.addBehavior. This would at least provide us with the level of flexibility unity has with its LateUpdate() and with minimal code impact. Or we could go to the more flexible but also complex graph based approach. Post processing doesn't currently need any of these approaches though, it can work as it is using the component/system combo.

Right now I'm extending VREffect for submission to three.js. There are several things needed in there to actually work in hmds. Some changes will be needed in a-scene as well, most notably tapping the .requestAnimationFrame on the hmd instead of the window to enable the higher fps on the headsets. So I think we'll have to first see if/what they accept before carrying on
 Added update() for systems to allow dynamic reconfiguration of the compositor. Took out the example for now, you can check out one with the current dist here http://wizgrav.github.io/aframe/examples/test/post-processing/ 
 @fernandojsg  @ngokevin  should a simple example be included in this PR as well? 
 @fernandojsg Was wondering if it might be faster to review if we unbundle the post processing effects - with each PR having its own effect.  Bloom, film grain, technicolor etc - kind of like http://stemkoski.github.io/Three.js/#shader-glow  
 @AnnCaryn that won't be necessary, the effects themselves are not included in the PR, just the core functionality to enable them. The examples posted in this thread are not included either, they just reside on my gh-pages for reference. Components providing the various effects will be provided by third parties after the core is enabled
 @fernandojsg have in mind this pull request as well https://github.com/mrdoob/three.js/pull/9848 this will be needed for some effects that need per eye calculations, like godrays which need to calc the 2D sun position from the camera matrix. There is no easy way around it with the latest WebVR spec because these matrices will come directly from vrDisplay. I think it does not pose a problem with this PR as some solution will have to be included in VREffect anyway and that will trickle back into AFrame. The comments in that pull request are interesting though as VREffect seems to be on the way to becoming redundant in future three.js releases. Some thought should be put in that prospect so it doesn't catch us off guard
 @ngokevin @dmarcos @fernandojsg rebased the PR. A minor check was added to VREffect. This was needed to pass test "a-scene (with renderer)". a-scene calls somewhere VREffect.cancelAnimationFrame which in turn tries to call the non existent vrDisplay.cancelAnimationFrame. I suspect this is an issue with webvr-polyfill and should go away with an update of that. In the meantime the check is really minor and won't affect anything else
 @cvan I'm dying for post processing support personally and would love to see this get merged soon @ngokevin  @wizgrav  @johnnyshankman in the meantime you can easily put in some postproc by overriding scene.render() check an example here https://github.com/wizgrav/copernicus/blob/master/src/main.js line 230 is where it's done @ngokevin I can rebase the PR to the current master in the w/e if everyone's ok with the functionality @wizgrav ~Can't get your approach from copernicus to work in a personal project.~ See update.

Anyways, yes I'm super happy with this PR and I'll be following along to see where this goes. Thank you @wizgrav and @ngokevin!

**Update:** _Got it to work! Thank you!_ @wizgrav @ngokevin I got a little antsy and rebased this branch locally with aframe's current master. Additionally, I made that one fix with `layer.leftBounds.length`. After those two things this branch runs really well 👍 

I don't have push rights to wiz's fork of aframe so I can't push my rebased+modified branch to his `tock` branch myself unfortunately but I do have the code. @ngokevin @johnnyshankman I don't know why the null/undefined issue happens so I set the test against a generic false value, I don't expect any sideffects from that @dmarcos I'm not sure I understand. You mean keeping the tock infrastructure in but not actually calling it in render()? @dmarcos I understand why you want to keep something so core as simple and generic as possible, I'm thinking more from a convenience standpoint. The video recording is a good example

Maybe we could add a boolean property to the component, to denote that it shouldn't execute when the renderTarget is not enabled for the current frame. Then the "postprocessing" attribute check would just toggle the renderTarget on/off. What do you think of this scheme? 

I insist on landing this because I feel that this feature has been discussed for a way long time (in my sense of time) it's been a year and I'd prefer to come up with a solution in this PR so the feature lands, it will give the projects coming out using the framework, a big increase in quality.  The scene.renderTarget setting could also be done by the final compositor system itself utilizing both tick and tock. It sounds ok @dmarcos removed renderTarget handling from scene, that can now be set by a component/system, example here https://wizgrav.github.io/aframe-clubber/demo/

One minor thing I found was that system update is not called when changing attributes from the dom inspector, only with setAttribute(). I used to override setEntityAttribute to do that but took it out cause it caused a test to fail. This is unrelated to tock though and could be fixed in another PR. @dmarcos rebased and also proposed mrdoob/three.js#9848 to threejs. It's as minimal as it can be and If accepted, it will solve all issues concerning post processing in VR(proper godrays and such). @dmarcos ~~just saw that ArrayCamera has landed in three dev and that is indeed the best way to handle it, so I'll wait for when AFrame utilizes WebVRCamera to get the twin projection matrices after the scene renders. In the meantime tock is ready and sufficient for most effects as we are now~~ I think we're ok as we are now even for view dependant effects. ArrayCamera will give a nice boost though so I'm looking forward to it @dmarcos yes I made the checks for layer.leftBounds and layer.rightBounds less strict as  @johnnyshankman reported that they were undefined instead of null which the original code checked against. I hadn't experienced that myself tbh so I can take it out and if encountered again we can open a new issue. Though I don't expect side effects even if we leave it in @dmarcos reverted VREffect. Also updated the tock related tests  **Description:**
The shader component refuses to animate. 

For example:

``` html
<a-sky color="#73F7DD" shader="standard">
<a-animation attribute="shader" begin="2000" from="standard" to="noise"></a-animation>
</a-sky>
```

When I run that, at 2000ms, nothing changes.

I've tried animating `attribute="material"` as well, with no luck.

I can animate other sky components, 
and each individual shader works fine as a sky component, 
but the shader type won't animate.

As a work-around, I can make a second sky entity with a different shader type and animate the visibility settings of each sky entity. However, I'm not sure if the invisible shader is costing GPU. 

Let me know if I'm missing something obvious here--I'm relatively new to A-Frame.
- A-Frame Version: 0.2.0
- Platform/Device: OSX 10.11, Chrome (Macbook Pro)
 @ngokevin thanks for the suggestion, and I think you're right about a delay-set component.

However, I can't seem to implement the one you suggested. 
Tweaked a minor comma issue or two, but still no luck.
Tried using it on other components, which also didn't work.
I assume it's a minor error in the script somewhere? 

FYI: The component script is in the body of the page, above the a-scene.
(I registered another custom component in that area and it worked fine, 
I assume that's a reasonable way to do it.)

I super appreciate your help on this, by the way.

Here's what the code looks like currently:

``` html
<script>
AFRAME.registerComponent('delay-set', {
  schema: {
    component: {type: 'string'},
    delay: {default: 3000},
    property: {type: 'string'},
    value: {type: 'string'}
  },

  init: function () {
    var data = this.data;
    var el = this.el;

    setTimeout( function () {
      el.setAttribute(data.attribute, data.property, data.value);    
     }, data.delay);
  }
})
</script>
```

``` html
<a-sky color="#73F7DD" delay-set="component: material; property: shader; value: noise"></a-sky> 
```
 SWEET!

Now we're in business....
  **Description:**
just curious about when tablets like Nexus 7 will be supported for VR mode.
currently, there is misalignment between the split screens. I'm assuming bc its not supported yet.
- A-Frame Version: 0.2.0
- Platform/Device:
  Nexus 7 - Android 6.0.1
 I have the Dive 7 using with Nexus 7. 
In VR mode, i see double. Can't seem to get it aligned. Ive tested with other VR sites and they work. 
Just wanna confirm that this is something related to the framework. 
 +1 On Nexus 7, en Chrome I see not only the Vr Mode but also I'm not able to move using gyroscope :(
I have a patch to detect Tablet, but is not enough for using the gyroscope, any Ideas? Actually this happens on a Nexus 9 too. http://codepen.io/tinchoforever/pen/ZLyEbj  This on a tablet (nexus 7 or 9) or Ipad should be 1) Enabling by default devicemotion camera 2) on vr mode, go full screen. On Aframe 2.0, 1) works and 2) says your device doesn't support webvr mode.  I have been checking Google WebVr Poly and it works there perfectly. My guess is that this is something inside how Aframe decides to use VR Mode and Gyroscope Control of the Camera by default. And here with Aframe 2 
http://codepen.io/tinchoforever/pen/ggROwL Aframe 4
![aframe-4](https://cloud.githubusercontent.com/assets/719504/22203403/acb54944-e14b-11e6-81d3-f91fe1efd0aa.gif)
Aframe 2 
![aframe-2](https://cloud.githubusercontent.com/assets/719504/22203404/acb68f66-e14b-11e6-977a-a68580f60e8f.gif)
 In Aframe 4, I'm only enable to move the camera using touch but no movement. The expected behavior should be
1) Vr Mode should go to full screen on tablets.
2) Moving camera with Device Motion should be default on tablets too. I've opened a proper ticket for this. 
https://github.com/aframevr/aframe/issues/2309  `getComputedAttribute` returns the same thing as `getAttribute` when called from a system `init` method.  

Reason for this behavior is `a-entity.getComputedAttribute` only applies mixins and defaults if the attribute is a component.  It checks if the attribute is a component via `this.components`, and the components haven't been attached yet when system `init()` is run.  

Or maybe this is intended behavior, and the workaround is to not rely on schema defaults when accessing a component via a system?
  Pressing the escape key while not in VR throws an exception; no user-facing effect, but it is frustrating while debugging with _Pause on Exceptions_ enabled.
- A-Frame Version: master branch
  Hi, 
After the update of the Android version on my device the videosphere stopped working on my project but also i doesn't work on your examples that are online. When I enter I see the screen black (I have the play button so that it starts when I click on my demo so it's not the autoplay). It worked ok before the update.
- A-Frame Version: The latest version (06-14-2016)
- Platform/Device: I have a Samsung Galaxy S6 Edge Plus and I had Android 5.1 until last Thursday that I received an OTA update with Android 6.0.1 (now I have Chrome version 51.0.2704.81, I don't know which version had before). 
 Hello @KevinGrandon @fernandojsg @almossawi @ngok in my understanding this is a major issue as none of the devices we tested worked. 

I'm mentioning you because I get no response and I saw my issue disappear from the listed issues.

Are you working on a fix for this or i should look for another option?

Thanks in advanced!! 
 I took a quick look and found that the wakelock request is throwing `DOMException: play() can only be initiated by a user gesture` on my Android phone using Chrome 51.0.2704.81 and Android 5.0.2. This leads me to believe there may be a regression somewhere regarding the EnterVR mechanism. Like an event hand-off resulting in a new call stack containing the `play` call, instead.
 @dmarcos The need for a user gesture to initiate video playback is understood, but not the problem. The issue is that such a common error could result due to the original callstack from said gesture being lost due to an event handoff, `enterVR` in this case. That handoff is asynchronous and therefore spawns a separate callstack which then initiates a wakelock request. That request then attempts to play a video, but fails as its callstack didn't originate from a user gesture but a custom event. That's my concern.
 Not sure if this has been addressed but Im running into the same issue. I have multiple videos that I am trying to move though in a "choose your own story" style experience. It only happens after the first video. I can use the scene loaded event to play the first video-sphere, but every subsequent video is hindered by this limitation. Working as expected on a Galaxy Note 4 on Android 4.4 with Chrome 54, but not on a Galaxy 6 running Android 6 and Chrome 54 as well. 

Its almost amusing to me that Android originally allowed this functionality while Apple didnt and now they have complete swapped stances as the iOS 10 allows gesture-less media playback. 

edit:
I am starting my videos from a beacon thats being selected by a fuse on the cursor. Shouldn't that be considered a user gesture as the user has to focus on the beacon I have set up as my "play" and then I am calling the play from the click event? What is the difference between a fuse click and a touch click? 
 I'm still having the same issue in Chrome / Android 6.0 / aframe 0.50 nearly a year after this issue was first reported. Any updates on this? I'd love it if someone could point me to a workaround at the very least.  I can't even get the [official sample](https://aframe.io/examples/showcase/videosphere/) to work correctly. 

In my code, I can get the video playing if I force a user-initiated click before putting the scene in VR-mode, but then the video freezes when I enter VR-mode - as documented in #1345. @dmarcos - Sorry, I should have included that info. A Samsung Note 5, recently updated to Marshmallow.  @timmhayes does this one work for you? https://fuleinist.github.io/aframe-360-video/ In Chrome on the Note 5 I see nothing but black - no video. But it plays as expected on Firefox. I see the image straight off, but since the video does not appear to have any motion I can't tell if it is actually playing. I replaced your codepen video with the [one from the A-Frame 360 video example](https://ucarecdn.com/bcece0a8-86ce-460e-856b-40dac4875f15/) and it did not work, however I think there may be an issue with that video. It seems to have the correct mime type, but will not play directly in Chrome (using Android & Windows) - it downloads instead. I think that might be the cause of some of my issues.

The video in this fork works as expected in Android Chrome, in that the click listener successfully starts the video:
https://codepen.io/callmetimm/pen/awNovw Nope, not when I specify a `<source/> ` element with proper mime type as seen [here](https://codepen.io/callmetimm/pen/RgaWjW). But like I said, it looks like the mime type is being served.

I looked more into it. The a-frame video is being served with the following header: `content-disposition:attachment; filename=city-4096-mp4-30fps-x264-ffmpeg.mp4`. This is causing the download issue. I guess that I had the same issue. It took over a day to find the root cause. [This](https://github.com/vire-co/aframe/blob/video-wakelock-fix/vire.md) is what I have documented about the fix:

> The `webvr-polyfill` version `dmarcos/webvr-polyfill#a02a8089b` used
in aframe `0.5.0` is an old version that causes a weird issue on some
mobile devices (like the Samsung Galaxy S6). These devices stop
playing mp4 videos, which are used as textures ('a-video' or
'a-videosphere') as soon as the VR mode is active. After the issue
appears it is often not possible to play any mp4 videos anymore until
the device is restarted. The `webvr-polyfill` contains a so-called
wakelock that keeps the mobile device awake, when it is not receiving
any touch events (when it is in a cardboard for example). This
wakelook uses a video to do the trick. My guess is that the browser don't
let the device fell asleep, when some video is playing. However the
old version of the `webvr-polyfill` contains some mp4 video data (as
base64) for the wakelock, that causes the problem on some mobile
devices as described above.
>
> The first attempt to solve the issue was to replace the video data in
`vendor/wakelock/wakelock.js` with the mp4 data from a recent
`webvr-polyfill` version (`0.9.34`). But the aframe build process
doesn't seem to do something with `vendor` folder.
>
> Therefore the version of the "webvr-polyfill" was switched to
"^0.9.34" in the `package.json` (same version that is currently used
by the aframe master). This second attempt fixed the problem.

You find the changes for the fix here: https://github.com/vire-co/aframe/tree/video-wakelock-fix

I also released a custom aframe build of the `0.5.0` version, if you like to try out if the fix helps in your case: https://www.npmjs.com/package/maxweber.vire.aframe I've just tested it, the issue does not appear with the master branch. Most likely because the master branch is also using a recent webvr-polyfill version (0.9.34).  **Description:**
Delete dead link http://codepen.io/team/mozvr/
**Changes proposed:**
I was not able to find the updated link for http://codepen.io/team/mozvr/.
  **Description:**It will be better if the 360 deg video plays and buffers without first downloading itself totally and playing it. 
- A-Frame Version:0.2.0
- Platform/Device:All Devices
 I'm going to go out on a limb and assume you're attempting to steam an MP4. In which case, an MP4 will not stream unless it has been configured for fast-start:

> In order to play MP4 files while they are still downloading ... you'll need to move the so called 'MOOV' atom to the beginning of the file.
> 
> The MOOV atom is in essence a block of data, containing an index of the rest of the file. Most authoring tools will place this data on the end of the file, because the size of the block will have to change dynamically as changes are made to the video. If the atom was right at the beginning, the entire file would have to be rewritten for a lot of smaller changes.

You can accomplish this using FFmpeg or qt-faststart, see:
https://www.ffmpeg.org/ffmpeg-formats.html#mov_002c-mp4_002c-ismv
  **Description:**
This is just a quick grammar edit ("an" to "a").

**Changes proposed:**
Change "...is an JavaScript..." to "...is a JavaScript..." in the core entity docs.
   **Description:**
- Added tests for the `debug` property of `a-entity`
- Fixed behaviour when `debug` is used as a boolean property

**Changes proposed:**
- `debug` property can either be a normal string property (`debug=true`) or a boolean one (`debug` without any value)
  Two of the pages in the 0.2.0 docs are wrongly formatted. They have been fixed on the master branch. Github won't let me change them when I'm looking at the 0.2.0 tag, because I'm not on a branch. If someone points me in the right direction, I'm happy to fix it.

[https://aframe.io/docs/0.2.0/primitives/a-ring.html](https://aframe.io/docs/0.2.0/primitives/a-ring.html)
[https://aframe.io/docs/0.2.0/components/geometry.html](https://aframe.io/docs/0.2.0/components/geometry.html)
- A-Frame Version: 0.2.0
  I tried to play with the [Composite Example](https://aframe.io/examples/showcase/composite/) in the project and found that texture quality is different between the v0.2.0 release version and master branch when in VR Mode on Mobile, both iOS and Android.

In release/v0.2.0, the texture quality is fine and working properly in VR Mode on Mobile.
In master branch, the texture quality is downgraded and all images are blur in VR Mode on Mobile.

I made two html pages which have the same source code but includes the two different versions of Aframe framework.
- A-Frame Version: v0.2.0
- Platform/Device: VR Mode on Mobile
- Description: Fine texture quality
- [Composite Example with release/v0.2.0](http://bit.ly/1U8Zk8r)

---
- A-Frame Version: master branch
- Platform/Device: VR Mode on Mobile
- Description: Texture quality is downgraded, images are blur
- [Composite Example with branch/master](http://bit.ly/1UCAqg0)
 May I have some sample code on how to change BUFFER_SCALE without modifying the source code?
Thanks in advance!
 @ngokevin Thanks for the response and code fix, however, I found it doesn't really solve the issues. I take 3 screenshots for your comparisons.

Composite example with release/v0.2.0:
![composite-v0 2](https://cloud.githubusercontent.com/assets/1382555/16764491/0bd31976-4861-11e6-903a-fcf23daacaf4.png)

Composite example with master + fix pixel ratio:
![composite-master fix](https://cloud.githubusercontent.com/assets/1382555/16764511/1d65e128-4861-11e6-938e-a910c1efeed4.png)

Composite example with master (no fix pixel ratio patch):
![composite-master nofix](https://cloud.githubusercontent.com/assets/1382555/16764519/284e85d6-4861-11e6-80fe-8e1ca0ad1014.png)
  **Description:**
This PR fixes typos in entity.md file.

**Changes proposed:**
- **replace**: "has the effect of _unregistered_ the `THREE.Object3D`"
  **by**: "has the effect of _unregistering_ the `THREE.Object3D`"
  **in**: setObject3D description
- Add missing backquote in getOrCreateObject3D title
  **Description:**
Noticed incorrect sky closing tag instead of box closing tag
Noticed a-video was missing a closing tag
  Question related to #1338, I follow that BufferGeometry is more efficient than standard Geometry, but, why is creating a BoxGeometry first and converting it to BufferGeometry better than just creating a BoxBufferGeometry? Are the _____BufferGeometry subclasses less efficient than BufferGeometry?

Physics for aframe-extras have broken against aframe/master – [I construct CANNON.Shape instances by looking at the THREE.js geometry](https://github.com/donmccurdy/aframe-extras/blob/master/lib/CANNON-mesh2shape.js#L29-L50) type. ____BufferGeometry is useable, but there's not much to go on with plain BufferGeometry instances. 
 If BufferGeometry really is preferable, we could work around this by preserving the original `geometry.parameters` values (geometry type, cylinder radius, etc.) in the new geometry's `userData`.
    **Description:**
Hi~
Is aframe Surpoort Half-Dome / 180-degree Video?
- A-Frame Version:
- Platform/Device:
  In the "wasd-controls" component, the update function retrieves a movementVector, and update the camera in consequence. But it doesn't check if the movement vector is null, in which case the camera position shouldn't be affected, right?

It's starting line 58500 in dist/aframe.js
- A-Frame Version: tot
- Platform/Device: google chrome 50
  _Blender:_

<img width="633" alt="screen shot 2016-06-02 at 20 21 54" src="https://cloud.githubusercontent.com/assets/2571888/15756054/cf69cfc8-28ff-11e6-9476-dfe037031038.png">

_Aframe:_

<img width="822" alt="screen shot 2016-06-02 at 20 22 32" src="https://cloud.githubusercontent.com/assets/2571888/15756057/d2a98ac0-28ff-11e6-8f43-b6efc6f3e06c.png">

If you want to recreate the issue using Blender: Create > Cone > File > Export > COLLADA > Export Data Options > Selection Only
- A-Frame Version: 0.2.0
- Platform/Device: Google Chrome 50 (Desktop OS X)
- Blender: 2.77
  I just tried to get an a-image and set its position via setAttribute, and the position isn't taken into account

```
var aScene = document.querySelector("a-scene");
var img = document.createElement("a-image");
aScene.appendChild(img);
img.setAttribute('position', {x:0,y:2,z:0});
```
- A-Frame Version: the last one top of tree in /dist
- Platform/Device: windows 10 and google chrome 50
 Maybe an issue of script order? I'm generally doing:

``` html
<head>
  <!-- aframe.js -->
  <!-- custom_components.js -->
</head>
<body>
  <a-scene> <!-- ... --> </a-scene>
  <!-- script_that_appends_elements_to_scene.js -->
</body>
```

[Example here](https://sandbox.donmccurdy.com/vr/platforms/). In that case, I use the syntax, `el.setAttribute('position', v.x + ' ' + v.y + ' ' + v.z);`. Not sure why I had to do that, I was wondering if it was because the element hadn't been appended to the scene yet, or because the DOM hadn't finished loading.
 Thanks guys for the quick reaction!!

It appears it did work, but I was initializing images at the origin (so I was not able to see them directly), and the mistake came from the fact that the DOM inspector doesn't show the position anymore, as you can see here.
The project's code is here if you wanna check: https://github.com/tbalouet/tumbvr

![image](https://cloud.githubusercontent.com/assets/5400381/15784484/ff0ef376-29b2-11e6-830b-a7598ad435bc.png)
 Thanks! No, just an ambient and a point light, some tweaking to make it look good. The scene comes from sketchfab without modification 
 I'm having this exact same issue, tried everything suggested and in aframe 0.3.0 from (https://aframe.io/releases/0.3.0/aframe.min.js) will not work. When I switch to a version back (https://aframe.io/releases/0.2.0/aframe.min.js) it works. 

Tried both techniques for set attribute
 Hey, I am facing this issue in 0.8.0. My 
`<a-sphere id="ball" position="-1 0.59 -4"></a-sphere>`
already exists in the `<body>`. On click of this ball, I want it's position to change to, say -3 0.59 -3. I tried 
`document.getElementById("ball").setAttribute('position', '-3 0.59 -3')`  `document.getElementById("ball").setAttribute('position', {x:-3, y:0.59, z:-3})` `document.getElementById("ball").object3D.position.set('-3 0.59 -3')` 
but none of them seem to work. @namrathasubramanya perhaps the [event-set](https://github.com/ngokevin/kframe/tree/master/components/event-set/) component could help?

Also, try [StackOverflow](https://stackoverflow.com/questions/tagged/aframe) for questions.  Both `animationstart` and `animationend` are essentially useless without a proxy component to dive into the event data. You simply cannot employ either of these events in a sane manner from the `begin` or `name` properties of the `<a-animation>` or `<a-event>` elements, respectfully.

Therefore, I propose adding an `on-end` and `on-complete` to the `<a-animation>` element. The `on-complete` property specify one or more event names which emit using the same logic as `animationend`. While `on-end` would specify on or more event names which emit `onStop` of the internal `Tween`, only; covering those animations which ended abruptly via the new `end` property of the `<a-animation>` element.

If this is agreeable, I can craft a PR.
 Okay. I'll try to attack the problem from that direction, instead. Maybe an `<a-event-proxy>` element could be of help, here.
 @ngokevin FYI, this is what I'm using now:

```
  document.registerElement('a-event-proxy', {
    prototype: Object.create(AFRAME.ANode.prototype, {
      attachedCallback: {
        value: function() {
          this.el = this.parentNode;
          this.el.addEventListener(this.getAttribute('name'), this.handler.bind(this));
        }
      },

      handler: {
        value: function(event) {
          var conditions = this.getAttribute('matches');
          if (conditions) conditions = AFRAME.utils.styleParser.parse(conditions);
          for (key in conditions) 
            if (event.detail.target.getAttribute(key) === conditions[key])
              this.emit(this.getAttribute('emit'));
        }
      },

      detachedCallback: {
        value: function() {
          this.el.removeEventListener(this.getAttribute('name'), this.handler);
        }
      }
    })
  });
```

```
<a-animation begin="fade-out" attribute="material.opacity" from="1" to="0" dur="2000"></a-animation>
<a-animation begin="fade-in"  attribute="material.opacity" from="0" to="1" dur="100"></a-animation>
<a-event-proxy name="animationend" matches="begin: fade-out" emit="fade-in"></a-event-proxy>
```
 Can you place a components on `<a-animation>` elements? If so, that would be perfect in this case.
 Okay. I'll give that a go, instead.
  https://aframe.io/examples/showcase/cursor/
Is there any way to fix it?
  **Description:**

```
<a-assets>
    <a-asset-item id="untitled-scene" src="model/untitled-scene.dae"></a-asset-item>
</a-assets>
<a-entity collada-model="#untitled-scene">
    <a-event name="mouseenter" scale="4 1 6"></a-event>
</a-entity>
```

Uncaught TypeError: Cannot read property 'emit' of undefined

at line 57766

emitEvents  @   aframe.js:57766
tick    @   aframe.js:57764
(anonymous function)    @   aframe.js:61484
value   @   aframe.js:61482
value   @   aframe.js:61507
- A-Frame Version: 2.x
- Platform/Device: all
  Hi, 
I am trying to trigger animation of an entity by clicking on another entity.
What i am really trying to create is some tool-tip when my cursor hover on an entity.
Is there a way to perform that?

thanks.  
  **Description:**
src/utils/index.js:21 Uncaught TypeError: Cannot set property target of #<Event> which has only a getter
- A-Frame Version:  0.1.6
- Platform/Device:window10/chrome
  **Description:**
Addresses #45.

Still have issue that the cubemap is 180 flipped in y in relation to the viewer inside the cubemap. The default shader does not have a means of rotation.
  **Description:**
Fixes #1510. Creates new instance of collada loader for each collada-model component to prevent issue where using multiple collada models causes them to render incorrectly. 

**Changes proposed:**
- Move new 'THREE.ColladaLoader()' from outside component registration to within init method of collada-model component
  Thanks! ❤️

The wording is mysterious to me but this does help the PR approval process somehow.
  **Description:**

experiment with webcomponents-lite polyfill, 

the exported file (via `npm run dist`) is 30k bigger than the origin one (863k vs 892.6k)

The webcomponents-lite does not contain shadowdom polyfill, and the last update is a year old
https://github.com/webcomponents/webcomponents-lite
 The correct one will be get webcomponents-lite.js from webcomponents.js 
https://github.com/webcomponents/webcomponentsjs
 in 1st test fail https://travis-ci.org/aframevr/aframe/jobs/132840836#L559

seems `el.setAttribute('camera', 'fov: 65');` does not set correctly with webcomponents.js
https://github.com/aframevr/aframe/blob/master/tests/components/camera.test.js#L32
 The [webcomponentsjs](https://www.npmjs.com/package/webcomponentsjs) seems no star and no fork on github https://github.com/dlmma/webcomponentsjs , seems not reliable.

The patch is changed to use `webcomponents.js/webcomponents-lite.js` instead of outdated `webcomponents-lite` npm. The possible approach is build a customized version from https://github.com/webcomponents/webcomponentsjs that only include the custom element polyfil.

Though with current https://github.com/webcomponents/webcomponentsjs version, it failed A-Frame auto tests (but seems work well on examples by manual test). 

Might need help to identify what's the issue around the polyfill.
 @gasolin @ngokevin I am not 100% sure of the coverage of the WebReflection polyfill at this point (it has been a while), but I can assure you that the WebComponentsJS polyfill strives to be as accurate as humanly possible, and is relied upon my millions of web pages.

May I ask why you are seeking another polyfill besides the most widely used?
 FYI: X-Tag uses the webcomponentsls-lite build of the polyfill for our Core lib, so I know that one works well in prod.
 If we took CustomElements.js from webcomponent.js, 
The aframe.min.js will grow from 861k to 873k
  Hello!
While trying to import `aframe.js` through HTML Imports the following error pops up when trying to use an `<a-scene>`:

```
Uncaught TypeError: scenes[i].initSystem is not a function                       aframe.js:57800
```

[Here's a plunker with the reproduction.](https://plnkr.co/edit/h0flsQImNllFLWskNkde?p=preview) Open console to see the error.

Cheers.
- A-Frame Version: 0.2.0
- Platform/Device: Chrome 50 / Windows 10
 Not so sure this will happen considering "[Firefox will not ship HTML Imports.](https://developer.mozilla.org/en-US/docs/Web/Web_Components/HTML_Imports)"

More information:
https://bugzilla.mozilla.org/show_bug.cgi?id=877072#c89
https://platform-status.mozilla.org/#html-imports
 Yep, Custom Elements imported via JavaScript are the way to go!
  While this fixed #1403 for me, it needs review. I have no idea what else this could effect, regardless of the existing tests passing.
 Sure.
 Hmm. Travis CI seems to fail a lot.
  **Description:**
I am trying to upload assets using the asset uploader but getting failure. 

Just says, "Can't Upload"

What am i doing wrong?

If someone wants to utilize A-Frame and will need to have on-going assets uploaded, what is the best option to do this? I would like to just upload them to my Amazon S3 and then have A-Frame look at them as the src for when using for example <a-sky> tag, but seems to produce CORS issue. 
 Nevermind I got it working! 
 I was unable to get the asset uploader to work.... I ended up uploading my panorama images to Amazon S3 and was able to use them as the src and this worked fine. 
  I gave it a once-over, the rest looks good.
  A few geometries which were left out.
  I'm wondering, have you tried transcluding (composing) scenes together by using ShadowDOM and the `<content>` (or the new `<slot>` in WebKit) element? If so, did it work, and how did you handle those cases?

Because, for example, I'm supposing that you are relying on `attached/detachedCallback` in order to construct an equivalent behind-the-scenes scene graph in Three.js. I am doing the same thing (constructing a virtual scene graph from custom elements, but in my case the graph is not made with Three.js) over at http://infamous.io.

The problem that I face is that when I try to transclude things into shadow DOM that everything just falls apart. It seems like the root elements (in my case, `<motor-scene>`, in your case `<a-scene>`) may need to keep it's own shadow DOM and have absolutely no nested shadow DOM, and that the user-land HTML, which may or may not contain nested shadow DOMs, needs to be able to work completely independently of the behind-the-scene tree structure, and that we'll need a way to traverse the user-land nested shadow DOMs in order to gleen the structure that we need to create (for example, to render with Three.js, etc), and then we need to construct that actual structure in our shadow DOM (if we intend to have elements in the dev tool for inspectability).

In your case, you are considering only WebGL. My case is more tricky: rendering to DOM (CSS 3D) is a required ability, and that DOM will be mixed with WebGL like what Famous was making (but has abandoned) over at http://famous.org.

TLDR: I am wondering if you guys have thought about transclusion in webcomponents (shadow DOM) and how you're dealing (or will deal) with it.

To get more of a sense of my problem, I also asked a [similar question](https://github.com/w3c/webcomponents/issues/504) over at w3c/webcomponents.
 @dmarcos 

> AFRAME only uses the custom elements API
> how does your approach work across different browsers with no shadow dom implementation?

Same here, it works fine when we ignore shadow DOM (f.e. in browsers that don't have that).

My custom elements also do not use Shadow DOM, but the concern I express here is a little different: What if users want to use their own shadow DOM then they transclude our custom elements?

For example, suppose an end user writes this:

``` html
<!-- This is "light DOM" -->
<div id="scene-container">
    <a-sphere ...></a-sphere>
</div>
```

and then that user procedes to add a shadow DOM to the scene-container:

``` js
const el = document.querySelector('#scene-container')
const shadowRoot = el.createShadowRoot()
shadowRoot.innerHTML = `
    <!-- This is "shadow DOM" -->
    <a-scene>
        <content selector="a-sphere">
        </content>
    </a-scene>
`
```

This isn't a very good example, but shows the problem. What will happen is that the `<a-sphere>` element will be transcluded (placed) into the inert `<content>` element of the shadow DOM. The result is

``` html
  <!-- shadow DOM -->
    <a-scene>
        <content selector="a-sphere">
            <a-sphere ...></a-sphere>
        </content>
    </a-scene>
```

which results in the behind-the-scenes "flat DOM" (the thing the browser actually renders):

``` html
  <!-- flat DOM -->
    <a-scene>
            <a-sphere ...></a-sphere>
    </a-scene>
```

That's what I'm wondering about, if you guys have considered what would happen when a user writes HTML like that.
 @dmarcos Here's a better example. Suppose I want to make a layout component (using Custom Elements) that will accept AFrame elements and transclude them into the layout, where the layout's root element is an `<a-scene>`. Following is basic layout component (this better shows why one would use Shadow DOM as have above, in the context of a custom element component). Imagine that this simple component's goal is to use A-Frame in order to build a UI that has a header, footer, sidebar, and content area:

``` js
// awesome-layout.js
import 'aframe' // registers all the <a-*> elements

export default
document.registerElement('awesome-layout', class AwesomeLayout extends HTMLElement {
    createdCallback() {

        // give the component a shadow root, so we can transclude things into our component (similar to React).
        this.shadowRoot = this.createShadowRoot()

        // this is the content of our shadow root (similar to the render() method of a React component).
        this.shadowRoot.innerHTML = `
            <div class="scene-container">
                <a-scene>
                    <a-entity position="...">
                        <content selector="[header]">
                        </content>
                    </a-entity>
                    <a-entity position="...">
                        <content selector="[sidebar]">
                        </content>
                    </a-entity>
                    <a-entity position="...">
                        <content selector="[content]">
                        </content>
                    </a-entity>
                    <a-entity position="...">
                        <content selector="[footer]">
                        </content>
                    </a-entity>
                </a-scene>
            </div>
        `
    }
})
```

Now, this component can be imported and then used in a new component (we'll use React in this example) that will define the pieces that go in the header, sidebar, content, and footer areas of the layout:

``` jsx
import './awesome-layout' // registers the <awesome-layout> element
import React from 'react'
import ReactDOM from 'react-dom'

// render <awesome-layout> into the body of the page:
ReactDOM.render(
    <awesome-layout>
        <a-image header ...></a-image>
        <a-plane footer ...></a-plane>
        <a-plane sidebar ...></a-plane>
        <a-plane content ...></a-plane>
    </awesome-layout>,
    document.body
)
```

This is a contrived example, but you can get the gist of the concept: we've rendered an `<awesome-layout>` element, and in it we have placed four items that will get transcluded (placed) into the ShadowDOM of the `awesome-layout`. As you will be able to guess, the `a-plane` and `a-image` elements will be moved into the corresponding `a-entity` elements of the `awesome-layout` component. Keep in mind that when calling `parentNode` on one of the transcluded elements after is has been transcluded will result in a reference to the `<content>` element, not the `<a-entity>` elements. So it seems that for a ShadowDOM-compatible solution to exist, the fact that `parentNode` may be a `<content>` element and not a `<a-*>` element has to be taken into consideration (same with the upcoming `<slot>` elements).

We can also note that it makes sense for the `a-plane` or `a-image` elements to be transcluded into the `a-entity` elements, but it may not make so much sense for them to be transcluded into any other type of elements.

So, that's basically the idea I'm working with, how to handle transclusion so that the custom elements still work and so that a behind-the-scenes scene graph can be constructed properly (in your case with Three.js, in my case with a custom implementation).

Cheers! :]
 (Also note, in the current state of things, `<content>` elements from ShadowDOM v0 are being replaced by `<slot>` elements in ShadowDOM v1, and the `<content>` element selector doesn't seem to work in Chrome, but you can reproduce the issue by not using a selector and having only a single `<content>` element, in which case all the element outside of the shadow root will get transcluded into the single `<content>` element.)

There's also the issue of end users possibly appending new elements into the `awesome-layout`, in which case I believe some extra logic is currently needed in order to place those into the ShadowDOM. I believe this might be fixed with slots in v1 though.
 @dmarcos 

> @trusktr how does your approach work across different browsers with no shadow dom implementation?

I'm planning to use polyfills for now, but I think by the time my library is ready (when it has it's first docs up and demos) then by that time all browsers might already support ShadowDOM natively.

On another note, I believe I have a solution to the problem (which your shadow-dom-using users will eventually run into), but I haven't implemented it yet. [The solution](https://github.com/infamous/infamous/issues/40) is not too difficult of a change to make with regards to my library, which I'll do soon...
 Wait, nevermind, that solution only covers cases where children are invalid, but if a `<motor-node>` child is attached to somewhere other than a `<motor-node>` or `<motor-scene>` then there's no way for the child to know the problem when distributed into a closed Shadow tree.

There has to be some other thing I can do to complete the solution, as parent-to-child observation only solve half of the problem when the parent is indeed one of my elements.
 @dmarcos @ngokevin Here's two jsfiddles that illustrate the problem.

This first example is basic, and works: https://jsfiddle.net/trusktr/1ecfha5h

In this second example, we are using ShadowDOM in a very simple way, and the example fails to work: https://jsfiddle.net/trusktr/1ecfha5h/1

I believe it's important for the A-Frame elements to work with ShadowDOM because ShadowDOM is (currently) an important part of the future of components in the web.

I'm beginning to tackle this in my own lib; I'll report back on how I solve it.
 Hey guys, the way I solve ShadowDOM in `infamous` is actually super easy. I am using MutationObserver to detect changes in children. Then, f.e., if a child is added to a node, and the parent also has a shadow root, then in my JavaScript scene graph I simply add the child to the parent as normal (just like you do) but then I also put something like a `isDistributed` flag to true on the child if it matches the selector (v0) or slot name (v1) in the shadow root. 

In parents with shadow roots, I add a `shadowChildren` collection to them which contains the top level elements in the shadow root. It is easy to update this list using a MutationObserver on the parent's active shadow root (in v1 ShadowDOM there can only be one shadow root).

It is just some book keeping.

When traversing the scene graph for rendering, you normally traverse to children. However, you simply traverse to `shadowChildren` if you see that a parent node has a root.

With some event tracking on the `slot` elements, you can then keep track of where a node got distributed too. So when you get to a node with a slot, you will have book-kept which nodes are `distributedChildren` for example.

What you end up with (using my method) is the same tree with parents and children which mirrors what you see in the "light DOM", and then you also have these extra collections representing the composed tree.

When creating world transforms, you would do those based on the composed tree that you traverse.

> We want AFRAME to reach the largest possible browser base without much performance hit and minimum bloat in the code base. We keep en eye on the shadow DOM but we have not played with it in the context of AFRAME but we are defintively interested. @trusktr how does your approach work across different browsers with no shadow dom implementation?

In browsers with no ShadowDOM, not to worry. People don't have to use ShadowDOM in those browsers, or they can supply their own polyfills if they do.

The thing is, you wouldn't be forcing people to use shadow Dom, you would only be compatible with it for users that have those browsers, otherwise A-Frame would continue to work just like before. It entirely an opt-in feature for users that have compatible browsers.

If you search for "shadow root" or similar at http://GitHub.com/trusktr/infamous you will probably find my implementation of the book keeping. 

I recently just added WebGL, which is currently only rendering from the "light tree", not looking at the shadow Dom stuff yet.

When I get more time, I can explain it better by pointing to code references and examples once my WebGL is using the ShadowDOM book-kept stuff... It might be tempting to write components using aframe-react because the component model is perhaps nicer and cleaner than with shadow DOM, but writing with shadow has the result that new HTML components can be used everywhere other than with React.

I'm still pondering on how to do this as cleanly as possible with my Elements while still providing an imperative API that would work if the custom elements are disabled.

That's one thing I've been working towards is allowing an option to disable DOM so that no DOM is outputted of using the imperative API, rendering straight to WebGL with no DOM overhead). I'm thinking of how to decouple the SahdowDOM features from the imperative features in a way that the imperative stuff will work fine without shadow DOM. This will make the API flexible for use in many ways, even outside DOM. @donmccurdy 


> A-Frame does not, by default, write attribute values to the DOM. If an entity's position changes on every frame, A-Frame will only add the position attribute to the DOM once, and after that all updates are virtualized.

I saw that in aframe-react, it passes non-string values to setAttribute. This is what I've been planning to do in infamous too. 👍 

> Being able to run A-Frame in DOM-less environments, e.g. serverside, is not built in. I would be curious how that goes for you, if that's something you're planning to try.

I'm planning to do SSR stuff, but more like outputting HTML from the server, then the HTML becomes live on the client, so that will work. If I actually want to _run_ it on the server, I'd probably use Chrome headless or something, so it'll still work.

---

Anywho, those points aren't necessarily related to ShadowDOM, in the sense that they don't prevent A-Frame from being ShadowDOM-compatible. Because, for example, if I add a shadow root to a parent `a-` element, then the children will be distributed somewhere into the shadow tree. A-Frame could have `MutationObserver`s and `slotchange` event listeners that detect the distribution of nodes and A-Frame can then update the virtual scene graph (the "sort of virtual DOM" you mentioned) based on those changes, regardless of what `setAttribute` does.  Should fix #1036.
 @ngokevin 
Okay. I'll try to expand what exists for a-animation to cover it.
 @ngokevin 
Tucked it in at the bottom of the file and based it off the `click` event `begin` test.
  **Description:**
Allow movement through a scene using the arrow keys in addition to ASWD, which only really make sense for people who have played first person shooters on PC in the past.

While using a mouse and arrow keys together feels awkward position-wise, it seems like a good idea to allow it for the initial experience.
- A-Frame Version: Any
- Platform/Device: Desktop w/ Keyboard
 Did a quick test on an example and I believe this can be closed with @donmccurdy 's PR
  This may have been requested before, but I can detail a complete use case which may be helpful for further discussion. @ngokevin recently added the `data` attribute to his `aframe-template-component` to help solve my JSON loading scenario. Given that addition, I was able to reach the following solution:

```
AFRAME.registerComponent('manifest', {
  schema: {
    src: { default: '' },
    assets: { default: [] }
  },

  init: function () {
    var el    = this.el;
    var data  = this.data;
    var name  = data.src.substr(1);
    var asset = document.querySelector(data.src);

    asset.addEventListener('loaded', function() {
      data.assets = JSON.parse(asset.data).assets;
      el.setAttribute('template', 'src: #images; data: manifest');
    });
  }
});
```

```
<a-scene>
  <a-assets>
    <a-asset-item id="manifest-data" src="assets/manifest.json"></a-asset-item>
    <script id="images" type="text/x-nunjucks-template">
      {% for i in range(0, assets.length) %}
        <a-image src="assets/images/{{ assets[i] }}"></a-image>
      {% endfor %}
    </script>
  </a-assets>

  <a-entity position="0 0 0" manifest="src: #manifest-data"></a-entity>
</a-scene>
```

But as you can see, I'm forced to attach the `template` component only after the `mainfest-data` asset has actually loaded due to the timing of the `template` components rendering. This is understandable given what it accomplishes, however the need for the `manifest` component to act as a `loaded` and data bridge could be reduced, and eventually removed, if `<a-event>` was usable inside an `<a-asset-item>`. The result would become more like this:

```
<a-scene>
  <a-assets>
    <a-asset-item id="manifest-data" src="assets/manifest.json">
      <a-event name="loaded" target="#container" template="src: #images; data-src: #manifest-data"></a-event>
    </a-asset-item>
    <script id="images" type="text/x-nunjucks-template">
      {% for i in range(0, assets.length) %}
        <a-image src="assets/images/{{ assets[i] }}"></a-image>
      {% endfor %}
    </script>
  </a-assets>

  <a-entity id="container" position="0 0 0"></a-entity>
</a-scene>
```

Of course the `data-src` attribute would need to be added to the `template` component as well, but allowing events in this manner would be a step in the right direction. Also, I have only scratched the surface in regard to asset loading in this framework. So this may not even be possible given the lifecycle at hand.
 @ngokevin 
Thanks for the quick reply. I'll use that pattern in this case, instead. You should also publish that separately, too; it's quite a useful component.
  **Description:**
When you first open the page , some objects are displayed without texture using Chrome Mobile for Android . When updating page bug disappears .
Textures disappear at random : there is no connection between the object geometry or shader type and bug.
Most often disappears texture element <a-sky>. With the disappearance of the texture object becomes white.

In version 0.1 a bug wasn't observed.
- A-Frame Version:0.2
- Platform/Device:Android 5 and 6 / Xperia Z / Samsung galaxy S7 Edge
  **Description:**
It's nice when a project's license is included as a comment at the top of the pre-built source file. That way it doesn't have to be added manually, and the only thing required to legally distribute the file within another application would be the file itself.
 Shall the license be added to the minified version as well, or just to the regular build? Hi, I'm interested in tackling this issue. Is there anything else that should be known about this issue? @ngokevin is this still needed to be worked on?  The logo demo on master is currently broken and `parentEl` is `null`, so looks like this is still an issue
 Still hitting this but here's what I've noticed with the A-Frame Logo demo where this happens twice:
- `self` is `<a-entity light="" data-aframe-default-light="" position="" rotation="" scale="" visible=""></a-entity>`;   `parentEl` and `parentNode` are both null
- When inspecting the DOM to find elements, they're gone; instead there's:  `<a-light type="directional" color="#FFF" intensity="0.45" position="4 2 1" light="" rotation="" scale="" visible=""></a-light>`

If elements are being created/swapped then a reference isn't being updated which is why `parentNode` is null.
 I'm running into this too, while working on lighttarget. parentEl not defined. Only on firefox. Seems to happen mainly with lights.

Edit: if i comment out 'this.system.registerLight(el);' in light component, the problem goes away.

investigating further...
 Could it have something to do with this:
In systems/light.js:
32 `sceneEl.removeChild(defaultLights[i]);`
a regular DOM removechild deletes the element, but what happens to the light component on it then? maybe first some cleanup is needed with the threejs scenegraph ?

Or maybe parentEl / parentNode are never set on those default lights...
  **Description:**
If I want to make my object half of its original size, it would be nice to set the scale attribute as one value like `scale=".5"`. Currently this will only scale the object along the X axis, so I have to use `scale=".5 .5 .5"`. I think it would be handy if there is only a single value to assume that it is meant to apply to all three axes.
- A-Frame Version: Latest
- Platform/Device: Desktop Chrome
  aframe isn't working in Internet Explorer 11 (Windows). Is this a known issue?

Here I attach a screenshot with the error:

```
var evt = new CustomEvent(name, data);
Object does not support this action
```
- A-Frame Version: 0.2.0
- Platform/Device: Internet Explorer 11 (Windows)
  ![image](http://i.imgur.com/xzZInXY.png)
 According to [MDN](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent) the CustomEvent constructor is not supported by IE. However, basic support does exist and can be utilized through the following [polyfill](https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent/CustomEvent#Polyfill).

```
(function () {

  if ( typeof window.CustomEvent === "function" ) return false;

  function CustomEvent ( event, params ) {
    params = params || { bubbles: false, cancelable: false, detail: undefined };
    var evt = document.createEvent( 'CustomEvent' );
    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail );
    return evt;
   }

  CustomEvent.prototype = window.Event.prototype;

  window.CustomEvent = CustomEvent;
})();
```

However, [Microsoft states](https://developer.microsoft.com/en-us/microsoft-edge/platform/documentation/dev-guide/dom/dom-event-constructors/) that, "As of Microsoft Edge (build 10240+), the `createEvent()`/`initEvent()` constructor pattern for synthetic events is deprecated and has been replaced by the DOM L4 event constructor pattern," which includes the `CustomEvent` constructor. So while A-Frame is technically using the correct code in regard to modern browsers, you will need to employ a polyfill to combat this issue until Edge is the lowest common denominator.
 @msimpson Okay, I fixed it with this: https://www.npmjs.com/package/custom-event-polyfill. You're right. Maybe it's a Microsoft issue. I think this issue can be closed.
 @ngokevin 
I think A-Frame usage will grow beyond WebVR, alone. Given your React bindings, it may become a staple for THREE usage in that community. So support for IE 11, which is included alongside Edge in Windows 10, is probably warranted as it's not going anywhere anytime soon.

However, I'm not so sure that the polyfill itself should be included with A-Frame by default. It would probably be better to encourage its usage in the documentation for IE 11 and below; somewhat like Bootstrap with Respond.js. That way you don't force it upon most people or collide with their inclusion of it separately.
 It should be mentioned that in A-Frame 0.3.2 the only thing needed to work in IE11 is the above mentioned polyfill.

IE11 works great for displaying 360-degree images, amongst other things.
 One more gotcha which is quite specific, but since this seems to be the top google result for "aframe ie11" I'll just throw it in here.

We had all our assets protected behind a login, and in IE11, using aframe, would not load slash-absolute URLs for images (as in `src="/my-image.jpg"`) and thus the whole specified domain was required. Then, the images would not load because three.js adds crossDomain="anonymous" when fetching textures, the whole debacle resulting in several "$s could not be fetched" errors. Only in IE11, not in Chrome et-al.

This can be avoided by protecting all site assets but not the images.
  If we're nitpicking **eyeheight** would rather be 1.6 m ... 
  This is not working with version >=0.3.0 I have tested in firefox & chrome in Android. It is not working. When I change the afrmae version to 0.2.0, it is directly going to vr mode. The following code seems to work with v0.4.0 in Firefox Nightly when `auto-init-vr` component is attached to the scene. Unfortunately Chromium still requires user interaction before it can auto-trigger VR mode:

```
AFRAME.registerComponent('auto-init-vr', {
    init: function () {

        var scene = this;

        scene.el.addEventListener('loaded', function () {
            setTimeout(function(){
                console.log('Automatically entering VR...');
                scene.el.sceneEl.enterVR();
            },1000);
        });
    }
});
```
Note that I changed the component name since the original name collides with an internal component in v0.4.0. The `setTimeout` isn't exactly very elegant - is there a better way of detecting when the entire scene is ready? `auto-enter-vr` in 0.4.0 does what you want, but is configured by default to only enter if VR display is Gear VR (for Carmel browser which has no other way to enter VR) Is there any way for `auto-enter-vr` to have the GearVR be over-ridden? We are trying to jump through multiple small scenes, but we have to enter VR manually each time, which is inconvenient on Cardboard!

None of the "old" methods of calling a script of setting a `setTimeout` or `loaded` work on 0.4.0, so this is extra-frustrating. @cvan Do you have an ETA, or a hint? I'm sorta stuck and it's driving me bonkers.

Our main platform will be cardboard and cardboard-like devices. Vive and Rift aren't really on the map for now :) sorry about the bugs :-/ @cvan not sure `display: all` works correctly at the moment, https://github.com/aframevr/aframe/blob/master/src/components/scene/auto-enter-vr.js#L50 ... 
the original intent was to leave blank for all, but unfortunately the parsing just fills in the default... which is unfortunately still GearVR.  if you've got fixes forthcoming, they haven't appeared in master yet > auto-enter-vr will go away in next version in favor of the link component and system

we will presumably still want the `vrdisplayactivate` and `vrdisplaydeactivate` enter/exit behaviors (assuming that browsers fire the events) @Silver-Seagull try:
https://rawgit.com/chenzlabs/aframe/fix-auto-enter-vr-dist/dist/aframe-master.js
https://rawgit.com/chenzlabs/aframe/fix-auto-enter-vr-dist/dist/aframe-master.min.js
with
`<a-scene auto-enter-vr="display:all">`
 @cvan & @machenmusik Thank you for the help and tips - however the app isn't entering the split-view as it should.

I feel a little out of my depth (to say the least) and I may have posted out of turn. Looking at our code, I think the view is not Cardboard, but an a-frame page in a Cordova app using the Crosswalk browser. I assume the WebKit-based browser is why this is not working?

:edit:
Running the code now, definitely a Crosswalk-based project in Cordova. On desktop, the VR/cardboard button disappears, which looks like it fired. @cvan It looks like it's a WebVR block, as browsers (save Carmel?) won't allow that sort of action unless it comes from a human.

Thank you for the help and suggestions - hopefully `link` comes along in the January roadmap as planned ^_^  Example for getComputedAttribute (attr) is incorrect. It reads 
   `entity.getAttribute('geometry')`
when it should be 
   `entity.getComputedAttribute('geometry')` 
- A-Frame Version: 0.2.0
- Platform/Device:
  **Description:**
Supporting the glTF Loader alongside the Collada Loader.

**Changes proposed:**
- Adding the glTFLoader
 @ngokevin auto and loop are working, @dmarcos named the system gltf-animations -- gltf-model seemed confusing given it's the name of the component (3d model, data model), and there's no actual data associated with this system, more of a controller.

There's some other features I'd like to add (like play/pause animations associated with particular objects within a glTF scene), but seems like the most basic functionality is best for the initial PR.  Let me know if there's anything else I should add/remove/change.  
 Per @dmarcos going to start off putting this in a component for now because of the glTF library overhead : https://github.com/xirvr/aframe-gltf 
 Converted to 3rd party component: https://github.com/xirvr/aframe-gltf 
  I was kind of confused when I first saw it until I realized that it wraps the whole material definition so registerMaterial does make more sense, especially for devs who are already acquainted with three.js. The ambiguity with the schema's "type" property is not so nice though. Maybe a synonym like "kind" or something could be used to select the material and geometry components variations. 
 it would be ambiguous when you define the schema parser, there's already a type property there
 hmm then that's a non issue I guess
  maybe a proxy component could handle this by passing it's data to the system when the component inits? The system would just have to init itself in a dormant state until the first time a component accesses it
 I'm using a proxy component (exactly like @wizgrav's suggestion) for physics. Works OK but that means the system will be only half-initialized while its components are loading. One possible fix would be initializing a-scene components before the rest (is there a defined order now?).
 > is there a defined order now?

I was curious about this, myself.
 Explicit definition for the initialization order of components on a whole scene context is not implemented yet, the .dependencies property handles that on a per entity context, but there's a relevant discussion about it here https://github.com/aframevr/aframe/issues/1152
  Is there a solution to getting audio to play in iOS browsers? Audio is working on desktop and Android devices. I saw a similar issue posted here: https://stackoverflow.com/questions/38645716/cant-play-sound-on-ios

 I too would lovvvve a solution to this.  Any help out there? https://howlerjs.com has Audio Sprites which is pretty much 'skipping around in one file' as far as I understood it, so implementing this might not be as painful. I think one member of the A-Frame community (jostrem) successfully implemented Howler with iOS. If you search for Howler in Slack, you'll find it. i am trying to trigger sounds from within an aframe scene interaction, but it won't work on ios.  

Everything says you need a user interaction on ios to play audio, but i can't find a working example of that. I created a prototype, which is working on my 3rd generation iPad.
I'd appreciate if someone with a newer iPhone or iPad could confirm that it
works for them.
http://curious-electric.com/aframe/audiosprite/

On Tue, Jun 13, 2017 at 4:42 PM Don McCurdy <notifications@github.com>
wrote:

> Everything says you need a user interaction on ios to play audio, but i
> can't find a working example of that.
>
> The problem is that interaction within an A-Frame scene doesn't count. The
> browser can't tell what's going on inside WebGL, so it has to assume those
> events are just generated by arbitrary JS. You need an old-fashioned
> physical touchstart or click event, triggered by the user's finger (or
> Cardboard button) and not by a fuse or gaze cursor. Gamepad buttons might
> also count. I don't know of a live example of this though.
>
> It'd be great to see someone write a component that extends the standard
> sound component to add audio sprite support using howlerjs.
>
> +1, this sounds like great idea. It would be nice to see this prototyped
> as a separate component (sound-sprite?) and added to the registry, where
> multiple instances of the component can share a single audio file.
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/1463#issuecomment-308138947>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAmK8tFVZmn5ruzx3AfO5kZLfRkfUGIdks5sDp_JgaJpZM4Iec8O>
> .
>
 Tested on my iphone 6 and i did not hear any audio after clicking the button.  

Thanks for trying to get this to work!  I will use it on my live site if we get it working at all. It worked for someone in the Slack community ... did you look ('gaze') at the cubes? ha...i didnt realize i needed to gaze at the cubes...nor turn off the silent lock switch.  Did both of those and it works!  cool.  would this work with a large audio file? I guess so, didn't try it out yet.
How large is large?

On Fri, Jun 16, 2017 at 7:11 PM MeditationMatt <notifications@github.com>
wrote:

> would this work with a large audio file?
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/1463#issuecomment-309081998>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AAmK8mrAqty1MVX6rpn0EUSE6PjpC2RPks5sErcjgaJpZM4Iec8O>
> .
>
  This needs review as I had to alter the prototype to use `defaultComponentsFromPrimitive` in `registerPrimitive` instead of simply `defaultComponents` since Object.create will override the `defaultComponents` from the `a-entity` prototype. This, if allowed, would cause test failures as `getAttribute` subsequently returns `null` for those overridden attributes (i.e. position, scale, etc.).

Fixes #1330.
  **Description:**
Fixing a link error for a-light in the tutorial
**Changes proposed:**
  This sounds more consistent to me, but isn't `type` reserved? 
 @donmccurdy 
Doesn't seem to be according to [MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Reserved_keywords_as_of_ECMAScript_6).
 @msimpson haha oh, right – well not reserved by the language, by otherwise employed by the schema definition: https://aframe.io/docs/core/component.html#Schema

would be a breaking change, but i suppose the schema could use `__type` instead, leaving `type` available for use as a property.
 @donmccurdy 
Oh ... missed that.
  Fix for #42. I assume this is all that is needed to make this work as it seemed to work in my project.
  Fixing #1285 
  A small addition to allow animating the camera's zoom property.
 @ngokevin 
No problem.
  this.el.addEventListener('animationend', function() {

});

does not work in a component. Even not in a component assigned to an a-animation entity.

Whereas

document.addEventListener('animationend', function() {

});

works anywhere.
- A-Frame Version: 0.2.0
- Platform/Device: all
  I think it would be better to not set the A-Frame favicon per default. If I set the favicon in HTML, sometimes the A-Frame icon and sometimes my own icon show up.
- A-Frame Version: 0.2.0
- Platform/Device: Google Chrome
 http://dev2.ideaspacevr.org/testing
 Also being set in [this demo](https://sandbox.donmccurdy.com/vr/walking/) - 

https://github.com/aframevr/aframe/blob/faddf6f3323cf634f3d5c68837eb4b39ad0fd064/src/core/scene/metaTags.js#L9

(i don't have my own favicon set though, so in my case I don't mind A-Frame providing the icon)
 I the only reference to the A-Frame logo is:

```
var MOBILE_HEAD_TAGS = module.exports.MOBILE_HEAD_TAGS = [
  Meta({name: 'viewport', content: 'width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui'}),

  // W3C-standardised meta tags.
  Meta({name: 'mobile-web-app-capable', content: 'yes'}),
  Meta({name: 'theme-color', content: 'black'}),
  Link({rel: 'icon', sizes: '192x192', href: 'https://aframe.io/images/aframe-logo-192.png'})
];
```

@donmccurdy yes exactly. I don't mind it either, but I guess people want to set their own and if I explicitly set it in HTML, Chrome is showing sometimes the A-Frame icon and sometimes my own.
 I'm having the same problem. And the favicon is stuck in my app, I can't use my own. I've cleaned my cache and tried everything. Strangely, this only happens in Firefox and IE. I explain the issue here: http://stackoverflow.com/questions/37312783/favicon-only-showing-up-in-chrome
 @cvan Okay, thanks for the quick reply!
 Hi, I still have this issue on all my iOS browsers on a iPad (Chrome, Mozilla and Safari). I have set
`    <link rel="icon" href="design/xyz.png">`
on the head - and it seems to overwrite it. Using aframe 0.7.1

Line 16 of src/core/scene/metaTags.js is still injecting the link (also after commit 2238710):
`var MOBILE_IOS_HEAD_TAGS = [
  // iOS-specific meta tags for fullscreen when pinning to homescreen.
  Meta({name: 'apple-mobile-web-app-capable', content: 'yes'}),
  Meta({name: 'apple-mobile-web-app-status-bar-style', content: 'black'}),
  Link({rel: 'apple-touch-icon', href: 'https://aframe.io/images/aframe-logo-152.png'})
];`  **Description:**
- A-Frame Version:
- Platform/Device: OS X Chrome & Firefox

Am I missing something?  I've tried everything to get a videosphere to play inline on a webpage without putting it in an iframe.  When I put the code in my site the videosphere always fills the entire page, which I do not want.  Can this be done or am I just banging my head against a brick wall?
  Oh....I've some problems with this dae animation model....@ngokevin thank you for the sample... now the models works fine in my project! but is there any articles about AFrame's animations?? if I want use other format animation file, what can I do? like this: http://threejs.org/examples/#webgl_lights_hemisphere.

https://files.slack.com/files-pri/T0FAGUM6W-F1846MQ5U/animations-from-dae  <-- this link don't exist! 
 Seems like THREE.AnimationHandler, which is used in the codepen example, was deprecated as of r73 and I've only been able to find examples where the models were imported as json objects and not COLLADA objects.

https://github.com/mrdoob/three.js/issues/9426
 @donmccurdy Simply Amazing! Does this mean the animation-mixer.js will work for a gltf model?  **Description:**
1. set up Dk2 headset with SDK 1.3.2 
2. launch Chromium
3. go to aframe.io
4. go to examples
5. try entering vr mode

expected : enter vr mode
actual : your browser does not support vr mode
- A-Frame Version: v0.2
- Platform/Device: windows 10, dk2

Note: 
going to vr mode @ http://quake3.webvr.io/ does work. 
 Brandon's build using WebVR API 1.0; found out that it's a WIP.
  **Description:**

Able to use **detach** to remove an a-entity, but **append** does not work to place it back on the scene.

See here, where .redCube is an a-entity that is a cube, and masterScene is the class applied to a-scene.

```
$( ".redCube" ).click(function() {
  $( this ).toggleClass( "off" );
});
var p;
$( "button" ).click(function() {
  if ( p ) {
    p.appendTo( ".masterScene" );
    p = null;
  } else {
    p = $( ".redCube" ).detach();
  }
});
```

```
  <a-assets>
  <a-mixin id="cube" geometry="primitive: box"></a-mixin>
  <a-mixin id="cube-hovered" material="color: magenta"></a-mixin>
  <a-mixin id="cube-selected" material="color: cyan"></a-mixin>
  <a-mixin id="red" material="color: red"></a-mixin>
  <a-mixin id="green" material="color: green" data></a-mixin>
  </a-assets>

 <a-entity position="0 2.2 4">
    <a-entity camera look-controls wasd-controls>
      <a-entity position="0 0 -3"
                geometry="primitive: ring; radiusOuter: 0.10;
                          radiusInner: 0.08;"
                material="color: cyan; shader: flat"
                cursor="maxDistance: 30; fuse: true">
        <a-animation begin="click" easing="ease-in" attribute="scale"
             fill="backwards" from="0.1 0.1 0.1" to="1 1 1" dur="150"></a-animation>
        <a-animation begin="fusing" easing="ease-in" attribute="scale"
             fill="forwards" from="1 1 1" to="0.1 0.1 0.1" dur="1500"></a-animation>
      </a-entity>
    </a-entity>
  </a-entity>

<a-scene class="masterScene" >
      <a-entity position="0 0 -6" class="greenCube mixin="cube green">
                   <a-animation begin="click" attribute="rotation" to="0 360 0"
                   easing="linear" dur="2000" fill="backwards"></a-animation>
     </a-entity>
      <a-entity position="5 2 -6" class="redCube" mixin="cube red">
                   <a-animation begin="click" attribute="rotation" to="0 360 0"
                   easing="linear" dur="2000" fill="backwards"></a-animation>
     </a-entity>
</a-scene>
```
- A-Frame Version: 0.2.0
- Platform/Device: Mac/Chrome and tested on iphone6+/ios 9.3.1
 I can reproduce this here: https://sandbox.donmccurdy.com/vr/walls/

For either one of the `<a-box/>` elements:

``` javascript
sceneEl.remove(boxEl);
sceneEl.appendChild(boxEl);             // no effect, no errors
sceneEl.appendChild(boxEl.cloneNode()); // works
```
 Seems fine that it stops working _while_ it's detached, what's a bit unexpected is that it doesn't re-initialize when it is reattached, unless you clone the node first.

If there are issues preventing an entity from being re-attached, once `remove()` has been called on its components, maybe we should throw an error if we can detect a recycled entity being inserted?
  **Description:**
1. go to https://aframe.io/examples/showcase/videosphere/
Expected: title of 360 Video, video of city scape in motion.
Actual: black screen with no title
- A-Frame Version: 0.2
- Platform/Device: iPhone 6s / iOS 9.3.1
 need to look to see if it's the format or size that's causing the issue : 
dmarcos also pointed me to : https://aframe.io/faq/#Why-does-my-video-not-play-on-mobile
  Following the discussions with @ngokevin @dmarcos @donmccurdy and @fernandojsg :

Enable post processing by extending components with a .tock() method which runs after the scene renders.

A-scene maintains a .renderTarget and switches rendering to that in the presence of at least one tock behavior.

A graph based mechanism is employed to allow for explicitly definable execution ordering for both tick and tock behaviors.

Components can define two way connections in the graph using the properties .precedents and .following, similar to .dependencies.

Sorting to define the execution order takes place only in registerComponent() and batching is done efficiently in a-scene using caches.

The graph based mechanism works fast and comfortable for the developer. Cyclic dependencies in the graph are errors and throw exceptions.

An example utilizing most of the functionality added by this PR at http://wizgrav.github.io/aframe/examples/test/post-processing/index.html
 This is really neat! Nice example.

As far as the API, it feels strange having DOM events hooked into the render loop, firing every 8-16ms. I'm not sure exactly what to recommend though. Other ideas:

``` javascript
// 1.
sceneEl.setPostProcessingCallback(function () { /* ... */ });

// 2.
sceneEl.addPostProcessingCallback(function () { /* ... */ });

// 3.
AFRAME.registerComponent('my-component', {
  prerender: function () { /* called only if my-component is attached to sceneEl */ },
  postrender: function () { /* called only if my-component is attached to sceneEl */ },
});
```
 @donmccurdy you proposals #1/#2 were also my original thoughts. I went for emit because it seemed to be more consistent with the patterns used in the library. I'm almost certain that performance shouldn't degrade with dom events. Of course this needs investigation but 8/16ms is still a good chunk and we have to take into account that postprocessing will have a big cost itself so the events will probably be a negligible fraction of that
 based on @dmarcos comments I added a post method on components. Behaviors are split in tick and post types and handled separately. Performance has indeed improved noticeably(from 50% -> 40% on my box for the example) so this seems like the optimal path to take.

I also added a postPriority property on components. This is intended to facilitate common post proc setups where several components will produce their own renderTargets containing bloom, godrays, ssao etc and then a composer component can pick these up and blend them to screen. Prioritization happens only on post behaviors(which should only be a handful) and sorting happens only once per frame if there was a change in the post pipeline.

Finally an event is emitted when the sorting happens to indicate that the pipeline has changed. This can be picked up by the composer components so they can reconfigure themselves. I'm not sure about this one maybe a simple timestamp could work. What are your thoughts on this, and the whole pr in general?
 @ngokevin sorry for the mess with dist and such, I was having great pain with npm and setting up the build in general. I'll fix everything
 I also included the tweaked VREffect inside lib/three.js until it is fixed in three.js itself. I see no reason why they wouldn't do the tweak themselves. The VREffect render() should match the signature of the base WebGLRenderer since it's a wrapper of it. Another note of interest is the use of depth textures. I think it recently landed on three and fortunately they implemented it as a property on the renderTarget so when aframe upgrades to the latest three.js all that will be needed to utilize depth textures will be

`this.renderTarget.depthTexture = new THREE.DepthTexture()`

and of course resizing it along with the renderTarget itself
 @ngokevin I'm not sure a postproc effect can be described like a shader, it's more of a setup. For instance bloom commonly uses a separable gaussian blur so it would need at least two passes. Good bloom would also entail downsampling several times, blurring, and blending again on the way up. I think components make for a natural expression even if meant to be attached on the scene only. But I don't know I haven't yet looked over all of aframe's source and patterns so you'd know best
 @ngokevin another thing that should be taken into account while brainstorming is that customisation logic ends up in the composer usually. Postproc steps that provide intermediate renderTargets like bloom and ssao tend to be straightforward and so could be cast in place as reusable components. Only the composer needs special treatment, both for doing the composition of all the rest and also to apply the simple effects like vignette aberations, ascii etc At least for production one shouldn't use extra passes for these. Well maybe a final fxaa step if antialiasing is desired but this is straighforward as well.

The way I imagined it with postPriority would be for all steps that produce renderTargets from the scene's rendering would be left at their default zero priority. The composer would be at one and check for all post components with less priority than him and finally fxaa at two would check for the composer, again based on postPriority
 Yeah I understand your concerns. Defining post specific components seems to be the cleaner route then unless there would be a reason for post components to also run some logic at tick time. To be honest though I cannot think of such a case right now, I need to think about it
 Ok so I tried to think of cases where it would be useful to have a component that taps into both tick and postRender and something did came up. I've updated the example which you can see on http://wizgrav.github.io/aframe/examples/test/post-processing/

The alpha channel of the render target can be used to pass information to the post processing chain, the most common case being masking of objects. In the example the pulse component sets up properties on its underlying mesh. The postproc component then traverses the scene and adjusts the opacity according to these properties. It also handles cleanup when it's removed from the scene.

Alternatively the pulse component could setup it's opacity by itself but it would need to know the state of post processing. It could do that by listening for something like the "post-modified" event.

I'm not arguing in favor of either approach, it would be convenient to have both options availble.

I would also like to mention something, and I know you're going to hate me @ngokevin , but it really needs to be said. It is inevitable that components will need to be extended. At some point, a component will need to access the results of computations performed on another component on another entity. A way to guarantee the order of execution will be needed. I'm sorry if I've missed something, I still study the source but I think there isn't something like that in currently.

Doing something like postRenderPriority may work for postproc because it's by nature limited in scale but for tick behaviors I don't think it's appropriate at all. The solution unity came up for this situation was to add a LateUpdate method which runs after all update methods. So aframe will also need a tock() to go along with tick(). Again excuse me if I'm missing something. This does not concern this PR, it's something else all together but it's relevant and I feel that it should be taken into account
 Following the line of thought from the previous comment, if a tick()/tock() pair is indeed desirable, the api could get some symmetry with a postTick()/postTock() pair for the post processing, getting postRenderPriority out of the picture. Two lanes for the post processing should cover most cases. The third fxaa step I mentioned could be integrated in the compositor itself in postTock(). So that setup could also work
 @ngokevin @dmarcos Added tock() on components as a straight equivalent of unity's LateUpdate. A similar pair is implemented for post render as postRenderTick, postRenderTock. These should be enough to guarantee the order of execution so postRenderPriority was removed. The post-modified event is still emitted as it is useful for reconfiguring the compositor when the post chain changes.

The example at http://wizgrav.github.io/aframe/examples/test/post-processing/ was commented and updated to reflect all functionality in the PR. Some crude bloom was added to highlight the post tick/tock pattern, you can toggle the effect by right clicking. Ascii is always on now. 
 Hmm, I split the example but I'm not sure I did the right thing with the dist files. I did a checkout on the last commit before I touched them. Can you suggest how could they get out of the PR completely?

There's also the issue with VREffect being included in lib/three.js which is not so good. I can try making a PR to three so they can fix it on their source but to be honest, requiring such a core part of aframe from an examples/ folder kind of makes me nervous. Since you control the revision of three included anyway, maybe you should consider including VREffect.js in aframe's source somewhere.
 Yes I agree. Do you want me to do it here?
 the bulk of lint errors come from lib/three.js cause of the inclusion of VREffect.js, I'll take it on it's own file out as we said but should we ignore it in lint checks?
 @ngokevin  Rebased and squashed. Did also the minor changes needed for renderTarget support in @dmarcos  VREffect.js in vendor/
 @fernandojsg This is how I think the post processing could work with both flexibility and efficiency. Here's how the markup would look like

`<a-scene post-process="gloom, nightvision" gloom="intensity:0.5" nightvision="intensity:0.33"></a-scene>`

In this imagine that gloom would generate a texture that needs to be additively blended with the base rendering but nightvision is a simple equation applied to the frag color. The gloom component would do it's processing in tickPostRender and produce the texture. It would also define a postInfo property(not part of the components prototype) that would contain a unique id, uniform definitions for intensity etc and the fragment shader text it needs for the composition later kind of like

.postInfo: {
  name: 'gloom',
  uniforms: {
    'srcTexture': {type: 't', value: this.gloomTexture} // Produced by the component
    'intensity': {type: '1f', value: 0.5} //Settable by the component in it's update()  
  },
  fragmentText: 'void gloomPostProcess(in out vec4 currentColor, vec2 uv){ currentColor += texture2D(gloomInfo.srcTexture, uv) \* gloomInfo.intensity; }'
}

The "post-process" component, the compositor, would collect this information and create it's shader with a setup like

{
  uniforms: {
    "gloomInfo.srcTexture": gloomComponent.uniforms.srcTexture,
    "gloomInfo.intensity": gloomComponent.uniforms.intensity
  },
  fragmentShader: '
    sample2D sceneTexture; // scene.renderTarget
    varying vec2 vUv;
    struct gloomInfoStruct
    {
       sampler2D srcTexture;
       float intensity;
    } gloomInfo; // This is generated by the compositor based on the uniforms from gloom component

```
void gloomPostProcess(in out vec4 currentColor, vec2 uv){ 
       currentColor += texture2D(gloomInfo.srcTexture, uv) * gloomInfo.intensity; 
 } // This comes from the gloom component itself

void main(){
    vec4 color = texture2D(sceneTexture, vUv);
    gloomPostProcess(color,vUv);
    nightvisionPostProcess(color, vUv);
    gl_FragColor = vec4(color.rgb,1.0);
}
```

   }'
}
Nightvision would not need to produce a texture so it would just provide uniforms for control and it's shader chunk. When you change attributes text components would set their uniforms in their update() and the compositor who has them by reference would apply them with no further intervention
 when you say switch, you mean taking out the nightvision completely or just playing with it's intensity to make it apply more or less? In the former case yes the post chain will change and the compositor shader will need to be recompiled but if you just want to toggle the effect setting the intensity in the attribute will just update the uniform. Having some redundant calculation is less wasty than having separate passes for stuff like vignette and such

The fragmentText will be part of the gloomComponent's definition. The compositor will generate the gloomInfo struct text and include the fragmentText from gloomComponent + dynamically generate a main function to apply all components in a chain. The order will be defined in the post-process="" attribute itself. Some conventions are used, the components will have to provide a unique prefix (postInfo.name) for themselves to aid the compositor in its dynamic generation of text. 

The fragmentText of gloomComponent will be defined with these conventions in mind, that it will have access to a gloomInfo struct based on it's unique name containing it's uniforms and it will need to provide all the rest and name it's main function as gloomPostProcess so the compositor can call it, this function will have a common argument signature, kindof like shadertoy does with it's mainImage()
 Yes you can check out exactly that with bloom in the example. It's actually generating the bloom texture in 5 passes at lower res renderTargets (I wanted to try out kawase bloom but the same would apply for separable gaussian blur as well) Components that need to create textures will do that in their tickPostRender() with whatever setup they opt for. Their output(s) will be made available to the compositor via each child's postInfo.uniforms. They'd still need to provide some fragmentText to the compositor for the blending. Bloom would need to add while ssao would need to modulate etc. The compositor would be the only component that defines tockPostRender so it would run after all the others. It would be the compositors responsibility to output to screen.

There's still one caveat. Some effects need the final composited frame to work on. Fxaa or glitch for instance. For these instead of a postInfo, the child component will provide a function with a signature of postProcess(inRenderTarget, outRenderTarget) and again it will be the compositor who will apply these functions from each child component after he's applied his dynamically generated uber shader for all the components that don't need separate passes for the composition. 

The first of these, separate pass, type of components will get the composited frame as inRenderTarget, a couple of renderTargets will ping pong between them and the last component will get null as it's outRenderTarget so it renders to screen. This will all be orchestrated in the compositor component's tockPostRender() and is reminiscent of the effect composer from three. But overall the design will be much more efficient as most effects will be merged. Just think that with a common setup that includes bloom, ssao, godrays, vignette, and colorize we're saving five full res passes(three for the blendings of intermediate textures and two for the minor effects) compared to effect composer. This is huge gains
 We could have a mechanism like the one I described as standard for post processing in aframe, ie have the compositor built in and child components defined with a registerEffect(). I like the idea that it could instead be implemented on top of the existing component infrastructure though. This would make it easily exchangeable if a better scheme comes up afterwards. I'm always in favor of simple and flexible cores
 @dmarcos @ngokevin is right, the postproc related stuff, addition of a .renderTarget to scene and a switch to render on that instead of the screen are pretty much imposed by the apis provided by three itself. This PR has come to mostly concern with defining the order of execution of behaviors that need to run every frame. I'm leaning towards the, maybe not ultimately flexible, tick/tock mechanism because of the precedent in unity. It seems like a safe choice that's at least better than what is in currently. Of course just because unity did it doesn't mean it is the final answer
 @dmarcos reusing the dependencies property you mentioned makes sense and is attractive as an option. It is not enough as it is though as it ensures that controls will run before position for a single entity only where what we really need is all control behaviors from all entities executing before the first position behavior of any entity. Maybe not for the specific case but you should check unity's LateUpdate() for the rationale behind the need for ordered behavior groups/types. It's all about entity data interchange. 

We could accomplish that by making scene.behaviors a dynamically updating structure. Symbol order would be calculated when symbols are registered and using that behavior groups will be sorted when new symbols appear in addBehavior and be efficient. There may be issues with circular dependencies but those will be logical errors and should be caught anyway. 

For post processing we could use tock() to tap on the post render side, allow systems to tap into it as well and define the compositor as a system to ensure it would run after all post component behaviors. I'd prefer this scheme than having to define numeric priorities, what do you think @ngokevin?
 Following the discussions with @ngokevin @dmarcos @donmccurdy and @fernandojsg :

Enable post processing by extending components with a .tock() method which runs after the scene renders.

A-scene maintains a .renderTarget and switches rendering to that in the presence of at least one tock behavior.

A graph based mechanism is employed to allow for explicitly definable execution ordering for both tick and tock behaviors.

Components can define two way connections in the graph using the properties .precedents and .following, similar to .dependencies.

Sorting to define the execution order takes place only in registerComponent() and batching is done efficiently in a-scene using caches.

The graph based mechanism works fast and comfortable for the developer. Cyclic dependencies in the graph are errors and throw exceptions.

Post processing adapts naturally to the graph and becomes flexible and easy, aided by a-scene's new methods .getBehaviors() and .getPrecedence().

An example utilizing most of the functionality added by this PR can be seen at http://wizgrav.github.io/aframe/examples/test/post-processing/index.html
 While fixing the tests, I found some issues that you should take note of @ngokevin @dmarcos. In a-entity.test.js components are manually cleared with "components[componentName] = undefined". I thought that this was the same as "delete components[componentName]". Apparently it isn't, the keys are still enumerable with an undefined value. I iterate the component keys to do the topological sort and undefined values were not handled. Should I handle these or just fix the tests to use delete instead?
 As the dependencies property was already defining a graph, the concept is not foreign to the framework, it's more of an upgrade and generalization of an existing mechanism. 
 Tidied it up, graphing related functionality is isolated in utils/precedence.js. The most drastic changes are in a-scene, the batching of components, but at least they have been done with potential future generalization in mind. The way the graph sorting is setup already makes it generally applicable. It can be used with systems and could even be used for shaders, geometries and anything that maps names to definitions. Wherever it makes sense it would be trivial to add it. 
 Graphing is generally useful so I took it out into it's own package https://www.npmjs.com/package/precedence-maps and pull it as a dependency. The package also provides ordered stores so the code in a-scene is much cleaner now
 @ngokevin yes I was also thinking about splitting it. The only issue is that the PRs would conflict with each other. They both touch this.behaviors in a-scene.js which is split in tick and tock. We could do the ordering as the first PR for tick() and then do tock(). All the graphing logic now resides in the precedence-maps npm package so we could also do some commentary there. You can also take it under a-frame's umbrella if you want. It bases of toposort which seems like a legit package, so I don't see much worry there.

Should the example for tock be a PR on it's own? 
 it's certainly possible but mind that the example actually depends on the order guarantees. As the bloom component gets added/removed by bloom-toggler it's execution order will change. This means that the compositor component(post-process) which outputs to screen will blend the current scene's frame with the bloom texture from the previous frame. We can probably workaround that by also removing and readding the post-process component in order as well
 Ok I'll start off with a new PR for tock() then
 @cvan the tock() method and the behavior ordering overlap on some parts. Should I merge both in this one? Otherwise I think the tock PR would need to go first @cvan #1564 is rebased and clear for merge  **Description:**

I'm somewhat baffled. `webvr-polyfill` is in the package dependencies, but the VR button in the examples invariably reports `Your browser does not support WebVR. To enter VR, use a VR-compatible browser or a mobile phone.`

Isn't this exactly what the polyfill is supposed to alleviate? I can run the webvr-polyfill samples in the same browser with no trouble.
- A-Frame Version: d969ecb7
- Platform/Device: Google Chrome 50.0.2661.94 (64-bit) (OSX 10.11.4)
 I believe the intent of that polyfill is to make WebVR experiences compatible with normal desktop and laptop computers by allowing mouse and keyboard usage in place of owning a VR headset. A JavaScript polyfill would never be capable of bridging a hardware support gap between the browser and the headset.

To use WebVR with an actual VR headset you'd need to get a compatible browser from here: https://webvr.info/

The examples you see from A-Frame which have that button disabled are actually navigable with a keyboard and mouse due to that polyfill, and that button triggers the hardware VR headset mode in opposition. 
 I'm not familiar with the underlying implementation details, but the [webvr-polyfill](https://github.com/borismus/webvr-polyfill) definitely allows you to use at least a cardboard mount with a mobile device that includes an accelerometer.

Try https://toji.github.io/webvr-samples/03-vr-presentation.html?polyfill=1 on desktop Chrome (stable): you will see "Enter VR" and clicking it will get you the split render you expect to see.
  **Description:**

The way three.js examples (loaders, controls, effects) are currently required with an explicit node_modules path breaks the ability to build aframe from source when aframe is installed as a dependency with npm3 (flat dependency structure). This scenario should be supported given requiring from source instead of prebuilt is sometimes more appropriate (e.g. avoiding duplicate THREE object in prebuilt file if another three dependency exists in the project outside of aframe)

**Changes proposed:**
- Do not provide explicit node_modules path, allowing browserify/webpack/etc to find the appropriate three location
  i got this error when i require aframe using node: referenceError window is not defined any help?
- A-Frame Version:0.2.0
- Platform/Device:windows 7 64
 if aframe is not expected to work on node why the library exist in node package manager?
 so the require directive for Browserify not for nodejs? 
  This is just a fix which worked for me -- but it seems that all `cursor`-related events are now firing without the `cursor-` prefix as of `0.2.x`. For example `cursor-mouseenter` is now working as `mouseenter`.

If this is completely wrong, feel free to close this, but if not, the relevant doc has been updated in this PR.
 Ope, should have opened an issue I guess
 Hi, I've been looking through your showcase and just realized your showcase source doesn't have the latest version. It still has cursor- prefix. 
Thanks for the great library btw.
  **Description:**

Apply JS best practice of for loop by length caching

Will increase performance when attributes or objects are increasing

http://stackoverflow.com/questions/5349425/whats-the-fastest-way-to-loop-through-an-array-in-javascript
 Thanks for the question. More recent result shows normal for loop is better, http://stackoverflow.com/questions/17989270/for-loop-performance-storing-array-length-in-a-variable

At least I learned micro-optimization seems harmful :/
  The docs for declarative-events read as so:

```
<a-entity id="cube" mixin="cube"></a-entity>
<a-entity>
  <a-event name="click" property="material.color" target="#cube" value="red"></a-event>
</a-entity>
```

The code applies this by doing: 

```
if (attributeName.indexOf('.') !== -1) {
  attributeSplit = attributeName.split('.');
  targetEl.setAttribute(attributeSplit[0], attributeSplit[1],
                                   attributeValue);
  continue;
}
```

The issue here is `attributeName` is `property` and `attributeValue` is `material.color`.

There are two possible solutions is either changing the docs to do

```
<a-entity>
  <a-event name="click" "material.color"="red"></a-event>
</a-entity>
```

Or updating the code to look for the property's value and then do an attribute split on it then get the actual value from the value property.

Maybe other approaches are possible as well.  Just was able to adjust the code in both these ways to get it working locally.
  optimize via https://github.com/imagemin/imagemin-app

Most Noticable changes:

examples/anime-UI 1.2MB -> 631.1k
examples/test/physical/milkyway 165.8k -> 55k
  **Changes proposed:**
- set default animation type as 'linear' https://github.com/aframevr/aframe/blob/master/src/constants/animation.js#L15
- update doc accordingly
  **Description:**

doc for a-curvedimage component/default value table is reverted
https://aframe.io/docs/primitives/a-curvedimage.html

And some default values are not correspondent to the real value
https://github.com/aframevr/aframe/blob/master/src/extras/primitives/primitives/a-curvedimage.js

**Changes proposed:**
- reverse the component/default value
- fix default value according to real value
  hello！ I met the same problem， same issues 1021 (https://github.com/aframevr/aframe/issues/1021),
i think, this is not a limitation of iOS,i find a example that can play, but, Internal testing products，so i can't public sorry! I try to modify aframe texture, use THREE.Texture, end up in faliure! Can be modified？ thanks！
 This issue has been resolved，thanks！ 
 @liuxiaoyue did you find a solution? Can you share it
 Seems like this issue has been resoved (or worked around) in other contexts: 
- For [THREE](https://github.com/mrdoob/three.js/issues/9754#issuecomment-268186791)
- For [GoogleVr](https://github.com/googlevr/vrview/pull/105)

I couldn't figure out yet how to build the required custom material to handle such a video format in a-frame, but I think the hard work has been done already. so how does one know when bgra fix is required?  

wondering whether it makes more sense to enable detection and remediation in core/default shaders (so if similar problem arises for different elements, can set bgra property or similar) Seems like there are actually 2 problems:
- FlipY  on OSX and iOS (fixed by `vUV = vec2( uv.x, 1.0 - uv.y );`),
- Channel R and B mixed on iOS (fixed by `gl_FragColor = texture2D( texture, vUV  ).bgra;`) [issue comment here](https://github.com/mrdoob/three.js/issues/9754#issuecomment-266309206) are you sure? `FlipY disabling in my tests was required for MacOs Safari 10 also.`
https://github.com/mrdoob/three.js/issues/9754#issuecomment-273515995 (need to understand also if this is just for video, or also for image, canvas, etc.) Anyone have any insights as to how to go about turning the workaround proposed at https://github.com/mrdoob/three.js/issues/9754#issuecomment-268186791 into an A-Frame material? This is an issue affecting a project I'm hoping to use A-Frame on, but I'm a bit stuck on how to implement a fix for this. Looking at this some more, I also wonder if it should be patched in core as @machenmusik suggests.

Following the lead of VR View (see googlevr/vrview/pull/105), the `loadVideo` method of the `material` system could set the necessary texture properties required for the fix. Borrowed code from VR View:

```javascript
if (Util.isSafari() && videoType === VideoType.HLS) {
  // fix black screen issue on safari
  videoTexture.format = THREE.RGBAFormat;
  videoTexture.flipY = false;
} else {
  videoTexture.format = THREE.RGBFormat;
}
```

I suppose then each of the core shaders would then need to implement the same logic as VR View, i.e. choosing between `THREE.MeshBasicMaterial` and `THREE.ShaderMaterial`, depending on whether or not the texture source is an HLS video playing on Safari. Borrowed code from VR View:

```javascript
if (texture.format === THREE.RGBAFormat && texture.flipY === false) {
  material = new THREE.ShaderMaterial({
    uniforms: {
      texture: { value: texture }
    },
    vertexShader: [
      "varying vec2 vUV;",
      "void main() {",
      "	vUV = vec2( uv.x, 1.0 - uv.y );",
      "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );",
      "}"
    ].join("\n"),
    fragmentShader: [
      "uniform sampler2D texture;",
      "varying vec2 vUV;",
      "void main() {",
      " gl_FragColor = texture2D( texture, vUV  )" + (Util.isIOS() ? ".bgra" : "") + ";",
      "}"
    ].join("\n")
  });
} else {
  material = new THREE.MeshBasicMaterial({ map: texture });
}
```

_or_, perhaps there should be a new core `video-material` shader that is recommended especially for use with videos that implements this logic?

Does that make sense, @dmarcos? I couldn't work out how to fix this with just a custom shader material (using `registerShader` in my app), as the `ShaderMaterial` fix needs to have access to the video texture that the `material` system has loaded. had anyone confirmed that only video on iOS (and HLS video, not MP4 video) suffers from the defect?  there is not just one shader appropriate for all video, and if other significant BGRA sources exist it may be worth adding BGRA support directly to core shaders, controlled by bgra boolean property for example @machenmusik I've certainly only experienced this issue with HLS on iOS, MP4 video worked perfectly for me, as does MPEG-DASH via Shaka Player on other platforms. Sadly, HLS is the only adaptive bitrate solution you can use on iOS.

@dmarcos I think you and I are talking about the same thing -- a core shader in A-Frame to handle video textures. @dmarcos i think the question is, when it is too late to change the texture format? @robinnorth there is not just one shader appropriate for all video really, although you may only be using one, they would all need the change OK, I've been able to get a custom video shader to display HLS video correctly on iOS and macOS Safari after patching the `loadVideo` method of the `material` system in A-Frame core to set
```
texture.flipY = false;
texture.format = THREE.RGBAFormat;
```
when in Safari.

Here's my custom shader code (based on the `flat` core shader):

```javascript
AFRAME.registerShader( 'video-shader', {
    schema: {
        color: { type: 'color' },
        fog: { default: true },
        height: { default: 256 },
        offset: { type: 'vec2', default: { x: 0, y: 0 } },
        repeat: { type: 'vec2', default: { x: 1, y: 1 } },
        src: { type: 'map' },
        width: { default: 512 },
        wireframe: { default: false },
        wireframeLinewidth: { default: 2 }
    },

    /**
     * Initializes the shader.
     * Adds a reference from the scene to this entity as the camera.
     */
    init: function( data ) {
        if ( IS_SAFARI ) {
            this.material = new THREE.ShaderMaterial( {
                uniforms: {
                    texture: { type: 't', value: this.map }
                },
                vertexShader: [
                    'varying vec2 vUV;',
                    'void main() {',
                    '	vUV = vec2( uv.x, 1.0 - uv.y );',
                    '	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',
                    '}'
                ].join( '\n' ),
                fragmentShader: [
                    'uniform sampler2D texture;',
                    'varying vec2 vUV;',
                    'void main() {',
                    '	gl_FragColor = texture2D( texture, vUV  )' + (IS_IOS ? '.bgra' : '') + ';',
                    '}'
                ].join( '\n' )
            } );
        } else {
            this.material = new THREE.MeshBasicMaterial( getMaterialData( data ) );
        }
        utils.material.updateMap( this, data );
    },

    update: function( data ) {
        this.updateMaterial( data );
        utils.material.updateMap( this, data );
    },

    /**
     * Updating existing material.
     *
     * @param {object} data - Material component data.
     */
    updateMaterial: function( data ) {
        var material = this.material;
        data = getMaterialData( data );
        Object.keys( data ).forEach( function( key ) {
            material[key] = data[key];
        } );
        material.uniforms = {
            texture: { type: 't', value: material.map }
        };
    }
} );

/**
 * Builds and normalize material data, normalizing stuff along the way.
 *
 * @param {object} data - Material data.
 * @returns {object} data - Processed material data.
 */
function getMaterialData( data ) {
    return {
        fog: data.fog,
        color: new THREE.Color( data.color ),
        wireframe: data.wireframe,
        wireframeLinewidth: data.wireframeLinewidth
    };
}
```

I haven't been able to figure out how to do this without patching core though, as `flipY` really needs to be `false` before any video textures are loaded, due to this WebKit bug: https://bugs.webkit.org/show_bug.cgi?id=163866 > patching the loadVideo method of the material system in A-Frame core to set `...` when in Safari.

@robinnorth those workarounds should only be applied when you are playing native HLS video though, right?  otherwise you break MP4 etc. ? @machenmusik yes, you are correct. It's only HLS video that suffers from the bug in Safari. VR View handles this by checking the file extension of the video source to see if it's `m3u8` and thus HLS (see my [earlier comment](aframevr/aframe/issues/1416#issuecomment-290424762) that summarises their implementation). more generally speaking it is not safe to bake the behavior into the shader without parameters, since an app may legally switch between playing MP4 and HLS - also, that check should probably also look for mimetypes since not all HLS streams use .m3u8 suffix another thought - do you need to flip Y in shader, can you invert Y scale of playback surface?  the bgra accommodation is the thing that absolutely needs shader changes This shader could be modified to check the source of the video texture applied whenever it changes (in the shader's `update` method) and then set the vertex and fragment shaders according to whether or not the HLS fix is required.

I suppose you could invert the Y scale of the playback surface (and then invert the face that the texture is rendered on), but in both the Three.js and VR View  examples, they've just flipped Y in the shader. Any progress on this, or a workable workaround? I have to put out a major project on Friday that was originally going to use an a-videosphere with HLS on iOS. I have the advantage of knowing that it won't switch to MP4 in this implementation. Any ideas? I believe there is a workaround described in a previous comment.  I don't think anyone has submitted a PR for the necessary core changes yet, so you may need to use a forked version in the interim. I've tried the shader listed above. It's not working for me. I've already patched the core. With my new patched core, If I use 'flat' shader on my videosphere, the video plays on iOS, but upside down and weirdly colored. So the core appears to be patched correctly. Now, the shader's job is to unflip it and color it correctly, if I understand. But if I use this shader, I get blank screen in both ios and desktop safari. So there must be some issue with the shader. @quickhand In the short term, you need to define `IS_SAFARI` and `IS_IOS` to be able to use my example shader code (they're constants that get defined elsewhere in my app):

```javascript
const IS_IOS = /iP(hone|ad|od)/i.test( navigator.userAgent ),
    IS_SAFARI = /^((?!chrome|android).)*safari/i.test( navigator.userAgent );
```

In the longer term, if a PR is welcome for the core changes required for `loadVideo` (cc @machenmusik, @dmarcos), I can submit one, as I'll need this fix for my project too.   @robinnorth I had already defined the constants, so it's not that. Still nothing appears. It's baffling. No errors in the console, and  I don't even know how to go about debugging it. I'm getting desperate, as my project has to launch tomorrow :-/ Thanks for your help, and let me know if you have any ideas how to approach this. @quickhand can you put together a JSFiddle test case? Also, I've just looked back at my prototype and realised I'm using just a plain `a-sphere` for some reason. My usage is (I'm using aframe-react):

```jsx
<Entity
    primitive="a-sphere"
    geometry={{ radius: 5000 }}
    material={{ src: '#video', shader: 'video-shader' }}
    scale="1 1 -1"
    rotation="0 90 0"
/>
```

It's also worth making sure you've defined `utils = AFRAME.utils` before the shader definition, and also that the shader is defined before you try and use it. Yes, I had defined utils = AFRAME.utils as well. And I am also using a plain a-sphere. Also using aframe-react :)

As I said, release is tomorrow, and two days later I leave my job, and the country. So I won't be able to mock up a test case for a while. Thanks for all the help, but I had to give up and switch to .mp4 on iOS. Amusingly, I'm now using HLS on everything except Apple systems. I chose HLS over MPEG-DASH because of the lack of Apple support (and used hls.js to add support to non-apple browsers). So much for that! Safari is the bane of my existence. @robinnorth: A JSFiddle would really help to know how you are putting together the custom video-shader.  I have the same issue. HLS on safari and mobile renders black screen for the video though the audio works. Appreciate your help. Nice work, @machenmusik. Really happy to see this make it into core! I think this can be closed now, as iOS 9 support doesn't seem possible  **Description:**
## **Changes proposed:**
## 
## 

Remove repeat text
  I'm a Dvorak user who is annoyed by having to switch modes every time I want to test out something with the WASD controls. I'm wondering if there has been any thought put into alternative keyboard layouts? I was thinking about making a PR for a new `dvorak-controls` component, but ultimately it'd just get used in development since the vast majority of production users will use QWERTY. I also had the idea of changing the `wasd-controls` component to something more general (`keyboard-controls`?), which could potentially allow the user to swap between WASD and Dvorak modes, maybe with some (optional) small text in the lower left that would appear on hover?

I'm willing to work towards a PR for this, I just wanted to open the issue to see if anybody else had any ideas, or if anyone has pursued this line of thinking as of yet.
 Hi! Dvorak user here as well. :) I think this will be fixed in #1248. It's a larger PR but the relevant part is that using the newer KeyboardEvent.code API lets us map hotkeys by _locations_, without considering keyboard layout. This works better for ZQSD layouts as well. 

(only applies in browsers that support KeybardEvent.code, though - otherwise there's no good way to support both modes simultaneously)
 Excellent! Thanks @donmccurdy!
  **Description:**

Every second time I refresh the page, the textures do not load. I get this error message in the console - but I'm not sure it's related.

<img width="867" alt="screen shot 2016-04-24 at 2 31 19 pm" src="https://cloud.githubusercontent.com/assets/17499/14770556/54ba3c58-0a29-11e6-8b51-0ea84dbff094.png">
<img width="611" alt="screen shot 2016-04-24 at 2 31 49 pm" src="https://cloud.githubusercontent.com/assets/17499/14770557/54ba9824-0a29-11e6-965c-9e0518f5a884.png">
- A-Frame Version: 0.2.0
- Platform/Device: Chrome
 It loads perfectly every time in firefox, so maybe just a chrome bug?
 It's only happening in my editor but I'll try make a minimal repro step, or just show you it running.
 This seems to be a [three.js issue](https://github.com/mrdoob/three.js/issues/8666).
  **Description:**
Control a texture's position (offset) and wrap. My use case was that I wanted to put a transparent texture on a sphere at a specific scale and location. To do this the ThreeJS way, it meant using repeat for scaling down the texture, an alternate form of wrapping so that the texture doesn't actually repeat, and the offset for controlling where the texture goes.

**Changes proposed:**
- Expose "offset" as material property as a space separated list of length 2 (default "0 0")
- Expose wrap as material property as a space separated list of length 2. Values are strings and are can be valid ThreeJS wrapping keys. For less verboseness on the user's end, "RepeatWrapping" and "ClampToEdgeWrapping" is not valid, but "Repeat" and "ClampToEdge" is (the code adds "Wrapping" automatically).
- If wrapping is not set (there is no default), and repeat is used, there is no change to AFrame behavior. Wrapping won't be set unless using repeat - and if repeat is used RepeatWrapping is also used
- If wrapping IS set, the new user defined wrapping will be used regardless of if repeat is utilized or not
 No worries! I'm really just learning AFrame, and this was one of the first things I tried to do, saw it wasn't possible and dug in. I wasn't thrilled with the way I did it cause I'd forsee more and more props being stuffed in here, so I'm glad its being rethought.
  **Description:** Aside from adding a missing "to", I have slightly rephrased a sentence in the concept section.

**Changes proposed:**
- Add missing "to"
- Rephrase: 

From: "These components would be able to be mixed and matched and even be used with other vehicles..."

To: "These components could be mixed and matched and even used with other vehicles"
  I see this when using the `obj-model` component. The `intersection.object` returned by the `raycaster` doesn't have an associated `el` inside even though it's being set `onload` inside [`obj-model`](https://github.com/aframevr/aframe/blob/master/src/components/obj-model.js#L50) through the [`setObject3D`](https://github.com/aframevr/aframe/blob/58bbdaf05bfe4d3564a4e8ec85c6806e6197bf25/src/core/a-entity.js#L40) method.

However, upon closer inspection, it seems that `el` is only being set in the `THREE.Group` wrapping the loaded object. Whereas the `raycaster` is only concerned with returning the `Mesh` inside that group which is missing an `el`.

~~Maybe this can be solved inside the `obj-model` component, and others like it, by removing the `Group` wrapper. I'll investigate further.~~

Actually, considering multiple objects contained within a file, `setObject3D` would need to traverse the children inside that returned `Group` and add an `el` to each instead. 
  **Description:** Fixed 2 typos in index.md

**Changes proposed:**

1) change a-cube to a-box

2) add a missing "to"
  if you do a `<a-animation begin="200" dur="1000" repeate="indefinite">` then the repeated will also stagger its delay by 200 milliseconds making it impossible to stagger a animation through a group.

Suggested that an animation should ignore the delay after the first run on the animation if it is set to repeat the animation.
 This makes me wonder whether there should be a separate `delay` instead of overloading `begin`, as well.
  **Description:**
- This change fixes the malformed html in [the online docs](https://aframe.io/docs/components/geometry.html#Defining-Your-Own-Geometry). It also fixes the footnote hyperlinks, which weren't displayed properly before.

**Changes proposed:**
- Add backticks to close the unclosed code block.
    **Description:**

I use a shield tv to view a-frame sites and it works well, except the viewport is pointed down at the ground, I assume because the orientation API returns a vector pointing straight down. It'd be good to categorize android tv devices as not mobile. Possibly this is a webvr-polyfill bug?
- A-Frame Version: 2.0.0
- Platform/Device: [Shield Android TV](http://www.webapps-online.com/online-tools/user-agent-strings/dv/brand728783/nvidia-shield-android-tv)
 Also, I think iPads and Android Tablets shouldn't be reported as mobile. Either that, or have the option to change away from VR display? Maybe click and hold the cardboard icon to show a little menu that flicks to thumbpad navigation on a scene?
 Makes sense. I'll create the PR. Is #975 the best place to discuss control refactoring (adding thumbpads)?
  **Running a MozVR example (ie. https://mozvr.github.io/panorama-viewer/) is much slower than running a native oculus app with the same functionality on the same device. The result is heavy lagging and motion sickness.**

Note: I am currently testing to pinpoint the reason and will respond here if I find it.
- A-Frame Version: Unknown. The version running the mentioned example in april 2016.
- Platform/Device: Chrome for Android / Samsung Galaxy S6.
 I am not so sure about that.
I tried today the twgl library and that has no issue with lag on the same device, browser.

I tried this link: 
http://pano-dev.autodesk.com/pano.html?url=jpgs/ecead6d6-ef44-450c-ad9b-229bad61c0ad

It works very responsively.
  I believe the second case is about being able to randomize multiple properties in one invocation. Could parenting accomplish this ?

```
<a-entity random="property: material.color; min: 0 0 0; max: 1 0 0">
  <a-entity random="property: material.roughness; min: 0; max: 1">
    <a-entity  random="property: geometry.primitive; oneOf: box circle sphere"></a-entity>
  </a-entity>
</a-entity>
```

Would this also work for the first case ?
 @ngokevin: Does this not work on rotation or position ? https://aframe.io/docs/guide/building-a-basic-scene.html#Interacting-with-the-Box
Hm, I thought children get their components from parents.
Could the component itself check if and what its parent entity randomizes and then add this to a list of randomized properties ?
 I guess it is not ECS. There must be a recognized way then how ECS addresses this issue. Time to read.
Perhaps worth pointing out in the docs that parent-child only applies to rotation, position, scale(?), eg. that spatial transformations are an exception which take into account hierarchy.
  **Description:**

The energy impact on my laptop when accessing a website that uses A-Frame is enormous. Both CPU and Graphics are being cooled to the max. Check included screenshots for details.

This counts for Firefor Nightly but also for other browsers.

Any idea what can cause this?

Cheers,
Martin

<img width="1655" alt="screen shot 2016-04-19 at 20 44 49" src="https://cloud.githubusercontent.com/assets/11924339/14651364/f4d9bbea-066f-11e6-9618-da457dc21d69.png">
<img width="1489" alt="screen shot 2016-04-19 at 20 45 47" src="https://cloud.githubusercontent.com/assets/11924339/14651365/f4dfa5dc-066f-11e6-9e75-f7dd7eee75e5.png">
- A-Frame Version:
- Platform/Device: MacBook Pro 2014, 16GB, Core i7, Intel Iris Pro 1536
 Yes same result. Is this expected behavior, inherent to WebGL? Or is it my config that need resetting?

I also have this when opening vizor.io
  Interested in getting your thoughts on this. I have a relatively simple use case for `<a-grid/>` that doesn't quite work because of the mapping order.

**Use case:**

``` javascript
/**
 * Flat grid.
 */
module.exports = {
  defaultAttributes: {
    geometry: {
      primitive: 'plane',
      width: 75,
      height: 75
    },
    rotation: {x: -90, y: 0, z: 0},
    material: {
      src: 'url(../../assets/grid.png)',
      repeat: '75 75'
    }
  },
  mappings: {
    width: 'geometry.width',
    depth: 'geometry.depth',
    src: 'material.src'
  }
};
```

You can't actually adjust the size of the grid above, because `width` really needs to map to **both** `geometry.width` and `material.repeat.x`, and the same for `depth`. I see two ways to fix this:

**Idea 1: Array Mapping Targets**

``` javascript
  mappings: {
    width: ['geometry.width', 'material.repeat.x'],
    depth: ['geometry.depth', 'material.repeat.y']
    src: 'material.src'
  }
```

**Idea 2: Invert Mappings**

``` javascript
  mappings: {
    'geometry.width': 'width',
    'material.repeat.x': 'width',
    'geometry.depth': 'depth',
    'material.repeat.y': 'depth',
    src: 'material.src'
  }
```

Anyway this is sort of a broken example (`repeat.x` / `repeat.y` don't even work, it needs to be `"75 75"` as a string, but inverting the mappings might also open up more interesting possibilities down the road:

``` javascript
mappings: {
  'geometry.width': 'width',
  'geometry.depth': 'depth'
  'material.repeat': function (data) {
    return (data.width / data.density) + ' ' + (data.depth / data.density);
  }
}
```
  Since I am using the template component, I was following this. Let me just add that I agree that it makes sense to have no third party dependencies (other than three.js) such as templating engines in the "core" or "extras". But let me also add that it can only be beneficial to a-frame as a concept to keep an as open as possible mind about what it is about. Its strength is extensibility. Some people may want to use it for performance conscious web games, some for data visualization, some or many for quick to code VR experiences, some purely declaratively, some mostly imperatively or with an important procedural component. So the core message is already pointing to "all of the above", at least in my small mind, and that is a positive. I think a-frame is doing a good job at that as well.
What I feel should be part of the core is support of a higher than asset level of reuse, probably just reuse of what is referred to as snippets.
 Glad to see that there was a deep exploration of where the boundaries ought to be at #930 . In the end, components may be just bundled with other components and/or with core based mostly on popularity. So it makes sense to me to keep core rather pure.
  I want to add my project out-source video without CDN. Is that possible? If yes, how?
- A-Frame Version: 
- Platform/Device:
 You need to host your HTML5 video in MP4 for example and the server should support CORS
 I can add youtube video in my project, I hear video's sound but I dont see video.

My project : http://vrdizifilmizle.com/vr2/ 
 I think I understand finally. Thaks your answer. @dmarcos so you think, Is it possible in the future ?
 one last question, if I want to solve this problem by using CDN.. Can I use uploadcare alternatives? Ex.  like skyparkcdn.com or softlayer.com . 
 Thank for your answers @dmarcos.  
 I solved the  problem with CDN. Thank you to everyone who helped guys.  Especially thank @drawvr and @dmarcos  for help. 
  **Description:**

It would be useful to integrate with OpenCV.  Has anyone attempted to do this? 
- A-Frame Version:
- Platform/Device:
  **Description:**

I've started doing some of the coding for AR mode (I just need to add button functionality).  What would be the best way to adapt this? 

loving1.github.io/webvr-polyfill/examples/basic/ 
- A-Frame Version:
- Platform/Device: Lumenora, A/VR Platform
  i believe https://github.com/aframevr/aframe/pull/2129 fixes regression in master by doing this for `video` elements (bug introduced when thia was redone for `canvas`) - are we saying this should also be done for `img` elements here?  Hi!  Where can I follow the progress of this integration?  Thanks - Jordan  **Description:**
-Naming update for WebVR 1.0 spec.

**Changes proposed:**
-Add check for new API method name for device querying.
 I needed this to get working in GearVR browser with 1.0 API. But saw https://github.com/aframevr/aframe/pull/1132 so don't know if have plans for adding 1.0 support in a different fashion.
  I found the same issue, thought it was an inspector problem:
https://github.com/aframevr/aframe-inspector/issues/462  **Description:**
- A-Frame Version: 0.2.0-rc1
- Platform/Device: FF 38.7

Working on a thick line component using THREE.Meshline at http://codepen.io/anon/pen/MyQrdK I would like to use the dimensions of the current scene canvas within the update function.
However, the canvas does yet not exist when update() is called first.
@donmccurdy on slack came up with a functional workaround using the "loaded" scene event which we used here:
http://codepen.io/anon/pen/vGdwoq
I also tried to register the component only after the scene "loaded" event is fired but then the registered component was not retroactively applied to entities with the new component even after a scene.reload. Here is a page where I commented out things which were not working:
http://andreasplesch.github.io/aframe-pages/test/meshline/

Is there a way to trigger the update() function globally across the scene ? 
Would it be possible for aframe to call init() and update() the first time only after a canvas is created ?
 Thanks, this should be helpful.

I was sort of looking towards not to have to use event listeners.

Is there a way to trigger a component's update() function globally across the scene ?
Would it be possible for aframe to call components' init() and update() the first time only after a canvas is created ?
 Here is a way to force an update of all components of a selection of entities:

```
var all_meshlines = document.querySelectorAll('a-entity[meshline]'); // choose selector
[...all_meshlines].forEach(function(entity){

  entity.updateComponents();

});
```
 It took me a while to find the updateComponents() method. Should it be documented ?
 My use case was that the components uses canvas.width in its update . So I want to update when the canvas becomes available or when there is a change in size using events outside of the component.
 Is there an example ?
 Thanks. Will take me a while to understand what is happening there. Why consider updateComponents() not public ?
 It does make sense to keep all in the component, and thanks to the example I see how to use events there, with bind.
  This came up as part of my Controls refactor, thought I'd make a separate PR out of it.

Fixes #986.
  Interesting do you think this is related to #1334?
  I looked into this some. It seems that Three.js r75 changed VREffect.js's render function to check that full screen mode is enabled before it will render in stereo mode. As a result Android is fine, because it supports the Full Screen API, but Safari can only render in mono because [it does not.](http://caniuse.com/#search=fullscreen)

A change will need to made made to VREffect.js in order to fix this.
 Great! Good to know he's got a fix for it.
  **Description:**
When elevation is near 10000 units, a blank rectangle hide scene objects.

To reproduce the bug, go back (down arrow) just a little bit with that example: http://codepen.io/anon/pen/zqpxEN?editors=1011
- A-Frame Version: latest
- Platform/Device: LMDE 2 (Betsy)
 Is this a depth buffer problem? If yes, this should be a good hint for a fix: http://threejs.org/examples/webgl_camera_logarithmicdepthbuffer.html
  https://github.com/aframevr/aframe/blob/57fc8cbfcd845b2aed547092b321c1f98145193f/src/utils/index.js#L116

To get it working I had this function return false.

Given more mobile devices may have webvr browsers in the future, this function may need renaming.
 Yes, we have an A/VR headset that has mobile on it already and are not able to use the head tracking. It's not cell phone based which also causes a problem. Any advice on being able to have the browser recognize our device as unique would be helpful and to also connect to the head tracker. 
 This appears to still be an issue with the samsung internet vr browser (it works fine with the oculus browser), it is set to mobile mode when it shouldn't be Looks like the isGearVR function isn't being used inside isMobile check anymore [here](https://github.com/aframevr/aframe/blob/739427d84099dd0d92b83dcdf878f032cc7fe81b/src/utils/device.js#L38). The [Gear VR User Agent String](http://developer.samsung.com/technical-doc/view.do?v=T000000203) should still match that regex so that doesn't seem to be the issue. I don't have time to test it right now, but I'd add an if statement under line 47 that sets _isMobile to false if isGearVR is true @Marchhill   @ngokevin I'm interesting in taking this on but I'm not sure what you mean by tick. https://github.com/aframevr/aframe/blob/master/docs/core/component.md 

tick | Called on each render loop or tick of the scene. Used for continuous changes or checks.



 (when I tried this a long time ago, there was no perceptible change in performance, so I didn't do a PR -- but things may have changed since then)  Thoughts on adding a `three-model` loader for the THREE.js JSON format? It's not as bleeding-edge as glTF (and I'd love to see that get traction) but since THREE.JSONLoader and THREE.ObjectLoader are bundled with THREE.js by default, it wouldn't add much cruft.

[Work In Progress](https://github.com/donmccurdy/aframe-extras/blob/master/src/loaders/three-model.js)

The format also [supports animation](https://sandbox.donmccurdy.com/vr/animation/), although I don't completely understand THREE.js's new animation system.
 Oh cool. Can't find it but nbd, I want to try loading some of the 3 Dreams of Black examples. They might be an older format though, they show up but no animation for me.
 @donmccurdy As per gltf getting traction, someone has created a gltf component: https://github.com/xirvr/aframe-gltf

https://github.com/aframevr/aframe/pull/1469
  **Description:**
  On Current master branch previously working animation examples no longer behave as expected.
- A-Frame Version:  Master
- Platform/Device:  All

Evidence:
1. Checkout Master
2. `npm run dev`
3. Visit animation unfold example.

Expected: Each plane should individually animate delayed from each other.
Seen: The next two planes to animate appear to be 'attached' and share rotation values until the next one is kicked off.

Maybe this behavior is now expected with the updates to primitives and the example code should be updated?
 Aframe-logo animation: the flat plane connecting the Slants in the A is no longer positioned appropriately as well.
  **Description:**
  Adds a method to an entity to understand both 'attribute' and 'attribute.property' and returns the     appropriate value in either case.
**Changes proposed:**
-  Remove special casing of circumstances from animation.js
-  Adds native method to element to understand this syntax.
 @ngokevin I opted to add the functionality to the element to understand the component attribute rather than write more special cases into animation. If you would prefer a different approach please let me know. This is in reference to #1334 
 Hold off on this... even though all the tests work there are visual regressions in the system.  Found when going to some examples will dig deeper.  A bit strange that all animation tests work when the actual components themselves don't.
 Hmm the visual regression occurred upstream and not from this PR I will open a new issue.
 Absolutely.  The rest of the refactors are addressed other than changing to the function to get with dot notation because it supports both and that name might be misleading?
 Sounds good. 
 @ngokevin yea I wanted to see why the last refactor didn't pass the integration test even though it did local before I added another test case.  Not sure if this was due to github having issues still so wanted to push the doc refactor first and ensure tests were fine before adding another.

Hmm same issue again, but not occuring on local.
 @dmarcos sorry didn't get around to trying last night.  I had tried to download a different version of firefox so I could get it to fail on my local, but I never got it to.  Had to wrap up some other stuff on a project today will be revisiting this again in a few hours and figure it out.  As I will need to use an entity generator to get a component to exist on the test.

Is it passing on all tests locally for you as well then failing on travis?
 @dmarcos Sorry with all the stuff going on and catching up with work I just haven't had the time to address this.  I can close it and re-open after I finish the feature/animateColor PR.  Or someone can pick up where I left off here.  I know its probably bugging you to have lingering PRs. 
 @dmarcos I applied the upstream changes here.

This build seems to be failing due to docker not installing from NPM properly.  This is a problem with NPM itself and not this branch.  https://github.com/npm/npm/issues/9418#issuecomment-170244027

The problem seems to be intermittent waiting to see if this shows up somewhere else.  Or just this branch I could try closing and opening a new PR.  Waiting to see what ya'lls suggestions are.
 Cool those adjustments seem solid tests are still good.  Ping me if anything else gonna step off for a bit for dinner ect.
  +1. If we identify the most common issues, we could even write a drag-and-drop MTL validator perhaps. Or, really less validation than just warning about things THREE.MTLLoader doesn't support.
 I want to help.
 - check path (e.g. relative vs absolute)  @ngokevin 
I can do this now if you want. I don't want to break anything in progress, though.
  **Description:**

I tried out aframe on a macbook 12", it rendered at about 10-15fps. Would it be worth testing `window.devicePixelRatio > 1` and setting the canvas resolution to half the screen resoltuion, so that it only renders at half the resolution, then upsamples? It should get us banging against 60fps again, with some degradation in quality.

Ideally this would be autodetected, so that if you have retina + a strong GPU, it doesn't downsample.
 I did some experimentation, and calling `renderer.setSize`, you can dynamically downsample the scene. In a similair way to how valve are reducing the render resolution to make sure you stay at 90fps, you could do the same with aframe. People are used to netflix dynamically reducing the resolution when the network is congested, hopefully they would see adaptive downsampling the same way in aframe.
 No progress on this yet I guess? Even a manual option would be great to have. Even for non-VR use. 

Example scenario: laptop attached to a 4K monitor.
 This seems to be one way to achieve this, and if you go to extremes you even have an artistic effect. :-)
https://jsfiddle.net/dirkk0/0fdzqcsk/
 progress on this ? I'm developing on a 2016 Retina MBP for Smartphone/Daydream VR devices. Of course you want to preview your progress on the MBP screen but when I do so the MBP is constantly stressed out to render the scene (literally melting) and I still just get low fps. My current workaround is to use a 72dpi external monitor which normalizes the situation so I think its ok for me for now. The only problem is that the MBP loses its mobility but yeah somehow more of a luxury problem at the moment I guess.  **Description:**

`<a-scene fog="color: #fff"><a-sky material="fog: false" rotation='0 -45 0' src='https://www.scenevr.com/prerelease/images/sky.png'></a-sky></a-scene>`

The sky isn't rendered, you just see the fog color instead.
- A-Frame Version: 2.0.0
- Platform/Device: Chrome
  **Description:**
This attempts to fix #1289 by keeping track of whether a canvas element was provided, and if so don't override it's width and height styles during resize.

**Changes proposed:**
- adds a boolean to the canvas element that the scene will check for in the resize function.

I've made a new example including these changes in a aframe.min.js dist (ran `npm run dist` on my branch) which shows it seems to work:
http://blockbuilder.org/enjalot/dfb4b1220ba76b63b8fa2ed2c5d517c3
 @cvan @ngokevin i've updated the code to use data attributes, is this what you had in mind?
 I've also created a boilerplate-canvas demo which is a simple adaptation of the boilerplate-helloworld demoing a user provided canvas. would you like me to include that?
 btw I left the canvas element outside of the scene (with a comment) because to me that's one of the main motivations of this feature. I want to be able to declare my scene decoupled from where it's laid out in the page.
 @cvan i think i've addressed all the concerns. let me know what else i can do
 woot!
  Homepage URL for package.json.
  **Add homepage URL to package.json file**
 Sure!
  **Description:**
  Reduces the number of default vertices used in the a-sky component. In reference to issue #1310 
**Changes proposed:**
-  Reduce the radius 
-  Reduce the heightSegments for equatorial projection distortion reduction.
  small typo, although it tripped me up trying to read it
  How are we testing performance gains here? Just against the performance-test scene? Be interesting to get some before / after metrics. Also - please make sure the flag can be turned on, because the editor needs it. ;)
  This is also a good opportunity to reduce the number of faces and vertices by reducing the number of height segments.  The lower the number of height segments the less distortion you get on an equatorial projected image as the src attribute.

64 Height segments: 
<img width="725" alt="screen shot 2016-03-31 at 12 26 42 am" src="https://cloud.githubusercontent.com/assets/11075982/14166243/5e2975de-f6d7-11e5-8c91-249ada2ee9cf.png">

10 Height segments:
<img width="593" alt="screen shot 2016-03-31 at 12 24 34 am" src="https://cloud.githubusercontent.com/assets/11075982/14166251/7109e198-f6d7-11e5-96d7-1a12fdeb3954.png">
  **Description:**
  Adds the support for using `a-animation` components in order to animate colors. #733
**Changes proposed:**
-  Adds the detection of a color as an attribute
-  Adds a partialSetAttribute for color
-  Adds a conversion from rgb object to hex (maybe these belong in utils?)
-  Adds two unit tests for start and finish to ensure the color is properly tweened

…nent
 I think all feedback is resolved and I went through a refactor phase.  It should be ready to squash the commits if everything else is approved.
 @ngokevin @dmarcos Updated with a new approach to support both `color` and `material.color`.  I feel better about this approach.  Will add in some unit tests to ensure no regressions are introduced around the 'material.color' property.
 Updated with refactors as suggested and added the red to blue test case.  Should probably go through another refactor phase and then add an example and update the docs?

Will probably update a bit more tomorrow.
 Excellent did we want to update the docs in animation.md to explain color animation support with a short snippet?
 I am guessing a `test-animations-color` is different from an animation example?  It looks like `test` example namespace folders are all ones that provide stats and seem to be attempting to put some burden on the system?
 Sounds good I'll follow the examples of the other test-examples and put some color on it.  I had been playing around with some pulse animations that domino event emissions. Just to see if too many animations on color would cause a problem.  Never really saw an issue, but I didn't add stats to the scene. 

![out](https://cloud.githubusercontent.com/assets/11075982/14265910/f15a7f64-fa89-11e5-9645-b33898705637.gif)

The gif animator messed up feeling of smoothness lol but it ran smooth before turning to a gif xD
 @ngokevin Sorry about the delay I got really sick last week.  I added the readme entry and a test-animate-color.  Once this is ready I can add the test we talked about to the other PR that ensures a from color is correctly retrieved when animating a color and the from is not defined in the a-animation.
 @dmarcos yea I just need to alter @ngokevin suggestions.  I'm digging into now.  Not sure if you guys seen the news but weather has been pretty crazy in Houston the last few days.  I'll be pushing an update up shortly.
 @dmarcos We all do here too haha.

@ngokevin I adjusted the requested changes.  The only thing that may be missing I can think of now is a link to the example on the index page that is on localhost:9000 when you start the server.  I'm guessing I should probably add this yes?
 @ngokevin alright I updated the demo to a little more fancy of a demo.  I also opened an issue because you can't use begin delays to stagger because they calculate the begin delay on a repeat meaning the "stagger" animation eventually gets out of sync.  

This can be updated to remove the intervals once the bug is fixed there.
 Cool once you give it one more look over and are ready let me know and I'll squash the commits
 @ngokevin adjusted to mixins, new file structure and stats attribute.
  **Description:**
In video sphere there is no button to change back from VR mode to normal mode. You can only change from normal 360 videos to VR but not the other way around.
- A-Frame Version: v0.20
- Platform/Device: iOS and Android
 How can I add another back button to go back to other screen then if the back button is for switching between normal and vr mode?
  **Description:**
The video sphere doesn't have settings for lens Distortion for google cardboard v1/v2 etc.
- A-Frame Version: v0.20
- Platform/Device: iOS and Android
 Any luck on this? Can we use the WebVRConfig json to add more buffer and add more referesh rate? the video is a bit slow, does it support stereoscopic spherical videos? 
 @cvan May I ask what's the setting to enable distortion?
 I am looking for this as well!
 This is concerning the ability to scan the QR code to set the proper focal distance? That's what I'm looking for if that's available.
 @cvan Hi Chris, am I right in reading that the latest WebVR polyfill contains the code for lens distortion and device configuration for different cardboard headsets? Do you know when aframe will update to the latest version or which branch we can get a preview from? Thanks for the help!
 Thanks for quick response. I'm using Ionic and Browserify and I wasn't setting the config early enough it turns out. The back and settings button aren't responding to touch when I play a videosphere currently (iOS sim and device) - I'm going to experiment outside of Ionic and see if I have the same problem.
 The cardboard UI controls aren't working using the current master of aframe - tested using iOS webview on sim, device and then just a plain project ran in Safari. Pressing the back button does nothing, pressing the settings cog dims the screen for the duration you hold down. Sorry if this is more of a polyfill issue? Let me know if I can help out in anyway too
 To answer my own problem.. the version of the WebVR polyfill currently being used will not show the Cardboard UI, it's fixed in a newer version. The problem is in

```
CardboardVRDisplay.prototype.beginPresent_ = function() {
...
if (this.carboardUI_) { //Should be cardboard not carboard
    this.cardboardUI_.listen(function() { 

  }
}
```
  **Description:**
If I make the app landscape by default the video is playing in portrait instead of landscape, this only happens in Android only, iOS is fine.
- A-Frame Version: v0.2.0
- Platform/Device: Android / Any
  **Description:**

Can't render this obj model, because it has `l` lines.
[cardboard.obj.zip](https://github.com/aframevr/aframe/files/193041/cardboard.obj.zip)

The error message in the console:

Uncaught Error: Unexpected line: l 2 1

It should be safe to ignore these elements, they seem to be output erroneously by the blender obj export, but its a pain having to tell users to delete the lines in a text editor.
  this example shows the width/height of the injected canvas being ignored, as well as the width/height percentages not working
http://blockbuilder.org/enjalot/bff45307d120a5b2f53e
  **Description:**
Spotted missing " in docs.
**Changes proposed:**
- Added in closing quotes
  Superfluous variable, changed in doc, needs to be changed in the codepen but I imagine you'd want to do that through your account.
  - Bump THREE to r75 (fixes #1186)
- Update Torus Knot to fix tests and reflect changes in r75
- Remove deprecated scaleHeight parameter from Torus Knot schema
- Update the order of constructor arguments for THREE.TorusKnotGeometry
- Add torusKnot to relevant geometry schema properties
- Fix the Geometry Gallery example
 @dmarcos yes, unfortunately these changes are required to update Three to r75.
r75 changes the TorusKnotGeometry constructor, which breaks the test suite and causes a deprecated property warning for scaleHeight.
  `<video>` assets can contain a `poster` attribute specifying an image to be displayed before the video has loaded, or before it has been played.

When adding a video as a material `src`, it would be beneficial if the material could look for and display the  `poster` image. This should allow for the `src` attribute to be left empty when the video is not playing, so that memory is not used to load a video that is not being played.

The current workaround is to use an additional `<img>` asset containing the `poster` image, and to dynamically switch the material `src` to the `<video>` `src` when needed.
  **Description:**
three.js r74 introduced intensity property on ambient light mrdoob/three.js#7621 . Add that to the light component.
**Changes proposed:**
- updated component
- added test
 @dmarcos Updated.
 @dmarcos @ngokevin Finally fixed the messed up rebase, should be good to go
  **Description:**

Loading an empty scene:

`
<a-scene stats="true" id="scene">
      <a-assets id="assets"></a-assets>
</a-scene>
`

Causes following warning:

`2016-03-24 18:19:53.958 aframe.js:258 core:schema:warn Unknown component property:  +0ms`
- A-Frame Version: 0.2.0
- Platform/Device: Chrome Desktop
  #### When animation.stop() it´s called, the animation value considers fill value
- **backwards**: : When animation is stopped set the starting value to the initial value.
- **both**: Animation value is saved when stopped.
- **forwards**: Animation value is saved when stopped.
- **none**: When animation is stopped set the starting value to the initial value.
  **Description:**
There is no documentation for loading an .OBJ with .MTL in <a-obj-model>. 

Looking at the source code, you need to specify the path to the .MTL-file. But doing exactly that, lets say with 

```
    <a-obj-model id="model_base"
                 src="models/model.obj"
                 mtl="models/model.mtl">
    </a-obj-model>
```

Results in a very unhelpful error message:

```
aframe.js:56776 Uncaught (in promise) DOMException: Failed to execute 'querySelector' on 'Document': 'models/mamiya/kens-rage-mamiya.mtl' is not a valid selector.
```

The error happens because of this:
Text in a "src" attribute, like src="myurl" is automatically converted into "url(myurl)". The function srcParse() recognizes this and treats it accordingly. For "mtl" attributes, this doesn't happen. They are not transformed into "url(myurl.mtl)" and not recognized in srcParse().

The <a-obj-model> apparently gets an attribute called "obj-model" set somewhere, and it's set to

```
obj:url(models/mamiya/kens-rage-mamiya.obj);mtl:models/mamiya/kens-rage-mamiya.mtl
```

You can circumvent it by using it like this:

```
    <a-obj-model id="model_base"
                 src="models/model.obj"
                 mtl="url(models/model.mtl)">
    </a-obj-model>
```

...but this doesn't seem to be the best solution since it's a bit inconsistent.

I've never contributed to open source projects so far but I'd like to start. If this is an issue that you'd like to have fixed, I'd like to look into it.
- A-Frame Version: 0.2.0-rc1
- Platform/Device: Desktop/Chrome 49
 @MrTrustworthy we got it to work with relative paths: `/blueshoe.mtl`
 There's an example with both an OBJ and MTL file here. Does this syntax work for you? https://github.com/aframevr/aframe/blob/master/examples/test-model/index.html

I also like the syntax:

``` html
<a-entity obj-model="obj: url(...); mtl: url(...);"></a-entity>
```

And does your .MTL file reference any external texture images, or are the OBJ and MTL the only files involved?
 @masom @ngokevin I'm not able to access the original code until monday, so I won't be able to test the other options you mentioned until then. I can follow up with an answer then if needed.

But as far as I can see, it seems to be solved. Thanks for the quick reactions.
 @ngokevin I'm having this problem because the blender file is fetching my computers directiories of the textures instead of fetching the ones from A-Frame assets. How do I fix this? I've read somewhere that I should use a relative path, what does that look like? 
Thank you for your time @donmccurdy I already did that and it hasn't worked. Can you check this out please? https://glitch.com/edit/#!/vr-hq?path=views/index.html:27:46 i have 4 textures and none of them works, that's why i asked here 
<img width="1557" alt="captura de ecra 2017-07-03 as 17 25 11" src="https://user-images.githubusercontent.com/19707794/27801209-b14c2e9e-6014-11e7-8733-c2ab92126826.png">
I can't see none of that! what?!?!
 I'm using a MacBook Pro and Chrome. Also tryed a Collada file, still no textures  Have seen a couple questions around this in Slack, but haven't found an example or gotten around to looking into it yet. Normal maps ought to be referenced inside the .MTL file, like texture images, but it's not clear whether THREE.js supports this.

**References:**
[Normal map in *.obj file](http://stackoverflow.com/questions/29800214/normal-map-in-obj-file) on Stack Overflow
[THREE.MTLLoader:368-379](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/MTLLoader.js#L368-L379)
 The THREE.js loader looks to be pretty limited for OBJ/MTL. They don't really support many of the MTL semantics.

The closest MTL semantic would be 'bump', but it was designed for scalar (greyscale) images. It was expected that the normal was recalculated in the shader. However it's probably safe to use it for normal maps, if you could get them to tweak the OBJLoader.js... 

Normal maps are kind of sticky though. They come in a few flavors. World space, object space tangents, 2 and 3 channel. A-Frame would have to take some kind of stance on what its 'standard' is.
 Couple hours of struggling with this, and yeah I agree with that take. THREE.MTLLoader is missing pieces (definitely won't read bump syntax in `.mtl` files coming from Maya LT), even though THREE.MeshPhongMaterial supports quite a bit.

Fun find in the process though, Autodesk's free [FBX Review](http://www.autodesk.com/products/fbx/fbx-review) viewer displays `.obj` and `.mtl` files, and hopefully is a good sanity check on whether the files themselves are just nonstandard (which is sometimes also the problem with free models online..)
 Progress! Sort of.

I'm having a bad time with bumpmaps in OBJ/MTL in general, even with Autodesk FBX Review.

But, the THREE.js JSON formats seem pretty reliable. And converting other formats to THREE.js isn't too bad, there are [THREE.js converters](https://github.com/mrdoob/three.js/tree/master/utils), [exporters for different modeling software](https://github.com/mrdoob/three.js/tree/master/utils/exporters), and [Clara.io](https://clara.io/) which is working fine + free.

Wrote up a [three-model](https://github.com/donmccurdy/aframe-extras/blob/master/src/misc/three-model.js) component to load those in A-Frame, and have a quick test with bump maps working.
  ## Description:

Fixes #975, #848, #543. ~~Includes @bnolan's PR #1056 for pointerlock.~~

Proposed in #975, this attempts to address a couple issues:
1. Integrating third-party controls is a bit problematic.
2. Adding pointerlock as an option (default or no) would be awesome.
3. If a physics implementation is added, collision detection on the player would be a nice-to-have. The abstraction makes this much easier.
## Changes proposed:
- Add `controls` component to fetch user input from input device components and apply position/rotation to the object.
- Add device-specific components `wasd-controls`, ~~`gamepad-controls`~~, ~~`touch-controls` (touch-to-move)~~, `hmd-controls`, and `mouse-controls`. Probably not all of these should be enabled by default, but they could be.
- ~~Adds `velocity` component to update position over time. (Not necessary to the PR, but makes physics integration easier).~~
### Usage:

**Default:**

``` html
<a-entity camera controls></a-entity>
```

**Custom:**

``` html
<a-entity camera controls="rotation: custom-controls hmd-controls gamepad-controls mouse-controls"></a-entity>
```
## Interface:
### Controls Component

No exposed interface, but the basic implementation is:
1. Iterate over rotation controls, by order of precedence, finding first active control and setting rotation. 
2. Iterate over movement controls, by order of precedence, and get velocity relative to heading.
3. Apply rotation to velocity, to get absolute velocity.
4. Set velocity.

Developers can modify the `movement` and `rotation` properties to enable/disable input devices, or change the order of precedence.
### Movement Controls
- **isVelocityActive()** – _(required)_ Returns true if this control is actively in use. For example, a connected gamepad should return false unless the left joystick is tilted.
- **getVelocityDelta(dt)** – Returns an incremental THREE.Vector3 velocity change, with values [-1,1]. In general, this will affect the X and Z axes.
- **getVelocity()** – Returns a self-sufficient THREE.Vector3 velocity. May not be necessary, I can't think of a need.
### Rotation Controls
- **isRotationActive()** – _(required)_ Returns true if the control is actively in use. For example, mouse controls would only return true if the mouse is currently moving. HMD controls can probably return true any time an HMD is detected.
- **getRotationDelta(dt)** – Returns an incremental THREE.Vector2 rotation change, with X and Y rotation values. To be roughly calibrated, these should be near the range [-1,1].
- **getRotation()** – Returns a self-sufficient THREE.Vector3 (XYZ euler) world orientation, in degrees.
## Pending:
- [x] I'm assuming `controls` should inject the other components if they aren't present, rather than specifying all 5-6 in HTML.
- [x] Need to polyfill KeyboardEvent.code, which tangentially happens to fix #333 (ZQSD controls) in Chrome.
- :heavy_multiplication_x:  ~~Maybe `mouse-controls` should be split into mousedrag and pointerlock components?~~
- [x] Inject velocity component automatically
- [x] Deprecate look-controls and wasd-controls.
- [x] Rename movement -> position
- [x] Update all examples to use the new controls.
- [x] Update the default camera configuration in `systems/camera.js`.
- [x] Documentation
- [x] Unit tests
- [ ] Resolve conflicts with #1474 
- [ ] Consider adding `touch-controls` back in.
## Demos:
- Within A-Frame, updated the "Controls" demo.
- [Wall collision detection](https://sandbox.donmccurdy.com/vr/walls/) with gamepad/wasd/touch movement.
- [Motion sickness-inducing physics demo](https://sandbox.donmccurdy.com/vr/playground/) with ramps and moving platforms, because hey why not.

Side note, on physics integration, the wrapper around input controls is actually less critical than the `velocity` component. An example implementation (2nd and 3rd demos above) is [kinematic-body.js](https://github.com/donmccurdy/sandbox-aframe/blob/master/src/physics/kinematic-body.js), and the key need is having access to rotation/position/velocity data.
 - Added `AFRAME.registerComponent()` :white_check_mark: 
- `controls` is good. :white_check_mark: 
- ~~re: "universal-controls as a dependency" – I was hoping to do the opposite of that, and have `universal-controls` append the others if they're missing. But I don't think I can do that through the dependencies, since we'll only know which controls are specified as properties at init().~~
- ~~`default-control-scheme`, I don't think I understand how that would work? But yes it would be nice for them to be added automatically.~~
- ~~Still need to find a way to inject missing controls when user only specifies `controls`.~~ :white_check_mark:  
- ~~Renaming `controls="movement: ..."` to `controls="position: ..."`. I might disagree here - "position" sounds good, but "positionEnabled" and "positionAcceleration" don't make much sense. Maybe "motion", which very helpfully almost rhymes with "rotation"?~~ 

---

General update – Added an `AFRAME.registerComponent()` and a `controls` system. The abstraction and the systems API seem really nice (props there!). ~~My only issue is that the controls system doesn't actually have anything to do.. It categorizes controls just fine, but then the `controls` component already has a list of movement/rotation controls in its schema, so it doesn't really need to use the system. Maybe the system provides an active input controls, if any, to the controls component?~~ The system currently just supports validation.
 Updated the "pending" list in original post, I think those two things are all I have in mind. 
 Oh, yes docs would be key. I'll at least start them in this CL then.
 Quick update, I've patched `<a-camera/>` and all of the examples. Remaining TODOs are updating Documentation and writing unit tests. Is it worth it to start on those now, or want to iterate on the API more or do a more line-by-line review first?

EDIT: Also, I can't reproduce the crashing-on-enabling-pointerlock thing you mentioned. :/
 First pass at docs (for the component, not the controls system) up now. Didn't seem like enough content to merit separate pages or a new section, but open to ideas.
 Some unit tests added now, but still need to get the HMD position tracking in there.
 I think I'm caught up. The core functionality all has unit tests, and `hmd-controls` has positional tracking (which I haven't manually tested, but THREE.VRControls makes it seem pretty simple).

Maybe still some API questions to resolve:
1. The parent `controls` will reorient `getVelocityDelta` to the rotation heading, but not `getVelocity` (used only by `hmd-controls`). That's possibly unclear from the names, but makes sense in context.
2. Use of "position" (e.g. `controls="positionEnabled: true"`) and "velocity" (e.g. `component.isVelocityActive()`) feels inconsistent. Not sure what names to use that would be both meaningful and consistent, though.
 **re: getVelocity[Delta] and heading** So far, four components update position: hmd, gamepad, keyboard, and touch. The last three (using `getVelocityDelta`) all are relative to heading – pressing <kbd>W</kbd> or <kbd>DPAD_UP</kbd> should move in the direction you're looking, not just `z=-1`. But HMD position changes (using `getVelocity`) are absolute. 

But now that I think about it maybe that's fine. The word "delta" implies that it's a change from some original velocity, whereas `getVelocity` does not.
 Ok, not sure what you mean about steps (like, simulated bipedal lurching?) - i assume that's to eliminate any misconceptions that WASD is acceptable for VR lol? Anyway, pushed `keyboard-controls` back up and removed it from the default set.
 re: `getPosition` -  yeah i'm ok with that, just makes it a bit trickier to detect imminent collisions in physics land later on. we could always compute a velocity based on that `getPosition()` result, so that the component author doesn't need to worry about scaling by `1000/dt` (to counter the scaling in `velocity`) themselves.

~~re: comfort snap controls – cool. Ideally that would use `getRotationDelta()` I think - maybe we shouldn't scale the delta by `dt / 1000` so it's absolute? Or maybe you just account for that in your component. This all sounds like it can fit in the controls framework OK though.~~ Oops no, it's not scaled by `dt / 1000` like I thought.
 Guess I was wrong about rotation – it's already absolute. `getRotation()` does update yaw/pitch now, so if your comfort controls are using `getRotationDelta` I think you should be good.

I'd agree that HMD + Vive controllers are the main use cases, but it would be nice to be able to support third-party flat experience controls. Added `getPosition`, and `hmd-controls` are now using that. It converts position to velocity under the hood. Focus being on HMD controls, this is hitting the limit of what I can actually test with just a Cardboard. Hoping to have my HMD in a couple weeks.
 Ok that sounds good, done.
 Great! I haven't had the chance to read through the WebVR 1.0 changes but will do this soon. I got my Rift yesterday ( 🎉 ) so I can test the positional tracking as well now.
 Rebased to to the WebVR 1.0 changes – starting on updating `hmd-controls` now.

Also, somehow we ended up with `rotation-enabled` and `position-controls-enabled` .. those should both be `*-controls-enabled` i think right?
 Will profile on performance a bit, my first thought would be maybe `velocity` is updating before the controls component, or after `position`, and so the HMD is delayed by 1 frame? Is there logic somewhere that makes sure position/rotation have updates from all the components before they're applied? Maybe we need that for velocity.

Reasoning on `getPositionDelta` is that the player might not start at 0,0,0 in the scene, so `hmd-controls` can't necessarily return an absolute position. Unless we just want it to initialize with `getAttribute('position')` i guess. The flow now:
1. `hmd-controls` gets position from the HMD.
2. `hmd-controls` compares position to last position, and returns the delta.
3. `controls` sets `velocity` from the delta (`velocity = delta * 1000 / dt`).
4. `velocity` updates `position`.

EDIT: Which is exactly what you said on the flow anyway lol, yeah.
 Ah this gets back to what you said about not wanting any easing with the HMD though. Hm. Maybe we should just turn off easing by default anyway? Or I'm fine w/ going back to `getPosition`, but `hmd-controls` would need to ~~be re-zeroed if you teleport or something~~ check current position on every tick.
 Velocity won't keep going if HMD loses tracking - easing is very slight, so you'd stop almost instantly. I think removing easing (or just default=none) would be no problem; might as well let the input component do that if it's needed.

Jank-wise, it does look like the velocity component is consistently `tick()`'ing before controls. So the HMD is a frame behind. Is there anything in place to force `position` to update later, and can we do the same for `velocity`? Maybe position/rotation/velocity should be part of a system or something.
 Sounds good. I had to solve a similar problem with my [physics system](https://github.com/donmccurdy/aframe-extras/blob/master/src/physics/system/physics.js#L66-L79) using an `addBehavior(<component>, <phase>)` API, but that might be overkill here.
 That sounds fine, I'll pull out velocity.

You mentioned getting some jank from hmd-controls – is that rotation, position, or both? I'm not noticing anything definite, but if it's rotation then there's an issue unrelated to velocity we'll want to track down...
 Removed velocity, that seems pretty harmless. I also just turned easing off by default – maybe that was the issue with the jank feeling? I'll test that out in a bit.
 Found the latency problem-- `hmd-controls::tick()` was called _after_ `controls::tick()`, so HMD updates were out of sync. Might want a different solution once #1437 is resolved, but for now I've moved the main controls update into the controls system, so that it's guaranteed to happen after `hmd-controls` has had a chance to update its `THREE.VRControls` instance.
 Updated w/ ____ControlsEnabled → _____Enabled renaming.

One other change, at least in the current state of things — `hmd-controls` and `mouse-controls` do not support touch events, whereas `look-controls` does. I removed that while the touch-to-move component was in the PR, which has since been removed. Do we want touch events back?
  Should close up issue #1216. Increased default segmentsTheta and segmentsTubular to make round primitives more round (or smooth).
 segmentsPhi is actually how many triangles are rendered per SegmentsTheta (how many segments built for each trapezoid (?) that makes up the ring) so it doesn't make the circle more round, at least according to the docs.
 Thanks for the heads up, I'll make sure to remember that next time!
  **Description:** Plane and box primitives now have default width, height, and depth of 1

**Changes proposed:**
- change geometry component and docs

for real this time!
 No problem, I guess I'll have to go read Pro Git now
  Changed geometry.js and amended docs
 Noticed additional changes to make aside from geometry.md, want to make sure I didn't miss anything else
 Sorry, I'm new at this (have only used Mercurial solo in the past). I thought I'd close it, then reopen after I fixed the commits on my repo. I guess it doesn't work that way?
 I can't re-open, so I'll open a new one. Thanks for the help!
  Changed from 8 to 32. Also changed the documentation for geometry to reflect changes in src.
  I just had this issue while learning how to develop for aframe (found the answer here, thanks!). I imagine this is also what many non-developers may be experiencing.
  Cvan, have you published the WIP build that adds the padding to the bottom of the html? I'm having the same issue on a build that we are about to go public, and while not ideal, at least being able to "swipe" to remove the URL bar is better than the offset (low) stereoscopic rendering due to the URL bar For those interested, the temp/crude solution as described is to create scrolling and that gets rid of address bar.

for example 

`var html = document.getElementsByTagName('HTML');
html[0].style.position = 'initial';
                        html[0].style.overflow = 'scroll';
                        var canvas = document.querySelector('.a-canvas');
                        canvas.style.top = '1000px';` Is anything being done on this? It's quite a critical problem for us. @cvan Unfortunately unless I'm reading it wrong that PR only seems to add support to what's already there for android webviews. We are trying to fix the full screen / urlbar issue on ios in safari and chrome (on iphone 5/SE, though i believe the reason chrome doesn't work is different to why safari doesn't work) @cvan Thanks for that - yeah we've already added that add to home screen component, and that works, we're just trying to find ways with less friction.

For anyone else coming across this, this is what we've found definitively:

*IOS on iphone 5, 5S, SE*
- Chrome and Firefox and safari all refuse to hide their url bars / go full screen 

*IOS on iphone 6+*
- Chrome and Firefox still refuse to hide their url bars / go full screen
- Safari works great and hides the url bars

*Android on various*
- Chrome, Firefox and Samsung browsers work great and hide their url bars.

We've tried all the hacks - scrollTo, the hack mentioned in the @renhyl 's comment above, and everything else we could find online. There's currently no proper solution to this on iOS, other than to use the pin to homescreen option - whereupon full screen works just fine.

We also came across some weirdness implementing @renhyl 's code above as it would work to hide the scrollbars, but exiting VR was buggy and sometimes impossible. All in all it detracts from the user experience and we decided pinning was the least friction causing option.

Our app is in latest A-Frame, and ios versions were 9 and 10. @ngokevin @cvan, I don't think @MagicIndustries should need to leverage the homescreen in this scenario unless this is a specific-to-iOS Chrome bug. I have a working demo in-browser with inline video + audio etc. fullscreen on iOS10 Safari and Android Chrome. It's very smooth without downloading to the homescreen. 

My only issue at the moment is bulleted above -- iOS chrome does not get rid of the URL bar when going landscape *or* when going into VR mode. 

This will cause the renderer to squash and look weird. I cannot recreate the issue using Chrome's simulator for iPhones, but it's consistent on the real hardware.

_Update: Confirmed with iOS 10, iPhone 6S on current iOS Chrome build using aframe.io examples. Not sure if I'm misunderstanding what Google considers 'fullscreen' but it seems like this should work https://developers.google.com/web/fundamentals/native-hardware/fullscreen/. Also can't confirm if this issue happens in Android Browser + Android Chrome but I don't think it does._ 

![img_8501](https://cloud.githubusercontent.com/assets/6632701/24882213/47f9d588-1e0e-11e7-82bf-16b1482be51a.PNG)
 I'll add that even hacks that go fullscreen on the iphone 6/6s/7 will sometimes not work on the 6plus and 7plus.  Because Apple treats the plus as some sort of super-mini iPad (it's like the worst of both worlds, I hope the iPhone8 acts like a phone, not like this).    I'm in
 the folders are arranged now but I'm unable to give the respective images in the folders
 Also, where do I have to upload the updation?
 Got it, thanks @dmarcos, after doing this where do I have to upload the updated file?
currently its in my PC
   **Description:**
Instructions on rotating the device into landscape / into cardboard are now missing.
- A-Frame Version: master
- Platform/Device: Android, iOS
  **Description:** is there any plan to add video control api, such as seek, play/pause, mute?
   - Fix query selector to match all cubes, by using wildcard (*)
- Also upgrade to using a-camera and a-cursor tags, instead of depreciated attributes
 Understood. I reverted back to a-entity, now it's just a one-liner fixing the query selector (which wasn't matching anything before). 
 squashed.
  **Description:**
When destroying a sound component, we pause the sound which throws an error when the sound is not playing.
**Changes proposed:**
-Check if sound is playing before attempting to pause.
 @ngokevin good call, but THREE already handles play:

```
THREE.Audio.prototype.play = function () {

    if ( this.isPlaying === true ) {

        console.warn( 'THREE.Audio: Audio is already playing.' );
        return;

    }
```
  I'll grab this
 im in
 @BhasinParth, this is a really simple task, should be done in a matter of minutes, I don't think we need two people on it, however, I can show you my changes if you'd like.
 ok great,all the best buddy
 PR: https://github.com/aframevr/aframe/pull/1270
  So, anything more happen with this.  I was looking at shadertoy this week, and was thinking how completely awesome it would be to have an AFrame component to simply using shadertoy shaders in AFrame.  It seems that the core part of using shadertoy shaders is setting up the extra shader inputs;  a component that took care of this for you would be make it much easier for folks to create shaders there and leverage them in AFrame.  

I could imagine going further, and using the shadertoy api so that you could just put the URL/ID of the shader as a parameter and the component could pull it directly. Well, _I'm_ interested, but that doesn't mean it's a priority for y'all. :)

There appear to be a bunch of uniforms and so forth missing that a typical shadertoy shader looks for  (e.g., 
```uniform vec3      iResolution;
uniform float     iGlobalTime;
uniform float     iChannelTime[4];
uniform vec4      iMouse;
uniform vec4      iDate;
uniform float     iSampleRate;
uniform vec3      iChannelResolution[4];
uniform int       iFrame;
uniform float     iTimeDelta;
uniform float     iFrameRate;
struct Channel
{
    vec3  resolution;
    float time;
};
uniform Channel iChannel[4];
uniform sampler2D iChannel0;
uniform sampler2D iChannel1;
uniform sampler2D iChannel2;
uniform sampler2D iChannel3;
```
) which is why I was asking what the status was.  Or, do you assume folks will just change references to these in the shader? I was looking at posts like http://stackoverflow.com/questions/36983769/export-from-shadertoy-to-three-js

Anyway, I'm not encouraging you to spend time on this;  was just curious if more had been done on it, in case I decide to poke more at it. while we're on the subject (I had forgotten all about it) did you want to do something with ShaderFrog too?

http://codepen.io/machenmusik/pen/WRLjxK  Cool, I was also thinking it would be useful to get the full intersection data in events. I got it working in my cursor-hitpoint branch, with an example: https://github.com/amberroy/aframe/commit/593ab4c   
  **Description:**

Add uv attribute to detail in click event.

**Changes proposed:**
- Add uv attribute to detail in click event.
- Don't propagate uv attribute up to parent elements
  A second data point for Windows 10 with Edge:
- Most run fine (e.g. Hello World).
- Anime UI loads but from a [different perspective](https://drive.google.com/file/d/0B9kmhkXbM5H8WDF0OWFjVVoxWWs/view?usp=sharing) (?). A similar thing happens with the "Shopping" and "Logo" demos.
- Cursor & Hover runs, but the cube does not change when I look at it (as it does on Chrome).

The change in perspective in the Anime UI example made me curious. Changing the camera position to "1.75 1 1.2" and then back to default fixes it. Also the div that holds "exit VR" is duplicated many times. Weird. 
  I'm using Angular 2 and did npm install aframe --save-dev to include it in my node_modules.

In the index.html I include the script <script src="node_modules/aframe/dist/aframe.min.js"></script>

and I use aframe in one of my htmls as follows: 
<a-scene>
    <a-sky src="image_location.jpg" rotation="0 -130 0"></a-sky>
</a-scene>
- A-Frame Version: "^0.1.3"
- Platform/Device: Tried it on MacOS and Ubuntu 14.4
 For navigating through my application generally. Instead of clicking once on any button I have to click twice to go to the next page regardless if it has the VR image or not.

Anyway, I upgraded the version of aframe from 0.1.3 to 0.2.0-rc1 that was added two days ago. And now it doesn't do it anymore (It navigates normally with one click).

Thanks,

Ahmed
 So the flow is as follows:
1) running the home page 
2) clicking on a button to go to the html that has the a-frame tags and shows me the VR photo.
3) There are some other pages of info and static data non a-frame related

Using 0.1.3 version of aframe, once the script is included in my index.html. The whole application becomes slower and I should click on the button twice to navigate to the a-frame image.
  **Description:**
Allow setting the `depthTest` property of the material component.

Fixes https://github.com/aframevr/aframe/issues/714
Relates to https://github.com/aframevr/aframe/issues/666

**Changes proposed:**
- Add `depthTest` in the list of parameters allowed with `material`.
- Apply the `depthTest` value to the material object.
  Torus primitive was implemented, notice that `tube` attribute is not working yet, probably (not sure) because is not included in [geometry schema.
](https://github.com/aframevr/aframe/blob/master/src/components/geometry.js)

I´ve created a simple example:
![torus](https://cloud.githubusercontent.com/assets/2657897/13830639/437b1e5e-ebce-11e5-8a9b-88da5b47cdc8.png)

(yep, it´s a face ^^)
  This closes https://github.com/aframevr/aframe/issues/1144
  Changes proposed:
- Add maximum-scale=1 to fix iOS viewport scaling (Fixes #1122)

Before:
![before fix](http://i.imgur.com/HDZyyM7.jpg)

After:
![after fix](http://i.imgur.com/kzKtZ1D.jpg)

I tested this in the Xcode iOS simulator and an iPhone 6, did not get a chance to test a 6S or newer devices.
 I'm not sure. I didn't know that was an issue, but I can try to setup a test. Do you know if it is only a problem with Webkit based web views on iOS or if it also affects Twitter's Android app?
  Here's a working example (it's using the version of aframe installed with `npm install mozvr/aframe#dev`:

https://desolate-island-90618.herokuapp.com/#!/

It has the same structure as the official Panorama example: https://aframe.io/aframe/examples/template-sky/

But if you click the VR button while on a phone, you just see one image instead of two.

Is this a bug or there's something wrong with my setup?
 I did `npm install aframevr/aframe`. It works: https://desolate-island-90618.herokuapp.com/#!/

Thanks again, this is the fastest-replying repos I've seen.
  I'm experiencing the same issue on iPhone 5. 
 @ngokevin, fair enough.
 How slow is "laggy"? <30 FPS?
 @ngokevin hmm, I get >30 FPS with Anime UI on my HTC One M8 using Chrome. However, I did notice instability (browser crashes) and stuttering with Firefox.

edit: tested the same demo on a Nexus 4 and it ran even smoother in Chrome (lower res.) and slower in Firefox (~10 FPS).

Here's a copy of Anime UI (with stats turned on) [for others to try](http://www.wsundine.com/a-frame/mobile-perf)
  With the current code when an animation is removed from a component the animated property is set to the initial value.

This behavior could not be the desired one in some cases, i.e: when you want to stop an animation before it ends keeping the property value. Maybe I´m wrong and there is a better way for doing this, let me know in that case.

See https://github.com/IagoLast/totem for a working example when this feature could be used.
(Note that totem uses a modified a-frame version where the `setInitialValue` line was commented.)
 @dmarcos yep, for me this would be the expected behavior
  Changes proposed:
- Iterate up object tree to the element that is attached to the dom.
 Ok sweet, made those changes! :+1: 
  It'd be great if the [original event](https://developer.mozilla.org/en/docs/Web/Events/click) (with shiftKey, screenX, screenY) was passed to the node that registers for `onClick` as an `originalEvent` property. I tried adding this to `cursor.js` but thought you might have a better idea of how to do this?
 Something like:

```
  document.querySelector('a-entity').addEventListener('click', (e) => {
    alert(e.originalEvent.shiftKey);
  });
```

To detect when someone shift-clicks on an element, or uses the second mouse button, etc.
  Description:
- A-Frame Version:
- Platform/Device:
  Description: I'm not exactly sure what's going on, but filing anyway.

I load a 70+mb .obj file and get the 'loading' event long before the asset becomes visible on screen. Perhaps it's the post-processing and not loading?
- A-Frame Version: master
- Platform/Device: Firefox Dev Edition 46
 Hm, I was seeing the timeout hit in the console yesterday but not today.
The problem still exists regardless.

I think it's still not clear whether there's a bug or not. The event is
emitted possibly when the asset finishes loading but before it is processed
and rendered. If that's true, maybe it means we need another event?

On Fri, Mar 11, 2016 at 10:50 AM Kevin Ngo notifications@github.com wrote:

> I think the issue is that the event is not firing at the right time.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/issues/1155#issuecomment-195495717.
 To add a bit:

In the case that all the assets are loaded from the disk cache, the "loaded" event either doesn't fire or fires so early on that it's hard to set up another event handler at such a place in the load sequence that you can actually catch the event happening.

One solution could be just to add a flag "assetsLoaded" somewhere under AFRAME. that is globally visible. That flag would be set when the "loaded" event is triggered. That way we can skip setting up listeners in case assets are already loaded.



 `<a-assets>`
`<a-asset-item id="model-obj" src="the-source..."></a-asset-item>`
`<a-asset-item id="model-mtl" src="another-source..."></a-asset-item>`
`</a-assets>`

`document.querySelector('#model').addEventListener('model-loaded', function() {`
`   console.log('loaded');`
`});`

UPDATE:
That works, according to https://github.com/aframevr/aframe/blob/master/src/components/obj-model.js#L51

The event is called 'model-loaded' not 'loaded'. And I have to listen on the entity which represents the model, not the asset. I don't think model-loaded is the right event name. A-frame docs say it is "loaded" but the bug persists. The event is fired way before the model is loaded. See `model-loaded` in https://aframe.io/docs/0.7.0/components/obj-model.html  Description: I added a loading event listener on <a-assets> per @ngokevin's advice, and received two events even though I had one asset.

Also, we should clearly define whether adding a listener on a-assets sends a notification for each loaded asset or a single one once all assets are loaded.
- A-Frame Version: master
- Platform/Device: Mac OS X, Firefox Dev Edition 46

Code:

`<a-assets>
  <a-asset-item id="n-obj" src="nefertiti.obj"></a-asset-item>
</a-assets>`

`<script>
  document.querySelector('a-assets').addEventListener('loaded', function() {
    console.log('assets loaded')
  });
</script>`
 Btw, I changed networks from slow (office) to fast (home) and I cannot
reproduce this in a fast network. Even more interesting, I'm loading the
asset from the localhost webserver.

On Fri, Mar 11, 2016 at 10:54 AM Kevin Ngo notifications@github.com wrote:

> Expected: one single event once all assets loaded
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/issues/1154#issuecomment-195496738.
 Thanks :D

On Fri, Mar 11, 2016 at 11:04 AM Dietrich Ayala autonome@gmail.com wrote:

> Btw, I changed networks from slow (office) to fast (home) and I cannot
> reproduce this in a fast network. Even more interesting, I'm loading the
> asset from the localhost webserver.
> 
> On Fri, Mar 11, 2016 at 10:54 AM Kevin Ngo notifications@github.com
> wrote:
> 
> > Expected: one single event once all assets loaded
> > 
> > —
> > Reply to this email directly or view it on GitHub
> > https://github.com/aframevr/aframe/issues/1154#issuecomment-195496738.
  Changes proposed:
- Fix a small typo in the Animations docs
  It would be useful if entities that are defined as using components which don't exist yet would get those components automatically added to them once they've been registered.

For example:

``` html
<a-entity somecomponent="foo: true"></a-entity>
```

`somecomponent` hasn't been reigstered yet, so it's not active, but is tracked somehow by the system.

``` javascript
AFRAME.registerComponent("somecomponent", {
  init: function(){
    // Wow!
  }
});
```

As soon as the component gets registered, it'll be attached to the entity that previously registered it.

The main use would be components loaded asynchronously (say, from a registry) or maybe components that are being generated dynamically via some dark voodoo magic.
 sounds good but what about dependencies, how would they get honored? If components register asynchronously there will be issues, I think that promises fit here somehow
 Also topological sorting could be applied to the dependencies graph to calculate the registration order
 If registration is expressed with promises, as new component definitions come in asynchronously, the dependencies defined in them can produce more promises and then it's all a matter of chaining them
 Maybe depending on a component could be sync if it already exists, and have a deferred promise if it doesn't exist yet, which can resolve after something registers that component?
 A-few initial questions (not sure if I will have the time to contribute, but am going to try): 
- What would be the most minimal example of this?
- Will this be handled differently based on type of component?  For example:
- \* <a-hyperbolic-star></a-hyperbolic-star>
- \* <a-box turn-into-a-hyperbolic-star="resolution:20;"><a-box>
- \* <a-hyperbolic-grouping-thing><a-box></a-box></a-hyperbolic-grouping-thing>
- \* (etc?)
- Where would this functionality live in the existing code?  Are there any requirements/suggestions around how it should be hooked into the existing system?
 I think combining your suggestion about keeping lists of entities that need component initialization along with promises that resolve to component definitions could do the trick here. When an entity requests an unknown component it creates an entry in a map, allocates a new list and puts the element in. At the same time a promise is created that when resolved with the definition it would iterate the list and initialize the components on each entity contained therein. Some checking would be required because the entity may have removed the attribute in the meantime. If a component definition contains dependencies then these would create more promises and the processing of all of these should be chainable with Promise.all(). I feel this could work and I'd love to give it a try but right now I'm very tied down with work.
  A client recently complained that mouse movement in A-Frame felt wrong compared to ie. mouse movement in YouTube's and Facebook's 360 videos. He want to "drag" the canvas around with the mouse, rather than to "push" it. He also wanted a slightly faster movement for the mouse, as he felt the experience was a bit "sluggish" with the default setting.

Changes proposed:
- Add a property called reverseMouseMovement to the look-controls component with a default of false. When set to true, mouse movement will work reversed.
- Add a property called mouseMovementSpeed to the look-controls component with a default of 0.002 - the current hardcoded setting.

I was unable to find any tests that covers the look-controls component, so I have not included any tests for my change.
 @dmarcos I think it would be very useful to have configuration for wasd-controls in. 

@ngokevin Sure, I already did, the solution with both modifications is live at vrlab.dk, and my custom look controls look like this: https://github.com/RSpace/vr-lab/blob/master/src/js/utils/custom-look-controls.js

But I'd prefer not to have duplicate 99% of look-controls next time :)
 @ngokevin What does that mean? What should I do?
  A client recently complained that you could only move horizontally, not vertically, with touch. I see a comment about explicitly only allowing horizontal touch movement, but I don't understand why.

Changes proposed:
- Add a property called allowVerticalTouchMovement to the look-controls component.
- allowVerticalTouchMovement defaults to false.
- When explicitly set to true, vertical touch movement will also work.

I'd be happy to submit another PR where vertical movement is always allowed, but I didn't want to break the defaults when there might be a good reason for it being as it is.

I was unable to find any tests that covers the look-controls component, so I have not included any tests for my change.
 Fair enough, that's why the PR is adding a setting where it's disabled by
default. Let's at least make it an option, I think it works fine on vrlab.dk
?
On Fri, 11 Mar 2016 at 18:23, Diego Marcos notifications@github.com wrote:

> We don't want to enable vertical panning by default on mobile. It's
> disorienting when combined with the orientation given by the phone sensors.
> You quickly lose track of what's up or down and rotating the phone becomes
> frustrating. It's a better experience to constraint panning to the y axis
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/pull/1150#issuecomment-195464046.
  I think there is a typo in the Animations documentation for the fading cube example.

Currently:

``` html
<a-entity id="fading-cube" geometry="primitive: box" material="opacity: 1">
  <a-animation attribute="material.opacity" begin="fade" to="2 2 2"></a-animation>
</a-entity>
```

The `to="2 2 2"` should be `to="0"` or `to="0.0"` I think?

I can throw up a PR to fix it.
  vec2 only showed up in 4 places in the repo, two were commented out examples and the other two were the switch where Vector2 is created with threejs in src/core/shader and the other is where vec2 is initialized in src/core/propertyType.

I installed and ran aframe after I made changes and opened up a few of the boiler plates and showcase (figuring lightroom would have plenty of shaders in it).

@larouxn also tested saying: "Cloned it myself. Ran the npm test tests, started the server, and checked out a few examples. No errors anywhere as far as I can tell."
 @ngokevin and @dmarcos thanks for helping me clean up this mess!
  I would argue .DS_Store and node_modules are unnecessary additions as they're already in the .gitignore and thus can never be committed in the first place. However, .npmignore is a good addition.
  vec2 only showed up in 4 places in the repo, two were commented out examples and the other two were the switch where Vector2 is created with threejs in src/core/shader and the other is where vec2 is initialized in src/core/propertyType.

I installed and ran aframe after I made changes and opened up a few of the boiler plates and showcase (figuring lightroom would have plenty of shaders in it).

@larouxn also tested saying: "Cloned it myself. Ran the npm test tests, started the server, and checked out a few examples. No errors anywhere as far as I can tell."
  vec2 only showed up in 4 places in the repo, two were commented out examples and the other two were the switch where Vector2 is created with threejs in src/core/shader and the other is where vec2 is initialized in src/core/propertyType.

I installed and ran aframe after I made changes and opened up a few of the boiler plates and showcase (figuring lightroom would have plenty of shaders in it).
 Cloned it myself. Ran the `npm test` tests, started the server, and checked out a few examples. No errors anywhere as far as I can tell.
 Thanks @larouxn! Opened a pull request for this against the Master branch.
  Added a .npmignore that stops `npm install` from downloading the tests and examples folders. Do we still want tests cloned via npm? Do most users embedding A-Frame in their project use the tests? Is there anything besides examples that we want ignored? I suppose the ignoring may be able to be done within the package.json instead.

Note: this does not stop `git clone` from grabbing tests and examples.
  - fix reference to the component
- fix tag copy/paste typos
- close tags
  Chrome on Android ( Moto X 1st gen ) works!

48.0.2564.95
 Just got a report it's not working on iPhone 6S
 ```
On Android, stereo upon clicking the "Enter VR" button is not working
```

Worked for me o_O
 I tested Chrome 48.0.2564.95 on Android (Nexus 5x) and entering VR caused the app to go full screen, but no stereo.

On Firefox 45.0 for Android, entering VR caused a crash report dialog. Still trying to figure out if I can get a stack trace from the example before it goes down.
 Any progress on this? I'm noticing that on my iPhone 6S the latest aframe does not do splitscreen.
  Good day,

How i can disable on passing through objects or plane?
  @cvan But `x-tag` requires additional polyfills for mainstream browsers for now. Maybe too early to use this name?
  Same to https://github.com/aframevr/aframe/pull/1119
 @larouxn I am going to answer you here of #1119 why. If you have `npm install` before, then you are using a v1.1.0 which defines their dependencies more explicitly, This is, you have `lolex` and some other ones installed before. Now they shifted to v1.2.0 and only put them into `peerDependencies` that wouldn't install by default. A fresh install would reproduce.
  yeah, the third time :0
 @ngokevin Shall rebase soon.
 All cleared.
   You may want to reopen this PR against Master. The Dev branch was deprecated yesterday. [397e05d](https://github.com/aframevr/aframe/commit/397e05dd83535023eb5f07dde7549f45eb0b845b)

Strangely, I wasn't able to reproduce the `Error: Cannot find module 'lolex'` error running `npm test`.
 Thanks for the notification. Will open another!
  - Centers the "Insert phone into Cardboard holder." text. (Fixes #878)

![Orientation Modal](http://i.imgur.com/OoBjlXx.jpg)
  I propose adding a `fit-texture` component, that automatically scales planes with textures (eg. `a-image`) to fit the image texture without distortions.

Right now, the user has to manually set the width and height if they don't want the image to appear stretched. This is not ergonomic or intuitive, as newcomers to aframe would possibly expect the behaviour of standard html `img` elements, that display images undistorted. Even with the knowledge, it's not really efficient to set dimensions by hand.

The `fit-texture` should be applied to `a-image` by default and can optionally set to other `a-entitites` and may be disabled on `a-image`'s by setting`fit-texture="false"`.
It is possible to set only one side (width or height), and the component will scale the other one accordingly.
If both sides are set, the component will use `width` as base side and emit a warning that it doesn't make sense to set width and height, unless you set `fit-texture="false"`.

I kept thinking wether it is necessary to merge this component into master or not. But I think it adds much needed comfort to use image textures in aframe. Take a look at `examples/primitives/images`!
In future, we might want to approach this differently, but at the moment I thought I'd leave this here for you to discuss/decide :)
 @ngokevin 

> Then maybe once we have lazy-loading curated components, this won't even need to be a standard component. Does that sound alright?

The lazy-loading for curated components sounds really interesting!
But somehow I still feel images and videos should default to being un-stretched/un-distorted, how ever this may be accomplished in the end (this component or else). But I also understand that you want to keep the core functionality to a certain limit and avoid potential clutter.
Not so easy, but that's why I opened this issue, to discuss how to deal with this.

PS: With some minor adjustments the component should work for video textures too.
 @dmarcos You are right, it's more problematic with non-rectangular geometries.

> If we are going to implement a fit-texture it should be implemented at the material component level`

I was wondering about that. The _fit-texture_ functionality needs to change the geometry (width/height eg), so that the texture fits nicely. Now, If implementing _fit-texture_ into _material_ as you suggest,  _geometry_ would need to know, wether there is a texture loaded, and if thats the case, use its properties to apply changes. Unless we want to change geometries from inside _material_, which I am not sure about, wether thats good/clean.

Would it therefore not be better to make it a part of the `geometry` component, instead of the `material` component? like so:
- if _material_ loads a texture, save it (or it's dimensions) somewhere.
- if _geometry_ updates at some point, it takes a look if it has a _fit-texture_ property/attribute (or registers a listener for texture changes?)
  - if _geometry_ has _fit-texture_: check if there is a saved texture.
    - if there is a saved texture: use it to apply transformations based on the specified geometry (plane, sphere, torus)

What do you think? From an user point of view, it feels more intuitive to use _fit-texture_ via the _material_ component. But from an implementation pov it makes more sense to do it inside _geometry_? Does that make sense?
 @ngokevin personally I disagree, but that's totally ok :)
Had a lot to do recently and got distracted with other projects and haven't had this PR on my mind anymore. Will do some more fun stuff with aframe again in the future though!
 @ngokevin 
I understand your reasoning, and in your shoes I might have decided the same way.

> Would be awesome if you can publish it in a repo or code snippet!

Sure thing, I put it on my todo list!
 Here you go, the NPM package: https://www.npmjs.com/package/aframe-fit-texture-component
github repo: https://github.com/nylki/aframe-fit-texture-component)
    a-entity's `removestate` expects `is` to return the index of the state it's searching for (or false if not found). Change 46990787ada92f62af3ddde1869a077125107811 updated `is` to return true if the state is found rather than the state's index, which breaks `removestate`. Now, `removestate` does not remove the correct state if the state exists.

I think the fix here is to revert 46990787ada92f62af3ddde1869a077125107811.

This issue effects the cursor's hover functionality, and likely other important scenarios that rely on state changes.
  replace PR #1082
 squarshed em!
  There's no option to disable video loop. Please add `loop="false"`.
  Example:

```
<a-sky class="pano" opacity="1" position="-9999" transparent="true" id="pano-1" src="/pano-0.jpg?1a2f7bc" material="color:#FFF;shader:flat;src:url(/pano-0.jpg?1a2f7bc);opacity:1;transparent:true" geometry="primitive:sphere;radius:5000;segmentsWidth:64;segmentsHeight:64" scale="-1 1 1">
</a-sky>
<a-sky class="pano active" opacity="0" position="0" transparent="true" id="pano-2" src="/pano-00.jpg?fdf7a6f" material="color:#FFF;shader:flat;src:url(/pano-00.jpg?fdf7a6f);opacity:0;transparent:true" geometry="primitive:sphere;radius:5000;segmentsWidth:64;segmentsHeight:64" scale="-1 1 1">
</a-sky>
```

In the code above `#pano-1` won't show. Instead, you'll see only white (`#pano-2`'s white shader?).

Is this a bug or `a-sky` can't be transparent?
 I ran into the same issue recently. While I'm not sure if it is supposed to be possible to set opacity on a-sky elements, creating a plain a-entity that worked like an a-sky ended up working for me:

``` html
<a-entity id="sky" geometry="primitive: sphere;radius: 5000" material="side: back; src: url(./pano.jpg); repeat:-1 1" ></a-entity>
```

You should then be able to change the opacity by doing something like:

``` javascript
document.querySelector("#sky").setAttribute("material", "opacity", 0.5);
```
 @ngokevin , I don't see how your point is pertinent to the transparency issue. I am still experiencing this. Can you reopen this card?

I tried the @K4orta solution, didn't work.

I also built my own shader, and as soon as the opacity is less than 1, the object disappears from the scene. The only way to fix this is setting the material="depth:false", but this generates other problems for me.


It is not related to the shader or the geometry, it is something related to the render :( Thanks for clarifying @donmccurdy. 

For my case, where I have several a-sky switching opacity when a user interacts, some of them with transparent PNGs and others with transparent 3D objects, I think I will leave the issue behind, I spent 2 days trying to fix this :( There seems to be no perfect solution.  - Fix the Enter VR Modal so that it stays open when trying to click the Learn More link.
- Fixes #1093

![VR Modal](http://i.imgur.com/JKfjlus.gif)
   Is it possible to do this in some way? I noticed that using normal CSS doesn't work.

How to, for example, hide and show the elements with CSS?
 @dmarcos Oh, okay. Thanks for the info (I found out though that the attributes for `material` are exactly like CSS. So I'm using those.)
 > properties on CSS are discarded by many browsers

@dmarcos Is that statement outdated? MDN says that [all the modern browsers support custom properties](https://developer.mozilla.org/en-US/docs/Web/CSS/--*#Browser_compatibility).

> We would have recreated CSS with complete different semantics.

That's totally fine. For example, SVG has `fill`, `stroke`, `stroke-width`, etc, which are SVG-specific. A-Frame-specific properties would be fine.

> background, padding or border have unlabeled complex values but it would be very confusing in the case of components

Instead of `background` you might have `--material-texture`, etc.

Just an idea, but

```html
<a-entity light="color: #AFA; intensity: 1.5" position="-1 1 0"></a-entity>
```

could be written as

```css
/* apply to all a-entity elements  */
a-entity {
  --light: color: #AFA, intensity: 1.5;
  --position: -1 1 0;
}
```

With simple parsing of the property values, you'd apply them just like with attribute values. This is, in fact, very similar to SVG where some features that can be specified via attributes can also be specified via CSS. In SVG:

```html
<rect transform="rotate(45 50 50)"></rect>
```

or

```css
/* apply to all rects in a similar way with CSS */
rect {
  transform: rotate(45deg) transform-origin: 50px 50px;
}
```

---

TLDR: it's totally doable from what I can tell! By the way, I saw @ngokevin's MSS, which is similar and useful!

I also forgot to mention that it's simple to get the property values to JS: 

https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_variables#Values_in_JavaScript

This could be done in a `MutationObserver` callback that observes a stylesheet for changes. > Have you tried a MutationObserver on a stylesheet? I could not apply them to CSSStyleRule elements.

I believe you'd have to watch for changes in `characterData`.

> What would be the advantage of using CSS over the current mixins mechanism?

Maybe that the property syntax is official, part of CSS, so more flexible. One example: styles for regular elements as well as a-frame elements can be contained inside a single stylesheet. There's existing tooling for CSS (stylus, less, sass, postCSS, JSinCSS, etc).

> Why does `visibility: hidden;` not work? Mixins are close enough to CSS, we can break expectations and we don't have to support all the functionality and intricacies of traditional style sheets.

That's true and a good point. It's not easy to tell Custom Elements how to behave whenever they have `display: none` if those elements render with WebGL rather than with normal DOM styling. Downsides are less tooling for MSS and something new to learn (a designer may already know CSS, and now needs to learn MSS). Regardless, MSS is super nice, I definitely have to say! Inspiring. :)  There was a space in the `wasd- controls-enabled` attribute which ended up evaluating to `wasd-="" controls-enabled="false"` which isn't valid.
 It looks like it's already fixed on master :sweat_smile: 
  - Fix the Enter VR Modal so that it stays open when trying to click the Learn More link.
- Fixes #1093 

![VR Modal](http://i.imgur.com/JKfjlus.gif)
 Sure thing!
  I can't do local ci testing using latest node.js and npm. It's reported in https://github.com/aframevr/aframe/issues/1097 and might have been fixed in https://github.com/aframevr/aframe/pull/1098.

So I switched to node v0.12 as online travis does then everything goes fine.
 Redundant nodes cleared :)
 > I can't do local ci testing using latest node.js and npm.

Doing `npm install lolex chai sinon sinon-chai` after the regular `npm install` fixed it for me. Might have to be added to `package.json`.
 @dmarcos Fedora 23.
~~Will file an issue.~~ edit: @legendtang was faster: #1097
 Here we go for this! We need a better way to stringify those types indeed.
 Close due to dev deprecated.
  Enabling manipulations of objects based on loaded texture, like actual/native image width and height.

You could do stuff like:

``` .html
<a-image id="testimg" width="10" src="test.png"> </a-image>
```

to set the base width of the image, and then:

``` .js
var testimg = document.getDocumentById('testimg')
testimg.addEventListener('material-texture-loaded', function (e) {
  var widthHeightRatio = e.detail.texture.image.height / e.detail.texture.image.width
  var width = testimg.getAttribute('width')
  testimg.setAttribute('height', width * widthHeightRatio)
});
```

To dynamically set the height to fit the image texture.
I am testing this behaviour in a component called `fit-texture` to make `a-images` etc. automatically fit the image texture once it's loaded, without explicitly setting `width` and `height`.

Btw: We need a way to let the user to use image textures without them having knowledge about the actual dimensions of an image to look good when rendering. The example above is a bit hacky my taste, but works until we have a better solution.

Either way, It's useful to have the texture in the event detail.
 @dmarcos done! Haven't done commit squashing before, learned a new thing today :)
  When I run `npm test`, here is the output: 

```
> aframe@0.2.0 test E:\github\aframe
> karma start ./tests/karma.conf.js

06 03 2016 01:57:17.760:INFO [preprocessor.env]: Publishing variables:  [ 'TEST_ENV' ]
module.js:341
    throw err;
    ^

Error: Cannot find module 'lolex'
    at Function.Module._resolveFilename (module.js:339:15)
    at Function.require.resolve (internal/module.js:23:19)
    at framework (E:\github\aframe\node_modules\karma-sinon-chai\index.js:26:40)
    at Array.invoke (E:\github\aframe\node_modules\di\lib\injector.js:75:15)
    at get (E:\github\aframe\node_modules\di\lib\injector.js:48:43)
    at E:\github\aframe\node_modules\karma\lib\server.js:138:20
    at Array.forEach (native)
    at Server._start (E:\github\aframe\node_modules\karma\lib\server.js:137:21)
    at invoke (E:\github\aframe\node_modules\di\lib\injector.js:75:15)
    at Server.start (E:\github\aframe\node_modules\karma\lib\server.js:102:18)
    at Object.exports.run (E:\github\aframe\node_modules\karma\lib\cli.js:243:26)
    at Object.<anonymous> (E:\github\aframe\node_modules\karma\bin\karma:3:23)
    at Module._compile (module.js:413:34)
    at Object.Module._extensions..js (module.js:422:10)
    at Module.load (module.js:357:32)
    at Function.Module._load (module.js:314:12)
npm ERR! Test failed.  See above for more details.
```

I noticed it was reported in https://github.com/kmees/karma-sinon-chai/issues/26 and the latest version has fixed the issue. So it is time to bump this dependency version?
 In the meantime, doing a manual `npm install lolex chai sinon sinon-chai` worked for me to start `karma`/`npm test`.
 @ngokevin From what I've seen, the v1.2.0 of karma-sinon-chai doesn't fix that issue since they use `peerDependencies` instead of `dependencies`. As @nylki said, we need to add them as more explicit dependencies.
   @dmarcos It is. Those had been fixed and I noticed that this should be merged into dev. I'll open another one.

Thanks!
   I ended up installing semistandard with `npm install -g` and was able to run that manually to get some feedback with `semistandard -v`, but `npm run lint` yields nothing.

I'm running git bash (MINGW64) FYI
  @ngokevin `THREE.AudioListener` is already implemented for sound component can this be closed or did you mean something else?
   maybe I'm crazy. I could swear `this` evalutated to `window` when not binding. object.fn.call(object) is indeed equivalent to object.fn()
   I can run the lint task by itself but it doesn't output anything. I had to commit with --no-verify. Not sure if it's a Windows thing. Will investigate.
  I just did `npm install aframe` and I get the following errors:

```
ERROR in ./~/aframe/index.js
Module not found: Error: Cannot resolve 'file' or 'directory' ./package in E:\alex\istaging-viewer\node_modules\aframe
 @ ./~/aframe/index.js 3:10-30

ERROR in ./~/aframe/~/aframe-core/src/index.js
Module not found: Error: Cannot resolve 'file' or 'directory' ../package in E:\alex\istaging-viewer\node_modules\aframe\node_modules\aframe-core\src
 @ ./~/aframe/~/aframe-core/src/index.js 16:10-31
```

The error is right there isn't any `./package` folder. As for she other error, I'm not sure what's going on.

(As you can see in this screenshot: http://stackoverflow.com/questions/35763019/why-is-that-i-can-import-one-npm-package-and-not-the-other-webpack-setup the folder doesn't exist).

Do I have to do something else aside of `npm install aframe`?
  I just did `npm install aframe` and I get the following erros:

```
ERROR in ./~/aframe/index.js
Module not found: Error: Cannot resolve 'file' or 'directory' ./package in E:\alex\istaging-viewer\node_modules\aframe
 @ ./~/aframe/index.js 3:10-30

ERROR in ./~/aframe/~/aframe-core/src/index.js
Module not found: Error: Cannot resolve 'file' or 'directory' ../package in E:\alex\istaging-viewer\node_modules\aframe\node_modules\aframe-core\src
 @ ./~/aframe/~/aframe-core/src/index.js 16:10-31
```

The error is right there isn't any `./package folder`. As for she other error, I'm not sure what's going on.

(As you can see in this screenshot: http://stackoverflow.com/questions/35763019/why-is-that-i-can-import-one-npm-package-and-not-the-other-webpack-setup the folder doesn't exist).

Do I have to do something else aside of `npm install aframe`?
 @ngokevin Thanks. That dev version works fine.
  Calculate distance to object & move camera around object with fixed distance
 Apologies - forgot to label (feature request)
 @subsumo if you wanted to take a shot at this, a small component wrapping THREE.js's [Orbit Controls](https://github.com/mattdesl/three-orbit-controls) might be the way to go.
 Thanks guys, I'm on it
  +1
  Detaching an animation from the DOM kept the event handlers registered, resulting in the animation still being triggered even if it had no DOM parent.
 @ngokevin Yep, I'm trying to setup the test environment on my machine and writing some tests for that behaviour.
 The issue is a little bit deeper / more complex than anticipated by this hastly PR.
  Hi, to everyone!!!! Wouldn't be nice to work a-frame with knockout.js? I mean if there was an example where the properties of the a-frame objects were binding with knockout.js models.....
  Why not use the same conventions like Borismus webvr-boilerplate ? Like the icons more too.

I'd like mobile non-vr fullscreen as well

having something that can be styled within the html page would be nice too.
  **I bumped to same problem with 0.7.0.**

Component init is called twice when primitive has `component` under `defaultComponents` and mapping keys to same `component`  :thumbsup: Thank you!
 Wakelock is not working for me either: Nexus 5X, Android 6.0.1, Chrome 58.3029.21, A-Frame 0.5.0  Fixes #848.
 I think another component makes sense - but my vote would be for pointer lock to be the default interaction component on desktop. The drag-to-look is an inferior user experience imo.
 I think first-person-controls should be WASD + mouselook on desktop, cardboard stereoscopic on mobile. Do you have a locomotion solution on mobile?
 re: @ngokevin (https://github.com/aframevr/aframe/issues/1060#issuecomment-191054349)

When you're in VR you probably want pointerlock to only rotate the Y axis to allow sitting down experiences. Outside of VR you want pointerlock to be the replacement of the HMD so full axis rotation.
 I disagree with @dmarcos, I think pointerlock is suitable all the time, not just fullscreen, but I'm happy to make a seperate component for proper pointerlock + wasd + arrow keys (for the germans) and we can abandon this PR.
 Ok cool, let me know what the plan is :D
 I've been playing with the pointerlock in the scenevr editor, and there's a few things that need a change:
- It shouldn't grab mouse on right click
- It shouldn't fire the click event on objects when clicking to get focus
- If you grant 'always allows' permission in firefox, you have to left click then hit escape to get pointerlock (I dunno if theres a way around this, it is fine in chrome)

Shall I make pointerlock a setting on look-controls? 

`look-controls="pointer-lock: true"`

I think it's a shame if most people don't enable it by default, but we can only recommend people enable it in their scenes.
 Sweet sounds good, I'll try to remake the pointer lock controls as a
component.

On Thursday, 24 March 2016, Kevin Ngo notifications@github.com wrote:

> Going to close for now to checkout #975
> https://github.com/aframevr/aframe/issues/975 first, and since this PR
> has gone a bit off-track. But we still do want pointer lock as an option,
> just not sure if it will be part of a look-controls component.
> 
> —
> You are receiving this because you were mentioned.
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/pull/1056#issuecomment-200536432

## 

Regards,
Ben Nolan

http://bennolan.com/

skype: bennolan
cell: +64 21 770 662
 @bnolan if we go in the direction of #975, I've merged this PR into that refactor [here](https://github.com/donmccurdy/sandbox-aframe/blob/master/src/controls/mouse-controls.js).
  A-Frame: fe79cca5cd919b959135fe01faf2bba490ee2096

Launching WebVR with the goggles goes into full screen but does not launch the stereoscopic screens.
 I just checked out 476f406 from cvan/aframe and it does not seem to fix the issue. 
 I did. It had installed 1.09 and it didn't work. I installed 1.07 as well just to see but no dice. 
 Moto X first generation
 Reporting in on this issue: I experienced the same full screen but no goggles issues using a Nexus 5X (Chrome) and an iPhone 6S (Safari).
 It also appears like the cursor isn't centered anymore ( appears at the top of the window when switching VR on)
    Seems to work on latest dev.

```
    let position = new THREE.Vector3(0, 0, 0);
    this.el.setAttribute('position', position);
```
 Cool, I'll add support for arrays.
 :+1: 
 As a dev who's been doing some hobby game creation, I'm pretty used to indexes in arrays of three items being used for `[x, y, z]` co-ordinates, so I it'd be useful; to have.
 In math too, you have a Euclidean vector defined by the order of components. It's never [z, y, x]. The order is pretty much consistent across the board. 
  How do you guys feel about this? I know it still needs some work. I'm not super happy about passing a string of "x1 y1 z1 x2 y2 z2 x3 y3 z3" and it could be a bit more robust considering all the possible errors parsing input.

Does this make sense for core or should it be a separate a-frame component?
 Sounds good to me!

On Tue, Mar 1, 2016, 19:24 Kevin Ngo notifications@github.com wrote:

> But it can be separate component until then!
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/pull/1046#issuecomment-191007747.
  Seeing the same thing:

```
WARNING in ./~/aframe/dist/aframe.js
Critical dependencies:
1:479-486 This seems to be a pre-built javascript file. Though this is possible, it's not recommended. Try to require the original source to get better results.
 @ ./~/aframe/dist/aframe.js 1:479-486
```
 Fix this by adding this into your webpack config under `module`:

``` javascript
module: {
    noParse: [
      /node_modules\/aframe\/dist\/aframe.js/, // for aframe from NPM
      /node_modules\/cannon\/build\/cannon.js/, // for aframe-extras from NPM
    ],
    loaders: [
    // ... your loaders here ...
    ]
}
```
 For those still seeing this error: Using the full absolute file path to the file `aframe-master.js` in your node_modules should work. For example:

```
noParse: [
    '/node_modules/aframe/dist/aframe-master.js',
]
```

Tested on:
- "aframe": "^0.5.0"
- "aframe-react": "^4.2.4"
- "webpack": "^1.13.1"
  Hello!

There are build errors when requiring aframe in a JS file after installing via npm (for use with something like aframe-react). Lines 10-14 in 'aframe-core\lib\three.js' have requirements for aframe's local npm installation of three-dev, pointing to '../node_modules/three-dev'. However, when aframe is installed via npm, three-dev is installed in the project's node_modules, causing the below errors:

ERROR in ./~/aframe-core/lib/three.js
Module not found: Error: Cannot resolve 'file' or 'directory' ../node_modules/three-dev/examples/js/loaders/OBJLoader in C:\Personal Items\Projects\episode-one\node_modules\aframe-core\lib
 @ ./~/aframe-core/lib/three.js 10:0-66

ERROR in ./~/aframe-core/lib/three.js
Module not found: Error: Cannot resolve 'file' or 'directory' ../node_modules/three-dev/examples/js/loaders/ColladaLoader in C:\Personal Items\Projects\episode-one\node_modules\aframe-core\lib
 @ ./~/aframe-core/lib/three.js 11:0-70

ERROR in ./~/aframe-core/lib/three.js
Module not found: Error: Cannot resolve 'file' or 'directory' ../node_modules/three-dev/examples/js/controls/VRControls in C:\Personal Items\Projects\episode-one\node_modules\aframe-core\lib
 @ ./~/aframe-core/lib/three.js 13:0-68

ERROR in ./~/aframe-core/lib/three.js
Module not found: Error: Cannot resolve 'file' or 'directory' ../node_modules/three-dev/examples/js/effects/VREffect in C:\Personal Items\Projects\episode-one\node_modules\aframe-core\lib
 @ ./~/aframe-core/lib/three.js 14:0-65

Removing the '../node_modules' from the requirement works for my case. Will this still allow the project to build when installed without npm?
  Fixes #1038 
  It would be nice to be able to register custom property types. This would enable things like 

``` javascript
  schema: {
      enabled: { default: true },
      templates: { type: 'array', default: [] },
      timing: { type: 'range', default: [0, 50] }
    },
```
 Having to do ...

``` javascript
    schema: {
      enabled: { default: true },
      templates: { default: '' },
      timing: { default: '0 50' }
    },

    update() {
      this.data.templatesReal = this.data.templates.split(' ');
      this.data.timingReal = this.data.timing.split(' ');
    },
```
 Thanks! Please consider adding an array default type though. 
 I'll get that together tonight or tomorrow. Thanks again.
  It would be great if videos could be streamed to aframe instead of the entire file. Is this possible? 
 +1
  Right now, there can be conflicting animations running. Imagine you have two animations:
- a animation that triggers on `click` that has a duration of 4 seconds and scales an element up
- another animation that triggers on `mouseleave` and scales that element back to its original size in 1 second

Once the user clicks on the element, the element animates, eg. 2 seconds, but then the user decides to cancel the zoom/scale by moving the cursor out. The second animation then triggers and scales the element back to the initial size. So far so good.

However, the first animation is still running in the background! And will eventually fullfil its animation by setting the element to the increased scale, Which results in a strange flicker because the other element scales down. etc.

I propose automatically cancel sibling animations that modify the same attribute.
Additionally, there could be a `cancel-other` attribute to `animation` that simply cancels other animations in the same scope.
 I would imagine the `end` attribute needs to support multiple events, as well. For instance, given #857, this type of scenario will inevitably surface:

```
<a-animation
    attribute="opacity" begin="mouseenter" to="1" dur="1000"
    end="mouseleave, custom-stop-event, ...">
</a-animation>
<a-animation attribute="opacity" begin="mouseleave" to=".25" dur="1000"></a-animation>
```

Edit:
After reviewing the code, this is already available with `begin`, and `end` would simply work the same.
  Currently in `dev` branch (at least in the built version under `dist`) animations are always triggered when the scene loads, regardless of `begin` attribute. After one run, the animation behaves as expected (i.e. triggered only by the event in `begin`).

This is not happening in the latest official release.

Example of animation:

```
<a-animation attribute="scale" begin="play" dur="500" direction="alternate" repeat="1" from="1 1 1" to="1 2 1"></a-animation>
```

Live example: https://jsfiddle.net/Lc42h36f/1/
  This commit broke mobile VR for me. I'm on Samsung Galaxy Note5. When entering VR mode, the screen goes into landscape, but it's fullscreen, not side by side.
 @meta-meta https://github.com/aframevr/aframe/pull/1065 should fix this.

EDIT: reported here: https://github.com/aframevr/aframe/issues/1052
 Oh cool! Should have searched the issues instead of git-bisect :-)
  Fixes #975.

More comments there. Issue is that `gamepad-controls` and `look-controls` are incompatible on the dev branch, and it's not something I can work around within my component.

I could also package my own fork of `look-controls` _into_ `gamepad-controls`, and that would be fine, or not sure if you all want to embed gamepad support officially into A-Frame?

In any case though, it would take some change like this (where both controls are passive when inactive), or else the two controls need to be aware of one another, which gets messier.
 sort of, but with [a few issues](https://github.com/aframevr/aframe/issues/975#issuecomment-189099197). 
 Cool! I guess I assumed that would be too much of a refactor to consider right now, but I can clean up that solution and get a PR to review/consider later today or tomorrow.
  I am using the `texturePromises` array to store a promise that resolves to the texture once the image is loaded by three.js.
To emit the `textureLoaded` event, a `.then` is added to the `texturePromises[src]`.
 Hey @dmarcos  @ngokevin. I made changes according to your comments. @dmarcos the indentation in the line is correct (because of the Promise resolver function).

I also added the `material-texture-loaded` event to video texture loading, and added a `video-ended` event.
 So many comments!
I renamed the event and added a new entry to the docs.

Regarding tests:
I'd be happy to include a test, but I am not sure how you are doing it, I have only had some moderate experience with _mocha_. Also I am not sure what should be tested here (testing if event is actually triggered?).
 Hey again,
@dmarcos The emitted event now yields an object as detail: `{src, element}`. For image sources there would be only a `src`, for video sources the event returns `src` and `element`. I figured for consistency reasons it would be better to use an object here and always include `src`, although you could get it via the video element. This way you can simply do stuff with `event.detail.src` without worrying if it is a video or image.

@ngokevin I added a small test and However I am not able to run the unit tests here (`Error: Cannot find module 'lolex'
` on `npm test`). I added a test.jpg to the test directory to have a valid `src`, hope that's ok.
 > do you have your devdeps installed for testing?

Should have. But `npm install` yields some warning: 

```
npm WARN optional Skipping failed optional dependency /chokidar/fsevents:
npm WARN notsup Not compatible with your operating system or architecture: fsevents@1.0.8
npm WARN optional Skipping failed optional dependency /babel/chokidar/fsevents:
npm WARN notsup Not compatible with your operating system or architecture: fsevents@0.3.8
npm WARN chai-shallow-deep-equal@1.4.0 requires a peer of chai@>= 1.9.0 but none was installed.
npm WARN karma-chai-shallow-deep-equal@0.0.4 requires a peer of chai@* but none was installed.
npm WARN karma-sinon-chai@1.2.0 requires a peer of chai@^3.2.0 but none was installed.
npm WARN karma-sinon-chai@1.2.0 requires a peer of lolex@^1.4.0 but none was installed.
npm WARN karma-sinon-chai@1.2.0 requires a peer of sinon@^1.17.2 but none was installed.
npm WARN karma-sinon-chai@1.2.0 requires a peer of sinon-chai@^2.8.0 but none was installed.
```
 @dmarcos yep its the new test i added that fails, but unfortunatelay I have problems with the test environment. ~~Maybe someone of you can take a look at the test. (Maybe the path to the real image is wrong)~~
fixed it!
 @dmarcos passing now.
 @dmarcos phew, should have created this PR after your changes :)

Just took a look at the changes.
There are now flat/standard shaders, which both use `loadImageTexture()` via their own `loadImage()` function that are identical. This is no problem, as your loadImage() functions are very concise, but if I would copy paste my loadImage() functions to both files, it's a bit too much redundancy for my taste.

To reduce unnecessary redundancy I thought about defining `loadImage()` in _texture.js_ and export it to be used as `utils.loadImage()` in both shader files, where it is being called via a `bind()`.

This version is now commited for you to review. I could do the first approach, if you prefer to have individual `loadImage()` and `loadVideo()` functions to each, _flat.js_ and _standard.js_. I prefer the commited approach.
  ^ Both FF and Chrome will throw uncaught exceptions within promises. Unfortunately the old polyfill library was polyfilling Chrome even though it had native Promise support.
 Done.
 Fixes #796 btw.
 I prefer using global within the browserify environment as it maps to window and would still work in a node environment.
 @dmarcos the other polyfill was checking "Object.prototype.toString.call(P.resolve()) === '[object Promise]'", which came out as [object Object] in Chrome. Technically you could still use the other library as long as we did the polyfill check ourselves.
 Its kinda funny because we only need this polyfill to support IE http://caniuse.com/#feat=promises
  If calling `getAttribute('rotation')` on a camera, it returns `null` unless the camera element has the attribute `look-controls`.

Example: https://jsfiddle.net/mqt8dtLL/

I don't know if this is expected behavior, but if it's not a bug at least it would be nice to have it documented.
 Thanks @ngokevin 

One question, I'm tinkering with A-frame and reporting the bugs I'm seeing. Do you prefer me reporting bugs over the latest release, or over the `dev` branch? 

Cheers!
  Hi all, 

I want to tell a image-based story in VR, by using multiple images with sound following each other. It should be so that the user can "click" or gaze at an object to see a new image with new sounds (to achieve viewing from another perspective). One solution could be redirecting to a new page with new html, but I don't see a possibility to add those interactions. Is it possible to achieve this? 

Or is it possible to fade from one a-scene to another?

Thanks,
Dylan
 I'm sorry, it's the latter: different scenes. 
So it would be possible to gaze at an object and change (show/hide) entities like a-sky and a-entity with sound? That would create a new "scene". 
 Until multiple scenes are supported, you could certainly do something like:

``` .html
<!doctype html>
<html>
<head>
  <title>multiplse pseudo scenes</title>
  <script src="aframe.min.js"></script>
</head>
<body>

  <a-scene>

    <a-camera position="2 0 3">
      <a-entity cursor="fuse: true; maxDistance: 30; timeout: 1000">
      </a-entity>
    </a-camera>

    <a-entity id="scene1">
      <a-cube color="red" onclick="nextScene()"> </a-cube>
    </a-entity>

    <a-entity id="scene2" visible="false">
      <a-cube color="green" position="0 2 -5"> </a-cube>
      <a-cube color="yellow" position="5 0 -5"> </a-cube>
      <a-cube color="blue" position="0 0 -1"> </a-cube>
    </a-entity>

  </a-scene>

  <script type="text/javascript">

  function nextScene() {
    document.getElementById('scene1').setAttribute('visible', 'false')
    document.getElementById('scene2').setAttribute('visible', 'true')
  }
  </script>

</body>
</html>

```

Instead of setting the `visible` attribute in the `onclick` function, you could also add `a-animation`'s to eg. trigger transparency etc.
 @dlnkprs btw. I just updated my code above to include cursor/click behaviour.
 @nylki thank you for the code provided. It works perfectly. Even with sound being played only when clicked: 

`<a-cube color="red" position="-2 0 0" onclick="start1()" sound="src: radioactiveshort.mp3; on: click"> </a-cube>`

However the fuse doesn't work. It's essential for the experience (not having to leave the environment to touch the screen on mobile). Is there a way to achieve the following effect? (recorded from JauntVR app)

![Image of Yaktocat](http://i.giphy.com/3o6gb181K4CMOUoLQI.gif)
 @dlnkprs A-Frame is still in heavy development, so it should work in the future, but I noticed some glitches with the fuse cursor as well.

You may want to try the dev branch though, it includes many improvements and new components.
If you use _npm_ you can do `npm install mozvr/aframe#dev`.

I did a small demo for you (using the dev branch of aframe) showing the _fuse_ cursor and `a-animation`'s to fade in/out the pseudo-scenes:
http://codepen.io/anon/pen/pyzjPL
 Hi @dlnkprs, do you mind me asking how you did that animation around the button? I really like that experience! Cheers. (sorry I know it's off topic) 
 Cool thanks heaps @ngokevin 
  I would like to view 3D 360 video using a-videosphere.  Here is an example video (side-by-side).

http://hosting.360heros.com/3D360Video/3D360/Demo3-House/3DH-Take1-Side-By-Side-1920x960.mp4
  While .mp4 does work as a video source for a-videosphere,   HLS m3u8 video stream does not.
 +1
 +1
 I have the same problem, and I already spent 2 weeks. Should I just wait APPLE to change it?
  Helpful to know when model assets have finished loading.

For example, to get @ngokevin's shadow component working with .OBJ models:

``` javascript

module.exports = {
  schema: {
    cast:     { default: false },
    receive:  { default: false }
  },

  init: function () {
    this.update();
    this.el.addEventListener('modelloaded', () => this.update());
  },

  update: function (previousData) {
    var data = this.data;
    // Applied recursively to support imported models.
    this.el.object3D.traverse(function(node) {
      if (node instanceof THREE.Mesh) {
        node.castShadow = data.cast;
        node.receiveShadow = data.receive;
      }
    });
  },

  tick: function () {}
}
```
 Oh, looks like there's a very similar change in #961 — no particular preference about the event name.
 (was originally requested by https://github.com/donmccurdy/aframe-obj-loader-component/pull/2)

'*load' or '*loaded' both seem fine.

As far as prepending "obj" and "collada", the only hassle would be needing to listen for unique events from each different model format. Could also do `emit('modelloaded', {format: 'obj', model: object})` though.
 :+1: 
  Only getting a few frames per second on a modern PC / Nvidia 970 system both on desktop monitor and via Rift DK2. All other a-frame examples work smoothly except for this. I tried navigating to the source mp4 video and it plays back fine at a high framerate so it's not the source image. Is it just me or are there known performance issues with videosphere?

Referring to this https://aframe.io/examples/showcase/

Update, tried another site and this site works at full framerate so it may be something to do with the aframe example itself:
http://x627.com/vr-gif/
much better (smooother) on my machine than the above

Using firefox nightly  47.0a1 (2016-02-21)
  `this.listener.context.close()` is all that's needed to free up the Audio Context and allow more sounds to be loaded when loading and removing sounds dynamically.

Seems like we want to remove the sound and listener from the scene as well to free resources. Does this happen automagically?
  I would like to use a-frame in the desktop browser (firefox)
- without headset
- with a stereo monitor/tv (preferably line-interleaced left/right separation)
- with the possibility to view stereo-3d images, e.g. side-by-side JPEGs or MPOs created by stereo photo cameras.

I tried it with Firefox nightly (47.0a1), but when I click on the "start vr" icon there happens nothing, except that the icon dissapears.

As said, I have no headset connected. I could have access to a Zeiss Cinemizer Oled. Is this suppurted as well ? AFAIK this behaves like a stereo capable monitor.
 Additional information:
I use firefox with Linux with Nvidia gfx-driver.
"glxgears -stereo" renders with stereo-3d on my monitor, so maybe firefox' Web-GL could use this also.
 I may be out of my depth on this particular topic, but it seems like WebVR only supports [two device types at the moment:](http://mozvr.github.io/webvr-spec/webvr.html#devtypes) the HMDVRDevice and PositionSensorVRDevice. While I'd think it possible to add stereoscopic monitors as a device type, I don't know if A-Frame is the right place to get it added. Have you looked into the WebVR [Reddit/Slack/mailing list?](http://mozvr.com/#community)?
 Thank you for the information. I will try in the MozVR mailing list.

My first thought was that a-frame could make the output e.g. using canvas and mix the left and right image as needed. But probably a-frame is one or more layers too high.
 Of course. As I said, I may be out of my depth with what actually renders and positions the stereoscopes, but it's a worthwhile discussion.
 @ngokevin How is stereoscopic rendering possible now in A-Frame without a headset? There's [no longer `stereoRenderer`](https://github.com/aframevr/aframe/pull/1740) exposed from `a-scene`.

The https://github.com/oscarmarinmiro/aframe-stereo-component is about a different thing: how to render certain objects to show up only for one eye or the other. Update: found this hack https://github.com/aframevr/aframe/issues/1919 
> Hacky way is to set `document.querySelector('a-scene').isMobile` to `true` and remove the orientation modal overlay.

But it doesn't work as intended, causes ```Uncaught (in promise) Error: Failed to enter VR mode (`requestPresent`): No VR hardware found.```

Using desktop Chrome with WebVR enabled via flags (`chrome://flags/#enable-webvr`). Will try disabling it. No, the same error with `chrome://flags/#enable-webvr` disabled and `isMobile` set to `true` to hack A-Frame to make it use the stereoscopic renderer:
```
Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.100 Safari/537.36

A-Frame Version: 0.7.1 (Date 18-10-2017, Commit #0da6cf4)
three Version: ^0.87.0
WebVR Polyfill Version: ^0.9.36

Uncaught (in promise) Error: Failed to enter VR mode (`requestPresent`): No VR hardware found.
```

Obviously, I don't have the VR hardware connected. This WebVR emulator Chrome extension helped (with `chrome://flags/#enable-webvr` disabled): https://chrome.google.com/webstore/detail/webvr-api-emulation/gbdnpaebafagioggnhkacnaaahpiefil/related 

Thanks to https://github.com/googlevr/webvr-polyfill/issues/205#issuecomment-304369146  I can't get the 360 video example to work on my iPhone.

https://aframe.io/examples/showcase/videosphere/

I tried Chrome, Safari and FireFox.

I also tried my own 

http://www.philspitler.com/test/VR/360.html

Neither of which play video on mobile.
 uhh I still can't get it to work 
 sarthakdas I do have this working with the current a-frame version, but I can't provide an example until I get some time off my day job.

In a nutshell I am transcoding to m4v, using the start button technique to satisfy the user interaction requirement (play then pause a short video asset to the a-video), then switching the video asset src whenever the video needs to change. That seems to work well. the example has been updated recently, 
and should include click-to-play behavior now

if you're saying 
https://aframe.io/examples/showcase/videosphere/
doesn't work, 
can you provide more information? 
e.g. browser, phone model, OS version

if you're saying your own code doesn't work,
but the new example does,
feel free to remix the example...  Currently transformations are applied using the object's center as origin, instead of world's `0,0,0`.

However, in https://aframe.io/docs/core/animation.html we can read:

> [...] to define a 5-meter orbit on an entity about the Y-axis that takes 10 seconds, we can offset the position and animate the rotation. [...]
> 
> ``` html
> <a-entity position="5 0 0" rotation="0 0 0">
>   <a-animation attribute="rotation"
>                to="0 360 0"
>                dur="10000"
>                fill="forwards"
>                repeat="indefinite"></a-animation>
> </a-entity>
> ```

What this produces is for the entity to rotate over the Y axis over its own center while remaining at `5,0,0`, and not _orbiting_. See [this example on JSfiddle](https://jsfiddle.net/ew7b34x7/)

To achieve an orbit, users must nest entities and set the orbit radius as a position in the nested entity. See [this example](https://jsfiddle.net/ew7b34x7/1/):

``` html
<a-entity>
  <a-animation attribute="rotation"
    to="0 360 0"
    dur="10000"
    ease="linear"
    repeat="indefinite"></a-animation>
  <a-sphere position="5 0 0" radius="1">
</a-entity>
```

I can make a PR with the changes to the docs if you wish so.

PS: Of course, it would be great if users could define the origin of transformations as an attribute of the animation / entity.
  What order will it go in? mixin1, mixin2, entity? Or entity, mixin1, mixin2?
 On the topic of merging vs replacing, I agree that it'd be more useful to merge.

Also, it'll be funny to see the first issue with recursive mixins causing crashes.
  This might help: https://www.talater.com/open-source-templates/
  I'm taking a stab at this right now. I'm also trying to add a pause hotkey for 'p'. Would it make sense to add a resume() method to components?
 @ngokevin this seems to be solved with 'sound.playSound()' and `play()` calls `playSound()` if there is active buffer `this.data.autoplay` is true
  As you can see [in the docs](https://aframe.io/docs/primitives/a-camera.html#Replacing_the_default_scene_camera), the default camera is actually offset a little and isn't directly in the center.
 Wait, nevermind, that's only when it's auto-injected. My bad.
  Adds support for base64 uris.
  A data-URI scheme for base64 images [consists of multiple characters, one being a colon (`:`), the other being a semicolon (`;`)](https://en.wikipedia.org/wiki/Data_URI_scheme#Examples).

Thus, one cannot use base64 urls directly, as the semicolon & colon are parsed as their own key-value set in a component. This could become a problem for many, including me, if they wish to dynamically generate images on the fly.

The problem is here, in the style-attr module, where the style attribute string wholesale splits the string by semicolon and colon:
https://github.com/joshwnj/style-attr/blob/master/index.js#L21

There needs to be some way to ignore semicolons within a `url()` property. I'll raise an issue in the style-attr repo for now.
 Raised an issue in style-attr: https://github.com/joshwnj/style-attr/issues/2
 Just got patched. https://github.com/joshwnj/style-attr/pull/3
 Semver sorted it out already, but I'll put it up there.
  In HTML:
`<a-assets>
  <img src='img-link' id='img-01'>
</a-assets>
<a-entity id='img-entity'>
</a-entity>`

In JS: 
`(function(){
var img = document.createElement('a-image');
  img.setAttribute('width', "1.5");
  img.setAttribute('src', '#img-01');    
  window.onload = function(){
    img.setAttribute('src', '#img-01');    
  };
  var entity = document.getElementById('img');
  entity.appendChild(img);
})();`

So I am trying to append a-entity with a-image on both document.onload and window.onload. However the image is black. An example is [here](http://codepen.io/SantanMaddi/pen/RrdRQq) for reference.

The fault is because texture is used even before it is loaded. If I am correct, the texture should be loaded/ready at least on window.onload. Unable to get around with this issue, any suggestions for it?
 Thanks @ngokevin 
  My use case: Click X to show Y. Hover Y to do Z.
Y is set to hidden by default using visible = "false". X has a click event listener to show Y (set Y visible = "true"). Y has a hover event listener to do Z.

Problem is:
Even when Y is hidden, if I accidentally hover on the invisible area, it still triggers Z. In the example below, even if I don't click X, the hover events still works on Y.

Code:
//Click X to show Y
document.querySelector('#X').addEventListener('click', function () {
            document.querySelector('#Y').emit('show');
});

//Hover Y to show Z
document.querySelector('#Y').addEventListener('mouseenter', function () {
            document.querySelector('#Z').emit('fadein');
});

//Mouse leave Y to hide Z
document.querySelector('#Y').addEventListener('mouseleave', function () {
            document.querySelector('#Z').emit('fadeout');
 });

(BTW, I was a UX design intern at Mozilla in 2013 :-) Great job on A-frame!)
 @auxdesigner have you tried to determine if them target item was visible in the event listener?

You could decide to only emit when needed.
 I've had a similar issue.
I have the same structure as you but I can't get X to read my click event.
Both Y and Z are "visible: false".   There's a change on the dev branch that breaks one of my examples. Code:

``` html
<a-entity camera
          rotation="0 0 0"
          look-controls
          gamepad-controls>
</a-entity>
```

(actual scene i'm testing is [here](https://github.com/donmccurdy/sandbox-aframe/blob/master/examples/platforms/index.html), but has `look-controls` removed temporarily)

In that example there are three ways of rotating the camera: HMD (w/ `look-controls`), mouse (w/ `look-controls`), and gamepad right joystick (w/ `gamepad-controls`). In v0.1.\* this just worked, because my update() function in `gamepad-controls` was always called last, and I was careful to only update rotation when the gamepad was in use. On _dev_ that seems to have changed – `gamepad-controls.tick()` is called first, and `look-controls.tick()` overwrites my rotation regardless of whether any HMD or mouse events are happening. I've [tried to work around this in my code](https://github.com/donmccurdy/aframe-gamepad-controls/blob/feat-lock-rotation/gamepad-controls.js#L191), but it gets very messy quickly and I don't see a good solution without asking users of `gamepad-controls` to _also_ use some new custom version of `look-controls`.

I don't care much about the order in which component `tick()` calls should be made (that seems too complicated), but it would be great to make it easy for demos to support multiple input devices – I don't want to target a demo _only_ at users with an HMD and a gamepad, for example, and ideally the default controls with A-Frame would be passive when they're not in use.

Can think of a couple ways to get around this:
1. Controls should always export their state to position/rotation components, and not hide state internally. `wasd-controls` already does this, but it might be harder for `look-controls` because we want that dolly pitch/roll/yaw abstraction.
2. Controls should only update state if they're in use. E.g. if there's an HMD `look-controls` should be permanently in use, but between mouse events it should avoid overwriting `rotation`.

Would you take a PR for one of these, or can you think of another way to have controls play nicely together?
 Tried to enable/disable components in a branch [here](https://github.com/donmccurdy/aframe-gamepad-controls/blob/feat-lock-rotation/gamepad-controls.js#L191-L274). Short story, it didn't really work because once my component disables `look-controls`, I can't tell when to enable it again without tracking HMD and mouse movement myself.

Of my original two suggestions now, I'm feeling like #&zwnj;1 (export state) isn't worth the trouble, but #&zwnj;2 (passive when inputs aren't changing) would probably be safe and simple enough.

I like the idea of composing controls, though, would need to think a bit about how that could work.
 Sort of. Assuming I want to make a demo that supports a gamepad, but doesn't require it, I might add `wasd-controls` to your example:

``` html
<a-entity gamepad-controls>
  <a-entity camera look-controls wasd-controls></a-entity>
</a-entity>
```

That works if you use the gamepad for both movement and looking around, or if you use an HMD + WASD controls, but not for gamepad + HMD. And you can't switch between keyboard and gamepad, because you'll be rotating the camera relative to its translation vector.

A second (less important) issue is that gamepad controls needs to know the rotation of the (inner) element to get a heading for movement, but there's probably a workaround for that.
 I am starting to think that @dmarcos's suggestion about managing multiple controls from a separate component is the way to go eventually. Like, `wasd-controls`, `look-controls`, and `gamepad-controls` could _only_ be tracking the state of user input, and some other component (`navigation-manager`?) can look at that state and figure out how to update the camera's position/rotation. That would seem much better when you get into more game-like demos with jumping and wall collisions, since you wouldn't want that collision logic distributed across all of the input components.

^That's all a bit more complicated though. I mostly just want to preserve optional gamepad support in v0.2.0 at the moment. 😬
 Reading through #1056, and thought I'd contribute a strawman to the discussion. Here's one possible approach to supporting multiple input methods in a way that should be [somewhat] extensible/customizable.

``` javascript
AFRAME.registerComponent('navigation', {
  schema: {
    movementControls: { default: ['wasd-movement', 'touch-movement'] }, // order by precedence
    rotationControls: {default: ['hmd-rotation', 'pointerlock-rotation', 'mousedrag-rotation'] } // order by precedence
  },
  tick: function () {
    // Rotation:
    // (1) find first enabled rotation controller
    // (2) get rotation vector
    // (3) orient camera

    // Movement:
    // (1) find first enabled controller.
    // (2) get velocity vector.
    // (3) orient velocity by rotation/heading
    // (4) update position of camera
  }
});
```

_MovementControls Interface_
- `isEnabled()` – Returns true if component is enabled and supported by the client.
- `getVelocity()` – Returns a velocity vector, relative to any object rotation. if the `W` key were pressed, this might be `[0,0,1]`, regardless of any HMD orientation.

_RotationControls Interface_
- `isEnabled()` – Returns true if component is enabled and supported by the client.
- `getRotation()` – Returns a rotation vector, which will (1) orient the camera, and (2) orient the velocity.

### Default/stock controls

``` html
<a-entity camera navigation></a-entity>
```

### Custom/extended case

To add a custom gamepad interface, I would define `isEnabled`, `getVelocity`, and `getRotation` and then decide how precedence should compare with other controllers:

``` html
<a-entity camera
          gamepad-controls
          navigation="movementControls: gamepad-controls wasd-controls touch-controls;
                      rotationControls: hmd-controls gamepad-controls pointerlock-controls;"
</a-entity>
```
 Alrighty so I went and built this.
- _Universal Controls_: parent component that manages the interface-specific components. [Source code](https://github.com/donmccurdy/sandbox-aframe/blob/master/src/universal-controls.js).
- Implemented an assortment of interface-specific controls, including all the default A-Frame components, plus gamepad, pointerlock, and touch-to-move. [Source code](https://github.com/donmccurdy/sandbox-aframe/tree/master/src/controls).

**Cons**
- The extra abstraction layer complicates things for new users, and I could see where that might be a deal-breaker for inclusion in the core library.

**Pros**
- Third-party controls (e.g. gamepad) play nicely w/ A-Frame's defaults, because only `universal-controls` actually gets to modify the entity's position/velocity.
- For game-friendly features like static collision detection (e.g. prevent player from walking through walls) in the core framework, the extra abstraction of `universal-controls` helps immeasurably. If gamepad, keyboard, and touch-to-move controls all modify player position directly, they also have to _all_ check for obstacles, and that's a mess.

Just for fun, [here is a demo](https://sandbox.donmccurdy.com/vr/walls/) implementing various controls (gamepad, keyboard, pointerlock, touch-to-move) with collision detection on the walls using CANNON.js. [Source code](https://github.com/donmccurdy/sandbox-aframe/blob/master/examples/walls/index.html).
  will it ever be possible to combine regular html5 syntax with aframe as in this example":

https://aframe.io/examples/showcase/curved-mockups/

These curved mockups are curved panel images of pages, but is it possible to add regular html inside a div and attribute aframe properties to is such as curved panel or sky?
 @cvan thanks for the help. My goal is to take an existing website, and break out certain aspects of it into aframe: example: having subreddits in vr that change vr environments based on their subreddit
 @cvan technically, with the dom2screenshoot, couldn't you map a users position on the screenshot to an action in an iframe? example: In cardboard they see the image version of the page, and they hover over a button to trigger the js to actually correspond with the iframe and reload a new view?
  +1 on killing the dev/master workflow. One master, staggered releases. Maybe some feature branches for crazy people (though why not do that in your own fork?)
 I've seen projects just set monthly/quarterly milestones that bundle up all the changes made for that period.
  I have a post about squashing commits if you think it would be a useful reference:  https://davidwalsh.name/squash-commits-git
 Oh sweet, I didn't know that :)
  ![screen shot 2016-02-12 at 18 30 08](https://cloud.githubusercontent.com/assets/171001/13016449/b2f2782c-d1b6-11e5-8724-a31dfa84cb8f.jpg)

When visiting AFrame website on my iPhone 5C with iOS9 and switching to landscape mode it first enters the fullscreen and then immediately exists it. My own experiments and http://vr.chromeexperiments.com work fine so I guess it must be some code modifying DOM in your examples triggering change of layout.

Here is the video showing the behaviour: https://vimeo.com/155153964/48dd611c61
 You're going to have to pin it to your home screen and add these meta tags:
https://developer.apple.com/library/iad/documentation/AppleApplications/Reference/SafariHTMLRef/Articles/MetaTags.html

I have a 5C to and it works for me.
  ```
<a-scene>
<a-entity position="0 1 0">
    <a-cube look-at="#focal" position="1 0 1" width="0.5" height="0.5" depth="0.5"></a-cube>
    <a-cube id="focal" position="0 0 0" width="0.5" height="0.5" depth="0.5" color="blue"></a-cube>
</a-entity>
  </a-scene>
```

The gray cube should be looking at the blue cube, it is actually not taking into account the 1 meter elevation of the parent.

http://codepen.io/masom/pen/YwBNvg
 Looks like THREE.js problem:

https://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js#L264
  The rotation matrix of the object3D gets reset between `update` and first `tick`.
If you put the `lookat()` into the `tick` function the element does actually `look-at` the element.
It is sufficient to set the look-at vector on the first tick to stay, which indicates that the reset to "0 0 0" happens only once. (tested with a simple counter).

I added some log prints to see if the rotation gets reset.

``` .js
   tick: function (t) {
    this.tickCount++;
    // Track target object position. Depends on parent object keeping global transforms up
    // to state with updateMatrixWorld(). In practice, this is handled by the renderer.
    var target3D = this.target3D;
    if (target3D) {
      return this.el.object3D.lookAt(this.vector.setFromMatrixPosition(target3D.matrixWorld));
    } else if (this.tickCount === 1) {
      console.log('rotation in first tick', this.el.object3D.rotation);
      this.el.object3D.lookAt(new THREE.Vector3(this.data.x, this.data.y, this.data.z));
      console.log('rotation after setting it again to lookat vector:', this.el.object3D.rotation);
    }
  }
```

![lookat_2](https://cloud.githubusercontent.com/assets/1710598/13368420/6c2e7780-dcea-11e5-9fef-d6899aeb9b9a.png)

Any idea what changes the rotation between update and tick?
(You may notice as well, that the rotation from `update` doesn't match the rotation from `tick` and even has a differnet `_order`, might give some clues.)
 @ngokevin To test it, I set rotation, position, scale and visibility all as dependency. It helps but actually only postpones a reset to `0 0 0`,  it must come from somewhere else. Investigating further.

UPDATE: I think it _could_ have something to do with `raycaster`.
Although my testing `a-box` has no `raycaster` set, it is still initialized and put onto the element. Why is that? Is it supposed to have a raycaster element or is it a bug?
see,
this:
`<a-box width="1" depth="2" height="0.5" color="#999" look-at="-2 15 -9" position="4 0 1"></a-box>`

becomes this in the registration process:
`<a-box raycaster="" geometry="primitive:box;height:0.5;depth:2;width:1" material="color:#999" width="1" depth="2" height="0.5" color="#999" look-at="-2 15 -9" position="4 0 1"></a-box>`

And it isn't solved by putting it into `dependencies`. The raycaster ticks are also getting executed on the box.
 To avoid overriding issues, it may work to calculate the proper rotation in the look-at component (rather than use .lookAt() ) and then setAttribute on the rotation component, and let it do the updating of the Object3D rotation ?
Three.js calculates the rotation here:
https://github.com/mrdoob/three.js/blob/master/src/core/Object3D.js#L262
 Using look-at to a vec3 on a wrapper around the camera component does not seem to work. In the codepen below, moving the camera with keyboard should keep the camera on the red sphere but it does not.
In addition, when using a selector instead of vec3 the scene does not get drawn at all. Preliminary debugging (in codepen ...) suggests that tick() may never be called in this case.

http://codepen.io/anon/pen/LNgLWx
  The autopplay function don't work on ios mobile. How can we start the video to play on ios? 
  Hi, there are some bugs for hover function:
- hover works only with `<a-cube>`, not with other element such as `<a-plane>`
- `<a-entity geometry="primitive: box;”>` doesn’t work even though it creates same as `<a-cube>`
- `<a-cube>` doesn’t work if the position is far from origin

please check this video: 
http://cl.meowyo.com/f77r
http://cl.meowyo.com/f7Rb
  While on IOS devices everything works fine, on android sky and a-model elements are not getting displayed (there is just black space instead).
 This issue might belong to #933
  Hi,

For a project of mine, I'm using jquery to add event listeners onto my components to add my own logic, the only one that I was able to get to work was 'click', I would like to be able to use 'mouseenter' and 'mouseleave'. Are these not supported? And if they are, where might be able to find documentation on them and other available types?

Thanks!
  @cvan I agree Rust's is great. It seems to be working well for the Servo project.
  This may only affect `metaKey` – see issue #3 here: http://bitspushedaround.com/on-a-few-things-you-may-not-know-about-the-hellish-command-key-and-javascript-events/
 Ah, that's an issue too, but different cause: shift key changes `KeyboardEvent::key` case, so it might be "a" on keydown and "A" on keyup, which similarly breaks everything. I'm running a fork of `wasd-controls` [here](https://github.com/donmccurdy/aframe-keyboard-controls) (for proxy-controls support), and am leaning towards using `KeyboardEvent::code` rather than `key`, since (1) it's case-insensitive, and (2) it has nice default behavior w/ Spacebar.
  What if you went more with the way SVG does `<defs>`. Specify entities with an ID in some specific area, (maybe in assets?) and then have something like `<a-use href="someid"/>` to use them. 

https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use
 Also, I think "templates" and "mixins" seem like they could be merged into one concept since they're doing similar things. Not sure if that's on topic for the thread, though.
 I actually like that idea more than templates, even. Only complaint is that it seems that this could all be accomplished with components somehow, rather than having both mixins and components as basic composable units in the markup.
 Nice! I've been thinking of implementing a server that does server-side rendering of scenes for the purposes of a puzzle game of sorts. Though I guess I was second-guessing that lately because of the issue of losing VR on navigation. :/
  Proposal to add 'preserveDrawingBuffer' option to webgl renderer from a-scene.

Will need a good attribute name or any better suggestion?

https://github.com/mrdoob/three.js/issues/989
 not yet. Trying it now.
 by looking at the code.
https://github.com/Jam3/threejs-generate-gif/blob/master/test.js

It will need to run `gifGenerator.addFrame();` in each frame and it will need start the requestAnimation. Might not be a good fit for aframe integration.
 I agree with let the user decide (the same as `antialias` for example) instead of add it by default, as `preserveDrawingBuffer` can impact the performance.
From the webgl spec (https://www.khronos.org/registry/webgl/specs/latest/1.0/):

> On some hardware setting the preserveDrawingBuffer flag to true can have significant performance implications.
> 
> While it is sometimes desirable to preserve the drawing buffer, it can cause significant performance loss on some platforms. Whenever possible this flag should remain false and other techniques used. Techniques like synchronous drawing buffer access (e.g., calling readPixels or toDataURL in the same function that renders to the drawing buffer) can be used to get the contents of the drawing buffer. If the author needs to render to the same drawing buffer over a series of calls, a Framebuffer Object can be used.
> 
> Implementations may optimize away the required implicit clear operation of the Drawing Buffer as long as a guarantee can be made that the author cannot gain access to buffer contents from another process. For instance, if the author performs an explicit clear then the implicit clear is not needed.
 @dmarcos something like this? 

``` html
<a-scene preserveDrawingBuffer='true'>
```

https://github.com/aframevr/aframe-core/blob/a3855a35634bc6120c569788f20a7534c1eb4c5d/src/core/a-scene.js#L587
 @dmarcos Nice! +1

I don't see any test for antialias 

https://github.com/aframevr/aframe/blob/dev/tests/core/a-scene.test.js#L185

Will create renderer component and test for antialias and preserveDrawingBuffer.

sidenote:

if the user changes 

``` html
<a-scene renderer="antialias: true; preserveDrawingBuffer: true; ... ">...<a-scene>
```

to 

```
<a-scene renderer="">...<a-scene>
```

on runtime. 

The renderer still uses antialias and preserveDrawingBuffer right? Because it is only registered on init. The only way to make the antialias and preserveDrawingBuffer change on run time is to recreate the renderer. We don't want to do that right?
 I created a small component for the a-scene in order to make a screenshot. But it does not seem to work and when creating a new WebGLRenderer the output of the scene is blurry and the generated image is black. What am I doing wrong?

```
AFRAME.registerComponent('renderer', {

    init: function () {
        this.el.renderer = new THREE.WebGLRenderer({ preserveDrawingBuffer: true });
    },
    remove: function () {
        this.el.renderer = new THREE.WebGLRenderer({ preserveDrawingBuffer: false });
    }

});
```

```
var scene = document.querySelector('a-scene');
var canvasData = scene.renderer.domElement.toDataURL('image/png');
```
 Uh oh.. I see: https://github.com/aframevr/aframe/blob/master/src/core/scene/a-scene.js#L301 - I think I should not just replace the WebGLRenderer as I did. 

```
AFRAME.registerComponent('renderer', {

    init: function () {
        var antialias = this.el.getAttribute('antialias') === 'true';
        this.el.renderer = new THREE.WebGLRenderer({ canvas: this.el.canvas, antialias: antialias || window.hasNativeWebVRImplementation, alpha: true, preserveDrawingBuffer: true });
        this.el.renderer.setPixelRatio(window.devicePixelRatio);
        this.el.renderer.sortObjects = false;
        this.el.effect = new THREE.VREffect(this.el.renderer);
    },
    remove: function () {
        var antialias = this.el.getAttribute('antialias') === 'true';
        this.el.renderer = new THREE.WebGLRenderer({ canvas: this.el.canvas, antialias: antialias || window.hasNativeWebVRImplementation, alpha: true, preserveDrawingBuffer: false });
    }

});
```

Hm... still no luck. Image is white (at least not black like it was before ;-)).
 Interesting, if I set preserveDrawingBuffer: true directly in aframe.js when the WebGLRenderer is created, it works. I can take a screenshot of the scene. Looks like a-frame does not like swapping the renderer in the component as I did. Any ideas?
 Current version of aframe 0.3.2 / three.js 0.76.1 does not need to set preserveDrawingBuffer: true anymore in order to get a screenshot of the canvas by doing  

var canvasData = scene.renderer.domElement.toDataURL('image/png');

I double checked and the screenshot is always taken and I tested a lot.
 @chriscar That's not working for me. Here's a Codepen example: http://codepen.io/fabricius/pen/KNNWVL

I get a blank png with the dimensions of the window, just as I do in any other way when preserveDrawingBuffer has not been set to true.

What _does_ work for me though, is the upcoming screenshot component in the next release of A-Frame. At least it works in this example (press Ctrl+Alt+S to take screenshot): http://codepen.io/fabricius/pen/aBBJwp

Slightly outdated documentation here: https://aframe.io/docs/master/components/screenshot.html
 @RSpace I played with your Codepen and you're right. In my case manually taking a screenshot is not an option, I create one programmatically, after uploading a 3d model. It's wired, it still works in my code. When I got time I should check why it works...
 @dmarcos Good tip about `sceneEl.components.screenshot.capture('perspective')`. I wish that method  wouldn't initiate the download, as in my case I take the base64 image and submit to a server.

I might do a PR to change the behaviour or make it more configurable, but for now I also have had to comment out https://github.com/aframevr/aframe/blob/master/src/components/scene/screenshot.js#L65 and the following line, as those shaders results in WebGL shader compilation error. I don't get the compilation in the Codepen example I did, only in my own app.

It must be related to the fact that I use webpack and include A-Frame with `require('aframe/src')` to be able to debug into A-Frame. Does browserify do anything magic related to shaders when it produces the master dist file?
 @demarcos Same here, thanks about the hint! In my use case I would need to submit the image data to the server as well.
 @RSpace - I did a little fix so you can now get a canvas object with the rendered screengrab, by doing `sceneEl.components.screenshot.getCanvas()` - from where you should be able to do a .toBlob() and send off to a server or whatever. :)
https://github.com/aframevr/aframe/pull/2316 @toychicken Thanks, I did something along those lines in my local copy of the component to get it working - will be great have it in core.

However, I still have the WebGL shader compilation error in my webpack-based build, so for now the screenshot component is still not useable for me. great job worked with
```
sceneEl.components.screenshot.getCanvas('perspective').toDataURL('image/png')
``` Hi! Hi! I am trying to take a screenshot for contents in a-scene using A-frame. With the current screenshot method, it only takes the rendering of the 3D model in the scene and not the camera feed. Any ideas how I can take a whole screenshot? @dmarcos Here is my website: https://esmolan.github.io/
I am building a AR project where when using A-Frame, I can project gTLF models, etc. However, I want to take a screen capture of them alongside the camera feed from the webcam. 

Allow me to explain, even when using the `ctrl+alt+s` to trigger the screenshot, it only captures the 3D model with a white background, not the render of the webcam. Image link: [https://ibb.co/hCudTT](url)

Same issue: [https://github.com/jeromeetienne/AR.js/issues/358](url)

I just want a way to capture a screenshot with the webcam using A-Frame. I know that with three.js its possible, but its hard to play with custom markers and loading animations to gTLF models.  @dmarcos How can I bring the camera feed into THREE?  @dmarcos I will still try! Thanks for the help :)  Has anything like this been implemented yet? Is there an event that gets triggered when all the assets load?
 Nevermind, found the `loaded` event: https://aframe.io/docs/core/asset-management-system.html#Events
 great news
  Is wanting this warning a result of an API change?  I know this is a simply attribute check but it seems like extra processing for something that probably doesn't happen very often.
   it is showing in chrome but not webvr chromium

```
WebGL: INVALID_VALUE: texImage2D: no video
255aframe.io/:1 [.WebGLRenderingContext-0x7fa76bfa72a0]RENDER WARNING: texture bound to texture unit 0 is not renderable. It maybe non-power-of-2 and have incompatible texture filtering.
```
 How do you get around this at all?
 And, what's the upstream issue, please?
 Since CDNs virtually always mean cross origin and since Chrome is a very popular browser and based on Chromium, isn't the scope of the underlying bug tremendous?
 My particular issue had to do with caching. Disabling cache in my browser made it download the images again and thus it was resolved.
  Hi, I would like to have multiple a-scenes within a page so that I can have multiple 3d models mixed in with other html.
 What about embedding iframes for the time being?
 This is probably the reason we'll need to abandon A-Frame for our project. It stinks, but we can't use the iframe solution.
 Maybe it is just a-videosphere, in that case?
 @cvan what's the specific secret sauce for getting multiple a-scenes to work on a page? I've tried "embedded" but both of my scenes will not render (they each render if I include only one at a time). I am using v0.4.0. @dmarcos Thanks for the clarification :-) The embedded use case is my most common, and iframes are not a viable workaround (anyone who has worked with a client's CMS probably knows why).  I don't think I'm the only one with these kinds of requirements.

A-Frame is so useful and well-designed, I would hate for this issue to be a sticking point that hampers its adoption. I realise this is long-closed, but wanted to add some thoughts now that Three.js does seem to support rendering multiple instances on a single page (at least it happily does it in my test page).

We're currently evaluating what framework to use for some 3D visualizations to augment our existing 2D visualizations, which were written using D3.  At first glance A-Frame looked ideal; we can quickly set up the basic scene in HTML, then use our existing D3 knowledge to quickly build up the complexity, easily attaching interaction handlers to objects, etc.  And then I realised the show stopper: We can't have multiple A-Frame instances on a page.  We display multiple visualisations at the same time to the user, so it's a deal breaker.

I appreciate A-Frame has a VR focus so it isn't your priority, but you guys have a really powerful general purpose 3D framework which gives a useful abstraction on top of Three.js and can be combined with the power of D3.  It's a great combination outside of VR which isn't covered by any other framework to my knowledge.  So supporting this has my vote.  I have issues while I want to play 360 video example in browser of my mobile device (https://aframe.io/examples/showcase/videosphere/).
It shows me a message: You cannot play this video. Please try with another video file.

It works normally on desktop.

Please help. Thank you.
  Safari iOS: Super pixellated, and the goggles aren't rendering. See screenshot below.
Firefox iOS: Black screen.
  Tested Safari and Firefox on iOS with:

https://mozvr.github.io/panorama-viewer/
   ![cur](https://cloud.githubusercontent.com/assets/13263255/12566108/cc4b7088-c36c-11e5-86ee-b4c1d029d205.png)
 The bug is not fix yet. What are the options for shader?
  Phone: Motorola moto e
android: 4.4.4
Browser: chrome 47.0.2
 I fix this issue by changing shader: flat to shader: standard

 <a-entity visible="${cursor-visible}"
              position="0 0 -${cursor-offset}" 
              geometry="primitive: ring; radiusOuter: 0.016; radiusInner: 0.01"
              material="color: ${cursor-color}; shader: flat; transparent: true; opacity: ${cursor-opacity}"
              scale="${cursor-scale} ${cursor-scale} ${cursor-scale}"
              cursor="maxDistance: ${cursor-maxdistance};">
    </a-entity>
  "Animations and transitions in A-Frame are defined using the <a-animation> element as a child." I would suggest to have animations as components. 
 Makes sense. I was looking for a way to programatically set animations like `element.setAttribute('animation', {from: "0 0 0", to: "1 1 1" });` which seems not possible then. I can do `anim.setAttribute("from", "1 1 1")` which becomes pretty verbose.

(Update: I also felt the Entity-Component model would be cleaner this way. But you would have to change the "only one component of a type" principle or make the animation component more complex. Hm.).  
 Ok.
  A-Frame fails to load in legacy builds of Firefox Nightly. It throws a `NS_ERROR_STORAGE_CONSTRAINT` error to the console from `line 56980`: 

``` javascript
[56979] var ls = storage(); 
[56980] if (ls && (parseInt(ls.logs, 10) || ls.logs === 'true')) {
[56981]  debug.enable('*');
[56982] } else {
...
```

Temporary workaround: remove the variable initialization from `line 56979`: 

``` javascript
[56979] var ls; 
```

Supporting old Nightly builds is probably low on the priority list for A-Frame (and understandably so). I thought I'd raise this issue anyways, in case it crops up in any other browser environments / edge cases. 

Repro: 
1. Install an [old build of Nightly.](https://ftp.mozilla.org/pub/firefox/nightly/) (I tested the issue in [44.0a1](http://archive.mozilla.org/pub/firefox/nightly/2015/10/2015-10-18-03-02-50-mozilla-central/firefox-44.0a1.en-US.win64.installer.exe) and [45.0a1](http://archive.mozilla.org/pub/firefox/nightly/2015/12/2015-12-09-03-02-28-mozilla-central/firefox-45.0a1.en-US.win64.installer.exe). Issue may also exist in earlier builds.) 
2. Visit [aframe.io.](aframe.io)
3. A-Frame fails to load - no canvas is created and the center of the page remains blank. 
 Ahh, interesting. Thank you for the fast response! 
  It would be useful to be able to wrap unreprojected images from a fisheye lens around objects.
Very wide angle (fisheye) lenses produce circular images within a rectangular video or photo frame.
While the video output of simple wide FOV cameras can be preprojected to equirectangular video, this is computationally expensive and is difficult to do in real time.

The edge clamping of most texture shaders distorts these images unacceptably when wrapping them around objects.

A shader which pins the the center of the image to a specified point on a sphere and wraps the image with no edge clamping would make it simple to take live video feeds from simple cameras and present them as non-stereo VR images.

Wrapping around various elipsoids would allow alternate map projections.

It would be useful to be able to specify a radius from the center at which an alpha channel clips the image.
  The complex CSS-like syntax for some attributes is extremely strange.

For example:

```
wasd-controls="enabled: true; acceleration: 120"
```

Do I have to manually concatenate strings to update the `acceleration` value? Are there special setters?

I think of a-frame as great for beginners and this feels like complexity creep and diverges from the HTML metaphor in a way that isn't self-documenting.
 @ngokevin I guess my concern is that for novices, "introducing" non-standard metaphors may be more confusing than it is useful. At some point it's more useful to just have people write script. Or maybe have a `<wasd-controls>` element with top-level attributes and a `target` attribute to connect it to an entity?
 Also a bit concerned about the performance implication of overloading setAttribute, unless it's just using the `attributechangecallback` to do your logic
 @ngokevin I was under the impression the goal of A-Frame was to be a markup-driven way for novices to experiment with VR. If I'm knowledgeable enough to know entity-component, why would I use custom elements? I probably know a programming language and markup-based authoring would only get in my way.
  I trigger an animation on `mouseenter` which works consistently, but the event handler for `mouseleave` does not seem to fire consistently
example: 
http://bl.ocks.org/enjalot/8be32e6f1f32920ba841
  `mouseleave` events don’t fire if the `mouseenter` event has yet to finish. so, in the following code example, if a user focuses their `a-entity cursor` on an object but leaves before the animation has finished, the`mouseleave` animation doesn’t play, at all:

```
<a-animation attribute="opacity" begin="mouseenter" to="1" dur="1000"></a-animation>
<a-animation attribute="opacity" begin="mouseleave" to=".25" dur="1000"></a-animation>
```

In tween.js, `override:true` might to be appended to the `props` argument to fix this.
 live example: http://misterburton.com/local/ideo-sf-panorama/

switching to `<a-entity id="cube" geometry="primitive: box"…` now to see if it fixes the issue.
 Right, the expected behavior, in my mind, is that a `mouseenter` animation
that has yet to complete before the `mouseleave` event is fired should not
complete.

Example: if an opacity animation that is set from 0 to 1 has only reached
.5 on enter when the cursor then rolls off, it should animate from .5 back
to 0 on leave.

On Tue, Jan 19, 2016 at 3:16 PM, Diego Marcos notifications@github.com
wrote:

> I don't think this is a problem with the cursor. If you wait for the
> animation triggered on mouseenter to finish and then you move the mouse out
> of the object the animation triggered on mouseleave plays as expected. The
> problem only reproduces if you move the mouse out of the object before the
> mouseenter animation finishes. I think it's a problem with having two
> animations playing at the same time.
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/issues/857#issuecomment-173019138.
 both events fire here on quick rollover/out, but only if i use `<a-entity>`, not if i use `<a-cube>`:

```
document.querySelector('#cube').addEventListener('click', function () {
  document.querySelector('#cube').emit('fadeIn');
  console.log('click');
});

document.querySelector('#cube').addEventListener('mouseleave', function () {
  document.querySelector('#cube').emit('fadeOut');
  console.log('mouse leave');
});
```

the only remaining issue is that the fadeout animation simply doesn't fire on mouseleave, at all:

```
<a-animation attribute="material.opacity" begin="fadeIn" to="1" dur="1000"></a-animation>
<a-animation attribute="material.opacity" begin="fadeOut" to=".25" dur="1000"></a-animation>
```

full code updated & viewable here: http://misterburton.com/local/ideo-sf-panorama/
 Hi @misterburton, if you found a work around could you please share. I am going through the same issue. Cheers.
 Hey, @coleholyoake. There's no fix that I know of, particularly as this issue is still open. That said, I've yet to try the latest aframe build. Let me know if you happen upon a fix, and I'll be happy to do the same. Cheers.
  Why should this be removed?  It is needed so that layouts behave on iOS 9 and above.  Yes it won't be recognized on devices other than iOS, so thus the warning.  It is only a warning after all, not an error.
  In iPhone 5s/ios9.2 with all browsers full screen doesn't work. 
In Safari in particular, canvas doesn't resize right.
 same as https://github.com/aframevr/aframe/issues/967
  At loading time on my website: www.sergioroja.com/test.html
![screenshot](https://cloud.githubusercontent.com/assets/13263255/12427063/e2aee5b0-be91-11e5-8a19-12fa62c39d08.png)

![screenshot-69](https://cloud.githubusercontent.com/assets/13263255/12380831/f1205d52-bd30-11e5-8902-2b5da2614c11.png)
Phone: Motorola moto e
Android: 4.4.4 
Browser: Chrome 47.0.2

console log:

aframe.js:58458 The key "shrink-to-fit" is not recognized and ignored.
aframe.js:35227 THREE.WebGLRenderer 74dev
aframe.js:39054 THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
VM45 aframe.js:51328 Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic
 I get the same output from Chrome on Android Debug (Chrome 47, Android 6.01)

```
The key "shrink-to-fit" is not recognized and ignored.
THREE.WebGLRenderer 74dev
THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
```

Output from Desktop Chrome 

```
THREE.WebGLRenderer 74dev
```

This issue persists with a texture for `<a-sky>` via the `src` tag as well.

I could fix this issue by removing `shader: flat` from the sky material component:  

```
<a-entity geometry="primitive: sphere;
                      radius: ${radius};
                      segmentsWidth: ${segments-width};
                      segmentsHeight: ${segments-height}"
            material="shader: flat; 
                      src: url(${src});
                      color: ${color};
                      fog: false"
            scale="-1 1 1">
  </a-entity>
```
 @i3games Thanks for including a fix in your post! This just saved me after 2 hours of debugging on Android :)
  If separated, it would be important that it's still possible to use both on the same element. Otherwise we'd end up with demos that work either on HMD or desktop but not both. Is there a clean way for two separate components to know when the other takes precedence?
  some npm start problem on windows 8. 

git log:

npm ERR! Windows_NT 6.3.9600
npm ERR! argv "C:\Program Files (x86)\nodejs\node.exe" "C:\Program Files (x86)\nodejs\node_modules\npm\bin\npm-cli.js" "run" "build"
npm ERR! node v4.2.3
npm ERR! npm  v2.14.7
npm ERR! code ELIFECYCLE
npm ERR! aframe@0.1.1 build: `mkdir -p build/ && npm run browserify -- --debug -o build/aframe.js`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the aframe@0.1.1 build script 'mkdir -p build/ && npm run browserify -- --debug -o build/aframe.js'.
npm ERR! This is most likely a problem with the aframe package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     mkdir -p build/ && npm run browserify -- --debug -o build/aframe.js
npm ERR! You can get their info via:
npm ERR!     npm owner ls aframe
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     C:\Users\user-55\vr\aframe\npm-debug.log

npm ERR! Windows_NT 6.3.9600
npm ERR! argv "C:\Program Files (x86)\nodejs\node.exe" "C:\Program Files (x86)\nodejs\node_modules\npm\bin\npm-cli.js" "run" "dev"
npm ERR! node v4.2.3
npm ERR! npm  v2.14.7
npm ERR! code ELIFECYCLE
npm ERR! aframe@0.1.1 dev: `npm run build && node ./scripts/budo`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the aframe@0.1.1 dev script 'npm run build && node ./scripts/budo'.
npm ERR! This is most likely a problem with the aframe package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     npm run build && node ./scripts/budo
npm ERR! You can get their info via:
npm ERR!     npm owner ls aframe
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     C:\Users\user-55\vr\aframe\npm-debug.log

npm ERR! Windows_NT 6.3.9600
npm ERR! argv "C:\Program Files (x86)\nodejs\node.exe" "C:\Program Files (x86)\nodejs\node_modules\npm\bin\npm-cli.js" "start"
npm ERR! node v4.2.3
npm ERR! npm  v2.14.7
npm ERR! code ELIFECYCLE
npm ERR! aframe@0.1.1 start: `npm run dev`
npm ERR! Exit status 1
npm ERR!
npm ERR! Failed at the aframe@0.1.1 start script 'npm run dev'.
npm ERR! This is most likely a problem with the aframe package,
npm ERR! not with npm itself.
npm ERR! Tell the author that this fails on your system:
npm ERR!     npm run dev
npm ERR! You can get their info via:
npm ERR!     npm owner ls aframe
npm ERR! There is likely additional logging output above.

npm ERR! Please include the following file with any support request:
npm ERR!     C:\Users\user-55\vr\aframe\npm-debug.log
  Maybe it'd make sense to have it be configurable? Though I think that lock-by-default makes the most sense.
 I see your point, but from what I've seen in most examples and projects around, it's usually aframe taking over the page, and other content showing up seems to show up less frequently.

If it's configurable then it'd be easy enough to go one way or the other either way. Maybe since it's currently not lock-by-default it'd make sense to have the locking opt-in so as not to mess up existing projects.
 @dmarcos @cemkod Yeah, I think that having a clear path to mixing different control schemes would help a lot. And I suppose that it would make sense to have the current default stay, but have it actually be composed of individual components to make customization easier.
 I haven't tested this but my no-click-look-controls component is only enabled on mouseover and the way it calculates rotation _should_ support multiple scenes on a single page.

https://github.com/alexrkass/aframe-no-click-look-controls/blob/master/index.js#L145-L152
 @dmarcos Yeah, only problem with them is that it doesn't seem to be locking the pointer on the screen. D:
 @RangerMauve true, sorry I conflated pointer lock with mousedrag.

pointer lock on focus would make a good default.
 I added quick pointerlock support, doesn't seem to break safari and works in chrome / ff.
 Any updates on pointer lock? I would really like to use it for my project but existing (two exactly) components doesn't work. aframe-no-click-look-controls is very nice as it allows to limit axis movement, but it doesn't work at all with aframe >=0.3.0. And also, it's big too.

So, what can I do at this point? Thanks, I was refering to older version aframe-no-click-look-controls. I tried to use a blob, registering a component. Console doesn't report any error, but it doesn't work. Please note I'm not using node.js, just straight call to javascript in HTML file.

This is a version I made from blob:
/******/
(function(modules) { // webpackBootstrap
    /******/ // The module cache
    /******/
    var installedModules = {};

    /******/ // The require function
    /******/
    function __webpack_require__(moduleId) {

        /******/ // Check if module is in cache
        /******/
        if (installedModules[moduleId])
            /******/
            return installedModules[moduleId].exports;

        /******/ // Create a new module (and put it into the cache)
        /******/
        var module = installedModules[moduleId] = {
            /******/
            exports: {},
            /******/
            id: moduleId,
            /******/
            loaded: false
            /******/
        };

        /******/ // Execute the module function
        /******/
        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

        /******/ // Flag the module as loaded
        /******/
        module.loaded = true;

        /******/ // Return the exports of the module
        /******/
        return module.exports;
        /******/
    }


    /******/ // expose the modules object (__webpack_modules__)
    /******/
    __webpack_require__.m = modules;

    /******/ // expose the module cache
    /******/
    __webpack_require__.c = installedModules;

    /******/ // __webpack_public_path__
    /******/
    __webpack_require__.p = "";

    /******/ // Load entry module and return exports
    /******/
    return __webpack_require__(0);
    /******/
})
/************************************************************************/
/******/
([
    /* 0 */
    /***/
    /***/
    (function(module, exports) {

        if (typeof AFRAME === 'undefined') {
            throw new Error('Component attempted to register before AFRAME was available.');
        }
        // To avoid recalculation at every mouse movement tick
        var PI_2 = Math.PI / 2;

        AFRAME.registerComponent('no-click-look-controls', {
            dependencies: ['position', 'rotation'],
            schema: {
                enabled: { default: true },
                maxpitch: { default: PI_2 },
                maxyaw: { default: PI_2 * 6 },
            },

            /**
             * Called once when component is attached. Generally for initial setup.
             */
            init: function() {
                var scene = this.el.sceneEl;
                this.setupMouseControls();
                this.setupHMDControls();
                this.attachEventListeners();
                scene.addBehavior(this);
                this.previousPosition = new THREE.Vector3();
                this.deltaPosition = new THREE.Vector3();
            },

            setupMouseControls: function() {
                this.canvasEl = document.querySelector('a-scene').canvas;
                // The canvas where the scene is painted
                this.hovering = false;
                this.pitchObject = new THREE.Object3D();
                this.yawObject = new THREE.Object3D();
                this.yawObject.position.y = 10;
                this.yawObject.add(this.pitchObject);
            },

            setupHMDControls: function() {
                this.dolly = new THREE.Object3D();
                this.euler = new THREE.Euler();
                this.controls = new THREE.VRControls(this.dolly);
                this.zeroQuaternion = new THREE.Quaternion();
            },

            attachEventListeners: function() {
                var canvasEl = document.querySelector('a-scene').canvas;

                // Mouse Events
                canvasEl.addEventListener('mousemove', this.onMouseMove.bind(this), true);
                canvasEl.addEventListener('mouseout', this.onMouseOut.bind(this), true);
                canvasEl.addEventListener('mouseover', this.onMouseOver.bind(this), true);
                // Touch events
                canvasEl.addEventListener('touchstart', this.onTouchStart.bind(this));
                canvasEl.addEventListener('touchmove', this.onTouchMove.bind(this));
                canvasEl.addEventListener('touchend', this.onTouchEnd.bind(this));
            },

            update: function() {
                if (!this.data.enabled) { return; }
                this.controls.update();
                this.updateOrientation();
                this.updatePosition();
            },

            updateOrientation: (function() {
                var hmdEuler = new THREE.Euler();
                hmdEuler.order = 'YXZ';
                return function() {
                    var pitchObject = this.pitchObject;
                    var yawObject = this.yawObject;
                    var hmdQuaternion = this.calculateHMDQuaternion();
                    hmdEuler.setFromQuaternion(hmdQuaternion);
                    this.el.setAttribute('rotation', {
                        x: THREE.Math.radToDeg(hmdEuler.x) + THREE.Math.radToDeg(pitchObject.rotation.x),
                        y: THREE.Math.radToDeg(hmdEuler.y) + THREE.Math.radToDeg(yawObject.rotation.y),
                        z: THREE.Math.radToDeg(hmdEuler.z)
                    });
                };
            })(),

            calculateHMDQuaternion: (function() {
                var hmdQuaternion = new THREE.Quaternion();
                return function() {
                    var dolly = this.dolly;
                    if (!this.zeroed && !dolly.quaternion.equals(this.zeroQuaternion)) {
                        this.zeroOrientation();
                        this.zeroed = true;
                    }
                    hmdQuaternion.copy(this.zeroQuaternion).multiply(dolly.quaternion);
                    return hmdQuaternion;
                };
            })(),

            updatePosition: (function() {
                var position = new THREE.Vector3();
                var quaternion = new THREE.Quaternion();
                var scale = new THREE.Vector3();
                return function() {
                    var el = this.el;
                    var deltaPosition = this.calculateDeltaPosition();
                    var currentPosition = el.getComputedAttribute('position');
                    this.el.object3D.matrixWorld.decompose(position, quaternion, scale);
                    deltaPosition.applyQuaternion(quaternion);
                    el.setAttribute('position', {
                        x: currentPosition.x + deltaPosition.x,
                        y: currentPosition.y + deltaPosition.y,
                        z: currentPosition.z + deltaPosition.z
                    });
                };
            })(),

            calculateDeltaPosition: function() {
                var dolly = this.dolly;
                var deltaPosition = this.deltaPosition;
                var previousPosition = this.previousPosition;
                deltaPosition.copy(dolly.position);
                deltaPosition.sub(previousPosition);
                previousPosition.copy(dolly.position);
                return deltaPosition;
            },

            updateHMDQuaternion: (function() {
                var hmdQuaternion = new THREE.Quaternion();
                return function() {
                    var dolly = this.dolly;
                    this.controls.update();
                    if (!this.zeroed && !dolly.quaternion.equals(this.zeroQuaternion)) {
                        this.zeroOrientation();
                        this.zeroed = true;
                    }
                    hmdQuaternion.copy(this.zeroQuaternion).multiply(dolly.quaternion);
                    return hmdQuaternion;
                };
            })(),

            zeroOrientation: function() {
                var euler = new THREE.Euler();
                euler.setFromQuaternion(this.dolly.quaternion.clone().inverse());
                // Cancel out roll and pitch. We want to only reset yaw
                euler.z = 0;
                euler.x = 0;
                this.zeroQuaternion.setFromEuler(euler);
            },

            getMousePosition: function(event, canvasEl) {

                var rect = canvasEl.getBoundingClientRect();

                // Returns a value from -1 to 1 for X and Y representing the percentage of the max-yaw and max-pitch from the center of the canvas
                // -1 is far left or top, 1 is far right or bottom
                return { x: -2 * (.5 - (event.clientX - rect.left) / rect.width), y: -2 * (.5 - (event.clientY - rect.top) / rect.height) };
            },

            onMouseMove: function(event) {
                var pos = this.getMousePosition(event, this.canvasEl);
                var x = pos.x;
                var y = pos.y;

                var pitchObject = this.pitchObject;
                var yawObject = this.yawObject;

                if (!this.hovering || !this.data.enabled) { return; }
                yawObject.rotation.y = this.data.maxyaw * -x;
                pitchObject.rotation.x = this.data.maxpitch * -y;
            },

            onMouseOver: function(event) {
                this.hovering = true;
            },

            onMouseOut: function(event) {
                this.hovering = false;
            },

            onTouchStart: function(e) {
                if (e.touches.length !== 1) { return; }
                this.touchStart = {
                    x: e.touches[0].pageX,
                    y: e.touches[0].pageY
                };
                this.touchStarted = true;
            },

            onTouchMove: function(e) {
                var deltaY;
                var yawObject = this.yawObject;
                if (!this.touchStarted) { return; }
                deltaY = 2 * Math.PI * (e.touches[0].pageX - this.touchStart.x) / this.canvasEl.clientWidth;
                // Limits touch orientaion to to yaw (y axis)
                yawObject.rotation.y -= deltaY * 0.5;
                this.touchStart = {
                    x: e.touches[0].pageX,
                    y: e.touches[0].pageY
                };
            },

            onTouchEnd: function() {
                this.touchStarted = false;
            },
            /**
             * Called when a component is removed (e.g., via removeAttribute).
             * Generally undoes all modifications to the entity.
             */
            remove: function() {}
        });

        /***/
    })
    /******/
]);  The big problem here is that raycasting as implemented in three.js is unavoidably slow. By default, it loops through every single object in your list, and then through every single face on any object that matches both the bounding sphere and the bounding box. Even if you use an [octree](http://threejs.org/examples/webgl_octree_raycasting.html), it still runs at O(n) through every single face...unless you have a `BufferGeometry`, in which case it does nothing or breaks, since it's just not supported in the provided octree raycasting code.

To make performance matters worse, however you do it, the search is undirected so it has to find every single object that intersects your ray and then sort them by distance to find the first hit. It has no way of ignoring potential objects that are farther away than your best solution so far.

One alternative is to try [GPU picking](http://brianxu.github.io/GPUPicker/), which is MUCH faster. But it has a couple of problems:
1. It gets pretty complicated if you want to get anything other than the id of the object you've selected. If you want the position and normal of the point of intersection, that's more information than you can squeeze through a single 4-byte pixel.
2. It requires a `readPixels` call, which causes GPU/CPU sync, potentially a pretty large delay, enough to cause serious jank.

I'm considering a more optimized CPU-side approach, which is to use octrees at two levels: one for bounding spheres and boxes of objects, and then one for each geometry instance. For each object that matches, the ray would be transformed into the local object space, and then the search would proceed at O(log n) through the triangle faces of that object. The search would run depth-first, prioritizing octree nodes that are closest to the origin of the ray (and within the max distance, of course). In theory, this should allow you to stop early - not after the very first match, but a hell of a lot less than every single node, object and triangle. The object-level octree would have to be updated every time an object moves, but 

I have some concerns/questions about this approach:
1. Will the geometry octree take up too much memory?
2. Will it take too long to generate the geometry octree the first time?
3. Maybe there's some way to represent it compactly in a typed array or two, so it can be generated in a worker and transferred over, addressing both of the above?
4. Are there any other uses for such a data structure, as long as we're going to the trouble?
5. What about morphing/animated geometries?

Does anyone have a better idea?
 Incidentally, there is already an [issue](https://github.com/mrdoob/three.js/issues/5691) for this at the three.js repo, but it has not had much attention.
 @dmarcos Yes, I do think that aframe needs to raycast fewer things, as [noted above](https://github.com/aframevr/aframe/issues/829#issue-126553429): in particular, photo spheres. Until this gets fixed in three.js (if ever), a photo or video sphere will match every single time and require searching through every single triangle on every frame.

Also, I agree that this should be addressed over in three.js, but the existing implementation is mostly useless (not to mention undocumented and hard to find) and the discussion over there seems to have been lost in the pile. I figured we could discuss it over here since this community seems a bit more focused. If I could get some feedback on the idea, I can make an attempt to fix it and make a pull request over there, or even publish it as a separate repo.
 Could it be that hidden objects are also included in the raycasts?
I tried to create a multi-scene environment in A-Frame by hiding/showing objects, every added object seemed to slow it down more, even when the object is hidden. I know, this approach isn't ideal, but it appeared to be the best way to have multiple "rooms" currently. 

I also had strange behaviour when a hidden object was on top of a shown object, when the shown object was being clicked, nothing happened, but the hidden object did seem to pick up clicks.
 The unclickable items because of overlaying hidden objects is fixed in the latest dev.
I tried to speed up raycasting a bit locally, see:

https://github.com/aframevr/aframe/compare/dev...jerbob92:dev

Not sure if it's the right approach but it seems to be smoother on my HTC One M9.
 @jerbob92 Looks like a big step in the right direction.

BTW, are you guys building geometry for a single-color background "sky"? Might it not be much more efficient to just set the clear color?
  I started working on this: https://github.com/xirvr/aframe 
Working off of: https://gist.github.com/xirvr/275483488ea35d85b895f7f44de7afdf 
 Given the large overhead for the glTF loader / parser / etc from the ThreeJS library, @dmarcos and @ngokevin recommended starting with this as a 3rd party component.  I converted the above branch changes to: https://github.com/xirvr/aframe-gltf 
  Same issue here. 
- Device: Epson Moverio BT-200
- Browser: Firefox 45
 @dmarcos still having this error. I'm using a samsung s7 edge with firefox.

Edit: I was able to almost get rid of the error by going into`aframe.js` and changing `util.max_timestep` and 'util.min_timestep' Is this bad. What should be done to solve this error.  
 I'm having this error occur too using an iPhone 6 Plus. I'm not currently using Aframe but I'm using the WebVR polyfill so I feel like it's potentially related to that.
 It is clearly related to WebVR polyfill. See webvr-polyfill.js:5706:

```var deltaS = timestampS - this.previousTimestampS;
                if (deltaS <= Util.MIN_TIMESTEP || deltaS > Util.MAX_TIMESTEP) {
                    console.warn('Invalid timestamps detected. Time step between successive ' +
                    'gyroscope sensor samples is very small or not monotonic');
                    this.previousTimestampS = timestampS;
                    return;
                }``` This appears to be still an issue: https://github.com/googlevr/webvr-polyfill/issues/201

If anyone can follow up there with more info (what are the timestamps? are they not updated or too small/large?), I'll check it out Closed via https://github.com/googlevr/cardboard-vr-display/pull/9 -- will be in the next polyfill release. To clarify, this just silences the messages and only displays once. In testing, was getting messages for this in iOS and Firefox for Android, but the pose estimation was still working just fine, so this clears out the console a bit. If anyone has issues with this warning AND poses are not working, would love to learn more!  Hi ngokevin,

Would following warn message be sufficient in this case:

_core:schema:warn Unknown component property: primitive box_

I would alter the code like this:

```
Object.keys(propData).forEach(function (propName) {
    if (!schema[propName] && !silent) {
-      warn('Unknown component property: ' + propName);
+      warn('Unknown component property: ' + (propName != '' ? propName : propData[propName]));
    }
  });
```

If you find it OK, I will create pull request for this.
   Disabling antialiasing was a method we employed to make Firefox OS TV games more performant.  Can we close this based on perf > image quality?
  Would love to see this feature, @ngokevin .  AFAIR allowfullscreen was disabled in JSFiddle for fraud protection. @oskarkrawczyk - any thoughts? 
 I'm amazed that I've not removed this for fraud protection (as @zalun has done with jsfiddle), since jsbin seems to attract some pretty wonderful fraud.

Anyway, I digress. @ngokevin where would you expect to go to full screen? In an embedded bin or from the jsbin editor?
 @ngokevin Ah, cheers for clarifying. I got a notification from twitter (on a dead account I have under my name), from @darkwing. 

Worth closing the issue if it's not an issue anymore? 
 @zalun Correct. But now that it's impossible to remove JSFiddle embed UI in the embeddable it might as well be re-enabled.
    As a user, I agree that mixin is a better name for the same reasons.
  Hey I know this is closed but it appears the the issue reappears if someone is using Microsoft Edge as a browser on the first load. Not sure if this counts as a problem or not but thought I would mention it as is a bug for something I'm building for clients.   Still seeing this in Chrome. Any progress or is this a browser issue?
 @ngokevin  Is that issue still there I'm not able to reproduce and experience this issue!?
  Unfortunately this new animation system doesn't have any docs yet :/

Experimenting with loading animations as part of a three.js JSON model a bit here: https://github.com/donmccurdy/aframe-extras/blob/master/src/loaders/three-model.js
  Test case for 0.5.0:

The yellow square with opacity: 1 works fine. The yellow square with partial opacity does not appear unless the DOM elements are re-ordered:

````
<html>
<head>
	<script src="aframe-v0.5.0.min.js"></script>
</head>
<body style="background-color: black">
	<a-scene>
		<a-plane material="color: red; opacity: 0.5" position="0 1 -2"></a-plane>
		<a-plane material="color: yellow;" position="-0.6 1.6 -2.1"></a-plane>
		<a-plane material="color: yellow; opacity: 0.5" position="0.6 1.6 -2.1"></a-plane>
		<!-- Move red plane here and it works -->
	</a-scene>
</body>
</html>
```` I have an issue where a fadeIn / fadeOut of a simple plane in front of the camera is making other elements with transparency disappear. Is this the same issue?

I'm adding the fade plane dynamically, so should I be trying to add it to the top or the bottom of the DOM to try to beat this?

I should note the fade plane ends up being a child of the camera currently.

And since this is something I'm working on at work, if there's anything I can do to help move the final solution forward just let me know. I have no idea where this would start though :)
 Is there a reason that the standard solution to this (sorting transparent objects based on distance to the camera), is actively disabled by AFrame? Admittedly it doesn't always work but in most situations it works way better than manually controlling the render order. Especially in head-tracked VR, where the user's head can be anywhere.

At least having the option to turn it on would be great.

I'm referring specifically to a-scene.js:486
```
renderer.sortObjects = false;
``` Consider turning it on by default with an option to turn it off. Having it off works well for 3DOF experiences with no movement, or very fixed movement, but the addition of 6DOF or even teleport will break most manually-ordered objects.

The case where sorting really breaks down is with intersecting (or self-intersecting) objects, since the sort is per object, not per triangle (though in the wider world where compute shaders are available, sorting per-triangle is sometimes used). To support manual ordering of some objects for those cases you could then expose threejs's `Object3D.renderOrder` property if it's not already.

The accepted answer here has a good explanation of the problems and potential solutions (including one of the replies which talks about the render queues):
http://answers.unity3d.com/questions/609021/how-to-fix-transparent-rendering-problem.html Can you post an example or screenshot of what happens when the order is not by Z index, to see the ugly effect? Interesting. Thanks. So sorting order for transparency is the order in which the nodes are found in the scene tree? Maybe it can be configurable with an attribute, like `sort-order="3"` to not have to worry about tree order. Does Three.js have any such feature? Or does it too rely on tree order? Tree order is (I assume) used in the case where `renderer.sortObjects` is set to false (like AFrame currently does). Unless you're controlling the camera viewpoint very carefully this is almost never what you want as a global setting. Is there some reason why the `renderer.sortObjects = false;` line still hasn't been removed? Seems like such a simple fix that would cover 95% of cases, and there's a reason why the default value is true in three.js. I'll submit a pull request if it's just because no one has got around to it.

For anyone looking for a quick workaround, see [this answer](https://stackoverflow.com/a/42003726/2501624). @adelespinasse I tried using sort objects once after seeing it in this thread and the results were very poor in VR. Render order would change as I turned my head, causing the order of objects to flicker back and forth. Have you had better results? @wmurphyrd It's worked for me so far, but I've only tried it with very simple toy scenes (like, 3 non-overlapping convex translucent objects). Did you have concave or overlapping objects or anything?

I don't know the details of how the sorting works...  are objects always sorted for every frame, or is it done opportunistically when there's time or something? And are objects sorted separately for each eye?  Personally, I think white or an off-white color would be most appealing as a default.
 What would be a good workaround for this in the mean time? A solid colour skybox? @ngokevin this is closed by #3277   @ngokevin I've updated your `shadow` and `shadow-light` components for A-Frame v0.2.0 and the THREE.js changes [here](https://github.com/donmccurdy/aframe-extras/tree/master/src/shadows). Performance seems OK with directional lighting, but [bad with point lights](https://github.com/donmccurdy/aframe-extras/issues/50). 

Having trouble with some of the parameters though – shadows have been offset or weirdly scaled in my tests so far.
 @donmccurdy 
Try settings your shadow bias to `0.02` and increasing your map size to a width and height of `2048`. I find tweaking the bias stops the light bleed at the edge of objects and a higher map size will help that jagged look. Also, you may want to drop shadow darkness; it seems that it's legacy at this point.
 @msimpson thanks! that does look sharper but the shapes of shadows are still wrong. maybe i'm misunderstanding how directional lights should be positioned, but haven't found a good example yet.

Example here - the shadow seems to only come from the end of a longer object : /

<img width="775" alt="screen shot 2016-06-13 at 3 32 48 pm" src="https://cloud.githubusercontent.com/assets/1848368/16011280/992dbb74-317c-11e6-973d-a33e144ceefd.png">
 @donmccurdy 
That's really odd. I've not seen that before. Actually, can you reproduce that in a fiddle or something so I can see how that's happening?
 Not sure why it isn't working on codepen, but a similar scene I have working on my own webserver:
http://codepen.io/msj121/pen/gMMyrO

Just figured I would let you see it in action; sadly, something is wonky on codepen or I made a stupid mistake....

Try it for yourself:

```
<a-scene>
  <a-sphere shadow="cast:true;receive:true;" position="0 0.25 -4.5" radius="1.25" color="#EF2D5E"></a-sphere>
  <a-box shadow="cast:true;receive:true;" position="-1 -0.5 -3" rotation="0 45 0" width="1" height="1" depth="1" color="#4CC3D9"></a-box>
  <a-cylinder shadow="cast:true;receive:true;" position="1 -0.25 -2" radius="0.5" height="1.5" color="#FFC65D"></a-cylinder>
  <a-plane shadow="cast:true;receive:true;" rotation="-90 0 0" position="0 -1 -3" width="4" height="4" color="#7BC8A4"></a-plane>
  <a-entity shadow-light="type:spot;angle:45;castShadow:true;" position="15 25 15"></a-entity>
  <a-entity camera="active:true" wasd-controls="" look-controls="" position="0 0 0" rotation="0 0 0"></a-entity>
</a-scene>
```
 I wouldn't complicate the light component any further with shadows. I have a pr in the works which uses three components: a shadow-scene, shadow-object and shadow-light component, to be used on the respective elements. With the shadow-scene you can globally set shadows on or off and set the type.

Will continue on it after aframe is updated to use the latest threejs.
 Any update about shadows?
I really want A-Frame official shadows support~ @donmccurdy Yeah, I confirmed `aframe-extras.shadow` works now, thanks. But I found a bug and have a feature request so I'll send PR to it.

And it seems like shadow will get in 0.5.0, that sound p good to me :D
 As for me(Three.js user/contributor and Web contents creator),
adding the shadow stuffs into existing light is more natural than separating them.
  @caseyyee is that still valid?  Hi, my obj files are rendering flat in the following example (white object), is this a problem with my lighting? 
[Example Site](http://kliang3.github.io/)
  Has this been fixed yet?  Still happening, even in embedded example. When selecting a text outside canvas, you can no longer rotate the view.

![untitled](https://user-images.githubusercontent.com/796966/27422085-5559d6d2-5703-11e7-9d5b-fb6be48037ad.gif)

  FYI - As part of my PR (#1867 for issue #269), this would now output the below:

```
localhost:aframe gavinfitzgerald$ npm run ghpages lolerz

aframe@0.3.1 preghpages /projects/training/vr/aframe
npm run dist && rimraf gh-pages && mkdirp gh-pages && cp -r {.nojekyll,dist,lib,examples,index.html,style} gh-pages/. 2>/dev/null || : && git checkout dist/ && replace 'build/aframe.js' 'dist/aframe.min.js' gh-pages/ -r --silent

aframe@0.3.1 dist /projects/training/vr/aframe
npm run dist:min && npm run dist:max

aframe@0.3.1 dist:min /projects/training/vr/aframe
npm run browserify -s -- --debug -p [minifyify --map aframe.min.js.map --output dist/aframe.min.js.map] -o dist/aframe.min.js

aframe@0.3.1 dist:max /projects/training/vr/aframe
npm run browserify -s -- --debug | exorcist dist/aframe.js.map > dist/aframe.js

aframe@0.3.1 ghpages /projects/training/vr/aframe
ghpages -p gh-pages/ "lolerz"

Cloning git@github.com:lolerz/aframe.git into node_modules/ghpages/.cache/lolerz/aframe/gh-pages
Publish callback threw:
localhost:aframe gavinfitzgerald$
```

To fix / change the "Publish callback threw:" into something a bit louder & clearer, I'd say contributing back to ghpages would be the way to go.
  This would be pretty cool to have. Maybe if the component took the first child `<svg>` tag, then used the [data-uri trick](http://getcontext.net/read/svg-images-on-a-html5-canvas) to convert it into a texture? 
 Mostly interested in this because it could be a declarative alternative to what's being worked on in https://github.com/aframevr/awesome-aframe/pull/41
 [https://threejs.org/docs/#Examples/Loaders/SVGLoader](https://threejs.org/docs/#Examples/Loaders/SVGLoader) @7dir  - any update? Even rough code would be appreciated; save me from re-coding the wheel. Thanks @ngokevin, @morandd  ping
update regestry please
https://github.com/7dir/aframe-svgfile-component  @ngokevin Have you all decided whether this will be a new physics implementation, or try to integrate cannonjs / oimojs / etc with A-Frame?
 @donmccurdy I think that's being discussed [here](https://github.com/ngokevin/aframe-physics-components/issues/7)
 @RangerMauve oh! Cool thanks I missed that.
 I'd put a vote for cannon, I've found it predictable and reliable. If you set the global friction to 0.0, then you can slide past boxes when you run into them. The newest cannon supports running the physics at a lower frame rate than the renderer, and just interpolating the inbetween steps, which might be useful. Ammo is a beast, it's really big. Oimo is a pretty legit option, but cannon has better documentation, and @schteppe is a pretty responsive dude.
   Is this feature still considered or is there a workaround to achieve this behavior?
:+1: 
  See also these, which should be cleared up as part of this work:

https://github.com/aframevr/aframe/issues/1154
https://github.com/aframevr/aframe/issues/1155
 that's just a regular event? so something like this in indicator.init()
would work?

this.parentNode.addEventListener('model-loaded', function() {
  this.parentNode.removeChild(this);
});


On Wed, Mar 29, 2017 at 1:27 PM Kevin Ngo <notifications@github.com> wrote:

> This could be done as a component. Display something until model-loaded
> fires.
>
> <a-entity model>
>   <a-entity indicator geometry material/>
> </a-entity>
>
> AFRAME.registerComponent('indicator', {
>   init: function () {
>     // Remove this entity when `model-loaded` fires.
>   }
> });
>
> —
> You are receiving this because you commented.
> Reply to this email directly, view it on GitHub
> <https://github.com/aframevr/aframe/issues/423#issuecomment-289995377>,
> or mute the thread
> <https://github.com/notifications/unsubscribe-auth/AADDt19TB_Vs1OzHKmIB4MtvwFKMLaC8ks5rqfnHgaJpZM4HDrER>
> .
>
  whats difference between #578 and this?
  Until someone else documents it elsewhere, for the record this seemed to work by adding this to the entity:
`onClick="location.href='https://google.com'"`
 I'd like to have `href` component, which support normal link

`<a-spere href=“http://www.example.org”>`

or support anchor, 

`<a-cylinder href=“#box”>`

Click this object and it will focus on the object with `id="box"` [with the animation]

So each object could be used as a normal html linkable element.

It will be nice when cursor moved onto the object, the cursor changes it shape.
 added simplest example: 2 objects with href component https://gasolin.github.io/aframe-href-component/basic/index.html
 Anyone knows what's the status of this? The FAQ says "Link traversal support was introduced in the WebVR 1.0 API and A-Frame 0.3.0. There is a link component that can trigger navigation and built-in support for knowing whether the user is navigating from another WebVR experience.", but I can't find any other mention of the link component in the documentation. Does it exist? 
 I'm also wondering about this too; I've been waiting to update my A-Frame projects to 0.3.0 for months so I can implement link traversal. According to this discussion on Stack Overflow it was a mistake, and link traversal actually hasn't been introduced yet: http://stackoverflow.com/questions/39311524/a-frame-link-traversal-support
Here's hoping it gets added soon.
 is there an update on href?
doesn't seem to work for me . Hello, I'm looking for an example of opening a new a-scene (defined in a separate file) through a link. Is that something that version 0.5.0 can handle?  any follow up or solution?
 Just for reference, I experimented with using PhantomJS to render a page continuously and stream it in as a video. From there you could forward click/keypress events back to Phantom. This works, but it's not very practical because phantom is very process intensive and can only render every so many milliseconds so the frame rate of the page is extremely low.

It sounds like some sort of new browser API will be the way to go.

https://github.com/cjroth/aframe-phantomjs-continuous-streaming  THREE.WebGLRenderer: Error creating WebGL context.n.WebGLRenderer @ aframe.min.js:19t.exports.Object.create.setupRenderer.value @ aframe.min.js:30t.exports.Object.create.attachedCallback.value @ aframe.min.js:30o @ aframe.min.js:27
aframe.min.js:19 Uncaught TypeError: Cannot read property 'getExtension' of nullget @ aframe.min.js:19n.WebGLRenderer @ aframe.min.js:19t.exports.Object.create.setupRenderer.value @ aframe.min.js:30t.exports.Object.create.attachedCallback.value @ aframe.min.js:30o @ aframe.min.js:27
vuutuapp.html:29 statusChangeCallback

Instruction : open http://www.vuutu.xyz , its working fine in firefox but on chrome its giving error. (Version 47.0.2526.106 (64-bit))
  I'm curious to know, when React adds stuff to the DOM after it's diffing process, will that stuff be picked up by A-Frame?
 @ngokevin

So without using aframe-react, if I have aframe and react from CDN loaded in the page (and that's all), then I can just start writing React components without needing to do anything special? For example

``` js
class Foo extends React.Component {
  render() {
    return (
      <a-scene>
      </a-scene>
    )
  }
}
```

Do you know how A-Frame detects new elements in the DOM to read from (and then render based on what it sees)? Is it using some browser APIs? Or something custom?

EDIT: I answered my own question after looking at the source: It's using document.registerElement (the polyfill if not available)! This is awesome. So people can use anything like Mithril, Mercury, Om, CitoJS, etc, to output elements to the DOM (elements with names that match those registered by A-Frame) and then A-Frame will automatically detect those and update the rendering.

This is really cool!! This is probably the best use of `registerElement` I've ever seen, and a good idea that I'd like to borrow for what some of us are working on at http://infamous.io.
 Cool. It's really awesome stuff! This makes me think of regular HTML elements in a whole new way. :smile: 
 @ngokevin ECS?
 Oh, yes, it's also what [Famous](http://famous.org) was doing before it got abandoned. A scene graph in Famous was made up of instances of a `Node` class (entity), and onto each Node could be added various components (tranforms, meshes, event handlers, etc) that could be independent or interact with other components on the same node. They were also making something called Famous Framework, which was their attempt to make a declarative HTML layer on top of their Engine. But they weren't using `document.registerElement`!

I wonder how I overlooked all this time that custom elements would be the perfect communication mechanism between a rendering engine (Three.js, Famous, Babylon, etc) and a DOM manipulation library (React, Mithril, etc).
  iOS devices wont play videos in case there was not a user click event.
So i use a start button.
Unfortunantely the animations already start uppon document.onload and are no longer in sync.
 @ngokevin how can this be configured with a scene component?

@cvan sounds good. i also love the idea with different timelines. :-)
 With begin i have to use integer (Delay (in milliseconds) or event name to wait on before beginning animation.) Is it possible to begin animation on click?  As discussed in #347, I moved some of the browserify-specific dependencies so they're properly installed during a bundling process. 
  Try to move the camera around:
http://codepen.io/anon/pen/eJvNvb

For me it seems as if the sound position is only calculated based on the cameras starting position/rotation. As soon as you move around or rotate the camera, it's no longer correct
 @ngokevin this issue seems to be solved but issue have left open since commit message was not correctly formatted to auto close this.
  I feel like this should work, but doesn't, and I'm not sure why. I can load a gif fine in an a-sky object, but it only displays the first frame instead of animating properly. 
 Thanks. Can I turn this into a feature request?
 I would also like the feature of playing .gifs on a surface. 
  Right now `aframe-core` depends on `browserify-css` as a browserify transform. It works magically when you depend on the CommonJS version from npm using browserify. But, other bundlers do not support this.

Tools like jspm/rollup/webpack/whatever need to rely on the UMD build. Webpack users can set up loaders (like `transform-loader` or `ify-loader`) to work with the CommonJS export, but this might not be immediately clear to consumers.

Eventually it might be worth transpiling the static assets (like CSS, GLSL, etc) on pre-publish so that webpack/browserify/jspm/etc users get the same CommonJS export.

One option which is currently a work in progress:
https://github.com/livejs/transpilify

Other ideas discussed here:
https://gist.github.com/mattdesl/aaf759da84cc44c22305

This issue is really just to discuss any other ideas/approaches, and how this might affect development workflow, etc. Or, maybe no change is needed, and docs just need to provide more details on other bundlers. 
  When trying to make a dome I noticed that neither phiStart, phiEnd, thetaStart or thetaEnd have any impact on the sphere primitive (as otherwise described in the documentation: https://aframe.io/docs/components/geometry.html#Sphere)

Codepen:
http://codepen.io/anon/pen/wMgmYV
 Ah, my bad got a little late
I still think the issue is there, though:
http://codepen.io/anon/pen/wMgmYV
 It's no problem for me right now. In my case I found I could use a cone in stead (I guess a cone also performs better as it has less segments), but thanks for looking into it and good it's on it's way :) Will definitely be useful!
  I started fiddling with the example on codepen, first thing I tried was adding a model from Blender. I uploaded that file on my own website's server, but it didn't load. At first I thought it was because I was exporting non valid files. SO I made various other models and exports.

However, I found that loading the tree1 model from the secured server from aframe did work ( https://aframe.io/aframe/examples/_models/tree1/tree1.dae) I then tried loading the same file from my server.
Loading the same file in codepen from my server doesn't work (http://www.jon-ibe.be/aframe/tree1.dae)

After loading an html file from the same folder on my own server with the same code as the codepen I saw the models loading correctly.

http://www.jon-ibe.be/aframe/aframetest.html
http://codepen.io/anon/pen/OMbmyz?editors=110

So hence I'm "blaming" this on the security restrictions.

Maybe it's a logical thing security wise, but I didn't see any documentation on this.
 Ok, thanks for the clarification. Makes sense now.
I have no idea where I could set this up on my websites server, I doubt I have access to this function. I'll ask the provider. 
For now I'll do my experiments on my own, I just liked the quick and easy way of editing a live Codepen.
I'll close the issue since it's not A-frame related.
  Can Panorama image rotate by the position of MOUSE ?

I have downloaded the example/template-sky,  with drag to rotate the sky panorama images. is there a way to rotate the image by the position x,y of mouse 
  Rather than the scene being centred around how the user is holding the VR device I'd like to fix the scene based on compass directions (north, east, south, west') in order to use A-Frame for an augmented reality project.

I'm not sure whether this is possible and I haven't been able to find any info on the topic. Please can someone point me in the right direction?
 Thanks for the quick reply Josh, although I've only just noticed it in the avalanche of Christmas emails.

I'll look into creating a mini-spec, it could be a useful AR tool for developers :)
 Peter, I'd be interested in that too.  I've got "look at using A-Frame with our argon.js AR toolkit" on my todo list, but it'll be a bit till I can do it. 
 I suspect that aframe-artoolkit just uses the artoolkit, not device orientation, so it doesn't matter to them.  I would agree that we should definitely use the absolute real-world device orientation of the device if we have it.  Codepen:
http://codepen.io/anon/pen/vLyzYq?editors=100

The cylinder to the left represents the way that a-curvedimage is currently implemented. It has a scale of 1 1 -1 to be able to show a given texture nonmirrored along the horizontal axis inside the cylinder. This has the side effect of only letting light from _outside_ the cylinder illuminate it.

The cylinder to the right has a scale of 1 1 1 and as you can see the light illuminates it correct, but if you were to apply a texture to it, the texture would be mirrored along the horizontal axis.

For now I've solved it by using the cylinder to the right and then in photoshop mirror the original texture so it looks correct after being mirrored back in a-frame
  Apologies if this is missing the obvious, but I'm trying to add aframe as a project dependency based on the instructions listed in the README:

```
$ npm install aframe
```

And inside `index.js`:

```
require('aframe')
```

However, when I try to run browserify (installed globally), I get errors related to dependencies:

```
$ browserify index.js
Error: Cannot find module 'polymerize' from '/test-aframe/node_modules/aframe'
    at /usr/local/lib/node_modules/browserify/node_modules/resolve/lib/async.js:46:17
    at process (/usr/local/lib/node_modules/browserify/node_modules/resolve/lib/async.js:173:43)
    at ondir (/usr/local/lib/node_modules/browserify/node_modules/resolve/lib/async.js:188:17)
    at load (/usr/local/lib/node_modules/browserify/node_modules/resolve/lib/async.js:69:43)
    at onex (/usr/local/lib/node_modules/browserify/node_modules/resolve/lib/async.js:92:31)
    at /usr/local/lib/node_modules/browserify/node_modules/resolve/lib/async.js:22:47
    at FSReqWrap.oncomplete (fs.js:82:15)
```

Again, apologies if this is barking up the wrong tree but I'm out of ideas.
 Hi,

It's because you don't have it in your node_modules directory I suppose. Go to you aforce node_module and then try npm install. This should install all dependencies from aforce directory. good luck!
 Thanks for the pointer. I suppose I'm still wrestling with this: if someone adds Aframe to their project purely as a dependency, shouldn't Aframe install its own dependencies as well? I might be stretching here, but I think that's a reasonable expectation when adding a utility to a project.
 No problem :) Right it should be. I had the same problem. Unfortunately if you are adding it to your own dependencies then it doesn't run all other stuff - just downloading aforce. Thats it. 

Did you manage to handle that error ? :)
 Yes, the tip you provided worked. However, I believe my point still stands: Aframe should install dependencies necessary to its functioning as part of the install process.
_Edit:_ or, if I'm making too many/too broad of assumptions here: at least amend the install instructions to cover this case. I'll admit I'm not terribly familiar with package management best practices, and the error received is fairly inscrutable.
 Thanks @cvan! I've been poking around was thinking of moving some of the dependencies necessary for building from `devDependencies` to the regular `dependencies`—am I totally off-base? Happy to test and PR.
 Took a stab at this—[I moved the dependencies.](https://github.com/mattpolicastro/aframe/commit/a72b7f17a31a3eb0819aa9ddc9574d245b6c784e) Can't say I've given it terribly rigorous testing, but:
1. Added my tweaked `aframe` as a local dependency
2. Parent project's `index.js` contains `require('aframe');` to make sure it bundles the necessary files
3. Ran `npm install` grabbed all of `aframe-core` as well as the browserify plugins
4. Ran `browserify index.js` and got a successful output
 Apologies for dropping off the map for the past few days—thanks for addressing, @cvan!
  Just try the cursor & hover example on a mobile device and it does not work. Interaction does not work on mobile devices? 
 Hello,

I have used the "demo" Cursor & Hover on iPhone 6, IOS 8.4 and Safari browser.
I expected to look at the object and see the transformation like it is working on desktop version.

How can i interact with a object?

Thanks
 This example works ok.
http://swimminglessonsformodernlife.com/aframe-core/examples/panoexplorer/
Can i see the source code?

But the example source code:
https://github.com/aframevr/aframe/blob/master/examples/interaction-cursor/index.html

Does not do the hover change.
Screenshot here.
![img_0159](https://cloud.githubusercontent.com/assets/12912643/12195779/b50a45da-b5f1-11e5-80b1-763d0114db54.PNG)
  Modified three.js CONTRIBUTING.md to suit our contribution process.
 Fixed links and punctuation
  Sound component was added in https://github.com/aframevr/aframe-core/pull/326/files . There are no examples on how to use it. Do we need changes to templates to be able to use it?
  When we are in VR mode and redirect from page 1 to page 2 , page 2 opens in normal mode. 
 Guys got it, So this is not a A-Frame issue, makes sense thank you very much. 

As an alternate : Do you think an implementation which allows you to set the screen mode during page load either as URL param or a HTTP post parameter will help within A-frame. I believe such feature will only make it more agile to use for solving complex business problems. Anyways thank you very much.
 Hi! How can you request full screen? I always get the error message that it needs to come from user's input, which is why I can't force it, even with a cookie telling me I was in VR before
  Does this works as a VR HMD?
  I'm currently working on implementing [three-bmfont-text](https://www.npmjs.com/package/three-bmfont-text) as a component.

It will look like this:

``` html
    <a-entity bmtext="text: Hello, World!;
              font: demo/fonts/Exo2Bold.fnt"
              material="color: #66E1B4"
              position="0 2 0"></a-entity>
```

A couple problems have come up and I'm not sure whether AFrame can support it yet:
- The BMFont file specifies the path to the `map` texture, so the user should not need to specify `src` in the `material` attribute. However, it seems like AFrame expects this is the only way to set a map on a texture?
- `this.el.object3D.material.map` is undefined, so I can't even override it programmatically ? 
- Is there a way to handle async (resolve, reject) with AFrame components? Changing the font will trigger some XHRs that may or may not succeed
- Pure bitmap font is pretty useless in VR/3D, instead most users will want to use a SDF font. However, I am not sure how `material` can use a custom shader specifically for this component.
- `update()` is called immediately after `init()` with no `oldData` parameter, is that intended? 
- The default scale is huge since it is in pixel units (not world units). I could apply a scaling matrix to the geometry every time the text changes, but that is a bit expensive. Is there a way I could override this scale, maybe by attaching my text mesh to a parent Object3D with its own scaling, so that the user can expect that `scale=1.0,1.0,1.0` looks similar to the rest of their primitives
- This component expects some other defaults for `material` like `side: double` (not 100% needed but it will be the common case)

Maybe I should register a second component like `textmaterial`, `bmmaterial` or `bm-material` (is that valid HTML?), so that I can listen to changes in `color` and trigger updates in my custom SDF shader.
      Sorry for the weird pull request before. 
  A simple request from France, if it would be possible to have the Z key mapped to the W action, and same thing with Q for the A, it would allow a seamless controller for AZERTY keyboards
 I was thinking of trying a general `keyboard-controls` component that emits arbitrary keyboard events on the target element (as opposed to `wasd-controls` focusing on movement) and the `e.key` polyfill seems like a really good way to go.

Apologies if this is horrifying and framework-ey, but any thoughts on using some sort of event-binding syntax?

Example:

``` html
<a-model src="player.obj"
         keyboard-controls
         sound="src: pew-pew.mp3;
                on: keydown[key=f]">
</a-model>
```

Same thing could apply to more complicated actions like animations or WASD navigation, perhaps.

I tried something similar in gamepad-controls [here](https://github.com/donmccurdy/aframe-gamepad-controls/blob/bfa349214cb1ac9acedc0824e27adb2e4881770a/gamepad-controls.js#L215-L219), but i'm not entirely sure about the idea.
 Oops, just noticed the `<a-event />` syntax. That also seems nice, although I'm less clear about whether it would make sense for keyboard bindings.
  Cone entity method is described here:
https://aframe.io/docs/components/geometry.html

Codepen showing that nothing happens:
http://codepen.io/anon/pen/bEexvM
 It works for me, can you give a try? http://codepen.io/anon/pen/OMXdZq
 Ops sorry I just didn't notice that you wrote `...using a cylinder...` :)
  I was thinking of making a component for setting constraints on where a person could walk based on a mapping of some sort. It'd be useful if the component could just be attached to something that already has the WASD component and listen to when the person gets moved.

It'd be nice if I could make code that'd look something like:

``` js
this.addEventListener("move", handleMovement);

// ....

function handleMovement(event){
 var position = event.data.position;
 var previousPosition = event.data.previousPosition;

 if(!canMoveTo(position)){
   this.setAttribute("position", previousPosition);
 }
}
```
 Thanks! Is there something in the docs related to that event that I must have missed?
 Ah! Totally didn't register that part. Thanks!
  Objects randomly overlap with each other 

Example : check out http://www.vuutu.xyz or if this is taking time for DNS replication, please check out http://www.justdeliver.us

login and you should be able to see your facebook photos as a curved image. If you mouseover a picture, it overlap.
 Sorry about this trouble, been playing on this environment. Give me sometime and i will compile if nothign with some screen shots and some codes. Will provide more details.
 Its most likely that i might be screwing it up somewhere , I am looking into it now but just wanted to keep you in loop as well :

I am looping through all the facebook photos as a curved image , The logic is simple

Each subsequent image position 'position="0 '+s+' 0"' where s += 2 (until R no of rows as defined by application are reached) and rotation is 'rotation="0 '+q+' 0" ' where q += 20

This way i am building towers high of the pictures each 20 degrees apart. However on the mouse over when i scale the image out it randomly sometimes comes in front and hides the object behind it (which i am expecting it to do ) but then sometime the image behind it appears on top of the scale out image

My object definition as it spits out from the script are below :

Example:

<a-curvedimage src="https://graph.facebook.com/10153728423046579/picture?access_token=CAAAABiP9…FNo9J6BLOziBmzJ9PAi46g4QyGFBP8sptGMGDZAS2HM9gW0E24Rq6rmLnKcFL8ZCovuQtgZDZD"  radius="3.7" theta-length="15"  position="0 -4 0"  rotation="0 -180 0" scale="1.5 1.5 1.5"><a-mouseenter scale="3 3 1" ></a-mouseenter><a-mouseenter target="#shadow" scale="2 2 0"  ></a-mouseenter><a-mouseleave scale="1 1 1"></a-mouseleave><a-mouseleave target="#shadow" scale="1 1 0"></a-mouseleave></a-curvedimage>

<a-curvedimage src="https://graph.facebook.com/10153600866101579/picture?access_token=CAAAABiP9…FNo9J6BLOziBmzJ9PAi46g4QyGFBP8sptGMGDZAS2HM9gW0E24Rq6rmLnKcFL8ZCovuQtgZDZD"  radius="3.7" theta-length="15"  position="0 -2 0"  rotation="0 -180 0" scale="1.5 1.5 1.5"><a-mouseenter scale="3 3 1" ></a-mouseenter><a-mouseenter target="#shadow" scale="2 2 0"  ></a-mouseenter><a-mouseleave scale="1 1 1"></a-mouseleave><a-mouseleave target="#shadow" scale="1 1 0"></a-mouseleave></a-curvedimage>

ps: Facebook requires an app review before others can use the site, I will keep you posted once the I have more details on availability for you to test. 
 Should be solved now. Try it please.

On Mon, Dec 21, 2015 at 7:44 PM, Chris Van notifications@github.com wrote:

> Likewise. I'm seeing this:
> 
> [image: screenshot 2015-12-21 22 44 17]
> https://cloud.githubusercontent.com/assets/203725/11947416/61ba80b8-a834-11e5-83a2-f90fec860053.png
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/issues/328#issuecomment-166497731.

## 

Regards
 I am looking at the site right now, but mouse over does nothing at all.
 Cursor focus should.
 Yes, Do you want me to update the A-Frame version ? With the existing version it is still an issue.

You can check it out @ prototype : http://www.vuutu.xyz
 Dead code is fixed. I have for now disabled the scale property, until i can resolve the overlapping issue. Thanks. Will reopen the issue in case something from framework is missing. Thanks.
  Could not find any property to add labels or text to an existing shape.

1) If it exists please mark this as a question for answer / also please guide me how to find this information on my own in future and not bother you.
2) If not please suggest if this can be added as an enhancement.

Regards,
Kapil
 Super thanks.
   I seem to have forgot to add the files. I'm still learning git. Sorry for that.

So is doing **npm start** after changing the files enough to test the changes I made?
 I'm afk now. No worries, I understand. Will do once I get back.
On Dec 21, 2015 11:40 PM, "Chris Van" notifications@github.com wrote:

> So is doing npm start after changing the files enough to test the changes
> I made?
> 
> until #320 https://github.com/aframevr/aframe/pull/320 lands, the best
> way to test is to
> 1. run npm start
> 2. change ../../dist/aframe.js to ../../build/aframe.js in
>    examples/template-ring/index.html
> 3. make changes, load the page, etc.
> 
> it'd probably be easier to do a new branch to remove the dist/ changes.
> also, something we (I) haven't done a good job of communicating yet (again:
> apologies, will address in #241
> https://github.com/aframevr/aframe/issues/241) is that PRs should be
> made against dev (unstable, under "development") instead of master
> (stable).
> 
> so you'll likely want to close this PR, commit only examples/ and
> elements/ files, and open a new one PR against dev instead of master.
> 
> thanks for your understanding - and thanks for contributing!
> 
> —
> Reply to this email directly or view it on GitHub
> https://github.com/aframevr/aframe/pull/322#issuecomment-166431971.
  I branched this off @cvan's PR, #310. Features changed:
- Move `opt.live` to `consts.LIVE` so that it doesn't get sent as an option to budo (don't want to duplicate reloads or anything)
- Remove the build step in `npm run dev` since it's now superfluous. Even if a local `build` directory doesn't exist, budo will still serve our watchified (incremental) `src/index.js` bundle during development
 `watchGlob` added to `budo@7.1.0`, small example here:
https://github.com/mattdesl/budo/blob/master/docs/api-usage.md#http-server

I updated this PR.

Things to note:
- I made sure the `open` and `live` options being passed are booleans rather than string/number
-  `watchGlob` only needs to specify files that won't be picked up by browserify's `require()` algorithm. Because `polymerize` emits its HTML dependencies, watchify/budo will trigger an `'update'` and LiveReload when one of the templates changes.
- Now the `watchGlob` is just looking at the `examples/` folder

The only file that isn't triggering a live-reload now is `VRLoader.js`, but I can't find any require references to it.
 K, should be fixed with `dev` now.
 Actually, since they are (always?) converted to strings, it has to be something like this:

``` js
  live: 'LIVE' in process.env  // To disable: `LIVE=0 npm start`
    ? String(process.env.LIVE) === '1'
    : true,
  ...
```

The env vars are a bit clunky. Maybe just enable live reload by default and move the live/open flags to a new PR. I think `--` is a cleaner approach and also easier to type.
  Running npm run dist generated 0 byte files for dist/aframe.js and dist/aframe.min.js

While trying to debug the issue I found multiple problems with this line :

```
mkdir -p dist/ && npm run browserify -s -- --debug | exorcist dist/aframe.js.map > dist/aframe.js && uglifyjs dist/aframe.js -c warnings=false -m -o dist/aframe.min.js
```

```
npm run browserify  -s -- --debug
```

This command above runs and exits with exit code 0, but doesn't print anything to STDOUT

but this does print the browserified file:

```
npm run browserify  -s
```

Any ideas?
 @cemkod What happens when you run this?

``` sh
npm run browserify -- --debug
```

Also, what versions of npm and node are you on?

``` sh
node -v
npm -v
```

@cvan What does the empty `-s` option do in this case? It looks like a typo that shouldn't be there?
 @mattdesl 

```
npm run browserify -- --debug
```

No output, exit code 0

node v0.10.25
npm 1.3.10
 You need `npm@2.0` or higher for the `--` feature to work. Might be worth documenting in the AFrame readme.

https://docs.npmjs.com/cli/run-script#description

You can do something like this to install a newer version:

``` sh
# latest version
sudo npm install npm@3.x -g

# or, v2 is also pretty good
sudo npm install npm@2.x -g
```
 Fixed! Thank you @mattdesl, @cvan 
  It'd be cool if we could point to an arbitrary video tag in the markup for video playback. The specific use case would be for when you use `getUserMedia` or WebRTC to get video feeds. Currently only urls are supported from what I understand, but I think that supporting arbitrary video tags will let people make even cooler things.
 Thanks for the pointer, didn't notice that. Does it handle the video changing content over time properly? For example if the `src` changed or if a MediaStream got attached?
 Cool! I'll play around with it when I get the chance. Thanks!
  I'm planning on making a psychedelic game and one of the things I want to do is apply trippy filters on the entire screen when certain things happen. It'd be nice if there was a way to specify a fragment shader that would be applied on the final buffer before rendering it to the screen. Maybe it'd make sense to attach it to a camera?
 Awesome! Can't wait. Any clues as to what variables will be present? Or will it all be user defined. I think that having similar variables to shadertoy will improve the hackability 
  I've tried both mp4 and webm format, but at least on my Galaxy S6, it shows up black.
It looks fine on desktop
![screenshot_2015-12-21-09-40-18](https://cloud.githubusercontent.com/assets/7048437/11926804/04decaaa-a7c8-11e5-8ea3-d57eb8e05f4c.png)
 Mobile browser can't autoplay(Require a user action to play).
 Thanks got it working by having a button at the beginning
 @staus do you have a snippet you can share? Playing with this too and my attempts at a button to start have been unsuccessful so far.. thanks! Here is what I'm playing around with - http://codepen.io/matthewsimo/pen/yeaLxP
 How do I start the 360 Video stock aframe demo on mobile? https://aframe.io/examples/showcase/videosphere/
 FYI, if it's helpful: some meta tags are needed to allow for the home screen app: 
 < meta
            name="apple-mobile-web-app-capable"
            content="yes"
            />

```
<!---
    Once we hide the standard Safari chrome, we can also affect
    the way the status bar displays at the very top. By default,
    it's that light gray color, but we can change it to be black
    or translucent.
--->
<meta
        name="apple-mobile-web-app-status-bar-style"
        content="black"
        />
<script>
```
 @https://gtk2k.github.io/aframe_videosphere/ 
No picture only voice, nexus 5 chrome for android 44.0.2403.133
 @cvan 
THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
three.js:31371 WebGL: INVALID_VALUE: texImage2D: no video
255192.168.137.1/:1 [.WebGLRenderingContext-0x9fbff200]RENDER WARNING: texture bound to texture unit 0 is not renderable. It maybe non-power-of-2 and have incompatible texture filtering.
192.168.137.1/:1 WebGL: too many errors, no more errors will be reported to the console for this context.
 @ngokevin 
A-Frame Version: 0.2.0
index.js:50 three Version: ^0.74.0
index.js:52 webvr-libs Version: ^1.0.4
metaTags.js:29 The key "shrink-to-fit" is not recognized and ignored.
webvr-polyfill.js:2784 Recalculating device params.
webvr-polyfill.js:2821 User agent: Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5 Build/MMB29Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.133 Mobile Safari/537.36
webvr-polyfill.js:2822 Pixel width: 1920
webvr-polyfill.js:2823 Pixel height: 1080
webvr-polyfill.js:2850 Rule matched:
webvr-polyfill.js:2851 Object
webvr-polyfill.js:2786 New device parameters:
webvr-polyfill.js:2787 DeviceParams
webvr-polyfill.js:2757 Fetching DPDB...
webvr-polyfill.js:2765 Successfully loaded online DPDB.
webvr-polyfill.js:2784 Recalculating device params.
webvr-polyfill.js:2821 User agent: Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5 Build/MMB29Q) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/44.0.2403.133 Mobile Safari/537.36
aframe.js:52159 Pixel width: 1920
aframe.js:52160 Pixel height: 1080
aframe.js:52187 Rule matched:
aframe.js:52188 Object
aframe.js:52123 New device parameters:
aframe.js:52124 DeviceParams
aframe.js:50175 DPDB reported that device params were updated.
aframe.js:32515 THREE.WebGLRenderer 74
aframe.js:36425 THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
aframe.js:38885 WebGL: INVALID_VALUE: texImage2D: no video
255192.168.137.1/:1 [.WebGLRenderingContext-0xaef19300]RENDER WARNING: texture bound to texture unit 0 is not renderable. It maybe non-power-of-2 and have incompatible texture filtering.
192.168.137.1/:1 WebGL: too many errors, no more errors will be reported to the console for this context.
aframe.js:52359 Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic
a-scene.js:495 requestFullscreen() is deprecated on insecure origins, and support will be removed in the future. You should consider switching your application to a secure origin, such as HTTPS. See https://goo.gl/rStTGz for more details.
 Sadly none of these examples work on a Nexus 5 (Android 6.0.1) with Chrome for Android 49.0.2623.91.  Just a black screen on every example.
 From further testing I have discovered that video textures work as expected on Android using the latest Firefox mobile browser (45.0.1) in non-VR mode but when you switch to VR it crashes the browser after 1 second.  Nexus 5 (Android 6.0.1).  Video textures in Chrome still show black screens for me.

Great framework by the way.  Really like it.
 @villalard me too.
 @cvan Chrome 49.0.2623.91
Video source: http://www.wearevr.tech/content/clients/concepts/vr_cinema/index.html
 @villalard Does that link work for you on Android devices because it doesn't for me.
 @SonarSystems Hi, it works in Firefox for Android but not Chrome for Android.  Version numbers are above in the thread.
 @villalard Thanks for the very quick response, it worked :D 

I will try it in my own implementation tomorrow.

Do you know when Chrome will get fixed for this?
 @cvan Thanks for the link.

BTW I am working on a A-Frame tutorial series, should be ready within a week or 2
 @cvan @villalard Do you know if the videos have to be encoded or formatted in any particular way for Android, as when I play a video on Firefox on Android, it plays but when I click the VR Goggles button, it switches to VR mode for a second then crashes. 
 @SonarSystems I am having the same issue as noted above in the thread.  Please excuse my simplistic answer but I think it's just that stereoscopic views and video textures is just too much for the browser to take at present.
 @villalard I thought that but the wearevr link you shared works on my Android phone in Firefox. Hence why I thought maybe the video is to big or a wrong format.
 @SonarSystems I don't think it's an encoding issue because the video textures display in non-vr mode - I think that as soon as the second video instance gets created (stereoscopic) it just maxes out the memory allocation that the browser has set.  I will try to bring the video filesize down to see if this helps.

Again, apologies for making general assumptions in a technical forum - my knowledge of what is going on in the background is very minimal.
 @villalard Thanks for the response, your feedback is much appreciated. It's weird because the other link works.
 @cvan Every time I debug using Firefox, when it crashes the console disappears on my computer because of the crash. Can I save the log some how?
 > @villalard Thanks for the response, your feedback is much appreciated. It's weird because the other link works.

@SonarSystems I have re-encoded the videos in my test (http://www.wearevr.tech/content/clients/concepts/vr_cinema/index.html) but the crash still occurs when going into stereoscopic.  I have tried all the other examples listed on this link and they all crash Firefox when going into VR mode.  Can you tell me which example you are talking about that you say works?
 @villalard Well they were all working but now when I go onto it none of them work. Could you send me the original encoded files and I will try them please. You can send them to support@sonarsystems.co.uk

Cheers
 Hi everybody, 
I am also trying to make a VR video working on mobile (iOs and Android) with videosphere, however as I am a very beginner in this field, I don't quite understand, I got that I have to set this metatag <meta name="apple-mobile-web-app-capable" content="yes"> and also set the webkit-playsinline, but how do we do those?
I mean, where do I paste the metatag and what do I write to implement this webkit-playsinline? 
And I don't understand what "Pin the webpage to the iOS homescreen" means... As you see I do not understand a lot....any help would be soooo welcome! 
Thank you very much in advance, I am so lost! 
 This problem didn't solve before,Not going to study aframe.
 Thank you for your contribution, the video can be played however I am not able to have it displayed in a double screen for VR...  I would say it is the webkit-playsinline which does the work?
Does somebody know the code to implement the webkit-playsinline?
Thanks! 
 Here, take this... it should help you on your way:

http://bfred-it.github.io/iphone-inline-video/demo/
 Any news on this? Pretty big use killer for Cardboard
 > I could be convinced to add to A-Frame support for autoplay playback for Chrome for Android via some "Play" button if we detect any videos in the scenes on the page

I guess this is what I'm hoping for. Are we under the impression there will never be a way to run videosphere automatically on page load without hacks? Sorry, new to js.
 Has anyone had any luck getting videosphere to work in a iOS WebView? I have:
1. Enabled allowsInlineMediaPlayback in the WebView
2. Added the `<meta name="apple-mobile-web-app-capable" content="yes">` tag and `webkit-playsinline` property to the video element
3. Tried both `autoplay=true` and `autoplay=false`

I've also tried to add the videosphere demo on the A-Frame website to the homescreen and open it and I still can't see the video.
 so far, I had not luck on my side :-(
so if I sum up with all of what has been said, the code to implement would be something like that? : 

```
<meta charset="utf-8">
<title>360 Video</title>
<meta name="description" content="360 Video — A-Frame">
<meta name="apple-mobile-web-app-capable" content="yes">
<script src="aframe.min.js"></script>


<a-scene>
  <a-videosphere src="draft3.mp4" controls webkit-playsinline ad-outlet="video" autoplay="true" loop="true" rotation="0 180 0"></a-videosphere>

</a-scene>
```

let me know! 
 The `webkit-playsinline` property should be applied to the video element.

``` html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360 Video</title>
    <meta name="description" content="360 Video — A-Frame">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <script src="aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <video id="video" src="test.mp4" loop webkit-playsinline></video>
      </a-assets>
      <a-videosphere src="#video" rotation="0 180 0"></a-videosphere>
    </a-scene>
  </body>
</html>
```
 Since I am on IOS, I pin it to the home screen and it works!!! (although I have no sound, I can display the image in double for the Google cardboard and the video plays by itself) Thank you! 
  Same on my Nexus 5 (Android 4.4.4., Chrome 47.0.2526.83). In the Chrome console, I get the messages : 

> THREE.WebGLRenderer 74dev
> THREE.WebGLRenderer: OES_texture_float_linear extension not supported.
 @ngokevin Any update? :)
This is probably related: #307 

If there is anyway I can manually test it, I'd be happy to help! (clone from master and `npm build`? or is the new three.js version not in there? If not, where would I need to look for?)
 @ngokevin I checked out the `dev` branch from github. It's definetely not fixed there. ;)
Anyways, looking forward to the new release.
 @ngokevin ah, thanks for the hint! Totally oversaw to checkout aframe-core. Just read through the instructions with `npm link` etc. ~~Will try it out tommorow.~~
Just tried it, and it works indeed!

Just wondering: How would I manually build a `dist` of aframe after testing with `npm link`? Would the updated _aframe-core_ have to be published to the npm repo before building the dist of _aframe_? I tried running `npm run dist` in aframe, which resultet in errors (supposedly uglifyjs after running the steps manually).

The structure of the project and the build process are new to me, please excuse me, if I am asking overly obvious things :)
 I just runned `npm dist` on the dev branch. The `aframe.js` file produced allows me to use `<a-sky>` now. I do not have a black screen anymore on my Nexus 5 (Android 4.4.4, Chrome 47.0.2526.83) but Firefox 43.0 crashes.
  Whenever you click in any of the examples and drag around, if you leave the frame at all, it stops the rotation of the canvas and you have to click and hold again in the canvas to start panning again. This leads to a pretty annoying experience. 
 Yep it is.
  Resized texture images to powers of ten.
 This is my first pull request for a public project. Hope I have done everything right. 
 I tried to fix the positioning and aspect ratios of all materials in the examples according to the changed dimensions. It is not possible to convert the textures to POT and not add a padding in some cases because some of the examples contain textures with dimensions that are not integer divisible (as in: 1/2 ,1/4 as opposed to 1/1.35). If the image is scaled so that one dimension is a power of two, the other dimension is not so some padding has to be added.
  I may be in a bit over my head, but are there any straightforward means of rendering text (a la [three.js and TextGeometry](http://threejs.org/docs/#Reference/Extras.Geometries/TextGeometry)) as part of a scene rather then relying on images? It would be pretty cool to provide dynamic labels on mouse/pointer events.
 Woohoo! Thank you. Apologies for duplicating an existing topic.
  Its not possible to have multiple different videos, because the ID of the Video being played is hard coded in the `a-video` template.

```
id="video"
```

Maybe this should be replaced by an attribute.

```
id="${videoId}"
```
 Just ran into this bug as well
  I just tried aframe.io on my Motorola X (2nd generation) and the examples don't appear correctly (black screen as you can see in the printscreen, even after a while so not a loading problem). Maybe a lighting problem (as we can see first printscreen a little).

Using:
- Motorola X 2nd generation
- Android 6.0
- Mozilla beta 43.0b10 and Chrome 47.0.2526.83 

![screenshot_20151217-103920](https://cloud.githubusercontent.com/assets/5400381/11866372/fecc919e-a4aa-11e5-8176-d0f16b5b2983.png)
![screenshot_20151217-103937](https://cloud.githubusercontent.com/assets/5400381/11866373/fed07138-a4aa-11e5-9843-c1f543d54db7.png)
 Same issue here.  Several examples just show a black screen as depicted in the screenshots above.
- Moto X 2nd Gen
- Android 6.0
- Chrome for Android 47.0.2526.83
 Same for Alcatel Idol3, (Android 5.0.x) in Chrome and Firefox.
The helloWorld example works fine, but composite etc. (all with textures?) show a black screen only.
 Same here with:
- HTC Sense 6
- Android 5.0.2
- Chrome 47.0.2526.83

Seems to be an issue with textures, although the Shopping example is partially working. I can see the person, but not the other textures.
  When entering the VR mode on mobile, putting it back in portrait doesn't change anything, and there are no "exit VR" button, which makes it a bit difficult to exit VR on phones with no physical back button (in my case Motorola X 2nd gen)
 Yes, indeed that's the case for the motoX, you have to swipe to get the phone UI back. It wasn't very intuitive for me at first (when I started VR on this phone and being fullscreen all the time), so I figure it might be complicated for some users too, that's why I was suggesting adding a bit of UI, like in the webVR boilerplate, to simplify user experience.
 Two questions:
- Is the important label still appropriate as there actually is a way to exit VR mode?
- Should we move this issue to aframevr/aframe-core?
  Is there any way os using 3D models generated with other software for using in more complex scenes?
  My single page site, running on Vue.js, has a template with aframe components. The scene doesn't seem to build properly after the Vue component is initialized. Is there a way to trigger the aframe init at runtime, so the Vue component can control when the scene should load? 
 bump. Is this still the preferred method for initializing aframe later in the stack? And will this defer the loading of assets?
 i've been using `v-if` on the `a-scene` to render only when other data is ready This hack work-around does not work when using custom a-marker patterns using AR.js.  Is it still necessary today to convert images to power of two? @ngokevin   POT is only needed if repeat wrapping is enabled and/or your `minFilter` is using mipmapping (see [here](https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial/Using_textures_in_WebGL) and [here](https://github.com/mrdoob/three.js/blob/317d6f66542ab63323c5dab6c7a4e9d08c07ca05/src/renderers/WebGLRenderer.js#L2895-L2902)). If you set the following parameters, the texture won't be resized, and it will perform comparably to a POT size.

``` js
tex.minFilter = THREE.LinearFilter
tex.wrapS = THREE.ClampToEdgeWrapping
tex.wrapT = THREE.ClampToEdgeWrapping
```

Though POT is always preferred since the GPU tends to handle it better, and could lead to (subtle) performance improvements in certain cases.
  For large and long term projects it might be worth investing in some commit/release/changelog automation at some point:
https://github.com/semantic-release/semantic-release
https://github.com/ajoslin/conventional-changelog/blob/master/conventions/angular.md
http://commitizen.github.io/cz-cli/

(budo changelog drags behind regularly)
 The nice thing about npm scripts is they are easy to automate. For budo/browserify I've been using this:
https://github.com/mattdesl/quick-stub/blob/master/README.md

Also see `standardize` (I'd accept a PR for semistanfard) and @yoshuawuyts `initialize-engine`:  
https://www.npmjs.com/package/initialize-engine
  Update to the last `dev` version of three.js. https://github.com/mrdoob/three.js/pull/7661
 Actually, may be unrelated.
  This PR introduces these changes:
- Removes the `host` field from budo options. This will make budo resolve to the internal IP, and log that instead of `0.0.0.0`. Now it looks like this:  
  <img width="455" alt="screen shot 2015-12-17 at 11 06 48 am" src="https://cloud.githubusercontent.com/assets/1383811/11874674/f27374c2-a4ae-11e5-80bd-510541be832b.png">
- The above change will fix LiveReload when you hit the IP on mobile devices. This seems like a bug with budo, I opened an issue here: https://github.com/mattdesl/budo/issues/118
- I have un-commented the `live()` feature since it now works on mobile. I'm not sure whether you had this commented intentionally (some devs prefer not to use it; my scripts sometimes include a `--live` option to toggle this).

Some other small things that could change with the build script:
- `browserify-css` should now emit file events (https://github.com/cheton/browserify-css/issues/20), so it should be picked up by watchify and trigger a hard live-reload. However it seems like all the browserify-css stuff is legacy, I am not seeing much CSS in this repo.
- The HTML inside `examples/` are not live-reloading
- The `browserifyArgs` option can be replaced by a `browserify: { ... }` options object for code clarity
 The `examples/` HTML files get picked up by the watch task, but nothing is telling budo to `reload()` when they change. I'm not exactly sure how the templates are being handled here (haven't looked too closely) but it seems like getting rid of the `.live()`, `.watch()` and `.on('watch')` and just replacing it with `live: true` in options should mostly work (defaults to watching JS/CSS/HTML and triggering reloads).

Will test further...
  Mouse dragging in Chrome (OSX) stops when you move outside the bounds of the canvas. This occurs on the demos as well:
https://aframe.io/aframe/examples/showcase-spheres-and-fog/

One solution is to add the mouse events to the window element, but then compute the x/y offset relative to the canvas. See [here](https://github.com/mattdesl/mouse-event-offset) for reference.
  Works in portrait, but flipping the device to landscape (as required obviously) makes the horizontal/vertical movement wrong (i.e. look up, the scene moves left).  Tried in dev edition; nightly wouldn't render at all so couldn't confirm.
 Android 5.0.1 
 Experiencing the same on a Nexus 5x running 6.0.1
  "this CodePen example scene!" points to http://codepen.io/team/aframevr/pen/6e013bf4b446e85d8f268e937ee09143?editors=100 which gives a 404.

is it suppose to point to http://codepen.io/team/mozvr/pen/BjygdO?editors=100  ?
 aframe-core also points to the wrong example.
 cvan published it so that I can take a look, he had published this though : 
https://aframevr.github.io/docs/guide/
which points to : 
 -> http://codepen.io/team/mozvr/pen/BjygdO?editors=100
  Fixed by: https://github.com/aframevr/aframe/pull/338
We can close this.
  Took a quick look at this a few days ago.
Seems that the fourth command:
`npm run browserify -s -- --debug | exorcist dist/aframe.js.map > dist/aframe.js`
won't run on Windows, it errors out, but works on Unix, so I couldn't progress at the time.

Will give this task another go on my Mac (where I don't have the same issue) tomorrow.
   C:\Vr\github\aframe [master]> npm install
npm ERR! Windows_NT 6.1.7601
npm ERR! argv "C:\Program Files (x86)\nodejs\node.exe" "C:\Program Files (x8
6)\nodejs\node_modules\npm\bin\npm-cli.js" "install"
npm ERR! node v4.2.2
npm ERR! npm  v2.14.7
npm ERR! code E404

npm ERR! 404 Not found : @mozvr/aframe-core
npm ERR! 404
npm ERR! 404 '@mozvr/aframe-core' is not in the npm registry.
npm ERR! 404 You should bug the author to publish it (or use the name yourself!)

npm ERR! 404 It was specified as a dependency of '@mozvr/aframe'
npm ERR! 404
npm ERR! 404 Note that you can also install from a
npm ERR! 404 tarball, folder, http url, or git url.

npm ERR! Please include the following file with any support request:
npm ERR!     C:\Vr\github\aframe\npm-debug.log
C:\Vr\github\aframe [master]>
 Note, this is running on windows 7.  Will try again tomorrow on a fresh windows 10 machine.
  It find it also confusing while playing with it. I expected to be able to reach the object itself by accessing the main template node, but I ended up going into two nodes deeper to access the actual object.
This was using markdown but I found the same problem when trying to use it with three.js directly as I got two empty object3d with each template. From the perfomance point of view I believe it will add *3 objects per "object" that even if they're empty objects they take space on memory and they all need to be traversed by the renderer. We already talked about this on slack with the lego pieces for example that each one is composed of 47 Object3d.
Is it a must to have all those intermediate nodes?
  @cvan seems the links are broken
  "this Codepen example scene" in the read me link is broken.
 Erm.  Started clicking around and got a 404.  List of all the broken links:
- "this Codepen example scene!" - http://codepen.io/mozvr/pen/zvqGqO?editors=100
- vr-components.min.js - https://mozvr.github.io/vr-components/dist/vr-components.min.js
- vr-components.min.html - https://mozvr.github.io/vr-components/dist/vr-components.min.html
- vr-components.js - https://mozvr.github.io/vr-components/dist/vr-components.js
- vr-components.html - https://mozvr.github.io/vr-components/dist/vr-components.html
- " awesome examples." - https://mozvr.github.io/vr-components/examples/
- https://mozvr.github.io/vr-components/ - https://mozvr.github.io/vr-components/
- http://cvan.io/vr-components/ - http://cvan.io/vr-components/
  Adding to this
If you set position like `camera.setAttribute('position', 'y: 1');` it'll result in `position="NaN 1 0"`
 @staus you could use `camera.setAttribute('position','y',1);` 
  I think that this is fixed:
`<a-entity geometry="primitive: torus" position="1.5 3 0"></a-entity>`
Result:
![Torus](http://imgur.com/lbYjR1J.png)
  Auto-detection would be great in the case of objects. A stop gap might also be to document the valid options. Currently https://aframe.io/docs/primitives/a-model.html tells us that the default is collada but without looking at [the code](https://github.com/aframevr/aframe-core/pull/315/files#r42915419) we don't know that you need to specify `format="obj"`.

Possible duplicate? https://github.com/aframevr/aframe-core/issues/45
 Along with this, the mtl file is often separate from an object file and there is no component/attribute documented with the model entity/tag on how to specify the mtl.
 ref: https://github.com/aframevr/aframe-site-dev/pull/102
 I've been looking into loading a `.obj` with a `.mtl`: threejs gives example loaders [OBJMTLLoader.js](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/OBJMTLLoader.js) and [MTLLoader.js](https://github.com/mrdoob/three.js/blob/master/examples/js/loaders/MTLLoader.js). Haven't got it working just yet but I don't think it should be too complicated to have the material component accept a `.mtl` file as its `src` attribute, if that seems like a good approach? Not sure how many formats you want the core library to support, though, or if this makes sense to include by default.
 So far I've tried 

``` html
material="https://raw.githubusercontent.com/bitgridio/models/gh-pages/lullabot/Body.mtl"
```

and 

``` html
material="src: https://raw.githubusercontent.com/bitgridio/models/gh-pages/lullabot/Body.mtl"
```

within a-model. Full example:

``` html
<a-model 
  src="https://raw.githubusercontent.com/bitgridio/models/gh-pages/lullabot/Body.obj" 
  material="src: https://raw.githubusercontent.com/bitgridio/models/gh-pages/lullabot/Body.mtl" 
  position="0 0 -2" 
  format="obj">
</a-model>
```
 @sirkitree a-model only supports [a few attributes](https://aframe.io/docs/primitives/a-model.html). You may want to look into using a-entity directly (see [a-model implementation](https://github.com/aframevr/aframe/blob/master/elements/templates/a-model.html)). That's enough to specify a color for your `.obj`, for example.

I got a `.mtl` working, but it took changes to aframe-core. [Example here](https://github.com/donmccurdy/aframe-core/commit/06ff9f7dda1e13d370e952cd0bbcbd93f1051236). Not sure if it makes sense to drop both MTLLoader and OBJMTLLoader into aframe-core, so this might need to be a separate primitive or component for `.mtl` support.

EDIT: With that change, you can use a `.mtl` file this way:

``` html
<a-entity position="0 0 -20"
          material="src: url(../../models/tree2.mtl); opacity: 1"
          loader="src: url(../../models/tree2.obj); format: obj">
</a-entity>
```
  For VR use it would be convinient to also support stereoscopic skies or to add a similar a-entity that supports this.
    Hmm any Windows pc or is it some specific combination of Windows/node/npm? I will try to reproduce.
 Hey @dmarcos, I just tested with latest budo (8.0.2) on Windows 10 Home with npm@3 and node@4.2.5. Testing on aframe `dev` branch with `npm run dev`.

The initial boot-up time for budo is ~7 seconds, but after that LiveReload feels pretty instant.

Getting a lot of 404s in the HTTP logs and some issue with `snazzy`, not sure if related.

If you can reproduce on a small test case can you please post an issue to `budo`. Thanks!
  WIP: https://github.com/donmccurdy/aframe-extras/blob/master/src/primitives/a-grid.js

A couple issues left:
1. If custom colors are important, maybe we can generate custom tile images using data URIs?
2. The `mappings` property for primitives sets up a 1:1 pairing of two properties, but here we need for width/depth to map to both actual width/depth and `repeat.x`/`repeat.y`. Maybe mappings accepts an array: `width: ['scale.x', 'material.repeat.x']`?
3. Density maybe isn't necessary for now, but if so we'd need `mappings` with custom functions or something, to get `width / density => repeat.x`.
  Hi @cvan , I tried to add the `controls` attribute to `video` element which is used as the texture for `a-videosphere`, but it seems the video controls are not displayed? my code is as below:

```
<html>
<head>
  <title>My A-Frame Scene</title>
  <script src="node_modules/aframe/dist/aframe.min.js"></script>
</head>
<body>
<a-scene>
  <a-assets>
    <video id="antarctica" autoplay loop="true" controls src="video/MaryOculus.webm"/>
  </a-assets>

  <!-- Using the asset management system. -->
  <a-videosphere src="#antarctica"></a-videosphere>

</a-scene>

</body>
</html>
```

Can you please advice where was wrong?
  I am creating a `vr-light` component that will have `attributeChangedCallback`, and then we can remove `vr-hemispherelight`

``` js
<vr-light type="hemisphere">
```
  I was thinking about documenting this too, but I would have put it in `vr-markup`'s documentation. I run `npm link` because I want to hack on `vr-markup`, not because I want to hack on `vr-component`s.

Besides that, I would also document that the user should run both dev servers for ``vr-components` and `vr-markup`, and they should use the bundle served in memory at `http://localhost:9001/build/vr-components.js` rather than the one on the filesystem so they don't have to re-run build all the time.
 i guess so, I might've been running both just in case. Are you going to keep the link docs in this repo? I feel like it's focused on developing on markup rather than components. r+ otherwise since it's good to know how to link 
