[{"repo": "finagle", "type": "elite", "title": "", "number of text": 174, "text": "  Thanks for the submission.  We're testing this along with upgrading to 0.12.3 right now and will keep you posted when we commit.\n  We shipped 6.8.1 recently, but I don't see any tags/releases?\n\nhttps://github.com/twitter/finagle/releases\n  There's some trickiness with the backport of http headers from netty 4 that collides with our headers map in finagle.  If you want to take a look at it, we'd appreciate it.\n  It should be pretty simple to adopt to the new APIs. \n (This is really cool btw.)\n I think we just want this to be part of the inet! resolver.\n  More generally, we hope to remove the thrift dependency altogether.\n  It's about time Finagle get a legit logo.\n\nWe'll poll the community for ideas before we kick off a 99designs contest and vote amongst the submissions. Here is what we have so far for ideas:\n- Peregrine falcon as the fastest bird by flight speed? And it starts with F\n- Something to do with filters\n- Something to do with plumbing\n- allusion to a steam governor\n\nWe would like to hear from the community what they would like to see in a logo or if they have any suggestions. \n Someone mentioned \"coffee filters\" as an idea.\n Perhaps something involving a bird in an engine room?\n How about some sort of fast bird (or a more cuddly animal), perhaps mechanized, with a big helmet on? We want to emphasize: fast, safe.\n Thanks everyone for your input, I will start the contest this week and we can go over submissions while we narrow things down.\n The contest has started:\nhttp://99designs.com/logo-design/contests/logo-finagle-254061/welcome\n\nThere will be a few days of submissions as we get to whittle them down based on our likes.\n\nIf you have anymore ideas on what the Finagle logo should look like, let me know.\n You can take a peak at the current set of designs:\nhttp://99designs.com/logo-design/contests/logo-finagle-254061\n\nAnything stand out that folks like?\n Been lost the last thirty minutes looking at steampunk birds, this one is amazing:\nhttp://cdn.designcontest.com/images/twitter-all-stars/steampunk_512x512.png\n Quick poll here for people who want to help narrow down potential designs:\nhttp://99designs.com/logo-design/vote-oxdzrx\n Another vote to finalize the designers for the next round of iteration:\nhttp://99designs.com/logo-design/vote-js23nd\n After voting, these two designs/designers stuck out:\nhttp://99designs.com/logo-design/contests/logo-finagle-254061/entries/61\nhttp://99designs.com/logo-design/contests/logo-finagle-254061/entries/64\n\nIs everyone comfortable moving forward with those two designers to have them battle it out for the final design?\n We finalized our designers and are now experimenting with some more designs:\nhttp://99designs.com/logo-design/vote-rvz15k\n\nPlease comment on each design, it really helps the designers. We will keep iterating and in another poll or two, call for the final vote. Thanks for everyones help!\n Ok, here's the final poll to select the logo and designer to work with:\nhttp://99designs.com/logo-design/vote-m6nvce\n\nWe will have an opportunity to slightly tweak the final logo selected so keep that in mind when you're writing the reviews for the logo in the poll.\n The voting is done and we went with this one:\nhttps://twitter.com/finagle/status/394137210489823232\n\nThank you to everyone who participated in the voting process.\n  Reported by @rstrickland, with the following stack trace:\n\n```\n2013-08-19 07:55:14,025 ERROR c.w.d.d.FourInfoActor [New I/O  worker #22] <* DC [Failed] : java.lang.Exception: write while request pending (Chan=sms, Prod=severe, Addresses=List(6786707884))\ncom.twitter.finagle.WriteException$$anon$1: java.lang.Exception: write while request pending\n    at com.twitter.finagle.transport.ClientChannelTransport$$anonfun$2.apply(ChannelTransport.scala:99) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.transport.ClientChannelTransport$$anonfun$2.apply(ChannelTransport.scala:96) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.util.Proc$class.$bang(Chan.scala:34) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.util.Proc$$anon$1.$bang(Chan.scala:47) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.transport.ClientChannelTransport.write(ChannelTransport.scala:146) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.dispatch.SerialClientDispatcher.dispatch(ClientDispatcher.scala:37) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.dispatch.SerialClientDispatcher$$anonfun$apply$2.apply(ClientDispatcher.scala:50) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.dispatch.SerialClientDispatcher$$anonfun$apply$2.apply(ClientDispatcher.scala:49) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Future$$anonfun$onSuccess$1.apply(Future.scala:645) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Future$$anonfun$onSuccess$1.apply(Future.scala:644) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Promise$Monitored.apply(Promise.scala:40) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Promise$Monitored.apply(Promise.scala:31) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Promise$$anon$2.run(Promise.scala:519) ~[Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.concurrent.Scheduler$LocalScheduler.run(Scheduler.scala:60) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.concurrent.Scheduler$LocalScheduler.submit(Scheduler.scala:40) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.concurrent.Scheduler$.submit(Scheduler.scala:26) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Promise.runq(Promise.scala:248) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Promise.updateIfEmpty(Promise.scala:492) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Promise.update(Promise.scala:475) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.channel.ConnectionLifecycleHandler$$anonfun$com$twitter$finagle$channel$ConnectionLifecycleHandler$$channelDidConnect$1.apply$mcV$sp(ConnectionLifecycleHandler.scala:19) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.netty3.RichChannelFuture$$anonfun$onSuccessOrFailure$1.apply(ChannelFuture.scala:126) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.netty3.RichChannelFuture$$anonfun$onSuccessOrFailure$1.apply(ChannelFuture.scala:124) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.netty3.RichChannelFuture$$anon$1.operationComplete(ChannelFuture.scala:28) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelFuture.notifyListener(DefaultChannelFuture.java:428) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelFuture.notifyListeners(DefaultChannelFuture.java:414) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelFuture.setSuccess(DefaultChannelFuture.java:363) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.AbstractChannel$ChannelCloseFuture.setClosed(AbstractChannel.java:355) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.AbstractChannel.setClosed(AbstractChannel.java:185) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.AbstractNioChannel.setClosed(AbstractNioChannel.java:204) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.NioSocketChannel.setClosed(NioSocketChannel.java:85) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.close(AbstractNioWorker.java:717) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink.eventSunk(NioClientSocketPipelineSink.java:99) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:774) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.closeRequested(SimpleChannelHandler.java:338) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleDownstream(SimpleChannelHandler.java:260) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:585) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:779) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.closeRequested(SimpleChannelHandler.java:338) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.channel.ChannelStatsHandler.closeRequested(ChannelStatsHandler.scala:83) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleDownstream(SimpleChannelHandler.java:260) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:585) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:779) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.oneone.OneToOneEncoder.handleDownstream(OneToOneEncoder.java:54) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.http.HttpClientCodec.handleDownstream(HttpClientCodec.java:97) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:585) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:779) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelDownstreamHandler.closeRequested(SimpleChannelDownstreamHandler.java:154) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelDownstreamHandler.handleDownstream(SimpleChannelDownstreamHandler.java:76) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:585) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:779) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelDownstreamHandler.closeRequested(SimpleChannelDownstreamHandler.java:154) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelDownstreamHandler.handleDownstream(SimpleChannelDownstreamHandler.java:76) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:585) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendDownstream(DefaultChannelPipeline.java:779) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.closeRequested(SimpleChannelHandler.java:338) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleDownstream(SimpleChannelHandler.java:260) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:585) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendDownstream(DefaultChannelPipeline.java:576) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.Channels.close(Channels.java:820) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.transport.ClientChannelTransport.close(ChannelTransport.scala:156) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.util.Closable$class.close(Closable.scala:12) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.transport.ClientChannelTransport.close(ChannelTransport.scala:88) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.transport.ClientChannelTransport.fail(ChannelTransport.scala:115) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.transport.ClientChannelTransport.handleUpstream(ChannelTransport.scala:135) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.exceptionCaught(SimpleChannelHandler.java:156) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:130) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.exceptionCaught(SimpleChannelUpstreamHandler.java:153) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:112) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.exceptionCaught(SimpleChannelUpstreamHandler.java:153) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:112) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.frame.FrameDecoder.exceptionCaught(FrameDecoder.java:378) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:112) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.http.HttpClientCodec.handleUpstream(HttpClientCodec.java:92) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.exceptionCaught(SimpleChannelHandler.java:156) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.channel.ChannelStatsHandler.exceptionCaught(ChannelStatsHandler.scala:94) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:130) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.exceptionCaught(SimpleChannelHandler.java:156) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:130) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:553) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.Channels.fireExceptionCaught(Channels.java:533) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.AbstractChannelSink.exceptionCaught(AbstractChannelSink.java:48) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.notifyHandlerException(DefaultChannelPipeline.java:652) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:560) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:281) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.http.codec.ResponseDecoder.messageReceived(ResponseDecoder.scala:20) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.http.HttpContentDecoder.messageReceived(HttpContentDecoder.java:103) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.http.HttpChunkAggregator.messageReceived(HttpChunkAggregator.java:148) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:296) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.frame.FrameDecoder.unfoldAndFireMessageReceived(FrameDecoder.java:455) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.callDecode(ReplayingDecoder.java:538) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.replay.ReplayingDecoder.messageReceived(ReplayingDecoder.java:437) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelUpstreamHandler.handleUpstream(SimpleChannelUpstreamHandler.java:70) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.handler.codec.http.HttpClientCodec.handleUpstream(HttpClientCodec.java:92) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.messageReceived(SimpleChannelHandler.java:142) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.channel.ChannelStatsHandler.messageReceived(ChannelStatsHandler.scala:74) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline$DefaultChannelHandlerContext.sendUpstream(DefaultChannelPipeline.java:786) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.messageReceived(SimpleChannelHandler.java:142) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at com.twitter.finagle.channel.ChannelRequestStatsHandler.messageReceived(ChannelRequestStatsHandler.scala:35) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.SimpleChannelHandler.handleUpstream(SimpleChannelHandler.java:88) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:558) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.DefaultChannelPipeline.sendUpstream(DefaultChannelPipeline.java:553) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:268) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.Channels.fireMessageReceived(Channels.java:255) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:84) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.processSelectedKeys(AbstractNioWorker.java:471) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.AbstractNioWorker.run(AbstractNioWorker.java:332) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:35) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.util.ThreadRenamingRunnable.run(ThreadRenamingRunnable.java:102) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at org.jboss.netty.util.internal.DeadLockProofWorker$1.run(DeadLockProofWorker.java:42) [Distribution-Server-1.1.4-RELEASE-jar-with-dependencies.jar:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145) [?:1.7.0_17]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615) [?:1.7.0_17]\n    at java.lang.Thread.run(Thread.java:722) [?:1.7.0_17]\nCaused by: java.lang.Exception: write while request pending\n    ... 139 more\n```\n @rstrickland: Would you mind clarifying some things?\n\nThe exception is presumably seen at the \u201ctop-level\u201d service? I.e. in\n\n```\nval f = service(request)\n```\n\n`f` is what exhibits the exception.\n\nIn the code you\u2019ve shared with me, you configure retries \u2014 presumably retries are active at the time you are experiencing this error as well?\n Okay thanks. That gives me enough to try to simulate the error.\n @rstrickland Do you always use the service (from `ClientBuilder.build`) directly? Or do you also use it via `ServiceFactory`?\n @rstrickland Do you know if these clients are using TLS or not?\n @rstrickland Can you do me a favor? Would you be able to try finagle 6.5.2? (Latest release).\n\nSecond, do you know if there are any entries like the following: \u201cException propagated to the root monitor!\u201d in your logs?\n\nThe only way I can make sense of your stack trace is that an exception was thrown in a `respond` block which propagates. Now, finagle monitors all such exceptions and logs the above message, but a somewhat recent change means that such exceptions aren\u2019t propagated anymore (they never should\u2019ve been).\n\nIf this is what\u2019s happening, then you\u2019ll get a proper error (the exception thrown in `respond`) and the connection state won\u2019t be faulty (subsequent requests should continue to work).\n I think they are binary compatible, but no promises. If that doesn\u2019t work out I can nudge the Cassie maintainers to provide an updated artifact :-)\n Great, thanks! Let me know.\n Re: reproducing the edge case -- to trigger the issue requires a specific ordering of events which is probably difficult to do synthetically.\n\nRe: 6.5.0 yes that's new enough. \n The problem is that it depends on the connection behavior of the server as well. For example, how a server chooses to close an HTTP connection once the result is served. It also depends on which thread ends up executing the `respond` block which throws an exception (for example if it has been chained with other actions).\n\nThe totality of the situation would be very difficult to reproduce in a closed setting.\n Did you have a chance to try this out?\n Sounds good.\n  I might be misunderstanding, but wouldn't a Filter fit your needs?  Something like [LoggingFilter](https://github.com/twitter/finagle/blob/master/finagle-core/src/main/scala/com/twitter/finagle/filter/LoggingFilter.scala) seems like it solves this specific problem.\n Take a look at Http [LoggingFilter](https://github.com/twitter/finagle/blob/master/finagle-http/src/main/scala/com/twitter/finagle/http/filter/LoggingFilter.scala), confusingly also named LoggingFilter (for historical reasons) :)\n\nFilters are designed to be composed in the way that you're describing, `filter andThen service`.  Here are [some](https://github.com/twitter/finagle#Building%20a%20Robust%20Server) [docs](http://twitter.github.io/finagle/guide/ServicesAndFilters.html) that might be useful.\n  ## motivation\n\nI want to be able to be able to set session variables at connection time.\n## implementation\n\nI talked to a Database guy at Tumblr, and he said that the way that he had seen it implemented before was usually that when you established the connection, you had the option to pass in arbitrary code that would be executed (ie a block in ruby).  This permits a similar syntax, with the added restriction that the session variable must be set before the Service may begin to serve requests (via the map on `hook(service)`).  \n\nI chose the type of hooks to be Service[Request, Result] => Future[Unit] so that users don't get confused about how the return value is used.  Because the user must discard any computation they do in the callback, it is transparent that the computation is ignored.\n## feedback I'd like\n\nI don't really like the name `hooks`.  Does anyone have a better idea for what it should be?\n## testing\n\nI tried it out by changing a session variable, pretty sure it worked.\n I don't know.  I'll talk to someone more knowledgeable on my team.\n I talked to some team members, and they point out that is a pretty useful point to be able to inject arbitrary code.  It's not an especially concerning vector for attack, but it's fairly useful to be able to do things like collect data about connection churn, etc.  From the point of view that it could be used for plenty of things other than just session variables, I think it makes sense to keep it a function.\n   thanks!\n  ## motivation\n\nSome people have mysql databases with different character encodings.  finagle-mysql doesn't support a lot right now, but it should in the future.\n## implementation\n\nThis is a more complicated problem than you might think at first, because different columns can theoretically be different charsets within a single database.  \n## todo\n### prepared statements\n\nI only added support for Latin-1 in this PR, because it lets me punt on encoding prepared statements.  For prepared statements, we don't need to declare anything about the charset to mysql, but we do need to encode them.  Because latin-1 is compatible with utf-8, this just assumes every string in a prepared statement will use utf-8.  More work will need to be done to guarantee that every string in a prepared statement is encoded properly.\n### other charsets\n\nThe other part of this that isn't complete is that the conversion from mysql collation number to a java.nio.charset is completely punted on, and it always returns utf-8.  In the future, there should be a map from collations to charsets.\n## thanks\n\nThanks @roanta for bearing with me as I muddled through the finagle-mysql code, and providing guidance.\n @roanta tells me that this has been merged internally.  I think that only up until twitter/finagle@a51ec07 was merged internally.  I pushed to this branch, forgetting that it hadn't been pushed back into the open source repo.\n\nI'm not sure what to do in this situation.  Should I revert twitter/finagle@a2df331 on this branch?  I have a new branch with a new pull request in #154.\n  Fixes #143\n## motivation\n\nDescribed in #143\n## implementation\n\nDescribed in #143\n## changes in api\n\nThe http logging filter's type has changed slightly, so that .log takes a REQUEST, where REQUEST <: Request.  Internally, this is never breaking, because we can prove that we always send REQUEST to log.  However, someone could theoretically be abusing this log, although it seems unlikely.  They would have to have subclassed the http LoggingFilter, and be making calls to it from inside of that subclass, passing it a Request, of a different type from the REQUEST that they parameterized LoggingFilter with.\n## second thoughts\n\nI added the exception logging because the http LoggingFilter logs exceptions, but I'm beginning to think it might be scope creep, since it's easy to just add a MonitorFilter which logs exceptions.  On the other hand, if you hate it so much, you can override LoggingFilter's logException method to be a noop.  I think this is the right way to do it, because it gives users more power, which seems like the scala way.\n No problem, happy to contribute.\n  ## motivation\n\nThe code for [LoggingFilter](https://github.com/twitter/finagle/blob/master/finagle-http/src/main/scala/com/twitter/finagle/http/filter/LoggingFilter.scala) is already extremely generic, but it only works for Http, basically because it was written for finagle-http.  My proposal is to finagle it to work for any protocol.\n\nI was implementing a generic LoggingFilter, and realized that it was basically a copy of the http version, which seems dumb.  I think it's a pretty useful thing, and I'd like to be able to use the raw finagle version.\n## proposed implementation\n\nMove the LoggingFilter and LogFormatter code over to finagle-core making them generic, and leave a LoggingFilter and LogFormatter in finagle-http, but marked as deprecated.  Bump the minor version.  In the next major version, strip the http versions.\n\nWe should also add a logError method to the LoggingFilter class, so that we can log exceptions differently from completions.\n\nThe proposed method signature for logError would be \n\n``` scala\ndef logError(responseTime: Duration, request: Req, error: Throwable)\n```\n## who\n\nI'd be happy to do it, and will assign it to myself after we've reached a consensus on what we want to do.\n## misc\n\nI'm interested in hearing suggestions, or reasons why we don't want to do this.\n Alright, I made a pull request, the api changed slightly, I described the change in my PR.  Changed to logException.\n  ## motivation\n\nThese classes are useful for anyone who wants to write an integration test, but right now, in order to use them, you have to have a test where your package is com.twitter... which is a pain.\n## implementation\n\nNo longer marked private[twitter].\n  ## motivation\n\nThis is a super tiny change, but I think it makes sense for two reasons.  First, DRY.  Second, for users who don't have a lot of experience with partial functions, mixing them together might not be intuitively obvious to them.  When they come here to look at how RetryFilters work, and look at TimeoutAndWriteExceptionsOnly as an example, it will encourage the mixing together way of using partial functions.\n## change in behavior\n\nno change in behavior\n  In the redis protocol, there are four commands which take a WITHSCORES argument.  In the finagle-redis protocol, in the SortedSets file, every command which takes a WITHSCORES argument has an option in the argument for the constructor that lets you specify it.\n\nHowever, in the finagle-redis client methods, only the methods zRangeByScore and zRevRangeByScore require that you pass in a withScores boolean, whereas zRange and zRevRange do not let you pass in a boolean.  This means that you can only get scores from zRangeByScore-style calls, although you might want to get them from zRange-style calls, which is suboptimal.  Also, zRangeByScore-style calls return ZRangeResults, whereas zRange-style calls return ChannelBuffers, which actually means that each call can only return one configuration of withScores: if you try to call zRangeByScore with false as the argument to zRangeByScore, it fails.  Similarly, zRange does not support withScores, and so only passes by ChannelBuffers.\n\nI think that the correct way to handle this is to have both styles return an Either[ZRangeResults, Seq[ChannelBuffer]], and to add a withScores argument to zRange.\n Great, thanks for moving quickly on this.\n  Thanks! Pulled locally, should show up here whenever hte code review goes through.\n  We should just adjust the options in sbt. There's no reason this can't run on a 32-bit JVM.\n @caniszczyk yes. First, we're not actually bundling sbt; the included `sbt` script is a bootstrapping script. So, in order to build these projects, all that is required is a JRE install. Pretty nice.\n\nBut more importantly: sbt versioning is really confusing. You might have the simultaneous need of sbts 0.7.x, 0.11.x, 0.12.x. And not only that, sbt will output only cryptic errors if you use one sbt version when you should have used another.\n\nSimply being able to build finagle with\n\n``` sh\n$ ./sbt compile\n```\n\nis a wonderfully simple thing, in my mind.\n  Not an issue.\n  I've pulled this internally, with one small change: use a second constructor instead of a default argument, since this doesn't break the Java API.\n (It should appear here shortly)\n  ## motivation\n\nimmutable.Set is the default Set, so if it's described as collection.Set, you can't just say the return value of something that returns a client.sMembers is a Future[Set[ChannelBuffer]], it's a Future[scala.collection.Set[ChannelBuffer]].  There is also no reason to create ambiguity as to whether it's immutable or not, because it makes much more sense for the api to return an immutable version.\n## implementation\n\nchanged all references of collection.Set to collection.immutable.Set.  Also changed the imported name from CollectionSet to ImmutableSet.  I cannot use the native \"Set\" name for the class because it is obscured by the Set Command class in finagle-redis.\n  @asrinivas or @xiangxin72 \u2014 can either of you take a look?\n  There\u2019s also: [JavaLoggerStatsReceiver](https://github.com/twitter/finagle/blob/master/finagle-core/src/main/scala/com/twitter/finagle/stats/JavaLoggerStatsReceiver.scala) and [SummarizingStatsReceiver](https://github.com/twitter/finagle/blob/master/finagle-core/src/main/scala/com/twitter/finagle/stats/SummarizingStatsReceiver.scala)\n  Reopening. Missed that this was in the `gh-pages` branch.\n  I\u2019ve just pushed the fix for this.\n 517f308a5efd\n  Thanks! pulled internally, should show up here within a day.\n  This is all Ruben\u2019s code -- I\u2019m submitting it here so we have a forum to do a code review!\n Some general comments from my review:\n- try to use `ChannelBuffer`s throughout as they make it easier to optimize away allocations &c.; especially for down the road\n- make sure you test the frame decoder for fragmented packets\n- it would be great to have package docs that give a brief overview of the protocol, the structure of the code, and links to protocol documentation\n- apply whitespace consistently throughout: `if (`, `// a comment`\n\nNot for now, but possibly a simplification in the future: it would also be possible to use a `Dispatcher` to do packet defragmentation. In some sense, it's a more natural abstraction: the pipeline codec produces and consumes Packets, and is stateless. The dispatcher consumes and produces requests/responses, and is stateful. Besides a cleaner separation of responsibilities, you also have the full power of composable futures at hand, which makes it possible to write imperative-looking code. You could do stuff like:\n\n``` scala\n\nreadPacket() flatMap { packet =>\n  if (fragmented(packet))\n    defrag(packet)\n  else\n    decode(packet)\n}\n```\n\netc.\n I\u2019ve pulled this internally; should show up here soon (probably Monday). Not yet published.\n  I assume what you mean is: what happens when the client sends an invalid message? That's really protocol specific. Generically we cannot do anything other than close the connection, but some protocols may have support for returning errors in such scenarios.\n  This was disabled temporarily because of a scala 2.8 dependency diamond issue. It's re-enabled internally, and works well. I'm going to push this to GitHub momentarily.\n  hey George\u2014I'm currently on vacation and will have a look when I get back (in ~1 week)\n I think I was referring to the POM :-)\n\nMy chief objection to making finagle-protobuf truly first class at this point is that I'd really like to separate the encoding from the protocol. There are some upcoming changes in `finagle-thrift` which will make it a very appealing (and generic) RPC transport, upon which we can use protocol buffers, thrift, whatever.\n\nI'll probably factor that out into something called \"finagle-rpc\"\n @george-vacariuc how do you feel about closing this, and porting just the serialization code to use Mux instead? I promise, it is much better.\n  I think this accomplishes it without checking versions:\n\n```\ncut -f2 -d'=' | awk '{print $1}'\n```\n I've pulled this internally, should make it out here within the day.\n  I'm going to pull this into the internal repo\u2013should appear here soon.\n We've merged it; just haven't pushed yet. I've been on vacation so pushes haven't happened in a little while. I'm going to get someone to do it.\n\n```\n* commit ec764afdc105d2f785570191acb6f12e87edc6a4\n| Author: Chris Birchall <>\n| Date:   Thu Jun 14 14:51:13 2012 -0700\n| \n|     finagle-redis: switch from Int to Long for representing Redis integers\n|     Redis supports 64 bit signed integers (as stated in the docs, e.g. for the INCRBY command), and so Redis integers should be represented by Long rather than Int.\n|     \n|     Here is an example of a Redis exchange that is currently not possible using the finagle-redis client:\n|     \n|     redis 127.0.0.1:6379> SET foo 1\n|     OK\n|     redis 127.0.0.1:6379> INCRBY foo 1000000000000000000\n|     (integer) 1000000000000000001\n|     In order to support this I've switched from Int to Long in the following places:\n|     \n|     INCRBY, DECRBY command arguments\n|     Integer replies\n|     Unfortunately this switch from Int to Long means a breaking change in the API, but it should be very easy for users to fix their client code.\n|     \n|     Signed-off-by: Anirudh Srinivas <anirudhs@twitter.com>\n|     \n|     RB_ID=70910 (https://reviewboard.twitter.biz/r/70910)\n| \n```\n 32a1aa8e1456782817f498f3cf5236d6db223764\n  You need to use the 2.9.1 version of finagle. In sbt, you do this with \"crosspaths\", so your dependency should look like this:\n\n```\nlibraryDependencies += \"com.twitter\" %% \"finagle\" % \"3.0.0\"\n```\n\nNote the double `%%`\n This is due to using 2.8 artifacts with scala 2.9\n  I think doing something like this,\n\n``` scala\ndiff --git a/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/HttpDechunker.scala b/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/HttpDechunker.scala\nindex 52faaa6..fb7c7e9 100644\n--- a/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/HttpDechunker.scala\n+++ b/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/HttpDechunker.scala\n@@ -40,11 +40,13 @@ class HttpDechunker extends BrokerChannelHandler {\n\n           if (chunk.isLast) {\n             ch.close()\n-            sendOf andThen error(err, EOF)\n+            sendOf.sync() ensure error(err, EOF)\n           } else {\n             ch.setReadable(false)\n-            sendOf andThen ch.setReadable(true)\n-            read(ch, out, err, close)\n+            sendOf.sync() ensure {\n+              ch.setReadable(true)\n+              read(ch, out, err, close)\n+            }\n           }\n```\n\nis a bit simpler, doesn't involve the use of a `Future`, and makes the sequencing more explicit.\n Pretty much any Spec, eg.: https://github.com/twitter/finagle/blob/master/finagle-native/src/test/scala/com/twitter/finagle/ssl/SslSpec.scala\n\nNote that it is a `class` (not an `object`) and mixes in `SpecificationWithJUnit` not `Specification`\n And yes, please remove the additional case in EndToEnd. Thanks!\n Looks great! I'm going to cherry pick in the other commit.\n I had to add the following build dep. Did you forget to add it?\n\n``` scala\n\ndiff --git a/project/Build.scala b/project/Build.scala\nindex d7923d4..752f011 100644\n--- a/project/Build.scala\n+++ b/project/Build.scala\n@@ -206,7 +206,7 @@ object Finagle extends Build {\n       sharedSettings\n   ).settings(\n     name := \"finagle-stream\"\n-  ).dependsOn(finagleCore, finagleKestrel)\n+  ).dependsOn(finagleCore, finagleKestrel, finagleTest % \"test\")\n\n   lazy val finagleThrift = Project(\n     id = \"finagle-thrift\",\n```\n Pushed: 919fd54392b035389937e7a8e67d9565b6f381d6\n  This is somewhat interesting\u2014I'm a bit split about what to do exactly. You can always get the behavior you want by sequencing syncs; but it seems like serialization of messages is desirable generally. I think, however, that the correct solution is to sequence these explicitly: don't wait for the next upstream until the previous syncd.\n Fixed with 919fd54392b035389937e7a8e67d9565b6f381d6. Thanks!\n  Hey, sorry about this! I'm working on pushing out a permanent fix for these build divergences that happen from time to time.\n Should be Monday a.m.\u2014I have the build working internally, but need to polish it a little before pushing it out.\n (Btw: this is already done and pushed to [util](https://github.com/twitter/util/))\n This is now pushed to finagle; it builds well now, with sbt11.\n  I've merged this manually in c39bb8c0\n  I'm not sure it should. Connection management should be disassociated from request management.\n The problem is that services are request oriented, but service factories are connection oriented\u2014mixing the two is going to cause resource exhaustion like this.\n\nThere is a solution to your problem, however, and that's to modify the codec to ensure that proper connection management is applied: a connection is given back to the pool only after it has been released. (We're currently enforcing correctness by ensuring clients are used just once, which is a kludge\u2014finagle-stream was originally designed for \"infinite\" streams).\n Something like this would probably do:\n\n``` scala\n\ndiff --git a/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/Stream.scala b/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/Stream.scala\nindex 9341534..f720aed 100644\n--- a/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/Stream.scala\n+++ b/finagle/finagle-stream/src/main/scala/com/twitter/finagle/stream/Stream.scala\n@@ -1,17 +1,46 @@\n package com.twitter.finagle.stream\n\n+import com.twitter.concurrent.Channel\n+import com.twitter.finagle.ServiceNotAvailableException\n+import com.twitter.finagle.{\n+  Codec, CodecFactory, Service, ServiceFactory, ServiceProxy, TooManyConcurrentRequestsException}\n+import com.twitter.util.{Future, Promise}\n import java.util.concurrent.atomic.AtomicBoolean\n-\n import org.jboss.netty.channel.{ChannelPipelineFactory, Channels}\n import org.jboss.netty.handler.codec.http.{\n-  HttpServerCodec, HttpClientCodec, HttpRequest, HttpResponse}\n+  HttpClientCodec, HttpRequest, HttpResponse, HttpServerCodec}\n\n-import com.twitter.concurrent.Channel\n-import com.twitter.util.Future\n+/**\n+ */\n+private[stream] class DelayedReleaseService(self: Service[HttpRequest, StreamResponse])\n+  extends ServiceProxy[HttpRequest, StreamResponse](self)\n+{\n+  @volatile var done: Future[Unit] = Future.Done\n\n-import com.twitter.finagle.{\n-  Codec, CodecFactory, Service, ServiceProxy, ServiceFactory}\n-import com.twitter.finagle.ServiceNotAvailableException\n+  override def apply(req: HttpRequest) = {\n+    if (!done.isDefined)\n+      Future.exception(new TooManyConcurrentRequestsException)\n+    else {\n+      val p = new Promise[Unit]\n+      done = p\n+      self(req) map { res =>\n+        new StreamResponse {\n+          def httpResponse = res.httpResponse\n+          def messages = res.messages\n+          def error = res.error\n+          def release() {\n+            p.setValue(())\n+            res.release()\n+          }\n+        }\n+      } onFailure { _ => p.setValue(()) }\n+    }\n+  }\n+\n+  override def release() {\n+    done ensure self.release()\n+  }\n+}\n\n object Stream {\n   def apply(): Stream = new Stream()\n@@ -42,24 +71,11 @@ class Stream extends CodecFactory[HttpRequest, StreamResponse] {\n           pipeline\n         }\n       }\n-      override def prepareConnFactory(\n-        underlying: ServiceFactory[HttpRequest, StreamResponse]\n-      ): ServiceFactory[HttpRequest, StreamResponse] =\n-        underlying map { service => new UseOnceService(service) }\n-    }\n-  }\n-\n-  private class UseOnceService(underlying: Service[HttpRequest, StreamResponse])\n-    extends ServiceProxy[HttpRequest, StreamResponse](underlying)\n-  {\n-    private[this] val used = new AtomicBoolean(false)\n\n-    override def apply(request: HttpRequest) = {\n-      if (used.compareAndSet(false, true)) underlying(request) else {\n-        Future.exception(new ServiceNotAvailableException)\n-      }\n+      override def prepareServiceFactory(\n+        underlying: ServiceFactory[HttpRequest, StreamResponse]\n+      ): ServiceFactory[HttpRequest, StreamResponse] = \n+        underlying map(new DelayedReleaseService(_))\n     }\n-\n-    override def isAvailable = !used.get && underlying.isAvailable\n   }\n }\ndiff --git a/finagle/finagle-stream/src/test/scala/com/twitter/finagle/stream/EndToEndSpec.scala b/finagle/finagle-stream/src/test/scala/com/twitter/finagle/stream/EndToEndSpec.scala\nindex 8fe948c..0dc074c 100644\n--- a/finagle/finagle-stream/src/test/scala/com/twitter/finagle/stream/EndToEndSpec.scala\n+++ b/finagle/finagle-stream/src/test/scala/com/twitter/finagle/stream/EndToEndSpec.scala\n@@ -4,7 +4,7 @@ import com.twitter.concurrent._\n import com.twitter.conversions.time._\n import com.twitter.finagle.builder.{ClientBuilder, ServerBuilder}\n import com.twitter.finagle.{\n-  ServiceNotAvailableException, ClientCodecConfig, SimpleFilter, Service}\n+  TooManyConcurrentRequestsException, ClientCodecConfig, SimpleFilter, Service}\n import com.twitter.util._\n import java.net.InetSocketAddress\n import java.nio.charset.Charset\n@@ -108,7 +108,7 @@ class EndToEndSpec extends SpecificationWithJUnit {\n       \"the client does not admit concurrent requests\" in {\n         val clientRes = client(httpRequest)(1.second)\n         client(httpRequest).poll must beLike {\n-          case Some(Throw(_: ServiceNotAvailableException)) => true\n+          case Some(Throw(_: TooManyConcurrentRequestsException)) => true\n         }\n       }\n```\n I'm pushing something similar to this change internally, so it should appear on GitHub in a few days.\n Done in 686dae852a8b5\n  Thanks!\n\nYikes, this is an ugly bit of Synchronized\\* in Scala-- might consider a more explicit approach, too.\n  Thanks!\n  oh. that's .. unfortunate.\n\ni'll fix this; thanks!\n This is fixed.\n  That's right. These probably refer to the [version of `within` that takes an implicit](https://github.com/twitter/util/blob/master/util-core/src/main/scala/com/twitter/util/Future.scala#L441)\n  I tried to reproduce it; I could get it hang a couple of times. I can't get it to hang any longer. When it happened it was hanging in connection establishment. It seems that the api.authorize.net has very high variability in resolution-- so that might be an issue. Anyway, I'm going to keep trying (I now have added debug code to give me a better idea of what's going on by setting a low tcp connect timeout and seeing what's reported).\n Is this still an issue?\n  Thanks!\n  Thanks!\n  Thanks!\n  Finagle now builds fine with sbt11, and on scala 2.9.x\n  This should be fixed.\n  Yep, I was confused.\n Thanks!\n  Is this particular protocol `(code32, length32, message)` used by somebody else, or is it your own? If not, it  would be nice to build more room for extensibility (eg. to ship trace ids) from the start. In thrift we do an upgrade dance, but that's only to maintain backwards compatibility.\n\nAlso, it would be nice to build a protobuf compiler plugin to generate `Future`-full bindings as well.\n I want to merge this, but we need to put some more work in. My biggest concern so far is the actual protocol: does it comply to some other widely-used one, or is it a custom one of yours? If it's a custom one, I think we should figure out a way to make it more extensible for features like tracing.\n\nI'm willing to merge this in so that we can work on it, but without publishing it yet. How does that sound?\n (Another thing that would be nice to support is multiplexing.\n I'm going to merge this, but not publish it yet-- this way we can work on it to get it up to shape!\n It's merged! I'll write my thoughts about a protocol in an email. Are you subscribed to the finaglers group?\n  Please use sbt11 to build finagle open source.\n  This works.\n  This should all be resolved. Finagle should build with\n\n```\n   ./sbt test\n```\n  Thanks!\n  This question was answered on the mailing list:\n\n> You're encountering a problem due to the asymmetry of the String codec \u2014 which is really just a toy codec used as a minimal example for codec construction: it expects requests to be terminated with a newline, but the server codec strips the delimiter. So if you modify your proxy service a little, adding a newline to the request:\n> \n> ```\n> val proxyService = new Service[String, String] {\n>   def apply(request: String) = {\n>     println(\"I'm router, I received request message:\" + request)\n>     client(request+\"\\n\").onSuccess {\n>       result => println(\"Router received result asynchronously: \"\n>     ...\n> ```\n> \n> everything should work.\n> \n> Note that a well-designed codec will almost always have the property that a proxy in finagle can simply be implemented by doing:\n> \n>   val client = ClientBuilder().codec(Blah())....build()\n>   val server = ServerBuilder().codec(Blah())....build(client)\n> \n> Another note on your code: you shouldn't release the client in the server, lest you wish to server only one request.\n  It sounds like perhaps you're using the 2.8.1 artifacts? 2.9.1 are published with the \"_2.9.1\" suffix, thus you need:\n\n```\n\"com.twitter\" % \"finagle-core_2.9.1\" % ...\n```\n\netc.\n @danielschonfeld just did. sorry about the delay!\n  Finagle only builds with sbt 0.7.x. Note that this doesn't mean you have to use it in _your_ projects -- it's only required to compile finagle itself.\n\nFurthermore we publish binary artifacts so you needn't compile it yourself if you don't want.\n\nI'll add some shell scripts to the finagle source (as well as util) to make it self-bootstrapping so that you don't need to install sbt yourself.\n Sure-- there's no real reason scala bootstrapper can't use sbt 0.11-- standard project and friends are ported.\n @jponge they're on our own maven repo: http://maven.twttr.com/. I just realized that this is in fact not documented. I'm going to bring this up to date tomorrow. I'm also working on getting us published to sonatype.\n Finagle builds by default with sbt11 now.  `./sbt test`\n  thanks!\n  This should be resolved now.\n  this has been fixed internally, and i'll make a code push today together with the release.\n  thanks!\n  thanks!\n  it's comforting that our implementation matched verbatim!\n  thanks!\n  thanks!\n  looks good, thanks for the changees!\n  This should be fixed.\n  Thanks!\n  hello\u2014 you must use our fork of the thrift compiler. it's at:\n\n  https://github.com/mariusaeriksen/thrift-0.5.0-finagle\n  yep.  the sbt plugin simply invokes the finagle thrift compiler [here](https://github.com/mariusaeriksen/thrift-0.5.0-finagle).\n\nthis is a modified apache thrift compiler with the finagle bindings. we're hoping to make this a lot easier in the near future.\n  thanks!\n  yeah, we're not quite ready for 2.9 yet. for pure Scala, it's pretty simple. however, there have been some significant changes in the way certain types are represented, which is causing some issues for Java compatibility. these changes were introduced in 2.8.2 as well, so even to go that far, we'll have to tackle them.\n\ni have an internal branch that does compile (util, finagle -- we build all of these as part of one source tree, so changes like this are easier to make), but i can't promise anything before a few weeks hence.\n We have been publishing 2.9.1 releases for a while now. The maven artifacts are suffixed with \"_2.9.1\". E.g.\n\n  \"com.twitter\" % \"finagle-core_2.9.1\" % \"1.9.12\"\n I'm working on getting those branches to sync with github, too. Watch this space in a few days.\n we're publishing 2.9.1  artifacts now (and have been for a while).\n  great, thanks!\n  great, thanks!\n  thanks!\n  yikes! i guess i never tested the server side of this :-/\n just fix the tiny style nit, then i'll merge.\n  thanks!\n  Thanks!\n  please make the change in the internal (birdcage) repo.\n  fixed: thanks!\n  host validation was added in ebe2fcfa548c4ccb145c8d5b3257a071e513b50d\n  this is just a case of finagle being too verbose -- i'm landing a fix for this today or tomorrow\n  fixed in 1.7.5\n  It should not be public.\n  can you include:\n1. the builder code for the client\n2. how your invoke it?\n\nthese exceptions should never happen if you just use .build().\n the outlined usage seems correct to me.\n\nwhich version of finagle are you using?\n\nalso: are you keeping stats (through .reportTo)? the counters/gauges/metrics would be handy.\n\nalso: when these errors occur, are there any other concurrent exceptions?\n\np.s. there should be no difference between using .build() and calling .service() on your factory -- except that you only get retries with `.build` and not `.buildFactory`.\n another thing that would help me with trying to reproduce this is: approximate failure rate of requests, latency of requests and request concurrency.\n re: the WriteExceptions-- these are annoying but harmless. a change is being introduced very soon that quenches these.\n\nit's interesting that you're canceling the Futures.\n\nproper cancellation support in finagle was introduced in 1.7.3. i can also think of at least one condition under which 1.6.x would fail on cancellation (i also rewrote Future cancellation completely in the meantime, to avoid exactly these kinds of bugs).\n\ncould you upgrade to 1.7.3 and see if the problem persists?\n great. the WriteExceptions you are seeing are likely valid, too -- i'm adding some code shortly that will quench a class of exceptions that get logged, but shouldn't be.\n should be this week\n  pulled, thanks!\n  this is now fixed.\n  i think this is no longer the case. i was able to build the current master just fine outside of Twitter's environment.\n  the README has since been rewritten\n  This is done.\n  LGTM!\n  LGTM!\n  there's a race between `maybeLifeTimeExpire` and the completion of the underlying request: `maybeLifetimeExpire` can fire, and between `maybeExpire()` and `expired = true`, the request can complete, leaving `didExpire()` uncalled.\n i've added you to the twitter team.  you should be able to push now\n  LGTM\n  LGTM\n", "text_all_count": 4296, "text_word_token": ["Thanks", "for", "the", "submission", "NUMBER", "We", "re", "test", "this", "along", "with", "upgrading", "to", "NUMBER", "right", "now", "and", "will", "keep", "you", "posted", "when", "we", "commit", "NUMBER", "We", "shipped", "NUMBER", "recently", "but", "I", "don", "t", "see", "any", "tags", "release", "LINK", "There", "s", "some", "trickiness", "with", "the", "backport", "of", "http", "headers", "from", "netty", "NUMBER", "that", "collides", "with", "our", "headers", "map", "in", "finagle", "NUMBER", "If", "you", "want", "to", "take", "a", "look", "at", "it", "we", "d", "appreciate", "it", "NUMBER", "It", "should", "be", "pretty", "simple", "to", "adopt", "to", "the", "new", "APIs", "NUMBER", "This", "be", "really", "cool", "btw", "NUMBER", "I", "think", "we", "just", "want", "this", "to", "be", "part", "of", "the", "inet", "resolver", "NUMBER", "More", "generally", "we", "hope", "to", "remove", "the", "thrift", "dependency", "altogether", "NUMBER", "It", "s", "about", "time", "Finagle", "get", "a", "legit", "logo", "NUMBER", "We", "ll", "poll", "the", "community", "for", "ideas", "before", "we", "kick", "off", "a", "NUMBER", "designs", "contest", "and", "vote", "amongst", "the", "submissions", "NUMBER", "Here", "be", "what", "we", "have", "so", "far", "for", "ideas", "Peregrine", "falcon", "as", "the", "fastest", "bird", "by", "flight", "speed", "And", "it", "starts", "with", "F", "Something", "to", "do", "with", "filters", "Something", "to", "do", "with", "plumbing", "allusion", "to", "a", "steam", "governor", "We", "would", "like", "to", "hear", "from", "the", "community", "what", "they", "would", "like", "to", "see", "in", "a", "logo", "or", "if", "they", "have", "any", "suggestions", "NUMBER", "Someone", "mention", "coffee", "filters", "as", "an", "idea", "NUMBER", "Perhaps", "something", "involving", "a", "bird", "in", "an", "engine", "room", "How", "about", "some", "sort", "of", "fast", "bird", "or", "a", "more", "cuddly", "animal", "perhaps", "mechanized", "with", "a", "big", "helmet", "on", "We", "want", "to", "emphasize", "fast", "safe", "NUMBER", "Thanks", "everyone", "for", "your", "input", "I", "will", "start", "the", "contest", "this", "week", "and", "we", "can", "go", "over", "submissions", "while", "we", "narrow", "things", "down", "NUMBER", "The", "contest", "has", "start", "LINK", "design", "contests", "logo", "finagle", "NUMBER", "welcome", "There", "will", "be", "a", "few", "days", "of", "submissions", "as", "we", "get", "to", "whittle", "them", "down", "based", "on", "our", "likes", "NUMBER", "If", "you", "have", "anymore", "ideas", "on", "what", "the", "Finagle", "logo", "should", "look", "like", "let", "me", "know", "NUMBER", "You", "can", "take", "a", "peak", "at", "the", "current", "set", "of", "designs", "LINK", "design", "contests", "logo", "finagle", "NUMBER", "Anything", "stand", "out", "that", "folks", "like", "Been", "lost", "the", "last", "thirty", "minutes", "looking", "at", "steampunk", "birds", "this", "one", "be", "amazing", "LINK", "all", "stars", "steampunk_", "NUMBER", "x", "NUMBER", "png", "Quick", "poll", "here", "for", "people", "who", "want", "to", "help", "narrow", "down", "potential", "designs", "LINK", "design", "vote", "oxdzrx", "Another", "vote", "to", "finalize", "the", "designers", "for", "the", "next", "round", "of", "iteration", "LINK", "design", "vote", "js", "NUMBER", "After", "voting", "these", "two", "designs", "designers", "stuck", "out", "LINK", "design", "contests", "logo", "finagle", "NUMBER", "entries", "NUMBER", "LINK", "design", "contests", "logo", "finagle", "NUMBER", "entries", "NUMBER", "Is", "everyone", "comfortable", "moving", "forward", "with", "those", "two", "designers", "to", "have", "them", "battle", "it", "out", "for", "the", "final", "design", "We", "finalized", "our", "designers", "and", "be", "now", "experimenting", "with", "some", "more", "designs", "LINK", "design", "vote", "rvz", "NUMBER", "k", "Please", "comment", "on", "each", "design", "it", "really", "helps", "the", "designers", "NUMBER", "We", "will", "keep", "iterating", "and", "in", "another", "poll", "or", "two", "call", "for", "the", "final", "vote", "NUMBER", "Thanks", "for", "everyones", "help", "Ok", "here", "s", "the", "final", "poll", "to", "select", "the", "logo", "and", "designer", "to", "work", "with", "LINK", "design", "vote", "m", "NUMBER", "nvce", "We", "will", "have", "an", "opportunity", "to", "slightly", "tweak", "the", "final", "logo", "selected", "so", "keep", "that", "in", "mind", "when", "you", "re", "write", "the", "reviews", "for", "the", "logo", "in", "the", "poll", "NUMBER", "The", "voting", "be", "do", "and", "we", "went", "with", "this", "one", "LINK", "Thank", "you", "to", "everyone", "who", "participated", "in", "the", "voting", "process", "NUMBER", "Reported", "by", "rstrickland", "with", "the", "following", "stack", "trace", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "ERROR", "c", "NUMBER", "w", "NUMBER", "d", "NUMBER", "d", "NUMBER", "FourInfoActor", "New", "I", "O", "worker", "NUMBER", "TAG", "Future", "Unit", "so", "that", "users", "don", "t", "get", "confused", "about", "how", "the", "return", "value", "be", "use", "NUMBER", "Because", "the", "user", "must", "discard", "any", "computation", "they", "do", "in", "the", "callback", "it", "be", "transparent", "that", "the", "computation", "be", "ignored", "NUMBER", "feedback", "I", "d", "like", "I", "don", "t", "really", "like", "the", "name", "hooks", "NUMBER", "Does", "anyone", "have", "a", "better", "idea", "for", "what", "it", "should", "be", "test", "I", "tried", "it", "out", "by", "change", "a", "session", "variable", "pretty", "sure", "it", "worked", "NUMBER", "I", "don", "t", "know", "NUMBER", "I", "ll", "talk", "to", "someone", "more", "knowledgeable", "on", "my", "team", "NUMBER", "I", "talked", "to", "some", "team", "members", "and", "they", "point", "out", "that", "be", "a", "pretty", "useful", "point", "to", "be", "able", "to", "inject", "arbitrary", "code", "NUMBER", "It", "s", "not", "an", "especially", "concerning", "vector", "for", "attack", "but", "it", "s", "fairly", "useful", "to", "be", "able", "to", "do", "things", "like", "collect", "data", "about", "connection", "churn", "etc", "NUMBER", "From", "the", "point", "of", "view", "that", "it", "could", "be", "use", "for", "plenty", "of", "things", "other", "than", "just", "session", "variables", "I", "think", "it", "makes", "sense", "to", "keep", "it", "a", "function", "NUMBER", "thanks", "motivation", "Some", "people", "have", "mysql", "databases", "with", "different", "character", "encodings", "NUMBER", "finagle", "mysql", "doesn", "t", "support", "a", "lot", "right", "now", "but", "it", "should", "in", "the", "future", "NUMBER", "implementation", "This", "be", "a", "more", "complicated", "problem", "than", "you", "might", "think", "at", "first", "because", "different", "columns", "can", "theoretically", "be", "different", "charsets", "within", "a", "single", "database", "NUMBER", "todo", "prepared", "statements", "I", "only", "add", "support", "for", "Latin", "NUMBER", "in", "this", "PR", "because", "it", "lets", "me", "punt", "on", "encoding", "prepared", "statements", "NUMBER", "For", "prepared", "statements", "we", "don", "t", "need", "to", "declare", "anything", "about", "the", "charset", "to", "mysql", "but", "we", "do", "need", "to", "encode", "them", "NUMBER", "Because", "latin", "NUMBER", "be", "compatible", "with", "utf", "NUMBER", "this", "just", "assumes", "every", "string", "in", "a", "prepared", "statement", "will", "use", "utf", "NUMBER", "More", "work", "will", "need", "to", "be", "do", "to", "guarantee", "that", "every", "string", "in", "a", "prepared", "statement", "be", "encoded", "properly", "NUMBER", "other", "charsets", "The", "other", "part", "of", "this", "that", "isn", "t", "complete", "be", "that", "the", "conversion", "from", "mysql", "collation", "number", "to", "a", "java", "NUMBER", "nio", "NUMBER", "charset", "be", "completely", "punted", "on", "and", "it", "always", "returns", "utf", "NUMBER", "In", "the", "future", "there", "should", "be", "a", "map", "from", "collations", "to", "charsets", "NUMBER", "thanks", "Thanks", "roanta", "for", "bearing", "with", "me", "as", "I", "muddled", "through", "the", "finagle", "mysql", "code", "and", "provide", "guidance", "NUMBER", "roanta", "tells", "me", "that", "this", "has", "be", "merge", "internally", "NUMBER", "I", "think", "that", "only", "up", "until", "twitter", "finagle", "a", "NUMBER", "ec", "NUMBER", "was", "merge", "internally", "NUMBER", "I", "push", "to", "this", "branch", "forgetting", "that", "it", "hadn", "t", "be", "push", "back", "into", "the", "open", "source", "repo", "NUMBER", "I", "m", "not", "sure", "what", "to", "do", "in", "this", "situation", "NUMBER", "Should", "I", "revert", "twitter", "finagle", "a", "NUMBER", "df", "NUMBER", "on", "this", "branch", "I", "have", "a", "new", "branch", "with", "a", "new", "pull", "request", "in", "NUMBER", "Fixes", "NUMBER", "motivation", "Described", "in", "NUMBER", "implementation", "Described", "in", "NUMBER", "change", "in", "api", "The", "http", "logging", "filter", "s", "type", "has", "change", "slightly", "so", "that", "NUMBER", "log", "takes", "a", "REQUEST", "where", "REQUEST", "TAG", "if", "fragmented", "packet", "defrag", "packet", "else", "decode", "packet", "etc", "NUMBER", "I", "ve", "pull", "this", "internally", "should", "show", "up", "here", "soon", "probably", "Monday", "NUMBER", "Not", "yet", "publish", "NUMBER", "I", "assume", "what", "you", "mean", "be", "what", "happens", "when", "the", "client", "sends", "an", "invalid", "message", "That", "s", "really", "protocol", "specific", "NUMBER", "Generically", "we", "cannot", "do", "anything", "other", "than", "close", "the", "connection", "but", "some", "protocols", "may", "have", "support", "for", "returning", "error", "in", "such", "scenarios", "NUMBER", "This", "was", "disabled", "temporarily", "because", "of", "a", "scala", "NUMBER", "dependency", "diamond", "issue", "NUMBER", "It", "s", "re", "enable", "internally", "and", "works", "well", "NUMBER", "I", "m", "going", "to", "push", "this", "to", "GitHub", "momentarily", "NUMBER", "hey", "George", "I", "m", "currently", "on", "vacation", "and", "will", "have", "a", "look", "when", "I", "get", "back", "in", "NUMBER", "week", "I", "think", "I", "was", "referring", "to", "the", "POM", "My", "chief", "objection", "to", "make", "finagle", "protobuf", "truly", "first", "class", "at", "this", "point", "be", "that", "I", "d", "really", "like", "to", "separate", "the", "encoding", "from", "the", "protocol", "NUMBER", "There", "be", "some", "upcoming", "change", "in", "finagle", "thrift", "which", "will", "make", "it", "a", "very", "appealing", "and", "generic", "RPC", "transport", "upon", "which", "we", "can", "use", "protocol", "buffers", "thrift", "whatever", "NUMBER", "I", "ll", "probably", "factor", "that", "out", "into", "something", "call", "finagle", "rpc", "george", "vacariuc", "how", "do", "you", "feel", "about", "closing", "this", "and", "porting", "just", "the", "serialization", "code", "to", "use", "Mux", "instead", "I", "promise", "it", "be", "much", "better", "NUMBER", "I", "think", "this", "accomplishes", "it", "without", "checking", "version", "cut", "f", "NUMBER", "d", "awk", "print", "NUMBER", "I", "ve", "pull", "this", "internally", "should", "make", "it", "out", "here", "within", "the", "day", "NUMBER", "I", "m", "going", "to", "pull", "this", "into", "the", "internal", "repo", "should", "appear", "here", "soon", "NUMBER", "We", "ve", "merge", "it", "just", "haven", "t", "push", "yet", "NUMBER", "I", "ve", "be", "on", "vacation", "so", "pushes", "haven", "t", "happened", "in", "a", "little", "while", "NUMBER", "I", "m", "going", "to", "get", "someone", "to", "do", "it", "NUMBER", "commit", "ec", "NUMBER", "afdc", "NUMBER", "d", "NUMBER", "f", "NUMBER", "acb", "NUMBER", "f", "NUMBER", "e", "NUMBER", "edc", "NUMBER", "a", "NUMBER", "Author", "Chris", "Birchall", "TAG", "Date", "Thu", "Jun", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "finagle", "redis", "switch", "from", "Int", "to", "Long", "for", "representing", "Redis", "integers", "Redis", "support", "NUMBER", "bit", "sign", "integers", "as", "stated", "in", "the", "docs", "e", "NUMBER", "g", "NUMBER", "for", "the", "INCRBY", "command", "and", "so", "Redis", "integers", "should", "be", "represented", "by", "Long", "rather", "than", "Int", "NUMBER", "Here", "be", "an", "example", "of", "a", "Redis", "exchange", "that", "be", "currently", "not", "possible", "use", "the", "finagle", "redis", "client", "redis", "NUMBER", "NUMBER", "SET", "foo", "NUMBER", "OK", "redis", "NUMBER", "NUMBER", "INCRBY", "foo", "NUMBER", "integer", "NUMBER", "In", "order", "to", "support", "this", "I", "ve", "switched", "from", "Int", "to", "Long", "in", "the", "following", "places", "INCRBY", "DECRBY", "command", "argument", "Integer", "replies", "Unfortunately", "this", "switch", "from", "Int", "to", "Long", "means", "a", "breaking", "change", "in", "the", "API", "but", "it", "should", "be", "very", "easy", "for", "users", "to", "fix", "their", "client", "code", "NUMBER", "Signed", "off", "by", "Anirudh", "Srinivas", "TAG", "RB_ID", "NUMBER", "LINK", "NUMBER", "a", "NUMBER", "aa", "NUMBER", "e", "NUMBER", "f", "NUMBER", "f", "NUMBER", "cf", "NUMBER", "d", "NUMBER", "db", "NUMBER", "You", "need", "to", "use", "the", "NUMBER", "version", "of", "finagle", "NUMBER", "In", "sbt", "you", "do", "this", "with", "crosspaths", "so", "your", "dependency", "should", "look", "like", "this", "libraryDependencies", "com", "NUMBER", "twitter", "finagle", "NUMBER", "Note", "the", "double", "This", "be", "due", "to", "use", "NUMBER", "artifacts", "with", "scala", "NUMBER", "I", "think", "doing", "something", "like", "this", "scala", "diff", "git", "a", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "HttpDechunker", "NUMBER", "scala", "b", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "HttpDechunker", "NUMBER", "scala", "index", "NUMBER", "faaa", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "NUMBER", "a", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "HttpDechunker", "NUMBER", "scala", "b", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "HttpDechunker", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "class", "HttpDechunker", "extend", "BrokerChannelHandler", "if", "chunk", "NUMBER", "isLast", "ch", "NUMBER", "close", "sendOf", "andThen", "error", "err", "EOF", "sendOf", "NUMBER", "sync", "ensure", "error", "err", "EOF", "else", "ch", "NUMBER", "setReadable", "false", "sendOf", "andThen", "ch", "NUMBER", "setReadable", "true", "read", "ch", "out", "err", "close", "sendOf", "NUMBER", "sync", "ensure", "ch", "NUMBER", "setReadable", "true", "read", "ch", "out", "err", "close", "be", "a", "bit", "simpler", "doesn", "t", "involve", "the", "use", "of", "a", "Future", "and", "makes", "the", "sequencing", "more", "explicit", "NUMBER", "Pretty", "much", "any", "Spec", "eg", "NUMBER", "LINK", "native", "src", "test", "scala", "com", "twitter", "finagle", "ssl", "SslSpec", "NUMBER", "scala", "Note", "that", "it", "be", "a", "class", "not", "an", "object", "and", "mixes", "in", "SpecificationWithJUnit", "not", "Specification", "And", "yes", "please", "remove", "the", "additional", "case", "in", "EndToEnd", "NUMBER", "Thanks", "Looks", "great", "I", "m", "going", "to", "cherry", "pick", "in", "the", "other", "commit", "NUMBER", "I", "had", "to", "add", "the", "following", "build", "dep", "NUMBER", "Did", "you", "forget", "to", "add", "it", "scala", "diff", "git", "a", "project", "Build", "NUMBER", "scala", "b", "project", "Build", "NUMBER", "scala", "index", "d", "NUMBER", "d", "NUMBER", "f", "NUMBER", "NUMBER", "a", "project", "Build", "NUMBER", "scala", "b", "project", "Build", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "object", "Finagle", "extend", "Build", "sharedSettings", "NUMBER", "settings", "name", "finagle", "stream", "NUMBER", "dependsOn", "finagleCore", "finagleKestrel", "NUMBER", "dependsOn", "finagleCore", "finagleKestrel", "finagleTest", "test", "lazy", "val", "finagleThrift", "Project", "id", "finagle", "thrift", "Pushed", "NUMBER", "fd", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "NUMBER", "This", "be", "somewhat", "interesting", "I", "m", "a", "bit", "split", "about", "what", "to", "do", "exactly", "NUMBER", "You", "can", "always", "get", "the", "behavior", "you", "want", "by", "sequencing", "syncs", "but", "it", "seems", "like", "serialization", "of", "message", "be", "desirable", "generally", "NUMBER", "I", "think", "however", "that", "the", "correct", "solution", "be", "to", "sequence", "these", "explicitly", "don", "t", "wait", "for", "the", "next", "upstream", "until", "the", "previous", "syncd", "NUMBER", "Fixed", "with", "NUMBER", "fd", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "NUMBER", "Thanks", "Hey", "sorry", "about", "this", "I", "m", "work", "on", "push", "out", "a", "permanent", "fix", "for", "these", "build", "divergences", "that", "happen", "from", "time", "to", "time", "NUMBER", "Should", "be", "Monday", "a", "NUMBER", "m", "NUMBER", "I", "have", "the", "build", "work", "internally", "but", "need", "to", "polish", "it", "a", "little", "before", "push", "it", "out", "NUMBER", "Btw", "this", "be", "already", "do", "and", "push", "to", "util", "LINK", "This", "be", "now", "push", "to", "finagle", "it", "build", "well", "now", "with", "sbt", "NUMBER", "I", "ve", "merge", "this", "manually", "in", "c", "NUMBER", "bb", "NUMBER", "c", "NUMBER", "I", "m", "not", "sure", "it", "should", "NUMBER", "Connection", "management", "should", "be", "disassociated", "from", "request", "management", "NUMBER", "The", "problem", "be", "that", "services", "be", "request", "oriented", "but", "service", "factories", "be", "connection", "oriented", "mixing", "the", "two", "be", "going", "to", "cause", "resource", "exhaustion", "like", "this", "NUMBER", "There", "be", "a", "solution", "to", "your", "problem", "however", "and", "that", "s", "to", "modify", "the", "codec", "to", "ensure", "that", "proper", "connection", "management", "be", "applied", "a", "connection", "be", "given", "back", "to", "the", "pool", "only", "after", "it", "has", "be", "release", "NUMBER", "We", "re", "currently", "enforcing", "correctness", "by", "ensuring", "clients", "be", "use", "just", "once", "which", "be", "a", "kludge", "finagle", "stream", "was", "originally", "designed", "for", "infinite", "streams", "NUMBER", "Something", "like", "this", "would", "probably", "do", "scala", "diff", "git", "a", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "Stream", "NUMBER", "scala", "b", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "Stream", "NUMBER", "scala", "index", "NUMBER", "f", "NUMBER", "aed", "NUMBER", "a", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "Stream", "NUMBER", "scala", "b", "finagle", "finagle", "stream", "src", "main", "scala", "com", "twitter", "finagle", "stream", "Stream", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "package", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ream", "import", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "NUMBER", "Channel", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ServiceNotAvailableException", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "Codec", "CodecFactory", "Service", "ServiceFactory", "ServiceProxy", "TooManyConcurrentRequestsException", "import", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Future", "Promise", "import", "java", "NUMBER", "util", "NUMBER", "concurrent", "NUMBER", "atomic", "NUMBER", "AtomicBoolean", "import", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "channel", "NUMBER", "ChannelPipelineFactory", "Channels", "import", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "handler", "NUMBER", "codec", "NUMBER", "http", "NUMBER", "HttpServerCodec", "HttpClientCodec", "HttpRequest", "HttpResponse", "HttpClientCodec", "HttpRequest", "HttpResponse", "HttpServerCodec", "import", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "NUMBER", "Channel", "import", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Future", "private", "stream", "class", "DelayedReleaseService", "self", "Service", "HttpRequest", "StreamResponse", "extend", "ServiceProxy", "HttpRequest", "StreamResponse", "self", "volatile", "var", "do", "Future", "Unit", "Future", "NUMBER", "Done", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "Codec", "CodecFactory", "Service", "ServiceProxy", "ServiceFactory", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ServiceNotAvailableException", "override", "def", "apply", "req", "HttpRequest", "if", "do", "NUMBER", "isDefined", "Future", "NUMBER", "exception", "new", "TooManyConcurrentRequestsException", "else", "val", "p", "new", "Promise", "Unit", "do", "p", "self", "req", "map", "res", "new", "StreamResponse", "def", "httpResponse", "res", "NUMBER", "httpResponse", "def", "message", "res", "NUMBER", "message", "def", "error", "res", "NUMBER", "error", "def", "release", "p", "NUMBER", "setValue", "res", "NUMBER", "release", "onFailure", "_", "p", "NUMBER", "setValue", "override", "def", "release", "do", "ensure", "self", "NUMBER", "release", "object", "Stream", "def", "apply", "Stream", "new", "Stream", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "class", "Stream", "extend", "CodecFactory", "HttpRequest", "StreamResponse", "pipeline", "override", "def", "prepareConnFactory", "underlying", "ServiceFactory", "HttpRequest", "StreamResponse", "ServiceFactory", "HttpRequest", "StreamResponse", "underlying", "map", "service", "new", "UseOnceService", "service", "private", "class", "UseOnceService", "underlying", "Service", "HttpRequest", "StreamResponse", "extend", "ServiceProxy", "HttpRequest", "StreamResponse", "underlying", "private", "this", "val", "use", "new", "AtomicBoolean", "false", "override", "def", "apply", "request", "HttpRequest", "if", "use", "NUMBER", "compareAndSet", "false", "true", "underlying", "request", "else", "Future", "NUMBER", "exception", "new", "ServiceNotAvailableException", "override", "def", "prepareServiceFactory", "underlying", "ServiceFactory", "HttpRequest", "StreamResponse", "ServiceFactory", "HttpRequest", "StreamResponse", "underlying", "map", "new", "DelayedReleaseService", "_", "override", "def", "isAvailable", "use", "NUMBER", "get", "underlying", "NUMBER", "isAvailable", "diff", "git", "a", "finagle", "finagle", "stream", "src", "test", "scala", "com", "twitter", "finagle", "stream", "EndToEndSpec", "NUMBER", "scala", "b", "finagle", "finagle", "stream", "src", "test", "scala", "com", "twitter", "finagle", "stream", "EndToEndSpec", "NUMBER", "scala", "index", "NUMBER", "fe", "NUMBER", "c", "NUMBER", "dc", "NUMBER", "c", "NUMBER", "a", "finagle", "finagle", "stream", "src", "test", "scala", "com", "twitter", "finagle", "stream", "EndToEndSpec", "NUMBER", "scala", "b", "finagle", "finagle", "stream", "src", "test", "scala", "com", "twitter", "finagle", "stream", "EndToEndSpec", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "import", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "NUMBER", "_", "import", "com", "NUMBER", "twitter", "NUMBER", "conversions", "NUMBER", "time", "NUMBER", "_", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "ServerBuilder", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ServiceNotAvailableException", "ClientCodecConfig", "SimpleFilter", "Service", "TooManyConcurrentRequestsException", "ClientCodecConfig", "SimpleFilter", "Service", "import", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "_", "import", "java", "NUMBER", "net", "NUMBER", "InetSocketAddress", "import", "java", "NUMBER", "nio", "NUMBER", "charset", "NUMBER", "Charset", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "class", "EndToEndSpec", "extend", "SpecificationWithJUnit", "the", "client", "do", "not", "admit", "concurrent", "request", "in", "val", "clientRes", "client", "httpRequest", "NUMBER", "second", "client", "httpRequest", "NUMBER", "poll", "must", "beLike", "case", "Some", "Throw", "_", "ServiceNotAvailableException", "true", "case", "Some", "Throw", "_", "TooManyConcurrentRequestsException", "true", "I", "m", "push", "something", "similar", "to", "this", "change", "internally", "so", "it", "should", "appear", "on", "GitHub", "in", "a", "few", "days", "NUMBER", "Done", "in", "NUMBER", "dae", "NUMBER", "a", "NUMBER", "b", "NUMBER", "Thanks", "Yikes", "this", "be", "an", "ugly", "bit", "of", "Synchronized", "in", "Scala", "might", "consider", "a", "more", "explicit", "approach", "too", "NUMBER", "Thanks", "oh", "NUMBER", "that", "s", "NUMBER", "unfortunate", "NUMBER", "i", "ll", "fix", "this", "thanks", "This", "be", "fix", "NUMBER", "That", "s", "right", "NUMBER", "These", "probably", "refer", "to", "the", "version", "of", "within", "that", "takes", "an", "implicit", "LINK", "core", "src", "main", "scala", "com", "twitter", "util", "Future", "NUMBER", "scala", "L", "NUMBER", "I", "tried", "to", "reproduce", "it", "I", "could", "get", "it", "hang", "a", "couple", "of", "times", "NUMBER", "I", "can", "t", "get", "it", "to", "hang", "any", "longer", "NUMBER", "When", "it", "happened", "it", "was", "hanging", "in", "connection", "establishment", "NUMBER", "It", "seems", "that", "the", "api", "NUMBER", "authorize", "NUMBER", "net", "has", "very", "high", "variability", "in", "resolution", "so", "that", "might", "be", "an", "issue", "NUMBER", "Anyway", "I", "m", "going", "to", "keep", "trying", "I", "now", "have", "add", "debug", "code", "to", "give", "me", "a", "better", "idea", "of", "what", "s", "going", "on", "by", "setting", "a", "low", "tcp", "connect", "timeout", "and", "seeing", "what", "s", "report", "NUMBER", "Is", "this", "still", "an", "issue", "Thanks", "Thanks", "Thanks", "Finagle", "now", "build", "fine", "with", "sbt", "NUMBER", "and", "on", "scala", "NUMBER", "x", "This", "should", "be", "fix", "NUMBER", "Yep", "I", "was", "confused", "NUMBER", "Thanks", "Is", "this", "particular", "protocol", "code", "NUMBER", "length", "NUMBER", "message", "use", "by", "somebody", "else", "or", "be", "it", "your", "own", "If", "not", "it", "would", "be", "nice", "to", "build", "more", "room", "for", "extensibility", "eg", "NUMBER", "to", "ship", "trace", "ids", "from", "the", "start", "NUMBER", "In", "thrift", "we", "do", "an", "upgrade", "dance", "but", "that", "s", "only", "to", "maintain", "backwards", "compatibility", "NUMBER", "Also", "it", "would", "be", "nice", "to", "build", "a", "protobuf", "compiler", "plugin", "to", "generate", "Future", "full", "bindings", "as", "well", "NUMBER", "I", "want", "to", "merge", "this", "but", "we", "need", "to", "put", "some", "more", "work", "in", "NUMBER", "My", "biggest", "concern", "so", "far", "be", "the", "actual", "protocol", "do", "it", "comply", "to", "some", "other", "widely", "use", "one", "or", "be", "it", "a", "custom", "one", "of", "yours", "If", "it", "s", "a", "custom", "one", "I", "think", "we", "should", "figure", "out", "a", "way", "to", "make", "it", "more", "extensible", "for", "features", "like", "tracing", "NUMBER", "I", "m", "willing", "to", "merge", "this", "in", "so", "that", "we", "can", "work", "on", "it", "but", "without", "publishing", "it", "yet", "NUMBER", "How", "do", "that", "sound", "Another", "thing", "that", "would", "be", "nice", "to", "support", "be", "multiplexing", "NUMBER", "I", "m", "going", "to", "merge", "this", "but", "not", "publish", "it", "yet", "this", "way", "we", "can", "work", "on", "it", "to", "get", "it", "up", "to", "shape", "It", "s", "merge", "I", "ll", "write", "my", "thoughts", "about", "a", "protocol", "in", "an", "email", "NUMBER", "Are", "you", "subscribed", "to", "the", "finaglers", "group", "Please", "use", "sbt", "NUMBER", "to", "build", "finagle", "open", "source", "NUMBER", "This", "works", "NUMBER", "This", "should", "all", "be", "resolve", "NUMBER", "Finagle", "should", "build", "with", "NUMBER", "sbt", "test", "Thanks", "This", "question", "was", "answered", "on", "the", "mailing", "list", "You", "re", "encountering", "a", "problem", "due", "to", "the", "asymmetry", "of", "the", "String", "codec", "which", "be", "really", "just", "a", "toy", "codec", "use", "as", "a", "minimal", "example", "for", "codec", "construction", "it", "expects", "request", "to", "be", "terminated", "with", "a", "newline", "but", "the", "server", "codec", "strips", "the", "delimiter", "NUMBER", "So", "if", "you", "modify", "your", "proxy", "service", "a", "little", "add", "a", "newline", "to", "the", "request", "val", "proxyService", "new", "Service", "String", "String", "def", "apply", "request", "String", "println", "I", "m", "router", "I", "received", "request", "message", "request", "client", "request", "n", "NUMBER", "onSuccess", "result", "println", "Router", "received", "result", "asynchronously", "NUMBER", "everything", "should", "work", "NUMBER", "Note", "that", "a", "well", "designed", "codec", "will", "almost", "always", "have", "the", "property", "that", "a", "proxy", "in", "finagle", "can", "simply", "be", "implement", "by", "doing", "val", "client", "ClientBuilder", "NUMBER", "codec", "Blah", "NUMBER", "build", "val", "server", "ServerBuilder", "NUMBER", "codec", "Blah", "NUMBER", "build", "client", "Another", "note", "on", "your", "code", "you", "shouldn", "t", "release", "the", "client", "in", "the", "server", "lest", "you", "wish", "to", "server", "only", "one", "request", "NUMBER", "It", "sounds", "like", "perhaps", "you", "re", "use", "the", "NUMBER", "artifacts", "NUMBER", "be", "publish", "with", "the", "_", "NUMBER", "suffix", "thus", "you", "need", "com", "NUMBER", "twitter", "finagle", "core_", "NUMBER", "NUMBER", "etc", "NUMBER", "danielschonfeld", "just", "did", "NUMBER", "sorry", "about", "the", "delay", "Finagle", "only", "build", "with", "sbt", "NUMBER", "x", "NUMBER", "Note", "that", "this", "doesn", "t", "mean", "you", "have", "to", "use", "it", "in", "_your_", "projects", "it", "s", "only", "required", "to", "compile", "finagle", "itself", "NUMBER", "Furthermore", "we", "publish", "binary", "artifacts", "so", "you", "needn", "t", "compile", "it", "yourself", "if", "you", "don", "t", "want", "NUMBER", "I", "ll", "add", "some", "shell", "scripts", "to", "the", "finagle", "source", "as", "well", "as", "util", "to", "make", "it", "self", "bootstrapping", "so", "that", "you", "don", "t", "need", "to", "install", "sbt", "yourself", "NUMBER", "Sure", "there", "s", "no", "real", "reason", "scala", "bootstrapper", "can", "t", "use", "sbt", "NUMBER", "standard", "project", "and", "friends", "be", "ported", "NUMBER", "jponge", "they", "re", "on", "our", "own", "maven", "repo", "LINK", "I", "just", "realized", "that", "this", "be", "in", "fact", "not", "documented", "NUMBER", "I", "m", "going", "to", "bring", "this", "up", "to", "date", "tomorrow", "NUMBER", "I", "m", "also", "work", "on", "get", "us", "publish", "to", "sonatype", "NUMBER", "Finagle", "build", "by", "default", "with", "sbt", "NUMBER", "now", "NUMBER", "NUMBER", "sbt", "test", "thanks", "This", "should", "be", "resolve", "now", "NUMBER", "this", "has", "be", "fix", "internally", "and", "i", "ll", "make", "a", "code", "push", "today", "together", "with", "the", "release", "NUMBER", "thanks", "thanks", "it", "s", "comforting", "that", "our", "implementation", "matched", "verbatim", "thanks", "thanks", "looks", "good", "thanks", "for", "the", "change", "This", "should", "be", "fix", "NUMBER", "Thanks", "hello", "you", "must", "use", "our", "fork", "of", "the", "thrift", "compiler", "NUMBER", "it", "s", "at", "LINK", "NUMBER", "finagle", "yep", "NUMBER", "the", "sbt", "plugin", "simply", "invokes", "the", "finagle", "thrift", "compiler", "here", "LINK", "NUMBER", "finagle", "NUMBER", "this", "be", "a", "modify", "apache", "thrift", "compiler", "with", "the", "finagle", "bindings", "NUMBER", "we", "re", "hoping", "to", "make", "this", "a", "lot", "easier", "in", "the", "near", "future", "NUMBER", "thanks", "yeah", "we", "re", "not", "quite", "ready", "for", "NUMBER", "yet", "NUMBER", "for", "pure", "Scala", "it", "s", "pretty", "simple", "NUMBER", "however", "there", "have", "be", "some", "significant", "change", "in", "the", "way", "certain", "types", "be", "represented", "which", "be", "cause", "some", "issue", "for", "Java", "compatibility", "NUMBER", "these", "change", "were", "introduce", "in", "NUMBER", "as", "well", "so", "even", "to", "go", "that", "far", "we", "ll", "have", "to", "tackle", "them", "NUMBER", "i", "have", "an", "internal", "branch", "that", "do", "compile", "util", "finagle", "we", "build", "all", "of", "these", "as", "part", "of", "one", "source", "tree", "so", "change", "like", "this", "be", "easier", "to", "make", "but", "i", "can", "t", "promise", "anything", "before", "a", "few", "weeks", "hence", "NUMBER", "We", "have", "be", "publishing", "NUMBER", "release", "for", "a", "while", "now", "NUMBER", "The", "maven", "artifacts", "be", "suffixed", "with", "_", "NUMBER", "NUMBER", "E", "NUMBER", "g", "NUMBER", "com", "NUMBER", "twitter", "finagle", "core_", "NUMBER", "NUMBER", "I", "m", "work", "on", "get", "those", "branch", "to", "sync", "with", "github", "too", "NUMBER", "Watch", "this", "space", "in", "a", "few", "days", "NUMBER", "we", "re", "publishing", "NUMBER", "artifacts", "now", "and", "have", "be", "for", "a", "while", "NUMBER", "great", "thanks", "great", "thanks", "thanks", "yikes", "i", "guess", "i", "never", "test", "the", "server", "side", "of", "this", "just", "fix", "the", "tiny", "style", "nit", "then", "i", "ll", "merge", "NUMBER", "thanks", "Thanks", "please", "make", "the", "change", "in", "the", "internal", "birdcage", "repo", "NUMBER", "fix", "thanks", "host", "validation", "was", "add", "in", "ebe", "NUMBER", "fcfa", "NUMBER", "c", "NUMBER", "ccb", "NUMBER", "c", "NUMBER", "d", "NUMBER", "b", "NUMBER", "a", "NUMBER", "e", "NUMBER", "b", "NUMBER", "d", "this", "be", "just", "a", "case", "of", "finagle", "be", "too", "verbose", "i", "m", "landing", "a", "fix", "for", "this", "today", "or", "tomorrow", "fix", "in", "NUMBER", "It", "should", "not", "be", "public", "NUMBER", "can", "you", "include", "NUMBER", "the", "builder", "code", "for", "the", "client", "NUMBER", "how", "your", "invoke", "it", "these", "exception", "should", "never", "happen", "if", "you", "just", "use", "NUMBER", "build", "NUMBER", "the", "outlined", "usage", "seems", "correct", "to", "me", "NUMBER", "which", "version", "of", "finagle", "be", "you", "use", "also", "be", "you", "keep", "stats", "through", "NUMBER", "reportTo", "the", "counters", "gauges", "metrics", "would", "be", "handy", "NUMBER", "also", "when", "these", "error", "occur", "be", "there", "any", "other", "concurrent", "exception", "p", "NUMBER", "s", "NUMBER", "there", "should", "be", "no", "difference", "between", "use", "NUMBER", "build", "and", "calling", "NUMBER", "service", "on", "your", "factory", "except", "that", "you", "only", "get", "retries", "with", "NUMBER", "build", "and", "not", "NUMBER", "buildFactory", "NUMBER", "another", "thing", "that", "would", "help", "me", "with", "trying", "to", "reproduce", "this", "be", "approximate", "failure", "rate", "of", "request", "latency", "of", "request", "and", "request", "concurrency", "NUMBER", "re", "the", "WriteExceptions", "these", "be", "annoying", "but", "harmless", "NUMBER", "a", "change", "be", "be", "introduce", "very", "soon", "that", "quenches", "these", "NUMBER", "it", "s", "interesting", "that", "you", "re", "canceling", "the", "Futures", "NUMBER", "proper", "cancellation", "support", "in", "finagle", "was", "introduce", "in", "NUMBER", "i", "can", "also", "think", "of", "at", "least", "one", "condition", "under", "which", "NUMBER", "x", "would", "fail", "on", "cancellation", "i", "also", "rewrote", "Future", "cancellation", "completely", "in", "the", "meantime", "to", "avoid", "exactly", "these", "kinds", "of", "bug", "NUMBER", "could", "you", "upgrade", "to", "NUMBER", "and", "see", "if", "the", "problem", "persists", "great", "NUMBER", "the", "WriteExceptions", "you", "be", "seeing", "be", "likely", "valid", "too", "i", "m", "add", "some", "code", "shortly", "that", "will", "quench", "a", "class", "of", "exception", "that", "get", "logged", "but", "shouldn", "t", "be", "NUMBER", "should", "be", "this", "week", "pull", "thanks", "this", "be", "now", "fix", "NUMBER", "i", "think", "this", "be", "no", "longer", "the", "case", "NUMBER", "i", "was", "able", "to", "build", "the", "current", "master", "just", "fine", "outside", "of", "Twitter", "s", "environment", "NUMBER", "the", "README", "has", "since", "be", "rewritten", "This", "be", "do", "NUMBER", "LGTM", "LGTM", "there", "s", "a", "race", "between", "maybeLifeTimeExpire", "and", "the", "completion", "of", "the", "underlying", "request", "maybeLifetimeExpire", "can", "fire", "and", "between", "maybeExpire", "and", "expired", "true", "the", "request", "can", "complete", "leaving", "didExpire", "uncalled", "NUMBER", "i", "ve", "add", "you", "to", "the", "twitter", "team", "NUMBER", "you", "should", "be", "able", "to", "push", "now", "LGTM", "LGTM"], "text_count": [0, 2880, 709, 342, 184, 42, 246, 2, 20, 367, 342, 875, 380, 234, 206, 224, 0, 0, 0, 0, 765, 196, 97, 81, 151, 96, 0, 0, 0, 0, 1573, 881, 725, 32, 376, 124, 0, 0, 0, 0, 2152, 3, 1017, 890, 429, 0, 0, 0, 0, 0, 585, 268, 285, 150, 176, 83, 153, 0, 0, 0, 1586, 60, 1423, 49, 0, 0, 0, 0, 0, 0, 1857, 498, 1059, 669, 119, 0, 0, 0, 0, 0, 2962, 1350, 384, 1124, 97, 185, 0, 0, 0, 0, 93, 543, 60, 0, 0, 0, 0, 0, 0, 0, 1708, 301, 1108, 314, 0, 0, 0, 0, 0, 0, 4227, 8174, 95, 364, 43, 125, 0, 0, 0, 0, 10621, 32, 7708, 62, 1712, 2706]}, {"repo": "finagle", "type": "nonelite", "title": "", "number of text": 230, "text": "  This file lets you specify which version of sbt to use. sbt will read it, and if necessary, self-bootstrap the correct version of itself before proceeding to build.\n\nYes, the correct version of sbt (0.12.1) is already specified in the \"sbt\" build script, but if users choose not to use this script, and rather use sbt directly (for example - the sbt script doesn't work on Windows), they can get the wrong version of sbt.\n\nSee https://groups.google.com/forum/#!topic/finaglers/TVOmozhPgWk\n\n> Kirill\n> 21. nov.\n> \n> Thank you all! The issue occured because I used the latest version of SBT. When I downgraded to sbt 0.12 then it looks it works.\n   http://netty.io/news/2013/11/08/3-8-0-Final.html\n We are already testing the Netty 3.8 internally, it will be available here soon.\n Thanks.\n\nI intend to do the update and send pull request, but since you are already doing that, it's better you finish it.\n Yes. I'm developing Xitrum (https://github.com/ngocdaothanh/xitrum), which is based on Netty too. I'm seeing warnings like below when updating Xitrum:\n\n```\n[warn] /Users/ngoc/src/xitrum/src/main/scala/xitrum/I18n.scala:18: method getHeader in trait HttpMessage is deprecated: see corresponding Javadoc for more information.\n[warn]     val header = request.getHeader(Names.ACCEPT_LANGUAGE)\n[warn]                          ^\n[warn] /Users/ngoc/src/xitrum/src/main/scala/xitrum/action/Net.scala:54: method getHeader in trait HttpMessage is deprecated: see corresponding Javadoc for more information.\n[warn]       val xForwardedFor = request.getHeader(\"X-Forwarded-For\")\n[warn]                                   ^\n[warn] /Users/ngoc/src/xitrum/src/main/scala/xitrum/action/Net.scala:89: method getHeader in trait HttpMessage is deprecated: see corresponding Javadoc for more information.\n[warn]         val xForwardedProto = request.getHeader(\"X-Forwarded-Proto\")\n```\n\nhttp://netty.io/3.8/api/org/jboss/netty/handler/codec/http/HttpMessage.html#getHeader(java.lang.String)\n Please see this pull request (there's also commit about README):\nhttps://github.com/twitter/finagle/pull/214\n Does Twitter plan to update Netty from 3.x to 4.x soon? About when?\n I thought it's just matter of replacing most header access calls with headers().*(). Let me know if you need any help on this.\n\nSent from a mobile device.\nhttps://twitter.com/trustin\nhttps://twitter.com/trustin_ko\nhttps://twitter.com/netty_project\n\n-----Original Message-----\nFrom: Brian Degenhardt notifications@github.com\nTo: twitter/finagle finagle@noreply.github.com\nSent: \ud1a0, 09 11\uc6d4 2013 7:40 \uc624\uc804\nSubject: Re: [finagle] Update Netty from 3.7.0 to 3.8.0 (#217)\n\nThere's some trickiness with the backport of http headers from netty 4 that collides with our headers map in finagle.  If you want to take a look at it, we'd appreciate it.\n\n---\n\nReply to this email directly or view it on GitHub:\nhttps://github.com/twitter/finagle/issues/217#issuecomment-28104054\n Actually someone is already working on that right now, it should be available very soon.\n  Per discussion on the finaglers mailing list: https://groups.google.com/d/msg/finaglers/HqfNWJF3qZk/mWD-By0MtOgJ\n\nDnsCluster continuously resolves a host name into a set of SocketAddress instances, loosely based on ZK cluster implementation . \n\nLingeringCluster is a generic Cluster filter that propagates Rem events after a predefined delay, this helps dealing with  firewall that does its own DNS resolution. \n I like the idea here, but Clusters are deprecated.  It doesn't make sense to add a new one right now.  Can you get these to work with the Name api?\n I've looked at ZkResolver to see how to implement a similar DnsResolver, but it uses a Group internally and there's a comment about taking that out as well (I understand Groups are deprecated too). I wonder if my best strategy is to wait until the dust settles and then take another look? Or am I barking up the wrong tree?\n The deprecation storm has settled and the Name/Var[Addr] API is the outcome. I think it's safe to assume that it's stable enough to build upon. ZkResolver is still written in terms of Group because no one's had time to migrate StabilizingGroup to the Var[Addr] world.\n\nA DnsResolver would provide a function `def bind(arg: String): Var[Addr]`. See [twitter-server's FlagResolver](https://github.com/twitter/twitter-server/blob/master/src/main/scala/com/twitter/server/resolver/FlagResolver.scala#L16) class for a simple example.\n Thanks for your response, but I am still a bit confused where my DNS stuff would fit in this brave new world... On one hand, it could be used as a poor man's ZK, with multiple machines resolving the same hostname, so that's why I looked at the ZkResolver, but then we can also have a Name implementation, something like this: https://gist.github.com/agleyzer/7363353. What would you guys prefer? \n  Will the dependency on libthrift ever be upgraded from 0.5.\\* to 0.9.*, the latest version?\n It's on our list of things to do, but we haven't committed it to the schedule.\n  Maybe something playful about \"smuggling\" packets?\n What about making the twitter bird a cog, surrounded by three gears that mesh with it?\nTake the twitter logo imposed on a radial plane.  Then re-project it to a flat projection, find the inverse, map back to radial and you get a gear that fits the bird.\n Combining ideas a bit: A bird whose nest is a coffee filter, maybe with some plumbing visible in/around the nest.\n bmdhacks +1\nI like the idea about a mechanized bird.\nhttp://www.thisiscolossal.com/wp-content/uploads/2013/06/swallows-2.jpg\n What about a 2-second Finagle jingle (audio clip) that plays every time you start a Finagle service? (+ of course every time you read the online documentation)\n^^\n How about a bird that wears steampunk goggles? https://www.google.no/search?q=steampunk+goggles&tbm=isch\n http://99designs.com/logo-design/contests/logo-finagle-254061/entries/64 is easier to read. The \"F\" in the other one is not obvious, in my mind.\n  Yes retries are active using the default of 3.\n We always use the ClientBuilder.\n This one is not using TLS.\n Actually yes, we are getting a handful of these (about 0.005% of requests produce this), and this would be one thing our mock server doesn't emulate.  So that would make sense.\n Regarding moving up to 6.5.2, we would love to, but we're using Cassie which depends on 6.3.  Do you know if the versions are binary compatible?\n Ok I will do a little testing tomorrow and see if I can just drop in 6.5.2.\n I haven't tested with 6.5.2 yet, but I updated our mock to emulate the exception that bubbles up to the root monitor.  I was able to send 400k messages without error (other than the exception which occurs 0.1% of the time) using the same configuration that's in production.  I was hoping I could simply handle this edge case as a triage measure, but I'm not convinced it's the root cause.  I am uneasy about upgrading Finagle without extensive testing, because all of our services use Finagle for inter-process communication.\n I noticed this morning that Cassie's newest release uses 6.5.0.  Is it reasonable to assume that the fix in question would be in that version?  I switched our client back to the Apache client as an immediate triage (which seems to be working fine), because I really want to be able to replicate the issue before trying another production fix.  If you have any other theories I can check out, I'm happy to do so; I'd much prefer to use Finagle across the board.\n So what I hear you saying is that an upgrade to 6.5.0 will theoretically fix the issue, but there's no way to know for sure without deploying to production?  If the unhandled exception puts the client in this state in our production system, why would it not do the same in our test system?  \n It's on our short-term backlog.  We had to prioritize getting a major release out the door first, but this is a high priority item for us.  I'll let you know when we have testing results.\n  Haven't been able to test this directly, but I've been running around in circles dealing with an exception message my client was printing with no context or message. As the server has 0 logging, I couldn't access the stack trace. Can something like this be added so any request the generates an unhandled exception gets optionally logged?\n I can probably guess what a logging filter is, but I don't think I should have to be aware that I have to install one, in order to prevent exceptions from being silently swallowed, even if I have a high logging level turned on?\n Are there any examples on how to use LoggingFilter? I see it's abstract, not sure how to plug it in. Got this far:\n\nService filteredService = new LoggingFilter().andThen(myService); but that errors because it's abstract.\n P.s. I can't mix it in because I'm using a scrooge generated service plus it's java.\n So you disagree that I handled exceptions should always be logged at a high\nenough level regardless of attached filters? It kind of violates the\nprinciple of least surprise...\n\nOn 27/06/2013, at 5:10 PM, Moses Nakamura notifications@github.com wrote:\n\nTake a look at Http\nLoggingFilterhttps://github.com/twitter/finagle/blob/master/finagle-http/src/main/scala/com/twitter/finagle/http/filter/LoggingFilter.scala,\nconfusingly also named LoggingFilter (for historical reasons) :)\n\nFilters are designed to be composed in the way that you're describing,\nfilter andThen service. Here are\nsomehttps://github.com/twitter/finagle#Building%20a%20Robust%20Server\ndocs http://twitter.github.io/finagle/guide/ServicesAndFilters.html that\nmight be useful.\n\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/twitter/finagle/pull/182#issuecomment-20155161\n.\n That's some crazy work just to log unhandled exceptions.\n\nOn 27/06/2013, at 5:10 PM, Moses Nakamura notifications@github.com wrote:\n\nTake a look at Http\nLoggingFilterhttps://github.com/twitter/finagle/blob/master/finagle-http/src/main/scala/com/twitter/finagle/http/filter/LoggingFilter.scala,\nconfusingly also named LoggingFilter (for historical reasons) :)\n\nFilters are designed to be composed in the way that you're describing,\nfilter andThen service. Here are\nsomehttps://github.com/twitter/finagle#Building%20a%20Robust%20Server\ndocs http://twitter.github.io/finagle/guide/ServicesAndFilters.html that\nmight be useful.\n\n\u2014\nReply to this email directly or view it on\nGitHubhttps://github.com/twitter/finagle/pull/182#issuecomment-20155161\n.\n Plus, you can't really use trait's from Java:\nhttp://stackoverflow.com/questions/7637752/using-scala-traits-with-implemented-methods-in-java\n I'll look at making our own logging filter that uses slf4j that doesn't extend logging filter. If i were to push it up, where would be appropriate? finagle-contributions module perhaps? separate repo?\n Something like:\n\n```\n@Slf4j\npublic class Slf4jLoggingFilter extends SimpleFilter<byte[], byte[]> {\n\n    @Override\n    public Future<byte[]> apply(byte[] request, Service<byte[], byte[]> service) {\n        Future<byte[]> future = service.apply(request);\n        future.handle(new Function<Throwable, byte[]>() {\n            @Override\n            public byte[] apply(Throwable throwable) {\n                if (throwable != null) {\n                    log.error(throwable.getMessage(), throwable);\n                }\n                return null; // no result\n            }\n        });\n        return future;\n\n    }\n}\n```\n  Are all session variables set via a \"SET key=value\" query? If so, I think it would be better to take a map containing session vars rather than a function.\n Okay, that makes sense. I am currently working on moving the mysql client to use the finagle 6 api and I suspect that it will change the implementation of this. I'll get back to you on this soon.\n What are our next steps with this PR?  Does it need to be restarted from scratch to work with the new api?\n @roanta has a local branch where he improved the client.\nWe'll continue to work on it internally and this PR will become obsolete when we'll sync the github repo.\n sounds good!\n  I agree, we will do the change.\n Should be available in the public repo soon. Thanks!\n  I've pulled this in along with https://github.com/twitter/finagle/pull/154. Should sync into the public repo shortly. Thanks!\n  I pulled this internally, it'll show up on Github soon.\nThank you for doing that and sorry for the delay, the next time I'll be faster.\n This is in our internal repo, it should show up here soon.\n  Sorry for the delay again.\n\nWe would be happy to see your pull request on this.\nNo need to bump the minor, if you leave the old LogFormatter in com.twitter.finagle.http.filter, there shouldn't be any API breakage.\n\nI agree with the rest of your proposition, maybe should you use `logException` instead of `logError` (I'm fine with both).\n Closing, the fix is in our internal repo, it should show up here soon.\n  Hey Moses,\nSorry for the delay, I retrieve this internally.\n\nThanks.\n  Thanks; pulled internally.\n  Hey @mosesn, I just pulled this internally, the change should appear here soon. Thanks!\n  Fixes two issues\n# tomcat-native-1.22 is now on archive.apache.org\n# git apply doesn't like applying patches to a working tree that aren't for that working tree, so use patch instead of git apply to fix up tomcat-native\n  Let's see if Finagle can pass green outside of Twitter?\n\n![challenge](https://f.cloud.github.com/assets/1872593/22893/a6ba5f3a-4a18-11e2-94a5-1587fc8eede6.jpg)\n Funny, I've actually been working on this today too...\n\nhttps://travis-ci.org/caniszczyk/finagle/builds/3746169\n I believe there's an issue of Travis not supporting 64bit VMs so we're dead in the water ATM\n Speaking of the devil! :+1: \n\nStrange... what happens if you make Travis build it with maven instead of sbt? If that's relevant?\n @mariusaeriksen, is there a reason we should even bundle SBT?\n\nI think it's reasonable to expect people to have it installed locally.\n https://travis-ci.org/eirslett/finagle/builds/3761932\n\n[info] Loading project definition from /home/travis/builds/eirslett/finagle/project\n\n19[info] Updating {file:/home/travis/builds/eirslett/finagle/project/}default-d291f6...\n\n20[info] Resolving com.twitter#sbt-package-dist;1.0.5 ...\n\n21[warn]    module not found: com.twitter#sbt-package-dist;1.0.5\n  How does this compare and contrast with Akka?\n  We need the possibility to change the delimiter used when creating names for Ostrich stats\n  Hey Moses, I'll take a look at this today.\n We pulled this internally, should appear here soon. Thanks!\n  implement BITCOUNT, BITOP, PSETEX\nimplement all string commands to StringCommands\n I have pulled this internally, should appear here soon\n  I added a ConsoleStatsReceiver to make logging to the console easier for testing.\n A StatsReceiver is not really a logger, there is the logger() method (See [Client/Server]Builder) if you want to use a logger.\nIf you want to have something more meaningful, you should pass a StatsReceiver and have a \"ConsolePoller\" or something which poll the StatsReceiver and log stats in the console, but there is the Ostrich integration which provide more than that and exposed stats in a Http server.\n\nSo I don't things this class should be part of finagle.\n That's fine.  I did this as a result of a suggestion made on the Google group for Zipkin.  I personally find it useful for debugging, and in fact it revealed a conflicting version issue with SLF4J that would obviously have remained hidden using a logger.  It's also helpful if you want to eliminate the Ostrich dependency and just see the raw output.\n Sure, you can use this for debugging your application, but I don't think it make sense to put this in finagle.\nWe try to reduce complexity in finagle as fas as we can, and we avoid adding new feature unless it make sense for a significant part of the users.\n\nAnyway, thank you for contributing.\n   As there's no open source contributor, I think you should send this review to the internal repo.\n  Hi, when I try to compile the whole project or just finagle-benchmark on it's own, I get the following errors in TaskTrackingtimer.scala because neither of com.twitter.finagle.util.{CountingTimer, TaskTrackingTimer} can be found.\n\n> [error] /Users/matt.brown/oss_projects/finagle/finagle-benchmark/src/main/scala/com/twitter/finagle/benchmark/TaskTrackingTimer.scala:5: CountingTimer is not a member of com.twitter.finagle.util\n> [error] import com.twitter.finagle.util.{CountingTimer, TaskTrackingTimer}\n> [error]        ^\n> [error] /Users/matt.brown/oss_projects/finagle/finagle-benchmark/src/main/scala/com/twitter/finagle/benchmark/TaskTrackingTimer.scala:26: not found: type TaskTrackingTimer\n> [error]     val timer = new TaskTrackingTimer(new FakeTimer)\n> [error]                     ^\n> [error] /Users/matt.brown/oss_projects/finagle/finagle-benchmark/src/main/scala/com/twitter/finagle/benchmark/TaskTrackingTimer.scala:47: not found: type CountingTimer\n> [error]     val timer = new CountingTimer(new FakeTimer)\n> [error]                     ^\n> [error] three errors found\n> [error] {file:/Users/matt.brown/oss_projects/finagle/}finagle-benchmark/compile:compile: Compilation failed\n> [error] Total time: 6 s, completed Aug 9, 2012 3:54:47 PM\n Those classes were removed and that file was deleted but maybe not\npropagated yet. Feel free to ignore it.\nSorry!\n\nOn Thu, Aug 9, 2012 at 12:56 PM, Matt Brown notifications@github.comwrote:\n\n> Hi, when I try to compile the whole project or just finagle-benchmark on\n> it's own, I get the following errors in TaskTrackingtimer.scala because\n> neither of com.twitter.finagle.util.{CountingTimer, TaskTrackingTimer} can\n> be found.\n> \n> [error]\n> /Users/matt.brown/oss_projects/finagle/finagle-benchmark/src/main/scala/com/twitter/finagle/benchmark/TaskTrackingTimer.scala:5:\n> CountingTimer is not a member of com.twitter.finagle.util\n> [error] import com.twitter.finagle.util.{CountingTimer, TaskTrackingTimer}\n> [error] ^\n> [error]\n> /Users/matt.brown/oss_projects/finagle/finagle-benchmark/src/main/scala/com/twitter/finagle/benchmark/TaskTrackingTimer.scala:26:\n> not found: type TaskTrackingTimer\n> [error] val timer = new TaskTrackingTimer(new FakeTimer)\n> [error] ^\n> [error]\n> /Users/matt.brown/oss_projects/finagle/finagle-benchmark/src/main/scala/com/twitter/finagle/benchmark/TaskTrackingTimer.scala:47:\n> not found: type CountingTimer\n> [error] val timer = new CountingTimer(new FakeTimer)\n> [error] ^\n> [error] three errors found\n> [error]\n> {file:/Users/matt.brown/oss_projects/finagle/}finagle-benchmark/compile:compile:\n> Compilation failed\n> [error] Total time: 6 s, completed Aug 9, 2012 3:54:47 PM\n> \n>  \u2014\n> Reply to this email directly or view it on GitHubhttps://github.com/twitter/finagle/issues/101.\n thanks for the fast turnaround! errors all gone now.\n    I would like to see benchmarks against the normal MySQL driver as part of this effort. For performance, memory usage and CPU usage.\n  val sever = ServerBuilder().codec(MessageCodec).bindTo(new InetSocketAddress(port)).name(\"Server\").build(service)\n\nIf Server MessageCodec throw exception , how can i return  the exception to the client?\n  I saw Redis was removed on June 7th. I'm not sure why as the commit message wasn't forthcoming. This adds it back and tidies up some loose whitespace in Build.scala.\n  We made a couple of improvements based on our experience using the protobuf based RPC in production.\n Hey Marius,\n\nI noticed one of your comments in the finagle-protobuf module\n\"finagle-protobuf:\nkill POM; seems\ndefunct.https://github.com/twitter/finagle/commit/a3dd155c53507c5c5fc6651d2a75243994d738bb\".\nWe have been using this protocol in production for months, and it has been\nworking great for us and we did not need to make any updates.\n\nThe one thing I will need to add is a better wiki page.\n\nGeorge\n\nOn Fri, Jul 6, 2012 at 1:47 AM, marius a. eriksen <\nreply@reply.github.com\n\n> wrote:\n> \n> hey George\u2014I'm currently on vacation and will have a look when I get back\n> (in ~1 week)\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/91#issuecomment-6799208\n Hi Marius,\n\nWhat's the status of your efforts around generalizing finagle-thrift ( i.e. finagle-rpc )?\n\nThanks,\nMark\n This is done: [finagle-mux](https://github.com/twitter/finagle/blob/master/finagle-mux/src/main/scala/com/twitter/finagle/mux/package.scala). As an example of adapting Mux to Thrift, see [finagle-thriftmux](https://github.com/twitter/finagle/tree/master/finagle-thriftmux/src/main/scala/com/twitter/finagle)\n @mariusaeriksen we definitely want to keep in step with the framework, let me see how I can slip this into our backlog. Thanks for the heads up.\n  Check to see what version of OpenSSL the 'openssl version' subcommand\nreturns, then trim the output if necessary.\n\nI had MacPorts' OpenSSL in the path (which is version 1.0.1c), and the output from its md5 is different than the one in `/usr/bin/openssl`:\n\n```\n$ /usr/bin/openssl md5 < sbt-launch.jar \n2886cc391e38fa233b3e6c0ec9adfa1e\n\n$ /opt/local/bin/openssl md5 < sbt-launch.jar \n(stdin)= 2886cc391e38fa233b3e6c0ec9adfa1e\n```\n\nThis patch just checks the output of the version subcommand and adjusts as appropriate.\n ah, good point, lemme just adjust that there\n awesome! :)\n\nOn Thu, Jun 14, 2012 at 4:47 PM, marius a. eriksen\nreply@reply.github.com\nwrote:\n\n> I've pulled this internally, should make it out here within the day.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/88#issuecomment-6340034\n  Redis supports 64 bit signed integers (as stated in the docs, e.g. for the [INCRBY command](http://redis.io/commands/incrby)), and so Redis integers should be represented by `Long` rather than `Int`.\n\nHere is an example of a Redis exchange that is currently not possible using the finagle-redis client:\n\n```\nredis 127.0.0.1:6379> SET foo 1\nOK\nredis 127.0.0.1:6379> INCRBY foo 1000000000000000000\n(integer) 1000000000000000001\n```\n\nIn order to support this I've switched from `Int` to `Long` in the following places: \n- INCRBY, DECRBY command arguments\n- Integer replies\n\nUnfortunately this switch from `Int` to `Long` means a breaking change in the API, but it should be very easy for users to fix their client code. \n Thanks!\n I just noticed that this was not actually merged in. \n\nWas this a deliberate decision (should I fix something?), or did it just slip through the cracks?\n OK, thanks for the update.\n\nDon't worry, no rush :)\n  libraryDependencies += \"com.twitter\" % \"finagle\" % \"3.0.0\"\n\nwhen execute build \nval client = ClientBuilder().codec(Http.get).hosts(address).hostConnectionLimit(1).build();\n\nException in thread \"main\" java.lang.NoSuchMethodError: scala.collection.mutable.Queue$.apply(Lscala/collection/Seq;)Lscala/collection/mutable/Queue;\n    at com.twitter.finagle.builder.Cluster$$anon$1$$anonfun$1$$anonfun$2.apply(Cluster.scala:32)\n    at com.twitter.finagle.builder.Cluster$$anon$1$$anonfun$1$$anonfun$2.apply(Cluster.scala:32)\n    at scala.collection.mutable.MapLike$class.getOrElseUpdate(MapLike.scala:176)\n    at scala.collection.mutable.HashMap.getOrElseUpdate(HashMap.scala:45)\n    at com.twitter.finagle.builder.Cluster$$anon$1$$anonfun$1.apply(Cluster.scala:32)\n    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)\n    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:233)\n    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)\n    at scala.collection.immutable.List.foreach(List.scala:76)\n    at scala.collection.TraversableLike$class.map(TraversableLike.scala:233)\n    at scala.collection.immutable.List.map(List.scala:76)\n    at com.twitter.finagle.builder.Cluster$$anon$1.snap(Cluster.scala:31)\n    at com.twitter.finagle.loadbalancer.HeapBalancer.<init>(HeapBalancer.scala:50)\n    at com.twitter.finagle.builder.ClientBuilder$$anon$1.<init>(ClientBuilder.scala:749)\n    at com.twitter.finagle.builder.ClientBuilder.internalBuildFactory(ClientBuilder.scala:749)\n    at com.twitter.finagle.builder.ClientBuilder.build(ClientBuilder.scala:785)\n    at com.qileke.finagle.basic.SimpleHttpClient$.main(SimpleHttpClient.scala:25)\n    at com.qileke.finagle.basic.SimpleHttpClient.main(SimpleHttpClient.scala)\n Which version of scala is you project using?\n 2.9.1\n test environments \uff1a windows 7 (64),java version \"1.7.0_03\" (64) , scala version 2.9.[1|2]\n Ubuntu 11.10  (64),java version \"1.7.0_03\" (64) , scala version 2.9.[1|2]\n thank you\n  Fix for issue #84\n That is a much simpler solution to the main problem. I've updated the pull request to use it.\n See above commit for deterministic test. Is this a reasonable approach?\n I don't know what you mean by JUnit style unittests. Can you point me to an example in Finagle I should emulate? Should I just switch superclass to `org.specs.SpecificationWithJUnit`?\n\nAlso, should I remove the additional case in EndToEndSpec?\n I've made those changes, and merged in master. I'm assuming it's ready for merge?\n\nI've also rebased these changes to https://github.com/stephenjudkins/finagle/commit/d62455e6f84d40ccd6e0dac3b21c2876b802997e. Pick your poison on which one you'd like.\n Yes, it looks like I forgot to add it. Sorry about that one. I was switching between SBT 0.7 and 0.11 branches so it got lost in the confusion.\n  In some cases, `HttpDechunker` sends an EOF before it has finished writing the all chunks to `StreamResponse#messages`. This is because in HttpDechunker.scala#L39, when `chunk.readable` is false, the `sendOf` offer is set to Offer.const(()). In L43, this offer is synchronized on in order to send EOF message only after it's finished. However, when `chunk.readable` is false, an EOF is sent immediately irrespective of any other chunks that haven't been read.\n  I did as the following commands, but got the compile errors.\n==>git clone https://github.com/twitter/finagle.git\n==>cd finagle &&  ./sbt update compile\n\n[error] /Users/zhang/Projects/scala/finagle/finagle-core/src/main/scala/com/twitter/finagle/dispatch/ClientDispatcher.scala:3: AsyncQueue is not a member of com.twitter.concurrent\n[error] import com.twitter.concurrent.AsyncQueue\n[error]        ^\n[error] /Users/zhang/Projects/scala/finagle/finagle-core/src/main/scala/com/twitter/finagle/dispatch/ClientDispatcher.scala:16: not found: type AsyncQueue\n[error]   private[this] val dispatchq = new AsyncQueue[(Req, Promise[Rep])]\n[error]                                     ^\n[error] /Users/zhang/Projects/scala/finagle/finagle-core/src/main/scala/com/twitter/finagle/transport/ChannelTransport.scala:3: AsyncQueue is not a member of com.twitter.concurrent\n[error] import com.twitter.concurrent.AsyncQueue\n[error]        ^\n[error] /Users/zhang/Projects/scala/finagle/finagle-core/src/main/scala/com/twitter/finagle/transport/ChannelTransport.scala:21: not found: type AsyncQueue\n[error]   private[this] val readq = new AsyncQueue[Out]\n[error]                                 ^\n\nI find the AsyncQueue class at\nhttps://github.com/twitter/util/blob/master/util-core/src/main/scala/com/twitter/concurrent/AsyncQueue.scala\n\nWhat should I do to solve the problem or I downed the wrong branch?\n I am also running into this compile error. Is there a specific tag or branch to checkout to build a working release?\n I am also facing the same issue. Any idea when this will be fixed. Thanks for looking into this.\n    Thus, if you simply proxy StreamResponses from a server to a service the client pool will become exhausted. This is different from the semantics of every other type of Request/Response pair.\n\nHere's an example:\n\n```\nimport com.twitter.finagle.stream.{Stream, StreamResponse}\nimport java.net.{URL, InetSocketAddress}\nimport com.twitter.util.Future\nimport com.twitter.conversions.time._\nimport com.twitter.finagle.{Service, ServiceFactory}\nimport com.twitter.finagle.builder.{ServerBuilder, Server, ClientBuilder}\nimport org.jboss.netty.handler.codec.http._\n\nobject Proxy {\n\n  def main(args: Array[String]) {\n    class Respond extends Service[HttpRequest, StreamResponse] {\n      def apply(request: HttpRequest) = download(request.getUri)\n    }\n\n    val service = new Respond\n\n    ServerBuilder()\n      .codec(Stream().server)\n      .bindTo(new InetSocketAddress(8080))\n      .name(\"httpserver\")\n      .build(service)\n  }\n\n  val host = \"www.fbi.gov\"\n  val port = 80\n\n  val clientFactory: ServiceFactory[HttpRequest, StreamResponse] = ClientBuilder()\n    .codec(Stream().client)\n    .hosts(new InetSocketAddress(host, port))\n    .hostConnectionLimit(1)\n    .tcpConnectTimeout(5.seconds)\n    .buildFactory()\n\n  def client = clientFactory()\n\n  def download(path: String):Future[StreamResponse] =  {\n    println(path)\n    val request = new DefaultHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.GET, path)\n    request.setHeader(\"Host\", host)\n    clientFactory() flatMap { _(request) }\n  }\n}\n```\n\nRun `ab -n 10 -c 1 http://localhost:8080/spinner.gif` to see it break.\n (Please let me know if there is a better venue to discuss this)\nIf that's the case, perhaps you can offer a suggestion on how to better solve our problem:\n\nWe're using Finagle as a proxy server between slow clients and a relatively fast S3 backend. Using the non-streaming HTTP client can use an unreasonable amount of memory waiting for clients. As far as I can tell from examples, most other codecs simply let you compose a `Server` and a `Service` in order to have a transparent proxy. A `Service` closes the socket immediately after the response is formed, thus stopping the delivery of any further chunks. Thus, we use `ServiceFactory` since we need to keep the stream open until `release` is called. However, the factory runs out of slots since when the Server calls `release` on the StreamResponse, the client doesn't get released. Here's our stopgap solution:\n\n```\n\nobject StreamClosingFilter extends Filter[HttpRequest, StreamResponse, HttpRequest, StreamResponse] {\n  def apply(request: HttpRequest, service: Service[HttpRequest, StreamResponse]) = {\n    service(request) map { response =>\n      new StreamResponse {\n        def httpResponse = response.httpResponse\n\n        def messages = response.messages\n\n        def error = response.error\n\n        def release() {\n          service.release()\n          response.release()\n        }\n      }\n    }\n  }\n}\n```\n\nThis fixes our issue, but seems kludgy and is tied to the `StreamResponse` interface. What other solutions would you propose?\n Thanks for the explanation, and for pushing the fix.\n  ...with synchronized #toList.\n\nRelevant tests pass. Unsure of performance implications, but do we care how fast this will be? Also I have no idea how to test this.\n  Added auth method to finagle redis library.\nAuthentication is required to use Redis to Go on heroku.\n  This error occurred in Finagle 3.0.0 in Scala 2.9.1.\n\nThere appears to be a race condition. I've only seen it once, but here's the relevant portion of the stack trace:\n\n```\nNullPointerException: null (ServerBuilder.scala:664)\ncom.twitter.finagle.builder.MkServer$$anon$5$$anonfun$close$1.apply(ServerBuilder.scala:665)\ncom.twitter.finagle.builder.MkServer$$anon$5$$anonfun$close$1.apply(ServerBuilder.scala:664)\nscala.collection.IndexedSeqOptimized$class.foreach(IndexedSeqOptimized.scala:34)\nscala.collection.mutable.ArrayOps.foreach(ArrayOps.scala:38)\ncom.twitter.finagle.builder.MkServer$$anon$5.close(ServerBuilder.scala:664)\n```\n It appears that `activeHandlers.toArray` returns an Array that contains a \"null\". I assume there is a race between `activeHandlers -= channelHandler` in L629 and `toArray`.\n\nIt appears that neither `toArray` nor `copyToArray` are synchronized in SynchronizedSet. Replacing this with either `toList` (which is synchronized) or manually synchronizing on `activeHandlers` should address this issue.\n I have a fix above. Feel totally free to use it or throw it out if it's not appropriate.\n\nI'm curious how one would go about testing this.\n  Several examples use e.g. `responseFuture.within(1.second)`. This method doesn't exist in later versions of Finagle (> 2.0.1) as far as I can tell. The only thing analogous I can find it `Future.within(Duration, Timer)`.\n  This code no longer completes: https://gist.github.com/1827065\n\nIt's like the Future never fires. I have it set up in a test project where I can switch between 2.0.1 and 3.0.0 and it fails.\n Thanks for looking into it. Like I said, I can reproduce it in my project as soon as I switch my dependencies in build.sbt from 2.0.1 to 3.0.0 and see it work when I move back to 2.0.1. Same code, and in my case it hangs forever. ;_;\n What confuses me about it being intermittent is that the manual HTTP request works every time.\n  Expose max initial line length and header size so they are configurable.\n  Currently when tls(hostname) is called the SSLContext for the default jsse \ntruststore (cacerts) is created on a per request basis.  This seems like overhead,\nas a new SSLContext means that cacerts is reread; and a SecureRandom created\nfor each ssl (https) call.\n\nTherefore, I've made a change; so that only the first call to JSSE.client()\ncreates the SSLContext, all subsequent calls just create the SSLEngine from\nthat precreated default SSLContext.\n Hi there,\n\nSorry about the formatting, does 2d51c0bc look any better?\n\nCheers\n/dom\n  A coworker pointed out that I had misread the sorted sets spec, and implemented them using float's instead of double's. This commit refactors the sorted set commands to use a double instead of a float.\n\nAdditionally there was a warning about a case class constructor without a parameter list (FlushDB) which was fixed.\n  I've created an empty SBT project that lists finagle as a library dependency, pulling from maven.twttr.com; `sbt compile` fails with the following abbreviated output:\n\n```\n[info] Loading project definition from /Users/ben/scala/test/project\n[warn]  ::::::::::::::::::::::::::::::::::::::::::::::\n[warn]  ::          UNRESOLVED DEPENDENCIES         ::\n[warn]  ::::::::::::::::::::::::::::::::::::::::::::::\n[warn]  :: com.codahale#jerkson_2.8.1;0.1.4: not found\n[warn]  ::::::::::::::::::::::::::::::::::::::::::::::\n[error] {file:/Users/ben/scala/test/}default-c49c40/*:update: sbt.ResolveException: unresolved dependency: com.codahale#jerkson_2.8.1;0.1.4: not found\n[error] Total time: 4 s, completed Mar 6, 2012 12:26:08 AM\n```\n\nIt seems that finagle-exception hardcodes a dependency on jerkson_2.8.1 in the 2.9.1 repo, which cannot be resolved.\n\nThough it doesn't appear in the above output, this also applies to thrift 0.5.0; I've worked around that with some hackery in libraryDependencies.\n Dear Benjamin,\n\ncould you share your hackery? ;) I'd really need it. Thanks!\n If you'd like to to get a Scala 2.9.1, SBT 0.11.2, Thrift 0.8.0, Finagle 3.0.0 stack, a working example is in the README here:\n\nhttps://github.com/twitter/sbt-scrooge/tree/sbt11\n  ```\n[info] Resolving thrift#libthrift;0.5.0 ...\n[warn]  module not found: thrift#libthrift;0.5.0\n[warn] ==== local: tried\n[warn]   /Users/devin/.ivy2/local/thrift/libthrift/0.5.0/ivys/ivy.xml\n[warn] ==== twitter-repo: tried\n[warn]   http://maven.twttr.com/thrift/libthrift/0.5.0/libthrift-0.5.0.pom\n[warn] ==== public: tried\n[warn]   http://repo1.maven.org/maven2/thrift/libthrift/0.5.0/libthrift-0.5.0.pom\n[warn] ==== Scala-Tools Maven2 Repository: tried\n[warn]   http://scala-tools.org/repo-releases/thrift/libthrift/0.5.0/libthrift-0.5.0.pom\n[warn]  ::::::::::::::::::::::::::::::::::::::::::::::\n[warn]  ::          UNRESOLVED DEPENDENCIES         ::\n[warn]  ::::::::::::::::::::::::::::::::::::::::::::::\n[warn]  :: thrift#libthrift;0.5.0: not found\n[warn]  ::::::::::::::::::::::::::::::::::::::::::::::\n```\n  Added to the ClientBuilder the ability to specify the Engine to use,\nso a client can create an SSLContext with client certs if they wish:\ni.e.\n\n<code>\nval ctx = SSLContext.getInstance(\"TLS\")\n...\nctx.init(keyManagerFactory.getKeyManagers(), trustManagers, sr)\n...\n...\ncb.tls(new Engine(ctx.createSSLEngine()))\n//\n// or\n//\ncb.tls(new Engine(ctx.createSSLEngine()), Option(\"www.xxx.com\"))\n</code>\n > > SSL contexts shouldn't be reused across connections, see ed7efcd.\n> > So it's probably more appropriate to pass in factories directly.\n\nAh yes.  Isn't it the SSLEngine that can't be reused, rather than the SSLContext itself though?  \n\nI've updated the request with a04aecb ; so that the SSLEngine is created each time; from the SSLContext passed to the ClientBuilder.\n  We wrote a Protobuf Codec what allows Finagle to be used for developing Protobuf based RPC services.\n These are good thoughts, thank you. We will continue to contribute our\nimprovements and welcome suggestions.\n\nOn Wed, Feb 29, 2012 at 10:53 AM, marius a. eriksen\nreply@reply.github.com\nwrote:\n\n> Is this particular protocol `(code32, length32, message)` used by somebody else, or is it your own? If not, it \u00a0would be nice to build more room for extensibility (eg. to ship trace ids) from the start. In thrift we do an upgrade dance, but that's only to maintain backwards compatibility.\n> \n> Also, it would be nice to build a protobuf compiler plugin to generate `Future`-full bindings as well.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/68#issuecomment-4242911\n Marius,\n\nWhen Google open sourced Protobuf they did not also open source the\nRPC protocol they use internally, they apparently considered it to be\na competitive advantage. There are quite a few attempts to do RPC with\nprotobuf (http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)\nbut none of them has the elegance of the Finagle framework, so we\nstarted creating a protocol for it.\n\nI am definitely open to suggestions others learned from Thrift that we\ncan apply to create a reasonably good Protobuf based protocol.\n\nOf course I would like to move relatively fast to add the minimum to\nmake it extensible so that others can start using it and contribute.\n\nPlease let me know what you think the next steps should be.\n\nThanks,\nGeorge\n\nOn Fri, Mar 2, 2012 at 2:11 PM, marius a. eriksen\nreply@reply.github.com\nwrote:\n\n> I want to merge this, but we need to put some more work in. My biggest concern so far is the actual protocol: does it comply to some other widely-used one, or is it a custom one of yours? If it's a custom one, I think we should figure out a way to make it more extensible for features like tracing.\n> \n> I'm willing to merge this in so that we can work on it, but without publishing it yet. How does that sound?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/68#issuecomment-4294163\n That's great Markus, I just joined the finaglers google group. I look\nforward to your suggestions. Have a good weekend.\n\nGeorge\n\nOn Fri, Mar 2, 2012 at 3:06 PM, marius a. eriksen\nreply@reply.github.com\nwrote:\n\n> It's merged! I'll write my thoughts about a protocol in an email. Are you subscribed to the finaglers group?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/68#issuecomment-4294975\n Hi Marius,\n\nI sent a pull request for updates on finagle-protobuf. Also I moved the\nrepo to the Tendril's company account.\n\nWe're pretty happy with Finagle thus far, and we'll add support for tracing\nrather soon. We also have a implementation for Serversets based on Netflix\nx-discovery and ZooKeeper that has no dependencies on Thrift but I'm not\nsure if that fits inside Finagle.\n\nThanks,\nGeorge\n\nOn Fri, Mar 2, 2012 at 3:06 PM, marius a. eriksen <\nreply@reply.github.com\n\n> wrote:\n> \n> It's merged! I'll write my thoughts about a protocol in an email. Are you\n> subscribed to the finaglers group?\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/68#issuecomment-4294975\n  Connection to http://artifactory.local.twitter.com refused: Connection timed out ...\nwill publish to http://maven.twttr.com/?\nI can see Finagle-XXX.pom point http://artifactory.local.twitter.com\nbut,jars file in http://maven.twttr.com/\nplease update\n  sbt update\nsbt compile\nall can pass.\nbut sbt test have this error\n[error] Error running com.twitter.finagle.http.filter.LoggingFilterSpec: Test FAILED\n why don't fiex this issues?\nonly one test error,can't package finagle-http\n  First,I install sbt from brew.\nbuild fail\u3002\u3002\u3002\nlike this friend issues #61\n\nI install sbt 0.7.5 and 0.7.7...\nbuild fail\u3002\u3002\u3002\n\n  1 #Project properties\n  2 #Mon Feb 13 16:19:06 PST 2012\n  3 project.organization=com.twitter\n  4 project.name=finagle\n  5 sbt.version=0.7.7\n  6 project.version=1.11.1-SNAPSHOT\n  7 build.scala.versions=2.9.1\n  8 project.initialize=false\n\nmessage\uff1a\norg.scala-tools.testing#specs_2.9.1;1.6.8: not found\n\ni must install scale later 2.9.1?\n For the code you have above, you must change your Scala version to 2.7.\n\nIf you'd like to to get a Scala 2.9.1, SBT 0.11.2, Thrift 0.8.0, Finagle 3.0.0 stack, a working example is in the README here:\n\nhttps://github.com/twitter/sbt-scrooge/tree/sbt11\n  Fixed a typo in the \"Codec Objects\" section: HTTP chunked streaming (ala Twitter Streaming) <strong>prptocols</strong>\n  There are my test codes.  A simple proxy example: \n\nEchoServer: \n\nobject EchoServer {\n\n  def main(args: Array[String]) {\n\n```\nval service = new Service[String, String] {\n  def apply(request: String) = {\n    println(\"I'm server,I received request message:\" + request)\n    Future.value(\"I'm server. Where are you from?\")\n  }\n}\n\nval server: Server = ServerBuilder()\n  .codec(StringCodec)\n  .bindTo(new InetSocketAddress(8082))\n  .name(\"Server\")\n  .build(service)\n```\n\n  }\n}\n\nEchoRouter: \n\nobject EchoRouter {\n\n  def main(args: Array[String]) {\n\n```\nval client: Service[String, String] = ClientBuilder()\n  .codec(StringCodec)\n  .hosts(new InetSocketAddress(8082))\n  .hostConnectionLimit(1)\n  .requestTimeout(Duration(1, TimeUnit.SECONDS))\n  .retries(10)\n  .build()\n\nval proxyService = new Service[String, String] {\n  def apply(request: String) = {\n    println(\"I'm router, I received request message:\" + request)\n    client(request).onSuccess {\n      result => println(\"Router received result asynchronously: \" + result)\n    } onFailure {\n      error => error.printStackTrace()\n    }\n  }\n}\n\nval server: Server = ServerBuilder()\n  .codec(StringCodec)\n  .bindTo(new InetSocketAddress(8081))\n  .name(\"Router\")\n  .build(proxyService)\n```\n\n  }\n\n}\n\nEchoClient: \n\nobject EchoClient {\n\n  def main(args: Array[String]) {\n\n```\nval client: Service[String, String] = ClientBuilder()\n  .codec(StringCodec)\n  .hosts(new InetSocketAddress(8081))\n  .hostConnectionLimit(1)\n  .requestTimeout(Duration(1, TimeUnit.SECONDS))\n  .retries(10)\n  .build()\n\nclient(\"Hi,I'm client.\\n\").onSuccess {\n  result => println(\"Client received result asynchronously: \" + result)\n} onFailure {\n  error => error.printStackTrace()\n} ensure {\n  client.release()\n}\n```\n\n  }\n}\n\nThe problem is the  EchoRouter can receive the message, But the EchoServer can't receive the message . \n\nIs there any mistake i made? Can someone help me? \n\nHere are version information. \nscala version : 2.9.1 \nfinagle-core_2.9.1 version:1.11.1 \n Thank you, marlus. \n  i create a project following the link: http://www.fisharefriends.us/blog/2011-09-21-scala-plus-sbt-plus-finagle-plus-scalatest-plus-spring/, but i modify the version of sbt and scala, the version of sbt is 0.11.2 and the version of scala is 2.9.1.\n\nI run the compile command in sbt, it works fine, and i run the 'run' EchoServer command in the sbt, it works fine too.\n\nbut i run the EchoClient, it throws an exception: java.lang.NoSuchMethodError: scala.runtime.RichLong.compare(J)I\n\njava.lang.NoSuchMethodError: scala.runtime.RichLong.compare(J)I\n        at com.twitter.util.Duration.compare(Time.scala:350)\n        at com.twitter.util.Duration.compare(Time.scala:317)\n        at scala.math.Ordered$class.$greater(Ordered.scala:46)\n        at com.twitter.util.Duration.$greater(Time.scala:317)\n        at com.twitter.finagle.builder.ClientBuilder.com$twitter$finagle$builder$ClientBuilder$$buildPool(ClientBuilder\nscala:619)\n        at com.twitter.finagle.builder.ClientBuilder$$anonfun$12.apply(ClientBuilder.scala:703)\n        at com.twitter.finagle.builder.ClientBuilder$$anonfun$12.apply(ClientBuilder.scala:681)\n        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194)\n        at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194)\n        at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)\n        at scala.collection.immutable.List.foreach(List.scala:45)\n        at scala.collection.TraversableLike$class.map(TraversableLike.scala:194)\n        at scala.collection.immutable.List.map(List.scala:45)\n        at com.twitter.finagle.builder.SocketAddressCluster.mkFactories(Cluster.scala:49)\n        at com.twitter.finagle.builder.ClientBuilder.internalBuildFactory(ClientBuilder.scala:681)\n        at com.twitter.finagle.builder.ClientBuilder.build(ClientBuilder.scala:789)\n        at EchoClient$.main(EchoExample.scala:25)\n        at EchoClient.main(EchoExample.scala)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n        at java.lang.reflect.Method.invoke(Unknown Source)\n @mariusaeriksen - left you an email at your @monkey.org email... could you please reply to me there?\n  The latest checkout of Finagle that I have (3892b939aed3fa44de446700ef2c17be0f467656) does not build on MacOS X + Homebrew installed SBT. I could reproduce this on 2 different machines.\n\nA dependency cannot be found, here is the full output:\n\n```\n$ sbt update test\nGetting net.java.dev.jna jna 3.2.3 ...\n:: retrieving :: org.scala-tools.sbt#boot-app\n    confs: [default]\n    1 artifacts copied, 0 already retrieved (838kB/14ms)\nGetting Scala 2.9.1 (for sbt)...\ndownloading http://repo1.maven.org/maven2/org/scala-lang/scala-compiler/2.9.1/scala-compiler-2.9.1.jar ...\n    [SUCCESSFUL ] org.scala-lang#scala-compiler;2.9.1!scala-compiler.jar (41421ms)\ndownloading http://repo1.maven.org/maven2/org/scala-lang/scala-library/2.9.1/scala-library-2.9.1.jar ...\n    [SUCCESSFUL ] org.scala-lang#scala-library;2.9.1!scala-library.jar (32902ms)\ndownloading http://repo1.maven.org/maven2/org/scala-lang/jline/2.9.1/jline-2.9.1.jar ...\n    [SUCCESSFUL ] org.scala-lang#jline;2.9.1!jline.jar (1559ms)\ndownloading http://repo1.maven.org/maven2/org/fusesource/jansi/jansi/1.4/jansi-1.4.jar ...\n    [SUCCESSFUL ] org.fusesource.jansi#jansi;1.4!jansi.jar (1663ms)\n:: retrieving :: org.scala-tools.sbt#boot-scala\n    confs: [default]\n    4 artifacts copied, 0 already retrieved (19939kB/54ms)\nGetting org.scala-tools.sbt sbt_2.9.1 0.7.5 ...\n\n:: problems summary ::\n:::: WARNINGS\n        module not found: org.scala-tools.sbt#sbt_2.9.1;0.7.5\n\n    ==== local: tried\n\n      /Users/jponge/.ivy2/local/org.scala-tools.sbt/sbt_2.9.1/0.7.5/ivys/ivy.xml\n\n    ==== typesafe-ivy-releases: tried\n\n      http://repo.typesafe.com/typesafe/ivy-releases/org.scala-tools.sbt/sbt_2.9.1/0.7.5/ivys/ivy.xml\n\n    ==== Maven Central: tried\n\n      http://repo1.maven.org/maven2/org/scala-tools/sbt/sbt_2.9.1/0.7.5/sbt_2.9.1-0.7.5.pom\n\n    ==== Scala-Tools Maven2 Repository: tried\n\n      http://scala-tools.org/repo-releases/org/scala-tools/sbt/sbt_2.9.1/0.7.5/sbt_2.9.1-0.7.5.pom\n\n    ==== Scala-Tools Maven2 Snapshots Repository: tried\n\n      http://scala-tools.org/repo-snapshots/org/scala-tools/sbt/sbt_2.9.1/0.7.5/sbt_2.9.1-0.7.5.pom\n\n        ::::::::::::::::::::::::::::::::::::::::::::::\n\n        ::          UNRESOLVED DEPENDENCIES         ::\n\n        ::::::::::::::::::::::::::::::::::::::::::::::\n\n        :: org.scala-tools.sbt#sbt_2.9.1;0.7.5: not found\n\n        ::::::::::::::::::::::::::::::::::::::::::::::\n\n\n\n:: USE VERBOSE OR DEBUG MESSAGE LEVEL FOR MORE DETAILS\nunresolved dependency: org.scala-tools.sbt#sbt_2.9.1;0.7.5: not found\nError during sbt execution: Error retrieving required libraries\n  (see /Users/jponge/.sbt/boot/update.log for complete log)\nError: Could not retrieve sbt 0.7.5\n```\n if you are using SBT 0.11.0 go to project/build.properties and change sbt.version=0.11.0\n It doesn't work with either 0.11.0 or 0.11.2 (the version that I have through Homebrew).\n\nIt looks like the project definition cannot be compiled, both update / reload fail:\n\n```\n[info] Compiling 1 Scala source to /Users/jponge/Code/finagle/project/plugins/target/scala-2.9.1/sbt-0.11.0/classes...\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:3: not found: type PluginDefinition\n[error] class Plugins(info: ProjectInfo) extends PluginDefinition(info) {\n[error]                                          ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:3: not found: type ProjectInfo\n[error] class Plugins(info: ProjectInfo) extends PluginDefinition(info) {\n[error]                     ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:3: too many arguments for constructor Object: ()java.lang.Object\n[error] class Plugins(info: ProjectInfo) extends PluginDefinition(info) {\n[error]              ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:4: jcl is not a member of scala.collection\n[error]   import scala.collection.jcl\n[error]          ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:5: not found: value jcl\n[error]   val environment = jcl.Map(System.getenv())\n[error]                     ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:15: value repositories is not a member of AnyRef with ScalaObject\n[error]     super.repositories ++ Seq(\"twitter.com\" at \"http://maven.twttr.com/\")\n[error]           ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:19: sbt.FileRepository does not take parameters\n[error]       Seq(Resolver.defaultLocal(None)) ++ repositories\n[error]                                ^\n[error] /Users/jponge/Code/finagle/project/plugins/Plugins.scala:21: value ivyRepositories is not a member of AnyRef with ScalaObject\n[error]       super.ivyRepositories\n[error]             ^\n[error] 8 errors found\n[error] {file:/Users/jponge/Code/finagle/project/plugins/}default-0bfec2/compile:compile: Compilation failed\n```\n Once you do that, the projects/plugings/Plugins.scala file becomes obsolete as the new SBT doesn't use these classes anymore.\n\nFrom there on... even afer ones adds the correct resolvers and dependencies in the build.sbt file - I am lost as to how to get it to compile against SBT 0.11.0 and Scala 2.8.1\n\nFirst compilation error (I am now referring to searchbird, but finagle-example exhibits similar problems):\n\nClient.scala:4: value thrift is not a member of package com.twitter.finagle\n[error] import com.twitter.finagle.thrift.ThriftClientFramedCodec\n\nAnd so on....\n I would just love to play with Finagle, not fight with SBT, the so-called \"Simple\" Build Tool :-)\n\nIsn't there a way out bar downgrading SBT?\n I'm very new to scala myself and it's been hell with SBT and with Twitter showing a very promising framework but it not compiling with the latest and greatest in the scala world.  I wish one of them authors would chime in here...\n\nThere is a way to downgrade and compile perfectly.  Just download sbt 0.7.4:\nhttp://code.google.com/p/simple-build-tool/downloads/detail?name=sbt-launch-0.7.4.jar&can=2&q=\n\nreset any changes you've made to this finagle cloning of yours and make a quick script to launch sbt\n\n#!/bin/bash\n\njava -Xmx512M -jar `dirname $0`/sbt-launch-0.7.4.jar \"$@\"\n Is there any chance those scripts could be integrated into scala-bootstrapper gem?  \n\nIt would be nice to have the ability to use that boilerplate Service/Client structure and be able to compile our code on SBT 0.11.0 and Scala 2.8.1...\n\nThanks so much!\n It works with sbt-0.7.4 downloaded and launched locally.\n\n@mariusaeriksen => you mentioned that you publish binaries, but I couldn't find any mention of those... or are they available on Maven Central?\n @mariusaeriksen you say will publish binary artifacts .where are this?\nI want use finagle to my project.i have same program,and build one day don't success...:(\nthank you very much.\n @SamPeng87 @mariusaeriksen said that they push to http://maven.twttr.com/ and I see that the GItHub page has been updated to reflect this.\n @jponge thanks your help...but,have one question..I don't know use maven..:(\n For anyone else also looking for the binaries, they are in com/twitter, not com.twitter:\n\nhttp://maven.twttr.com/com/twitter/\n\nAs a side note, I don't see any reference on the GitHub homepage to binaries, binary, library or maven.twttr.com.\n If you'd like to to get a Scala 2.9.1, SBT 0.11.2, Thrift 0.8.0, Finagle 3.0.0 stack, a working example is in the README here:\n\nhttps://github.com/twitter/sbt-scrooge/tree/sbt11\n There is a difference in using sbt and ./sbt \nGo back to school,Vadi!\n  Just annoying when generating the documentation.\n  finagle-thrift has dependends on:\n\"thrift\"    % \"libthrift\" % \"0.5.0\"\nbut sbt 11.0.2 not resolve it, becouse where is no pom.xml file in \nhttp://maven.twttr.com/thrift/libthrift/0.5.0/ directory\n quick workaround when you are using Twitter's finagle-thrift_2.9.1: put this into your build.sbt:\n\n```\n\"thrift\" % \"libthrift\" % \"0.5.0\" from \"http://maven.twttr.com/org/apache/thrift/libthrift/0.5.0/libthrift-0.5.0.jar\",\n```\n  When using the following ClientBuilder:\n\n```\n    val clientBuilder = ClientBuilder()\n      .codec(Http())\n      .cluster(new AWSElbCluster(config.url))\n      .connectionTimeout(20.seconds)\n      .hostConnectionLimit(config.maxConnections)\n      .hostConnectionMaxIdleTime(30.seconds)\n      .hostConnectionMaxLifeTime(2.minute)\n      .retries(1)\n      .reportTo(new OstrichStatsReceiver)\n      .name(config.url.toString)\n```\n\nwe get benign FATAL errors in the logs (see https://gist.github.com/1557984). I found that this was the result of an interaction between the ExpiringService wrapper and the WatermarkPool. The time-based timeout in ExpiringService would cause 'release' to be called on the underlying service, then later on the WatermarkPool would attempt to use the connection, find out that it is unusable, and then also attempt to call 'release' on it.\n\nThis commit fixes this problem in ExpiringService by ensuring \"release\" is only called once on the underlying service.\n Is this fix already in the last release?\n  avoids the use of Promise and uses `getContentAsync` method to obtain the content from an asynchronous request, `transformedBy` method and a `FutureTransformer` object. \n I can't seem to find getContentAsync method in Java.\n  Added Bootstrap folder to Finagle's gh-pages; required for index.html\n  Kestrel depends on the memcache decoder, which I broke. Responding with 'Error' seems appropriate since this feature isn't (afaik) supported by Kestrel.\n Hah, you were too fast Marius. Closing.\n  This commit adds support for response encoding of errors along with appropriate unit tests.\n  Previously, an instance of SSLEngine was created in the ClientBuilder and then used for all subsequent service calls. According to the documentation for SSLEngine (see http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLEngine.html; \"Once an engine is closed, it is not reusable: a new SSLEngine must be created\") it may not be reused.\n\nSee here for a test case (we should come up with a test case that doesn't involve the Internet):\nhttps://gist.github.com/1410735\n  This implements the zero-arg and n-arg versions of the memcache stats command. It also fixes a bug in the `integration.ClientSpec` test that must have broken with memcached 1.4.8 (comment inline).\n\nThere are at least two potential issues with the implementation. First, the response decoding wasn't suitable for decoding stat responses so a new state (along with decoding and response case classes) was introduced to manage this response type. Second, the client implemented stats command throws a `UnsupportedOperationException` for the `PartitionedClient`, since this operation doesn't make sense in that context.\n\nFeedback welcome.\n  When including the finagle dependency we need to exclude several jars otherwise we get:\n\nError transferring file: artifactory.local.twitter.com: Unknown host artifactory.local.twitter.com\n\nAlso other people have this problem:\n\nhttps://github.com/jghoman/finagle-java-example\n ok, the dependencies finagle-core and finagle-http works:\n\n```\n    <dependency>\n        <groupId>com.twitter</groupId>\n        <artifactId>finagle-core</artifactId>\n        <version>1.9.6</version>                       \n    </dependency>\n  <dependency>\n        <groupId>com.twitter</groupId>\n        <artifactId>finagle-http</artifactId>\n        <version>1.9.6</version>                       \n    </dependency>\n```\n\nI would still recommend to document that :)\n  Currently the value for memcache flags are discarded when handling response encoding. This commit fixes that and includes a unit test for verifying that the behavior is correct. This change did require a couple of changes to the interpreter specs but not to the actual interpreter. We're running this patch in production.\n  i saw \nval service = ClientBuilder()          .hosts(Seq(thriftServerAddr))          .codec(codec)          .hostConnectionLimit(1)          .build()        val client = new B.ServiceToClient(service, new TBinaryProtocol.Factory())  \nin finagle-thrift/src/test/scala/com/twitter/finagle/thrift/FinagleClientThriftServerSpec.scala\n\nbut i cant find ServiceToClient in my thrftsub,how to gen ServiceToClient \n\nthanks\n  Is there any way to build thrift files with twitter/sbt-thrift using console/maven? (not using special sbt project/plugin spec.)\n(they also should be compatible to finagle)\n  If a client sends no command (just an empty newline), the server decoder throws a `NoSuchElementException`. This is caused by accessing `head` on an empty sequence.\n  I get the following stack trace with scala 2.9.x\n\njava.lang.NoSuchMethodError: scala.collection.Seq$.unapplySeq(Lscala/collection/Seq;)Lscala/Some;\n    at com.twitter.finagle.stats.RollupStatsReceiver.com$twitter$finagle$stats$RollupStatsReceiver$$tails(StatsReceiver.scala:107)\n    at com.twitter.finagle.stats.RollupStatsReceiver$$anon$5.<init>(StatsReceiver.scala:123)\n    at com.twitter.finagle.stats.RollupStatsReceiver.stat(StatsReceiver.scala:122)\n    at com.twitter.finagle.stats.NameTranslatingStatsReceiver.stat(StatsReceiver.scala:139)\n    at com.twitter.finagle.channel.ChannelServiceFactory.<init>(ChannelService.scala:148)\n    at com.twitter.finagle.builder.ClientBuilder$$anonfun$10.apply(ClientBuilder.scala:659)\n    at com.twitter.finagle.builder.ClientBuilder$$anonfun$10.apply(ClientBuilder.scala:638)\n    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194)\n    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194)\n    at scala.collection.LinearSeqOptimized$class.foreach(LinearSeqOptimized.scala:59)\n    at scala.collection.immutable.List.foreach(List.scala:45)\n    at scala.collection.TraversableLike$class.map(TraversableLike.scala:194)\n    at scala.collection.immutable.List.map(List.scala:45)\n    at com.twitter.finagle.builder.SocketAddressCluster.mkFactories(Cluster.scala:49)\n    at com.twitter.finagle.builder.ClientBuilder.buildFactory(ClientBuilder.scala:638)\n    at com.twitter.finagle.builder.ClientBuilder.build(ClientBuilder.scala:717)\n        ....\n\nThis is the code to build the client:\n\n```\n  val client = ClientBuilder()\n  .codec(Http())\n  .hosts(\"localhost:8080\")\n  .hostConnectionLimit(1)\n  .build()\n```\n\nIt works fine on 2.8.1. \n Scala 2.9.x is not binary compatible with Scala 2.8.x so errors like this are bound to happen unless you recompile with Scala 2.9.x. Did you recompile with Scala 2.9.x?\n Thanks for the quick reply, i used the libraries from maven.twttr.com which are 2.8.x\n\nI tried rebuilding for 2.9.1 from HEAD. But the tests for twitter.util.logging/core does not succeed with specs-1.6.9-SNAPSHOT (I updated Project.scala for both finagle and util since required for 2.9.1). One error when running the tests for util-core is\n\n[error] Could not create an instance of com.twitter.util.FutureSpec\n[error] \n[error]   0\n[error] \n[error]   org.specs.util.Classes$class.createInstanceFor(Classes.scala:85)\n[error]   org.specs.util.Classes$.createInstanceFor(Classes.scala:29)\n[error]   org.specs.util.Classes$class.create(Classes.scala:40)\n[error]   org.specs.util.Classes$.create(Classes.scala:29)\n[error]   org.specs.runner.TestInterfaceRunner.run(TestInterfaceRunner.scala:55)\n[error]   sbt.TestRunner.run(TestFramework.scala:53)\n[error]   sbt.TestRunner.runTest$1(TestFramework.scala:67)\n[error]   sbt.TestRunner.run(TestFramework.scala:76)\n[error]   sbt.TestFramework$$anonfun$10$$anonfun$apply$11.runTest$2(TestFramework.scala:194)\n[error]   sbt.TestFramework$$anonfun$10$$anonfun$apply$11$$anonfun$apply$12.apply(TestFramework.scala:205)\n[error]   sbt.TestFramework$$anonfun$10$$anonfun$apply$11$$anonfun$apply$12.apply(TestFramework.scala:205)\n[error]   sbt.NamedTestTask.run(TestFramework.scala:92)\n[error]   sbt.ScalaProject$$anonfun$sbt$ScalaProject$$toTask$1.apply(ScalaProject.scala:193)\n[error]   sbt.ScalaProject$$anonfun$sbt$ScalaProject$$toTask$1.apply(ScalaProject.scala:193)\n[error]   sbt.TaskManager$Task.invoke(TaskManager.scala:62)\n[error]   sbt.impl.RunTask.doRun$1(RunTask.scala:77)\n[error]   sbt.impl.RunTask.runTask(RunTask.scala:85)\n[error]   sbt.impl.RunTask.sbt$impl$RunTask$$runIfNotRoot(RunTask.scala:60)\n[error]   sbt.impl.RunTask$$anonfun$runTasksExceptRoot$2.apply(RunTask.scala:48)\n[error]   sbt.impl.RunTask$$anonfun$runTasksExceptRoot$2.apply(RunTask.scala:48)\n[error]   sbt.Distributor$Run$Worker$$anonfun$2.apply(ParallelRunner.scala:131)\n[error]   sbt.Distributor$Run$Worker$$anonfun$2.apply(ParallelRunner.scala:131)\n[error]   sbt.Control$.trapUnit(Control.scala:19)\n[error]   sbt.Distributor$Run$Worker.run(ParallelRunner.scala:131)\n\nI'm leaving this for now and stay with 2.8.x. Did you have any luck building with 2.9.x? \n There is a pull request currently open on twitter/util (https://github.com/twitter/util/pull/8) for working towards making util 2.9 compatible. IIRC, some code changes needed to be made to FutureSpec (and others) for util to work with 2.9. There is also an Ostrich 2.9 pull request, if you're wanting to include Ostrich.\n Any chance of getting those branches (util and finagle I think are the needed for this) pushed to github even if it can't be merged into master for a while ?  2.9.1's been pretty stable for us.\n Any idea as to when we might be able to play with a 2.9 version of finagle?\n pretty please?\n thanks!\n +1 at having everything necessary to create packages like those published in github\n  Adds support for the quit command in the memcached protocol on the client, server, and interpreter. Some clients unfortunately issue a quit to disconnect, and without the support the server gets a flood of error messages. Changes also includes updates to tests to verify functionality. Not much was required in terms of changes besides adding Quit/NoOp to the appropriate places. Two notable exceptions:\n- `AbstractDecoder` - needs to check if token length is 0\n- `client.DecodingToResponse` - needs to check for token length of 0\n\nAll tests continue to pass, no regressions. This should be a backwards compatible change.\n Style fixes, etc taken care of.\n  The server `DecodingToCommand` implementation assumes that the specified exptime of a storage command is always a delta (e.g. number of seconds from now). This assumption doesn't work if `0` is specified (e.g. no expiration time) or a unixtime is specified. This pull request addresses both of those cases.\n\nIn the case where 0 is specified, a value of 0 is maintained. In the case where a delta is specified, the behavior is the same. When the value is a unixtime (detected the same way as from `memcached.c`), the value is converted to a Time instance.\n\nIncluded Spec is not comprehensive of `DecodingToCommand` but is comprehensive of the changes that were introduced.\n  This patch fixes an issue with the memcached response encoding of cas values. Without this patch the output from memcached commands that include a cas value look like:\n\n```\nget foo\nVALUE foo 0 BigEndianHeapChannelBuffer(ridx=0, widx=1, cap=1) 3\nbar\nEND\n```\n\nThis patch moves the cas unique value to the end of the value line and stops calling `toString` on the ChannelBuffer.\n No worries, thanks for being so responsive.\n  This patch fixes an issue with the memcached response encoding of cas values. Without this patch the output from memcached commands that include a cas value look like:\n\n```\nget foo\nVALUE foo 0 BigEndianHeapChannelBuffer(ridx=0, widx=1, cap=1) 3\nbar\nEND\n```\n\nThis patch moves the cas unique value to the end of the value line and stops calling `toString` on the ChannelBuffer.\n Since I wasn't bright and didn't create a branch, I'm closing this and will submit new pull request from a branch (with the nit fixes).\n Updated in #33\n    Following Jorge's suggestion in issue #16 I removed the hard coded spec version.\nWhile I was at it I noticed some test syntax issues I also cleaned up.\n  The previous version was superfluous.\n  The README (and possibly other docs?) list...\n\nval server: Server[HttpRequest, HttpResponse] = ServerBuilder()                            // 4\n      .codec(Http)\n      .bindTo(address)\n      .build(service)\n      .name(\"HttpServer\"));\n\nThe build needs to be the last step or the compiler vomits out an unhelpful...\n\nCannot prove that com.twitter.finagle.builder.ServerConfig[org.jboss.netty.handler.codec.http.HttpRequest,org.jboss.netty.handler.codec.http.HttpResponse,com.twitter.finagle.builder.ServerConfig.Yes,com.twitter.finagle.builder.ServerConfig.Yes,Nothing] =:= com.twitter.finagle.builder.ServerConfig[org.jboss.netty.handler.codec.http.HttpRequest,org.jboss.netty.handler.codec.http.HttpResponse,com.twitter.finagle.builder.ServerConfig.Yes,com.twitter.finagle.builder.ServerConfig.Yes,com.twitter.finagle.builder.ServerConfig.Yes]\n  I've run into an issue with TLS enabled clients. I'm building a service that will hit a remote host with a POST request and I want to make sure the remote host is on TLS and has a valid certificate. I'm using the following code to send my request:\n\n``` scala\nval uri = \"https://www.ribe.me/submit.php\"\nval address = new URI(uri)\n\nval client = ClientBuilder()\n  .codec(Http())\n  .tls()\n  .hosts(new InetSocketAddress(address.getHost, 443))\n  // ... set some other variables about timeouts\n  .build()\n\nval request = new DefaultHttpRequest(HttpVersion.HTTP_1_1, HttpMethod.POST, uri) // And set the content and headers\n\nHttpHeaders.setHost(request, address.getHost)\n\nclient(request)\n```\n\nThe uri here is a test script running on an Apache server and is signed (as you can see if you visit it in Chrome) with a MediaTemple SSL certificate whose domain doesn't match the URI domain. This, I believe, should cause a SSLException to be thrown since the certificate should fail verification, but instead my program is happily sending the requests off without issue and returning 200 - OK every time.\n\nEither there is a bad behavior here on Finagle's part or I've messed up something non-obvious in the code...\n  Not sure if this is finagle, netty or user error.\n\nOn and off I have seen my processes get into a state where they start logging this message every second, which happens to be the tcpConnectTimeout of the clients used. I have 4 copies of the process up and only one gets into this state. If I restart the proc, I dont see the logging any more. Is this some kind of known issue?\n\n```\n            WAR [20110727-18:20:22.235] channel: java.net.ConnectException: connection timed out\n    WAR [20110727-18:20:22.235] channel:     at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.processConnectTimeout(NioClientSocketPipelineSink.java:371)\n    WAR [20110727-18:20:22.235] channel:     at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.run(NioClientSocketPipelineSink.java:283)\n    WAR [20110727-18:20:22.235] channel:     at org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)\n    WAR [20110727-18:20:22.235] channel:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    WAR [20110727-18:20:22.235] channel:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\n    WAR [20110727-18:20:22.235] channel:     at java.lang.Thread.run(Thread.java:636)\n    WAR [20110727-18:20:23.235] channel: EXCEPTION, please implement com.twitter.finagle.http.ClientConnectionManager.exceptionCaught() for proper handling.\n    WAR [20110727-18:20:23.235] channel: java.net.ConnectException: connection timed out\n    WAR [20110727-18:20:23.235] channel:     at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.processConnectTimeout(NioClientSocketPipelineSink.java:371)\n    WAR [20110727-18:20:23.235] channel:     at org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.run(NioClientSocketPipelineSink.java:283)\n    WAR [20110727-18:20:23.235] channel:     at org.jboss.netty.util.internal.IoWorkerRunnable.run(IoWorkerRunnable.java:46)\n    WAR [20110727-18:20:23.235] channel:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)\n    WAR [20110727-18:20:23.755] channel: EXCEPTION, please implement com.twitter.finagle.http.ClientConnectionManager.exceptionCaught() for proper handling.\n```\n  Would be nice to have access so that you could for instance supress logging of WriteExteptions with expected causes like CancelledRequestexception CancelledConnectionExcetpion, etc...\n  In the readme there are 2 examples where \n\n```\n import com.twitter.finagle.util.Timer._\n```\n\nis used. However, that object is private[finagle], so if you actually try to use the example code, it wont build.\n\nCan it be public? Had to fall back to using a JavaTimer instead.\n  Hi-\n\n   I am using finagle to build a proxy service, using the http codec. It seems to work fine, but once under load produces these kind of stack traces.  Any tips or pointers to what could be going wrong/how to fix?\n\nAll the samples seem to call Service.release() as they exit. Is there a need to call it on a request basis?\n\n2011-06-28T22:37:39+00:00 com.twitter.finagle.TooManyConcurrentRequestsException\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.channel.ChannelService.apply(ChannelService.scala:92)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.service.ExpiringService.apply(ExpiringService.scala:80)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.ServiceProxy.apply(Service.scala:69)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.ServiceProxy.apply(Service.scala:69)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.service.FailureAccrualFactory$$anonfun$make$1$$anon$1.apply(FailureAccrualFactory.scala:37)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.service.RefcountedService.apply(RefcountedService.scala:13)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.service.StatsFilter.apply(StatsFilter.scala:24)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.Filter$$anon$5.apply(Service.scala:182)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.loadbalancer.LeastQueuedStrategy$$anon$1$$anonfun$make$1$$anon$2.apply(LeastQueuedStrategy.scala:55)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.FactoryToService$$anonfun$apply$2.apply(Service.scala:115)\n2011-06-28T22:37:39+00:00   at com.twitter.finagle.FactoryToService$$anonfun$apply$2.apply(Service.scala:114)\n2011-06-28T22:37:39+00:00   at com.twitter.util.Promise$$anon$2$$anonfun$8.apply(Future.scala:604)\n2011-06-28T22:37:39+00:00   at com.twitter.util.Promise$$anon$2$$anonfun$8.apply(Future.scala:601)\n2011-06-28T22:37:39+00:00   at com.twitter.util.Promise.respond(Future.scala:559)\n2011-06-28T22:37:39+00:00   at com.twitter.util.Promise$$anon$2.<init>(Future.scala:601)\n2011-06-28T22:37:39+00:00   at com.twitter.util.Promise.flatMap(Future.scala:599)\n\nThanks!\n Looks like using  ClientBuilder.buildFactory() and  ServiceFactory.service fix this.\n\nShould that be reflected in the samples?\n I actually have also seen these using ServiceFactory too, so maybe its just a coding error? \n\nI see the TooManyConcurrentRequestsException is grouped with the \"API Misuse\" exceptions. What would cause this to be thrown?\n\n I changed some of my code and most of them disappeared, but they still occur very sporadically.\n\nthe client builder is  \n\n```\n   var builder = ClientBuilder()\n  .codec(Http(_maxRequestSize = 100.megabytes, _maxResponseSize = 100.megabyte))\n  .sendBufferSize(1048576)\n  .recvBufferSize(1048576)\n  .hosts(new InetSocketAddress(host, port))\n  .hostConnectionLimit(Integer.MAX_VALUE)\n  .hostConnectionMaxIdleTime(5.seconds)\n  .retries(1)\n  .name(host)\nif (ssl) (builder = builder.tlsWithoutValidation())\n```\n\nThe general usage pattern is \n\n```\nval nearClient:ServiceFactory[HttpRequest, HttpResponse] = ...\nval farClient:ServiceFactory[HttpRequest, HttpResponse] = ...\n\nval req = new DefaultHttpRequest(...) \nnearClient.service(req).flatMap {\n      nearResp =>{\n          if(nearResponse.../*accepatble*/){\n                Future.value(nearResp)\n          } else {\n               farClient.service(req).flatMap{\n                      farResp =>{\n                          if(farResp.../*acceptable*/){\n                                val put = new DefaultHttpRequest(....)\n                                put.setContent(farResp.getContent.duplicate)\n                                nearClient.service(put).onSuccess(...).onFailure(...).onCancellation(...)    \n                          }\n                          Future.value(farResp)\n                      }             \n                }\n         }\n     } \n}\n```\n Thanks for the usage tips, I am on 1.6.2\n\nIn the course of introducing the stats reciever, or some other code change today, I seem to have made the TooManyConcurrentRequestsExceptions go away, so it seems it may have been an error on my part.\n\nThe only thing I am seeing now are a few WriteExceptions now and again, followed by this log message, which actually comes from netty SimpleChannelHandler.\n\n```\nchannel: EXCEPTION, please implement com.twitter.finagle.http.ClientConnectionManager.exceptionCaught() for proper handling.\nchannel: java.net.ConnectException: connection timed out \nchannel:     at   org.jboss.netty.channel.socket.nio.NioClientSocketPipelineSink$Boss.processConnectTimeout(NioClientSocketPipelineSink.java:371)\n```\n\nThe exceptions I was and am now seeing were all coming from load generated by a test harness written using finagle, modeled after the Stress example, with concurrency of 16 and pushing 32k requests through.\n\nI will keep banging on the app and see if I can get the TooManyConcurrentRequestsExceptions...if I dont have any luck in the next day or 2, Ill close the issue\n Actually just saw a few TooManyConcurrentRequestsExceptions.  I will get the stats together for you.\n\nI guess i should mention that on top of the general pattern I showed above, there is parallel request processing going on too, \n\nof the form\n\n```\n  val futures: List[Future[HttpResponse]]] = clientPairs.map {\n      _ match {\n           case (nearClient, farClient) => doRequestMentionedAbove(nearClient,farClient,...)\n      }\n  }\n\n  val (first, rest) = Future.select(futures).get\n  rest.foreach(_.cancel)\n```\n\nNot sure if this gives any further hints...\n Ok will do, thanks.\n Bumped it to 1.7.4 since I saw that was latest...been banging on the app and so far so good.  \n\nNow only seeing the odd WriteException, and valid/expected occurrences of TimedoutRequestException and CancelledRequestException \n\nWill close the issue tomorow if behavior stays consistent, thanks for your help!\n Ok all good with no more TooManyConcurrentRequestsExceptions. Is there a target release number/date for the WriteException supression?\n    the link at the bottom of http://twitter.github.com/finagle/ points to the commons library, rather than finagle\n  sbt update fails due because of unresolved dependencies \n-  com.twitter#sbt-thrift;1.2.0 \n-  com.twitter#standard-project;0.11.14-NEST \n\nAlso repositories set to local twitter ( http://artifactory.local.twitter.com/repo/ ) artifactory in Plugins.scala. \n  This was bothering me.\n  Just curious why you are using the 2.8.0 version of specs?\n\nhttps://github.com/twitter/finagle/blob/master/project/build/Project.scala#L128\n\nIs that for a reason?  Maybe use the '%%' delimiter to pick up the scala version automatically? (\n For a while, a 2.8.1 build of specs didn't exist.  We could/should fix this.  Patch welcome ;)\n We couldn't rely on %% to give us the semantics we wanted in a multi-versioned world so we relied on hard-coding versions of Scala.\n\nWe don't think there's a bad interaction between scala 2.8.1 and the version of specs we're using, this is just an accident of history.\n\nOne of us will clean it up unless some nice person on the internet gives us a patch first.\n You can get around this by creating a \"specsVersion\" variable and matching on the Scala version.\n\nSee: https://github.com/foursquare/rogue/blob/master/project/build/RogueProject.scala#L19\n\n```\nlazy val specsVersion = buildScalaVersion match {\n  case \"2.8.0\" => \"1.6.5\"\n  case _       => \"1.6.8\"\n}\n\nval specs = \"org.scala-tools.testing\" %% \"specs\"          % specsVersion      % \"test\" withSources()\n```\n    \u2022 If TLS/SSL certificate and key files do not exist, a failure is exhibited at startup rather than when a connection is created\n\u2022 Performance improvement from recycling of SSLContext\n\u2022 X-Transport-Cipher header added to HTTP requests, annotating the cipher used (or, in the case none was employed, 'plaintext')\n  to limit total connection lifetime\n You are right. maybeExpire() could take callback functions from the caller,\nbut that seems more complicated than necessary. Or we can simply pass a flag\n\"force_expire\" to maybeExpire() to always set expire to true.\n\nOn Mon, Mar 21, 2011 at 2:24 PM, mariusaeriksen <\nreply@reply.github.com>wrote:\n\n> there's a race between `maybeLifeTimeExpire` and the completion of the\n> underlying request: `maybeLifetimeExpire` can fire, and between\n> `maybeExpire()` and `expired = true`, the request can complete, leaving\n> `didExpire()` uncalled.\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/11#issuecomment-900383\n thanks. pushed.\n\nOn Tue, Mar 22, 2011 at 5:17 PM, mariusaeriksen <\nreply@reply.github.com>wrote:\n\n> i've added you to the twitter team.  you should be able to push now\n> \n> ## \n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/twitter/finagle/pull/11#issuecomment-905638\n   +1, modulo that comment\n  ", "text_all_count": 13051, "text_word_token": ["This", "file", "lets", "you", "specify", "which", "version", "of", "sbt", "to", "use", "NUMBER", "sbt", "will", "read", "it", "and", "if", "necessary", "self", "bootstrap", "the", "correct", "version", "of", "itself", "before", "proceeding", "to", "build", "NUMBER", "Yes", "the", "correct", "version", "of", "sbt", "NUMBER", "be", "already", "specified", "in", "the", "sbt", "build", "script", "but", "if", "users", "choose", "not", "to", "use", "this", "script", "and", "rather", "use", "sbt", "directly", "for", "example", "the", "sbt", "script", "doesn", "t", "work", "on", "Windows", "they", "can", "get", "the", "wrong", "version", "of", "sbt", "NUMBER", "See", "LINK", "topic", "finaglers", "TVOmozhPgWk", "Kirill", "NUMBER", "nov", "NUMBER", "Thank", "you", "all", "The", "issue", "occured", "because", "I", "use", "the", "latest", "version", "of", "SBT", "NUMBER", "When", "I", "downgraded", "to", "sbt", "NUMBER", "then", "it", "looks", "it", "works", "NUMBER", "LINK", "NUMBER", "NUMBER", "Final", "NUMBER", "html", "We", "be", "already", "test", "the", "Netty", "NUMBER", "internally", "it", "will", "be", "available", "here", "soon", "NUMBER", "Thanks", "NUMBER", "I", "intend", "to", "do", "the", "update", "and", "send", "pull", "request", "but", "since", "you", "be", "already", "doing", "that", "it", "s", "better", "you", "finish", "it", "NUMBER", "Yes", "NUMBER", "I", "m", "developing", "Xitrum", "LINK", "which", "be", "based", "on", "Netty", "too", "NUMBER", "I", "m", "seeing", "warnings", "like", "below", "when", "update", "Xitrum", "warn", "Users", "ngoc", "src", "xitrum", "src", "main", "scala", "xitrum", "I", "NUMBER", "n", "NUMBER", "scala", "NUMBER", "method", "getHeader", "in", "trait", "HttpMessage", "be", "deprecate", "see", "corresponding", "Javadoc", "for", "more", "information", "NUMBER", "warn", "val", "header", "request", "NUMBER", "getHeader", "Names", "NUMBER", "ACCEPT_LANGUAGE", "warn", "warn", "Users", "ngoc", "src", "xitrum", "src", "main", "scala", "xitrum", "action", "Net", "NUMBER", "scala", "NUMBER", "method", "getHeader", "in", "trait", "HttpMessage", "be", "deprecate", "see", "corresponding", "Javadoc", "for", "more", "information", "NUMBER", "warn", "val", "xForwardedFor", "request", "NUMBER", "getHeader", "X", "Forwarded", "For", "warn", "warn", "Users", "ngoc", "src", "xitrum", "src", "main", "scala", "xitrum", "action", "Net", "NUMBER", "scala", "NUMBER", "method", "getHeader", "in", "trait", "HttpMessage", "be", "deprecate", "see", "corresponding", "Javadoc", "for", "more", "information", "NUMBER", "warn", "val", "xForwardedProto", "request", "NUMBER", "getHeader", "X", "Forwarded", "Proto", "LINK", "getHeader", "java", "NUMBER", "lang", "NUMBER", "String", "Please", "see", "this", "pull", "request", "there", "s", "also", "commit", "about", "README", "LINK", "Does", "Twitter", "plan", "to", "update", "Netty", "from", "NUMBER", "x", "to", "NUMBER", "x", "soon", "About", "when", "I", "thought", "it", "s", "just", "matter", "of", "replacing", "most", "header", "access", "calls", "with", "headers", "NUMBER", "NUMBER", "Let", "me", "know", "if", "you", "need", "any", "help", "on", "this", "NUMBER", "Sent", "from", "a", "mobile", "device", "NUMBER", "LINK", "LINK", "_ko", "LINK", "_project", "Original", "Message", "From", "Brian", "Degenhardt", "notifications", "github", "NUMBER", "com", "To", "twitter", "finagle", "finagle", "noreply", "NUMBER", "github", "NUMBER", "com", "Sent", "\ud1a0", "NUMBER", "NUMBER", "\uc6d4", "NUMBER", "NUMBER", "NUMBER", "\uc624\uc804", "Subject", "Re", "finagle", "Update", "Netty", "from", "NUMBER", "to", "NUMBER", "NUMBER", "There", "s", "some", "trickiness", "with", "the", "backport", "of", "http", "headers", "from", "netty", "NUMBER", "that", "collides", "with", "our", "headers", "map", "in", "finagle", "NUMBER", "If", "you", "want", "to", "take", "a", "look", "at", "it", "we", "d", "appreciate", "it", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Actually", "someone", "be", "already", "work", "on", "that", "right", "now", "it", "should", "be", "available", "very", "soon", "NUMBER", "Per", "discussion", "on", "the", "finaglers", "mailing", "list", "LINK", "By", "NUMBER", "MtOgJ", "DnsCluster", "continuously", "resolve", "a", "host", "name", "into", "a", "set", "of", "SocketAddress", "instances", "loosely", "based", "on", "ZK", "cluster", "implementation", "NUMBER", "LingeringCluster", "be", "a", "generic", "Cluster", "filter", "that", "propagates", "Rem", "events", "after", "a", "predefined", "delay", "this", "helps", "dealing", "with", "firewall", "that", "do", "its", "own", "DNS", "resolution", "NUMBER", "I", "like", "the", "idea", "here", "but", "Clusters", "be", "deprecate", "NUMBER", "It", "doesn", "t", "make", "sense", "to", "add", "a", "new", "one", "right", "now", "NUMBER", "Can", "you", "get", "these", "to", "work", "with", "the", "Name", "api", "I", "ve", "looked", "at", "ZkResolver", "to", "see", "how", "to", "implement", "a", "similar", "DnsResolver", "but", "it", "uses", "a", "Group", "internally", "and", "there", "s", "a", "comment", "about", "taking", "that", "out", "as", "well", "I", "understand", "Groups", "be", "deprecate", "too", "NUMBER", "I", "wonder", "if", "my", "best", "strategy", "be", "to", "wait", "until", "the", "dust", "settles", "and", "then", "take", "another", "look", "Or", "be", "I", "barking", "up", "the", "wrong", "tree", "The", "deprecation", "storm", "has", "settled", "and", "the", "Name", "Var", "Addr", "API", "be", "the", "outcome", "NUMBER", "I", "think", "it", "s", "safe", "to", "assume", "that", "it", "s", "stable", "enough", "to", "build", "upon", "NUMBER", "ZkResolver", "be", "still", "write", "in", "terms", "of", "Group", "because", "no", "one", "s", "had", "time", "to", "migrate", "StabilizingGroup", "to", "the", "Var", "Addr", "world", "NUMBER", "A", "DnsResolver", "would", "provide", "a", "function", "def", "bind", "arg", "String", "Var", "Addr", "NUMBER", "See", "twitter", "server", "s", "FlagResolver", "LINK", "server", "blob", "master", "src", "main", "scala", "com", "twitter", "server", "resolver", "FlagResolver", "NUMBER", "scala", "L", "NUMBER", "class", "for", "a", "simple", "example", "NUMBER", "Thanks", "for", "your", "response", "but", "I", "be", "still", "a", "bit", "confused", "where", "my", "DNS", "stuff", "would", "fit", "in", "this", "brave", "new", "world", "NUMBER", "On", "one", "hand", "it", "could", "be", "use", "as", "a", "poor", "man", "s", "ZK", "with", "multiple", "machines", "resolving", "the", "same", "hostname", "so", "that", "s", "why", "I", "looked", "at", "the", "ZkResolver", "but", "then", "we", "can", "also", "have", "a", "Name", "implementation", "something", "like", "this", "LINK", "What", "would", "you", "guys", "prefer", "Will", "the", "dependency", "on", "libthrift", "ever", "be", "upgrade", "from", "NUMBER", "to", "NUMBER", "the", "latest", "version", "It", "s", "on", "our", "list", "of", "things", "to", "do", "but", "we", "haven", "t", "commit", "it", "to", "the", "schedule", "NUMBER", "Maybe", "something", "playful", "about", "smuggling", "packets", "What", "about", "make", "the", "twitter", "bird", "a", "cog", "surrounded", "by", "three", "gears", "that", "mesh", "with", "it", "Take", "the", "twitter", "logo", "imposed", "on", "a", "radial", "plane", "NUMBER", "Then", "re", "project", "it", "to", "a", "flat", "projection", "find", "the", "inverse", "map", "back", "to", "radial", "and", "you", "get", "a", "gear", "that", "fits", "the", "bird", "NUMBER", "Combining", "ideas", "a", "bit", "A", "bird", "whose", "nest", "be", "a", "coffee", "filter", "maybe", "with", "some", "plumbing", "visible", "in", "around", "the", "nest", "NUMBER", "bmdhacks", "NUMBER", "I", "like", "the", "idea", "about", "a", "mechanized", "bird", "NUMBER", "LINK", "content", "uploads", "NUMBER", "NUMBER", "swallows", "NUMBER", "jpg", "What", "about", "a", "NUMBER", "second", "Finagle", "jingle", "audio", "clip", "that", "plays", "every", "time", "you", "start", "a", "Finagle", "service", "of", "course", "every", "time", "you", "read", "the", "online", "documentation", "How", "about", "a", "bird", "that", "wears", "steampunk", "goggles", "LINK", "steampunk", "goggles", "tbm", "isch", "LINK", "design", "contests", "logo", "finagle", "NUMBER", "entries", "NUMBER", "be", "easier", "to", "read", "NUMBER", "The", "F", "in", "the", "other", "one", "be", "not", "obvious", "in", "my", "mind", "NUMBER", "Yes", "retries", "be", "active", "use", "the", "default", "of", "NUMBER", "We", "always", "use", "the", "ClientBuilder", "NUMBER", "This", "one", "be", "not", "use", "TLS", "NUMBER", "Actually", "yes", "we", "be", "get", "a", "handful", "of", "these", "about", "NUMBER", "of", "request", "produce", "this", "and", "this", "would", "be", "one", "thing", "our", "mock", "server", "doesn", "t", "emulate", "NUMBER", "So", "that", "would", "make", "sense", "NUMBER", "Regarding", "moving", "up", "to", "NUMBER", "we", "would", "love", "to", "but", "we", "re", "use", "Cassie", "which", "depends", "on", "NUMBER", "Do", "you", "know", "if", "the", "version", "be", "binary", "compatible", "Ok", "I", "will", "do", "a", "little", "test", "tomorrow", "and", "see", "if", "I", "can", "just", "drop", "in", "NUMBER", "I", "haven", "t", "test", "with", "NUMBER", "yet", "but", "I", "update", "our", "mock", "to", "emulate", "the", "exception", "that", "bubbles", "up", "to", "the", "root", "monitor", "NUMBER", "I", "was", "able", "to", "send", "NUMBER", "k", "message", "without", "error", "other", "than", "the", "exception", "which", "occur", "NUMBER", "of", "the", "time", "use", "the", "same", "configuration", "that", "s", "in", "production", "NUMBER", "I", "was", "hoping", "I", "could", "simply", "handle", "this", "edge", "case", "as", "a", "triage", "measure", "but", "I", "m", "not", "convinced", "it", "s", "the", "root", "cause", "NUMBER", "I", "be", "uneasy", "about", "upgrading", "Finagle", "without", "extensive", "test", "because", "all", "of", "our", "services", "use", "Finagle", "for", "inter", "process", "communication", "NUMBER", "I", "notice", "this", "morning", "that", "Cassie", "s", "newest", "release", "uses", "NUMBER", "Is", "it", "reasonable", "to", "assume", "that", "the", "fix", "in", "question", "would", "be", "in", "that", "version", "I", "switched", "our", "client", "back", "to", "the", "Apache", "client", "as", "an", "immediate", "triage", "which", "seems", "to", "be", "work", "fine", "because", "I", "really", "want", "to", "be", "able", "to", "replicate", "the", "issue", "before", "trying", "another", "production", "fix", "NUMBER", "If", "you", "have", "any", "other", "theories", "I", "can", "check", "out", "I", "m", "happy", "to", "do", "so", "I", "d", "much", "prefer", "to", "use", "Finagle", "across", "the", "board", "NUMBER", "So", "what", "I", "hear", "you", "saying", "be", "that", "an", "upgrade", "to", "NUMBER", "will", "theoretically", "fix", "the", "issue", "but", "there", "s", "no", "way", "to", "know", "for", "sure", "without", "deploying", "to", "production", "If", "the", "unhandle", "exception", "puts", "the", "client", "in", "this", "state", "in", "our", "production", "system", "why", "would", "it", "not", "do", "the", "same", "in", "our", "test", "system", "It", "s", "on", "our", "short", "term", "backlog", "NUMBER", "We", "had", "to", "prioritize", "get", "a", "major", "release", "out", "the", "door", "first", "but", "this", "be", "a", "high", "priority", "item", "for", "us", "NUMBER", "I", "ll", "let", "you", "know", "when", "we", "have", "test", "results", "NUMBER", "Haven", "t", "be", "able", "to", "test", "this", "directly", "but", "I", "ve", "be", "run", "around", "in", "circles", "dealing", "with", "an", "exception", "message", "my", "client", "was", "printing", "with", "no", "context", "or", "message", "NUMBER", "As", "the", "server", "has", "NUMBER", "logging", "I", "couldn", "t", "access", "the", "stack", "trace", "NUMBER", "Can", "something", "like", "this", "be", "add", "so", "any", "request", "the", "generates", "an", "unhandle", "exception", "gets", "optionally", "logged", "I", "can", "probably", "guess", "what", "a", "logging", "filter", "be", "but", "I", "don", "t", "think", "I", "should", "have", "to", "be", "aware", "that", "I", "have", "to", "install", "one", "in", "order", "to", "prevent", "exception", "from", "be", "silently", "swallowed", "even", "if", "I", "have", "a", "high", "logging", "level", "turned", "on", "Are", "there", "any", "examples", "on", "how", "to", "use", "LoggingFilter", "I", "see", "it", "s", "abstract", "not", "sure", "how", "to", "plug", "it", "in", "NUMBER", "Got", "this", "far", "Service", "filteredService", "new", "LoggingFilter", "NUMBER", "andThen", "myService", "but", "that", "error", "because", "it", "s", "abstract", "NUMBER", "P", "NUMBER", "s", "NUMBER", "I", "can", "t", "mix", "it", "in", "because", "I", "m", "use", "a", "scrooge", "generate", "service", "plus", "it", "s", "java", "NUMBER", "So", "you", "disagree", "that", "I", "handle", "exception", "should", "always", "be", "logged", "at", "a", "high", "enough", "level", "regardless", "of", "attached", "filters", "It", "kind", "of", "violates", "the", "principle", "of", "least", "surprise", "NUMBER", "On", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Moses", "Nakamura", "notifications", "github", "NUMBER", "com", "write", "Take", "a", "look", "at", "Http", "LoggingFilter", "LINK", "http", "src", "main", "scala", "com", "twitter", "finagle", "http", "filter", "LoggingFilter", "NUMBER", "scala", "confusingly", "also", "named", "LoggingFilter", "for", "historical", "reasons", "Filters", "be", "designed", "to", "be", "composed", "in", "the", "way", "that", "you", "re", "describing", "filter", "andThen", "service", "NUMBER", "Here", "be", "some", "LINK", "Building", "NUMBER", "a", "NUMBER", "Robust", "NUMBER", "Server", "docs", "LINK", "that", "might", "be", "useful", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "NUMBER", "That", "s", "some", "crazy", "work", "just", "to", "log", "unhandle", "exception", "NUMBER", "On", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Moses", "Nakamura", "notifications", "github", "NUMBER", "com", "write", "Take", "a", "look", "at", "Http", "LoggingFilter", "LINK", "http", "src", "main", "scala", "com", "twitter", "finagle", "http", "filter", "LoggingFilter", "NUMBER", "scala", "confusingly", "also", "named", "LoggingFilter", "for", "historical", "reasons", "Filters", "be", "designed", "to", "be", "composed", "in", "the", "way", "that", "you", "re", "describing", "filter", "andThen", "service", "NUMBER", "Here", "be", "some", "LINK", "Building", "NUMBER", "a", "NUMBER", "Robust", "NUMBER", "Server", "docs", "LINK", "that", "might", "be", "useful", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "NUMBER", "Plus", "you", "can", "t", "really", "use", "trait", "s", "from", "Java", "LINK", "scala", "traits", "with", "implement", "methods", "in", "java", "I", "ll", "look", "at", "make", "our", "own", "logging", "filter", "that", "uses", "slf", "NUMBER", "j", "that", "doesn", "t", "extend", "logging", "filter", "NUMBER", "If", "i", "were", "to", "push", "it", "up", "where", "would", "be", "appropriate", "finagle", "contributions", "module", "perhaps", "separate", "repo", "Something", "like", "Slf", "NUMBER", "j", "public", "class", "Slf", "NUMBER", "jLoggingFilter", "extend", "SimpleFilter", "TAG", "Override", "public", "Future", "TAG", "apply", "byte", "request", "Service", "TAG", "service", "Future", "TAG", "future", "service", "NUMBER", "apply", "request", "future", "NUMBER", "handle", "new", "Function", "TAG", "Override", "public", "byte", "apply", "Throwable", "throwable", "if", "throwable", "null", "log", "NUMBER", "error", "throwable", "NUMBER", "getMessage", "throwable", "return", "null", "no", "result", "return", "future", "Are", "all", "session", "variables", "set", "via", "a", "SET", "key", "value", "query", "If", "so", "I", "think", "it", "would", "be", "better", "to", "take", "a", "map", "containing", "session", "vars", "rather", "than", "a", "function", "NUMBER", "Okay", "that", "makes", "sense", "NUMBER", "I", "be", "currently", "work", "on", "moving", "the", "mysql", "client", "to", "use", "the", "finagle", "NUMBER", "api", "and", "I", "suspect", "that", "it", "will", "change", "the", "implementation", "of", "this", "NUMBER", "I", "ll", "get", "back", "to", "you", "on", "this", "soon", "NUMBER", "What", "be", "our", "next", "steps", "with", "this", "PR", "Does", "it", "need", "to", "be", "restarted", "from", "scratch", "to", "work", "with", "the", "new", "api", "roanta", "has", "a", "local", "branch", "where", "he", "improved", "the", "client", "NUMBER", "We", "ll", "continue", "to", "work", "on", "it", "internally", "and", "this", "PR", "will", "become", "obsolete", "when", "we", "ll", "sync", "the", "github", "repo", "NUMBER", "sounds", "good", "I", "agree", "we", "will", "do", "the", "change", "NUMBER", "Should", "be", "available", "in", "the", "public", "repo", "soon", "NUMBER", "Thanks", "I", "ve", "pull", "this", "in", "along", "with", "LINK", "Should", "sync", "into", "the", "public", "repo", "shortly", "NUMBER", "Thanks", "I", "pull", "this", "internally", "it", "ll", "show", "up", "on", "Github", "soon", "NUMBER", "Thank", "you", "for", "doing", "that", "and", "sorry", "for", "the", "delay", "the", "next", "time", "I", "ll", "be", "faster", "NUMBER", "This", "be", "in", "our", "internal", "repo", "it", "should", "show", "up", "here", "soon", "NUMBER", "Sorry", "for", "the", "delay", "again", "NUMBER", "We", "would", "be", "happy", "to", "see", "your", "pull", "request", "on", "this", "NUMBER", "No", "need", "to", "bump", "the", "minor", "if", "you", "leave", "the", "old", "LogFormatter", "in", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "http", "NUMBER", "filter", "there", "shouldn", "t", "be", "any", "API", "breakage", "NUMBER", "I", "agree", "with", "the", "rest", "of", "your", "proposition", "maybe", "should", "you", "use", "logException", "instead", "of", "logError", "I", "m", "fine", "with", "both", "NUMBER", "Closing", "the", "fix", "be", "in", "our", "internal", "repo", "it", "should", "show", "up", "here", "soon", "NUMBER", "Hey", "Moses", "Sorry", "for", "the", "delay", "I", "retrieve", "this", "internally", "NUMBER", "Thanks", "NUMBER", "Thanks", "pull", "internally", "NUMBER", "Hey", "mosesn", "I", "just", "pull", "this", "internally", "the", "change", "should", "appear", "here", "soon", "NUMBER", "Thanks", "Fixes", "two", "issue", "tomcat", "native", "NUMBER", "be", "now", "on", "archive", "NUMBER", "apache", "NUMBER", "org", "git", "apply", "doesn", "t", "like", "applying", "patches", "to", "a", "work", "tree", "that", "aren", "t", "for", "that", "work", "tree", "so", "use", "patch", "instead", "of", "git", "apply", "to", "fix", "up", "tomcat", "native", "Let", "s", "see", "if", "Finagle", "can", "pass", "green", "outside", "of", "Twitter", "challenge", "LINK", "NUMBER", "a", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "a", "NUMBER", "NUMBER", "fc", "NUMBER", "eede", "NUMBER", "jpg", "Funny", "I", "ve", "actually", "be", "work", "on", "this", "today", "too", "NUMBER", "LINK", "ci", "NUMBER", "org", "caniszczyk", "finagle", "build", "NUMBER", "I", "believe", "there", "s", "an", "issue", "of", "Travis", "not", "support", "NUMBER", "bit", "VMs", "so", "we", "re", "dead", "in", "the", "water", "ATM", "Speaking", "of", "the", "devil", "NUMBER", "Strange", "NUMBER", "what", "happens", "if", "you", "make", "Travis", "build", "it", "with", "maven", "instead", "of", "sbt", "If", "that", "s", "relevant", "mariusaeriksen", "be", "there", "a", "reason", "we", "should", "even", "bundle", "SBT", "I", "think", "it", "s", "reasonable", "to", "expect", "people", "to", "have", "it", "install", "locally", "NUMBER", "LINK", "ci", "NUMBER", "org", "eirslett", "finagle", "build", "NUMBER", "info", "Loading", "project", "definition", "from", "home", "travis", "build", "eirslett", "finagle", "project", "NUMBER", "info", "Updating", "file", "home", "travis", "build", "eirslett", "finagle", "project", "default", "d", "NUMBER", "f", "NUMBER", "NUMBER", "info", "Resolving", "com", "NUMBER", "twitter", "sbt", "package", "dist", "NUMBER", "NUMBER", "NUMBER", "warn", "module", "not", "find", "com", "NUMBER", "twitter", "sbt", "package", "dist", "NUMBER", "How", "do", "this", "compare", "and", "contrast", "with", "Akka", "We", "need", "the", "possibility", "to", "change", "the", "delimiter", "use", "when", "creating", "names", "for", "Ostrich", "stats", "Hey", "Moses", "I", "ll", "take", "a", "look", "at", "this", "today", "NUMBER", "We", "pull", "this", "internally", "should", "appear", "here", "soon", "NUMBER", "Thanks", "implement", "BITCOUNT", "BITOP", "PSETEX", "implement", "all", "string", "commands", "to", "StringCommands", "I", "have", "pull", "this", "internally", "should", "appear", "here", "soon", "I", "add", "a", "ConsoleStatsReceiver", "to", "make", "logging", "to", "the", "console", "easier", "for", "test", "NUMBER", "A", "StatsReceiver", "be", "not", "really", "a", "logger", "there", "be", "the", "logger", "method", "See", "Client", "Server", "Builder", "if", "you", "want", "to", "use", "a", "logger", "NUMBER", "If", "you", "want", "to", "have", "something", "more", "meaningful", "you", "should", "pass", "a", "StatsReceiver", "and", "have", "a", "ConsolePoller", "or", "something", "which", "poll", "the", "StatsReceiver", "and", "log", "stats", "in", "the", "console", "but", "there", "be", "the", "Ostrich", "integration", "which", "provide", "more", "than", "that", "and", "expose", "stats", "in", "a", "Http", "server", "NUMBER", "So", "I", "don", "t", "things", "this", "class", "should", "be", "part", "of", "finagle", "NUMBER", "That", "s", "fine", "NUMBER", "I", "did", "this", "as", "a", "result", "of", "a", "suggestion", "made", "on", "the", "Google", "group", "for", "Zipkin", "NUMBER", "I", "personally", "find", "it", "useful", "for", "debugging", "and", "in", "fact", "it", "revealed", "a", "conflicting", "version", "issue", "with", "SLF", "NUMBER", "J", "that", "would", "obviously", "have", "remained", "hidden", "use", "a", "logger", "NUMBER", "It", "s", "also", "helpful", "if", "you", "want", "to", "eliminate", "the", "Ostrich", "dependency", "and", "just", "see", "the", "raw", "output", "NUMBER", "Sure", "you", "can", "use", "this", "for", "debugging", "your", "application", "but", "I", "don", "t", "think", "it", "make", "sense", "to", "put", "this", "in", "finagle", "NUMBER", "We", "try", "to", "reduce", "complexity", "in", "finagle", "as", "fas", "as", "we", "can", "and", "we", "avoid", "add", "new", "feature", "unless", "it", "make", "sense", "for", "a", "significant", "part", "of", "the", "users", "NUMBER", "Anyway", "thank", "you", "for", "contribute", "NUMBER", "As", "there", "s", "no", "open", "source", "contributor", "I", "think", "you", "should", "send", "this", "review", "to", "the", "internal", "repo", "NUMBER", "Hi", "when", "I", "try", "to", "compile", "the", "whole", "project", "or", "just", "finagle", "benchmark", "on", "it", "s", "own", "I", "get", "the", "following", "error", "in", "TaskTrackingtimer", "NUMBER", "scala", "because", "neither", "of", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "NUMBER", "CountingTimer", "TaskTrackingTimer", "can", "be", "find", "NUMBER", "error", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "src", "main", "scala", "com", "twitter", "finagle", "benchmark", "TaskTrackingTimer", "NUMBER", "scala", "NUMBER", "CountingTimer", "be", "not", "a", "member", "of", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "error", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "NUMBER", "CountingTimer", "TaskTrackingTimer", "error", "error", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "src", "main", "scala", "com", "twitter", "finagle", "benchmark", "TaskTrackingTimer", "NUMBER", "scala", "NUMBER", "not", "find", "type", "TaskTrackingTimer", "error", "val", "timer", "new", "TaskTrackingTimer", "new", "FakeTimer", "error", "error", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "src", "main", "scala", "com", "twitter", "finagle", "benchmark", "TaskTrackingTimer", "NUMBER", "scala", "NUMBER", "not", "find", "type", "CountingTimer", "error", "val", "timer", "new", "CountingTimer", "new", "FakeTimer", "error", "error", "three", "error", "find", "error", "file", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "compile", "compile", "Compilation", "fail", "error", "Total", "time", "NUMBER", "s", "completed", "Aug", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Those", "classes", "were", "remove", "and", "that", "file", "was", "delete", "but", "maybe", "not", "propagated", "yet", "NUMBER", "Feel", "free", "to", "ignore", "it", "NUMBER", "Sorry", "On", "Thu", "Aug", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Matt", "Brown", "notifications", "github", "NUMBER", "comwrote", "Hi", "when", "I", "try", "to", "compile", "the", "whole", "project", "or", "just", "finagle", "benchmark", "on", "it", "s", "own", "I", "get", "the", "following", "error", "in", "TaskTrackingtimer", "NUMBER", "scala", "because", "neither", "of", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "NUMBER", "CountingTimer", "TaskTrackingTimer", "can", "be", "find", "NUMBER", "error", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "src", "main", "scala", "com", "twitter", "finagle", "benchmark", "TaskTrackingTimer", "NUMBER", "scala", "NUMBER", "CountingTimer", "be", "not", "a", "member", "of", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "error", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "NUMBER", "CountingTimer", "TaskTrackingTimer", "error", "error", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "src", "main", "scala", "com", "twitter", "finagle", "benchmark", "TaskTrackingTimer", "NUMBER", "scala", "NUMBER", "not", "find", "type", "TaskTrackingTimer", "error", "val", "timer", "new", "TaskTrackingTimer", "new", "FakeTimer", "error", "error", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "src", "main", "scala", "com", "twitter", "finagle", "benchmark", "TaskTrackingTimer", "NUMBER", "scala", "NUMBER", "not", "find", "type", "CountingTimer", "error", "val", "timer", "new", "CountingTimer", "new", "FakeTimer", "error", "error", "three", "error", "find", "error", "file", "Users", "matt", "NUMBER", "brown", "oss_projects", "finagle", "finagle", "benchmark", "compile", "compile", "Compilation", "fail", "error", "Total", "time", "NUMBER", "s", "completed", "Aug", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "thanks", "for", "the", "fast", "turnaround", "error", "all", "gone", "now", "NUMBER", "I", "would", "like", "to", "see", "benchmarks", "against", "the", "normal", "MySQL", "driver", "as", "part", "of", "this", "effort", "NUMBER", "For", "performance", "memory", "usage", "and", "CPU", "usage", "NUMBER", "val", "sever", "ServerBuilder", "NUMBER", "codec", "MessageCodec", "NUMBER", "bindTo", "new", "InetSocketAddress", "port", "NUMBER", "name", "Server", "NUMBER", "build", "service", "If", "Server", "MessageCodec", "throw", "exception", "how", "can", "i", "return", "the", "exception", "to", "the", "client", "I", "saw", "Redis", "was", "remove", "on", "June", "NUMBER", "NUMBER", "I", "m", "not", "sure", "why", "as", "the", "commit", "message", "wasn", "t", "forthcoming", "NUMBER", "This", "add", "it", "back", "and", "tidies", "up", "some", "loose", "whitespace", "in", "Build", "NUMBER", "scala", "NUMBER", "We", "made", "a", "couple", "of", "improvement", "based", "on", "our", "experience", "use", "the", "protobuf", "based", "RPC", "in", "production", "NUMBER", "Hey", "Marius", "I", "notice", "one", "of", "your", "comments", "in", "the", "finagle", "protobuf", "module", "finagle", "protobuf", "kill", "POM", "seems", "defunct", "NUMBER", "LINK", "NUMBER", "We", "have", "be", "use", "this", "protocol", "in", "production", "for", "months", "and", "it", "has", "be", "work", "great", "for", "us", "and", "we", "did", "not", "need", "to", "make", "any", "update", "NUMBER", "The", "one", "thing", "I", "will", "need", "to", "add", "be", "a", "better", "wiki", "page", "NUMBER", "George", "On", "Fri", "Jul", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "marius", "a", "NUMBER", "eriksen", "TAG", "write", "hey", "George", "I", "m", "currently", "on", "vacation", "and", "will", "have", "a", "look", "when", "I", "get", "back", "in", "NUMBER", "week", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Hi", "Marius", "What", "s", "the", "status", "of", "your", "efforts", "around", "generalizing", "finagle", "thrift", "i", "NUMBER", "e", "NUMBER", "finagle", "rpc", "Thanks", "Mark", "This", "be", "do", "finagle", "mux", "LINK", "mux", "src", "main", "scala", "com", "twitter", "finagle", "mux", "package", "NUMBER", "scala", "NUMBER", "As", "an", "example", "of", "adapting", "Mux", "to", "Thrift", "see", "finagle", "thriftmux", "LINK", "thriftmux", "src", "main", "scala", "com", "twitter", "finagle", "mariusaeriksen", "we", "definitely", "want", "to", "keep", "in", "step", "with", "the", "framework", "let", "me", "see", "how", "I", "can", "slip", "this", "into", "our", "backlog", "NUMBER", "Thanks", "for", "the", "heads", "up", "NUMBER", "Check", "to", "see", "what", "version", "of", "OpenSSL", "the", "openssl", "version", "subcommand", "returns", "then", "trim", "the", "output", "if", "necessary", "NUMBER", "I", "had", "MacPorts", "OpenSSL", "in", "the", "path", "which", "be", "version", "NUMBER", "c", "and", "the", "output", "from", "its", "md", "NUMBER", "be", "different", "than", "the", "one", "in", "usr", "bin", "openssl", "usr", "bin", "openssl", "md", "NUMBER", "TAG", "I", "ve", "pull", "this", "internally", "should", "make", "it", "out", "here", "within", "the", "day", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Redis", "support", "NUMBER", "bit", "sign", "integers", "as", "stated", "in", "the", "docs", "e", "NUMBER", "g", "NUMBER", "for", "the", "INCRBY", "command", "LINK", "and", "so", "Redis", "integers", "should", "be", "represented", "by", "Long", "rather", "than", "Int", "NUMBER", "Here", "be", "an", "example", "of", "a", "Redis", "exchange", "that", "be", "currently", "not", "possible", "use", "the", "finagle", "redis", "client", "redis", "NUMBER", "NUMBER", "SET", "foo", "NUMBER", "OK", "redis", "NUMBER", "NUMBER", "INCRBY", "foo", "NUMBER", "integer", "NUMBER", "In", "order", "to", "support", "this", "I", "ve", "switched", "from", "Int", "to", "Long", "in", "the", "following", "places", "INCRBY", "DECRBY", "command", "argument", "Integer", "replies", "Unfortunately", "this", "switch", "from", "Int", "to", "Long", "means", "a", "breaking", "change", "in", "the", "API", "but", "it", "should", "be", "very", "easy", "for", "users", "to", "fix", "their", "client", "code", "NUMBER", "Thanks", "I", "just", "notice", "that", "this", "was", "not", "actually", "merge", "in", "NUMBER", "Was", "this", "a", "deliberate", "decision", "should", "I", "fix", "something", "or", "did", "it", "just", "slip", "through", "the", "cracks", "OK", "thanks", "for", "the", "update", "NUMBER", "Don", "t", "worry", "no", "rush", "libraryDependencies", "com", "NUMBER", "twitter", "finagle", "NUMBER", "when", "execute", "build", "val", "client", "ClientBuilder", "NUMBER", "codec", "Http", "NUMBER", "get", "NUMBER", "hosts", "address", "NUMBER", "hostConnectionLimit", "NUMBER", "NUMBER", "build", "Exception", "in", "thread", "main", "java", "NUMBER", "lang", "NUMBER", "NoSuchMethodError", "scala", "NUMBER", "collection", "NUMBER", "mutable", "NUMBER", "Queue", "NUMBER", "apply", "Lscala", "collection", "Seq", "Lscala", "collection", "mutable", "Queue", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "Cluster", "anon", "NUMBER", "anonfun", "NUMBER", "anonfun", "NUMBER", "apply", "Cluster", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "Cluster", "anon", "NUMBER", "anonfun", "NUMBER", "anonfun", "NUMBER", "apply", "Cluster", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "mutable", "NUMBER", "MapLike", "class", "NUMBER", "getOrElseUpdate", "MapLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "mutable", "NUMBER", "HashMap", "NUMBER", "getOrElseUpdate", "HashMap", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "Cluster", "anon", "NUMBER", "anonfun", "NUMBER", "apply", "Cluster", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "anonfun", "map", "NUMBER", "apply", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "anonfun", "map", "NUMBER", "apply", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "LinearSeqOptimized", "class", "NUMBER", "foreach", "LinearSeqOptimized", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "immutable", "NUMBER", "List", "NUMBER", "foreach", "List", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "class", "NUMBER", "map", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "immutable", "NUMBER", "List", "NUMBER", "map", "List", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "Cluster", "anon", "NUMBER", "snap", "Cluster", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "loadbalancer", "NUMBER", "HeapBalancer", "NUMBER", "TAG", "HeapBalancer", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "anon", "NUMBER", "TAG", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "internalBuildFactory", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "build", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "qileke", "NUMBER", "finagle", "NUMBER", "basic", "NUMBER", "SimpleHttpClient", "NUMBER", "main", "SimpleHttpClient", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "qileke", "NUMBER", "finagle", "NUMBER", "basic", "NUMBER", "SimpleHttpClient", "NUMBER", "main", "SimpleHttpClient", "NUMBER", "scala", "Which", "version", "of", "scala", "be", "you", "project", "use", "NUMBER", "test", "environments", "windows", "NUMBER", "NUMBER", "java", "version", "NUMBER", "_", "NUMBER", "NUMBER", "scala", "version", "NUMBER", "NUMBER", "NUMBER", "Ubuntu", "NUMBER", "NUMBER", "java", "version", "NUMBER", "_", "NUMBER", "NUMBER", "scala", "version", "NUMBER", "NUMBER", "NUMBER", "thank", "you", "Fix", "for", "issue", "NUMBER", "That", "be", "a", "much", "simpler", "solution", "to", "the", "main", "problem", "NUMBER", "I", "ve", "update", "the", "pull", "request", "to", "use", "it", "NUMBER", "See", "above", "commit", "for", "deterministic", "test", "NUMBER", "Is", "this", "a", "reasonable", "approach", "I", "don", "t", "know", "what", "you", "mean", "by", "JUnit", "style", "unittests", "NUMBER", "Can", "you", "point", "me", "to", "an", "example", "in", "Finagle", "I", "should", "emulate", "Should", "I", "just", "switch", "superclass", "to", "org", "NUMBER", "specs", "NUMBER", "SpecificationWithJUnit", "Also", "should", "I", "remove", "the", "additional", "case", "in", "EndToEndSpec", "I", "ve", "made", "those", "change", "and", "merge", "in", "master", "NUMBER", "I", "m", "assuming", "it", "s", "ready", "for", "merge", "I", "ve", "also", "rebased", "these", "change", "to", "LINK", "Pick", "your", "poison", "on", "which", "one", "you", "d", "like", "NUMBER", "Yes", "it", "looks", "like", "I", "forgot", "to", "add", "it", "NUMBER", "Sorry", "about", "that", "one", "NUMBER", "I", "was", "switching", "between", "SBT", "NUMBER", "and", "NUMBER", "branch", "so", "it", "get", "lost", "in", "the", "confusion", "NUMBER", "In", "some", "cases", "HttpDechunker", "sends", "an", "EOF", "before", "it", "has", "finished", "write", "the", "all", "chunks", "to", "StreamResponse", "message", "NUMBER", "This", "be", "because", "in", "HttpDechunker", "NUMBER", "scala", "L", "NUMBER", "when", "chunk", "NUMBER", "readable", "be", "false", "the", "sendOf", "offer", "be", "set", "to", "Offer", "NUMBER", "const", "NUMBER", "In", "L", "NUMBER", "this", "offer", "be", "synchronized", "on", "in", "order", "to", "send", "EOF", "message", "only", "after", "it", "s", "finished", "NUMBER", "However", "when", "chunk", "NUMBER", "readable", "be", "false", "an", "EOF", "be", "sent", "immediately", "irrespective", "of", "any", "other", "chunks", "that", "haven", "t", "be", "read", "NUMBER", "I", "did", "as", "the", "following", "commands", "but", "get", "the", "compile", "error", "NUMBER", "git", "clone", "LINK", "cd", "finagle", "NUMBER", "sbt", "update", "compile", "error", "Users", "zhang", "Projects", "scala", "finagle", "finagle", "core", "src", "main", "scala", "com", "twitter", "finagle", "dispatch", "ClientDispatcher", "NUMBER", "scala", "NUMBER", "AsyncQueue", "be", "not", "a", "member", "of", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "error", "import", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "NUMBER", "AsyncQueue", "error", "error", "Users", "zhang", "Projects", "scala", "finagle", "finagle", "core", "src", "main", "scala", "com", "twitter", "finagle", "dispatch", "ClientDispatcher", "NUMBER", "scala", "NUMBER", "not", "find", "type", "AsyncQueue", "error", "private", "this", "val", "dispatchq", "new", "AsyncQueue", "Req", "Promise", "Rep", "error", "error", "Users", "zhang", "Projects", "scala", "finagle", "finagle", "core", "src", "main", "scala", "com", "twitter", "finagle", "transport", "ChannelTransport", "NUMBER", "scala", "NUMBER", "AsyncQueue", "be", "not", "a", "member", "of", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "error", "import", "com", "NUMBER", "twitter", "NUMBER", "concurrent", "NUMBER", "AsyncQueue", "error", "error", "Users", "zhang", "Projects", "scala", "finagle", "finagle", "core", "src", "main", "scala", "com", "twitter", "finagle", "transport", "ChannelTransport", "NUMBER", "scala", "NUMBER", "not", "find", "type", "AsyncQueue", "error", "private", "this", "val", "readq", "new", "AsyncQueue", "Out", "error", "I", "find", "the", "AsyncQueue", "class", "at", "LINK", "core", "src", "main", "scala", "com", "twitter", "concurrent", "AsyncQueue", "NUMBER", "scala", "What", "should", "I", "do", "to", "solve", "the", "problem", "or", "I", "downed", "the", "wrong", "branch", "I", "be", "also", "run", "into", "this", "compile", "error", "NUMBER", "Is", "there", "a", "specific", "tag", "or", "branch", "to", "checkout", "to", "build", "a", "work", "release", "I", "be", "also", "facing", "the", "same", "issue", "NUMBER", "Any", "idea", "when", "this", "will", "be", "fix", "NUMBER", "Thanks", "for", "looking", "into", "this", "NUMBER", "Thus", "if", "you", "simply", "proxy", "StreamResponses", "from", "a", "server", "to", "a", "service", "the", "client", "pool", "will", "become", "exhausted", "NUMBER", "This", "be", "different", "from", "the", "semantics", "of", "every", "other", "type", "of", "Request", "Response", "pair", "NUMBER", "Here", "s", "an", "example", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ream", "NUMBER", "Stream", "StreamResponse", "import", "java", "NUMBER", "net", "NUMBER", "URL", "InetSocketAddress", "import", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Future", "import", "com", "NUMBER", "twitter", "NUMBER", "conversions", "NUMBER", "time", "NUMBER", "_", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "Service", "ServiceFactory", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerBuilder", "Server", "ClientBuilder", "import", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "handler", "NUMBER", "codec", "NUMBER", "http", "NUMBER", "_", "object", "Proxy", "def", "main", "args", "Array", "String", "class", "Respond", "extend", "Service", "HttpRequest", "StreamResponse", "def", "apply", "request", "HttpRequest", "download", "request", "NUMBER", "getUri", "val", "service", "new", "Respond", "ServerBuilder", "NUMBER", "codec", "Stream", "NUMBER", "server", "NUMBER", "bindTo", "new", "InetSocketAddress", "NUMBER", "NUMBER", "name", "httpserver", "NUMBER", "build", "service", "val", "host", "www", "NUMBER", "fbi", "NUMBER", "gov", "val", "port", "NUMBER", "val", "clientFactory", "ServiceFactory", "HttpRequest", "StreamResponse", "ClientBuilder", "NUMBER", "codec", "Stream", "NUMBER", "client", "NUMBER", "hosts", "new", "InetSocketAddress", "host", "port", "NUMBER", "hostConnectionLimit", "NUMBER", "NUMBER", "tcpConnectTimeout", "NUMBER", "seconds", "NUMBER", "buildFactory", "def", "client", "clientFactory", "def", "download", "path", "String", "Future", "StreamResponse", "println", "path", "val", "request", "new", "DefaultHttpRequest", "HttpVersion", "NUMBER", "HTTP_", "NUMBER", "_", "NUMBER", "HttpMethod", "NUMBER", "GET", "path", "request", "NUMBER", "setHeader", "Host", "host", "clientFactory", "flatMap", "_", "request", "Run", "ab", "n", "NUMBER", "c", "NUMBER", "LINK", "to", "see", "it", "break", "NUMBER", "Please", "let", "me", "know", "if", "there", "be", "a", "better", "venue", "to", "discuss", "this", "If", "that", "s", "the", "case", "perhaps", "you", "can", "offer", "a", "suggestion", "on", "how", "to", "better", "solve", "our", "problem", "We", "re", "use", "Finagle", "as", "a", "proxy", "server", "between", "slow", "clients", "and", "a", "relatively", "fast", "S", "NUMBER", "backend", "NUMBER", "Using", "the", "non", "streaming", "HTTP", "client", "can", "use", "an", "unreasonable", "amount", "of", "memory", "waiting", "for", "clients", "NUMBER", "As", "far", "as", "I", "can", "tell", "from", "examples", "most", "other", "codecs", "simply", "let", "you", "compose", "a", "Server", "and", "a", "Service", "in", "order", "to", "have", "a", "transparent", "proxy", "NUMBER", "A", "Service", "close", "the", "socket", "immediately", "after", "the", "response", "be", "formed", "thus", "stopping", "the", "delivery", "of", "any", "further", "chunks", "NUMBER", "Thus", "we", "use", "ServiceFactory", "since", "we", "need", "to", "keep", "the", "stream", "open", "until", "release", "be", "call", "NUMBER", "However", "the", "factory", "runs", "out", "of", "slots", "since", "when", "the", "Server", "calls", "release", "on", "the", "StreamResponse", "the", "client", "doesn", "t", "get", "release", "NUMBER", "Here", "s", "our", "stopgap", "solution", "object", "StreamClosingFilter", "extend", "Filter", "HttpRequest", "StreamResponse", "HttpRequest", "StreamResponse", "def", "apply", "request", "HttpRequest", "service", "Service", "HttpRequest", "StreamResponse", "service", "request", "map", "response", "new", "StreamResponse", "def", "httpResponse", "response", "NUMBER", "httpResponse", "def", "message", "response", "NUMBER", "message", "def", "error", "response", "NUMBER", "error", "def", "release", "service", "NUMBER", "release", "response", "NUMBER", "release", "This", "fix", "our", "issue", "but", "seems", "kludgy", "and", "be", "tied", "to", "the", "StreamResponse", "interface", "NUMBER", "What", "other", "solutions", "would", "you", "propose", "Thanks", "for", "the", "explanation", "and", "for", "push", "the", "fix", "NUMBER", "NUMBER", "with", "synchronized", "toList", "NUMBER", "Relevant", "test", "pass", "NUMBER", "Unsure", "of", "performance", "implications", "but", "do", "we", "care", "how", "fast", "this", "will", "be", "Also", "I", "have", "no", "idea", "how", "to", "test", "this", "NUMBER", "Added", "auth", "method", "to", "finagle", "redis", "library", "NUMBER", "Authentication", "be", "required", "to", "use", "Redis", "to", "Go", "on", "heroku", "NUMBER", "This", "error", "occur", "in", "Finagle", "NUMBER", "in", "Scala", "NUMBER", "There", "appears", "to", "be", "a", "race", "condition", "NUMBER", "I", "ve", "only", "seen", "it", "once", "but", "here", "s", "the", "relevant", "portion", "of", "the", "stack", "trace", "NullPointerException", "null", "ServerBuilder", "NUMBER", "scala", "NUMBER", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "MkServer", "anon", "NUMBER", "anonfun", "close", "NUMBER", "apply", "ServerBuilder", "NUMBER", "scala", "NUMBER", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "MkServer", "anon", "NUMBER", "anonfun", "close", "NUMBER", "apply", "ServerBuilder", "NUMBER", "scala", "NUMBER", "scala", "NUMBER", "collection", "NUMBER", "IndexedSeqOptimized", "class", "NUMBER", "foreach", "IndexedSeqOptimized", "NUMBER", "scala", "NUMBER", "scala", "NUMBER", "collection", "NUMBER", "mutable", "NUMBER", "ArrayOps", "NUMBER", "foreach", "ArrayOps", "NUMBER", "scala", "NUMBER", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "MkServer", "anon", "NUMBER", "close", "ServerBuilder", "NUMBER", "scala", "NUMBER", "It", "appears", "that", "activeHandlers", "NUMBER", "toArray", "returns", "an", "Array", "that", "contains", "a", "null", "NUMBER", "I", "assume", "there", "be", "a", "race", "between", "activeHandlers", "channelHandler", "in", "L", "NUMBER", "and", "toArray", "NUMBER", "It", "appears", "that", "neither", "toArray", "nor", "copyToArray", "be", "synchronized", "in", "SynchronizedSet", "NUMBER", "Replacing", "this", "with", "either", "toList", "which", "be", "synchronized", "or", "manually", "synchronizing", "on", "activeHandlers", "should", "address", "this", "issue", "NUMBER", "I", "have", "a", "fix", "above", "NUMBER", "Feel", "totally", "free", "to", "use", "it", "or", "throw", "it", "out", "if", "it", "s", "not", "appropriate", "NUMBER", "I", "m", "curious", "how", "one", "would", "go", "about", "test", "this", "NUMBER", "Several", "examples", "use", "e", "NUMBER", "g", "NUMBER", "responseFuture", "NUMBER", "within", "NUMBER", "second", "NUMBER", "This", "method", "doesn", "t", "exist", "in", "later", "version", "of", "Finagle", "NUMBER", "as", "far", "as", "I", "can", "tell", "NUMBER", "The", "only", "thing", "analogous", "I", "can", "find", "it", "Future", "NUMBER", "within", "Duration", "Timer", "NUMBER", "This", "code", "no", "longer", "completes", "LINK", "It", "s", "like", "the", "Future", "never", "fires", "NUMBER", "I", "have", "it", "set", "up", "in", "a", "test", "project", "where", "I", "can", "switch", "between", "NUMBER", "and", "NUMBER", "and", "it", "fail", "NUMBER", "Thanks", "for", "looking", "into", "it", "NUMBER", "Like", "I", "said", "I", "can", "reproduce", "it", "in", "my", "project", "as", "soon", "as", "I", "switch", "my", "dependencies", "in", "build", "NUMBER", "sbt", "from", "NUMBER", "to", "NUMBER", "and", "see", "it", "work", "when", "I", "move", "back", "to", "NUMBER", "Same", "code", "and", "in", "my", "case", "it", "hangs", "forever", "NUMBER", "_", "What", "confuses", "me", "about", "it", "be", "intermittent", "be", "that", "the", "manual", "HTTP", "request", "works", "every", "time", "NUMBER", "Expose", "max", "initial", "line", "length", "and", "header", "size", "so", "they", "be", "configurable", "NUMBER", "Currently", "when", "tls", "hostname", "be", "call", "the", "SSLContext", "for", "the", "default", "jsse", "truststore", "cacerts", "be", "created", "on", "a", "per", "request", "basis", "NUMBER", "This", "seems", "like", "overhead", "as", "a", "new", "SSLContext", "means", "that", "cacerts", "be", "reread", "and", "a", "SecureRandom", "created", "for", "each", "ssl", "https", "call", "NUMBER", "Therefore", "I", "ve", "made", "a", "change", "so", "that", "only", "the", "first", "call", "to", "JSSE", "NUMBER", "client", "creates", "the", "SSLContext", "all", "subsequent", "calls", "just", "create", "the", "SSLEngine", "from", "that", "precreated", "default", "SSLContext", "NUMBER", "Hi", "there", "Sorry", "about", "the", "format", "do", "NUMBER", "d", "NUMBER", "c", "NUMBER", "bc", "look", "any", "better", "Cheers", "dom", "A", "coworker", "point", "out", "that", "I", "had", "misread", "the", "sorted", "sets", "spec", "and", "implement", "them", "use", "float", "s", "instead", "of", "double", "s", "NUMBER", "This", "commit", "refactors", "the", "sorted", "set", "commands", "to", "use", "a", "double", "instead", "of", "a", "float", "NUMBER", "Additionally", "there", "was", "a", "warning", "about", "a", "case", "class", "constructor", "without", "a", "parameter", "list", "FlushDB", "which", "was", "fix", "NUMBER", "I", "ve", "created", "an", "empty", "SBT", "project", "that", "lists", "finagle", "as", "a", "library", "dependency", "pulling", "from", "maven", "NUMBER", "twttr", "NUMBER", "com", "sbt", "compile", "fail", "with", "the", "following", "abbreviated", "output", "info", "Loading", "project", "definition", "from", "Users", "ben", "scala", "test", "project", "warn", "warn", "UNRESOLVED", "DEPENDENCIES", "warn", "warn", "com", "NUMBER", "codahale", "jerkson_", "NUMBER", "NUMBER", "not", "find", "warn", "error", "file", "Users", "ben", "scala", "test", "default", "c", "NUMBER", "c", "NUMBER", "update", "sbt", "NUMBER", "ResolveException", "unresolve", "dependency", "com", "NUMBER", "codahale", "jerkson_", "NUMBER", "NUMBER", "not", "find", "error", "Total", "time", "NUMBER", "s", "completed", "Mar", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "AM", "It", "seems", "that", "finagle", "exception", "hardcodes", "a", "dependency", "on", "jerkson_", "NUMBER", "in", "the", "NUMBER", "repo", "which", "cannot", "be", "resolve", "NUMBER", "Though", "it", "doesn", "t", "appear", "in", "the", "above", "output", "this", "also", "applies", "to", "thrift", "NUMBER", "I", "ve", "worked", "around", "that", "with", "some", "hackery", "in", "libraryDependencies", "NUMBER", "Dear", "Benjamin", "could", "you", "share", "your", "hackery", "I", "d", "really", "need", "it", "NUMBER", "Thanks", "If", "you", "d", "like", "to", "to", "get", "a", "Scala", "NUMBER", "SBT", "NUMBER", "Thrift", "NUMBER", "Finagle", "NUMBER", "stack", "a", "work", "example", "be", "in", "the", "README", "here", "LINK", "scrooge", "tree", "sbt", "NUMBER", "info", "Resolving", "thrift", "libthrift", "NUMBER", "NUMBER", "warn", "module", "not", "find", "thrift", "libthrift", "NUMBER", "warn", "local", "tried", "warn", "Users", "devin", "NUMBER", "ivy", "NUMBER", "local", "thrift", "libthrift", "NUMBER", "ivys", "ivy", "NUMBER", "xml", "warn", "twitter", "repo", "tried", "warn", "LINK", "NUMBER", "pom", "warn", "public", "tried", "warn", "LINK", "NUMBER", "pom", "warn", "Scala", "Tools", "Maven", "NUMBER", "Repository", "tried", "warn", "LINK", "tool", "NUMBER", "org", "repo", "release", "thrift", "libthrift", "NUMBER", "libthrift", "NUMBER", "pom", "warn", "warn", "UNRESOLVED", "DEPENDENCIES", "warn", "warn", "thrift", "libthrift", "NUMBER", "not", "find", "warn", "Added", "to", "the", "ClientBuilder", "the", "ability", "to", "specify", "the", "Engine", "to", "use", "so", "a", "client", "can", "create", "an", "SSLContext", "with", "client", "certs", "if", "they", "wish", "i", "NUMBER", "e", "NUMBER", "TAG", "val", "ctx", "SSLContext", "NUMBER", "getInstance", "TLS", "NUMBER", "ctx", "NUMBER", "init", "keyManagerFactory", "NUMBER", "getKeyManagers", "trustManagers", "sr", "NUMBER", "NUMBER", "cb", "NUMBER", "tls", "new", "Engine", "ctx", "NUMBER", "createSSLEngine", "or", "cb", "NUMBER", "tls", "new", "Engine", "ctx", "NUMBER", "createSSLEngine", "Option", "www", "NUMBER", "xxx", "NUMBER", "com", "TAG", "SSL", "contexts", "shouldn", "t", "be", "reused", "across", "connections", "see", "ed", "NUMBER", "efcd", "NUMBER", "So", "it", "s", "probably", "more", "appropriate", "to", "pass", "in", "factories", "directly", "NUMBER", "Ah", "yes", "NUMBER", "Isn", "t", "it", "the", "SSLEngine", "that", "can", "t", "be", "reused", "rather", "than", "the", "SSLContext", "itself", "though", "I", "ve", "update", "the", "request", "with", "a", "NUMBER", "aecb", "so", "that", "the", "SSLEngine", "be", "created", "each", "time", "from", "the", "SSLContext", "pass", "to", "the", "ClientBuilder", "NUMBER", "We", "write", "a", "Protobuf", "Codec", "what", "allows", "Finagle", "to", "be", "use", "for", "developing", "Protobuf", "based", "RPC", "services", "NUMBER", "These", "be", "good", "thoughts", "thank", "you", "NUMBER", "We", "will", "continue", "to", "contribute", "our", "improvement", "and", "welcome", "suggestions", "NUMBER", "On", "Wed", "Feb", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "marius", "a", "NUMBER", "eriksen", "reply", "reply", "NUMBER", "github", "NUMBER", "com", "write", "Is", "this", "particular", "protocol", "code", "NUMBER", "length", "NUMBER", "message", "use", "by", "somebody", "else", "or", "be", "it", "your", "own", "If", "not", "it", "would", "be", "nice", "to", "build", "more", "room", "for", "extensibility", "eg", "NUMBER", "to", "ship", "trace", "ids", "from", "the", "start", "NUMBER", "In", "thrift", "we", "do", "an", "upgrade", "dance", "but", "that", "s", "only", "to", "maintain", "backwards", "compatibility", "NUMBER", "Also", "it", "would", "be", "nice", "to", "build", "a", "protobuf", "compiler", "plugin", "to", "generate", "Future", "full", "bindings", "as", "well", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Marius", "When", "Google", "open", "sourced", "Protobuf", "they", "did", "not", "also", "open", "source", "the", "RPC", "protocol", "they", "use", "internally", "they", "apparently", "considered", "it", "to", "be", "a", "competitive", "advantage", "NUMBER", "There", "be", "quite", "a", "few", "attempts", "to", "do", "RPC", "with", "protobuf", "LINK", "but", "none", "of", "them", "has", "the", "elegance", "of", "the", "Finagle", "framework", "so", "we", "start", "creating", "a", "protocol", "for", "it", "NUMBER", "I", "be", "definitely", "open", "to", "suggestions", "others", "learned", "from", "Thrift", "that", "we", "can", "apply", "to", "create", "a", "reasonably", "good", "Protobuf", "based", "protocol", "NUMBER", "Of", "course", "I", "would", "like", "to", "move", "relatively", "fast", "to", "add", "the", "minimum", "to", "make", "it", "extensible", "so", "that", "others", "can", "start", "use", "it", "and", "contribute", "NUMBER", "Please", "let", "me", "know", "what", "you", "think", "the", "next", "steps", "should", "be", "NUMBER", "Thanks", "George", "On", "Fri", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "marius", "a", "NUMBER", "eriksen", "reply", "reply", "NUMBER", "github", "NUMBER", "com", "write", "I", "want", "to", "merge", "this", "but", "we", "need", "to", "put", "some", "more", "work", "in", "NUMBER", "My", "biggest", "concern", "so", "far", "be", "the", "actual", "protocol", "do", "it", "comply", "to", "some", "other", "widely", "use", "one", "or", "be", "it", "a", "custom", "one", "of", "yours", "If", "it", "s", "a", "custom", "one", "I", "think", "we", "should", "figure", "out", "a", "way", "to", "make", "it", "more", "extensible", "for", "features", "like", "tracing", "NUMBER", "I", "m", "willing", "to", "merge", "this", "in", "so", "that", "we", "can", "work", "on", "it", "but", "without", "publishing", "it", "yet", "NUMBER", "How", "do", "that", "sound", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "That", "s", "great", "Markus", "I", "just", "joined", "the", "finaglers", "google", "group", "NUMBER", "I", "look", "forward", "to", "your", "suggestions", "NUMBER", "Have", "a", "good", "weekend", "NUMBER", "George", "On", "Fri", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "marius", "a", "NUMBER", "eriksen", "reply", "reply", "NUMBER", "github", "NUMBER", "com", "write", "It", "s", "merge", "I", "ll", "write", "my", "thoughts", "about", "a", "protocol", "in", "an", "email", "NUMBER", "Are", "you", "subscribed", "to", "the", "finaglers", "group", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Hi", "Marius", "I", "sent", "a", "pull", "request", "for", "update", "on", "finagle", "protobuf", "NUMBER", "Also", "I", "moved", "the", "repo", "to", "the", "Tendril", "s", "company", "account", "NUMBER", "We", "re", "pretty", "happy", "with", "Finagle", "thus", "far", "and", "we", "ll", "add", "support", "for", "tracing", "rather", "soon", "NUMBER", "We", "also", "have", "a", "implementation", "for", "Serversets", "based", "on", "Netflix", "x", "discovery", "and", "ZooKeeper", "that", "has", "no", "dependencies", "on", "Thrift", "but", "I", "m", "not", "sure", "if", "that", "fits", "inside", "Finagle", "NUMBER", "Thanks", "George", "On", "Fri", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "marius", "a", "NUMBER", "eriksen", "TAG", "write", "It", "s", "merge", "I", "ll", "write", "my", "thoughts", "about", "a", "protocol", "in", "an", "email", "NUMBER", "Are", "you", "subscribed", "to", "the", "finaglers", "group", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Connection", "to", "LINK", "refused", "Connection", "timed", "out", "NUMBER", "will", "publish", "to", "LINK", "I", "can", "see", "Finagle", "XXX", "NUMBER", "pom", "point", "LINK", "but", "jars", "file", "in", "LINK", "please", "update", "sbt", "update", "sbt", "compile", "all", "can", "pass", "NUMBER", "but", "sbt", "test", "have", "this", "error", "error", "Error", "run", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "http", "NUMBER", "filter", "NUMBER", "LoggingFilterSpec", "Test", "FAILED", "why", "don", "t", "fiex", "this", "issue", "only", "one", "test", "error", "can", "t", "package", "finagle", "http", "First", "I", "install", "sbt", "from", "brew", "NUMBER", "build", "fail", "like", "this", "friend", "issue", "NUMBER", "I", "install", "sbt", "NUMBER", "and", "NUMBER", "build", "fail", "NUMBER", "Project", "properties", "NUMBER", "Mon", "Feb", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PST", "NUMBER", "NUMBER", "project", "NUMBER", "organization", "com", "NUMBER", "twitter", "NUMBER", "project", "NUMBER", "name", "finagle", "NUMBER", "sbt", "NUMBER", "version", "NUMBER", "NUMBER", "project", "NUMBER", "version", "NUMBER", "SNAPSHOT", "NUMBER", "build", "NUMBER", "scala", "NUMBER", "version", "NUMBER", "NUMBER", "project", "NUMBER", "initialize", "false", "message", "org", "NUMBER", "scala", "tool", "NUMBER", "test", "specs_", "NUMBER", "NUMBER", "not", "find", "i", "must", "install", "scale", "later", "NUMBER", "For", "the", "code", "you", "have", "above", "you", "must", "change", "your", "Scala", "version", "to", "NUMBER", "If", "you", "d", "like", "to", "to", "get", "a", "Scala", "NUMBER", "SBT", "NUMBER", "Thrift", "NUMBER", "Finagle", "NUMBER", "stack", "a", "work", "example", "be", "in", "the", "README", "here", "LINK", "scrooge", "tree", "sbt", "NUMBER", "Fixed", "a", "typo", "in", "the", "Codec", "Objects", "section", "HTTP", "chunked", "streaming", "ala", "Twitter", "Streaming", "TAG", "prptocols", "TAG", "There", "be", "my", "test", "code", "NUMBER", "A", "simple", "proxy", "example", "EchoServer", "object", "EchoServer", "def", "main", "args", "Array", "String", "val", "service", "new", "Service", "String", "String", "def", "apply", "request", "String", "println", "I", "m", "server", "I", "received", "request", "message", "request", "Future", "NUMBER", "value", "I", "m", "server", "NUMBER", "Where", "be", "you", "from", "val", "server", "Server", "ServerBuilder", "NUMBER", "codec", "StringCodec", "NUMBER", "bindTo", "new", "InetSocketAddress", "NUMBER", "NUMBER", "name", "Server", "NUMBER", "build", "service", "EchoRouter", "object", "EchoRouter", "def", "main", "args", "Array", "String", "val", "client", "Service", "String", "String", "ClientBuilder", "NUMBER", "codec", "StringCodec", "NUMBER", "hosts", "new", "InetSocketAddress", "NUMBER", "NUMBER", "hostConnectionLimit", "NUMBER", "NUMBER", "requestTimeout", "Duration", "NUMBER", "TimeUnit", "NUMBER", "SECONDS", "NUMBER", "retries", "NUMBER", "NUMBER", "build", "val", "proxyService", "new", "Service", "String", "String", "def", "apply", "request", "String", "println", "I", "m", "router", "I", "received", "request", "message", "request", "client", "request", "NUMBER", "onSuccess", "result", "println", "Router", "received", "result", "asynchronously", "result", "onFailure", "error", "error", "NUMBER", "printStackTrace", "val", "server", "Server", "ServerBuilder", "NUMBER", "codec", "StringCodec", "NUMBER", "bindTo", "new", "InetSocketAddress", "NUMBER", "NUMBER", "name", "Router", "NUMBER", "build", "proxyService", "EchoClient", "object", "EchoClient", "def", "main", "args", "Array", "String", "val", "client", "Service", "String", "String", "ClientBuilder", "NUMBER", "codec", "StringCodec", "NUMBER", "hosts", "new", "InetSocketAddress", "NUMBER", "NUMBER", "hostConnectionLimit", "NUMBER", "NUMBER", "requestTimeout", "Duration", "NUMBER", "TimeUnit", "NUMBER", "SECONDS", "NUMBER", "retries", "NUMBER", "NUMBER", "build", "client", "Hi", "I", "m", "client", "NUMBER", "n", "NUMBER", "onSuccess", "result", "println", "Client", "received", "result", "asynchronously", "result", "onFailure", "error", "error", "NUMBER", "printStackTrace", "ensure", "client", "NUMBER", "release", "The", "problem", "be", "the", "EchoRouter", "can", "receive", "the", "message", "But", "the", "EchoServer", "can", "t", "receive", "the", "message", "NUMBER", "Is", "there", "any", "mistake", "i", "made", "Can", "someone", "help", "me", "Here", "be", "version", "information", "NUMBER", "scala", "version", "NUMBER", "finagle", "core_", "NUMBER", "version", "NUMBER", "Thank", "you", "marlus", "NUMBER", "i", "create", "a", "project", "following", "the", "link", "LINK", "NUMBER", "NUMBER", "scala", "plus", "sbt", "plus", "finagle", "plus", "scalatest", "plus", "spring", "but", "i", "modify", "the", "version", "of", "sbt", "and", "scala", "the", "version", "of", "sbt", "be", "NUMBER", "and", "the", "version", "of", "scala", "be", "NUMBER", "I", "run", "the", "compile", "command", "in", "sbt", "it", "works", "fine", "and", "i", "run", "the", "run", "EchoServer", "command", "in", "the", "sbt", "it", "works", "fine", "too", "NUMBER", "but", "i", "run", "the", "EchoClient", "it", "throw", "an", "exception", "java", "NUMBER", "lang", "NUMBER", "NoSuchMethodError", "scala", "NUMBER", "runtime", "NUMBER", "RichLong", "NUMBER", "compare", "J", "I", "java", "NUMBER", "lang", "NUMBER", "NoSuchMethodError", "scala", "NUMBER", "runtime", "NUMBER", "RichLong", "NUMBER", "compare", "J", "I", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Duration", "NUMBER", "compare", "Time", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Duration", "NUMBER", "compare", "Time", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "math", "NUMBER", "Ordered", "class", "NUMBER", "greater", "Ordered", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Duration", "NUMBER", "greater", "Time", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "com", "twitter", "finagle", "builder", "ClientBuilder", "buildPool", "ClientBuilder", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "anonfun", "NUMBER", "apply", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "anonfun", "NUMBER", "apply", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "anonfun", "map", "NUMBER", "apply", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "anonfun", "map", "NUMBER", "apply", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "LinearSeqOptimized", "class", "NUMBER", "foreach", "LinearSeqOptimized", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "immutable", "NUMBER", "List", "NUMBER", "foreach", "List", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "class", "NUMBER", "map", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "immutable", "NUMBER", "List", "NUMBER", "map", "List", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "SocketAddressCluster", "NUMBER", "mkFactories", "Cluster", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "internalBuildFactory", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "build", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "EchoClient", "NUMBER", "main", "EchoExample", "NUMBER", "scala", "NUMBER", "at", "EchoClient", "NUMBER", "main", "EchoExample", "NUMBER", "scala", "at", "sun", "NUMBER", "reflect", "NUMBER", "NativeMethodAccessorImpl", "NUMBER", "invoke", "NUMBER", "Native", "Method", "at", "sun", "NUMBER", "reflect", "NUMBER", "NativeMethodAccessorImpl", "NUMBER", "invoke", "Unknown", "Source", "at", "sun", "NUMBER", "reflect", "NUMBER", "DelegatingMethodAccessorImpl", "NUMBER", "invoke", "Unknown", "Source", "at", "java", "NUMBER", "lang", "NUMBER", "reflect", "NUMBER", "Method", "NUMBER", "invoke", "Unknown", "Source", "mariusaeriksen", "left", "you", "an", "email", "at", "your", "monkey", "NUMBER", "org", "email", "NUMBER", "could", "you", "please", "reply", "to", "me", "there", "The", "latest", "checkout", "of", "Finagle", "that", "I", "have", "NUMBER", "b", "NUMBER", "aed", "NUMBER", "fa", "NUMBER", "de", "NUMBER", "ef", "NUMBER", "c", "NUMBER", "be", "NUMBER", "f", "NUMBER", "do", "not", "build", "on", "MacOS", "X", "Homebrew", "install", "SBT", "NUMBER", "I", "could", "reproduce", "this", "on", "NUMBER", "different", "machines", "NUMBER", "A", "dependency", "cannot", "be", "find", "here", "be", "the", "full", "output", "sbt", "update", "test", "Getting", "net", "NUMBER", "java", "NUMBER", "dev", "NUMBER", "jna", "jna", "NUMBER", "NUMBER", "retrieving", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "boot", "app", "confs", "default", "NUMBER", "artifacts", "copied", "NUMBER", "already", "retrieved", "NUMBER", "kB", "NUMBER", "ms", "Getting", "Scala", "NUMBER", "for", "sbt", "NUMBER", "downloading", "LINK", "lang", "scala", "compiler", "NUMBER", "scala", "compiler", "NUMBER", "jar", "NUMBER", "SUCCESSFUL", "org", "NUMBER", "scala", "lang", "scala", "compiler", "NUMBER", "scala", "compiler", "NUMBER", "jar", "NUMBER", "ms", "downloading", "LINK", "lang", "scala", "library", "NUMBER", "scala", "library", "NUMBER", "jar", "NUMBER", "SUCCESSFUL", "org", "NUMBER", "scala", "lang", "scala", "library", "NUMBER", "scala", "library", "NUMBER", "jar", "NUMBER", "ms", "downloading", "LINK", "lang", "jline", "NUMBER", "jline", "NUMBER", "jar", "NUMBER", "SUCCESSFUL", "org", "NUMBER", "scala", "lang", "jline", "NUMBER", "jline", "NUMBER", "jar", "NUMBER", "ms", "downloading", "LINK", "NUMBER", "jar", "NUMBER", "SUCCESSFUL", "org", "NUMBER", "fusesource", "NUMBER", "jansi", "jansi", "NUMBER", "jansi", "NUMBER", "jar", "NUMBER", "ms", "retrieving", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "boot", "scala", "confs", "default", "NUMBER", "artifacts", "copied", "NUMBER", "already", "retrieved", "NUMBER", "kB", "NUMBER", "ms", "Getting", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "sbt_", "NUMBER", "NUMBER", "NUMBER", "problem", "summary", "WARNINGS", "module", "not", "find", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "sbt_", "NUMBER", "NUMBER", "local", "tried", "Users", "jponge", "NUMBER", "ivy", "NUMBER", "local", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "sbt_", "NUMBER", "NUMBER", "ivys", "ivy", "NUMBER", "xml", "typesafe", "ivy", "release", "tried", "LINK", "release", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "sbt_", "NUMBER", "NUMBER", "ivys", "ivy", "NUMBER", "xml", "Maven", "Central", "tried", "LINK", "tool", "sbt", "sbt_", "NUMBER", "NUMBER", "sbt_", "NUMBER", "NUMBER", "pom", "Scala", "Tools", "Maven", "NUMBER", "Repository", "tried", "LINK", "tool", "NUMBER", "org", "repo", "release", "org", "scala", "tool", "sbt", "sbt_", "NUMBER", "NUMBER", "sbt_", "NUMBER", "NUMBER", "pom", "Scala", "Tools", "Maven", "NUMBER", "Snapshots", "Repository", "tried", "LINK", "tool", "NUMBER", "org", "repo", "snapshot", "org", "scala", "tool", "sbt", "sbt_", "NUMBER", "NUMBER", "sbt_", "NUMBER", "NUMBER", "pom", "UNRESOLVED", "DEPENDENCIES", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "sbt_", "NUMBER", "NUMBER", "not", "find", "USE", "VERBOSE", "OR", "DEBUG", "MESSAGE", "LEVEL", "FOR", "MORE", "DETAILS", "unresolve", "dependency", "org", "NUMBER", "scala", "tool", "NUMBER", "sbt", "sbt_", "NUMBER", "NUMBER", "not", "find", "Error", "during", "sbt", "execution", "Error", "retrieving", "required", "libraries", "see", "Users", "jponge", "NUMBER", "sbt", "boot", "update", "NUMBER", "log", "for", "complete", "log", "Error", "Could", "not", "retrieve", "sbt", "NUMBER", "if", "you", "be", "use", "SBT", "NUMBER", "go", "to", "project", "build", "NUMBER", "properties", "and", "change", "sbt", "NUMBER", "version", "NUMBER", "It", "doesn", "t", "work", "with", "either", "NUMBER", "or", "NUMBER", "the", "version", "that", "I", "have", "through", "Homebrew", "NUMBER", "It", "looks", "like", "the", "project", "definition", "cannot", "be", "compiled", "both", "update", "reload", "fail", "info", "Compiling", "NUMBER", "Scala", "source", "to", "Users", "jponge", "Code", "finagle", "project", "plugins", "target", "scala", "NUMBER", "sbt", "NUMBER", "classes", "NUMBER", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "not", "find", "type", "PluginDefinition", "error", "class", "Plugins", "info", "ProjectInfo", "extend", "PluginDefinition", "info", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "not", "find", "type", "ProjectInfo", "error", "class", "Plugins", "info", "ProjectInfo", "extend", "PluginDefinition", "info", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "too", "many", "argument", "for", "constructor", "Object", "java", "NUMBER", "lang", "NUMBER", "Object", "error", "class", "Plugins", "info", "ProjectInfo", "extend", "PluginDefinition", "info", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "jcl", "be", "not", "a", "member", "of", "scala", "NUMBER", "collection", "error", "import", "scala", "NUMBER", "collection", "NUMBER", "jcl", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "not", "find", "value", "jcl", "error", "val", "environment", "jcl", "NUMBER", "Map", "System", "NUMBER", "getenv", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "value", "repositories", "be", "not", "a", "member", "of", "AnyRef", "with", "ScalaObject", "error", "super", "NUMBER", "repositories", "Seq", "twitter", "NUMBER", "com", "at", "LINK", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "sbt", "NUMBER", "FileRepository", "do", "not", "take", "parameters", "error", "Seq", "Resolver", "NUMBER", "defaultLocal", "None", "repositories", "error", "error", "Users", "jponge", "Code", "finagle", "project", "plugins", "Plugins", "NUMBER", "scala", "NUMBER", "value", "ivyRepositories", "be", "not", "a", "member", "of", "AnyRef", "with", "ScalaObject", "error", "super", "NUMBER", "ivyRepositories", "error", "error", "NUMBER", "error", "find", "error", "file", "Users", "jponge", "Code", "finagle", "project", "plugins", "default", "NUMBER", "bfec", "NUMBER", "compile", "compile", "Compilation", "fail", "Once", "you", "do", "that", "the", "projects", "plugings", "Plugins", "NUMBER", "scala", "file", "becomes", "obsolete", "as", "the", "new", "SBT", "doesn", "t", "use", "these", "classes", "anymore", "NUMBER", "From", "there", "on", "NUMBER", "even", "afer", "ones", "add", "the", "correct", "resolvers", "and", "dependencies", "in", "the", "build", "NUMBER", "sbt", "file", "I", "be", "lost", "as", "to", "how", "to", "get", "it", "to", "compile", "against", "SBT", "NUMBER", "and", "Scala", "NUMBER", "First", "compilation", "error", "I", "be", "now", "referring", "to", "searchbird", "but", "finagle", "example", "exhibits", "similar", "problem", "Client", "NUMBER", "scala", "NUMBER", "value", "thrift", "be", "not", "a", "member", "of", "package", "com", "NUMBER", "twitter", "NUMBER", "finagle", "error", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "rift", "NUMBER", "ThriftClientFramedCodec", "And", "so", "on", "NUMBER", "I", "would", "just", "love", "to", "play", "with", "Finagle", "not", "fight", "with", "SBT", "the", "so", "call", "Simple", "Build", "Tool", "Isn", "t", "there", "a", "way", "out", "bar", "downgrading", "SBT", "I", "m", "very", "new", "to", "scala", "myself", "and", "it", "s", "be", "hell", "with", "SBT", "and", "with", "Twitter", "showing", "a", "very", "promising", "framework", "but", "it", "not", "compile", "with", "the", "latest", "and", "greatest", "in", "the", "scala", "world", "NUMBER", "I", "wish", "one", "of", "them", "authors", "would", "chime", "in", "here", "NUMBER", "There", "be", "a", "way", "to", "downgrade", "and", "compile", "perfectly", "NUMBER", "Just", "download", "sbt", "NUMBER", "LINK", "build", "tool", "downloads", "detail", "name", "sbt", "launch", "NUMBER", "jar", "can", "NUMBER", "q", "reset", "any", "change", "you", "ve", "made", "to", "this", "finagle", "cloning", "of", "yours", "and", "make", "a", "quick", "script", "to", "launch", "sbt", "bin", "bash", "java", "Xmx", "NUMBER", "M", "jar", "dirname", "NUMBER", "sbt", "launch", "NUMBER", "jar", "Is", "there", "any", "chance", "those", "scripts", "could", "be", "integrated", "into", "scala", "bootstrapper", "gem", "It", "would", "be", "nice", "to", "have", "the", "ability", "to", "use", "that", "boilerplate", "Service", "Client", "structure", "and", "be", "able", "to", "compile", "our", "code", "on", "SBT", "NUMBER", "and", "Scala", "NUMBER", "Thanks", "so", "much", "It", "works", "with", "sbt", "NUMBER", "downloaded", "and", "launched", "locally", "NUMBER", "mariusaeriksen", "you", "mention", "that", "you", "publish", "binaries", "but", "I", "couldn", "t", "find", "any", "mention", "of", "those", "NUMBER", "or", "be", "they", "available", "on", "Maven", "Central", "mariusaeriksen", "you", "say", "will", "publish", "binary", "artifacts", "NUMBER", "where", "be", "this", "I", "want", "use", "finagle", "to", "my", "project", "NUMBER", "i", "have", "same", "program", "and", "build", "one", "day", "don", "t", "success", "NUMBER", "thank", "you", "very", "much", "NUMBER", "SamPeng", "NUMBER", "mariusaeriksen", "said", "that", "they", "push", "to", "LINK", "and", "I", "see", "that", "the", "GItHub", "page", "has", "be", "update", "to", "reflect", "this", "NUMBER", "jponge", "thanks", "your", "help", "NUMBER", "but", "have", "one", "question", "NUMBER", "I", "don", "t", "know", "use", "maven", "NUMBER", "For", "anyone", "else", "also", "looking", "for", "the", "binaries", "they", "be", "in", "com", "twitter", "not", "com", "NUMBER", "twitter", "LINK", "As", "a", "side", "note", "I", "don", "t", "see", "any", "reference", "on", "the", "GitHub", "homepage", "to", "binaries", "binary", "library", "or", "maven", "NUMBER", "twttr", "NUMBER", "com", "NUMBER", "If", "you", "d", "like", "to", "to", "get", "a", "Scala", "NUMBER", "SBT", "NUMBER", "Thrift", "NUMBER", "Finagle", "NUMBER", "stack", "a", "work", "example", "be", "in", "the", "README", "here", "LINK", "scrooge", "tree", "sbt", "NUMBER", "There", "be", "a", "difference", "in", "use", "sbt", "and", "NUMBER", "sbt", "Go", "back", "to", "school", "Vadi", "Just", "annoying", "when", "generating", "the", "documentation", "NUMBER", "finagle", "thrift", "has", "dependends", "on", "thrift", "libthrift", "NUMBER", "but", "sbt", "NUMBER", "not", "resolve", "it", "becouse", "where", "be", "no", "pom", "NUMBER", "xml", "file", "in", "LINK", "directory", "quick", "workaround", "when", "you", "be", "use", "Twitter", "s", "finagle", "thrift_", "NUMBER", "put", "this", "into", "your", "build", "NUMBER", "sbt", "thrift", "libthrift", "NUMBER", "from", "LINK", "NUMBER", "jar", "When", "use", "the", "following", "ClientBuilder", "val", "clientBuilder", "ClientBuilder", "NUMBER", "codec", "Http", "NUMBER", "cluster", "new", "AWSElbCluster", "config", "NUMBER", "url", "NUMBER", "connectionTimeout", "NUMBER", "seconds", "NUMBER", "hostConnectionLimit", "config", "NUMBER", "maxConnections", "NUMBER", "hostConnectionMaxIdleTime", "NUMBER", "seconds", "NUMBER", "hostConnectionMaxLifeTime", "NUMBER", "minute", "NUMBER", "retries", "NUMBER", "NUMBER", "reportTo", "new", "OstrichStatsReceiver", "NUMBER", "name", "config", "NUMBER", "url", "NUMBER", "toString", "we", "get", "benign", "FATAL", "error", "in", "the", "logs", "see", "LINK", "NUMBER", "I", "find", "that", "this", "was", "the", "result", "of", "an", "interaction", "between", "the", "ExpiringService", "wrapper", "and", "the", "WatermarkPool", "NUMBER", "The", "time", "based", "timeout", "in", "ExpiringService", "would", "cause", "release", "to", "be", "call", "on", "the", "underlying", "service", "then", "later", "on", "the", "WatermarkPool", "would", "attempt", "to", "use", "the", "connection", "find", "out", "that", "it", "be", "unusable", "and", "then", "also", "attempt", "to", "call", "release", "on", "it", "NUMBER", "This", "commit", "fix", "this", "problem", "in", "ExpiringService", "by", "ensuring", "release", "be", "only", "call", "once", "on", "the", "underlying", "service", "NUMBER", "Is", "this", "fix", "already", "in", "the", "last", "release", "avoids", "the", "use", "of", "Promise", "and", "uses", "getContentAsync", "method", "to", "obtain", "the", "content", "from", "an", "asynchronous", "request", "transformedBy", "method", "and", "a", "FutureTransformer", "object", "NUMBER", "I", "can", "t", "seem", "to", "find", "getContentAsync", "method", "in", "Java", "NUMBER", "Added", "Bootstrap", "folder", "to", "Finagle", "s", "gh", "pages", "required", "for", "index", "NUMBER", "html", "Kestrel", "depends", "on", "the", "memcache", "decoder", "which", "I", "broke", "NUMBER", "Responding", "with", "Error", "seems", "appropriate", "since", "this", "feature", "isn", "t", "afaik", "support", "by", "Kestrel", "NUMBER", "Hah", "you", "were", "too", "fast", "Marius", "NUMBER", "Closing", "NUMBER", "This", "commit", "add", "support", "for", "response", "encoding", "of", "error", "along", "with", "appropriate", "unit", "test", "NUMBER", "Previously", "an", "instance", "of", "SSLEngine", "was", "created", "in", "the", "ClientBuilder", "and", "then", "use", "for", "all", "subsequent", "service", "calls", "NUMBER", "According", "to", "the", "documentation", "for", "SSLEngine", "see", "LINK", "Once", "an", "engine", "be", "close", "it", "be", "not", "reusable", "a", "new", "SSLEngine", "must", "be", "created", "it", "may", "not", "be", "reused", "NUMBER", "See", "here", "for", "a", "test", "case", "we", "should", "come", "up", "with", "a", "test", "case", "that", "doesn", "t", "involve", "the", "Internet", "LINK", "This", "implement", "the", "zero", "arg", "and", "n", "arg", "version", "of", "the", "memcache", "stats", "command", "NUMBER", "It", "also", "fix", "a", "bug", "in", "the", "integration", "NUMBER", "ClientSpec", "test", "that", "must", "have", "broken", "with", "memcached", "NUMBER", "comment", "inline", "NUMBER", "There", "be", "at", "least", "two", "potential", "issue", "with", "the", "implementation", "NUMBER", "First", "the", "response", "decoding", "wasn", "t", "suitable", "for", "decoding", "stat", "responses", "so", "a", "new", "state", "along", "with", "decoding", "and", "response", "case", "classes", "was", "introduce", "to", "manage", "this", "response", "type", "NUMBER", "Second", "the", "client", "implement", "stats", "command", "throw", "a", "UnsupportedOperationException", "for", "the", "PartitionedClient", "since", "this", "operation", "doesn", "t", "make", "sense", "in", "that", "context", "NUMBER", "Feedback", "welcome", "NUMBER", "When", "including", "the", "finagle", "dependency", "we", "need", "to", "exclude", "several", "jars", "otherwise", "we", "get", "Error", "transferring", "file", "artifactory", "NUMBER", "local", "NUMBER", "twitter", "NUMBER", "com", "Unknown", "host", "artifactory", "NUMBER", "local", "NUMBER", "twitter", "NUMBER", "com", "Also", "other", "people", "have", "this", "problem", "LINK", "java", "example", "ok", "the", "dependencies", "finagle", "core", "and", "finagle", "http", "works", "TAG", "TAG", "com", "NUMBER", "twitter", "TAG", "TAG", "finagle", "core", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "com", "NUMBER", "twitter", "TAG", "TAG", "finagle", "http", "TAG", "TAG", "NUMBER", "TAG", "TAG", "I", "would", "still", "recommend", "to", "document", "that", "Currently", "the", "value", "for", "memcache", "flags", "be", "discarded", "when", "handle", "response", "encoding", "NUMBER", "This", "commit", "fix", "that", "and", "include", "a", "unit", "test", "for", "verifying", "that", "the", "behavior", "be", "correct", "NUMBER", "This", "change", "did", "require", "a", "couple", "of", "change", "to", "the", "interpreter", "specs", "but", "not", "to", "the", "actual", "interpreter", "NUMBER", "We", "re", "run", "this", "patch", "in", "production", "NUMBER", "i", "saw", "val", "service", "ClientBuilder", "NUMBER", "hosts", "Seq", "thriftServerAddr", "NUMBER", "codec", "codec", "NUMBER", "hostConnectionLimit", "NUMBER", "NUMBER", "build", "val", "client", "new", "B", "NUMBER", "ServiceToClient", "service", "new", "TBinaryProtocol", "NUMBER", "Factory", "in", "finagle", "thrift", "src", "test", "scala", "com", "twitter", "finagle", "thrift", "FinagleClientThriftServerSpec", "NUMBER", "scala", "but", "i", "cant", "find", "ServiceToClient", "in", "my", "thrftsub", "how", "to", "gen", "ServiceToClient", "thanks", "Is", "there", "any", "way", "to", "build", "thrift", "file", "with", "twitter", "sbt", "thrift", "use", "console", "maven", "not", "use", "special", "sbt", "project", "plugin", "spec", "NUMBER", "they", "also", "should", "be", "compatible", "to", "finagle", "If", "a", "client", "sends", "no", "command", "just", "an", "empty", "newline", "the", "server", "decoder", "throw", "a", "NoSuchElementException", "NUMBER", "This", "be", "cause", "by", "accessing", "head", "on", "an", "empty", "sequence", "NUMBER", "I", "get", "the", "following", "stack", "trace", "with", "scala", "NUMBER", "x", "java", "NUMBER", "lang", "NUMBER", "NoSuchMethodError", "scala", "NUMBER", "collection", "NUMBER", "Seq", "NUMBER", "unapplySeq", "Lscala", "collection", "Seq", "Lscala", "Some", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ats", "NUMBER", "RollupStatsReceiver", "NUMBER", "com", "twitter", "finagle", "stats", "RollupStatsReceiver", "tails", "StatsReceiver", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ats", "NUMBER", "RollupStatsReceiver", "anon", "NUMBER", "TAG", "StatsReceiver", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ats", "NUMBER", "RollupStatsReceiver", "NUMBER", "at", "StatsReceiver", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ats", "NUMBER", "NameTranslatingStatsReceiver", "NUMBER", "at", "StatsReceiver", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "channel", "NUMBER", "ChannelServiceFactory", "NUMBER", "TAG", "ChannelService", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "anonfun", "NUMBER", "apply", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "anonfun", "NUMBER", "apply", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "anonfun", "map", "NUMBER", "apply", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "anonfun", "map", "NUMBER", "apply", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "LinearSeqOptimized", "class", "NUMBER", "foreach", "LinearSeqOptimized", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "immutable", "NUMBER", "List", "NUMBER", "foreach", "List", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "TraversableLike", "class", "NUMBER", "map", "TraversableLike", "NUMBER", "scala", "NUMBER", "at", "scala", "NUMBER", "collection", "NUMBER", "immutable", "NUMBER", "List", "NUMBER", "map", "List", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "SocketAddressCluster", "NUMBER", "mkFactories", "Cluster", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "buildFactory", "ClientBuilder", "NUMBER", "scala", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ClientBuilder", "NUMBER", "build", "ClientBuilder", "NUMBER", "scala", "NUMBER", "NUMBER", "This", "be", "the", "code", "to", "build", "the", "client", "val", "client", "ClientBuilder", "NUMBER", "codec", "Http", "NUMBER", "hosts", "localhost", "NUMBER", "NUMBER", "hostConnectionLimit", "NUMBER", "NUMBER", "build", "It", "works", "fine", "on", "NUMBER", "Scala", "NUMBER", "x", "be", "not", "binary", "compatible", "with", "Scala", "NUMBER", "x", "so", "error", "like", "this", "be", "bound", "to", "happen", "unless", "you", "recompile", "with", "Scala", "NUMBER", "x", "NUMBER", "Did", "you", "recompile", "with", "Scala", "NUMBER", "x", "Thanks", "for", "the", "quick", "reply", "i", "use", "the", "libraries", "from", "maven", "NUMBER", "twttr", "NUMBER", "com", "which", "be", "NUMBER", "x", "I", "tried", "rebuilding", "for", "NUMBER", "from", "HEAD", "NUMBER", "But", "the", "test", "for", "twitter", "NUMBER", "util", "NUMBER", "logging", "core", "do", "not", "succeed", "with", "specs", "NUMBER", "SNAPSHOT", "I", "update", "Project", "NUMBER", "scala", "for", "both", "finagle", "and", "util", "since", "required", "for", "NUMBER", "NUMBER", "One", "error", "when", "run", "the", "test", "for", "util", "core", "be", "error", "Could", "not", "create", "an", "instance", "of", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "FutureSpec", "error", "error", "NUMBER", "error", "error", "org", "NUMBER", "specs", "NUMBER", "util", "NUMBER", "Classes", "class", "NUMBER", "createInstanceFor", "Classes", "NUMBER", "scala", "NUMBER", "error", "org", "NUMBER", "specs", "NUMBER", "util", "NUMBER", "Classes", "NUMBER", "createInstanceFor", "Classes", "NUMBER", "scala", "NUMBER", "error", "org", "NUMBER", "specs", "NUMBER", "util", "NUMBER", "Classes", "class", "NUMBER", "create", "Classes", "NUMBER", "scala", "NUMBER", "error", "org", "NUMBER", "specs", "NUMBER", "util", "NUMBER", "Classes", "NUMBER", "create", "Classes", "NUMBER", "scala", "NUMBER", "error", "org", "NUMBER", "specs", "NUMBER", "runner", "NUMBER", "TestInterfaceRunner", "NUMBER", "run", "TestInterfaceRunner", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TestRunner", "NUMBER", "run", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TestRunner", "NUMBER", "runTest", "NUMBER", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TestRunner", "NUMBER", "run", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TestFramework", "anonfun", "NUMBER", "anonfun", "apply", "NUMBER", "runTest", "NUMBER", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TestFramework", "anonfun", "NUMBER", "anonfun", "apply", "NUMBER", "anonfun", "apply", "NUMBER", "apply", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TestFramework", "anonfun", "NUMBER", "anonfun", "apply", "NUMBER", "anonfun", "apply", "NUMBER", "apply", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "NamedTestTask", "NUMBER", "run", "TestFramework", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "ScalaProject", "anonfun", "sbt", "ScalaProject", "toTask", "NUMBER", "apply", "ScalaProject", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "ScalaProject", "anonfun", "sbt", "ScalaProject", "toTask", "NUMBER", "apply", "ScalaProject", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "TaskManager", "Task", "NUMBER", "invoke", "TaskManager", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "impl", "NUMBER", "RunTask", "NUMBER", "doRun", "NUMBER", "RunTask", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "impl", "NUMBER", "RunTask", "NUMBER", "runTask", "RunTask", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "impl", "NUMBER", "RunTask", "NUMBER", "sbt", "impl", "RunTask", "runIfNotRoot", "RunTask", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "impl", "NUMBER", "RunTask", "anonfun", "runTasksExceptRoot", "NUMBER", "apply", "RunTask", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "impl", "NUMBER", "RunTask", "anonfun", "runTasksExceptRoot", "NUMBER", "apply", "RunTask", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "Distributor", "Run", "Worker", "anonfun", "NUMBER", "apply", "ParallelRunner", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "Distributor", "Run", "Worker", "anonfun", "NUMBER", "apply", "ParallelRunner", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "Control", "NUMBER", "trapUnit", "Control", "NUMBER", "scala", "NUMBER", "error", "sbt", "NUMBER", "Distributor", "Run", "Worker", "NUMBER", "run", "ParallelRunner", "NUMBER", "scala", "NUMBER", "I", "m", "leaving", "this", "for", "now", "and", "stay", "with", "NUMBER", "x", "NUMBER", "Did", "you", "have", "any", "luck", "build", "with", "NUMBER", "x", "There", "be", "a", "pull", "request", "currently", "open", "on", "twitter", "util", "LINK", "for", "work", "towards", "make", "util", "NUMBER", "compatible", "NUMBER", "IIRC", "some", "code", "change", "needed", "to", "be", "made", "to", "FutureSpec", "and", "others", "for", "util", "to", "work", "with", "NUMBER", "There", "be", "also", "an", "Ostrich", "NUMBER", "pull", "request", "if", "you", "re", "wanting", "to", "include", "Ostrich", "NUMBER", "Any", "chance", "of", "get", "those", "branch", "util", "and", "finagle", "I", "think", "be", "the", "needed", "for", "this", "push", "to", "github", "even", "if", "it", "can", "t", "be", "merge", "into", "master", "for", "a", "while", "NUMBER", "s", "be", "pretty", "stable", "for", "us", "NUMBER", "Any", "idea", "as", "to", "when", "we", "might", "be", "able", "to", "play", "with", "a", "NUMBER", "version", "of", "finagle", "pretty", "please", "thanks", "NUMBER", "at", "having", "everything", "necessary", "to", "create", "package", "like", "those", "publish", "in", "github", "Adds", "support", "for", "the", "quit", "command", "in", "the", "memcached", "protocol", "on", "the", "client", "server", "and", "interpreter", "NUMBER", "Some", "clients", "unfortunately", "issue", "a", "quit", "to", "disconnect", "and", "without", "the", "support", "the", "server", "gets", "a", "flood", "of", "error", "message", "NUMBER", "Changes", "also", "include", "update", "to", "test", "to", "verify", "functionality", "NUMBER", "Not", "much", "was", "required", "in", "terms", "of", "change", "besides", "add", "Quit", "NoOp", "to", "the", "appropriate", "places", "NUMBER", "Two", "notable", "exception", "AbstractDecoder", "needs", "to", "check", "if", "token", "length", "be", "NUMBER", "client", "NUMBER", "DecodingToResponse", "needs", "to", "check", "for", "token", "length", "of", "NUMBER", "All", "test", "continue", "to", "pass", "no", "regressions", "NUMBER", "This", "should", "be", "a", "backwards", "compatible", "change", "NUMBER", "Style", "fix", "etc", "taken", "care", "of", "NUMBER", "The", "server", "DecodingToCommand", "implementation", "assumes", "that", "the", "specified", "exptime", "of", "a", "storage", "command", "be", "always", "a", "delta", "e", "NUMBER", "g", "NUMBER", "number", "of", "seconds", "from", "now", "NUMBER", "This", "assumption", "doesn", "t", "work", "if", "NUMBER", "be", "specified", "e", "NUMBER", "g", "NUMBER", "no", "expiration", "time", "or", "a", "unixtime", "be", "specified", "NUMBER", "This", "pull", "request", "address", "both", "of", "those", "cases", "NUMBER", "In", "the", "case", "where", "NUMBER", "be", "specified", "a", "value", "of", "NUMBER", "be", "maintained", "NUMBER", "In", "the", "case", "where", "a", "delta", "be", "specified", "the", "behavior", "be", "the", "same", "NUMBER", "When", "the", "value", "be", "a", "unixtime", "detected", "the", "same", "way", "as", "from", "memcached", "NUMBER", "c", "the", "value", "be", "converted", "to", "a", "Time", "instance", "NUMBER", "Included", "Spec", "be", "not", "comprehensive", "of", "DecodingToCommand", "but", "be", "comprehensive", "of", "the", "change", "that", "were", "introduce", "NUMBER", "This", "patch", "fix", "an", "issue", "with", "the", "memcached", "response", "encoding", "of", "cas", "values", "NUMBER", "Without", "this", "patch", "the", "output", "from", "memcached", "commands", "that", "include", "a", "cas", "value", "look", "like", "get", "foo", "VALUE", "foo", "NUMBER", "BigEndianHeapChannelBuffer", "ridx", "NUMBER", "widx", "NUMBER", "cap", "NUMBER", "NUMBER", "bar", "END", "This", "patch", "moves", "the", "cas", "unique", "value", "to", "the", "end", "of", "the", "value", "line", "and", "stops", "calling", "toString", "on", "the", "ChannelBuffer", "NUMBER", "No", "worries", "thanks", "for", "be", "so", "responsive", "NUMBER", "This", "patch", "fix", "an", "issue", "with", "the", "memcached", "response", "encoding", "of", "cas", "values", "NUMBER", "Without", "this", "patch", "the", "output", "from", "memcached", "commands", "that", "include", "a", "cas", "value", "look", "like", "get", "foo", "VALUE", "foo", "NUMBER", "BigEndianHeapChannelBuffer", "ridx", "NUMBER", "widx", "NUMBER", "cap", "NUMBER", "NUMBER", "bar", "END", "This", "patch", "moves", "the", "cas", "unique", "value", "to", "the", "end", "of", "the", "value", "line", "and", "stops", "calling", "toString", "on", "the", "ChannelBuffer", "NUMBER", "Since", "I", "wasn", "t", "bright", "and", "didn", "t", "create", "a", "branch", "I", "m", "closing", "this", "and", "will", "submit", "new", "pull", "request", "from", "a", "branch", "with", "the", "nit", "fix", "NUMBER", "Updated", "in", "NUMBER", "Following", "Jorge", "s", "suggestion", "in", "issue", "NUMBER", "I", "remove", "the", "hard", "code", "spec", "version", "NUMBER", "While", "I", "was", "at", "it", "I", "notice", "some", "test", "syntax", "issue", "I", "also", "cleaned", "up", "NUMBER", "The", "previous", "version", "was", "superfluous", "NUMBER", "The", "README", "and", "possibly", "other", "docs", "list", "NUMBER", "val", "server", "Server", "HttpRequest", "HttpResponse", "ServerBuilder", "NUMBER", "NUMBER", "codec", "Http", "NUMBER", "bindTo", "address", "NUMBER", "build", "service", "NUMBER", "name", "HttpServer", "The", "build", "needs", "to", "be", "the", "last", "step", "or", "the", "compiler", "vomits", "out", "an", "unhelpful", "NUMBER", "Cannot", "prove", "that", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "handler", "NUMBER", "codec", "NUMBER", "http", "NUMBER", "HttpRequest", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "handler", "NUMBER", "codec", "NUMBER", "http", "NUMBER", "HttpResponse", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "NUMBER", "Yes", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "NUMBER", "Yes", "Nothing", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "handler", "NUMBER", "codec", "NUMBER", "http", "NUMBER", "HttpRequest", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "handler", "NUMBER", "codec", "NUMBER", "http", "NUMBER", "HttpResponse", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "NUMBER", "Yes", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "NUMBER", "Yes", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "builder", "NUMBER", "ServerConfig", "NUMBER", "Yes", "I", "ve", "run", "into", "an", "issue", "with", "TLS", "enable", "clients", "NUMBER", "I", "m", "build", "a", "service", "that", "will", "hit", "a", "remote", "host", "with", "a", "POST", "request", "and", "I", "want", "to", "make", "sure", "the", "remote", "host", "be", "on", "TLS", "and", "has", "a", "valid", "certificate", "NUMBER", "I", "m", "use", "the", "following", "code", "to", "send", "my", "request", "scala", "val", "uri", "LINK", "val", "address", "new", "URI", "uri", "val", "client", "ClientBuilder", "NUMBER", "codec", "Http", "NUMBER", "tls", "NUMBER", "hosts", "new", "InetSocketAddress", "address", "NUMBER", "getHost", "NUMBER", "NUMBER", "set", "some", "other", "variables", "about", "timeouts", "NUMBER", "build", "val", "request", "new", "DefaultHttpRequest", "HttpVersion", "NUMBER", "HTTP_", "NUMBER", "_", "NUMBER", "HttpMethod", "NUMBER", "POST", "uri", "And", "set", "the", "content", "and", "headers", "HttpHeaders", "NUMBER", "setHost", "request", "address", "NUMBER", "getHost", "client", "request", "The", "uri", "here", "be", "a", "test", "script", "run", "on", "an", "Apache", "server", "and", "be", "sign", "as", "you", "can", "see", "if", "you", "visit", "it", "in", "Chrome", "with", "a", "MediaTemple", "SSL", "certificate", "whose", "domain", "doesn", "t", "match", "the", "URI", "domain", "NUMBER", "This", "I", "believe", "should", "cause", "a", "SSLException", "to", "be", "throw", "since", "the", "certificate", "should", "fail", "verification", "but", "instead", "my", "program", "be", "happily", "sending", "the", "request", "off", "without", "issue", "and", "returning", "NUMBER", "OK", "every", "time", "NUMBER", "Either", "there", "be", "a", "bad", "behavior", "here", "on", "Finagle", "s", "part", "or", "I", "ve", "messed", "up", "something", "non", "obvious", "in", "the", "code", "NUMBER", "Not", "sure", "if", "this", "be", "finagle", "netty", "or", "user", "error", "NUMBER", "On", "and", "off", "I", "have", "seen", "my", "processes", "get", "into", "a", "state", "where", "they", "start", "logging", "this", "message", "every", "second", "which", "happens", "to", "be", "the", "tcpConnectTimeout", "of", "the", "clients", "use", "NUMBER", "I", "have", "NUMBER", "copies", "of", "the", "process", "up", "and", "only", "one", "gets", "into", "this", "state", "NUMBER", "If", "I", "restart", "the", "proc", "I", "dont", "see", "the", "logging", "any", "more", "NUMBER", "Is", "this", "some", "kind", "of", "know", "issue", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "java", "NUMBER", "net", "NUMBER", "ConnectException", "connection", "timed", "out", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "channel", "NUMBER", "socket", "NUMBER", "nio", "NUMBER", "NioClientSocketPipelineSink", "Boss", "NUMBER", "processConnectTimeout", "NioClientSocketPipelineSink", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "channel", "NUMBER", "socket", "NUMBER", "nio", "NUMBER", "NioClientSocketPipelineSink", "Boss", "NUMBER", "run", "NioClientSocketPipelineSink", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "util", "NUMBER", "internal", "NUMBER", "IoWorkerRunnable", "NUMBER", "run", "IoWorkerRunnable", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "java", "NUMBER", "util", "NUMBER", "concurrent", "NUMBER", "ThreadPoolExecutor", "NUMBER", "runWorker", "ThreadPoolExecutor", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "java", "NUMBER", "util", "NUMBER", "concurrent", "NUMBER", "ThreadPoolExecutor", "Worker", "NUMBER", "run", "ThreadPoolExecutor", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "java", "NUMBER", "lang", "NUMBER", "Thread", "NUMBER", "run", "Thread", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "EXCEPTION", "please", "implement", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "http", "NUMBER", "ClientConnectionManager", "NUMBER", "exceptionCaught", "for", "proper", "handle", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "java", "NUMBER", "net", "NUMBER", "ConnectException", "connection", "timed", "out", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "channel", "NUMBER", "socket", "NUMBER", "nio", "NUMBER", "NioClientSocketPipelineSink", "Boss", "NUMBER", "processConnectTimeout", "NioClientSocketPipelineSink", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "channel", "NUMBER", "socket", "NUMBER", "nio", "NUMBER", "NioClientSocketPipelineSink", "Boss", "NUMBER", "run", "NioClientSocketPipelineSink", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "util", "NUMBER", "internal", "NUMBER", "IoWorkerRunnable", "NUMBER", "run", "IoWorkerRunnable", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "at", "java", "NUMBER", "util", "NUMBER", "concurrent", "NUMBER", "ThreadPoolExecutor", "NUMBER", "runWorker", "ThreadPoolExecutor", "NUMBER", "java", "NUMBER", "WAR", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "channel", "EXCEPTION", "please", "implement", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "http", "NUMBER", "ClientConnectionManager", "NUMBER", "exceptionCaught", "for", "proper", "handle", "NUMBER", "Would", "be", "nice", "to", "have", "access", "so", "that", "you", "could", "for", "instance", "supress", "logging", "of", "WriteExteptions", "with", "expected", "causes", "like", "CancelledRequestexception", "CancelledConnectionExcetpion", "etc", "NUMBER", "In", "the", "readme", "there", "be", "NUMBER", "examples", "where", "import", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "util", "NUMBER", "Timer", "NUMBER", "_", "be", "use", "NUMBER", "However", "that", "object", "be", "private", "finagle", "so", "if", "you", "actually", "try", "to", "use", "the", "example", "code", "it", "wont", "build", "NUMBER", "Can", "it", "be", "public", "Had", "to", "fall", "back", "to", "use", "a", "JavaTimer", "instead", "NUMBER", "Hi", "I", "be", "use", "finagle", "to", "build", "a", "proxy", "service", "use", "the", "http", "codec", "NUMBER", "It", "seems", "to", "work", "fine", "but", "once", "under", "load", "produces", "these", "kind", "of", "stack", "traces", "NUMBER", "Any", "tips", "or", "pointers", "to", "what", "could", "be", "going", "wrong", "how", "to", "fix", "All", "the", "samples", "seem", "to", "call", "Service", "NUMBER", "release", "as", "they", "exit", "NUMBER", "Is", "there", "a", "need", "to", "call", "it", "on", "a", "request", "basis", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "TooManyConcurrentRequestsException", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "channel", "NUMBER", "ChannelService", "NUMBER", "apply", "ChannelService", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "service", "NUMBER", "ExpiringService", "NUMBER", "apply", "ExpiringService", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ServiceProxy", "NUMBER", "apply", "Service", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "ServiceProxy", "NUMBER", "apply", "Service", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "service", "NUMBER", "FailureAccrualFactory", "anonfun", "make", "NUMBER", "anon", "NUMBER", "apply", "FailureAccrualFactory", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "service", "NUMBER", "RefcountedService", "NUMBER", "apply", "RefcountedService", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "service", "NUMBER", "StatsFilter", "NUMBER", "apply", "StatsFilter", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "Filter", "anon", "NUMBER", "apply", "Service", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "loadbalancer", "NUMBER", "LeastQueuedStrategy", "anon", "NUMBER", "anonfun", "make", "NUMBER", "anon", "NUMBER", "apply", "LeastQueuedStrategy", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "FactoryToService", "anonfun", "apply", "NUMBER", "apply", "Service", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "FactoryToService", "anonfun", "apply", "NUMBER", "apply", "Service", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Promise", "anon", "NUMBER", "anonfun", "NUMBER", "apply", "Future", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Promise", "anon", "NUMBER", "anonfun", "NUMBER", "apply", "Future", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Promise", "NUMBER", "respond", "Future", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Promise", "anon", "NUMBER", "TAG", "Future", "NUMBER", "scala", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "T", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "at", "com", "NUMBER", "twitter", "NUMBER", "util", "NUMBER", "Promise", "NUMBER", "flatMap", "Future", "NUMBER", "scala", "NUMBER", "Thanks", "Looks", "like", "use", "ClientBuilder", "NUMBER", "buildFactory", "and", "ServiceFactory", "NUMBER", "service", "fix", "this", "NUMBER", "Should", "that", "be", "reflected", "in", "the", "samples", "I", "actually", "have", "also", "seen", "these", "use", "ServiceFactory", "too", "so", "maybe", "its", "just", "a", "code", "error", "I", "see", "the", "TooManyConcurrentRequestsException", "be", "grouped", "with", "the", "API", "Misuse", "exception", "NUMBER", "What", "would", "cause", "this", "to", "be", "throw", "I", "change", "some", "of", "my", "code", "and", "most", "of", "them", "disappeared", "but", "they", "still", "occur", "very", "sporadically", "NUMBER", "the", "client", "builder", "be", "var", "builder", "ClientBuilder", "NUMBER", "codec", "Http", "_maxRequestSize", "NUMBER", "megabytes", "_maxResponseSize", "NUMBER", "megabyte", "NUMBER", "sendBufferSize", "NUMBER", "NUMBER", "recvBufferSize", "NUMBER", "NUMBER", "hosts", "new", "InetSocketAddress", "host", "port", "NUMBER", "hostConnectionLimit", "Integer", "NUMBER", "MAX_VALUE", "NUMBER", "hostConnectionMaxIdleTime", "NUMBER", "seconds", "NUMBER", "retries", "NUMBER", "NUMBER", "name", "host", "if", "ssl", "builder", "builder", "NUMBER", "tlsWithoutValidation", "The", "general", "usage", "pattern", "be", "val", "nearClient", "ServiceFactory", "HttpRequest", "HttpResponse", "NUMBER", "val", "farClient", "ServiceFactory", "HttpRequest", "HttpResponse", "NUMBER", "val", "req", "new", "DefaultHttpRequest", "NUMBER", "nearClient", "NUMBER", "service", "req", "NUMBER", "flatMap", "nearResp", "if", "nearResponse", "NUMBER", "accepatble", "Future", "NUMBER", "value", "nearResp", "else", "farClient", "NUMBER", "service", "req", "NUMBER", "flatMap", "farResp", "if", "farResp", "NUMBER", "acceptable", "val", "put", "new", "DefaultHttpRequest", "NUMBER", "put", "NUMBER", "setContent", "farResp", "NUMBER", "getContent", "NUMBER", "duplicate", "nearClient", "NUMBER", "service", "put", "NUMBER", "onSuccess", "NUMBER", "NUMBER", "onFailure", "NUMBER", "NUMBER", "onCancellation", "NUMBER", "Future", "NUMBER", "value", "farResp", "Thanks", "for", "the", "usage", "tips", "I", "be", "on", "NUMBER", "In", "the", "course", "of", "introduce", "the", "stats", "reciever", "or", "some", "other", "code", "change", "today", "I", "seem", "to", "have", "made", "the", "TooManyConcurrentRequestsExceptions", "go", "away", "so", "it", "seems", "it", "may", "have", "be", "an", "error", "on", "my", "part", "NUMBER", "The", "only", "thing", "I", "be", "seeing", "now", "be", "a", "few", "WriteExceptions", "now", "and", "again", "followed", "by", "this", "log", "message", "which", "actually", "comes", "from", "netty", "SimpleChannelHandler", "NUMBER", "channel", "EXCEPTION", "please", "implement", "com", "NUMBER", "twitter", "NUMBER", "finagle", "NUMBER", "http", "NUMBER", "ClientConnectionManager", "NUMBER", "exceptionCaught", "for", "proper", "handle", "NUMBER", "channel", "java", "NUMBER", "net", "NUMBER", "ConnectException", "connection", "timed", "out", "channel", "at", "org", "NUMBER", "jboss", "NUMBER", "netty", "NUMBER", "channel", "NUMBER", "socket", "NUMBER", "nio", "NUMBER", "NioClientSocketPipelineSink", "Boss", "NUMBER", "processConnectTimeout", "NioClientSocketPipelineSink", "NUMBER", "java", "NUMBER", "The", "exception", "I", "was", "and", "be", "now", "seeing", "were", "all", "come", "from", "load", "generate", "by", "a", "test", "harness", "write", "use", "finagle", "modeled", "after", "the", "Stress", "example", "with", "concurrency", "of", "NUMBER", "and", "push", "NUMBER", "k", "request", "through", "NUMBER", "I", "will", "keep", "banging", "on", "the", "app", "and", "see", "if", "I", "can", "get", "the", "TooManyConcurrentRequestsExceptions", "NUMBER", "if", "I", "dont", "have", "any", "luck", "in", "the", "next", "day", "or", "NUMBER", "Ill", "close", "the", "issue", "Actually", "just", "saw", "a", "few", "TooManyConcurrentRequestsExceptions", "NUMBER", "I", "will", "get", "the", "stats", "together", "for", "you", "NUMBER", "I", "guess", "i", "should", "mention", "that", "on", "top", "of", "the", "general", "pattern", "I", "showed", "above", "there", "be", "parallel", "request", "processing", "going", "on", "too", "of", "the", "form", "val", "futures", "List", "Future", "HttpResponse", "clientPairs", "NUMBER", "map", "_", "match", "case", "nearClient", "farClient", "doRequestMentionedAbove", "nearClient", "farClient", "NUMBER", "val", "first", "rest", "Future", "NUMBER", "select", "futures", "NUMBER", "get", "rest", "NUMBER", "foreach", "_", "NUMBER", "cancel", "Not", "sure", "if", "this", "gives", "any", "further", "hints", "NUMBER", "Ok", "will", "do", "thanks", "NUMBER", "Bumped", "it", "to", "NUMBER", "since", "I", "saw", "that", "was", "latest", "NUMBER", "be", "banging", "on", "the", "app", "and", "so", "far", "so", "good", "NUMBER", "Now", "only", "seeing", "the", "odd", "WriteException", "and", "valid", "expected", "occurrences", "of", "TimedoutRequestException", "and", "CancelledRequestException", "Will", "close", "the", "issue", "tomorow", "if", "behavior", "stays", "consistent", "thanks", "for", "your", "help", "Ok", "all", "good", "with", "no", "more", "TooManyConcurrentRequestsExceptions", "NUMBER", "Is", "there", "a", "target", "release", "number", "date", "for", "the", "WriteException", "supression", "the", "link", "at", "the", "bottom", "of", "LINK", "points", "to", "the", "commons", "library", "rather", "than", "finagle", "sbt", "update", "fail", "due", "because", "of", "unresolve", "dependencies", "com", "NUMBER", "twitter", "sbt", "thrift", "NUMBER", "com", "NUMBER", "twitter", "standard", "project", "NUMBER", "NEST", "Also", "repositories", "set", "to", "local", "twitter", "LINK", "artifactory", "in", "Plugins", "NUMBER", "scala", "NUMBER", "This", "was", "bothering", "me", "NUMBER", "Just", "curious", "why", "you", "be", "use", "the", "NUMBER", "version", "of", "specs", "LINK", "L", "NUMBER", "Is", "that", "for", "a", "reason", "Maybe", "use", "the", "delimiter", "to", "pick", "up", "the", "scala", "version", "automatically", "For", "a", "while", "a", "NUMBER", "build", "of", "specs", "didn", "t", "exist", "NUMBER", "We", "could", "should", "fix", "this", "NUMBER", "Patch", "welcome", "We", "couldn", "t", "rely", "on", "to", "give", "us", "the", "semantics", "we", "wanted", "in", "a", "multi", "version", "world", "so", "we", "relied", "on", "hard", "code", "version", "of", "Scala", "NUMBER", "We", "don", "t", "think", "there", "s", "a", "bad", "interaction", "between", "scala", "NUMBER", "and", "the", "version", "of", "specs", "we", "re", "use", "this", "be", "just", "an", "accident", "of", "history", "NUMBER", "One", "of", "us", "will", "clean", "it", "up", "unless", "some", "nice", "person", "on", "the", "internet", "gives", "us", "a", "patch", "first", "NUMBER", "You", "can", "get", "around", "this", "by", "creating", "a", "specsVersion", "variable", "and", "matching", "on", "the", "Scala", "version", "NUMBER", "See", "LINK", "L", "NUMBER", "lazy", "val", "specsVersion", "buildScalaVersion", "match", "case", "NUMBER", "NUMBER", "case", "_", "NUMBER", "val", "specs", "org", "NUMBER", "scala", "tool", "NUMBER", "test", "specs", "specsVersion", "test", "withSources", "If", "TLS", "SSL", "certificate", "and", "key", "file", "do", "not", "exist", "a", "failure", "be", "exhibited", "at", "startup", "rather", "than", "when", "a", "connection", "be", "created", "Performance", "improvement", "from", "recycling", "of", "SSLContext", "X", "Transport", "Cipher", "header", "add", "to", "HTTP", "request", "annotating", "the", "cipher", "use", "or", "in", "the", "case", "none", "was", "employed", "plaintext", "to", "limit", "total", "connection", "lifetime", "You", "be", "right", "NUMBER", "maybeExpire", "could", "take", "callback", "function", "from", "the", "caller", "but", "that", "seems", "more", "complicated", "than", "necessary", "NUMBER", "Or", "we", "can", "simply", "pass", "a", "flag", "force_expire", "to", "maybeExpire", "to", "always", "set", "expire", "to", "true", "NUMBER", "On", "Mon", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "mariusaeriksen", "TAG", "write", "there", "s", "a", "race", "between", "maybeLifeTimeExpire", "and", "the", "completion", "of", "the", "underlying", "request", "maybeLifetimeExpire", "can", "fire", "and", "between", "maybeExpire", "and", "expired", "true", "the", "request", "can", "complete", "leaving", "didExpire", "uncalled", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "thanks", "NUMBER", "push", "NUMBER", "On", "Tue", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "mariusaeriksen", "TAG", "write", "i", "ve", "add", "you", "to", "the", "twitter", "team", "NUMBER", "you", "should", "be", "able", "to", "push", "now", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "NUMBER", "modulo", "that", "comment"], "text_count": [0, 4113, 996, 577, 395, 62, 452, 1, 18, 419, 556, 1060, 484, 407, 380, 392, 0, 0, 0, 0, 1150, 325, 147, 110, 258, 135, 0, 0, 0, 0, 2513, 1492, 1041, 52, 613, 143, 0, 0, 0, 0, 3315, 21, 1552, 1280, 691, 0, 0, 0, 0, 0, 669, 332, 434, 169, 221, 112, 308, 0, 0, 0, 1995, 151, 1643, 113, 0, 0, 0, 0, 0, 0, 2170, 231, 1627, 596, 176, 0, 0, 0, 0, 0, 3710, 1728, 242, 1574, 124, 171, 0, 0, 0, 0, 192, 729, 66, 0, 0, 0, 0, 0, 0, 0, 2434, 445, 1489, 544, 0, 0, 0, 0, 0, 0, 6037, 10621, 115, 414, 76, 163, 0, 0, 0, 0, 13951, 24, 10099, 142, 1908, 3519]}]