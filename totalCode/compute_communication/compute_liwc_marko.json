[{"repo": "marko", "type": "elite", "title": "", "number of text": 1064, "text": "  Nice find! Thanks!  Looks good to me! Thanks for working on this! Published `marko@4.4.7`  I think this is fair. Would you be interested in working on this? I think `silent` would be a good option for this. `silent` should be set to `false` by default. @nahtnam I would be more than happy to help you implement this feature. We love to welcome new contributors.\r\n\r\nFirst off, you will need to add the `silent` option to the `enable` function: https://github.com/marko-js/marko/blob/fe60da9c111ae60613e567ab957b47e9b77cebea/src/browser-refresh.js#L4\r\n\r\nAs I said before, the `silent` option should default to `false`.\r\n\r\nYou will need to pass the options to the `hotReload.handleFileModified(...)` function call. The `hotReload` module can be found here: https://github.com/marko-js/marko/blob/master/src/hot-reload.js#L127. From there it's as simple as only running the `console.log` statements if `silent` is not `falsy`.\r\n\r\nIf you would like to work on this, or have any additional questions let me know! We'd love to get your help. @nahtnam Contributions are greatly appreciated and we are happy to answer any questions you might have related to this proposed change. I also agree it would be a good addition. @nahtnam here's the link to the contributors guide: https://github.com/marko-js/marko/blob/master/.github/CONTRIBUTING.md\r\n\r\nAll of the latest code is on master. You would want to fork the repo and create a new branch from master to implement the new feature and then submit a pull request using your new branch as the source. @nahtnam Great to hear that you will work on it! You do not need to add the option to `runtime`. Let  us know if you have any other questions.  #705 /cc @patrick-steele-idem @mlrawlings  @mlrawlings Can you please review and merge? Looks like the failing build is an unrelated timeout.  Thanks for the all of the fixes!  Hey @newyork-anthonyng, thanks for reporting the problem with the docs. Marko allows `<script/>` and I think we have gotten used to that, but you are right that we should update the docs since we are referring to a standard HTML file. If you can send a PR to update the following file that would be greatly appreciated: https://github.com/marko-js/marko/blob/master/docs/webpack.md\r\n\r\nThanks again!  First off, the following is not valid:\r\n\r\n```marko\r\n< input id=state.id  />\r\n```\r\n\r\nThat prevents the HTML tag from being parsed. The initial space after the `<` needs to be removed:\r\n\r\n```marko\r\n<input id=state.id  />\r\n```\r\n\r\nThat is a separate issue though...\r\n\r\nIt is somewhat of an odd restriction, but the ID for the root HTML element of a UI component needs to be static and (we need to provide a better error message... sorry about that!). The reason for this is that a UI component is uniquely identified by its ID and if the ID changes during a re-render then diffing/patching will break. Wrapping everything in a `<div>` (without the `id` attribute) will fix the `state is not defined` error and it is recommended to have a single top-level HTML element (for now, at least... see below):\r\n\r\n```marko\r\nclass {\r\n  onCreate() {\r\n    this.state = { id: 1}\r\n  }\r\n}\r\n\r\n<div>\r\n  <input id=state.id  />\r\n  <include('./include-target', {id: state.id}) />\r\n  <include('./include-target') id=state.id />\r\n</div>\r\n```\r\n\r\nTypically, you want to always avoid assigning an `id` to any HTML element when using Marko. You should either use `key` (to assign a scoped ID) or use `class` for targeting styling.\r\n\r\nMarko does not currently correctly handle multiple dynamic top-level HTML elements correctly in all cases. We are working on a fix for that. @austinkelleher @mlrawlings, can either of you look into improving the error message if the ID for the top-level HTML is dynamic? Thanks. I'm keeping this issue open because we are not providing a good error message to the user. @patrick-steele-idem I'll get to working on this either later tonight or tomorrow.  We'll investigate. Thanks for reporting the problem. I'm not able to reproduce the issue using the [marko-webpack](https://github.com/marko-js-samples/marko-webpack) sample app. I tried using both `webpack@1` and `webpack@2` and I also used `npm@5`. Could you provide a sample app to reproduce the problem or more details on your setup?  I was not able to reproduce the issue using the [marko-webpack](https://github.com/marko-js-samples/marko-webpack) sample app. I tried using both `webpack@1` and `webpack@2` and I also used `npm@5`. Could you provide a sample app to reproduce the problem or more details on your setup? Thanks for providing the project, @arthurchenn!\r\n\r\n@austinkelleher, can you please take a look at the provided project  to reproduce the problem? Thanks  I see client-side routing and scoped CSS as two gaps that we should fill (whether it be with a new marko-specific solution or integrating a third-party solution). We will be tackling the scoped CSS this sprint and we plan to do some more research and investigation for the client-side routing piece. In the meantime, maybe check out the following library for client-side routing: https://github.com/FormidableLabs/redux-little-router\r\n\r\nWith the approach that `redux-little-router` provides, there would not necessarily need to be any direct integration of the routing library with the view library (although they do provide React helpers). Seems like a promising approach, but I have not tried that library myself. @anupdineout Here are some resources for moving from Marko v3 to Marko v4:\r\n\r\n- [ROADMAP.md](https://github.com/marko-js/marko/blob/ed6f06a7af8f991cc0735e1366a9737e65e74a92/ROADMAP.md) (may be slightly inaccurate)\r\n- [Migration guide](https://gist.github.com/ianvonholt/9f700ec9a6def8655179b46f9f294e61) by @ianvonholt \r\n- [Medium Article: Marko 4.0 is here](https://medium.com/@mlrawlings/marko-4-0-is-here-837884c5f60d) @anupdineout \r\n\r\n> In Marko 4 u r proving state View architecture , We can eliminate Marko Widgets ?\r\n\r\nMarko Widgets was merged into Marko and that has made things a lot more seamless. /cc @charlieduong94   `ui-components-playground` is using `marko-starter` under the hood. `marko-starter` is using `lasso`. Perhaps this isn't clear enough. Right now, we aren't actively pushing people to use `marko-starter` apps for production, but in the future we plan to encourage this. What do you think @patrick-steele-idem @mlrawlings? Should we switch the link to the `marko-lasso` sample?  Thanks!  This PR introduces a new \"dist\" directory that gets generated during a publish using babel and a set of babel plugins. Initially, we are only minifying property names, but we will eventually use this to introduce better error messages in the debug build and those error messages and warning messages will be stripped out for the \"dist\" build. The \"dist\" build will automatically get used if `NODE_ENV` is anything other than `undefined`|`development`|`dev` or if `MARKO_DEBUG` env variable is set.    When introducing the [unrecognized tags](https://github.com/marko-js/marko/wiki/Error:-Unrecognized-Tag) error was introduced, compiling from XML yields . Currently the only workaround for this is to create an `html-elements.json` file and ignore each individual tag used.\r\n\r\nWe should consider:\r\n\r\n- When compiling Marko XML files (e.g. `template.xml.marko`, `template.marko.xml`) ignoring all unrecognized tags by default\r\n\r\n- Introduce a wildcard into the `html-elements.json` for ignoring all unrecognized tags:\r\n\r\n```json\r\n{\r\n  \"<*>\": {}\r\n}\r\n```\r\n\r\n/cc @mlrawlings @patrick-steele-idem   This is a nice change. Thanks for that. Published `marko@4.3.1`. Thanks again.  Events are not getting handled from components that are included using `<include(input.renderBody)/>`\r\n\r\nExample: https://github.com/austinkelleher/marko-render-body-events-bug @ianvonholt This one is kind of interesting and I'm not sure there is a good way to avoid the problem. With `marko@4.3` we changed how the page boots in the browser after at it renders on the server (https://github.com/marko-js/marko/issues/651). The new behavior is that only the input/state for the top-level UI component is serialized down to the browser and the top-level UI component is re-rendered with the serialized `input`/`state` in the browser when the page loads. The problem in this case is that the `input` for the top-level UI component (`<header-bar>`) includes a `input.renderBody(out)` function that is not serializable down to the browser so when the top-level UI component is re-rendered it has no children and the page does not fully boot.\r\n\r\nI have an idea that might work. I am thinking that if we detect that a top-level UI component has a non-serializable functions on its `input` then we will revert to the old behavior for that component. @ianvonholt We ended up going with the following solution:\r\n\r\n> I am thinking that if we detect that a top-level UI component has a non-serializable functions on its input then we will revert to the old behavior for that component.\r\n\r\nThis solved the problem in a transparent way with no code bloat.\r\n\r\nNew version published with fix: `marko@4.4.6`\r\n\r\nWe added some tests. Please let me know if you see any issues.  Hey, @juliojerrick. Check out [Marko vs React](https://hackernoon.com/marko-vs-react-an-in-depth-look-767de0a5f9a6) for an in depth comparison of Marko and React. The article has a [differences in rendering section](https://hackernoon.com/marko-vs-react-an-in-depth-look-767de0a5f9a6#ed58), which lists some details on how Marko's rendering is more performant. \r\n\r\nWe also have plans to add `scoped` CSS like Vue. You can track this issue #666.\r\n\r\nHope this helps. We've talked about the performance in a few places, but here's a more consolidated view of why Marko is fast:\r\n\r\n# Multiple compilation outputs\r\n\r\nMarko compiles components differently for the server and the browser.\r\n\r\nGiven the following template:\r\n\r\n```marko\r\n<div>Hello ${input.name}!</div>\r\n```\r\n\r\n## Compiled for the server\r\n\r\nThe compiled output is optimized for streaming HTML output on the server:\r\n\r\n```js\r\nvar marko_template = require(\"marko/html\").t(__filename),\r\n    marko_helpers = require(\"marko/runtime/html/helpers\"),\r\n    marko_escapeXml = marko_helpers.x;\r\n \r\nfunction render(input, out) {\r\n  out.w(\"<div>Hello \" +\r\n    marko_escapeXml(input.name) +\r\n    \"!</div>\");\r\n}\r\n```\r\n\r\n## Compiled for the browser\r\n\r\nThe compiled output is optimized for virtual DOM rendering in the browser:\r\n\r\n```js\r\nvar marko_template = require(\"marko/vdom\").t(__filename);\r\n\r\nfunction render(input, out) {\r\n  out.e(\"DIV\", null, 3)\r\n    .t(\"Hello \")\r\n    .t(input.name)\r\n    .t(\"!\");\r\n}\r\n```\r\n\r\n# High performance server-side rendering\r\n\r\nCompared to solutions like React that exclusively do virtual DOM rendering (or if you are using JSX with Vue), Marko has a huge advantage for server-side rendering. When rendering to a virtual DOM tree on the server it's a two-step process to render HTML:\r\n\r\n- First pass to produce an entire virtual DOM tree in memory\r\n- Second pass to serialize the virtual DOM tree to an HTML string that can then be sent over the wire (this requires traversing the entire tree structure)\r\n\r\nIn contrast, Marko renders directly to an HTML stream in a single pass. There is no intermediate tree data structure.\r\n\r\n# Compile-time optimization of static sub-trees\r\n\r\nGiven the following template:\r\n\r\n```marko\r\n<div>This is a <strong>static</strong> node</div>\r\n```\r\n\r\nMarko will recognize that the template fragment produces the same output every time and it creates the virtual DOM node once as shown in the following compiled output:\r\n\r\n```js\r\nvar marko_node0 = marko_createElement(\"DIV\", null, 3, ...)\r\n  .t(\"This is a \")\r\n  .e(\"STRONG\", null, 1)\r\n    .t(\"static\")\r\n  .t(\" node\");\r\n \r\nfunction render(input, out) {\r\n  out.n(marko_node0);\r\n}\r\n```\r\n\r\nRendering a static sub-tree has virtually zero cost.\r\n\r\nIn addition, Marko will skip diffing/patching static sub-trees\r\n\r\n# Compile-time optimization of static attributes\r\n\r\nMarko will also optimize static attributes on dynamic elements.\r\n\r\nGiven the following template:\r\n\r\n```marko\r\n<div.hello>Hello ${input.name}!</div>\r\n```\r\n\r\nMarko will produce the following compiled output:\r\n\r\n```js\r\nvar marko_attrs0 = {\r\n        \"class\": \"hello\"\r\n      };\r\n \r\nfunction render(input, out) {\r\n  out.e(\"DIV\", marko_attrs0, 3)\r\n    .t(\"Hello \")\r\n    .t(input.name)\r\n    .t(\"!\");\r\n}\r\n```\r\n\r\nNotice that the attributes object is only created once and it is used for every render. In addition, no diffing/patching will happen for static attributes.\r\n\r\n# Smart compiler\r\n\r\nWith Marko we favor doing as much at compile-time as possible. This has made our compiler more complex, but it gives us significant gains at runtime. We have ~90% code coverage and over 2,000 tests to ensure that the compiler is working correctly. In addition, in many cases the Marko compiler provides hints to the runtime for a given template so that the runtime can optimize for specific patterns. For example, Marko recognizes if an HTML is a simple HTML element with only `class`|`id`|`style` and the runtime optimizes for these virtual DOM nodes when doing diffing/patching (the Marko compiler generates codes that flags specific virtual DOM nodes).\r\n\r\nThe React (including React variants) runtime is typically used with JavaScript code generated by a JSX transform. JSX is just a simple transform for JSX elements to function calls. While there are  a few babel transforms that apply a few compile-time optimizations, the bulk of the optimizations are happening in the runtime since there is very little happening at compile-time.\r\n\r\nOn a related note, we don't promote the usage of the Marko compiler in the browser (even though you can make it work). The Marko compiler is targeted to work almost exclusively on the server and it is pretty hefty. In contrast, Vue supports the widely adopted use case of compiling templates in the browser (in addition to compiling on the server). That means that Vue needs to be more mindful of adding new features to the compiler that might increase page weight.\r\n\r\n# Optimized data structures\r\n\r\nInstead of rendering to a tree of virtual DOM nodes in the browser where children are represented by arrays, Marko renders to a tree where children are represented by a linked list. This reduces the memory allocation required and it is much faster in the use case of rendering virtual DOM nodes that get immediately thrown away. The virtual DOM data structures are heavily optimized as well for JavaScript runtimes based on known optimizations that V8 and others apply for given code structures and usage patterns. [Here's the VDOM runtime code](https://github.com/marko-js/marko/tree/c648b764f203d0c0284470d6267dfd9864a004f5/runtime/vdom).\r\n\r\n# Optimized runtime\r\n\r\nMarko has a heavily optimized runtime that has been benchmarked and fine-tuned over a long period of time. We extensively use profilers for Node.js and the browser and analyze generated opcodes to ensure that we maximize performance. We also aim to keep the code minimal to avoid introducing overhead. Lastly, we have created a variety of benchmarks that we have used to make sure we are staying fast:\r\n\r\n- https://github.com/marko-js/isomorphic-ui-benchmarks\r\n- https://github.com/marko-js/templating-benchmarks\r\n- https://github.com/patrick-steele-idem/marko-vs-react (deprecated in favor of `isomorphic-ui-benchmarks`)\r\n\r\n# Focused\r\n\r\nVue supports multiple ways to define a view:\r\n\r\n- Vue templates in standard HTML (that is, an existing element in the DOM is targeted to be the template)\r\n- Single-file components\r\n- JavaScript string as Vue template\r\n- JSX\r\n\r\nMarko, on the other hand only supports and optimizes for one way of defining a view in a `.marko` file. Maybe Vue is doing a good job of equally optimizing all of those approaches to defining a view, but I suspect that is not the case.\r\n\r\n----\r\n\r\nI'm sure I could come up with some more reasons that Marko is fast, but I think that covers the bulk of the optimizations that Marko applies. Hope that answers your question. I'm going to close the issue, but feel free to add more comments here if you would like further clarification.\r\n @patrick-steele-idem your response would make for a very interesting blog post. This should really be posted on the markojs site somewhere for others to easily find! We just published an article to explain why Marko is fast! https://medium.com/@psteeleidem/why-is-marko-fast-a20796cb8ae3  Given the following template:\r\n\r\n```marko\r\n<style> \r\n#search-guide { \r\n\r\n\r\n} \r\n</style> \r\n<div id=\"search-guide\"> \r\n  $ console.log( 'search-guide::state - ', state ); \r\n  <div> \r\n    <!-- state.len: ${ state.len } --> \r\n  </div> \r\n\r\n    <button on-click('pickSomething')>Pick Something!</button> \r\n\r\n    <hr> \r\n\r\n    Picked: ${ state.len } \r\n    Pick Something Else! \r\n    <!-- <button on-click('pickSomething')>Pick Something!</button> --> \r\n</div>\r\n```\r\n\r\n## From @ramses0:\r\n\r\n...this gets stuck in an infinite loop after the on-click, due to it getting stuck in the weeds with the `style` tag during    `$__rerender: function(isRerenderInBrowser) {` ... `                var targetEl = targetNode.firstChild;\r\n                while(targetEl) {\r\n                    var id = targetEl.id;`\r\nyes, i know it's a terrible dom structure (working on it, eventually ;) ), but for some reason this seems like the only component which has this problem, in many other place i'm using the \"dangling style tag\" structure w/o issue.\r\nmoving the <style> into the <div> seems to make it not get confused ... i could try to get a smaller repro and file an issue if necessary but wanted to share as i found it.  \r\n\r\ni didn't pursue it too much b/c i had a workaround (dump `<style>` inside a single top-level `<div>` tag per component instead of outside) and i'm planning in revamping all my styles eventually anyway  When rendering on the server, the top-level UI component cannot have function references. Marko serializes the data for the top-level UI components rendered on the server. If you have a reproducible test case to better illustrate your problem that would be helpful.  Thanks for the docs! We love seeing additional integrations with Marko.  Thanks for the PR @Hesulan. I agree that this does not look right. I'm not sure if there was an underlying reason for this, so I'm going to leave this open until either Patrick or Michael looks at it too. /cc @patrick-steele-idem @mlrawlings   Thanks for the PR. This is actually the correct behavior. Using the `static-text` attribute, Marko ignores HTML tags. The Marko.js website is not rendering the output correctly though [here](http://markojs.com/docs/core-tags/#codemarko-bodycode). It should look like this:\r\n\r\n```marko\r\n<div>\r\n    This is just one\r\n    &lt;span if(foo)&gt;\r\n        Hello ${THIS IS NOT VALID}!\r\n    &lt;/span&gt;\r\n    big text block\r\n</div>\r\n```\r\n\r\nI'm going to go ahead and close this, but feel free to comment here if you have any additional feedback. Also, I've opened up https://github.com/marko-js/markojs-website/issues/11 to track the Marko.js website issue.  This change looks good to me. Do you mind squashing your commits? Thanks. Actually after given this some more thought, I'm not sure if this is the right approach for globally overriding the default for a component. I don't think the compiler config is the appropriate place for such configuration. Have you considered overriding the `<await>` tag? I'll create an example of this and post a link here.\r\n\r\n Here's an example of overriding the `await` core tag:\r\n\r\nhttps://github.com/marko-js-samples/override-core-tag @mauricionr In the demo you'll see that I copied part of the `<await>` marko.json. This is my proposed solution for that: https://github.com/marko-js/marko/issues/686 @mauricionr After speaking with @patrick-steele-idem, we decided that instead of my old approach where I overrode the tag renderer and copying the `<await>` tag's `marko.json` file, we can just override the `await` tag completely and use a transformer to set the `timeout` attribute.\r\n\r\n*await-timeout-transformer.js*\r\n```js\r\nmodule.exports = function(el, context) {\r\n    if (!el.hasAttribute('timeout')) {\r\n        el.setAttributeValue('timeout', context.builder.literal(30000));\r\n    }\r\n}\r\n```\r\n\r\nThe [override-core-tag](https://github.com/marko-js-samples/override-core-tag) project has been updated with the changes. \r\n\r\nI'm going to go ahead and close this issue. Please let me know if you have any other questions.   This looks good to me. Thanks for the fix.  I believe this has been resolved. Closing the issue, but please feel free to add comments.  Related: https://github.com/marko-js/marko/issues/528  ## Bug Report\r\n\r\n### Context\r\nIf you have an await tag in a template that only gets rendered by an action, like setting state after the initial render, the await tag will error. The \"$__sync\" property is set to true by the updateManager.$__batchUpdate().\r\n\r\nYou get the following error `Uncaught Error: Not allowed`. \r\n\r\n### Expected Behavior\r\nIt should run the await tag and wait for the promise to be fulfilled.\r\n\r\n### Actual Behavior\r\nThrows an uncaught error.\r\n\r\n### Simple Example\r\nThis is a very simple example\r\n```JavaScript\r\nclass {\r\n    onCreate(){\r\n        this.state = {\r\n            promise: Promise.resolve(),\r\n            selected: false\r\n        }\r\n    }\r\n}\r\n<div>\r\n    <if(state.selected)>\r\n        <await(p from state.promise)>\r\n            done\r\n        </await>\r\n    </if>\r\n    <else>\r\n        I show first\r\n    </else>\r\n    <a href=\"#\" onClick('setState','selected', true) >click me</a>\r\n</div>\r\n```\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 4.2.8\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4): Chrome\r\n* Operating System and version (desktop or mobile): Windows 10\r\n\r\n### Stack Trace\r\nAsyncVDOMBuilder.js:171 Uncaught Error: Not allowed\r\n    at r.beginAsync (AsyncVDOMBuilder.js:171)\r\n    at t.exports (await-tag.js:231)\r\n    at r (index.html:33)\r\n    at renderer.js:195\r\n    at Component.js:525\r\n    at Object.s [as $__batchUpdate] (update-manager.js:63)\r\n    at n.$__rerender (Component.js:520)\r\n    at n.update (Component.js:470)\r\n    at o (update-manager.js:44)\r\n    at i (update-manager.js:16)\r\n\r\n</details>\r\n  HTML-style comments are already completely removed at compile-time and should never show up in the rendered output. For example, given the following template:\r\n\r\n```marko\r\n<h1>\r\n    <!-- Hello ${name}! -->\r\n</h1>\r\n```\r\n\r\nThe output HTML would be:\r\n\r\n```html\r\n<h1></h1>\r\n```\r\n\r\nFor removing console logging statements, that could be done using babel: https://www.npmjs.com/package/babel-plugin-transform-remove-console\r\n\r\nTypically, babel is only used when generating JavaScript bundles for the browser, but you could also use babel to preprocess JavaScript files loaded by Node.js.\r\n\r\n\r\nIf I am misunderstanding your question regarding the comments removal please let me know. Marko doesn't process HTML-style comments in `<script>` tags. Anything inside a `<script>` tag can be any language so it wouldn't make sense for Marko to fully parse out the content of a `<script>`.\r\n\r\nI also prefer to avoid using babel on the server, but just wanted to throw it out as an option. \r\n\r\nWhen you are in \"JavaScript land\" (e.g. inside a JavaScript function), Marko does not have much control because we don't want Marko to get in the business of rewriting JavaScript code.\r\n\r\nAnother option is to monkey-patch the `console` object to make the `console.log` method a no-op, but this might cause issues with debugging and would not be recommended, but here it is anyway:\r\n\r\n```js\r\nconsole.log = function noop() {};\r\n```\r\n\r\nA better option is to pull in a logging framework with configurable loggers so that you can control logging. With that approach, you would be going through your own logger instances instead of calling `console.log` directly.\r\n\r\nI'm going to go ahead and close this issue, but feel free to comment here if you have any other questions.  For context, please see [Issue #651 - Proposal: serialize only input and state on top-level server-rendered UI components #651](https://github.com/marko-js/marko/issues/651)\r\n\r\nThis Pull Request introduces some important changes to Marko:\r\n\r\n- Only the data (including `state`, `input` and properties added to the UI component instance) for _top-level_ UI components is serialized down to the browser (previously, this data was serialized for _every_ UI component rendered on the server)\r\n- When the page boots in the browser, the top-level UI components are \"partially\" re-rendered using the serialized data\r\n- As part of the partial re-render, the rendering logic executes but the DOM is not updated and no VDOM nodes are actually created (the partial re-render is only used to mount nested UI components)\r\n- NOTE: If a top-level UI component is \"split\" (that is, rendering logic is not sent down to the browser) then the old behavior will be continued\r\n- The `out.global` object is not serialized, but specify properties can be whitelisted to be serialized. For example, to have the `out.global.apiKey` and the `out.global.locale` properties serialized you would do the following:\r\n\r\n```js\r\ntemplate.render({\r\n        $global: {\r\n            serializedGlobals: {\r\n                apiKey: true,\r\n                locale: true\r\n            }\r\n        }\r\n    }, res);\r\n```\r\n\r\nThere is a chance that this might break existing apps. To revert back to the old behavior on a page-by-page basis you can do the following:\r\n\r\n```marko\r\n<marko no-browser-rerender />\r\n\r\n<html>\r\n  ...\r\n</html>\r\n```\r\n\r\n  @stephenbrady thanks for opening the issue. I added a test case and I am not able to reproduce. Can you please provide more details on how to reproduce? This looks to only be an issue with [marko-loader](https://github.com/marko-js/marko-loader). I haven't had a chance to investigate yet, but I am able to reproduce it. I think this is an issue with the way we're loading the css and how webpack interprets requires.  \r\n\r\nHere, the inline css is passed as a query parameter to the internal code-loader:\r\nhttps://github.com/marko-js/marko-loader/blob/master/src/index.js#L31-L32\r\n\r\nBut because webpack uses exclamation points in require statements as a loader syntax (`require('css!less!./path/to/style.less')`), the `!important` is throwing things off.\r\n\r\nI'm doing something [weird](https://github.com/marko-js/marko-loader/blob/master/src/code-loader.js#L3-L6) to handle newlines, but we should probably replace that with a call to `escape` [here](https://github.com/marko-js/marko-loader/blob/master/src/index.js#L30) and `unescape` [here](https://github.com/marko-js/marko-loader/blob/master/src/code-loader.js#L5).\r\n\r\n@stephenbrady Would you mind experimenting and creating a PR if things work out?  ```marko\r\nstyle {\r\n    div.__colors {\r\n        /* ... */\r\n    }\r\n\r\n    ul.__colors {\r\n        /* ... */\r\n    }\r\n\r\n    __colorLI {\r\n        /* ... */\r\n    }\r\n\r\n    __disabled-button { \r\n        color: grey;\r\n    }\r\n\r\n    __enabled-button { \r\n        color: yellow;\r\n    }\r\n}\r\n\r\n<div.__colors>\r\n    <ul.__colors>\r\n        <li.__colorLI>\r\n            Red\r\n        </li>\r\n    </ul>\r\n\r\n    <!-- Scoped styles can also be passed to other UI components: -->\r\n    <fancy-button disabled-class=style('disabled-button') enabled-class=style('enabled-button')>\r\n        Click me\r\n    </fancy-button>\r\n</div>\r\n```\r\n\r\n> NOTE: It would also be possible to use unscoped CSS alongside scoped CSS\r\n\r\nThe Marko CSS preprocessor would produce the following CSS code:\r\n\r\n```css\r\ndiv.colors_abc123 {\r\n        /* ... */\r\n}\r\n\r\nul.colors_abc123 {\r\n        /* ... */\r\n}\r\n\r\n.colorLI_abc123 {\r\n        /* ... */\r\n}\r\n\r\n.disabled-button_abc123 { \r\n    color: grey;\r\n}\r\n\r\n.enabled-button_abc123 { \r\n    color: yellow;\r\n}\r\n```\r\n\r\n> NOTE: The CSS code that Marko preprocessors then would go through any user CSS processor specified (`style.less`, `style.scss`, etc.)\r\n\r\n\r\nFinally, the Marko compiler would provide a `style` function variable similar to the following:\r\n\r\n```js\r\nvar style = marko_style('_abc123');\r\n// style('colorLI') --> 'colorLI_abc123'\r\n``` I could see this getting messy very quickly. I would much rather like to have a `scoped` attribute like Vue. With the above implementation, you could mix the scoped and non-scoped CSS, which is much messier. Additionally, when a component is created, often times there will be component-specific styling. This means that there will be a lot of underscores in component styles.\r\n\r\n## Mixed syntax can be messy\r\n\r\nIn the following example, it's difficult to see which specific styles are scoped and which specific styles are global without scanning the entire block:\r\n\r\n```marko\r\n// A mix of scoped and global styles\r\nstyle {\r\n    .non-scoped {\r\n        /* ... */\r\n    }\r\n    div.__colors {\r\n        /* ... */\r\n    }\r\n\r\n    ul.__colors {\r\n        /* ... */\r\n    }\r\n\r\n    .more-non-scoped {\r\n        /* ... */\r\n    }\r\n    __colorLI {\r\n        /* ... */\r\n    }\r\n\r\n    __disabled-button { \r\n        color: grey;\r\n    }\r\n\r\n    .even-more-non-scoped {\r\n        /* ... */\r\n    }\r\n\r\n    __enabled-button { \r\n        color: yellow;\r\n    }\r\n}\r\n```\r\n\r\n## Scoped Attribute\r\n\r\nIn the following example, you can easily see which styles are scoped and which styles are global:\r\n\r\n```marko\r\nstyle.scoped {\r\n    .scoped-class { \r\n        /* ... */\r\n    }\r\n\r\n   div.colors { \r\n        /* ... */\r\n   }\r\n}\r\n\r\n// Global styles can be included in the component too\r\nstyle {\r\n    .non-scoped-class { \r\n        /* ... */\r\n    }\r\n\r\n   div.another-non-scoped { \r\n        /* ... */\r\n   }\r\n}\r\n```\r\n\r\nYou could use `less` or an another CSS extension as an additional attribute as usual:\r\n\r\n```marko\r\nstyle.less.scoped {\r\n\r\n}\r\n\r\nstyle.less {\r\n\r\n}\r\n```\r\n Sorry guys, but I am going to have to have a dissenting opinion here. We considered the Vue.js approach before creating this proposal, but there are some serious drawbacks with the  Vue.js approach:\r\n\r\n## Vue.js approach drawback: scoped styles must be separated out from unscoped styles\r\n\r\nIt forces scoped styles to be separated out. For a single file UI components that is fine because it is just a separate block in the single file. However, that would be a problem when the developer wants to split the styles out to a separate style file. Do we allow `style.less` + `style.scoped.less`? That would be suboptimal because now styles are split across multiple files. A separator within the file could be used but that introduces more things to learn and the separator could be problematic (do we use a CSS comment?). You could argue that unscoped styles would not be needed alongside scoped styles, but I think that would be an odd restriction.\r\n\r\n## Vue.js approach drawback: Marko must understand each compile-to-CSS language\r\n\r\nAnother drawback with the Vue.js approach is that it requires that Marko to be able to deeply understand and parse the style source in order to rewrite the styles. This means that Marko would need to have custom support for each render-to-CSS language (Less, Sass, Stylus, etc.) language so that it could render the style code into CSS so that it could then be deeply parsed to figure out all of the CSS class names and then modified to add an attribute selector. I don't think we want to go there.\r\n\r\n For example, given the following:\r\n\r\n```marko\r\nstyle scoped {\r\n    .list-container:hover {\r\n        background: orange;\r\n    }\r\n\r\n    @media (min-width: 250px) {\r\n        .list-container:hover {\r\n            background: orange;\r\n        }\r\n    }\r\n}\r\n\r\n<div>\r\n    Hello World\r\n</div>\r\n```\r\n\r\nMarko would need to figure how to preprocess the possibly non-CSS style source to produce the following CSS output:\r\n\r\n```css\r\n.list-container[data-m-21e5b78]:hover {\r\n    background: orange;\r\n}\r\n\r\n@media (min-width: 250px) {\r\n    .list-container[data-m-21e5b78]:hover {\r\n        background: orange;\r\n    }\r\n}\r\n```\r\n\r\nWe actually don't want Marko to render compile-to-CSS languages to CSS because we want that to be handled by the asset pipeline/bundler (e.g. Lasso or Webpack). This is because we allow global imports for Less and Stylus (and possibly others) and Marko would not have that context.\r\n\r\nContrast that with the proposal I gave above:\r\n\r\n```marko\r\nstyle {\r\n    __list-container:hover {\r\n        background: orange;\r\n    }\r\n\r\n    @media (min-width: 250px) {\r\n        __list-container:hover {\r\n            background: orange;\r\n        }\r\n    }\r\n}\r\n\r\n<div.__list-container>\r\n    Hello World\r\n</div> \r\n```\r\n\r\nWith a little regular expression magic, the `__` prefixed variables could be easily rewritten to the following:\r\n\r\n```css\r\n.list-container_21e5b78:hover {\r\n    background: orange;\r\n}\r\n\r\n@media (min-width: 250px) {\r\n    .list-container_21e5b78:hover {\r\n        background: orange;\r\n    }\r\n}\r\n```\r\n\r\nThe rendered HTML would be the following:\r\n\r\n```html\r\n<div.list-container_21e5b78>\r\n    Hello World\r\n</div>\r\n```\r\n\r\nIn addition, since we would use a special prefix, Marko would not need to deeply parse the CSS to find all of the scoped CSS class names to be added to the output HTML.\r\n\r\n## Vue.js approach drawback: scoped style classes cannot be passed to nested components\r\n\r\nIn my proposal above scoped style classes can be passed to nested UI components:\r\n\r\n```marko\r\nstyle {\r\n    __disabled-button { \r\n        color: grey;\r\n    }\r\n\r\n    __enabled-button { \r\n        color: yellow;\r\n    }\r\n}\r\n\r\n<div>\r\n    <fancy-button disabled-class=style('disabled-button') enabled-class=style('enabled-button')>\r\n        Click me\r\n    </fancy-button>\r\n</div>\r\n```\r\n\r\nWith the Vue.js approach your best option would probably be to use less efficient and less reliable descendent selectors:\r\n\r\n```marko\r\nstyle scoped {\r\n    .my-component .disabled-button { \r\n        color: grey;\r\n    }\r\n\r\n    .my-component .enabled-button { \r\n        color: yellow;\r\n    }\r\n}\r\n\r\n<div.my-component>\r\n    <fancy-button disabled-class='disabled-button' enabled-class='enabled-button'>\r\n        Click me\r\n    </fancy-button>\r\n</div>\r\n```\r\n\r\nI'm making the assumption that the output CSS code would be the following:\r\n\r\n```css\r\n.my-component[data-m-21e5b78] .disabled-button { \r\n    color: grey;\r\n}\r\n\r\n.my-component[data-m-21e5b78] .enabled-button { \r\n    color: yellow;\r\n}\r\n```\r\n\r\n## Vue.js approach drawback: not compatible with multi-file adaptive styles\r\n\r\nAt eBay, we support splitting out styles into multiple files for building adaptive UIs so we might have the following:\r\n\r\n- `style.mobile.less`\r\n- `style.mobile.ios.less`\r\n- `style.less`\r\n- ...\r\n\r\nIn order for that approach to work with the Vue.js approach, Marko would somehow need to figure out how to look at all of the possible style files to figure out if a particular CSS class name is a scoped CSS class name or not so that it can add the extra `data-*` attribute to the HTML elements that use those scoped class names.\r\n\r\n\r\n## So you don't like underscores?\r\n\r\nWe also discussed the following option based on title case:\r\n\r\n```marko\r\nstyle {\r\n    .ListContainer:hover {\r\n        background: orange;\r\n    }\r\n\r\n    @media (min-width: 250px) {\r\n        .ListContainer:hover {\r\n            background: orange;\r\n        }\r\n    }\r\n}\r\n\r\n<div.ListContainer>\r\n    Hello World\r\n</div>  \r\n```\r\n\r\nI don't know how I feel about that, but I could definitely be onboard with it. I think the regular expression might be a little less reliable but we could put in a few restrictions to avoid that problem. We recommended the `__` prefix because it would fit into any compile-to-CSS language and `__` is commonly used to marko properties in JavaScript as private. A pro for the title case is that `.ListContainer` looks okay, but `.__list-container` looks bad. A con with the title case is that I don't like having to type uppercase characters (shift key), but \"_\" requires shift as well so that is super minor.\r\n\r\n> It's an implementation detail, but the hash could be based on the file system directory path. That is, for any file in the directory we could figure out what the hash would be regardless if we are looking at `/path/to/style.less` or `/path/to/style.mobile.less`. It could then be the job of the asset pipeline/bundler to add the hashes to the CSS code (instead of Marko doing that work).\r\n\r\n## Summary\r\n\r\n- What I proposed above is a combination of scoped CSS and CSS modules\r\n- It fits in nicely with any compile-to-CSS language without Marko having to deeply parse the compile-to-CSS source code\r\n- It works with multi-file and single-file approaches\r\n- It's easy to explain (a unique hash is added to scoped class names that have a special prefix or that are somehow recognizable)\r\n\r\nStill think the Vue.js approach is better? Any other thoughts or proposals? How about double dot?\r\n\r\n```marko\r\n..list-container:hover {\r\n    background: orange;\r\n}\r\n\r\n..list-container..tasty {\r\n    background: chocolate;\r\n}\r\n\r\n@media (min-width: 250px) {\r\n    ..list-container:hover {\r\n        background: orange;\r\n    }\r\n}\r\n``` @gilbert It's subjective but I am not sure double dot looks better than `.__my-class` or `.MyClass` and I suspect that the double dot will impact tooling and syntax highlighting for the render-to-CSS languages such as Less or Sass, but I have not verified (`..my-class` is not valid CSS but both `.__my-class` and `.MyClass` are valid CSS and should not cause any linting and syntax highlighting issues).  What is the recommended way to share common methods across widgets? Normally, I would extend a base class, but it seems this isn't possible since constructors are never called. \r\n \r\nI can't seem to find a clean way to extend ALL widgets with common functionality. Everything I try requires either mixing into the prototype of \"class {}\" or relying on doing composition within the onCreate method. Is there a better, cleaner, way to do this?\r\n\r\nSide Note: My team is constantly fumbling with the class syntax in components because they are not real Classes. We are using es6 and Babel in our projects and Components are the one place that do not follow how real classes work. It's making things very confusing for our developers. Is there any way to use real classes with inheritance in Components? \r\n\r\nUPDATE: Sorry, I missed Patrick actually answered my side note in another ticket https://github.com/marko-js/marko/issues/619. Still, any examples of how to \"nicely\" mixin supporting methods?  Not sure what happened there. I'm investigating. Thanks for reporting the problem. I'll be publishing a new version of the website soon after I investigate a few other issues that others have reported. You can also run the website locally: \r\n\r\n```\r\ngit clone https://github.com/marko-js/marko.git\r\ncd marko\r\nnpm install\r\nnpm link\r\n\r\ncd ..\r\n\r\ngit clone https://github.com/marko-js/markojs-website.git\r\ncd markojs-website\r\nnpm install\r\nnpm link makro\r\nnpm start\r\n```  Do you have a `<body>` on your page? Are you explicitly using the `<init-components/>` tag? I am not able to reproduce (unless I render UI components into the `<title>` tag). Actually, I see the problem. It does look like a bug.  Can you please provide more of template for the UI component that is failing to render so that we can try to reproduce?\r\n\r\nEDIT: Just saw that you link to your repo. Currently, the `key` attribute is only applicable within the context of a UI component with a backing `class`. A quick fix would be the following:\r\n\r\n```marko\r\nclass { }\r\n\r\n<div>\r\n  <label for-key=\"somekey\">${input.label}</label>\r\n  <input key=\"somekey\" type=\"text\" placeholder=\"some placeholder\" />\r\n</div>\r\n```\r\n\r\nWe plan on revisiting this limitation in the future. I will leave the issue open.  This is related to: https://github.com/marko-js/marko/issues/589\r\n\r\n@mlrawlings We need to work on the fix for #589\r\n\r\nThe following template is not compiled as a UI component because of the surrounding `<if>`:\r\n\r\n```marko\r\nclass {\r\n    onCreate(input) {\r\n        this.state = {\r\n            foo: false\r\n        };\r\n    }\r\n    onMount() {\r\n        this.state.foo = true;\r\n    }\r\n}\r\n\r\n<if(state.foo)>\r\n    <div.foo></div>\r\n</if>\r\n<else>Loading...</else>\r\n```\r\n\r\nKeeping this issue so that we add it as a test case when we work on #589\r\n\r\n  Thanks!  <!----------------------------------------------------------------------\r\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\r\n  ---------------------------------------------------------------------->\r\n## New Feature\r\n\r\n### Description\r\n_list.marko_\r\n```marko\r\n<ul>\r\n    <li for(itemData in input.items)>\r\n        <include(input.item, itemData)/>\r\n    </li>\r\n</ul>\r\n```\r\n\r\n_page.marko_\r\n```marko\r\n<list items=input.items>\r\n    <@item(data)>\r\n        ${input.name}\r\n    </@item>\r\n</list>\r\n```\r\n\r\n### Open Questions\r\n<!--- What still needs to be discussed -->\r\nTypically, `<tag(data)>` has been used to pass data to the tag, not receive data.  Is this a good pattern?\r\n I think it would be confusing to use the parens to define variables for the `renderBody()` function. I'll throw out something that might be a terrible idea:\r\n\r\n```marko\r\n<list items=input.items>\r\n    <@item renderBody(data)>\r\n        ${data.name}\r\n    </@item>\r\n</list>\r\n```\r\n\r\nI'm not really a fan of this either, because technically it becomes `function renderBody(out, data) {  }`\r\n\r\n\r\nMaybe the following?:\r\n\r\n```marko\r\n<list items=input.items>\r\n    <@item input(data)>\r\n        ${data.name}\r\n    </@item>\r\n</list>\r\n```\r\n\r\nWith destructuring?:\r\n\r\n```marko\r\n<list items=input.items>\r\n    <@item input({name})>\r\n        ${data.name}\r\n    </@item>\r\n</list>\r\n```\r\n  See: http://stackoverflow.com/questions/43202021/simple-client-side-rendering-not-working\r\n\r\nWe either need to implement this method or throw an error (and update the docs). We should implement it.  This would be a great first contribution for anyone looking to get involved. @harrisjose Please feel free. Just try to follow the coding style and keep code fast and small. Here's where you will be making changes:\r\n\r\nhttps://github.com/marko-js/marko/blob/430ce144ccf658d79cf1868cba5851f19c75d5d1/runtime/vdom/AsyncVDOMBuilder.js#L302-L304\r\n\r\nKeep in mind that `getNode()` returns a `DocumentFragment`. `DocumentFragment` nodes do not support `outerHTML` which is why this is currently broken (marko used to return the first top-level HTML element node).\r\n\r\nAlso, test cases :)\r\n\r\nThanks in advance Awesome! And don't hesitate to ask any questions. One of us will point you in the right direction \ud83d\ude04  @harrisjose Yeah, that seems to be the case.  Sorry for taking so long to reply.  Is this something you're still working on/planning to work on?  The UI components compiler should ignore \"key\" attributes if the custom tag declares its own \"key\" attribute using `marko-tag.json`. There could still be some confusion to developers, but I think it's still the right thing to do.  Putting the logging behind a flag/attribute is definitely an option and I am not opposed to that. However, if you need that level of control, I would recommend not using the `<await-error>` tag and, instead, make sure there the promise is not rejected by providing your own `.catch()`. For example:\r\n\r\n```\r\n$ var userInfoPromise = getUserInfo()\r\n    .catch((err) => {\r\n        return {\r\n            error: err\r\n        }\r\n    });\r\n\r\n<await(userInfo from userInfoPromise)>\r\n    <if(userInfo.error)>\r\n        We are sorry, we were unable to retrieve the user information.\r\n    </if>\r\n    <else>\r\n        Hello ${userInfo.firstName}!\r\n    </else>\r\n</await>\r\n```\r\n\r\nThoughts?  This proposal impacts how UI components are bootstrapped in the browser when the page is initially rendered on the server. This proposal improves performance on the server and it reduces the chances that a developer will run into problems related to serialization/deserialization of UI component `state`/`input`/properties when a page is rendered on the server. This proposal should maintain backwards compatibility in most cases, but there are a few caveats (see the Caveats section below).\r\n\r\n# Current situation\r\n\r\nCurrently, each UI component rendered on the server will have its `state`, `input` and properties serialized down to the browser. This works and it is relatively fast, except there are a few issues:\r\n\r\n- Not everything is serializable\r\n- All `state`, `input` and properties for nested UI components can usually be derived from its top-level UI component so it is most likely redundant to serialize data associated with nested components (NOTE: Marko will dedupe objects/arrays but there is still excess serialization)\r\n\r\n> Not everything is serializable\r\n\r\nAs an example, a reference to a UI component class is not serializable as JSON. The following will not work as expected:\r\n\r\n```\r\nimport someModule from './foo';\r\n\r\n<some-nested-component some-module=someModule />\r\n```\r\n\r\nThe `some-module` attribute will result in a property being added to the `input` for `<some-nested-component>` but if `someModule` is a JavaScript module that has functions then those functions will not be included in the serialized `input` and `someModule` will _not_ be a reference to the `./foo` module when the UI component mounts in the browser.\r\n\r\n# Proposal\r\n\r\nInstead of serializing the `input`/properties/`state` of every UI component rendered on the server, only serialize the information associated with the top-level UI component(s) (excluding top-level \"split UI components\" that are not renderable in the browser).  In addition, a re-render of top-level UI components should be triggered when the top-level UI component boots in the browser. A \"complete\" re-render it is not actually necessary since there is no need to update the DOM in the browser (i.e., there is no reason to render any virtual DOM nodes when booting in the browser). It is, however, necessary to run through all of the rendering logic in order to determine which UI components need to be created and to determine their `input`/properties/`state`.\r\n\r\n# Caveats\r\n\r\n- If a nested UI component derives its props/state or generates input properties from anything other than passed in `input` (e.g. `this.locale = out.global.locale`)` then that information will not be available when the UI component mounts in the browser.\r\n\r\n# Status\r\n\r\nThis has been mostly implemented on my machine and it is working well for the apps that I have tested so far. More testing and optimization still needs to be done.\r\n\r\n-----\r\n\r\nThoughts? Concerns? Feedback?  Do you have a use case in mind? Maybe some sample code that might make the need more clear? Thanks for the clarification. A fix will go out with the next release.  The `value` attribute is not valid for a `<textarea>` tag \u2013 I suggest removing that. I haven't had a chance to verify, but it appears that the `\\n` in the concise line is being preserved by the parser and added to the textarea body for every render. A temporary workaround would be to use the HTML syntax for the `<textarea>` tag:\r\n\r\n```\r\ndiv\r\n  <textarea key='input' on-input('onChange')>${input.value}</textarea>\r\n```\r\n\r\nWe'll investigate a fix in Marko. Thanks for reporting the problem.  That does indeed look like a bug. I'll investigate. The following line looks like the problem: https://github.com/marko-js/marko/blob/47d3fc36cb5f1c83b8257e8561375c5db8886ed8/runtime/vdom/helper-styleAttr.js#L19\r\n\r\nIf `value === 0` then the if condition will not evaluate. Interested in submitting a Pull Request to fix the problem? Actually, I'm going to go ahead and take this one. There are some other changes that I think need to be made. New version published with fix: `marko@4.2.2`\r\n\r\nThanks for reporting the problem!  **tldr; Don't use split UI components unless there is a really good reason to do so**\r\n\r\nWhen using a split component (i.e., `component-browser.js` + `component.js`) then the JavaScript module bundler (e.g. Lasso.js) will only send down the `component-browser.js` and not `component.js` (assuming it is not nested within in an un-split component...). Split components allow the rendering logic to remain on the server (instead of also being sent to the browser). However, split UI components have the caveat that they cannot be rerendered unless the `component.js` is also sent down. You are seeing that error because `component.js` was not sent down to the browser and hence the rendering logic is missing in the browser for the UI component. The error message is cryptic and we should fix that (we need to improve error messages in development without adding bloat in production).\r\n\r\nMy advice would be to avoid using split UI components. Split UI components can have some benefits but they are usually a premature optimization with not too much gain.\r\n\r\nI'm closing this issue because I think everything is working as intended (I'll open a separate issue for improving the error message). If you still have questions or concerns please feel free to add them here.  > It's amazing how simple it is to have universal components with Marko.\r\n\r\nThanks for the feedback!\r\n\r\nCurrently, the best option is to use a UI component to transfer the global variables to a shared module. Something like the following:\r\n\r\n```marko\r\nimport myStore = from './path/to/my-store';\r\n\r\nclass {\r\n    onInput(input, out) {\r\n        this.someImportantData = out.global.someImportantData;\r\n    }\r\n\r\n    onMount() {\r\n        myStore.setSomeImportantData(this.someImportantData);\r\n    }\r\n}\r\n\r\n<div.top-level-ui-component>\r\n</div>\r\n```\r\n\r\nAny other UI component or JavaScript module can do something similar to the following:\r\n\r\n```marko\r\nimport myStore from './path/to/my-store';\r\n\r\n$ var someImportantData = myStore.getSomeImportantData();\r\n```\r\n\r\nI'm thinking there might be value in some how marking certain globals as being serializable to the browser so that they will automatically show up in `out.global` on both the server and in the browser. I'm going to explore this option some more and try to put together a proposal that makes this intuitive. @rubennorte Would you be good with the following proposal:\r\n\r\n```marko\r\nclass {\r\n    get globals() {\r\n        return ['title'];\r\n    }\r\n}\r\n\r\n<div>\r\n    Title: ${out.global.title}\r\n</div>\r\n```\r\n\r\nBasically, the `globals` property on the component class definition would be used to specify the names of the global properties that should be serialized down to the browser. \r\n\r\nLook good? Any other ideas? @rubennorte Would this pattern work for you?\r\n\r\nDefine and include a `<global>` component that runs before any other component on the page:\r\n\r\n```marko\r\nclass {\r\n  onMount() {\r\n    var global = {\r\n      getImageUrl: (path) => `https://${ this.input.imageHost }/${ path }`\r\n    }\r\n    window.out = { global: global }\r\n  }\r\n}\r\n```\r\n\r\nThen include it in your layout:\r\n\r\n```marko\r\n<global imageHost=process.env.IMAGE_HOST />\r\n```  Marko does not currently have a framework with native bindings like React Native, but you can certainly create a static build of your app and use Phonegap etc.\r\n\r\nCheck out: [marko-phonegap](https://github.com/marko-js-samples/marko-phonegap) Another developer built a mobile app using Marko + [Framework7](https://framework7.io/): https://twitter.com/rtalwar26/status/847702923198963716\r\n\r\nI haven't used Framework 7 myself but it looks promising. I installed the [ConfEngine](https://itunes.apple.com/in/app/confengine/id1010574267?mt=8) app built using Marko and Framework7 and looks very nice on my iPhone.  Thank you for the detailed problem report and the working app. Very helpful!\r\n\r\nI put in a fix to make this issue less common, but it has to do with the UI component first being rendered on the server and Marko not knowing that an attribute was added by an external library/code. When rendered initially in the browser this would not have be an issue. The fix skips removing non-Marko rendered attributes for keyed elements. The `key` is required to know for sure that the two elements being diffed are the matching elements.\r\n\r\nNew version published with fix: `marko@4.2.1`  You are right that the error message is not helpful. I've not seen that error message. Any suggestions on how to reproduce to see if we can improve the error message? Are you only able to trigger the problem when using `browser-refresh` and modifying templates?  Your approach looks good to me. However, you're trying to do root-level text, which may mess things up. Try wrapping your `input` and text within a `<div>`. Just wanted to mention that Marko has a [known limitation](https://github.com/marko-js/marko/issues/589) that does not allow dynamic top-level HTML elements or text nodes. Once we fix #589 then the wrapping `<div>` would no longer be needed. We have some ideas on how to fix the issue, but it's a little tricky.  Thanks for reporting the problem with the website. We're investigating This has been fixed. Thanks for reporting the problem!  We need to make this more clear in the docs, but `extends` can not be used with component classes. The reason for this is that marko internally makes every UI component inherit from an internal `Component` class and you can't have multiple base classes. If you really want to do mixins then the following will work:\r\n\r\n```js\r\nclass Component {\r\n  foo() {\r\n    //the following 2 lines codes are working as expected.\r\n    var bar = new Bar()\r\n    bar.funcInMixin() //print 'funcInMixin called' in console\r\n\r\n    // In fact,we want component instance has mixed function `funcInMixin`\r\n    // Unfortunately `this.funcInMixin` is undefined, it caused unhandled exception\r\n    this.funcInMixin()\r\n  }\r\n}\r\n\r\nvar mixins = {\r\n    funcInMixin() {\r\n        // ...\r\n    }\r\n};\r\n\r\nObject.assign(Component.prototype, mixins);\r\n\r\nexport default Component;\r\n```\r\n\r\nDoes that work for you? I'm closing the issue, but please feel free to add more comments here if you still have concerns or questions.  Can you not define both and use them only when you need to? I think we need better error reporting here, but a macro should only be declared once.  Try adding `no-update` to the chart div:\r\n\r\n    <div class=\"chart\" no-update /> The reason it was happening in the first place was because marko's vdom logic was causing your `chart` div to revert back to what you've written in the template.\r\n\r\nIf you still want to make use of `state.percent` (and thus marko's vdom), then this structure might work better for you:\r\n\r\n```marko\r\n<div class=\"col-md-12\">     \r\n      <span class=\"chart-wrapper\">\r\n        <span class=\"chart\" no-update></span>\r\n        <span class=\"percent\">${Math.round(state.percent)}</span>      \r\n      </span>\r\n      <span class=\"btn btn-default\" onClick('updateChart')>Update chart</span>\r\n</div>\r\n``` > like \"props\" and \"state\" in react?\r\n\r\nYes, that's correct.  We'll be putting some proposals on the table soon, but if anyone wants to share ideas or their favorite router, please feel free.  ```marko\r\nimport Hello from './path/to/hello';\r\n\r\n<Hello name=\"Frank\"/>\r\n```\r\n\r\nIn addition, we could also overload the `import` syntax to allow importing a UI component based on the tag name:\r\n\r\n```marko\r\nimport Hello from <hello>;\r\n\r\n<Hello name=\"Frank\"/>\r\n``` @Hesulan you may be right. I'll throw out some other ideas:\r\n\r\n```\r\nimport-tag <hello> as Hello;\r\nimport-tag <hello>; // if no \"as\" is specified then default to title case\r\n``` What's the use case for this? Auto-detection has worked pretty well for me so far (that doesn't make me opposed to this though).  From Gitter chat:\r\n\r\nEldar @Eldar-X Mar 24 10:47\r\n@patrick-steele-idem in component-browser.js following not working\r\n\r\n```js\r\nmodule.exports = class {\r\n    onCreate() {\r\n        this.state = {\r\n            count:0\r\n        };\r\n    }\r\n    increment() {\r\n        this.state.count++;\r\n    }\r\n}\r\n```\r\n\r\nBut this is okay\r\n\r\n```js\r\nmodule.exports =  {\r\n    onCreate() {\r\n        this.state = {\r\n            count:0\r\n        };\r\n    },\r\n    increment() {\r\n        this.state.count++;\r\n    }\r\n}\r\n```\r\n\r\nError message:\r\n\r\n```\r\nTypeError: component.$__setCustomEvents is not a function\r\n    at Function.ComponentDef.$__deserialize (https://localhost:3000/bundles/admin/news.js:3725:15)\r\n    at https://localhost:3000/bundles/admin/news.js:3919:37\r\n    at Array.forEach (native)\r\n    at Object.initServerRendered [as concat] (https://localhost:3000/bundles/admin/news.js:3918:19)\r\n    at https://localhost:3000/admin:2:99\r\n    at https://localhost:3000/admin:2:275\r\n``` I tested with the upcoming Marko v4.2.0 release and I am not able to reproduce.\r\n\r\n@Eldar-X Can you provide more details on how to reproduce the problem you mentioned in Gitter? I'm closing the issue for now, but if it is still a problem please let me know.  Thanks for reporting the problem @eltimn. We found some issues when converting the VDOM nodes to actual DOM nodes for certain input controls. We put in some fixes that will go out with the upcoming v4.2.0 released scheduled for a little later today. Thanks, again.  New version published with fix: `marko@4.2.0`\r\n\r\nThanks, again.  Thanks!  Are you interested in server-side performance or client-side performance or both? For server-side performance, Marko v4 is faster than Marko v3, but not by a huge margin. On the client-side, however, Marko v4 is much, much faster due to the introduction of VDOM rendering. Unfortunately, I don't have a 1-to-1 benchmark for Marko v3 vs Marko v4. What I can say is that Marko v3 is slower than React: https://github.com/patrick-steele-idem/marko-vs-react/tree/8d686de0782995d72bc26a058e84e938f0f8c2f9#client-side-rendering-performance\r\n\r\nMarko v4, however, is much faster than React, Preact, Inferno and Vue: https://github.com/marko-js/isomorphic-ui-benchmarks\r\n\r\nWe just gave an internal talk at eBay and in the slides we talk about improvements that we made in v4 and we also have a few slides on performance: http://markojs.com/presentations/marko-v4/\r\n\r\nI should also mention that Marko v4 includes a Marko v3 compatibility layer to allow Marko v3 and Marko v4 components to be used together. We need to do a little more work to make the transition easier, but if you are interested in going that route let us know. The Marko v3 compatibility layer does increase the page weight so migrating UI components to Marko v4 is recommended.\r\n\r\nHopefully that helps you convince your team to upgrade to Marko v4 :) If you need any more details let us know.  Thanks!  ## New Feature\r\n\r\n### Description\r\nCurrently, the only thing you can pass to the onClick attribute is a string which has to be a method on the parent component class. Now that we can access  the component directly in the template, I'd like to propose being able to pass a function to call instead of a string, or at least to pass the context for which the method should be invoked.\r\n\r\n### Context\r\n- This would open up the opportunity to call methods exposed by child components without having to write methods on the main class just to facilitate a click taking an action on another component\r\n```HTML\r\n<child-comp key='child'></child>\r\n<a onClick(args => component.getComponent('child').method(args), 'some arg'>Click Me</a>\r\n```\r\n\r\n- When transcluding components, you are forced to jump through hoops in order to call a method on the component which is transcluding the content. This would allow you to expose the component to the transcluded content and call the method on it, instead of the parent.\r\n\r\n```HTML\r\n<list data=[1,2,3,4,5] >\r\n   <card onClick(() => list.setSelected(item)) data=item class=[selected]  />\r\n</list>\r\n```\r\nInside list\r\n```HTML\r\nclass {\r\n   setSelected(item){ this.state.selected = item }\r\n}\r\n<for(item in input.data)>\r\n   <include(input.renderBody)  list=component item=item selected=(item==state.selected) />\r\n</for>\r\n```\r\nCurrently, in order to set the selected item on List when the Card is clicked, you have to do a chain like: \r\n\r\nCard Click -> Call Parent Save -> Save state on Parent -> Pass state to list -> list: save state -> pass selected to Card as var on include\r\n\r\nThis is all because the context of \"card\" is not list, despite it being used as a renderer (child) for List. If you could at least reference the component and pass it's method to the event handler, it would allow for better reuse of components without having to bind everything up to the parent component and then back down, just to set it's own internal state. I'd much rather have Card be able to set state and call methods on List, then have list emit an event that can be listened to by parents if they are so inclined.\r\n\r\nNow, I'm not suggesting that we just bind transcluded content to the components state, as I'm sure there are legit use cases for treating it separate. This would simply allow you to do either.\r\n\r\nAs another example, take a carousel which provides Forward and Backward methods, but leaves it up to you to call them. Perhaops even offering a transcluded region within the component to place them.\r\n\r\ne.g.\r\n\r\n```HTML\r\n<carousel items=data.items>\r\n   <@nav>\r\n      <a onClick(() => carousel.prev())>Prev</a> | \r\n      <a onClick(() => carousel.next())>Next</a>\r\n   </@nav>\r\n</carousel>\r\n```\r\nThis style of composed widgets allows me to reuse carousel in many ways, without having to include a particular nav type into the component itself. I could provide another component in @nav that handled it as a paged list, for example.\r\n\r\n### Possible Implementation\r\nI would suspect this is an easy change as a simple type check on the first argument should tell you if you are trying to call a method on the parent component (String) or a function (Function).\r\n\r\n### Discussion\r\nI'll admit I don't love the need for the arrow function, but you need to supply context for the method execution, so it's either that or signature like event('method', context, ...args), or perhaps an object event({m: 'method', c: context}). I could be misinterpreting your comments, but I just want to make it clear that the following works in Marko v4 because Marko v4 supports binding additional arguments to an event handler (see: http://markojs.com/docs/components/#codeon-eventmethodname-argscode):\r\n\r\n```jsx\r\nclass {\r\n   setSelected(item){ this.state.selected = item }\r\n}\r\n\r\n<list data=[1,2,3,4,5] >\r\n   <card onClick('setSelected', item) data=item class=[selected]  />\r\n</list>\r\n```\r\n\r\nThe reason for not allow functions to be used as the first argument to an event handler is that functions cannot be serialized down to the browser if the page is rendered on the server (functions are not serializable as part of JSON). With Marko v4, if the page is rendered on the server then event handlers will work as expected when the application boots in the browser. This is because we serialize the method name to the browser (it's just a `String`) and use that to handle the event in the browser.\r\n\r\nDoes that clarify? It clarifies why only strings are support, thanks! Unfortunately, your example is exactly what I'm trying to avoid. The selected state is not a property of the outer most component `class{}`, it's a property of the `List` component (`<list>`). I'm trying to set the value for `List` from `card`, without having to write the boiler plate on the outer most parent (`class{}`).\r\n\r\nIn order to have a click on `card` set `List`'s selected property, I have to write...\r\n```HTML\r\nclass {\r\n   setSelected(item){ this.state.selected = item } // boilerplate\r\n}\r\n\r\n<list data=[1,2,3,4,5] selected=state.selected>\r\n   <card onClick('setSelected', item) data=item class=[selected]  />\r\n</list>\r\n```\r\n\r\nThis might be OK for a single component in a template, but when this component has 10+ child components that also transcludes stuff - says it's a `Page` component with multiple components in it's `body` - then I end up with tons of these event handlers and state values. And the only reason I need them is to pass the state from the `transcluded child` to it's `parent component`. I believe this also causes the whole outer parent `(class{})` to rerender because of a state change, when the change was really internal to the `list` component.\r\n\r\n\r\n What I'm really trying to achieve is this:\r\n\r\n```HTML\r\nclass {\r\n   // no state or event handlers\r\n}\r\n<list data=[1,2,3,4,5] >\r\n   <card onClick(list.setSelected, item) data=item class=[selected]  />\r\n</list>\r\n```\r\nClicking a `card` would just set `List.setSelected = card.item` without bleeding functions/state into the outer `class{}` to facilitate. \r\n\r\nThe only way I can do this now is to put `card` inside `list`'s template, then `card` can call `list` functions directly, but then my re-usability is less because I can't supply different `cards` for different appearances. \r\n\r\nDoes that make sense? I have lots of examples where I'm using transclusion in this way, but the fact that the transcluded component/template is not in the context of the component that's including it, means I have to write boiler plate everytime. :( I can see this comment in the output of AttachBubbleEvents which \"seems\" to indicate you can provide a component ID for the method\r\n\r\n```\r\n// Attributes will have the following form:\r\n// on<event_type>(\"<target_method>|<component_id>\")\r\n```\r\n\r\nBut I can't seem to figure out how to invoke it. Is there a way to say what component the target_method should be called on??? This would solve my problem if I could target a specific component_id.\r\n\r\nIt seems to be referenced again in `getEventAttribute` as \r\n\r\n` // <method_name> <component_id>[ <extra_args_index]`\r\n\r\nBut I never seem to be able to enter the if block for this because `virtualAttrs` is always set with the parent ID already. Here's a solution that I've used before:\r\n\r\n```\r\nclass {\r\n   // no state or event handlers\r\n}\r\n<list data=[1,2,3,4,5] >\r\n   <card onClick('setState', 'selected', item) data=item class=[selected]  />\r\n</list>\r\n``` Thanks @mindeavor , I assume this would still require passing in `selected` to the list component to set it's state? It's better, but I still couldn't call methods on List from the event, which is the other part I'd like to do.\r\n\r\nAll we need is a way to tell onClick which component we want the method called on - assuming `key=id` is set ont he target we want...\r\n```\r\nonClick('id:method')\r\nonClick('id method')\r\nonClick('id|method')\r\nonClick('method') eventId='id'\r\n```\r\n\r\nAnything like this that let us target the component to be called would solve all my issues :) \r\n\r\nBut thanks for the tip @mindeavor  @patrick-steele-idem Any advice? Is it possible to set a target component for the method execution? The code seems to elude to it, but I can't figure out where it's set. I'm guessing in the AST somewhere?  I'm assuming you are using Marko v4 and if so the following works if you want to dump to the console output:\r\n\r\n```\r\n$ console.log('someVar:', someVar);\r\n```\r\n\r\nOr if you want to dump it to the browser as part of the HTML:\r\n\r\n```\r\n<pre>\r\n  ${JSON.stringify(someVar)}\r\n</pre>\r\n```\r\n\r\n`JSON.stringify` will only work if the object you want to dump doesn't have circular references. If that is the case, then you can use a [`util.inspect()`](https://nodejs.org/api/util.html#util_util_inspect_object_options) (a builtin Node.js module) for dumping to a String:\r\n\r\n```\r\nimport util from 'util';\r\n\r\n<pre>\r\n  ${util.inspect(someVar)}\r\n</pre>\r\n```\r\n\r\nHope that answers your question. @seangates `console.log()` does not return a value so the `<pre>` tag will be empty, but the value will be written to the `console` at least :)  Scoped CSS is indeed useful, but having \"just HTML\" means you have to write JavaScript inside non-sytax-highlighted strings (and \"just HTML\" is not even technically true, since vue.js uses [dots in attribute names](https://vuejs.org/v2/guide/syntax.html#Modifiers)). The HTML-JS syntax is definitely a step forward in templating languages :) Hey folks, support for scoped styles is something we thought about when working Marko v4 and it is something we want to offer in the near future. The problem requires some thought because the solution needs to be compatible with the module bundler (webpack, lasso, etc.) and we would need to figure out how marko scoped styles would play nice with simple CSS and the various CSS preprocessor languages. @thisguychris Since you mentioned that you are interested in working on this, it would be great to hear some proposals. We need to find a good solution for Marko while considering existing solutions:\r\n\r\n- [BEM](http://getbem.com/introduction/) \r\n- [Scoped CSS in Vue](https://vue-loader.vuejs.org/en/features/scoped-css.html)\r\n- [React CSS modules](https://github.com/gajus/react-css-modules)\r\n- etc.\r\n\r\nLet's see some ideas :) @jordanbtucker I concede my incorrect point about the attribute names :) For code, I'm talking about code in HTML attribute value strings, not script tags. I put a proposal on the table: [Proposal: Scoped CSS using \"__\" prefix](https://github.com/marko-js/marko/issues/666)\r\n\r\nFeedback greatly appreciated!  __tldr; Use `onCreate` instead of `constructor` because of limitations associated with native ES6 classes.__\r\n\r\nWith the release of 4.0, we added support for an `onCreate` lifecycle method which was able to be aliased as `constructor` when using the class syntax to define a component.\r\n\r\nThis was implemented as a [simple assignment](https://github.com/marko-js/marko/blob/e3547b97c00255d9692a2a5a652953773849d31c/components/defineComponent.js#L47).\r\n\r\nUnfortunately, we have discovered that despite the claim that `class` is [just syntactic sugar](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes) over typical JS prototypal inheritance, this is not actually the case.  There are limitations around how the `constructor` is implemented.  Although the constructor is `typeof \"function\"'` and `instanceof Function`, it cannot be called without the `new` keyword and cannot use its prototype methods of `call` and `apply`.  This prevents us from dynamically inheriting from `Component` (which has a `constructor` that we would want to call _before_ the user's `constructor`. Also, `Component` is actually only inherited from in the browser).\r\n\r\nWe didn't catch this earlier because we used the ES5 equivalent of classes in our tests because phantomJS (which we use in our test suite) does not support ES6.\r\n\r\nAdditionally, `onCreate` is not _quite_ the same as `constructor`.  It is a lifecycle method that is called when the component is created.  In the case of a server render, handing off to the browser, it does not get called when mounting in the browser.  A component fires `create`, `input` and `render` on the server and then _only_ `mount` in the browser.  The way ES6 classes are implemented would necessitate that `constructor` be called both on the server and in the browser for these isomorphic renders, which is not what we'd like.\r\n\r\n`constructor` will continue to work in from a single-file component (we already transpile to a plain object with an `onCreate` method), but we will add a deprecation warning when using `constructor`.\r\n\r\nTo summarize, [classes have issues](https://medium.com/javascript-scene/the-two-pillars-of-javascript-ee6f3281e7f3#.42r2fz3zy) and internally, Marko does not use true classes.  We really only support the `class` syntax because it looks nice and you don't have to separate methods with commas. Is this also why I cannot use the \"extend\" keyword on a component class? I would have assumed with a transpiler that I could inherit from a base classes, but Marko throws an error about \"a component cannot be a function.\" This kind of sucks as there are methods I find myself having to add to components over and over because I can't just inherit a base component. :( I usually end up with an ugly mixin object.  Fixed. New version of marko published: `marko@4.1.2`\r\n\r\nCHANGELOG: https://github.com/marko-js/marko/blob/master/CHANGELOG.md#412 @jasonmacdonald Yeah, we probably need to make this more clear, but `extends` is not something we can support. Internally, marko creates its own class for each component that extends our base [Component](https://github.com/marko-js/marko/blob/master/components/Component.js) class and components can't extend multiple classes. `mixins` are the way to go.  Here's a question I've had and maybe you could add to your documentation: can you use `<await>` within components? Thanks for the PR! (sorry for being slow to merge this PR)\r\n\r\nWe'll be publishing a new version of the site soon.  @leili2017 can you confirm that installing `marko` as @jrop suggested works?\r\n\r\nIn any case, we should make it clear in the docs that you need to have `marko` as a dependency of your project  Thanks for the bug report. I will try to reproduce I am not able to reproduce the problem. Are you using Webpack? Might need to take a closer look to see what is wrong with your setup...  Convenience. I don't believe it's required That's a good question. We're actually going to make some related changes that we have been meaning to make that I suspect you will like. We'll get back to you soon.  This looks great. Would you be interested in providing a working koa app in the following repo: https://github.com/marko-js-samples/marko-koa\r\n\r\n(I added you as a collaborator)  Thanks! I'll add some additional clarifications, but that is a nice addition. Thanks, again.  Hey Jordan, that's a very fair question. That was done for performance reasons since monkey-patching the prototype chain is more efficient then monkey-patching each `res` object that gets passed through for every request which is what would be required if we were to use middleware. \r\n\r\nWith that said, there might be hope in using the [Express `mount` event](https://expressjs.com/en/api.html#app.onmount) to get access to the parent express app so that the prototype chain can be monkey-patched. That requires more investigation though. If you or something else is able to make the following work then it is something we would consider:\r\n\r\n```js\r\nconst express = require('express')\r\nconst marko = require('marko/express')\r\n\r\nconst app = express()\r\napp.use(marko()) // marko should be a function call that returns an `express()` app\r\n```\r\n\r\nAlternatively, it might not hurt to also support something like the following:\r\n\r\n```js\r\nrequire('marko/express/response').patch(express);\r\n```  I believe the `key` attribute can only be applied to components. What are you trying to do? The `key` attribute can only be used within the context of a component as it stands now. We should probably make this more clear in the docs with updated text:\r\n\r\n> The `key` attribute can be applied to both HTML elements and custom tags for UI components within the context of a component's view template.\r\n\r\nI'm going to give it some more thought and see if it makes sense to support the `key` attribute outside the context of a component view template. I did some more investigation and verified that Marko is handling this correctly. Keys are _scoped_ IDs that are scoped within the context of a component. If there is no component then `this.getEl(elId)` wouldn't make sense. There should be a component definition for the template with the key (either an inline `class { }` or a `component.js` in the same directory). If you have any questions please let us know, but everything appears to be working as expected.  For consistency we should also automatically discover custom tags that are outside a directory  A new version should be published later today. Thanks!  Hey Fabien, sorry for the slow response. You can do the following to break out of concise syntax mode:\r\n\r\n```\r\n---\r\n    <SubObject>\r\n        <Value>primary</Value>\r\n    </SubObject>\r\n---\r\n```\r\n\r\nDoes that work for you?  We want all compiled Marko templates to be loaded in strict mode to catch problems early. As an example, Marko uses `Object.freeze()` on the state object to prevent new properties from being added that won't be watched. Without strict mode adding properties will silently fail. Marko automatically transpiles the `class` syntax into an object declaration so that the compiled template will be ES5 compatible (assuming you aren't using other ES6 syntax). It produces something like the following:\r\n\r\n_index.marko_\r\n\r\n```jsx\r\nclass {\r\n    foo() {\r\n\r\n    }\r\n    bar() {\r\n\r\n    }\r\n}\r\n\r\n<div>\r\n</div>\r\n```\r\n\r\nCompiled output:\r\n\r\n```js\r\n\"use strict\";\r\n// ...\r\nvar marko_component = {\r\n        foo: function() {},\r\n        bar: function() {}\r\n      }\r\n// ...\r\n```  With Marko v4, we now create an instance of the UI component when rendering a UI component, but the UI component instance is not publicly exposed so it is not possible to call instance methods in the marko template code. This proposal introduces a new `component` variable that can be used to reference the UI component instance as shown below:\r\n\r\n```jsx\r\nclass {\r\n    getFullName() {\r\n        return this.input.firstName + ' ' + this.input.lastName;\r\n    }\r\n}\r\n\r\n<div>\r\n    Hello ${component.getFullName()}!\r\n</div>\r\n```\r\n\r\nThoughts? Concerns?\r\n\r\n\ud83d\udc4d  or \ud83d\udc4e  ?\r\n\r\n/cc @mlrawlings @austinkelleher @philidem @mindeavor @ramses0\r\n\r\n Just to be clear @ramses0, you are in favor of this proposal as-is, correct?  I think it makes sense to have as an option, and see no harm in adding it. I like this proposal too. Thanks for the feedback. I will work on implementing this.  You should be able to nest `<await>` tags, but if you can run them in parallel, that's better to do anyway.  I believe `Promise.all` is your best bet. @mauricionr Are you rendering this client-side or server-side?  @Hesulan Thanks for reporting! `marko@4.0.0-rc.21` has been published with the fix  Thanks for the feedback @mauricionr !\r\n\r\nJust to add to what @Hesulan said, minification and [minprops](https://github.com/mlrawlings/minprops) (not yet documented) are the only two things that are strongly recommended for production builds. But yes, we will be publishing a guide for production builds. I'll keep this issue open as a reminder. Thanks, again!    Marko v3 supports scoped vars:\r\n\r\n```jsx\r\n<var x=1 y=2>\r\n  The `x` and `y` are scoped to this block.\r\n</var>\r\n```\r\n\r\nWe moved from `<var>` to `$ var` and need to rethink support for scoped variables in Marko v4. /cc @ramses0  Need to either add an error message or make changes to support dynamic top-level HTML elements. /cc @ramses0 Related:\r\n\r\n```marko\r\nclass {\r\n  test() {\r\n    console.log('test');\r\n  }\r\n}\r\n\r\n<for(_ in [0, 1, 2])>\r\n\t<div on-custom-event('test') />\r\n</for>\r\n```\r\n\r\nThrows:\r\n```\r\nReferenceError: __component is not defined\r\n```\r\n\r\n[try online](http://markojs.com/try-online/?gist=e2ea1d6b198e37077895c17e49f7038b) - [gist](https://gist.github.com/mlrawlings/e2ea1d6b198e37077895c17e49f7038b)\r\n\r\nAdding a wrapper `<div>` or even a sibling `<div>` causes the `__component` variable to be pulled in properly.    Thanks for opening this bug report @smulder. We'll take a look.     Good news: can already use the `include` tag for this\r\n\r\n```html\r\n<include(input.renderBody)/>\r\n```\r\n\r\nInclude actually looks for a `renderBody` property if its an object, so this works as well:\r\n```html\r\n<include(input)/>\r\n``` Yeah, but `data` isn't going anywhere anytime soon and we won't be adding deprecation warnings for it right away either. But all the docs for Marko 4.0 will reference `input`  When users see `<for(var x in xs)>`, they think it's native JavaScript and try to do fancy ES6 stuff like destructuring.\r\n\r\nHere's an actual attempt:\r\n\r\n    <for(const [airport, { area, name, pos: { lat, lng } }] of Object.entries(geo.airports))>\r\n\r\nI have two suggestions (not mutually-exclusive):\r\n\r\n1. Rename `for` to `each` to avoid confusion\r\n2. Give `for` native JS code support\r\n\r\nThis would be the last nail in the \"uncanny JavaScript-like tags\" coffin.  @tinovyatkin Can you provide more details?  When running the tests the file/line shows up correctly.\r\n\r\n```\r\nWARNING!!\r\nThe \"<invoke>\" tag is deprecated. Please use \"$ <js_code>\" for JavaScript in the template. See: https://github.com/marko-js/marko/wiki/Deprecation:-var-assign-invoke-tags\r\n  at test/autotests/render/invoke/template.marko:7:33\r\n```\r\n\r\nIs the `<invoke>` node being added dynamically somehow?   Failure is intermittent.  Thanks for reporting this issue. This is a result of: https://github.com/marko-js/marko/issues/560. I will have a fix up soon. This should be fixed now. A new version should be published later today.     The CI build fail looks to be an intermittent failure.  Currently, Marko supports \"scoped IDs\" in the form of a \"ref\":\r\n\r\n```html\r\n<div>\r\n  <button ref=\"ok\" type=\"button\">OK</button>\r\n  <button ref=\"cancel\" type=\"button\">Cancel</button>\r\n</div>\r\n```\r\n\r\nA nested element/widget can be looked up by a ref:\r\n\r\n```js\r\nvar okButton = this.getEl('button');\r\n```\r\n\r\nA \"ref\" attribute results in an ID attribute being assigned to the final element. For example:\r\n\r\n```html\r\n<div>\r\n  <button id=\"w0-ok\" type=\"button\">OK</button>\r\n  <button cancel=\"w0-cancel\" type=\"button\">Cancel</button>\r\n</div>\r\n```\r\n\r\n[morphdom](https://github.com/patrick-steele-idem/morphdom) uses the \"id\" attribute as a \"key\" to match up elements during a diff/patch. Therefore, marko is using the \"ref\" attribute for two purposes:\r\n\r\n- To assign a key for diffing/patching\r\n- To assign a key for referencing nested elements/widgets\r\n\r\nA \"key\" is the more general term (\"scoped-id\" is more appropriate, but too long) and \"key\" is already well understood to be used for matching up elements during diffing/patching.\r\n\r\nAs a late breaking change for the Marko v4 release, we want to rename \"ref\" to \"key\". We will introduce deprecation warnings, but we do not want to ship the \"v4\" release with support for \"ref\".\r\n\r\nThoughts? Concerns? Thanks in advance. I think this is a good change. Does using a `ref` prevent the element from being messed with during a redraw? @Hesulan For better or worse, React and all of the React variants have already hijacked the \"key\" attribute: https://facebook.github.io/react/docs/lists-and-keys.html#keys\r\n\r\nThe `key` attribute that we are proposing for Marko would serve the exact same purpose as developers are used to with React. The only difference is that we would also be using the `key` attribute to allow an element/widget to be referenced by the `key` (that is, `getEl(<key>)`, `getWidget(<key>)`). In comparison, React has a separate concept of a `ref` which started out as a string, but is now a function: \r\n\r\n```jsx\r\n<input\r\n  type=\"text\"\r\n  ref={(input) => { this.textInput = input; }} />\r\n```\r\n\r\nThat is another reason we want to get away from `ref`.\r\n\r\n(side note, React requires a lot of code to reference an element... uggh)\r\n\r\n@mindeavor \r\n\r\n> Does using a ref prevent the element from being messed with during a redraw?\r\n\r\nNo, it doesn't impact rendering. It only impacts how elements are matched up for diffing purposes. DOM elements with the same `key` are guaranteed to be diffed against each other. Even without specifying a `key` things will still render correctly, but the developer might notice unexpected behavior (e.g., focus moving to the wrong element or CSS transitions being applied incorrectly).\r\n\r\n Also, just to be clear, this would be a simple internal rename from `ref` to `key`. It would require minimal code change (although we would have to go fix all of the tests and sample apps :/ ). Thanks for taking this on @austinkelleher ! We want to show a deprecation warning initially and publish a new `rc` release. We will completely remove support for `ref` and the deprecation warnings when we do the final v4 release.    Just to clarify \u2013 you meant to say \"because a joined empty array is falsey\", correct?  `getTemplateData` was necessary for v3 widgets because there was only `data` passed to the template and we needed some way to get `state` into the template as well as any input data you might have also needed.  \r\n\r\nIn v4, your template receives an `input` variable (also aliased as `data` for compatibility) and a separate `state` variable is available to your template if you set `this.state` in your component's class.  You can then access both `state` and `input` in your template.  You no longer need `getTemplateData` to make this data available to your template.  If you need to massage the input data that is being passed in as `input`, you can return a different value from `onInput`.\r\n\r\n**Old:**\r\n```js\r\nmodule.exports = require('marko-widgets').defineComponent({\r\n    template: require('./template.marko'),\r\n    getInitialState(input) {\r\n        return { count:0, color:input.color };\r\n    },\r\n    getTemplateData(state, input) {\r\n        return state;\r\n    },\r\n    increment() {\r\n        this.setState('count', this.state.count+1);\r\n    }\r\n})\r\n```\r\n```xml\r\n<div w-bind>\r\n    The current count is <span style={ color:data.color }>${data.count}</span>\r\n    <button w-on-click=\"increment\">+1</button>\r\n</div>\r\n```\r\n\r\n**New:**\r\n```jsx\r\nclass {\r\n    constructor(input) {\r\n        this.state = { count:0 };\r\n    }\r\n    increment() {\r\n        this.state.count++;\r\n    }\r\n}\r\n\r\n<div>\r\n    The current count is <span style={ color:input.color }>${state.count}</span>\r\n    <button on-click('increment')>+1</button>\r\n</div>\r\n``` `getTemplateData` was technically part of the v3 style legacy widgets, but the code was so intermixed that you could still use certain legacy methods with the new components. That code has now been split out - is there still a need for it, or was it just surprising? I wouldn't recommend it, but you could do the following:\r\n\r\n```jsx\r\nimport { getTemplateData } from './component';\r\n\r\n$ var data = getTemplateData(state, input);\r\n\r\n<div>\r\n    Hello ${data.name}!\r\n</div>\r\n```  Currently, if you have a template with the following\r\n```xml\r\n<some-tag-that-does-not-exist/>\r\n```\r\n\r\nThe following HTML will be output:\r\n```xml\r\n<some-tag-that-does-not-exist></some-tag-that-does-not-exist>\r\n```\r\n\r\nWe should instead throw an Error if the tag is not a standard HTML tag or has not been defined as a Marko custom tag.  This will help catch typos as well as users who might accidentally write concise style tags at the root when they meant text (or tried to write JS).  If you are using webcomponents, you will be able to list those tags in a `marko.json` file.\r\n\r\nThe Error message will contain helpful info.  Something like \r\n\r\n```\r\nMarko does not recognize the <di> tag.  Did you mean <div>?  \r\nIf you do want to output the <di> tag as HTML, you can whitelist \r\nit in your marko.json file. See https://markojs.com/docs/somepage \r\nfor more info.\r\n``` @jsumners see the comment from @mlrawlings above. The idea is that you would need to whitelist the custom elements by registering them in your project's `marko.json`:\r\n\r\n_src/marko.json:_\r\n\r\n```js\r\n{\r\n  \"<my-custom-element>\": { /* empty */ }\r\n}\r\n```\r\n\r\nIt's a tradeoff, but I am in favor of catching problems earlier at compile-time. I suppose we could come up with a way for declaring non-standard tags as being tags that should passthrough. For example:\r\n\r\n```\r\n<!my-passthrough-tag></!my-passthrough-tag>\r\n<-my-passthrough-tag></-my-passthrough-tag>\r\n<my-passthrough-tag custom-element></my-passthrough-tag>\r\n```\r\n\r\nI'm not saying that is a good idea, but I am just through that out there. Personally, I think registering the tag in `marko.json` is a reasonable tradeoff since you also get autocompletion for free and better error checking and reporting at compile-time. We do already throw errors for mismatched tags.  This may come up more in concise mode since the tag does not need to be repeated, but also in HTML when using the self-closing syntax.\r\n\r\nI'm not sure this is a good idea, but we could have a global \"off\" switch for this behavior if there are users that are heavily using Custom Elements and don't wish to list them all.  If there was info about how to do that in the docs linked in the error I think that would eliminate any potential confusion. I think @jsumners has a point. It might only make sense to throw an error on a would-be concise tag.\r\n\r\nMy vote is for disabling concise mode by default (with exceptions for `class`, `import`, and `export`), and making it easy to enable it via a flag. That should solve most all confusion around syntax. I can definitely see how having many tags to whitelist would be annoying.  For example [a-frame](https://aframe.io/docs/0.4.0/introduction/) has 20+ custom tags implemented as web components.  But if we allowed you to whitelist patterns like `<a-*>` it wouldn't be too bad.\r\n\r\n@Hesulan If we're doing this it needs to be the default as one of the big reasons for these kind of helpful error messages is to help beginners who likely won't realize there's some way to opt-in to warnings.\r\n\r\n@mindeavor \r\n\r\n> My vote is for disabling concise mode by default\r\n\r\nWhile we could put some modifier in the template (e.g. `@concise`), I don't like the idea that concise users would have to put boilerplate in every file. Putting that configuration in a separate file would break syntax highlight so that would not be an option.\r\n\r\nRoot level text would also be an issue if there was some global way to turn concise on or off because what would be parsed as text in HTML mode would be parsed as concise tags in concise mode. I'm not convinced this is the right idea, but we could also only have the warning for tags names without dashes in their name.  Custom Elements [require hyphens in their names](https://www.w3.org/TR/custom-elements/#valid-custom-element-name) so we wouldn't catch those tags with this rule. When building a complex project you will often need to rename a UI component. It would be _really_ nice if you could recompile all of your templates to figure out exactly which UI components broke as a result of the name change. I'm strongly in favor of throwing an error when the Marko detects an unrecognized tag as long as we get the error message **perfect** (the developer should know exactly what to do to register the tag and it should be super simple). > I don't like the idea that concise users would have to put boilerplate in every file\r\n\r\nSorry, I meant a global flag. Something like `require('marko/compiler').config({ conciseSyntax: true })` > Sorry, I meant a global flag. Something like require('marko/compiler').config({ conciseSyntax: true })\r\n\r\nThat won't work because the syntax highlighter would not have that context and do syntax highlighting independently. Can there not be two highlighter definitions? Sublime supports it, at least. Someone enabling `conciseSyntax: true` will know that they're opting into extra syntax, and that they'll want to change to the relevant highlighter if they want those niceties. @Hesulan I don't dislike concise mode per se; I only point out that supporting both concise and normal syntax *at the same time* is the root of all these problems. If concise were opt-in, all the pitfalls disappear (or at least be hidden behind a global flag). If concise were disabled, @ramses0's examples of surprises would no longer be surprising; they would do what you'd expect in any HTML document.\r\n\r\n```html\r\nthis is\r\nfor\r\nyou\r\n<h1>Test</h1>\r\nvar not_a_var = \"this is just text, just like HTML\"\r\n\r\nfor this is text as well!\r\n\r\n${ \"interpolated\" + \"value\" }\r\n$ console.log(\"this is JS code. Iffy, but acceptable\")\r\n\r\nI am plain text\r\n<my-custom-element>\r\n  No problems here\r\n</my-custom-element>\r\n``` @Hesulan As clarification, the idea for this originally stemmed from the discussion we (@mindeavor, @ramses0 and I) had on how to reduce any confusion around syntax, specifically concise syntax at the root, but I think it has enough merit to stand on its own.  \r\n\r\nThat it would throw an error for unintentional concise tags at the root is only one benefit. Related to this, Patrick and I are looking at creating a \"standard\" of sort that could be adopted by web component libraries to make their custom tags visible to tooling.  \r\n\r\nMarko's autocomplete in Atom was originally forked from [`autocomplete-html`](https://github.com/atom/autocomplete-html) and it was extended to autocomplete not just HTML elements, but also Marko custom tags that were discovered through directory scanning and `marko.json` files.\r\n\r\nWe're thinking that we could submit a PR back to the original package that would support discovering an `html-elements.json` in project, but also at the root of any packages that the project depends on.  This process and the format of the json file would be similar to the Marko process and format, which has worked well for us.\r\n\r\nThis would allow a web component package to simply add this file (which could be generated) and autocomplete would be made available to the `autocomplete-html` package (which has over 200k downloads).  There's an immediate benefit to doing so, but future tools would also be able to make use of this information.\r\n\r\nAnd of course so would Marko.  If we could get the web community to adopt this, it would mean you might never (or rather, rarely) have to add definitions/exceptions for third-party custom element tags on your own.\r\n\r\nThat's definitely a big \"IF\", but between reaching out to other developers, possibly making some PRs to popular libraries and the fact that there's benefit to the libraries and end users (it's not purely driven by a need of Marko) it could very well work. Great idea. I fully support that. @Hesulan Saving people from root-level text is the whole point of this thread, isn't it? It's only a problem because of automatic concise mode.\r\n\r\n> This will help catch typos as well as users who might accidentally write concise style tags at the root when they meant text (or tried to write JS). @Hesulan I know the goal is to prevent typos, but the only reason this came up is because of concise mode. After all, **any** custom element tag is valid HTML.\r\n\r\nIn *principle* there should be no errors thrown, because an unknown tag is 100% valid in the browser. However, in *practice* I don't feel that strongly about it, and wouldn't mind if these errors made it in.\r\n\r\nActually, this just dawned on me \u2013 custom element tags are only valid HTML [if they contain a dash within the name](https://w3c.github.io/webcomponents/spec/custom/#h-note2). Since JavaScript keywords nor identifiers can contain dashes, doesn't that mean there is only a reason to throw errors on unrecognized single-word tags? oops, I totally missed his comment on that :) I still think starting with throwing on all unrecognized tags is a sane default and the error message would point you to information on how to configure things:\r\n\r\n### Configuring in `marko.json`\r\n\r\nThrow on any unrecognized tag (default value):\r\n```js\r\n{\r\n    \"ignore-unrecognized-tags\": false || []\r\n}\r\n```\r\n\r\nTurn off errors/warnings:\r\n```js\r\n{\r\n    \"ignore-unrecognized-tags\": true || [\"*\"]\r\n}\r\n```\r\n\r\nTurn off errors for tags with dashes:\r\n```js\r\n{\r\n    \"ignore-unrecognized-tags\": [\"*-*\"]\r\n}\r\n```\r\n\r\nTurn off errors for certain tags from polymer:\r\n```js\r\n{\r\n    \"ignore-unrecognized-tags\": [\"paper-*\", \"iron-*\", \"google-*\"]\r\n}\r\n```\r\n\r\n### Defining individual tags in `html-elements.json`\r\n\r\nWe still need to figure out the details on this, so this probably wouldn't make it in right away.\r\n\r\nDefining tags in `html-elements.json` will make it so Marko recognizes them and won't throw, but Marko's atom plugin will also pick them up and make them available for autocompletion when authoring your templates and components.\r\n\r\nThe goal would be for authors of the web components to generate this file as part of the web component package.\r\n\r\n```js\r\n{\r\n    \"<paper-button>\": {\r\n        \"url\":\"https://elements.polymer-project.org/elements/paper-badge\",\r\n        \"description\":\"<paper-badge> is a circular text badge that is displayed on the top right corner of an element, representing a status or a notification. It will badge the anchor element specified in the for attribute, or, if that doesn't exist, centered to the parent node containing it.\",\r\n        \"@for\": {\r\n            \"type\":\"String\",\r\n            \"description\":\"The id of the element that the badge is anchored to. This element must be a sibling of the badge.\",\r\n        },\r\n        \"@icon\": {\r\n            \"type\":\"String\",\r\n            \"description\":\"An iron-icon ID. When given, the badge content will use an <iron-icon> element displaying the given icon ID rather than the label text. However, the label text will still be used for accessibility purposes.\",\r\n        },\r\n        \"@label\": {\r\n            \"type\":\"String\",\r\n            \"description\":\"The label displayed in the badge. The label is centered, and ideally should have very few characters.\",\r\n        },\r\n        \"@target\": {\r\n            \"type\":\"String\",\r\n            \"description\":\"Returns the target element that this badge is anchored to. It is either the element given by the for attribute, or the immediate parent of the badge.\",\r\n        }\r\n    }\r\n}\r\n For the record, I now believe this was the right choice. After upgrading to rc.13, marko immediately informed me about two invalid tags that I forgot to change during a rename! \ud83d\ude04  @mindeavor I experienced the same thing. We had some tests that were incorrectly referring to unregistered tags. I'm not very impressed with the Github Wiki system, but we decided to put details on errors in the Wiki: https://github.com/marko-js/marko/wiki/Error%3A-Unrecognized-Tag\r\n\r\nPlease let us know if you see any issues!  The `class` tag currently supports creating a component when anonymous:\r\n```jsx\r\nclass {\r\n   constructor() {}\r\n}\r\n```\r\nBut creates a normal JS class when it has a name:\r\n```jsx\r\nclass Foo {\r\n   constructor() {}\r\n}\r\n```\r\n\r\nWe want to remove the second functionality.  It will _always_ create a component's class and you can optionally name that class.  With the new `$ <code>` syntax, we have a better way to add JS to a template and no longer need these tags.  We do want to make them available for the v3 -> v4 migration.  Should we just add a deprecation warning or split them out into a `marko-v3-compat` package? My preference would be to split them out so we're rid of them as v4 users, but it makes things a little tricky with sub packages that export tags because taglibs outside of Marko are not global. Related: #379 I think a migration package is a good idea. If one intends to move from v3 to v4, installing a package would be the least of those efforts.\r\n\r\nWhat do you mean by sub packages that export tags? @mindeavor Say I am using a package with a taglib that is intended to be share across apps, let's call it `ui-components` and say one of the tags it exports is `<ui-carousel>`.  \r\n\r\n`ui-components` was developed against v3 and as such uses legacy widgets.  The way things currently stand with v4, these components should still be able to be used with a v4 app.\r\n\r\nThe problem in moving deprecated tags out to a package is that if the `<ui-carousel>` template uses the `<var>` tag, it wouldn't be discovered because templates only look for tags in packages that their package (in this case `ui-components`) directly depends on.  It wouldn't look at the application's dependencies to find `marko-v3-compat`.\r\n This really isn't an issue as we could use the not-really-documented [`taglibLookup.registerTaglib`](https://github.com/marko-js/marko/blob/master/compiler/index.js#L229-L234) to make it globally available.  But if there is any runtime code (which there isn't in this case) using that API can cause discoverability problems. @Hesulan We actually are using the parser in legacy mode in v3 and have a number of warnings, including the [switch from `-` to `--`](https://github.com/marko-js/htmljs-parser/blob/master/Parser.js#L1359-L1361).  The goal is to allow users to upgrade without any changes if there are no deprecation warnings in v3. This might be a crazy idea, but what about a `marko-v4-stepping-stone` package that enables v4 syntax for v3 and adds deprecation warnings for all the old stuff from v3? Oh interesting, I didn't know `<var>` could use body text like that. Is that scope actually enforced? > The introduction of $ var flavor=input.someFunc() kill the template and you end up with PHP all over again.\r\n\r\nLet's be honest here: We don't get PHP simply because of `<? ?>` tags. Unless you consider Ruby on Rails and ERB to be PHP as well!\r\n\r\nI do find the `<var x=10>...</var>` feature interesting. To avoid potential confusion with JS, maybe you could rename it to something like `<scoped x=10>`, for those who want that feature. Fixed by https://github.com/marko-js/marko/commit/768d8085f7adc8811e027ec7a88cae682a703a9e (thank you @austinkelleher !) The scoped variables use case is interesting. I'm not opposed to introducing something to support that use case, but I am not convinced `<var>...</var>` was the best solution. @ramses0, what are your thoughts on the following? :\r\n\r\n```html\r\n<div>\r\n    <scope>\r\n        $ var name = 'Frank';\r\n        $ function doSomething() {\r\n        \r\n        }\r\n\r\n        <span>Hello ${name}!</span>\r\n    </scope>\r\n    <!-- `name` and `doSomething` will be undefined here -->\r\n</div>\r\n```  \u2026ing the Node.js require hook.\r\n\r\nAlso allows passing `extensions` or `extension` as options to `handleFileModified`.  Hey @steebchen, this is a duplicate of [Issue #363 - Auto hot reload for any extensions provided when installing the Node.js require hook](https://github.com/marko-js/marko/issues/363). Would you have any interest in working on this? At the moment, that issue is lower priority, but we do plan to have it resolved by the time of the final v4 release. @austinkelleher has completed the work for this and we'll publish a new release candidate soon  @jasonmacdonald can you please point to the code? `Symbol()` should not be used in browser code and all of our tests are running in a very older version of V8 that doesn't support `Symbol` so I would not expect `Symbol` to be used. Also, which JS module bundler are you using (Lasso, webpack, etc.)? There is a \"widgets/util.js\" and a \"widgets/util-browser.js\". We remap the former to the latter by putting a `browser` field in the `package.json` file: https://github.com/marko-js/marko/blob/44c38e74ad1a0c515ab96a05169f9c096678a3c2/widgets/package.json#L6\r\n\r\nAll JavaScript module bundlers (including Browserify, rollup, lasso, webpack, etc.) should respect the `browser` field. If you can provide a simple app to reproduce the problem with `browserify` that would be helpful. It could be a bug in browserify or it could be some strange combination of things. We should definitely investigate because browserify is supported.  > I suspect this is working as intended\r\n\r\nIt is, but with a little work, we can get the result you want.\r\n\r\n> I also tried using input.renderBody(out, WidgetB_data), inside WidgetB. But, that still seems to use WidgetA data.\r\n\r\n@jasonmacdonald You're on the right track! \r\n\r\nBefore we get to the solution, I want to show you _why_ this is what is happening (and why it makes sense).  This is a simplified version of what gets compiled for Widget A:\r\n\r\n```js\r\n\r\nfunction render(data, out) {\r\n    widget_b({ \r\n        data:2, \r\n        renderBody: function(out) {\r\n            out.w('<div>'+data+'</div>');\r\n        }\r\n    }, out);\r\n}\r\n```\r\n\r\nSo, it's no surprise that `data` comes from Widget A in this case.  Or that passing an additional value to `renderBody` didn't work, because it only has an `out` parameter &mdash; but we can change that.\r\n\r\nIn the `marko-tag.json` file for Widget A (or the `marko.json` file under the Widget A definition), you can add a new key [`\"var\"` or `\"vars\"`](https://github.com/marko-js/marko/blob/eb2351212d32fb09959d1823f347ce6203070b7f/compiler/taglib-loader/loader-tag.js#L452-L481) (note it is not prefixed with `@` like an attributes). `var` takes a string as its value while `vars` takes an array, but in both cases the variable(s) are added as parameters to the `renderBody` function.\r\n\r\nSo with this in your `marko-tag.json` for Widget A,\r\n```js\r\n{\r\n    \"var\": \"data\"\r\n}\r\n```\r\n\r\nThe new output would be:\r\n```js\r\nfunction render(data, out) {\r\n    widget_b({ \r\n        data:2, \r\n        renderBody: function(out, data) {\r\n            out.w('<div>'+data+'</div>');\r\n        }\r\n    }, out);\r\n}\r\n```\r\n\r\nAnd now `input.renderBody(out, data)` would work as expected.\r\n\r\n**But**, I would recommend that you don't just name the parameter `data` as the user of Widget A may still want access to Widget A's data and you're essentially preventing the user from accessing it by naming the parameter the same.\r\n\r\nThere's also a more flexible value that can be passed to `var` (or as an entry in the `vars` array): \r\nan object with the key `\"name-from-attribute\"`.  This allows the user to specify what they want the parameter to be called:\r\n\r\nWidget A's `marko-tag.json`:\r\n\r\n```js\r\n{\r\n    \"var\": { \"name-from-attribute\": \"param\" }\r\n}\r\n```\r\n\r\nUsage:\r\n\r\n```jsx\r\n<widgetB data=\"2\" param=\"nestedData\">\r\n   <!-- trying to declare this inner content as a template \r\n   to be used to render the contents of Widget B -->\r\n   <div>${nestedData}</div>\r\n</widgetB>\r\n```\r\n\r\nThe new output would be:\r\n```js\r\nfunction render(data, out) {\r\n    widget_b({ \r\n        data:2, \r\n        renderBody: function(out, nestedData) {\r\n            out.w('<div>'+nestedData+'</div>');\r\n        }\r\n    }, out);\r\n}\r\n```\r\n\r\nAnd you can call `input.renderBody(out, data)` and that second `data` parameter will be made available in the `renderBody` method as `nestedData` &mdash; which the user chose. I also want to point out that we add one more layer on top of this for the await tag.  The await tag is used like:\r\n\r\n```html\r\n<await(value from promise)>\r\n    ${value}\r\n</await>\r\n```\r\n\r\nWe transform this to the following in the [await transformer](https://github.com/marko-js/marko/blob/master/taglibs/async/await-tag-transformer.js#L28-L29):\r\n\r\n```jsx\r\n<await _var=\"value\" _dataProvider=\"promise\">\r\n    ${value}\r\n</await>\r\n```\r\n\r\nThe await tag also has `{\"name-from-attribute\":\"_var\"}` specified in the [`marko.json`](https://github.com/marko-js/marko/blob/master/taglibs/async/marko.json#L53-L55)\r\n\r\nWhich results in `value` (in this case) being made the second parameter to `input.renderBody`.  Then we just wait for the promise to resolve and [pass the result to `renderBody`](https://github.com/marko-js/marko/blob/master/taglibs/async/await-tag.js#L120). This should work:\r\n\r\n```html\r\n<div for(item in items)>\r\n    <invoke data.renderBody(out, item)/>\r\n</div>\r\n```\r\n\r\nNote, that in 3.0 if `<tileList>` stateful, `renderBody` won't be available the second time around, but this is fixed in 4.0 if you do:\r\n\r\n```html\r\n<div for(item in items)>\r\n    <include(data.renderBody, item)/>\r\n</div>\r\n``` Marko 4 includes widgets, so you don't need `marko-widgets` anymore @jasonmacdonald Adding the `marko-tag.json` file as you did is the correct thing to do. We'll revisit the docs for v4 to make things more clear. Since we are completely reworking the documentation I'm going to go ahead and close this issue. In the meantime, please let us know if you have any specific questions...happy to help.  We no longer want to hijack the standard HTML `<style>` tag to avoid confusion and future problems. Instead, we will use the following:\r\n\r\n```css\r\nstyle {\r\n    .foo {\r\n        background-color: 'red';\r\n    }\r\n}\r\n<div>Hello World</div>\r\n```\r\n\r\nOr, with a specific CSS preprocessor language:\r\n\r\n```css\r\nstyle.less {\r\n    .foo {\r\n        background-color: 'red';\r\n    }\r\n}\r\n<div>Hello World</div>\r\n```  We've decided to stop hijacking the script tag and use concise style tags that look like JS instead.\r\n\r\n### Deprecate `<script>` with export\r\n\r\nOld:\r\n\r\n```html\r\n<script>\r\n   module.exports = {\r\n      handleClick() {\r\n         alert('hi!')\r\n      }\r\n   }\r\n</script>\r\n\r\n<button on-click('handleClick')>Click me!</button>\r\n```\r\n\r\nNew:\r\n\r\n```jsx\r\nclass {\r\n   handleClick() {\r\n      alert('hi!')\r\n   }\r\n}\r\n\r\n<button on-click('handleClick')>Click me!</button>\r\n```\r\n\r\n### Deprecate `<script template-helpers>`\r\n\r\nOld:\r\n\r\n```html\r\n<script template-helpers>\r\n   function sum(a, b) {\r\n      return a + b;\r\n   }\r\n</script>\r\n\r\n<div>The sum of 1 + 2 is ${sum(1, 2)}</div>\r\n```\r\n\r\nNew:\r\n```jsx\r\nstatic function sum(a, b) {\r\n   return a + b;\r\n}\r\n\r\n<div>The sum of 1 + 2 is ${sum(1, 2)}</div>\r\n```\r\n\r\n\r\n### Moving to an external file\r\n\r\nOne concern you may have is that with the `<script>` with export approach, the only change required to move a component to an external `.js` file was copy and paste.  Admittedly, it's not _quite_ that simple, but it's still really easy.\r\n\r\nThis template:\r\n```jsx\r\nimport sum from './helpers/sum';\r\n\r\nclass {\r\n   handleClick(a, b) {\r\n      console.log(sum(a, b))\r\n   }\r\n}\r\n\r\n<button on-click('handleClick', 3, 4)>Click me!</button>\r\n```\r\n\r\nbecomes these two files\r\n\r\n_component.js_\r\n```js\r\nimport sum from './helpers/sum';\r\n\r\nexport default class {\r\n   handleClick(a, b) {\r\n      console.log(sum(a, b))\r\n   }\r\n}\r\n```\r\n_index.marko_\r\n```xml\r\n<button on-click('handleClick', 3, 4)>Click me!</button>\r\n```\r\n\r\nSo we copied over _and had to add an export statement_.  Still pretty simple. What does moving static functions over to `component.js` look like? @mlrawlings Can you update this issue to also mention:\r\n\r\n```js\r\nstatic {\r\n  function myHelper() { ... }\r\n  var foo = 'hello';\r\n}\r\n```\r\n\r\nI wonder if it makes sense to recommend `static { ... }` because it makes it a little easier to move those functions how to a separate file if needed (only the block content needs to be copied out) @mindeavor, @philidem and I had an impromptu discussion based on concerns raised in the Gitter chat room. The following proposal seemed to be liked by everyone:\r\n\r\n```js\r\nstatic {\r\n    function myHelper() {\r\n         /* ... */ \r\n    }\r\n\r\n    class ViewModel {\r\n        constructor(data) {\r\n            this.data = data;\r\n        }\r\n\r\n        get fullName() {\r\n            return this.data.firstName + this.data.lastName;\r\n        }\r\n    }\r\n}\r\n\r\ncomponent style lang=\"less\" scoped {\r\n    .foo {\r\n        background-color: 'red';\r\n    }\r\n}\r\n\r\ncomponent class {\r\n    onInput() { /* ... */ }\r\n    handleButtonClick() { /* ... */ }\r\n}\r\n```\r\n\r\nReopening the issue for discussion. It's not too late to voice your approval or concerns. Although I find that syntax ok, my ideal syntax would still be something like this:\r\n\r\n```html\r\n<script marko>\r\nimport helper from 'library';\r\n\r\nclass Component {\r\n    onInput() { /* ... */ }\r\n    handleButtonClick() { /* ... */ }\r\n}\r\n\r\nfunction myHelper() {\r\n     /* ... */ \r\n}\r\n\r\nclass ViewModel {\r\n    constructor(data) { /* ... */ }\r\n    get fullName() { /* ... */ }\r\n}\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scoped>\r\n.foo {\r\n    background-color: 'red';\r\n}\r\n</style>\r\n\r\n<div class=\"the-component\">\r\n    <h1>${ state.name }</h1>\r\n</div>\r\n``` I think it's good and unsurprising that marko transforms `<style>` tags. I wouldn't want my styles to be inlined every time I use the component :)\r\n\r\nIf we really want to stay away from `<script>`, then we can use a different name instead:\r\n\r\n```html\r\n<component>\r\nimport helper from 'library';\r\n\r\nclass {\r\n    onInput() { /* ... */ }\r\n    handleButtonClick() { /* ... */ }\r\n}\r\n\r\nfunction myHelper() {\r\n     /* ... */ \r\n}\r\n\r\nclass ViewModel {\r\n    constructor(data) { /* ... */ }\r\n    get fullName() { /* ... */ }\r\n}\r\n</component>\r\n```\r\n\r\nMy primary preference is to have a single tag for all my JS code if possible. > I think it's good and unsurprising that marko transforms <style> tags. I wouldn't want my styles to be inlined every time I use the component :)\r\n\r\n@mindeavor I mostly agree (which is why this is the current behavior), but there is the concern that someone could be using Marko as a pure template language (without lasso, webpack, etc) &mdash; something we still want to support.  Suppose you had a template like the following that you wanted to include in the `<head>` of many pages:\r\n```html\r\n<title>${data.title ? data.title + ' | Marko' : 'Marko'}</title>\r\n<link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href=\"/public/favicon.png\" />\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\"/>\r\n<style>\r\n    body { background:#f00; }\r\n</style>\r\n```\r\nIt would probably be surprising if your `<style>` tag didn't show up in the output.\r\n\r\n\r\n> I really like this proposal. Correct me if I'm wrong, but I'm assuming the HTML syntax would look like:\r\n> ```xml\r\n> <static {\r\n>    function myHelper() { /* ... */ }\r\n> } />\r\n> <component class {\r\n>     onInput() { /* ... */ }\r\n> } />\r\n\r\n@Hesulan Yes that would be the equivalent HTML syntax, but I don't think that's a good idea (and Patrick is talking about potentially making that invalid).\r\n\r\n> Would <static> still accept body content like <script marko-init> did?\r\n\r\nIt does not with the current implementation, but that would be trivial to implement.  It would require updating the syntax highlighter though.\r\n\r\n I would like to point out that I prefer the HTML syntax, _but_ I think it makes sense to use the concise syntax for these JS-like tags and other tags that don't directly affect the output, while still using the HTML syntax for tags that are actually involved in rendering the final HTML output.\r\n\r\n`<script>` and `<style>` not ending up in the output HTML doesn't fit with the default expectation and for someone learning how to write a component, they will look up the documentation and follow what it says.  I don't think there's some default expectation that putting something in a `<script>` allows you to create component methods that can be attached to elements - this idea is foreign to HTML and why we need something like Marko in the first place.\r\n\r\nRegarding `component class` or `component style`, everything in the template is _for_ the component.  It is redundant to say `component`.\r\n\r\nFor someone who is new to Marko, I really find it difficult to believe that someone would look at the following and not understand what is happening.  And I don't see how wrapping this in a `<script>` tag would make it any less intimidating.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/1958812/22353057/8e1b2186-e3d3-11e6-8476-e74234ab757e.png) @mlrawlings I generally agree with what you're saying. `style {}` is fine, and so is `class` in your simple example. Using curly brackets to differentiate between html tags and output is a good idea too.\r\n\r\nThe problem appears when you want something more than just a `class`. Specifically:\r\n\r\n- Where do I put imports?\r\n- Where do I put helper functions?\r\n- Where do I put static data?\r\n\r\n`class` is not really a class, but a special tag that looks like JavaScript. The current answers are in the same vein: a special `import` tag, a special `function` tag, and a special `static` tag. Put this together with `var`, `for`, and probably others, and you've reached an uncanny valley of javascript-but-not-really-javascript syntax.\r\n\r\nThe reason I was ok with `component class {}` was that the word `component` immediately tells you something special is going on, to up your guard and not think you can write just any JavaScript code in this file.\r\n\r\nAnother proposal with these things in mind:\r\n\r\n```jsx\r\nscript {\r\n  import helper from 'library';\r\n\r\n  class Component {\r\n    onInput() { /* ... */ }\r\n    handleButtonClick() { /* ... */ }\r\n  }\r\n\r\n  var languages = ['js', 'css', 'html']\r\n\r\n  function myHelper() {\r\n     /* ... */\r\n  }\r\n\r\n  class ViewModel {\r\n    constructor(data) { /* ... */ }\r\n    get fullName() { /* ... */ }\r\n  }\r\n}\r\n\r\nstyle {\r\n  .count {\r\n    font-size: 3rem;\r\n    padding: 0.5rem;\r\n    width: 3rem;\r\n  }\r\n}\r\n\r\n<button on-click('handleButtonClick') />\r\n<select>\r\n  <option for(lang in languages) value=lang>lang</option>\r\n</select>\r\n``` The \"component class\" is special and I believe it deserves to be moved up to the root. I think a block consisting of curly braces is a good indicator that the code is JS/CSS. Taking your example, I think the following reads really well:\r\n\r\n![marko-syntax](https://cloud.githubusercontent.com/assets/978214/22354955/014cc216-e3e5-11e6-9b43-a97c41a33595.png)\r\n \u261d\ufe0f @patrick-steele-idem That does look nice.\r\n\r\n## Other thoughts\r\n\r\n> and not think you can write just any JavaScript code in this file.\r\n\r\n@mindeavor I understand that concern and I could probably be convinced to dial back some of the JS tags introduced in v4, specifically `class` (for non-component classes) and `function` and probably `invoke`, maybe even `assign` and `var` &mdash; we could require them to be within a JS block where any JS is valid.\r\n\r\nBeside the fact that I like the component's class definition at the top-level, I really think that within the `static` block (or `script` as you suggested - but I think [static](https://en.wikipedia.org/wiki/Static_variable) is the right term) that it should be _\"Just JavaScript\u2122\"_.  You shouldn't have a special `class Component` that gets picked up in some magical way - that kind of stuff should happen in Marko land.\r\n\r\nHere's my current thoughts on the list of \"JS\" tags we should support and their rational:\r\n\r\n### `static { ... }` to embed static javascript code\r\nWe need a way to have code that runs statically, that is once when the template is loaded and then is available every time the template is rendered.  This beats `<script marko-init>` because this is not included in the output - see previous messages for more detail.\r\n\r\n### `{{ ... }}` to embed runtime javascript code (in the `render` method)\r\nCurrently we have `var`, `invoke`, and `assign` tags (and we added `function` and `class` in v4) but maybe we deprecate those? We also have scriptlets (`<% ... %>`), but sticking with our curly brace notation seems to make sense and using something that could be interpolated in both HTML and concise syntax. (This would actually be a language level thing, like scriptlets, not a tag).\r\n\r\n### `class { ... }` to define a component's class\r\nDefining the component's class is somewhat special, and I don't think we should start modifying what you're expecting to be pure JS.  Just by seeing `class`, it lets you know exactly what syntax is allowed inside the `{ ... }` because it's a 1:1 match with JS.  (This would be my argument against something like `component {}`).\r\n\r\n### `style { ... }` to define a component's style\r\nWe need a way to write styles and don't want to hijack the `<style>` tag.\r\n\r\n### `import` to pull in external helpers\r\nFor one, this is ES6 syntax, but we generate CommonJS `require` calls, so you wouldn't need any extra transpilation step.  I also really feel like imports should be at the top outside of a block, but maybe that's not valid?\r\n\r\n### `export` to export data attached to the template\r\nThere are some legitimate cases where you might want to export some values from a template.  The template lives in a `marko_template` variable that gets generated, but that shouldn't be manipulated directly, the `export` tag will do that for you.  (Having this tag also is somewhat of an argument for `import` to make things balanced).\r\n\r\n### `var`\r\nDo we need var?  It already exists in v3 and we probably don't want to remove it at this point, right?  I agree that it's kinda nice to not have to wrap `var` in `{ ... }`, but the same could be argued for any JS statement, so where do we draw the line?\r\n\r\n\r\n## What about...\r\n\r\n@patrick-steele-idem, @mindeavor What are your thoughts on this example?\r\n\r\n```jsx\r\nimport { CurrencyFormatter } from './formatters';\r\n\r\nstatic {\r\n    var format = new CurrencyFormatter('usd');\r\n}\r\n\r\nclass {\r\n    constructor(input) { ... }\r\n    adjustPrice(index, amount) { ... }\r\n}\r\n\r\n{{ var products = state.products; }}\r\n\r\n<table>\r\n    <tr for(i, product in products)>\r\n        {{ var name = product.name;\r\n           var price = product.price; }}\r\n\r\n        <td>${ name }</td>\r\n        <td>${ format(price) }</td>\r\n        <td on-click('adjustPrice', i, -1)>- $1.00</td>\r\n        <td on-click('adjustPrice', i, +1)>+ $1.00</td>\r\n    </tr>\r\n</table>\r\n``` @mlrawlings I think dialing back the JS tags is a great solution. Having a minimal number of them makes me a lot more comfortable explaining and promoting the idea to others.\r\n\r\nI think I agree with all your points in tandem; your example suits well with me. The only confusion I foresee is people trying to `import` or `require` within `static`, but good error messages should be able to mitigate.\r\n\r\nThe special tag for runtime code makes a lot of sense when you compare it to the `static` tag; presenting them together makes them easy to explain.\r\n\r\nIf you don't mind a bit of bikeshedding... I think `%{}` would be a nicer than `{{}}`, since it parallels with `${}` :) > If you don't mind a bit of bikeshedding... I think `%{}` would be a nicer than `{{}}`, since it parallels with `${}` :)\r\n\r\nTotally fine.  I have some more thoughts to share on the stylistic front.  And would like your opinion on some of these things.\r\n\r\nOne _small_ issue I have with `static { ... }` is that it kinda seems as if the JS is scoped to that block, when in reality it's available throughout the template and even to the `class`.\r\n\r\nIf you look at the OP, `static` also supports an \"inline\" mode where you can have a single statement without a block:\r\n\r\n```js\r\nstatic var foo = 123;\r\n```\r\n\r\nI'm curious what you think of this mode, but I like that it brings the statement up to the top level, but I still know that anything following the `static` keyword is just JS.\r\n\r\nIn any case, I wonder if we could have something that gives us a similar experience for the runtime JS.  I still want something that could be (safely) interpolated within HTML.  \r\n\r\n\r\n```jsx\r\nimport { CurrencyFormatter } from './formatters';\r\n\r\nstatic var format = new CurrencyFormatter('usd');\r\n\r\nclass {\r\n    constructor(input) { ... }\r\n    adjustPrice(index, amount) { ... }\r\n}\r\n\r\n% var products = state.products;\r\n\r\n<table>\r\n    <tr for(i, product in products)>\r\n        % var name = product.name;\r\n        % var price = product.price;\r\n        <td>${ name }</td>\r\n        <td>${ format(price) }</td>\r\n        <td on-click('adjustPrice', i, -1)>- $1.00</td>\r\n        <td on-click('adjustPrice', i, +1)>+ $1.00</td>\r\n    </tr>\r\n</table>\r\n```\r\n\r\nIn this case we would also support `% { ... }` for multiple statement if thats what you wanted to do.\r\n\r\nOkay, so I used `%` in the example just because, but @patrick-steele-idem kinda hates the `%` symbol and I don't know that I really like it either.\r\n\r\nWe also looked at the following options:\r\n\r\nLooks nice, kinda like a REPL prompt, but could be confusing with `${}`:\r\n```js\r\n$ var foo = 123;\r\n\r\n// this has a space, so it's different than ${}\r\n$ {\r\n    var bar = 456;\r\n}\r\n```\r\n\r\nProbably safe, but two characters:\r\n```js\r\n$$ var foo = 123;\r\n\r\n$$ {\r\n    var bar = 456;\r\n}\r\n```\r\n\r\nAlso looks like a prompt, but ruins any hope of using markdown in a template:\r\n```js\r\n> var foo = 123;\r\n\r\n> {\r\n    var bar = 456;\r\n}\r\n```\r\nOnly breaks nested blockquotes in markdown:\r\n```js\r\n>> var foo = 123;\r\n\r\n>> {\r\n    var bar = 456;\r\n}\r\n```\r\nFor reference:\r\n> This is a block quote\r\n>> This is a nested block quote \ud83d\ude22 \r\n> > This nested block quote has a space though and would still work (`> >`) `static` one-liners seem good; the keyword conveys something different than plain JS is happening.\r\n\r\nTo be honest, I'm ok with drawing the line at `var` for JS tags, so long as documentation uses the `<var />` form to avoid any confusion. If someone opts for writing concise syntax, they'll know that they're only stripping away some angled bracket characters, as opposed to writing plain JS.\r\n\r\nWith that said, I don't know if `%{}` (or `$${}` or whichever symbol chosen) needs a concise version. The current `${}` certainly does not, and the only difference between it and the former is that the former outputs nothing. @mindeavor Really appreciate your input on this. I do think we will end up in a good place and I think we all are in favor of reducing the number of special tags.\r\n\r\n> With that said, I don't know if `%{}` (or `$${}` or whichever symbol chosen) needs a concise version.\r\n\r\nAgreed. Whichever syntax we finally settle on, it will be the same for both concise and HTML.\r\n\r\nWe internally polled some devs at eBay and the following seems to be the most popular:\r\n\r\n![marko-component](https://cloud.githubusercontent.com/assets/978214/22394142/f3d08f78-e4d4-11e6-88ed-f889c5929bf8.png)\r\n Huh... I think I like it :) Would a backslash `\\$` allow you to insert literal dollar sign characters? > Would a backslash \\$ allow you to insert literal dollar sign characters?\r\n\r\nYup, that's what I am thinking and that is what we allow if you need to escape placeholders.\r\n\r\nIf you are good with it, then I propose we move forward with `$ <code_block>` and `$${ <code_block> }`.\r\n\r\nIf anyone has any last minute objections please let us know!\r\n\r\n/cc @austinkelleher @philidem @mlrawlings @Hesulan @Eldar-X  @mikewoo200 this past week I looked into what it would take to support linting of embedded JS inside Marko. We can do it in Atom very easily, but I think the main goal will be to ensure that the JavaScript is valid. In the future, when Marko supports source maps we can apply linting to the entire compiled output to catch problems such as undefined variables and unused variables (this cannot be done on individual embedded JS fragments). With source maps we can map the linter warning back to the location in the original template file. Here's another potential issue to discuss: Would any `$` enter \"js mode\", or does the `$` need to be the first non-whitespace character of its line?\r\n\r\nExample:\r\n\r\n```html\r\n<div>\r\n  $ console.log('x')\r\n  Price range is $ for this venue.\r\n  Price range is $$$ for that venue.\r\n</div>\r\n``` That's the plan - first non whitespace character, followed by a space\r\n\r\nOn Sun, Jan 29, 2017, 12:39 PM Gilbert <notifications@github.com> wrote:\r\n\r\n> Here's another potential issue to discuss: Would any $ enter \"js mode\",\r\n> or does the $ need to be the first non-whitespace character of its line?\r\n>\r\n> \u2014\r\n> You are receiving this because you were mentioned.\r\n> Reply to this email directly, view it on GitHub\r\n> <https://github.com/marko-js/marko/issues/547#issuecomment-275944198>, or mute\r\n> the thread\r\n> <https://github.com/notifications/unsubscribe-auth/AB3jnOk12Z1yIi79QgScEITg3Wpipjyfks5rXPkVgaJpZM4LtAQG>\r\n> .\r\n>\r\n Both need to be at the start of the line or prefixed only by whitespace:\r\n\r\n- Single line: `/^\\s[$]\\s/` \r\n- Multiline `/^\\s[$]{2}\\{/` @mikewoo200 \r\n\r\n> But for style linting (spaces, indents) in the template, what can we do?\r\n\r\nWe could definitely come up with a way to enforce code style for embedded JS and Marko code as well. We'll probably need to explore that more after the v4 release. Copying thoughts from an internal discussion where we've decided `$ <code>` and `$ { <code> }` is the direction we're going to take.\r\n\r\n----\r\n\r\nSo despite my initial reservations on `$ { ... }` I think this is the right approach.\r\n\r\nIt would only be allowed at the beginning of a line (`/\\s*\\$ \\{/`):\r\n\r\n```\r\n$ var price = 5;\r\n$ {\r\n  var id = 0;\r\n  function nextId() {\r\n    return id++;\r\n  }\r\n}\r\n```\r\n\r\nAmbiguity has been the reasoning against this, but looking at it again, even without syntax highlighting, I think it is pretty clear (and it definitely looks nicer), and @scttdavs  has pointed out that with proper syntax highlighting it would be made _very_  clear (red `$` vs blue `$`, for example).\r\n\r\n<img width=\"420\" alt=\"screen shot 2017-01-30 at 9 35 49 pm\" src=\"https://cloud.githubusercontent.com/assets/978214/22452575/4afce74e-e735-11e6-9b2f-af28c42a984b.png\">\r\n\r\nPart of the reason this makes sense is that we're already planning to allow `{}`, `()`, `[]`, etc. to allow the expression to continue to the next line:\r\n\r\n```js\r\n$ var foo = {\r\n   bar: 1\r\n}\r\n```\r\n\r\nBut JS already supports a [block statement](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/block), so we would actually have to special case `$ ` to _disallow_ `$ { ... }`.\r\n\r\nAnd there is an issue with `$${ ... }` that could potentially end up with a confusing situation like this:\r\n\r\n```html\r\n<span.price>\r\n    $${price.toFixed(2)}\r\n</span>\r\n```\r\n\r\nSo in order to get what you want in this case (`<span class=\"price\">$5.00</span>`), you would need to escape the first `$`:\r\n```html\r\n<span.price>\r\n    \\$${price.toFixed(2)}\r\n</span>\r\n```\r\n\r\nBut if you actually wanted to output the multiline sequence (perhaps you're explaining how to use it), you need to escape the _second_ `$`:\r\n```html\r\n<code>\r\n    $\\${\r\n        var price = 5;\r\n    }\r\n</code>\r\n```\r\n\r\nWith the single `$`, escaping is straightforward:\r\n```html\r\n<code>\r\n    \\$ {\r\n        var price = 5;\r\n    }\r\n</code>\r\n```\r\n\r\nIt's a fairly subtle difference, but I do think that it's only going to be an issue in one direction:\r\n```jsx\r\n// I could see someone doing this\r\n${\r\n    var foo = 123;\r\n    var bar = 456;\r\n}\r\n\r\n// I don't see this happening\r\n<div>\r\n    Hello my name is $ {name}.\r\n</div>\r\n```\r\n\r\nIn the above case, we're typically going to see multiple JS statements because we also allow the single line version:\r\n```js\r\n$ var foo = 123;\r\n```\r\n\r\nSo, if you accidentally forget the space for a multiline JS block, it will compile to:\r\n\r\n```js\r\nout.w(escapeXML(var foo = 123;var bar = 456;));\r\n```\r\n\r\nThat's going to be pretty easy to detect. @Hesulan What I meant is that the single line version, because we allow continuing, is also the multiline version.  So If we wanted to have a _different_ symbol (like `$$`) and didn't want the single `$` to allow multiline, it would take more work.\r\n\r\nYour logic is pretty much how I implemented it: https://github.com/marko-js/htmljs-parser/commit/21958233e1c4c442e8e338dc14c537b813ffab2a#diff-61eec70114a46820c77ce5879a128729R658\r\n\r\nI'm going to close this as the work has been completed.  Thank you everyone for your feedback and help in reaching this point! @jsumners I also dislike classes in general. However, the *concept* of a class fits perfectly with what a marko component is, and the class syntax is now officially part of the JS language. In marko's case, a class is the best tool for the job.\r\n\r\nAs I understand it, the only \"floating JS blocks\" marko 4 will support are `class` and `import`. I think this is reasonable, especially since they are so common (though I would push back against adding any more), and even then they are not really JS blocks, but tags. Real JS code blocks need to be written using either the `static` tag or the `$` runtime tag. @Hesulan `static` supports a block:\r\n\r\n```\r\nstatic {\r\n  function myHelper() {\r\n  }\r\n\r\n  var foo = '123';\r\n}\r\n``` > On a related note, could <static> fall back to using body-text if the { /* ... */ } attribute is omitted? I think a lot of users would prefer that, and it would certainly ease the transition from <script marko-init>.\r\n\r\nHmm... do we only do it for `static`, or everything?  This might be a bad path to go down...\r\n\r\n```html\r\n<!-- Not quite JS -->\r\n<class>\r\n    constructor() {\r\n        this.state = { count:0 };\r\n    }\r\n    increment() {\r\n        state.count++;\r\n    }\r\n</class>\r\n\r\n<!-- Highjacking the style tag again :( -->\r\n<style>\r\n    button {\r\n        background:#fff;\r\n    }\r\n</style>\r\n\r\n<!-- the \"concise\" equivalent is technically a language construct, not a tag -->\r\n<$ var foo = 123/>\r\n<$>\r\n    var foo = 123;\r\n    var bar = 456;\r\n</$>\r\n\r\n<!-- I don't think I have any issues with these -->\r\n<static var foo = 123/>\r\n<static>\r\n    var foo = 123;\r\n    var bar = 456;\r\n</static>\r\n\r\n<!-- I *would* take issue with this -->\r\n<static function sum(a, b) {\r\n    return a+b;\r\n}/>\r\n\r\n<!-- These are fine -->\r\n<import foo from \"file\"/>\r\n<export var num = 2/>\r\n```\r\n  Thanks for reporting the problem. I'm investigating now. Resolved. New version published with fix: `marko@3.14.1`\r\n\r\nThis bug had already been fixed in Marko v4.\r\n\r\nThanks again for reporting the problem.  You can immediately switch into HTML parsing mode by using an HTML delimited block:\r\n\r\n```html\r\n--\r\nThis is all parsed\r\nas <strong>HTML<strong>!\r\n--\r\n```\r\n\r\nDoes that solve your issue? @patrick-steele-idem The parser allows disabling concise mode.  Do we (or can we) disable it for `.marko.html` and `.marko.xml` files? We could disable concise mode for `.marko.html`, but I'm not sure we want to go there because it breaks syntax highlighting (unless we refactor our syntax highlighting bundles). Sorry for the lack of docs on that @rgagnon24. We are completely reworking the docs for the Marko v4 release and things will be a lot more clear. Let us know if you have any questions, but closing this issue for now.   I pushed a fix. I will be publishing a new version very shortly. Thanks for reporting the problem @Eldar-X.  New version published: `marko@4.0.0-rc.6`\r\n\r\nPlease let us know if you see any other problems. Thanks!  @Eldar-X Would this cover your use-case? https://github.com/marko-js/marko/blob/bce3836d099854f3aa9f2f48fffb470cd7a78399/docs/04-core-tags.md#export\r\n\r\nI'm going to implement this in a bit unless you have some feedback.  Can you explain a bit more? I'm not clear on what you are suggesting.  The `marko-magic` module enables game changing auto-detection for asset dependencies. I had thought that marko would absorb it all for v4, but it looks like `marko-magic` is still necessary for some lasso-related things.\r\n\r\nFor example, in the [ui-components-playground](https://github.com/marko-js-samples/ui-components-playground) I still see:\r\n\r\n- `<lasso-head/>` and `<lasso-body/>` in the layout\r\n- a `browser.json` for declaring a `style.less` dependency\r\n- a `browser.json` for the home page, declaring the `<app>` and other browser dependencies.\r\n\r\nSince marko is already at `v4.0.0-rc3`, I need to ask: are you all planning to release without the asset detection features? So technically, these changes will be outside of Marko and be a part of the Lasso taglib.  While Marko is at an RC, there are still some things to update in supporting packages and this is one of those things.\r\n\r\nHowever, I would like to have some discussion around the Marko magic approach and if we should make all of it mainstream.  \r\n\r\nParticularly, I have concerns about automatically injecting the Lasso head and body tags automatically.  I wonder if it's a bit weird that, since we use `head` as an injection point, that if there is no head tag you won't get any styles.\r\nLikewise for body. I think requiring `<lasso-head/>` and `<lasso-body/>` is acceptable. It's the json files that I'm mostly concerned about; I want to write as few of those as possible :)  ## Version **2.0.0** of [fs-extra](https://github.com/jprichardson/node-fs-extra) just got published.\n\n<table>\n  <tr>\n    <th align=left>\n      Dependency\n    </td>\n    <td>\n      fs-extra\n    </td>\n  </tr>\n  <tr>\n    <th align=left>\n      Current Version\n    </td>\n    <td>\n      1.0.0\n    </td>\n  </tr>\n  <tr>\n    <th align=left>\n      Type\n    </td>\n    <td>\n      devDependency\n    </td>\n  </tr>\n</table>\n\nThe version **2.0.0** is **not covered** by your **current version range**.\n\nWithout accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though.\n\nI recommend you look into these changes and try to get onto the latest version of fs-extra.\nGiven that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update.\n\n\n---\n\n\n<details>\n<summary>Commits</summary>\n<p>The new version differs by 40 commits .</p>\n<ul>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/fcfa595ca022011ce0f61d337598a4573fe8eb3c\"><code>fcfa595</code></a> <code>2.0.0</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/23f2b1d51d48a433a5ce8547190e84e2a36d12c0\"><code>23f2b1d</code></a> <code>CHANGELOG: add issues</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/b34da2762a4865b025cac06d02d6a2f1f1027b65\"><code>b34da27</code></a> <code>(Closes #344) LICENSE: update year</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/c010fff71f9d9d0b5789c44e5bad37e3e8fc1bd9\"><code>c010fff</code></a> <code>Merge pull request #343 from mawni/readme-add-klawsync</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/90bd756785fc54aa10a9078e559076cf522fa622\"><code>90bd756</code></a> <code>Readme: add klaw-sync link</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/ab644a48cbd3e51182d750f7d66609b5bfd5fe0d\"><code>ab644a4</code></a> <code>Merge pull request #340 from jprichardson/docs</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/f6ee61e1bcad75bb12123c1a8a9b1e1f1c15cc15\"><code>f6ee61e</code></a> <code>Add note about walk()'s removal, recommend jprichardson/node-klaw</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/3dc711f46776814df16a8b8bfb1528ac9d241e70\"><code>3dc711f</code></a> <code>Add fs-promise as fs-extra-promise alternative</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/383a26985cab5b8a184cea9fa776d2fa6da8a5fe\"><code>383a269</code></a> <code>Move API docs to seperate docs/ folder</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/a2904644f2ef2f77b1981788c899e2f6e06c140a\"><code>a290464</code></a> <code>Remove Node v0.12 support message from README</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/fa408833fbdcd5bc5f4e8cf0af1207832a1a5c79\"><code>fa40883</code></a> <code>Move klaw to devDeps</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/de1d48336fd801114ba9e2e609230565f669d6ef\"><code>de1d483</code></a> <code>Merge pull request #339 from jprichardson/rm-walk</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/1f83cb0cdfc468b4a6b447a1b49b4492391ffb36\"><code>1f83cb0</code></a> <code>Remove walk() &amp; walkSync()</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/cc1aaa949e221fab2976b563e4aa91b200ade7b5\"><code>cc1aaa9</code></a> <code>Merge pull request #335 from jprichardson/move-tests</code></li>\n<li><a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/commit/80ec80d394e348a33077042d83a98ccd071878e1\"><code>80ec80d</code></a> <code>Merge pull request #334 from jprichardson/move-cleanup</code></li>\n</ul>\n<p>There are 40 commits in total. See the <a href=\"https://urls.greenkeeper.io/jprichardson/node-fs-extra/compare/2da7defbd3d3f140f4d2f4cfa7e89b11846a827a...fcfa595ca022011ce0f61d337598a4573fe8eb3c\">full diff</a>.</p>\n</details>\n\n<details>\n<summary>Not sure how things should work exactly?</summary>\n\nThere is a collection of [frequently asked questions](https://greenkeeper.io/faq.html) and of course you may always [ask my humans](https://github.com/greenkeeperio/greenkeeper/issues/new).\n</details>\n\n\n---\n\n\nYour [Greenkeeper](https://greenkeeper.io) Bot :palm_tree:\n   Also changes `--vdom -v` to `--vdom -V`. Thanks for working on this!  ## Version **2.0.0** of [md5-hex](https://github.com/sindresorhus/md5-hex) just got published.\n\n<table>\n  <tr>\n    <th align=left>\n      Dependency\n    </td>\n    <td>\n      md5-hex\n    </td>\n  </tr>\n  <tr>\n    <th align=left>\n      Current Version\n    </td>\n    <td>\n      1.3.0\n    </td>\n  </tr>\n  <tr>\n    <th align=left>\n      Type\n    </td>\n    <td>\n      devDependency\n    </td>\n  </tr>\n</table>\n\nThe version **2.0.0** is **not covered** by your **current version range**.\n\nWithout accepting this pull request your project will work just like it did before. There might be a bunch of new features, fixes and perf improvements that the maintainers worked on for you though.\n\nI recommend you look into these changes and try to get onto the latest version of md5-hex.\nGiven that you have a decent test suite, a passing build is a strong indicator that you can take advantage of these changes by merging the proposed change into your project. Otherwise this branch is a great starting point for you to work on the update.\n\n\n---\n\n\n<details>\n<summary>Commits</summary>\n<p>The new version differs by 2 commits .</p>\n<ul>\n<li><a href=\"https://urls.greenkeeper.io/sindresorhus/md5-hex/commit/5d8f3a88b2de9bfdf7e4f07f253dd88c102814df\"><code>5d8f3a8</code></a> <code>2.0.0</code></li>\n<li><a href=\"https://urls.greenkeeper.io/sindresorhus/md5-hex/commit/386c34ebe3477dc2eaf6cfd111119fded06c2e22\"><code>386c34e</code></a> <code>ES2015ify and require Node.js 4</code></li>\n</ul>\n<p>See the <a href=\"https://urls.greenkeeper.io/sindresorhus/md5-hex/compare/273d9c659a29e4cd53512f526282afd5ac1c1413...5d8f3a88b2de9bfdf7e4f07f253dd88c102814df\">full diff</a>.</p>\n</details>\n\n<details>\n<summary>Not sure how things should work exactly?</summary>\n\nThere is a collection of [frequently asked questions](https://greenkeeper.io/faq.html) and of course you may always [ask my humans](https://github.com/greenkeeperio/greenkeeper/issues/new).\n</details>\n\n\n---\n\n\nYour [Greenkeeper](https://greenkeeper.io) Bot :palm_tree:\n  ## New Feature\r\n\r\nPerhaps related to #125\r\n\r\n### Description\r\n\r\nAllow the signature `setState(key, value)` to accept an Event object as its value (`e`), causing `setState` to extract `e.target.value`.\r\n\r\n### Context\r\n\r\nForcing two-way data binding to be explicit is good in general, but for very basic cases it's a chore. For example, take the following component:\r\n\r\n```html\r\n<script>\r\nmodule.exports = {\r\n  onInput(attrs) {\r\n    this.state = { password: '' }\r\n  },\r\n  setPassword(e) {\r\n    this.state.password = e.target.value\r\n  }\r\n}\r\n</script>\r\n\r\n<div class=\"password-picker\">\r\n  <p>Your password is ${state.password.length} characters long</p>\r\n  <input type=\"password\" value=state.password on-input('setPassword') />\r\n</div>\r\n```\r\n\r\nFor this very basic task, I had to write a `setPassword` handler to capture user input into state. If I had more than input, I would have to either write more handlers, or write a generic handler that differentiates by some kind of key. In any case, it's something I have to write and think about every time I need to handle user input.\r\n\r\nHowever, if `setState` were to accept an event as its value, it would allow me to write the following instead:\r\n\r\n```html\r\n<script>\r\nmodule.exports = {\r\n  onInput(attrs) {\r\n    this.state = { password: '' }\r\n  }\r\n}\r\n</script>\r\n\r\n<div class=\"password-picker\">\r\n  <p>Your password is ${state.password.length} characters long</p>\r\n  <input type=\"password\" value=state.password on-input('setState', 'password') />\r\n</div>\r\n```\r\n\r\nThis avoids the need to write any handler at all, and remains very readable for what it does. For anything that needs something more complicated \u2013 such as scrubbing out invalid characters for a phone number input  \u2013 it's not hard to fall back to the \"write your own handler\" way of doing it.\r\n\r\n### Open Questions\r\n\r\n- Is this too \"magical\" for marko's taste?\r\n- Would this work for all types of input?\r\n\r\n### Is this something you're interested in working on?\r\n\r\nYes\r\n Just throwing this out there is a possible alternative:\r\n\r\n```html\r\n<script>\r\n    module.exports = {\r\n        handleNameChanged(value) {\r\n            this.state.name = value.toUpperCase();\r\n\r\n            if (this.state.name.length > 10) {\r\n                this.state.invalidName = true;\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<input value:bind('name')/>\r\n<input value:bind('name', 'handleNameChanged')>\r\n\r\n<!-- OR: -->\r\n\r\n<input bind('name')/>\r\n<input bind('name', 'handleNameChanged')>\r\n```\r\n\r\nIn theory, this could be implemented in user land (via a combination of a custom compile-time transform and a small runtime) and if it proves to be valuable then we could pull it into the core marko. Thoughts? For reference:\r\n\r\n- React\r\n  - [Forms/Controlled Components](https://facebook.github.io/react/docs/forms.html)\r\n  - [Uncontrolled Components](https://facebook.github.io/react/docs/uncontrolled-components.html)\r\n- Vue\r\n  - [Form input Bindings](https://vuejs.org/v2/guide/forms.html)\r\n\r\n Coming from Mithril.js, I always liked teaching two-way data binding in this manner:\r\n\r\n```js\r\nvar myData = 'initial'\r\n\r\nvar myComponent = {\r\n  view: function () {\r\n    return m('input[type=text]', {\r\n      value: myData\r\n      oninput: (e) => { myData = e.currentTarget.value }\r\n    })\r\n  }\r\n}\r\n```\r\n\r\nThe value in this is it uses plain DOM concepts (`value`, `oninput`, `e`), and the data flow is very clear (on the input DOM event, assign `myData` to the event target's current value).\r\n\r\nIn other words, there's very little magic to it. So far, Marko has also avoided data-flow magic for the most part, and is thus very close to plain HTML and JS; it's precisely why I was able to pick it up so easily.\r\n\r\nHTML-based frameworks (including angular & vue) do not have the benefit of being plain JS, which is why those other frameworks add easy, \"proprietary\" ways to bind data \u2013 they want to take the chore out of it. However, I don't think it's the best approach to take for these reasons:\r\n\r\n- **The data flow is not clear.** When you see something like `v-model=\"x\"` or `ng-model=\"y\"`, it's not immediately clear what that's doing or where it's coming from. Contrast that with everything else Marko does, where all data originates from `state` (nice and explicit)\r\n\r\n- **It takes away from other core features.** Marko already has `on-click('myMethod')`, a solid data-flow feature connecting JS and the view. It'd be nice if that were the primary way for JS to interact with your view, instead of having an additional syntax that splits common use cases.\r\n\r\nI think changing `setState` (via the proposal) or adding a method of some sort (`on-click('set','x')` ?) will strike a good balance between lack of boilerplate and lack of magic.\r\n Here are some notes from various discussions:\r\n\r\n```html\r\n<script>\r\n    module.exports = {\r\n        onInput() {\r\n            this.state.orders = [\r\n                { id: '0', title: 'Foo', shipped: true },\r\n                { id: '1', title: 'Bar', shipped: false },\r\n            ]            \r\n        },\r\n\r\n        handleShippedChanged() {\r\n            this.state['orders.${i}.shipped'] = foo;\r\n        }\r\n    }\r\n</script>\r\n\r\n<ul>\r\n    <li for(i, order in orders)>\r\n        <input type='checkbox' checked:bind('orders.${i}.shipped', 'handleShippedChanged')> Shipped?\r\n    </li>\r\n</ul>\r\n```\r\n\r\n```html\r\n<script>\r\n    module.exports = {\r\n        onInput() {\r\n            this.state.orders = [\r\n                { id: '0', title: 'Foo', shipped: true },\r\n                { id: '1', title: 'Bar', shipped: false },\r\n            ]            \r\n        }\r\n        toggleShipped(i, event, input) {\r\n            // Add support for a settting a property chain while maintaining\r\n            // immutability\r\n            this.setState('orders', i, 'shipped', input.checked);\r\n\r\n            // Or, the long way\r\n            var orders = this.state.orders = [].concat(this.state.orders);\r\n            var order = orders[i] = Object.assign({}, orders[i]); // Create a clone of the order\r\n            order.shipped = input.checked;\r\n        }\r\n    }\r\n</script>\r\n\r\n<ul>\r\n    <li for(i, order in orders)>\r\n        <input type='checkbox' checked=order.shipped on-change('setState', i)> Shipped?\r\n    </li>\r\n</ul>\r\n``` I'm starting to really like the enhanced `setState` argument. I think ``on-change('setState', `orders.${i}.shipped`)`` is readable, intuitive, and convenient, assuming it does the \"immutable update\" that we discussed.\r\n\r\nAnother reason I think it's important to keep the data bind directions separate is to allow for different kinds of data binding without creating more esoteric language constructs. For example, if you have an `<input type=\"text\" value:bind('name') />`, is the (DOM -> JS) data binding on the `oninput` or `onchange` event? Both are valid events; depending on your use case, you may want one over the other. @mindeavor Our thinking was `:bind` would look for _both_ `change` and `input` events.  But you're right, I've often had an `change` event handler on a text input to reformat a phone number **after** input, so it wasn't changing as the user typed.\r\n\r\nThe issue with  ``on-change('setState', `orders.${i}.shipped`)`` is that in this case, we want the value of `checked`, not `value`.   \r\n\r\nWe could add a new method: ``on-change('setStateFromState', `orders.${i}.shipped`, `checked`)`` @mlrawlings did you mean `setStateFromEvent`? Ideally `setState` would be smart about events. If I'm not mistaken, `checked` is an anomaly; all other input types store their user input within `elem.value`.\r\n\r\nThe [non-mutually exclusive] options I see are:\r\n\r\n- Upgrade setState's logic to be something like `newValue = e.target.checked || e.target.value` when given an Event object value\r\n- Add a `setStateFromEvent` for the generic case (maybe one would want to set state on a `data-`  attribute instead of input value) Checking in again \u2013 that first bullet point would be very handy in small components and demos :)  Thanks for letting us know. New version published with those directories removed: `v4.0.0-rc.1`\r\n\r\nThe new version also includes https://github.com/marko-js/marko/issues/525  The signature for `onInput` should be `onInput(input, out)`. It is currently `onInput(input)`. /cc @ianvonholt  Closed via https://github.com/marko-js/marko/commit/2c04a4d916fb427e42ee923b3b66509bb26ac4f5\r\n\r\nNote: When using [`setProps`](https://github.com/marko-js/marko/blob/master/widgets/Widget.js#L325-L346), `out` is not passed (nor was it passed to `getInitialState` in v3).  @mlrawlings I'm not seeing an issue related to `setProps`. Calling `setProps(newProps)` will cause the component to be rerendered with `newProps` as the input and a new `out` will be created to do the rerender and those things will be passed to `onInput()`. Am I misinterpreting your note?  Related: [#492 - Deprecate w-body in favor of include](https://github.com/marko-js/marko/issues/492) (there is a collapsed \"Other Options Considered\" section that has relevant details)\r\n\r\n#418 is out-of-date after further discussions were made as part of #492. The feedback that we received was that no one really liked the usage of `<include()>` with an empty argument since it didn't make it clear what exactly was being included.  We settled on dropping `w-body`, and dropping the temporarily introduced `body-slot` attribute/tag, in favor of a universal `<include(target)/>` tag. We still need to capture this correctly in the final release notes and documentation, but for now [#492 - Deprecate w-body in favor of include](https://github.com/marko-js/marko/issues/492) contains the latest docs for this feature.\r\n\r\nHope that clarifies. While we want to avoid changes at this point, nothing is set in stone so if you have any thoughts or concerns then please share. I'm closing the issue but please feel free to add more comments here.  We've already deviated from JavaScript (in ways that I make more sense) and we would not want to introduce any breaking changes at this point. FYI, You can do the following if you want both the key/index and value when looping over the elements/properties of an `Array`/`Object`:\r\n\r\n```xml\r\n<for(colorIndex,color in ['red', 'green', 'blue'])>\r\n</for>\r\n```\r\n\r\nThat syntax works with objects too:\r\n\r\n```xml\r\n<for(colorName,colorHex in { red: '#f00', green: '#0f0', blue: '#00f' })>\r\n</for>\r\n```\r\n\r\nIf you still have suggestions/concerns, please let us know and happy to discuss some more, but closing issue for now. Thanks.  ## Bug Report\r\n\r\n### Context\r\n\r\n```html\r\n<script>\r\nmodule.exports = {\r\n  onInput(attrs) {\r\n    var content = 'Hello there!'\r\n    this.state = {\r\n      text1: `Text 1: ${content}`,\r\n      text2: 'Text 2: ' + content\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<div>\r\n  <h3>${state.text1}</h3>\r\n  <h3>${state.text2}</h3>\r\n</div>\r\n```\r\n\r\n### Expected Behavior\r\n\r\n```html\r\n<h3>Text 1: Hello there!</h3>\r\n<h3>Text 2: Hello there!</h3>\r\n```\r\n\r\n### Actual Behavior\r\n\r\n```html\r\n<h3>Text 1: </h3>\r\n<h3>Text 2: Hello there!</h3>\r\n```\r\n\r\n### Your Environment\r\n\r\n* Version used: v4.0.0-beta.12\r\n @mindeavor I would expect that to work since Marko shouldn't do anything special with the code inside the `<script>` block. Would you be interested in working on this? I don't think I would have the time to dig into the codebase in the near future, no :( @mindeavor No worries!\r\n\r\nI think you are right, @Hesulan. Would you be interested in working on a fix?  Michael and I had a quick discussion and our conclusion was that we should update `htmljs-parser` to ignore Marko placeholders inside template literal strings in `parsed-text` mode.   Thanks!  Thanks for opening the issue. This has been fixed. Please see issue #509. If you upgrade to the latest beta you should be good to go   I think more changes are required. The `handleRootNodes` transform that is being used to do the implicit binding to all root elements is also internally adding the `w-bind` attribute to make everything work: https://github.com/marko-js/marko/blob/6aaf8679a88e53cef644582e51edca94517a51e4/widgets/taglib/TransformHelper/handleRootNodes.js#L202 Looks good. Thank you for working on that!  Thank you, @smulder, for finding these bugs! I'll be publishing a fix soon. New version published with fix: `marko@4.0.0-beta.9`  New version published with fix: `marko@4.0.0-beta.10`  New version published with fix: `marko@4.0.0-beta.11`\r\n\r\nThanks for reporting the problem!  Thanks for the fix! New version published with fix: `marko@4.0.0-beta.10`\r\n\r\nThanks, again, for the PR.  We should definitely consider improving the error message or handling this better, but the reason you are seeing the error is that you should typically never need to render a `<!doctype html>` node in the browser since it is only meant to be something interpreted by the browser when loading an HTML page rendered on the server. Just curious, what is your use case for needing to render an entire page (along with the `<!doctype>` tag) in the browser?\r\n\r\nOne option is to just not generate any code for the `<!doctype>` node when compiled for the browser. Another option is to show a friendly compiler error. Thoughts? Concerns? Alternative ideas?  Fixed! New version published: `marko@4.0.0-beta.8`    Hey @albertogasparin, it was necessary to deprecate a single hyphen in v3 because we have to remove support for single hyphens in v4 to support the improvement of allowing spaces in attribute values when the attribute value is a complex expression. If you are not able to get rid of the deprecation warning then that is a bug. I am investigating now and will publish a new version of `htmljs-parser` if necessary. I will update soon. Thanks for reporting the problem! Sorry for the bad deprecation warning when using a double hyphen. The problem has been fixed with `htmljs-parser@2.2.2`. I know the deprecation warnings can be a lot of noise, but we didn't see a good way to avoid this change as part of Marko v4. I hope it is not too much of a pain to update your code now, but we do plan on providing a migration tool a little later that would automatically fix the issue, but it is not ready yet.  Introduces colon alias destructuring support for `import`:\r\n\r\n```javascript\r\n<import { test: testAlias } from './test' } />\r\n```  I agree that this should be supported. But you can use `as` for aliases:\r\n\r\n```javascript\r\nimport { client as twilio } from '../../lib/twilio'\r\n``` I wrote up a fix to support colon destructuring as it's supported in standard JS destructuring. I actually didn't know that colon destructuring is not supported in `import` destructuring, which I find quite surprising and inconsistent. I rejected my PR. This issue should be closed. /cc @patrick-steele-idem  We want to strictly follow the ES6 import syntax. Closing this issue. Thanks.  \u2026attrs attribute. Fixed merge conflicts /cc @patrick-steele-idem @mlrawlings   This has been resolved.  The easiest way right now to achieve what you want is to register your own custom tag that is configured to have a body of \"static-text\". \r\n\r\nFor example, you could register your own `<static-text>` tag:\r\n\r\n_src/components/static-text/marko-tag.json:_\r\n\r\n```json\r\n{\r\n  \"body\": \"static-text\"\r\n}\r\n```\r\n\r\n```xml\r\n<static-text>\r\n        Content\r\n         More Content\r\n        ${data.myVar}\r\n</static-text>\r\n```\r\n\r\nDoes that work for you?\r\n\r\nRelated: https://github.com/marko-js/marko/issues/343 NOTE: If you want to recognize placeholders (i.e. `${...}`) then you should use `parsed-text` instead of `static-text` Which version of `marko` are you using? I'll add a test case @eikaramba Sorry for the delayed response. I added a test case for what I was trying to explain. Please take a look at the following: https://github.com/marko-js/marko/tree/master/test/autotests/render/static-text-tag\r\n\r\nThe implementation for the `<static-text>` tag can be found in the following directory: https://github.com/marko-js/marko/tree/master/test/autotests/render/static-text-tag/components/static-text\r\n\r\nNOTE: The test case was added to Marko v4 (master branch), but it should work the same in Marko v3\r\n\r\nDoes that clarify and does that solution work for you?  Notes:\r\n\r\n- Use [minprops](https://github.com/mlrawlings/minprops) to reduce code size\r\n- Use [envify](https://github.com/hughsk/envify) reduce code size  Fixes #477  Nice. Thank you!  Just some initial thoughts:\r\n\r\n- It's already possible to embed a React component in a Marko component but we can definitely provide things to make this more seamless\r\n- I'm definitely open to ideas on improving operability (in addition to the reasons you mentioned, but also because I would like to make it easier for teams to try or transition to Marko)\r\n- If you use React when rendering on the server then you will have no choice but to rerender everything in the browser since React requires this (Marko does not require this)\r\n- Seamless interoperability can become complex when trying to support both server-side and client-side rendering, but I think it is completely doable\r\n- It seems reasonable to create a generic adapter component for embedding a React component in Marko (and vice versa)\r\n- It's possible to translate a rendered Marko VDOM tree to a React VDOM tree with a performance hit (via tree traversal of the Marko VDOM output)\r\n- Alternatively, a Marko component can be rendered and mounted during the `componentDidUpdate()` lifecycle method (client-side only)\r\n- Usage ideas:\r\n\r\n_Marko component with embedded React component (using Marko v4):_\r\n\r\n```xml\r\nimport MyReactComponent from \"./MyReactComponent\";\r\n\r\n<div>\r\n  <react-component(MyReactComponent) name=\"Frank\" age=30/>\r\n</div>\r\n```\r\n\r\nReact component with embedded Marko component:_\r\n\r\n```jsx\r\nimport myMarkoComponent from \"./my-marko-component\";\r\n\r\n// ...\r\n\r\nreturn (<div>\r\n  <Marko component={myMarkoComponent} name=\"Frank\" age={30}/>\r\n</div>)\r\n```\r\n\r\nI would to hear some more thoughts from others, but I just wanted to share my initial thoughts. Thanks for opening the issue. @mindeavor there have been some conversations about providing an adapter to support registering Marko UI components as Web Component custom elements, but we have not done anything further. After the v4 release we should do more exploration to see what is possible and capture it in our ROADMAP. Right now, the Marko v4 release is our top priority and we hope to get that finalized soon :)  I'm not opposed to this, but it is probably sufficient to add some extra metadata to the compiled template as a JavaScript comment such that it would be minified out in production. In addition, for Marko v4 we introduced support for inspectable metadata that gets added templates compiled for the server.\r\n\r\n> (in addition, add `--version | -v` support to `markoc` command)\r\n\r\nCan you open up a separate Github issue for that enhancement (this makes tracking progress easier)? Would you be interested in working on either of these enhancements? As we discussed a few days ago @patrick-steele-idem, we should also consider adding a note to the compiled output stating that it is compiled and to not edit it. e.g.\r\n\r\n```js\r\n// Compiled using marko@4.0.0-rc.5 - DO NOT EDIT\r\n```\r\n\r\nor\r\n\r\n```js\r\n// Compiled using markoc@4.0.0-rc.5 - DO NOT EDIT\r\n```  This has been resolved.   Thank you! \ud83d\udc4d   Good catch. Thank you! I'll work on adding a test    Thanks @johnjv!  ```xml\r\nvalidate-input (input) => {\r\n    var assert = require('assert');\r\n    \r\n    assert(input.label || input.renderBody, '\"label\" or \"renderBody\" is required');\r\n}\r\n\r\n<button class=['app-button'] onClick(\"handleClick\")>\r\n    <span include(data.label || data.renderBody)/>\r\n</button>\r\n```\r\n\r\nFor production builds, the `validate-input` tag should have no impact on the compiled template.\r\n\r\nWe should also consider enabling render-time input validation based `marko-tag.json` for simple validations.  This is an open-ended issue.\r\n\r\nWhile code-coverage is not a perfect metric, it would be awesome to see our coverage reach 90% on this next release.  We use an autotests format for our tests, which make it really easy to add new tests, just copy a directory and modify it for the new test.  If you're interested in adding some tests and have questions, feel free to ask them here.\r\n\r\n### Some high-impact places that could use better coverage:\r\n- [ ] [runtime/dom.js](https://coveralls.io/builds/9270231/source?filename=runtime%2Fdom.js)\r\n- [ ] preserved attributes when re-rendering in [widgets/Widget.js](https://coveralls.io/builds/9270231/source?filename=widgets%2FWidget.js#L578)\r\n- [ ] rendering then using dom insertion methods when using the legacy widget api (`require('marko/widgets').defineComponent`) in [widgets/Widget.js](https://coveralls.io/builds/9270231/source?filename=widgets%2FWidget.js#L728)\r\n- [ ] passing an object to `setState` in [widgets/Widget.js](https://coveralls.io/builds/9270231/source?filename=widgets%2FWidget.js#L340)\r\n- [ ] a number of `builder` methods have no, or incomplete coverage in [compiler/Builder.js](https://coveralls.io/builds/9270231/source?filename=compiler%2FBuilder.js).  These tests could go in [test/autotests/codegen](https://github.com/marko-js/marko/tree/master/test/autotests/codegen).\r\n- [ ] parsing a function expression in [compiler/util/parseJavaScript.js](https://coveralls.io/builds/9270231/source?filename=compiler%2Futil%2FparseJavaScript.js#L97)\r\n- [ ] [compiler/taglib-loader/loader-taglib.js](https://coveralls.io/builds/9270231/source?filename=compiler%2Ftaglib-loader%2Floader-taglib.js)\r\n-  [ ] error assertions (in many, _many_ locations)\r\n\r\n### How to find other files that could use additional coverage:\r\n- visit https://coveralls.io/github/marko-js/marko?branch=master\r\n- scroll down to \"Source Files on Master\"\r\n- sort by lines missed\r\n\r\n![image](https://cloud.githubusercontent.com/assets/1958812/21169139/6cfff21a-c16e-11e6-864d-b20279e30354.png)  @yomed if you need a temporary workaround:\r\n\r\n```js\r\n<${String(data.type === 'primary' ? 'div' : 'span')}> \r\n``` I have confirmed this is still an issue in v4 as well. Re-opening as the fix needs to be back-ported to v3. `marko@3.13.1` has been published with this fix.  yeah as already stated, this is marko trying to avoid naming collisions. The import parser could use: \r\nhttps://github.com/marko-js/marko/blob/master/compiler/util/safeVarName.js\r\nto generate a safe name, but it would still fail for:\r\n```html\r\n<import { asset } from 'asset' />\r\n```\r\n A quick fix would be to just add a namespace to that function as well, so in the above case it would output:\r\n```javascript\r\nvar m__asset = require(\"asset\"),\r\n    asset = m__asset.asset;\r\n```\r\nThe namespace could be anything pretty unique, but you could technically still encounter the bug if you know it or miraculously name your var the same. Otherwise, I don't see an obvious solution other than digging into marko's naming collision logic.\r\n@patrick-steele-idem @mlrawlings Thoughts? @tinovyatkin For now, we want Marko templates to compile to ES5-compatible code since compiled templates can either be loaded in the browser or on the server. On the server, the compiler requires Node.js v4+, but the runtime is ES5-compatible and works with IE9+ and all other modern browsers.\r\n\r\nAs it stands now, `import`/`export` is not finalized and that syntax is not natively supported by Node.js and browsers. We don't want to require the use of Babel for any of the core tags that we document as part of Marko so that means that Marko need to transpile `import`/`export` to something that is widely supported and since we are going to transpile we might as well make the code ES5-compatible for improved compatibility.\r\n\r\nRegarding transpiling the following:\r\n\r\n```xml\r\n<import { asset } from '../../../shared/marko/asset' />\r\n```\r\n\r\nSomething similar to the following would work:\r\n\r\n```javascript\r\nvar asset_module = require(\"../../../shared/marko/asset\"),\r\nvar asset = asset_module.asset,\r\n```\r\n\r\nA single `_` in the variable name should be sufficient for avoiding collisions since developers typically don't use `_` in variable names. However, we can make the variable as long or as short as we want since it won't matter after the code is minified.\r\n\r\nAt the moment, I am currently swamped. If anyone wants to work on fixing the compiled code for the `<import>` tag please let me know. Thanks in advance. I _think_ this is as simple appending `_module` or something [here](https://github.com/marko-js/marko/blob/8f4c884fba1d7460690de989d292968c613130cc/taglibs/core/util/parseImport.js#L33).\r\n\r\nAlong with the change I'd like to see an additional test making sure something like the following produces a sane output:\r\n\r\n```html\r\n<import { asset as test } from \"./test1/asset\"/>\r\n<import { asset } from \"./test2/asset\"/>\r\n``` > It just occurred to me that `require()` is expected to cache loaded modules:\r\n> ```\r\n> var foo = require('./foo').foo;\r\n> var bar = require('./foo').bar;\r\n> ```\r\n> Not very pretty, but perhaps more readable, and definitely more collision-proof. Thoughts?\r\n\r\nOther then still being slightly slower to execute, that code wouldn't minify as well so I would still like to see each module only be required once.  ```html\r\n<custom-component emit('event1', 'event2')/>\r\n```\r\n\r\nwould be equivalent to:\r\n\r\n```html\r\n<custom-component on-event1('emit', 'event1') on-event2('emit', 'event2')/>\r\n```  @SebastiaandenBoer I think your issue is separate. I think you are forgetting to set the `Content-Type` header to ensure that the browser knows how to interpret the response from the server. You should be doing something similar to the following in your page controller:\r\n\r\n```javascript\r\nres.set({ 'content-type': 'text/html; charset=utf-8' });\r\n```  Given:\r\n\r\n_src/components/my-component/index.marko:_\r\n\r\n```xml\r\n<script>\r\nmodule.exports = {\r\n    handleButtonClick() {\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.foo {\r\n}\r\n</style>\r\n\r\n<div class=\"foo\">\r\n</div>\r\n```\r\n\r\nThe `<style>` code should be pulled out into `src/components/my-component/index.marko.less` at compile-time. The `lang` attribute should be used to determine the file extension and the default `lang` should be `css`.\r\n\r\nThe generated file should then be imported in the compiled template so that it will automatically be picked up by the bundler:\r\n\r\n```\r\nrequire('./index.marko.less');\r\n\r\n// ...\r\n```\r\n  **Old:**\r\n\r\n`./layouts/main/template.marko`:\r\n\r\n```html\r\n<!doctype>\r\n<html>\r\n<body>\r\n    <layout-placeholder name=\"body\">\r\n        Default body content\r\n    </layout-placeholder>\r\n</body>\r\n</html>\r\n```\r\n\r\n`page.marko`:\r\n\r\n```html\r\n<layout-use('./layouts/main/template.marko')>\r\n    <layout-put into=\"body\">\r\n        Hello World\r\n    </layout-put>\r\n</layout-use>\r\n```\r\n\r\n**New:**\r\n\r\n`./layouts/main/template.marko`:\r\n\r\n```html\r\n<!doctype>\r\n<html>\r\n<body>\r\n    <if(data.body)>\r\n        <include(data.body)/>\r\n    </if>\r\n    <else>\r\n        Default body content\r\n    </else>\r\n</body>\r\n</html>\r\n```\r\n\r\n`page.marko`:\r\n\r\n```html\r\n<include('./layouts/main/template.marko')>\r\n    <@body>\r\n        Hello World\r\n    </@body>\r\n</include>\r\n```  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\nDeprecate `renderSync(data)` and `render(data, callback)` in their current forms.  Use `renderToString` instead as v4 will return a `RenderResult` instead of a string.\r\n\r\n\r\n## Motivation and Context\r\nWith this notice in place, there shouldn't be any breaking changes when moving from v3 to v4 that don't already warn you in the current version.\r\n\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [x] No new tests, changes already covered by existing tests.\r\n- [x] All new and existing tests passed.\r\n\r\n  ## Description\r\n\r\nadds import tag, works like: \r\n```html\r\n<import mod, { b as bar } from \"./bar\" />\r\n```\r\n\r\n## Motivation and Context\r\nFixes https://github.com/marko-js/marko/issues/404\r\n\r\n## Checklist:\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [x] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed.\r\n Thanks for working on this @scttdavs!  I did a fairly quick code review and one issue I see is that we want to avoid parenthesis when using the `<import>` tag so that the user can write out the import in the ES6 way. Currently, it appears you are parsing the import statement from within the argument on the `<import>` tag:\r\n\r\n```xml\r\n<import({bar as b} from './bar') />\r\n```\r\n\r\nI would like to only support the following:\r\n\r\n```xml\r\n<import {bar as b} from './bar' />\r\n```\r\n\r\nThe only code change that should be required is that you will need to loop over the attributes and join the attribute names by a space (e.g., `attributeNames.join(' ')`) to build the import string that is then parsed. For example, here is the AST after parsing `<import {bar as b} from './bar' />`:\r\n\r\n```json\r\n{\r\n    \"type\": \"TemplateRoot\",\r\n    \"body\": [\r\n        {\r\n            \"type\": \"HtmlElement\",\r\n            \"tagName\": \"import\",\r\n            \"attributes\": [\r\n                {\r\n                    \"type\": \"HtmlAttribute\",\r\n                    \"name\": \"{bar as b}\"\r\n                },\r\n                {\r\n                    \"type\": \"HtmlAttribute\",\r\n                    \"name\": \"from\"\r\n                },\r\n                {\r\n                    \"type\": \"HtmlAttribute\",\r\n                    \"name\": \"'./bar'\"\r\n                }\r\n            ],\r\n            \"body\": []\r\n        }\r\n    ]\r\n}\r\n``` \r\n\r\nDo you have any concerns about dropping the parens?\r\n\r\nAlso, I wouldn't bother mentioning `<script marko-init>` in the docs since that is deprecated.\r\n On a related note, we might have issues when we update the parser to handle commas so we probably need to provide a helper to get the raw string inside the open tag. Sure that looks like a simple change. I'll have time tonight to work on it\nsome more\nOn Sun, Nov 27, 2016 at 10:46 AM Patrick Steele-Idem <\nnotifications@github.com> wrote:\n\n> On a related note, we might have issues when we update the parser to\n> handle commas so we probably need to provide a helper to get the raw string\n> inside the open tag.\n>\n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly, view it on GitHub\n> <https://github.com/marko-js/marko/pull/448#issuecomment-263129223>, or mute\n> the thread\n> <https://github.com/notifications/unsubscribe-auth/ADdocOk7n8rV_MlkhTxiTmDSWHACIHDlks5rCaXLgaJpZM4K9JxM>\n> .\n>\n @patrick-steele-idem What do you think of the above implementation in the last commit? Instead of joining the attribute names for now (sounds like comma parsing will conflict with that later), I add the tag string to the node, so `el.tagString ` returns `\"<import foo from './foo' />\"`, and we get all we need from that. Is there a better way of doing this? Still feeling my around :) `tagString` would have the problem that it would be different for concise vs non-concise unless we always stripped off the the starting `<` and the ending `/>` or `>`. If we strip off those characters then I am okay with using `tagString`. @patrick-steele-idem any more comments, or is this ready to merge? It's ready to merge :) I am just finishing up the changes to support nested `<@foo>` tags and I will merge your changes very soon. We will then publish a new beta release. Thank you, again! great, thx! Also made one slight more optimization, couldn't help myself \ud83e\udd13   Thanks! \ud83d\udc4d   Thank you for bringing this up. I think it makes sense to normalize the HTML string before doing the comparison to avoid issues related to having/not-having a new line character at the end:\r\n\r\n```javascript\r\nstr = str.replace(/\\s$/, '')\r\n```\r\n\r\nOr, possibly a little more conservative:\r\n\r\n```javascript\r\nstr = str.replace(/(\\r\\n|\\n)$/, '')\r\n```\r\n\r\nThoughts? Agreed. Would you be interested in making this change to normalize the string before comparison?  Thanks for the PR @JeroenVdb, but I think it it is better to discuss how nested content is handled within the [Includes](https://github.com/marko-js/marko/blob/master/docs/language-guide.md#includes) section of the docs. I want to avoid adding a new section to the docs so I am closing this PR. Thank you though!  Thanks! \ud83d\udc4d   ## Description\r\n\r\nMaking the render api consistent.\r\n\r\n### Sync Render\r\nRendering synchronously now returns a RenderResult:\r\n```js\r\nvar result = template.renderSync({});\r\nresult.appendTo(document.body);\r\nresult.getWidgets();\r\n// etc.\r\n```\r\n\r\n**Differences:**\r\nIn v3, we return a string.  In order to make this a more painless switch, I will introduce a `renderToString` method in v3 and prompt users to switch to using that if they need that string output.\r\n\r\n### Async Render\r\n\r\nCalling `.render()` still returns an out:\r\n```js\r\nvar out = template.render({});\r\nout.on('finished', function(out) {\r\n    \r\n});\r\n```\r\n\r\n**Differences:**\r\nIn v3, there is no value passed to the `finished` event.  No breaking change here.\r\n\r\n\r\n### Callback \r\n\r\n```js\r\ntemplate.render({}, function(err, result, out) {\r\n\r\n});\r\n```\r\n\r\n**Differences:**\r\nIn v3, the callback is passed the `html` string instead of a RenderResult.  The third parameter, `out` is only passed for legacy reasons.  You can also access it from `result.out`.\r\n\r\n### Promise\r\n\r\nSee also #439, #442.\r\n\r\n```js\r\ntemplate.render({}).then(result => result.appendTo(document.body));\r\n```\r\n\r\n**Differences:**\r\nIn v3, then was not available.  No breaking change here.\r\n\r\n### Widgets\r\n\r\n`defineRenderer` and `makeRenderable`/`renderable` now include both `render` and `renderSync` that function similarly to above.  I plan to add `renderSync` to `marko-widgets@6` and warn users that are using the api like:\r\n\r\n```js\r\nwidget.render({}).appendTo(document.body);\r\n```\r\n\r\nto switch to \r\n\r\n```js\r\nwidget.renderSync({}).appendTo(document.body);\r\n```\r\nor\r\n```js\r\nwidget.render({}, function(err, result) {\r\n    result.appendTo(document.body);\r\n});\r\n```\r\n\r\n## Checklist:\r\n- [x] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed.\r\n\r\n\r\n@patrick-steele-idem I'd like some eyes on this and the plan described above before merging.\r\n@Hesulan How does the Promise implementation look?\r\n  Hmm... I see the issue...  Unfortunately, our goal with #389 was to pass the stream as the value so you could do something like:\r\n```js\r\ntemplate.render().then(out => out.appendTo(document.body));\r\n``` @patrick-steele-idem Maybe we need to consider having a `RenderResult` that is separate from the stream.\r\n\r\n```js\r\nvar result = template.renderSync();\r\nvar out = template.render();\r\n\r\nout.on('finish', function(result) {});\r\nout.then(function(result) {});\r\n\r\ntemplate.render({}, function(err, result) {});\r\n```\r\n\r\nPretty much everything in the `outMixins` except `then`/`catch` would be a method of the `RenderResult`.\r\n\r\n\r\n`result.out` could point to the original stream if necessary. > Maybe we need to consider having a `RenderResult` that is separate from the stream.\r\n\r\nThat's probably the right thing to do.\r\n\r\nWhat are your thoughts on adding a `try...catch` to wrap the rendering of the template so that we can emit an `error` event in the `catch` clause? We would only do this if an `out` is not provided to the `template.render()` method.  Add support for an `extends` property to `marko.json`:\r\n```js\r\n{\r\n    \"<foo>\": {\r\n        \"transformer\":\"./foo.transformer.js\"\r\n    },\r\n    \"extends\": [ \r\n        \"bar\", // extend a node_module (gets marko.json from the root of the package)\r\n        \"./other/marko.json\" // extend another marko.json file\r\n    ]\r\n}\r\n```\r\n\r\nThis would allow a package to \"export\" tags from packages it depends on.\r\n\r\nOpen to other names: `includes`, `imports`, etc. The use case I'm thinking of is allowing one package to make the tags of another package available without the main application needing to depend directly on both.  \n\nAs an example, take your `let` and `const` package.  Maybe I want to create an `es6-taglib` package that would expose those tags as well as some others.\n In theory this sounds good, but it becomes a problem if the other `marko.json` being extended belongs to a nested package dependency and not a `peerDependency`. Nested dependencies may get installed into a `node_modules/` directory of the package with the parent `marko.json` which can cause problems since the `marko` compiler needs to generate `require()` calls to those nested dependencies. If a tag is purely a compile-time tag then it is not an issue, but it would be a problem for runtime custom tags that need to be imported into compiled templates.\r\n\r\nI'm not sure there is a strong enough need for this at the moment, but we can discuss some more. Looks like [`taglibImports`](https://github.com/marko-js/marko/blob/master/compiler/taglib-loader/loader-taglib.js#L200-L248) with a small tweak will already do this.  Here are some replies:\r\n\r\n> The promise resolution procedure must only access the `.then` property once.\r\n\r\nWhy do you say that?\r\n\r\n> If attempting to retrieve the `.then` property throws an error, then the error must be caught and the resulting promise must be rejected with the error as the reason. (It currently isn't being caught.)\r\n\r\nI don't see a need for this since accessing the `.then` property should throw an error if it is a `Promise`.\r\n\r\n> The `.catch(onRejected)` method is neither defined nor required by the specification\r\n\r\n`catch` is part of the specification: http://www.ecma-international.org/ecma-262/6.0/#sec-promise.prototype.catch\r\n\r\nWhile we could fall back to `.then(null, onRejected)` in the case of no `.catch()`/`.fail()` method, but I'm not seeing a need for that.\r\n\r\n> Should Marko actually be trying to handle Promise resolution directly, or would it be better to rely on a native/polyfilled `Promise` implementation?\r\n\r\nMarko should rely exclusively on the native `Promise` implementation and that is what is happening now on `master`. \r\n\r\n> The `<await>` tag, however, needs to be usable in pre-ES5 environments, which leaves either a built-in polyfill or just more compliant handling code as the only options.\r\n\r\nIn the case of the `<await>` tag, Marko is never actually creating a `Promise` (it is just continuing the `Promise` chain of an existing `Promise`). In an ES5 environment you would need to use a native `Promise` polyfill or use a third-party library (`bluebird`, `q, etc.) to create the `Promise` instance.\r\n\r\n> However, I've also noticed one other issue: The `<await>` tag currently accepts either a value, a Promise, or a node-style function (last argument is an error-first callback).\r\n\r\nThe `<await>` tag accepts a `Promise`, a Node.js-style callback function or a \"resolved\" object. I'm not seeing a problem with this approach.\r\n\r\n---\r\n\r\nMarko has some logic to handle old-style `Promise` objects, but for the most part we are assuming that a `ES6`-style `Promise` is being provided: file:///Users/psteeleidem/Library/Application%20Support/Dash/DocSets/JavaScript/JavaScript.docset/Contents/Resources/Documents/developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Promise.html\r\n\r\nI'm not seeing a need to change anything related to the comments above. We still need to decide if we want to wrap the `render(data)` call with a `try...catch` to reject the promise. Currently, we don't have a single `try...catch` block in `marko` for performance reasons (functions with `try...catch` are not optimized by V8) @Hesulan these are great points, but I think we should focus on the `Promise` specification as defined as part of EcmaScript and implemented by Node.js and browsers (and polyfills). I would welcome as many tests as possible to make sure the Marko implementation holds up to all edge cases for the native `Promise` implementation, a popular `Promise` polyfill and maybe `q` and `bluebird`. For example, we need to make sure we have a test case for a synchronous error when rendering a template and using `.then()`/`.catch()`. Does that seem reasonable?  @cheft, Marko v4 will be IE9+, so I would plan for that, but I believe we're currently IE8+ on v3.\n\nI'm going to close this, but feel free to ask if you have more questions.\n  When an error occurs within an `<await>` tag, the rest of the page continues rendering and we log a n error message to the console, but there is no indication in the browser that an error occurred.  When using something like `browser-refresh`, developers aren't constantly having to look at the console, so it might be nice to give a big red error indication in `NODE_ENV=development` mode. I agree. The default implementation should show inline error messages for `<await>` tags that fail in development. If the user provided an `<await-error>` then that should always be used.\r\n\r\nOn a somewhat related note, we probably want to start making use of `process..env.NODE_ENV` to show more friendly error messages in development mode without bloating runtime code for production. We should then update lasso to transform `process.env.FOO` references to include the actual value of the environment variable when doing a non-development build. This would allow code to be minified out. While we could use [envify](https://github.com/hughsk/envify) as a module transform, we would also want to run that transform on non-JavaScript modules (i.e. vanilla JS) as part of an output transform.  The point of the layout taglib is to be able to include another template (`<layout-use>`) and insert content (`<layout-put>`) at various insertion points (`<layout-placeholder>`).  I'd like to make this more generic and concise.\r\n\r\n@patrick-steele-idem has already done work on making `<include>` work to replace `w-body` (#418) and I think we can take this one step further to replace the need for layout-specific tags.\r\n\r\n**Old:**\r\n`./layouts/main/template.marko`:\r\n```html\r\n<!doctype>\r\n<html>\r\n<body>\r\n    <layout-placeholder name=\"body\"/>\r\n</body>\r\n</html>\r\n```\r\n`page.marko`:\r\n```html\r\n<layout-use('./layouts/main/template.marko')>\r\n    <layout-put into=\"body\">\r\n        Hello World\r\n    </layout-put>\r\n</layout-use>\r\n```\r\n\r\n**New:**\r\n`./layouts/main/template.marko`:\r\n```html\r\n<!doctype>\r\n<html>\r\n<body>\r\n    <include(data.body)/>\r\n</body>\r\n</html>\r\n```\r\n`page.marko`:\r\n```html\r\n<include('./layouts/main/template.marko')>\r\n    <@body>\r\n        Hello World\r\n    </body>\r\n</include>\r\n```\r\n\r\n### `@` tags\r\n\r\nAs seen above, I'm also proposing the ability to prefix a tag with the `@` symbol to indicate that it should be passed as an attribute. I chose `@` because we already use it to indicate attributes in `marko.json` and it looks nice.\r\n\r\nThese are like [nested tags](http://markojs.com/docs/marko/custom-taglibs/#nested-tags) but more concise and don't require defining attributes in `marko-tag.json`.\r\n\r\nOnly putting the `@` at the front will require a change to the parser to support, but I think it would be worthwhile:\r\n```html\r\n<@body>\r\n    Hello World\r\n</body>\r\n```\r\nvs\r\n```html\r\n<@body>\r\n    Hello World\r\n</@body>\r\n```\r\n\r\nThese `@` tags would work for *any* tag, so we could use layout concepts easily for custom tags as well:\r\n\r\n**New:**\r\n`./components/layout/index.marko`:\r\n```html\r\n<!doctype>\r\n<html>\r\n<body>\r\n    <include(data.body)/>\r\n</body>\r\n</html>\r\n```\r\n`page.marko`:\r\n```html\r\n<layout>\r\n    <@body>\r\n        Hello World\r\n    </body>\r\n</layout>\r\n```\r\n\r\n### Passing values to `@` tags?\r\n\r\nPerhaps we could also allow passing an argument to the `@` tag, indicating the name of a data variable:\r\n\r\n```html\r\n<my-component>\r\n    <@body(foo)>\r\n        Hello ${foo}!\r\n    </body>\r\n</my-component>\r\n```\r\n\r\nwould compile to:\r\n```\r\nmy-component({\r\n    body: function(foo, out) {\r\n        out.w('Hello '+escapeXML(foo)+'!');\r\n    }\r\n});\r\n```\r\nand could be called within `my-component` like this:\r\n```html\r\n<include(data.body, 'World')/>\r\n```\r\n\r\n Thoughts?\n/cc @philidem @austinkelleher @charlieduong94 @Hesulan \n The other question this raises is should we deprecate [nested tags](http://markojs.com/docs/marko/custom-taglibs/#nested-tags) in favor of `@` tags?\n\n**Old:**\n\n``` html\n<await(foo from data.fooPromise)>\n    <await:error>\n        Something bad happened\n    </await:error>\n    ${foo}\n</await>\n```\n\n**New:**\n\n``` html\n<await(foo from data.fooPromise)>\n    <@error>\n        Something bad happened\n    </error>\n    ${foo}\n</await>\n```\n I just realized that `<await:error>` isn't a thing.  It's `<await-error>` which gets transformed into an attribute at transform time... haha \ud83d\ude01 .  But I'm thinking we could still use `<@error>` in this case.\n\n@Hesulan My thinking on the `<@tags>` is that they would need to be the immediate children of the target parent, so there wouldn't be any ambiguity.  \n I suppose another question is how to handle multiple instances of a tag.  Currently, with nested tags, you define in the `marko-tag.json` whether a nested tag can have multiple instances.  If it can, it's always passed as an array.  \n\nWithout defining that upfront I think we're left with passing it as a single value if there's only one `<@tag>` and as an array if there are multiple.  React does this with its children prop and I don't really like it.  They ended up providing a collection of [helpers](https://facebook.github.io/react/docs/react-api.html#react.children) because it's hard to work with.\n\nYou _could_ do something like the following to ensure a value is an array before looping over it:\n\n``` html\n<var tabs=[].concat(data.tab)/>\n<ul>\n    <li for(tab in tabs)>${tab.name}</li>\n</ul>\n<div class=\"tab-content\" for(tab in tabs)>\n    <include(tab)/>\n</div>\n```\n\nOr maybe you **have** to define an entry for nested tags if you want multiple: `\"@tabs <tab>[]\"`.  Otherwise the compiler throws an error.\n I like this suggestion and here are some thoughts:\r\n\r\n-----\r\n\r\nI think it should be `<@foo>...</@foo>` (with the `@` repeated in the ending tag)\r\n\r\n-----\r\n\r\nAttributes should be allowed on `<@>` tags:\r\n\r\n```xml\r\n<@placeholder tag=\"div\">Loading...</@placeholder>\r\n```\r\n\r\n-----\r\n\r\n`<@bar>` should be shorthand for `<foo:bar>`. The only challenge is that the `<@bar>` would just need to be matched with the first ancestor custom tag:\r\n\r\nThe following are equivalent:\r\n\r\n__Old:__\r\n\r\n```xml\r\n<app-tabs>\r\n    <app-tabs:tab title=\"Home\">Content for Home</app-tabs:tab>\r\n    <app-tabs:tab title=\"Profile\">Content for Profile</app-tabs:tab>\r\n    <app-tabs:tab title=\"Messages\">Content for Messages</app-tabs:tab>\r\n</app-tabs>\r\n```\r\n\r\n__New:__\r\n\r\n```xml\r\n<app-tabs>\r\n    <@tab title=\"Home\">Content for Home</@tab>\r\n    <@tab title=\"Profile\">Content for Profile</@tab>\r\n    <@tab title=\"Messages\">Content for Messages</@tab>\r\n</app-tabs>\r\n```\r\n\r\n-----\r\n\r\nNested tags currently compile down to an object with each attribute resulting in a property and a `renderBody(out)` function if the nested tag has body content. The nested tags get discovered at render time by rendering the body and the nested tags register themselves with the parent tag when they get rendered but they otherwise produce no output at that time. This allows nested tags to be repeated, have conditional logic, etc.:\r\n\r\n```\r\n<app-tabs>\r\n    <for(person in family)>\r\n        <@tab title=person.name>\r\n            Hello ${person.name}! You are ${person.age} year(s) old.\r\n        </@tab>\r\n    </for>\r\n</app-tabs>\r\n```\r\n\r\nHowever, we can optimize this by handling nested tags that are direct children of a parent tag:\r\n\r\n```xml\r\n<app-hello name=\"Frank\">\r\n  <@message>Have a good day!</@message>\r\n</app-hello>\r\n```\r\n\r\n__Old compiled output:__\r\n\r\n```javascript\r\napp_hello_tag({\r\n      name: \"Frank\"\r\n  }, out, 0, function renderBody(out, app_hello_tag0) {\r\n    app_hello_message_tag({\r\n        renderBody: function renderBody(out) {\r\n          out.w(\"Have a good day!\");\r\n        }\r\n    }, out, app_hello_tag0);\r\n  });\r\n```\r\n\r\n__New compiled output:__\r\n\r\n```javascript\r\napp_hello_tag({\r\n        name: \"Frank\",\r\n        message: {\r\n            renderBody: function renderBody(out) {\r\n                out.w(\"Have a good day!\");\r\n            }\r\n        }\r\n    }, out);\r\n```\r\n\r\nWe could even optimize for a single `if()` condition surrounding the nested tag:\r\n\r\n```xml\r\n<app-hello name=\"Frank\">\r\n  <@message if(someCondition)>Have a good day!</@message>\r\n</app-hello>\r\n```\r\n\r\n```javascript\r\napp_hello_tag({\r\n        name: \"Frank\",\r\n        message: someCondition && {\r\n            renderBody: function renderBody(out) {\r\n                out.w(\"Have a good day!\");\r\n            }\r\n        }\r\n    }, out);\r\n```\r\n\r\n-----\r\n\r\n__tldr; Introduce`<@tab>` as shorthand for `<tabs:tab>`__  I think a test for this should live in `test/autotests/api`. An example is: `test/autotests/api/require-render-to-stream`.\n Also, the API has changed in v4, and I don't think this is an issue anymore, but I think this change should be back ported to v3.\n I saw it's against the v3 branch. Nice. LGTM /cc @mlrawlings \n Actually I have a small suggestion after reviewing the code in v4. What do you think about changing the implementation to be more uniform with the v4 implementation?\n\nhttps://github.com/marko-js/marko/blob/master/runtime/stream.js#L40\n I like it.  Thanks @jsumners and @austinkelleher!\n @jsumners Just published `marko@3.12.1`\n  ## Description\r\nDeprecate w-on* attributes for handling widget events. Added support for registering event handlers with on*().\r\n\r\n## Motivation and Context\r\nThis is part of the Marko v4 roadmap.\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [x] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed. Thanks!\n   I'm not sure what's up with Coveralls. It's running twice.\n    Here are my thoughts:\n\nMarko should not be in the business of transpiling JavaScript. If a developer wants to use ES6 functionality, then the code should pass through unmodified. On the server, you wouldn't want to transpile the code since later versions of Node.js have great ES6 support.\n\nThere is one exception and that is ES6-style imports:\n\n``` xml\n//html syntax:\n<import foo from \"./foo\"/>\n\n// concise syntax:\nimport foo from \"./foo\"\n```\n\nES6-style imports are not currently enabled by default in any browser and are not supported in Node.js. However, we like the syntax and semantics of ES6-style imports so we want to support it.\n\nSpecifically related to the `let` and `const` tags, I want those to pass through as-is as there ES6 keywords. No transpiling is required on the server and no transpiling is required for modern browsers. If the user wants to support older browsers then they would need to enable babel to run on `.marko.js` files to produce ES5-compatible code.\n\nCould integrate babel? Maybe, but I don't think we should since the JS module bundler will typically be doing transpiling anyway.\n    Thank you @Hesulan! For completeness, I think it is great that you worked on this. The tests are failing because we have some tests for the \"taglib lookup\" that will fail if you add new core tags. You simply need to update the following two files to include your new core tags (i.e. `const` and `let`):\n- https://github.com/marko-js/marko/blob/master/test/autotests/taglib-lookup/forEachTag/expected.json\n- https://github.com/marko-js/marko/blob/master/test/autotests/taglib-lookup/getTagsSorted/expected.json\n\n(you just need to copy the text from `actual.json` over to `expected.json`)\n\nPlease do add tests when you get a chance. Copying and modifying the following test is sufficient for now: https://github.com/marko-js/marko/tree/master/test/autotests/render/var\n I don't really like the idea that `var`, `let`, and `const` are treated the same by the compiler. I think if we introduce these new tags, they need to function differently. For example this is okay with `var`:\n\n``` html\n<!-- This is okay! -->\n<var nameUpper=data.greetingName.toUpperCase() nameLower=data.greetingName.toLowerCase()>\n    Hello ${nameUpper}!\n    Hello ${nameLower}!\n    <var nameUpper=data.greetingName.toLowerCase()  nameLower=data.greetingName.toUpperCase()>\n        Hello ${nameUpper}!\n        Hello ${nameLower}!\n    </var>\n</var>\n```\n\nBut it should throw a compile time error using `let`:\n\n``` html\n<let nameUpper=data.greetingName.toUpperCase() nameLower=data.greetingName.toLowerCase()>\n    Hello ${nameUpper}!\n    Hello ${nameLower}!\n    <!-- Compiler throws an error! -->\n    <let nameUpper=data.greetingName.toLowerCase()  nameLower=data.greetingName.toUpperCase()>\n        Hello ${nameUpper}!\n        Hello ${nameLower}!\n    </let>\n</let>\n```\n\n`const` should also be treated like like a `const` in JavaScript, so if we declare `<const>` and try to use the `<assign>` tag below it, the compiler would throw an error:\n\n``` html\n<const nameUpper=data.greetingName.toUpperCase() nameLower=data.greetingName.toLowerCase()>\n    Hello ${nameUpper}!\n    Hello ${nameLower}!\n    <!-- Compiler throws an error! -->\n    <assign nameUpper=data.greetingName.toLowerCase()/>\n</const>\n```\n\nWhat do you think @patrick-steele-idem / @mlrawlings / @philidem ?\n @austinkelleher, `let` and `const` would compile to code that uses `let` and `const`. \n\nAlso, just wanted to point out that `let` is beneficial in the following contrived situation:\n\n```\n<let foo='Frank'/>\n\n<if(someCondition)>\n    <let foo=123/>\n    <!-- do something with foo -->\n</if>\n<else>\n    <let foo=456/>\n    <!-- do something with foo -->\n</else>\n\n<div>\n  Hello ${foo}! <!-- Outputs \"Hello Frank!\" -->\n</div>\n```\n\nWithin the body of custom tags, `var` happens to be scoped correctly since marko automatically wraps the body of custom tags in a `renderBody(out)` function.\n @mlrawlings Can you please review this PR and decide on next steps? Thanks.\n I'm torn on what to do here.  These are language level features, so I don't think they belong in an external package.  If we're going to support this, I don't want to handle transpiling.  I'd either be in favor of letting it pass through unchanged (node 6+), or if we want to support 4/5 prepend `'use strict';` to the template.\n\nOn the other hand, I'm not sure we really need them.  The only real benefits are they introduce a temporal dead zone and `const` can't be redefined.\n\nAnd taking Patricks example from above, we already have a way to create a TDZ of sorts:\n\n``` html\n<var foo='Frank'/>\n\n<if(data.someCondition)>\n    <var foo=123>\n        <!-- do something with foo -->\n    </var>\n</if>\n<else>\n    <var foo=456>\n        <!-- do something with foo -->\n    </var>\n</else>\n\n<div>\n  Hello ${data.foo}! <!-- Outputs \"Hello Frank!\" -->\n</div>\n```\n\nThe `es6-taglib` taglib idea is interesting, but I don't think it's necessary.  We will always be able to write something that is es5 compatible for core taglibs.  It's only these places where we're trying to emulate the javascript language.\n\nAlso, userland tags might require es6, and we don't have control over that, but also I'm not sure we want to introduce something at the core that when used in userland modules forces the application using them to transpile or drop support for older platforms.\n @Hesulan I think that makes sense.  `marko-layout` and `marko-async` started out as separate packages that eventually were merged into core.  The same could happen here.  I'm going to go ahead and close this issue, but do publish that package so we can play with it.  And maybe we can reopen this in the future.\n  ## Description\r\nAdded the \"ref\" and \"for-ref\" attributes, which replace the now deprecated \"w-id\" and \"w-for\" attributes. \r\n\r\nAdded warnings to discourage the usage of \"w-id\" and \"w-for\".\r\n\r\n## Motivation and Context\r\nThis change is for the upcoming marko v4 release (see ROADMAP.md).\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x ] My code follows the code style of this project.\r\n- [ x] I have updated/added documentation affected by my changes.\r\n- [ x] I have read the **CONTRIBUTING** document.\r\n- [ x] I have added tests to cover my changes.\r\n- [ x] All new and existing tests passed.\r\n Thanks for the PR @charlieduong94 ! Your changes look great. I did make a small change to include the location information for a deprecation warning. For example:\n\n```\nThe \"w-id\" attribute is deprecated. Please use \"ref\" instead. (test/autotests/widgets-browser-deprecated/widget-render-to-iframe/components/app-iframe-content/template.marko:3:4)\n```\n\nIf you are interested in any other issues, please let us know. Thanks again!\n  Currently, `htmljs-parser` switches into HTML parsing mode when the first character of a concise line is `$`. This was a deliberate decision at the time, but it results in unwanted differences between the HTML and concise syntax. Currently, in order to have a dynamic tag name, the HTML syntax must be used. We want to fix that.\r\n\r\nGiven the following template:\r\n\r\n```\r\n${isInline ? 'span' : 'div'} - Hello World\r\n```\r\n\r\nGiven a value of `true` for `isInline`.\r\n\r\nOld output:\r\n\r\n```html\r\nspan - Hello World\r\n```\r\n\r\nExpected new output:\r\n\r\n```html\r\n<span>Hello World</span>\r\n```\r\n\r\n TODO: Output warning in old parser used by Marko v3. Something similar to:\r\n\r\n```\r\nWARNING!!\r\nThe behavior of `${` at the start of a line in concise parsing mode will\r\nbe changing in Marko v4. To avoid problems in the future, you should\r\nmake the following change right away:\r\n\r\nOLD: ${foo}\r\nNEW: - ${foo}\r\n\r\nSee: https://github.com/marko-js/marko/issues/425\r\n```  This change allows whitespace in complex expressions such as the following:\r\n\r\n``` xml\r\n<assign name=lastName.toUpperCase() + ', ' + firstName.toLowerCase()/>\r\n```\r\n\r\nSee related PR for `htmljs-parser`: [htmljs-parser PR #37](https://github.com/philidem/htmljs-parser/pull/37) Only handling this for the `var` and `assign` tag is a reasonable suggestion. I think I might be okay with that. What do you think @mlrawlings ?\n The parser does support entering into new parsing modes based on the tag name so that is certainly an option. It's also possible that the `var` could handle making sense of the separate attributes (divided by spaces) and group things back together, but that might get messy.\n @Hesulan It's certainly safer to make this apply to only `var`/`assign` because there is no possibility that an operator in a variable name is valid.  However, I'm concerned that there may be confusion if I can do `<var sum = 1 + 2 />` but not `<counter start = x + 1 />`.  \n\n@philidem also suggested that if we were to do this it should be across the board at the parser level.\n\n### Reasoning\n\nI certainly understand that this can impact readability:\n\n``` html\n<custom-tag count = 1 + 2 + 3 class = foo style = styles.foo />\n```\n\nvs.\n\n``` html\n<custom-tag count=1+2+3 class=foo style=styles.foo />\n```\n\nHowever, I see the main reason for this is to be able to write code in `.marko` that looks like js:\n\n``` js\nimport { calc } from './helpers'\n\nvar sum = data.value + 5\nvar calculated = calc(data.value, 2)\n\n<div>${calculated}</div>\n```\n\n### Another possibility\n\nI don't know if this is a good idea, but I'll throw it out there:\n\nWhat if we required comma separation when using whitespace around `=`:\n\n``` html\n<custom-tag count = 1 + 2 + 3, class = foo, style = styles.foo />\n```\n\nWhich actually lines up with JS pretty well:\n\n``` js\nvar count = 1 + 2 + 3, x = foo\n```\n\n@patrick-steele-idem and I had also talked about allowing a semicolon at the end of a concise tag:\n\n``` js\nvar count = 1 + 2 + 3, x = foo;\n```\n Using comma separation is an interesting idea, I do like the fact that it aligns with JS. The down side is that it may cause confusion if it's only required when using whitespace.\n Good discussion. After giving it some thought, I think the comma solution is the best option and it should be allowed for all tags (not just `var`/`assign`). The parser should be updated such that, when encountering a comma, would combine everything after an attribute `=` and before the `,` together to allow the following to work as expected:\n\n``` xml\n<custom-tag count = 1 + 2 + 3, class = foo, style = styles.foo />\n```\n\nI think that provides a good balance to being like HTML (space-separated attributes), while also being like JavaScript.\n\nAre we okay with the comma being used sometimes, but not all times for the same tag?:\n\n``` xml\n<!-- commas sometimes: -->\n<custom-tag count = 1 + 2 + 3, class = foo style = styles.foo />\n```\n\nThe only possible edge case is that the comma was supposed to be part of the expression, but I can't think of any reason that would ever be the case.\n\nSimilarly, I am still in favor of allowing a `semicolon` to end a tag such that the following would be allowed:\n\n``` xml\n<var foo=123, bar=456;/>\nvar baz=456;\n```\n\nThoughts?\n As a side note, a comma would allow the following in concise mode:\n\n```\nvar foo=123,\n    bar=456\n```\n\nThe comma at the end of the line would make it clear that additional attributes are expected and the parser would say in the tag parsing mode even if the EOL is reached.\n @patrick-steele-idem What about if the last (or only) attribute has spaces?\n\n``` xml\n<custom-tag count = 1 + 2 + 3 />\n```\n\nIn concise mode, if we allow a semicolon as an indicator that this is the last space separated value, that could work:\n\n``` js\nvar foo,\n    count = 1 + 2 + 3;\n```\n\nWhat if the comma/semicolon syntax was specific to concise mode?  We're trying to make things look more like JS, but there's nothing wrong with wrapping the value in parenthesis:\n\n``` xml\n<custom-tag count = (1 + 2 + 3) />\n```\n Patrick and I were just discussing this and realized that there could be some other issues:\n\n### Text content on same line\n\nContent on the same line would be an issue:\n\n``` js\ntag baz = 3 - Hello, World;\n```\n\n_Is that `<tag baz=3>Hello, World;</tag>` or `<tag baz=(3 - Hello) World />`?_\n\n### Multi-line values\n\nAttribute value split across multiple lines:\n\n``` js\nvar foo = doSomething()\n    .chain1\n    .chain2\n```\n\n_Are `.chain1` and `.chain2` property accessors, or shorthand divs with classes?_\n\nI suppose in this case it would be easy enough to say that multiline values **_must**_ be wrapped in parenthesis. \n **Here's my proposal:**\r\n\r\n- When parsing _attribute value_, encountering whitespace followed by a character that is not a binary operator character (except for `-` in concise mode and `>` in HTML mode) will keep the parser in the _attribute value_ mode.\r\n- When parsing _attribute value_ in _concise mode_, encountering `-` will switch to single line HTML mode (this is the current behavior)\r\n- When parsing _attribute value_ in _HTML mode_, encountering `>` will end the current tag (this is the current behavior)\r\n- When parsing _attribute name_ or _attribute value_, encountering a `,` (comma) will be treated as an attribute delimiter. All whitespace (including newline character) will be ignored after the comma is encountered until the next non-whitespace character is encountered. A mix of commas and whitespace can be used as delimiters within the same tag.\r\n- When parsing _attribute name_ or _attribute value_, A `;` (semicolon) will always be treated as an attribute delimiter and will not be part of the attribute name or value. Unlike the comma, a semicolon cannot be used to wrap attributes across multiple lines. (I think we still need to discuss this more) I just made a PR implementing this and some related parser updates. I'd love some feedback from everyone that has contributed to this discussion. https://github.com/philidem/htmljs-parser/pull/42\r\n\r\n Fixed with upgrade to `htmljs-parser@^2`   If `out.error()` is called the `finish` event is still emitted. That would result in both `reject` and `resolve` being called. I'm not sure what the `Promise` spec says should happen when that occurs, but we should probably add code to make sure that `resolve` is not called when `reject` is called. Do you mind investigating that?\n  `w-bind` \u2192 `widget` or `component`\r\n\r\nSee also #393 #395 #399 \r\n\r\n__Update:__ we decided to remove `w-bind` and alternatives completely. If you want to bind a widget to the DOM nodes you need to name the file `widget.js`, `component.js` or embed an inline `<script>` tag in the template with a `module.exports`/`export default`. @Hesulan We decided to not allow that anymore @Hesulan The problem with `<widget-types/>` was that all possible widgets ended up being bundled up by the JavaScript module bundler. The better alternative is to have a single widget that can delegate out to a particular widget implementation or to conditionally remap the JavaScript widget module to the correct module at bundling time. Lasso supports conditional remaps (see `requireRemap` in https://github.com/lasso-js/lasso#nodejs-style-module-support). There are better workarounds and deprecating `w-bind`/`<widget-types>` simplifies Marko and simplifies documentation. I hope that clarifies.    Thanks for opening the issue @cdhowie. You are right that it is missing from the language guide. We did document this feature in the \"What's New in Marko v3\", but we did not move over those docs into the language guide: http://markojs.com/docs/marko/what-is-new-marko-v3/#tag-body-content-parsing\n\nOn a related note, marko uses [htmljs-parser](https://github.com/philidem/htmljs-parser) and that parser automatically switches into `parsed-text` mode when parsing both `<script>` and `<style>` tags (see: [philidem/htmljs-parser/Parser.js](https://github.com/philidem/htmljs-parser/blob/4a1b907092a512bc1f2e22f52a24ea9cf1dfc3ff/Parser.js#L2520-L2521[). This means that the parser won't recognize HTML tags inside `<script>` and `<style>` tags since those tags do not contain HTML. Therefore, you should very rarely need to know about the `marko-body` attribute. You should only need to know about `marko-body` text if maybe you are creating a custom tag that allows non-HTML content to be nested. When creating a custom tag you can specify the `body` parse mode as shown below:\n\n_src/components/my-script-wrapper/marko-tag.json:_\n\n``` json\n{\n    \"body\": \"static-text\",\n    \"preserve-whitespace\": true\n}\n```\n\nHope that helps! \n\nI'm keeping the issue open so that we update the docs. We are currently extremely busy with all the work associated with the upcoming [Marko v4](https://github.com/marko-js/marko/milestone/2) release so if you would be interested in fixing the docs, please feel free to submit a PR to the following docs file: https://github.com/marko-js/marko/blob/master/docs/language-guide.md\n To be honest, I could probably be swayed towards making the default `static-text` (instead of `parsed-text`) for `<script>` and `<style>` tags in Marko v4. Allowing expressions in `<script>` blocks was kept around because a lot of earlier developer were doing something similar to the following:\n\n``` html\n<script>\nwindow.foo = ${JSON.stringify(bar)};\n</script>\n```\n\nOn a related note, marko has special escaping rules for expressions inside the `<script>` tag to make sure `</script>` does not get rendered inside a string.\n\n[Marko v4 will integrate Marko Widgets](https://github.com/marko-js/marko/blob/master/ROADMAP.md) and make it much easier to serialize extra data/state down to the browser that then gets passed to the widget constructor.\n\n> Anyway, documenting marko-body would've at least made it easier to correct the problem when we figured out what it was.\n\nAgreed. Keeping this issue open so that we at least fix the docs with Marko v4.\n\n/cc @mlrawlings @philidem Thoughts?\n  `extension` and `extensions` properties are both now supported and consolidated. A few things to discuss:\r\n\r\n- The consolidation function takes a `requireObj`, which is the Node.js `require` in `node-require.js`. I did this so it was easy to mock in a unit test without having to pollute the actual `require` object.\r\n- I put `consolidateExtensions.js` in a new folder `util/`. I am open to other suggestions as to where to put this module. I do like the idea of having a `util/` folder at the top-level though. Changes already manually merged. Closing PR. Thanks for working on this!\n  Bug on jQuery Proxy when w-id contains dash/hyphen, see issue #391 \r\n\r\n## Description\r\n\r\nBug on jQuery Proxy when w-id contains dash/hyphen (e.g `w-id=\"submit-button\"`)\r\n\r\n## Motivation and Context\r\n\r\nThis PR contains fix for issue #391 \r\n\r\n## Screenshots (if appropriate):\r\nNone\r\n\r\n## Checklist:\r\n- [x] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes (comment: not relevant to this issue)\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [x] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed.\r\n Thanks for the fix! I will back port your fix to Marko Widgets v6 and update here when published.\n New version of `marko-widgets` published with your fix: `marko-widgets@6.4.1`\n\nThanks again!\n  ### Background: why `<script marko-init>` exists\r\n\r\nFor the most part, all of your template ends up in a render function\r\n\r\nA template like this:\r\n```xml\r\n<var name=\"World\"/>\r\n<div>Hello ${name}</div>\r\n```\r\ncompiles to something like the following (oversimplified) output js:\r\n```js\r\nfunction render(data, out) {\r\n    var name = 'World';\r\n    out.w('<div>Hello'+name+'</div>');\r\n}\r\n\r\nmodule.exports = new Template(render);\r\n```\r\n\r\nBut there are times when you might want to add initialization code outside the `render()` function so that it doesn't run everytime the template renders, only when the template is first required.\r\n\r\nSo `<script marko-init>` has fulfilled this need.\r\n\r\n### Why we want to change\r\n\r\nA template like this:\r\n```html\r\n<script marko-init>\r\n    var format = require('format');\r\n</script>\r\n<var name=\"World\"/>\r\n<div>Hello ${format(name)}</div>\r\n```\r\ncompiles to something like the following (oversimplified) output js:\r\n```js\r\nvar format = require('format');\r\n\r\nfunction render(data, out) {\r\n    var name = 'World';\r\n    out.w('<div>Hello'+format(name)+'</div>');\r\n}\r\n\r\nmodule.exports = new Template(render);\r\n```\r\n\r\nA `<script>` tag usually puts code into the output html, but in this case, we're highjacking it because of the `marko-init` attribute and using the code as part of the render logic.\r\n\r\nWe actually already have a construct that is meant to add arbitrary javascript in template render logic: [scriptlets](https://github.com/marko-js/marko/blob/21a43c010a75ca06857598f49ea3368b3e33c3c2/docs/what-is-new-marko-v3.md#scriptlets).\r\n\r\nBut scriptlets, like most other things, run within the context of the `render` method.\r\n\r\n### The proposal\r\n\r\nBy default, scriptlets, `<var>`, `<assign>`, etc. would continue to run within the context of the render method, but we will introduce a new tag: `<render>`.\r\n\r\nA template like this:\r\n```html\r\n<var format=require('format')/>\r\n<render>\r\n    <var name='World'/>\r\n    <div>Hello ${format(name)}</div>\r\n</render>\r\n```\r\ncompiles to something like the following (oversimplified) output js:\r\n```js\r\nvar format = require('format');\r\n\r\nfunction render(data, out) {\r\n    var name = 'World';\r\n    out.w('<div>Hello'+format(name)+'</div>');\r\n}\r\n\r\nmodule.exports = new Template(render);\r\n```\r\n\r\nNow the structure of the template matches up fairly well with the structure of the output js. :+1:\r\n\r\nObviously anything outside of `<render>` would not be allowed to write to `out` as `out` wouldn't be in scope.  We should detect this and throw an error at compile time. I definitely have some concern around having to wrap all the template code just to introduce some JavaScript initialization code. With that said, it doesn't look as bad with the concise syntax:\n\n``` html\nvar format=require('format')\n\nrender\n    var name='World'\n    <div>Hello ${format(name)}</div>\n```\n\nYou could even make it look like a method by adding parens and possibly a `data` param:\n\n``` xml\nvar format=require('format')\n\nrender(data)\n    var name='World'\n    <div>Hello ${format(data.name)}</div>\n```\n\nAnd finally, that could allow for ES6 argument destructuring:\n\n``` xml\nvar format=require('format')\n\nrender({name})\n    <div>Hello ${format(name)}</div>\n```\n I agree with wrapping everything in a `<render>` not being so great. Would that be required, or optional, only if you need code generated out of the context of the render function?\r\n\r\nIf the goal is to deprecate `<script marko-init>` with the already established expectation of a `<script>` tag, why not add a new tag called `<init>`, or something else?\r\n\r\n```html\r\n<init>\r\n    var format = require('format');\r\n</init>\r\n\r\n<var name='World'/>\r\n<div>Hello ${format(name)}</div>\r\n```\r\nor\r\n```html\r\n<init>\r\n    <var format=require('format')/>\r\n</init>\r\n\r\n<var name='World'/>\r\n<div>Hello ${format(name)}</div>\r\n``` @Hesulan The `<import>` tag does hoist outside the `render` function, see the [import-tag test](https://github.com/marko-js/marko/tree/master/test/autotests/compiler/import-tag) and its [expected output](https://github.com/marko-js/marko/blob/master/test/autotests/compiler/import-tag/expected.js).\r\n\r\nImporting modules is a big reason `<script marko-init>` was needed (just look at every example in this thread), but you might need to do something like this:\r\n\r\n```html\r\n<import { createFormatter } from \"./format\"/>\r\n<var format=createFormatter({ lang:'en' })/>\r\n\r\n<render(data)>\r\n    <var name='World'/>\r\n    <div>Hello ${format(name)}</div>\r\n</render>\r\n```\r\n\r\n\r\n```js\r\nimport { createFormatter } from \"./format\";\r\nvar format = createFormatter({ lang:'en' });\r\n\r\nrender(data)\r\n    var name = 'World';\r\n    <div>Hello ${format(name)}</div>\r\n```\r\n\r\nI think the actual implementation of `<render>` would internally rely on the equivalent of the suggested `<init>` tag.   You'd loop over each top level element and if you found a `<render>` tag, you'd move all the other top-level elements into an `<init>` tag.  The `<init>` tag would then generate the code for its children and instead of putting that code in the render method it would place it towards the top of the file.  The question is should this `<init>` tag be an internal thing or should it be exposed as an alternative?\r\n\r\n@patrick-steele-idem You've talked about requiring the parens on `<render>` and maybe that makes sense.  But we should also require an actual argument there: the name of the `data` variable.\r\n\r\nWrapping the whole template in `<render(data)>` would leave things as they are now.  `<render()>` would be invalid.\r\n\r\nAs for the `<init>` name, would `<load>` make more sense?  If you're not using the require hook, you would call `marko.load('./template.marko')` and that's the point at which this init/load code is run.\r\n\r\n_Almost_ makes me want to do something like `<on-load>` and `<on-render>`, but let's not. Closed via https://github.com/marko-js/marko/commit/2980546f7c3309ec11a268ea0d4a801506c4ab6b  I think that's a good suggestion, although I would probably use `WARNING` instead of `ERROR`. Would you be interested in submitting a PR to improve marko? Thanks for opening the issue.\n\nNOTE: Marko v4 development is on master and Marko v3 is on the [v3 branch](https://github.com/marko-js/marko/tree/v3) \n  Thanks for opening the issue @tinovyatkin, but that is the expected behavior since Marko is using the JavaScript rules for parsing a String attribute value. This means that JavaScript escape sequences starting with the `\\` character must be valid JavaScript escape sequences. In your case you need to escape the backslash character so that the JavaScript parser doesn't treat it as a JavaScript String escape sequence:\n\n``` html\n<input type=\"text\" pattern=\"\\\\w{2,20}\" />\n```\n\nWhile this is not a bug in Marko, I admit that the escaping of those characters is less than ideal. What are your thoughts on enhancing Marko to allow a JavaScript regular expression for the attribute value?:\n\n``` html\n<input type=\"text\" pattern=/\\w{2,20}/ />\n```\n\n(we could update the compiler so that the output would be as expected)\n We should do this.  It's come up [before](https://github.com/marko-js/marko/issues/306#issuecomment-225099028).\n\nIt should be as simple as adding the following to the `escapeXmlAttr` function:\n\n``` js\nif(attr instanceof RegExp) {\n    let str = attr.toString();\n    return str.slice(1, str.lastIndexOf('/'));\n}\n```\n\nThe only thing is that html style regex don't support flags, so I'm thinking we just drop them?\n  It is not safe to remove whitespace inside a `<script>` because the code inside a `<script>` tag is not HTML rules so we cannot use the HTML whitespace removal rules. If marko were to remove whitespace inside `<script>` tags then there is a good chance that it would break the code. If you want to safely remove whitespace inside a `<script>` tag then you would need to use a JavaScript minifier (the performance would be really slow so you would not want to run the minifier for every request). \n\nIf you want go advanced, you can create your own compile-time transform that removes whitespace that is appropriate for your use case.\n\nHopefully that answers your question, but please feel free to add more comments here if not.\n  Hey @basickarl, at first glance your setup looks correct. Are you seeing any errors? Do you see the `<init-widgets>` tag in the final HTML output (you shouldn't, but that might be a clue)? \n No longer an issue. Closing.  Hey @sriver111, we'll need more details to help you out. Have you tried using [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh) to enable hot reloading of templates? Here's a sample app that demonstrates hot reloading that I recommend checking out: https://github.com/marko-js-samples/marko-hot-reload\n @sriver111 would it be possible to share a minimal project to reproduce the problem? I'm not able to reproduce, but it is possible that a Windows-specific issue has creeped in.\n\nFYI, hot reloading works in the following way:\n\nWhen hot reloading is enabled, the `Template` class is monkey-patched to proxy all of the rendering methods in order to check if the template needs to be reloaded or not before calling the original method. In addition, when a `.marko` file is modified it is deleted from the `require.cache` so that it can be reloaded through the Node.js module loading system. I can share more information, but just wanted to give you an idea how it works.\n Glad you got it working. Closing the issue. Thanks for the update.\n  Looks like a bug. I am investigating and should have an update soon. Thanks for opening an issue!\n Should be fixed now. We were missing a test case that should have caught an internal API change. New version published with fix: `marko@3.11.7`\n\nThanks, again.\n  There are no `try...catch` blocks in marko so exceptions will not be caught by marko (this includes render-time exceptions due to programming errors in marko templates). \n\nCertain errors (such as timeouts associated with the `<await>` tag) will be emitted on the target stream. You can listen for those errors by adding a listener for the `error` event:\n\n``` javascript\nres.on('error', function(err) { ... });\n```\n\nIf you use promises then promises will have an implicit `try...catch` block. If the promise passed to an `<await>` tag gets rejected then the `<await-error>` tag can be used to show alternate content: [`<await-error>`](http://markojs.com/docs/marko/async-taglib/#<code>&ltawait-error><code)\n\nIt's good practice to make sure you have an uncaught exception handler for any Node.js app that will gracefully close any connections and shutdown the app.\n\nHope that helps, but let us know if you have any other specific questions. I'm going to go ahead and close this issue, but please feel free to add more comments below.\n  Currently, the process for [discovering taglibs](http://markojs.com/docs/marko/custom-taglibs/#taglib-discovery) is determined per template by the following:\n1. search for `marko.json` in the same directory as the template, and then in each parent directory up to the project root (until a `package.json` is found).\n2. for each dependency in the `package.json`, search for a `marko.json` at the package root.\n\nThis provides encapsulation as each template can only be modified by taglibs in its own package and packages it directly depends on.  It also provides consistent behavior no matter how the `node_modules` directory structure ends up due to dependency flattening of `npm@3` or `yarn`. :+1:\n\nHowever there are cases where it could be useful to have global taglibs that are discovered by **every** template.  Here's a few ideas:\n- A security transform that puts a [`nonce`](https://developer.mozilla.org/en-US/docs/Web/Security/CSP/CSP_policy_directives#strict-dynamic) attribute on all inline script tags\n- A asset management transform that allows relative paths to be specified for resources (ex. `<img src=\"./foo.png\"/>`) and includes the resolved file in the build.\n- etc.\n @mlrawlings Any thoughts on how to register global taglibs?\n I have few thoughts on this:\n\n**1**. Add methods to force inclusion of a directory or package:\n\n``` js\nrequire('marko/compiler').taglibFinder.includeDir(dirPath);\n// Where 'dirPath' is an absolute path to the folder containing marko.json \n\nrequire('marko/compiler').taglibFinder.includePackage(packageName);\n// Where 'packageName' is the name of the node_module containing marko.json \n```\n\nI don't particularly like this because I'm not a fan on having the application compile templates differently than the command-line tool, test, etc.  This becomes a source of hard-to-find problems.\n\n**2**. Keep searching up after finding a `package.json` and load parent's packages' taglibs as well.   This would make the global behavior the default, though not truly global as taglibs would trickle down, but not up.   I could potentially see some unwanted behavior with this approach, but the top level would always be in control of what was added in, so it might not be so bad.  Another issue is dependency flattening.  One dependency might be a dependency of another but they could be siblings in the directory structure due to flattening.  This could lead to unexpected behavior.\n\n**3**. Allow taglibs to specify a `\"global\":true` option in `marko.json`.  For discovery purposes (and sanity?)  only top level dependencies (those directly depended on by the main application) would be able to register global transforms, renderers, etc.  If the top level application wanted to register a global transform, it would be required to do so in a `marko.json` at the root of the package.  The only challenge with this would be determining the root application.  We could potentially do something with searching up to the root of the filesystem and the highest directory with a `package.json` is assumed to be the app root.  Or we could use `process.cwd()` as a heuristic. \n\nOption 3 is looking the best at this point, but I'm open to other suggestions.\n  For performance reasons, if a render completes synchronously then the callback is invoked synchronously. Therefore, if you repeat the rendering when the callback is invoked then you will eventually get a `Maximum call stack exceeded` error because the stack trace keeps growing.\n\nThe simple solution is to break up the stack trace using `setImmediate()`:\n\n``` javascript\nbench('marko', (next) => {\n    const template = require('./post.marko');\n    template.render(data, () => {\n        //throw away the render output\n        setImmediate(next);\n    });\n});\n```\n\nIf you add `setImmediate` for `marko` then make sure you also add it for `handlebars` so that the results are not skewed.\n\nOn a related note, have you taken a look at the following benchmarks that include `marko` and `handlebars`?: https://github.com/marko-js/templating-benchmarks\n\nIt's very easy add add a new comparison group with your own templates. If you want to improve those benchmarks with more comparisons I would encourage you to send a PR.\n\nIf you have any other questions or issues please let me know.\n  ## New Feature\r\n### Description\r\n\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\n\r\nThis is kinda a rough idea I've been throwing around in my head for a while now and figured I should put it out there:  I'd like Marko to provide a way to automatically inject a custom tag at the end of a page.\r\n### Context\r\n\r\nThere's a number of tags in our ecosystem (some of these eBay specific) that we end up having users add to their layout templates right before the closing `</body>` tag.  Often users will forget to add one an wonder why something isn't working.\r\n\r\n``` xml\r\n<body>\r\n    ...\r\n    <await-reorderer/>\r\n    <lasso-body/>\r\n    <init-widgets/>\r\n    <gh-footer/>\r\n    <gh-body-js/>\r\n    <tracking-cookies/>\r\n    <tracking-images/>\r\n    <tracking-body />\r\n    <browser-refresh/>\r\n    <site-speed-bottom/>\r\n</body>\r\n```\r\n### Conciderations\r\n\r\n<!--- What still needs to be discussed -->\r\n\r\nTags could already implement something basic by hooking into the closing body tag, but it's possible someone renders a template without a `<body>` tag.  Google even [recommends](https://google.github.io/styleguide/htmlcssguide.xml?showone=Optional_Tags#Optional_Tags) to omit it.  Ideally, the insertion point for these tags would be just before `</body>` or, if that's not found, at the end of the top level template.\r\n\r\nAsync is also something that needs to be considered.  \r\n\r\n> Example: In the case of `<init-widgets/>`, we would only want to include it on the page if there are widgets on the page.  But it could be that the only widget is in an `<await>` block and therefore we don't know that we need to init widgets until that block is executed.\r\n\r\nFinally, some tags (like `<init-widgets/>`) require that the javascript has been loaded before them.  And it's likely that a tag to insert that javascript (like `<lasso-body/>`) would also be using this system to insert itself.  So perhaps we need some system of priority.  Or tags could choose between append/prepend.\r\n It would also be ideal if we could do this without adding code to every generated template.\n  Looks good. Thank you!\n @yomed Thanks for these docs related PRs!  We definitely appreciate it!\n  Hey @jdnichollsc, thanks for the feedback and welcome to Marko! \n\nYou are doing everything correctly, except you for got to register the Node.js require hook for Marko templates. You should add the `require('marko/node-require').install();` line to your main JavaScript file:\n\n``` javascript\nrequire('marko/node-require').install(); // \u2190 Add this line\n\nvar express = require('express');\nvar router = express.Router();\nvar template = require('../views/index.marko');\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n  res.marko(template, { title: 'Express' });\n});\n\nmodule.exports = router;\n```\n\nWithout that line, Node.js will try to load Marko templates as JavaScript modules. The Node.js require hook for Marko registers a custom loader for Node.js that will automatically compile `require`d `.marko` templates to JavaScript modules so that they can be loaded by the Node.js module loading system.\n\nHope that solves your problem, but let us know if you run into any other issues.\n\nCheers.\n The `require('marko/node-require').install();` line just needs to run once at the very beginning. In your case, you just need to add it to the top of your `./app.js` file.\n\nWe tried to make this clear in the docs for using Marko with Express: http://markojs.com/docs/marko/express/\n\nIt's also discussed in more detail as part of the Getting Started guide: http://markojs.com/docs/marko/get-started/#template-loading\n\nIf you still think there is room for improving the docs please let us know or submit a PR (at the top of every docs page on [markojs.com](http://markojs.com/) there is a \"Improve this page\" page link).\n  <!--- Provide a general summary of your changes in the Title above -->\n## Description\n\n<!--- Describe your changes in detail -->\n\nOpening this for feedback & discussion.  This PR adds `await:error` and `await:timeout` events.  I will add documentation for these before we merge.\n## Motivation and Context\n\n<!--- Why is this change required? What problem does it solve? -->\n\n<!--- If it fixes an open issue, please link to the issue here. -->\n\nTo allow applications to listen for errors that occur in an `<await>` tag, even if the error is handled by the template. For logging purposes and such.\n## Checklist:\n\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\n\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\n- [x] My code follows the code style of this project.\n- [x] I have updated/added documentation affected by my changes.\n- [x] I have read the **CONTRIBUTING** document.\n- [x] I have added tests to cover my changes.\n- [x] All new and existing tests passed.\n  \ud83d\udc4d Very much appreciated. Thanks!\n  Looks great. Thanks!\n  Marko supports custom attributes on standard HTML tags. You would need to write a compile-time transform to process those custom attributes. It's not hard, but it is definitely more in the \"advanced usage\" category. A compile-time transform can also process standard HTML attributes if you choose.\n\nHere's some relevant docs that show an example of a transform processing a custom `if` attribute: http://markojs.com/docs/marko/compiler/advanced/#transform-stage\n\nSometimes it is easier to explain in code so I will push a sample app that will hopefully make things clear. I'll provide an update here soon.\n Hey @jasonmacdonald, it took a little longer because I got pulled into some other things, but here is a project that I hope clarifies how to handle custom attributes: https://github.com/marko-js-samples/marko-custom-attributes \n\nI'm going to go ahead and close this issue, but if you would like more details please feel free to post comments here.\n You're welcome. You just need to use `marko.json` to register the compile-time transform, but you can still use the `components` directory.\n  Hey Ryen, I don't think this is an issue with the Marko middleware since there is no way for Marko to know that the response is going to be the same before rendering. I think the responsibility of setting the cache headers and setting HTTP status codes should reside in your application logic. If you have any more thoughts please share.\n In order for `res.marko()` to send a 304 it would need to buffer the response in order to calculate an etag based on the final HTML output and then use that etag to determine if 304 should be sent based on incoming request and it would also need to set the etag header for the response. That is certainly something we could offer as a feature, but it would need to be opt-in since buffering would prevent streaming/progressive HTML rendering (a huge reason to use Marko). In a perfect world, your page controller would calculate the etag independent of template rendering (this would would have the advantage that there would be no CPU cycles and memory wasted rendering a template that didn't need to be rendered).\n\nI'm not opposed to offering feature as an enhancement, but it would need to be opt-in. If it something you are interested in working on, here is the related code:\n- https://github.com/marko-js/marko/blob/master/express.js\n- https://github.com/jshttp/fresh\n- https://github.com/jshttp/etag\n\nPlease let me know if you are interested in working on this.\n And just to add. something like the following might be nice:\n\n``` javascript\nres.marko(template, templateData, { etag: 'weak' });\n```\n Did you go any farther with this @RyenNelsen? Generating a hash of the data would work if the output is completely based on the backend data, but it would definitely require some extra CPU cycles. Depending on how your backend data is structured, you could store a \"version\"/\"revision\"/\"last modified\" or some other value with the data to track changes to the data and use that value to also set the `etag` and check freshness. That would all be outside the scope of marko. The only thing that marko could do is buffer up the output HTML in order to calculate an etag and compare freshness to conditionally send down a `304 not modified`\n  I think changing the name of the package will disrupt things too much. Also, we merged the functionality of `autocomplete-marko` and `hyperclick-marko` into the main [language-marko](https://atom.io/packages/language-marko) package. It's unfortunate that the search results for `marko` are in such a bad order, but I'm not sure there is much we can do about that right now. I did add keywords to the `package.json` so hopefully that will help: https://github.com/marko-js/atom-language-marko/commit/9e5976ed29daca646b251c6a86f06992341e7284\n  Currently, the Marko compiler compiles a template to a program that, when executed, will render an HTML string to a stream. This is perfect for the server, but it is less than ideal in the browser since the HTML string must be parsed using something like `innerHTML` in order to update the DOM. Instead, we plan to update Marko to support a new \"virtual DOM\" output mode for the compiler and an accompanying virtual DOM runtime. The templates will continue to be compiled to a program that renders an HTML stream for the server, but templates will be compiled to render to a virtual DOM tree in the browser. Supporting multiple compilation outputs will allow optimizations in the browser that were not possible before.\r\n\r\nTo make things more clear, let's take a look at an example template:\r\n\r\n``` xml\r\n<h1 class=\"title\">\r\n    Hello ${data.name}!\r\n</h1>\r\n\r\n<if(data.colors.length)>\r\n    <ul>\r\n        <li for(color in data.colors)>\r\n            ${color}\r\n        </li>\r\n    </ul>\r\n</if>\r\n<else>\r\n    <div class=\"empty\">\r\n        No colors!\r\n    </div>\r\n</else>\r\n```\r\n\r\nThe current compiled output for the above template is similar to the following:\r\n\r\n``` javascript\r\nfunction render(data, out) {\r\n  out.w(\"<h1 class=\\\"title\\\">Hello \" +\r\n    escapeXml(data.name) +\r\n    \"!</h1>\");\r\n\r\n  if (data.colors.length) {\r\n    out.w(\"<ul>\");\r\n\r\n    forEach(data.colors, function(color) {\r\n      out.w(\"<li>\" +\r\n        escapeXml(color) +\r\n        \"</li>\");\r\n    });\r\n\r\n    out.w(\"</ul>\");\r\n  } else {\r\n    out.w(\"<div>No colors!</div>\");\r\n  }\r\n}\r\n```\r\n\r\nWe are planning to go with the following virtual DOM output when compiled for the browser (not exact):\r\n\r\n``` javascript\r\nvar attrs0 = { class: 'title' };\r\n\r\nvar el0 = createElement('div', { class: 'empty' }, 1 /* child count */)\r\n    .text('No colors!');\r\n\r\nfunction render(data, out) {\r\n    out.element('h1', attrs0, 1)\r\n        .text('Hello ' + data.name + '!');\r\n\r\n    if (data.colors.length) {\r\n        out.beginElement('ul');\r\n\r\n        forEach(data.colors, function(color) {\r\n            out.element('li', null, 1)\r\n                .text(color)\r\n        });\r\n\r\n        out.endElement();\r\n    } else {\r\n        out.node(el0);\r\n    }\r\n}\r\n```\r\n\r\nA few things to note:\r\n- Optimization: static subtrees are pulled into variables that are only initialized once and reused for every render\r\n- Optimization: static attributes that are on dynamic elements are pulled out to static variables\r\n- Optimization: Diffing is skipped when comparing static subtrees\r\n- Async rendering will continue to be supported on both the server and in the browser. Async fragments will begin with a partially constructed virtual DOM subtree\r\n- `out.write()` will not be allowed when rendering to a virtual DOM\r\n- `out.getRootNode()` can be used to get the root [DocumentFragment](https://github.com/marko-js/marko-vdom#documentfragment) node for the virtual DOM tree being rendered.\r\n\r\nTasks:\r\n- [x] Provide a virtual DOM implementation that is compatible with morphdom. Done: [marko-vdom](https://github.com/marko-js/marko-vdom)\r\n- [x] Update [morphdom](https://github.com/patrick-steele-idem/morphdom) to support diffing the real DOM with a compliant virtual DOM. Done: [morphdom PR #83](https://github.com/patrick-steele-idem/morphdom/pull/83)\r\n- [x] Update the Marko compiler to support multiple output modes\r\n- [x] Implement the codegen for the virtual DOM output mode (almost done)\r\n- [x] Optimize using `isSameNode()` for static subtrees\r\n- [x] Update [async-writer](https://github.com/marko-js/async-writer) to support a virtual DOM runtime. Done: [async-vdom-builder](https://github.com/marko-js/async-vdom-builder)\r\n- [x] Merge in [raptor-renderer](https://github.com/raptorjs/raptor-renderer) functionality into [async-vdom-builder](https://github.com/marko-js/async-vdom-builder) and [async-writer](https://github.com/marko-js/async-writer)\r\n- [x] Additional optimizations for static attributes on non-static sub trees\r\n- [x] Default to `vdom` output for [lasso-marko](https://github.com/lasso-js/lasso-marko)\r\n @PierBover Anything is possible because Marko allows for custom compile-time transforms and custom code generators for custom tags and this allows for custom JavaScript to be inserted into the compiled template to attach event listeners or whatever else is needed.\n\nMarko Widgets is an example of a UI components library that utilizes compile-time transforms to supports declarative event bindings for both DOM events and custom widget events. Marko Widgets allows named events to be bound to a named widget method. How Marko Widgets handles event binding is a subtle implementation detail, but it allows the browser to pick up right where the server left off and, unlike with React, it is not necessary to rerender the UI in the browser if it was already rendered on the server. The reason React requires that the UI be rerendered in the browser is because a reference to a listener function on the server can't be passed down to the browser so all the server is really providing is the raw HTML.\n\nMore details: http://markojs.com/blog/a-closer-look-at-marko-widgets/#how-does-event-delegation-work\n @ianvonholt for now we only have raw numbers (no fancy graphs) for a benchmark of the new [marko-vdom](https://github.com/marko-js/marko-vdom) implementation that shows very significant speedups when measuring the time it takes to build a virtual DOM tree compared to a real DOM tree, as well as the time it takes to walk a virtual DOM tree compared to a real DOM tree: https://github.com/marko-js/marko-vdom/blob/master/docs/benchmark-results.md\n\nWhile a virtual DOM implementation provides some significant gains, I suspect the bigger improvements will come from the fact that we can now skip rerendering parts of a template that are constant. That is, the improved compiler will separate out a DOM subtree to a virtual DOM node that is only created once and used for every rerender. On top of that, we also mark that virtual DOM node as constant so that Marko Widgets will completely skip diffing entire DOM subtrees that are constant. This was not really possible before when rendering to an HTML string since the entire HTML string was being parsed to produce a real DOM even though many of the HTML strings were constant.\n  There are a few reasons we have kept `writeToDisk` enabled:\n- In development, seeing the output `.marko.js` file is helpful for debugging and understanding\n- In production, templates are not recompiled if the application server needs to restart since the compiled out from the previous startup was written to disk. This makes startup times slightly faster\n\nSince disabling `writeToDisk` is as simple as `require('marko/compiler').configure({ writeToDisk: false })` I'm in favor of keeping the current behavior. I'm open to other thoughts though.\n\n@mlrawlings @philidem any thoughts? \n @hustcer templates should always be compiled on the server. When you call `require('./template.marko')` on the server the template will be compiled and loaded at that time. When you use a JavaScript module bundler to send down templates they will be compiled during the bundling process. If that doesn't answer your question I would recommend joining us on Gitter to discuss: https://gitter.im/marko-js/marko\n I would agree that it would be nice to remove these files by default if only because it makes things seem simpler.  I will say though, that these compiled output files were extremely helpful in understanding how `marko` works at a lower level - though that's certainly not a requirement in order to _use_ `marko`.\r\n\r\nThe other concern I have is that runtime errors will reference a line/column in the generated `*.marko.js` file, so if that file is not readily available, debugging becomes more cumbersome.  \r\n\r\nPotential solutions:\r\n - sourcemaps\r\n - write out the generated file on error @Hesulan Regarding source maps, our parser already has line/column start/end positions for every tag/attribute/etc. so that's definitely a good starting point and I'm thinking with the changes made to the way we generate code in v4, it might not be _too_ difficult to get the code writer to map changes back to the positions of the nodes its writing.  Then we would need some kind of way to track where newly generated nodes came from.  This would probably require the core transforms and user-generated transforms to give the compiler hints about what it's doing.  This would be especially true when custom parsing tag/attribute argument expressions.\r\n\r\nI actually just recently added a `_currentNode` property to the context, so if we connect the builder to use that we might be able to track things in many cases, but I there would still be cases where you might need to pass in an original node to a builder method, possibly with position offsets.  \r\n\r\nI definitely think we can get this to work.  We just need the time to spend on it.\r\n\r\nIn the short-term, maybe controlling `writeToDisk` via an environment variable would be easiest:\r\n\r\n```\r\nMARKO_WRITE_TO_DISK=true npm start\r\n```\r\n\r\nor something more generic like:\r\n```\r\nDEBUG=marko npm start\r\n```\r\n\r\n\r\n\r\n\r\n That's an interesting thought @mindeavor. It's a little more verbose, but a tag such as one of the following would be easier to implement::\r\n\r\n```xml\r\n<write-to-disk/>\r\n<!-- or -->\r\n<marko-compiler write-to-disk/>\r\n<!-- or -->\r\n<marko-debug/>\r\n<!-- or -->\r\n<marko-compiler debug/>\r\n\r\n<div>\r\n  Hello ${data.name}\r\n</div>\r\n```  I don't quite follow. Marko templates are resolved and loaded through the Node.js module loading system just like normal JavaScript modules. There's no \"views dir\" and there is no root path when using marko directly. Can you provide more details and code to illustrate the problem you are seeing?\n As Patrick said, we use node's module resolution to handle finding the template.  If you really wanted to have a views directory, you could roll something yourself using the `require('marko').load()` function which expects a fully resolved filesystem path.  In our examples we use `require.resolve` to get that path, but there's nothing stopping you from resolving it relative to some views directory, but that would all happen outside the scope of Marko.   Maybe something along the lines of [this](https://gist.github.com/mlrawlings/d92b5c1d89abefbba66e2d8af5c47eef).\n\nHowever, I would recommend having your `render` function take the loaded template as a parameter:\n\n``` js\nvar template = require('./index.marko')\n\napp.use(({ res }) => {\n  res.send(200, marko.render(template, { name: 'Trek Engine' }))\n})\n```\n\nWe do something similar in the [`marko/express`](https://github.com/marko-js/marko/blob/master/express.js) submodule to provide the [`res.marko`](http://markojs.com/docs/marko/express/) method.\n  I think what needs to happen here is that in addition to `.marko` and `.marko.html`, we should also look for any extensions that were registered via `require('marko/node-require').install()`.\n\nFor example:\n\n``` javascript\nrequire('marko/node-require').install({ extension: '.marko' });\nrequire('marko/node-require').install({ extension: '.marko-xml' });\nrequire('marko/node-require').install({ extension: '.foo' });\n```\n\nWe should check to see if the path ends with `.marko`, `.marko-xml` and `.foo`.\n\nThoughts? Would you be interested in working on this @jlarsson?\n  Hey @fundon. marko uses the [Apache 2.0](http://www.apache.org/licenses/LICENSE-2.0) license. I'm not a lawyer, but if you are just depending on marko (and not modifying it) then you don't need to do anything. Any distribution of marko need to include a copy of the license (which will be the case if you  are installing from npm or directly from Github).\n\nIf that doesn't answer your question then please let me know, but I am going to go ahead and close the issue.\n @fundon yes. as long as you are not modifying and redistributing marko then it doesn't matter what the license is for your project.\n  Hi @Eldar-X, what version of Safari are you using and which OS? When I test Safari version 9.1.2 (11601.7.7) on OSX everything is working as expected using the following sample app: https://github.com/marko-js-samples/marko-progressive-rendering\n\nIt will vary by browsers, but most browsers must receive a minimum threshold of bytes before the initial render. It's possible that for your app you are not sending down enough HTML for the initial HTML and this is causing the browser to just buffer the received HTML instead of rendering the initial page. If you can provide more details on your setup or a sample app I will investigate some more.\n  Hey @basickarl, here's what I consider to be a good directory structure:\n\n``` clojure\n/\n \u2937 .cache/ (auto-generated-files)\n \u2937 config/\n    \u2937 development.json\n    \u2937 production.json\n \u2937 node_modules/ (installed-modules)\n \u2937 src/\n    \u2937 components/\n       \u2937 some-component/\n          \u2937 test/\n          \u2937 index.js\n          \u2937 style.css\n          \u2937 template.marko\n          \u2937 template.marko.js\n       \u2937 .../ (additional-components)\n    \u2937 layouts/\n       \u2937 _common/ (files-common-to-all-layouts)\n       \u2937 main/\n          \u2937 fonts/\n             \u2937 sanfrancisco.woff2\n          \u2937 images/\n             \u2937 logo.webp\n          \u2937 style.css\n          \u2937 layout.marko\n          \u2937 layout.marko.js\n       \u2937 .../ (additional-layouts)\n    \u2937 pages/ (directory-of-pages)\n       \u2937 home/ (the-home-page)\n          \u2937 components/ (components-used-by-home-only)\n          \u2937 images/\n             \u2937 hero-image.webp\n          \u2937 index.js (home-route-handler)\n          \u2937 style.css \n          \u2937 home.marko\n          \u2937 home.marko.js\n       \u2937 .../ (additional-pages)\n    \u2937 app.js\n \u2937 static/ (auto-generated-files)\n \u2937 test/ (test-related-files)\n \u2937 package.json\n```\n\n And to touch on some of your other questions:\n\n### **How does one create a template which nests another template?**\n\n_template.marko_\n\n``` xml\n<ul for(item in data.items)>\n    <include('./item.marko') name=item.name />\n</ul>\n```\n\n_item.marko_\n\n``` xml\n<li>${data.name}</li>\n```\n\n### **tags vs. widgets?**\n\nTypically you'll see widgets implemented as custom tags.  A widget's template uses the `w-bind` attribute to link to a JavaScript file that contains its client-side behavior.\n\n### **what is [marko.json](http://markojs.com/docs/marko/custom-taglibs/#markojson)?**\n\nMarko will automatically look for directories under `components/` and [scan them](http://markojs.com/docs/marko/custom-taglibs/#scanning-for-tags) for custom tags.  If you want to define individual tags, use custom transforms, or scan a directory other than `components/`, you'll need to use this file to provide the configuration.  It used to be that you needed this file even if all your components were under a `components/` directory, which is why you'll find it in many examples.\n\n### client marko rendering (both non widget and widget) is still unclear to me\n\nA module bundler is needed to use marko client side, webpack [should work](https://github.com/marko-js/marko/issues/44), but I don't have any experience using it with marko.  We're currently working on some improvements (performance and otherwise) to client-side rendering.  We should update the docs and give some better examples once that work is complete.\n\n### I would like to see an example project which touches all areas so I can see how they could be fit together\n\nWe have an sample project that makes use of Marko, but currently it's internal to eBay.   We'd need to remove some eBay specific things from the app, but it would probably be worthwhile to make that generally available.\n\n### I think explaining from scratch for beginners who have just come from i.e. jQuery how marko works will draw a lot more attention to it.\n\nI agree.  This is an area where we could use some help if you're willing.  It would be amazing to start seeing some training content provided by people outside the project maintainers.  I think when you're just starting to learn something you're in a unique position to help people at the same place, as things become familiar we tend to forget the aspects that used to be difficult for us.  \n\nIf you have more questions, feel free to join us on [gitter](https://gitter.im/marko-js/marko) and welcome to the community! :tada:\n @davidenq everything under `src/` includes all application source code (both server-side, client-side and isomorphic code). In most cases, whether or not code is client-side or server-side will depend on how the code is used. Do you have any other specific doubts?\n I'm going to go ahead and close this issue. If you still have unanswered questions, please feel free to add comments here or open a new Github issue.\n @basickarl You can pass the data as the second argument for the `<include(path[, data])>` tag:\n\n``` xml\n<ul for(item in data.items)>\n    <include('./item.marko', item) />\n</ul>\n```\n\nSee: http://markojs.com/docs/marko/language-guide/#includes\n @Anant-Raj \r\n\r\nThe `components/` directory can exist in multiple places in your project and they are scoped. We recommend the following directory structure:\r\n\r\n```\r\nmy-app/\r\n    components/ \u2190 top-level UI components shared by all pages/routes\r\n    routes/\r\n        about-me/\r\n            components/ \u2190 UI components scoped to the about-me route\r\n            index.marko\r\n        index/\r\n            components/ \u2190 UI components scoped to the index route\r\n            index.marko\r\n   ```\r\n\r\nYou can see this project structure in action as part of our starter app: https://github.com/marko-js-samples/marko-starter-demo\r\n\r\nLet me know if you would like more details, but hopefully that answers your question.  No worries. I still think it was confusing since the docs say that they are deprecated, but we don't say why or which method should be used instead. I'll fix this to avoid confusing others. Thanks for opening the issue.\n  See: https://github.com/marko-js/marko/issues/357\n  The builtin `empty`/`notEmpty` helpers will be removed in Marko v4 and will be deprecated in v3 (with console warning).\n\nIf still needed, these helpers can still explicitly be imported:\n\n``` html\n<script marko-init>\nvar empty = require('marko/helpers/empty');\nvar notEmpty = require('marko/helpers/notEmpty');\n</script>\n```\n\nAlternatively, you can simply check the array length or ensure that a string is not \"falsey\".\n# Why?\n\nThe `empty`/`notEmpty` helpers were automatically being added to every compiled template. While they can be helpful, we feel it is better if the developer explicitly imports only the exact helpers that your code depends on for improved modularity. Also, when adding support for [inline marko templates](https://github.com/marko-js/marko/issues/349) we found that these `empty`/`notEmpty` helpers could conflict with other JavaScript code since all static code/imports are added at the top of the JavaScript file.\n @briceburg I suppose one possibility would be to introduce a new option in `marko.json` to opt-in for the `empty`/`notEmpty` helpers, but I don't think it is a good idea to go there. Personally, I would just use `<if(data.commits && data.commits.length)>` instead of a helper. If you have any other thoughts or ideas please share.\n  Thanks. Appreciated \ud83d\ude04 \n  <!--- Provide a general summary of your changes in the Title above -->\n## Description\n\n<!--- Describe your changes in detail -->\n\nPreviously there was a difference in the way empty string (`\"\"`) was handled when it was a literal value.  It now uses the raptor-util behavior for both literals and dynamic values.\n## Motivation and Context\n\n<!--- Why is this change required? What problem does it solve? -->\n\n<!--- If it fixes an open issue, please link to the issue here. -->\n\nFixes #327\n## Checklist:\n\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\n\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\n- [x] My code follows the code style of this project.\n- [x] I have updated/added documentation affected by my changes.\n- [x] I have read the **CONTRIBUTING** document.\n- [x] I have added tests to cover my changes.\n- [ ] All new and existing tests passed. \n\n**The tests will fail until raptorjs/raptor-util#4 is merged and published**\n  Thanks for letting me know. I have fixed the `.npmignore` file and published a new version with *.orig files excluded\n  ## Description\n\nCurrently when a node/tag is marked with \"preserve-whitespace\", the whitespace is being preserved for only directly nested text. The expected behavior should be that whitespace should be preserved for all directly nested text and any text nested at any level below the node.\n## Motivation and Context\n\n[Issue #345](https://github.com/marko-js/marko/issues/345)\n## Checklist:\n- [X] My code follows the code style of this project.\n- [X] I have updated/added documentation affected by my changes.\n- [X] I have read the **CONTRIBUTING** document.\n- [X] I have added tests to cover my changes.\n- [X] All new and existing tests passed.\n  ## Checklist:\n- [X] My code follows the code style of this project.\n- [X] I have updated/added documentation affected by my changes.\n- [X] I have read the **CONTRIBUTING** document.\n- [X] I have added tests to cover my changes.\n- [X] All new and existing tests passed.\n  Actual usage will be the following:\n\n``` javascript\nvar defineRenderer = require('marko/defineRenderer');\n\nmodule.exports = defineRenderer({\n    template: require('./template.marko'),\n    getTemplateData: function(input) {\n        var firstName = input.firstName;\n        var lastName = input.lastName;\n\n        return {\n            fullName: firstName + ' ' + lastName\n        };\n    }\n})\n```\n\nNOTE: `defineRenderer` should be required as a sub-module (`require('marko/defineRenderer')`). This was done to avoid adding any extra weight to the main `marko` runtime.\n  Some notes:\n- The parser is working as expected\n- This is not really a bug, but it is a \"gotcha\"\n- We should offer a custom tag to avoid the situation where nested body content is ended too early.\n\nOne possible solution:\n\n``` xml\n<marko-parser body='static-text'>\n    <section>\n        <div>Other Content</div>\n        <section>Content Goes Here</section>\n    </section>\n</marko-parser>\n```\n\nThoughts?\n  ## Description\n\n<!--- Describe your changes in detail -->\n\nAllows excluding the `components/` dir itself, in addition to its parent directory (presumably where a `marko.json` would have been found.\n## Motivation and Context\n\n<!--- Why is this change required? What problem does it solve? -->\n\n<!--- If it fixes an open issue, please link to the issue here. -->\n\nFixes #340 \n## Checklist:\n\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\n\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\n- [x] My code follows the code style of this project.\n- [x] I have updated/added documentation affected by my changes.\n- [x] I have read the **CONTRIBUTING** document.\n- [x] I have added tests to cover my changes.\n- [x] All new and existing tests passed.\n  I'm testing this using a render test.  Is that fine?\n I think a render test is great because it easy to write tests based on the output HTML. Alternatively, you could add a taglib lookup test if you felt the need to inspect some of the internal data structures similar to the following: https://github.com/marko-js/marko/blob/master/test/autotests/taglib-lookup/custom-tag/test.js\n Amended commit has been merged: https://github.com/marko-js/marko/commit/80999593551b08d5a838daed462eb7561a735ec5\n\nNew version published with improvement: `marko@3.8.0`\n\nClosing PR.\n  There are no `try...catch` blocks in Marko (for performance reasons, but also because the Marko runtime wouldn't know how to best handle the error). A common strategy for error handling in Node.js is to gracefully close all connections when an uncaught error occurs and to shutdown the process. The following is a good read: https://www.joyent.com/node-js/production/design/errors\n\nHowever, another good alternative is to use promises. Promise implementations use an implicit `try...catch` so you can do the following to catch any errors when rendering the initial HTML that is rendered synchronously:\n\n``` javascript\nfunction controller(req, res) {\n    new Promise(function(resolve, reject) {\n            template.render({name: 'Frank'}, res);\n        })\n        .catch(function(err) {\n            res.end();\n            // Handle the error...\n            console.log('Templating rendering failed! ', err);\n\n        });\n}\n```\n\nIn addition, if you are using the [`<await(...)>`](http://markojs.com/docs/marko/async-taglib/#<code>&ltawait><code) you can provide a promise as the data provider to handle the errors when rendering portions of your template asynchronously.\n\nAlso, we plan on adding a promise API method soon: https://github.com/marko-js/marko/issues/251\n\nDoes that answer your question?\n  @bkuri, the implementation of `builder.text` looks like this:\n\n``` js\ntext(argument, escape, preserveWhitespace) {\n    if (typeof argument === 'object' && !(argument instanceof Node)) {\n        var def = arguments[0];\n        return new Text(def);\n    }\n    argument = makeNode(argument);\n\n    return new Text({argument, escape, preserveWhitespace});\n}\n```\n\nso try passing `true` as the third parameter:\n\n``` js\nreturn builder.htmlElement 'script', {}, [\n    builder.text builder.literal(js), false, true\n]\n```\n  @bkuri Thanks! Since you've already got a branch for this, would you mind running the tests (`npm test`) and fixing the one that fails?  It's actually asserting that `literalUndefined === null`! \ud83d\ude06 \n  @bkuri This one also fails due to the test being incorrect... oops!\n  @aniruddh-a this looks like an issue with Lasso and not Marko. Do you mind moving this issue over to https://github.com/lasso-js/lasso and providing more details on your lasso version? Thanks!\n Lasso issue: https://github.com/lasso-js/lasso/issues/155\n  This branch is a starting point for encouraging contributions to Marko with the following:\n- [x] Highlight how to get involved in the `README.md`\n- [x] Add a `CONTRIBUTING.md`\n- [x] Add an `ISSUE_TEMPLATE.md`\n- [x] Add a `PULL_REQUEST_TEMPLATE.md`\n  @aniruddh-a and I were discussing how custom tags are discovered, and he wondered why it couldn't just be done automatically.  This might be a good idea to explore.\n\nEssentially, it would function kinda like `node_modules` except based on the `components` directory (which has become a standard way of doing things).  The taglib lookup could search first in the current directory for a `components` directory and continue walking up to the project root to discover tags.\n\nThis actually mirrors the way that `marko.json` files are discovered and could be done in the same step.\n\nThoughts?\n\n/cc @marko-js/maintainers \n My initial reaction is that I don't like introducing too much convention since it makes things feel less flexible and introduces more magic. There's also the overhead of now looking for both a `marko.json` file and a `components/` folder. I feel like adding a `marko.json` file with a single `tags-dir` property is insignificant and it is extremely flexible. I will let others weigh in though.\n @patrick-steele-idem To reiterate what Yoni said, we already have convention within the `tags-dir`, this just takes it one step further.  I think it makes sense as a default.  \ud83d\udc30 \ud83c\udfa9 \u2728\n\n@yomed This would allow a structure like:\n\n```\n/\n \u2937 src/\n    \u2937 components/\n        \u2937 some-component/\n           \u2937 components/\n               \u2937 some-subcomponent/\n           \u2937 renderer.js\n           \u2937 template.marko\n    \u2937 layouts/\n        \u2937 main/\n           \u2937 components/\n               \u2937 some-layout-specific-component/\n           \u2937 layout.marko\n    \u2937 pages/\n        \u2937 home/\n           \u2937 components/\n               \u2937 some-page-specific-component/\n           \u2937 index.js\n           \u2937 template.marko\n```\n\nwithout a `marko.json` at each level.\n  /CC @philidem @mlrawlings \n\nNot ideal, but you can using a space character: `<img alt=\" \">`\n\nWith that said, I think we should revisit the rules for rendering attribute value. I think the following would be more appropriate...\n\nGiving the following template:\n\n``` xml\n<img alt=someExpression/>\n```\n\n| someExpression | Current | Proposed |\n| --- | --- | --- |\n| `undefined` / `null` / `false` | `<img>` | `<img>` (no change) |\n| `true` | `<img alt>` | `<img alt>` (no change) |\n| `''` | `<img>` | `<img alt=\"\">` |\n\nWhile this would be a change, I am not sure it would actually break anything. Thoughts?\n @patrick-steele-idem I'd lean towards your table rather than creating a list of exceptions.\n\nI was just testing and I think we've got some weird behavior...\n\n`<img alt=\"\">` becomes `<img alt>`\n\nbut\n\n`<img alt=data.alt>` becomes `<img>` if `data.alt === ''`\n\nThis is weird, but also means that we could probably leave `alt=\"\"` untouched if it's a string literal and keep the current behavior if it's a variable that contains an empty string as its value (if we want to).  Or maybe we should make it consistent...\n\n@yomed Out of curiosity, is there any reason why you couldn't forgo the `alt` attribute and use `role=\"presentation\"` or `aria-hidden`?  And does `alt` behave differently than `alt=\"\"`?\n @yomed If you ask me, even `alt=\"\"` is kinda a hack used to stop the screen reader from reading out the url to the image.  But `role=\"presentation\"` or `aria-hidden` explicitly tell the screen reader to ignore it because it's for presentational purposes only.  \n\nIn any case, we should probably fix this.\n I'm in favor of updating Marko to follow the proposed table above as part of a minor release. The chances of actually breaking anything are extremely low since the worst case is that there will be an attribute with empty quotes when there was no attribute before. Any objections?\n @yomed I don't know that this is a definitive test, but here's what WAVE has to say:\nhttp://wave.webaim.org/report#/http://output.jsbin.com/majejevelu\n\nIt would seem that `alt` and `alt=\"\"` are equivalent.  I've also seen recommendations for an image to \"be given empty/null alternative text\", although they go on to show `alt=\"\"` in examples.\n\n@patrick-steele-idem What are your thoughts on leaving the current behavior for variables and leaving the empty string when it's specified as a string literal?\n\nAlthough, it might be useful to have the behavior from the table if you're generating a list of images from something like:\n\n``` js\n[{ src=\"/1.png\" alt=\"something\"}, { src:\"2.png\", alt=\"\" }]\n```\n\nThough I'd say chances are pretty good that given a list of images like this, they should all have `alt` content or should all have an empty/null `alt`.\n > @patrick-steele-idem What are your thoughts on leaving the current behavior for variables and leaving the empty string when it's specified as a string literal?\n\nI would want things to be consistent regardless of whether or not the attribute value is a literal value or a dynamic expression.\n  /CC @philidem @mlrawlings @tindli \n\nThank you for the detailed write up, @nicolashery! This seems completely doable with some tweaks to the compiler and runtime. For example, we would need to modify the `FunctionDeclaration` AST node to support extra type information for params.\n\nPersonally, I am not yet using TypeScript. I'm not opposed to TypeScript, but I also haven't had a strong desire to start using it. Because of that, I may not be the best person to work on this. I would rather someone who is actively using TypeScript to do the coding, but I can definitely help point you in the right direction. As long as the code changes are clean and well-tested then I have no objections to this proposal.\n\nRegarding open questions:\n\n> Source-maps & errors: If a runtime error occurs in the generated JS, can we show the line in the .marko file that caused it?\n\nThat may be nice and I think that is  also doable without drastic changes. For example, the compiler would need to attach source mappings to parsed expressions. It's definitely something I have thought about, but we haven't had any time to come up with a formal proposal or implement it. With that said, I have found source maps to be somewhat problematic and often end up disabling them (e.g. when doing Atom plugin development with CoffeeScript). Instead, we have focused on making sure the compiled output is extremely readable. For that reason, supporting source maps has been a low priority.\n\n> Editor integration: A nice feature of TypeScript is the auto-completion and real-time type-checking. Would it be feasible to have that directly in the the .marko file?\n\nI would have to take a look at how TypeScript autocompletion works for other files, but I suspect this will be challenging. Maybe the template can be compiled to TypeScript and source maps could be used to generate autocompletions as the user is editing the `.marko` file? It seems like that would probably be too slow, but maybe not.\n\n---\n\nPlease let me know if you are interested in contributing and we can discuss a plan of action.\n\nAny thoughts from others?\n I think this will be possible once the changes here are hashed out: https://github.com/Microsoft/TypeScript/issues/6508 . They are solving some angular-2-specific problems that should also make it easier to typecheck `.marko` files, since they are pretty similar in structure.    @Hurtak this isn't actually a problem Marko can solve since putting dynamic values inside a `<script>` block is inherently unsafe. Wherever you are allowing user data to be inserted into a script block you should be using `JSON.stringify()` to ensure that it is only data and not code:\n\n``` xml\n<script>var x = $!{JSON.stringify(data)}</script>\n```\n\nIn this case, HTML escaping is disabled because encoded HTML entities are not decoded if they are inside `<script>` tags.\n\nHowever, if the stringified data contains an ending `</script>` tag then that will prematurely end the `<script>` block so you need to do the following:\n\n``` xml\n<script>var x = $!{JSON.stringify(data).replace(/<\\//g, '<\\\\u002F')}</script>\n```\n\nWith that said, using `<script>` tags with dynamic code is still very dangerous. It's best to put user data into DOM attributes so that it is guaranteed not be executed. For example:\n\n``` xml\n<div data-foo=JSON.stringify(data)>\n```\n\nThe data can then be extracted from the DOM using code similar to the following:\n\n```\nvar foo = JSON.parse(el.getAttribute('data-foo'));\n```\n\nI'm going to close this issue because it doesn't require any changes to Marko, but we should probably put together a more complete security guide.\n @Hurtak also, if you have any thoughts or suggestions on how we might be able to avoid the security problems associated with `<script>` tags please share. If we can provide a helper of some sort then that might not be a bad idea.\n @Hurtak The `escapejs` filter that django provides is a little odd since it assumes that the character being escaped inside a JavaScript string, but after giving it some thought that's probably an okay assumption. I think I'm coming around to escaping special HTML characters using the JavaScript string escape sequence in the  context of a `<script>` block. It's definitely better than the current code that escapes special HTML characters inside `<script>` blocks using HTML entities which is absolutely not what we want.\n\nFor example, given the following template:\n\n``` html\n<script>\n    var foo = ${JSON.stringify(data.foo)};\n</script>\n```\n\nAnd the given data:\n\n``` javascript\n{\n    foo: {\n        name: 'Evil </script>'\n    }\n}\n```\n\nThe output is currently the following:\n\n``` html\n<script>\n    var foo = {\"name\":\"Evil &lt;/script>\"};\n</script>\n```\n\n(browsers do not decode HTML entities inside `<script>` blocks... `<script>` tags are special)\n\nThe output should be the following:\n\n``` html\n<script>\n    var foo = {\"name\":\"Evil \\u003C/script>\"};\n</script>\n```\n\nI'm going to reopen this issue and investigate a proper fix. Thanks for opening this issue and thank you for your persistence :)\n New version published: `marko@3.7.1`\n\nSee [CHANGELOG.MD](https://github.com/marko-js/marko/blob/master/CHANGELOG.md#371) for a longer description of what exactly changed: \n @yomed \n\n> With this fix in place, is there still any reason to avoid putting data in inline scripts? \n\nThis was done in preparation for support CSP. However, as long as we put a CSP `nonce` attribute on the inline `<script>` tag then we are still able to use inline `<script>` tags. In a future version of Marko Widgets we plan on switching to using `<script>` tags to pass data down to the browser for performance reasons. So to answer your question, no, there is no good reason to avoid putting data in inline script tags.\n  Looks good. Thanks!\n  Thanks for the improvement! New version published with fix: `marko@3.6.2`\n\nPlease let me know if you see any other issues. Thanks, again.\n  Hey @thomastorfs, thanks for reporting the problem. I'm going to see if I can reproduce, but if you could provide more details that would be great.\n I suspect you are seeing this issue because there are multiple instances of `marko` being loaded at runtime and each instance is being configured independently. This could happen if you have different versions of `marko` being used in your project and that would prevent de-duping from happening when installing the node modules. Do you see multiple lines for `marko` when you run `npm list`?\n\nIn either case, I decided to make the Marko configuration a true \"singleton\" by attaching it to the global scope. This may or may not solve your problem depending on which versions of `marko` are being loaded in your project, but once you are using only the latest version then it should fix the issue in the situation that there are multiple instances of marko being loaded.\n @thomastorfs @aaronshaf would either of you be able to share a minimal project to reproduce the problem? I was not able to reproduce the problem. Thanks!\n @jasonmacdonald thanks for digging in and figuring out the issue. I don't see any harm with passing along the configuration provided when calling `require('marko/node-require').install({config...})` to `require('marko/compiler').configure(...)` . This would make the configuration truly global as expected.\n\nNOTE: You should not be referencing `global.__MARKO_CONFIG` in your code since that is an implementation detail that could change in the future.\n  - Fixes #314 - Remove hyphens from include props\n- Deprecated:\n  - Properties passed in using the `<include>` tag should not be access using hyphens.\n\nFor example, given the following template:\n\n``` xml\n<include(\"./include-target.marko\") first-name='Jane'/>\n```\n\nThe `first-name` data should be accessed using the `firstName` property:\n\n``` javascript\nvar firstName = input.firstName;\n// NOT: var firstName = input['first-name'];\n```\n Looks good!\n  @patrick-steele-idem and I have discussed adding a tag to marko's core that handles streaming in an elegant way.\r\n\r\nThe syntax that we're looking at is the `<on>` tag:\r\n\r\n``` xml\r\n<ul>\r\n    <on(user in data.usersStream)>\r\n        <li>${user.name}</li>  \r\n    </on>\r\n</ul>\r\n```\r\n\r\nWe'd also support a more verbose syntax for generic EventEmitters:\r\n\r\n``` xml\r\n<on('data' as user in usersStream until 'end')>\r\n```\r\n\r\n> **Note:** `<for(x in stream)>` was considered, but it would complicate the looping logic of regular for loops and require the stream logic to be present even for templates that never make use of it.  We need something that is syntactically different so we can distinguish at compile time.\r\n> \r\n> **Note 2:** we also considered `<for-async(x in stream)>` and `<for await(x in stream)>` however `<on>` has the benefit of making sense when used with any EventEmitter.\r\n\r\nIn many ways, the `<on>` tag will be similar to the `<await>` tag ([previously `<async-fragment>`](https://github.com/marko-js/marko/pull/312)), however the `<on>` tag will also flush multiple times throughout it's rendering cycle.\r\n\r\nThere is a tradeoff to consider around flushing.  If we flush after each iteration, content will be pushed to the browser sooner, but if we buffer a few iterations and gzip is enabled, the resulting payload will be smaller.  We need a good default for flushing and an easy, intuitive way to configure it.  \r\n\r\nWe also need to figure out what should be provided by the tag, and what interesting use cases we want to support.  One that comes to mind immediately is infinite scrolling.\r\n\r\nAll that said, here is my proposed set of attributes for the `<on>` tag:\r\n- `@var` - parsed from the argument, the variable to be used inside the body of the tag\r\n- `@event` - parsed from the argument, the name of the event to listen to, defaults to \"data\"\r\n- `@endEvent` - parsed from the argument, the name of the event that signifies the end of the loop, defaults to \"end\"\r\n- `@data-provider` - parsed from the argument, the stream or emitter we're listening to\r\n- `@name` - the name of the `<on>` tag.  used for debugging and the `show-after` attribute\r\n- FUTURE: `@client-reorder` - the `<on>` tag will not block the rest of the page, JS is required on client\r\n- FUTURE: `@show-after` - when `client-reorder` is set to true then displaying this instance's content will be delayed until the referenced `<await>` or `<on>` instance is shown.\r\n- ~~`@buffer-count` - how many iterations of the `<on>` tag to buffer before flushing~~\r\n- ~~`@buffer-duration` - if the time since the last flush is greater than the buffer duration, then the `<on>` tag will flush its buffer, regardless of the current buffer count~~\r\n- `@timeout` - if the time since the last chunk of data was emitted is greater than the timeout, then the `<on>` tag will timeout\r\n- ~~`@total-timeout` - if the time since the rendering started is greater than the total timeout, then the `<on>` tag will timeout~~\r\n- `@error-message` - a message that is shown if the stream emits an error\r\n- `@timeout-message` - a message that is shown if the stream times out\r\n- FUTURE: `@placeholder-message` - a message that is shown while the `<on>` tag is streaming\r\n- `@empty-message` - a message that is shown if the stream ends without emitting data\r\n- `@finish-message` - a message that is shown when/if the stream completes successfully\r\n\r\nAlso, we'll provide `<on-placeholder>`, `<on-error>`, `<on-timeout>`, `<on-empty>`, and `<on-finish>` as alternatives `*-message` attributes.\r\n **Example time:**\n\nLet's say we want to create a list that has a few users in it and a button to load more users.  Those users come from some service call.  With `<await>` we'd do something like this:\n\n``` xml\n<await(users from data.usersProvider) client-reorder>\n    <await-placeholder>\n        <card>\n            <loading-indicator/>\n        </card>\n    </await-placeholder>\n    <for(user in users)>\n        <card>\n            <img src=user.avatar />\n            <info>\n                <name>${user.name}</name>\n                <handle>${user.handle}</handle>\n            </info>\n        </card>\n    </for>\n    <button>load more</button>\n</await>\n```\n\nIn this case, the placeholder card would spin until the data gets back from the service call, then we render the user cards and load more button and replace the placeholder with these.\n\nWith `<on>` and a stream, we could do this instead:\n\n``` xml\n<on(user in data.usersStream) client-reorder>\n    <on-placeholder>\n        <card>\n            <loading-indicator/>\n        </card>\n    </on-placeholder>\n    <card>\n        <img src=user.avatar />\n        <info>\n            <name>${user.name}</name>\n            <handle>${user.handle}</handle>\n        </info>\n    </card>\n    <on-finish>\n        <button>load more</button>\n    </on-finish>\n</on>\n```\n\nIn this case, the placeholder would spin until all user cards have loaded.  As each user is emitted by the stream, a user card would be rendered and inserted right before the loading card.  Once all user cards were loaded, the load more button would be displayed and the placeholder removed.\n\nHere's a [mockup](http://output.jsbin.com/nikifen) of the difference.\n More thoughts:\n\nIt might be useful be able to see what iteration you're on like the `<for>` tag's  `status-var`.\n- Each time through the status var would contain the current iteration: `0, 1, 2, 3 ...`\n- On the `end` event the status var would contain the number of iterations, similar to the way things work in a native `for` loop:\n\n``` js\nfor(var i = 0; i < array.length; i++) {\n    console.log(array[i]);    \n}\nassert(i === array.length);\n```\n\nThis could be used to: \n- show a different `timeout-message` or `error-message` base on whether any data had already been rendered:\n\n``` xml\n<on(user in data.usersStream | status-var=loop)>\n    <on-timeout>\n        <if(loop.getIndex() > 0)>\n            We timed out, but at least we got some data!\n        </if>\n        <else>\n            We timed out and got nothing...\n        </else>\n    </on-timeout>\n    ${user.name}\n</on>\n```\n- In the same way, it removes the need for `empty-message`\n This sounds great! We would be able to use this right away. We're basically doing this manually in a renderer.js file ourselves now, but this is much cleaner and doesn't require us to expose all the `out.beginAsync` stuff to create our own stream.\r\n\r\nAre there any strong feelings in making this a separate tag? Would it make sense to just have `<await>` accept a stream in addition to promises and callbacks? Or does that have mostly to do with the terminology of await in ES2017? @scttdavs The main difference, is in passing a stream to `<await>` you would need to buffer the stream until it completes, where as `<on>`'s body would be called every time a `data` event was emitted from the stream and could flush out multiple times.\r\n\r\nI actually just [threw something together](https://github.com/mlrawlings/marko-on-tag) this afternoon because another team at eBay was asking about this.  It doesn't have any of the timeout/placeholder/buffering/flushing/etc. in place, but it's a good starting point.\r\n\r\nI probably won't have time to revisit this for a little while, so if you're interested in working on this, that would be awesome!\r\n\r\n/cc @rajaramu (on the aforementioned team at eBay) I think there's enough differences between handling a `Promise` vs a `ReadableStream`/`EventEmitter` that it makes sense to keep the tags separate and I think it will make things less confusing and easier to document. I could be wrong though and I might be convinced that `<await>` could be extended to support both a Promise that gets flushed once when resolved versus a `ReadableStream`/`EventEmitter` that will flush for every event. We still need to finalize this proposal before doing any work so if you have any thoughts on usage please share. I kind of like that implementation too. One concern I would have is that there's no clear way to use `<on-finish>` from Michael's example (or any of the other sub-tags).\r\n\r\nI think `<on-finish>`, in particular, is important because given his example linked above, the one of a `load more` button below the users. What if it is not known whether there are more users to load until data from the stream comes in? In which case you may need a `load more` button or may not. So being able to render it after the steam ends when that information is available would solve that. I'll throw out another proposal:\r\n\r\n```xml\r\n<ul>\r\n    <await(data.usersStream)>\r\n        <on('data' as user)>\r\n            <li>${user.name}</li>  \r\n        </on>\r\n    </await>\r\n</ul>\r\n``` @mlrawlings @philidem @tindli @austinkelleher @Hesulan @scttdavs  should we go forward with using `<await>` with nested `<on()>` tags (see above)? @patrick-steele-idem - I like that syntax a lot. @patrick-steele-idem I like the new proposal, especially reusing with `<await>` since the use cases seem so similar. So given that example and the new nested tag feature (which is done now?), would it look like:\r\n```html\r\n<ul>\r\n    <await(data.usersStream)>\r\n        <@on('data' as user)>\r\n            <li>${user.name}</li>  \r\n        </@on>\r\n        // how is content here handled?\r\n    </await>\r\n</ul>\r\n```\r\nI also had a question in the comment above^ There's the potential argument against `<@on>` because it would need to be transformed:\r\n\r\n`<@on('data' as user)>` would get transformed to `<@on(user) event='data'>` which would generate code like:\r\n```js\r\n{\r\n    on:[{\r\n        event:'data',\r\n        renderBody:function(out, user) {\r\n            out.w('<li>'+escapeXML(user.name)+'</li>';\r\n        }\r\n    }]\r\n}\r\n```\r\n\r\n@scttdavs The rules around content outside `@` tags is a little weird...  Anything outside an `@` tag will come through as `input.renderBody`, except if there are dynamic `@` tags in which case `renderBody` is run and the `@` tags register themselves on the parent and in that case, no content output is allowed in the `renderBody`.\r\n\r\nIn the case of the `<await>`/`<@on>` combination, `renderBody` would _not_ be called.  We should probably thrown an error in that case.  _This:_\n\n``` xml\n<async-fragment data-provider=data.userDataProvider var=\"user\">\n    Hello, ${user.name}\n</async-fragment>\n```\n\n_becomes this:_\n\n``` xml\n<await(user from data.userDataProvider)>\n    Hello, ${user.name}\n</await>\n```\n\n**Tag changes:**\n- `<async-fragment>` => `<await>`\n- `<async-fragments client-reorder/>` => `<await-reorderer/>`\n- `<async-fragment-placeholder>` => `<await-placeholder>`\n- `<async-fragment-timeout>` => `<await-timeout>`\n- `<async-fragment-error>` => `<await-error>`\n\nA transform is provided that will transform the async-fragment versions of these tags to the await version, so nothing will actually break, but a deprecation message will be logged to the console during template compilation.\n\nThis is primarily a syntax change.  All tag attributes remain the same, except that `var` and `data-provider` are now specified in the `<await>` tag's argument.\n\n**Event changes:**\n- `asyncFragmentBegin` => `await:begin`\n- `asyncFragmentBeforeRender` => `await:beforeRender`\n- `asyncFragmentFinish` => `await:finish`\n- `asyncFragmentClientReorder` => `await:clientReorder`\n\nThe async-fragment versions of these events are still emitted, so as to not immediately break modules that make use of these events.  Those libraries should begin to migrate as we'll likely remove the duplicate events at some point.\n I forgot to mention:\n\nCurrently, the output JS looks something like this:\n\n``` js\n//...\n\n      await = __loadTag(require(\"../../../../taglibs/async/await-tag\"));\n//...\n      await({\n          dataProvider: data.userDataProvider,\n          _name: \"data.userDataProvider\",\n          renderBody: function renderBody(out, user) {\n             out.w(\"<div class=\\\"foo\\\">Hello,  \"+escapeXml(user.name)+\"</div>\");\n          }\n      }, out);\n//...\n```\n\nand while this actually works, I'm not thrilled about `await` being used as a variable/function name.\n\nWe could probably utilize a [list of reserved words](https://gist.github.com/mlrawlings/724cc0c3bd4635b7f6541df9526fd084) and append `Tag` to custom tags that match an item in that list.  In this case we'd have `awaitTag({}, out)`.\n Very nice and much cleaner. Thanks for working on this! The only thing that kind of bothers me is the `from` keyword...it works, but just want to make sure we explore all syntax options, what are your thoughts on reversing the syntax?:\n\n``` xml\n<await(data.userDataProvider as user)>\n    Hello, ${user.name}\n</await>\n```\n\nI read that as \"await on `data.userDataProvider` and store the result as the `user` variable\". It also is a little closer to the actual JavaScript syntax where `await` is in front of the expression that produces the `Promise`:\n\n``` javascript\nvar user = await data.userDataProvider;\n```\n\n(of course, in JavaScript the variable is on the left hand side...)\n\nI could probably go either way, but just wanted to throw the alternate option out there.\n\nWhat do you think?\n Both make sense when you read them as a sentence:\n\n```\nawait user from theUserDataProvider\n```\n\n```\nawait theUserDataProvider as user\n```\n\n`from` has the benefit of the variable name being to the left of the statement, which is closer to for loops and assignments, where as `as` has the benefit, as you said, of keeping `await` closer to the provider that it is awaiting which is how it's done in JS.\n\nI'm kinda leaning towards `from`, but it may be just 'cause it's what I've had in my head while thinking about this... what does @tindli, @philidem, and the rest of the community think?\n\n`as` _is_ two characters shorter than `from`...  \n So after thinking about this a bit more, I've come to the conclusion that I'm not so much awaiting the promise, because I already have the promise.   I'm awaiting what I get when the promise is fulfilled.  \n\nIn our example, the `userDataProvider` is just an means to an end.  The only reason I care about the `userDataProvider` is that it will eventually give me the `user`.  The `user` is what I really want.  I am awaiting the `user`.\n\nIf I could, I'd simply write\n\n``` xml\n<await(user)>\n```\n\nBut that doesn't give enough information.  `<await>` doesn't know where the `user` comes `from`.\n\n``` xml\n<await(user from userDataProvider)>\n```\n\nAh. Okay, it comes `from` the `userDataProvider`. Now `<await>` can get me my user.\n\n---\n\nAlso, all feedback has either been neutral or in favor of the `from` syntax.\n\nLet's go with `from`.\n @mlrawlings \n\n> Let's go with `from`.\n\nSounds good to me. I'll be spending a little more time reviewing and will publish a new version soon. In the meantime, would you be interested in updating the migration tool to migrate to the new await syntax from Marko v2? We should also consider making the migration tool a little smarter to look at the version of `marko` installed to determine how the code should be parsed and migrated.\n  Hey @darkwebdev, just wanted to say that I haven't had a chance to investigate since I was out of the office this past week. I hope to investigate this a little later this week. Thanks for reporting the problem and thanks for your patience!\n Fixed. See: https://github.com/marko-js/marko-widgets/issues/153\n\nThanks for reporting the problem!\n  Great. Thank you!\n  Thanks for the improvement, @oxala! New version published: `marko@3.5.0`\n\nIf you get a chance, do you mind updating the following docs?: https://github.com/marko-js/marko/blob/master/docs/custom-taglibs.md \n\nThanks, again\n  Only set `prevClassName` when the `className` has been pushed to `finalClassNames`, otherwise future `className` values will be appended to a class that doesn't get included in the final output.  This effectively limits the number of classes to 2.\n Thanks for the fix! New version published: `marko@3.4.9`\n  An attribute value needs to always follow the rules of JavaScript parsing. Unfortunately, that does introduce some deviation from the HTML spec. However, Marko is not using an HTML parser, but rather the [HTMLJS](https://github.com/philidem/htmljs-parser) parser, and the HTMLJS parser always parses an attribute value as a JavaScript expression. We would not want to special case various attributes since that would makes things problematic.\n\nIt might be helpful to think of it has having to write JavaScript code to set an HTML value:\n\n``` javascript\nvar input = document.createElement('input');\ninput.setAttribute('pattern', '[\\\\w0-9]+'; \n// Note that the backslash character needs to be escaped.\n```\n\nHope that answer satisfies your issue, but please let me know if not.\n > I understand the underlying issue. But my opinion is that when writing HTML within the template we shouldn't have to remember \"no, this isn't really HTML, it's an escaped JavaScript string.\"\n\nI definitely understand where you are coming from. To keep things simple we want to only support one way of parsing things and found that JavaScript expressions were a much better fit for attribute values. The only thing that you need to remember is that the right-hand side of an attribute value is always a JavaScript expression (at least it is consistent).\n\n> I think a solution to this, and probably other cases, would be to have a <raw></raw> Marko directive.\n\nWe could, in theory, introduce a new syntax to break out of the rules of standard JavaScript parsing for an attribute value to support a \"raw\" value, but that would introduce more complexity and likely very little gain. Hypothetically, we could support triple quotes (borrowed from CoffeeScript) or something random:\n\n``` xml\n<input type=\"text\"\n           name=\"username\"\n           placeholder=\"username\"\n           spellcheck=\"false\"\n           autocomplete=\"off\"\n           autocorrect=\"off\"\n           pattern=\"\"\"[\\w0-9]+\"\"\">\n```\n\nDo you think that is worth considering? I'm leaning towards no, because I want to keep the syntax rules simple, but I am open to the idea if there is enough interest.\n /cc @philidem @mlrawlings @tindli Thoughts?\n I'm not sure adding something that deviates further from html (`=!` or anything else) to get back to html really makes sense.  \n\nMy biggest concern is that someone new to marko may not realize wha the issue is with the error presented.  Given that it's a pretty standard js error maybe this isn't really a concern.  It might be worth it if we could point out this difference in parsing when it comes up though.\n\nI do understand not wanting to double escape.  It's a pain when you have to use strings to pass to `new RegExp()` too.  For this specific case, I think it would be nice to be able to use a js regex as the value (we'd have to remove the beginning and ending `/` after calling `.toString()`) :\n\n``` coffeescript\n<input pattern=/[\\w0-9]+/>\n```\n\nAre there other attributes other than `pattern` that might parse unexpectedly?\n If we want to change the way strings are parsed, the only thing I think we should consider is changing the default.  The only change worth making is one that allows you to paste in valid HTML without any changes, otherwise it's easier to explain \"strings are JS strings\" rather than introducing additional syntax.\n\nHowever, I'm not sure this is a good idea.  As to what other attributes this might affect, I guess the better question is where does the HTML attribute string spec deviate from the JS string spec?  Is it just that `\\` needs to be escaped or are there other differences?\n One (probably bad) thought: attempt to parse as JS value, and if that fails, fall back to the HTML way of parsing attributes.\n  - Adds additional event info (finished/timedout) to the data emitted from <async-fragment> tags. \n- Ensures that renderBody() is not called again if the fragment has already finished (timed out).\n- Fixes `npm run test-async`\n- Removes a redundant `async-fragment` timeout related test\n Thanks for the PR! New version published with fixes/improvements: `marko@3.4.7`\n\nStill need to back port to Marko v2\n Fix back ported to Marko v2. New version of Marko v2 published: `marko-async@2.2.2`\n  Thanks for reporting the problem. New version published with fix: `marko@3.4.5`\n\nPlease let me know if you still see any issues. Thanks!\n  Adds coverage reporting through istanbul and coveralls.  We'll need to set up marko on [coveralls](https://coveralls.io/), but it's a pretty painless process.\n Awesome! Thank you for taking the time to do that. I have finished setting up coveralls and now we have a working badge. Thanks again!\n\n> Did you consider using `--include-all-sources` in the istanbul command for coverage against the whole codebase?\n\n@yomed: Would you be interested in trying that out to see if it makes the coverage more accurate?\n  Thanks for the PR @mlrawlings!\n\nNew version published with improvement: `marko@3.4.2` \n  Hey @cantoine, loaded templates are stored in the Node.js require cache. Marko supports hot reloading functionality, but you need to provide a file watcher or use [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh). I recommend taking a look at `browser-refresh`, you will get hot reloading for free on the server and in the browser if you launch your app using `browser-refresh`. If you don't want to use `browser-refresh`, please see the following sample app:\n\nhttps://github.com/marko-js-samples/marko-hot-reload\n\nPlease let me know if you still have questions.\n  Thanks for the fix to the docs! I'll publish a new version of the site now.\n  Great, thank you! I'll publish the new docs now.\n  When using <include> tag like so:\n\n```\n<include template=\"./deferred.marko\" template-data=\"data\" />\n```\n\nif deferred.marko has a widget bound to it in the `w-bind` attribute, the widget.js is not registered and invoked.\n I would not expect that to be the case. Would it be possible to set up a simple project to reproduce the problem? Or, could provide more details on your setup?\n @sidsakhadeo is this still an issue for you?\n Closing this issue.  If this is still an issue in v3, feel free to reopen.\n  New version published: `marko@3.3.0`\n\nThanks!\n  It doesn't look to be a problem in `browser.json`. The error is originally thrown by the html-js parser used by marko: https://github.com/philidem/htmljs-parser/blob/master/Parser.js#L51\n\n@sanjeevashrivastava Are you using an older version of marko/htmljs-parser? I am not able to reproduce the problem using your exact template. Are you using an `npm-strinkwrap.json` that is locking your app to older versions of npm dependencies?\n That's really bizarre... That is the latest version of `htmljs-parser` and I am not able to reproduce with the exact version. Can you please attach your template file to this Github issue? I'm wondering if there are some Windows vs Unix line ending differences that are causing problems.\n I'm still not able to reproduce. It looks like the parser is reading the string too far for you (it's going past the ending quote for the string). I see no reason for this to happen and the test I added is passing...\n @sanjeevashrivastava do you mind spending some more time trying to isolate the problem? Some things to try:\n- Put a space after the second double quote: `<lasso-page package-path=\"./browser.json\" />`. Does that fix the issue?\n- Reduce the template to the following to see if it still fails:\n\n``` xml\n<lasso-page package-path=\"./browser.json\"/>\n```\n- Do you have a different `marko.json` file in the `views/admin` folder that might be causing issue? If so, can you remove that `marko.json` to help isolate the issue?\n\nFinally, what version of `lasso` do you have installed?\n Thanks for the details. I was able to reproduce the issue using the uploaded file. I should be able to figure it out this morning now that I can reproduce. I'll update when I know more.\n Just an update. I found the issue. The htmljs-parser is not handling a [byte order mark (BOM)](https://en.wikipedia.org/wiki/Byte_order_mark) character sequence being added by your editor. BOM characters are pretty rare, but I am working on a fix to skip over those characters.\n\nIn case you are really curious, due to the BOM characters, the parser doesn't recognize the `<` character at the beginning and it is therefore parsing in concise mode. In concise mode the parser does not look for `/>`/`>` ending character sequence.\n Also, FYI:\n\nFrom Wikipedia:\n\n> The Unicode Standard permits the BOM in UTF-8, but does not require nor recommend its use. Byte order has no meaning in UTF-8.\n\nMarko expects templates to be encoded using UTF-8. Again, we still will make the change to strip the BOM characters, but just sharing that BOM characters are not recommended in UTF-8 files.\n Fixed by https://github.com/philidem/htmljs-parser/commit/baf43d342a6263bc3955a95183a15621df767cc7\n\nNew version of `htmljs-parser` published with fix: `htmljs-parser@1.5.13`\n\nPlease let me know if you see any issues. Thanks!\n  @GenaANTGOfficial when a marko template is compiled it will produce a `*.js` file next to the original file and the generation that new file is triggering a restart. The reason you are seeing the infinite restart after upgrading to Marko v3 is that Marko v3 will always recompile the template in development to avoid caching problems. You should update your `nodemon` config to ignore changes to `*.marko.js` files: https://github.com/marko-js/marko#nodemon\n\nOr, better yet, use [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh) :)\n  Looks great! What are your thoughts on renaming `injectInto(express)` to `patchExpress(express)`?\n Awesome. Thank you\n  I believe this is no longer needed after support for merging in `res.locals` to `out.globals` was added for Express. Closing issue.\n  Good catch. Thank you for the fix!\n    Thanks for the question @taecilla and thanks for the reply @davidenq! It sounds like the question was answered so I'm closing the issue. \n  Thanks for the PR but for convenience, we need to keep the docs folder as part of the npm package since the app that generates the docs for marko.json pulls in the `marko` npm package directly from npm to get the defaults. You can, of course, npm link in `marko`, but that adds a little friction. \n  Hey @bitinn, sorry for not being able to respond earlier. We definitely need to add better docs for the new syntax (we have plans to do this very soon). FYI, all of the following are equivalent:\n\n``` xml\np - hello there, <strong>username</strong>.\n```\n\n``` xml\np\n  - hello there, <strong>username</strong>.\n```\n\n``` xml\np\n  ---\n  hello there, <strong>username</strong>.\n  ---\n```\n\n``` xml\np\n  - hello there,\n  strong - username\n  - .\n```\n\nThere are four ways to enter into HTML parsing mode:\n\n**Option 1. HTML tag:**\n\n```\n<div>\n  [this will be parsed as HTML]\n</div>\n```\n\n**Option 2. HTML line after tag/attributes:**\n\n```\ndiv - [this will be parsed as HTML]\n```\n\n**Option 3. Single line HTML block:**\n\n```\ndiv\n  - [this will be parsed as HTML]\n```\n\n**Option 4. Multiline, delimited HTML block:**\n\n```\ndiv\n  ---\n  [this will be parsed\n  as HTML]\n  ---\n```\n\nFor the multiline, delimited HTML block, the delimiter just needs to be two or more characters so the following also works:\n\n```\ndiv\n  -----\n  [this will be parsed\n  as HTML]\n  -----\n```\n\nSorry this wasn't explained better in the docs. Please let me know if you have any other questions. Also, please join us on Gitter if you haven't already: https://gitter.im/marko-js/marko\n  Hi @jainprash, I believe that had already been fixed 12 days ago: https://github.com/marko-js/marko/issues/266\n\nWhich version of `marko` are you using?\n I believe this issue has been resolved.\n  It looks like the code is being hit by the following breaking changes: https://github.com/nodejs/node/wiki/Breaking-changes-between-v5-and-v6#path\n\nHowever, we shouldn't be passing in `undefined` for the path so we should fix that. I'll take a look. Thanks for reporting the problem!\n Tests for marko are passing on Node v6. Please let me know if you find any other issues. Thanks, again!\n  I'm opening this issue to gauge the community's interest in a Atom plugin with advanced features that may include the following:\n- [x] Smart autocompletion for custom tags and standard HTML tags ([get it](https://github.com/marko-js/atom-autocomplete-marko#marko-autocomplete-package))\n- [x] Smart autocompletion for tag attributes based on tag schema files ([get it](https://github.com/marko-js/atom-autocomplete-marko#marko-autocomplete-package))\n- [x] Pretty printing with syntax switcher ([get it](https://github.com/Glavin001/atom-beautify#installation))\n- [x] Block commenting\n- [x] Click to go to tag definition ([get it](https://github.com/marko-js/atom-hyperclick-marko#marko-hyperclick-package))\n- [ ] UI component generator\n- [ ] Anything else?\n\nThe more developers that are interested will help us make a stronger case for investing in this functionality.\n\nRelated issues:\n- [WebStorm plugin](https://github.com/marko-js/marko/issues/272)\n\n(I'll open a similar Github issue for Sublime Text and Visual Studio Code)\n Hey @BryceEWatson, thanks for working on the generator/scaffolding functionality. I like the setup, but I think we need to offer more flexibility and possibly provide the ability for the developer to provide their own \"component template directories\". As an example, not every developer is going to use `.less`. Also, I think we can simplify the code if we just provide a way to copy a directory tree while doing variable replacement (in files and in filenames, and possibly supporting conditional files as well).\n\nAs much as I dislike Yeoman, it might be worth providing Yeoman generators and piggy backing off [atom-yeoman](https://atom.io/packages/atom-yeoman).\n\nAnother option is to build a new, generic \"Generator\" plugin for Atom (independent of Yeoman) and there also be \"Generator Provider\" plugins. We could then provide a Generator Provider plugin for Marko, but other developers could publish their own. It's possible that something like this already exists, but I haven't seen it.\n\nThoughts?\n @Eldar-X I took on the challenge and we now have support for tag matching and synchronized editing of opening and closing tags in Atom: https://github.com/marko-js/atom-language-marko#tag-matching\n\nThere was some learning along the way, but it was a much more difficult task than expected (lots of edge cases), but I am very happy with the end result. You owe me a beer :)\n\nAs a side note, we have merged all of the Atom plugins ([atom-language-marko](https://github.com/marko-js/atom-language-marko), [atom-autocomplete-marko](https://github.com/marko-js/atom-autocomplete-marko) and [atom-hyperclick-marko](https://github.com/marko-js/atom-hyperclick-marko)) into the main [atom-language-marko](https://github.com/marko-js/atom-language-marko) package. The other packages are now deprecated and they were made into no-ops (feel free to uninstall `autocomplete-marko` and `hyperclick-marko).\n\nPlease let us know if you see any issues.\n @tinovyatkin, Patrick and I are not planning on picking up a VS Code plugin in the near future, but @pcanella mentioned he might be interested in working on one.\n @tinovyatkin I did take a look into what it would support autocomplete with VS Code and it wasn't too bad. The main difference between VS Code and Atom is that the autocomplete functionality is required to be provided as a separate process. But as @mlrawlings said, we don't plan on working that in the near future. At the moment we are busy preparing for the next major release of marko (development is happening on master).\n  I'm opening this issue to gauge the community's interest in a WebStorm plugin with advanced features that may include the following:\n- [ ] Smart autocompletion for custom tags and standard HTML tags\n- [ ] Smart autocompletion for tag attributes based on tag schema files\n- [ ] Pretty printing with syntax switcher\n- [ ] Block commenting\n- [ ] Click to go to tag definition\n- [ ] UI component generator\n- [ ] Anything else?\n\nThe more developers that are interested will help us make a stronger case for investing in this functionality.\n\nRelated issues:\n- [Atom plugin](https://github.com/marko-js/marko/issues/273)\n\n(I'll open a similar Github issue for Sublime Text and Visual Studio Code)\n > Also a default widget component files generator via right-click would be nice.\n\nGreat suggestion @wmossman. I'll update the description to include that. Thanks!\n @yask123 So far, most of our tooling effort has been focused around the atom editor (see #273).  We've not got WebStorm on our roadmap right now, and we don't have a lot of expertise with the java-based IntelliJ plugin system.  \n\nOur hope is that a developer that is familiar with the WebStorm ecosystem could look at the atom implementation to add support for WebStorm.\n @davidmoshal Thanks for pointing this out, I believe that _is_ intentional as we don't have a true webstorm integration, but webstorm [can import tmbundles](https://www.jetbrains.com/help/webstorm/2016.3/importing-textmate-bundles.html).  We should definitely make this clearer on that page.  Thanks for reporting the problem @CestDiego. That would be a typo. In the upper right of the page you will see a \"Improve this page\" link. That will take you to the source markdown file if you want to clean it up. I would just remove the `var style = ;` line. If you don't have time to send a PR please let me know, but a PR would be greatly appreciated. Thanks again! \n  Hi, I have a question regarding to the usage of macro for marko@v3. I defined the following macros in `helpers.marko` and want to use it in another file. For example,\n\nhelpers.marko\n\n```\n<macro csrf-meta-tags(csrf)>\n    <meta content=csrf name=\"csrf-token\">\n</macro>\n\n<macro javascriptIncludeTag(src)>\n    <script type=\"text/javascript\" src=src></script>\n</macro>\n```\n\nI want to use it in `application.marko`. How can I do this? I tried the include but it didn't work for me\n Just found out this http://markojs.com/docs/marko/custom-taglibs/\n Sorry, to reopened this again. I have some questions regarding to the usage of macro in multiple files. What is the benefit of using macro over custom-taglibs? Also for template inheritance like layout-taglib, how can I the layout can understand the data from current template?\n\nFor example,\n\nindex.marko\n\n```\n<layout-use(\"./layout.marko\")>\n    <layout-put into=\"title\">My Page</layout-put>\n    <layout-put into=\"body\">BODY CONTENT</layout-put>\n</layout-use>\n```\n\nlayout.marko\n\n```\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title><layout-placeholder name=\"title\"/></title>\n</head>\n<body>\n    <p>\n        <layout-placeholder name=\"body\"/>\n        <custom-tag env=data.env />\n    </p>\n</body>\n</html>\n```\n If I run `marko.load('index.marko').stream({ env: 'production' })`, the layout.marko will not understand data.env right?\n Hey @hung-phan, sorry I wasn't able to respond earlier.\n\nA macro is just inline include/partial that can only be used within the current template.\n\nAn include is a partial that is separated to a separate file so that it can be used by other templates.\n\nA custom tag is a more powerful version of an include that allows some JavaScript code to act as the \"rendering controller\" for the custom tag. In addition, a custom tag can be mapped directly to a template. Custom tags also have the benefit that they are easier to use since they get registered with a tag name.\n\nA layout is just a reusable template that has placeholders\n\nHere's some guidance on deciding when to use what:\n- Use a macro if you need to repeat some HTML within the same template\n- Use an include if you need to break up a template into multiple templates and all of the files are closely related and in the same directory.\n- Custom tags are almost always a better option than includes since they are the most flexible and offer better encapsulation of rendering logic. \n- Use a layout template when you have multiple pages or components that share a common layout/structure\n\n> Also for template inheritance like layout-taglib, how can I the layout can understand the data from current template?\n\nYou an pass data to a layout template as the second argument to the `<layout-use>` tag (see http://markojs.com/docs/marko/layout-taglib/#layout-data):\n\n``` xml\n<layout-use(\"./layout.marko\", { foo: 'bar' })>\n    <layout-put into=\"title\">My Page</layout-put>\n    <layout-put into=\"body\">BODY CONTENT</layout-put>\n</layout-use>\n```\n\nThe data object passed in as the second argument will be available in the layout template as part of the `data` object (e.g. `data.foo`).\n\n> If I run `marko.load('index.marko').stream({ env: 'production' })`, the `layout.marko` will not understand `data.env` right?\n\nYou should use sparingly, but you can pass \"global\" data that is available to all templates. See: http://markojs.com/docs/marko/language-guide/#global-properties\n\nTherefore, you can do the following:\n\n``` javascript\nmarko.load('index.marko').stream({\n    $global: {\n        env: 'production'    \n    }\n})\n```\n\nGlobal data is available in all templates (even templates for custom tags) or wherever you have access to the `out`. For example: \n\n``` xml\n<span>The current environment is ${out.global.env}</span>\n```\n\nHopefully that answers your questions, but please let me know if you need more clarification. I'm going to go ahead and close the issue, but please feel free to reopen or add more comments here and I will take a look.\n It did resolve my problem. Thanks @patrick-steele-idem.\n @hustcer creating a custom tag is as simple as creating a `template.marko` file. \n\nFor example:\n\n`src/components/app-my-helper/template.marko`\n\n``` xml\n<div>\n  Hello ${data.name}!This is my awesome helper.\n</div>\n```\n\nThat's all that is required to create a custom tag. No other files are required.\n\nThe custom tag can then be used in any directory at or below the `src/` directory. For example:\n\n`src/pages/home/template.marko`:\n\n``` xml\n<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>Hello</title>\n    </head>\n    <body>\n        <app-my-helper name=\"Frank\"/>\n    </body>\n</html>\n```\n\nFor more details: http://markojs.com/docs/marko/custom-taglibs/#scanning-for-tags\n  @1N50MN14 The `w-preserve-attrs` attribute only works on standard HTML elements (not custom elements). You should, instead, be adding the `w-preserve-attrs` attribute to the root HTML element in the template for the `<mywidget>` UI component. Please let me know if that does or does not solve your problem.\n I believe this is a non-issue so closing. Please reopen if I am mistaken. Thanks.\n  @Bluejay47 when I try to compile your exact template I get the following error:\n\n```\nAn error occurred while trying to compile template at path \".../template.marko\". Error(s) in template:\n1) [.../template.marko:2:4] Line has extra indentation at the beginning\n```\n\nWhich is what I would expect. The `<html>` tag should not be indented. The following compiles with no issue:\n\n``` xml\n<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <title>Estimake.co</title>\n        <include template=\"./partials/includes.marko\" />\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"editProject.css\">\n        <script src=\"editProject.js\" type=\"text/javascript\"></script>\n    </head>\n    <body>\n        <include(\"./partials/menu.marko\", data)/>\n        <include(\"./partials/footer.marko\")/>\n    </body>\n</html>\n```\n\nPlease let me know if I am missing anything.\n Indentation only matters for top-level HTML elements. Once you are within an HTML tag, the indentation does not matter as long as you are not using the concise syntax.\n\nDo you mind messaging me on Gitter to help debug your issue? I am not able to reproduce. https://gitter.im/patrick-steele-idem\n  We need to use relative URLs so that docs will be correct on different branches. Thanks.\n  Hey @christensson, in Marko v3 we dropped support for `$<var_name>` (without the curly braces). Therefore, you don't need to escape the `$`, but does seem odd that having `\\$` in the attribute is causing a syntax error. I'm looking into it. Thanks for reporting the problem.\n Ok, I took a closer look. It's not actually a bug in Marko. The right-hand side of an attribute is parsed as  a JavaScript expression and the string definition must follow the rules for defining a JavaScript string.\n\nIf you run the following code in your JavaScript console you will see the same error:\n\n``` javascript\nJSON.parse('\"\\\\$foo\"');\n\n// Output in Chrome/V8: SyntaxError: Unexpected token $(\u2026)\n// Output in Firefox: SyntaxError: JSON.parse: bad escaped character at line 1 column 3 of the JSON data\n```\n\nWith that said, I think we can improve the error message and we definitely need to fix `marko-migrate`. I'll keep working on on this. Thanks again.\n By the way, if you want to fix your template you should update it to the following:\n\n``` xml\n<li data-bind=\"\\\\$foo\" for(color in data.colors)>\n```\n\n(with JavaScript, you need to escape the `\\` if you want it to show up in the output)\n\nI'm still working on updating `marko-migrate`, but I have improved the error message produced by the parser.\n I see. I will update `marko-migrate` to ensure the following:\n\nInput Marko v2 template:\n\n``` xml\n<div class=\"\\$foo\"></div>\n```\n\nOutput Marko v3 template:\n\n``` xml\n<div class=\"$foo\"/>\n```\n\nThanks for clarifying.\n Still investigating and adding more tests. It appears there might be some other issues that I need to resolve.\n Took a little more thought than expected, but the `marko-migrate` script has been updated to properly handle backslash characters in front of placeholders. If you would like to try the migration again, please install the latest version of `marko-migrate`:\n\n``` bash\nnpm install marko-migrate@^1.0.13 --global\n```\n\nPlease let me know if you still see issues. Thanks!\n  Thanks for reporting the problem. I'm looking into it.\n @lohfu I was not able to reproduce the problem using a fresh `npm install`. I tried to recreate your setup and the template is compiling as expected:\n\n``` javascript\nfunction create(__helpers) {\n  var str = __helpers.s,\n      empty = __helpers.e,\n      notEmpty = __helpers.ne,\n      escapeXml = __helpers.x,\n      loadTemplate = __helpers.l,\n      navigation_template = loadTemplate(require.resolve(\"./components/navigation/template.marko\"));\n\n  return function render(data, out) {\n    navigation_template.render({}, out);\n  };\n}\n\n(module.exports = require(\"marko\").c(__filename)).c(create);\n```\n Hey @lohfu, just wanted to check in and see if you were able to reproduce. Thanks. \n Thanks for creating the repo... I was able to reproduce the problem and am looking into it this morning. I'll update when I know more. Thanks again.\n Hey @lohfu, I realized later that I was trying to reproduce the problem using the `<include>` tag. Once I saw that you were using a custom tag mapped to a template it was easy to reproduce and easy to fix. Technically, everything was working as expected, but it would cause problems if a transform was looking at the file extension for the `require`/`require.resolve` path and not the fully resolved path. \n\nAnyway, the problem was fixed. New version published: `marko@3.1.5`\n\nPlease let me know if you see any other problems. Thanks!\n  Thanks for the improvements! New version published: `marko@2.10.0`\n  New version published with fix: `marko@3.0.7`\n\nPlease let me know if you still see issues.\n  Could you provide more details on the directory structure? It looks like `<customTag2>` is not being discovered relative to the location of the `customTag/template.marko`. Are `<customTag>` and `<customTag2>` registered in the same package? Where is your `marko.json` relative to `customTag/template.marko` and `customTag2/template.marko`? \n That does look pretty simple. The names of the custom tags are case-sensitive. If the directory name is \"CustomTag2\" then the custom tag will be `<CustomTag2/>`. Is that possibly the reason that `<customTag2>` is not being found?\n I'm not able to reproduce using the following sample app:\nhttps://github.com/patrick-steele-idem/marko-issue-259\n\nDo you see any differences between your app and the sample app I created?\n  Proposal:\n\n``` xml\n\n<!-- marko-concise attribute: -->\n<ul marko-concise>\n  li.foo - Red\n  li.foo - Green\n  li.foo - Blue\n</ul>\n\n<!-- <marko-concise> tag: -->\n<ul>\n  <marko-concise>\n    li.foo - Red\n    li.foo - Green\n    li.foo - Blue\n  </marko-concise>\n</ul>\n```\n\nIn both cases, output should be:\n\n``` html\n<ul>\n  <li class=\"foo\">Red</li>\n  <li class=\"foo\">Green</li>\n  <li class=\"foo\">Blue</li>\n</ul>\n```\n @philidem any update on this?\n The fix for this wasn't as straight-forward as I had first thought and I haven't had a chance to revisit it lately.\n  I agree with you both that this is needed. I will create a repo with a few links as a starting point and add more links as I find them and hopefully others can help make it better as well.\n\nI'm also going to push our product teams at eBay to work on some blog posts that share how we are using Marko and Marko Widgets at eBay. It will take a little longer, but I also want to gather some numbers on how many UI components our teams have created (there's a lot) so that people will better idea how heavily Marko is being used at eBay. Teams have also done some interesting things with Lasso.js as well to create webapps that have specialized content for various devices. I'll definitely keep this issue open and hopefully will have something to show very soon.\n\nThanks!\n That would be really awesome @regiellis. I feel like if we just can get a few people blogging, then that would help a ton with awareness. If you want, I would be happy to review any early drafts :) \n  ``` xml\n<!-- you're doing something like this: -->\n\n<macro myMacro(label)>\n    <h1>${label}</h1>\n    <div w-body/>\n</macro>\n\n<div w-bind if(data.rootTagName === 'div')>\n    <myMacro label=\"Hello World\"/>\n</div>\n<span w-bind if(data.rootTagName === 'span')>\n    <myMacro label=\"Hello World\"/>\n</span>\n<p w-bind else>\n    <myMacro label=\"Hello World\"/>\n</p>\n\n<!-- try this instead: -->\n\n<${data.rootTagName} w-bind>\n    <h1>${label}</h1>\n    <div w-body/>\n</>\n```\n I also investigated this issue and while I think we could make it work, it would complicate the code for an edge case. The workaround that @mlrawlings suggested above should work so I'm going to go ahead and close this issue.\n Hey @tbashor, there was a bug in Marko that prevented the Marko Widgets compile-time transformers from working on tags with a custom tag name. This has been fixed:  https://github.com/marko-js/marko/blob/master/CHANGELOG.md#374\n\nPlease let me know if you still see issues. Thanks!\n  @tbashor by any chance, do you have any intermediate `package.json` files? The taglib finder stops when it gets to the \"root\" of the package? The root of the package is determined by looking for a `package.json` file with a `\"name\"` property. I suspect that the search for taglibs is being ended prematurely due to the root directory not being as expected. FYI, here is the code that is used to discover taglibs for marko: https://github.com/marko-js/marko/blob/master/compiler/taglib-finder/index.js\n\nPlease let me know if that is the case. Thanks.\n @tbashor We did change the logic for discovering taglibs to address some problems. It's linked to from the [What's New in Marko v3](http://markojs.com/docs/marko/what-is-new-marko-v3/#marko-taglibjson-\u2192-markojson), but here is the relevant Github issue with details: https://github.com/marko-js/marko/issues/224\n\nFrom that description of what changed do you see any issue that would be impacting your project? If needed, we can always adjust things slightly, but from what I can tell your project should be fine as long as there are no additional `package.json` files that are causing the root directory to be different than one what is expected. Since your plugins have `package.json` files it seems like that might be the cause, but I don't fully understand your project structure.\n\nIf you are able to create a minimal project to reproduce the problem that would be helpful.\n @tbashor also, here are the relevant docs: http://markojs.com/docs/marko/custom-taglibs/#taglib-discovery\n Thanks for the update @tbashor. Let me know if you run into any other issues and glad to see that you have migrated to Marko v3. \n  /CC @philidem @mlrawlings \n\nI would like to see a method that returns a promise, but I would prefer to avoid a breaking change. The purpose of returning the `AsyncWriter` instance was to be compatible with the `EventEmitter` API (`on`, `once`, `emit`, etc.) that `AsyncWriter` implements. For example:\n\n``` javascript\ntemplate.render({ hello: \"world\" })\n    .on('foo', function(e) {\n\n    })\n    .on('error', function(e) {\n\n    })\n    .on('finish', function() {\n\n    })\n```\n\nWhat are your all thoughts on utilizing the native promise implementation to provide a new `renderAsync` method?:\n\n``` javascript\nvar template = require(\"template.marko\");\n\ntemplate.renderAsync({ hello: \"world\" })\n    .then(function (html) { ... })\n    .catch(function (err) { ... });\n```\n I'd rather modify `async-writer` to be a [thenable](https://promisesaplus.com/) by adding `.then` and `.catch`\n\nI've seen other libraries such as [`superagent`](http://visionmedia.github.io/superagent/) and [`mongoose`](http://mongoosejs.com/docs/promises.html) implement a promise-like interface that plays well with anything that is duck-typing rather than looking at `instanceof Promise` (which is most everything due to things like `bluebird` and `q`).  \n\nIt would support both\n\n``` js\ntemplate.render({ hello:\"world\" })\n    .then(function (html) { ... })\n    .catch(function (err) { ... });\n```\n\nand\n\n``` js\ntemplate.render({ hello:\"world\" })\n    .on('error', function(e) { ... })\n    .on('finish', function() { ... })\n```\n\nAnd with async/await you'd be able to do:\n\n``` js\nvar html = await template.render({ hello:\"world\" })\n```\n\nWe could also implement a `.promise` function (or some other name) that returns a true `Promise` for cases where it is needed.\n\n<details>\n<summary>\n\nExpand for possible implementation</summary>\n\n\n\n``` js\n{\n    then(fn, fnErr) {\n        var promise = new Promise((resolve, reject) => {\n            var buffer = ''\n            this.on('data', data => buffer += data)\n            this.on('error', error => reject(error))\n            this.on('finish', () => {\n                try {\n                    resolve(fn(buffer))\n                } catch(err) {\n                    reject(err)\n                }\n            })\n        })\n        if(fnErr) {\n            promise = promise.catch(fnErr)\n        }\n        return promise\n    }\n    promise() {\n        return this.then(x => x)\n    }\n    catch(fn) {\n        return this.promise().catch(fn)\n    }\n}\n```\n\n</details>\n I like the suggestion to implement the `then` and `catch` methods on the `AsyncWriter` instance. Let's go forward with that approach.\n FYI: it should be sufficient to add the `then()` and `catch()` methods to [OutMixins.js](https://github.com/marko-js/marko/blob/master/runtime/OutMixins.js) since those mixins are added to both `AsyncStream` and `AsyncVDOMBuilder`\n NOTE: We want to follow the rules for having a consistent rendering API: https://github.com/marko-js/marko/issues/389\n\nThat is:\n\n``` javascript\ntemplate.render({})\n    .then(function(out) {\n        out.appendTo(document.body);\n    });\n```\n  Thanks for the improvement! I'll publish in just a bit\n New version published: `marko@3.0.3`\n\nThanks again.\n  The user of the \"data grid\" component can pass a `renderer(input, out)` function associated with a UI component to the \"data grid\" component for use as a cell renderer:\n\n_In JavaScript_\n\n``` javascript\nvar cellRenderer = require('src/components/app-my-component').renderer;\n```\n\nUsage of the \"data grid\" custom tag within a template:\n\n``` xml\n<app-data-grid cell-renderer=\"data.cellRenderer\"/>\n```\n\nWithin the template for the \"data grid\" component, the cell renderer can be invoked similar to the following:\n\n``` xml\n<tr>\n  <td>\n    <invoke function=\"data.cellRenderer({ ... }, out})\"/>\n  </td>\n</tr>\n```\n\nLet me know if that doesn't answer your question.\n We'll be simplifying this as part of Marko v4: https://github.com/marko-js/marko/issues/139\n\nClosing this issue.\n  Do you have any specific use cases in mind?  Would something like a Marko DevTools chrome extension be better suited for accomplishing your goals?\n Would be nice to have a convention for enabling \"Marko Debug Mode\". For example, via an environment variable:\n\n```\nDEBUG=marko node server.js\n```\n\nIn debug mode, we could add extra information to templates. For example, What if we automatically added a `data-template-path` attribute to the root HTML element(s) of every compiled template?:\n\n``` html\n<div data-template-path=\"/my-project/components/foo/index.marko\">\n    <h1>Foo</h1>\n    <div>\n        <div data-template-path=\"/my-project/components/bar/index.marko\">\n            <h2>Bar</h2>\n        </div>\n    </div>\n</div>\n```\n\nThis information could be helpful to developers, but it could also be used to enable more advanced in-browser development tools.\n Comments might provide more info if say, `bar` includes `baz`:\n\n``` html\n<!-- Begin: /my-project/components/foo/index.marko -->\n<div>\n    <h1>Foo</h1>\n    <div>\n        <!-- Begin: /my-project/components/bar/index.marko -->\n            <!-- Begin: /my-project/components/baz/index.marko -->\n                <div>\n                    <h2>Baz</h2>\n                </div>\n            <!-- End: /my-project/components/baz/index.marko -->\n        <!-- End: /my-project/components/bar/index.marko -->\n    </div>\n</div>\n<!-- End: /my-project/components/foo/index.marko -->\n```\n   Thanks @davidenq! I probably won't have a chance to take a closer look until next week, but I'm thinking we should stick with the componentized directory structure with a `src/components/` directory and a `src/pages/` directory. Thoughts?\n Thanks for sharing @jsumners, I updated the Hapi docs to correctly set the content type header: https://github.com/marko-js/marko/commit/951c0dc906677725e3083061dbd2ae2575205d2c \n Added sample: https://github.com/marko-js-samples/marko-hapi  @felixsanz I think you should proceed with the solution that I recommended because `<marko-compiler-options>` is treated very special inside `Parser.js` and never gets added to the AST so I don't think @patrick-steele-idem's suggestion would help here. I would recommend setting some type of _flag_ to `true` to indicate that the next newline character should be discarded. The flag should be reset back to `false` after you processed the next block of character data (so that you don't inadvertently remove the wrong newline character).\n  @yomed do your component files also live in a directory that matches the same name?\n\nFor example, do you have something like:\n`my-widget/my-widget.marko`\n`my-widget/my-widget.less`\n`my-widget/my-widget.js`\n\nI'm wondering if we should add one more convention that will check for `*.marko` file that has a filename (ignoring the extension) that matches the component directory?\n\nAlternatively, maybe we can read this setting from the `marko.json` file (or `marko-taglib.json in v2)? Similar to how the directory that will be scanned to find components can be configured.\n\nI use to name my component files similar to your convention but then I decided to embrace the Marko convention since it does have some nice benefits.\n\nSpecifically, I like these benefits of the standard convention:\n- Easy to copy & paste a directory to \"clone\" an existing component (don't have to rename the individual files)\n- The convention does help keep Marko projects similar to each other and each component has similar files.\n\nThe downside is that you might need to type a little extra into your IDE's search box when searching for file.\n\nThat said, I don't think we ever wanted Marko Widgets to be _too_ opinionated so I think we could consider allowing an alternative convention.\n\nI would be interested to hear thoughts from others.\n You can create a `marko-tag.json` file with the following:\n\n``` json\n{\n  \"template\": \"./my-component.marko\"\n}\n```\n\nWith that said, I am curious as to why you think there is less typing when navigating in your IDE. For example, in Atom or Sublime if I want to open a template file for a UI component I start typing a portion of the component name followed by a few letters in \"template\" or \"marko\" and then it will quickly take me to the template belong to a specific component (thanks to fuzzy matching). For example:\n![screen shot 2016-02-28 at 8 05 29 pm](https://cloud.githubusercontent.com/assets/978214/13384825/d05606ca-de56-11e5-9e08-8958d7f2f1ae.png)\n\nThe only con that I am aware when not repeating the directory name is that Atom still doesn't differentiate the file correctly when there are multiple files with the same basename opened. I opened up an issue against Atom that is worth checking out: https://github.com/atom/atom/issues/7345#issuecomment-113577006\n\nAlso, there are good reasons to keep the main file named `index.js` so won't it look strange to have one file named `my-component.marko` and another named `index.js`? Also, repeating the directory name is not DRY and has all of the issues that @philidem mentioned.\n\nMaking the convention more flexible to allow a repeated directory name would introduce more file system checks so I would rather not go that route. We could, in theory, introduce a new setting that could be put in the `marko.json` file at the root of the project to change the convention or to allow a custom user resolver.\n\nWith that said, there are benefits to have more consistency within the community. For example, we would like to introduce more developer tools to scaffold out new UI components and we would only want to support one convention. How attached are you to repeating the directory name in each of the nested files? Like @philidem, I also started out with the repeated directory name in nested files, but I switched and I would never go back.\n  I would be in favor of using the official reserved words for ES5 and beyond. However, maybe we should add a warning to discourage their usage and maybe also add an option to disable the warning? We could rely on a environment property as quick hack (which would require smaller code change).\n\nFor example, something like `MARKO_DISABLE_RESERVED_WORD_WARNING=true ./build.sh` (disable the warning and launch the build).\n That would be a bug if reserved words are not being allowed as property names. The intention was to only not allow reserved words as variable names:\n\n``` javascript\n// Should not be allowed:\nvar short = 'foo';\n\n// The following should be fine though:\ndata.short = 'foo';\n```\n\nI'll add a test case to see if I can reproduce. If I am not able to reproduce I'll probably ask for more details.\n  I realize I am slow to reply to this, but it's a little hard to say with the issue is. From what I can tell, maybe both the `renderer.js` and `template.marko` are not being found? I think I might need to take a closer a look at your code when you get a chance.\n @yomed I'm closing this, re-open it if it still needs to be addressed\n  Thanks for PR, @scttdavs. I have backported the improvement to Marko v2 and published a new version: `marko@2.9.0`\n\nThanks again.\n  Here's one proposal:\n\n``` xml\n<import-tag \"component-a\" as componentA>\n<import-tag \"component-b\" as componentB>\n\n<invoke-tag(foo ? componentA : componentB) name=\"Frank\" count=30/>\n<invoke-tag(foo ? componentA : componentB, { name: 'Frank', count: 30 })/>\n```\n\nThe `<import-tag>` tag would import another tag _renderer function_ at compile time and the tag rendering function would be accessible using the provided variable.\n\nThe following would also work:\n\n``` xml\n<import-tag \"component-a\" as componentA>\n<import-tag \"component-b\" as componentB>\n\n<invoke (foo ? componentA : componentB)({ name: 'Frank', count: 30 }, out)/>\n```\n\nIn either case, the compiled code would be probably be similar to the following:\n\n``` javascript\nfunction create(__helpers) {\n  var str = __helpers.s,\n      empty = __helpers.e,\n      notEmpty = __helpers.ne,\n      escapeXml = __helpers.x,\n      __loadTag = __helpers.t,\n      componentA = __loadTag(require(\"../component-a/renderer\")),\n      componentB = __loadTag(require(\"../component-B/renderer\"));\n\n  return function render(data, out) {\n    (foo ? componentA : componentB)({\n      name: \"World\",\n      count: 30\n    }, out);\n  };\n}\n\n(module.exports = require(\"marko\").c(__filename)).c(create);\n```\n\nThoughts? Suggestions? Concerns?\n @yomed @tindli @philidem Thoughts?\n @mlrawlings I like your suggestion of using `<...>` to denote tag name and `{...}` to denote module. Hopefully it's not too clever but I'd use this feature!\n @scttdavs Resolving a custom tag is relatively \"expensive\" and requires reading from the file system and require calls really need to be analyzable via static code analysis so that things will work with a JavaScript module bundler. For the completely dynamic use case, it's best to use `<invoke>` and to just pass in the component renderer for each component.\n Closing this issue in favor of extending `<include>` to support rendering components/custom tags: [Issue #139: Allow dynamic custom tags to be used with `<include>`](https://github.com/marko-js/marko/issues/139)\n   Thanks @yomed. We are very close to a alpha release and I'm excited for others to start using the new Marko! Still a few more tasks left before the first alpha release: https://github.com/marko-js/marko/issues?q=is%3Aopen+is%3Aissue+milestone%3A3.0-alpha\n\nThere were a lot of commits across marko and [htmljs-parser](https://github.com/philidem/htmljs-parser), but we now have a much more extensive test suite (well over 500 individual tests and counting for marko, marko-widgets and htmljs-parser) so I feel free confident that things will work as expected.\n\nWe hope to have an alpha release early next week and the migration tool will come a little later. \n  This is the first time I have heard about this, but I have not had to a lot of development for mobile. Without actually trying to reproduce, it would appear that @yomed is right and that maybe Safari is not recognizing the elements as clickable and is not bothering to emit an `onclick` event. Here is the relevant section in the Safari developer docs:\nhttps://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html#//apple_ref/doc/uid/TP40006511-SW6\n\nIt appears that a workaround might be to attach a dummy `onclick` handler:\n\n``` html\n<span onclick=\"void(0)\">...</span>\n```\n\n@pcanella or @yomed can either of you verify the dummy `onclick` workaround?\n\nWe actually make the decision at compile-time on whether or not to use event delegation or direct event listeners based on the event type: https://github.com/marko-js/marko-widgets/blob/526a04f46bcdbd292a46572c34fdb1b4a305bc08/taglib/TransformHelper/handleWidgetEvents.js#L123-L137\n\nWe could special case the `click` event and add code to do a direct event listener in mobile Safari and rely on event delegation in all other browsers.\n\nIf more details can be provided then we can definitely look into some possible fixes. Thanks for reporting the problem.\n For the record, adding `onclick: pointer;` to the style of your element causes Safari to trigger a click event when you touch it on mobile.  Nice to see that you are digging into the code for the Marko v3 compiler :)\n\nI understand why you are expecting a different output, but the reason you are seeing the behavior that you are seeing is that at parse time we build all of the nodes in the AST based on the tag definitions and we associate the code generator when the node is initially created. Therefore, when the Marko parser encounters the `<div>` node it is creating an `HtmlElement` node and the `HtmlElement.prototype.generateHtmlCode` method is being used as the code generator for the node. Changing the tag name does _not_ change the code generator and I think it is best to keep that way. However, you can create a new replacement node in your transformer (instead of modifying the existing node):\n\n``` javascript\nmodule.exports = function transform(el, context) {\n    console.log('CALLED TRANSFORM')\n\n    if (el.getAttributeValue('transform')) {\n        var newTagName = 'new';\n        var newAttributes = {\n            foo: context.builder.literal('bar')\n        };\n\n        var newEl = context.createNodeForEl(newTagName, newAttributes);\n        el.replaceWith(newEl); // Remove the old HtmlElement out of the tree and replace it with the new one\n    }\n}\n```\n\nNOTE: I just added the `replaceWith(newNode)` method as a convenience method (see https://github.com/marko-js/marko/commit/2ce5493c9afaa1389f943946bc7e4d19ddf134b1) You will need to pull the latest code if you want to test the above code.\n\nHope that makes sense. Please let us know if you have any other questions/thoughts/concerns. Thanks!\n\nI'm going to go ahead and close this issue, but feel free to respond here.\n  Why are you bundling the Marko compiler? I feel like all that should be bundled are the compiled templates and the marko runtime.\n  Hey @stevus, it looks like you are using browserify to build a JavaScript bundle to be loaded on the server (not the browser). That's not the normal use case and it breaks \"dynamic\" requires. However, let me see if I can put in a workaround for you. \n Fixed. See: https://github.com/raptorjs/raptor-logging/issues/4\n\nNew version of `raptor-logging` published: `raptor-logging@1.0.8`\n\nPlease let me know if that works for you. Seems reasonable what you are trying to do, but you might run into edges like this again.\n  With a few tweaks to the current parser, we could simultaneously support a new concise, Jade-like syntax. A sampling of the proposed syntax is shown below:\n\n``` xml\n<!-- Basic JavaScript constructs -->\nvar colors=['red', 'green', 'blue']\n\n<!-- Placeholders, looping and conditionals -->\nul if(notEmpty(colors)) \n    li for(color in colors)\n        | <b>${color}</b>\ndiv else | No colors!\n\n<!-- Custom tags with wrapped attributes -->\ngreeting [name=\"Frank\"\n    message-count=10]\n\n<!-- Macros -->\nmacro navLink(href, title, isActive)\n    li class=(isActive ? 'active' : null)\n        <!-- HTML-JS parsing mode in the same document -->\n        <a href=\"href\">\n            ${title}\n        </a>\n\nul\n    navLink href=\"/\" title=\"Home\" isActive=true\n    navLink('/about', 'About', false)\n```\n From various interactions I have found that there are a lot of people who would consider using Marko, but much prefer the Jade syntax. On the flip side there are a lot of developers that dislike the Jade-style syntax because it is too far removed from real HTML.\n\nWith that in mind, Marko has a lot of benefits that are independent of the input syntax/dialect:\n- High performance and minimal runtime\n- Custom tags\n- Extensible at compile-time\n- Async rendering\n- CommonJS modules as compile output\n- Marko Widgets support\n- etc.\n\nThe input template is relatively small (but important) piece of Marko. I believe that if we can offer a Jade-like dialect for Marko then we will be able to attract additional developers to the project.\n\nIt's of course worth pointing out the negatives of supporting an alternate dialect:\n- Fragmentation within the Marko community\n- Development cost of supporting a two dialects (hopefully a minimal, one time cost)\n\nRegarding \"Fragmentation within the Marko community\", my thinking that is better to grow the community. In addition, I want to keep the two dialects very similar such that there is a direct and perfect translation between the two. In fact, we could easily provide tools for converted from one dialect to the other with no change in behavior or loss of information.\n\nRegarding \"Development cost of supporting a two dialects\", I do feel like development effort is not too burdensome and it will be a single parser that supports both dialects.\n\nWe are leaning towards using an alternate `.jarko` file extension for Marko with the Jade-like syntax. All of the Marko documentation would use the non-concise syntax and there would be one page of documentation that would explain the rules for the concise syntax for those who want to use it.\n\nI opened the issue to invite discussion so if you have any other thoughts please share.\n I was on the fence about this at first but there a lot of people that are passionate about Jade so there must be some merit for its success. One of the subtle but elegant things about the _jarko_ dialect that has been proposed is that you could drop in normal HTML or Marko and it would just work because the parser would know to switch to HTML/Marko mode when it sees an opening tag.\n\nIf Jarko was available, I would definitely give a try to see if it would grow on me. I might enjoy not having to type all of those `<` and `>` characters.\n\nAlso, does anyone feel like the _Jarko_ name is a bad idea? Could it lead to confusion? The alternative might be that we refer to it as _concise Marko_ but I am not sure if that is better.\n Initially I didn't think it was a good idea, but I feel like the concise syntax might grow on me as well. It would need proper editor support for good syntax highlighting. I suspect that if I were to use the concise syntax then I might have a hard time switching back to the non-concise syntax. I like that the concise syntax allows the normal HTML syntax to be mixed in. This allows regular HTML to be pasted in without having to take the time to reformat it.\n\nI'm very curious to se what the community thinks as well. I'm willing to put this out there as an experiment to see what others gravitate to.\n I am aware of the rename to \"pug\" but a lot of people are still going to remember it as Jade. The name \"mug\" was also proposed (which kind of fits in nicely with the coffee/java/javascript theme).\n\nWhat are your thoughts on \"mug\" as the dialect name?\n\nAs far as as the development effort to support another dialect, I think @patrick-steele-idem has done a lot of great work to make the effort minimal so I don't think that is a big concern (but maybe we'd learn differently after experimenting a little). The event-based parser would emit the same events for both dialects so might not be that bad.\n > There are only two hard things in Computer Science: cache invalidation and naming things.\n> \n> -- Phil Karlton\n As @tindli mentioned. We have no intentions to get rid of the HTML syntax. We are only trying to figure out if the HTML dialect can coexist with the concise syntax. We have the following options:\n1. Only allow concise syntax for a separate file extension (e.g. `.jarko`)\n2. Allow concise syntax and HTML syntax in same file (starting out in concise mode is probably the only good option)\n3. Don't bother with concise syntax at all\n\nSupporting mixed dialects in the same file (option 2) almost works perfectly exactly when a developer who prefers HTML wants to put plain text at the root (outside an HTML tag). The parser would need to start out in concise mode and that would cause the first word of the plain text to be \"incorrectly\" interpreted as a tag name (it needs to be prefixed)\n\nThere's also still some debates around the concise syntax. @tindli pointed out that `.` might be a better choice since you don't have to press the shift key (easier to type). I would much prefer to avoid the shift key.\n > I was under the impression that Marko was designed to adhere to the Rule of Least Power. By promoting Jade, it's no longer adhering to that rule.\n\n@danrichman For Marko v3 syntax and the concise Jade-like syntax would parse into exactly the same AST (the same internal representation). Therefore, there would be no difference in power. The Jade-like syntax is just HTML without `<` and `>` and indentation is used to control nesting and there is one extra prefix symbol to escape out of indentation mode...everything else is identical. Neither dialect brings any extra power to the table.\n > @patrick-steele-idem Isn't there more to Jade than that? Conditionals, extends, etc. Wouldn't Jade developers just end up demanding those more powerful features?\n\n@danrichman maybe starting this conversation with \"Jade\" was a bad idea. We are less interested in the features of Jade and more interested in the concise syntax that it offers.\n\n> Wouldn't Jade developers just end up demanding those more powerful features?\n\nMarko has all those features (and more) already, but in just a different form. For example, Marko doesn't have support for an `extends` keyword, but it does offer a `layout` taglib for doing the same thing in a cleaner and more extensible way (I would argue, at least). Marko has conditionals, looping, custom tags, etc.\n Good points @danrichman \n\nMaybe we should deviate more from Jade to make the distinction clear. We are not trying to be Jade (I think the rules for Jade are overly complicated and error-prone), but we are trying to potentially appeal to people who like a minimal syntax and that don't like typing a lot of redundant symbols.\n\nI'm going to give the concise syntax some more thought over the weekend and will share more later.\n\nThank you, all, for your feedback!\n @danrichman thanks for pointing us to the Angular discussion. I imagine it might be more confusing using two distinct templating engines (not just different dialects) to build a page as is the case when doing server-side rendering of page built for Angular. I was never a fan of Angular because of the inability to pre-compile templates and I think they kind of created that problem themselves and I don't think they have a good solution. I don't think Marko has that issue since the client and server templating language will be same (regardless of whether it's the concise or non-concise dialect).\n\nThanks @scttdavs! Good to hear from the Jade camp :) I've always had an easier time reading HTML with all of the extra braces but I am sure that is more due to what I am use to. I think I have always rationalized typing a few extra characters for the sake of readability. It might be time to retrain my brain so that I can get faster readability and less typing.\n\nI'm still in favor of offering a new concise syntax as an experiment and give people the challenge to try it for a little while to see if we can change some opinions. I'm curious how my own productivity would be impacted...\n Thanks for sharing your thoughts @scttdavs \n\n> But then again, I've used haml and jade for years, so the HTML like syntax seems like a step backward to me.\n\nI have heard a lot of similar comments from people who like Jade. From what I have gathered, those who have used Jade or HAML (and stuck with it) would have a really hard time going back to HTML. \n\nFor my own benefit, I took the time to find some real world Marko templates from the eBay code base and converted them by hand over to the concise syntax. I picked samples that were on the large/complex side and am finding that the HTML-based templates just look more complex than they really are and it takes me longer to make sense of the code. I'm starting to feel that the concise syntax is something that can grow on you, but that most people (me included) initially dislike it. I'm going to continue to experiment with the concise syntax. Thanks again for sharing your thoughts.\n Hey @danrichman, I definitely understand where you are coming from and share your concern about documentation.\n\nAs a point of comparison, Markdown is kind of a similar story. Markdown is a concise version of HTML, but it lets you drop into HTML mode at anytime. Therefore, with Markdown you can use the concise Markdown syntax to produce HTML documents or you can use regular old HTML. With that approach you kind of get the best of both worlds and everyone is happy. The HTML within Markdown files is in no way limited by the support for a concise Markdown syntax. It's worth noting that you can't switch to concise Markdown mode within an HTML tag.\n\nWhat if Marko supported something similar and allowed both concise HTML and regular HTML within the same Marko file? This could not be done with a plugin and, instead, it would require a more flexible template parser. Sure, you could use two separate parsers (or two separate plugins), but that would be a lot of duplicate code when one happens to be a superset of the other (assuming blended mode).\n\nIf we want to ever support the blended mode within the same `.marko`  file by _default_ then it would need to happen before the next major release. The benefit of supporting the blended mode by default is that we would have a consistent file extension (i.e. `.marko`) that \"works for everyone\". We have until the v3 release to decide.\n\nIf we are good with not supporting a blended mode, then we could release support for a blended mode using a different file extension at any point in the future (or never).\n Hey @danrichman. That would be awful if periods were required for regular HTML, but fortunately that option is not on the table :) With mixed mode support, the following document would be a completely valid Marko template and parse hopefully as you would expect:\n\n``` xml\n<div class=\"something\">\n  <!-- Everything inside this tag will be parsed as HTML -->\n  <h2>Heading 2</h2>\n  Some <b>bold</b> text. Some <em>emphasis</em>.\n  <div class=\"something-else\">\n    Good thing there are no\n    more periods.\n  </div>\n</div>\n<!-- You can also use the concise, indentation-based dialect in the same document!: -->\ndiv class=\"something\"\n    h2 - Heading 2\n    - Some <b>bold</b> text. Some <em>emphasis</em>.\n    div.something-else\n        ---\n        Good thing there are no\n        more periods.\n        ---\n```\n\nNOTE: The sample template above uses the latest syntax that I am experimenting with. It has a lot of advantages over Jade and should feel very natural.\n\nDoes that look good to? Best of both worlds?\n @danrichman There will never be periods. I think the following sample template would be what you are looking for and it would also be completely valid:\n\n``` xml\n#another-div\n    <div class=\"something\">\n        <!-- Everything inside this tag will be parsed as HTML -->\n        <h2>Heading 2</h2>\n        Some <b>bold</b> text. Some <em>emphasis</em>.\n        <div class=\"something-else\">\n            Good thing there are no\n            more periods.\n        </div>\n    </div>\n    span.foo - Hello ${data.name}!\n```\n\nThe above Marko template would render the following HTML:\n\n``` html\n<div id=\"another-div\">\n    <div class=\"something\">\n        <!-- Everything inside this tag will be parsed as HTML -->\n        <h2>Heading 2</h2>\n        Some <b>bold</b> text. Some <em>emphasis</em>.\n        <div class=\"something-else\">\n            Good thing there are no\n            more periods.\n        </div>\n    </div>\n    <span class=\"foo\">\n        Hello ${data.name}!\n    </span>\n</div>\n```\n\nThe problem with Jade is that you can't simply paste in valid HTML code into a Jade document and expect things to work. We can definitely do better than Jade. If we get this right then I see no reason why anyone would want to use Jade.\n Marko v3 now supports mixed mode parsing to allow the concise syntax and the HTML syntax within the same document. When the alpha release is published (hopefully soon) we will continue to gather feedback.\n\nAll docs will continue to use the HTML syntax since that is more approachable to new users.\n  Hey @grawlinson, it looks like you are expecting well-formed XML as output (not HTML). is that correct? The `<meta>` tag happens to be defined by the HTML grammar as a self-closing/open-only tag. Marko defaults to HTML mode. If you want well-formed XML as output, then you should use the `.marko.xml` file extension which may not be documented :/ Please let me know if that works for you.\n Hey @grawlinson, you need to install the Node.js require extension for `.marko.xml` by doing the following:\n\n``` javascript\nrequire('marko/node-require').install({ extension: '.marko.xml' });\n```\n\nWithout that line, Node.js is trying to load your `.marko.xml` file as a JavaScript module. Please let me know if that solves your problem or if you are still facing issues.\n  It definitely needs some improvement.  It needs to be more of a tutorial rather than a list of features that a beginner might find useful.\n\nI like the idea of filename labels.  I think we could create a nice widget (using Marko of course) that could take a directory path and create the widget from that.  Maybe it could be generated from a gist so that users on reading on github would still be able to view code snippets.  Maybe that's not worth it and they should just read it on markojs.com.\n  Several people have asked about the security implications of allowing end-users to edit Marko templates. I too have wished for this ability but have held off allowing it because it is currently unsafe. We should assess the options for loading and running templates within a sandbox. Examples of unsafe template code includes scriptlets (e.g. `{% process.exit(1) %}`) and JavaScript expressions (e.g. `<div if=\"process.exit(1)\">`). Also, the CommonJS/Node.js `require` function is currently exposed to the template which would allow the template to access the module cache (this is dangerous).\n\nTwo ideas have been proposed to support this:\n1. Use the Node.js built-in `vm` module to load and run Marko templates within a sandbox\n2. Staticly analyze the Marko template source code to find unsafe code and prevent compilation or provide whitelist of tags and features that can be used in sandbox mode\n\nPersonally, I think option `2` (static analysis) would be too error-prone but it is worth exploring.\n Hey @AminaG what option are you leaning towards (sandbox or static code analysis)?\n One thing not mentioned by @philidem is that the `out` could leak potentially sensitive objects if you are not careful. For example, if you render to the HTTP response stream in an Express app then you could do the following:\n\n``` javascript\nvar res = out.stream;\nvar app = res.app;\n// User now has a reference to the Express app instance\n```\n\nThis can be avoided if you don't render directly to the HTTP response. For example:\n\n``` javascript\ntemplate.stream(templateData).pipe(res);\n```\n\nYou also have to be careful with data stored in `out.global` (see: http://markojs.com/docs/marko/language-guide/#global-properties).\n\nJust wanted to make note of these subtle but important details for future reference.\n I think vm2 spawns a new process which is a good option for most security.\nWhat if we used web worker? They might have sufficient isolation as well.\n\nOn Mon, Dec 28, 2015, 12:29 PM AminaG notifications@github.com wrote:\n\n> I prefer sandbox via vm or vm2 (https://github.com/patriksimek/vm2).\n> Regular VM, of node can make the entire process not responding while\n> (true) {}.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/192#issuecomment-167607882.\n I'm also leaning towards the sandbox (at least for now). Fortunately, the runtime for marko is tiny. All template loading happens in the following two functions: https://github.com/marko-js/marko/blob/de673d362e993263a926bf40d34f018aa6320ccf/runtime/loader.js#L33-L69\n\nOnce you have the source, you will need to load the source in a separate sandbox and you will need to provide your own pseudo globals: `require`, `module`, `__dirname`, `__filename`\n\nThe sandbox will not have the Node.js module loading system but you will need to shim in a fake module loading system for marko to work.\n I'm not convinced vm2 is completely needed, but out-of-process rendering of templates is possible (rendering will have to be async). \n Marko doesn't depend on any globals.\n\nYou would just need to load the marko runtime in the separate process. However, it is challenging to load the marko runtime without the Node.js module loading system. For that reason, I think it is better to use an in-process sandbox and have the runtime be loaded outside the sandbox, but to have the template be loaded within the sandbox. If you want to try and load marko without a module loading system in a separate process then that will definitely be the safest, but it, again, it will be more challenging without the Node.js module loading system.\n I think the JavaScript API should provide a sandbox option and if true then\nbehavior can be different due to the additional constraints. I don't think\nwe have to worry about globals not working on sandbox. Also the global data\ncould be stranded and sent to other process.\n\nOn Mon, Dec 28, 2015, 12:36 PM AminaG notifications@github.com wrote:\n\n> Out-of-process will make all global not works. It is break-change. Can we\n> do that kind of break change to Marko?\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/192#issuecomment-167608790.\n Yes, that is a good suggestion @AminaG :\n\n``` javascript\nvar template = require('marko').load(src,{secure:true})\ntemplate.render(templateData, stream)\n```\n @AminaG this definitely can't be a breaking change. The \"sandbox\" functionality should be an opt-in only and that option should only be recognized on the server.\n Looking more closely at vm2 I see that there is support for a Node.js module loading system. That makes vm2 more applealing.\n @AminaG There are timeouts, but they are only for async timeouts (not CPU bound loops).\n My recommendation is to go forward with [vm2](https://github.com/patriksimek/vm2), but to allow the sandbox to be more pluggable and flexible. It is better if `marko` does not have a direct dependency on `vm2`. Something more like the following:\n\n``` javascript\nvar NodeVM = require('vm2').NodeVM;\n\nvar options = {\n    console: 'inherit',\n    sandbox: {},\n    require: true,\n    requireExternal: true,\n    ...\n    requireRoot : \"./\"\n};\n\n\nvar sandbox = new NodeVM(options);\n\nvar template = require('marko').load(templatePath, {\n  sandbox: sandbox\n});\n\ntemplate.render(templateData, ...);\n```\n\nTimeout only makes sense for the render method, but that is not supported for vm2. You would have to use an out-of-process solution for that.\n Just realized that vm2 doesn't allow you to whitelist external modules (only native modules)... Really??\n From the docs:\n\n> IMPORTANT: Timeout is only effective on code you run trough run. Timeout is NOT effective on any method returned by VM.\n> IMPORTANT: Timeout is not effective for NodeVM so it is not immune to while (true) {} or similar evil.\n\nTherefore, timeout would not be effective for the `template.render()` method.\n > Maybe it is possible to add modules to VM2 context using the sandbox option, instead of requiring it:\n\nThat's possible, but it would mean that the templates would need to be compiled differently if they are loaded sandbox mode. It's worth exploring.\n My guess is that everything in the vm2 sandbox has to be serializable since\nit gets sent to other process but maybe I'm wrong.\n\nOn Mon, Dec 28, 2015, 12:57 PM AminaG notifications@github.com wrote:\n\n> Maybe it is possible to add modules to VM2 context using the sandbox\n> option, instead of requiring it:\n> \n> sandbox={marko: require('...'), `marko-async`:require('marko-async')}\n> \n> What do you think/\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/192#issuecomment-167614396.\n Hey @philidem, I think you misread. The vm2 sandbox is in the same process.\n > vm.call('setTimeout(function(){process.exit()},60000)')\n\nI don't see how that helps. Also, `process.exit` won't be available in the sandbox :)\n vm2 is not a lot of code. May be worth forking and improving to add support for whitelisted external modules. Basically, for any required module file, search up the directory tree to find the parent package name and check if that particular package has been whitelisted.\n\nOnly problem (for me at least) is that vm2 is written using CoffeeScript... \n Actually, after giving it some more thought, vm2 is probably good as-is. As long as the native Node.js modules (`fs`, `process`, etc.) are blocked then I suppose there really is no security risk. I can see the reasoning for only supporting whitelisting of native Node.js modules.\n Actually, I take that back, a non-native module might have a native binary built from C++ that could be an attack vector. I suspect that those those non-native binaries would still be allowed to be loaded when using vm2, but I could be wrong.\n If you go with the out-of-process solution, then, yes, the template data needs to be serializable to JSON. vm2 is in-process so I don't think passing in helper functions or using data from closures is a problem.\n I recommend trying out vm2 further. If we run into limitations, we can always improve vm2, but I still think vm2 is in the best direction.\n @AminaG \n\n> So, there is any solution how to to stop vm2, in case of infinite loop\n\nYes, you need to invoke the `template.render()` method using the `vm.runInThisContext(code, { timeout: 999 })` method or `script.runInContext(contextifiedSandbox, { timeout: 999 })`. Using the latter is recommended since it can be used to execute a precompiled script (i.e., faster). See: https://nodejs.org/api/vm.html#vm_new_vm_script_code_options\n\nUPDATE: It looks like vm2 may not expose the underlying `vm` interface, so that might require a fork.\n  Currently, compiled templates are written next to the original file. It might be nice to offer the ability to place compiled templates in an alternate root directory. For example:\n- `my-app/.marko-compiled/src/components/foo/template.marko.js`\n- `my-app/node_modules/some-installed-package/.marko-compiled/src/components/bar/template.marko.js`\n @adammcarth I don't think putting compiled templates directly under the `node_modules` is the best choice since it I think it is an abuse of that folder and would not be expected by end users. I think putting compiled templates under a `.marko-compiled` directory at the root directory of the package associated with the template is the right thing to do. Yes, you would have to make sure that directory is included in `.gitignore` but I think that is okay.\n\nNOTE: I adjusted the original text because there was a typo.\n\nAs a side note, one of the potential benefits of compiling a template and keeping it right next to the original file is that as a package prepublish step you can pre-compile all Marko templates, delete the original Marko template files (temporarily) and all of the requires would work and return the precompiled template. That is, if you you have a `require('./template.marko')` call in your code, Node.js will first look for `template.marko` and not find it and then it will look for `template.marko.js` and find that. That way, you can use the Node.js require extension for Marko during development, but when you publish your package you would only publish the pre-compiled templates (not the original Marko source files) and it would not be required for a user of the package to install Marko's Node.js require extension.\n\nThoughts?\n The current thinking is that we can make this an option by introducing a new configuration option in `marko.json` similar to the following:\n\n``` json\n{\n  \"compiled-output-dir\": \"./.marko-compiled\",\n   ...\n}\n```\n\nAfter updating the compiler for Marko v3 and working on this task it became clear that we won't actually be able to directly load the template from the alternate directory. We would merely be writing it disk at the alternate location for reference purposes (and possibly to avoid recompiling in production). The stack trace would still need to match up where the original `.marko` file is on disk in order for any `require()` calls to work as expected.\n\nIt's also a little unclear if this setting would be applied globally. Currently, we only search up to the root of the package to find a `package.json` file so installed packages would currently not share the option if it comes from a `marko.json` in the root package. We might need to consider other options if we want the configuration option to also apply to all installed packages.\n This is not on our roadmap, but we're not opposed to it if someone from the community would like to tackle it.  If you want to take a stab, let us know and we'll help if necessary.\n\nAs far as directory naming, I think a sensible directory would be `.cache/marko` since Lasso and other modules already use `.cache/` to store cached files so this way we're not cluttering the top level directory.\n  Hey @tropperstyle, thanks for the PR. I'll fix the jshint error that your code introduced and publish a new version. Thanks for the improvement.\n Hey @tropperstyle. I updated the code so that it still only did one pass through the directories: https://github.com/marko-js/marko/commit/a55f3bb82b2cc232903373afd6af3a654fea5299\n\nNew version published: marko@2.8.0\n\nPlease let me know if you find any issues with the new code. Thanks!\n  Hey @patbegg, thanks for reporting the problem. I'll take a look into it. What version of npm are you using? \n\n_EDIT: Didn't notice the npm version in the issue title. Please disregard :)_\n Hey @patbegg, are you sure `marko-layout` is not being installed? I wasn't able to reproduce the problem with the latest npm version (v3.5.1). The latest version of `npm` flattens all of the installed `node_modules`. If that is the case then you should find `marko-layout` as a child of your top-level `node_modules` directory and that is perfectly fine. \n\nIf you were using an older version of `npm` and then later switched to a new version of `npm` then I suggest forcing a recompile of all your templates since the directory structure may have changed and the compiler might need to recalculate relative paths that get generated. You can force a recompile using either of the following approaches:\n\nOption 1) Force a recompile of templates by setting the `MARKO_CLEAN` environment variable to `true` (recommended):\n\n```\nMARKO_CLEAN=true node index.js\n```\n\nOption 2) Use the `markoc` command line utility to delete the generated `*.marko.js` files:\n\n```\nmarkoc . --clean\n```\n\nPlease let me know if that solves your problem. Thanks.\n Hey @patbegg, glad that solved your problem.\n\nIf you know the directory structure is exactly the same on both machines then it is okay to copy over the compiled templates. If there is any chance that the directory structure will be different then I would just not copy the compiled templates and, instead, have them be lazily compiled on the target machine as you did.\n\nHow about we open another issue to track the docs improvement? I'm going to go ahead and close this issue for now. \n  Hey @ashishcpatel2, thanks for reporting the issue. I'm not going to have a chance this weekend to take a look, but I'll take a closer tomorrow. I'll update you as soon as I know more. Thanks again.\n Hey @ashishcpatel2, just wanted to provide an update that I was able to reproduce the problem and I have added a test case. It looks like things almost worked, but there is a bug in the taglib loader that is preventing the deeply nested tags from being properly registered. I am still investigating to see what is required to be changed to support deeply nested tags.\n Hey @ashishcpatel2, I pushed a fix to allow nested tags to be arbitrarily deep.\n\nNew version of marko published: `marko@2.7.31`\n\nThanks for your patience. Please let us know if you run into any other issues. Thanks for your help. \n  I like the idea of using **01. Configuration File**. As a slight variation, I would recommand `.marko` (not `.markoc`) because I don't it's necessary to distinguish between Marko runtime and compile-time options.\n\nI know that @patrick-steele-idem is hard at work on Marko v3 so maybe we could target this feature for that version?\n And, regarding having a separate `marko-taglib.json`, I'm actually liking your idea of converging on a single file. This would also make the compiler a little simpler since it wouldn't have to look for two files when looking for configuration.\n\nThe only downside with using something like `.marko` is that files that start with \".\" are ignored by default in Unix-like operating systems. Maybe `marko.config`, `marko.config.json` or `marko.json` instead?\n Thank you for sharing your detailed thoughts, @adammcarth and @philidem! \n\n:+1: on `marko.json`. After giving it some more thought I'm also in favor of using `marko.json` to both register custom tags and provide compiler configuration.\n\nI'm also in favor of requiring that this file be placed in the root directory of the package. Currently we allow `marko-taglib.json` to be placed in any directory and the compiler just searches up from the template file. This works, but it introduces the overhead of searching the file system and it also results in marko searching outside the main project's directory which is not good.\n\nI also agree that we should wait until the next major version of `marko` to make this change since it is a breaking change, and we have wanted to revisit taglib loading anyway. I'll add this to the roadmap (which still needs to be written up and formally shared).\n\nIf you have any other thoughts or suggestions please share. Thanks again!\n Supporting `require('marko').configure({})` is not bad, but the problem is that if the command line compiler is used to compile a template then it won't be configured the same way. Ideally, configuration would all be loaded declaratively from files. The only problem is if configuration needs to be environment specific.\n\n> I don't like the idea of messing with Node's require function, so I don't use marko/node-require. I use marko.load() for loading templates.\n\nLonger term, I would like to see an npm `prepublish` step that modifies all code as such:\n\n_Before:_\n\n``` javascript\nvar template = require('./template.marko');\n```\n\n_After:_\n\n``` javascript\nvar template = require('./template.marko.js');\n```\n\nWith that approach, you still get the convenience of requiring a template, but you don't have to worry about installing the require extension for production usage and third party packages wouldn't depend on the Node.js require extension for Marko. The Node.js require extension for Marko is only there for convenience because it allows for less code to load a template:\n\n``` javascript\nvar template = require('./template.marko');\nvar template = require('marko').load(require.resolve('./template.marko.js'));\n```\n\nIn this case, I think it is better to be pragmatic instead of worrying about violating some Node.js tenet. The fact is, Marko is really just a transpiler that takes your Marko template file and converts it into a CommonJS module that Node.js can load and that is compatible with any JavaScript module bundler. The Node.js require extension for marko is just doing the transpiling on first require. Babel provides a Node.js require extension for ES6 transpiling.\n Global configuration is now supported by:\n\n``` js\nrequire('marko/compiler').configure({ writeToDisk: false, preserveWhitespace:true });\n```\n  Hey @adammcarth, thanks for the question. That is something we have thought about, but we decided _not_ to build an Express view engine for various reasons:\n\nThe Express view rendering engine only supports callback-style view rendering that is not compatible with streaming. As a result, the Express view rendering engine has worse performance and less flexibility. On top of that, the Express view rendering engine includes its own view resolving code (instead of just using the Node.js module resolving code) and it requires global/app-level configuration to make everything work. Finally, the Express view rendering engine introduces a new way to render a template that only works on the server and only with Express. The Express view rendering engine, while simple, is far more complicated than just rendering a template directly to an HTTP response stream. The only drawback to not using the Express view rendering engine is that if your templates or view rendering code needs information associated with the incoming request then you must manually add that data to the template data (possibly using [$global](http://markojs.com/docs/marko/language-guide/#global-properties)). I guess another possible \"drawback\" is that you need to require in the template in the view controller code, but I see that as a good thing since it promotes modularity.\n\nI wrote a blog post on this topic that you should check out as well: [Bypassing Express View Rendering for Speed and Modularity](https://strongloop.com/strongblog/bypassing-express-view-rendering-for-speed-and-modularity/)\n\nHope that answers your question! Let us know if you have any other questions. Thanks again.\n Hey @adammcarth, glad you found that article helpful. Pretty much every product team at eBay building webapps on the Node.js stack have adopted the modular directory structure and the feedback has been very positive. I also see a similar trend with other frameworks and libraries.\n\nFor a blog post, I think that directory structure looks good. A page typically has a top-level route associated with and it will typically have a unique page controller and page template. For the [markojs.com blog](http://markojs.com/blog/), there are a set of pages associated with the blog that you can take a look at: https://github.com/marko-js/markojs.com/tree/master/src/pages/blog\n\nThose pages each have a corresponding route. I prefer to put all of the routes in a single place so that anyone looking at the application source code can quickly figure out which routes map to which pages.\n\nThe layout taglib is used to separate out page layout from page content in cases where you have multiple pages that share a common layout. For example: https://github.com/marko-js/markojs.com/tree/master/src/layouts/default\n\nI hope that helps.\n  Hey @leonli, sorry for the delayed response, but better late than never...\n\nWhat I found works well is to also require non-JavaScript module dependencies in your component's `index.js` file as shown in the following code:\nhttps://github.com/marko-js-samples/ui-components-playground/blob/63cf6d30928d28060d293bbae1c171f598adc506/src/components/app-button/index.js#L1\n\nAlso, if you put a `browser.json` next to an included JavaScript module then it will automatically be processed and all of the referenced client-side dependencies will be included.\n\nThat way, if the UI component is sent to the browser then the required CSS will also be included. Also, all of the required client-side dependencies for nested UI component's will be included automatically when you bundle up the root UI component.\n\nDoes that answer your question or do you have another more specific suggestion on how to improve how CSS dependencies are included.\n Hey @leonli, I'm just going through issues to do some housecleaning. I'm going to go ahead and close this issue, but if this is still an issue/question please feel free to add more comments. Thanks.\n  Good catch. Marko is isomorphic and works on the server (Node.js) and in any browser. You will need a JavaScript module bundler (browserify, [Lasso.js](https://travis-ci.org/lasso-js/lasso), etc.) to transport the compiled templates to the browser and everything will work exactly as it does on the server. I'll update the README and website to make this clear. Thanks for letting us know.\n Website updated. Please let us know if you see any other issues with the website or docs. Thanks again.\n Great. Thanks for the feedback, @wheresrhys!\n  Hey @redben, that is the expected behavior. Anything inside `${ ... }` is just JavaScript and it will be evaluated just like any other JavaScript code (if you take a look at the compiled code this should be clear).\n\nBecause Marko templates compile down to CommonJS modules you can import the `lodash/object/get` function to provide safe access to nested properties as shown below:\n\n``` xml\n<require module=\"lodash/object/get\" var=\"get\"/>\n<p>Author ${get(data, 'author.name')}</p>\n```\n\nYou'll need to install `lodash` into your project for the above code to work:\n\n``` bash\nnpm install lodash --save\n```\n\nIf you don't want to use a third-party module, you can also do the following:\n\n``` html\n<p>Author ${data.author and data.author.name}</p>\n```\n\nNOTE: `and` is a special operator that gets converted to `&&`. See: http://markojs.com/docs/marko/language-guide/#expressions\n\nDoes that work for you? Hope that clarifies. Let us know.\n Hey @redben, it's true that many templating engines interpret expressions and handle safely reading nested properties. However, doing that by default results in worse runtime performance and it limits the power of the templating language since expressions cannot be arbitrary JavaScript code. Marko has always tried to be be as close to pure JavaScript wherever possible. This keeps the runtime tiny, improves performance and it allows templates to be more powerful.\n\nIn theory, we could offer the `get` as a builtin helper to avoid having to import it. Something worth considering (especially if it is only imported if it is used in the template). Thoughts?\n Hey @redben, what's nice about marko is that it only requires in things that are required. That way when you use a JavaScript module bundler to send a compiled template to the browser there is no extra baggage. As long as we made it so that the `get` function was only `require`'d if used then I see no harm as offering that as a feature. The hard part is figuring out if `get` is required because currently aren't fully parsing the JavaScript expressions used in a template (using something like esprima or acorn), but that is something we are considering for the next release of marko. Probably low priority though since there is a fairly clean workaround. Thanks for your feedback.\n  Hey @designeng, thanks for the PR, but I think we need to keep the test case as-is. While `require('marko').stream(templatePath)` is not the recommended API, it is still supported and we should keep that test case around to make sure it continues to work. There is another test case that tests `marko.load..stream': https://github.com/marko-js/marko/blob/56d23b07bdc4ca2a20ebce868a3982277c97c618/test/api-tests.js#L170-L191\n\nLook good to you?\n Thanks, @designeng! I appreciate the feedback. \n  Hi @Globik, let's start with your first question:\n\n> I opened the file next morning I'v seen that marko engin rewrite the file of his own way with helper's javascript functions, but my Hallo ${data.name}! is gone, simple disapeared.\n\nWhen a Marko compiles a template such as `template.marko` it will generate a new file next to the original file named `template.marko.js`. The original source file is definitely not deleted. If it is gone it is because you accidentally deleted it but most likely you are just not noticing it. The generated JavaScript file is what gets loaded by Node.js (or sent to the browser).\n\n---\n\nAnd for your second question:\n\n> The server must be restart to keep changes in the template file every time. So bad and slowly for a site developing. Is it true?\n\nDepends on how you are watching files. Make sure you add `*.marko.js` to your ignore patterns (e.g. `.gitignore`). Since the `*.marko.js` files are generated at runtime you will want to make sure those files are ignored.\n\n---\n\nAnd for your final question:\n\n> Only opening tags are modified for conditionals and looping???\n\nWhen you make an element conditional using the `if` attribute or if you make it repeated using the `for` attribute then both the starting and ending tag will be wrapped. Hopefully it is clear from the `Try Online` example: http://markojs.com/try-online/#Simple_Hello_World\n\n---\n\nLet us know if you have any other questions.\n Hey @Globik, I'm just going through issues to do some housecleaning. I'm going to go ahead and close this issue, but if this is still an issue/question please feel free to add more comments. Thanks.\n  I believe this issue has been resolved with improvements to the [deresolve](https://github.com/raptorjs/raptor-modules/blob/04fc6554b800277e1c62b4e1d66586bfb45acf90/resolver/lib/deresolve.js) function. If I am mistaken, please reopen the issue. Thanks.\n  Seems reasonable! Double-checked the travis documentation and this looks like a safe way to force container infrastructure to be used.\n Thanks for the fix, @zephraph.\n\nI don't think your change was the cause, but for some reason the Travis CI build is failing now :disappointed: I'll retry in a bit, but if you find a solution please share.\n I think the failed build was my fault because I closed the pull request and\nthen reopened it. The build error message seems to imply that this was the\nreason for failure. Subsequent builds have succeeded.\n\nOn Fri, Oct 16, 2015 at 8:51 AM, Zephraph notifications@github.com wrote:\n\n> @patrick-steele-idem https://github.com/patrick-steele-idem which\n> build? The only thing that I saw that has failed recently was a rebuild\n> that triggered on my PR after it was merged (which failed because the git\n> ref that PRs point to are deleted after merge).\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/pull/157#issuecomment-148708406.\n  You'll need to make sure tag.name is not overridden due to this line:\nhttps://github.com/marko-js/marko/blob/master/compiler/taglibs/taglib-loader/scanTagsDir.js#L140\n Hey @zephraph, are you still interested in this PR? My opinion is that I don't think it is a good idea for the tag name to be defined in the renderer or in the `marko-tag.json`. I think it is better for the tag name to be defined in the `marko-taglib.json` file or have it be set based on the directory name (when using the directory scanning feature). What do you think?\n I'm also a fan of minimizing how much code gets put into configuration files such as `marko-tag.json` and `marko-taglib.json` so I think it is better to have the convention of using a directory scanner to discover custom tags and for the custom tag name to automatically match the name of the parent directory. I think it would be a mistake to allow the developer to choose a tag name that doesn't match the parent directory name since it would make things confusing.\n\nAlso, currently, if you _aren't_ using a directory scanner then you must use a _map_ to define custom tags and that requires that the tag name always be declared in the `marko-taglib.json`:\n\n``` json\n{\n  \"<my-custom-tag>\": \"./path/to/my-custom-tag/marko-tag.json\",\n  \"<another-custom-tag>\": { \"@foo\": \"string\", ... }\n}\n```\n\nIt wouldn't make sense to allow the developer to redefine the tag name in the `marko-tag.json` or in the `renderer.js` file since it was already declared in the parent taglib.\n\nI propose that we not merge this PR if you are cool with that :) Let me know.\n  Is that code being included inside an inline `<script>` block that inside a Marko template?\n Hi @baburammy, I am having a hard time understanding the issue and how it relates to Marko Widgets based on the details provided. It looks to me that the issue is completely unrelated to Marko and Marko Widgets, but I could be missing something.\n\nWith that said, I would not be using jQuery to execute the inline JS. It is better to send down the inline JS without the surrounding `<script>` tag. Instead, just send down the raw JS code and use `eval(response.inlineJs)` to run the inline code.\n\nIf you have a sample project or more code that you can share that would make it easier for me to provide help.\n Hey @baburammy, I'm just going through issues to do some housecleaning. I'm going to go ahead and close this issue, but if this is still an issue/question please feel free to add more comments. Thanks.\n  That's true @viviangledhill.\n\nHowever, if you want the image to go through the Lasso.js asset pipeline then you should use the `<lasso-img>` tag:\n\n``` xml\n<lasso-img src=\"./foo.jpg\"/>\n```\n\nThis might produce the following HTML output depending on how Lasso.js is configured:\n\n``` html\n<img src=\"/static/foo-25b047cc.jpg\" width=\"100\" height=\"100\">\n```\n\nThe referenced image will also be moved into the appropriate output location. If there are any plugins to minify images then those plugins will process the image as well.\n\nHere are the docs that were just added: https://github.com/lasso-js/lasso#%3Classo-img\n @viviangledhill automatic conversion to webp is a good suggestion. Assuming the webp image is cached I don't see it being too expensive. The tricky part is that we would have to have a good mechanism for making Lasso.js aware of the target browser's user agent so that it can optimize accordingly. Maybe open a separate Github issue for that feature request to Lasso.js?\n\nI'm going to go ahead and close this issue, but let us know if you run into any other issues related to images and Lasso.js. Thanks.\n  Yes, require extensions are deprecated, but I'm not too concerned. As stated in the docs:\n\n> Since the Module system is locked, this feature will probably never go away.\n\nI disagree with their decision to deprecate the feature, but I do think there are better ways to extend the module loading system to add support for new compile-to-JavaScript languages such as JSX and marko. Worst comes to worst, we provide a script to precompile all templates to JS and use `require('template.marko.js')` instead, but that would impact developer usability since it would introduce an unnecessary build step that we don't have now. \n\nHow we have implemented the Node.js require extension for marko avoids the problem of having a global. The global require extension that gets installed by marko simply delegates the compilation to JS to the appropriate marko compiler based on where the source template is on disk. There is no harm with registering the require extension multiple times and in different packages.\n\nOn a related note, I would like to see a tool that can be used to precompile all templates and that replaces all `require('./template.marko')` calls with `require('./template.marko.js')`. This would be useful as a `prepublish` script for publishing shared packages that make use of Marko templates.\n That's true that `require.extensions` was deprecated, but I am not too concerned. According to the docs:\n\n> Since the Module system is locked, this feature will probably never go away. \n\nI disagree with their decision to deprecate that feature without providing a suitable alternative. There's definitely a need for compile to JS languages such as Marko and JSX. Forcing a precompile makes things more difficult and more complicated since it introduces an unnecessary build step that is not needed now. Worst comes to worst, we could precompile all templates and require the `.marko.js` files directly....\n\nThe Node.js require extension for marko avoids most of the problems with globals since the require extension just delegates the template compilation to the appropriate version of marko based on where the template is located on disk. There is no harm in installing the marko require extension multiple times and it can be multiple versions of marko in a single app.\n\nOn a related note, I do think there would be a benefit to offer a tool for Marko that could be used as a `prepublish` script to replace all `require('./template.marko')` calls with `require('./template.marko.js')` and to have it precompile all templates in the process.\n Hey @yomed, I'm just going through old issues to do some housecleaning. I'm going to go ahead and close this issue, but if this is still an issue/question please feel free to add more comments. \n\nAs a separate issue I think we should explore the option of precompiling all templates and updating the JS code as a prepublish step. Please feel free to open an additional Github issue if you have specific thoughts on how to avoid using `require.extensions`. Thanks.\n  At eBay we are using a very similar approach to handle localization. However, instead of adding additional methods to `out.global` we just pass the `out` object to various helper methods. For example:\n\n``` javascript\nvar locale = getLocale(out);\n```\n\nIf you are rendering to an HTTP response directly using `template.render({...}, res)` then you can access the underlying response stream and the request object by doing the following:\n\n``` javascript\nvar res = out.stream;\nvar req = res.req; // Works for Express, not sure if it works for Koa\nvar locale = getLocaleFromRequest(req);\n```\n\nNOTE: For Koa you can render directly to the HTTP response stream by doing the following:\n\n``` javascript\napp.use(function *() {\n  template.render({...}, this.res)\n}); \n```\n\nI don't use Koa so I am going by what @jlarsson said in the following issue: https://github.com/marko-js/marko/pull/144\n\nThe benefit of this approach is that the developer does not have to explicitly use the `$global` property to add things to `out.global`. The disadvantage is that this approach won't work if you are not rendering directly to an HTTP response stream.\n\nDoes the approach described above work for you?\n Also, you could create a custom compile-time tag to introduce a new JavaScript i18n variable in your template. For example:\n\n``` xml\n<i18n-var name=\"i18n\"/>\n\n<layout-use template=\"./boilerplate.marko\">\n    <layout-put into=\"content\">\n        <h1>${i18n.__('Welcome!')}</h1>\n    </layout-put>\n</layout-use>\n```\n\nI think that approach is cleaner. We have a similar taglib for our eBay apps.\n\nIf you want help going that route, I can put together a sample app to show how it can easily be implemented. The docs on compile-time tags is lacking at this point (https://github.com/marko-js/marko/issues/100).\n Hi @taecilla, sometimes it is just easier to explain in code, so I created a sample app to hopefully make things clearer about what I am proposing. Please check out the following app:\n\nhttps://github.com/marko-js-samples/marko-koa-i18n\n\nKey notes:\n- Enable the `koa-i18n` middleware in your main `server.js` file and add some locales\n- Just put `i18n` object into the `out.global` property when you render the page template:\n\n``` javascript\nthis.response.body = require('./template.marko').renderSync({\n    $global: {\n        i18n: this.i18n\n    }\n});\n```\n- Use the `<i18n-var>` tag to add a new JavaScript `i18n` var to your template at compilation time whose value will be `out.global.i18n`\n- In your template you can then do the following:\n\n``` xml\n<i18n-var/>\n${i18n.__('hello', data.name)}\n```\n\nDoes that look like a clean solution to you?\n Hi @taecilla, I only passed in `i18n` using `$global` because you were _not_ rendering directly to the HTTP response stream. If you were to do the following:\n\n``` javascript\ntemplate.render({ ... }, this.response);\n```\n\nThen you could access the `i18n` variable as shown below:\n\n``` javascript\nvar response = out.stream;\nvar koaContext = response.ctx;\nvar i18n = koaContext.i18n;\nconsole.log(i18n.__('howAreYou'));\n```\n\nThe easiest way to automatically associate a template rendering with a request/response is to render directly to `this.response`. Alternatively, you could create your own Koa plugin that introduces a `this.renderTemplate(template, templateData)` method for rendering the top-level page template:\n\n``` javascript\nmodule.exports = function *() {\n    this.renderTemplate(template, { name: 'Frank' });\n};\n```\n\nYour Koa plugin could then auto-populate any globals into the template data object.\n\nThere's alternatives to avoid having to explicitly pass in `$global` everywhere :)\n Hey @tropperstyle, it looks like a bad validation check at the following line:\nhttps://github.com/marko-js/marko/blob/56d23b07bdc4ca2a20ebce868a3982277c97c618/compiler/taglibs/taglib-loader/scanTagsDir.js#L89\n\nThat line should probably be updated to not throw an error if the tag has a transformer:\n\n``` javascript\nif (!tagDef.renderer && !tagDef.template && !tagDef.transformer) {\n```\n\nDo you want to try it out locally and send a PR if it solves your problem?\n\nThanks,\nPatrick\n Hey @taecilla, I'm just going through issues to do some housecleaning. I'm going to go ahead and close this issue, but if this is still an issue/question please feel free to add more comments. Thanks.\n  Thanks for the fix! New version published: `marko@2.7.23`\n  For context, please see [Proposal: Replace HTML parser with a new parser that recognizes attribute types](https://github.com/marko-js/marko/issues/90)\n\nAll of the details are not finalized for the new parser and template syntax, but we wanted to go ahead and create this issue to start the discussion and see if there was interest from folks in the open source community taking ownership of this task. Happy to answer any questions :)\n So the main thing that we need to do is fix how attributes are delimited. If the marko tag definition says that an attribute is a string or if the attribute is not defined in the tag then surround the tag with double quotes. For expressions, numbers, boolean, and non-string types simply then surround then remove the quotes and surround the value with parentheses. For example, transform `some-number=\"123\"` to `some-number=123`.\n\nThe new for-loop and if/else/else-if syntax should be used in place of the standard attributes. For example, `<div for=\"x in y\">` should become something like `<div for(x in y)>`.\n\nWe can keep the marko-tag.json files for reference but they wouldn't be used anymore to infer attribute types (since type will always be an expression now). Also note that marko-tag.json files would still need to be used for describing tag transformers.\n\nThe migration tool should probably leverage `htmljs-parser` to parse the old templates since it will be able to properly parse the new and old syntax. This would be helpful in case the migration tool is ran multiple times for the same templates.\n\nThis isn't a comprehensive guide but I think these are the key things that would need to be migrated.\n  Thanks for the PR. \n\nI see the following jshint error that looks like a problem:\n\n```\ntaglibs/core/core-tag-transformer.js: line 113, col 55, 'UnlessNode' is not defined.\n```\n\nCan you please add tests and update the docs? For the docs you will need to update the following file:\nhttps://github.com/marko-js/marko/blob/master/docs/language-guide.md\n\nFor the tests, please duplicate the following directory and update it to test the new `unless` attribute and the new `<unless>` tag:\nhttps://github.com/marko-js/marko/tree/master/test/fixtures/templates/if-else\n\nThanks,\nPatrick\n We are using a simple string compare for \"actual\" and \"expected\" and any whitespace difference will cause the test case to fail. I suspect you are using Atom and it is automatically adding a trailing new line when you save the \"expected\" file to disk. You can disable the feature by adding the following to your `User Config` file:\n\n```\n\"*\":\n  // ...\n  whitespace:\n    ensureSingleTrailingNewline: false\n```\n Hi @kristianmandrup, the code changes and test look good, but why did you completely reformat the markdown for the docs? It looks like the markdown changes were just stylistic changes, but now the style will be different in the other markdown files. I would rather use the old style unless there is a good reason to switch. Can you please only change the relevant docs for `unless` and we can discuss stylistic changes to the Markdown as a separate Github issue/PR. Thanks.\n Thanks for the PR, @kristianmandrup. New version published: `marko@2.7.22`\n\nThe stylistic changes that I was referring to was the Markdown syntax for declaring headings and bold. I reverted those changes and updates the docs for Conditionals:\n- https://github.com/marko-js/marko/commit/4a58db78ee36acd39bc90a18bee24578863e904d\n- https://github.com/marko-js/marko/commit/1e19886a5a443f1b4ad6d5b90fba89d9dfc8fd61\n\nI also published the new docs to markojs.com. Please let me know if you see any issues. Thanks again.\n  Hi @jlarsson, thanks for the PR. I see where you are going with this but I do have some concerns. Adding a `try...catch` will prevent the frequently called code from being optimized by V8 and it will also only catch any synchronous errors. I'm more inclined to add the `try...catch` block around the following line:\n\nhttps://github.com/jlarsson/marko/blob/3c51134965474d30de7e4e7e82f68cb3de822d0b/runtime/marko-runtime.js#L252\n\nThoughts? Can you make that change?\n\nOn a related note, Koa relies on a returned `Readable` stream, but in most Express apps we are writing directly to the `Writable` HTTP response stream without creating an intermediate stream (faster...):\n\n``` javascript\nvar template = require('./template.marko');\n\nmodule.exports = function(req, res) {\n    template.render({ ... }, res);\n}\n```\n\n Just throwing that out there :)\n\nGlad you are enjoying marko!\n  That wouldn't be hard to implement but I always find `unless` confusing when reading CoffeeScript code. I'm sure I could get use to it though.\n  Hi @kristianmandrup, I think that would be independent of Marko. In your application's main script (on either the server or client) you could run code to do what you are asking. In the Marko templates your expressions are just JavaScript so there would be no problem there.\n\nHowever, I would recommend not using globals and to instead use `require` to import any JavaScript modules into your templates or other JavaScript code. Also, people might not be happy if you monkey patch the prototypes for core JavaScript types (unless they are polyfills).\n\nLet me know if you still think that there is something that can be done to solve your common use case :)\n Hey @kristianmandrup. I'm going to go ahead and close this issue since you can make changes on your side to meet your needs. I don't think `marko` should be introducing any globals or making it easier to introduce globals. I think it is better to stick with the CommonJS way of importing dependencies using `require`. Let me know if you have any thoughts or suggestions. Thanks. \n  New version published with fix: `marko@2.7.24`\n Thanks for reporting the problem!\n De-duping is not happening if the found taglibs are coming from the cache...\n  That's supported. Please see: https://github.com/marko-js/marko#loop-status-variable\n\nThat works for you, correct?\n  Hi @kristianmandrup, thanks for the PR, but your changes broke tests (please run `npm test` first). I hope you don't mind, but I went ahead and made changes in marko core to support the following:\n\n``` xml\n<html-element tag-name=\"hello-${data.myTagName}\" class=\"my-class\" foo=\"bar\">\n    My nested content\n</html-element>\n```\n\nOutput:\n\n``` html\n<hello-world class=\"my-class\" foo=\"bar\">\n    My nested content\n</hello-world>\n```\n\nSee: https://github.com/marko-js/marko/issues/137\n Not exactly... supporting dynamic components is a little tricky. It's kind of supported if you use `<invoke function=\"...\"/>` but that's not a clean solution. We talked about adding support for something similar to the following:\n\n``` xml\n<register-dynamic-tag tag=\"ui-component-one\"/>\n<register-dynamic-tag tag=\"ui-component-two\"/>\n\n<dynamic-tag tag=\"ui-component-${data.variant}\" name=\"Frank\" message-count=\"${30}\"/>\n```\n\nIs that along the lines of what you are thinking?\n It's doable, but it would require a little more work than what was required for `<html-element>`. I opened a Github issue: https://github.com/marko-js/marko/issues/139\n\nI support that proposal, but I won't be able to work on it for at least a week or two. I need to finish up the marko website ([http://markojs.com.com](http://markojs.com/)!!!) and put together a blog post announcing Marko Widgets v5.\n\nIn the meantime, I recommend:\n\n``` xml\n<app-foo name=\"Frank\" message-count=\"${30}\" if=\"data.variant === 'foo'\"/>\n<app-foo name=\"Frank\" message-count=\"${30}\" else-if=\"data.variant === 'bar'\"/>\n<app-baz name=\"Frank\" message-count=\"${30}\" else/>\n```\n  `attrs` currently only applies HTML tags (not custom tags). You can, however, do the following:\n\n``` xml\n<icon-item c-data=\"item\">\n```\n\nHowever, now that you point it out. We should allow: \n\n``` xml\n<icon-item attrs=\"item\">\n```\n\nI will make that change.\n Fixed. New version published: `marko@2.7.17`\n  Since there is currently no JavaScript engine that natively supports ES6 modules, why not just use babel to transpile the ES6 module code into [mostly] equivalent ES5 code (that uses CommonJS module syntax)? Once you have ES5 code you can build browser JavaScript bundles using almost any of the popular JavaScript module bundlers (or the JavaScript module bundler can do the transpiling). That seems like a better strategy than buying into a custom module loading system such as SystemJS or jspm (each with their own quirks and proprietary features). When I look at SystemJS and jspm I am reminded of RequireJS and all of the ugly configuration that it required. If SystemJS or jspm do not support the [browser field spec](https://gist.github.com/defunctzombie/4339901) for remapping a server-side JavaScript module to a different browser-side JavaScript module then that would be a problem for marko. I recommend using [Lasso.js](https://github.com/lasso-js/lasso) or [Browserify](http://browserify.org/) (or possibly [Webpack](http://webpack.github.io/)) as your JavaScript module bundler for building client-side bundles of your JavaScript code.\n\nI would not recommend trying to make marko (or any other module written in the Node.js way) work with RequireJS. Have you considered transforming your AMD code into CommonJS so that you can drop AMD and RequireJS completely (both are dying technologies).\n\nWith that said, if someone in the community wants to build a custom Marko loader for SystemJS or jspm then I'll try to help out, but it is not something I am interested in coding.\n I investigated integrating Babel a while ago and found that it was very\neasy although I was waiting on some changes from Babel to make it more\nefficient. Specifically, the Babel transpiler builds the Abstract Syntax\nTree (AST) of the code and we were hoping to leverage their AST instead of\nalso parsing it with esprima. I think Babel has since made some changes to\nmake it easier and better for tools like Lasso (bundler) to utilize ES6 via\nBabel.\n\nOn Wed, Aug 26, 2015 at 11:08 AM, Patrick Steele-Idem <\nnotifications@github.com> wrote:\n\n> Since there is currently no JavaScript engine that natively supports ES6\n> modules, why not just use babel to transpile the ES6 module code into\n> [mostly] equivalent ES5 code (that uses CommonJS module syntax)? Once you\n> have ES5 code you can build browser JavaScript bundles using almost any of\n> the popular JavaScript module bundlers (or the JavaScript module bundler\n> can do the transpiling). That seems like a better strategy than buying into\n> a custom module loading system such as SystemJS or jspm (each with their\n> own quirks and proprietary features). When I look at SystemJS and jspm I am\n> reminded of RequireJS and all of the ugly configuration that it required.\n> If SystemJS or jspm do not support the browser field spec\n> https://gist.github.com/defunctzombie/4339901 for remapping a\n> server-side JavaScript module to a different browser-side JavaScript module\n> then that would be a problem for marko. I recommend using Lasso.js\n> https://github.com/lasso-js/lasso or Browserify http://browserify.org/\n> (or possibly Webpack http://webpack.github.io/) as your JavaScript\n> module bundler for building client-side bundles of your JavaScript code.\n> \n> I would not recommend trying to make marko (or any other module written in\n> the Node.js way) work with RequireJS. Have you considered transforming your\n> AMD code into CommonJS so that you can drop AMD and RequireJS completely\n> (both are dying technologies).\n> \n> With that said, if someone in the community wants to build a custom Marko\n> loader for SystemJS or jspm then I'll try to help out, but it is not\n> something I am interested in coding.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/134#issuecomment-135055021.\n Glad to hear @wheresrhys, thanks for sharing! I know you are using webpack, but I recommend checking out Lasso.js... I think it is pretty awesome and it offers a lot of features that webpack doesn't offer :) \n  Hi @kristianmandrup, I'm not sure if it makes sense to pull this into core just yet. Here's the same functionality provided as a separate module published to npm: https://github.com/marko-js/marko-tag-body\n\nDoes that work for you? \n There's some really cool stuff that you can do simply by transforming the AST during the compilation stage. It definitely needs to be documented. I'm glad you were able to get your hands dirty and learn some of the tricks for marko!\n  Did you forget the `w-bind`?\n `w-body` is also only for widgets (anything prefixed with `w-` is handled by `marko-widgets`). If you are not using `marko-widgets` then you need to do the following:\n\n``` xml\n<div class=\"ui $data.ui accordion\">\n    <invoke function=\"data.renderBody(out)\" if=\"data.renderBody\"/>\n</div>\n```\n It's more complicated for the `marko-widgets` use case since `marko-widgets` will handle preserving nested HTML content when the outer widget is rerendered. It will also handle updating the nested HTML content when the outer widget does not need to be rerendered, but new nested content was provided. In addition, `w-body` must be bound to a container HTML element in order for everything to work.\n Hi @kristianmandrup, you don't need to patch marko to support this. It can be done completely in user land. Let me put together a separate project that you can use as an example.\n  First off, it's all just code so we can make anything work :) I don't see anything here to suggest that you would need a difficult change and I would be surprised if second-level imports are not supported. If that is the case then we should fix it. I'll add a test case and see what I can figure out.\n\nAlso, can you please clarify on the following?:\n\n> Looks like the problem is in part caused by using browser-refresh\n\nWhat makes you think that?\n Great. Thank you. I'll take a look now.\n Thanks for the sample project, @kristianmandrup. I was able to reproduce the problem pretty quickly and I have put in a fix. New version published: `marko@2.7.14`\n\nLet me know if you see any other issues. Thanks again!\n :+1: on logging. The [debug](https://github.com/visionmedia/debug) module would probably be the most appropriate since you could launch the app with `DEBUG=marko node server.js` to see exactly what marko is doing during compilation. Do you mind opening a separate Github issue to describe what type of logging you would be interested in for marko?\n @kristianmandrup, please try the following:\n\n```\nMARKO_CLEAN=true node your-app.js\n```\n\nThat will force all templates to be recompiled.\n Do you see any issue with the test case I added? It was pretty much your code with some extra things removed and the test cases are passing.\n\nDo you by any chance have a circular dependency in your imports?\n I just pushed a small change to handle circular imports, but I don't think that is impacting you because otherwise you would have seen a `Maximum call stack` error. Here's the fix I pushed: https://github.com/marko-js/marko/commit/608d9092bbc71ac5e79a0b8c0ec15d9de88698b3\n Is your app crashing?\n\nDo you think you would be able to provide a fork of marko with a failing test case?\n Are those global imports in an installed node module?\n If `buildLookup()` is not being called then that would suggest that no templates are being compiled. Make sure you run your app with `MARKO_CLEAN=true node app.js` to force all templates to be recompiled.\n The logic for disabling the `checkUpToDate` looks fine to me so `MARKO_CLEAN=true node app.js` should force all templates to be recompiled. Are you sure that is not happening?\n If you are using the Node.js require extension then it will be here:\n\nhttps://github.com/marko-js/marko/blob/8035b5de72fc8258f88bcccec41e9e8ce0ff4245/node-require.js#L28\n  Was that a question and then an answer to your own question? :)\n\nShould I close this issue, or do you think we need to improve the docs for `renderBody(out)` as it relates to Marko?: https://github.com/marko-js/marko#tag-renderer\n  Thanks!\n  Thanks!\n  Glad to have you on this project!\n  Hi @kristianmandrup, if you have a `marko-tag.json` and you don't declare a certain attribute then it is considered a \"splat\" attribute and it is added to a special \"*\" property. The fix is to declare the `\"@data\": \"expression\"` attribute in your `marko-tag.json` file. See: https://github.com/marko-js/marko#defining-attributes\n\nWith that said, the Marko compiler should probably throw an error at time unless you explicitly add the \"@*\" attribute.  I'm going to investigate.\n\nAlso relevant: https://github.com/marko-js/marko/issues/90 (Proposal: Replace HTML parser with a new parser that recognizes attribute types)\n  Thanks for reporting the confusing error message. I just pushed a commit that should make things less confusing. New version published: `marko@2.7.10`\n\nPlease let me know if you see any other issues. Thanks.\n You're welcome.\n\nFor Marko Widgets, we hope to release v5 next week. I've been focusing on benchmarking and testing this week and I do not expect the API to change for the final v5 release. That is, I encourage you to use the latest beta version now so that we can find and fix any bugs sooner :)\n\nI'm not sure if you have had a chance to review, but I have updated the docs and added benchmarks to `morphdom`. See: https://github.com/patrick-steele-idem/morphdom\n\nI've also updated the benchmarks we used to compare performance of Marko Widgets with React using the latest `5.0.0-beta.2` release: [Marko vs React: Performance Benchmark](https://github.com/patrick-steele-idem/marko-vs-react) (summary: React and Marko Widgets perform almost identical in the browser, but Marko Widgets is 10x faster when rendering on the server. In addition, Marko Widgets is much more lightweight)\n  Hi @zwhitchcox, you might want to try reversing the order of the `this.body` and the `this.type` assignments as shown below:\n\n``` javascript\n'use strict';\nrequire('marko/node-require').install();\n\nlet koa    = require('koa')\nlet app    = koa()\nlet template = require('./views/index.marko');\n\napp.use(function* () {\n    this.type = 'type/html'\n    this.body = template.stream()\n})\nserver.listen(3000);\n```\n\nI don't use Koa, but I suspect that when you assign the stream to `this.body` that it commits the response body. If that is the case, then the `Content-Type` header may not be sent correctly.\n\nI also updated your code to use the Node.js require extension :)\n\nLet me know if that does or does not solve your problem.\n Doh :)\n\nI bet if the page HTML would have looked like HTML the browser would have been cool with it so it probably didn't help that it only rendered `hello`.\n Hey @Globik, \n\nProbably better to open a separate Github issue in the future, but I'll try to answer your questions below.\n\n> So is correct: `this.type = \"html\";`\n\nThe following is the correct content type for HTML responses:\n\n``` javascript\nthis.type = 'text/html; charset=utf-8';\n```\n\n> Your marko is \"simple\" enough, but how do I build a binary tree with marko?\n\nMarko supports macros (inline functions for rendering HTML) and those functions can be called recursively: http://markojs.com/docs/marko/language-guide/#macros\n\nYou will want to do something similar to the following:\n\n``` xml\n<def function=\"renderTree(node)\">\n    <div class=\"node\">\n        <span>${node.value}</span>\n        <div class=\"left\">\n            <invoke function=\"renderTree(node.left)\" if=\"node.left\"/>\n        </div>\n        <div class=\"right\">\n            <invoke function=\"renderTree(node.right)\" if=\"node.right\"/>\n        </div>\n    </div>\n</div>\n\n<invoke function=\"renderTree(data.rootNode)\"/>\n```\n\n> Where is marko's tutos can i find?\n\nDefinitely start with the screencasts if you haven't watched those yet: https://www.youtube.com/playlist?list=PLZUgs-F38XXQJBxA58UqnwTVMZS_uza_C\n\nAlso check out:\n- [Try Marko Online](http://markojs.com/try-online/)\n- [Language guide](http://markojs.com/docs/marko/language-guide/)\n- [Sample apps](https://github.com/marko-js-samples/)\n\nIf you think there are particular tutorials that are needed please share by opening a Github issue. Also, please join us in the Gitter chat room and we will be happy to answer any questions you might have: https://gitter.im/marko-js/marko\n  Hi @dtrikannad,\n\nI'm assuming you are using the [flash](https://github.com/expressjs/flash) module for Express. I've not used that module, but according to the documentation the flash messages are stored in the `res.locals.flash` variable and they are an array in the following form:\n\n``` json\n{\n    \"type\": \"info\",\n    \"message\": \"message\"\n}\n```\n\nI would recommend just passing the flash messages to your page template as part of the template data similar to the following:\n\n``` javascript\nvar template = require('./template.marko');\n\napp.get('/', function(req, res) {\n    template.render({\n            flashMessages: res.locals.flash\n        }, res);\n});\n```\n\nAnd then in your template:\n\n``` xml\n<ul>\n    <li for=\"flashMessage in data.flashMessages\">\n        <b>Type:</b> ${flashMessage.type}<br>\n        <b>Message:</b> ${flashMessage.message}\n    </li>\n</ul>\n```\n\nI hope that answers your question.\n Hi @dtrikannad, glad that solved your problem. Do you have a stack trace with your 500 error? Marko doesn't have any `try...catch` blocks so any exception is just going to bubble up. If you are not seeing a proper stack trace in your logs then I think there are issues with how your server is configured and that is going to cause more problems for you in the future. Did you you add your own uncaught exception handler (e.g. `process.on('uncaughtException', function(err) { ... })`);? Are you using promises (promises catch exceptions and will silently eat them in some circumstances)?\n\nIf you are desperate you can do the following:\n\n``` xml\n{% try { %}\n<require module=\"../private_libraries/globals_v1.js\" var=\"globals\"/>\n<if test=\"!globals.isEmpty(data.messages)\">Not Empty</if>\n{% } catch(e) { console.error(e); } %}\n```\n\n(using embedded scripts is not recommended!)\n\nI hope that helps\n Hi @dtrikannad, I'm going to close this issue, but if you are still facing issues related to debugging then feel free to comment here or open another Github issue.\n Hey @crash85, the \"flash messages\" are stored in a session that persists across redirects. See:\n https://github.com/expressjs/flash/blob/92fd748feb60c9a277622ce75ef7091735796af9/index.js#L6-L8\n\nAs an addendum to my earlier response, whenever you pass flash messages to the template to be rendered you should just also clear out flash messages from the session:\n\n``` javascript\nvar template = require('./template.marko');\n\napp.get('/', function(req, res) {\n    var flashMessages = res.locals.flash;\n    if (flashMessages) {\n        flashMessages = res.locals.flash.concat([]); // Clone the flash messages before clearing\n        res.locals.flash.length = 0; // Remove all of the elements from the flash messages stored in the session\n    }  \n\n    template.render({\n            flashMessages: res.locals.flash\n        }, res);\n});\n```\n\nI don't use sessions in my app and I don't use the `flash` module, but that should work for you (assuming you have Express sessions set up correctly).\n  Nice improvement. Thank you!\n  Hi @williamvivier, I created a `<USER_HOME>/emmet/snippets.json` file and I also needed to update my Atom `keymap.cson` file (`Atom` \u2192 `Open Your Keymap`):\n\n_`keymap.cson:`_\n\n``` coffee\n'atom-text-editor[data-grammar~=\"marko\"]:not([mini])':\n    'tab': 'emmet:expand-abbreviation-with-tab'\n```\n\n_`<USER_HOME>/emmet/snippets.json:`_\n\n``` json\n{\n    \"marko\": {\n        \"extends\": \"html\",\n        \"snippets\": {\n            \"for\": \"<for each=\\\"${1:item} in ${2:items}\\\">$3</for>\",\n            \"@for\": \"for\\\"${1:item} in ${2:items}\\\"\",\n            \"attrs=\": \"attrs=\\\"${1:expr}\\\"\",\n            \"if\": \"<if test=\\\"${1:condition}\\\">$2</if>\",\n            \"@if\": \"if=\\\"${1:condition}\\\"\",\n            \"else-if\": \"<else-if test=\\\"${1:condition}\\\">$2</else-if>\",\n            \"@else-if\": \"else-if=\\\"${1:condition}\\\"\",\n            \"else\": \"<else>$1</else>\",\n            \"var\": \"<var name=\\\"${1:name}\\\" value=\\\"$2\\\"/>\",\n            \"assign\": \"<assign var=\\\"${1:var}\\\" value=\\\"$2\\\"/>\",\n            \"require\": \"<require module=\\\"${1:module}\\\" var=\\\"$2\\\"/>\",\n            \"op\": \"<optimizer-page package-path=\\\"${1:./optimizer.json}\\\"/>\",\n            \"oh\": \"<optimizer-head/>\",\n            \"ob\": \"<optimizer-body/>\",\n            \"use\": \"<layout-use template=\\\"${1:./path/to/template.marko}\\\">\\n    <layout-put into=\\\"${2:target}\\\">\\n        ${3:content}\\n    </layout-put>\\n</layout-use>\",\n            \"placeholder\": \"<layout-placeholder name=\\\"${1:name}\\\"/>\",\n            \"put\": \"<layout-put into=\\\"${1:name}\\\"/>\",\n            \"async\": \"<async-fragment data-provider=\\\"${1:data.myDataProvider}\\\" var=\\\"${2:varName}\\\">\\n    ${3:}\\n</async-fragment>\",\n            \"bind\": \"w-bind=\\\"${1:./widget}\\\"\",\n            \"include\": \"<include template=\\\"${1:./path/to/template.marko}\\\"/>\",\n            \"?\": \"{?${1:expression};${2:trueTemplate};${3:falseTemplate}}\",\n            \"def\": \"<def function=\\\"${1:name}(${2:params})\\\">\\n    ${3:}\\n</def>\",\n            \"invoke\": \"<invoke function=\\\"${1:name}\\\" ${2:arg1Name}=\\\"${3:arg1Value}\\\"/>\",\n            \"comment\": \"<html-comment>$1</html-comment\"\n        }\n    }\n}\n```\n\nAlso, I had opened up an issue against the Emmet Atom project on Github that has relevant discussion: https://github.com/emmetio/emmet-atom/issues/206\n\nIdeally, the Marko plugin for Atom would automatically enable Emmet support, but right now the Emmet API has limitations that prevent this.\n\nHopefully editing those two files enables Emmet for you, but let us know if you are still running into issues.\n Hey @williamvivier, I'm just do some housecleaning and am reviewing old issues. I'm going to go ahead and close this issue, but if you are still having issues getting Emmet to work with Marko please let us know. Thanks! \n  Hey @kristianmandrup, I'm just going through old issues to do some housecleaning. I'm going to go ahead and close this issue, but if this is still an issue/question please feel free to add more comments. \n\nOn a related note, I plan on sharing a marko roadmap later this week. Work is [in-progress](https://github.com/marko-js/marko/tree/htmljs-parser) to integrate the new [htmljs-parser](https://github.com/philidem/htmljs-parser) as discussed in the following proposal: https://github.com/marko-js/marko/issues/90\n\nThe new syntax is much cleaner and more powerful. For example:\n\n``` xml\nHello ${data.name}!\n\n<ul if(notEmpty(data.colors))>\n    <li for(color in data.colors)>\n        ${color}\n    </li>\n</ul>\n<div else>\n    No colors!\n</div>\n\n<if(notEmpty(data.colors))>\n    <ul>\n        <for(color in data.colors)>\n            <li>\n                ${color}\n            </li>\n        </for>\n    </ul>\n</if>\n<else>\n    <div>\n        No colors!\n    </div>\n</else>\n```\n\nWe will also be introducing a cleaner syntax for macros/functions:\n\n``` xml\n<function renderTree(node)>\n    Name: ${child.name}\n\n    Children:\n    <ul if(node.children)>\n        <li for(child in node.children)>\n            <renderTree(child)/>\n        </li>\n    </ul>\n</function>\n\n<renderTree(data.node)>\n```\n\nAnd ES6-style imports:\n\n``` xml\n<module-imports>\n    reverse from \"./helpers\";\n    foo from \"./foo\";\n</module-imports>\n\nHello ${reverse('Frank')}\n```\n\nJust wanted to share with you, because I think these changes will likely impact how you are doing things with the jade transpiler. If you have feedback, please share!\n\nThanks.\n  Thank you again, @merwan7, for the contribution!\n  Hi @sandro-pasquali, the Marko compiler processes `${expression}` found in JavaScript strings to produce compiled JavaScript code that uses concatenation to achieve the expected result. Essentially, you get the benefits of ES6 template strings inside Marko templates and there is no conflict with ES6 since the code is transpiled to ES5 compatible code at compile time.\n\nFor example, given the following template:\n\n``` xml\n${\"Hello ${data.name}\"}\n```\n\nThe compiled code will be similar to the following:\n\n``` javascript\n\"Hello \"+data.name\n```\n\nInterestingly, if you want to use ES6 template strings you can still do that by using backticks instead of string quotes (Marko only process `${...}` tokens inside JavaScript strings). For example, given the following template:\n\n``` xml\n${`Hello ${data.name}`}\n```\n\nThe compiled output will be the following:\n\n``` javascript\n`Hello ${data.name}`\n```\n\nThe above compiled code will work exactly as expected in web browsers that support ES6.\n\nHopefully that answers your question, but let me know if not.\n  Hi @kristianmandrup, can you please provide more details on your use case and why you need this feature? I think that will allow is to provide a better solution to your problem.\n\nAlso, we want to make ensure that templates still compile through the command line compiler and other tools. If application code must first register taglibs as you described then that would mean that other tools would not work as expected unless they also some how loaded your application code to register the additional taglibs.\n\nOn a related note, Marko does support the ability for a taglib to import another taglib (here's a link to the [relevant code in loader-taglib.js](https://github.com/marko-js/marko/blob/156f04ed3537b3e1d0561f87a3353ac7e0c1f543/compiler/taglibs/taglib-loader/loader-taglib.js#L138)). Not sure if that would solve your problem though.\n\nPlease provide more details on your use case. Thanks!\n  Interesting. It looks like the html parser we are using (i.e., [htmlparser2](https://github.com/fb55/htmlparser2) is processing the `<%` tags, and I don't think it would be reasonable to change that HTML parser. \n\nMarko is designed to render pure HTML code. While you can use it to render JSP code you will have to avoid using the special JSP tags in your Marko template. \n\nI suggest the following workaround:\n\n## Create a custom tag to render the JSP directives and scriptlets\n\n``` xml\n<jsp-directive type=\"page\" contentType=\"text/html;charset=UTF-8\" language=\"java\"/>\n<jsp-directive type=\"taglib\" prefix=\"sec\" uri=\"http://www.springframework.org/security/tags\"/>\n<jsp-directive type=\"taglib\" prefix=\"spring\" uri=\"http://www.springframework.org/tags\"/>\n\n<jsp-scriptlet>\n\n</jsp-scriptlet>\n\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n\n</body>\n</html>\n```\n\nThe JavaScript renderer for the `<jsp-directive>` tag might look like the following:\n\n``` javascript\nmodule.exports = function render(input, out) {\n    var type = input.type;\n    out.write('<%@ ' + type);\n\n    var attrs = input['*'];\n    for (var k in attrs) {\n        if (attrs.hasOwnProperty('k')) {\n            out.write(' ' + k + '=\"' + attrs[k] + '\"');\n        }\n    }\n\n    out.write('%>');\n};\n```\n\nThe JSON declaration for the tags might look like the following:\n\n``` json\n{\n    \"<jsp-directive>\": {\n        \"renderer\": \"./jsp-directive-tag.js\",\n        \"@type\": \"string\",\n        \"@*\": \"string\"\n    },\n\n    \"<jsp-scriptlet>\": {\n        \"renderer\": \"./jsp-scriptlet-tag.js\"\n    }\n}\n```\n\nLet me know if you still have questions.\n  Hi @ahmadnassri, the Marko compiler puts the compiled templates next to the original template because the Node.js module loader is context aware and we want the stack traces to match up with location that the Node.js module loader associates with the loaded compiled template. That is, the location of the JS module on disk matters since it impacts how `require`'d modules are resolved. Currently, we calculate all of the relative paths based on the original template location on disk and we therefore put the compiled template module next to the original template file. While we could place the compiled template at a different location on disk, we would need to change how the relative `require` paths are generated. Also, at a minimum, each module in the application would need to have its own parallel directory tree for compiled templates so that the required Node.js modules would be resolved relative to the module that contains the template. Something like the following:\n\n```\nmy-app/\n    .marko-compiled/\n        foo/\n            template.marko.js\n        bar/\n            template.marko.js\n    foo/\n        template.marko\n    bar/\n        template.marko\n    node_modules/\n        my-installed-module/\n            .marko-compiled/\n                foo/\n                    template.marko.js\n                bar/\n                    template.marko.js\n            foo/\n                template.marko\n            bar/\n                template.marko\n```\n\nHowever, I would be concerned about the impact on usability if we move compiled templates to a parallel directory tree. There were also be other impacts on usability that would need to be explored. I don't want to dismiss your suggestion, but unfortunately it is not as simple as changing where the compiled template gets stored on disk.\n Hey @ahmadnassri, we added an option to disable writing compiled templates to disk:\n\n``` javascript\nrequire('marko/compiler').defaultOptions.writeToDisk = false; \n```\n\nPlease see issue #150 and commit 370ac4b3ab2adc078b0b1c79f8f58186cd8074e9.\n\nIf that is an acceptable solution then I would like to close this issue. Please let me know. Thanks.\n\nDoes that resolve this issue?\n Do you have an recommendation for a cleaner way to set the option? We can always adjust.\n  Hi @thomasJang, can you please provide more clarity on what you are asking? The `marko-taglib.json` files are found relative to the template being compiled using the following search path: https://github.com/raptorjs/marko#taglib-discovery\n\nIf you can provide more details on what you are trying to accomplish I should then be able to provide better help. Thanks.\n Hi @thomasJang, the location cannot be changed because that would break other things (for example, the command-line compiler would not work). While we could make it possible to register additional `marko-taglib.json` files via code, I don't think that would be a good idea.\n\nNot sure if it solves your use case but you can create a `marko-taglib.json` that imports other taglibs as shown below:\n\n``` json\n{\n    \"taglib-imports\": [\n        \"./path/to/another/marko-taglib.json\"\n    ],\n    ...\n}\n```\n\nCan you provide more details on your use case? Why do you need `marko-taglib.json` files to be in another location?\n Sounds good. If you run into any specific issues or get stuck please feel free to post a new issue. It's pretty easy to change things if necessary so just let us know. Thanks and good luck with your coding!\n  Hi @thomasJang, the marko compiler strips all whitespace by default (including trailing new lines). You can disable whitespace removal by doing the following:\n\n``` javascript\nrequire('marko/compiler').defaultOptions.preserveWhitespace = true;\n```\n\nYou'll need to force a recompile all your templates. The easiest way to do that is to set the `MARKO_CLEAN` environment to `true`:\n\n```\nMARKO_CLEAN=true node .\n```\n\nOf course, you can also just append the new line in your code:\n\n``` javascript\ntmpl.render(data, function(err, output){\n    if(!err)\n        grunt.file.write(dest, output + '\\n');\n    else\n        grunt.log.error(err);\n});\n```\n\nHopefully that answers your question, but if not please let me know.\n Also, please check out the following docs: [Marko >> Whitespace](https://github.com/raptorjs/marko#whitespace)\n  Hi @snapwich, this question has come up before and here is a relevant discussion: https://github.com/raptorjs/marko/issues/6\n\nThe main reason for writing the compiled template to disk is so that stack traces will be valid in case there is an exception thrown during template rendering. By design, the Marko template compiler produces very readable JavaScript output. It would be extremely frustrating to debug a JavaScript exception if the loaded source code was not available.\n\nIn addition, the compiled template _must_ be loaded through the Node.js module loader (or a compatible CommonJS module loader of some sort). If you take a close look at the compiled output of a template you will see that most templates make heavy use of the `require` function that is only available inside the context of a CommonJS module. The `require` function is used to load included templates, custom tags, etc. In other words, you can't just `eval` the compiled output and expect things to work.\n\nIn theory, we could provide an option to disable the writing of the compiled Marko template to disk with a small code change but I think that would be undesirable. I'm happy to discuss some more and would not necessarily be opposed to a PR (as long as the default was still to write the compiled template to disk).\n\nLet me know if you still have questions. Thanks.\n  Hi @kristianmandrup, you should probably be using custom tags instead of partials. Custom tags are superior to vanilla partials in many ways and are often easier to use.\n\nInstead of the following:\n\n``` xml\n<include template=\"../../path/to/header.marko\" ... />\n```\n\nJust make header a custom tag:\n\n``` xml\n<my-header .../>\n```\n\nWith custom tags, the path of the partial template doesn't matter and Marko makes it easy to utilize custom tags provided by installed Node modules. Custom tags can be associated with a JavaScript renderer or just a template (if a JavaScript renderer is not needed).\n\nIt is considered a bad practice to use includes/partials where the target partial template is outside the current directory of the parent template. That is, a partial is probably fine if it the parent template and the partial template are in the same directory.\n\nIf you create a Node.js module that is to export custom tags, just put a `marko-taglib.json` in the root of the module. I recommend taking advantage of directory scanning for automatically discovering taglibs based on the directory structure. Please see [Scanning for Tags](https://github.com/raptorjs/marko#scanning-for-tags).\n\nThe marko compiler will automatically discover the exported taglib of installed modules and make the taglib available to any template that has the taglib in its search path. Please see [Taglib Discovery](https://github.com/raptorjs/marko#taglib-discovery)\n\nI hope that answers your question. Please let me know if you would like to discuss some more. I will try to put together a sample project that illustrates creating and utilizing custom tags.\n Closing issue for now, but please feel free to add additional comments. Thanks.\n  While [consolidate.js](https://github.com/tj/consolidate.js/) doesn't support streaming, we should still add marko support for better visibility to this project.\n\nI'm requesting help from the community in sending a Pull Request to the [consolidate.js](https://github.com/tj/consolidate.js/) project to add support for the marko template engine. Thanks in advance!\n There are two issues with that PR:\n- Issue 1) It doesn't cache the loaded template\n- Issue 2) Marko needs both the template's source (as a string) and the  template's file system path.\n\n**For issue 1:** make sure you use the provided cache to cache the loaded marko template: https://github.com/gregwebs/consolidate.js/blob/8592fed81cd4483ff433b3fdc1d5ea190e004097/lib/consolidate.js#L525\n\n**For issue 2:**  I believe the template's file system path is provided as `options.filename` based on the following line:\nhttps://github.com/gregwebs/consolidate.js/blob/8592fed81cd4483ff433b3fdc1d5ea190e004097/lib/consolidate.js#L138\n\nYou can then use the marko [`load(templatePath, templateSrc)`](http://markojs.com/docs/marko/javascript-api/#loadtemplatepath-templatesrc-options--template) method to load the template:\n\n``` javascript\nvar template = marko.load(str, options.filename);\n```\n\nAnd then to render the loaded template:\n\n``` javascript\ntemplate.render(options, fn);\n```\n\nI don't like the Express view engine (see [Bypassing Express View Rendering for Speed and Modularity](https://strongloop.com/strongblog/bypassing-express-view-rendering-for-speed-and-modularity/) and I don't like `consolidate.js`, but for visibility to marko it is probably worthwhile to enable marko template rendering via consolidate.js... The biggest downside is that streaming/progressive HTML rendering won't work.\n\nThanks for looking into it @seangates!\n See: https://github.com/tj/consolidate.js/pull/255\n @bitinn I've not used `metalsmith`, but loaded `.marko` templates are loaded and cached by the Node.js module loading system the same as normal `.js` modules. That is, they are cached in `require.cache` and deleting from `require.cache` will cause the template to be reloaded on the next `require()` of the template. `metalsmith-watch` supports a `invalidateCache` that might work. \r\n\r\n`marko` also supports a special `hot reload`: https://github.com/marko-js-samples/marko-hot-reload. You'll need to use your own file watcher to tell `marko` when a file is modified and `marko` will ensure that all templates automatically hot reload such that the next time they render they will be render based on the modified source.\r\n\r\nPlease let me know if you need more details @bitinn.  Closed via https://github.com/tj/consolidate.js/pull/255. Thanks @fabsrc!  Hi @kristianmandrup,  I updated the docs to mention the `template-data` attribute that is supported on the `<include>` tag. For your example, you would want to do the following:\n\n``` xml\n<include name=\"xyz.marko\" template-data=\"${data}\"/>\n```\n\nHere's a link to the relevant docs that now mentions the `template-data` attribute:\nhttps://github.com/raptorjs/marko#includes\n\nPlease let me know if that doesn't solve your problem.\n\nThanks.\n Hey @jcc2303, can you please provide more details on your problem? I believe it is best to open a separate Github issue because your code seems unrelated to what @kristianmandrup described. Please clarify. Thanks.\n  Hi @jackhorton, this is not clarified in the docs, but if the `template` attribute is a dynamic expression (not a static string) then the expression should resolve to an already _loaded_ template. You can load the template in the template itself as shown below:\n\n``` xml\n<require module=\"../relative/path/to/template.marko\" var=\"myLoadedIncludeTemplate\"/>\n<include template=\"$myLoadedIncludeTemplate\" />\n```\n\nHowever, if it usually cleaner for the include template to be loaded by the custom tag/controller and for it to be provided as part of the view model to the template.\n\n``` xml\n<include template=\"$data.myLoadedIncludeTemplate\" />\n```\n\nI'll update the docs, but let me know if that doesn't work for you.\n\nThere are two ways to load a template in your JavaScript code:\n\nOption 1)\n\n``` javascript\nvar myLoadedTemplate = require('marko').load(require.resolve('./template.marko'));\n```\n\nOption 2)\n\n``` javascript\nrequire('marko/node-require').install(); // Called once in your application main script\n// ...\nvar myLoadedTemplate = require('./template.marko');\n```\n\nOption 2 is recommended\n Hi @jackhorton, just an update: I put in a minor tweak to allow the `template` attribute to be a dynamic path that can be relative. It is still recommended to preload the include target and pass a reference to the fully loaded template. This mainly because JavaScript module bundlers that do static code analysis will not find dynamically required templates.\n\nNew version published: `marko@2.7.4`\n\nPlease let me know if you have any questions or still have issues. Thanks. \n  Hi @yomed, instead of a custom tag (which is associated with a renderer function) you can invoke a `renderer(input, out)` function directly:\n\n``` javascript\ndata.renderers=[\n    require('../foo'),\n    require('../bar'),\n    require('../baz')\n]\n```\n\n``` xml\n<for each=\"renderer in data.renderers\">\n    <invoke function=\"renderer(myInputObject, out)\"/>\n</for>\n```\n\nI don't know exactly how that fits into your app, but hopefully you get the idea. FYI, a custom tag is resolved to a renderer at compile-time.\n\nPlease let me know if that doesn't solve your problem.\n Assigning a `w-id` attribute to an `<invoke>` tag currently doesn't work because of how the compile-time transform is implemented for marko-widgets. I'll look into seeing if it can be supported with a small code change. Can you please open a Github issue against the [marko-widgets](https://github.com/raptorjs/marko-widgets) project?\n marko-widgets was updated to support the `w-id` attribute with the `<invoke>` tag: https://github.com/raptorjs/marko-widgets/issues/46\n\nClosing this issue.\n  You mentioned two separate issues:\n\n> what if class name is coming dynamically from the JavaScript object.\n\nFor that you will want to use the custom `attrs` attribute which allows attributes to come from a JavaScript object: https://github.com/raptorjs/marko#attrs\n\n> Also there is inconsistency across marko for defining JavaScript expression. Some places its using ${}, some places it dosent needs ${} and here its using {?condition;value} (WITHOUT $ sign)\n\nThat is a known issue that would be solved with the following proposal: https://github.com/raptorjs/marko/issues/90 (Proposal: Replace HTML parser with a new parser that recognizes attribute types)\n\nPlease let me know if that does or does not address your concern so that I can close this issue. Thanks.\n Hi @SunnyGurnani, If an attribute type is declared as `expression` (such as `value` attribute for the `<assign>` tag) then the attribute value is assumed to be a valid JavaScript expression. Therefore you would need to have the value be valid JavaScript such as the following:\n\n``` javascript\n<assign var=\"viewDetailsClass\" value=\"data.listingModel.bin.binAction ? 'btn' : 'btn btn--primary'\"/>\n```\n\nLonger term, we want to have everything be JavaScript. Again, this would be solved by the following proposal: https://github.com/raptorjs/marko/issues/90 :)\n  For the benefit of those outside eBay, here's the template that you shared:\n\n``` xml\n<div ${helper.renderAttributes()} >\n    Please inspect my container element and you will find dynamic content is not evaluated\n</div>\n```\n\nThe above is not valid HTML and will not be parseable. However, the equivalent alternative is to take advantage of the custom [attrs](https://github.com/raptorjs/marko#attrs) attribute as shown below:\n\n``` xml\n<div attrs=\"helper.getTrackingAttributes()\">...</div>\n```\n\nWhere the `helper.getTrackingAttributes` is implemented as shown below:\n\n``` javascript\nfunction getTrackingAttributes() {\n    return {\n        \"attr1\": \"attr1Value\",\n        \"attr2\": \"attr2Value\"\n    }\n}\n```\n\nAlternatively, you could use a custom compile-time transform to add the attributes to allow for something similar to the following:\n\n``` xml\n<div tracking-attrs/>\n```\n\nThe benefit of a custom compile-time transform is that it could add extra validations to handle the case where an element may be missing an `id` or some other attribute.\n\nLet me know if this answers your question or if you would like more help with a custom compile-time transform.\n Hi @SunnyGurnani, I was hoping to put together a sample app to demonstrate custom compile-time transforms to process custom attributes, but I have been pretty swamped. In the meantime, it might be helpful to understand how marko-widgets utilizes compile-time transforms.\n\nHere is the implementation for the marko-widgets compile-time transform:\nhttps://github.com/raptorjs/marko-widgets/blob/master/taglib/widgets-transformer.js#L21\n\nHere is the taglib that registers the transform:\nhttps://github.com/raptorjs/marko-widgets/blob/master/marko-taglib.json#L70\n\nI still hope to improve the docs for this advanced feature, but hopefully this helps in the meantime. Thanks for your patience. \n Closing this issue. I have opened another issue to improve the docs for compile-time transforms to better explain how custom tags and custom attributes can be processed at compile-time: https://github.com/raptorjs/marko/issues/100\n  Currently, Marko is using an HTML parser. An HTML parser treats every attribute value as a `String` type regardless of how it is written.\n\nFor example, with an HTML parser the following lines are all equivalent:\n\n``` xml\n<my-component foo=123/>\n<my-component foo=\"123\"/>\n<my-component foo='123'/>\n```\n\nAs a result of this limitation, Marko relies on custom tag schemas to associate a type with an attribute value or the developer must use the `${<javascript-expression}` syntax. Tag schemas are great for documentation but they are a pain to maintain and they make usage of a custom tag ambiguous. Not to mention, the `${<javascript-expression}` syntax can only be used with attributes that have a `string` type (not `expression`, `boolean`, etc.).\n\nThe author of the `<my-component>` tag can separately declare the type for an attribute and developer viewing a template wouldn't know the attribute type unless you consulted the tag schema:\nIt would be great if the parser used by Marko treated _all_ attribute values as _JavaScript expressions_. Spaces will end an attribute value unless the space is in a quoted string or within a parenthesis/square brackets/curly braces block. Finally, we would support `${<javascript-expression>}` usage within [ES6 Template strings](http://tc39wiki.calculist.org/es6/template-strings/) (i.e. strings \"quoted\" using backticks). The following illustrates what is being proposed.\n\n``` xml\n<my-component number=1/>\n<my-component variable=name/>\n<my-component complex-expression=1+2/>\n<my-component complex-expression-with-spaces=(a + b)/>\n<my-component simple-string=\"hello\"/>\n<my-component simple-string='hello'/>\n<my-component dynamic-string=`hello ${name}`/>\n<my-component string-concatenated=(\"hello \"+name)/>\n<my-component boolean=true/>\n<my-component array=[1, 2, 3]/>\n<my-component object={hello: 'world'}/>\n<my-component function-call=data.foo()/>\n<my-component complex-function-call=(data.foo() + data.bar())/>\n```\n\nNow that we are using a custom parser, we can also improve the syntax for conditionals and looping as @onemrkarthik suggested:\n\n``` xml\n<div if(x > 5)>\n   Do something\n</div>\n\n<ul>\n   <li for(color in colors)>\n       ${color}\n   </li>\n</ul>\n\n<ul>\n   <li for(color in colors; status-var=loop)>\n       ${loop.getIndex+1}) ${color}\n   </li>\n</ul>\n```\n\nHere's what for-loops and conditionals would look like as tags:\n\n``` javascript\n<if(x > 5)>\n    <div>\n        Do something\n    </div>\n</if>\n\n<ul>\n    <for(color in colors)>\n        <li>\n            ${color}\n        </li>\n    </for>\n</ul>\n\n<ul>\n    <for(color in colors; status-var=loop)>\n        <li>\n            ${loop.getIndex+1}) ${color}\n        </li>\n    </for>\n</ul>\n```\n\nThoughts? Concerns?\n Hey @SunnyGurnani, as for JavaScript arrays and objects, we should make sure the following works as well:\n\n``` xml\n<my-component array=[1, 2, 3]/>\n<my-component object={hello: 'world'}/>\n```\n\nI'll updated the proposal. Thanks for the feedback\n Hi @pswar, good question. Yes, any valid JavaScript expression is allowed on the right-hand side and will be copied to the compiled JavaScript template verbatim. I'll update the proposal to make this clear. Thanks for the feedback\n Do you think that for parsing simplicity we should require expressions to be wrapped with parentheses? If you can get it work without parentheses that would be great but I could see how that might be tricky.\n\nFor example, consider:\n\n``` xml\n<my-component object=someFunc (1) />\n```\n\nThat space after `someFunc` might look like a new attribute to the parser.\n\nThis would be safer in all cases:\n\n``` xml\n<my-component object=(someFunc (1)) />\n```\n Hey @philidem, I see where you are coming from, but requiring parenthesis would actually make things more confusing I think. It would be a bad idea to require that variable names be wrapped in parenthesis like the following:\n\n``` xml\n<my-component variable=(foo) />\n```\n\nThe following is better:\n\n``` xml\n<my-component variable=foo />\n```\n\nIn this case, `foo` just happens to be a simple variable expression (not a function call).\n\nI think using a space (outside of a code block) is the best way to delimit attributes.\n Hi @vedam, you bring up a good question regarding the use of backticks for template strings. Adopting backticks would make things more like JavaScript, but my initial reaction is that why not allow number quoted strings to be treated as template strings? We are processing all of these strings at compile-time to find the dynamic parts so there is no performance hit at runtime. Also worth mentioning is that we already support dynamic parts in normal quoted strings so switching to backticks would make things potentially problematic for developers migrating to the new version (migration is also a very important topic that needs to be discussed since this proposal would definitely be a breaking change). The only negative about not using backticks is that developers would need to escape the `$` character inside quoted strings if it is not intended for a dynamic part. I'm leaning towards not supporting backticks, but I would like to get more thoughts from others since I think it is definitely worth discussing some more.\n Hey @vedam, I'm actually okay with supporting backticks, but I would want to transpile the code to its ES5 equivalent so that it works in older browsers that do not support that ES6 feature.\n\nFor example,\n\n``` javascript\n`foo ${name}`\n```\n\nWould be transpiled to the following:\n\n``` javascript\n'foo ' + name\n```\n\nI think the end result would be the same. I agree with your sentiment that the right-hand should just be JavaScript...this makes Marko more intuitive and more powerful.\n\nIf we agree to support backticks, then the question becomes: should we also support dynamic parts in normal quoted strings or should dynamic parts only be allowed in ES6 template strings?\n :+1: for supporting string templates with backticks\n\nI think usage of backticks is a good idea and I think the Marko compiler could easily convert the string template to ES5 JavaScript.\n\nLet's make this happen!\n To @patrick-steele-idem's question, I would suggest only support variable replacement in string templates which are delimited with backticks. That is, don't do variable replacement within strings delimited with `\"` and `'`.\n\nSince migration tool seems necessary, I think we should convert any existing string attribute values to ES6 templates (using backticks).\n Hi @SunnyGurnani, what is being proposed is that the right-hand side is _always_ a JavaScript expression. If it is valid JavaScript expression then it can go on the right hand side and it will actually be copied into the compiled JS verbatim. Even if right-hand value is a simple string it would still be a valid JavaScript expression. I think this will make things the least confusing.\n\nThe only special case is for attributes that are interpreted at compile-time (e.g. `for=\"color in ['red', 'green', 'blue']`)\n\nSeem reasonable?\n Thanks for the comments @pswar. Some related thoughts:\n\n1) I think we are saying the same thing. I'm in favor of _only_ allowing `${...}` in strings that use back ticks as \"quotes\" (not in strings quoted using double or single quotes). For example:\n\n``` xml\n<my-component my-dynamic-string=`Hello ${data.name}!`/>\n```\n\nOn top of that, we would transpile ES6 template strings to an ES5 equivalent.\n\n2) If you want to have a string of `\"[1, 2, 3]\"` then you would just do: `mystring=\"[1, 2, 3]\"`. If you want an Array of `[1, 2, 3]` then you would just omit the quotes: `myarray=[1, 2, 3]`\n NOTE: I have updated the proposal to reflect that `${...}` should _only_ be allowed in ES6 template strings.\n Hi @DanCech, this is still a developing proposal so nothing is set in stone. My thinking is that this is definitely going to be a breaking/major change and old templates will need to be migrated to work correctly with the new Marko version. We would want to make the migration as easy as possible so at a minimum we would need to provide a tool that would automatically update existing Marko templates to conform to the new parser by doing things such as the following:\n\n**Old:**\n\n``` xml\n<my-component foo=\"Hello ${data.name}\"/>\n```\n\n**New:**\n\n``` xml\n<my-component foo=`Hello ${data.name}`/>\n```\n\nAs another example, if a custom \"foo\" attribute is declared as an \"expression\" type then the following conversion would happen:\n\n**Old:**\n\n``` xml\n<my-component foo=\"data.name\"/>\n```\n\n**New:**\n\n``` xml\n<my-component foo=data.name/>\n```\n\n---\n\nBeyond that, if you are concerned that it would be hard to unlearn the old handling of `${...}` in attribute values or that you still prefer all `${...}` to be processed in all strings then that would be a good argument for going back to the old behavior and allowing `${...}` in _all_ quoted strings. Honestly, I could go either way since I see the value in both choices.\n Hi @SunnyGurnani, I think there might be a misunderstanding because with the updated proposal we want to go _closer_ to the simplicity of pure JavaScript. Instead of tag schemas, we are saying that an attribute value is simply a pure JavaScript expression and nothing more and nothing less. Marko has always been close to JavaScript by design but with the latest proposal we want to take it even closer. That is, Marko aims to be a perfect blend of JavaScript and HTML :)\n Also, @SunnyGurnani, the parenthesis are only needed in situations where a \"complex\" expression has spaces that would have otherwise ended the attribute value.\n The idea is that the `foo` attribute in the following Marko template:\n\n``` xml\n<my-component foo=`Hello ${data.name}`/>\n```\n\nWould compile to the following property definition in JavaScript code:\n\n``` javascript\nfoo: \"Hello \" + data.name\n```\n\nNOTE: there would no signs of the backticks in the final compiled output because we want the code to work in ES5 and not just ES6\n\nWe could absolutely interpolate `${...}` in normal quoted JavaScript strings, but then we are slightly changing the rules of JavaScript which may be surprising to some users if we say \"the right-hand side of an attribute is just JavaScript\".\n Hi @SunnyGurnani, technically we don't need to support `${...}` but just just makes the code easier to write and read compared to using string concatenation. \n\nIt did occur to me that we also currently support `$<var-name>` (without the curly braces) which is technically not part of the ES6 template strings spec. We could require `${<var-name>}` but that seems like it would require extra code for end users unnecessarily. That is something we should also discuss. Thanks for the feedback so far!\n A big plus of marko for me is that it can be used with editors that understand HTML/XML (syntactically at least) instead of treating it like a big lump of characters, providing e.g. live linting and structure-aware navigation. In order to do so they need to parse it and that would likely be broken by adopting a custom syntax for attributes.\n And then you have JavaScript template strings: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings\n\nThe problem with `{ ... }` is that it appears all of the time in HTML markup. For example, inline style sheets:\n\n``` xml\n<style>\n.foo {font-weight: bold;}\n</style>\n```\n Read your comment too fast, @aaronshaf. I thought you were suggesting `{ ... }` over `${ ... }` (which other templating languages choose... including Angular and Dust).\n\nMy problem with supporting the following:\n\n``` xml\n<my-component foo={`Hello ${data.name}`} />\n```\n\nIs that I really feel like it would be cleaner if the right-hand side of an attribute is _always_ treated as a JavaScript expression. The following code is a valid JavaScript expression:\n\n``` javascript\n`Hello ${data.name}`\n```\n\nThe following is also a valid JavaScript expression despite the additional surrounding parenthesis added for grouping:\n\n``` javascript\n(`Hello ${data.name}`)`\n```\n\nBut the following is not a valid JavaScript expression:\n\n``` javascript\n{`Hello ${data.name}`}\n```\n\n(curly braces are only valid for block statements)\n\nThat is, you can't do the following in JavaScript:\n\n``` javascript\nvar foo = {`Hello ${data.name}`};\n```\n\nI would rather not introduce new symbols for the sake of introducing new symbols if that makes sense.\n Great suggestion, @onemrkarthik. I like that the `for(color in colors)` and `if(x > 5)` directives match up very nicely to pure JavaScript. I'm going to update the original proposal to include your suggestions. Thanks!\n Fixes. Thanks, @onemrkarthik \n Great feedback @kristianmandrup. What are your thoughts on the fragmentation that would result from supporting two different syntaxes?\n FYI, I started working on a new parser that will better understand JavaScript expressions in HTML attributes (e.g. `<custom message=\"Hello ${name}!\" count=100 large=true complex=(a + b)>`). The key difference between the existing HTML parsers is that attributes will _not_ need to be surrounded by quotes (quotes should only be used if the attribute value will be of type _string_). \n\nSee https://github.com/philidem/htmljs-parser\n\nThe base HTML language is handled just fine but I am still working on:\n- Placeholders within content: `<div>${xyz}</div>`\n- Placeholders within attribute string expressions: `<div class=\"${xyz}\">`\n- Placeholders within placeholders: `<div class=\"${\"abc ${def}\" + 123}\">` (hopefully wouldn't be used very often)\n- Better flow control syntax: `<for(a in b)>`, `<div for(a in b)>`, and `<div if(a === b)>`\n\nThere's also going to be additional work inside Marko to switch to new parser and there will be some breaking changes that need to be addressed with a template migration tool perhaps.\n\nIf anyone has some additional thoughts about the Marko syntax and improvements that could be made, then please let me know! Thoughts and feedback on the parser are also welcome.\n Nice work, @philidem! Thank you for the hard work to make this happen. This will be a huge improvement to Marko and it will be nice to be able to do away the `marko-tag.json` files in most cases.\n\nWe'll definitely have to think about transforming old templates. The big thing is that if an attribute is declared as an `expression` then we will need to transform the template to drop the attribute quotes. For example:\n\nOld:\n\n``` xml\n<my-custom-tag data=\"data.someFunction()\">\n```\n\nNew:\n\n``` xml\n<my-custom-tag data=(data.someFunction())>\n```\n\nWe'll also need to transform `if`, `for`, `else-if` and `else`(?) attributes to use the new directive syntax.\n\nI'm sure there will be some other transformations as well, but it is definitely doable.\n\nThanks again.\n Still actively working on the parser and I'll push some more changes later today. There's still a lot of heavy work to do in Marko to leverage the parser and I think we're leaning toward making breaking changes while also providing a migration tool.\n\nSo nothing in the immediate future will be available but still working hard to get this done! I'll probably have to get feedback from @patrick-steele-idem when it is time make changes to Marko. Perhaps we can document the plan to see if we can help from the community as well.\n We could definitely start on the migration tool right now so that it would be ready and well-tested in time for the switch to the new parser. That's an area where we could definitely use some more help from the community. I'll open another Github issue for that task.\n Thoughts on the following?:\n\n``` xml\n<var foo=1 hello='World'/>\n```\n\nOutput JavaScript:\n\n``` javascript\nvar foo=1;\nvar hello='World';\n```\n\nOld style:\n\n``` xml\n<var name=\"foo\" value=\"1\"/>\n<var name=\"hello\" value=\"'World'\"/>\n```\n Yes, like `<var foo=1 hello='World'/>`!\n\nAlso, I would like to propose this:\n\nDeclare function:\n\n``` xml\n<function doSomething(a, b, c)>\n</function>\n```\n\nCall function:\n\n``` xml\n<doSomething(a, b, c) />\n```\n Also, we currently support simple conditionals in Marko:\n\n``` xml\n<div class=\"{?data.isActive;active}\">\n```\n\nHow should we support that with the new parser?\n\nThis should of course work in the new parser, but it is a little uglier:\n\n``` xml\n<div class=data.isActive?'active':''>\n```\n @yomed one variable per line is a coding style. Doesn't really matter to the compiler and it could go either way.\n Thanks for the feedback @yomed. I'm leaning towards standard JS as well. \n I agree @mlrawlings. That's definitely allowed in Marko v3 and would work as expected. Thanks for pointing that out. I'm definitely looking forward to the new Marko v3 syntax :)\n This feature has been implemented.\n  Hi @aaronshaf, can you please be more specific on which aspects of the Angular 2 syntax interest you? Some of the syntax is related to event binding, one-way versus two-way data-binding, etc.\n\nOn a related note, this has been discussed in a few other issues, but longer term we are thinking about replacing the HTML parser with a new parser that can recognize types of attributes. With an HTML parser every attribute is a string regardless if it is quoted or not. Here's what we are thinking:\n\n``` xml\n<my-component number=1/>\n<my-component expression=(a + b)/>\n<my-component string=\"hello\"/>\n<my-component string-concatenated=(\"hello\"+a)/>\n<my-component boolean=true/>\n```\n\nThoughts?\n Hi @aaronshaf, I decided to create a more formal proposal for introducing typed attributes. Please take a look at the following and provide feedback if you get a chance: https://github.com/raptorjs/marko/issues/90 \n Closing this issue in favor of the proposal for #90. We want to make Marko a more powerful blend of JavaScript and HTML by adopting JavaScript as the type for all HTML attributes.\n    Hi @kobenauf, I am not able to reproduce the issue so there must be something else that is coming into play. What version of `marko` are you using?\n\nI created a simple project to test with and everything renders as expected:\nhttps://github.com/patrick-steele-idem/marko-issue-82\n\nPlease try to reproduce the problem in that project or share your own simple project to reproduce the problem. Thank you.\n Correct, each standalone template needs to be independent and well-formed HTML since each template is parsed using an HTML parser. In practice this is really not a limitation but it does put a constraint on how to code your templates. I recommend using the layout taglib to piece together your page instead of includes. Please see: https://github.com/raptorjs/marko#layout-taglib\n\nPlease let me know if that does or does not work for you. I'm going to go ahead and close this issue, but we can discuss some more here if you would like or in the Gitter chat room: https://gitter.im/raptorjs/marko\n  If I am following correctly then I would agree with @DanCech that you are looking to do a server-side redirect. Please let us know if that is the answer you are looking for or if there is a question more specific to Marko.\n  Thanks for the improved fix!\n New version published with fix: `marko@2.4.3` \n  Try this:\n\n``` javascript\nvar markoCompiler = require('marko/compiler');\nmarkoCompiler.compile(templateStr, templatePath, function(err, compiledCode) {\n    if (err) {\n        return callback(err);\n    }\n    // handle compiledCode here\n});\n```\n\nThe `templatePath` argument is used for resolving taglibs/includes and error reporting; there doesn't actually have to be a template file at this path.\n\nLet me know if that works for you and I can close this issue.\n The \"Try Online\" section of the raptorjs website does client-side compilation of Marko templates:\nhttp://raptorjs.org/marko/try-online/\n\nThe client code that does the compiling is here:\nhttps://github.com/raptorjs/website/blob/master/src/components/app-marko-try-online/widget.js\n\nThis uses [Lasso](https://travis-ci.org/lasso-js/lasso) (formerly named \"Optimizer\") instead of Browserify.\n\nIs not possible to pre-compile your templates during build or on server-side? This would be the most efficient way to compile templates.\n Hi @yazla, it's almost always a bad idea to compile a template in the browser with any template engine (compilation is relatively slow and sending the compiler to the browser introduces a lot of extra overhead). The Marko compiler is designed to run on the server in a Node.js environment where it can access the file system and have access to other taglibs installed via npm. Sorry Marko didn't work out for you, but I think you should reconsider compiling templates in the browser.\n\nJust to be clear, if you do what is suggested in the docs and enable the [markoify](https://github.com/raptorjs/markoify) transform for browserify then the compiled template will automatically be sent down to the browser and your code to render templates will just work. Please see the [Using Browserify](https://github.com/raptorjs/marko#using-browserify) section in the docs. Let us know if you still have questions.\n @yazla, I see where you are coming from, but I still don't see why it is any different to bundle up the compiled templates versus the uncompiled templates. The compiled template is just a standard CommonJS module that exports a function that can be used to load a `Template` instance. For example:\n\n``` javascript\nvar template = require('marko').load(require('./my-template.marko.js'));\n```\n\nThe above code works if the template has already been compiled (i.e. the `*.marko.js` file already exists). In the case where the template is not compiled the `markoify` transform will do that for you automatically if the code to load your template is in the following form:\n\n``` javascript\nvar template = require('marko').load(require.resolve('./my-template.marko'));\n```\n\nIf it helps, you can use the `markoc` command line compiler to compile all of your templates to CommonJS modules beforehand. For example, to compile all templates in the current directory and all sub directories:\n\n``` bash\nnpm install marko --global\nmarkoc .\n```\n\nI hope that helps.\n Hi @tonii75, the compiler does work in the browser but it does require that you use the Lasso.js module runtime in the browser since the Browserify module runtime doesn't support dynamic requires. For the \"Try Marko Online\" feature we are using the compiler in the browser. Here's the relevant code:\nhttps://github.com/marko-js/markojs.com/blob/master/src/components/app-try-marko/index.js\n\nI hope that helps. If you want to discuss further might be better to open a new Github issue.\n  I'm not seeing any failing tests and our CI never reported any failing tests. I will take a look and see if I can reproduce and report back soon.\n\nThanks for reporting the problem.\n @viviangledhill I just did a refresh `npm install` with the latest code of `marko@2.4.0` (`master` branch) and I am still not able to reproduce the problem. Which version of marko are you testing with?\n I also tested with the latest code on the `v1.6` branch and am not able to reproduce.\n Also, one other thought: if you have `marko-layout` or `marko-async` installed as dependencies in your project then you should remove those dependencies. Both `marko-layout` and `marko-async` are core dependencies of `marko` and are already included. Having multiple versions of those modules might be causing problems in your app.\n @viviangledhill Did you try deleting your `node_modules` directory?\n Ok. Interesting. I'll look into making a change to prevent the core taglibs from loading multiple times even though it is an edge case. Thanks for the update and I'm glad you got everything working.\n  Thanks for improving the documentation!\n  @patbegg Can you confirm what version of marko you have installed? This looks to be the same bug that was previously fixed: https://github.com/raptorjs/marko/issues/60\n\nI am not able to reproduce the problem when compiling the following template with the latest version of marko (`v2.3.2`):\n\n``` xml\n<layout-use template=\"./layout.marko\">\n    <layout-put into=\"foo\">\n        <div class=\"c c2 span-8-collapse\">\n            <div class=\"c-inner\">\n                <dl class=\"summary-list\">\n                    <dt>\n                        <h3>Intuitive Features Wrapped Up In a Smart Interface</h3>\n                    </dt>\n                    <dd>\n                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>\n                        <span class=\"blue\">&#9656; </span><a href=\"/features\">Explore the Features</a>\n                    </dd>\n\n                    <dt>\n                        <h3>Pay-as-you-go + Monthly Plans Available</h3>\n                    </dt>\n                    <dd>\n                        <p>Whether you're publishing lots or publishing little we have a plan that's great value and can scale up/down as your needs do, and you're free to cancel anytime.</p>\n                        <span class=\"blue\">&#9656; </span><a href=\"/pricing\">Choose a plan that's right for you</a>\n                    </dd>\n                    <dt>\n                        <h3 class=\"green\">Start Now - No Obligation 14 Day Free Trial</h3>\n                    </dt>\n                    <dd>\n                        <p>We don't expect you to make a decision before you've kicked the tyres and shown your boss so we offer a no obligation 14 day free trial to everyone.</p>\n                        <span class=\"green\">&#9656; </span><a href=\"/features#analytics\" class=\"green\">Bored of reading and want to try it for yourself? Start your free trial now</a>\n                    </dd>\n                </dl>\n            </div>\n        </div>\n    </layout-put>\n</layout-use>\n```\n @patbegg The [view-engine](https://github.com/raptorjs/view-engine) modules were an attempt to normalize the APIs for rendering templates across multiple template engines and to ensure that all templates are loaded as CommonJS modules, but it never really got any traction. We'll fix bugs (and update dependencies when requested), but if you are just using Marko then I would suggest dropping the usage of the `view-engine` modules and just use `marko` directly for loading and rendering templates (no middleman and less overhead). While not officially deprecated, I personally don't think it is worthwhile to continue investing in or using the `view-engine` modules. If you still want to use `view-engine` then please let me know and if you find issues please open the issue against the appropriate Git repo.\n\nIn the mean time I will look into doing a new release for the [view-engine-marko](https://github.com/raptorjs/view-engine-marko) module. Thanks.\n Update: A new major version of `view-engine-marko` was published that tracks `marko@^2`: `view-engine-marko@2.0.0`\n\nTo upgrade to the latest version:\n\n``` bash\nnpm install view-engine-marko@^2 --save\n```\n\nI'm closing the issue for now. Please let me know if you still see issues and we can reopen if needed.\n  Hi Sara,\n\nDoes your `<app-fieldset>` custom tag have a `renderer.js`? If so, which syntax of the following does your `renderer.js` use?\n\n**Option 1:**\n\n``` javascript\nexports.renderer = function(input, out) { ... }\n```\n\n**Option 2:**\n\n``` javascript\nmodule.exports = function renderer(input, out) { ... }\n```\n\nIf you have a circular dependency you need to use **Option 1** since it allows for a partially loaded module to be returned. It is recommended that you always use the syntax shown in **Option 1**. If you do not have a `renderer.js` then I'll probably need more details to reproduce the problem.\n\nThanks,\nPatrick\n This issue was fixed as part of the fixes for #66. Closing this issue, but please let me know if you are still facing problems. Thanks.\n  @schetnikovich Excellent proposal! You did a great job capturing the disconnect between nested tags and how their values are actually used by the parent widget. I think you're exactly right that they're more like attributes since the complex values for the nested tag get stored the same way as attributes (based on the proposals we have so far).\n\nWe need to make sure that this remains valid HTML. I don't think the HTML parser will allow `.` and `@` in the tag names (haven't verified this yet), and for that reason we could try to use XML namespaces instead of a new syntax. For example:\n\n``` xml\n<app-tabs>\n    <app-tabs:tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tabs:tab>\n    <app-tabs:tab label=\"Tab 2\">\n        Content for Tab 1\n    </app-tabs:tab>\n</app-tabs>\n```\n\nAt one name every tag could be put into a namespace but then we decided to require that all tags be named uniquely. For example, instead of creating a namespace with name \"app\" and using `<app:tabs>` we moved toward `<app-tabs>`. I think we need to completely remove that namespace code.\n\nAlso, I wonder if we can support nested tags within nested tags. For example, using the namespace notation:\n\n``` xml\n<app-tabs>\n    <app-tabs:tab>\n        <app-tabs:tab:label>Tab 1</app-tabs:tab:label>\n        Content for Tab 1\n    </app-tabs:tab>\n    <app-tabs:tab>\n        <app-tabs:tab:label>Tab 2</app-tabs:tab:label>\n        Content for Tab 1\n    </app-tabs:tab>\n</app-tabs>\n```\n\nIf the HTML parser will allow `@` and `.` in an HTML tag then it might be worth considering that notation as well. We could fork the HTML parser that we are using. There is a precedence of using `@` to indicate attributes. If we could interpret `@` to mean \"this tag belongs to the closest parent tag\" then we could automatically bind nested tags as attributes to parent tag. If the nested tag is not the direct descendant then maybe we could support a qualifier.\n\nFor example, simple case that doesn't require qualifiers:\n\n``` xml\n<app-tabs>\n    <@tab>\n        <@label>Tab 1</@label>\n        Content for Tab 1\n    </@tab>\n    <@tab>\n        <@label>Tab 2</@label>\n        Content for Tab 1\n    </@tab>\n</app-tabs>\n```\n\nFor example, less simple case that does require qualifiers:\n\n``` xml\n<app-tabs>\n    <if test=\"data.readOnly\">\n        <@app-tabs.tab>\n            <@label>Tab 1</@label>\n            Content for Tab 1\n        </@app-tabs.tab>\n    </if>\n    <@tab>\n        <@label>Tab 2</@label>\n        Content for Tab 1\n    </@tab>\n</app-tabs>\n```\n\nAlso, if we go this route then we'll need to enhance the Marko syntax highlighter for Atom (and possibly create one for other editors such as Sublime Text). Even on Github you can see that the syntax highlighter doesn't know how to highlight tags with `@`.\n\nIf we hit limitations with the HTML parser that we're using then maybe we should consider writing our own because that would provide some other niceties.\n\nI've been interested in doing this:\n\n``` xml\n<app-button size=${data.buttonSize}></app-button>\n```\n\nI'm definitely going to think about this some more!\n Thanks for the proposal, @schetnikovich. I like the idea of having a shorthand for nested tags. \n\nTechnically, HTML 5 does allow any character for the tag name but the first character must match`[a-zA-Z]`. This only made clear if you look at the tokenization spec:\nhttp://www.w3.org/TR/2011/WD-html5-20110113/tokenization.html#tag-open-state\nhttp://www.w3.org/TR/2011/WD-html5-20110113/tokenization.html#tag-name-state\n\nTherefore, unless we fork the parser that we are using and are willing to break syntax highlight in all HTML editors then we should conform to the HTML spec.\n\nI don't consider `<attribute>` as a replacement for repeatable nested tags for two reasons:\n- Marko already supports nested `<attr>` tags that can be used to add HTML attributes to the parent element (not documented, but [here is a relevant test](https://github.com/raptorjs/marko/blob/9e3bbfe882af26e9eda63a5e86e69651a3a3dfcb/test/fixtures/templates/nested-attrs/template.marko#L4-L5))\n- Real attributes cannot be repeated\n\nJust to be clear, the following is already supported:\n\n``` html\n<app-tabs>\n    <app-tab>\n        <attr name=\"label\">Tab 1</attr>\n        Content for Tab 1\n    </app-tab>\n    <app-tab>\n        <attr name=\"label\">Tab 2</attr>\n        Content for Tab 2\n    </app-tab>\n</app-tabs>\n```\n\nRegarding nested tags, I think we should consider the following options:\n\n## Option 1: Use a colon to namespace nested tags:\n\n``` html\n<app-tabs>\n    <app-tabs:tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tabs:tab>\n    <app-tabs:tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tabs:tab>\n</app-tabs>\n```\n\nPros:\n- The colon character is already associated with namespacing and a nested tag is namespaced within a parent element.\n- In the future, we may want to support a short-hand by dropping the parent namespace part (e.g., `<app-tabs:tab>` \u2192 `<:tab>`\n- Most HTML editors should not have a problem with a colon character in a tag name\n\nCons:\n- Looks like XML namespaces (can be a turn off to some people)\n- Colon character is harder to type (requires the `SHIFT` key)\n- More typing\n\n## Option 2: use a period to namespace nested tags:\n\n``` html\n<app-tabs>\n    <app-tabs.tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tabs.tab>\n    <app-tabs.tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tabs.tab>\n</app-tabs>\n```\n\nPros\n- Same as Option 1 _plus_ the period character is easier to type (no `SHIFT` key)\n\nCons\n- Not sure how most HTML editors, parsers and linters will feel about a `period` character in the tag name\n- More typing\n\n## Option 3: Use a dash separator for the nested tag name:\n\n``` html\n<app-tabs>\n    <app-tabs-tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tabs-tab>\n    <app-tabs-tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tabs-tab>\n</app-tabs>\n```\n\n## Option 4: Use no explicit namespacing and just rely on a unique tag name:\n\n``` html\n<app-tabs>\n    <app-tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tab>\n    <app-tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tab>\n</app-tabs>\n```\n\n---\n\nThoughts on which option is best? I'm leaning towards Option 2 (using a period as a separator), but I think we need to see how various tools feel about a period in the tag name.\n @schetnikovich I think I missed the main purpose of your proposal. Your goal was to normalize attributes and nested tags and I think that is a good idea. What do you think of the following variation?:\n\n`app-tabs/marko-taglib.json`:\n\n``` json\n{\n    \"attributes\": {\n        \"orientation\": \"string\",\n        \"tabs\": {\n            \"type\": \"object[]\",\n            \"nested-tag\": {\n                \"name\": \"tab\",\n                \"attributes\": {\n                    \"label\": \"string\",\n                    \"body\": \"string\"\n                }\n            }\n        }\n    }\n}\n```\n\nYou would then have two options for passing in the array of tabs:\n\n## Using the tabs attribute:\n\n``` html\n<app-tabs tabs=\"[ { label: 'Foo', body: 'Content for Foo' }, { label: 'Bar', body: 'Content for Bar' }, ... ]\"/>\n```\n\n## Using the nested tab tag:\n\n``` html\n<app-tabs>\n    <app-tabs.tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tabs.tab>\n    <app-tabs.tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tabs.tab>\n</app-tabs>\n```\n\n---\n\nAlso, there is no right answer on whether or an attribute is more appropriate then a nested tag for passing input to a custom tag. Key differences between attributes and nested tags is that attributes cannot be repeated and attributes cannot contain complex markup. Nested tags do not have those limitations. I believe we need to support both attributes and nested tags.\n Completely agree with your comments @DanCech. Even if it is more typing, I think it is better to have some concept of explicit namespacing and I think it is better to avoid the colon character. I could go either way on `<app-tabs.tab>` vs `<app-tabs-tab>`, but I am leaning towards `<app-tabs.tab>` because the syntax makes it clear that it is a nested tag (i.e. not a top-level tag) and that will hint to the user where the nested tag is defined. \n\nAs for `<attr>`, yes that feature is officially supported. It is an oversight that the documentation does not mention `<attr>` tag. Pull requests welcome :)\n I'm in favor of supporting the dot-notation for using nested tags in your HTML. A short-hand of only using something like `<.tab>` would be great too if we can tweak the HTML parser.\n\nI have a new proposal for `marko-tag.json` that should reduce the characters via a short-hand notation.\n\nI propose that we use \"@\" as a property prefix to identify attributes instead of having to nest them under a `attributes` property.\n\nFor example:\n\n``` json\n{    \n    \"@orientation\": \"string\",\n    \"@tabs <tab>[]\": {\n        \"@label\": \"string\",\n        \"@body\": \"string\"\n    }\n}\n```\n\nThe `@tabs <tab>[]` portion of the example above would be interpreted as:\n\"tabs can also be provided via one or more nested tab tags\"\n\nThoughts?\n Great suggestion @philidem! I really like the much flatter and more concise structure and I think it allows us to capture all of the same information. I do have a few minor concerns:\n1. Symbols have meaning (slightly higher learning curve)\n2. The fact that the `tabs` attribute is an expression type would be implicit instead of explicit\n\nWe can mitigate the first concern by first introducing developers to the long-hand form (that we would always need to support) and then provide the equivalent short-hand syntax.\n\n:+1: for the following:\n\n``` json\n{    \n    \"@orientation\": \"string\",\n    \"@tabs <tab>[]\": {\n        \"@label\": \"string\",\n        \"@body\": \"string\"\n    }\n}\n```\n Just an update. Based on the feedback shared in this Github issue (and the related Github issue of #61) we have made changes to support the following:\n- Better support for tags with a parent/child relationship\n- Shorthand syntax for defining tags and attributes\n\nThe Pull Request is still being reviewed, but you can find the details in the CHANGELOG for the upcoming `marko@2.4.0`: https://github.com/patrick-steele-idem/marko/blob/parent-child/CHANGELOG.md#240\n\nHere's the Pull Request with the changes: #68 \n\nFeedback on this Pull Request is greatly appreciated. Thanks!\n Support for parent/child relationships has been completed. Closing issue.\n  Sorry for the delayed response, but better late than never...\n\nYou have a few options:\n\n**_Option 1) Access req/res properties using `out.stream`**_\n\nAssuming you render the top-level page template directly to an HTTP response stream using `template.render(viewModel, res)`, you can access the HTTP request and response objects by doing the following:\n\n``` javascript\nexports.renderer = function(input, out) {\n    var res = out.stream;\n    var req = res.req; // The \"req\" property is added to the \"res\" object by Express\n}\n```\n\n**_Option 2) Use continuation local storage (CLS)**_\n\nYou could use something like [continuation-local-storage](https://github.com/othiym23/node-continuation-local-storage) (or [request-local](https://www.npmjs.com/package/request-local) which is a small wrapper on top of CLS) to make request-specific information automatically available to all templates and modules, but I've found that CLS can be very problematic. I think you are better off passing in the request-specific globals via the `$global` property or going with Option 1. \n\n---\n\nI hope that helps. Please feel free to reopen this issue if you would like to discuss some more.\n  Currently, to set up a parent/child relationship between custom tags requires a decent amount of code.\n\nHere's an idea how it can be improved:\n\nLet's say we want to achieve the following:\n\n``` html\n<app-tabs orientation=\"vertical\">\n    <app-tab label=\"Tab 1\">\n        Content for Tab 1\n    </app-tab>\n    <app-tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tab>\n</app-tabs>\n```\n\nThis could be described in a single `app-tabs/marko-taglib.json` as shown below:\n\n``` json\n{\n    \"attributes\": {\n        \"orientation\": \"string\"\n    },\n    \"nested-tags\": {\n        \"app-tab\": {\n            \"target-property\": \"tabs\",\n            \"repeated\": true,\n            \"attributes\": {\n                \"label\": \"string\"\n            }\n        }\n    }\n}\n```\n\nIn the renderer, the nested tabs could be accessed using the `input.tabs` property that will be an array:\n\n``` javascript\nexports.renderer = function(input, out) {\n    var tabs = input.tabs;\n    tabs.forEach(function(tab) {\n        // ...\n    });\n};\n```\n\nAnother example:\n\n``` html\n<app-overlay visible=\"false\">\n    <app-overlay-header>\n        This is the header content\n    </app-overlay-header>\n    <app-overlay-body>\n        This is the body content\n    </app-overlay-body>\n    <app-overlay-footer>\n        This is the footer content\n    </app-overlay-footer>\n</app-overlay>\n```\n\nThis could be described in a single `app-overlay/marko-taglib.json` as shown below:\n\n``` json\n{\n    \"attributes\": {\n        \"visible\": \"boolean\"\n    },\n    \"nested-tags\": {\n        \"app-overlay-header\": {\n            \"target-property\": \"header\",\n            \"repeated\": false\n        },\n        \"app-overlay-body\": {\n            \"target-property\": \"body\",\n            \"repeated\": false\n        },\n        \"app-overlay-footer\": {\n            \"target-property\": \"footer\",\n            \"repeated\": false\n        }\n    }\n}\n```\n\nIn the renderer, the nested header, body and footer content could be accessed as shown below:\n\n``` javascript\nexports.renderer = function(input, out) {\n    var header = input.header;\n    var body = input.body;\n    var footer = input.footer;\n\n    console.log(typeof header.renderBody); // Output: 'function'\n    console.log(typeof body.renderBody); // Output: 'function'\n    console.log(typeof footer.renderBody); // Output: 'function'\n};\n```\n I like this concept a lot. It might be helpful to include a snippet of what the compiled output might look like so that we can discuss.\n\nHere are some alternate property names for configuring the nested tag:\n- **target-property:** property (a little shorter)\n- **repeated:** limit (a numeric value), repeatable\n\nAlternatively have just \"target-property\" and use `[]` to denote allowed repeatability:\n- Allow any number of tabs: `target-property: \"tabs[]\"`\n- Allow one tab: `target-property: \"tabs[1]\"`\n- Allow two tabs: `target-property: \"tabs[2]\"`\n- Allow only a single tab: `target-property: \"tab\"`\n\nAlso, perhaps the target property should always be an array and don't require the compiler to check constraints about repeatability of nested tag.\n\nSomething even crazier to avoid some of the JSON clunkiness:\n\n``` json\n{\n    \"attributes\": {\n        \"visible\": \"boolean\"\n    },\n    \"nested-tags\": [\n        \"app-overlay-title => title\",\n        \"app-overlay-header => header[]\",\n        \"app-overlay-body => body[1]\",\n        \"app-overlay-footer => footer[]\"\n    ]\n}\n```\n I like the idea of dropping the `repeated`/`repeatable` property and, instead, just use the `[]` suffix to denote something that is repeatable. However, I don't think we should allow `[<max_count>]`.\n\nI think I prefer `target-property` since it I think it is a little more clear that this is the name of the target property.\n\nI don't think we need the short-hand because it prevents attributes from being defined for the nested tags, but I might be able to be persuaded.\n I am worried that repeatable will be the most common case and that people will forget to add the `[]` to the target property name. That's why I was wondering if we should always assume arrays...\n\nI like the shorthand notation for the most common case. We can implement the longhand approach first and then see if shorthand makes sense.\n Definitely don't want to have nested tags always produce an array. I think that will make the tag renderer more complicated than it needs to be.\n @patrick-steele-idem and I discussed this and the proposal looks more like this:\n\n``` json\n{\n    \"attributes\": {\n        \"orientation\": \"string\"\n    },\n    \"taglib\": {\n        \"tags\": {\n            \"app-tab\": {\n                \"target-property\": \"tabs[]\",\n                \"attributes\": {\n                    \"label\": \"string\"\n                }\n            }\n        }\n    }\n}\n```\n\nBasically, you can now declare taglibs within other tags. If the **target-property** exists for a tag then this creates the parent/child relationship between the parent tag and the child tag. When taglibs are declared within another tag, then that taglib is associated with a parent taglib.\n Thanks for summarizing @philidem. I'm going to start the implementation now.\n  New version of marko published with fix: `marko@2.2.2`\n\nThanks for setting up the project to reproduce the problem and thank you for bringing this problem to our attention!\n  Hey @tindli, I'm going through old issues to do some housecleaning. I am going to go ahead and close this issue. If you think that we need to improve the docs in various areas, I would recommend opening a Github issue for each proposal for better tracking purposes.\n\nFYI, I actually haven't done any extensive tests to see how Google indexes pages with client-side reordering. I would be curious to know the answer to that :) However, we have aimed to only do out-of-order rendering for non-bots and browsers with JS enabled. For bots and non-JS users the recommendation has been to not enable client-side reordering (`client-reorder=\"false\"`). Thanks!\n  Hi @patbegg. We use an HTML parser that follows the same HTML parser rules as a web browser so each templates should be valid HTML documents which means you can't break out the opening and closing tags for an element into separate templates. However, that is not really a problem in practice and the recommended solution is to use the [layout taglib](https://github.com/raptorjs/marko#layout-taglib) to define the skeleton of your page. For your example, you would want to do something like the following:\n\n**_src/pages/home/template.marko:**_\n\n``` html\n<layout-use template=\"../layouts/default/template.marko\">\n    <layout-put into=\"title\">My Page Title</layout-put>\n    <layout-put into=\"body\">content here</layout-put>\n</layout-use>\n```\n\n**_src/layouts/default/template.marko:**_\n\n``` html\n<!doctype html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title><layout-placeholder name=\"title\"/></title>\n</head>\n<body>\n    <app-header/>\n    <div>\n        <layout-placeholder name=\"body\"/>\n    </div>\n    <app-footer/>\n</body>\n</html>\n```\n\nLet me know if that does or does not solve your problem.\n You're welcome. I hope that solution worked out for you.\n  Welcome to Marko and Node, @patbegg! There are two ways to pass along data:\n1. As part of the attributes on the custom tag\n2. As part of global data that is made available to all custom tags (as part of the `out` object).\n\nYou want to take advantage of the second option and provide global data. This is described in the following section of the docs: https://github.com/raptorjs/marko#global-properties\n\nHere's some code that matches your example:\n\n``` javascript\ntemplate.render({\n        $global: {\n            env: 'development'\n        },\n        ... // All other non-global data\n    });\n```\n\nAnd then in any rendered template:\n\n``` html\n<if test=\"out.global.env == 'development'\">\n```\n\nNOTE: `out.global.env` is used instead of `data.env`.\n\nPlease confirm that that solves your problem. Let us know know if you have any other questions.\n Glad that solved your problem. Happy coding!\n  Let's create some logos for Marko!\n\nI'll start things off with a really _rough_ sketch of an idea:\n\n![marko-logo-small](https://cloud.githubusercontent.com/assets/978214/6374693/ce18ec78-bccf-11e4-968f-7c06ae73e8e6.jpg)\n\nPlease feel free to take that idea and make it better or come up with something completely different.\n\nAll logos submitted here will be assumed to be licensed as public domain / [CC0](http://creativecommons.org/about/cc0).\n\nContributors to the final logo will get credit on the main page and a custom printed T-Shirt with the logo on it!\n @pdajlido I like the logo with the pink lettering because it is simpler. I like the visual elements added around the lettering, but what is the meaning of the lattice decoration?\n\nAlso, I think it works well if the graphic part of the logo could be used independent of the \"Marko\" text and for the graphic part to be easily recognizable and unique (if that makes sense).\n Instead of `><><` (which looks like two X's), I would lean more towards `<><>` since it matches how the characters would appear in an HTML tag. Maybe something can be done with a double diamond :)\n I like the upper-right \"M\" logo. Might want to create a companion logo that contains \"Marko\" as well. I do like the diamond concept.\n I didn't see two \"X\"s at first but now that's all I see for \"><><\". Maybe \"<><>\" As @patrick-steele-idem suggested would be better.\n @seangates Even \"dumb\" ideas can inspire something better! What is \"Mark\" though? Just kidding :)\n ![marko-logo-01](https://cloud.githubusercontent.com/assets/978214/6874018/bd5efd20-d479-11e4-9f0e-24ca36bfbc08.png)\n @patrick-steele-idem Maybe \".Marko\" instead of \"Marko.\"\n\nOr maybe \".marko\" (lower case)\n ![marko-logo-01](https://cloud.githubusercontent.com/assets/978214/6875756/1917e016-d487-11e4-9b7e-f7fdc7e6a75a.png)\n![marko-logo-02](https://cloud.githubusercontent.com/assets/978214/6875757/19198b6e-d487-11e4-9bce-098856955d3d.png)\n Hah, nice @pdajlido! I'm curious as to what others think of adding a character to the logo, but I might like it :) A logo with a character seems to have worked well for [Yeoman](http://yeoman.io/)\n Also, for Marko Widgets you could modify the dude to be a mad scientist.\n Thanks for the contributions, @pdajlido! \n ![marko-logo-03](https://cloud.githubusercontent.com/assets/978214/6877648/975279c6-d498-11e4-9b92-bfb4afaf571f.png)\n Hey folks, while we had a some great submissions we decided to get the help of some professionals. We started a logo contest on 99designs.com yesterday and are getting some great submissions:\n\nhttps://99designs.com/logo-design/contests/create-logo-marko-open-source-programming-project-ebay-531819/entries\n\nIf you have any thoughts please share so that we can provide feedback to the designers. Also, after the contest progresses some more I'll share a poll so that we can get more input. Thanks!\n Link to contest entries?\n Accidentally pressed the wrong button... Comment updated with link to contest. Thanks.\n Hi folks,\n\nWe created two separate polls to help us choose a logo (99designs.com limits each poll to only 8 logos each):\n\nPoll 1: https://99designs.com/logo-design/vote-d19zuf\nPoll 2: https://99designs.com/logo-design/vote-3qyhyb \n\nPlease vote! Thanks!\n Hi folks,\n\nThank you all for the votes in the earlier polls! We have one more poll (last one, I promise). Please give your ratings for the last set of designs:\n\nFinal poll: https://99designs.com/logo-design/vote-bdarln\n\nWe will use the final poll to help select the winner. Thanks in advance!\n Marko has a new logo!\n\n![Marko Logo](https://cloud.githubusercontent.com/assets/978214/9265711/774768ca-41f4-11e5-81ee-8fff2cae7e9a.png)\n  @fierysunset Is the problem that the `attribute` input value in your example is not available when using `c-input`? Since you can only have one input to the tag (`c-input` takes precedence in this case) I am guessing that `attribute` will not be passed along. Technically, I think the compiler should flag this as an error.\n\nHere are some alternatives:\n- Put the value of `attribute` into `data.someObj` and use `<tagname c-input=\"data.someObj\" />`. For example:\n\n``` javascript\n<assign var=\"data.someObj.attribute\" value=\"test\" />\n<tagname c-input=\"data.someObj\" />\n```\n- Don't use `c-input` but allow wildcard attributes for `tagname` tag. See https://github.com/raptorjs/marko#defining-attributes\n- Declare a `data` (or some other name) attribute for `tagname` that could be used as an alternate way to provide input. You could then use it like:\n\n``` html\n<tagname data=\"data.someObj\" attribute=\"test\"/>\n```\n\nBecause `data` is not a special attribute, the renderer for `tagname` could access both `data` and `attribute`.\n I think the desired behavior is for the attributes to be merged into the data object provided by `c-input`. The properties provided via attributes should take precedence over the properties in the the `c-input` object. Also, we should not modify the object provided via `c-input` and instead create a new object with the merged properties.\n\nIs that what you are thinking as well, @fierysunset ? Thoughts @philidem ?\n Also, there are plenty of workarounds to avoid making this change, but I do think it is something we should just go ahead and fix since the current behavior of silently discarding the attributes when used in conjunction with `c-input` is not right.\n New version published: `marko@2.3.0`\n  Please fix the jshint error so that the build will pass. Also, jshint plugins/packages for your code editor are really helpful if you don't have one installed.\n\nSee https://travis-ci.org/raptorjs/marko/jobs/54955691\n Published marko@2.1.4\nThanks Sean!\n  How about the following?:\n\n_component-library/marko-taglib.json__\n\n``` json\n{\n    \"taglib-imports\": [\"./package.json\"]\n}\n```\n\nBehind the scenes, Marko would read the `package.json` file to find the `dependencies` object. It would then loop over all of the module dependencies and do the following:\n\n``` javascript\nvar taglibPathToTry = require.resolve('<module_name>/marko-taglib.json');\n\nif (taglibPathToTry) {\n    // Import the current taglib\n}\n```\n\nSound good?\n New versions published with enhancement:\n\n`marko@1.6.7`\n`marko@2.1.0`\n\nTest for new feature are passing, but documentation has not been updated. Sample usage:\nhttps://github.com/raptorjs/marko/blob/5a918e85d0a6e38e0aae4c96f5db273e48e1080b/test/test-project/marko-taglib.json#L102\n\nLet me know if you see any issues.\n  I agree. The interdependencies between modules and out-of-date modules can cause some strangeness. Besides keeping the changelog up-to-date, we should see if there is a way to detect incompatibilities at runtime when in development mode (might be a tooling issue). Perhaps something that could inspect the `package.json` and `node_modules` to look for inconsistencies.\n Hi @barwin. We do maintain a CHANGELOG.md for Marko:  https://github.com/raptorjs/marko/blob/master/CHANGELOG.md\n\nHowever, I think an \"Upgrade Guide\" is needed as well to describe what steps should be taken to upgrade to a new major version. This would be similar to the \"Upgrade Guide\" added for Marko Widgets: https://github.com/raptorjs/marko-widgets/blob/master/CHANGELOG.md#upgrade-guide\n\nAny other suggestions for making the changelog better?\n  # Short answer\n\nYes, you can use Marko with webpack. You just need to enable the [markoify](https://github.com/raptorjs/markoify) Browserify transform for webpack: https://github.com/raptorjs/marko#using-browserify\n\nTo use a browserify transform with webpack you can use the following webpack loader: https://github.com/webpack/transform-loader\n\nIn theory, it would probably be trivial to build a custom Marko loader for webpack, but it is not something we have plans to do. If you or someone else wants to introduce a marko-loader for webpack I'm sure that would be helpful to others.\n\n# Long answer\n\nMarko templates compile down to standard CommonJS JavaScript modules. If you pre-compile all of your templates, then the following code will always work with webpack or any other JavaScript module loader:\n\n``` javascript\nvar template = require('marko').load(require('./template.marko.js'));\n```\n\nYou can pre-compile your templates using the `markoc` command line utility. For example:\n\n``` bash\nmarkoc .\n```\n\nPre-compilation is kind of a pain since you need to typically set up a file watching service (or Gulp/Grunt build script) compile on templates on change, but it works.\n\nTo avoid pre-compilation, we recommend the following code to load a template:\n\n``` javascript\nvar template = require('marko').load(require.resolve('./template.marko'));\n```\n\nThat code will work on the server-side no problem, but Browserify and WebPack do not recognize and support `require.resolve` so you must use a Browserify transform to compile the Marko template automatically and transform the code to the following:\n\n``` javascript\nvar template = require('marko').load(require('./template.marko.js'));\n```\n\nThat's exactly what the following Browserify transform does for you: https://github.com/raptorjs/markoify\n\n---\n\nI hope that answers your question.\n\nAs a side note, you might want to consider using the [optimizer](https://github.com/raptorjs/optimizer) since it is more feature-rich JavaScript module bundler that also supports CSS, code splitting, bundling, lazy loading, etc.\n I've not tried using marko with webpack, but I suspect that the webpack bundler is choking due to the following lines: https://github.com/raptorjs/raptor-logging/blob/b5045817e413e29077fa6fc7ac9de3243167c679/lib/raptor-logging.js#L1-L7\n\nI'm not sure what to suggest in this case, because it seems like a bug in webpack since [lasso](https://github.com/lasso-js/lasso) and [browserify](http://browserify.org/) have no issues. If anyone knows of a workaround for webpack please share.\n Hey @wheresrhys, I think the right thing to do here is to use the [markoify](https://github.com/marko-js/markoify) Browserify transform with Webpack using the transform loader for webpack:\nhttps://github.com/webpack/transform-loader\n\nThe `markoify` transform will auto compile the referenced Marko templates and transform the code to require the generated `.marko.js` file (e.g. `require('./tpl.marko.js')`. Have you given that a try?\n\nUnfortunately, generating the following code would _not_ work since the referenced template may not already be compiled:\n\n``` javascript\n__loadTemplate(require(\"../../components/nav/tpl.marko.js\"), require)\n```\n\nMarko is designed to generate code that always works on the server. We use `require.resolve('./template.marko')` instead of `require('./template.marko')` because the Node.js require extension for Marko is optional. We provide transforms for JavaScript module bundlers so that referenced templates will automatically be compiled and required in. I hope that clarifies.\n Hey @wheresrhys, were you able to get things working with with the `markoify` transform? If you still think it is need to generate compiled code differently such that it doesn't use `require.resolve('./foo.marko')` and instead uses `require('./foo.marko')` then it might be reasonable to offer that as a compile-time option:\n\n``` javascript\nrequire('marko/compiler').defaultOptions.useRequireExtension = true;\n```\n\nI'm doing some housecleaning so I am going to go ahead and close this issue, but please feel free to open another Github issue if you would like to pursue the proposed idea or any other ideas. Thanks!\n @naumovs thanks for sharing. If you are interested in maintaining a loader for others to use I can give you access to `github.com/marko-js/marko-loader`, or the webpack folks may let you maintain the repo at `github.com/webpack/marko-loader`. It would be great to have an official webpack loader for those who want to use webpack (even if the code for the loader is trivial). It would be also good to update the marko docs to describe usage with webpack. Please let me know if you are interested in helping out.\n Marko has been updated to be compatible with wepback. New version published: `marko@3.10.1`\n\nAlso see: https://github.com/marko-js/marko-loader\n > It does work, although I'm still getting Webpack warnings:\n\nYes, for now there is no way to remove the warnings without potentially breaking things. In the next version of Marko we can revisit how the optional \"streams\" module is enabled for the browser.\n  @maxwarch I think you meant to ask this question as a Github issue and not a Pull Request. Please open a Github issue with your question and we can discuss there. Thanks.\n  Topics to include:\n- Creating nested tags using the following:\n  - `body-function`\n  - `import-var`\n- Compile-time transformers\n- Compile-time nodes\n- Tag renderers\n- `marko-taglib.json` and `marko-tag.json`\n The Marko compile-time API is getting a much-needed refactoring with Marko v3. The plan is to finally provide docs for how to extend Marko at compile-time with Marko v3.\n  It is. I think you are running into a problem because you have an instance of `<mytag>` that is _not_ nested within another `<mytag>`. This is causing the scoped `__children` variable to be undefined and you are seeing an error. I suggest the following:\n\n``` json\n\"import-var\": {\n    \"children\": \"typeof __children === 'undefined' ? null : __children\"\n}\n```\n\nThat should avoid the `__children is undefined` error.\n Glad that worked for you and glad to see that you are taking advantage of these features!\n\nAlso, you might want to avoid a generic variable name such as `__children` and instead use `__mytag` or something that makes it clear where the variable came from and avoids possible variable collisions.\n Sounds good. You are right that the documentation related to `body-function`, `renderBody(out)` and `import-var` could be improved. The plan is to eventually provide a separate Markdown document that goes into much more depth on building custom taglibs. There's actually a lot of really interesting things you can do at compile time using a custom transformer that manipulates the AST before the code generation phase. In the mean time, if you have any questions on how to accomplish something please ask here or on Gitter.\n\nI would be curious to check out your wrapper around rendering a React component. I do feel like these two technologies do play nice together and welcome any solutions that can bridge the two.\n\nClosing issue now that you have a working solution.\n  Thanks for the fix! New version published: `marko@1.5.4`\n  Fixed by 90f7dbf8c496d7c65d776042472fdbac646ef0d0\n  This is a known issue with a clean workaround. Marko ignores HTML comments and this breaks IE conditionals since the comments are never written to the output. I've suggested the following workaround in the past:\n\nCreate a custom tag named `<app-html>` that maps to the following renderer:\n\n``` javascript\nmodule.exports = function render(input, out) {\n    var lang = input.lang;\n\n    out.write(\n        '<!DOCTYPE html>' +\n        '<!--[if lt IE 7]> <html class=\"lt-ie9 lt-ie8 lt-ie7\" lang=\"' + lang + '\"> <![endif]-->' +\n        '<!--[if IE 7]> <html class=\"lt-ie9 lt-ie8\" lang=\"' + lang + '\"> <![endif]-->' +\n        '<!--[if IE 8]> <html class=\"lt-ie9\" lang=\"' + lang + '\"> <![endif]-->' +\n        '<!--[if !IE]> --><html lang=\"' + lang + '\"><!--<![endif]\u2014>');\n\n    input.renderBody(out);\n\n    out.write('</html>');\n};\n```\n\nThen in your page layout or page template:\n\n``` html\n<app-html lang=\"en\">\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>Hello World</title>\n        ...\n    </head>\n    <body>\n        ...\n    </body>\n</app-html>\n```\n\nOutput:\n\n``` html\n<!DOCTYPE html>\n<!--[if lt IE 7]> <html class=\"lt-ie9 lt-ie8 lt-ie7\" lang=\"en-us\"> <![endif]-->\n<!--[if IE 7]> <html class=\"lt-ie9 lt-ie8\" lang=\"en-us\"> <![endif]-->\n<!--[if IE 8]> <html class=\"lt-ie9\" lang=\"en-us\"> <![endif]-->\n<!--[if !IE]> --><html lang=\"en-us\"><!--<![endif]\u2014>\n    <head>\n        <meta charset=\"UTF-8\">\n        <title>Hello World</title>\n        ...\n    </head>\n    <body>\n        ...\n    </body>\n</html>\n```\n\nThe benefit of this approach is that the HTML template is cleaner. In theory, we could look into a code change to introduce special handling for IE HTML comments. I'm open to ideas and/or Pull Requests, but hopefully the workaround solves your problem for now.\n New version published with improvement: `marko@2.7.0`\n Thanks for letting me know @yomed. IE conditional HTML comments are automatically preserved now so the workaround discussed is not needed. \n That's true, variables inside comments are not resolved. Does keep the template code cleaner as well. Thanks for sharing.\n  The HTML syntax does not allow attribute types to be distinguished (similar to JSON). This is unfortunate, but short of introducing a new language we must live with a separate schema that informs the compiler of the types of each attribute. Alternatively, we would assume that every attribute is a string and for `$`/`${ }` to change the type (more typing and ugly).\n\nTherefore, in your example, you would just need to do the following:\n\n``` json\n{\n    \"attributes\": {\n        \"viewModel\": \"expression\",\n        \"options\": \"expression\"\n    }\n}\n```\n\nIf we were willing to depart from an HTML parser, we could create our own HTML-like parser that supports the following:\n\n``` html\n<my-component number=1/>\n<my-component expression=(a + b)/>\n<my-component string=\"hello\"/>\n<my-component boolean=true/>\n```\n\nIf we were to go that route then we would lose syntax highlighting/completion/validation support from existing HTML editors and tools like [Emmet](http://emmet.io/).\n Closing issue as I don't think there are any short-term actionable items. If you disagree please feel free to add comments.\n Hey @pedramphp, please provide comments on the following proposal: https://github.com/raptorjs/marko/issues/90 \n  Can you provide more details or a reproducible test? I have not run into a case where the stack trace was not valid. Are you sure the problem does not reside in your code?\n @pedramphp ping. Can you please provide more details?\n I just created a project to try and reproduce and I am not able to reproduce the problem. Here is the error that I see logged:\n\n```\n/Users/psteeleidem/temp/marko-issue-25/components/app-foo/renderer.js:3\n\u00a0 \u00a0 var a = t.a;\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0^\nTypeError: Cannot read property 'a' of null\n\u00a0 \u00a0 at Function.module.exports (/Users/psteeleidem/temp/marko-issue-25/components/app-foo/renderer.js:3:14)\n\u00a0 \u00a0 at module.exports.t (/Users/psteeleidem/temp/marko-issue-25/node_modules/marko/runtime/helpers.js:127:14)\n\u00a0 \u00a0 at render (/Users/psteeleidem/temp/marko-issue-25/template.marko.js:9:5)\n\u00a0 \u00a0 at Object.Template.render (/Users/psteeleidem/temp/marko-issue-25/node_modules/marko/runtime/marko-runtime.js:126:9)\n\u00a0 \u00a0 at Object.<anonymous> (/Users/psteeleidem/temp/marko-issue-25/index.js:2:10)\n\u00a0 \u00a0 at Module._compile (module.js:456:26)\n\u00a0 \u00a0 at Object.Module._extensions..js (module.js:474:10)\n\u00a0 \u00a0 at Module.load (module.js:356:32)\n\u00a0 \u00a0 at Function.Module._load (module.js:312:12)\n\u00a0 \u00a0 at Function.Module.runMain (module.js:497:10)\n```\n\nI don't believe the problem is with Marko. Please check your project setup because I suspect you have some error handling code that is not displaying caught errors correctly. \n  Hi @bkniffler, a custom tag is just a mapping to a `render(input, out)` function that gets resolved at compile time. It's possible to invoke a render function directly instead of going through a custom tag and I think that might help in your case. This is done using the [`<invoke>` tag](https://github.com/raptorjs/marko#invoke) as shown below:\n\n``` html\n<!-- Loop over components, each which as a render function and an input model -->\n<div for=\"item in data.components\">\n   <!-- Invoke the render function for the current item using the current item's input model -->\n    <invoke function=\"item.render(item.value, out)\"/>\n</div>\n```\n\nNOTE: A loaded template also has a `template.render(input, out)` function so you could also do the following:\n\n``` html\n<invoke function=\"item.template.render(item.value, out)\"/>\n```\n\nI'm not sure if you are using the RaptorJS Optimizer or Browserify, but the RaptorJS Optimizer supports dynamic requires while Browserify does not. Therefore, if you are using the RaptorJS Optimizer then you can send down all of the templates that may be needed on the client and dynamically require them instead of relying only on static code analysis. You can use a glob pattern to send down all of the templates in a directory as shown below:\n\n_optimizer.json_\n\n``` json\n{\n    \"dependencies\": [\n        \"*.marko\"\n    ]\n}\n```\n\nThose templates could be dynamically required doing something similar to the following:\n\n``` javascript\nvar template = require('marko').load(require.resolve('./components/' + componentName + '/template.marko'));\n```\n\nNOTE: We currently don't register the `*.marko.html` extension for the [optimizer-marko](https://github.com/raptorjs/optimizer-marko) plugin so you might need to send a PR for the plugin.\n\nDoes this help in your use case? If not, please provide more details.\n @bkniffler I would recommend an approach that uses a single component/tag that simply delegates rendering to multiple other components/renderers.\n\nFor example, I often run into the use case of choosing a template based on a `type` or `layout` attribute. Consider the case where you might want to do something like this:\n\n``` xml\n<app-message type=\"info\">${data.message}</app-message>\n<app-message type=\"warning\">${data.message}</app-message>\n<app-message type=\"error\">${data.message}</app-message>\n```\n\nDepending on your use case, this might be simpler than having three separate tags (`app-info-message`, `app-warning-message`, and `app-error-message`, for example).\n\nIn this example, `app-message` may have a template for each type of message. The `app-message` renderer would simply choose the right template based on the type.\n\nThe `app-message` component would have a `renderer.js` with something like this:\n\n``` javascript\nvar marko = require('marko');\n\nvar TEMPLATE_BY_TYPE = {\n    info: marko.load(require.resolve('./info.marko')),\n    warning: marko.load(require.resolve('./warning.marko')),\n    error: marko.load(require.resolve('./error.marko'))\n};\n\nmodule.exports = function(input, out) {\n    // find the template that maps to the given type\n    var template = TEMPLATE_BY_TYPE[input.type];\n    if (!template) {\n        throw new Error('Invalid type \"' + input.type + '\".');\n    }\n\n    // now render the template\n    template.render(input, out);\n}\n```\n\nIn summary, I think this logic of choosing a template would be easier to read if the developer moved this logic to the renderer. I don't think there would be much benefit of implementing this \"choosing\" logic in the template.\n\nPlease let me know if you still don't think the solution from @patrick-steele-idem or myself would help in your use case (or if you are still looking for a more elegant solution).\n  The meaning of `render-tag-if` is unclear since it could easily just be interpreted to be the same as `if`. That is, `render-tag-if` doesn't make it clear that only the body will render if the condition evaluates to `false`. `body-only-if` makes it clear that only the body content will be rendered (not the surrounding tag) if the condition evaluates to `true`.\n\nSince `body-only-if` will rarely be used, I'm inclined to keep its usage as-is. What do you think?\n I didn't know about `body-only-if` until I saw this issue, but after learning about it I would recommend keeping `body-only-if`. For me, the intention is to only render the body (and less about only rendering the tag). Kind of confusing but I think it works :)\n @pedramphp, I agree with you that `body-only-if` feels a little backwards, but I am not seeing a better name. Thank you for the suggestion, but let's stick with `body-only-if` unless you have another idea on how this functionality could be provided in a less confusing way. \n  Syntax highlighting for Marko templates in Sublime would be great. Personally, I switched to from Sublime to Atom and am happier with Atom. I don't remember the exact method for creating a new language file for Sublime, but here is the grammar file that I created for Atom:\nhttps://github.com/raptorjs/atom-language-marko/blob/master/grammars/marko.cson\n\nI'm sure it is possible to write a tool that converts the Atom grammar into a Sublime grammar, but it is not something that I have time to do right now. I think it would be great if someone from the community could contribute Sublime support.\n That's awesome, @merwan7... thank you for the contribution! Do you mind submitting a PR to marko to add `sublime-marko` to the [Tools](https://github.com/marko-js/marko#tools) section in the marko `README.md` file?\n\nOut of curiosity, how did you go about converting the Atom grammar file to work for Sublime? Was there an existing tool that you used? \n\nThanks again!\n Just closing old issues... Syntax highlighting in Sublime now works for Marko thanks to the PR submitted by @merwan7 that was merged: https://github.com/wbond/package_control_channel/pull/4652\n  I have no objections to adding support for `*.marko.html` except that most editors only let you set file associates based on the last part. Therefore, you would likely lose the ability to have custom syntax highlighting for Marko template files and instead have to settle for HTML syntax highlighting, which is not too terrible I suppose.\n\nPlease see my comment I added to your Pull Request and please make sure the tests pass by running `npm test`. \n\nThanks for sending the PR.\n New version published: `marko@1.4.0`\n Thanks for the PR, @bkniffler. Updated code looks good.\n  Yes, you are correct. Sorry for the missing docs. I don't mind adding the missing docs, but Pull Requests are always welcome.\n  Example:\n\n``` html\n<some-component c-input=\"{ message: 'Hello World' }\"/>\n```\n\n_src/components/some-component/renderer.js:_\n\n``` javascript\nmodule.exports = function render(input, out) {\n   var message = input.message; // 'Hello World'\n}\n```\n\n\"template-data\" is similar, but it only works for includes. Only one should be documented for consistency.\n FYI, in Marko v3 we are moving to the following syntax:\n\n``` xml\n<some-component({message: 'Hello World' })/>\n<some-component(data.someObject)/>\n```\n\nWill keep issue open because we still need to update the docs.\n  Custom tags are resolved to a \"renderer\" module at compile-time so it is not possible to support something like `<app-test-${path} ...>`. However, a custom tag is mapped directly to a renderer and you can invoke the renderer directly to have the HTML be written to the output stream. One option is to create a custom tag that delegates rendering to the appropriate renderer based on some internal logic. Something like the following:\n\n`src/components/app-test/renderer.js`:\n\n``` javascript\nvar rendererA = require('./variant-A/renderer');\nvar rendererB = require('./variant-B/renderer');\nvar rendererC = require('./variant-C/renderer');\n\nmodule.exports = function render(input, out) {\n    if (input.type === 'A') {\n        rendererA(input, out);\n    } else if (input.type === 'B') {\n        rendererB(input, out);\n    } else if (input.type === 'C') {\n        rendererC(input, out);\n    }\n}\n```\n\nThis nice thing about that approach is that to the outside world there is only a single tag, but internally the custom tag renderer can delegate to the appropriate implementation.\n\nLet us know if that works or doesn't work for you.\n ping. \n\nCan you please let me know if the proposed solution meets your needs so that I can close this issue or keep it open? Thanks.\n  Hi @mattfysh, Marko will remove unnecessary whitespace based on some builtin rules, by default. These rules are partially based on the rules that browser's use to normalize whitespace and partially based on the goal of allowing nicely indented markup. These rules are as follows:\n- For whitespace before the first child element: `text = text.replace(/^\\n\\s*/g, '')`\n- For whitespace after the last child element: `text = text.replace(/\\n\\s*$/g, '')`\n- For whitespace between child elements: `text = text.replace(/^\\n\\s*$/g, '')`\n- Any contiguous sequence of whitespace characters is collapsed into a single whitespace character\n\nFYI, the whitespace removal happens in the following code:\n[marko/compiler/TextNode.js:112](https://github.com/raptorjs/marko/blob/71ffdf3e4cce257fbd0c09d072462e1e04a207bb/compiler/TextNode.js#L112-L124)\n\nIt's possible to disable whitespace removal on a per-element basis using a special attribute applied to a parent element. It's also possible to disable all whitespace removal by changing an option for the compiler. Unfortunately the docs are currently lacking for both these options so I'll describe them below for now:\n\nOption 1) Disable whitespace removal using the `c-whitespace` attribute:\n\n``` html\n<div c-whitespace=\"preserve\">\n    <my-first-tag>\n    <my-second-tag>\n</div>\n```\n\nOption 2) Disable all whitespace removal by changing a compiler option\n\n``` javascript\nrequire('marko/compiler').defaultOptions.preserveWhitespace = true;\n```\n\nAlso, you can avoid whitespace removal by avoiding the new line character. For example, the following whitespace between the elements will be preserved:\n\n``` html\n<my-first-tag> <my-second-tag>\n```\n\nI'll work on adding some formal documentation on the whitespace removal rules. Do these options meet your needs or are you looking for a different solution?\n @mattfysh, I added some documentation to clarify how Marko deals with whitespace:\nhttps://github.com/raptorjs/marko#whitespace\n\nPlease let me know what you think.\n\nThanks,\nPatrick\n Perhaps we should add a tag that can be used to enable preservation of whitespace.\n\nFor example, something like this:\n\n``` xml\n<preserve-whitespace>\n<my-first-tag>\n<my-second-tag>\n</preserve-whitespace>\n```\n\nSometimes there isn't a convenient parent tag to add the `c-whitespace=\"preserve\"` attribute\n I agree regarding introducing a `<preserve-whitespace>` tag. I have added Issue #11 to the backlog.\n Marking issue as closed since additional docs were added clarifying the whitespace rules for Marko. If there are still issues please let us know. Thanks.\n  From looking at the code it does look like the taglib loading relies on a path to json file. I'll investigate making changes to allow loading a taglib from object in memory.\n Just to elaborate on @philidem comments (and this may be more information than you need), we only want to support declarative registration of custom tags for the following reasons:\n1. Tags need to be discovered at compile time (the templates compile differently based on the set of known tags) and the tags need to be available at runtime (which may be on the server or the client) and it would be awkward to have to register custom tags in both places.\n2. The `markoc` command line compiler should to be able to compile templates without running any user JS code (that is tags need to be discovered based on a declarative mechanism)\n3. There is no single lookup for all tags and custom tags are discovered relative to a template's location on disk. Among other things, this allows installed modules to have their own custom tags that would not pollute the parent application.\n4. Templates are compiled such that custom tag renderers are `require`'d and this allows client-side JavaScript module bundlers to automatically include only the tags that are needed by a compiled template module\n\nI can't think of any reason that you would need to programmatically register new tags at runtime, but if you share more details about your use case then maybe I can offer better help.\n\nThanks for the feedback. Let us know if you have any more questions.\n Also, if you have ideas on how we can improve how tags are registered then please feel free to share, but there is a requirement that it needs to be declarative (for the reasons above).\n I did investigate this and I came to the same conclusion as Patrick. I think it would have technically been possible to support the definition of tags through a code change but this goes in the opposite direction of modularizing tags and the components that use them. The discovery mechanism for finding tags is an important feature of Marko that allows tags/components to be shared without having to require users to manually register tags. For this reason, I would discourage manually registering tags and instead rely on the discovery of tags from `marko-taglib.json` and `marko-tag.json` files. I would also like to know if relying on these files prevents your project from using Marko effectively.\n  On the server-side, the templates utilize the NodeJS module loader so that code in the template can leverage `require()` just like any other CommonJS module. In order to allow requiring modules via relative path, the template module itself needs to have a path which is why it is written to disk. Also, the copy that is written to disk is used for the up-to-date check.\n\nI wonder if there is some hackery that we could do to fake module loading of in-memory code and making it think it is at a specific path.\n\nA while ago, for development in NodeJS, I tried to use a technique of strategically removing modules from the cache but this caused a lot of inconsistencies and I eventually decided to just restart the app (I was really hoping to find a solution that clears the cache...). Perhaps you should consider the route of restarting the app when a source file changes?\n The fact that Marko writes the compiled template to disk in order to load them has very little to do with preventing changes to a template from being reflected without a restart. In fact, in the earlier versions the loader did not write the compiled source to disk and instead used Node.js internals to load the compiled module directly from a source String (see https://github.com/raptorjs/marko/blob/v0.2.0-beta/runtime/lib/loader.js#L6-L17). In case you are curious, the reason we switched to loading compiled templates from disk is so that stack traces would be accurate and it also makes debugging much easier for developers (compiled templates can be debugged just like any other loaded JavaScript modules).\n\nWhat prevents changes to a template from being immediately reflected is the fact that once the template is loaded there are no checks at each render call to verify if the template is up-to-date and there is no file watching service to invalidate loaded templates. Both of these approaches would add overhead and bring in additional dependencies. With Marko, templates are typically loaded once when a parent module is first required and loaded templates only hold a reference to the JavaScript render function and nothing else. The only cache is the Node.js module cache and the templates are typically referenced as part of the closure of another function. To reload a template without a restart you would need to delete the template module from the `require.cache` and you would need to call `load()` again for all of the templates that were modified.\n\nWith that said, it's obviously very important for template changes to be reflected immediately. Otherwise, using Marko would be extremely painful. At eBay, we have had a lot of success with using the [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh) module to automatically restart the server whenever files are modified and the browser-refresh module starts a Web Sockets server to tell web browser pages to reload. This works for all types of resources (CSS/Less/Stylus, JavaScript, Marko templates, Dust templates, etc.) and it ensures that the application is always in a good state since we don't have to worry about messing with Node.js internals to hot reload modules. As long as the server restarts quickly (and it should) then this makes development very productive.  Also, with the browser-refresh module you don't have to change how you structure your application at all. When you want to use the browser-refresh module then you simply use the `browser-refresh` CLI to run the Node.js process, otherwise you just use the standard `node` executable. If you want to try out [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh) with a real app that uses Marko, please check out the sample [weather](https://github.com/raptorjs/raptor-samples/tree/master/weather) app.\n\nIf you really don't want to rely on server restarts then you could monkey-patch the loader that `marko` uses to add additional hooks to reload modified templates. Perhaps something like the following:\n\n``` javascript\nrequire('marko-hot-reload').enable(require('marko'));\n```\n\nInternally, `marko-hot-reload` module could use [chokidar](https://github.com/paulmillr/chokidar) to detect changes to Marko templates and loaded templates would need to have additional code that runs before each render call to see if the loaded template is still up-to-date. I would advise against going that route and to use [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh) instead, but there are definitely options.\n\nIf you have any thoughts please let me know.\n We could make it an option to disable writing a compiled template to disk, but writing the compiled template to disk also provides the benefit that the template does not need to be recompiled if the server is restarted which is kind of nice. I agree that the extra noise of additional files is kind of annoying, but it's a tradeoff. Atom will at least grey out files that are .gitignored (with the option to hide the completely). \n\nRegardless of if a template is written to disk or not, the resulting module still needs to be loaded through the Node.js module loader. Since a compiled template is loaded through the Node.js module loader you would still need to clear the module from the `require.cache` in order for the template to be reloaded (compiled Marko templates rely heavily on the `require` function so they have to go through the Node.js module loader). Please give [browser-refresh](https://github.com/patrick-steele-idem/browser-refresh) a try and let us know if that doesn't work out for you.\n\nIf you were interested in making writing a compiled to disk optional then I would consider a pull request since I think that is a harmless feature. Also, I am not opposed to a separate module enabling hot reloading of Marko templates, but I would rather not pollute the core marko module with that functionality. I'm going to go ahead and close this issue unless you still think there needs to be something done.\n I decided to reopen this issue. After giving it some thought I came up with a clean way to enable template reloading without requiring a full server restart. I'm working on the solution now.\n I have completed the work to add support for Marko template hot-reloading. Usage:\n\n``` javascript\nrequire('marko/hot-reload').enable();\nrequire('fs').watch('somedir', function (event, filename) {\n    if (/\\.marko$/.test(filename)) {\n       require('marko/hot-reload').handleFileModified(filename);\n    }\n});\n```\n\nIf hot-reloading is enabled (which should only be done in development), the loaded templates are monkey-patched to detect file changes. If a Marko-related file is modified then the appropriate caches are cleared out so that templates are correctly reloaded. \n\nMarko still depends on an external file watching service to detect file modifications. That is, Marko does _not_ start its own file watching service to detect changes to `*.marko` files. I added `browser-refresh` integration. If `browser-refresh` is used to start your app then it is already starting a file watching service and the `marko` module can be notified by the `browser-refresh` module when a file is modified (via inter-process communication). To enable hot-reloading _and_ `browser-refresh` integration, the following code should be used:\n\n``` javascript\nrequire('marko/browser-refresh').enable();\n```\n\nNOTE: If the app was _not_ started using `browser-refresh` then the above code will be a no-op.\n\nFor more details, please see: https://github.com/patrick-steele-idem/browser-refresh#controlling-reloading\n I'll try to reproduce and get back to you.\n\nOn a related note, I recommend doing the following:\n\n``` javascript\nvar formulaTemplate = marko.load(require.resolve('./web/marko/formula.marko'))\napp.get('/formula', function(req, res) {\n  formulaTemplate.render({}, res)\n})\n```\n\nThe `stream()` method will unnecessarily produce an intermediate stream when it is more efficient to write to the existing `res` stream.\n @Solido, I was not able to reproduce even after installing io.js (v1.0.2). What version of express and marko are you using. Do you have a simplified project that I could try? \n Hi @Solido, I'll try to answer your question below, but I recommend joining the Marko Gitter chat room for more realtime help: https://gitter.im/raptorjs/marko\n\nGitter provides great desktop and mobile apps. Definitely recommend checking it out.\n\n<hr>\n\nWith Marko you must explicitly pass along any required data to the other templates. Each template gets its own `data` variable.\n\nYou didn't share all of your code, but if you are using the `<layout-use>` tag then you can just pass along any data to the target template by doing something similar to the following:\n\n``` html\n<use-layout template=\"path/to/some/layout.marko\" some-data=\"foo\">\n  <!-- ... -->\n</use-layout>\n```\n\nThe target layout template can then access the data as shown below:\n\n_path/to/some/layout.marko:_\n\n``` html\n<div>\n  $data.someData\n</div>\n```\n\nOutput:\n\n``` html\n<div>foo</div>\n```\n\nThere's also a feature to support \"global\" data that is automatically made available to all templates. This feature is supported, but it needs to be documented. The usage is shown below:\n\n``` javascript\nvar template = require('marko').load('template.marko');\ntemplate.render({\n    $global: {  // $global is special\n      someData: 'foo'\n    }\n  }\n```\n\nYou can then access that data in any of your templates using `out.global`:\n\n``` html\n<div>\n  $out.global.someData\n</div>\n```\n  Great. Thank you for the corrections.\n", "text_all_count": 84233, "text_word_token": ["Nice", "find", "Thanks", "Looks", "good", "to", "me", "Thanks", "for", "work", "on", "this", "Published", "marko", "NUMBER", "I", "think", "this", "be", "fair", "NUMBER", "Would", "you", "be", "interested", "in", "work", "on", "this", "I", "think", "silent", "would", "be", "a", "good", "option", "for", "this", "NUMBER", "silent", "should", "be", "set", "to", "false", "by", "default", "NUMBER", "nahtnam", "I", "would", "be", "more", "than", "happy", "to", "help", "you", "implement", "this", "feature", "NUMBER", "We", "love", "to", "welcome", "new", "contributors", "NUMBER", "First", "off", "you", "will", "need", "to", "add", "the", "silent", "option", "to", "the", "enable", "function", "LINK", "js", "marko", "blob", "fe", "NUMBER", "da", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cebea", "src", "browser", "refresh", "NUMBER", "js", "L", "NUMBER", "As", "I", "said", "before", "the", "silent", "option", "should", "default", "to", "false", "NUMBER", "You", "will", "need", "to", "pass", "the", "options", "to", "the", "hotReload", "NUMBER", "handleFileModified", "NUMBER", "function", "call", "NUMBER", "The", "hotReload", "module", "can", "be", "find", "here", "LINK", "js", "marko", "blob", "master", "src", "hot", "reload", "NUMBER", "js", "L", "NUMBER", "From", "there", "it", "s", "as", "simple", "as", "only", "run", "the", "console", "NUMBER", "log", "statements", "if", "silent", "be", "not", "falsy", "NUMBER", "If", "you", "would", "like", "to", "work", "on", "this", "or", "have", "any", "additional", "question", "let", "me", "know", "We", "d", "love", "to", "get", "your", "help", "NUMBER", "nahtnam", "Contributions", "be", "greatly", "appreciated", "and", "we", "be", "happy", "to", "answer", "any", "question", "you", "might", "have", "relate", "to", "this", "propose", "change", "NUMBER", "I", "also", "agree", "it", "would", "be", "a", "good", "addition", "NUMBER", "nahtnam", "here", "s", "the", "link", "to", "the", "contributors", "guide", "LINK", "js", "marko", "blob", "master", "NUMBER", "github", "CONTRIBUTING", "NUMBER", "md", "All", "of", "the", "latest", "code", "be", "on", "master", "NUMBER", "You", "would", "want", "to", "fork", "the", "repo", "and", "create", "a", "new", "branch", "from", "master", "to", "implement", "the", "new", "feature", "and", "then", "submit", "a", "pull", "request", "use", "your", "new", "branch", "as", "the", "source", "NUMBER", "nahtnam", "Great", "to", "hear", "that", "you", "will", "work", "on", "it", "You", "do", "not", "need", "to", "add", "the", "option", "to", "runtime", "NUMBER", "Let", "us", "know", "if", "you", "have", "any", "other", "question", "NUMBER", "NUMBER", "cc", "patrick", "steele", "idem", "mlrawlings", "mlrawlings", "Can", "you", "please", "review", "and", "merge", "Looks", "like", "the", "fail", "build", "be", "an", "unrelated", "timeout", "NUMBER", "Thanks", "for", "the", "all", "of", "the", "fix", "Hey", "newyork", "anthonyng", "thanks", "for", "report", "the", "problem", "with", "the", "docs", "NUMBER", "Marko", "allows", "TAG", "and", "I", "think", "we", "have", "gotten", "use", "to", "that", "but", "you", "be", "right", "that", "we", "should", "update", "the", "docs", "since", "we", "be", "referring", "to", "a", "standard", "HTML", "file", "NUMBER", "If", "you", "can", "send", "a", "PR", "to", "update", "the", "following", "file", "that", "would", "be", "greatly", "appreciated", "LINK", "js", "marko", "blob", "master", "docs", "webpack", "NUMBER", "md", "Thanks", "again", "First", "off", "the", "following", "be", "not", "valid", "marko", "TAG", "That", "prevents", "the", "HTML", "tag", "from", "be", "parsed", "NUMBER", "The", "initial", "space", "after", "the", "TAG", "That", "be", "a", "separate", "issue", "though", "NUMBER", "It", "be", "somewhat", "of", "an", "odd", "restriction", "but", "the", "ID", "for", "the", "root", "HTML", "element", "of", "a", "UI", "component", "needs", "to", "be", "static", "and", "we", "need", "to", "provide", "a", "better", "error", "message", "NUMBER", "sorry", "about", "that", "NUMBER", "The", "reason", "for", "this", "be", "that", "a", "UI", "component", "be", "uniquely", "identified", "by", "its", "ID", "and", "if", "the", "ID", "change", "during", "a", "re", "render", "then", "diffing", "patching", "will", "break", "NUMBER", "Wrapping", "everything", "in", "a", "TAG", "without", "the", "id", "attribute", "will", "fix", "the", "state", "be", "not", "defined", "error", "and", "it", "be", "recommended", "to", "have", "a", "single", "top", "level", "HTML", "element", "for", "now", "at", "least", "NUMBER", "see", "below", "marko", "class", "onCreate", "this", "NUMBER", "ate", "id", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "Typically", "you", "want", "to", "always", "avoid", "assigning", "an", "id", "to", "any", "HTML", "element", "when", "use", "Marko", "NUMBER", "You", "should", "either", "use", "key", "to", "assign", "a", "scoped", "ID", "or", "use", "class", "for", "targeting", "styling", "NUMBER", "Marko", "do", "not", "currently", "correctly", "handle", "multiple", "dynamic", "top", "level", "HTML", "elements", "correctly", "in", "all", "cases", "NUMBER", "We", "be", "work", "on", "a", "fix", "for", "that", "NUMBER", "austinkelleher", "mlrawlings", "can", "either", "of", "you", "look", "into", "improving", "the", "error", "message", "if", "the", "ID", "for", "the", "top", "level", "HTML", "be", "dynamic", "Thanks", "NUMBER", "I", "m", "keep", "this", "issue", "open", "because", "we", "be", "not", "provide", "a", "good", "error", "message", "to", "the", "user", "NUMBER", "patrick", "steele", "idem", "I", "ll", "get", "to", "work", "on", "this", "either", "later", "tonight", "or", "tomorrow", "NUMBER", "We", "ll", "investigate", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "I", "m", "not", "able", "to", "reproduce", "the", "issue", "use", "the", "marko", "webpack", "LINK", "js", "samples", "marko", "webpack", "sample", "app", "NUMBER", "I", "tried", "use", "both", "webpack", "NUMBER", "and", "webpack", "NUMBER", "and", "I", "also", "use", "npm", "NUMBER", "NUMBER", "Could", "you", "provide", "a", "sample", "app", "to", "reproduce", "the", "problem", "or", "more", "details", "on", "your", "setup", "I", "was", "not", "able", "to", "reproduce", "the", "issue", "use", "the", "marko", "webpack", "LINK", "js", "samples", "marko", "webpack", "sample", "app", "NUMBER", "I", "tried", "use", "both", "webpack", "NUMBER", "and", "webpack", "NUMBER", "and", "I", "also", "use", "npm", "NUMBER", "NUMBER", "Could", "you", "provide", "a", "sample", "app", "to", "reproduce", "the", "problem", "or", "more", "details", "on", "your", "setup", "Thanks", "for", "provide", "the", "project", "arthurchenn", "austinkelleher", "can", "you", "please", "take", "a", "look", "at", "the", "provide", "project", "to", "reproduce", "the", "problem", "Thanks", "I", "see", "client", "side", "routing", "and", "scoped", "CSS", "as", "two", "gaps", "that", "we", "should", "fill", "whether", "it", "be", "with", "a", "new", "marko", "specific", "solution", "or", "integrating", "a", "third", "party", "solution", "NUMBER", "We", "will", "be", "tackling", "the", "scoped", "CSS", "this", "sprint", "and", "we", "plan", "to", "do", "some", "more", "research", "and", "investigation", "for", "the", "client", "side", "routing", "piece", "NUMBER", "In", "the", "meantime", "maybe", "check", "out", "the", "following", "library", "for", "client", "side", "routing", "LINK", "little", "router", "With", "the", "approach", "that", "redux", "little", "router", "provides", "there", "would", "not", "necessarily", "need", "to", "be", "any", "direct", "integration", "of", "the", "routing", "library", "with", "the", "view", "library", "although", "they", "do", "provide", "React", "helpers", "NUMBER", "Seems", "like", "a", "promising", "approach", "but", "I", "have", "not", "tried", "that", "library", "myself", "NUMBER", "anupdineout", "Here", "be", "some", "resources", "for", "moving", "from", "Marko", "v", "NUMBER", "to", "Marko", "v", "NUMBER", "ROADMAP", "NUMBER", "md", "LINK", "js", "marko", "blob", "ed", "NUMBER", "f", "NUMBER", "a", "NUMBER", "af", "NUMBER", "f", "NUMBER", "cc", "NUMBER", "e", "NUMBER", "a", "NUMBER", "e", "NUMBER", "e", "NUMBER", "a", "NUMBER", "ROADMAP", "NUMBER", "md", "may", "be", "slightly", "inaccurate", "Migration", "guide", "LINK", "by", "ianvonholt", "Medium", "Article", "Marko", "NUMBER", "be", "here", "LINK", "mlrawlings", "marko", "NUMBER", "NUMBER", "be", "here", "NUMBER", "c", "NUMBER", "f", "NUMBER", "d", "anupdineout", "In", "Marko", "NUMBER", "u", "r", "proving", "state", "View", "architecture", "We", "can", "eliminate", "Marko", "Widgets", "Marko", "Widgets", "was", "merge", "into", "Marko", "and", "that", "has", "made", "things", "a", "lot", "more", "seamless", "NUMBER", "cc", "charlieduong", "NUMBER", "ui", "components", "playground", "be", "use", "marko", "starter", "under", "the", "hood", "NUMBER", "marko", "starter", "be", "use", "lasso", "NUMBER", "Perhaps", "this", "isn", "t", "clear", "enough", "NUMBER", "Right", "now", "we", "aren", "t", "actively", "push", "people", "to", "use", "marko", "starter", "apps", "for", "production", "but", "in", "the", "future", "we", "plan", "to", "encourage", "this", "NUMBER", "What", "do", "you", "think", "patrick", "steele", "idem", "mlrawlings", "Should", "we", "switch", "the", "link", "to", "the", "marko", "lasso", "sample", "Thanks", "This", "PR", "introduces", "a", "new", "dist", "directory", "that", "gets", "generate", "during", "a", "publish", "use", "babel", "and", "a", "set", "of", "babel", "plugins", "NUMBER", "Initially", "we", "be", "only", "minifying", "property", "names", "but", "we", "will", "eventually", "use", "this", "to", "introduce", "better", "error", "message", "in", "the", "debug", "build", "and", "those", "error", "message", "and", "warning", "message", "will", "be", "stripped", "out", "for", "the", "dist", "build", "NUMBER", "The", "dist", "build", "will", "automatically", "get", "use", "if", "NODE_ENV", "be", "anything", "other", "than", "undefined", "development", "dev", "or", "if", "MARKO_DEBUG", "env", "variable", "be", "set", "NUMBER", "When", "introduce", "the", "unrecognized", "tags", "LINK", "js", "marko", "wiki", "Error", "Unrecognized", "Tag", "error", "was", "introduce", "compile", "from", "XML", "yields", "NUMBER", "Currently", "the", "only", "workaround", "for", "this", "be", "to", "create", "an", "html", "elements", "NUMBER", "json", "file", "and", "ignore", "each", "individual", "tag", "use", "NUMBER", "We", "should", "consider", "When", "compile", "Marko", "XML", "file", "e", "NUMBER", "g", "NUMBER", "template", "NUMBER", "xml", "NUMBER", "marko", "template", "NUMBER", "marko", "NUMBER", "xml", "ignoring", "all", "unrecognized", "tags", "by", "default", "Introduce", "a", "wildcard", "into", "the", "html", "elements", "NUMBER", "json", "for", "ignoring", "all", "unrecognized", "tags", "json", "TAG", "cc", "mlrawlings", "patrick", "steele", "idem", "This", "be", "a", "nice", "change", "NUMBER", "Thanks", "for", "that", "NUMBER", "Published", "marko", "NUMBER", "NUMBER", "Thanks", "again", "NUMBER", "Events", "be", "not", "get", "handle", "from", "components", "that", "be", "include", "use", "TAG", "Example", "LINK", "render", "body", "events", "bug", "ianvonholt", "This", "one", "be", "kind", "of", "interesting", "and", "I", "m", "not", "sure", "there", "be", "a", "good", "way", "to", "avoid", "the", "problem", "NUMBER", "With", "marko", "NUMBER", "we", "change", "how", "the", "page", "boots", "in", "the", "browser", "after", "at", "it", "renders", "on", "the", "server", "LINK", "js", "marko", "issue", "NUMBER", "NUMBER", "The", "new", "behavior", "be", "that", "only", "the", "input", "state", "for", "the", "top", "level", "UI", "component", "be", "serialized", "down", "to", "the", "browser", "and", "the", "top", "level", "UI", "component", "be", "re", "rendered", "with", "the", "serialized", "input", "state", "in", "the", "browser", "when", "the", "page", "loads", "NUMBER", "The", "problem", "in", "this", "case", "be", "that", "the", "input", "for", "the", "top", "level", "UI", "component", "TAG", "include", "a", "input", "NUMBER", "renderBody", "out", "function", "that", "be", "not", "serializable", "down", "to", "the", "browser", "so", "when", "the", "top", "level", "UI", "component", "be", "re", "rendered", "it", "has", "no", "children", "and", "the", "page", "do", "not", "fully", "boot", "NUMBER", "I", "have", "an", "idea", "that", "might", "work", "NUMBER", "I", "be", "thinking", "that", "if", "we", "detect", "that", "a", "top", "level", "UI", "component", "has", "a", "non", "serializable", "function", "on", "its", "input", "then", "we", "will", "revert", "to", "the", "old", "behavior", "for", "that", "component", "NUMBER", "ianvonholt", "We", "ended", "up", "going", "with", "the", "following", "solution", "I", "be", "thinking", "that", "if", "we", "detect", "that", "a", "top", "level", "UI", "component", "has", "a", "non", "serializable", "function", "on", "its", "input", "then", "we", "will", "revert", "to", "the", "old", "behavior", "for", "that", "component", "NUMBER", "This", "solve", "the", "problem", "in", "a", "transparent", "way", "with", "no", "code", "bloat", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "We", "add", "some", "test", "NUMBER", "Please", "let", "me", "know", "if", "you", "see", "any", "issue", "NUMBER", "Hey", "juliojerrick", "NUMBER", "Check", "out", "Marko", "vs", "React", "LINK", "vs", "react", "an", "in", "depth", "look", "NUMBER", "de", "NUMBER", "a", "NUMBER", "f", "NUMBER", "a", "NUMBER", "for", "an", "in", "depth", "comparison", "of", "Marko", "and", "React", "NUMBER", "The", "article", "has", "a", "differences", "in", "rendering", "section", "LINK", "vs", "react", "an", "in", "depth", "look", "NUMBER", "de", "NUMBER", "a", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ed", "NUMBER", "which", "lists", "some", "details", "on", "how", "Marko", "s", "rendering", "be", "more", "performant", "NUMBER", "We", "also", "have", "plan", "to", "add", "scoped", "CSS", "like", "Vue", "NUMBER", "You", "can", "track", "this", "issue", "NUMBER", "Hope", "this", "helps", "NUMBER", "We", "ve", "talked", "about", "the", "performance", "in", "a", "few", "places", "but", "here", "s", "a", "more", "consolidated", "view", "of", "why", "Marko", "be", "fast", "Multiple", "compilation", "outputs", "Marko", "compiles", "components", "differently", "for", "the", "server", "and", "the", "browser", "NUMBER", "Given", "the", "following", "template", "marko", "TAG", "Hello", "input", "NUMBER", "name", "TAG", "Compiled", "for", "the", "server", "The", "compiled", "output", "be", "optimized", "for", "streaming", "HTML", "output", "on", "the", "server", "js", "var", "marko_template", "require", "marko", "html", "NUMBER", "t", "__filename", "marko_helpers", "require", "marko", "runtime", "html", "helpers", "marko_escapeXml", "marko_helpers", "NUMBER", "x", "function", "render", "input", "out", "out", "NUMBER", "w", "TAG", "Hello", "marko_escapeXml", "input", "NUMBER", "name", "TAG", "Compiled", "for", "the", "browser", "The", "compiled", "output", "be", "optimized", "for", "virtual", "DOM", "rendering", "in", "the", "browser", "js", "var", "marko_template", "require", "marko", "vdom", "NUMBER", "t", "__filename", "function", "render", "input", "out", "out", "NUMBER", "e", "DIV", "null", "NUMBER", "NUMBER", "t", "Hello", "NUMBER", "t", "input", "NUMBER", "name", "NUMBER", "t", "High", "performance", "server", "side", "rendering", "Compared", "to", "solutions", "like", "React", "that", "exclusively", "do", "virtual", "DOM", "rendering", "or", "if", "you", "be", "use", "JSX", "with", "Vue", "Marko", "has", "a", "huge", "advantage", "for", "server", "side", "rendering", "NUMBER", "When", "rendering", "to", "a", "virtual", "DOM", "tree", "on", "the", "server", "it", "s", "a", "two", "step", "process", "to", "render", "HTML", "First", "pass", "to", "produce", "an", "entire", "virtual", "DOM", "tree", "in", "memory", "Second", "pass", "to", "serialize", "the", "virtual", "DOM", "tree", "to", "an", "HTML", "string", "that", "can", "then", "be", "sent", "over", "the", "wire", "this", "requires", "traversing", "the", "entire", "tree", "structure", "In", "contrast", "Marko", "renders", "directly", "to", "an", "HTML", "stream", "in", "a", "single", "pass", "NUMBER", "There", "be", "no", "intermediate", "tree", "data", "structure", "NUMBER", "Compile", "time", "optimization", "of", "static", "sub", "trees", "Given", "the", "following", "template", "marko", "TAG", "This", "be", "a", "TAG", "static", "TAG", "node", "TAG", "Marko", "will", "recognize", "that", "the", "template", "fragment", "produces", "the", "same", "output", "every", "time", "and", "it", "creates", "the", "virtual", "DOM", "node", "once", "as", "shown", "in", "the", "following", "compiled", "output", "js", "var", "marko_node", "NUMBER", "marko_createElement", "DIV", "null", "NUMBER", "NUMBER", "NUMBER", "t", "This", "be", "a", "NUMBER", "e", "STRONG", "null", "NUMBER", "NUMBER", "t", "static", "NUMBER", "t", "node", "function", "render", "input", "out", "out", "NUMBER", "n", "marko_node", "NUMBER", "Rendering", "a", "static", "sub", "tree", "has", "virtually", "zero", "cost", "NUMBER", "In", "addition", "Marko", "will", "skip", "diffing", "patching", "static", "sub", "trees", "Compile", "time", "optimization", "of", "static", "attributes", "Marko", "will", "also", "optimize", "static", "attributes", "on", "dynamic", "elements", "NUMBER", "Given", "the", "following", "template", "marko", "TAG", "Hello", "input", "NUMBER", "name", "TAG", "Marko", "will", "produce", "the", "following", "compiled", "output", "js", "var", "marko_attrs", "NUMBER", "class", "hello", "function", "render", "input", "out", "out", "NUMBER", "e", "DIV", "marko_attrs", "NUMBER", "NUMBER", "NUMBER", "t", "Hello", "NUMBER", "t", "input", "NUMBER", "name", "NUMBER", "t", "Notice", "that", "the", "attributes", "object", "be", "only", "created", "once", "and", "it", "be", "use", "for", "every", "render", "NUMBER", "In", "addition", "no", "diffing", "patching", "will", "happen", "for", "static", "attributes", "NUMBER", "Smart", "compiler", "With", "Marko", "we", "favor", "doing", "as", "much", "at", "compile", "time", "as", "possible", "NUMBER", "This", "has", "made", "our", "compiler", "more", "complex", "but", "it", "gives", "us", "significant", "gains", "at", "runtime", "NUMBER", "We", "have", "NUMBER", "code", "coverage", "and", "over", "NUMBER", "NUMBER", "test", "to", "ensure", "that", "the", "compiler", "be", "work", "correctly", "NUMBER", "In", "addition", "in", "many", "cases", "the", "Marko", "compiler", "provides", "hints", "to", "the", "runtime", "for", "a", "given", "template", "so", "that", "the", "runtime", "can", "optimize", "for", "specific", "patterns", "NUMBER", "For", "example", "Marko", "recognizes", "if", "an", "HTML", "be", "a", "simple", "HTML", "element", "with", "only", "class", "id", "style", "and", "the", "runtime", "optimizes", "for", "these", "virtual", "DOM", "nodes", "when", "doing", "diffing", "patching", "the", "Marko", "compiler", "generates", "code", "that", "flags", "specific", "virtual", "DOM", "nodes", "NUMBER", "The", "React", "including", "React", "variants", "runtime", "be", "typically", "use", "with", "JavaScript", "code", "generate", "by", "a", "JSX", "transform", "NUMBER", "JSX", "be", "just", "a", "simple", "transform", "for", "JSX", "elements", "to", "function", "calls", "NUMBER", "While", "there", "be", "a", "few", "babel", "transforms", "that", "apply", "a", "few", "compile", "time", "optimizations", "the", "bulk", "of", "the", "optimizations", "be", "happening", "in", "the", "runtime", "since", "there", "be", "very", "little", "happening", "at", "compile", "time", "NUMBER", "On", "a", "relate", "note", "we", "don", "t", "promote", "the", "usage", "of", "the", "Marko", "compiler", "in", "the", "browser", "even", "though", "you", "can", "make", "it", "work", "NUMBER", "The", "Marko", "compiler", "be", "targeted", "to", "work", "almost", "exclusively", "on", "the", "server", "and", "it", "be", "pretty", "hefty", "NUMBER", "In", "contrast", "Vue", "support", "the", "widely", "adopted", "use", "case", "of", "compile", "template", "in", "the", "browser", "in", "addition", "to", "compile", "on", "the", "server", "NUMBER", "That", "means", "that", "Vue", "needs", "to", "be", "more", "mindful", "of", "add", "new", "features", "to", "the", "compiler", "that", "might", "increase", "page", "weight", "NUMBER", "Optimized", "data", "structures", "Instead", "of", "rendering", "to", "a", "tree", "of", "virtual", "DOM", "nodes", "in", "the", "browser", "where", "children", "be", "represented", "by", "arrays", "Marko", "renders", "to", "a", "tree", "where", "children", "be", "represented", "by", "a", "linked", "list", "NUMBER", "This", "reduces", "the", "memory", "allocation", "required", "and", "it", "be", "much", "faster", "in", "the", "use", "case", "of", "rendering", "virtual", "DOM", "nodes", "that", "get", "immediately", "throw", "away", "NUMBER", "The", "virtual", "DOM", "data", "structures", "be", "heavily", "optimized", "as", "well", "for", "JavaScript", "runtimes", "based", "on", "know", "optimizations", "that", "V", "NUMBER", "and", "others", "apply", "for", "given", "code", "structures", "and", "usage", "patterns", "NUMBER", "Here", "s", "the", "VDOM", "runtime", "code", "LINK", "js", "marko", "tree", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "dfd", "NUMBER", "a", "NUMBER", "f", "NUMBER", "runtime", "vdom", "NUMBER", "Optimized", "runtime", "Marko", "has", "a", "heavily", "optimized", "runtime", "that", "has", "be", "benchmarked", "and", "fine", "tuned", "over", "a", "long", "period", "of", "time", "NUMBER", "We", "extensively", "use", "profilers", "for", "Node", "NUMBER", "js", "and", "the", "browser", "and", "analyze", "generate", "opcodes", "to", "ensure", "that", "we", "maximize", "performance", "NUMBER", "We", "also", "aim", "to", "keep", "the", "code", "minimal", "to", "avoid", "introduce", "overhead", "NUMBER", "Lastly", "we", "have", "created", "a", "variety", "of", "benchmarks", "that", "we", "have", "use", "to", "make", "sure", "we", "be", "staying", "fast", "LINK", "js", "isomorphic", "ui", "benchmarks", "LINK", "js", "templating", "benchmarks", "LINK", "steele", "idem", "marko", "vs", "react", "deprecate", "in", "favor", "of", "isomorphic", "ui", "benchmarks", "Focused", "Vue", "support", "multiple", "ways", "to", "define", "a", "view", "Vue", "template", "in", "standard", "HTML", "that", "be", "an", "exist", "element", "in", "the", "DOM", "be", "targeted", "to", "be", "the", "template", "Single", "file", "components", "JavaScript", "string", "as", "Vue", "template", "JSX", "Marko", "on", "the", "other", "hand", "only", "support", "and", "optimizes", "for", "one", "way", "of", "defining", "a", "view", "in", "a", "NUMBER", "marko", "file", "NUMBER", "Maybe", "Vue", "be", "doing", "a", "good", "job", "of", "equally", "optimizing", "all", "of", "those", "approaches", "to", "defining", "a", "view", "but", "I", "suspect", "that", "be", "not", "the", "case", "NUMBER", "I", "m", "sure", "I", "could", "come", "up", "with", "some", "more", "reasons", "that", "Marko", "be", "fast", "but", "I", "think", "that", "covers", "the", "bulk", "of", "the", "optimizations", "that", "Marko", "applies", "NUMBER", "Hope", "that", "answers", "your", "question", "NUMBER", "I", "m", "going", "to", "close", "the", "issue", "but", "feel", "free", "to", "add", "more", "comments", "here", "if", "you", "would", "like", "further", "clarification", "NUMBER", "patrick", "steele", "idem", "your", "response", "would", "make", "for", "a", "very", "interesting", "blog", "post", "NUMBER", "This", "should", "really", "be", "posted", "on", "the", "markojs", "site", "somewhere", "for", "others", "to", "easily", "find", "We", "just", "publish", "an", "article", "to", "explain", "why", "Marko", "be", "fast", "LINK", "psteeleidem", "why", "be", "marko", "fast", "a", "NUMBER", "cb", "NUMBER", "ae", "NUMBER", "Given", "the", "following", "template", "marko", "TAG", "search", "guide", "TAG", "TAG", "console", "NUMBER", "log", "search", "guide", "state", "state", "TAG", "TAG", "TAG", "TAG", "Pick", "Something", "TAG", "TAG", "Picked", "state", "NUMBER", "len", "Pick", "Something", "Else", "TAG", "Pick", "Something", "TAG", "TAG", "From", "ramses", "NUMBER", "NUMBER", "be", "gets", "stuck", "in", "an", "infinite", "loop", "after", "the", "on", "click", "due", "to", "it", "get", "stuck", "in", "the", "weeds", "with", "the", "style", "tag", "during", "__rerender", "function", "isRerenderInBrowser", "NUMBER", "var", "targetEl", "targetNode", "NUMBER", "firstChild", "while", "targetEl", "var", "id", "targetEl", "NUMBER", "id", "yes", "i", "know", "it", "s", "a", "terrible", "dom", "structure", "work", "on", "it", "eventually", "but", "for", "some", "reason", "this", "seems", "like", "the", "only", "component", "which", "has", "this", "problem", "in", "many", "other", "place", "i", "m", "use", "the", "dangling", "style", "tag", "structure", "w", "o", "issue", "NUMBER", "moving", "the", "TAG", "into", "the", "TAG", "seems", "to", "make", "it", "not", "get", "confused", "NUMBER", "i", "could", "try", "to", "get", "a", "smaller", "repro", "and", "file", "an", "issue", "if", "necessary", "but", "wanted", "to", "share", "as", "i", "find", "it", "NUMBER", "i", "didn", "t", "pursue", "it", "too", "much", "b", "c", "i", "had", "a", "workaround", "dump", "TAG", "inside", "a", "single", "top", "level", "TAG", "tag", "per", "component", "instead", "of", "outside", "and", "i", "m", "planning", "in", "revamping", "all", "my", "styles", "eventually", "anyway", "When", "rendering", "on", "the", "server", "the", "top", "level", "UI", "component", "cannot", "have", "function", "references", "NUMBER", "Marko", "serializes", "the", "data", "for", "the", "top", "level", "UI", "components", "rendered", "on", "the", "server", "NUMBER", "If", "you", "have", "a", "reproducible", "test", "case", "to", "better", "illustrate", "your", "problem", "that", "would", "be", "helpful", "NUMBER", "Thanks", "for", "the", "docs", "We", "love", "seeing", "additional", "integrations", "with", "Marko", "NUMBER", "Thanks", "for", "the", "PR", "Hesulan", "NUMBER", "I", "agree", "that", "this", "do", "not", "look", "right", "NUMBER", "I", "m", "not", "sure", "if", "there", "was", "an", "underlying", "reason", "for", "this", "so", "I", "m", "going", "to", "leave", "this", "open", "until", "either", "Patrick", "or", "Michael", "looks", "at", "it", "too", "NUMBER", "cc", "patrick", "steele", "idem", "mlrawlings", "Thanks", "for", "the", "PR", "NUMBER", "This", "be", "actually", "the", "correct", "behavior", "NUMBER", "Using", "the", "static", "text", "attribute", "Marko", "ignores", "HTML", "tags", "NUMBER", "The", "Marko", "NUMBER", "js", "website", "be", "not", "rendering", "the", "output", "correctly", "though", "here", "LINK", "tags", "codemarko", "bodycode", "NUMBER", "It", "should", "look", "like", "this", "marko", "TAG", "This", "be", "just", "one", "lt", "span", "if", "foo", "gt", "Hello", "THIS", "IS", "NOT", "VALID", "lt", "span", "gt", "big", "text", "block", "TAG", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "but", "feel", "free", "to", "comment", "here", "if", "you", "have", "any", "additional", "feedback", "NUMBER", "Also", "I", "ve", "opened", "up", "LINK", "js", "markojs", "website", "issue", "NUMBER", "to", "track", "the", "Marko", "NUMBER", "js", "website", "issue", "NUMBER", "This", "change", "looks", "good", "to", "me", "NUMBER", "Do", "you", "mind", "squashing", "your", "commit", "Thanks", "NUMBER", "Actually", "after", "given", "this", "some", "more", "thought", "I", "m", "not", "sure", "if", "this", "be", "the", "right", "approach", "for", "globally", "overriding", "the", "default", "for", "a", "component", "NUMBER", "I", "don", "t", "think", "the", "compiler", "config", "be", "the", "appropriate", "place", "for", "such", "configuration", "NUMBER", "Have", "you", "considered", "overriding", "the", "TAG", "tag", "I", "ll", "create", "an", "example", "of", "this", "and", "post", "a", "link", "here", "NUMBER", "Here", "s", "an", "example", "of", "overriding", "the", "await", "core", "tag", "LINK", "js", "samples", "override", "core", "tag", "mauricionr", "In", "the", "demo", "you", "ll", "see", "that", "I", "copied", "part", "of", "the", "TAG", "marko", "NUMBER", "json", "NUMBER", "This", "be", "my", "propose", "solution", "for", "that", "LINK", "js", "marko", "issue", "NUMBER", "mauricionr", "After", "speaking", "with", "patrick", "steele", "idem", "we", "decided", "that", "instead", "of", "my", "old", "approach", "where", "I", "overrode", "the", "tag", "renderer", "and", "copying", "the", "TAG", "tag", "s", "marko", "NUMBER", "json", "file", "we", "can", "just", "override", "the", "await", "tag", "completely", "and", "use", "a", "transformer", "to", "set", "the", "timeout", "attribute", "NUMBER", "await", "timeout", "transformer", "NUMBER", "js", "js", "module", "NUMBER", "export", "function", "el", "context", "if", "el", "NUMBER", "hasAttribute", "timeout", "el", "NUMBER", "setAttributeValue", "timeout", "context", "NUMBER", "builder", "NUMBER", "literal", "NUMBER", "The", "override", "core", "tag", "LINK", "js", "samples", "override", "core", "tag", "project", "has", "be", "update", "with", "the", "change", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "NUMBER", "Please", "let", "me", "know", "if", "you", "have", "any", "other", "question", "NUMBER", "This", "looks", "good", "to", "me", "NUMBER", "Thanks", "for", "the", "fix", "NUMBER", "I", "believe", "this", "has", "be", "resolve", "NUMBER", "Closing", "the", "issue", "but", "please", "feel", "free", "to", "add", "comments", "NUMBER", "Related", "LINK", "js", "marko", "issue", "NUMBER", "Bug", "Report", "Context", "If", "you", "have", "an", "await", "tag", "in", "a", "template", "that", "only", "gets", "rendered", "by", "an", "action", "like", "setting", "state", "after", "the", "initial", "render", "the", "await", "tag", "will", "error", "NUMBER", "The", "__sync", "property", "be", "set", "to", "true", "by", "the", "updateManager", "NUMBER", "__batchUpdate", "NUMBER", "You", "get", "the", "following", "error", "Uncaught", "Error", "Not", "allow", "NUMBER", "Expected", "Behavior", "It", "should", "run", "the", "await", "tag", "and", "wait", "for", "the", "promise", "to", "be", "fulfilled", "NUMBER", "Actual", "Behavior", "Throws", "an", "uncaught", "error", "NUMBER", "Simple", "Example", "This", "be", "a", "very", "simple", "example", "JavaScript", "class", "onCreate", "this", "NUMBER", "ate", "promise", "Promise", "NUMBER", "resolve", "selected", "false", "TAG", "TAG", "TAG", "do", "TAG", "TAG", "TAG", "I", "show", "first", "TAG", "TAG", "click", "me", "TAG", "TAG", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "NUMBER", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Chrome", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Windows", "NUMBER", "Stack", "Trace", "AsyncVDOMBuilder", "NUMBER", "js", "NUMBER", "Uncaught", "Error", "Not", "allow", "at", "r", "NUMBER", "beginAsync", "AsyncVDOMBuilder", "NUMBER", "js", "NUMBER", "at", "t", "NUMBER", "export", "await", "tag", "NUMBER", "js", "NUMBER", "at", "r", "index", "NUMBER", "html", "NUMBER", "at", "renderer", "NUMBER", "js", "NUMBER", "at", "Component", "NUMBER", "js", "NUMBER", "at", "Object", "NUMBER", "s", "as", "__batchUpdate", "update", "manager", "NUMBER", "js", "NUMBER", "at", "n", "NUMBER", "__rerender", "Component", "NUMBER", "js", "NUMBER", "at", "n", "NUMBER", "update", "Component", "NUMBER", "js", "NUMBER", "at", "o", "update", "manager", "NUMBER", "js", "NUMBER", "at", "i", "update", "manager", "NUMBER", "js", "NUMBER", "TAG", "HTML", "style", "comments", "be", "already", "completely", "remove", "at", "compile", "time", "and", "should", "never", "show", "up", "in", "the", "rendered", "output", "NUMBER", "For", "example", "given", "the", "following", "template", "marko", "TAG", "TAG", "TAG", "The", "output", "HTML", "would", "be", "html", "TAG", "TAG", "For", "remove", "console", "logging", "statements", "that", "could", "be", "do", "use", "babel", "LINK", "plugin", "transform", "remove", "console", "Typically", "babel", "be", "only", "use", "when", "generating", "JavaScript", "bundle", "for", "the", "browser", "but", "you", "could", "also", "use", "babel", "to", "preprocess", "JavaScript", "file", "loaded", "by", "Node", "NUMBER", "js", "NUMBER", "If", "I", "be", "misunderstanding", "your", "question", "regard", "the", "comments", "removal", "please", "let", "me", "know", "NUMBER", "Marko", "doesn", "t", "process", "HTML", "style", "comments", "in", "TAG", "tags", "NUMBER", "Anything", "inside", "a", "TAG", "tag", "can", "be", "any", "language", "so", "it", "wouldn", "t", "make", "sense", "for", "Marko", "to", "fully", "parse", "out", "the", "content", "of", "a", "TAG", "NUMBER", "I", "also", "prefer", "to", "avoid", "use", "babel", "on", "the", "server", "but", "just", "wanted", "to", "throw", "it", "out", "as", "an", "option", "NUMBER", "When", "you", "be", "in", "JavaScript", "land", "e", "NUMBER", "g", "NUMBER", "inside", "a", "JavaScript", "function", "Marko", "do", "not", "have", "much", "control", "because", "we", "don", "t", "want", "Marko", "to", "get", "in", "the", "business", "of", "rewriting", "JavaScript", "code", "NUMBER", "Another", "option", "be", "to", "monkey", "patch", "the", "console", "object", "to", "make", "the", "console", "NUMBER", "log", "method", "a", "no", "op", "but", "this", "might", "cause", "issue", "with", "debugging", "and", "would", "not", "be", "recommended", "but", "here", "it", "be", "anyway", "js", "console", "NUMBER", "log", "function", "noop", "A", "better", "option", "be", "to", "pull", "in", "a", "logging", "framework", "with", "configurable", "loggers", "so", "that", "you", "can", "control", "logging", "NUMBER", "With", "that", "approach", "you", "would", "be", "going", "through", "your", "own", "logger", "instances", "instead", "of", "calling", "console", "NUMBER", "log", "directly", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "feel", "free", "to", "comment", "here", "if", "you", "have", "any", "other", "question", "NUMBER", "For", "context", "please", "see", "Issue", "NUMBER", "Proposal", "serialize", "only", "input", "and", "state", "on", "top", "level", "server", "rendered", "UI", "components", "NUMBER", "LINK", "js", "marko", "issue", "NUMBER", "This", "Pull", "Request", "introduces", "some", "important", "change", "to", "Marko", "Only", "the", "data", "including", "state", "input", "and", "properties", "add", "to", "the", "UI", "component", "instance", "for", "_top", "level_", "UI", "components", "be", "serialized", "down", "to", "the", "browser", "previously", "this", "data", "was", "serialized", "for", "_every_", "UI", "component", "rendered", "on", "the", "server", "When", "the", "page", "boots", "in", "the", "browser", "the", "top", "level", "UI", "components", "be", "partially", "re", "rendered", "use", "the", "serialized", "data", "As", "part", "of", "the", "partial", "re", "render", "the", "rendering", "logic", "executes", "but", "the", "DOM", "be", "not", "update", "and", "no", "VDOM", "nodes", "be", "actually", "created", "the", "partial", "re", "render", "be", "only", "use", "to", "mount", "nested", "UI", "components", "NOTE", "If", "a", "top", "level", "UI", "component", "be", "split", "that", "be", "rendering", "logic", "be", "not", "sent", "down", "to", "the", "browser", "then", "the", "old", "behavior", "will", "be", "continued", "The", "out", "NUMBER", "global", "object", "be", "not", "serialized", "but", "specify", "properties", "can", "be", "whitelisted", "to", "be", "serialized", "NUMBER", "For", "example", "to", "have", "the", "out", "NUMBER", "global", "NUMBER", "apiKey", "and", "the", "out", "NUMBER", "global", "NUMBER", "locale", "properties", "serialized", "you", "would", "do", "the", "following", "js", "template", "NUMBER", "render", "global", "serializedGlobals", "apiKey", "true", "locale", "true", "res", "There", "be", "a", "chance", "that", "this", "might", "break", "exist", "apps", "NUMBER", "To", "revert", "back", "to", "the", "old", "behavior", "on", "a", "page", "by", "page", "basis", "you", "can", "do", "the", "following", "marko", "TAG", "TAG", "NUMBER", "TAG", "stephenbrady", "thanks", "for", "open", "the", "issue", "NUMBER", "I", "add", "a", "test", "case", "and", "I", "be", "not", "able", "to", "reproduce", "NUMBER", "Can", "you", "please", "provide", "more", "details", "on", "how", "to", "reproduce", "This", "looks", "to", "only", "be", "an", "issue", "with", "marko", "loader", "LINK", "js", "marko", "loader", "NUMBER", "I", "haven", "t", "had", "a", "chance", "to", "investigate", "yet", "but", "I", "be", "able", "to", "reproduce", "it", "NUMBER", "I", "think", "this", "be", "an", "issue", "with", "the", "way", "we", "re", "loading", "the", "css", "and", "how", "webpack", "interprets", "requires", "NUMBER", "Here", "the", "inline", "css", "be", "pass", "as", "a", "query", "parameter", "to", "the", "internal", "code", "loader", "LINK", "js", "marko", "loader", "blob", "master", "src", "index", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "But", "because", "webpack", "uses", "exclamation", "points", "in", "require", "statements", "as", "a", "loader", "syntax", "require", "css", "less", "NUMBER", "path", "to", "style", "NUMBER", "less", "the", "important", "be", "throw", "things", "off", "NUMBER", "I", "m", "doing", "something", "weird", "LINK", "js", "marko", "loader", "blob", "master", "src", "code", "loader", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "to", "handle", "newlines", "but", "we", "should", "probably", "replace", "that", "with", "a", "call", "to", "escape", "here", "LINK", "js", "marko", "loader", "blob", "master", "src", "index", "NUMBER", "js", "L", "NUMBER", "and", "unescape", "here", "LINK", "js", "marko", "loader", "blob", "master", "src", "code", "loader", "NUMBER", "js", "L", "NUMBER", "NUMBER", "stephenbrady", "Would", "you", "mind", "experimenting", "and", "creating", "a", "PR", "if", "things", "work", "out", "marko", "style", "div", "NUMBER", "__colors", "NUMBER", "ul", "NUMBER", "__colors", "NUMBER", "__colorLI", "NUMBER", "__disabled", "button", "color", "grey", "__enabled", "button", "color", "yellow", "TAG", "TAG", "TAG", "Red", "TAG", "TAG", "TAG", "TAG", "Click", "me", "TAG", "TAG", "NOTE", "It", "would", "also", "be", "possible", "to", "use", "unscoped", "CSS", "alongside", "scoped", "CSS", "The", "Marko", "CSS", "preprocessor", "would", "produce", "the", "following", "CSS", "code", "css", "div", "NUMBER", "colors_abc", "NUMBER", "NUMBER", "ul", "NUMBER", "colors_abc", "NUMBER", "NUMBER", "NUMBER", "colorLI_abc", "NUMBER", "NUMBER", "NUMBER", "disabled", "button_abc", "NUMBER", "color", "grey", "NUMBER", "enable", "button_abc", "NUMBER", "color", "yellow", "NOTE", "The", "CSS", "code", "that", "Marko", "preprocessors", "then", "would", "go", "through", "any", "user", "CSS", "processor", "specified", "style", "NUMBER", "less", "style", "NUMBER", "scss", "etc", "NUMBER", "Finally", "the", "Marko", "compiler", "would", "provide", "a", "style", "function", "variable", "similar", "to", "the", "following", "js", "var", "style", "marko_style", "_abc", "NUMBER", "style", "colorLI", "colorLI_abc", "NUMBER", "I", "could", "see", "this", "get", "messy", "very", "quickly", "NUMBER", "I", "would", "much", "rather", "like", "to", "have", "a", "scoped", "attribute", "like", "Vue", "NUMBER", "With", "the", "above", "implementation", "you", "could", "mix", "the", "scoped", "and", "non", "scoped", "CSS", "which", "be", "much", "messier", "NUMBER", "Additionally", "when", "a", "component", "be", "created", "often", "times", "there", "will", "be", "component", "specific", "styling", "NUMBER", "This", "means", "that", "there", "will", "be", "a", "lot", "of", "underscores", "in", "component", "styles", "NUMBER", "Mixed", "syntax", "can", "be", "messy", "In", "the", "following", "example", "it", "s", "difficult", "to", "see", "which", "specific", "styles", "be", "scoped", "and", "which", "specific", "styles", "be", "global", "without", "scanning", "the", "entire", "block", "marko", "A", "mix", "of", "scoped", "and", "global", "styles", "style", "NUMBER", "non", "scoped", "NUMBER", "div", "NUMBER", "__colors", "NUMBER", "ul", "NUMBER", "__colors", "NUMBER", "NUMBER", "more", "non", "scoped", "NUMBER", "__colorLI", "NUMBER", "__disabled", "button", "color", "grey", "NUMBER", "even", "more", "non", "scoped", "NUMBER", "__enabled", "button", "color", "yellow", "Scoped", "Attribute", "In", "the", "following", "example", "you", "can", "easily", "see", "which", "styles", "be", "scoped", "and", "which", "styles", "be", "global", "marko", "style", "NUMBER", "scoped", "NUMBER", "scoped", "class", "NUMBER", "div", "NUMBER", "colors", "NUMBER", "Global", "styles", "can", "be", "include", "in", "the", "component", "too", "style", "NUMBER", "non", "scoped", "class", "NUMBER", "div", "NUMBER", "another", "non", "scoped", "NUMBER", "You", "could", "use", "less", "or", "an", "another", "CSS", "extension", "as", "an", "additional", "attribute", "as", "usual", "marko", "style", "NUMBER", "less", "NUMBER", "scoped", "style", "NUMBER", "less", "Sorry", "guys", "but", "I", "be", "going", "to", "have", "to", "have", "a", "dissenting", "opinion", "here", "NUMBER", "We", "considered", "the", "Vue", "NUMBER", "js", "approach", "before", "creating", "this", "proposal", "but", "there", "be", "some", "serious", "drawbacks", "with", "the", "Vue", "NUMBER", "js", "approach", "Vue", "NUMBER", "js", "approach", "drawback", "scoped", "styles", "must", "be", "separated", "out", "from", "unscoped", "styles", "It", "forces", "scoped", "styles", "to", "be", "separated", "out", "NUMBER", "For", "a", "single", "file", "UI", "components", "that", "be", "fine", "because", "it", "be", "just", "a", "separate", "block", "in", "the", "single", "file", "NUMBER", "However", "that", "would", "be", "a", "problem", "when", "the", "developer", "wants", "to", "split", "the", "styles", "out", "to", "a", "separate", "style", "file", "NUMBER", "Do", "we", "allow", "style", "NUMBER", "less", "style", "NUMBER", "scoped", "NUMBER", "less", "That", "would", "be", "suboptimal", "because", "now", "styles", "be", "split", "across", "multiple", "file", "NUMBER", "A", "separator", "within", "the", "file", "could", "be", "use", "but", "that", "introduces", "more", "things", "to", "learn", "and", "the", "separator", "could", "be", "problematic", "do", "we", "use", "a", "CSS", "comment", "NUMBER", "You", "could", "argue", "that", "unscoped", "styles", "would", "not", "be", "needed", "alongside", "scoped", "styles", "but", "I", "think", "that", "would", "be", "an", "odd", "restriction", "NUMBER", "Vue", "NUMBER", "js", "approach", "drawback", "Marko", "must", "understand", "each", "compile", "to", "CSS", "language", "Another", "drawback", "with", "the", "Vue", "NUMBER", "js", "approach", "be", "that", "it", "requires", "that", "Marko", "to", "be", "able", "to", "deeply", "understand", "and", "parse", "the", "style", "source", "in", "order", "to", "rewrite", "the", "styles", "NUMBER", "This", "means", "that", "Marko", "would", "need", "to", "have", "custom", "support", "for", "each", "render", "to", "CSS", "language", "Less", "Sass", "Stylus", "etc", "NUMBER", "language", "so", "that", "it", "could", "render", "the", "style", "code", "into", "CSS", "so", "that", "it", "could", "then", "be", "deeply", "parsed", "to", "figure", "out", "all", "of", "the", "CSS", "class", "names", "and", "then", "modify", "to", "add", "an", "attribute", "selector", "NUMBER", "I", "don", "t", "think", "we", "want", "to", "go", "there", "NUMBER", "For", "example", "given", "the", "following", "marko", "style", "scoped", "NUMBER", "list", "container", "hover", "background", "orange", "media", "min", "width", "NUMBER", "px", "NUMBER", "list", "container", "hover", "background", "orange", "TAG", "Hello", "World", "TAG", "Marko", "would", "need", "to", "figure", "how", "to", "preprocess", "the", "possibly", "non", "CSS", "style", "source", "to", "produce", "the", "following", "CSS", "output", "css", "NUMBER", "list", "container", "data", "m", "NUMBER", "e", "NUMBER", "b", "NUMBER", "hover", "background", "orange", "media", "min", "width", "NUMBER", "px", "NUMBER", "list", "container", "data", "m", "NUMBER", "e", "NUMBER", "b", "NUMBER", "hover", "background", "orange", "We", "actually", "don", "t", "want", "Marko", "to", "render", "compile", "to", "CSS", "languages", "to", "CSS", "because", "we", "want", "that", "to", "be", "handle", "by", "the", "asset", "pipeline", "bundler", "e", "NUMBER", "g", "NUMBER", "Lasso", "or", "Webpack", "NUMBER", "This", "be", "because", "we", "allow", "global", "imports", "for", "Less", "and", "Stylus", "and", "possibly", "others", "and", "Marko", "would", "not", "have", "that", "context", "NUMBER", "Contrast", "that", "with", "the", "proposal", "I", "gave", "above", "marko", "style", "__list", "container", "hover", "background", "orange", "media", "min", "width", "NUMBER", "px", "__list", "container", "hover", "background", "orange", "TAG", "Hello", "World", "TAG", "With", "a", "little", "regular", "expression", "magic", "the", "__", "prefixed", "variables", "could", "be", "easily", "rewritten", "to", "the", "following", "css", "NUMBER", "list", "container_", "NUMBER", "e", "NUMBER", "b", "NUMBER", "hover", "background", "orange", "media", "min", "width", "NUMBER", "px", "NUMBER", "list", "container_", "NUMBER", "e", "NUMBER", "b", "NUMBER", "hover", "background", "orange", "The", "rendered", "HTML", "would", "be", "the", "following", "html", "TAG", "Hello", "World", "TAG", "In", "addition", "since", "we", "would", "use", "a", "special", "prefix", "Marko", "would", "not", "need", "to", "deeply", "parse", "the", "CSS", "to", "find", "all", "of", "the", "scoped", "CSS", "class", "names", "to", "be", "add", "to", "the", "output", "HTML", "NUMBER", "Vue", "NUMBER", "js", "approach", "drawback", "scoped", "style", "classes", "cannot", "be", "pass", "to", "nested", "components", "In", "my", "proposal", "above", "scoped", "style", "classes", "can", "be", "pass", "to", "nested", "UI", "components", "marko", "style", "__disabled", "button", "color", "grey", "__enabled", "button", "color", "yellow", "TAG", "TAG", "Click", "me", "TAG", "TAG", "With", "the", "Vue", "NUMBER", "js", "approach", "your", "best", "option", "would", "probably", "be", "to", "use", "less", "efficient", "and", "less", "reliable", "descendent", "selectors", "marko", "style", "scoped", "NUMBER", "my", "component", "NUMBER", "disabled", "button", "color", "grey", "NUMBER", "my", "component", "NUMBER", "enable", "button", "color", "yellow", "TAG", "TAG", "Click", "me", "TAG", "TAG", "I", "m", "make", "the", "assumption", "that", "the", "output", "CSS", "code", "would", "be", "the", "following", "css", "NUMBER", "my", "component", "data", "m", "NUMBER", "e", "NUMBER", "b", "NUMBER", "NUMBER", "disabled", "button", "color", "grey", "NUMBER", "my", "component", "data", "m", "NUMBER", "e", "NUMBER", "b", "NUMBER", "NUMBER", "enable", "button", "color", "yellow", "Vue", "NUMBER", "js", "approach", "drawback", "not", "compatible", "with", "multi", "file", "adaptive", "styles", "At", "eBay", "we", "support", "splitting", "out", "styles", "into", "multiple", "file", "for", "build", "adaptive", "UIs", "so", "we", "might", "have", "the", "following", "style", "NUMBER", "mobile", "NUMBER", "less", "style", "NUMBER", "mobile", "NUMBER", "ios", "NUMBER", "less", "style", "NUMBER", "less", "NUMBER", "In", "order", "for", "that", "approach", "to", "work", "with", "the", "Vue", "NUMBER", "js", "approach", "Marko", "would", "somehow", "need", "to", "figure", "out", "how", "to", "look", "at", "all", "of", "the", "possible", "style", "file", "to", "figure", "out", "if", "a", "particular", "CSS", "class", "name", "be", "a", "scoped", "CSS", "class", "name", "or", "not", "so", "that", "it", "can", "add", "the", "extra", "data", "attribute", "to", "the", "HTML", "elements", "that", "use", "those", "scoped", "class", "names", "NUMBER", "So", "you", "don", "t", "like", "underscores", "We", "also", "discussed", "the", "following", "option", "based", "on", "title", "case", "marko", "style", "NUMBER", "ListContainer", "hover", "background", "orange", "media", "min", "width", "NUMBER", "px", "NUMBER", "ListContainer", "hover", "background", "orange", "TAG", "Hello", "World", "TAG", "I", "don", "t", "know", "how", "I", "feel", "about", "that", "but", "I", "could", "definitely", "be", "onboard", "with", "it", "NUMBER", "I", "think", "the", "regular", "expression", "might", "be", "a", "little", "less", "reliable", "but", "we", "could", "put", "in", "a", "few", "restrictions", "to", "avoid", "that", "problem", "NUMBER", "We", "recommended", "the", "__", "prefix", "because", "it", "would", "fit", "into", "any", "compile", "to", "CSS", "language", "and", "__", "be", "commonly", "use", "to", "marko", "properties", "in", "JavaScript", "as", "private", "NUMBER", "A", "pro", "for", "the", "title", "case", "be", "that", "NUMBER", "ListContainer", "looks", "okay", "but", "NUMBER", "__list", "container", "looks", "bad", "NUMBER", "A", "con", "with", "the", "title", "case", "be", "that", "I", "don", "t", "like", "having", "to", "type", "uppercase", "characters", "shift", "key", "but", "_", "requires", "shift", "as", "well", "so", "that", "be", "super", "minor", "NUMBER", "It", "s", "an", "implementation", "detail", "but", "the", "hash", "could", "be", "based", "on", "the", "file", "system", "directory", "path", "NUMBER", "That", "be", "for", "any", "file", "in", "the", "directory", "we", "could", "figure", "out", "what", "the", "hash", "would", "be", "regardless", "if", "we", "be", "looking", "at", "path", "to", "style", "NUMBER", "less", "or", "path", "to", "style", "NUMBER", "mobile", "NUMBER", "less", "NUMBER", "It", "could", "then", "be", "the", "job", "of", "the", "asset", "pipeline", "bundler", "to", "add", "the", "hashes", "to", "the", "CSS", "code", "instead", "of", "Marko", "doing", "that", "work", "NUMBER", "Summary", "What", "I", "propose", "above", "be", "a", "combination", "of", "scoped", "CSS", "and", "CSS", "modules", "It", "fits", "in", "nicely", "with", "any", "compile", "to", "CSS", "language", "without", "Marko", "having", "to", "deeply", "parse", "the", "compile", "to", "CSS", "source", "code", "It", "works", "with", "multi", "file", "and", "single", "file", "approaches", "It", "s", "easy", "to", "explain", "a", "unique", "hash", "be", "add", "to", "scoped", "class", "names", "that", "have", "a", "special", "prefix", "or", "that", "be", "somehow", "recognizable", "Still", "think", "the", "Vue", "NUMBER", "js", "approach", "be", "better", "Any", "other", "thoughts", "or", "proposals", "How", "about", "double", "dot", "marko", "NUMBER", "list", "container", "hover", "background", "orange", "NUMBER", "list", "container", "NUMBER", "tasty", "background", "chocolate", "media", "min", "width", "NUMBER", "px", "NUMBER", "list", "container", "hover", "background", "orange", "gilbert", "It", "s", "subjective", "but", "I", "be", "not", "sure", "double", "dot", "looks", "better", "than", "NUMBER", "__my", "class", "or", "NUMBER", "MyClass", "and", "I", "suspect", "that", "the", "double", "dot", "will", "impact", "tooling", "and", "syntax", "highlight", "for", "the", "render", "to", "CSS", "languages", "such", "as", "Less", "or", "Sass", "but", "I", "have", "not", "verify", "NUMBER", "my", "class", "be", "not", "valid", "CSS", "but", "both", "NUMBER", "__my", "class", "and", "NUMBER", "MyClass", "be", "valid", "CSS", "and", "should", "not", "cause", "any", "linting", "and", "syntax", "highlight", "issue", "NUMBER", "What", "be", "the", "recommended", "way", "to", "share", "common", "methods", "across", "widgets", "Normally", "I", "would", "extend", "a", "base", "class", "but", "it", "seems", "this", "isn", "t", "possible", "since", "constructors", "be", "never", "call", "NUMBER", "I", "can", "t", "seem", "to", "find", "a", "clean", "way", "to", "extend", "ALL", "widgets", "with", "common", "functionality", "NUMBER", "Everything", "I", "try", "requires", "either", "mixing", "into", "the", "prototype", "of", "class", "or", "relying", "on", "doing", "composition", "within", "the", "onCreate", "method", "NUMBER", "Is", "there", "a", "better", "cleaner", "way", "to", "do", "this", "Side", "Note", "My", "team", "be", "constantly", "fumbling", "with", "the", "class", "syntax", "in", "components", "because", "they", "be", "not", "real", "Classes", "NUMBER", "We", "be", "use", "es", "NUMBER", "and", "Babel", "in", "our", "projects", "and", "Components", "be", "the", "one", "place", "that", "do", "not", "follow", "how", "real", "classes", "work", "NUMBER", "It", "s", "make", "things", "very", "confusing", "for", "our", "developers", "NUMBER", "Is", "there", "any", "way", "to", "use", "real", "classes", "with", "inheritance", "in", "Components", "UPDATE", "Sorry", "I", "miss", "Patrick", "actually", "answered", "my", "side", "note", "in", "another", "ticket", "LINK", "js", "marko", "issue", "NUMBER", "Still", "any", "examples", "of", "how", "to", "nicely", "mixin", "support", "methods", "Not", "sure", "what", "happened", "there", "NUMBER", "I", "m", "investigating", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "I", "ll", "be", "publishing", "a", "new", "version", "of", "the", "website", "soon", "after", "I", "investigate", "a", "few", "other", "issue", "that", "others", "have", "report", "NUMBER", "You", "can", "also", "run", "the", "website", "locally", "git", "clone", "LINK", "js", "marko", "NUMBER", "git", "cd", "marko", "npm", "install", "npm", "link", "cd", "NUMBER", "git", "clone", "LINK", "js", "markojs", "website", "NUMBER", "git", "cd", "markojs", "website", "npm", "install", "npm", "link", "makro", "npm", "start", "Do", "you", "have", "a", "TAG", "on", "your", "page", "Are", "you", "explicitly", "use", "the", "TAG", "tag", "I", "be", "not", "able", "to", "reproduce", "unless", "I", "render", "UI", "components", "into", "the", "TAG", "tag", "NUMBER", "Actually", "I", "see", "the", "problem", "NUMBER", "It", "do", "look", "like", "a", "bug", "NUMBER", "Can", "you", "please", "provide", "more", "of", "template", "for", "the", "UI", "component", "that", "be", "fail", "to", "render", "so", "that", "we", "can", "try", "to", "reproduce", "EDIT", "Just", "saw", "that", "you", "link", "to", "your", "repo", "NUMBER", "Currently", "the", "key", "attribute", "be", "only", "applicable", "within", "the", "context", "of", "a", "UI", "component", "with", "a", "backing", "class", "NUMBER", "A", "quick", "fix", "would", "be", "the", "following", "marko", "class", "TAG", "TAG", "input", "NUMBER", "label", "TAG", "TAG", "TAG", "We", "plan", "on", "revisiting", "this", "limitation", "in", "the", "future", "NUMBER", "I", "will", "leave", "the", "issue", "open", "NUMBER", "This", "be", "relate", "to", "LINK", "js", "marko", "issue", "NUMBER", "mlrawlings", "We", "need", "to", "work", "on", "the", "fix", "for", "NUMBER", "The", "following", "template", "be", "not", "compiled", "as", "a", "UI", "component", "because", "of", "the", "surrounding", "TAG", "marko", "class", "onCreate", "input", "this", "NUMBER", "ate", "foo", "false", "onMount", "this", "NUMBER", "ate", "NUMBER", "foo", "true", "TAG", "TAG", "TAG", "TAG", "TAG", "Loading", "NUMBER", "TAG", "Keeping", "this", "issue", "so", "that", "we", "add", "it", "as", "a", "test", "case", "when", "we", "work", "on", "NUMBER", "Thanks", "TAG", "New", "Feature", "Description", "_list", "NUMBER", "marko_", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "_page", "NUMBER", "marko_", "marko", "TAG", "TAG", "input", "NUMBER", "name", "TAG", "TAG", "Open", "Questions", "TAG", "Typically", "TAG", "has", "be", "use", "to", "pass", "data", "to", "the", "tag", "not", "receive", "data", "NUMBER", "Is", "this", "a", "good", "pattern", "I", "think", "it", "would", "be", "confusing", "to", "use", "the", "parens", "to", "define", "variables", "for", "the", "renderBody", "function", "NUMBER", "I", "ll", "throw", "out", "something", "that", "might", "be", "a", "terrible", "idea", "marko", "TAG", "TAG", "data", "NUMBER", "name", "TAG", "TAG", "I", "m", "not", "really", "a", "fan", "of", "this", "either", "because", "technically", "it", "becomes", "function", "renderBody", "out", "data", "Maybe", "the", "following", "marko", "TAG", "TAG", "data", "NUMBER", "name", "TAG", "TAG", "With", "destructuring", "marko", "TAG", "TAG", "data", "NUMBER", "name", "TAG", "TAG", "See", "LINK", "client", "side", "rendering", "not", "work", "We", "either", "need", "to", "implement", "this", "method", "or", "throw", "an", "error", "and", "update", "the", "docs", "NUMBER", "We", "should", "implement", "it", "NUMBER", "This", "would", "be", "a", "great", "first", "contribution", "for", "anyone", "looking", "to", "get", "involved", "NUMBER", "harrisjose", "Please", "feel", "free", "NUMBER", "Just", "try", "to", "follow", "the", "code", "style", "and", "keep", "code", "fast", "and", "small", "NUMBER", "Here", "s", "where", "you", "will", "be", "make", "change", "LINK", "js", "marko", "blob", "NUMBER", "ce", "NUMBER", "ccf", "NUMBER", "d", "NUMBER", "cf", "NUMBER", "cba", "NUMBER", "f", "NUMBER", "c", "NUMBER", "d", "NUMBER", "d", "NUMBER", "runtime", "vdom", "AsyncVDOMBuilder", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "Keep", "in", "mind", "that", "getNode", "returns", "a", "DocumentFragment", "NUMBER", "DocumentFragment", "nodes", "do", "not", "support", "outerHTML", "which", "be", "why", "this", "be", "currently", "broken", "marko", "use", "to", "return", "the", "first", "top", "level", "HTML", "element", "node", "NUMBER", "Also", "test", "cases", "Thanks", "in", "advance", "Awesome", "And", "don", "t", "hesitate", "to", "ask", "any", "question", "NUMBER", "One", "of", "us", "will", "point", "you", "in", "the", "right", "direction", "harrisjose", "Yeah", "that", "seems", "to", "be", "the", "case", "NUMBER", "Sorry", "for", "taking", "so", "long", "to", "reply", "NUMBER", "Is", "this", "something", "you", "re", "still", "work", "on", "planning", "to", "work", "on", "The", "UI", "components", "compiler", "should", "ignore", "key", "attributes", "if", "the", "custom", "tag", "declares", "its", "own", "key", "attribute", "use", "marko", "tag", "NUMBER", "json", "NUMBER", "There", "could", "still", "be", "some", "confusion", "to", "developers", "but", "I", "think", "it", "s", "still", "the", "right", "thing", "to", "do", "NUMBER", "Putting", "the", "logging", "behind", "a", "flag", "attribute", "be", "definitely", "an", "option", "and", "I", "be", "not", "oppose", "to", "that", "NUMBER", "However", "if", "you", "need", "that", "level", "of", "control", "I", "would", "recommend", "not", "use", "the", "TAG", "tag", "and", "instead", "make", "sure", "there", "the", "promise", "be", "not", "rejected", "by", "provide", "your", "own", "NUMBER", "catch", "NUMBER", "For", "example", "var", "userInfoPromise", "getUserInfo", "NUMBER", "catch", "err", "return", "error", "err", "TAG", "TAG", "We", "be", "sorry", "we", "were", "unable", "to", "retrieve", "the", "user", "information", "NUMBER", "TAG", "TAG", "Hello", "userInfo", "NUMBER", "firstName", "TAG", "TAG", "Thoughts", "This", "proposal", "impacts", "how", "UI", "components", "be", "bootstrapped", "in", "the", "browser", "when", "the", "page", "be", "initially", "rendered", "on", "the", "server", "NUMBER", "This", "proposal", "improves", "performance", "on", "the", "server", "and", "it", "reduces", "the", "chances", "that", "a", "developer", "will", "run", "into", "problem", "relate", "to", "serialization", "deserialization", "of", "UI", "component", "state", "input", "properties", "when", "a", "page", "be", "rendered", "on", "the", "server", "NUMBER", "This", "proposal", "should", "maintain", "backwards", "compatibility", "in", "most", "cases", "but", "there", "be", "a", "few", "caveats", "see", "the", "Caveats", "section", "below", "NUMBER", "Current", "situation", "Currently", "each", "UI", "component", "rendered", "on", "the", "server", "will", "have", "its", "state", "input", "and", "properties", "serialized", "down", "to", "the", "browser", "NUMBER", "This", "works", "and", "it", "be", "relatively", "fast", "except", "there", "be", "a", "few", "issue", "Not", "everything", "be", "serializable", "All", "state", "input", "and", "properties", "for", "nested", "UI", "components", "can", "usually", "be", "derived", "from", "its", "top", "level", "UI", "component", "so", "it", "be", "most", "likely", "redundant", "to", "serialize", "data", "associated", "with", "nested", "components", "NOTE", "Marko", "will", "dedupe", "objects", "arrays", "but", "there", "be", "still", "excess", "serialization", "Not", "everything", "be", "serializable", "As", "an", "example", "a", "reference", "to", "a", "UI", "component", "class", "be", "not", "serializable", "as", "JSON", "NUMBER", "The", "following", "will", "not", "work", "as", "expected", "import", "someModule", "from", "NUMBER", "foo", "TAG", "The", "some", "module", "attribute", "will", "result", "in", "a", "property", "be", "add", "to", "the", "input", "for", "TAG", "but", "if", "someModule", "be", "a", "JavaScript", "module", "that", "has", "function", "then", "those", "function", "will", "not", "be", "include", "in", "the", "serialized", "input", "and", "someModule", "will", "_not_", "be", "a", "reference", "to", "the", "NUMBER", "foo", "module", "when", "the", "UI", "component", "mounts", "in", "the", "browser", "NUMBER", "Proposal", "Instead", "of", "serializing", "the", "input", "properties", "state", "of", "every", "UI", "component", "rendered", "on", "the", "server", "only", "serialize", "the", "information", "associated", "with", "the", "top", "level", "UI", "component", "s", "excluding", "top", "level", "split", "UI", "components", "that", "be", "not", "renderable", "in", "the", "browser", "NUMBER", "In", "addition", "a", "re", "render", "of", "top", "level", "UI", "components", "should", "be", "triggered", "when", "the", "top", "level", "UI", "component", "boots", "in", "the", "browser", "NUMBER", "A", "complete", "re", "render", "it", "be", "not", "actually", "necessary", "since", "there", "be", "no", "need", "to", "update", "the", "DOM", "in", "the", "browser", "i", "NUMBER", "e", "NUMBER", "there", "be", "no", "reason", "to", "render", "any", "virtual", "DOM", "nodes", "when", "booting", "in", "the", "browser", "NUMBER", "It", "be", "however", "necessary", "to", "run", "through", "all", "of", "the", "rendering", "logic", "in", "order", "to", "determine", "which", "UI", "components", "need", "to", "be", "created", "and", "to", "determine", "their", "input", "properties", "state", "NUMBER", "Caveats", "If", "a", "nested", "UI", "component", "derives", "its", "props", "state", "or", "generates", "input", "properties", "from", "anything", "other", "than", "pass", "in", "input", "e", "NUMBER", "g", "NUMBER", "this", "NUMBER", "locale", "out", "NUMBER", "global", "NUMBER", "locale", "then", "that", "information", "will", "not", "be", "available", "when", "the", "UI", "component", "mounts", "in", "the", "browser", "NUMBER", "Status", "This", "has", "be", "mostly", "implement", "on", "my", "machine", "and", "it", "be", "work", "well", "for", "the", "apps", "that", "I", "have", "test", "so", "far", "NUMBER", "More", "test", "and", "optimization", "still", "needs", "to", "be", "do", "NUMBER", "Thoughts", "Concerns", "Feedback", "Do", "you", "have", "a", "use", "case", "in", "mind", "Maybe", "some", "sample", "code", "that", "might", "make", "the", "need", "more", "clear", "Thanks", "for", "the", "clarification", "NUMBER", "A", "fix", "will", "go", "out", "with", "the", "next", "release", "NUMBER", "The", "value", "attribute", "be", "not", "valid", "for", "a", "TAG", "tag", "I", "suggest", "remove", "that", "NUMBER", "I", "haven", "t", "had", "a", "chance", "to", "verify", "but", "it", "appears", "that", "the", "n", "in", "the", "concise", "line", "be", "be", "preserved", "by", "the", "parser", "and", "add", "to", "the", "textarea", "body", "for", "every", "render", "NUMBER", "A", "temporary", "workaround", "would", "be", "to", "use", "the", "HTML", "syntax", "for", "the", "TAG", "tag", "div", "TAG", "input", "NUMBER", "value", "TAG", "We", "ll", "investigate", "a", "fix", "in", "Marko", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "That", "do", "indeed", "look", "like", "a", "bug", "NUMBER", "I", "ll", "investigate", "NUMBER", "The", "following", "line", "looks", "like", "the", "problem", "LINK", "js", "marko", "blob", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "cb", "NUMBER", "f", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "db", "NUMBER", "ed", "NUMBER", "runtime", "vdom", "helper", "styleAttr", "NUMBER", "js", "L", "NUMBER", "If", "value", "NUMBER", "then", "the", "if", "condition", "will", "not", "evaluate", "NUMBER", "Interested", "in", "submit", "a", "Pull", "Request", "to", "fix", "the", "problem", "Actually", "I", "m", "going", "to", "go", "ahead", "and", "take", "this", "one", "NUMBER", "There", "be", "some", "other", "change", "that", "I", "think", "need", "to", "be", "made", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Thanks", "for", "report", "the", "problem", "tldr", "Don", "t", "use", "split", "UI", "components", "unless", "there", "be", "a", "really", "good", "reason", "to", "do", "so", "When", "use", "a", "split", "component", "i", "NUMBER", "e", "NUMBER", "component", "browser", "NUMBER", "js", "component", "NUMBER", "js", "then", "the", "JavaScript", "module", "bundler", "e", "NUMBER", "g", "NUMBER", "Lasso", "NUMBER", "js", "will", "only", "send", "down", "the", "component", "browser", "NUMBER", "js", "and", "not", "component", "NUMBER", "js", "assuming", "it", "be", "not", "nested", "within", "in", "an", "un", "split", "component", "NUMBER", "NUMBER", "Split", "components", "allow", "the", "rendering", "logic", "to", "remain", "on", "the", "server", "instead", "of", "also", "be", "sent", "to", "the", "browser", "NUMBER", "However", "split", "UI", "components", "have", "the", "caveat", "that", "they", "cannot", "be", "rerendered", "unless", "the", "component", "NUMBER", "js", "be", "also", "sent", "down", "NUMBER", "You", "be", "seeing", "that", "error", "because", "component", "NUMBER", "js", "was", "not", "sent", "down", "to", "the", "browser", "and", "hence", "the", "rendering", "logic", "be", "miss", "in", "the", "browser", "for", "the", "UI", "component", "NUMBER", "The", "error", "message", "be", "cryptic", "and", "we", "should", "fix", "that", "we", "need", "to", "improve", "error", "message", "in", "development", "without", "add", "bloat", "in", "production", "NUMBER", "My", "advice", "would", "be", "to", "avoid", "use", "split", "UI", "components", "NUMBER", "Split", "UI", "components", "can", "have", "some", "benefits", "but", "they", "be", "usually", "a", "premature", "optimization", "with", "not", "too", "much", "gain", "NUMBER", "I", "m", "closing", "this", "issue", "because", "I", "think", "everything", "be", "work", "as", "intended", "I", "ll", "open", "a", "separate", "issue", "for", "improving", "the", "error", "message", "NUMBER", "If", "you", "still", "have", "question", "or", "concerns", "please", "feel", "free", "to", "add", "them", "here", "NUMBER", "It", "s", "amazing", "how", "simple", "it", "be", "to", "have", "universal", "components", "with", "Marko", "NUMBER", "Thanks", "for", "the", "feedback", "Currently", "the", "best", "option", "be", "to", "use", "a", "UI", "component", "to", "transfer", "the", "global", "variables", "to", "a", "shared", "module", "NUMBER", "Something", "like", "the", "following", "marko", "import", "myStore", "from", "NUMBER", "path", "to", "my", "store", "class", "onInput", "input", "out", "this", "NUMBER", "someImportantData", "out", "NUMBER", "global", "NUMBER", "someImportantData", "onMount", "myStore", "NUMBER", "setSomeImportantData", "this", "NUMBER", "someImportantData", "TAG", "TAG", "Any", "other", "UI", "component", "or", "JavaScript", "module", "can", "do", "something", "similar", "to", "the", "following", "marko", "import", "myStore", "from", "NUMBER", "path", "to", "my", "store", "var", "someImportantData", "myStore", "NUMBER", "getSomeImportantData", "I", "m", "thinking", "there", "might", "be", "value", "in", "some", "how", "marking", "certain", "globals", "as", "be", "serializable", "to", "the", "browser", "so", "that", "they", "will", "automatically", "show", "up", "in", "out", "NUMBER", "global", "on", "both", "the", "server", "and", "in", "the", "browser", "NUMBER", "I", "m", "going", "to", "explore", "this", "option", "some", "more", "and", "try", "to", "put", "together", "a", "proposal", "that", "makes", "this", "intuitive", "NUMBER", "rubennorte", "Would", "you", "be", "good", "with", "the", "following", "proposal", "marko", "class", "get", "globals", "return", "title", "TAG", "Title", "out", "NUMBER", "global", "NUMBER", "title", "TAG", "Basically", "the", "globals", "property", "on", "the", "component", "class", "definition", "would", "be", "use", "to", "specify", "the", "names", "of", "the", "global", "properties", "that", "should", "be", "serialized", "down", "to", "the", "browser", "NUMBER", "Look", "good", "Any", "other", "ideas", "rubennorte", "Would", "this", "pattern", "work", "for", "you", "Define", "and", "include", "a", "TAG", "component", "that", "runs", "before", "any", "other", "component", "on", "the", "page", "marko", "class", "onMount", "var", "global", "getImageUrl", "path", "LINK", "this", "NUMBER", "input", "NUMBER", "imageHost", "path", "window", "NUMBER", "out", "global", "global", "Then", "include", "it", "in", "your", "layout", "marko", "TAG", "Marko", "do", "not", "currently", "have", "a", "framework", "with", "native", "bindings", "like", "React", "Native", "but", "you", "can", "certainly", "create", "a", "static", "build", "of", "your", "app", "and", "use", "Phonegap", "etc", "NUMBER", "Check", "out", "marko", "phonegap", "LINK", "js", "samples", "marko", "phonegap", "Another", "developer", "build", "a", "mobile", "app", "use", "Marko", "Framework", "NUMBER", "LINK", "LINK", "I", "haven", "t", "use", "Framework", "NUMBER", "myself", "but", "it", "looks", "promising", "NUMBER", "I", "install", "the", "ConfEngine", "LINK", "NUMBER", "app", "build", "use", "Marko", "and", "Framework", "NUMBER", "and", "looks", "very", "nice", "on", "my", "iPhone", "NUMBER", "Thank", "you", "for", "the", "detailed", "problem", "report", "and", "the", "work", "app", "NUMBER", "Very", "helpful", "I", "put", "in", "a", "fix", "to", "make", "this", "issue", "less", "common", "but", "it", "has", "to", "do", "with", "the", "UI", "component", "first", "be", "rendered", "on", "the", "server", "and", "Marko", "not", "knowing", "that", "an", "attribute", "was", "add", "by", "an", "external", "library", "code", "NUMBER", "When", "rendered", "initially", "in", "the", "browser", "this", "would", "not", "have", "be", "an", "issue", "NUMBER", "The", "fix", "skips", "remove", "non", "Marko", "rendered", "attributes", "for", "keyed", "elements", "NUMBER", "The", "key", "be", "required", "to", "know", "for", "sure", "that", "the", "two", "elements", "be", "diffed", "be", "the", "matching", "elements", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "You", "be", "right", "that", "the", "error", "message", "be", "not", "helpful", "NUMBER", "I", "ve", "not", "seen", "that", "error", "message", "NUMBER", "Any", "suggestions", "on", "how", "to", "reproduce", "to", "see", "if", "we", "can", "improve", "the", "error", "message", "Are", "you", "only", "able", "to", "trigger", "the", "problem", "when", "use", "browser", "refresh", "and", "modifying", "template", "Your", "approach", "looks", "good", "to", "me", "NUMBER", "However", "you", "re", "trying", "to", "do", "root", "level", "text", "which", "may", "mess", "things", "up", "NUMBER", "Try", "wrapping", "your", "input", "and", "text", "within", "a", "TAG", "NUMBER", "Just", "wanted", "to", "mention", "that", "Marko", "has", "a", "know", "limitation", "LINK", "js", "marko", "issue", "NUMBER", "that", "do", "not", "allow", "dynamic", "top", "level", "HTML", "elements", "or", "text", "nodes", "NUMBER", "Once", "we", "fix", "NUMBER", "then", "the", "wrapping", "TAG", "would", "no", "longer", "be", "needed", "NUMBER", "We", "have", "some", "ideas", "on", "how", "to", "fix", "the", "issue", "but", "it", "s", "a", "little", "tricky", "NUMBER", "Thanks", "for", "report", "the", "problem", "with", "the", "website", "NUMBER", "We", "re", "investigating", "This", "has", "be", "fix", "NUMBER", "Thanks", "for", "report", "the", "problem", "We", "need", "to", "make", "this", "more", "clear", "in", "the", "docs", "but", "extend", "can", "not", "be", "use", "with", "component", "classes", "NUMBER", "The", "reason", "for", "this", "be", "that", "marko", "internally", "makes", "every", "UI", "component", "inherit", "from", "an", "internal", "Component", "class", "and", "you", "can", "t", "have", "multiple", "base", "classes", "NUMBER", "If", "you", "really", "want", "to", "do", "mixins", "then", "the", "following", "will", "work", "js", "class", "Component", "foo", "the", "following", "NUMBER", "lines", "code", "be", "work", "as", "expected", "NUMBER", "var", "bar", "new", "Bar", "bar", "NUMBER", "funcInMixin", "print", "funcInMixin", "call", "in", "console", "In", "fact", "we", "want", "component", "instance", "has", "mix", "function", "funcInMixin", "Unfortunately", "this", "NUMBER", "funcInMixin", "be", "undefined", "it", "cause", "unhandle", "exception", "this", "NUMBER", "funcInMixin", "var", "mixins", "funcInMixin", "NUMBER", "Object", "NUMBER", "assign", "Component", "NUMBER", "prototype", "mixins", "export", "default", "Component", "Does", "that", "work", "for", "you", "I", "m", "closing", "the", "issue", "but", "please", "feel", "free", "to", "add", "more", "comments", "here", "if", "you", "still", "have", "concerns", "or", "question", "NUMBER", "Can", "you", "not", "define", "both", "and", "use", "them", "only", "when", "you", "need", "to", "I", "think", "we", "need", "better", "error", "report", "here", "but", "a", "macro", "should", "only", "be", "declared", "once", "NUMBER", "Try", "add", "no", "update", "to", "the", "chart", "div", "TAG", "The", "reason", "it", "was", "happening", "in", "the", "first", "place", "was", "because", "marko", "s", "vdom", "logic", "was", "cause", "your", "chart", "div", "to", "revert", "back", "to", "what", "you", "ve", "write", "in", "the", "template", "NUMBER", "If", "you", "still", "want", "to", "make", "use", "of", "state", "NUMBER", "percent", "and", "thus", "marko", "s", "vdom", "then", "this", "structure", "might", "work", "better", "for", "you", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "Math", "NUMBER", "round", "state", "NUMBER", "percent", "TAG", "TAG", "TAG", "Update", "chart", "TAG", "TAG", "like", "props", "and", "state", "in", "react", "Yes", "that", "s", "correct", "NUMBER", "We", "ll", "be", "putting", "some", "proposals", "on", "the", "table", "soon", "but", "if", "anyone", "wants", "to", "share", "ideas", "or", "their", "favorite", "router", "please", "feel", "free", "NUMBER", "marko", "import", "Hello", "from", "NUMBER", "path", "to", "hello", "TAG", "In", "addition", "we", "could", "also", "overload", "the", "import", "syntax", "to", "allow", "importing", "a", "UI", "component", "based", "on", "the", "tag", "name", "marko", "import", "Hello", "from", "TAG", "TAG", "Hesulan", "you", "may", "be", "right", "NUMBER", "I", "ll", "throw", "out", "some", "other", "ideas", "import", "tag", "TAG", "as", "Hello", "import", "tag", "TAG", "if", "no", "as", "be", "specified", "then", "default", "to", "title", "case", "What", "s", "the", "use", "case", "for", "this", "Auto", "detection", "has", "worked", "pretty", "well", "for", "me", "so", "far", "that", "doesn", "t", "make", "me", "oppose", "to", "this", "though", "NUMBER", "From", "Gitter", "chat", "Eldar", "Eldar", "X", "Mar", "NUMBER", "NUMBER", "NUMBER", "patrick", "steele", "idem", "in", "component", "browser", "NUMBER", "js", "following", "not", "work", "js", "module", "NUMBER", "export", "class", "onCreate", "this", "NUMBER", "ate", "count", "NUMBER", "increment", "this", "NUMBER", "ate", "NUMBER", "count", "But", "this", "be", "okay", "js", "module", "NUMBER", "export", "onCreate", "this", "NUMBER", "ate", "count", "NUMBER", "increment", "this", "NUMBER", "ate", "NUMBER", "count", "Error", "message", "TypeError", "component", "NUMBER", "__setCustomEvents", "be", "not", "a", "function", "at", "Function", "NUMBER", "ComponentDef", "NUMBER", "__deserialize", "LINK", "at", "LINK", "at", "Array", "NUMBER", "forEach", "native", "at", "Object", "NUMBER", "initServerRendered", "as", "concat", "LINK", "at", "LINK", "at", "LINK", "I", "test", "with", "the", "upcoming", "Marko", "v", "NUMBER", "release", "and", "I", "be", "not", "able", "to", "reproduce", "NUMBER", "Eldar", "X", "Can", "you", "provide", "more", "details", "on", "how", "to", "reproduce", "the", "problem", "you", "mention", "in", "Gitter", "I", "m", "closing", "the", "issue", "for", "now", "but", "if", "it", "be", "still", "a", "problem", "please", "let", "me", "know", "NUMBER", "Thanks", "for", "report", "the", "problem", "eltimn", "NUMBER", "We", "find", "some", "issue", "when", "converting", "the", "VDOM", "nodes", "to", "actual", "DOM", "nodes", "for", "certain", "input", "controls", "NUMBER", "We", "put", "in", "some", "fix", "that", "will", "go", "out", "with", "the", "upcoming", "v", "NUMBER", "release", "scheduled", "for", "a", "little", "later", "today", "NUMBER", "Thanks", "again", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Thanks", "again", "NUMBER", "Thanks", "Are", "you", "interested", "in", "server", "side", "performance", "or", "client", "side", "performance", "or", "both", "For", "server", "side", "performance", "Marko", "v", "NUMBER", "be", "faster", "than", "Marko", "v", "NUMBER", "but", "not", "by", "a", "huge", "margin", "NUMBER", "On", "the", "client", "side", "however", "Marko", "v", "NUMBER", "be", "much", "much", "faster", "due", "to", "the", "introduction", "of", "VDOM", "rendering", "NUMBER", "Unfortunately", "I", "don", "t", "have", "a", "NUMBER", "to", "NUMBER", "benchmark", "for", "Marko", "v", "NUMBER", "vs", "Marko", "v", "NUMBER", "What", "I", "can", "say", "be", "that", "Marko", "v", "NUMBER", "be", "slower", "than", "React", "LINK", "steele", "idem", "marko", "vs", "react", "tree", "NUMBER", "d", "NUMBER", "de", "NUMBER", "d", "NUMBER", "bc", "NUMBER", "a", "NUMBER", "e", "NUMBER", "e", "NUMBER", "f", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "client", "side", "rendering", "performance", "Marko", "v", "NUMBER", "however", "be", "much", "faster", "than", "React", "Preact", "Inferno", "and", "Vue", "LINK", "js", "isomorphic", "ui", "benchmarks", "We", "just", "gave", "an", "internal", "talk", "at", "eBay", "and", "in", "the", "slides", "we", "talk", "about", "improvement", "that", "we", "made", "in", "v", "NUMBER", "and", "we", "also", "have", "a", "few", "slides", "on", "performance", "LINK", "v", "NUMBER", "I", "should", "also", "mention", "that", "Marko", "v", "NUMBER", "include", "a", "Marko", "v", "NUMBER", "compatibility", "layer", "to", "allow", "Marko", "v", "NUMBER", "and", "Marko", "v", "NUMBER", "components", "to", "be", "use", "together", "NUMBER", "We", "need", "to", "do", "a", "little", "more", "work", "to", "make", "the", "transition", "easier", "but", "if", "you", "be", "interested", "in", "going", "that", "route", "let", "us", "know", "NUMBER", "The", "Marko", "v", "NUMBER", "compatibility", "layer", "do", "increase", "the", "page", "weight", "so", "migrating", "UI", "components", "to", "Marko", "v", "NUMBER", "be", "recommended", "NUMBER", "Hopefully", "that", "helps", "you", "convince", "your", "team", "to", "upgrade", "to", "Marko", "v", "NUMBER", "If", "you", "need", "any", "more", "details", "let", "us", "know", "NUMBER", "Thanks", "New", "Feature", "Description", "Currently", "the", "only", "thing", "you", "can", "pass", "to", "the", "onClick", "attribute", "be", "a", "string", "which", "has", "to", "be", "a", "method", "on", "the", "parent", "component", "class", "NUMBER", "Now", "that", "we", "can", "access", "the", "component", "directly", "in", "the", "template", "I", "d", "like", "to", "propose", "be", "able", "to", "pass", "a", "function", "to", "call", "instead", "of", "a", "string", "or", "at", "least", "to", "pass", "the", "context", "for", "which", "the", "method", "should", "be", "invoked", "NUMBER", "Context", "This", "would", "open", "up", "the", "opportunity", "to", "call", "methods", "expose", "by", "child", "components", "without", "having", "to", "write", "methods", "on", "the", "main", "class", "just", "to", "facilitate", "a", "click", "taking", "an", "action", "on", "another", "component", "HTML", "TAG", "TAG", "TAG", "component", "NUMBER", "getComponent", "child", "NUMBER", "method", "args", "some", "arg", "Click", "Me", "TAG", "When", "transcluding", "components", "you", "be", "forced", "to", "jump", "through", "hoops", "in", "order", "to", "call", "a", "method", "on", "the", "component", "which", "be", "transcluding", "the", "content", "NUMBER", "This", "would", "allow", "you", "to", "expose", "the", "component", "to", "the", "transcluded", "content", "and", "call", "the", "method", "on", "it", "instead", "of", "the", "parent", "NUMBER", "HTML", "TAG", "TAG", "list", "NUMBER", "setSelected", "item", "data", "item", "class", "selected", "TAG", "Inside", "list", "HTML", "class", "setSelected", "item", "this", "NUMBER", "ate", "NUMBER", "selected", "item", "TAG", "TAG", "TAG", "Currently", "in", "order", "to", "set", "the", "selected", "item", "on", "List", "when", "the", "Card", "be", "clicked", "you", "have", "to", "do", "a", "chain", "like", "Card", "Click", "Call", "Parent", "Save", "Save", "state", "on", "Parent", "Pass", "state", "to", "list", "list", "save", "state", "pass", "selected", "to", "Card", "as", "var", "on", "include", "This", "be", "all", "because", "the", "context", "of", "card", "be", "not", "list", "despite", "it", "be", "use", "as", "a", "renderer", "child", "for", "List", "NUMBER", "If", "you", "could", "at", "least", "reference", "the", "component", "and", "pass", "it", "s", "method", "to", "the", "event", "handler", "it", "would", "allow", "for", "better", "reuse", "of", "components", "without", "having", "to", "bind", "everything", "up", "to", "the", "parent", "component", "and", "then", "back", "down", "just", "to", "set", "it", "s", "own", "internal", "state", "NUMBER", "I", "d", "much", "rather", "have", "Card", "be", "able", "to", "set", "state", "and", "call", "methods", "on", "List", "then", "have", "list", "emit", "an", "event", "that", "can", "be", "listened", "to", "by", "parents", "if", "they", "be", "so", "inclined", "NUMBER", "Now", "I", "m", "not", "suggesting", "that", "we", "just", "bind", "transcluded", "content", "to", "the", "components", "state", "as", "I", "m", "sure", "there", "be", "legit", "use", "cases", "for", "treating", "it", "separate", "NUMBER", "This", "would", "simply", "allow", "you", "to", "do", "either", "NUMBER", "As", "another", "example", "take", "a", "carousel", "which", "provides", "Forward", "and", "Backward", "methods", "but", "leaves", "it", "up", "to", "you", "to", "call", "them", "NUMBER", "Perhaops", "even", "offering", "a", "transcluded", "region", "within", "the", "component", "to", "place", "them", "NUMBER", "e", "NUMBER", "g", "NUMBER", "HTML", "TAG", "TAG", "TAG", "carousel", "NUMBER", "prev", "Prev", "TAG", "TAG", "carousel", "NUMBER", "next", "Next", "TAG", "TAG", "TAG", "This", "style", "of", "composed", "widgets", "allows", "me", "to", "reuse", "carousel", "in", "many", "ways", "without", "having", "to", "include", "a", "particular", "nav", "type", "into", "the", "component", "itself", "NUMBER", "I", "could", "provide", "another", "component", "in", "nav", "that", "handle", "it", "as", "a", "paged", "list", "for", "example", "NUMBER", "Possible", "Implementation", "I", "would", "suspect", "this", "be", "an", "easy", "change", "as", "a", "simple", "type", "check", "on", "the", "first", "argument", "should", "tell", "you", "if", "you", "be", "trying", "to", "call", "a", "method", "on", "the", "parent", "component", "String", "or", "a", "function", "Function", "NUMBER", "Discussion", "I", "ll", "admit", "I", "don", "t", "love", "the", "need", "for", "the", "arrow", "function", "but", "you", "need", "to", "supply", "context", "for", "the", "method", "execution", "so", "it", "s", "either", "that", "or", "signature", "like", "event", "method", "context", "NUMBER", "args", "or", "perhaps", "an", "object", "event", "m", "method", "c", "context", "NUMBER", "I", "could", "be", "misinterpreting", "your", "comments", "but", "I", "just", "want", "to", "make", "it", "clear", "that", "the", "following", "works", "in", "Marko", "v", "NUMBER", "because", "Marko", "v", "NUMBER", "support", "binding", "additional", "argument", "to", "an", "event", "handler", "see", "LINK", "codeon", "eventmethodname", "argscode", "jsx", "class", "setSelected", "item", "this", "NUMBER", "ate", "NUMBER", "selected", "item", "TAG", "TAG", "TAG", "The", "reason", "for", "not", "allow", "function", "to", "be", "use", "as", "the", "first", "argument", "to", "an", "event", "handler", "be", "that", "function", "cannot", "be", "serialized", "down", "to", "the", "browser", "if", "the", "page", "be", "rendered", "on", "the", "server", "function", "be", "not", "serializable", "as", "part", "of", "JSON", "NUMBER", "With", "Marko", "v", "NUMBER", "if", "the", "page", "be", "rendered", "on", "the", "server", "then", "event", "handlers", "will", "work", "as", "expected", "when", "the", "application", "boots", "in", "the", "browser", "NUMBER", "This", "be", "because", "we", "serialize", "the", "method", "name", "to", "the", "browser", "it", "s", "just", "a", "String", "and", "use", "that", "to", "handle", "the", "event", "in", "the", "browser", "NUMBER", "Does", "that", "clarify", "It", "clarifies", "why", "only", "strings", "be", "support", "thanks", "Unfortunately", "your", "example", "be", "exactly", "what", "I", "m", "trying", "to", "avoid", "NUMBER", "The", "selected", "state", "be", "not", "a", "property", "of", "the", "outer", "most", "component", "class", "it", "s", "a", "property", "of", "the", "List", "component", "TAG", "NUMBER", "I", "m", "trying", "to", "set", "the", "value", "for", "List", "from", "card", "without", "having", "to", "write", "the", "boiler", "plate", "on", "the", "outer", "most", "parent", "class", "NUMBER", "In", "order", "to", "have", "a", "click", "on", "card", "set", "List", "s", "selected", "property", "I", "have", "to", "write", "NUMBER", "HTML", "class", "setSelected", "item", "this", "NUMBER", "ate", "NUMBER", "selected", "item", "boilerplate", "TAG", "TAG", "TAG", "This", "might", "be", "OK", "for", "a", "single", "component", "in", "a", "template", "but", "when", "this", "component", "has", "NUMBER", "child", "components", "that", "also", "transcludes", "stuff", "says", "it", "s", "a", "Page", "component", "with", "multiple", "components", "in", "it", "s", "body", "then", "I", "end", "up", "with", "tons", "of", "these", "event", "handlers", "and", "state", "values", "NUMBER", "And", "the", "only", "reason", "I", "need", "them", "be", "to", "pass", "the", "state", "from", "the", "transcluded", "child", "to", "it", "s", "parent", "component", "NUMBER", "I", "believe", "this", "also", "causes", "the", "whole", "outer", "parent", "class", "to", "rerender", "because", "of", "a", "state", "change", "when", "the", "change", "was", "really", "internal", "to", "the", "list", "component", "NUMBER", "What", "I", "m", "really", "trying", "to", "achieve", "be", "this", "HTML", "class", "no", "state", "or", "event", "handlers", "TAG", "TAG", "TAG", "Clicking", "a", "card", "would", "just", "set", "List", "NUMBER", "setSelected", "card", "NUMBER", "item", "without", "bleeding", "function", "state", "into", "the", "outer", "class", "to", "facilitate", "NUMBER", "The", "only", "way", "I", "can", "do", "this", "now", "be", "to", "put", "card", "inside", "list", "s", "template", "then", "card", "can", "call", "list", "function", "directly", "but", "then", "my", "re", "usability", "be", "less", "because", "I", "can", "t", "supply", "different", "cards", "for", "different", "appearances", "NUMBER", "Does", "that", "make", "sense", "I", "have", "lots", "of", "examples", "where", "I", "m", "use", "transclusion", "in", "this", "way", "but", "the", "fact", "that", "the", "transcluded", "component", "template", "be", "not", "in", "the", "context", "of", "the", "component", "that", "s", "including", "it", "means", "I", "have", "to", "write", "boiler", "plate", "everytime", "NUMBER", "I", "can", "see", "this", "comment", "in", "the", "output", "of", "AttachBubbleEvents", "which", "seems", "to", "indicate", "you", "can", "provide", "a", "component", "ID", "for", "the", "method", "Attributes", "will", "have", "the", "following", "form", "on", "TAG", "TAG", "TAG", "But", "I", "can", "t", "seem", "to", "figure", "out", "how", "to", "invoke", "it", "NUMBER", "Is", "there", "a", "way", "to", "say", "what", "component", "the", "target_method", "should", "be", "call", "on", "This", "would", "solve", "my", "problem", "if", "I", "could", "target", "a", "specific", "component_id", "NUMBER", "It", "seems", "to", "be", "referenced", "again", "in", "getEventAttribute", "as", "TAG", "TAG", "TAG", "TAG", "TAG", "Thanks", "mindeavor", "I", "assume", "this", "would", "still", "require", "passing", "in", "selected", "to", "the", "list", "component", "to", "set", "it", "s", "state", "It", "s", "better", "but", "I", "still", "couldn", "t", "call", "methods", "on", "List", "from", "the", "event", "which", "be", "the", "other", "part", "I", "d", "like", "to", "do", "NUMBER", "All", "we", "need", "be", "a", "way", "to", "tell", "onClick", "which", "component", "we", "want", "the", "method", "call", "on", "assuming", "key", "id", "be", "set", "ont", "he", "target", "we", "want", "NUMBER", "onClick", "id", "method", "onClick", "id", "method", "onClick", "id", "method", "onClick", "method", "eventId", "id", "Anything", "like", "this", "that", "let", "us", "target", "the", "component", "to", "be", "call", "would", "solve", "all", "my", "issue", "But", "thanks", "for", "the", "tip", "mindeavor", "patrick", "steele", "idem", "Any", "advice", "Is", "it", "possible", "to", "set", "a", "target", "component", "for", "the", "method", "execution", "The", "code", "seems", "to", "elude", "to", "it", "but", "I", "can", "t", "figure", "out", "where", "it", "s", "set", "NUMBER", "I", "m", "guessing", "in", "the", "AST", "somewhere", "I", "m", "assuming", "you", "be", "use", "Marko", "v", "NUMBER", "and", "if", "so", "the", "following", "works", "if", "you", "want", "to", "dump", "to", "the", "console", "output", "console", "NUMBER", "log", "someVar", "someVar", "Or", "if", "you", "want", "to", "dump", "it", "to", "the", "browser", "as", "part", "of", "the", "HTML", "TAG", "JSON", "NUMBER", "ringify", "someVar", "TAG", "JSON", "NUMBER", "ringify", "will", "only", "work", "if", "the", "object", "you", "want", "to", "dump", "doesn", "t", "have", "circular", "references", "NUMBER", "If", "that", "be", "the", "case", "then", "you", "can", "use", "a", "util", "NUMBER", "inspect", "LINK", "util_util_inspect_object_options", "a", "builtin", "Node", "NUMBER", "js", "module", "for", "dumping", "to", "a", "String", "import", "util", "from", "util", "TAG", "util", "NUMBER", "inspect", "someVar", "TAG", "Hope", "that", "answers", "your", "question", "NUMBER", "seangates", "console", "NUMBER", "log", "do", "not", "return", "a", "value", "so", "the", "TAG", "tag", "will", "be", "empty", "but", "the", "value", "will", "be", "write", "to", "the", "console", "at", "least", "Scoped", "CSS", "be", "indeed", "useful", "but", "having", "just", "HTML", "means", "you", "have", "to", "write", "JavaScript", "inside", "non", "sytax", "highlight", "strings", "and", "just", "HTML", "be", "not", "even", "technically", "true", "since", "vue", "NUMBER", "js", "uses", "dots", "in", "attribute", "names", "LINK", "Modifiers", "NUMBER", "The", "HTML", "JS", "syntax", "be", "definitely", "a", "step", "forward", "in", "templating", "languages", "Hey", "folks", "support", "for", "scoped", "styles", "be", "something", "we", "thought", "about", "when", "work", "Marko", "v", "NUMBER", "and", "it", "be", "something", "we", "want", "to", "offer", "in", "the", "near", "future", "NUMBER", "The", "problem", "requires", "some", "thought", "because", "the", "solution", "needs", "to", "be", "compatible", "with", "the", "module", "bundler", "webpack", "lasso", "etc", "NUMBER", "and", "we", "would", "need", "to", "figure", "out", "how", "marko", "scoped", "styles", "would", "play", "nice", "with", "simple", "CSS", "and", "the", "various", "CSS", "preprocessor", "languages", "NUMBER", "thisguychris", "Since", "you", "mention", "that", "you", "be", "interested", "in", "work", "on", "this", "it", "would", "be", "great", "to", "hear", "some", "proposals", "NUMBER", "We", "need", "to", "find", "a", "good", "solution", "for", "Marko", "while", "considering", "exist", "solutions", "BEM", "LINK", "Scoped", "CSS", "in", "Vue", "LINK", "loader", "NUMBER", "vuejs", "NUMBER", "org", "en", "features", "scoped", "css", "NUMBER", "html", "React", "CSS", "modules", "LINK", "css", "modules", "etc", "NUMBER", "Let", "s", "see", "some", "ideas", "jordanbtucker", "I", "concede", "my", "incorrect", "point", "about", "the", "attribute", "names", "For", "code", "I", "m", "talking", "about", "code", "in", "HTML", "attribute", "value", "strings", "not", "script", "tags", "NUMBER", "I", "put", "a", "proposal", "on", "the", "table", "Proposal", "Scoped", "CSS", "use", "__", "prefix", "LINK", "js", "marko", "issue", "NUMBER", "Feedback", "greatly", "appreciated", "__tldr", "Use", "onCreate", "instead", "of", "constructor", "because", "of", "limitations", "associated", "with", "native", "ES", "NUMBER", "classes", "NUMBER", "__", "With", "the", "release", "of", "NUMBER", "we", "add", "support", "for", "an", "onCreate", "lifecycle", "method", "which", "was", "able", "to", "be", "aliased", "as", "constructor", "when", "use", "the", "class", "syntax", "to", "define", "a", "component", "NUMBER", "This", "was", "implement", "as", "a", "simple", "assignment", "LINK", "js", "marko", "blob", "e", "NUMBER", "b", "NUMBER", "c", "NUMBER", "d", "NUMBER", "a", "NUMBER", "a", "NUMBER", "a", "NUMBER", "d", "NUMBER", "c", "components", "defineComponent", "NUMBER", "js", "L", "NUMBER", "NUMBER", "Unfortunately", "we", "have", "discover", "that", "despite", "the", "claim", "that", "class", "be", "just", "syntactic", "sugar", "LINK", "US", "docs", "Web", "JavaScript", "Reference", "Classes", "over", "typical", "JS", "prototypal", "inheritance", "this", "be", "not", "actually", "the", "case", "NUMBER", "There", "be", "limitations", "around", "how", "the", "constructor", "be", "implement", "NUMBER", "Although", "the", "constructor", "be", "typeof", "function", "and", "instanceof", "Function", "it", "cannot", "be", "call", "without", "the", "new", "keyword", "and", "cannot", "use", "its", "prototype", "methods", "of", "call", "and", "apply", "NUMBER", "This", "prevents", "us", "from", "dynamically", "inheriting", "from", "Component", "which", "has", "a", "constructor", "that", "we", "would", "want", "to", "call", "_before_", "the", "user", "s", "constructor", "NUMBER", "Also", "Component", "be", "actually", "only", "inherited", "from", "in", "the", "browser", "NUMBER", "We", "didn", "t", "catch", "this", "earlier", "because", "we", "use", "the", "ES", "NUMBER", "equivalent", "of", "classes", "in", "our", "test", "because", "phantomJS", "which", "we", "use", "in", "our", "test", "suite", "do", "not", "support", "ES", "NUMBER", "Additionally", "onCreate", "be", "not", "_quite_", "the", "same", "as", "constructor", "NUMBER", "It", "be", "a", "lifecycle", "method", "that", "be", "call", "when", "the", "component", "be", "created", "NUMBER", "In", "the", "case", "of", "a", "server", "render", "handing", "off", "to", "the", "browser", "it", "do", "not", "get", "call", "when", "mounting", "in", "the", "browser", "NUMBER", "A", "component", "fires", "create", "input", "and", "render", "on", "the", "server", "and", "then", "_only_", "mount", "in", "the", "browser", "NUMBER", "The", "way", "ES", "NUMBER", "classes", "be", "implement", "would", "necessitate", "that", "constructor", "be", "call", "both", "on", "the", "server", "and", "in", "the", "browser", "for", "these", "isomorphic", "renders", "which", "be", "not", "what", "we", "d", "like", "NUMBER", "constructor", "will", "continue", "to", "work", "in", "from", "a", "single", "file", "component", "we", "already", "transpile", "to", "a", "plain", "object", "with", "an", "onCreate", "method", "but", "we", "will", "add", "a", "deprecation", "warning", "when", "use", "constructor", "NUMBER", "To", "summarize", "classes", "have", "issue", "LINK", "scene", "the", "two", "pillars", "of", "javascript", "ee", "NUMBER", "f", "NUMBER", "e", "NUMBER", "f", "NUMBER", "NUMBER", "r", "NUMBER", "fz", "NUMBER", "zy", "and", "internally", "Marko", "do", "not", "use", "true", "classes", "NUMBER", "We", "really", "only", "support", "the", "class", "syntax", "because", "it", "looks", "nice", "and", "you", "don", "t", "have", "to", "separate", "methods", "with", "commas", "NUMBER", "Is", "this", "also", "why", "I", "cannot", "use", "the", "extend", "keyword", "on", "a", "component", "class", "I", "would", "have", "assumed", "with", "a", "transpiler", "that", "I", "could", "inherit", "from", "a", "base", "classes", "but", "Marko", "throw", "an", "error", "about", "a", "component", "cannot", "be", "a", "function", "NUMBER", "This", "kind", "of", "sucks", "as", "there", "be", "methods", "I", "find", "myself", "having", "to", "add", "to", "components", "over", "and", "over", "because", "I", "can", "t", "just", "inherit", "a", "base", "component", "NUMBER", "I", "usually", "end", "up", "with", "an", "ugly", "mixin", "object", "NUMBER", "Fixed", "NUMBER", "New", "version", "of", "marko", "publish", "marko", "NUMBER", "CHANGELOG", "LINK", "js", "marko", "blob", "master", "CHANGELOG", "NUMBER", "md", "NUMBER", "jasonmacdonald", "Yeah", "we", "probably", "need", "to", "make", "this", "more", "clear", "but", "extend", "be", "not", "something", "we", "can", "support", "NUMBER", "Internally", "marko", "creates", "its", "own", "class", "for", "each", "component", "that", "extend", "our", "base", "Component", "LINK", "js", "marko", "blob", "master", "components", "Component", "NUMBER", "js", "class", "and", "components", "can", "t", "extend", "multiple", "classes", "NUMBER", "mixins", "be", "the", "way", "to", "go", "NUMBER", "Here", "s", "a", "question", "I", "ve", "had", "and", "maybe", "you", "could", "add", "to", "your", "documentation", "can", "you", "use", "TAG", "within", "components", "Thanks", "for", "the", "PR", "sorry", "for", "be", "slow", "to", "merge", "this", "PR", "We", "ll", "be", "publishing", "a", "new", "version", "of", "the", "site", "soon", "NUMBER", "leili", "NUMBER", "can", "you", "confirm", "that", "installing", "marko", "as", "jrop", "suggested", "works", "In", "any", "case", "we", "should", "make", "it", "clear", "in", "the", "docs", "that", "you", "need", "to", "have", "marko", "as", "a", "dependency", "of", "your", "project", "Thanks", "for", "the", "bug", "report", "NUMBER", "I", "will", "try", "to", "reproduce", "I", "be", "not", "able", "to", "reproduce", "the", "problem", "NUMBER", "Are", "you", "use", "Webpack", "Might", "need", "to", "take", "a", "closer", "look", "to", "see", "what", "be", "wrong", "with", "your", "setup", "NUMBER", "Convenience", "NUMBER", "I", "don", "t", "believe", "it", "s", "required", "That", "s", "a", "good", "question", "NUMBER", "We", "re", "actually", "going", "to", "make", "some", "relate", "change", "that", "we", "have", "be", "meaning", "to", "make", "that", "I", "suspect", "you", "will", "like", "NUMBER", "We", "ll", "get", "back", "to", "you", "soon", "NUMBER", "This", "looks", "great", "NUMBER", "Would", "you", "be", "interested", "in", "provide", "a", "work", "koa", "app", "in", "the", "following", "repo", "LINK", "js", "samples", "marko", "koa", "I", "add", "you", "as", "a", "collaborator", "Thanks", "I", "ll", "add", "some", "additional", "clarifications", "but", "that", "be", "a", "nice", "addition", "NUMBER", "Thanks", "again", "NUMBER", "Hey", "Jordan", "that", "s", "a", "very", "fair", "question", "NUMBER", "That", "was", "do", "for", "performance", "reasons", "since", "monkey", "patching", "the", "prototype", "chain", "be", "more", "efficient", "then", "monkey", "patching", "each", "res", "object", "that", "gets", "pass", "through", "for", "every", "request", "which", "be", "what", "would", "be", "required", "if", "we", "were", "to", "use", "middleware", "NUMBER", "With", "that", "said", "there", "might", "be", "hope", "in", "use", "the", "Express", "mount", "event", "LINK", "app", "NUMBER", "onmount", "to", "get", "access", "to", "the", "parent", "express", "app", "so", "that", "the", "prototype", "chain", "can", "be", "monkey", "patched", "NUMBER", "That", "requires", "more", "investigation", "though", "NUMBER", "If", "you", "or", "something", "else", "be", "able", "to", "make", "the", "following", "work", "then", "it", "be", "something", "we", "would", "consider", "js", "const", "express", "require", "express", "const", "marko", "require", "marko", "express", "const", "app", "express", "app", "NUMBER", "use", "marko", "marko", "should", "be", "a", "function", "call", "that", "returns", "an", "express", "app", "Alternatively", "it", "might", "not", "hurt", "to", "also", "support", "something", "like", "the", "following", "js", "require", "marko", "express", "response", "NUMBER", "patch", "express", "I", "believe", "the", "key", "attribute", "can", "only", "be", "applied", "to", "components", "NUMBER", "What", "be", "you", "trying", "to", "do", "The", "key", "attribute", "can", "only", "be", "use", "within", "the", "context", "of", "a", "component", "as", "it", "stands", "now", "NUMBER", "We", "should", "probably", "make", "this", "more", "clear", "in", "the", "docs", "with", "update", "text", "The", "key", "attribute", "can", "be", "applied", "to", "both", "HTML", "elements", "and", "custom", "tags", "for", "UI", "components", "within", "the", "context", "of", "a", "component", "s", "view", "template", "NUMBER", "I", "m", "going", "to", "give", "it", "some", "more", "thought", "and", "see", "if", "it", "makes", "sense", "to", "support", "the", "key", "attribute", "outside", "the", "context", "of", "a", "component", "view", "template", "NUMBER", "I", "did", "some", "more", "investigation", "and", "verify", "that", "Marko", "be", "handle", "this", "correctly", "NUMBER", "Keys", "be", "_scoped_", "IDs", "that", "be", "scoped", "within", "the", "context", "of", "a", "component", "NUMBER", "If", "there", "be", "no", "component", "then", "this", "NUMBER", "getEl", "elId", "wouldn", "t", "make", "sense", "NUMBER", "There", "should", "be", "a", "component", "definition", "for", "the", "template", "with", "the", "key", "either", "an", "inline", "class", "or", "a", "component", "NUMBER", "js", "in", "the", "same", "directory", "NUMBER", "If", "you", "have", "any", "question", "please", "let", "us", "know", "but", "everything", "appears", "to", "be", "work", "as", "expected", "NUMBER", "For", "consistency", "we", "should", "also", "automatically", "discover", "custom", "tags", "that", "be", "outside", "a", "directory", "A", "new", "version", "should", "be", "publish", "later", "today", "NUMBER", "Thanks", "Hey", "Fabien", "sorry", "for", "the", "slow", "response", "NUMBER", "You", "can", "do", "the", "following", "to", "break", "out", "of", "concise", "syntax", "mode", "TAG", "TAG", "primary", "TAG", "TAG", "Does", "that", "work", "for", "you", "We", "want", "all", "compiled", "Marko", "template", "to", "be", "loaded", "in", "strict", "mode", "to", "catch", "problem", "early", "NUMBER", "As", "an", "example", "Marko", "uses", "Object", "NUMBER", "freeze", "on", "the", "state", "object", "to", "prevent", "new", "properties", "from", "be", "add", "that", "won", "t", "be", "watched", "NUMBER", "Without", "strict", "mode", "add", "properties", "will", "silently", "fail", "NUMBER", "Marko", "automatically", "transpiles", "the", "class", "syntax", "into", "an", "object", "declaration", "so", "that", "the", "compiled", "template", "will", "be", "ES", "NUMBER", "compatible", "assuming", "you", "aren", "t", "use", "other", "ES", "NUMBER", "syntax", "NUMBER", "It", "produces", "something", "like", "the", "following", "_index", "NUMBER", "marko_", "jsx", "class", "foo", "bar", "TAG", "TAG", "Compiled", "output", "js", "use", "strict", "NUMBER", "var", "marko_component", "foo", "function", "bar", "function", "NUMBER", "With", "Marko", "v", "NUMBER", "we", "now", "create", "an", "instance", "of", "the", "UI", "component", "when", "rendering", "a", "UI", "component", "but", "the", "UI", "component", "instance", "be", "not", "publicly", "expose", "so", "it", "be", "not", "possible", "to", "call", "instance", "methods", "in", "the", "marko", "template", "code", "NUMBER", "This", "proposal", "introduces", "a", "new", "component", "variable", "that", "can", "be", "use", "to", "reference", "the", "UI", "component", "instance", "as", "shown", "below", "jsx", "class", "getFullName", "return", "this", "NUMBER", "input", "NUMBER", "firstName", "this", "NUMBER", "input", "NUMBER", "lastName", "TAG", "Hello", "component", "NUMBER", "getFullName", "TAG", "Thoughts", "Concerns", "or", "cc", "mlrawlings", "austinkelleher", "philidem", "mindeavor", "ramses", "NUMBER", "Just", "to", "be", "clear", "ramses", "NUMBER", "you", "be", "in", "favor", "of", "this", "proposal", "as", "be", "correct", "I", "think", "it", "makes", "sense", "to", "have", "as", "an", "option", "and", "see", "no", "harm", "in", "add", "it", "NUMBER", "I", "like", "this", "proposal", "too", "NUMBER", "Thanks", "for", "the", "feedback", "NUMBER", "I", "will", "work", "on", "implement", "this", "NUMBER", "You", "should", "be", "able", "to", "nest", "TAG", "tags", "but", "if", "you", "can", "run", "them", "in", "parallel", "that", "s", "better", "to", "do", "anyway", "NUMBER", "I", "believe", "Promise", "NUMBER", "all", "be", "your", "best", "bet", "NUMBER", "mauricionr", "Are", "you", "rendering", "this", "client", "side", "or", "server", "side", "Hesulan", "Thanks", "for", "report", "marko", "NUMBER", "rc", "NUMBER", "has", "be", "publish", "with", "the", "fix", "Thanks", "for", "the", "feedback", "mauricionr", "Just", "to", "add", "to", "what", "Hesulan", "said", "minification", "and", "minprops", "LINK", "not", "yet", "documented", "be", "the", "only", "two", "things", "that", "be", "strongly", "recommended", "for", "production", "build", "NUMBER", "But", "yes", "we", "will", "be", "publishing", "a", "guide", "for", "production", "build", "NUMBER", "I", "ll", "keep", "this", "issue", "open", "as", "a", "reminder", "NUMBER", "Thanks", "again", "Marko", "v", "NUMBER", "support", "scoped", "vars", "jsx", "TAG", "The", "x", "and", "y", "be", "scoped", "to", "this", "block", "NUMBER", "TAG", "We", "moved", "from", "TAG", "to", "var", "and", "need", "to", "rethink", "support", "for", "scoped", "variables", "in", "Marko", "v", "NUMBER", "cc", "ramses", "NUMBER", "Need", "to", "either", "add", "an", "error", "message", "or", "make", "change", "to", "support", "dynamic", "top", "level", "HTML", "elements", "NUMBER", "cc", "ramses", "NUMBER", "Related", "marko", "class", "test", "console", "NUMBER", "log", "test", "TAG", "TAG", "TAG", "Throws", "ReferenceError", "__component", "be", "not", "defined", "try", "online", "LINK", "online", "gist", "e", "NUMBER", "ea", "NUMBER", "d", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "e", "NUMBER", "f", "NUMBER", "b", "gist", "LINK", "Adding", "a", "wrapper", "TAG", "or", "even", "a", "sibling", "TAG", "causes", "the", "__component", "variable", "to", "be", "pull", "in", "properly", "NUMBER", "Thanks", "for", "open", "this", "bug", "report", "smulder", "NUMBER", "We", "ll", "take", "a", "look", "NUMBER", "Good", "news", "can", "already", "use", "the", "include", "tag", "for", "this", "html", "TAG", "Include", "actually", "looks", "for", "a", "renderBody", "property", "if", "its", "an", "object", "so", "this", "works", "as", "well", "html", "TAG", "Yeah", "but", "data", "isn", "t", "going", "anywhere", "anytime", "soon", "and", "we", "won", "t", "be", "add", "deprecation", "warnings", "for", "it", "right", "away", "either", "NUMBER", "But", "all", "the", "docs", "for", "Marko", "NUMBER", "will", "reference", "input", "When", "users", "see", "TAG", "they", "think", "it", "s", "native", "JavaScript", "and", "try", "to", "do", "fancy", "ES", "NUMBER", "stuff", "like", "destructuring", "NUMBER", "Here", "s", "an", "actual", "attempt", "TAG", "I", "have", "two", "suggestions", "not", "mutually", "exclusive", "NUMBER", "Rename", "for", "to", "each", "to", "avoid", "confusion", "NUMBER", "Give", "for", "native", "JS", "code", "support", "This", "would", "be", "the", "last", "nail", "in", "the", "uncanny", "JavaScript", "like", "tags", "coffin", "NUMBER", "tinovyatkin", "Can", "you", "provide", "more", "details", "When", "run", "the", "test", "the", "file", "line", "shows", "up", "correctly", "NUMBER", "WARNING", "The", "TAG", "tag", "be", "deprecate", "NUMBER", "Please", "use", "TAG", "for", "JavaScript", "in", "the", "template", "NUMBER", "See", "LINK", "js", "marko", "wiki", "Deprecation", "var", "assign", "invoke", "tags", "at", "test", "autotests", "render", "invoke", "template", "NUMBER", "marko", "NUMBER", "NUMBER", "Is", "the", "TAG", "node", "be", "add", "dynamically", "somehow", "Failure", "be", "intermittent", "NUMBER", "Thanks", "for", "report", "this", "issue", "NUMBER", "This", "be", "a", "result", "of", "LINK", "js", "marko", "issue", "NUMBER", "I", "will", "have", "a", "fix", "up", "soon", "NUMBER", "This", "should", "be", "fix", "now", "NUMBER", "A", "new", "version", "should", "be", "publish", "later", "today", "NUMBER", "The", "CI", "build", "fail", "looks", "to", "be", "an", "intermittent", "failure", "NUMBER", "Currently", "Marko", "support", "scoped", "IDs", "in", "the", "form", "of", "a", "ref", "html", "TAG", "TAG", "OK", "TAG", "TAG", "Cancel", "TAG", "TAG", "A", "nested", "element", "widget", "can", "be", "looked", "up", "by", "a", "ref", "js", "var", "okButton", "this", "NUMBER", "getEl", "button", "A", "ref", "attribute", "results", "in", "an", "ID", "attribute", "be", "assigned", "to", "the", "final", "element", "NUMBER", "For", "example", "html", "TAG", "TAG", "OK", "TAG", "TAG", "Cancel", "TAG", "TAG", "morphdom", "LINK", "steele", "idem", "morphdom", "uses", "the", "id", "attribute", "as", "a", "key", "to", "match", "up", "elements", "during", "a", "diff", "patch", "NUMBER", "Therefore", "marko", "be", "use", "the", "ref", "attribute", "for", "two", "purposes", "To", "assign", "a", "key", "for", "diffing", "patching", "To", "assign", "a", "key", "for", "referencing", "nested", "elements", "widgets", "A", "key", "be", "the", "more", "general", "term", "scoped", "id", "be", "more", "appropriate", "but", "too", "long", "and", "key", "be", "already", "well", "understood", "to", "be", "use", "for", "matching", "up", "elements", "during", "diffing", "patching", "NUMBER", "As", "a", "late", "breaking", "change", "for", "the", "Marko", "v", "NUMBER", "release", "we", "want", "to", "rename", "ref", "to", "key", "NUMBER", "We", "will", "introduce", "deprecation", "warnings", "but", "we", "do", "not", "want", "to", "ship", "the", "v", "NUMBER", "release", "with", "support", "for", "ref", "NUMBER", "Thoughts", "Concerns", "Thanks", "in", "advance", "NUMBER", "I", "think", "this", "be", "a", "good", "change", "NUMBER", "Does", "use", "a", "ref", "prevent", "the", "element", "from", "be", "messed", "with", "during", "a", "redraw", "Hesulan", "For", "better", "or", "worse", "React", "and", "all", "of", "the", "React", "variants", "have", "already", "hijacked", "the", "key", "attribute", "LINK", "and", "keys", "NUMBER", "html", "keys", "The", "key", "attribute", "that", "we", "be", "proposing", "for", "Marko", "would", "serve", "the", "exact", "same", "purpose", "as", "developers", "be", "use", "to", "with", "React", "NUMBER", "The", "only", "difference", "be", "that", "we", "would", "also", "be", "use", "the", "key", "attribute", "to", "allow", "an", "element", "widget", "to", "be", "referenced", "by", "the", "key", "that", "be", "getEl", "TAG", "getWidget", "TAG", "NUMBER", "In", "comparison", "React", "has", "a", "separate", "concept", "of", "a", "ref", "which", "start", "out", "as", "a", "string", "but", "be", "now", "a", "function", "jsx", "TAG", "this", "NUMBER", "textInput", "input", "That", "be", "another", "reason", "we", "want", "to", "get", "away", "from", "ref", "NUMBER", "side", "note", "React", "requires", "a", "lot", "of", "code", "to", "reference", "an", "element", "NUMBER", "uggh", "mindeavor", "Does", "use", "a", "ref", "prevent", "the", "element", "from", "be", "messed", "with", "during", "a", "redraw", "No", "it", "doesn", "t", "impact", "rendering", "NUMBER", "It", "only", "impacts", "how", "elements", "be", "matched", "up", "for", "diffing", "purposes", "NUMBER", "DOM", "elements", "with", "the", "same", "key", "be", "guaranteed", "to", "be", "diffed", "against", "each", "other", "NUMBER", "Even", "without", "specify", "a", "key", "things", "will", "still", "render", "correctly", "but", "the", "developer", "might", "notice", "unexpect", "behavior", "e", "NUMBER", "g", "NUMBER", "focus", "moving", "to", "the", "wrong", "element", "or", "CSS", "transitions", "be", "applied", "incorrectly", "NUMBER", "Also", "just", "to", "be", "clear", "this", "would", "be", "a", "simple", "internal", "rename", "from", "ref", "to", "key", "NUMBER", "It", "would", "require", "minimal", "code", "change", "although", "we", "would", "have", "to", "go", "fix", "all", "of", "the", "test", "and", "sample", "apps", "NUMBER", "Thanks", "for", "taking", "this", "on", "austinkelleher", "We", "want", "to", "show", "a", "deprecation", "warning", "initially", "and", "publish", "a", "new", "rc", "release", "NUMBER", "We", "will", "completely", "remove", "support", "for", "ref", "and", "the", "deprecation", "warnings", "when", "we", "do", "the", "final", "v", "NUMBER", "release", "NUMBER", "Just", "to", "clarify", "you", "meant", "to", "say", "because", "a", "joined", "empty", "array", "be", "falsey", "correct", "getTemplateData", "was", "necessary", "for", "v", "NUMBER", "widgets", "because", "there", "was", "only", "data", "pass", "to", "the", "template", "and", "we", "needed", "some", "way", "to", "get", "state", "into", "the", "template", "as", "well", "as", "any", "input", "data", "you", "might", "have", "also", "needed", "NUMBER", "In", "v", "NUMBER", "your", "template", "receives", "an", "input", "variable", "also", "aliased", "as", "data", "for", "compatibility", "and", "a", "separate", "state", "variable", "be", "available", "to", "your", "template", "if", "you", "set", "this", "NUMBER", "ate", "in", "your", "component", "s", "class", "NUMBER", "You", "can", "then", "access", "both", "state", "and", "input", "in", "your", "template", "NUMBER", "You", "no", "longer", "need", "getTemplateData", "to", "make", "this", "data", "available", "to", "your", "template", "NUMBER", "If", "you", "need", "to", "massage", "the", "input", "data", "that", "be", "be", "pass", "in", "as", "input", "you", "can", "return", "a", "different", "value", "from", "onInput", "NUMBER", "Old", "js", "module", "NUMBER", "export", "require", "marko", "widgets", "NUMBER", "defineComponent", "template", "require", "NUMBER", "template", "NUMBER", "marko", "getInitialState", "input", "return", "count", "NUMBER", "color", "input", "NUMBER", "color", "getTemplateData", "state", "input", "return", "state", "increment", "this", "NUMBER", "setState", "count", "this", "NUMBER", "ate", "NUMBER", "count", "NUMBER", "xml", "TAG", "The", "current", "count", "be", "TAG", "data", "NUMBER", "count", "TAG", "TAG", "NUMBER", "TAG", "TAG", "New", "jsx", "class", "constructor", "input", "this", "NUMBER", "ate", "count", "NUMBER", "increment", "this", "NUMBER", "ate", "NUMBER", "count", "TAG", "The", "current", "count", "be", "TAG", "state", "NUMBER", "count", "TAG", "TAG", "NUMBER", "TAG", "TAG", "getTemplateData", "was", "technically", "part", "of", "the", "v", "NUMBER", "style", "legacy", "widgets", "but", "the", "code", "was", "so", "intermixed", "that", "you", "could", "still", "use", "certain", "legacy", "methods", "with", "the", "new", "components", "NUMBER", "That", "code", "has", "now", "be", "split", "out", "be", "there", "still", "a", "need", "for", "it", "or", "was", "it", "just", "surprising", "I", "wouldn", "t", "recommend", "it", "but", "you", "could", "do", "the", "following", "jsx", "import", "getTemplateData", "from", "NUMBER", "component", "var", "data", "getTemplateData", "state", "input", "TAG", "Hello", "data", "NUMBER", "name", "TAG", "Currently", "if", "you", "have", "a", "template", "with", "the", "following", "xml", "TAG", "The", "following", "HTML", "will", "be", "output", "xml", "TAG", "TAG", "We", "should", "instead", "throw", "an", "Error", "if", "the", "tag", "be", "not", "a", "standard", "HTML", "tag", "or", "has", "not", "be", "defined", "as", "a", "Marko", "custom", "tag", "NUMBER", "This", "will", "help", "catch", "typo", "as", "well", "as", "users", "who", "might", "accidentally", "write", "concise", "style", "tags", "at", "the", "root", "when", "they", "meant", "text", "or", "tried", "to", "write", "JS", "NUMBER", "If", "you", "be", "use", "webcomponents", "you", "will", "be", "able", "to", "list", "those", "tags", "in", "a", "marko", "NUMBER", "json", "file", "NUMBER", "The", "Error", "message", "will", "contain", "helpful", "info", "NUMBER", "Something", "like", "Marko", "do", "not", "recognize", "the", "TAG", "tag", "NUMBER", "Did", "you", "mean", "TAG", "If", "you", "do", "want", "to", "output", "the", "TAG", "tag", "as", "HTML", "you", "can", "whitelist", "it", "in", "your", "marko", "NUMBER", "json", "file", "NUMBER", "See", "LINK", "for", "more", "info", "NUMBER", "jsumners", "see", "the", "comment", "from", "mlrawlings", "above", "NUMBER", "The", "idea", "be", "that", "you", "would", "need", "to", "whitelist", "the", "custom", "elements", "by", "registering", "them", "in", "your", "project", "s", "marko", "NUMBER", "json", "_src", "marko", "NUMBER", "json", "_", "js", "TAG", "empty", "It", "s", "a", "tradeoff", "but", "I", "be", "in", "favor", "of", "catching", "problem", "earlier", "at", "compile", "time", "NUMBER", "I", "suppose", "we", "could", "come", "up", "with", "a", "way", "for", "declaring", "non", "standard", "tags", "as", "be", "tags", "that", "should", "passthrough", "NUMBER", "For", "example", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "I", "m", "not", "saying", "that", "be", "a", "good", "idea", "but", "I", "be", "just", "through", "that", "out", "there", "NUMBER", "Personally", "I", "think", "registering", "the", "tag", "in", "marko", "NUMBER", "json", "be", "a", "reasonable", "tradeoff", "since", "you", "also", "get", "autocompletion", "for", "free", "and", "better", "error", "checking", "and", "report", "at", "compile", "time", "NUMBER", "We", "do", "already", "throw", "error", "for", "mismatched", "tags", "NUMBER", "This", "may", "come", "up", "more", "in", "concise", "mode", "since", "the", "tag", "do", "not", "need", "to", "be", "repeated", "but", "also", "in", "HTML", "when", "use", "the", "self", "closing", "syntax", "NUMBER", "I", "m", "not", "sure", "this", "be", "a", "good", "idea", "but", "we", "could", "have", "a", "global", "off", "switch", "for", "this", "behavior", "if", "there", "be", "users", "that", "be", "heavily", "use", "Custom", "Elements", "and", "don", "t", "wish", "to", "list", "them", "all", "NUMBER", "If", "there", "was", "info", "about", "how", "to", "do", "that", "in", "the", "docs", "linked", "in", "the", "error", "I", "think", "that", "would", "eliminate", "any", "potential", "confusion", "NUMBER", "I", "think", "jsumners", "has", "a", "point", "NUMBER", "It", "might", "only", "make", "sense", "to", "throw", "an", "error", "on", "a", "would", "be", "concise", "tag", "NUMBER", "My", "vote", "be", "for", "disabling", "concise", "mode", "by", "default", "with", "exception", "for", "class", "import", "and", "export", "and", "make", "it", "easy", "to", "enable", "it", "via", "a", "flag", "NUMBER", "That", "should", "solve", "most", "all", "confusion", "around", "syntax", "NUMBER", "I", "can", "definitely", "see", "how", "having", "many", "tags", "to", "whitelist", "would", "be", "annoying", "NUMBER", "For", "example", "a", "frame", "LINK", "has", "NUMBER", "custom", "tags", "implement", "as", "web", "components", "NUMBER", "But", "if", "we", "allow", "you", "to", "whitelist", "patterns", "like", "TAG", "it", "wouldn", "t", "be", "too", "bad", "NUMBER", "Hesulan", "If", "we", "re", "doing", "this", "it", "needs", "to", "be", "the", "default", "as", "one", "of", "the", "big", "reasons", "for", "these", "kind", "of", "helpful", "error", "message", "be", "to", "help", "beginners", "who", "likely", "won", "t", "realize", "there", "s", "some", "way", "to", "opt", "in", "to", "warnings", "NUMBER", "mindeavor", "My", "vote", "be", "for", "disabling", "concise", "mode", "by", "default", "While", "we", "could", "put", "some", "modifier", "in", "the", "template", "e", "NUMBER", "g", "NUMBER", "concise", "I", "don", "t", "like", "the", "idea", "that", "concise", "users", "would", "have", "to", "put", "boilerplate", "in", "every", "file", "NUMBER", "Putting", "that", "configuration", "in", "a", "separate", "file", "would", "break", "syntax", "highlight", "so", "that", "would", "not", "be", "an", "option", "NUMBER", "Root", "level", "text", "would", "also", "be", "an", "issue", "if", "there", "was", "some", "global", "way", "to", "turn", "concise", "on", "or", "off", "because", "what", "would", "be", "parsed", "as", "text", "in", "HTML", "mode", "would", "be", "parsed", "as", "concise", "tags", "in", "concise", "mode", "NUMBER", "I", "m", "not", "convinced", "this", "be", "the", "right", "idea", "but", "we", "could", "also", "only", "have", "the", "warning", "for", "tags", "names", "without", "dashes", "in", "their", "name", "NUMBER", "Custom", "Elements", "require", "hyphens", "in", "their", "names", "LINK", "elements", "valid", "custom", "element", "name", "so", "we", "wouldn", "t", "catch", "those", "tags", "with", "this", "rule", "NUMBER", "When", "build", "a", "complex", "project", "you", "will", "often", "need", "to", "rename", "a", "UI", "component", "NUMBER", "It", "would", "be", "_really_", "nice", "if", "you", "could", "recompile", "all", "of", "your", "template", "to", "figure", "out", "exactly", "which", "UI", "components", "broke", "as", "a", "result", "of", "the", "name", "change", "NUMBER", "I", "m", "strongly", "in", "favor", "of", "throw", "an", "error", "when", "the", "Marko", "detects", "an", "unrecognized", "tag", "as", "long", "as", "we", "get", "the", "error", "message", "perfect", "the", "developer", "should", "know", "exactly", "what", "to", "do", "to", "register", "the", "tag", "and", "it", "should", "be", "super", "simple", "NUMBER", "I", "don", "t", "like", "the", "idea", "that", "concise", "users", "would", "have", "to", "put", "boilerplate", "in", "every", "file", "Sorry", "I", "meant", "a", "global", "flag", "NUMBER", "Something", "like", "require", "marko", "compiler", "NUMBER", "config", "conciseSyntax", "true", "Sorry", "I", "meant", "a", "global", "flag", "NUMBER", "Something", "like", "require", "marko", "compiler", "NUMBER", "config", "conciseSyntax", "true", "That", "won", "t", "work", "because", "the", "syntax", "highlighter", "would", "not", "have", "that", "context", "and", "do", "syntax", "highlight", "independently", "NUMBER", "Can", "there", "not", "be", "two", "highlighter", "definitions", "Sublime", "support", "it", "at", "least", "NUMBER", "Someone", "enabling", "conciseSyntax", "true", "will", "know", "that", "they", "re", "opting", "into", "extra", "syntax", "and", "that", "they", "ll", "want", "to", "change", "to", "the", "relevant", "highlighter", "if", "they", "want", "those", "niceties", "NUMBER", "Hesulan", "I", "don", "t", "dislike", "concise", "mode", "per", "se", "I", "only", "point", "out", "that", "support", "both", "concise", "and", "normal", "syntax", "at", "the", "same", "time", "be", "the", "root", "of", "all", "these", "problem", "NUMBER", "If", "concise", "were", "opt", "in", "all", "the", "pitfalls", "disappear", "or", "at", "least", "be", "hidden", "behind", "a", "global", "flag", "NUMBER", "If", "concise", "were", "disabled", "ramses", "NUMBER", "s", "examples", "of", "surprises", "would", "no", "longer", "be", "surprising", "they", "would", "do", "what", "you", "d", "expect", "in", "any", "HTML", "document", "NUMBER", "html", "this", "be", "for", "you", "TAG", "Test", "TAG", "var", "not_a_var", "this", "be", "just", "text", "just", "like", "HTML", "for", "this", "be", "text", "as", "well", "interpolated", "value", "console", "NUMBER", "log", "this", "be", "JS", "code", "NUMBER", "Iffy", "but", "acceptable", "I", "be", "plain", "text", "TAG", "No", "problem", "here", "TAG", "Hesulan", "As", "clarification", "the", "idea", "for", "this", "originally", "stemmed", "from", "the", "discussion", "we", "mindeavor", "ramses", "NUMBER", "and", "I", "had", "on", "how", "to", "reduce", "any", "confusion", "around", "syntax", "specifically", "concise", "syntax", "at", "the", "root", "but", "I", "think", "it", "has", "enough", "merit", "to", "stand", "on", "its", "own", "NUMBER", "That", "it", "would", "throw", "an", "error", "for", "unintentional", "concise", "tags", "at", "the", "root", "be", "only", "one", "benefit", "NUMBER", "Related", "to", "this", "Patrick", "and", "I", "be", "looking", "at", "creating", "a", "standard", "of", "sort", "that", "could", "be", "adopted", "by", "web", "component", "libraries", "to", "make", "their", "custom", "tags", "visible", "to", "tooling", "NUMBER", "Marko", "s", "autocomplete", "in", "Atom", "was", "originally", "forked", "from", "autocomplete", "html", "LINK", "html", "and", "it", "was", "extend", "to", "autocomplete", "not", "just", "HTML", "elements", "but", "also", "Marko", "custom", "tags", "that", "were", "discover", "through", "directory", "scanning", "and", "marko", "NUMBER", "json", "file", "NUMBER", "We", "re", "thinking", "that", "we", "could", "submit", "a", "PR", "back", "to", "the", "original", "package", "that", "would", "support", "discovering", "an", "html", "elements", "NUMBER", "json", "in", "project", "but", "also", "at", "the", "root", "of", "any", "package", "that", "the", "project", "depends", "on", "NUMBER", "This", "process", "and", "the", "format", "of", "the", "json", "file", "would", "be", "similar", "to", "the", "Marko", "process", "and", "format", "which", "has", "worked", "well", "for", "us", "NUMBER", "This", "would", "allow", "a", "web", "component", "package", "to", "simply", "add", "this", "file", "which", "could", "be", "generate", "and", "autocomplete", "would", "be", "made", "available", "to", "the", "autocomplete", "html", "package", "which", "has", "over", "NUMBER", "k", "downloads", "NUMBER", "There", "s", "an", "immediate", "benefit", "to", "doing", "so", "but", "future", "tool", "would", "also", "be", "able", "to", "make", "use", "of", "this", "information", "NUMBER", "And", "of", "course", "so", "would", "Marko", "NUMBER", "If", "we", "could", "get", "the", "web", "community", "to", "adopt", "this", "it", "would", "mean", "you", "might", "never", "or", "rather", "rarely", "have", "to", "add", "definitions", "exception", "for", "third", "party", "custom", "element", "tags", "on", "your", "own", "NUMBER", "That", "s", "definitely", "a", "big", "IF", "but", "between", "reaching", "out", "to", "other", "developers", "possibly", "make", "some", "PRs", "to", "popular", "libraries", "and", "the", "fact", "that", "there", "s", "benefit", "to", "the", "libraries", "and", "end", "users", "it", "s", "not", "purely", "driven", "by", "a", "need", "of", "Marko", "it", "could", "very", "well", "work", "NUMBER", "Great", "idea", "NUMBER", "I", "fully", "support", "that", "NUMBER", "Hesulan", "Saving", "people", "from", "root", "level", "text", "be", "the", "whole", "point", "of", "this", "thread", "isn", "t", "it", "It", "s", "only", "a", "problem", "because", "of", "automatic", "concise", "mode", "NUMBER", "This", "will", "help", "catch", "typo", "as", "well", "as", "users", "who", "might", "accidentally", "write", "concise", "style", "tags", "at", "the", "root", "when", "they", "meant", "text", "or", "tried", "to", "write", "JS", "NUMBER", "Hesulan", "I", "know", "the", "goal", "be", "to", "prevent", "typo", "but", "the", "only", "reason", "this", "came", "up", "be", "because", "of", "concise", "mode", "NUMBER", "After", "all", "any", "custom", "element", "tag", "be", "valid", "HTML", "NUMBER", "In", "principle", "there", "should", "be", "no", "error", "throw", "because", "an", "unknown", "tag", "be", "NUMBER", "valid", "in", "the", "browser", "NUMBER", "However", "in", "practice", "I", "don", "t", "feel", "that", "strongly", "about", "it", "and", "wouldn", "t", "mind", "if", "these", "error", "made", "it", "in", "NUMBER", "Actually", "this", "just", "dawned", "on", "me", "custom", "element", "tags", "be", "only", "valid", "HTML", "if", "they", "contain", "a", "dash", "within", "the", "name", "LINK", "h", "note", "NUMBER", "NUMBER", "Since", "JavaScript", "keywords", "nor", "identifiers", "can", "contain", "dashes", "doesn", "t", "that", "mean", "there", "be", "only", "a", "reason", "to", "throw", "error", "on", "unrecognized", "single", "word", "tags", "oops", "I", "totally", "miss", "his", "comment", "on", "that", "I", "still", "think", "starting", "with", "throw", "on", "all", "unrecognized", "tags", "be", "a", "sane", "default", "and", "the", "error", "message", "would", "point", "you", "to", "information", "on", "how", "to", "configure", "things", "Configuring", "in", "marko", "NUMBER", "json", "Throw", "on", "any", "unrecognized", "tag", "default", "value", "js", "ignore", "unrecognized", "tags", "false", "Turn", "off", "error", "warnings", "js", "ignore", "unrecognized", "tags", "true", "Turn", "off", "error", "for", "tags", "with", "dashes", "js", "ignore", "unrecognized", "tags", "Turn", "off", "error", "for", "certain", "tags", "from", "polymer", "js", "ignore", "unrecognized", "tags", "paper", "iron", "google", "Defining", "individual", "tags", "in", "html", "elements", "NUMBER", "json", "We", "still", "need", "to", "figure", "out", "the", "details", "on", "this", "so", "this", "probably", "wouldn", "t", "make", "it", "in", "right", "away", "NUMBER", "Defining", "tags", "in", "html", "elements", "NUMBER", "json", "will", "make", "it", "so", "Marko", "recognizes", "them", "and", "won", "t", "throw", "but", "Marko", "s", "atom", "plugin", "will", "also", "pick", "them", "up", "and", "make", "them", "available", "for", "autocompletion", "when", "authoring", "your", "template", "and", "components", "NUMBER", "The", "goal", "would", "be", "for", "authors", "of", "the", "web", "components", "to", "generate", "this", "file", "as", "part", "of", "the", "web", "component", "package", "NUMBER", "js", "TAG", "url", "LINK", "project", "NUMBER", "org", "elements", "paper", "badge", "description", "TAG", "be", "a", "circular", "text", "badge", "that", "be", "display", "on", "the", "top", "right", "corner", "of", "an", "element", "representing", "a", "status", "or", "a", "notification", "NUMBER", "It", "will", "badge", "the", "anchor", "element", "specified", "in", "the", "for", "attribute", "or", "if", "that", "doesn", "t", "exist", "centered", "to", "the", "parent", "node", "containing", "it", "NUMBER", "for", "type", "String", "description", "The", "id", "of", "the", "element", "that", "the", "badge", "be", "anchored", "to", "NUMBER", "This", "element", "must", "be", "a", "sibling", "of", "the", "badge", "NUMBER", "icon", "type", "String", "description", "An", "iron", "icon", "ID", "NUMBER", "When", "given", "the", "badge", "content", "will", "use", "an", "TAG", "element", "display", "the", "given", "icon", "ID", "rather", "than", "the", "label", "text", "NUMBER", "However", "the", "label", "text", "will", "still", "be", "use", "for", "accessibility", "purposes", "NUMBER", "label", "type", "String", "description", "The", "label", "display", "in", "the", "badge", "NUMBER", "The", "label", "be", "centered", "and", "ideally", "should", "have", "very", "few", "characters", "NUMBER", "target", "type", "String", "description", "Returns", "the", "target", "element", "that", "this", "badge", "be", "anchored", "to", "NUMBER", "It", "be", "either", "the", "element", "given", "by", "the", "for", "attribute", "or", "the", "immediate", "parent", "of", "the", "badge", "NUMBER", "For", "the", "record", "I", "now", "believe", "this", "was", "the", "right", "choice", "NUMBER", "After", "upgrading", "to", "rc", "NUMBER", "marko", "immediately", "informed", "me", "about", "two", "invalid", "tags", "that", "I", "forgot", "to", "change", "during", "a", "rename", "mindeavor", "I", "experienced", "the", "same", "thing", "NUMBER", "We", "had", "some", "test", "that", "were", "incorrectly", "referring", "to", "unregistered", "tags", "NUMBER", "I", "m", "not", "very", "impressed", "with", "the", "Github", "Wiki", "system", "but", "we", "decided", "to", "put", "details", "on", "error", "in", "the", "Wiki", "LINK", "js", "marko", "wiki", "Error", "NUMBER", "A", "Unrecognized", "Tag", "Please", "let", "us", "know", "if", "you", "see", "any", "issue", "The", "class", "tag", "currently", "support", "creating", "a", "component", "when", "anonymous", "jsx", "class", "constructor", "But", "creates", "a", "normal", "JS", "class", "when", "it", "has", "a", "name", "jsx", "class", "Foo", "constructor", "We", "want", "to", "remove", "the", "second", "functionality", "NUMBER", "It", "will", "_always_", "create", "a", "component", "s", "class", "and", "you", "can", "optionally", "name", "that", "class", "NUMBER", "With", "the", "new", "TAG", "syntax", "we", "have", "a", "better", "way", "to", "add", "JS", "to", "a", "template", "and", "no", "longer", "need", "these", "tags", "NUMBER", "We", "do", "want", "to", "make", "them", "available", "for", "the", "v", "NUMBER", "v", "NUMBER", "migration", "NUMBER", "Should", "we", "just", "add", "a", "deprecation", "warning", "or", "split", "them", "out", "into", "a", "marko", "v", "NUMBER", "compat", "package", "My", "preference", "would", "be", "to", "split", "them", "out", "so", "we", "re", "rid", "of", "them", "as", "v", "NUMBER", "users", "but", "it", "makes", "things", "a", "little", "tricky", "with", "sub", "package", "that", "export", "tags", "because", "taglibs", "outside", "of", "Marko", "be", "not", "global", "NUMBER", "Related", "NUMBER", "I", "think", "a", "migration", "package", "be", "a", "good", "idea", "NUMBER", "If", "one", "intends", "to", "move", "from", "v", "NUMBER", "to", "v", "NUMBER", "installing", "a", "package", "would", "be", "the", "least", "of", "those", "efforts", "NUMBER", "What", "do", "you", "mean", "by", "sub", "package", "that", "export", "tags", "mindeavor", "Say", "I", "be", "use", "a", "package", "with", "a", "taglib", "that", "be", "intended", "to", "be", "share", "across", "apps", "let", "s", "call", "it", "ui", "components", "and", "say", "one", "of", "the", "tags", "it", "export", "be", "TAG", "NUMBER", "ui", "components", "was", "developed", "against", "v", "NUMBER", "and", "as", "such", "uses", "legacy", "widgets", "NUMBER", "The", "way", "things", "currently", "stand", "with", "v", "NUMBER", "these", "components", "should", "still", "be", "able", "to", "be", "use", "with", "a", "v", "NUMBER", "app", "NUMBER", "The", "problem", "in", "moving", "deprecate", "tags", "out", "to", "a", "package", "be", "that", "if", "the", "TAG", "template", "uses", "the", "TAG", "tag", "it", "wouldn", "t", "be", "discover", "because", "template", "only", "look", "for", "tags", "in", "package", "that", "their", "package", "in", "this", "case", "ui", "components", "directly", "depends", "on", "NUMBER", "It", "wouldn", "t", "look", "at", "the", "application", "s", "dependencies", "to", "find", "marko", "v", "NUMBER", "compat", "NUMBER", "This", "really", "isn", "t", "an", "issue", "as", "we", "could", "use", "the", "not", "really", "documented", "taglibLookup", "NUMBER", "registerTaglib", "LINK", "js", "marko", "blob", "master", "compiler", "index", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "to", "make", "it", "globally", "available", "NUMBER", "But", "if", "there", "be", "any", "runtime", "code", "which", "there", "isn", "t", "in", "this", "case", "use", "that", "API", "can", "cause", "discoverability", "problem", "NUMBER", "Hesulan", "We", "actually", "be", "use", "the", "parser", "in", "legacy", "mode", "in", "v", "NUMBER", "and", "have", "a", "number", "of", "warnings", "including", "the", "switch", "from", "to", "LINK", "js", "htmljs", "parser", "blob", "master", "Parser", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "NUMBER", "The", "goal", "be", "to", "allow", "users", "to", "upgrade", "without", "any", "change", "if", "there", "be", "no", "deprecation", "warnings", "in", "v", "NUMBER", "This", "might", "be", "a", "crazy", "idea", "but", "what", "about", "a", "marko", "v", "NUMBER", "stepping", "stone", "package", "that", "enable", "v", "NUMBER", "syntax", "for", "v", "NUMBER", "and", "add", "deprecation", "warnings", "for", "all", "the", "old", "stuff", "from", "v", "NUMBER", "Oh", "interesting", "I", "didn", "t", "know", "TAG", "could", "use", "body", "text", "like", "that", "NUMBER", "Is", "that", "scope", "actually", "enforced", "The", "introduction", "of", "var", "flavor", "input", "NUMBER", "someFunc", "kill", "the", "template", "and", "you", "end", "up", "with", "PHP", "all", "over", "again", "NUMBER", "Let", "s", "be", "honest", "here", "We", "don", "t", "get", "PHP", "simply", "because", "of", "TAG", "tags", "NUMBER", "Unless", "you", "consider", "Ruby", "on", "Rails", "and", "ERB", "to", "be", "PHP", "as", "well", "I", "do", "find", "the", "TAG", "NUMBER", "TAG", "feature", "interesting", "NUMBER", "To", "avoid", "potential", "confusion", "with", "JS", "maybe", "you", "could", "rename", "it", "to", "something", "like", "TAG", "for", "those", "who", "want", "that", "feature", "NUMBER", "Fixed", "by", "LINK", "js", "marko", "commit", "NUMBER", "d", "NUMBER", "f", "NUMBER", "adc", "NUMBER", "e", "NUMBER", "ec", "NUMBER", "a", "NUMBER", "cae", "NUMBER", "a", "NUMBER", "a", "NUMBER", "e", "thank", "you", "austinkelleher", "The", "scoped", "variables", "use", "case", "be", "interesting", "NUMBER", "I", "m", "not", "oppose", "to", "introduce", "something", "to", "support", "that", "use", "case", "but", "I", "be", "not", "convinced", "TAG", "NUMBER", "TAG", "was", "the", "best", "solution", "NUMBER", "ramses", "NUMBER", "what", "be", "your", "thoughts", "on", "the", "following", "html", "TAG", "TAG", "var", "name", "Frank", "function", "doSomething", "TAG", "Hello", "name", "TAG", "TAG", "TAG", "TAG", "ing", "the", "Node", "NUMBER", "js", "require", "hook", "NUMBER", "Also", "allows", "passing", "extensions", "or", "extension", "as", "options", "to", "handleFileModified", "NUMBER", "Hey", "steebchen", "this", "be", "a", "duplicate", "of", "Issue", "NUMBER", "Auto", "hot", "reload", "for", "any", "extensions", "provide", "when", "installing", "the", "Node", "NUMBER", "js", "require", "hook", "LINK", "js", "marko", "issue", "NUMBER", "NUMBER", "Would", "you", "have", "any", "interest", "in", "work", "on", "this", "At", "the", "moment", "that", "issue", "be", "lower", "priority", "but", "we", "do", "plan", "to", "have", "it", "resolve", "by", "the", "time", "of", "the", "final", "v", "NUMBER", "release", "NUMBER", "austinkelleher", "has", "completed", "the", "work", "for", "this", "and", "we", "ll", "publish", "a", "new", "release", "candidate", "soon", "jasonmacdonald", "can", "you", "please", "point", "to", "the", "code", "Symbol", "should", "not", "be", "use", "in", "browser", "code", "and", "all", "of", "our", "test", "be", "run", "in", "a", "very", "older", "version", "of", "V", "NUMBER", "that", "doesn", "t", "support", "Symbol", "so", "I", "would", "not", "expect", "Symbol", "to", "be", "use", "NUMBER", "Also", "which", "JS", "module", "bundler", "be", "you", "use", "Lasso", "webpack", "etc", "NUMBER", "There", "be", "a", "widgets", "util", "NUMBER", "js", "and", "a", "widgets", "util", "browser", "NUMBER", "js", "NUMBER", "We", "remap", "the", "former", "to", "the", "latter", "by", "putting", "a", "browser", "field", "in", "the", "package", "NUMBER", "json", "file", "LINK", "js", "marko", "blob", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ad", "NUMBER", "a", "NUMBER", "c", "NUMBER", "ab", "NUMBER", "a", "NUMBER", "f", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "widgets", "package", "NUMBER", "json", "L", "NUMBER", "All", "JavaScript", "module", "bundlers", "including", "Browserify", "rollup", "lasso", "webpack", "etc", "NUMBER", "should", "respect", "the", "browser", "field", "NUMBER", "If", "you", "can", "provide", "a", "simple", "app", "to", "reproduce", "the", "problem", "with", "browserify", "that", "would", "be", "helpful", "NUMBER", "It", "could", "be", "a", "bug", "in", "browserify", "or", "it", "could", "be", "some", "strange", "combination", "of", "things", "NUMBER", "We", "should", "definitely", "investigate", "because", "browserify", "be", "support", "NUMBER", "I", "suspect", "this", "be", "work", "as", "intended", "It", "be", "but", "with", "a", "little", "work", "we", "can", "get", "the", "result", "you", "want", "NUMBER", "I", "also", "tried", "use", "input", "NUMBER", "renderBody", "out", "WidgetB_data", "inside", "WidgetB", "NUMBER", "But", "that", "still", "seems", "to", "use", "WidgetA", "data", "NUMBER", "jasonmacdonald", "You", "re", "on", "the", "right", "track", "Before", "we", "get", "to", "the", "solution", "I", "want", "to", "show", "you", "_why_", "this", "be", "what", "be", "happening", "and", "why", "it", "makes", "sense", "NUMBER", "This", "be", "a", "simplified", "version", "of", "what", "gets", "compiled", "for", "Widget", "A", "js", "function", "render", "data", "out", "widget_b", "data", "NUMBER", "renderBody", "function", "out", "out", "NUMBER", "w", "TAG", "data", "TAG", "out", "So", "it", "s", "no", "surprise", "that", "data", "comes", "from", "Widget", "A", "in", "this", "case", "NUMBER", "Or", "that", "passing", "an", "additional", "value", "to", "renderBody", "didn", "t", "work", "because", "it", "only", "has", "an", "out", "parameter", "mdash", "but", "we", "can", "change", "that", "NUMBER", "In", "the", "marko", "tag", "NUMBER", "json", "file", "for", "Widget", "A", "or", "the", "marko", "NUMBER", "json", "file", "under", "the", "Widget", "A", "definition", "you", "can", "add", "a", "new", "key", "var", "or", "vars", "LINK", "js", "marko", "blob", "eb", "NUMBER", "d", "NUMBER", "fb", "NUMBER", "d", "NUMBER", "f", "NUMBER", "ce", "NUMBER", "b", "NUMBER", "f", "compiler", "taglib", "loader", "loader", "tag", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "note", "it", "be", "not", "prefixed", "with", "like", "an", "attributes", "NUMBER", "var", "takes", "a", "string", "as", "its", "value", "while", "vars", "takes", "an", "array", "but", "in", "both", "cases", "the", "variable", "s", "be", "add", "as", "parameters", "to", "the", "renderBody", "function", "NUMBER", "So", "with", "this", "in", "your", "marko", "tag", "NUMBER", "json", "for", "Widget", "A", "js", "var", "data", "The", "new", "output", "would", "be", "js", "function", "render", "data", "out", "widget_b", "data", "NUMBER", "renderBody", "function", "out", "data", "out", "NUMBER", "w", "TAG", "data", "TAG", "out", "And", "now", "input", "NUMBER", "renderBody", "out", "data", "would", "work", "as", "expected", "NUMBER", "But", "I", "would", "recommend", "that", "you", "don", "t", "just", "name", "the", "parameter", "data", "as", "the", "user", "of", "Widget", "A", "may", "still", "want", "access", "to", "Widget", "A", "s", "data", "and", "you", "re", "essentially", "preventing", "the", "user", "from", "accessing", "it", "by", "naming", "the", "parameter", "the", "same", "NUMBER", "There", "s", "also", "a", "more", "flexible", "value", "that", "can", "be", "pass", "to", "var", "or", "as", "an", "entry", "in", "the", "vars", "array", "an", "object", "with", "the", "key", "name", "from", "attribute", "NUMBER", "This", "allows", "the", "user", "to", "specify", "what", "they", "want", "the", "parameter", "to", "be", "call", "Widget", "A", "s", "marko", "tag", "NUMBER", "json", "js", "var", "name", "from", "attribute", "param", "Usage", "jsx", "TAG", "TAG", "TAG", "nestedData", "TAG", "TAG", "The", "new", "output", "would", "be", "js", "function", "render", "data", "out", "widget_b", "data", "NUMBER", "renderBody", "function", "out", "nestedData", "out", "NUMBER", "w", "TAG", "nestedData", "TAG", "out", "And", "you", "can", "call", "input", "NUMBER", "renderBody", "out", "data", "and", "that", "second", "data", "parameter", "will", "be", "made", "available", "in", "the", "renderBody", "method", "as", "nestedData", "mdash", "which", "the", "user", "chose", "NUMBER", "I", "also", "want", "to", "point", "out", "that", "we", "add", "one", "more", "layer", "on", "top", "of", "this", "for", "the", "await", "tag", "NUMBER", "The", "await", "tag", "be", "use", "like", "html", "TAG", "value", "TAG", "We", "transform", "this", "to", "the", "following", "in", "the", "await", "transformer", "LINK", "js", "marko", "blob", "master", "taglibs", "async", "await", "tag", "transformer", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "jsx", "TAG", "value", "TAG", "The", "await", "tag", "also", "has", "name", "from", "attribute", "_var", "specified", "in", "the", "marko", "NUMBER", "json", "LINK", "js", "marko", "blob", "master", "taglibs", "async", "marko", "NUMBER", "json", "L", "NUMBER", "L", "NUMBER", "Which", "results", "in", "value", "in", "this", "case", "be", "made", "the", "second", "parameter", "to", "input", "NUMBER", "renderBody", "NUMBER", "Then", "we", "just", "wait", "for", "the", "promise", "to", "resolve", "and", "pass", "the", "result", "to", "renderBody", "LINK", "js", "marko", "blob", "master", "taglibs", "async", "await", "tag", "NUMBER", "js", "L", "NUMBER", "NUMBER", "This", "should", "work", "html", "TAG", "TAG", "TAG", "Note", "that", "in", "NUMBER", "if", "TAG", "stateful", "renderBody", "won", "t", "be", "available", "the", "second", "time", "around", "but", "this", "be", "fix", "in", "NUMBER", "if", "you", "do", "html", "TAG", "TAG", "TAG", "Marko", "NUMBER", "include", "widgets", "so", "you", "don", "t", "need", "marko", "widgets", "anymore", "jasonmacdonald", "Adding", "the", "marko", "tag", "NUMBER", "json", "file", "as", "you", "did", "be", "the", "correct", "thing", "to", "do", "NUMBER", "We", "ll", "revisit", "the", "docs", "for", "v", "NUMBER", "to", "make", "things", "more", "clear", "NUMBER", "Since", "we", "be", "completely", "reworking", "the", "documentation", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "NUMBER", "In", "the", "meantime", "please", "let", "us", "know", "if", "you", "have", "any", "specific", "question", "NUMBER", "happy", "to", "help", "NUMBER", "We", "no", "longer", "want", "to", "hijack", "the", "standard", "HTML", "TAG", "tag", "to", "avoid", "confusion", "and", "future", "problem", "NUMBER", "Instead", "we", "will", "use", "the", "following", "css", "style", "NUMBER", "foo", "background", "color", "red", "TAG", "Hello", "World", "TAG", "Or", "with", "a", "specific", "CSS", "preprocessor", "language", "css", "style", "NUMBER", "less", "NUMBER", "foo", "background", "color", "red", "TAG", "Hello", "World", "TAG", "We", "ve", "decided", "to", "stop", "hijacking", "the", "script", "tag", "and", "use", "concise", "style", "tags", "that", "look", "like", "JS", "instead", "NUMBER", "Deprecate", "TAG", "with", "export", "Old", "html", "TAG", "module", "NUMBER", "export", "handleClick", "alert", "hi", "TAG", "TAG", "Click", "me", "TAG", "New", "jsx", "class", "handleClick", "alert", "hi", "TAG", "Click", "me", "TAG", "Deprecate", "TAG", "Old", "html", "TAG", "function", "sum", "a", "b", "return", "a", "b", "TAG", "TAG", "The", "sum", "of", "NUMBER", "NUMBER", "be", "sum", "NUMBER", "NUMBER", "TAG", "New", "jsx", "static", "function", "sum", "a", "b", "return", "a", "b", "TAG", "The", "sum", "of", "NUMBER", "NUMBER", "be", "sum", "NUMBER", "NUMBER", "TAG", "Moving", "to", "an", "external", "file", "One", "concern", "you", "may", "have", "be", "that", "with", "the", "TAG", "with", "export", "approach", "the", "only", "change", "required", "to", "move", "a", "component", "to", "an", "external", "NUMBER", "js", "file", "was", "copy", "and", "paste", "NUMBER", "Admittedly", "it", "s", "not", "_quite_", "that", "simple", "but", "it", "s", "still", "really", "easy", "NUMBER", "This", "template", "jsx", "import", "sum", "from", "NUMBER", "helpers", "sum", "class", "handleClick", "a", "b", "console", "NUMBER", "log", "sum", "a", "b", "TAG", "Click", "me", "TAG", "becomes", "these", "two", "file", "_component", "NUMBER", "js_", "js", "import", "sum", "from", "NUMBER", "helpers", "sum", "export", "default", "class", "handleClick", "a", "b", "console", "NUMBER", "log", "sum", "a", "b", "_index", "NUMBER", "marko_", "xml", "TAG", "Click", "me", "TAG", "So", "we", "copied", "over", "_and", "had", "to", "add", "an", "export", "statement_", "NUMBER", "Still", "pretty", "simple", "NUMBER", "What", "do", "moving", "static", "function", "over", "to", "component", "NUMBER", "js", "look", "like", "mlrawlings", "Can", "you", "update", "this", "issue", "to", "also", "mention", "js", "static", "function", "myHelper", "NUMBER", "var", "foo", "hello", "I", "wonder", "if", "it", "makes", "sense", "to", "recommend", "static", "NUMBER", "because", "it", "makes", "it", "a", "little", "easier", "to", "move", "those", "function", "how", "to", "a", "separate", "file", "if", "needed", "only", "the", "block", "content", "needs", "to", "be", "copied", "out", "mindeavor", "philidem", "and", "I", "had", "an", "impromptu", "discussion", "based", "on", "concerns", "raise", "in", "the", "Gitter", "chat", "room", "NUMBER", "The", "following", "proposal", "seem", "to", "be", "liked", "by", "everyone", "js", "static", "function", "myHelper", "NUMBER", "class", "ViewModel", "constructor", "data", "this", "NUMBER", "data", "data", "get", "fullName", "return", "this", "NUMBER", "data", "NUMBER", "firstName", "this", "NUMBER", "data", "NUMBER", "lastName", "component", "style", "lang", "less", "scoped", "NUMBER", "foo", "background", "color", "red", "component", "class", "onInput", "NUMBER", "handleButtonClick", "NUMBER", "Reopening", "the", "issue", "for", "discussion", "NUMBER", "It", "s", "not", "too", "late", "to", "voice", "your", "approval", "or", "concerns", "NUMBER", "Although", "I", "find", "that", "syntax", "ok", "my", "ideal", "syntax", "would", "still", "be", "something", "like", "this", "html", "TAG", "import", "helper", "from", "library", "class", "Component", "onInput", "NUMBER", "handleButtonClick", "NUMBER", "function", "myHelper", "NUMBER", "class", "ViewModel", "constructor", "data", "NUMBER", "get", "fullName", "NUMBER", "TAG", "TAG", "NUMBER", "foo", "background", "color", "red", "TAG", "TAG", "TAG", "state", "NUMBER", "name", "TAG", "TAG", "I", "think", "it", "s", "good", "and", "unsurprising", "that", "marko", "transforms", "TAG", "tags", "NUMBER", "I", "wouldn", "t", "want", "my", "styles", "to", "be", "inlined", "every", "time", "I", "use", "the", "component", "If", "we", "really", "want", "to", "stay", "away", "from", "TAG", "then", "we", "can", "use", "a", "different", "name", "instead", "html", "TAG", "import", "helper", "from", "library", "class", "onInput", "NUMBER", "handleButtonClick", "NUMBER", "function", "myHelper", "NUMBER", "class", "ViewModel", "constructor", "data", "NUMBER", "get", "fullName", "NUMBER", "TAG", "My", "primary", "preference", "be", "to", "have", "a", "single", "tag", "for", "all", "my", "JS", "code", "if", "possible", "NUMBER", "I", "think", "it", "s", "good", "and", "unsurprising", "that", "marko", "transforms", "TAG", "tags", "NUMBER", "I", "wouldn", "t", "want", "my", "styles", "to", "be", "inlined", "every", "time", "I", "use", "the", "component", "mindeavor", "I", "mostly", "agree", "which", "be", "why", "this", "be", "the", "current", "behavior", "but", "there", "be", "the", "concern", "that", "someone", "could", "be", "use", "Marko", "as", "a", "pure", "template", "language", "without", "lasso", "webpack", "etc", "mdash", "something", "we", "still", "want", "to", "support", "NUMBER", "Suppose", "you", "had", "a", "template", "like", "the", "following", "that", "you", "wanted", "to", "include", "in", "the", "TAG", "of", "many", "pages", "html", "TAG", "data", "NUMBER", "title", "data", "NUMBER", "title", "Marko", "Marko", "TAG", "TAG", "TAG", "TAG", "body", "background", "f", "NUMBER", "TAG", "It", "would", "probably", "be", "surprising", "if", "your", "TAG", "tag", "didn", "t", "show", "up", "in", "the", "output", "NUMBER", "I", "really", "like", "this", "proposal", "NUMBER", "Correct", "me", "if", "I", "m", "wrong", "but", "I", "m", "assuming", "the", "HTML", "syntax", "would", "look", "like", "xml", "TAG", "function", "myHelper", "NUMBER", "TAG", "onInput", "NUMBER", "Hesulan", "Yes", "that", "would", "be", "the", "equivalent", "HTML", "syntax", "but", "I", "don", "t", "think", "that", "s", "a", "good", "idea", "and", "Patrick", "be", "talking", "about", "potentially", "make", "that", "invalid", "NUMBER", "Would", "TAG", "still", "accept", "body", "content", "like", "TAG", "did", "It", "do", "not", "with", "the", "current", "implementation", "but", "that", "would", "be", "trivial", "to", "implement", "NUMBER", "It", "would", "require", "update", "the", "syntax", "highlighter", "though", "NUMBER", "I", "would", "like", "to", "point", "out", "that", "I", "prefer", "the", "HTML", "syntax", "_but_", "I", "think", "it", "makes", "sense", "to", "use", "the", "concise", "syntax", "for", "these", "JS", "like", "tags", "and", "other", "tags", "that", "don", "t", "directly", "affect", "the", "output", "while", "still", "use", "the", "HTML", "syntax", "for", "tags", "that", "be", "actually", "involved", "in", "rendering", "the", "final", "HTML", "output", "NUMBER", "TAG", "and", "TAG", "not", "ending", "up", "in", "the", "output", "HTML", "doesn", "t", "fit", "with", "the", "default", "expectation", "and", "for", "someone", "learning", "how", "to", "write", "a", "component", "they", "will", "look", "up", "the", "documentation", "and", "follow", "what", "it", "says", "NUMBER", "I", "don", "t", "think", "there", "s", "some", "default", "expectation", "that", "putting", "something", "in", "a", "TAG", "allows", "you", "to", "create", "component", "methods", "that", "can", "be", "attached", "to", "elements", "this", "idea", "be", "foreign", "to", "HTML", "and", "why", "we", "need", "something", "like", "Marko", "in", "the", "first", "place", "NUMBER", "Regarding", "component", "class", "or", "component", "style", "everything", "in", "the", "template", "be", "_for_", "the", "component", "NUMBER", "It", "be", "redundant", "to", "say", "component", "NUMBER", "For", "someone", "who", "be", "new", "to", "Marko", "I", "really", "find", "it", "difficult", "to", "believe", "that", "someone", "would", "look", "at", "the", "following", "and", "not", "understand", "what", "be", "happening", "NUMBER", "And", "I", "don", "t", "see", "how", "wrapping", "this", "in", "a", "TAG", "tag", "would", "make", "it", "any", "less", "intimidating", "NUMBER", "image", "LINK", "e", "NUMBER", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "e", "NUMBER", "png", "mlrawlings", "I", "generally", "agree", "with", "what", "you", "re", "saying", "NUMBER", "style", "be", "fine", "and", "so", "be", "class", "in", "your", "simple", "example", "NUMBER", "Using", "curly", "brackets", "to", "differentiate", "between", "html", "tags", "and", "output", "be", "a", "good", "idea", "too", "NUMBER", "The", "problem", "appears", "when", "you", "want", "something", "more", "than", "just", "a", "class", "NUMBER", "Specifically", "Where", "do", "I", "put", "imports", "Where", "do", "I", "put", "helper", "function", "Where", "do", "I", "put", "static", "data", "class", "be", "not", "really", "a", "class", "but", "a", "special", "tag", "that", "looks", "like", "JavaScript", "NUMBER", "The", "current", "answers", "be", "in", "the", "same", "vein", "a", "special", "import", "tag", "a", "special", "function", "tag", "and", "a", "special", "static", "tag", "NUMBER", "Put", "this", "together", "with", "var", "for", "and", "probably", "others", "and", "you", "ve", "reached", "an", "uncanny", "valley", "of", "javascript", "but", "not", "really", "javascript", "syntax", "NUMBER", "The", "reason", "I", "was", "ok", "with", "component", "class", "was", "that", "the", "word", "component", "immediately", "tells", "you", "something", "special", "be", "going", "on", "to", "up", "your", "guard", "and", "not", "think", "you", "can", "write", "just", "any", "JavaScript", "code", "in", "this", "file", "NUMBER", "Another", "proposal", "with", "these", "things", "in", "mind", "jsx", "script", "import", "helper", "from", "library", "class", "Component", "onInput", "NUMBER", "handleButtonClick", "NUMBER", "var", "languages", "js", "css", "html", "function", "myHelper", "NUMBER", "class", "ViewModel", "constructor", "data", "NUMBER", "get", "fullName", "NUMBER", "style", "NUMBER", "count", "font", "size", "NUMBER", "rem", "padding", "NUMBER", "rem", "width", "NUMBER", "rem", "TAG", "TAG", "TAG", "lang", "TAG", "TAG", "The", "component", "class", "be", "special", "and", "I", "believe", "it", "deserves", "to", "be", "moved", "up", "to", "the", "root", "NUMBER", "I", "think", "a", "block", "consisting", "of", "curly", "braces", "be", "a", "good", "indicator", "that", "the", "code", "be", "JS", "CSS", "NUMBER", "Taking", "your", "example", "I", "think", "the", "following", "reads", "really", "well", "marko", "syntax", "LINK", "e", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "a", "NUMBER", "png", "patrick", "steele", "idem", "That", "do", "look", "nice", "NUMBER", "Other", "thoughts", "and", "not", "think", "you", "can", "write", "just", "any", "JavaScript", "code", "in", "this", "file", "NUMBER", "mindeavor", "I", "understand", "that", "concern", "and", "I", "could", "probably", "be", "convinced", "to", "dial", "back", "some", "of", "the", "JS", "tags", "introduce", "in", "v", "NUMBER", "specifically", "class", "for", "non", "component", "classes", "and", "function", "and", "probably", "invoke", "maybe", "even", "assign", "and", "var", "mdash", "we", "could", "require", "them", "to", "be", "within", "a", "JS", "block", "where", "any", "JS", "be", "valid", "NUMBER", "Beside", "the", "fact", "that", "I", "like", "the", "component", "s", "class", "definition", "at", "the", "top", "level", "I", "really", "think", "that", "within", "the", "static", "block", "or", "script", "as", "you", "suggested", "but", "I", "think", "static", "LINK", "_variable", "be", "the", "right", "term", "that", "it", "should", "be", "_", "Just", "JavaScript", "_", "NUMBER", "You", "shouldn", "t", "have", "a", "special", "class", "Component", "that", "gets", "pick", "up", "in", "some", "magical", "way", "that", "kind", "of", "stuff", "should", "happen", "in", "Marko", "land", "NUMBER", "Here", "s", "my", "current", "thoughts", "on", "the", "list", "of", "JS", "tags", "we", "should", "support", "and", "their", "rational", "static", "NUMBER", "to", "embed", "static", "javascript", "code", "We", "need", "a", "way", "to", "have", "code", "that", "runs", "statically", "that", "be", "once", "when", "the", "template", "be", "loaded", "and", "then", "be", "available", "every", "time", "the", "template", "be", "rendered", "NUMBER", "This", "beats", "TAG", "because", "this", "be", "not", "include", "in", "the", "output", "see", "previous", "message", "for", "more", "detail", "NUMBER", "NUMBER", "to", "embed", "runtime", "javascript", "code", "in", "the", "render", "method", "Currently", "we", "have", "var", "invoke", "and", "assign", "tags", "and", "we", "add", "function", "and", "class", "in", "v", "NUMBER", "but", "maybe", "we", "deprecate", "those", "We", "also", "have", "scriptlets", "TAG", "but", "sticking", "with", "our", "curly", "brace", "notation", "seems", "to", "make", "sense", "and", "use", "something", "that", "could", "be", "interpolated", "in", "both", "HTML", "and", "concise", "syntax", "NUMBER", "This", "would", "actually", "be", "a", "language", "level", "thing", "like", "scriptlets", "not", "a", "tag", "NUMBER", "class", "NUMBER", "to", "define", "a", "component", "s", "class", "Defining", "the", "component", "s", "class", "be", "somewhat", "special", "and", "I", "don", "t", "think", "we", "should", "start", "modifying", "what", "you", "re", "expecting", "to", "be", "pure", "JS", "NUMBER", "Just", "by", "seeing", "class", "it", "lets", "you", "know", "exactly", "what", "syntax", "be", "allow", "inside", "the", "NUMBER", "because", "it", "s", "a", "NUMBER", "NUMBER", "match", "with", "JS", "NUMBER", "This", "would", "be", "my", "argument", "against", "something", "like", "component", "NUMBER", "style", "NUMBER", "to", "define", "a", "component", "s", "style", "We", "need", "a", "way", "to", "write", "styles", "and", "don", "t", "want", "to", "hijack", "the", "TAG", "tag", "NUMBER", "import", "to", "pull", "in", "external", "helpers", "For", "one", "this", "be", "ES", "NUMBER", "syntax", "but", "we", "generate", "CommonJS", "require", "calls", "so", "you", "wouldn", "t", "need", "any", "extra", "transpilation", "step", "NUMBER", "I", "also", "really", "feel", "like", "imports", "should", "be", "at", "the", "top", "outside", "of", "a", "block", "but", "maybe", "that", "s", "not", "valid", "export", "to", "export", "data", "attached", "to", "the", "template", "There", "be", "some", "legitimate", "cases", "where", "you", "might", "want", "to", "export", "some", "values", "from", "a", "template", "NUMBER", "The", "template", "lives", "in", "a", "marko_template", "variable", "that", "gets", "generate", "but", "that", "shouldn", "t", "be", "manipulated", "directly", "the", "export", "tag", "will", "do", "that", "for", "you", "NUMBER", "Having", "this", "tag", "also", "be", "somewhat", "of", "an", "argument", "for", "import", "to", "make", "things", "balanced", "NUMBER", "var", "Do", "we", "need", "var", "It", "already", "exists", "in", "v", "NUMBER", "and", "we", "probably", "don", "t", "want", "to", "remove", "it", "at", "this", "point", "right", "I", "agree", "that", "it", "s", "kinda", "nice", "to", "not", "have", "to", "wrap", "var", "in", "NUMBER", "but", "the", "same", "could", "be", "argued", "for", "any", "JS", "statement", "so", "where", "do", "we", "draw", "the", "line", "What", "about", "NUMBER", "patrick", "steele", "idem", "mindeavor", "What", "be", "your", "thoughts", "on", "this", "example", "jsx", "import", "CurrencyFormatter", "from", "NUMBER", "formatters", "static", "var", "format", "new", "CurrencyFormatter", "usd", "class", "constructor", "input", "NUMBER", "adjustPrice", "index", "amount", "NUMBER", "var", "products", "state", "NUMBER", "products", "TAG", "TAG", "var", "name", "product", "NUMBER", "name", "var", "price", "product", "NUMBER", "price", "TAG", "name", "TAG", "TAG", "format", "price", "TAG", "TAG", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "mlrawlings", "I", "think", "dialing", "back", "the", "JS", "tags", "be", "a", "great", "solution", "NUMBER", "Having", "a", "minimal", "number", "of", "them", "makes", "me", "a", "lot", "more", "comfortable", "explaining", "and", "promoting", "the", "idea", "to", "others", "NUMBER", "I", "think", "I", "agree", "with", "all", "your", "points", "in", "tandem", "your", "example", "suits", "well", "with", "me", "NUMBER", "The", "only", "confusion", "I", "foresee", "be", "people", "trying", "to", "import", "or", "require", "within", "static", "but", "good", "error", "message", "should", "be", "able", "to", "mitigate", "NUMBER", "The", "special", "tag", "for", "runtime", "code", "makes", "a", "lot", "of", "sense", "when", "you", "compare", "it", "to", "the", "static", "tag", "presenting", "them", "together", "makes", "them", "easy", "to", "explain", "NUMBER", "If", "you", "don", "t", "mind", "a", "bit", "of", "bikeshedding", "NUMBER", "I", "think", "would", "be", "a", "nicer", "than", "since", "it", "parallels", "with", "If", "you", "don", "t", "mind", "a", "bit", "of", "bikeshedding", "NUMBER", "I", "think", "would", "be", "a", "nicer", "than", "since", "it", "parallels", "with", "Totally", "fine", "NUMBER", "I", "have", "some", "more", "thoughts", "to", "share", "on", "the", "stylistic", "front", "NUMBER", "And", "would", "like", "your", "opinion", "on", "some", "of", "these", "things", "NUMBER", "One", "_small_", "issue", "I", "have", "with", "static", "NUMBER", "be", "that", "it", "kinda", "seems", "as", "if", "the", "JS", "be", "scoped", "to", "that", "block", "when", "in", "reality", "it", "s", "available", "throughout", "the", "template", "and", "even", "to", "the", "class", "NUMBER", "If", "you", "look", "at", "the", "OP", "static", "also", "support", "an", "inline", "mode", "where", "you", "can", "have", "a", "single", "statement", "without", "a", "block", "js", "static", "var", "foo", "NUMBER", "I", "m", "curious", "what", "you", "think", "of", "this", "mode", "but", "I", "like", "that", "it", "brings", "the", "statement", "up", "to", "the", "top", "level", "but", "I", "still", "know", "that", "anything", "following", "the", "static", "keyword", "be", "just", "JS", "NUMBER", "In", "any", "case", "I", "wonder", "if", "we", "could", "have", "something", "that", "gives", "us", "a", "similar", "experience", "for", "the", "runtime", "JS", "NUMBER", "I", "still", "want", "something", "that", "could", "be", "safely", "interpolated", "within", "HTML", "NUMBER", "jsx", "import", "CurrencyFormatter", "from", "NUMBER", "formatters", "static", "var", "format", "new", "CurrencyFormatter", "usd", "class", "constructor", "input", "NUMBER", "adjustPrice", "index", "amount", "NUMBER", "var", "products", "state", "NUMBER", "products", "TAG", "TAG", "var", "name", "product", "NUMBER", "name", "var", "price", "product", "NUMBER", "price", "TAG", "name", "TAG", "TAG", "format", "price", "TAG", "TAG", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "In", "this", "case", "we", "would", "also", "support", "NUMBER", "for", "multiple", "statement", "if", "thats", "what", "you", "wanted", "to", "do", "NUMBER", "Okay", "so", "I", "use", "in", "the", "example", "just", "because", "but", "patrick", "steele", "idem", "kinda", "hates", "the", "symbol", "and", "I", "don", "t", "know", "that", "I", "really", "like", "it", "either", "NUMBER", "We", "also", "looked", "at", "the", "following", "options", "Looks", "nice", "kinda", "like", "a", "REPL", "prompt", "but", "could", "be", "confusing", "with", "js", "var", "foo", "NUMBER", "this", "has", "a", "space", "so", "it", "s", "different", "than", "var", "bar", "NUMBER", "Probably", "safe", "but", "two", "characters", "js", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "Also", "looks", "like", "a", "prompt", "but", "ruins", "any", "hope", "of", "use", "markdown", "in", "a", "template", "js", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "Only", "breaks", "nested", "blockquotes", "in", "markdown", "js", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "For", "reference", "This", "be", "a", "block", "quote", "This", "be", "a", "nested", "block", "quote", "This", "nested", "block", "quote", "has", "a", "space", "though", "and", "would", "still", "work", "static", "one", "liners", "seem", "good", "the", "keyword", "conveys", "something", "different", "than", "plain", "JS", "be", "happening", "NUMBER", "To", "be", "honest", "I", "m", "ok", "with", "drawing", "the", "line", "at", "var", "for", "JS", "tags", "so", "long", "as", "documentation", "uses", "the", "TAG", "form", "to", "avoid", "any", "confusion", "NUMBER", "If", "someone", "opts", "for", "write", "concise", "syntax", "they", "ll", "know", "that", "they", "re", "only", "stripping", "away", "some", "angled", "bracket", "characters", "as", "oppose", "to", "write", "plain", "JS", "NUMBER", "With", "that", "said", "I", "don", "t", "know", "if", "or", "or", "whichever", "symbol", "chosen", "needs", "a", "concise", "version", "NUMBER", "The", "current", "certainly", "do", "not", "and", "the", "only", "difference", "between", "it", "and", "the", "former", "be", "that", "the", "former", "outputs", "nothing", "NUMBER", "mindeavor", "Really", "appreciate", "your", "input", "on", "this", "NUMBER", "I", "do", "think", "we", "will", "end", "up", "in", "a", "good", "place", "and", "I", "think", "we", "all", "be", "in", "favor", "of", "reducing", "the", "number", "of", "special", "tags", "NUMBER", "With", "that", "said", "I", "don", "t", "know", "if", "or", "or", "whichever", "symbol", "chosen", "needs", "a", "concise", "version", "NUMBER", "Agreed", "NUMBER", "Whichever", "syntax", "we", "finally", "settle", "on", "it", "will", "be", "the", "same", "for", "both", "concise", "and", "HTML", "NUMBER", "We", "internally", "polled", "some", "devs", "at", "eBay", "and", "the", "following", "seems", "to", "be", "the", "most", "popular", "marko", "component", "LINK", "e", "NUMBER", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "ed", "f", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "png", "Huh", "NUMBER", "I", "think", "I", "like", "it", "Would", "a", "backslash", "allow", "you", "to", "insert", "literal", "dollar", "sign", "characters", "Would", "a", "backslash", "allow", "you", "to", "insert", "literal", "dollar", "sign", "characters", "Yup", "that", "s", "what", "I", "be", "thinking", "and", "that", "be", "what", "we", "allow", "if", "you", "need", "to", "escape", "placeholders", "NUMBER", "If", "you", "be", "good", "with", "it", "then", "I", "propose", "we", "move", "forward", "with", "TAG", "and", "TAG", "NUMBER", "If", "anyone", "has", "any", "last", "minute", "objections", "please", "let", "us", "know", "cc", "austinkelleher", "philidem", "mlrawlings", "Hesulan", "Eldar", "X", "mikewoo", "NUMBER", "this", "past", "week", "I", "looked", "into", "what", "it", "would", "take", "to", "support", "linting", "of", "embedded", "JS", "inside", "Marko", "NUMBER", "We", "can", "do", "it", "in", "Atom", "very", "easily", "but", "I", "think", "the", "main", "goal", "will", "be", "to", "ensure", "that", "the", "JavaScript", "be", "valid", "NUMBER", "In", "the", "future", "when", "Marko", "support", "source", "maps", "we", "can", "apply", "linting", "to", "the", "entire", "compiled", "output", "to", "catch", "problem", "such", "as", "undefined", "variables", "and", "unuse", "variables", "this", "cannot", "be", "do", "on", "individual", "embedded", "JS", "fragment", "NUMBER", "With", "source", "maps", "we", "can", "map", "the", "linter", "warning", "back", "to", "the", "location", "in", "the", "original", "template", "file", "NUMBER", "Here", "s", "another", "potential", "issue", "to", "discuss", "Would", "any", "enter", "js", "mode", "or", "do", "the", "need", "to", "be", "the", "first", "non", "whitespace", "character", "of", "its", "line", "Example", "html", "TAG", "console", "NUMBER", "log", "x", "Price", "range", "be", "for", "this", "venue", "NUMBER", "Price", "range", "be", "for", "that", "venue", "NUMBER", "TAG", "That", "s", "the", "plan", "first", "non", "whitespace", "character", "followed", "by", "a", "space", "On", "Sun", "Jan", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Gilbert", "TAG", "write", "Here", "s", "another", "potential", "issue", "to", "discuss", "Would", "any", "enter", "js", "mode", "or", "do", "the", "need", "to", "be", "the", "first", "non", "whitespace", "character", "of", "its", "line", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "view", "it", "on", "GitHub", "TAG", "or", "mute", "the", "thread", "TAG", "NUMBER", "Both", "need", "to", "be", "at", "the", "start", "of", "the", "line", "or", "prefixed", "only", "by", "whitespace", "Single", "line", "s", "s", "Multiline", "s", "NUMBER", "mikewoo", "NUMBER", "But", "for", "style", "linting", "spaces", "indents", "in", "the", "template", "what", "can", "we", "do", "We", "could", "definitely", "come", "up", "with", "a", "way", "to", "enforce", "code", "style", "for", "embedded", "JS", "and", "Marko", "code", "as", "well", "NUMBER", "We", "ll", "probably", "need", "to", "explore", "that", "more", "after", "the", "v", "NUMBER", "release", "NUMBER", "Copying", "thoughts", "from", "an", "internal", "discussion", "where", "we", "ve", "decided", "TAG", "and", "TAG", "be", "the", "direction", "we", "re", "going", "to", "take", "NUMBER", "So", "despite", "my", "initial", "reservations", "on", "NUMBER", "I", "think", "this", "be", "the", "right", "approach", "NUMBER", "It", "would", "only", "be", "allow", "at", "the", "beginning", "of", "a", "line", "s", "var", "price", "NUMBER", "var", "id", "NUMBER", "function", "nextId", "return", "id", "Ambiguity", "has", "be", "the", "reasoning", "against", "this", "but", "looking", "at", "it", "again", "even", "without", "syntax", "highlight", "I", "think", "it", "be", "pretty", "clear", "and", "it", "definitely", "looks", "nicer", "and", "scttdavs", "has", "point", "out", "that", "with", "proper", "syntax", "highlight", "it", "would", "be", "made", "_very_", "clear", "red", "vs", "blue", "for", "example", "NUMBER", "TAG", "Part", "of", "the", "reason", "this", "makes", "sense", "be", "that", "we", "re", "already", "planning", "to", "allow", "etc", "NUMBER", "to", "allow", "the", "expression", "to", "continue", "to", "the", "next", "line", "js", "var", "foo", "bar", "NUMBER", "But", "JS", "already", "support", "a", "block", "statement", "LINK", "US", "docs", "Web", "JavaScript", "Reference", "Statements", "block", "so", "we", "would", "actually", "have", "to", "special", "case", "to", "_disallow_", "NUMBER", "NUMBER", "And", "there", "be", "an", "issue", "with", "NUMBER", "that", "could", "potentially", "end", "up", "with", "a", "confusing", "situation", "like", "this", "html", "TAG", "price", "NUMBER", "toFixed", "NUMBER", "TAG", "So", "in", "order", "to", "get", "what", "you", "want", "in", "this", "case", "TAG", "NUMBER", "TAG", "you", "would", "need", "to", "escape", "the", "first", "html", "TAG", "price", "NUMBER", "toFixed", "NUMBER", "TAG", "But", "if", "you", "actually", "wanted", "to", "output", "the", "multiline", "sequence", "perhaps", "you", "re", "explaining", "how", "to", "use", "it", "you", "need", "to", "escape", "the", "_second_", "html", "TAG", "var", "price", "NUMBER", "TAG", "With", "the", "single", "escaping", "be", "straightforward", "html", "TAG", "var", "price", "NUMBER", "TAG", "It", "s", "a", "fairly", "subtle", "difference", "but", "I", "do", "think", "that", "it", "s", "only", "going", "to", "be", "an", "issue", "in", "one", "direction", "jsx", "I", "could", "see", "someone", "doing", "this", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "I", "don", "t", "see", "this", "happening", "TAG", "Hello", "my", "name", "be", "name", "NUMBER", "TAG", "In", "the", "above", "case", "we", "re", "typically", "going", "to", "see", "multiple", "JS", "statements", "because", "we", "also", "allow", "the", "single", "line", "version", "js", "var", "foo", "NUMBER", "So", "if", "you", "accidentally", "forget", "the", "space", "for", "a", "multiline", "JS", "block", "it", "will", "compile", "to", "js", "out", "NUMBER", "w", "escapeXML", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "That", "s", "going", "to", "be", "pretty", "easy", "to", "detect", "NUMBER", "Hesulan", "What", "I", "meant", "be", "that", "the", "single", "line", "version", "because", "we", "allow", "continuing", "be", "also", "the", "multiline", "version", "NUMBER", "So", "If", "we", "wanted", "to", "have", "a", "_different_", "symbol", "like", "and", "didn", "t", "want", "the", "single", "to", "allow", "multiline", "it", "would", "take", "more", "work", "NUMBER", "Your", "logic", "be", "pretty", "much", "how", "I", "implement", "it", "LINK", "js", "htmljs", "parser", "commit", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "dc", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ffab", "NUMBER", "a", "diff", "NUMBER", "eec", "NUMBER", "a", "NUMBER", "c", "NUMBER", "ce", "NUMBER", "a", "NUMBER", "R", "NUMBER", "I", "m", "going", "to", "close", "this", "as", "the", "work", "has", "be", "completed", "NUMBER", "Thank", "you", "everyone", "for", "your", "feedback", "and", "help", "in", "reaching", "this", "point", "jsumners", "I", "also", "dislike", "classes", "in", "general", "NUMBER", "However", "the", "concept", "of", "a", "class", "fits", "perfectly", "with", "what", "a", "marko", "component", "be", "and", "the", "class", "syntax", "be", "now", "officially", "part", "of", "the", "JS", "language", "NUMBER", "In", "marko", "s", "case", "a", "class", "be", "the", "best", "tool", "for", "the", "job", "NUMBER", "As", "I", "understand", "it", "the", "only", "floating", "JS", "blocks", "marko", "NUMBER", "will", "support", "be", "class", "and", "import", "NUMBER", "I", "think", "this", "be", "reasonable", "especially", "since", "they", "be", "so", "common", "though", "I", "would", "push", "back", "against", "add", "any", "more", "and", "even", "then", "they", "be", "not", "really", "JS", "blocks", "but", "tags", "NUMBER", "Real", "JS", "code", "blocks", "need", "to", "be", "write", "use", "either", "the", "static", "tag", "or", "the", "runtime", "tag", "NUMBER", "Hesulan", "static", "support", "a", "block", "static", "function", "myHelper", "var", "foo", "NUMBER", "On", "a", "relate", "note", "could", "TAG", "fall", "back", "to", "use", "body", "text", "if", "the", "NUMBER", "attribute", "be", "omitted", "I", "think", "a", "lot", "of", "users", "would", "prefer", "that", "and", "it", "would", "certainly", "ease", "the", "transition", "from", "TAG", "NUMBER", "Hmm", "NUMBER", "do", "we", "only", "do", "it", "for", "static", "or", "everything", "This", "might", "be", "a", "bad", "path", "to", "go", "down", "NUMBER", "html", "TAG", "TAG", "constructor", "this", "NUMBER", "ate", "count", "NUMBER", "increment", "state", "NUMBER", "count", "TAG", "TAG", "TAG", "button", "background", "fff", "TAG", "TAG", "TAG", "TAG", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "TAG", "TAG", "TAG", "TAG", "var", "foo", "NUMBER", "var", "bar", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Thanks", "for", "report", "the", "problem", "NUMBER", "I", "m", "investigating", "now", "NUMBER", "Resolved", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "This", "bug", "had", "already", "be", "fix", "in", "Marko", "v", "NUMBER", "Thanks", "again", "for", "report", "the", "problem", "NUMBER", "You", "can", "immediately", "switch", "into", "HTML", "parsing", "mode", "by", "use", "an", "HTML", "delimited", "block", "html", "This", "be", "all", "parsed", "as", "TAG", "HTML", "TAG", "Does", "that", "solve", "your", "issue", "patrick", "steele", "idem", "The", "parser", "allows", "disabling", "concise", "mode", "NUMBER", "Do", "we", "or", "can", "we", "disable", "it", "for", "NUMBER", "marko", "NUMBER", "html", "and", "NUMBER", "marko", "NUMBER", "xml", "file", "We", "could", "disable", "concise", "mode", "for", "NUMBER", "marko", "NUMBER", "html", "but", "I", "m", "not", "sure", "we", "want", "to", "go", "there", "because", "it", "breaks", "syntax", "highlight", "unless", "we", "refactor", "our", "syntax", "highlight", "bundle", "NUMBER", "Sorry", "for", "the", "lack", "of", "docs", "on", "that", "rgagnon", "NUMBER", "We", "be", "completely", "reworking", "the", "docs", "for", "the", "Marko", "v", "NUMBER", "release", "and", "things", "will", "be", "a", "lot", "more", "clear", "NUMBER", "Let", "us", "know", "if", "you", "have", "any", "question", "but", "closing", "this", "issue", "for", "now", "NUMBER", "I", "push", "a", "fix", "NUMBER", "I", "will", "be", "publishing", "a", "new", "version", "very", "shortly", "NUMBER", "Thanks", "for", "report", "the", "problem", "Eldar", "X", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "rc", "NUMBER", "Please", "let", "us", "know", "if", "you", "see", "any", "other", "problem", "NUMBER", "Thanks", "Eldar", "X", "Would", "this", "cover", "your", "use", "case", "LINK", "js", "marko", "blob", "bce", "NUMBER", "d", "NUMBER", "f", "NUMBER", "aa", "NUMBER", "f", "NUMBER", "f", "NUMBER", "fffb", "NUMBER", "cd", "NUMBER", "a", "NUMBER", "docs", "NUMBER", "core", "tags", "NUMBER", "md", "export", "I", "m", "going", "to", "implement", "this", "in", "a", "bit", "unless", "you", "have", "some", "feedback", "NUMBER", "Can", "you", "explain", "a", "bit", "more", "I", "m", "not", "clear", "on", "what", "you", "be", "suggesting", "NUMBER", "The", "marko", "magic", "module", "enable", "game", "change", "auto", "detection", "for", "asset", "dependencies", "NUMBER", "I", "had", "thought", "that", "marko", "would", "absorb", "it", "all", "for", "v", "NUMBER", "but", "it", "looks", "like", "marko", "magic", "be", "still", "necessary", "for", "some", "lasso", "relate", "things", "NUMBER", "For", "example", "in", "the", "ui", "components", "playground", "LINK", "js", "samples", "ui", "components", "playground", "I", "still", "see", "TAG", "and", "TAG", "in", "the", "layout", "a", "browser", "NUMBER", "json", "for", "declaring", "a", "style", "NUMBER", "less", "dependency", "a", "browser", "NUMBER", "json", "for", "the", "home", "page", "declaring", "the", "TAG", "and", "other", "browser", "dependencies", "NUMBER", "Since", "marko", "be", "already", "at", "v", "NUMBER", "rc", "NUMBER", "I", "need", "to", "ask", "be", "you", "all", "planning", "to", "release", "without", "the", "asset", "detection", "features", "So", "technically", "these", "change", "will", "be", "outside", "of", "Marko", "and", "be", "a", "part", "of", "the", "Lasso", "taglib", "NUMBER", "While", "Marko", "be", "at", "an", "RC", "there", "be", "still", "some", "things", "to", "update", "in", "support", "package", "and", "this", "be", "one", "of", "those", "things", "NUMBER", "However", "I", "would", "like", "to", "have", "some", "discussion", "around", "the", "Marko", "magic", "approach", "and", "if", "we", "should", "make", "all", "of", "it", "mainstream", "NUMBER", "Particularly", "I", "have", "concerns", "about", "automatically", "injecting", "the", "Lasso", "head", "and", "body", "tags", "automatically", "NUMBER", "I", "wonder", "if", "it", "s", "a", "bit", "weird", "that", "since", "we", "use", "head", "as", "an", "injection", "point", "that", "if", "there", "be", "no", "head", "tag", "you", "won", "t", "get", "any", "styles", "NUMBER", "Likewise", "for", "body", "NUMBER", "I", "think", "requiring", "TAG", "and", "TAG", "be", "acceptable", "NUMBER", "It", "s", "the", "json", "file", "that", "I", "m", "mostly", "concerned", "about", "I", "want", "to", "write", "as", "few", "of", "those", "as", "possible", "Version", "NUMBER", "of", "fs", "extra", "LINK", "fs", "extra", "just", "get", "publish", "NUMBER", "TAG", "TAG", "TAG", "Dependency", "TAG", "TAG", "fs", "extra", "TAG", "TAG", "TAG", "TAG", "Current", "Version", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "Type", "TAG", "TAG", "devDependency", "TAG", "TAG", "TAG", "The", "version", "NUMBER", "be", "not", "covered", "by", "your", "current", "version", "range", "NUMBER", "Without", "accepting", "this", "pull", "request", "your", "project", "will", "work", "just", "like", "it", "did", "before", "NUMBER", "There", "might", "be", "a", "bunch", "of", "new", "features", "fix", "and", "perf", "improvement", "that", "the", "maintainers", "worked", "on", "for", "you", "though", "NUMBER", "I", "recommend", "you", "look", "into", "these", "change", "and", "try", "to", "get", "onto", "the", "latest", "version", "of", "fs", "extra", "NUMBER", "Given", "that", "you", "have", "a", "decent", "test", "suite", "a", "passing", "build", "be", "a", "strong", "indicator", "that", "you", "can", "take", "advantage", "of", "these", "change", "by", "merge", "the", "propose", "change", "into", "your", "project", "NUMBER", "Otherwise", "this", "branch", "be", "a", "great", "starting", "point", "for", "you", "to", "work", "on", "the", "update", "NUMBER", "TAG", "TAG", "Commits", "TAG", "TAG", "The", "new", "version", "differs", "by", "NUMBER", "commit", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "fcfa", "NUMBER", "TAG", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "f", "NUMBER", "b", "NUMBER", "d", "TAG", "TAG", "TAG", "CHANGELOG", "add", "issue", "TAG", "TAG", "TAG", "TAG", "TAG", "b", "NUMBER", "da", "NUMBER", "TAG", "TAG", "TAG", "Closes", "NUMBER", "LICENSE", "update", "year", "TAG", "TAG", "TAG", "TAG", "TAG", "c", "NUMBER", "fff", "TAG", "TAG", "TAG", "Merge", "pull", "request", "NUMBER", "from", "mawni", "readme", "add", "klawsync", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "bd", "NUMBER", "TAG", "TAG", "TAG", "Readme", "add", "klaw", "sync", "link", "TAG", "TAG", "TAG", "TAG", "TAG", "ab", "NUMBER", "a", "NUMBER", "TAG", "TAG", "TAG", "Merge", "pull", "request", "NUMBER", "from", "jprichardson", "docs", "TAG", "TAG", "TAG", "TAG", "TAG", "f", "NUMBER", "ee", "NUMBER", "e", "TAG", "TAG", "TAG", "Add", "note", "about", "walk", "s", "removal", "recommend", "jprichardson", "node", "klaw", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "dc", "NUMBER", "f", "TAG", "TAG", "TAG", "Add", "fs", "promise", "as", "fs", "extra", "promise", "alternative", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "a", "NUMBER", "TAG", "TAG", "TAG", "Move", "API", "docs", "to", "seperate", "docs", "folder", "TAG", "TAG", "TAG", "TAG", "TAG", "a", "NUMBER", "TAG", "TAG", "TAG", "Remove", "Node", "v", "NUMBER", "support", "message", "from", "README", "TAG", "TAG", "TAG", "TAG", "TAG", "fa", "NUMBER", "TAG", "TAG", "TAG", "Move", "klaw", "to", "devDeps", "TAG", "TAG", "TAG", "TAG", "TAG", "de", "NUMBER", "d", "NUMBER", "TAG", "TAG", "TAG", "Merge", "pull", "request", "NUMBER", "from", "jprichardson", "rm", "walk", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "f", "NUMBER", "cb", "NUMBER", "TAG", "TAG", "TAG", "Remove", "walk", "amp", "walkSync", "TAG", "TAG", "TAG", "TAG", "TAG", "cc", "NUMBER", "aaa", "NUMBER", "TAG", "TAG", "TAG", "Merge", "pull", "request", "NUMBER", "from", "jprichardson", "move", "test", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "ec", "NUMBER", "d", "TAG", "TAG", "TAG", "Merge", "pull", "request", "NUMBER", "from", "jprichardson", "move", "cleanup", "TAG", "TAG", "TAG", "TAG", "There", "be", "NUMBER", "commit", "in", "total", "NUMBER", "See", "the", "TAG", "full", "diff", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "Not", "sure", "how", "things", "should", "work", "exactly", "TAG", "There", "be", "a", "collection", "of", "frequently", "asked", "question", "LINK", "and", "of", "course", "you", "may", "always", "ask", "my", "humans", "LINK", "NUMBER", "TAG", "Your", "Greenkeeper", "LINK", "Bot", "palm_tree", "Also", "change", "vdom", "v", "to", "vdom", "V", "NUMBER", "Thanks", "for", "work", "on", "this", "Version", "NUMBER", "of", "md", "NUMBER", "hex", "LINK", "hex", "just", "get", "publish", "NUMBER", "TAG", "TAG", "TAG", "Dependency", "TAG", "TAG", "md", "NUMBER", "hex", "TAG", "TAG", "TAG", "TAG", "Current", "Version", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "Type", "TAG", "TAG", "devDependency", "TAG", "TAG", "TAG", "The", "version", "NUMBER", "be", "not", "covered", "by", "your", "current", "version", "range", "NUMBER", "Without", "accepting", "this", "pull", "request", "your", "project", "will", "work", "just", "like", "it", "did", "before", "NUMBER", "There", "might", "be", "a", "bunch", "of", "new", "features", "fix", "and", "perf", "improvement", "that", "the", "maintainers", "worked", "on", "for", "you", "though", "NUMBER", "I", "recommend", "you", "look", "into", "these", "change", "and", "try", "to", "get", "onto", "the", "latest", "version", "of", "md", "NUMBER", "hex", "NUMBER", "Given", "that", "you", "have", "a", "decent", "test", "suite", "a", "passing", "build", "be", "a", "strong", "indicator", "that", "you", "can", "take", "advantage", "of", "these", "change", "by", "merge", "the", "propose", "change", "into", "your", "project", "NUMBER", "Otherwise", "this", "branch", "be", "a", "great", "starting", "point", "for", "you", "to", "work", "on", "the", "update", "NUMBER", "TAG", "TAG", "Commits", "TAG", "TAG", "The", "new", "version", "differs", "by", "NUMBER", "commit", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "d", "NUMBER", "f", "NUMBER", "a", "NUMBER", "TAG", "TAG", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "NUMBER", "c", "NUMBER", "e", "TAG", "TAG", "TAG", "ES", "NUMBER", "ify", "and", "require", "Node", "NUMBER", "js", "NUMBER", "TAG", "TAG", "TAG", "TAG", "See", "the", "TAG", "full", "diff", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "Not", "sure", "how", "things", "should", "work", "exactly", "TAG", "There", "be", "a", "collection", "of", "frequently", "asked", "question", "LINK", "and", "of", "course", "you", "may", "always", "ask", "my", "humans", "LINK", "NUMBER", "TAG", "Your", "Greenkeeper", "LINK", "Bot", "palm_tree", "New", "Feature", "Perhaps", "relate", "to", "NUMBER", "Description", "Allow", "the", "signature", "setState", "key", "value", "to", "accept", "an", "Event", "object", "as", "its", "value", "e", "cause", "setState", "to", "extract", "e", "NUMBER", "target", "NUMBER", "value", "NUMBER", "Context", "Forcing", "two", "way", "data", "binding", "to", "be", "explicit", "be", "good", "in", "general", "but", "for", "very", "basic", "cases", "it", "s", "a", "chore", "NUMBER", "For", "example", "take", "the", "following", "component", "html", "TAG", "module", "NUMBER", "export", "onInput", "attrs", "this", "NUMBER", "ate", "password", "setPassword", "e", "this", "NUMBER", "ate", "NUMBER", "password", "e", "NUMBER", "target", "NUMBER", "value", "TAG", "TAG", "TAG", "Your", "password", "be", "state", "NUMBER", "password", "NUMBER", "length", "characters", "long", "TAG", "TAG", "TAG", "For", "this", "very", "basic", "task", "I", "had", "to", "write", "a", "setPassword", "handler", "to", "capture", "user", "input", "into", "state", "NUMBER", "If", "I", "had", "more", "than", "input", "I", "would", "have", "to", "either", "write", "more", "handlers", "or", "write", "a", "generic", "handler", "that", "differentiates", "by", "some", "kind", "of", "key", "NUMBER", "In", "any", "case", "it", "s", "something", "I", "have", "to", "write", "and", "think", "about", "every", "time", "I", "need", "to", "handle", "user", "input", "NUMBER", "However", "if", "setState", "were", "to", "accept", "an", "event", "as", "its", "value", "it", "would", "allow", "me", "to", "write", "the", "following", "instead", "html", "TAG", "module", "NUMBER", "export", "onInput", "attrs", "this", "NUMBER", "ate", "password", "TAG", "TAG", "TAG", "Your", "password", "be", "state", "NUMBER", "password", "NUMBER", "length", "characters", "long", "TAG", "TAG", "TAG", "This", "avoids", "the", "need", "to", "write", "any", "handler", "at", "all", "and", "remains", "very", "readable", "for", "what", "it", "do", "NUMBER", "For", "anything", "that", "needs", "something", "more", "complicated", "such", "as", "scrubbing", "out", "invalid", "characters", "for", "a", "phone", "number", "input", "it", "s", "not", "hard", "to", "fall", "back", "to", "the", "write", "your", "own", "handler", "way", "of", "doing", "it", "NUMBER", "Open", "Questions", "Is", "this", "too", "magical", "for", "marko", "s", "taste", "Would", "this", "work", "for", "all", "types", "of", "input", "Is", "this", "something", "you", "re", "interested", "in", "work", "on", "Yes", "Just", "throw", "this", "out", "there", "be", "a", "possible", "alternative", "html", "TAG", "module", "NUMBER", "export", "handleNameChanged", "value", "this", "NUMBER", "ate", "NUMBER", "name", "value", "NUMBER", "toUpperCase", "if", "this", "NUMBER", "ate", "NUMBER", "name", "NUMBER", "length", "NUMBER", "this", "NUMBER", "ate", "NUMBER", "invalidName", "true", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "In", "theory", "this", "could", "be", "implement", "in", "user", "land", "via", "a", "combination", "of", "a", "custom", "compile", "time", "transform", "and", "a", "small", "runtime", "and", "if", "it", "proves", "to", "be", "valuable", "then", "we", "could", "pull", "it", "into", "the", "core", "marko", "NUMBER", "Thoughts", "For", "reference", "React", "Forms", "Controlled", "Components", "LINK", "Uncontrolled", "Components", "LINK", "components", "NUMBER", "html", "Vue", "Form", "input", "Bindings", "LINK", "Coming", "from", "Mithril", "NUMBER", "js", "I", "always", "liked", "teaching", "two", "way", "data", "binding", "in", "this", "manner", "js", "var", "myData", "initial", "var", "myComponent", "view", "function", "return", "m", "input", "type", "text", "value", "myData", "oninput", "e", "myData", "e", "NUMBER", "currentTarget", "NUMBER", "value", "The", "value", "in", "this", "be", "it", "uses", "plain", "DOM", "concepts", "value", "oninput", "e", "and", "the", "data", "flow", "be", "very", "clear", "on", "the", "input", "DOM", "event", "assign", "myData", "to", "the", "event", "target", "s", "current", "value", "NUMBER", "In", "other", "words", "there", "s", "very", "little", "magic", "to", "it", "NUMBER", "So", "far", "Marko", "has", "also", "avoided", "data", "flow", "magic", "for", "the", "most", "part", "and", "be", "thus", "very", "close", "to", "plain", "HTML", "and", "JS", "it", "s", "precisely", "why", "I", "was", "able", "to", "pick", "it", "up", "so", "easily", "NUMBER", "HTML", "based", "frameworks", "including", "angular", "vue", "do", "not", "have", "the", "benefit", "of", "be", "plain", "JS", "which", "be", "why", "those", "other", "frameworks", "add", "easy", "proprietary", "ways", "to", "bind", "data", "they", "want", "to", "take", "the", "chore", "out", "of", "it", "NUMBER", "However", "I", "don", "t", "think", "it", "s", "the", "best", "approach", "to", "take", "for", "these", "reasons", "The", "data", "flow", "be", "not", "clear", "NUMBER", "When", "you", "see", "something", "like", "v", "model", "x", "or", "ng", "model", "y", "it", "s", "not", "immediately", "clear", "what", "that", "s", "doing", "or", "where", "it", "s", "come", "from", "NUMBER", "Contrast", "that", "with", "everything", "else", "Marko", "do", "where", "all", "data", "originates", "from", "state", "nice", "and", "explicit", "It", "takes", "away", "from", "other", "core", "features", "NUMBER", "Marko", "already", "has", "on", "click", "myMethod", "a", "solid", "data", "flow", "feature", "connecting", "JS", "and", "the", "view", "NUMBER", "It", "d", "be", "nice", "if", "that", "were", "the", "primary", "way", "for", "JS", "to", "interact", "with", "your", "view", "instead", "of", "having", "an", "additional", "syntax", "that", "splits", "common", "use", "cases", "NUMBER", "I", "think", "change", "setState", "via", "the", "proposal", "or", "add", "a", "method", "of", "some", "sort", "on", "click", "set", "x", "will", "strike", "a", "good", "balance", "between", "lack", "of", "boilerplate", "and", "lack", "of", "magic", "NUMBER", "Here", "be", "some", "note", "from", "various", "discussions", "html", "TAG", "module", "NUMBER", "export", "onInput", "this", "NUMBER", "ate", "NUMBER", "orders", "id", "NUMBER", "title", "Foo", "shipped", "true", "id", "NUMBER", "title", "Bar", "shipped", "false", "handleShippedChanged", "this", "NUMBER", "ate", "orders", "NUMBER", "i", "NUMBER", "shipped", "foo", "TAG", "TAG", "TAG", "TAG", "Shipped", "TAG", "TAG", "html", "TAG", "module", "NUMBER", "export", "onInput", "this", "NUMBER", "ate", "NUMBER", "orders", "id", "NUMBER", "title", "Foo", "shipped", "true", "id", "NUMBER", "title", "Bar", "shipped", "false", "toggleShipped", "i", "event", "input", "Add", "support", "for", "a", "settting", "a", "property", "chain", "while", "maintaining", "immutability", "this", "NUMBER", "setState", "orders", "i", "shipped", "input", "NUMBER", "checked", "Or", "the", "long", "way", "var", "orders", "this", "NUMBER", "ate", "NUMBER", "orders", "NUMBER", "concat", "this", "NUMBER", "ate", "NUMBER", "orders", "var", "order", "orders", "i", "Object", "NUMBER", "assign", "orders", "i", "Create", "a", "clone", "of", "the", "order", "order", "NUMBER", "shipped", "input", "NUMBER", "checked", "TAG", "TAG", "TAG", "TAG", "Shipped", "TAG", "TAG", "I", "m", "starting", "to", "really", "like", "the", "enhanced", "setState", "argument", "NUMBER", "I", "think", "on", "change", "setState", "orders", "NUMBER", "i", "NUMBER", "shipped", "be", "readable", "intuitive", "and", "convenient", "assuming", "it", "do", "the", "immutable", "update", "that", "we", "discussed", "NUMBER", "Another", "reason", "I", "think", "it", "s", "important", "to", "keep", "the", "data", "bind", "directions", "separate", "be", "to", "allow", "for", "different", "kinds", "of", "data", "binding", "without", "creating", "more", "esoteric", "language", "constructs", "NUMBER", "For", "example", "if", "you", "have", "an", "TAG", "be", "the", "DOM", "JS", "data", "binding", "on", "the", "oninput", "or", "onchange", "event", "Both", "be", "valid", "events", "depending", "on", "your", "use", "case", "you", "may", "want", "one", "over", "the", "other", "NUMBER", "mindeavor", "Our", "thinking", "was", "bind", "would", "look", "for", "_both_", "change", "and", "input", "events", "NUMBER", "But", "you", "re", "right", "I", "ve", "often", "had", "an", "change", "event", "handler", "on", "a", "text", "input", "to", "reformat", "a", "phone", "number", "after", "input", "so", "it", "wasn", "t", "change", "as", "the", "user", "typed", "NUMBER", "The", "issue", "with", "on", "change", "setState", "orders", "NUMBER", "i", "NUMBER", "shipped", "be", "that", "in", "this", "case", "we", "want", "the", "value", "of", "checked", "not", "value", "NUMBER", "We", "could", "add", "a", "new", "method", "on", "change", "setStateFromState", "orders", "NUMBER", "i", "NUMBER", "shipped", "checked", "mlrawlings", "did", "you", "mean", "setStateFromEvent", "Ideally", "setState", "would", "be", "smart", "about", "events", "NUMBER", "If", "I", "m", "not", "mistaken", "checked", "be", "an", "anomaly", "all", "other", "input", "types", "store", "their", "user", "input", "within", "elem", "NUMBER", "value", "NUMBER", "The", "non", "mutually", "exclusive", "options", "I", "see", "be", "Upgrade", "setState", "s", "logic", "to", "be", "something", "like", "newValue", "e", "NUMBER", "target", "NUMBER", "checked", "e", "NUMBER", "target", "NUMBER", "value", "when", "given", "an", "Event", "object", "value", "Add", "a", "setStateFromEvent", "for", "the", "generic", "case", "maybe", "one", "would", "want", "to", "set", "state", "on", "a", "data", "attribute", "instead", "of", "input", "value", "Checking", "in", "again", "that", "first", "bullet", "point", "would", "be", "very", "handy", "in", "small", "components", "and", "demos", "Thanks", "for", "letting", "us", "know", "NUMBER", "New", "version", "publish", "with", "those", "directories", "remove", "v", "NUMBER", "rc", "NUMBER", "The", "new", "version", "also", "include", "LINK", "js", "marko", "issue", "NUMBER", "The", "signature", "for", "onInput", "should", "be", "onInput", "input", "out", "NUMBER", "It", "be", "currently", "onInput", "input", "NUMBER", "cc", "ianvonholt", "Closed", "via", "LINK", "js", "marko", "commit", "NUMBER", "c", "NUMBER", "a", "NUMBER", "d", "NUMBER", "fb", "NUMBER", "e", "NUMBER", "ee", "NUMBER", "b", "NUMBER", "b", "NUMBER", "bb", "NUMBER", "ac", "NUMBER", "f", "NUMBER", "Note", "When", "use", "setProps", "LINK", "js", "marko", "blob", "master", "widgets", "Widget", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "out", "be", "not", "pass", "nor", "was", "it", "pass", "to", "getInitialState", "in", "v", "NUMBER", "NUMBER", "mlrawlings", "I", "m", "not", "seeing", "an", "issue", "relate", "to", "setProps", "NUMBER", "Calling", "setProps", "newProps", "will", "cause", "the", "component", "to", "be", "rerendered", "with", "newProps", "as", "the", "input", "and", "a", "new", "out", "will", "be", "created", "to", "do", "the", "rerender", "and", "those", "things", "will", "be", "pass", "to", "onInput", "NUMBER", "Am", "I", "misinterpreting", "your", "note", "Related", "NUMBER", "Deprecate", "w", "body", "in", "favor", "of", "include", "LINK", "js", "marko", "issue", "NUMBER", "there", "be", "a", "collapsed", "Other", "Options", "Considered", "section", "that", "has", "relevant", "details", "NUMBER", "be", "out", "of", "date", "after", "further", "discussions", "were", "made", "as", "part", "of", "NUMBER", "The", "feedback", "that", "we", "received", "was", "that", "no", "one", "really", "liked", "the", "usage", "of", "TAG", "with", "an", "empty", "argument", "since", "it", "didn", "t", "make", "it", "clear", "what", "exactly", "was", "be", "include", "NUMBER", "We", "settled", "on", "dropping", "w", "body", "and", "dropping", "the", "temporarily", "introduce", "body", "slot", "attribute", "tag", "in", "favor", "of", "a", "universal", "TAG", "tag", "NUMBER", "We", "still", "need", "to", "capture", "this", "correctly", "in", "the", "final", "release", "note", "and", "documentation", "but", "for", "now", "NUMBER", "Deprecate", "w", "body", "in", "favor", "of", "include", "LINK", "js", "marko", "issue", "NUMBER", "contains", "the", "latest", "docs", "for", "this", "feature", "NUMBER", "Hope", "that", "clarifies", "NUMBER", "While", "we", "want", "to", "avoid", "change", "at", "this", "point", "nothing", "be", "set", "in", "stone", "so", "if", "you", "have", "any", "thoughts", "or", "concerns", "then", "please", "share", "NUMBER", "I", "m", "closing", "the", "issue", "but", "please", "feel", "free", "to", "add", "more", "comments", "here", "NUMBER", "We", "ve", "already", "deviated", "from", "JavaScript", "in", "ways", "that", "I", "make", "more", "sense", "and", "we", "would", "not", "want", "to", "introduce", "any", "breaking", "change", "at", "this", "point", "NUMBER", "FYI", "You", "can", "do", "the", "following", "if", "you", "want", "both", "the", "key", "index", "and", "value", "when", "looping", "over", "the", "elements", "properties", "of", "an", "Array", "Object", "xml", "TAG", "TAG", "That", "syntax", "works", "with", "objects", "too", "xml", "TAG", "TAG", "If", "you", "still", "have", "suggestions", "concerns", "please", "let", "us", "know", "and", "happy", "to", "discuss", "some", "more", "but", "closing", "issue", "for", "now", "NUMBER", "Thanks", "NUMBER", "Bug", "Report", "Context", "html", "TAG", "module", "NUMBER", "export", "onInput", "attrs", "var", "content", "Hello", "there", "this", "NUMBER", "ate", "text", "NUMBER", "Text", "NUMBER", "content", "text", "NUMBER", "Text", "NUMBER", "content", "TAG", "TAG", "TAG", "state", "NUMBER", "text", "NUMBER", "TAG", "TAG", "state", "NUMBER", "text", "NUMBER", "TAG", "TAG", "Expected", "Behavior", "html", "TAG", "Text", "NUMBER", "Hello", "there", "TAG", "TAG", "Text", "NUMBER", "Hello", "there", "TAG", "Actual", "Behavior", "html", "TAG", "Text", "NUMBER", "TAG", "TAG", "Text", "NUMBER", "Hello", "there", "TAG", "Your", "Environment", "Version", "use", "v", "NUMBER", "beta", "NUMBER", "mindeavor", "I", "would", "expect", "that", "to", "work", "since", "Marko", "shouldn", "t", "do", "anything", "special", "with", "the", "code", "inside", "the", "TAG", "block", "NUMBER", "Would", "you", "be", "interested", "in", "work", "on", "this", "I", "don", "t", "think", "I", "would", "have", "the", "time", "to", "dig", "into", "the", "codebase", "in", "the", "near", "future", "no", "mindeavor", "No", "worries", "I", "think", "you", "be", "right", "Hesulan", "NUMBER", "Would", "you", "be", "interested", "in", "work", "on", "a", "fix", "Michael", "and", "I", "had", "a", "quick", "discussion", "and", "our", "conclusion", "was", "that", "we", "should", "update", "htmljs", "parser", "to", "ignore", "Marko", "placeholders", "inside", "template", "literal", "strings", "in", "parsed", "text", "mode", "NUMBER", "Thanks", "Thanks", "for", "open", "the", "issue", "NUMBER", "This", "has", "be", "fix", "NUMBER", "Please", "see", "issue", "NUMBER", "If", "you", "upgrade", "to", "the", "latest", "beta", "you", "should", "be", "good", "to", "go", "I", "think", "more", "change", "be", "required", "NUMBER", "The", "handleRootNodes", "transform", "that", "be", "be", "use", "to", "do", "the", "implicit", "binding", "to", "all", "root", "elements", "be", "also", "internally", "add", "the", "w", "bind", "attribute", "to", "make", "everything", "work", "LINK", "js", "marko", "blob", "NUMBER", "aaf", "NUMBER", "a", "NUMBER", "e", "NUMBER", "cef", "NUMBER", "e", "NUMBER", "edca", "NUMBER", "a", "NUMBER", "e", "NUMBER", "widgets", "taglib", "TransformHelper", "handleRootNodes", "NUMBER", "js", "L", "NUMBER", "Looks", "good", "NUMBER", "Thank", "you", "for", "work", "on", "that", "Thank", "you", "smulder", "for", "finding", "these", "bug", "I", "ll", "be", "publishing", "a", "fix", "soon", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "beta", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "beta", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "beta", "NUMBER", "Thanks", "for", "report", "the", "problem", "Thanks", "for", "the", "fix", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "beta", "NUMBER", "Thanks", "again", "for", "the", "PR", "NUMBER", "We", "should", "definitely", "consider", "improving", "the", "error", "message", "or", "handle", "this", "better", "but", "the", "reason", "you", "be", "seeing", "the", "error", "be", "that", "you", "should", "typically", "never", "need", "to", "render", "a", "TAG", "node", "in", "the", "browser", "since", "it", "be", "only", "meant", "to", "be", "something", "interpreted", "by", "the", "browser", "when", "loading", "an", "HTML", "page", "rendered", "on", "the", "server", "NUMBER", "Just", "curious", "what", "be", "your", "use", "case", "for", "needing", "to", "render", "an", "entire", "page", "along", "with", "the", "TAG", "tag", "in", "the", "browser", "One", "option", "be", "to", "just", "not", "generate", "any", "code", "for", "the", "TAG", "node", "when", "compiled", "for", "the", "browser", "NUMBER", "Another", "option", "be", "to", "show", "a", "friendly", "compiler", "error", "NUMBER", "Thoughts", "Concerns", "Alternative", "ideas", "Fixed", "New", "version", "publish", "marko", "NUMBER", "beta", "NUMBER", "Hey", "albertogasparin", "it", "was", "necessary", "to", "deprecate", "a", "single", "hyphen", "in", "v", "NUMBER", "because", "we", "have", "to", "remove", "support", "for", "single", "hyphens", "in", "v", "NUMBER", "to", "support", "the", "improvement", "of", "allowing", "spaces", "in", "attribute", "values", "when", "the", "attribute", "value", "be", "a", "complex", "expression", "NUMBER", "If", "you", "be", "not", "able", "to", "get", "rid", "of", "the", "deprecation", "warning", "then", "that", "be", "a", "bug", "NUMBER", "I", "be", "investigating", "now", "and", "will", "publish", "a", "new", "version", "of", "htmljs", "parser", "if", "necessary", "NUMBER", "I", "will", "update", "soon", "NUMBER", "Thanks", "for", "report", "the", "problem", "Sorry", "for", "the", "bad", "deprecation", "warning", "when", "use", "a", "double", "hyphen", "NUMBER", "The", "problem", "has", "be", "fix", "with", "htmljs", "parser", "NUMBER", "NUMBER", "I", "know", "the", "deprecation", "warnings", "can", "be", "a", "lot", "of", "noise", "but", "we", "didn", "t", "see", "a", "good", "way", "to", "avoid", "this", "change", "as", "part", "of", "Marko", "v", "NUMBER", "I", "hope", "it", "be", "not", "too", "much", "of", "a", "pain", "to", "update", "your", "code", "now", "but", "we", "do", "plan", "on", "provide", "a", "migration", "tool", "a", "little", "later", "that", "would", "automatically", "fix", "the", "issue", "but", "it", "be", "not", "ready", "yet", "NUMBER", "Introduces", "colon", "alias", "destructuring", "support", "for", "import", "javascript", "TAG", "I", "agree", "that", "this", "should", "be", "support", "NUMBER", "But", "you", "can", "use", "as", "for", "aliases", "javascript", "import", "client", "as", "twilio", "from", "NUMBER", "NUMBER", "lib", "twilio", "I", "write", "up", "a", "fix", "to", "support", "colon", "destructuring", "as", "it", "s", "support", "in", "standard", "JS", "destructuring", "NUMBER", "I", "actually", "didn", "t", "know", "that", "colon", "destructuring", "be", "not", "support", "in", "import", "destructuring", "which", "I", "find", "quite", "surprising", "and", "inconsistent", "NUMBER", "I", "rejected", "my", "PR", "NUMBER", "This", "issue", "should", "be", "close", "NUMBER", "cc", "patrick", "steele", "idem", "We", "want", "to", "strictly", "follow", "the", "ES", "NUMBER", "import", "syntax", "NUMBER", "Closing", "this", "issue", "NUMBER", "Thanks", "NUMBER", "attrs", "attribute", "NUMBER", "Fixed", "merge", "conflict", "cc", "patrick", "steele", "idem", "mlrawlings", "This", "has", "be", "resolve", "NUMBER", "The", "easiest", "way", "right", "now", "to", "achieve", "what", "you", "want", "be", "to", "register", "your", "own", "custom", "tag", "that", "be", "configured", "to", "have", "a", "body", "of", "static", "text", "NUMBER", "For", "example", "you", "could", "register", "your", "own", "TAG", "tag", "_src", "components", "static", "text", "marko", "tag", "NUMBER", "json", "_", "json", "body", "static", "text", "xml", "TAG", "Content", "More", "Content", "data", "NUMBER", "myVar", "TAG", "Does", "that", "work", "for", "you", "Related", "LINK", "js", "marko", "issue", "NUMBER", "NOTE", "If", "you", "want", "to", "recognize", "placeholders", "i", "NUMBER", "e", "NUMBER", "NUMBER", "then", "you", "should", "use", "parsed", "text", "instead", "of", "static", "text", "Which", "version", "of", "marko", "be", "you", "use", "I", "ll", "add", "a", "test", "case", "eikaramba", "Sorry", "for", "the", "delayed", "response", "NUMBER", "I", "add", "a", "test", "case", "for", "what", "I", "was", "trying", "to", "explain", "NUMBER", "Please", "take", "a", "look", "at", "the", "following", "LINK", "js", "marko", "tree", "master", "test", "autotests", "render", "static", "text", "tag", "The", "implementation", "for", "the", "TAG", "tag", "can", "be", "find", "in", "the", "following", "directory", "LINK", "js", "marko", "tree", "master", "test", "autotests", "render", "static", "text", "tag", "components", "static", "text", "NOTE", "The", "test", "case", "was", "add", "to", "Marko", "v", "NUMBER", "master", "branch", "but", "it", "should", "work", "the", "same", "in", "Marko", "v", "NUMBER", "Does", "that", "clarify", "and", "do", "that", "solution", "work", "for", "you", "Notes", "Use", "minprops", "LINK", "to", "reduce", "code", "size", "Use", "envify", "LINK", "reduce", "code", "size", "Fixes", "NUMBER", "Nice", "NUMBER", "Thank", "you", "Just", "some", "initial", "thoughts", "It", "s", "already", "possible", "to", "embed", "a", "React", "component", "in", "a", "Marko", "component", "but", "we", "can", "definitely", "provide", "things", "to", "make", "this", "more", "seamless", "I", "m", "definitely", "open", "to", "ideas", "on", "improving", "operability", "in", "addition", "to", "the", "reasons", "you", "mention", "but", "also", "because", "I", "would", "like", "to", "make", "it", "easier", "for", "teams", "to", "try", "or", "transition", "to", "Marko", "If", "you", "use", "React", "when", "rendering", "on", "the", "server", "then", "you", "will", "have", "no", "choice", "but", "to", "rerender", "everything", "in", "the", "browser", "since", "React", "requires", "this", "Marko", "do", "not", "require", "this", "Seamless", "interoperability", "can", "become", "complex", "when", "trying", "to", "support", "both", "server", "side", "and", "client", "side", "rendering", "but", "I", "think", "it", "be", "completely", "doable", "It", "seems", "reasonable", "to", "create", "a", "generic", "adapter", "component", "for", "embedding", "a", "React", "component", "in", "Marko", "and", "vice", "versa", "It", "s", "possible", "to", "translate", "a", "rendered", "Marko", "VDOM", "tree", "to", "a", "React", "VDOM", "tree", "with", "a", "performance", "hit", "via", "tree", "traversal", "of", "the", "Marko", "VDOM", "output", "Alternatively", "a", "Marko", "component", "can", "be", "rendered", "and", "mounted", "during", "the", "componentDidUpdate", "lifecycle", "method", "client", "side", "only", "Usage", "ideas", "_Marko", "component", "with", "embedded", "React", "component", "use", "Marko", "v", "NUMBER", "_", "xml", "import", "MyReactComponent", "from", "NUMBER", "MyReactComponent", "TAG", "TAG", "TAG", "React", "component", "with", "embedded", "Marko", "component", "_", "jsx", "import", "myMarkoComponent", "from", "NUMBER", "my", "marko", "component", "NUMBER", "return", "TAG", "TAG", "TAG", "I", "would", "to", "hear", "some", "more", "thoughts", "from", "others", "but", "I", "just", "wanted", "to", "share", "my", "initial", "thoughts", "NUMBER", "Thanks", "for", "open", "the", "issue", "NUMBER", "mindeavor", "there", "have", "be", "some", "conversations", "about", "provide", "an", "adapter", "to", "support", "registering", "Marko", "UI", "components", "as", "Web", "Component", "custom", "elements", "but", "we", "have", "not", "do", "anything", "further", "NUMBER", "After", "the", "v", "NUMBER", "release", "we", "should", "do", "more", "exploration", "to", "see", "what", "be", "possible", "and", "capture", "it", "in", "our", "ROADMAP", "NUMBER", "Right", "now", "the", "Marko", "v", "NUMBER", "release", "be", "our", "top", "priority", "and", "we", "hope", "to", "get", "that", "finalized", "soon", "I", "m", "not", "oppose", "to", "this", "but", "it", "be", "probably", "sufficient", "to", "add", "some", "extra", "metadata", "to", "the", "compiled", "template", "as", "a", "JavaScript", "comment", "such", "that", "it", "would", "be", "minify", "out", "in", "production", "NUMBER", "In", "addition", "for", "Marko", "v", "NUMBER", "we", "introduce", "support", "for", "inspectable", "metadata", "that", "gets", "add", "template", "compiled", "for", "the", "server", "NUMBER", "in", "addition", "add", "version", "v", "support", "to", "markoc", "command", "Can", "you", "open", "up", "a", "separate", "Github", "issue", "for", "that", "enhancement", "this", "makes", "track", "progress", "easier", "Would", "you", "be", "interested", "in", "work", "on", "either", "of", "these", "enhancements", "As", "we", "discussed", "a", "few", "days", "ago", "patrick", "steele", "idem", "we", "should", "also", "consider", "add", "a", "note", "to", "the", "compiled", "output", "stating", "that", "it", "be", "compiled", "and", "to", "not", "edit", "it", "NUMBER", "e", "NUMBER", "g", "NUMBER", "js", "Compiled", "use", "marko", "NUMBER", "rc", "NUMBER", "DO", "NOT", "EDIT", "or", "js", "Compiled", "use", "markoc", "NUMBER", "rc", "NUMBER", "DO", "NOT", "EDIT", "This", "has", "be", "resolve", "NUMBER", "Thank", "you", "Good", "catch", "NUMBER", "Thank", "you", "I", "ll", "work", "on", "add", "a", "test", "Thanks", "johnjv", "xml", "validate", "input", "input", "var", "assert", "require", "assert", "assert", "input", "NUMBER", "label", "input", "NUMBER", "renderBody", "label", "or", "renderBody", "be", "required", "TAG", "TAG", "TAG", "For", "production", "build", "the", "validate", "input", "tag", "should", "have", "no", "impact", "on", "the", "compiled", "template", "NUMBER", "We", "should", "also", "consider", "enabling", "render", "time", "input", "validation", "based", "marko", "tag", "NUMBER", "json", "for", "simple", "validations", "NUMBER", "This", "be", "an", "open", "ended", "issue", "NUMBER", "While", "code", "coverage", "be", "not", "a", "perfect", "metric", "it", "would", "be", "awesome", "to", "see", "our", "coverage", "reach", "NUMBER", "on", "this", "next", "release", "NUMBER", "We", "use", "an", "autotests", "format", "for", "our", "test", "which", "make", "it", "really", "easy", "to", "add", "new", "test", "just", "copy", "a", "directory", "and", "modify", "it", "for", "the", "new", "test", "NUMBER", "If", "you", "re", "interested", "in", "add", "some", "test", "and", "have", "question", "feel", "free", "to", "ask", "them", "here", "NUMBER", "Some", "high", "impact", "places", "that", "could", "use", "better", "coverage", "runtime", "dom", "NUMBER", "js", "LINK", "runtime", "NUMBER", "Fdom", "NUMBER", "js", "preserved", "attributes", "when", "re", "rendering", "in", "widgets", "Widget", "NUMBER", "js", "LINK", "widgets", "NUMBER", "FWidget", "NUMBER", "js", "L", "NUMBER", "rendering", "then", "use", "dom", "insertion", "methods", "when", "use", "the", "legacy", "widget", "api", "require", "marko", "widgets", "NUMBER", "defineComponent", "in", "widgets", "Widget", "NUMBER", "js", "LINK", "widgets", "NUMBER", "FWidget", "NUMBER", "js", "L", "NUMBER", "passing", "an", "object", "to", "setState", "in", "widgets", "Widget", "NUMBER", "js", "LINK", "widgets", "NUMBER", "FWidget", "NUMBER", "js", "L", "NUMBER", "a", "number", "of", "builder", "methods", "have", "no", "or", "incomplete", "coverage", "in", "compiler", "Builder", "NUMBER", "js", "LINK", "compiler", "NUMBER", "FBuilder", "NUMBER", "js", "NUMBER", "These", "test", "could", "go", "in", "test", "autotests", "codegen", "LINK", "js", "marko", "tree", "master", "test", "autotests", "codegen", "NUMBER", "parsing", "a", "function", "expression", "in", "compiler", "util", "parseJavaScript", "NUMBER", "js", "LINK", "compiler", "NUMBER", "Futil", "NUMBER", "FparseJavaScript", "NUMBER", "js", "L", "NUMBER", "compiler", "taglib", "loader", "loader", "taglib", "NUMBER", "js", "LINK", "compiler", "NUMBER", "Ftaglib", "loader", "NUMBER", "Floader", "taglib", "NUMBER", "js", "error", "assertions", "in", "many", "_many_", "locations", "How", "to", "find", "other", "file", "that", "could", "use", "additional", "coverage", "visit", "LINK", "js", "marko", "branch", "master", "scroll", "down", "to", "Source", "Files", "on", "Master", "sort", "by", "lines", "miss", "image", "LINK", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "NUMBER", "d", "b", "NUMBER", "e", "NUMBER", "png", "yomed", "if", "you", "need", "a", "temporary", "workaround", "js", "TAG", "I", "have", "confirmed", "this", "be", "still", "an", "issue", "in", "v", "NUMBER", "as", "well", "NUMBER", "Re", "open", "as", "the", "fix", "needs", "to", "be", "back", "ported", "to", "v", "NUMBER", "marko", "NUMBER", "has", "be", "publish", "with", "this", "fix", "NUMBER", "yeah", "as", "already", "stated", "this", "be", "marko", "trying", "to", "avoid", "naming", "collisions", "NUMBER", "The", "import", "parser", "could", "use", "LINK", "js", "marko", "blob", "master", "compiler", "util", "safeVarName", "NUMBER", "js", "to", "generate", "a", "safe", "name", "but", "it", "would", "still", "fail", "for", "html", "TAG", "A", "quick", "fix", "would", "be", "to", "just", "add", "a", "namespace", "to", "that", "function", "as", "well", "so", "in", "the", "above", "case", "it", "would", "output", "javascript", "var", "m__asset", "require", "asset", "asset", "m__asset", "NUMBER", "asset", "The", "namespace", "could", "be", "anything", "pretty", "unique", "but", "you", "could", "technically", "still", "encounter", "the", "bug", "if", "you", "know", "it", "or", "miraculously", "name", "your", "var", "the", "same", "NUMBER", "Otherwise", "I", "don", "t", "see", "an", "obvious", "solution", "other", "than", "digging", "into", "marko", "s", "naming", "collision", "logic", "NUMBER", "patrick", "steele", "idem", "mlrawlings", "Thoughts", "tinovyatkin", "For", "now", "we", "want", "Marko", "template", "to", "compile", "to", "ES", "NUMBER", "compatible", "code", "since", "compiled", "template", "can", "either", "be", "loaded", "in", "the", "browser", "or", "on", "the", "server", "NUMBER", "On", "the", "server", "the", "compiler", "requires", "Node", "NUMBER", "js", "v", "NUMBER", "but", "the", "runtime", "be", "ES", "NUMBER", "compatible", "and", "works", "with", "IE", "NUMBER", "and", "all", "other", "modern", "browsers", "NUMBER", "As", "it", "stands", "now", "import", "export", "be", "not", "finalized", "and", "that", "syntax", "be", "not", "natively", "support", "by", "Node", "NUMBER", "js", "and", "browsers", "NUMBER", "We", "don", "t", "want", "to", "require", "the", "use", "of", "Babel", "for", "any", "of", "the", "core", "tags", "that", "we", "document", "as", "part", "of", "Marko", "so", "that", "means", "that", "Marko", "need", "to", "transpile", "import", "export", "to", "something", "that", "be", "widely", "support", "and", "since", "we", "be", "going", "to", "transpile", "we", "might", "as", "well", "make", "the", "code", "ES", "NUMBER", "compatible", "for", "improved", "compatibility", "NUMBER", "Regarding", "transpiling", "the", "following", "xml", "TAG", "Something", "similar", "to", "the", "following", "would", "work", "javascript", "var", "asset_module", "require", "NUMBER", "NUMBER", "NUMBER", "shared", "marko", "asset", "var", "asset", "asset_module", "NUMBER", "asset", "A", "single", "_", "in", "the", "variable", "name", "should", "be", "sufficient", "for", "avoiding", "collisions", "since", "developers", "typically", "don", "t", "use", "_", "in", "variable", "names", "NUMBER", "However", "we", "can", "make", "the", "variable", "as", "long", "or", "as", "short", "as", "we", "want", "since", "it", "won", "t", "matter", "after", "the", "code", "be", "minify", "NUMBER", "At", "the", "moment", "I", "be", "currently", "swamped", "NUMBER", "If", "anyone", "wants", "to", "work", "on", "fix", "the", "compiled", "code", "for", "the", "TAG", "tag", "please", "let", "me", "know", "NUMBER", "Thanks", "in", "advance", "NUMBER", "I", "_think_", "this", "be", "as", "simple", "appending", "_module", "or", "something", "here", "LINK", "js", "marko", "blob", "NUMBER", "f", "NUMBER", "c", "NUMBER", "fba", "NUMBER", "d", "NUMBER", "de", "NUMBER", "d", "NUMBER", "c", "NUMBER", "cc", "taglibs", "core", "util", "parseImport", "NUMBER", "js", "L", "NUMBER", "NUMBER", "Along", "with", "the", "change", "I", "d", "like", "to", "see", "an", "additional", "test", "make", "sure", "something", "like", "the", "following", "produces", "a", "sane", "output", "html", "TAG", "TAG", "It", "just", "occur", "to", "me", "that", "require", "be", "expected", "to", "cache", "loaded", "modules", "var", "foo", "require", "NUMBER", "foo", "NUMBER", "foo", "var", "bar", "require", "NUMBER", "foo", "NUMBER", "bar", "Not", "very", "pretty", "but", "perhaps", "more", "readable", "and", "definitely", "more", "collision", "proof", "NUMBER", "Thoughts", "Other", "then", "still", "be", "slightly", "slower", "to", "execute", "that", "code", "wouldn", "t", "minify", "as", "well", "so", "I", "would", "still", "like", "to", "see", "each", "module", "only", "be", "required", "once", "NUMBER", "html", "TAG", "would", "be", "equivalent", "to", "html", "TAG", "SebastiaandenBoer", "I", "think", "your", "issue", "be", "separate", "NUMBER", "I", "think", "you", "be", "forgetting", "to", "set", "the", "Content", "Type", "header", "to", "ensure", "that", "the", "browser", "knows", "how", "to", "interpret", "the", "response", "from", "the", "server", "NUMBER", "You", "should", "be", "doing", "something", "similar", "to", "the", "following", "in", "your", "page", "controller", "javascript", "res", "NUMBER", "set", "content", "type", "text", "html", "charset", "utf", "NUMBER", "Given", "_src", "components", "my", "component", "index", "NUMBER", "marko", "_", "xml", "TAG", "module", "NUMBER", "export", "handleButtonClick", "TAG", "TAG", "NUMBER", "foo", "TAG", "TAG", "TAG", "The", "TAG", "code", "should", "be", "pull", "out", "into", "src", "components", "my", "component", "index", "NUMBER", "marko", "NUMBER", "less", "at", "compile", "time", "NUMBER", "The", "lang", "attribute", "should", "be", "use", "to", "determine", "the", "file", "extension", "and", "the", "default", "lang", "should", "be", "css", "NUMBER", "The", "generate", "file", "should", "then", "be", "imported", "in", "the", "compiled", "template", "so", "that", "it", "will", "automatically", "be", "pick", "up", "by", "the", "bundler", "require", "NUMBER", "index", "NUMBER", "marko", "NUMBER", "less", "NUMBER", "Old", "NUMBER", "layouts", "main", "template", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "Default", "body", "content", "TAG", "TAG", "TAG", "page", "NUMBER", "marko", "html", "TAG", "TAG", "Hello", "World", "TAG", "TAG", "New", "NUMBER", "layouts", "main", "template", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Default", "body", "content", "TAG", "TAG", "TAG", "page", "NUMBER", "marko", "html", "TAG", "TAG", "Hello", "World", "TAG", "TAG", "TAG", "Description", "TAG", "Deprecate", "renderSync", "data", "and", "render", "data", "callback", "in", "their", "current", "form", "NUMBER", "Use", "renderToString", "instead", "as", "v", "NUMBER", "will", "return", "a", "RenderResult", "instead", "of", "a", "string", "NUMBER", "Motivation", "and", "Context", "With", "this", "notice", "in", "place", "there", "shouldn", "t", "be", "any", "breaking", "change", "when", "moving", "from", "v", "NUMBER", "to", "v", "NUMBER", "that", "don", "t", "already", "warn", "you", "in", "the", "current", "version", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "No", "new", "test", "change", "already", "covered", "by", "exist", "test", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Description", "add", "import", "tag", "works", "like", "html", "TAG", "Motivation", "and", "Context", "Fixes", "LINK", "js", "marko", "issue", "NUMBER", "Checklist", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Thanks", "for", "work", "on", "this", "scttdavs", "I", "did", "a", "fairly", "quick", "code", "review", "and", "one", "issue", "I", "see", "be", "that", "we", "want", "to", "avoid", "parenthesis", "when", "use", "the", "TAG", "tag", "so", "that", "the", "user", "can", "write", "out", "the", "import", "in", "the", "ES", "NUMBER", "way", "NUMBER", "Currently", "it", "appears", "you", "be", "parsing", "the", "import", "statement", "from", "within", "the", "argument", "on", "the", "TAG", "tag", "xml", "TAG", "I", "would", "like", "to", "only", "support", "the", "following", "xml", "TAG", "The", "only", "code", "change", "that", "should", "be", "required", "be", "that", "you", "will", "need", "to", "loop", "over", "the", "attributes", "and", "join", "the", "attribute", "names", "by", "a", "space", "e", "NUMBER", "g", "NUMBER", "attributeNames", "NUMBER", "join", "to", "build", "the", "import", "string", "that", "be", "then", "parsed", "NUMBER", "For", "example", "here", "be", "the", "AST", "after", "parsing", "TAG", "json", "type", "TemplateRoot", "body", "type", "HtmlElement", "tagName", "import", "attributes", "type", "HtmlAttribute", "name", "bar", "as", "b", "type", "HtmlAttribute", "name", "from", "type", "HtmlAttribute", "name", "NUMBER", "bar", "body", "Do", "you", "have", "any", "concerns", "about", "dropping", "the", "parens", "Also", "I", "wouldn", "t", "bother", "mentioning", "TAG", "in", "the", "docs", "since", "that", "be", "deprecate", "NUMBER", "On", "a", "relate", "note", "we", "might", "have", "issue", "when", "we", "update", "the", "parser", "to", "handle", "commas", "so", "we", "probably", "need", "to", "provide", "a", "helper", "to", "get", "the", "raw", "string", "inside", "the", "open", "tag", "NUMBER", "Sure", "that", "looks", "like", "a", "simple", "change", "NUMBER", "I", "ll", "have", "time", "tonight", "to", "work", "on", "it", "some", "more", "On", "Sun", "Nov", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "Patrick", "Steele", "Idem", "TAG", "write", "On", "a", "relate", "note", "we", "might", "have", "issue", "when", "we", "update", "the", "parser", "to", "handle", "commas", "so", "we", "probably", "need", "to", "provide", "a", "helper", "to", "get", "the", "raw", "string", "inside", "the", "open", "tag", "NUMBER", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "view", "it", "on", "GitHub", "TAG", "or", "mute", "the", "thread", "TAG", "NUMBER", "patrick", "steele", "idem", "What", "do", "you", "think", "of", "the", "above", "implementation", "in", "the", "last", "commit", "Instead", "of", "joining", "the", "attribute", "names", "for", "now", "sounds", "like", "comma", "parsing", "will", "conflict", "with", "that", "later", "I", "add", "the", "tag", "string", "to", "the", "node", "so", "el", "NUMBER", "tagString", "returns", "TAG", "and", "we", "get", "all", "we", "need", "from", "that", "NUMBER", "Is", "there", "a", "better", "way", "of", "doing", "this", "Still", "feeling", "my", "around", "tagString", "would", "have", "the", "problem", "that", "it", "would", "be", "different", "for", "concise", "vs", "non", "concise", "unless", "we", "always", "stripped", "off", "the", "the", "starting", "TAG", "or", "NUMBER", "If", "we", "strip", "off", "those", "characters", "then", "I", "be", "okay", "with", "use", "tagString", "NUMBER", "patrick", "steele", "idem", "any", "more", "comments", "or", "be", "this", "ready", "to", "merge", "It", "s", "ready", "to", "merge", "I", "be", "just", "finishing", "up", "the", "change", "to", "support", "nested", "TAG", "tags", "and", "I", "will", "merge", "your", "change", "very", "soon", "NUMBER", "We", "will", "then", "publish", "a", "new", "beta", "release", "NUMBER", "Thank", "you", "again", "great", "thx", "Also", "made", "one", "slight", "more", "optimization", "couldn", "t", "help", "myself", "Thanks", "Thank", "you", "for", "bringing", "this", "up", "NUMBER", "I", "think", "it", "makes", "sense", "to", "normalize", "the", "HTML", "string", "before", "doing", "the", "comparison", "to", "avoid", "issue", "relate", "to", "having", "not", "having", "a", "new", "line", "character", "at", "the", "end", "javascript", "str", "str", "NUMBER", "replace", "s", "Or", "possibly", "a", "little", "more", "conservative", "javascript", "str", "str", "NUMBER", "replace", "r", "n", "n", "Thoughts", "Agreed", "NUMBER", "Would", "you", "be", "interested", "in", "make", "this", "change", "to", "normalize", "the", "string", "before", "comparison", "Thanks", "for", "the", "PR", "JeroenVdb", "but", "I", "think", "it", "it", "be", "better", "to", "discuss", "how", "nested", "content", "be", "handle", "within", "the", "Includes", "LINK", "js", "marko", "blob", "master", "docs", "language", "guide", "NUMBER", "md", "include", "section", "of", "the", "docs", "NUMBER", "I", "want", "to", "avoid", "add", "a", "new", "section", "to", "the", "docs", "so", "I", "be", "closing", "this", "PR", "NUMBER", "Thank", "you", "though", "Thanks", "Description", "Making", "the", "render", "api", "consistent", "NUMBER", "Sync", "Render", "Rendering", "synchronously", "now", "returns", "a", "RenderResult", "js", "var", "result", "template", "NUMBER", "renderSync", "result", "NUMBER", "appendTo", "document", "NUMBER", "body", "result", "NUMBER", "getWidgets", "etc", "NUMBER", "Differences", "In", "v", "NUMBER", "we", "return", "a", "string", "NUMBER", "In", "order", "to", "make", "this", "a", "more", "painless", "switch", "I", "will", "introduce", "a", "renderToString", "method", "in", "v", "NUMBER", "and", "prompt", "users", "to", "switch", "to", "use", "that", "if", "they", "need", "that", "string", "output", "NUMBER", "Async", "Render", "Calling", "NUMBER", "render", "still", "returns", "an", "out", "js", "var", "out", "template", "NUMBER", "render", "out", "NUMBER", "on", "finished", "function", "out", "Differences", "In", "v", "NUMBER", "there", "be", "no", "value", "pass", "to", "the", "finished", "event", "NUMBER", "No", "breaking", "change", "here", "NUMBER", "Callback", "js", "template", "NUMBER", "render", "function", "err", "result", "out", "Differences", "In", "v", "NUMBER", "the", "callback", "be", "pass", "the", "html", "string", "instead", "of", "a", "RenderResult", "NUMBER", "The", "third", "parameter", "out", "be", "only", "pass", "for", "legacy", "reasons", "NUMBER", "You", "can", "also", "access", "it", "from", "result", "NUMBER", "out", "NUMBER", "Promise", "See", "also", "NUMBER", "NUMBER", "js", "template", "NUMBER", "render", "NUMBER", "en", "result", "result", "NUMBER", "appendTo", "document", "NUMBER", "body", "Differences", "In", "v", "NUMBER", "then", "was", "not", "available", "NUMBER", "No", "breaking", "change", "here", "NUMBER", "Widgets", "defineRenderer", "and", "makeRenderable", "renderable", "now", "include", "both", "render", "and", "renderSync", "that", "function", "similarly", "to", "above", "NUMBER", "I", "plan", "to", "add", "renderSync", "to", "marko", "widgets", "NUMBER", "and", "warn", "users", "that", "be", "use", "the", "api", "like", "js", "widget", "NUMBER", "render", "NUMBER", "appendTo", "document", "NUMBER", "body", "to", "switch", "to", "js", "widget", "NUMBER", "renderSync", "NUMBER", "appendTo", "document", "NUMBER", "body", "or", "js", "widget", "NUMBER", "render", "function", "err", "result", "result", "NUMBER", "appendTo", "document", "NUMBER", "body", "Checklist", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "patrick", "steele", "idem", "I", "d", "like", "some", "eyes", "on", "this", "and", "the", "plan", "describe", "above", "before", "merge", "NUMBER", "Hesulan", "How", "do", "the", "Promise", "implementation", "look", "Hmm", "NUMBER", "I", "see", "the", "issue", "NUMBER", "Unfortunately", "our", "goal", "with", "NUMBER", "was", "to", "pass", "the", "stream", "as", "the", "value", "so", "you", "could", "do", "something", "like", "js", "template", "NUMBER", "render", "NUMBER", "en", "out", "out", "NUMBER", "appendTo", "document", "NUMBER", "body", "patrick", "steele", "idem", "Maybe", "we", "need", "to", "consider", "having", "a", "RenderResult", "that", "be", "separate", "from", "the", "stream", "NUMBER", "js", "var", "result", "template", "NUMBER", "renderSync", "var", "out", "template", "NUMBER", "render", "out", "NUMBER", "on", "finish", "function", "result", "out", "NUMBER", "en", "function", "result", "template", "NUMBER", "render", "function", "err", "result", "Pretty", "much", "everything", "in", "the", "outMixins", "except", "then", "catch", "would", "be", "a", "method", "of", "the", "RenderResult", "NUMBER", "result", "NUMBER", "out", "could", "point", "to", "the", "original", "stream", "if", "necessary", "NUMBER", "Maybe", "we", "need", "to", "consider", "having", "a", "RenderResult", "that", "be", "separate", "from", "the", "stream", "NUMBER", "That", "s", "probably", "the", "right", "thing", "to", "do", "NUMBER", "What", "be", "your", "thoughts", "on", "add", "a", "try", "NUMBER", "catch", "to", "wrap", "the", "rendering", "of", "the", "template", "so", "that", "we", "can", "emit", "an", "error", "event", "in", "the", "catch", "clause", "We", "would", "only", "do", "this", "if", "an", "out", "be", "not", "provide", "to", "the", "template", "NUMBER", "render", "method", "NUMBER", "Add", "support", "for", "an", "extend", "property", "to", "marko", "NUMBER", "json", "js", "TAG", "transformer", "NUMBER", "foo", "NUMBER", "transformer", "NUMBER", "js", "extend", "bar", "extend", "a", "node_module", "gets", "marko", "NUMBER", "json", "from", "the", "root", "of", "the", "package", "NUMBER", "other", "marko", "NUMBER", "json", "extend", "another", "marko", "NUMBER", "json", "file", "This", "would", "allow", "a", "package", "to", "export", "tags", "from", "package", "it", "depends", "on", "NUMBER", "Open", "to", "other", "names", "include", "imports", "etc", "NUMBER", "The", "use", "case", "I", "m", "thinking", "of", "be", "allowing", "one", "package", "to", "make", "the", "tags", "of", "another", "package", "available", "without", "the", "main", "application", "needing", "to", "depend", "directly", "on", "both", "NUMBER", "As", "an", "example", "take", "your", "let", "and", "const", "package", "NUMBER", "Maybe", "I", "want", "to", "create", "an", "es", "NUMBER", "taglib", "package", "that", "would", "expose", "those", "tags", "as", "well", "as", "some", "others", "NUMBER", "In", "theory", "this", "sounds", "good", "but", "it", "becomes", "a", "problem", "if", "the", "other", "marko", "NUMBER", "json", "be", "extend", "belongs", "to", "a", "nested", "package", "dependency", "and", "not", "a", "peerDependency", "NUMBER", "Nested", "dependencies", "may", "get", "install", "into", "a", "node_modules", "directory", "of", "the", "package", "with", "the", "parent", "marko", "NUMBER", "json", "which", "can", "cause", "problem", "since", "the", "marko", "compiler", "needs", "to", "generate", "require", "calls", "to", "those", "nested", "dependencies", "NUMBER", "If", "a", "tag", "be", "purely", "a", "compile", "time", "tag", "then", "it", "be", "not", "an", "issue", "but", "it", "would", "be", "a", "problem", "for", "runtime", "custom", "tags", "that", "need", "to", "be", "imported", "into", "compiled", "template", "NUMBER", "I", "m", "not", "sure", "there", "be", "a", "strong", "enough", "need", "for", "this", "at", "the", "moment", "but", "we", "can", "discuss", "some", "more", "NUMBER", "Looks", "like", "taglibImports", "LINK", "js", "marko", "blob", "master", "compiler", "taglib", "loader", "loader", "taglib", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "with", "a", "small", "tweak", "will", "already", "do", "this", "NUMBER", "Here", "be", "some", "replies", "The", "promise", "resolution", "procedure", "must", "only", "access", "the", "NUMBER", "en", "property", "once", "NUMBER", "Why", "do", "you", "say", "that", "If", "attempting", "to", "retrieve", "the", "NUMBER", "en", "property", "throw", "an", "error", "then", "the", "error", "must", "be", "caught", "and", "the", "resulting", "promise", "must", "be", "rejected", "with", "the", "error", "as", "the", "reason", "NUMBER", "It", "currently", "isn", "t", "be", "caught", "NUMBER", "I", "don", "t", "see", "a", "need", "for", "this", "since", "accessing", "the", "NUMBER", "en", "property", "should", "throw", "an", "error", "if", "it", "be", "a", "Promise", "NUMBER", "The", "NUMBER", "catch", "onRejected", "method", "be", "neither", "defined", "nor", "required", "by", "the", "specification", "catch", "be", "part", "of", "the", "specification", "LINK", "international", "NUMBER", "org", "ecma", "NUMBER", "NUMBER", "sec", "promise", "NUMBER", "prototype", "NUMBER", "catch", "While", "we", "could", "fall", "back", "to", "NUMBER", "en", "null", "onRejected", "in", "the", "case", "of", "no", "NUMBER", "catch", "NUMBER", "fail", "method", "but", "I", "m", "not", "seeing", "a", "need", "for", "that", "NUMBER", "Should", "Marko", "actually", "be", "trying", "to", "handle", "Promise", "resolution", "directly", "or", "would", "it", "be", "better", "to", "rely", "on", "a", "native", "polyfilled", "Promise", "implementation", "Marko", "should", "rely", "exclusively", "on", "the", "native", "Promise", "implementation", "and", "that", "be", "what", "be", "happening", "now", "on", "master", "NUMBER", "The", "TAG", "tag", "however", "needs", "to", "be", "usable", "in", "pre", "ES", "NUMBER", "environments", "which", "leaves", "either", "a", "build", "in", "polyfill", "or", "just", "more", "compliant", "handle", "code", "as", "the", "only", "options", "NUMBER", "In", "the", "case", "of", "the", "TAG", "tag", "Marko", "be", "never", "actually", "creating", "a", "Promise", "it", "be", "just", "continuing", "the", "Promise", "chain", "of", "an", "exist", "Promise", "NUMBER", "In", "an", "ES", "NUMBER", "environment", "you", "would", "need", "to", "use", "a", "native", "Promise", "polyfill", "or", "use", "a", "third", "party", "library", "bluebird", "q", "etc", "NUMBER", "to", "create", "the", "Promise", "instance", "NUMBER", "However", "I", "ve", "also", "notice", "one", "other", "issue", "The", "TAG", "tag", "currently", "accepts", "either", "a", "value", "a", "Promise", "or", "a", "node", "style", "function", "last", "argument", "be", "an", "error", "first", "callback", "NUMBER", "The", "TAG", "tag", "accepts", "a", "Promise", "a", "Node", "NUMBER", "js", "style", "callback", "function", "or", "a", "resolve", "object", "NUMBER", "I", "m", "not", "seeing", "a", "problem", "with", "this", "approach", "NUMBER", "Marko", "has", "some", "logic", "to", "handle", "old", "style", "Promise", "objects", "but", "for", "the", "most", "part", "we", "be", "assuming", "that", "a", "ES", "NUMBER", "style", "Promise", "be", "be", "provide", "file", "Users", "psteeleidem", "Library", "Application", "NUMBER", "Support", "Dash", "DocSets", "JavaScript", "JavaScript", "NUMBER", "docset", "Contents", "Resources", "Documents", "developer", "NUMBER", "mozilla", "NUMBER", "org", "en", "US", "docs", "Web", "JavaScript", "Reference", "Global_objects", "Promise", "NUMBER", "html", "I", "m", "not", "seeing", "a", "need", "to", "change", "anything", "relate", "to", "the", "comments", "above", "NUMBER", "We", "still", "need", "to", "decide", "if", "we", "want", "to", "wrap", "the", "render", "data", "call", "with", "a", "try", "NUMBER", "catch", "to", "reject", "the", "promise", "NUMBER", "Currently", "we", "don", "t", "have", "a", "single", "try", "NUMBER", "catch", "block", "in", "marko", "for", "performance", "reasons", "function", "with", "try", "NUMBER", "catch", "be", "not", "optimized", "by", "V", "NUMBER", "Hesulan", "these", "be", "great", "points", "but", "I", "think", "we", "should", "focus", "on", "the", "Promise", "specification", "as", "defined", "as", "part", "of", "EcmaScript", "and", "implement", "by", "Node", "NUMBER", "js", "and", "browsers", "and", "polyfills", "NUMBER", "I", "would", "welcome", "as", "many", "test", "as", "possible", "to", "make", "sure", "the", "Marko", "implementation", "holds", "up", "to", "all", "edge", "cases", "for", "the", "native", "Promise", "implementation", "a", "popular", "Promise", "polyfill", "and", "maybe", "q", "and", "bluebird", "NUMBER", "For", "example", "we", "need", "to", "make", "sure", "we", "have", "a", "test", "case", "for", "a", "synchronous", "error", "when", "rendering", "a", "template", "and", "use", "NUMBER", "en", "NUMBER", "catch", "NUMBER", "Does", "that", "seem", "reasonable", "cheft", "Marko", "v", "NUMBER", "will", "be", "IE", "NUMBER", "so", "I", "would", "plan", "for", "that", "but", "I", "believe", "we", "re", "currently", "IE", "NUMBER", "on", "v", "NUMBER", "I", "m", "going", "to", "close", "this", "but", "feel", "free", "to", "ask", "if", "you", "have", "more", "question", "NUMBER", "When", "an", "error", "occur", "within", "an", "TAG", "tag", "the", "rest", "of", "the", "page", "continues", "rendering", "and", "we", "log", "a", "n", "error", "message", "to", "the", "console", "but", "there", "be", "no", "indication", "in", "the", "browser", "that", "an", "error", "occur", "NUMBER", "When", "use", "something", "like", "browser", "refresh", "developers", "aren", "t", "constantly", "having", "to", "look", "at", "the", "console", "so", "it", "might", "be", "nice", "to", "give", "a", "big", "red", "error", "indication", "in", "NODE_ENV", "development", "mode", "NUMBER", "I", "agree", "NUMBER", "The", "default", "implementation", "should", "show", "inline", "error", "message", "for", "TAG", "tags", "that", "fail", "in", "development", "NUMBER", "If", "the", "user", "provide", "an", "TAG", "then", "that", "should", "always", "be", "use", "NUMBER", "On", "a", "somewhat", "relate", "note", "we", "probably", "want", "to", "start", "make", "use", "of", "process", "NUMBER", "env", "NUMBER", "NODE_ENV", "to", "show", "more", "friendly", "error", "message", "in", "development", "mode", "without", "bloating", "runtime", "code", "for", "production", "NUMBER", "We", "should", "then", "update", "lasso", "to", "transform", "process", "NUMBER", "env", "NUMBER", "FOO", "references", "to", "include", "the", "actual", "value", "of", "the", "environment", "variable", "when", "doing", "a", "non", "development", "build", "NUMBER", "This", "would", "allow", "code", "to", "be", "minify", "out", "NUMBER", "While", "we", "could", "use", "envify", "LINK", "as", "a", "module", "transform", "we", "would", "also", "want", "to", "run", "that", "transform", "on", "non", "JavaScript", "modules", "i", "NUMBER", "e", "NUMBER", "vanilla", "JS", "as", "part", "of", "an", "output", "transform", "NUMBER", "The", "point", "of", "the", "layout", "taglib", "be", "to", "be", "able", "to", "include", "another", "template", "TAG", "and", "insert", "content", "TAG", "at", "various", "insertion", "points", "TAG", "NUMBER", "I", "d", "like", "to", "make", "this", "more", "generic", "and", "concise", "NUMBER", "patrick", "steele", "idem", "has", "already", "do", "work", "on", "make", "TAG", "work", "to", "replace", "w", "body", "NUMBER", "and", "I", "think", "we", "can", "take", "this", "one", "step", "further", "to", "replace", "the", "need", "for", "layout", "specific", "tags", "NUMBER", "Old", "NUMBER", "layouts", "main", "template", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "page", "NUMBER", "marko", "html", "TAG", "TAG", "Hello", "World", "TAG", "TAG", "New", "NUMBER", "layouts", "main", "template", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "page", "NUMBER", "marko", "html", "TAG", "TAG", "Hello", "World", "TAG", "TAG", "tags", "As", "seen", "above", "I", "m", "also", "proposing", "the", "ability", "to", "prefix", "a", "tag", "with", "the", "symbol", "to", "indicate", "that", "it", "should", "be", "pass", "as", "an", "attribute", "NUMBER", "I", "chose", "because", "we", "already", "use", "it", "to", "indicate", "attributes", "in", "marko", "NUMBER", "json", "and", "it", "looks", "nice", "NUMBER", "These", "be", "like", "nested", "tags", "LINK", "taglibs", "nested", "tags", "but", "more", "concise", "and", "don", "t", "require", "defining", "attributes", "in", "marko", "tag", "NUMBER", "json", "NUMBER", "Only", "putting", "the", "at", "the", "front", "will", "require", "a", "change", "to", "the", "parser", "to", "support", "but", "I", "think", "it", "would", "be", "worthwhile", "html", "TAG", "Hello", "World", "TAG", "vs", "html", "TAG", "Hello", "World", "TAG", "These", "tags", "would", "work", "for", "any", "tag", "so", "we", "could", "use", "layout", "concepts", "easily", "for", "custom", "tags", "as", "well", "New", "NUMBER", "components", "layout", "index", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "page", "NUMBER", "marko", "html", "TAG", "TAG", "Hello", "World", "TAG", "TAG", "Passing", "values", "to", "tags", "Perhaps", "we", "could", "also", "allow", "passing", "an", "argument", "to", "the", "tag", "indicating", "the", "name", "of", "a", "data", "variable", "html", "TAG", "TAG", "Hello", "foo", "TAG", "TAG", "would", "compile", "to", "my", "component", "body", "function", "foo", "out", "out", "NUMBER", "w", "Hello", "escapeXML", "foo", "and", "could", "be", "call", "within", "my", "component", "like", "this", "html", "TAG", "Thoughts", "cc", "philidem", "austinkelleher", "charlieduong", "NUMBER", "Hesulan", "The", "other", "question", "this", "raises", "be", "should", "we", "deprecate", "nested", "tags", "LINK", "taglibs", "nested", "tags", "in", "favor", "of", "tags", "Old", "html", "TAG", "TAG", "Something", "bad", "happened", "TAG", "foo", "TAG", "New", "html", "TAG", "TAG", "Something", "bad", "happened", "TAG", "foo", "TAG", "I", "just", "realized", "that", "TAG", "isn", "t", "a", "thing", "NUMBER", "It", "s", "TAG", "which", "gets", "transformed", "into", "an", "attribute", "at", "transform", "time", "NUMBER", "haha", "NUMBER", "But", "I", "m", "thinking", "we", "could", "still", "use", "TAG", "in", "this", "case", "NUMBER", "Hesulan", "My", "thinking", "on", "the", "TAG", "be", "that", "they", "would", "need", "to", "be", "the", "immediate", "children", "of", "the", "target", "parent", "so", "there", "wouldn", "t", "be", "any", "ambiguity", "NUMBER", "I", "suppose", "another", "question", "be", "how", "to", "handle", "multiple", "instances", "of", "a", "tag", "NUMBER", "Currently", "with", "nested", "tags", "you", "define", "in", "the", "marko", "tag", "NUMBER", "json", "whether", "a", "nested", "tag", "can", "have", "multiple", "instances", "NUMBER", "If", "it", "can", "it", "s", "always", "pass", "as", "an", "array", "NUMBER", "Without", "defining", "that", "upfront", "I", "think", "we", "re", "left", "with", "passing", "it", "as", "a", "single", "value", "if", "there", "s", "only", "one", "TAG", "and", "as", "an", "array", "if", "there", "be", "multiple", "NUMBER", "React", "do", "this", "with", "its", "children", "prop", "and", "I", "don", "t", "really", "like", "it", "NUMBER", "They", "ended", "up", "provide", "a", "collection", "of", "helpers", "LINK", "api", "NUMBER", "html", "react", "NUMBER", "children", "because", "it", "s", "hard", "to", "work", "with", "NUMBER", "You", "_could_", "do", "something", "like", "the", "following", "to", "ensure", "a", "value", "be", "an", "array", "before", "looping", "over", "it", "html", "TAG", "TAG", "TAG", "tab", "NUMBER", "name", "TAG", "TAG", "TAG", "TAG", "TAG", "Or", "maybe", "you", "have", "to", "define", "an", "entry", "for", "nested", "tags", "if", "you", "want", "multiple", "tabs", "TAG", "NUMBER", "Otherwise", "the", "compiler", "throw", "an", "error", "NUMBER", "I", "like", "this", "suggestion", "and", "here", "be", "some", "thoughts", "I", "think", "it", "should", "be", "TAG", "NUMBER", "TAG", "with", "the", "repeated", "in", "the", "ending", "tag", "Attributes", "should", "be", "allow", "on", "TAG", "tags", "xml", "TAG", "Loading", "NUMBER", "TAG", "TAG", "should", "be", "shorthand", "for", "TAG", "NUMBER", "The", "only", "challenge", "be", "that", "the", "TAG", "would", "just", "need", "to", "be", "matched", "with", "the", "first", "ancestor", "custom", "tag", "The", "following", "be", "equivalent", "__Old", "__", "xml", "TAG", "TAG", "Content", "for", "Home", "TAG", "TAG", "Content", "for", "Profile", "TAG", "TAG", "Content", "for", "Messages", "TAG", "TAG", "__New", "__", "xml", "TAG", "TAG", "Content", "for", "Home", "TAG", "TAG", "Content", "for", "Profile", "TAG", "TAG", "Content", "for", "Messages", "TAG", "TAG", "Nested", "tags", "currently", "compile", "down", "to", "an", "object", "with", "each", "attribute", "resulting", "in", "a", "property", "and", "a", "renderBody", "out", "function", "if", "the", "nested", "tag", "has", "body", "content", "NUMBER", "The", "nested", "tags", "get", "discover", "at", "render", "time", "by", "rendering", "the", "body", "and", "the", "nested", "tags", "register", "themselves", "with", "the", "parent", "tag", "when", "they", "get", "rendered", "but", "they", "otherwise", "produce", "no", "output", "at", "that", "time", "NUMBER", "This", "allows", "nested", "tags", "to", "be", "repeated", "have", "conditional", "logic", "etc", "NUMBER", "TAG", "TAG", "TAG", "Hello", "person", "NUMBER", "name", "You", "be", "person", "NUMBER", "age", "year", "s", "old", "NUMBER", "TAG", "TAG", "TAG", "However", "we", "can", "optimize", "this", "by", "handle", "nested", "tags", "that", "be", "direct", "children", "of", "a", "parent", "tag", "xml", "TAG", "TAG", "Have", "a", "good", "day", "TAG", "TAG", "__Old", "compiled", "output", "__", "javascript", "app_hello_tag", "name", "Frank", "out", "NUMBER", "function", "renderBody", "out", "app_hello_tag", "NUMBER", "app_hello_message_tag", "renderBody", "function", "renderBody", "out", "out", "NUMBER", "w", "Have", "a", "good", "day", "out", "app_hello_tag", "NUMBER", "__New", "compiled", "output", "__", "javascript", "app_hello_tag", "name", "Frank", "message", "renderBody", "function", "renderBody", "out", "out", "NUMBER", "w", "Have", "a", "good", "day", "out", "We", "could", "even", "optimize", "for", "a", "single", "if", "condition", "surrounding", "the", "nested", "tag", "xml", "TAG", "TAG", "Have", "a", "good", "day", "TAG", "TAG", "javascript", "app_hello_tag", "name", "Frank", "message", "someCondition", "renderBody", "function", "renderBody", "out", "out", "NUMBER", "w", "Have", "a", "good", "day", "out", "__tldr", "Introduce", "TAG", "as", "shorthand", "for", "TAG", "__", "I", "think", "a", "test", "for", "this", "should", "live", "in", "test", "autotests", "api", "NUMBER", "An", "example", "be", "test", "autotests", "api", "require", "render", "to", "stream", "NUMBER", "Also", "the", "API", "has", "change", "in", "v", "NUMBER", "and", "I", "don", "t", "think", "this", "be", "an", "issue", "anymore", "but", "I", "think", "this", "change", "should", "be", "back", "ported", "to", "v", "NUMBER", "I", "saw", "it", "s", "against", "the", "v", "NUMBER", "branch", "NUMBER", "Nice", "NUMBER", "LGTM", "cc", "mlrawlings", "Actually", "I", "have", "a", "small", "suggestion", "after", "reviewing", "the", "code", "in", "v", "NUMBER", "What", "do", "you", "think", "about", "change", "the", "implementation", "to", "be", "more", "uniform", "with", "the", "v", "NUMBER", "implementation", "LINK", "js", "marko", "blob", "master", "runtime", "stream", "NUMBER", "js", "L", "NUMBER", "I", "like", "it", "NUMBER", "Thanks", "jsumners", "and", "austinkelleher", "jsumners", "Just", "publish", "marko", "NUMBER", "Description", "Deprecate", "w", "on", "attributes", "for", "handle", "widget", "events", "NUMBER", "Added", "support", "for", "registering", "event", "handlers", "with", "on", "NUMBER", "Motivation", "and", "Context", "This", "be", "part", "of", "the", "Marko", "v", "NUMBER", "roadmap", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Thanks", "I", "m", "not", "sure", "what", "s", "up", "with", "Coveralls", "NUMBER", "It", "s", "run", "twice", "NUMBER", "Here", "be", "my", "thoughts", "Marko", "should", "not", "be", "in", "the", "business", "of", "transpiling", "JavaScript", "NUMBER", "If", "a", "developer", "wants", "to", "use", "ES", "NUMBER", "functionality", "then", "the", "code", "should", "pass", "through", "unmodified", "NUMBER", "On", "the", "server", "you", "wouldn", "t", "want", "to", "transpile", "the", "code", "since", "later", "version", "of", "Node", "NUMBER", "js", "have", "great", "ES", "NUMBER", "support", "NUMBER", "There", "be", "one", "exception", "and", "that", "be", "ES", "NUMBER", "style", "imports", "xml", "html", "syntax", "TAG", "concise", "syntax", "import", "foo", "from", "NUMBER", "foo", "ES", "NUMBER", "style", "imports", "be", "not", "currently", "enable", "by", "default", "in", "any", "browser", "and", "be", "not", "support", "in", "Node", "NUMBER", "js", "NUMBER", "However", "we", "like", "the", "syntax", "and", "semantics", "of", "ES", "NUMBER", "style", "imports", "so", "we", "want", "to", "support", "it", "NUMBER", "Specifically", "relate", "to", "the", "let", "and", "const", "tags", "I", "want", "those", "to", "pass", "through", "as", "be", "as", "there", "ES", "NUMBER", "keywords", "NUMBER", "No", "transpiling", "be", "required", "on", "the", "server", "and", "no", "transpiling", "be", "required", "for", "modern", "browsers", "NUMBER", "If", "the", "user", "wants", "to", "support", "older", "browsers", "then", "they", "would", "need", "to", "enable", "babel", "to", "run", "on", "NUMBER", "marko", "NUMBER", "js", "file", "to", "produce", "ES", "NUMBER", "compatible", "code", "NUMBER", "Could", "integrate", "babel", "Maybe", "but", "I", "don", "t", "think", "we", "should", "since", "the", "JS", "module", "bundler", "will", "typically", "be", "doing", "transpiling", "anyway", "NUMBER", "Thank", "you", "Hesulan", "For", "completeness", "I", "think", "it", "be", "great", "that", "you", "worked", "on", "this", "NUMBER", "The", "test", "be", "fail", "because", "we", "have", "some", "test", "for", "the", "taglib", "lookup", "that", "will", "fail", "if", "you", "add", "new", "core", "tags", "NUMBER", "You", "simply", "need", "to", "update", "the", "following", "two", "file", "to", "include", "your", "new", "core", "tags", "i", "NUMBER", "e", "NUMBER", "const", "and", "let", "LINK", "js", "marko", "blob", "master", "test", "autotests", "taglib", "lookup", "forEachTag", "expected", "NUMBER", "json", "LINK", "js", "marko", "blob", "master", "test", "autotests", "taglib", "lookup", "getTagsSorted", "expected", "NUMBER", "json", "you", "just", "need", "to", "copy", "the", "text", "from", "actual", "NUMBER", "json", "over", "to", "expected", "NUMBER", "json", "Please", "do", "add", "test", "when", "you", "get", "a", "chance", "NUMBER", "Copying", "and", "modifying", "the", "following", "test", "be", "sufficient", "for", "now", "LINK", "js", "marko", "tree", "master", "test", "autotests", "render", "var", "I", "don", "t", "really", "like", "the", "idea", "that", "var", "let", "and", "const", "be", "treated", "the", "same", "by", "the", "compiler", "NUMBER", "I", "think", "if", "we", "introduce", "these", "new", "tags", "they", "need", "to", "function", "differently", "NUMBER", "For", "example", "this", "be", "okay", "with", "var", "html", "TAG", "TAG", "Hello", "nameUpper", "Hello", "nameLower", "TAG", "Hello", "nameUpper", "Hello", "nameLower", "TAG", "TAG", "But", "it", "should", "throw", "a", "compile", "time", "error", "use", "let", "html", "TAG", "Hello", "nameUpper", "Hello", "nameLower", "TAG", "TAG", "Hello", "nameUpper", "Hello", "nameLower", "TAG", "TAG", "const", "should", "also", "be", "treated", "like", "like", "a", "const", "in", "JavaScript", "so", "if", "we", "declare", "TAG", "and", "try", "to", "use", "the", "TAG", "tag", "below", "it", "the", "compiler", "would", "throw", "an", "error", "html", "TAG", "Hello", "nameUpper", "Hello", "nameLower", "TAG", "TAG", "TAG", "What", "do", "you", "think", "patrick", "steele", "idem", "mlrawlings", "philidem", "austinkelleher", "let", "and", "const", "would", "compile", "to", "code", "that", "uses", "let", "and", "const", "NUMBER", "Also", "just", "wanted", "to", "point", "out", "that", "let", "be", "beneficial", "in", "the", "following", "contrived", "situation", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "foo", "TAG", "TAG", "Within", "the", "body", "of", "custom", "tags", "var", "happens", "to", "be", "scoped", "correctly", "since", "marko", "automatically", "wraps", "the", "body", "of", "custom", "tags", "in", "a", "renderBody", "out", "function", "NUMBER", "mlrawlings", "Can", "you", "please", "review", "this", "PR", "and", "decide", "on", "next", "steps", "Thanks", "NUMBER", "I", "m", "torn", "on", "what", "to", "do", "here", "NUMBER", "These", "be", "language", "level", "features", "so", "I", "don", "t", "think", "they", "belong", "in", "an", "external", "package", "NUMBER", "If", "we", "re", "going", "to", "support", "this", "I", "don", "t", "want", "to", "handle", "transpiling", "NUMBER", "I", "d", "either", "be", "in", "favor", "of", "letting", "it", "pass", "through", "unchanged", "node", "NUMBER", "or", "if", "we", "want", "to", "support", "NUMBER", "NUMBER", "prepend", "use", "strict", "to", "the", "template", "NUMBER", "On", "the", "other", "hand", "I", "m", "not", "sure", "we", "really", "need", "them", "NUMBER", "The", "only", "real", "benefits", "be", "they", "introduce", "a", "temporal", "dead", "zone", "and", "const", "can", "t", "be", "redefined", "NUMBER", "And", "taking", "Patricks", "example", "from", "above", "we", "already", "have", "a", "way", "to", "create", "a", "TDZ", "of", "sorts", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "data", "NUMBER", "foo", "TAG", "TAG", "The", "es", "NUMBER", "taglib", "taglib", "idea", "be", "interesting", "but", "I", "don", "t", "think", "it", "s", "necessary", "NUMBER", "We", "will", "always", "be", "able", "to", "write", "something", "that", "be", "es", "NUMBER", "compatible", "for", "core", "taglibs", "NUMBER", "It", "s", "only", "these", "places", "where", "we", "re", "trying", "to", "emulate", "the", "javascript", "language", "NUMBER", "Also", "userland", "tags", "might", "require", "es", "NUMBER", "and", "we", "don", "t", "have", "control", "over", "that", "but", "also", "I", "m", "not", "sure", "we", "want", "to", "introduce", "something", "at", "the", "core", "that", "when", "use", "in", "userland", "modules", "forces", "the", "application", "use", "them", "to", "transpile", "or", "drop", "support", "for", "older", "platforms", "NUMBER", "Hesulan", "I", "think", "that", "makes", "sense", "NUMBER", "marko", "layout", "and", "marko", "async", "start", "out", "as", "separate", "package", "that", "eventually", "were", "merge", "into", "core", "NUMBER", "The", "same", "could", "happen", "here", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "do", "publish", "that", "package", "so", "we", "can", "play", "with", "it", "NUMBER", "And", "maybe", "we", "can", "reopen", "this", "in", "the", "future", "NUMBER", "Description", "Added", "the", "ref", "and", "for", "ref", "attributes", "which", "replace", "the", "now", "deprecate", "w", "id", "and", "w", "for", "attributes", "NUMBER", "Added", "warnings", "to", "discourage", "the", "usage", "of", "w", "id", "and", "w", "for", "NUMBER", "Motivation", "and", "Context", "This", "change", "be", "for", "the", "upcoming", "marko", "v", "NUMBER", "release", "see", "ROADMAP", "NUMBER", "md", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Thanks", "for", "the", "PR", "charlieduong", "NUMBER", "Your", "change", "look", "great", "NUMBER", "I", "did", "make", "a", "small", "change", "to", "include", "the", "location", "information", "for", "a", "deprecation", "warning", "NUMBER", "For", "example", "The", "w", "id", "attribute", "be", "deprecate", "NUMBER", "Please", "use", "ref", "instead", "NUMBER", "test", "autotests", "widgets", "browser", "deprecate", "widget", "render", "to", "iframe", "components", "app", "iframe", "content", "template", "NUMBER", "marko", "NUMBER", "NUMBER", "If", "you", "be", "interested", "in", "any", "other", "issue", "please", "let", "us", "know", "NUMBER", "Thanks", "again", "Currently", "htmljs", "parser", "switches", "into", "HTML", "parsing", "mode", "when", "the", "first", "character", "of", "a", "concise", "line", "be", "NUMBER", "This", "was", "a", "deliberate", "decision", "at", "the", "time", "but", "it", "results", "in", "unwanted", "differences", "between", "the", "HTML", "and", "concise", "syntax", "NUMBER", "Currently", "in", "order", "to", "have", "a", "dynamic", "tag", "name", "the", "HTML", "syntax", "must", "be", "use", "NUMBER", "We", "want", "to", "fix", "that", "NUMBER", "Given", "the", "following", "template", "isInline", "span", "div", "Hello", "World", "Given", "a", "value", "of", "true", "for", "isInline", "NUMBER", "Old", "output", "html", "span", "Hello", "World", "Expected", "new", "output", "html", "TAG", "Hello", "World", "TAG", "TODO", "Output", "warning", "in", "old", "parser", "use", "by", "Marko", "v", "NUMBER", "Something", "similar", "to", "WARNING", "The", "behavior", "of", "at", "the", "start", "of", "a", "line", "in", "concise", "parsing", "mode", "will", "be", "change", "in", "Marko", "v", "NUMBER", "To", "avoid", "problem", "in", "the", "future", "you", "should", "make", "the", "following", "change", "right", "away", "OLD", "foo", "NEW", "foo", "See", "LINK", "js", "marko", "issue", "NUMBER", "This", "change", "allows", "whitespace", "in", "complex", "expressions", "such", "as", "the", "following", "xml", "TAG", "See", "relate", "PR", "for", "htmljs", "parser", "htmljs", "parser", "PR", "NUMBER", "LINK", "parser", "pull", "NUMBER", "Only", "handle", "this", "for", "the", "var", "and", "assign", "tag", "be", "a", "reasonable", "suggestion", "NUMBER", "I", "think", "I", "might", "be", "okay", "with", "that", "NUMBER", "What", "do", "you", "think", "mlrawlings", "The", "parser", "do", "support", "entering", "into", "new", "parsing", "modes", "based", "on", "the", "tag", "name", "so", "that", "be", "certainly", "an", "option", "NUMBER", "It", "s", "also", "possible", "that", "the", "var", "could", "handle", "make", "sense", "of", "the", "separate", "attributes", "divided", "by", "spaces", "and", "group", "things", "back", "together", "but", "that", "might", "get", "messy", "NUMBER", "Hesulan", "It", "s", "certainly", "safer", "to", "make", "this", "apply", "to", "only", "var", "assign", "because", "there", "be", "no", "possibility", "that", "an", "operator", "in", "a", "variable", "name", "be", "valid", "NUMBER", "However", "I", "m", "concerned", "that", "there", "may", "be", "confusion", "if", "I", "can", "do", "TAG", "but", "not", "TAG", "NUMBER", "philidem", "also", "suggested", "that", "if", "we", "were", "to", "do", "this", "it", "should", "be", "across", "the", "board", "at", "the", "parser", "level", "NUMBER", "Reasoning", "I", "certainly", "understand", "that", "this", "can", "impact", "readability", "html", "TAG", "vs", "NUMBER", "html", "TAG", "However", "I", "see", "the", "main", "reason", "for", "this", "be", "to", "be", "able", "to", "write", "code", "in", "NUMBER", "marko", "that", "looks", "like", "js", "js", "import", "calc", "from", "NUMBER", "helpers", "var", "sum", "data", "NUMBER", "value", "NUMBER", "var", "calculated", "calc", "data", "NUMBER", "value", "NUMBER", "TAG", "calculated", "TAG", "Another", "possibility", "I", "don", "t", "know", "if", "this", "be", "a", "good", "idea", "but", "I", "ll", "throw", "it", "out", "there", "What", "if", "we", "required", "comma", "separation", "when", "use", "whitespace", "around", "html", "TAG", "Which", "actually", "lines", "up", "with", "JS", "pretty", "well", "js", "var", "count", "NUMBER", "NUMBER", "NUMBER", "x", "foo", "patrick", "steele", "idem", "and", "I", "had", "also", "talked", "about", "allowing", "a", "semicolon", "at", "the", "end", "of", "a", "concise", "tag", "js", "var", "count", "NUMBER", "NUMBER", "NUMBER", "x", "foo", "Using", "comma", "separation", "be", "an", "interesting", "idea", "I", "do", "like", "the", "fact", "that", "it", "aligns", "with", "JS", "NUMBER", "The", "down", "side", "be", "that", "it", "may", "cause", "confusion", "if", "it", "s", "only", "required", "when", "use", "whitespace", "NUMBER", "Good", "discussion", "NUMBER", "After", "giving", "it", "some", "thought", "I", "think", "the", "comma", "solution", "be", "the", "best", "option", "and", "it", "should", "be", "allow", "for", "all", "tags", "not", "just", "var", "assign", "NUMBER", "The", "parser", "should", "be", "update", "such", "that", "when", "encountering", "a", "comma", "would", "combine", "everything", "after", "an", "attribute", "and", "before", "the", "together", "to", "allow", "the", "following", "to", "work", "as", "expected", "xml", "TAG", "I", "think", "that", "provides", "a", "good", "balance", "to", "be", "like", "HTML", "space", "separated", "attributes", "while", "also", "be", "like", "JavaScript", "NUMBER", "Are", "we", "okay", "with", "the", "comma", "be", "use", "sometimes", "but", "not", "all", "times", "for", "the", "same", "tag", "xml", "TAG", "TAG", "The", "only", "possible", "edge", "case", "be", "that", "the", "comma", "was", "supposed", "to", "be", "part", "of", "the", "expression", "but", "I", "can", "t", "think", "of", "any", "reason", "that", "would", "ever", "be", "the", "case", "NUMBER", "Similarly", "I", "be", "still", "in", "favor", "of", "allowing", "a", "semicolon", "to", "end", "a", "tag", "such", "that", "the", "following", "would", "be", "allow", "xml", "TAG", "var", "baz", "NUMBER", "Thoughts", "As", "a", "side", "note", "a", "comma", "would", "allow", "the", "following", "in", "concise", "mode", "var", "foo", "NUMBER", "bar", "NUMBER", "The", "comma", "at", "the", "end", "of", "the", "line", "would", "make", "it", "clear", "that", "additional", "attributes", "be", "expected", "and", "the", "parser", "would", "say", "in", "the", "tag", "parsing", "mode", "even", "if", "the", "EOL", "be", "reached", "NUMBER", "patrick", "steele", "idem", "What", "about", "if", "the", "last", "or", "only", "attribute", "has", "spaces", "xml", "TAG", "In", "concise", "mode", "if", "we", "allow", "a", "semicolon", "as", "an", "indicator", "that", "this", "be", "the", "last", "space", "separated", "value", "that", "could", "work", "js", "var", "foo", "count", "NUMBER", "NUMBER", "NUMBER", "What", "if", "the", "comma", "semicolon", "syntax", "was", "specific", "to", "concise", "mode", "We", "re", "trying", "to", "make", "things", "look", "more", "like", "JS", "but", "there", "s", "nothing", "wrong", "with", "wrapping", "the", "value", "in", "parenthesis", "xml", "TAG", "Patrick", "and", "I", "were", "just", "discussing", "this", "and", "realized", "that", "there", "could", "be", "some", "other", "issue", "Text", "content", "on", "same", "line", "Content", "on", "the", "same", "line", "would", "be", "an", "issue", "js", "tag", "baz", "NUMBER", "Hello", "World", "_Is", "that", "TAG", "Hello", "World", "TAG", "or", "TAG", "_", "Multi", "line", "values", "Attribute", "value", "split", "across", "multiple", "lines", "js", "var", "foo", "doSomething", "NUMBER", "chain", "NUMBER", "NUMBER", "chain", "NUMBER", "_Are", "NUMBER", "chain", "NUMBER", "and", "NUMBER", "chain", "NUMBER", "property", "accessors", "or", "shorthand", "divs", "with", "classes", "_", "I", "suppose", "in", "this", "case", "it", "would", "be", "easy", "enough", "to", "say", "that", "multiline", "values", "_must", "_", "be", "wrapped", "in", "parenthesis", "NUMBER", "Here", "s", "my", "proposal", "When", "parsing", "_attribute", "value_", "encountering", "whitespace", "followed", "by", "a", "character", "that", "be", "not", "a", "binary", "operator", "character", "except", "for", "in", "concise", "mode", "and", "in", "HTML", "mode", "will", "keep", "the", "parser", "in", "the", "_attribute", "value_", "mode", "NUMBER", "When", "parsing", "_attribute", "value_", "in", "_concise", "mode_", "encountering", "will", "switch", "to", "single", "line", "HTML", "mode", "this", "be", "the", "current", "behavior", "When", "parsing", "_attribute", "value_", "in", "_HTML", "mode_", "encountering", "will", "end", "the", "current", "tag", "this", "be", "the", "current", "behavior", "When", "parsing", "_attribute", "name_", "or", "_attribute", "value_", "encountering", "a", "comma", "will", "be", "treated", "as", "an", "attribute", "delimiter", "NUMBER", "All", "whitespace", "including", "newline", "character", "will", "be", "ignored", "after", "the", "comma", "be", "encountered", "until", "the", "next", "non", "whitespace", "character", "be", "encountered", "NUMBER", "A", "mix", "of", "commas", "and", "whitespace", "can", "be", "use", "as", "delimiters", "within", "the", "same", "tag", "NUMBER", "When", "parsing", "_attribute", "name_", "or", "_attribute", "value_", "A", "semicolon", "will", "always", "be", "treated", "as", "an", "attribute", "delimiter", "and", "will", "not", "be", "part", "of", "the", "attribute", "name", "or", "value", "NUMBER", "Unlike", "the", "comma", "a", "semicolon", "cannot", "be", "use", "to", "wrap", "attributes", "across", "multiple", "lines", "NUMBER", "I", "think", "we", "still", "need", "to", "discuss", "this", "more", "I", "just", "made", "a", "PR", "implement", "this", "and", "some", "relate", "parser", "update", "NUMBER", "I", "d", "love", "some", "feedback", "from", "everyone", "that", "has", "contributed", "to", "this", "discussion", "NUMBER", "LINK", "parser", "pull", "NUMBER", "Fixed", "with", "upgrade", "to", "htmljs", "parser", "NUMBER", "If", "out", "NUMBER", "error", "be", "call", "the", "finish", "event", "be", "still", "emitted", "NUMBER", "That", "would", "result", "in", "both", "reject", "and", "resolve", "be", "call", "NUMBER", "I", "m", "not", "sure", "what", "the", "Promise", "spec", "says", "should", "happen", "when", "that", "occur", "but", "we", "should", "probably", "add", "code", "to", "make", "sure", "that", "resolve", "be", "not", "call", "when", "reject", "be", "call", "NUMBER", "Do", "you", "mind", "investigating", "that", "w", "bind", "widget", "or", "component", "See", "also", "NUMBER", "NUMBER", "NUMBER", "__Update", "__", "we", "decided", "to", "remove", "w", "bind", "and", "alternatives", "completely", "NUMBER", "If", "you", "want", "to", "bind", "a", "widget", "to", "the", "DOM", "nodes", "you", "need", "to", "name", "the", "file", "widget", "NUMBER", "js", "component", "NUMBER", "js", "or", "embed", "an", "inline", "TAG", "tag", "in", "the", "template", "with", "a", "module", "NUMBER", "export", "export", "default", "NUMBER", "Hesulan", "We", "decided", "to", "not", "allow", "that", "anymore", "Hesulan", "The", "problem", "with", "TAG", "was", "that", "all", "possible", "widgets", "ended", "up", "be", "bundled", "up", "by", "the", "JavaScript", "module", "bundler", "NUMBER", "The", "better", "alternative", "be", "to", "have", "a", "single", "widget", "that", "can", "delegate", "out", "to", "a", "particular", "widget", "implementation", "or", "to", "conditionally", "remap", "the", "JavaScript", "widget", "module", "to", "the", "correct", "module", "at", "bundling", "time", "NUMBER", "Lasso", "support", "conditional", "remaps", "see", "requireRemap", "in", "LINK", "js", "lasso", "nodejs", "style", "module", "support", "NUMBER", "There", "be", "better", "workarounds", "and", "deprecating", "w", "bind", "TAG", "simplifies", "Marko", "and", "simplifies", "documentation", "NUMBER", "I", "hope", "that", "clarifies", "NUMBER", "Thanks", "for", "open", "the", "issue", "cdhowie", "NUMBER", "You", "be", "right", "that", "it", "be", "miss", "from", "the", "language", "guide", "NUMBER", "We", "did", "document", "this", "feature", "in", "the", "What", "s", "New", "in", "Marko", "v", "NUMBER", "but", "we", "did", "not", "move", "over", "those", "docs", "into", "the", "language", "guide", "LINK", "be", "new", "marko", "v", "NUMBER", "tag", "body", "content", "parsing", "On", "a", "relate", "note", "marko", "uses", "htmljs", "parser", "LINK", "parser", "and", "that", "parser", "automatically", "switches", "into", "parsed", "text", "mode", "when", "parsing", "both", "TAG", "and", "TAG", "tags", "see", "philidem", "htmljs", "parser", "Parser", "NUMBER", "js", "LINK", "parser", "blob", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "NUMBER", "bc", "NUMBER", "f", "NUMBER", "e", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ea", "NUMBER", "cf", "NUMBER", "dfc", "NUMBER", "ff", "Parser", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "NUMBER", "This", "means", "that", "the", "parser", "won", "t", "recognize", "HTML", "tags", "inside", "TAG", "and", "TAG", "tags", "since", "those", "tags", "do", "not", "contain", "HTML", "NUMBER", "Therefore", "you", "should", "very", "rarely", "need", "to", "know", "about", "the", "marko", "body", "attribute", "NUMBER", "You", "should", "only", "need", "to", "know", "about", "marko", "body", "text", "if", "maybe", "you", "be", "creating", "a", "custom", "tag", "that", "allows", "non", "HTML", "content", "to", "be", "nested", "NUMBER", "When", "creating", "a", "custom", "tag", "you", "can", "specify", "the", "body", "parse", "mode", "as", "shown", "below", "_src", "components", "my", "script", "wrapper", "marko", "tag", "NUMBER", "json", "_", "json", "body", "static", "text", "preserve", "whitespace", "true", "Hope", "that", "helps", "I", "m", "keep", "the", "issue", "open", "so", "that", "we", "update", "the", "docs", "NUMBER", "We", "be", "currently", "extremely", "busy", "with", "all", "the", "work", "associated", "with", "the", "upcoming", "Marko", "v", "NUMBER", "LINK", "js", "marko", "milestone", "NUMBER", "release", "so", "if", "you", "would", "be", "interested", "in", "fix", "the", "docs", "please", "feel", "free", "to", "submit", "a", "PR", "to", "the", "following", "docs", "file", "LINK", "js", "marko", "blob", "master", "docs", "language", "guide", "NUMBER", "md", "To", "be", "honest", "I", "could", "probably", "be", "swayed", "towards", "make", "the", "default", "static", "text", "instead", "of", "parsed", "text", "for", "TAG", "and", "TAG", "tags", "in", "Marko", "v", "NUMBER", "Allowing", "expressions", "in", "TAG", "blocks", "was", "keep", "around", "because", "a", "lot", "of", "earlier", "developer", "were", "doing", "something", "similar", "to", "the", "following", "html", "TAG", "window", "NUMBER", "foo", "JSON", "NUMBER", "ringify", "bar", "TAG", "On", "a", "relate", "note", "marko", "has", "special", "escaping", "rules", "for", "expressions", "inside", "the", "TAG", "tag", "to", "make", "sure", "TAG", "do", "not", "get", "rendered", "inside", "a", "string", "NUMBER", "Marko", "v", "NUMBER", "will", "integrate", "Marko", "Widgets", "LINK", "js", "marko", "blob", "master", "ROADMAP", "NUMBER", "md", "and", "make", "it", "much", "easier", "to", "serialize", "extra", "data", "state", "down", "to", "the", "browser", "that", "then", "gets", "pass", "to", "the", "widget", "constructor", "NUMBER", "Anyway", "documenting", "marko", "body", "would", "ve", "at", "least", "made", "it", "easier", "to", "correct", "the", "problem", "when", "we", "figured", "out", "what", "it", "was", "NUMBER", "Agreed", "NUMBER", "Keeping", "this", "issue", "open", "so", "that", "we", "at", "least", "fix", "the", "docs", "with", "Marko", "v", "NUMBER", "cc", "mlrawlings", "philidem", "Thoughts", "extension", "and", "extensions", "properties", "be", "both", "now", "support", "and", "consolidated", "NUMBER", "A", "few", "things", "to", "discuss", "The", "consolidation", "function", "takes", "a", "requireObj", "which", "be", "the", "Node", "NUMBER", "js", "require", "in", "node", "require", "NUMBER", "js", "NUMBER", "I", "did", "this", "so", "it", "was", "easy", "to", "mock", "in", "a", "unit", "test", "without", "having", "to", "pollute", "the", "actual", "require", "object", "NUMBER", "I", "put", "consolidateExtensions", "NUMBER", "js", "in", "a", "new", "folder", "util", "NUMBER", "I", "be", "open", "to", "other", "suggestions", "as", "to", "where", "to", "put", "this", "module", "NUMBER", "I", "do", "like", "the", "idea", "of", "having", "a", "util", "folder", "at", "the", "top", "level", "though", "NUMBER", "Changes", "already", "manually", "merge", "NUMBER", "Closing", "PR", "NUMBER", "Thanks", "for", "work", "on", "this", "Bug", "on", "jQuery", "Proxy", "when", "w", "id", "contains", "dash", "hyphen", "see", "issue", "NUMBER", "Description", "Bug", "on", "jQuery", "Proxy", "when", "w", "id", "contains", "dash", "hyphen", "e", "NUMBER", "g", "w", "id", "submit", "button", "Motivation", "and", "Context", "This", "PR", "contains", "fix", "for", "issue", "NUMBER", "Screenshots", "if", "appropriate", "None", "Checklist", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "comment", "not", "relevant", "to", "this", "issue", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Thanks", "for", "the", "fix", "I", "will", "back", "port", "your", "fix", "to", "Marko", "Widgets", "v", "NUMBER", "and", "update", "here", "when", "publish", "NUMBER", "New", "version", "of", "marko", "widgets", "publish", "with", "your", "fix", "marko", "widgets", "NUMBER", "Thanks", "again", "Background", "why", "TAG", "exists", "For", "the", "most", "part", "all", "of", "your", "template", "ends", "up", "in", "a", "render", "function", "A", "template", "like", "this", "xml", "TAG", "TAG", "Hello", "name", "TAG", "compiles", "to", "something", "like", "the", "following", "oversimplified", "output", "js", "js", "function", "render", "data", "out", "var", "name", "World", "out", "NUMBER", "w", "TAG", "Hello", "name", "TAG", "module", "NUMBER", "export", "new", "Template", "render", "But", "there", "be", "times", "when", "you", "might", "want", "to", "add", "initialization", "code", "outside", "the", "render", "function", "so", "that", "it", "doesn", "t", "run", "everytime", "the", "template", "renders", "only", "when", "the", "template", "be", "first", "required", "NUMBER", "So", "TAG", "has", "fulfilled", "this", "need", "NUMBER", "Why", "we", "want", "to", "change", "A", "template", "like", "this", "html", "TAG", "var", "format", "require", "format", "TAG", "TAG", "TAG", "Hello", "format", "name", "TAG", "compiles", "to", "something", "like", "the", "following", "oversimplified", "output", "js", "js", "var", "format", "require", "format", "function", "render", "data", "out", "var", "name", "World", "out", "NUMBER", "w", "TAG", "Hello", "format", "name", "TAG", "module", "NUMBER", "export", "new", "Template", "render", "A", "TAG", "tag", "usually", "puts", "code", "into", "the", "output", "html", "but", "in", "this", "case", "we", "re", "highjacking", "it", "because", "of", "the", "marko", "init", "attribute", "and", "use", "the", "code", "as", "part", "of", "the", "render", "logic", "NUMBER", "We", "actually", "already", "have", "a", "construct", "that", "be", "meant", "to", "add", "arbitrary", "javascript", "in", "template", "render", "logic", "scriptlets", "LINK", "js", "marko", "blob", "NUMBER", "a", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ca", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "docs", "what", "be", "new", "marko", "v", "NUMBER", "md", "scriptlets", "NUMBER", "But", "scriptlets", "like", "most", "other", "things", "run", "within", "the", "context", "of", "the", "render", "method", "NUMBER", "The", "proposal", "By", "default", "scriptlets", "TAG", "TAG", "etc", "NUMBER", "would", "continue", "to", "run", "within", "the", "context", "of", "the", "render", "method", "but", "we", "will", "introduce", "a", "new", "tag", "TAG", "NUMBER", "A", "template", "like", "this", "html", "TAG", "TAG", "TAG", "TAG", "Hello", "format", "name", "TAG", "TAG", "compiles", "to", "something", "like", "the", "following", "oversimplified", "output", "js", "js", "var", "format", "require", "format", "function", "render", "data", "out", "var", "name", "World", "out", "NUMBER", "w", "TAG", "Hello", "format", "name", "TAG", "module", "NUMBER", "export", "new", "Template", "render", "Now", "the", "structure", "of", "the", "template", "matches", "up", "fairly", "well", "with", "the", "structure", "of", "the", "output", "js", "NUMBER", "NUMBER", "Obviously", "anything", "outside", "of", "TAG", "would", "not", "be", "allow", "to", "write", "to", "out", "as", "out", "wouldn", "t", "be", "in", "scope", "NUMBER", "We", "should", "detect", "this", "and", "throw", "an", "error", "at", "compile", "time", "NUMBER", "I", "definitely", "have", "some", "concern", "around", "having", "to", "wrap", "all", "the", "template", "code", "just", "to", "introduce", "some", "JavaScript", "initialization", "code", "NUMBER", "With", "that", "said", "it", "doesn", "t", "look", "as", "bad", "with", "the", "concise", "syntax", "html", "var", "format", "require", "format", "render", "var", "name", "World", "TAG", "Hello", "format", "name", "TAG", "You", "could", "even", "make", "it", "look", "like", "a", "method", "by", "add", "parens", "and", "possibly", "a", "data", "param", "xml", "var", "format", "require", "format", "render", "data", "var", "name", "World", "TAG", "Hello", "format", "data", "NUMBER", "name", "TAG", "And", "finally", "that", "could", "allow", "for", "ES", "NUMBER", "argument", "destructuring", "xml", "var", "format", "require", "format", "render", "name", "TAG", "Hello", "format", "name", "TAG", "I", "agree", "with", "wrapping", "everything", "in", "a", "TAG", "not", "be", "so", "great", "NUMBER", "Would", "that", "be", "required", "or", "optional", "only", "if", "you", "need", "code", "generate", "out", "of", "the", "context", "of", "the", "render", "function", "If", "the", "goal", "be", "to", "deprecate", "TAG", "with", "the", "already", "established", "expectation", "of", "a", "TAG", "tag", "why", "not", "add", "a", "new", "tag", "call", "TAG", "or", "something", "else", "html", "TAG", "var", "format", "require", "format", "TAG", "TAG", "TAG", "Hello", "format", "name", "TAG", "or", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "format", "name", "TAG", "Hesulan", "The", "TAG", "tag", "do", "hoist", "outside", "the", "render", "function", "see", "the", "import", "tag", "test", "LINK", "js", "marko", "tree", "master", "test", "autotests", "compiler", "import", "tag", "and", "its", "expected", "output", "LINK", "js", "marko", "blob", "master", "test", "autotests", "compiler", "import", "tag", "expected", "NUMBER", "js", "NUMBER", "Importing", "modules", "be", "a", "big", "reason", "TAG", "was", "needed", "just", "look", "at", "every", "example", "in", "this", "thread", "but", "you", "might", "need", "to", "do", "something", "like", "this", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "format", "name", "TAG", "TAG", "js", "import", "createFormatter", "from", "NUMBER", "format", "var", "format", "createFormatter", "lang", "en", "render", "data", "var", "name", "World", "TAG", "Hello", "format", "name", "TAG", "I", "think", "the", "actual", "implementation", "of", "TAG", "would", "internally", "rely", "on", "the", "equivalent", "of", "the", "suggested", "TAG", "tag", "NUMBER", "You", "d", "loop", "over", "each", "top", "level", "element", "and", "if", "you", "find", "a", "TAG", "tag", "you", "d", "move", "all", "the", "other", "top", "level", "elements", "into", "an", "TAG", "tag", "NUMBER", "The", "TAG", "tag", "would", "then", "generate", "the", "code", "for", "its", "children", "and", "instead", "of", "putting", "that", "code", "in", "the", "render", "method", "it", "would", "place", "it", "towards", "the", "top", "of", "the", "file", "NUMBER", "The", "question", "be", "should", "this", "TAG", "tag", "be", "an", "internal", "thing", "or", "should", "it", "be", "expose", "as", "an", "alternative", "patrick", "steele", "idem", "You", "ve", "talked", "about", "requiring", "the", "parens", "on", "TAG", "and", "maybe", "that", "makes", "sense", "NUMBER", "But", "we", "should", "also", "require", "an", "actual", "argument", "there", "the", "name", "of", "the", "data", "variable", "NUMBER", "Wrapping", "the", "whole", "template", "in", "TAG", "would", "leave", "things", "as", "they", "be", "now", "NUMBER", "TAG", "would", "be", "invalid", "NUMBER", "As", "for", "the", "TAG", "name", "would", "TAG", "make", "more", "sense", "If", "you", "re", "not", "use", "the", "require", "hook", "you", "would", "call", "marko", "NUMBER", "load", "NUMBER", "template", "NUMBER", "marko", "and", "that", "s", "the", "point", "at", "which", "this", "init", "load", "code", "be", "run", "NUMBER", "_Almost_", "makes", "me", "want", "to", "do", "something", "like", "TAG", "and", "TAG", "but", "let", "s", "not", "NUMBER", "Closed", "via", "LINK", "js", "marko", "commit", "NUMBER", "f", "NUMBER", "c", "NUMBER", "ec", "NUMBER", "a", "NUMBER", "ea", "NUMBER", "d", "NUMBER", "a", "NUMBER", "c", "NUMBER", "ab", "NUMBER", "b", "I", "think", "that", "s", "a", "good", "suggestion", "although", "I", "would", "probably", "use", "WARNING", "instead", "of", "ERROR", "NUMBER", "Would", "you", "be", "interested", "in", "submit", "a", "PR", "to", "improve", "marko", "Thanks", "for", "open", "the", "issue", "NUMBER", "NOTE", "Marko", "v", "NUMBER", "development", "be", "on", "master", "and", "Marko", "v", "NUMBER", "be", "on", "the", "v", "NUMBER", "branch", "LINK", "js", "marko", "tree", "v", "NUMBER", "Thanks", "for", "open", "the", "issue", "tinovyatkin", "but", "that", "be", "the", "expected", "behavior", "since", "Marko", "be", "use", "the", "JavaScript", "rules", "for", "parsing", "a", "String", "attribute", "value", "NUMBER", "This", "means", "that", "JavaScript", "escape", "sequences", "starting", "with", "the", "character", "must", "be", "valid", "JavaScript", "escape", "sequences", "NUMBER", "In", "your", "case", "you", "need", "to", "escape", "the", "backslash", "character", "so", "that", "the", "JavaScript", "parser", "doesn", "t", "treat", "it", "as", "a", "JavaScript", "String", "escape", "sequence", "html", "TAG", "While", "this", "be", "not", "a", "bug", "in", "Marko", "I", "admit", "that", "the", "escaping", "of", "those", "characters", "be", "less", "than", "ideal", "NUMBER", "What", "be", "your", "thoughts", "on", "enhancing", "Marko", "to", "allow", "a", "JavaScript", "regular", "expression", "for", "the", "attribute", "value", "html", "TAG", "we", "could", "update", "the", "compiler", "so", "that", "the", "output", "would", "be", "as", "expected", "We", "should", "do", "this", "NUMBER", "It", "s", "come", "up", "before", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "NUMBER", "It", "should", "be", "as", "simple", "as", "add", "the", "following", "to", "the", "escapeXmlAttr", "function", "js", "if", "attr", "instanceof", "RegExp", "let", "str", "attr", "NUMBER", "toString", "return", "str", "NUMBER", "slice", "NUMBER", "str", "NUMBER", "lastIndexOf", "The", "only", "thing", "be", "that", "html", "style", "regex", "don", "t", "support", "flags", "so", "I", "m", "thinking", "we", "just", "drop", "them", "It", "be", "not", "safe", "to", "remove", "whitespace", "inside", "a", "TAG", "because", "the", "code", "inside", "a", "TAG", "tag", "be", "not", "HTML", "rules", "so", "we", "cannot", "use", "the", "HTML", "whitespace", "removal", "rules", "NUMBER", "If", "marko", "were", "to", "remove", "whitespace", "inside", "TAG", "tags", "then", "there", "be", "a", "good", "chance", "that", "it", "would", "break", "the", "code", "NUMBER", "If", "you", "want", "to", "safely", "remove", "whitespace", "inside", "a", "TAG", "tag", "then", "you", "would", "need", "to", "use", "a", "JavaScript", "minifier", "the", "performance", "would", "be", "really", "slow", "so", "you", "would", "not", "want", "to", "run", "the", "minifier", "for", "every", "request", "NUMBER", "If", "you", "want", "go", "advance", "you", "can", "create", "your", "own", "compile", "time", "transform", "that", "remove", "whitespace", "that", "be", "appropriate", "for", "your", "use", "case", "NUMBER", "Hopefully", "that", "answers", "your", "question", "but", "please", "feel", "free", "to", "add", "more", "comments", "here", "if", "not", "NUMBER", "Hey", "basickarl", "at", "first", "glance", "your", "setup", "looks", "correct", "NUMBER", "Are", "you", "seeing", "any", "error", "Do", "you", "see", "the", "TAG", "tag", "in", "the", "final", "HTML", "output", "you", "shouldn", "t", "but", "that", "might", "be", "a", "clue", "No", "longer", "an", "issue", "NUMBER", "Closing", "NUMBER", "Hey", "sriver", "NUMBER", "we", "ll", "need", "more", "details", "to", "help", "you", "out", "NUMBER", "Have", "you", "tried", "use", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "to", "enable", "hot", "reloading", "of", "template", "Here", "s", "a", "sample", "app", "that", "demonstrates", "hot", "reloading", "that", "I", "recommend", "checking", "out", "LINK", "js", "samples", "marko", "hot", "reload", "sriver", "NUMBER", "would", "it", "be", "possible", "to", "share", "a", "minimal", "project", "to", "reproduce", "the", "problem", "I", "m", "not", "able", "to", "reproduce", "but", "it", "be", "possible", "that", "a", "Windows", "specific", "issue", "has", "creeped", "in", "NUMBER", "FYI", "hot", "reloading", "works", "in", "the", "following", "way", "When", "hot", "reloading", "be", "enable", "the", "Template", "class", "be", "monkey", "patched", "to", "proxy", "all", "of", "the", "rendering", "methods", "in", "order", "to", "check", "if", "the", "template", "needs", "to", "be", "reloaded", "or", "not", "before", "calling", "the", "original", "method", "NUMBER", "In", "addition", "when", "a", "NUMBER", "marko", "file", "be", "modify", "it", "be", "delete", "from", "the", "require", "NUMBER", "cache", "so", "that", "it", "can", "be", "reloaded", "through", "the", "Node", "NUMBER", "js", "module", "loading", "system", "NUMBER", "I", "can", "share", "more", "information", "but", "just", "wanted", "to", "give", "you", "an", "idea", "how", "it", "works", "NUMBER", "Glad", "you", "get", "it", "work", "NUMBER", "Closing", "the", "issue", "NUMBER", "Thanks", "for", "the", "update", "NUMBER", "Looks", "like", "a", "bug", "NUMBER", "I", "be", "investigating", "and", "should", "have", "an", "update", "soon", "NUMBER", "Thanks", "for", "open", "an", "issue", "Should", "be", "fix", "now", "NUMBER", "We", "were", "miss", "a", "test", "case", "that", "should", "have", "caught", "an", "internal", "API", "change", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Thanks", "again", "NUMBER", "There", "be", "no", "try", "NUMBER", "catch", "blocks", "in", "marko", "so", "exception", "will", "not", "be", "caught", "by", "marko", "this", "include", "render", "time", "exception", "due", "to", "programming", "error", "in", "marko", "template", "NUMBER", "Certain", "error", "such", "as", "timeouts", "associated", "with", "the", "TAG", "tag", "will", "be", "emitted", "on", "the", "target", "stream", "NUMBER", "You", "can", "listen", "for", "those", "error", "by", "add", "a", "listener", "for", "the", "error", "event", "javascript", "res", "NUMBER", "on", "error", "function", "err", "NUMBER", "If", "you", "use", "promises", "then", "promises", "will", "have", "an", "implicit", "try", "NUMBER", "catch", "block", "NUMBER", "If", "the", "promise", "pass", "to", "an", "TAG", "tag", "gets", "rejected", "then", "the", "TAG", "tag", "can", "be", "use", "to", "show", "alternate", "content", "TAG", "LINK", "taglib", "TAG", "ltawait", "error", "TAG", "and", "include", "the", "resolve", "file", "in", "the", "build", "NUMBER", "etc", "NUMBER", "mlrawlings", "Any", "thoughts", "on", "how", "to", "register", "global", "taglibs", "I", "have", "few", "thoughts", "on", "this", "NUMBER", "NUMBER", "Add", "methods", "to", "force", "inclusion", "of", "a", "directory", "or", "package", "js", "require", "marko", "compiler", "NUMBER", "taglibFinder", "NUMBER", "includeDir", "dirPath", "Where", "dirPath", "be", "an", "absolute", "path", "to", "the", "folder", "containing", "marko", "NUMBER", "json", "require", "marko", "compiler", "NUMBER", "taglibFinder", "NUMBER", "includePackage", "packageName", "Where", "packageName", "be", "the", "name", "of", "the", "node_module", "containing", "marko", "NUMBER", "json", "I", "don", "t", "particularly", "like", "this", "because", "I", "m", "not", "a", "fan", "on", "having", "the", "application", "compile", "template", "differently", "than", "the", "command", "line", "tool", "test", "etc", "NUMBER", "This", "becomes", "a", "source", "of", "hard", "to", "find", "problem", "NUMBER", "NUMBER", "NUMBER", "Keep", "searching", "up", "after", "finding", "a", "package", "NUMBER", "json", "and", "load", "parent", "s", "package", "taglibs", "as", "well", "NUMBER", "This", "would", "make", "the", "global", "behavior", "the", "default", "though", "not", "truly", "global", "as", "taglibs", "would", "trickle", "down", "but", "not", "up", "NUMBER", "I", "could", "potentially", "see", "some", "unwanted", "behavior", "with", "this", "approach", "but", "the", "top", "level", "would", "always", "be", "in", "control", "of", "what", "was", "add", "in", "so", "it", "might", "not", "be", "so", "bad", "NUMBER", "Another", "issue", "be", "dependency", "flattening", "NUMBER", "One", "dependency", "might", "be", "a", "dependency", "of", "another", "but", "they", "could", "be", "siblings", "in", "the", "directory", "structure", "due", "to", "flattening", "NUMBER", "This", "could", "lead", "to", "unexpect", "behavior", "NUMBER", "NUMBER", "NUMBER", "Allow", "taglibs", "to", "specify", "a", "global", "true", "option", "in", "marko", "NUMBER", "json", "NUMBER", "For", "discovery", "purposes", "and", "sanity", "only", "top", "level", "dependencies", "those", "directly", "depended", "on", "by", "the", "main", "application", "would", "be", "able", "to", "register", "global", "transforms", "renderers", "etc", "NUMBER", "If", "the", "top", "level", "application", "wanted", "to", "register", "a", "global", "transform", "it", "would", "be", "required", "to", "do", "so", "in", "a", "marko", "NUMBER", "json", "at", "the", "root", "of", "the", "package", "NUMBER", "The", "only", "challenge", "with", "this", "would", "be", "determining", "the", "root", "application", "NUMBER", "We", "could", "potentially", "do", "something", "with", "searching", "up", "to", "the", "root", "of", "the", "filesystem", "and", "the", "highest", "directory", "with", "a", "package", "NUMBER", "json", "be", "assumed", "to", "be", "the", "app", "root", "NUMBER", "Or", "we", "could", "use", "process", "NUMBER", "cwd", "as", "a", "heuristic", "NUMBER", "Option", "NUMBER", "be", "looking", "the", "best", "at", "this", "point", "but", "I", "m", "open", "to", "other", "suggestions", "NUMBER", "For", "performance", "reasons", "if", "a", "render", "completes", "synchronously", "then", "the", "callback", "be", "invoked", "synchronously", "NUMBER", "Therefore", "if", "you", "repeat", "the", "rendering", "when", "the", "callback", "be", "invoked", "then", "you", "will", "eventually", "get", "a", "Maximum", "call", "stack", "exceeded", "error", "because", "the", "stack", "trace", "keep", "growing", "NUMBER", "The", "simple", "solution", "be", "to", "break", "up", "the", "stack", "trace", "use", "setImmediate", "javascript", "bench", "marko", "next", "const", "template", "require", "NUMBER", "post", "NUMBER", "marko", "template", "NUMBER", "render", "data", "throw", "away", "the", "render", "output", "setImmediate", "next", "If", "you", "add", "setImmediate", "for", "marko", "then", "make", "sure", "you", "also", "add", "it", "for", "handlebars", "so", "that", "the", "results", "be", "not", "skewed", "NUMBER", "On", "a", "relate", "note", "have", "you", "taken", "a", "look", "at", "the", "following", "benchmarks", "that", "include", "marko", "and", "handlebars", "LINK", "js", "templating", "benchmarks", "It", "s", "very", "easy", "add", "add", "a", "new", "comparison", "group", "with", "your", "own", "template", "NUMBER", "If", "you", "want", "to", "improve", "those", "benchmarks", "with", "more", "comparisons", "I", "would", "encourage", "you", "to", "send", "a", "PR", "NUMBER", "If", "you", "have", "any", "other", "question", "or", "issue", "please", "let", "me", "know", "NUMBER", "New", "Feature", "Description", "TAG", "This", "be", "kinda", "a", "rough", "idea", "I", "ve", "be", "throw", "around", "in", "my", "head", "for", "a", "while", "now", "and", "figured", "I", "should", "put", "it", "out", "there", "I", "d", "like", "Marko", "to", "provide", "a", "way", "to", "automatically", "inject", "a", "custom", "tag", "at", "the", "end", "of", "a", "page", "NUMBER", "Context", "There", "s", "a", "number", "of", "tags", "in", "our", "ecosystem", "some", "of", "these", "eBay", "specific", "that", "we", "end", "up", "having", "users", "add", "to", "their", "layout", "template", "right", "before", "the", "closing", "TAG", "tag", "NUMBER", "Often", "users", "will", "forget", "to", "add", "one", "an", "wonder", "why", "something", "isn", "t", "work", "NUMBER", "xml", "TAG", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Conciderations", "TAG", "Tags", "could", "already", "implement", "something", "basic", "by", "hooking", "into", "the", "closing", "body", "tag", "but", "it", "s", "possible", "someone", "renders", "a", "template", "without", "a", "TAG", "tag", "NUMBER", "Google", "even", "recommends", "LINK", "Optional_Tags", "Optional_Tags", "to", "omit", "it", "NUMBER", "Ideally", "the", "insertion", "point", "for", "these", "tags", "would", "be", "just", "before", "TAG", "or", "if", "that", "s", "not", "find", "at", "the", "end", "of", "the", "top", "level", "template", "NUMBER", "Async", "be", "also", "something", "that", "needs", "to", "be", "considered", "NUMBER", "Example", "In", "the", "case", "of", "TAG", "we", "would", "only", "want", "to", "include", "it", "on", "the", "page", "if", "there", "be", "widgets", "on", "the", "page", "NUMBER", "But", "it", "could", "be", "that", "the", "only", "widget", "be", "in", "an", "TAG", "block", "and", "therefore", "we", "don", "t", "know", "that", "we", "need", "to", "init", "widgets", "until", "that", "block", "be", "executed", "NUMBER", "Finally", "some", "tags", "like", "TAG", "require", "that", "the", "javascript", "has", "be", "loaded", "before", "them", "NUMBER", "And", "it", "s", "likely", "that", "a", "tag", "to", "insert", "that", "javascript", "like", "TAG", "would", "also", "be", "use", "this", "system", "to", "insert", "itself", "NUMBER", "So", "perhaps", "we", "need", "some", "system", "of", "priority", "NUMBER", "Or", "tags", "could", "choose", "between", "append", "prepend", "NUMBER", "It", "would", "also", "be", "ideal", "if", "we", "could", "do", "this", "without", "add", "code", "to", "every", "generate", "template", "NUMBER", "Looks", "good", "NUMBER", "Thank", "you", "yomed", "Thanks", "for", "these", "docs", "relate", "PRs", "We", "definitely", "appreciate", "it", "Hey", "jdnichollsc", "thanks", "for", "the", "feedback", "and", "welcome", "to", "Marko", "You", "be", "doing", "everything", "correctly", "except", "you", "for", "get", "to", "register", "the", "Node", "NUMBER", "js", "require", "hook", "for", "Marko", "template", "NUMBER", "You", "should", "add", "the", "require", "marko", "node", "require", "NUMBER", "install", "line", "to", "your", "main", "JavaScript", "file", "javascript", "require", "marko", "node", "require", "NUMBER", "install", "Add", "this", "line", "var", "express", "require", "express", "var", "router", "express", "NUMBER", "Router", "var", "template", "require", "NUMBER", "views", "index", "NUMBER", "marko", "GET", "home", "page", "NUMBER", "router", "NUMBER", "get", "function", "req", "res", "next", "res", "NUMBER", "marko", "template", "title", "Express", "module", "NUMBER", "export", "router", "Without", "that", "line", "Node", "NUMBER", "js", "will", "try", "to", "load", "Marko", "template", "as", "JavaScript", "modules", "NUMBER", "The", "Node", "NUMBER", "js", "require", "hook", "for", "Marko", "registers", "a", "custom", "loader", "for", "Node", "NUMBER", "js", "that", "will", "automatically", "compile", "require", "d", "NUMBER", "marko", "template", "to", "JavaScript", "modules", "so", "that", "they", "can", "be", "loaded", "by", "the", "Node", "NUMBER", "js", "module", "loading", "system", "NUMBER", "Hope", "that", "solves", "your", "problem", "but", "let", "us", "know", "if", "you", "run", "into", "any", "other", "issue", "NUMBER", "Cheers", "NUMBER", "The", "require", "marko", "node", "require", "NUMBER", "install", "line", "just", "needs", "to", "run", "once", "at", "the", "very", "beginning", "NUMBER", "In", "your", "case", "you", "just", "need", "to", "add", "it", "to", "the", "top", "of", "your", "NUMBER", "app", "NUMBER", "js", "file", "NUMBER", "We", "tried", "to", "make", "this", "clear", "in", "the", "docs", "for", "use", "Marko", "with", "Express", "LINK", "It", "s", "also", "discussed", "in", "more", "detail", "as", "part", "of", "the", "Getting", "Started", "guide", "LINK", "start", "template", "loading", "If", "you", "still", "think", "there", "be", "room", "for", "improving", "the", "docs", "please", "let", "us", "know", "or", "submit", "a", "PR", "at", "the", "top", "of", "every", "docs", "page", "on", "markojs", "NUMBER", "com", "LINK", "there", "be", "a", "Improve", "this", "page", "page", "link", "NUMBER", "TAG", "Description", "TAG", "Opening", "this", "for", "feedback", "discussion", "NUMBER", "This", "PR", "add", "await", "error", "and", "await", "timeout", "events", "NUMBER", "I", "will", "add", "documentation", "for", "these", "before", "we", "merge", "NUMBER", "Motivation", "and", "Context", "TAG", "TAG", "To", "allow", "applications", "to", "listen", "for", "error", "that", "occur", "in", "an", "TAG", "tag", "even", "if", "the", "error", "be", "handle", "by", "the", "template", "NUMBER", "For", "logging", "purposes", "and", "such", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Very", "much", "appreciated", "NUMBER", "Thanks", "Looks", "great", "NUMBER", "Thanks", "Marko", "support", "custom", "attributes", "on", "standard", "HTML", "tags", "NUMBER", "You", "would", "need", "to", "write", "a", "compile", "time", "transform", "to", "process", "those", "custom", "attributes", "NUMBER", "It", "s", "not", "hard", "but", "it", "be", "definitely", "more", "in", "the", "advance", "usage", "category", "NUMBER", "A", "compile", "time", "transform", "can", "also", "process", "standard", "HTML", "attributes", "if", "you", "choose", "NUMBER", "Here", "s", "some", "relevant", "docs", "that", "show", "an", "example", "of", "a", "transform", "processing", "a", "custom", "if", "attribute", "LINK", "transform", "stage", "Sometimes", "it", "be", "easier", "to", "explain", "in", "code", "so", "I", "will", "push", "a", "sample", "app", "that", "will", "hopefully", "make", "things", "clear", "NUMBER", "I", "ll", "provide", "an", "update", "here", "soon", "NUMBER", "Hey", "jasonmacdonald", "it", "took", "a", "little", "longer", "because", "I", "get", "pull", "into", "some", "other", "things", "but", "here", "be", "a", "project", "that", "I", "hope", "clarifies", "how", "to", "handle", "custom", "attributes", "LINK", "js", "samples", "marko", "custom", "attributes", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "if", "you", "would", "like", "more", "details", "please", "feel", "free", "to", "post", "comments", "here", "NUMBER", "You", "re", "welcome", "NUMBER", "You", "just", "need", "to", "use", "marko", "NUMBER", "json", "to", "register", "the", "compile", "time", "transform", "but", "you", "can", "still", "use", "the", "components", "directory", "NUMBER", "Hey", "Ryen", "I", "don", "t", "think", "this", "be", "an", "issue", "with", "the", "Marko", "middleware", "since", "there", "be", "no", "way", "for", "Marko", "to", "know", "that", "the", "response", "be", "going", "to", "be", "the", "same", "before", "rendering", "NUMBER", "I", "think", "the", "responsibility", "of", "setting", "the", "cache", "headers", "and", "setting", "HTTP", "status", "code", "should", "reside", "in", "your", "application", "logic", "NUMBER", "If", "you", "have", "any", "more", "thoughts", "please", "share", "NUMBER", "In", "order", "for", "res", "NUMBER", "marko", "to", "send", "a", "NUMBER", "it", "would", "need", "to", "buffer", "the", "response", "in", "order", "to", "calculate", "an", "etag", "based", "on", "the", "final", "HTML", "output", "and", "then", "use", "that", "etag", "to", "determine", "if", "NUMBER", "should", "be", "sent", "based", "on", "incoming", "request", "and", "it", "would", "also", "need", "to", "set", "the", "etag", "header", "for", "the", "response", "NUMBER", "That", "be", "certainly", "something", "we", "could", "offer", "as", "a", "feature", "but", "it", "would", "need", "to", "be", "opt", "in", "since", "buffering", "would", "prevent", "streaming", "progressive", "HTML", "rendering", "a", "huge", "reason", "to", "use", "Marko", "NUMBER", "In", "a", "perfect", "world", "your", "page", "controller", "would", "calculate", "the", "etag", "independent", "of", "template", "rendering", "this", "would", "would", "have", "the", "advantage", "that", "there", "would", "be", "no", "CPU", "cycles", "and", "memory", "wasted", "rendering", "a", "template", "that", "didn", "t", "need", "to", "be", "rendered", "NUMBER", "I", "m", "not", "oppose", "to", "offering", "feature", "as", "an", "enhancement", "but", "it", "would", "need", "to", "be", "opt", "in", "NUMBER", "If", "it", "something", "you", "be", "interested", "in", "work", "on", "here", "be", "the", "relate", "code", "LINK", "js", "marko", "blob", "master", "express", "NUMBER", "js", "LINK", "LINK", "Please", "let", "me", "know", "if", "you", "be", "interested", "in", "work", "on", "this", "NUMBER", "And", "just", "to", "add", "NUMBER", "something", "like", "the", "following", "might", "be", "nice", "javascript", "res", "NUMBER", "marko", "template", "templateData", "etag", "weak", "Did", "you", "go", "any", "farther", "with", "this", "RyenNelsen", "Generating", "a", "hash", "of", "the", "data", "would", "work", "if", "the", "output", "be", "completely", "based", "on", "the", "backend", "data", "but", "it", "would", "definitely", "require", "some", "extra", "CPU", "cycles", "NUMBER", "Depending", "on", "how", "your", "backend", "data", "be", "structured", "you", "could", "store", "a", "version", "revision", "last", "modify", "or", "some", "other", "value", "with", "the", "data", "to", "track", "change", "to", "the", "data", "and", "use", "that", "value", "to", "also", "set", "the", "etag", "and", "check", "freshness", "NUMBER", "That", "would", "all", "be", "outside", "the", "scope", "of", "marko", "NUMBER", "The", "only", "thing", "that", "marko", "could", "do", "be", "buffer", "up", "the", "output", "HTML", "in", "order", "to", "calculate", "an", "etag", "and", "compare", "freshness", "to", "conditionally", "send", "down", "a", "NUMBER", "not", "modify", "I", "think", "change", "the", "name", "of", "the", "package", "will", "disrupt", "things", "too", "much", "NUMBER", "Also", "we", "merge", "the", "functionality", "of", "autocomplete", "marko", "and", "hyperclick", "marko", "into", "the", "main", "language", "marko", "LINK", "marko", "package", "NUMBER", "It", "s", "unfortunate", "that", "the", "search", "results", "for", "marko", "be", "in", "such", "a", "bad", "order", "but", "I", "m", "not", "sure", "there", "be", "much", "we", "can", "do", "about", "that", "right", "now", "NUMBER", "I", "did", "add", "keywords", "to", "the", "package", "NUMBER", "json", "so", "hopefully", "that", "will", "help", "LINK", "js", "atom", "language", "marko", "commit", "NUMBER", "e", "NUMBER", "ed", "NUMBER", "daca", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "f", "NUMBER", "e", "NUMBER", "Currently", "the", "Marko", "compiler", "compiles", "a", "template", "to", "a", "program", "that", "when", "executed", "will", "render", "an", "HTML", "string", "to", "a", "stream", "NUMBER", "This", "be", "perfect", "for", "the", "server", "but", "it", "be", "less", "than", "ideal", "in", "the", "browser", "since", "the", "HTML", "string", "must", "be", "parsed", "use", "something", "like", "innerHTML", "in", "order", "to", "update", "the", "DOM", "NUMBER", "Instead", "we", "plan", "to", "update", "Marko", "to", "support", "a", "new", "virtual", "DOM", "output", "mode", "for", "the", "compiler", "and", "an", "accompanying", "virtual", "DOM", "runtime", "NUMBER", "The", "template", "will", "continue", "to", "be", "compiled", "to", "a", "program", "that", "renders", "an", "HTML", "stream", "for", "the", "server", "but", "template", "will", "be", "compiled", "to", "render", "to", "a", "virtual", "DOM", "tree", "in", "the", "browser", "NUMBER", "Supporting", "multiple", "compilation", "outputs", "will", "allow", "optimizations", "in", "the", "browser", "that", "were", "not", "possible", "before", "NUMBER", "To", "make", "things", "more", "clear", "let", "s", "take", "a", "look", "at", "an", "example", "template", "xml", "TAG", "Hello", "data", "NUMBER", "name", "TAG", "TAG", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "TAG", "TAG", "No", "colors", "TAG", "TAG", "The", "current", "compiled", "output", "for", "the", "above", "template", "be", "similar", "to", "the", "following", "javascript", "function", "render", "data", "out", "out", "NUMBER", "w", "TAG", "Hello", "escapeXml", "data", "NUMBER", "name", "TAG", "if", "data", "NUMBER", "colors", "NUMBER", "length", "out", "NUMBER", "w", "TAG", "forEach", "data", "NUMBER", "colors", "function", "color", "out", "NUMBER", "w", "TAG", "escapeXml", "color", "TAG", "out", "NUMBER", "w", "TAG", "else", "out", "NUMBER", "w", "TAG", "No", "colors", "TAG", "We", "be", "planning", "to", "go", "with", "the", "following", "virtual", "DOM", "output", "when", "compiled", "for", "the", "browser", "not", "exact", "javascript", "var", "attrs", "NUMBER", "class", "title", "var", "el", "NUMBER", "createElement", "div", "class", "empty", "NUMBER", "child", "count", "NUMBER", "text", "No", "colors", "function", "render", "data", "out", "out", "NUMBER", "element", "h", "NUMBER", "attrs", "NUMBER", "NUMBER", "NUMBER", "text", "Hello", "data", "NUMBER", "name", "if", "data", "NUMBER", "colors", "NUMBER", "length", "out", "NUMBER", "beginElement", "ul", "forEach", "data", "NUMBER", "colors", "function", "color", "out", "NUMBER", "element", "li", "null", "NUMBER", "NUMBER", "text", "color", "out", "NUMBER", "endElement", "else", "out", "NUMBER", "node", "el", "NUMBER", "A", "few", "things", "to", "note", "Optimization", "static", "subtrees", "be", "pull", "into", "variables", "that", "be", "only", "initialized", "once", "and", "reused", "for", "every", "render", "Optimization", "static", "attributes", "that", "be", "on", "dynamic", "elements", "be", "pull", "out", "to", "static", "variables", "Optimization", "Diffing", "be", "skipped", "when", "comparing", "static", "subtrees", "Async", "rendering", "will", "continue", "to", "be", "support", "on", "both", "the", "server", "and", "in", "the", "browser", "NUMBER", "Async", "fragment", "will", "begin", "with", "a", "partially", "constructed", "virtual", "DOM", "subtree", "out", "NUMBER", "write", "will", "not", "be", "allow", "when", "rendering", "to", "a", "virtual", "DOM", "out", "NUMBER", "getRootNode", "can", "be", "use", "to", "get", "the", "root", "DocumentFragment", "LINK", "js", "marko", "vdom", "documentfragment", "node", "for", "the", "virtual", "DOM", "tree", "be", "rendered", "NUMBER", "Tasks", "x", "Provide", "a", "virtual", "DOM", "implementation", "that", "be", "compatible", "with", "morphdom", "NUMBER", "Done", "marko", "vdom", "LINK", "js", "marko", "vdom", "x", "Update", "morphdom", "LINK", "steele", "idem", "morphdom", "to", "support", "diffing", "the", "real", "DOM", "with", "a", "compliant", "virtual", "DOM", "NUMBER", "Done", "morphdom", "PR", "NUMBER", "LINK", "steele", "idem", "morphdom", "pull", "NUMBER", "x", "Update", "the", "Marko", "compiler", "to", "support", "multiple", "output", "modes", "x", "Implement", "the", "codegen", "for", "the", "virtual", "DOM", "output", "mode", "almost", "do", "x", "Optimize", "use", "isSameNode", "for", "static", "subtrees", "x", "Update", "async", "writer", "LINK", "js", "async", "writer", "to", "support", "a", "virtual", "DOM", "runtime", "NUMBER", "Done", "async", "vdom", "builder", "LINK", "js", "async", "vdom", "builder", "x", "Merge", "in", "raptor", "renderer", "LINK", "renderer", "functionality", "into", "async", "vdom", "builder", "LINK", "js", "async", "vdom", "builder", "and", "async", "writer", "LINK", "js", "async", "writer", "x", "Additional", "optimizations", "for", "static", "attributes", "on", "non", "static", "sub", "trees", "x", "Default", "to", "vdom", "output", "for", "lasso", "marko", "LINK", "js", "lasso", "marko", "PierBover", "Anything", "be", "possible", "because", "Marko", "allows", "for", "custom", "compile", "time", "transforms", "and", "custom", "code", "generators", "for", "custom", "tags", "and", "this", "allows", "for", "custom", "JavaScript", "to", "be", "inserted", "into", "the", "compiled", "template", "to", "attach", "event", "listeners", "or", "whatever", "else", "be", "needed", "NUMBER", "Marko", "Widgets", "be", "an", "example", "of", "a", "UI", "components", "library", "that", "utilizes", "compile", "time", "transforms", "to", "support", "declarative", "event", "bindings", "for", "both", "DOM", "events", "and", "custom", "widget", "events", "NUMBER", "Marko", "Widgets", "allows", "named", "events", "to", "be", "bound", "to", "a", "named", "widget", "method", "NUMBER", "How", "Marko", "Widgets", "handles", "event", "binding", "be", "a", "subtle", "implementation", "detail", "but", "it", "allows", "the", "browser", "to", "pick", "up", "right", "where", "the", "server", "left", "off", "and", "unlike", "with", "React", "it", "be", "not", "necessary", "to", "rerender", "the", "UI", "in", "the", "browser", "if", "it", "was", "already", "rendered", "on", "the", "server", "NUMBER", "The", "reason", "React", "requires", "that", "the", "UI", "be", "rerendered", "in", "the", "browser", "be", "because", "a", "reference", "to", "a", "listener", "function", "on", "the", "server", "can", "t", "be", "pass", "down", "to", "the", "browser", "so", "all", "the", "server", "be", "really", "provide", "be", "the", "raw", "HTML", "NUMBER", "More", "details", "LINK", "closer", "look", "at", "marko", "widgets", "how", "do", "event", "delegation", "work", "ianvonholt", "for", "now", "we", "only", "have", "raw", "numbers", "no", "fancy", "graphs", "for", "a", "benchmark", "of", "the", "new", "marko", "vdom", "LINK", "js", "marko", "vdom", "implementation", "that", "shows", "very", "significant", "speedups", "when", "measuring", "the", "time", "it", "takes", "to", "build", "a", "virtual", "DOM", "tree", "compared", "to", "a", "real", "DOM", "tree", "as", "well", "as", "the", "time", "it", "takes", "to", "walk", "a", "virtual", "DOM", "tree", "compared", "to", "a", "real", "DOM", "tree", "LINK", "js", "marko", "vdom", "blob", "master", "docs", "benchmark", "results", "NUMBER", "md", "While", "a", "virtual", "DOM", "implementation", "provides", "some", "significant", "gains", "I", "suspect", "the", "bigger", "improvement", "will", "come", "from", "the", "fact", "that", "we", "can", "now", "skip", "rerendering", "parts", "of", "a", "template", "that", "be", "constant", "NUMBER", "That", "be", "the", "improved", "compiler", "will", "separate", "out", "a", "DOM", "subtree", "to", "a", "virtual", "DOM", "node", "that", "be", "only", "created", "once", "and", "use", "for", "every", "rerender", "NUMBER", "On", "top", "of", "that", "we", "also", "mark", "that", "virtual", "DOM", "node", "as", "constant", "so", "that", "Marko", "Widgets", "will", "completely", "skip", "diffing", "entire", "DOM", "subtrees", "that", "be", "constant", "NUMBER", "This", "was", "not", "really", "possible", "before", "when", "rendering", "to", "an", "HTML", "string", "since", "the", "entire", "HTML", "string", "was", "be", "parsed", "to", "produce", "a", "real", "DOM", "even", "though", "many", "of", "the", "HTML", "strings", "were", "constant", "NUMBER", "There", "be", "a", "few", "reasons", "we", "have", "keep", "writeToDisk", "enable", "In", "development", "seeing", "the", "output", "NUMBER", "marko", "NUMBER", "js", "file", "be", "helpful", "for", "debugging", "and", "understanding", "In", "production", "template", "be", "not", "recompiled", "if", "the", "application", "server", "needs", "to", "restart", "since", "the", "compiled", "out", "from", "the", "previous", "startup", "was", "write", "to", "disk", "NUMBER", "This", "makes", "startup", "times", "slightly", "faster", "Since", "disabling", "writeToDisk", "be", "as", "simple", "as", "require", "marko", "compiler", "NUMBER", "configure", "writeToDisk", "false", "I", "m", "in", "favor", "of", "keep", "the", "current", "behavior", "NUMBER", "I", "m", "open", "to", "other", "thoughts", "though", "NUMBER", "mlrawlings", "philidem", "any", "thoughts", "hustcer", "template", "should", "always", "be", "compiled", "on", "the", "server", "NUMBER", "When", "you", "call", "require", "NUMBER", "template", "NUMBER", "marko", "on", "the", "server", "the", "template", "will", "be", "compiled", "and", "loaded", "at", "that", "time", "NUMBER", "When", "you", "use", "a", "JavaScript", "module", "bundler", "to", "send", "down", "template", "they", "will", "be", "compiled", "during", "the", "bundling", "process", "NUMBER", "If", "that", "doesn", "t", "answer", "your", "question", "I", "would", "recommend", "joining", "us", "on", "Gitter", "to", "discuss", "LINK", "js", "marko", "I", "would", "agree", "that", "it", "would", "be", "nice", "to", "remove", "these", "file", "by", "default", "if", "only", "because", "it", "makes", "things", "seem", "simpler", "NUMBER", "I", "will", "say", "though", "that", "these", "compiled", "output", "file", "were", "extremely", "helpful", "in", "understanding", "how", "marko", "works", "at", "a", "lower", "level", "though", "that", "s", "certainly", "not", "a", "requirement", "in", "order", "to", "_use_", "marko", "NUMBER", "The", "other", "concern", "I", "have", "be", "that", "runtime", "error", "will", "reference", "a", "line", "column", "in", "the", "generate", "NUMBER", "marko", "NUMBER", "js", "file", "so", "if", "that", "file", "be", "not", "readily", "available", "debugging", "becomes", "more", "cumbersome", "NUMBER", "Potential", "solutions", "sourcemaps", "write", "out", "the", "generate", "file", "on", "error", "Hesulan", "Regarding", "source", "maps", "our", "parser", "already", "has", "line", "column", "start", "end", "positions", "for", "every", "tag", "attribute", "etc", "NUMBER", "so", "that", "s", "definitely", "a", "good", "starting", "point", "and", "I", "m", "thinking", "with", "the", "change", "made", "to", "the", "way", "we", "generate", "code", "in", "v", "NUMBER", "it", "might", "not", "be", "_too_", "difficult", "to", "get", "the", "code", "writer", "to", "map", "change", "back", "to", "the", "positions", "of", "the", "nodes", "its", "write", "NUMBER", "Then", "we", "would", "need", "some", "kind", "of", "way", "to", "track", "where", "newly", "generate", "nodes", "came", "from", "NUMBER", "This", "would", "probably", "require", "the", "core", "transforms", "and", "user", "generate", "transforms", "to", "give", "the", "compiler", "hints", "about", "what", "it", "s", "doing", "NUMBER", "This", "would", "be", "especially", "true", "when", "custom", "parsing", "tag", "attribute", "argument", "expressions", "NUMBER", "I", "actually", "just", "recently", "add", "a", "_currentNode", "property", "to", "the", "context", "so", "if", "we", "connect", "the", "builder", "to", "use", "that", "we", "might", "be", "able", "to", "track", "things", "in", "many", "cases", "but", "I", "there", "would", "still", "be", "cases", "where", "you", "might", "need", "to", "pass", "in", "an", "original", "node", "to", "a", "builder", "method", "possibly", "with", "position", "offsets", "NUMBER", "I", "definitely", "think", "we", "can", "get", "this", "to", "work", "NUMBER", "We", "just", "need", "the", "time", "to", "spend", "on", "it", "NUMBER", "In", "the", "short", "term", "maybe", "controlling", "writeToDisk", "via", "an", "environment", "variable", "would", "be", "easiest", "MARKO_WRITE_TO_DISK", "true", "npm", "start", "or", "something", "more", "generic", "like", "DEBUG", "marko", "npm", "start", "That", "s", "an", "interesting", "thought", "mindeavor", "NUMBER", "It", "s", "a", "little", "more", "verbose", "but", "a", "tag", "such", "as", "one", "of", "the", "following", "would", "be", "easier", "to", "implement", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "data", "NUMBER", "name", "TAG", "I", "don", "t", "quite", "follow", "NUMBER", "Marko", "template", "be", "resolve", "and", "loaded", "through", "the", "Node", "NUMBER", "js", "module", "loading", "system", "just", "like", "normal", "JavaScript", "modules", "NUMBER", "There", "s", "no", "views", "dir", "and", "there", "be", "no", "root", "path", "when", "use", "marko", "directly", "NUMBER", "Can", "you", "provide", "more", "details", "and", "code", "to", "illustrate", "the", "problem", "you", "be", "seeing", "As", "Patrick", "said", "we", "use", "node", "s", "module", "resolution", "to", "handle", "finding", "the", "template", "NUMBER", "If", "you", "really", "wanted", "to", "have", "a", "views", "directory", "you", "could", "roll", "something", "yourself", "use", "the", "require", "marko", "NUMBER", "load", "function", "which", "expects", "a", "fully", "resolve", "filesystem", "path", "NUMBER", "In", "our", "examples", "we", "use", "require", "NUMBER", "resolve", "to", "get", "that", "path", "but", "there", "s", "nothing", "stopping", "you", "from", "resolving", "it", "relative", "to", "some", "views", "directory", "but", "that", "would", "all", "happen", "outside", "the", "scope", "of", "Marko", "NUMBER", "Maybe", "something", "along", "the", "lines", "of", "this", "LINK", "NUMBER", "However", "I", "would", "recommend", "having", "your", "render", "function", "take", "the", "loaded", "template", "as", "a", "parameter", "js", "var", "template", "require", "NUMBER", "index", "NUMBER", "marko", "app", "NUMBER", "use", "res", "res", "NUMBER", "send", "NUMBER", "marko", "NUMBER", "render", "template", "name", "Trek", "Engine", "We", "do", "something", "similar", "in", "the", "marko", "express", "LINK", "js", "marko", "blob", "master", "express", "NUMBER", "js", "submodule", "to", "provide", "the", "res", "NUMBER", "marko", "LINK", "method", "NUMBER", "I", "think", "what", "needs", "to", "happen", "here", "be", "that", "in", "addition", "to", "NUMBER", "marko", "and", "NUMBER", "marko", "NUMBER", "html", "we", "should", "also", "look", "for", "any", "extensions", "that", "were", "registered", "via", "require", "marko", "node", "require", "NUMBER", "install", "NUMBER", "For", "example", "javascript", "require", "marko", "node", "require", "NUMBER", "install", "extension", "NUMBER", "marko", "require", "marko", "node", "require", "NUMBER", "install", "extension", "NUMBER", "marko", "xml", "require", "marko", "node", "require", "NUMBER", "install", "extension", "NUMBER", "foo", "We", "should", "check", "to", "see", "if", "the", "path", "ends", "with", "NUMBER", "marko", "NUMBER", "marko", "xml", "and", "NUMBER", "foo", "NUMBER", "Thoughts", "Would", "you", "be", "interested", "in", "work", "on", "this", "jlarsson", "Hey", "fundon", "NUMBER", "marko", "uses", "the", "Apache", "NUMBER", "LINK", "NUMBER", "license", "NUMBER", "I", "m", "not", "a", "lawyer", "but", "if", "you", "be", "just", "depending", "on", "marko", "and", "not", "modifying", "it", "then", "you", "don", "t", "need", "to", "do", "anything", "NUMBER", "Any", "distribution", "of", "marko", "need", "to", "include", "a", "copy", "of", "the", "license", "which", "will", "be", "the", "case", "if", "you", "be", "installing", "from", "npm", "or", "directly", "from", "Github", "NUMBER", "If", "that", "doesn", "t", "answer", "your", "question", "then", "please", "let", "me", "know", "but", "I", "be", "going", "to", "go", "ahead", "and", "close", "the", "issue", "NUMBER", "fundon", "yes", "NUMBER", "as", "long", "as", "you", "be", "not", "modifying", "and", "redistributing", "marko", "then", "it", "doesn", "t", "matter", "what", "the", "license", "be", "for", "your", "project", "NUMBER", "Hi", "Eldar", "X", "what", "version", "of", "Safari", "be", "you", "use", "and", "which", "OS", "When", "I", "test", "Safari", "version", "NUMBER", "NUMBER", "on", "OSX", "everything", "be", "work", "as", "expected", "use", "the", "following", "sample", "app", "LINK", "js", "samples", "marko", "progressive", "rendering", "It", "will", "vary", "by", "browsers", "but", "most", "browsers", "must", "receive", "a", "minimum", "threshold", "of", "bytes", "before", "the", "initial", "render", "NUMBER", "It", "s", "possible", "that", "for", "your", "app", "you", "be", "not", "sending", "down", "enough", "HTML", "for", "the", "initial", "HTML", "and", "this", "be", "cause", "the", "browser", "to", "just", "buffer", "the", "received", "HTML", "instead", "of", "rendering", "the", "initial", "page", "NUMBER", "If", "you", "can", "provide", "more", "details", "on", "your", "setup", "or", "a", "sample", "app", "I", "will", "investigate", "some", "more", "NUMBER", "Hey", "basickarl", "here", "s", "what", "I", "consider", "to", "be", "a", "good", "directory", "structure", "clojure", "NUMBER", "cache", "auto", "generate", "file", "config", "development", "NUMBER", "json", "production", "NUMBER", "json", "node_modules", "install", "modules", "src", "components", "some", "component", "test", "index", "NUMBER", "js", "style", "NUMBER", "css", "template", "NUMBER", "marko", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "additional", "components", "layouts", "_common", "file", "common", "to", "all", "layouts", "main", "fonts", "sanfrancisco", "NUMBER", "woff", "NUMBER", "images", "logo", "NUMBER", "webp", "style", "NUMBER", "css", "layout", "NUMBER", "marko", "layout", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "additional", "layouts", "pages", "directory", "of", "pages", "home", "the", "home", "page", "components", "components", "use", "by", "home", "only", "images", "hero", "image", "NUMBER", "webp", "index", "NUMBER", "js", "home", "route", "handler", "style", "NUMBER", "css", "home", "NUMBER", "marko", "home", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "additional", "pages", "app", "NUMBER", "js", "static", "auto", "generate", "file", "test", "test", "relate", "file", "package", "NUMBER", "json", "And", "to", "touch", "on", "some", "of", "your", "other", "question", "How", "do", "one", "create", "a", "template", "which", "nests", "another", "template", "_template", "NUMBER", "marko_", "xml", "TAG", "TAG", "TAG", "_item", "NUMBER", "marko_", "xml", "TAG", "data", "NUMBER", "name", "TAG", "tags", "vs", "NUMBER", "widgets", "Typically", "you", "ll", "see", "widgets", "implement", "as", "custom", "tags", "NUMBER", "A", "widget", "s", "template", "uses", "the", "w", "bind", "attribute", "to", "link", "to", "a", "JavaScript", "file", "that", "contains", "its", "client", "side", "behavior", "NUMBER", "what", "be", "marko", "NUMBER", "json", "LINK", "taglibs", "markojson", "Marko", "will", "automatically", "look", "for", "directories", "under", "components", "and", "scan", "them", "LINK", "taglibs", "scanning", "for", "tags", "for", "custom", "tags", "NUMBER", "If", "you", "want", "to", "define", "individual", "tags", "use", "custom", "transforms", "or", "scan", "a", "directory", "other", "than", "components", "you", "ll", "need", "to", "use", "this", "file", "to", "provide", "the", "configuration", "NUMBER", "It", "use", "to", "be", "that", "you", "needed", "this", "file", "even", "if", "all", "your", "components", "were", "under", "a", "components", "directory", "which", "be", "why", "you", "ll", "find", "it", "in", "many", "examples", "NUMBER", "client", "marko", "rendering", "both", "non", "widget", "and", "widget", "be", "still", "unclear", "to", "me", "A", "module", "bundler", "be", "needed", "to", "use", "marko", "client", "side", "webpack", "should", "work", "LINK", "js", "marko", "issue", "NUMBER", "but", "I", "don", "t", "have", "any", "experience", "use", "it", "with", "marko", "NUMBER", "We", "re", "currently", "work", "on", "some", "improvement", "performance", "and", "otherwise", "to", "client", "side", "rendering", "NUMBER", "We", "should", "update", "the", "docs", "and", "give", "some", "better", "examples", "once", "that", "work", "be", "complete", "NUMBER", "I", "would", "like", "to", "see", "an", "example", "project", "which", "touches", "all", "areas", "so", "I", "can", "see", "how", "they", "could", "be", "fit", "together", "We", "have", "an", "sample", "project", "that", "makes", "use", "of", "Marko", "but", "currently", "it", "s", "internal", "to", "eBay", "NUMBER", "We", "d", "need", "to", "remove", "some", "eBay", "specific", "things", "from", "the", "app", "but", "it", "would", "probably", "be", "worthwhile", "to", "make", "that", "generally", "available", "NUMBER", "I", "think", "explaining", "from", "scratch", "for", "beginners", "who", "have", "just", "come", "from", "i", "NUMBER", "e", "NUMBER", "jQuery", "how", "marko", "works", "will", "draw", "a", "lot", "more", "attention", "to", "it", "NUMBER", "I", "agree", "NUMBER", "This", "be", "an", "area", "where", "we", "could", "use", "some", "help", "if", "you", "re", "willing", "NUMBER", "It", "would", "be", "amazing", "to", "start", "seeing", "some", "training", "content", "provide", "by", "people", "outside", "the", "project", "maintainers", "NUMBER", "I", "think", "when", "you", "re", "just", "starting", "to", "learn", "something", "you", "re", "in", "a", "unique", "position", "to", "help", "people", "at", "the", "same", "place", "as", "things", "become", "familiar", "we", "tend", "to", "forget", "the", "aspects", "that", "use", "to", "be", "difficult", "for", "us", "NUMBER", "If", "you", "have", "more", "question", "feel", "free", "to", "join", "us", "on", "gitter", "LINK", "js", "marko", "and", "welcome", "to", "the", "community", "tada", "davidenq", "everything", "under", "src", "include", "all", "application", "source", "code", "both", "server", "side", "client", "side", "and", "isomorphic", "code", "NUMBER", "In", "most", "cases", "whether", "or", "not", "code", "be", "client", "side", "or", "server", "side", "will", "depend", "on", "how", "the", "code", "be", "use", "NUMBER", "Do", "you", "have", "any", "other", "specific", "doubts", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "NUMBER", "If", "you", "still", "have", "unanswered", "question", "please", "feel", "free", "to", "add", "comments", "here", "or", "open", "a", "new", "Github", "issue", "NUMBER", "basickarl", "You", "can", "pass", "the", "data", "as", "the", "second", "argument", "for", "the", "TAG", "tag", "xml", "TAG", "TAG", "TAG", "See", "LINK", "guide", "include", "Anant", "Raj", "The", "components", "directory", "can", "exist", "in", "multiple", "places", "in", "your", "project", "and", "they", "be", "scoped", "NUMBER", "We", "recommend", "the", "following", "directory", "structure", "my", "app", "components", "top", "level", "UI", "components", "shared", "by", "all", "pages", "routes", "routes", "about", "me", "components", "UI", "components", "scoped", "to", "the", "about", "me", "route", "index", "NUMBER", "marko", "index", "components", "UI", "components", "scoped", "to", "the", "index", "route", "index", "NUMBER", "marko", "You", "can", "see", "this", "project", "structure", "in", "action", "as", "part", "of", "our", "starter", "app", "LINK", "js", "samples", "marko", "starter", "demo", "Let", "me", "know", "if", "you", "would", "like", "more", "details", "but", "hopefully", "that", "answers", "your", "question", "NUMBER", "No", "worries", "NUMBER", "I", "still", "think", "it", "was", "confusing", "since", "the", "docs", "say", "that", "they", "be", "deprecate", "but", "we", "don", "t", "say", "why", "or", "which", "method", "should", "be", "use", "instead", "NUMBER", "I", "ll", "fix", "this", "to", "avoid", "confusing", "others", "NUMBER", "Thanks", "for", "open", "the", "issue", "NUMBER", "See", "LINK", "js", "marko", "issue", "NUMBER", "The", "builtin", "empty", "notEmpty", "helpers", "will", "be", "remove", "in", "Marko", "v", "NUMBER", "and", "will", "be", "deprecate", "in", "v", "NUMBER", "with", "console", "warning", "NUMBER", "If", "still", "needed", "these", "helpers", "can", "still", "explicitly", "be", "imported", "html", "TAG", "var", "empty", "require", "marko", "helpers", "empty", "var", "notEmpty", "require", "marko", "helpers", "notEmpty", "TAG", "Alternatively", "you", "can", "simply", "check", "the", "array", "length", "or", "ensure", "that", "a", "string", "be", "not", "falsey", "NUMBER", "Why", "The", "empty", "notEmpty", "helpers", "were", "automatically", "be", "add", "to", "every", "compiled", "template", "NUMBER", "While", "they", "can", "be", "helpful", "we", "feel", "it", "be", "better", "if", "the", "developer", "explicitly", "imports", "only", "the", "exact", "helpers", "that", "your", "code", "depends", "on", "for", "improved", "modularity", "NUMBER", "Also", "when", "add", "support", "for", "inline", "marko", "template", "LINK", "js", "marko", "issue", "NUMBER", "we", "find", "that", "these", "empty", "notEmpty", "helpers", "could", "conflict", "with", "other", "JavaScript", "code", "since", "all", "static", "code", "imports", "be", "add", "at", "the", "top", "of", "the", "JavaScript", "file", "NUMBER", "briceburg", "I", "suppose", "one", "possibility", "would", "be", "to", "introduce", "a", "new", "option", "in", "marko", "NUMBER", "json", "to", "opt", "in", "for", "the", "empty", "notEmpty", "helpers", "but", "I", "don", "t", "think", "it", "be", "a", "good", "idea", "to", "go", "there", "NUMBER", "Personally", "I", "would", "just", "use", "TAG", "instead", "of", "a", "helper", "NUMBER", "If", "you", "have", "any", "other", "thoughts", "or", "ideas", "please", "share", "NUMBER", "Thanks", "NUMBER", "Appreciated", "TAG", "Description", "TAG", "Previously", "there", "was", "a", "difference", "in", "the", "way", "empty", "string", "was", "handle", "when", "it", "was", "a", "literal", "value", "NUMBER", "It", "now", "uses", "the", "raptor", "util", "behavior", "for", "both", "literals", "and", "dynamic", "values", "NUMBER", "Motivation", "and", "Context", "TAG", "TAG", "Fixes", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "The", "test", "will", "fail", "until", "raptorjs", "raptor", "util", "NUMBER", "be", "merge", "and", "publish", "Thanks", "for", "letting", "me", "know", "NUMBER", "I", "have", "fix", "the", "NUMBER", "npmignore", "file", "and", "publish", "a", "new", "version", "with", "NUMBER", "orig", "file", "excluded", "Description", "Currently", "when", "a", "node", "tag", "be", "marked", "with", "preserve", "whitespace", "the", "whitespace", "be", "be", "preserved", "for", "only", "directly", "nested", "text", "NUMBER", "The", "expected", "behavior", "should", "be", "that", "whitespace", "should", "be", "preserved", "for", "all", "directly", "nested", "text", "and", "any", "text", "nested", "at", "any", "level", "below", "the", "node", "NUMBER", "Motivation", "and", "Context", "Issue", "NUMBER", "LINK", "js", "marko", "issue", "NUMBER", "Checklist", "X", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "X", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "X", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "X", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "X", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Checklist", "X", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "X", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "X", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "X", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "X", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Actual", "usage", "will", "be", "the", "following", "javascript", "var", "defineRenderer", "require", "marko", "defineRenderer", "module", "NUMBER", "export", "defineRenderer", "template", "require", "NUMBER", "template", "NUMBER", "marko", "getTemplateData", "function", "input", "var", "firstName", "input", "NUMBER", "firstName", "var", "lastName", "input", "NUMBER", "lastName", "return", "fullName", "firstName", "lastName", "NOTE", "defineRenderer", "should", "be", "required", "as", "a", "sub", "module", "require", "marko", "defineRenderer", "NUMBER", "This", "was", "do", "to", "avoid", "add", "any", "extra", "weight", "to", "the", "main", "marko", "runtime", "NUMBER", "Some", "note", "The", "parser", "be", "work", "as", "expected", "This", "be", "not", "really", "a", "bug", "but", "it", "be", "a", "gotcha", "We", "should", "offer", "a", "custom", "tag", "to", "avoid", "the", "situation", "where", "nested", "body", "content", "be", "ended", "too", "early", "NUMBER", "One", "possible", "solution", "xml", "TAG", "TAG", "TAG", "Other", "Content", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "TAG", "Thoughts", "Description", "TAG", "Allows", "excluding", "the", "components", "dir", "itself", "in", "addition", "to", "its", "parent", "directory", "presumably", "where", "a", "marko", "NUMBER", "json", "would", "have", "be", "find", "NUMBER", "Motivation", "and", "Context", "TAG", "TAG", "Fixes", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "x", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "I", "m", "test", "this", "use", "a", "render", "test", "NUMBER", "Is", "that", "fine", "I", "think", "a", "render", "test", "be", "great", "because", "it", "easy", "to", "write", "test", "based", "on", "the", "output", "HTML", "NUMBER", "Alternatively", "you", "could", "add", "a", "taglib", "lookup", "test", "if", "you", "felt", "the", "need", "to", "inspect", "some", "of", "the", "internal", "data", "structures", "similar", "to", "the", "following", "LINK", "js", "marko", "blob", "master", "test", "autotests", "taglib", "lookup", "custom", "tag", "test", "NUMBER", "js", "Amended", "commit", "has", "be", "merge", "LINK", "js", "marko", "commit", "NUMBER", "b", "NUMBER", "d", "NUMBER", "a", "NUMBER", "daed", "NUMBER", "eb", "NUMBER", "a", "NUMBER", "ec", "NUMBER", "New", "version", "publish", "with", "improvement", "marko", "NUMBER", "Closing", "PR", "NUMBER", "There", "be", "no", "try", "NUMBER", "catch", "blocks", "in", "Marko", "for", "performance", "reasons", "but", "also", "because", "the", "Marko", "runtime", "wouldn", "t", "know", "how", "to", "best", "handle", "the", "error", "NUMBER", "A", "common", "strategy", "for", "error", "handle", "in", "Node", "NUMBER", "js", "be", "to", "gracefully", "close", "all", "connections", "when", "an", "uncaught", "error", "occur", "and", "to", "shutdown", "the", "process", "NUMBER", "The", "following", "be", "a", "good", "read", "LINK", "js", "production", "design", "error", "However", "another", "good", "alternative", "be", "to", "use", "promises", "NUMBER", "Promise", "implementations", "use", "an", "implicit", "try", "NUMBER", "catch", "so", "you", "can", "do", "the", "following", "to", "catch", "any", "error", "when", "rendering", "the", "initial", "HTML", "that", "be", "rendered", "synchronously", "javascript", "function", "controller", "req", "res", "new", "Promise", "function", "resolve", "reject", "template", "NUMBER", "render", "name", "Frank", "res", "NUMBER", "catch", "function", "err", "res", "NUMBER", "end", "Handle", "the", "error", "NUMBER", "console", "NUMBER", "log", "Templating", "rendering", "fail", "err", "In", "addition", "if", "you", "be", "use", "the", "TAG", "LINK", "taglib", "TAG", "ltawait", "TAG", "With", "that", "said", "I", "think", "we", "should", "revisit", "the", "rules", "for", "rendering", "attribute", "value", "NUMBER", "I", "think", "the", "following", "would", "be", "more", "appropriate", "NUMBER", "Giving", "the", "following", "template", "xml", "TAG", "someExpression", "Current", "Proposed", "undefined", "null", "false", "TAG", "TAG", "no", "change", "true", "TAG", "TAG", "no", "change", "TAG", "TAG", "While", "this", "would", "be", "a", "change", "I", "be", "not", "sure", "it", "would", "actually", "break", "anything", "NUMBER", "Thoughts", "patrick", "steele", "idem", "I", "d", "lean", "towards", "your", "table", "rather", "than", "creating", "a", "list", "of", "exception", "NUMBER", "I", "was", "just", "test", "and", "I", "think", "we", "ve", "get", "some", "weird", "behavior", "NUMBER", "TAG", "becomes", "TAG", "but", "TAG", "becomes", "TAG", "if", "data", "NUMBER", "alt", "This", "be", "weird", "but", "also", "means", "that", "we", "could", "probably", "leave", "alt", "untouched", "if", "it", "s", "a", "string", "literal", "and", "keep", "the", "current", "behavior", "if", "it", "s", "a", "variable", "that", "contains", "an", "empty", "string", "as", "its", "value", "if", "we", "want", "to", "NUMBER", "Or", "maybe", "we", "should", "make", "it", "consistent", "NUMBER", "yomed", "Out", "of", "curiosity", "be", "there", "any", "reason", "why", "you", "couldn", "t", "forgo", "the", "alt", "attribute", "and", "use", "role", "presentation", "or", "aria", "hidden", "And", "do", "alt", "behave", "differently", "than", "alt", "yomed", "If", "you", "ask", "me", "even", "alt", "be", "kinda", "a", "hack", "use", "to", "stop", "the", "screen", "reader", "from", "reading", "out", "the", "url", "to", "the", "image", "NUMBER", "But", "role", "presentation", "or", "aria", "hidden", "explicitly", "tell", "the", "screen", "reader", "to", "ignore", "it", "because", "it", "s", "for", "presentational", "purposes", "only", "NUMBER", "In", "any", "case", "we", "should", "probably", "fix", "this", "NUMBER", "I", "m", "in", "favor", "of", "update", "Marko", "to", "follow", "the", "propose", "table", "above", "as", "part", "of", "a", "minor", "release", "NUMBER", "The", "chances", "of", "actually", "breaking", "anything", "be", "extremely", "low", "since", "the", "worst", "case", "be", "that", "there", "will", "be", "an", "attribute", "with", "empty", "quotes", "when", "there", "was", "no", "attribute", "before", "NUMBER", "Any", "objections", "yomed", "I", "don", "t", "know", "that", "this", "be", "a", "definitive", "test", "but", "here", "s", "what", "WAVE", "has", "to", "say", "LINK", "LINK", "It", "would", "seem", "that", "alt", "and", "alt", "be", "equivalent", "NUMBER", "I", "ve", "also", "seen", "recommendations", "for", "an", "image", "to", "be", "given", "empty", "null", "alternative", "text", "although", "they", "go", "on", "to", "show", "alt", "in", "examples", "NUMBER", "patrick", "steele", "idem", "What", "be", "your", "thoughts", "on", "leaving", "the", "current", "behavior", "for", "variables", "and", "leaving", "the", "empty", "string", "when", "it", "s", "specified", "as", "a", "string", "literal", "Although", "it", "might", "be", "useful", "to", "have", "the", "behavior", "from", "the", "table", "if", "you", "re", "generating", "a", "list", "of", "images", "from", "something", "like", "js", "src", "NUMBER", "png", "alt", "something", "src", "NUMBER", "png", "alt", "Though", "I", "d", "say", "chances", "be", "pretty", "good", "that", "given", "a", "list", "of", "images", "like", "this", "they", "should", "all", "have", "alt", "content", "or", "should", "all", "have", "an", "empty", "null", "alt", "NUMBER", "patrick", "steele", "idem", "What", "be", "your", "thoughts", "on", "leaving", "the", "current", "behavior", "for", "variables", "and", "leaving", "the", "empty", "string", "when", "it", "s", "specified", "as", "a", "string", "literal", "I", "would", "want", "things", "to", "be", "consistent", "regardless", "of", "whether", "or", "not", "the", "attribute", "value", "be", "a", "literal", "value", "or", "a", "dynamic", "expression", "NUMBER", "CC", "philidem", "mlrawlings", "tindli", "Thank", "you", "for", "the", "detailed", "write", "up", "nicolashery", "This", "seems", "completely", "doable", "with", "some", "tweak", "to", "the", "compiler", "and", "runtime", "NUMBER", "For", "example", "we", "would", "need", "to", "modify", "the", "FunctionDeclaration", "AST", "node", "to", "support", "extra", "type", "information", "for", "params", "NUMBER", "Personally", "I", "be", "not", "yet", "use", "TypeScript", "NUMBER", "I", "m", "not", "oppose", "to", "TypeScript", "but", "I", "also", "haven", "t", "had", "a", "strong", "desire", "to", "start", "use", "it", "NUMBER", "Because", "of", "that", "I", "may", "not", "be", "the", "best", "person", "to", "work", "on", "this", "NUMBER", "I", "would", "rather", "someone", "who", "be", "actively", "use", "TypeScript", "to", "do", "the", "code", "but", "I", "can", "definitely", "help", "point", "you", "in", "the", "right", "direction", "NUMBER", "As", "long", "as", "the", "code", "change", "be", "clean", "and", "well", "test", "then", "I", "have", "no", "objections", "to", "this", "proposal", "NUMBER", "Regarding", "open", "question", "Source", "maps", "error", "If", "a", "runtime", "error", "occur", "in", "the", "generate", "JS", "can", "we", "show", "the", "line", "in", "the", "NUMBER", "marko", "file", "that", "cause", "it", "That", "may", "be", "nice", "and", "I", "think", "that", "be", "also", "doable", "without", "drastic", "change", "NUMBER", "For", "example", "the", "compiler", "would", "need", "to", "attach", "source", "mappings", "to", "parsed", "expressions", "NUMBER", "It", "s", "definitely", "something", "I", "have", "thought", "about", "but", "we", "haven", "t", "had", "any", "time", "to", "come", "up", "with", "a", "formal", "proposal", "or", "implement", "it", "NUMBER", "With", "that", "said", "I", "have", "find", "source", "maps", "to", "be", "somewhat", "problematic", "and", "often", "end", "up", "disabling", "them", "e", "NUMBER", "g", "NUMBER", "when", "doing", "Atom", "plugin", "development", "with", "CoffeeScript", "NUMBER", "Instead", "we", "have", "focused", "on", "make", "sure", "the", "compiled", "output", "be", "extremely", "readable", "NUMBER", "For", "that", "reason", "support", "source", "maps", "has", "be", "a", "low", "priority", "NUMBER", "Editor", "integration", "A", "nice", "feature", "of", "TypeScript", "be", "the", "auto", "completion", "and", "real", "time", "type", "checking", "NUMBER", "Would", "it", "be", "feasible", "to", "have", "that", "directly", "in", "the", "the", "NUMBER", "marko", "file", "I", "would", "have", "to", "take", "a", "look", "at", "how", "TypeScript", "autocompletion", "works", "for", "other", "file", "but", "I", "suspect", "this", "will", "be", "challenging", "NUMBER", "Maybe", "the", "template", "can", "be", "compiled", "to", "TypeScript", "and", "source", "maps", "could", "be", "use", "to", "generate", "autocompletions", "as", "the", "user", "be", "editing", "the", "NUMBER", "marko", "file", "It", "seems", "like", "that", "would", "probably", "be", "too", "slow", "but", "maybe", "not", "NUMBER", "Please", "let", "me", "know", "if", "you", "be", "interested", "in", "contribute", "and", "we", "can", "discuss", "a", "plan", "of", "action", "NUMBER", "Any", "thoughts", "from", "others", "I", "think", "this", "will", "be", "possible", "once", "the", "change", "here", "be", "hashed", "out", "LINK", "NUMBER", "They", "be", "solving", "some", "angular", "NUMBER", "specific", "problem", "that", "should", "also", "make", "it", "easier", "to", "typecheck", "NUMBER", "marko", "file", "since", "they", "be", "pretty", "similar", "in", "structure", "NUMBER", "Hurtak", "this", "isn", "t", "actually", "a", "problem", "Marko", "can", "solve", "since", "putting", "dynamic", "values", "inside", "a", "TAG", "block", "be", "inherently", "unsafe", "NUMBER", "Wherever", "you", "be", "allowing", "user", "data", "to", "be", "inserted", "into", "a", "script", "block", "you", "should", "be", "use", "JSON", "NUMBER", "ringify", "to", "ensure", "that", "it", "be", "only", "data", "and", "not", "code", "xml", "TAG", "var", "x", "JSON", "NUMBER", "ringify", "data", "TAG", "In", "this", "case", "HTML", "escaping", "be", "disabled", "because", "encoded", "HTML", "entities", "be", "not", "decoded", "if", "they", "be", "inside", "TAG", "tags", "NUMBER", "However", "if", "the", "stringified", "data", "contains", "an", "ending", "TAG", "tag", "then", "that", "will", "prematurely", "end", "the", "TAG", "block", "so", "you", "need", "to", "do", "the", "following", "xml", "TAG", "var", "x", "JSON", "NUMBER", "ringify", "data", "NUMBER", "replace", "TAG", "With", "that", "said", "use", "TAG", "tags", "with", "dynamic", "code", "be", "still", "very", "dangerous", "NUMBER", "It", "s", "best", "to", "put", "user", "data", "into", "DOM", "attributes", "so", "that", "it", "be", "guaranteed", "not", "be", "executed", "NUMBER", "For", "example", "xml", "TAG", "The", "data", "can", "then", "be", "extracted", "from", "the", "DOM", "use", "code", "similar", "to", "the", "following", "var", "foo", "JSON", "NUMBER", "parse", "el", "NUMBER", "getAttribute", "data", "foo", "I", "m", "going", "to", "close", "this", "issue", "because", "it", "doesn", "t", "require", "any", "change", "to", "Marko", "but", "we", "should", "probably", "put", "together", "a", "more", "complete", "security", "guide", "NUMBER", "Hurtak", "also", "if", "you", "have", "any", "thoughts", "or", "suggestions", "on", "how", "we", "might", "be", "able", "to", "avoid", "the", "security", "problem", "associated", "with", "TAG", "tags", "please", "share", "NUMBER", "If", "we", "can", "provide", "a", "helper", "of", "some", "sort", "then", "that", "might", "not", "be", "a", "bad", "idea", "NUMBER", "Hurtak", "The", "escapejs", "filter", "that", "django", "provides", "be", "a", "little", "odd", "since", "it", "assumes", "that", "the", "character", "be", "escaped", "inside", "a", "JavaScript", "string", "but", "after", "giving", "it", "some", "thought", "that", "s", "probably", "an", "okay", "assumption", "NUMBER", "I", "think", "I", "m", "come", "around", "to", "escaping", "special", "HTML", "characters", "use", "the", "JavaScript", "string", "escape", "sequence", "in", "the", "context", "of", "a", "TAG", "block", "NUMBER", "It", "s", "definitely", "better", "than", "the", "current", "code", "that", "escapes", "special", "HTML", "characters", "inside", "TAG", "blocks", "use", "HTML", "entities", "which", "be", "absolutely", "not", "what", "we", "want", "NUMBER", "For", "example", "given", "the", "following", "template", "html", "TAG", "var", "foo", "JSON", "NUMBER", "ringify", "data", "NUMBER", "foo", "TAG", "And", "the", "given", "data", "javascript", "foo", "name", "Evil", "TAG", "The", "output", "be", "currently", "the", "following", "html", "TAG", "var", "foo", "name", "Evil", "lt", "script", "TAG", "browsers", "do", "not", "decode", "HTML", "entities", "inside", "TAG", "blocks", "NUMBER", "TAG", "tags", "be", "special", "The", "output", "should", "be", "the", "following", "html", "TAG", "var", "foo", "name", "Evil", "u", "NUMBER", "C", "script", "TAG", "I", "m", "going", "to", "reopen", "this", "issue", "and", "investigate", "a", "proper", "fix", "NUMBER", "Thanks", "for", "open", "this", "issue", "and", "thank", "you", "for", "your", "persistence", "New", "version", "publish", "marko", "NUMBER", "See", "CHANGELOG", "NUMBER", "MD", "LINK", "js", "marko", "blob", "master", "CHANGELOG", "NUMBER", "md", "NUMBER", "for", "a", "longer", "description", "of", "what", "exactly", "change", "yomed", "With", "this", "fix", "in", "place", "be", "there", "still", "any", "reason", "to", "avoid", "putting", "data", "in", "inline", "scripts", "This", "was", "do", "in", "preparation", "for", "support", "CSP", "NUMBER", "However", "as", "long", "as", "we", "put", "a", "CSP", "nonce", "attribute", "on", "the", "inline", "TAG", "tag", "then", "we", "be", "still", "able", "to", "use", "inline", "TAG", "tags", "NUMBER", "In", "a", "future", "version", "of", "Marko", "Widgets", "we", "plan", "on", "switching", "to", "use", "TAG", "tags", "to", "pass", "data", "down", "to", "the", "browser", "for", "performance", "reasons", "NUMBER", "So", "to", "answer", "your", "question", "no", "there", "be", "no", "good", "reason", "to", "avoid", "putting", "data", "in", "inline", "script", "tags", "NUMBER", "Looks", "good", "NUMBER", "Thanks", "Thanks", "for", "the", "improvement", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "see", "any", "other", "issue", "NUMBER", "Thanks", "again", "NUMBER", "Hey", "thomastorfs", "thanks", "for", "report", "the", "problem", "NUMBER", "I", "m", "going", "to", "see", "if", "I", "can", "reproduce", "but", "if", "you", "could", "provide", "more", "details", "that", "would", "be", "great", "NUMBER", "I", "suspect", "you", "be", "seeing", "this", "issue", "because", "there", "be", "multiple", "instances", "of", "marko", "be", "loaded", "at", "runtime", "and", "each", "instance", "be", "be", "configured", "independently", "NUMBER", "This", "could", "happen", "if", "you", "have", "different", "version", "of", "marko", "be", "use", "in", "your", "project", "and", "that", "would", "prevent", "de", "duping", "from", "happening", "when", "installing", "the", "node", "modules", "NUMBER", "Do", "you", "see", "multiple", "lines", "for", "marko", "when", "you", "run", "npm", "list", "In", "either", "case", "I", "decided", "to", "make", "the", "Marko", "configuration", "a", "true", "singleton", "by", "attaching", "it", "to", "the", "global", "scope", "NUMBER", "This", "may", "or", "may", "not", "solve", "your", "problem", "depending", "on", "which", "version", "of", "marko", "be", "be", "loaded", "in", "your", "project", "but", "once", "you", "be", "use", "only", "the", "latest", "version", "then", "it", "should", "fix", "the", "issue", "in", "the", "situation", "that", "there", "be", "multiple", "instances", "of", "marko", "be", "loaded", "NUMBER", "thomastorfs", "aaronshaf", "would", "either", "of", "you", "be", "able", "to", "share", "a", "minimal", "project", "to", "reproduce", "the", "problem", "I", "was", "not", "able", "to", "reproduce", "the", "problem", "NUMBER", "Thanks", "jasonmacdonald", "thanks", "for", "digging", "in", "and", "figuring", "out", "the", "issue", "NUMBER", "I", "don", "t", "see", "any", "harm", "with", "passing", "along", "the", "configuration", "provide", "when", "calling", "require", "marko", "node", "require", "NUMBER", "install", "config", "NUMBER", "to", "require", "marko", "compiler", "NUMBER", "configure", "NUMBER", "NUMBER", "This", "would", "make", "the", "configuration", "truly", "global", "as", "expected", "NUMBER", "NOTE", "You", "should", "not", "be", "referencing", "global", "NUMBER", "__MARKO_CONFIG", "in", "your", "code", "since", "that", "be", "an", "implementation", "detail", "that", "could", "change", "in", "the", "future", "NUMBER", "Fixes", "NUMBER", "Remove", "hyphens", "from", "include", "props", "Deprecated", "Properties", "pass", "in", "use", "the", "TAG", "tag", "should", "not", "be", "access", "use", "hyphens", "NUMBER", "For", "example", "given", "the", "following", "template", "xml", "TAG", "The", "first", "name", "data", "should", "be", "accessed", "use", "the", "firstName", "property", "javascript", "var", "firstName", "input", "NUMBER", "firstName", "NOT", "var", "firstName", "input", "first", "name", "Looks", "good", "patrick", "steele", "idem", "and", "I", "have", "discussed", "add", "a", "tag", "to", "marko", "s", "core", "that", "handles", "streaming", "in", "an", "elegant", "way", "NUMBER", "The", "syntax", "that", "we", "re", "looking", "at", "be", "the", "TAG", "tag", "xml", "TAG", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "TAG", "We", "d", "also", "support", "a", "more", "verbose", "syntax", "for", "generic", "EventEmitters", "xml", "TAG", "Note", "TAG", "was", "considered", "but", "it", "would", "complicate", "the", "looping", "logic", "of", "regular", "for", "loops", "and", "require", "the", "stream", "logic", "to", "be", "present", "even", "for", "template", "that", "never", "make", "use", "of", "it", "NUMBER", "We", "need", "something", "that", "be", "syntactically", "different", "so", "we", "can", "distinguish", "at", "compile", "time", "NUMBER", "Note", "NUMBER", "we", "also", "considered", "TAG", "and", "TAG", "however", "TAG", "has", "the", "benefit", "of", "make", "sense", "when", "use", "with", "any", "EventEmitter", "NUMBER", "In", "many", "ways", "the", "TAG", "tag", "will", "be", "similar", "to", "the", "TAG", "tag", "previously", "TAG", "LINK", "js", "marko", "pull", "NUMBER", "however", "the", "TAG", "tag", "will", "also", "flush", "multiple", "times", "throughout", "it", "s", "rendering", "cycle", "NUMBER", "There", "be", "a", "tradeoff", "to", "consider", "around", "flushing", "NUMBER", "If", "we", "flush", "after", "each", "iteration", "content", "will", "be", "push", "to", "the", "browser", "sooner", "but", "if", "we", "buffer", "a", "few", "iterations", "and", "gzip", "be", "enable", "the", "resulting", "payload", "will", "be", "smaller", "NUMBER", "We", "need", "a", "good", "default", "for", "flushing", "and", "an", "easy", "intuitive", "way", "to", "configure", "it", "NUMBER", "We", "also", "need", "to", "figure", "out", "what", "should", "be", "provide", "by", "the", "tag", "and", "what", "interesting", "use", "cases", "we", "want", "to", "support", "NUMBER", "One", "that", "comes", "to", "mind", "immediately", "be", "infinite", "scrolling", "NUMBER", "All", "that", "said", "here", "be", "my", "propose", "set", "of", "attributes", "for", "the", "TAG", "tag", "var", "parsed", "from", "the", "argument", "the", "variable", "to", "be", "use", "inside", "the", "body", "of", "the", "tag", "event", "parsed", "from", "the", "argument", "the", "name", "of", "the", "event", "to", "listen", "to", "defaults", "to", "data", "endEvent", "parsed", "from", "the", "argument", "the", "name", "of", "the", "event", "that", "signifies", "the", "end", "of", "the", "loop", "defaults", "to", "end", "data", "provider", "parsed", "from", "the", "argument", "the", "stream", "or", "emitter", "we", "re", "listening", "to", "name", "the", "name", "of", "the", "TAG", "tag", "NUMBER", "use", "for", "debugging", "and", "the", "show", "after", "attribute", "FUTURE", "client", "reorder", "the", "TAG", "tag", "will", "not", "block", "the", "rest", "of", "the", "page", "JS", "be", "required", "on", "client", "FUTURE", "show", "after", "when", "client", "reorder", "be", "set", "to", "true", "then", "display", "this", "instance", "s", "content", "will", "be", "delayed", "until", "the", "referenced", "TAG", "or", "TAG", "instance", "be", "shown", "NUMBER", "buffer", "count", "how", "many", "iterations", "of", "the", "TAG", "tag", "to", "buffer", "before", "flushing", "buffer", "duration", "if", "the", "time", "since", "the", "last", "flush", "be", "greater", "than", "the", "buffer", "duration", "then", "the", "TAG", "tag", "will", "flush", "its", "buffer", "regardless", "of", "the", "current", "buffer", "count", "timeout", "if", "the", "time", "since", "the", "last", "chunk", "of", "data", "was", "emitted", "be", "greater", "than", "the", "timeout", "then", "the", "TAG", "tag", "will", "timeout", "total", "timeout", "if", "the", "time", "since", "the", "rendering", "start", "be", "greater", "than", "the", "total", "timeout", "then", "the", "TAG", "tag", "will", "timeout", "error", "message", "a", "message", "that", "be", "shown", "if", "the", "stream", "emits", "an", "error", "timeout", "message", "a", "message", "that", "be", "shown", "if", "the", "stream", "times", "out", "FUTURE", "placeholder", "message", "a", "message", "that", "be", "shown", "while", "the", "TAG", "tag", "be", "streaming", "empty", "message", "a", "message", "that", "be", "shown", "if", "the", "stream", "ends", "without", "emitting", "data", "finish", "message", "a", "message", "that", "be", "shown", "when", "if", "the", "stream", "completes", "successfully", "Also", "we", "ll", "provide", "TAG", "TAG", "TAG", "TAG", "and", "TAG", "as", "alternatives", "message", "attributes", "NUMBER", "Example", "time", "Let", "s", "say", "we", "want", "to", "create", "a", "list", "that", "has", "a", "few", "users", "in", "it", "and", "a", "button", "to", "load", "more", "users", "NUMBER", "Those", "users", "come", "from", "some", "service", "call", "NUMBER", "With", "TAG", "we", "d", "do", "something", "like", "this", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "user", "NUMBER", "handle", "TAG", "TAG", "TAG", "TAG", "TAG", "load", "more", "TAG", "TAG", "In", "this", "case", "the", "placeholder", "card", "would", "spin", "until", "the", "data", "gets", "back", "from", "the", "service", "call", "then", "we", "render", "the", "user", "cards", "and", "load", "more", "button", "and", "replace", "the", "placeholder", "with", "these", "NUMBER", "With", "TAG", "and", "a", "stream", "we", "could", "do", "this", "instead", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "user", "NUMBER", "handle", "TAG", "TAG", "TAG", "TAG", "TAG", "load", "more", "TAG", "TAG", "TAG", "In", "this", "case", "the", "placeholder", "would", "spin", "until", "all", "user", "cards", "have", "loaded", "NUMBER", "As", "each", "user", "be", "emitted", "by", "the", "stream", "a", "user", "card", "would", "be", "rendered", "and", "inserted", "right", "before", "the", "loading", "card", "NUMBER", "Once", "all", "user", "cards", "were", "loaded", "the", "load", "more", "button", "would", "be", "display", "and", "the", "placeholder", "remove", "NUMBER", "Here", "s", "a", "mockup", "LINK", "of", "the", "difference", "NUMBER", "More", "thoughts", "It", "might", "be", "useful", "be", "able", "to", "see", "what", "iteration", "you", "re", "on", "like", "the", "TAG", "tag", "s", "status", "var", "NUMBER", "Each", "time", "through", "the", "status", "var", "would", "contain", "the", "current", "iteration", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "On", "the", "end", "event", "the", "status", "var", "would", "contain", "the", "number", "of", "iterations", "similar", "to", "the", "way", "things", "work", "in", "a", "native", "for", "loop", "js", "for", "var", "i", "NUMBER", "i", "TAG", "TAG", "TAG", "NUMBER", "We", "timed", "out", "but", "at", "least", "we", "get", "some", "data", "TAG", "TAG", "We", "timed", "out", "and", "get", "nothing", "NUMBER", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "In", "the", "same", "way", "it", "remove", "the", "need", "for", "empty", "message", "This", "sounds", "great", "We", "would", "be", "able", "to", "use", "this", "right", "away", "NUMBER", "We", "re", "basically", "doing", "this", "manually", "in", "a", "renderer", "NUMBER", "js", "file", "ourselves", "now", "but", "this", "be", "much", "cleaner", "and", "doesn", "t", "require", "us", "to", "expose", "all", "the", "out", "NUMBER", "beginAsync", "stuff", "to", "create", "our", "own", "stream", "NUMBER", "Are", "there", "any", "strong", "feelings", "in", "make", "this", "a", "separate", "tag", "Would", "it", "make", "sense", "to", "just", "have", "TAG", "accept", "a", "stream", "in", "addition", "to", "promises", "and", "callbacks", "Or", "do", "that", "have", "mostly", "to", "do", "with", "the", "terminology", "of", "await", "in", "ES", "NUMBER", "scttdavs", "The", "main", "difference", "be", "in", "passing", "a", "stream", "to", "TAG", "you", "would", "need", "to", "buffer", "the", "stream", "until", "it", "completes", "where", "as", "TAG", "s", "body", "would", "be", "call", "every", "time", "a", "data", "event", "was", "emitted", "from", "the", "stream", "and", "could", "flush", "out", "multiple", "times", "NUMBER", "I", "actually", "just", "throw", "something", "together", "LINK", "on", "tag", "this", "afternoon", "because", "another", "team", "at", "eBay", "was", "ask", "about", "this", "NUMBER", "It", "doesn", "t", "have", "any", "of", "the", "timeout", "placeholder", "buffering", "flushing", "etc", "NUMBER", "in", "place", "but", "it", "s", "a", "good", "starting", "point", "NUMBER", "I", "probably", "won", "t", "have", "time", "to", "revisit", "this", "for", "a", "little", "while", "so", "if", "you", "re", "interested", "in", "work", "on", "this", "that", "would", "be", "awesome", "cc", "rajaramu", "on", "the", "aforementioned", "team", "at", "eBay", "I", "think", "there", "s", "enough", "differences", "between", "handle", "a", "Promise", "vs", "a", "ReadableStream", "EventEmitter", "that", "it", "makes", "sense", "to", "keep", "the", "tags", "separate", "and", "I", "think", "it", "will", "make", "things", "less", "confusing", "and", "easier", "to", "document", "NUMBER", "I", "could", "be", "wrong", "though", "and", "I", "might", "be", "convinced", "that", "TAG", "could", "be", "extend", "to", "support", "both", "a", "Promise", "that", "gets", "flushed", "once", "when", "resolve", "versus", "a", "ReadableStream", "EventEmitter", "that", "will", "flush", "for", "every", "event", "NUMBER", "We", "still", "need", "to", "finalize", "this", "proposal", "before", "doing", "any", "work", "so", "if", "you", "have", "any", "thoughts", "on", "usage", "please", "share", "NUMBER", "I", "kind", "of", "like", "that", "implementation", "too", "NUMBER", "One", "concern", "I", "would", "have", "be", "that", "there", "s", "no", "clear", "way", "to", "use", "TAG", "from", "Michael", "s", "example", "or", "any", "of", "the", "other", "sub", "tags", "NUMBER", "I", "think", "TAG", "in", "particular", "be", "important", "because", "given", "his", "example", "linked", "above", "the", "one", "of", "a", "load", "more", "button", "below", "the", "users", "NUMBER", "What", "if", "it", "be", "not", "know", "whether", "there", "be", "more", "users", "to", "load", "until", "data", "from", "the", "stream", "comes", "in", "In", "which", "case", "you", "may", "need", "a", "load", "more", "button", "or", "may", "not", "NUMBER", "So", "be", "able", "to", "render", "it", "after", "the", "steam", "ends", "when", "that", "information", "be", "available", "would", "solve", "that", "NUMBER", "I", "ll", "throw", "out", "another", "proposal", "xml", "TAG", "TAG", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "TAG", "TAG", "mlrawlings", "philidem", "tindli", "austinkelleher", "Hesulan", "scttdavs", "should", "we", "go", "forward", "with", "use", "TAG", "with", "nested", "TAG", "tags", "see", "above", "patrick", "steele", "idem", "I", "like", "that", "syntax", "a", "lot", "NUMBER", "patrick", "steele", "idem", "I", "like", "the", "new", "proposal", "especially", "reusing", "with", "TAG", "since", "the", "use", "cases", "seem", "so", "similar", "NUMBER", "So", "given", "that", "example", "and", "the", "new", "nested", "tag", "feature", "which", "be", "do", "now", "would", "it", "look", "like", "html", "TAG", "TAG", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "how", "be", "content", "here", "handle", "TAG", "TAG", "I", "also", "had", "a", "question", "in", "the", "comment", "above", "There", "s", "the", "potential", "argument", "against", "TAG", "because", "it", "would", "need", "to", "be", "transformed", "TAG", "would", "get", "transformed", "to", "TAG", "which", "would", "generate", "code", "like", "js", "on", "event", "data", "renderBody", "function", "out", "user", "out", "NUMBER", "w", "TAG", "escapeXML", "user", "NUMBER", "name", "TAG", "scttdavs", "The", "rules", "around", "content", "outside", "tags", "be", "a", "little", "weird", "NUMBER", "Anything", "outside", "an", "tag", "will", "come", "through", "as", "input", "NUMBER", "renderBody", "except", "if", "there", "be", "dynamic", "tags", "in", "which", "case", "renderBody", "be", "run", "and", "the", "tags", "register", "themselves", "on", "the", "parent", "and", "in", "that", "case", "no", "content", "output", "be", "allow", "in", "the", "renderBody", "NUMBER", "In", "the", "case", "of", "the", "TAG", "TAG", "combination", "renderBody", "would", "_not_", "be", "call", "NUMBER", "We", "should", "probably", "throw", "an", "error", "in", "that", "case", "NUMBER", "_This", "_", "xml", "TAG", "Hello", "user", "NUMBER", "name", "TAG", "_becomes", "this", "_", "xml", "TAG", "Hello", "user", "NUMBER", "name", "TAG", "Tag", "change", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "A", "transform", "be", "provide", "that", "will", "transform", "the", "async", "fragment", "version", "of", "these", "tags", "to", "the", "await", "version", "so", "nothing", "will", "actually", "break", "but", "a", "deprecation", "message", "will", "be", "logged", "to", "the", "console", "during", "template", "compilation", "NUMBER", "This", "be", "primarily", "a", "syntax", "change", "NUMBER", "All", "tag", "attributes", "remain", "the", "same", "except", "that", "var", "and", "data", "provider", "be", "now", "specified", "in", "the", "TAG", "tag", "s", "argument", "NUMBER", "Event", "change", "asyncFragmentBegin", "await", "begin", "asyncFragmentBeforeRender", "await", "beforeRender", "asyncFragmentFinish", "await", "finish", "asyncFragmentClientReorder", "await", "clientReorder", "The", "async", "fragment", "version", "of", "these", "events", "be", "still", "emitted", "so", "as", "to", "not", "immediately", "break", "modules", "that", "make", "use", "of", "these", "events", "NUMBER", "Those", "libraries", "should", "begin", "to", "migrate", "as", "we", "ll", "likely", "remove", "the", "duplicate", "events", "at", "some", "point", "NUMBER", "I", "forgot", "to", "mention", "Currently", "the", "output", "JS", "looks", "something", "like", "this", "js", "NUMBER", "await", "__loadTag", "require", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "taglibs", "async", "await", "tag", "NUMBER", "await", "dataProvider", "data", "NUMBER", "userDataProvider", "_name", "data", "NUMBER", "userDataProvider", "renderBody", "function", "renderBody", "out", "user", "out", "NUMBER", "w", "TAG", "Hello", "escapeXml", "user", "NUMBER", "name", "TAG", "out", "NUMBER", "and", "while", "this", "actually", "works", "I", "m", "not", "thrilled", "about", "await", "be", "use", "as", "a", "variable", "function", "name", "NUMBER", "We", "could", "probably", "utilize", "a", "list", "of", "reserved", "words", "LINK", "and", "append", "Tag", "to", "custom", "tags", "that", "match", "an", "item", "in", "that", "list", "NUMBER", "In", "this", "case", "we", "d", "have", "awaitTag", "out", "NUMBER", "Very", "nice", "and", "much", "cleaner", "NUMBER", "Thanks", "for", "work", "on", "this", "The", "only", "thing", "that", "kind", "of", "bothers", "me", "be", "the", "from", "keyword", "NUMBER", "it", "works", "but", "just", "want", "to", "make", "sure", "we", "explore", "all", "syntax", "options", "what", "be", "your", "thoughts", "on", "reversing", "the", "syntax", "xml", "TAG", "Hello", "user", "NUMBER", "name", "TAG", "I", "read", "that", "as", "await", "on", "data", "NUMBER", "userDataProvider", "and", "store", "the", "result", "as", "the", "user", "variable", "NUMBER", "It", "also", "be", "a", "little", "closer", "to", "the", "actual", "JavaScript", "syntax", "where", "await", "be", "in", "front", "of", "the", "expression", "that", "produces", "the", "Promise", "javascript", "var", "user", "await", "data", "NUMBER", "userDataProvider", "of", "course", "in", "JavaScript", "the", "variable", "be", "on", "the", "left", "hand", "side", "NUMBER", "I", "could", "probably", "go", "either", "way", "but", "just", "wanted", "to", "throw", "the", "alternate", "option", "out", "there", "NUMBER", "What", "do", "you", "think", "Both", "make", "sense", "when", "you", "read", "them", "as", "a", "sentence", "await", "user", "from", "theUserDataProvider", "await", "theUserDataProvider", "as", "user", "from", "has", "the", "benefit", "of", "the", "variable", "name", "be", "to", "the", "left", "of", "the", "statement", "which", "be", "closer", "to", "for", "loops", "and", "assignments", "where", "as", "as", "has", "the", "benefit", "as", "you", "said", "of", "keep", "await", "closer", "to", "the", "provider", "that", "it", "be", "awaiting", "which", "be", "how", "it", "s", "do", "in", "JS", "NUMBER", "I", "m", "kinda", "leaning", "towards", "from", "but", "it", "may", "be", "just", "cause", "it", "s", "what", "I", "ve", "had", "in", "my", "head", "while", "thinking", "about", "this", "NUMBER", "what", "do", "tindli", "philidem", "and", "the", "rest", "of", "the", "community", "think", "as", "_is_", "two", "characters", "shorter", "than", "from", "NUMBER", "So", "after", "thinking", "about", "this", "a", "bit", "more", "I", "ve", "come", "to", "the", "conclusion", "that", "I", "m", "not", "so", "much", "awaiting", "the", "promise", "because", "I", "already", "have", "the", "promise", "NUMBER", "I", "m", "awaiting", "what", "I", "get", "when", "the", "promise", "be", "fulfilled", "NUMBER", "In", "our", "example", "the", "userDataProvider", "be", "just", "an", "means", "to", "an", "end", "NUMBER", "The", "only", "reason", "I", "care", "about", "the", "userDataProvider", "be", "that", "it", "will", "eventually", "give", "me", "the", "user", "NUMBER", "The", "user", "be", "what", "I", "really", "want", "NUMBER", "I", "be", "awaiting", "the", "user", "NUMBER", "If", "I", "could", "I", "d", "simply", "write", "xml", "TAG", "But", "that", "doesn", "t", "give", "enough", "information", "NUMBER", "TAG", "doesn", "t", "know", "where", "the", "user", "comes", "from", "NUMBER", "xml", "TAG", "Ah", "NUMBER", "Okay", "it", "comes", "from", "the", "userDataProvider", "NUMBER", "Now", "TAG", "can", "get", "me", "my", "user", "NUMBER", "Also", "all", "feedback", "has", "either", "be", "neutral", "or", "in", "favor", "of", "the", "from", "syntax", "NUMBER", "Let", "s", "go", "with", "from", "NUMBER", "mlrawlings", "Let", "s", "go", "with", "from", "NUMBER", "Sounds", "good", "to", "me", "NUMBER", "I", "ll", "be", "spending", "a", "little", "more", "time", "reviewing", "and", "will", "publish", "a", "new", "version", "soon", "NUMBER", "In", "the", "meantime", "would", "you", "be", "interested", "in", "update", "the", "migration", "tool", "to", "migrate", "to", "the", "new", "await", "syntax", "from", "Marko", "v", "NUMBER", "We", "should", "also", "consider", "make", "the", "migration", "tool", "a", "little", "smarter", "to", "look", "at", "the", "version", "of", "marko", "install", "to", "determine", "how", "the", "code", "should", "be", "parsed", "and", "migrated", "NUMBER", "Hey", "darkwebdev", "just", "wanted", "to", "say", "that", "I", "haven", "t", "had", "a", "chance", "to", "investigate", "since", "I", "was", "out", "of", "the", "office", "this", "past", "week", "NUMBER", "I", "hope", "to", "investigate", "this", "a", "little", "later", "this", "week", "NUMBER", "Thanks", "for", "report", "the", "problem", "and", "thanks", "for", "your", "patience", "Fixed", "NUMBER", "See", "LINK", "js", "marko", "widgets", "issue", "NUMBER", "Thanks", "for", "report", "the", "problem", "Great", "NUMBER", "Thank", "you", "Thanks", "for", "the", "improvement", "oxala", "New", "version", "publish", "marko", "NUMBER", "If", "you", "get", "a", "chance", "do", "you", "mind", "update", "the", "following", "docs", "LINK", "js", "marko", "blob", "master", "docs", "custom", "taglibs", "NUMBER", "md", "Thanks", "again", "Only", "set", "prevClassName", "when", "the", "className", "has", "be", "push", "to", "finalClassNames", "otherwise", "future", "className", "values", "will", "be", "appended", "to", "a", "class", "that", "doesn", "t", "get", "include", "in", "the", "final", "output", "NUMBER", "This", "effectively", "limits", "the", "number", "of", "classes", "to", "NUMBER", "Thanks", "for", "the", "fix", "New", "version", "publish", "marko", "NUMBER", "An", "attribute", "value", "needs", "to", "always", "follow", "the", "rules", "of", "JavaScript", "parsing", "NUMBER", "Unfortunately", "that", "do", "introduce", "some", "deviation", "from", "the", "HTML", "spec", "NUMBER", "However", "Marko", "be", "not", "use", "an", "HTML", "parser", "but", "rather", "the", "HTMLJS", "LINK", "parser", "parser", "and", "the", "HTMLJS", "parser", "always", "parses", "an", "attribute", "value", "as", "a", "JavaScript", "expression", "NUMBER", "We", "would", "not", "want", "to", "special", "case", "various", "attributes", "since", "that", "would", "makes", "things", "problematic", "NUMBER", "It", "might", "be", "helpful", "to", "think", "of", "it", "has", "having", "to", "write", "JavaScript", "code", "to", "set", "an", "HTML", "value", "javascript", "var", "input", "document", "NUMBER", "createElement", "input", "input", "NUMBER", "setAttribute", "pattern", "w", "NUMBER", "NUMBER", "Note", "that", "the", "backslash", "character", "needs", "to", "be", "escaped", "NUMBER", "Hope", "that", "answer", "satisfies", "your", "issue", "but", "please", "let", "me", "know", "if", "not", "NUMBER", "I", "understand", "the", "underlying", "issue", "NUMBER", "But", "my", "opinion", "be", "that", "when", "write", "HTML", "within", "the", "template", "we", "shouldn", "t", "have", "to", "remember", "no", "this", "isn", "t", "really", "HTML", "it", "s", "an", "escaped", "JavaScript", "string", "NUMBER", "I", "definitely", "understand", "where", "you", "be", "come", "from", "NUMBER", "To", "keep", "things", "simple", "we", "want", "to", "only", "support", "one", "way", "of", "parsing", "things", "and", "find", "that", "JavaScript", "expressions", "were", "a", "much", "better", "fit", "for", "attribute", "values", "NUMBER", "The", "only", "thing", "that", "you", "need", "to", "remember", "be", "that", "the", "right", "hand", "side", "of", "an", "attribute", "value", "be", "always", "a", "JavaScript", "expression", "at", "least", "it", "be", "consistent", "NUMBER", "I", "think", "a", "solution", "to", "this", "and", "probably", "other", "cases", "would", "be", "to", "have", "a", "TAG", "TAG", "Marko", "directive", "NUMBER", "We", "could", "in", "theory", "introduce", "a", "new", "syntax", "to", "break", "out", "of", "the", "rules", "of", "standard", "JavaScript", "parsing", "for", "an", "attribute", "value", "to", "support", "a", "raw", "value", "but", "that", "would", "introduce", "more", "complexity", "and", "likely", "very", "little", "gain", "NUMBER", "Hypothetically", "we", "could", "support", "triple", "quotes", "borrowed", "from", "CoffeeScript", "or", "something", "random", "xml", "TAG", "Do", "you", "think", "that", "be", "worth", "considering", "I", "m", "leaning", "towards", "no", "because", "I", "want", "to", "keep", "the", "syntax", "rules", "simple", "but", "I", "be", "open", "to", "the", "idea", "if", "there", "be", "enough", "interest", "NUMBER", "cc", "philidem", "mlrawlings", "tindli", "Thoughts", "I", "m", "not", "sure", "add", "something", "that", "deviates", "further", "from", "html", "or", "anything", "else", "to", "get", "back", "to", "html", "really", "makes", "sense", "NUMBER", "My", "biggest", "concern", "be", "that", "someone", "new", "to", "marko", "may", "not", "realize", "wha", "the", "issue", "be", "with", "the", "error", "presented", "NUMBER", "Given", "that", "it", "s", "a", "pretty", "standard", "js", "error", "maybe", "this", "isn", "t", "really", "a", "concern", "NUMBER", "It", "might", "be", "worth", "it", "if", "we", "could", "point", "out", "this", "difference", "in", "parsing", "when", "it", "comes", "up", "though", "NUMBER", "I", "do", "understand", "not", "wanting", "to", "double", "escape", "NUMBER", "It", "s", "a", "pain", "when", "you", "have", "to", "use", "strings", "to", "pass", "to", "new", "RegExp", "too", "NUMBER", "For", "this", "specific", "case", "I", "think", "it", "would", "be", "nice", "to", "be", "able", "to", "use", "a", "js", "regex", "as", "the", "value", "we", "d", "have", "to", "remove", "the", "beginning", "and", "ending", "after", "calling", "NUMBER", "toString", "coffeescript", "TAG", "Are", "there", "other", "attributes", "other", "than", "pattern", "that", "might", "parse", "unexpectedly", "If", "we", "want", "to", "change", "the", "way", "strings", "be", "parsed", "the", "only", "thing", "I", "think", "we", "should", "consider", "be", "change", "the", "default", "NUMBER", "The", "only", "change", "worth", "make", "be", "one", "that", "allows", "you", "to", "paste", "in", "valid", "HTML", "without", "any", "change", "otherwise", "it", "s", "easier", "to", "explain", "strings", "be", "JS", "strings", "rather", "than", "introduce", "additional", "syntax", "NUMBER", "However", "I", "m", "not", "sure", "this", "be", "a", "good", "idea", "NUMBER", "As", "to", "what", "other", "attributes", "this", "might", "affect", "I", "guess", "the", "better", "question", "be", "where", "do", "the", "HTML", "attribute", "string", "spec", "deviate", "from", "the", "JS", "string", "spec", "Is", "it", "just", "that", "needs", "to", "be", "escaped", "or", "be", "there", "other", "differences", "One", "probably", "bad", "thought", "attempt", "to", "parse", "as", "JS", "value", "and", "if", "that", "fail", "fall", "back", "to", "the", "HTML", "way", "of", "parsing", "attributes", "NUMBER", "Adds", "additional", "event", "info", "finished", "timedout", "to", "the", "data", "emitted", "from", "TAG", "tags", "NUMBER", "Ensures", "that", "renderBody", "be", "not", "call", "again", "if", "the", "fragment", "has", "already", "finished", "timed", "out", "NUMBER", "Fixes", "npm", "run", "test", "async", "Removes", "a", "redundant", "async", "fragment", "timeout", "relate", "test", "Thanks", "for", "the", "PR", "New", "version", "publish", "with", "fix", "improvement", "marko", "NUMBER", "Still", "need", "to", "back", "port", "to", "Marko", "v", "NUMBER", "Fix", "back", "ported", "to", "Marko", "v", "NUMBER", "New", "version", "of", "Marko", "v", "NUMBER", "publish", "marko", "async", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "still", "see", "any", "issue", "NUMBER", "Thanks", "Adds", "coverage", "report", "through", "istanbul", "and", "coveralls", "NUMBER", "We", "ll", "need", "to", "set", "up", "marko", "on", "coveralls", "LINK", "but", "it", "s", "a", "pretty", "painless", "process", "NUMBER", "Awesome", "Thank", "you", "for", "taking", "the", "time", "to", "do", "that", "NUMBER", "I", "have", "finished", "setting", "up", "coveralls", "and", "now", "we", "have", "a", "work", "badge", "NUMBER", "Thanks", "again", "Did", "you", "consider", "use", "include", "all", "sources", "in", "the", "istanbul", "command", "for", "coverage", "against", "the", "whole", "codebase", "yomed", "Would", "you", "be", "interested", "in", "trying", "that", "out", "to", "see", "if", "it", "makes", "the", "coverage", "more", "accurate", "Thanks", "for", "the", "PR", "mlrawlings", "New", "version", "publish", "with", "improvement", "marko", "NUMBER", "Hey", "cantoine", "loaded", "template", "be", "stored", "in", "the", "Node", "NUMBER", "js", "require", "cache", "NUMBER", "Marko", "support", "hot", "reloading", "functionality", "but", "you", "need", "to", "provide", "a", "file", "watcher", "or", "use", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "NUMBER", "I", "recommend", "taking", "a", "look", "at", "browser", "refresh", "you", "will", "get", "hot", "reloading", "for", "free", "on", "the", "server", "and", "in", "the", "browser", "if", "you", "launch", "your", "app", "use", "browser", "refresh", "NUMBER", "If", "you", "don", "t", "want", "to", "use", "browser", "refresh", "please", "see", "the", "following", "sample", "app", "LINK", "js", "samples", "marko", "hot", "reload", "Please", "let", "me", "know", "if", "you", "still", "have", "question", "NUMBER", "Thanks", "for", "the", "fix", "to", "the", "docs", "I", "ll", "publish", "a", "new", "version", "of", "the", "site", "now", "NUMBER", "Great", "thank", "you", "I", "ll", "publish", "the", "new", "docs", "now", "NUMBER", "When", "use", "TAG", "tag", "like", "so", "TAG", "if", "deferred", "NUMBER", "marko", "has", "a", "widget", "bound", "to", "it", "in", "the", "w", "bind", "attribute", "the", "widget", "NUMBER", "js", "be", "not", "registered", "and", "invoked", "NUMBER", "I", "would", "not", "expect", "that", "to", "be", "the", "case", "NUMBER", "Would", "it", "be", "possible", "to", "set", "up", "a", "simple", "project", "to", "reproduce", "the", "problem", "Or", "could", "provide", "more", "details", "on", "your", "setup", "sidsakhadeo", "be", "this", "still", "an", "issue", "for", "you", "Closing", "this", "issue", "NUMBER", "If", "this", "be", "still", "an", "issue", "in", "v", "NUMBER", "feel", "free", "to", "reopen", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Thanks", "It", "doesn", "t", "look", "to", "be", "a", "problem", "in", "browser", "NUMBER", "json", "NUMBER", "The", "error", "be", "originally", "throw", "by", "the", "html", "js", "parser", "use", "by", "marko", "LINK", "parser", "blob", "master", "Parser", "NUMBER", "js", "L", "NUMBER", "sanjeevashrivastava", "Are", "you", "use", "an", "older", "version", "of", "marko", "htmljs", "parser", "I", "be", "not", "able", "to", "reproduce", "the", "problem", "use", "your", "exact", "template", "NUMBER", "Are", "you", "use", "an", "npm", "strinkwrap", "NUMBER", "json", "that", "be", "locking", "your", "app", "to", "older", "version", "of", "npm", "dependencies", "That", "s", "really", "bizarre", "NUMBER", "That", "be", "the", "latest", "version", "of", "htmljs", "parser", "and", "I", "be", "not", "able", "to", "reproduce", "with", "the", "exact", "version", "NUMBER", "Can", "you", "please", "attach", "your", "template", "file", "to", "this", "Github", "issue", "I", "m", "wondering", "if", "there", "be", "some", "Windows", "vs", "Unix", "line", "ending", "differences", "that", "be", "cause", "problem", "NUMBER", "I", "m", "still", "not", "able", "to", "reproduce", "NUMBER", "It", "looks", "like", "the", "parser", "be", "reading", "the", "string", "too", "far", "for", "you", "it", "s", "going", "past", "the", "ending", "quote", "for", "the", "string", "NUMBER", "I", "see", "no", "reason", "for", "this", "to", "happen", "and", "the", "test", "I", "add", "be", "passing", "NUMBER", "sanjeevashrivastava", "do", "you", "mind", "spending", "some", "more", "time", "trying", "to", "isolate", "the", "problem", "Some", "things", "to", "try", "Put", "a", "space", "after", "the", "second", "double", "quote", "TAG", "NUMBER", "Does", "that", "fix", "the", "issue", "Reduce", "the", "template", "to", "the", "following", "to", "see", "if", "it", "still", "fail", "xml", "TAG", "Do", "you", "have", "a", "different", "marko", "NUMBER", "json", "file", "in", "the", "views", "admin", "folder", "that", "might", "be", "cause", "issue", "If", "so", "can", "you", "remove", "that", "marko", "NUMBER", "json", "to", "help", "isolate", "the", "issue", "Finally", "what", "version", "of", "lasso", "do", "you", "have", "install", "Thanks", "for", "the", "details", "NUMBER", "I", "was", "able", "to", "reproduce", "the", "issue", "use", "the", "uploaded", "file", "NUMBER", "I", "should", "be", "able", "to", "figure", "it", "out", "this", "morning", "now", "that", "I", "can", "reproduce", "NUMBER", "I", "ll", "update", "when", "I", "know", "more", "NUMBER", "Just", "an", "update", "NUMBER", "I", "find", "the", "issue", "NUMBER", "The", "htmljs", "parser", "be", "not", "handle", "a", "byte", "order", "mark", "BOM", "LINK", "_order_mark", "character", "sequence", "be", "add", "by", "your", "editor", "NUMBER", "BOM", "characters", "be", "pretty", "rare", "but", "I", "be", "work", "on", "a", "fix", "to", "skip", "over", "those", "characters", "NUMBER", "In", "case", "you", "be", "really", "curious", "due", "to", "the", "BOM", "characters", "the", "parser", "doesn", "t", "recognize", "the", "TAG", "ending", "character", "sequence", "NUMBER", "Also", "FYI", "From", "Wikipedia", "The", "Unicode", "Standard", "permits", "the", "BOM", "in", "UTF", "NUMBER", "but", "do", "not", "require", "nor", "recommend", "its", "use", "NUMBER", "Byte", "order", "has", "no", "meaning", "in", "UTF", "NUMBER", "Marko", "expects", "template", "to", "be", "encoded", "use", "UTF", "NUMBER", "Again", "we", "still", "will", "make", "the", "change", "to", "strip", "the", "BOM", "characters", "but", "just", "sharing", "that", "BOM", "characters", "be", "not", "recommended", "in", "UTF", "NUMBER", "file", "NUMBER", "Fixed", "by", "LINK", "parser", "commit", "baf", "NUMBER", "d", "NUMBER", "a", "NUMBER", "bc", "NUMBER", "a", "NUMBER", "a", "NUMBER", "df", "NUMBER", "cc", "NUMBER", "New", "version", "of", "htmljs", "parser", "publish", "with", "fix", "htmljs", "parser", "NUMBER", "Please", "let", "me", "know", "if", "you", "see", "any", "issue", "NUMBER", "Thanks", "GenaANTGOfficial", "when", "a", "marko", "template", "be", "compiled", "it", "will", "produce", "a", "NUMBER", "js", "file", "next", "to", "the", "original", "file", "and", "the", "generation", "that", "new", "file", "be", "triggering", "a", "restart", "NUMBER", "The", "reason", "you", "be", "seeing", "the", "infinite", "restart", "after", "upgrading", "to", "Marko", "v", "NUMBER", "be", "that", "Marko", "v", "NUMBER", "will", "always", "recompile", "the", "template", "in", "development", "to", "avoid", "caching", "problem", "NUMBER", "You", "should", "update", "your", "nodemon", "config", "to", "ignore", "change", "to", "NUMBER", "marko", "NUMBER", "js", "file", "LINK", "js", "marko", "nodemon", "Or", "better", "yet", "use", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "Looks", "great", "What", "be", "your", "thoughts", "on", "renaming", "injectInto", "express", "to", "patchExpress", "express", "Awesome", "NUMBER", "Thank", "you", "I", "believe", "this", "be", "no", "longer", "needed", "after", "support", "for", "merge", "in", "res", "NUMBER", "locals", "to", "out", "NUMBER", "globals", "was", "add", "for", "Express", "NUMBER", "Closing", "issue", "NUMBER", "Good", "catch", "NUMBER", "Thank", "you", "for", "the", "fix", "Thanks", "for", "the", "question", "taecilla", "and", "thanks", "for", "the", "reply", "davidenq", "It", "sounds", "like", "the", "question", "was", "answered", "so", "I", "m", "closing", "the", "issue", "NUMBER", "Thanks", "for", "the", "PR", "but", "for", "convenience", "we", "need", "to", "keep", "the", "docs", "folder", "as", "part", "of", "the", "npm", "package", "since", "the", "app", "that", "generates", "the", "docs", "for", "marko", "NUMBER", "json", "pulls", "in", "the", "marko", "npm", "package", "directly", "from", "npm", "to", "get", "the", "defaults", "NUMBER", "You", "can", "of", "course", "npm", "link", "in", "marko", "but", "that", "add", "a", "little", "friction", "NUMBER", "Hey", "bitinn", "sorry", "for", "not", "be", "able", "to", "respond", "earlier", "NUMBER", "We", "definitely", "need", "to", "add", "better", "docs", "for", "the", "new", "syntax", "we", "have", "plan", "to", "do", "this", "very", "soon", "NUMBER", "FYI", "all", "of", "the", "following", "be", "equivalent", "xml", "p", "hello", "there", "TAG", "username", "TAG", "NUMBER", "xml", "p", "hello", "there", "TAG", "username", "TAG", "NUMBER", "xml", "p", "hello", "there", "TAG", "username", "TAG", "NUMBER", "xml", "p", "hello", "there", "strong", "username", "NUMBER", "There", "be", "four", "ways", "to", "enter", "into", "HTML", "parsing", "mode", "Option", "NUMBER", "HTML", "tag", "TAG", "this", "will", "be", "parsed", "as", "HTML", "TAG", "Option", "NUMBER", "HTML", "line", "after", "tag", "attributes", "div", "this", "will", "be", "parsed", "as", "HTML", "Option", "NUMBER", "Single", "line", "HTML", "block", "div", "this", "will", "be", "parsed", "as", "HTML", "Option", "NUMBER", "Multiline", "delimited", "HTML", "block", "div", "this", "will", "be", "parsed", "as", "HTML", "For", "the", "multiline", "delimited", "HTML", "block", "the", "delimiter", "just", "needs", "to", "be", "two", "or", "more", "characters", "so", "the", "following", "also", "works", "div", "this", "will", "be", "parsed", "as", "HTML", "Sorry", "this", "wasn", "t", "explained", "better", "in", "the", "docs", "NUMBER", "Please", "let", "me", "know", "if", "you", "have", "any", "other", "question", "NUMBER", "Also", "please", "join", "us", "on", "Gitter", "if", "you", "haven", "t", "already", "LINK", "js", "marko", "Hi", "jainprash", "I", "believe", "that", "had", "already", "be", "fix", "NUMBER", "days", "ago", "LINK", "js", "marko", "issue", "NUMBER", "Which", "version", "of", "marko", "be", "you", "use", "I", "believe", "this", "issue", "has", "be", "resolve", "NUMBER", "It", "looks", "like", "the", "code", "be", "be", "hit", "by", "the", "following", "breaking", "change", "LINK", "change", "between", "v", "NUMBER", "and", "v", "NUMBER", "path", "However", "we", "shouldn", "t", "be", "passing", "in", "undefined", "for", "the", "path", "so", "we", "should", "fix", "that", "NUMBER", "I", "ll", "take", "a", "look", "NUMBER", "Thanks", "for", "report", "the", "problem", "Tests", "for", "marko", "be", "passing", "on", "Node", "v", "NUMBER", "Please", "let", "me", "know", "if", "you", "find", "any", "other", "issue", "NUMBER", "Thanks", "again", "I", "m", "open", "this", "issue", "to", "gauge", "the", "community", "s", "interest", "in", "a", "Atom", "plugin", "with", "advance", "features", "that", "may", "include", "the", "following", "x", "Smart", "autocompletion", "for", "custom", "tags", "and", "standard", "HTML", "tags", "get", "it", "LINK", "js", "atom", "autocomplete", "marko", "marko", "autocomplete", "package", "x", "Smart", "autocompletion", "for", "tag", "attributes", "based", "on", "tag", "schema", "file", "get", "it", "LINK", "js", "atom", "autocomplete", "marko", "marko", "autocomplete", "package", "x", "Pretty", "printing", "with", "syntax", "switcher", "get", "it", "LINK", "beautify", "installation", "x", "Block", "commenting", "x", "Click", "to", "go", "to", "tag", "definition", "get", "it", "LINK", "js", "atom", "hyperclick", "marko", "marko", "hyperclick", "package", "UI", "component", "generator", "Anything", "else", "The", "more", "developers", "that", "be", "interested", "will", "help", "us", "make", "a", "stronger", "case", "for", "investing", "in", "this", "functionality", "NUMBER", "Related", "issue", "WebStorm", "plugin", "LINK", "js", "marko", "issue", "NUMBER", "I", "ll", "open", "a", "similar", "Github", "issue", "for", "Sublime", "Text", "and", "Visual", "Studio", "Code", "Hey", "BryceEWatson", "thanks", "for", "work", "on", "the", "generator", "scaffolding", "functionality", "NUMBER", "I", "like", "the", "setup", "but", "I", "think", "we", "need", "to", "offer", "more", "flexibility", "and", "possibly", "provide", "the", "ability", "for", "the", "developer", "to", "provide", "their", "own", "component", "template", "directories", "NUMBER", "As", "an", "example", "not", "every", "developer", "be", "going", "to", "use", "NUMBER", "less", "NUMBER", "Also", "I", "think", "we", "can", "simplify", "the", "code", "if", "we", "just", "provide", "a", "way", "to", "copy", "a", "directory", "tree", "while", "doing", "variable", "replacement", "in", "file", "and", "in", "filenames", "and", "possibly", "support", "conditional", "file", "as", "well", "NUMBER", "As", "much", "as", "I", "dislike", "Yeoman", "it", "might", "be", "worth", "provide", "Yeoman", "generators", "and", "piggy", "backing", "off", "atom", "yeoman", "LINK", "yeoman", "NUMBER", "Another", "option", "be", "to", "build", "a", "new", "generic", "Generator", "plugin", "for", "Atom", "independent", "of", "Yeoman", "and", "there", "also", "be", "Generator", "Provider", "plugins", "NUMBER", "We", "could", "then", "provide", "a", "Generator", "Provider", "plugin", "for", "Marko", "but", "other", "developers", "could", "publish", "their", "own", "NUMBER", "It", "s", "possible", "that", "something", "like", "this", "already", "exists", "but", "I", "haven", "t", "seen", "it", "NUMBER", "Thoughts", "Eldar", "X", "I", "took", "on", "the", "challenge", "and", "we", "now", "have", "support", "for", "tag", "matching", "and", "synchronized", "editing", "of", "open", "and", "closing", "tags", "in", "Atom", "LINK", "js", "atom", "language", "marko", "tag", "matching", "There", "was", "some", "learning", "along", "the", "way", "but", "it", "was", "a", "much", "more", "difficult", "task", "than", "expected", "lots", "of", "edge", "cases", "but", "I", "be", "very", "happy", "with", "the", "end", "result", "NUMBER", "You", "owe", "me", "a", "beer", "As", "a", "side", "note", "we", "have", "merge", "all", "of", "the", "Atom", "plugins", "atom", "language", "marko", "LINK", "js", "atom", "language", "marko", "atom", "autocomplete", "marko", "LINK", "js", "atom", "autocomplete", "marko", "and", "atom", "hyperclick", "marko", "LINK", "js", "atom", "hyperclick", "marko", "into", "the", "main", "atom", "language", "marko", "LINK", "js", "atom", "language", "marko", "package", "NUMBER", "The", "other", "package", "be", "now", "deprecate", "and", "they", "were", "made", "into", "no", "ops", "feel", "free", "to", "uninstall", "autocomplete", "marko", "and", "hyperclick", "marko", "NUMBER", "Please", "let", "us", "know", "if", "you", "see", "any", "issue", "NUMBER", "tinovyatkin", "Patrick", "and", "I", "be", "not", "planning", "on", "picking", "up", "a", "VS", "Code", "plugin", "in", "the", "near", "future", "but", "pcanella", "mention", "he", "might", "be", "interested", "in", "work", "on", "one", "NUMBER", "tinovyatkin", "I", "did", "take", "a", "look", "into", "what", "it", "would", "support", "autocomplete", "with", "VS", "Code", "and", "it", "wasn", "t", "too", "bad", "NUMBER", "The", "main", "difference", "between", "VS", "Code", "and", "Atom", "be", "that", "the", "autocomplete", "functionality", "be", "required", "to", "be", "provide", "as", "a", "separate", "process", "NUMBER", "But", "as", "mlrawlings", "said", "we", "don", "t", "plan", "on", "work", "that", "in", "the", "near", "future", "NUMBER", "At", "the", "moment", "we", "be", "busy", "preparing", "for", "the", "next", "major", "release", "of", "marko", "development", "be", "happening", "on", "master", "NUMBER", "I", "m", "open", "this", "issue", "to", "gauge", "the", "community", "s", "interest", "in", "a", "WebStorm", "plugin", "with", "advance", "features", "that", "may", "include", "the", "following", "Smart", "autocompletion", "for", "custom", "tags", "and", "standard", "HTML", "tags", "Smart", "autocompletion", "for", "tag", "attributes", "based", "on", "tag", "schema", "file", "Pretty", "printing", "with", "syntax", "switcher", "Block", "commenting", "Click", "to", "go", "to", "tag", "definition", "UI", "component", "generator", "Anything", "else", "The", "more", "developers", "that", "be", "interested", "will", "help", "us", "make", "a", "stronger", "case", "for", "investing", "in", "this", "functionality", "NUMBER", "Related", "issue", "Atom", "plugin", "LINK", "js", "marko", "issue", "NUMBER", "I", "ll", "open", "a", "similar", "Github", "issue", "for", "Sublime", "Text", "and", "Visual", "Studio", "Code", "Also", "a", "default", "widget", "component", "file", "generator", "via", "right", "click", "would", "be", "nice", "NUMBER", "Great", "suggestion", "wmossman", "NUMBER", "I", "ll", "update", "the", "description", "to", "include", "that", "NUMBER", "Thanks", "yask", "NUMBER", "So", "far", "most", "of", "our", "tooling", "effort", "has", "be", "focused", "around", "the", "atom", "editor", "see", "NUMBER", "NUMBER", "We", "ve", "not", "get", "WebStorm", "on", "our", "roadmap", "right", "now", "and", "we", "don", "t", "have", "a", "lot", "of", "expertise", "with", "the", "java", "based", "IntelliJ", "plugin", "system", "NUMBER", "Our", "hope", "be", "that", "a", "developer", "that", "be", "familiar", "with", "the", "WebStorm", "ecosystem", "could", "look", "at", "the", "atom", "implementation", "to", "add", "support", "for", "WebStorm", "NUMBER", "davidmoshal", "Thanks", "for", "point", "this", "out", "I", "believe", "that", "_is_", "intentional", "as", "we", "don", "t", "have", "a", "true", "webstorm", "integration", "but", "webstorm", "can", "import", "tmbundles", "LINK", "textmate", "bundle", "NUMBER", "html", "NUMBER", "We", "should", "definitely", "make", "this", "clearer", "on", "that", "page", "NUMBER", "Thanks", "for", "report", "the", "problem", "CestDiego", "NUMBER", "That", "would", "be", "a", "typo", "NUMBER", "In", "the", "upper", "right", "of", "the", "page", "you", "will", "see", "a", "Improve", "this", "page", "link", "NUMBER", "That", "will", "take", "you", "to", "the", "source", "markdown", "file", "if", "you", "want", "to", "clean", "it", "up", "NUMBER", "I", "would", "just", "remove", "the", "var", "style", "line", "NUMBER", "If", "you", "don", "t", "have", "time", "to", "send", "a", "PR", "please", "let", "me", "know", "but", "a", "PR", "would", "be", "greatly", "appreciated", "NUMBER", "Thanks", "again", "Hi", "I", "have", "a", "question", "regard", "to", "the", "usage", "of", "macro", "for", "marko", "v", "NUMBER", "I", "defined", "the", "following", "macros", "in", "helpers", "NUMBER", "marko", "and", "want", "to", "use", "it", "in", "another", "file", "NUMBER", "For", "example", "helpers", "NUMBER", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "I", "want", "to", "use", "it", "in", "application", "NUMBER", "marko", "NUMBER", "How", "can", "I", "do", "this", "I", "tried", "the", "include", "but", "it", "didn", "t", "work", "for", "me", "Just", "find", "out", "this", "LINK", "taglibs", "Sorry", "to", "reopened", "this", "again", "NUMBER", "I", "have", "some", "question", "regard", "to", "the", "usage", "of", "macro", "in", "multiple", "file", "NUMBER", "What", "be", "the", "benefit", "of", "use", "macro", "over", "custom", "taglibs", "Also", "for", "template", "inheritance", "like", "layout", "taglib", "how", "can", "I", "the", "layout", "can", "understand", "the", "data", "from", "current", "template", "For", "example", "index", "NUMBER", "marko", "TAG", "TAG", "My", "Page", "TAG", "TAG", "BODY", "CONTENT", "TAG", "TAG", "layout", "NUMBER", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "If", "I", "run", "marko", "NUMBER", "load", "index", "NUMBER", "marko", "NUMBER", "ream", "env", "production", "the", "layout", "NUMBER", "marko", "will", "not", "understand", "data", "NUMBER", "env", "right", "Hey", "hung", "phan", "sorry", "I", "wasn", "t", "able", "to", "respond", "earlier", "NUMBER", "A", "macro", "be", "just", "inline", "include", "partial", "that", "can", "only", "be", "use", "within", "the", "current", "template", "NUMBER", "An", "include", "be", "a", "partial", "that", "be", "separated", "to", "a", "separate", "file", "so", "that", "it", "can", "be", "use", "by", "other", "template", "NUMBER", "A", "custom", "tag", "be", "a", "more", "powerful", "version", "of", "an", "include", "that", "allows", "some", "JavaScript", "code", "to", "act", "as", "the", "rendering", "controller", "for", "the", "custom", "tag", "NUMBER", "In", "addition", "a", "custom", "tag", "can", "be", "mapped", "directly", "to", "a", "template", "NUMBER", "Custom", "tags", "also", "have", "the", "benefit", "that", "they", "be", "easier", "to", "use", "since", "they", "get", "registered", "with", "a", "tag", "name", "NUMBER", "A", "layout", "be", "just", "a", "reusable", "template", "that", "has", "placeholders", "Here", "s", "some", "guidance", "on", "deciding", "when", "to", "use", "what", "Use", "a", "macro", "if", "you", "need", "to", "repeat", "some", "HTML", "within", "the", "same", "template", "Use", "an", "include", "if", "you", "need", "to", "break", "up", "a", "template", "into", "multiple", "template", "and", "all", "of", "the", "file", "be", "closely", "relate", "and", "in", "the", "same", "directory", "NUMBER", "Custom", "tags", "be", "almost", "always", "a", "better", "option", "than", "include", "since", "they", "be", "the", "most", "flexible", "and", "offer", "better", "encapsulation", "of", "rendering", "logic", "NUMBER", "Use", "a", "layout", "template", "when", "you", "have", "multiple", "pages", "or", "components", "that", "share", "a", "common", "layout", "structure", "Also", "for", "template", "inheritance", "like", "layout", "taglib", "how", "can", "I", "the", "layout", "can", "understand", "the", "data", "from", "current", "template", "You", "an", "pass", "data", "to", "a", "layout", "template", "as", "the", "second", "argument", "to", "the", "TAG", "tag", "see", "LINK", "taglib", "layout", "data", "xml", "TAG", "TAG", "My", "Page", "TAG", "TAG", "BODY", "CONTENT", "TAG", "TAG", "The", "data", "object", "pass", "in", "as", "the", "second", "argument", "will", "be", "available", "in", "the", "layout", "template", "as", "part", "of", "the", "data", "object", "e", "NUMBER", "g", "NUMBER", "data", "NUMBER", "foo", "NUMBER", "If", "I", "run", "marko", "NUMBER", "load", "index", "NUMBER", "marko", "NUMBER", "ream", "env", "production", "the", "layout", "NUMBER", "marko", "will", "not", "understand", "data", "NUMBER", "env", "right", "You", "should", "use", "sparingly", "but", "you", "can", "pass", "global", "data", "that", "be", "available", "to", "all", "template", "NUMBER", "See", "LINK", "guide", "global", "properties", "Therefore", "you", "can", "do", "the", "following", "javascript", "marko", "NUMBER", "load", "index", "NUMBER", "marko", "NUMBER", "ream", "global", "env", "production", "Global", "data", "be", "available", "in", "all", "template", "even", "template", "for", "custom", "tags", "or", "wherever", "you", "have", "access", "to", "the", "out", "NUMBER", "For", "example", "xml", "TAG", "The", "current", "environment", "be", "out", "NUMBER", "global", "NUMBER", "env", "TAG", "Hopefully", "that", "answers", "your", "question", "but", "please", "let", "me", "know", "if", "you", "need", "more", "clarification", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "the", "issue", "but", "please", "feel", "free", "to", "reopen", "or", "add", "more", "comments", "here", "and", "I", "will", "take", "a", "look", "NUMBER", "It", "did", "resolve", "my", "problem", "NUMBER", "Thanks", "patrick", "steele", "idem", "NUMBER", "hustcer", "creating", "a", "custom", "tag", "be", "as", "simple", "as", "creating", "a", "template", "NUMBER", "marko", "file", "NUMBER", "For", "example", "src", "components", "app", "my", "helper", "template", "NUMBER", "marko", "xml", "TAG", "Hello", "data", "NUMBER", "name", "This", "be", "my", "awesome", "helper", "NUMBER", "TAG", "That", "s", "all", "that", "be", "required", "to", "create", "a", "custom", "tag", "NUMBER", "No", "other", "file", "be", "required", "NUMBER", "The", "custom", "tag", "can", "then", "be", "use", "in", "any", "directory", "at", "or", "below", "the", "src", "directory", "NUMBER", "For", "example", "src", "pages", "home", "template", "NUMBER", "marko", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "For", "more", "details", "LINK", "taglibs", "scanning", "for", "tags", "NUMBER", "N", "NUMBER", "MN", "NUMBER", "The", "w", "preserve", "attrs", "attribute", "only", "works", "on", "standard", "HTML", "elements", "not", "custom", "elements", "NUMBER", "You", "should", "instead", "be", "add", "the", "w", "preserve", "attrs", "attribute", "to", "the", "root", "HTML", "element", "in", "the", "template", "for", "the", "TAG", "UI", "component", "NUMBER", "Please", "let", "me", "know", "if", "that", "do", "or", "do", "not", "solve", "your", "problem", "NUMBER", "I", "believe", "this", "be", "a", "non", "issue", "so", "closing", "NUMBER", "Please", "reopen", "if", "I", "be", "mistaken", "NUMBER", "Thanks", "NUMBER", "Bluejay", "NUMBER", "when", "I", "try", "to", "compile", "your", "exact", "template", "I", "get", "the", "following", "error", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "NUMBER", "Line", "has", "extra", "indentation", "at", "the", "beginning", "Which", "be", "what", "I", "would", "expect", "NUMBER", "The", "TAG", "tag", "should", "not", "be", "indented", "NUMBER", "The", "following", "compiles", "with", "no", "issue", "xml", "TAG", "TAG", "TAG", "TAG", "Estimake", "NUMBER", "co", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Please", "let", "me", "know", "if", "I", "be", "miss", "anything", "NUMBER", "Indentation", "only", "matters", "for", "top", "level", "HTML", "elements", "NUMBER", "Once", "you", "be", "within", "an", "HTML", "tag", "the", "indentation", "do", "not", "matter", "as", "long", "as", "you", "be", "not", "use", "the", "concise", "syntax", "NUMBER", "Do", "you", "mind", "messaging", "me", "on", "Gitter", "to", "help", "debug", "your", "issue", "I", "be", "not", "able", "to", "reproduce", "NUMBER", "LINK", "steele", "idem", "We", "need", "to", "use", "relative", "URLs", "so", "that", "docs", "will", "be", "correct", "on", "different", "branch", "NUMBER", "Thanks", "NUMBER", "Hey", "christensson", "in", "Marko", "v", "NUMBER", "we", "drop", "support", "for", "TAG", "without", "the", "curly", "braces", "NUMBER", "Therefore", "you", "don", "t", "need", "to", "escape", "the", "but", "do", "seem", "odd", "that", "having", "in", "the", "attribute", "be", "cause", "a", "syntax", "error", "NUMBER", "I", "m", "looking", "into", "it", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "Ok", "I", "took", "a", "closer", "look", "NUMBER", "It", "s", "not", "actually", "a", "bug", "in", "Marko", "NUMBER", "The", "right", "hand", "side", "of", "an", "attribute", "be", "parsed", "as", "a", "JavaScript", "expression", "and", "the", "string", "definition", "must", "follow", "the", "rules", "for", "defining", "a", "JavaScript", "string", "NUMBER", "If", "you", "run", "the", "following", "code", "in", "your", "JavaScript", "console", "you", "will", "see", "the", "same", "error", "javascript", "JSON", "NUMBER", "parse", "foo", "Output", "in", "Chrome", "V", "NUMBER", "SyntaxError", "Unexpected", "token", "Output", "in", "Firefox", "SyntaxError", "JSON", "NUMBER", "parse", "bad", "escaped", "character", "at", "line", "NUMBER", "column", "NUMBER", "of", "the", "JSON", "data", "With", "that", "said", "I", "think", "we", "can", "improve", "the", "error", "message", "and", "we", "definitely", "need", "to", "fix", "marko", "migrate", "NUMBER", "I", "ll", "keep", "work", "on", "on", "this", "NUMBER", "Thanks", "again", "NUMBER", "By", "the", "way", "if", "you", "want", "to", "fix", "your", "template", "you", "should", "update", "it", "to", "the", "following", "xml", "TAG", "with", "JavaScript", "you", "need", "to", "escape", "the", "if", "you", "want", "it", "to", "show", "up", "in", "the", "output", "I", "m", "still", "work", "on", "update", "marko", "migrate", "but", "I", "have", "improved", "the", "error", "message", "produced", "by", "the", "parser", "NUMBER", "I", "see", "NUMBER", "I", "will", "update", "marko", "migrate", "to", "ensure", "the", "following", "Input", "Marko", "v", "NUMBER", "template", "xml", "TAG", "TAG", "Output", "Marko", "v", "NUMBER", "template", "xml", "TAG", "Thanks", "for", "clarifying", "NUMBER", "Still", "investigating", "and", "add", "more", "test", "NUMBER", "It", "appears", "there", "might", "be", "some", "other", "issue", "that", "I", "need", "to", "resolve", "NUMBER", "Took", "a", "little", "more", "thought", "than", "expected", "but", "the", "marko", "migrate", "script", "has", "be", "update", "to", "properly", "handle", "backslash", "characters", "in", "front", "of", "placeholders", "NUMBER", "If", "you", "would", "like", "to", "try", "the", "migration", "again", "please", "install", "the", "latest", "version", "of", "marko", "migrate", "bash", "npm", "install", "marko", "migrate", "NUMBER", "global", "Please", "let", "me", "know", "if", "you", "still", "see", "issue", "NUMBER", "Thanks", "Thanks", "for", "report", "the", "problem", "NUMBER", "I", "m", "looking", "into", "it", "NUMBER", "lohfu", "I", "was", "not", "able", "to", "reproduce", "the", "problem", "use", "a", "fresh", "npm", "install", "NUMBER", "I", "tried", "to", "recreate", "your", "setup", "and", "the", "template", "be", "compile", "as", "expected", "javascript", "function", "create", "__helpers", "var", "str", "__helpers", "NUMBER", "s", "empty", "__helpers", "NUMBER", "e", "notEmpty", "__helpers", "NUMBER", "ne", "escapeXml", "__helpers", "NUMBER", "x", "loadTemplate", "__helpers", "NUMBER", "l", "navigation_template", "loadTemplate", "require", "NUMBER", "resolve", "NUMBER", "components", "navigation", "template", "NUMBER", "marko", "return", "function", "render", "data", "out", "navigation_template", "NUMBER", "render", "out", "module", "NUMBER", "export", "require", "marko", "NUMBER", "c", "__filename", "NUMBER", "c", "create", "Hey", "lohfu", "just", "wanted", "to", "check", "in", "and", "see", "if", "you", "were", "able", "to", "reproduce", "NUMBER", "Thanks", "NUMBER", "Thanks", "for", "creating", "the", "repo", "NUMBER", "I", "was", "able", "to", "reproduce", "the", "problem", "and", "be", "looking", "into", "it", "this", "morning", "NUMBER", "I", "ll", "update", "when", "I", "know", "more", "NUMBER", "Thanks", "again", "NUMBER", "Hey", "lohfu", "I", "realized", "later", "that", "I", "was", "trying", "to", "reproduce", "the", "problem", "use", "the", "TAG", "tag", "NUMBER", "Once", "I", "saw", "that", "you", "were", "use", "a", "custom", "tag", "mapped", "to", "a", "template", "it", "was", "easy", "to", "reproduce", "and", "easy", "to", "fix", "NUMBER", "Technically", "everything", "was", "work", "as", "expected", "but", "it", "would", "cause", "problem", "if", "a", "transform", "was", "looking", "at", "the", "file", "extension", "for", "the", "require", "require", "NUMBER", "resolve", "path", "and", "not", "the", "fully", "resolve", "path", "NUMBER", "Anyway", "the", "problem", "was", "fix", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "see", "any", "other", "problem", "NUMBER", "Thanks", "Thanks", "for", "the", "improvement", "New", "version", "publish", "marko", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "still", "see", "issue", "NUMBER", "Could", "you", "provide", "more", "details", "on", "the", "directory", "structure", "It", "looks", "like", "TAG", "be", "not", "be", "discover", "relative", "to", "the", "location", "of", "the", "customTag", "template", "NUMBER", "marko", "NUMBER", "Are", "TAG", "and", "TAG", "registered", "in", "the", "same", "package", "Where", "be", "your", "marko", "NUMBER", "json", "relative", "to", "customTag", "template", "NUMBER", "marko", "and", "customTag", "NUMBER", "template", "NUMBER", "marko", "That", "do", "look", "pretty", "simple", "NUMBER", "The", "names", "of", "the", "custom", "tags", "be", "case", "sensitive", "NUMBER", "If", "the", "directory", "name", "be", "CustomTag", "NUMBER", "then", "the", "custom", "tag", "will", "be", "TAG", "NUMBER", "Is", "that", "possibly", "the", "reason", "that", "TAG", "be", "not", "be", "find", "I", "m", "not", "able", "to", "reproduce", "use", "the", "following", "sample", "app", "LINK", "steele", "idem", "marko", "issue", "NUMBER", "Do", "you", "see", "any", "differences", "between", "your", "app", "and", "the", "sample", "app", "I", "created", "Proposal", "xml", "TAG", "TAG", "li", "NUMBER", "foo", "Red", "li", "NUMBER", "foo", "Green", "li", "NUMBER", "foo", "Blue", "TAG", "TAG", "tag", "TAG", "TAG", "li", "NUMBER", "foo", "Red", "li", "NUMBER", "foo", "Green", "li", "NUMBER", "foo", "Blue", "TAG", "TAG", "In", "both", "cases", "output", "should", "be", "html", "TAG", "TAG", "Red", "TAG", "TAG", "Green", "TAG", "TAG", "Blue", "TAG", "TAG", "philidem", "any", "update", "on", "this", "The", "fix", "for", "this", "wasn", "t", "as", "straight", "forward", "as", "I", "had", "first", "thought", "and", "I", "haven", "t", "had", "a", "chance", "to", "revisit", "it", "lately", "NUMBER", "I", "agree", "with", "you", "both", "that", "this", "be", "needed", "NUMBER", "I", "will", "create", "a", "repo", "with", "a", "few", "links", "as", "a", "starting", "point", "and", "add", "more", "links", "as", "I", "find", "them", "and", "hopefully", "others", "can", "help", "make", "it", "better", "as", "well", "NUMBER", "I", "m", "also", "going", "to", "push", "our", "product", "teams", "at", "eBay", "to", "work", "on", "some", "blog", "posts", "that", "share", "how", "we", "be", "use", "Marko", "and", "Marko", "Widgets", "at", "eBay", "NUMBER", "It", "will", "take", "a", "little", "longer", "but", "I", "also", "want", "to", "gather", "some", "numbers", "on", "how", "many", "UI", "components", "our", "teams", "have", "created", "there", "s", "a", "lot", "so", "that", "people", "will", "better", "idea", "how", "heavily", "Marko", "be", "be", "use", "at", "eBay", "NUMBER", "Teams", "have", "also", "do", "some", "interesting", "things", "with", "Lasso", "NUMBER", "js", "as", "well", "to", "create", "webapps", "that", "have", "specialized", "content", "for", "various", "devices", "NUMBER", "I", "ll", "definitely", "keep", "this", "issue", "open", "and", "hopefully", "will", "have", "something", "to", "show", "very", "soon", "NUMBER", "Thanks", "That", "would", "be", "really", "awesome", "regiellis", "NUMBER", "I", "feel", "like", "if", "we", "just", "can", "get", "a", "few", "people", "blogging", "then", "that", "would", "help", "a", "ton", "with", "awareness", "NUMBER", "If", "you", "want", "I", "would", "be", "happy", "to", "review", "any", "early", "drafts", "xml", "TAG", "TAG", "TAG", "label", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "label", "TAG", "TAG", "TAG", "I", "also", "investigated", "this", "issue", "and", "while", "I", "think", "we", "could", "make", "it", "work", "it", "would", "complicate", "the", "code", "for", "an", "edge", "case", "NUMBER", "The", "workaround", "that", "mlrawlings", "suggested", "above", "should", "work", "so", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "NUMBER", "Hey", "tbashor", "there", "was", "a", "bug", "in", "Marko", "that", "prevented", "the", "Marko", "Widgets", "compile", "time", "transformers", "from", "work", "on", "tags", "with", "a", "custom", "tag", "name", "NUMBER", "This", "has", "be", "fix", "LINK", "js", "marko", "blob", "master", "CHANGELOG", "NUMBER", "md", "NUMBER", "Please", "let", "me", "know", "if", "you", "still", "see", "issue", "NUMBER", "Thanks", "tbashor", "by", "any", "chance", "do", "you", "have", "any", "intermediate", "package", "NUMBER", "json", "file", "The", "taglib", "finder", "stops", "when", "it", "gets", "to", "the", "root", "of", "the", "package", "The", "root", "of", "the", "package", "be", "determined", "by", "looking", "for", "a", "package", "NUMBER", "json", "file", "with", "a", "name", "property", "NUMBER", "I", "suspect", "that", "the", "search", "for", "taglibs", "be", "be", "ended", "prematurely", "due", "to", "the", "root", "directory", "not", "be", "as", "expected", "NUMBER", "FYI", "here", "be", "the", "code", "that", "be", "use", "to", "discover", "taglibs", "for", "marko", "LINK", "js", "marko", "blob", "master", "compiler", "taglib", "finder", "index", "NUMBER", "js", "Please", "let", "me", "know", "if", "that", "be", "the", "case", "NUMBER", "Thanks", "NUMBER", "tbashor", "We", "did", "change", "the", "logic", "for", "discovering", "taglibs", "to", "address", "some", "problem", "NUMBER", "It", "s", "linked", "to", "from", "the", "What", "s", "New", "in", "Marko", "v", "NUMBER", "LINK", "be", "new", "marko", "v", "NUMBER", "marko", "taglibjson", "markojson", "but", "here", "be", "the", "relevant", "Github", "issue", "with", "details", "LINK", "js", "marko", "issue", "NUMBER", "From", "that", "description", "of", "what", "change", "do", "you", "see", "any", "issue", "that", "would", "be", "impacting", "your", "project", "If", "needed", "we", "can", "always", "adjust", "things", "slightly", "but", "from", "what", "I", "can", "tell", "your", "project", "should", "be", "fine", "as", "long", "as", "there", "be", "no", "additional", "package", "NUMBER", "json", "file", "that", "be", "cause", "the", "root", "directory", "to", "be", "different", "than", "one", "what", "be", "expected", "NUMBER", "Since", "your", "plugins", "have", "package", "NUMBER", "json", "file", "it", "seems", "like", "that", "might", "be", "the", "cause", "but", "I", "don", "t", "fully", "understand", "your", "project", "structure", "NUMBER", "If", "you", "be", "able", "to", "create", "a", "minimal", "project", "to", "reproduce", "the", "problem", "that", "would", "be", "helpful", "NUMBER", "tbashor", "also", "here", "be", "the", "relevant", "docs", "LINK", "taglibs", "taglib", "discovery", "Thanks", "for", "the", "update", "tbashor", "NUMBER", "Let", "me", "know", "if", "you", "run", "into", "any", "other", "issue", "and", "glad", "to", "see", "that", "you", "have", "migrated", "to", "Marko", "v", "NUMBER", "CC", "philidem", "mlrawlings", "I", "would", "like", "to", "see", "a", "method", "that", "returns", "a", "promise", "but", "I", "would", "prefer", "to", "avoid", "a", "breaking", "change", "NUMBER", "The", "purpose", "of", "returning", "the", "AsyncWriter", "instance", "was", "to", "be", "compatible", "with", "the", "EventEmitter", "API", "on", "once", "emit", "etc", "NUMBER", "that", "AsyncWriter", "implement", "NUMBER", "For", "example", "javascript", "template", "NUMBER", "render", "hello", "world", "NUMBER", "on", "foo", "function", "e", "NUMBER", "on", "error", "function", "e", "NUMBER", "on", "finish", "function", "What", "be", "your", "all", "thoughts", "on", "utilizing", "the", "native", "promise", "implementation", "to", "provide", "a", "new", "renderAsync", "method", "javascript", "var", "template", "require", "template", "NUMBER", "marko", "template", "NUMBER", "renderAsync", "hello", "world", "NUMBER", "en", "function", "html", "NUMBER", "NUMBER", "catch", "function", "err", "NUMBER", "I", "d", "rather", "modify", "async", "writer", "to", "be", "a", "thenable", "LINK", "by", "add", "NUMBER", "en", "and", "NUMBER", "catch", "I", "ve", "seen", "other", "libraries", "such", "as", "superagent", "LINK", "and", "mongoose", "LINK", "implement", "a", "promise", "like", "interface", "that", "plays", "well", "with", "anything", "that", "be", "duck", "typing", "rather", "than", "looking", "at", "instanceof", "Promise", "which", "be", "most", "everything", "due", "to", "things", "like", "bluebird", "and", "q", "NUMBER", "It", "would", "support", "both", "js", "template", "NUMBER", "render", "hello", "world", "NUMBER", "en", "function", "html", "NUMBER", "NUMBER", "catch", "function", "err", "NUMBER", "and", "js", "template", "NUMBER", "render", "hello", "world", "NUMBER", "on", "error", "function", "e", "NUMBER", "NUMBER", "on", "finish", "function", "NUMBER", "And", "with", "async", "await", "you", "d", "be", "able", "to", "do", "js", "var", "html", "await", "template", "NUMBER", "render", "hello", "world", "We", "could", "also", "implement", "a", "NUMBER", "promise", "function", "or", "some", "other", "name", "that", "returns", "a", "true", "Promise", "for", "cases", "where", "it", "be", "needed", "NUMBER", "TAG", "TAG", "Expand", "for", "possible", "implementation", "TAG", "js", "then", "fn", "fnErr", "var", "promise", "new", "Promise", "resolve", "reject", "var", "buffer", "this", "NUMBER", "on", "data", "data", "buffer", "data", "this", "NUMBER", "on", "error", "error", "reject", "error", "this", "NUMBER", "on", "finish", "try", "resolve", "fn", "buffer", "catch", "err", "reject", "err", "if", "fnErr", "promise", "promise", "NUMBER", "catch", "fnErr", "return", "promise", "promise", "return", "this", "NUMBER", "en", "x", "x", "catch", "fn", "return", "this", "NUMBER", "promise", "NUMBER", "catch", "fn", "TAG", "I", "like", "the", "suggestion", "to", "implement", "the", "then", "and", "catch", "methods", "on", "the", "AsyncWriter", "instance", "NUMBER", "Let", "s", "go", "forward", "with", "that", "approach", "NUMBER", "FYI", "it", "should", "be", "sufficient", "to", "add", "the", "then", "and", "catch", "methods", "to", "OutMixins", "NUMBER", "js", "LINK", "js", "marko", "blob", "master", "runtime", "OutMixins", "NUMBER", "js", "since", "those", "mixins", "be", "add", "to", "both", "AsyncStream", "and", "AsyncVDOMBuilder", "NOTE", "We", "want", "to", "follow", "the", "rules", "for", "having", "a", "consistent", "rendering", "API", "LINK", "js", "marko", "issue", "NUMBER", "That", "be", "javascript", "template", "NUMBER", "render", "NUMBER", "en", "function", "out", "out", "NUMBER", "appendTo", "document", "NUMBER", "body", "Thanks", "for", "the", "improvement", "I", "ll", "publish", "in", "just", "a", "bit", "New", "version", "publish", "marko", "NUMBER", "Thanks", "again", "NUMBER", "The", "user", "of", "the", "data", "grid", "component", "can", "pass", "a", "renderer", "input", "out", "function", "associated", "with", "a", "UI", "component", "to", "the", "data", "grid", "component", "for", "use", "as", "a", "cell", "renderer", "_In", "JavaScript_", "javascript", "var", "cellRenderer", "require", "src", "components", "app", "my", "component", "NUMBER", "renderer", "Usage", "of", "the", "data", "grid", "custom", "tag", "within", "a", "template", "xml", "TAG", "Within", "the", "template", "for", "the", "data", "grid", "component", "the", "cell", "renderer", "can", "be", "invoked", "similar", "to", "the", "following", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "Let", "me", "know", "if", "that", "doesn", "t", "answer", "your", "question", "NUMBER", "We", "ll", "be", "simplifying", "this", "as", "part", "of", "Marko", "v", "NUMBER", "LINK", "js", "marko", "issue", "NUMBER", "Closing", "this", "issue", "NUMBER", "Do", "you", "have", "any", "specific", "use", "cases", "in", "mind", "Would", "something", "like", "a", "Marko", "DevTools", "chrome", "extension", "be", "better", "suited", "for", "accomplishing", "your", "goal", "Would", "be", "nice", "to", "have", "a", "convention", "for", "enabling", "Marko", "Debug", "Mode", "NUMBER", "For", "example", "via", "an", "environment", "variable", "DEBUG", "marko", "node", "server", "NUMBER", "js", "In", "debug", "mode", "we", "could", "add", "extra", "information", "to", "template", "NUMBER", "For", "example", "What", "if", "we", "automatically", "add", "a", "data", "template", "path", "attribute", "to", "the", "root", "HTML", "element", "s", "of", "every", "compiled", "template", "html", "TAG", "TAG", "Foo", "TAG", "TAG", "TAG", "TAG", "Bar", "TAG", "TAG", "TAG", "TAG", "This", "information", "could", "be", "helpful", "to", "developers", "but", "it", "could", "also", "be", "use", "to", "enable", "more", "advance", "in", "browser", "development", "tool", "NUMBER", "Comments", "might", "provide", "more", "info", "if", "say", "bar", "include", "baz", "html", "TAG", "TAG", "TAG", "Foo", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Baz", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Thanks", "davidenq", "I", "probably", "won", "t", "have", "a", "chance", "to", "take", "a", "closer", "look", "until", "next", "week", "but", "I", "m", "thinking", "we", "should", "stick", "with", "the", "componentized", "directory", "structure", "with", "a", "src", "components", "directory", "and", "a", "src", "pages", "directory", "NUMBER", "Thoughts", "Thanks", "for", "sharing", "jsumners", "I", "update", "the", "Hapi", "docs", "to", "correctly", "set", "the", "content", "type", "header", "LINK", "js", "marko", "commit", "NUMBER", "c", "NUMBER", "dc", "NUMBER", "e", "NUMBER", "dbd", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "c", "Added", "sample", "LINK", "js", "samples", "marko", "hapi", "felixsanz", "I", "think", "you", "should", "proceed", "with", "the", "solution", "that", "I", "recommended", "because", "TAG", "be", "treated", "very", "special", "inside", "Parser", "NUMBER", "js", "and", "never", "gets", "add", "to", "the", "AST", "so", "I", "don", "t", "think", "patrick", "steele", "idem", "s", "suggestion", "would", "help", "here", "NUMBER", "I", "would", "recommend", "setting", "some", "type", "of", "_flag_", "to", "true", "to", "indicate", "that", "the", "next", "newline", "character", "should", "be", "discarded", "NUMBER", "The", "flag", "should", "be", "reset", "back", "to", "false", "after", "you", "processed", "the", "next", "block", "of", "character", "data", "so", "that", "you", "don", "t", "inadvertently", "remove", "the", "wrong", "newline", "character", "NUMBER", "yomed", "do", "your", "component", "file", "also", "live", "in", "a", "directory", "that", "matches", "the", "same", "name", "For", "example", "do", "you", "have", "something", "like", "my", "widget", "my", "widget", "NUMBER", "marko", "my", "widget", "my", "widget", "NUMBER", "less", "my", "widget", "my", "widget", "NUMBER", "js", "I", "m", "wondering", "if", "we", "should", "add", "one", "more", "convention", "that", "will", "check", "for", "NUMBER", "marko", "file", "that", "has", "a", "filename", "ignoring", "the", "extension", "that", "matches", "the", "component", "directory", "Alternatively", "maybe", "we", "can", "read", "this", "setting", "from", "the", "marko", "NUMBER", "json", "file", "or", "marko", "taglib", "NUMBER", "json", "in", "v", "NUMBER", "Similar", "to", "how", "the", "directory", "that", "will", "be", "scanned", "to", "find", "components", "can", "be", "configured", "NUMBER", "I", "use", "to", "name", "my", "component", "file", "similar", "to", "your", "convention", "but", "then", "I", "decided", "to", "embrace", "the", "Marko", "convention", "since", "it", "do", "have", "some", "nice", "benefits", "NUMBER", "Specifically", "I", "like", "these", "benefits", "of", "the", "standard", "convention", "Easy", "to", "copy", "paste", "a", "directory", "to", "clone", "an", "exist", "component", "don", "t", "have", "to", "rename", "the", "individual", "file", "The", "convention", "do", "help", "keep", "Marko", "projects", "similar", "to", "each", "other", "and", "each", "component", "has", "similar", "file", "NUMBER", "The", "downside", "be", "that", "you", "might", "need", "to", "type", "a", "little", "extra", "into", "your", "IDE", "s", "search", "box", "when", "searching", "for", "file", "NUMBER", "That", "said", "I", "don", "t", "think", "we", "ever", "wanted", "Marko", "Widgets", "to", "be", "_too_", "opinionated", "so", "I", "think", "we", "could", "consider", "allowing", "an", "alternative", "convention", "NUMBER", "I", "would", "be", "interested", "to", "hear", "thoughts", "from", "others", "NUMBER", "You", "can", "create", "a", "marko", "tag", "NUMBER", "json", "file", "with", "the", "following", "json", "template", "NUMBER", "my", "component", "NUMBER", "marko", "With", "that", "said", "I", "be", "curious", "as", "to", "why", "you", "think", "there", "be", "less", "typing", "when", "navigating", "in", "your", "IDE", "NUMBER", "For", "example", "in", "Atom", "or", "Sublime", "if", "I", "want", "to", "open", "a", "template", "file", "for", "a", "UI", "component", "I", "start", "typing", "a", "portion", "of", "the", "component", "name", "followed", "by", "a", "few", "letters", "in", "template", "or", "marko", "and", "then", "it", "will", "quickly", "take", "me", "to", "the", "template", "belong", "to", "a", "specific", "component", "thanks", "to", "fuzzy", "matching", "NUMBER", "For", "example", "screen", "shot", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "NUMBER", "pm", "LINK", "de", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "d", "NUMBER", "f", "NUMBER", "f", "NUMBER", "ae", "NUMBER", "png", "The", "only", "con", "that", "I", "be", "aware", "when", "not", "repeating", "the", "directory", "name", "be", "that", "Atom", "still", "doesn", "t", "differentiate", "the", "file", "correctly", "when", "there", "be", "multiple", "file", "with", "the", "same", "basename", "opened", "NUMBER", "I", "opened", "up", "an", "issue", "against", "Atom", "that", "be", "worth", "checking", "out", "LINK", "issuecomment", "NUMBER", "Also", "there", "be", "good", "reasons", "to", "keep", "the", "main", "file", "named", "index", "NUMBER", "js", "so", "won", "t", "it", "look", "strange", "to", "have", "one", "file", "named", "my", "component", "NUMBER", "marko", "and", "another", "named", "index", "NUMBER", "js", "Also", "repeating", "the", "directory", "name", "be", "not", "DRY", "and", "has", "all", "of", "the", "issue", "that", "philidem", "mention", "NUMBER", "Making", "the", "convention", "more", "flexible", "to", "allow", "a", "repeated", "directory", "name", "would", "introduce", "more", "file", "system", "checks", "so", "I", "would", "rather", "not", "go", "that", "route", "NUMBER", "We", "could", "in", "theory", "introduce", "a", "new", "setting", "that", "could", "be", "put", "in", "the", "marko", "NUMBER", "json", "file", "at", "the", "root", "of", "the", "project", "to", "change", "the", "convention", "or", "to", "allow", "a", "custom", "user", "resolver", "NUMBER", "With", "that", "said", "there", "be", "benefits", "to", "have", "more", "consistency", "within", "the", "community", "NUMBER", "For", "example", "we", "would", "like", "to", "introduce", "more", "developer", "tool", "to", "scaffold", "out", "new", "UI", "components", "and", "we", "would", "only", "want", "to", "support", "one", "convention", "NUMBER", "How", "attached", "be", "you", "to", "repeating", "the", "directory", "name", "in", "each", "of", "the", "nested", "file", "Like", "philidem", "I", "also", "start", "out", "with", "the", "repeated", "directory", "name", "in", "nested", "file", "but", "I", "switched", "and", "I", "would", "never", "go", "back", "NUMBER", "I", "would", "be", "in", "favor", "of", "use", "the", "official", "reserved", "words", "for", "ES", "NUMBER", "and", "beyond", "NUMBER", "However", "maybe", "we", "should", "add", "a", "warning", "to", "discourage", "their", "usage", "and", "maybe", "also", "add", "an", "option", "to", "disable", "the", "warning", "We", "could", "rely", "on", "a", "environment", "property", "as", "quick", "hack", "which", "would", "require", "smaller", "code", "change", "NUMBER", "For", "example", "something", "like", "MARKO_DISABLE_RESERVED_WORD_WARNING", "true", "NUMBER", "build", "NUMBER", "sh", "disable", "the", "warning", "and", "launch", "the", "build", "NUMBER", "That", "would", "be", "a", "bug", "if", "reserved", "words", "be", "not", "be", "allow", "as", "property", "names", "NUMBER", "The", "intention", "was", "to", "only", "not", "allow", "reserved", "words", "as", "variable", "names", "javascript", "Should", "not", "be", "allow", "var", "short", "foo", "The", "following", "should", "be", "fine", "though", "data", "NUMBER", "short", "foo", "I", "ll", "add", "a", "test", "case", "to", "see", "if", "I", "can", "reproduce", "NUMBER", "If", "I", "be", "not", "able", "to", "reproduce", "I", "ll", "probably", "ask", "for", "more", "details", "NUMBER", "I", "realize", "I", "be", "slow", "to", "reply", "to", "this", "but", "it", "s", "a", "little", "hard", "to", "say", "with", "the", "issue", "be", "NUMBER", "From", "what", "I", "can", "tell", "maybe", "both", "the", "renderer", "NUMBER", "js", "and", "template", "NUMBER", "marko", "be", "not", "be", "find", "I", "think", "I", "might", "need", "to", "take", "a", "closer", "a", "look", "at", "your", "code", "when", "you", "get", "a", "chance", "NUMBER", "yomed", "I", "m", "closing", "this", "re", "open", "it", "if", "it", "still", "needs", "to", "be", "address", "Thanks", "for", "PR", "scttdavs", "NUMBER", "I", "have", "backported", "the", "improvement", "to", "Marko", "v", "NUMBER", "and", "publish", "a", "new", "version", "marko", "NUMBER", "Thanks", "again", "NUMBER", "Here", "s", "one", "proposal", "xml", "TAG", "TAG", "TAG", "TAG", "The", "TAG", "tag", "would", "import", "another", "tag", "_renderer", "function_", "at", "compile", "time", "and", "the", "tag", "rendering", "function", "would", "be", "accessible", "use", "the", "provide", "variable", "NUMBER", "The", "following", "would", "also", "work", "xml", "TAG", "TAG", "TAG", "In", "either", "case", "the", "compiled", "code", "would", "be", "probably", "be", "similar", "to", "the", "following", "javascript", "function", "create", "__helpers", "var", "str", "__helpers", "NUMBER", "s", "empty", "__helpers", "NUMBER", "e", "notEmpty", "__helpers", "NUMBER", "ne", "escapeXml", "__helpers", "NUMBER", "x", "__loadTag", "__helpers", "NUMBER", "t", "componentA", "__loadTag", "require", "NUMBER", "component", "a", "renderer", "componentB", "__loadTag", "require", "NUMBER", "component", "B", "renderer", "return", "function", "render", "data", "out", "foo", "componentA", "componentB", "name", "World", "count", "NUMBER", "out", "module", "NUMBER", "export", "require", "marko", "NUMBER", "c", "__filename", "NUMBER", "c", "create", "Thoughts", "Suggestions", "Concerns", "yomed", "tindli", "philidem", "Thoughts", "mlrawlings", "I", "like", "your", "suggestion", "of", "use", "TAG", "to", "denote", "tag", "name", "and", "NUMBER", "to", "denote", "module", "NUMBER", "Hopefully", "it", "s", "not", "too", "clever", "but", "I", "d", "use", "this", "feature", "scttdavs", "Resolving", "a", "custom", "tag", "be", "relatively", "expensive", "and", "requires", "reading", "from", "the", "file", "system", "and", "require", "calls", "really", "need", "to", "be", "analyzable", "via", "static", "code", "analysis", "so", "that", "things", "will", "work", "with", "a", "JavaScript", "module", "bundler", "NUMBER", "For", "the", "completely", "dynamic", "use", "case", "it", "s", "best", "to", "use", "TAG", "and", "to", "just", "pass", "in", "the", "component", "renderer", "for", "each", "component", "NUMBER", "Closing", "this", "issue", "in", "favor", "of", "extending", "TAG", "to", "support", "rendering", "components", "custom", "tags", "Issue", "NUMBER", "Allow", "dynamic", "custom", "tags", "to", "be", "use", "with", "TAG", "LINK", "js", "marko", "issue", "NUMBER", "Thanks", "yomed", "NUMBER", "We", "be", "very", "close", "to", "a", "alpha", "release", "and", "I", "m", "excited", "for", "others", "to", "start", "use", "the", "new", "Marko", "Still", "a", "few", "more", "tasks", "left", "before", "the", "first", "alpha", "release", "LINK", "js", "marko", "issue", "q", "be", "NUMBER", "Aopen", "be", "NUMBER", "Aissue", "milestone", "NUMBER", "A", "NUMBER", "alpha", "There", "were", "a", "lot", "of", "commit", "across", "marko", "and", "htmljs", "parser", "LINK", "parser", "but", "we", "now", "have", "a", "much", "more", "extensive", "test", "suite", "well", "over", "NUMBER", "individual", "test", "and", "counting", "for", "marko", "marko", "widgets", "and", "htmljs", "parser", "so", "I", "feel", "free", "confident", "that", "things", "will", "work", "as", "expected", "NUMBER", "We", "hope", "to", "have", "an", "alpha", "release", "early", "next", "week", "and", "the", "migration", "tool", "will", "come", "a", "little", "later", "NUMBER", "This", "be", "the", "first", "time", "I", "have", "heard", "about", "this", "but", "I", "have", "not", "had", "to", "a", "lot", "of", "development", "for", "mobile", "NUMBER", "Without", "actually", "trying", "to", "reproduce", "it", "would", "appear", "that", "yomed", "be", "right", "and", "that", "maybe", "Safari", "be", "not", "recognizing", "the", "elements", "as", "clickable", "and", "be", "not", "bothering", "to", "emit", "an", "onclick", "event", "NUMBER", "Here", "be", "the", "relevant", "section", "in", "the", "Safari", "developer", "docs", "LINK", "apple_ref", "doc", "uid", "TP", "NUMBER", "SW", "NUMBER", "It", "appears", "that", "a", "workaround", "might", "be", "to", "attach", "a", "dummy", "onclick", "handler", "html", "TAG", "NUMBER", "TAG", "pcanella", "or", "yomed", "can", "either", "of", "you", "verify", "the", "dummy", "onclick", "workaround", "We", "actually", "make", "the", "decision", "at", "compile", "time", "on", "whether", "or", "not", "to", "use", "event", "delegation", "or", "direct", "event", "listeners", "based", "on", "the", "event", "type", "LINK", "js", "marko", "widgets", "blob", "NUMBER", "a", "NUMBER", "f", "NUMBER", "bcdbd", "NUMBER", "a", "NUMBER", "c", "NUMBER", "fdb", "NUMBER", "b", "NUMBER", "a", "NUMBER", "bc", "NUMBER", "taglib", "TransformHelper", "handleWidgetEvents", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "We", "could", "special", "case", "the", "click", "event", "and", "add", "code", "to", "do", "a", "direct", "event", "listener", "in", "mobile", "Safari", "and", "rely", "on", "event", "delegation", "in", "all", "other", "browsers", "NUMBER", "If", "more", "details", "can", "be", "provide", "then", "we", "can", "definitely", "look", "into", "some", "possible", "fix", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "For", "the", "record", "add", "onclick", "pointer", "to", "the", "style", "of", "your", "element", "causes", "Safari", "to", "trigger", "a", "click", "event", "when", "you", "touch", "it", "on", "mobile", "NUMBER", "Nice", "to", "see", "that", "you", "be", "digging", "into", "the", "code", "for", "the", "Marko", "v", "NUMBER", "compiler", "I", "understand", "why", "you", "be", "expecting", "a", "different", "output", "but", "the", "reason", "you", "be", "seeing", "the", "behavior", "that", "you", "be", "seeing", "be", "that", "at", "parse", "time", "we", "build", "all", "of", "the", "nodes", "in", "the", "AST", "based", "on", "the", "tag", "definitions", "and", "we", "associate", "the", "code", "generator", "when", "the", "node", "be", "initially", "created", "NUMBER", "Therefore", "when", "the", "Marko", "parser", "encounters", "the", "TAG", "node", "it", "be", "creating", "an", "HtmlElement", "node", "and", "the", "HtmlElement", "NUMBER", "prototype", "NUMBER", "generateHtmlCode", "method", "be", "be", "use", "as", "the", "code", "generator", "for", "the", "node", "NUMBER", "Changing", "the", "tag", "name", "do", "_not_", "change", "the", "code", "generator", "and", "I", "think", "it", "be", "best", "to", "keep", "that", "way", "NUMBER", "However", "you", "can", "create", "a", "new", "replacement", "node", "in", "your", "transformer", "instead", "of", "modifying", "the", "exist", "node", "javascript", "module", "NUMBER", "export", "function", "transform", "el", "context", "console", "NUMBER", "log", "CALLED", "TRANSFORM", "if", "el", "NUMBER", "getAttributeValue", "transform", "var", "newTagName", "new", "var", "newAttributes", "foo", "context", "NUMBER", "builder", "NUMBER", "literal", "bar", "var", "newEl", "context", "NUMBER", "createNodeForEl", "newTagName", "newAttributes", "el", "NUMBER", "replaceWith", "newEl", "Remove", "the", "old", "HtmlElement", "out", "of", "the", "tree", "and", "replace", "it", "with", "the", "new", "one", "NOTE", "I", "just", "add", "the", "replaceWith", "newNode", "method", "as", "a", "convenience", "method", "see", "LINK", "js", "marko", "commit", "NUMBER", "ce", "NUMBER", "c", "NUMBER", "afaa", "NUMBER", "f", "NUMBER", "bc", "NUMBER", "e", "NUMBER", "d", "NUMBER", "ddf", "NUMBER", "b", "NUMBER", "You", "will", "need", "to", "pull", "the", "latest", "code", "if", "you", "want", "to", "test", "the", "above", "code", "NUMBER", "Hope", "that", "makes", "sense", "NUMBER", "Please", "let", "us", "know", "if", "you", "have", "any", "other", "question", "thoughts", "concerns", "NUMBER", "Thanks", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "feel", "free", "to", "respond", "here", "NUMBER", "Why", "be", "you", "bundling", "the", "Marko", "compiler", "I", "feel", "like", "all", "that", "should", "be", "bundled", "be", "the", "compiled", "template", "and", "the", "marko", "runtime", "NUMBER", "Hey", "stevus", "it", "looks", "like", "you", "be", "use", "browserify", "to", "build", "a", "JavaScript", "bundle", "to", "be", "loaded", "on", "the", "server", "not", "the", "browser", "NUMBER", "That", "s", "not", "the", "normal", "use", "case", "and", "it", "breaks", "dynamic", "requires", "NUMBER", "However", "let", "me", "see", "if", "I", "can", "put", "in", "a", "workaround", "for", "you", "NUMBER", "Fixed", "NUMBER", "See", "LINK", "logging", "issue", "NUMBER", "New", "version", "of", "raptor", "logging", "publish", "raptor", "logging", "NUMBER", "Please", "let", "me", "know", "if", "that", "works", "for", "you", "NUMBER", "Seems", "reasonable", "what", "you", "be", "trying", "to", "do", "but", "you", "might", "run", "into", "edges", "like", "this", "again", "NUMBER", "With", "a", "few", "tweak", "to", "the", "current", "parser", "we", "could", "simultaneously", "support", "a", "new", "concise", "Jade", "like", "syntax", "NUMBER", "A", "sampling", "of", "the", "propose", "syntax", "be", "shown", "below", "xml", "TAG", "var", "colors", "red", "green", "blue", "TAG", "ul", "if", "notEmpty", "colors", "li", "for", "color", "in", "colors", "TAG", "color", "TAG", "div", "else", "No", "colors", "TAG", "greeting", "name", "Frank", "message", "count", "NUMBER", "TAG", "macro", "navLink", "href", "title", "isActive", "li", "class", "isActive", "active", "null", "TAG", "TAG", "title", "TAG", "ul", "navLink", "href", "title", "Home", "isActive", "true", "navLink", "about", "About", "false", "From", "various", "interactions", "I", "have", "find", "that", "there", "be", "a", "lot", "of", "people", "who", "would", "consider", "use", "Marko", "but", "much", "prefer", "the", "Jade", "syntax", "NUMBER", "On", "the", "flip", "side", "there", "be", "a", "lot", "of", "developers", "that", "dislike", "the", "Jade", "style", "syntax", "because", "it", "be", "too", "far", "remove", "from", "real", "HTML", "NUMBER", "With", "that", "in", "mind", "Marko", "has", "a", "lot", "of", "benefits", "that", "be", "independent", "of", "the", "input", "syntax", "dialect", "High", "performance", "and", "minimal", "runtime", "Custom", "tags", "Extensible", "at", "compile", "time", "Async", "rendering", "CommonJS", "modules", "as", "compile", "output", "Marko", "Widgets", "support", "etc", "NUMBER", "The", "input", "template", "be", "relatively", "small", "but", "important", "piece", "of", "Marko", "NUMBER", "I", "believe", "that", "if", "we", "can", "offer", "a", "Jade", "like", "dialect", "for", "Marko", "then", "we", "will", "be", "able", "to", "attract", "additional", "developers", "to", "the", "project", "NUMBER", "It", "s", "of", "course", "worth", "point", "out", "the", "negatives", "of", "support", "an", "alternate", "dialect", "Fragmentation", "within", "the", "Marko", "community", "Development", "cost", "of", "support", "a", "two", "dialects", "hopefully", "a", "minimal", "one", "time", "cost", "Regarding", "Fragmentation", "within", "the", "Marko", "community", "my", "thinking", "that", "be", "better", "to", "grow", "the", "community", "NUMBER", "In", "addition", "I", "want", "to", "keep", "the", "two", "dialects", "very", "similar", "such", "that", "there", "be", "a", "direct", "and", "perfect", "translation", "between", "the", "two", "NUMBER", "In", "fact", "we", "could", "easily", "provide", "tool", "for", "converted", "from", "one", "dialect", "to", "the", "other", "with", "no", "change", "in", "behavior", "or", "loss", "of", "information", "NUMBER", "Regarding", "Development", "cost", "of", "support", "a", "two", "dialects", "I", "do", "feel", "like", "development", "effort", "be", "not", "too", "burdensome", "and", "it", "will", "be", "a", "single", "parser", "that", "support", "both", "dialects", "NUMBER", "We", "be", "leaning", "towards", "use", "an", "alternate", "NUMBER", "jarko", "file", "extension", "for", "Marko", "with", "the", "Jade", "like", "syntax", "NUMBER", "All", "of", "the", "Marko", "documentation", "would", "use", "the", "non", "concise", "syntax", "and", "there", "would", "be", "one", "page", "of", "documentation", "that", "would", "explain", "the", "rules", "for", "the", "concise", "syntax", "for", "those", "who", "want", "to", "use", "it", "NUMBER", "I", "opened", "the", "issue", "to", "invite", "discussion", "so", "if", "you", "have", "any", "other", "thoughts", "please", "share", "NUMBER", "I", "was", "on", "the", "fence", "about", "this", "at", "first", "but", "there", "a", "lot", "of", "people", "that", "be", "passionate", "about", "Jade", "so", "there", "must", "be", "some", "merit", "for", "its", "success", "NUMBER", "One", "of", "the", "subtle", "but", "elegant", "things", "about", "the", "_jarko_", "dialect", "that", "has", "be", "propose", "be", "that", "you", "could", "drop", "in", "normal", "HTML", "or", "Marko", "and", "it", "would", "just", "work", "because", "the", "parser", "would", "know", "to", "switch", "to", "HTML", "Marko", "mode", "when", "it", "sees", "an", "open", "tag", "NUMBER", "If", "Jarko", "was", "available", "I", "would", "definitely", "give", "a", "try", "to", "see", "if", "it", "would", "grow", "on", "me", "NUMBER", "I", "might", "enjoy", "not", "having", "to", "type", "all", "of", "those", "TAG", "characters", "NUMBER", "Also", "do", "anyone", "feel", "like", "the", "_Jarko_", "name", "be", "a", "bad", "idea", "Could", "it", "lead", "to", "confusion", "The", "alternative", "might", "be", "that", "we", "refer", "to", "it", "as", "_concise", "Marko_", "but", "I", "be", "not", "sure", "if", "that", "be", "better", "NUMBER", "Initially", "I", "didn", "t", "think", "it", "was", "a", "good", "idea", "but", "I", "feel", "like", "the", "concise", "syntax", "might", "grow", "on", "me", "as", "well", "NUMBER", "It", "would", "need", "proper", "editor", "support", "for", "good", "syntax", "highlight", "NUMBER", "I", "suspect", "that", "if", "I", "were", "to", "use", "the", "concise", "syntax", "then", "I", "might", "have", "a", "hard", "time", "switching", "back", "to", "the", "non", "concise", "syntax", "NUMBER", "I", "like", "that", "the", "concise", "syntax", "allows", "the", "normal", "HTML", "syntax", "to", "be", "mix", "in", "NUMBER", "This", "allows", "regular", "HTML", "to", "be", "pasted", "in", "without", "having", "to", "take", "the", "time", "to", "reformat", "it", "NUMBER", "I", "m", "very", "curious", "to", "se", "what", "the", "community", "thinks", "as", "well", "NUMBER", "I", "m", "willing", "to", "put", "this", "out", "there", "as", "an", "experiment", "to", "see", "what", "others", "gravitate", "to", "NUMBER", "I", "be", "aware", "of", "the", "rename", "to", "pug", "but", "a", "lot", "of", "people", "be", "still", "going", "to", "remember", "it", "as", "Jade", "NUMBER", "The", "name", "mug", "was", "also", "propose", "which", "kind", "of", "fits", "in", "nicely", "with", "the", "coffee", "java", "javascript", "theme", "NUMBER", "What", "be", "your", "thoughts", "on", "mug", "as", "the", "dialect", "name", "As", "far", "as", "as", "the", "development", "effort", "to", "support", "another", "dialect", "I", "think", "patrick", "steele", "idem", "has", "do", "a", "lot", "of", "great", "work", "to", "make", "the", "effort", "minimal", "so", "I", "don", "t", "think", "that", "be", "a", "big", "concern", "but", "maybe", "we", "d", "learn", "differently", "after", "experimenting", "a", "little", "NUMBER", "The", "event", "based", "parser", "would", "emit", "the", "same", "events", "for", "both", "dialects", "so", "might", "not", "be", "that", "bad", "NUMBER", "There", "be", "only", "two", "hard", "things", "in", "Computer", "Science", "cache", "invalidation", "and", "naming", "things", "NUMBER", "Phil", "Karlton", "As", "tindli", "mention", "NUMBER", "We", "have", "no", "intentions", "to", "get", "rid", "of", "the", "HTML", "syntax", "NUMBER", "We", "be", "only", "trying", "to", "figure", "out", "if", "the", "HTML", "dialect", "can", "coexist", "with", "the", "concise", "syntax", "NUMBER", "We", "have", "the", "following", "options", "NUMBER", "Only", "allow", "concise", "syntax", "for", "a", "separate", "file", "extension", "e", "NUMBER", "g", "NUMBER", "NUMBER", "jarko", "NUMBER", "Allow", "concise", "syntax", "and", "HTML", "syntax", "in", "same", "file", "starting", "out", "in", "concise", "mode", "be", "probably", "the", "only", "good", "option", "NUMBER", "Don", "t", "bother", "with", "concise", "syntax", "at", "all", "Supporting", "mix", "dialects", "in", "the", "same", "file", "option", "NUMBER", "almost", "works", "perfectly", "exactly", "when", "a", "developer", "who", "prefers", "HTML", "wants", "to", "put", "plain", "text", "at", "the", "root", "outside", "an", "HTML", "tag", "NUMBER", "The", "parser", "would", "need", "to", "start", "out", "in", "concise", "mode", "and", "that", "would", "cause", "the", "first", "word", "of", "the", "plain", "text", "to", "be", "incorrectly", "interpreted", "as", "a", "tag", "name", "it", "needs", "to", "be", "prefixed", "There", "s", "also", "still", "some", "debates", "around", "the", "concise", "syntax", "NUMBER", "tindli", "point", "out", "that", "NUMBER", "might", "be", "a", "better", "choice", "since", "you", "don", "t", "have", "to", "press", "the", "shift", "key", "easier", "to", "type", "NUMBER", "I", "would", "much", "prefer", "to", "avoid", "the", "shift", "key", "NUMBER", "I", "was", "under", "the", "impression", "that", "Marko", "was", "designed", "to", "adhere", "to", "the", "Rule", "of", "Least", "Power", "NUMBER", "By", "promoting", "Jade", "it", "s", "no", "longer", "adhering", "to", "that", "rule", "NUMBER", "danrichman", "For", "Marko", "v", "NUMBER", "syntax", "and", "the", "concise", "Jade", "like", "syntax", "would", "parse", "into", "exactly", "the", "same", "AST", "the", "same", "internal", "representation", "NUMBER", "Therefore", "there", "would", "be", "no", "difference", "in", "power", "NUMBER", "The", "Jade", "like", "syntax", "be", "just", "HTML", "without", "TAG", "and", "indentation", "be", "use", "to", "control", "nesting", "and", "there", "be", "one", "extra", "prefix", "symbol", "to", "escape", "out", "of", "indentation", "mode", "NUMBER", "everything", "else", "be", "identical", "NUMBER", "Neither", "dialect", "brings", "any", "extra", "power", "to", "the", "table", "NUMBER", "patrick", "steele", "idem", "Isn", "t", "there", "more", "to", "Jade", "than", "that", "Conditionals", "extend", "etc", "NUMBER", "Wouldn", "t", "Jade", "developers", "just", "end", "up", "demanding", "those", "more", "powerful", "features", "danrichman", "maybe", "starting", "this", "conversation", "with", "Jade", "was", "a", "bad", "idea", "NUMBER", "We", "be", "less", "interested", "in", "the", "features", "of", "Jade", "and", "more", "interested", "in", "the", "concise", "syntax", "that", "it", "offers", "NUMBER", "Wouldn", "t", "Jade", "developers", "just", "end", "up", "demanding", "those", "more", "powerful", "features", "Marko", "has", "all", "those", "features", "and", "more", "already", "but", "in", "just", "a", "different", "form", "NUMBER", "For", "example", "Marko", "doesn", "t", "have", "support", "for", "an", "extend", "keyword", "but", "it", "do", "offer", "a", "layout", "taglib", "for", "doing", "the", "same", "thing", "in", "a", "cleaner", "and", "more", "extensible", "way", "I", "would", "argue", "at", "least", "NUMBER", "Marko", "has", "conditionals", "looping", "custom", "tags", "etc", "NUMBER", "Good", "points", "danrichman", "Maybe", "we", "should", "deviate", "more", "from", "Jade", "to", "make", "the", "distinction", "clear", "NUMBER", "We", "be", "not", "trying", "to", "be", "Jade", "I", "think", "the", "rules", "for", "Jade", "be", "overly", "complicated", "and", "error", "prone", "but", "we", "be", "trying", "to", "potentially", "appeal", "to", "people", "who", "like", "a", "minimal", "syntax", "and", "that", "don", "t", "like", "typing", "a", "lot", "of", "redundant", "symbols", "NUMBER", "I", "m", "going", "to", "give", "the", "concise", "syntax", "some", "more", "thought", "over", "the", "weekend", "and", "will", "share", "more", "later", "NUMBER", "Thank", "you", "all", "for", "your", "feedback", "danrichman", "thanks", "for", "point", "us", "to", "the", "Angular", "discussion", "NUMBER", "I", "imagine", "it", "might", "be", "more", "confusing", "use", "two", "distinct", "templating", "engines", "not", "just", "different", "dialects", "to", "build", "a", "page", "as", "be", "the", "case", "when", "doing", "server", "side", "rendering", "of", "page", "build", "for", "Angular", "NUMBER", "I", "was", "never", "a", "fan", "of", "Angular", "because", "of", "the", "inability", "to", "pre", "compile", "template", "and", "I", "think", "they", "kind", "of", "created", "that", "problem", "themselves", "and", "I", "don", "t", "think", "they", "have", "a", "good", "solution", "NUMBER", "I", "don", "t", "think", "Marko", "has", "that", "issue", "since", "the", "client", "and", "server", "templating", "language", "will", "be", "same", "regardless", "of", "whether", "it", "s", "the", "concise", "or", "non", "concise", "dialect", "NUMBER", "Thanks", "scttdavs", "Good", "to", "hear", "from", "the", "Jade", "camp", "I", "ve", "always", "had", "an", "easier", "time", "reading", "HTML", "with", "all", "of", "the", "extra", "braces", "but", "I", "be", "sure", "that", "be", "more", "due", "to", "what", "I", "be", "use", "to", "NUMBER", "I", "think", "I", "have", "always", "rationalized", "typing", "a", "few", "extra", "characters", "for", "the", "sake", "of", "readability", "NUMBER", "It", "might", "be", "time", "to", "retrain", "my", "brain", "so", "that", "I", "can", "get", "faster", "readability", "and", "less", "typing", "NUMBER", "I", "m", "still", "in", "favor", "of", "offering", "a", "new", "concise", "syntax", "as", "an", "experiment", "and", "give", "people", "the", "challenge", "to", "try", "it", "for", "a", "little", "while", "to", "see", "if", "we", "can", "change", "some", "opinions", "NUMBER", "I", "m", "curious", "how", "my", "own", "productivity", "would", "be", "impacted", "NUMBER", "Thanks", "for", "sharing", "your", "thoughts", "scttdavs", "But", "then", "again", "I", "ve", "use", "haml", "and", "jade", "for", "years", "so", "the", "HTML", "like", "syntax", "seems", "like", "a", "step", "backward", "to", "me", "NUMBER", "I", "have", "heard", "a", "lot", "of", "similar", "comments", "from", "people", "who", "like", "Jade", "NUMBER", "From", "what", "I", "have", "gathered", "those", "who", "have", "use", "Jade", "or", "HAML", "and", "stuck", "with", "it", "would", "have", "a", "really", "hard", "time", "going", "back", "to", "HTML", "NUMBER", "For", "my", "own", "benefit", "I", "took", "the", "time", "to", "find", "some", "real", "world", "Marko", "template", "from", "the", "eBay", "code", "base", "and", "converted", "them", "by", "hand", "over", "to", "the", "concise", "syntax", "NUMBER", "I", "pick", "samples", "that", "were", "on", "the", "large", "complex", "side", "and", "be", "finding", "that", "the", "HTML", "based", "template", "just", "look", "more", "complex", "than", "they", "really", "be", "and", "it", "takes", "me", "longer", "to", "make", "sense", "of", "the", "code", "NUMBER", "I", "m", "starting", "to", "feel", "that", "the", "concise", "syntax", "be", "something", "that", "can", "grow", "on", "you", "but", "that", "most", "people", "me", "include", "initially", "dislike", "it", "NUMBER", "I", "m", "going", "to", "continue", "to", "experiment", "with", "the", "concise", "syntax", "NUMBER", "Thanks", "again", "for", "sharing", "your", "thoughts", "NUMBER", "Hey", "danrichman", "I", "definitely", "understand", "where", "you", "be", "come", "from", "and", "share", "your", "concern", "about", "documentation", "NUMBER", "As", "a", "point", "of", "comparison", "Markdown", "be", "kind", "of", "a", "similar", "story", "NUMBER", "Markdown", "be", "a", "concise", "version", "of", "HTML", "but", "it", "lets", "you", "drop", "into", "HTML", "mode", "at", "anytime", "NUMBER", "Therefore", "with", "Markdown", "you", "can", "use", "the", "concise", "Markdown", "syntax", "to", "produce", "HTML", "documents", "or", "you", "can", "use", "regular", "old", "HTML", "NUMBER", "With", "that", "approach", "you", "kind", "of", "get", "the", "best", "of", "both", "worlds", "and", "everyone", "be", "happy", "NUMBER", "The", "HTML", "within", "Markdown", "file", "be", "in", "no", "way", "limited", "by", "the", "support", "for", "a", "concise", "Markdown", "syntax", "NUMBER", "It", "s", "worth", "noting", "that", "you", "can", "t", "switch", "to", "concise", "Markdown", "mode", "within", "an", "HTML", "tag", "NUMBER", "What", "if", "Marko", "support", "something", "similar", "and", "allow", "both", "concise", "HTML", "and", "regular", "HTML", "within", "the", "same", "Marko", "file", "This", "could", "not", "be", "do", "with", "a", "plugin", "and", "instead", "it", "would", "require", "a", "more", "flexible", "template", "parser", "NUMBER", "Sure", "you", "could", "use", "two", "separate", "parsers", "or", "two", "separate", "plugins", "but", "that", "would", "be", "a", "lot", "of", "duplicate", "code", "when", "one", "happens", "to", "be", "a", "superset", "of", "the", "other", "assuming", "blended", "mode", "NUMBER", "If", "we", "want", "to", "ever", "support", "the", "blended", "mode", "within", "the", "same", "NUMBER", "marko", "file", "by", "_default_", "then", "it", "would", "need", "to", "happen", "before", "the", "next", "major", "release", "NUMBER", "The", "benefit", "of", "support", "the", "blended", "mode", "by", "default", "be", "that", "we", "would", "have", "a", "consistent", "file", "extension", "i", "NUMBER", "e", "NUMBER", "NUMBER", "marko", "that", "works", "for", "everyone", "NUMBER", "We", "have", "until", "the", "v", "NUMBER", "release", "to", "decide", "NUMBER", "If", "we", "be", "good", "with", "not", "support", "a", "blended", "mode", "then", "we", "could", "release", "support", "for", "a", "blended", "mode", "use", "a", "different", "file", "extension", "at", "any", "point", "in", "the", "future", "or", "never", "NUMBER", "Hey", "danrichman", "NUMBER", "That", "would", "be", "awful", "if", "periods", "were", "required", "for", "regular", "HTML", "but", "fortunately", "that", "option", "be", "not", "on", "the", "table", "With", "mix", "mode", "support", "the", "following", "document", "would", "be", "a", "completely", "valid", "Marko", "template", "and", "parse", "hopefully", "as", "you", "would", "expect", "xml", "TAG", "TAG", "TAG", "Heading", "NUMBER", "TAG", "Some", "TAG", "bold", "TAG", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "TAG", "Good", "thing", "there", "be", "no", "more", "periods", "NUMBER", "TAG", "TAG", "TAG", "div", "class", "something", "h", "NUMBER", "Heading", "NUMBER", "Some", "TAG", "bold", "TAG", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "div", "NUMBER", "something", "else", "Good", "thing", "there", "be", "no", "more", "periods", "NUMBER", "NOTE", "The", "sample", "template", "above", "uses", "the", "latest", "syntax", "that", "I", "be", "experimenting", "with", "NUMBER", "It", "has", "a", "lot", "of", "advantages", "over", "Jade", "and", "should", "feel", "very", "natural", "NUMBER", "Does", "that", "look", "good", "to", "Best", "of", "both", "worlds", "danrichman", "There", "will", "never", "be", "periods", "NUMBER", "I", "think", "the", "following", "sample", "template", "would", "be", "what", "you", "be", "looking", "for", "and", "it", "would", "also", "be", "completely", "valid", "xml", "another", "div", "TAG", "TAG", "TAG", "Heading", "NUMBER", "TAG", "Some", "TAG", "bold", "TAG", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "TAG", "Good", "thing", "there", "be", "no", "more", "periods", "NUMBER", "TAG", "TAG", "span", "NUMBER", "foo", "Hello", "data", "NUMBER", "name", "The", "above", "Marko", "template", "would", "render", "the", "following", "HTML", "html", "TAG", "TAG", "TAG", "TAG", "Heading", "NUMBER", "TAG", "Some", "TAG", "bold", "TAG", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "TAG", "Good", "thing", "there", "be", "no", "more", "periods", "NUMBER", "TAG", "TAG", "TAG", "Hello", "data", "NUMBER", "name", "TAG", "TAG", "The", "problem", "with", "Jade", "be", "that", "you", "can", "t", "simply", "paste", "in", "valid", "HTML", "code", "into", "a", "Jade", "document", "and", "expect", "things", "to", "work", "NUMBER", "We", "can", "definitely", "do", "better", "than", "Jade", "NUMBER", "If", "we", "get", "this", "right", "then", "I", "see", "no", "reason", "why", "anyone", "would", "want", "to", "use", "Jade", "NUMBER", "Marko", "v", "NUMBER", "now", "support", "mix", "mode", "parsing", "to", "allow", "the", "concise", "syntax", "and", "the", "HTML", "syntax", "within", "the", "same", "document", "NUMBER", "When", "the", "alpha", "release", "be", "publish", "hopefully", "soon", "we", "will", "continue", "to", "gather", "feedback", "NUMBER", "All", "docs", "will", "continue", "to", "use", "the", "HTML", "syntax", "since", "that", "be", "more", "approachable", "to", "new", "users", "NUMBER", "Hey", "grawlinson", "it", "looks", "like", "you", "be", "expecting", "well", "formed", "XML", "as", "output", "not", "HTML", "NUMBER", "be", "that", "correct", "The", "TAG", "tag", "happens", "to", "be", "defined", "by", "the", "HTML", "grammar", "as", "a", "self", "closing", "open", "only", "tag", "NUMBER", "Marko", "defaults", "to", "HTML", "mode", "NUMBER", "If", "you", "want", "well", "formed", "XML", "as", "output", "then", "you", "should", "use", "the", "NUMBER", "marko", "NUMBER", "xml", "file", "extension", "which", "may", "not", "be", "documented", "Please", "let", "me", "know", "if", "that", "works", "for", "you", "NUMBER", "Hey", "grawlinson", "you", "need", "to", "install", "the", "Node", "NUMBER", "js", "require", "extension", "for", "NUMBER", "marko", "NUMBER", "xml", "by", "doing", "the", "following", "javascript", "require", "marko", "node", "require", "NUMBER", "install", "extension", "NUMBER", "marko", "NUMBER", "xml", "Without", "that", "line", "Node", "NUMBER", "js", "be", "trying", "to", "load", "your", "NUMBER", "marko", "NUMBER", "xml", "file", "as", "a", "JavaScript", "module", "NUMBER", "Please", "let", "me", "know", "if", "that", "solves", "your", "problem", "or", "if", "you", "be", "still", "facing", "issue", "NUMBER", "It", "definitely", "needs", "some", "improvement", "NUMBER", "It", "needs", "to", "be", "more", "of", "a", "tutorial", "rather", "than", "a", "list", "of", "features", "that", "a", "beginner", "might", "find", "useful", "NUMBER", "I", "like", "the", "idea", "of", "filename", "labels", "NUMBER", "I", "think", "we", "could", "create", "a", "nice", "widget", "use", "Marko", "of", "course", "that", "could", "take", "a", "directory", "path", "and", "create", "the", "widget", "from", "that", "NUMBER", "Maybe", "it", "could", "be", "generate", "from", "a", "gist", "so", "that", "users", "on", "reading", "on", "github", "would", "still", "be", "able", "to", "view", "code", "snippets", "NUMBER", "Maybe", "that", "s", "not", "worth", "it", "and", "they", "should", "just", "read", "it", "on", "markojs", "NUMBER", "com", "NUMBER", "Several", "people", "have", "asked", "about", "the", "security", "implications", "of", "allowing", "end", "users", "to", "edit", "Marko", "template", "NUMBER", "I", "too", "have", "wished", "for", "this", "ability", "but", "have", "held", "off", "allowing", "it", "because", "it", "be", "currently", "unsafe", "NUMBER", "We", "should", "assess", "the", "options", "for", "loading", "and", "run", "template", "within", "a", "sandbox", "NUMBER", "Examples", "of", "unsafe", "template", "code", "include", "scriptlets", "e", "NUMBER", "g", "NUMBER", "process", "NUMBER", "exit", "NUMBER", "and", "JavaScript", "expressions", "e", "NUMBER", "g", "NUMBER", "TAG", "NUMBER", "Also", "the", "CommonJS", "Node", "NUMBER", "js", "require", "function", "be", "currently", "expose", "to", "the", "template", "which", "would", "allow", "the", "template", "to", "access", "the", "module", "cache", "this", "be", "dangerous", "NUMBER", "Two", "ideas", "have", "be", "propose", "to", "support", "this", "NUMBER", "Use", "the", "Node", "NUMBER", "js", "build", "in", "vm", "module", "to", "load", "and", "run", "Marko", "template", "within", "a", "sandbox", "NUMBER", "Staticly", "analyze", "the", "Marko", "template", "source", "code", "to", "find", "unsafe", "code", "and", "prevent", "compilation", "or", "provide", "whitelist", "of", "tags", "and", "features", "that", "can", "be", "use", "in", "sandbox", "mode", "Personally", "I", "think", "option", "NUMBER", "static", "analysis", "would", "be", "too", "error", "prone", "but", "it", "be", "worth", "exploring", "NUMBER", "Hey", "AminaG", "what", "option", "be", "you", "leaning", "towards", "sandbox", "or", "static", "code", "analysis", "One", "thing", "not", "mention", "by", "philidem", "be", "that", "the", "out", "could", "leak", "potentially", "sensitive", "objects", "if", "you", "be", "not", "careful", "NUMBER", "For", "example", "if", "you", "render", "to", "the", "HTTP", "response", "stream", "in", "an", "Express", "app", "then", "you", "could", "do", "the", "following", "javascript", "var", "res", "out", "NUMBER", "ream", "var", "app", "res", "NUMBER", "app", "User", "now", "has", "a", "reference", "to", "the", "Express", "app", "instance", "This", "can", "be", "avoided", "if", "you", "don", "t", "render", "directly", "to", "the", "HTTP", "response", "NUMBER", "For", "example", "javascript", "template", "NUMBER", "ream", "templateData", "NUMBER", "pipe", "res", "You", "also", "have", "to", "be", "careful", "with", "data", "stored", "in", "out", "NUMBER", "global", "see", "LINK", "guide", "global", "properties", "NUMBER", "Just", "wanted", "to", "make", "note", "of", "these", "subtle", "but", "important", "details", "for", "future", "reference", "NUMBER", "I", "think", "vm", "NUMBER", "spawns", "a", "new", "process", "which", "be", "a", "good", "option", "for", "most", "security", "NUMBER", "What", "if", "we", "use", "web", "worker", "They", "might", "have", "sufficient", "isolation", "as", "well", "NUMBER", "On", "Mon", "Dec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "AminaG", "notifications", "github", "NUMBER", "com", "write", "I", "prefer", "sandbox", "via", "vm", "or", "vm", "NUMBER", "LINK", "NUMBER", "Regular", "VM", "of", "node", "can", "make", "the", "entire", "process", "not", "responding", "while", "true", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "I", "m", "also", "leaning", "towards", "the", "sandbox", "at", "least", "for", "now", "NUMBER", "Fortunately", "the", "runtime", "for", "marko", "be", "tiny", "NUMBER", "All", "template", "loading", "happens", "in", "the", "following", "two", "function", "LINK", "js", "marko", "blob", "de", "NUMBER", "d", "NUMBER", "e", "NUMBER", "a", "NUMBER", "bf", "NUMBER", "d", "NUMBER", "f", "NUMBER", "aa", "NUMBER", "ccf", "runtime", "loader", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "Once", "you", "have", "the", "source", "you", "will", "need", "to", "load", "the", "source", "in", "a", "separate", "sandbox", "and", "you", "will", "need", "to", "provide", "your", "own", "pseudo", "globals", "require", "module", "__dirname", "__filename", "The", "sandbox", "will", "not", "have", "the", "Node", "NUMBER", "js", "module", "loading", "system", "but", "you", "will", "need", "to", "shim", "in", "a", "fake", "module", "loading", "system", "for", "marko", "to", "work", "NUMBER", "I", "m", "not", "convinced", "vm", "NUMBER", "be", "completely", "needed", "but", "out", "of", "process", "rendering", "of", "template", "be", "possible", "rendering", "will", "have", "to", "be", "async", "NUMBER", "Marko", "doesn", "t", "depend", "on", "any", "globals", "NUMBER", "You", "would", "just", "need", "to", "load", "the", "marko", "runtime", "in", "the", "separate", "process", "NUMBER", "However", "it", "be", "challenging", "to", "load", "the", "marko", "runtime", "without", "the", "Node", "NUMBER", "js", "module", "loading", "system", "NUMBER", "For", "that", "reason", "I", "think", "it", "be", "better", "to", "use", "an", "in", "process", "sandbox", "and", "have", "the", "runtime", "be", "loaded", "outside", "the", "sandbox", "but", "to", "have", "the", "template", "be", "loaded", "within", "the", "sandbox", "NUMBER", "If", "you", "want", "to", "try", "and", "load", "marko", "without", "a", "module", "loading", "system", "in", "a", "separate", "process", "then", "that", "will", "definitely", "be", "the", "safest", "but", "it", "again", "it", "will", "be", "more", "challenging", "without", "the", "Node", "NUMBER", "js", "module", "loading", "system", "NUMBER", "I", "think", "the", "JavaScript", "API", "should", "provide", "a", "sandbox", "option", "and", "if", "true", "then", "behavior", "can", "be", "different", "due", "to", "the", "additional", "constraints", "NUMBER", "I", "don", "t", "think", "we", "have", "to", "worry", "about", "globals", "not", "work", "on", "sandbox", "NUMBER", "Also", "the", "global", "data", "could", "be", "stranded", "and", "sent", "to", "other", "process", "NUMBER", "On", "Mon", "Dec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "AminaG", "notifications", "github", "NUMBER", "com", "write", "Out", "of", "process", "will", "make", "all", "global", "not", "works", "NUMBER", "It", "be", "break", "change", "NUMBER", "Can", "we", "do", "that", "kind", "of", "break", "change", "to", "Marko", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "Yes", "that", "be", "a", "good", "suggestion", "AminaG", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "src", "secure", "true", "template", "NUMBER", "render", "templateData", "stream", "AminaG", "this", "definitely", "can", "t", "be", "a", "breaking", "change", "NUMBER", "The", "sandbox", "functionality", "should", "be", "an", "opt", "in", "only", "and", "that", "option", "should", "only", "be", "recognized", "on", "the", "server", "NUMBER", "Looking", "more", "closely", "at", "vm", "NUMBER", "I", "see", "that", "there", "be", "support", "for", "a", "Node", "NUMBER", "js", "module", "loading", "system", "NUMBER", "That", "makes", "vm", "NUMBER", "more", "applealing", "NUMBER", "AminaG", "There", "be", "timeouts", "but", "they", "be", "only", "for", "async", "timeouts", "not", "CPU", "bound", "loops", "NUMBER", "My", "recommendation", "be", "to", "go", "forward", "with", "vm", "NUMBER", "LINK", "but", "to", "allow", "the", "sandbox", "to", "be", "more", "pluggable", "and", "flexible", "NUMBER", "It", "be", "better", "if", "marko", "do", "not", "have", "a", "direct", "dependency", "on", "vm", "NUMBER", "NUMBER", "Something", "more", "like", "the", "following", "javascript", "var", "NodeVM", "require", "vm", "NUMBER", "NUMBER", "NodeVM", "var", "options", "console", "inherit", "sandbox", "require", "true", "requireExternal", "true", "NUMBER", "requireRoot", "NUMBER", "var", "sandbox", "new", "NodeVM", "options", "var", "template", "require", "marko", "NUMBER", "load", "templatePath", "sandbox", "sandbox", "template", "NUMBER", "render", "templateData", "NUMBER", "Timeout", "only", "makes", "sense", "for", "the", "render", "method", "but", "that", "be", "not", "support", "for", "vm", "NUMBER", "You", "would", "have", "to", "use", "an", "out", "of", "process", "solution", "for", "that", "NUMBER", "Just", "realized", "that", "vm", "NUMBER", "doesn", "t", "allow", "you", "to", "whitelist", "external", "modules", "only", "native", "modules", "NUMBER", "Really", "From", "the", "docs", "IMPORTANT", "Timeout", "be", "only", "effective", "on", "code", "you", "run", "trough", "run", "NUMBER", "Timeout", "be", "NOT", "effective", "on", "any", "method", "returned", "by", "VM", "NUMBER", "IMPORTANT", "Timeout", "be", "not", "effective", "for", "NodeVM", "so", "it", "be", "not", "immune", "to", "while", "true", "or", "similar", "evil", "NUMBER", "Therefore", "timeout", "would", "not", "be", "effective", "for", "the", "template", "NUMBER", "render", "method", "NUMBER", "Maybe", "it", "be", "possible", "to", "add", "modules", "to", "VM", "NUMBER", "context", "use", "the", "sandbox", "option", "instead", "of", "requiring", "it", "That", "s", "possible", "but", "it", "would", "mean", "that", "the", "template", "would", "need", "to", "be", "compiled", "differently", "if", "they", "be", "loaded", "sandbox", "mode", "NUMBER", "It", "s", "worth", "exploring", "NUMBER", "My", "guess", "be", "that", "everything", "in", "the", "vm", "NUMBER", "sandbox", "has", "to", "be", "serializable", "since", "it", "gets", "sent", "to", "other", "process", "but", "maybe", "I", "m", "wrong", "NUMBER", "On", "Mon", "Dec", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "AminaG", "notifications", "github", "NUMBER", "com", "write", "Maybe", "it", "be", "possible", "to", "add", "modules", "to", "VM", "NUMBER", "context", "use", "the", "sandbox", "option", "instead", "of", "requiring", "it", "sandbox", "marko", "require", "NUMBER", "marko", "async", "require", "marko", "async", "What", "do", "you", "think", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "Hey", "philidem", "I", "think", "you", "misread", "NUMBER", "The", "vm", "NUMBER", "sandbox", "be", "in", "the", "same", "process", "NUMBER", "vm", "NUMBER", "call", "setTimeout", "function", "process", "NUMBER", "exit", "NUMBER", "I", "don", "t", "see", "how", "that", "helps", "NUMBER", "Also", "process", "NUMBER", "exit", "won", "t", "be", "available", "in", "the", "sandbox", "vm", "NUMBER", "be", "not", "a", "lot", "of", "code", "NUMBER", "May", "be", "worth", "forking", "and", "improving", "to", "add", "support", "for", "whitelisted", "external", "modules", "NUMBER", "Basically", "for", "any", "required", "module", "file", "search", "up", "the", "directory", "tree", "to", "find", "the", "parent", "package", "name", "and", "check", "if", "that", "particular", "package", "has", "be", "whitelisted", "NUMBER", "Only", "problem", "for", "me", "at", "least", "be", "that", "vm", "NUMBER", "be", "write", "use", "CoffeeScript", "NUMBER", "Actually", "after", "giving", "it", "some", "more", "thought", "vm", "NUMBER", "be", "probably", "good", "as", "be", "NUMBER", "As", "long", "as", "the", "native", "Node", "NUMBER", "js", "modules", "fs", "process", "etc", "NUMBER", "be", "blocked", "then", "I", "suppose", "there", "really", "be", "no", "security", "risk", "NUMBER", "I", "can", "see", "the", "reasoning", "for", "only", "support", "whitelisting", "of", "native", "Node", "NUMBER", "js", "modules", "NUMBER", "Actually", "I", "take", "that", "back", "a", "non", "native", "module", "might", "have", "a", "native", "binary", "build", "from", "C", "that", "could", "be", "an", "attack", "vector", "NUMBER", "I", "suspect", "that", "those", "those", "non", "native", "binaries", "would", "still", "be", "allow", "to", "be", "loaded", "when", "use", "vm", "NUMBER", "but", "I", "could", "be", "wrong", "NUMBER", "If", "you", "go", "with", "the", "out", "of", "process", "solution", "then", "yes", "the", "template", "data", "needs", "to", "be", "serializable", "to", "JSON", "NUMBER", "vm", "NUMBER", "be", "in", "process", "so", "I", "don", "t", "think", "passing", "in", "helper", "function", "or", "use", "data", "from", "closures", "be", "a", "problem", "NUMBER", "I", "recommend", "trying", "out", "vm", "NUMBER", "further", "NUMBER", "If", "we", "run", "into", "limitations", "we", "can", "always", "improve", "vm", "NUMBER", "but", "I", "still", "think", "vm", "NUMBER", "be", "in", "the", "best", "direction", "NUMBER", "AminaG", "So", "there", "be", "any", "solution", "how", "to", "to", "stop", "vm", "NUMBER", "in", "case", "of", "infinite", "loop", "Yes", "you", "need", "to", "invoke", "the", "template", "NUMBER", "render", "method", "use", "the", "vm", "NUMBER", "runInThisContext", "code", "timeout", "NUMBER", "method", "or", "script", "NUMBER", "runInContext", "contextifiedSandbox", "timeout", "NUMBER", "NUMBER", "Using", "the", "latter", "be", "recommended", "since", "it", "can", "be", "use", "to", "execute", "a", "precompiled", "script", "i", "NUMBER", "e", "NUMBER", "faster", "NUMBER", "See", "LINK", "vm_new_vm_script_code_options", "UPDATE", "It", "looks", "like", "vm", "NUMBER", "may", "not", "expose", "the", "underlying", "vm", "interface", "so", "that", "might", "require", "a", "fork", "NUMBER", "Currently", "compiled", "template", "be", "write", "next", "to", "the", "original", "file", "NUMBER", "It", "might", "be", "nice", "to", "offer", "the", "ability", "to", "place", "compiled", "template", "in", "an", "alternate", "root", "directory", "NUMBER", "For", "example", "my", "app", "NUMBER", "marko", "compiled", "src", "components", "foo", "template", "NUMBER", "marko", "NUMBER", "js", "my", "app", "node_modules", "some", "install", "package", "NUMBER", "marko", "compiled", "src", "components", "bar", "template", "NUMBER", "marko", "NUMBER", "js", "adammcarth", "I", "don", "t", "think", "putting", "compiled", "template", "directly", "under", "the", "node_modules", "be", "the", "best", "choice", "since", "it", "I", "think", "it", "be", "an", "abuse", "of", "that", "folder", "and", "would", "not", "be", "expected", "by", "end", "users", "NUMBER", "I", "think", "putting", "compiled", "template", "under", "a", "NUMBER", "marko", "compiled", "directory", "at", "the", "root", "directory", "of", "the", "package", "associated", "with", "the", "template", "be", "the", "right", "thing", "to", "do", "NUMBER", "Yes", "you", "would", "have", "to", "make", "sure", "that", "directory", "be", "include", "in", "NUMBER", "gitignore", "but", "I", "think", "that", "be", "okay", "NUMBER", "NOTE", "I", "adjusted", "the", "original", "text", "because", "there", "was", "a", "typo", "NUMBER", "As", "a", "side", "note", "one", "of", "the", "potential", "benefits", "of", "compile", "a", "template", "and", "keep", "it", "right", "next", "to", "the", "original", "file", "be", "that", "as", "a", "package", "prepublish", "step", "you", "can", "pre", "compile", "all", "Marko", "template", "delete", "the", "original", "Marko", "template", "file", "temporarily", "and", "all", "of", "the", "requires", "would", "work", "and", "return", "the", "precompiled", "template", "NUMBER", "That", "be", "if", "you", "you", "have", "a", "require", "NUMBER", "template", "NUMBER", "marko", "call", "in", "your", "code", "Node", "NUMBER", "js", "will", "first", "look", "for", "template", "NUMBER", "marko", "and", "not", "find", "it", "and", "then", "it", "will", "look", "for", "template", "NUMBER", "marko", "NUMBER", "js", "and", "find", "that", "NUMBER", "That", "way", "you", "can", "use", "the", "Node", "NUMBER", "js", "require", "extension", "for", "Marko", "during", "development", "but", "when", "you", "publish", "your", "package", "you", "would", "only", "publish", "the", "pre", "compiled", "template", "not", "the", "original", "Marko", "source", "file", "and", "it", "would", "not", "be", "required", "for", "a", "user", "of", "the", "package", "to", "install", "Marko", "s", "Node", "NUMBER", "js", "require", "extension", "NUMBER", "Thoughts", "The", "current", "thinking", "be", "that", "we", "can", "make", "this", "an", "option", "by", "introduce", "a", "new", "configuration", "option", "in", "marko", "NUMBER", "json", "similar", "to", "the", "following", "json", "compiled", "output", "dir", "NUMBER", "NUMBER", "marko", "compiled", "NUMBER", "After", "update", "the", "compiler", "for", "Marko", "v", "NUMBER", "and", "work", "on", "this", "task", "it", "became", "clear", "that", "we", "won", "t", "actually", "be", "able", "to", "directly", "load", "the", "template", "from", "the", "alternate", "directory", "NUMBER", "We", "would", "merely", "be", "write", "it", "disk", "at", "the", "alternate", "location", "for", "reference", "purposes", "and", "possibly", "to", "avoid", "recompiling", "in", "production", "NUMBER", "The", "stack", "trace", "would", "still", "need", "to", "match", "up", "where", "the", "original", "NUMBER", "marko", "file", "be", "on", "disk", "in", "order", "for", "any", "require", "calls", "to", "work", "as", "expected", "NUMBER", "It", "s", "also", "a", "little", "unclear", "if", "this", "setting", "would", "be", "applied", "globally", "NUMBER", "Currently", "we", "only", "search", "up", "to", "the", "root", "of", "the", "package", "to", "find", "a", "package", "NUMBER", "json", "file", "so", "install", "package", "would", "currently", "not", "share", "the", "option", "if", "it", "comes", "from", "a", "marko", "NUMBER", "json", "in", "the", "root", "package", "NUMBER", "We", "might", "need", "to", "consider", "other", "options", "if", "we", "want", "the", "configuration", "option", "to", "also", "apply", "to", "all", "install", "package", "NUMBER", "This", "be", "not", "on", "our", "roadmap", "but", "we", "re", "not", "oppose", "to", "it", "if", "someone", "from", "the", "community", "would", "like", "to", "tackle", "it", "NUMBER", "If", "you", "want", "to", "take", "a", "stab", "let", "us", "know", "and", "we", "ll", "help", "if", "necessary", "NUMBER", "As", "far", "as", "directory", "naming", "I", "think", "a", "sensible", "directory", "would", "be", "NUMBER", "cache", "marko", "since", "Lasso", "and", "other", "modules", "already", "use", "NUMBER", "cache", "to", "store", "cached", "file", "so", "this", "way", "we", "re", "not", "cluttering", "the", "top", "level", "directory", "NUMBER", "Hey", "tropperstyle", "thanks", "for", "the", "PR", "NUMBER", "I", "ll", "fix", "the", "jshint", "error", "that", "your", "code", "introduce", "and", "publish", "a", "new", "version", "NUMBER", "Thanks", "for", "the", "improvement", "NUMBER", "Hey", "tropperstyle", "NUMBER", "I", "update", "the", "code", "so", "that", "it", "still", "only", "did", "one", "pass", "through", "the", "directories", "LINK", "js", "marko", "commit", "a", "NUMBER", "f", "NUMBER", "bb", "NUMBER", "b", "NUMBER", "cc", "NUMBER", "afd", "NUMBER", "af", "NUMBER", "a", "NUMBER", "fea", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "find", "any", "issue", "with", "the", "new", "code", "NUMBER", "Thanks", "Hey", "patbegg", "thanks", "for", "report", "the", "problem", "NUMBER", "I", "ll", "take", "a", "look", "into", "it", "NUMBER", "What", "version", "of", "npm", "be", "you", "use", "_EDIT", "Didn", "t", "notice", "the", "npm", "version", "in", "the", "issue", "title", "NUMBER", "Please", "disregard", "_", "Hey", "patbegg", "be", "you", "sure", "marko", "layout", "be", "not", "be", "install", "I", "wasn", "t", "able", "to", "reproduce", "the", "problem", "with", "the", "latest", "npm", "version", "v", "NUMBER", "NUMBER", "The", "latest", "version", "of", "npm", "flattens", "all", "of", "the", "install", "node_modules", "NUMBER", "If", "that", "be", "the", "case", "then", "you", "should", "find", "marko", "layout", "as", "a", "child", "of", "your", "top", "level", "node_modules", "directory", "and", "that", "be", "perfectly", "fine", "NUMBER", "If", "you", "were", "use", "an", "older", "version", "of", "npm", "and", "then", "later", "switched", "to", "a", "new", "version", "of", "npm", "then", "I", "suggest", "forcing", "a", "recompile", "of", "all", "your", "template", "since", "the", "directory", "structure", "may", "have", "change", "and", "the", "compiler", "might", "need", "to", "recalculate", "relative", "paths", "that", "get", "generate", "NUMBER", "You", "can", "force", "a", "recompile", "use", "either", "of", "the", "following", "approaches", "Option", "NUMBER", "Force", "a", "recompile", "of", "template", "by", "setting", "the", "MARKO_CLEAN", "environment", "variable", "to", "true", "recommended", "MARKO_CLEAN", "true", "node", "index", "NUMBER", "js", "Option", "NUMBER", "Use", "the", "markoc", "command", "line", "utility", "to", "delete", "the", "generate", "NUMBER", "marko", "NUMBER", "js", "file", "markoc", "NUMBER", "clean", "Please", "let", "me", "know", "if", "that", "solves", "your", "problem", "NUMBER", "Thanks", "NUMBER", "Hey", "patbegg", "glad", "that", "solve", "your", "problem", "NUMBER", "If", "you", "know", "the", "directory", "structure", "be", "exactly", "the", "same", "on", "both", "machines", "then", "it", "be", "okay", "to", "copy", "over", "the", "compiled", "template", "NUMBER", "If", "there", "be", "any", "chance", "that", "the", "directory", "structure", "will", "be", "different", "then", "I", "would", "just", "not", "copy", "the", "compiled", "template", "and", "instead", "have", "them", "be", "lazily", "compiled", "on", "the", "target", "machine", "as", "you", "did", "NUMBER", "How", "about", "we", "open", "another", "issue", "to", "track", "the", "docs", "improvement", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "for", "now", "NUMBER", "Hey", "ashishcpatel", "NUMBER", "thanks", "for", "report", "the", "issue", "NUMBER", "I", "m", "not", "going", "to", "have", "a", "chance", "this", "weekend", "to", "take", "a", "look", "but", "I", "ll", "take", "a", "closer", "tomorrow", "NUMBER", "I", "ll", "update", "you", "as", "soon", "as", "I", "know", "more", "NUMBER", "Thanks", "again", "NUMBER", "Hey", "ashishcpatel", "NUMBER", "just", "wanted", "to", "provide", "an", "update", "that", "I", "was", "able", "to", "reproduce", "the", "problem", "and", "I", "have", "add", "a", "test", "case", "NUMBER", "It", "looks", "like", "things", "almost", "worked", "but", "there", "be", "a", "bug", "in", "the", "taglib", "loader", "that", "be", "preventing", "the", "deeply", "nested", "tags", "from", "be", "properly", "registered", "NUMBER", "I", "be", "still", "investigating", "to", "see", "what", "be", "required", "to", "be", "change", "to", "support", "deeply", "nested", "tags", "NUMBER", "Hey", "ashishcpatel", "NUMBER", "I", "push", "a", "fix", "to", "allow", "nested", "tags", "to", "be", "arbitrarily", "deep", "NUMBER", "New", "version", "of", "marko", "publish", "marko", "NUMBER", "Thanks", "for", "your", "patience", "NUMBER", "Please", "let", "us", "know", "if", "you", "run", "into", "any", "other", "issue", "NUMBER", "Thanks", "for", "your", "help", "NUMBER", "I", "like", "the", "idea", "of", "use", "NUMBER", "Configuration", "File", "NUMBER", "As", "a", "slight", "variation", "I", "would", "recommand", "NUMBER", "marko", "not", "NUMBER", "markoc", "because", "I", "don", "t", "it", "s", "necessary", "to", "distinguish", "between", "Marko", "runtime", "and", "compile", "time", "options", "NUMBER", "I", "know", "that", "patrick", "steele", "idem", "be", "hard", "at", "work", "on", "Marko", "v", "NUMBER", "so", "maybe", "we", "could", "target", "this", "feature", "for", "that", "version", "And", "regard", "having", "a", "separate", "marko", "taglib", "NUMBER", "json", "I", "m", "actually", "liking", "your", "idea", "of", "converging", "on", "a", "single", "file", "NUMBER", "This", "would", "also", "make", "the", "compiler", "a", "little", "simpler", "since", "it", "wouldn", "t", "have", "to", "look", "for", "two", "file", "when", "looking", "for", "configuration", "NUMBER", "The", "only", "downside", "with", "use", "something", "like", "NUMBER", "marko", "be", "that", "file", "that", "start", "with", "NUMBER", "be", "ignored", "by", "default", "in", "Unix", "like", "operate", "systems", "NUMBER", "Maybe", "marko", "NUMBER", "config", "marko", "NUMBER", "config", "NUMBER", "json", "or", "marko", "NUMBER", "json", "instead", "Thank", "you", "for", "sharing", "your", "detailed", "thoughts", "adammcarth", "and", "philidem", "NUMBER", "on", "marko", "NUMBER", "json", "NUMBER", "After", "giving", "it", "some", "more", "thought", "I", "m", "also", "in", "favor", "of", "use", "marko", "NUMBER", "json", "to", "both", "register", "custom", "tags", "and", "provide", "compiler", "configuration", "NUMBER", "I", "m", "also", "in", "favor", "of", "requiring", "that", "this", "file", "be", "placed", "in", "the", "root", "directory", "of", "the", "package", "NUMBER", "Currently", "we", "allow", "marko", "taglib", "NUMBER", "json", "to", "be", "placed", "in", "any", "directory", "and", "the", "compiler", "just", "searches", "up", "from", "the", "template", "file", "NUMBER", "This", "works", "but", "it", "introduces", "the", "overhead", "of", "searching", "the", "file", "system", "and", "it", "also", "results", "in", "marko", "searching", "outside", "the", "main", "project", "s", "directory", "which", "be", "not", "good", "NUMBER", "I", "also", "agree", "that", "we", "should", "wait", "until", "the", "next", "major", "version", "of", "marko", "to", "make", "this", "change", "since", "it", "be", "a", "breaking", "change", "and", "we", "have", "wanted", "to", "revisit", "taglib", "loading", "anyway", "NUMBER", "I", "ll", "add", "this", "to", "the", "roadmap", "which", "still", "needs", "to", "be", "write", "up", "and", "formally", "shared", "NUMBER", "If", "you", "have", "any", "other", "thoughts", "or", "suggestions", "please", "share", "NUMBER", "Thanks", "again", "Supporting", "require", "marko", "NUMBER", "configure", "be", "not", "bad", "but", "the", "problem", "be", "that", "if", "the", "command", "line", "compiler", "be", "use", "to", "compile", "a", "template", "then", "it", "won", "t", "be", "configured", "the", "same", "way", "NUMBER", "Ideally", "configuration", "would", "all", "be", "loaded", "declaratively", "from", "file", "NUMBER", "The", "only", "problem", "be", "if", "configuration", "needs", "to", "be", "environment", "specific", "NUMBER", "I", "don", "t", "like", "the", "idea", "of", "messing", "with", "Node", "s", "require", "function", "so", "I", "don", "t", "use", "marko", "node", "require", "NUMBER", "I", "use", "marko", "NUMBER", "load", "for", "loading", "template", "NUMBER", "Longer", "term", "I", "would", "like", "to", "see", "an", "npm", "prepublish", "step", "that", "modifies", "all", "code", "as", "such", "_Before", "_", "javascript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "_After", "_", "javascript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "With", "that", "approach", "you", "still", "get", "the", "convenience", "of", "requiring", "a", "template", "but", "you", "don", "t", "have", "to", "worry", "about", "installing", "the", "require", "extension", "for", "production", "usage", "and", "third", "party", "package", "wouldn", "t", "depend", "on", "the", "Node", "NUMBER", "js", "require", "extension", "for", "Marko", "NUMBER", "The", "Node", "NUMBER", "js", "require", "extension", "for", "Marko", "be", "only", "there", "for", "convenience", "because", "it", "allows", "for", "less", "code", "to", "load", "a", "template", "javascript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "In", "this", "case", "I", "think", "it", "be", "better", "to", "be", "pragmatic", "instead", "of", "worrying", "about", "violating", "some", "Node", "NUMBER", "js", "tenet", "NUMBER", "The", "fact", "be", "Marko", "be", "really", "just", "a", "transpiler", "that", "takes", "your", "Marko", "template", "file", "and", "converts", "it", "into", "a", "CommonJS", "module", "that", "Node", "NUMBER", "js", "can", "load", "and", "that", "be", "compatible", "with", "any", "JavaScript", "module", "bundler", "NUMBER", "The", "Node", "NUMBER", "js", "require", "extension", "for", "marko", "be", "just", "doing", "the", "transpiling", "on", "first", "require", "NUMBER", "Babel", "provides", "a", "Node", "NUMBER", "js", "require", "extension", "for", "ES", "NUMBER", "transpiling", "NUMBER", "Global", "configuration", "be", "now", "support", "by", "js", "require", "marko", "compiler", "NUMBER", "configure", "writeToDisk", "false", "preserveWhitespace", "true", "Hey", "adammcarth", "thanks", "for", "the", "question", "NUMBER", "That", "be", "something", "we", "have", "thought", "about", "but", "we", "decided", "_not_", "to", "build", "an", "Express", "view", "engine", "for", "various", "reasons", "The", "Express", "view", "rendering", "engine", "only", "support", "callback", "style", "view", "rendering", "that", "be", "not", "compatible", "with", "streaming", "NUMBER", "As", "a", "result", "the", "Express", "view", "rendering", "engine", "has", "worse", "performance", "and", "less", "flexibility", "NUMBER", "On", "top", "of", "that", "the", "Express", "view", "rendering", "engine", "include", "its", "own", "view", "resolving", "code", "instead", "of", "just", "use", "the", "Node", "NUMBER", "js", "module", "resolving", "code", "and", "it", "requires", "global", "app", "level", "configuration", "to", "make", "everything", "work", "NUMBER", "Finally", "the", "Express", "view", "rendering", "engine", "introduces", "a", "new", "way", "to", "render", "a", "template", "that", "only", "works", "on", "the", "server", "and", "only", "with", "Express", "NUMBER", "The", "Express", "view", "rendering", "engine", "while", "simple", "be", "far", "more", "complicated", "than", "just", "rendering", "a", "template", "directly", "to", "an", "HTTP", "response", "stream", "NUMBER", "The", "only", "drawback", "to", "not", "use", "the", "Express", "view", "rendering", "engine", "be", "that", "if", "your", "template", "or", "view", "rendering", "code", "needs", "information", "associated", "with", "the", "incoming", "request", "then", "you", "must", "manually", "add", "that", "data", "to", "the", "template", "data", "possibly", "use", "global", "LINK", "guide", "global", "properties", "NUMBER", "I", "guess", "another", "possible", "drawback", "be", "that", "you", "need", "to", "require", "in", "the", "template", "in", "the", "view", "controller", "code", "but", "I", "see", "that", "as", "a", "good", "thing", "since", "it", "promotes", "modularity", "NUMBER", "I", "write", "a", "blog", "post", "on", "this", "topic", "that", "you", "should", "check", "out", "as", "well", "Bypassing", "Express", "View", "Rendering", "for", "Speed", "and", "Modularity", "LINK", "express", "view", "rendering", "for", "speed", "and", "modularity", "Hope", "that", "answers", "your", "question", "Let", "us", "know", "if", "you", "have", "any", "other", "question", "NUMBER", "Thanks", "again", "NUMBER", "Hey", "adammcarth", "glad", "you", "find", "that", "article", "helpful", "NUMBER", "Pretty", "much", "every", "product", "team", "at", "eBay", "build", "webapps", "on", "the", "Node", "NUMBER", "js", "stack", "have", "adopted", "the", "modular", "directory", "structure", "and", "the", "feedback", "has", "be", "very", "positive", "NUMBER", "I", "also", "see", "a", "similar", "trend", "with", "other", "frameworks", "and", "libraries", "NUMBER", "For", "a", "blog", "post", "I", "think", "that", "directory", "structure", "looks", "good", "NUMBER", "A", "page", "typically", "has", "a", "top", "level", "route", "associated", "with", "and", "it", "will", "typically", "have", "a", "unique", "page", "controller", "and", "page", "template", "NUMBER", "For", "the", "markojs", "NUMBER", "com", "blog", "LINK", "there", "be", "a", "set", "of", "pages", "associated", "with", "the", "blog", "that", "you", "can", "take", "a", "look", "at", "LINK", "js", "markojs", "NUMBER", "com", "tree", "master", "src", "pages", "blog", "Those", "pages", "each", "have", "a", "corresponding", "route", "NUMBER", "I", "prefer", "to", "put", "all", "of", "the", "routes", "in", "a", "single", "place", "so", "that", "anyone", "looking", "at", "the", "application", "source", "code", "can", "quickly", "figure", "out", "which", "routes", "map", "to", "which", "pages", "NUMBER", "The", "layout", "taglib", "be", "use", "to", "separate", "out", "page", "layout", "from", "page", "content", "in", "cases", "where", "you", "have", "multiple", "pages", "that", "share", "a", "common", "layout", "NUMBER", "For", "example", "LINK", "js", "markojs", "NUMBER", "com", "tree", "master", "src", "layouts", "default", "I", "hope", "that", "helps", "NUMBER", "Hey", "leonli", "sorry", "for", "the", "delayed", "response", "but", "better", "late", "than", "never", "NUMBER", "What", "I", "find", "works", "well", "be", "to", "also", "require", "non", "JavaScript", "module", "dependencies", "in", "your", "component", "s", "index", "NUMBER", "js", "file", "as", "shown", "in", "the", "following", "code", "LINK", "js", "samples", "ui", "components", "playground", "blob", "NUMBER", "cf", "NUMBER", "d", "NUMBER", "d", "NUMBER", "d", "NUMBER", "bbae", "NUMBER", "c", "NUMBER", "f", "NUMBER", "adc", "NUMBER", "src", "components", "app", "button", "index", "NUMBER", "js", "L", "NUMBER", "Also", "if", "you", "put", "a", "browser", "NUMBER", "json", "next", "to", "an", "include", "JavaScript", "module", "then", "it", "will", "automatically", "be", "processed", "and", "all", "of", "the", "referenced", "client", "side", "dependencies", "will", "be", "include", "NUMBER", "That", "way", "if", "the", "UI", "component", "be", "sent", "to", "the", "browser", "then", "the", "required", "CSS", "will", "also", "be", "include", "NUMBER", "Also", "all", "of", "the", "required", "client", "side", "dependencies", "for", "nested", "UI", "component", "s", "will", "be", "include", "automatically", "when", "you", "bundle", "up", "the", "root", "UI", "component", "NUMBER", "Does", "that", "answer", "your", "question", "or", "do", "you", "have", "another", "more", "specific", "suggestion", "on", "how", "to", "improve", "how", "CSS", "dependencies", "be", "include", "NUMBER", "Hey", "leonli", "I", "m", "just", "going", "through", "issue", "to", "do", "some", "housecleaning", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "if", "this", "be", "still", "an", "issue", "question", "please", "feel", "free", "to", "add", "more", "comments", "NUMBER", "Thanks", "NUMBER", "Good", "catch", "NUMBER", "Marko", "be", "isomorphic", "and", "works", "on", "the", "server", "Node", "NUMBER", "js", "and", "in", "any", "browser", "NUMBER", "You", "will", "need", "a", "JavaScript", "module", "bundler", "browserify", "Lasso", "NUMBER", "js", "LINK", "ci", "NUMBER", "org", "lasso", "js", "lasso", "etc", "NUMBER", "to", "transport", "the", "compiled", "template", "to", "the", "browser", "and", "everything", "will", "work", "exactly", "as", "it", "do", "on", "the", "server", "NUMBER", "I", "ll", "update", "the", "README", "and", "website", "to", "make", "this", "clear", "NUMBER", "Thanks", "for", "letting", "us", "know", "NUMBER", "Website", "update", "NUMBER", "Please", "let", "us", "know", "if", "you", "see", "any", "other", "issue", "with", "the", "website", "or", "docs", "NUMBER", "Thanks", "again", "NUMBER", "Great", "NUMBER", "Thanks", "for", "the", "feedback", "wheresrhys", "Hey", "redben", "that", "be", "the", "expected", "behavior", "NUMBER", "Anything", "inside", "NUMBER", "be", "just", "JavaScript", "and", "it", "will", "be", "evaluated", "just", "like", "any", "other", "JavaScript", "code", "if", "you", "take", "a", "look", "at", "the", "compiled", "code", "this", "should", "be", "clear", "NUMBER", "Because", "Marko", "template", "compile", "down", "to", "CommonJS", "modules", "you", "can", "import", "the", "lodash", "object", "get", "function", "to", "provide", "safe", "access", "to", "nested", "properties", "as", "shown", "below", "xml", "TAG", "TAG", "Author", "get", "data", "author", "NUMBER", "name", "TAG", "You", "ll", "need", "to", "install", "lodash", "into", "your", "project", "for", "the", "above", "code", "to", "work", "bash", "npm", "install", "lodash", "save", "If", "you", "don", "t", "want", "to", "use", "a", "third", "party", "module", "you", "can", "also", "do", "the", "following", "html", "TAG", "Author", "data", "NUMBER", "author", "and", "data", "NUMBER", "author", "NUMBER", "name", "TAG", "NOTE", "and", "be", "a", "special", "operator", "that", "gets", "converted", "to", "NUMBER", "See", "LINK", "guide", "expressions", "Does", "that", "work", "for", "you", "Hope", "that", "clarifies", "NUMBER", "Let", "us", "know", "NUMBER", "Hey", "redben", "it", "s", "true", "that", "many", "templating", "engines", "interpret", "expressions", "and", "handle", "safely", "reading", "nested", "properties", "NUMBER", "However", "doing", "that", "by", "default", "results", "in", "worse", "runtime", "performance", "and", "it", "limits", "the", "power", "of", "the", "templating", "language", "since", "expressions", "cannot", "be", "arbitrary", "JavaScript", "code", "NUMBER", "Marko", "has", "always", "tried", "to", "be", "be", "as", "close", "to", "pure", "JavaScript", "wherever", "possible", "NUMBER", "This", "keep", "the", "runtime", "tiny", "improves", "performance", "and", "it", "allows", "template", "to", "be", "more", "powerful", "NUMBER", "In", "theory", "we", "could", "offer", "the", "get", "as", "a", "builtin", "helper", "to", "avoid", "having", "to", "import", "it", "NUMBER", "Something", "worth", "considering", "especially", "if", "it", "be", "only", "imported", "if", "it", "be", "use", "in", "the", "template", "NUMBER", "Thoughts", "Hey", "redben", "what", "s", "nice", "about", "marko", "be", "that", "it", "only", "requires", "in", "things", "that", "be", "required", "NUMBER", "That", "way", "when", "you", "use", "a", "JavaScript", "module", "bundler", "to", "send", "a", "compiled", "template", "to", "the", "browser", "there", "be", "no", "extra", "baggage", "NUMBER", "As", "long", "as", "we", "made", "it", "so", "that", "the", "get", "function", "was", "only", "require", "d", "if", "use", "then", "I", "see", "no", "harm", "as", "offering", "that", "as", "a", "feature", "NUMBER", "The", "hard", "part", "be", "figuring", "out", "if", "get", "be", "required", "because", "currently", "aren", "t", "fully", "parsing", "the", "JavaScript", "expressions", "use", "in", "a", "template", "use", "something", "like", "esprima", "or", "acorn", "but", "that", "be", "something", "we", "be", "considering", "for", "the", "next", "release", "of", "marko", "NUMBER", "Probably", "low", "priority", "though", "since", "there", "be", "a", "fairly", "clean", "workaround", "NUMBER", "Thanks", "for", "your", "feedback", "NUMBER", "Hey", "designeng", "thanks", "for", "the", "PR", "but", "I", "think", "we", "need", "to", "keep", "the", "test", "case", "as", "be", "NUMBER", "While", "require", "marko", "NUMBER", "ream", "templatePath", "be", "not", "the", "recommended", "API", "it", "be", "still", "support", "and", "we", "should", "keep", "that", "test", "case", "around", "to", "make", "sure", "it", "continues", "to", "work", "NUMBER", "There", "be", "another", "test", "case", "that", "test", "marko", "NUMBER", "load", "NUMBER", "ream", "LINK", "js", "marko", "blob", "NUMBER", "d", "NUMBER", "b", "NUMBER", "bdc", "NUMBER", "ca", "NUMBER", "a", "NUMBER", "ebce", "NUMBER", "a", "NUMBER", "c", "NUMBER", "c", "NUMBER", "test", "api", "test", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "Look", "good", "to", "you", "Thanks", "designeng", "I", "appreciate", "the", "feedback", "NUMBER", "Hi", "Globik", "let", "s", "start", "with", "your", "first", "question", "I", "opened", "the", "file", "next", "morning", "I", "v", "seen", "that", "marko", "engin", "rewrite", "the", "file", "of", "his", "own", "way", "with", "helper", "s", "javascript", "function", "but", "my", "Hallo", "data", "NUMBER", "name", "be", "gone", "simple", "disapeared", "NUMBER", "When", "a", "Marko", "compiles", "a", "template", "such", "as", "template", "NUMBER", "marko", "it", "will", "generate", "a", "new", "file", "next", "to", "the", "original", "file", "named", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "The", "original", "source", "file", "be", "definitely", "not", "delete", "NUMBER", "If", "it", "be", "gone", "it", "be", "because", "you", "accidentally", "delete", "it", "but", "most", "likely", "you", "be", "just", "not", "noticing", "it", "NUMBER", "The", "generate", "JavaScript", "file", "be", "what", "gets", "loaded", "by", "Node", "NUMBER", "js", "or", "sent", "to", "the", "browser", "NUMBER", "And", "for", "your", "second", "question", "The", "server", "must", "be", "restart", "to", "keep", "change", "in", "the", "template", "file", "every", "time", "NUMBER", "So", "bad", "and", "slowly", "for", "a", "site", "developing", "NUMBER", "Is", "it", "true", "Depends", "on", "how", "you", "be", "watching", "file", "NUMBER", "Make", "sure", "you", "add", "NUMBER", "marko", "NUMBER", "js", "to", "your", "ignore", "patterns", "e", "NUMBER", "g", "NUMBER", "NUMBER", "gitignore", "NUMBER", "Since", "the", "NUMBER", "marko", "NUMBER", "js", "file", "be", "generate", "at", "runtime", "you", "will", "want", "to", "make", "sure", "those", "file", "be", "ignored", "NUMBER", "And", "for", "your", "final", "question", "Only", "open", "tags", "be", "modify", "for", "conditionals", "and", "looping", "When", "you", "make", "an", "element", "conditional", "use", "the", "if", "attribute", "or", "if", "you", "make", "it", "repeated", "use", "the", "for", "attribute", "then", "both", "the", "starting", "and", "ending", "tag", "will", "be", "wrapped", "NUMBER", "Hopefully", "it", "be", "clear", "from", "the", "Try", "Online", "example", "LINK", "online", "Simple_Hello_World", "Let", "us", "know", "if", "you", "have", "any", "other", "question", "NUMBER", "Hey", "Globik", "I", "m", "just", "going", "through", "issue", "to", "do", "some", "housecleaning", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "if", "this", "be", "still", "an", "issue", "question", "please", "feel", "free", "to", "add", "more", "comments", "NUMBER", "Thanks", "NUMBER", "I", "believe", "this", "issue", "has", "be", "resolve", "with", "improvement", "to", "the", "deresolve", "LINK", "modules", "blob", "NUMBER", "fc", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "bfb", "NUMBER", "acf", "NUMBER", "resolver", "lib", "deresolve", "NUMBER", "js", "function", "NUMBER", "If", "I", "be", "mistaken", "please", "reopen", "the", "issue", "NUMBER", "Thanks", "NUMBER", "Seems", "reasonable", "Double", "checked", "the", "travis", "documentation", "and", "this", "looks", "like", "a", "safe", "way", "to", "force", "container", "infrastructure", "to", "be", "use", "NUMBER", "Thanks", "for", "the", "fix", "zephraph", "NUMBER", "I", "don", "t", "think", "your", "change", "was", "the", "cause", "but", "for", "some", "reason", "the", "Travis", "CI", "build", "be", "fail", "now", "disappointed", "I", "ll", "retry", "in", "a", "bit", "but", "if", "you", "find", "a", "solution", "please", "share", "NUMBER", "I", "think", "the", "fail", "build", "was", "my", "fault", "because", "I", "close", "the", "pull", "request", "and", "then", "reopened", "it", "NUMBER", "The", "build", "error", "message", "seems", "to", "imply", "that", "this", "was", "the", "reason", "for", "failure", "NUMBER", "Subsequent", "build", "have", "succeeded", "NUMBER", "On", "Fri", "Oct", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "Zephraph", "notifications", "github", "NUMBER", "com", "write", "patrick", "steele", "idem", "LINK", "steele", "idem", "which", "build", "The", "only", "thing", "that", "I", "saw", "that", "has", "fail", "recently", "was", "a", "rebuild", "that", "triggered", "on", "my", "PR", "after", "it", "was", "merge", "which", "fail", "because", "the", "git", "ref", "that", "PRs", "point", "to", "be", "delete", "after", "merge", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "pull", "NUMBER", "issuecomment", "NUMBER", "You", "ll", "need", "to", "make", "sure", "tag", "NUMBER", "name", "be", "not", "overridden", "due", "to", "this", "line", "LINK", "js", "marko", "blob", "master", "compiler", "taglibs", "taglib", "loader", "scanTagsDir", "NUMBER", "js", "L", "NUMBER", "Hey", "zephraph", "be", "you", "still", "interested", "in", "this", "PR", "My", "opinion", "be", "that", "I", "don", "t", "think", "it", "be", "a", "good", "idea", "for", "the", "tag", "name", "to", "be", "defined", "in", "the", "renderer", "or", "in", "the", "marko", "tag", "NUMBER", "json", "NUMBER", "I", "think", "it", "be", "better", "for", "the", "tag", "name", "to", "be", "defined", "in", "the", "marko", "taglib", "NUMBER", "json", "file", "or", "have", "it", "be", "set", "based", "on", "the", "directory", "name", "when", "use", "the", "directory", "scanning", "feature", "NUMBER", "What", "do", "you", "think", "I", "m", "also", "a", "fan", "of", "minimizing", "how", "much", "code", "gets", "put", "into", "configuration", "file", "such", "as", "marko", "tag", "NUMBER", "json", "and", "marko", "taglib", "NUMBER", "json", "so", "I", "think", "it", "be", "better", "to", "have", "the", "convention", "of", "use", "a", "directory", "scanner", "to", "discover", "custom", "tags", "and", "for", "the", "custom", "tag", "name", "to", "automatically", "match", "the", "name", "of", "the", "parent", "directory", "NUMBER", "I", "think", "it", "would", "be", "a", "mistake", "to", "allow", "the", "developer", "to", "choose", "a", "tag", "name", "that", "doesn", "t", "match", "the", "parent", "directory", "name", "since", "it", "would", "make", "things", "confusing", "NUMBER", "Also", "currently", "if", "you", "_aren", "t_", "use", "a", "directory", "scanner", "then", "you", "must", "use", "a", "_map_", "to", "define", "custom", "tags", "and", "that", "requires", "that", "the", "tag", "name", "always", "be", "declared", "in", "the", "marko", "taglib", "NUMBER", "json", "json", "TAG", "NUMBER", "path", "to", "my", "custom", "tag", "marko", "tag", "NUMBER", "json", "TAG", "foo", "string", "NUMBER", "It", "wouldn", "t", "make", "sense", "to", "allow", "the", "developer", "to", "redefine", "the", "tag", "name", "in", "the", "marko", "tag", "NUMBER", "json", "or", "in", "the", "renderer", "NUMBER", "js", "file", "since", "it", "was", "already", "declared", "in", "the", "parent", "taglib", "NUMBER", "I", "propose", "that", "we", "not", "merge", "this", "PR", "if", "you", "be", "cool", "with", "that", "Let", "me", "know", "NUMBER", "Is", "that", "code", "be", "include", "inside", "an", "inline", "TAG", "block", "that", "inside", "a", "Marko", "template", "Hi", "baburammy", "I", "be", "having", "a", "hard", "time", "understanding", "the", "issue", "and", "how", "it", "relate", "to", "Marko", "Widgets", "based", "on", "the", "details", "provide", "NUMBER", "It", "looks", "to", "me", "that", "the", "issue", "be", "completely", "unrelated", "to", "Marko", "and", "Marko", "Widgets", "but", "I", "could", "be", "miss", "something", "NUMBER", "With", "that", "said", "I", "would", "not", "be", "use", "jQuery", "to", "execute", "the", "inline", "JS", "NUMBER", "It", "be", "better", "to", "send", "down", "the", "inline", "JS", "without", "the", "surrounding", "TAG", "tag", "NUMBER", "Instead", "just", "send", "down", "the", "raw", "JS", "code", "and", "use", "eval", "response", "NUMBER", "inlineJs", "to", "run", "the", "inline", "code", "NUMBER", "If", "you", "have", "a", "sample", "project", "or", "more", "code", "that", "you", "can", "share", "that", "would", "make", "it", "easier", "for", "me", "to", "provide", "help", "NUMBER", "Hey", "baburammy", "I", "m", "just", "going", "through", "issue", "to", "do", "some", "housecleaning", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "if", "this", "be", "still", "an", "issue", "question", "please", "feel", "free", "to", "add", "more", "comments", "NUMBER", "Thanks", "NUMBER", "That", "s", "true", "viviangledhill", "NUMBER", "However", "if", "you", "want", "the", "image", "to", "go", "through", "the", "Lasso", "NUMBER", "js", "asset", "pipeline", "then", "you", "should", "use", "the", "TAG", "tag", "xml", "TAG", "This", "might", "produce", "the", "following", "HTML", "output", "depending", "on", "how", "Lasso", "NUMBER", "js", "be", "configured", "html", "TAG", "The", "referenced", "image", "will", "also", "be", "moved", "into", "the", "appropriate", "output", "location", "NUMBER", "If", "there", "be", "any", "plugins", "to", "minify", "images", "then", "those", "plugins", "will", "process", "the", "image", "as", "well", "NUMBER", "Here", "be", "the", "docs", "that", "were", "just", "add", "LINK", "js", "lasso", "NUMBER", "Classo", "img", "viviangledhill", "automatic", "conversion", "to", "webp", "be", "a", "good", "suggestion", "NUMBER", "Assuming", "the", "webp", "image", "be", "cached", "I", "don", "t", "see", "it", "be", "too", "expensive", "NUMBER", "The", "tricky", "part", "be", "that", "we", "would", "have", "to", "have", "a", "good", "mechanism", "for", "make", "Lasso", "NUMBER", "js", "aware", "of", "the", "target", "browser", "s", "user", "agent", "so", "that", "it", "can", "optimize", "accordingly", "NUMBER", "Maybe", "open", "a", "separate", "Github", "issue", "for", "that", "feature", "request", "to", "Lasso", "NUMBER", "js", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "let", "us", "know", "if", "you", "run", "into", "any", "other", "issue", "relate", "to", "images", "and", "Lasso", "NUMBER", "js", "NUMBER", "Thanks", "NUMBER", "Yes", "require", "extensions", "be", "deprecate", "but", "I", "m", "not", "too", "concerned", "NUMBER", "As", "stated", "in", "the", "docs", "Since", "the", "Module", "system", "be", "locked", "this", "feature", "will", "probably", "never", "go", "away", "NUMBER", "I", "disagree", "with", "their", "decision", "to", "deprecate", "the", "feature", "but", "I", "do", "think", "there", "be", "better", "ways", "to", "extend", "the", "module", "loading", "system", "to", "add", "support", "for", "new", "compile", "to", "JavaScript", "languages", "such", "as", "JSX", "and", "marko", "NUMBER", "Worst", "comes", "to", "worst", "we", "provide", "a", "script", "to", "precompile", "all", "template", "to", "JS", "and", "use", "require", "template", "NUMBER", "marko", "NUMBER", "js", "instead", "but", "that", "would", "impact", "developer", "usability", "since", "it", "would", "introduce", "an", "unnecessary", "build", "step", "that", "we", "don", "t", "have", "now", "NUMBER", "How", "we", "have", "implement", "the", "Node", "NUMBER", "js", "require", "extension", "for", "marko", "avoids", "the", "problem", "of", "having", "a", "global", "NUMBER", "The", "global", "require", "extension", "that", "gets", "install", "by", "marko", "simply", "delegates", "the", "compilation", "to", "JS", "to", "the", "appropriate", "marko", "compiler", "based", "on", "where", "the", "source", "template", "be", "on", "disk", "NUMBER", "There", "be", "no", "harm", "with", "registering", "the", "require", "extension", "multiple", "times", "and", "in", "different", "package", "NUMBER", "On", "a", "relate", "note", "I", "would", "like", "to", "see", "a", "tool", "that", "can", "be", "use", "to", "precompile", "all", "template", "and", "that", "replaces", "all", "require", "NUMBER", "template", "NUMBER", "marko", "calls", "with", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "This", "would", "be", "useful", "as", "a", "prepublish", "script", "for", "publishing", "shared", "package", "that", "make", "use", "of", "Marko", "template", "NUMBER", "That", "s", "true", "that", "require", "NUMBER", "extensions", "was", "deprecate", "but", "I", "be", "not", "too", "concerned", "NUMBER", "According", "to", "the", "docs", "Since", "the", "Module", "system", "be", "locked", "this", "feature", "will", "probably", "never", "go", "away", "NUMBER", "I", "disagree", "with", "their", "decision", "to", "deprecate", "that", "feature", "without", "provide", "a", "suitable", "alternative", "NUMBER", "There", "s", "definitely", "a", "need", "for", "compile", "to", "JS", "languages", "such", "as", "Marko", "and", "JSX", "NUMBER", "Forcing", "a", "precompile", "makes", "things", "more", "difficult", "and", "more", "complicated", "since", "it", "introduces", "an", "unnecessary", "build", "step", "that", "be", "not", "needed", "now", "NUMBER", "Worst", "comes", "to", "worst", "we", "could", "precompile", "all", "template", "and", "require", "the", "NUMBER", "marko", "NUMBER", "js", "file", "directly", "NUMBER", "The", "Node", "NUMBER", "js", "require", "extension", "for", "marko", "avoids", "most", "of", "the", "problem", "with", "globals", "since", "the", "require", "extension", "just", "delegates", "the", "template", "compilation", "to", "the", "appropriate", "version", "of", "marko", "based", "on", "where", "the", "template", "be", "located", "on", "disk", "NUMBER", "There", "be", "no", "harm", "in", "installing", "the", "marko", "require", "extension", "multiple", "times", "and", "it", "can", "be", "multiple", "version", "of", "marko", "in", "a", "single", "app", "NUMBER", "On", "a", "relate", "note", "I", "do", "think", "there", "would", "be", "a", "benefit", "to", "offer", "a", "tool", "for", "Marko", "that", "could", "be", "use", "as", "a", "prepublish", "script", "to", "replace", "all", "require", "NUMBER", "template", "NUMBER", "marko", "calls", "with", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "and", "to", "have", "it", "precompile", "all", "template", "in", "the", "process", "NUMBER", "Hey", "yomed", "I", "m", "just", "going", "through", "old", "issue", "to", "do", "some", "housecleaning", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "if", "this", "be", "still", "an", "issue", "question", "please", "feel", "free", "to", "add", "more", "comments", "NUMBER", "As", "a", "separate", "issue", "I", "think", "we", "should", "explore", "the", "option", "of", "precompiling", "all", "template", "and", "update", "the", "JS", "code", "as", "a", "prepublish", "step", "NUMBER", "Please", "feel", "free", "to", "open", "an", "additional", "Github", "issue", "if", "you", "have", "specific", "thoughts", "on", "how", "to", "avoid", "use", "require", "NUMBER", "extensions", "NUMBER", "Thanks", "NUMBER", "At", "eBay", "we", "be", "use", "a", "very", "similar", "approach", "to", "handle", "localization", "NUMBER", "However", "instead", "of", "add", "additional", "methods", "to", "out", "NUMBER", "global", "we", "just", "pass", "the", "out", "object", "to", "various", "helper", "methods", "NUMBER", "For", "example", "javascript", "var", "locale", "getLocale", "out", "If", "you", "be", "rendering", "to", "an", "HTTP", "response", "directly", "use", "template", "NUMBER", "render", "NUMBER", "res", "then", "you", "can", "access", "the", "underlying", "response", "stream", "and", "the", "request", "object", "by", "doing", "the", "following", "javascript", "var", "res", "out", "NUMBER", "ream", "var", "req", "res", "NUMBER", "req", "Works", "for", "Express", "not", "sure", "if", "it", "works", "for", "Koa", "var", "locale", "getLocaleFromRequest", "req", "NOTE", "For", "Koa", "you", "can", "render", "directly", "to", "the", "HTTP", "response", "stream", "by", "doing", "the", "following", "javascript", "app", "NUMBER", "use", "function", "template", "NUMBER", "render", "NUMBER", "this", "NUMBER", "res", "I", "don", "t", "use", "Koa", "so", "I", "be", "going", "by", "what", "jlarsson", "said", "in", "the", "following", "issue", "LINK", "js", "marko", "pull", "NUMBER", "The", "benefit", "of", "this", "approach", "be", "that", "the", "developer", "do", "not", "have", "to", "explicitly", "use", "the", "global", "property", "to", "add", "things", "to", "out", "NUMBER", "global", "NUMBER", "The", "disadvantage", "be", "that", "this", "approach", "won", "t", "work", "if", "you", "be", "not", "rendering", "directly", "to", "an", "HTTP", "response", "stream", "NUMBER", "Does", "the", "approach", "describe", "above", "work", "for", "you", "Also", "you", "could", "create", "a", "custom", "compile", "time", "tag", "to", "introduce", "a", "new", "JavaScript", "i", "NUMBER", "n", "variable", "in", "your", "template", "NUMBER", "For", "example", "xml", "TAG", "TAG", "TAG", "TAG", "i", "NUMBER", "n", "NUMBER", "__", "Welcome", "TAG", "TAG", "TAG", "I", "think", "that", "approach", "be", "cleaner", "NUMBER", "We", "have", "a", "similar", "taglib", "for", "our", "eBay", "apps", "NUMBER", "If", "you", "want", "help", "going", "that", "route", "I", "can", "put", "together", "a", "sample", "app", "to", "show", "how", "it", "can", "easily", "be", "implement", "NUMBER", "The", "docs", "on", "compile", "time", "tags", "be", "lacking", "at", "this", "point", "LINK", "js", "marko", "issue", "NUMBER", "NUMBER", "Hi", "taecilla", "sometimes", "it", "be", "just", "easier", "to", "explain", "in", "code", "so", "I", "created", "a", "sample", "app", "to", "hopefully", "make", "things", "clearer", "about", "what", "I", "be", "proposing", "NUMBER", "Please", "check", "out", "the", "following", "app", "LINK", "js", "samples", "marko", "koa", "i", "NUMBER", "n", "Key", "note", "Enable", "the", "koa", "i", "NUMBER", "n", "middleware", "in", "your", "main", "server", "NUMBER", "js", "file", "and", "add", "some", "locales", "Just", "put", "i", "NUMBER", "n", "object", "into", "the", "out", "NUMBER", "global", "property", "when", "you", "render", "the", "page", "template", "javascript", "this", "NUMBER", "response", "NUMBER", "body", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "renderSync", "global", "i", "NUMBER", "n", "this", "NUMBER", "i", "NUMBER", "n", "Use", "the", "TAG", "tag", "to", "add", "a", "new", "JavaScript", "i", "NUMBER", "n", "var", "to", "your", "template", "at", "compilation", "time", "whose", "value", "will", "be", "out", "NUMBER", "global", "NUMBER", "i", "NUMBER", "n", "In", "your", "template", "you", "can", "then", "do", "the", "following", "xml", "TAG", "i", "NUMBER", "n", "NUMBER", "__", "hello", "data", "NUMBER", "name", "Does", "that", "look", "like", "a", "clean", "solution", "to", "you", "Hi", "taecilla", "I", "only", "pass", "in", "i", "NUMBER", "n", "use", "global", "because", "you", "were", "_not_", "rendering", "directly", "to", "the", "HTTP", "response", "stream", "NUMBER", "If", "you", "were", "to", "do", "the", "following", "javascript", "template", "NUMBER", "render", "NUMBER", "this", "NUMBER", "response", "Then", "you", "could", "access", "the", "i", "NUMBER", "n", "variable", "as", "shown", "below", "javascript", "var", "response", "out", "NUMBER", "ream", "var", "koaContext", "response", "NUMBER", "ctx", "var", "i", "NUMBER", "n", "koaContext", "NUMBER", "i", "NUMBER", "n", "console", "NUMBER", "log", "i", "NUMBER", "n", "NUMBER", "__", "howAreYou", "The", "easiest", "way", "to", "automatically", "associate", "a", "template", "rendering", "with", "a", "request", "response", "be", "to", "render", "directly", "to", "this", "NUMBER", "response", "NUMBER", "Alternatively", "you", "could", "create", "your", "own", "Koa", "plugin", "that", "introduces", "a", "this", "NUMBER", "renderTemplate", "template", "templateData", "method", "for", "rendering", "the", "top", "level", "page", "template", "javascript", "module", "NUMBER", "export", "function", "this", "NUMBER", "renderTemplate", "template", "name", "Frank", "Your", "Koa", "plugin", "could", "then", "auto", "populate", "any", "globals", "into", "the", "template", "data", "object", "NUMBER", "There", "s", "alternatives", "to", "avoid", "having", "to", "explicitly", "pass", "in", "global", "everywhere", "Hey", "tropperstyle", "it", "looks", "like", "a", "bad", "validation", "check", "at", "the", "following", "line", "LINK", "js", "marko", "blob", "NUMBER", "d", "NUMBER", "b", "NUMBER", "bdc", "NUMBER", "ca", "NUMBER", "a", "NUMBER", "ebce", "NUMBER", "a", "NUMBER", "c", "NUMBER", "c", "NUMBER", "compiler", "taglibs", "taglib", "loader", "scanTagsDir", "NUMBER", "js", "L", "NUMBER", "That", "line", "should", "probably", "be", "update", "to", "not", "throw", "an", "error", "if", "the", "tag", "has", "a", "transformer", "javascript", "if", "tagDef", "NUMBER", "renderer", "tagDef", "NUMBER", "template", "tagDef", "NUMBER", "transformer", "Do", "you", "want", "to", "try", "it", "out", "locally", "and", "send", "a", "PR", "if", "it", "solves", "your", "problem", "Thanks", "Patrick", "Hey", "taecilla", "I", "m", "just", "going", "through", "issue", "to", "do", "some", "housecleaning", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "if", "this", "be", "still", "an", "issue", "question", "please", "feel", "free", "to", "add", "more", "comments", "NUMBER", "Thanks", "NUMBER", "Thanks", "for", "the", "fix", "New", "version", "publish", "marko", "NUMBER", "For", "context", "please", "see", "Proposal", "Replace", "HTML", "parser", "with", "a", "new", "parser", "that", "recognizes", "attribute", "types", "LINK", "js", "marko", "issue", "NUMBER", "All", "of", "the", "details", "be", "not", "finalized", "for", "the", "new", "parser", "and", "template", "syntax", "but", "we", "wanted", "to", "go", "ahead", "and", "create", "this", "issue", "to", "start", "the", "discussion", "and", "see", "if", "there", "was", "interest", "from", "folks", "in", "the", "open", "source", "community", "taking", "ownership", "of", "this", "task", "NUMBER", "Happy", "to", "answer", "any", "question", "So", "the", "main", "thing", "that", "we", "need", "to", "do", "be", "fix", "how", "attributes", "be", "delimited", "NUMBER", "If", "the", "marko", "tag", "definition", "says", "that", "an", "attribute", "be", "a", "string", "or", "if", "the", "attribute", "be", "not", "defined", "in", "the", "tag", "then", "surround", "the", "tag", "with", "double", "quotes", "NUMBER", "For", "expressions", "numbers", "boolean", "and", "non", "string", "types", "simply", "then", "surround", "then", "remove", "the", "quotes", "and", "surround", "the", "value", "with", "parentheses", "NUMBER", "For", "example", "transform", "some", "number", "NUMBER", "to", "some", "number", "NUMBER", "NUMBER", "The", "new", "for", "loop", "and", "if", "else", "else", "if", "syntax", "should", "be", "use", "in", "place", "of", "the", "standard", "attributes", "NUMBER", "For", "example", "TAG", "should", "become", "something", "like", "TAG", "NUMBER", "We", "can", "keep", "the", "marko", "tag", "NUMBER", "json", "file", "for", "reference", "but", "they", "wouldn", "t", "be", "use", "anymore", "to", "infer", "attribute", "types", "since", "type", "will", "always", "be", "an", "expression", "now", "NUMBER", "Also", "note", "that", "marko", "tag", "NUMBER", "json", "file", "would", "still", "need", "to", "be", "use", "for", "describing", "tag", "transformers", "NUMBER", "The", "migration", "tool", "should", "probably", "leverage", "htmljs", "parser", "to", "parse", "the", "old", "template", "since", "it", "will", "be", "able", "to", "properly", "parse", "the", "new", "and", "old", "syntax", "NUMBER", "This", "would", "be", "helpful", "in", "case", "the", "migration", "tool", "be", "run", "multiple", "times", "for", "the", "same", "template", "NUMBER", "This", "isn", "t", "a", "comprehensive", "guide", "but", "I", "think", "these", "be", "the", "key", "things", "that", "would", "need", "to", "be", "migrated", "NUMBER", "Thanks", "for", "the", "PR", "NUMBER", "I", "see", "the", "following", "jshint", "error", "that", "looks", "like", "a", "problem", "taglibs", "core", "core", "tag", "transformer", "NUMBER", "js", "line", "NUMBER", "col", "NUMBER", "UnlessNode", "be", "not", "defined", "NUMBER", "Can", "you", "please", "add", "test", "and", "update", "the", "docs", "For", "the", "docs", "you", "will", "need", "to", "update", "the", "following", "file", "LINK", "js", "marko", "blob", "master", "docs", "language", "guide", "NUMBER", "md", "For", "the", "test", "please", "duplicate", "the", "following", "directory", "and", "update", "it", "to", "test", "the", "new", "unless", "attribute", "and", "the", "new", "TAG", "tag", "LINK", "js", "marko", "tree", "master", "test", "fixture", "template", "if", "else", "Thanks", "Patrick", "We", "be", "use", "a", "simple", "string", "compare", "for", "actual", "and", "expected", "and", "any", "whitespace", "difference", "will", "cause", "the", "test", "case", "to", "fail", "NUMBER", "I", "suspect", "you", "be", "use", "Atom", "and", "it", "be", "automatically", "add", "a", "trail", "new", "line", "when", "you", "save", "the", "expected", "file", "to", "disk", "NUMBER", "You", "can", "disable", "the", "feature", "by", "add", "the", "following", "to", "your", "User", "Config", "file", "NUMBER", "whitespace", "ensureSingleTrailingNewline", "false", "Hi", "kristianmandrup", "the", "code", "change", "and", "test", "look", "good", "but", "why", "did", "you", "completely", "reformat", "the", "markdown", "for", "the", "docs", "It", "looks", "like", "the", "markdown", "change", "were", "just", "stylistic", "change", "but", "now", "the", "style", "will", "be", "different", "in", "the", "other", "markdown", "file", "NUMBER", "I", "would", "rather", "use", "the", "old", "style", "unless", "there", "be", "a", "good", "reason", "to", "switch", "NUMBER", "Can", "you", "please", "only", "change", "the", "relevant", "docs", "for", "unless", "and", "we", "can", "discuss", "stylistic", "change", "to", "the", "Markdown", "as", "a", "separate", "Github", "issue", "PR", "NUMBER", "Thanks", "NUMBER", "Thanks", "for", "the", "PR", "kristianmandrup", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "The", "stylistic", "change", "that", "I", "was", "referring", "to", "was", "the", "Markdown", "syntax", "for", "declaring", "headings", "and", "bold", "NUMBER", "I", "revert", "those", "change", "and", "update", "the", "docs", "for", "Conditionals", "LINK", "js", "marko", "commit", "NUMBER", "a", "NUMBER", "db", "NUMBER", "ee", "NUMBER", "acd", "NUMBER", "bc", "NUMBER", "a", "NUMBER", "bee", "NUMBER", "e", "NUMBER", "d", "LINK", "js", "marko", "commit", "NUMBER", "e", "NUMBER", "a", "NUMBER", "a", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ad", "NUMBER", "d", "NUMBER", "b", "NUMBER", "fba", "NUMBER", "d", "NUMBER", "dfc", "NUMBER", "fd", "NUMBER", "I", "also", "publish", "the", "new", "docs", "to", "markojs", "NUMBER", "com", "NUMBER", "Please", "let", "me", "know", "if", "you", "see", "any", "issue", "NUMBER", "Thanks", "again", "NUMBER", "Hi", "jlarsson", "thanks", "for", "the", "PR", "NUMBER", "I", "see", "where", "you", "be", "going", "with", "this", "but", "I", "do", "have", "some", "concerns", "NUMBER", "Adding", "a", "try", "NUMBER", "catch", "will", "prevent", "the", "frequently", "call", "code", "from", "be", "optimized", "by", "V", "NUMBER", "and", "it", "will", "also", "only", "catch", "any", "synchronous", "error", "NUMBER", "I", "m", "more", "inclined", "to", "add", "the", "try", "NUMBER", "catch", "block", "around", "the", "following", "line", "LINK", "runtime", "NUMBER", "js", "L", "NUMBER", "Thoughts", "Can", "you", "make", "that", "change", "On", "a", "relate", "note", "Koa", "relies", "on", "a", "returned", "Readable", "stream", "but", "in", "most", "Express", "apps", "we", "be", "write", "directly", "to", "the", "Writable", "HTTP", "response", "stream", "without", "creating", "an", "intermediate", "stream", "faster", "NUMBER", "javascript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "module", "NUMBER", "export", "function", "req", "res", "template", "NUMBER", "render", "NUMBER", "res", "Just", "throw", "that", "out", "there", "Glad", "you", "be", "enjoying", "marko", "That", "wouldn", "t", "be", "hard", "to", "implement", "but", "I", "always", "find", "unless", "confusing", "when", "reading", "CoffeeScript", "code", "NUMBER", "I", "m", "sure", "I", "could", "get", "use", "to", "it", "though", "NUMBER", "Hi", "kristianmandrup", "I", "think", "that", "would", "be", "independent", "of", "Marko", "NUMBER", "In", "your", "application", "s", "main", "script", "on", "either", "the", "server", "or", "client", "you", "could", "run", "code", "to", "do", "what", "you", "be", "ask", "NUMBER", "In", "the", "Marko", "template", "your", "expressions", "be", "just", "JavaScript", "so", "there", "would", "be", "no", "problem", "there", "NUMBER", "However", "I", "would", "recommend", "not", "use", "globals", "and", "to", "instead", "use", "require", "to", "import", "any", "JavaScript", "modules", "into", "your", "template", "or", "other", "JavaScript", "code", "NUMBER", "Also", "people", "might", "not", "be", "happy", "if", "you", "monkey", "patch", "the", "prototypes", "for", "core", "JavaScript", "types", "unless", "they", "be", "polyfills", "NUMBER", "Let", "me", "know", "if", "you", "still", "think", "that", "there", "be", "something", "that", "can", "be", "do", "to", "solve", "your", "common", "use", "case", "Hey", "kristianmandrup", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "since", "you", "can", "make", "change", "on", "your", "side", "to", "meet", "your", "needs", "NUMBER", "I", "don", "t", "think", "marko", "should", "be", "introduce", "any", "globals", "or", "make", "it", "easier", "to", "introduce", "globals", "NUMBER", "I", "think", "it", "be", "better", "to", "stick", "with", "the", "CommonJS", "way", "of", "importing", "dependencies", "use", "require", "NUMBER", "Let", "me", "know", "if", "you", "have", "any", "thoughts", "or", "suggestions", "NUMBER", "Thanks", "NUMBER", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Thanks", "for", "report", "the", "problem", "De", "duping", "be", "not", "happening", "if", "the", "find", "taglibs", "be", "come", "from", "the", "cache", "NUMBER", "That", "s", "support", "NUMBER", "Please", "see", "LINK", "js", "marko", "loop", "status", "variable", "That", "works", "for", "you", "correct", "Hi", "kristianmandrup", "thanks", "for", "the", "PR", "but", "your", "change", "broke", "test", "please", "run", "npm", "test", "first", "NUMBER", "I", "hope", "you", "don", "t", "mind", "but", "I", "went", "ahead", "and", "made", "change", "in", "marko", "core", "to", "support", "the", "following", "xml", "TAG", "My", "nested", "content", "TAG", "Output", "html", "TAG", "My", "nested", "content", "TAG", "See", "LINK", "js", "marko", "issue", "NUMBER", "Not", "exactly", "NUMBER", "support", "dynamic", "components", "be", "a", "little", "tricky", "NUMBER", "It", "s", "kind", "of", "support", "if", "you", "use", "TAG", "but", "that", "s", "not", "a", "clean", "solution", "NUMBER", "We", "talked", "about", "add", "support", "for", "something", "similar", "to", "the", "following", "xml", "TAG", "TAG", "TAG", "Is", "that", "along", "the", "lines", "of", "what", "you", "be", "thinking", "It", "s", "doable", "but", "it", "would", "require", "a", "little", "more", "work", "than", "what", "was", "required", "for", "TAG", "NUMBER", "I", "opened", "a", "Github", "issue", "LINK", "js", "marko", "issue", "NUMBER", "I", "support", "that", "proposal", "but", "I", "won", "t", "be", "able", "to", "work", "on", "it", "for", "at", "least", "a", "week", "or", "two", "NUMBER", "I", "need", "to", "finish", "up", "the", "marko", "website", "LINK", "LINK", "and", "put", "together", "a", "blog", "post", "announcing", "Marko", "Widgets", "v", "NUMBER", "In", "the", "meantime", "I", "recommend", "xml", "TAG", "TAG", "TAG", "attrs", "currently", "only", "applies", "HTML", "tags", "not", "custom", "tags", "NUMBER", "You", "can", "however", "do", "the", "following", "xml", "TAG", "However", "now", "that", "you", "point", "it", "out", "NUMBER", "We", "should", "allow", "xml", "TAG", "I", "will", "make", "that", "change", "NUMBER", "Fixed", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Since", "there", "be", "currently", "no", "JavaScript", "engine", "that", "natively", "support", "ES", "NUMBER", "modules", "why", "not", "just", "use", "babel", "to", "transpile", "the", "ES", "NUMBER", "module", "code", "into", "mostly", "equivalent", "ES", "NUMBER", "code", "that", "uses", "CommonJS", "module", "syntax", "Once", "you", "have", "ES", "NUMBER", "code", "you", "can", "build", "browser", "JavaScript", "bundle", "use", "almost", "any", "of", "the", "popular", "JavaScript", "module", "bundlers", "or", "the", "JavaScript", "module", "bundler", "can", "do", "the", "transpiling", "NUMBER", "That", "seems", "like", "a", "better", "strategy", "than", "buying", "into", "a", "custom", "module", "loading", "system", "such", "as", "SystemJS", "or", "jspm", "each", "with", "their", "own", "quirks", "and", "proprietary", "features", "NUMBER", "When", "I", "look", "at", "SystemJS", "and", "jspm", "I", "be", "reminded", "of", "RequireJS", "and", "all", "of", "the", "ugly", "configuration", "that", "it", "required", "NUMBER", "If", "SystemJS", "or", "jspm", "do", "not", "support", "the", "browser", "field", "spec", "LINK", "for", "remapping", "a", "server", "side", "JavaScript", "module", "to", "a", "different", "browser", "side", "JavaScript", "module", "then", "that", "would", "be", "a", "problem", "for", "marko", "NUMBER", "I", "recommend", "use", "Lasso", "NUMBER", "js", "LINK", "js", "lasso", "or", "Browserify", "LINK", "or", "possibly", "Webpack", "LINK", "as", "your", "JavaScript", "module", "bundler", "for", "build", "client", "side", "bundle", "of", "your", "JavaScript", "code", "NUMBER", "I", "would", "not", "recommend", "trying", "to", "make", "marko", "or", "any", "other", "module", "write", "in", "the", "Node", "NUMBER", "js", "way", "work", "with", "RequireJS", "NUMBER", "Have", "you", "considered", "transforming", "your", "AMD", "code", "into", "CommonJS", "so", "that", "you", "can", "drop", "AMD", "and", "RequireJS", "completely", "both", "be", "dying", "technologies", "NUMBER", "With", "that", "said", "if", "someone", "in", "the", "community", "wants", "to", "build", "a", "custom", "Marko", "loader", "for", "SystemJS", "or", "jspm", "then", "I", "ll", "try", "to", "help", "out", "but", "it", "be", "not", "something", "I", "be", "interested", "in", "code", "NUMBER", "I", "investigated", "integrating", "Babel", "a", "while", "ago", "and", "find", "that", "it", "was", "very", "easy", "although", "I", "was", "waiting", "on", "some", "change", "from", "Babel", "to", "make", "it", "more", "efficient", "NUMBER", "Specifically", "the", "Babel", "transpiler", "build", "the", "Abstract", "Syntax", "Tree", "AST", "of", "the", "code", "and", "we", "were", "hoping", "to", "leverage", "their", "AST", "instead", "of", "also", "parsing", "it", "with", "esprima", "NUMBER", "I", "think", "Babel", "has", "since", "made", "some", "change", "to", "make", "it", "easier", "and", "better", "for", "tool", "like", "Lasso", "bundler", "to", "utilize", "ES", "NUMBER", "via", "Babel", "NUMBER", "On", "Wed", "Aug", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "AM", "Patrick", "Steele", "Idem", "TAG", "write", "Since", "there", "be", "currently", "no", "JavaScript", "engine", "that", "natively", "support", "ES", "NUMBER", "modules", "why", "not", "just", "use", "babel", "to", "transpile", "the", "ES", "NUMBER", "module", "code", "into", "mostly", "equivalent", "ES", "NUMBER", "code", "that", "uses", "CommonJS", "module", "syntax", "Once", "you", "have", "ES", "NUMBER", "code", "you", "can", "build", "browser", "JavaScript", "bundle", "use", "almost", "any", "of", "the", "popular", "JavaScript", "module", "bundlers", "or", "the", "JavaScript", "module", "bundler", "can", "do", "the", "transpiling", "NUMBER", "That", "seems", "like", "a", "better", "strategy", "than", "buying", "into", "a", "custom", "module", "loading", "system", "such", "as", "SystemJS", "or", "jspm", "each", "with", "their", "own", "quirks", "and", "proprietary", "features", "NUMBER", "When", "I", "look", "at", "SystemJS", "and", "jspm", "I", "be", "reminded", "of", "RequireJS", "and", "all", "of", "the", "ugly", "configuration", "that", "it", "required", "NUMBER", "If", "SystemJS", "or", "jspm", "do", "not", "support", "the", "browser", "field", "spec", "LINK", "for", "remapping", "a", "server", "side", "JavaScript", "module", "to", "a", "different", "browser", "side", "JavaScript", "module", "then", "that", "would", "be", "a", "problem", "for", "marko", "NUMBER", "I", "recommend", "use", "Lasso", "NUMBER", "js", "LINK", "js", "lasso", "or", "Browserify", "LINK", "or", "possibly", "Webpack", "LINK", "as", "your", "JavaScript", "module", "bundler", "for", "build", "client", "side", "bundle", "of", "your", "JavaScript", "code", "NUMBER", "I", "would", "not", "recommend", "trying", "to", "make", "marko", "or", "any", "other", "module", "write", "in", "the", "Node", "NUMBER", "js", "way", "work", "with", "RequireJS", "NUMBER", "Have", "you", "considered", "transforming", "your", "AMD", "code", "into", "CommonJS", "so", "that", "you", "can", "drop", "AMD", "and", "RequireJS", "completely", "both", "be", "dying", "technologies", "NUMBER", "With", "that", "said", "if", "someone", "in", "the", "community", "wants", "to", "build", "a", "custom", "Marko", "loader", "for", "SystemJS", "or", "jspm", "then", "I", "ll", "try", "to", "help", "out", "but", "it", "be", "not", "something", "I", "be", "interested", "in", "code", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "Glad", "to", "hear", "wheresrhys", "thanks", "for", "sharing", "I", "know", "you", "be", "use", "webpack", "but", "I", "recommend", "checking", "out", "Lasso", "NUMBER", "js", "NUMBER", "I", "think", "it", "be", "pretty", "awesome", "and", "it", "offers", "a", "lot", "of", "features", "that", "webpack", "doesn", "t", "offer", "Hi", "kristianmandrup", "I", "m", "not", "sure", "if", "it", "makes", "sense", "to", "pull", "this", "into", "core", "just", "yet", "NUMBER", "Here", "s", "the", "same", "functionality", "provide", "as", "a", "separate", "module", "publish", "to", "npm", "LINK", "js", "marko", "tag", "body", "Does", "that", "work", "for", "you", "There", "s", "some", "really", "cool", "stuff", "that", "you", "can", "do", "simply", "by", "transforming", "the", "AST", "during", "the", "compilation", "stage", "NUMBER", "It", "definitely", "needs", "to", "be", "documented", "NUMBER", "I", "m", "glad", "you", "were", "able", "to", "get", "your", "hands", "dirty", "and", "learn", "some", "of", "the", "tricks", "for", "marko", "Did", "you", "forget", "the", "w", "bind", "w", "body", "be", "also", "only", "for", "widgets", "anything", "prefixed", "with", "w", "be", "handle", "by", "marko", "widgets", "NUMBER", "If", "you", "be", "not", "use", "marko", "widgets", "then", "you", "need", "to", "do", "the", "following", "xml", "TAG", "TAG", "TAG", "It", "s", "more", "complicated", "for", "the", "marko", "widgets", "use", "case", "since", "marko", "widgets", "will", "handle", "preserving", "nested", "HTML", "content", "when", "the", "outer", "widget", "be", "rerendered", "NUMBER", "It", "will", "also", "handle", "update", "the", "nested", "HTML", "content", "when", "the", "outer", "widget", "do", "not", "need", "to", "be", "rerendered", "but", "new", "nested", "content", "was", "provide", "NUMBER", "In", "addition", "w", "body", "must", "be", "bound", "to", "a", "container", "HTML", "element", "in", "order", "for", "everything", "to", "work", "NUMBER", "Hi", "kristianmandrup", "you", "don", "t", "need", "to", "patch", "marko", "to", "support", "this", "NUMBER", "It", "can", "be", "do", "completely", "in", "user", "land", "NUMBER", "Let", "me", "put", "together", "a", "separate", "project", "that", "you", "can", "use", "as", "an", "example", "NUMBER", "First", "off", "it", "s", "all", "just", "code", "so", "we", "can", "make", "anything", "work", "I", "don", "t", "see", "anything", "here", "to", "suggest", "that", "you", "would", "need", "a", "difficult", "change", "and", "I", "would", "be", "surprised", "if", "second", "level", "imports", "be", "not", "support", "NUMBER", "If", "that", "be", "the", "case", "then", "we", "should", "fix", "it", "NUMBER", "I", "ll", "add", "a", "test", "case", "and", "see", "what", "I", "can", "figure", "out", "NUMBER", "Also", "can", "you", "please", "clarify", "on", "the", "following", "Looks", "like", "the", "problem", "be", "in", "part", "cause", "by", "use", "browser", "refresh", "What", "makes", "you", "think", "that", "Great", "NUMBER", "Thank", "you", "NUMBER", "I", "ll", "take", "a", "look", "now", "NUMBER", "Thanks", "for", "the", "sample", "project", "kristianmandrup", "NUMBER", "I", "was", "able", "to", "reproduce", "the", "problem", "pretty", "quickly", "and", "I", "have", "put", "in", "a", "fix", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Let", "me", "know", "if", "you", "see", "any", "other", "issue", "NUMBER", "Thanks", "again", "NUMBER", "on", "logging", "NUMBER", "The", "debug", "LINK", "module", "would", "probably", "be", "the", "most", "appropriate", "since", "you", "could", "launch", "the", "app", "with", "DEBUG", "marko", "node", "server", "NUMBER", "js", "to", "see", "exactly", "what", "marko", "be", "doing", "during", "compilation", "NUMBER", "Do", "you", "mind", "open", "a", "separate", "Github", "issue", "to", "describe", "what", "type", "of", "logging", "you", "would", "be", "interested", "in", "for", "marko", "kristianmandrup", "please", "try", "the", "following", "MARKO_CLEAN", "true", "node", "your", "app", "NUMBER", "js", "That", "will", "force", "all", "template", "to", "be", "recompiled", "NUMBER", "Do", "you", "see", "any", "issue", "with", "the", "test", "case", "I", "add", "It", "was", "pretty", "much", "your", "code", "with", "some", "extra", "things", "remove", "and", "the", "test", "cases", "be", "passing", "NUMBER", "Do", "you", "by", "any", "chance", "have", "a", "circular", "dependency", "in", "your", "imports", "I", "just", "push", "a", "small", "change", "to", "handle", "circular", "imports", "but", "I", "don", "t", "think", "that", "be", "impacting", "you", "because", "otherwise", "you", "would", "have", "seen", "a", "Maximum", "call", "stack", "error", "NUMBER", "Here", "s", "the", "fix", "I", "push", "LINK", "js", "marko", "commit", "NUMBER", "d", "NUMBER", "bbc", "NUMBER", "ac", "NUMBER", "e", "NUMBER", "a", "NUMBER", "b", "NUMBER", "c", "NUMBER", "ec", "NUMBER", "d", "NUMBER", "de", "NUMBER", "b", "NUMBER", "Is", "your", "app", "crash", "Do", "you", "think", "you", "would", "be", "able", "to", "provide", "a", "fork", "of", "marko", "with", "a", "fail", "test", "case", "Are", "those", "global", "imports", "in", "an", "install", "node", "module", "If", "buildLookup", "be", "not", "be", "call", "then", "that", "would", "suggest", "that", "no", "template", "be", "be", "compiled", "NUMBER", "Make", "sure", "you", "run", "your", "app", "with", "MARKO_CLEAN", "true", "node", "app", "NUMBER", "js", "to", "force", "all", "template", "to", "be", "recompiled", "NUMBER", "The", "logic", "for", "disabling", "the", "checkUpToDate", "looks", "fine", "to", "me", "so", "MARKO_CLEAN", "true", "node", "app", "NUMBER", "js", "should", "force", "all", "template", "to", "be", "recompiled", "NUMBER", "Are", "you", "sure", "that", "be", "not", "happening", "If", "you", "be", "use", "the", "Node", "NUMBER", "js", "require", "extension", "then", "it", "will", "be", "here", "LINK", "js", "marko", "blob", "NUMBER", "b", "NUMBER", "de", "NUMBER", "fc", "NUMBER", "f", "NUMBER", "bcccec", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "ff", "NUMBER", "node", "require", "NUMBER", "js", "L", "NUMBER", "Was", "that", "a", "question", "and", "then", "an", "answer", "to", "your", "own", "question", "Should", "I", "close", "this", "issue", "or", "do", "you", "think", "we", "need", "to", "improve", "the", "docs", "for", "renderBody", "out", "as", "it", "relate", "to", "Marko", "LINK", "js", "marko", "tag", "renderer", "Thanks", "Thanks", "Glad", "to", "have", "you", "on", "this", "project", "Hi", "kristianmandrup", "if", "you", "have", "a", "marko", "tag", "NUMBER", "json", "and", "you", "don", "t", "declare", "a", "certain", "attribute", "then", "it", "be", "considered", "a", "splat", "attribute", "and", "it", "be", "add", "to", "a", "special", "property", "NUMBER", "The", "fix", "be", "to", "declare", "the", "data", "expression", "attribute", "in", "your", "marko", "tag", "NUMBER", "json", "file", "NUMBER", "See", "LINK", "js", "marko", "defining", "attributes", "With", "that", "said", "the", "Marko", "compiler", "should", "probably", "throw", "an", "error", "at", "time", "unless", "you", "explicitly", "add", "the", "attribute", "NUMBER", "I", "m", "going", "to", "investigate", "NUMBER", "Also", "relevant", "LINK", "js", "marko", "issue", "NUMBER", "Proposal", "Replace", "HTML", "parser", "with", "a", "new", "parser", "that", "recognizes", "attribute", "types", "Thanks", "for", "report", "the", "confusing", "error", "message", "NUMBER", "I", "just", "push", "a", "commit", "that", "should", "make", "things", "less", "confusing", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "see", "any", "other", "issue", "NUMBER", "Thanks", "NUMBER", "You", "re", "welcome", "NUMBER", "For", "Marko", "Widgets", "we", "hope", "to", "release", "v", "NUMBER", "next", "week", "NUMBER", "I", "ve", "be", "focusing", "on", "benchmarking", "and", "test", "this", "week", "and", "I", "do", "not", "expect", "the", "API", "to", "change", "for", "the", "final", "v", "NUMBER", "release", "NUMBER", "That", "be", "I", "encourage", "you", "to", "use", "the", "latest", "beta", "version", "now", "so", "that", "we", "can", "find", "and", "fix", "any", "bug", "sooner", "I", "m", "not", "sure", "if", "you", "have", "had", "a", "chance", "to", "review", "but", "I", "have", "update", "the", "docs", "and", "add", "benchmarks", "to", "morphdom", "NUMBER", "See", "LINK", "steele", "idem", "morphdom", "I", "ve", "also", "update", "the", "benchmarks", "we", "use", "to", "compare", "performance", "of", "Marko", "Widgets", "with", "React", "use", "the", "latest", "NUMBER", "beta", "NUMBER", "release", "Marko", "vs", "React", "Performance", "Benchmark", "LINK", "steele", "idem", "marko", "vs", "react", "summary", "React", "and", "Marko", "Widgets", "perform", "almost", "identical", "in", "the", "browser", "but", "Marko", "Widgets", "be", "NUMBER", "x", "faster", "when", "rendering", "on", "the", "server", "NUMBER", "In", "addition", "Marko", "Widgets", "be", "much", "more", "lightweight", "Hi", "zwhitchcox", "you", "might", "want", "to", "try", "reversing", "the", "order", "of", "the", "this", "NUMBER", "body", "and", "the", "this", "NUMBER", "type", "assignments", "as", "shown", "below", "javascript", "use", "strict", "require", "marko", "node", "require", "NUMBER", "install", "let", "koa", "require", "koa", "let", "app", "koa", "let", "template", "require", "NUMBER", "views", "index", "NUMBER", "marko", "app", "NUMBER", "use", "function", "this", "NUMBER", "type", "type", "html", "this", "NUMBER", "body", "template", "NUMBER", "ream", "server", "NUMBER", "listen", "NUMBER", "I", "don", "t", "use", "Koa", "but", "I", "suspect", "that", "when", "you", "assign", "the", "stream", "to", "this", "NUMBER", "body", "that", "it", "commit", "the", "response", "body", "NUMBER", "If", "that", "be", "the", "case", "then", "the", "Content", "Type", "header", "may", "not", "be", "sent", "correctly", "NUMBER", "I", "also", "update", "your", "code", "to", "use", "the", "Node", "NUMBER", "js", "require", "extension", "Let", "me", "know", "if", "that", "do", "or", "do", "not", "solve", "your", "problem", "NUMBER", "Doh", "I", "bet", "if", "the", "page", "HTML", "would", "have", "looked", "like", "HTML", "the", "browser", "would", "have", "be", "cool", "with", "it", "so", "it", "probably", "didn", "t", "help", "that", "it", "only", "rendered", "hello", "NUMBER", "Hey", "Globik", "Probably", "better", "to", "open", "a", "separate", "Github", "issue", "in", "the", "future", "but", "I", "ll", "try", "to", "answer", "your", "question", "below", "NUMBER", "So", "be", "correct", "this", "NUMBER", "type", "html", "The", "following", "be", "the", "correct", "content", "type", "for", "HTML", "responses", "javascript", "this", "NUMBER", "type", "text", "html", "charset", "utf", "NUMBER", "Your", "marko", "be", "simple", "enough", "but", "how", "do", "I", "build", "a", "binary", "tree", "with", "marko", "Marko", "support", "macros", "inline", "function", "for", "rendering", "HTML", "and", "those", "function", "can", "be", "call", "recursively", "LINK", "guide", "macros", "You", "will", "want", "to", "do", "something", "similar", "to", "the", "following", "xml", "TAG", "TAG", "TAG", "node", "NUMBER", "value", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Where", "be", "marko", "s", "tutos", "can", "i", "find", "Definitely", "start", "with", "the", "screencasts", "if", "you", "haven", "t", "watched", "those", "yet", "LINK", "PLZUgs", "F", "NUMBER", "XXQJBxA", "NUMBER", "UqnwTVMZS_uza_C", "Also", "check", "out", "Try", "Marko", "Online", "LINK", "online", "Language", "guide", "LINK", "guide", "Sample", "apps", "LINK", "js", "samples", "If", "you", "think", "there", "be", "particular", "tutorials", "that", "be", "needed", "please", "share", "by", "open", "a", "Github", "issue", "NUMBER", "Also", "please", "join", "us", "in", "the", "Gitter", "chat", "room", "and", "we", "will", "be", "happy", "to", "answer", "any", "question", "you", "might", "have", "LINK", "js", "marko", "Hi", "dtrikannad", "I", "m", "assuming", "you", "be", "use", "the", "flash", "LINK", "module", "for", "Express", "NUMBER", "I", "ve", "not", "use", "that", "module", "but", "according", "to", "the", "documentation", "the", "flash", "message", "be", "stored", "in", "the", "res", "NUMBER", "locals", "NUMBER", "flash", "variable", "and", "they", "be", "an", "array", "in", "the", "following", "form", "json", "type", "info", "message", "message", "I", "would", "recommend", "just", "passing", "the", "flash", "message", "to", "your", "page", "template", "as", "part", "of", "the", "template", "data", "similar", "to", "the", "following", "javascript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "app", "NUMBER", "get", "function", "req", "res", "template", "NUMBER", "render", "flashMessages", "res", "NUMBER", "locals", "NUMBER", "flash", "res", "And", "then", "in", "your", "template", "xml", "TAG", "TAG", "TAG", "Type", "TAG", "flashMessage", "NUMBER", "type", "TAG", "TAG", "Message", "TAG", "flashMessage", "NUMBER", "message", "TAG", "TAG", "I", "hope", "that", "answers", "your", "question", "NUMBER", "Hi", "dtrikannad", "glad", "that", "solve", "your", "problem", "NUMBER", "Do", "you", "have", "a", "stack", "trace", "with", "your", "NUMBER", "error", "Marko", "doesn", "t", "have", "any", "try", "NUMBER", "catch", "blocks", "so", "any", "exception", "be", "just", "going", "to", "bubble", "up", "NUMBER", "If", "you", "be", "not", "seeing", "a", "proper", "stack", "trace", "in", "your", "logs", "then", "I", "think", "there", "be", "issue", "with", "how", "your", "server", "be", "configured", "and", "that", "be", "going", "to", "cause", "more", "problem", "for", "you", "in", "the", "future", "NUMBER", "Did", "you", "you", "add", "your", "own", "uncaught", "exception", "handler", "e", "NUMBER", "g", "NUMBER", "process", "NUMBER", "on", "uncaughtException", "function", "err", "NUMBER", "Are", "you", "use", "promises", "promises", "catch", "exception", "and", "will", "silently", "eat", "them", "in", "some", "circumstances", "If", "you", "be", "desperate", "you", "can", "do", "the", "following", "xml", "try", "TAG", "TAG", "Not", "Empty", "TAG", "catch", "e", "console", "NUMBER", "error", "e", "use", "embedded", "scripts", "be", "not", "recommended", "I", "hope", "that", "helps", "Hi", "dtrikannad", "I", "m", "going", "to", "close", "this", "issue", "but", "if", "you", "be", "still", "facing", "issue", "relate", "to", "debugging", "then", "feel", "free", "to", "comment", "here", "or", "open", "another", "Github", "issue", "NUMBER", "Hey", "crash", "NUMBER", "the", "flash", "message", "be", "stored", "in", "a", "session", "that", "persists", "across", "redirects", "NUMBER", "See", "LINK", "L", "NUMBER", "L", "NUMBER", "As", "an", "addendum", "to", "my", "earlier", "response", "whenever", "you", "pass", "flash", "message", "to", "the", "template", "to", "be", "rendered", "you", "should", "just", "also", "clear", "out", "flash", "message", "from", "the", "session", "javascript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "app", "NUMBER", "get", "function", "req", "res", "var", "flashMessages", "res", "NUMBER", "locals", "NUMBER", "flash", "if", "flashMessages", "flashMessages", "res", "NUMBER", "locals", "NUMBER", "flash", "NUMBER", "concat", "Clone", "the", "flash", "message", "before", "clearing", "res", "NUMBER", "locals", "NUMBER", "flash", "NUMBER", "length", "NUMBER", "Remove", "all", "of", "the", "elements", "from", "the", "flash", "message", "stored", "in", "the", "session", "template", "NUMBER", "render", "flashMessages", "res", "NUMBER", "locals", "NUMBER", "flash", "res", "I", "don", "t", "use", "sessions", "in", "my", "app", "and", "I", "don", "t", "use", "the", "flash", "module", "but", "that", "should", "work", "for", "you", "assuming", "you", "have", "Express", "sessions", "set", "up", "correctly", "NUMBER", "Nice", "improvement", "NUMBER", "Thank", "you", "Hi", "williamvivier", "I", "created", "a", "TAG", "emmet", "snippets", "NUMBER", "json", "file", "and", "I", "also", "needed", "to", "update", "my", "Atom", "keymap", "NUMBER", "cson", "file", "Atom", "Open", "Your", "Keymap", "_", "keymap", "NUMBER", "cson", "_", "coffee", "atom", "text", "editor", "data", "grammar", "marko", "not", "mini", "tab", "emmet", "expand", "abbreviation", "with", "tab", "_", "TAG", "emmet", "snippets", "NUMBER", "json", "_", "json", "marko", "extend", "html", "snippets", "for", "TAG", "NUMBER", "TAG", "for", "for", "NUMBER", "item", "in", "NUMBER", "items", "attrs", "attrs", "NUMBER", "expr", "if", "TAG", "NUMBER", "TAG", "if", "if", "NUMBER", "condition", "else", "if", "TAG", "NUMBER", "TAG", "else", "if", "else", "if", "NUMBER", "condition", "else", "TAG", "NUMBER", "TAG", "var", "TAG", "assign", "TAG", "require", "TAG", "op", "TAG", "oh", "TAG", "ob", "TAG", "use", "TAG", "n", "TAG", "n", "NUMBER", "content", "n", "TAG", "n", "TAG", "placeholder", "TAG", "put", "TAG", "async", "TAG", "n", "NUMBER", "n", "TAG", "bind", "w", "bind", "NUMBER", "NUMBER", "widget", "include", "TAG", "NUMBER", "expression", "NUMBER", "trueTemplate", "NUMBER", "falseTemplate", "def", "TAG", "n", "NUMBER", "n", "TAG", "invoke", "TAG", "comment", "TAG", "NUMBER", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "No", "colors", "TAG", "TAG", "TAG", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "No", "colors", "TAG", "TAG", "We", "will", "also", "be", "introduce", "a", "cleaner", "syntax", "for", "macros", "function", "xml", "TAG", "Name", "child", "NUMBER", "name", "Children", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "And", "ES", "NUMBER", "style", "imports", "xml", "TAG", "reverse", "from", "NUMBER", "helpers", "foo", "from", "NUMBER", "foo", "TAG", "Hello", "reverse", "Frank", "Just", "wanted", "to", "share", "with", "you", "because", "I", "think", "these", "change", "will", "likely", "impact", "how", "you", "be", "doing", "things", "with", "the", "jade", "transpiler", "NUMBER", "If", "you", "have", "feedback", "please", "share", "Thanks", "NUMBER", "Thank", "you", "again", "merwan", "NUMBER", "for", "the", "contribution", "Hi", "sandro", "pasquali", "the", "Marko", "compiler", "processes", "expression", "find", "in", "JavaScript", "strings", "to", "produce", "compiled", "JavaScript", "code", "that", "uses", "concatenation", "to", "achieve", "the", "expected", "result", "NUMBER", "Essentially", "you", "get", "the", "benefits", "of", "ES", "NUMBER", "template", "strings", "inside", "Marko", "template", "and", "there", "be", "no", "conflict", "with", "ES", "NUMBER", "since", "the", "code", "be", "transpiled", "to", "ES", "NUMBER", "compatible", "code", "at", "compile", "time", "NUMBER", "For", "example", "given", "the", "following", "template", "xml", "Hello", "data", "NUMBER", "name", "The", "compiled", "code", "will", "be", "similar", "to", "the", "following", "javascript", "Hello", "data", "NUMBER", "name", "Interestingly", "if", "you", "want", "to", "use", "ES", "NUMBER", "template", "strings", "you", "can", "still", "do", "that", "by", "use", "backticks", "instead", "of", "string", "quotes", "Marko", "only", "process", "NUMBER", "tokens", "inside", "JavaScript", "strings", "NUMBER", "For", "example", "given", "the", "following", "template", "xml", "Hello", "data", "NUMBER", "name", "The", "compiled", "output", "will", "be", "the", "following", "javascript", "Hello", "data", "NUMBER", "name", "The", "above", "compiled", "code", "will", "work", "exactly", "as", "expected", "in", "web", "browsers", "that", "support", "ES", "NUMBER", "Hopefully", "that", "answers", "your", "question", "but", "let", "me", "know", "if", "not", "NUMBER", "Hi", "kristianmandrup", "can", "you", "please", "provide", "more", "details", "on", "your", "use", "case", "and", "why", "you", "need", "this", "feature", "I", "think", "that", "will", "allow", "be", "to", "provide", "a", "better", "solution", "to", "your", "problem", "NUMBER", "Also", "we", "want", "to", "make", "ensure", "that", "template", "still", "compile", "through", "the", "command", "line", "compiler", "and", "other", "tool", "NUMBER", "If", "application", "code", "must", "first", "register", "taglibs", "as", "you", "describe", "then", "that", "would", "mean", "that", "other", "tool", "would", "not", "work", "as", "expected", "unless", "they", "also", "some", "how", "loaded", "your", "application", "code", "to", "register", "the", "additional", "taglibs", "NUMBER", "On", "a", "relate", "note", "Marko", "do", "support", "the", "ability", "for", "a", "taglib", "to", "import", "another", "taglib", "here", "s", "a", "link", "to", "the", "relevant", "code", "in", "loader", "taglib", "NUMBER", "js", "LINK", "js", "marko", "blob", "NUMBER", "f", "NUMBER", "ed", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ac", "NUMBER", "e", "NUMBER", "c", "NUMBER", "f", "NUMBER", "compiler", "taglibs", "taglib", "loader", "loader", "taglib", "NUMBER", "js", "L", "NUMBER", "NUMBER", "Not", "sure", "if", "that", "would", "solve", "your", "problem", "though", "NUMBER", "Please", "provide", "more", "details", "on", "your", "use", "case", "NUMBER", "Thanks", "Interesting", "NUMBER", "It", "looks", "like", "the", "html", "parser", "we", "be", "use", "i", "NUMBER", "e", "NUMBER", "htmlparser", "NUMBER", "LINK", "be", "processing", "the", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "The", "JavaScript", "renderer", "for", "the", "TAG", "tag", "might", "look", "like", "the", "following", "javascript", "module", "NUMBER", "export", "function", "render", "input", "out", "var", "type", "input", "NUMBER", "type", "out", "NUMBER", "write", "TAG", "The", "JSON", "declaration", "for", "the", "tags", "might", "look", "like", "the", "following", "json", "TAG", "renderer", "NUMBER", "jsp", "directive", "tag", "NUMBER", "js", "type", "string", "string", "TAG", "renderer", "NUMBER", "jsp", "scriptlet", "tag", "NUMBER", "js", "Let", "me", "know", "if", "you", "still", "have", "question", "NUMBER", "Hi", "ahmadnassri", "the", "Marko", "compiler", "puts", "the", "compiled", "template", "next", "to", "the", "original", "template", "because", "the", "Node", "NUMBER", "js", "module", "loader", "be", "context", "aware", "and", "we", "want", "the", "stack", "traces", "to", "match", "up", "with", "location", "that", "the", "Node", "NUMBER", "js", "module", "loader", "associates", "with", "the", "loaded", "compiled", "template", "NUMBER", "That", "be", "the", "location", "of", "the", "JS", "module", "on", "disk", "matters", "since", "it", "impacts", "how", "require", "d", "modules", "be", "resolve", "NUMBER", "Currently", "we", "calculate", "all", "of", "the", "relative", "paths", "based", "on", "the", "original", "template", "location", "on", "disk", "and", "we", "therefore", "put", "the", "compiled", "template", "module", "next", "to", "the", "original", "template", "file", "NUMBER", "While", "we", "could", "place", "the", "compiled", "template", "at", "a", "different", "location", "on", "disk", "we", "would", "need", "to", "change", "how", "the", "relative", "require", "paths", "be", "generate", "NUMBER", "Also", "at", "a", "minimum", "each", "module", "in", "the", "application", "would", "need", "to", "have", "its", "own", "parallel", "directory", "tree", "for", "compiled", "template", "so", "that", "the", "required", "Node", "NUMBER", "js", "modules", "would", "be", "resolve", "relative", "to", "the", "module", "that", "contains", "the", "template", "NUMBER", "Something", "like", "the", "following", "my", "app", "NUMBER", "marko", "compiled", "foo", "template", "NUMBER", "marko", "NUMBER", "js", "bar", "template", "NUMBER", "marko", "NUMBER", "js", "foo", "template", "NUMBER", "marko", "bar", "template", "NUMBER", "marko", "node_modules", "my", "install", "module", "NUMBER", "marko", "compiled", "foo", "template", "NUMBER", "marko", "NUMBER", "js", "bar", "template", "NUMBER", "marko", "NUMBER", "js", "foo", "template", "NUMBER", "marko", "bar", "template", "NUMBER", "marko", "However", "I", "would", "be", "concerned", "about", "the", "impact", "on", "usability", "if", "we", "move", "compiled", "template", "to", "a", "parallel", "directory", "tree", "NUMBER", "There", "were", "also", "be", "other", "impacts", "on", "usability", "that", "would", "need", "to", "be", "explored", "NUMBER", "I", "don", "t", "want", "to", "dismiss", "your", "suggestion", "but", "unfortunately", "it", "be", "not", "as", "simple", "as", "change", "where", "the", "compiled", "template", "gets", "stored", "on", "disk", "NUMBER", "Hey", "ahmadnassri", "we", "add", "an", "option", "to", "disable", "write", "compiled", "template", "to", "disk", "javascript", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "false", "Please", "see", "issue", "NUMBER", "and", "commit", "NUMBER", "ac", "NUMBER", "b", "NUMBER", "ab", "NUMBER", "adc", "NUMBER", "b", "NUMBER", "b", "NUMBER", "c", "NUMBER", "f", "NUMBER", "f", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "If", "that", "be", "an", "acceptable", "solution", "then", "I", "would", "like", "to", "close", "this", "issue", "NUMBER", "Please", "let", "me", "know", "NUMBER", "Thanks", "NUMBER", "Does", "that", "resolve", "this", "issue", "Do", "you", "have", "an", "recommendation", "for", "a", "cleaner", "way", "to", "set", "the", "option", "We", "can", "always", "adjust", "NUMBER", "Hi", "thomasJang", "can", "you", "please", "provide", "more", "clarity", "on", "what", "you", "be", "ask", "The", "marko", "taglib", "NUMBER", "json", "file", "be", "find", "relative", "to", "the", "template", "be", "compiled", "use", "the", "following", "search", "path", "LINK", "taglib", "discovery", "If", "you", "can", "provide", "more", "details", "on", "what", "you", "be", "trying", "to", "accomplish", "I", "should", "then", "be", "able", "to", "provide", "better", "help", "NUMBER", "Thanks", "NUMBER", "Hi", "thomasJang", "the", "location", "cannot", "be", "change", "because", "that", "would", "break", "other", "things", "for", "example", "the", "command", "line", "compiler", "would", "not", "work", "NUMBER", "While", "we", "could", "make", "it", "possible", "to", "register", "additional", "marko", "taglib", "NUMBER", "json", "file", "via", "code", "I", "don", "t", "think", "that", "would", "be", "a", "good", "idea", "NUMBER", "Not", "sure", "if", "it", "solves", "your", "use", "case", "but", "you", "can", "create", "a", "marko", "taglib", "NUMBER", "json", "that", "imports", "other", "taglibs", "as", "shown", "below", "json", "taglib", "imports", "NUMBER", "path", "to", "another", "marko", "taglib", "NUMBER", "json", "NUMBER", "Can", "you", "provide", "more", "details", "on", "your", "use", "case", "Why", "do", "you", "need", "marko", "taglib", "NUMBER", "json", "file", "to", "be", "in", "another", "location", "Sounds", "good", "NUMBER", "If", "you", "run", "into", "any", "specific", "issue", "or", "get", "stuck", "please", "feel", "free", "to", "post", "a", "new", "issue", "NUMBER", "It", "s", "pretty", "easy", "to", "change", "things", "if", "necessary", "so", "just", "let", "us", "know", "NUMBER", "Thanks", "and", "good", "luck", "with", "your", "code", "Hi", "thomasJang", "the", "marko", "compiler", "strips", "all", "whitespace", "by", "default", "including", "trail", "new", "lines", "NUMBER", "You", "can", "disable", "whitespace", "removal", "by", "doing", "the", "following", "javascript", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "preserveWhitespace", "true", "You", "ll", "need", "to", "force", "a", "recompile", "all", "your", "template", "NUMBER", "The", "easiest", "way", "to", "do", "that", "be", "to", "set", "the", "MARKO_CLEAN", "environment", "to", "true", "MARKO_CLEAN", "true", "node", "NUMBER", "Of", "course", "you", "can", "also", "just", "append", "the", "new", "line", "in", "your", "code", "javascript", "tmpl", "NUMBER", "render", "data", "function", "err", "output", "if", "err", "grunt", "NUMBER", "file", "NUMBER", "write", "dest", "output", "n", "else", "grunt", "NUMBER", "log", "NUMBER", "error", "err", "Hopefully", "that", "answers", "your", "question", "but", "if", "not", "please", "let", "me", "know", "NUMBER", "Also", "please", "check", "out", "the", "following", "docs", "Marko", "Whitespace", "LINK", "whitespace", "Hi", "snapwich", "this", "question", "has", "come", "up", "before", "and", "here", "be", "a", "relevant", "discussion", "LINK", "The", "main", "reason", "for", "write", "the", "compiled", "template", "to", "disk", "be", "so", "that", "stack", "traces", "will", "be", "valid", "in", "case", "there", "be", "an", "exception", "throw", "during", "template", "rendering", "NUMBER", "By", "design", "the", "Marko", "template", "compiler", "produces", "very", "readable", "JavaScript", "output", "NUMBER", "It", "would", "be", "extremely", "frustrating", "to", "debug", "a", "JavaScript", "exception", "if", "the", "loaded", "source", "code", "was", "not", "available", "NUMBER", "In", "addition", "the", "compiled", "template", "_must_", "be", "loaded", "through", "the", "Node", "NUMBER", "js", "module", "loader", "or", "a", "compatible", "CommonJS", "module", "loader", "of", "some", "sort", "NUMBER", "If", "you", "take", "a", "close", "look", "at", "the", "compiled", "output", "of", "a", "template", "you", "will", "see", "that", "most", "template", "make", "heavy", "use", "of", "the", "require", "function", "that", "be", "only", "available", "inside", "the", "context", "of", "a", "CommonJS", "module", "NUMBER", "The", "require", "function", "be", "use", "to", "load", "include", "template", "custom", "tags", "etc", "NUMBER", "In", "other", "words", "you", "can", "t", "just", "eval", "the", "compiled", "output", "and", "expect", "things", "to", "work", "NUMBER", "In", "theory", "we", "could", "provide", "an", "option", "to", "disable", "the", "write", "of", "the", "compiled", "Marko", "template", "to", "disk", "with", "a", "small", "code", "change", "but", "I", "think", "that", "would", "be", "undesirable", "NUMBER", "I", "m", "happy", "to", "discuss", "some", "more", "and", "would", "not", "necessarily", "be", "oppose", "to", "a", "PR", "as", "long", "as", "the", "default", "was", "still", "to", "write", "the", "compiled", "template", "to", "disk", "NUMBER", "Let", "me", "know", "if", "you", "still", "have", "question", "NUMBER", "Thanks", "NUMBER", "Hi", "kristianmandrup", "you", "should", "probably", "be", "use", "custom", "tags", "instead", "of", "partials", "NUMBER", "Custom", "tags", "be", "superior", "to", "vanilla", "partials", "in", "many", "ways", "and", "be", "often", "easier", "to", "use", "NUMBER", "Instead", "of", "the", "following", "xml", "TAG", "Just", "make", "header", "a", "custom", "tag", "xml", "TAG", "With", "custom", "tags", "the", "path", "of", "the", "partial", "template", "doesn", "t", "matter", "and", "Marko", "makes", "it", "easy", "to", "utilize", "custom", "tags", "provide", "by", "install", "Node", "modules", "NUMBER", "Custom", "tags", "can", "be", "associated", "with", "a", "JavaScript", "renderer", "or", "just", "a", "template", "if", "a", "JavaScript", "renderer", "be", "not", "needed", "NUMBER", "It", "be", "considered", "a", "bad", "practice", "to", "use", "include", "partials", "where", "the", "target", "partial", "template", "be", "outside", "the", "current", "directory", "of", "the", "parent", "template", "NUMBER", "That", "be", "a", "partial", "be", "probably", "fine", "if", "it", "the", "parent", "template", "and", "the", "partial", "template", "be", "in", "the", "same", "directory", "NUMBER", "If", "you", "create", "a", "Node", "NUMBER", "js", "module", "that", "be", "to", "export", "custom", "tags", "just", "put", "a", "marko", "taglib", "NUMBER", "json", "in", "the", "root", "of", "the", "module", "NUMBER", "I", "recommend", "taking", "advantage", "of", "directory", "scanning", "for", "automatically", "discovering", "taglibs", "based", "on", "the", "directory", "structure", "NUMBER", "Please", "see", "Scanning", "for", "Tags", "LINK", "scanning", "for", "tags", "NUMBER", "The", "marko", "compiler", "will", "automatically", "discover", "the", "export", "taglib", "of", "install", "modules", "and", "make", "the", "taglib", "available", "to", "any", "template", "that", "has", "the", "taglib", "in", "its", "search", "path", "NUMBER", "Please", "see", "Taglib", "Discovery", "LINK", "taglib", "discovery", "I", "hope", "that", "answers", "your", "question", "NUMBER", "Please", "let", "me", "know", "if", "you", "would", "like", "to", "discuss", "some", "more", "NUMBER", "I", "will", "try", "to", "put", "together", "a", "sample", "project", "that", "illustrates", "creating", "and", "utilizing", "custom", "tags", "NUMBER", "Closing", "issue", "for", "now", "but", "please", "feel", "free", "to", "add", "additional", "comments", "NUMBER", "Thanks", "NUMBER", "While", "consolidate", "NUMBER", "js", "LINK", "doesn", "t", "support", "streaming", "we", "should", "still", "add", "marko", "support", "for", "better", "visibility", "to", "this", "project", "NUMBER", "I", "m", "request", "help", "from", "the", "community", "in", "sending", "a", "Pull", "Request", "to", "the", "consolidate", "NUMBER", "js", "LINK", "project", "to", "add", "support", "for", "the", "marko", "template", "engine", "NUMBER", "Thanks", "in", "advance", "There", "be", "two", "issue", "with", "that", "PR", "Issue", "NUMBER", "It", "doesn", "t", "cache", "the", "loaded", "template", "Issue", "NUMBER", "Marko", "needs", "both", "the", "template", "s", "source", "as", "a", "string", "and", "the", "template", "s", "file", "system", "path", "NUMBER", "For", "issue", "NUMBER", "make", "sure", "you", "use", "the", "provide", "cache", "to", "cache", "the", "loaded", "marko", "template", "LINK", "L", "NUMBER", "For", "issue", "NUMBER", "I", "believe", "the", "template", "s", "file", "system", "path", "be", "provide", "as", "options", "NUMBER", "filename", "based", "on", "the", "following", "line", "LINK", "L", "NUMBER", "You", "can", "then", "use", "the", "marko", "load", "templatePath", "templateSrc", "LINK", "api", "loadtemplatepath", "templatesrc", "options", "template", "method", "to", "load", "the", "template", "javascript", "var", "template", "marko", "NUMBER", "load", "str", "options", "NUMBER", "filename", "And", "then", "to", "render", "the", "loaded", "template", "javascript", "template", "NUMBER", "render", "options", "fn", "I", "don", "t", "like", "the", "Express", "view", "engine", "see", "Bypassing", "Express", "View", "Rendering", "for", "Speed", "and", "Modularity", "LINK", "express", "view", "rendering", "for", "speed", "and", "modularity", "and", "I", "don", "t", "like", "consolidate", "NUMBER", "js", "but", "for", "visibility", "to", "marko", "it", "be", "probably", "worthwhile", "to", "enable", "marko", "template", "rendering", "via", "consolidate", "NUMBER", "js", "NUMBER", "The", "biggest", "downside", "be", "that", "streaming", "progressive", "HTML", "rendering", "won", "t", "work", "NUMBER", "Thanks", "for", "looking", "into", "it", "seangates", "See", "LINK", "bitinn", "I", "ve", "not", "use", "metalsmith", "but", "loaded", "NUMBER", "marko", "template", "be", "loaded", "and", "cached", "by", "the", "Node", "NUMBER", "js", "module", "loading", "system", "the", "same", "as", "normal", "NUMBER", "js", "modules", "NUMBER", "That", "be", "they", "be", "cached", "in", "require", "NUMBER", "cache", "and", "deleting", "from", "require", "NUMBER", "cache", "will", "cause", "the", "template", "to", "be", "reloaded", "on", "the", "next", "require", "of", "the", "template", "NUMBER", "metalsmith", "watch", "support", "a", "invalidateCache", "that", "might", "work", "NUMBER", "marko", "also", "support", "a", "special", "hot", "reload", "LINK", "js", "samples", "marko", "hot", "reload", "NUMBER", "You", "ll", "need", "to", "use", "your", "own", "file", "watcher", "to", "tell", "marko", "when", "a", "file", "be", "modify", "and", "marko", "will", "ensure", "that", "all", "template", "automatically", "hot", "reload", "such", "that", "the", "next", "time", "they", "render", "they", "will", "be", "render", "based", "on", "the", "modify", "source", "NUMBER", "Please", "let", "me", "know", "if", "you", "need", "more", "details", "bitinn", "NUMBER", "Closed", "via", "LINK", "Thanks", "fabsrc", "Hi", "kristianmandrup", "I", "update", "the", "docs", "to", "mention", "the", "template", "data", "attribute", "that", "be", "support", "on", "the", "TAG", "tag", "NUMBER", "For", "your", "example", "you", "would", "want", "to", "do", "the", "following", "xml", "TAG", "Here", "s", "a", "link", "to", "the", "relevant", "docs", "that", "now", "mentions", "the", "template", "data", "attribute", "LINK", "include", "Please", "let", "me", "know", "if", "that", "doesn", "t", "solve", "your", "problem", "NUMBER", "Thanks", "NUMBER", "Hey", "jcc", "NUMBER", "can", "you", "please", "provide", "more", "details", "on", "your", "problem", "I", "believe", "it", "be", "best", "to", "open", "a", "separate", "Github", "issue", "because", "your", "code", "seems", "unrelated", "to", "what", "kristianmandrup", "describe", "NUMBER", "Please", "clarify", "NUMBER", "Thanks", "NUMBER", "Hi", "jackhorton", "this", "be", "not", "clarified", "in", "the", "docs", "but", "if", "the", "template", "attribute", "be", "a", "dynamic", "expression", "not", "a", "static", "string", "then", "the", "expression", "should", "resolve", "to", "an", "already", "_loaded_", "template", "NUMBER", "You", "can", "load", "the", "template", "in", "the", "template", "itself", "as", "shown", "below", "xml", "TAG", "TAG", "However", "if", "it", "usually", "cleaner", "for", "the", "include", "template", "to", "be", "loaded", "by", "the", "custom", "tag", "controller", "and", "for", "it", "to", "be", "provide", "as", "part", "of", "the", "view", "model", "to", "the", "template", "NUMBER", "xml", "TAG", "I", "ll", "update", "the", "docs", "but", "let", "me", "know", "if", "that", "doesn", "t", "work", "for", "you", "NUMBER", "There", "be", "two", "ways", "to", "load", "a", "template", "in", "your", "JavaScript", "code", "Option", "NUMBER", "javascript", "var", "myLoadedTemplate", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "template", "NUMBER", "marko", "Option", "NUMBER", "javascript", "require", "marko", "node", "require", "NUMBER", "install", "Called", "once", "in", "your", "application", "main", "script", "NUMBER", "var", "myLoadedTemplate", "require", "NUMBER", "template", "NUMBER", "marko", "Option", "NUMBER", "be", "recommended", "Hi", "jackhorton", "just", "an", "update", "I", "put", "in", "a", "minor", "tweak", "to", "allow", "the", "template", "attribute", "to", "be", "a", "dynamic", "path", "that", "can", "be", "relative", "NUMBER", "It", "be", "still", "recommended", "to", "preload", "the", "include", "target", "and", "pass", "a", "reference", "to", "the", "fully", "loaded", "template", "NUMBER", "This", "mainly", "because", "JavaScript", "module", "bundlers", "that", "do", "static", "code", "analysis", "will", "not", "find", "dynamically", "required", "template", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Please", "let", "me", "know", "if", "you", "have", "any", "question", "or", "still", "have", "issue", "NUMBER", "Thanks", "NUMBER", "Hi", "yomed", "instead", "of", "a", "custom", "tag", "which", "be", "associated", "with", "a", "renderer", "function", "you", "can", "invoke", "a", "renderer", "input", "out", "function", "directly", "javascript", "data", "NUMBER", "renderers", "require", "NUMBER", "foo", "require", "NUMBER", "bar", "require", "NUMBER", "baz", "xml", "TAG", "TAG", "TAG", "I", "don", "t", "know", "exactly", "how", "that", "fits", "into", "your", "app", "but", "hopefully", "you", "get", "the", "idea", "NUMBER", "FYI", "a", "custom", "tag", "be", "resolve", "to", "a", "renderer", "at", "compile", "time", "NUMBER", "Please", "let", "me", "know", "if", "that", "doesn", "t", "solve", "your", "problem", "NUMBER", "Assigning", "a", "w", "id", "attribute", "to", "an", "TAG", "tag", "currently", "doesn", "t", "work", "because", "of", "how", "the", "compile", "time", "transform", "be", "implement", "for", "marko", "widgets", "NUMBER", "I", "ll", "look", "into", "seeing", "if", "it", "can", "be", "support", "with", "a", "small", "code", "change", "NUMBER", "Can", "you", "please", "open", "a", "Github", "issue", "against", "the", "marko", "widgets", "LINK", "widgets", "project", "marko", "widgets", "was", "update", "to", "support", "the", "w", "id", "attribute", "with", "the", "TAG", "tag", "LINK", "widgets", "issue", "NUMBER", "Closing", "this", "issue", "NUMBER", "You", "mention", "two", "separate", "issue", "what", "if", "class", "name", "be", "come", "dynamically", "from", "the", "JavaScript", "object", "NUMBER", "For", "that", "you", "will", "want", "to", "use", "the", "custom", "attrs", "attribute", "which", "allows", "attributes", "to", "come", "from", "a", "JavaScript", "object", "LINK", "attrs", "Also", "there", "be", "inconsistency", "across", "marko", "for", "defining", "JavaScript", "expression", "NUMBER", "Some", "places", "its", "use", "some", "places", "it", "dosent", "needs", "and", "here", "its", "use", "condition", "value", "WITHOUT", "sign", "That", "be", "a", "know", "issue", "that", "would", "be", "solve", "with", "the", "following", "proposal", "LINK", "Proposal", "Replace", "HTML", "parser", "with", "a", "new", "parser", "that", "recognizes", "attribute", "types", "Please", "let", "me", "know", "if", "that", "do", "or", "do", "not", "address", "your", "concern", "so", "that", "I", "can", "close", "this", "issue", "NUMBER", "Thanks", "NUMBER", "Hi", "SunnyGurnani", "If", "an", "attribute", "type", "be", "declared", "as", "expression", "such", "as", "value", "attribute", "for", "the", "TAG", "tag", "then", "the", "attribute", "value", "be", "assumed", "to", "be", "a", "valid", "JavaScript", "expression", "NUMBER", "Therefore", "you", "would", "need", "to", "have", "the", "value", "be", "valid", "JavaScript", "such", "as", "the", "following", "javascript", "TAG", "Longer", "term", "we", "want", "to", "have", "everything", "be", "JavaScript", "NUMBER", "Again", "this", "would", "be", "solve", "by", "the", "following", "proposal", "LINK", "For", "the", "benefit", "of", "those", "outside", "eBay", "here", "s", "the", "template", "that", "you", "shared", "xml", "TAG", "Please", "inspect", "my", "container", "element", "and", "you", "will", "find", "dynamic", "content", "be", "not", "evaluated", "TAG", "The", "above", "be", "not", "valid", "HTML", "and", "will", "not", "be", "parseable", "NUMBER", "However", "the", "equivalent", "alternative", "be", "to", "take", "advantage", "of", "the", "custom", "attrs", "LINK", "attrs", "attribute", "as", "shown", "below", "xml", "TAG", "NUMBER", "TAG", "Where", "the", "helper", "NUMBER", "getTrackingAttributes", "be", "implement", "as", "shown", "below", "javascript", "function", "getTrackingAttributes", "return", "attr", "NUMBER", "attr", "NUMBER", "Value", "attr", "NUMBER", "attr", "NUMBER", "Value", "Alternatively", "you", "could", "use", "a", "custom", "compile", "time", "transform", "to", "add", "the", "attributes", "to", "allow", "for", "something", "similar", "to", "the", "following", "xml", "TAG", "The", "benefit", "of", "a", "custom", "compile", "time", "transform", "be", "that", "it", "could", "add", "extra", "validations", "to", "handle", "the", "case", "where", "an", "element", "may", "be", "miss", "an", "id", "or", "some", "other", "attribute", "NUMBER", "Let", "me", "know", "if", "this", "answers", "your", "question", "or", "if", "you", "would", "like", "more", "help", "with", "a", "custom", "compile", "time", "transform", "NUMBER", "Hi", "SunnyGurnani", "I", "was", "hoping", "to", "put", "together", "a", "sample", "app", "to", "demonstrate", "custom", "compile", "time", "transforms", "to", "process", "custom", "attributes", "but", "I", "have", "be", "pretty", "swamped", "NUMBER", "In", "the", "meantime", "it", "might", "be", "helpful", "to", "understand", "how", "marko", "widgets", "utilizes", "compile", "time", "transforms", "NUMBER", "Here", "be", "the", "implementation", "for", "the", "marko", "widgets", "compile", "time", "transform", "LINK", "widgets", "blob", "master", "taglib", "widgets", "transformer", "NUMBER", "js", "L", "NUMBER", "Here", "be", "the", "taglib", "that", "registers", "the", "transform", "LINK", "widgets", "blob", "master", "marko", "taglib", "NUMBER", "json", "L", "NUMBER", "I", "still", "hope", "to", "improve", "the", "docs", "for", "this", "advance", "feature", "but", "hopefully", "this", "helps", "in", "the", "meantime", "NUMBER", "Thanks", "for", "your", "patience", "NUMBER", "Closing", "this", "issue", "NUMBER", "I", "have", "opened", "another", "issue", "to", "improve", "the", "docs", "for", "compile", "time", "transforms", "to", "better", "explain", "how", "custom", "tags", "and", "custom", "attributes", "can", "be", "processed", "at", "compile", "time", "LINK", "Currently", "Marko", "be", "use", "an", "HTML", "parser", "NUMBER", "An", "HTML", "parser", "treats", "every", "attribute", "value", "as", "a", "String", "type", "regardless", "of", "how", "it", "be", "write", "NUMBER", "For", "example", "with", "an", "HTML", "parser", "the", "following", "lines", "be", "all", "equivalent", "xml", "TAG", "TAG", "TAG", "As", "a", "result", "of", "this", "limitation", "Marko", "relies", "on", "custom", "tag", "schemas", "to", "associate", "a", "type", "with", "an", "attribute", "value", "or", "the", "developer", "must", "use", "the", "TAG", "tag", "can", "separately", "declare", "the", "type", "for", "an", "attribute", "and", "developer", "viewing", "a", "template", "wouldn", "t", "know", "the", "attribute", "type", "unless", "you", "consulted", "the", "tag", "schema", "It", "would", "be", "great", "if", "the", "parser", "use", "by", "Marko", "treated", "_all_", "attribute", "values", "as", "_JavaScript", "expressions_", "NUMBER", "Spaces", "will", "end", "an", "attribute", "value", "unless", "the", "space", "be", "in", "a", "quoted", "string", "or", "within", "a", "parenthesis", "square", "brackets", "curly", "braces", "block", "NUMBER", "Finally", "we", "would", "support", "TAG", "usage", "within", "ES", "NUMBER", "Template", "strings", "LINK", "strings", "i", "NUMBER", "e", "NUMBER", "strings", "quoted", "use", "backticks", "NUMBER", "The", "following", "illustrates", "what", "be", "be", "propose", "NUMBER", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Now", "that", "we", "be", "use", "a", "custom", "parser", "we", "can", "also", "improve", "the", "syntax", "for", "conditionals", "and", "looping", "as", "onemrkarthik", "suggested", "xml", "TAG", "NUMBER", "Do", "something", "TAG", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "TAG", "loop", "NUMBER", "getIndex", "NUMBER", "color", "TAG", "TAG", "Here", "s", "what", "for", "loops", "and", "conditionals", "would", "look", "like", "as", "tags", "javascript", "TAG", "NUMBER", "TAG", "Do", "something", "TAG", "TAG", "TAG", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "loop", "NUMBER", "getIndex", "NUMBER", "color", "TAG", "TAG", "TAG", "Thoughts", "Concerns", "Hey", "SunnyGurnani", "as", "for", "JavaScript", "arrays", "and", "objects", "we", "should", "make", "sure", "the", "following", "works", "as", "well", "xml", "TAG", "TAG", "I", "ll", "update", "the", "proposal", "NUMBER", "Thanks", "for", "the", "feedback", "Hi", "pswar", "good", "question", "NUMBER", "Yes", "any", "valid", "JavaScript", "expression", "be", "allow", "on", "the", "right", "hand", "side", "and", "will", "be", "copied", "to", "the", "compiled", "JavaScript", "template", "verbatim", "NUMBER", "I", "ll", "update", "the", "proposal", "to", "make", "this", "clear", "NUMBER", "Thanks", "for", "the", "feedback", "Do", "you", "think", "that", "for", "parsing", "simplicity", "we", "should", "require", "expressions", "to", "be", "wrapped", "with", "parentheses", "If", "you", "can", "get", "it", "work", "without", "parentheses", "that", "would", "be", "great", "but", "I", "could", "see", "how", "that", "might", "be", "tricky", "NUMBER", "For", "example", "consider", "xml", "TAG", "That", "space", "after", "someFunc", "might", "look", "like", "a", "new", "attribute", "to", "the", "parser", "NUMBER", "This", "would", "be", "safer", "in", "all", "cases", "xml", "TAG", "Hey", "philidem", "I", "see", "where", "you", "be", "come", "from", "but", "requiring", "parenthesis", "would", "actually", "make", "things", "more", "confusing", "I", "think", "NUMBER", "It", "would", "be", "a", "bad", "idea", "to", "require", "that", "variable", "names", "be", "wrapped", "in", "parenthesis", "like", "the", "following", "xml", "TAG", "The", "following", "be", "better", "xml", "TAG", "In", "this", "case", "foo", "just", "happens", "to", "be", "a", "simple", "variable", "expression", "not", "a", "function", "call", "NUMBER", "I", "think", "use", "a", "space", "outside", "of", "a", "code", "block", "be", "the", "best", "way", "to", "delimit", "attributes", "NUMBER", "Hi", "vedam", "you", "bring", "up", "a", "good", "question", "regard", "the", "use", "of", "backticks", "for", "template", "strings", "NUMBER", "Adopting", "backticks", "would", "make", "things", "more", "like", "JavaScript", "but", "my", "initial", "reaction", "be", "that", "why", "not", "allow", "number", "quoted", "strings", "to", "be", "treated", "as", "template", "strings", "We", "be", "processing", "all", "of", "these", "strings", "at", "compile", "time", "to", "find", "the", "dynamic", "parts", "so", "there", "be", "no", "performance", "hit", "at", "runtime", "NUMBER", "Also", "worth", "mentioning", "be", "that", "we", "already", "support", "dynamic", "parts", "in", "normal", "quoted", "strings", "so", "switching", "to", "backticks", "would", "make", "things", "potentially", "problematic", "for", "developers", "migrating", "to", "the", "new", "version", "migration", "be", "also", "a", "very", "important", "topic", "that", "needs", "to", "be", "discussed", "since", "this", "proposal", "would", "definitely", "be", "a", "breaking", "change", "NUMBER", "The", "only", "negative", "about", "not", "use", "backticks", "be", "that", "developers", "would", "need", "to", "escape", "the", "character", "inside", "quoted", "strings", "if", "it", "be", "not", "intended", "for", "a", "dynamic", "part", "NUMBER", "I", "m", "leaning", "towards", "not", "support", "backticks", "but", "I", "would", "like", "to", "get", "more", "thoughts", "from", "others", "since", "I", "think", "it", "be", "definitely", "worth", "discussing", "some", "more", "NUMBER", "Hey", "vedam", "I", "m", "actually", "okay", "with", "support", "backticks", "but", "I", "would", "want", "to", "transpile", "the", "code", "to", "its", "ES", "NUMBER", "equivalent", "so", "that", "it", "works", "in", "older", "browsers", "that", "do", "not", "support", "that", "ES", "NUMBER", "feature", "NUMBER", "For", "example", "javascript", "foo", "name", "Would", "be", "transpiled", "to", "the", "following", "javascript", "foo", "name", "I", "think", "the", "end", "result", "would", "be", "the", "same", "NUMBER", "I", "agree", "with", "your", "sentiment", "that", "the", "right", "hand", "should", "just", "be", "JavaScript", "NUMBER", "be", "makes", "Marko", "more", "intuitive", "and", "more", "powerful", "NUMBER", "If", "we", "agree", "to", "support", "backticks", "then", "the", "question", "becomes", "should", "we", "also", "support", "dynamic", "parts", "in", "normal", "quoted", "strings", "or", "should", "dynamic", "parts", "only", "be", "allow", "in", "ES", "NUMBER", "template", "strings", "NUMBER", "for", "support", "string", "template", "with", "backticks", "I", "think", "usage", "of", "backticks", "be", "a", "good", "idea", "and", "I", "think", "the", "Marko", "compiler", "could", "easily", "convert", "the", "string", "template", "to", "ES", "NUMBER", "JavaScript", "NUMBER", "Let", "s", "make", "this", "happen", "To", "patrick", "steele", "idem", "s", "question", "I", "would", "suggest", "only", "support", "variable", "replacement", "in", "string", "template", "which", "be", "delimited", "with", "backticks", "NUMBER", "That", "be", "don", "t", "do", "variable", "replacement", "within", "strings", "delimited", "with", "and", "NUMBER", "Since", "migration", "tool", "seems", "necessary", "I", "think", "we", "should", "convert", "any", "exist", "string", "attribute", "values", "to", "ES", "NUMBER", "template", "use", "backticks", "NUMBER", "Hi", "SunnyGurnani", "what", "be", "be", "propose", "be", "that", "the", "right", "hand", "side", "be", "_always_", "a", "JavaScript", "expression", "NUMBER", "If", "it", "be", "valid", "JavaScript", "expression", "then", "it", "can", "go", "on", "the", "right", "hand", "side", "and", "it", "will", "actually", "be", "copied", "into", "the", "compiled", "JS", "verbatim", "NUMBER", "Even", "if", "right", "hand", "value", "be", "a", "simple", "string", "it", "would", "still", "be", "a", "valid", "JavaScript", "expression", "NUMBER", "I", "think", "this", "will", "make", "things", "the", "least", "confusing", "NUMBER", "The", "only", "special", "case", "be", "for", "attributes", "that", "be", "interpreted", "at", "compile", "time", "e", "NUMBER", "g", "NUMBER", "for", "color", "in", "red", "green", "blue", "Seem", "reasonable", "Thanks", "for", "the", "comments", "pswar", "NUMBER", "Some", "relate", "thoughts", "NUMBER", "I", "think", "we", "be", "saying", "the", "same", "thing", "NUMBER", "I", "m", "in", "favor", "of", "_only_", "allowing", "NUMBER", "in", "strings", "that", "use", "back", "ticks", "as", "quotes", "not", "in", "strings", "quoted", "use", "double", "or", "single", "quotes", "NUMBER", "For", "example", "xml", "TAG", "On", "top", "of", "that", "we", "would", "transpile", "ES", "NUMBER", "template", "strings", "to", "an", "ES", "NUMBER", "equivalent", "NUMBER", "NUMBER", "If", "you", "want", "to", "have", "a", "string", "of", "NUMBER", "NUMBER", "NUMBER", "then", "you", "would", "just", "do", "mystring", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "If", "you", "want", "an", "Array", "of", "NUMBER", "NUMBER", "NUMBER", "then", "you", "would", "just", "omit", "the", "quotes", "myarray", "NUMBER", "NUMBER", "NUMBER", "NOTE", "I", "have", "update", "the", "proposal", "to", "reflect", "that", "NUMBER", "should", "_only_", "be", "allow", "in", "ES", "NUMBER", "template", "strings", "NUMBER", "Hi", "DanCech", "this", "be", "still", "a", "developing", "proposal", "so", "nothing", "be", "set", "in", "stone", "NUMBER", "My", "thinking", "be", "that", "this", "be", "definitely", "going", "to", "be", "a", "breaking", "major", "change", "and", "old", "template", "will", "need", "to", "be", "migrated", "to", "work", "correctly", "with", "the", "new", "Marko", "version", "NUMBER", "We", "would", "want", "to", "make", "the", "migration", "as", "easy", "as", "possible", "so", "at", "a", "minimum", "we", "would", "need", "to", "provide", "a", "tool", "that", "would", "automatically", "update", "exist", "Marko", "template", "to", "conform", "to", "the", "new", "parser", "by", "doing", "things", "such", "as", "the", "following", "Old", "xml", "TAG", "New", "xml", "TAG", "As", "another", "example", "if", "a", "custom", "foo", "attribute", "be", "declared", "as", "an", "expression", "type", "then", "the", "following", "conversion", "would", "happen", "Old", "xml", "TAG", "New", "xml", "TAG", "Beyond", "that", "if", "you", "be", "concerned", "that", "it", "would", "be", "hard", "to", "unlearn", "the", "old", "handle", "of", "NUMBER", "in", "attribute", "values", "or", "that", "you", "still", "prefer", "all", "NUMBER", "to", "be", "processed", "in", "all", "strings", "then", "that", "would", "be", "a", "good", "argument", "for", "going", "back", "to", "the", "old", "behavior", "and", "allowing", "NUMBER", "in", "_all_", "quoted", "strings", "NUMBER", "Honestly", "I", "could", "go", "either", "way", "since", "I", "see", "the", "value", "in", "both", "choices", "NUMBER", "Hi", "SunnyGurnani", "I", "think", "there", "might", "be", "a", "misunderstanding", "because", "with", "the", "update", "proposal", "we", "want", "to", "go", "_closer_", "to", "the", "simplicity", "of", "pure", "JavaScript", "NUMBER", "Instead", "of", "tag", "schemas", "we", "be", "saying", "that", "an", "attribute", "value", "be", "simply", "a", "pure", "JavaScript", "expression", "and", "nothing", "more", "and", "nothing", "less", "NUMBER", "Marko", "has", "always", "be", "close", "to", "JavaScript", "by", "design", "but", "with", "the", "latest", "proposal", "we", "want", "to", "take", "it", "even", "closer", "NUMBER", "That", "be", "Marko", "aims", "to", "be", "a", "perfect", "blend", "of", "JavaScript", "and", "HTML", "Also", "SunnyGurnani", "the", "parenthesis", "be", "only", "needed", "in", "situations", "where", "a", "complex", "expression", "has", "spaces", "that", "would", "have", "otherwise", "ended", "the", "attribute", "value", "NUMBER", "The", "idea", "be", "that", "the", "foo", "attribute", "in", "the", "following", "Marko", "template", "xml", "TAG", "Would", "compile", "to", "the", "following", "property", "definition", "in", "JavaScript", "code", "javascript", "foo", "Hello", "data", "NUMBER", "name", "NOTE", "there", "would", "no", "signs", "of", "the", "backticks", "in", "the", "final", "compiled", "output", "because", "we", "want", "the", "code", "to", "work", "in", "ES", "NUMBER", "and", "not", "just", "ES", "NUMBER", "We", "could", "absolutely", "interpolate", "NUMBER", "in", "normal", "quoted", "JavaScript", "strings", "but", "then", "we", "be", "slightly", "change", "the", "rules", "of", "JavaScript", "which", "may", "be", "surprising", "to", "some", "users", "if", "we", "say", "the", "right", "hand", "side", "of", "an", "attribute", "be", "just", "JavaScript", "NUMBER", "Hi", "SunnyGurnani", "technically", "we", "don", "t", "need", "to", "support", "NUMBER", "but", "just", "just", "makes", "the", "code", "easier", "to", "write", "and", "read", "compared", "to", "use", "string", "concatenation", "NUMBER", "It", "did", "occur", "to", "me", "that", "we", "also", "currently", "support", "TAG", "without", "the", "curly", "braces", "which", "be", "technically", "not", "part", "of", "the", "ES", "NUMBER", "template", "strings", "spec", "NUMBER", "We", "could", "require", "TAG", "but", "that", "seems", "like", "it", "would", "require", "extra", "code", "for", "end", "users", "unnecessarily", "NUMBER", "That", "be", "something", "we", "should", "also", "discuss", "NUMBER", "Thanks", "for", "the", "feedback", "so", "far", "A", "big", "plus", "of", "marko", "for", "me", "be", "that", "it", "can", "be", "use", "with", "editors", "that", "understand", "HTML", "XML", "syntactically", "at", "least", "instead", "of", "treating", "it", "like", "a", "big", "lump", "of", "characters", "provide", "e", "NUMBER", "g", "NUMBER", "live", "linting", "and", "structure", "aware", "navigation", "NUMBER", "In", "order", "to", "do", "so", "they", "need", "to", "parse", "it", "and", "that", "would", "likely", "be", "broken", "by", "adopting", "a", "custom", "syntax", "for", "attributes", "NUMBER", "And", "then", "you", "have", "JavaScript", "template", "strings", "LINK", "US", "docs", "Web", "JavaScript", "Reference", "template_strings", "The", "problem", "with", "NUMBER", "be", "that", "it", "appears", "all", "of", "the", "time", "in", "HTML", "markup", "NUMBER", "For", "example", "inline", "style", "sheets", "xml", "TAG", "NUMBER", "foo", "font", "weight", "bold", "TAG", "Read", "your", "comment", "too", "fast", "aaronshaf", "NUMBER", "I", "thought", "you", "were", "suggesting", "NUMBER", "over", "NUMBER", "which", "other", "templating", "languages", "choose", "NUMBER", "including", "Angular", "and", "Dust", "NUMBER", "My", "problem", "with", "support", "the", "following", "xml", "TAG", "Is", "that", "I", "really", "feel", "like", "it", "would", "be", "cleaner", "if", "the", "right", "hand", "side", "of", "an", "attribute", "be", "_always_", "treated", "as", "a", "JavaScript", "expression", "NUMBER", "The", "following", "code", "be", "a", "valid", "JavaScript", "expression", "javascript", "Hello", "data", "NUMBER", "name", "The", "following", "be", "also", "a", "valid", "JavaScript", "expression", "despite", "the", "additional", "surrounding", "parenthesis", "add", "for", "grouping", "javascript", "Hello", "data", "NUMBER", "name", "But", "the", "following", "be", "not", "a", "valid", "JavaScript", "expression", "javascript", "Hello", "data", "NUMBER", "name", "curly", "braces", "be", "only", "valid", "for", "block", "statements", "That", "be", "you", "can", "t", "do", "the", "following", "in", "JavaScript", "javascript", "var", "foo", "Hello", "data", "NUMBER", "name", "I", "would", "rather", "not", "introduce", "new", "symbols", "for", "the", "sake", "of", "introduce", "new", "symbols", "if", "that", "makes", "sense", "NUMBER", "Great", "suggestion", "onemrkarthik", "NUMBER", "I", "like", "that", "the", "for", "color", "in", "colors", "and", "if", "x", "NUMBER", "directives", "match", "up", "very", "nicely", "to", "pure", "JavaScript", "NUMBER", "I", "m", "going", "to", "update", "the", "original", "proposal", "to", "include", "your", "suggestions", "NUMBER", "Thanks", "Fixes", "NUMBER", "Thanks", "onemrkarthik", "Great", "feedback", "kristianmandrup", "NUMBER", "What", "be", "your", "thoughts", "on", "the", "fragmentation", "that", "would", "result", "from", "support", "two", "different", "syntaxes", "FYI", "I", "start", "work", "on", "a", "new", "parser", "that", "will", "better", "understand", "JavaScript", "expressions", "in", "HTML", "attributes", "e", "NUMBER", "g", "NUMBER", "TAG", "NUMBER", "The", "key", "difference", "between", "the", "exist", "HTML", "parsers", "be", "that", "attributes", "will", "_not_", "need", "to", "be", "surrounded", "by", "quotes", "quotes", "should", "only", "be", "use", "if", "the", "attribute", "value", "will", "be", "of", "type", "_string_", "NUMBER", "See", "LINK", "parser", "The", "base", "HTML", "language", "be", "handle", "just", "fine", "but", "I", "be", "still", "work", "on", "Placeholders", "within", "content", "TAG", "xyz", "TAG", "Placeholders", "within", "attribute", "string", "expressions", "TAG", "Placeholders", "within", "placeholders", "TAG", "hopefully", "wouldn", "t", "be", "use", "very", "often", "Better", "flow", "control", "syntax", "TAG", "TAG", "and", "TAG", "There", "s", "also", "going", "to", "be", "additional", "work", "inside", "Marko", "to", "switch", "to", "new", "parser", "and", "there", "will", "be", "some", "breaking", "change", "that", "need", "to", "be", "address", "with", "a", "template", "migration", "tool", "perhaps", "NUMBER", "If", "anyone", "has", "some", "additional", "thoughts", "about", "the", "Marko", "syntax", "and", "improvement", "that", "could", "be", "made", "then", "please", "let", "me", "know", "Thoughts", "and", "feedback", "on", "the", "parser", "be", "also", "welcome", "NUMBER", "Nice", "work", "philidem", "Thank", "you", "for", "the", "hard", "work", "to", "make", "this", "happen", "NUMBER", "This", "will", "be", "a", "huge", "improvement", "to", "Marko", "and", "it", "will", "be", "nice", "to", "be", "able", "to", "do", "away", "the", "marko", "tag", "NUMBER", "json", "file", "in", "most", "cases", "NUMBER", "We", "ll", "definitely", "have", "to", "think", "about", "transforming", "old", "template", "NUMBER", "The", "big", "thing", "be", "that", "if", "an", "attribute", "be", "declared", "as", "an", "expression", "then", "we", "will", "need", "to", "transform", "the", "template", "to", "drop", "the", "attribute", "quotes", "NUMBER", "For", "example", "Old", "xml", "TAG", "New", "xml", "TAG", "We", "ll", "also", "need", "to", "transform", "if", "for", "else", "if", "and", "else", "attributes", "to", "use", "the", "new", "directive", "syntax", "NUMBER", "I", "m", "sure", "there", "will", "be", "some", "other", "transformations", "as", "well", "but", "it", "be", "definitely", "doable", "NUMBER", "Thanks", "again", "NUMBER", "Still", "actively", "work", "on", "the", "parser", "and", "I", "ll", "push", "some", "more", "change", "later", "today", "NUMBER", "There", "s", "still", "a", "lot", "of", "heavy", "work", "to", "do", "in", "Marko", "to", "leverage", "the", "parser", "and", "I", "think", "we", "re", "leaning", "toward", "make", "breaking", "change", "while", "also", "provide", "a", "migration", "tool", "NUMBER", "So", "nothing", "in", "the", "immediate", "future", "will", "be", "available", "but", "still", "work", "hard", "to", "get", "this", "do", "I", "ll", "probably", "have", "to", "get", "feedback", "from", "patrick", "steele", "idem", "when", "it", "be", "time", "make", "change", "to", "Marko", "NUMBER", "Perhaps", "we", "can", "document", "the", "plan", "to", "see", "if", "we", "can", "help", "from", "the", "community", "as", "well", "NUMBER", "We", "could", "definitely", "start", "on", "the", "migration", "tool", "right", "now", "so", "that", "it", "would", "be", "ready", "and", "well", "test", "in", "time", "for", "the", "switch", "to", "the", "new", "parser", "NUMBER", "That", "s", "an", "area", "where", "we", "could", "definitely", "use", "some", "more", "help", "from", "the", "community", "NUMBER", "I", "ll", "open", "another", "Github", "issue", "for", "that", "task", "NUMBER", "Thoughts", "on", "the", "following", "xml", "TAG", "Output", "JavaScript", "javascript", "var", "foo", "NUMBER", "var", "hello", "World", "Old", "style", "xml", "TAG", "TAG", "Yes", "like", "TAG", "Also", "I", "would", "like", "to", "propose", "this", "Declare", "function", "xml", "TAG", "TAG", "Call", "function", "xml", "TAG", "Also", "we", "currently", "support", "simple", "conditionals", "in", "Marko", "xml", "TAG", "How", "should", "we", "support", "that", "with", "the", "new", "parser", "This", "should", "of", "course", "work", "in", "the", "new", "parser", "but", "it", "be", "a", "little", "uglier", "xml", "TAG", "yomed", "one", "variable", "per", "line", "be", "a", "code", "style", "NUMBER", "Doesn", "t", "really", "matter", "to", "the", "compiler", "and", "it", "could", "go", "either", "way", "NUMBER", "Thanks", "for", "the", "feedback", "yomed", "NUMBER", "I", "m", "leaning", "towards", "standard", "JS", "as", "well", "NUMBER", "I", "agree", "mlrawlings", "NUMBER", "That", "s", "definitely", "allow", "in", "Marko", "v", "NUMBER", "and", "would", "work", "as", "expected", "NUMBER", "Thanks", "for", "point", "that", "out", "NUMBER", "I", "m", "definitely", "looking", "forward", "to", "the", "new", "Marko", "v", "NUMBER", "syntax", "This", "feature", "has", "be", "implement", "NUMBER", "Hi", "aaronshaf", "can", "you", "please", "be", "more", "specific", "on", "which", "aspects", "of", "the", "Angular", "NUMBER", "syntax", "interest", "you", "Some", "of", "the", "syntax", "be", "relate", "to", "event", "binding", "one", "way", "versus", "two", "way", "data", "binding", "etc", "NUMBER", "On", "a", "relate", "note", "this", "has", "be", "discussed", "in", "a", "few", "other", "issue", "but", "longer", "term", "we", "be", "thinking", "about", "replacing", "the", "HTML", "parser", "with", "a", "new", "parser", "that", "can", "recognize", "types", "of", "attributes", "NUMBER", "With", "an", "HTML", "parser", "every", "attribute", "be", "a", "string", "regardless", "if", "it", "be", "quoted", "or", "not", "NUMBER", "Here", "s", "what", "we", "be", "thinking", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "Thoughts", "Hi", "aaronshaf", "I", "decided", "to", "create", "a", "more", "formal", "proposal", "for", "introduce", "typed", "attributes", "NUMBER", "Please", "take", "a", "look", "at", "the", "following", "and", "provide", "feedback", "if", "you", "get", "a", "chance", "LINK", "Closing", "this", "issue", "in", "favor", "of", "the", "proposal", "for", "NUMBER", "We", "want", "to", "make", "Marko", "a", "more", "powerful", "blend", "of", "JavaScript", "and", "HTML", "by", "adopting", "JavaScript", "as", "the", "type", "for", "all", "HTML", "attributes", "NUMBER", "Hi", "kobenauf", "I", "be", "not", "able", "to", "reproduce", "the", "issue", "so", "there", "must", "be", "something", "else", "that", "be", "come", "into", "play", "NUMBER", "What", "version", "of", "marko", "be", "you", "use", "I", "created", "a", "simple", "project", "to", "test", "with", "and", "everything", "renders", "as", "expected", "LINK", "steele", "idem", "marko", "issue", "NUMBER", "Please", "try", "to", "reproduce", "the", "problem", "in", "that", "project", "or", "share", "your", "own", "simple", "project", "to", "reproduce", "the", "problem", "NUMBER", "Thank", "you", "NUMBER", "Correct", "each", "standalone", "template", "needs", "to", "be", "independent", "and", "well", "formed", "HTML", "since", "each", "template", "be", "parsed", "use", "an", "HTML", "parser", "NUMBER", "In", "practice", "this", "be", "really", "not", "a", "limitation", "but", "it", "do", "put", "a", "constraint", "on", "how", "to", "code", "your", "template", "NUMBER", "I", "recommend", "use", "the", "layout", "taglib", "to", "piece", "together", "your", "page", "instead", "of", "include", "NUMBER", "Please", "see", "LINK", "layout", "taglib", "Please", "let", "me", "know", "if", "that", "do", "or", "do", "not", "work", "for", "you", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "we", "can", "discuss", "some", "more", "here", "if", "you", "would", "like", "or", "in", "the", "Gitter", "chat", "room", "LINK", "If", "I", "be", "following", "correctly", "then", "I", "would", "agree", "with", "DanCech", "that", "you", "be", "looking", "to", "do", "a", "server", "side", "redirect", "NUMBER", "Please", "let", "us", "know", "if", "that", "be", "the", "answer", "you", "be", "looking", "for", "or", "if", "there", "be", "a", "question", "more", "specific", "to", "Marko", "NUMBER", "Thanks", "for", "the", "improved", "fix", "New", "version", "publish", "with", "fix", "marko", "NUMBER", "Try", "this", "javascript", "var", "markoCompiler", "require", "marko", "compiler", "markoCompiler", "NUMBER", "compile", "templateStr", "templatePath", "function", "err", "compiledCode", "if", "err", "return", "callback", "err", "handle", "compiledCode", "here", "The", "templatePath", "argument", "be", "use", "for", "resolving", "taglibs", "include", "and", "error", "report", "there", "doesn", "t", "actually", "have", "to", "be", "a", "template", "file", "at", "this", "path", "NUMBER", "Let", "me", "know", "if", "that", "works", "for", "you", "and", "I", "can", "close", "this", "issue", "NUMBER", "The", "Try", "Online", "section", "of", "the", "raptorjs", "website", "do", "client", "side", "compilation", "of", "Marko", "template", "LINK", "online", "The", "client", "code", "that", "do", "the", "compile", "be", "here", "LINK", "marko", "try", "online", "widget", "NUMBER", "js", "This", "uses", "Lasso", "LINK", "ci", "NUMBER", "org", "lasso", "js", "lasso", "formerly", "named", "Optimizer", "instead", "of", "Browserify", "NUMBER", "Is", "not", "possible", "to", "pre", "compile", "your", "template", "during", "build", "or", "on", "server", "side", "This", "would", "be", "the", "most", "efficient", "way", "to", "compile", "template", "NUMBER", "Hi", "yazla", "it", "s", "almost", "always", "a", "bad", "idea", "to", "compile", "a", "template", "in", "the", "browser", "with", "any", "template", "engine", "compilation", "be", "relatively", "slow", "and", "sending", "the", "compiler", "to", "the", "browser", "introduces", "a", "lot", "of", "extra", "overhead", "NUMBER", "The", "Marko", "compiler", "be", "designed", "to", "run", "on", "the", "server", "in", "a", "Node", "NUMBER", "js", "environment", "where", "it", "can", "access", "the", "file", "system", "and", "have", "access", "to", "other", "taglibs", "install", "via", "npm", "NUMBER", "Sorry", "Marko", "didn", "t", "work", "out", "for", "you", "but", "I", "think", "you", "should", "reconsider", "compile", "template", "in", "the", "browser", "NUMBER", "Just", "to", "be", "clear", "if", "you", "do", "what", "be", "suggested", "in", "the", "docs", "and", "enable", "the", "markoify", "LINK", "transform", "for", "browserify", "then", "the", "compiled", "template", "will", "automatically", "be", "sent", "down", "to", "the", "browser", "and", "your", "code", "to", "render", "template", "will", "just", "work", "NUMBER", "Please", "see", "the", "Using", "Browserify", "LINK", "use", "browserify", "section", "in", "the", "docs", "NUMBER", "Let", "us", "know", "if", "you", "still", "have", "question", "NUMBER", "yazla", "I", "see", "where", "you", "be", "come", "from", "but", "I", "still", "don", "t", "see", "why", "it", "be", "any", "different", "to", "bundle", "up", "the", "compiled", "template", "versus", "the", "uncompiled", "template", "NUMBER", "The", "compiled", "template", "be", "just", "a", "standard", "CommonJS", "module", "that", "export", "a", "function", "that", "can", "be", "use", "to", "load", "a", "Template", "instance", "NUMBER", "For", "example", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "my", "template", "NUMBER", "marko", "NUMBER", "js", "The", "above", "code", "works", "if", "the", "template", "has", "already", "be", "compiled", "i", "NUMBER", "e", "NUMBER", "the", "NUMBER", "marko", "NUMBER", "js", "file", "already", "exists", "NUMBER", "In", "the", "case", "where", "the", "template", "be", "not", "compiled", "the", "markoify", "transform", "will", "do", "that", "for", "you", "automatically", "if", "the", "code", "to", "load", "your", "template", "be", "in", "the", "following", "form", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "my", "template", "NUMBER", "marko", "If", "it", "helps", "you", "can", "use", "the", "markoc", "command", "line", "compiler", "to", "compile", "all", "of", "your", "template", "to", "CommonJS", "modules", "beforehand", "NUMBER", "For", "example", "to", "compile", "all", "template", "in", "the", "current", "directory", "and", "all", "sub", "directories", "bash", "npm", "install", "marko", "global", "markoc", "NUMBER", "I", "hope", "that", "helps", "NUMBER", "Hi", "tonii", "NUMBER", "the", "compiler", "do", "work", "in", "the", "browser", "but", "it", "do", "require", "that", "you", "use", "the", "Lasso", "NUMBER", "js", "module", "runtime", "in", "the", "browser", "since", "the", "Browserify", "module", "runtime", "doesn", "t", "support", "dynamic", "requires", "NUMBER", "For", "the", "Try", "Marko", "Online", "feature", "we", "be", "use", "the", "compiler", "in", "the", "browser", "NUMBER", "Here", "s", "the", "relevant", "code", "LINK", "js", "markojs", "NUMBER", "com", "blob", "master", "src", "components", "app", "try", "marko", "index", "NUMBER", "js", "I", "hope", "that", "helps", "NUMBER", "If", "you", "want", "to", "discuss", "further", "might", "be", "better", "to", "open", "a", "new", "Github", "issue", "NUMBER", "I", "m", "not", "seeing", "any", "fail", "test", "and", "our", "CI", "never", "report", "any", "fail", "test", "NUMBER", "I", "will", "take", "a", "look", "and", "see", "if", "I", "can", "reproduce", "and", "report", "back", "soon", "NUMBER", "Thanks", "for", "report", "the", "problem", "NUMBER", "viviangledhill", "I", "just", "did", "a", "refresh", "npm", "install", "with", "the", "latest", "code", "of", "marko", "NUMBER", "master", "branch", "and", "I", "be", "still", "not", "able", "to", "reproduce", "the", "problem", "NUMBER", "Which", "version", "of", "marko", "be", "you", "test", "with", "I", "also", "test", "with", "the", "latest", "code", "on", "the", "v", "NUMBER", "branch", "and", "be", "not", "able", "to", "reproduce", "NUMBER", "Also", "one", "other", "thought", "if", "you", "have", "marko", "layout", "or", "marko", "async", "install", "as", "dependencies", "in", "your", "project", "then", "you", "should", "remove", "those", "dependencies", "NUMBER", "Both", "marko", "layout", "and", "marko", "async", "be", "core", "dependencies", "of", "marko", "and", "be", "already", "include", "NUMBER", "Having", "multiple", "version", "of", "those", "modules", "might", "be", "cause", "problem", "in", "your", "app", "NUMBER", "viviangledhill", "Did", "you", "try", "deleting", "your", "node_modules", "directory", "Ok", "NUMBER", "Interesting", "NUMBER", "I", "ll", "look", "into", "make", "a", "change", "to", "prevent", "the", "core", "taglibs", "from", "loading", "multiple", "times", "even", "though", "it", "be", "an", "edge", "case", "NUMBER", "Thanks", "for", "the", "update", "and", "I", "m", "glad", "you", "get", "everything", "work", "NUMBER", "Thanks", "for", "improving", "the", "documentation", "patbegg", "Can", "you", "confirm", "what", "version", "of", "marko", "you", "have", "install", "This", "looks", "to", "be", "the", "same", "bug", "that", "was", "previously", "fix", "LINK", "I", "be", "not", "able", "to", "reproduce", "the", "problem", "when", "compile", "the", "following", "template", "with", "the", "latest", "version", "of", "marko", "v", "NUMBER", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Intuitive", "Features", "Wrapped", "Up", "In", "a", "Smart", "Interface", "TAG", "TAG", "TAG", "TAG", "Lorem", "ipsum", "dolor", "sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt", "ut", "labore", "et", "dolore", "magna", "aliqua", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Explore", "the", "Features", "TAG", "TAG", "TAG", "TAG", "Pay", "as", "you", "go", "Monthly", "Plans", "Available", "TAG", "TAG", "TAG", "TAG", "Whether", "you", "re", "publishing", "lots", "or", "publishing", "little", "we", "have", "a", "plan", "that", "s", "great", "value", "and", "can", "scale", "up", "down", "as", "your", "needs", "do", "and", "you", "re", "free", "to", "cancel", "anytime", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Choose", "a", "plan", "that", "s", "right", "for", "you", "TAG", "TAG", "TAG", "TAG", "Start", "Now", "No", "Obligation", "NUMBER", "Day", "Free", "Trial", "TAG", "TAG", "TAG", "TAG", "We", "don", "t", "expect", "you", "to", "make", "a", "decision", "before", "you", "ve", "kicked", "the", "tyres", "and", "shown", "your", "boss", "so", "we", "offer", "a", "no", "obligation", "NUMBER", "day", "free", "trial", "to", "everyone", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Bored", "of", "reading", "and", "want", "to", "try", "it", "for", "yourself", "Start", "your", "free", "trial", "now", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "patbegg", "The", "view", "engine", "LINK", "engine", "modules", "were", "an", "attempt", "to", "normalize", "the", "APIs", "for", "rendering", "template", "across", "multiple", "template", "engines", "and", "to", "ensure", "that", "all", "template", "be", "loaded", "as", "CommonJS", "modules", "but", "it", "never", "really", "get", "any", "traction", "NUMBER", "We", "ll", "fix", "bug", "and", "update", "dependencies", "when", "request", "but", "if", "you", "be", "just", "use", "Marko", "then", "I", "would", "suggest", "dropping", "the", "usage", "of", "the", "view", "engine", "modules", "and", "just", "use", "marko", "directly", "for", "loading", "and", "rendering", "template", "no", "middleman", "and", "less", "overhead", "NUMBER", "While", "not", "officially", "deprecate", "I", "personally", "don", "t", "think", "it", "be", "worthwhile", "to", "continue", "investing", "in", "or", "use", "the", "view", "engine", "modules", "NUMBER", "If", "you", "still", "want", "to", "use", "view", "engine", "then", "please", "let", "me", "know", "and", "if", "you", "find", "issue", "please", "open", "the", "issue", "against", "the", "appropriate", "Git", "repo", "NUMBER", "In", "the", "mean", "time", "I", "will", "look", "into", "doing", "a", "new", "release", "for", "the", "view", "engine", "marko", "LINK", "engine", "marko", "module", "NUMBER", "Thanks", "NUMBER", "Update", "A", "new", "major", "version", "of", "view", "engine", "marko", "was", "publish", "that", "tracks", "marko", "NUMBER", "view", "engine", "marko", "NUMBER", "To", "upgrade", "to", "the", "latest", "version", "bash", "npm", "install", "view", "engine", "marko", "NUMBER", "save", "I", "m", "closing", "the", "issue", "for", "now", "NUMBER", "Please", "let", "me", "know", "if", "you", "still", "see", "issue", "and", "we", "can", "reopen", "if", "needed", "NUMBER", "Hi", "Sara", "Does", "your", "TAG", "custom", "tag", "have", "a", "renderer", "NUMBER", "js", "If", "so", "which", "syntax", "of", "the", "following", "do", "your", "renderer", "NUMBER", "js", "use", "Option", "NUMBER", "javascript", "export", "NUMBER", "renderer", "function", "input", "out", "NUMBER", "Option", "NUMBER", "javascript", "module", "NUMBER", "export", "function", "renderer", "input", "out", "NUMBER", "If", "you", "have", "a", "circular", "dependency", "you", "need", "to", "use", "Option", "NUMBER", "since", "it", "allows", "for", "a", "partially", "loaded", "module", "to", "be", "returned", "NUMBER", "It", "be", "recommended", "that", "you", "always", "use", "the", "syntax", "shown", "in", "Option", "NUMBER", "NUMBER", "If", "you", "do", "not", "have", "a", "renderer", "NUMBER", "js", "then", "I", "ll", "probably", "need", "more", "details", "to", "reproduce", "the", "problem", "NUMBER", "Thanks", "Patrick", "This", "issue", "was", "fix", "as", "part", "of", "the", "fix", "for", "NUMBER", "Closing", "this", "issue", "but", "please", "let", "me", "know", "if", "you", "be", "still", "facing", "problem", "NUMBER", "Thanks", "NUMBER", "schetnikovich", "Excellent", "proposal", "You", "did", "a", "great", "job", "capturing", "the", "disconnect", "between", "nested", "tags", "and", "how", "their", "values", "be", "actually", "use", "by", "the", "parent", "widget", "NUMBER", "I", "think", "you", "re", "exactly", "right", "that", "they", "re", "more", "like", "attributes", "since", "the", "complex", "values", "for", "the", "nested", "tag", "get", "stored", "the", "same", "way", "as", "attributes", "based", "on", "the", "proposals", "we", "have", "so", "far", "NUMBER", "We", "need", "to", "make", "sure", "that", "this", "remains", "valid", "HTML", "NUMBER", "I", "don", "t", "think", "the", "HTML", "parser", "will", "allow", "NUMBER", "and", "in", "the", "tag", "names", "haven", "t", "verify", "this", "yet", "and", "for", "that", "reason", "we", "could", "try", "to", "use", "XML", "namespaces", "instead", "of", "a", "new", "syntax", "NUMBER", "For", "example", "xml", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "At", "one", "name", "every", "tag", "could", "be", "put", "into", "a", "namespace", "but", "then", "we", "decided", "to", "require", "that", "all", "tags", "be", "named", "uniquely", "NUMBER", "For", "example", "instead", "of", "creating", "a", "namespace", "with", "name", "app", "and", "use", "TAG", "we", "moved", "toward", "TAG", "NUMBER", "I", "think", "we", "need", "to", "completely", "remove", "that", "namespace", "code", "NUMBER", "Also", "I", "wonder", "if", "we", "can", "support", "nested", "tags", "within", "nested", "tags", "NUMBER", "For", "example", "use", "the", "namespace", "notation", "xml", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "If", "the", "HTML", "parser", "will", "allow", "and", "NUMBER", "in", "an", "HTML", "tag", "then", "it", "might", "be", "worth", "considering", "that", "notation", "as", "well", "NUMBER", "We", "could", "fork", "the", "HTML", "parser", "that", "we", "be", "use", "NUMBER", "There", "be", "a", "precedence", "of", "use", "to", "indicate", "attributes", "NUMBER", "If", "we", "could", "interpret", "to", "mean", "this", "tag", "belongs", "to", "the", "closest", "parent", "tag", "then", "we", "could", "automatically", "bind", "nested", "tags", "as", "attributes", "to", "parent", "tag", "NUMBER", "If", "the", "nested", "tag", "be", "not", "the", "direct", "descendant", "then", "maybe", "we", "could", "support", "a", "qualifier", "NUMBER", "For", "example", "simple", "case", "that", "doesn", "t", "require", "qualifiers", "xml", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "For", "example", "less", "simple", "case", "that", "do", "require", "qualifiers", "xml", "TAG", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Also", "if", "we", "go", "this", "route", "then", "we", "ll", "need", "to", "enhance", "the", "Marko", "syntax", "highlighter", "for", "Atom", "and", "possibly", "create", "one", "for", "other", "editors", "such", "as", "Sublime", "Text", "NUMBER", "Even", "on", "Github", "you", "can", "see", "that", "the", "syntax", "highlighter", "doesn", "t", "know", "how", "to", "highlight", "tags", "with", "NUMBER", "If", "we", "hit", "limitations", "with", "the", "HTML", "parser", "that", "we", "re", "use", "then", "maybe", "we", "should", "consider", "write", "our", "own", "because", "that", "would", "provide", "some", "other", "niceties", "NUMBER", "I", "ve", "be", "interested", "in", "doing", "this", "xml", "TAG", "TAG", "I", "m", "definitely", "going", "to", "think", "about", "this", "some", "more", "Thanks", "for", "the", "proposal", "schetnikovich", "NUMBER", "I", "like", "the", "idea", "of", "having", "a", "shorthand", "for", "nested", "tags", "NUMBER", "Technically", "HTML", "NUMBER", "do", "allow", "any", "character", "for", "the", "tag", "name", "but", "the", "first", "character", "must", "match", "a", "zA", "Z", "NUMBER", "This", "only", "made", "clear", "if", "you", "look", "at", "the", "tokenization", "spec", "LINK", "html", "NUMBER", "NUMBER", "tokenization", "NUMBER", "html", "tag", "open", "state", "LINK", "html", "NUMBER", "NUMBER", "tokenization", "NUMBER", "html", "tag", "name", "state", "Therefore", "unless", "we", "fork", "the", "parser", "that", "we", "be", "use", "and", "be", "willing", "to", "break", "syntax", "highlight", "in", "all", "HTML", "editors", "then", "we", "should", "conform", "to", "the", "HTML", "spec", "NUMBER", "I", "don", "t", "consider", "TAG", "as", "a", "replacement", "for", "repeatable", "nested", "tags", "for", "two", "reasons", "Marko", "already", "support", "nested", "TAG", "tags", "that", "can", "be", "use", "to", "add", "HTML", "attributes", "to", "the", "parent", "element", "not", "documented", "but", "here", "be", "a", "relevant", "test", "LINK", "attrs", "template", "NUMBER", "marko", "L", "NUMBER", "L", "NUMBER", "Real", "attributes", "cannot", "be", "repeated", "Just", "to", "be", "clear", "the", "following", "be", "already", "support", "html", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Regarding", "nested", "tags", "I", "think", "we", "should", "consider", "the", "following", "options", "Option", "NUMBER", "Use", "a", "colon", "to", "namespace", "nested", "tags", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Pros", "The", "colon", "character", "be", "already", "associated", "with", "namespacing", "and", "a", "nested", "tag", "be", "namespaced", "within", "a", "parent", "element", "NUMBER", "In", "the", "future", "we", "may", "want", "to", "support", "a", "short", "hand", "by", "dropping", "the", "parent", "namespace", "part", "e", "NUMBER", "g", "NUMBER", "TAG", "TAG", "Most", "HTML", "editors", "should", "not", "have", "a", "problem", "with", "a", "colon", "character", "in", "a", "tag", "name", "Cons", "Looks", "like", "XML", "namespaces", "can", "be", "a", "turn", "off", "to", "some", "people", "Colon", "character", "be", "harder", "to", "type", "requires", "the", "SHIFT", "key", "More", "typing", "Option", "NUMBER", "use", "a", "period", "to", "namespace", "nested", "tags", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Pros", "Same", "as", "Option", "NUMBER", "_plus_", "the", "period", "character", "be", "easier", "to", "type", "no", "SHIFT", "key", "Cons", "Not", "sure", "how", "most", "HTML", "editors", "parsers", "and", "linters", "will", "feel", "about", "a", "period", "character", "in", "the", "tag", "name", "More", "typing", "Option", "NUMBER", "Use", "a", "dash", "separator", "for", "the", "nested", "tag", "name", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Option", "NUMBER", "Use", "no", "explicit", "namespacing", "and", "just", "rely", "on", "a", "unique", "tag", "name", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Thoughts", "on", "which", "option", "be", "best", "I", "m", "leaning", "towards", "Option", "NUMBER", "use", "a", "period", "as", "a", "separator", "but", "I", "think", "we", "need", "to", "see", "how", "various", "tool", "feel", "about", "a", "period", "in", "the", "tag", "name", "NUMBER", "schetnikovich", "I", "think", "I", "miss", "the", "main", "purpose", "of", "your", "proposal", "NUMBER", "Your", "goal", "was", "to", "normalize", "attributes", "and", "nested", "tags", "and", "I", "think", "that", "be", "a", "good", "idea", "NUMBER", "What", "do", "you", "think", "of", "the", "following", "variation", "app", "tabs", "marko", "taglib", "NUMBER", "json", "json", "attributes", "orientation", "string", "tabs", "type", "object", "nested", "tag", "name", "tab", "attributes", "label", "string", "body", "string", "You", "would", "then", "have", "two", "options", "for", "passing", "in", "the", "array", "of", "tabs", "Using", "the", "tabs", "attribute", "html", "TAG", "Using", "the", "nested", "tab", "tag", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Also", "there", "be", "no", "right", "answer", "on", "whether", "or", "an", "attribute", "be", "more", "appropriate", "then", "a", "nested", "tag", "for", "passing", "input", "to", "a", "custom", "tag", "NUMBER", "Key", "differences", "between", "attributes", "and", "nested", "tags", "be", "that", "attributes", "cannot", "be", "repeated", "and", "attributes", "cannot", "contain", "complex", "markup", "NUMBER", "Nested", "tags", "do", "not", "have", "those", "limitations", "NUMBER", "I", "believe", "we", "need", "to", "support", "both", "attributes", "and", "nested", "tags", "NUMBER", "Completely", "agree", "with", "your", "comments", "DanCech", "NUMBER", "Even", "if", "it", "be", "more", "typing", "I", "think", "it", "be", "better", "to", "have", "some", "concept", "of", "explicit", "namespacing", "and", "I", "think", "it", "be", "better", "to", "avoid", "the", "colon", "character", "NUMBER", "I", "could", "go", "either", "way", "on", "TAG", "vs", "TAG", "but", "I", "be", "leaning", "towards", "TAG", "because", "the", "syntax", "makes", "it", "clear", "that", "it", "be", "a", "nested", "tag", "i", "NUMBER", "e", "NUMBER", "not", "a", "top", "level", "tag", "and", "that", "will", "hint", "to", "the", "user", "where", "the", "nested", "tag", "be", "defined", "NUMBER", "As", "for", "TAG", "yes", "that", "feature", "be", "officially", "support", "NUMBER", "It", "be", "an", "oversight", "that", "the", "documentation", "do", "not", "mention", "TAG", "tag", "NUMBER", "Pull", "request", "welcome", "I", "m", "in", "favor", "of", "support", "the", "dot", "notation", "for", "use", "nested", "tags", "in", "your", "HTML", "NUMBER", "A", "short", "hand", "of", "only", "use", "something", "like", "TAG", "would", "be", "great", "too", "if", "we", "can", "tweak", "the", "HTML", "parser", "NUMBER", "I", "have", "a", "new", "proposal", "for", "marko", "tag", "NUMBER", "json", "that", "should", "reduce", "the", "characters", "via", "a", "short", "hand", "notation", "NUMBER", "I", "propose", "that", "we", "use", "as", "a", "property", "prefix", "to", "identify", "attributes", "instead", "of", "having", "to", "nest", "them", "under", "a", "attributes", "property", "NUMBER", "For", "example", "json", "orientation", "string", "tabs", "TAG", "label", "string", "body", "string", "The", "tabs", "TAG", "portion", "of", "the", "example", "above", "would", "be", "interpreted", "as", "tabs", "can", "also", "be", "provide", "via", "one", "or", "more", "nested", "tab", "tags", "Thoughts", "Great", "suggestion", "philidem", "I", "really", "like", "the", "much", "flatter", "and", "more", "concise", "structure", "and", "I", "think", "it", "allows", "us", "to", "capture", "all", "of", "the", "same", "information", "NUMBER", "I", "do", "have", "a", "few", "minor", "concerns", "NUMBER", "Symbols", "have", "meaning", "slightly", "higher", "learning", "curve", "NUMBER", "The", "fact", "that", "the", "tabs", "attribute", "be", "an", "expression", "type", "would", "be", "implicit", "instead", "of", "explicit", "We", "can", "mitigate", "the", "first", "concern", "by", "first", "introduce", "developers", "to", "the", "long", "hand", "form", "that", "we", "would", "always", "need", "to", "support", "and", "then", "provide", "the", "equivalent", "short", "hand", "syntax", "NUMBER", "NUMBER", "for", "the", "following", "json", "orientation", "string", "tabs", "TAG", "label", "string", "body", "string", "Just", "an", "update", "NUMBER", "Based", "on", "the", "feedback", "shared", "in", "this", "Github", "issue", "and", "the", "relate", "Github", "issue", "of", "NUMBER", "we", "have", "made", "change", "to", "support", "the", "following", "Better", "support", "for", "tags", "with", "a", "parent", "child", "relationship", "Shorthand", "syntax", "for", "defining", "tags", "and", "attributes", "The", "Pull", "Request", "be", "still", "be", "review", "but", "you", "can", "find", "the", "details", "in", "the", "CHANGELOG", "for", "the", "upcoming", "marko", "NUMBER", "LINK", "steele", "idem", "marko", "blob", "parent", "child", "CHANGELOG", "NUMBER", "md", "NUMBER", "Here", "s", "the", "Pull", "Request", "with", "the", "change", "NUMBER", "Feedback", "on", "this", "Pull", "Request", "be", "greatly", "appreciated", "NUMBER", "Thanks", "Support", "for", "parent", "child", "relationships", "has", "be", "completed", "NUMBER", "Closing", "issue", "NUMBER", "Sorry", "for", "the", "delayed", "response", "but", "better", "late", "than", "never", "NUMBER", "You", "have", "a", "few", "options", "_Option", "NUMBER", "Access", "req", "res", "properties", "use", "out", "NUMBER", "ream", "_", "Assuming", "you", "render", "the", "top", "level", "page", "template", "directly", "to", "an", "HTTP", "response", "stream", "use", "template", "NUMBER", "render", "viewModel", "res", "you", "can", "access", "the", "HTTP", "request", "and", "response", "objects", "by", "doing", "the", "following", "javascript", "export", "NUMBER", "renderer", "function", "input", "out", "var", "res", "out", "NUMBER", "ream", "var", "req", "res", "NUMBER", "req", "The", "req", "property", "be", "add", "to", "the", "res", "object", "by", "Express", "_Option", "NUMBER", "Use", "continuation", "local", "storage", "CLS", "_", "You", "could", "use", "something", "like", "continuation", "local", "storage", "LINK", "continuation", "local", "storage", "or", "request", "local", "LINK", "local", "which", "be", "a", "small", "wrapper", "on", "top", "of", "CLS", "to", "make", "request", "specific", "information", "automatically", "available", "to", "all", "template", "and", "modules", "but", "I", "ve", "find", "that", "CLS", "can", "be", "very", "problematic", "NUMBER", "I", "think", "you", "be", "better", "off", "passing", "in", "the", "request", "specific", "globals", "via", "the", "global", "property", "or", "going", "with", "Option", "NUMBER", "I", "hope", "that", "helps", "NUMBER", "Please", "feel", "free", "to", "reopen", "this", "issue", "if", "you", "would", "like", "to", "discuss", "some", "more", "NUMBER", "Currently", "to", "set", "up", "a", "parent", "child", "relationship", "between", "custom", "tags", "requires", "a", "decent", "amount", "of", "code", "NUMBER", "Here", "s", "an", "idea", "how", "it", "can", "be", "improved", "Let", "s", "say", "we", "want", "to", "achieve", "the", "following", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "This", "could", "be", "describe", "in", "a", "single", "app", "tabs", "marko", "taglib", "NUMBER", "json", "as", "shown", "below", "json", "attributes", "orientation", "string", "nested", "tags", "app", "tab", "target", "property", "tabs", "repeated", "true", "attributes", "label", "string", "In", "the", "renderer", "the", "nested", "tabs", "could", "be", "accessed", "use", "the", "input", "NUMBER", "tabs", "property", "that", "will", "be", "an", "array", "javascript", "export", "NUMBER", "renderer", "function", "input", "out", "var", "tabs", "input", "NUMBER", "tabs", "tabs", "NUMBER", "forEach", "function", "tab", "NUMBER", "Another", "example", "html", "TAG", "TAG", "This", "be", "the", "header", "content", "TAG", "TAG", "This", "be", "the", "body", "content", "TAG", "TAG", "This", "be", "the", "footer", "content", "TAG", "TAG", "This", "could", "be", "describe", "in", "a", "single", "app", "overlay", "marko", "taglib", "NUMBER", "json", "as", "shown", "below", "json", "attributes", "visible", "boolean", "nested", "tags", "app", "overlay", "header", "target", "property", "header", "repeated", "false", "app", "overlay", "body", "target", "property", "body", "repeated", "false", "app", "overlay", "footer", "target", "property", "footer", "repeated", "false", "In", "the", "renderer", "the", "nested", "header", "body", "and", "footer", "content", "could", "be", "accessed", "as", "shown", "below", "javascript", "export", "NUMBER", "renderer", "function", "input", "out", "var", "header", "input", "NUMBER", "header", "var", "body", "input", "NUMBER", "body", "var", "footer", "input", "NUMBER", "footer", "console", "NUMBER", "log", "typeof", "header", "NUMBER", "renderBody", "Output", "function", "console", "NUMBER", "log", "typeof", "body", "NUMBER", "renderBody", "Output", "function", "console", "NUMBER", "log", "typeof", "footer", "NUMBER", "renderBody", "Output", "function", "I", "like", "this", "concept", "a", "lot", "NUMBER", "It", "might", "be", "helpful", "to", "include", "a", "snippet", "of", "what", "the", "compiled", "output", "might", "look", "like", "so", "that", "we", "can", "discuss", "NUMBER", "Here", "be", "some", "alternate", "property", "names", "for", "configuring", "the", "nested", "tag", "target", "property", "property", "a", "little", "shorter", "repeated", "limit", "a", "numeric", "value", "repeatable", "Alternatively", "have", "just", "target", "property", "and", "use", "to", "denote", "allow", "repeatability", "Allow", "any", "number", "of", "tabs", "target", "property", "tabs", "Allow", "one", "tab", "target", "property", "tabs", "NUMBER", "Allow", "two", "tabs", "target", "property", "tabs", "NUMBER", "Allow", "only", "a", "single", "tab", "target", "property", "tab", "Also", "perhaps", "the", "target", "property", "should", "always", "be", "an", "array", "and", "don", "t", "require", "the", "compiler", "to", "check", "constraints", "about", "repeatability", "of", "nested", "tag", "NUMBER", "Something", "even", "crazier", "to", "avoid", "some", "of", "the", "JSON", "clunkiness", "json", "attributes", "visible", "boolean", "nested", "tags", "app", "overlay", "title", "title", "app", "overlay", "header", "header", "app", "overlay", "body", "body", "NUMBER", "app", "overlay", "footer", "footer", "I", "like", "the", "idea", "of", "dropping", "the", "repeated", "repeatable", "property", "and", "instead", "just", "use", "the", "suffix", "to", "denote", "something", "that", "be", "repeatable", "NUMBER", "However", "I", "don", "t", "think", "we", "should", "allow", "TAG", "NUMBER", "I", "think", "I", "prefer", "target", "property", "since", "it", "I", "think", "it", "be", "a", "little", "more", "clear", "that", "this", "be", "the", "name", "of", "the", "target", "property", "NUMBER", "I", "don", "t", "think", "we", "need", "the", "short", "hand", "because", "it", "prevents", "attributes", "from", "be", "defined", "for", "the", "nested", "tags", "but", "I", "might", "be", "able", "to", "be", "persuaded", "NUMBER", "I", "be", "worried", "that", "repeatable", "will", "be", "the", "most", "common", "case", "and", "that", "people", "will", "forget", "to", "add", "the", "to", "the", "target", "property", "name", "NUMBER", "That", "s", "why", "I", "was", "wondering", "if", "we", "should", "always", "assume", "arrays", "NUMBER", "I", "like", "the", "shorthand", "notation", "for", "the", "most", "common", "case", "NUMBER", "We", "can", "implement", "the", "longhand", "approach", "first", "and", "then", "see", "if", "shorthand", "makes", "sense", "NUMBER", "Definitely", "don", "t", "want", "to", "have", "nested", "tags", "always", "produce", "an", "array", "NUMBER", "I", "think", "that", "will", "make", "the", "tag", "renderer", "more", "complicated", "than", "it", "needs", "to", "be", "NUMBER", "patrick", "steele", "idem", "and", "I", "discussed", "this", "and", "the", "proposal", "looks", "more", "like", "this", "json", "attributes", "orientation", "string", "taglib", "tags", "app", "tab", "target", "property", "tabs", "attributes", "label", "string", "Basically", "you", "can", "now", "declare", "taglibs", "within", "other", "tags", "NUMBER", "If", "the", "target", "property", "exists", "for", "a", "tag", "then", "this", "creates", "the", "parent", "child", "relationship", "between", "the", "parent", "tag", "and", "the", "child", "tag", "NUMBER", "When", "taglibs", "be", "declared", "within", "another", "tag", "then", "that", "taglib", "be", "associated", "with", "a", "parent", "taglib", "NUMBER", "Thanks", "for", "summarizing", "philidem", "NUMBER", "I", "m", "going", "to", "start", "the", "implementation", "now", "NUMBER", "New", "version", "of", "marko", "publish", "with", "fix", "marko", "NUMBER", "Thanks", "for", "setting", "up", "the", "project", "to", "reproduce", "the", "problem", "and", "thank", "you", "for", "bringing", "this", "problem", "to", "our", "attention", "Hey", "tindli", "I", "m", "going", "through", "old", "issue", "to", "do", "some", "housecleaning", "NUMBER", "I", "be", "going", "to", "go", "ahead", "and", "close", "this", "issue", "NUMBER", "If", "you", "think", "that", "we", "need", "to", "improve", "the", "docs", "in", "various", "areas", "I", "would", "recommend", "open", "a", "Github", "issue", "for", "each", "proposal", "for", "better", "track", "purposes", "NUMBER", "FYI", "I", "actually", "haven", "t", "do", "any", "extensive", "test", "to", "see", "how", "Google", "indexes", "pages", "with", "client", "side", "reordering", "NUMBER", "I", "would", "be", "curious", "to", "know", "the", "answer", "to", "that", "However", "we", "have", "aimed", "to", "only", "do", "out", "of", "order", "rendering", "for", "non", "bots", "and", "browsers", "with", "JS", "enable", "NUMBER", "For", "bots", "and", "non", "JS", "users", "the", "recommendation", "has", "be", "to", "not", "enable", "client", "side", "reordering", "client", "reorder", "false", "NUMBER", "Thanks", "Hi", "patbegg", "NUMBER", "We", "use", "an", "HTML", "parser", "that", "follows", "the", "same", "HTML", "parser", "rules", "as", "a", "web", "browser", "so", "each", "template", "should", "be", "valid", "HTML", "documents", "which", "means", "you", "can", "t", "break", "out", "the", "open", "and", "closing", "tags", "for", "an", "element", "into", "separate", "template", "NUMBER", "However", "that", "be", "not", "really", "a", "problem", "in", "practice", "and", "the", "recommended", "solution", "be", "to", "use", "the", "layout", "taglib", "LINK", "layout", "taglib", "to", "define", "the", "skeleton", "of", "your", "page", "NUMBER", "For", "your", "example", "you", "would", "want", "to", "do", "something", "like", "the", "following", "_src", "pages", "home", "template", "NUMBER", "marko", "_", "html", "TAG", "TAG", "My", "Page", "Title", "TAG", "TAG", "content", "here", "TAG", "TAG", "_src", "layouts", "default", "template", "NUMBER", "marko", "_", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Let", "me", "know", "if", "that", "do", "or", "do", "not", "solve", "your", "problem", "NUMBER", "You", "re", "welcome", "NUMBER", "I", "hope", "that", "solution", "worked", "out", "for", "you", "NUMBER", "Welcome", "to", "Marko", "and", "Node", "patbegg", "There", "be", "two", "ways", "to", "pass", "along", "data", "NUMBER", "As", "part", "of", "the", "attributes", "on", "the", "custom", "tag", "NUMBER", "As", "part", "of", "global", "data", "that", "be", "made", "available", "to", "all", "custom", "tags", "as", "part", "of", "the", "out", "object", "NUMBER", "You", "want", "to", "take", "advantage", "of", "the", "second", "option", "and", "provide", "global", "data", "NUMBER", "This", "be", "describe", "in", "the", "following", "section", "of", "the", "docs", "LINK", "global", "properties", "Here", "s", "some", "code", "that", "matches", "your", "example", "javascript", "template", "NUMBER", "render", "global", "env", "development", "NUMBER", "All", "other", "non", "global", "data", "And", "then", "in", "any", "rendered", "template", "html", "TAG", "NOTE", "out", "NUMBER", "global", "NUMBER", "env", "be", "use", "instead", "of", "data", "NUMBER", "env", "NUMBER", "Please", "confirm", "that", "that", "solves", "your", "problem", "NUMBER", "Let", "us", "know", "know", "if", "you", "have", "any", "other", "question", "NUMBER", "Glad", "that", "solve", "your", "problem", "NUMBER", "Happy", "code", "Let", "s", "create", "some", "logos", "for", "Marko", "I", "ll", "start", "things", "off", "with", "a", "really", "_rough_", "sketch", "of", "an", "idea", "marko", "logo", "small", "LINK", "bccf", "NUMBER", "e", "NUMBER", "NUMBER", "f", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "e", "NUMBER", "e", "NUMBER", "jpg", "Please", "feel", "free", "to", "take", "that", "idea", "and", "make", "it", "better", "or", "come", "up", "with", "something", "completely", "different", "NUMBER", "All", "logos", "submitted", "here", "will", "be", "assumed", "to", "be", "licensed", "as", "public", "domain", "CC", "NUMBER", "LINK", "NUMBER", "Contributors", "to", "the", "final", "logo", "will", "get", "credit", "on", "the", "main", "page", "and", "a", "custom", "printed", "T", "Shirt", "with", "the", "logo", "on", "it", "pdajlido", "I", "like", "the", "logo", "with", "the", "pink", "lettering", "because", "it", "be", "simpler", "NUMBER", "I", "like", "the", "visual", "elements", "add", "around", "the", "lettering", "but", "what", "be", "the", "meaning", "of", "the", "lattice", "decoration", "Also", "I", "think", "it", "works", "well", "if", "the", "graphic", "part", "of", "the", "logo", "could", "be", "use", "independent", "of", "the", "Marko", "text", "and", "for", "the", "graphic", "part", "to", "be", "easily", "recognizable", "and", "unique", "if", "that", "makes", "sense", "NUMBER", "Instead", "of", "TAG", "TAG", "TAG", "since", "it", "matches", "how", "the", "characters", "would", "appear", "in", "an", "HTML", "tag", "NUMBER", "Maybe", "something", "can", "be", "do", "with", "a", "double", "diamond", "I", "like", "the", "upper", "right", "M", "logo", "NUMBER", "Might", "want", "to", "create", "a", "companion", "logo", "that", "contains", "Marko", "as", "well", "NUMBER", "I", "do", "like", "the", "diamond", "concept", "NUMBER", "I", "didn", "t", "see", "two", "X", "s", "at", "first", "but", "now", "that", "s", "all", "I", "see", "for", "TAG", "TAG", "TAG", "As", "patrick", "steele", "idem", "suggested", "would", "be", "better", "NUMBER", "seangates", "Even", "dumb", "ideas", "can", "inspire", "something", "better", "What", "be", "Mark", "though", "Just", "kidding", "marko", "logo", "NUMBER", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "f", "NUMBER", "e", "NUMBER", "ca", "NUMBER", "bfbc", "NUMBER", "png", "patrick", "steele", "idem", "Maybe", "NUMBER", "Marko", "instead", "of", "Marko", "NUMBER", "Or", "maybe", "NUMBER", "marko", "lower", "case", "marko", "logo", "NUMBER", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "b", "NUMBER", "e", "f", "NUMBER", "fdc", "NUMBER", "e", "NUMBER", "a", "NUMBER", "a", "NUMBER", "png", "marko", "logo", "NUMBER", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "bce", "NUMBER", "d", "NUMBER", "d", "NUMBER", "png", "Hah", "nice", "pdajlido", "I", "m", "curious", "as", "to", "what", "others", "think", "of", "add", "a", "character", "to", "the", "logo", "but", "I", "might", "like", "it", "A", "logo", "with", "a", "character", "seems", "to", "have", "worked", "well", "for", "Yeoman", "LINK", "Also", "for", "Marko", "Widgets", "you", "could", "modify", "the", "dude", "to", "be", "a", "mad", "scientist", "NUMBER", "Thanks", "for", "the", "contributions", "pdajlido", "marko", "logo", "NUMBER", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "b", "NUMBER", "bfb", "NUMBER", "afaf", "NUMBER", "f", "NUMBER", "png", "Hey", "folks", "while", "we", "had", "a", "some", "great", "submissions", "we", "decided", "to", "get", "the", "help", "of", "some", "professionals", "NUMBER", "We", "start", "a", "logo", "contest", "on", "NUMBER", "designs", "NUMBER", "com", "yesterday", "and", "be", "get", "some", "great", "submissions", "LINK", "design", "contests", "create", "logo", "marko", "open", "source", "programming", "project", "ebay", "NUMBER", "entries", "If", "you", "have", "any", "thoughts", "please", "share", "so", "that", "we", "can", "provide", "feedback", "to", "the", "designers", "NUMBER", "Also", "after", "the", "contest", "progresses", "some", "more", "I", "ll", "share", "a", "poll", "so", "that", "we", "can", "get", "more", "input", "NUMBER", "Thanks", "Link", "to", "contest", "entries", "Accidentally", "pressed", "the", "wrong", "button", "NUMBER", "Comment", "update", "with", "link", "to", "contest", "NUMBER", "Thanks", "NUMBER", "Hi", "folks", "We", "created", "two", "separate", "polls", "to", "help", "us", "choose", "a", "logo", "NUMBER", "designs", "NUMBER", "com", "limits", "each", "poll", "to", "only", "NUMBER", "logos", "each", "Poll", "NUMBER", "LINK", "design", "vote", "d", "NUMBER", "zuf", "Poll", "NUMBER", "LINK", "design", "vote", "NUMBER", "qyhyb", "Please", "vote", "Thanks", "Hi", "folks", "Thank", "you", "all", "for", "the", "votes", "in", "the", "earlier", "polls", "We", "have", "one", "more", "poll", "last", "one", "I", "promise", "NUMBER", "Please", "give", "your", "ratings", "for", "the", "last", "set", "of", "designs", "Final", "poll", "LINK", "design", "vote", "bdarln", "We", "will", "use", "the", "final", "poll", "to", "help", "select", "the", "winner", "NUMBER", "Thanks", "in", "advance", "Marko", "has", "a", "new", "logo", "Marko", "Logo", "LINK", "NUMBER", "f", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "ee", "NUMBER", "fff", "NUMBER", "cae", "NUMBER", "e", "NUMBER", "a", "NUMBER", "png", "fierysunset", "Is", "the", "problem", "that", "the", "attribute", "input", "value", "in", "your", "example", "be", "not", "available", "when", "use", "c", "input", "Since", "you", "can", "only", "have", "one", "input", "to", "the", "tag", "c", "input", "takes", "precedence", "in", "this", "case", "I", "be", "guessing", "that", "attribute", "will", "not", "be", "pass", "along", "NUMBER", "Technically", "I", "think", "the", "compiler", "should", "flag", "this", "as", "an", "error", "NUMBER", "Here", "be", "some", "alternatives", "Put", "the", "value", "of", "attribute", "into", "data", "NUMBER", "someObj", "and", "use", "TAG", "NUMBER", "For", "example", "javascript", "TAG", "TAG", "Don", "t", "use", "c", "input", "but", "allow", "wildcard", "attributes", "for", "tagname", "tag", "NUMBER", "See", "LINK", "defining", "attributes", "Declare", "a", "data", "or", "some", "other", "name", "attribute", "for", "tagname", "that", "could", "be", "use", "as", "an", "alternate", "way", "to", "provide", "input", "NUMBER", "You", "could", "then", "use", "it", "like", "html", "TAG", "Because", "data", "be", "not", "a", "special", "attribute", "the", "renderer", "for", "tagname", "could", "access", "both", "data", "and", "attribute", "NUMBER", "I", "think", "the", "desired", "behavior", "be", "for", "the", "attributes", "to", "be", "merge", "into", "the", "data", "object", "provide", "by", "c", "input", "NUMBER", "The", "properties", "provide", "via", "attributes", "should", "take", "precedence", "over", "the", "properties", "in", "the", "the", "c", "input", "object", "NUMBER", "Also", "we", "should", "not", "modify", "the", "object", "provide", "via", "c", "input", "and", "instead", "create", "a", "new", "object", "with", "the", "merge", "properties", "NUMBER", "Is", "that", "what", "you", "be", "thinking", "as", "well", "fierysunset", "Thoughts", "philidem", "Also", "there", "be", "plenty", "of", "workarounds", "to", "avoid", "make", "this", "change", "but", "I", "do", "think", "it", "be", "something", "we", "should", "just", "go", "ahead", "and", "fix", "since", "the", "current", "behavior", "of", "silently", "discarding", "the", "attributes", "when", "use", "in", "conjunction", "with", "c", "input", "be", "not", "right", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Please", "fix", "the", "jshint", "error", "so", "that", "the", "build", "will", "pass", "NUMBER", "Also", "jshint", "plugins", "package", "for", "your", "code", "editor", "be", "really", "helpful", "if", "you", "don", "t", "have", "one", "install", "NUMBER", "See", "LINK", "ci", "NUMBER", "org", "raptorjs", "marko", "jobs", "NUMBER", "Published", "marko", "NUMBER", "Thanks", "Sean", "How", "about", "the", "following", "_component", "library", "marko", "taglib", "NUMBER", "json__", "json", "taglib", "imports", "NUMBER", "package", "NUMBER", "json", "Behind", "the", "scenes", "Marko", "would", "read", "the", "package", "NUMBER", "json", "file", "to", "find", "the", "dependencies", "object", "NUMBER", "It", "would", "then", "loop", "over", "all", "of", "the", "module", "dependencies", "and", "do", "the", "following", "javascript", "var", "taglibPathToTry", "require", "NUMBER", "resolve", "TAG", "marko", "taglib", "NUMBER", "json", "if", "taglibPathToTry", "Import", "the", "current", "taglib", "Sound", "good", "New", "version", "publish", "with", "enhancement", "marko", "NUMBER", "marko", "NUMBER", "Test", "for", "new", "feature", "be", "passing", "but", "documentation", "has", "not", "be", "update", "NUMBER", "Sample", "usage", "LINK", "project", "marko", "taglib", "NUMBER", "json", "L", "NUMBER", "Let", "me", "know", "if", "you", "see", "any", "issue", "NUMBER", "I", "agree", "NUMBER", "The", "interdependencies", "between", "modules", "and", "out", "of", "date", "modules", "can", "cause", "some", "strangeness", "NUMBER", "Besides", "keep", "the", "changelog", "up", "to", "date", "we", "should", "see", "if", "there", "be", "a", "way", "to", "detect", "incompatibilities", "at", "runtime", "when", "in", "development", "mode", "might", "be", "a", "tooling", "issue", "NUMBER", "Perhaps", "something", "that", "could", "inspect", "the", "package", "NUMBER", "json", "and", "node_modules", "to", "look", "for", "inconsistencies", "NUMBER", "Hi", "barwin", "NUMBER", "We", "do", "maintain", "a", "CHANGELOG", "NUMBER", "md", "for", "Marko", "LINK", "However", "I", "think", "an", "Upgrade", "Guide", "be", "needed", "as", "well", "to", "describe", "what", "steps", "should", "be", "taken", "to", "upgrade", "to", "a", "new", "major", "version", "NUMBER", "This", "would", "be", "similar", "to", "the", "Upgrade", "Guide", "add", "for", "Marko", "Widgets", "LINK", "widgets", "blob", "master", "CHANGELOG", "NUMBER", "md", "upgrade", "guide", "Any", "other", "suggestions", "for", "make", "the", "changelog", "better", "Short", "answer", "Yes", "you", "can", "use", "Marko", "with", "webpack", "NUMBER", "You", "just", "need", "to", "enable", "the", "markoify", "LINK", "Browserify", "transform", "for", "webpack", "LINK", "use", "browserify", "To", "use", "a", "browserify", "transform", "with", "webpack", "you", "can", "use", "the", "following", "webpack", "loader", "LINK", "loader", "In", "theory", "it", "would", "probably", "be", "trivial", "to", "build", "a", "custom", "Marko", "loader", "for", "webpack", "but", "it", "be", "not", "something", "we", "have", "plan", "to", "do", "NUMBER", "If", "you", "or", "someone", "else", "wants", "to", "introduce", "a", "marko", "loader", "for", "webpack", "I", "m", "sure", "that", "would", "be", "helpful", "to", "others", "NUMBER", "Long", "answer", "Marko", "template", "compile", "down", "to", "standard", "CommonJS", "JavaScript", "modules", "NUMBER", "If", "you", "pre", "compile", "all", "of", "your", "template", "then", "the", "following", "code", "will", "always", "work", "with", "webpack", "or", "any", "other", "JavaScript", "module", "loader", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "You", "can", "pre", "compile", "your", "template", "use", "the", "markoc", "command", "line", "utility", "NUMBER", "For", "example", "bash", "markoc", "NUMBER", "Pre", "compilation", "be", "kind", "of", "a", "pain", "since", "you", "need", "to", "typically", "set", "up", "a", "file", "watching", "service", "or", "Gulp", "Grunt", "build", "script", "compile", "on", "template", "on", "change", "but", "it", "works", "NUMBER", "To", "avoid", "pre", "compilation", "we", "recommend", "the", "following", "code", "to", "load", "a", "template", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "template", "NUMBER", "marko", "That", "code", "will", "work", "on", "the", "server", "side", "no", "problem", "but", "Browserify", "and", "WebPack", "do", "not", "recognize", "and", "support", "require", "NUMBER", "resolve", "so", "you", "must", "use", "a", "Browserify", "transform", "to", "compile", "the", "Marko", "template", "automatically", "and", "transform", "the", "code", "to", "the", "following", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "That", "s", "exactly", "what", "the", "following", "Browserify", "transform", "do", "for", "you", "LINK", "I", "hope", "that", "answers", "your", "question", "NUMBER", "As", "a", "side", "note", "you", "might", "want", "to", "consider", "use", "the", "optimizer", "LINK", "since", "it", "be", "more", "feature", "rich", "JavaScript", "module", "bundler", "that", "also", "support", "CSS", "code", "splitting", "bundling", "lazy", "loading", "etc", "NUMBER", "I", "ve", "not", "tried", "use", "marko", "with", "webpack", "but", "I", "suspect", "that", "the", "webpack", "bundler", "be", "choking", "due", "to", "the", "following", "lines", "LINK", "logging", "blob", "b", "NUMBER", "e", "NUMBER", "e", "NUMBER", "fa", "NUMBER", "fc", "NUMBER", "ac", "NUMBER", "de", "NUMBER", "c", "NUMBER", "lib", "raptor", "logging", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "I", "m", "not", "sure", "what", "to", "suggest", "in", "this", "case", "because", "it", "seems", "like", "a", "bug", "in", "webpack", "since", "lasso", "LINK", "js", "lasso", "and", "browserify", "LINK", "have", "no", "issue", "NUMBER", "If", "anyone", "knows", "of", "a", "workaround", "for", "webpack", "please", "share", "NUMBER", "Hey", "wheresrhys", "I", "think", "the", "right", "thing", "to", "do", "here", "be", "to", "use", "the", "markoify", "LINK", "js", "markoify", "Browserify", "transform", "with", "Webpack", "use", "the", "transform", "loader", "for", "webpack", "LINK", "loader", "The", "markoify", "transform", "will", "auto", "compile", "the", "referenced", "Marko", "template", "and", "transform", "the", "code", "to", "require", "the", "generate", "NUMBER", "marko", "NUMBER", "js", "file", "e", "NUMBER", "g", "NUMBER", "require", "NUMBER", "tpl", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "Have", "you", "given", "that", "a", "try", "Unfortunately", "generating", "the", "following", "code", "would", "_not_", "work", "since", "the", "referenced", "template", "may", "not", "already", "be", "compiled", "javascript", "__loadTemplate", "require", "NUMBER", "NUMBER", "components", "nav", "tpl", "NUMBER", "marko", "NUMBER", "js", "require", "Marko", "be", "designed", "to", "generate", "code", "that", "always", "works", "on", "the", "server", "NUMBER", "We", "use", "require", "NUMBER", "resolve", "NUMBER", "template", "NUMBER", "marko", "instead", "of", "require", "NUMBER", "template", "NUMBER", "marko", "because", "the", "Node", "NUMBER", "js", "require", "extension", "for", "Marko", "be", "optional", "NUMBER", "We", "provide", "transforms", "for", "JavaScript", "module", "bundlers", "so", "that", "referenced", "template", "will", "automatically", "be", "compiled", "and", "required", "in", "NUMBER", "I", "hope", "that", "clarifies", "NUMBER", "Hey", "wheresrhys", "were", "you", "able", "to", "get", "things", "work", "with", "with", "the", "markoify", "transform", "If", "you", "still", "think", "it", "be", "need", "to", "generate", "compiled", "code", "differently", "such", "that", "it", "doesn", "t", "use", "require", "NUMBER", "resolve", "NUMBER", "foo", "NUMBER", "marko", "and", "instead", "uses", "require", "NUMBER", "foo", "NUMBER", "marko", "then", "it", "might", "be", "reasonable", "to", "offer", "that", "as", "a", "compile", "time", "option", "javascript", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "useRequireExtension", "true", "I", "m", "doing", "some", "housecleaning", "so", "I", "be", "going", "to", "go", "ahead", "and", "close", "this", "issue", "but", "please", "feel", "free", "to", "open", "another", "Github", "issue", "if", "you", "would", "like", "to", "pursue", "the", "propose", "idea", "or", "any", "other", "ideas", "NUMBER", "Thanks", "naumovs", "thanks", "for", "sharing", "NUMBER", "If", "you", "be", "interested", "in", "maintaining", "a", "loader", "for", "others", "to", "use", "I", "can", "give", "you", "access", "to", "github", "NUMBER", "com", "marko", "js", "marko", "loader", "or", "the", "webpack", "folks", "may", "let", "you", "maintain", "the", "repo", "at", "github", "NUMBER", "com", "webpack", "marko", "loader", "NUMBER", "It", "would", "be", "great", "to", "have", "an", "official", "webpack", "loader", "for", "those", "who", "want", "to", "use", "webpack", "even", "if", "the", "code", "for", "the", "loader", "be", "trivial", "NUMBER", "It", "would", "be", "also", "good", "to", "update", "the", "marko", "docs", "to", "describe", "usage", "with", "webpack", "NUMBER", "Please", "let", "me", "know", "if", "you", "be", "interested", "in", "helping", "out", "NUMBER", "Marko", "has", "be", "update", "to", "be", "compatible", "with", "wepback", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Also", "see", "LINK", "js", "marko", "loader", "It", "do", "work", "although", "I", "m", "still", "get", "Webpack", "warnings", "Yes", "for", "now", "there", "be", "no", "way", "to", "remove", "the", "warnings", "without", "potentially", "breaking", "things", "NUMBER", "In", "the", "next", "version", "of", "Marko", "we", "can", "revisit", "how", "the", "optional", "streams", "module", "be", "enable", "for", "the", "browser", "NUMBER", "maxwarch", "I", "think", "you", "meant", "to", "ask", "this", "question", "as", "a", "Github", "issue", "and", "not", "a", "Pull", "Request", "NUMBER", "Please", "open", "a", "Github", "issue", "with", "your", "question", "and", "we", "can", "discuss", "there", "NUMBER", "Thanks", "NUMBER", "Topics", "to", "include", "Creating", "nested", "tags", "use", "the", "following", "body", "function", "import", "var", "Compile", "time", "transformers", "Compile", "time", "nodes", "Tag", "renderers", "marko", "taglib", "NUMBER", "json", "and", "marko", "tag", "NUMBER", "json", "The", "Marko", "compile", "time", "API", "be", "get", "a", "much", "needed", "refactoring", "with", "Marko", "v", "NUMBER", "The", "plan", "be", "to", "finally", "provide", "docs", "for", "how", "to", "extend", "Marko", "at", "compile", "time", "with", "Marko", "v", "NUMBER", "It", "be", "NUMBER", "I", "think", "you", "be", "run", "into", "a", "problem", "because", "you", "have", "an", "instance", "of", "TAG", "that", "be", "_not_", "nested", "within", "another", "TAG", "NUMBER", "This", "be", "cause", "the", "scoped", "__children", "variable", "to", "be", "undefined", "and", "you", "be", "seeing", "an", "error", "NUMBER", "I", "suggest", "the", "following", "json", "import", "var", "children", "typeof", "__children", "undefined", "null", "__children", "That", "should", "avoid", "the", "__children", "be", "undefined", "error", "NUMBER", "Glad", "that", "worked", "for", "you", "and", "glad", "to", "see", "that", "you", "be", "taking", "advantage", "of", "these", "features", "Also", "you", "might", "want", "to", "avoid", "a", "generic", "variable", "name", "such", "as", "__children", "and", "instead", "use", "__mytag", "or", "something", "that", "makes", "it", "clear", "where", "the", "variable", "came", "from", "and", "avoids", "possible", "variable", "collisions", "NUMBER", "Sounds", "good", "NUMBER", "You", "be", "right", "that", "the", "documentation", "relate", "to", "body", "function", "renderBody", "out", "and", "import", "var", "could", "be", "improved", "NUMBER", "The", "plan", "be", "to", "eventually", "provide", "a", "separate", "Markdown", "document", "that", "goes", "into", "much", "more", "depth", "on", "build", "custom", "taglibs", "NUMBER", "There", "s", "actually", "a", "lot", "of", "really", "interesting", "things", "you", "can", "do", "at", "compile", "time", "use", "a", "custom", "transformer", "that", "manipulates", "the", "AST", "before", "the", "code", "generation", "phase", "NUMBER", "In", "the", "mean", "time", "if", "you", "have", "any", "question", "on", "how", "to", "accomplish", "something", "please", "ask", "here", "or", "on", "Gitter", "NUMBER", "I", "would", "be", "curious", "to", "check", "out", "your", "wrapper", "around", "rendering", "a", "React", "component", "NUMBER", "I", "do", "feel", "like", "these", "two", "technologies", "do", "play", "nice", "together", "and", "welcome", "any", "solutions", "that", "can", "bridge", "the", "two", "NUMBER", "Closing", "issue", "now", "that", "you", "have", "a", "work", "solution", "NUMBER", "Thanks", "for", "the", "fix", "New", "version", "publish", "marko", "NUMBER", "Fixed", "by", "NUMBER", "f", "NUMBER", "dbf", "NUMBER", "c", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "fdbac", "NUMBER", "ef", "NUMBER", "d", "NUMBER", "This", "be", "a", "know", "issue", "with", "a", "clean", "workaround", "NUMBER", "Marko", "ignores", "HTML", "comments", "and", "this", "breaks", "IE", "conditionals", "since", "the", "comments", "be", "never", "write", "to", "the", "output", "NUMBER", "I", "ve", "suggested", "the", "following", "workaround", "in", "the", "past", "Create", "a", "custom", "tag", "named", "TAG", "that", "maps", "to", "the", "following", "renderer", "javascript", "module", "NUMBER", "export", "function", "render", "input", "out", "var", "lang", "input", "NUMBER", "lang", "out", "NUMBER", "write", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "input", "NUMBER", "renderBody", "out", "out", "NUMBER", "write", "TAG", "Then", "in", "your", "page", "layout", "or", "page", "template", "html", "TAG", "TAG", "TAG", "TAG", "Hello", "World", "TAG", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Output", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Hello", "World", "TAG", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "The", "benefit", "of", "this", "approach", "be", "that", "the", "HTML", "template", "be", "cleaner", "NUMBER", "In", "theory", "we", "could", "look", "into", "a", "code", "change", "to", "introduce", "special", "handle", "for", "IE", "HTML", "comments", "NUMBER", "I", "m", "open", "to", "ideas", "and", "or", "Pull", "Requests", "but", "hopefully", "the", "workaround", "solves", "your", "problem", "for", "now", "NUMBER", "New", "version", "publish", "with", "improvement", "marko", "NUMBER", "Thanks", "for", "letting", "me", "know", "yomed", "NUMBER", "IE", "conditional", "HTML", "comments", "be", "automatically", "preserved", "now", "so", "the", "workaround", "discussed", "be", "not", "needed", "NUMBER", "That", "s", "true", "variables", "inside", "comments", "be", "not", "resolve", "NUMBER", "Does", "keep", "the", "template", "code", "cleaner", "as", "well", "NUMBER", "Thanks", "for", "sharing", "NUMBER", "The", "HTML", "syntax", "do", "not", "allow", "attribute", "types", "to", "be", "distinguished", "similar", "to", "JSON", "NUMBER", "This", "be", "unfortunate", "but", "short", "of", "introduce", "a", "new", "language", "we", "must", "live", "with", "a", "separate", "schema", "that", "informs", "the", "compiler", "of", "the", "types", "of", "each", "attribute", "NUMBER", "Alternatively", "we", "would", "assume", "that", "every", "attribute", "be", "a", "string", "and", "for", "to", "change", "the", "type", "more", "typing", "and", "ugly", "NUMBER", "Therefore", "in", "your", "example", "you", "would", "just", "need", "to", "do", "the", "following", "json", "attributes", "viewModel", "expression", "options", "expression", "If", "we", "were", "willing", "to", "depart", "from", "an", "HTML", "parser", "we", "could", "create", "our", "own", "HTML", "like", "parser", "that", "support", "the", "following", "html", "TAG", "TAG", "TAG", "TAG", "If", "we", "were", "to", "go", "that", "route", "then", "we", "would", "lose", "syntax", "highlight", "completion", "validation", "support", "from", "exist", "HTML", "editors", "and", "tool", "like", "Emmet", "LINK", "NUMBER", "Closing", "issue", "as", "I", "don", "t", "think", "there", "be", "any", "short", "term", "actionable", "items", "NUMBER", "If", "you", "disagree", "please", "feel", "free", "to", "add", "comments", "NUMBER", "Hey", "pedramphp", "please", "provide", "comments", "on", "the", "following", "proposal", "LINK", "Can", "you", "provide", "more", "details", "or", "a", "reproducible", "test", "I", "have", "not", "run", "into", "a", "case", "where", "the", "stack", "trace", "was", "not", "valid", "NUMBER", "Are", "you", "sure", "the", "problem", "do", "not", "reside", "in", "your", "code", "pedramphp", "ping", "NUMBER", "Can", "you", "please", "provide", "more", "details", "I", "just", "created", "a", "project", "to", "try", "and", "reproduce", "and", "I", "be", "not", "able", "to", "reproduce", "the", "problem", "NUMBER", "Here", "be", "the", "error", "that", "I", "see", "logged", "Users", "psteeleidem", "temp", "marko", "issue", "NUMBER", "components", "app", "foo", "renderer", "NUMBER", "js", "NUMBER", "var", "a", "t", "NUMBER", "a", "TypeError", "Cannot", "read", "property", "a", "of", "null", "at", "Function", "NUMBER", "module", "NUMBER", "export", "Users", "psteeleidem", "temp", "marko", "issue", "NUMBER", "components", "app", "foo", "renderer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "module", "NUMBER", "export", "NUMBER", "t", "Users", "psteeleidem", "temp", "marko", "issue", "NUMBER", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "Users", "psteeleidem", "temp", "marko", "issue", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "render", "Users", "psteeleidem", "temp", "marko", "issue", "NUMBER", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "TAG", "Users", "psteeleidem", "temp", "marko", "issue", "NUMBER", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "_compile", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Module", "NUMBER", "_extensions", "NUMBER", "js", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "load", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "_load", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "runMain", "module", "NUMBER", "js", "NUMBER", "NUMBER", "I", "don", "t", "believe", "the", "problem", "be", "with", "Marko", "NUMBER", "Please", "check", "your", "project", "setup", "because", "I", "suspect", "you", "have", "some", "error", "handle", "code", "that", "be", "not", "display", "caught", "error", "correctly", "NUMBER", "Hi", "bkniffler", "a", "custom", "tag", "be", "just", "a", "mapping", "to", "a", "render", "input", "out", "function", "that", "gets", "resolve", "at", "compile", "time", "NUMBER", "It", "s", "possible", "to", "invoke", "a", "render", "function", "directly", "instead", "of", "going", "through", "a", "custom", "tag", "and", "I", "think", "that", "might", "help", "in", "your", "case", "NUMBER", "This", "be", "do", "use", "the", "TAG", "tag", "LINK", "invoke", "as", "shown", "below", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "NOTE", "A", "loaded", "template", "also", "has", "a", "template", "NUMBER", "render", "input", "out", "function", "so", "you", "could", "also", "do", "the", "following", "html", "TAG", "I", "m", "not", "sure", "if", "you", "be", "use", "the", "RaptorJS", "Optimizer", "or", "Browserify", "but", "the", "RaptorJS", "Optimizer", "support", "dynamic", "requires", "while", "Browserify", "do", "not", "NUMBER", "Therefore", "if", "you", "be", "use", "the", "RaptorJS", "Optimizer", "then", "you", "can", "send", "down", "all", "of", "the", "template", "that", "may", "be", "needed", "on", "the", "client", "and", "dynamically", "require", "them", "instead", "of", "relying", "only", "on", "static", "code", "analysis", "NUMBER", "You", "can", "use", "a", "glob", "pattern", "to", "send", "down", "all", "of", "the", "template", "in", "a", "directory", "as", "shown", "below", "_optimizer", "NUMBER", "json_", "json", "dependencies", "NUMBER", "marko", "Those", "template", "could", "be", "dynamically", "required", "doing", "something", "similar", "to", "the", "following", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "components", "componentName", "template", "NUMBER", "marko", "NOTE", "We", "currently", "don", "t", "register", "the", "NUMBER", "marko", "NUMBER", "html", "extension", "for", "the", "optimizer", "marko", "LINK", "marko", "plugin", "so", "you", "might", "need", "to", "send", "a", "PR", "for", "the", "plugin", "NUMBER", "Does", "this", "help", "in", "your", "use", "case", "If", "not", "please", "provide", "more", "details", "NUMBER", "bkniffler", "I", "would", "recommend", "an", "approach", "that", "uses", "a", "single", "component", "tag", "that", "simply", "delegates", "rendering", "to", "multiple", "other", "components", "renderers", "NUMBER", "For", "example", "I", "often", "run", "into", "the", "use", "case", "of", "choosing", "a", "template", "based", "on", "a", "type", "or", "layout", "attribute", "NUMBER", "Consider", "the", "case", "where", "you", "might", "want", "to", "do", "something", "like", "this", "xml", "TAG", "data", "NUMBER", "message", "TAG", "TAG", "data", "NUMBER", "message", "TAG", "TAG", "data", "NUMBER", "message", "TAG", "Depending", "on", "your", "use", "case", "this", "might", "be", "simpler", "than", "having", "three", "separate", "tags", "app", "info", "message", "app", "warning", "message", "and", "app", "error", "message", "for", "example", "NUMBER", "In", "this", "example", "app", "message", "may", "have", "a", "template", "for", "each", "type", "of", "message", "NUMBER", "The", "app", "message", "renderer", "would", "simply", "choose", "the", "right", "template", "based", "on", "the", "type", "NUMBER", "The", "app", "message", "component", "would", "have", "a", "renderer", "NUMBER", "js", "with", "something", "like", "this", "javascript", "var", "marko", "require", "marko", "var", "TEMPLATE_BY_TYPE", "info", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "info", "NUMBER", "marko", "warning", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "warning", "NUMBER", "marko", "error", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "error", "NUMBER", "marko", "module", "NUMBER", "export", "function", "input", "out", "find", "the", "template", "that", "maps", "to", "the", "given", "type", "var", "template", "TEMPLATE_BY_TYPE", "input", "NUMBER", "type", "if", "template", "throw", "new", "Error", "Invalid", "type", "input", "NUMBER", "type", "NUMBER", "now", "render", "the", "template", "template", "NUMBER", "render", "input", "out", "In", "summary", "I", "think", "this", "logic", "of", "choosing", "a", "template", "would", "be", "easier", "to", "read", "if", "the", "developer", "moved", "this", "logic", "to", "the", "renderer", "NUMBER", "I", "don", "t", "think", "there", "would", "be", "much", "benefit", "of", "implement", "this", "choosing", "logic", "in", "the", "template", "NUMBER", "Please", "let", "me", "know", "if", "you", "still", "don", "t", "think", "the", "solution", "from", "patrick", "steele", "idem", "or", "myself", "would", "help", "in", "your", "use", "case", "or", "if", "you", "be", "still", "looking", "for", "a", "more", "elegant", "solution", "NUMBER", "The", "meaning", "of", "render", "tag", "if", "be", "unclear", "since", "it", "could", "easily", "just", "be", "interpreted", "to", "be", "the", "same", "as", "if", "NUMBER", "That", "be", "render", "tag", "if", "doesn", "t", "make", "it", "clear", "that", "only", "the", "body", "will", "render", "if", "the", "condition", "evaluates", "to", "false", "NUMBER", "body", "only", "if", "makes", "it", "clear", "that", "only", "the", "body", "content", "will", "be", "rendered", "not", "the", "surrounding", "tag", "if", "the", "condition", "evaluates", "to", "true", "NUMBER", "Since", "body", "only", "if", "will", "rarely", "be", "use", "I", "m", "inclined", "to", "keep", "its", "usage", "as", "be", "NUMBER", "What", "do", "you", "think", "I", "didn", "t", "know", "about", "body", "only", "if", "until", "I", "saw", "this", "issue", "but", "after", "learning", "about", "it", "I", "would", "recommend", "keep", "body", "only", "if", "NUMBER", "For", "me", "the", "intention", "be", "to", "only", "render", "the", "body", "and", "less", "about", "only", "rendering", "the", "tag", "NUMBER", "Kind", "of", "confusing", "but", "I", "think", "it", "works", "pedramphp", "I", "agree", "with", "you", "that", "body", "only", "if", "feels", "a", "little", "backwards", "but", "I", "be", "not", "seeing", "a", "better", "name", "NUMBER", "Thank", "you", "for", "the", "suggestion", "but", "let", "s", "stick", "with", "body", "only", "if", "unless", "you", "have", "another", "idea", "on", "how", "this", "functionality", "could", "be", "provide", "in", "a", "less", "confusing", "way", "NUMBER", "Syntax", "highlight", "for", "Marko", "template", "in", "Sublime", "would", "be", "great", "NUMBER", "Personally", "I", "switched", "to", "from", "Sublime", "to", "Atom", "and", "be", "happier", "with", "Atom", "NUMBER", "I", "don", "t", "remember", "the", "exact", "method", "for", "creating", "a", "new", "language", "file", "for", "Sublime", "but", "here", "be", "the", "grammar", "file", "that", "I", "created", "for", "Atom", "LINK", "language", "marko", "blob", "master", "grammars", "marko", "NUMBER", "cson", "I", "m", "sure", "it", "be", "possible", "to", "write", "a", "tool", "that", "converts", "the", "Atom", "grammar", "into", "a", "Sublime", "grammar", "but", "it", "be", "not", "something", "that", "I", "have", "time", "to", "do", "right", "now", "NUMBER", "I", "think", "it", "would", "be", "great", "if", "someone", "from", "the", "community", "could", "contribute", "Sublime", "support", "NUMBER", "That", "s", "awesome", "merwan", "NUMBER", "thank", "you", "for", "the", "contribution", "Do", "you", "mind", "submit", "a", "PR", "to", "marko", "to", "add", "sublime", "marko", "to", "the", "Tools", "LINK", "js", "marko", "tool", "section", "in", "the", "marko", "README", "NUMBER", "md", "file", "Out", "of", "curiosity", "how", "did", "you", "go", "about", "converting", "the", "Atom", "grammar", "file", "to", "work", "for", "Sublime", "Was", "there", "an", "exist", "tool", "that", "you", "use", "Thanks", "again", "Just", "closing", "old", "issue", "NUMBER", "Syntax", "highlight", "in", "Sublime", "now", "works", "for", "Marko", "thanks", "to", "the", "PR", "submitted", "by", "merwan", "NUMBER", "that", "was", "merge", "LINK", "_control_channel", "pull", "NUMBER", "I", "have", "no", "objections", "to", "add", "support", "for", "NUMBER", "marko", "NUMBER", "html", "except", "that", "most", "editors", "only", "let", "you", "set", "file", "associates", "based", "on", "the", "last", "part", "NUMBER", "Therefore", "you", "would", "likely", "lose", "the", "ability", "to", "have", "custom", "syntax", "highlight", "for", "Marko", "template", "file", "and", "instead", "have", "to", "settle", "for", "HTML", "syntax", "highlight", "which", "be", "not", "too", "terrible", "I", "suppose", "NUMBER", "Please", "see", "my", "comment", "I", "add", "to", "your", "Pull", "Request", "and", "please", "make", "sure", "the", "test", "pass", "by", "run", "npm", "test", "NUMBER", "Thanks", "for", "sending", "the", "PR", "NUMBER", "New", "version", "publish", "marko", "NUMBER", "Thanks", "for", "the", "PR", "bkniffler", "NUMBER", "Updated", "code", "looks", "good", "NUMBER", "Yes", "you", "be", "correct", "NUMBER", "Sorry", "for", "the", "miss", "docs", "NUMBER", "I", "don", "t", "mind", "add", "the", "miss", "docs", "but", "Pull", "Requests", "be", "always", "welcome", "NUMBER", "Example", "html", "TAG", "_src", "components", "some", "component", "renderer", "NUMBER", "js", "_", "javascript", "module", "NUMBER", "export", "function", "render", "input", "out", "var", "message", "input", "NUMBER", "message", "Hello", "World", "template", "data", "be", "similar", "but", "it", "only", "works", "for", "include", "NUMBER", "Only", "one", "should", "be", "documented", "for", "consistency", "NUMBER", "FYI", "in", "Marko", "v", "NUMBER", "we", "be", "moving", "to", "the", "following", "syntax", "xml", "TAG", "TAG", "Will", "keep", "issue", "open", "because", "we", "still", "need", "to", "update", "the", "docs", "NUMBER", "Custom", "tags", "be", "resolve", "to", "a", "renderer", "module", "at", "compile", "time", "so", "it", "be", "not", "possible", "to", "support", "something", "like", "TAG", "NUMBER", "However", "a", "custom", "tag", "be", "mapped", "directly", "to", "a", "renderer", "and", "you", "can", "invoke", "the", "renderer", "directly", "to", "have", "the", "HTML", "be", "write", "to", "the", "output", "stream", "NUMBER", "One", "option", "be", "to", "create", "a", "custom", "tag", "that", "delegates", "rendering", "to", "the", "appropriate", "renderer", "based", "on", "some", "internal", "logic", "NUMBER", "Something", "like", "the", "following", "src", "components", "app", "test", "renderer", "NUMBER", "js", "javascript", "var", "rendererA", "require", "NUMBER", "variant", "A", "renderer", "var", "rendererB", "require", "NUMBER", "variant", "B", "renderer", "var", "rendererC", "require", "NUMBER", "variant", "C", "renderer", "module", "NUMBER", "export", "function", "render", "input", "out", "if", "input", "NUMBER", "type", "A", "rendererA", "input", "out", "else", "if", "input", "NUMBER", "type", "B", "rendererB", "input", "out", "else", "if", "input", "NUMBER", "type", "C", "rendererC", "input", "out", "This", "nice", "thing", "about", "that", "approach", "be", "that", "to", "the", "outside", "world", "there", "be", "only", "a", "single", "tag", "but", "internally", "the", "custom", "tag", "renderer", "can", "delegate", "to", "the", "appropriate", "implementation", "NUMBER", "Let", "us", "know", "if", "that", "works", "or", "doesn", "t", "work", "for", "you", "NUMBER", "ping", "NUMBER", "Can", "you", "please", "let", "me", "know", "if", "the", "propose", "solution", "meets", "your", "needs", "so", "that", "I", "can", "close", "this", "issue", "or", "keep", "it", "open", "Thanks", "NUMBER", "Hi", "mattfysh", "Marko", "will", "remove", "unnecessary", "whitespace", "based", "on", "some", "builtin", "rules", "by", "default", "NUMBER", "These", "rules", "be", "partially", "based", "on", "the", "rules", "that", "browser", "s", "use", "to", "normalize", "whitespace", "and", "partially", "based", "on", "the", "goal", "of", "allowing", "nicely", "indented", "markup", "NUMBER", "These", "rules", "be", "as", "follows", "For", "whitespace", "before", "the", "first", "child", "element", "text", "text", "NUMBER", "replace", "n", "s", "g", "For", "whitespace", "after", "the", "last", "child", "element", "text", "text", "NUMBER", "replace", "n", "s", "g", "For", "whitespace", "between", "child", "elements", "text", "text", "NUMBER", "replace", "n", "s", "g", "Any", "contiguous", "sequence", "of", "whitespace", "characters", "be", "collapsed", "into", "a", "single", "whitespace", "character", "FYI", "the", "whitespace", "removal", "happens", "in", "the", "following", "code", "marko", "compiler", "TextNode", "NUMBER", "js", "NUMBER", "LINK", "L", "NUMBER", "L", "NUMBER", "It", "s", "possible", "to", "disable", "whitespace", "removal", "on", "a", "per", "element", "basis", "use", "a", "special", "attribute", "applied", "to", "a", "parent", "element", "NUMBER", "It", "s", "also", "possible", "to", "disable", "all", "whitespace", "removal", "by", "change", "an", "option", "for", "the", "compiler", "NUMBER", "Unfortunately", "the", "docs", "be", "currently", "lacking", "for", "both", "these", "options", "so", "I", "ll", "describe", "them", "below", "for", "now", "Option", "NUMBER", "Disable", "whitespace", "removal", "use", "the", "c", "whitespace", "attribute", "html", "TAG", "TAG", "TAG", "TAG", "Option", "NUMBER", "Disable", "all", "whitespace", "removal", "by", "change", "a", "compiler", "option", "javascript", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "preserveWhitespace", "true", "Also", "you", "can", "avoid", "whitespace", "removal", "by", "avoiding", "the", "new", "line", "character", "NUMBER", "For", "example", "the", "following", "whitespace", "between", "the", "elements", "will", "be", "preserved", "html", "TAG", "TAG", "I", "ll", "work", "on", "add", "some", "formal", "documentation", "on", "the", "whitespace", "removal", "rules", "NUMBER", "Do", "these", "options", "meet", "your", "needs", "or", "be", "you", "looking", "for", "a", "different", "solution", "mattfysh", "I", "add", "some", "documentation", "to", "clarify", "how", "Marko", "deals", "with", "whitespace", "LINK", "whitespace", "Please", "let", "me", "know", "what", "you", "think", "NUMBER", "Thanks", "Patrick", "Perhaps", "we", "should", "add", "a", "tag", "that", "can", "be", "use", "to", "enable", "preservation", "of", "whitespace", "NUMBER", "For", "example", "something", "like", "this", "xml", "TAG", "TAG", "TAG", "TAG", "Sometimes", "there", "isn", "t", "a", "convenient", "parent", "tag", "to", "add", "the", "c", "whitespace", "preserve", "attribute", "I", "agree", "regard", "introduce", "a", "TAG", "tag", "NUMBER", "I", "have", "add", "Issue", "NUMBER", "to", "the", "backlog", "NUMBER", "Marking", "issue", "as", "close", "since", "additional", "docs", "were", "add", "clarifying", "the", "whitespace", "rules", "for", "Marko", "NUMBER", "If", "there", "be", "still", "issue", "please", "let", "us", "know", "NUMBER", "Thanks", "NUMBER", "From", "looking", "at", "the", "code", "it", "do", "look", "like", "the", "taglib", "loading", "relies", "on", "a", "path", "to", "json", "file", "NUMBER", "I", "ll", "investigate", "make", "change", "to", "allow", "loading", "a", "taglib", "from", "object", "in", "memory", "NUMBER", "Just", "to", "elaborate", "on", "philidem", "comments", "and", "this", "may", "be", "more", "information", "than", "you", "need", "we", "only", "want", "to", "support", "declarative", "registration", "of", "custom", "tags", "for", "the", "following", "reasons", "NUMBER", "Tags", "need", "to", "be", "discover", "at", "compile", "time", "the", "template", "compile", "differently", "based", "on", "the", "set", "of", "know", "tags", "and", "the", "tags", "need", "to", "be", "available", "at", "runtime", "which", "may", "be", "on", "the", "server", "or", "the", "client", "and", "it", "would", "be", "awkward", "to", "have", "to", "register", "custom", "tags", "in", "both", "places", "NUMBER", "NUMBER", "The", "markoc", "command", "line", "compiler", "should", "to", "be", "able", "to", "compile", "template", "without", "run", "any", "user", "JS", "code", "that", "be", "tags", "need", "to", "be", "discover", "based", "on", "a", "declarative", "mechanism", "NUMBER", "There", "be", "no", "single", "lookup", "for", "all", "tags", "and", "custom", "tags", "be", "discover", "relative", "to", "a", "template", "s", "location", "on", "disk", "NUMBER", "Among", "other", "things", "this", "allows", "install", "modules", "to", "have", "their", "own", "custom", "tags", "that", "would", "not", "pollute", "the", "parent", "application", "NUMBER", "NUMBER", "Templates", "be", "compiled", "such", "that", "custom", "tag", "renderers", "be", "require", "d", "and", "this", "allows", "client", "side", "JavaScript", "module", "bundlers", "to", "automatically", "include", "only", "the", "tags", "that", "be", "needed", "by", "a", "compiled", "template", "module", "I", "can", "t", "think", "of", "any", "reason", "that", "you", "would", "need", "to", "programmatically", "register", "new", "tags", "at", "runtime", "but", "if", "you", "share", "more", "details", "about", "your", "use", "case", "then", "maybe", "I", "can", "offer", "better", "help", "NUMBER", "Thanks", "for", "the", "feedback", "NUMBER", "Let", "us", "know", "if", "you", "have", "any", "more", "question", "NUMBER", "Also", "if", "you", "have", "ideas", "on", "how", "we", "can", "improve", "how", "tags", "be", "registered", "then", "please", "feel", "free", "to", "share", "but", "there", "be", "a", "requirement", "that", "it", "needs", "to", "be", "declarative", "for", "the", "reasons", "above", "NUMBER", "I", "did", "investigate", "this", "and", "I", "came", "to", "the", "same", "conclusion", "as", "Patrick", "NUMBER", "I", "think", "it", "would", "have", "technically", "be", "possible", "to", "support", "the", "definition", "of", "tags", "through", "a", "code", "change", "but", "this", "goes", "in", "the", "opposite", "direction", "of", "modularizing", "tags", "and", "the", "components", "that", "use", "them", "NUMBER", "The", "discovery", "mechanism", "for", "finding", "tags", "be", "an", "important", "feature", "of", "Marko", "that", "allows", "tags", "components", "to", "be", "shared", "without", "having", "to", "require", "users", "to", "manually", "register", "tags", "NUMBER", "For", "this", "reason", "I", "would", "discourage", "manually", "registering", "tags", "and", "instead", "rely", "on", "the", "discovery", "of", "tags", "from", "marko", "taglib", "NUMBER", "json", "and", "marko", "tag", "NUMBER", "json", "file", "NUMBER", "I", "would", "also", "like", "to", "know", "if", "relying", "on", "these", "file", "prevents", "your", "project", "from", "use", "Marko", "effectively", "NUMBER", "On", "the", "server", "side", "the", "template", "utilize", "the", "NodeJS", "module", "loader", "so", "that", "code", "in", "the", "template", "can", "leverage", "require", "just", "like", "any", "other", "CommonJS", "module", "NUMBER", "In", "order", "to", "allow", "requiring", "modules", "via", "relative", "path", "the", "template", "module", "itself", "needs", "to", "have", "a", "path", "which", "be", "why", "it", "be", "write", "to", "disk", "NUMBER", "Also", "the", "copy", "that", "be", "write", "to", "disk", "be", "use", "for", "the", "up", "to", "date", "check", "NUMBER", "I", "wonder", "if", "there", "be", "some", "hackery", "that", "we", "could", "do", "to", "fake", "module", "loading", "of", "in", "memory", "code", "and", "make", "it", "think", "it", "be", "at", "a", "specific", "path", "NUMBER", "A", "while", "ago", "for", "development", "in", "NodeJS", "I", "tried", "to", "use", "a", "technique", "of", "strategically", "remove", "modules", "from", "the", "cache", "but", "this", "cause", "a", "lot", "of", "inconsistencies", "and", "I", "eventually", "decided", "to", "just", "restart", "the", "app", "I", "was", "really", "hoping", "to", "find", "a", "solution", "that", "clears", "the", "cache", "NUMBER", "NUMBER", "Perhaps", "you", "should", "consider", "the", "route", "of", "restarting", "the", "app", "when", "a", "source", "file", "change", "The", "fact", "that", "Marko", "writes", "the", "compiled", "template", "to", "disk", "in", "order", "to", "load", "them", "has", "very", "little", "to", "do", "with", "preventing", "change", "to", "a", "template", "from", "be", "reflected", "without", "a", "restart", "NUMBER", "In", "fact", "in", "the", "earlier", "version", "the", "loader", "did", "not", "write", "the", "compiled", "source", "to", "disk", "and", "instead", "use", "Node", "NUMBER", "js", "internals", "to", "load", "the", "compiled", "module", "directly", "from", "a", "source", "String", "see", "LINK", "beta", "runtime", "lib", "loader", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "NUMBER", "In", "case", "you", "be", "curious", "the", "reason", "we", "switched", "to", "loading", "compiled", "template", "from", "disk", "be", "so", "that", "stack", "traces", "would", "be", "accurate", "and", "it", "also", "makes", "debugging", "much", "easier", "for", "developers", "compiled", "template", "can", "be", "debugged", "just", "like", "any", "other", "loaded", "JavaScript", "modules", "NUMBER", "What", "prevents", "change", "to", "a", "template", "from", "be", "immediately", "reflected", "be", "the", "fact", "that", "once", "the", "template", "be", "loaded", "there", "be", "no", "checks", "at", "each", "render", "call", "to", "verify", "if", "the", "template", "be", "up", "to", "date", "and", "there", "be", "no", "file", "watching", "service", "to", "invalidate", "loaded", "template", "NUMBER", "Both", "of", "these", "approaches", "would", "add", "overhead", "and", "bring", "in", "additional", "dependencies", "NUMBER", "With", "Marko", "template", "be", "typically", "loaded", "once", "when", "a", "parent", "module", "be", "first", "required", "and", "loaded", "template", "only", "hold", "a", "reference", "to", "the", "JavaScript", "render", "function", "and", "nothing", "else", "NUMBER", "The", "only", "cache", "be", "the", "Node", "NUMBER", "js", "module", "cache", "and", "the", "template", "be", "typically", "referenced", "as", "part", "of", "the", "closure", "of", "another", "function", "NUMBER", "To", "reload", "a", "template", "without", "a", "restart", "you", "would", "need", "to", "delete", "the", "template", "module", "from", "the", "require", "NUMBER", "cache", "and", "you", "would", "need", "to", "call", "load", "again", "for", "all", "of", "the", "template", "that", "were", "modify", "NUMBER", "With", "that", "said", "it", "s", "obviously", "very", "important", "for", "template", "change", "to", "be", "reflected", "immediately", "NUMBER", "Otherwise", "use", "Marko", "would", "be", "extremely", "painful", "NUMBER", "At", "eBay", "we", "have", "had", "a", "lot", "of", "success", "with", "use", "the", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "module", "to", "automatically", "restart", "the", "server", "whenever", "file", "be", "modify", "and", "the", "browser", "refresh", "module", "starts", "a", "Web", "Sockets", "server", "to", "tell", "web", "browser", "pages", "to", "reload", "NUMBER", "This", "works", "for", "all", "types", "of", "resources", "CSS", "Less", "Stylus", "JavaScript", "Marko", "template", "Dust", "template", "etc", "NUMBER", "and", "it", "ensures", "that", "the", "application", "be", "always", "in", "a", "good", "state", "since", "we", "don", "t", "have", "to", "worry", "about", "messing", "with", "Node", "NUMBER", "js", "internals", "to", "hot", "reload", "modules", "NUMBER", "As", "long", "as", "the", "server", "restarts", "quickly", "and", "it", "should", "then", "this", "makes", "development", "very", "productive", "NUMBER", "Also", "with", "the", "browser", "refresh", "module", "you", "don", "t", "have", "to", "change", "how", "you", "structure", "your", "application", "at", "all", "NUMBER", "When", "you", "want", "to", "use", "the", "browser", "refresh", "module", "then", "you", "simply", "use", "the", "browser", "refresh", "CLI", "to", "run", "the", "Node", "NUMBER", "js", "process", "otherwise", "you", "just", "use", "the", "standard", "node", "executable", "NUMBER", "If", "you", "want", "to", "try", "out", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "with", "a", "real", "app", "that", "uses", "Marko", "please", "check", "out", "the", "sample", "weather", "LINK", "samples", "tree", "master", "weather", "app", "NUMBER", "If", "you", "really", "don", "t", "want", "to", "rely", "on", "server", "restarts", "then", "you", "could", "monkey", "patch", "the", "loader", "that", "marko", "uses", "to", "add", "additional", "hooks", "to", "reload", "modify", "template", "NUMBER", "Perhaps", "something", "like", "the", "following", "javascript", "require", "marko", "hot", "reload", "NUMBER", "enable", "require", "marko", "Internally", "marko", "hot", "reload", "module", "could", "use", "chokidar", "LINK", "to", "detect", "change", "to", "Marko", "template", "and", "loaded", "template", "would", "need", "to", "have", "additional", "code", "that", "runs", "before", "each", "render", "call", "to", "see", "if", "the", "loaded", "template", "be", "still", "up", "to", "date", "NUMBER", "I", "would", "advise", "against", "going", "that", "route", "and", "to", "use", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "instead", "but", "there", "be", "definitely", "options", "NUMBER", "If", "you", "have", "any", "thoughts", "please", "let", "me", "know", "NUMBER", "We", "could", "make", "it", "an", "option", "to", "disable", "write", "a", "compiled", "template", "to", "disk", "but", "write", "the", "compiled", "template", "to", "disk", "also", "provides", "the", "benefit", "that", "the", "template", "do", "not", "need", "to", "be", "recompiled", "if", "the", "server", "be", "restarted", "which", "be", "kind", "of", "nice", "NUMBER", "I", "agree", "that", "the", "extra", "noise", "of", "additional", "file", "be", "kind", "of", "annoying", "but", "it", "s", "a", "tradeoff", "NUMBER", "Atom", "will", "at", "least", "grey", "out", "file", "that", "be", "NUMBER", "gitignored", "with", "the", "option", "to", "hide", "the", "completely", "NUMBER", "Regardless", "of", "if", "a", "template", "be", "write", "to", "disk", "or", "not", "the", "resulting", "module", "still", "needs", "to", "be", "loaded", "through", "the", "Node", "NUMBER", "js", "module", "loader", "NUMBER", "Since", "a", "compiled", "template", "be", "loaded", "through", "the", "Node", "NUMBER", "js", "module", "loader", "you", "would", "still", "need", "to", "clear", "the", "module", "from", "the", "require", "NUMBER", "cache", "in", "order", "for", "the", "template", "to", "be", "reloaded", "compiled", "Marko", "template", "rely", "heavily", "on", "the", "require", "function", "so", "they", "have", "to", "go", "through", "the", "Node", "NUMBER", "js", "module", "loader", "NUMBER", "Please", "give", "browser", "refresh", "LINK", "steele", "idem", "browser", "refresh", "a", "try", "and", "let", "us", "know", "if", "that", "doesn", "t", "work", "out", "for", "you", "NUMBER", "If", "you", "were", "interested", "in", "make", "write", "a", "compiled", "to", "disk", "optional", "then", "I", "would", "consider", "a", "pull", "request", "since", "I", "think", "that", "be", "a", "harmless", "feature", "NUMBER", "Also", "I", "be", "not", "oppose", "to", "a", "separate", "module", "enabling", "hot", "reloading", "of", "Marko", "template", "but", "I", "would", "rather", "not", "pollute", "the", "core", "marko", "module", "with", "that", "functionality", "NUMBER", "I", "m", "going", "to", "go", "ahead", "and", "close", "this", "issue", "unless", "you", "still", "think", "there", "needs", "to", "be", "something", "do", "NUMBER", "I", "decided", "to", "reopen", "this", "issue", "NUMBER", "After", "giving", "it", "some", "thought", "I", "came", "up", "with", "a", "clean", "way", "to", "enable", "template", "reloading", "without", "requiring", "a", "full", "server", "restart", "NUMBER", "I", "m", "work", "on", "the", "solution", "now", "NUMBER", "I", "have", "completed", "the", "work", "to", "add", "support", "for", "Marko", "template", "hot", "reloading", "NUMBER", "Usage", "javascript", "require", "marko", "hot", "reload", "NUMBER", "enable", "require", "fs", "NUMBER", "watch", "somedir", "function", "event", "filename", "if", "NUMBER", "marko", "NUMBER", "test", "filename", "require", "marko", "hot", "reload", "NUMBER", "handleFileModified", "filename", "If", "hot", "reloading", "be", "enable", "which", "should", "only", "be", "do", "in", "development", "the", "loaded", "template", "be", "monkey", "patched", "to", "detect", "file", "change", "NUMBER", "If", "a", "Marko", "relate", "file", "be", "modify", "then", "the", "appropriate", "caches", "be", "cleared", "out", "so", "that", "template", "be", "correctly", "reloaded", "NUMBER", "Marko", "still", "depends", "on", "an", "external", "file", "watching", "service", "to", "detect", "file", "modifications", "NUMBER", "That", "be", "Marko", "do", "_not_", "start", "its", "own", "file", "watching", "service", "to", "detect", "change", "to", "NUMBER", "marko", "file", "NUMBER", "I", "add", "browser", "refresh", "integration", "NUMBER", "If", "browser", "refresh", "be", "use", "to", "start", "your", "app", "then", "it", "be", "already", "starting", "a", "file", "watching", "service", "and", "the", "marko", "module", "can", "be", "notified", "by", "the", "browser", "refresh", "module", "when", "a", "file", "be", "modify", "via", "inter", "process", "communication", "NUMBER", "To", "enable", "hot", "reloading", "_and_", "browser", "refresh", "integration", "the", "following", "code", "should", "be", "use", "javascript", "require", "marko", "browser", "refresh", "NUMBER", "enable", "NOTE", "If", "the", "app", "was", "_not_", "start", "use", "browser", "refresh", "then", "the", "above", "code", "will", "be", "a", "no", "op", "NUMBER", "For", "more", "details", "please", "see", "LINK", "steele", "idem", "browser", "refresh", "controlling", "reloading", "I", "ll", "try", "to", "reproduce", "and", "get", "back", "to", "you", "NUMBER", "On", "a", "relate", "note", "I", "recommend", "doing", "the", "following", "javascript", "var", "formulaTemplate", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "web", "marko", "formula", "NUMBER", "marko", "app", "NUMBER", "get", "formula", "function", "req", "res", "formulaTemplate", "NUMBER", "render", "res", "The", "stream", "method", "will", "unnecessarily", "produce", "an", "intermediate", "stream", "when", "it", "be", "more", "efficient", "to", "write", "to", "the", "exist", "res", "stream", "NUMBER", "Solido", "I", "was", "not", "able", "to", "reproduce", "even", "after", "installing", "io", "NUMBER", "js", "v", "NUMBER", "NUMBER", "What", "version", "of", "express", "and", "marko", "be", "you", "use", "NUMBER", "Do", "you", "have", "a", "simplified", "project", "that", "I", "could", "try", "Hi", "Solido", "I", "ll", "try", "to", "answer", "your", "question", "below", "but", "I", "recommend", "joining", "the", "Marko", "Gitter", "chat", "room", "for", "more", "realtime", "help", "LINK", "Gitter", "provides", "great", "desktop", "and", "mobile", "apps", "NUMBER", "Definitely", "recommend", "checking", "it", "out", "NUMBER", "TAG", "With", "Marko", "you", "must", "explicitly", "pass", "along", "any", "required", "data", "to", "the", "other", "template", "NUMBER", "Each", "template", "gets", "its", "own", "data", "variable", "NUMBER", "You", "didn", "t", "share", "all", "of", "your", "code", "but", "if", "you", "be", "use", "the", "TAG", "tag", "then", "you", "can", "just", "pass", "along", "any", "data", "to", "the", "target", "template", "by", "doing", "something", "similar", "to", "the", "following", "html", "TAG", "TAG", "TAG", "The", "target", "layout", "template", "can", "then", "access", "the", "data", "as", "shown", "below", "_path", "to", "some", "layout", "NUMBER", "marko", "_", "html", "TAG", "data", "NUMBER", "someData", "TAG", "Output", "html", "TAG", "foo", "TAG", "There", "s", "also", "a", "feature", "to", "support", "global", "data", "that", "be", "automatically", "made", "available", "to", "all", "template", "NUMBER", "This", "feature", "be", "support", "but", "it", "needs", "to", "be", "documented", "NUMBER", "The", "usage", "be", "shown", "below", "javascript", "var", "template", "require", "marko", "NUMBER", "load", "template", "NUMBER", "marko", "template", "NUMBER", "render", "global", "global", "be", "special", "someData", "foo", "You", "can", "then", "access", "that", "data", "in", "any", "of", "your", "template", "use", "out", "NUMBER", "global", "html", "TAG", "out", "NUMBER", "global", "NUMBER", "someData", "TAG", "Great", "NUMBER", "Thank", "you", "for", "the", "corrections", "NUMBER"], "text_count": [0, 34939, 8032, 4077, 2049, 615, 2946, 6, 122, 3953, 5484, 8816, 5733, 3025, 3866, 1361, 0, 0, 0, 0, 10812, 3057, 1714, 854, 1897, 1706, 0, 0, 0, 0, 19689, 12714, 7165, 383, 3843, 1355, 0, 0, 0, 0, 24367, 277, 9664, 8287, 6732, 0, 0, 0, 0, 0, 6669, 2576, 3563, 2339, 2644, 1179, 2596, 0, 0, 0, 18400, 1421, 15113, 925, 0, 0, 0, 0, 0, 0, 13537, 1771, 9622, 3828, 1313, 0, 0, 0, 0, 0, 23303, 10620, 2157, 9736, 1347, 828, 0, 0, 0, 0, 1150, 7311, 998, 0, 0, 0, 0, 0, 0, 0, 19174, 3505, 11680, 4271, 0, 0, 0, 0, 0, 0, 37517, 72945, 1437, 4063, 1502, 1035, 0, 0, 0, 0, 96947, 361, 72599, 791, 15432, 21942]}, {"repo": "marko", "type": "nonelite", "title": "", "number of text": 1185, "text": "  Fix up dangling backtick.\r\n\r\nInclude missing code snippet.\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [ ] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [ ] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11773032/badge)](https://coveralls.io/builds/11773032)\n\nCoverage remained the same at 89.518% when pulling **fe094a4cc22123f010b1dde482209784b663a6c1 on newyork-anthonyng:feature/an/fix-marko-vs-react-docs** into **37e3dcc4f5a9a3b1628e6dfe5ca3875c57ee75f4 on marko-js:master**.\n  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\nAdd silent option to browser-refresh and hot-reload.\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\nhttps://github.com/marko-js/marko/issues/709\r\n## Screenshots (if appropriate):\r\nN/A\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [ ] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [ ] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11770843/badge)](https://coveralls.io/builds/11770843)\n\nCoverage decreased (-0.005%) to 89.518% when pulling **218050114bf778c14dfda18fe4c830b800201fef on nahtnam:silent** into **deb95bb48fdcba68de93a029c6975b8ce04c75b9 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/11770843/badge)](https://coveralls.io/builds/11770843)\n\nCoverage decreased (-0.005%) to 89.518% when pulling **218050114bf778c14dfda18fe4c830b800201fef on nahtnam:silent** into **deb95bb48fdcba68de93a029c6975b8ce04c75b9 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/11770843/badge)](https://coveralls.io/builds/11770843)\n\nCoverage decreased (-0.005%) to 89.518% when pulling **218050114bf778c14dfda18fe4c830b800201fef on nahtnam:silent** into **deb95bb48fdcba68de93a029c6975b8ce04c75b9 on marko-js:master**.\n  <!----------------------------------------------------------------------\r\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\r\n  ---------------------------------------------------------------------->\r\n## New Feature\r\nAdd an option (`quiet`, or `silent`) that will stop console outputs.\r\n### Description\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\nAdd the option somewhere like: `require('marko/browser-refresh').enable({ quiet: true });`, that will stop console.logs like the following from being printed.\r\n```\r\n[marko/hot-reload] File modified: /Users/nahtnam/Desktop/testing/app/templates/hello/index.marko\r\n```\r\n### Context\r\n<!--- Why is this change important to you? How would you use it? -->\r\n<!--- How can it benefit other users? -->\r\nI am working on a site and my console output every time my server restarts is bloated. To reduce clutter it would be great to have a quiet option that would only print if there is an error or warning.\r\n### Possible Implementation\r\nN/A\r\n### Open Questions\r\nN/A\r\n### Is this something you're interested in working on?\r\nNo I could try, but someone would have to go over the code since I have almost no experience with Marko.\r\n\r\nEDIT: Is the main branch master, or something else? I cant find a contributors guide. @patrick-steele-idem @austinkelleher Thanks for your comments. I think I know how to do it. My only question is:\r\n\r\nHere: https://github.com/nahtnam/marko/blob/master/src/hot-reload.js#L38 I will add a `option` parameter which will check is `silent` is defined (defaults to false). Do I add that option to the `runtime` variable so the silent option can be accessed in the other functions? I still need to finish the checklist but its a start.  \n[![Coverage Status](https://coveralls.io/builds/11767095/badge)](https://coveralls.io/builds/11767095)\n\nCoverage increased (+0.004%) to 89.527% when pulling **f73c2364d53375ba8931d4fc0a53bd97c0e54fba on 705-dynamic-root-id-attr** into **fe60da9c111ae60613e567ab957b47e9b77cebea on master**.\n \n[![Coverage Status](https://coveralls.io/builds/11769889/badge)](https://coveralls.io/builds/11769889)\n\nCoverage increased (+0.03%) to 89.558% when pulling **4e6d1fc4cf71227eb0b049e8d0711f37f86e594d on 705-dynamic-root-id-attr** into **fe60da9c111ae60613e567ab957b47e9b77cebea on master**.\n \n[![Coverage Status](https://coveralls.io/builds/11769889/badge)](https://coveralls.io/builds/11769889)\n\nCoverage decreased (-0.01%) to 89.509% when pulling **4e6d1fc4cf71227eb0b049e8d0711f37f86e594d on 705-dynamic-root-id-attr** into **fe60da9c111ae60613e567ab957b47e9b77cebea on master**.\n  Closes #706.\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [ ] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [X] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11754177/badge)](https://coveralls.io/builds/11754177)\n\nCoverage remained the same at 89.524% when pulling **1b67ac33214058bb524ac4bcd8348c48a62b589b on newyork-anthonyng:feature/an/fix-webpack-readme** into **9e334a8986c9f3752bf5ec37e23e163887adf851 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/11754177/badge)](https://coveralls.io/builds/11754177)\n\nCoverage remained the same at 89.524% when pulling **1b67ac33214058bb524ac4bcd8348c48a62b589b on newyork-anthonyng:feature/an/fix-webpack-readme** into **9e334a8986c9f3752bf5ec37e23e163887adf851 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/11754177/badge)](https://coveralls.io/builds/11754177)\n\nCoverage remained the same at 89.524% when pulling **1b67ac33214058bb524ac4bcd8348c48a62b589b on newyork-anthonyng:feature/an/fix-webpack-readme** into **9e334a8986c9f3752bf5ec37e23e163887adf851 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/11754177/badge)](https://coveralls.io/builds/11754177)\n\nCoverage remained the same at 89.524% when pulling **1b67ac33214058bb524ac4bcd8348c48a62b589b on newyork-anthonyng:feature/an/fix-webpack-readme** into **9e334a8986c9f3752bf5ec37e23e163887adf851 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/11754565/badge)](https://coveralls.io/builds/11754565)\n\nCoverage remained the same at 89.524% when pulling **71416584f1a494f039ef07b076d8e7b20cbbf01f on newyork-anthonyng:feature/an/fix-webpack-readme** into **9e334a8986c9f3752bf5ec37e23e163887adf851 on marko-js:master**.\n  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\nTypo inside the `webpack` markdown file.\r\n\r\n### Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug.  How has this bug affected you? What were you trying to accomplish? -->\r\n```html\r\n<!doctype html>\r\n<html>\r\n<body>\r\n    <script src=\"static/bundle.js\"/>\r\n</body>\r\n</html>\r\n```\r\nAs far as I know, the `<script>` tag cannot be self-closing, and should be changed to:\r\n```html\r\n<script src=\"static/bundle.js\"></script>\r\n```\r\nI can make a PR to fix this if this makes sense.\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n### Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used:\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4):\r\n* Operating System and version (desktop or mobile):\r\n* Link to your project:\r\n\r\n### Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. \r\n2. \r\n3. \r\n4. \r\n\r\n### Stack Trace\r\n<!-- If an error is thrown, provide the stack trace here -->\r\n\r\n</details>\r\n @patrick-steele-idem Awesome. I'm starting to dig into Marko and was assuming that it supported self-closing script tags.\r\n\r\nI created a new [PR](https://github.com/marko-js/marko/pull/707) to address this. Let me know if anything else is needed.  ## Bug Report\r\n\r\n### Context\r\ncomponent state is out of scope inside the include tag\r\n\r\n### Expected Behavior\r\npass state variable to included template\r\n\r\n### Actual Behavior\r\nstate is undefined\r\n\r\n### Steps to Reproduce\r\nI have a component something like\r\n\r\n```marko\r\nclass {\r\n  onCreate() {\r\n    this.state = { id: 1}\r\n  }\r\n}\r\n\r\n//works fine\r\n< input id=state.id  />\r\n\r\n//state is undefined\r\n<include(/path/to/generic/input, {id: state.id}) />\r\n<include(/path/to/generic/input) id=state.id />\r\n```\r\n\r\n### Stack Trace\r\n```\r\nUncaught ReferenceError: state is not defined\r\n    at render (index.marko:40)\r\n    at safeRender (renderable.js:6)\r\n    at Template.render (renderable.js:136)\r\n    at doInclude (include-tag.js:17)\r\n    at includeTag (include-tag.js:30)\r\n    at render (index.marko:45)\r\n    at Template.renderSync (renderable.js:69)\r\n    at Object.<anonymous> (index-desktop.marko.js:12)\r\n    at __webpack_require__ (bootstrap e38ec24\u2026:19)\r\n    at Object.<anonymous> (emitter.js:2)\r\n``` That's great, worked straight away. Thanks for the quick response. The space after the input was a typo. Will avoid using id in the future :)  Seems to be related with #702 as error is the same staying at `4.4.2` solves the problem Installing `4.4.5` works fine for me with `npm@5`. Can't reproduce that on node 8 with NPM5 and `4.4.6`, so, it was either my misconfiguration or something already fixed. Will close the issue, thank you!  everything worked fine up until upgrading to marko 4.4.0, when building with webpack, this error cropped up\r\n`var markoCompiler = !(function webpackMissingModule() { var e = new Error(\"Cannot find module \\\".\\\"\"); e.code = 'MODULE_NOT_FOUND'; throw e; }());`\r\nDowngrading to marko 4.3.1 could fix the problem.\r\nWhat's wrong? please! I added a github project to reproduce the problem\r\nhttps://github.com/arthurchenn/markoissue702  Documentation is not proper , We are developing Progressive Web App .  we need client side Routing Mechanism like Iron Router or react Router and Ember Routing  .  Check out https://github.com/marko-js/marko/issues/645 Hey @mauricionr  , Marko 4.*\r\nWe have developed webiste and mobile website using Marko 3.* and Marko Widget . Can you suggest We want to upgrade to Marko 4 . Like Marko start providing state  in Marko 4 . Please suggest me regarding this  @gilbert  @patrick-steele-idem  : Can you suggest me  for Marko 4  , We are using marko 3.3 and marko widget . I want to upgrade for marko 4 . In Marko 4 u r proving state View architecture , We can eliminate Marko Widgets ?  @anupdineout this issue https://github.com/marko-js/marko/issues/626 has good stuff about markov3 and markov4 @patrick-steele-idem  any suggestion for Progressive Web app in Marko Js for Mobile website . Can you provide any documenation  or git demo project . i'm following lighthouse 2.0 for best practices on PWA\r\n\r\n`npm install -g lighthouse` I dont know , @patrick-steele-idem  , https://github.com/FormidableLabs/redux-little-router  does not provide support for MarkoJS have you seen this one @anupdineout https://github.com/charlieduong94/marko-path-router ? @mauricionr  @patrick-steele-idem  Can you help me to use es6 in MarkoJS 4.  @mauricionr  @patrick-steele-idem  \r\n\r\nhttps://github.com/charlieduong94/marko-path-router ?\r\nI checked this , its not working for me  . I need Client Side routing , otherwise , I need to switch the Technology from Marko4 to React . Please Suggest  Why is not working for you? Hello @anupdineout, I would be happy to help you get `marko-path-router` set up. Please create an issue on my repo detailing the problems you are having so that we can work through them together. @charlieduong94  Thanks for reverting back . Thats was some issue with KOA Aysnc setup . Now working for me   \u2026ayground\" does not contain lasso\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [ ] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [ ] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11658451/badge)](https://coveralls.io/builds/11658451)\n\nCoverage increased (+0.4%) to 89.824% when pulling **be03de928ebdf7bcbb390e29b2f3832285de847d on tindli:patch-2** into **a1e6310f08c5816e98c831863bbe8d7cb08bdf8b on marko-js:master**.\n  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [ ] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [ ] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11658199/badge)](https://coveralls.io/builds/11658199)\n\nCoverage remained the same at 89.468% when pulling **3a1580d5a6473906c26bc329590627aab065e609 on tindli:patch-1** into **1551993272726fbf2edd35eb20845a63954f902d on marko-js:master**.\n  \n[![Coverage Status](https://coveralls.io/builds/11611428/badge)](https://coveralls.io/builds/11611428)\n\nCoverage decreased (-0.7%) to 89.496% when pulling **2d0d8000cb9fd577f1eb81932799d6691c369613 on dist-dir** into **3d757a20f39bcb4dc5ae48b4b0d7ed7288e4c407 on master**.\n \ud83d\udc4d\ud83c\udffb  \n[![Coverage Status](https://coveralls.io/builds/11594315/badge)](https://coveralls.io/builds/11594315)\n\nCoverage increased (+0.004%) to 90.21% when pulling **4cf05973a593210fefa30bc863371ae4ce214ab9 on 695-xml-unrecognized-tags** into **3d757a20f39bcb4dc5ae48b4b0d7ed7288e4c407 on master**.\n \n[![Coverage Status](https://coveralls.io/builds/11594315/badge)](https://coveralls.io/builds/11594315)\n\nCoverage increased (+0.004%) to 90.21% when pulling **4cf05973a593210fefa30bc863371ae4ce214ab9 on 695-xml-unrecognized-tags** into **3d757a20f39bcb4dc5ae48b4b0d7ed7288e4c407 on master**.\n   \r\n<!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\nenable res.marko can catch a error safe\r\nuse like \r\n```javascript\r\nres.marko(..).catch((err) => {\r\n  next(err);\r\n})\r\n```\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\nenable res.marko can catch a error safe\r\nsee issue #692\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [ ] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11540128/badge)](https://coveralls.io/builds/11540128)\n\nCoverage remained the same at 90.206% when pulling **6fff9dea1dca773c37fa52e0b3bb1009fd48b827 on moonrailgun:patch-1** into **c648b764f203d0c0284470d6267dfd9864a004f5 on marko-js:master**.\n my pleasure  I actually started encountering this today and have provided an example:\r\n\r\nhttps://github.com/ianvonholt/marko-widget-test/tree/4.4.2\r\n\r\nIt seems that the onMount of child components is not being executed at all, nor are events being assigned. \r\n\r\nIf the parent component has no component logic, no `module.exports` or `class {}`, then it works just fine. \r\n\r\nI provided two examples one with the class logic, one without.  \r\n\r\n I've sat on this one for a couple days and I have to say that I have no definitive conclusion on my stance with this. I understand the performance gains with only having the input/state for the top-level UI component serialized down to the browser. However, this method makes the combination of components rather lacking. \r\n\r\nWith the current behavior in `marko@4.3+`, each instance where a developer is going to want nested components to be different for every page will fail to fully boot. Unless, that is, the developer explicitly creates different variations of the parent component with the desired top level UI components, or the component is utilized just as a template. The former bloats the number of components while the latter would remove any sort of logic you may want to apply to the parent component.  @patrick-steele-idem I was just looking through the commit log, looks wonderful. \r\n\r\nI'll run it through some tests on my end and let you know if there are any problems.   I am using vue.js at the moment and am interested in Marko. They are very similar and make it easy to transition one to the other. The one thing noticed is Marko is missing \"scoped\" but that's for another discussion. No one?   ### Question\r\n\r\nThank you so much for making components take reference in the latest beta version! But it seems like it only takes references from marko template (static). If I want to pass function reference from `component.js` down to child component, the child component still not able to receive the reference. I'm not sure if I'm using it correctly or not. Could you share some working demos to demonstrate passing reference from `component.js` down please? Thanks again! Hi @patrick-steele-idem, thanks for the response. \r\n\r\nI was not able to reproduce this time, maybe I didn't use it correctly that time. But I did encounter a different problem. The references passed down does not able to recgonize the correct execution context. \r\n\r\n/test-component/index.marko\r\n```html\r\n<test-inner-component handler=component.handler />\r\n```\r\n\r\n/test-component/component.js\r\n```javascript\r\nmodule.exports = {\r\n  onCreate () {\r\n    this.value = 'value'\r\n  },\r\n  handler () {\r\n    return this.value // or do anything with the current controller context\r\n  }\r\n}\r\n\r\n```\r\n\r\n/test-inner-component/index.marko\r\n```html\r\n<div>\r\n  <button on-click('click')>Click</button>\r\n</div>\r\n```\r\n/test-inner-component/component.marko\r\n```javascript\r\nmodule.exports = {\r\n  click () {\r\n    console.log(this.input.handler())\r\n  }\r\n}\r\n```\r\n\r\nSupposely, the console should have a log as `value` printed when I click the button in the `test-inner-component`. But it actually printed `undefined`. \r\n\r\nI even tried to bind context for the function reference in `test-component` at `onCreate`, `onInput` or `onMount` like `this.handler = this.handler.bind(this)`. None of them actually work. \r\n\r\nCould you advise how this `pass reference` suppose to work? Does it only suppose to work without any context? \r\n\r\nAnother use case I can think of is to pass marko component into another component, but that leads to another question I created: https://github.com/marko-js/marko/issues/684. How can I pass in a fully functional component (with template and controller) into another component? The only way I'm aware of it to pass in something like this: `require('./a-component.marko')`, but how can I associate a controller with that template? \r\n\r\nSorry for the long question and thank you for the help. \r\n  A piece of documentation describing how to use Marko alongside [Huncwot](https://github.com/zaiste/huncwot). I'd be happy to hear your feedback.\r\n\r\n## Description\r\nI'm building a library similar to Express and Koa called Huncwot. I'm planning to use Marko as its default (and only) view engine. Huncwot is inspired by Clojure's ring with routes as (pure) functions returning *data* describing responses. In this pull request I'm describing how to use Marko with Huncwot.\r\n\r\n## Motivation and Context\r\nServer-side integration example using Huncwot is simpler and requires less code for the same result as in Koa or Express.\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n- [x] My code follows the code style of this project.\r\n- [X] I have updated/added documentation affected by my changes.\r\n- [X] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes. (N/A)\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11347864/badge)](https://coveralls.io/builds/11347864)\n\nCoverage remained the same at 90.204% when pulling **ecbf3a306ddcc6d303a2c45a5bcb9b7ce35a147d on zaiste:docs-marko-huncwot** into **71cc431b1e9f2b59aeaf394ff6a9e9510ff1d8de on marko-js:master**.\n  Currently, this:\r\n```js\r\napp.locals.foo = 'foo!';\r\napp.locals.serializedGlobals = { foo: true };\r\n```\r\nDoesn't work, because [`component-globals-tag.js`](https://github.com/marko-js/marko/blob/master/components/taglib/component-globals-tag.js#L20) sets each property to `false` after reading them. If there's a reason for doing that, I can't find it, and removing that line fixes the problem. \n[![Coverage Status](https://coveralls.io/builds/11338800/badge)](https://coveralls.io/builds/11338800)\n\nCoverage decreased (-0.0009%) to 90.203% when pulling **3f5e28b4e7612a2254d6a600d755fec5e4241b93 on Hesulan:serialized-globals-no-set** into **ee9b70cf33a71715f2c0b6f394ab3b3054c4419c on marko-js:master**.\n  ## Description\r\nWas reading through docs and found some html entities.\r\n\r\n## Motivation and Context\r\nPretty sure they were not suppose to be there \ud83d\ude1c.\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11312862/badge)](https://coveralls.io/builds/11312862)\n\nCoverage remained the same at 90.204% when pulling **adf7801490f9b785b49c0c4e19950fc0ccd95cc8 on DylanPiercey:patch-1** into **ca27cb54b3c3e0f7a07a5aa9cbe19f56348b811b on marko-js:master**.\n Gotcha, thanks!  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\nAdding option to customize default timeout for await tags\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\nWe use await a lot and we need to customize the default await timeout for all await tags and we think this will help us to fix the timeout problem\r\n\r\nI've opened an issue asking about this thing #621 \r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/11250601/badge)](https://coveralls.io/builds/11250601)\n\nCoverage increased (+0.0009%) to 90.228% when pulling **6582b5b4a703458aa6cc7c4930abc52ec6cd5951 on mauricionr:default_await_timeout** into **29eb4d2c0066ecfa3e57d2b8bd8134617f4340fb on marko-js:master**.\n Squashed @austinkelleher \r\n\r\nThanks :rocket:  \n[![Coverage Status](https://coveralls.io/builds/11251597/badge)](https://coveralls.io/builds/11251597)\n\nCoverage increased (+0.0009%) to 90.228% when pulling **8c534d926eaa86bfe5b41208412088fd227c7c6e on mauricionr:default_await_timeout** into **29eb4d2c0066ecfa3e57d2b8bd8134617f4340fb on marko-js:master**.\n @austinkelleher i will discuss with my team about override the `<await>` tag, thanks for the demo! i saw @austinkelleher, really good proposal, and with this override, looks like we will be able to override any core tag? Thanks @austinkelleher and @patrick-steele-idem simpler than the other aproach  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\nMarko global defaults and user globals aren't merged. If user globals exists the `defaults` are ignored.\r\n\r\n\r\n## Motivation and Context\r\nLook at https://github.com/marko-js/marko/issues/677\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [X] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [X] I have read the **CONTRIBUTING** document.\r\n- [] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n\r\nTests suite doesn't works on windows! I will open an issue for this. \n[![Coverage Status](https://coveralls.io/builds/11201181/badge)](https://coveralls.io/builds/11201181)\n\nCoverage increased (+0.002%) to 90.225% when pulling **5bcf5043012b3cf91056ae30fdc8ae6278fb9ec6 on StarpTech:merge_marko_globals_and_marko_defaults** into **e03362d94265e1d490b1a14fd515e7d16e5c876d on marko-js:master**.\n  # Environment\r\nWindows\r\nNodeJs: v7.9.0\r\nMarko: beta\r\n\r\nThe framework runtime variables in `out.global`\r\n```\r\ncomponents:GlobalComponentsContext\r\nuid: 1\r\n```\r\n\r\nare serialized to (in browser)\r\n```\r\ncomponents: undefined\r\nuid: NaN\r\n```\r\nwhen I access them in client side component. \r\n\r\nAnother question is why they exists in the \"user global\" space ? This data should be land in a seperate namespace. Found the issue here https://github.com/marko-js/marko/blob/845c177be67bce46cc55b1d64b7e451dfe5c01da/components/util-browser.js#L1 window.$MG (defaults) must be merged.\r\n\r\nNext issue is the `components` property. global `components` was purposefully set to `undefined` https://github.com/marko-js/marko/blob/845c177be67bce46cc55b1d64b7e451dfe5c01da/components/ComponentsContext.js#L41 Hi, yes my PR has been merged.   Right now I'm changing the component state with events. When a value changes (e.g. in an input tag) I use the on-change or on-keypress events to handle state changes. However in a form with a lot of states you need to have a lot of event handlers in the component class.\r\nIt gets unwieldy to have full control over all the business logic. It would be easier and clean to have an attribute like angular or vue.js (v-model, model.. or something like this) that takes a property of the state object and update it automatically.\r\nI don't know if such a feature is already available but from the documentation I haven't seen anything like that.\r\nIs it possible to implement a 2 way data binding out of the box? or, if not possible, can you suggest the best pattern to manage such cases?\r\nThanks.\r\n  This is happening in 4.3.1 as well with callback and promises in the await tag.   ## New Feature\r\n\r\n### Description\r\nI'd like to be able to pass an option to renderToString that removes comments from that template. Perhaps also console.log calls.\r\n\r\n### Context\r\nSometimes when I'm developing, especially in the view file which spits out most of my HTML page, I want to comment out / in certain sections - such as code for analytics trackers or other such things. This is so I can easily add / remove features as I develop without losing the code.\r\n\r\nFor now I mostly use Marko for server-side rendering my base HTML page which I plug another view engine (ReactJS) on top of. The ability to remove / add certain `<meta>` tags or some JavaScript on the fly using comments would be great - as these things are often changing. Right now all my pages are rendered with all the commented out sections too, which is adding to page size.\r\n\r\n### Possible Implementation\r\nHave an options object that can be passed to renderToString, with something like:\r\n```\r\n{\r\n  removeComments: true,\r\n  removeConsole: true\r\n}\r\n``` Oh, I wasn't aware that HTML-style comments were being removed. Looking back at my project I see that certain tags I commented out that way have actually been removed. That's cool.\r\n\r\nIt's mainly the JavaScript part of my code that I've been commenting out sections of - inside of HTML `<script>` tags. It seems these comments are not removed.\r\n\r\nI might have to look at a babel solution then - although I've just tried to get rid of any babel on my server recently. When I do a `require` of the `.marko` file template, would the server know to transform the resulting JavaScript file which is generated by Marko? There doesn't seem to be a place where I actually reference the JavaScript file directly, and could potentially pass it to a babel transformer. I don't want babel to by default transform every JavaScript file because that can become a bit heavy.  \n[![Coverage Status](https://coveralls.io/builds/11130285/badge)](https://coveralls.io/builds/11130285)\n\nCoverage increased (+0.03%) to 90.296% when pulling **6ff3706ed1152d993a56ed2a081f3ea1fda8f29a on issue-651** into **9604a853ee3a2f487caa9add6a0173d02301109f on master**.\n  ## Bug Report\r\n\r\n### Context\r\nUnable to use CSS rule `!important` in style block of marko file.\r\n\r\n### Expected Behavior\r\nThe following is valid CSS in a marko file.\r\n```\r\nstyle {\r\n  .foo-class {\r\n    height: 50px !important;\r\n  }\r\n}\r\n<div.foo-class/>\r\n```\r\n### Actual Behavior\r\nError when compiling:\r\n```Module not found: Error: Can't resolve 'important;/n  }\"}'```\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: v4.2.7\r\n That'd be consistent. I am using `marko-loader`. The PR (https://github.com/marko-js/marko-loader/pull/13) that I just submitted against the `marko-loader` repo resolves this issue for me.  Having a dedicated section for scoped attributes would be a lot nicer than prefixing each class with `__`. I think most people would prefer to use only scoped css for their components and having to write `__` for every class in both the css and the template can get quite annoying after a while. \r\n\r\nAlthough when mixing global and scoped styles with @austinkelleher 's approach, there could end up being some confusion about what classes are scoped or not when looking at a pretty involved template with lots of styling going on. But then again, Vue users doesn't seem to be too bothered by that. I agree with the scoped attributes like:\r\n\r\n```css\r\nstyle.less.scoped {\r\n\r\n}\r\n\r\nstyle.less {\r\n\r\n}\r\n\r\nstyle.scss.scoped {\r\n\r\n}\r\n\r\nstyle.scss {\r\n\r\n}\r\n```\r\n\r\nInstead of:\r\n\r\n```css\r\n\r\n    .global-button-selector { \r\n        color: grey;\r\n    }\r\n    __disabled-button { \r\n        color: grey;\r\n    }\r\n```\r\n\r\nwhich in my opinion looks a bit messy and doesn't feel **concise** like most of the framework. I talked to @austinkelleher about this a while back and I've warm up to the idea of keeping scoped and non-scoped css classes under the same style block. I think that making class names that start with a capital letter scoped would end up working well. It feels less yucky compared to `.__`. \r\n\r\nThere are languages out there that have different functionality for things that start with a uppercase or lowercase letter. For example, functions, structs, and struct attributes in `golang` that start with a capital letter are exported and are available outside of the package they are defined in, while lowercased variants are kept within the scope of the package. Although this is backwards from what was proposed (and `go` is _very_ different from css), I don't think the concept would be too foreign.\r\n\r\nIf marko ended up going this route, I think that it would have to be an opt in feature. It could end up breaking layouts for some people. You know, double underscore looks weird at first, but looking back on this thread a few weeks later it doesn't look bad at all. I think I prefer it since you can tell something different is happening, as opposed to the capital letters that look like a naming convention. *Note: I'll probably update after I get more sleep and have time to think*\r\n\r\nI'm kind of wracking my brain on this one. On one hand, easy of implementation is obviously critical. On the other, this doesn't feel like a solid solution. \r\n\r\n### Main Concern: Tight coupling between scoped nature of css and markup\r\n\r\nIf I started off with \r\n\r\n```html\r\n<button.primary/>\r\n```\r\n\r\n```css\r\n.primary {\r\n  color: blue;\r\n}\r\n```\r\n\r\nbut I decided suddenly that there was a conflict and I needed to scope it.\r\n\r\n```css\r\n.__primary {\r\n  color: blue;\r\n}\r\n```\r\n\r\nIf I forget to update the markup or miss a reference then there could be a non-obvious style bug introduced. \r\n\r\n---\r\n\r\nI know that's very likely obvious, but the above combined with the fact that the `__` needs to be added for everything scoped just seems error prone to me. \r\n\r\n\r\n# Modified Vue-like approach\r\n\r\nVue takes a pipelined approach. \r\n\r\nscoped styles -> vue-loader -> preprocessor -> internal vue-loader postcss plugin\r\n\r\nUsing a grouped approach like @austinkelleher mentioned would require something similar. \r\n\r\n## Implementation\r\n\r\n**In a single file marko component**\r\n\r\n```html\r\n<button.primary/>\r\n\r\nstyles.scoped.less {\r\n  button.primary {\r\n    color: blue;\r\n  }\r\n}\r\n```\r\n*Generated output*\r\n```css\r\nbutton.primary[data-m-3ds24df] {\r\n  color: blue;\r\n}\r\n```\r\n\r\nThe flow here would be more or less the same as vue's.\r\n\r\n**In a split component**\r\n\r\nstyle.mobile.css (Phase 0 -- source)\r\n```css\r\nscoped {\r\n  button.primary {\r\n    color: blue;\r\n  }\r\n}\r\n.global-class {\r\n  color: red;\r\n}\r\n```\r\n\r\nPhase 1 -- marko transform\r\n\r\n```css\r\n@scoped(data-m-3ds24df) {\r\n  button.primary {\r\n    color: blue;\r\n  }\r\n}\r\n.global-class {\r\n  color: red;\r\n}\r\n```\r\n\r\nPhase 2 -- postprocessor\r\nPhase 3 -- marko-scoped-postcss\r\n\r\n```css\r\nbutton.primary[data-m-3ds24df] {\r\n    color: blue;\r\n  }\r\n.global-class {\r\n  color: red;\r\n}\r\n```\r\n\r\n## Intended Results*\r\n- Solves \"scoped styles must be separated out from unscoped styles.\" \r\n  - Separation exists still, but can be localized to a file\r\n- Solves: \"Marko must understand each compile-to-CSS language.\" \r\n  - Look for a common denotation in each of the files like `@scoped` or something similar but unique. \r\n- Doesn't solve: \"scoped style classes cannot be passed to nested components.\" \r\n  - I don't think this is a best practice to begin with, but it's still obviously an issue. \r\n- Might solve: \"not compatible with multi-file adaptive styles.\" \r\n  - I would be very interested to know how this works to begin with. Regardless, after marko figured out what styles that component depended on it'd have to check for `@scoped`. If that was present, you'd just add the attribute directly onto every direct node of that component. (I'm not sure but I believe that doesn't extend to children). \r\n\r\n\r\n***Note: I'm making a lot of assumptions here that I don't have all the info to back up.**\r\n\r\nGranted, I understand that this is significantly more complex than the proposed solution. Technically, given @patrick-steele-idem's note about the implementation details of the proposed solution I could see it just being a standalone webpack/lasso plugin anyway.\r\n @zephraph thanks for bringing attention to this topic again. I really don't see the issue with having marko support multiple CSS preprocessors. \r\n\r\nHaving to install the desired preprocessor: SCSS, Less, PostCSS or Stylus via NPM so it's available to compile styles.scoped.less, styles.scoped.scss, etc is a minor trade-off in order to improve readability and improve the framework's usability. I am strongly of the opinion that all styles in a component should be scoped to that component by default.\r\n\r\nInstead of `.__foo` to indicate that the `.foo` class is private, I would prefer to have to prefix something like `.GLOBAL.foo` to escape the particular component.\r\n\r\nConsider this option:\r\n\r\n```\r\nstyle {\r\n    .foo { color: red; }\r\n    i { color: blue; }\r\n}\r\n\r\nglobal-style-exports {\r\n   i { color: pink; }\r\n}\r\n\r\n<div class=\"foo\">\r\n  <i>Hello</i> <b>World</b>\r\n</div>\r\n```\r\n\r\nMuch discussion about CSS on the internet revolves around \"global by default\" was a misfeature in CSS (similar to it being in a misfeature in JS).  In the above example- it should be hard for styles to escape from the component. @ramses0, I really like the idea of all component styles being scoped by default. That would definitely be a breaking change though.    ## Bug Report\r\n\r\n### Context\r\nopening tag-brackets (`<`) being improperly converted to `&lt;`\r\n\r\n[source](https://github.com/marko-js/marko/blob/master/docs/syntax.md#directives)\r\n![source](https://cloud.githubusercontent.com/assets/23745012/24867738/79794f80-1e0e-11e7-9a2b-8ea816c9c5d5.png)\r\n\r\n[rendered](http://markojs.com/docs/syntax/#directives)\r\n![rendered](https://cloud.githubusercontent.com/assets/23745012/24867739/79ead6be-1e0e-11e7-9499-251eec545676.png)\r\n\r\n### Expected Behavior\r\noutput:\r\n``` marko\r\n<strong if(true)>\r\n    Marko is awesome\r\n</strong>\r\n```\r\n\r\n### Actual Behavior\r\noutput:\r\n``` marko\r\n&lt;strong if(true)>\r\n    Marko is awesome\r\n&lt;/strong>\r\n```\r\n\r\n<details>\r\n### Your Environment\r\n* Version used: 4.2.7\r\n* Environment name and version: Firefox 52, Chrome 57\r\n* Operating System and version: Ubuntu 16.10\r\n</details> where can the latest rendered master be seen?  ### Environment\r\nMarko: 4.1.1\r\nNode: 7.4.0\r\n### Expected Behavior\r\nShould only render the value.\r\n### Actual Behavior\r\nIt renders javascript tag and the value.\r\n\r\n### Steps to Reproduce\r\n\r\n```marko\r\n    <@title>\r\n        <await(recipe from input.recipe)>\r\n            ${recipe.name}\r\n        </await>\r\n    </@title>\r\n```\r\nwill produce\r\n```marko\r\n<title>test&lt;script&gt;(function(){var w=window;w.$components=(w.$components||[]).concat({\"w\":[[\"s0\",0,{},{\"d\":null,\"b\":null}],[\"s1\",1,{\"year\":2017},{\"d\":null,\"b\":null}]],\"t\":[\"/recipe-detail$1.0.0/src/components/app-nav/index.marko\",\"/recipe-detail$1.0.0/src/components/app-footer/index.marko\"]})||w.$components})()&lt;/script&gt;</title>\r\n```  ## Bug Report\r\n\r\n### Context\r\nWhilst trying to programmatically render components, one of the components started throwing an exception `Render error. Exception: Error: No component found`. After further investigation, I narrowed it down to whether any element within the component has a `for-key` or `key` attribute.\r\n\r\n### Expected Behavior\r\nThe component should render as normal.\r\n\r\n### Actual Behavior\r\nWith a `for-key` attribute, the following exception is thrown when `renderSync()` is called:\r\n![image](https://cloud.githubusercontent.com/assets/19622548/24833117/5640d312-1c74-11e7-9825-7d9e549a5234.png)\r\n\r\nWith a `key` attribute, the following exception is thrown when `renderSync()` is called:\r\n![image](https://cloud.githubusercontent.com/assets/19622548/24833126/7b45b43e-1c74-11e7-9083-af34dc8cb0d2.png)\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n* Marko v4.2.6\r\n* Chrome 57.0.2987.133 (64-bit), Node 6\r\n* macOS Sierra 10.12.4\r\n\r\n### Steps to Reproduce\r\nI've created [a quick repository](https://github.com/edwarddamato/playground) where you can replicate this issue.\r\n\r\n### Stack Trace\r\nStack traces provided above.\r\n\r\n</details>\r\n Yeah, that fixes it. I'll keep an eye on this. Thanks!  ## Bug Report\r\n\r\n### Context\r\nOn a new component with `index.marko`, create a single `<if(state.myVar)>test</if>` and run the server.\r\n \r\n### Expected Behavior\r\nThe component `index.marko.js` should contain `function render(input, out, __component, component, state) {`\r\n\r\n### Actual Behavior\r\nThe component `index.marko.js` contains `function render(input, out) {`\r\n\r\n### Your   ##Environment\r\n* Version used: marko@4.2.7\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4): Chrome 57.0.2987.133 , node.js 7.2.1\r\n* Operating System and version (desktop or mobile): desktop MacOS X 10.12.4 beta\r\n\r\n### Steps to Reproduce\r\n1. Create a component with a single line `<if(state.myVar)>test</if>`\r\n2. Add `onCreate` to component where `this.state = input`\r\n3. Add `onMount` to component where `this.setState('myVar', 123)`\r\n4. Pass component to a page\r\n5. Load the page\r\n\r\n### Stack Trace\r\n\r\n```\r\nevents.js:160\r\n      throw er; // Unhandled 'error' event\r\n      ^\r\n\r\nError: Render error. Exception: ReferenceError: state is not defined\r\n    at render (**/views/components/my-form/index.marko.js:29:7)\r\n    at renderCompontent (**/node_modules/marko/components/taglib/helpers/renderComponent.js:3:5)\r\n    at render (**/views/components/app/index.marko.js:21:3)\r\n    at renderer (**/node_modules/marko/components/renderer.js:191:9)\r\n    at render (**/views/pages/form/index.marko.js:33:3)\r\n    at safeRender (**/node_modules/marko/runtime/renderable.js:6:9)\r\n    at Template.render (**/node_modules/marko/runtime/renderable.js:136:20)\r\n    at ServerResponse.response.marko (**/node_modules/marko/express.js:47:18)\r\n    at app.get (**/server.js:74:7)\r\n    at Layer.handle [as handle_request] (**/node_modules/router/lib/layer.js:93:5)\r\n    at AsyncStream.error (**/node_modules/marko/runtime/html/AsyncStream.js:411:13)\r\n    at Timeout._onTimeout (**/node_modules/marko/runtime/renderable.js:17:22)\r\n    at ontimeout (timers.js:365:14)\r\n    at tryOnTimeout (timers.js:237:5)\r\n    at Timer.listOnTimeout (timers.js:207:5)\r\n```  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\n+ clarify on-* wildcard usage\r\n+ event handler basic and advanced notes\r\n+ events comparison with dom, jquery, marko\r\n+ link to example https://github.com/marko-js/markojs-website/pull/10\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\nIn the chat earlier we found an opportunity to improve the docs around event handlers.\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/10973696/badge)](https://coveralls.io/builds/10973696)\n\nCoverage remained the same at 90.146% when pulling **13a2c81fddfe14a60149c86e233b41a613cad64d on tcrowe:on-event-doc-04062017** into **8019774911de50cf41c4b50963ac15dae8d4be7a on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/10973696/badge)](https://coveralls.io/builds/10973696)\n\nCoverage remained the same at 90.146% when pulling **13a2c81fddfe14a60149c86e233b41a613cad64d on tcrowe:on-event-doc-04062017** into **8019774911de50cf41c4b50963ac15dae8d4be7a on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/10973696/badge)](https://coveralls.io/builds/10973696)\n\nCoverage increased (+0.5%) to 90.615% when pulling **13a2c81fddfe14a60149c86e233b41a613cad64d on tcrowe:on-event-doc-04062017** into **8019774911de50cf41c4b50963ac15dae8d4be7a on marko-js:master**.\n   Can I take this on ? I've got some free time these days and Im looking to get started around here. Thanks for the pointers guys. Will hopefully get this done over the weekend :) Okay so noob question, the only way to get the html out of a document fragment is by first appending it to a div and then getting its innerHTML right ? Is there any other way that I could be doing this ? Any progress on this yet? `renderToString` on the browser would be pretty nice to have. @mlrawlings Im still interested to work on this. Although I kinda stopped looking into this because I never could decide if the method I suggested was the way to go forward. @patrick-steele-idem @mlrawlings If the expected behaviour is to return the first top level element, we could just return the `outerHtml` from `this.___getNode().firstChild`. This works but I'm not sure this is the way forward.\r\n\r\nAlso, if I append the document fragment from `___getNode()` to a dummy VElement I created using `appendChild`, and try to access the firstChild it should give me the first child of the document fragment right ? This does not seem to be happening. Any ideas ?  ## Bug Report\r\n\r\n### Context\r\nI have a couple of Marko 3 components that have a `key` attribute that after upgrading to marko 4 break the whole page when used.\r\n\r\nI believe `key` is now a reserved attribute.\r\n\r\n### Expected Behavior\r\nComponent works\r\n\r\n### Actual Behavior\r\nPage fails to render and the following error is logged: `Render error. Exception: Error: No component found`\r\n\r\n### Possible Fix\r\nAllow key if defined in marks-tag.json of component.\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 4.2.4\r\n* Environment name and version: node.js v7.8.0\r\n* Operating System and version (desktop or mobile): mac OS Sierra\r\n\r\n### Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Create component with defined `key` attribute\r\n2. Use in a page\r\n3. Everything breaks\r\n\r\n### Stack Trace\r\n<!-- If an error is thrown, provide the stack trace here -->\r\n\r\n</details>\r\n  ## Bug Report\r\n\r\n### Context\r\n\r\nWhen using `<await-error>` to deal with rejected promises, marko calls `console.error` with the error. See https://github.com/marko-js/marko/blob/master/taglibs/async/await-tag.js#L111 .\r\n\r\nFor us this has two consequences:\r\n\r\n- The console.error call ends up in stdout. In our container setup we use stdout for logging, with JSON entries. The marko output confuses our log parser.\r\n- It's inconsistent to warn about an error in the case where the developer has explicitly provided an error handling tag.\r\n\r\n### Expected Behavior\r\n\r\n`<await-error>` tag does not cause `console.error` to be called.\r\n\r\n### Actual Behavior\r\n\r\n`<await-error>` tag does causes `console.error` to be called.\r\n\r\n### Possible Fix\r\n\r\nHaving this logging can be useful during dev. Maybe ut could be behind a flag or something, so you can pass `silent-error=true` to the `<await>` tag or similar?\r\n\r\n### Your Environment\r\n\r\n* Version used: 4.1.2\r\n* Environment name and version: node v6.6.0\r\n\r\n### Steps to Reproduce\r\n\r\n1. Load the code from https://gist.github.com/runeh/7adf1873b45ffa9d0b6723da4e410f4c into http://markojs.com/try-online/ \r\n2. Look at output in error console\r\n I ended up changing our code to deal the promise rejection in the renderer. But that seems unidiomatic, given that there are tags meant for dealing with timeouts and errors inside of await?\r\n\r\nAnyway, it still feels counter-intuitive to me that there is `console.error` output in a case where I've explicitly added code to deal with the error. I would prefer it not logging on my behalf in that case.  This proposal seem to be more secure too, since arbitrary properties will no longer be \"leaked\" to the browser. > If a nested UI component derives its props/state or generates input properties from anything other than passed in input (e.g. this.locale = out.global.locale)` then that information will not be available when the UI component mounts in the browser.\r\n\r\nDoes this now mean that accessing the out stream from `onInput` will no longer be serialized and sent to the browser for components? @ianvonholt, we wouldn't need that hack if globals were also serialized and/or we could define the global object when initializing components in the browser. I created #646 specifically for that.  Should it? @patrick-steele-idem it's certainly not a problem to use `if(!` instead, I just was under impression that `unless` is some sort of global attribute like `if`...  Hi, in `Marko 4.2.1` a newline is inserted and my cursor jumps to the end of the textarea on every input if I try to bind its value to the state:\r\n\r\n![marko-textarea](https://cloud.githubusercontent.com/assets/3694962/24590462/e0c79ec0-17ed-11e7-96cb-3dced2487006.gif)\r\n\r\n**custom-input.marko**\r\n\r\n```\r\nclass {\r\n  onChange(e) {\r\n    this.emit('change', e.target.value)\r\n  }\r\n}\r\n\r\ndiv\r\n  textarea key='input' on-input('onChange') value=input.value -- ${input.value}\r\n  p\r\n    strong -- ${input.value}\r\n```\r\n\r\nIf I remove the strong tag that outputs `input.value` it works fine. If I use an `input` instead of the `textarea` it works fine as well. If I remove the `${input.value}` from the `textarea`'s body it works as well but then the initial `input.value` isn't shown.\r\n\r\nThe code is server-rendered so I'm guessing that this has to do with serialisation maybe?\r\n\r\nFull code: https://github.com/maximilianschmitt/lasso-test\r\n\r\nThanks for your help! Thanks for your feedback @mindeavor. I'm removing `value` but this does not fix the issue unfortunately. Hey @patrick-steele-idem! Thank you for your help. I can verify that your proposed workaround of using the HTML syntax works. :)  Hello\r\n\r\n## Bug Report\r\nI was moving a div around the page with the mouse, then I got a weird behavior. I'm quite new with all this stuff but it looks like a bug.\r\n### Context\r\nMarko template:\r\n`div style={position:'absolute',top:0} -- test`\r\nRendering:\r\n`var bloc = require('./bloc');`\r\n`bloc.renderSync().appendTo(document.body);`\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\n'top' property should be set to zero and the text should be displayed at the top of the page.\r\n### Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nThe value 0 for 'top' is ignored and the 'top' property is not set in the style (according to FF inspector). The text is displayed at the default position that depends on previous elements in body.\r\n- No error message.\r\n- Negative values are accepted and the position of the div is correct\r\n- Same problem with 'left' property (not tested with other ones)\r\n- Same problem when state is changed with code\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: marko 4.2.0\r\n* Environment name and version: node.js 6.10.0-win-x64 Firefox 52.0.2\r\n* Operating System and version: Windows 10 desktop\r\n\r\n\r\n\r\n</details>\r\n I surely could not have be so quick. I don't even know how I can test modified code\u2026 I may be more helpful in some days/weeks.\r\nMany thanks.   When I try to write something like the stop-watch component in the try online section, i get the following error when the script try to update the component:\r\n\r\n```\r\nUncaught TypeError\r\n    at Component.$__rerender (pages-1407d337.js:3344)\r\n    at Component.update (pages-1407d337.js:3305)\r\n    at updateComponents (pages-1407d337.js:1890)\r\n    at updateUnbatchedComponents (pages-1407d337.js:1862)\r\n    at pages-1407d337.js:1841\r\n$__rerender @ pages-1407d337.js:3344\r\nupdate @ pages-1407d337.js:3305\r\nupdateComponents @ pages-1407d337.js:1890\r\nupdateUnbatchedComponents @ pages-1407d337.js:1862\r\n(anonymous) @ pages-1407d337.js:1841\r\n```\r\n\r\n\r\nbelow is the function where I hit the error: \r\n\r\n\r\n```\r\n$__rerender: function(input) {\r\n   if (input) {\r\n      this.input = input;\r\n   }\r\n    var self = this;\r\n    var renderer =  self.$__renderer;\r\n\r\n    if (!renderer) {\r\n        throw TypeError();\r\n     }\r\n.............................\r\n```\r\n\r\n`self.$__renderer` is undefined.\r\n\r\n\r\nIn my case there's a template rendered by express with marko/express.\r\nThe template has a tag called sidebar. This tag is where the code lives and it's build using the multi files structure:\r\ncomponent-browser.js\r\ncomponent.js\r\nindex.marko.\r\n\r\n- component-browser.js handles the OnMount() and browser events.\r\n- component.js handles onCreate()\r\n\r\nIn the onMount() I declared and assigned the intervalId to the global setTimeout() function that change the state using this.state.width every 1 second. (I'm using es6 function syntax so that the `this` scope is preserved)\r\nWhen the interval changes the state i get the error i mentioned above.\r\n\r\nCan you please help to understand where I'm wrong ?\r\nThanks\r\n\r\n I'm having the same issue on version 4.2.1. @maximilianschmitt If you are using a main template you can try to something like this:\r\n\r\n`template.marko`\r\n```\r\ninclude(input.lasso)\r\n<!doctype html>\r\nhtml\r\n  head\r\n    app-head(input)\r\n    lasso-head\r\n  body\r\n    div id=\"main-app\"\r\n      app-header(input)\r\n      app-body(input)\r\n\r\n    browser-refresh enabled=\"true\"\r\n    lasso-body\r\n\r\n  <!--custom scripts-->\r\n  <include(input.scripts)/>\r\n```\r\n\r\n`page.marko`\r\n\r\n```\r\ninclude('~/theme/html.marko')\r\n    @lasso\r\n        lasso-page package-path=\"./browser.json\"\r\n    @title -- Dashboard\r\n    @body\r\n        app-main\r\n```\r\n\r\nNotice the @lasso tag in the page.marko file. Instead of putting the `lasso-page package-path=\"..\"` tag in the main template I delegated the page to send it to the main template that receive it at the top of the file with the tage `include(input.lasso)`\r\n\r\nI don't know why but that solved the issue for me.\r\nFurthermore I removed the component-browser.js file and write both the server and client logic inside the component.js file  Thanks for the clarification @patrick-steele-idem and @ovidius72! :)  I'm testing Marko for server-side and client-side rendering and I've been looking for a way to define the global variables (`out.global`) when bootstrapping client-side components. Is it possible?\r\n\r\nAt the moment I'm just seeing that `input` and `state` are passed from backend to client, but global variables are left blank in the page (and I rather use specific globals in the client).\r\n\r\nSample code (using intentionally bad practices):\r\n\r\nserver:\r\n```\r\n<h1>${out.global.title}</h1>\r\n\r\n...\r\n\r\ntemplate.stream({\r\n  $global: {\r\n    title: 'Foo'\r\n  }\r\n});\r\n```\r\n\r\nclient:\r\n```\r\nimport component from '...';\r\nimport markoComponents from 'marko/components';\r\nmarkoComponents.init();\r\n\r\n// How can I define $global?\r\n```\r\n\r\nThanks for the hard work. It's amazing how simple it is to have universal components with Marko. I'm not sure if I got it right. From what I see you're suggesting using the `onInput` handler to assign the global values in the server to the component input so it's serialized in the HTML for the client. Then in the client, the `onMount` handler is called and the serialized input is put again in the store with the globals. Am I right?\r\n\r\nApart from being a little \"hacky\" IMO, my problem with that approach is that the thing I'm putting in globals are functions, not serializable values. For more context, they're a translation function (which already has the locale and the translations set for the current request) and a function to get urls (which rely on an internal mapping, e.g.: '/img/logo.png' => 'https://some-cdn.com/img/logo-v1234.png'), among other things. I use dependency injection a lot and I'd like to inject the client-side versions of those functions in the template.\r\n\r\nI can come up with a hack to do this but I wanted to know if the library itself provided access to the `out` object being used in the client. Would you consider implementing it o accepting a PR that did that? @patrick-steele-idem I like your approach because we work with the same interface `out.global` but you always have to define which propertys are serialized to the browser right? It would be nice if we could work in the same way as on server side. In my opinion \"global\" data shouldn't need manual adjustment in every component.\r\n\r\nIntial state should be that the whole `$global` object will be serialized.\r\n\r\n```marko\r\nclass {\r\n}\r\n```\r\n\r\n```marko\r\n<div>\r\n    Title: ${out.global.title}\r\n</div>\r\n```\r\n\r\nIf you dont want to serialize everything we can define a whitelist (with some tooling)\r\n\r\n```marko\r\nclass {\r\n    get globals() {\r\n        return ['title'] // only title\r\n        return ['!title'] // all except title\r\n        return ['foo.bar'] // only bar\r\n        return [] // share nothing\r\n    }\r\n}\r\n```\r\nIf you dont define a globals getter everything is shared.\r\n\r\n```marko\r\n<div>\r\n    Title: ${out.global.title}\r\n</div>\r\n``` Sorry for the delay.\r\n\r\nBefore telling what my preference would be, take into account that I'm not using Marko in production, I'm still playing with it to evaluate if it fits my needs (my company's).\r\n\r\nI think we should be able to pass top-level input and globals in the client initialization as we do with server-side rendering.\r\n\r\nIf in the server we do:\r\n\r\n```javascript\r\ntemplate.stream({\r\n  currentPage: 'Home page',\r\n  $global: {\r\n    staticUrl: () => { ... }\r\n  }\r\n});\r\n```\r\n\r\nWe should be able to do so in the client:\r\n\r\n```javascript\r\nimport component from '...';\r\nimport markoComponents from 'marko/components';\r\nmarkoComponents.init({\r\n  $input: {\r\n    // Add variables to the serialized input\r\n  },\r\n  $replaceInput: {\r\n    // Replace all serialized input\r\n  },\r\n  $global: {\r\n    staticUrl: () => { ... } // client-side version\r\n  },\r\n  $replaceGlobal: {\r\n    ...\r\n  }\r\n});\r\n```\r\n\r\nThe problem with this approach, as far as I know, is that there's no guarantee that there will only be a single top-level component in the page, so passing these values to markoComponents.init could be problematic (although it'd solve my needs).\r\n\r\nMy use case is something like this (and it's already working with Nunjucks):\r\n\r\n```javascript\r\n$ const { staticUrl } = out.global;\r\n\r\n<img src=\"${staticUrl('/img/logo.png')}\">\r\n```\r\n\r\n@gilbert that pattern may work for me but I'd need many changes in my code to be able to import the function that resolves urls, as I rely a lot on dependency injection. The function that resolves urls is not so simple as appending the path to a variable CDN hostname, but all paths are mapped to a cache-friendly version. Also I don't think it's a good idea to use `out` as a global variable in `window`. In case this weren't possible having a reference to the `out` variable used to initialize components would also be enough:\r\n\r\n```javascript\r\nimport component from '...';\r\nimport markoComponents from 'marko/components';\r\nObject.assign(markoComponents.out.$global, {\r\n  // My global variables\r\n});\r\nmarkoComponents.init();\r\n```\r\n\r\nOr having access to the serialized data:\r\n\r\n```javascript\r\nimport component from '...';\r\nimport markoComponents from 'marko/components';\r\nconst serializedState = markoComponents.getSerializedState();\r\nObject.assign(serializedState, {\r\n  // My variables\r\n});\r\nmarkoComponents.init();\r\n```\r\n  Hi. Just read about Marko recently. Can Marko be used for mobile app development - does it have anything similar to React Native or Ionic? I'm using marko for a progressive web app, so i guess marko can do it\r\n\r\nmarko <3 mauricionr,\r\n\r\nCan you talk a bit about how you do it? Do you use any other libraries/frameworks? Thanks. @mauricionr if you have the time, a write up or a github starter repo would be really appreciated. \r\n\r\nGrouping efforts towards building something like https://github.com/nuxt/nuxt.js for marko would be great, I'm willing to contribute, however it seems like there are still a few missing pieces to the puzzle such as client side routing. So an example of a barebones PWA with client side routing and offline capabilities would make a good starting point. I'm using the pwa [checklist](https://developers.google.com/web/progressive-web-apps/checklist) from google and the [sw-toolbox](https://github.com/GoogleChrome/sw-toolbox), and i'm not using client side routing.\r\n\r\n@sebastianmacias @selforganized i will put the example in my repo :rocket: \r\n\r\n @sebastianmacias @selforganized \r\n\r\nI started implement service worker in my demo at [PWA Road Show S\u00e3o Paulo](https://events.withgoogle.com/pwa-roadshow-latin-america/#content)\r\n\r\ncheckout of my [demo repo](https://github.com/mauricionr/marko-pwa) and [live demo](https://lit-headland-75537.herokuapp.com/)\r\n\r\n![image](https://cloud.githubusercontent.com/assets/2263551/24765410/0d67703a-1ace-11e7-86b6-3b96f0693b65.png)\r\n\r\n\r\nHope this can help with PWA :rocket:  @mauricionr thanks! will be checking it out later this week I will get some free time to improve them :) Bro , I need client side Routing mechanism for MarkoJS + Marko Widgets with SEO things .Please suggest me regarding   Hi again!\r\n\r\nFor a project I'm looking at building with Marko 4 (I'm on `Marko 4.2.0`), I want an `input` element to be autosized so that the width of the input always matches the width of its value. The following works fine for the most part:\r\n\r\n```\r\nstatic var autosize = require('autosize-input')\r\n\r\nclass {\r\n  onMount() {\r\n    // resize the input on input\r\n    autosize(this.getEl('input'))\r\n  }\r\n\r\n  onChange(e) {\r\n    this.emit('change', e.target.value)\r\n  }\r\n}\r\n\r\ndiv\r\n  input key='input' value=input.value on-input('onChange')\r\n  -- ${input.value}\r\n```\r\n\r\nHowever, on the first input (e.g. entering a space) the `style` attribute (that the autosize-module sets) seems to be removed:\r\n\r\n![marko-autosize](https://cloud.githubusercontent.com/assets/3694962/24577712/37153aec-16d3-11e7-971f-91822d449d6b.gif)\r\n\r\nFull code: https://github.com/maximilianschmitt/lasso-test\r\n\r\nI wonder if this is intentional behaviour? I've also tried manually resizing in the `onRender` and `onUpdate` hooks but this causes flickering.\r\n\r\nNow finally I modified `autosize-input` to return the style and use Marko's state to update the `style` together with the `input`'s value. This solves my issue above but with this pattern the cursor of the `input` jumps to the end if I enter a character:\r\n\r\n```\r\nstatic var autosize = require('autosize-input')\r\n\r\nclass {\r\n  onCreate() {\r\n    this.state = { autosize: {} }\r\n  }\r\n\r\n  onMount() {\r\n    var component = this\r\n\r\n    // on every input, call my callback with the calculated style\r\n    autosize(this.getEl('input'), null, function (style) {\r\n      component.state.autosize = style\r\n      component.setStateDirty('autosize')\r\n    })\r\n  }\r\n\r\n  onChange(e) {\r\n    this.emit('change', e.target.value)\r\n  }\r\n}\r\n\r\ndiv\r\n  input key='input' style=state.autosize value=input.value on-input('onChange')\r\n```\r\n\r\n![marko-autosize2](https://cloud.githubusercontent.com/assets/3694962/24577803/4c669560-16d5-11e7-9c4d-ed088b85a8d6.gif)\r\n\r\nFull code: https://github.com/maximilianschmitt/lasso-test/tree/cursor-jump\r\n\r\nThanks for your help! :) Hey, thanks! Interesting to hear what caused the issue. `4.2.1` fixed it for me. :) Thank you!  Hi! When I'm developing I sometimes I edit several files for something to work. Sometimes however I receive the following error:\r\n\r\n```\r\n  Error: Render error. Exception: TypeError: renderFunc is not a function\r\n      at safeRender (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:6:9)\r\n      at Template.render (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:131:20)\r\n      at Readable._read (/home/karl/dev/instanty/node/node_modules/marko/runtime/stream.js:44:17)\r\n      at Readable.read (_stream_readable.js:350:10)\r\n      at resume_ (_stream_readable.js:739:12)\r\n      at _combinedTickCallback (internal/process/next_tick.js:80:11)\r\n      at process._tickCallback (internal/process/next_tick.js:104:9)\r\n      at AsyncStream.error (/home/karl/dev/instanty/node/node_modules/marko/runtime/html/AsyncStream.js:411:13)\r\n      at Timeout._onTimeout (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:12:22)\r\n      at ontimeout (timers.js:380:14)\r\n      at tryOnTimeout (timers.js:244:5)\r\n      at Timer.listOnTimeout (timers.js:214:5)\r\n```\r\n\r\nThat I receive and exception is brilliant. However it would be really *really* nice if it could reference where my application is breaking. Or am I missing something? Hi! Unfortunately I can't recreate it at will I'm afraid. It however does seem to popup for me quite often. Here is a longer log:\r\n\r\n```\r\n[browser-refresh] Triggering refresh of client styles...\r\n[browser-refresh] Refresh triggered\r\n[browser-refresh] Refresh triggered\r\n[browser-refresh] File has been changed: src/client/components/app-footer/_flags.scss\r\n[browser-refresh] Special reload: /src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[browser-refresh] Triggering refresh of client styles...\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso] File modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[lasso/browser-refresh] StyleSheet modified: /home/karl/dev/instanty/node/src/client/components/app-footer/_flags.scss\r\n[browser-refresh] Triggering refresh of client styles...\r\n[browser-refresh] Refresh triggered\r\n[browser-refresh] Refresh triggered\r\n\r\n  Error: Render error. Exception: TypeError: renderFunc is not a function\r\n      at safeRender (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:6:9)\r\n      at Template.render (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:131:20)\r\n      at Readable._read (/home/karl/dev/instanty/node/node_modules/marko/runtime/stream.js:44:17)\r\n      at Readable.read (_stream_readable.js:350:10)\r\n      at resume_ (_stream_readable.js:739:12)\r\n      at _combinedTickCallback (internal/process/next_tick.js:80:11)\r\n      at process._tickCallback (internal/process/next_tick.js:104:9)\r\n      at AsyncStream.error (/home/karl/dev/instanty/node/node_modules/marko/runtime/html/AsyncStream.js:411:13)\r\n      at Timeout._onTimeout (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:12:22)\r\n      at ontimeout (timers.js:380:14)\r\n      at tryOnTimeout (timers.js:244:5)\r\n      at Timer.listOnTimeout (timers.js:214:5)\r\n\r\nRender error. Exception: TypeError: renderFunc is not a function\r\n    at safeRender (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:6:9)\r\n    at Template.render (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:131:20)\r\n    at Readable._read (/home/karl/dev/instanty/node/node_modules/marko/runtime/stream.js:44:17)\r\n    at Readable.read (_stream_readable.js:350:10)\r\n    at resume_ (_stream_readable.js:739:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:80:11)\r\n    at process._tickCallback (internal/process/next_tick.js:104:9)\r\n\r\n  Error: Render error. Exception: TypeError: renderFunc is not a function\r\n      at safeRender (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:6:9)\r\n      at Template.render (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:131:20)\r\n      at Readable._read (/home/karl/dev/instanty/node/node_modules/marko/runtime/stream.js:44:17)\r\n      at Readable.read (_stream_readable.js:350:10)\r\n      at resume_ (_stream_readable.js:739:12)\r\n      at _combinedTickCallback (internal/process/next_tick.js:80:11)\r\n      at process._tickCallback (internal/process/next_tick.js:104:9)\r\n      at AsyncStream.error (/home/karl/dev/instanty/node/node_modules/marko/runtime/html/AsyncStream.js:411:13)\r\n      at Timeout._onTimeout (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:12:22)\r\n      at ontimeout (timers.js:380:14)\r\n      at tryOnTimeout (timers.js:244:5)\r\n      at Timer.listOnTimeout (timers.js:214:5)\r\n\r\nRender error. Exception: TypeError: renderFunc is not a function\r\n    at safeRender (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:6:9)\r\n    at Template.render (/home/karl/dev/instanty/node/node_modules/marko/runtime/renderable.js:131:20)\r\n    at Readable._read (/home/karl/dev/instanty/node/node_modules/marko/runtime/stream.js:44:17)\r\n    at Readable.read (_stream_readable.js:350:10)\r\n    at resume_ (_stream_readable.js:739:12)\r\n    at _combinedTickCallback (internal/process/next_tick.js:80:11)\r\n    at process._tickCallback (internal/process/next_tick.js:104:9)\r\n```\r\n\r\nTo get rid of the error I just have to stop my npm script `npm run dev` and start it up again, where I got the following error:\r\n\r\n```\r\n  Error: An error occurred while trying to compile template at path \"/home/karl/dev/instanty/node/src/client/components/app-footer/index.marko\". Error(s) in template:\r\n  1) [src/client/components/app-footer/index.marko:32:0] The closing \"footer\" tag does not match the corresponding opening \"span\" tag\r\n  \r\n      at handleErrors (/home/karl/dev/instanty/node/node_modules/marko/compiler/Compiler.js:82:21)\r\n      at Compiler.compile (/home/karl/dev/instanty/node/node_modules/marko/compiler/Compiler.js:151:9)\r\n      at _compile (/home/karl/dev/instanty/node/node_modules/marko/compiler/index.js:89:33)\r\n      at Object.compile (/home/karl/dev/instanty/node/node_modules/marko/compiler/index.js:103:12)\r\n      at doLoad (/home/karl/dev/instanty/node/node_modules/marko/runtime/loader/index-default.js:133:45)\r\n      at load (/home/karl/dev/instanty/node/node_modules/marko/runtime/loader/index-default.js:5:16)\r\n      at Object.<anonymous> (/home/karl/dev/instanty/node/src/client/components/app__sign-in/index.marko.js:21:27)\r\n      at Module._compile (module.js:571:32)\r\n      at loadSource (/home/karl/dev/instanty/node/node_modules/marko/runtime/loader/index-default.js:47:20)\r\n      at doLoad (/home/karl/dev/instanty/node/node_modules/marko/runtime/loader/index-default.js:140:24)\r\n```\r\n\r\nThe error above is expected as my code isn't correct.\r\n\r\nSo the rendersync error seems to happen when I use browser refresh, I edit a file which is incorrect, it trys to re-render and then tries to update the client. As stated, to fix the rendersync error I just have to manually stop and start my `npm run dev` script.\r\n\r\nMy `npm run dev` is as follows: `\"NODE_ENV=development NODE_PATH=\\\"$(pwd)\\\" browser-refresh --nolazy --inspect=9229 src/index.js\"`\r\n\r\nI'll update if I see anything new or figure out a pattern.  Hi!\r\n\r\nI've been developing with React for the past 2 years and using Marko really feels nice and fresh. :) I love how fast and lightweight it feels\r\n\r\nBut one thing I couldn't figure out and found no examples for, is keeping the `value` of an `input` in sync with the component's `state`. With React, you do `<input value={state.value} onChange={this.onChange} />` where `onChange` calls `setState({ value: e.target.value })` and it just works.\r\n\r\nIntuitively I thought the correct way to go about this in Marko would be to do something like this:\r\n\r\n```\r\nclass {\r\n  onCreate() {\r\n    this.state = { value: 'Hello' }\r\n  }\r\n\r\n  handleInput(e) {\r\n    this.state.value = e.target.value\r\n  }\r\n}\r\n\r\ninput value=state.value on-input('handleKeydown')\r\n-- ${state.value}\r\n```\r\n\r\n`keyDown` is being called, however the component is not rerendering if I type in the input. The text next to it (`-- ${state.value}`) always says `Hello`. Also, the `input` only seems to pick up every second character I type in. If I add a `setStateDirty('value')` to my `handleInput`-function, the input's value always stays at `Hello`. I can tell (by logging) that in this case the component is rerendering (with no visible result though).\r\n\r\nIs my approach fundamentally wrong? How do you normally keep state and input components in sync?\r\n\r\nThanks for your help!\r\n\r\nBest,\r\nMax @mindeavor ah, thank you! :)  ## Bug Report\r\n\r\n### Context\r\n\r\nAt markojs.com, clicking the tab next to \"Color picker\" gives a js error.\r\n\r\n### Expected Behavior\r\n\r\nSwitch tabs.\r\n\r\n### Actual Behavior\r\n\r\nError.\r\n\r\n### Possible Fix\r\n\r\nI'm totally new here.\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: n/a\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4): Chromium Version 56.0.2924.76 Built on Ubuntu , running on LinuxMint 18.1 (64-bit)\r\n* Operating System and version (desktop or mobile): ibid\r\n* Link to your project: n/a\r\n\r\n### Steps to Reproduce\r\n1. load markojs.com\r\n2. open error console (clean at this point)\r\n3. click said link\r\n\r\n### Stack Trace\r\n\r\n```\r\nUncaught Error: Not allowed\r\n    at h.beginAsync (index-83c75fc1.js:63)\r\n    at c.exports (index-83c75fc1.js:110)\r\n    at index-83c75fc1.js:111\r\n    at b.f (index-83c75fc1.js:71)\r\n    at h._ (index-83c75fc1.js:111)\r\n    at index-83c75fc1.js:112\r\n    at b.f (index-83c75fc1.js:71)\r\n    at g._.l.r.type (index-83c75fc1.js:112)\r\n    at index-83c75fc1.js:55\r\n    at index-83c75fc1.js:47\r\nbeginAsync @ index-83c75fc1.js:63\r\nc.exports @ index-83c75fc1.js:110\r\n(anonymous) @ index-83c75fc1.js:111\r\nb.f @ index-83c75fc1.js:71\r\nh._ @ index-83c75fc1.js:111\r\n(anonymous) @ index-83c75fc1.js:112\r\nb.f @ index-83c75fc1.js:71\r\ng._.l.r.type @ index-83c75fc1.js:112\r\n(anonymous) @ index-83c75fc1.js:55\r\n(anonymous) @ index-83c75fc1.js:47\r\nb._t @ index-83c75fc1.js:41\r\n_S @ index-83c75fc1.js:47\r\nupdate @ index-83c75fc1.js:47\r\nh @ index-83c75fc1.js:41\r\nf @ index-83c75fc1.js:41\r\n(anonymous) @ index-83c75fc1.js:41\r\n```\r\n\r\n</details>\r\n  ## Bug Report\r\n\r\n### Expected\r\nI try to build Mixin  mechanism for enhancing marko component\uff0c unfortunately, it seems component instance was created out of normal way. \r\n\r\n### Code\r\n\r\n[___mixins.js : L5 - L13___](https://github.com/wujjpp/marko-starter-kit/blob/master/src/core/mixins/mixins.js#L5-L13)\r\n\r\n```\r\nexport default (...mixins) => {\r\n  class MixedComponent {}\r\n  for (let mixin of mixins) {\r\n    for (let name of Object.keys(mixin)) {\r\n      MixedComponent.prototype[name] = mixin[name]\r\n    }\r\n  }\r\n  return MixedComponent\r\n}\r\n```\r\n\r\n[___history-mixin.js : L1 - L6___](https://github.com/wujjpp/marko-starter-kit/blob/master/src/core/mixins/history-mixin.js#L1-L6)\r\n```\r\nexport default {\r\n  funcInMixin() {\r\n    console.log('funcInMixin called')\r\n  }\r\n}\r\n```\r\n\r\n[___component.js : L5 - L23___](https://github.com/wujjpp/marko-starter-kit/blob/master/src/routes/mixin/components/app-main/component.js#L5-L23)\r\n```\r\nimport {\r\n  Mixins,\r\n  HistoryMixin\r\n} from '../../../../core/mixins'\r\n\r\nvar MixedBaseClass = Mixins(HistoryMixin)\r\n\r\nclass Bar extends MixedBaseClass {}\r\n\r\nexport default class MyClass extends MixedBaseClass {\r\n  foo() {\r\n    //the following 2 lines codes are working as expected.\r\n    var bar = new Bar()\r\n    bar.funcInMixin() //print 'funcInMixin called' in console\r\n\r\n    // In fact,we want component instance has mixed function `funcInMixin`\r\n    // Unfortunately `this.funcInMixin` is undefined, it caused unhandled exception\r\n    this.funcInMixin()\r\n  }\r\n}\r\n``` @patrick-steele-idem Thanks for your help, it works.\r\n\r\n___foo-mixin.js___\r\n```JavaScript\r\nexport default {\r\n  foo() {\r\n    console.log('function called in foo mixin')\r\n  }\r\n}\r\n```\r\n\r\n___bar-mixin.js___\r\n```JavaScript\r\nexport default {\r\n  bar() {\r\n    console.log('function called in bar mixin')\r\n  }\r\n}\r\n```\r\n___mixins.js___\r\n```JavaScript\r\nexport default (...mixins) => (component) => {\r\n  for (let mixin of mixins) {\r\n    Object.assign(component.prototype, mixin)\r\n  }\r\n  return component\r\n}\r\n```\r\n___component.js___\r\n```JavaScript\r\nimport {\r\n  Mixins,\r\n  FooMixin,\r\n  BarMixin\r\n} from '../../../../core/mixins'\r\n\r\nclass MyComponent {\r\n  callFunc() {\r\n    this.bar()\r\n    this.foo()\r\n  }\r\n}\r\n\r\nexport default Mixins(FooMixin, BarMixin)(MyComponent)\r\n```\r\n  `macro` needs to be rewritten!!\r\n\r\n```marko\r\n   <if(xxx)>\r\n      <macro yy()>\r\n        ... if ...\r\n      </macro>\r\n   </if>\r\n   <else>\r\n      <macro yy()>\r\n         .. else ...\r\n      </macro>\r\n   </else>\r\n```\r\n\r\n```javascript\r\n\"use strict\";\r\nfunction render(input, out) {\r\n\tif(xxx){\r\n\t\tfunction macro_yy(){\r\n\t\t\tout.w(\"... if ...\");\r\n\t\t}\r\n\t}else{\r\n\t\tfunction macro_yy(){\r\n\t\t\tout.w(\"... else ...\");\r\n\t\t}\r\n\t}\r\n\r\n\tmacro_yy();   //  it will be throw 'ReferenceError: macro_yy is not defined'  in strict model\r\n\r\n}\r\n\r\n``` @mindeavor Yeah, that's what I'm doing\r\n\r\n```marko\r\n<macro yy()>\r\n   <if(xxx)>\r\n      ... if ...\r\n   </if>\r\n   <else>\r\n      ... else ...\r\n   </else>\r\n</macro>\r\n``` @patrick-steele-idem  thanks  ## Bug Report\r\nNOTE: I'm not sure if it is a BUG, but the vue's behavior is we wanted.\r\n\r\n### Code\r\n\r\n___/routes/index/index.marko___\r\n```\r\n<html>\r\n  <head>\r\n    <title>Welcome | Marko Demo</title>    \r\n    <script src=\"https://unpkg.com/jquery\"/>\r\n    <script src=\"https://unpkg.com/easy-pie-chart/dist/jquery.easypiechart.min.js\"/>\r\n  </head>\r\n  <body>\r\n    <app-main/>\r\n  </body>\r\n</html>\r\n```\r\n\r\n___/routes/index/components/app-main/index.marko___\r\n```\r\nstyle {\r\n  .chart {\r\n    position: relative;\r\n    display: inline-block;\r\n    width: 110px;\r\n    height: 110px;\r\n    margin-top: 50px;\r\n    margin-bottom: 50px;\r\n    text-align: center;\r\n  }\r\n  .chart canvas {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n  }\r\n  .percent {\r\n    display: inline-block;\r\n    line-height: 110px;\r\n    z-index: 2;\r\n  }\r\n\r\n  .percent:after {\r\n    content: '%';\r\n    margin-left: 0.1em;\r\n    font-size: .8em;\r\n  }\r\n}\r\n\r\nclass {\r\n    constructor() {\r\n        this.state = { count:0 };\r\n    }\r\n    onMount(){\r\n      $('.chart').easyPieChart({\r\n        easing: 'easeOutBounce',\r\n        onStep: function(from, to, percent) {\r\n          $(this.el).find('.percent').text(Math.round(percent))\r\n        }\r\n      })\r\n      this.chart = $('.chart').data('easyPieChart')\r\n      this.chart.update(Math.round(Math.random() * 200 - 100))\r\n    }\r\n\r\n    inc() {\r\n        this.state.count++\r\n    }\r\n    dec(){\r\n      this.state.count--\r\n    }\r\n\r\n    updateChart(){\r\n      this.chart.update(Math.round(Math.random() * 200 - 100))\r\n    }\r\n}\r\n<div id=\"app\">\r\n  <div>\r\n    <span>Count: ${state.count}</span>\r\n    <button onClick(\"inc\")>inc</button>\r\n    <button onClick(\"dec\")>dec</button>\r\n    <span>--> Click the \"+\" or \"-\" button, will cause canvas(generated by easy pie chart plugin) be removed, vue doesn't has this issue</span>\r\n  </div>\r\n  <div>\r\n    <span class=\"chart\">\r\n      <span class=\"percent\"/>\r\n    </span>\r\n    <button onClick(\"updateChart\")>Update chart</button>\r\n  </div>\r\n</div>\r\n\r\n```\r\n### Steps\r\nAfter page loaded, the easyPieChart create a canvas inside `<span class=\"chart\"><canvas ..... /></span>`, if you click `Update chart` button, the chart will be refreshed, all things goes well, but if you click `inc` or `dec` button, the canvas disappeared.  actually, we want canvas keep in document.\r\n\r\nVue has the right behavior(we wanted), I have created the same [demo app of vue version](https://jsfiddle.net/wujjpp/or132f6L/) \r\n\r\nAlso, I have uploaded the [marko version of  demo app](https://github.com/wujjpp/marko-vdom-issue.git)\r\n\r\n\r\n @mindeavor Thanks for your reply, and fixed issue in this case.  but it cause `<span class=\"percent\">${Math.round(state.percent)}</span>`  no longer to be updated.\r\nAlthough, we can create special DOM structure to avoid the issue, but it make DOM structure more complex. Anyway, **Thanks for your solution again.**\r\n\r\n[___template.marko : L58-L64___](https://github.com/wujjpp/marko-starter-kit/blob/master/src/routes/test/components/app-main/index.marko#L58-L64)\r\n```\r\n<div class=\"col-md-12\">     \r\n      <span class=\"chart\" no-update>\r\n        <span class=\"percent\">${Math.round(state.percent)}</span>      \r\n      </span>\r\n      <span class=\"btn btn-default\" onClick('updateChart')>Update chart</span>\r\n</div>\r\n```\r\n[___component.js : L8-L51___](https://github.com/wujjpp/marko-starter-kit/blob/master/src/routes/test/components/app-main/component.js#L8-L51)\r\n```\r\nexport default class Test {\r\n  onMount() {   \r\n    $('.chart').easyPieChart({\r\n      easing: 'easeOutBounce',\r\n      onStep: function(from, to, percent) {\r\n        //$(this.el).find('.percent').text(Math.round(percent))\r\n      }\r\n    })\r\n    this.chart = $('.chart').data('easyPieChart');\r\n    this.chart.update(this.state.percent)\r\n  }\r\n  ...\r\n  updateChart() {   \r\n    this.state.percent = Math.random() * 200 - 100\r\n    this.chart.update(this.state.percent)\r\n  }\r\n```\r\n\r\n  @mindeavor Correct, create special DOM structure for handling.\r\n @mindeavor I have another question: \r\nwhat's the difference between \"input\" and \"state\"? like \"props\" and \"state\" in react? @mindeavor Thanks  ### Open Questions\r\n<!--- What still needs to be discussed -->\r\nI understand marko can be used with a number of server side frameworks like express that handle URL dispatching but does it include any client side router or are any plans to support this?\r\n\r\nThanks I like the JSX-syntax support in React Router. Also need solid support of server-side rendering. The Inferno port of React Router is probably worth looking at: https://github.com/infernojs/inferno/tree/master/packages/inferno-router Any update on this? \r\n\r\nBesides the router I think a router-link core component would be needed,  similar to this: https://router.vuejs.org/en/api/router-link.html  :+1: Maybe something like `<taglib('./path/to/taglib') />` or `<marko-tag('./path/to/tag.marko') />`, to avoid overloading `import`? I agree with @mindeavor that auto-detection has worked extremely well. \r\n\r\nAre you proposing this change instead of defining a `tags-dir` withn a `marko.json`?  Looks like bug is fixed. I just reinstall all my modules and now everything work like expected I'm getting this error: \r\n\r\n`Uncaught TypeError: component.$__setCustomEvents is not a function`\r\n\r\nwhen using multi files structure for components and exporting as a class.  `module.exports = class {}.`\r\nIt works when a literal object is exported `module.exports = {}.`\r\n \r\nmarko version is  4.2.0\r\nnode: 6.10  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\nI'm trying to use `$!{}` to output some HTML that is generated on the server, but it's not rendering.\r\n\r\n### Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug.  How has this bug affected you? What were you trying to accomplish? -->\r\n\r\nI am passing an `input` tag like this: `<input type=\"text\" value=\"\" />`. Looking at the element in chrome devtools it looks like:  `<INPUT type=\"text\" value=\"\"></INPUT>`. If I edit the element in devtools to be like the input it works fine.\r\n\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\nIt should output: `<input type=\"text\" value=\"\" />`\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nIt outputs:  `<INPUT type=\"text\" value=\"\"></INPUT>`\r\n### Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 4.1.3\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4): Node 6.9.2\r\n* Operating System and version (desktop or mobile): Ubuntu 16.04\r\n\r\n### Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\nAdd the following component to your app:\r\n\r\n```\r\nclass {\r\n\r\n  onCreate() {\r\n    this.state = {\r\n      html: \"<input type='text' name='test' value='x' />\"\r\n    }\r\n  }\r\n}\r\n\r\n<div>$!{state.html}</div>\r\n```\r\n<!-- If an error is thrown, provide the stack trace here -->\r\n\r\n</details>\r\n A regular `div` tag works fine, although the tag is upper-cased. An `img` tag has the same problems as `input`, so it seems to be a problem with tags that don't require a closing tag. Excellent. Thank you.  Related to: https://github.com/marko-js/marko/issues/619\r\n\r\n<!--- Provide a general summary of your changes in the Title above -->\r\nReplaced constructor with onCreate\r\n## Description\r\n<!--- Describe your changes in detail -->\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [ ] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [ ] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/10717211/badge)](https://coveralls.io/builds/10717211)\n\nCoverage remained the same at 90.093% when pulling **3558b5a0dff24ec65d0b29d7c4b6017c9e41ca83 on basickarl:patch-1** into **e24c00eb8b34242173a81eaee3a0c1e6ce4d54b7 on marko-js:master**.\n  ### Context\r\n\r\nHey @patrick-steele-idem , i'm using marko v3 in production and i'm trying to convince my team to upgrade to marko v4\r\n\r\nI'm trying to find the performance diff between v3 and v4\r\n\r\nDo you guys know where i can find? or do you guys have something to help me speed up this upgrade\r\n\r\nThanks! Both :rocket:  Really Thanks in advance @patrick-steele-idem :beers:   Updated `counter.marko` example in `ReadME.md` file to use `onCreate()` instead of `constructor()` \n[![Coverage Status](https://coveralls.io/builds/10645416/badge)](https://coveralls.io/builds/10645416)\n\nCoverage remained the same at 90.093% when pulling **3b3e10d1e156a93d65b752cacc4d494c0f6e1ca4 on krypton97:master** into **3c604ed11f2b815ea4fe369471a2555b03383399 on marko-js:master**.\n  You actually can serialize functions, I'm working on a dashboard using VueJS that takes advantage of that.  with nunjucks i can {{ var | dump }}, what is the equivalent for marko? @patrick-steele-idem Yes, deleted my comment. ;-)  ### Open Questions\r\nHow do you implement css in isolation with markojs?  With the movement of component based authoring instead of document.  People found that its better to isolate css selectors to per component as opposed to its default cascading nature.\r\n\r\nIs this something marko js aim to solve?\r\n\r\n### Is this something you're interested in working on?\r\nYes\r\n Do you mean having a separate stylesheet for each component? You can either use the new `style { ... }` tag, or put a `style.css` in the component's directory and make sure your bundler finds it.\r\n\r\nIf you mean actually *restricting* the CSS to specific sections of the final document, as far as I know that's not possible (except in Firefox with `<style scoped>`). Other frameworks just quietly add extra classes and selectors to make it *look* that way. More of the latter,\r\n\r\nIt's not possible doing it in css alone.  However, it is possible with the help of a build step. Basically obfuscating the classname with hashes eg. `.container` _becomes_ `.cn2o3j`.\r\n\r\nPrior art are css-modules, styled-components, styled-jsx.\r\n This is one of the reasons I'm still using Vue.js. It has support for scoped CSS via classname injection.\r\n\r\nThe other reason is that .vue files are just HTML files, so you don't need to use prefixes like `$` or `-`, and they don't need their own editor extensions for syntax highlighting. @mindeavor, I don't want to derail this topic, but .vue files support `<script>` and `<style>` elements,  so there's no need to put your JavaScript in a string.\r\n\r\nAnd according to the [HTML spec](https://html.spec.whatwg.org/multipage/syntax.html#attributes-2), there's nothing wrong with dots in attribute names.\r\n\r\nSee [Single File Components](https://vuejs.org/v2/guide/single-file-components.html) for more information.\r\n\r\n![image](https://cloud.githubusercontent.com/assets/468153/24052357/3882643a-0b03-11e7-874e-d47865057648.png) @patrick-steele-idem I think I'm leaning towards Vue's implementation as a recommendation. Which is just hooking up to post-css.  With post-css you can basically create any transform you want, sass, less, css-modules.\r\n\r\nSince we'll all shoving this down to compiler step.  There won't be any added bulk to the final output.\r\n\r\n +1 Vue like implementation Random idea: if the style processing can actually take a list of processors then a `scoped` processor could perhaps be created. This would allow things such as `style.scoped { ... }` and `style.less.scoped { ... }`. +1 Vue like implementation :+1:   On a related note, should `class { ... }` be renamed to `component { ... }`? That seems like a more accurate description, fits better with the theme (`style { }` => `style.css`, `component { }` => `component.js`), and would be less likely to confuse new users who expect it to behave like an ES6 `class`. I use a lot of classes outside of Marko specific code and use the onCreate method instead of the constructor method to avoid confusion. I advocate removing the `constructor` method and standardize the `onCreate` method across both `module.exports` and the `Marko` class component definition.   <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\nThe `await` tag basic implementation and advanced use signature.\r\n\r\n## Motivation and Context\r\nI wanted to fill in the basic implementation because it's so handy. If you think this will help users I will also volunteer to document the advanced usage but doing so could take a whole page. Your thoughts?\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/10542523/badge)](https://coveralls.io/builds/10542523)\n\nCoverage remained the same at 86.815% when pulling **2ed2fe3e6c9d5b4ee62645871d490682c7d66ec1 on tcrowe:await-docs-basic** into **bce2727c60a1072aaaef3cff682408a079b9977a on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/10542570/badge)](https://coveralls.io/builds/10542570)\n\nCoverage remained the same at 86.815% when pulling **2b05f8d5803af2a70f20e53ba1f78a88c969ec6e on tcrowe:await-docs-basic** into **bce2727c60a1072aaaef3cff682408a079b9977a on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/10542629/badge)](https://coveralls.io/builds/10542629)\n\nCoverage remained the same at 86.815% when pulling **623610bf0262af56826812359387ff9b7f8003a3 on tcrowe:await-docs-basic** into **bce2727c60a1072aaaef3cff682408a079b9977a on marko-js:master**.\n @mindeavor Yes you can. You can discover a lot about it from here:\r\nhttps://github.com/marko-js/marko/search?utf8=%E2%9C%93&q=await You're welcome! \ud83d\udc4d   <!----------------------------------------------------------------------\r\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\r\n  ---------------------------------------------------------------------->\r\n## New Feature\r\n\r\n### Description\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\n\r\n### Context\r\n<!--- Why is this change important to you? How would you use it? -->\r\n<!--- How can it benefit other users? -->\r\n\r\n### Possible Implementation\r\n<!--- Not obligatory, but suggest an idea for implementing addition or change -->\r\n\r\n### Open Questions\r\n<!--- What still needs to be discussed -->\r\n\r\n### Is this something you're interested in working on?\r\n<!--- Yes or no -->\r\n\r\n<!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\nI started out following the webpack-marko integration tutorial on http://markojs.com/docs/webpack/\r\nand got the error message \"error in cannot find module 'marko/compiler' \" even with webpack version 1.14.0.\r\n\r\n### Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug.  How has this bug affected you? What were you trying to accomplish? -->\r\n\r\n![image](https://cloud.githubusercontent.com/assets/26175060/23806596/203176dc-0577-11e7-9360-70c1c5e68089.png)\r\n\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n\r\n### Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used:\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4):\r\n* Operating System and version (desktop or mobile):\r\n* Link to your project:\r\n\r\n### Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. \r\n2. \r\n3. \r\n4. \r\n\r\n### Stack Trace\r\n<!-- If an error is thrown, provide the stack trace here -->\r\n\r\n</details>\r\n I think this is because `marko-loader` does not depend on the `marko` package.  If you install the marko package this should work:\r\n\r\n```sh\r\nnpm install --save-dev marko\r\n# or\r\nyarn add --dev marko\r\n``` To be clear, this is consistent behavior for any webpack `*-loader`: For example, when using the babel-loader, babel-core needs to be installed separately. Try this , if you like [marko starter kit](https://github.com/wujjpp/marko-starter-kit)  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug.  How has this bug affected you? What were you trying to accomplish? -->\r\nI was working on a personal project and wanted to replace an existing rendered component with the newly rendered one using the following code:\r\n\r\n```javascript\r\nvar $featured = document.querySelector('.featured_fish');\r\nvar featuredFish = require('../fh-featured-fish');\r\n\r\n// featuredFish reference: \r\n//  https://gist.github.com/pcanella/da7eb300409034ed93c2ffe7525ed656\r\n\r\nfeaturedFish.render(f).then(function(result){\r\n        result.replace($featured);\r\n});\r\n```\r\n\r\nThen, in console I get the following issue \r\n\r\n`Uncaught (in promise) TypeError: destroyElRecursive is not a function(\u2026)beforeRemove @ bundle.js:3670replace @ bundle.js:3691(anonymous function) @ bundle.js:5274`\r\n\r\n\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\nIdeally, it should just replace the dom element, right?\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead -->\r\n`Uncaught (in promise) TypeError: destroyElRecursive is not a function(\u2026)beforeRemove @ bundle.js:3670replace @ bundle.js:3691(anonymous function) @ bundle.js:5274`\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: V4\r\n* Environment name and version: Version 54.0.2840.71 (64-bit)\r\n* Operating System and version (desktop or mobile): OS X on Chrome\r\n* Link to your project: Not up yet, so I really don't have a repo at the moment...\r\n\r\n### Stack Trace\r\n<!-- If an error is thrown, provide the stack trace here -->\r\n`Uncaught (in promise) TypeError: destroyElRecursive is not a function(\u2026)beforeRemove @ bundle.js:3670replace @ bundle.js:3691(anonymous function) @ bundle.js:5274`\r\n</details>\r\n @patrick-steele-idem ah! I am actually using browserify/markoify for this specific instance. This is my script I run before `app.js` runs\r\n\r\n`\"browserify -g markoify --extension='.marko' assets/js/main.js -o assets/js/bundle.js`\r\n\r\nMy \"main.js\" file just has some document level event binding (working on getting rid of that, but it doesn't really affect marko at all)  Don't understand. Why not just use a function? @andersea It actually hooks into a built-in extension system that's been part of `require()` since almost the beginning, but it has also been deprecated for nearly as long ([require.extensions](https://nodejs.org/api/globals.html#globals_require_extensions)).\r\n\r\nIt was originally decided that the added convenience outweighed the risk (#78). However, with the related changes Patrick mentioned, this may be the perfect time to rethink that.\r\n\r\nAlso, it's not *necessary* to use the extension, the old way still works without it:\r\n```js\r\nvar template = require('marko').load(require.resolve('./path/to/template.marko'));\r\n``` Thanks for that answers. Closing.  Koa 2.0.1 is released as `latest` version, so, these docs needs to be updated. Also added gzip example to feature Koa + Marko streaming flexibility. \n[![Coverage Status](https://coveralls.io/builds/10482007/badge)](https://coveralls.io/builds/10482007)\n\nCoverage remained the same at 87.104% when pulling **f6af3372e757fff3c414dc3702a9675919860074 on tinovyatkin:master** into **aec7ae301361754943aabbaca52464188a0f28f1 on marko-js:master**.\n  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\nThe developer can `require` marko files then use component auto init.\r\n\r\nI found out about it in the [marko-webpack/src/pages/home/client.js](https://github.com/marko-js-samples/marko-webpack/blob/master/src/pages/home/client.js) file.\r\n\r\n## Motivation and Context\r\nIt may be helpful to include it in the documentation.\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [ ] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/10456017/badge)](https://coveralls.io/builds/10456017)\n\nCoverage decreased (-2.8%) to 87.074% when pulling **25c38059755b1f6b6ac81af4a94b2525a77a8417 on tcrowe:comp-auto-init** into **6e5f5fe4f3cc02abcb124097254dc8c13d1534fe on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/10456017/badge)](https://coveralls.io/builds/10456017)\n\nCoverage decreased (-2.8%) to 87.074% when pulling **25c38059755b1f6b6ac81af4a94b2525a77a8417 on tcrowe:comp-auto-init** into **6e5f5fe4f3cc02abcb124097254dc8c13d1534fe on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/10456017/badge)](https://coveralls.io/builds/10456017)\n\nCoverage decreased (-2.8%) to 87.074% when pulling **25c38059755b1f6b6ac81af4a94b2525a77a8417 on tcrowe:comp-auto-init** into **6e5f5fe4f3cc02abcb124097254dc8c13d1534fe on marko-js:master**.\n  I noticed that docs for express integration just have you `require('marko/express')`, which means it's using the side-effect pattern to modify the global `express.response` object.\r\n\r\nThe typical express middleware pattern would be:\r\n\r\n```js\r\nconst express = require('express')\r\nconst marko = require('marko/express')\r\n\r\nconst app = express()\r\napp.use(marko)\r\n```\r\n\r\nIs there a specific reason marko/express doesn't use the middleware pattern?\r\n\r\nLooking at [marko/express.js](https://github.com/marko-js/marko/blob/v4.0.0/express.js), it doesn't seem like it needs to cause side-effects to integrate with express.\r\n\r\nUsing side-effects instead of the middleware pattern means that you can't isolate marko integration to a specific express app, route, or path. Granted, the current implementation is opt-in (you only call `res.marko` if you need to) but if more features are added to express integration, the inability to isolate the integration may become a problem.  I am new to Marko, and I found a tricky error when I try to layout the html page in sections.\r\n\r\nsrc/component/app-sections/index.marko\r\n```html\r\n<div class=\"panel-body\" style=\"background-color: #eee;\">\r\n      <form class=\"form-horizontal\" key=\"anything\" role=\"form\">\r\n         <div class=\"form-group\" for(section in data.sections)>\r\n          <label class=['col-md-3', 'control-label'] style=\"text-align: left;\">\r\n            ${section.label} <if(section.requiredField)><span.field_req_designator>*</span></if>\r\n          </label>\r\n          <div class='col-md-9'>\r\n            <include(section)/>\r\n          </div>\r\n      </form>\r\n</div>\r\n```\r\n\r\nWhen I add \"key\" attribute like this `<form class=\"form-horizontal\" key=\"anything\" role=\"form\">`, it will report such an error below. If I removed the key, everything compiles fine.\r\n```\r\n[marko/hot-reload] Template successfully reloaded: /Users/dofu/git/epnportal/src/components/app-sections/index.marko.js\r\nevents.js:160\r\n      throw er; // Unhandled 'error' event\r\n      ^\r\n\r\nError: Async fragment failed. Exception: Error: No component found\r\n    at Error (native)\r\n    at getCurrentComponent (/Users/dofu/git/epnportal/node_modules/marko/components/taglib/helpers/getCurrentComponent.js:13:15)\r\n    at Object.render (/Users/dofu/git/epnportal/src/components/app-sections/index.marko.js:20:21)\r\n    at hotReloadProxy (/Users/dofu/git/epnportal/node_modules/marko/hot-reload/index.js:82:31)\r\n    at Object.render (/Users/dofu/git/epnportal/src/components/app/index.marko.js:62:3)\r\n    at hotReloadProxy (/Users/dofu/git/epnportal/node_modules/marko/hot-reload/index.js:82:31)\r\n```\r\n\r\nThe rest pieces of code:\r\n~/src/component/app/index.marko\r\n```html\r\n<div>\r\n  <app-sections>\r\n    <@section label='Advertiser' requiredField=true>\r\n      <app-dropbox name='advertiser' options=dropboxAdvertiser />\r\n    </@section>\r\n</div>\r\n```\r\n\r\n~/src/component/app-sections/marko-tag.json\r\n```json\r\n{\r\n  \"@sections <section>[]\": {\r\n    \"@label\": \"string\",\r\n    \"@requiredField\": \"boolean\",\r\n    \"@*\": \"string\"\r\n  }\r\n}\r\n```\r\n\r\nI am really excited to see Marko v4 coming out with many new features, bravo! @mindeavor In the [official document](http://markojs.com/docs/components/#codekeycode), it mentions:  \r\nThe key attribute can be applied to **both HTML elements and custom tags for UI components**. If applied to an HTML element, a unique id attribute will be added to the HTML element. The assigned ID will be a concatenation of the parent component ID with the provided value of the key attribute.\r\n\r\nI think my use case is to apply on the html element. And, later, I can use `this.getEl(elId)` to manipulate the DOM. @patrick-steele-idem Thanks for the clarification, that makes sense!  ## Bug Report\r\n\r\n### Context\r\nI'm trying to use a single-file component as `components/{name}.marko` instead of `components/{name}/index.marko`.\r\n\r\n### Expected Behavior\r\nApp starts and is able to serve that page (localhost:8000).\r\n\r\n### Actual Behavior\r\nThe stacktrace below is thrown when the app starts.\r\n\r\n### Your Environment\r\n* Version used:\r\n  * marko 4.0.0\r\n  * lasso 2.11.5\r\n  * lasso-marko 2.3.0\r\n\r\n### Steps to Reproduce\r\n1. clone https://github.com/drewfish/marko-bug606\r\n2. run `npm install`\r\n3. run `node server.js` and see the error as mentioned\r\n\r\n### Stack Trace\r\n```\r\n/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/compiler/Compiler.js:84\r\n        throw error;\r\n        ^\r\n\r\nError: An error occurred while trying to compile template at path \"/Users/drew/dev/node-moomet/research/bugx/components/page-meter/index.marko\". Error(s) in template:\r\n1) [components/page-meter/index.marko:9:13] Unrecognized tag: meter-channel - More details: https://github.com/marko-js/marko/wiki/Error:-Unrecognized-Tag\r\n\r\n    at handleErrors (/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/compiler/Compiler.js:82:21)\r\n    at Compiler.compile (/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/compiler/Compiler.js:151:9)\r\n    at _compile (/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/compiler/index.js:89:33)\r\n    at Object.compile (/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/compiler/index.js:103:12)\r\n    at compile (/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/node-require.js:52:38)\r\n    at Object.markoRequireExtension [as .marko] (/Users/drew/dev/node-moomet/research/bugx/node_modules/marko/node-require.js:120:27)\r\n    at Module.load (module.js:487:32)\r\n    at tryModuleLoad (module.js:446:12)\r\n    at Function.Module._load (module.js:438:3)\r\n    at Module.require (module.js:497:17)\r\n``` Hmm... it looks like I can workaround this by adding entries to my marko.json like this:\r\n```json\r\n{\r\n    \"<meter-channel>\": {\r\n        \"renderer\": \"./components/meter-channel.marko\"\r\n    },\r\n    \"tags-dir\": \"./components\"\r\n}\r\n``` Looking at the implementation of compiler/taglib-loader/scanTagsDir.js this might be a feature request (instead of a bug) \ud83d\ude04   ## Bug Report\r\n\r\n### Context\r\nWhen a component `class` has a parsing issue, the exception thrown has a typo. Additionally, `Error:` is appended to the message twice.\r\n\r\n### Expected Behavior\r\nThe error should read: `Unable to parse JavaScript for **component** class.`\r\n\r\n### Actual Behavior\r\nThe error output is: `Unable to parse JavaScript for componnet class. Error: Error:`\r\n\r\n### Possible Fix\r\nFix typo and remove `Error:`. Can tackle this issue if needed.  Hello,\r\n\r\nI am using Marko (great tool by the way!) to generate XML.\r\nI have a \u00abroot\u00bb .marko file and a few included files. I would like to keep the indentation in the rendered file for various reasons.\r\n\r\nHowever, when I indent the xml tags in the included file, I have this error:\r\n` Line has extra indentation at the beginning`\r\n\r\nThe root .marko file looks like this:\r\n```\r\n<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>\r\n<myxml>\r\n    <include(\"./myxml-include.marko\", data)/>\r\n</myxml>\r\n```\r\n\r\nAnd the included file (note the indentation):\r\n```\r\n    <SubObject>\r\n        <Value>primary</Value>\r\n    </SubObject>\r\n```\r\nIs there a way to remove this formatting rule?\r\n\r\nThanks! Thanks, it's working!  I have a question.\r\n\r\nWhat about the templates that have `Class` like in marko widget?\r\n\r\nSince The bodies of class declarations and class expressions are executed in strict mode.\r\n\r\nAnd what about the compiled templates also use class?\r\n\r\nThanks!\r\n\r\nreference:\r\n\r\nhttps://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes Got it @patrick-steele-idem thanks!  Biggest reason for this is parity with `onClick` which has access to the full data/state/input context.\r\n\r\nindex.marko-current\r\n```\r\n<div onClick('handleFoo')>click</div>\r\n```\r\n\r\ncomponent.js:\r\n```\r\nmodule.exports = {\r\n   handleFoo( e ) {\r\n     alert( this.getFullName() );\r\n   }\r\n   getFullName() {\r\n     return input.firstName + \" \" + input.lastName\r\n   }\r\n}\r\n```\r\n\r\nCompare the `-current` and `-proposed` convenience, debuggability, consistency, etc.\r\n\r\nFor some (many?) functions, eventually those component functions may move to a more structured project lib, but during initial development, having all functions available in `this.*` and `component.*` is extremely convenient.\r\n\r\nindex.marko-proposed\r\n```\r\n<div onClick('handleFoo')>${ component.getFullName() }</div>\r\n$ console.log( component.getFullName() )\r\n```\r\n\r\nindex.marko-current\r\n```\r\nimport helper from './helper'\r\n<div onClick('handleClick')>${ helper.getFullName( input, state ) }</div>\r\n$ console.log( helper.getFullName( input, state ) )\r\n```\r\n\r\ncomponent.js-current\r\n```\r\nimport helper from './helper'\r\nmodule.exports = {\r\n   handleClick() {\r\n     alert( helper.getFullName( input, state ) );\r\n   }\r\n}\r\n``` Yep... just pointing out why it's an improvement over the current options / alternatives.\r\n\r\n`${ component.getFullName() }` would make me very happy. :-)  I got an situation here.\r\n\r\nMy team is using `await` in a page that we need to handle more then one Promise\r\nThey tried to use something like this\r\n\r\n```HTML\r\n<await(data from firstProvider)>\r\n    <await(complementData from secondProvider)>\r\n    </await>\r\n</await>\r\n```\r\n\r\nThey said to me they got some errors with nested `await` and i was thinking in two solutions for this scenario\r\n\r\nI was thinking about wrap the Promises in an especifc provider and use `Promise.all(requests)`\r\n\r\nor create a custom tag like this one `<await-all(data from [Promise1, Promise2, ....])</await-all>`\r\n\r\nWhat is the best solution to implement something like this?\r\n\r\nWhat do you think about it??\r\n\r\nThanks and i'm in love with marko :rocket:  ```HTML\r\n<var watcher=Promise.all([firstProvider(), secondProvider()] />\r\n<await(response from watcher) ></await>\r\n```\r\n\r\ni will test something like this! Here's my demo/test about this issue\r\n\r\nhttps://github.com/mauricionr/marko-demo\r\n\r\n```HTML\r\n<var watchers=Promise.all([data.promise1, data.promise2]) />\r\n```\r\n\r\nthe service \r\n\r\n```javascript\r\nmodule.exports = () => {\r\n    return new Promise((resolve, reject) => {\r\n        request.get(config.categories, (error, response, body) => {\r\n            setTimeout(() => {\r\n                resolve(JSON.parse(body));\r\n            }, 5000)\r\n        })\r\n    })\r\n}\r\n```\r\nthe controller\r\n\r\n```javascript\r\nmodule.exports = (req, res) => {\r\n    template.render({\r\n       name:'Mauricio Nunes dos reis',\r\n       colors:['red', 'green', 'blue'],\r\n       promise1:categorieService(),\r\n       promise2:categorieService()\r\n   }, res)\r\n}\r\n```\r\n\r\nthe view\r\n\r\n```HTML\r\n<!DOCTYPE html>\r\n<html>\r\n    <head>\r\n        <meta charset=\"UTF-8\">\r\n        <title>Marko Demo</title>\r\n    </head>\r\n    <body>\r\n        <h1>Marko Demo</h1>\r\n        <h2>${data.name}</h2>\r\n        <section>\r\n            <ul>\r\n                <li for(color in data.colors)>${color}</li>\r\n            </ul>\r\n        </section>\r\n        <var watchers=Promise.all([data.promise1, data.promise2]) />\r\n        <await(response from watchers) client-reorder=true>\r\n            <await-placeholder>\r\n                Loading data...\r\n            </await-placeholder>\r\n            <await-error>\r\n                An error occurred!\r\n            </await-error>\r\n            <await-timeout>\r\n                A timeout occurred!\r\n            </await-timeout>\r\n\r\n            <h3>Promise1</h3>\r\n            <section>\r\n                <ul>\r\n                    <li for(cat in response[0])>${cat.name}</li>\r\n                </ul>\r\n            </section>\r\n            <h3>Promise2</h3>\r\n            <section>\r\n                <ul>\r\n                    <li for(cat2 in response[0])>${cat2.name}</li>\r\n                </ul>\r\n            </section>\r\n        </await>\r\n        <await-reorderer/>\r\n    </body>\r\n</html>\r\n```\r\n\r\nWorks well :rocket: \r\n\r\nBut i could not see the *Loading data* and i'm using the tag `await-placeholder`\r\n\r\nSince i'm using `json-server` to fake and json api, i put an timeout to looks like the real world and could not see the loading.\r\n\r\nAny guess?\r\n\r\nThanks guys!! @mlrawlings yes, but you can double check if really is server-side rendering here's the [demo](https://github.com/mauricionr/marko-demo)  In `rc.17` and earlier, Marko would automatically add a widget's `index.marko` to the internal dependency array if needed. As of `rc.20`, the `<class { ... } />` tag adds the `index.marko` to the dependency list as expected, but if a `component.js` or `component-browser.js` is used instead then it will add that to the dependencies, but *not* the corresponding `index.marko`. @mlrawlings Looks like a `console.log` slipped through, and it's not marked as `latest-beta`. But other than that it works! :)  ## Question\r\n\r\nI'm using marko and is awesome\r\n\r\nMy question is, there's any Best Practice guide for production enviroment?\r\n\r\nThanks guys! For client-side, see #490; The documentation is still a work-in-progress. Patrick mentioned using `minprops` and `envify` to reduce code size, but you should really just follow the standard best practices for *all* client-side code: Minify, gzip, and cache responsibly. How you actually *do* that depends on your other libraries and frameworks - `express`, `lasso`, etc.\r\n\r\nServer-side, the only recommendation I'm aware of is to set `NODE_ENV=production`. That's because `Marko` is designed to be the best of both worlds - convenient in development, efficient in production.  \n[![Coverage Status](https://coveralls.io/builds/10269446/badge)](https://coveralls.io/builds/10269446)\n\nCoverage increased (+0.003%) to 89.811% when pulling **35dc0c4429b9adbca2bc774e6c2a07b8d905c1d7 on 593-scriptlet-metadata** into **34f60a777ad6fd1ce9e7c78b5cca774982695ded on master**.\n  Strawman argument was for:\r\n\r\n```\r\n<scope>\r\n   $ var x = 1\r\n   $ var y = 2\r\n   This is ${x}, ${y} valid.\r\n</scope>\r\nThis is ${x}, ${y} undefined.\r\n```\r\n\r\n...compiling to an IIFE for scope protection, and using `$ ...` for JS execution.\r\n\r\nRationale is that a dangling `$ var x = ...` at the top of a file could have spooky action at a distance towards the bottom of the file, but if it were captured in some sort of `<scope> ...` block then the area required to analyze is much smaller. A lot of tags generate nested functions, so with `$ var ...;` it's impossible to know where the scope begins or ends until you look at the compiled output - it could stop at the nearest parent tag, or extend all the way to the top-level render function. That *usually* doesn't matter, but it would be nice to have a more explicit way to handle variable scope.\r\n\r\nI agree with using `$ ...;` for inline javascript, but things like tag scope need to be handled by the compiler. So here's my idea: The `<var>` tag could be reintroduced, with `<var ...></var>` compiling to an IIFE as before. However, self-closing `<var ... />` tags would now be *template*-scoped.\r\n\r\nExample:\r\n```html\r\n<if(input.foo)>\r\n  <var foo=input.foo /><!-- hoisted -->\r\n  <var bar=input.bar><!-- scoped -->\r\n    $ console.log(foo, bar);\r\n  </var>\r\n  <var foo=null /><!-- hoisted -->\r\n</if>\r\n$ console.log(foo); // input.foo ? null : undefined\r\n$ console.log(bar); // ReferenceError\r\n```\r\n```js\r\nvar foo;\r\nif (input.foo) {\r\n  foo = input.foo;\r\n  (function(){\r\n    var bar = input.bar;\r\n    console.log(foo, bar);\r\n  })();\r\n  foo = null;\r\n}\r\nconsole.log(foo); // input.foo ? null : undefined\r\nconsole.log(bar); // ReferenceError\r\n```\r\n\r\nA name other than `<var>` could be used for backward-compatibility, but ~~`v4` has already shipped without it~~, and I feel it would be fairly easy to explain that \"`<var ... />` is now template-scoped\".\r\n\r\n> Edit: Whoops, looks like `<var>` is still present in `v4` but it prints a deprecation warning. Still, at this point I think it would be safe enough to make this change.  just stumbled into something similar, this works:\r\n\r\n```\r\nclass {\r\n    sayHi() {\r\n        alert(`Hi!`);\r\n    }\r\n}\r\n\r\n<main>\r\n    <h1>test</h1>\r\n\r\n    <button on-click('sayHi')>Click me!</button>\r\n</main>\r\n```\r\nthis works:\r\n```\r\n<include('../../layout.marko')>\r\n    <@body>\r\n        <main>\r\n            <h1>test</h1>\r\n \r\n            <button>Click me!</button>\r\n        </main>\r\n    </@body>\r\n</include>\r\n```\r\nbut this doesn't:\r\n```\r\nclass {\r\n    sayHi() {\r\n        alert(`Hi!`);\r\n    }\r\n}\r\n\r\n<include('../../layout.marko')>\r\n    <@body>\r\n        <main>\r\n            <h1>test</h1>\r\n \r\n            <button on-click('sayHi')>Click me!</button>\r\n        </main>\r\n    </@body>\r\n</include>\r\n```   <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\nplacing non-breaking space (`&nbsp;`) in a template element renders out as `\u00c2` on the browser (VDOM).\r\n\r\n### Expected Behavior\r\nshould render simply as (`&nbsp;`)\r\n\r\n### Actual Behavior\r\nrenders as `\u00c2`.\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n```\r\n< div class=\"cartCoupTitle\" >\r\n        ${coup.title}< br/ >\r\n        < span class=\"cartCoupGUID\" >${coup.GUID}< /span ><br/>\r\n        < strong >Expires< /strong > &nbsp; &nbsp;${coup.expires}\r\n< /div >\r\n```\r\n\r\nVDOM\r\n\r\n``` marko_forEach(state.productCoupons, function(coup) { \r\nout.e(\"div\", marko_attrs31, 2) \r\n.e(\"div\", marko_attrs32, 7) \r\n.t(coup.title) .n(marko_node27) \r\n.e(\"span\", marko_attrs34, 1) \r\n.t(coup.GUID)\r\n .n(marko_node28) \r\n.n(marko_node29)\r\n .t(\" \u00c2\u00a0\u00c2\u00a0\") \r\n.t(coup.expires) \r\n.e(\"div\", marko_attrs33, 1) \r\n.e(\"strong\", null, 2) \r\n.t(\"$\") \r\n.t(coup.authorizedPrice); }); \r\n```\r\n</details>\r\n  +1  Hello,\r\n\r\nWhile refactoring for `rc14` I realise that new syntax for `data.renderBody` invocation must be like this:\r\n\r\n```\r\n$ if(data.renderBody) data.renderBody(out);\r\n```\r\nThat's not looks very good inside a HTML like template. May be it's better to create a dedicated tag like `<tag-body-out />` for that purpose? It will be rendering for nothing or body... Simple and elegant? is `data` deprecated too and we should use `input` instead?  Or could be more vue like\r\n\r\nfor((key, value) in data)//object\r\n\r\nAnd\r\n\r\nfor(item in data)//array\r\n\r\nThanks :)  ```\r\nWARNING!!\r\nThe \"<invoke>\" tag is deprecated. Please use \"$ <js_code>\" for JavaScript in the template. See: https://github.com/marko-js/marko/wiki/Deprecation:-var-assign-invoke-tags\r\n  at node_modules/marko/taglibs/core/invoke-tag.js:3:13\r\n```\r\n\r\nnote the module where it happens...  \n[![Coverage Status](https://coveralls.io/builds/10073306/badge)](https://coveralls.io/builds/10073306)\n\nCoverage decreased (-0.001%) to 89.82% when pulling **724f8addf843df941416ded82c1b02f308102e86 on 574-picture-tag** into **097ebc15b3a348de2ec07ee4eb3a01b40aad7eb1 on master**.\n  Compilation broken with error `Unrecognized tag: picture` while `picture` is certainly a standard HTML5 tag   \n[![Coverage Status](https://coveralls.io/builds/10060503/badge)](https://coveralls.io/builds/10060503)\n\nCoverage increased (+0.006%) to 89.391% when pulling **768d8085f7adc8811e027ec7a88cae682a703a9e on 558-deprecate-tags** into **41b2c0878a6c9af69fb22889e97cee5495fc9bdb on master**.\n \n[![Coverage Status](https://coveralls.io/builds/10060503/badge)](https://coveralls.io/builds/10060503)\n\nCoverage increased (+0.006%) to 89.391% when pulling **768d8085f7adc8811e027ec7a88cae682a703a9e on 558-deprecate-tags** into **41b2c0878a6c9af69fb22889e97cee5495fc9bdb on master**.\n  \n[![Coverage Status](https://coveralls.io/builds/10060177/badge)](https://coveralls.io/builds/10060177)\n\nCoverage decreased (-0.04%) to 89.34% when pulling **608d098cffb0019bf2eee34dc4583943761434f0 on 570-ref-to-key** into **41b2c0878a6c9af69fb22889e97cee5495fc9bdb on master**.\n  I do think \"key\" is a more accurate description, though I'm not entirely convinced the change is necessary. My only major concern would be possible naming collisions - I can think of plenty of other uses for a custom \"key\" attribute, but not very many for \"ref\", which has always been pretty much reserved for widgets anyway. That's not to say I disagree, but I'd like to hear a few more pro's and con's.\r\n\r\nIf this change is implemented, I would be in favor of providing a temporary / opt-in `\"ref\" -> \"key\"` alias, perhaps in a `marko-v3-compat` package like what was suggested in #558. Ah, forgot about React. I'd say those are pretty good reasons to make the switch.  \n[![Coverage Status](https://coveralls.io/builds/10036031/badge)](https://coveralls.io/builds/10036031)\n\nCoverage increased (+0.02%) to 89.332% when pulling **00dda0a537e306cf063e8d3103679c316617bf41 on 487-template-compiler-version** into **ffdc91382fb41484585b60ea98f840d3f8f5b25f on master**.\n \n[![Coverage Status](https://coveralls.io/builds/10036496/badge)](https://coveralls.io/builds/10036496)\n\nCoverage increased (+0.02%) to 89.332% when pulling **645d184da0abc2b854931f2718dd75e9d382c616 on 487-template-compiler-version** into **ffdc91382fb41484585b60ea98f840d3f8f5b25f on master**.\n \n[![Coverage Status](https://coveralls.io/builds/10036496/badge)](https://coveralls.io/builds/10036496)\n\nCoverage increased (+0.02%) to 89.332% when pulling **645d184da0abc2b854931f2718dd75e9d382c616 on 487-template-compiler-version** into **ffdc91382fb41484585b60ea98f840d3f8f5b25f on master**.\n  <!--- Provide a general summary of your changes in the Title above -->\r\nThis fix will ensure that an empty array does not output a an empty class attribute: `class=\"\"`.\r\n\r\n## Description\r\n- modified helpers.js line 55 adds ` || null` when the array is empty (because a joined empty array is falsy);\r\n- fixed tests to accommodate\r\n\r\n## Motivation and Context\r\nI was attempting to use arrays for class names because of the utility of concatenating them together was taken up by Marko. But, when the array was ever empty, I would have the `class=\"\"` throughout my app, and my tests. This issue added unnecessary bloat. Therefore, the motivation for this fix.\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [X] I have updated/added documentation affected by my changes.\r\n- [X] I have read the **CONTRIBUTING** document.\r\n- [X] I have added tests to cover my changes.\r\n- [X] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/9985791/badge)](https://coveralls.io/builds/9985791)\n\nCoverage remained the same at 84.055% when pulling **0460d268ea3a412ebb91877da56f0c7847177f4b on seangates:v3** into **3ed82b7a0013ab8f8a1e82fc33447738e156cf7e on marko-js:v3**.\n @mindeavor Noted. Fixed!  I just switched from rc 8 to 12 and my widgets getTemplateData method is no longer being called in any of my widgets. Was this removed for some reason? I have no problems with it being removed, just didn't realize it was, so it broke my code when I moved form rc 8 to 12. I couldn't tell if it was a bug or intended. I tried looking at the revisions, but couldn't make heads or tales of where the change actually happened. :)\r\n\r\nI was only using it because the [Roadmap ](https://github.com/marko-js/marko/blob/master/ROADMAP.md) under heading **New widget lifecycle methods**  shows the getTemplateData method in the **new** list. So I thought I was supposed to be using it. :) I guess the roadmap doc just needs to be updated to remove it. \r\n\r\nThanks for confirming.  An error should not be thrown -- https://html.spec.whatwg.org/multipage/scripting.html#custom-elements That just goes back to the boilerplate issue I opened a while back -- https://github.com/lasso-js/lasso-marko/issues/3\r\n\r\nNow, if the parser encounters `<my-awesome-element>...</y-awesome-element>` then it should certainly throw an error. But the author may be fully expecting `<my-awesome-element/>` to be dumped into the rendered HTML as-is. I'm definitely against this being the default, but I would love to have this as an opt-*in* setting. Whitelisting tags is decent, but whitelisting tags b/c hopefully someday somebody will use concise-mode is making the wrong tradeoff in my mind.  Disable concise-mode by default.  All (most) issues with top-level tags magically go away  (eg: the following gem `ex0007.marko`).  Tags are tags.  `<for>` is `<for>` (and is wrapped in a tag, not a bareword).  It is a *serious* struggle to get behind \"floating `class` statements\" as is. (specifically referring to single-file-components).\r\n\r\n```\r\n$ cat ex0007.marko\r\nthis is\r\nfor\r\nyou\r\n<h1>Test</h1>\r\n\r\n$ markoc *.marko\r\n- Failed to compile \"ex0007.marko\". Error: Error: An error occurred while trying to compile template at path \"/home/rames/Git/marko-v4-spa-example/src/pages/test/ex0007.marko\". Error(s) in template:\r\n1) [ex0007.marko:2:0] Invalid <for> tag. Argument is missing. Example: <for(color in colors)>\r\n```\r\n @mindeavor @ramses0 How would disabling concise mode actually solve the problem being discussed, which is whether to throw an error when an invalid tag is encountered? I understand that you don't like the syntax, but many of us do and are using it in production.\r\n\r\nP.S.: You can use HTML syntax for the new tags, too: `<class { ... } />` `<static { ... } />`. @Hesulan - root level text is terrible.  My vote is for putting it into a `<div>`.  It is especially terrible when \"for he's a jolly good fellow\" gets parsed as a `<for ...` tag by marko.  However, \"concise mode\" has to treat every word in the file as if it _might_ be a tag (or `class` or `static` or `import` or whatever else exists in the global marko keyword namespace).  As someone who doesn't use concise mode, I see that trying to serve two masters in \"single file components\" is incredibly short-sighted.\r\n\r\nThe current single-file-component format has the benefit that it is backed by working code, but as an outsider / recreational user of markojs, I see it as full of traps for implementors and users, especially compared to non-single-file-components.  It also appears as though you can't really opt out of single-file component mode either. @ramses0 \r\nYou have a point, root level text is definitely a downside. But it's also easily solved with a `-- `, and aside from a \"Hello World!\" file, it would be difficult to find many real world use-cases.\r\n\r\nSingle-file components are still entirely optional, they're just more convenient than writing a separate `component.js` when working with small, simple components. The only component-related thing that I know of in v3 that won't work in v4 is `<script marko-init>`, which is being replaced by `<static>`.\r\n\r\nI do understand preferring HTML over concise, and it's my opinion that the official documentation should try to use HTML syntax as much as possible (even though I almost always use concise). @mindeavor I'm still unclear on *how* disabling concise syntax would solve the problem, or how it's at the root of it. +1 for throwing an error. Many complex projects rely on knowing when there is an issue with an unknown or incorrect tag. @mindeavor I'm not sure what that has to do with throwing errors for invalid tag names, and those are all just different examples of the same thing - plain text as a root element.\r\n\r\n@patrick-steele-idem On further thought, I think I would agree with throwing errors by default, as long as it's easy to disable and clearly documented. @mindeavor Ah, I see what you meant now. That's not the point though, the point is to catch invalid tag names. Root level text in concise mode is just one of the *many* ways that a typo could slip past, and to simply disable such a widely used feature by default would be a huge overreaction and wouldn't solve the problem of invalid tag names. Catching accidental root-level concise tags is only a nice *side*-effect of the proposed solution. @mindeavor From what I understood, the reason this came up is because if you type something like `<ing ... />` it's quite likely that you *meant* to type `<img ... />` unless you've explicitly defined a custom `ing` tag. Throwing an error would *also* help to catch accidental concise tags. I honestly can't remember the last time I even used root-level text outside of a Hello World example, but I can see how it would get annoying.\r\n\r\nI do think only throwing on single-word tags is a reasonable condition, and I believe @mlrawlings mentioned something similar earlier in this thread. @mlrawlings would you be in favor of splitting out the potential discussion: \"require concise mode to be explicitly opted in to\"?\r\n\r\nI believe it would require:\r\n\r\n```\r\n<class {\r\n  onClick() { ... }\r\n}/>\r\n```\r\n\r\n...which makes total sense to me.  Or a flag to explicitly opt out of the potential bugginess / confusion of mixing concise-mode, markojs single file components, javascript, and HTML?  I keep hearing `--` is the magic token, but haven't seen any documentation on that.  `\"use strict\"` is a precedent, `@concise-mode` was a strawman syntax, even `@strict-html` or `@disable-concise` would be welcome.  Hope I'm not hi-jacking the thread here, but on the topic of Classes, it seems you cannot use the extend keyword. If I make a component using a class that extends another class, it fails due to a instance check \"_classCallCheck\" where the instance is the Widget class, but it's checking for the Constructor of the parent. I get a failure of \"cannot call a class as a function\". This _seems_ to be caused by how Babel transpiles e6 code. Here's the relevant compiled code.\r\n\r\n```\r\n       function _classCallCheck(instance, Constructor) {\r\n            if (!(instance instanceof Constructor)) {\r\n                throw new TypeError(\"Cannot call a class as a function\");\r\n            }\r\n        }\r\n        var Test = function() {\r\n            function Test() {\r\n                _classCallCheck(this, Test);\r\n            }\r\n            _createClass(Test, [{\r\n                key: \"constrcutor\",\r\n                value: function constrcutor() {\r\n                    console.log(parent);\r\n                }\r\n            }]);\r\n            return Test;\r\n        }();\r\n        var Room = function(_Test) {\r\n            _inherits(Room, _Test);\r\n            function Room() {\r\n                _classCallCheck(this, Room);\r\n                return _possibleConstructorReturn(this, (Room.__proto__ || Object.getPrototypeOf(Room)).apply(this, arguments));\r\n            }\r\n            _createClass(Room, [{\r\n                key: \"onInput\",\r\n                value: function onInput(input) {\r\n                    console.log(\"IT WORKED\");\r\n                }\r\n            }]);\r\n            return Room;\r\n        }(Test);\r\n        exports.default = Room;\r\n        module.exports = exports[\"default\"];\r\n```\r\n\r\nYou can see the _classCallCheck is called twice, once for the child, once for the parent. It's the parent call that fails as the instance is \"Widget\" but the Constructor is \"Room\".\r\n\r\nIs this the same issue as you mentioned above? @jasonmacdonald Michael was talking about the `<class { ... } />` tag. None of the code generated by Marko currently compiles to anything greater than ES5, and javascript classes are ES6. Could babel be trying to compile the `.marko` template by mistake? For sure it's Babel compiling the es6 classes. I'm trying to use a class as my component definition. But, it seems to be Marko that is adding the _classCallCheck to the compiled component definition. @jasonmacdonald I'm not quite sure what you mean, but using a class as a component definition is invalid. The `<class { ... } />` tag mentioned here is just a convenient syntax (with a bit of a misleading name), it doesn't *actually* generate an instantiable class. Sorry if I'm not being clear. I'm talking about Marko 4 widgets, defining a widget component using an ES6 Class instead of an Object. I'll start a different thread as this one isn't what I thought it was. Thanks!  @mlrawlings I think this really comes down to the developer knowing that using a v3 taglib in v4 can be tricky. These tags aren't the only breaking changes; The switch from `-` to `--` in concise comes to mind, along with several other edge-cases. Unless the parser and compiler can be switched into some sort of \"legacy\" mode whenever an outdated taglib is being loaded, I don't see any other way around the occasional compatibility issue, though in some cases a `marko-v3-compat` taglib might help. As a recreational user of marko v3 transitioning to v4, I am 100% in favor of \"kill stuff that's going to die\" (ie: `var`, etc).  `npm install markojs-v3-deprecated` is totally fine by me.\r\n\r\nI *will* say that I am especially disappointed by the removal of the `<var>...</var>` special tag.\r\n\r\nConceptually being able to scope my sins of using `<var/>` in my logicless templates in the first place is invaluable.  Forgive my use of tables (throwaway code during development), but I used them like this:\r\n\r\n```\r\n      <var\r\n        flavors=data.fnRandomFlavors( data.selection )\r\n        ingredients=data.fnRandomPopularIngredients()\r\n      >\r\n        <h1>${data.fnCap(data.selection)} and...</h1>\r\n             <td align=\"right\"><a href=\"/drinks-with/${data.selection}/$${flavors[0]}\">\r\n              ${data.fnCap(flavors[0])}\r\n            </a></td>\r\n            <td>or</td>\r\n            <td><a href=\"/drinks-with/${data.selection}/$${flavors[1]}\">\r\n              ${data.fnCap(flavors[1])}\r\n            </a></td>\r\n          </tr>\r\n          <tr>\r\n            <td align=\"right\"><a href=\"/drinks-with/${data.selection}/${ingredients[0]}\">\r\n              ${data.fnCap(ingredients[0])}\r\n            </a></td>\r\n            <td>or</td>\r\n            <td><a href=\"/drinks-with/${data.selection}/${ingredients[1]}\">\r\n              ${data.fnCap(ingredients[1])}\r\n            </a></td>\r\n          </tr>\r\n```\r\n\r\n\r\nThe introduction of `$ var flavor=input.someFunc()` kill the template and you end up with PHP all over again.\r\n\r\nWhat I mean is that with a scoped `<var>` tag, I can easily determine if the template is factorable (ie: what dependencies or requirements it might have).\r\n\r\nWith a \"dangling `$ var ...`\" statement... Every. Single. Line. after that `$ var ...` statement is suspect, and requires brainpower to determine if it is using any of the declared `$ var ...` variables.\r\n\r\nIn summary:\r\n\r\n1) marko-v3-compat package is totally fine\r\n\r\n2) killing `<var />`, or encouraging the use of `$ ...` for anything other than debugging is bordering on criminal (it basically makes the entire file unable to be reasoned about unless the human first does a \"compilation pass\" looking for `$ var ...` and then remembering where it is used).\r\n\r\nI've written and seen enough bad PHP, and bad JS, written by good people (but not good programmers) that I would view use of markojs as highly suspicious.\r\n\r\n*THINK* about this.  When you see `Array.prototype.something = function() { ... }` does that make you happy that the person before you was so clever? Or fill you with rage that now you have to audit the entire source tree for uses of `*.prototype` and then see how that interacts with the rest of the codebase?\r\n\r\nIn the below code, `<var a=...>` is demonstrable better from a maintenance programmer perspective compared to `$ var b=...;`  Neither is ideal, but `<var a=...>` as a shortcut to make the layout of the template easier, cleaner, etc. is much better.\r\n\r\n```\r\n<div>\r\n    <var a=fnFoo()>\r\n        ...snip...\r\n        Hello ${a}\r\n    </var>\r\n    $ var b=fnBar();\r\n    ...snip...\r\n    <div>\r\n    ...snip...\r\n    Hello ${b}\r\n    </div>\r\n</div>\r\n @ramses0 I believe the main reason for deprecating `<var>`, `<assign>`, `<invoke>`, etc. is because the number of tags that attempt to simulate real javascript was becoming unmanageable, but you make a good point.\r\n\r\n@mlrawlings Perhaps it would be a good idea to hold off on removing the `<var>` tag? I feel like it's enough of a special case to warrant keeping it around, especially since it fits each syntax so nicely. @mindeavor Internally, a `<var>` tag with body text compiles to an IIFE, which enforces scope:\r\n```html\r\n<var foo=1 bar=2>\r\n    /* ... */\r\n</var>\r\n```\r\n```js\r\n(function(){\r\n    var foo=1, bar=2;\r\n    /* ... */\r\n})();\r\n``` Will there be (or is there) a way within marko to trigger an IIFE context for scope protection, as referenced in this comment?\r\n\r\nhttps://github.com/marko-js/marko/issues/558#issuecomment-277313323 `<scope/>` is elegantly nasty in a way.  :-) ... it makes it very clear what you're doing, but still requires you to use `$ ...` but then you know your `$ ...`'s can't infect outside that `<scope>` block.  I guess I'm highly in favor of it... good design instinct.  \"it would be nice\" if there was a setting to emit a warning of something like the following:\r\n\r\n```\r\nWarning: file.marko:123  raw javascript `$ ...` found not at top of file or top of <scope> block.\r\n```\r\n\r\nie: encourage `$` items to be in blocks at the beginning of the file instead of randomly sprinkled throughout.  If I can consistently open a template and know that `$ ...` is all bunched up at the top then I'll be a much happier camper.  But adding in a `$ ...debugging()...` randomly might be perfectly appropriate and encouraged (just not checked in / not for prod).\r\n\r\nIn short, though... I really appreciate you taking into consideration the issue of `<scope>` and would be highly in favor of it!  \n[![Coverage Status](https://coveralls.io/builds/9949120/badge)](https://coveralls.io/builds/9949120)\n\nCoverage increased (+0.02%) to 89.23% when pulling **526acaed4475c31379081feee143adb17b5e87a8 on 363-hot-reload-extensions** into **35517181e1e9602222b12bdfd7fb62767595c8d8 on master**.\n  <!----------------------------------------------------------------------\r\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\r\n  ---------------------------------------------------------------------->\r\n## New Feature\r\n\r\n### Description\r\nI am using .html files only with marko html in it, but that prevents me from using marko's hot reload.\r\n\r\nLines:\r\n- v4: https://github.com/marko-js/marko/blob/master/hot-reload/index.js#L133\r\n- v3: https://github.com/marko-js/marko/blob/v3/hot-reload/index.js#L128 (and maybe L136 too)\r\n\r\n### Context\r\nI know that it's probably recommended to use .marko.html but I would like to stick with my implementation where I use `require('marko/node-require').install({ extension: '.html' })`.\r\n\r\n### Possible Implementation\r\nIt would be cool if there would be an options object so I could simply use `{ extension: 'html' }` in the hot reload `.enable()` method too, or maybe even use the extension string from the install so that would work automatically.\r\n\r\n### Open Questions\r\nSee above.\r\n\r\n### Is this something you're interested in working on?\r\nYep, as long as it's clear how the implementation would work\r\n Sorry for the duplicate, I should have searched for that. Will think of that, but I have no idea how marko works so I don't know whether I will fit into this. I have currently fixed it manually editing the file for now.  Not sure if this is known, but I was testing a simple Marko 4 Widget in IE and it fails when trying to call new Symbol(). This doesn't appear to be supported in IE 11. As you can see [here ](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Symbol) Symbol isn't supported on any IE versions. Is this intended?\r\n\r\nIs it expected that we need to pollyfill fill this? Promise is also missing from compiled bundle. :(  Here's the snippet where it appears...\r\n\r\n```\r\n},{}],49:[function(require,module,exports){\r\nvar KEY = Symbol();\r\n\r\nfunction UniqueId(out) {\r\n    this.prefix = out.global.widgetIdPrefix || 'w';\r\n    this.nextId = 0;\r\n}\r\n\r\nfunction nextWidgetId(out) {\r\n    var global = out.global;\r\n\r\n    var idProvider = global[KEY] ||\r\n        (global[KEY] = new UniqueId(out));\r\n\r\n    return idProvider.prefix + (idProvider.nextId++);\r\n}\r\n```\r\n\r\nThis is using Browserify to compile. Maybe Browserfiy is adding it? Nope, looks like it's coming from widgets/util.js, which is included by Widget.js\r\n\r\nInterestingly, I switched to try and compile with Webpack and that util package doesn't seem to appear in it's output. So I guess Browserify is including stuff it shouldn't. Grr, too many options/differences with these damn bundlers. I switched over to Webpack and the issue seems to have gone away. However, if I can find a few mins I'll put together a simple project to show the issue. I'll close this for now and update if I can put something together, @jasonmacdonald Just wanted to add, because you mentioned `Promise` not being bundled: Marko doesn't provide a Promise polyfill, and as far as I know the only parts of Marko that require a global `Promise` object are the AsyncStream's `.then()` and `.catch()` methods, and only if you choose to call them.  This might be just me not fully understanding Widget scopes/states, or more likely it's working as intended, but if I have Widget (A) and Widget (B). Widget A uses Widget (B) in it's template and supplies some body content (template) for Widget B. The data scope is bound to Widget A for that body content and not Widget B (which actually renders it). \r\n\r\nExample\r\n\r\nWidget A Template - data = 1\r\n```\r\n<widgetB data=\"2\">\r\n   <!-- trying to declare this inner content as a template \r\n   to be used to render the contents of Widget B -->\r\n   <div>${data}</div>\r\n</widgetB>\r\n```\r\n\r\nWidget B template - data = 2\r\n```\r\n<!--I want this to render the body declared in Widget A, but use the data scope of this Widget B-->\r\n<div w-body></div>\r\n```\r\n\r\nThis ends up rendering the value **1** in the div, not **2.**\r\n\r\nWhat I was hoping was that the scope of WidgetB's data, value (**2**), would be supplied to the transcluded content. I suspect this is working as intended, but is there a way to get the result I was hoping for? \r\n\r\nWhat I'm trying to do is have widgetB  be able to declare a template to be used inside it's own template when rendered. Think of a tile list component, where I'm trying to supply a transcluded template to be used to render each tile when the tile list renders, rather than declaring the tile itself inside the tile list, for re-usability and flexibility. So each tiles data would be driven internal to Widget B, and I'm defining the template ${params} externally. I also tried using input.renderBody(out, WidgetB_data), inside WidgetB. But, that still seems to use WidgetA data. Thanks, mlrawlings! I'll give these a try! I think I might have a snag, all this assumes I'm only rendering the transcluded content once. But what I'm trying to do is use the transcluded content template as an itemRenderer for a loop, basically.\r\n\r\nsomething like this (very simplified)\r\n\r\nWIdget\r\n```\r\n<tileList data=\"${some_array_of_items}\">\r\n    <div>${item}</div>\r\n</tileList>\r\n```\r\n\r\nTileList\r\n```\r\n<div for(item in items)>\r\n    <div w-body></div>\r\n</div>\r\n```\r\n\r\nSeems if I manually call input.bodyRenderer() it would just repeat the same content. Maybe I'm approaching this wrong. I'm just trying to make a reusable tielist component for an image gallery, where the user of the component can easily define how the content is rendered by specifying the item renderer in the body. I know I could have them define a path to a template to be used for rendering, was just trying to avoid extra files. oh, let me try that! You're the best, mlrawlings! Cheers! Wish I knew more of these secrets :) Can Marko Widgets use Marko 4? NPM complains that Marko Widgets wants a Peer dependency for 3.0 oh, really? I'll definitely use that then ok, awesome. Got Marko 4 all set-up and things seems to be working, for the most part. One thing I can't seem to get to work anymore is the \"var\" part to add the extra variable to the renderBody.\r\n\r\nI've tried adding it to the marko-taglib and also to the top of the component with...\r\n\r\n```\r\nexports.tag = {\r\n    \"var\": \"item\"\r\n}\r\n```\r\n\r\nBUt the compiled output doesn't seem to add the var anymore. I had it working in Marko 3. Did this part change? I can't find anything about how to do these configs in the [Roadmap page.](https://github.com/marko-js/marko/blob/v4.0.0-rc.8/ROADMAP.md).\r\n\r\nI'm sorry for the all the questions. :( ok, after some trial and error, I was able to get the \"var\" to appear in the compiled output, but only if I added a marko-tag.json file to the \"Widget\" component directory, along side my component.js and index.html. I used the following JSON\r\n\r\n```\r\n{\r\n  \"var\": \"item\"\r\n}\r\n```\r\n\r\nNo clue if this is correct way though. We used to be able to add these in the component file using an exports.tag, but that doesn't seem to work anymore. Kind of annoying to have to add another file to accomplish this.\r\n\r\nI'm still a bit muddy on all these JSON files (marko-taglib.json vs marko-tag.json vs marko.json) and where exactly they are supposed to live. It seems I need to have a marko-tag.json somewhere high in the directory that defines the components directory defining \"tags-dir\": \"./src/components\" or nothing gets found.\r\n\r\nI'm sure it's just me fumbling my way through this without docs :(   I think it's not readable and clear like old syntax. Example if you are newbie in marko world and you see\r\n```\r\n<script template-helpers>\r\n   function sum(a, b) {\r\n      return a + b;\r\n   }\r\n</script>\r\n```\r\nYou can easy understand that some logical operations is happen in script tags but if you see\r\n\r\n```\r\nstatic function sum(a, b) {\r\n   return a + b;\r\n}\r\n```\r\nYou can think someone try to write in output \"static function ... etc\". Also if you need to write really to output something like this you need to wrap this code and it's not intuitive.\r\n\r\nI like marko html syntax and custom tags because it make me fill everything is standard with some extra power.\r\n\r\nAnother thing why i like html syntax is if i have already written code in html it's really easy to integrate with my project without any other efforts but otherwise result can be unexpected.\r\n\r\nI don't like concise, mix syntax and maybe i am wrong. @Eldar-X \r\nYou're certainly not alone in preferring standard over concise syntax. I personally prefer concise, but I do feel that the official documentation should use HTML syntax whenever possible.\r\n\r\n@mindeavor @patrick-steele-idem \r\nI much prefer using a separate tag rather than hijacking `<script>`. Even with the `template-helpers` or `marko-init` attribute, the first time I saw that it took a while to click. Someone new to Marko might not realize that it transforms top-level `<script>` and `<style>` tags, but when I see something like `<static>` or `static { /* ... */ }` I immediately recognize that it's special.\r\n\r\n@patrick-steele-idem \r\nI really like this proposal. Correct me if I'm wrong, but I'm assuming the HTML syntax would look like:\r\n```\r\n<static {\r\n    function myHelper() { /* ... */ }\r\n} />\r\n<component class {\r\n    onInput() { /* ... */ }\r\n} />\r\n```\r\nWould `<static>` still accept body content like `<script marko-init>` did?\r\n```\r\n<static>\r\n    function myHelper() { /* ... */ }\r\n</static>\r\n``` If we do, it will be a problem to put spaces after $ because most of our text editors can divide our code like this\r\n```\r\n<div>\r\nLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris \r\nnisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. \r\nExcepteur sint occaecat cupidatat non proident, sunt in culpa $\r\n{\r\n// What?\r\n} qui officia deserunt mollit anim id est laborum.\r\n<div>\r\n\r\n``` \r\nAlso i still think it should be at least for html version at least inside tags maybe like this\r\n```\r\n<$>\r\nvar myCode = true;\r\n</$>\r\n\r\n<{>\r\nvar myCode = true;\r\n<}>\r\n\r\n<${>\r\nvar myCode = true;\r\n</}>\r\n\r\n``` @patrick-steele-idem The only problem I see is that the `$ ...` would be parsed as a tag name in concise, but as text in HTML. I would prefer either `<$></$>`, or making that concise-only (in HTML you'd probably want to use `$${ ... }` instead anyway).\r\n\r\nOther than that I like this proposal. Though I do feel it's important to mark this as a breaking change, since anyone previously using something like `$${price}` will now need to escape the first `$`. ~~Actually, now that I think about, I feel like it would be more intuitive if the behaviors of `$${ ... }` and `<% ... %>` were swapped (then `$${...}` would be a multi-line, multi-statement version of `${...}`), but that *might* be too much of a breaking change.~~\r\n\r\nEdit: Whoops, nevermind. For some reason I was thinking `$${...}` would replace `static { ... }`. Haven't had my coffee yet this morning. 1) When this moves forward, will the deprecate state be eternal? Or is there a timeline to remove the old syntax? People tend to stick to the old syntax until forced to change. Will there be a migration tool?\r\n2) I guess this is not related to the syntax change, but is JS linting possible in JS embedded in marko file?\r\n3) I prefer a syntax that permits parsing such that we can still write easy-to-read, lint-able code (without changing a team's current JSLint/ESLint settings) - i.e., multi-lined object literal, usual indents, etc. For small JS, I am okay having it in marko; for larger JS, my preference is to put it in separate JS file. I'd want to be able to move the JS from marko to JS file without reformatting.\r\n4) I prefer a single way of doing things - syntax flexibility of doing the same thing tends to end up in multiple ways of writing code within the same code base - and leads to endless discussion in opinions. @mikewoo200 \r\n1. I'm not aware of anything in Marko that's ever been deprecated for too long without being removed, but with a change like this there will be plenty of deprecation notices. There will also be a migration tool sometime after v4 is released.\r\n\r\n2. That would depend on whether the linter you're using supports linting only a section of the file. Alternatively, you could lint the entire resulting `.marko.js` file.\r\n\r\n3. That's one of the main reasons for these changes; the way it's currently done doesn't make that easy, but the `class { ... }` syntax would. 2. What's a good linter than supports linting only a section of the file? We wouldn't lint`.marko.js` because it's a generated file that we don't check into our app codebase. @patrick-steele-idem, for \"valid JS\" linting (unused, undefined, etc.), what you mentioned would work. But for style linting (spaces, indents) in the template, what can we do? @patrick-steele-idem I'm a little unclear on the exact behavior of `$${ ... }`. Is it the same as `<% ... %>`, or will you be able to `return` something from it to be inserted into the document? For example, would this:\r\n```\r\n<div>\r\n    $${\r\n        return result;\r\n    }\r\n</div>\r\n```\r\ndo basically the same thing as `<div>${result}</div>`?\r\n\r\nI'm also not sure that `$${ ... }` needs to be restricted to the beginning of the line. It makes perfect sense for `$ ...`, but why not allow this:\r\n```\r\n<div>$${\r\n    /* ... */\r\n}</div>\r\n``` @mlrawlings I like that, though I'm not sure what you mean by \"special case `$` to *disallow* `$ { ... }`\".\r\n\r\nHere's my interpretation of the parser logic:\r\n* If the tag name is `$`, immediately begin parsing as a multi-line expression (which also tracks `depth` within `{}`, `()`, and `[]` pairs)\r\n* Continue until `char === \"\\n\" && depth === 0` (end of line and we're not inside a pair of brackets)\r\n* If the expression text spans multiple lines and begins with `{`, strip the opening `{` and closing `}`\r\n\r\nIf you need to enclose a multi-line tag's content in a javascript block statement, you'll simply need to use two pairs of brackets:\r\n```\r\n$ { /* begin script */ { /* begin block */\r\n   /* ... */\r\n/* end block */ } /* end script */ }\r\n```\r\nOptionally, the single-line syntax could *also* strip a single pair of surrounding brackets to avoid confusion. I'm late to the party, but I want to add my voice in support of *not* \"concise\" syntax. I do not think floating JS blocks are indicative enough of the code being associated with the template system. And as someone who abhors the \"class\" sugar, I'd be loath to use it solely for that reason. I would much rather see something like the following:\r\n\r\n```\r\n<marko-script>\r\nmodule.exports = {\r\n  handleClick: function (event) {}\r\n}\r\n</marko-script>\r\n``` @jsumners I don't completely disagree - it would be nice to have a more HTML-like syntax - but after digging through the compiler code and giving it a lot of thought I'm personally convinced in favor of `class`. Also keep in mind that `<class {} />` (or `<script> module.exports = ... </script>`) is really just a convenience to avoid writing a separate `component.js` for small, simple components.\r\n\r\n@patrick-steele-idem @mlrawlings On a related note, could `<static>` fall back to using body-text if the `{ /* ... */ }` attribute is omitted? I think a lot of users would prefer that, and it would certainly ease the transition from `<script marko-init>`. @patrick-steele-idem Yes, but could it fall back to parsing body-text if the block is omitted?\r\n```\r\n<static {\r\n   /* ... */\r\n} />\r\n```\r\n```\r\n<static>\r\n   /* ... */\r\n</static>\r\n``` @mlrawlings I only meant for `<static>`, and only in the way that's already used by `<script marko-init>` (which `<static>` is replacing). It wouldn't make sense for `<class>`, and I really don't like hijacking tags like `<style>`.  ## Bug Report\r\n\r\n### Context\r\n\r\nI'm trying to compile the following template:\r\n\r\n```html\r\n<script marko-init>\r\n  const states = {\r\n    foo: 'bar'\r\n  };\r\n</script>\r\n<p>${(state_names[state] || state)[0].toUpperCase()}</p>\r\n```\r\n\r\nBut the grouping around `(state_names[state] || state)` is not respected in the output.\r\n\r\n### Expected Behavior\r\n\r\n```js\r\n// ...\r\n\r\n  return function render(data, out) {\r\n    out.w(\"<p>\" +\r\n      escapeXml((state_names[state] || state)[0].toUpperCase()) +\r\n      \"</p>\");\r\n  };\r\n}\r\n\r\n// ...\r\n```\r\n\r\n### Actual Behavior\r\n\r\n```js\r\n// ...\r\n\r\n  return function render(data, out) {\r\n    out.w(\"<p>\" +\r\n      escapeXml(state_names[state] || state[0].toUpperCase()) +\r\n      \"</p>\");\r\n  };\r\n}\r\n\r\n// ...\r\n```\r\n\r\nSee how the grouping around `state_names[state] || state` is dropped.\r\n\r\n### Your Environment\r\n\r\n* Version used:\r\n* Marko 3.14.0\r\n* Node.js 6.9.2\r\n* macOS Sierra (10.12.2) Thanks a lot!  I have a template that is in HTML format, but the parser is assuming concise mode, so warnings for issue 43 and 48 from htmljs-parser are now popping up in the console.\r\n\r\nHow do you disable concise mode if you do not use it? I didn't know about wrapping with `--` as I couldn't find any documentation on that.  Thanks for the tip.  That should work, and probably much easier than figuring out how to change marko to pass the concise: false option to htmljs-parser  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Extra quotation marks on output of non string objects\r\n\r\nWhen variable is not a string output have extra quotation marks\r\n\r\n```\r\nconst template = require('template.marko');\r\ntemplate.stream({\r\ntest : new Date();\r\n})\r\n\r\n// template file\r\n\r\n<div data-test=\"${data.test}\"/>\r\n// Output is\r\n<div data-test=\"\"2017-01-19T12:58:42.801Z\"\"></div> \r\n// In marko v3 output was\r\n<div data-test=\"2017-01-19T12:58:42.801Z\"></div> \r\n```  ## Exporting data from template\r\n\r\nI think it would be very nice feature if we can exporting data from template files because now marko files have much power and we can make logical operations some times we just want to export result for using it somewhere else.\r\n\r\n### Example use case:\r\n\r\nWe have cms and we want define output fields for this template then in our admin page we want get all fields of selected template file for fill them.\r\n  Looks like what i need.\r\nLet's make some example something like this is working?\r\n```\r\n// foo.marko\r\n<script>\r\nvar fields = {};\r\n</script>\r\n\r\n<div class=\"myField-1\">\r\n <% fields[\"first\"] = {\r\n name:\"firstField\",\r\n type:\"textarea\"\r\n} %>\r\n</div>\r\n\r\n<div class=\"myField-2\">\r\n <% fields[\"second\"] = {\r\n name:\"secondField\",\r\n type:\"datePicker\"\r\n} %>\r\n</div>\r\n\r\nexport var info = {\r\n name: \"Home Page\",\r\nfields: fields\r\n}\r\n\r\n// bar.js\r\nconst template = require('foo.marko');\r\nconsole.log(template.info) // name: \"Home Page\", fields: { first, second }\r\n```  <!----------------------------------------------------------------------\r\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\r\n  ---------------------------------------------------------------------->\r\n## Inline output support for marko widgets\r\n\r\n<!--- Provide a detailed description of the change or addition you are proposing -->\r\nWhile marko widget now part of marko.js how about add support for printing compiled output of widgets inline to template file without bundlers? \r\n\r\n<!--- Why is this change important to you? How would you use it? -->\r\nI think it's important feature because widgets must be independent from 3rd part tools but can provide support for them.\r\n Now for working with marko we must bundle output of widget yes? But why we can't just put output of widget into html between script tag? for example we have onclick listener in our widget why just not put in html? I know that bundled js have some better features but it also may be not bad Even the simplest widget depends on the `marko/widgets` runtime, which needs to be bundled anyway. It *might* be possible to add a compiler optimization to recognize this edge case and use plain JS instead, but that could easily break something. Alternatively, you could just add `<script>document.getElementById(...).addEventListener(...);</script>` yourself or even write a custom attribute transformer.\r\n\r\nIf you're just wanting specific widgets to be embedded in the page rather than included in the main bundle, most bundlers provide a way to do that. Lasso, for example:\r\n```json\r\n{\r\n     \"dependencies\": [\r\n        { \"require\": \"./component.js\", \"inline\": true }\r\n    ]\r\n}\r\n```\r\nWhich results in something like:\r\n```html\r\n<body>\r\n    ...\r\n    <script src=\"/static/page-1ae394d6.js\"></script>\r\n    <script>\r\n        /* component.js */\r\n    </script>\r\n</body>\r\n```   \n[![Coverage Status](https://coveralls.io/builds/9689890/badge)](https://coveralls.io/builds/9689890)\n\nCoverage remained the same at 88.696% when pulling **7ff3d9bea59c89cc1f9346b36af288d3a832fcc2 on greenkeeper/fs-extra-2.0.0** into **f419c9f8e4bd8c285fba38c96b6a684402819597 on master**.\n \n[![Coverage Status](https://coveralls.io/builds/9689890/badge)](https://coveralls.io/builds/9689890)\n\nCoverage remained the same at 88.696% when pulling **7ff3d9bea59c89cc1f9346b36af288d3a832fcc2 on greenkeeper/fs-extra-2.0.0** into **f419c9f8e4bd8c285fba38c96b6a684402819597 on master**.\n  \n[![Coverage Status](https://coveralls.io/builds/9687277/badge)](https://coveralls.io/builds/9687277)\n\nCoverage decreased (-0.03%) to 88.666% when pulling **f26e6ef22b518986f5b07621377364f1392c5c70 on 532-markoc-version** into **f419c9f8e4bd8c285fba38c96b6a684402819597 on master**.\n  \n[![Coverage Status](https://coveralls.io/builds/9657182/badge)](https://coveralls.io/builds/9657182)\n\nCoverage remained the same at 88.708% when pulling **9ee4909c4c820d05faa3794028cabca3ab5cd4f9 on greenkeeper/md5-hex-2.0.0** into **1564788f2e0b84dce79d755602b7bdf9f26f8a58 on master**.\n   Directories named `~node_modules` and `~runtime` seem to have been accidentally added to the NPM package starting from `4.0.0-beta.6`, bringing the `package.tgz` size from < 300 kB to > 3 MB. Still there as of `4.0.0-rc.0`.\r\n\r\n/cc @patrick-steele-idem @mlrawlings   @patrick-steele-idem and @mlrawlings This reflects the behavior that was available in v3 with getInitialState and I don't see any problems with backwards compatibility. Thank You!  I've been following the 4.0 milestone, however I'm getting the following error: \r\n\r\n```\r\nError: An error occurred while trying to compile template at path \"site/components/hero-image/index.marko\". Error(s) in template:\r\n1) [site/components/hero-image/index.marko:3:2] The include attribute must have an argument. For example: include(\"./target.marko\") or include(data.renderBody)\r\n```\r\n\r\nHowever, with respect to https://github.com/marko-js/marko/issues/418, examples and notes illustrate the following approach:\r\n\r\n```include()``` is the same as ```include(data.renderBody)```\r\n\r\nCommit https://github.com/marko-js/marko/commit/306e19b88e9e305c83b9da1b4eab3fa8e028ee8f introduces the body-slot tag. \r\n\r\nShould we be using body-slot instead of the deprecated w-body tag, or transition to include(data.renderBody)? The `<body-slot>` tag was removed shortly after being added, and `include()` with no arguments was disallowed. I believe `include(data.renderBody)` is now the recommended way to do this.\r\n\r\nYou can also do something like:\r\n```\r\n<html>\r\n    <head>\r\n        <include(data.head) />\r\n    </head>\r\n    <body>\r\n        <include(data.body || data.renderBody) />\r\n    </body>\r\n</html>\r\n```\r\nThen use it like:\r\n```\r\n<include('./layout.marko')>\r\n    <@head>\r\n        <title>Foo!</title>\r\n    </@head>\r\n    <@body>\r\n        Foo!\r\n    </@body>\r\n</include>\r\n```\r\nor\r\n```\r\n<include('./layout.marko')>\r\n    Foo!\r\n</include>\r\n``` @patrick-steele-idem Thank You. \r\n\r\nI have a all of the code using the proper `include(target)` due to the various research through the issues list. However, it wasn't readily apparent which direction was actually correct and I wanted a bit more feedback on what was the final decision.   In ES6 \"of\" gives you the value and \"in\" gives you the key.  Would adding `\"body\": \"static-text\"` in the `marko.json` fix that (similar to the [app-markdown](https://github.com/marko-js-samples/ui-components-playground/blob/master/src/components/app-markdown/marko-tag.json) sample component)?  \n[![Coverage Status](https://coveralls.io/builds/9553643/badge)](https://coveralls.io/builds/9553643)\n\nCoverage increased (+0.005%) to 88.435% when pulling **45c9d2e7cad4332b03ef885c80ba032d7adc1e37 on austinkelleher:514-deprecate-widget-types** into **a5ce5182b63b7614d5f4454e1502c3fdde7cffbc on marko-js:master**.\n  ## Input tag is being filled with undefined value when the component's state change.\r\n\r\n### Context\r\nI found what I think is a bug. When I change the state of my component and there is an input in the template, Marko fills it with an undefined value even if I don\u2019t explicitly set the input\u2019s value .\r\n\r\n\r\n![image](https://cloud.githubusercontent.com/assets/5007653/21706817/dc09a5b2-d397-11e6-8df5-67627de085a7.png)\r\n\r\nthat\u2019s my template markup\r\n\r\n![image](https://cloud.githubusercontent.com/assets/5007653/21706827/f4a06b06-d397-11e6-8615-792ca4fbdb7e.png)\r\n\r\nmy component\u2019s code\r\n\r\nI am currently using `4.0.0-beta.5`\r\n\r\nI updated to  `4.0.0-beta.8` and still getting that error\r\n\r\n### Expected Behavior\r\n\r\nInput's value shouldn't be set.\r\n\r\n### Actual Behavior\r\nInput's value is getting filled with an undefined value.\r\n\r\n### Environment\r\n* Version used: 4.0.0-beta.5 and 4.0.0-beta.8\r\n* Environment: Chrome  55.0.2883.95 and node.js 7.3.0\r\n* Operating System and version: macOS 10.12.2\r\n  \n[![Coverage Status](https://coveralls.io/builds/9540973/badge)](https://coveralls.io/builds/9540973)\n\nCoverage increased (+0.001%) to 88.434% when pulling **42ba9e135d76965c2ffe49ccb543384816accdba on austinkelleher:421-deprecate-w-bind** into **6aaf8679a88e53cef644582e51edca94517a51e4 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9541118/badge)](https://coveralls.io/builds/9541118)\n\nCoverage increased (+0.001%) to 88.434% when pulling **444550ee61753923dba844466c758f6b35d0fb52 on austinkelleher:421-deprecate-w-bind** into **6aaf8679a88e53cef644582e51edca94517a51e4 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9551413/badge)](https://coveralls.io/builds/9551413)\n\nCoverage increased (+0.006%) to 88.436% when pulling **2e7d202cd5e8f61358c79f14ae1b1a4b865b7dd0 on austinkelleher:421-deprecate-w-bind** into **a5ce5182b63b7614d5f4454e1502c3fdde7cffbc on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9551413/badge)](https://coveralls.io/builds/9551413)\n\nCoverage increased (+0.006%) to 88.436% when pulling **2e7d202cd5e8f61358c79f14ae1b1a4b865b7dd0 on austinkelleher:421-deprecate-w-bind** into **a5ce5182b63b7614d5f4454e1502c3fdde7cffbc on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9551413/badge)](https://coveralls.io/builds/9551413)\n\nCoverage increased (+0.006%) to 88.436% when pulling **2e7d202cd5e8f61358c79f14ae1b1a4b865b7dd0 on austinkelleher:421-deprecate-w-bind** into **a5ce5182b63b7614d5f4454e1502c3fdde7cffbc on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9552196/badge)](https://coveralls.io/builds/9552196)\n\nCoverage increased (+0.007%) to 88.437% when pulling **f091f35dddb0cbc524d4e46b4653c4c9231c3b8e on austinkelleher:421-deprecate-w-bind** into **a5ce5182b63b7614d5f4454e1502c3fdde7cffbc on marko-js:master**.\n  \ud83d\udc4d  ## Bug Report\r\n\r\n### Context\r\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug.  How has this bug affected you? What were you trying to accomplish? -->\r\nUsing latest marko 4 beta 8, I want to render a component that uses the await tag - purely in the browser. The component is built according to [http://markojs.com/try-online/#Async_Await](http://markojs.com/try-online/#Async_Await)\r\n\r\n```JavaScript\r\nvar template = require('./template.marko');\r\n\r\nmodule.exports = function(input, out) {\r\n  template.render({\r\n    userDataProvider: function(args, callback) {\r\n      var backThen = Date.now();\r\n      console.log('renderer.js:6 - starting...');\r\n      setTimeout(function() {\r\n        console.log('renderer.js:9 - done', Date.now() - backThen);\r\n        callback(null, {\r\n          firstName: 'John',\r\n          lastName: 'Doe',\r\n          age: 50\r\n        });\r\n      }, 2500);\r\n    }\r\n  }, out);\r\n};\r\n```\r\n\r\nwhile being required by a simple index page that collects all the components (currently just one)\r\n\r\n```JavaScript\r\nvar template = require('./index.marko');\r\n\r\ntemplate.render({}, function(err, result) {\r\n  result.replaceChildrenOf(document.getElementById('root'));\r\n});\r\n```\r\n\r\nwhich itself is injected via lasso `2.8.4` / lasso-cli `2.0.6` / lasso-marko `2.2.0` into a simple `index.html` file.\r\n\r\nCheckout [https://github.com/Primajin/markojs-4-clientside](https://github.com/Primajin/markojs-4-clientside) as a reference.\r\n\r\n### Expected Behavior\r\n<!--- Tell us what should happen -->\r\nTemplate should render asynchronously after 2,5 seconds.\r\n\r\n### Actual Behavior\r\n<!--- Tell us what happens instead -->\r\nTab / Browser uses 99% of CPU, can only be killed by taskmanager. Smells like an infinite loop.\r\n\r\n### Possible Fix\r\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\r\ninstead of using `replaceChildrenOf` use `appendTo`\r\n\r\n```JavaScript\r\nvar template = require('./index.marko');\r\n\r\ntemplate.render({}, function(err, result) {\r\n  result.appendTo(document.getElementById('root'));\r\n});\r\n```\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: 4.0.0-beta.8\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4): Chrome Version 57.0.2972.0 (Offizieller Build) **canary** (64-Bit)\r\n* Operating System and version (desktop or mobile): Desktop MBP 10.12.2 (Sierra) \r\n* Link to your project: https://github.com/Primajin/markojs-4-clientside\r\n\r\n### Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. Check out my project\r\n2. `npm install`\r\n3. switch lines 4 and 6 in `src/index.js`\r\n4. `npm run build`\r\n5. open `index.html` in your browser\r\n</details>\r\n I think it's duplicate of  https://github.com/marko-js/marko/pull/505   <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\nIn node-require.js, right before the module.exports, `install()` is called. Consequently, default options are used.\r\n* This causes an exception to be thrown on read-only systems since the default option in the compiler is to writeToDisk. \r\n* This also results in `install()` potentially being called twice.\r\n\r\n### Expected Behavior\r\n`require(\"marko/node-require\").install({compilerOptions: {writeToDisk: false}})` should result in a single call to `install()`, with the options specified.\r\n\r\n### Actual Behavior\r\n`require(\"marko/node-require\").install({compilerOptions: {writeToDisk: false}})` calls `install()` twice: Once from the base class (just before the `module.exports` line) with no options, and a second time with the options specified.\r\n\r\n### Possible Fix\r\nRemove `install();` on line 134 of node-require.js. Note: With this fix, `require(\"marko/node-require\")` will no longer by default call `install()`.\r\n\r\n<details><summary>Additional Info</summary>\r\n\r\n### Your Environment\r\n* Version used: 4.0.0-beta.8\r\n* node.js version: v6.9.1\r\n* Operating System: Windows 10 x64\r\n\r\n\r\n</details>\r\n Related: #365  ../widgets/util - don't have  $__destroyWidgetForEl and $__destroyElRecursive functions\r\n\r\nFixed infinite loop in replaceChildrenOf function  main.marko\r\n```\r\n<include('../layouts/default.marko', data)>\r\n\t<@pagetitle></@pagetitle>\r\n\t<@body>\r\n\t\t<include ('./user.marko', data)/>\r\n\t</@body>\r\n</include>\r\n```\r\ndefault.marko\r\n```\r\n<!doctype html>\r\n<html lang=\"en\">\r\n\t<head>\r\n\t\t<meta charset=\"UTF-8\"/>\r\n\t\t<meta name=\"format-detection\" content=\"telephone=no\">\r\n\t\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1, user-scalable=no, maximum-scale=1\">\r\n\t\t<title>\r\n\t\t\t<if (data.pagetitle)><include (data.pagetitle)></include></if>\r\n\t\t</title>\r\n\t\t<link rel=\"stylesheet\" href=\"/build/style/front.css\">\r\n\t</head>\r\n\t<body>\r\n\t\t<include(\"../parts/sidebar.marko\", data) />\r\n\t\t<if(data.body)>\r\n\t\t\t<main>\r\n\t\t\t\t<include(data.body) />\r\n\t\t\t</main>\r\n\t\t</if>\r\n\t</body>\r\n</html>\r\n```\r\n\r\nwith <!doctype html> in first line of template error has been happend\r\n```\r\nERROR in ../api/views/front/layouts/default.marko\r\nModule build failed: Error: Node does not have a `writeCode` method: {\r\n    \"type\": \"DocumentType\"\r\n}\r\n    at CodeWriter.write (/var/www/node_modules/marko/compiler/CodeWriter.js:113:9)\r\n    at writeNode (/var/www/node_modules/marko/compiler/CodeWriter.js:80:26)\r\n    at Array.forEach (native)\r\n    at CodeWriter.writeStatements (/var/www/node_modules/marko/compiler/CodeWriter.js:98:19)\r\n    at CodeWriter.writeBlock (/var/www/node_modules/marko/compiler/CodeWriter.js:48:14)\r\n    at FunctionDeclaration.writeCode (/var/www/node_modules/marko/compiler/ast/FunctionDeclaration.js:60:16)\r\n    at CodeWriter.write (/var/www/node_modules/marko/compiler/CodeWriter.js:115:18)\r\n    at writeNode (/var/www/node_modules/marko/compiler/CodeWriter.js:80:26)\r\n    at Array.forEach (native)\r\n\r\n    at CodeWriter.writeStatements (/var/www/node_modules/marko/compiler/CodeWriter.js:98:19)\r\n    at Program.writeCode (/var/www/node_modules/marko/compiler/ast/Program.js:16:16)\r\n    at CodeWriter.write (/var/www/node_modules/marko/compiler/CodeWriter.js:115:18)\r\n    at CompiledTemplate.get code [as code] (/var/www/node_modules/marko/compiler/Compiler.js:99:20)\r\n    at _compile (/var/www/node_modules/marko/compiler/index.js:90:24)\r\n    at compile (/var/www/node_modules/marko/compiler/index.js:100:12)\r\n    at Object.compileForBrowser (/var/www/node_modules/marko/compiler/index.js:111:12)\r\n    at Object.module.exports (/var/www/node_modules/marko-loader/src/index.js:7:30)\r\n @ ../api/views/front/common/404.marko 2:23-58\r\n```\r\n\r\nwithout DOCTYPE it works.\r\n\r\nType of compile - vdom with compileFileForBrowser function. I can't think of any use-cases where this would really be necessary, but I also can't see much reason to throw an error. Browsers seem to silently remove the `<!DOCTYPE>` tag whenever it occurs somewhere it shouldn't, I feel like that's probably the best thing for Marko to do as well. I just tried to reuse server templates on client side. Thanks for the patch!  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\n```\r\n<div id=\"cartShipSelList\" class=\"prodDDList\">\r\n    <ul>\r\n      <li for(opt in data.shipMethods) onMouseOver(\"handleHover\") onMouseOut(\"handleRemHover\")>Sample Text</li>\r\n    </ul>\r\n</div>\r\n```\r\n\r\n### Expected Behavior\r\nCurrently only one of them will work on it's own, they work when one is not included. You would expect to both be able to receive onMouseOver and onMouseOut events.\r\n\r\n### Actual Behavior\r\nTemplate will not compile with both as it errors at: \r\n```\r\nmarko_forEach(data.shipMethods, function(opt) {\r\n    widget.e(\"mouseout\", \"handleRemHover\", __widgetId1);\r\n```\r\n\r\nStating that __widgetId1 is undefined\r\n\r\n\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\n1. \r\n2. \r\n3. \r\n4. \r\n\r\n### Stack Trace\r\nindex.marko.js:273 Uncaught ReferenceError: __widgetId1 is not defined\r\n    at index.marko.js:273\r\n    at forEachHelper (helpers.js:93)\r\n    at render (index.marko.js:272)\r\n    at renderer (renderer.js:273)\r\n    at Template.renderSync (renderable.js:37)\r\n    at displayWidget (tfv5.js:1382)\r\n    at Object.<anonymous> (tfv5.js:1436)\r\n    at i (jquery.min.js:2)\r\n    at Object.fireWith [as resolveWith] (jquery.min.js:2)\r\n    at z (jquery.min.js:4)\r\n(anonymous) @ index.marko.js:273\r\nforEachHelper @ helpers.js:93\r\nrender @ index.marko.js:272\r\nrenderer @ renderer.js:273\r\nrenderSync @ renderable.js:37\r\ndisplayWidget @ tfv5.js:1382\r\n(anonymous) @ tfv5.js:1436\r\ni @ jquery.min.js:2\r\nfireWith @ jquery.min.js:2\r\nz @ jquery.min.js:4\r\n(anonymous) @ jquery.min.js:4\r\n\r\n</details>  \n[![Coverage Status](https://coveralls.io/builds/9504769/badge)](https://coveralls.io/builds/9504769)\n\nCoverage remained the same at 88.264% when pulling **e425290687ca050b3e0453dcc77a393f0273e0c6 on austinkelleher:no-update-data-attr** into **832cc6d328dcb750fc28f2c1d72c7c80ac863fcb on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9504856/badge)](https://coveralls.io/builds/9504856)\n\nCoverage remained the same at 88.264% when pulling **e425290687ca050b3e0453dcc77a393f0273e0c6 on austinkelleher:no-update-data-attr** into **832cc6d328dcb750fc28f2c1d72c7c80ac863fcb on marko-js:master**.\n  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\nUpdating from version v3.13.0 to v3.14.0 adds lots of warnings about single hyphen for concise line being deprecated. I think such behaviour should occur on next major release as it requires a lot of code changes. Moreover, there is no clear documentation on how code should be changed as replacing `-` with `--` does not always make the warning disappear.\r\n\r\n```\r\nThe usage of a single hyphen at the start of a concise line is now deprecated. Use \"--\" instead.\r\nSee: https://github.com/marko-js/htmljs-parser/issues/43\r\n```\r\n\r\n<details>\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used: v3.14.0\r\n* Environment name and version: node.js 6.9\r\n\r\n### Code sample producing warnings\r\n\r\nThis is valid v3.13 syntax\r\n``` marko\r\n<!DOCTYPE html>\r\nhtml [lang=\"en\"]\r\n  body\r\n    h1 - Title\r\n    script\r\n      - var a = 'marko';\r\n```\r\n\r\nIf translated to either this styles it still outputs the warning (for line 6):\r\n\r\n``` marko\r\n<!DOCTYPE html>\r\nhtml [lang=\"en\"]\r\n  body\r\n    h1 -- Title\r\n    script\r\n      -- var a = 'marko';\r\n```\r\n\r\n``` marko\r\n<!DOCTYPE html>\r\nhtml [lang=\"en\"]\r\n  body\r\n    h1 -- Title\r\n    script\r\n      ---\r\n      var a = 'marko';\r\n      ---\r\n```\r\n\r\nOnly this style is not printing any warning: \r\n\r\n``` marko\r\n<!DOCTYPE html>\r\nhtml [lang=\"en\"]\r\n  body\r\n    h1 -- Title\r\n    script --\r\n       var a = 'marko';\r\n```\r\n\r\nSo will this last one be the only allowed style in the future?\r\n\r\n</details>\r\n Thanks for the quick resolution. As wrapping code with `---` is still valid I don't think it will be a major pain. \r\nI just had an \"oh dear, WTF\" moment after updating Marko, as nothing was said in the changelog so I thought npm went crazy and messed up versions \ud83d\ude09   \n[![Coverage Status](https://coveralls.io/builds/9489127/badge)](https://coveralls.io/builds/9489127)\n\nCoverage remained the same at 88.032% when pulling **f13c75d7493cd109e5220a26fc4f9c6987e13cd2 on austinkelleher:495-import-colon** into **306e19b88e9e305c83b9da1b4eab3fa8e028ee8f on marko-js:master**.\n  <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\nRenaming destruction imports are not working in `v4.0-beta.5` :\r\n\r\n```\r\n<import { client: twilio } from '../../lib/twilio.js' />\r\n```\r\n\r\nresults in compilation error, while\r\n\r\n```\r\n<script template-helpers>\r\n  const { client: twilio } = require('../../lib/twilio.js');\r\n</script>\r\n```\r\n\r\nworks fine... Sorry, my fault, I forgot ES6 syntax while doing refactoring for `<import>` from `require`. Thank you!  \n[![Coverage Status](https://coveralls.io/builds/9484750/badge)](https://coveralls.io/builds/9484750)\n\nCoverage increased (+0.07%) to 88.105% when pulling **d67e55fda6aee9191639965ac82f6dacc7ee1ce5 on austinkelleher:422-deprecate-w-preserve-attrs** into **306e19b88e9e305c83b9da1b4eab3fa8e028ee8f on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9500522/badge)](https://coveralls.io/builds/9500522)\n\nCoverage increased (+0.01%) to 88.242% when pulling **30575767240ca069d437f440986b9c6dcac48c92 on austinkelleher:422-deprecate-w-preserve-attrs** into **28392e985f7496aba23519c7e180e955628e595a on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9500607/badge)](https://coveralls.io/builds/9500607)\n\nCoverage increased (+0.01%) to 88.241% when pulling **30575767240ca069d437f440986b9c6dcac48c92 on austinkelleher:422-deprecate-w-preserve-attrs** into **28392e985f7496aba23519c7e180e955628e595a on marko-js:master**.\n  ## Bug Report\r\n\r\n### Context\r\n\r\nin dom.js exports.mixin\r\n\r\ntarget[methodName] = function(referenceEl) is reached with referenceEl as a string\r\n\r\nIt then goes on to try to get the ownerDocument with referenceEl.ownerDocument which won't work on a string so doc is undefined.\r\n\r\nit then goes through var newNode = getNode.call(this, doc); with an undefined doc but still creates the new dom element\r\n\r\nthen appendTo(newChild, referenceParentEl) is called and it appends the widget div to the referenceParentEl\r\n\r\nit then goes into the following with the same undefined doc and emits a mount node event\r\nif (afterInsert) {\r\n    afterInsert.call(this, doc);\r\n}\r\n\r\nthen emits a mount event\r\n\r\nthen entered initClientRendered(widgetDefs, doc) in init-widgets-browser.js with an undefined doc and tries to fix the undefined doc with window.doc which resolves undefined also\r\n\r\nthen initWidget(widgetDef, doc) with that undefined doc\r\n\r\nthen tries to get rootIds with var rootIds = widgetDef.roots; which returns undefined so it skips the next code block to go right to:\r\nel = doc.getElementById(id);\r\nel.__widget = widget;\r\nels = [el];\r\n\r\nthis is where it errors due to doc being undefined\r\n\r\n### Expected Behavior\r\ngetNode() should be called if the input is a string\r\n\r\n### Actual Behavior\r\nstring is never converted to a dom reference so it continues to be treated as a string through following calls\r\n\r\n### Possible Fix\r\ncall getNode() on initial input\r\n\r\n\r\n### Your Environment\r\n<!-- Include as many relevant details about the environment you experienced the bug in -->\r\n* Version used:\r\n* Environment name and version (e.g. Chrome 39, node.js 5.4):\r\n* Operating System and version (desktop or mobile):\r\n* Link to your project:\r\n\r\n### Steps to Reproduce\r\n<!--- Provide a link to a live example, or an unambiguous set of steps to -->\r\n<!--- reproduce this bug include code to reproduce, if relevant -->\r\nin a client side js file call the following (with the path changed to your widget)\r\n1. var catProdWidget = require('src/components/cat-prod-widget');\r\n2. catProdWidget.renderSync().appendTo('catProdList').getWidget();\r\n3. \r\n4. \r\n\r\n### Stack Trace\r\n<!-- If an error is thrown, provide the stack trace here -->\r\nUncaught TypeError: Cannot read property 'getElementById' of undefined\r\n    at initWidget (http://localhost:3003/static/src/marko$4.0.0-beta.4/widgets/init-widgets-browser.js:117:17)\r\n    at Object.initClientRendered (http://localhost:3003/static/src/marko$4.0.0-beta.4/widgets/init-widgets-browser.js:238:22)\r\n    at WidgetsContext.initWidgets (http://localhost:3003/static/src/marko$4.0.0-beta.4/widgets/WidgetsContext.js:79:21)\r\n    at EventEmitter.<anonymous> (http://localhost:3003/static/src/marko$4.0.0-beta.4/widgets/index-browser.js:80:28)\r\n    at EventEmitter.emit (http://localhost:3003/static/src/events$1.1.1/events.js:81:17)\r\n    at RenderResult.afterInsert (http://localhost:3003/static/src/marko$4.0.0-beta.4/runtime/RenderResult.js:69:16)\r\n    at RenderResult.afterInsert (http://localhost:3003/static/src/marko$4.0.0-beta.4/runtime/RenderResult.js:110:14)\r\n    at RenderResult.exports.mixin.Object.keys.forEach.target.(anonymous function) [as appendTo] (http://localhost:3003/static/src/marko$4.0.0-beta.4/runtime/dom.js:130:29)\r\n    at loadAll (http://localhost:3003/static/src/Tree_Fort_Bikes_5_0$1.0.0/site/public/js/tfv5.js:2722:34)\r\n    at HTMLDocument.<anonymous> (http://localhost:3003/static/src/Tree_Fort_Bikes_5_0$1.0.0/site/public/js/tfv5.js:2620:7)\r\n</details>\r\n  ## New Feature\r\nCurrently there is no easy way to use Marko for plain text parsing. \r\n\r\n### Description\r\nAdd non-renderable block to tell Marko to thread this block as text-only (still parsing variables and conditionals and such, just not forcing to transform html tags). \r\n\r\n### Context\r\nThe use case is for email rendering, where you probably want to render a html and text version. For example using [nodemailer ](https://github.com/nodemailer/nodemailer)> [node-email-templates](https://github.com/crocodilejs/node-email-templates) > [consolidate.js](https://github.com/tj/consolidate.js) will result in having problems to render the text version as marko will try to generate html tags out of the text sentences.\r\n\r\n### Possible Implementation\r\n#### Option 1)\r\ne.g. see this proposal https://github.com/marko-js/marko/issues/343\r\n```\r\n<marko-parser body='static-text'>\r\n        Content\r\n         More Content\r\n        ${data.myVar}\r\n</marko-parser>\r\n```\r\nImportant: In this example the output should not include the <marko-parser> tag\r\n\r\n#### Option 2)\r\nJavascript call has a new attribute to specify whether the template should be parsed as text-only or with html (transformations) Thanks for your quick response. Unfortunately i does not work. As soon as i'm using <static-text> in my template, the output is null (no error in console). I tried to move the components folder to different places, but nothing worked. Also i added a renderer.js or template.json but also... no luck. Maybe it has something to do how consolidate is calling Marko(`.load(options.filename, ContentAsStr, options`), although i would assume the actual folder lookup should not be affected by this. currently my workaround is to use\r\n\r\n```\r\n<div marko-preserve-whitespace>\r\n         Content\r\n         More Content\r\n        ${data.myVar}\r\n</div>\r\n```\r\n\r\nand then manually removing both divs from the output string. the latest from npm. 3.13.2 Perfect, now it works flawlessly. I guess the code-generator.js was the missing puzzle piece ;) Thx for the help and your (still very) quick response. Highly appreciated. And yes, it works for v3 too.   \n[![Coverage Status](https://coveralls.io/builds/9452562/badge)](https://coveralls.io/builds/9452562)\n\nCoverage increased (+0.004%) to 87.968% when pulling **405ff119b42b9eed4d88951beb932f3ef5531050 on austinkelleher:477-for-map** into **b0d77b8cb03535c42b88d4e10be14bb1a7b6f6f7 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9452562/badge)](https://coveralls.io/builds/9452562)\n\nCoverage increased (+0.004%) to 87.968% when pulling **405ff119b42b9eed4d88951beb932f3ef5531050 on austinkelleher:477-for-map** into **b0d77b8cb03535c42b88d4e10be14bb1a7b6f6f7 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9452562/badge)](https://coveralls.io/builds/9452562)\n\nCoverage increased (+0.004%) to 87.968% when pulling **405ff119b42b9eed4d88951beb932f3ef5531050 on austinkelleher:477-for-map** into **b0d77b8cb03535c42b88d4e10be14bb1a7b6f6f7 on marko-js:master**.\n  <!----------------------------------------------------------------------\r\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\r\n  ---------------------------------------------------------------------->\r\n## New Feature\r\n\r\n### Description\r\nThere are 2 use cases for this:\r\n1. People who want to primarily use React but want to have some (perhaps presentational-only) components written in marko.\r\n2. People who use primarily marko templates but want to use React (i.e. render React components) in some dynamic pages (this is marko-widget's use case, but let's say that a hype-driven tech lead wants React for dynamic stuff by all means necessary).\r\n\r\n### Context\r\n1. We need an easy-to-use template system as we have freelancers churning out new templates that come and go every once in a while. Here, marko seems like a good fit.\r\n2. Static parts need to be easily integrated with non-React JS libraries like jQuery. Dynamic parts are written in React.\r\n3. The team has invested quite a bit in the React ecosystem, so we are not keen on introducing something like marko-widgets.\r\n4. We are concerned with the performance of server-side React rendering.\r\n\r\nFrom reasons above, [react-templates](https://github.com/wix/react-templates) almost made it but not quite (mainly due to reasons 2 and 4).\r\n\r\nAfter this, marko users can also tap into the larger React ecosystem for things like integration, off-the-shelf components.\r\n\r\n### Possible Implementation\r\nThe 2 use cases boils down to these requirements:\r\n1. Render React components in marko perhaps using taglib. (e.g. `<div><react-component prop1=\"a\" prop2=\"b\"/></div>`) This react root should be able to have isomorphic/universal rendering (meaning it can gain the ability to be re-rendered client-side, if the developer chooses to include react on client side).\r\n2. Render marko components as React components. (e.g. in JSX: `<div><MarkoTemplate template={require(\"a/b.marko\")} /></div>`) \r\n\r\nBoth seems very doable to me, but would like some input on potential headaches.\r\n\r\n1. This can (should?) be an optional module / custom taglib.\r\n2. Each `<react-component/>` tag can live as a separate React root. Most SPAs only have one root that renders the whole page, but this usually won't be the case if rendering starts from marko. \r\n\r\n### Open Questions\r\n1. Do we need to handle children tags inside templates (the content inside `MarkoTemplate`)?\r\n2. Need to figure out how to use singleton store (redux etc) for multiple React roots.\r\n3. Building SPAs will be difficult if we have multiple react roots in a page, but this may be a concern more for React and not for marko.\r\n\r\n### Is this something you're interested in working on?\r\nYes\r\n I think the best solution long-term would be to have Marko have seamless interoperability with custom elements. That way, react / mithril / any library will be able to work without any extra work from marko.\r\n\r\nFor research, [server-components](https://github.com/pimterry/server-components) has done some work in this area. Thanks for the inputs. I believe v4 is just around the corner looking at the beta releases coming out these few days?\r\n\r\n> It's possible to translate a rendered Marko VDOM tree to a React VDOM tree with a performance hit (via tree traversal of the Marko VDOM output)\r\n\r\nThis is what I pondered on as well - there is something similar for handlebars: https://github.com/stevenvachon/handlebars-react I don't know much about marko internals but maybe translating parsed AST to React VDOM directly can be a better approach?\r\n\r\n> Alternatively, a Marko component can be rendered and mounted during the componentDidUpdate() lifecycle method (client-side only)\r\n\r\nCMIIW, but I think if we render a new react root in `componentDidUpdate` the VDOM diffing would never work because it is a fresh re-render each time. This should be much simpler to implement though, as compared to VDOM translation.  ## New Feature\r\n\r\n### Description\r\n```\r\nvar str = __helpers.s,\r\n      ...\r\n      cv = '4.0.1-beta4'\r\n```\r\n\r\n### Context\r\n\r\nSometimes it's difficult to determine *which* compiler version output the *.js on disk (ie- command line compiler, marko-loader, etc).  This is a possible enhancement to aid in debugging, perhaps sometimes you need bug reports of \"send me template.marko and template.marko.js\" and it'd be nice to know *how* template.marko.js was transformed.\r\n\r\nDrawback is an increase in filesize per template.marko.js, over a project w/ 50 templates, could be ~500 bytes, although very likely they would gzip well since all would be identical. (in addition, add `--version | -v` support to `markoc` command)  Currently:\r\n```\r\n  \"devDependencies\": {                                                          \r\n    \"marko\": \"^3.10.0\"                                                          \r\n  },                                                                            \r\n```   \n[![Coverage Status](https://coveralls.io/builds/9437515/badge)](https://coveralls.io/builds/9437515)\n\nCoverage remained the same at 87.964% when pulling **39defaaf9ea434f3a3519d44ab2098f101ea844c on Hesulan:issue-484** into **291f67849215549e97f9bd7b52904d3bfa2403e0 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9437515/badge)](https://coveralls.io/builds/9437515)\n\nCoverage remained the same at 87.964% when pulling **39defaaf9ea434f3a3519d44ab2098f101ea844c on Hesulan:issue-484** into **291f67849215549e97f9bd7b52904d3bfa2403e0 on marko-js:master**.\n  The widget runtime uses a custom `.concat` method, but the native array `.concat` method returns a new array without modifying the original, which results in `window.$widgets` being an empty array and the init code being lost if the widgets are initialized before the runtime registers its custom method. \n[![Coverage Status](https://coveralls.io/builds/9397580/badge)](https://coveralls.io/builds/9397580)\n\nCoverage remained the same at 87.934% when pulling **3eedac5e51170dcf95bd714058ff4ddb04c5ec14 on Hesulan:async-widget-bug** into **42fceecce5f10bd6c7e0ed38efe75f6bb8f54720 on marko-js:master**.\n  Does this mean getRenderedWidgetIds will deprecate after 4.0? Which function can replace it then? Thanks.  <!--- Provide a general summary of your changes in the Title above -->\r\n\r\n## Description\r\n<!--- Describe your changes in detail -->\r\nMinor update to documentation. Adding VSCode's syntax highlighter.\r\n\r\n## Motivation and Context\r\n<!--- Why is this change required? What problem does it solve? -->\r\n<!--- If it fixes an open issue, please link to the issue here. -->\r\n\r\n## Screenshots (if appropriate):\r\n\r\n## Checklist:\r\n<!--- Go over all the following points, and put an `x` in all the boxes that apply. -->\r\n<!--- If you're unsure about any of these, don't hesitate to ask. We're here to help! -->\r\n- [x] My code follows the code style of this project.\r\n- [x] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/9333532/badge)](https://coveralls.io/builds/9333532)\n\nCoverage remained the same at 87.742% when pulling **ea1d74e27e360f5d4add14f718512abbcd9ee7fe on johnjv:vscode-ext** into **fae66bfb0692725edaf04025f80ff9109e52aa18 on marko-js:master**.\n    <!----------------------\r\n  |     IF BUG REPORT    |\r\n  ---------------------->\r\n## Bug Report\r\n\r\n### Context\r\nI am trying to use a dynamic expression to set an html tag. The compiled code seems to be slightly incorrect, resulting in mangled html.\r\n\r\nMy marko looks like (adding parenthesis here doesn't help):\r\n```\r\n<${data.type === 'primary' ? 'div' : 'span'}> \r\n```\r\n\r\n### Expected Behavior\r\nCompiled output should be\r\n`out.w(\"<\" + (data.type === \"primary\" ? \"div\" : \"span\") + \">\");`\r\n\r\n### Actual Behavior\r\nCompiled output is:\r\n`out.w(\"<\" + data.type === \"primary\" ? \"div\" : \"span\" + \">\");`\r\n\r\n</details>\r\n @mlrawlings Thanks for the quick fix!  Hello,\r\n\r\nDestructing `import` like following\u00a0compiles correctly:\r\n\r\n```html\r\n<import\u00a0{ readFileSync } from 'fs' />\r\n```\r\nresults to following:\r\n```javascript\r\n   fs = require(\"fs\"),\r\n\u00a0\u00a0 readFileSync = fs.readFileSync,\r\n```\r\n\r\nHowever, destructing imports, like\r\n```html\r\n<import { asset } from '../../../shared/marko/asset' />\r\n```\r\n\r\nresults in wrong compilation:\r\n```javascript\r\nasset = require(\"../../../shared/marko/asset\"),\r\nasset2 = asset.asset,\r\n```\r\n\r\nSide note: which version of Node Marko 4\u00a0is\u00a0targeting? Why not current LTS (Node 6) and just keep destruction intact, as well as use\u00a0`const` instead of `var`?\r\n @tinovyatkin The compiler currently requires ES6 (Node 4+), but all built-in taglibs are currently designed to compile into ES5-compatible code (ES6+ tags *may* eventually be included if there's enough interest - see #428). This is so that templates can be rendered in all modern browsers without needing to be transpiled.\r\n\r\nThe `asset2` assignment is definitely an oversight, it's *supposed* to prevent automated naming collisions but in this case appears to be renaming the wrong one. As far I see \u00a0`<import>` compiles into `require` and it's no way browser compatible with our without destruction. And it's new tag, so, I think it's quite fair to require `ES6` for new tags without loosing any backward compatibility\r\n Plenty of modern client-side code depends on a third-party library like `browserify` to implement CommonJS `require`, and Marko is no exception. In other words, `require()` most certainly *is* browser-compatible.\r\n\r\nThat being said, I do like the idea of native ES6+ tags, as long as they're opt-in and clearly marked - see #428, toward the end of the discussion. If anyone is interested, let me know and we can discuss the details. @Hesulan I'm sorry to say, but there is no logic to say `can be rendered in all modern browsers without needing to be transpiled` and then `require() most certainly is browser-compatible`. No, it's not.\u00a0There is no browser on the planet that understand `require` without transpilation\u00a0/ compilation / whatever you want to call it. So, the question\u00a0still remain - why introduce new tag that\u00a0have no way (apart of static inlining) to compile into ES5 and attempt to compile it into ES5 while you just may keep it as ES6 / node destruction? @tinovyatkin Marko and Marko Widgets run in the current versions of all major browsers without any transpiling. While `require()` certainly isn't native, it's considered a dependency, or at worst a polyfill. Native destructuring would require the entire file to be transpiled, and there's no reason to do that here since the current ES5 implementation already works perfectly aside from this bug.\r\n\r\nDon't get me wrong, I'm certainly not against ES6+ features in the core taglibs; in fact, if you look at the PR I linked to, you'll see that I've personally been working on exactly that. But `<import>` is a *really* useful tag for all environments, and in this case the cost would far outweigh the gain. @scttdavs Another option might be to use one of the reserved template variable names ('data' or 'out') to temporarily store each module:\r\n```js\r\nvar data = require(\"asset\");\r\nvar asset = data.asset;\r\nvar data = ...\r\n```\r\nIf someone needs to `<import { data as data } from 'asset' />` then they're probably doing something wrong, since it will get overwritten by `render(data, out)` anyway. If it's a vote, I certainly hope Marko developers will decide to just keep destruction intact and document that fact. It's a shame that nowadays development frameworks sometimes trying to pretend they are for people who don't know how to code. \r\nYou are introducing new tag with `ES6 like imports`, requiring Node 4 for compiler and trying to reinvent the wheel of destruction?\r\n\r\nWhy not `<import { asset } from 'asset'>` => `const { asset } = require('asset')`?\r\nWhat exactly is bad with this approach to a new, ES6-like tag? Marko is trying hard to make resulting `.marko.js` readable, and introducing namespaces, generated names, etc, no way helps that..\r\n It just occurred to me that `require()` is expected to cache loaded modules:\r\n```\r\nvar foo = require('./foo').foo;\r\nvar bar = require('./foo').bar;\r\n```\r\nNot very pretty, but perhaps more readable, and definitely more collision-proof. Thoughts? @patrick-steele-idem Good point. I don't think execution speed would really be a problem since all of this is happening once when the module is first loaded, but minifying would be, especially with lasso since the url becomes a lot longer...\r\n\r\nThe `_module` suffix solution should work just fine, as long as it's well documented.   ```\r\n    {\r\n      \"name\": \"test\",\r\n      \"script\": \"./src/test\",\r\n      \"instances\": 1,\r\n      \"exec_mode\": \"cluster\",\r\n      \"watch\": true,\r\n      \"env\": {\r\n        \"INTERVAL\" : 60000,\r\n        \"HOST\": \"127.0.0.1\",\r\n        \"PORT\": 14211\r\n      }\r\n    },\r\n```\r\n\r\ni have error: `Error: Cannot find module 'marko'` @khmelevskii Works for me. Are you still having this problem? If so, could you give more details? I just experienced similar problems. Although my application runs under pm2, it does not render the HTML properly. For the record, I am requiring the module using `require('marko/node-require').install();`.\r\n\r\nNo problems when starting the application with `node app.js`, but with pm2, the HTML does not get rendered anymore. Google Chrome doesn't even render the HTML, but simply displays the raw HTML instead.\r\n\r\nIf you need, I could provide a more accurate description of what is happening, but please specify what kind of details you would want. @patrick-steele-idem Although the `Content-Type` header was not the issue, I can now confirm that my problems were separate from the issue discussed in the original ticket. My apologies for the inconvenience, however I can now confirm that pm2 does work with marko. I've been using pm2 successfully with both Marko v3 and Marko v4 (latest beta) without any problems. No problems here.  `include` or new `import` syntax within this `<style>` will be very good addition too! As well as an API for tag renderer to append anything to this, like `out.styles.append('.test-rule { color: red }')`   \n[![Coverage Status](https://coveralls.io/builds/9053451/badge)](https://coveralls.io/builds/9053451)\n\nCoverage increased (+0.03%) to 84.019% when pulling **99e7873d6c34d80aa754a46131cd3371322be776 on v3-render-to-string** into **91c215c054f011a148cd5d04b7fca2af28bd38ab on v3**.\n  \n[![Coverage Status](https://coveralls.io/builds/9013227/badge)](https://coveralls.io/builds/9013227)\n\nCoverage increased (+0.03%) to 86.828% when pulling **eb140ab1119c217028a0d6f571bad4f6678e5ada on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9015917/badge)](https://coveralls.io/builds/9015917)\n\nCoverage increased (+0.02%) to 86.822% when pulling **4633d841126e30a1b88f6a825983facf4e0a9f9f on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9016368/badge)](https://coveralls.io/builds/9016368)\n\nCoverage increased (+0.05%) to 86.844% when pulling **66768de91ca07c801265898c493768230f9ac325 on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9016653/badge)](https://coveralls.io/builds/9016653)\n\nCoverage increased (+0.02%) to 86.821% when pulling **dfe85613d42fe82b68b098f629da12b13ac00014 on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9016653/badge)](https://coveralls.io/builds/9016653)\n\nCoverage increased (+0.02%) to 86.821% when pulling **dfe85613d42fe82b68b098f629da12b13ac00014 on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9051041/badge)](https://coveralls.io/builds/9051041)\n\nCoverage increased (+0.02%) to 86.819% when pulling **db7fa47fa19e17dec0a836a7bf4efb65e60c9c33 on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/9051041/badge)](https://coveralls.io/builds/9051041)\n\nCoverage increased (+0.04%) to 86.84% when pulling **db7fa47fa19e17dec0a836a7bf4efb65e60c9c33 on scttdavs:import-tag** into **41b115909066619032ae8d3e80c49432083b13c8 on marko-js:master**.\n  The autotest `compareHelper` now normalizes the ending newline of both the `expected` and `actual` strings to avoid test failures when `expected.*` is saved on a POSIX-compliant (non-Windows) OS. \n[![Coverage Status](https://coveralls.io/builds/8970748/badge)](https://coveralls.io/builds/8970748)\n\nCoverage remained the same at 86.778% when pulling **aacab561eb2bea5436ea56df4b2615d9ea5cf238 on Hesulan:issue-446** into **aa254d165588aafb1605464dec8bd91e70991e3d on marko-js:master**.\n  ### Description\r\nThe autotests work correctly when the `expected.*` file is created and saved on Windows. However, Linux and OS X comply with POSIX, which requires a proper ending newline (`\\n` immediately followed by the `EOF` symbol). The produced `actual.*` file doesn't have one, which causes the autotests to fail.\r\n\r\n### Possible Fix\r\nThe autotest runner could simply ignore the presence or absence of an ending newline. Alternatively, the rendered output could be made POSIX-compliant (by adding a proper EOF newline), but Windows displays it as a blank line and allows it to be removed which could lead to confusion.\r\n\r\n### Steps to Reproduce\r\n1. Open an `expected.*` file from the autotest directory in any text editor\r\n2. Do one of the following:\r\n  a. (Linux or OS X) Save the file with no changes\r\n  b. (Windows) Insert a blank newline at the end of the file and save the changes\r\n3. Run the test suite\r\n\r\n### Example\r\nSaving `test/autotests/render/assign-tag/actual.html` on Linux with no changes and running `npm test` produces:\r\n```\r\nAssertionError: 'HELLO 1230' deepEqual 'HELLO 1230\\n'\r\n```\r\n\r\n### What does Git have to say about all of this?\r\nGit expects there to be an ending newline (because there really *should* be), and has to internally add `\"\\ No newline at end of file\"` as a workaround, shown by github as a red symbol on the last line - go look at the commit diff for almost any file written on Windows, you'll see what I mean.\r\n\r\n### Workarounds\r\nThe only workaround I can find is to delete the last line and use `echo -n ... >>` to reinsert it without a trailing newline. I agree, and I feel like `/(\\r\\n|\\n)$/` (or `/\\r?\\n$/`) would probably be safer. The only thing to keep in mind would be if something depends on there being a newline, but that could simply add two newlines (`\\n\\n`) and only the second one would be removed.  ## Description\r\nDocs on how to create a container template using `<invoke data.renderBody(out) />`\r\n\r\n## Motivation and Context\r\nUseful for other users.\r\n\r\n## Checklist:\r\n- [x] My code follows the code style of this project.\r\n- [ ] I have updated/added documentation affected by my changes.\r\n- [x] I have read the **CONTRIBUTING** document.\r\n- [ ] I have added tests to cover my changes.\r\n- [x] All new and existing tests passed.\r\n \n[![Coverage Status](https://coveralls.io/builds/8966592/badge)](https://coveralls.io/builds/8966592)\n\nCoverage remained the same at 86.796% when pulling **9a5c2c33a47fa84c341eb2935f67388052c15eb7 on JeroenVdb:master** into **6a9a50402e00b746cbb07cfb6cfeacbd5c8279b9 on marko-js:master**.\n  As discussed in #439, the `Promises/A+` specification explicitly defines `.then` as accepting at least two arguments: `onResolved` and `onRejected`. The `.catch` method is defined by ECMAScript for *native* implementations, but third-party libraries are under no obligation to include it (though *most* do, for convenience and compatibility).\r\n\r\nIn the interest of caution, this only calls `.then(undefined, onRejected)` if neither `.catch` nor `.fail` is a function. However, in my opinion, it would be completely safe to remove those two calls altogether, as any implementation which is even *remotely* compliant will handle this as expected. \n[![Coverage Status](https://coveralls.io/builds/8946857/badge)](https://coveralls.io/builds/8946857)\n\nCoverage decreased (-0.02%) to 86.793% when pulling **96d93ee9fe7de57547cc979e8bd67955d00ae699 on Hesulan:issue-439** into **270ae3d17aba69ec2357fe187b7bf20fd16f11da on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/8950094/badge)](https://coveralls.io/builds/8950094)\n\nCoverage decreased (-0.03%) to 86.778% when pulling **3f203366623733d8f5b1e17f82c94f8c2bdee52c on Hesulan:issue-439** into **270ae3d17aba69ec2357fe187b7bf20fd16f11da on marko-js:master**.\n \n[![Coverage Status](https://coveralls.io/builds/8950094/badge)](https://coveralls.io/builds/8950094)\n\nCoverage decreased (-0.03%) to 86.778% when pulling **3f203366623733d8f5b1e17f82c94f8c2bdee52c on Hesulan:issue-439** into **270ae3d17aba69ec2357fe187b7bf20fd16f11da on marko-js:master**.\n  \n[![Coverage Status](https://coveralls.io/builds/8937323/badge)](https://coveralls.io/builds/8937323)\n\nCoverage decreased (-0.1%) to 86.697% when pulling **152717cbaac60dc0a19bb151dd3ae004a8a09ffa on render-api** into **270ae3d17aba69ec2357fe187b7bf20fd16f11da on master**.\n Doesn't this cause \"finish\" to return a new RenderResult, making the \"self.on('finish', function(){ resolve(new RenderResult(out)); })\" redundant?\r\n\r\nEither way, looks great to me! I'll look a bit closer tomorrow just to be sure, but I believe this should work perfectly, at least concerning Promise compliance. (In other words, wouldn't \"self.on('finish', resolve);\" do the same thing? Or I might just have mis-read something.) Nevermind, was half asleep when I typed that, I did mis-read something. Just skimmed over the code again, it all looks good to me!  I finally got around to looking at the newly added `.then` method from #423 , and it turns out that it's nowhere near spec-compliant: attempting to call `.catch` causes an error to be thrown (\"TypeError: fn is not a function\", referring to the `undefined` passed as the first argument to `.then(fn, fnErr)`), the handlers are called synchronously, ~~and `.then` itself ceases to function properly once the stream is finished (subsequent calls return a Promise resolved with `undefined`).~~\r\n\r\n~~There are only 3 possible solutions I can think of:~~\r\n~~1. Let `.then` be non-compliant. It will only work if called *before* the stream is finished, among other things.~~\r\n~~2. Attach a Promise instance to the stream regardless of whether `.then` is ever called or not. The renderer would then always require a native or polyfilled `Promise` implementation, even if `.then` is never actually used.~~\r\n~~3. Write a partial `Promise` implementation directly into the renderer. I could do this if needed, but it would probably be better to simply require a native or polyfilled implementation.~~\r\n\r\nEDIT: It seems I was mistaken about it ceasing to function after 'finish' is called, though it doesn't quite appear to function correctly in the first place.\r\n\r\nEDIT 2: I'm actually getting all sorts of weird problems from this code and I'm not entirely sure what's causing most of them. In case someone else wants to take a stab at it, here's a spec-compliant solution, but it caused the test suite to throw an out-of-memory error when I tried it:\r\n```js\r\nthen: function(fn, fnErr) {\r\n    var self = this;\r\n    return new Promise(function(resolve, reject) {\r\n        self.on('error', reject);\r\n        self.on('finish', resolve);\r\n    }).then(fn, fnErr);\r\n}\r\n``` So I just now realized why that was throwing an error: The stream itself is being passed to 'finish', which is then passed to `resolve`, which attempts to call the stream's `.then` method, which leads to an infinite loop. It needs to instead pass the result string to `resolve`, but the test suite currently depends on the resolved value being the stream itself (which *definitely* violates the Promises/A+ spec, since the stream is a thenable).\r\n\r\nIn other words, the tests need to be rewritten. Then the above solution, with `self.on('finish', function(data){resolve(data.getOutput());});` instead of `self.on('finish', resolve);`, should work perfectly. (I'm *pretty* sure it's `data.getOutput()`, but double check that...)\r\n\r\nI won't get the chance to do that tonight, or probably tomorrow either, so if anyone else would like to do the honors, be my guest. If not, I'll hopefully get to it this week. If the point is to get the stream itself when it's done rendering, then doesn't \".on('finish')\" already pretty much do that?\r\n\r\nBoth in theory and practice, the point of Promises has always been to handle a single, immutable result (or error) the same way regardless of whether it is known yet or not. In this case, I feel that would be the resulting string. In other words, it seems to me that \".render().then()\" should behave like \".renderSync()\", but allowing for asynchronous values within the template. Either way, for a thenable to be passed to the first callback given to \".then()\" explicitly defies the core of what a javascript \"Promise\" is. A separate non-thenable version of the stream like what you described would be the only acceptable way to do that. Hm. Somehow didn't notice that \".renderSync()\" now returns a stream, too. In that case, this either needs to pass around a non-thenable version of the stream, or not be named \".then\". What if we were to simply rename `.then`? The only real problem here (aside from the broken `.catch` method) is that we're passing an object (the stream) with a `.then` method to the `.then()` callback, which explicitly violates the specification. But if it were named something else, like `.promisify()`, `.and()`, or literally anything other than `.then()` or `.catch()`, then my example from \"Edit 2\" in the original post would work perfectly as-is. Fixed in #443. Thanks!  I'm not sure I understand. It sounds like you're saying this would cause \"bar/marko.json\" and \"./other/marko.json\" to behave as though they were directly written in the root \"marko.json\", correct? What would that affect? Bundling? Module loading? In other words, could you give an example use-case from the end user's perspective?\n\nI can't see any reason not to implement this, I'm just a little unclear on the motivation to do so.\n Ah, makes sense. I would suggest either \"include(s)\" or \"import(s)\", the word \"extends\" doesn't sound quite right for what this would be doing.  While digging around in the compiler just now I noticed that some of the code is *not* Promises/A+ compliant, specifically the `<await>` tag. These are mostly edge-cases, and will *probably* never break anything, but here's what I found:\r\n\r\n* The promise resolution procedure must only access the `.then` property once. So instead of `if (typeof promise.then === 'function') { promise.then(...); }` it should use `var then = promise.then; if (typeof then === 'function') { then.call(promise, ...); }`\r\n\r\n* If attempting to retrieve the `.then` property throws an error, then the error must be caught and the resulting promise must be rejected with the error as the reason. (It currently isn't being caught.)\r\n\r\n* The `.catch(onRejected)` method is neither defined nor required by the specification, it's simply a convenient alias for `.then(null, onRejected)` which *most* promise implementations *choose* to provide. \r\n\r\nThose are just the things I happened to remember, there are probably a few other technicalities that I've forgotten about since I last read through the spec. I'll try to work on this when I get the chance but until then I thought I should post this somewhere. I'll also keep an eye out for other places in the code that might handle Promises incorrectly and add them here.\r\n\r\nPromises/A+ Specification: https://promisesaplus.com/ This also raises an interesting question: Should Marko actually be trying to handle Promise resolution directly, or would it be better to rely on a native/polyfilled `Promise` implementation? It looks like that's what #251 is currently doing.\n\nIf Marko is to handle \"thenables\" directly, then I would be in favor of adding a common helper utility for it - which would essentially be a built-in polyfill - so that each tag or feature which needs to handle Promise resolution won't end up re-implementing their own non-compliant handling code. I have enough experience writing spec-compliant thenables to do that, but I would much prefer letting a dedicated `Promise` implementation handle it.\n Quick update: Since #251 only applies when the user explicitly calls the `.then` method, it's considered a special case. The `<await>` tag, however, needs to be usable in pre-ES5 environments, which leaves either a built-in polyfill or just more compliant handling code as the only options.\r\n\r\nHowever, I've also noticed one other issue: The `<await>` tag currently accepts either a value, a Promise, or a node-style function (last argument is an error-first callback). I'll continue working on this under the assumption that we want the `<await>` tag to continue to handle node-style functions, but be aware that this behavior defies the Promises/A+ specification. I'm basing these comments solely on the Promises/A+ specification, which defines the behavior and requirements of the \".then\" method common to all implementations. ECMAScript defines the \".catch\" method for native implementations, but libraries have no obligation whatsoever to include it. The second argument to \".then\", however, *is* explicitly defined and must be supported by all implementations.\r\n\r\nThe \".then\" only being accessed once is a subtle requirement, I wouldn't have even known about it if not for the 'promises-aplus-tests' package. To be honest, it probably won't ever affect anything.\r\n\r\nCurrently, if attempting to access \".then\" throws an error, it is simply thrown. It should instead cause the resulting Promise to be rejected.\r\n\r\nThe Promises/A+ specification explicitly defines how to resolve an object *or function* - the \"await\" tag resolves functions in a non-compliant way. I believe the inconsistency is acceptable as long as users are aware of it, I just felt it was worth mentioning.\r\n\r\nUltimately, the changes I'm proposing would only really affect edge-cases, like weird (but still compliant) implementations that don't have a \".catch\" method, or can't handle synchronously-thrown errors. I suppose most of those technicalities likely won't ever affect anything, so as long as the test cases are fairly thorough we should be fine. Though I do still suggest relying on the second argument to `.then`, as it's explicitly defined and used by every implementation that's even remotely compliant, while `.catch` is completely optional for third-party libraries.\r\n\r\nThe rest of it we can probably just leave as-is, as long as we acknowledge that it's not *technically* spec-compliant.  ### Open Questions\r\nWhat version of the browser support ? @cheft \n\nNone of the built-in tags currently generate anything above ES5. You can find a detailed compatibility table for all major browsers [here](https://kangax.github.io/compat-table/es5/).\n\nThe compiler currently requires at least partial ES6 support (Node.js 4+). If you're not already compiling your templates _before_ sending them to the browser, you really should.\n\nThe renderer runs in all modern browsers; if you need to support older browsers (like IE8), you will need to transpile the renderer and the compiled (\".marko.js\") templates with [Babel](https://babeljs.io/) before serving them to the client.\n  I like this idea, and I believe I've found a simple way to implement it:\n\n```\n<await(result from promise)>\n    <await-error if(process.env.NODE_ENV === 'development')>\n        <script type=\"text/javascript\">console.log(\"async tag failed!\")</script>\n    </await-error>\n</await>\n```\n\nThat works correctly with or without `client-reorder`. This is just a proof of concept, we would want to implement something like it directly in the renderer code and pass the actual error message through.\n  Interesting, I like it! I'm still a little fuzzy on a few of the details, though I'm also reading this on my phone and half asleep... It's been a long day.\r\n\r\nI especially like the @ syntax. `<@body></@body>` would be fine with me if getting the parser to accept `<@body></body>` is a lot of work.\r\n\r\nIt looks like the `<include>` tag combined with @ tags should be able to do everything the layout taglib does and more, if so then I'd have no problem with it being deprecated in favor of this once it's fully implemented.\r\n Would there ever be a situation where the target parent of the nested tag could be ambiguous? If not, then I can't see any reason not to deprecate the old syntax.\n In other words, are there any situations where \"@error\" could mean either \"await:error\" or \"something-else:error\"? I can't think of any, but it's worth asking.\n Hmm, that's a good question... what about a slightly different syntax for one of the two conditions? Nested tags that can be defined multiple times could use `<@tabs>`, while single-instance tags could use something like `<:tab>`, or vice-versa.\n  ## Description\r\n\r\n```js\r\nvar template = require('some.marko')\r\ntemplate.stream() // exception on line 234 of runtime/marko-runtime.js\r\n```\r\n\r\n## Motivation and Context\r\n\r\nFixes a runtime exception when streaming without providing a data context.\r\n\r\nI would provide a test for this, but I can't find where it would go or any tests that resemble the case to emulate.\r\n\r\n [![Coverage Status](https://coveralls.io/builds/8859130/badge)](https://coveralls.io/builds/8859130)\n\nCoverage remained the same at 83.969% when pulling **22e6ed2f94e615c0cada3ccb66258ab354e01234 on jsumners:empty-data** into **1c0c92eb360493c595e763e10305206ce5ed315f on marko-js:v3**.\n @austinkelleher thanks. I added the test.\n [![Coverage Status](https://coveralls.io/builds/8859285/badge)](https://coveralls.io/builds/8859285)\n\nCoverage remained the same at 83.969% when pulling **ba73d974aabb46b1510fd0d1b12126b0444b6742 on jsumners:empty-data** into **1c0c92eb360493c595e763e10305206ce5ed315f on marko-js:v3**.\n @austinkelleher I wrote this against the v3 branch. It is a bug that is impacting my current usage of Marko.\n [![Coverage Status](https://coveralls.io/builds/8859934/badge)](https://coveralls.io/builds/8859934)\n\nCoverage increased (+0.02%) to 83.985% when pulling **dd094254d0162914f5401a4d20f79643d157f075 on jsumners:empty-data** into **1c0c92eb360493c595e763e10305206ce5ed315f on marko-js:v3**.\n @mlrawlings thank you.\n  [![Coverage Status](https://coveralls.io/builds/8839791/badge)](https://coveralls.io/builds/8839791)\n\nCoverage increased (+0.6%) to 87.596% when pulling **63862a8b9204cfd8e146691920593ef6c85331d9 on charlieduong94:420-deprecate-w-on-attr** into **3eb3c286e8147448e58e623e2d294a09a75bbac4 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8839968/badge)](https://coveralls.io/builds/8839968)\n\nCoverage decreased (-22.1%) to 64.874% when pulling **0716f90b2d9b1c3ace0f8976142583b8fe654b85 on charlieduong94:420-deprecate-w-on-attr** into **3eb3c286e8147448e58e623e2d294a09a75bbac4 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8840342/badge)](https://coveralls.io/builds/8840342)\n\nCoverage decreased (-22.1%) to 64.874% when pulling **cfc1d8c001d14638d8f1d5b1135a51819d062513 on charlieduong94:420-deprecate-w-on-attr** into **3eb3c286e8147448e58e623e2d294a09a75bbac4 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8846126/badge)](https://coveralls.io/builds/8846126)\n\nCoverage decreased (-0.4%) to 86.541% when pulling **e7ab99f66a5f92de53aef9bfedbf6f4d6a4f0bda on charlieduong94:420-deprecate-w-on-attr** into **3eb3c286e8147448e58e623e2d294a09a75bbac4 on marko-js:master**.\n  [![Coverage Status](https://coveralls.io/builds/8834643/badge)](https://coveralls.io/builds/8834643)\n\nCoverage decreased (-5.6%) to 81.331% when pulling **a19bac4cb30795292295726f90ff38cea3cb999c on austinkelleher:419-deprecate-w-preserve** into **c35bbf0b9d341211499fbe0eeca9f03d5a4691fd on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8834744/badge)](https://coveralls.io/builds/8834744)\n\nCoverage decreased (-18.2%) to 68.791% when pulling **a19bac4cb30795292295726f90ff38cea3cb999c on austinkelleher:419-deprecate-w-preserve** into **c35bbf0b9d341211499fbe0eeca9f03d5a4691fd on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8835416/badge)](https://coveralls.io/builds/8835416)\n\nCoverage decreased (-0.4%) to 86.535% when pulling **0dca32c8ba60b07e14cd47e019bf34dead0a0007 on austinkelleher:419-deprecate-w-preserve** into **c35bbf0b9d341211499fbe0eeca9f03d5a4691fd on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8835416/badge)](https://coveralls.io/builds/8835416)\n\nCoverage decreased (-5.6%) to 81.331% when pulling **0dca32c8ba60b07e14cd47e019bf34dead0a0007 on austinkelleher:419-deprecate-w-preserve** into **c35bbf0b9d341211499fbe0eeca9f03d5a4691fd on marko-js:master**.\n  [![Coverage Status](https://coveralls.io/builds/8819913/badge)](https://coveralls.io/builds/8819913)\n\nCoverage increased (+0.02%) to 72.134% when pulling **f192f486cca4145af4e4734e49b8ef5dc3f47775 on austinkelleher:410-await-reorderer-body-transform** into **3622cc4421458649980138950ec0fbf9ac5121dd on marko-js:master**.\n  ## Pre-ES6 Support\r\nHow should Marko deal with ES6+ features in pre-ES6 environments?\r\n\r\n### Definitions\r\n\"ES6+\" refers to features and keywords introduced in ES2015 or later, and the environments which support them.\r\n\r\n\"pre-ES6\" refers to environments which do *not* support features introduced in ES2015 or later, in which those features must either be transpiled or polyfilled before execution, or not used at all.\r\n\r\n### Context\r\nIt is of course possible to use ES6+ features within user-written code, which simply gets copied into the compiled output in the case of a template or executed as-is in the case of a component or taglib. The burden then falls on the developer to know which features may or may not be used in their environment.\r\n\r\nHowever, as discovered while working on #428, Marko's compiler is perfectly capable of generating ES6+ code, though it doesn't currently do so. The purpose of this issue is open a discussion on the possible ways of dealing with situations where a new enhancement or taglib wishes to make use of such features while rendering, which may not yet be supported in all environments, especially client-side.\r\n\r\n### Possible Solutions\r\n1. Automatically compile certain features and keywords differently based on a configuration option. This would require the most effort to implement and maintain.\r\n\r\n2. Don't allow ES6+ to be generated by the Marko core. Any enhancement or taglib that wants to use newer language features *must* be a separate module.\r\n\r\n3. Clearly mark all features and tags which require ES6+ support. The burden then falls once again on the end developer to know what they can or cannot use, or to run it through a transpiler before rendering.\r\n\r\n4. Create an optional transpiler plugin. If a valid transpiler (like Babel) is passed to the compiler, then whenever an ES6+ feature is encountered it will be automatically fed through the transpiler's API. It could possibly even accept other transpilers like coffeescript or typescript. I would be willing to work on this when I find the time if others are interested.\r\n\r\nThose are just the ideas I could think of, this is intended to start an open-ended discussion. Suggestions and constructive criticism are welcome! @patrick-steele-idem I was thinking more about long-term compatibility. I feel like `import`/`export` is just the tip of the iceburg. Aside from big things like that and `async`/`await`, the little things also start to look really tempting, like rest/spread operators, destructuring, argument defaults...\n\nI guess a variation of my question might be something like \"Where will the line be drawn on legacy support in the (near-ish) future, and what will be the recommended solutions\"? The compiler already requires Node.js 4+ to run, though I believe none of the core components or tags currently _produce_ anything higher than ES5.\n\nThe idea of built-in support for running in ES3-only is ridiculous, but for the compiler to assume native ES7 `async`/`await` support would be equally laughable. Aside from the note about the compiler requiring Node 4+ I couldn't find anything that explicitly stated the lowest supported version, or detailed information on what is needed to make it work in legacy environments, but I feel that's something that needs to be addressed.\n At the moment I agree that it's pretty safe to stick with ES6 or lower for the compiler code, and the renderer doesn't use anything newer than ES5, or maybe even ES3 (unless of course the user writes ES6+ code). But things like that have a way of getting fuzzy fast, especially with constantly evolving standards like ECMAScript, Node, and the major browsers.\n I think what was really bothering me is that none of the documentation - at least that I can find - describes which features and ES versions are required by the various pieces of Marko, other than a side-note somewhere about the compiler using ES6 classes and a vague statement about the renderer being \"supported in all web browsers\" in the FAQ.\r\n\r\nFor example, a list like the following could be added to the documentation:\r\n* The compiler requires and must be compatible with ES6/ES2015 (Node 4+)\r\n* The runtime requires and must be compatible with ES5\r\n* Built-in taglibs must generate ES5-compatible code\r\n* Additions which use ES6+ features must only do so when called by the user (e.g. #423)\r\n\r\nIt would also be helpful to include information on how to transpile with Babel, and when that would be necessary, for new users who may not already know those things.  [![Coverage Status](https://coveralls.io/builds/8810198/badge)](https://coveralls.io/builds/8810198)\n\nCoverage decreased (-0.01%) to 72.102% when pulling **375936a26feacf980e5312964ce7f65f4bae0875 on austinkelleher:426-deprecated-async-events** into **3622cc4421458649980138950ec0fbf9ac5121dd on marko-js:master**.\n  ## Description\r\nI simply copied `var-tag.js` and its `marko.json` entry to create `<let>` and `<const>` tags in `taglibs/core`.\r\n\r\n## Motivation and Context\r\nI was surprised to find that `context.builder.vars()` already had an optional second parameter for variable type ('var', 'let', or 'const'), but only `<var>` had been implemented as a tag.\r\n\r\nThis pull request is meant to be a starting point, but it could also be applied as-is. The commit is purely additive and no existing functionality should be affected.\r\n\r\n## TODO\r\n* Add automated tests\r\n* Add documentation\r\n* (optional) Throw compiler error on identifier re-declaration or on `const` re-assignment\r\n\r\n## Additional Notes\r\nProviding a body to a `<var>` tag causes it to compile into an IIFE to restrict its scope. Because the `<let>` and `<const>` tags simply re-use the same code they currently do the same, but they could be made to use a block statement (`{ ... }`) instead. Hmm... it seems the auto-tests are currently failing, I assume that's because I didn't write any. Unfortunately I'm not sure when I'll next get the chance to work on this. If anyone would like to take over from here, feel free to do so.\n [![Coverage Status](https://coveralls.io/builds/8803035/badge)](https://coveralls.io/builds/8803035)\n\nCoverage decreased (-0.05%) to 85.073% when pulling **f5786f7c0dbf58fe90c3be4b5ae624de9a2bbf00 on Hesulan:let-const-tags** into **9a86d848f29b2b1780b1683d7c5903901238499c on marko-js:marko-v4**.\n [![Coverage Status](https://coveralls.io/builds/8803035/badge)](https://coveralls.io/builds/8803035)\n\nCoverage decreased (-0.05%) to 85.073% when pulling **f5786f7c0dbf58fe90c3be4b5ae624de9a2bbf00 on Hesulan:let-const-tags** into **9a86d848f29b2b1780b1683d7c5903901238499c on marko-js:marko-v4**.\n I agree that the compiler should throw an error on re-initialization or const re-assignment, that's point number 3 in the TODO section of the pull request. It's getting compiled into actual `let` and `const` calls so it will eventually do that during render anyway, but it would be nice if it could do that at compile-time. But that's something that will need to be done deeper within the code, probably somewhere inside the `Vars` AST node; so far these commits have only touched the taglib code.\n\nI'm not sure why I didn't think of this before, but it will also be necessary for the compiler to handle `let` and `const` differently in pre-ES6 environments, where the keywords either need to be transpiled, or require strict-mode (as two of the four travis-ci tests apparently do). In any case, it seems this isn't quite as simple as it appeared.\n\nAssuming ES6 or higher, anyone can grab these commits to play with locally, it's worked perfectly for me so far. I might also get around to making this a separate taglib in the next day or two, at least until someone with more time on their hands (possibly my future self? I can only hope...) figures out how to make it not break things.\n So I've been mulling this over, and here are the solutions I can think of:\n1. Pull these tags into a separate module. This would be fairly simple, I would just need to make a few minor changes and publish to npm.\n2. Provide built-in support for compiling to `var` instead. This would be overkill, and I'm not even sure where to begin.\n3. Add `'use strict';` to the top of the compiled output. This would make it work correctly in Node 4 and 5, but would also change the behavior of the entire template in very subtle ways, albeit mostly for edge cases.\n4. Expect end users to know that they can't use these tags natively in pre-ES6 environments. We would also need to modify the integration tests to skip certain ones on Node 4 and 5.\n5. Pull these tags into a new built-in taglib specifically made for support-breaking features (something like `es6-taglib`) which can then be enabled/disabled by a compiler flag (like `require('marko/compiler').defaultOptions.es6_tags = true`). This would be especially helpful in the case of client-side rendering, where templates might be rendered in a much lower environment version than the one they were compiled in, and developers shouldn't have to keep track of which tags support which versions. Any future tags which generate ES6+ code would also be placed here.\n\nI'm sure there other options I haven't considered as well. Either way, I'd like to hear your thoughts!\n For me, the point of `const` and `let` is that they're clean, effective, _native_ solutions to specific problems. A separate taglib or module would provide a safe, \"official\" place for tags like these which are built around ES6+ features and concepts to be implemented without the risk of accidentally breaking compatibility; anyone who chooses to `require()` it knows what they're getting into. That being said, the addition of another taglib or module to maintain isn't something to propose lightly.\n\nIn any case, this certainly isn't urgent. Perhaps we could simply put this on the back-burner while we experiment with ideas for other ES6+ tags, and see how much interest there is from the community? In the meantime, I could easily port these to a separate module and publish it for everyone to play with.\n For anyone interested, I finally got around to publishing these as a standalone package: \n\n```\nnpm install --save marko-taglib-let-const\n```\n\n(Note: The `--save` part is necessary because marko only searches for taglibs listed as dependencies in your `package.json`.)\n  [![Coverage Status](https://coveralls.io/builds/8801714/badge)](https://coveralls.io/builds/8801714)\n\nCoverage decreased (-0.1%) to 71.953% when pulling **538196fc8a1dc9ecdcbea31714723dd8e544fec2 on charlieduong94:394-introduce-ref-and-for-ref-attributes** into **00b52ae5be30b9665bb289732adfd4bc985aa2e3 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8801798/badge)](https://coveralls.io/builds/8801798)\n\nCoverage decreased (-0.1%) to 71.953% when pulling **4409cecb4bcb7a9ff1b642545eb1436c606cfe17 on charlieduong94:394-introduce-ref-and-for-ref-attributes** into **00b52ae5be30b9665bb289732adfd4bc985aa2e3 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8801850/badge)](https://coveralls.io/builds/8801850)\n\nCoverage decreased (-0.1%) to 71.953% when pulling **e1940a7ff0d1d056c2800a1d20acf44a90b24275 on charlieduong94:394-introduce-ref-and-for-ref-attributes** into **00b52ae5be30b9665bb289732adfd4bc985aa2e3 on marko-js:master**.\n  @patrick-steele-idem It seems that this currently coerces non-string values, such as `undefined`, `null`, and `{}`, into `<undefined></undefined>`, `<null></null>`, and `<[object Object]></[object Object]>`. Should it throw an error instead?  I'm more than a little hesitant about this... I do see how it could be useful, but considering what little would be gained (expression whitespace already works inside parenthesis, and is arguably easier to read most of the time) versus the potential costs (reserved operator names, inconsistent behavior, potential ambiguity, etc.), I feel this needs more discussion, especially since it would likely affect any future enhancements which deal with or depend on whitespace behavior.\n\nPerhaps if this were to be opt-in, and only enabled by default on certain tags like `<var>` and `<assign>`? I would love to see something like that, and it would virtually eliminate the problems I mentioned (you can pretty much assume that anything on a `<var>` tag after the `=` is part of the value expression).\n I haven't peeked at the code yet, but if this could be a some sort of opt-in flag on the tag definition (or renderer, or AST node, or wherever it would fit best), then any other tags - possibly even user-made taglibs - could simply enable this \"loose whitespace\" support with relative ease without changing the expected behavior for anything else.\n I would much prefer a parsing mode switch based on the tag name, it seems like it would be much less messy and more reusable than having each tag manually stitch everything back together, or it might even be as simple as adding a couple of flags to the commit from the related PR. Is the parser able to read a config parameter from somewhere user-accessible, like the `marko.json` definition, or would the tag names which support this need to be hard-coded?\n I like the idea of the comma syntax being concise-specific. It already has more of a javascript-y vibe (actually python-y because of the significant indentation, but you get my point), while the standard syntax feels more like enhanced HTML, at least in my opinion. Also, my original concern was over allowing whitespace everywhere within value assignments without explicit boundaries; I can't think of any serious problems that allowing whitespace around the `=` might cause, aside from looking horrible when misused (`<tag foo = foo bar = bar baz = (baz + 1)/>`), but that can be said about almost anything.\n\nAs for only requiring commas sometimes, another possibility might be an all-or-nothing; if the tag contains values with whitespace, then there must be a comma between every attribute. As a side effect, that would also make it a bit easier to read, you would end up with either `tag foo=(1 + 2) bar=3 baz` or `tag foo = 1 + 2, bar=3, baz` instead of `tag foo = 1 + 2, bar=3 baz`.\n Requiring a semicolon at the end with the comma syntax would solve that first part, then it would be either:\n\n```\ntag baz = 3; - Hello World;  \u2192  <tag baz = 3;>Hello World;</tag>\n```\n\n or \n\n```\ntag baz = 3 - Hello World;  \u2192  <tag baz = 3 - Hello World;></tag>\n```\n typed that on my phone and I think it messed up the formatting... hopefully you know what I meant\n When in *concise mode*, could a `;` (semicolon) simply end the current tag like `>` does in *HTML mode*?\r\n\r\nFor example:\r\n```\r\nnav.navbar; ul\r\n    li for(link in data.links); a href=link.href - ${link.title}\r\n```\r\nWould be shorthand for:\r\n```\r\nnav.navbar\r\n    ul\r\n        li for(link in data.links)\r\n            a href=link.href - ${link.title}\r\n```\r\nor\r\n```\r\n<nav.navbar><ul>\r\n    <li for(link in data.links)><a href=link.href>${link.title}</a></li>\r\n</ul></nav>\r\n``` I agree with restricting this feature to concise syntax. The HTML-JS syntax is naturally more verbose, and with that verbosity you gain explicitness.\r\n\r\n    <assign name=( lastName.toUpperCase() + ', ' + firstName.toLowerCase() ) />\r\n\r\nThis looks nice and readable to me. I have no desire to remove these parenthesis, just as I have no desire to remove general closing tags :)  [![Coverage Status](https://coveralls.io/builds/8784764/badge)](https://coveralls.io/builds/8784764)\n\nCoverage increased (+0.03%) to 71.587% when pulling **0310d778a61fcc6931de8d39d9a97d6feb658751 on austinkelleher:251-render-promise** into **da11d73f52c2c1482124b8e189160f9a34ae1cf5 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8784838/badge)](https://coveralls.io/builds/8784838)\n\nCoverage increased (+0.03%) to 71.587% when pulling **beb86527865b287e31137c50519d592db4d12ca7 on austinkelleher:251-render-promise** into **da11d73f52c2c1482124b8e189160f9a34ae1cf5 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8784974/badge)](https://coveralls.io/builds/8784974)\n\nCoverage increased (+0.03%) to 71.494% when pulling **41fbe7a1d61614a05cecffc7260dc81458db3cd5 on austinkelleher:251-render-promise** into **abe0e2db2d32b729897905aba8fa17313a1f11e8 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8784974/badge)](https://coveralls.io/builds/8784974)\n\nCoverage increased (+0.03%) to 71.494% when pulling **41fbe7a1d61614a05cecffc7260dc81458db3cd5 on austinkelleher:251-render-promise** into **abe0e2db2d32b729897905aba8fa17313a1f11e8 on marko-js:master**.\n The `Promises/A+` specification requires that a `Promise` instance must only ever handle the very first call to either `resolve` or `reject`, and ignore all further attempts at either. So as long as the correct one is called first it doesn't matter what happens after, the resolved/rejected `Promise` instance becomes immutable.\n That being said, do be aware that a fulfilled `Promise` exhibits _shallow_ immutability; the resolved/rejected value is effectively a `const` in that you cannot _replace_ it, but you can still modify the result's properties. And since calling `resolve` or `reject` doesn't cause the function to exit, it's entirely possible to accidentally mutate the result.\n  Is there another way to achieve the same result? I can think of a few cases where it would be useful, though perhaps not strictly necessary, to be able to explicitly bind a widget file path. One example would be #514 - is there an alternative, or would that functionality no longer be possible? @patrick-steele-idem Ah, that does clarify. Thanks! Probably a good idea to mention those alternatives somewhere in the v3-v4 upgrade docs, and maybe a few examples to make refactoring easier. In marko@4.0.0-rc.17 it appears that in `onMount()`, `this.el` is the first element and `this.els` is all top-level elements (when there are multiple top-level elements).  [![Coverage Status](https://coveralls.io/builds/8752709/badge)](https://coveralls.io/builds/8752709)\n\nCoverage decreased (-0.04%) to 71.423% when pulling **849c1193b9318ef91a3fde4b3498b6671b8594b1 on austinkelleher:387-handleFileModified-warning** into **a35e6bdbc3fe6e7f4e92fb377c435e29ab3d6e33 on marko-js:master**.\n  The [language guide](https://github.com/marko-js/marko/blob/master/docs/language-guide.md) makes no reference to the `marko-body` attribute.  This attribute is necessary to keep Marko from interpreting inline scripts or inline CSS, but without being documented it's difficult to find this mechanism at all. > This means that the parser won't recognize HTML tags inside `<script>` and `<style>` tags since those tags do not contain HTML. Therefore, you should very rarely need to know about the `marko-body` attribute.\n\nIn our case we had `${` without a matching `}` (code that didn't intend to invoke Marko at all) and this caused an error.  I'd shudder to think what would've happened if it silently transformed something causing weird changes in behavior without any warning.  I mean it makes sense that maybe you want to `${JSON.stringify(foo)}` in the middle of a script tag, though it seems a bit dangerous to me that expressions are enabled in script tags by default.  I do understand the logic of keeping it consistent with other tags, however, and obviously it would be a breaking change, so I'm not suggesting that... just kind of musing.\n\nAnyway, documenting `marko-body` would've at least made it easier to correct the problem when we figured out what it was.\n\nI suppose the correct approach is just not to have inline JavaScript at all -- but sometimes that's nice for testing a quick template mock-up.\n  [![Coverage Status](https://coveralls.io/builds/8744473/badge)](https://coveralls.io/builds/8744473)\n\nCoverage increased (+0.03%) to 71.175% when pulling **1bb1c9ca0c1c386e52b66168daafcfe1b90bd2db on austinkelleher:407-node-require-extensions** into **36ef493526e47e4009ef7872b031c6918bfc1c3a on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8744661/badge)](https://coveralls.io/builds/8744661)\n\nCoverage increased (+0.04%) to 71.185% when pulling **ef71399d6acbaf302e08b2fc579b59a2469bf6c3 on austinkelleher:407-node-require-extensions** into **36ef493526e47e4009ef7872b031c6918bfc1c3a on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8745008/badge)](https://coveralls.io/builds/8745008)\n\nCoverage increased (+0.04%) to 71.191% when pulling **228ae8f0c7cda5660933b96713a43330c9abe47a on austinkelleher:407-node-require-extensions** into **36ef493526e47e4009ef7872b031c6918bfc1c3a on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8745063/badge)](https://coveralls.io/builds/8745063)\n\nCoverage increased (+0.04%) to 71.191% when pulling **228ae8f0c7cda5660933b96713a43330c9abe47a on austinkelleher:407-node-require-extensions** into **36ef493526e47e4009ef7872b031c6918bfc1c3a on marko-js:master**.\n  [![Coverage Status](https://coveralls.io/builds/8699522/badge)](https://coveralls.io/builds/8699522)\n\nCoverage remained the same at 71.14% when pulling **6ef6bb65fe6eaff0bf3ca82c7b79b49eb26a25cb on abiyasa:bug-on-nested-widget-id** into **21a43c010a75ca06857598f49ea3368b3e33c3c2 on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8699522/badge)](https://coveralls.io/builds/8699522)\n\nCoverage remained the same at 71.14% when pulling **6ef6bb65fe6eaff0bf3ca82c7b79b49eb26a25cb on abiyasa:bug-on-nested-widget-id** into **21a43c010a75ca06857598f49ea3368b3e33c3c2 on marko-js:master**.\n  For the purpose of hoisting `require()` calls out of the `render` function, the new `<import>` tag *should* handle that (see: ECMAScript's top level requirement for `import` statements - though I haven't had the chance to look at the pull yet so I can't be sure if it actually does this). I know that's not the only use for `<script marko-init>`, but thought I should throw that out there.\r\n\r\nRegarding `<render>` and `<init>`, why not both? `<init>` could simply be a drop-in replacement for `<script marko-init>`, while `<render>` would be optional, and if present would refactor the output in the way you described.\r\n\r\nI get the feeling that the `<render>` tag might take a while to get working correctly, but `<init>` should be quick and easy to add (and looks much nicer and more easily recognizable than `<script marko-init>`, at least in my opinion).  When using `require('marko/hot-reload').handleFileModified`, if a not-resolvable template path is passed there will be no warning (or other notification)\r\n\r\nA very minor quibble, but this was related to a somewhat elusive bug in my code.\r\n\r\nMaybe just a warning, or change the existing output from:\r\n\r\n```\r\n[marko/hot-reload] File modified: /cant/resolve/this/path/to/index.marko\r\n```\r\nto something like:\r\n```\r\n[marko/hot-reload] ERROR! cannot resolve template path: /cant/resolve/this/path/to/index.marko\r\n```  <!----------------------\n  |     IF BUG REPORT    |\n  ---------------------->\n## Bug Report\n\nCompiler throws an error on valid RegEx expressions in HTML5 `pattern` attribute for `input` elements.\n### Context\n\nGiven following code example\n\n``` html\n<input type=\"text\" pattern=\"\\w{2,20}\" />\n```\n### Expected Behavior\n\nCompile normally, as it valid attribute value\n### Actual Behavior\n\nThrows Error\n`'Invalid string (\"\\\\w{1,30}\"): SyntaxError: Unexpected token w in JSON at position 2'`\n\n<details><summary>\n\nAdditional Info</summary>\n\n\n### Your Environment\n\n<!-- Include as many relevant details about the environment you experienced the bug in -->\n- Version used: `\"marko\": \"^4.0.0-beta.1\"`\n- Environment name and version: `node.js 7.0`\n- Operating System and version (desktop or mobile): MacOS\n### Stack Trace\n\n<!-- If an error is thrown, provide the stack trace here -->\n\n```\nERR! [10:40:05] [Marko] 1) [src/marko/vip-puj.marko:111:88] Invalid string (\"\\w{1,30}\"): SyntaxError: Unexpected token w in JSON at position 2\nERR! [10:40:05] [Marko] \nERR! [10:40:05] [Marko]     at handleErrors (/Users/tino/Sites/transfers.do/node_modules/marko/compiler/Compiler.js:72:21)\nERR! [10:40:05] [Marko]     at Compiler.compile (/Users/tino/Sites/transfers.do/node_modules/marko/compiler/Compiler.js:127:9)\nERR! [10:40:05] [Marko]     at _compile (/Users/tino/Sites/transfers.do/node_modules/marko/compiler/index.js:89:33)\nERR! [10:40:05] [Marko]     at doLoad (/Users/tino/Sites/transfers.do/node_modules/marko/runtime/loader/index.js:163:42)\nERR! [10:40:05] [Marko]     at compileMarkoFile (/Users/tino/Sites/transfers.do/tasks/marko.js:45:26)\nERR! [10:40:05] [Marko]   errors: \nERR! [10:40:05] [Marko]    [ CompileError {\nERR! [10:40:05] [Marko]        context: [Object],\nERR! [10:40:05] [Marko]        node: undefined,\nERR! [10:40:05] [Marko]        message: 'Invalid string (\"\\\\w{1,30}\"): SyntaxError: Unexpected token w in JSON at position 2',\nERR! [10:40:05] [Marko]        code: 'INVALID_STRING',\nERR! [10:40:05] [Marko]        pos: [Object],\nERR! [10:40:05] [Marko]        endPos: [Object] } ] }\n```\n\n</details>\n I think accepting native RegEx as value will looks logical and very appropriate!\n Also, I'm not sure that this pattern attribute will work in same way in all browsers after escaping `\\\\`, but can't find related spec thought...\n  It's obvious why the whitespace of `<pre>` tags is not removed, but why for `<script>` tags too? Normally, you minify javascript code too so I don't get why this is ignored by default. Is there any why to enable minification for the `<script>` tag globally? `require('marko/compiler').defaultOptions.preserveWhitespace = true` sadly only does this globally, but if I have a `<pre>` tag it's displaying incorrectly. Is there a way to do this programmatically instead of a .json config file?\n  The page displays, all the js appears to load, but the onClick `handleThisClick` handler isn't firing (which should display a console log) and the c-nav.scss css isn't being applied (#c-nav). The base.scss style is working though (red).\n\n(I'm using lasso-babel/lasso-sass)\n\nmy route:\n\n```\n    let template = require('src/marko/pages/sign_in/sign_in.marko');\n    ctx.body = template.stream({\n        press: 'press'\n    });\n```\n\nsrc/marko/pages/sign_in/sign_in.marko:\n\n```\n<lasso-page package-path=\"./browser.json\" />\n\n<layout-use( \"../../layouts/base/base.marko\", data) show-header=false>\n    <layout-put into=\"body\">\n        BODY CONTENT ${data.press}\n        <c-nav(data) />\n\n    </layout-put>\n    <layout-put into=\"footer\">FOOTER CONTENT</layout-put>\n    </layout-use>\n```\n\nsrc/marko/pages/sign_in/browser.json:\n\n```\n{\n    \"dependencies\": [\n        \"../../components/c-nav/browser.json\"\n    ]\n}\n```\n\nsrc/marko/layouts/base/base.js:\n\n```\nconsole.log('base.js included');\n\nimport text from './text.js';\ntext();\n```\n\nsrc/marko/layouts/base/base.marko:\n\n```\n<!-- lasso -->\n<lasso-page package-path=\"./browser.json\" />\n<!-- /lasso -->\n<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>\n        <layout-placeholder name=\"title\" />\n    </title>\n    <!-- lasso -->\n    <lasso-head/>\n    <!-- /lasso -->\n</head>\n\n<body>\n    <div class=\"base\">base.marko body below</div>\n\n    <layout-placeholder name=\"body\" />\n\n    <!-- lasso -->\n    <lasso-body/>\n    <!-- /lasso -->\n    <!-- marko widgets -->\n    <init-widgets/>\n    <!-- /marko widgets -->\n</body>\n\n</html>\n\n```\n\nsrc/marko/layouts/base/base.scss:\n\n```\n.base {\n    width: 100px;\n    height: 30px;\n    background: red;\n}\n```\n\nsrc/marko/layouts/base/browser.json:\n\n```\n{\n    \"dependencies\": [\n        \"require-run: ./base\",\n        \"./*.scss\"\n    ]\n}\n```\n\nsrc/marko/layouts/base/text.js:\n\n```\n'use strict';\nexport default () => {\n    console.log('test.js included');\n};\n```\n\nsrc/marko/components/c-nav/browser.json:\n\n```\n{\n    \"dependencies\": [\n        \"require: marko-widgets\",\n        \"require: ./widget\",\n        \"./*.scss\"\n    ]\n}\n\n```\n\nsrc/marko/components/c-nav/c-nav.js:\n`exports.render = require('./renderer').render;`\n\nsrc/marko/components/c-nav/c-nav.marko:\n\n```\n<nav role=\"navigation\" id=\"c-nav\" w-bind=\"./widget\">\n    <ul class=\"main-navigation\">\n        <li>\n            <a href=\"/\">Home</a>\n        </li>\n        <li>\n            <div w-onClick=\"handleThisClick\">${data.press}</div>\n        </li>\n    </ul>\n</nav>\n```\n\nsrc/marko/components/c-nav/c-nav.scss:\n\n```\n#c-nav {\n    background: green;\n    width: 100%;\n    height: 40px;\n}\n```\n\nsrc/marko/components/c-nav/renderer.js:\n\n```\nmodule.exports = require('marko-widgets').defineRenderer({\n    template: require('./c-nav.marko'),\n\n    getInitialProps: function (input, out) {\n        console.log(input);\n        return input;\n    }\n});\n```\n\nsrc/marko/components/c-nav/widget.js:\n\n```\nmodule.exports = require('marko-widgets').defineWidget({\n    handleThisClick: function () {\n        console.log('c-nav click');\n    }\n});\n\n```\n\nThe console fires `base.js included` and `test.js included`.\n @patrick-steele-idem Hello! I actually found out what the issue is. It's possibly related to https://github.com/lasso-js/lasso-marko/issues/3.\n\nI had to move the `pages/sign_in/browser.json` dependencies to the `layouts/base/browser.json`dependencies. Which is weird, since I am declaring the usage of the components in `pages/sign_in/sign_in.marko` and not in `layouts/base/base.marko`.\n  ## Bug Report\n\nHot reload doesnt work in ExpressJS setup\n### Your Environment\n\nWin8.1 \nChrome\n Hi, the browser refresh only refreshes the browser page load.\nI did manual refresh, and it doesnt work.\nThe file watch does work and the method handleFileModified(templatePath) is triggered, but nothing happens, even though there is console printout from that says 'file refreshed...' (or something). Also, there isnt new js file compiled/created either, even after setting write to file option as true.\n @sriver111 I happened to have this error 5 minutes ago, the console printout, is it the relative path or the absolute path. It needs to be the absolute path i.e. `/home/user/dev/yourproject/src/markofiles/component/app-mycomponent/template.marko` or on Windows `C:\\yourproject\\wherever-your-marko-template-files-are\\template.marko`\n Hi Patrick, u are right. The path has to be absolute to work.\nThanks and cheers!\n  Hi there!\nThis code doesn't work now. Before he worked fine.\n\n```\nlet HomePage = require('./home.marko');\nlet response = {\n    $global: {\n        active: 'home',\n        logged: logged,\n        moment: moment,\n    },\n    currentPage: currentPage,\n};\nHomePage.stream(response).pipe(res);\n```\n\nI have a layout and his part(home.marko). I load a part of layout and give him the data for rendering, but nothing.\n\nIn a layout i tried to print data: `${out.global.active}`. What i doing wrong? Previously everything worked fine.\n @patrick-steele-idem Thanks a lot!\n  Hello, marko neighbors! I use Express with Marko. Example:\n\n```\ntemplate.render(data, res)\n```\n\nHow do I handle rendering errors in this case? Thanks!\n  `require('marko/compiler').taglibFinder.includeDir(dirPath);` \r\nwould be nice feature\r\nI have many directories inside my project folder that have `package.json` inside because i need them to have individual node_modules inside and for other reasons as well\r\n\r\nnow I cannot bubble to main project folder and make some components available across all directories\r\n\r\nthere is `taglibLookup.registerTaglib` but seems to work only in node environment :/ (in webpack doesn't seem to work)\r\n  <!----------------------\n  |     IF BUG REPORT    |\n  ---------------------->\n## Bug Report\n\nI'm getting \"maximum call stack exceeded\". What am I doing wrong?\n### Context\n\nI'm trying to benchmark marko against our current favorite, handlebars, because I expect it'll be a lot faster. I'm running a matcha test, so I have the following code:\n\n```\nconst handlebars = require('handlebars');\nrequire('marko/node-require').install();\nconst fs = require('fs');\n\nconst data = // [snipped for brevity]\n\nsuite('Post template', () => {\n//snipped Handlebars test \n\n    bench('marko', (next) => {\n        const template = require('./post.marko');\n        template.render(data, () => {\n            //throw away the render output\n            next();\n        });\n    }); \n```\n### Expected Behavior\n\nI should see benchmark results\n### Actual Behavior\n\nDuring the marko test, an error is thrown that aborts the suite\n\n<details><summary>\n\nAdditional Info</summary>\n\n\n### Your Environment\n\nI'm using C9, running this using matcha for node.js\n### Stack Trace\n\n```\nRangeError: Maximum call stack size exceeded\n    at Array.join (native)\n    at Object.posix.resolve (path.js:442:52)\n    at Function.Module._resolveLookupPaths (module.js:249:17)\n    at Function.Module._resolveFilename (module.js:316:31)\n    at Function.Module._load (module.js:276:25)\n    at Module.require (module.js:353:17)\n    at require (internal/module.js:12:17)\n    at /home/ubuntu/workspace/benchmarks/matcha-tests.js:35:20\n    at iterate (/home/ubuntu/workspace/node_modules/matcha/lib/matcha/bench.js:178:5)\n    at /home/ubuntu/workspace/node_modules/matcha/lib/matcha/bench.js:180:7\n```\n\n</details>\n Thanks, that worked great! Yeah, I got the idea from your benchmark set, but my group wanted to see how it performs with our templates. I figured it was simple enough to do.. until I hit this issue >.>\n\nThanks again!\n  It seems to me that some of those tags might be simpler than others. Like you said, `<init-widgets/>` may not recognize widgets within an `<await>` tag (though I have a couple thoughts on how it might). Others, like `<browser-refresh/>`, could simply attach themselves to the compiler (or perhaps even the renderer) and append/prepend themselves unconditionally. Ordering and precedence shouldn't affect those much, but that's something we would still need to figure out eventually.\r\n\r\n> Side note: I just noticed that the content of `<await(...) client-reorder>` ends up in `<head>` if it's the first document element; in other words, `<!DOCTYPE html><await(foo from Promise.resolve('foo')) client-reorder>${foo}</await>bar<await-reorderer/>` produces `<html><head>foo</head><body>bar</body></html>` instead of `<html><body>foobar</body></html>`. It's an uncommon edge-case, but something to be aware of if excluding the `<body>` tag, and possibly a bug in `<await-reorderer/>`.  <!--- Provide a general summary of your changes in the Title above -->\n## Description\n\n<!--- Describe your changes in detail -->\n\nUpdates old references of `htmlparser2` to `htmljs-parser`. Adjusted some of the wording in the overview doc to try and adapt the text to v3.\n [![Coverage Status](https://coveralls.io/builds/8271931/badge)](https://coveralls.io/builds/8271931)\n\nCoverage remained the same at 83.972% when pulling **4e7c519f523a36045f5fbd14e64c0bec47453b78 on yomed:overview-docs** into **4646eef0389088df617dd87ac730186334f0efbf on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/8271931/badge)](https://coveralls.io/builds/8271931)\n\nCoverage remained the same at 83.972% when pulling **4e7c519f523a36045f5fbd14e64c0bec47453b78 on yomed:overview-docs** into **4646eef0389088df617dd87ac730186334f0efbf on marko-js:master**.\n  Hi guys!\nThis template engine is Awesome! Thanks for your hard work! :+1:  \n\n**One question, exist any tuto to use with Express?**\n\nSorry for this bad issue, Nicholls\n Guys check an issue please!\n\n![express](https://cloud.githubusercontent.com/assets/2154886/19223435/77eb70e4-8e35-11e6-8fe7-938e6225a373.png)\n\nMy Express route is:\n\n```\nvar express = require('express');\nvar router = express.Router();\nvar template = require('../views/index.marko');\n\n/* GET home page. */\nrouter.get('/', function(req, res, next) {\n  res.marko(template, { title: 'Express' });\n});\n\nmodule.exports = router;\n```\n Hi Patrick, thanks for your quickly response my friend! \ud83d\udc4d \n\nCan I use your '**require('marko/node-require').install();**' line in **'./app.js'** or is required to use in every Express route? I'm using the **Express generator**.\n\nRegards, Nicholls\n What do you think to add your example into **README** file? Maybe it's very useful for others!\n  [![Coverage Status](https://coveralls.io/builds/8573081/badge)](https://coveralls.io/builds/8573081)\n\nCoverage increased (+0.008%) to 83.969% when pulling **2b4116b9e01fc1c9129139ba2e6ba3b70262484f on await-error-events** into **d25c5ceedfc44859972980812cdd6b6d116f8818 on v3**.\n  ## Description\n\nAdds concise syntax example to README.md for applying rendering logic with separate tags.\n## Motivation and Context\n\nTo make sure the concise syntax is really equivalent to the HTML template I ran this example. I think it makes sense to include it for other new users as another quick introduction to the Marko syntax and the alternative way of applying rendering logic. I would have found it helpful.\n## Checklist:\n- [x] My code follows the code style of this project.\n- [x] I have updated/added documentation affected by my changes.\n- [x] I have read the **CONTRIBUTING** document.\n- [ ] I have added tests to cover my changes.\n- [x] All new and existing tests passed.\n [![Coverage Status](https://coveralls.io/builds/8184714/badge)](https://coveralls.io/builds/8184714)\n\nCoverage remained the same at 83.997% when pulling **995aaa3288b9e382d745c3632d294dff512cd483 on JonasHavers:master** into **cca2b0a452b23dcb79c1d80632c1fa59e3586705 on marko-js:master**.\n  `while` was introduced in v3, but was missing from the docs. I copied this from the \"what's new\" page, and then modified it to the same format as the `for` loop documentation.\n [![Coverage Status](https://coveralls.io/builds/8143951/badge)](https://coveralls.io/builds/8143951)\n\nCoverage remained the same at 83.997% when pulling **44d98f1490952cb8847696f9337f438d1835d603 on yomed:while-docs** into **a819ba3816dfeb21eb5acccd77cd0ec2fc470d8b on marko-js:master**.\n  Sorry if this is answered somewhere (I couldn't find it), but can you do custom attributes without creating a custom tag? I'm curious if we can do something similar to what Angular has where you can create directives for attributes, not just tags.\n\nAs an example, lets say I wanted to provide an alternate \"src\" attribute (my-src) for the img tag so I could rewrite the URL before rendering. Is this possible? Or do I have to write a custom image tag and handle the src attribute that way? The docs weren't clear on this point. They mention custom tags AND attributes, but I only see examples for tags.\n\nBTW, I'm currently using the component directory set-up, not a marko.json. \n Thanks for the quick response, appreciate it. I'll have a look at the link you provided.\n Thanks, Patrick! I'll need to digest this a bit but it's much appreciated! I assume that you must use a marko.json to accomplish this, instead of the components directory?\n  ## Bug Report\n### Context\n\n<!--- Provide a more detailed introduction to the issue itself, and why you consider it to be a bug.  How has this bug affected you? What were you trying to accomplish? -->\n\nWhen Marko renders a template using `marko/express`, and there are no differences, it still sends the page over with a 200 HTTP status code.\n### Expected Behavior\n\nIf no differences are detected, `marko/express` should send a 304 to avoid extra data being sent.\n### Actual Behavior\n\nCurrently, no matter what, `marko/express` will send the template over with a 200 HTTP code.\n### Possible Fix\n\nStore an in memory hash of the previous render and check if it matches the current render; if they match send a 304 concluding nothing has changed.\n\n<details><summary>\n\nAdditional Info</summary>\n\n\n### Your Environment\n- Version used: 3.9.4\n- Environment name and version (e.g. Chrome 39, node.js 5.4): Chrome 52, node 6.3.1\n- Operating System and version (desktop or mobile): Mac OS X 10.11.6\n### Steps to Reproduce\n1. Install Marko within an Express project.\n2. Require `marko/express`\n3. Use `res.marko` to compile a template and send it to a client\n4. Look at the response status headers and see that Express is responding with a 200 HTTP code\n\n</details>\n That is what I thought, but if I use pug (jade), templates will render, and if not changes are detected, express will emit a 304. With Marko, it will always send a 200, and force the client to download the entire page.\n Although you would have to store a lot of data in memory if you wanted the page controller to calculate it without a rendered template to cross check it with. One way or another the data needs to be verified, and I do agree with not wanting to waste CPU cycles if data hasn't changed.\n\nDoes anyone have any ideas that would be efficient? I'm thinking of generating hashes from the data here, but that seems like a waste of CPU cycles itself.\n Sadly I have not had any time to work on this feature as of yet.\n  The current marko atom packages should use a more unique identifier in their package names.\nWhen searching for \"marko\" in atom the packages appear in this order:\n- language-marko (5th in list)\n- autocomplete-marko (17th)\n- hyperclick-marko (23rd)\n\nThis makes it difficult to find all available marko packages in a single search.\n### Solution\n\nChange the package name from `marko` to something like `markojs` or `marko-js` to make it easier to find all of the packages.\n\nThanks!\n  How would that work with event handlers?\n\nIn [`react-templates`](https://github.com/wix/react-templates#event-handlers) for example you can assign events using the same properties React uses.\n What is the expected performance impact, if there is any at all?\n  As services like https://zeit.co/now become more ubiquitous, and writing to disk in an app server becomes less kosher, this seems like a better option.\n\nI'm having to manually load/pass-through my includes right now just so I can set writeToDisk to false, and having to set writeToDisk adds a bit more noise to my code.\n\nMy 2c. :)\n @patrick-steele-idem Do we have to compile `marko` files first in order to serve them dynamically?\n @patrick-steele-idem I see, thanks.\n @patrick-steele-idem I think I'm in favor of making `false` the default. The compiled output is extremely useful for the things you mentioned and many others, but 98% of the time it just wastes disk I/O (which is a very bad thing if you develop on cloud storage or flash drives - which I do).\r\n\r\nOn the other hand, it's extremely easy to *en*-able `writeToDisk` when you need to debug something (not as convenient as having the file already there, but still super easy), and anyone concerned with start-up time should really just pre-compile everything in their build step and never `require()` the compiler at all during production. FWIW the surprise appearance of the compiled template as a `.js` file can disrupt the typical file watching/rebuild patterns in dev environments by firing off a misleading file/directory change event. This is another thing that is easy to fix (set ignore rules), but... Indeed, in dev you probably don't even want compilation caching to happen at all (requiring even more little fixes), and you'll have to add `marko.js` files to your `.gitignore` sooner rather than later...\r\n\r\nEasy fixes, but now a little pile of them :)\r\n\r\nAll that said, Marko is awesome and I think helping new users to avoid these surprises can only be a good thing.\r\n @mlrawlings I completely agree that the `*.marko.js` files are essential for debugging, but in my opinion it's already easy enough to generate them when desired with `./node_modules/.bin/markoc ./path/to/template.marko`, or even `require('marko/compiler').defaultOptions.writeToDisk = true;` for those who don't need to worry about unnecessary disk writes.\r\n\r\nWriting out on error may be more convenient, but it would also result in files sometimes appearing with little or no explanation and littering the project folders, which could confuse new users even more.\r\n\r\nI would be very interested in source maps, though I vaguely remember seeing discussion in an issue somewhere about them being too difficult to implement. @mlrawlings I really like the idea of using an environment variable, especially since the output files are only really used for production and debugging, and anyone worried about production start-up time should probably be compiling during a build step instead.\r\n\r\nAnd I'd love to see the compiler keep better track of where the code came from. That might also help with things like #247. The environment variable might have too great an effect. My personal primary use case is inspecting the generated file of only the template I'm working with. The environment variable feature would generate *all* files in the project, wouldn't it? @mindeavor I'm thinking the environment variable would probably just switch `writeToDisk` on, which is currently Marko's default behavior.\r\n\r\nIf you need to compile only a specific template, you can either execute \r\n```sh\r\n./node_modules/.bin/markoc ./path/to/template.marko\r\n```\r\nin a shell, or toggle `writeToDisk` on while loading that template for the first time:\r\n```js\r\nrequire('marko/compiler').defaultOptions.writeToDisk = true;\r\nvar template = require('./path/to/template.marko');\r\nrequire('marko/compiler').defaultOptions.writeToDisk = false;\r\n```\r\n\r\nI'm not aware of any hooks or methods in the API to write a specific template to disk, but that's probably worth considering even if the default value of `writeToDisk` doesn't change. Something like `Template.prototype.writeToDisk()`, perhaps? I might look into implementing that sometime if I get the chance. I see. Personally I think it'd be great if you could add something to the code like:\r\n\r\n```js\r\n<script>\r\nmodule.exports = {\r\n  debug: true,\r\n  onInput(attrs) {\r\n    // ...\r\n  }\r\n}\r\n</script>\r\n```\r\n\r\nwhere `debug` can be `true` or, if need be, an options object like `{ writeToDisk: true }`. I would find that to be really handy :) @patrick-steele-idem That's exactly what I was just thinking. Perhaps this would be a good first use case for the `<debug>` tag that was being discussed not too long ago, like `<debug write-to-disk=true />`? Yes, now that you mention it, a tag would be better. That way you can debug whether or not you have a `<script>` tag.  <!----------------------------------------------------------------------\n  |     IF FEATURE SUGGESTION (skip to next section for bug reports)    |\n  ---------------------------------------------------------------------->\n## Custom root path for views\n### Description\n\nSometimes, we want to use `require('marko/node-require').install(options)` to the third-part package.\n\nBut it will set the views dir to package's dir. so should need an option to set root path.\n ## example\n\nhttps://github.com/trekjs/views/blob/master/packages/marko/index.js\n\n``` js\n/**\n * Install marko\n *\n * @param {Object} options\n */\n\nfunction install (options) {\n  require('marko/node-require').install(options)\n}\n\n/**\n * Stream render view\n *\n * @param {String} view\n * @param {Object} state\n * @return {Stream}\n */\n\nfunction render (view, state) {\n  return require(view).stream(state)\n}\n\nmodule.exports = {\n\n  install,\n\n  render\n\n}\n```\n\nhttps://github.com/trekjs/examples/blob/next/template-marko/app.js\n\n``` js\nconst path = require('path')\n\nconst Engine = require('trek-engine')\n\nconst marko = require('trek-view-marko')\n\nmarko.install()\n\nconst app = new Engine()\n\napp.use(({ res }) => {\n  res.send(200, marko.render(path.join(__dirname, './index.marko'), { name: 'Trek Engine' }))\n})\n\napp.run(3000)\n```\n > Maybe something along the lines of this.\n\nNice work. Thanks.\n\n> However, I would recommend having your render function take the loaded template as a parameter:\n\nIf we have many templates (> 15 pages) that not good way.\n  ## Hot reload of .marko.xml not implemented\n### Context\n\nSupport for XML templates in _.marko.xml_ files have some (quite good) support in runtime and tools but hot reloading remains unsupported.\n### Possible Fix\n\nCurrently, the code in https://github.com/marko-js/marko/blob/master/hot-reload/index.js#L136 looks like \n\n```\nif (path.endsWith('.marko') || path.endsWith('.marko.html')) {\n            // Uncache just the modified template\n            delete require.cache[path];\n            delete require.cache[path + '.js'];\n        }\n```\n\nA fix could be \n\n```\nif (path.endsWith('.marko') || path.endsWith('.marko.html') || path.endsWith('.marko.xml')) {\n```\n This is a though problem since we are restricted to what `require()` CAN do and not what we WANT to do.\n\nPersonally, I favor composite extensions such as `.marko.html` and `.marko.xml` since they essientially still are html and xml and thus wont break my tooling (lint, syntax hl etc).\n`require()` on the other hand has no sympathy for composites and will treat `.marko.xml` as any `.xml`.\n\nSome observations:\n- a replacement api for `require('./some.marko')` isnt feasible, since `require()` is the only viable api that has the much needed implicit dependency to the module variable `__dirname` required for resolving the full path.\n- hot reloading in marko is actually more of a _hot unloading_ (https://github.com/nodejs/node/blob/ebc8c37f70a84a64851b440493f3441eb9f70fdb/lib/module.js#L436)\n\nSo, a possible solution to this is to alter the semantics of install.\n\nConsider\n\n```\ninstall({\n    extension: '.marko.xml'\n})\n```\n- Make the implementation of `require('marko/hot-reload').handleFileModified(<path>)` aware of the full extension, `.marko.xml`.\n- Alter the `require.extensions` mapping using the effective extension, in this case `.xml` (https://github.com/marko-js/marko/blob/master/node-require.js#L76)\n\nMy guess is that this is an addition rather than a breaking change since composite extensions currently has no effect (at least not the intended) on `install()`.\n\nUnfortunately, I have little time for this at the moment, mainly since I work full hours in windows environments which doesnt support symlinks used in the tests.\n\n@patrick-steele-idem , let me come back on this, perhaps I dust of my old McBookPro in the weekend...\n  I want a package, just dependent on marko and not modify it.\nIs it ok under MIT for package?\n Thanks.\nSo, It's ok under MIT.\n Cool! Thank you! \ud83c\udf7b\n  Safari is waiting the completion of the first await tag\n\nWhen i try to render async fragment (await tag)\n\n**In Chrome without client-reorder**\n1. Outer html rendered\n2. First await tags rendered\n3. Second await tag rendered\n_With client-order same except order of await tags like expected._\n\n**In Safari without client-reorder**\n1. Not render outer html until all await tags done\n2. All html rendered together\n\n**In Safari with client-reorder**\n1. Safari is waiting until first await tag done\n2. Outer html and first await tag rendered\n3. Second await tag rendered\n Hi @patrick-steele-idem my safari version is 9.1.2 (11601.7.7) on OSX El Capitan and same issue on https://github.com/llambda/koa-boiler.\n I found solution! it was happen because i run server under browser-sync proxy.\n  I'd like to start by saying awesome concept, finally a library which puts performance first.\n\nNow, I've just come from an AngularJS/Gulp development background so I'm new to the whole JavaScript bundlers concept.\n\nI'm trying to wrap my head around how the recommended file structure should look like on bigger projects. I've been downloading and testing out the samples (awesome) but I haven't been able to stitch them together. I also had a hard time understanding how client side rendering with marko works, server side wasn't too hard to figure out, coming from Handlebars it really wasn't that much different.\n\nTbh I think explaining from scratch for beginners who have just come from i.e. jQuery how marko works will draw _a lot_ more attention to it.\n\nAfter looking at the following repos I've sot of come up with the following file structure.\n\n```\n/project/src/client.js    <---    \nhttps://github.com/marko-js-samples/marko-widgets-client-rendering\n/project\n/project/build    <---    what is this directory for?\n/project/node_modules    <---    no brainer, npm modules\n/project/src    <---    dev files\n/project/src/marko.json    <---    Haven't understood this file yet\n/project/src/client.js    <---    Haven't understood why this file is here?\n/project/src/common    <---    I'm guessing this is for files that all pages or components share\n/project/src/common/browser.json    <---    lasso needs this to compile correctly (code splitting etc.)\n/project/src/common/common.css    <---    css styles when a page/component includes the \"common\" package? (overrides?)\n/project/src/common/common.js    <---    same as .css but with JS\n/project/src/componenets    <---    Holds marko-widget reuseable componenets\n/project/src/componenets/my-widget    <---    Is a marko-widget reuseable componenet\n/project/src/componenets/my-widget/index.js    <---    [What does this do and what should be in it?](http://markojs.com/docs/marko-widgets/get-started/#split-renderer-and-widget-1)\n/project/src/componenets/my-widget/renderer.js    <---    [What does this do and what should be in it?](http://markojs.com/docs/marko-widgets/get-started/#split-renderer-and-widget-1)\n/project/src/componenets/my-widget/widget.js    <---    [What does this do and what should be in it?](http://markojs.com/docs/marko-widgets/get-started/#split-renderer-and-widget-1)\n/project/src/componenets/my-widget/style.css    <---    Holds the style for the component (overrides?)\n/project/src/componenets/my-widget/template.marko    <---    Holds the html markup for the component\n/project/src/pages    <---    Holds marko template pages\n/project/src/pages/home    <---    Holds the home marko template page\n/project/src/pages/home/browser.json    <---    lasso needs this to compile correctly (code splitting etc.)\n/project/src/pages/home/client.js    <---    Whats the difference between this and index.js?\n/project/src/pages/home/index.js    <---    Whats the difference between this and client.js?\n/project/src/pages/home/style.css    <---    Holds the style for the component (overrides?)\n/project/src/pages/home/template.marko    <---    Holds the html markup for the page\n/project/src/pages/home/template.marko.js    <---    auto-generated\n/project/static    <---    This is the directory which should be served publicly (lasso bundles end up here)\n/project/.cache    <---    Used by lasso for quicker bundling?\n```\n\nI am also wondering how does one create a template which nests another template? I would like to pass data as well.\n\nAlso tags vs. widgets?\n\nI think being able to explain this structure well for newcomers will increase their chance of using marko. Personally I would like to see an example project which touches all areas so I can see how they could be fit together, right now I'm shooting in the dark!\n\nAs stated before client marko rendering (both non widget and widget) is still unclear to me. I tried bundling with webpack etc. however it wasn't until I looked at lasso I realised that lasso is actually needed. I think this should be more clear in the marko & marko-widgets documentation when talking about client side rendering.\n\nAlso thumbs up to upgrading to ES6 syntax (import/export). I want to completely stop writing CommonJS and starting writing just offical JS.\n\nI probably have more questions, will take them later! :)\n Thanks for this information. But I still have a doubt. All content that are inside `src` folder, is focussed only in the modularization of client side, right? \n @mlrawlings Brilliant example! I have another question. I've been reading and haven't found an answer to it yet. The code below you pass item.name to the tempalte. Is it possible to pass a JSON object instead?\n\n```\n<ul for(item in data.items)>\n    <include('./item.marko') name=item.name />\n</ul>\n```\n I am having too many components in on folder  /project/src/componenets .\r\nWhats the way of grouping components pages wise ?  http://markojs.com/docs/marko/koa/\n\n```\nrequire('marko/node-require').install();\n\nvar koa = require('koa');\n\nvar app = koa();\n\napp.use(function *() {\n    this.body = template.stream({\n            name: 'Frank',\n            count: 30,\n            colors: ['red', 'green', 'blue']\n        });\n});\n\napp.listen(8080);\n```\n\nHowever it states at http://markojs.com/docs/marko/javascript-api/#streamtemplatepath-templatedata--streamreadable\n\n```\nstream(templatePath, templateData) : stream.Readable\nDeprecated. Do not use.\n```\n\nSo, use stream or not? Feels like you guys should have one place for information on usage. This is confusing!\n Apologize.\n\nhttp://markojs.com/docs/marko/javascript-api/#streamtemplatedata--streamreadable\n\nWas looking at the wrong method!\n  [![Coverage Status](https://coveralls.io/builds/7528756/badge)](https://coveralls.io/builds/7528756)\n\nCoverage increased (+0.04%) to 84.316% when pulling **bd488be54823b88eaa736fd25da3fec0a9ac0a2b on issue-357** into **78a73e573e60b7d076ca51d4cc94c0b85a0150fd on master**.\n  Is it possible to see a workaround for this outside of \n\n``` js\n<script marko-init>\nvar empty = require('marko/helpers/empty');\nvar notEmpty = require('marko/helpers/notEmpty');\n</script>\n```\n\nI'm using:\n\n```\n<if(data.commits && data.commits.length)>\n  ...\n</if>\n```\n   [![Coverage Status](https://coveralls.io/builds/7345040/badge)](https://coveralls.io/builds/7345040)\n\nCoverage remained the same at 84.163% when pulling **7a53328bf02c0668ba42558a500fd2c3f868a2b9 on sdepold:patch-1** into **8017e1485d0c4f1110fe2cb089760e19fa8f0dd2 on marko-js:master**.\n  [![Coverage Status](https://coveralls.io/builds/7328873/badge)](https://coveralls.io/builds/7328873)\n\nCoverage decreased (-0.01%) to 84.163% when pulling **b1b59be5cbd62fba678b799f08f8b4adffbfefd3 on attr-empty-string** into **8382d4ce02f740c73ac6f0e9057654ace3a32719 on master**.\n  Not sure if this is a problem with released artifact or not\n Seems to only affect marko even on version 3.8.1\n\n```\nrobinanil 17:32:16 :~/work/admin/consumer$ npm uninstall marko\n- app-module-path@1.1.0 node_modules/app-module-path\n- async-writer@1.4.2 node_modules/async-writer\n- browser-refresh-client@1.1.4 node_modules/browser-refresh-client\n- char-props@0.1.5 node_modules/char-props\n- htmljs-parser@1.5.13 node_modules/htmljs-parser\n- object-assign@4.1.0 node_modules/marko/node_modules/object-assign\n- property-handlers@1.1.1 node_modules/property-handlers\n- raptor-args@1.0.3 node_modules/raptor-args\n- raptor-async@1.1.3 node_modules/raptor-async\n- lasso-caching-fs@1.0.1 node_modules/lasso-caching-fs\n- lasso-package-root@1.0.0 node_modules/lasso-package-root\n- raptor-polyfill@1.0.2 node_modules/raptor-polyfill\n- deresolve@1.1.1 node_modules/deresolve\n- raptor-regexp@1.0.1 node_modules/raptor-regexp\n- raptor-stacktraces@1.0.1 node_modules/raptor-stacktraces\n- raptor-logging@1.1.2 node_modules/raptor-logging\n- raptor-strings@1.0.2 node_modules/raptor-strings\n- raptor-json@1.1.0 node_modules/raptor-json\n- raptor-util@1.0.10 node_modules/raptor-util\n- raptor-promises@1.0.3 node_modules/raptor-promises\n- strip-json-comments@2.0.1 node_modules/strip-json-comments\n- try-require@1.2.1 node_modules/try-require\n- marko@3.8.1 node_modules/marko\nrobinanil 17:33:11 :~/work/admin/consumer$ npm install \nconsumer@1.0.0 /Users/robinanil/work/admin/consumer\n\u2514\u2500\u252c marko@3.8.1 \n  \u251c\u2500\u2500 app-module-path@1.1.0 \n  \u251c\u2500\u2500 async-writer@1.4.2 \n  \u251c\u2500\u2500 browser-refresh-client@1.1.4 \n  \u251c\u2500\u2500 char-props@0.1.5 \n  \u251c\u2500\u2500 deresolve@1.1.1 \n  \u251c\u2500\u2500 htmljs-parser@1.5.13 \n  \u251c\u2500\u252c lasso-package-root@1.0.0 \n  \u2502 \u2514\u2500\u2500 lasso-caching-fs@1.0.1 \n  \u251c\u2500\u2500 object-assign@4.1.0 \n  \u251c\u2500\u2500 property-handlers@1.1.1 \n  \u251c\u2500\u2500 raptor-args@1.0.3 \n  \u251c\u2500\u2500 raptor-async@1.1.3 \n  \u251c\u2500\u2500 raptor-json@1.1.0 \n  \u251c\u2500\u252c raptor-logging@1.1.2 \n  \u2502 \u2514\u2500\u2500 raptor-stacktraces@1.0.1 \n  \u251c\u2500\u2500 raptor-polyfill@1.0.2 \n  \u251c\u2500\u2500 raptor-promises@1.0.3 \n  \u251c\u2500\u2500 raptor-regexp@1.0.1 \n  \u251c\u2500\u2500 raptor-strings@1.0.2 \n  \u251c\u2500\u2500 raptor-util@1.0.10 \n  \u251c\u2500\u2500 strip-json-comments@2.0.1 \n  \u2514\u2500\u2500 try-require@1.2.1 \n\nrobinanil 17:33:36 :~/work/admin/consumer$ ls node_modules/marko/runtime/\ndeprecateHyphens.js helpers.js          loader.js           loader.js.orig      loader_browser.js   marko-runtime.js    package.json\nrobinanil 17:34:06 :~/work/admin/consumer$ \n```\n 3.6.1 does not have this issue\n\n```\nrobinanil 17:35:52 :~/work/admin/consumer$ npm install\nnpm WARN deprecated minimatch@0.2.14: Please update to minimatch 3.0.2 or higher to avoid a RegExp DoS issue\nconsumer@1.0.0 /Users/robinanil/work/admin/consumer\n\u2514\u2500\u252c marko@3.6.1 \n  \u2514\u2500\u252c minimatch@0.2.14 \n    \u2514\u2500\u2500 lru-cache@2.7.3 \n\nrobinanil 17:36:13 :~/work/admin/consumer$ ls node_modules/marko/runtime/\ndeprecateHyphens.js helpers.js          loader.js           loader_browser.js   marko-runtime.js    package.json\nrobinanil 17:36:19 :~/work/admin/consumer$ \n```\n  [![Coverage Status](https://coveralls.io/builds/7292035/badge)](https://coveralls.io/builds/7292035)\n\nCoverage increased (+0.02%) to 84.152% when pulling **0521933c99754fe18959f22fc77fe594f35c92d5 on issue-345** into **d433ac25aa2b428b4b46060e310c55a00183ff18 on master**.\n  [![Coverage Status](https://coveralls.io/builds/7291326/badge)](https://coveralls.io/builds/7291326)\n\nCoverage increased (+0.03%) to 84.129% when pulling **94eafb7bd6bd100bc5a722e9a8388ced1c044f87 on issue-344** into **7e76972737843b3614520242cee9a3ca2fa728c5 on master**.\n  ### Description\n\nCurrently marko-widgets allows to define a UI component's renderer as `require('marko-widgets').defineRenderer({...});`. I would like to propose a similar, but simpler:\n\n`require('marko').defineRenderer({...});`\n### Context\n\nBuilding our project, we've defined custom taglibs that export the simplest \"components\" to more complex components. For simple componets (server-rendered only, no state, little to no client behavior), our approach to custom taglibs has been to export in index.js a function that takes an `input` and then calls template.render.\n\n```\nmodule.exports = function(input, out) {\n    template.render(input, out);\n}\n```\n\nUnlike defineRenderer, this does not export a `render` function similar to defineRenderer. We could set `exports.render` or use `createRenderFunc` from `raptor-renderer`, however I would like to propose a `defineRenderer` in `marko`, with similar (but much simpler) life cycle events.\n\n```\nmodule.exports = require('marko').defineRenderer({\n    template: require('./template.marko'),\n    getTemplateData: function (input) {\n        input.time = Date.now();\n        return input;\n    }\n});\n```\n\nThe added benefit (and why this beats `exports.render` or `createRenderFunc`) is that if the simple component takes on a more, complex role, adding `-widgets` + any extra lifecycle event methods is straightforward and painless.\n\nThanks!\n \ud83d\udc4d  I always thought this API difference between marko and marko-widgets was a bit strange.\n \ud83d\udc4d  totally agree here.\n  ## Bug Report\n### Context\n\nI have a project where we embed another templating language inside of a marko template. Because of this, there are cases where we need to disable Marko's parsing for sections of HTML, so that Marko does not try to parse foreign template syntax that may throw errors. We use the marko-body=\"static-text\" attribute to disable Marko parsing. \n\nHTML snippets that causes parser error:\n\nExample 1:\n`<div marko-body=\"static-text\">\n    <div>Content Goes Here</div>\n</div>`\n\nExample 2:\n`<section marko-body=\"static-text\">\n        <div>Other Content</div>\n    <section>Content Goes Here</section>\n</section>`\n\nNote that the element type of node with marko-body attribute must match some element within it. \n### Expected Behavior\n\nThe output should be:\n\nExample 1:\n`<div>\n    <div>Content Goes Here</div>\n</div>`\n\nExample 2:\n`<section>\n        <div>Other Content</div>\n    <section>Content Goes Here</section>\n</section>`\n### Actual Behavior\n\nExample 1: Parser error - 'The closing \"div\" tag was not expected'\nExample 1: Parser error - 'The closing \"section \" tag was not expected'\n### Possible Fix\n\n<!--- Not obligatory, but suggest a fix or reason for the bug -->\n\n<details><summary>\n\nAdditional Info</summary>\n\n\n### Your Environment\n- Versions used:\n- Marko 3.8.1\n- Lasso 2.5.5\n- Lasso-Marko 2.0.7\n- Operating System and version (desktop or mobile): Ubuntu 14.04\n- Link to your project: (eBay Internal)\n### Steps to Reproduce\n\nInput either of these pieces of code on http://markojs.com/try-online/\n\n`<div marko-body=\"static-text\">\n    <div>Content Goes Here</div>\n</div>`\n\n`<section marko-body=\"static-text\">\n        <div>Other Content</div>\n    <section>Content Goes Here</section>\n</section>`\n### Stack Trace\n\nExample 1: Parser error - 'The closing \"div\" tag was not expected'\nExample 1: Parser error - 'The closing \"section \" tag was not expected'\n\n</details>\n A custom tag would be great! Another huge benefit of a custom marko-parser tag (versus attribute on a rendered tag) is that it can act a non-rendered parser directive, resulting in no additional HTML output/DOM structure change. \n\nBackground: When I used the existing version of this marko-body attribute, I wanted to be able to ignore a block of HTML (which contained non-marko compatible AngularJS syntax in it), but not result in a new non-functional node that wraps the content (which can potentially affect animation and browser compositing performance depending on the kind of operations you perform on your DOM elements). I ended up attaching the marko-body attribute to each HTML element, but had to be careful of the same element type within to prevent this gotcha. \n  [![Coverage Status](https://coveralls.io/builds/7094318/badge)](https://coveralls.io/builds/7094318)\n\nCoverage increased (+0.003%) to 84.041% when pulling **2cdc18afc52665e75a235a32932942b7147d5fd9 on exclude-dir-fix** into **f2116dc44d032bc56bb762a2e577c28fb8233004 on master**.\n [![Coverage Status](https://coveralls.io/builds/7094851/badge)](https://coveralls.io/builds/7094851)\n\nCoverage increased (+0.06%) to 84.095% when pulling **adea7ca0a06d5cc29d9fe36a9fc0eb0f5ee81ded on exclude-dir-fix** into **f2116dc44d032bc56bb762a2e577c28fb8233004 on master**.\n [![Coverage Status](https://coveralls.io/builds/7094932/badge)](https://coveralls.io/builds/7094932)\n\nCoverage increased (+0.06%) to 84.095% when pulling **5e070d61251b27d614cacf4ad9aa8c58d5e79bb7 on exclude-dir-fix** into **f2116dc44d032bc56bb762a2e577c28fb8233004 on master**.\n  [![Coverage Status](https://coveralls.io/builds/7059387/badge)](https://coveralls.io/builds/7059387)\n\nCoverage increased (+0.04%) to 84.038% when pulling **4f43e93da4b825136f83d914b712a3f5cf76331d on autodiscover-components** into **213e65241898b19f853f704d8e8bbca2a06c1465 on master**.\n  I'm fairly new to Marko and I'm having some difficulties handling errors gracefully when rendering templates (on the server). Initially I structured my app to pipe the render stream straight to the response:\n\n``` js\nconst marko = require('marko')\n\nconst template = marko.load(filename, {\n  buffer: false\n})\n\nreturn (req, res) => {\n  ...\n  return template.render(data, res)\n})\n```\n\nBut when the rendering process errors (E.G. attempting to access an undefined property) this results in an unfinished response.\n\nPreferably I'd like to catch the error, log it and fail more gracefully, even it means taking a small perf hit:\n\n``` js\n// with callback\nreturn (req, res) => {\n  ...\n  return template.render(data, (err, data) => {\n    if (err) {\n      log(err)\n      res.send(500).end()\n    } else {\n      res.send(data)\n    }\n  })\n})\n\n// or with streams\nreturn (req, res) => {\n  ...\n  return template.stream(data)\n\n  stream.on('data', data => { output.push(data) })\n\n  stream.on('error', err => { errors.push(err) })\n\n  stream.on('end', () => {\n    if (errors.length) {\n      log.apply(null, errors)\n      res.send(500).end()\n    } else {\n      res.send(output.join(''))\n    }\n  })\n\n  return stream\n})\n```\n\nHowever neither the streaming nor callback interface are currently able to catch such an error, with the effect of potentially crashing the process.\n\nAre you able to recommend a strategy whereby templates can fail more gracefully at render time?\n Thank you for your fast response @patrick-steele-idem - I actually read the article you linked to before posting my question, too \ud83d\ude01\n\nI'd also tried promises (for the implicit try/catch) but I'd made the mistake of _returning__ the result of the render method - thanks to your example I'll continue with that path.\n\nA promise based API sounds like a very good idea to me \ud83d\udc4d \n  I'm trying to pretty-print some JS that comes from CoffeeScript's `compile()` and  using a [compile-time tag](https://github.com/marko-js/marko/blob/master/docs/compile-time-tags.md) like so:\n\n`marko.json`:\n\n``` js\n{\n  \"<coffee-script>\": {\n    \"code-generator\": \"./lib/tags/coffee-script\",\n    \"body\": \"static-text\",\n    \"preserve-whitespace\": true,\n    \"@bare\": \"boolean\"\n  },\n  \"<stylus-css>\": {\n    \"code-generator\": \"./lib/tags/stylus-css\",\n    \"body\": \"static-text\",\n    \"preserve-whitespace\": true,\n    \"@compress\": \"boolean\",\n    \"@paths\": \"array\"\n  }, ...\n}\n```\n\n`coffee-script.coffee`:\n\n``` coffee\n'use strict'\n\n{compile} = require('coffee-script')\n\nmodule.exports = (el, generator) ->\n  {builder} = generator\n  bare = el.getAttributeValue('bare') or yes\n  print = (process.env.npm_lifecycle_event is 'standard')\n\n  js = compile(el.bodyText, {bare, print})\n  console.log js\n\n  return builder.htmlElement 'script', {}, [\n    builder.text builder.literal(js)\n  ]\n```\n\n`stylus-css.coffee`:\n\n``` coffee\n'use strict'\n\nstylus = require('stylus')\n\nmodule.exports = (el, generator) ->\n  {builder} = generator\n  compress = (process.env.npm_lifecycle_event is 'optimized')\n\n  css = stylus(el.bodyText)\n    .set 'compress', el.getAttributeValue('compress') or compress or no\n    .set 'paths', el.getAttributeValue('paths') or []\n    .render()\n\n  console.log css\n\n  return builder.htmlElement 'style', {}, [\n    builder.text builder.literal(css)\n  ]\n```\n\nSample console output (js):\n\n``` js\nvar clickDefault, collapseFormat, initLayer;\n\ninitLayer = function() {\n  screenad.hide('self');\n  screenad.setSize('600', '250');\n  screenad.setAlignment('banner', 'banner');\n  screenad.setOffset(-300, 0);\n  screenad.setSticky(true);\n  screenad.setZIndex(100000);\n  return screenad.position();\n};\n\ncollapseFormat = function() {\n  screenad.event('user_close');\n  return screenad.hide();\n};\n\nclickDefault = function() {\n  return screenad.click();\n};\n\nvar init_layer;\n\ninit_layer = function() {\n  screenad.hide('self');\n  screenad.setAlignment('banner', 'banner');\n  screenad.setSticky(layer.sticky);\n  screenad.setSize(layer.width, layer.height);\n  screenad.setOffset(layer.x, layer.y);\n  screenad.setZIndex(layer.z);\n  screenad.position();\n};\n```\n\nSample console output (css):\n\n``` css\nbody {\n  background-color: #000;\n}\n#closebutton {\n  background-image: url(\"close.png\");\n  bottom: 0px;\n  cursor: pointer;\n  height: 20px;\n  position: absolute;\n  right: 0px;\n  width: 90px;\n  z-index: 110000;\n}\n#closebutton:hover {\n  opacity: 0.8;\n}\n#wrap_bg {\n  background-image: url(\"backup-layer.jpg\");\n  background-repeat: no-repeat;\n  cursor: pointer;\n  height: 100%;\n  width: 100%;\n  z-index: 100010;\n}\n```\n\nSample compiled html (notice the output between `<script>` and `<style>` tags):\n\n``` html\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    [...]\n    <script>\n      var init_banner; init_banner = function() { screenad.setAlignment('banner', 'banner'); screenad.setSticky(banner.sticky); screenad.setSize(banner.width, banner.height); screenad.setOffset(banner.x, banner.y); screenad.setZIndex(banner.z); screenad.position(); };\n    </script>\n    <style>\n      body { font-family: \"Trebuchet MS\"; text-align: center; } #content { height: 100%; width: 100%; } #container { background-color: #fff; z-index: 1000; } #clicktoexpand { background-color: #fff; background-image: url(\"clicktoexpand.png\"); background-repeat: no-repeat; bottom: 0px; cursor: pointer; height: 23px; left: 0px; position: absolute; width: 170px; z-index: 10000; } #clicktoexpand:hover { opacity: 0.8; }\n    </style>\n    <script>\n      var _autoExpand, _click, _expandType, clickDefault, ignite, init, showLayer, start; _click = 'click'; _expandType = _click; _autoExpand = false; ignite = false; init = function() { screenad.event(screenad.deviceType); if (!ignite) { screenad.onSync = start; ignite = true; } }; start = function() { if (_expandType === _click) { document.getElementById('container').addEventListener(_click, clickDefault); } if (_autoExpand && ignite) { showLayer(); } screenad.setSize('300', '250'); screenad.setAlignment('banner', 'banner'); screenad.setOffset(0, 0); screenad.setSticky(true); screenad.setZIndex(100); screenad.position(); }; showLayer = function() { screenad.event('expand'); screenad.show('all'); }; clickDefault = function() { screenad.click(); };\n    </script>\n    [...]\n  </head>  \n  <body onload=\"init_banner()\">\n    <script>\n      window.banner = {\"width\":320,\"height\":240,\"sticky\":true,\"x\":0,\"y\":0,\"z\":1,\"libraries\":[\"//media.adrcdn.com/scripts/external/velocityjs/1.2.3/velocity.min.js\",\"//media.adrcdn.com/scripts/external/velocityjs/1.2.3/velocity.ui.min.js\"]};\n    </script>\n    [...]\n  </body>\n</html>\n```\n\nExpected output:\nI would like the js whitespace to be preserved whenever `process.env.npm_lifecycle_event === \"standard\"` (i.e. when `npm run standard` is run) and minified whenever the same env var is set to `optimized`. Is there a way to accomplish this?\n @mlrawlings perfect! I should've looked at `builder.text` instead of `builder.literal` first\u2026 Thanks!\n  HTH\n  HTH\n  Marko is not showing any error related to unexpected characters / invalid JSON config.\n\nInvalid json config - browser.json :\n\n`[\n {\n            \"type\": \"js\",\n            \"url\": \"https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js\"\n        },\n]`\n\nError shown after some time : \n\n`Error: Async fragment failed (lasso-slot:head). Exception: Error: Async fragment (lasso-slot:head) timed out after 30000ms`\n\nI believe a parsing error can be thrown right away if browser.json or any other config file is invalid and marko is unable to parse such file.\n  [![Coverage Status](https://coveralls.io/builds/7034622/badge)](https://coveralls.io/builds/7034622)\n\nCoverage remained the same at 83.998% when pulling **fd9e5413ab812d38072ffbe3f763e3cf2321a91e on contributing** into **207102bccab3566ebc8cab1212744e0340cb71c2 on master**.\n  It seems like there are a lot of other pieces where we have convention with the additional option of providing your own. E.g. `renderer.js` will be found automatically, but you can specify your own renderer naming if desired. Might be more consistent to apply that to custom tag discovery as well, so that we look for `components/` by default, but allow customization if needed. This would mean that the name `components/` can't be used for anything else though.\n\nPractically speaking, my `components/` folder is not usually completely flat, so my nested components would need the discovery path in marko.json anyway.\n @mlrawlings I see, although in my case I don't normally need an entire new `components` folder for my sub components, so it would be like\n\n```\n/\n \u2937 src/\n    \u2937 components/\n        \u2937 some-component/\n               \u2937 some-subcomponent/\n               \u2937 another-subcomponent/\n           \u2937 index.js\n           \u2937 template.marko\n```\n\nSo if this change was made it would mean that my small projects wouldn't need a `marko.json` file, while my larger projects would have one string removed from the config lookup array.\n  The `alt` attribute has a few scenarios where it should be an empty string, particularly when used on decorative images: https://developers.whatwg.org/embedded-content-1.html#a-purely-decorative-image-that-doesn%27t-add-any-information\n\nIn marko v3, rendering `<img alt=\"\">` will become `<img alt>`. Haven't checked the exact output in v2, but I believe the issue is there too. Is there a workaround to get empty strings to show up? I imagine there might be similar cases out there for other attributes, but maintaining a list of exceptions would be unfortunate.\n There are probably cases where people rely on empty string not rendering the attribute, as in `<div class=${data.someClass}>` when `data.someClass` is an empty string. Technically it wouldn't break anything to have it output as `<div class=\"\">`, but that's probably worse off than before. Maybe it's worth it to maintain the exceptions?\n @mlrawlings This came up in a PR recently where using an a single space alt was the best solution we could come up with, but stood out as a clear hack. Apparently alt is \"required no matter what\" (probably due to screen reader behavior?) which then leads to weird cases where the official suggestion is to have `alt=\"\"`.\n\nI haven't tried any exhaustive testing to clarify the differences between `alt` and `alt=\"\"`, but since the latter seems to be recommended, I imagine they're treated differently by screen readers.\n But it's an officially sanctioned hack! \ud83d\ude06 \n I'm not sure, in that case I think I'd personally prefer leaving it as-is. Empty string is a nice shortcut to avoid rendering an attribute, and it's only wrong in this one case.\n  ## Summary\n\nAdding type annotations to JavaScript in order to get compile-time guarantees has become popular with tools like [TypeScript](https://www.typescriptlang.org) and [Flow](https://flowtype.org/). Would it be feasible to get the same benefits in Marko template files?\n## Rationale\n\nView engines that are \"just JavaScript\" like React can easily be type-checked (both TypeScript and Flow actually have out-of-the box support for React).\n\nWhen working with templates though, you loose the benefit of type-checking as soon as you cross the boundary into the template file. In a type-checked project, this can make refactoring trickier, for example you rename a property but forget to update the template.\n\nOn the other hand, templates have the advantage of compile-time optimizations (ex: [ server-side rendering performance](http://markojs.com/blog/announcing-marko-v3/#compile-time-optimizations)). Being able to have type-checked templates could be a big win. I don't think this has been done yet in the JavaScript community.\n\nNote: My knowledge of compiling templates or type-checking is close to none, so I don't even know if this is feasible :) This issue is intended to start a discussion.\n## What it could look like\n\n(I'm using TypeScript in my examples but this could very well be translated to Flow.)\n\nSay I have declared these types:\n\n``` typescript\n// types.ts\n\nexport interface Cat {\n  name: string;\n  meow: string;\n}\n\nexport interface Dog {\n  name: string;\n  woof: string;\n}\n```\n\nA TypeScript file would immediately tell me if I'm accessing wrong properties:\n\n``` typescript\n// test.ts\n\nimport { Cat, Dog } from \"./types\";\n\nfunction run(cat: Cat, dog: Dog) {\n  // Error: Property 'woof' does not exist on type 'Cat'.\n  console.log(cat.name, cat.woof);\n  // Error: Property 'meow' does not exist on type 'Dog'.\n  console.log(dog.name, dog.meow);\n}\n```\n\nBut a Marko template wouldn't:\n\n``` html\n<!-- templates/animals.marko -->\n\n<div>\n  <h3>${data.cat.name}</h3>\n  <p>${data.cat.woof}</p> <!-- cat.woof is undefined -->\n  <h3>${data.dog.name}</h3>\n  <p>${data.dog.meow}</p> <!-- dog.meow is undefined -->\n</div>\n```\n\nWhat if I could declare the type of the data my template expects?\n\n``` html\n<!-- templates/animals.marko -->\n\n<script marko-import>\n  import { Cat, Dog } from \"../types\";\n\n  interface TemplateData {\n    cat: Cat;\n    dog: Dog;\n  }\n</script>\n\n<div>\n  <h3>${data.cat.name}</h3>\n  <p>${data.cat.woof}</p>\n  <h3>${data.dog.name}</h3>\n  <p>${data.dog.meow}</p>\n</div>\n```\n\nAnd tell Marko to generate type-annotated files?\n\n``` bash\n$ markoc templates --types=typescript\n```\n\nThe TypeScript compiler would then catch the errors on the generated JavaScript:\n\n``` typescript\n// templates/animals.marko.ts\n\nimport marko from \"marko\";\n\nimport { Cat, Dog } from \"../types\";\n\ninterface TemplateData {\n  cat: Cat;\n  dog: Dog;\n};\n\nfunction create(__helpers) {\n  var str = __helpers.s,\n      empty = __helpers.e,\n      notEmpty = __helpers.ne,\n      escapeXml = __helpers.x;\n\n  return function render(data: TemplateData, out) {\n    out.w(\"<div><h3>\" +\n      escapeXml(data.cat.name) +\n      \"</h3><p>\" +\n      // Error: Property 'woof' does not exist on type 'Cat'.\n      escapeXml(data.cat.woof) +\n      \"</p><h3>\" +\n      escapeXml(data.dog.name) +\n      \"</h3><p>\" +\n      // Error: Property 'meow' does not exist on type 'Dog'.\n      escapeXml(data.dog.meow) +\n      \"</p></div>\");\n  };\n}\n\nlet template: MarkoTemplate;\ntemplate = marko.c(__filename)).c(create);\n\nexport default template;\n```\n\nAnd as I use the template in my type-checked project I would get auto-completion and type errors:\n\n``` typescript\n// render.ts\n\nimport template from \"./templates/animals.marko\";\nimport { Cat, Dog } from \"./types\";\n\nlet cat: Cat;\ncat = {\n  name: \"Felix\",\n  meow: \"Meow!\"\n};\n\nlet dog: Dog;\ndog = {\n  name: \"Rex\",\n  woof: \"Woof!\"\n};\n\n// Error: Argument of type '{ cat: Dog; dog: Cat; }' is not assignable to parameter of type 'TemplateData'.\n//  Types of property 'cat' are incompatible.\n//    Type 'Dog' is not assignable to type 'Cat'.\n//      Property 'meow' is missing in type 'Dog'.\nvar html = template.renderSync({\n  cat: dog,\n  dog: cat\n});\nconsole.log(html);\n```\n## Open questions\n- Source-maps & errors: If a runtime error occurs in the generated JS, can we show the line in the `.marko` file that caused it?\n- Editor integration: A nice feature of TypeScript is the auto-completion and real-time type-checking. Would it be feasible to have that directly in the the `.marko` file?\n## Relevant links\n- https://github.com/Microsoft/TypeScript/issues/5151\n- Original discussion: https://twitter.com/MarkoDevTeam/status/748638615937245185\n @patrick-steele-idem @mlrawlings I haven't gotten a change to explore this much, but I saw that Marko v4 is just around the corner (congratz btw! \ud83d\ude04). I definitely don't expect this to make it to v4, but I did want to see if there were any changes in v4 that would make it hard to add TypeScript support in the future (should we want to of course), without any breaking changes.\r\n\r\nI've quickly put this together: https://github.com/nicolashery/explore-marko-typescript\r\n\r\nYou can take a look at how I had to change the original Marko output ([src/components/search-results-item.marko.js](https://github.com/nicolashery/explore-marko-typescript/blob/master/src/components/search-results-item.marko.js)) to make it useful with TypeScript ([src/components/search-results-item.marko.ts](https://github.com/nicolashery/explore-marko-typescript/blob/master/src/components/search-results-item.marko.ts)).\r\n\r\nThere are a couple things in there, but the main one that caught my attention is probably Marko's `class` tag. It is rather prescriptive and also the JS seems to get parsed, so I can't use TypeScript syntax (like I can in Marko's `static` tag). I also can't use an ES6 class (which reminds me of React switching from `React.createClass()` to standard ES6 class).\r\n\r\nOff the top of my mind, one option could be for the `class` tag to be an actually ES6 class. Or it could be a `component` tag instead, that works more like the `static` tag (i.e. allows any text assumed to be valid JavaScript, and that JS should evaluate to a valid Marko component). Thoughts?\r\n\r\nOf course I don't want to distract, I know you guys are focused on shipping v4 and that's the most important. But I thought it could be worth thinking about this now, even if just a little bit. Thanks @mindeavor, I hadn't seen that. From skimming through it, I think this will help with the question of editor integration (ex: [VSCode Angular Language Service](https://github.com/angular/vscode-ng-language-service)). I looks like it's been open for a while though.\r\n\r\nWhat I had in mind as a first step is more along the lines of [Angular's Ahead of Time (AOT) compilation](https://angular.io/docs/ts/latest/cookbook/aot-compiler.html), which outputs TypeScript code that can be used when type-checking the whole app (business logic code + templates):\r\n\r\n```\r\n$ markoc src/ --typescript\r\nCompiling:\r\n  Input:  src/components/search-results-item.marko\r\n  Output: src/components/search-results-item.marko.ts\r\n\r\nCompiled 1 templates(s)\r\n\r\n$ tsc\r\nsrc/components/search-results-item.marko.ts(98,26): error TS2339: Property 'pric' does not exist on type 'SearchResultsItem'.\r\n``` I haven't looked closely, but looks like the plugin support released in [TypeScript 2.3](https://blogs.msdn.microsoft.com/typescript/2017/04/27/announcing-typescript-2-3/) may be of help for type-checking `.marko` files, and more generally providing editor tooling for Marko (autocompletion, etc.). Here is an example [plugin for the Vue.js framework](https://github.com/octref/vetur/).  [![Coverage Status](https://coveralls.io/builds/6826187/badge)](https://coveralls.io/builds/6826187)\n\nCoverage remained the same at 83.885% when pulling **32c820fe8f194975b69648b0adec732740cb7f53 on patrick-steele-idem:markoc-tests** into **4e9a6b108c5f4b633dcd2590df8dc7ef447f9fcc on marko-js:master**.\n  Hello,\n\nwhile trying out Marko I tested how it's autoescaping works in different contexts.\n\nThe contexts I tested it in:\n- inside html tag\n- inside html attribute\n- inside html script tag\n\nIn first two Marko correctly detected context and chose proper escaping functions (I saw escapeXml and escapeXmlAttr in compiled templates), but in the last one I was able to do XSS.\n\nYou can replicate it on http://markojs.com/try-online/\n\nmarko template\n\n``` html\n<p onclick='alert(\"${ data }\")'>${ data }</p>\n<script>var x = \"${ data }\"</script>\n```\n\ndata\n\n``` js\n\"\\\"; alert('xss');\\\"\"\n```\n\nHTML output\n\n```\n<p onclick=\"alert(&quot;&quot;; alert(&#39;xss&#39;);&quot;&quot;)\">\"; alert('xss');\"</p>\n<script>\n    var x = \"\"; alert('xss');\"\"\n</script>\n```\n @patrick-steele-idem thanks for the detailed reply,\n\nIs it really inherently unsafe to put user data in script tag? Even if you escape all characters like `>` into unicode? This seems to be what some template engines are doing.\n\nSome provide escapejs filter - https://docs.djangoproject.com/en/1.9/ref/templates/builtins/#escapejs\nSome even do this automatically by detecting context where variable is used https://latte.nette.org/en/#toc-context-aware-escaping\n\nBut you seem to be much more knowledgeable about this topic than me, so I am not sure if these filters catch 100% of XSS attackers inputs\n @patrick-steele-idem With this fix in place, is there still any reason to avoid putting data in inline scripts? The strategy of using empty dom elements with data-attributes always seemed strange to me.\n  -use retina image for logo\n-center logo with html\n-move \"Try Marko Online\" to first paragraph\n-move badges below first paragraph\n\nThe only way to reliably test this was by putting it on my fork master, so you can see here https://github.com/yomed/marko. Spacing is a bit worse on mobile, but there's only so much customization you can do before github takes over. Let me know of any concerns.\n\nDesktop:\n<img width=\"1044\" alt=\"screen shot 2016-06-28 at 7 25 02 pm\" src=\"https://cloud.githubusercontent.com/assets/3595986/16438603/1b3e4486-3d66-11e6-986c-dbac05f89c0d.png\">\n\nMobile (iPhone 6 size):\n<img width=\"403\" alt=\"screen shot 2016-06-28 at 7 26 11 pm\" src=\"https://cloud.githubusercontent.com/assets/3595986/16438612/363d35e4-3d66-11e6-8fa2-be0c4b3be95f.png\">\n [![Coverage Status](https://coveralls.io/builds/6793825/badge)](https://coveralls.io/builds/6793825)\n\nCoverage remained the same at 83.872% when pulling **c15c11329325566fe61fa8184dafd1b0aba245a7 on yomed:master** into **f6feffcef06e6a55dbaa208d006304febf957977 on marko-js:master**.\n  \u2026 configuration variable. If files are hot reloaded, we should never assume that they are up to date.\n\nFixes issue #319\n [![Coverage Status](https://coveralls.io/builds/6770368/badge)](https://coveralls.io/builds/6770368)\n\nCoverage remained the same at 83.872% when pulling **c76ffa2382e9544f57fbb3445d76ba04efa1faec on ianvonholt:ISSUE_319** into **fd318a8621ae7418a4b805f24c9f4ec01403c8ce on marko-js:master**.\n  When using includes or layouts while setting writeToDisk to false, Marko still writes the JS rendered files for these.\n\nIs this a bug? Or is there a way to disable this as well?\n Hi @patrick-steele-idem ,\n\nI just tested the compilation process again. I'm running Marko 3.7.1 only (no other versions or duplicates are installed). For some reason the includes still write a separate JS file.\n\nFor what it's worth, I'm using Brunch in combination with https://github.com/thomastorfs/static-marko-brunch\n\nAny ideas?\n I have having a problem with this bug as well.\n Hey Patrick, I'm also seeing this now where layout-use(template) is generating a file system compile of the template, while all other templates are not written to disk. Let me see if I can put a simpler demo together for you. \n Ok, here's the simplest project I could make that shows the issue. When you first run this, it will create a layout.marko.js, but not a template.marko.js. It shouldn't create either, the compiler option is set to \n\n``` javascript\n{ \n   compilerOptions: { \n         writeToDisk: false\n   } \n}\n```\n\nhttps://github.com/jasonmacdonald/layout_generates_file\n @patrick-steele-idem I've managed to trace it back to requireResolve method in CompileContext but can't seem to understand where to go from there. It seems memberExpression() constructs a call combining require and resolve, but I can't really see what it's doing that would bypass the 'marko/node-require' which should see the flag for writeToDisk.\n Ok, further digging it seems layout.html in my example gets loaded by a helper, which uses loader/index files loadFile() method which does not get passed the options we passed in through require('marko/node-require').install({config...});. It only sees options that were set using the markoCompiler.defaultOptions.\n\nLooking in the helper, the only thing the helper passes to load is the path, no options. \n\nI confirmed that switching to setting global.__MARKO_CONFIG does stop layout.html from being written to disk.\n\nSo it seems the bug is only when you set compilerOptions via the config on node-require.\n\nMy suggestion would be to have the install(config) on node-require actually set the global.__MARKO_CONFIG so it acts as expected in all loading scenarios. Just my $0.02.\n @patrick-steele-idem I figured as much, it was more just to test if that would work. :)\n  [![Coverage Status](https://coveralls.io/builds/6730864/badge)](https://coveralls.io/builds/6730864)\n\nCoverage increased (+0.06%) to 83.527% when pulling **7b1bbf3ed817964a8952d2a7d236c0f52e317097 on issue-314** into **74120dbbbea4a92be055f63d10b54804134c613e on master**.\n [![Coverage Status](https://coveralls.io/builds/6730864/badge)](https://coveralls.io/builds/6730864)\n\nCoverage increased (+0.06%) to 83.527% when pulling **7b1bbf3ed817964a8952d2a7d236c0f52e317097 on issue-314** into **74120dbbbea4a92be055f63d10b54804134c613e on master**.\n  Good idea! I need it.\n If there's enough interest, it would be fairly simple for `<await>` to also accept streams - though as Michael pointed out, it would need to buffer the stream until it was finished, so I'm not sure how useful that would be.\r\n\r\nAlternatively, most streams can simply be converted to Promises with something like\r\n```js\r\nnew Promise(function(resolve, reject) {\r\n    var buffer = [];\r\n    stream.on('error', reject);\r\n    stream.on('data', function(data) {\r\n        buffer.push(data);\r\n    });\r\n    stream.on('end', function() {\r\n        var result = Buffer.concat(buffer).toString();\r\n        resolve(result);\r\n    });\r\n});\r\n```\r\n\r\nHopefully this weekend I'll get the chance to play with the `<on>` tag a bit, looks awesome! @patrick-steele-idem If `<await>` was to handle multiple-flush streams / event emitters (which I don't believe it should), I would prefer something similar to \"deferred.progress()\"; perhaps a separate await-specific nested tag, like `<await-on-data>`.\r\n\r\nThough here's another thought that just popped to mind: What about something like that for the `<on>` tag? For example...\r\n```\r\n<ul on(streamOrEventEmitter)>\r\n    <li on-data(result)><!-- maps to \".on('data', ...)\" -->\r\n        ${result}\r\n    </li>\r\n</ul>\r\n```\r\n...as an alternate syntax to allow binding to events other than just 'data'? On second thought, something like this might be better instead:\r\n```\r\n<ul>\r\n    <li on(var1, var2 from 'eventName' of emitter)>\r\n        ${var1 + ', ' + var2}\r\n    </li>\r\n</ul>\r\n```\r\n('from' and 'of' are just what came off the top of my head, it may need re-wording) (Just noticed the original post had an example of using a generic EventEmitter which accomplishes basically the same thing as my previous post, not sure how I missed that a few days ago.)\r\n\r\nHmm... Rather than starting with standard streams and adding different syntaxes to support non-standard use cases, what if we looked at this the other way around? We could start by exposing the generic behavior:\r\n```\r\n<ul>\r\n    <li on(user from 'data' in data.usersStream) repeat=true>\r\n        ${user.name}\r\n    </li>\r\n    <li on('end' in data.usersStream)>\r\n        <button>load more</button>\r\n    </li>\r\n</ul>\r\n```\r\nThen add convenience syntaxes for the most common uses:\r\n```\r\n<ul>\r\n    <li on(user from data.usersStream)>\r\n        ${user.name}\r\n        <on-finish>\r\n            <li><button>load more</button></li>\r\n        </on-finish>\r\n    </li>\r\n</ul>\r\n```\r\nNote that `<on(user from data.usersStream)>` and `<on-finish>` are just syntactic sugar for `<on(user from 'data' in data.usersStream) repeat=true>` and `<on('end' in data.usersStream)>`, respectively. @patrick-steele-idem - this sounds good to me. Looks lot cleaner! @patrick-steele-idem @mlrawlings - will <awaits> accept event emitter going forward. right now, its not supporting event emitter. i think its essential to support that with respect to streaming I can't think of any reason not to. Just one question: If the object has both `.on()` and `.then()` methods, should it be treated as an emitter or a thenable? (I'm leaning toward emitter, but that *might* be considered a breaking change...)\r\n\r\nAlso, a few more ideas:\r\n* `<await(data.userStream until 'finished' or 'cancelled')>`\r\n* `<on(user)>` (defaults to 'data' event)\r\n* `<once(...)>` @mlrawlings @austinkelleher @patrick-steele-idem \r\n\r\nany tips and tricks for applying infinite scrolling with marko?  [![Coverage Status](https://coveralls.io/builds/6656558/badge)](https://coveralls.io/builds/6656558)\n\nCoverage increased (+0.3%) to 83.728% when pulling **b3c3c564a46534b6972c3af0eae44d9b12b5d9ca on mlrawlings:await-tag** into **74120dbbbea4a92be055f63d10b54804134c613e on marko-js:master**.\n When I read `await theUserDataProvider as user`, I thought I am creating an alias `user` for `theUserDataProvider`, where as `await user from theUserDataProvider` seem to make the intent clear.\n [![Coverage Status](https://coveralls.io/builds/6679660/badge)](https://coveralls.io/builds/6679660)\n\nCoverage increased (+0.3%) to 83.728% when pulling **ef294526d15e6e48ad20b46098584da4a533752f on mlrawlings:await-tag** into **74120dbbbea4a92be055f63d10b54804134c613e on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/6679660/badge)](https://coveralls.io/builds/6679660)\n\nCoverage increased (+0.3%) to 83.728% when pulling **ef294526d15e6e48ad20b46098584da4a533752f on mlrawlings:await-tag** into **74120dbbbea4a92be055f63d10b54804134c613e on marko-js:master**.\n [![Coverage Status](https://coveralls.io/builds/6679660/badge)](https://coveralls.io/builds/6679660)\n\nCoverage increased (+0.3%) to 83.728% when pulling **ef294526d15e6e48ad20b46098584da4a533752f on mlrawlings:await-tag** into **74120dbbbea4a92be055f63d10b54804134c613e on marko-js:master**.\n  So I used a progressive rendering demo and changed `addEventListener` to `w-onClick`. Now header widget reacts on clicks only after rendering is finished. Problem appeared after upgrading Marko 2 to 3.\n\nDemo here: https://marko-progressive-bug.herokuapp.com\n\nForked repo to show a bug: https://github.com/darkwebdev/marko-progressive-rendering\n\nCommit with changes: https://github.com/darkwebdev/marko-progressive-rendering/commit/afe5c03567b77b641d54404ee2eac7243b417661\n  Documented exclusion of folder or node module from marko.json autodiscovery;\n Just an excuse in advance:\nI'm rookie in open-source contribution and my english is not a native language. So any blame is accepted. :-)\n [![Coverage Status](https://coveralls.io/builds/6590782/badge)](https://coveralls.io/builds/6590782)\n\nCoverage remained the same at 83.464% when pulling **748c5d7643cfdc9b114823a4e23077d35e0af7fd on oxala:feature/exclude** into **117be25411bd4ee595c5f8d6c03d2947a8eef4bc on marko-js:master**.\n  Hey Patrick,\n\nI will bother you again with specific folder/package exclusion from the automatic marko.json search.\nSince we finally moved to marko3, i've reimplemented that functionality here as well.\n\nBelow you will find:\n- Actual functionality implementation;\n- Updated tests to cover the implementation;\n [![Coverage Status](https://coveralls.io/builds/6587535/badge)](https://coveralls.io/builds/6587535)\n\nCoverage increased (+0.02%) to 83.445% when pulling **f8c8b5f3319b5e5b8d32aeaf7baa4b831442f07d on oxala:feature/exclude** into **9f240e7bea17116a05a9e961c14d52dab735d292 on marko-js:master**.\n No worries, thank you for accepting. Sure, i'll update the docs: https://github.com/marko-js/marko/pull/310\n  [![Coverage Status](https://coveralls.io/builds/6581856/badge)](https://coveralls.io/builds/6581856)\n\nCoverage remained the same at 83.42% when pulling **01f8a24dc04867d3d2a51907a7c4b2fb1ab08657 on mlrawlings:shorthand-classes** into **a60d0078b97c42f6c0ee85894428f808cddefa9e on marko-js:master**.\n  Given:\n\n``` html\n<input type=\"text\"\n           name=\"username\"\n           placeholder=\"username\"\n           spellcheck=\"false\"\n           autocomplete=\"off\"\n           autocorrect=\"off\"\n           pattern=\"[\\w0-9]+\">\n```\n\nMarko will fail with an error:\n\n> Error(s) in template:\n> 1) [templates/views/askForUsername.marko:16:20] Invalid string (\"[\\w0-9]+\"): SyntaxError: Unexpected token w\n\nThis is \"fixable\" by `pattern=\"[\\\\w0-9]+`, but that doesn't follow the HTML spec -- https://html.spec.whatwg.org/multipage/forms.html#attr-input-pattern . In other words, the value should be a regular expression that can be directly substituted into a JavaScript regular expression literal, e.g. `/[\\w0-9]+/`.\n I understand the underlying issue. But my opinion is that when writing HTML within the template we shouldn't have to remember \"no, this isn't really HTML, it's an escaped JavaScript string.\"\n\nI think a solution to this, and probably other cases, would be to have a `<raw></raw>` Marko directive.\n I suppose if extra syntax is added, what about something closer to what is already present for skipping HTML escaping?\n\n``` html\n<input#foo class=${a: true, b: false} pattern=!\"[\\w0-9]\">\n```\n\nIt has the bonus of being _almost_ like a CSS attribute selector.\n My point is \"who knows?\" Anyone can stick pretty much anything they want in a `data` attribute. And future spec graced attributes could have anything as well.\n\nMy use case is a simple fix on my end (other than remembering when I come back to the project in 6 months why there is an extra `\\`). I just think that it would be wise to provide a template language specific method for dealing with such scenarios so that someone who knows the language can read the intention.\n  [![Coverage Status](https://coveralls.io/builds/6522068/badge)](https://coveralls.io/builds/6522068)\n\nCoverage increased (+0.003%) to 83.434% when pulling **5c7eb271dc376e2393752110014e1ae243abcdea on mlrawlings:asyncfragment-info** into **06f6e37fdc0ed18d1684b779a01c06f87026ed9c on marko-js:master**.\n  I was running karma + PhantomJS on some Marko Widgets with async-fragments, I got the following error:\n\n```\nRunning \"karma:test\" (karma) task\n     Saving optimization output to: ./.test/static\nSTART:\nPhantomJS 2.1.1 (Mac OS X 0.0.0) ERROR\n  SyntaxError: Unexpected token '>'\n  at /Users/isuhardi/works/feproject/.test/static/index/marko$3.4.4/taglibs/async/async-fragment-tag-transformer.js:28\n```\n\nThis is due to arrow syntax at async-fragment-tag-transformer, which PhantomJS cannot run due to lack of ES6 support.\n  Nice PR @mlrawlings! Did you consider using `--include-all-sources` in the istanbul command for  coverage against the whole codebase?\n  Ideally, all our errors in generating code would be developer friendly and added through `context.addError`, however, not every case is covered currently.  \n\nThis pull request catches errors from code generators, adds context about the node (including line number in the template when available), and rethrows the error while maintaining the original stack trace.\n\nIn the ideal case it looks something like this:\n\n```\nError: Something Happened! -- Generating code for <custom-tag> tag (test/autotests/render/error-thrown-in-generator/template.marko:2:4)\n```\n\nEven in cases where we don't have the line number, you at least have a better idea of what might be causing the error.  The following is what the error @seangates encountered earlier would have looked like:\n\n```\nError: \nUnexpected token ): (+)\n                      ^ -- Generating code for <assign> tag\n```\n\n_Note: I'm actually not quite sure why the node doesn't have the line number attached in this case - I may look into this at a later point in time._\n\nFor non-html nodes, the type of node is listed (and will list line number if available):\n\n```\nError: some error message -- Generating code for ForEach node\n```\n @mlrawlings Wonderful! Thanks!\n  I'm probably doing something really stupid but with the following code I can't get Marko to recompile the template when I make a change directly to the template file. Can anyone tell me what mistake I'm making?\n\n```\n'use strict';\nprocess.env.MARKO_CLEAN = true;\nrequire('marko/node-require').install();\n\nrequire('marko/compiler').defaultOptions.checkUpToDate = true;\nrequire('marko/compiler').defaultOptions.writeToDisk = true;\nrequire('marko/compiler').defaultOptions.preserveWhitespace = true;\nrequire('marko/compiler').defaultOptions.assumeUpToDate = false;\n\nconst Hapi = require('hapi');\nconst server = new Hapi.Server();\n\nserver.connection({ port: 4000 });\n\nserver.start((err) => {\n    if (err) {\n        throw err;\n    }\n    console.log('Server running at:', server.info.uri);\n});\n\nserver.route({\n    method: 'GET',\n    path: '/',\n    handler: function (request, reply) {\n        var template = require('./template.marko');\n\n        console.log('Render Template');\n        template.render({ name: 'Frank', count: 30 }, function(err, output) {\n                if (err) {\n                    console.error('Rendering failed');\n                    return;\n                }\n\n                return reply(output);\n            }\n        );\n    }\n});\n```\n @patrick-steele-idem perfect! Thanks a ton, I knew I had to be missing something. I'm not sure how I missed the hot-reload options.\n   @patrick-steele-idem @mlrawlings - Pls review, if this change makes sense.\n    I'm adding some more detail to this, mostly so I don't forget: The issue is seen in v2, not sure if it is also an issue in v3.\n\nThe template that calls `<include template=\"./deferred.marko\" template-data=\"data\" />` is being rendered **client side**.  The widget **is** registered, but for the first render it does not call any of the [rendering methods](http://markojs.com/docs/marko-widgets/component-lifecycle/#rendering-methods), nor is the state properly set.  We can access the widget through `element.__widget`, and calling `setStateDirty()` does cause a re-render in which the rendering methods **are** called, but then the widget (which gets its contents from state) is empty because the state is not set from the first render.\n    Hi,\nI am using Marko v3 and facing the following issue.\n\nAn error occurred while trying to compile template at path \"D:\\Projects\\Test\\Test\\views\\admin\\Dashboard.marko\". Error(s) in template: 1) [views\\admin\\Dashboard.marko:1:25] Invalid string (\"./browser.json\"/>): SyntaxError: Unexpected token / in JSON at position 16 \n\n```\nError: An error occurred while trying to compile template at path \"D:\\Projects\\Test\\Test\\views\\admin\\Dashboard.marko\". Error(s) in template:\n1) [views\\admin\\Dashboard.marko:1:25] Invalid string (\"./browser.json\"/>): SyntaxError: Unexpected token / in JSON at position 16\n\n    at Compiler.compile (D:\\Projects\\Test\\Test\\node_modules\\marko\\compiler\\Compiler.js:124:25)\n    at Object.compileFile (D:\\Projects\\Test\\Test\\node_modules\\marko\\compiler\\index.js:91:25)\n    at loadFile (D:\\Projects\\Test\\Test\\node_modules\\marko\\runtime\\loader.js:116:34)\n    at load (D:\\Projects\\Test\\Test\\node_modules\\marko\\runtime\\loader.js:157:16)\n    at Object.load (D:\\Projects\\Test\\Test\\node_modules\\marko\\runtime\\marko-runtime.js:296:33)\n    at exports.DashboardPage (D:\\Projects\\Test\\Test\\controllers\\admin\\Dashboard.js:2:26)\n    at Layer.handle [as handle_request] (D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\layer.js:82:5)\n    at next (D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\route.js:100:13)\n    at Route.dispatch (D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\route.js:81:3)\n    at Layer.handle [as handle_request] (D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\layer.js:82:5)\n```\n\nMy template is as below\n\n``` xml\n<lasso-page package-path=\"./browser.json\"/>\n<!DOCTYPE html>\n<html ng-app=\"MyPortal\" lang=\"en\">\n  <head>\n    <title>${data.title}</title>\n    <meta charset=\"UTF-8\" />\n    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'/>      \n    <link href=\"${data.CDNUrl}/stylesheets/style.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <lasso-head/>\n  </head>\n  <body >\n    <div style=\"border:1px solid;border-color:#595959;width:100%;height:100%;\">\n      <table style=\"width:100%;height:100%;border:0px solid;border-collapse:collapse\">\n        <tr>\n          <td style=\"height:120px;margin:0;padding:0px\">\n            <table style=\"width:100%;border:0px solid;border-collapse:collapse\">\n              <tr style=\"height:80px;background-color:#e9eaed\">\n                <td>\n                  <a href=\"/\">\n                    <img src=\"${data.CDNUrl}/images/Logo.png\" alt=\"\" />\n                  </a>\n                </td>\n              </tr>\n              <tr style=\"height:40px;background-color:#333\">\n                <td>\n                  <a class=\"link\" href=\"/Admin/Dashboard\">Dashboard</a>\n                </td>\n              </tr>\n            </table>\n          </td>\n        </tr>\n        <tr>\n          <td style=\"background-color:white;margin:0;padding:0px\">\n\n          </td>\n        </tr>\n        <tr>\n          <td style=\"height:50px;margin:0;padding:0px\">\n\n          </td>\n        </tr>\n      </table>\n    </div>\n    <lasso-body/>\n    <init-widgets/>\n    <browser-refresh/>\n  </body>\n</html>\n```\n\nCan you tell me what is the wrong with the template?\n Hi @sanjeevashrivastava, is it possible that the JSON in your `browser.json` file is malformed?\n content of browser.json is as below\n\n{\n    \"dependencies\": [\n        \"style.css\"\n    ]\n}\n I am using htmljs-parser@1.5.12\n I am not using npm-strinkwrap.json\n at position 16 / is in `<lasso-page package-path=\"./browser.json\"/>` of package-path attribute\n i also noticed that if template is in views folder then it is working and if this template is in views/admin folder then it is throwing this error\n If I put space after second \" in `<lasso-page package-path=\"./browser.json\" />` it is throwing following error\n\nLasso page result not found for slot \"head\". The <lasso-page> tag should be used to lasso the page.\n\nError: Lasso page result not found for slot \"head\". The <lasso-page> tag should be used to lasso the page.\n    at render (D:\\Projects\\Test\\Test\\node_modules\\lasso\\taglib\\slot-tag.js:51:15)\n    at render (D:\\Projects\\Test\\Test\\node_modules\\lasso\\taglib\\head-tag.js:10:5)\n    at render (D:\\Projects\\Test\\Test\\views\\admin\\Dashboard.marko.js:20:5)\n    at Object.Template.render (D:\\Projects\\Test\\Test\\node_modules\\marko\\runtime\\marko-runtime.js:193:9)\n    at exports.DashboardPage (D:\\Projects\\Test\\Test\\controllers\\admin\\Dashboard.js:4:14)\n    at Layer.handle [as handle_request](D:ProjectsTestTestnode_modulesexpresslibrouterlayer.js:82:5)\n    at next (D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\route.js:100:13)\n    at Route.dispatch (D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\route.js:81:3)\n    at Layer.handle [as handle_request](D:ProjectsTestTestnode_modulesexpresslibrouterlayer.js:82:5)\n    at D:\\Projects\\Test\\Test\\node_modules\\express\\lib\\router\\index.js:234:24\n\nand FYI I am using lasso@2.3.4\nand using same browser.json in admin folder\n [Dashboard.marko.txt](https://github.com/marko-js/marko/files/254175/Dashboard.marko.txt)\n[Home.marko.txt](https://github.com/marko-js/marko/files/254176/Home.marko.txt)\n\nif you go with above files. both files are same but Home.marko is not working while Dashboard.marko works fine.\n [Home.marko.txt](https://github.com/marko-js/marko/files/255408/Home.marko.txt)\n\nI have tried htmljs-parser separately using the following code with attached file. it is throwing same error.\n\n```\nvar parser = require('htmljs-parser').createParser({\n    onText: function (event) {\n        // Text within an HTML element\n        var value = event.value;\n    },\n\n    onPlaceholder: function (event) {\n        //  ${<value>]} // escape = true\n        // $!{<value>]} // escape = false\n        var value = event.value; // String\n        var escaped = event.escaped; // boolean\n        var withinBody = event.withinBody; // boolean\n        var withinAttribute = event.withinAttribute; // boolean\n        var withinString = event.withinString; // boolean\n        var withinOpenTag = event.withinOpenTag; // boolean\n        var pos = event.pos; // Integer\n    },\n\n    onCDATA: function (event) {\n        // <![CDATA[<value>]]>\n        var value = event.value; // String\n        var pos = event.pos; // Integer\n    },\n\n    onOpenTag: function (event) {\n        var tagName = event.tagName; // String\n        var attributes = event.attributes; // Array\n        var argument = event.argument; // Object\n        var pos = event.pos; // Integer\n    },\n\n    onCloseTag: function (event) {\n        // close tag\n        var tagName = event.tagName; // String\n        var pos = event.pos; // Integer\n    },\n\n    onDocumentType: function (event) {\n        // Document Type/DTD\n        // <!<value>>\n        // Example: <!DOCTYPE html>\n        var value = event.value; // String\n        var pos = event.pos; // Integer\n    },\n\n    onDeclaration: function (event) {\n        // Declaration\n        // <?<value>?>\n        // Example: <?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n        var value = event.value; // String\n        var pos = event.pos; // Integer\n    },\n\n    onComment: function (event) {\n        // Text within XML comment\n        var value = event.value; // String\n        var pos = event.pos; // Integer\n    },\n\n    onScriptlet: function (event) {\n        // Text within <% %>\n        var value = event.value; // String\n        var pos = event.pos; // Integer\n    },\n\n    onError: function (event) {\n        // Error\n        var message = event.message; // String\n        var code = event.code; // String\n        var pos = event.pos; // Integer\n    }\n});\nvar fs = require('fs');\n\nfs.readFile('./views/Home.marko', 'utf8', function (err, contents) {\n    parser.parse(contents);\n});\n```\n\nSo it is confirmed that the issue is in htmljs-parser. Please try to debug it. FYI I am using Windows OS.\n Thank you very much. New version htmljs-parser@1.5.13 fixed the issue.\n  Hi! After upgrade nodemon, node and migrating from marko 2.x to 3.x version i getting next problem:\n**Node.js version: 6.0.0**\n\n```\nnpm start\n\nAppname@1.3.0 start /home/baddad/Projects/Appname\nNODE_ENV=development nodemon app.js -e js,marko,json --trace-sync-io --verbose\n\n[nodemon] 1.9.2\n[nodemon] to restart at any time, enter rs\n[nodemon] ignoring: .git .nyc_output .sass-cache bower_components coverage /home/baddad/Projects/Appname/node_modules/\\*/\n[nodemon] watching: .\n[nodemon] watching extensions: js,marko,json\n[nodemon] starting node app.js --trace-sync-io\n[nodemon] child pid: 20375\n[nodemon] watching 2,134 files\n[nodemon] files triggering change check: application/frontend/home/home.marko.js\n[nodemon] matched rule: \\*\\/.\\*\n[nodemon] changes after filters (before/after): 1/1\n[nodemon] restarting due to changes...\n[nodemon] application/frontend/home/home.marko.js\n\n[nodemon] starting node app.js --trace-sync-io\n[nodemon] child pid: 20383\n[nodemon] files triggering change check: application/frontend/home/home.marko.js\n[nodemon] matched rule: \\*/.\\*\n[nodemon] changes after filters (before/after): 1/1\n[nodemon] restarting due to changes...\n[nodemon] application/frontend/home/home.marko.js\n\n[nodemon] starting node app.js --trace-sync-io\n[nodemon] child pid: 20391\n[nodemon] files triggering change check: application/frontend/home/home.marko.js\n[nodemon] matched rule: \\*/.\\*\n[nodemon] changes after filters (before/after): 1/1\n[nodemon] restarting due to changes...\n[nodemon] application/frontend/home/home.marko.js\n\n[nodemon] starting node app.js --trace-sync-io\n[nodemon] child pid: 20399\n[nodemon] files triggering change check: application/frontend/home/home.marko.js\n[nodemon] matched rule: \\*/.\\*\n[nodemon] changes after filters (before/after): 1/1\n[nodemon] restarting due to changes...\n[nodemon] application/frontend/home/home.marko.js\n```\n @patrick-steele-idem Thanks you very much! All works fine :) :+1: But in previous version(2.x) i did not see this problem.\n  Adds a submodule (`marko/express`) that provides an `injectInto` method that will add a `marko` method to the express response prototype.  We get access to express locals, and it automatically sets the content type of the request.\n This latest update removes the need to pass `express` to the submodule.  It is required from the parent module's context.  Test coverage has been increased as well.\n  We need a way to disable `client-reorder` on all `<async-fragment>` tags.  This will be useful when serving content to bots/crawlers and users that might have js disabled.\n  the if=\"conditional\" attribute syntax is deprecated in v3\n  #281 \n  Hi,\n\nI have a project where part of the content is inserted on a database using a CMS. That content sometimes have paragraphs. I tried to replace `\\\\n` (and others) with `<br>`, but then Marko replaces the `<` whit `&lt;` for security reasons I guess. How can I avoid that at least with some tags?\n For example:\n\n**_data_**\n\n``` json\n{\n    \"name\": \"<br>Markojs\"\n}\n```\n\n**_marko template hello.marko_**\n\n``` html\n- Hello ${data.name}!\n<span>Other text</span>\n```\n\n**_output html_**\n\n```\nHello &lt;br>Markojs! <span>Other text</span>\n```\n\n> Hello &lt;br>Markojs! Other text\n\nBy default, all special HTML characters will be escaped in dynamic text to prevent Cross-site Scripting (XSS) Attacks. To disable HTML escaping, you can use $! as shown in the following sample code:\n**_data_**\n\n``` json\n{\n    \"name\": \"<br>Markojs\"\n}\n```\n\n**_marko template hello.marko_**\n\n``` html\n- Hello $!{data.name}!\n<span>Other text</span>\n```\n\n**_output html_**\n\n```\nHello\n<br>Markojs! <span>Other text</span>\n```\n\n> Hello\n> Markojs! Other text\n\nRef: [Language Guide // Marko](http://markojs.com/docs/marko/language-guide/#text-replacement)\n Thanks a lot, I remembered to have read it somewhere but I couldn't find it.\n  Adding some files to npmignore which are not required to be published to npm registry\n  I am using Jade doc as a reference at the moment, they suggest using html tag directly for inline tags, does marko recommend the same strategy or does it have a better solution? eg.\n\n```\np - hello there, <strong>username</strong>.\n```\n\nA demo on http://markojs.com/try-online/ would help. Currently the only demo with inline tags are using macro. I think it's an overkill to do this with macro.\n Ah interesting, so whitespace demo does sort of address my question, not quite sure what `---` stands for though.\n\nhttp://markojs.com/try-online/#Whitespace_Simple\n Closing this as the answer is:\n\n```\np\n  - hello there,\n  strong - username\n  - .\n```\n  @patrick-steele-idem - Note, the error is misleading, as I just modified the existing template, however the hot reloader module, somehow looks for new compiled templates.\n\n`Error: ENOENT: no such file or directory, open '/Users/prashjain/projects/xonyx/node_modules/lasso/head-116-3-26-29630-12vpaz3.marko'\n   at Error (native)\n   at Object.fs.openSync (fs.js:549:18)\n   at Object.fs.readFileSync (fs.js:397:15)\n   at loadFile (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/loader.js:82:23)\n   at load (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/loader.js:124:16)\n   at Object.load (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/marko-runtime.js:295:33)\n   at Object.marko.load (/Users/prashjain/projects/xonyx/index.js:21:18)\n   at Object.Template.(anonymous function) [as renderSync] (/Users/prashjain/projects/xonyx/node_modules/marko/hot-reload/index.js:67:48)\n   at Object.LassoPageResult.getHtmlForSlot (/Users/prashjain/projects/xonyx/node_modules/lasso/lib/LassoPageResult.js:111:25)\n   at Object.LassoPageResult.getSlotHtml (/Users/prashjain/projects/xonyx/node_modules/lasso/lib/LassoPageResult.js:150:21)\n   at renderSlot (/Users/prashjain/projects/xonyx/node_modules/lasso/taglib/slot-tag.js:35:36)\n   at render (/Users/prashjain/projects/xonyx/node_modules/lasso/taglib/slot-tag.js:57:9)\n   at render (/Users/prashjain/projects/xonyx/node_modules/lasso/taglib/head-tag.js:9:5)\n   at module.exports.t (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/helpers.js:284:13)\n   at render (/Users/prashjain/projects/xonyx/src/pres/layouts/ryp/desktop/ryp-layout.marko.js:44:5)\n   at Object.Template.render (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/marko-runtime.js:192:9)\n   at Object.Template.(anonymous function) [as render] (/Users/prashjain/projects/xonyx/node_modules/marko/hot-reload/index.js:72:34)\n   at render (/Users/prashjain/projects/xonyx/node_modules/marko/node_modules/marko-layout/use-tag.js:14:20)\n   at module.exports.t (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/helpers.js:284:13)\n   at render (/Users/prashjain/projects/xonyx/src/pres/pages/ryp/desktop/ryp-page.marko.js:40:5)\n   at Object.Template.render (/Users/prashjain/projects/xonyx/node_modules/marko/runtime/marko-runtime.js:192:9)\n   at Object.Template.(anonymous function) [as render] (/Users/prashjain/projects/xonyx/node_modules/marko/hot-reload/index.js:72:34)\n`\n  It's now out as \"stable,\" and will be the LTS release come October. So here's a fun one:\n\n``` bash\n% npm test                                                                                                           \n\n> marko@3.0.2 test /Users/jsumners/Projects/marko\n> npm run init-tests && node_modules/.bin/mocha --ui bdd --reporter spec ./test && node_modules/.bin/jshint compiler/ runtime/ taglibs/\n\n\n> marko@3.0.2 init-tests /Users/jsumners/Projects/marko\n> ./test/init-tests.sh\n\n/Users/jsumners/Projects/marko/node_modules/property-handlers/lib/index.js:21\n                throw cause;\n                ^\n\nError: Error while handling properties for <assign> tag in /Users/jsumners/Projects/marko/taglibs/core/marko.json: Error while applying option of \"code-generator\". Cause: TypeError: Path must be a string. Received undefined\n    at assertPath (path.js:7:11)\n    at Object.dirname (path.js:1324:5)\n    at /Users/jsumners/Projects/marko/node_modules/raptor-modules/resolver/lib/serverResolveRequire.js:27:65\n    at Object.find (/Users/jsumners/Projects/marko/node_modules/raptor-modules/resolver/lib/search-path.js:14:31)\n    at serverResolveRequire (/Users/jsumners/Projects/marko/node_modules/raptor-modules/resolver/lib/serverResolveRequire.js:18:29)\n    at Object.TagHandlers.codeGenerator (/Users/jsumners/Projects/marko/compiler/taglib-loader/loader-tag.js:175:20)\n    at invokeHandlers (/Users/jsumners/Projects/marko/node_modules/property-handlers/lib/index.js:66:29)\nnpm ERR! Test failed.  See above for more details.\n```\n  I've created a few prototypes:\n- Core marko generator project [link](https://github.com/BryceEWatson/marko-js-generator)\n- Atom marko generator project [link](https://github.com/BryceEWatson/marko-js-generator-atom)\n\nHaving a separate core project allows use to centralized set of layout templates for ui components, and later, entire projects. The core is generic and doesn't contain any logic related to atom, but contains the templates (see example [here](https://github.com/BryceEWatson/marko-js-generator/tree/master/templates/ui-component)) and the logic needed to copy them to any destination path.\n\nThe atom project contains all the logic needed to surface the proper menu items, etc, and has the core project as a dependency (not implemented yet, need to npm publish).\n\nCurious what everyone thinks of this approach, I think the core library starts to allow us to branch into other frameworks like yeoman, sublime, etc.\n @patrick-steele-idem Good points. I agree that the prototype is too rigid in enforcing .less, etc. Maybe we could add an option (to both core & atom projects?) to save a new template directory. The option could be surfaced in the atom in the right click menu, allowing the user to right click a module and select \"Save as template\". I'm not sure how simple this would be in practice, as dynamic data for module name would need to be included.\n\nAlso, yes I avoided yeoman this time. The last time we went down the yeoman path it became very tightly coupled to the framework. It's worth exploring a generic solution that uses atom-yeoman instead of ejs.\n\nI also like the generic Generator option. This goes beyond simple marko support, and might overlap with some existing solutions. Will need to research this further.\n\nThanks for the feedback!\n I think it would be nice to make something like https://github.com/dsandstrom/atom-double-tag and highlight of closing tags for marko.\n @patrick-steele-idem thank very much now i am happy like a child :) for this features even vodka is not enough! Also i see some colors in syntax highlighting are changed for example < > and now it's much better. Good job!\n Didn't find such issue for Visual Studio Code, do you have any plans for it?\n @mlrawlings oh no what did I `commit` to ;)\n  The only item from that list that I've found myself actively missing is \"click to go to tag definition\" (i.e. jump to custom tag template file) but the others would be great too!\n Many fullstack engineers use IntelliJ, so such a plugin would definitely make sense.\n Autocompletion of `${data.something}` would be great. Hopefully the tag attributes would autocomplete layout elements.\n Yes please! Also a default widget component files generator via right-click would be nice.\n Any update on this?\n Official website lists Webstorm integration, but link points to textmate:\r\n\r\nhttp://markojs.com/docs/editor-plugins/\r\n Given the complexity of implementing this, anyone interested in such a plugin should also login to JetBrains's issue tracker and vote for the issue https://youtrack.jetbrains.com/issue/WEB-20821 Done  I am not sure what is this supposed to be: http://markojs.com/docs/marko-widgets/get-started/#widget-state\n\nin the `getTemplateData` function there is an assignment to nothing to `style`:\n\n```\ngetTemplateData: function(state, input) {\n        var style = ;\n\n        return {\n            name: state.name,\n            color: state.selected ? 'yellow' : 'transparent'\n        };\n    },\n```\n https://github.com/marko-js/marko-widgets/pull/132 done\n  Would it be better if the macro file: `helpers.marko` could be included in other files ? `custom-taglibs` is a little complicate for the beginners, IMO.\n Cool, this is more easy to understand than the doc. Thanks a lot.\n  Example:\n\n`<mywidget w-preserve-attrs=\"style,class\" />`\n\nWill result in the template compiler throwing the following error:\n\n``` javascript\n/webapp/node_modules/lasso/lib/dependency-walker.js dependency.getPackageManifest failed: Error: An error occurred while trying to compile template at path \"/webapp/src/code/components/cover-profile/index.marko\". Error(s) in template:\n1) [src/code/components/cover-profile/index.marko:25:8] Unsupported attribute of \"data-w-preserve-attrs\" found on the <tinput> custom tag.\n\n    at Compiler.compile (/webapp/node_modules/marko/compiler/Compiler.js:124:25)\n    at /webapp/node_modules/marko/compiler/index.js:84:41\n    at tryToString (fs.js:414:3)\n    at FSReqWrap.readFileAfterClose [as oncomplete] (fs.js:401:12)\n```\n  This is my template:\n\n```\n<!DOCTYPE html>\n    <html lang=\"en\"> \n        <head>\n            <title>Estimake.co</title>\n            <include template=\"./partials/includes.marko\" />\n            <link rel=\"stylesheet\" type=\"text/css\" href=\"editProject.css\">\n            <script src=\"editProject.js\" type=\"text/javascript\"></script>\n        </head>\n        <body>\n            <include(\"./partials/menu.marko\", data)/>\n            <include(\"./partials/footer.marko\")/>\n        </body>\n    </html>\n```\n\nThis is what I am getting when the template is rendered in v3.\n\n`<\ufeff<!DOCTYPE html>><html lang=\"en\"> <head> <title>Estimake.co</title> ... </body> </html></\ufeff<!DOCTYPE>`\n\nAny idea why I have the 'strangeness' with the DOCTYPE?\n Ok, thanks. I tried yours and got the same issue \n\n'<\ufeff<!DOCTYPE html>></\ufeff<!DOCTYPE><html lang=\"en\">'\n\nbut there must be something wrong with my installation, because apparently the original file should not have even compiled.\n\nI take it from your answer that with 3.0 indention is now significant like with the Jade engine even with the HTML approach?\n Let me play around with my installation first. I won't to make sure I am not doing something stupid before I bug you about it. I am not sure how the first template compiled given the error in indention.\n\nThanks for your quick response.\n    Howto reproduce:\n1. Open the online \"try-out\" \"Simple\" example at http://markojs.com/try-online/ \n2. Modify the line 3rd line to add an attribute\n`<li data-bind=\"\\$foo\" for(color in data.colors)>`\n3. The expected output for the above is `<li data-bind=\"$foo\">` but instead a syntax error occurs.\n\nIt works if the dollar-sign isn't escaped at all.\n`<li data-bind=\"$foo\" for(color in data.colors)>`\n\nIn marko-js pre v3 this worked as expected...\n Worth to mention is that the migration tool translates attr=\"\\$foo\" into attr=\"\\$foo\" which is not what is expected... \n The migration script translates \\$foo into double \\ $foo\n\nSince I'm using knockout js some special variables need to be prefixed with $, luke $parent and such. In this case the output needs to be attr=\"$parent\" without any \\\n Great, I will try it out in a couple of days!\n Thanks, the solution worked!\n  when using the `require('marko').install()` the compiled files seem to cut the .marko extension from all require.resolve() calls.\n\nWhen i have compiled using `$ markoc master.marko` my output contains:\n\n```\nnavigation_template = loadTemplate(require.resolve(\"./components/navigation/template.marko\"));\n```\n\nbut when i have installed the node-require module, and simply required the template with \n`require('./src/master.marko')` the same line is:\n\n```\nnavigation_template = loadTemplate(require.resolve(\"./components/navigation/template\"));\n```\n Sweet. As soon as that work as expected i think i have a functioning pull\nrequest for markoify.\n\nOn 11 April 2016 at 16:41, Patrick Steele-Idem notifications@github.com\nwrote:\n\n> Thanks for reporting the problem. I'm looking into it.\n> \n> \u2014\n> You are receiving this because you authored the thread.\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/262#issuecomment-208379670\n Ok, i will see if i can recreate it again.\n\nOn 11 April 2016 at 17:37, Patrick Steele-Idem notifications@github.com\nwrote:\n\n> @lohfu https://github.com/lohfu I was not able to reproduce the problem\n> using a fresh npm install. I tried to recreate your setup and the\n> template is compiling as expected:\n> \n> function create(__helpers) {\n>   var str = __helpers.s,\n>       empty = __helpers.e,\n>       notEmpty = __helpers.ne,\n>       escapeXml = __helpers.x,\n>       loadTemplate = __helpers.l,\n>       navigation_template = loadTemplate(require.resolve(\"./components/navigation/template.marko\"));\n> \n>   return function render(data, out) {\n>     navigation_template.render({}, out);\n>   };\n> }\n> \n> (module.exports = require(\"marko\").c(__filename)).c(create);\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/262#issuecomment-208405916\n Hey Patrick,\n\nYes i was. I created a repository at https://github.com/lohfu/marko-test.\nSimply running `node server/server.js` will create a master.marko.js with\n\n```\nnavigation_template =\nloadTemplate(require.resolve(\"./components/navigation/template\")),\n```\n\nOn 17 April 2016 at 00:08, Patrick Steele-Idem notifications@github.com\nwrote:\n\n> Hey @lohfu https://github.com/lohfu, just wanted to check in and see if\n> you were able to reproduce. Thanks.\n> \n> \u2014\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/marko-js/marko/issues/262#issuecomment-210913456\n  - Added ability to exclude specific node_module from marko-taglib.json lookup;\n- Added tests for excluding specific directory and specific node_modules from marko-taglib.json lookup;\n  Steps to reproduce\n1. `require('marko/compiler').defaultOptions.writeToDisk = false;`\n2. `require('marko/node-require').install();`\n3. Create a custom tag that includes an instance of itself.\n\n```\n<li class=[data.page.name, data.currentPage.path === data.page.path && 'current']>\n    <a href=\"${data.page.path}\"><span>${data.page.title}</span></a>\n\n    <if(data.page.pages)>\n        <ul>\n            <for(page in data.page.pages)>\n                <navigation-item({ page: page, currentPage: data.currentPage })></navigation-item>\n            </for>\n        </ul>\n    </if>\n</li>\n```\n  I'm trying to do something very simple but I can't seem to get it to work. I have a basic template like this...\n\n`<div>\n   <customTag></customTag>\n</div>`\n\nAnd in custom tag's template I include another custom tag...\n\n`<div>\n    <customTag2></customTag2>\n</div>`\n\nAnd then finally, customTag2's template simply renders.\n\n`I'm custom tag 2`\n\nWhen I render all this, I end up with \n\n`<div>\n   <div>\n      <customTag2></customTag2>\n   </div>\n</div>`\n\nIt never renders customTag2. And I know the tag lib is found becuase if I go to my main template and include both custom tags, they both render, but not if they are nested. \n\nAm I doing something wrong? Or is including one custom tag in another's template not supported? Do I have to do the Parent/Child thing? I'd rather not since the child tag is intended to be used in many places.\n Sure, it's a pretty simple set-up.\n- tags\n  - customTag1\n    - template.marko\n  - customTag2\n    - template.marko\n- template\n  - mainTemplate.marko\n- Index.js\n- marko.json\n\nHere, the index file is rendering the ./template/mainTemplate.marko. The marko.json is as follows\n\n`{\n    \"tags-dir\": \"./tags/\"\n}`\n No, sorry that's just my bad typing here. I fixed the above example.\n\nIt is strange because as I said, if I include both custom tags in the root template, they both render, it's only if one is nested inside the other that the inner template does not render.\n You are right, that works. It must be something with my set-up. I'll close this for now, since it is possible to do it, and I'll try to figure out where I messed up. :) Thanks for all the help!\n   I feel there is not enough awareness out in the community about Markojs, nor is there a curated list of examples, articles, and good libraries from around the net. May there should be one ...\n I agree with this. For example, I think it would be really cool if there was an article showing how eBay leverages Marko for their main site \n Since I suggested this, I really should join in the fun; I will be submitting libs, components, etc as I make them over the next couple of weeks. I will do my best to get some articles out about Markjs on my Medium blog.\n love it, will commit something when you define a format\n +1 I have been looking for UI kits such as vuematerial.github.io, vuetifyjs.com for marko but haven't found any so far. An awesome-marko repo would be very helpful to group all available resources under one page  In some of the custom elements I've written, I want to use different root elements based on the context. I want to put `w-bind` on these root elements. The content inside these root elements is the same across variations and I would like to use a macro to avoid repetition. However, when I try to use `w-body` in the macro, I get an error saying that w-body can only be used inside a element with w-bind. This prohibits my ability to use a macro to render the content.\n\nWhat is the best way to pass a rendered body to the macro?\n Thanks for the suggestion. I'll try it.\n @mlrawlings I tried the technique you suggested and the element renders correctly. However, the new element is not bound. \n\nWith this template:\n\n```\n<${data.tag} class=data.classes w-bind >\n  <div class=\"content\">\n    <invoke data.renderBody(out) />\n    <div class=\"sub header\" if(data.subheader)>${data.subheader}</div>\n  </div>\n</>\n```\n\nI get:\n\n```\n<h2 class=\"ui-heading\" w-bind>\n<div class=\"content\">My Header</div>\n</h2>\n```\n\nAnd when I use `w-body` instead of `<invoke data.renderBody(out) />` I still get a compile error complaining about w-body without w-bind.\n\nLet me know if I missed something that enabled the suggestion to work.\n Works like a charm. Thanks!\n  I just migrated to v3 and now only custom taglibs in the same directory as the page are resolved.\n\nHere's a sample of the directory structure:\n\n```\nroot\n   package.json\n   marko.json\n   node_modules\n   plugins\n      components\n         my-hello\n             template.marko\n      pages\n         test\n            page.marko\n```\n\n`marko.json` has:\n\n```\n{\n  \"tags-dir\": [\n    \"./plugins/components\"\n  ]\n}\n```\n\nI can get the `my-hello` custom tag to render in `page.marko` only when it and marko.json are located in `/plugins/pages/test`.\n\nI believe related to this issue, `<init-widgets/>` and `<browser-refresh/>` don't render either. They appear as tags in the outputted page. \n\nIt was my understanding that marko would walk up the directory tree from the page to the project's root looking for marko.json. Once found, it would use marko.json to pull in any custom tag definitions. I'm not sure what changed with v3.\n Walking up the directory tree from plugins/pages/test, I only have package.json at the root. Some of the other plugins have a package.json file but they are not parents of the test page. \n\nDid this behavior change between v2 and v3? I ask because in the v2 version of the repo I\u2019m working on I have a page directory with a package.json and everything is working fine.\n\nFrom:  Patrick Steele-Idem notifications@github.com\nReply-To:  marko-js/marko reply@reply.github.com\nDate:  Sunday, March 20, 2016 at 1:40 PM\nTo:  marko-js/marko marko@noreply.github.com\nCc:  Todd Bashor tbashor@gmail.com\nSubject:  Re: [marko] Custom taglibs not found after migrating to v3 (#252)\n\n@tbashor by any chance, do you have any intermediate package.json files? The taglib finder stops when it gets to the \"root\" of the package? The root of the package is determined by looking for a package.json file with a \"name\" property. I suspect that the search for taglibs is being ended prematurely due to the root directory not being as expected. FYI, here is the code that is used to discover taglibs for marko: https://github.com/marko-js/marko/blob/master/compiler/taglib-finder/index.js\n\nPlease let me know if that is the case. Thanks.\n\n\u2014\nYou are receiving this because you were mentioned.\nReply to this email directly or view it on GitHub\n @patrick-steele-idem You were right that there was a package.json stopping the lookup. I'm still having trouble getting the lasso tags to resolve, but I think that has to do with my particular setup. Thanks for your help.\n  Currently rendering a template returns an `AsyncWriter`, it would be handy though if when a callback is omitted that templates render function returned a promise.\n\n``` js\nvar template = require(\"template.marko\");\n\ntemplate.render({ hello: \"world\" })\n    .then(function (html) { ... })\n    .catch(function (err) { ... });\n```\n\nIf you're using promises already it makes using marko a bit easier.\n You can use temporarily **bluebird** module.\n\n```\nlet Promise = require('bluebird');\nlet EntryCommentsMarkup = require('./views/EntryComments.marko');\nPromise.promisifyAll(EntryCommentsMarkup);\n```\n\nthen in routing we invoke **renderAsync** method:\n\n```\napp.get('/example', function(req, res) {\n    let Data = { ... };\n    return EntryCommentsMarkup.renderAsync(Data)\n        .then((markup) => res.status(200).json({ markup: markup }))\n        .catch((error) => res.status(400).json({ message: error.message }));\n});\n```\n A bit late, just throwing this out there: The Promises/A+ specification requires that if the result is an `object` or `function` with a `then` method, it _must_ be treated as a \"thenable\". In other words, this solution is explicitly permitted by the specification, and any `Promise` library which doesn't handle this correctly is - by definition - \"broken\". That's all, carry on. :)\n  This pull request fixes a case wherein if `renderSync` receives no context then it will still render the template. Currently, if you don't supply at least an empty object (`{}`) then `renderSync` bombs with an error like:\n\n```\nDebug: internal, implementation, error \n    TypeError: Uncaught error: Cannot read property '$global' of undefined\n    at Object.Template.renderSync (/some/project/node_modules/marko/runtime/marko-runtime.js:109:17)\n    ....\n```\n Excellent. Thank you.\n  I am building a reusable component \"data grid\" using marko templates.\n\nThe component renders set of passed data in html `<table>`. The component internally supports couple of cell renderers which injects content inside `<td>`.\n1. Text - for displaying paragraph of text/ list of links\n2. Image - for displaying an image\n\nI would also like to allow clients to configure custom cell renderers if you they choose to implement something on their own.\n\nI don't see a way to invoke templates dynamically. As expected `<include>`  directly invokes the template and don't execute the renderer.\n\nAm I missing something?\n\n **P.S:** I am using marko-v2 and this component is server side rendered.\n :+1: \n\nThanks @patrick-steele-idem.\n \ud83d\udc4d Looking forward to Marko v4.\n  `<invoke console.log(someData)/>`\n\nThis is good, but it could be much better. :smile: \n\nSome thoughts on creating a debugger:\n- Pretty printing to the browser\n- Additional information about the data (object type, length of the data)\n- processing time\n- the template path in which the debugger it's called\n- limiting the debugger to only show in non-prod environments (don't know if this is possible, but ... would be nice)\n- etc.\n I've seen at least a few other major projects add HTML comments like that to their output for various reasons, including debugging. Angular even uses a similar syntax to bind code to the DOM (`<!-- ngRepeat: post in posts -->`). On the other hand, element attributes might provide some benefits that comments couldn't, especially within the parser/compiler/renderer, as they would be assigned directly to the relevant AST nodes - though the idea of using element attributes (which are usually supposed to affect something) to display debug information (which is never supposed to affect anything) is a bit unnerving.\n\nWhat about something in-between? Throughout the parsing/compiling/rendering process the debug information could be stored in a property on the relevant AST node - or _maybe_ in a parent node similar to an HtmlComment element, or perhaps even some combination of the two - then eventually rendered as HTML comments like in the example above. Then tools could be written to simply hook into the property/node to extract debug information during the compiling and rendering processes, and there would also be helpful HTML comments in the final output.\n\nSpecial debugging tags and attributes could also be added, like `debug=true` to toggle verbose debugging on specific element trees, `debug-render-time` to track and report how long nodes take to render, and _maybe_ even something like `<observe(someData)>` to watch an object for changes, just to name a few. If all of this was handled by the special debug property/node, and only when some special flag (like `DEBUG=marko` or `--debug`) is detected, I would think this could be implemented without too many side effects. Thoughts?\n  # Example\n\n## Install hapi and marko\n\n```\n[sudo] npm install hapi --save\n[sudo] npm install marko --save\n```\n\n## _directory structure:_\n\n```\n\u251c\u2500\u2500 hapi-marko/\n\u2502   \u251c\u2500\u2500 public/\n\u2502   \u2502   \u251c\u2500\u2500 assets/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 css/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 js/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 img/\n\u2502   \u2502   \u251c\u2500\u2500 resources/\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 errors/\n\u2502   \u2502   \u2502   \u2502     \u251c\u2500\u2500 404.marko\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 partials/\n\u2502   \u2502   \u2502   \u2502     \u251c\u2500\u2500 aside.marko\n\u2502   \u2502   \u2502   \u2502     \u251c\u2500\u2500 footer.marko\n\u2502   \u2502   \u2502   \u2502     \u251c\u2500\u2500 header.marko\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 template/\n\u2502   \u2502   \u2502   \u2502     \u251c\u2500\u2500 master.marko\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 index.marko\n\u2502   \u251c\u2500\u2500 index.js\n\u2502   \u251c\u2500\u2500 package.json\n\u2502   \u251c\u2500\u2500 README.md\n\n/public/assets\nWeb resources that are publicly available (css, js, img, fonts)\n\n/public/resouces\nServer and browser-side templates\n\nindex.js\nApplication entry point\n```\n\n## Server side rendering\n\n**_index.js_**\n\n``` js\nconst Hapi = require('hapi'); \n// The following line installs the Node.js require extension\n// for '.marko' files. Once installed, '*.marko' files can be\n// required just like any other JavaScript modules. \nrequire('marko/node-require').install();\n\n// If true(the default)then compiled templates will be written to disk. If false,\n// compiled templates will not be written to disk (i.e., no '.marko.js' file will\n// be generated)\nrequire('marko/compiler').defaultOptions.writeToDisk = false;\n\nconst server = new Hapi.Server();\nserver.connection();\n\n//Load template\nconst index = require('./public/resources/index.marko');\n\nserver.route({\n    method: 'GET',\n    path: '/',\n    handler: function (request, reply) {\n\n        index.render({'message': 'hello world!'}, reply);\n    }\n});\n\nserver.start( () => {\n    console.log('Running at:' + server.info.uri);\n});\n```\n\n**_index.marko_**\n\n``` html\n<layout-use template=\"./template/master.marko\" show-header=\"$true\">\n    <layout-put into=\"content\">\n       <div >${data.message}</div>\n       or\n       <div >$data.message</div>\n    </layout-put>\n</layout-use>\n```\n\n**_master.marko_**\n\n``` html\n<!DOCTYPE html>\n<html lang=\"es\">\n    <head>\n    </head>\n    <body>\n        <div id=\"layout\">\n            <aside>\n                <include template=\"../partials/aside.marko\"/>\n            </aside>\n            <section class=\"section\">\n                <layout-placeholder name=\"content\" />\n            </section>\n        <footer class=\"footer\">\n                <include template=\"../partials/footer.marko\"/>\n        </footer>\n        </div>\n    </body>\n</html>\n```\n\n**_header.marko_**\n\n``` html\n<div>header content</div>\n```\n\n**_aside.marko_**\n\n``` html\n<div>aside content</div>\n```\n\n**_footer.marko_**\n\n``` html\n<div>footer content</div>\n```\n\n### execute\n\n```\nnode index.js\n```\n\n### Open your browser and visit http://localhost:8000\n\n#### gives the following output\n\n```\naside content\nhello world!\nor\nhello world!\nfooter content\n```\n\n### Clone the example\n\n[example-hapi-marko](https://github.com/davidenq/example-hapi-marko)\n I'm agree. I'll work on a new tutorial. Have a great weekend!\n If you want to adjust the response type:\n\n``` javascript\nserver.route({\n    method: 'GET',\n    path: '/',\n    handler: function (request, reply) {\n\n        reply(index.stream({'message': 'hello world!'})).type('text/html');\n    }\n});\n```\n Both `.render` and `.stream` are very useful, However they are deprecated. Is it OK to still use them with hapi? Is there a better option?\n No, they aren't.\n\nhttp://markojs.com/docs/marko/javascript-api/#streamtemplatedata--streamreadable\nis not\nhttp://markojs.com/docs/marko/javascript-api/#streamtemplatepath-templatedata--streamreadable\n FYI -> https://github.com/hapijs/vision/pull/111  `<marko-compiler-options>` shouldn't add a newline to rendered output because it's an option to the compiler, not part of the template at all. So it shouldn't cause any side-effect in the output.\n\nI was about to submit a PR with a fix, but @patrick-steele-idem said in gitter:\n\n> The marko compiler allows certain nodes/tags to be marked as \"noOutput\" so that they get ignored when applying whitespace removal rules. We probably just need to set that flag for the <marko-compiler-options> tag. We should add a test case to verify.\n\nSo that's a better solution. I was also trying to provide a PR for this, but i have no idea about how to do it.\n\nI was about to add `el.noOutput = true;` below line 138 in [Parser.js](https://github.com/marko-js/marko/blob/master/compiler/Parser.js#L138), but i think the PR shouldn't/wouldn't be accepted like that.\n  Somewhat related to #235, what do you think about defaulting to a template file without the name `template.marko` if it is the only one in that directory level?\n\nCurrently I avoid naming my templates `template.marko` because file navigation is much quicker if I name it after the component. So my component naming tends to have some duplication (`component.marko` `component.js` `component.less`) but allows me to easily jump to files without having to type `component/template.marko` in navigation commands.\n\nHowever, I end up having to copy paste tons of `index.js` files like so:\n\n``` js\n'use strict';\n\nvar template = require('./component.marko');\n\nmodule.exports = function render(input, out) {\n    template.render(input, out);\n};\n```\n\nIt would be nice if marko could discover these automatically since it is the only template there anyway.\n Yep, that's exactly what I do. So in my case, matching the directory name would be enough. I actually only follow this convention for my own personal projects. For larger projects with more people, I follow the standard convention for the reasons you mentioned - while suffering through slower file navigation.\n\nIt's fairly simple to work around this, but I think it would be nice if marko was slightly less opinionated on file names. Looking for `template.marko`, then `dir-name.marko`, before finally looking through the templates in the directory, might be a nice way to optimize for the primary cases. I guess it depends how much magic we want vs. config.\n That's true on the first point. Since about half my components have renderers and half have templates, I set them all up as renderers for \"consistency,\" although it could really go either way. \n\nWhen I used Atom, I did notice that the fuzzy autocomplete was pretty good. But for a bunch of other reasons, I've gone back to Webstorm for now. Webstorm isn't as good with directory matching and I would to type `full-directory-name/t` to get to the template.\n\nRegarding the `js` naming - my own personal convention is to use marko defaults when needed on the server like `index.js` `renderer.js`, but to use component name for client side js - `component.js`. You're right that having a lot of index files is a bit awkward considering my other file names, but that's more part of node.js than Marko. This convention does help me differentiate server/client a bit better.\n\nOn the last point, I'm not sure. I think as long as Webstorm autocomplete stays the way it is, it is significantly faster for me to keep my current naming conventions. If I move back to Atom, then the point is moot. Sucks to make IDE-specific decisions, but I just really hate typing out long directory names, and the other benefits of Webstorm over Atom (in my opinion) keep me there.\n Wanted to add that in playing around with this some more, you do have to type the `/` but not the entire folder names in Webstorm. So it's not quite as bad. I still think some flexibility might be nice here regardless.\n I've since moved to generic file names in components (and haven't had any issues with quick navigation in VS Code). We can close this, unless you were still considering expanding auto-discovery.\n  In one of my projects, I use `short` and `long` for property names in objects (I didn't realize these were technically reserved). It turns out that these fail in Marko v3 when used as `${data.short} and ${data.long}` in a template. It's worth noting that this is server-only since I'm not using marko widgets in this case.\n\nApparently, these two keywords, along with a host of others, are no longer reserved as of ES5. So if that's all it is I'm happy to submit a quick PR to update https://github.com/marko-js/marko/blob/master/compiler/util/javaScriptReservedWords.js to the ES5 list. Just wanted to check if there were any concerns in doing that, or if you prefer to keep pre-ES5 list.\n\nIf this is intentional (and that we're also intentionally disallowing property names as reserved keywords for IE8 support in case the template goes to the browser), maybe we should have an option to disable such behavior.\n  For custom dynamic tags, I have a function using the `try-require` module that works as follows:\n\n```\nfunction loadRenderer(path) {\n    var renderer = rendererCache[path];\n    if (!renderer) {\n        renderer = rendererCache[path] = tryRequire(path) || 'not-found';\n    }\n    return renderer;\n}\n```\n\nI then use this to determine whether to require a renderer or a template:\n\n```\n    if (!isWidget && !widgetId) {\n        module.type = 'renderer';\n        module.renderer = loadRenderer(path.join(modulePath, 'renderer.js'));\n        if (module.renderer === 'not-found') {\n            module.template = loadRenderer(path.join(modulePath, 'template.marko'));\n            module.type = 'template';\n        }\n    }\n```\n\nThis works fine normally, but in functional tests through karma, it looks like the runtime is attempting to resolve `not-found` to a module. This results in the following error:\n\n```\nCannot find module \"not-found\" from \"/$/marko/runtime\"\n    require@.../.test/static/node_modules/lasso/node_modules/raptor-modules/client/lib/raptor-modules-client.js:568:52\n    instanceRequire@.../.test/static/node_modules/lasso/node_modules/raptor-modules/client/lib/raptor-modules-client.js:113:75\n    load@.../.test/static/node_modules/marko/runtime/loader_browser.js:21:19\n    load@.../.test/static/node_modules/marko/runtime/marko-runtime.js:295:39\n    l@.../.test/static/node_modules/marko/runtime/helpers.js:197:36\n\n```\n\nI tried setting renderer to a handful of other types based on the relevant marko code, but ran into different issues each time. Do you know how I could effectively make this a no-op? Or if there is a better way to achieve the same thing?\n I think you're right - and I think it's because of https://github.com/marko-js/marko-widgets/issues/130\nLooks like I might need to artificially require everything that goes through `dynamic-tag`\n  If you don't have an `index.js` file, it defaults to the template. But it should search for other possible renderers, such as a `index.coffee.js` file before defaulting to the template.\n  Cool concept @patrick-steele-idem \n\nI think it greatly improves the expressiveness of Marko templates.\nLove the idea that you can make a very generic template more \nspecific by importing it into another template and giving it an alias!\nSo yeah, I would love to have them.\n\nJust some thoughts:\n1. Function wise, nothing is added - basically one could do the same\nby simply using the name of the custom tag as it has been done until know (probably surrounded\nby a `<if>` clause) - the dependencies would be resolved by lasso and the compiled \ncode for both templates would be available in the client package...\nThe difference here is compile time; right? - anything else to differentiate (probably from a user perspective)?\n2. Is there a specific reason not to use a syntax like:\n`<import-tag componentA=\"component-a\">`\n\nGreat concept!\n In my case I have 15 components which I want to call dynamically. When there were only a few components, just using `<if>` works fine. But with a large list, it becomes pretty tedious. I don't think this is too far out of an edge case, since we are encouraging the use of lots of small components.\n\nSo I ended up invoking renderers directly and then passing them through a `<dynamic-tag>` component, which cleans up the `marko` files quite a bit, but also leaves implementation to the user (handling templates, renderers, widgets without ids, widgets with ids, etc., all of which marko should already know how to do). But applying that case here, I'm not sure this new feature helps too much. It would mean 15 lines of importing components directly by name.\n\nCan we ever resolve the tags later to be fully dynamic?\n\n```\n<import-tags \"data.tags\" as data.names>\n\n<for each=\"name in names\">\n    <invoke-tag(name, { name: 'Frank', count: 30 })/>\n</for>\n```\n I think we could implement this and #172 with a similar syntax:\n\n``` xml\n<import(<tag-name> from './component')/>\n```\n\nThen just use it:\n\n``` xml\n<tag-name/>\n```\n\nAnd for es2015 style inputs (#172):\n\n``` xml\n<import({ dedupe } from './utils')/>\n```\n\nAnd they'd look slightly nicer without the argument parentheses:\n\n``` xml\n<import <tag-name> from './component'/>\n<import { dedupe } from './utils'/>\n```\n @philidem I've been playing with the parsing, from here it should be pretty trival to generate the necessary AST nodes: https://tonicdev.com/mlrawlings/573b709ca492941100e1140e\n As Yoni mentioned, the real value in this is to have something like:\n\n``` html\n<for(card in model.cards)>\n  <${card.name} model=card />\n</for>\n```\n\nI would think the name could be resolved and the component found from the `marko.json` file. Are there any major issues with that I'm missing?\n  Awesome! :tada: \n  Hi all,\n\nIt seems that after a few different implementations of basic w-onClick, it does not work on mobile or tablet devices at all; the event/function attached to it simply does not fire at all. I'm not really sure what else to put here, other than to try it yourself and see the issue firsthand :+1: \n This probably relates to how mobile browsers detect clickable elements. For example, iOS Safari has some quirks:\nhttps://developer.apple.com/library/ios/documentation/AppleApplications/Reference/SafariWebContent/HandlingEvents/HandlingEvents.html\nhttp://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n\nI wonder if marko-widgets should try to handle this at all.\n Related: https://github.com/facebook/react/issues/134\n  It is my understanding that should be able to change the tagName of an element at the transform stage and have it trigger a code-generator/renderer at the generate stage, but this does not appear to be the case.  Am I doing something wrong? Is this expected behavior? A bug?\n\nNOTE: This is on the lastest version of the `htmljs-parser` branch.\n# Setup\n\n_index.js_\n\n``` javascript\nrequire('marko/node-require').install();\nrequire('./test.marko').stream().pipe(process.stdout);\n```\n\n_marko-tabglib.json_\n\n``` json\n{\n    \"<new>\": {\n        \"code-generator\":\"./test-generator\"\n    },\n    \"<*>\": {\n        \"transformer\":\"./test-transformer\"\n    }\n}\n```\n\n_test-transformer.js_\n\n``` javascript\nmodule.exports = function transform(el, context) {\n    console.log('CALLED TRANSFORM')\n    if(el.tagName !== 'new') {\n        if(el.getAttributeValue('transform')) {\n            el.setTagName('new')\n        }\n    }\n}\n```\n\n_test-generator.js_\n\n``` javascript\nmodule.exports = function codeGenerator(el, codegen) {\n    console.log('CALLED GENERATOR')\n    el.removeAttribute('new')\n    return el\n};\n```\n# Test 1, unexpected\n\nRendering the following template:\n\n_test.marko_\n\n``` html\n<div transform=true />\n```\n\nI get the **output**:\n\n```\nCALLED TRANSFORM\n<new transform></new>\n```\n\nBut I'm **expecting**:\n\n```\nCALLED TRANSFORM\nCALLED GENERATOR\n<new></new>\n```\n# Test 2, working as expected\n\nIf I change the template to use the `<new>` tag initally I do get the expected output:\n\n_test.marko_\n\n``` html\n<new transform=true />\n```\n\n**output**:\n\n```\nCALLED TRANSFORM\nCALLED GENERATOR\n<new></new>\n```\n\nThe node still goes through the transform function, but it is not touched.  I'm guessing this is the difference.\n Makes sense.  Thanks for clarifying, and the `replaceWith` method is much appreciated!\n  ```\nexports.taglibs.registerTaglib(require.resolve('../taglibs/core/marko-taglib.j\n                                       ^\nTypeError: undefined is not a function\n```\n\nCode snippet from `marko/compiler/marko-compiler`:\n\n```\nexports.TemplateCompiler = require('./TemplateCompiler');\nexports.taglibs = require('./taglibs');\nexports.taglibs.excludeDir(nodePath.join(__dirname, '../'));\n\nexports.taglibs.registerTaglib(require.resolve('../taglibs/core/marko-taglib.json'));\nexports.taglibs.registerTaglib(require.resolve('../taglibs/html/marko-taglib.json'));\nexports.taglibs.registerTaglib(require.resolve('../taglibs/caching/marko-taglib.json'));\nexports.taglibs.registerTaglib(require.resolve('marko-layout/marko-taglib.json'));\nexports.taglibs.registerTaglib(require.resolve('marko-async/marko-taglib.json'));\n```\n\nWhile doing: \n\n```\nbrowserify --node -t reactify -t markoify -o dist/server.js build/source/server.js\n```\n I don't want any external npm packages hanging out on an application server.\n Is there a way to exclude the marko-compiler from being bundled? Can I only bundle the Marko-runtime, and precompile the Marko templates in Gulp or something?\n\nHere is my implementation:\n\n```\nimport Marko from 'marko';\n\n...\n...\n\napp.use((req, res) => {\n    Marko.load('./views/index.marko', { writeToDisk: false }).stream({\n        props: JSON.stringify(props),\n        reactOutput,\n        title: 'Site Title Here',\n    }).pipe(res);});\n});\n```\n  ```\nError: Cannot find module './raptor-logging-impl'\n    at Function.Module._resolveFilename (module.js:336:15)\n    at Function.Module._load (module.js:278:25)\n    at Module.require (module.js:365:17)\n    at require (module.js:384:17)\n```\n\nOffending code snippet:\n\n```\nmodule.exports = stubs;\n\nif (!process.browser) {\n    var implPath = './raptor-logging-impl';\n    require(implPath);\n}\n},{}],497:[function(require,module,exports){\n(function (__dirname){\n```\n\nHere is my build script:\n\n```\nbrowserify -t markoify --node -t reactify  -o dist/server.js build/source/server.js\n```\n\nDependencies in `package.json`:\n\n```\n\"dependencies\": {\n    \"browserify\": \"^12.0.1\",\n    \"browserify-shim\": \"^3.8.11\",\n    \"bunyan\": \"^1.5.1\",\n    \"bunyan-request-logger\": \"^1.0.2\",\n    \"express\": \"^4.12.4\",\n    \"markoify\": \"^1.1.2\",\n    \"react\": \"^0.14.0\",\n    \"react-dom\": \"^0.14.5\",\n    \"react-tools\": \"^0.13.3\",\n    \"reactify\": \"^1.0.0\"\n  },\n```\n @patrick-steele-idem awesome, thanks. Browserify supports building server-side modules, it just requires some clever configuration, which is actually not fully adopted by browserify but seems to work for most applications.\n\nMy motivation here is to bundle all of my server side code to one file to make deploys easier, and save space on hosting instances.\n Fixed, but spawned this issue:\n\nhttps://github.com/marko-js/marko/issues/213\n  Is there clamoring for jade-like syntax? I guess the current HTML-like syntax makes marko somewhat opinionated, but I didn't think that was problematic.\n I agree with your main points - I think as long as the new parser is generic enough to easily support multiple syntaxes, neither fragmentation nor maintenance costs should really be an issue. `jarko` sounds funny too, so that's a plus.\n I dunno. Back in my day we didn't need these newfangled languages to write HTML. We wrote our `<blink>` tags uphill both ways and we never complained about it. :stuck_out_tongue: \n\nIn all seriousness though, the development cost of supporting another dialect is something that should be well considered. I'd really hate to see Marko development slowed or delayed due to the support of a (fringe) dialect. Yeah, I said it.\n\nAlso, consider that Marko is already an HTML-_like_ syntax, and it sounds like you'd be creating a \"jade-_like_\" syntax. Since Marko is an abstraction of HTML, and Jade is _already_ an abstraction of HTML, Jarko would therefore be an abstraction of an abstraction. Talk about fringe.\n\nSass (or Less) is a good example of a useful abstraction\u2014the benefits of using Less or Sass to write CSS are huge (variables, nesting, extensions, modularization)\u2014and they are still mainly pure CSS at their core. But with Jade, you're basically just talking about laziness and simple dialect. I don't see the benefit beyond the popularity/adoption points. Just my 2\u00a2.\n +1 [Btw the name Jade is changing to Pug with v2](https://github.com/pugjs/jade/issues/2184) so jarko might not be a good idea. Also I think this concise syntax is a lot different from Jade (better in that sense), so it shouldn't be named after it, it should have its own identity. \"concise-marko\" sounds perfect. or if it's too long, maybe \"cmarko\"?\n .pugo\n\nJust kidding. Mug is better.\n Following the discussion, I want to add a few pros/cons I have found... (some are already mentioned)\n\nPros:\n1. Gain additional attraction from the dev community; Everything that looks familiar will improve the adoption rate of Marko - as Marko is still growing, this is important\n2. Makes life easier by putting over legacy code written in Jade; we all know that putting something over without changes seldom works flawlessly... but it should be less work than porting over existing markup into Marko v3....\n3. Easy to get started for people who worked already with Jade... similar to point 1.\n\nCons:\n1. \"Readability\" While Jade offers a sparse syntax, I do not really think it offers much more \"readability\" than Marko v3... I think template statements do not really \"raise from the environment\"; it makes it really hard to see what is really going on without looking at it in detail... on the other hand, Jade might reduce \"noise\" by having less stuff that has to be written (\"<\", \">\"...) - it both has its advantages...\n2. \"Fragmentation\" what are the examples written in - with JavaScript server and client side we left the times when there were different languages (and the mental overhead between switching between them). Now with different template languages we kinda \"sacrifice\" that...\n3. Implementation (+ testing) overhead + maintenance... strongly depends how it is implemented... I am confident that the Marko devs can do a great job here.... but it should be considered nevertheless....\n\nMarko v3's main selling point is \"as close to HTML\" as possible... one could ask if this is really \"enough\" to have it... why not consider Jade-like as the only template syntax? If there will be a way to easy auto-convert Marko v3 into Jade (and back?) why not have jarko the only syntax and allow people to auto convert over Marko v2 into Jarko (if compatibility is an issue)?\n > why not consider Jade-like as the only template syntax?\n\nPlease, no. Abstraction languages come and go\u2014they are in a sense fads. HTML is universally known and familiar to most developers.\n I'm with @danrichman. I think ditching the proper HTML-like syntax all together would be a mistake, at least at this stage. That said, I'm all for giving the jade-like syntax a go. If you can bake both of them into a universal Marko compiler, I think it's going to be a really great move @patrick-steele-idem. Let people decide how they want to use Marko.\n\nThere are some drawback's you guys might want to consider though:\n\n(1) As Marko matures and the user base grows, the ambiguity of questions online could get quite confusing for developers. Consider someone researching how to do something in Marko, and they scour through StackOverflow, videos, blog posts etc... 50% of answers with one syntax, 50% with the other syntax. People are going to end up with some kind of psuedo marko language in their app, where they have a mixture of the compact syntax and traditional syntax. That's a bad experience for everyone.\n(2) More documentation, and it's going to have to be really well written to avoid confusion.\n(3) Ultimately there's probably going to have to be two seperate docs - one for traditional Marko, the other for compact.\n\nI think you can get around both of those issues with really well defined documentation, and pushing out the message early on that there's two syntax options with Marko. But for that to happen, we all need to be up for that challenge. Personally I hate Jade syntax with a passion, but damn, it's 2016. I'll willing to give new things a try.\n Just to be clear:\n\nHaving Jade-like (jarko/mug) as the default would mean to prepend every plain text with a specific well-defined symbol (e.g. a dot)... otherwise plain text would be mis-interpreted as a tag (original Jade uses pipes for plain text)\n\nRegular HTML like syntax would of course be allowed as well (and mixed in within jarko):\n\n```\n. This has to be prefixed\n<div>\n  No worries here\n</div>\n```\n Jade is a rabbit hole. Could be a third-party option, but as a core feature? I dunno. One of the selling points of Jade, according to [its own website](http://jade-lang.com) is...\n\n> Jade is a terse and simple templating language with a strong focus on performance and **powerful features**.\n\nThis is a good reason to _avoid_ Jade actually. Something more powerful is always coming along. Why would we want more powerful features if Marko is intentionally trying to adhere to the _Rule of Least Power_?\n\n> **The Rule of Least Power**\n> http://www.w3.org/2001/tag/doc/leastPower\n> \n> When designing computer systems, one is often faced with a choice between using a more or less powerful language for publishing information, for expressing constraints, or for solving some problem. This finding explores tradeoffs relating the choice of language to reusability of information. The \"Rule of Least Power\" suggests choosing the least powerful language suitable for a given purpose.\n> \n> [...]\n> \n> **Good Practice:** Use the least powerful language suitable for expressing information, constraints or programs on the World Wide Web.\n\nI was under the impression that Marko was designed to adhere to the _Rule of Least Power_. By promoting Jade, it's no longer adhering to that rule.\n\nSee also:\n- [We need less powerful languages](http://lukeplant.me.uk/blog/posts/less-powerful-languages/) by [Luke Plant](http://lukeplant.me.uk/)\n- [In Defense of Templates](https://www.youtube.com/watch?v=VY-r7Ac06ho&feature=youtu.be&t=498) (YouTube clip) by [Tom Dale](http://tomdale.net/)\n @patrick-steele-idem Isn't there more to Jade than that? Conditionals, extends, etc. Wouldn't Jade developers just end up demanding those more powerful features?\n I meant that by supporting the Jade syntax, you're going to open yourself up to demands for supporting the specific (less clean) Jade-forms of those and other features\u2014particularly as Jade becomes more complex over time. I don't know how this would be avoided. At some point, you know someone is going come along and demand more support for the Jade syntax to trigger those various features.\n\nAs in..\n\n> Hey Patrick, if would be great if the Jarko syntax could do XYZ just like in Jade.\n\nIt's a slippery slope. Where do Marko devs draw the line? Can I get a nickel for each such request? :)\n Just chiming in.. Please avoid overcomplicating marko at all costs, keep the core simple then allow extension if desired. I won't be using any of the html-like syntax anyway, in our environment the users specify mark-up over which we have no control, we will just be exposing widgets for them to hook into using attributes.\n For what it's worth, some opinionated Angular devs seemed to be\u00a0largely against the idea of using Jade in Angular. For starters, they say mixing the two syntaxes in Angular documentation, examples, and in templates is _way_ more confusing than the simplicity that the syntax is supposed to provide in the first place.\n\nSee: [What's the use of Jade or Handlebars when writing AngularJs apps](http://stackoverflow.com/questions/18174856/whats-the-use-of-jade-or-handlebars-when-writing-angularjs-apps)\n\n> **Q:** \"...As far as I can tell, it would make most sense to create the templates in Angular using proper HTML...The reason for this confusion is that a lot of the examples I find on GitHub make use of Jade, and it seems counter intuitive for me.\"\n> \n> **A:** Those who _unquestioningly_ favour Jade in an Angular environment fail to understand that view logic belongs on the client, and business logic on the server, just as the OP commented.\n> \n> _Don't do it unless you have a very good reason to do it_. In engineering, a system with fewer moving parts is a more reliable system, and a system where interface boundaries (client/server) are respected is more maintainable over the long term, so default to the simplest architecture and clean division of labour if possible. If you have overriding reasons, do what you must, but _caveat emptor_.\n> \n> Recently I reviewed some code where straight Angular templating would have done a far better job than mixing in Jade, just through maintaining simplicity.\n> \n> Aside from template extension, Jade brings nothing worthwhile to the table that Angular doesn't already supply. Let's be honest: Using the sound principle of \"favour composition over inheritance\" (i.e. partials), you shouldn't ever need template extensibility. Jade is hardly \"easier to parse\" than HTML. They are but _trivially_ different, while Jade adds another level of indirection - best avoided.\n> \n> There is one valid, specialised case for server-side templating: Optimisation, remembering that premature optimisation is generally a Bad Thing. Where performance is truly at issue, and you have the server capacity to spare to handle this, server side templating can assist. This applies to products like Twitter and Basecamp, where the cost of doing a lot of server side work is offset by the gains of reduced requests to the server.\n I just wanted to chime in on our team and experience with marko. We like marko and what it offers, but we were definitely _not_ a fan of the syntax when we started using it. I think it would be a much more enjoyable experience to have the concise syntax, as you are putting it.\n\nI also don't think it would be a slippery slope to supporting all jade features. The biggest gripe is that it is a pain to write in and look at, especially as files grow in size and complexity. That is why languages like jade and haml are so popular. I don't think I've used marko and ever thought \"this could use some more features from _x_ language\". I have thought, however, that the template looked cluttered and hard to read/scan. But then again, I've used haml and jade for years, so the HTML like syntax seems like a step backward to me.\n @patrick-steele-idem  :+1:  thanks for experimenting with real-world examples! Curious about the outcome.\n Here's the rub.. Less and Sass are similar abstractions of CSS. Yet, [neither abstraction is a core plugin of Lasso](https://github.com/lasso-js/lasso#available-plugins) despite the fact that every front-end developer will tell you that Less and Sass make CSS so much easier to manage. And it's not a problem since any developer can just install [lasso-sass](https://github.com/lasso-js/lasso-sass) or [lasso-less](https://github.com/lasso-js/lasso-less)....or [lasso-jade](https://github.com/lasso-js/lasso-jade) (for JS) if they prefer.\n\nSo, why would Jade for Marko be any different? Why not just make it a third-party plugin? (If it becomes crazy popular, then maybe one day it becomes a core plugin).\n\nIf Jade were a core feature (never mind it's an added layer of architecture to maintain), then the question is where does that leave all the documentation, tutorials and shared examples? Do you have a competing ecosystem of documentation?\n\n> I'm starting to feel that the concise syntax is something that can grow on you, but that most people (me included) initially dislike it\n\nI think this is probably the key point here, if anything. Anything distasteful will grow on you, eventually. Jade is being added to make Marko more accessible _to the Jade crowd_.\n\nBut, by making it a core feature, the risk is perhaps making Marko initially disliked by the majority of non-Jade users, which would be counterproductive. I suppose Jade could be generally avoided in the documentation, but then what's the point of having it be a core feature in the first place?\n\nIf the only reason for adding Jade-like syntax is to appease the population of Jade developers, then that implies that Jade would make a very good non-core plugin. Wouldn't that make everyone happy? People who want Jade can easily install the plugin and people who don't just follow the documentation and the HTML they are familiar with (without the mysterious `.` before lines of text to turn off the seemingly non-essential Jade syntax).\n\nIf the Jade-like syntax were the _de facto_ syntax, then that would imply that the documentation, tutorials and shared examples would all be in the Jade-like syntax or some confusing mixture of the two. But, of course, doing so would turn off all the people who dislike Jade at first glance (yourself included). Is it worth it to make it a core feature then? I dunno. Seems like a third-party plugin to me, just like [Less or Sass is for Lasso](https://github.com/lasso-js/lasso#available-plugins).\n @danrichman I like that idea. If templating syntax can be abstracted out into a plugin, then marko could ship with the `html-syntax` plugin by default. Developers could install `jade-syntax` which would be responsible for its own documentation and maintenance. Plus, there is some room to experiment with new syntaxes in the future.\n\nEventually you need to consider what plugins should be moved to core, but it seems like we're pretty far from that point right now.\n Seems like it could be risky to get married to a particular syntax in the core when, for all we know, a more popular or easier abbreviated HTML syntax might come along 2 or 3 years from now and make Jade obsolete. For instance, [some people prefer Slim syntax over Jade](http://vschart.com/compare/slim-lang/vs/jade-template-engin) because [Slim is less cryptic](http://slim-lang.com). By making Jade core, nobody gets to use Slim.\n\nIn 2006 Sass was the ultimate CSS abstraction. But then Less was released in 2009 and of course now there is a choice between the two and people [have their opinions about each language](https://css-tricks.com/sass-vs-less/)\u2014even though they are nearly identical in almost every way and their syntaxes are only trivially different from CSS. \n\n@patrick-steele-idem maybe there's a way to keep it more separated within projects. Could there be a flag at the top of individual templates to enable such an optional Jade-like syntax, for those who want it? Or is it just all or none?\n Very sorry to be such a downer here :smile: but thought of another issue.\n\nThe tendency to mix Marko syntax within a large company, like eBay, could add significant risk.\n\nSince Jade is an _individual_ preference, this can cause issues to develop over time within a large team or organization using Marko. For instance, someone in one area of a large team or company (say eBay) prefers Jade and then they leave the company or go on vacation. A non-Jade employee\u2014perhaps even days, months or even years later\u2014might have to jump into those Jade files at any given time and be able to quickly troubleshoot them. A critical fix that should've taken minutes to troubleshoot ends up dragging out into far longer (perhaps hours) because the next employee to open up the files isn't familiar with the Jade syntax and can't get the complex files to build properly. In that case, the benefit of saving a few keystrokes became a liability for that company. It's a barrier to code completion, for a templating language that was intended to tear down barriers.\n\nActually, the same is true even within a small team, but if it's risky to mix a template syntaxes within a large company then one solution is to force all eBay developers to learn and use Jade in all of the codebase and documentation. But then the idea of it being optional would be an illusion.\n\nAs teams then attempt to avoid those inconsistencies and inevitably make team-wide standardizations to Jade, it ends up being a distasteful barrier to entry (newcomers and new hires getting up to speed, for instance) as well code sharing and information sharing. It promotes a lack of standardization because the standard _would actually be Jade_ with documentation, tutorials and examples pretending it's HTML. \n\nAs an aside, I went to the [Jade playground](http://jade-lang.com) and tried pasting in a chunk of deeply nested/indented HTML code and I still can't get it to render the same HTML using their `.` or `|` syntax. Can we see an example of a chunk of nested HTML-preserving Jade? My initial experience suggests that this move to Jade may lead to _lower_ adoption rates once people realize that Marko v3 is really Jade disguised as HTML. I would point out that even Jade contributors [admit that Jade often makes a bad first impression](http://webapplog.com/jade/).\n > The tendency to mix Marko syntax within a large company, like eBay, could add significant risk.\n\n@danrichman Agreed, but to use an earlier example, I think no more risk than an online newspaper using Markdown to collaborate on articles. One tech savvy journalist could start off by using HTML to draft the document with, while another journalist with no HTML experience could come along and feel inclined to either a) use HTML also, or b) use Markdown and we end up with a psuedo document.\n\nEither way, this I think the arguments currently being presented are _internal_ issues and beyond the scope of what Marko should have to consider.\n\n> Jade is being added to make Marko more accessible to the Jade crowd.\n\nThere also seems to be a general misconception (I think) that the Marko Concise option is being added purely for Jade user's. I think that's wrong. I hate Jade, but I feel as if I would at least give the concise option a legitimate chance - maybe even using it often in cases where I need to draft HTML quickly (in front of a client, or scaffolding for instance).\n\nIf we add this, _I think_ it has to be shipped together under the same file name and no additional plugins required.\n @adammcarth Well, if a journalist messes up a Markdown tag, the worst thing that happens is the text looks a little funny\u2014it's one of the features of Markdown (looks publishable as-is, as plain text, without looking like it\u2019s been marked up with tags or formatting instructions) and the CMS prevents them from doing any real damage to the site. If you mess up the Jarko syntax, the code fails.\n\nMarkdown isn't cryptic like Jade is. Markdown is purposefully readable as is. Jade's cryptic syntax is [why some people prefer Slim over Jade](http://slim-lang.com/about.html).\n\nTechnically, the Markdown comparison is the opposite of what's being proposed here with Jade. When mixing Markdown and HTML, you have to _opt-in_ to Markdown. You write standard HTML and if you want to use Markdown, you just start using the Markdown tags and enable a Markdown attribute. Easy peasy. Markdown doesn't interfere with your ability to write HTML. That really does make everyone happy.\n\nFor example...\n\n```\n# Heading 1\n\n<div class=\"something\" markdown=\"1\">\n  ## Heading 2\n  Some **bold** text. Some <em>emphasis</em>.\n  <div class=\"something-else\">\n    This is easy. I don't have to change my habits.\n  </div>\n</div>\n```\n\nThe `markdown=\"1\"` attribute is how you _opt-in_ to Markdown when you want to use Markdown tags within an HTML tag. Everything is treated as plain text if you forget that attribute. **HTML is a first-class citizen in Markdown**.\n\nWith Jade, it's the other way around. Should you want to indent your HTML or plain text, you'll need to _opt-out_ of Jade.\n\nFor example...\n\n```\n.  <div class=\"something\">\n.    <h2>Heading 2</h2>\n.    Some <b>bold</b> text. Some <em>emphasis</em>.\n.    <div class=\"something-else\">\n.      Why do I have to put\n.      periods everywhere?\n.    </div>\n.  </div>\n```\n\nIf you want to wrap that chunk of indented HTML with a Jade-generated `<div></div>` tag, you have to indent your periods like this.\n\n```\n#container.col\n .  <div class=\"something\">\n .    <h2>Heading 2</h2>\n .    Some <b>bold</b> text. Some <em>emphasis</em>.\n .    <div class=\"something-else\">\n .      Why do I have to put\n .      periods everywhere?\n .    </div>\n .  </div>\n```\n\nFeels almost like we're being punished for using HTML.\n @patrick-steele-idem Whew. Yes! That does look good. Sorry, I was really getting worried after trying to paste HTML into the [Jade playground](http://jade-lang.com) and coming up with nothing but errors. :sweat_drops: \n\nHowever, to allay further fears, can you show us how the top pure HTML would look if someone should choose to wrap it in a Jade-generated `<div>` tag, like `#another-div`?\n\nWould the periods be necessary then?\n\nThe reason I ask is because just like a mixed HTML/Markdown example, someone may want to come along and insert HTML inside someone's `#another-div` Jade tag. And I don't understand how they could allow Jade to wrap their chunk of nested HTML without using periods. Thanks so much.\n @patrick-steele-idem Fantastic. I don't know how you did it, but you've managed to create something _way better_ than Jade. Awesome job.\n\nOk. I'm on board. :+1:\n\nSorry for all the frenetic comments above. I had mistakenly gotten the impression that we were bastardizing HTML. Clearly that's not the case. I'm impressed.\n\nThe real beauty of your example is that it actually allows people to slowly dip their toe into the concise syntax\u2014it's the best of both worlds. I can start with a single line and wrap all my HTML with it. And then I can use that single line to tip-toe into another line, and another if I please.. and so on. It\u2019s really hard to dive into the whole Jade syntax at once. But you\u2019ve managed to make it seemingly painless. \n\n> If we get this right then I see no reason why anyone would want to use Jade.\n\nYup. Completely agree. This looks awesome. Carry on.\n  Current template:\n\n``` javascript\n<if test=\"Array.isArray(data.author) and data.author.length ne 1\">\n    <if test=\"data.author.length == 1\">\n        <dc:creator id=\"creator\">${data.author}</dc:creator>\n        <meta refines=\"#creator\" property=\"role\" scheme=\"marc:relators\">aut</meta>\n    </if>\n    <else>\n        <for each=\"author in data.author\" status-var=\"loop\">\n            <dc:creator id=\"creator${loop.getIndex()+1}\">${author}</dc:creator>\n            <meta refines=\"#creator${loop.getIndex()+1}\" property=\"role\" scheme=\"marc:relators\">aut</meta>\n            <meta refines=\"#creator${loop.getIndex()+1}\" property=\"display-seq\">${loop.getIndex()+1}</meta>\n        </for>\n    </else>\n</if>\n<else>\n    author is not array.\n</else>\n```\n\nThis object is being passed into the template:\n\n``` javascript\n{author: ['Author One', 'Author Two', 'Author Two', 'Author Two']}\n```\n\nOutput:\n\n``` xml\n<dc:creator id=\"creator1\">Author One</dc:creator><meta refines=\"#creator1\" property=\"role\" scheme=\"marc:relators\">aut <meta refines=\"#creator1\" property=\"display-seq\">1<dc:creator id=\"creator2\">Author Two</dc:creator><meta refines=\"#creator2\" property=\"role\" scheme=\"marc:relators\">aut <meta refines=\"#creator2\" property=\"display-seq\">2<dc:creator id=\"creator3\">Author Two</dc:creator><meta refines=\"#creator3\" property=\"role\" scheme=\"marc:relators\">aut <meta refines=\"#creator3\" property=\"display-seq\">3<dc:creator id=\"creator4\">Author Two</dc:creator><meta refines=\"#creator4\" property=\"role\" scheme=\"marc:relators\">aut <meta refines=\"#creator4\" property=\"display-seq\">4\n\n```\n\nThe `</meta>` closing tags are not appearing, what is Marko doing?\n It completely slipped my mind that I was expecting XML, I'm quite used to template engines supporting both HTML and XML.\n\nChanging the extension completely breaks the code (`<if>` and `<for>` tested so far, all breaking)\n\n``` javascript\ntest.marko.xml:1\n(function (exports, require, module, __filename, __dirname) { <if test=\"Array.isArray(data.author) and data.author.length ne 1\">\n                                                              ^\n\nSyntaxError: Unexpected token <\n    at exports.runInThisContext (vm.js:53:16)\n    at Module._compile (module.js:373:25)\n    at Object.Module._extensions..js (module.js:404:10)\n    at Module.load (module.js:343:32)\n    at Function.Module._load (module.js:300:12)\n    at Module.require (module.js:353:17)\n    at require (internal/module.js:12:17)\n    at Object.<anonymous> (/home/george/coding/marko-playground/index.js:8:16)\n    at Module._compile (module.js:397:26)\n    at Object.Module._extensions..js (module.js:404:10)\n\n```\n Bump for those who still faces this problem...\n\nFor me things start to work when I do\n\n```\nrequire('marko/node-require').install({ extension: '.xml' })\n```\n\nMy guess is that internally `require('some.marko.xml')` looks for loader associated with '.xml', which is more in line with `require('path').extname('some.marko.xml')`\n\n#363 adresses an issue with xml and `marko/hot-reload`.\n  It seems like http://markojs.com/docs/marko/get-started needs some improvement.\n\nAngular 2's use of file name labels on their code samples is helpful here: https://angular.io/docs/ts/latest/quickstart.html  You see this a lot throughout the community.   It's a nice way to help people get their head around the setup process quickly so they can get down to learning the syntax and API and also building something.\n  I need it, so I believe I can implement this feature.\nI can make fork, pull test, develop  & pull request.\n\nBefore I am going deeply in the source code, can you give me some direction where you think is the best place to implement it? (links to files&lines&functions will be appreciated) \n I prefer sandbox via vm or vm2 (https://github.com/patriksimek/vm2).\nRegular VM, of node can make the entire process not responding `while (true) {}`.\n static code analysis never can be perfect, and in case of break, it is a backdoor to entire server. That why we must choose sandbox:\nhttps://nodejs.org/api/vm.html\nhttps://github.com/patriksimek/vm2\n We only talking about server side. web worker, is mostly for client side. \n Out-of-process will make all global variables not works. It is break-change. Can we do that kind of break change to Marko?\n Just to clarify. For securing client side, all we need to do is use XSS library. (https://www.npmjs.com/package/xss). We are only talking about securing server side code executing\n I believe that to not break current code using global variables, we have to add it as an option.\nMaybe like this:\n\n```\nrequire('marko').load(src,{secure:true})\n```\n\nhttp://markojs.com/docs/marko/javascript-api/#loadtemplatepath-templatesrc-options--template\n The problem is that maybe there are user that now using templates, that running insecure code, but this is what they want. We cannot make break change to community project.\n we can simply use child_process.spawn (or fork), and send data between the process.\n\nA question There is any timeout for async function loading in Marko? \nWe don't want that a template that contain a infinite loop, will work forever.\n @patrick-steele-idem . That what I mean it will be opt-in only\n So, we have to add timeout, (default: 1 min)\n\n```\nrequire('marko').load(src,{secure:/* true/false  */, timeout: /*in ms*/ }\n```\n Maybe the timeout need to be in the render function (not at template loading time)\n It is supported for vm2. \n`options={timeout:1000}`\n Maybe it is possible to add modules to VM2 context using the sandbox option, instead of requiring it:\n\n```\nsandbox={marko: require('...'), `marko-async`:require('marko-async')}\n```\n\nWhat do you think/\n For timeout, You can do\n\n```\nvm.call('setTimeout(function(){process.exit()},60000)')\n```\n\nIt will stop the vm, after 1 minute\n Anyway Maybe it be easier to implement it simply, using `child_process.spawn` that run native vm module.\n\nand not be depended on other modules. vm2 not giving as so much.\n\nI think, that child_process can give us, secure way of running things, and vm module, can give as \"javascript from text \" compiler.\n\nIn short:\n1. We will create a short JS file, that render templates in native vm.\n2. We will run this js file as spawned process.\n  Maybe try add the creator of vm2, to the conversion...\n The problem is, that today, I can use helper, with extenal data.\n\nvar y=3\ntemplateDat={\nmy_helper:function (x) {return x*y}\n}\n\nIf we use vm2, or out-of-process rendering, the `y` variable will not available.\n  So, there is any solution how to to stop vm2, in case of infinite loop\n  I think a folder within `node_modules` is a very sound place to compile templates to _by default_. Reference the full path to a compiled file if an error occurs, and the person can easily navigate their way to the destination for further inspection.\n\nI know it's awesome and cool to see the Javascript that is compiled from `.marko` syntax files, but I stand by my opinion that they serve quite literally no real purpose besides debugging and, for a lack of a better term, pure self-interest in how Marko works. In either case, at no point should these files need to be visible in a project. You don't edit or make changes to compiled Marko files, and they shouldn't ever need to be included in version control.\n\nThe `node_modules` folder ticks as a solution to all these boxes. PLUS the fact it's already checked out of version control in 99% of projects means compiled files are hidden straight away, instead of realising down the track and needing to add line(s) to your `.gitignore` file.\n Hey @patrick-steele-idem! Sorry I missed your reply to this :(. Better now than never though, I guess.\n\nHmmmm. That's a tricky one. In regards to your second use case, I still stand by the fact that even if you did decide to delete your original Marko templates as some kind of release process - you'd probably be doing more harm than good. Unless you have some incredibly unique situation where storage space is an issue, what would deleting the originals and keeping the compiled achieve? You'd have compiled Marko templates that would serve literally no purpose to anyone except the process workers, right? I guess if it was part of some kind of testing environment I could see the use for that though. That kind of makes sense, but I don't see any real advantage of that over the files being in a seperate directory.\n\nAs for not using the `node_modules` folder - I think that's a fair enough reservation to have. Something like `.mark-compiled` would work well, if you were going to go down the whole, _compiling-to-a-different-directory_ path.\n\nLet me know what you decide on anyway. Glad to see v3 is gradually getting rolled out, keep up the good work mate :+1: \n It would be very nice to be able to supply an alternate directory. It could be the case that the user running the application doesn't have write permissions to `node_modules`, but does have write permissions elsewhere.\n +1 for `.marko-compiled` (or `.marko-cache`) on the root, in a similar way as Sass does.\n The compiled template location is handled on lines `38` and `92` of `node-require.js`: . Right now they just append '.js' to the end of the source template's filename. I've hacked on my local copy a bit and added new compiler options for defining the source and cache directories, and it works perfectly under ideal circumstances.\n\nThe problems I'm looking at now are ensuring that the requested template is actually _below_ the given source directory (which I suppose could be handled by throwing an error if `path.relative(<src-dir>, <filename>).startsWith('..')`) and that the target cache directory exists before trying to write to it (ideally without too much extra code or pulling in another dependency like `mkdirp`). I'll try to poke at this a bit more tomorrow if I get the chance, but I'm running out of time for today.\n\nEDIT:\nThe reason for worrying about the path relative to the source directory is that otherwise it just dumps everything in the same place, which is fine until you start having name collisions. The only other option I can think of would be naming the files by some kind of unique hash, but that would make debugging a nightmare.\n It seems this isn't quite as simple as I'd thought. After posting I noticed the comment above about it only storing in the alternate location for reference purposes, and it seems that is what's happening. It also doesn't seem to affect layouts. I'll still try to poke at this a bit when I get the chance, but disregard my previous post as premature optimism.\n I did some more digging and found that `node-require.js` isn't the only place that is hard-coded to simply append '.js' to the source filename. I'm seeing 3 more such lines in `runtime/loader/index.js`. Fortunately the line always seems to be basically the same thing, `var targetFile = templatePath + '.js';`, sometimes with different variable names. I'll keep poking at this whenever I get the chance.\n\nIn the meantime, regardless of the solution, we'll still need to ensure that the target directory exists. My first idea was to use the `mkdirp` module, but that would mean adding another dependency. Any thoughts or suggestions?\n I tested every scenario I could think of, and it _appears_ to work perfectly except for two things:\n1.) I got a \"Cannot find module\" error when trying to use a component, though that's _probably_ the result of my being lazy and hard-coding some of it just to see if this was even viable.\n2.) I _think_ with the current setup, if the source template has been deleted, moved, or renamed, it falls back to require()'s built-in behavior of attempting to append '.js' to the end of the filename. This is probably an easy fix.\n\nTo anyone who would like to put my research into practice:\n\nStep 1: Edit lines `38` and `92` of `node-require.js`, and lines `55`, `82`, and `92` of `runtime/loader/index.js`(marko v3.10.1); They should all look something like `var targetFile = templatePath + '.js';`. You'll want to modify them to point to wherever you want the compiled templates to be cached (+1 to the previous suggestion of using `.cache/marko` by default). You could probably implement a new compiler option for users to specify the source and cache directory paths, both modules already have access to markoCompiler.defaultOptions.\n\nStep 2: Ensure valid file paths; All sources should be below `src/`, all compiled templates should be below `.cache/marko/`, and the target directory should exist before attempting to write to it - for example, `.cache/marko/layouts/main/` must exist before attempting to write `.cache/marko/layouts/main/layout.marko.js` - ideally without adding too much extra code or another dependency.\n\nStep 3: Make sure components work correctly. The error I saw may just have been a fluke, or it may be a quirk in how components are loaded as opposed to layouts (which did work correctly for me).\n\nStep 4 (optional): Modify the require() extension to check for an existing compiled version of the requested template even if it can't find the source file.\n\nI apologize for the length and number of my posts. I'm not sure if or when I'll get around to forking or initiating a pull request, so I want to make sure that if anyone wants to finish what I've started they'll have as much information as possible.\n   Working great! Thanks. Do you know off-top if there are any other places that scan node_modules where this check would be necessary?\n  Hi,\nJust to let you know there seems to be a problem with npm installing dependencies for the 'marko' package (in particular I noticed marko-layout wasn't being installed). I made sure 'marko-layout' wasn't installed in the main projects package.json file. Tries a clean uninstall of all npm packages, npm cache clean, and then install and still no joy. I think it is linked to the version on npm.\nI managed to resolve this by 'cd' into node_modules/marko and running npm install there.\n\nHope it helps someone.\n Thanks this solved it. Was pulling my hair out. Would be good to get this in the marko docs, maybe in a section about moving an app to production. \nWhat I actually did was stop grunt from copying the 'template.marko.js' files to the build so they were generated again on the server. Is that a suitable way of doing it?\n  I have a marko tag with the following marko-tag.json:\n\n```\n{\n    \"@class\" : \"string\",\n    \"@items <item>[]\": {\n        \"@wallpaper <wallpaper>\": {\n            \"@class\": \"string\"\n        },\n        \"@panel <panel>\": {\n            \"@class\": \"string\"\n        },\n        \"@someProp\": \"string\"\n    }\n}\n```\n\nAnd the following index.js:\n\n```\nmodule.exports = require('marko-widgets').defineComponent({\n    template: require('./template.marko.html'),\n    getTemplateData: function(state, input) {\n        input.items = input.items || [];\n        var items = [];\n\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n\n            var wallpaper = (item.wallpaper || {renderBody:''}).renderBody;\n            var panel = (item.panel || {renderBody:''}).renderBody;\n            var someProp = item.someProp || 'default';\n\n            items.push({\n                wallpaper: wallpaper,\n                panel: panel,\n                someProp: someProp\n            });\n        }\n        return {\n            items: items\n        };\n    }\n});\n```\n\nAttempting to use it in the following way doesn't seem to work:\n\n```\n<img-carousel>\n  <img-carousel.item someProp=\"someValue\" for=\"item in data.items\">\n    <img-carousel.item.wallpaper>\n      <img alt=\"${item.img.alt}\" src=\"${item.img.src}\">\n    </img-carousel.item.wallpaper>\n    <img-carousel.item.panel>\n      <p if=\"item.text\">$!{item.text}</p>\n    </img-carousel.item.panel>\n  </img-carousel.item>\n</img-carousel>\n```\n  Hey all.\n\nSo at the present, Marko doesn't have a uniform way of defining configuration options when first initializing the library in your project. For example, setting the `writeToDisk` option (which prevents templates from compiling to the file system) is achieved with:\n\n``` javascript\n// Current configuration method\nrequire(\"marko/compiler\").defaultOptions.writeToDisk = false; // what if more config options arise?\nrequire(\"marko/node-require\").install();\n```\n\nIt works for now, but it's not ideal - particularly with the future in mind where configuration could play a bigger role with Marko. Here are some alternatives for defining configuration that have been suggested so far...\n#### 01. Configuration File\n\nThis solution is probably the most promising on this list. Essentially, the idea is that you can create a file in the base directory of your project that Marko will read and pull configuration options from. A potential name for the file might be `.markoc` (a hidden file, standing for 'marko config')...\n\n``` javascript\n{\n    \"writeToDisk\": false,\n    ...\n}\n```\n\nOne debate that does arise from this is whether your _Marko Tag Lib_ should also be defined here with the compiler configuration, or if it should still be kept in a seperate `marko-taglib.json`. My personal opinion is that all Marko configuration should be defined from a central place to make life easier, but the argument for keeping the `marko-taglib.json` seperate from compiler configuration is that it's less complex. My question to that response is, how often do we intend to add/update component directories? If it's very infrequently (as I suspect), then I just don't see why it needs its own file. Just my $0.02 on the matter though. Please share your own thoughts.\n#### 02. Pass Configuration Block To Installer\n\nAn idea I had was to potentially pass in a configuration object when Marko is required...\n\n``` javascript\n// Example\nrequire(\"marko/node-require\").install({\n    writeToDisk: false,\n    ...\n});\n```\n\nIt's certainly a more traditional solution, but this approach is not ideal given the way the Marko runtime is loaded by Node.js so this one is not recommended.\n#### 03. ???\n\nIf you've got any ideas or suggestions for alternative ways that configuration could be defined for Marko, please share it with us below. I think it's important that we have this discussion now so that more default configuration options can be introduced by the community down the track. If we can agree on a standard now, we can start exploring other potential config for Marko. Please share any thoughts you have :)\n I agree with @philidem. I think a centralised configuration file in the project root for all default Marko settings, and the name `marko.json` gets my vote so far. Good point about the potential hidden file issue with Unix based systems.\n\nDo you want to elaborate more on why you would want to keep the Marko Taglib seperate @patrick-steele-idem?\n I would prefer being able to pass a configuration object into some sort of `require('marko').config()` method. I don't like the idea of messing with Node's `require` function, so I don't use `marko/node-require`. I use `marko.load()` for loading templates.\n\nI normally write my applications to look for an application specific configuration file, or have one fed to it. The application then uses the properties of that configuration file to initialize any modules it uses that could potentially need some configuring. I don't really want to edit multiple configuration files for one application.\n My statement about the require patching was in response to idea 2 in the original post. It proposes passing the configuration in during the install of the require patch. I was merely pointing out that not everyone uses that aspect of Marko. I understand that it is a convenience method, and that Marko is really just compiling the HTML based language into JS. It doesn't matter to me if Babel or other things also patch the require method -- I don't use any of them.\n  Hey team.\n\nAre there any plans on the roadmap for an Express JS rendering plugin for Marko? Currently we render templates with...\n\n``` javascript\nrequire(\"marko/node-require\").install();\nvar app = require(\"express\")();\nvar template = require(\"./hello.marko\");\n\napp.get(\"/hello\", function(req, res) {\n    template.render({\n        name: \"Adam\",\n        fruits: [\"Apples\", \"Oranges\", \"Grapes\"]\n    }, res);\n});\n```\n\nBut what about a plugin that leverages Express's built-in render helper?:\n\n``` javascript\nvar app = require(\"express\")();\n\nvar Marko = require(\"marko-express\"); // example lib name\napp.engine(\"marko\", Marko({ fabulous: \"options\" }));\napp.set(\"view engine\", \"marko\");\n\napp.get(\"/hello\", function(req, res) {\n    res.render(\"hello\", {\n        name: \"Adam\",\n        fruits: [\"Apples\", \"Oranges\", \"Grapes\"]\n    });\n});\n```\n\nIs something like this on the cards, or did you avoid it because of performance reasons/Marko best practices or something? I guess one of the advantages of initializing Marko as an express app engine (like above) is that  you can pass options to Marko, such as `writeToDisk`, in a far nicer way than currently available. It also means we can set a base directory to reference `.marko` templates relative from, and not need to have an extra line to load the template into a variable before rendering content.\n Thanks for the response @patrick-steele-idem. That blog post you wrote pretty much cleared everything up for me - seems like using the built-in express renderer can indeed be quite harmful in some cases.\n\nI'm interested in making my apps more modular. I like the structure you use for basic apps...\n- pages/\n  - home/\n    - index.js\n    - style.css\n    - template.marko\n  - login/\n    - index.js\n    - style.css\n    - template.marko\n\n...but I'm wondering how that idea gets applied, to, say - a blog post? Would you opt for something like?:\n- pages/\n  - posts/\n  - post_show/\n  - post_edit/\n  - post_update/\n\nJust trying to get the Marko concepts down-pat. Thanks for all your help :)\n Cheers mate, wonderful.\n  @patrick-steele-idem Is it possible to add js and less file to the components/taglibs? \n\nI've tried `<lasso-page name=\"hello\" package-path=\"./browser.json\"/>` and someway similar to it, I found that only one `lasso-page` tag would be work. \n\nis that a possible way to get `lasso` and `marko taglib` working together to support the dependencies which would be required by the component/taglib itself?\n @patrick-steele-idem sure\n  Would be useful to be able to tell from reading the first paragraph of the readme whether mark is server, client side or both. I guess it's both, but if it was mentioned I would feel more confident trying marko out\n Excellent - thanks. So far, after 1 evening, I'm a big marko fan - the most comprehensible compiled templates I've ever come across - great for debugging\n  Given this template\n\n``` html\n<p>Author ${data.author.name}</p>\n```\n\nthis data:\n\n``` js\ntemplate.render({});\n```\n\nI get this error\n\n```\n      escapeXml(data.author.name) +\n                           ^\nTypeError: Cannot read property 'name' of undefined\n```\n\nIs this normal behavior ? Does marko handle properties on undefined paths or am I missing something ?\n thanks @patrick-steele-idem that's what I did (lodash).\n\nOn the other hand, wouldn't it be interesting to have that handled by marko ? It seems most template engines have such a feature. \n I see what you mean.\n\nAs for offering  `get` as builtin helper, one can use lodash as you suggested. May be it's good to keep the library as slim as possible by not providing extra features, until there's sufficient demand for it by the community?\n   Hey @patrick-steele-idem, I see, absolutely!\nThank you for brilliant template engine and very interesting test harness created for it.\n  Excuse me, I'm newbie to marko. I'v tried the hello-world example on koa.js with a stream via pipe proccess.stdout. So first time in template all was OK written as must to be. Via console terminal all was also fine, it's work but when I opened the file next morning I'v seen that marko engin rewrite the file of  his own way with helper's javascript functions, but my  Hallo ${data.name}!   is gone, simple disapeared. What I'v wrong made? Or all that features must be by default?\n\n``` javascript\nvar fs=require('fs')\nvar  duf=''\nrequire('marko/node-require').install();\n//two ways at once\n//first way:\nvar template=require('./views/hello-world.marko');\ntemplate.render({name:\"Bob\",colors:[\"yellow\",\"red\",\"brown\"]},function(err,output){\n    if(err) console.log('error :',err);\n    console.log('output :',output)\n})\n//2th way:\nvar das=template.stream({name:\"bobika\"});\ndas.on('end',function(){console.log('\\nDAS END DAS END!!! ON END!!\\n')})\ndas.once('end',()=>console.log('\\nDAS Once END ONCE END!!!\\n'))\ndas.on('finish',()=>console.log('\\r\\nDAS ON FINISH!!!\\n'))\ndas.on('error',(e)=> console.log('\\n DAS ERROR!!!! :',e))\ndas.on('data',(c)=> console.log('DATA!!! :',c.toString()))\ndas.on('readable',()=> {var buf;while((buf=das.read())!==null){\n    duf+=buf;console.log(\"\\nBUF :\",duf)}})\nvar sis=process.stdin;\nvar sisout=process.stdout;\nprocess.stdout.on('error',process.exit);\nprocess.stdout.on('exit',function(){console.log('ended')})\nsis.pipe(das).pipe(sisout);\n```\n\n---\n\nand here my hallo-world.marko in the morning:\n\n``` javascript\nfunction create(__helpers) {\n  var str = __helpers.s,\n      empty = __helpers.e,\n      notEmpty = __helpers.ne,\n      escapeXml = __helpers.x,\n      forEach = __helpers.f,\n      escapeXmlAttr = __helpers.xa;\n\n  return function render(data, out) {\n    out.w(' hello ' +\n      escapeXml(data.name) +\n      '! ');\n\n    if (notEmpty(data.colors)) {\n      out.w('<ul>');\n\n      forEach(data.colors, function(color) {\n        out.w('<li style=\"color: ' +\n          escapeXmlAttr(color) +\n          '\">' +\n          escapeXml(color) +\n          '</li>');\n      });\n\n      out.w('</ul>');\n    }\n    else {\n      out.w('<div>no colors!</div>');\n    }\n\n    out.w(escapeXml(data.bazar) +\n      '<b>simka: </b>' +\n      str(data.simka));\n  };\n}\n(module.exports = require(\"marko\").c(__filename)).c(create);\n```\n In the file hierarchie must be two files? One for hello-world. marko and one compiled  hello-world.js???\nis that by default? Hmm. The server must be restart to keep changes in the template file every time. So bad and slowly for a site developing. Is it true?\nIn docs about marko.js said nothing about that. About files structure and about server restarting.\n In a hello-world example for colors /li produces extra empty li pairs. Why? When you delete last /li, so ok. Is a bug?  I try in for=\"color in data.colors - 1\" produces NaN. Is there a way write data.colors.length?\n Only opening tags are modified for conditionals and looping???\n  Hi Patrick,\n\nWe are using Marko JS on our application. Below is the GitHub URL:\n\nhttps://github.corp.ebay.com/OCS-Dev/webforms/tree/rti\n\nOne of our component we provide dependency: \nhttps://github.corp.ebay.com/OCS-Dev/webforms/blob/rti/src/components/email-form/browser.json\n\n{\n  \"dependencies\": [\n    \"require: ./index\",\n    \"src/ds3/browser.json\",\n    \"src/third-party/jquery.js\",\n    \"require: src/components/call-me\",\n    \"require: src/components/submit-button\"\n  ]\n}\n\nRelative path is not getting resolved in On Windows environment(working expected on MAC though). I see below exception in browser console when I hit our page: \n\nhttp:/localhost:8080/email/compose/AQABAAAC0CtGM/B68cFDXP472Z5EMUy3itN2JRaj564KXegqAHIAcDOylgBccNyhrWzcCHXX8kyHd81d6zeVrAZ5NEj0cUgs9X3aPVuBb0a7nf45lhmYUUZQTFGsjCbg408mqCvMT4NheESGWhArH+yzWgabsk4+fav0SAH3OpnVL5D2FBxkkBKbKx/7aa/AmDwMgronfRfDBJQued354L337awe7pBXlXHA6BO7ThumDHPch6n6qwytqQ4oEnaKoCcCgYO/d+/5TjiCWbo3FhQNzjicgj1z6Zm7OX4RkbfY5nJpdixp3JJzaKLtmyxp24cLy1SY+8ckVqdOvEPfPJyspLxkixDHQXqRyEi7/vJ7dAhbPACJ8Msr6bfMxg+geA15ei7D0n+JY5sMnqm/IM7A7oH5hvmhs0p3DHRzLcNPNOB9ieI1Em0KpQaTzyLdP+7XKK9ExgVSkK+IRBrey6NXwf4gFo3KJsDkzKYUJ/qMZjZdsAwpxXmRTLbJzMx8CqxEVz54R/H6OQTOHHksx1Jnyq9UzuNw/1UVFa3NkdDvVnN/mHtBeMWrJmWBqpMhzAoXsgi5btfDRIj6TLSKDQP4/7h5diDcRtdIt3ZRsOl6KvabSx8X0HnAljzE0M7AzO2BK50+76RtzAor2mc4wqv/TYYfk5EOfoXTIP5Xu2i+oRDP8EnaYR2pM5jaJn8m4V8Iz3XHt1Cr7qEuCep4q0gKUtxIRrXSxoqYKzJtbjryfnEkNTDXVX2YirAyeOtITN1QJHtv/GPaE09NGCcxvuJz51fPkBpVWa9WS5YaYXo5px6svVnCXWt8ip+yhhDjA28Hgepjy9oqoMaexfKBtnecoOJp0+8/xJPWUT6RlZDnMMraDgCfqBfHtuVnl5kMbZbAmuWVKI2n+ddhg/GaT23NQ6IATuv3XoZ1KCJu9JKgIbo9ULEgb1fnQVnYmDWPuVXAA5qIDg==\n\nCannot find module \"..\\call-me\" from \"/src/components/email-form\"\n\nBasically the generated Marko.js file creates the dependencies like below: (template.marko.js) \n\n  ___call_me_index_js = __renderer(require(\"..\\call-me\")),\n      ___submit_button_index_js = __renderer(require(\"..\\submit-button\"));\n\nAny pointer would be helpful.\n\nThanks\nRajesh\n  Travis upgraded its infrastructure which allows CI tests to be ran in docker containers. The result is faster tests. \n\nTo use it you just have to specify `sudo: false` in the travis CI.\n @patrick-steele-idem which build? The only thing that I saw that has failed recently was a rebuild that triggered on my PR after it was merged (which failed because the git ref that PRs point to are deleted after merge). \n  It might not be as simple as this, but one can hope, right?\n\nThe purpose of this change is to allow this to be written in the renderer\n\n``` javascript\nmodule.exports.tag = { name: \"my-tag-name\" }\n```\n\nThat would result in the template being named to whatever was specified.\n So I'm looking for the proper location to place the renderer fixture that I use for the test. Should it just go in `test/fixtures/taglib`? Also, any preferred name for it?\n\n**Edit**: It seems like there are no tests for renaming tags through `marko-tag.json` either. This PR would likely be a good place to go ahead and add that test as well. \n I definitely still think it has value. I try to put as little as possible in `marko-taglib.json` or any `marko-tag.json`. With that being said I think basing it on the folder name that it's inside is a valid compromise. \n\nUltimately if you keep the ability to set it in the `marko-tag` I think this PR should happen. If not, then it likely shouldn't. \n\nIt's just nice to me:\n\n``` javascript\nexport default defineComponent({\n  name: 'gh-notification',\n  template,\n  ...\n});\n```\n Sounds good.\n  The below line is not working in marko5 and I have tested the `$(document).append()` in some other pages and It is working fine . I think Marko interrupt this append method. Kindly let me know If you have any idea about this issue.\n\nTesting append method:-\n\n``` javascript\n$(document).append($('<script>alert(\"\")</script>'));\n```\n\nIn js code:-\n\n``` javascript\n$(document).append($(response.inlineJs));\n```\n The below function loads the inline js in the page and it is wrapped with script tag.\nThe below code is inside widget.js file .\n\n``` javascript\nloadInlineJs: function(response) {\n        if (response && response.inlineJs) {\n            $(document).append($(response.inlineJs));\n        }\n    }\n```\n\neg:-\n\n``` javascript\n\n<script>(function(){})();</script>\n```\n\nIt was working fine with marko4 and It is not working with marko5.\n ![image](https://cloud.githubusercontent.com/assets/286382/10465666/e5b2df4e-71a4-11e5-8b5a-680a647ca947.png)\n  I want to use custom images in marko templates. But not able to find any documentation related this.\n Use just regular html tags \n\n`<img src=\"http://i.imgur.com/L7TM5P1.jpg\">`\n That's great and totally makes sense for local images.\n\nOn a side note for lasso-image - Would be also great if it would deliver webp images if the browser supports it. Conversion might be too expensive ... just an idea.\n  https://nodejs.org/api/globals.html#globals_require_extensions\n\nGiven that this method is deprecated, we might want to look into requiring .marko files differently. Maybe by handling compilation separately and then `require('template.marko.js')` instead?\n  Hi:\n\nI know that Marko \"avoids evil global variables and global helpers\", but I think I have a situation where they could be useful:\n\nI'm using Marko in a Koa app. This app uses koa-locale which provides two methods: `this.__(key)`, which looks for the translated text by key, and `this.__getLocale()` which returns the selected language from URL, cookie, HTTP header, sub-domain, etc. So, I have a layout like this one:\n\n```\n<!doctype html>\n<html lang=\"${out.global.__getLocale()}\">\n    <head>\n        <meta charset=\"utf-8\"/>\n        <meta content=\"width=device-width\" name=\"viewport\"/>\n        <link rel=\"stylesheet\" href=\"styles.css\"/>\n        <title>${out.global.title}</title>\n    </head>\n    <body>\n        <layout-placeholder name=\"content\"/>\n    </body>\n</html>\n```\n\nWith a view like:\n\n```\n<layout-use template=\"./boilerplate.marko\">\n    <layout-put into=\"content\">\n        <h1>${out.global.__('Welcome!')}</h1>\n    </layout-put>\n</layout-use>\n```\n\nAnd I use them as follow:\n\n```\nthis.response.body = require('../templates/index.marko').renderSync({\n    $global: {\n        __: this.__.bind(this),\n        __getLocale: this.__getLocale.bind(this),\n        title: this.__('Welcome!')\n    }\n})\n```\n\nOf course, I don't want to pass `this.__()` and `this.__getLocale()` in every router, so I'm wondering if there is a better way to accomplish this.\n Currently I'm using `.renderSync()` just because I'm learning Marko. I plan to start rendering to an HTTP response directly. In any case I think my problem is that koa-locale does its work automatically.\nIn the first case, if I understand well, you pass the complete output to a helper that replaces some text with its translated version. As far as I know I can't do that because `__(key)` only receives the key to be replaced.\n\nIn the second case you are referring to require a JavaScript module, aren't you?\n\n```\n<require module=\"./util\" var=\"util\" />\n```\n\nThe problem with that is that koa-locale receives the app instance as an argument and I don't see a way to do that inside a .marko file.\n\nThat's why I was wondering if there's is a a way to pass helpers to the compiled `__helpers` object, maybe before calling `.install()`.\n @patrick-steele-idem thanks for the transformer example!\n Hi again @patrick-steele-idem,\n\nThanks for your example, it makes things clearer, but you are still passing `i18n` to `$global` every time you render a template and that's why I'm trying to avoid because I'm pretty sure I will do that everywhere. Anyway I think it's just a minor drawback.\n Here must be some middleware for koa. Some thing like this:\nhttps://gist.github.com/Globik/d612dce121de3e1cd996\nFor a global access to this.state. Any use for every global dynamic stuff like configurable menus, rubricas, categories etc\n @patrick-steele-idem I like your proposal of `i18n-var` so I tried to move it into my `tags-dir` without success:\n\n`Error: Error while handling properties for /app/src/marko-taglib.json: Error while applying option of \"tags-dir\". Cause: Error: Invalid tag file: /app/src/components/i18n-var/marko-tag.json. Neither a renderer or a template was found for tag.`\n\nmarko-tag.json\n\n```\n{\n    \"@name\": \"identifier\",\n    \"transformer\": \"./transformer.js\"\n}\n```\n\nThis is the same definition [here](https://github.com/marko-js-samples/marko-koa-i18n/blob/master/src/marko-taglib.json#L3) - so shouldn't it work the same?\n Hi @patrick-steele-idem. Sorry for the delay and thanks for the input. Just for future reference in case someone has the same doubt: In the end I followed @Globik's advice. I have developed two projects using Koa and Marko in this way and I'm pretty happy with the result.\n  This should resolve issues with circular dependency rendering. Previously, whenever this function was called, it would throw an error because `typeof renderFunc` was always `undefined`. With this fix, `rendererFunc` will (in valid cases) be a function.\n  How do you envision this? I assume it would automatically\n1) transform if/else/for syntax in all files\n2) transform syntax for all custom tags\n2) remove attribute references in marko-taglib.json files\n4) delete marko-tag.json files\n\nAnything else?\n  Please review and merge :)\n Test pass locally :)\n Alright, will do :)\n Whenever I use expected and actual, I always end up in this strange situation:\n\n``` sh\n  1) render unless-else:\n     Unexpected output for \"/Users/kristianmandrup/repos/markoa/marko/test/fixtures/templates/unless-else/template.marko\":\nEXPECTED (/Users/kristianmandrup/repos/markoa/marko/test/fixtures/templates/unless-else/expected.html):\n---------\nB , A , A , <div>A</div>\n\n---------\nACTUAL (/Users/kristianmandrup/repos/markoa/marko/test/fixtures/templates/unless-else/actual.html):\n---------\nB , A , A , <div>A</div>\n```\n\nI even copy paste the actual into expected, and still the same error! Must be a whitespace issue?\n I also get this warning\n\n``` sh\n    \u2713 if-else\nWARN marko/runtime/helpers: data.invokeBody() deprecated. Use data.body instead. Error\n    at Object.data.invokeBody (/Users/kristianmandrup/repos/markoa/marko/runtime/helpers.js:326:89)\n    \u2713 include\n```\n\nFrom `include-nested-content.marko`\n\n```\n    <p>\n        ${data.invokeBody()} <!-- deprecated -->\n    </p>\n```\n Yup exactly! Using Atom, haha :P Thanks for the tip. Now it works ;)\nI recommend you enhance your string compare to trim trailing whitespace or at least have it as an option.\n Really, hmm... that was not my intention. Guess I made a Markdown error of some sort. \nI only inserted a few more examples in the relevant section. I'll fix that shortly.\n I just reviewed my changes and reverted what I think you call \"stylistic changes\". If you are still not happy, please edit as you like. I tried my best to improve the docs while keeping with the original intent and styling.\n  Marko + koa currently misbehaves due to errors thrown during template stream rendering are uncaught, leading to hard crashes of node.\n\nThe sample code below illustrates a very simplied setup, and this patch ensures that errors during template rendering are indeed picked up by the koa error handling system.\n\n```\n// Simplified koa usage\napp.use(function * () {\n  this.type = 'text/plain'\n  this.body = require('template.marko').stream({...})\n})\n\napp.on('error', function (err) {\n  log.error(err) \n})\n```\n\nThanks for an awesome piece of work. Marko+koa is my bread and butter...\n @patrick-steele-idem, I get your points regarding V8. \nThe more idiomatic use of `render()` works well with Koa too, as in\n\n```\napp.use(function * () {\n  template.render({...}, this.res)\n})  \n```\n\nA simple change for me and I accept that as an answer :)\n\nI think I have spotted an edge case here. Everything that goes down to Async-Writer/async-fragment seems to work super nice, It's just the initial synchronous invocation that needs some loving care. \nI'm still rather dependent on streams in some peculiar situations, so I will try to make a better PR respecting performance and also covering asynchronous situations.\n\nFeel free to discard this PR ;)\n  Would help clean up conditionals a lot :) \n\n`if='!loop.isLast()'` is kinda ugly and hard to notice those `!` exclamation marks.\n\n``` jade\n  for(each='item in data.list; status-var=loop\"' if='data.list')\n    ui-button(attrs='item')\n    div(class='or' if='data.or' data-text='$data.or' unless='loop.isLast()')\n```\n My PR has been merged! Thanks guys :)\n  I was wondering if it is possible to load custom functions or even set one or more globals, such as `lodash` or `underscore` before \"running\" all the custom tags, in order to make these globals available for tags to use if needed (load once, use anywhere). \n\nMust be a very common use case ;) \nThanks. \n\nIn my case, I would like the following to be generally available for many of my tags:\n\n``` js\nString.prototype.capitalizeFirst = function() {\n    return this.charAt(0).toUpperCase() + this.slice(1);\n}\n```\n Hi Patrick, thanks for your response. I was just curious if there was a way. Kind of like a base class or decorator for all renderers to leverage common functionality. So far I've been using `require` but can feel like duplication and I like to keep my prod code super slim and DRY. \nI guess I will just introduce a \"compile step\" of some sort to prepend or inject whatever code I want according to some global rules...\n  Per email thread:\n\nWe probably need to look into a better way to prevent the same taglib from being loaded multiple times, but currently the Marko compiler walks up the directory tree to find taglibs and will happily load the \"same\" taglib multiple times if it is found multiple times in the search path. The marko-widgets taglib being loaded multiple times is causing the same template to be transformed multiple times and that is resulting in unexpected behavior. De-duping taglibs by module name would solve the problem.\n +1 facing the same issue\n  Would really like if we had the ability to use the index on iteration somehow...\nHere using the imaginary `index='pos'` `for` attribute (default `index='index')\n\n``` jade\nui-grid(ui='inverted')\n  ui-row(ui='green' list='data.users.header')\n  for(each='item in data.users.list' index='pos')\n    ui-row(ui='silver' attrs='item' if='pos % 2 == 0')\n    ui-row(ui='blue' attrs='item' if='pos % 2 == 1')\n```\n Sweet :) Learning every day...\n  to allow for dynamic runtime tag name transformation :)\n\nThis will enable my https://github.com/kristianmandrup/marko-dynamic-tag to work :)\nAnd loads of other powerful use cases...!!!\n Awesome :) I sure don't mind!!!\n Would it also be possible to dynamically decide which component (function I assume) to call using a similar approach?\n BTW: On the PR, all the tests passed on my local machine running `mocha`, so I was surprised to see it fail on Travis CI. \n Exactly what I was thinking!!! :)\n In my scenario I would have an incoming list with varying types of data (ie. some attributes undefined)...\nDepending on the data I what to render an appropriate tag, such as icon-item if it has an icon, link-item if there is a link and so on. Of course I could have a \"catch all\" item, but it would have to contain loads of conditional logic... the dynamic tag would come in very handy to make for a more elegant solution :)\nCheers!\n An example:\n\nHere I decide whether to render a checkbox as a `toggle`, `slider`, or a normal `checkbox`. \nNot very elegant, but gets the work done :P\n\n``` jade\nui-toggle(attrs='data' if='data.toggle')\nui-slider(attrs='data' if='data.slider')\ndiv(class='$data.field field' body-only-if='!data.field' if='data.default')\n  div(class='ui $data.ui checkbox' body-only-if='!data.ui')\n    input.hidden(type='checkbox' name='$data.name' checked='$data.checked' tabindex='$data.tab')\n    label(if='data.label') $data.label\n```\n Sweet :) Thanks for the tip. Didn't even know you could do complex conditional logic inline like that :)\nI agree, those tasks are way more important for now than these obscure bonus features!!!\nGood job :) Looking better every day and every week :D\n  I have the following template\n\n``` html\n<div class=\"ui list\">\n  <for each=\"item in data.list\">\n    $item.ui\n    <icon-item attrs=\"item\">\n      <div tag-body=\"item.body\" class=\"description\"></div>\n    </icon-item>\n  </for>\n</div>\n```\n\nwith the following data\"\n\n``` js\n[ { ui: 'large orange',\n    icon: 'user',\n    label: 'kmandrup',\n    body: 'I DREAM in CODE' },\n  { ui: 'large blue',\n    icon: 'user',\n    label: 'isaura',\n    body: 'I LOVE web DESIGN' } ]\n```\n\nIt correctly prints `large orange` and so on for `$item.ui` but for `<icon-item attrs=\"item\"` no attributes are passed to the custom tag `icon-item`. Why is that?\n\nIn the docs for `attrs` it is used on a normal `div` tag, but I would have assumed I could also use this technique for custom tags??? Otherwise tag maintenance will quickly become very \"fragile\" IMO.\n\nEven more convenient would be if I could somehow list the attributes I wanna transfer, then have marko use the schema to transfer and type convert values accordingly:\n\n`use-attrs=\"item:name,icon,label\"`\n Sweet :)\n  With the coming standard ES6 loader support currently implemented in [SystemJS](https://github.com/systemjs/systemjs) & [jspm](http://jspm.io/) having a MarkoJS plugin would be great! Using the [SystemJS Handlebars](https://github.com/davis/plugin-hbs) plugin as a starter might be a good idea: \n\n**PS:** Since AMD support was [dropped](http://psteeleidem.com/announcing-marko/#switched-to-commonjs-modules-for-compiled-templates) by switching to CommonJS, I'm just wondering what's the currently recommended (non-Browserify!) recipe for using MarkoJS with AMD/RequireJS (including bundling/compiling) :question:\n 10x for your detailed answers. So ... no easy AMD/RequireJS MarkoJS integration here :worried: \nAnyhow, I'm currently looking into the maturing SystemJS/jspm since aside of supporting any module format (AMD, CommonJS, global, ES6, System/register) and native-transpilers (TypeScript, Babel, Traceur) it is future-proof being the (single AFAIK) reference implementation/polyfill of the ES6 module loader. \nIf time permits I'll look into creating a **plugin-marko** plugin & bundler for MarkoJS integration.\n I've been mulling over which cool new thing to ditch from my project: jspm or marko. \n\nMarko wins :+1: (i.e. it's not getting ditched)\n  It works just fine, except html equality test breaks even though I copy paste `actual.html` and `expected.html` to match!?. \n\nSee `test/fixtures/templates/tag-body`\n Awesome! Much better :) Thanks a lot! \n\nOf course this solution is just excellent! I learned a lot from my experiments, and this little helper lib you made clearly demonstrates how to enhance Marko in an elegant way!!! \n\nHave a nice evening @patrick-steele-idem  :)\n Cool :) Yeah, next step IMO is to improve the documentation some more. \nPerhaps by going away from having everything in one huge README? A github \"blog/page\" or wiki?\n On another note, I was wondering if there is a way to dynamically generate the tag name, such that:\n\n``` html\nh1(class='ui header' tag-body='data.label' if='data.lv == 1')\nh2(class='ui header' tag-body='data.label' if='data.lv == 2')\nh3(class='ui header' tag-body='data.label' if='data.lv > 2')\n```\n\nCould be rewritten something like\n\n``` html\n<dynamic-tag tag-name='h${data.lv}' class='ui header' tag-body='data.label'/>\n```\n\nWould love to have another small lib like the one you created for this use case :)\n I would think I could achieve this something like this?\n\n``` js\nmodule.exports = function transform(node, compiler, template) {\n    var name = node.getAttribute('tag-name');\n    if (name != null) {\n        node.removeAttribute('tag-name');\n        var tagNode = this.compiler.createNode(name, node.getAttributes());\n\n        node.parentNode.replaceChild(tagNode, node);\n        node.forEachChild(function(child) {\n          tagNode.appendChild(child);\n        })\n    }\n};\n```\n Fuck, I spent all morning trying to figure out how to evaluate an expression :P\nLike trying to find a needle in a haystack... and looks like I don't have the data on the template at this stage?\nI think the \"replace tag name\" should be done in the `doGenerateCode` somehow in order to have access to template data? I'm lost again...\n\nI get this: If only I could substitute the template data on this string as a \"template\" and write it to `out`.\n\n`<h$data.lv>hello world</h$data.lv>`\n  I have an accordion tag like this `<div w-body=\"\" class=\"ui $data.ui accordion\"></div>`\n\nWhen I use it like:\n\n``` html\n    <ui-accordion>\n      <acc-block active=\"true\" label=\"Yeah\" text=\"hello world\"></acc-block>\n    </ui-accordion>\n```\n\nIt compiles to:\n\n``` js\nfunction create(__helpers) {\n  var str = __helpers.s,\n      empty = __helpers.e,\n      notEmpty = __helpers.ne,\n      escapeXmlAttr = __helpers.xa;\n\n  return function render(data, out) {\n    out.w('<div w-body class=\"ui ' +\n      escapeXmlAttr(data.ui) +\n      ' accordion\"></div>');\n  };\n}\n(module.exports = require(\"marko\").c(__filename)).c(create);\n```\n\nand so, renders:\n\n`<div w-body=\"\" class=\"ui  accordion\"></div>`\n\nI would have thought the compiler would use `w-body` attribute to understand, that the (internal) body tags of the accordion tag should be inserted as children to the container tag to build up the accordion?\n\n``` js\n    /// accordion start tag\n    if (input.renderBody) {\n        input.renderBody(out);\n    }\n    /// accordion end tag\n```\n oh, I thought w-bind was only required for widgets? This is just a custom tag\n With `w-bind` I get:\n\n``` js\n  return function render(data, out) {\n    out.w('<div w-body w-bind class=\"ui ' +\n      escapeXmlAttr(data.ui) +\n      ' accordion\"></div>');\n  };\n```\n\nSo this only works for widgets then?\n why not enable `w-body` for tags? why have two different ways of achieving the same?\n Great! it works :) But then the marko docs need to be updated to reflect this.\n\nhttps://github.com/marko-js/marko/#tag-renderer\n Why not make some kind of convenience attribute or tag like w-body for this common use case at least? \n<tag-body>\n Fx `<tag-body/>`, which simply calls `<invoke function=\"data.renderBody(out)\" if=\"data.renderBody\"/>`\n Trying to patch this fix in marko\n\n`core-tag-transformer.js`\n\n``` js\nvar BodyNode = require('./BodyNode');\n...\n    [\n        'tag-body', function(attr, node) {\n            console.log('tag-body attr');\n            var bodyNode = this.compiler.createNode(BodyNode, {\n                    renderBody: true,\n                    pos: node.getPosition()\n                });\n            node.parentNode.replaceChild(bodyNode, node);\n            bodyNode.appendChild(node);\n        }\n    ],\n```\n\n`BodyNode.js`\n\n``` js\n'use strict';\nfunction BodyNode(props) {\n    BodyNode.$super.call(this, 'tag-body');\n    if (props) {\n        this.setProperties(props);\n    }\n}\nBodyNode.prototype = {\n    doGenerateCode: function (template) {\n      template.statement('').indent(function () {\n          this.generateCodeForChildren(template);\n      }, this).line('');\n    }\n};\n\nmodule.exports = BodyNode;\n```\n\n`accordion-tag.marko`\n\n``` html\n<div class='container' tag-body=''>\n</div>\n```\n\n`accordion-tag.js`\n\n``` js\nvar template = require('./accordion-tag.marko');\n\nexports.renderer = function(input, out) {\n  console.log('accordion input', input);\n  template.render(input, out);\n};\n```\n\n`accordion-tag.json`\n\n``` js\n{\n    \"renderer\": \"./accordion-tag.js\"\n}\n```\n\n`marko-taglib.json`\n\n``` json\n...\n        \"test-accordion\": \"taglib/accordion-tag.json\",\n```\n\n``` html\n<test-accordion>\n  <h3>I'm your Buddy</h3>\n</test-accordion>\n```\n\nWhat am I missing? I really don't like the idea of having to pollute my tags \nwith `<invoke` everywhere...\n\nIt generates this:\n\n``` js\n  return function render(data, out) {\n    __tag(out,\n      ______taglib_accordion_tag_js,\n      {},\n      function(out) {\n        out.w('<h3>I\\'m your Buddy</h3>');\n      });\n  };\n}\n```\n\nSo I guess I just need to make the inner body output function self-calling!?\n And I even try this, trying to simply wrap the InvokeNode invocation directly...\n\n``` js\nvar InvokeNode = require('./InvokeNode');\n\nfunction BodyNode(props) {\n    console.log('BodyNode', props);\n    return InvokeNode({function: \"data.renderBody(out)\", if: \"data.renderBody\"});\n}\n\nmodule.exports = BodyNode;\n```\n Yeah, I know, but still... I'm just trying to understand some of the marko internals. \nWhy won't this work?\n\n``` js\n'use strict';\n\nvar InvokeNode = require('./InvokeNode');\n\nfunction BodyNode(props) {\n  console.log('BodyNode', props);\n  InvokeNode(props);\n}\n\nmodule.exports = BodyNode;\n```\n\nLooks like a pretty logical way to wrap `<invoke>` tag to me...\n\n``` js\n        'tag-body', function(attr, node) {\n            var bodyNode = this.compiler.createNode(BodyNode, {\n                    function: \"data.renderBody(out)\",\n                    if: \"data.renderBody\",\n                    pos: node.getPosition()\n                });\n            console.log('bodyNode', bodyNode);\n            node.parentNode.replaceChild(bodyNode, node);\n            bodyNode.appendChild(node);\n        }\n```\n Thanks ;) I give up for now... tried all the ways I could think of.\n Haha ;) As always, when I finally gave up a saw the light, and now I got it working in elegant fashion, exactly  like wanted to :)\n\nPure and simple!\n\n``` js\n    [\n        'tag-body', function(attr, node) {\n            // node.setAttribute('renderBody', true, false);\n            var invokeNode = this.compiler.createNode(InvokeNode, {\n                    function: \"data.renderBody(out)\",\n                    if: \"data.renderBody\",\n                    pos: node.getPosition()\n                });\n            node.appendChild(invokeNode);\n        }\n    ],\n```\n My only problem is the test:\n\n``` sh\n  1 failing\n\n  1) render tag-body:\n     Unexpected output for \"/Users/kristianmandrup/repos/markoa/marko/test/fixtures/templates/tag-body/template.marko\":\nEXPECTED (/Users/kristianmandrup/repos/markoa/marko/test/fixtures/templates/tag-body/expected.html):\n---------\n<div class=\"container\"><h3>I'm your Buddy</h3></div>\n\n---------\nACTUAL (/Users/kristianmandrup/repos/markoa/marko/test/fixtures/templates/tag-body/actual.html):\n---------\n<div class=\"container\"><h3>I'm your Buddy</h3></div>\n---------\n  Error: Unexpected output for \"test/fixtures/templates/tag-body/template.marko\":\n  EXPECTED (test/fixtures/templates/tag-body/expected.html):\n  ---------\n  <div class=\"container\"><h3>I'm your Buddy</h3></div>\n\n  ---------\n  ACTUAL (test/fixtures/templates/tag-body/actual.html):\n  ---------\n  <div class=\"container\"><h3>I'm your Buddy</h3></div>\n  ---------\n      at EventEmitter.<anonymous> (test/util.js:72:27)\n      at testRender (test/util.js:90:14)\n      at Context.<anonymous> (test/util.js:116:13)\n```\n\nVery strange!?\n  I'm writing a huge set of taglibs to wrap all of Semantic UI. \nProblem is that if I/when make any mistake, no taglibs seem be loaded and no errors are shown in the console either. \n\nI'm trying to heavily leverage taglib imports:\n\n``` js\n{\n  \"tags-dir\": \".\",\n  \"taglib-imports\": [\n    \"./list/marko-taglib.json\"\n  ]  \n}\n```\n\nIn my real scenario, there would be ~20 taglibs imported.\nIs there a way to turn on some kind of debugging, logging of how marko resolves the taglibs and where it gives up? This is becoming a real PAIN to me :(\nThanks :)\n I tried cloning marko, npm linking it and then inserting debug statements...\n\n``` sh\nMarko appplication ready on port 4000\n[browser-refresh] Server is ready. Watching files for changes.\n[browser-refresh] Triggering refresh of client pages...\n[browser-refresh] Refresh triggered\npage state { title: 'Repo manager',\n  header: 'Repo manager',\n  content: 'Hello',\n  lists: { users: [ [Object], [Object] ] } }\ntemplate data { title: 'Repo manager',\n  header: 'Repo manager',\n  content: 'Hello',\n  lists: { users: [ [Object], [Object] ] } }\nrendering template: /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/index/page/index.marko\nstate: { title: 'Repo manager',\n  header: 'Repo manager',\n  content: 'Hello',\n  lists: { users: [ [Object], [Object] ] },\n  '$global': \n   { menus: { main: [Object], session: [Object] },\n     lists: { repos: [Object], teams: [Object], users: [Object] },\n     feeds: { activity: [Object] },\n     appName: 'Repo Manager v3' } }\nloadTagLib /Users/kristianmandrup/repos/markoa/marko/taglibs/core/marko-taglib.json\nloadTagLib /Users/kristianmandrup/repos/markoa/marko/taglibs/html/marko-taglib.json\nloadTagLib /Users/kristianmandrup/repos/markoa/marko/taglibs/caching/marko-taglib.json\nloadTagLib /Users/kristianmandrup/repos/markoa/marko/node_modules/marko-layout/marko-taglib.json\nloadTagLib /Users/kristianmandrup/repos/markoa/marko/node_modules/marko-async/marko-taglib.json\n```\n\nBut my own custom taglibs are NEVER loaded it seems?\n\n``` js\n    tagsDir: function(dir) {\n        // The \"tags-dir\" property is used to supporting scanning\n        // of a directory to discover custom tags. Scanning a directory\n        // is a much simpler way for a developer to create custom tags.\n        // Only one tag is allowed per directory and the directory name\n        // corresponds to the tag name. We only search for directories\n        // one level deep.\n        var taglib = this.taglib;\n        var path = this.path;\n        var dirname = this.dirname;\n        // TAGLIB DIR\n        console.log('tagsDir', dir);\n        if (Array.isArray(dir)) {\n            for (var i = 0; i < dir.length; i++) {\n                scanTagsDir(path, dirname, dir[i], taglib);\n            }\n        } else {\n            scanTagsDir(path, dirname, dir, taglib);\n        }\n    },\n\n    taglibImports: function(imports) {\n        // The \"taglib-imports\" property allows another taglib to be imported\n        // into this taglib so that the tags defined in the imported taglib\n        // will be part of this taglib.\n        //\n        // NOTE: If a taglib import refers to a package.json file then we read\n        //       the package.json file and automatically import *all* of the\n        //       taglibs from the installed modules found in the \"dependencies\"\n        //       section\n        var taglib = this.taglib;\n        var dirname = this.dirname;\n        var importPath;\n        var resolveFrom = require('resolve-from');\n        // ITERATE\n        console.log('imports', imports);\n        if (imports && Array.isArray(imports)) {\n            for (var i=0; i<imports.length; i++) {\n                var curImport = imports[i];\n                // CURRENT\n                console.log('import', curImport);\n                if (typeof curImport === 'string') {\n\n                    } else {\n                        importPath = resolveFrom(dirname, curImport);\n                        // ADDED\n                        console.log('taglib.addImport', importPath);\n                        taglib.addImport(importPath);\n                    }\n...\n```\n\nPlease provide much better documentation on this feature and guidance on how to debug issues with resolution of tags and taglibs.  \n I simply don't understand how to interpret the documentation on this. Does marko ONLY use the first `marko-taglib.json` it encounters as it travels up the path, or does it resolve all taglibs that it finds on its way? What if multiple taglibs import the same other taglibs? etc. etc?\n\nIn my scenario I have the following structure:\n\n``` sh\napps\n  /_global\n    /components\n      /list\n        /ui-list (tag)\n          template.marko\n          ...\n       marko-taglib.json `tags-dir: '.'`\n    marko-taglib.json `taglib-imports: [ './list/marko-taglib.json', ...]`\n marko-taglib.json `taglib-imports: [ './components/marko-taglib.json']`  \n\n  /index\n   /components\n     ...\n    /page\n     index.marko (references `ui-list` tag)\n   marko-taglib.json `tags-dir: './components'`\n```\n\nShould I also reference the global taglib from the index taglib, or will it auto-resolve as it goes up?\nI had it working until I introduced the extra level in the components folder in order to group tags by type/category. Why!? Im lost...\n Looks like the problem is in part caused by using `browser-refresh` :O\nWith some more debugging in the taglibs compiler (which is in BIG NEED of REFACTORING!!!)\n\n``` sh\ntaglib lookup: buildLookup /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/icon-item\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/icon-item/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/marko-taglib.json\ntryDir /Users/kristianmandrup/marko-taglib.json\ntryDir /Users/marko-taglib.json\ntryDir /marko-taglib.json\ntaglib lookup: buildLookup /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/ui-icon\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/ui-icon/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/repo-manager-v3/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/test123/marko-taglib.json\ntryDir /Users/kristianmandrup/repos/marko-taglib.json\ntryDir /Users/kristianmandrup/marko-taglib.json\ntryDir /Users/marko-taglib.json\ntryDir /marko-taglib.json\n```\n My conclusion so far: You can only import at ONE level. You CANNOT currently have a taglib which imports a taglib which imports yet another taglib. But WHY this LIMIT!? Is just a basic recursive model...\n By going through the code I can see that it seems it is not currently setup to allow this. It assumes any imported taglib is a \"leaf\" taglib apparently...\n\n``` js\nexports.loadTaglib = function(path) {\n    console.log('loadTagLib', path);\n    var taglibProps = taglibReader.readTaglib(path);\n\n    var taglib = new Taglib(path);\n    taglib.addInputFile(path);\n```\n\nI'm completely baffled!!! This ruins my whole design... I simply can't believe it. Please help me resolve this bug ASAP. Thanks :)\n Was a hunch. But no. However I ran into a caching issue as well. If I had a taglib, importing another taglib which referenced a tag dir, the final taglib did not resolve until I inserted a space in that taglib and saved.\n Thanks :) Please make a test case to cover my issue. I would love to help out myself. This is bugging me down...\n I just sent you a zip with a fixture for this scenario.\n and here my attempt at testing taglib imports (currently NO test coverage)\n\n`taglib-imports-test.js`\n\n``` js\n'use strict';\nvar chai = require('chai');\nchai.Assertion.includeStack = true;\nrequire('chai').should();\nvar expect = require('chai').expect;\nvar nodePath = require('path');\n\ndescribe('taglib-lookup' , function() {\n\n    beforeEach(function(done) {\n        for (var k in require.cache) {\n            if (require.cache.hasOwnProperty(k)) {\n                delete require.cache[k];\n            }\n        }\n\n        done();\n    });\n\n    it('should lookup taglibs with nested-import', function() {\n      var taglibLookup = require('../compiler').taglibs.lookup;\n      var lookup = taglibLookup.buildLookup(nodePath.join(__dirname, 'fixtures/nested-import'));\n      console.log('lookup', lookup);\n      // NOT SURE WHAT TO TEST FOR FROM HERE\n    });\n});\n```\n Awesome! I can hardly believe it :) Thanks a million @patrick-steele-idem :)\n Would be even better if there was a way to add some kind of basic logging for taglib and tag resolution somehow ;) \n I tried it out. Still doesn't work. In my case, for some reason it never even calls `handleImports`.\nI added a console log directly to the `node_modules/marko/compiler/taglibs/taglib-lookup.js`\n\nSeems like marko \"stalls\" before ever starting to resolve even my first taglib, never ever calling `tagDir` for some reason :( And this stalling only occurs when I have nested taglibs like in the example I sent. Strange indeed!\n Thanks. Just tried it. Still same problem.\n I have the exactly the setup I described above.\n\nA page `index.marko` referencing a tag `icon-list`\nThen a `marko-taglib.json` in parent folder referencing \"internal\" taglib to the page via `tags-dir`, then one level further up, a taglib, importing the global components via `taglib-imports`. From here it gets tricky. \nIn `global/components/marko-taglib.json`, if I only use `tags-dir` everything \"just works\". However if I use `taglib-imports`, the lookup only looks up the pre-registered taglibs and never even attempts to find my own taglibs.\n\n``` js\nfunction buildLookup(dirname) {\n  var taglibs = taglibFinder.find(dirname, exports.registeredTaglibs);\n  ...\n```\n\nNever goes beyond `exports.registeredTaglibs` for some reason!?\n\n``` js\n    var lookup = lookupCache[lookupCacheKey];\n    if (lookup === undefined) {\n          // do your magic\n```\n\nFor some reason `lookup` is NOT undefined!? in this case or what? hmm...\n Not crashing, just never trying to resolve any tag libs not pre-registered. \nPS: How would I preregister my own taglibs? Perhaps better/easier to use the `package.json` import strategy? They are global components after all...\n no, all is local. I'm using latest master. `buildLookup` is never called. What is the entry point?\n\n``` js\nfunction buildLookup(dirname) {\n    console.log('buildLookup', dirname);\n```\n\nTemplateCompiler never called either? Something is VERY fishy!\n\n``` js\nfunction TemplateCompiler(path, options) {\n    this.dirname = nodePath.dirname(path);\n    this.path = path;\n    this.taglibs = taglibs.buildLookup(this.dirname);\n```\n Yeah, I run with `MARKO_CLEAN=true node .` each time. Neither `compile` nor `compileFile` of `marko-compiler.js` are being called :P\n But when I move my `icon-list` tag up to the next level of tag libs (ie. not nested anymore) - everything works again, template is compiled etc:\n\nProblem is when I put my template at `apps/_global/components/list/ui-icon/template.marko`\nie. inside `list` folder. I wonder if somehow list is a reserved name or sth very strange?!\n\n``` sh\ncreateCompiler /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/ui-icon/template.marko\nTemplateCompiler path /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/ui-icon/template.marko\nbuildLookup /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/ui-icon\nlookup /Users/kristianmandrup/repos/test123/repo-manager-v3/apps/_global/components/marko-taglib.json,/Users/kristianmandrup/repos/test123/repo-manager-v3/apps/marko-taglib.json,markoa-skeleton-app,browser-refresh-taglib,marko-core,marko-html,marko-caching,marko-layout,marko-async { merged: \n   { path: '/Users/kristianmandrup/repos/test123/repo-manager-v3/node_modules/marko/node_modules/marko-async/marko-taglib.json',\n```\n How can we make a test for this?\n ``` js\nif (process.env.MARKO_CLEAN === '' || process.env.MARKO_CLEAN === 'true') {\n    defaultOptions.checkUpToDate = false;\n}\n```\n\nSo the problem could be in this \"up to date\" logic I guess?\n It operates on taglibs to determine if they have been updated...\n\n``` js\nexports.getLastModified = function(sourceFile, taglibs) {\n    var statSource = fs.statSync(sourceFile);\n    var lastModifiedTime = statSource.mtime.getTime();\n    var taglibFiles = taglibs.getInputFiles();\n\n    ...\n    // Now check if any of the taglib files have been modified after the target file was generated\n```\n\nI think this is a naive check, and that is the problem. Only checks first level taglibs, again not recursive :P\n Yes, NO templates are compiled when I have nested taglibs for some strange reason... trying to figure out why/where it decided to skip this step.\n Doesn't even call `checkUpToDate` :O\n\n``` js\n checkUpToDate: function(targetFile) {\n    console.log('checkUpToDate', targetFile);\n```\n What is top level entry point to start compilation or decide whether to compile template?\n\n`module.exports = function load(templatePath) {` in `loader.js` perhaps?\n Thanks for all your assistance :)\n  In the `marko-widget` docs, you use the following to indicate the placeholder for contained body content:\n\n`<span w-body></span>`\n\n\"used to determine the nested external content that is to be injected into the body of the UI component (to support transclusion). The actual injection point is determined by the `w-body` attribute.\"\n\nCan I use this for regular tags as well? If so, please document use in this project as well ;)\nWhat is a valid attribute value for `w-body` if one must be provided for whatever reason?\n Answer from https://github.com/marko-js/marko-widgets\n\nIf it helps, an attribute with no value is equivalent to an attribute with a value of an empty string:\n\n`<span w-body></span> === <span w-body=\"\"></span>`\n\nThe purpose of the `w-body` attribute is to support transclusion. If the user of a custom tag nested content inside the custom tag then that content will get injected into the output HTML relative to the `w-body` marker. In addition, if the widget rerenders then the body content will be preserved (since that content is external to the widget). For example, below is the usage of a custom tag with nested content:\n\n``` html\n<my-awesome-component>\n    This is nested content that will be injected into the `w-body` element.\n</my-awesome-component>\n```\n Yeah, was a way to add docs via a FAQ entry using an issue :P\n\nPlease make a note in tag-renderer section that the `w-body` attribute can be used in the marko template for the same effect as `renderBody(out)`. That would connect the dots I think. \nThanks :)\n @kristianmandrup please see the PR if it fits your needs....\n    Fixes https://github.com/marko-js/marko-widgets/issues/64\n fixes: https://github.com/marko-js/marko/issues/15\n   thanks. happy to be part of a great team!\n  I pass an array of the form:\n\n``` js\n[\n{label: 'my label', icon: 'users'},\n{label: 'extra', icon: 'feed'},\n]\n```\n\n`index.marko`\n\n``` html\n<icon-list items=\"${data.items}\"/>\n```\n\n`icon-list.marko`\n\n``` html\n<for each=\"item in $data.items\">\n  $item.label\n</for>\n```\n\nBut when I debug, I get a strange '*': entry as my first key!? WTF!?\n\n`list { '*': { items: [ [Object], [Object] ] } }`\n\nLooks like it should be `data` in this case (`for each`) without the `$` sign. \nNot clear from the docs IMO.\n\n``` html\n<for each=\"item in data.items\">\n  $item.label\n</for>\n```\n\nNow we get an error about some strange error, 'unexpected token {'  Damn!\n Thanks, I figured that was the issue, since I had seen a brief mention somewhere about the `@*` being a \"catch all\" in your docs about the schema. But wasn't really clear that not declaring the schema value would cause this kind of problem. I guess when you go beyond strings, you currently have to specify the schema carefully in order to make marko understand. Kinda makes sense. I posted my solution/suggestion for proposal #90 which would make it awesome!!\n  I think it comes down to a missing dependency or something, but would be nice with a clearer error message than this:\n\nthe `marko-taglib.json` it complains about.\n\n``` json\n{\n    \"tags-dir\": \"./_global/components\"\n}\n```\n\nConfusing error message:\n\n``` sh\nError: Error while handling properties for /home/isaura/tecla5/repo-manager-v2/apps/marko-taglib.json: Error while applying option of \"tags-dir\". Cause: SyntaxError: Unexpected token }\n      at Object.parse (native)\n      at scanTagsDir (/home/isaura/tecla5/repo-manager-v2/node_modules/marko/compiler/taglibs/taglib-loader/scanTagsDir.js:66:27)\n      at Object.TaglibHandlers.tagsDir (/home/isaura/tecla5/repo-manager-v2/node_modules/marko/compiler/taglibs/taglib-loader/loader-taglib.js:134:13)\n      at invokeHandlers (/home/isaura/tecla5/repo-manager-v2/node_modules/marko/node_modules/property-handlers/lib/index.js:66:29)\n      at Object.exports.loadTaglib (/home/isaura/tecla5/repo-manager-v2/node_modules/marko/compiler/taglibs/taglib-loader/loader-taglib.js:257:5)\n```\n Awesome :) Gracias amigo! When do you expect a Marko Widgets 5.0 release? 1wk, 2wks, more?\n  It keeps downloading the file. this is the gist of my code.\n\n``` js\n'use strict';\nlet koa    = require('koa')\nlet app    = koa()\napp.use(function* () {\n    this.body = require('marko').load(require.resolve('./views/index.marko')).stream()\n    this.type = 'type/html'\n})\napp.listen(3000);\n```\n\nWhenever I navigate to localhost:3000/, it downloads a file with \"hello\" in it. I have no idea what's happening or what I'm doing wrong.\n\nviews/index.marko is just \n\n``` html\nhello\n```\n\nright now.\n No, that. was a good thought, but unfortunately that did not solve my problem. It is still just downloading the file.\n omg...I hate when it's a stupid error like this...had to change `type/html` to `text/html`\n\nThanks for your help!\n So is correct: this.type = \"html\";\n Your marko is \"simple\" enough, but how do I build a binary tree with marko? In ejs template I can just like so using pure javascript write helper functions for a tree hierarchy inner <% functinon buildTree(root){ var html=\"blablabla\"; return html;}%> <%- buildTree(someRoot)%>. But with marko I don't understand how to do it like this. Where is marko's tutos can i find?\n Many, many thanks, it's just incredible!\n  Hello team,\n\nI was wondering if there is any way to access messages set with flash using the following api.\n\n``` javascript\nreq.flash('success', 'Account Created Successfully!');\n```\n\nis it `${flash}`? or something else within a `.marko` file?\n\nThank you.\n\nDeep\n Thank you! That worked!!\n\nNow I have a debug question. I am getting a 500 error when trying to do the following:\n\n`<require module=\"../private_libraries/globals_v1.js\" var=\"globals\"/>`\n`<if test=\"!globals.isEmpty(data.messages)\">Not Empty</if>`\n\n```\n// globals_v1.js\nexports.isEmpty = function (obj) {\nfor(var prop in obj) {\n    if(obj.hasOwnProperty(prop))\n        return false;\n}\n\nreturn true;\n};\n```\n\nwhere data.messages is being passed in as the flashMessage. isEmpty is a function that runs through that object to make sure nothing is contained in that data.messages object, but I'm getting a 500.\n\nAny ideas on how to resolve and/or better yet, debug that 500? there are no messages that get spit out besides the 500 error result.\n\nThank you.\n\nDeep\n Hello Patryk, will comment here because I have a related question.\nWhat if the flash messages are sent before a\n\n```\nres.redirect('/');\n```\n\n?\n\nIn this case how can I pass the parameter to the .marko layout since I am not calling the render method?\n  The utility function `getLength()` for loop status variables was previously undocumented.\n  I tried to add:\n\n``` json\n \"marko\": {\n  \"extends\": \"html\"\n}\n```\n\nbut no luck...\n  I'm planning to leverage Jade to make it easier/faster to write the marko templates...\n\nSo far I've uncovered the following special marko and lasso tags:\n\n```\n<if\n<include\n<require\n<var\n<assign\n<with\n<else-if\n<else>\n<for\n<def\n<invoke\n<layout-placeholder\n<layout-use\n<layout-put\n<lasso-page\n<lasso-head\n<lasso-body\n```\n\nAm I missing any important pieces? Looks like [pencil](https://www.npmjs.com/package/pencil) would make it pretty easy to add such custom tags to Jade and then I can have a `gulp watch` task auto-compile to marko. Sweet :)\n    es6 template strings use the format ${expression}\n\nI was wondering if marko can handle this (apparent) conflict? Sorry if I missed something in the docs.\n Great. Thanks for the response!\n  Please add a way to programmatically add specific folders to perform `Taglib Discovery` in order not to be forced to rely on node default search strategy. Something like:\n\n`marko.taglibs.discovery([myTaglibsPath, myOtherTaglibsPath, ...]);`\n\nThanks :)\n Thanks :) Trying to make sense of this...\n\nVarious \"clever\" ways for using taglibs:\n\n``` js\n{\n    \"<my-hello>\": {\n        \"renderer\": \"./hello-renderer\",\n        \"@name\": \"string\"\n    }\n}\n```\n\nImporting other taglibs :)\n\n``` js\ntaglibImports: function(imports) {\n    // The \"taglib-imports\" property allows another taglib to be imported\n    // into this taglib so that the tags defined in the imported taglib\n    // will be part of this taglib.\n    //\n    // NOTE: If a taglib import refers to a package.json file then we read\n    //       the package.json file and automatically import *all* of the\n    //       taglibs from the installed modules found in the \"dependencies\"\n    //       section\n```\n\nThe \"normal\" way\n\n`importPath = resolveFrom(dirname, dependencyName + '/marko-taglib.json')`\n\nTrying to combine local with global/shared taglibs\n\n``` js\n{\n  tagsDir: './my-tags',\n  taglibImports: ['../../package.json']\n}\n```\n\n// package.json\n\n``` js\n{\n  dependencies: {\n    // how does the import expect to find taglibs from external module??\n    // what are the conventions in this case!?\n    'my-global-taglib': 'x',\n    ...\n  }\n}\n```\n\nAnother proposal - direct require (why traverse all dependencies?)\n\n``` js\n{\n  tagsDir: './my-tags',\n  // refers to a package in my package.json\n  // why not require module directly? (ie. not local since not prefixed by ./ )\n  taglibImports: ['my-global-taglib', 'my-other-shared-taglib-module']\n}\n```\n Hi, \n\nI'm trying to use the `taglib-import` feature as I really need it now. I think I understand the `package.json` mechanism, but not sure about the `else` part, line `176`. What should be at `./_global/components/menu` for this to work? I assume resolveFrom it just a special wrapper for node `require` using `curImport` as the base path?\n\n``` js\nelse\n  importPath = resolveFrom(dirname, curImport);\n  taglib.addImport(importPath);\n```\n\n``` json\n{\n    \"tags-dir\": \".components\",\n    \"taglib-imports\": [\n      \"./components/menu\",\n      ...\n    ]\n}\n```\n\nMy target file structure\n\n``` sh\n/components\n  /my-comp\n  /menu\n    /other-comp\n```\n I got it, must be `\"./components/menu/marko-taglib.json\"`, however why not assume that by default given a path without it? At least it works for me now. So cool :)\n  i make layout file\n\n``` html\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n<%@ taglib prefix=\"sec\" uri=\"http://www.springframework.org/security/tags\" %>\n<%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\" %>\n<%\n\n%>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n\n</body>\n</html>\n```\n\nand run `marko`\n\nthis is result\n\n``` html\n<%@ page contentType=\"text/html;charset=UTF-8\" language=\"java\" %>\n<%@ taglib prefix=\"sec\" uri=\"http://www.springframework.org/security/tags\" %>\n<%@ taglib prefix=\"spring\" uri=\"http://www.springframework.org/tags\" %>\n<% %>\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <title></title>\n</head>\n<body>\n\n\n</body>\n</html></%></%@></%@></%@>\n```\n\ni want to ignore the tag ( `<%`, `<%@` ). Is there a possibility that does not analyze the specific tag?\n Thank you very much~~ :+1: \n  unless i'm missing something, it seems all compiled files are created in the same directory / path as the template sources.\n\nthis means having additional complex rules for `.gitignore` in cases where `.marko` is not used as the extension!\n\nwould be a lot simpler to store all compiled files (under the same directory tree) starting a temp root path, that can be easily cleared / deleted as needed, and can be simply ignored from the project/repository version control. \n > the Marko compiler puts the compiled templates next to the original template because the Node.js module loader is context aware and we want the stack traces to match up with location that the Node.js module loader associates with the loaded compiled template\n\nfully agree with this _(just wanted to be clear)_\n\n> While we could place the compiled template at a different location on disk, we would need to change how the relative require paths are generated. \n\nI have not looked at the internals _\\- yet -_, but in theory, should be done in such a way that changing the `cwd` or `root` would be sufficient. \n\nyour example is exactly what I'm interested in. but I would also add that each module (and module maintainer, whether internal or external) should be free to determine the best setup for that module.\n\nI'm guessing your basing your use-case on a hierarchy of modules used within one system, but the moment you go out of the scope of the one system then the module wouldn't know where to look for its compiled templates.\n\nso it's best to keep the separation between modules to ensure true portability of the module itself.\n\nthat of course would become complicated if you're doing template dependencies between modules, but rather than solve that problem a better pattern would be to have only the main / root module be responsible for compiling, and if there are dependant module templates, they are simply pointed to, and the compiled output is stored elsewhere.\n\n###### example\n\nfor this module, the package maintainer chooses to store in a folder `.marko-compiled-location-a`, this is only relevant when that module is used on its own.\n\n```\nmy-installed-module/\n    .marko-compiled-location-a/\n        foo/\n            template.marko.js\n        bar/\n            template.marko.js\n    foo/\n        template.marko\n    bar/\n        template.marko\n```\n\nbut when the module is used as a dependency of another system, the dependant chooses where the final compiled files should live:\n\n```\nmy-app/\n    .marko-compiled/\n        foo/\n            template.marko.js\n        bar/\n            template.marko.js\n        .marko-dependants/\n            foo/\n                template.marko.js\n            bar/\n                template.marko.js\n    foo/\n        template.marko\n    bar/\n        template.marko\n    node_modules/\n        my-installed-module/\n            foo/\n                template.marko\n            bar/\n                template.marko\n```\n\nagain, not sure what the best path design here would be, but, with the current setup, it makes it very noisy (for simple usage like static site building) and cumbersome with server-side live systems, especially if you're doing live reloading of the application, your template changes may not get refreshed.\n yes indeed this does satisfy the ask here :+1: \n\nwish there was a cleaner way to set this option though ..\n I have to play around with it more first ... I'm thinking this should be done on the main include:\n\n``` js\nvar marko = require('marko')\nmarko.compiler({\n  ...\n})\n```\n\nor \n\n``` js\nmarko.compilerConfig = {\n  ...\n}\n```\n\netc ..\n @ahmadnassri If you're using Express JS, there could be a cleaner way to define configuration with an API similar to what I've proposed in #165. If there was a Marko Express plugin, when initializing the engine you could pass configuration options to Marko similar to how defined them above...\n\n``` javascript\nvar Marko = require(\"marko-express\"); // example lib name\napp.engine(\"marko\", Marko({ writeToDisk: false }));\napp.set(\"view engine\", \"marko\");\n```\n not using express for this particular project (It's a static site builder, no server required), though that example makes sense.\n  I am creating `grunt marko plugin'\nhttps://github.com/thomasJang/grunt-ax-marko\n\ni have question. can i change marko-taglib.json path?\ni know marko-taglib.json is same template path\n i'm sorry @patrick-steele-idem \ncan be changed to another location, not the position determined the location of a file\n There is no big problem.It can be used now as.\n\nHowever, if you want to place the resources and content, such as preferences for `java` project to another space may become a problem.\nAlso, in the case of the I, as follows, when you try to be able to set the location of each of the environment file it seems to be a problem.\n\nhttps://www.npmjs.com/package/grunt-ax-marko#overview\n\n``` js\ngrunt.initConfig({\n    ax_marko: {\n        default: {\n            options: {\n                preserveWhitespace: true // expected output whitespace \n            },\n            files: [\n                {\n                    src: \"test/fixtures/*.html\",\n                    global_data: { // append data \n                        layout_path: \"../layouts/basic.marko\" // src relative path \n                    },\n                    lang: {\n                        ko: \"test/lang/ko.json\",\n                        en: \"test/lang/en.json\"\n                    },\n                    dest: \"test/expected\",\n                    output_extension: \"html\"\n                }\n            ]\n        }\n    },\n});\n```\n\nHave met in such highly-level project is sincerely happy.\nI is JSUI developers. Opportunity I want to make even UI in which the `marko` to base if.\n  i try \n\n``` js\ntmpl.render(data, function(err, output){\n    if(!err)\n        grunt.file.write(dest, output);\n    else\n        grunt.log.error(err);\n});\n```\n\noutput is\n\n``` html\n<!DOCTYPE html> <html lang=\"en\"><head><meta charset=\"UTF-8\"><title></title></head><body><h1>My Page</h1>Hello World! <ul><li style=\"color: red\">red</li><li style=\"color: green\">green</li><li style=\"color: blue\">blue</li></ul></body></html>\n```\n\nIs there a way, get output with `\\n` \nplz help me\n and i'm sorry i can't speak english\n thank you very much ~ marko perfect : )\n  I might be doing something wrong, but whenever my express app hits the `var template = require('./hello.marko');` a `hello.marko.js` file is created alongside the original file.  Is there a way to render marko templates from node without this filesystem dependency?\n\nThanks.\n One of the main benefits of Marko is that templates are compiled to javascript so that they can be executed on both client and server. Theoretically, you could compile to the javascript API and handle it yourself - see the bottom of this section: https://github.com/raptorjs/marko#template-compilation). Is there a particular reason that you're trying to avoid compilation?\n I don't have any problem with a compilation step, most templating systems behave similarly.  I'm just wondering if it's required to compile to the filesystem as opposed to having a purely in-memory compilation.\n Sorry I missed your part about the template-compilation with Javascript API.\n\nI attempted using compileFile but the source that is returned is in the format of a common js module, which still isn't of much use unless it gets written to a file.  I was kind of hoping to somehow get back a compiled template function that can be instantly ran, similar to https://lodash.com/docs#template\n Thanks for the relevant issue, I searched but did not find that somehow.  That answers my question.\n  Hi again,\n\nI've been working on a large Koa server project where we want to allow mounting of multiple SPAs using Marko. Each SPA is a separate Node package (module).\nIt would be really nice if we could specify the root common templates folder for each page. \n\nThe following should give an idea of my ideal application layout, split into a module for each SPA.\nThe `app.js` is the main app, which contains shared layout and partials for all SPAs to leverage.\n\n``` sh\napp.js\n: require koa-server.js\n  - default-layout.marko\n  - partials\n    - _header.marko\n    - _footer,marko\n\nindex.je\n: require app.js\n  - index.marko\n  - index-layout.marko\n\nlive.js \n: require app.js\n  - live.marko\n  - live-layout.marko\n```\n\nAlternatively I would have a `common.js` module, with the templates, layouts and partials common (shared) across multiple SPAs.\n\n``` sh\ncommon.js\n  - partials\n    - _header.marko\n    - _footer,marko\n\nlive.js\n: require app.js\n: require common.js\n  - live.marko\n  - live-layout.marko\n```\n\nHow would I conveniently reference such shared templates locations in other node modules, without hard coding a long ugly path such as `./node_modules/common/partials/_header`?\nWould this be a feature enhancement/request?\n\nAny ideas or recommendations greatly appreciated. Thanks ;)\n Awesome! Thanks a lot Patrick! Will start switching to Custom Tags for more awesome power and flexibility.\n  Is this all it takes? => https://github.com/tj/consolidate.js/pull/158/files\n @patrick-steele-idem Do you happen to know if we can disable cache (aka the generated .js files) when using `consolidate.js`?\r\n\r\nI am interested in this because I use marko as a template language for static site generator `metalsmith`, but because marko is smart enough to generate js files, it prevents us from using a watcher to reload template just by running the build process again on template change.\r\n\r\nIs there a solution for that?\r\n\r\nref:\r\n- https://github.com/FWeinb/metalsmith-watch @patrick-steele-idem Thx I did enable `invalidateCache`, it doesn't appear to find the right entry in `require.cache` to delete though. I need to figure out [why](https://github.com/FWeinb/metalsmith-watch/issues/36)...  We initially tried to use \n\n`<include name=\"xyz.marko\" data=\"${data}\"/>`\n\nbut this is (obviously!) a terrible idea whioch doesn't work. What is the recommended pattern, besides copying down each specific value which the partial is depending on, which can quickly make for tight coupling in the hierarchy!!\n\n`<include name=\"xyz.marko\" page=\"${data.page}\" providers=\"${data.providers}\"/>`\n We have this problem \n\nviews/layouts/default-layout.marko:\n ....  <include template=\"./../partials/header/header.marko\" menu_items=\"$data.globals\"/>\n\nviews/partials/header/header.marko:\n\n<p>${data.menu_items}</p>\n\nand is empty data\n  When `<include>` is given a hard-coded path, it can be relative, as said in the docs, or absolute. However, when it is given a variable path, as in `<include template=\"$data.templatePath\" />`, it must be absolute (it will error out if relative).\n\n**Works**\n\n``` html\n<include template=\"../relative/path/to/template.marko\" />\n```\n\n**Works**\n\n``` html\n<var name=\"templatePath\" value=\"'/absolute/path/to/template.marko'\" />\n<include template=\"$templatePath\" />\n```\n\n**Works**\n\n``` html\n<include template=\"/absolute/path/to/template.marko\" />\n```\n\n**Does Not Work**\n\n``` html\n<var name=\"templatePath\" value=\"'../relative/path/to/template.marko'\" />\n<include template=\"$templatePath\" />\n```\n\nIt seems as if the issue is that hard-coded paths are `require.resolve`'d, while variable paths are not. Also, the docs could use an update, since it says that the template path must be relative, even for hard-coded paths.\n  I would like to determine which custom tags get called via my renderer.js\n\nSo in the renderer, something like this:\n`data.details=['d1','d2','d3']`\n\nAnd then in template.marko (which doesn't work):\n`<for each=\"detail in data.details\">`\n&nbsp;&nbsp;&nbsp;&nbsp;`<${detail} />`\n`</for>`\n\nOne solution would be to explicitly call out tags conditionally:\n`<for each=\"detail in data.details\">`\n&nbsp;&nbsp;&nbsp;&nbsp;`<if test=\"detail==='d1'\">`\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`<d1 />`\n&nbsp;&nbsp;&nbsp;&nbsp;`</if>`\n`</for>`\n\nBut is there any other way to accomplish this?\n Thanks Patrick, that seems to work well. Do you know how I might include w-id in this case?\n\nSo that \n\n```\n<detail w-id=\"detail[]\" />\n```\n\nwould become something like this...\n\n```\n<invoke function=\"renderer(data, out)\" w-id=\"detail[]\" />\n```\n Ok thanks. That would be great if this could be supported.\n  Custom Attributes is a great functionality. But current implementation does NOT support attribute value to come from a object.\n\nFollowing statement is currently supported. but what if class name is coming dynamically from the JavaScript object.\n\n<div class=\"{?data.active;tab-active}\"></div>\n\n\nSupport for following is needed\n\n<div class=\"{?data.active;data.model.class}\"></div>\n\n\nAlso there is inconsistency across marko for defining JavaScript expression. Some places its using ${}, some places it dosent needs ${} and here its using {?condition;value} (WITHOUT $ sign)\n Thank you Patrick I didnt knew about attrs attribute, I have to finish up reading entire doc :)\n\nOn the second note It would be helpful if we can unify conditional statements as well for example below dosent with with `<assign>` but works with `<html class={?}>`\n`<assign var=\"viewDetailsClass\" value=\"{?data.listingModel.bin.binAction;btn;btn btn--primary}\"/>`\n\nMay be using just using javascript inline if statement everywhere can solve the problem.\n  I was working on creating reusable helper utility which will add _sp, class and id to any element when passing a common data model. After alot of try and error with variables, functions and ${} and without ${} I finally concluded that it may not be supported.\n\nSupport for calling a Helper Utility to render anything within the HTML element is desired.\n\nCurrently Marko supports calling JavaScript expression on right hand side after = sign (as below)\n\nHowever following is not supported. hello\n\nI have created a sample to explain the same.\nhttps://github.corp.ebay.com/sugurnani/marko-dynamic-attributes/tree/master\n Thank you @patrick-steele-idem \n\nI was saw the documentation for defining custom tags but was unable to find info about creating custom attributes. Can you please point me to that doc?\n  How about any JavaScript Object and JavaScript Arrays ?\n\nmy-component dynamic-int=\"${1==1? 25 : 26}\" \n I think it's a good idea to remove the noise of extra files. Making this part of the (marko-)html makes sense. \n:+1:\n\n@SunnyGurnani I assume that should also work as Patrick mentioned support for the ${...} syntax.\n If you want to consider attribute value as JS expression, would you also support calling functions?\n\n``` HTML\n<my-component count=results.count() />\n```\n Hi,\nmaybe it's worth considering the upcoming ES6 Template-Strings.\nhttps://babeljs.io/docs/learn-es2015/#template-strings\n\nIf the proposal is a thought about getting the parser more towards js, the following:\n\n``` html\n<my-component dynamic-string='hello ${name}'/>\n```\n\nwould lead towards:\n\n``` html\n<my-component template-string=`hello ${name}`/>\n```\n\n(yes, the backticks) if I got it right.\nNot to talk about multiline strings.\nAnd we'll be able to omit string-concatenation\n\n``` html\n<my-component string-concatenated=(\"hello \"+name)/>\n```\n\nor am I completely wrong\ngreets Achim\n @patrick-steele-idem, I understand the migration-argument completely. For me as a total marko-noob, my thoughts were totally js-driven. It's the language I'm most familiar with, loving the new possibilities\nand features of the upcoming es6. And with something like these...\n\n``` html\n<my-component string-concatenated=(\"hello \"+name)/>\n<my-component complex-function-call=(data.foo() + data.bar())/>\n```\n\n...I have to leave my way of js-thinking towards some marko-specials. If everything after the \"=\" is familiar js I don't have to think about marko. It just works.\nMaybe this kind of thinking is too naive.\n My Suggestion would be to allow all javascript expression in ${} only to avoid any confusion.\n\nWith proposed method it would be very confusing for anyone who is new to Marko to figure out which is plain text and which is javascript expression.\n As i think more about it, i think what @SunnyGurnani proposed makes more sense and less confusing.\n\nFew things to consider:\n1. 'hello ${name}' is not a valid JS expression\n2. If you want to actually have a string \"[1, 2, 3]\" as attribute value in mystring=[1, 2, 3] then it would have to be encoded which would make it look odd, otherwise it becomes array value.\n :+1:\n Thanks @pswar and @patrick-steele-idem \n\nJavaScript has given us the freedom from Classes and Types with current proposal we are taking away all that beauty and simplicity. I personally would prefer simplicity ${} for all expressions and let library handle the rest.\n\nCurrent proposal suggest different implementation based on individual Types as following. However in JavaScript we never define type in the parameter or declare variable with type.\n\nFor dynamic string use ES6 strings\ncomponent attribute=`hello ${name}' \n\nSingle function don't use anything\ncomponent attribute=data.foo()\n\nFor Multiple Functions use ()\ncomponent attribute=(data.foo() + data.bar())\n\nFor Object use {}\ncomponent attribute={hello: 'world'}\n\nFor Array use []\ncomponent attribute=[1,2,3]\n\n@pswar I don't see any problem in following expression. Hello is static and ${name} is JavaScript expression. Please correct me if I am wrong?\ncomponent attribute=\"hello ${name}\" \n I was following up until the proposal that ${...} only be allowed within backtick-quoted attribute values, which would be a significant BC break.  I understand the desire to simplify, but that seems a step too far to me vs retaining the existing behavior where quoted attribute values are scanned for ${...} replacements.\n @patrick-steele-idem I understand where you're coming from, and in the end either way will work.  I guess the way I was looking at the interpolation within quoted attributes question was that it's simple to think of replacement working the same way there as it does within CDATA sections, since they're both \"text\" parts of HTML.\n\nOne question this does bring up is how the different quoting styles in the template would affect the quoting in the generated HTML.  For example, does this:\n\n```\n<my-component foo=`Hello ${data.name}`/>\n```\n\ncompile to:\n\n```\n<my-component foo=\"Hello Dan\" />\n```\n\nor:\n\n```\n<my-component foo='Hello Dan' />\n```\n\nor something else?\n I got your point @patrick-steele-idem \n\nI think then it would help to remove/depricate ${} from the language.\nis there a need to use ES6 backticks ? Cant we just use following ? \nmy-component string-concatenated=(\"hello \"+name)\n\nThis would avoid confusion and make Marko much easier to learn for people new to language.\n @patrick-steele-idem So are we considering this just got custom tags or more generally?  My gut reaction would be that the syntax for custom tags should be as similar to \"normal\" tags as possible, which is where my (admittedly rushed) example came from, thinking about these template semantics in terms of defining attributes on regular tags.\n Coming from JSX-land, I suggest:\n\n``` xml\n<my-component foo={`Hello ${data.name}`} />\n```\n\nIt would be great to have more overlap between the two standards. Many of us using marko on the back will be using Angular 2 or React/JSX on the front. I personally render React components and inject them into marko templates. \n For conditional operators, how about something like this: \n\n```\n<div if(x > 5)>\n   Do something\n</div>\n```\n\ninstead of \n\n```\n<div if=(x > 5)>\n   Do something\n</div>\n```\n\nFor iterators, \n\n```\n<ul>\n   <li for(color in colors)>\n       ${color}\n   </li>\n</ul>\n```\n\ninstead of \n\n```\n<ul>\n    <li for=\"color in colors\">\n        ${color}\n    </li>\n</ul>\n```\n @patrick-steele-idem \nI think the suggestion needs to be fixed to \n\n```\n<div if(x > 5)>\n   Do something\n</div>\n```\n\nI see an '=' after the if, in the suggestion. \n My gut reaction to this proposal was: \"OH NO, NOT ANGULAR 2 SYNTAX!!!\"\n\nBut reading a bit further on, I fully understand the reasoning. More power, less limits!!!\nHowever I don't think it should be \"all or nothin\", breaking existing templates etc. \nMy proposal: \nAllow the HTML \"flavor\" described above, but also allow/enable it while keeping in full HTML attribute compatibility mode, ie `x=\"y\"`.\n\n`<div x=(5-2*sqr(2))/>`\n\nAND\n\n`<div x.e=\"(5-2*sqr(2))\"/>`\n\nWhere the `.e` means that the internals should be _evaluated_ as pure javascript and returned as:\n\n`<div x=(5-2*sqrt(2))/>`\n\nThen evaluated as javascript to finally render `<div x=\"12\"/>`\n\nIt think this combines the best of both worlds (and would allow me to keep using jade to marko compilation!). The same principle would apply for string interpolation etc., ie. simply having `.e` attribute name postfix means a first \"compilation\" phase, basically just stripping the `\"`s and understanding the intention as javascript evaluation :)\n Looks very cool :) Good job!!!\n Hi @philidem, \n\nWhen can we expect to begin experimenting with this or contribute? \nHow do we hook the parser into markojs to replace the default Parser? \nPlease add usage/install instructions. Cheers :)\n re: multiple variables, I don't know. I think most javascript styles these days prefer writing out one variable per line anyway.\n @patrick-steele-idem Sure, and it isn't necessarily bad to support multiple styles, it's just additional things to maintain, document, etc.\n\nre: conditionals - I actually think that looks better. It is uglier, but it's standard js.\n Regarding conditionals, depending on how a falsy value is handled for the class attribute, the following would work... and it looks quite nice.\n\n``` html\n<div class=(data.isActive && 'active')>\n```\n  I suggest a new major version which uses Angular 2's new template syntax. Like Marko, this extends HTML well. I think this would quickly attract a wide set of people to the project!\n  Might be able to close this per http://markojs.com/docs/syntax/#dynamic-attributes  With a marko page like this:\n`<include template=\"./header.marko\"/>`\n`${data.bodyText}`\n`<include template=\"./footer.marko\"/>`\n\nThe rendered result is:\nheader content\nfooter content\nbody content\n\nThe expected result is:\nheader\nbody\nfooter\n Thanks for creating that.  This has to be my misunderstanding of what include would do.  Stripping the extra code from my header and footer I found the issue was if I have an open tag in the header (i.e. a `<body>` tag) and a closing tag in the footer (`</body>`), Marko adds a closing tag to the header and drops the closing tag from the footer.  \n\nSo it seems each included template has to be a stand-alone template, not depending on HTML tags opened or closed outside of that template.  Is that correct?\n  Hi,\nHow can query params be added to a url when rendering a template `template.render({}, res);` so they can be accessed from the url e.g. http://domain.com/book?id=123 ?\n Assuming you have a request object like Express provides:\n\n```\ntemplate.render({id: req.query.id}, res);\n```\n\nThen in the template:\n\n```\n<a href=\"http://domain.com/book?id=${data.id}\">click</a>\n```\n Thanks. I want to be able to append it to the url so I can then parse the URL for the page to access all the params via JS. I understand I can render a `<script>` tag in the template with the values but it would be a better solution to parse the URL in this case.\n\nIs this possible do you know?\n I'm not sure that I follow what you're asking to be honest.  If you just want to access the query params from js in the browser you can do that without marko involvement at all by parsing `window.location.search` with client-side js. If you want to use marko to pass any requested params back to the template you could stick the entire `req.query` object into `data` like:\n\n```\ntemplate.render({query: req.query}, res);\n```\n\nThen:\n\n```\n<script>\n  var query = $!{JSON.stringify(data.query)};\n</script>\n```\n I've not explained this great. I'll have another go. \n(using Express + Marko)\nSay I have a form submitted to '/book/:id' route, this is handled by a controller which saves the book to the DB. Once the book is saved I render a template '/book/complete'. But instead of the url being '/book/complete' I want it to be '/book/complete?id=123' (123 being the last ID added to the DB).\nMy problem is rendering the query string onto the URL on page load.\n\nYour second solution makes sense but having script tags could get unwieldy across pages.\n\nDoes that explain it any better?\nThanks for persevering. \n Honestly this doesn't sound like a marko issue at all, the URL in the browser isn't related to the name of the template.  If you want to have the browser show that URL you'll need to add a GET route for it and at the end of your POST handler use a redirect to make the browser load the desired URL.\n\n```\nreturn res.redirect('/book/complete?id=' + new_id);\n```\n Couldn't see the wood for the trees! Thanks @DanCech.\n  This tightens the entity matching regular expression to explicitly handle numeric and hexadecimal entities separately from named entities.  It also adds a simple test that entities are being properly matched.\n  I didn't get how is it possible to render a template from string. Is it possible at all?\n\nThanks.\n Doesn't work in browser using browserify. I am getting\n`require.resolve is not a function`\non\n\n`exports.taglibs.registerTaglib(require.resolve(\"../taglibs/core/marko-taglib.json\"));`\n Thanks for the directions, but I have already switched to another template engine, too much hassle for such a simple thing. As for me marko.load should be able to work with a raw template string or there should be any other method do this job in one line as it is in the most of the template engines.\nAnyway thanks for your help.\n @patrick-steele-idem of course I agree with you. But I bet you will not notice a difference in case of simple templates between precompiled and compiled in browser. I am actually doing a simple Chrome extension and don't need 60 fps. Another thing is that usually you want to make it workable asap and after that do the optimizations so it is usually very handy to just have a single method for a single render operation to see it right away.\n Hi, I'd like to add a use case for client compilation.\nWe're currently not using nodejs on the server (but a CMS system) and would like our users to add their own custom templates to a \"templates library\". We don't mind if this means a second or two delay compiling the template before its pushed to the library. These templates are then used in the main app.\nUnfortunately at the moment it seems templates have to be pushed by the development team with access to a node environment. \n  It seems like the layout-put tag is not working as expected anymore. The test confirms this:\n\n```\n4) render layout-use:\n     Error: Unexpected output for \"/marko/test/fixtures/templates/layout-use/template.marko\":\nEXPECTED (/marko/test/fixtures/templates/layout-use/expected.html):\n---------\n<div>BODY CONTENT</div>FOOTER CONTENT<h1>HEADER CONTENT</h1><div>BODY CONTENT</div>FOOTER CONTENT<h1>VALUE HEADER</h1><div>BODY CONTENT</div>FOOTER CONTENT<h1>DEFAULT TITLE</h1><div>BODY CONTENT</div>FOOTER CONTENT\n---------\nACTUAL (/marko/test/fixtures/templates/layout-use/actual.html):\n---------\n<div></div><h1>DEFAULT TITLE</h1><div></div><h1>DEFAULT TITLE</h1><div></div><h1>DEFAULT TITLE</h1><div></div>\n---------\n```\n\nInstead of using the content from layout-put it falls back to the default if available.\n\nAny idea what's wrong here?\n That is strange. If I checkout the latest version with a blank npm install ... it's still failing. \n\nI'm using node 0.10.36.\n\nAny idea how I could triage this issue?\n Did the same on a different machine. Everything went fine without issues. Most likely it's just a problem with my machine. \n\nLet me know if you have any idea how I could isolate this issue.\n\nThanks\n-Vivian\n Yes, did that without success.\n\nAnyhow, found the issue.\n\nThere was a node_modules directory in a parent directory by accident. So for some reason it interfered with that and caused these errors.\n\nThanks for your quick help!\n-Vivian\n    The parser seems to be converting strings to logical values, for example 'and' is getting converted to '&&', and 'or' to '||'. It seems to be linked to the way html elements are nested. The text is being used in a <layout-put into=\"body\"> tag.\n\nHere is some html that breaks it:\n`<div class=\"c c2 span-8-collapse\">\n                    <div class=\"c-inner\">\n                        <dl class=\"summary-list\">\n                            <dt>\n                                <h3>Intuitive Features Wrapped Up In a Smart Interface</h3>\n                            </dt>\n                            <dd>\n                                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>\n                                <span class=\"blue\">&#9656; </span><a href=\"/features\">Explore the Features</a>\n                            </dd>\n\n```\n                        <dt>\n                            <h3>Pay-as-you-go + Monthly Plans Available</h3>\n                        </dt>\n                        <dd>\n                            <p>Whether you're publishing lots or publishing little we have a plan that's great value and can scale up/down as your needs do, and you're free to cancel anytime.</p>\n                            <span class=\"blue\">&#9656; </span><a href=\"/pricing\">Choose a plan that's right for you</a>\n                        </dd>\n                        <dt>\n                            <h3 class=\"green\">Start Now - No Obligation 14 Day Free Trial</h3>\n                        </dt>\n                        <dd>\n                            <p>We don't expect you to make a decision before you've kicked the tyres and shown your boss so we offer a no obligation 14 day free trial to everyone.</p>\n                            <span class=\"green\">&#9656; </span><a href=\"/features#analytics\" class=\"green\">Bored of reading and want to try it for yourself? Start your free trial now</a>\n                        </dd>\n                    </dl>\n                </div>\n            </div>`\n```\n I'm using the 'view-engine' and 'view-engine-marko' modules. I think the dependencies are well out of date. Is this still supported: https://github.com/patrick-steele-idem/view-engine-marko.git?\n  I created a custom tag component, app-fieldset, which can include other custom tags, eg. app-text-field.\nIt works fine if the inside custom tag are other types, but I get error if it refers itself.\n\nTemplate.marko in app-fieldset:\n\n`...\n<if test=\"fType === 'text'\">\n    <app-text-field viewModel=\"field\" />\n </if>\n <else-if test=\"fType === 'fieldset'\">\n   <app-fieldset viewModel=\"field\" /> //refers self \n </else-if>\n`\n\nThe error in console is:\nThu, 30 Apr 2015 04:14:22 GMT uncaughtException Invalid tag handler: [object Object]\nError: Invalid tag handler: [object Object]\n    at Function.deferredRenderer.renderer (...../node_modules/marko/runtime/helpers.js:35:19)\n    at deferredRenderer (..../node_modules/marko/runtime/helpers.js:27:26)\n    at module.exports.t (..../node_modules/marko/runtime/helpers.js:181:9)\n    at ..../src/components/app-fieldset/template.marko.js:59:15\n\nI used the latest version of marko: \"2.3.2\" per https://github.com/raptorjs/marko/issues/66\nbut seems not work for this case.\n\nThanks,\nSara\n Hi Patrick,\n\nYes, it has renderer.js and use option 1.\n\nThanks,\nSara\n\nFrom: Patrick Steele-Idem <notifications@github.com<mailto:notifications@github.com>>\nReply-To: raptorjs/marko <reply@reply.github.com<mailto:reply@reply.github.com>>\nDate: Thursday, April 30, 2015 8:06 AM\nTo: raptorjs/marko <marko@noreply.github.com<mailto:marko@noreply.github.com>>\nCc: sara xu <lijxu@ebay.com<mailto:lijxu@ebay.com>>\nSubject: Re: [marko] Custom tag self reference does not work (#69)\n\nHi Sara,\n\nDoes your <app-fieldset> custom tag have a renderer.js? If so, which syntax of the following does your renderer.js use?\n\nOption 1:\n\nexports.renderer = function(input, out) { ... }\n\nOption 2:\n\nmodule.exports = function renderer(input, out) { ... }\n\nIf you have a circular dependency you need to use Option 1 since it allows for a partially loaded module to be returned. It is recommended that you always use the syntax shown in Option 1. If you do not have a renderer.js then I'll probably need more details to reproduce the problem.\n\nThanks,\nPatrick\n\n\u2014\nReply to this email directly or view it on GitHubhttps://github.com/raptorjs/marko/issues/69#issuecomment-97830257.\n  Proposal #61 suggests some solution to simplify \"parent/child relationships\". I'm trying to understand how conceptually we are selling this solution to the end user. We are telling that user should \"connect\" parent and child tags, but maybe user does not need child tags? Maybe he just needs a way to express complex `input` object using declarative markup.\n\nIf we step back and overview tags again, we can say that tag is a function with the following signature:\n\n``` js\nvar customTag = function(input, out) {\n    // ...\n};\n```\n\nInstead of calling it directly in the code, we found a way to \"call\" it declaratively with the following markup:\n\n``` html\n<custom-tag title=\"Hello\" href=\"/some/url\" />\n```\n\nNaive equivalent of the above declarative \"call\" is the following function call:\n\n``` js\ncustomTag({ title: \"Hello\", href: \"/some/url\", renderBody: function() {} });\n```\n\nIt means that declarative `<custom-tag />` is used to define the shape of the `input` object for `customTag` function. Nothing new here, this is just an introduction.\n\nBut you can notice, that declaratively you can define only first-level properties or functions of the `input` object. \n### Alternative definition of the problem\n\nIn proposal #61 idea was to simplify parent/child relationship. But maybe we can solve the same problem if declarative \"call\" would support definition of complex `input` objects. Actually, the notion of the `target-property` suggests us that we are really looking to support complex `input` object, not just single-level attributes.\n\nSometimes we really would like to call our tag function with complex `input` object. In JavaScript this is really simple and straightforward:\n\n``` js\nappTabs({\n    orientation: \"vertical\",\n    tabs : [\n        { label: \"Tab 1\", renderBody: function() { return \"Content for Tab 1\" } },\n        { label: \"Tab 2\", renderBody: function() { return \"Content for Tab 2\" } }\n    ],\n    renderBody: function() { ... }\n};\n```\n\nToday we cannot easily do the same declaratively. We can pass `orientation` attribute, but we cannot pass `tabs[]` array. Proposal #61 tries to solve this, but conceptually it is a bit complex, because it requires to introduce another tag that is defined separately from the `attributes` attribute in `marko-taglib.json`, while still attaching to the `input` object with the help of `target-property`. I see mismatch here: from one side we have independent child tag, from other side we are trying to embed it to our parent's `input` object.\n\nWhat if the problem can be defined as the following: _how can we make declarative \"call\" of tag function that accepts complex `input` objects?_ This definition of the problem is differ from the current problem: _how can we simplify parent/child relationships?_\n### Proposal for `marko-taglib.json` syntax\n\nIf our tag function can accept complex `input` objects then shape of such object should be defined inside `attributes`, where we currently have support for only first-level attributes. Here is a possible definition of `app-tabs` taglib:\n\n``` js\n{\n    \"attributes\": {\n        \"orientation\": \"string\",\n        \"tabs\": {\n            \"type\": \"object[]\",\n            \"implicit\": true,    // only one attribute can be implicit (more about this below)\n            \"attributes\": {\n                \"label\": \"string\"\n            }\n    }\n}\n```\n### Nested tags vs. nested attributes\n\nNested tag is a complete Marko tag which is nested to another tag and can be reused. Nested attributes can look like ordinary Marko tags, but they cannot be reused outside of the root tag.\n\nIn the following example, `<app-panel />` is a nested tag, while `<app-tab />` is a nested attribute of `<app-tabs />`:\n\n``` html\n<app-tabs orientation=\"vertical\">\n    <app-tab label=\"Tab 1\">\n        <app-panel title=\"Title\" />\n    </app-tab>\n    <app-tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tab>\n</app-tabs>\n```\n\nWe cannot reuse `<app-tab />` outside of the root `<app-tabs />`. That is why this is a nested attribute. But we can reuse `<app-panel />`, because this is a nested tag.\n\nImportant part of this proposal is a proposal to treat nested tags differently from the nested attributes.\n### Proposal for the syntax of nested attributes\n\nThere are several possible ways to express nested attributes. First possible way is to use `tag-name.property` notation:\n\n``` html\n<app-tabs orientation=\"vertical\">\n    <app-tabs.tab label=\"Tab 1\">\n        <app-panel title=\"Title\" />\n    </app-tabs.tab>\n    <app-tabs.tab label=\"Tab 2\">\n        Content for Tab 2\n    </app-tabs.tab>\n</app-tabs>\n```\n\nThe following `input` object will be created (renderBody etc. are omitted):\n\n``` js\n{\n    \"orientation\": \"vertical\",\n    \"tabs\": [\n        { \"label\": \"Tab 1\" },\n        { \"label\": \"Tab 2\" },\n    ]\n```\n\nI saw such notation in the [XAML](https://msdn.microsoft.com/en-us/library/ms788723%28v=vs.110%29.aspx?f=255&MSPPError=-2147217396) language:\n\n``` xml\n<Button Text=\"Save\">\n  <Button.ContextMenu>   <!-- nested attribute -->\n    <ContextMenu>     <!-- nested tag -->\n      <MenuItem Header=\"1\">First item</MenuItem>\n      <MenuItem Header=\"2\">Second item</MenuItem>\n    </ContextMenu>\n  </Button.ContextMenu>\n  Right-click me!\n</Button>\n```\n\nSecond possible way is to use some special `param` tag, like in [Google Closure Templates](https://developers.google.com/closure/templates/docs/commands#param):\n\n``` txt\n{template <template_name>}\n  {@param <param_name>: <param_type>}\n  {@param? <optional_param_name>: <param_type>}\n  ...\n{/template}\n```\n\nIn case of Marko it can be `<@param attribute1=\"value\" attribute2=\"value\" />`, although I also don't like special symbols (maybe simple `<param ... />` is enough):\n\n``` html\n<app-tabs orientation=\"vertical\">\n    <@tab label=\"Tab 1\">\n        <app-panel title=\"Title\" />\n    </@tab>\n    <@tab label=\"Tab 2\">\n        Content for Tab 2\n    </@tab>\n</app-tabs>\n```\n\nMarko already has special syntax for string interpolation: `${value}`, `$!{value}` and `${value}`. Maybe it still worth to add another special syntax for nested attributes: `<@name />` or any other.\n\nI'm not voting for any particular syntax, my idea is to evaluate problem that we are trying to solve from different angle (from declarative definition of complex `input` objects). I'm sure that together we can find a better syntax.\n#### \n\nIn my comment to #61 I asked about support for more than one level of nested tags with the following use case:\n\n``` html\n<sidebar-navigation>\n    <sidebar-navigation-section title=\"Software\">\n        <sidebar-navigation-item href=\"/linux\" title=\"linux\"/>\n        <sidebar-navigation-item href=\"/windows\" title=\"Windows\"/>\n    </sidebar-navigation-section>\n    <sidebar-navigation-section title=\"Devices\">\n        <sidebar-navigation-item href=\"/ipad\" title=\"iPad\"/>\n        <sidebar-navigation-item href=\"/xbox\" title=\"Xbox\"/>\n    </sidebar-navigation-section>\n</sidebar-navigation>\n```\n\nWhen looking on this template, can you answer on what tags are \"nested tags\" and what are just \"nested attributes\"? It is hard to answer on this question without reading `marko-taglib.json`. If we can find a way to differentiate tags from attributes, it can be expressed in the following way (using some of the proposed syntax):\n\n``` html\n<sidebar-navigation>\n    <@section title=\"Software\">\n        <@item href=\"/linux\" title=\"linux\"/>\n        <@item href=\"/windows\" title=\"Windows\"/>\n    </@section>\n    <@section title=\"Devices\">\n        <@item href=\"/ipad\" title=\"iPad\"/>\n        <@item href=\"/xbox\" title=\"Xbox\"/>\n    </@section>\n</sidebar-navigation>\n```\n\nDefinition of this tag in `marko-taglib.json`:\n\n``` js\n{\n    \"attributes\": {\n        \"orientation\": \"string\",\n        \"sections\": {\n            \"type\": \"object[]\",\n            \"implicit\": true,    // only one attribute on the same level can be implicit \n            \"attributes\": {\n                \"title\": \"string\",\n                \"items\": {\n                    \"type\": \"object[]\",\n                    \"implicit\": true,   // only one attribute on the same level can be implicit \n                    \"attributes\": {\n                        \"title\": \"string\",\n                        \"href\": \"string\"\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\n`implicit` flag means that we can assign value to this property using shorter notation. Instead of this (technically valid):\n\n``` html\n<sidebar-navigation>\n    <@sections>\n        <@section title=\"Software\" />\n    </@sections>\n<sidebar-navigation>\n```\n\n We can write it in the shorter form:\n\n``` html\n<sidebar-navigation>\n    <@section title=\"Software\" />\n<sidebar-navigation>\n```\n\nIn XAML this flag is named [`ContentProperty`](https://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.markup.contentpropertyattribute.Aspx).\n#### Conclusion\n\nThis is just a proposal. You probably see much more corner stones than I am. \n\nThank you!\n It might be possible sidestep the tag-name issues and instead define a new marko-tag like `<attribute name=\"X\">value</attribute>`, which would set an attribute on the parent tag.  In this use-case the markup for the tabs might look something like:\n\n```\n<app-tabs>\n    <attribute name=\"tab\">\n        <attribute name=\"label\">Tab 1</attribute>\n        Content for Tab 1\n    </attribute>\n    <attribute name=\"tab\">\n        <attribute name=\"label\">Tab 2</attribute>\n        Content for Tab 1\n    </attribute>\n</app-tabs>\n```\n\nThis scheme could potentially be used for defining attributes on regular html tags as well as on our custom taglib tags too, though I have no idea how much complexity that would add to the parser.\n Interesting, I didn't know about <attr>.  Is that something that's intended to be documented and officially supported?\n\nI think the colon approach will result confusion since the `app-tabs` \"namespace\" wouldn't actually be declared, and could cause problems for people trying to use marko to generate xml.\n\nThe . or - separated syntax seems cleanest, if a little repetitive.  The ability to just declare arbitrary subtag names in the taglib definition could result in some interesting use-cases and has the potential to make the template markup more \"semantic\", which is a pretty big pro in my book.\n > I'm in favor of supporting the dot-notation for using nested tags in your HTML. \n> A short-hand of only using something like <.tab> would be great too if we can \n> tweak the HTML parser.\n\nBecause you are already planning to use `@` symbol for attributes, maybe it makes sense to introduce `@<nested-tag />` notation, instead of `<.nested-tag />` and `<@nested-tag />`:\n\n``` html\n<app-tabs>\n    @<tab label=\"Tab 1\">\n        Content for Tab 1\n    </tab>\n    @<tab label=\"Tab 2\">\n        Content for Tab 2\n    </tab>\n</app-tabs>\n```\n\nIt seems that in this case we shouldn't worry about HTML parsers and all editors will work fine with this syntax.\n\nAs a side note, we also can continue to use `$` symbol for this and do not introduce new symbol:\n\n``` html\n<app-tabs>\n    $<tab label=\"Tab 1\">\n        Content for Tab 1\n    </tab>\n    $<tab label=\"Tab 2\">\n        Content for Tab 2\n    </tab>\n</app-tabs>\n```\n\nMnemonic is the following: when `$` is in front of open curly bracket (`{`), you are going to evaluate JavaScript expression. When `$` is in front of open tag (`<tag>`), you are going to decoratively define  sub-property. \n\nBut I agree that `@` is suited better for attributes...\n  Hi,\nIs there a way to make a variable available to all layouts templates without having to pass it in every template.render()?\nFor example, i'm using <layout> and have a <app-nav> component in that layout. I want to be able to render/not render certain navigation elements depending on whether the suer is logged in or not. At present I have to pass a variable in every controller like this:\n`$global: { env: locals.env, user: locals.user }`\nbut I have to do that in every controller ( where I call template.render() ) e.g. login, signup etc etc. Is there any way to make variable available to all templates/components rather than sending the data each time in template.render()?\n\nThanks,\nPat\n  This proposal looks really nice! Just trying to understand how flexible it is. First thing that come to my mind is about more than one level of hierarchy. How can be the following tag described in `marko-taglib.json`:\n\n``` html\n<sidebar-navigation>\n    <sidebar-navigation-section title=\"Software\">\n        <sidebar-navigation-item href=\"/linux\" title=\"linux\"/>\n        <sidebar-navigation-item href=\"/windows\" title=\"Windows\"/>\n    </sidebar-navigation-section>\n    <sidebar-navigation-section title=\"Devices\">\n        <sidebar-navigation-item href=\"/ipad\" title=\"iPad\"/>\n        <sidebar-navigation-item href=\"/xbox\" title=\"Xbox\"/>\n    </sidebar-navigation-section>\n</sidebar-navigation>\n```\n\nAnd there are use-cases for unlimited hierarchy (though very uncommon):\n\n``` html\n<menu-widget>\n    <menu-item title=\"Help\">\n        <menu-item title=\"About\" />\n        <menu-item title=\"FAQ\" />\n    </menu-item>\n    <menu-item title=\"File\">\n        <menu-item title=\"Save\" />\n        <menu-item title=\"Open with\">\n            <menu-item title=\"Sublime\" />\n            <menu-item title=\"VIM\" />\n        </menu-item>\n    </menu-item>\n    <menu-item title=\"View\" />\n</menu-widget>\n```\n\nWill it be possible to describe such nesting? If we'll go with the proposed way, we need to define taglib inside taglib inside taglib :) \n\nHere is an example for the `sidebar-navigation` shown above:\n\n``` js\n{\n    \"attributes\": { },\n    \"taglib\": {\n        \"tags\": {\n            \"sidebar-navigation-section\": {\n                \"target-property\": \"sections[]\",\n                \"attributes\": {\n                    \"title\": \"string\"\n                },\n                \"taglib\": {\n                    \"tags\": {\n                        \"sidebar-navigation-item\": {\n                            \"target-property\": \"items[]\",\n                            \"attributes\": {\n                                \"href\": \"string\",\n                                \"title\": \"string\"\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n}\n```\n  In the latest Marko versions and in some cases `and` words in templates are replaced with `&&` symbols. \n\nFor this template:\n\n``` html\nWe're young.\n<div>\n    You and me are friends and teammates.\n</div>\n```\n\nThe following `*.marko.js` file will be generated:\n\n``` js\nout.w('We\\'re\\' \\'young. <div>You && me are friends && teammates.</div><div style=\"color:blue\">You '\n```\n## Necessary Conditions\n1. You should use `marko-layout` module.\n2. You should have unpaired `'` symbol in your template.\n\nThere are probably other conditions, when this issue happens, but I know only one set of conditions.\n## Minimal project\n\nHere I prepared a minimal project that will help to reproduce this issue:\nhttps://github.com/schetnikovich/marko-substitution-poltergeist\n# Reasons\n\nI don't know actual reason of this problem, but for the end user this is because of `'` symbol, that\nmakes all subsequent `and` words be replaced by `&&` symbol.\n\nIf you'll \"close\" single quotes, i.e. `We'are' young` - everything will be correct.\n# Workaround\n\nReplace all single quotes with the following:\n\n```\n$(\"'\")\n```\n Thank you very much for so quick fix! Issue disappeared. \n  I have three points regarding progressive rendering of marko templates.\n1. As out of order rendering requires JS on the client side, the docs should mention that as well (including the impact this has on on things like progressive enhancement etc.) The only mention of this that I have found is on the ebay tech blog article about progressive rendering. I might be missing something here; I made some thoughts, if out of order rendering could be achieved without the need of client side JS... unfortunately I did find a way to do so.... is this a point of interest for marko?\n2. I wonder, if google does correct indexing with out-of order rendering, as A) JS is required and B) the initial HTML is rendered into a hidden div. Point A might be a no-issue, since google (and others?) now performs JS when requesting pages. If not, point B is critical because hidden content could be ignored/identified as lower priority (less relevant to a page) so pages might not be correctly indexed. If google runs JS and considers the page when it is fully loaded, point B might be a no-issue. Please provide some thoughts/practical experiences regarding A and B.\n3. When running the examples on https://marko-progressive-rendering.herokuapp.com/?renderMode=progressive-in-order&jsLocation=middle everything is fine until you reload the iframe (hitting the inner refresh button on the page) in the chrome browser. Strangely, progressive rendering of async-elements only works when you move the mouse after refresh - Safari and Firefox render every chunk as soon as it arrives. Reloading the entire page in chrome shows the same effect while running the example in a separate window works fine (most of the time). I tested the behaviour with a bigger first chunk (additional textual data) but the data refuses to render until you move the mouse. It seems, that the browser ignores chunked responses and renders the content like a single chunk. I see the same behaviour on Mac and Linux. Does somebody know the reason and if this is a known/intended behaviour or a bug on the marko/chrome part?\n hi @patrick-steele-idem thanks for looking into the issue - I am fine with closing it - if something pops up again, I will create a new issue.\n\nSadly, I have not done any further investigation towards indexing but as soon as I get more information, I will share it.\n  Hi,\nI have a problem with components having their HTML tags closed, incorrectly, by the compiler. For example if I have the following components and html content (shown simplified):\n<app-header> (components/app-header/template.marko)\nHTML content: `<div class=\"wrapper\"><div class=\"content\">`\n\n<app-footer> (components/app-footer/template.marko)\nHTML content: `</div></div>`\n\nindex.js\nHTML content: `<app-header></app-header><div>content here</div><app-footer></app-footer>`\n\nI can see the problem. The `<app-header>` component's compiled .js file has added the closing 'div' tags automatically, which breaks the layout as the 'wrapper' and 'content' elements are now closed, when they should be left open to contain the main page content.\n\nIs there any setting to prevent this or a different way of laying out the pages?\n\nThanks,\nPat\n Ok, that makes sense. Once again thanks for the quick response and easy to understand explanation - it really makes a difference.\nThanks,\nPat\n  Hi,\nWhats the best way to pass data to components. At present it appears you have to pass data from every template to the components e.g. in index.marko you would have\n`<app-header title=\"$data.title\" env=\"$data.env\" csrf=\"$data.csrf\"></app-header>`\n\nI can then access the data from the component e.g.\n`<if test=\"data.env == 'development'\">`\n\nIf I try to access data.env without passing the data in from index.marko I get an error. Doing it this way if I want to pass new data into the app-header component in the future I would have to change ALL templates. \nIs there a better way of doing this?\n\nThanks,\nPat (new to Marko and Node)\n Wow, exactly what I needed, and fast! I can get on with a productive day, much appreciated.\n  ![marko0](https://cloud.githubusercontent.com/assets/8730277/6872950/1f4f32d8-d4ad-11e4-9edd-4718197d4ba5.png)\n ![marko1](https://cloud.githubusercontent.com/assets/8730277/6872952/2807186e-d4ad-11e4-8d85-26981939383d.png)\n :D these are the '< >'  it all can be customised I have .ai files saved\n Dumb, but worth the \"idea\".\n![marko-logo](https://cloud.githubusercontent.com/assets/105656/6873249/9affb1fc-d474-11e4-8e5f-65e7e15a4aa5.png)\n ![marko3](https://cloud.githubusercontent.com/assets/8730277/6873580/9f302990-d4b1-11e4-8c19-1c3eadfd3823.png)\n @philidem Yeah, I saw that as soon as I made it, but said, \"What the heck? Worth a post.\"\n ![marko2](https://cloud.githubusercontent.com/assets/8730277/6876374/2dc9b080-d4c7-11e4-8832-5a4347acf696.png)\nSince Marko is a dudes name I gave him some personality\n ![marko4](https://cloud.githubusercontent.com/assets/8730277/6876740/de88c28c-d4ca-11e4-990f-ca09efb4e3d9.png)\nSome Urban Style.\n Alright time to leave Illustrator. Good night Gentleman!, I will be bugging you tomorrow since I haven't implementetd optimizer yet ;)\n ![screen shot 2015-03-27 at 2 47 34 pm](https://cloud.githubusercontent.com/assets/7464488/6877671/72464764-d490-11e4-83b9-8d8fc7aedd66.png)\n\nMaybe you could play around with the color... \n ![marko3](https://cloud.githubusercontent.com/assets/6454552/8861384/755b9178-318a-11e5-967a-4b8990787b94.png)\n\nSome thoughts (additional love to detail required): \n- the brackets at the end should appear 3D \"stacked\"; meaning: tags can be wrapped... forming components... the \"k\" and the first bracket form the letter \"o\"\n- the font should appear dynamic, \"agile\", quick and nice\n- the sub text describes marko as template engine with binding (behavior) and gives an insight about how marko components are written\n Lol how about some fancy..\n\n${marko}\n\n   Ryan Pavely\n    Net Access\n    http://www.nac.net/\n\nOn 8/5/2015 1:53 PM, Patrick Steele-Idem wrote:\n\n> Accidentally pressed the wrong button... Comment updated with link to contest. Thanks.\n> \n> \u2014\n> Reply to this email directly or view it on GitHub https://github.com/marko-js/marko/issues/54#issuecomment-128090635.\n haha had a funny idea.... marko and an abstract grining face\n\n![marko_face](https://cloud.githubusercontent.com/assets/6454552/9115315/b139b948-3c5e-11e5-9edd-0ec5a9e25110.png)\n Well deserved, congrats Marko!\n  `c-input` works well for nested tags, but there are times when we need to pass down extra information from the parent tag, like this:\n\n```\n<tagname c-input=\"data.someObj\" attribute=\"test\"/>\n```\n\nExamples include when the parent contains the loop and we might need an index in the nested tag, or if parent tag-level logic affects a child tag. \n\nThis should also include support for passing a conditional, or at least a variable (that we can set with a conditional earlier in the file).\n\nThanks!\n Yes to @patrick-steele-idem and thanks!\n  Removing the else if block in order to allow complex var names on the left hand of the assignment.\n Funny, because I did the edits directly in Github. :-)\n\n## \n\nSean Gates\nSent from my iPhone\n\n> On Mar 18, 2015, at 5:15 PM, Phillip Gates-Idem notifications@github.com wrote:\n> \n> Please fix the jshint error so that the build will pass. Also, jshint plugins/packages for your code editor are really helpful if you don't have one installed.\n> \n> See https://travis-ci.org/raptorjs/marko/jobs/54955691\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n You bet!\n\n## \n\nSean Gates\nSent from my iPhone\n\n> On Mar 18, 2015, at 6:15 PM, Phillip Gates-Idem notifications@github.com wrote:\n> \n> Published marko@2.1.4\n> Thanks Sean!\n> \n> \u2014\n> Reply to this email directly or view it on GitHub.\n  Usecase:\n\nWe would like to add a library of components. The path would be:\n/node_modules/component-library/node_modules/custom-component/lib/\n\nIf the rendered template is somewhere else then this path won't be discovered. \n\nSuggestion:\n\nAdd a way to add paths to the [discovery feature](https://github.com/raptorjs/marko#taglib-discovery)\n That would be great. \n  Especially with regards to breaking changes and feature deprecations.\n\nIt will help us make informed decisions about if/when to upgrade and what app-changes we need to make to stay up to date with the latest and greatest.\n\nWe have gotten ourselves into trouble a few times with mismatched versions between marko and supporting modules. I think having an accurate Changelog on each module would be hugely helpful in tracking down where we went awry.\n\nThanks!\n Thanks @philidem -- That sounds like it would be a big help!\n Hi @patrick-steele-idem,\n\nI think the Marko ChangeLog was a bit out of date when I opened this issue, but it seems to be all caught up now.  Thanks for that!  (Or, I may just be crazy ...)\n\nUpgrade guides are definitely fantastic help, and much appreciated.\n\nIt seems some supporting modules don't have ChangeLogs, however, and that's what I was trying to get at in my initial message.  Here are a few, as examples: raptorjs/optimizer, raptorjs/optimizer-marko, raptorjs/optimizer-less.\n\nMaybe it wouldn't be practical or helpful to have Changelogs for each .. I'm not sure.  As a Marko-user, it's probably easier to have a single ChangeLog/Upgrade guide to follow.  But the interdependencies between modules complicates things.\n\nI like @philidem's suggestion of having some runtime detection of incompatibilities.\n\nMeanwhile, I'm using 'npm shrinkwrap' to freeze my module versions so that any future upgrades are deliberate and that is a working solution for me, for now.\n\nThank you for the great project!\n\n-Ben\n  Hello,\nis there a way to work with marko and webpack, a marko-loader perhaps ?\nThanks\n Thanks, i will try !\n @maxwarch Hi! Have you succeed with webpack and marko? I'd tried it and encountered the problem that webpack 'Cannot find module 'raptor-logging-impl''. Direct installation of 'raptor-logging-impl' doesn't help. Will be nice to get your feedback. Thanks!\n @KateKate hi, unfortunately i haven't the time to try this. I hope i will have !\n @patrick-steele-idem thank you for your feedback.\n It's a bit of a hack, but if a module uses `process` and it's bundled by webpack then webpack (and browserify) sets `process.browser: true`. So if the try/catches in raptor and marko's src are only there for the benefit of browserify then replacing them with `if(!process.browser)` would mean the code compiles properly in webpack too @patrick-steele-idem \n I've found, and found a potential workaround for, another bug in webpack.\n\nBecause, I guess, it places a higher importance on loading files with extensions other than `.js` webpack tries to load `mypartial.marko` rather than `mypartial.marko.js` when using `<include` in any template. The workaround I found is to compile `<include` to e.g. `__loadTemplate(require(\"../../components/nav/tpl.marko.js\"), require)` instead of `__loadTemplate(require.resolve(\"../../components/nav/tpl.marko\"), require)`\n\nWhether this breaks anything else I don't know. If it does I'll have a go at writing a marko loader for webpack, though it wouldn't surprise me if the use of `require.resolve` instead of a plain `require` is still   a problem\n On investigating, this would involve a change to TypeConverter. Is this something you'd consider?\n I tried with transform-loader and the markoify. It worked for me, but webpack does not track any changes in templates, so I just wrote no-brainer marko-loader for webpack, which solves this problem.\n\n``` js\nvar marko = require('marko/compiler');\n\nmodule.exports = function (source) {\n  if (this.cacheable) this.cacheable();\n\n  return marko.compile(source, '.', {\n    writeToDisk: false\n  });\n};\n```\n @sergiirocks I'm using your loader but getting this error when building:\n\n> the request of a dependency is an expression\n\nAny idea what might be happening?\n\nDo you have an example on how to use it in `webpack.config.js`?\n @patrick-steele-idem I have created this test project.\n\nhttps://github.com/PierBover/markojs-webpack-test\n\nYou just need to `npm install` and then `webpack` to reproduce the error.\n Awesome @patrick-steele-idem !\n It does work, although I'm still getting Webpack warnings:\n\n> WARNING in ./~/marko/runtime/stream/index-browser.js\n> Critical dependencies:\n> 6:17-40 the request of a dependency is an expression\n> 10:13-32 the request of a dependency is an expression\n>  @ ./~/marko/runtime/stream/index-browser.js 6:17-40 10:13-32\n  Hello,\n\nis there a way to use marko with webpack ?\n\nThanks\n  Please, please please :) Anything we can do to help. Any sample repo to use as reference?\nCheers!\n  I started writing some code that I was really hoping would work but it doesn't seem to. I was wondering if self-nested taglibs would be possible because it would be extremely handy for my use case:\n\n``` json\n{\n  \"tags\": {\n    \"mytag\": {\n      \"renderer\": \"./mytag\",\n      \"attributes\": {\n        \"data\": \"string\"\n      },\n      \"body-function\": \"getChildren(__children)\",\n      \"import-var\": {\n        \"children\": \"__children\"\n      }\n    }\n  }\n}\n```\n\n``` js\nexports.render = function(input, out) {\n  var children;\n  if (input.getChildren) {\n    children = [];\n    input.getChildren({\n      addChild: function(child) {\n        children.push(child);\n      }\n    });\n  }\n  if (input.children)\n    input.children.addChild(/* implementation detail */);\n  else\n    out.write(/* something utilizing children */);\n};\n```\n\n``` html\n<mytag data=\"a\">\n  <mytag data=\"b\" />\n  <mytag data=\"c\" />\n</mytag>\n```\n\nSo basically my question is whether or not it is somehow possible to include both \"body-function\" and \"import-var\" on the same tag and self-nest them. When I try this I get an error that __children is undefined. Is there a way to achieve this currently?\n I actually solved my problem for now with a hack of using `\"import-var\": { \"children\": \"arguments[1] }`, but obviously it would be much better if `children` existed in the compiled template and was null.\n Ah yeah that makes sense. I've replaced my hack with that and it's working great now. Thanks so much!\n Ok cool, I'm still trying to figure out exactly how this all works. I have a little ways to go I think but so far so good. I started looking through the tests and have modified my taglib to use `\"var\": \"children\"` now and I've removed `body-function` in favor of using `renderBody(out, {...})` in my renderer. It's working perfectly now. Although I don't feel like I can be completely confident that I'm doing everything correctly because the documentation is a little lacking in this area at the moment, but I'm sure that'll change in the future.\n\nFYI I'm building a simple taglib to render React components and it's actually working great. Maybe I'll publish it on npm if I get some time.\n  - https://github.com/raptorjs/marko/issues/28\n  This is not supported \n\n``` javascript\ntemplate.renderSync({\n  $global: {\n    foo: \"foo!\"\n   }\n});\n```\n\nBut this is (as seen in https://github.com/raptorjs/marko/issues/16)\n\n``` javascript\ntemplate.render{\n  $global: {\n    name: 'Frank'\n  }\n}, res);\n```\n\nThe issue seems to be that `$global` processing is missing from the `renderSync` function.\n\nhttps://github.com/raptorjs/marko/blob/master/runtime/marko-runtime.js#L65-L72\n\n``` javascript\nTemplate.prototype = {\n   renderSync: function(data) {\n       var out = new AsyncWriter();\n       out.sync();\n       this._(data, out);\n       out.end();\n       return out.getOutput();\n}\n```\n\nBut can be found in the `render` function.\n\nhttps://github.com/raptorjs/marko/blob/master/runtime/marko-runtime.js#L84-L126\n\n``` javascript\n render: function(data, out, callback) {\n      ...\n       var $global = data.$global;\n       if ($global) {\n           extend(out.global, $global);\n       }\n```\n  I am trying to target IE browsers with some simple IE conditionals, but it seem to fail in marko template.\n\nMy template has these simple conditionals, but its not getting targeted properly. I don\u2019t see the classes being added. (works however in plain html)\n\n&#x3C;!--[if lt IE 7]&#x3E; &#x3C;html class=&#x22;lt-ie9 lt-ie8 lt-ie7&#x22; lang=&#x22;${locale}&#x22;&#x3E; &#x3C;![endif]--&#x3E;\n&#x3C;!--[if IE 7]&#x3E; &#x3C;html class=&#x22;lt-ie9 lt-ie8&#x22; lang=&#x22;${locale}&#x22;&#x3E; &#x3C;![endif]--&#x3E;\n&#x3C;!--[if IE 8]&#x3E; &#x3C;html class=&#x22;lt-ie9&#x22; lang=&#x22;${locale}&#x22;&#x3E; &#x3C;![endif]--&#x3E;\n&#x3C;!--[if !IE]&#x3E; --&#x3E;&#x3C;html lang=&#x22;${locale}&#x22;&#x3E;&#x3C;!--&#x3C;![endif]&#x2014;&#x3E;\n\nanything to do with the HTML comment\u2019s?\n Hey @patrick-steele-idem, not a big deal, but you may want to update your code sample above to use `renderBody(out)` instead of `invokeBody()`\n I had noticed that even though they are preserved, variables weren't output correctly. I didn't dig into it too much, but I saw this issue and liked your `app-html` better anyway so I went with that.\n\nSo for example:\n\n```\n<!--[if IE 9]>\n<html class=\"ie9\" lang=\"$data.language\"> <![endif]-->\n<!--[if gt IE 9]><!-->\n<html lang=\"$data.language\">\n<!--<![endif]-->\n```\n\nWould end up as:\n\n```\n<!--[if IE 9]>\n<html class=\"ie9\" lang=\"$data.language\"> <![endif]-->\n<!--[if gt IE 9]><!-->\n<html lang=\"en\">\n<!--<![endif]-->\n```\n  Any value under the `value` attribute are referenced to marko `objects` but the same is not true for custom tags.\n\n```\n<assign var=\"options\" value = \"util.getOptions(options, pattern)\" />\n```\n\nCustom Tag only accepts `$DATA` \n\n```\n<ebayui-refit-itemgrid-pattern viewModel = $grid options = $options />\n```\n\nThe below code will through an error in marko\n\n```\n<ebayui-refit-itemgrid-pattern viewModel = \"grid\" options = \"options\" />\n```\n\nMarko should promote one way of passing variables to support consistency.\n  We are getting errors similar to what we see below, it will be great to get the entire stack trace here so we know what line has is the problem.\n\n```\nERROR r1coltv/src/controllers/dealsHub: { '0': [TypeError: Cannot read property 'left' of undefined] } bad error\n```\n Try accessing a property of an object which doesn't exist in the `renderer.js`. @patrick-steele-idem \n ```\nERROR r1coltv/src/controllers/dealsHub: { '0': [TypeError: Cannot read property 'a' of null] } bad error\n```\n\ntry running the code below\n\nrenderer.js\n\n```\nmodule.exports = function render(input, context) {\n    var t = null;\n    var a = t.a;\n    console.log(\"asdasd\", a);\n    var model = getTemplateModel(input);\n    if (model) {\n        if(model.options.mode === 'large'){\n            largeTemplate.render(model, context);\n        }else{\n            template.render(model, context);\n        }\n    }\n};\n```\n  Hey,\nThis might be a hard thing to integrate, but I'd like to discuss it, maybe you will find it useful.\nWhat want to accomplish is to load a component dynamically. Instead of using a html tag, I want to load it through a dedicated attributes value, lets say 'taglib'-attribute.\n\n``` html\n<div for=\"item in data.components\" taglib=\"$!{item.component}-component\" model=\"$!{item.value}\">\n```\n\nor\n\n``` html\n<div for=\"item in data.components\" taglib=\"item.component\" model=\"$!{item.value}\">\n```\n\nThe problem is, if we'd like to be able to use every template available, we would need some sort of index with template names and their relative path. Alternatively, we could scope the available templates to only a certain directory, which would be easier, but not as clean. \n\nThis would require us to have a compiled template like this.\n\n``` javascript\ntemplates = { \"component-one\": \"./components/component-one/template.marko\" };\nreturn function render(data, out) {\n      out.w('xxx');\n      forEach(data.components, function(item) {\n       __helpers.l(require.resolve(templates[item.component])).render({\"value\": str(item.value)}, out);\n      });\n    out.w('xxx');\n  };\n```\n\nor\n\n``` javascript\ntemplates = {\n            \"component-one\": __helpers.l(require.resolve(\"./components/component-one/template.marko\"))\n        };\nreturn function render(data, out) {\n      out.w('xxx');\n      forEach(data.components, function(item) {\n          templates[item.component].render({\"value\": str(item.value)}, out);\n      });\n    out.w('xxx');\n  };\n```\n\nOf course we could check, if array contains element etc. This is just a dirty example. I know that this adds a bit of an overhead to the lightweight templates, especially if you got lots of components, but I couldn't think of any different/better way of doing this without sacrificing client-side compatibility. What do you think?\n\nI could integrate it, though it will take me some time to dive into the code. A few hints where I find the responsible bits would surely help me.\n @philidem This is a nice approach, unfortunately not what I'm looking for.\n\nThanks to both of you for taking the time to respond in such detail., this helped me understand marko more. And sorry for apparently not explaining my issue properly, when re-reading the docs I found a great solution already in place: the `include`-tag. It seems to do all the required stuff like loading and rendering.\n\n```\n<include template=\"app/components/$!{item.component}/template.marko.html\" value=\"$!{item.value}\">\n```\n\nThis will help me get started for now!\n\nI will add .marko.html support to optimizer-marko in the next days.\n  Let's introduce a new tag attribute that will do the same thing as `body-only-if`.\nMost of the time the intention is to skip the container and the focus is less in the body.\n\n``` html\n<a href=\"${data.linkUrl}\" body-only-if=\"!data.linkUrl\">\n    Some body content\n</a>\n```\n\nCan get changed to:\n\n``` html\n<a href=\"${data.linkUrl}\" render-tag-if=\"data.linkUrl\">\n    Some body content\n</a>\n```\n I think you had a good point. The meaning of `body-only-if` is more clear than `render-tag-if`, because, like you said, the condition is relative to the content in the tag, not to the tag itself. \n Not really important but \"body-only-if\" confused me at first since it could be read as \"render body, only if condition\", instead of \"render body only, if condition\". May be changing to \"only-body-if\" could make it clearer...?\n Good suggestion, `only-body-if` seems much clearer to me. I was also confused when I first used this feature.\n I would add to this that maybe `only-body-when` or `only-body-if` make sense :)  Maybe the current wording comes off a bit strange because it intends to group the words \"body only,\" but \"only if\" is already a phrase (as in \"if and only if\").  the Html color highlighting is not good enough for marko template files in Sublime, it will be great if we can create one for Marko templates\n Hey guys, I just started working w/ Marko recently and found this thread.\n\nI've ported your Atom grammar file to a Sublime/Textmate format.  I've also ported the snippets as sublime completions.  Should be handy for us ST fans.\n\nhttps://github.com/merwan7/sublime-marko\n\nI've currently got a [PR](https://github.com/wbond/package_control_channel/pull/4652) to get this into the Package Control default channel.  Will update the readme once it gets merged.\n @patrick-steele-idem. Sure thing!  I will update that section as soon as it's added to the package control channel.\n\nI couldn't find a tool to convert the grammars in that direction (atom->tm) so I wrote a little script which I am still working on, actually (will add to github soon).  There was some manual effort involved, too :)\n Not to toot my own horn here, but I ported @merwan7's Sublime syntax package to VS Code :). For anyone needing this, check it out here:\nhttps://github.com/pcanella/vscode-marko\n  There are several use-cases where you\u2019d want .html files instead of .marko files. So I\u2019ve added support for \u201e.marko.html\u201c files.\n Hey, thanks for the quick reply, I've refactored the code as requested, it should be all fine now. The tests do pass.\n  I was struggling with this issue for an hour until one of our coworkers told me how to do it.\nPlease add it to the documentation. ( to reassign a value to an existing variable we need to use assign)\n\n```\n<assign var=\"itemModel\" value=\"items[itemIndex]\" />\n```\n  Yes please :)\n  Is it possible to programmatically call taglibs?\n\nCurrently we can do the following when including template fragments:\n\n```\n<include template=\"src/modules/${module.alias}.marko\"/>\n```\n\nI can include a different template based on the value of \"module.alias\".\n\nI'd like to be able to have the same logic with taglibs. Something like this:\n\n```\n<var name=\"path\" value=\"data.type\" />\n<app-test-${path} attr1=\"${data.attr1}\" attr2=\"${data.attr2}\" attr2=\"${data.attr2}\"/>\n```\n\nCurrently I can do the following:\n\n```\n<if test=\"data.type === \"a\">\n    <app-test-a attr1=\"${data.attr1}\" attr2=\"${data.attr2}\" attr2=\"${data.attr2}\"/>\n</if>\n<else-if test=\"data.type === \"b\">\n    <app-test-b attr1=\"${data.attr1}\" attr2=\"${data.attr2}\" attr2=\"${data.attr2}\"/>\n</else-if>\n<else>\n    <app-test-c attr1=\"${data.attr1}\" attr2=\"${data.attr2}\" attr2=\"${data.attr2}\"/>\n</else>\n```\n\nThis would work but I'd like to avoid having to copy over the same parameter code.\n This will work. Thanks.\n  ```\n<my-first-tag>\n<my-second-tag>\n```\n\nThe new line between these two custom tags should be preserved.\n  Hi,\n\nI need to define my custom tags using `marko` node module but not using JSON files described [here](https://github.com/raptorjs/marko#marko-taglibjson).\n\nMaybe there is something like that?\n\n``` javascript\nvar marko = require('marko');\n\nmarko.defineTag('my-hello', {\n  renderer: require('./hello-renderer'),\n  attributes: {\n    name: 'string'\n  }\n});\n```\n Thank you, @philidem! \nLooking forward to use this feature in my project.\n I agree with you, this is right decision in this case.\n\nBut in my situation I need to integrate Marko into my framework. It means I need to register some module-wrappers as custom tags and it is needed to do before calling `compile` method.\n\nActually, this is not a big problem for me because I have simplified stream-based HTML parser for using these module-wrappers as custom tags. I just wanted to remove my implementation and replace it with Marko functionality.\n\nThank you, anyway.\n  I really like the idea of html templating, but I discovered an issue when I tried to use it in my usual dev flow.\n\nAs I understand: \nnow the require-able templates are made possible through a temp file\n\n```\nfs.writeFileSync(tempFile, compiledSrc, {encoding: 'utf8'});\nfs.renameSync(tempFile, targetFile);\nreturn require(targetFile);\n```\n\nand although you can bust template cache with `unload(templatePath)`, this doesn't clear node's module cache. So every time you `require(targetFile)` it will return the same compiled template regardless your meddling with marko's cache. \nIt's possible to clear node's cache with `delete require.cache[\"absolutePath\"]` though, but manually it would be tedious to track every unneeded compiled template.\n\nThe problem this makes is during development when a file changes, I want to clear the cache so the engine can re-render the template, or refresh the browser for instance. \n\nI think writing the compiled template to disk should be a feature, or an option, rather than a byproduct of rendering. \n\nIs there a way not to write the compiled template directly to disk, but rather keep it only in memory?\nI think it would be useful in development.\n\nThanks in advance!\n Yes, restarting the whole process is a way. But it takes a little more time than just letting a few templates re-render. And updating templates is a fairly frequent occurrence sometimes.\n\nAbout the hackery: once I saw a method where a module was loaded from raw string and executed. I think it's a way of instantiating modules on the fly. \n...\nAh, there, I found it: http://nodejs.org/api/vm.html\nBut it's not really module loading/creating though.\n Well first, I really appreciate the detailed response.\nIndeed you can clear node's require cache, I thought about that too. A bit hacky for my taste, but that's just me. \n\nAs for the template loading for disk: I see, a sound reason. I've always missed the ability to debug templates (easily). Although I have to admit, it feels clutter to generate a script for each template, but it might just take some getting used to. I see the benefits however.\n\nAnd thank you for the resources, I'll check them out soon. \n Have to said that I'm really interested in this issue but I can't get it to work.\n\nMy workflow\n\nadding this to the top of app.js\n\n``` javascript\nvar marko = require(\"marko\")\nrequire('marko/browser-refresh').enable()\nrequire('marko/hot-reload').enable()\n\nrequire('fs').watch('web/marko', function (event, filename) {\n  if (/\\.marko$/.test(filename)) {\n    require('marko/hot-reload').handleFileModified(filename);\n  }\n});\n```\n\nAt this point starting my app with iojs app.js doesn't serve the template anymore and got TypeError: Cannot read property 'pipe' of undefined, \n\nThen I npm install browser-refresh and browser-refresh-taglib and add <browser-refresh enabled=\"true\" /> to my layout\n\n``` javascript\nvar server = app.listen(3000, function() {\n    var host = server.address().address\n    var port = server.address().port\n\n    console.log('App listening at http://%s:%s', host, port)\n\n    if (process.send) {\n      process.send('online');\n      console.log('Sending online message')\n    }\n\n})\n```\n\nInside the listen of app.\n\nFinally launching the command with browser-refresh \n\n```\n[browser-refresh] App started (pid: 7888)\n[browser-refresh] Waited 1500ms without receiving \"online\" from child process. Page refresh triggered over WebSockets co\nnnection.\nApp listening at http://:::3000\nSending online message\n[browser-refresh] Server is ready. Page refresh triggered over WebSockets connection.\n::1\nTypeError: Cannot read property 'pipe' of undefined\n    at E:\\JS.Next\\app.js:71:27\n    at Layer.handle [as handle_request] (E:\\JS.Next\\node_modules\\express\\lib\\router\\layer.js:82:5)\n    at next (E:\\JS.Next\\node_modules\\express\\lib\\router\\route.js:110:13)\n    at Route.dispatch (E:\\JS.Next\\node_modules\\express\\lib\\router\\route.js:91:3)\n    at Layer.handle [as handle_request] (E:\\JS.Next\\node_modules\\express\\lib\\router\\layer.js:82:5)\n    at E:\\JS.Next\\node_modules\\express\\lib\\router\\index.js:267:22\n    at Function.proto.process_params (E:\\JS.Next\\node_modules\\express\\lib\\router\\index.js:321:12)\n    at next (E:\\JS.Next\\node_modules\\express\\lib\\router\\index.js:261:10)\n    at E:\\JS.Next\\node_modules\\express-stormpath\\lib\\stormpath.js:171:7\n    at E:\\JS.Next\\node_modules\\express-stormpath\\node_modules\\async\\lib\\async.js:254:17\n```\n\nAlso require('marko/browser-refresh').enable() is already calling hotreload.\n\nI'm not sure where I miss the point in the setup ! \n\nHotReload is called in the debugging and here's how I called my template\n\n``` javascript\nvar formulaTemplate = marko.load(require.resolve('./web/marko/formula.marko'))\napp.get('/formula', function(req, res) {\n  formulaTemplate.stream().pipe(res)\n})\n```\n It's a whole new project all packages are up to date on Windows.\nReplacing pipe() with the direct rendering solved the problem.\nAll is working now, it's great to play like this to better understand Marko.\n\nAlso I supposed that browser-refresh called 'node' cmd and no more 'iojs', is there a way to tune this ?\n\nThx Patrick !\n Hi Patrick, here's another beginner question,\n\nI have a fragment that render properly when directly called.\n\nFor testing purpose I only use this code :\n\nHello ${data.name}!\n\n<ul if=\"notEmpty(data.colors)\">\n  <li style=\"color: $color\" for=\"color in data.colors\">\n    $color\n  </li>\n</ul>\n\n<div else>\n  No colors!\n</div>\n\nThis fragment is then included in the main layout but when I render a page\nthat extend the layout the\n$data fields are no more presents and the resulting html is different from\na direct call. How is that possible ?\n  A couple minor fixes.\n", "text_all_count": 84848, "text_word_token": ["Fix", "up", "dangling", "backtick", "NUMBER", "Include", "miss", "code", "snippet", "NUMBER", "TAG", "Description", "TAG", "Motivation", "and", "Context", "TAG", "TAG", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "fe", "NUMBER", "a", "NUMBER", "cc", "NUMBER", "f", "NUMBER", "b", "NUMBER", "dde", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "on", "newyork", "anthonyng", "feature", "an", "fix", "marko", "vs", "react", "docs", "into", "NUMBER", "e", "NUMBER", "dcc", "NUMBER", "f", "NUMBER", "a", "NUMBER", "a", "NUMBER", "b", "NUMBER", "e", "NUMBER", "dfe", "NUMBER", "ca", "NUMBER", "c", "NUMBER", "ee", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "TAG", "Description", "TAG", "Add", "silent", "option", "to", "browser", "refresh", "and", "hot", "reload", "NUMBER", "Motivation", "and", "Context", "TAG", "TAG", "LINK", "js", "marko", "issue", "NUMBER", "Screenshots", "if", "appropriate", "N", "A", "Checklist", "TAG", "TAG", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "bf", "NUMBER", "c", "NUMBER", "dfda", "NUMBER", "fe", "NUMBER", "c", "NUMBER", "b", "NUMBER", "fef", "on", "nahtnam", "silent", "into", "deb", "NUMBER", "bb", "NUMBER", "fdcba", "NUMBER", "de", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ce", "NUMBER", "c", "NUMBER", "b", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "bf", "NUMBER", "c", "NUMBER", "dfda", "NUMBER", "fe", "NUMBER", "c", "NUMBER", "b", "NUMBER", "fef", "on", "nahtnam", "silent", "into", "deb", "NUMBER", "bb", "NUMBER", "fdcba", "NUMBER", "de", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ce", "NUMBER", "c", "NUMBER", "b", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "bf", "NUMBER", "c", "NUMBER", "dfda", "NUMBER", "fe", "NUMBER", "c", "NUMBER", "b", "NUMBER", "fef", "on", "nahtnam", "silent", "into", "deb", "NUMBER", "bb", "NUMBER", "fdcba", "NUMBER", "de", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ce", "NUMBER", "c", "NUMBER", "b", "NUMBER", "on", "marko", "js", "master", "NUMBER", "TAG", "New", "Feature", "Add", "an", "option", "quiet", "or", "silent", "that", "will", "stop", "console", "outputs", "NUMBER", "Description", "TAG", "Add", "the", "option", "somewhere", "like", "require", "marko", "browser", "refresh", "NUMBER", "enable", "quiet", "true", "that", "will", "stop", "console", "NUMBER", "logs", "like", "the", "following", "from", "be", "printed", "NUMBER", "marko", "hot", "reload", "File", "modify", "Users", "nahtnam", "Desktop", "test", "app", "template", "hello", "index", "NUMBER", "marko", "Context", "TAG", "TAG", "I", "be", "work", "on", "a", "site", "and", "my", "console", "output", "every", "time", "my", "server", "restarts", "be", "bloated", "NUMBER", "To", "reduce", "clutter", "it", "would", "be", "great", "to", "have", "a", "quiet", "option", "that", "would", "only", "print", "if", "there", "be", "an", "error", "or", "warning", "NUMBER", "Possible", "Implementation", "N", "A", "Open", "Questions", "N", "A", "Is", "this", "something", "you", "re", "interested", "in", "work", "on", "No", "I", "could", "try", "but", "someone", "would", "have", "to", "go", "over", "the", "code", "since", "I", "have", "almost", "no", "experience", "with", "Marko", "NUMBER", "EDIT", "Is", "the", "main", "branch", "master", "or", "something", "else", "I", "cant", "find", "a", "contributors", "guide", "NUMBER", "patrick", "steele", "idem", "austinkelleher", "Thanks", "for", "your", "comments", "NUMBER", "I", "think", "I", "know", "how", "to", "do", "it", "NUMBER", "My", "only", "question", "be", "Here", "LINK", "reload", "NUMBER", "js", "L", "NUMBER", "I", "will", "add", "a", "option", "parameter", "which", "will", "check", "be", "silent", "be", "defined", "defaults", "to", "false", "NUMBER", "Do", "I", "add", "that", "option", "to", "the", "runtime", "variable", "so", "the", "silent", "option", "can", "be", "accessed", "in", "the", "other", "function", "I", "still", "need", "to", "finish", "the", "checklist", "but", "its", "a", "start", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "c", "NUMBER", "d", "NUMBER", "ba", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "a", "NUMBER", "bd", "NUMBER", "c", "NUMBER", "e", "NUMBER", "fba", "on", "NUMBER", "dynamic", "root", "id", "attr", "into", "fe", "NUMBER", "da", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cebea", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "cf", "NUMBER", "eb", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "f", "NUMBER", "f", "NUMBER", "e", "NUMBER", "d", "on", "NUMBER", "dynamic", "root", "id", "attr", "into", "fe", "NUMBER", "da", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cebea", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "cf", "NUMBER", "eb", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "f", "NUMBER", "f", "NUMBER", "e", "NUMBER", "d", "on", "NUMBER", "dynamic", "root", "id", "attr", "into", "fe", "NUMBER", "da", "NUMBER", "c", "NUMBER", "ae", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cebea", "on", "master", "NUMBER", "Closes", "NUMBER", "TAG", "Description", "TAG", "Motivation", "and", "Context", "TAG", "TAG", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "X", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "bb", "NUMBER", "ac", "NUMBER", "bcd", "NUMBER", "c", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "on", "newyork", "anthonyng", "feature", "an", "fix", "webpack", "readme", "into", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "ec", "NUMBER", "e", "NUMBER", "e", "NUMBER", "adf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "bb", "NUMBER", "ac", "NUMBER", "bcd", "NUMBER", "c", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "on", "newyork", "anthonyng", "feature", "an", "fix", "webpack", "readme", "into", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "ec", "NUMBER", "e", "NUMBER", "e", "NUMBER", "adf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "bb", "NUMBER", "ac", "NUMBER", "bcd", "NUMBER", "c", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "on", "newyork", "anthonyng", "feature", "an", "fix", "webpack", "readme", "into", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "ec", "NUMBER", "e", "NUMBER", "e", "NUMBER", "adf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "bb", "NUMBER", "ac", "NUMBER", "bcd", "NUMBER", "c", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "on", "newyork", "anthonyng", "feature", "an", "fix", "webpack", "readme", "into", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "ec", "NUMBER", "e", "NUMBER", "e", "NUMBER", "adf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "a", "NUMBER", "f", "NUMBER", "ef", "NUMBER", "b", "NUMBER", "d", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cbbf", "NUMBER", "f", "on", "newyork", "anthonyng", "feature", "an", "fix", "webpack", "readme", "into", "NUMBER", "e", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "bf", "NUMBER", "ec", "NUMBER", "e", "NUMBER", "e", "NUMBER", "adf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "TAG", "Bug", "Report", "Typo", "inside", "the", "webpack", "markdown", "file", "NUMBER", "Context", "TAG", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "As", "far", "as", "I", "know", "the", "TAG", "tag", "cannot", "be", "self", "closing", "and", "should", "be", "change", "to", "html", "TAG", "TAG", "I", "can", "make", "a", "PR", "to", "fix", "this", "if", "this", "makes", "sense", "NUMBER", "Expected", "Behavior", "TAG", "Actual", "Behavior", "TAG", "Possible", "Fix", "TAG", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Link", "to", "your", "project", "Steps", "to", "Reproduce", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Stack", "Trace", "TAG", "TAG", "patrick", "steele", "idem", "Awesome", "NUMBER", "I", "m", "starting", "to", "dig", "into", "Marko", "and", "was", "assuming", "that", "it", "support", "self", "closing", "script", "tags", "NUMBER", "I", "created", "a", "new", "PR", "LINK", "js", "marko", "pull", "NUMBER", "to", "address", "this", "NUMBER", "Let", "me", "know", "if", "anything", "else", "be", "needed", "NUMBER", "Bug", "Report", "Context", "component", "state", "be", "out", "of", "scope", "inside", "the", "include", "tag", "Expected", "Behavior", "pass", "state", "variable", "to", "include", "template", "Actual", "Behavior", "state", "be", "undefined", "Steps", "to", "Reproduce", "I", "have", "a", "component", "something", "like", "marko", "class", "onCreate", "this", "NUMBER", "ate", "id", "NUMBER", "works", "fine", "TAG", "state", "be", "undefined", "TAG", "TAG", "Stack", "Trace", "Uncaught", "ReferenceError", "state", "be", "not", "defined", "at", "render", "index", "NUMBER", "marko", "NUMBER", "at", "safeRender", "renderable", "NUMBER", "js", "NUMBER", "at", "Template", "NUMBER", "render", "renderable", "NUMBER", "js", "NUMBER", "at", "doInclude", "include", "tag", "NUMBER", "js", "NUMBER", "at", "includeTag", "include", "tag", "NUMBER", "js", "NUMBER", "at", "render", "index", "NUMBER", "marko", "NUMBER", "at", "Template", "NUMBER", "renderSync", "renderable", "NUMBER", "js", "NUMBER", "at", "Object", "NUMBER", "TAG", "index", "desktop", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "at", "__webpack_require__", "bootstrap", "e", "NUMBER", "ec", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "TAG", "emitter", "NUMBER", "js", "NUMBER", "That", "s", "great", "worked", "straight", "away", "NUMBER", "Thanks", "for", "the", "quick", "response", "NUMBER", "The", "space", "after", "the", "input", "was", "a", "typo", "NUMBER", "Will", "avoid", "use", "id", "in", "the", "future", "Seems", "to", "be", "relate", "with", "NUMBER", "as", "error", "be", "the", "same", "staying", "at", "NUMBER", "solves", "the", "problem", "Installing", "NUMBER", "works", "fine", "for", "me", "with", "npm", "NUMBER", "NUMBER", "Can", "t", "reproduce", "that", "on", "node", "NUMBER", "with", "NPM", "NUMBER", "and", "NUMBER", "so", "it", "was", "either", "my", "misconfiguration", "or", "something", "already", "fix", "NUMBER", "Will", "close", "the", "issue", "thank", "you", "everything", "worked", "fine", "up", "until", "upgrading", "to", "marko", "NUMBER", "when", "build", "with", "webpack", "this", "error", "cropped", "up", "var", "markoCompiler", "function", "webpackMissingModule", "var", "e", "new", "Error", "Cannot", "find", "module", "NUMBER", "e", "NUMBER", "code", "MODULE_NOT_FOUND", "throw", "e", "Downgrading", "to", "marko", "NUMBER", "could", "fix", "the", "problem", "NUMBER", "What", "s", "wrong", "please", "I", "add", "a", "github", "project", "to", "reproduce", "the", "problem", "LINK", "Documentation", "be", "not", "proper", "We", "be", "developing", "Progressive", "Web", "App", "NUMBER", "we", "need", "client", "side", "Routing", "Mechanism", "like", "Iron", "Router", "or", "react", "Router", "and", "Ember", "Routing", "NUMBER", "Check", "out", "LINK", "js", "marko", "issue", "NUMBER", "Hey", "mauricionr", "Marko", "NUMBER", "We", "have", "developed", "webiste", "and", "mobile", "website", "use", "Marko", "NUMBER", "and", "Marko", "Widget", "NUMBER", "Can", "you", "suggest", "We", "want", "to", "upgrade", "to", "Marko", "NUMBER", "NUMBER", "Like", "Marko", "start", "provide", "state", "in", "Marko", "NUMBER", "NUMBER", "Please", "suggest", "me", "regard", "this", "gilbert", "patrick", "steele", "idem", "Can", "you", "suggest", "me", "for", "Marko", "NUMBER", "We", "be", "use", "marko", "NUMBER", "and", "marko", "widget", "NUMBER", "I", "want", "to", "upgrade", "for", "marko", "NUMBER", "NUMBER", "In", "Marko", "NUMBER", "u", "r", "proving", "state", "View", "architecture", "We", "can", "eliminate", "Marko", "Widgets", "anupdineout", "this", "issue", "LINK", "js", "marko", "issue", "NUMBER", "has", "good", "stuff", "about", "markov", "NUMBER", "and", "markov", "NUMBER", "patrick", "steele", "idem", "any", "suggestion", "for", "Progressive", "Web", "app", "in", "Marko", "Js", "for", "Mobile", "website", "NUMBER", "Can", "you", "provide", "any", "documenation", "or", "git", "demo", "project", "NUMBER", "i", "m", "following", "lighthouse", "NUMBER", "for", "best", "practices", "on", "PWA", "npm", "install", "g", "lighthouse", "I", "dont", "know", "patrick", "steele", "idem", "LINK", "little", "router", "do", "not", "provide", "support", "for", "MarkoJS", "have", "you", "seen", "this", "one", "anupdineout", "LINK", "path", "router", "mauricionr", "patrick", "steele", "idem", "Can", "you", "help", "me", "to", "use", "es", "NUMBER", "in", "MarkoJS", "NUMBER", "mauricionr", "patrick", "steele", "idem", "LINK", "path", "router", "I", "checked", "this", "its", "not", "work", "for", "me", "NUMBER", "I", "need", "Client", "Side", "routing", "otherwise", "I", "need", "to", "switch", "the", "Technology", "from", "Marko", "NUMBER", "to", "React", "NUMBER", "Please", "Suggest", "Why", "be", "not", "work", "for", "you", "Hello", "anupdineout", "I", "would", "be", "happy", "to", "help", "you", "get", "marko", "path", "router", "set", "up", "NUMBER", "Please", "create", "an", "issue", "on", "my", "repo", "detailing", "the", "problem", "you", "be", "having", "so", "that", "we", "can", "work", "through", "them", "together", "NUMBER", "charlieduong", "NUMBER", "Thanks", "for", "revert", "back", "NUMBER", "Thats", "was", "some", "issue", "with", "KOA", "Aysnc", "setup", "NUMBER", "Now", "work", "for", "me", "ayground", "do", "not", "contain", "lasso", "TAG", "Description", "TAG", "Motivation", "and", "Context", "TAG", "TAG", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "be", "NUMBER", "de", "NUMBER", "ebdf", "NUMBER", "bcbb", "NUMBER", "e", "NUMBER", "b", "NUMBER", "f", "NUMBER", "de", "NUMBER", "d", "on", "tindli", "patch", "NUMBER", "into", "a", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "e", "NUMBER", "c", "NUMBER", "bbe", "NUMBER", "d", "NUMBER", "cb", "NUMBER", "bdf", "NUMBER", "b", "on", "marko", "js", "master", "NUMBER", "TAG", "Description", "TAG", "Motivation", "and", "Context", "TAG", "TAG", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "d", "NUMBER", "a", "NUMBER", "c", "NUMBER", "bc", "NUMBER", "aab", "NUMBER", "e", "NUMBER", "on", "tindli", "patch", "NUMBER", "into", "NUMBER", "fbf", "NUMBER", "edd", "NUMBER", "eb", "NUMBER", "a", "NUMBER", "f", "NUMBER", "d", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "d", "NUMBER", "cb", "NUMBER", "fd", "NUMBER", "f", "NUMBER", "eb", "NUMBER", "d", "NUMBER", "c", "NUMBER", "on", "dist", "dir", "into", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "bcb", "NUMBER", "dc", "NUMBER", "ae", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ed", "NUMBER", "e", "NUMBER", "c", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "cf", "NUMBER", "a", "NUMBER", "fefa", "NUMBER", "bc", "NUMBER", "ae", "NUMBER", "ce", "NUMBER", "ab", "NUMBER", "on", "NUMBER", "xml", "unrecognized", "tags", "into", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "bcb", "NUMBER", "dc", "NUMBER", "ae", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ed", "NUMBER", "e", "NUMBER", "c", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "cf", "NUMBER", "a", "NUMBER", "fefa", "NUMBER", "bc", "NUMBER", "ae", "NUMBER", "ce", "NUMBER", "ab", "NUMBER", "on", "NUMBER", "xml", "unrecognized", "tags", "into", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "bcb", "NUMBER", "dc", "NUMBER", "ae", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ed", "NUMBER", "e", "NUMBER", "c", "NUMBER", "on", "master", "NUMBER", "TAG", "Description", "TAG", "enable", "res", "NUMBER", "marko", "can", "catch", "a", "error", "safe", "use", "like", "javascript", "res", "NUMBER", "marko", "NUMBER", "NUMBER", "catch", "err", "next", "err", "Motivation", "and", "Context", "TAG", "TAG", "enable", "res", "NUMBER", "marko", "can", "catch", "a", "error", "safe", "see", "issue", "NUMBER", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "fff", "NUMBER", "dea", "NUMBER", "dca", "NUMBER", "c", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "b", "NUMBER", "bb", "NUMBER", "fd", "NUMBER", "b", "NUMBER", "on", "moonrailgun", "patch", "NUMBER", "into", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "dfd", "NUMBER", "a", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "my", "pleasure", "I", "actually", "start", "encountering", "this", "today", "and", "have", "provide", "an", "example", "LINK", "widget", "test", "tree", "NUMBER", "It", "seems", "that", "the", "onMount", "of", "child", "components", "be", "not", "be", "executed", "at", "all", "nor", "be", "events", "be", "assigned", "NUMBER", "If", "the", "parent", "component", "has", "no", "component", "logic", "no", "module", "NUMBER", "export", "or", "class", "then", "it", "works", "just", "fine", "NUMBER", "I", "provide", "two", "examples", "one", "with", "the", "class", "logic", "one", "without", "NUMBER", "I", "ve", "sat", "on", "this", "one", "for", "a", "couple", "days", "and", "I", "have", "to", "say", "that", "I", "have", "no", "definitive", "conclusion", "on", "my", "stance", "with", "this", "NUMBER", "I", "understand", "the", "performance", "gains", "with", "only", "having", "the", "input", "state", "for", "the", "top", "level", "UI", "component", "serialized", "down", "to", "the", "browser", "NUMBER", "However", "this", "method", "makes", "the", "combination", "of", "components", "rather", "lacking", "NUMBER", "With", "the", "current", "behavior", "in", "marko", "NUMBER", "each", "instance", "where", "a", "developer", "be", "going", "to", "want", "nested", "components", "to", "be", "different", "for", "every", "page", "will", "fail", "to", "fully", "boot", "NUMBER", "Unless", "that", "be", "the", "developer", "explicitly", "creates", "different", "variations", "of", "the", "parent", "component", "with", "the", "desired", "top", "level", "UI", "components", "or", "the", "component", "be", "utilized", "just", "as", "a", "template", "NUMBER", "The", "former", "bloats", "the", "number", "of", "components", "while", "the", "latter", "would", "remove", "any", "sort", "of", "logic", "you", "may", "want", "to", "apply", "to", "the", "parent", "component", "NUMBER", "patrick", "steele", "idem", "I", "was", "just", "looking", "through", "the", "commit", "log", "looks", "wonderful", "NUMBER", "I", "ll", "run", "it", "through", "some", "test", "on", "my", "end", "and", "let", "you", "know", "if", "there", "be", "any", "problem", "NUMBER", "I", "be", "use", "vue", "NUMBER", "js", "at", "the", "moment", "and", "be", "interested", "in", "Marko", "NUMBER", "They", "be", "very", "similar", "and", "make", "it", "easy", "to", "transition", "one", "to", "the", "other", "NUMBER", "The", "one", "thing", "notice", "be", "Marko", "be", "miss", "scoped", "but", "that", "s", "for", "another", "discussion", "NUMBER", "No", "one", "Question", "Thank", "you", "so", "much", "for", "make", "components", "take", "reference", "in", "the", "latest", "beta", "version", "But", "it", "seems", "like", "it", "only", "takes", "references", "from", "marko", "template", "static", "NUMBER", "If", "I", "want", "to", "pass", "function", "reference", "from", "component", "NUMBER", "js", "down", "to", "child", "component", "the", "child", "component", "still", "not", "able", "to", "receive", "the", "reference", "NUMBER", "I", "m", "not", "sure", "if", "I", "m", "use", "it", "correctly", "or", "not", "NUMBER", "Could", "you", "share", "some", "work", "demos", "to", "demonstrate", "passing", "reference", "from", "component", "NUMBER", "js", "down", "please", "Thanks", "again", "Hi", "patrick", "steele", "idem", "thanks", "for", "the", "response", "NUMBER", "I", "was", "not", "able", "to", "reproduce", "this", "time", "maybe", "I", "didn", "t", "use", "it", "correctly", "that", "time", "NUMBER", "But", "I", "did", "encounter", "a", "different", "problem", "NUMBER", "The", "references", "pass", "down", "do", "not", "able", "to", "recgonize", "the", "correct", "execution", "context", "NUMBER", "test", "component", "index", "NUMBER", "marko", "html", "TAG", "test", "component", "component", "NUMBER", "js", "javascript", "module", "NUMBER", "export", "onCreate", "this", "NUMBER", "value", "value", "handler", "return", "this", "NUMBER", "value", "or", "do", "anything", "with", "the", "current", "controller", "context", "test", "inner", "component", "index", "NUMBER", "marko", "html", "TAG", "TAG", "Click", "TAG", "TAG", "test", "inner", "component", "component", "NUMBER", "marko", "javascript", "module", "NUMBER", "export", "click", "console", "NUMBER", "log", "this", "NUMBER", "input", "NUMBER", "handler", "Supposely", "the", "console", "should", "have", "a", "log", "as", "value", "printed", "when", "I", "click", "the", "button", "in", "the", "test", "inner", "component", "NUMBER", "But", "it", "actually", "printed", "undefined", "NUMBER", "I", "even", "tried", "to", "bind", "context", "for", "the", "function", "reference", "in", "test", "component", "at", "onCreate", "onInput", "or", "onMount", "like", "this", "NUMBER", "handler", "this", "NUMBER", "handler", "NUMBER", "bind", "this", "NUMBER", "None", "of", "them", "actually", "work", "NUMBER", "Could", "you", "advise", "how", "this", "pass", "reference", "suppose", "to", "work", "Does", "it", "only", "suppose", "to", "work", "without", "any", "context", "Another", "use", "case", "I", "can", "think", "of", "be", "to", "pass", "marko", "component", "into", "another", "component", "but", "that", "leads", "to", "another", "question", "I", "created", "LINK", "js", "marko", "issue", "NUMBER", "How", "can", "I", "pass", "in", "a", "fully", "functional", "component", "with", "template", "and", "controller", "into", "another", "component", "The", "only", "way", "I", "m", "aware", "of", "it", "to", "pass", "in", "something", "like", "this", "require", "NUMBER", "a", "component", "NUMBER", "marko", "but", "how", "can", "I", "associate", "a", "controller", "with", "that", "template", "Sorry", "for", "the", "long", "question", "and", "thank", "you", "for", "the", "help", "NUMBER", "A", "piece", "of", "documentation", "describing", "how", "to", "use", "Marko", "alongside", "Huncwot", "LINK", "NUMBER", "I", "d", "be", "happy", "to", "hear", "your", "feedback", "NUMBER", "Description", "I", "m", "build", "a", "library", "similar", "to", "Express", "and", "Koa", "call", "Huncwot", "NUMBER", "I", "m", "planning", "to", "use", "Marko", "as", "its", "default", "and", "only", "view", "engine", "NUMBER", "Huncwot", "be", "inspired", "by", "Clojure", "s", "ring", "with", "routes", "as", "pure", "function", "returning", "data", "describing", "responses", "NUMBER", "In", "this", "pull", "request", "I", "m", "describing", "how", "to", "use", "Marko", "with", "Huncwot", "NUMBER", "Motivation", "and", "Context", "Server", "side", "integration", "example", "use", "Huncwot", "be", "simpler", "and", "requires", "less", "code", "for", "the", "same", "result", "as", "in", "Koa", "or", "Express", "NUMBER", "Screenshots", "if", "appropriate", "Checklist", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "X", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "X", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "N", "A", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "ecbf", "NUMBER", "a", "NUMBER", "ddcc", "NUMBER", "d", "NUMBER", "a", "NUMBER", "c", "NUMBER", "a", "NUMBER", "bcb", "NUMBER", "b", "NUMBER", "ce", "NUMBER", "a", "NUMBER", "d", "on", "zaiste", "docs", "marko", "huncwot", "into", "NUMBER", "cc", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "b", "NUMBER", "aeaf", "NUMBER", "ff", "NUMBER", "a", "NUMBER", "e", "NUMBER", "ff", "NUMBER", "d", "NUMBER", "de", "on", "marko", "js", "master", "NUMBER", "Currently", "this", "js", "app", "NUMBER", "locals", "NUMBER", "foo", "foo", "app", "NUMBER", "locals", "NUMBER", "serializedGlobals", "foo", "true", "Doesn", "t", "work", "because", "component", "globals", "tag", "NUMBER", "js", "LINK", "js", "marko", "blob", "master", "components", "taglib", "component", "globals", "tag", "NUMBER", "js", "L", "NUMBER", "sets", "each", "property", "to", "false", "after", "reading", "them", "NUMBER", "If", "there", "s", "a", "reason", "for", "doing", "that", "I", "can", "t", "find", "it", "and", "remove", "that", "line", "fix", "the", "problem", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "e", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "d", "NUMBER", "a", "NUMBER", "d", "NUMBER", "fec", "NUMBER", "e", "NUMBER", "b", "NUMBER", "on", "Hesulan", "serialized", "globals", "no", "set", "into", "ee", "NUMBER", "b", "NUMBER", "cf", "NUMBER", "a", "NUMBER", "f", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "ab", "NUMBER", "b", "NUMBER", "c", "NUMBER", "c", "on", "marko", "js", "master", "NUMBER", "Description", "Was", "reading", "through", "docs", "and", "find", "some", "html", "entities", "NUMBER", "Motivation", "and", "Context", "Pretty", "sure", "they", "were", "not", "suppose", "to", "be", "there", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "adf", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "NUMBER", "c", "NUMBER", "c", "NUMBER", "e", "NUMBER", "fc", "NUMBER", "ccd", "NUMBER", "cc", "NUMBER", "on", "DylanPiercey", "patch", "NUMBER", "into", "ca", "NUMBER", "cb", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "NUMBER", "f", "NUMBER", "a", "NUMBER", "a", "NUMBER", "aa", "NUMBER", "cbe", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "on", "marko", "js", "master", "NUMBER", "Gotcha", "thanks", "TAG", "Description", "TAG", "Adding", "option", "to", "customize", "default", "timeout", "for", "await", "tags", "Motivation", "and", "Context", "TAG", "TAG", "We", "use", "await", "a", "lot", "and", "we", "need", "to", "customize", "the", "default", "await", "timeout", "for", "all", "await", "tags", "and", "we", "think", "this", "will", "help", "us", "to", "fix", "the", "timeout", "problem", "I", "ve", "opened", "an", "issue", "ask", "about", "this", "thing", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "b", "NUMBER", "a", "NUMBER", "aa", "NUMBER", "cc", "NUMBER", "c", "NUMBER", "abc", "NUMBER", "ec", "NUMBER", "cd", "NUMBER", "on", "mauricionr", "default_await_timeout", "into", "NUMBER", "eb", "NUMBER", "d", "NUMBER", "c", "NUMBER", "ecfa", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "bd", "NUMBER", "f", "NUMBER", "fb", "on", "marko", "js", "master", "NUMBER", "Squashed", "austinkelleher", "Thanks", "rocket", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "d", "NUMBER", "eaa", "NUMBER", "bfe", "NUMBER", "b", "NUMBER", "fd", "NUMBER", "c", "NUMBER", "c", "NUMBER", "e", "on", "mauricionr", "default_await_timeout", "into", "NUMBER", "eb", "NUMBER", "d", "NUMBER", "c", "NUMBER", "ecfa", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "bd", "NUMBER", "f", "NUMBER", "fb", "on", "marko", "js", "master", "NUMBER", "austinkelleher", "i", "will", "discuss", "with", "my", "team", "about", "override", "the", "TAG", "tag", "thanks", "for", "the", "demo", "i", "saw", "austinkelleher", "really", "good", "proposal", "and", "with", "this", "override", "looks", "like", "we", "will", "be", "able", "to", "override", "any", "core", "tag", "Thanks", "austinkelleher", "and", "patrick", "steele", "idem", "simpler", "than", "the", "other", "aproach", "TAG", "Description", "Marko", "global", "defaults", "and", "user", "globals", "aren", "t", "merge", "NUMBER", "If", "user", "globals", "exists", "the", "defaults", "be", "ignored", "NUMBER", "Motivation", "and", "Context", "Look", "at", "LINK", "js", "marko", "issue", "NUMBER", "Checklist", "TAG", "TAG", "X", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "X", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Tests", "suite", "doesn", "t", "works", "on", "windows", "I", "will", "open", "an", "issue", "for", "this", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "bcf", "NUMBER", "b", "NUMBER", "cf", "NUMBER", "ae", "NUMBER", "fdc", "NUMBER", "ae", "NUMBER", "fb", "NUMBER", "ec", "NUMBER", "on", "StarpTech", "merge_marko_globals_and_marko_defaults", "into", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "a", "NUMBER", "fd", "NUMBER", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "d", "on", "marko", "js", "master", "NUMBER", "Environment", "Windows", "NodeJs", "v", "NUMBER", "Marko", "beta", "The", "framework", "runtime", "variables", "in", "out", "NUMBER", "global", "components", "GlobalComponentsContext", "uid", "NUMBER", "be", "serialized", "to", "in", "browser", "components", "undefined", "uid", "NaN", "when", "I", "access", "them", "in", "client", "side", "component", "NUMBER", "Another", "question", "be", "why", "they", "exists", "in", "the", "user", "global", "space", "This", "data", "should", "be", "land", "in", "a", "seperate", "namespace", "NUMBER", "Found", "the", "issue", "here", "LINK", "js", "marko", "blob", "NUMBER", "c", "NUMBER", "be", "NUMBER", "bce", "NUMBER", "cc", "NUMBER", "b", "NUMBER", "d", "NUMBER", "b", "NUMBER", "e", "NUMBER", "dfe", "NUMBER", "c", "NUMBER", "da", "components", "util", "browser", "NUMBER", "js", "L", "NUMBER", "window", "NUMBER", "MG", "defaults", "must", "be", "merge", "NUMBER", "Next", "issue", "be", "the", "components", "property", "NUMBER", "global", "components", "was", "purposefully", "set", "to", "undefined", "LINK", "js", "marko", "blob", "NUMBER", "c", "NUMBER", "be", "NUMBER", "bce", "NUMBER", "cc", "NUMBER", "b", "NUMBER", "d", "NUMBER", "b", "NUMBER", "e", "NUMBER", "dfe", "NUMBER", "c", "NUMBER", "da", "components", "ComponentsContext", "NUMBER", "js", "L", "NUMBER", "Hi", "yes", "my", "PR", "has", "be", "merge", "NUMBER", "Right", "now", "I", "m", "change", "the", "component", "state", "with", "events", "NUMBER", "When", "a", "value", "change", "e", "NUMBER", "g", "NUMBER", "in", "an", "input", "tag", "I", "use", "the", "on", "change", "or", "on", "keypress", "events", "to", "handle", "state", "change", "NUMBER", "However", "in", "a", "form", "with", "a", "lot", "of", "state", "you", "need", "to", "have", "a", "lot", "of", "event", "handlers", "in", "the", "component", "class", "NUMBER", "It", "gets", "unwieldy", "to", "have", "full", "control", "over", "all", "the", "business", "logic", "NUMBER", "It", "would", "be", "easier", "and", "clean", "to", "have", "an", "attribute", "like", "angular", "or", "vue", "NUMBER", "js", "v", "model", "model", "NUMBER", "or", "something", "like", "this", "that", "takes", "a", "property", "of", "the", "state", "object", "and", "update", "it", "automatically", "NUMBER", "I", "don", "t", "know", "if", "such", "a", "feature", "be", "already", "available", "but", "from", "the", "documentation", "I", "haven", "t", "seen", "anything", "like", "that", "NUMBER", "Is", "it", "possible", "to", "implement", "a", "NUMBER", "way", "data", "binding", "out", "of", "the", "box", "or", "if", "not", "possible", "can", "you", "suggest", "the", "best", "pattern", "to", "manage", "such", "cases", "Thanks", "NUMBER", "This", "be", "happening", "in", "NUMBER", "as", "well", "with", "callback", "and", "promises", "in", "the", "await", "tag", "NUMBER", "New", "Feature", "Description", "I", "d", "like", "to", "be", "able", "to", "pass", "an", "option", "to", "renderToString", "that", "remove", "comments", "from", "that", "template", "NUMBER", "Perhaps", "also", "console", "NUMBER", "log", "calls", "NUMBER", "Context", "Sometimes", "when", "I", "m", "developing", "especially", "in", "the", "view", "file", "which", "spits", "out", "most", "of", "my", "HTML", "page", "I", "want", "to", "comment", "out", "in", "certain", "sections", "such", "as", "code", "for", "analytics", "trackers", "or", "other", "such", "things", "NUMBER", "This", "be", "so", "I", "can", "easily", "add", "remove", "features", "as", "I", "develop", "without", "losing", "the", "code", "NUMBER", "For", "now", "I", "mostly", "use", "Marko", "for", "server", "side", "rendering", "my", "base", "HTML", "page", "which", "I", "plug", "another", "view", "engine", "ReactJS", "on", "top", "of", "NUMBER", "The", "ability", "to", "remove", "add", "certain", "TAG", "tags", "or", "some", "JavaScript", "on", "the", "fly", "use", "comments", "would", "be", "great", "as", "these", "things", "be", "often", "change", "NUMBER", "Right", "now", "all", "my", "pages", "be", "rendered", "with", "all", "the", "commented", "out", "sections", "too", "which", "be", "add", "to", "page", "size", "NUMBER", "Possible", "Implementation", "Have", "an", "options", "object", "that", "can", "be", "pass", "to", "renderToString", "with", "something", "like", "removeComments", "true", "removeConsole", "true", "Oh", "I", "wasn", "t", "aware", "that", "HTML", "style", "comments", "were", "be", "remove", "NUMBER", "Looking", "back", "at", "my", "project", "I", "see", "that", "certain", "tags", "I", "commented", "out", "that", "way", "have", "actually", "be", "remove", "NUMBER", "That", "s", "cool", "NUMBER", "It", "s", "mainly", "the", "JavaScript", "part", "of", "my", "code", "that", "I", "ve", "be", "commenting", "out", "sections", "of", "inside", "of", "HTML", "TAG", "tags", "NUMBER", "It", "seems", "these", "comments", "be", "not", "remove", "NUMBER", "I", "might", "have", "to", "look", "at", "a", "babel", "solution", "then", "although", "I", "ve", "just", "tried", "to", "get", "rid", "of", "any", "babel", "on", "my", "server", "recently", "NUMBER", "When", "I", "do", "a", "require", "of", "the", "NUMBER", "marko", "file", "template", "would", "the", "server", "know", "to", "transform", "the", "resulting", "JavaScript", "file", "which", "be", "generate", "by", "Marko", "There", "doesn", "t", "seem", "to", "be", "a", "place", "where", "I", "actually", "reference", "the", "JavaScript", "file", "directly", "and", "could", "potentially", "pass", "it", "to", "a", "babel", "transformer", "NUMBER", "I", "don", "t", "want", "babel", "to", "by", "default", "transform", "every", "JavaScript", "file", "because", "that", "can", "become", "a", "bit", "heavy", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ff", "NUMBER", "ed", "NUMBER", "d", "NUMBER", "a", "NUMBER", "ed", "NUMBER", "a", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "fda", "NUMBER", "f", "NUMBER", "a", "on", "issue", "NUMBER", "into", "NUMBER", "a", "NUMBER", "ee", "NUMBER", "a", "NUMBER", "f", "NUMBER", "caa", "NUMBER", "add", "NUMBER", "a", "NUMBER", "d", "NUMBER", "f", "on", "master", "NUMBER", "Bug", "Report", "Context", "Unable", "to", "use", "CSS", "rule", "important", "in", "style", "block", "of", "marko", "file", "NUMBER", "Expected", "Behavior", "The", "following", "be", "valid", "CSS", "in", "a", "marko", "file", "NUMBER", "style", "NUMBER", "foo", "class", "height", "NUMBER", "px", "important", "TAG", "Actual", "Behavior", "Error", "when", "compile", "Module", "not", "find", "Error", "Can", "t", "resolve", "important", "n", "Your", "Environment", "TAG", "Version", "use", "v", "NUMBER", "That", "d", "be", "consistent", "NUMBER", "I", "be", "use", "marko", "loader", "NUMBER", "The", "PR", "LINK", "js", "marko", "loader", "pull", "NUMBER", "that", "I", "just", "submitted", "against", "the", "marko", "loader", "repo", "resolve", "this", "issue", "for", "me", "NUMBER", "Having", "a", "dedicated", "section", "for", "scoped", "attributes", "would", "be", "a", "lot", "nicer", "than", "prefixing", "each", "class", "with", "__", "NUMBER", "I", "think", "most", "people", "would", "prefer", "to", "use", "only", "scoped", "css", "for", "their", "components", "and", "having", "to", "write", "__", "for", "every", "class", "in", "both", "the", "css", "and", "the", "template", "can", "get", "quite", "annoying", "after", "a", "while", "NUMBER", "Although", "when", "mixing", "global", "and", "scoped", "styles", "with", "austinkelleher", "s", "approach", "there", "could", "end", "up", "be", "some", "confusion", "about", "what", "classes", "be", "scoped", "or", "not", "when", "looking", "at", "a", "pretty", "involved", "template", "with", "lots", "of", "styling", "going", "on", "NUMBER", "But", "then", "again", "Vue", "users", "doesn", "t", "seem", "to", "be", "too", "bothered", "by", "that", "NUMBER", "I", "agree", "with", "the", "scoped", "attributes", "like", "css", "style", "NUMBER", "less", "NUMBER", "scoped", "style", "NUMBER", "less", "style", "NUMBER", "scss", "NUMBER", "scoped", "style", "NUMBER", "scss", "Instead", "of", "css", "NUMBER", "global", "button", "selector", "color", "grey", "__disabled", "button", "color", "grey", "which", "in", "my", "opinion", "looks", "a", "bit", "messy", "and", "doesn", "t", "feel", "concise", "like", "most", "of", "the", "framework", "NUMBER", "I", "talked", "to", "austinkelleher", "about", "this", "a", "while", "back", "and", "I", "ve", "warm", "up", "to", "the", "idea", "of", "keep", "scoped", "and", "non", "scoped", "css", "classes", "under", "the", "same", "style", "block", "NUMBER", "I", "think", "that", "make", "class", "names", "that", "start", "with", "a", "capital", "letter", "scoped", "would", "end", "up", "work", "well", "NUMBER", "It", "feels", "less", "yucky", "compared", "to", "NUMBER", "__", "NUMBER", "There", "be", "languages", "out", "there", "that", "have", "different", "functionality", "for", "things", "that", "start", "with", "a", "uppercase", "or", "lowercase", "letter", "NUMBER", "For", "example", "function", "structs", "and", "struct", "attributes", "in", "golang", "that", "start", "with", "a", "capital", "letter", "be", "export", "and", "be", "available", "outside", "of", "the", "package", "they", "be", "defined", "in", "while", "lowercased", "variants", "be", "keep", "within", "the", "scope", "of", "the", "package", "NUMBER", "Although", "this", "be", "backwards", "from", "what", "was", "propose", "and", "go", "be", "_very_", "different", "from", "css", "I", "don", "t", "think", "the", "concept", "would", "be", "too", "foreign", "NUMBER", "If", "marko", "ended", "up", "going", "this", "route", "I", "think", "that", "it", "would", "have", "to", "be", "an", "opt", "in", "feature", "NUMBER", "It", "could", "end", "up", "breaking", "layouts", "for", "some", "people", "NUMBER", "You", "know", "double", "underscore", "looks", "weird", "at", "first", "but", "looking", "back", "on", "this", "thread", "a", "few", "weeks", "later", "it", "doesn", "t", "look", "bad", "at", "all", "NUMBER", "I", "think", "I", "prefer", "it", "since", "you", "can", "tell", "something", "different", "be", "happening", "as", "oppose", "to", "the", "capital", "letters", "that", "look", "like", "a", "naming", "convention", "NUMBER", "Note", "I", "ll", "probably", "update", "after", "I", "get", "more", "sleep", "and", "have", "time", "to", "think", "I", "m", "kind", "of", "wracking", "my", "brain", "on", "this", "one", "NUMBER", "On", "one", "hand", "easy", "of", "implementation", "be", "obviously", "critical", "NUMBER", "On", "the", "other", "this", "doesn", "t", "feel", "like", "a", "solid", "solution", "NUMBER", "Main", "Concern", "Tight", "coupling", "between", "scoped", "nature", "of", "css", "and", "markup", "If", "I", "start", "off", "with", "html", "TAG", "css", "NUMBER", "primary", "color", "blue", "but", "I", "decided", "suddenly", "that", "there", "was", "a", "conflict", "and", "I", "needed", "to", "scope", "it", "NUMBER", "css", "NUMBER", "__primary", "color", "blue", "If", "I", "forget", "to", "update", "the", "markup", "or", "miss", "a", "reference", "then", "there", "could", "be", "a", "non", "obvious", "style", "bug", "introduce", "NUMBER", "I", "know", "that", "s", "very", "likely", "obvious", "but", "the", "above", "combined", "with", "the", "fact", "that", "the", "__", "needs", "to", "be", "add", "for", "everything", "scoped", "just", "seems", "error", "prone", "to", "me", "NUMBER", "Modified", "Vue", "like", "approach", "Vue", "takes", "a", "pipelined", "approach", "NUMBER", "scoped", "styles", "vue", "loader", "preprocessor", "internal", "vue", "loader", "postcss", "plugin", "Using", "a", "grouped", "approach", "like", "austinkelleher", "mention", "would", "require", "something", "similar", "NUMBER", "Implementation", "In", "a", "single", "file", "marko", "component", "html", "TAG", "styles", "NUMBER", "scoped", "NUMBER", "less", "button", "NUMBER", "primary", "color", "blue", "Generated", "output", "css", "button", "NUMBER", "primary", "data", "m", "NUMBER", "ds", "NUMBER", "df", "color", "blue", "The", "flow", "here", "would", "be", "more", "or", "less", "the", "same", "as", "vue", "s", "NUMBER", "In", "a", "split", "component", "style", "NUMBER", "mobile", "NUMBER", "css", "Phase", "NUMBER", "source", "css", "scoped", "button", "NUMBER", "primary", "color", "blue", "NUMBER", "global", "class", "color", "red", "Phase", "NUMBER", "marko", "transform", "css", "scoped", "data", "m", "NUMBER", "ds", "NUMBER", "df", "button", "NUMBER", "primary", "color", "blue", "NUMBER", "global", "class", "color", "red", "Phase", "NUMBER", "postprocessor", "Phase", "NUMBER", "marko", "scoped", "postcss", "css", "button", "NUMBER", "primary", "data", "m", "NUMBER", "ds", "NUMBER", "df", "color", "blue", "NUMBER", "global", "class", "color", "red", "Intended", "Results", "Solves", "scoped", "styles", "must", "be", "separated", "out", "from", "unscoped", "styles", "NUMBER", "Separation", "exists", "still", "but", "can", "be", "localized", "to", "a", "file", "Solves", "Marko", "must", "understand", "each", "compile", "to", "CSS", "language", "NUMBER", "Look", "for", "a", "common", "denotation", "in", "each", "of", "the", "file", "like", "scoped", "or", "something", "similar", "but", "unique", "NUMBER", "Doesn", "t", "solve", "scoped", "style", "classes", "cannot", "be", "pass", "to", "nested", "components", "NUMBER", "I", "don", "t", "think", "this", "be", "a", "best", "practice", "to", "begin", "with", "but", "it", "s", "still", "obviously", "an", "issue", "NUMBER", "Might", "solve", "not", "compatible", "with", "multi", "file", "adaptive", "styles", "NUMBER", "I", "would", "be", "very", "interested", "to", "know", "how", "this", "works", "to", "begin", "with", "NUMBER", "Regardless", "after", "marko", "figured", "out", "what", "styles", "that", "component", "depended", "on", "it", "d", "have", "to", "check", "for", "scoped", "NUMBER", "If", "that", "was", "present", "you", "d", "just", "add", "the", "attribute", "directly", "onto", "every", "direct", "node", "of", "that", "component", "NUMBER", "I", "m", "not", "sure", "but", "I", "believe", "that", "doesn", "t", "extend", "to", "children", "NUMBER", "Note", "I", "m", "make", "a", "lot", "of", "assumptions", "here", "that", "I", "don", "t", "have", "all", "the", "info", "to", "back", "up", "NUMBER", "Granted", "I", "understand", "that", "this", "be", "significantly", "more", "complex", "than", "the", "propose", "solution", "NUMBER", "Technically", "given", "patrick", "steele", "idem", "s", "note", "about", "the", "implementation", "details", "of", "the", "propose", "solution", "I", "could", "see", "it", "just", "be", "a", "standalone", "webpack", "lasso", "plugin", "anyway", "NUMBER", "zephraph", "thanks", "for", "bringing", "attention", "to", "this", "topic", "again", "NUMBER", "I", "really", "don", "t", "see", "the", "issue", "with", "having", "marko", "support", "multiple", "CSS", "preprocessors", "NUMBER", "Having", "to", "install", "the", "desired", "preprocessor", "SCSS", "Less", "PostCSS", "or", "Stylus", "via", "NPM", "so", "it", "s", "available", "to", "compile", "styles", "NUMBER", "scoped", "NUMBER", "less", "styles", "NUMBER", "scoped", "NUMBER", "scss", "etc", "be", "a", "minor", "trade", "off", "in", "order", "to", "improve", "readability", "and", "improve", "the", "framework", "s", "usability", "NUMBER", "I", "be", "strongly", "of", "the", "opinion", "that", "all", "styles", "in", "a", "component", "should", "be", "scoped", "to", "that", "component", "by", "default", "NUMBER", "Instead", "of", "NUMBER", "__foo", "to", "indicate", "that", "the", "NUMBER", "foo", "class", "be", "private", "I", "would", "prefer", "to", "have", "to", "prefix", "something", "like", "NUMBER", "GLOBAL", "NUMBER", "foo", "to", "escape", "the", "particular", "component", "NUMBER", "Consider", "this", "option", "style", "NUMBER", "foo", "color", "red", "i", "color", "blue", "global", "style", "export", "i", "color", "pink", "TAG", "TAG", "Hello", "TAG", "TAG", "World", "TAG", "TAG", "Much", "discussion", "about", "CSS", "on", "the", "internet", "revolves", "around", "global", "by", "default", "was", "a", "misfeature", "in", "CSS", "similar", "to", "it", "be", "in", "a", "misfeature", "in", "JS", "NUMBER", "In", "the", "above", "example", "it", "should", "be", "hard", "for", "styles", "to", "escape", "from", "the", "component", "NUMBER", "ramses", "NUMBER", "I", "really", "like", "the", "idea", "of", "all", "component", "styles", "be", "scoped", "by", "default", "NUMBER", "That", "would", "definitely", "be", "a", "breaking", "change", "though", "NUMBER", "Bug", "Report", "Context", "open", "tag", "brackets", "TAG", "Marko", "be", "awesome", "TAG", "Actual", "Behavior", "output", "marko", "lt", "strong", "if", "true", "Marko", "be", "awesome", "lt", "strong", "TAG", "Your", "Environment", "Version", "use", "NUMBER", "Environment", "name", "and", "version", "Firefox", "NUMBER", "Chrome", "NUMBER", "Operating", "System", "and", "version", "Ubuntu", "NUMBER", "TAG", "where", "can", "the", "latest", "rendered", "master", "be", "seen", "Environment", "Marko", "NUMBER", "Node", "NUMBER", "Expected", "Behavior", "Should", "only", "render", "the", "value", "NUMBER", "Actual", "Behavior", "It", "renders", "javascript", "tag", "and", "the", "value", "NUMBER", "Steps", "to", "Reproduce", "marko", "TAG", "TAG", "recipe", "NUMBER", "name", "TAG", "TAG", "will", "produce", "marko", "TAG", "test", "lt", "script", "gt", "function", "var", "w", "window", "w", "NUMBER", "components", "w", "NUMBER", "components", "NUMBER", "concat", "w", "s", "NUMBER", "NUMBER", "d", "null", "b", "null", "s", "NUMBER", "NUMBER", "year", "NUMBER", "d", "null", "b", "null", "t", "recipe", "detail", "NUMBER", "src", "components", "app", "nav", "index", "NUMBER", "marko", "recipe", "detail", "NUMBER", "src", "components", "app", "footer", "index", "NUMBER", "marko", "w", "NUMBER", "components", "lt", "script", "gt", "TAG", "Bug", "Report", "Context", "Whilst", "trying", "to", "programmatically", "render", "components", "one", "of", "the", "components", "start", "throw", "an", "exception", "Render", "error", "NUMBER", "Exception", "Error", "No", "component", "find", "NUMBER", "After", "further", "investigation", "I", "narrowed", "it", "down", "to", "whether", "any", "element", "within", "the", "component", "has", "a", "for", "key", "or", "key", "attribute", "NUMBER", "Expected", "Behavior", "The", "component", "should", "render", "as", "normal", "NUMBER", "Actual", "Behavior", "With", "a", "for", "key", "attribute", "the", "following", "exception", "be", "throw", "when", "renderSync", "be", "call", "image", "LINK", "NUMBER", "c", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "d", "NUMBER", "e", "NUMBER", "a", "NUMBER", "png", "With", "a", "key", "attribute", "the", "following", "exception", "be", "throw", "when", "renderSync", "be", "call", "image", "LINK", "NUMBER", "c", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "af", "NUMBER", "dc", "NUMBER", "cb", "NUMBER", "d", "NUMBER", "png", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "Marko", "v", "NUMBER", "Chrome", "NUMBER", "NUMBER", "bit", "Node", "NUMBER", "macOS", "Sierra", "NUMBER", "Steps", "to", "Reproduce", "I", "ve", "created", "a", "quick", "repository", "LINK", "where", "you", "can", "replicate", "this", "issue", "NUMBER", "Stack", "Trace", "Stack", "traces", "provide", "above", "NUMBER", "TAG", "Yeah", "that", "fix", "it", "NUMBER", "I", "ll", "keep", "an", "eye", "on", "this", "NUMBER", "Thanks", "Bug", "Report", "Context", "On", "a", "new", "component", "with", "index", "NUMBER", "marko", "create", "a", "single", "TAG", "test", "TAG", "and", "run", "the", "server", "NUMBER", "Expected", "Behavior", "The", "component", "index", "NUMBER", "marko", "NUMBER", "js", "should", "contain", "function", "render", "input", "out", "__component", "component", "state", "Actual", "Behavior", "The", "component", "index", "NUMBER", "marko", "NUMBER", "js", "contains", "function", "render", "input", "out", "Your", "Environment", "Version", "use", "marko", "NUMBER", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "desktop", "MacOS", "X", "NUMBER", "beta", "Steps", "to", "Reproduce", "NUMBER", "Create", "a", "component", "with", "a", "single", "line", "TAG", "test", "TAG", "NUMBER", "Add", "onCreate", "to", "component", "where", "this", "NUMBER", "ate", "input", "NUMBER", "Add", "onMount", "to", "component", "where", "this", "NUMBER", "setState", "myVar", "NUMBER", "NUMBER", "Pass", "component", "to", "a", "page", "NUMBER", "Load", "the", "page", "Stack", "Trace", "events", "NUMBER", "js", "NUMBER", "throw", "er", "Unhandled", "error", "event", "Error", "Render", "error", "NUMBER", "Exception", "ReferenceError", "state", "be", "not", "defined", "at", "render", "views", "components", "my", "form", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "renderCompontent", "node_modules", "marko", "components", "taglib", "helpers", "renderComponent", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "views", "components", "app", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "renderer", "node_modules", "marko", "components", "renderer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "views", "pages", "form", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "safeRender", "node_modules", "marko", "runtime", "renderable", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Template", "NUMBER", "render", "node_modules", "marko", "runtime", "renderable", "NUMBER", "js", "NUMBER", "NUMBER", "at", "ServerResponse", "NUMBER", "response", "NUMBER", "marko", "node_modules", "marko", "express", "NUMBER", "js", "NUMBER", "NUMBER", "at", "app", "NUMBER", "get", "server", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "node_modules", "router", "lib", "layer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "AsyncStream", "NUMBER", "error", "node_modules", "marko", "runtime", "html", "AsyncStream", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Timeout", "NUMBER", "_onTimeout", "node_modules", "marko", "runtime", "renderable", "NUMBER", "js", "NUMBER", "NUMBER", "at", "ontimeout", "timers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "tryOnTimeout", "timers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Timer", "NUMBER", "listOnTimeout", "timers", "NUMBER", "js", "NUMBER", "NUMBER", "TAG", "Description", "TAG", "clarify", "on", "wildcard", "usage", "event", "handler", "basic", "and", "advance", "note", "events", "comparison", "with", "dom", "jquery", "marko", "link", "to", "example", "LINK", "js", "markojs", "website", "pull", "NUMBER", "Motivation", "and", "Context", "TAG", "TAG", "In", "the", "chat", "earlier", "we", "find", "an", "opportunity", "to", "improve", "the", "docs", "around", "event", "handlers", "NUMBER", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "c", "NUMBER", "fddfe", "NUMBER", "a", "NUMBER", "c", "NUMBER", "e", "NUMBER", "b", "NUMBER", "a", "NUMBER", "cad", "NUMBER", "d", "on", "tcrowe", "on", "event", "doc", "NUMBER", "into", "NUMBER", "de", "NUMBER", "cf", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "dae", "NUMBER", "d", "NUMBER", "be", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "c", "NUMBER", "fddfe", "NUMBER", "a", "NUMBER", "c", "NUMBER", "e", "NUMBER", "b", "NUMBER", "a", "NUMBER", "cad", "NUMBER", "d", "on", "tcrowe", "on", "event", "doc", "NUMBER", "into", "NUMBER", "de", "NUMBER", "cf", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "dae", "NUMBER", "d", "NUMBER", "be", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "c", "NUMBER", "fddfe", "NUMBER", "a", "NUMBER", "c", "NUMBER", "e", "NUMBER", "b", "NUMBER", "a", "NUMBER", "cad", "NUMBER", "d", "on", "tcrowe", "on", "event", "doc", "NUMBER", "into", "NUMBER", "de", "NUMBER", "cf", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "dae", "NUMBER", "d", "NUMBER", "be", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Can", "I", "take", "this", "on", "I", "ve", "get", "some", "free", "time", "these", "days", "and", "Im", "looking", "to", "get", "start", "around", "here", "NUMBER", "Thanks", "for", "the", "pointers", "guys", "NUMBER", "Will", "hopefully", "get", "this", "do", "over", "the", "weekend", "Okay", "so", "noob", "question", "the", "only", "way", "to", "get", "the", "html", "out", "of", "a", "document", "fragment", "be", "by", "first", "appending", "it", "to", "a", "div", "and", "then", "get", "its", "innerHTML", "right", "Is", "there", "any", "other", "way", "that", "I", "could", "be", "doing", "this", "Any", "progress", "on", "this", "yet", "renderToString", "on", "the", "browser", "would", "be", "pretty", "nice", "to", "have", "NUMBER", "mlrawlings", "Im", "still", "interested", "to", "work", "on", "this", "NUMBER", "Although", "I", "kinda", "stopped", "looking", "into", "this", "because", "I", "never", "could", "decide", "if", "the", "method", "I", "suggested", "was", "the", "way", "to", "go", "forward", "NUMBER", "patrick", "steele", "idem", "mlrawlings", "If", "the", "expected", "behaviour", "be", "to", "return", "the", "first", "top", "level", "element", "we", "could", "just", "return", "the", "outerHtml", "from", "this", "NUMBER", "___getNode", "NUMBER", "firstChild", "NUMBER", "This", "works", "but", "I", "m", "not", "sure", "this", "be", "the", "way", "forward", "NUMBER", "Also", "if", "I", "append", "the", "document", "fragment", "from", "___getNode", "to", "a", "dummy", "VElement", "I", "created", "use", "appendChild", "and", "try", "to", "access", "the", "firstChild", "it", "should", "give", "me", "the", "first", "child", "of", "the", "document", "fragment", "right", "This", "do", "not", "seem", "to", "be", "happening", "NUMBER", "Any", "ideas", "Bug", "Report", "Context", "I", "have", "a", "couple", "of", "Marko", "NUMBER", "components", "that", "have", "a", "key", "attribute", "that", "after", "upgrading", "to", "marko", "NUMBER", "break", "the", "whole", "page", "when", "use", "NUMBER", "I", "believe", "key", "be", "now", "a", "reserved", "attribute", "NUMBER", "Expected", "Behavior", "Component", "works", "Actual", "Behavior", "Page", "fail", "to", "render", "and", "the", "following", "error", "be", "logged", "Render", "error", "NUMBER", "Exception", "Error", "No", "component", "find", "Possible", "Fix", "Allow", "key", "if", "defined", "in", "marks", "tag", "NUMBER", "json", "of", "component", "NUMBER", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "NUMBER", "Environment", "name", "and", "version", "node", "NUMBER", "js", "v", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "mac", "OS", "Sierra", "Steps", "to", "Reproduce", "TAG", "TAG", "NUMBER", "Create", "component", "with", "defined", "key", "attribute", "NUMBER", "Use", "in", "a", "page", "NUMBER", "Everything", "breaks", "Stack", "Trace", "TAG", "TAG", "Bug", "Report", "Context", "When", "use", "TAG", "to", "deal", "with", "rejected", "promises", "marko", "calls", "console", "NUMBER", "error", "with", "the", "error", "NUMBER", "See", "LINK", "js", "marko", "blob", "master", "taglibs", "async", "await", "tag", "NUMBER", "js", "L", "NUMBER", "NUMBER", "For", "us", "this", "has", "two", "consequences", "The", "console", "NUMBER", "error", "call", "ends", "up", "in", "stdout", "NUMBER", "In", "our", "container", "setup", "we", "use", "stdout", "for", "logging", "with", "JSON", "entries", "NUMBER", "The", "marko", "output", "confuses", "our", "log", "parser", "NUMBER", "It", "s", "inconsistent", "to", "warn", "about", "an", "error", "in", "the", "case", "where", "the", "developer", "has", "explicitly", "provide", "an", "error", "handle", "tag", "NUMBER", "Expected", "Behavior", "TAG", "tag", "do", "not", "cause", "console", "NUMBER", "error", "to", "be", "call", "NUMBER", "Actual", "Behavior", "TAG", "tag", "do", "causes", "console", "NUMBER", "error", "to", "be", "call", "NUMBER", "Possible", "Fix", "Having", "this", "logging", "can", "be", "useful", "during", "dev", "NUMBER", "Maybe", "ut", "could", "be", "behind", "a", "flag", "or", "something", "so", "you", "can", "pass", "silent", "error", "true", "to", "the", "TAG", "tag", "or", "similar", "Your", "Environment", "Version", "use", "NUMBER", "Environment", "name", "and", "version", "node", "v", "NUMBER", "Steps", "to", "Reproduce", "NUMBER", "Load", "the", "code", "from", "LINK", "into", "LINK", "online", "NUMBER", "Look", "at", "output", "in", "error", "console", "I", "ended", "up", "change", "our", "code", "to", "deal", "the", "promise", "rejection", "in", "the", "renderer", "NUMBER", "But", "that", "seems", "unidiomatic", "given", "that", "there", "be", "tags", "meant", "for", "dealing", "with", "timeouts", "and", "error", "inside", "of", "await", "Anyway", "it", "still", "feels", "counter", "intuitive", "to", "me", "that", "there", "be", "console", "NUMBER", "error", "output", "in", "a", "case", "where", "I", "ve", "explicitly", "add", "code", "to", "deal", "with", "the", "error", "NUMBER", "I", "would", "prefer", "it", "not", "logging", "on", "my", "behalf", "in", "that", "case", "NUMBER", "This", "proposal", "seem", "to", "be", "more", "secure", "too", "since", "arbitrary", "properties", "will", "no", "longer", "be", "leaked", "to", "the", "browser", "NUMBER", "If", "a", "nested", "UI", "component", "derives", "its", "props", "state", "or", "generates", "input", "properties", "from", "anything", "other", "than", "pass", "in", "input", "e", "NUMBER", "g", "NUMBER", "this", "NUMBER", "locale", "out", "NUMBER", "global", "NUMBER", "locale", "then", "that", "information", "will", "not", "be", "available", "when", "the", "UI", "component", "mounts", "in", "the", "browser", "NUMBER", "Does", "this", "now", "mean", "that", "accessing", "the", "out", "stream", "from", "onInput", "will", "no", "longer", "be", "serialized", "and", "sent", "to", "the", "browser", "for", "components", "ianvonholt", "we", "wouldn", "t", "need", "that", "hack", "if", "globals", "were", "also", "serialized", "and", "or", "we", "could", "define", "the", "global", "object", "when", "initializing", "components", "in", "the", "browser", "NUMBER", "I", "created", "NUMBER", "specifically", "for", "that", "NUMBER", "Should", "it", "patrick", "steele", "idem", "it", "s", "certainly", "not", "a", "problem", "to", "use", "if", "instead", "I", "just", "was", "under", "impression", "that", "unless", "be", "some", "sort", "of", "global", "attribute", "like", "if", "NUMBER", "Hi", "in", "Marko", "NUMBER", "a", "newline", "be", "inserted", "and", "my", "cursor", "jumps", "to", "the", "end", "of", "the", "textarea", "on", "every", "input", "if", "I", "try", "to", "bind", "its", "value", "to", "the", "state", "marko", "textarea", "LINK", "NUMBER", "ed", "NUMBER", "e", "NUMBER", "NUMBER", "cb", "NUMBER", "dced", "NUMBER", "gif", "custom", "input", "NUMBER", "marko", "class", "onChange", "e", "this", "NUMBER", "emit", "change", "e", "NUMBER", "target", "NUMBER", "value", "div", "textarea", "key", "input", "on", "input", "onChange", "value", "input", "NUMBER", "value", "input", "NUMBER", "value", "p", "strong", "input", "NUMBER", "value", "If", "I", "remove", "the", "strong", "tag", "that", "outputs", "input", "NUMBER", "value", "it", "works", "fine", "NUMBER", "If", "I", "use", "an", "input", "instead", "of", "the", "textarea", "it", "works", "fine", "as", "well", "NUMBER", "If", "I", "remove", "the", "input", "NUMBER", "value", "from", "the", "textarea", "s", "body", "it", "works", "as", "well", "but", "then", "the", "initial", "input", "NUMBER", "value", "isn", "t", "shown", "NUMBER", "The", "code", "be", "server", "rendered", "so", "I", "m", "guessing", "that", "this", "has", "to", "do", "with", "serialisation", "maybe", "Full", "code", "LINK", "test", "Thanks", "for", "your", "help", "Thanks", "for", "your", "feedback", "mindeavor", "NUMBER", "I", "m", "remove", "value", "but", "this", "do", "not", "fix", "the", "issue", "unfortunately", "NUMBER", "Hey", "patrick", "steele", "idem", "Thank", "you", "for", "your", "help", "NUMBER", "I", "can", "verify", "that", "your", "propose", "workaround", "of", "use", "the", "HTML", "syntax", "works", "NUMBER", "Hello", "Bug", "Report", "I", "was", "moving", "a", "div", "around", "the", "page", "with", "the", "mouse", "then", "I", "get", "a", "weird", "behavior", "NUMBER", "I", "m", "quite", "new", "with", "all", "this", "stuff", "but", "it", "looks", "like", "a", "bug", "NUMBER", "Context", "Marko", "template", "div", "style", "position", "absolute", "top", "NUMBER", "test", "Rendering", "var", "bloc", "require", "NUMBER", "bloc", "bloc", "NUMBER", "renderSync", "NUMBER", "appendTo", "document", "NUMBER", "body", "Expected", "Behavior", "TAG", "top", "property", "should", "be", "set", "to", "zero", "and", "the", "text", "should", "be", "display", "at", "the", "top", "of", "the", "page", "NUMBER", "Actual", "Behavior", "TAG", "The", "value", "NUMBER", "for", "top", "be", "ignored", "and", "the", "top", "property", "be", "not", "set", "in", "the", "style", "according", "to", "FF", "inspector", "NUMBER", "The", "text", "be", "display", "at", "the", "default", "position", "that", "depends", "on", "previous", "elements", "in", "body", "NUMBER", "No", "error", "message", "NUMBER", "Negative", "values", "be", "accepted", "and", "the", "position", "of", "the", "div", "be", "correct", "Same", "problem", "with", "left", "property", "not", "test", "with", "other", "ones", "Same", "problem", "when", "state", "be", "change", "with", "code", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "marko", "NUMBER", "Environment", "name", "and", "version", "node", "NUMBER", "js", "NUMBER", "win", "x", "NUMBER", "Firefox", "NUMBER", "Operating", "System", "and", "version", "Windows", "NUMBER", "desktop", "TAG", "I", "surely", "could", "not", "have", "be", "so", "quick", "NUMBER", "I", "don", "t", "even", "know", "how", "I", "can", "test", "modify", "code", "I", "may", "be", "more", "helpful", "in", "some", "days", "weeks", "NUMBER", "Many", "thanks", "NUMBER", "When", "I", "try", "to", "write", "something", "like", "the", "stop", "watch", "component", "in", "the", "try", "online", "section", "i", "get", "the", "following", "error", "when", "the", "script", "try", "to", "update", "the", "component", "Uncaught", "TypeError", "at", "Component", "NUMBER", "__rerender", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "at", "Component", "NUMBER", "update", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "at", "updateComponents", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "at", "updateUnbatchedComponents", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "at", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "__rerender", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "update", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "updateComponents", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "updateUnbatchedComponents", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "anonymous", "pages", "NUMBER", "d", "NUMBER", "js", "NUMBER", "below", "be", "the", "function", "where", "I", "hit", "the", "error", "__rerender", "function", "input", "if", "input", "this", "NUMBER", "input", "input", "var", "self", "this", "var", "renderer", "self", "NUMBER", "__renderer", "if", "renderer", "throw", "TypeError", "NUMBER", "self", "NUMBER", "__renderer", "be", "undefined", "NUMBER", "In", "my", "case", "there", "s", "a", "template", "rendered", "by", "express", "with", "marko", "express", "NUMBER", "The", "template", "has", "a", "tag", "call", "sidebar", "NUMBER", "This", "tag", "be", "where", "the", "code", "lives", "and", "it", "s", "build", "use", "the", "multi", "file", "structure", "component", "browser", "NUMBER", "js", "component", "NUMBER", "js", "index", "NUMBER", "marko", "NUMBER", "component", "browser", "NUMBER", "js", "handles", "the", "OnMount", "and", "browser", "events", "NUMBER", "component", "NUMBER", "js", "handles", "onCreate", "In", "the", "onMount", "I", "declared", "and", "assigned", "the", "intervalId", "to", "the", "global", "setTimeout", "function", "that", "change", "the", "state", "use", "this", "NUMBER", "ate", "NUMBER", "width", "every", "NUMBER", "second", "NUMBER", "I", "m", "use", "es", "NUMBER", "function", "syntax", "so", "that", "the", "this", "scope", "be", "preserved", "When", "the", "interval", "change", "the", "state", "i", "get", "the", "error", "i", "mention", "above", "NUMBER", "Can", "you", "please", "help", "to", "understand", "where", "I", "m", "wrong", "Thanks", "I", "m", "having", "the", "same", "issue", "on", "version", "NUMBER", "maximilianschmitt", "If", "you", "be", "use", "a", "main", "template", "you", "can", "try", "to", "something", "like", "this", "template", "NUMBER", "marko", "include", "input", "NUMBER", "lasso", "TAG", "html", "head", "app", "head", "input", "lasso", "head", "body", "div", "id", "main", "app", "app", "header", "input", "app", "body", "input", "browser", "refresh", "enable", "true", "lasso", "body", "TAG", "TAG", "page", "NUMBER", "marko", "include", "theme", "html", "NUMBER", "marko", "lasso", "lasso", "page", "package", "path", "NUMBER", "browser", "NUMBER", "json", "title", "Dashboard", "body", "app", "main", "Notice", "the", "lasso", "tag", "in", "the", "page", "NUMBER", "marko", "file", "NUMBER", "Instead", "of", "putting", "the", "lasso", "page", "package", "path", "NUMBER", "tag", "in", "the", "main", "template", "I", "delegated", "the", "page", "to", "send", "it", "to", "the", "main", "template", "that", "receive", "it", "at", "the", "top", "of", "the", "file", "with", "the", "tage", "include", "input", "NUMBER", "lasso", "I", "don", "t", "know", "why", "but", "that", "solve", "the", "issue", "for", "me", "NUMBER", "Furthermore", "I", "remove", "the", "component", "browser", "NUMBER", "js", "file", "and", "write", "both", "the", "server", "and", "client", "logic", "inside", "the", "component", "NUMBER", "js", "file", "Thanks", "for", "the", "clarification", "patrick", "steele", "idem", "and", "ovidius", "NUMBER", "I", "m", "test", "Marko", "for", "server", "side", "and", "client", "side", "rendering", "and", "I", "ve", "be", "looking", "for", "a", "way", "to", "define", "the", "global", "variables", "out", "NUMBER", "global", "when", "bootstrapping", "client", "side", "components", "NUMBER", "Is", "it", "possible", "At", "the", "moment", "I", "m", "just", "seeing", "that", "input", "and", "state", "be", "pass", "from", "backend", "to", "client", "but", "global", "variables", "be", "left", "blank", "in", "the", "page", "and", "I", "rather", "use", "specific", "globals", "in", "the", "client", "NUMBER", "Sample", "code", "use", "intentionally", "bad", "practices", "server", "TAG", "out", "NUMBER", "global", "NUMBER", "title", "TAG", "NUMBER", "template", "NUMBER", "ream", "global", "title", "Foo", "client", "import", "component", "from", "NUMBER", "import", "markoComponents", "from", "marko", "components", "markoComponents", "NUMBER", "init", "How", "can", "I", "define", "global", "Thanks", "for", "the", "hard", "work", "NUMBER", "It", "s", "amazing", "how", "simple", "it", "be", "to", "have", "universal", "components", "with", "Marko", "NUMBER", "I", "m", "not", "sure", "if", "I", "get", "it", "right", "NUMBER", "From", "what", "I", "see", "you", "re", "suggesting", "use", "the", "onInput", "handler", "to", "assign", "the", "global", "values", "in", "the", "server", "to", "the", "component", "input", "so", "it", "s", "serialized", "in", "the", "HTML", "for", "the", "client", "NUMBER", "Then", "in", "the", "client", "the", "onMount", "handler", "be", "call", "and", "the", "serialized", "input", "be", "put", "again", "in", "the", "store", "with", "the", "globals", "NUMBER", "Am", "I", "right", "Apart", "from", "be", "a", "little", "hacky", "IMO", "my", "problem", "with", "that", "approach", "be", "that", "the", "thing", "I", "m", "putting", "in", "globals", "be", "function", "not", "serializable", "values", "NUMBER", "For", "more", "context", "they", "re", "a", "translation", "function", "which", "already", "has", "the", "locale", "and", "the", "translations", "set", "for", "the", "current", "request", "and", "a", "function", "to", "get", "urls", "which", "rely", "on", "an", "internal", "mapping", "e", "NUMBER", "g", "NUMBER", "img", "logo", "NUMBER", "png", "LINK", "cdn", "NUMBER", "com", "img", "logo", "v", "NUMBER", "png", "among", "other", "things", "NUMBER", "I", "use", "dependency", "injection", "a", "lot", "and", "I", "d", "like", "to", "inject", "the", "client", "side", "version", "of", "those", "function", "in", "the", "template", "NUMBER", "I", "can", "come", "up", "with", "a", "hack", "to", "do", "this", "but", "I", "wanted", "to", "know", "if", "the", "library", "itself", "provide", "access", "to", "the", "out", "object", "be", "use", "in", "the", "client", "NUMBER", "Would", "you", "consider", "implement", "it", "o", "accepting", "a", "PR", "that", "did", "that", "patrick", "steele", "idem", "I", "like", "your", "approach", "because", "we", "work", "with", "the", "same", "interface", "out", "NUMBER", "global", "but", "you", "always", "have", "to", "define", "which", "propertys", "be", "serialized", "to", "the", "browser", "right", "It", "would", "be", "nice", "if", "we", "could", "work", "in", "the", "same", "way", "as", "on", "server", "side", "NUMBER", "In", "my", "opinion", "global", "data", "shouldn", "t", "need", "manual", "adjustment", "in", "every", "component", "NUMBER", "Intial", "state", "should", "be", "that", "the", "whole", "global", "object", "will", "be", "serialized", "NUMBER", "marko", "class", "marko", "TAG", "Title", "out", "NUMBER", "global", "NUMBER", "title", "TAG", "If", "you", "dont", "want", "to", "serialize", "everything", "we", "can", "define", "a", "whitelist", "with", "some", "tooling", "marko", "class", "get", "globals", "return", "title", "only", "title", "return", "title", "all", "except", "title", "return", "foo", "NUMBER", "bar", "only", "bar", "return", "share", "nothing", "If", "you", "dont", "define", "a", "globals", "getter", "everything", "be", "shared", "NUMBER", "marko", "TAG", "Title", "out", "NUMBER", "global", "NUMBER", "title", "TAG", "Sorry", "for", "the", "delay", "NUMBER", "Before", "telling", "what", "my", "preference", "would", "be", "take", "into", "account", "that", "I", "m", "not", "use", "Marko", "in", "production", "I", "m", "still", "playing", "with", "it", "to", "evaluate", "if", "it", "fits", "my", "needs", "my", "company", "s", "NUMBER", "I", "think", "we", "should", "be", "able", "to", "pass", "top", "level", "input", "and", "globals", "in", "the", "client", "initialization", "as", "we", "do", "with", "server", "side", "rendering", "NUMBER", "If", "in", "the", "server", "we", "do", "javascript", "template", "NUMBER", "ream", "currentPage", "Home", "page", "global", "staticUrl", "NUMBER", "We", "should", "be", "able", "to", "do", "so", "in", "the", "client", "javascript", "import", "component", "from", "NUMBER", "import", "markoComponents", "from", "marko", "components", "markoComponents", "NUMBER", "init", "input", "Add", "variables", "to", "the", "serialized", "input", "replaceInput", "Replace", "all", "serialized", "input", "global", "staticUrl", "NUMBER", "client", "side", "version", "replaceGlobal", "NUMBER", "The", "problem", "with", "this", "approach", "as", "far", "as", "I", "know", "be", "that", "there", "s", "no", "guarantee", "that", "there", "will", "only", "be", "a", "single", "top", "level", "component", "in", "the", "page", "so", "passing", "these", "values", "to", "markoComponents", "NUMBER", "init", "could", "be", "problematic", "although", "it", "d", "solve", "my", "needs", "NUMBER", "My", "use", "case", "be", "something", "like", "this", "and", "it", "s", "already", "work", "with", "Nunjucks", "javascript", "const", "staticUrl", "out", "NUMBER", "global", "TAG", "gilbert", "that", "pattern", "may", "work", "for", "me", "but", "I", "d", "need", "many", "change", "in", "my", "code", "to", "be", "able", "to", "import", "the", "function", "that", "resolve", "urls", "as", "I", "rely", "a", "lot", "on", "dependency", "injection", "NUMBER", "The", "function", "that", "resolve", "urls", "be", "not", "so", "simple", "as", "appending", "the", "path", "to", "a", "variable", "CDN", "hostname", "but", "all", "paths", "be", "mapped", "to", "a", "cache", "friendly", "version", "NUMBER", "Also", "I", "don", "t", "think", "it", "s", "a", "good", "idea", "to", "use", "out", "as", "a", "global", "variable", "in", "window", "NUMBER", "In", "case", "this", "weren", "t", "possible", "having", "a", "reference", "to", "the", "out", "variable", "use", "to", "initialize", "components", "would", "also", "be", "enough", "javascript", "import", "component", "from", "NUMBER", "import", "markoComponents", "from", "marko", "components", "Object", "NUMBER", "assign", "markoComponents", "NUMBER", "out", "NUMBER", "global", "My", "global", "variables", "markoComponents", "NUMBER", "init", "Or", "having", "access", "to", "the", "serialized", "data", "javascript", "import", "component", "from", "NUMBER", "import", "markoComponents", "from", "marko", "components", "const", "serializedState", "markoComponents", "NUMBER", "getSerializedState", "Object", "NUMBER", "assign", "serializedState", "My", "variables", "markoComponents", "NUMBER", "init", "Hi", "NUMBER", "Just", "read", "about", "Marko", "recently", "NUMBER", "Can", "Marko", "be", "use", "for", "mobile", "app", "development", "do", "it", "have", "anything", "similar", "to", "React", "Native", "or", "Ionic", "I", "m", "use", "marko", "for", "a", "progressive", "web", "app", "so", "i", "guess", "marko", "can", "do", "it", "marko", "TAG", "home", "karl", "dev", "instanty", "node", "src", "client", "components", "app__sign", "in", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "_compile", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "loadSource", "home", "karl", "dev", "instanty", "node", "node_modules", "marko", "runtime", "loader", "index", "default", "NUMBER", "js", "NUMBER", "NUMBER", "at", "doLoad", "home", "karl", "dev", "instanty", "node", "node_modules", "marko", "runtime", "loader", "index", "default", "NUMBER", "js", "NUMBER", "NUMBER", "The", "error", "above", "be", "expected", "as", "my", "code", "isn", "t", "correct", "NUMBER", "So", "the", "rendersync", "error", "seems", "to", "happen", "when", "I", "use", "browser", "refresh", "I", "edit", "a", "file", "which", "be", "incorrect", "it", "trys", "to", "re", "render", "and", "then", "try", "to", "update", "the", "client", "NUMBER", "As", "stated", "to", "fix", "the", "rendersync", "error", "I", "just", "have", "to", "manually", "stop", "and", "start", "my", "npm", "run", "dev", "script", "NUMBER", "My", "npm", "run", "dev", "be", "as", "follows", "NODE_ENV", "development", "NODE_PATH", "pwd", "browser", "refresh", "nolazy", "inspect", "NUMBER", "src", "index", "NUMBER", "js", "I", "ll", "update", "if", "I", "see", "anything", "new", "or", "figure", "out", "a", "pattern", "NUMBER", "Hi", "I", "ve", "be", "developing", "with", "React", "for", "the", "past", "NUMBER", "years", "and", "use", "Marko", "really", "feels", "nice", "and", "fresh", "NUMBER", "I", "love", "how", "fast", "and", "lightweight", "it", "feels", "But", "one", "thing", "I", "couldn", "t", "figure", "out", "and", "find", "no", "examples", "for", "be", "keep", "the", "value", "of", "an", "input", "in", "sync", "with", "the", "component", "s", "state", "NUMBER", "With", "React", "you", "do", "TAG", "where", "onChange", "calls", "setState", "value", "e", "NUMBER", "target", "NUMBER", "value", "and", "it", "just", "works", "NUMBER", "Intuitively", "I", "thought", "the", "correct", "way", "to", "go", "about", "this", "in", "Marko", "would", "be", "to", "do", "something", "like", "this", "class", "onCreate", "this", "NUMBER", "ate", "value", "Hello", "handleInput", "e", "this", "NUMBER", "ate", "NUMBER", "value", "e", "NUMBER", "target", "NUMBER", "value", "input", "value", "state", "NUMBER", "value", "on", "input", "handleKeydown", "state", "NUMBER", "value", "keyDown", "be", "be", "call", "however", "the", "component", "be", "not", "rerendering", "if", "I", "type", "in", "the", "input", "NUMBER", "The", "text", "next", "to", "it", "state", "NUMBER", "value", "always", "says", "Hello", "NUMBER", "Also", "the", "input", "only", "seems", "to", "pick", "up", "every", "second", "character", "I", "type", "in", "NUMBER", "If", "I", "add", "a", "setStateDirty", "value", "to", "my", "handleInput", "function", "the", "input", "s", "value", "always", "stays", "at", "Hello", "NUMBER", "I", "can", "tell", "by", "logging", "that", "in", "this", "case", "the", "component", "be", "rerendering", "with", "no", "visible", "result", "though", "NUMBER", "Is", "my", "approach", "fundamentally", "wrong", "How", "do", "you", "normally", "keep", "state", "and", "input", "components", "in", "sync", "Thanks", "for", "your", "help", "Best", "Max", "mindeavor", "ah", "thank", "you", "Bug", "Report", "Context", "At", "markojs", "NUMBER", "com", "clicking", "the", "tab", "next", "to", "Color", "picker", "gives", "a", "js", "error", "NUMBER", "Expected", "Behavior", "Switch", "tabs", "NUMBER", "Actual", "Behavior", "Error", "NUMBER", "Possible", "Fix", "I", "m", "totally", "new", "here", "NUMBER", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "n", "a", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Chromium", "Version", "NUMBER", "Built", "on", "Ubuntu", "run", "on", "LinuxMint", "NUMBER", "NUMBER", "bit", "Operating", "System", "and", "version", "desktop", "or", "mobile", "ibid", "Link", "to", "your", "project", "n", "a", "Steps", "to", "Reproduce", "NUMBER", "load", "markojs", "NUMBER", "com", "NUMBER", "open", "error", "console", "clean", "at", "this", "point", "NUMBER", "click", "said", "link", "Stack", "Trace", "Uncaught", "Error", "Not", "allow", "at", "h", "NUMBER", "beginAsync", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "c", "NUMBER", "export", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "b", "NUMBER", "f", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "h", "NUMBER", "_", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "b", "NUMBER", "f", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "g", "NUMBER", "_", "NUMBER", "l", "NUMBER", "r", "NUMBER", "type", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "at", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "beginAsync", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "c", "NUMBER", "export", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "anonymous", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "b", "NUMBER", "f", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "h", "NUMBER", "_", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "anonymous", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "b", "NUMBER", "f", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "g", "NUMBER", "_", "NUMBER", "l", "NUMBER", "r", "NUMBER", "type", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "anonymous", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "anonymous", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "b", "NUMBER", "_t", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "_S", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "update", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "h", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "f", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "anonymous", "index", "NUMBER", "c", "NUMBER", "fc", "NUMBER", "js", "NUMBER", "TAG", "Bug", "Report", "Expected", "I", "try", "to", "build", "Mixin", "mechanism", "for", "enhancing", "marko", "component", "unfortunately", "it", "seems", "component", "instance", "was", "created", "out", "of", "normal", "way", "NUMBER", "Code", "___mixins", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "___", "LINK", "starter", "kit", "blob", "master", "src", "core", "mixins", "mixins", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "export", "default", "NUMBER", "mixins", "class", "MixedComponent", "for", "let", "mixin", "of", "mixins", "for", "let", "name", "of", "Object", "NUMBER", "keys", "mixin", "MixedComponent", "NUMBER", "prototype", "name", "mixin", "name", "return", "MixedComponent", "___history", "mixin", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "___", "LINK", "starter", "kit", "blob", "master", "src", "core", "mixins", "history", "mixin", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "export", "default", "funcInMixin", "console", "NUMBER", "log", "funcInMixin", "call", "___component", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "___", "LINK", "starter", "kit", "blob", "master", "src", "routes", "mixin", "components", "app", "main", "component", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "import", "Mixins", "HistoryMixin", "from", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "core", "mixins", "var", "MixedBaseClass", "Mixins", "HistoryMixin", "class", "Bar", "extend", "MixedBaseClass", "export", "default", "class", "MyClass", "extend", "MixedBaseClass", "foo", "the", "following", "NUMBER", "lines", "code", "be", "work", "as", "expected", "NUMBER", "var", "bar", "new", "Bar", "bar", "NUMBER", "funcInMixin", "print", "funcInMixin", "call", "in", "console", "In", "fact", "we", "want", "component", "instance", "has", "mix", "function", "funcInMixin", "Unfortunately", "this", "NUMBER", "funcInMixin", "be", "undefined", "it", "cause", "unhandle", "exception", "this", "NUMBER", "funcInMixin", "patrick", "steele", "idem", "Thanks", "for", "your", "help", "it", "works", "NUMBER", "___foo", "mixin", "NUMBER", "js___", "JavaScript", "export", "default", "foo", "console", "NUMBER", "log", "function", "call", "in", "foo", "mixin", "___bar", "mixin", "NUMBER", "js___", "JavaScript", "export", "default", "bar", "console", "NUMBER", "log", "function", "call", "in", "bar", "mixin", "___mixins", "NUMBER", "js___", "JavaScript", "export", "default", "NUMBER", "mixins", "component", "for", "let", "mixin", "of", "mixins", "Object", "NUMBER", "assign", "component", "NUMBER", "prototype", "mixin", "return", "component", "___component", "NUMBER", "js___", "JavaScript", "import", "Mixins", "FooMixin", "BarMixin", "from", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "core", "mixins", "class", "MyComponent", "callFunc", "this", "NUMBER", "bar", "this", "NUMBER", "foo", "export", "default", "Mixins", "FooMixin", "BarMixin", "MyComponent", "macro", "needs", "to", "be", "rewritten", "marko", "TAG", "TAG", "NUMBER", "if", "NUMBER", "TAG", "TAG", "TAG", "TAG", "NUMBER", "else", "NUMBER", "TAG", "TAG", "javascript", "use", "strict", "function", "render", "input", "out", "if", "xxx", "function", "macro_yy", "out", "NUMBER", "w", "NUMBER", "if", "NUMBER", "else", "function", "macro_yy", "out", "NUMBER", "w", "NUMBER", "else", "NUMBER", "macro_yy", "it", "will", "be", "throw", "ReferenceError", "macro_yy", "be", "not", "defined", "in", "strict", "model", "mindeavor", "Yeah", "that", "s", "what", "I", "m", "doing", "marko", "TAG", "TAG", "NUMBER", "if", "NUMBER", "TAG", "TAG", "NUMBER", "else", "NUMBER", "TAG", "TAG", "patrick", "steele", "idem", "thanks", "Bug", "Report", "NOTE", "I", "m", "not", "sure", "if", "it", "be", "a", "BUG", "but", "the", "vue", "s", "behavior", "be", "we", "wanted", "NUMBER", "Code", "___", "routes", "index", "index", "NUMBER", "marko___", "TAG", "TAG", "TAG", "Welcome", "Marko", "Demo", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "___", "routes", "index", "components", "app", "main", "index", "NUMBER", "marko___", "style", "NUMBER", "chart", "position", "relative", "display", "inline", "block", "width", "NUMBER", "px", "height", "NUMBER", "px", "margin", "top", "NUMBER", "px", "margin", "bottom", "NUMBER", "px", "text", "align", "center", "NUMBER", "chart", "canvas", "position", "absolute", "top", "NUMBER", "left", "NUMBER", "NUMBER", "percent", "display", "inline", "block", "line", "height", "NUMBER", "px", "z", "index", "NUMBER", "NUMBER", "percent", "after", "content", "margin", "left", "NUMBER", "em", "font", "size", "NUMBER", "em", "class", "constructor", "this", "NUMBER", "ate", "count", "NUMBER", "onMount", "NUMBER", "chart", "NUMBER", "easyPieChart", "easing", "easeOutBounce", "onStep", "function", "from", "to", "percent", "this", "NUMBER", "el", "NUMBER", "find", "NUMBER", "percent", "NUMBER", "text", "Math", "NUMBER", "round", "percent", "this", "NUMBER", "chart", "NUMBER", "chart", "NUMBER", "data", "easyPieChart", "this", "NUMBER", "chart", "NUMBER", "update", "Math", "NUMBER", "round", "Math", "NUMBER", "random", "NUMBER", "NUMBER", "inc", "this", "NUMBER", "ate", "NUMBER", "count", "dec", "this", "NUMBER", "ate", "NUMBER", "count", "updateChart", "this", "NUMBER", "chart", "NUMBER", "update", "Math", "NUMBER", "round", "Math", "NUMBER", "random", "NUMBER", "NUMBER", "TAG", "TAG", "TAG", "Count", "state", "NUMBER", "count", "TAG", "TAG", "inc", "TAG", "TAG", "dec", "TAG", "TAG", "Click", "the", "or", "button", "will", "cause", "canvas", "generate", "by", "easy", "pie", "chart", "plugin", "be", "remove", "vue", "doesn", "t", "has", "this", "issue", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Update", "chart", "TAG", "TAG", "TAG", "Steps", "After", "page", "loaded", "the", "easyPieChart", "create", "a", "canvas", "inside", "TAG", "TAG", "TAG", "if", "you", "click", "Update", "chart", "button", "the", "chart", "will", "be", "refreshed", "all", "things", "goes", "well", "but", "if", "you", "click", "inc", "or", "dec", "button", "the", "canvas", "disappeared", "NUMBER", "actually", "we", "want", "canvas", "keep", "in", "document", "NUMBER", "Vue", "has", "the", "right", "behavior", "we", "wanted", "I", "have", "created", "the", "same", "demo", "app", "of", "vue", "version", "LINK", "Also", "I", "have", "uploaded", "the", "marko", "version", "of", "demo", "app", "LINK", "vdom", "issue", "NUMBER", "git", "mindeavor", "Thanks", "for", "your", "reply", "and", "fix", "issue", "in", "this", "case", "NUMBER", "but", "it", "cause", "TAG", "Math", "NUMBER", "round", "state", "NUMBER", "percent", "TAG", "no", "longer", "to", "be", "update", "NUMBER", "Although", "we", "can", "create", "special", "DOM", "structure", "to", "avoid", "the", "issue", "but", "it", "make", "DOM", "structure", "more", "complex", "NUMBER", "Anyway", "Thanks", "for", "your", "solution", "again", "NUMBER", "___template", "NUMBER", "marko", "L", "NUMBER", "L", "NUMBER", "___", "LINK", "starter", "kit", "blob", "master", "src", "routes", "test", "components", "app", "main", "index", "NUMBER", "marko", "L", "NUMBER", "L", "NUMBER", "TAG", "TAG", "TAG", "Math", "NUMBER", "round", "state", "NUMBER", "percent", "TAG", "TAG", "TAG", "Update", "chart", "TAG", "TAG", "___component", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "___", "LINK", "starter", "kit", "blob", "master", "src", "routes", "test", "components", "app", "main", "component", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "export", "default", "class", "Test", "onMount", "NUMBER", "chart", "NUMBER", "easyPieChart", "easing", "easeOutBounce", "onStep", "function", "from", "to", "percent", "this", "NUMBER", "el", "NUMBER", "find", "NUMBER", "percent", "NUMBER", "text", "Math", "NUMBER", "round", "percent", "this", "NUMBER", "chart", "NUMBER", "chart", "NUMBER", "data", "easyPieChart", "this", "NUMBER", "chart", "NUMBER", "update", "this", "NUMBER", "ate", "NUMBER", "percent", "NUMBER", "updateChart", "this", "NUMBER", "ate", "NUMBER", "percent", "Math", "NUMBER", "random", "NUMBER", "NUMBER", "this", "NUMBER", "chart", "NUMBER", "update", "this", "NUMBER", "ate", "NUMBER", "percent", "mindeavor", "Correct", "create", "special", "DOM", "structure", "for", "handle", "NUMBER", "mindeavor", "I", "have", "another", "question", "what", "s", "the", "difference", "between", "input", "and", "state", "like", "props", "and", "state", "in", "react", "mindeavor", "Thanks", "Open", "Questions", "TAG", "I", "understand", "marko", "can", "be", "use", "with", "a", "number", "of", "server", "side", "frameworks", "like", "express", "that", "handle", "URL", "dispatching", "but", "do", "it", "include", "any", "client", "side", "router", "or", "be", "any", "plan", "to", "support", "this", "Thanks", "I", "like", "the", "JSX", "syntax", "support", "in", "React", "Router", "NUMBER", "Also", "need", "solid", "support", "of", "server", "side", "rendering", "NUMBER", "The", "Inferno", "port", "of", "React", "Router", "be", "probably", "worth", "looking", "at", "LINK", "router", "Any", "update", "on", "this", "Besides", "the", "router", "I", "think", "a", "router", "link", "core", "component", "would", "be", "needed", "similar", "to", "this", "LINK", "link", "NUMBER", "html", "NUMBER", "Maybe", "something", "like", "TAG", "or", "TAG", "to", "avoid", "overloading", "import", "I", "agree", "with", "mindeavor", "that", "auto", "detection", "has", "worked", "extremely", "well", "NUMBER", "Are", "you", "proposing", "this", "change", "instead", "of", "defining", "a", "tags", "dir", "withn", "a", "marko", "NUMBER", "json", "Looks", "like", "bug", "be", "fix", "NUMBER", "I", "just", "reinstall", "all", "my", "modules", "and", "now", "everything", "work", "like", "expected", "I", "m", "get", "this", "error", "Uncaught", "TypeError", "component", "NUMBER", "__setCustomEvents", "be", "not", "a", "function", "when", "use", "multi", "file", "structure", "for", "components", "and", "exporting", "as", "a", "class", "NUMBER", "module", "NUMBER", "export", "class", "NUMBER", "It", "works", "when", "a", "literal", "object", "be", "export", "module", "NUMBER", "export", "NUMBER", "marko", "version", "be", "NUMBER", "node", "NUMBER", "TAG", "Bug", "Report", "I", "m", "trying", "to", "use", "to", "output", "some", "HTML", "that", "be", "generate", "on", "the", "server", "but", "it", "s", "not", "rendering", "NUMBER", "Context", "TAG", "I", "be", "passing", "an", "input", "tag", "like", "this", "TAG", "NUMBER", "Looking", "at", "the", "element", "in", "chrome", "devtools", "it", "looks", "like", "TAG", "TAG", "NUMBER", "If", "I", "edit", "the", "element", "in", "devtools", "to", "be", "like", "the", "input", "it", "works", "fine", "NUMBER", "Expected", "Behavior", "TAG", "It", "should", "output", "TAG", "Actual", "Behavior", "TAG", "It", "outputs", "TAG", "TAG", "Possible", "Fix", "TAG", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "NUMBER", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Node", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Ubuntu", "NUMBER", "Steps", "to", "Reproduce", "TAG", "TAG", "Add", "the", "following", "component", "to", "your", "app", "class", "onCreate", "this", "NUMBER", "ate", "html", "TAG", "TAG", "state", "NUMBER", "html", "TAG", "TAG", "TAG", "A", "regular", "div", "tag", "works", "fine", "although", "the", "tag", "be", "upper", "cased", "NUMBER", "An", "img", "tag", "has", "the", "same", "problem", "as", "input", "so", "it", "seems", "to", "be", "a", "problem", "with", "tags", "that", "don", "t", "require", "a", "closing", "tag", "NUMBER", "Excellent", "NUMBER", "Thank", "you", "NUMBER", "Related", "to", "LINK", "js", "marko", "issue", "NUMBER", "TAG", "Replaced", "constructor", "with", "onCreate", "Description", "TAG", "Motivation", "and", "Context", "TAG", "TAG", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "a", "NUMBER", "dff", "NUMBER", "ec", "NUMBER", "d", "NUMBER", "b", "NUMBER", "d", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ca", "NUMBER", "on", "basickarl", "patch", "NUMBER", "into", "e", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "b", "NUMBER", "a", "NUMBER", "eaee", "NUMBER", "a", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "d", "NUMBER", "b", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Context", "Hey", "patrick", "steele", "idem", "i", "m", "use", "marko", "v", "NUMBER", "in", "production", "and", "i", "m", "trying", "to", "convince", "my", "team", "to", "upgrade", "to", "marko", "v", "NUMBER", "I", "m", "trying", "to", "find", "the", "performance", "diff", "between", "v", "NUMBER", "and", "v", "NUMBER", "Do", "you", "guys", "know", "where", "i", "can", "find", "or", "do", "you", "guys", "have", "something", "to", "help", "me", "speed", "up", "this", "upgrade", "Thanks", "Both", "rocket", "Really", "Thanks", "in", "advance", "patrick", "steele", "idem", "beers", "Updated", "counter", "NUMBER", "marko", "example", "in", "ReadME", "NUMBER", "md", "file", "to", "use", "onCreate", "instead", "of", "constructor", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "a", "NUMBER", "d", "NUMBER", "b", "NUMBER", "cacc", "NUMBER", "d", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "ca", "NUMBER", "on", "krypton", "NUMBER", "master", "into", "NUMBER", "c", "NUMBER", "ed", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ea", "NUMBER", "fe", "NUMBER", "a", "NUMBER", "b", "NUMBER", "on", "marko", "js", "master", "NUMBER", "You", "actually", "can", "serialize", "function", "I", "m", "work", "on", "a", "dashboard", "use", "VueJS", "that", "takes", "advantage", "of", "that", "NUMBER", "with", "nunjucks", "i", "can", "var", "dump", "what", "be", "the", "equivalent", "for", "marko", "patrick", "steele", "idem", "Yes", "delete", "my", "comment", "NUMBER", "Open", "Questions", "How", "do", "you", "implement", "css", "in", "isolation", "with", "markojs", "With", "the", "movement", "of", "component", "based", "authoring", "instead", "of", "document", "NUMBER", "People", "find", "that", "its", "better", "to", "isolate", "css", "selectors", "to", "per", "component", "as", "oppose", "to", "its", "default", "cascading", "nature", "NUMBER", "Is", "this", "something", "marko", "js", "aim", "to", "solve", "Is", "this", "something", "you", "re", "interested", "in", "work", "on", "Yes", "Do", "you", "mean", "having", "a", "separate", "stylesheet", "for", "each", "component", "You", "can", "either", "use", "the", "new", "style", "NUMBER", "tag", "or", "put", "a", "style", "NUMBER", "css", "in", "the", "component", "s", "directory", "and", "make", "sure", "your", "bundler", "finds", "it", "NUMBER", "If", "you", "mean", "actually", "restricting", "the", "CSS", "to", "specific", "sections", "of", "the", "final", "document", "as", "far", "as", "I", "know", "that", "s", "not", "possible", "except", "in", "Firefox", "with", "TAG", "NUMBER", "Other", "frameworks", "just", "quietly", "add", "extra", "classes", "and", "selectors", "to", "make", "it", "look", "that", "way", "NUMBER", "More", "of", "the", "latter", "It", "s", "not", "possible", "doing", "it", "in", "css", "alone", "NUMBER", "However", "it", "be", "possible", "with", "the", "help", "of", "a", "build", "step", "NUMBER", "Basically", "obfuscating", "the", "classname", "with", "hashes", "eg", "NUMBER", "NUMBER", "container", "_becomes_", "NUMBER", "cn", "NUMBER", "o", "NUMBER", "j", "NUMBER", "Prior", "art", "be", "css", "modules", "styled", "components", "styled", "jsx", "NUMBER", "This", "be", "one", "of", "the", "reasons", "I", "m", "still", "use", "Vue", "NUMBER", "js", "NUMBER", "It", "has", "support", "for", "scoped", "CSS", "via", "classname", "injection", "NUMBER", "The", "other", "reason", "be", "that", "NUMBER", "vue", "file", "be", "just", "HTML", "file", "so", "you", "don", "t", "need", "to", "use", "prefixes", "like", "or", "and", "they", "don", "t", "need", "their", "own", "editor", "extensions", "for", "syntax", "highlight", "NUMBER", "mindeavor", "I", "don", "t", "want", "to", "derail", "this", "topic", "but", "NUMBER", "vue", "file", "support", "TAG", "and", "TAG", "elements", "so", "there", "s", "no", "need", "to", "put", "your", "JavaScript", "in", "a", "string", "NUMBER", "And", "according", "to", "the", "HTML", "spec", "LINK", "attributes", "NUMBER", "there", "s", "nothing", "wrong", "with", "dots", "in", "attribute", "names", "NUMBER", "See", "Single", "File", "Components", "LINK", "file", "components", "NUMBER", "html", "for", "more", "information", "NUMBER", "image", "LINK", "NUMBER", "b", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "d", "NUMBER", "png", "patrick", "steele", "idem", "I", "think", "I", "m", "leaning", "towards", "Vue", "s", "implementation", "as", "a", "recommendation", "NUMBER", "Which", "be", "just", "hooking", "up", "to", "post", "css", "NUMBER", "With", "post", "css", "you", "can", "basically", "create", "any", "transform", "you", "want", "sass", "less", "css", "modules", "NUMBER", "Since", "we", "ll", "all", "shoving", "this", "down", "to", "compiler", "step", "NUMBER", "There", "won", "t", "be", "any", "add", "bulk", "to", "the", "final", "output", "NUMBER", "NUMBER", "Vue", "like", "implementation", "Random", "idea", "if", "the", "style", "processing", "can", "actually", "take", "a", "list", "of", "processors", "then", "a", "scoped", "processor", "could", "perhaps", "be", "created", "NUMBER", "This", "would", "allow", "things", "such", "as", "style", "NUMBER", "scoped", "NUMBER", "and", "style", "NUMBER", "less", "NUMBER", "scoped", "NUMBER", "NUMBER", "NUMBER", "Vue", "like", "implementation", "NUMBER", "On", "a", "relate", "note", "should", "class", "NUMBER", "be", "renamed", "to", "component", "NUMBER", "That", "seems", "like", "a", "more", "accurate", "description", "fits", "better", "with", "the", "theme", "style", "style", "NUMBER", "css", "component", "component", "NUMBER", "js", "and", "would", "be", "less", "likely", "to", "confuse", "new", "users", "who", "expect", "it", "to", "behave", "like", "an", "ES", "NUMBER", "class", "NUMBER", "I", "use", "a", "lot", "of", "classes", "outside", "of", "Marko", "specific", "code", "and", "use", "the", "onCreate", "method", "instead", "of", "the", "constructor", "method", "to", "avoid", "confusion", "NUMBER", "I", "advocate", "remove", "the", "constructor", "method", "and", "standardize", "the", "onCreate", "method", "across", "both", "module", "NUMBER", "export", "and", "the", "Marko", "class", "component", "definition", "NUMBER", "TAG", "Description", "The", "await", "tag", "basic", "implementation", "and", "advance", "use", "signature", "NUMBER", "Motivation", "and", "Context", "I", "wanted", "to", "fill", "in", "the", "basic", "implementation", "because", "it", "s", "so", "handy", "NUMBER", "If", "you", "think", "this", "will", "help", "users", "I", "will", "also", "volunteer", "to", "document", "the", "advance", "usage", "but", "doing", "so", "could", "take", "a", "whole", "page", "NUMBER", "Your", "thoughts", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "ed", "NUMBER", "fe", "NUMBER", "e", "NUMBER", "c", "NUMBER", "d", "NUMBER", "b", "NUMBER", "ee", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "ec", "NUMBER", "on", "tcrowe", "await", "docs", "basic", "into", "bce", "NUMBER", "c", "NUMBER", "a", "NUMBER", "aaaef", "NUMBER", "cff", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "NUMBER", "af", "NUMBER", "a", "NUMBER", "f", "NUMBER", "e", "NUMBER", "ba", "NUMBER", "f", "NUMBER", "a", "NUMBER", "c", "NUMBER", "ec", "NUMBER", "e", "on", "tcrowe", "await", "docs", "basic", "into", "bce", "NUMBER", "c", "NUMBER", "a", "NUMBER", "aaaef", "NUMBER", "cff", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "bf", "NUMBER", "af", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "f", "NUMBER", "a", "NUMBER", "on", "tcrowe", "await", "docs", "basic", "into", "bce", "NUMBER", "c", "NUMBER", "a", "NUMBER", "aaaef", "NUMBER", "cff", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "mindeavor", "Yes", "you", "can", "NUMBER", "You", "can", "discover", "a", "lot", "about", "it", "from", "here", "LINK", "js", "marko", "search", "utf", "NUMBER", "E", "NUMBER", "NUMBER", "C", "NUMBER", "q", "await", "You", "re", "welcome", "TAG", "New", "Feature", "Description", "TAG", "Context", "TAG", "TAG", "Possible", "Implementation", "TAG", "Open", "Questions", "TAG", "Is", "this", "something", "you", "re", "interested", "in", "work", "on", "TAG", "TAG", "Bug", "Report", "I", "start", "out", "following", "the", "webpack", "marko", "integration", "tutorial", "on", "LINK", "and", "get", "the", "error", "message", "error", "in", "cannot", "find", "module", "marko", "compiler", "even", "with", "webpack", "version", "NUMBER", "Context", "TAG", "image", "LINK", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "c", "NUMBER", "c", "NUMBER", "e", "NUMBER", "png", "Expected", "Behavior", "TAG", "Actual", "Behavior", "TAG", "Possible", "Fix", "TAG", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Link", "to", "your", "project", "Steps", "to", "Reproduce", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Stack", "Trace", "TAG", "TAG", "I", "think", "this", "be", "because", "marko", "loader", "do", "not", "depend", "on", "the", "marko", "package", "NUMBER", "If", "you", "install", "the", "marko", "package", "this", "should", "work", "sh", "npm", "install", "save", "dev", "marko", "or", "yarn", "add", "dev", "marko", "To", "be", "clear", "this", "be", "consistent", "behavior", "for", "any", "webpack", "loader", "For", "example", "when", "use", "the", "babel", "loader", "babel", "core", "needs", "to", "be", "install", "separately", "NUMBER", "Try", "this", "if", "you", "like", "marko", "starter", "kit", "LINK", "starter", "kit", "TAG", "Bug", "Report", "Context", "TAG", "I", "was", "work", "on", "a", "personal", "project", "and", "wanted", "to", "replace", "an", "exist", "rendered", "component", "with", "the", "newly", "rendered", "one", "use", "the", "following", "code", "javascript", "var", "featured", "document", "NUMBER", "querySelector", "NUMBER", "featured_fish", "var", "featuredFish", "require", "NUMBER", "fh", "featured", "fish", "featuredFish", "reference", "LINK", "featuredFish", "NUMBER", "render", "f", "NUMBER", "en", "function", "result", "result", "NUMBER", "replace", "featured", "Then", "in", "console", "I", "get", "the", "following", "issue", "Uncaught", "in", "promise", "TypeError", "destroyElRecursive", "be", "not", "a", "function", "beforeRemove", "bundle", "NUMBER", "js", "NUMBER", "replace", "bundle", "NUMBER", "js", "NUMBER", "anonymous", "function", "bundle", "NUMBER", "js", "NUMBER", "Expected", "Behavior", "TAG", "Ideally", "it", "should", "just", "replace", "the", "dom", "element", "right", "Actual", "Behavior", "TAG", "Uncaught", "in", "promise", "TypeError", "destroyElRecursive", "be", "not", "a", "function", "beforeRemove", "bundle", "NUMBER", "js", "NUMBER", "replace", "bundle", "NUMBER", "js", "NUMBER", "anonymous", "function", "bundle", "NUMBER", "js", "NUMBER", "Your", "Environment", "TAG", "Version", "use", "V", "NUMBER", "Environment", "name", "and", "version", "Version", "NUMBER", "NUMBER", "bit", "Operating", "System", "and", "version", "desktop", "or", "mobile", "OS", "X", "on", "Chrome", "Link", "to", "your", "project", "Not", "up", "yet", "so", "I", "really", "don", "t", "have", "a", "repo", "at", "the", "moment", "NUMBER", "Stack", "Trace", "TAG", "Uncaught", "in", "promise", "TypeError", "destroyElRecursive", "be", "not", "a", "function", "beforeRemove", "bundle", "NUMBER", "js", "NUMBER", "replace", "bundle", "NUMBER", "js", "NUMBER", "anonymous", "function", "bundle", "NUMBER", "js", "NUMBER", "TAG", "patrick", "steele", "idem", "ah", "I", "be", "actually", "use", "browserify", "markoify", "for", "this", "specific", "instance", "NUMBER", "This", "be", "my", "script", "I", "run", "before", "app", "NUMBER", "js", "runs", "browserify", "g", "markoify", "extension", "NUMBER", "marko", "assets", "js", "main", "NUMBER", "js", "o", "assets", "js", "bundle", "NUMBER", "js", "My", "main", "NUMBER", "js", "file", "just", "has", "some", "document", "level", "event", "binding", "work", "on", "get", "rid", "of", "that", "but", "it", "doesn", "t", "really", "affect", "marko", "at", "all", "Don", "t", "understand", "NUMBER", "Why", "not", "just", "use", "a", "function", "andersea", "It", "actually", "hooks", "into", "a", "build", "in", "extension", "system", "that", "s", "be", "part", "of", "require", "since", "almost", "the", "beginning", "but", "it", "has", "also", "be", "deprecate", "for", "nearly", "as", "long", "require", "NUMBER", "extensions", "LINK", "globals_require_extensions", "NUMBER", "It", "was", "originally", "decided", "that", "the", "add", "convenience", "outweighed", "the", "risk", "NUMBER", "NUMBER", "However", "with", "the", "relate", "change", "Patrick", "mention", "this", "may", "be", "the", "perfect", "time", "to", "rethink", "that", "NUMBER", "Also", "it", "s", "not", "necessary", "to", "use", "the", "extension", "the", "old", "way", "still", "works", "without", "it", "js", "var", "template", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "path", "to", "template", "NUMBER", "marko", "Thanks", "for", "that", "answers", "NUMBER", "Closing", "NUMBER", "Koa", "NUMBER", "be", "release", "as", "latest", "version", "so", "these", "docs", "needs", "to", "be", "update", "NUMBER", "Also", "add", "gzip", "example", "to", "feature", "Koa", "Marko", "streaming", "flexibility", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "f", "NUMBER", "af", "NUMBER", "e", "NUMBER", "fff", "NUMBER", "c", "NUMBER", "dc", "NUMBER", "a", "NUMBER", "on", "tinovyatkin", "master", "into", "aec", "NUMBER", "ae", "NUMBER", "aabbaca", "NUMBER", "a", "NUMBER", "f", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "TAG", "Description", "The", "developer", "can", "require", "marko", "file", "then", "use", "component", "auto", "init", "NUMBER", "I", "find", "out", "about", "it", "in", "the", "marko", "webpack", "src", "pages", "home", "client", "NUMBER", "js", "LINK", "js", "samples", "marko", "webpack", "blob", "master", "src", "pages", "home", "client", "NUMBER", "js", "file", "NUMBER", "Motivation", "and", "Context", "It", "may", "be", "helpful", "to", "include", "it", "in", "the", "documentation", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "af", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "NUMBER", "a", "NUMBER", "on", "tcrowe", "comp", "auto", "init", "into", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "cc", "NUMBER", "abcb", "NUMBER", "dc", "NUMBER", "c", "NUMBER", "d", "NUMBER", "fe", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "af", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "NUMBER", "a", "NUMBER", "on", "tcrowe", "comp", "auto", "init", "into", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "cc", "NUMBER", "abcb", "NUMBER", "dc", "NUMBER", "c", "NUMBER", "d", "NUMBER", "fe", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "af", "NUMBER", "a", "NUMBER", "b", "NUMBER", "a", "NUMBER", "a", "NUMBER", "on", "tcrowe", "comp", "auto", "init", "into", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "cc", "NUMBER", "abcb", "NUMBER", "dc", "NUMBER", "c", "NUMBER", "d", "NUMBER", "fe", "on", "marko", "js", "master", "NUMBER", "I", "notice", "that", "docs", "for", "express", "integration", "just", "have", "you", "require", "marko", "express", "which", "means", "it", "s", "use", "the", "side", "effect", "pattern", "to", "modify", "the", "global", "express", "NUMBER", "response", "object", "NUMBER", "The", "typical", "express", "middleware", "pattern", "would", "be", "js", "const", "express", "require", "express", "const", "marko", "require", "marko", "express", "const", "app", "express", "app", "NUMBER", "use", "marko", "Is", "there", "a", "specific", "reason", "marko", "express", "doesn", "t", "use", "the", "middleware", "pattern", "Looking", "at", "marko", "express", "NUMBER", "js", "LINK", "js", "marko", "blob", "v", "NUMBER", "express", "NUMBER", "js", "it", "doesn", "t", "seem", "like", "it", "needs", "to", "cause", "side", "effect", "to", "integrate", "with", "express", "NUMBER", "Using", "side", "effect", "instead", "of", "the", "middleware", "pattern", "means", "that", "you", "can", "t", "isolate", "marko", "integration", "to", "a", "specific", "express", "app", "route", "or", "path", "NUMBER", "Granted", "the", "current", "implementation", "be", "opt", "in", "you", "only", "call", "res", "NUMBER", "marko", "if", "you", "need", "to", "but", "if", "more", "features", "be", "add", "to", "express", "integration", "the", "inability", "to", "isolate", "the", "integration", "may", "become", "a", "problem", "NUMBER", "I", "be", "new", "to", "Marko", "and", "I", "find", "a", "tricky", "error", "when", "I", "try", "to", "layout", "the", "html", "page", "in", "sections", "NUMBER", "src", "component", "app", "sections", "index", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "section", "NUMBER", "label", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "When", "I", "add", "key", "attribute", "like", "this", "TAG", "it", "will", "report", "such", "an", "error", "below", "NUMBER", "If", "I", "remove", "the", "key", "everything", "compiles", "fine", "NUMBER", "marko", "hot", "reload", "Template", "successfully", "reloaded", "Users", "dofu", "git", "epnportal", "src", "components", "app", "sections", "index", "NUMBER", "marko", "NUMBER", "js", "events", "NUMBER", "js", "NUMBER", "throw", "er", "Unhandled", "error", "event", "Error", "Async", "fragment", "fail", "NUMBER", "Exception", "Error", "No", "component", "find", "at", "Error", "native", "at", "getCurrentComponent", "Users", "dofu", "git", "epnportal", "node_modules", "marko", "components", "taglib", "helpers", "getCurrentComponent", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "render", "Users", "dofu", "git", "epnportal", "src", "components", "app", "sections", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "hotReloadProxy", "Users", "dofu", "git", "epnportal", "node_modules", "marko", "hot", "reload", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "render", "Users", "dofu", "git", "epnportal", "src", "components", "app", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "hotReloadProxy", "Users", "dofu", "git", "epnportal", "node_modules", "marko", "hot", "reload", "index", "NUMBER", "js", "NUMBER", "NUMBER", "The", "rest", "pieces", "of", "code", "src", "component", "app", "index", "NUMBER", "marko", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "src", "component", "app", "sections", "marko", "tag", "NUMBER", "json", "json", "sections", "TAG", "label", "string", "requiredField", "boolean", "string", "I", "be", "really", "excited", "to", "see", "Marko", "v", "NUMBER", "come", "out", "with", "many", "new", "features", "bravo", "mindeavor", "In", "the", "official", "document", "LINK", "codekeycode", "it", "mentions", "The", "key", "attribute", "can", "be", "applied", "to", "both", "HTML", "elements", "and", "custom", "tags", "for", "UI", "components", "NUMBER", "If", "applied", "to", "an", "HTML", "element", "a", "unique", "id", "attribute", "will", "be", "add", "to", "the", "HTML", "element", "NUMBER", "The", "assigned", "ID", "will", "be", "a", "concatenation", "of", "the", "parent", "component", "ID", "with", "the", "provide", "value", "of", "the", "key", "attribute", "NUMBER", "I", "think", "my", "use", "case", "be", "to", "apply", "on", "the", "html", "element", "NUMBER", "And", "later", "I", "can", "use", "this", "NUMBER", "getEl", "elId", "to", "manipulate", "the", "DOM", "NUMBER", "patrick", "steele", "idem", "Thanks", "for", "the", "clarification", "that", "makes", "sense", "Bug", "Report", "Context", "I", "m", "trying", "to", "use", "a", "single", "file", "component", "as", "components", "name", "NUMBER", "marko", "instead", "of", "components", "name", "index", "NUMBER", "marko", "NUMBER", "Expected", "Behavior", "App", "starts", "and", "be", "able", "to", "serve", "that", "page", "localhost", "NUMBER", "NUMBER", "Actual", "Behavior", "The", "stacktrace", "below", "be", "throw", "when", "the", "app", "starts", "NUMBER", "Your", "Environment", "Version", "use", "marko", "NUMBER", "lasso", "NUMBER", "lasso", "marko", "NUMBER", "Steps", "to", "Reproduce", "NUMBER", "clone", "LINK", "bug", "NUMBER", "NUMBER", "run", "npm", "install", "NUMBER", "run", "node", "server", "NUMBER", "js", "and", "see", "the", "error", "as", "mention", "Stack", "Trace", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "throw", "error", "Error", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "components", "page", "meter", "index", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "components", "page", "meter", "index", "NUMBER", "marko", "NUMBER", "NUMBER", "Unrecognized", "tag", "meter", "channel", "More", "details", "LINK", "js", "marko", "wiki", "Error", "Unrecognized", "Tag", "at", "handleErrors", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Compiler", "NUMBER", "compile", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "at", "_compile", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "compile", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "compile", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "node", "require", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "markoRequireExtension", "as", "NUMBER", "marko", "Users", "drew", "dev", "node", "moomet", "research", "bugx", "node_modules", "marko", "node", "require", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "load", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "tryModuleLoad", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "_load", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "require", "module", "NUMBER", "js", "NUMBER", "NUMBER", "Hmm", "NUMBER", "it", "looks", "like", "I", "can", "workaround", "this", "by", "add", "entries", "to", "my", "marko", "NUMBER", "json", "like", "this", "json", "TAG", "renderer", "NUMBER", "components", "meter", "channel", "NUMBER", "marko", "tags", "dir", "NUMBER", "components", "Looking", "at", "the", "implementation", "of", "compiler", "taglib", "loader", "scanTagsDir", "NUMBER", "js", "this", "might", "be", "a", "feature", "request", "instead", "of", "a", "bug", "Bug", "Report", "Context", "When", "a", "component", "class", "has", "a", "parsing", "issue", "the", "exception", "throw", "has", "a", "typo", "NUMBER", "Additionally", "Error", "be", "appended", "to", "the", "message", "twice", "NUMBER", "Expected", "Behavior", "The", "error", "should", "read", "Unable", "to", "parse", "JavaScript", "for", "component", "class", "NUMBER", "Actual", "Behavior", "The", "error", "output", "be", "Unable", "to", "parse", "JavaScript", "for", "componnet", "class", "NUMBER", "Error", "Error", "Possible", "Fix", "Fix", "typo", "and", "remove", "Error", "NUMBER", "Can", "tackle", "this", "issue", "if", "needed", "NUMBER", "Hello", "I", "be", "use", "Marko", "great", "tool", "by", "the", "way", "to", "generate", "XML", "NUMBER", "I", "have", "a", "root", "NUMBER", "marko", "file", "and", "a", "few", "include", "file", "NUMBER", "I", "would", "like", "to", "keep", "the", "indentation", "in", "the", "rendered", "file", "for", "various", "reasons", "NUMBER", "However", "when", "I", "indent", "the", "xml", "tags", "in", "the", "include", "file", "I", "have", "this", "error", "Line", "has", "extra", "indentation", "at", "the", "beginning", "The", "root", "NUMBER", "marko", "file", "looks", "like", "this", "TAG", "TAG", "TAG", "TAG", "And", "the", "include", "file", "note", "the", "indentation", "TAG", "TAG", "primary", "TAG", "TAG", "Is", "there", "a", "way", "to", "remove", "this", "format", "rule", "Thanks", "Thanks", "it", "s", "work", "I", "have", "a", "question", "NUMBER", "What", "about", "the", "template", "that", "have", "Class", "like", "in", "marko", "widget", "Since", "The", "bodies", "of", "class", "declarations", "and", "class", "expressions", "be", "executed", "in", "strict", "mode", "NUMBER", "And", "what", "about", "the", "compiled", "template", "also", "use", "class", "Thanks", "reference", "LINK", "Got", "it", "patrick", "steele", "idem", "thanks", "Biggest", "reason", "for", "this", "be", "parity", "with", "onClick", "which", "has", "access", "to", "the", "full", "data", "state", "input", "context", "NUMBER", "index", "NUMBER", "marko", "current", "TAG", "click", "TAG", "component", "NUMBER", "js", "module", "NUMBER", "export", "handleFoo", "e", "alert", "this", "NUMBER", "getFullName", "getFullName", "return", "input", "NUMBER", "firstName", "input", "NUMBER", "lastName", "Compare", "the", "current", "and", "propose", "convenience", "debuggability", "consistency", "etc", "NUMBER", "For", "some", "many", "function", "eventually", "those", "component", "function", "may", "move", "to", "a", "more", "structured", "project", "lib", "but", "during", "initial", "development", "having", "all", "function", "available", "in", "this", "NUMBER", "and", "component", "NUMBER", "be", "extremely", "convenient", "NUMBER", "index", "NUMBER", "marko", "propose", "TAG", "component", "NUMBER", "getFullName", "TAG", "console", "NUMBER", "log", "component", "NUMBER", "getFullName", "index", "NUMBER", "marko", "current", "import", "helper", "from", "NUMBER", "helper", "TAG", "helper", "NUMBER", "getFullName", "input", "state", "TAG", "console", "NUMBER", "log", "helper", "NUMBER", "getFullName", "input", "state", "component", "NUMBER", "js", "current", "import", "helper", "from", "NUMBER", "helper", "module", "NUMBER", "export", "handleClick", "alert", "helper", "NUMBER", "getFullName", "input", "state", "Yep", "NUMBER", "just", "point", "out", "why", "it", "s", "an", "improvement", "over", "the", "current", "options", "alternatives", "NUMBER", "component", "NUMBER", "getFullName", "would", "make", "me", "very", "happy", "NUMBER", "I", "get", "an", "situation", "here", "NUMBER", "My", "team", "be", "use", "await", "in", "a", "page", "that", "we", "need", "to", "handle", "more", "then", "one", "Promise", "They", "tried", "to", "use", "something", "like", "this", "HTML", "TAG", "TAG", "TAG", "TAG", "They", "said", "to", "me", "they", "get", "some", "error", "with", "nested", "await", "and", "i", "was", "thinking", "in", "two", "solutions", "for", "this", "scenario", "I", "was", "thinking", "about", "wrap", "the", "Promises", "in", "an", "especifc", "provider", "and", "use", "Promise", "NUMBER", "all", "request", "or", "create", "a", "custom", "tag", "like", "this", "one", "TAG", "What", "be", "the", "best", "solution", "to", "implement", "something", "like", "this", "What", "do", "you", "think", "about", "it", "Thanks", "and", "i", "m", "in", "love", "with", "marko", "rocket", "HTML", "TAG", "TAG", "TAG", "i", "will", "test", "something", "like", "this", "Here", "s", "my", "demo", "test", "about", "this", "issue", "LINK", "demo", "HTML", "TAG", "the", "service", "javascript", "module", "NUMBER", "export", "return", "new", "Promise", "resolve", "reject", "request", "NUMBER", "get", "config", "NUMBER", "categories", "error", "response", "body", "setTimeout", "resolve", "JSON", "NUMBER", "parse", "body", "NUMBER", "the", "controller", "javascript", "module", "NUMBER", "export", "req", "res", "template", "NUMBER", "render", "name", "Mauricio", "Nunes", "dos", "reis", "colors", "red", "green", "blue", "promise", "NUMBER", "categorieService", "promise", "NUMBER", "categorieService", "res", "the", "view", "HTML", "TAG", "TAG", "TAG", "TAG", "TAG", "Marko", "Demo", "TAG", "TAG", "TAG", "TAG", "Marko", "Demo", "TAG", "TAG", "data", "NUMBER", "name", "TAG", "TAG", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Loading", "data", "NUMBER", "TAG", "TAG", "An", "error", "occur", "TAG", "TAG", "A", "timeout", "occur", "TAG", "TAG", "Promise", "NUMBER", "TAG", "TAG", "TAG", "TAG", "cat", "NUMBER", "name", "TAG", "TAG", "TAG", "TAG", "Promise", "NUMBER", "TAG", "TAG", "TAG", "TAG", "cat", "NUMBER", "name", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Works", "well", "rocket", "But", "i", "could", "not", "see", "the", "Loading", "data", "and", "i", "m", "use", "the", "tag", "await", "placeholder", "Since", "i", "m", "use", "json", "server", "to", "fake", "and", "json", "api", "i", "put", "an", "timeout", "to", "looks", "like", "the", "real", "world", "and", "could", "not", "see", "the", "loading", "NUMBER", "Any", "guess", "Thanks", "guys", "mlrawlings", "yes", "but", "you", "can", "double", "check", "if", "really", "be", "server", "side", "rendering", "here", "s", "the", "demo", "LINK", "demo", "In", "rc", "NUMBER", "and", "earlier", "Marko", "would", "automatically", "add", "a", "widget", "s", "index", "NUMBER", "marko", "to", "the", "internal", "dependency", "array", "if", "needed", "NUMBER", "As", "of", "rc", "NUMBER", "the", "TAG", "tag", "add", "the", "index", "NUMBER", "marko", "to", "the", "dependency", "list", "as", "expected", "but", "if", "a", "component", "NUMBER", "js", "or", "component", "browser", "NUMBER", "js", "be", "use", "instead", "then", "it", "will", "add", "that", "to", "the", "dependencies", "but", "not", "the", "corresponding", "index", "NUMBER", "marko", "NUMBER", "mlrawlings", "Looks", "like", "a", "console", "NUMBER", "log", "slipped", "through", "and", "it", "s", "not", "marked", "as", "latest", "beta", "NUMBER", "But", "other", "than", "that", "it", "works", "Question", "I", "m", "use", "marko", "and", "be", "awesome", "My", "question", "be", "there", "s", "any", "Best", "Practice", "guide", "for", "production", "enviroment", "Thanks", "guys", "For", "client", "side", "see", "NUMBER", "The", "documentation", "be", "still", "a", "work", "in", "progress", "NUMBER", "Patrick", "mention", "use", "minprops", "and", "envify", "to", "reduce", "code", "size", "but", "you", "should", "really", "just", "follow", "the", "standard", "best", "practices", "for", "all", "client", "side", "code", "Minify", "gzip", "and", "cache", "responsibly", "NUMBER", "How", "you", "actually", "do", "that", "depends", "on", "your", "other", "libraries", "and", "frameworks", "express", "lasso", "etc", "NUMBER", "Server", "side", "the", "only", "recommendation", "I", "m", "aware", "of", "be", "to", "set", "NODE_ENV", "production", "NUMBER", "That", "s", "because", "Marko", "be", "designed", "to", "be", "the", "best", "of", "both", "worlds", "convenient", "in", "development", "efficient", "in", "production", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "dc", "NUMBER", "c", "NUMBER", "b", "NUMBER", "adbca", "NUMBER", "bc", "NUMBER", "e", "NUMBER", "c", "NUMBER", "a", "NUMBER", "b", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "on", "NUMBER", "scriptlet", "metadata", "into", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ad", "NUMBER", "fd", "NUMBER", "ce", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "cca", "NUMBER", "ded", "on", "master", "NUMBER", "Strawman", "argument", "was", "for", "TAG", "var", "x", "NUMBER", "var", "y", "NUMBER", "This", "be", "x", "y", "valid", "NUMBER", "TAG", "This", "be", "x", "y", "undefined", "NUMBER", "NUMBER", "compile", "to", "an", "IIFE", "for", "scope", "protection", "and", "use", "NUMBER", "for", "JS", "execution", "NUMBER", "Rationale", "be", "that", "a", "dangling", "var", "x", "NUMBER", "at", "the", "top", "of", "a", "file", "could", "have", "spooky", "action", "at", "a", "distance", "towards", "the", "bottom", "of", "the", "file", "but", "if", "it", "were", "captured", "in", "some", "sort", "of", "TAG", "NUMBER", "block", "then", "the", "area", "required", "to", "analyze", "be", "much", "smaller", "NUMBER", "A", "lot", "of", "tags", "generate", "nested", "function", "so", "with", "var", "NUMBER", "it", "s", "impossible", "to", "know", "where", "the", "scope", "begins", "or", "ends", "until", "you", "look", "at", "the", "compiled", "output", "it", "could", "stop", "at", "the", "nearest", "parent", "tag", "or", "extend", "all", "the", "way", "to", "the", "top", "level", "render", "function", "NUMBER", "That", "usually", "doesn", "t", "matter", "but", "it", "would", "be", "nice", "to", "have", "a", "more", "explicit", "way", "to", "handle", "variable", "scope", "NUMBER", "I", "agree", "with", "use", "NUMBER", "for", "inline", "javascript", "but", "things", "like", "tag", "scope", "need", "to", "be", "handle", "by", "the", "compiler", "NUMBER", "So", "here", "s", "my", "idea", "The", "TAG", "tag", "could", "be", "reintroduced", "with", "TAG", "TAG", "compile", "to", "an", "IIFE", "as", "before", "NUMBER", "However", "self", "closing", "TAG", "tags", "would", "now", "be", "template", "scoped", "NUMBER", "Example", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "console", "NUMBER", "log", "foo", "bar", "TAG", "TAG", "TAG", "TAG", "console", "NUMBER", "log", "foo", "input", "NUMBER", "foo", "null", "undefined", "console", "NUMBER", "log", "bar", "ReferenceError", "js", "var", "foo", "if", "input", "NUMBER", "foo", "foo", "input", "NUMBER", "foo", "function", "var", "bar", "input", "NUMBER", "bar", "console", "NUMBER", "log", "foo", "bar", "foo", "null", "console", "NUMBER", "log", "foo", "input", "NUMBER", "foo", "null", "undefined", "console", "NUMBER", "log", "bar", "ReferenceError", "A", "name", "other", "than", "TAG", "could", "be", "use", "for", "backward", "compatibility", "but", "v", "NUMBER", "has", "already", "shipped", "without", "it", "and", "I", "feel", "it", "would", "be", "fairly", "easy", "to", "explain", "that", "TAG", "be", "now", "template", "scoped", "NUMBER", "Edit", "Whoops", "looks", "like", "TAG", "be", "still", "present", "in", "v", "NUMBER", "but", "it", "prints", "a", "deprecation", "warning", "NUMBER", "Still", "at", "this", "point", "I", "think", "it", "would", "be", "safe", "enough", "to", "make", "this", "change", "NUMBER", "just", "stumbled", "into", "something", "similar", "this", "works", "class", "sayHi", "alert", "Hi", "TAG", "TAG", "test", "TAG", "TAG", "Click", "me", "TAG", "TAG", "this", "works", "TAG", "TAG", "TAG", "TAG", "test", "TAG", "TAG", "Click", "me", "TAG", "TAG", "TAG", "TAG", "but", "this", "doesn", "t", "class", "sayHi", "alert", "Hi", "TAG", "TAG", "TAG", "TAG", "test", "TAG", "TAG", "Click", "me", "TAG", "TAG", "TAG", "TAG", "TAG", "Bug", "Report", "Context", "placing", "non", "breaking", "space", "nbsp", "in", "a", "template", "element", "renders", "out", "as", "\u00c2", "on", "the", "browser", "VDOM", "NUMBER", "Expected", "Behavior", "should", "render", "simply", "as", "nbsp", "Actual", "Behavior", "renders", "as", "\u00c2", "NUMBER", "TAG", "TAG", "Additional", "Info", "TAG", "TAG", "coup", "NUMBER", "title", "TAG", "TAG", "coup", "NUMBER", "GUID", "TAG", "TAG", "TAG", "Expires", "TAG", "nbsp", "nbsp", "coup", "NUMBER", "expires", "TAG", "VDOM", "marko_forEach", "state", "NUMBER", "productCoupons", "function", "coup", "out", "NUMBER", "e", "div", "marko_attrs", "NUMBER", "NUMBER", "NUMBER", "e", "div", "marko_attrs", "NUMBER", "NUMBER", "NUMBER", "t", "coup", "NUMBER", "title", "NUMBER", "n", "marko_node", "NUMBER", "NUMBER", "e", "span", "marko_attrs", "NUMBER", "NUMBER", "NUMBER", "t", "coup", "NUMBER", "GUID", "NUMBER", "n", "marko_node", "NUMBER", "NUMBER", "n", "marko_node", "NUMBER", "NUMBER", "t", "\u00c2", "\u00c2", "NUMBER", "t", "coup", "NUMBER", "expires", "NUMBER", "e", "div", "marko_attrs", "NUMBER", "NUMBER", "NUMBER", "e", "strong", "null", "NUMBER", "NUMBER", "t", "NUMBER", "t", "coup", "NUMBER", "authorizedPrice", "TAG", "NUMBER", "Hello", "While", "refactoring", "for", "rc", "NUMBER", "I", "realise", "that", "new", "syntax", "for", "data", "NUMBER", "renderBody", "invocation", "must", "be", "like", "this", "if", "data", "NUMBER", "renderBody", "data", "NUMBER", "renderBody", "out", "That", "s", "not", "looks", "very", "good", "inside", "a", "HTML", "like", "template", "NUMBER", "May", "be", "it", "s", "better", "to", "create", "a", "dedicated", "tag", "like", "TAG", "for", "that", "purpose", "It", "will", "be", "rendering", "for", "nothing", "or", "body", "NUMBER", "Simple", "and", "elegant", "be", "data", "deprecate", "too", "and", "we", "should", "use", "input", "instead", "Or", "could", "be", "more", "vue", "like", "for", "key", "value", "in", "data", "object", "And", "for", "item", "in", "data", "array", "Thanks", "WARNING", "The", "TAG", "tag", "be", "deprecate", "NUMBER", "Please", "use", "TAG", "for", "JavaScript", "in", "the", "template", "NUMBER", "See", "LINK", "js", "marko", "wiki", "Deprecation", "var", "assign", "invoke", "tags", "at", "node_modules", "marko", "taglibs", "core", "invoke", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "note", "the", "module", "where", "it", "happens", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "addf", "NUMBER", "df", "NUMBER", "ded", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "e", "NUMBER", "on", "NUMBER", "picture", "tag", "into", "NUMBER", "ebc", "NUMBER", "b", "NUMBER", "a", "NUMBER", "de", "NUMBER", "ec", "NUMBER", "ee", "NUMBER", "eb", "NUMBER", "a", "NUMBER", "b", "NUMBER", "aad", "NUMBER", "eb", "NUMBER", "on", "master", "NUMBER", "Compilation", "broken", "with", "error", "Unrecognized", "tag", "picture", "while", "picture", "be", "certainly", "a", "standard", "HTML", "NUMBER", "tag", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "f", "NUMBER", "adc", "NUMBER", "e", "NUMBER", "ec", "NUMBER", "a", "NUMBER", "cae", "NUMBER", "a", "NUMBER", "a", "NUMBER", "e", "on", "NUMBER", "deprecate", "tags", "into", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "af", "NUMBER", "fb", "NUMBER", "e", "NUMBER", "cee", "NUMBER", "fc", "NUMBER", "bdb", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "f", "NUMBER", "adc", "NUMBER", "e", "NUMBER", "ec", "NUMBER", "a", "NUMBER", "cae", "NUMBER", "a", "NUMBER", "a", "NUMBER", "e", "on", "NUMBER", "deprecate", "tags", "into", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "af", "NUMBER", "fb", "NUMBER", "e", "NUMBER", "cee", "NUMBER", "fc", "NUMBER", "bdb", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "cffb", "NUMBER", "bf", "NUMBER", "eee", "NUMBER", "dc", "NUMBER", "f", "NUMBER", "on", "NUMBER", "ref", "to", "key", "into", "NUMBER", "b", "NUMBER", "c", "NUMBER", "a", "NUMBER", "c", "NUMBER", "af", "NUMBER", "fb", "NUMBER", "e", "NUMBER", "cee", "NUMBER", "fc", "NUMBER", "bdb", "on", "master", "NUMBER", "I", "do", "think", "key", "be", "a", "more", "accurate", "description", "though", "I", "m", "not", "entirely", "convinced", "the", "change", "be", "necessary", "NUMBER", "My", "only", "major", "concern", "would", "be", "possible", "naming", "collisions", "I", "can", "think", "of", "plenty", "of", "other", "uses", "for", "a", "custom", "key", "attribute", "but", "not", "very", "many", "for", "ref", "which", "has", "always", "be", "pretty", "much", "reserved", "for", "widgets", "anyway", "NUMBER", "That", "s", "not", "to", "say", "I", "disagree", "but", "I", "d", "like", "to", "hear", "a", "few", "more", "pro", "s", "and", "con", "s", "NUMBER", "If", "this", "change", "be", "implement", "I", "would", "be", "in", "favor", "of", "provide", "a", "temporary", "opt", "in", "ref", "key", "alias", "perhaps", "in", "a", "marko", "v", "NUMBER", "compat", "package", "like", "what", "was", "suggested", "in", "NUMBER", "Ah", "forgot", "about", "React", "NUMBER", "I", "d", "say", "those", "be", "pretty", "good", "reasons", "to", "make", "the", "switch", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "dda", "NUMBER", "a", "NUMBER", "e", "NUMBER", "cf", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "bf", "NUMBER", "on", "NUMBER", "template", "compiler", "version", "into", "ffdc", "NUMBER", "fb", "NUMBER", "b", "NUMBER", "ea", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "f", "NUMBER", "b", "NUMBER", "f", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "da", "NUMBER", "abc", "NUMBER", "b", "NUMBER", "f", "NUMBER", "dd", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "on", "NUMBER", "template", "compiler", "version", "into", "ffdc", "NUMBER", "fb", "NUMBER", "b", "NUMBER", "ea", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "f", "NUMBER", "b", "NUMBER", "f", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "da", "NUMBER", "abc", "NUMBER", "b", "NUMBER", "f", "NUMBER", "dd", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "on", "NUMBER", "template", "compiler", "version", "into", "ffdc", "NUMBER", "fb", "NUMBER", "b", "NUMBER", "ea", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "f", "NUMBER", "b", "NUMBER", "f", "on", "master", "NUMBER", "TAG", "This", "fix", "will", "ensure", "that", "an", "empty", "array", "do", "not", "output", "a", "an", "empty", "class", "attribute", "class", "NUMBER", "Description", "modify", "helpers", "NUMBER", "js", "line", "NUMBER", "add", "null", "when", "the", "array", "be", "empty", "because", "a", "joined", "empty", "array", "be", "falsy", "fix", "test", "to", "accommodate", "Motivation", "and", "Context", "I", "was", "attempting", "to", "use", "arrays", "for", "class", "names", "because", "of", "the", "utility", "of", "concatenating", "them", "together", "was", "taken", "up", "by", "Marko", "NUMBER", "But", "when", "the", "array", "was", "ever", "empty", "I", "would", "have", "the", "class", "throughout", "my", "app", "and", "my", "test", "NUMBER", "This", "issue", "add", "unnecessary", "bloat", "NUMBER", "Therefore", "the", "motivation", "for", "this", "fix", "NUMBER", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "X", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "X", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "X", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "X", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "ea", "NUMBER", "a", "NUMBER", "ebb", "NUMBER", "da", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "b", "on", "seangates", "v", "NUMBER", "into", "NUMBER", "ed", "NUMBER", "b", "NUMBER", "a", "NUMBER", "ab", "NUMBER", "f", "NUMBER", "a", "NUMBER", "e", "NUMBER", "fc", "NUMBER", "e", "NUMBER", "cf", "NUMBER", "e", "on", "marko", "js", "v", "NUMBER", "NUMBER", "mindeavor", "Noted", "NUMBER", "Fixed", "I", "just", "switched", "from", "rc", "NUMBER", "to", "NUMBER", "and", "my", "widgets", "getTemplateData", "method", "be", "no", "longer", "be", "call", "in", "any", "of", "my", "widgets", "NUMBER", "Was", "this", "remove", "for", "some", "reason", "I", "have", "no", "problem", "with", "it", "be", "remove", "just", "didn", "t", "realize", "it", "was", "so", "it", "broke", "my", "code", "when", "I", "moved", "form", "rc", "NUMBER", "to", "NUMBER", "I", "couldn", "t", "tell", "if", "it", "was", "a", "bug", "or", "intended", "NUMBER", "I", "tried", "looking", "at", "the", "revisions", "but", "couldn", "t", "make", "heads", "or", "tales", "of", "where", "the", "change", "actually", "happened", "NUMBER", "I", "was", "only", "use", "it", "because", "the", "Roadmap", "LINK", "js", "marko", "blob", "master", "ROADMAP", "NUMBER", "md", "under", "heading", "New", "widget", "lifecycle", "methods", "shows", "the", "getTemplateData", "method", "in", "the", "new", "list", "NUMBER", "So", "I", "thought", "I", "was", "supposed", "to", "be", "use", "it", "NUMBER", "I", "guess", "the", "roadmap", "doc", "just", "needs", "to", "be", "update", "to", "remove", "it", "NUMBER", "Thanks", "for", "confirming", "NUMBER", "An", "error", "should", "not", "be", "throw", "LINK", "custom", "elements", "That", "just", "goes", "back", "to", "the", "boilerplate", "issue", "I", "opened", "a", "while", "back", "LINK", "js", "lasso", "marko", "issue", "NUMBER", "Now", "if", "the", "parser", "encounters", "TAG", "NUMBER", "TAG", "then", "it", "should", "certainly", "throw", "an", "error", "NUMBER", "But", "the", "author", "may", "be", "fully", "expecting", "TAG", "to", "be", "dumped", "into", "the", "rendered", "HTML", "as", "be", "NUMBER", "I", "m", "definitely", "against", "this", "be", "the", "default", "but", "I", "would", "love", "to", "have", "this", "as", "an", "opt", "in", "setting", "NUMBER", "Whitelisting", "tags", "be", "decent", "but", "whitelisting", "tags", "b", "c", "hopefully", "someday", "somebody", "will", "use", "concise", "mode", "be", "make", "the", "wrong", "tradeoff", "in", "my", "mind", "NUMBER", "Disable", "concise", "mode", "by", "default", "NUMBER", "All", "most", "issue", "with", "top", "level", "tags", "magically", "go", "away", "eg", "the", "following", "gem", "ex", "NUMBER", "marko", "NUMBER", "Tags", "be", "tags", "NUMBER", "TAG", "be", "TAG", "and", "be", "wrapped", "in", "a", "tag", "not", "a", "bareword", "NUMBER", "It", "be", "a", "serious", "struggle", "to", "get", "behind", "floating", "class", "statements", "as", "be", "NUMBER", "specifically", "referring", "to", "single", "file", "components", "NUMBER", "cat", "ex", "NUMBER", "marko", "this", "be", "for", "you", "TAG", "Test", "TAG", "markoc", "NUMBER", "marko", "Failed", "to", "compile", "ex", "NUMBER", "marko", "NUMBER", "Error", "Error", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "home", "rames", "Git", "marko", "v", "NUMBER", "spa", "example", "src", "pages", "test", "ex", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "ex", "NUMBER", "marko", "NUMBER", "NUMBER", "Invalid", "TAG", "tag", "NUMBER", "Argument", "be", "miss", "NUMBER", "Example", "TAG", "mindeavor", "ramses", "NUMBER", "How", "would", "disabling", "concise", "mode", "actually", "solve", "the", "problem", "be", "discussed", "which", "be", "whether", "to", "throw", "an", "error", "when", "an", "invalid", "tag", "be", "encountered", "I", "understand", "that", "you", "don", "t", "like", "the", "syntax", "but", "many", "of", "us", "do", "and", "be", "use", "it", "in", "production", "NUMBER", "P", "NUMBER", "S", "NUMBER", "You", "can", "use", "HTML", "syntax", "for", "the", "new", "tags", "too", "TAG", "TAG", "NUMBER", "Hesulan", "root", "level", "text", "be", "terrible", "NUMBER", "My", "vote", "be", "for", "putting", "it", "into", "a", "TAG", "NUMBER", "It", "be", "especially", "terrible", "when", "for", "he", "s", "a", "jolly", "good", "fellow", "gets", "parsed", "as", "a", "TAG", "which", "be", "be", "replaced", "by", "TAG", "NUMBER", "I", "do", "understand", "preferring", "HTML", "over", "concise", "and", "it", "s", "my", "opinion", "that", "the", "official", "documentation", "should", "try", "to", "use", "HTML", "syntax", "as", "much", "as", "possible", "even", "though", "I", "almost", "always", "use", "concise", "NUMBER", "mindeavor", "I", "m", "still", "unclear", "on", "how", "disabling", "concise", "syntax", "would", "solve", "the", "problem", "or", "how", "it", "s", "at", "the", "root", "of", "it", "NUMBER", "NUMBER", "for", "throw", "an", "error", "NUMBER", "Many", "complex", "projects", "rely", "on", "knowing", "when", "there", "be", "an", "issue", "with", "an", "unknown", "or", "incorrect", "tag", "NUMBER", "mindeavor", "I", "m", "not", "sure", "what", "that", "has", "to", "do", "with", "throw", "error", "for", "invalid", "tag", "names", "and", "those", "be", "all", "just", "different", "examples", "of", "the", "same", "thing", "plain", "text", "as", "a", "root", "element", "NUMBER", "patrick", "steele", "idem", "On", "further", "thought", "I", "think", "I", "would", "agree", "with", "throw", "error", "by", "default", "as", "long", "as", "it", "s", "easy", "to", "disable", "and", "clearly", "documented", "NUMBER", "mindeavor", "Ah", "I", "see", "what", "you", "meant", "now", "NUMBER", "That", "s", "not", "the", "point", "though", "the", "point", "be", "to", "catch", "invalid", "tag", "names", "NUMBER", "Root", "level", "text", "in", "concise", "mode", "be", "just", "one", "of", "the", "many", "ways", "that", "a", "typo", "could", "slip", "past", "and", "to", "simply", "disable", "such", "a", "widely", "use", "feature", "by", "default", "would", "be", "a", "huge", "overreaction", "and", "wouldn", "t", "solve", "the", "problem", "of", "invalid", "tag", "names", "NUMBER", "Catching", "accidental", "root", "level", "concise", "tags", "be", "only", "a", "nice", "side", "effect", "of", "the", "propose", "solution", "NUMBER", "mindeavor", "From", "what", "I", "understood", "the", "reason", "this", "came", "up", "be", "because", "if", "you", "type", "something", "like", "TAG", "it", "s", "quite", "likely", "that", "you", "meant", "to", "type", "TAG", "unless", "you", "ve", "explicitly", "defined", "a", "custom", "ing", "tag", "NUMBER", "Throwing", "an", "error", "would", "also", "help", "to", "catch", "accidental", "concise", "tags", "NUMBER", "I", "honestly", "can", "t", "remember", "the", "last", "time", "I", "even", "use", "root", "level", "text", "outside", "of", "a", "Hello", "World", "example", "but", "I", "can", "see", "how", "it", "would", "get", "annoying", "NUMBER", "I", "do", "think", "only", "throw", "on", "single", "word", "tags", "be", "a", "reasonable", "condition", "and", "I", "believe", "mlrawlings", "mention", "something", "similar", "earlier", "in", "this", "thread", "NUMBER", "mlrawlings", "would", "you", "be", "in", "favor", "of", "splitting", "out", "the", "potential", "discussion", "require", "concise", "mode", "to", "be", "explicitly", "opted", "in", "to", "I", "believe", "it", "would", "require", "TAG", "NUMBER", "which", "makes", "total", "sense", "to", "me", "NUMBER", "Or", "a", "flag", "to", "explicitly", "opt", "out", "of", "the", "potential", "bugginess", "confusion", "of", "mixing", "concise", "mode", "markojs", "single", "file", "components", "javascript", "and", "HTML", "I", "keep", "hearing", "be", "the", "magic", "token", "but", "haven", "t", "seen", "any", "documentation", "on", "that", "NUMBER", "use", "strict", "be", "a", "precedent", "concise", "mode", "was", "a", "strawman", "syntax", "even", "strict", "html", "or", "disable", "concise", "would", "be", "welcome", "NUMBER", "Hope", "I", "m", "not", "hi", "jacking", "the", "thread", "here", "but", "on", "the", "topic", "of", "Classes", "it", "seems", "you", "cannot", "use", "the", "extend", "keyword", "NUMBER", "If", "I", "make", "a", "component", "use", "a", "class", "that", "extend", "another", "class", "it", "fail", "due", "to", "a", "instance", "check", "_classCallCheck", "where", "the", "instance", "be", "the", "Widget", "class", "but", "it", "s", "checking", "for", "the", "Constructor", "of", "the", "parent", "NUMBER", "I", "get", "a", "failure", "of", "cannot", "call", "a", "class", "as", "a", "function", "NUMBER", "This", "_seems_", "to", "be", "cause", "by", "how", "Babel", "transpiles", "e", "NUMBER", "code", "NUMBER", "Here", "s", "the", "relevant", "compiled", "code", "NUMBER", "function", "_classCallCheck", "instance", "Constructor", "if", "instance", "instanceof", "Constructor", "throw", "new", "TypeError", "Cannot", "call", "a", "class", "as", "a", "function", "var", "Test", "function", "function", "Test", "_classCallCheck", "this", "Test", "_createClass", "Test", "key", "constrcutor", "value", "function", "constrcutor", "console", "NUMBER", "log", "parent", "return", "Test", "var", "Room", "function", "_Test", "_inherits", "Room", "_Test", "function", "Room", "_classCallCheck", "this", "Room", "return", "_possibleConstructorReturn", "this", "Room", "NUMBER", "__proto__", "Object", "NUMBER", "getPrototypeOf", "Room", "NUMBER", "apply", "this", "argument", "_createClass", "Room", "key", "onInput", "value", "function", "onInput", "input", "console", "NUMBER", "log", "IT", "WORKED", "return", "Room", "Test", "export", "NUMBER", "default", "Room", "module", "NUMBER", "export", "export", "default", "You", "can", "see", "the", "_classCallCheck", "be", "call", "twice", "once", "for", "the", "child", "once", "for", "the", "parent", "NUMBER", "It", "s", "the", "parent", "call", "that", "fail", "as", "the", "instance", "be", "Widget", "but", "the", "Constructor", "be", "Room", "NUMBER", "Is", "this", "the", "same", "issue", "as", "you", "mention", "above", "jasonmacdonald", "Michael", "was", "talking", "about", "the", "TAG", "tag", "NUMBER", "None", "of", "the", "code", "generate", "by", "Marko", "currently", "compiles", "to", "anything", "greater", "than", "ES", "NUMBER", "and", "javascript", "classes", "be", "ES", "NUMBER", "Could", "babel", "be", "trying", "to", "compile", "the", "NUMBER", "marko", "template", "by", "mistake", "For", "sure", "it", "s", "Babel", "compile", "the", "es", "NUMBER", "classes", "NUMBER", "I", "m", "trying", "to", "use", "a", "class", "as", "my", "component", "definition", "NUMBER", "But", "it", "seems", "to", "be", "Marko", "that", "be", "add", "the", "_classCallCheck", "to", "the", "compiled", "component", "definition", "NUMBER", "jasonmacdonald", "I", "m", "not", "quite", "sure", "what", "you", "mean", "but", "use", "a", "class", "as", "a", "component", "definition", "be", "invalid", "NUMBER", "The", "TAG", "tag", "mention", "here", "be", "just", "a", "convenient", "syntax", "with", "a", "bit", "of", "a", "misleading", "name", "it", "doesn", "t", "actually", "generate", "an", "instantiable", "class", "NUMBER", "Sorry", "if", "I", "m", "not", "be", "clear", "NUMBER", "I", "m", "talking", "about", "Marko", "NUMBER", "widgets", "defining", "a", "widget", "component", "use", "an", "ES", "NUMBER", "Class", "instead", "of", "an", "Object", "NUMBER", "I", "ll", "start", "a", "different", "thread", "as", "this", "one", "isn", "t", "what", "I", "thought", "it", "was", "NUMBER", "Thanks", "mlrawlings", "I", "think", "this", "really", "comes", "down", "to", "the", "developer", "knowing", "that", "use", "a", "v", "NUMBER", "taglib", "in", "v", "NUMBER", "can", "be", "tricky", "NUMBER", "These", "tags", "aren", "t", "the", "only", "breaking", "change", "The", "switch", "from", "to", "in", "concise", "comes", "to", "mind", "along", "with", "several", "other", "edge", "cases", "NUMBER", "Unless", "the", "parser", "and", "compiler", "can", "be", "switched", "into", "some", "sort", "of", "legacy", "mode", "whenever", "an", "outdate", "taglib", "be", "be", "loaded", "I", "don", "t", "see", "any", "other", "way", "around", "the", "occasional", "compatibility", "issue", "though", "in", "some", "cases", "a", "marko", "v", "NUMBER", "compat", "taglib", "might", "help", "NUMBER", "As", "a", "recreational", "user", "of", "marko", "v", "NUMBER", "transitioning", "to", "v", "NUMBER", "I", "be", "NUMBER", "in", "favor", "of", "kill", "stuff", "that", "s", "going", "to", "die", "ie", "var", "etc", "NUMBER", "npm", "install", "markojs", "v", "NUMBER", "deprecate", "be", "totally", "fine", "by", "me", "NUMBER", "I", "will", "say", "that", "I", "be", "especially", "disappointed", "by", "the", "removal", "of", "the", "TAG", "NUMBER", "TAG", "special", "tag", "NUMBER", "Conceptually", "be", "able", "to", "scope", "my", "sins", "of", "use", "TAG", "in", "my", "logicless", "template", "in", "the", "first", "place", "be", "invaluable", "NUMBER", "Forgive", "my", "use", "of", "tables", "throwaway", "code", "during", "development", "but", "I", "use", "them", "like", "this", "TAG", "TAG", "data", "NUMBER", "fnCap", "data", "NUMBER", "selection", "and", "NUMBER", "TAG", "TAG", "TAG", "data", "NUMBER", "fnCap", "flavors", "NUMBER", "TAG", "TAG", "TAG", "or", "TAG", "TAG", "TAG", "data", "NUMBER", "fnCap", "flavors", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "data", "NUMBER", "fnCap", "ingredients", "NUMBER", "TAG", "TAG", "TAG", "or", "TAG", "TAG", "TAG", "data", "NUMBER", "fnCap", "ingredients", "NUMBER", "TAG", "TAG", "TAG", "The", "introduction", "of", "var", "flavor", "input", "NUMBER", "someFunc", "kill", "the", "template", "and", "you", "end", "up", "with", "PHP", "all", "over", "again", "NUMBER", "What", "I", "mean", "be", "that", "with", "a", "scoped", "TAG", "tag", "I", "can", "easily", "determine", "if", "the", "template", "be", "factorable", "ie", "what", "dependencies", "or", "requirements", "it", "might", "have", "NUMBER", "With", "a", "dangling", "var", "NUMBER", "statement", "NUMBER", "Every", "NUMBER", "Single", "NUMBER", "Line", "NUMBER", "after", "that", "var", "NUMBER", "statement", "be", "suspect", "and", "requires", "brainpower", "to", "determine", "if", "it", "be", "use", "any", "of", "the", "declared", "var", "NUMBER", "variables", "NUMBER", "In", "summary", "NUMBER", "marko", "v", "NUMBER", "compat", "package", "be", "totally", "fine", "NUMBER", "killing", "TAG", "or", "encouraging", "the", "use", "of", "NUMBER", "for", "anything", "other", "than", "debugging", "be", "bordering", "on", "criminal", "it", "basically", "makes", "the", "entire", "file", "unable", "to", "be", "reasoned", "about", "unless", "the", "human", "first", "do", "a", "compilation", "pass", "looking", "for", "var", "NUMBER", "and", "then", "remembering", "where", "it", "be", "use", "NUMBER", "I", "ve", "write", "and", "seen", "enough", "bad", "PHP", "and", "bad", "JS", "write", "by", "good", "people", "but", "not", "good", "programmers", "that", "I", "would", "view", "use", "of", "markojs", "as", "highly", "suspicious", "NUMBER", "THINK", "about", "this", "NUMBER", "When", "you", "see", "Array", "NUMBER", "prototype", "NUMBER", "something", "function", "NUMBER", "do", "that", "make", "you", "happy", "that", "the", "person", "before", "you", "was", "so", "clever", "Or", "fill", "you", "with", "rage", "that", "now", "you", "have", "to", "audit", "the", "entire", "source", "tree", "for", "uses", "of", "NUMBER", "prototype", "and", "then", "see", "how", "that", "interacts", "with", "the", "rest", "of", "the", "codebase", "In", "the", "below", "code", "TAG", "be", "demonstrable", "better", "from", "a", "maintenance", "programmer", "perspective", "compared", "to", "var", "b", "NUMBER", "Neither", "be", "ideal", "but", "TAG", "as", "a", "shortcut", "to", "make", "the", "layout", "of", "the", "template", "easier", "cleaner", "etc", "NUMBER", "be", "much", "better", "NUMBER", "TAG", "TAG", "NUMBER", "snip", "NUMBER", "Hello", "a", "TAG", "var", "b", "fnBar", "NUMBER", "snip", "NUMBER", "TAG", "NUMBER", "snip", "NUMBER", "Hello", "b", "TAG", "TAG", "ramses", "NUMBER", "I", "believe", "the", "main", "reason", "for", "deprecating", "TAG", "TAG", "TAG", "etc", "NUMBER", "be", "because", "the", "number", "of", "tags", "that", "attempt", "to", "simulate", "real", "javascript", "was", "becoming", "unmanageable", "but", "you", "make", "a", "good", "point", "NUMBER", "mlrawlings", "Perhaps", "it", "would", "be", "a", "good", "idea", "to", "hold", "off", "on", "remove", "the", "TAG", "tag", "I", "feel", "like", "it", "s", "enough", "of", "a", "special", "case", "to", "warrant", "keep", "it", "around", "especially", "since", "it", "fits", "each", "syntax", "so", "nicely", "NUMBER", "mindeavor", "Internally", "a", "TAG", "tag", "with", "body", "text", "compiles", "to", "an", "IIFE", "which", "enforces", "scope", "html", "TAG", "NUMBER", "TAG", "js", "function", "var", "foo", "NUMBER", "bar", "NUMBER", "NUMBER", "Will", "there", "be", "or", "be", "there", "a", "way", "within", "marko", "to", "trigger", "an", "IIFE", "context", "for", "scope", "protection", "as", "referenced", "in", "this", "comment", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "TAG", "be", "elegantly", "nasty", "in", "a", "way", "NUMBER", "NUMBER", "it", "makes", "it", "very", "clear", "what", "you", "re", "doing", "but", "still", "requires", "you", "to", "use", "NUMBER", "but", "then", "you", "know", "your", "NUMBER", "s", "can", "t", "infect", "outside", "that", "TAG", "block", "NUMBER", "I", "guess", "I", "m", "highly", "in", "favor", "of", "it", "NUMBER", "good", "design", "instinct", "NUMBER", "it", "would", "be", "nice", "if", "there", "was", "a", "setting", "to", "emit", "a", "warning", "of", "something", "like", "the", "following", "Warning", "file", "NUMBER", "marko", "NUMBER", "raw", "javascript", "NUMBER", "find", "not", "at", "top", "of", "file", "or", "top", "of", "TAG", "block", "NUMBER", "ie", "encourage", "items", "to", "be", "in", "blocks", "at", "the", "beginning", "of", "the", "file", "instead", "of", "randomly", "sprinkled", "throughout", "NUMBER", "If", "I", "can", "consistently", "open", "a", "template", "and", "know", "that", "NUMBER", "be", "all", "bunched", "up", "at", "the", "top", "then", "I", "ll", "be", "a", "much", "happier", "camper", "NUMBER", "But", "add", "in", "a", "NUMBER", "debugging", "NUMBER", "randomly", "might", "be", "perfectly", "appropriate", "and", "encourage", "just", "not", "checked", "in", "not", "for", "prod", "NUMBER", "In", "short", "though", "NUMBER", "I", "really", "appreciate", "you", "taking", "into", "consideration", "the", "issue", "of", "TAG", "and", "would", "be", "highly", "in", "favor", "of", "it", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "acaed", "NUMBER", "c", "NUMBER", "feee", "NUMBER", "adb", "NUMBER", "b", "NUMBER", "e", "NUMBER", "a", "NUMBER", "on", "NUMBER", "hot", "reload", "extensions", "into", "NUMBER", "e", "NUMBER", "e", "NUMBER", "b", "NUMBER", "bdfd", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "d", "NUMBER", "on", "master", "NUMBER", "TAG", "New", "Feature", "Description", "I", "be", "use", "NUMBER", "html", "file", "only", "with", "marko", "html", "in", "it", "but", "that", "prevents", "me", "from", "use", "marko", "s", "hot", "reload", "NUMBER", "Lines", "v", "NUMBER", "LINK", "js", "marko", "blob", "master", "hot", "reload", "index", "NUMBER", "js", "L", "NUMBER", "v", "NUMBER", "LINK", "js", "marko", "blob", "v", "NUMBER", "hot", "reload", "index", "NUMBER", "js", "L", "NUMBER", "and", "maybe", "L", "NUMBER", "too", "Context", "I", "know", "that", "it", "s", "probably", "recommended", "to", "use", "NUMBER", "marko", "NUMBER", "html", "but", "I", "would", "like", "to", "stick", "with", "my", "implementation", "where", "I", "use", "require", "marko", "node", "require", "NUMBER", "install", "extension", "NUMBER", "html", "NUMBER", "Possible", "Implementation", "It", "would", "be", "cool", "if", "there", "would", "be", "an", "options", "object", "so", "I", "could", "simply", "use", "extension", "html", "in", "the", "hot", "reload", "NUMBER", "enable", "method", "too", "or", "maybe", "even", "use", "the", "extension", "string", "from", "the", "install", "so", "that", "would", "work", "automatically", "NUMBER", "Open", "Questions", "See", "above", "NUMBER", "Is", "this", "something", "you", "re", "interested", "in", "work", "on", "Yep", "as", "long", "as", "it", "s", "clear", "how", "the", "implementation", "would", "work", "Sorry", "for", "the", "duplicate", "I", "should", "have", "search", "for", "that", "NUMBER", "Will", "think", "of", "that", "but", "I", "have", "no", "idea", "how", "marko", "works", "so", "I", "don", "t", "know", "whether", "I", "will", "fit", "into", "this", "NUMBER", "I", "have", "currently", "fix", "it", "manually", "editing", "the", "file", "for", "now", "NUMBER", "Not", "sure", "if", "this", "be", "know", "but", "I", "was", "test", "a", "simple", "Marko", "NUMBER", "Widget", "in", "IE", "and", "it", "fail", "when", "trying", "to", "call", "new", "Symbol", "NUMBER", "This", "doesn", "t", "appear", "to", "be", "support", "in", "IE", "NUMBER", "As", "you", "can", "see", "here", "LINK", "_Objects", "Symbol", "Symbol", "isn", "t", "support", "on", "any", "IE", "version", "NUMBER", "Is", "this", "intended", "Is", "it", "expected", "that", "we", "need", "to", "pollyfill", "fill", "this", "Promise", "be", "also", "miss", "from", "compiled", "bundle", "NUMBER", "Here", "s", "the", "snippet", "where", "it", "appears", "NUMBER", "NUMBER", "function", "require", "module", "export", "var", "KEY", "Symbol", "function", "UniqueId", "out", "this", "NUMBER", "prefix", "out", "NUMBER", "global", "NUMBER", "widgetIdPrefix", "w", "this", "NUMBER", "nextId", "NUMBER", "function", "nextWidgetId", "out", "var", "global", "out", "NUMBER", "global", "var", "idProvider", "global", "KEY", "global", "KEY", "new", "UniqueId", "out", "return", "idProvider", "NUMBER", "prefix", "idProvider", "NUMBER", "nextId", "This", "be", "use", "Browserify", "to", "compile", "NUMBER", "Maybe", "Browserfiy", "be", "add", "it", "Nope", "looks", "like", "it", "s", "come", "from", "widgets", "util", "NUMBER", "js", "which", "be", "include", "by", "Widget", "NUMBER", "js", "Interestingly", "I", "switched", "to", "try", "and", "compile", "with", "Webpack", "and", "that", "util", "package", "doesn", "t", "seem", "to", "appear", "in", "it", "s", "output", "NUMBER", "So", "I", "guess", "Browserify", "be", "including", "stuff", "it", "shouldn", "t", "NUMBER", "Grr", "too", "many", "options", "differences", "with", "these", "damn", "bundlers", "NUMBER", "I", "switched", "over", "to", "Webpack", "and", "the", "issue", "seems", "to", "have", "gone", "away", "NUMBER", "However", "if", "I", "can", "find", "a", "few", "mins", "I", "ll", "put", "together", "a", "simple", "project", "to", "show", "the", "issue", "NUMBER", "I", "ll", "close", "this", "for", "now", "and", "update", "if", "I", "can", "put", "something", "together", "jasonmacdonald", "Just", "wanted", "to", "add", "because", "you", "mention", "Promise", "not", "be", "bundled", "Marko", "doesn", "t", "provide", "a", "Promise", "polyfill", "and", "as", "far", "as", "I", "know", "the", "only", "parts", "of", "Marko", "that", "require", "a", "global", "Promise", "object", "be", "the", "AsyncStream", "s", "NUMBER", "en", "and", "NUMBER", "catch", "methods", "and", "only", "if", "you", "choose", "to", "call", "them", "NUMBER", "This", "might", "be", "just", "me", "not", "fully", "understanding", "Widget", "scopes", "state", "or", "more", "likely", "it", "s", "work", "as", "intended", "but", "if", "I", "have", "Widget", "A", "and", "Widget", "B", "NUMBER", "Widget", "A", "uses", "Widget", "B", "in", "it", "s", "template", "and", "supplies", "some", "body", "content", "template", "for", "Widget", "B", "NUMBER", "The", "data", "scope", "be", "bound", "to", "Widget", "A", "for", "that", "body", "content", "and", "not", "Widget", "B", "which", "actually", "renders", "it", "NUMBER", "Example", "Widget", "A", "Template", "data", "NUMBER", "TAG", "TAG", "TAG", "data", "TAG", "TAG", "Widget", "B", "template", "data", "NUMBER", "TAG", "TAG", "TAG", "This", "ends", "up", "rendering", "the", "value", "NUMBER", "in", "the", "div", "not", "NUMBER", "What", "I", "was", "hoping", "was", "that", "the", "scope", "of", "WidgetB", "s", "data", "value", "NUMBER", "would", "be", "supplied", "to", "the", "transcluded", "content", "NUMBER", "I", "suspect", "this", "be", "work", "as", "intended", "but", "be", "there", "a", "way", "to", "get", "the", "result", "I", "was", "hoping", "for", "What", "I", "m", "trying", "to", "do", "be", "have", "widgetB", "be", "able", "to", "declare", "a", "template", "to", "be", "use", "inside", "it", "s", "own", "template", "when", "rendered", "NUMBER", "Think", "of", "a", "tile", "list", "component", "where", "I", "m", "trying", "to", "supply", "a", "transcluded", "template", "to", "be", "use", "to", "render", "each", "tile", "when", "the", "tile", "list", "renders", "rather", "than", "declaring", "the", "tile", "itself", "inside", "the", "tile", "list", "for", "re", "usability", "and", "flexibility", "NUMBER", "So", "each", "tiles", "data", "would", "be", "driven", "internal", "to", "Widget", "B", "and", "I", "m", "defining", "the", "template", "params", "externally", "NUMBER", "I", "also", "tried", "use", "input", "NUMBER", "renderBody", "out", "WidgetB_data", "inside", "WidgetB", "NUMBER", "But", "that", "still", "seems", "to", "use", "WidgetA", "data", "NUMBER", "Thanks", "mlrawlings", "I", "ll", "give", "these", "a", "try", "I", "think", "I", "might", "have", "a", "snag", "all", "this", "assumes", "I", "m", "only", "rendering", "the", "transcluded", "content", "once", "NUMBER", "But", "what", "I", "m", "trying", "to", "do", "be", "use", "the", "transcluded", "content", "template", "as", "an", "itemRenderer", "for", "a", "loop", "basically", "NUMBER", "something", "like", "this", "very", "simplified", "WIdget", "TAG", "TAG", "item", "TAG", "TAG", "TileList", "TAG", "TAG", "TAG", "TAG", "Seems", "if", "I", "manually", "call", "input", "NUMBER", "bodyRenderer", "it", "would", "just", "repeat", "the", "same", "content", "NUMBER", "Maybe", "I", "m", "approaching", "this", "wrong", "NUMBER", "I", "m", "just", "trying", "to", "make", "a", "reusable", "tielist", "component", "for", "an", "image", "gallery", "where", "the", "user", "of", "the", "component", "can", "easily", "define", "how", "the", "content", "be", "rendered", "by", "specify", "the", "item", "renderer", "in", "the", "body", "NUMBER", "I", "know", "I", "could", "have", "them", "define", "a", "path", "to", "a", "template", "to", "be", "use", "for", "rendering", "was", "just", "trying", "to", "avoid", "extra", "file", "NUMBER", "oh", "let", "me", "try", "that", "You", "re", "the", "best", "mlrawlings", "Cheers", "Wish", "I", "knew", "more", "of", "these", "secrets", "Can", "Marko", "Widgets", "use", "Marko", "NUMBER", "NPM", "complains", "that", "Marko", "Widgets", "wants", "a", "Peer", "dependency", "for", "NUMBER", "oh", "really", "I", "ll", "definitely", "use", "that", "then", "ok", "awesome", "NUMBER", "Got", "Marko", "NUMBER", "all", "set", "up", "and", "things", "seems", "to", "be", "work", "for", "the", "most", "part", "NUMBER", "One", "thing", "I", "can", "t", "seem", "to", "get", "to", "work", "anymore", "be", "the", "var", "part", "to", "add", "the", "extra", "variable", "to", "the", "renderBody", "NUMBER", "I", "ve", "tried", "add", "it", "to", "the", "marko", "taglib", "and", "also", "to", "the", "top", "of", "the", "component", "with", "NUMBER", "export", "NUMBER", "tag", "var", "item", "BUt", "the", "compiled", "output", "doesn", "t", "seem", "to", "add", "the", "var", "anymore", "NUMBER", "I", "had", "it", "work", "in", "Marko", "NUMBER", "Did", "this", "part", "change", "I", "can", "t", "find", "anything", "about", "how", "to", "do", "these", "configs", "in", "the", "Roadmap", "page", "NUMBER", "LINK", "js", "marko", "blob", "v", "NUMBER", "rc", "NUMBER", "ROADMAP", "NUMBER", "md", "NUMBER", "I", "m", "sorry", "for", "the", "all", "the", "question", "NUMBER", "ok", "after", "some", "trial", "and", "error", "I", "was", "able", "to", "get", "the", "var", "to", "appear", "in", "the", "compiled", "output", "but", "only", "if", "I", "add", "a", "marko", "tag", "NUMBER", "json", "file", "to", "the", "Widget", "component", "directory", "along", "side", "my", "component", "NUMBER", "js", "and", "index", "NUMBER", "html", "NUMBER", "I", "use", "the", "following", "JSON", "var", "item", "No", "clue", "if", "this", "be", "correct", "way", "though", "NUMBER", "We", "use", "to", "be", "able", "to", "add", "these", "in", "the", "component", "file", "use", "an", "export", "NUMBER", "tag", "but", "that", "doesn", "t", "seem", "to", "work", "anymore", "NUMBER", "Kind", "of", "annoying", "to", "have", "to", "add", "another", "file", "to", "accomplish", "this", "NUMBER", "I", "m", "still", "a", "bit", "muddy", "on", "all", "these", "JSON", "file", "marko", "taglib", "NUMBER", "json", "vs", "marko", "tag", "NUMBER", "json", "vs", "marko", "NUMBER", "json", "and", "where", "exactly", "they", "be", "supposed", "to", "live", "NUMBER", "It", "seems", "I", "need", "to", "have", "a", "marko", "tag", "NUMBER", "json", "somewhere", "high", "in", "the", "directory", "that", "defines", "the", "components", "directory", "defining", "tags", "dir", "NUMBER", "src", "components", "or", "nothing", "gets", "find", "NUMBER", "I", "m", "sure", "it", "s", "just", "me", "fumbling", "my", "way", "through", "this", "without", "docs", "I", "think", "it", "s", "not", "readable", "and", "clear", "like", "old", "syntax", "NUMBER", "Example", "if", "you", "be", "newbie", "in", "marko", "world", "and", "you", "see", "TAG", "function", "sum", "a", "b", "return", "a", "b", "TAG", "You", "can", "easy", "understand", "that", "some", "logical", "operations", "be", "happen", "in", "script", "tags", "but", "if", "you", "see", "static", "function", "sum", "a", "b", "return", "a", "b", "You", "can", "think", "someone", "try", "to", "write", "in", "output", "static", "function", "NUMBER", "etc", "NUMBER", "Also", "if", "you", "need", "to", "write", "really", "to", "output", "something", "like", "this", "you", "need", "to", "wrap", "this", "code", "and", "it", "s", "not", "intuitive", "NUMBER", "I", "like", "marko", "html", "syntax", "and", "custom", "tags", "because", "it", "make", "me", "fill", "everything", "be", "standard", "with", "some", "extra", "power", "NUMBER", "Another", "thing", "why", "i", "like", "html", "syntax", "be", "if", "i", "have", "already", "write", "code", "in", "html", "it", "s", "really", "easy", "to", "integrate", "with", "my", "project", "without", "any", "other", "efforts", "but", "otherwise", "result", "can", "be", "unexpect", "NUMBER", "I", "don", "t", "like", "concise", "mix", "syntax", "and", "maybe", "i", "be", "wrong", "NUMBER", "Eldar", "X", "You", "re", "certainly", "not", "alone", "in", "preferring", "standard", "over", "concise", "syntax", "NUMBER", "I", "personally", "prefer", "concise", "but", "I", "do", "feel", "that", "the", "official", "documentation", "should", "use", "HTML", "syntax", "whenever", "possible", "NUMBER", "mindeavor", "patrick", "steele", "idem", "I", "much", "prefer", "use", "a", "separate", "tag", "rather", "than", "hijacking", "TAG", "NUMBER", "Even", "with", "the", "template", "helpers", "or", "marko", "init", "attribute", "the", "first", "time", "I", "saw", "that", "it", "took", "a", "while", "to", "click", "NUMBER", "Someone", "new", "to", "Marko", "might", "not", "realize", "that", "it", "transforms", "top", "level", "TAG", "and", "TAG", "tags", "but", "when", "I", "see", "something", "like", "TAG", "or", "static", "NUMBER", "I", "immediately", "recognize", "that", "it", "s", "special", "NUMBER", "patrick", "steele", "idem", "I", "really", "like", "this", "proposal", "NUMBER", "Correct", "me", "if", "I", "m", "wrong", "but", "I", "m", "assuming", "the", "HTML", "syntax", "would", "look", "like", "TAG", "TAG", "Would", "TAG", "still", "accept", "body", "content", "like", "TAG", "did", "TAG", "function", "myHelper", "NUMBER", "TAG", "If", "we", "do", "it", "will", "be", "a", "problem", "to", "put", "spaces", "after", "because", "most", "of", "our", "text", "editors", "can", "divide", "our", "code", "like", "this", "TAG", "Lorem", "ipsum", "dolor", "sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt", "ut", "labore", "et", "dolore", "magna", "aliqua", "NUMBER", "Ut", "enim", "ad", "minim", "veniam", "quis", "nostrud", "exercitation", "ullamco", "laboris", "nisi", "ut", "aliquip", "ex", "ea", "commodo", "consequat", "NUMBER", "Duis", "aute", "irure", "dolor", "in", "reprehenderit", "in", "voluptate", "velit", "esse", "cillum", "dolore", "eu", "fugiat", "nulla", "pariatur", "NUMBER", "Excepteur", "sint", "occaecat", "cupidatat", "non", "proident", "sunt", "in", "culpa", "What", "qui", "officia", "deserunt", "mollit", "anim", "id", "est", "laborum", "NUMBER", "TAG", "Also", "i", "still", "think", "it", "should", "be", "at", "least", "for", "html", "version", "at", "least", "inside", "tags", "maybe", "like", "this", "TAG", "var", "myCode", "true", "TAG", "TAG", "var", "myCode", "true", "TAG", "TAG", "var", "myCode", "true", "TAG", "patrick", "steele", "idem", "The", "only", "problem", "I", "see", "be", "that", "the", "NUMBER", "would", "be", "parsed", "as", "a", "tag", "name", "in", "concise", "but", "as", "text", "in", "HTML", "NUMBER", "I", "would", "prefer", "either", "TAG", "TAG", "or", "make", "that", "concise", "only", "in", "HTML", "you", "d", "probably", "want", "to", "use", "NUMBER", "instead", "anyway", "NUMBER", "Other", "than", "that", "I", "like", "this", "proposal", "NUMBER", "Though", "I", "do", "feel", "it", "s", "important", "to", "mark", "this", "as", "a", "breaking", "change", "since", "anyone", "previously", "use", "something", "like", "price", "will", "now", "need", "to", "escape", "the", "first", "NUMBER", "Actually", "now", "that", "I", "think", "about", "I", "feel", "like", "it", "would", "be", "more", "intuitive", "if", "the", "behaviors", "of", "NUMBER", "and", "TAG", "were", "swapped", "then", "NUMBER", "would", "be", "a", "multi", "line", "multi", "statement", "version", "of", "NUMBER", "but", "that", "might", "be", "too", "much", "of", "a", "breaking", "change", "NUMBER", "Edit", "Whoops", "nevermind", "NUMBER", "For", "some", "reason", "I", "was", "thinking", "NUMBER", "would", "replace", "static", "NUMBER", "NUMBER", "Haven", "t", "had", "my", "coffee", "yet", "this", "morning", "NUMBER", "NUMBER", "When", "this", "moves", "forward", "will", "the", "deprecate", "state", "be", "eternal", "Or", "be", "there", "a", "timeline", "to", "remove", "the", "old", "syntax", "People", "tend", "to", "stick", "to", "the", "old", "syntax", "until", "forced", "to", "change", "NUMBER", "Will", "there", "be", "a", "migration", "tool", "NUMBER", "I", "guess", "this", "be", "not", "relate", "to", "the", "syntax", "change", "but", "be", "JS", "linting", "possible", "in", "JS", "embedded", "in", "marko", "file", "NUMBER", "I", "prefer", "a", "syntax", "that", "permits", "parsing", "such", "that", "we", "can", "still", "write", "easy", "to", "read", "lint", "able", "code", "without", "change", "a", "team", "s", "current", "JSLint", "ESLint", "settings", "i", "NUMBER", "e", "NUMBER", "multi", "lined", "object", "literal", "usual", "indents", "etc", "NUMBER", "For", "small", "JS", "I", "be", "okay", "having", "it", "in", "marko", "for", "larger", "JS", "my", "preference", "be", "to", "put", "it", "in", "separate", "JS", "file", "NUMBER", "I", "d", "want", "to", "be", "able", "to", "move", "the", "JS", "from", "marko", "to", "JS", "file", "without", "reformatting", "NUMBER", "NUMBER", "I", "prefer", "a", "single", "way", "of", "doing", "things", "syntax", "flexibility", "of", "doing", "the", "same", "thing", "tends", "to", "end", "up", "in", "multiple", "ways", "of", "write", "code", "within", "the", "same", "code", "base", "and", "leads", "to", "endless", "discussion", "in", "opinions", "NUMBER", "mikewoo", "NUMBER", "NUMBER", "I", "m", "not", "aware", "of", "anything", "in", "Marko", "that", "s", "ever", "be", "deprecate", "for", "too", "long", "without", "be", "remove", "but", "with", "a", "change", "like", "this", "there", "will", "be", "plenty", "of", "deprecation", "notices", "NUMBER", "There", "will", "also", "be", "a", "migration", "tool", "sometime", "after", "v", "NUMBER", "be", "release", "NUMBER", "NUMBER", "That", "would", "depend", "on", "whether", "the", "linter", "you", "re", "use", "support", "linting", "only", "a", "section", "of", "the", "file", "NUMBER", "Alternatively", "you", "could", "lint", "the", "entire", "resulting", "NUMBER", "marko", "NUMBER", "js", "file", "NUMBER", "NUMBER", "That", "s", "one", "of", "the", "main", "reasons", "for", "these", "change", "the", "way", "it", "s", "currently", "do", "doesn", "t", "make", "that", "easy", "but", "the", "class", "NUMBER", "syntax", "would", "NUMBER", "NUMBER", "What", "s", "a", "good", "linter", "than", "support", "linting", "only", "a", "section", "of", "the", "file", "We", "wouldn", "t", "lint", "NUMBER", "marko", "NUMBER", "js", "because", "it", "s", "a", "generate", "file", "that", "we", "don", "t", "check", "into", "our", "app", "codebase", "NUMBER", "patrick", "steele", "idem", "for", "valid", "JS", "linting", "unuse", "undefined", "etc", "NUMBER", "what", "you", "mention", "would", "work", "NUMBER", "But", "for", "style", "linting", "spaces", "indents", "in", "the", "template", "what", "can", "we", "do", "patrick", "steele", "idem", "I", "m", "a", "little", "unclear", "on", "the", "exact", "behavior", "of", "NUMBER", "NUMBER", "Is", "it", "the", "same", "as", "TAG", "or", "will", "you", "be", "able", "to", "return", "something", "from", "it", "to", "be", "inserted", "into", "the", "document", "For", "example", "would", "this", "TAG", "return", "result", "TAG", "do", "basically", "the", "same", "thing", "as", "TAG", "result", "TAG", "I", "m", "also", "not", "sure", "that", "NUMBER", "needs", "to", "be", "restricted", "to", "the", "beginning", "of", "the", "line", "NUMBER", "It", "makes", "perfect", "sense", "for", "NUMBER", "but", "why", "not", "allow", "this", "TAG", "NUMBER", "TAG", "mlrawlings", "I", "like", "that", "though", "I", "m", "not", "sure", "what", "you", "mean", "by", "special", "case", "to", "disallow", "NUMBER", "NUMBER", "Here", "s", "my", "interpretation", "of", "the", "parser", "logic", "If", "the", "tag", "name", "be", "immediately", "begin", "parsing", "as", "a", "multi", "line", "expression", "which", "also", "tracks", "depth", "within", "and", "pairs", "Continue", "until", "char", "n", "depth", "NUMBER", "end", "of", "line", "and", "we", "re", "not", "inside", "a", "pair", "of", "brackets", "If", "the", "expression", "text", "spans", "multiple", "lines", "and", "begins", "with", "strip", "the", "open", "and", "closing", "If", "you", "need", "to", "enclose", "a", "multi", "line", "tag", "s", "content", "in", "a", "javascript", "block", "statement", "you", "ll", "simply", "need", "to", "use", "two", "pairs", "of", "brackets", "begin", "script", "begin", "block", "NUMBER", "end", "block", "end", "script", "Optionally", "the", "single", "line", "syntax", "could", "also", "strip", "a", "single", "pair", "of", "surrounding", "brackets", "to", "avoid", "confusion", "NUMBER", "I", "m", "late", "to", "the", "party", "but", "I", "want", "to", "add", "my", "voice", "in", "support", "of", "not", "concise", "syntax", "NUMBER", "I", "do", "not", "think", "floating", "JS", "blocks", "be", "indicative", "enough", "of", "the", "code", "be", "associated", "with", "the", "template", "system", "NUMBER", "And", "as", "someone", "who", "abhors", "the", "class", "sugar", "I", "d", "be", "loath", "to", "use", "it", "solely", "for", "that", "reason", "NUMBER", "I", "would", "much", "rather", "see", "something", "like", "the", "following", "TAG", "module", "NUMBER", "export", "handleClick", "function", "event", "TAG", "jsumners", "I", "don", "t", "completely", "disagree", "it", "would", "be", "nice", "to", "have", "a", "more", "HTML", "like", "syntax", "but", "after", "digging", "through", "the", "compiler", "code", "and", "giving", "it", "a", "lot", "of", "thought", "I", "m", "personally", "convinced", "in", "favor", "of", "class", "NUMBER", "Also", "keep", "in", "mind", "that", "TAG", "or", "TAG", "module", "NUMBER", "export", "NUMBER", "TAG", "be", "really", "just", "a", "convenience", "to", "avoid", "write", "a", "separate", "component", "NUMBER", "js", "for", "small", "simple", "components", "NUMBER", "patrick", "steele", "idem", "mlrawlings", "On", "a", "relate", "note", "could", "TAG", "fall", "back", "to", "use", "body", "text", "if", "the", "NUMBER", "attribute", "be", "omitted", "I", "think", "a", "lot", "of", "users", "would", "prefer", "that", "and", "it", "would", "certainly", "ease", "the", "transition", "from", "TAG", "NUMBER", "patrick", "steele", "idem", "Yes", "but", "could", "it", "fall", "back", "to", "parsing", "body", "text", "if", "the", "block", "be", "omitted", "TAG", "TAG", "NUMBER", "TAG", "mlrawlings", "I", "only", "meant", "for", "TAG", "and", "only", "in", "the", "way", "that", "s", "already", "use", "by", "TAG", "which", "TAG", "be", "replacing", "NUMBER", "It", "wouldn", "t", "make", "sense", "for", "TAG", "and", "I", "really", "don", "t", "like", "hijacking", "tags", "like", "TAG", "NUMBER", "Bug", "Report", "Context", "I", "m", "trying", "to", "compile", "the", "following", "template", "html", "TAG", "const", "state", "foo", "bar", "TAG", "TAG", "state_names", "state", "state", "NUMBER", "NUMBER", "toUpperCase", "TAG", "But", "the", "grouping", "around", "state_names", "state", "state", "be", "not", "respected", "in", "the", "output", "NUMBER", "Expected", "Behavior", "js", "NUMBER", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "TAG", "escapeXml", "state_names", "state", "state", "NUMBER", "NUMBER", "toUpperCase", "TAG", "NUMBER", "Actual", "Behavior", "js", "NUMBER", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "TAG", "escapeXml", "state_names", "state", "state", "NUMBER", "NUMBER", "toUpperCase", "TAG", "NUMBER", "See", "how", "the", "grouping", "around", "state_names", "state", "state", "be", "drop", "NUMBER", "Your", "Environment", "Version", "use", "Marko", "NUMBER", "Node", "NUMBER", "js", "NUMBER", "macOS", "Sierra", "NUMBER", "Thanks", "a", "lot", "I", "have", "a", "template", "that", "be", "in", "HTML", "format", "but", "the", "parser", "be", "assuming", "concise", "mode", "so", "warnings", "for", "issue", "NUMBER", "and", "NUMBER", "from", "htmljs", "parser", "be", "now", "popping", "up", "in", "the", "console", "NUMBER", "How", "do", "you", "disable", "concise", "mode", "if", "you", "do", "not", "use", "it", "I", "didn", "t", "know", "about", "wrapping", "with", "as", "I", "couldn", "t", "find", "any", "documentation", "on", "that", "NUMBER", "Thanks", "for", "the", "tip", "NUMBER", "That", "should", "work", "and", "probably", "much", "easier", "than", "figuring", "out", "how", "to", "change", "marko", "to", "pass", "the", "concise", "false", "option", "to", "htmljs", "parser", "TAG", "Extra", "quotation", "marks", "on", "output", "of", "non", "string", "objects", "When", "variable", "be", "not", "a", "string", "output", "have", "extra", "quotation", "marks", "const", "template", "require", "template", "NUMBER", "marko", "template", "NUMBER", "ream", "test", "new", "Date", "template", "file", "TAG", "Output", "be", "TAG", "TAG", "In", "marko", "v", "NUMBER", "output", "was", "TAG", "TAG", "Exporting", "data", "from", "template", "I", "think", "it", "would", "be", "very", "nice", "feature", "if", "we", "can", "exporting", "data", "from", "template", "file", "because", "now", "marko", "file", "have", "much", "power", "and", "we", "can", "make", "logical", "operations", "some", "times", "we", "just", "want", "to", "export", "result", "for", "use", "it", "somewhere", "else", "NUMBER", "Example", "use", "case", "We", "have", "cms", "and", "we", "want", "define", "output", "field", "for", "this", "template", "then", "in", "our", "admin", "page", "we", "want", "get", "all", "field", "of", "selected", "template", "file", "for", "fill", "them", "NUMBER", "Looks", "like", "what", "i", "need", "NUMBER", "Let", "s", "make", "some", "example", "something", "like", "this", "be", "work", "foo", "NUMBER", "marko", "TAG", "var", "field", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "export", "var", "info", "name", "Home", "Page", "field", "field", "bar", "NUMBER", "js", "const", "template", "require", "foo", "NUMBER", "marko", "console", "NUMBER", "log", "template", "NUMBER", "info", "name", "Home", "Page", "field", "first", "second", "TAG", "Inline", "output", "support", "for", "marko", "widgets", "TAG", "While", "marko", "widget", "now", "part", "of", "marko", "NUMBER", "js", "how", "about", "add", "support", "for", "printing", "compiled", "output", "of", "widgets", "inline", "to", "template", "file", "without", "bundlers", "TAG", "I", "think", "it", "s", "important", "feature", "because", "widgets", "must", "be", "independent", "from", "NUMBER", "part", "tool", "but", "can", "provide", "support", "for", "them", "NUMBER", "Now", "for", "work", "with", "marko", "we", "must", "bundle", "output", "of", "widget", "yes", "But", "why", "we", "can", "t", "just", "put", "output", "of", "widget", "into", "html", "between", "script", "tag", "for", "example", "we", "have", "onclick", "listener", "in", "our", "widget", "why", "just", "not", "put", "in", "html", "I", "know", "that", "bundled", "js", "have", "some", "better", "features", "but", "it", "also", "may", "be", "not", "bad", "Even", "the", "simplest", "widget", "depends", "on", "the", "marko", "widgets", "runtime", "which", "needs", "to", "be", "bundled", "anyway", "NUMBER", "It", "might", "be", "possible", "to", "add", "a", "compiler", "optimization", "to", "recognize", "this", "edge", "case", "and", "use", "plain", "JS", "instead", "but", "that", "could", "easily", "break", "something", "NUMBER", "Alternatively", "you", "could", "just", "add", "TAG", "document", "NUMBER", "getElementById", "NUMBER", "NUMBER", "addEventListener", "NUMBER", "TAG", "yourself", "or", "even", "write", "a", "custom", "attribute", "transformer", "NUMBER", "If", "you", "re", "just", "wanting", "specific", "widgets", "to", "be", "embedded", "in", "the", "page", "rather", "than", "include", "in", "the", "main", "bundle", "most", "bundlers", "provide", "a", "way", "to", "do", "that", "NUMBER", "Lasso", "for", "example", "json", "dependencies", "require", "NUMBER", "component", "NUMBER", "js", "inline", "true", "Which", "results", "in", "something", "like", "html", "TAG", "NUMBER", "TAG", "TAG", "TAG", "component", "NUMBER", "js", "TAG", "TAG", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "ff", "NUMBER", "d", "NUMBER", "bea", "NUMBER", "c", "NUMBER", "cc", "NUMBER", "f", "NUMBER", "b", "NUMBER", "af", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fcc", "NUMBER", "on", "greenkeeper", "fs", "extra", "NUMBER", "into", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "bd", "NUMBER", "c", "NUMBER", "fba", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "ff", "NUMBER", "d", "NUMBER", "bea", "NUMBER", "c", "NUMBER", "cc", "NUMBER", "f", "NUMBER", "b", "NUMBER", "af", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fcc", "NUMBER", "on", "greenkeeper", "fs", "extra", "NUMBER", "into", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "bd", "NUMBER", "c", "NUMBER", "fba", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "e", "NUMBER", "ef", "NUMBER", "b", "NUMBER", "f", "NUMBER", "b", "NUMBER", "f", "NUMBER", "c", "NUMBER", "c", "NUMBER", "on", "NUMBER", "markoc", "version", "into", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "bd", "NUMBER", "c", "NUMBER", "fba", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "ee", "NUMBER", "c", "NUMBER", "c", "NUMBER", "d", "NUMBER", "faa", "NUMBER", "cabca", "NUMBER", "ab", "NUMBER", "cd", "NUMBER", "f", "NUMBER", "on", "greenkeeper", "md", "NUMBER", "hex", "NUMBER", "into", "NUMBER", "f", "NUMBER", "e", "NUMBER", "b", "NUMBER", "dce", "NUMBER", "d", "NUMBER", "b", "NUMBER", "bdf", "NUMBER", "f", "NUMBER", "f", "NUMBER", "a", "NUMBER", "on", "master", "NUMBER", "Directories", "named", "node_modules", "and", "runtime", "seem", "to", "have", "be", "accidentally", "add", "to", "the", "NPM", "package", "starting", "from", "NUMBER", "beta", "NUMBER", "bringing", "the", "package", "NUMBER", "tgz", "size", "from", "TAG", "NUMBER", "MB", "NUMBER", "Still", "there", "as", "of", "NUMBER", "rc", "NUMBER", "NUMBER", "cc", "patrick", "steele", "idem", "mlrawlings", "patrick", "steele", "idem", "and", "mlrawlings", "This", "reflects", "the", "behavior", "that", "was", "available", "in", "v", "NUMBER", "with", "getInitialState", "and", "I", "don", "t", "see", "any", "problem", "with", "backwards", "compatibility", "NUMBER", "Thank", "You", "I", "ve", "be", "following", "the", "NUMBER", "milestone", "however", "I", "m", "get", "the", "following", "error", "Error", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "site", "components", "hero", "image", "index", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "site", "components", "hero", "image", "index", "NUMBER", "marko", "NUMBER", "NUMBER", "The", "include", "attribute", "must", "have", "an", "argument", "NUMBER", "For", "example", "include", "NUMBER", "target", "NUMBER", "marko", "or", "include", "data", "NUMBER", "renderBody", "However", "with", "respect", "to", "LINK", "js", "marko", "issue", "NUMBER", "examples", "and", "note", "illustrate", "the", "following", "approach", "include", "be", "the", "same", "as", "include", "data", "NUMBER", "renderBody", "Commit", "LINK", "js", "marko", "commit", "NUMBER", "e", "NUMBER", "b", "NUMBER", "e", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "da", "NUMBER", "b", "NUMBER", "eab", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "ee", "NUMBER", "f", "introduces", "the", "body", "slot", "tag", "NUMBER", "Should", "we", "be", "use", "body", "slot", "instead", "of", "the", "deprecate", "w", "body", "tag", "or", "transition", "to", "include", "data", "NUMBER", "renderBody", "The", "TAG", "tag", "was", "remove", "shortly", "after", "be", "add", "and", "include", "with", "no", "argument", "was", "disallowed", "NUMBER", "I", "believe", "include", "data", "NUMBER", "renderBody", "be", "now", "the", "recommended", "way", "to", "do", "this", "NUMBER", "You", "can", "also", "do", "something", "like", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Then", "use", "it", "like", "TAG", "TAG", "TAG", "Foo", "TAG", "TAG", "TAG", "Foo", "TAG", "TAG", "or", "TAG", "Foo", "TAG", "patrick", "steele", "idem", "Thank", "You", "NUMBER", "I", "have", "a", "all", "of", "the", "code", "use", "the", "proper", "include", "target", "due", "to", "the", "various", "research", "through", "the", "issue", "list", "NUMBER", "However", "it", "wasn", "t", "readily", "apparent", "which", "direction", "was", "actually", "correct", "and", "I", "wanted", "a", "bit", "more", "feedback", "on", "what", "was", "the", "final", "decision", "NUMBER", "In", "ES", "NUMBER", "of", "gives", "you", "the", "value", "and", "in", "gives", "you", "the", "key", "NUMBER", "Would", "add", "body", "static", "text", "in", "the", "marko", "NUMBER", "json", "fix", "that", "similar", "to", "the", "app", "markdown", "LINK", "js", "samples", "ui", "components", "playground", "blob", "master", "src", "components", "app", "markdown", "marko", "tag", "NUMBER", "json", "sample", "component", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "d", "NUMBER", "e", "NUMBER", "cad", "NUMBER", "b", "NUMBER", "ef", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "d", "NUMBER", "adc", "NUMBER", "e", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "widget", "types", "into", "a", "NUMBER", "ce", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fdde", "NUMBER", "cffbc", "on", "marko", "js", "master", "NUMBER", "Input", "tag", "be", "be", "filled", "with", "undefined", "value", "when", "the", "component", "s", "state", "change", "NUMBER", "Context", "I", "find", "what", "I", "think", "be", "a", "bug", "NUMBER", "When", "I", "change", "the", "state", "of", "my", "component", "and", "there", "be", "an", "input", "in", "the", "template", "Marko", "fills", "it", "with", "an", "undefined", "value", "even", "if", "I", "don", "t", "explicitly", "set", "the", "input", "s", "value", "NUMBER", "image", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "df", "NUMBER", "NUMBER", "de", "NUMBER", "a", "NUMBER", "png", "that", "s", "my", "template", "markup", "image", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "ca", "NUMBER", "fbdb", "NUMBER", "e", "NUMBER", "png", "my", "component", "s", "code", "I", "be", "currently", "use", "NUMBER", "beta", "NUMBER", "I", "update", "to", "NUMBER", "beta", "NUMBER", "and", "still", "get", "that", "error", "Expected", "Behavior", "Input", "s", "value", "shouldn", "t", "be", "set", "NUMBER", "Actual", "Behavior", "Input", "s", "value", "be", "get", "filled", "with", "an", "undefined", "value", "NUMBER", "Environment", "Version", "use", "NUMBER", "beta", "NUMBER", "and", "NUMBER", "beta", "NUMBER", "Environment", "Chrome", "NUMBER", "and", "node", "NUMBER", "js", "NUMBER", "Operating", "System", "and", "version", "macOS", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ba", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "ffe", "NUMBER", "ccb", "NUMBER", "accdba", "on", "austinkelleher", "NUMBER", "deprecate", "w", "bind", "into", "NUMBER", "aaf", "NUMBER", "a", "NUMBER", "e", "NUMBER", "cef", "NUMBER", "e", "NUMBER", "edca", "NUMBER", "a", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ee", "NUMBER", "dba", "NUMBER", "c", "NUMBER", "f", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fb", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "bind", "into", "NUMBER", "aaf", "NUMBER", "a", "NUMBER", "e", "NUMBER", "cef", "NUMBER", "e", "NUMBER", "edca", "NUMBER", "a", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "ae", "NUMBER", "b", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "NUMBER", "dd", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "bind", "into", "a", "NUMBER", "ce", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fdde", "NUMBER", "cffbc", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "ae", "NUMBER", "b", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "NUMBER", "dd", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "bind", "into", "a", "NUMBER", "ce", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fdde", "NUMBER", "cffbc", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "ae", "NUMBER", "b", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "NUMBER", "dd", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "bind", "into", "a", "NUMBER", "ce", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fdde", "NUMBER", "cffbc", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "f", "NUMBER", "dddb", "NUMBER", "cbc", "NUMBER", "d", "NUMBER", "e", "NUMBER", "b", "NUMBER", "c", "NUMBER", "c", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "on", "austinkelleher", "NUMBER", "deprecate", "w", "bind", "into", "a", "NUMBER", "ce", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fdde", "NUMBER", "cffbc", "on", "marko", "js", "master", "NUMBER", "Bug", "Report", "Context", "TAG", "Using", "latest", "marko", "NUMBER", "beta", "NUMBER", "I", "want", "to", "render", "a", "component", "that", "uses", "the", "await", "tag", "purely", "in", "the", "browser", "NUMBER", "The", "component", "be", "build", "according", "to", "LINK", "online", "Async_Await", "LINK", "online", "Async_Await", "JavaScript", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "module", "NUMBER", "export", "function", "input", "out", "template", "NUMBER", "render", "userDataProvider", "function", "args", "callback", "var", "backThen", "Date", "NUMBER", "now", "console", "NUMBER", "log", "renderer", "NUMBER", "js", "NUMBER", "starting", "NUMBER", "setTimeout", "function", "console", "NUMBER", "log", "renderer", "NUMBER", "js", "NUMBER", "do", "Date", "NUMBER", "now", "backThen", "callback", "null", "firstName", "John", "lastName", "Doe", "age", "NUMBER", "NUMBER", "out", "while", "be", "required", "by", "a", "simple", "index", "page", "that", "collects", "all", "the", "components", "currently", "just", "one", "JavaScript", "var", "template", "require", "NUMBER", "index", "NUMBER", "marko", "template", "NUMBER", "render", "function", "err", "result", "result", "NUMBER", "replaceChildrenOf", "document", "NUMBER", "getElementById", "root", "which", "itself", "be", "injected", "via", "lasso", "NUMBER", "lasso", "cli", "NUMBER", "lasso", "marko", "NUMBER", "into", "a", "simple", "index", "NUMBER", "html", "file", "NUMBER", "Checkout", "LINK", "NUMBER", "clientside", "LINK", "NUMBER", "clientside", "as", "a", "reference", "NUMBER", "Expected", "Behavior", "TAG", "Template", "should", "render", "asynchronously", "after", "NUMBER", "NUMBER", "seconds", "NUMBER", "Actual", "Behavior", "TAG", "Tab", "Browser", "uses", "NUMBER", "of", "CPU", "can", "only", "be", "killed", "by", "taskmanager", "NUMBER", "Smells", "like", "an", "infinite", "loop", "NUMBER", "Possible", "Fix", "TAG", "instead", "of", "use", "replaceChildrenOf", "use", "appendTo", "JavaScript", "var", "template", "require", "NUMBER", "index", "NUMBER", "marko", "template", "NUMBER", "render", "function", "err", "result", "result", "NUMBER", "appendTo", "document", "NUMBER", "getElementById", "root", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "NUMBER", "beta", "NUMBER", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Chrome", "Version", "NUMBER", "Offizieller", "Build", "canary", "NUMBER", "Bit", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Desktop", "MBP", "NUMBER", "Sierra", "Link", "to", "your", "project", "LINK", "NUMBER", "clientside", "Steps", "to", "Reproduce", "TAG", "TAG", "NUMBER", "Check", "out", "my", "project", "NUMBER", "npm", "install", "NUMBER", "switch", "lines", "NUMBER", "and", "NUMBER", "in", "src", "index", "NUMBER", "js", "NUMBER", "npm", "run", "build", "NUMBER", "open", "index", "NUMBER", "html", "in", "your", "browser", "TAG", "I", "think", "it", "s", "duplicate", "of", "LINK", "js", "marko", "pull", "NUMBER", "TAG", "Bug", "Report", "Context", "In", "node", "require", "NUMBER", "js", "right", "before", "the", "module", "NUMBER", "export", "install", "be", "call", "NUMBER", "Consequently", "default", "options", "be", "use", "NUMBER", "This", "causes", "an", "exception", "to", "be", "throw", "on", "read", "only", "systems", "since", "the", "default", "option", "in", "the", "compiler", "be", "to", "writeToDisk", "NUMBER", "This", "also", "results", "in", "install", "potentially", "be", "call", "twice", "NUMBER", "Expected", "Behavior", "require", "marko", "node", "require", "NUMBER", "install", "compilerOptions", "writeToDisk", "false", "should", "result", "in", "a", "single", "call", "to", "install", "with", "the", "options", "specified", "NUMBER", "Actual", "Behavior", "require", "marko", "node", "require", "NUMBER", "install", "compilerOptions", "writeToDisk", "false", "calls", "install", "twice", "Once", "from", "the", "base", "class", "just", "before", "the", "module", "NUMBER", "export", "line", "with", "no", "options", "and", "a", "second", "time", "with", "the", "options", "specified", "NUMBER", "Possible", "Fix", "Remove", "install", "on", "line", "NUMBER", "of", "node", "require", "NUMBER", "js", "NUMBER", "Note", "With", "this", "fix", "require", "marko", "node", "require", "will", "no", "longer", "by", "default", "call", "install", "NUMBER", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "Version", "use", "NUMBER", "beta", "NUMBER", "node", "NUMBER", "js", "version", "v", "NUMBER", "Operating", "System", "Windows", "NUMBER", "x", "NUMBER", "TAG", "Related", "NUMBER", "NUMBER", "widgets", "util", "don", "t", "have", "__destroyWidgetForEl", "and", "__destroyElRecursive", "function", "Fixed", "infinite", "loop", "in", "replaceChildrenOf", "function", "main", "NUMBER", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "default", "NUMBER", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "with", "TAG", "in", "first", "line", "of", "template", "error", "has", "be", "happend", "ERROR", "in", "NUMBER", "api", "views", "front", "layouts", "default", "NUMBER", "marko", "Module", "build", "fail", "Error", "Node", "do", "not", "have", "a", "writeCode", "method", "type", "DocumentType", "at", "CodeWriter", "NUMBER", "write", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "writeNode", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Array", "NUMBER", "forEach", "native", "at", "CodeWriter", "NUMBER", "writeStatements", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "CodeWriter", "NUMBER", "writeBlock", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "FunctionDeclaration", "NUMBER", "writeCode", "var", "www", "node_modules", "marko", "compiler", "ast", "FunctionDeclaration", "NUMBER", "js", "NUMBER", "NUMBER", "at", "CodeWriter", "NUMBER", "write", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "writeNode", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Array", "NUMBER", "forEach", "native", "at", "CodeWriter", "NUMBER", "writeStatements", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Program", "NUMBER", "writeCode", "var", "www", "node_modules", "marko", "compiler", "ast", "Program", "NUMBER", "js", "NUMBER", "NUMBER", "at", "CodeWriter", "NUMBER", "write", "var", "www", "node_modules", "marko", "compiler", "CodeWriter", "NUMBER", "js", "NUMBER", "NUMBER", "at", "CompiledTemplate", "NUMBER", "get", "code", "as", "code", "var", "www", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "at", "_compile", "var", "www", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "compile", "var", "www", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "compileForBrowser", "var", "www", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "module", "NUMBER", "export", "var", "www", "node_modules", "marko", "loader", "src", "index", "NUMBER", "js", "NUMBER", "NUMBER", "NUMBER", "api", "views", "front", "common", "NUMBER", "marko", "NUMBER", "NUMBER", "NUMBER", "without", "DOCTYPE", "it", "works", "NUMBER", "Type", "of", "compile", "vdom", "with", "compileFileForBrowser", "function", "NUMBER", "I", "can", "t", "think", "of", "any", "use", "cases", "where", "this", "would", "really", "be", "necessary", "but", "I", "also", "can", "t", "see", "much", "reason", "to", "throw", "an", "error", "NUMBER", "Browsers", "seem", "to", "silently", "remove", "the", "TAG", "tag", "whenever", "it", "occur", "somewhere", "it", "shouldn", "t", "I", "feel", "like", "that", "s", "probably", "the", "best", "thing", "for", "Marko", "to", "do", "as", "well", "NUMBER", "I", "just", "tried", "to", "reuse", "server", "template", "on", "client", "side", "NUMBER", "Thanks", "for", "the", "patch", "TAG", "Bug", "Report", "Context", "TAG", "TAG", "TAG", "Sample", "Text", "TAG", "TAG", "TAG", "Expected", "Behavior", "Currently", "only", "one", "of", "them", "will", "work", "on", "it", "s", "own", "they", "work", "when", "one", "be", "not", "include", "NUMBER", "You", "would", "expect", "to", "both", "be", "able", "to", "receive", "onMouseOver", "and", "onMouseOut", "events", "NUMBER", "Actual", "Behavior", "Template", "will", "not", "compile", "with", "both", "as", "it", "error", "at", "marko_forEach", "data", "NUMBER", "shipMethods", "function", "opt", "widget", "NUMBER", "e", "mouseout", "handleRemHover", "__widgetId", "NUMBER", "Stating", "that", "__widgetId", "NUMBER", "be", "undefined", "TAG", "TAG", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Stack", "Trace", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "Uncaught", "ReferenceError", "__widgetId", "NUMBER", "be", "not", "defined", "at", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "at", "forEachHelper", "helpers", "NUMBER", "js", "NUMBER", "at", "render", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "at", "renderer", "renderer", "NUMBER", "js", "NUMBER", "at", "Template", "NUMBER", "renderSync", "renderable", "NUMBER", "js", "NUMBER", "at", "displayWidget", "tfv", "NUMBER", "js", "NUMBER", "at", "Object", "NUMBER", "TAG", "tfv", "NUMBER", "js", "NUMBER", "at", "i", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "at", "Object", "NUMBER", "fireWith", "as", "resolveWith", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "at", "z", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "anonymous", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "forEachHelper", "helpers", "NUMBER", "js", "NUMBER", "render", "index", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "renderer", "renderer", "NUMBER", "js", "NUMBER", "renderSync", "renderable", "NUMBER", "js", "NUMBER", "displayWidget", "tfv", "NUMBER", "js", "NUMBER", "anonymous", "tfv", "NUMBER", "js", "NUMBER", "i", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "fireWith", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "z", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "anonymous", "jquery", "NUMBER", "min", "NUMBER", "js", "NUMBER", "TAG", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "e", "NUMBER", "ca", "NUMBER", "b", "NUMBER", "e", "NUMBER", "dcc", "NUMBER", "a", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "on", "austinkelleher", "no", "update", "data", "attr", "into", "NUMBER", "cc", "NUMBER", "d", "NUMBER", "dcb", "NUMBER", "fc", "NUMBER", "f", "NUMBER", "c", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "NUMBER", "ac", "NUMBER", "fcb", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "e", "NUMBER", "ca", "NUMBER", "b", "NUMBER", "e", "NUMBER", "dcc", "NUMBER", "a", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "on", "austinkelleher", "no", "update", "data", "attr", "into", "NUMBER", "cc", "NUMBER", "d", "NUMBER", "dcb", "NUMBER", "fc", "NUMBER", "f", "NUMBER", "c", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "NUMBER", "ac", "NUMBER", "fcb", "on", "marko", "js", "master", "NUMBER", "TAG", "Bug", "Report", "Context", "Updating", "from", "version", "v", "NUMBER", "to", "v", "NUMBER", "add", "lots", "of", "warnings", "about", "single", "hyphen", "for", "concise", "line", "be", "deprecate", "NUMBER", "I", "think", "such", "behaviour", "should", "occur", "on", "next", "major", "release", "as", "it", "requires", "a", "lot", "of", "code", "change", "NUMBER", "Moreover", "there", "be", "no", "clear", "documentation", "on", "how", "code", "should", "be", "change", "as", "replacing", "with", "do", "not", "always", "make", "the", "warning", "disappear", "NUMBER", "The", "usage", "of", "a", "single", "hyphen", "at", "the", "start", "of", "a", "concise", "line", "be", "now", "deprecate", "NUMBER", "Use", "instead", "NUMBER", "See", "LINK", "js", "htmljs", "parser", "issue", "NUMBER", "TAG", "Your", "Environment", "TAG", "Version", "use", "v", "NUMBER", "Environment", "name", "and", "version", "node", "NUMBER", "js", "NUMBER", "Code", "sample", "producing", "warnings", "This", "be", "valid", "v", "NUMBER", "syntax", "marko", "TAG", "html", "lang", "en", "body", "h", "NUMBER", "Title", "script", "var", "a", "marko", "If", "translated", "to", "either", "this", "styles", "it", "still", "outputs", "the", "warning", "for", "line", "NUMBER", "marko", "TAG", "html", "lang", "en", "body", "h", "NUMBER", "Title", "script", "var", "a", "marko", "marko", "TAG", "html", "lang", "en", "body", "h", "NUMBER", "Title", "script", "var", "a", "marko", "Only", "this", "style", "be", "not", "printing", "any", "warning", "marko", "TAG", "html", "lang", "en", "body", "h", "NUMBER", "Title", "script", "var", "a", "marko", "So", "will", "this", "last", "one", "be", "the", "only", "allow", "style", "in", "the", "future", "TAG", "Thanks", "for", "the", "quick", "resolution", "NUMBER", "As", "wrapping", "code", "with", "be", "still", "valid", "I", "don", "t", "think", "it", "will", "be", "a", "major", "pain", "NUMBER", "I", "just", "had", "an", "oh", "dear", "WTF", "moment", "after", "update", "Marko", "as", "nothing", "was", "said", "in", "the", "changelog", "so", "I", "thought", "npm", "went", "crazy", "and", "messed", "up", "version", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "f", "NUMBER", "c", "NUMBER", "d", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "a", "NUMBER", "fc", "NUMBER", "f", "NUMBER", "c", "NUMBER", "e", "NUMBER", "cd", "NUMBER", "on", "austinkelleher", "NUMBER", "import", "colon", "into", "NUMBER", "e", "NUMBER", "b", "NUMBER", "e", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "da", "NUMBER", "b", "NUMBER", "eab", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "ee", "NUMBER", "f", "on", "marko", "js", "master", "NUMBER", "TAG", "Bug", "Report", "Context", "Renaming", "destruction", "imports", "be", "not", "work", "in", "v", "NUMBER", "beta", "NUMBER", "TAG", "results", "in", "compilation", "error", "while", "TAG", "const", "client", "twilio", "require", "NUMBER", "NUMBER", "lib", "twilio", "NUMBER", "js", "TAG", "works", "fine", "NUMBER", "Sorry", "my", "fault", "I", "forgot", "ES", "NUMBER", "syntax", "while", "doing", "refactoring", "for", "TAG", "from", "require", "NUMBER", "Thank", "you", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "d", "NUMBER", "e", "NUMBER", "fda", "NUMBER", "aee", "NUMBER", "ac", "NUMBER", "f", "NUMBER", "dacc", "NUMBER", "ee", "NUMBER", "ce", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "attrs", "into", "NUMBER", "e", "NUMBER", "b", "NUMBER", "e", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "da", "NUMBER", "b", "NUMBER", "eab", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "ee", "NUMBER", "f", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ca", "NUMBER", "d", "NUMBER", "f", "NUMBER", "b", "NUMBER", "c", "NUMBER", "dcac", "NUMBER", "c", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "attrs", "into", "NUMBER", "e", "NUMBER", "f", "NUMBER", "aba", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ca", "NUMBER", "d", "NUMBER", "f", "NUMBER", "b", "NUMBER", "c", "NUMBER", "dcac", "NUMBER", "c", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "attrs", "into", "NUMBER", "e", "NUMBER", "f", "NUMBER", "aba", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Bug", "Report", "Context", "in", "dom", "NUMBER", "js", "export", "NUMBER", "mixin", "target", "methodName", "function", "referenceEl", "be", "reached", "with", "referenceEl", "as", "a", "string", "It", "then", "goes", "on", "to", "try", "to", "get", "the", "ownerDocument", "with", "referenceEl", "NUMBER", "ownerDocument", "which", "won", "t", "work", "on", "a", "string", "so", "doc", "be", "undefined", "NUMBER", "it", "then", "goes", "through", "var", "newNode", "getNode", "NUMBER", "call", "this", "doc", "with", "an", "undefined", "doc", "but", "still", "creates", "the", "new", "dom", "element", "then", "appendTo", "newChild", "referenceParentEl", "be", "call", "and", "it", "appends", "the", "widget", "div", "to", "the", "referenceParentEl", "it", "then", "goes", "into", "the", "following", "with", "the", "same", "undefined", "doc", "and", "emits", "a", "mount", "node", "event", "if", "afterInsert", "afterInsert", "NUMBER", "call", "this", "doc", "then", "emits", "a", "mount", "event", "then", "entered", "initClientRendered", "widgetDefs", "doc", "in", "init", "widgets", "browser", "NUMBER", "js", "with", "an", "undefined", "doc", "and", "try", "to", "fix", "the", "undefined", "doc", "with", "window", "NUMBER", "doc", "which", "resolve", "undefined", "also", "then", "initWidget", "widgetDef", "doc", "with", "that", "undefined", "doc", "then", "try", "to", "get", "rootIds", "with", "var", "rootIds", "widgetDef", "NUMBER", "roots", "which", "returns", "undefined", "so", "it", "skips", "the", "next", "code", "block", "to", "go", "right", "to", "el", "doc", "NUMBER", "getElementById", "id", "el", "NUMBER", "__widget", "widget", "els", "el", "this", "be", "where", "it", "error", "due", "to", "doc", "be", "undefined", "Expected", "Behavior", "getNode", "should", "be", "call", "if", "the", "input", "be", "a", "string", "Actual", "Behavior", "string", "be", "never", "converted", "to", "a", "dom", "reference", "so", "it", "continues", "to", "be", "treated", "as", "a", "string", "through", "following", "calls", "Possible", "Fix", "call", "getNode", "on", "initial", "input", "Your", "Environment", "TAG", "Version", "use", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Link", "to", "your", "project", "Steps", "to", "Reproduce", "TAG", "TAG", "in", "a", "client", "side", "js", "file", "call", "the", "following", "with", "the", "path", "change", "to", "your", "widget", "NUMBER", "var", "catProdWidget", "require", "src", "components", "cat", "prod", "widget", "NUMBER", "catProdWidget", "NUMBER", "renderSync", "NUMBER", "appendTo", "catProdList", "NUMBER", "getWidget", "NUMBER", "NUMBER", "Stack", "Trace", "TAG", "Uncaught", "TypeError", "Cannot", "read", "property", "getElementById", "of", "undefined", "at", "initWidget", "LINK", "NUMBER", "beta", "NUMBER", "widgets", "init", "widgets", "browser", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "initClientRendered", "LINK", "NUMBER", "beta", "NUMBER", "widgets", "init", "widgets", "browser", "NUMBER", "js", "NUMBER", "NUMBER", "at", "WidgetsContext", "NUMBER", "initWidgets", "LINK", "NUMBER", "beta", "NUMBER", "widgets", "WidgetsContext", "NUMBER", "js", "NUMBER", "NUMBER", "at", "EventEmitter", "NUMBER", "TAG", "LINK", "NUMBER", "beta", "NUMBER", "widgets", "index", "browser", "NUMBER", "js", "NUMBER", "NUMBER", "at", "EventEmitter", "NUMBER", "emit", "LINK", "NUMBER", "events", "NUMBER", "js", "NUMBER", "NUMBER", "at", "RenderResult", "NUMBER", "afterInsert", "LINK", "NUMBER", "beta", "NUMBER", "runtime", "RenderResult", "NUMBER", "js", "NUMBER", "NUMBER", "at", "RenderResult", "NUMBER", "afterInsert", "LINK", "NUMBER", "beta", "NUMBER", "runtime", "RenderResult", "NUMBER", "js", "NUMBER", "NUMBER", "at", "RenderResult", "NUMBER", "export", "NUMBER", "mixin", "NUMBER", "Object", "NUMBER", "keys", "NUMBER", "forEach", "NUMBER", "target", "NUMBER", "anonymous", "function", "as", "appendTo", "LINK", "NUMBER", "beta", "NUMBER", "runtime", "dom", "NUMBER", "js", "NUMBER", "NUMBER", "at", "loadAll", "LINK", "_Fort_Bikes_", "NUMBER", "_", "NUMBER", "NUMBER", "site", "public", "js", "tfv", "NUMBER", "js", "NUMBER", "NUMBER", "at", "HTMLDocument", "NUMBER", "TAG", "LINK", "_Fort_Bikes_", "NUMBER", "_", "NUMBER", "NUMBER", "site", "public", "js", "tfv", "NUMBER", "js", "NUMBER", "NUMBER", "TAG", "New", "Feature", "Currently", "there", "be", "no", "easy", "way", "to", "use", "Marko", "for", "plain", "text", "parsing", "NUMBER", "Description", "Add", "non", "renderable", "block", "to", "tell", "Marko", "to", "thread", "this", "block", "as", "text", "only", "still", "parsing", "variables", "and", "conditionals", "and", "such", "just", "not", "forcing", "to", "transform", "html", "tags", "NUMBER", "Context", "The", "use", "case", "be", "for", "email", "rendering", "where", "you", "probably", "want", "to", "render", "a", "html", "and", "text", "version", "NUMBER", "For", "example", "use", "nodemailer", "LINK", "node", "email", "template", "LINK", "email", "template", "consolidate", "NUMBER", "js", "LINK", "will", "result", "in", "having", "problem", "to", "render", "the", "text", "version", "as", "marko", "will", "try", "to", "generate", "html", "tags", "out", "of", "the", "text", "sentences", "NUMBER", "Possible", "Implementation", "Option", "NUMBER", "e", "NUMBER", "g", "NUMBER", "see", "this", "proposal", "LINK", "js", "marko", "issue", "NUMBER", "TAG", "Content", "More", "Content", "data", "NUMBER", "myVar", "TAG", "Important", "In", "this", "example", "the", "output", "should", "not", "include", "the", "TAG", "tag", "Option", "NUMBER", "Javascript", "call", "has", "a", "new", "attribute", "to", "specify", "whether", "the", "template", "should", "be", "parsed", "as", "text", "only", "or", "with", "html", "transformations", "Thanks", "for", "your", "quick", "response", "NUMBER", "Unfortunately", "i", "do", "not", "work", "NUMBER", "As", "soon", "as", "i", "m", "use", "TAG", "in", "my", "template", "the", "output", "be", "null", "no", "error", "in", "console", "NUMBER", "I", "tried", "to", "move", "the", "components", "folder", "to", "different", "places", "but", "nothing", "worked", "NUMBER", "Also", "i", "add", "a", "renderer", "NUMBER", "js", "or", "template", "NUMBER", "json", "but", "also", "NUMBER", "no", "luck", "NUMBER", "Maybe", "it", "has", "something", "to", "do", "how", "consolidate", "be", "calling", "Marko", "NUMBER", "load", "options", "NUMBER", "filename", "ContentAsStr", "options", "although", "i", "would", "assume", "the", "actual", "folder", "lookup", "should", "not", "be", "affected", "by", "this", "NUMBER", "currently", "my", "workaround", "be", "to", "use", "TAG", "Content", "More", "Content", "data", "NUMBER", "myVar", "TAG", "and", "then", "manually", "remove", "both", "divs", "from", "the", "output", "string", "NUMBER", "the", "latest", "from", "npm", "NUMBER", "NUMBER", "Perfect", "now", "it", "works", "flawlessly", "NUMBER", "I", "guess", "the", "code", "generator", "NUMBER", "js", "was", "the", "miss", "puzzle", "piece", "Thx", "for", "the", "help", "and", "your", "still", "very", "quick", "response", "NUMBER", "Highly", "appreciated", "NUMBER", "And", "yes", "it", "works", "for", "v", "NUMBER", "too", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "b", "NUMBER", "eed", "NUMBER", "d", "NUMBER", "beb", "NUMBER", "f", "NUMBER", "ef", "NUMBER", "on", "austinkelleher", "NUMBER", "for", "map", "into", "b", "NUMBER", "d", "NUMBER", "b", "NUMBER", "cb", "NUMBER", "c", "NUMBER", "b", "NUMBER", "d", "NUMBER", "e", "NUMBER", "be", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "b", "NUMBER", "f", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "b", "NUMBER", "eed", "NUMBER", "d", "NUMBER", "beb", "NUMBER", "f", "NUMBER", "ef", "NUMBER", "on", "austinkelleher", "NUMBER", "for", "map", "into", "b", "NUMBER", "d", "NUMBER", "b", "NUMBER", "cb", "NUMBER", "c", "NUMBER", "b", "NUMBER", "d", "NUMBER", "e", "NUMBER", "be", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "b", "NUMBER", "f", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "b", "NUMBER", "eed", "NUMBER", "d", "NUMBER", "beb", "NUMBER", "f", "NUMBER", "ef", "NUMBER", "on", "austinkelleher", "NUMBER", "for", "map", "into", "b", "NUMBER", "d", "NUMBER", "b", "NUMBER", "cb", "NUMBER", "c", "NUMBER", "b", "NUMBER", "d", "NUMBER", "e", "NUMBER", "be", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "b", "NUMBER", "f", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "TAG", "New", "Feature", "Description", "There", "be", "NUMBER", "use", "cases", "for", "this", "NUMBER", "People", "who", "want", "to", "primarily", "use", "React", "but", "want", "to", "have", "some", "perhaps", "presentational", "only", "components", "write", "in", "marko", "NUMBER", "NUMBER", "People", "who", "use", "primarily", "marko", "template", "but", "want", "to", "use", "React", "i", "NUMBER", "e", "NUMBER", "render", "React", "components", "in", "some", "dynamic", "pages", "this", "be", "marko", "widget", "s", "use", "case", "but", "let", "s", "say", "that", "a", "hype", "driven", "tech", "lead", "wants", "React", "for", "dynamic", "stuff", "by", "all", "means", "necessary", "NUMBER", "Context", "NUMBER", "We", "need", "an", "easy", "to", "use", "template", "system", "as", "we", "have", "freelancers", "churning", "out", "new", "template", "that", "come", "and", "go", "every", "once", "in", "a", "while", "NUMBER", "Here", "marko", "seems", "like", "a", "good", "fit", "NUMBER", "NUMBER", "Static", "parts", "need", "to", "be", "easily", "integrated", "with", "non", "React", "JS", "libraries", "like", "jQuery", "NUMBER", "Dynamic", "parts", "be", "write", "in", "React", "NUMBER", "NUMBER", "The", "team", "has", "invested", "quite", "a", "bit", "in", "the", "React", "ecosystem", "so", "we", "be", "not", "keen", "on", "introduce", "something", "like", "marko", "widgets", "NUMBER", "NUMBER", "We", "be", "concerned", "with", "the", "performance", "of", "server", "side", "React", "rendering", "NUMBER", "From", "reasons", "above", "react", "template", "LINK", "template", "almost", "made", "it", "but", "not", "quite", "mainly", "due", "to", "reasons", "NUMBER", "and", "NUMBER", "NUMBER", "After", "this", "marko", "users", "can", "also", "tap", "into", "the", "larger", "React", "ecosystem", "for", "things", "like", "integration", "off", "the", "shelf", "components", "NUMBER", "Possible", "Implementation", "The", "NUMBER", "use", "cases", "boils", "down", "to", "these", "requirements", "NUMBER", "Render", "React", "components", "in", "marko", "perhaps", "use", "taglib", "NUMBER", "e", "NUMBER", "g", "NUMBER", "TAG", "TAG", "TAG", "This", "react", "root", "should", "be", "able", "to", "have", "isomorphic", "universal", "rendering", "meaning", "it", "can", "gain", "the", "ability", "to", "be", "re", "rendered", "client", "side", "if", "the", "developer", "chooses", "to", "include", "react", "on", "client", "side", "NUMBER", "NUMBER", "Render", "marko", "components", "as", "React", "components", "NUMBER", "e", "NUMBER", "g", "NUMBER", "in", "JSX", "TAG", "TAG", "TAG", "Both", "seems", "very", "doable", "to", "me", "but", "would", "like", "some", "input", "on", "potential", "headaches", "NUMBER", "NUMBER", "This", "can", "should", "be", "an", "optional", "module", "custom", "taglib", "NUMBER", "NUMBER", "Each", "TAG", "tag", "can", "live", "as", "a", "separate", "React", "root", "NUMBER", "Most", "SPAs", "only", "have", "one", "root", "that", "renders", "the", "whole", "page", "but", "this", "usually", "won", "t", "be", "the", "case", "if", "rendering", "starts", "from", "marko", "NUMBER", "Open", "Questions", "NUMBER", "Do", "we", "need", "to", "handle", "children", "tags", "inside", "template", "the", "content", "inside", "MarkoTemplate", "NUMBER", "Need", "to", "figure", "out", "how", "to", "use", "singleton", "store", "redux", "etc", "for", "multiple", "React", "roots", "NUMBER", "NUMBER", "Building", "SPAs", "will", "be", "difficult", "if", "we", "have", "multiple", "react", "roots", "in", "a", "page", "but", "this", "may", "be", "a", "concern", "more", "for", "React", "and", "not", "for", "marko", "NUMBER", "Is", "this", "something", "you", "re", "interested", "in", "work", "on", "Yes", "I", "think", "the", "best", "solution", "long", "term", "would", "be", "to", "have", "Marko", "have", "seamless", "interoperability", "with", "custom", "elements", "NUMBER", "That", "way", "react", "mithril", "any", "library", "will", "be", "able", "to", "work", "without", "any", "extra", "work", "from", "marko", "NUMBER", "For", "research", "server", "components", "LINK", "components", "has", "do", "some", "work", "in", "this", "area", "NUMBER", "Thanks", "for", "the", "inputs", "NUMBER", "I", "believe", "v", "NUMBER", "be", "just", "around", "the", "corner", "looking", "at", "the", "beta", "release", "come", "out", "these", "few", "days", "It", "s", "possible", "to", "translate", "a", "rendered", "Marko", "VDOM", "tree", "to", "a", "React", "VDOM", "tree", "with", "a", "performance", "hit", "via", "tree", "traversal", "of", "the", "Marko", "VDOM", "output", "This", "be", "what", "I", "pondered", "on", "as", "well", "there", "be", "something", "similar", "for", "handlebars", "LINK", "react", "I", "don", "t", "know", "much", "about", "marko", "internals", "but", "maybe", "translating", "parsed", "AST", "to", "React", "VDOM", "directly", "can", "be", "a", "better", "approach", "Alternatively", "a", "Marko", "component", "can", "be", "rendered", "and", "mounted", "during", "the", "componentDidUpdate", "lifecycle", "method", "client", "side", "only", "CMIIW", "but", "I", "think", "if", "we", "render", "a", "new", "react", "root", "in", "componentDidUpdate", "the", "VDOM", "diffing", "would", "never", "work", "because", "it", "be", "a", "fresh", "re", "render", "each", "time", "NUMBER", "This", "should", "be", "much", "simpler", "to", "implement", "though", "as", "compared", "to", "VDOM", "translation", "NUMBER", "New", "Feature", "Description", "var", "str", "__helpers", "NUMBER", "s", "NUMBER", "cv", "NUMBER", "beta", "NUMBER", "Context", "Sometimes", "it", "s", "difficult", "to", "determine", "which", "compiler", "version", "output", "the", "NUMBER", "js", "on", "disk", "ie", "command", "line", "compiler", "marko", "loader", "etc", "NUMBER", "This", "be", "a", "possible", "enhancement", "to", "aid", "in", "debugging", "perhaps", "sometimes", "you", "need", "bug", "report", "of", "send", "me", "template", "NUMBER", "marko", "and", "template", "NUMBER", "marko", "NUMBER", "js", "and", "it", "d", "be", "nice", "to", "know", "how", "template", "NUMBER", "marko", "NUMBER", "js", "was", "transformed", "NUMBER", "Drawback", "be", "an", "increase", "in", "filesize", "per", "template", "NUMBER", "marko", "NUMBER", "js", "over", "a", "project", "w", "NUMBER", "template", "could", "be", "NUMBER", "bytes", "although", "very", "likely", "they", "would", "gzip", "well", "since", "all", "would", "be", "identical", "NUMBER", "in", "addition", "add", "version", "v", "support", "to", "markoc", "command", "Currently", "devDependencies", "marko", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "defaaf", "NUMBER", "ea", "NUMBER", "f", "NUMBER", "a", "NUMBER", "d", "NUMBER", "ab", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "c", "on", "Hesulan", "issue", "NUMBER", "into", "NUMBER", "f", "NUMBER", "e", "NUMBER", "f", "NUMBER", "bd", "NUMBER", "b", "NUMBER", "d", "NUMBER", "bfa", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "defaaf", "NUMBER", "ea", "NUMBER", "f", "NUMBER", "a", "NUMBER", "d", "NUMBER", "ab", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "c", "on", "Hesulan", "issue", "NUMBER", "into", "NUMBER", "f", "NUMBER", "e", "NUMBER", "f", "NUMBER", "bd", "NUMBER", "b", "NUMBER", "d", "NUMBER", "bfa", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "The", "widget", "runtime", "uses", "a", "custom", "NUMBER", "concat", "method", "but", "the", "native", "array", "NUMBER", "concat", "method", "returns", "a", "new", "array", "without", "modifying", "the", "original", "which", "results", "in", "window", "NUMBER", "widgets", "be", "an", "empty", "array", "and", "the", "init", "code", "be", "lost", "if", "the", "widgets", "be", "initialized", "before", "the", "runtime", "registers", "its", "custom", "method", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "eedac", "NUMBER", "e", "NUMBER", "dcf", "NUMBER", "bd", "NUMBER", "ff", "NUMBER", "ddb", "NUMBER", "c", "NUMBER", "ec", "NUMBER", "on", "Hesulan", "async", "widget", "bug", "into", "NUMBER", "fceecce", "NUMBER", "f", "NUMBER", "bd", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ed", "NUMBER", "efe", "NUMBER", "f", "NUMBER", "bb", "NUMBER", "f", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Does", "this", "mean", "getRenderedWidgetIds", "will", "deprecate", "after", "NUMBER", "Which", "function", "can", "replace", "it", "then", "Thanks", "NUMBER", "TAG", "Description", "TAG", "Minor", "update", "to", "documentation", "NUMBER", "Adding", "VSCode", "s", "syntax", "highlighter", "NUMBER", "Motivation", "and", "Context", "TAG", "TAG", "Screenshots", "if", "appropriate", "Checklist", "TAG", "TAG", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "ea", "NUMBER", "d", "NUMBER", "e", "NUMBER", "e", "NUMBER", "f", "NUMBER", "d", "NUMBER", "add", "NUMBER", "f", "NUMBER", "abbcd", "NUMBER", "ee", "NUMBER", "fe", "on", "johnjv", "vscode", "ext", "into", "fae", "NUMBER", "bfb", "NUMBER", "edaf", "NUMBER", "f", "NUMBER", "ff", "NUMBER", "e", "NUMBER", "aa", "NUMBER", "on", "marko", "js", "master", "NUMBER", "TAG", "Bug", "Report", "Context", "I", "be", "trying", "to", "use", "a", "dynamic", "expression", "to", "set", "an", "html", "tag", "NUMBER", "The", "compiled", "code", "seems", "to", "be", "slightly", "incorrect", "resulting", "in", "mangled", "html", "NUMBER", "My", "marko", "looks", "like", "add", "parenthesis", "here", "doesn", "t", "help", "TAG", "Expected", "Behavior", "Compiled", "output", "should", "be", "out", "NUMBER", "w", "TAG", "Actual", "Behavior", "Compiled", "output", "be", "out", "NUMBER", "w", "TAG", "TAG", "mlrawlings", "Thanks", "for", "the", "quick", "fix", "Hello", "Destructing", "import", "like", "following", "compiles", "correctly", "html", "TAG", "results", "to", "following", "javascript", "fs", "require", "fs", "readFileSync", "fs", "NUMBER", "readFileSync", "However", "destructing", "imports", "like", "html", "TAG", "results", "in", "wrong", "compilation", "javascript", "asset", "require", "NUMBER", "NUMBER", "NUMBER", "shared", "marko", "asset", "asset", "NUMBER", "asset", "NUMBER", "asset", "Side", "note", "which", "version", "of", "Node", "Marko", "NUMBER", "be", "targeting", "Why", "not", "current", "LTS", "Node", "NUMBER", "and", "just", "keep", "destruction", "intact", "as", "well", "as", "use", "const", "instead", "of", "var", "tinovyatkin", "The", "compiler", "currently", "requires", "ES", "NUMBER", "Node", "NUMBER", "but", "all", "build", "in", "taglibs", "be", "currently", "designed", "to", "compile", "into", "ES", "NUMBER", "compatible", "code", "ES", "NUMBER", "tags", "may", "eventually", "be", "include", "if", "there", "s", "enough", "interest", "see", "NUMBER", "NUMBER", "This", "be", "so", "that", "template", "can", "be", "rendered", "in", "all", "modern", "browsers", "without", "needing", "to", "be", "transpiled", "NUMBER", "The", "asset", "NUMBER", "assignment", "be", "definitely", "an", "oversight", "it", "s", "supposed", "to", "prevent", "automate", "naming", "collisions", "but", "in", "this", "case", "appears", "to", "be", "renaming", "the", "wrong", "one", "NUMBER", "As", "far", "I", "see", "TAG", "compiles", "into", "require", "and", "it", "s", "no", "way", "browser", "compatible", "with", "our", "without", "destruction", "NUMBER", "And", "it", "s", "new", "tag", "so", "I", "think", "it", "s", "quite", "fair", "to", "require", "ES", "NUMBER", "for", "new", "tags", "without", "loosing", "any", "backward", "compatibility", "Plenty", "of", "modern", "client", "side", "code", "depends", "on", "a", "third", "party", "library", "like", "browserify", "to", "implement", "CommonJS", "require", "and", "Marko", "be", "no", "exception", "NUMBER", "In", "other", "words", "require", "most", "certainly", "be", "browser", "compatible", "NUMBER", "That", "be", "said", "I", "do", "like", "the", "idea", "of", "native", "ES", "NUMBER", "tags", "as", "long", "as", "they", "re", "opt", "in", "and", "clearly", "marked", "see", "NUMBER", "toward", "the", "end", "of", "the", "discussion", "NUMBER", "If", "anyone", "be", "interested", "let", "me", "know", "and", "we", "can", "discuss", "the", "details", "NUMBER", "Hesulan", "I", "m", "sorry", "to", "say", "but", "there", "be", "no", "logic", "to", "say", "can", "be", "rendered", "in", "all", "modern", "browsers", "without", "needing", "to", "be", "transpiled", "and", "then", "require", "most", "certainly", "be", "browser", "compatible", "NUMBER", "No", "it", "s", "not", "NUMBER", "There", "be", "no", "browser", "on", "the", "planet", "that", "understand", "require", "without", "transpilation", "compilation", "whatever", "you", "want", "to", "call", "it", "NUMBER", "So", "the", "question", "still", "remain", "why", "introduce", "new", "tag", "that", "have", "no", "way", "apart", "of", "static", "inlining", "to", "compile", "into", "ES", "NUMBER", "and", "attempt", "to", "compile", "it", "into", "ES", "NUMBER", "while", "you", "just", "may", "keep", "it", "as", "ES", "NUMBER", "node", "destruction", "tinovyatkin", "Marko", "and", "Marko", "Widgets", "run", "in", "the", "current", "version", "of", "all", "major", "browsers", "without", "any", "transpiling", "NUMBER", "While", "require", "certainly", "isn", "t", "native", "it", "s", "considered", "a", "dependency", "or", "at", "worst", "a", "polyfill", "NUMBER", "Native", "destructuring", "would", "require", "the", "entire", "file", "to", "be", "transpiled", "and", "there", "s", "no", "reason", "to", "do", "that", "here", "since", "the", "current", "ES", "NUMBER", "implementation", "already", "works", "perfectly", "aside", "from", "this", "bug", "NUMBER", "Don", "t", "get", "me", "wrong", "I", "m", "certainly", "not", "against", "ES", "NUMBER", "features", "in", "the", "core", "taglibs", "in", "fact", "if", "you", "look", "at", "the", "PR", "I", "linked", "to", "you", "ll", "see", "that", "I", "ve", "personally", "be", "work", "on", "exactly", "that", "NUMBER", "But", "TAG", "be", "a", "really", "useful", "tag", "for", "all", "environments", "and", "in", "this", "case", "the", "cost", "would", "far", "outweigh", "the", "gain", "NUMBER", "scttdavs", "Another", "option", "might", "be", "to", "use", "one", "of", "the", "reserved", "template", "variable", "names", "data", "or", "out", "to", "temporarily", "store", "each", "module", "js", "var", "data", "require", "asset", "var", "asset", "data", "NUMBER", "asset", "var", "data", "NUMBER", "If", "someone", "needs", "to", "TAG", "then", "they", "re", "probably", "doing", "something", "wrong", "since", "it", "will", "get", "overwritten", "by", "render", "data", "out", "anyway", "NUMBER", "If", "it", "s", "a", "vote", "I", "certainly", "hope", "Marko", "developers", "will", "decide", "to", "just", "keep", "destruction", "intact", "and", "document", "that", "fact", "NUMBER", "It", "s", "a", "shame", "that", "nowadays", "development", "frameworks", "sometimes", "trying", "to", "pretend", "they", "be", "for", "people", "who", "don", "t", "know", "how", "to", "code", "NUMBER", "You", "be", "introduce", "new", "tag", "with", "ES", "NUMBER", "like", "imports", "requiring", "Node", "NUMBER", "for", "compiler", "and", "trying", "to", "reinvent", "the", "wheel", "of", "destruction", "Why", "not", "TAG", "const", "asset", "require", "asset", "What", "exactly", "be", "bad", "with", "this", "approach", "to", "a", "new", "ES", "NUMBER", "like", "tag", "Marko", "be", "trying", "hard", "to", "make", "resulting", "NUMBER", "marko", "NUMBER", "js", "readable", "and", "introduce", "namespaces", "generate", "names", "etc", "no", "way", "helps", "that", "NUMBER", "It", "just", "occur", "to", "me", "that", "require", "be", "expected", "to", "cache", "loaded", "modules", "var", "foo", "require", "NUMBER", "foo", "NUMBER", "foo", "var", "bar", "require", "NUMBER", "foo", "NUMBER", "bar", "Not", "very", "pretty", "but", "perhaps", "more", "readable", "and", "definitely", "more", "collision", "proof", "NUMBER", "Thoughts", "patrick", "steele", "idem", "Good", "point", "NUMBER", "I", "don", "t", "think", "execution", "speed", "would", "really", "be", "a", "problem", "since", "all", "of", "this", "be", "happening", "once", "when", "the", "module", "be", "first", "loaded", "but", "minifying", "would", "be", "especially", "with", "lasso", "since", "the", "url", "becomes", "a", "lot", "longer", "NUMBER", "The", "_module", "suffix", "solution", "should", "work", "just", "fine", "as", "long", "as", "it", "s", "well", "documented", "NUMBER", "name", "test", "script", "NUMBER", "src", "test", "instances", "NUMBER", "exec_mode", "cluster", "watch", "true", "env", "INTERVAL", "NUMBER", "HOST", "NUMBER", "PORT", "NUMBER", "i", "have", "error", "Error", "Cannot", "find", "module", "marko", "khmelevskii", "Works", "for", "me", "NUMBER", "Are", "you", "still", "having", "this", "problem", "If", "so", "could", "you", "give", "more", "details", "I", "just", "experienced", "similar", "problem", "NUMBER", "Although", "my", "application", "runs", "under", "pm", "NUMBER", "it", "do", "not", "render", "the", "HTML", "properly", "NUMBER", "For", "the", "record", "I", "be", "requiring", "the", "module", "use", "require", "marko", "node", "require", "NUMBER", "install", "NUMBER", "No", "problem", "when", "starting", "the", "application", "with", "node", "app", "NUMBER", "js", "but", "with", "pm", "NUMBER", "the", "HTML", "do", "not", "get", "rendered", "anymore", "NUMBER", "Google", "Chrome", "doesn", "t", "even", "render", "the", "HTML", "but", "simply", "displays", "the", "raw", "HTML", "instead", "NUMBER", "If", "you", "need", "I", "could", "provide", "a", "more", "accurate", "description", "of", "what", "be", "happening", "but", "please", "specify", "what", "kind", "of", "details", "you", "would", "want", "NUMBER", "patrick", "steele", "idem", "Although", "the", "Content", "Type", "header", "was", "not", "the", "issue", "I", "can", "now", "confirm", "that", "my", "problem", "were", "separate", "from", "the", "issue", "discussed", "in", "the", "original", "ticket", "NUMBER", "My", "apologies", "for", "the", "inconvenience", "however", "I", "can", "now", "confirm", "that", "pm", "NUMBER", "do", "work", "with", "marko", "NUMBER", "I", "ve", "be", "use", "pm", "NUMBER", "successfully", "with", "both", "Marko", "v", "NUMBER", "and", "Marko", "v", "NUMBER", "latest", "beta", "without", "any", "problem", "NUMBER", "No", "problem", "here", "NUMBER", "include", "or", "new", "import", "syntax", "within", "this", "TAG", "will", "be", "very", "good", "addition", "too", "As", "well", "as", "an", "API", "for", "tag", "renderer", "to", "append", "anything", "to", "this", "like", "out", "NUMBER", "yles", "NUMBER", "append", "NUMBER", "test", "rule", "color", "red", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "aa", "NUMBER", "a", "NUMBER", "cd", "NUMBER", "be", "NUMBER", "on", "v", "NUMBER", "render", "to", "string", "into", "NUMBER", "c", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "NUMBER", "cd", "NUMBER", "d", "NUMBER", "b", "NUMBER", "fca", "NUMBER", "af", "NUMBER", "bd", "NUMBER", "ab", "on", "v", "NUMBER", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "eb", "NUMBER", "ab", "NUMBER", "c", "NUMBER", "a", "NUMBER", "d", "NUMBER", "f", "NUMBER", "bad", "NUMBER", "f", "NUMBER", "e", "NUMBER", "ada", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "e", "NUMBER", "a", "NUMBER", "b", "NUMBER", "f", "NUMBER", "a", "NUMBER", "facf", "NUMBER", "e", "NUMBER", "a", "NUMBER", "f", "NUMBER", "f", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "de", "NUMBER", "ca", "NUMBER", "c", "NUMBER", "c", "NUMBER", "f", "NUMBER", "ac", "NUMBER", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "dfe", "NUMBER", "d", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "b", "NUMBER", "f", "NUMBER", "da", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "dfe", "NUMBER", "d", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "b", "NUMBER", "f", "NUMBER", "da", "NUMBER", "b", "NUMBER", "ac", "NUMBER", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "db", "NUMBER", "fa", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "dec", "NUMBER", "a", "NUMBER", "a", "NUMBER", "bf", "NUMBER", "efb", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "db", "NUMBER", "fa", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "dec", "NUMBER", "a", "NUMBER", "a", "NUMBER", "bf", "NUMBER", "efb", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "on", "scttdavs", "import", "tag", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "e", "NUMBER", "c", "NUMBER", "b", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "The", "autotest", "compareHelper", "now", "normalizes", "the", "ending", "newline", "of", "both", "the", "expected", "and", "actual", "strings", "to", "avoid", "test", "failures", "when", "expected", "NUMBER", "be", "saved", "on", "a", "POSIX", "compliant", "non", "Windows", "OS", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "aacab", "NUMBER", "eb", "NUMBER", "bea", "NUMBER", "ea", "NUMBER", "df", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ea", "NUMBER", "cf", "NUMBER", "on", "Hesulan", "issue", "NUMBER", "into", "aa", "NUMBER", "d", "NUMBER", "aafb", "NUMBER", "dec", "NUMBER", "bd", "NUMBER", "e", "NUMBER", "e", "NUMBER", "d", "on", "marko", "js", "master", "NUMBER", "Description", "The", "autotests", "work", "correctly", "when", "the", "expected", "NUMBER", "file", "be", "created", "and", "saved", "on", "Windows", "NUMBER", "However", "Linux", "and", "OS", "X", "comply", "with", "POSIX", "which", "requires", "a", "proper", "ending", "newline", "n", "immediately", "followed", "by", "the", "EOF", "symbol", "NUMBER", "The", "produced", "actual", "NUMBER", "file", "doesn", "t", "have", "one", "which", "causes", "the", "autotests", "to", "fail", "NUMBER", "Possible", "Fix", "The", "autotest", "runner", "could", "simply", "ignore", "the", "presence", "or", "absence", "of", "an", "ending", "newline", "NUMBER", "Alternatively", "the", "rendered", "output", "could", "be", "made", "POSIX", "compliant", "by", "add", "a", "proper", "EOF", "newline", "but", "Windows", "displays", "it", "as", "a", "blank", "line", "and", "allows", "it", "to", "be", "remove", "which", "could", "lead", "to", "confusion", "NUMBER", "Steps", "to", "Reproduce", "NUMBER", "Open", "an", "expected", "NUMBER", "file", "from", "the", "autotest", "directory", "in", "any", "text", "editor", "NUMBER", "Do", "one", "of", "the", "following", "a", "NUMBER", "Linux", "or", "OS", "X", "Save", "the", "file", "with", "no", "change", "b", "NUMBER", "Windows", "Insert", "a", "blank", "newline", "at", "the", "end", "of", "the", "file", "and", "save", "the", "change", "NUMBER", "Run", "the", "test", "suite", "Example", "Saving", "test", "autotests", "render", "assign", "tag", "actual", "NUMBER", "html", "on", "Linux", "with", "no", "change", "and", "run", "npm", "test", "produces", "AssertionError", "HELLO", "NUMBER", "deepEqual", "HELLO", "NUMBER", "n", "What", "do", "Git", "have", "to", "say", "about", "all", "of", "this", "Git", "expects", "there", "to", "be", "an", "ending", "newline", "because", "there", "really", "should", "be", "and", "has", "to", "internally", "add", "No", "newline", "at", "end", "of", "file", "as", "a", "workaround", "shown", "by", "github", "as", "a", "red", "symbol", "on", "the", "last", "line", "go", "look", "at", "the", "commit", "diff", "for", "almost", "any", "file", "write", "on", "Windows", "you", "ll", "see", "what", "I", "mean", "NUMBER", "Workarounds", "The", "only", "workaround", "I", "can", "find", "be", "to", "delete", "the", "last", "line", "and", "use", "echo", "n", "NUMBER", "to", "reinsert", "it", "without", "a", "trail", "newline", "NUMBER", "I", "agree", "and", "I", "feel", "like", "r", "n", "n", "or", "r", "n", "would", "probably", "be", "safer", "NUMBER", "The", "only", "thing", "to", "keep", "in", "mind", "would", "be", "if", "something", "depends", "on", "there", "be", "a", "newline", "but", "that", "could", "simply", "add", "two", "newlines", "n", "n", "and", "only", "the", "second", "one", "would", "be", "remove", "NUMBER", "Description", "Docs", "on", "how", "to", "create", "a", "container", "template", "use", "TAG", "Motivation", "and", "Context", "Useful", "for", "other", "users", "NUMBER", "Checklist", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "c", "NUMBER", "c", "NUMBER", "a", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "f", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "on", "JeroenVdb", "master", "into", "NUMBER", "a", "NUMBER", "a", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cbb", "NUMBER", "cfb", "NUMBER", "cfeacbd", "NUMBER", "c", "NUMBER", "b", "NUMBER", "on", "marko", "js", "master", "NUMBER", "As", "discussed", "in", "NUMBER", "the", "Promises", "A", "specification", "explicitly", "defines", "NUMBER", "en", "as", "accepting", "at", "least", "two", "argument", "onResolved", "and", "onRejected", "NUMBER", "The", "NUMBER", "catch", "method", "be", "defined", "by", "ECMAScript", "for", "native", "implementations", "but", "third", "party", "libraries", "be", "under", "no", "obligation", "to", "include", "it", "though", "most", "do", "for", "convenience", "and", "compatibility", "NUMBER", "In", "the", "interest", "of", "caution", "this", "only", "calls", "NUMBER", "en", "undefined", "onRejected", "if", "neither", "NUMBER", "catch", "nor", "NUMBER", "fail", "be", "a", "function", "NUMBER", "However", "in", "my", "opinion", "it", "would", "be", "completely", "safe", "to", "remove", "those", "two", "calls", "altogether", "as", "any", "implementation", "which", "be", "even", "remotely", "compliant", "will", "handle", "this", "as", "expected", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "ee", "NUMBER", "fe", "NUMBER", "de", "NUMBER", "cc", "NUMBER", "e", "NUMBER", "bd", "NUMBER", "d", "NUMBER", "ae", "NUMBER", "on", "Hesulan", "issue", "NUMBER", "into", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "aba", "NUMBER", "ec", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "bf", "NUMBER", "fd", "NUMBER", "f", "NUMBER", "da", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "c", "NUMBER", "bdee", "NUMBER", "c", "on", "Hesulan", "issue", "NUMBER", "into", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "aba", "NUMBER", "ec", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "bf", "NUMBER", "fd", "NUMBER", "f", "NUMBER", "da", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "c", "NUMBER", "bdee", "NUMBER", "c", "on", "Hesulan", "issue", "NUMBER", "into", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "aba", "NUMBER", "ec", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "bf", "NUMBER", "fd", "NUMBER", "f", "NUMBER", "da", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "cbaac", "NUMBER", "dc", "NUMBER", "a", "NUMBER", "bb", "NUMBER", "dd", "NUMBER", "ae", "NUMBER", "a", "NUMBER", "a", "NUMBER", "ffa", "on", "render", "api", "into", "NUMBER", "ae", "NUMBER", "d", "NUMBER", "aba", "NUMBER", "ec", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "bf", "NUMBER", "fd", "NUMBER", "f", "NUMBER", "da", "on", "master", "NUMBER", "Doesn", "t", "this", "cause", "finish", "to", "return", "a", "new", "RenderResult", "make", "the", "self", "NUMBER", "on", "finish", "function", "resolve", "new", "RenderResult", "out", "redundant", "Either", "way", "looks", "great", "to", "me", "I", "ll", "look", "a", "bit", "closer", "tomorrow", "just", "to", "be", "sure", "but", "I", "believe", "this", "should", "work", "perfectly", "at", "least", "concerning", "Promise", "compliance", "NUMBER", "In", "other", "words", "wouldn", "t", "self", "NUMBER", "on", "finish", "resolve", "do", "the", "same", "thing", "Or", "I", "might", "just", "have", "mis", "read", "something", "NUMBER", "Nevermind", "was", "half", "asleep", "when", "I", "typed", "that", "I", "did", "mis", "read", "something", "NUMBER", "Just", "skimmed", "over", "the", "code", "again", "it", "all", "looks", "good", "to", "me", "I", "finally", "get", "around", "to", "looking", "at", "the", "newly", "add", "NUMBER", "en", "method", "from", "NUMBER", "and", "it", "turns", "out", "that", "it", "s", "nowhere", "near", "spec", "compliant", "attempting", "to", "call", "NUMBER", "catch", "causes", "an", "error", "to", "be", "throw", "TypeError", "fn", "be", "not", "a", "function", "referring", "to", "the", "undefined", "pass", "as", "the", "first", "argument", "to", "NUMBER", "en", "fn", "fnErr", "the", "handlers", "be", "call", "synchronously", "and", "NUMBER", "en", "itself", "ceases", "to", "function", "properly", "once", "the", "stream", "be", "finished", "subsequent", "calls", "return", "a", "Promise", "resolve", "with", "undefined", "NUMBER", "There", "be", "only", "NUMBER", "possible", "solutions", "I", "can", "think", "of", "NUMBER", "Let", "NUMBER", "en", "be", "non", "compliant", "NUMBER", "It", "will", "only", "work", "if", "call", "before", "the", "stream", "be", "finished", "among", "other", "things", "NUMBER", "NUMBER", "Attach", "a", "Promise", "instance", "to", "the", "stream", "regardless", "of", "whether", "NUMBER", "en", "be", "ever", "call", "or", "not", "NUMBER", "The", "renderer", "would", "then", "always", "require", "a", "native", "or", "polyfilled", "Promise", "implementation", "even", "if", "NUMBER", "en", "be", "never", "actually", "use", "NUMBER", "NUMBER", "Write", "a", "partial", "Promise", "implementation", "directly", "into", "the", "renderer", "NUMBER", "I", "could", "do", "this", "if", "needed", "but", "it", "would", "probably", "be", "better", "to", "simply", "require", "a", "native", "or", "polyfilled", "implementation", "NUMBER", "EDIT", "It", "seems", "I", "was", "mistaken", "about", "it", "ceasing", "to", "function", "after", "finish", "be", "call", "though", "it", "doesn", "t", "quite", "appear", "to", "function", "correctly", "in", "the", "first", "place", "NUMBER", "EDIT", "NUMBER", "I", "m", "actually", "get", "all", "sorts", "of", "weird", "problem", "from", "this", "code", "and", "I", "m", "not", "entirely", "sure", "what", "s", "cause", "most", "of", "them", "NUMBER", "In", "case", "someone", "else", "wants", "to", "take", "a", "stab", "at", "it", "here", "s", "a", "spec", "compliant", "solution", "but", "it", "cause", "the", "test", "suite", "to", "throw", "an", "out", "of", "memory", "error", "when", "I", "tried", "it", "js", "then", "function", "fn", "fnErr", "var", "self", "this", "return", "new", "Promise", "function", "resolve", "reject", "self", "NUMBER", "on", "error", "reject", "self", "NUMBER", "on", "finish", "resolve", "NUMBER", "en", "fn", "fnErr", "So", "I", "just", "now", "realized", "why", "that", "was", "throw", "an", "error", "The", "stream", "itself", "be", "be", "pass", "to", "finish", "which", "be", "then", "pass", "to", "resolve", "which", "attempts", "to", "call", "the", "stream", "s", "NUMBER", "en", "method", "which", "leads", "to", "an", "infinite", "loop", "NUMBER", "It", "needs", "to", "instead", "pass", "the", "result", "string", "to", "resolve", "but", "the", "test", "suite", "currently", "depends", "on", "the", "resolve", "value", "be", "the", "stream", "itself", "which", "definitely", "violates", "the", "Promises", "A", "spec", "since", "the", "stream", "be", "a", "thenable", "NUMBER", "In", "other", "words", "the", "test", "need", "to", "be", "rewritten", "NUMBER", "Then", "the", "above", "solution", "with", "self", "NUMBER", "on", "finish", "function", "data", "resolve", "data", "NUMBER", "getOutput", "instead", "of", "self", "NUMBER", "on", "finish", "resolve", "should", "work", "perfectly", "NUMBER", "I", "m", "pretty", "sure", "it", "s", "data", "NUMBER", "getOutput", "but", "double", "check", "that", "NUMBER", "I", "won", "t", "get", "the", "chance", "to", "do", "that", "tonight", "or", "probably", "tomorrow", "either", "so", "if", "anyone", "else", "would", "like", "to", "do", "the", "honors", "be", "my", "guest", "NUMBER", "If", "not", "I", "ll", "hopefully", "get", "to", "it", "this", "week", "NUMBER", "If", "the", "point", "be", "to", "get", "the", "stream", "itself", "when", "it", "s", "do", "rendering", "then", "doesn", "t", "NUMBER", "on", "finish", "already", "pretty", "much", "do", "that", "Both", "in", "theory", "and", "practice", "the", "point", "of", "Promises", "has", "always", "be", "to", "handle", "a", "single", "immutable", "result", "or", "error", "the", "same", "way", "regardless", "of", "whether", "it", "be", "know", "yet", "or", "not", "NUMBER", "In", "this", "case", "I", "feel", "that", "would", "be", "the", "resulting", "string", "NUMBER", "In", "other", "words", "it", "seems", "to", "me", "that", "NUMBER", "render", "NUMBER", "en", "should", "behave", "like", "NUMBER", "renderSync", "but", "allowing", "for", "asynchronous", "values", "within", "the", "template", "NUMBER", "Either", "way", "for", "a", "thenable", "to", "be", "pass", "to", "the", "first", "callback", "given", "to", "NUMBER", "en", "explicitly", "defies", "the", "core", "of", "what", "a", "javascript", "Promise", "be", "NUMBER", "A", "separate", "non", "thenable", "version", "of", "the", "stream", "like", "what", "you", "describe", "would", "be", "the", "only", "acceptable", "way", "to", "do", "that", "NUMBER", "Hm", "NUMBER", "Somehow", "didn", "t", "notice", "that", "NUMBER", "renderSync", "now", "returns", "a", "stream", "too", "NUMBER", "In", "that", "case", "this", "either", "needs", "to", "pass", "around", "a", "non", "thenable", "version", "of", "the", "stream", "or", "not", "be", "named", "NUMBER", "en", "NUMBER", "What", "if", "we", "were", "to", "simply", "rename", "NUMBER", "en", "The", "only", "real", "problem", "here", "aside", "from", "the", "broken", "NUMBER", "catch", "method", "be", "that", "we", "re", "passing", "an", "object", "the", "stream", "with", "a", "NUMBER", "en", "method", "to", "the", "NUMBER", "en", "callback", "which", "explicitly", "violates", "the", "specification", "NUMBER", "But", "if", "it", "were", "named", "something", "else", "like", "NUMBER", "promisify", "NUMBER", "and", "or", "literally", "anything", "other", "than", "NUMBER", "en", "or", "NUMBER", "catch", "then", "my", "example", "from", "Edit", "NUMBER", "in", "the", "original", "post", "would", "work", "perfectly", "as", "be", "NUMBER", "Fixed", "in", "NUMBER", "Thanks", "I", "m", "not", "sure", "I", "understand", "NUMBER", "It", "sounds", "like", "you", "re", "saying", "this", "would", "cause", "bar", "marko", "NUMBER", "json", "and", "NUMBER", "other", "marko", "NUMBER", "json", "to", "behave", "as", "though", "they", "were", "directly", "write", "in", "the", "root", "marko", "NUMBER", "json", "correct", "What", "would", "that", "affect", "Bundling", "Module", "loading", "In", "other", "words", "could", "you", "give", "an", "example", "use", "case", "from", "the", "end", "user", "s", "perspective", "I", "can", "t", "see", "any", "reason", "not", "to", "implement", "this", "I", "m", "just", "a", "little", "unclear", "on", "the", "motivation", "to", "do", "so", "NUMBER", "Ah", "makes", "sense", "NUMBER", "I", "would", "suggest", "either", "include", "s", "or", "import", "s", "the", "word", "extend", "doesn", "t", "sound", "quite", "right", "for", "what", "this", "would", "be", "doing", "NUMBER", "While", "digging", "around", "in", "the", "compiler", "just", "now", "I", "notice", "that", "some", "of", "the", "code", "be", "not", "Promises", "A", "compliant", "specifically", "the", "TAG", "tag", "NUMBER", "These", "be", "mostly", "edge", "cases", "and", "will", "probably", "never", "break", "anything", "but", "here", "s", "what", "I", "find", "The", "promise", "resolution", "procedure", "must", "only", "access", "the", "NUMBER", "en", "property", "once", "NUMBER", "So", "instead", "of", "if", "typeof", "promise", "NUMBER", "en", "function", "promise", "NUMBER", "en", "NUMBER", "it", "should", "use", "var", "then", "promise", "NUMBER", "en", "if", "typeof", "then", "function", "then", "NUMBER", "call", "promise", "NUMBER", "If", "attempting", "to", "retrieve", "the", "NUMBER", "en", "property", "throw", "an", "error", "then", "the", "error", "must", "be", "caught", "and", "the", "resulting", "promise", "must", "be", "rejected", "with", "the", "error", "as", "the", "reason", "NUMBER", "It", "currently", "isn", "t", "be", "caught", "NUMBER", "The", "NUMBER", "catch", "onRejected", "method", "be", "neither", "defined", "nor", "required", "by", "the", "specification", "it", "s", "simply", "a", "convenient", "alias", "for", "NUMBER", "en", "null", "onRejected", "which", "most", "promise", "implementations", "choose", "to", "provide", "NUMBER", "Those", "be", "just", "the", "things", "I", "happened", "to", "remember", "there", "be", "probably", "a", "few", "other", "technicalities", "that", "I", "ve", "forgotten", "about", "since", "I", "last", "read", "through", "the", "spec", "NUMBER", "I", "ll", "try", "to", "work", "on", "this", "when", "I", "get", "the", "chance", "but", "until", "then", "I", "thought", "I", "should", "post", "this", "somewhere", "NUMBER", "I", "ll", "also", "keep", "an", "eye", "out", "for", "other", "places", "in", "the", "code", "that", "might", "handle", "Promises", "incorrectly", "and", "add", "them", "here", "NUMBER", "Promises", "A", "Specification", "LINK", "This", "also", "raises", "an", "interesting", "question", "Should", "Marko", "actually", "be", "trying", "to", "handle", "Promise", "resolution", "directly", "or", "would", "it", "be", "better", "to", "rely", "on", "a", "native", "polyfilled", "Promise", "implementation", "It", "looks", "like", "that", "s", "what", "NUMBER", "be", "currently", "doing", "NUMBER", "If", "Marko", "be", "to", "handle", "thenables", "directly", "then", "I", "would", "be", "in", "favor", "of", "add", "a", "common", "helper", "utility", "for", "it", "which", "would", "essentially", "be", "a", "build", "in", "polyfill", "so", "that", "each", "tag", "or", "feature", "which", "needs", "to", "handle", "Promise", "resolution", "won", "t", "end", "up", "re", "implement", "their", "own", "non", "compliant", "handle", "code", "NUMBER", "I", "have", "enough", "experience", "write", "spec", "compliant", "thenables", "to", "do", "that", "but", "I", "would", "much", "prefer", "letting", "a", "dedicated", "Promise", "implementation", "handle", "it", "NUMBER", "Quick", "update", "Since", "NUMBER", "only", "applies", "when", "the", "user", "explicitly", "calls", "the", "NUMBER", "en", "method", "it", "s", "considered", "a", "special", "case", "NUMBER", "The", "TAG", "tag", "however", "needs", "to", "be", "usable", "in", "pre", "ES", "NUMBER", "environments", "which", "leaves", "either", "a", "build", "in", "polyfill", "or", "just", "more", "compliant", "handle", "code", "as", "the", "only", "options", "NUMBER", "However", "I", "ve", "also", "notice", "one", "other", "issue", "The", "TAG", "tag", "currently", "accepts", "either", "a", "value", "a", "Promise", "or", "a", "node", "style", "function", "last", "argument", "be", "an", "error", "first", "callback", "NUMBER", "I", "ll", "continue", "work", "on", "this", "under", "the", "assumption", "that", "we", "want", "the", "TAG", "tag", "to", "continue", "to", "handle", "node", "style", "function", "but", "be", "aware", "that", "this", "behavior", "defies", "the", "Promises", "A", "specification", "NUMBER", "I", "m", "basing", "these", "comments", "solely", "on", "the", "Promises", "A", "specification", "which", "defines", "the", "behavior", "and", "requirements", "of", "the", "NUMBER", "en", "method", "common", "to", "all", "implementations", "NUMBER", "ECMAScript", "defines", "the", "NUMBER", "catch", "method", "for", "native", "implementations", "but", "libraries", "have", "no", "obligation", "whatsoever", "to", "include", "it", "NUMBER", "The", "second", "argument", "to", "NUMBER", "en", "however", "be", "explicitly", "defined", "and", "must", "be", "support", "by", "all", "implementations", "NUMBER", "The", "NUMBER", "en", "only", "be", "accessed", "once", "be", "a", "subtle", "requirement", "I", "wouldn", "t", "have", "even", "know", "about", "it", "if", "not", "for", "the", "promises", "aplus", "test", "package", "NUMBER", "To", "be", "honest", "it", "probably", "won", "t", "ever", "affect", "anything", "NUMBER", "Currently", "if", "attempting", "to", "access", "NUMBER", "en", "throw", "an", "error", "it", "be", "simply", "throw", "NUMBER", "It", "should", "instead", "cause", "the", "resulting", "Promise", "to", "be", "rejected", "NUMBER", "The", "Promises", "A", "specification", "explicitly", "defines", "how", "to", "resolve", "an", "object", "or", "function", "the", "await", "tag", "resolve", "function", "in", "a", "non", "compliant", "way", "NUMBER", "I", "believe", "the", "inconsistency", "be", "acceptable", "as", "long", "as", "users", "be", "aware", "of", "it", "I", "just", "felt", "it", "was", "worth", "mentioning", "NUMBER", "Ultimately", "the", "change", "I", "m", "proposing", "would", "only", "really", "affect", "edge", "cases", "like", "weird", "but", "still", "compliant", "implementations", "that", "don", "t", "have", "a", "NUMBER", "catch", "method", "or", "can", "t", "handle", "synchronously", "throw", "error", "NUMBER", "I", "suppose", "most", "of", "those", "technicalities", "likely", "won", "t", "ever", "affect", "anything", "so", "as", "long", "as", "the", "test", "cases", "be", "fairly", "thorough", "we", "should", "be", "fine", "NUMBER", "Though", "I", "do", "still", "suggest", "relying", "on", "the", "second", "argument", "to", "NUMBER", "en", "as", "it", "s", "explicitly", "defined", "and", "use", "by", "every", "implementation", "that", "s", "even", "remotely", "compliant", "while", "NUMBER", "catch", "be", "completely", "optional", "for", "third", "party", "libraries", "NUMBER", "The", "rest", "of", "it", "we", "can", "probably", "just", "leave", "as", "be", "as", "long", "as", "we", "acknowledge", "that", "it", "s", "not", "technically", "spec", "compliant", "NUMBER", "Open", "Questions", "What", "version", "of", "the", "browser", "support", "cheft", "None", "of", "the", "build", "in", "tags", "currently", "generate", "anything", "above", "ES", "NUMBER", "You", "can", "find", "a", "detailed", "compatibility", "table", "for", "all", "major", "browsers", "here", "LINK", "table", "es", "NUMBER", "NUMBER", "The", "compiler", "currently", "requires", "at", "least", "partial", "ES", "NUMBER", "support", "Node", "NUMBER", "js", "NUMBER", "NUMBER", "If", "you", "re", "not", "already", "compile", "your", "template", "_before_", "sending", "them", "to", "the", "browser", "you", "really", "should", "NUMBER", "The", "renderer", "runs", "in", "all", "modern", "browsers", "if", "you", "need", "to", "support", "older", "browsers", "like", "IE", "NUMBER", "you", "will", "need", "to", "transpile", "the", "renderer", "and", "the", "compiled", "NUMBER", "marko", "NUMBER", "js", "template", "with", "Babel", "LINK", "before", "serving", "them", "to", "the", "client", "NUMBER", "I", "like", "this", "idea", "and", "I", "believe", "I", "ve", "find", "a", "simple", "way", "to", "implement", "it", "TAG", "TAG", "TAG", "console", "NUMBER", "log", "async", "tag", "fail", "TAG", "TAG", "TAG", "That", "works", "correctly", "with", "or", "without", "client", "reorder", "NUMBER", "This", "be", "just", "a", "proof", "of", "concept", "we", "would", "want", "to", "implement", "something", "like", "it", "directly", "in", "the", "renderer", "code", "and", "pass", "the", "actual", "error", "message", "through", "NUMBER", "Interesting", "I", "like", "it", "I", "m", "still", "a", "little", "fuzzy", "on", "a", "few", "of", "the", "details", "though", "I", "m", "also", "reading", "this", "on", "my", "phone", "and", "half", "asleep", "NUMBER", "It", "s", "be", "a", "long", "day", "NUMBER", "I", "especially", "like", "the", "syntax", "NUMBER", "TAG", "TAG", "would", "be", "fine", "with", "me", "if", "get", "the", "parser", "to", "accept", "TAG", "TAG", "be", "a", "lot", "of", "work", "NUMBER", "It", "looks", "like", "the", "TAG", "tag", "combined", "with", "tags", "should", "be", "able", "to", "do", "everything", "the", "layout", "taglib", "do", "and", "more", "if", "so", "then", "I", "d", "have", "no", "problem", "with", "it", "be", "deprecate", "in", "favor", "of", "this", "once", "it", "s", "fully", "implement", "NUMBER", "Would", "there", "ever", "be", "a", "situation", "where", "the", "target", "parent", "of", "the", "nested", "tag", "could", "be", "ambiguous", "If", "not", "then", "I", "can", "t", "see", "any", "reason", "not", "to", "deprecate", "the", "old", "syntax", "NUMBER", "In", "other", "words", "be", "there", "any", "situations", "where", "error", "could", "mean", "either", "await", "error", "or", "something", "else", "error", "I", "can", "t", "think", "of", "any", "but", "it", "s", "worth", "ask", "NUMBER", "Hmm", "that", "s", "a", "good", "question", "NUMBER", "what", "about", "a", "slightly", "different", "syntax", "for", "one", "of", "the", "two", "conditions", "Nested", "tags", "that", "can", "be", "defined", "multiple", "times", "could", "use", "TAG", "while", "single", "instance", "tags", "could", "use", "something", "like", "TAG", "or", "vice", "versa", "NUMBER", "Description", "js", "var", "template", "require", "some", "NUMBER", "marko", "template", "NUMBER", "ream", "exception", "on", "line", "NUMBER", "of", "runtime", "marko", "runtime", "NUMBER", "js", "Motivation", "and", "Context", "Fixes", "a", "runtime", "exception", "when", "streaming", "without", "provide", "a", "data", "context", "NUMBER", "I", "would", "provide", "a", "test", "for", "this", "but", "I", "can", "t", "find", "where", "it", "would", "go", "or", "any", "test", "that", "resemble", "the", "case", "to", "emulate", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "ed", "NUMBER", "f", "NUMBER", "e", "NUMBER", "c", "NUMBER", "cada", "NUMBER", "ccb", "NUMBER", "ab", "NUMBER", "e", "NUMBER", "on", "jsumners", "empty", "data", "into", "NUMBER", "c", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "ed", "NUMBER", "f", "on", "marko", "js", "v", "NUMBER", "NUMBER", "austinkelleher", "thanks", "NUMBER", "I", "add", "the", "test", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "ba", "NUMBER", "d", "NUMBER", "aabb", "NUMBER", "b", "NUMBER", "fd", "NUMBER", "d", "NUMBER", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "on", "jsumners", "empty", "data", "into", "NUMBER", "c", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "ed", "NUMBER", "f", "on", "marko", "js", "v", "NUMBER", "NUMBER", "austinkelleher", "I", "write", "this", "against", "the", "v", "NUMBER", "branch", "NUMBER", "It", "be", "a", "bug", "that", "be", "impacting", "my", "current", "usage", "of", "Marko", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "dd", "NUMBER", "d", "NUMBER", "f", "NUMBER", "a", "NUMBER", "d", "NUMBER", "f", "NUMBER", "d", "NUMBER", "f", "NUMBER", "on", "jsumners", "empty", "data", "into", "NUMBER", "c", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "ed", "NUMBER", "f", "on", "marko", "js", "v", "NUMBER", "NUMBER", "mlrawlings", "thank", "you", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "b", "NUMBER", "cfd", "NUMBER", "e", "NUMBER", "ef", "NUMBER", "c", "NUMBER", "d", "NUMBER", "on", "charlieduong", "NUMBER", "NUMBER", "deprecate", "w", "on", "attr", "into", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "d", "NUMBER", "a", "NUMBER", "a", "NUMBER", "bbac", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "b", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "ace", "NUMBER", "f", "NUMBER", "b", "NUMBER", "fe", "NUMBER", "b", "NUMBER", "on", "charlieduong", "NUMBER", "NUMBER", "deprecate", "w", "on", "attr", "into", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "d", "NUMBER", "a", "NUMBER", "a", "NUMBER", "bbac", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "cfc", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "d", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "a", "NUMBER", "d", "NUMBER", "on", "charlieduong", "NUMBER", "NUMBER", "deprecate", "w", "on", "attr", "into", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "d", "NUMBER", "a", "NUMBER", "a", "NUMBER", "bbac", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "e", "NUMBER", "ab", "NUMBER", "f", "NUMBER", "a", "NUMBER", "f", "NUMBER", "de", "NUMBER", "aef", "NUMBER", "bfedbf", "NUMBER", "f", "NUMBER", "d", "NUMBER", "a", "NUMBER", "f", "NUMBER", "bda", "on", "charlieduong", "NUMBER", "NUMBER", "deprecate", "w", "on", "attr", "into", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "e", "NUMBER", "d", "NUMBER", "a", "NUMBER", "a", "NUMBER", "bbac", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "a", "NUMBER", "bac", "NUMBER", "cb", "NUMBER", "f", "NUMBER", "ff", "NUMBER", "cea", "NUMBER", "cb", "NUMBER", "c", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "into", "c", "NUMBER", "bbf", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fbe", "NUMBER", "eeca", "NUMBER", "f", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fd", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "a", "NUMBER", "bac", "NUMBER", "cb", "NUMBER", "f", "NUMBER", "ff", "NUMBER", "cea", "NUMBER", "cb", "NUMBER", "c", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "into", "c", "NUMBER", "bbf", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fbe", "NUMBER", "eeca", "NUMBER", "f", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fd", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "dca", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "b", "NUMBER", "e", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "bf", "NUMBER", "dead", "NUMBER", "a", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "into", "c", "NUMBER", "bbf", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fbe", "NUMBER", "eeca", "NUMBER", "f", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fd", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "dca", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "b", "NUMBER", "e", "NUMBER", "cd", "NUMBER", "e", "NUMBER", "bf", "NUMBER", "dead", "NUMBER", "a", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "w", "preserve", "into", "c", "NUMBER", "bbf", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fbe", "NUMBER", "eeca", "NUMBER", "f", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fd", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "f", "NUMBER", "cca", "NUMBER", "af", "NUMBER", "e", "NUMBER", "e", "NUMBER", "b", "NUMBER", "ef", "NUMBER", "dc", "NUMBER", "f", "NUMBER", "on", "austinkelleher", "NUMBER", "await", "reorderer", "body", "transform", "into", "NUMBER", "cc", "NUMBER", "ec", "NUMBER", "fbf", "NUMBER", "ac", "NUMBER", "dd", "on", "marko", "js", "master", "NUMBER", "Pre", "ES", "NUMBER", "Support", "How", "should", "Marko", "deal", "with", "ES", "NUMBER", "features", "in", "pre", "ES", "NUMBER", "environments", "Definitions", "ES", "NUMBER", "refers", "to", "features", "and", "keywords", "introduce", "in", "ES", "NUMBER", "or", "later", "and", "the", "environments", "which", "support", "them", "NUMBER", "pre", "ES", "NUMBER", "refers", "to", "environments", "which", "do", "not", "support", "features", "introduce", "in", "ES", "NUMBER", "or", "later", "in", "which", "those", "features", "must", "either", "be", "transpiled", "or", "polyfilled", "before", "execution", "or", "not", "use", "at", "all", "NUMBER", "Context", "It", "be", "of", "course", "possible", "to", "use", "ES", "NUMBER", "features", "within", "user", "write", "code", "which", "simply", "gets", "copied", "into", "the", "compiled", "output", "in", "the", "case", "of", "a", "template", "or", "executed", "as", "be", "in", "the", "case", "of", "a", "component", "or", "taglib", "NUMBER", "The", "burden", "then", "falls", "on", "the", "developer", "to", "know", "which", "features", "may", "or", "may", "not", "be", "use", "in", "their", "environment", "NUMBER", "However", "as", "discover", "while", "work", "on", "NUMBER", "Marko", "s", "compiler", "be", "perfectly", "capable", "of", "generating", "ES", "NUMBER", "code", "though", "it", "doesn", "t", "currently", "do", "so", "NUMBER", "The", "purpose", "of", "this", "issue", "be", "open", "a", "discussion", "on", "the", "possible", "ways", "of", "dealing", "with", "situations", "where", "a", "new", "enhancement", "or", "taglib", "wishes", "to", "make", "use", "of", "such", "features", "while", "rendering", "which", "may", "not", "yet", "be", "support", "in", "all", "environments", "especially", "client", "side", "NUMBER", "Possible", "Solutions", "NUMBER", "Automatically", "compile", "certain", "features", "and", "keywords", "differently", "based", "on", "a", "configuration", "option", "NUMBER", "This", "would", "require", "the", "most", "effort", "to", "implement", "and", "maintain", "NUMBER", "NUMBER", "Don", "t", "allow", "ES", "NUMBER", "to", "be", "generate", "by", "the", "Marko", "core", "NUMBER", "Any", "enhancement", "or", "taglib", "that", "wants", "to", "use", "newer", "language", "features", "must", "be", "a", "separate", "module", "NUMBER", "NUMBER", "Clearly", "mark", "all", "features", "and", "tags", "which", "require", "ES", "NUMBER", "support", "NUMBER", "The", "burden", "then", "falls", "once", "again", "on", "the", "end", "developer", "to", "know", "what", "they", "can", "or", "cannot", "use", "or", "to", "run", "it", "through", "a", "transpiler", "before", "rendering", "NUMBER", "NUMBER", "Create", "an", "optional", "transpiler", "plugin", "NUMBER", "If", "a", "valid", "transpiler", "like", "Babel", "be", "pass", "to", "the", "compiler", "then", "whenever", "an", "ES", "NUMBER", "feature", "be", "encountered", "it", "will", "be", "automatically", "fed", "through", "the", "transpiler", "s", "API", "NUMBER", "It", "could", "possibly", "even", "accept", "other", "transpilers", "like", "coffeescript", "or", "typescript", "NUMBER", "I", "would", "be", "willing", "to", "work", "on", "this", "when", "I", "find", "the", "time", "if", "others", "be", "interested", "NUMBER", "Those", "be", "just", "the", "ideas", "I", "could", "think", "of", "this", "be", "intended", "to", "start", "an", "open", "ended", "discussion", "NUMBER", "Suggestions", "and", "constructive", "criticism", "be", "welcome", "patrick", "steele", "idem", "I", "was", "thinking", "more", "about", "long", "term", "compatibility", "NUMBER", "I", "feel", "like", "import", "export", "be", "just", "the", "tip", "of", "the", "iceburg", "NUMBER", "Aside", "from", "big", "things", "like", "that", "and", "async", "await", "the", "little", "things", "also", "start", "to", "look", "really", "tempting", "like", "rest", "spread", "operators", "destructuring", "argument", "defaults", "NUMBER", "I", "guess", "a", "variation", "of", "my", "question", "might", "be", "something", "like", "Where", "will", "the", "line", "be", "drawn", "on", "legacy", "support", "in", "the", "near", "ish", "future", "and", "what", "will", "be", "the", "recommended", "solutions", "The", "compiler", "already", "requires", "Node", "NUMBER", "js", "NUMBER", "to", "run", "though", "I", "believe", "none", "of", "the", "core", "components", "or", "tags", "currently", "_produce_", "anything", "higher", "than", "ES", "NUMBER", "The", "idea", "of", "build", "in", "support", "for", "run", "in", "ES", "NUMBER", "only", "be", "ridiculous", "but", "for", "the", "compiler", "to", "assume", "native", "ES", "NUMBER", "async", "await", "support", "would", "be", "equally", "laughable", "NUMBER", "Aside", "from", "the", "note", "about", "the", "compiler", "requiring", "Node", "NUMBER", "I", "couldn", "t", "find", "anything", "that", "explicitly", "stated", "the", "lowest", "support", "version", "or", "detailed", "information", "on", "what", "be", "needed", "to", "make", "it", "work", "in", "legacy", "environments", "but", "I", "feel", "that", "s", "something", "that", "needs", "to", "be", "address", "NUMBER", "At", "the", "moment", "I", "agree", "that", "it", "s", "pretty", "safe", "to", "stick", "with", "ES", "NUMBER", "or", "lower", "for", "the", "compiler", "code", "and", "the", "renderer", "doesn", "t", "use", "anything", "newer", "than", "ES", "NUMBER", "or", "maybe", "even", "ES", "NUMBER", "unless", "of", "course", "the", "user", "writes", "ES", "NUMBER", "code", "NUMBER", "But", "things", "like", "that", "have", "a", "way", "of", "get", "fuzzy", "fast", "especially", "with", "constantly", "evolving", "standards", "like", "ECMAScript", "Node", "and", "the", "major", "browsers", "NUMBER", "I", "think", "what", "was", "really", "bothering", "me", "be", "that", "none", "of", "the", "documentation", "at", "least", "that", "I", "can", "find", "describes", "which", "features", "and", "ES", "version", "be", "required", "by", "the", "various", "pieces", "of", "Marko", "other", "than", "a", "side", "note", "somewhere", "about", "the", "compiler", "use", "ES", "NUMBER", "classes", "and", "a", "vague", "statement", "about", "the", "renderer", "be", "support", "in", "all", "web", "browsers", "in", "the", "FAQ", "NUMBER", "For", "example", "a", "list", "like", "the", "following", "could", "be", "add", "to", "the", "documentation", "The", "compiler", "requires", "and", "must", "be", "compatible", "with", "ES", "NUMBER", "ES", "NUMBER", "Node", "NUMBER", "The", "runtime", "requires", "and", "must", "be", "compatible", "with", "ES", "NUMBER", "Built", "in", "taglibs", "must", "generate", "ES", "NUMBER", "compatible", "code", "Additions", "which", "use", "ES", "NUMBER", "features", "must", "only", "do", "so", "when", "call", "by", "the", "user", "e", "NUMBER", "g", "NUMBER", "NUMBER", "It", "would", "also", "be", "helpful", "to", "include", "information", "on", "how", "to", "transpile", "with", "Babel", "and", "when", "that", "would", "be", "necessary", "for", "new", "users", "who", "may", "not", "already", "know", "those", "things", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "feacf", "NUMBER", "e", "NUMBER", "ce", "NUMBER", "f", "NUMBER", "f", "NUMBER", "bae", "NUMBER", "on", "austinkelleher", "NUMBER", "deprecate", "async", "events", "into", "NUMBER", "cc", "NUMBER", "ec", "NUMBER", "fbf", "NUMBER", "ac", "NUMBER", "dd", "on", "marko", "js", "master", "NUMBER", "Description", "I", "simply", "copied", "var", "tag", "NUMBER", "js", "and", "its", "marko", "NUMBER", "json", "entry", "to", "create", "TAG", "and", "TAG", "tags", "in", "taglibs", "core", "NUMBER", "Motivation", "and", "Context", "I", "was", "surprised", "to", "find", "that", "context", "NUMBER", "builder", "NUMBER", "vars", "already", "had", "an", "optional", "second", "parameter", "for", "variable", "type", "var", "let", "or", "const", "but", "only", "TAG", "had", "be", "implement", "as", "a", "tag", "NUMBER", "This", "pull", "request", "be", "meant", "to", "be", "a", "starting", "point", "but", "it", "could", "also", "be", "applied", "as", "be", "NUMBER", "The", "commit", "be", "purely", "additive", "and", "no", "exist", "functionality", "should", "be", "affected", "NUMBER", "TODO", "Add", "automate", "test", "Add", "documentation", "optional", "Throw", "compiler", "error", "on", "identifier", "re", "declaration", "or", "on", "const", "re", "assignment", "Additional", "Notes", "Providing", "a", "body", "to", "a", "TAG", "tag", "causes", "it", "to", "compile", "into", "an", "IIFE", "to", "restrict", "its", "scope", "NUMBER", "Because", "the", "TAG", "and", "TAG", "tags", "simply", "re", "use", "the", "same", "code", "they", "currently", "do", "the", "same", "but", "they", "could", "be", "made", "to", "use", "a", "block", "statement", "NUMBER", "instead", "NUMBER", "Hmm", "NUMBER", "it", "seems", "the", "auto", "test", "be", "currently", "fail", "I", "assume", "that", "s", "because", "I", "didn", "t", "write", "any", "NUMBER", "Unfortunately", "I", "m", "not", "sure", "when", "I", "ll", "next", "get", "the", "chance", "to", "work", "on", "this", "NUMBER", "If", "anyone", "would", "like", "to", "take", "over", "from", "here", "feel", "free", "to", "do", "so", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "f", "NUMBER", "c", "NUMBER", "dbf", "NUMBER", "fe", "NUMBER", "c", "NUMBER", "be", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "de", "NUMBER", "a", "NUMBER", "bbf", "NUMBER", "on", "Hesulan", "let", "const", "tags", "into", "NUMBER", "a", "NUMBER", "d", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "on", "marko", "js", "marko", "v", "NUMBER", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "f", "NUMBER", "c", "NUMBER", "dbf", "NUMBER", "fe", "NUMBER", "c", "NUMBER", "be", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "de", "NUMBER", "a", "NUMBER", "bbf", "NUMBER", "on", "Hesulan", "let", "const", "tags", "into", "NUMBER", "a", "NUMBER", "d", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "c", "NUMBER", "c", "on", "marko", "js", "marko", "v", "NUMBER", "NUMBER", "I", "agree", "that", "the", "compiler", "should", "throw", "an", "error", "on", "re", "initialization", "or", "const", "re", "assignment", "that", "s", "point", "number", "NUMBER", "in", "the", "TODO", "section", "of", "the", "pull", "request", "NUMBER", "It", "s", "get", "compiled", "into", "actual", "let", "and", "const", "calls", "so", "it", "will", "eventually", "do", "that", "during", "render", "anyway", "but", "it", "would", "be", "nice", "if", "it", "could", "do", "that", "at", "compile", "time", "NUMBER", "But", "that", "s", "something", "that", "will", "need", "to", "be", "do", "deeper", "within", "the", "code", "probably", "somewhere", "inside", "the", "Vars", "AST", "node", "so", "far", "these", "commit", "have", "only", "touched", "the", "taglib", "code", "NUMBER", "I", "m", "not", "sure", "why", "I", "didn", "t", "think", "of", "this", "before", "but", "it", "will", "also", "be", "necessary", "for", "the", "compiler", "to", "handle", "let", "and", "const", "differently", "in", "pre", "ES", "NUMBER", "environments", "where", "the", "keywords", "either", "need", "to", "be", "transpiled", "or", "require", "strict", "mode", "as", "two", "of", "the", "four", "travis", "ci", "test", "apparently", "do", "NUMBER", "In", "any", "case", "it", "seems", "this", "isn", "t", "quite", "as", "simple", "as", "it", "appeared", "NUMBER", "Assuming", "ES", "NUMBER", "or", "higher", "anyone", "can", "grab", "these", "commit", "to", "play", "with", "locally", "it", "s", "worked", "perfectly", "for", "me", "so", "far", "NUMBER", "I", "might", "also", "get", "around", "to", "make", "this", "a", "separate", "taglib", "in", "the", "next", "day", "or", "two", "at", "least", "until", "someone", "with", "more", "time", "on", "their", "hands", "possibly", "my", "future", "self", "I", "can", "only", "hope", "NUMBER", "figures", "out", "how", "to", "make", "it", "not", "break", "things", "NUMBER", "So", "I", "ve", "be", "mulling", "this", "over", "and", "here", "be", "the", "solutions", "I", "can", "think", "of", "NUMBER", "Pull", "these", "tags", "into", "a", "separate", "module", "NUMBER", "This", "would", "be", "fairly", "simple", "I", "would", "just", "need", "to", "make", "a", "few", "minor", "change", "and", "publish", "to", "npm", "NUMBER", "NUMBER", "Provide", "build", "in", "support", "for", "compile", "to", "var", "instead", "NUMBER", "This", "would", "be", "overkill", "and", "I", "m", "not", "even", "sure", "where", "to", "begin", "NUMBER", "NUMBER", "Add", "use", "strict", "to", "the", "top", "of", "the", "compiled", "output", "NUMBER", "This", "would", "make", "it", "work", "correctly", "in", "Node", "NUMBER", "and", "NUMBER", "but", "would", "also", "change", "the", "behavior", "of", "the", "entire", "template", "in", "very", "subtle", "ways", "albeit", "mostly", "for", "edge", "cases", "NUMBER", "NUMBER", "Expect", "end", "users", "to", "know", "that", "they", "can", "t", "use", "these", "tags", "natively", "in", "pre", "ES", "NUMBER", "environments", "NUMBER", "We", "would", "also", "need", "to", "modify", "the", "integration", "test", "to", "skip", "certain", "ones", "on", "Node", "NUMBER", "and", "NUMBER", "NUMBER", "Pull", "these", "tags", "into", "a", "new", "build", "in", "taglib", "specifically", "made", "for", "support", "breaking", "features", "something", "like", "es", "NUMBER", "taglib", "which", "can", "then", "be", "enable", "disabled", "by", "a", "compiler", "flag", "like", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "es", "NUMBER", "_tags", "true", "NUMBER", "This", "would", "be", "especially", "helpful", "in", "the", "case", "of", "client", "side", "rendering", "where", "template", "might", "be", "rendered", "in", "a", "much", "lower", "environment", "version", "than", "the", "one", "they", "were", "compiled", "in", "and", "developers", "shouldn", "t", "have", "to", "keep", "track", "of", "which", "tags", "support", "which", "version", "NUMBER", "Any", "future", "tags", "which", "generate", "ES", "NUMBER", "code", "would", "also", "be", "placed", "here", "NUMBER", "I", "m", "sure", "there", "other", "options", "I", "haven", "t", "considered", "as", "well", "NUMBER", "Either", "way", "I", "d", "like", "to", "hear", "your", "thoughts", "For", "me", "the", "point", "of", "const", "and", "let", "be", "that", "they", "re", "clean", "effective", "_native_", "solutions", "to", "specific", "problem", "NUMBER", "A", "separate", "taglib", "or", "module", "would", "provide", "a", "safe", "official", "place", "for", "tags", "like", "these", "which", "be", "build", "around", "ES", "NUMBER", "features", "and", "concepts", "to", "be", "implement", "without", "the", "risk", "of", "accidentally", "breaking", "compatibility", "anyone", "who", "chooses", "to", "require", "it", "knows", "what", "they", "re", "get", "into", "NUMBER", "That", "be", "said", "the", "addition", "of", "another", "taglib", "or", "module", "to", "maintain", "isn", "t", "something", "to", "propose", "lightly", "NUMBER", "In", "any", "case", "this", "certainly", "isn", "t", "urgent", "NUMBER", "Perhaps", "we", "could", "simply", "put", "this", "on", "the", "back", "burner", "while", "we", "experiment", "with", "ideas", "for", "other", "ES", "NUMBER", "tags", "and", "see", "how", "much", "interest", "there", "be", "from", "the", "community", "In", "the", "meantime", "I", "could", "easily", "port", "these", "to", "a", "separate", "module", "and", "publish", "it", "for", "everyone", "to", "play", "with", "NUMBER", "For", "anyone", "interested", "I", "finally", "get", "around", "to", "publishing", "these", "as", "a", "standalone", "package", "npm", "install", "save", "marko", "taglib", "let", "const", "Note", "The", "save", "part", "be", "necessary", "because", "marko", "only", "searches", "for", "taglibs", "listed", "as", "dependencies", "in", "your", "package", "NUMBER", "json", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "fc", "NUMBER", "a", "NUMBER", "dc", "NUMBER", "ecdcbea", "NUMBER", "dd", "NUMBER", "e", "NUMBER", "fec", "NUMBER", "on", "charlieduong", "NUMBER", "NUMBER", "introduce", "ref", "and", "for", "ref", "attributes", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "be", "NUMBER", "b", "NUMBER", "bb", "NUMBER", "adfd", "NUMBER", "bc", "NUMBER", "aa", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "cecb", "NUMBER", "bcb", "NUMBER", "a", "NUMBER", "ff", "NUMBER", "b", "NUMBER", "eb", "NUMBER", "c", "NUMBER", "cfe", "NUMBER", "on", "charlieduong", "NUMBER", "NUMBER", "introduce", "ref", "and", "for", "ref", "attributes", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "be", "NUMBER", "b", "NUMBER", "bb", "NUMBER", "adfd", "NUMBER", "bc", "NUMBER", "aa", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "e", "NUMBER", "a", "NUMBER", "ff", "NUMBER", "d", "NUMBER", "d", "NUMBER", "c", "NUMBER", "a", "NUMBER", "d", "NUMBER", "acf", "NUMBER", "a", "NUMBER", "b", "NUMBER", "on", "charlieduong", "NUMBER", "NUMBER", "introduce", "ref", "and", "for", "ref", "attributes", "into", "NUMBER", "b", "NUMBER", "ae", "NUMBER", "be", "NUMBER", "b", "NUMBER", "bb", "NUMBER", "adfd", "NUMBER", "bc", "NUMBER", "aa", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "patrick", "steele", "idem", "It", "seems", "that", "this", "currently", "coerces", "non", "string", "values", "such", "as", "undefined", "null", "and", "into", "TAG", "TAG", "TAG", "TAG", "and", "TAG", "TAG", "NUMBER", "Should", "it", "throw", "an", "error", "instead", "I", "m", "more", "than", "a", "little", "hesitant", "about", "this", "NUMBER", "I", "do", "see", "how", "it", "could", "be", "useful", "but", "considering", "what", "little", "would", "be", "gained", "expression", "whitespace", "already", "works", "inside", "parenthesis", "and", "be", "arguably", "easier", "to", "read", "most", "of", "the", "time", "versus", "the", "potential", "costs", "reserved", "operator", "names", "inconsistent", "behavior", "potential", "ambiguity", "etc", "NUMBER", "I", "feel", "this", "needs", "more", "discussion", "especially", "since", "it", "would", "likely", "affect", "any", "future", "enhancements", "which", "deal", "with", "or", "depend", "on", "whitespace", "behavior", "NUMBER", "Perhaps", "if", "this", "were", "to", "be", "opt", "in", "and", "only", "enable", "by", "default", "on", "certain", "tags", "like", "TAG", "and", "TAG", "I", "would", "love", "to", "see", "something", "like", "that", "and", "it", "would", "virtually", "eliminate", "the", "problem", "I", "mention", "you", "can", "pretty", "much", "assume", "that", "anything", "on", "a", "TAG", "tag", "after", "the", "be", "part", "of", "the", "value", "expression", "NUMBER", "I", "haven", "t", "peeked", "at", "the", "code", "yet", "but", "if", "this", "could", "be", "a", "some", "sort", "of", "opt", "in", "flag", "on", "the", "tag", "definition", "or", "renderer", "or", "AST", "node", "or", "wherever", "it", "would", "fit", "best", "then", "any", "other", "tags", "possibly", "even", "user", "made", "taglibs", "could", "simply", "enable", "this", "loose", "whitespace", "support", "with", "relative", "ease", "without", "change", "the", "expected", "behavior", "for", "anything", "else", "NUMBER", "I", "would", "much", "prefer", "a", "parsing", "mode", "switch", "based", "on", "the", "tag", "name", "it", "seems", "like", "it", "would", "be", "much", "less", "messy", "and", "more", "reusable", "than", "having", "each", "tag", "manually", "stitch", "everything", "back", "together", "or", "it", "might", "even", "be", "as", "simple", "as", "add", "a", "couple", "of", "flags", "to", "the", "commit", "from", "the", "relate", "PR", "NUMBER", "Is", "the", "parser", "able", "to", "read", "a", "config", "parameter", "from", "somewhere", "user", "accessible", "like", "the", "marko", "NUMBER", "json", "definition", "or", "would", "the", "tag", "names", "which", "support", "this", "need", "to", "be", "hard", "code", "I", "like", "the", "idea", "of", "the", "comma", "syntax", "be", "concise", "specific", "NUMBER", "It", "already", "has", "more", "of", "a", "javascript", "y", "vibe", "actually", "python", "y", "because", "of", "the", "significant", "indentation", "but", "you", "get", "my", "point", "while", "the", "standard", "syntax", "feels", "more", "like", "enhanced", "HTML", "at", "least", "in", "my", "opinion", "NUMBER", "Also", "my", "original", "concern", "was", "over", "allowing", "whitespace", "everywhere", "within", "value", "assignments", "without", "explicit", "boundaries", "I", "can", "t", "think", "of", "any", "serious", "problem", "that", "allowing", "whitespace", "around", "the", "might", "cause", "aside", "from", "looking", "horrible", "when", "misused", "TAG", "but", "that", "can", "be", "said", "about", "almost", "anything", "NUMBER", "As", "for", "only", "requiring", "commas", "sometimes", "another", "possibility", "might", "be", "an", "all", "or", "nothing", "if", "the", "tag", "contains", "values", "with", "whitespace", "then", "there", "must", "be", "a", "comma", "between", "every", "attribute", "NUMBER", "As", "a", "side", "effect", "that", "would", "also", "make", "it", "a", "bit", "easier", "to", "read", "you", "would", "end", "up", "with", "either", "tag", "foo", "NUMBER", "NUMBER", "bar", "NUMBER", "baz", "or", "tag", "foo", "NUMBER", "NUMBER", "bar", "NUMBER", "baz", "instead", "of", "tag", "foo", "NUMBER", "NUMBER", "bar", "NUMBER", "baz", "NUMBER", "Requiring", "a", "semicolon", "at", "the", "end", "with", "the", "comma", "syntax", "would", "solve", "that", "first", "part", "then", "it", "would", "be", "either", "tag", "baz", "NUMBER", "Hello", "World", "TAG", "Hello", "World", "TAG", "or", "tag", "baz", "NUMBER", "Hello", "World", "TAG", "TAG", "typed", "that", "on", "my", "phone", "and", "I", "think", "it", "messed", "up", "the", "format", "NUMBER", "hopefully", "you", "know", "what", "I", "meant", "When", "in", "concise", "mode", "could", "a", "semicolon", "simply", "end", "the", "current", "tag", "like", "do", "in", "HTML", "mode", "For", "example", "nav", "NUMBER", "navbar", "ul", "li", "for", "link", "in", "data", "NUMBER", "links", "a", "href", "link", "NUMBER", "href", "link", "NUMBER", "title", "Would", "be", "shorthand", "for", "nav", "NUMBER", "navbar", "ul", "li", "for", "link", "in", "data", "NUMBER", "links", "a", "href", "link", "NUMBER", "href", "link", "NUMBER", "title", "or", "TAG", "TAG", "TAG", "TAG", "link", "NUMBER", "title", "TAG", "TAG", "TAG", "TAG", "I", "agree", "with", "restricting", "this", "feature", "to", "concise", "syntax", "NUMBER", "The", "HTML", "JS", "syntax", "be", "naturally", "more", "verbose", "and", "with", "that", "verbosity", "you", "gain", "explicitness", "NUMBER", "TAG", "This", "looks", "nice", "and", "readable", "to", "me", "NUMBER", "I", "have", "no", "desire", "to", "remove", "these", "parenthesis", "just", "as", "I", "have", "no", "desire", "to", "remove", "general", "closing", "tags", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "a", "NUMBER", "fcc", "NUMBER", "de", "NUMBER", "d", "NUMBER", "d", "NUMBER", "a", "NUMBER", "d", "NUMBER", "feb", "NUMBER", "on", "austinkelleher", "NUMBER", "render", "promise", "into", "da", "NUMBER", "d", "NUMBER", "f", "NUMBER", "c", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ae", "NUMBER", "cf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "beb", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "d", "NUMBER", "db", "NUMBER", "d", "NUMBER", "ca", "NUMBER", "on", "austinkelleher", "NUMBER", "render", "promise", "into", "da", "NUMBER", "d", "NUMBER", "f", "NUMBER", "c", "NUMBER", "c", "NUMBER", "b", "NUMBER", "e", "NUMBER", "f", "NUMBER", "a", "NUMBER", "ae", "NUMBER", "cf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "fbe", "NUMBER", "a", "NUMBER", "d", "NUMBER", "a", "NUMBER", "cecffc", "NUMBER", "dc", "NUMBER", "db", "NUMBER", "cd", "NUMBER", "on", "austinkelleher", "NUMBER", "render", "promise", "into", "abe", "NUMBER", "e", "NUMBER", "db", "NUMBER", "d", "NUMBER", "b", "NUMBER", "aba", "NUMBER", "fa", "NUMBER", "a", "NUMBER", "f", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "fbe", "NUMBER", "a", "NUMBER", "d", "NUMBER", "a", "NUMBER", "cecffc", "NUMBER", "dc", "NUMBER", "db", "NUMBER", "cd", "NUMBER", "on", "austinkelleher", "NUMBER", "render", "promise", "into", "abe", "NUMBER", "e", "NUMBER", "db", "NUMBER", "d", "NUMBER", "b", "NUMBER", "aba", "NUMBER", "fa", "NUMBER", "a", "NUMBER", "f", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "The", "Promises", "A", "specification", "requires", "that", "a", "Promise", "instance", "must", "only", "ever", "handle", "the", "very", "first", "call", "to", "either", "resolve", "or", "reject", "and", "ignore", "all", "further", "attempts", "at", "either", "NUMBER", "So", "as", "long", "as", "the", "correct", "one", "be", "call", "first", "it", "doesn", "t", "matter", "what", "happens", "after", "the", "resolve", "rejected", "Promise", "instance", "becomes", "immutable", "NUMBER", "That", "be", "said", "do", "be", "aware", "that", "a", "fulfilled", "Promise", "exhibits", "_shallow_", "immutability", "the", "resolve", "rejected", "value", "be", "effectively", "a", "const", "in", "that", "you", "cannot", "_replace_", "it", "but", "you", "can", "still", "modify", "the", "result", "s", "properties", "NUMBER", "And", "since", "calling", "resolve", "or", "reject", "doesn", "t", "cause", "the", "function", "to", "exit", "it", "s", "entirely", "possible", "to", "accidentally", "mutate", "the", "result", "NUMBER", "Is", "there", "another", "way", "to", "achieve", "the", "same", "result", "I", "can", "think", "of", "a", "few", "cases", "where", "it", "would", "be", "useful", "though", "perhaps", "not", "strictly", "necessary", "to", "be", "able", "to", "explicitly", "bind", "a", "widget", "file", "path", "NUMBER", "One", "example", "would", "be", "NUMBER", "be", "there", "an", "alternative", "or", "would", "that", "functionality", "no", "longer", "be", "possible", "patrick", "steele", "idem", "Ah", "that", "do", "clarify", "NUMBER", "Thanks", "Probably", "a", "good", "idea", "to", "mention", "those", "alternatives", "somewhere", "in", "the", "v", "NUMBER", "v", "NUMBER", "upgrade", "docs", "and", "maybe", "a", "few", "examples", "to", "make", "refactoring", "easier", "NUMBER", "In", "marko", "NUMBER", "rc", "NUMBER", "it", "appears", "that", "in", "onMount", "this", "NUMBER", "el", "be", "the", "first", "element", "and", "this", "NUMBER", "els", "be", "all", "top", "level", "elements", "when", "there", "be", "multiple", "top", "level", "elements", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "b", "NUMBER", "ef", "NUMBER", "a", "NUMBER", "fde", "NUMBER", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "on", "austinkelleher", "NUMBER", "handleFileModified", "warning", "into", "a", "NUMBER", "e", "NUMBER", "bdbc", "NUMBER", "fe", "NUMBER", "e", "NUMBER", "f", "NUMBER", "e", "NUMBER", "fb", "NUMBER", "c", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "d", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "The", "language", "guide", "LINK", "js", "marko", "blob", "master", "docs", "language", "guide", "NUMBER", "md", "makes", "no", "reference", "to", "the", "marko", "body", "attribute", "NUMBER", "This", "attribute", "be", "necessary", "to", "keep", "Marko", "from", "interpreting", "inline", "scripts", "or", "inline", "CSS", "but", "without", "be", "documented", "it", "s", "difficult", "to", "find", "this", "mechanism", "at", "all", "NUMBER", "This", "means", "that", "the", "parser", "won", "t", "recognize", "HTML", "tags", "inside", "TAG", "and", "TAG", "tags", "since", "those", "tags", "do", "not", "contain", "HTML", "NUMBER", "Therefore", "you", "should", "very", "rarely", "need", "to", "know", "about", "the", "marko", "body", "attribute", "NUMBER", "In", "our", "case", "we", "had", "without", "a", "matching", "code", "that", "didn", "t", "intend", "to", "invoke", "Marko", "at", "all", "and", "this", "cause", "an", "error", "NUMBER", "I", "d", "shudder", "to", "think", "what", "would", "ve", "happened", "if", "it", "silently", "transformed", "something", "cause", "weird", "change", "in", "behavior", "without", "any", "warning", "NUMBER", "I", "mean", "it", "makes", "sense", "that", "maybe", "you", "want", "to", "JSON", "NUMBER", "ringify", "foo", "in", "the", "middle", "of", "a", "script", "tag", "though", "it", "seems", "a", "bit", "dangerous", "to", "me", "that", "expressions", "be", "enable", "in", "script", "tags", "by", "default", "NUMBER", "I", "do", "understand", "the", "logic", "of", "keep", "it", "consistent", "with", "other", "tags", "however", "and", "obviously", "it", "would", "be", "a", "breaking", "change", "so", "I", "m", "not", "suggesting", "that", "NUMBER", "just", "kind", "of", "musing", "NUMBER", "Anyway", "documenting", "marko", "body", "would", "ve", "at", "least", "made", "it", "easier", "to", "correct", "the", "problem", "when", "we", "figured", "out", "what", "it", "was", "NUMBER", "I", "suppose", "the", "correct", "approach", "be", "just", "not", "to", "have", "inline", "JavaScript", "at", "all", "but", "sometimes", "that", "s", "nice", "for", "test", "a", "quick", "template", "mock", "up", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "bb", "NUMBER", "c", "NUMBER", "ca", "NUMBER", "c", "NUMBER", "c", "NUMBER", "e", "NUMBER", "b", "NUMBER", "daafcfe", "NUMBER", "b", "NUMBER", "bd", "NUMBER", "db", "on", "austinkelleher", "NUMBER", "node", "require", "extensions", "into", "NUMBER", "ef", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ef", "NUMBER", "b", "NUMBER", "c", "NUMBER", "bfc", "NUMBER", "c", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "ef", "NUMBER", "d", "NUMBER", "acbaf", "NUMBER", "e", "NUMBER", "b", "NUMBER", "fc", "NUMBER", "b", "NUMBER", "a", "NUMBER", "bf", "NUMBER", "c", "NUMBER", "on", "austinkelleher", "NUMBER", "node", "require", "extensions", "into", "NUMBER", "ef", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ef", "NUMBER", "b", "NUMBER", "c", "NUMBER", "bfc", "NUMBER", "c", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ae", "NUMBER", "f", "NUMBER", "c", "NUMBER", "cda", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "abe", "NUMBER", "a", "on", "austinkelleher", "NUMBER", "node", "require", "extensions", "into", "NUMBER", "ef", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ef", "NUMBER", "b", "NUMBER", "c", "NUMBER", "bfc", "NUMBER", "c", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "ae", "NUMBER", "f", "NUMBER", "c", "NUMBER", "cda", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "abe", "NUMBER", "a", "on", "austinkelleher", "NUMBER", "node", "require", "extensions", "into", "NUMBER", "ef", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ef", "NUMBER", "b", "NUMBER", "c", "NUMBER", "bfc", "NUMBER", "c", "NUMBER", "a", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "ef", "NUMBER", "bb", "NUMBER", "fe", "NUMBER", "eaff", "NUMBER", "bf", "NUMBER", "ca", "NUMBER", "c", "NUMBER", "b", "NUMBER", "b", "NUMBER", "eb", "NUMBER", "a", "NUMBER", "cb", "on", "abiyasa", "bug", "on", "nested", "widget", "id", "into", "NUMBER", "a", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ca", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "ef", "NUMBER", "bb", "NUMBER", "fe", "NUMBER", "eaff", "NUMBER", "bf", "NUMBER", "ca", "NUMBER", "c", "NUMBER", "b", "NUMBER", "b", "NUMBER", "eb", "NUMBER", "a", "NUMBER", "cb", "on", "abiyasa", "bug", "on", "nested", "widget", "id", "into", "NUMBER", "a", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ca", "NUMBER", "f", "NUMBER", "ea", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "c", "NUMBER", "on", "marko", "js", "master", "NUMBER", "For", "the", "purpose", "of", "hoisting", "require", "calls", "out", "of", "the", "render", "function", "the", "new", "TAG", "tag", "should", "handle", "that", "see", "ECMAScript", "s", "top", "level", "requirement", "for", "import", "statements", "though", "I", "haven", "t", "had", "the", "chance", "to", "look", "at", "the", "pull", "yet", "so", "I", "can", "t", "be", "sure", "if", "it", "actually", "do", "this", "NUMBER", "I", "know", "that", "s", "not", "the", "only", "use", "for", "TAG", "but", "thought", "I", "should", "throw", "that", "out", "there", "NUMBER", "Regarding", "TAG", "and", "TAG", "why", "not", "both", "TAG", "could", "simply", "be", "a", "drop", "in", "replacement", "for", "TAG", "while", "TAG", "would", "be", "optional", "and", "if", "present", "would", "refactor", "the", "output", "in", "the", "way", "you", "describe", "NUMBER", "I", "get", "the", "feeling", "that", "the", "TAG", "tag", "might", "take", "a", "while", "to", "get", "work", "correctly", "but", "TAG", "should", "be", "quick", "and", "easy", "to", "add", "and", "looks", "much", "nicer", "and", "more", "easily", "recognizable", "than", "TAG", "at", "least", "in", "my", "opinion", "NUMBER", "When", "use", "require", "marko", "hot", "reload", "NUMBER", "handleFileModified", "if", "a", "not", "resolvable", "template", "path", "be", "pass", "there", "will", "be", "no", "warning", "or", "other", "notification", "A", "very", "minor", "quibble", "but", "this", "was", "relate", "to", "a", "somewhat", "elusive", "bug", "in", "my", "code", "NUMBER", "Maybe", "just", "a", "warning", "or", "change", "the", "exist", "output", "from", "marko", "hot", "reload", "File", "modify", "cant", "resolve", "this", "path", "to", "index", "NUMBER", "marko", "to", "something", "like", "marko", "hot", "reload", "ERROR", "cannot", "resolve", "template", "path", "cant", "resolve", "this", "path", "to", "index", "NUMBER", "marko", "TAG", "Bug", "Report", "Compiler", "throw", "an", "error", "on", "valid", "RegEx", "expressions", "in", "HTML", "NUMBER", "pattern", "attribute", "for", "input", "elements", "NUMBER", "Context", "Given", "following", "code", "example", "html", "TAG", "Expected", "Behavior", "Compile", "normally", "as", "it", "valid", "attribute", "value", "Actual", "Behavior", "Throws", "Error", "Invalid", "string", "w", "NUMBER", "NUMBER", "SyntaxError", "Unexpected", "token", "w", "in", "JSON", "at", "position", "NUMBER", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "TAG", "Version", "use", "marko", "NUMBER", "beta", "NUMBER", "Environment", "name", "and", "version", "node", "NUMBER", "js", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "MacOS", "Stack", "Trace", "TAG", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "NUMBER", "src", "marko", "vip", "puj", "NUMBER", "marko", "NUMBER", "NUMBER", "Invalid", "string", "w", "NUMBER", "NUMBER", "SyntaxError", "Unexpected", "token", "w", "in", "JSON", "at", "position", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "at", "handleErrors", "Users", "tino", "Sites", "transfers", "NUMBER", "do", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "at", "Compiler", "NUMBER", "compile", "Users", "tino", "Sites", "transfers", "NUMBER", "do", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "at", "_compile", "Users", "tino", "Sites", "transfers", "NUMBER", "do", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "at", "doLoad", "Users", "tino", "Sites", "transfers", "NUMBER", "do", "node_modules", "marko", "runtime", "loader", "index", "NUMBER", "js", "NUMBER", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "at", "compileMarkoFile", "Users", "tino", "Sites", "transfers", "NUMBER", "do", "tasks", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "error", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "CompileError", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "context", "Object", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "node", "undefined", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "message", "Invalid", "string", "w", "NUMBER", "NUMBER", "SyntaxError", "Unexpected", "token", "w", "in", "JSON", "at", "position", "NUMBER", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "code", "INVALID_STRING", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "pos", "Object", "ERR", "NUMBER", "NUMBER", "NUMBER", "Marko", "endPos", "Object", "TAG", "I", "think", "accepting", "native", "RegEx", "as", "value", "will", "looks", "logical", "and", "very", "appropriate", "Also", "I", "m", "not", "sure", "that", "this", "pattern", "attribute", "will", "work", "in", "same", "way", "in", "all", "browsers", "after", "escaping", "but", "can", "t", "find", "relate", "spec", "thought", "NUMBER", "It", "s", "obvious", "why", "the", "whitespace", "of", "TAG", "tags", "be", "not", "remove", "but", "why", "for", "TAG", "tags", "too", "Normally", "you", "minify", "javascript", "code", "too", "so", "I", "don", "t", "get", "why", "this", "be", "ignored", "by", "default", "NUMBER", "Is", "there", "any", "why", "to", "enable", "minification", "for", "the", "TAG", "tag", "globally", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "preserveWhitespace", "true", "sadly", "only", "do", "this", "globally", "but", "if", "I", "have", "a", "TAG", "tag", "it", "s", "display", "incorrectly", "NUMBER", "Is", "there", "a", "way", "to", "do", "this", "programmatically", "instead", "of", "a", "NUMBER", "json", "config", "file", "The", "page", "displays", "all", "the", "js", "appears", "to", "load", "but", "the", "onClick", "handleThisClick", "handler", "isn", "t", "firing", "which", "should", "display", "a", "console", "log", "and", "the", "c", "nav", "NUMBER", "scss", "css", "isn", "t", "be", "applied", "c", "nav", "NUMBER", "The", "base", "NUMBER", "scss", "style", "be", "work", "though", "red", "NUMBER", "I", "m", "use", "lasso", "babel", "lasso", "sass", "my", "route", "let", "template", "require", "src", "marko", "pages", "sign_in", "sign_in", "NUMBER", "marko", "ctx", "NUMBER", "body", "template", "NUMBER", "ream", "press", "press", "src", "marko", "pages", "sign_in", "sign_in", "NUMBER", "marko", "TAG", "TAG", "TAG", "BODY", "CONTENT", "data", "NUMBER", "press", "TAG", "TAG", "TAG", "FOOTER", "CONTENT", "TAG", "TAG", "src", "marko", "pages", "sign_in", "browser", "NUMBER", "json", "dependencies", "NUMBER", "NUMBER", "components", "c", "nav", "browser", "NUMBER", "json", "src", "marko", "layouts", "base", "base", "NUMBER", "js", "console", "NUMBER", "log", "base", "NUMBER", "js", "include", "import", "text", "from", "NUMBER", "text", "NUMBER", "js", "text", "src", "marko", "layouts", "base", "base", "NUMBER", "marko", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "base", "NUMBER", "marko", "body", "below", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "src", "marko", "layouts", "base", "base", "NUMBER", "scss", "NUMBER", "base", "width", "NUMBER", "px", "height", "NUMBER", "px", "background", "red", "src", "marko", "layouts", "base", "browser", "NUMBER", "json", "dependencies", "require", "run", "NUMBER", "base", "NUMBER", "NUMBER", "scss", "src", "marko", "layouts", "base", "text", "NUMBER", "js", "use", "strict", "export", "default", "console", "NUMBER", "log", "test", "NUMBER", "js", "include", "src", "marko", "components", "c", "nav", "browser", "NUMBER", "json", "dependencies", "require", "marko", "widgets", "require", "NUMBER", "widget", "NUMBER", "NUMBER", "scss", "src", "marko", "components", "c", "nav", "c", "nav", "NUMBER", "js", "export", "NUMBER", "render", "require", "NUMBER", "renderer", "NUMBER", "render", "src", "marko", "components", "c", "nav", "c", "nav", "NUMBER", "marko", "TAG", "TAG", "TAG", "TAG", "Home", "TAG", "TAG", "TAG", "TAG", "data", "NUMBER", "press", "TAG", "TAG", "TAG", "TAG", "src", "marko", "components", "c", "nav", "c", "nav", "NUMBER", "scss", "c", "nav", "background", "green", "width", "NUMBER", "height", "NUMBER", "px", "src", "marko", "components", "c", "nav", "renderer", "NUMBER", "js", "module", "NUMBER", "export", "require", "marko", "widgets", "NUMBER", "defineRenderer", "template", "require", "NUMBER", "c", "nav", "NUMBER", "marko", "getInitialProps", "function", "input", "out", "console", "NUMBER", "log", "input", "return", "input", "src", "marko", "components", "c", "nav", "widget", "NUMBER", "js", "module", "NUMBER", "export", "require", "marko", "widgets", "NUMBER", "defineWidget", "handleThisClick", "function", "console", "NUMBER", "log", "c", "nav", "click", "The", "console", "fires", "base", "NUMBER", "js", "include", "and", "test", "NUMBER", "js", "include", "NUMBER", "patrick", "steele", "idem", "Hello", "I", "actually", "find", "out", "what", "the", "issue", "be", "NUMBER", "It", "s", "possibly", "relate", "to", "LINK", "js", "lasso", "marko", "issue", "NUMBER", "I", "had", "to", "move", "the", "pages", "sign_in", "browser", "NUMBER", "json", "dependencies", "to", "the", "layouts", "base", "browser", "NUMBER", "json", "dependencies", "NUMBER", "Which", "be", "weird", "since", "I", "be", "declaring", "the", "usage", "of", "the", "components", "in", "pages", "sign_in", "sign_in", "NUMBER", "marko", "and", "not", "in", "layouts", "base", "base", "NUMBER", "marko", "NUMBER", "Bug", "Report", "Hot", "reload", "doesnt", "work", "in", "ExpressJS", "setup", "Your", "Environment", "Win", "NUMBER", "Chrome", "Hi", "the", "browser", "refresh", "only", "refreshes", "the", "browser", "page", "load", "NUMBER", "I", "did", "manual", "refresh", "and", "it", "doesnt", "work", "NUMBER", "The", "file", "watch", "do", "work", "and", "the", "method", "handleFileModified", "templatePath", "be", "triggered", "but", "nothing", "happens", "even", "though", "there", "be", "console", "printout", "from", "that", "says", "file", "refreshed", "NUMBER", "or", "something", "NUMBER", "Also", "there", "isnt", "new", "js", "file", "compiled", "created", "either", "even", "after", "setting", "write", "to", "file", "option", "as", "true", "NUMBER", "sriver", "NUMBER", "I", "happened", "to", "have", "this", "error", "NUMBER", "minutes", "ago", "the", "console", "printout", "be", "it", "the", "relative", "path", "or", "the", "absolute", "path", "NUMBER", "It", "needs", "to", "be", "the", "absolute", "path", "i", "NUMBER", "e", "NUMBER", "home", "user", "dev", "yourproject", "src", "markofiles", "component", "app", "mycomponent", "template", "NUMBER", "marko", "or", "on", "Windows", "C", "yourproject", "wherever", "your", "marko", "template", "file", "be", "template", "NUMBER", "marko", "Hi", "Patrick", "u", "be", "right", "NUMBER", "The", "path", "has", "to", "be", "absolute", "to", "work", "NUMBER", "Thanks", "and", "cheer", "Hi", "there", "This", "code", "doesn", "t", "work", "now", "NUMBER", "Before", "he", "worked", "fine", "NUMBER", "let", "HomePage", "require", "NUMBER", "home", "NUMBER", "marko", "let", "response", "global", "active", "home", "logged", "logged", "moment", "moment", "currentPage", "currentPage", "HomePage", "NUMBER", "ream", "response", "NUMBER", "pipe", "res", "I", "have", "a", "layout", "and", "his", "part", "home", "NUMBER", "marko", "NUMBER", "I", "load", "a", "part", "of", "layout", "and", "give", "him", "the", "data", "for", "rendering", "but", "nothing", "NUMBER", "In", "a", "layout", "i", "tried", "to", "print", "data", "out", "NUMBER", "global", "NUMBER", "active", "NUMBER", "What", "i", "doing", "wrong", "Previously", "everything", "worked", "fine", "NUMBER", "patrick", "steele", "idem", "Thanks", "a", "lot", "Hello", "marko", "neighbors", "I", "use", "Express", "with", "Marko", "NUMBER", "Example", "template", "NUMBER", "render", "data", "res", "How", "do", "I", "handle", "rendering", "error", "in", "this", "case", "Thanks", "require", "marko", "compiler", "NUMBER", "taglibFinder", "NUMBER", "includeDir", "dirPath", "would", "be", "nice", "feature", "I", "have", "many", "directories", "inside", "my", "project", "folder", "that", "have", "package", "NUMBER", "json", "inside", "because", "i", "need", "them", "to", "have", "individual", "node_modules", "inside", "and", "for", "other", "reasons", "as", "well", "now", "I", "cannot", "bubble", "to", "main", "project", "folder", "and", "make", "some", "components", "available", "across", "all", "directories", "there", "be", "taglibLookup", "NUMBER", "registerTaglib", "but", "seems", "to", "work", "only", "in", "node", "environment", "in", "webpack", "doesn", "t", "seem", "to", "work", "TAG", "Bug", "Report", "I", "m", "get", "maximum", "call", "stack", "exceeded", "NUMBER", "What", "be", "I", "doing", "wrong", "Context", "I", "m", "trying", "to", "benchmark", "marko", "against", "our", "current", "favorite", "handlebars", "because", "I", "expect", "it", "ll", "be", "a", "lot", "faster", "NUMBER", "I", "m", "run", "a", "matcha", "test", "so", "I", "have", "the", "following", "code", "const", "handlebars", "require", "handlebars", "require", "marko", "node", "require", "NUMBER", "install", "const", "fs", "require", "fs", "const", "data", "snipped", "for", "brevity", "suite", "Post", "template", "snipped", "Handlebars", "test", "bench", "marko", "next", "const", "template", "require", "NUMBER", "post", "NUMBER", "marko", "template", "NUMBER", "render", "data", "throw", "away", "the", "render", "output", "next", "Expected", "Behavior", "I", "should", "see", "benchmark", "results", "Actual", "Behavior", "During", "the", "marko", "test", "an", "error", "be", "throw", "that", "aborts", "the", "suite", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "I", "m", "use", "C", "NUMBER", "run", "this", "use", "matcha", "for", "node", "NUMBER", "js", "Stack", "Trace", "RangeError", "Maximum", "call", "stack", "size", "exceeded", "at", "Array", "NUMBER", "join", "native", "at", "Object", "NUMBER", "posix", "NUMBER", "resolve", "path", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "_resolveLookupPaths", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "_resolveFilename", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "_load", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "require", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "require", "internal", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "home", "ubuntu", "workspace", "benchmarks", "matcha", "test", "NUMBER", "js", "NUMBER", "NUMBER", "at", "iterate", "home", "ubuntu", "workspace", "node_modules", "matcha", "lib", "matcha", "bench", "NUMBER", "js", "NUMBER", "NUMBER", "at", "home", "ubuntu", "workspace", "node_modules", "matcha", "lib", "matcha", "bench", "NUMBER", "js", "NUMBER", "NUMBER", "TAG", "Thanks", "that", "worked", "great", "Yeah", "I", "get", "the", "idea", "from", "your", "benchmark", "set", "but", "my", "group", "wanted", "to", "see", "how", "it", "performs", "with", "our", "template", "NUMBER", "I", "figured", "it", "was", "simple", "enough", "to", "do", "NUMBER", "until", "I", "hit", "this", "issue", "NUMBER", "Thanks", "again", "It", "seems", "to", "me", "that", "some", "of", "those", "tags", "might", "be", "simpler", "than", "others", "NUMBER", "Like", "you", "said", "TAG", "may", "not", "recognize", "widgets", "within", "an", "TAG", "tag", "though", "I", "have", "a", "couple", "thoughts", "on", "how", "it", "might", "NUMBER", "Others", "like", "TAG", "could", "simply", "attach", "themselves", "to", "the", "compiler", "or", "perhaps", "even", "the", "renderer", "and", "append", "prepend", "themselves", "unconditionally", "NUMBER", "Ordering", "and", "precedence", "shouldn", "t", "affect", "those", "much", "but", "that", "s", "something", "we", "would", "still", "need", "to", "figure", "out", "eventually", "NUMBER", "Side", "note", "I", "just", "notice", "that", "the", "content", "of", "TAG", "ends", "up", "in", "TAG", "if", "it", "s", "the", "first", "document", "element", "in", "other", "words", "TAG", "TAG", "foo", "TAG", "bar", "TAG", "produces", "TAG", "TAG", "foo", "TAG", "TAG", "bar", "TAG", "TAG", "instead", "of", "TAG", "TAG", "foobar", "TAG", "TAG", "NUMBER", "It", "s", "an", "uncommon", "edge", "case", "but", "something", "to", "be", "aware", "of", "if", "excluding", "the", "TAG", "tag", "and", "possibly", "a", "bug", "in", "TAG", "NUMBER", "TAG", "Description", "TAG", "Updates", "old", "references", "of", "htmlparser", "NUMBER", "to", "htmljs", "parser", "NUMBER", "Adjusted", "some", "of", "the", "word", "in", "the", "overview", "doc", "to", "try", "and", "adapt", "the", "text", "to", "v", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "NUMBER", "f", "NUMBER", "fbd", "NUMBER", "e", "NUMBER", "c", "NUMBER", "bec", "NUMBER", "b", "NUMBER", "on", "yomed", "overview", "docs", "into", "NUMBER", "eef", "NUMBER", "df", "NUMBER", "dd", "NUMBER", "ac", "NUMBER", "f", "NUMBER", "efbf", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "NUMBER", "f", "NUMBER", "fbd", "NUMBER", "e", "NUMBER", "c", "NUMBER", "bec", "NUMBER", "b", "NUMBER", "on", "yomed", "overview", "docs", "into", "NUMBER", "eef", "NUMBER", "df", "NUMBER", "dd", "NUMBER", "ac", "NUMBER", "f", "NUMBER", "efbf", "on", "marko", "js", "master", "NUMBER", "Hi", "guys", "This", "template", "engine", "be", "Awesome", "Thanks", "for", "your", "hard", "work", "NUMBER", "One", "question", "exist", "any", "tuto", "to", "use", "with", "Express", "Sorry", "for", "this", "bad", "issue", "Nicholls", "Guys", "check", "an", "issue", "please", "express", "LINK", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "fe", "NUMBER", "NUMBER", "e", "NUMBER", "a", "NUMBER", "png", "My", "Express", "route", "be", "var", "express", "require", "express", "var", "router", "express", "NUMBER", "Router", "var", "template", "require", "NUMBER", "views", "index", "NUMBER", "marko", "GET", "home", "page", "NUMBER", "router", "NUMBER", "get", "function", "req", "res", "next", "res", "NUMBER", "marko", "template", "title", "Express", "module", "NUMBER", "export", "router", "Hi", "Patrick", "thanks", "for", "your", "quickly", "response", "my", "friend", "Can", "I", "use", "your", "require", "marko", "node", "require", "NUMBER", "install", "line", "in", "NUMBER", "app", "NUMBER", "js", "or", "be", "required", "to", "use", "in", "every", "Express", "route", "I", "m", "use", "the", "Express", "generator", "NUMBER", "Regards", "Nicholls", "What", "do", "you", "think", "to", "add", "your", "example", "into", "README", "file", "Maybe", "it", "s", "very", "useful", "for", "others", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "fc", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "e", "NUMBER", "ba", "NUMBER", "b", "NUMBER", "f", "on", "await", "error", "events", "into", "d", "NUMBER", "c", "NUMBER", "ceedfc", "NUMBER", "cdd", "NUMBER", "b", "NUMBER", "d", "NUMBER", "f", "NUMBER", "on", "v", "NUMBER", "NUMBER", "Description", "Adds", "concise", "syntax", "example", "to", "README", "NUMBER", "md", "for", "applying", "rendering", "logic", "with", "separate", "tags", "NUMBER", "Motivation", "and", "Context", "To", "make", "sure", "the", "concise", "syntax", "be", "really", "equivalent", "to", "the", "HTML", "template", "I", "run", "this", "example", "NUMBER", "I", "think", "it", "makes", "sense", "to", "include", "it", "for", "other", "new", "users", "as", "another", "quick", "introduction", "to", "the", "Marko", "syntax", "and", "the", "alternative", "way", "of", "applying", "rendering", "logic", "NUMBER", "I", "would", "have", "find", "it", "helpful", "NUMBER", "Checklist", "x", "My", "code", "follows", "the", "code", "style", "of", "this", "project", "NUMBER", "x", "I", "have", "update", "add", "documentation", "affected", "by", "my", "change", "NUMBER", "x", "I", "have", "read", "the", "CONTRIBUTING", "document", "NUMBER", "I", "have", "add", "test", "to", "cover", "my", "change", "NUMBER", "x", "All", "new", "and", "exist", "test", "pass", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "aaa", "NUMBER", "b", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "dff", "NUMBER", "cd", "NUMBER", "on", "JonasHavers", "master", "into", "cca", "NUMBER", "b", "NUMBER", "a", "NUMBER", "b", "NUMBER", "dcb", "NUMBER", "c", "NUMBER", "d", "NUMBER", "c", "NUMBER", "fa", "NUMBER", "e", "NUMBER", "on", "marko", "js", "master", "NUMBER", "while", "was", "introduce", "in", "v", "NUMBER", "but", "was", "miss", "from", "the", "docs", "NUMBER", "I", "copied", "this", "from", "the", "what", "s", "new", "page", "and", "then", "modify", "it", "to", "the", "same", "format", "as", "the", "for", "loop", "documentation", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "d", "NUMBER", "f", "NUMBER", "cb", "NUMBER", "f", "NUMBER", "f", "NUMBER", "d", "NUMBER", "d", "NUMBER", "on", "yomed", "while", "docs", "into", "a", "NUMBER", "ba", "NUMBER", "dfeb", "NUMBER", "eb", "NUMBER", "acccd", "NUMBER", "cd", "NUMBER", "ec", "NUMBER", "fc", "NUMBER", "d", "NUMBER", "b", "on", "marko", "js", "master", "NUMBER", "Sorry", "if", "this", "be", "answered", "somewhere", "I", "couldn", "t", "find", "it", "but", "can", "you", "do", "custom", "attributes", "without", "creating", "a", "custom", "tag", "I", "m", "curious", "if", "we", "can", "do", "something", "similar", "to", "what", "Angular", "has", "where", "you", "can", "create", "directives", "for", "attributes", "not", "just", "tags", "NUMBER", "As", "an", "example", "lets", "say", "I", "wanted", "to", "provide", "an", "alternate", "src", "attribute", "my", "src", "for", "the", "img", "tag", "so", "I", "could", "rewrite", "the", "URL", "before", "rendering", "NUMBER", "Is", "this", "possible", "Or", "do", "I", "have", "to", "write", "a", "custom", "image", "tag", "and", "handle", "the", "src", "attribute", "that", "way", "The", "docs", "weren", "t", "clear", "on", "this", "point", "NUMBER", "They", "mention", "custom", "tags", "AND", "attributes", "but", "I", "only", "see", "examples", "for", "tags", "NUMBER", "BTW", "I", "m", "currently", "use", "the", "component", "directory", "set", "up", "not", "a", "marko", "NUMBER", "json", "NUMBER", "Thanks", "for", "the", "quick", "response", "appreciate", "it", "NUMBER", "I", "ll", "have", "a", "look", "at", "the", "link", "you", "provide", "NUMBER", "Thanks", "Patrick", "I", "ll", "need", "to", "digest", "this", "a", "bit", "but", "it", "s", "much", "appreciated", "I", "assume", "that", "you", "must", "use", "a", "marko", "NUMBER", "json", "to", "accomplish", "this", "instead", "of", "the", "components", "directory", "Bug", "Report", "Context", "TAG", "When", "Marko", "renders", "a", "template", "use", "marko", "express", "and", "there", "be", "no", "differences", "it", "still", "sends", "the", "page", "over", "with", "a", "NUMBER", "HTTP", "status", "code", "NUMBER", "Expected", "Behavior", "If", "no", "differences", "be", "detected", "marko", "express", "should", "send", "a", "NUMBER", "to", "avoid", "extra", "data", "be", "sent", "NUMBER", "Actual", "Behavior", "Currently", "no", "matter", "what", "marko", "express", "will", "send", "the", "template", "over", "with", "a", "NUMBER", "HTTP", "code", "NUMBER", "Possible", "Fix", "Store", "an", "in", "memory", "hash", "of", "the", "previous", "render", "and", "check", "if", "it", "matches", "the", "current", "render", "if", "they", "match", "send", "a", "NUMBER", "concluding", "nothing", "has", "change", "NUMBER", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "Version", "use", "NUMBER", "Environment", "name", "and", "version", "e", "NUMBER", "g", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "js", "NUMBER", "Chrome", "NUMBER", "node", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Mac", "OS", "X", "NUMBER", "Steps", "to", "Reproduce", "NUMBER", "Install", "Marko", "within", "an", "Express", "project", "NUMBER", "NUMBER", "Require", "marko", "express", "NUMBER", "Use", "res", "NUMBER", "marko", "to", "compile", "a", "template", "and", "send", "it", "to", "a", "client", "NUMBER", "Look", "at", "the", "response", "status", "headers", "and", "see", "that", "Express", "be", "responding", "with", "a", "NUMBER", "HTTP", "code", "TAG", "That", "be", "what", "I", "thought", "but", "if", "I", "use", "pug", "jade", "template", "will", "render", "and", "if", "not", "change", "be", "detected", "express", "will", "emit", "a", "NUMBER", "With", "Marko", "it", "will", "always", "send", "a", "NUMBER", "and", "force", "the", "client", "to", "download", "the", "entire", "page", "NUMBER", "Although", "you", "would", "have", "to", "store", "a", "lot", "of", "data", "in", "memory", "if", "you", "wanted", "the", "page", "controller", "to", "calculate", "it", "without", "a", "rendered", "template", "to", "cross", "check", "it", "with", "NUMBER", "One", "way", "or", "another", "the", "data", "needs", "to", "be", "verify", "and", "I", "do", "agree", "with", "not", "wanting", "to", "waste", "CPU", "cycles", "if", "data", "hasn", "t", "change", "NUMBER", "Does", "anyone", "have", "any", "ideas", "that", "would", "be", "efficient", "I", "m", "thinking", "of", "generating", "hashes", "from", "the", "data", "here", "but", "that", "seems", "like", "a", "waste", "of", "CPU", "cycles", "itself", "NUMBER", "Sadly", "I", "have", "not", "had", "any", "time", "to", "work", "on", "this", "feature", "as", "of", "yet", "NUMBER", "The", "current", "marko", "atom", "package", "should", "use", "a", "more", "unique", "identifier", "in", "their", "package", "names", "NUMBER", "When", "searching", "for", "marko", "in", "atom", "the", "package", "appear", "in", "this", "order", "language", "marko", "NUMBER", "in", "list", "autocomplete", "marko", "NUMBER", "hyperclick", "marko", "NUMBER", "This", "makes", "it", "difficult", "to", "find", "all", "available", "marko", "package", "in", "a", "single", "search", "NUMBER", "Solution", "Change", "the", "package", "name", "from", "marko", "to", "something", "like", "markojs", "or", "marko", "js", "to", "make", "it", "easier", "to", "find", "all", "of", "the", "package", "NUMBER", "Thanks", "How", "would", "that", "work", "with", "event", "handlers", "In", "react", "template", "LINK", "template", "event", "handlers", "for", "example", "you", "can", "assign", "events", "use", "the", "same", "properties", "React", "uses", "NUMBER", "What", "be", "the", "expected", "performance", "impact", "if", "there", "be", "any", "at", "all", "As", "services", "like", "LINK", "become", "more", "ubiquitous", "and", "write", "to", "disk", "in", "an", "app", "server", "becomes", "less", "kosher", "this", "seems", "like", "a", "better", "option", "NUMBER", "I", "m", "having", "to", "manually", "load", "pass", "through", "my", "include", "right", "now", "just", "so", "I", "can", "set", "writeToDisk", "to", "false", "and", "having", "to", "set", "writeToDisk", "add", "a", "bit", "more", "noise", "to", "my", "code", "NUMBER", "My", "NUMBER", "c", "NUMBER", "patrick", "steele", "idem", "Do", "we", "have", "to", "compile", "marko", "file", "first", "in", "order", "to", "serve", "them", "dynamically", "patrick", "steele", "idem", "I", "see", "thanks", "NUMBER", "patrick", "steele", "idem", "I", "think", "I", "m", "in", "favor", "of", "make", "false", "the", "default", "NUMBER", "The", "compiled", "output", "be", "extremely", "useful", "for", "the", "things", "you", "mention", "and", "many", "others", "but", "NUMBER", "of", "the", "time", "it", "just", "wastes", "disk", "I", "O", "which", "be", "a", "very", "bad", "thing", "if", "you", "develop", "on", "cloud", "storage", "or", "flash", "drives", "which", "I", "do", "NUMBER", "On", "the", "other", "hand", "it", "s", "extremely", "easy", "to", "en", "able", "writeToDisk", "when", "you", "need", "to", "debug", "something", "not", "as", "convenient", "as", "having", "the", "file", "already", "there", "but", "still", "super", "easy", "and", "anyone", "concerned", "with", "start", "up", "time", "should", "really", "just", "pre", "compile", "everything", "in", "their", "build", "step", "and", "never", "require", "the", "compiler", "at", "all", "during", "production", "NUMBER", "FWIW", "the", "surprise", "appearance", "of", "the", "compiled", "template", "as", "a", "NUMBER", "js", "file", "can", "disrupt", "the", "typical", "file", "watching", "rebuild", "patterns", "in", "dev", "environments", "by", "firing", "off", "a", "misleading", "file", "directory", "change", "event", "NUMBER", "This", "be", "another", "thing", "that", "be", "easy", "to", "fix", "set", "ignore", "rules", "but", "NUMBER", "Indeed", "in", "dev", "you", "probably", "don", "t", "even", "want", "compilation", "caching", "to", "happen", "at", "all", "requiring", "even", "more", "little", "fix", "and", "you", "ll", "have", "to", "add", "marko", "NUMBER", "js", "file", "to", "your", "NUMBER", "gitignore", "sooner", "rather", "than", "later", "NUMBER", "Easy", "fix", "but", "now", "a", "little", "pile", "of", "them", "All", "that", "said", "Marko", "be", "awesome", "and", "I", "think", "helping", "new", "users", "to", "avoid", "these", "surprises", "can", "only", "be", "a", "good", "thing", "NUMBER", "mlrawlings", "I", "completely", "agree", "that", "the", "NUMBER", "marko", "NUMBER", "js", "file", "be", "essential", "for", "debugging", "but", "in", "my", "opinion", "it", "s", "already", "easy", "enough", "to", "generate", "them", "when", "desired", "with", "NUMBER", "node_modules", "NUMBER", "bin", "markoc", "NUMBER", "path", "to", "template", "NUMBER", "marko", "or", "even", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "true", "for", "those", "who", "don", "t", "need", "to", "worry", "about", "unnecessary", "disk", "writes", "NUMBER", "Writing", "out", "on", "error", "may", "be", "more", "convenient", "but", "it", "would", "also", "result", "in", "file", "sometimes", "appearing", "with", "little", "or", "no", "explanation", "and", "littering", "the", "project", "folders", "which", "could", "confuse", "new", "users", "even", "more", "NUMBER", "I", "would", "be", "very", "interested", "in", "source", "maps", "though", "I", "vaguely", "remember", "seeing", "discussion", "in", "an", "issue", "somewhere", "about", "them", "be", "too", "difficult", "to", "implement", "NUMBER", "mlrawlings", "I", "really", "like", "the", "idea", "of", "use", "an", "environment", "variable", "especially", "since", "the", "output", "file", "be", "only", "really", "use", "for", "production", "and", "debugging", "and", "anyone", "worried", "about", "production", "start", "up", "time", "should", "probably", "be", "compile", "during", "a", "build", "step", "instead", "NUMBER", "And", "I", "d", "love", "to", "see", "the", "compiler", "keep", "better", "track", "of", "where", "the", "code", "came", "from", "NUMBER", "That", "might", "also", "help", "with", "things", "like", "NUMBER", "The", "environment", "variable", "might", "have", "too", "great", "an", "effect", "NUMBER", "My", "personal", "primary", "use", "case", "be", "inspecting", "the", "generate", "file", "of", "only", "the", "template", "I", "m", "work", "with", "NUMBER", "The", "environment", "variable", "feature", "would", "generate", "all", "file", "in", "the", "project", "wouldn", "t", "it", "mindeavor", "I", "m", "thinking", "the", "environment", "variable", "would", "probably", "just", "switch", "writeToDisk", "on", "which", "be", "currently", "Marko", "s", "default", "behavior", "NUMBER", "If", "you", "need", "to", "compile", "only", "a", "specific", "template", "you", "can", "either", "execute", "sh", "NUMBER", "node_modules", "NUMBER", "bin", "markoc", "NUMBER", "path", "to", "template", "NUMBER", "marko", "in", "a", "shell", "or", "toggle", "writeToDisk", "on", "while", "loading", "that", "template", "for", "the", "first", "time", "js", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "true", "var", "template", "require", "NUMBER", "path", "to", "template", "NUMBER", "marko", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "false", "I", "m", "not", "aware", "of", "any", "hooks", "or", "methods", "in", "the", "API", "to", "write", "a", "specific", "template", "to", "disk", "but", "that", "s", "probably", "worth", "considering", "even", "if", "the", "default", "value", "of", "writeToDisk", "doesn", "t", "change", "NUMBER", "Something", "like", "Template", "NUMBER", "prototype", "NUMBER", "writeToDisk", "perhaps", "I", "might", "look", "into", "implement", "that", "sometime", "if", "I", "get", "the", "chance", "NUMBER", "I", "see", "NUMBER", "Personally", "I", "think", "it", "d", "be", "great", "if", "you", "could", "add", "something", "to", "the", "code", "like", "js", "TAG", "module", "NUMBER", "export", "debug", "true", "onInput", "attrs", "NUMBER", "TAG", "where", "debug", "can", "be", "true", "or", "if", "need", "be", "an", "options", "object", "like", "writeToDisk", "true", "NUMBER", "I", "would", "find", "that", "to", "be", "really", "handy", "patrick", "steele", "idem", "That", "s", "exactly", "what", "I", "was", "just", "thinking", "NUMBER", "Perhaps", "this", "would", "be", "a", "good", "first", "use", "case", "for", "the", "TAG", "tag", "that", "was", "be", "discussed", "not", "too", "long", "ago", "like", "TAG", "Yes", "now", "that", "you", "mention", "it", "a", "tag", "would", "be", "better", "NUMBER", "That", "way", "you", "can", "debug", "whether", "or", "not", "you", "have", "a", "TAG", "tag", "NUMBER", "TAG", "Custom", "root", "path", "for", "views", "Description", "Sometimes", "we", "want", "to", "use", "require", "marko", "node", "require", "NUMBER", "install", "options", "to", "the", "third", "part", "package", "NUMBER", "But", "it", "will", "set", "the", "views", "dir", "to", "package", "s", "dir", "NUMBER", "so", "should", "need", "an", "option", "to", "set", "root", "path", "NUMBER", "example", "LINK", "js", "Install", "marko", "param", "Object", "options", "function", "install", "options", "require", "marko", "node", "require", "NUMBER", "install", "options", "Stream", "render", "view", "param", "String", "view", "param", "Object", "state", "return", "Stream", "function", "render", "view", "state", "return", "require", "view", "NUMBER", "ream", "state", "module", "NUMBER", "export", "install", "render", "LINK", "marko", "app", "NUMBER", "js", "js", "const", "path", "require", "path", "const", "Engine", "require", "trek", "engine", "const", "marko", "require", "trek", "view", "marko", "marko", "NUMBER", "install", "const", "app", "new", "Engine", "app", "NUMBER", "use", "res", "res", "NUMBER", "send", "NUMBER", "marko", "NUMBER", "render", "path", "NUMBER", "join", "__dirname", "NUMBER", "index", "NUMBER", "marko", "name", "Trek", "Engine", "app", "NUMBER", "run", "NUMBER", "Maybe", "something", "along", "the", "lines", "of", "this", "NUMBER", "Nice", "work", "NUMBER", "Thanks", "NUMBER", "However", "I", "would", "recommend", "having", "your", "render", "function", "take", "the", "loaded", "template", "as", "a", "parameter", "If", "we", "have", "many", "template", "NUMBER", "pages", "that", "not", "good", "way", "NUMBER", "Hot", "reload", "of", "NUMBER", "marko", "NUMBER", "xml", "not", "implement", "Context", "Support", "for", "XML", "template", "in", "_", "NUMBER", "marko", "NUMBER", "xml_", "file", "have", "some", "quite", "good", "support", "in", "runtime", "and", "tool", "but", "hot", "reloading", "remains", "unsupported", "NUMBER", "Possible", "Fix", "Currently", "the", "code", "in", "LINK", "js", "marko", "blob", "master", "hot", "reload", "index", "NUMBER", "js", "L", "NUMBER", "looks", "like", "if", "path", "NUMBER", "endsWith", "NUMBER", "marko", "path", "NUMBER", "endsWith", "NUMBER", "marko", "NUMBER", "html", "Uncache", "just", "the", "modify", "template", "delete", "require", "NUMBER", "cache", "path", "delete", "require", "NUMBER", "cache", "path", "NUMBER", "js", "A", "fix", "could", "be", "if", "path", "NUMBER", "endsWith", "NUMBER", "marko", "path", "NUMBER", "endsWith", "NUMBER", "marko", "NUMBER", "html", "path", "NUMBER", "endsWith", "NUMBER", "marko", "NUMBER", "xml", "This", "be", "a", "though", "problem", "since", "we", "be", "restricted", "to", "what", "require", "CAN", "do", "and", "not", "what", "we", "WANT", "to", "do", "NUMBER", "Personally", "I", "favor", "composite", "extensions", "such", "as", "NUMBER", "marko", "NUMBER", "html", "and", "NUMBER", "marko", "NUMBER", "xml", "since", "they", "essientially", "still", "be", "html", "and", "xml", "and", "thus", "wont", "break", "my", "tooling", "lint", "syntax", "hl", "etc", "NUMBER", "require", "on", "the", "other", "hand", "has", "no", "sympathy", "for", "composites", "and", "will", "treat", "NUMBER", "marko", "NUMBER", "xml", "as", "any", "NUMBER", "xml", "NUMBER", "Some", "observations", "a", "replacement", "api", "for", "require", "NUMBER", "some", "NUMBER", "marko", "isnt", "feasible", "since", "require", "be", "the", "only", "viable", "api", "that", "has", "the", "much", "needed", "implicit", "dependency", "to", "the", "module", "variable", "__dirname", "required", "for", "resolving", "the", "full", "path", "NUMBER", "hot", "reloading", "in", "marko", "be", "actually", "more", "of", "a", "_hot", "unloading_", "LINK", "L", "NUMBER", "So", "a", "possible", "solution", "to", "this", "be", "to", "alter", "the", "semantics", "of", "install", "NUMBER", "Consider", "install", "extension", "NUMBER", "marko", "NUMBER", "xml", "Make", "the", "implementation", "of", "require", "marko", "hot", "reload", "NUMBER", "handleFileModified", "TAG", "aware", "of", "the", "full", "extension", "NUMBER", "marko", "NUMBER", "xml", "NUMBER", "Alter", "the", "require", "NUMBER", "extensions", "mapping", "use", "the", "effective", "extension", "in", "this", "case", "NUMBER", "xml", "LINK", "js", "marko", "blob", "master", "node", "require", "NUMBER", "js", "L", "NUMBER", "My", "guess", "be", "that", "this", "be", "an", "addition", "rather", "than", "a", "breaking", "change", "since", "composite", "extensions", "currently", "has", "no", "effect", "at", "least", "not", "the", "intended", "on", "install", "NUMBER", "Unfortunately", "I", "have", "little", "time", "for", "this", "at", "the", "moment", "mainly", "since", "I", "work", "full", "hours", "in", "windows", "environments", "which", "doesnt", "support", "symlinks", "use", "in", "the", "test", "NUMBER", "patrick", "steele", "idem", "let", "me", "come", "back", "on", "this", "perhaps", "I", "dust", "of", "my", "old", "McBookPro", "in", "the", "weekend", "NUMBER", "I", "want", "a", "package", "just", "dependent", "on", "marko", "and", "not", "modify", "it", "NUMBER", "Is", "it", "ok", "under", "MIT", "for", "package", "Thanks", "NUMBER", "So", "It", "s", "ok", "under", "MIT", "NUMBER", "Cool", "Thank", "you", "Safari", "be", "waiting", "the", "completion", "of", "the", "first", "await", "tag", "When", "i", "try", "to", "render", "async", "fragment", "await", "tag", "In", "Chrome", "without", "client", "reorder", "NUMBER", "Outer", "html", "rendered", "NUMBER", "First", "await", "tags", "rendered", "NUMBER", "Second", "await", "tag", "rendered", "_With", "client", "order", "same", "except", "order", "of", "await", "tags", "like", "expected", "NUMBER", "_", "In", "Safari", "without", "client", "reorder", "NUMBER", "Not", "render", "outer", "html", "until", "all", "await", "tags", "do", "NUMBER", "All", "html", "rendered", "together", "In", "Safari", "with", "client", "reorder", "NUMBER", "Safari", "be", "waiting", "until", "first", "await", "tag", "do", "NUMBER", "Outer", "html", "and", "first", "await", "tag", "rendered", "NUMBER", "Second", "await", "tag", "rendered", "Hi", "patrick", "steele", "idem", "my", "safari", "version", "be", "NUMBER", "NUMBER", "on", "OSX", "El", "Capitan", "and", "same", "issue", "on", "LINK", "boiler", "NUMBER", "I", "find", "solution", "it", "was", "happen", "because", "i", "run", "server", "under", "browser", "sync", "proxy", "NUMBER", "I", "d", "like", "to", "start", "by", "saying", "awesome", "concept", "finally", "a", "library", "which", "puts", "performance", "first", "NUMBER", "Now", "I", "ve", "just", "come", "from", "an", "AngularJS", "Gulp", "development", "background", "so", "I", "m", "new", "to", "the", "whole", "JavaScript", "bundlers", "concept", "NUMBER", "I", "m", "trying", "to", "wrap", "my", "head", "around", "how", "the", "recommended", "file", "structure", "should", "look", "like", "on", "bigger", "projects", "NUMBER", "I", "ve", "be", "downloading", "and", "test", "out", "the", "samples", "awesome", "but", "I", "haven", "t", "be", "able", "to", "stitch", "them", "together", "NUMBER", "I", "also", "had", "a", "hard", "time", "understanding", "how", "client", "side", "rendering", "with", "marko", "works", "server", "side", "wasn", "t", "too", "hard", "to", "figure", "out", "come", "from", "Handlebars", "it", "really", "wasn", "t", "that", "much", "different", "NUMBER", "Tbh", "I", "think", "explaining", "from", "scratch", "for", "beginners", "who", "have", "just", "come", "from", "i", "NUMBER", "e", "NUMBER", "jQuery", "how", "marko", "works", "will", "draw", "_a", "lot_", "more", "attention", "to", "it", "NUMBER", "After", "looking", "at", "the", "following", "repos", "I", "ve", "sot", "of", "come", "up", "with", "the", "following", "file", "structure", "NUMBER", "project", "src", "client", "NUMBER", "js", "TAG", "TAG", "TAG", "I", "be", "having", "too", "many", "components", "in", "on", "folder", "project", "src", "componenets", "NUMBER", "Whats", "the", "way", "of", "grouping", "components", "pages", "wise", "LINK", "require", "marko", "node", "require", "NUMBER", "install", "var", "koa", "require", "koa", "var", "app", "koa", "app", "NUMBER", "use", "function", "this", "NUMBER", "body", "template", "NUMBER", "ream", "name", "Frank", "count", "NUMBER", "colors", "red", "green", "blue", "app", "NUMBER", "listen", "NUMBER", "However", "it", "state", "at", "LINK", "api", "streamtemplatepath", "templatedata", "streamreadable", "stream", "templatePath", "templateData", "stream", "NUMBER", "Readable", "Deprecated", "NUMBER", "Do", "not", "use", "NUMBER", "So", "use", "stream", "or", "not", "Feels", "like", "you", "guys", "should", "have", "one", "place", "for", "information", "on", "usage", "NUMBER", "This", "be", "confusing", "Apologize", "NUMBER", "LINK", "api", "streamtemplatedata", "streamreadable", "Was", "looking", "at", "the", "wrong", "method", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "bd", "NUMBER", "be", "NUMBER", "b", "NUMBER", "eaa", "NUMBER", "fd", "NUMBER", "da", "NUMBER", "fec", "NUMBER", "a", "NUMBER", "ac", "NUMBER", "a", "NUMBER", "b", "on", "issue", "NUMBER", "into", "NUMBER", "a", "NUMBER", "e", "NUMBER", "e", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ca", "NUMBER", "d", "NUMBER", "cc", "NUMBER", "c", "NUMBER", "b", "NUMBER", "a", "NUMBER", "fd", "on", "master", "NUMBER", "Is", "it", "possible", "to", "see", "a", "workaround", "for", "this", "outside", "of", "js", "TAG", "var", "empty", "require", "marko", "helpers", "empty", "var", "notEmpty", "require", "marko", "helpers", "notEmpty", "TAG", "I", "m", "use", "TAG", "NUMBER", "TAG", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "a", "NUMBER", "bf", "NUMBER", "c", "NUMBER", "ba", "NUMBER", "a", "NUMBER", "fd", "NUMBER", "c", "NUMBER", "f", "NUMBER", "a", "NUMBER", "b", "NUMBER", "on", "sdepold", "patch", "NUMBER", "into", "NUMBER", "e", "NUMBER", "d", "NUMBER", "c", "NUMBER", "f", "NUMBER", "fe", "NUMBER", "cb", "NUMBER", "e", "NUMBER", "fa", "NUMBER", "f", "NUMBER", "dd", "NUMBER", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "decreased", "NUMBER", "to", "NUMBER", "when", "pulling", "b", "NUMBER", "b", "NUMBER", "be", "NUMBER", "cbd", "NUMBER", "fba", "NUMBER", "b", "NUMBER", "f", "NUMBER", "f", "NUMBER", "b", "NUMBER", "adffbfefd", "NUMBER", "on", "attr", "empty", "string", "into", "NUMBER", "d", "NUMBER", "ce", "NUMBER", "f", "NUMBER", "c", "NUMBER", "ac", "NUMBER", "f", "NUMBER", "e", "NUMBER", "ace", "NUMBER", "a", "NUMBER", "on", "master", "NUMBER", "Not", "sure", "if", "this", "be", "a", "problem", "with", "release", "artifact", "or", "not", "Seems", "to", "only", "affect", "marko", "even", "on", "version", "NUMBER", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "npm", "uninstall", "marko", "app", "module", "path", "NUMBER", "node_modules", "app", "module", "path", "async", "writer", "NUMBER", "node_modules", "async", "writer", "browser", "refresh", "client", "NUMBER", "node_modules", "browser", "refresh", "client", "char", "props", "NUMBER", "node_modules", "char", "props", "htmljs", "parser", "NUMBER", "node_modules", "htmljs", "parser", "object", "assign", "NUMBER", "node_modules", "marko", "node_modules", "object", "assign", "property", "handlers", "NUMBER", "node_modules", "property", "handlers", "raptor", "args", "NUMBER", "node_modules", "raptor", "args", "raptor", "async", "NUMBER", "node_modules", "raptor", "async", "lasso", "caching", "fs", "NUMBER", "node_modules", "lasso", "caching", "fs", "lasso", "package", "root", "NUMBER", "node_modules", "lasso", "package", "root", "raptor", "polyfill", "NUMBER", "node_modules", "raptor", "polyfill", "deresolve", "NUMBER", "node_modules", "deresolve", "raptor", "regexp", "NUMBER", "node_modules", "raptor", "regexp", "raptor", "stacktraces", "NUMBER", "node_modules", "raptor", "stacktraces", "raptor", "logging", "NUMBER", "node_modules", "raptor", "logging", "raptor", "strings", "NUMBER", "node_modules", "raptor", "strings", "raptor", "json", "NUMBER", "node_modules", "raptor", "json", "raptor", "util", "NUMBER", "node_modules", "raptor", "util", "raptor", "promises", "NUMBER", "node_modules", "raptor", "promises", "strip", "json", "comments", "NUMBER", "node_modules", "strip", "json", "comments", "try", "require", "NUMBER", "node_modules", "try", "require", "marko", "NUMBER", "node_modules", "marko", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "npm", "install", "consumer", "NUMBER", "Users", "robinanil", "work", "admin", "consumer", "marko", "NUMBER", "app", "module", "path", "NUMBER", "async", "writer", "NUMBER", "browser", "refresh", "client", "NUMBER", "char", "props", "NUMBER", "deresolve", "NUMBER", "htmljs", "parser", "NUMBER", "lasso", "package", "root", "NUMBER", "lasso", "caching", "fs", "NUMBER", "object", "assign", "NUMBER", "property", "handlers", "NUMBER", "raptor", "args", "NUMBER", "raptor", "async", "NUMBER", "raptor", "json", "NUMBER", "raptor", "logging", "NUMBER", "raptor", "stacktraces", "NUMBER", "raptor", "polyfill", "NUMBER", "raptor", "promises", "NUMBER", "raptor", "regexp", "NUMBER", "raptor", "strings", "NUMBER", "raptor", "util", "NUMBER", "strip", "json", "comments", "NUMBER", "try", "require", "NUMBER", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "ls", "node_modules", "marko", "runtime", "deprecateHyphens", "NUMBER", "js", "helpers", "NUMBER", "js", "loader", "NUMBER", "js", "loader", "NUMBER", "js", "NUMBER", "orig", "loader_browser", "NUMBER", "js", "marko", "runtime", "NUMBER", "js", "package", "NUMBER", "json", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "NUMBER", "do", "not", "have", "this", "issue", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "npm", "install", "npm", "WARN", "deprecate", "minimatch", "NUMBER", "Please", "update", "to", "minimatch", "NUMBER", "or", "higher", "to", "avoid", "a", "RegExp", "DoS", "issue", "consumer", "NUMBER", "Users", "robinanil", "work", "admin", "consumer", "marko", "NUMBER", "minimatch", "NUMBER", "lru", "cache", "NUMBER", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "ls", "node_modules", "marko", "runtime", "deprecateHyphens", "NUMBER", "js", "helpers", "NUMBER", "js", "loader", "NUMBER", "js", "loader_browser", "NUMBER", "js", "marko", "runtime", "NUMBER", "js", "package", "NUMBER", "json", "robinanil", "NUMBER", "NUMBER", "NUMBER", "work", "admin", "consumer", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "fc", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "c", "NUMBER", "d", "NUMBER", "on", "issue", "NUMBER", "into", "d", "NUMBER", "ac", "NUMBER", "aa", "NUMBER", "b", "NUMBER", "b", "NUMBER", "b", "NUMBER", "e", "NUMBER", "c", "NUMBER", "a", "NUMBER", "ff", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "eafb", "NUMBER", "bd", "NUMBER", "bd", "NUMBER", "bc", "NUMBER", "a", "NUMBER", "e", "NUMBER", "a", "NUMBER", "ced", "NUMBER", "c", "NUMBER", "f", "NUMBER", "on", "issue", "NUMBER", "into", "NUMBER", "e", "NUMBER", "b", "NUMBER", "cee", "NUMBER", "a", "NUMBER", "ca", "NUMBER", "fa", "NUMBER", "c", "NUMBER", "on", "master", "NUMBER", "Description", "Currently", "marko", "widgets", "allows", "to", "define", "a", "UI", "component", "s", "renderer", "as", "require", "marko", "widgets", "NUMBER", "defineRenderer", "NUMBER", "NUMBER", "I", "would", "like", "to", "propose", "a", "similar", "but", "simpler", "require", "marko", "NUMBER", "defineRenderer", "NUMBER", "Context", "Building", "our", "project", "we", "ve", "defined", "custom", "taglibs", "that", "export", "the", "simplest", "components", "to", "more", "complex", "components", "NUMBER", "For", "simple", "componets", "server", "rendered", "only", "no", "state", "little", "to", "no", "client", "behavior", "our", "approach", "to", "custom", "taglibs", "has", "be", "to", "export", "in", "index", "NUMBER", "js", "a", "function", "that", "takes", "an", "input", "and", "then", "calls", "template", "NUMBER", "render", "NUMBER", "module", "NUMBER", "export", "function", "input", "out", "template", "NUMBER", "render", "input", "out", "Unlike", "defineRenderer", "this", "do", "not", "export", "a", "render", "function", "similar", "to", "defineRenderer", "NUMBER", "We", "could", "set", "export", "NUMBER", "render", "or", "use", "createRenderFunc", "from", "raptor", "renderer", "however", "I", "would", "like", "to", "propose", "a", "defineRenderer", "in", "marko", "with", "similar", "but", "much", "simpler", "life", "cycle", "events", "NUMBER", "module", "NUMBER", "export", "require", "marko", "NUMBER", "defineRenderer", "template", "require", "NUMBER", "template", "NUMBER", "marko", "getTemplateData", "function", "input", "input", "NUMBER", "time", "Date", "NUMBER", "now", "return", "input", "The", "add", "benefit", "and", "why", "this", "beats", "export", "NUMBER", "render", "or", "createRenderFunc", "be", "that", "if", "the", "simple", "component", "takes", "on", "a", "more", "complex", "role", "add", "widgets", "any", "extra", "lifecycle", "event", "methods", "be", "straightforward", "and", "painless", "NUMBER", "Thanks", "I", "always", "thought", "this", "API", "difference", "between", "marko", "and", "marko", "widgets", "was", "a", "bit", "strange", "NUMBER", "totally", "agree", "here", "NUMBER", "Bug", "Report", "Context", "I", "have", "a", "project", "where", "we", "embed", "another", "templating", "language", "inside", "of", "a", "marko", "template", "NUMBER", "Because", "of", "this", "there", "be", "cases", "where", "we", "need", "to", "disable", "Marko", "s", "parsing", "for", "sections", "of", "HTML", "so", "that", "Marko", "do", "not", "try", "to", "parse", "foreign", "template", "syntax", "that", "may", "throw", "error", "NUMBER", "We", "use", "the", "marko", "body", "static", "text", "attribute", "to", "disable", "Marko", "parsing", "NUMBER", "HTML", "snippets", "that", "causes", "parser", "error", "Example", "NUMBER", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "Example", "NUMBER", "TAG", "TAG", "Other", "Content", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "Note", "that", "the", "element", "type", "of", "node", "with", "marko", "body", "attribute", "must", "match", "some", "element", "within", "it", "NUMBER", "Expected", "Behavior", "The", "output", "should", "be", "Example", "NUMBER", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "Example", "NUMBER", "TAG", "TAG", "Other", "Content", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "Actual", "Behavior", "Example", "NUMBER", "Parser", "error", "The", "closing", "div", "tag", "was", "not", "expected", "Example", "NUMBER", "Parser", "error", "The", "closing", "section", "tag", "was", "not", "expected", "Possible", "Fix", "TAG", "TAG", "TAG", "Additional", "Info", "TAG", "Your", "Environment", "Versions", "use", "Marko", "NUMBER", "Lasso", "NUMBER", "Lasso", "Marko", "NUMBER", "Operating", "System", "and", "version", "desktop", "or", "mobile", "Ubuntu", "NUMBER", "Link", "to", "your", "project", "eBay", "Internal", "Steps", "to", "Reproduce", "Input", "either", "of", "these", "pieces", "of", "code", "on", "LINK", "online", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "TAG", "TAG", "Other", "Content", "TAG", "TAG", "Content", "Goes", "Here", "TAG", "TAG", "Stack", "Trace", "Example", "NUMBER", "Parser", "error", "The", "closing", "div", "tag", "was", "not", "expected", "Example", "NUMBER", "Parser", "error", "The", "closing", "section", "tag", "was", "not", "expected", "TAG", "A", "custom", "tag", "would", "be", "great", "Another", "huge", "benefit", "of", "a", "custom", "marko", "parser", "tag", "versus", "attribute", "on", "a", "rendered", "tag", "be", "that", "it", "can", "act", "a", "non", "rendered", "parser", "directive", "resulting", "in", "no", "additional", "HTML", "output", "DOM", "structure", "change", "NUMBER", "Background", "When", "I", "use", "the", "exist", "version", "of", "this", "marko", "body", "attribute", "I", "wanted", "to", "be", "able", "to", "ignore", "a", "block", "of", "HTML", "which", "contained", "non", "marko", "compatible", "AngularJS", "syntax", "in", "it", "but", "not", "result", "in", "a", "new", "non", "functional", "node", "that", "wraps", "the", "content", "which", "can", "potentially", "affect", "animation", "and", "browser", "compositing", "performance", "depending", "on", "the", "kind", "of", "operations", "you", "perform", "on", "your", "DOM", "elements", "NUMBER", "I", "ended", "up", "attaching", "the", "marko", "body", "attribute", "to", "each", "HTML", "element", "but", "had", "to", "be", "careful", "of", "the", "same", "element", "type", "within", "to", "prevent", "this", "gotcha", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "cdc", "NUMBER", "afc", "NUMBER", "e", "NUMBER", "a", "NUMBER", "a", "NUMBER", "b", "NUMBER", "d", "NUMBER", "fd", "NUMBER", "on", "exclude", "dir", "fix", "into", "f", "NUMBER", "dc", "NUMBER", "d", "NUMBER", "bc", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fb", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "adea", "NUMBER", "ca", "NUMBER", "a", "NUMBER", "d", "NUMBER", "cc", "NUMBER", "d", "NUMBER", "fe", "NUMBER", "a", "NUMBER", "fc", "NUMBER", "eb", "NUMBER", "f", "NUMBER", "ee", "NUMBER", "ded", "on", "exclude", "dir", "fix", "into", "f", "NUMBER", "dc", "NUMBER", "d", "NUMBER", "bc", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fb", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "e", "NUMBER", "d", "NUMBER", "b", "NUMBER", "d", "NUMBER", "cacf", "NUMBER", "ad", "NUMBER", "aa", "NUMBER", "c", "NUMBER", "d", "NUMBER", "e", "NUMBER", "bb", "NUMBER", "on", "exclude", "dir", "fix", "into", "f", "NUMBER", "dc", "NUMBER", "d", "NUMBER", "bc", "NUMBER", "bb", "NUMBER", "a", "NUMBER", "e", "NUMBER", "c", "NUMBER", "fb", "NUMBER", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "e", "NUMBER", "da", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "a", "NUMBER", "f", "NUMBER", "cf", "NUMBER", "d", "on", "autodiscover", "components", "into", "NUMBER", "e", "NUMBER", "b", "NUMBER", "f", "NUMBER", "f", "NUMBER", "d", "NUMBER", "e", "NUMBER", "bbca", "NUMBER", "a", "NUMBER", "c", "NUMBER", "on", "master", "NUMBER", "I", "m", "fairly", "new", "to", "Marko", "and", "I", "m", "having", "some", "difficulties", "handle", "error", "gracefully", "when", "rendering", "template", "on", "the", "server", "NUMBER", "Initially", "I", "structured", "my", "app", "to", "pipe", "the", "render", "stream", "straight", "to", "the", "response", "js", "const", "marko", "require", "marko", "const", "template", "marko", "NUMBER", "load", "filename", "buffer", "false", "return", "req", "res", "NUMBER", "return", "template", "NUMBER", "render", "data", "res", "But", "when", "the", "rendering", "process", "error", "E", "NUMBER", "G", "NUMBER", "attempting", "to", "access", "an", "undefined", "property", "this", "results", "in", "an", "unfinished", "response", "NUMBER", "Preferably", "I", "d", "like", "to", "catch", "the", "error", "log", "it", "and", "fail", "more", "gracefully", "even", "it", "means", "taking", "a", "small", "perf", "hit", "js", "with", "callback", "return", "req", "res", "NUMBER", "return", "template", "NUMBER", "render", "data", "err", "data", "if", "err", "log", "err", "res", "NUMBER", "send", "NUMBER", "NUMBER", "end", "else", "res", "NUMBER", "send", "data", "or", "with", "streams", "return", "req", "res", "NUMBER", "return", "template", "NUMBER", "ream", "data", "stream", "NUMBER", "on", "data", "data", "output", "NUMBER", "push", "data", "stream", "NUMBER", "on", "error", "err", "error", "NUMBER", "push", "err", "stream", "NUMBER", "on", "end", "if", "error", "NUMBER", "length", "log", "NUMBER", "apply", "null", "error", "res", "NUMBER", "send", "NUMBER", "NUMBER", "end", "else", "res", "NUMBER", "send", "output", "NUMBER", "join", "return", "stream", "However", "neither", "the", "streaming", "nor", "callback", "interface", "be", "currently", "able", "to", "catch", "such", "an", "error", "with", "the", "effect", "of", "potentially", "crash", "the", "process", "NUMBER", "Are", "you", "able", "to", "recommend", "a", "strategy", "whereby", "template", "can", "fail", "more", "gracefully", "at", "render", "time", "Thank", "you", "for", "your", "fast", "response", "patrick", "steele", "idem", "I", "actually", "read", "the", "article", "you", "linked", "to", "before", "posting", "my", "question", "too", "I", "d", "also", "tried", "promises", "for", "the", "implicit", "try", "catch", "but", "I", "d", "made", "the", "mistake", "of", "_returning__", "the", "result", "of", "the", "render", "method", "thanks", "to", "your", "example", "I", "ll", "continue", "with", "that", "path", "NUMBER", "A", "promise", "based", "API", "sounds", "like", "a", "very", "good", "idea", "to", "me", "I", "m", "trying", "to", "pretty", "print", "some", "JS", "that", "comes", "from", "CoffeeScript", "s", "compile", "and", "use", "a", "compile", "time", "tag", "LINK", "js", "marko", "blob", "master", "docs", "compile", "time", "tags", "NUMBER", "md", "like", "so", "marko", "NUMBER", "json", "js", "TAG", "code", "generator", "NUMBER", "lib", "tags", "coffee", "script", "body", "static", "text", "preserve", "whitespace", "true", "bare", "boolean", "TAG", "code", "generator", "NUMBER", "lib", "tags", "stylus", "css", "body", "static", "text", "preserve", "whitespace", "true", "compress", "boolean", "paths", "array", "NUMBER", "coffee", "script", "NUMBER", "coffee", "coffee", "use", "strict", "compile", "require", "coffee", "script", "module", "NUMBER", "export", "el", "generator", "builder", "generator", "bare", "el", "NUMBER", "getAttributeValue", "bare", "or", "yes", "print", "process", "NUMBER", "env", "NUMBER", "npm_lifecycle_event", "be", "standard", "js", "compile", "el", "NUMBER", "bodyText", "bare", "print", "console", "NUMBER", "log", "js", "return", "builder", "NUMBER", "htmlElement", "script", "builder", "NUMBER", "text", "builder", "NUMBER", "literal", "js", "stylus", "css", "NUMBER", "coffee", "coffee", "use", "strict", "stylus", "require", "stylus", "module", "NUMBER", "export", "el", "generator", "builder", "generator", "compress", "process", "NUMBER", "env", "NUMBER", "npm_lifecycle_event", "be", "optimized", "css", "stylus", "el", "NUMBER", "bodyText", "NUMBER", "set", "compress", "el", "NUMBER", "getAttributeValue", "compress", "or", "compress", "or", "no", "NUMBER", "set", "paths", "el", "NUMBER", "getAttributeValue", "paths", "or", "NUMBER", "render", "console", "NUMBER", "log", "css", "return", "builder", "NUMBER", "htmlElement", "style", "builder", "NUMBER", "text", "builder", "NUMBER", "literal", "css", "Sample", "console", "output", "js", "js", "var", "clickDefault", "collapseFormat", "initLayer", "initLayer", "function", "screenad", "NUMBER", "hide", "self", "screenad", "NUMBER", "setSize", "NUMBER", "NUMBER", "screenad", "NUMBER", "setAlignment", "banner", "banner", "screenad", "NUMBER", "setOffset", "NUMBER", "NUMBER", "screenad", "NUMBER", "setSticky", "true", "screenad", "NUMBER", "setZIndex", "NUMBER", "return", "screenad", "NUMBER", "position", "collapseFormat", "function", "screenad", "NUMBER", "event", "user_close", "return", "screenad", "NUMBER", "hide", "clickDefault", "function", "return", "screenad", "NUMBER", "click", "var", "init_layer", "init_layer", "function", "screenad", "NUMBER", "hide", "self", "screenad", "NUMBER", "setAlignment", "banner", "banner", "screenad", "NUMBER", "setSticky", "layer", "NUMBER", "icky", "screenad", "NUMBER", "setSize", "layer", "NUMBER", "width", "layer", "NUMBER", "height", "screenad", "NUMBER", "setOffset", "layer", "NUMBER", "x", "layer", "NUMBER", "y", "screenad", "NUMBER", "setZIndex", "layer", "NUMBER", "z", "screenad", "NUMBER", "position", "Sample", "console", "output", "css", "css", "body", "background", "color", "NUMBER", "closebutton", "background", "image", "url", "close", "NUMBER", "png", "bottom", "NUMBER", "px", "cursor", "pointer", "height", "NUMBER", "px", "position", "absolute", "right", "NUMBER", "px", "width", "NUMBER", "px", "z", "index", "NUMBER", "closebutton", "hover", "opacity", "NUMBER", "wrap_bg", "background", "image", "url", "backup", "layer", "NUMBER", "jpg", "background", "repeat", "no", "repeat", "cursor", "pointer", "height", "NUMBER", "width", "NUMBER", "z", "index", "NUMBER", "Sample", "compiled", "html", "notice", "the", "output", "between", "TAG", "and", "TAG", "tags", "html", "TAG", "TAG", "TAG", "NUMBER", "TAG", "var", "init_banner", "init_banner", "function", "screenad", "NUMBER", "setAlignment", "banner", "banner", "screenad", "NUMBER", "setSticky", "banner", "NUMBER", "icky", "screenad", "NUMBER", "setSize", "banner", "NUMBER", "width", "banner", "NUMBER", "height", "screenad", "NUMBER", "setOffset", "banner", "NUMBER", "x", "banner", "NUMBER", "y", "screenad", "NUMBER", "setZIndex", "banner", "NUMBER", "z", "screenad", "NUMBER", "position", "TAG", "TAG", "body", "font", "family", "Trebuchet", "MS", "text", "align", "center", "content", "height", "NUMBER", "width", "NUMBER", "container", "background", "color", "fff", "z", "index", "NUMBER", "clicktoexpand", "background", "color", "fff", "background", "image", "url", "clicktoexpand", "NUMBER", "png", "background", "repeat", "no", "repeat", "bottom", "NUMBER", "px", "cursor", "pointer", "height", "NUMBER", "px", "left", "NUMBER", "px", "position", "absolute", "width", "NUMBER", "px", "z", "index", "NUMBER", "clicktoexpand", "hover", "opacity", "NUMBER", "TAG", "TAG", "var", "_autoExpand", "_click", "_expandType", "clickDefault", "ignite", "init", "showLayer", "start", "_click", "click", "_expandType", "_click", "_autoExpand", "false", "ignite", "false", "init", "function", "screenad", "NUMBER", "event", "screenad", "NUMBER", "deviceType", "if", "ignite", "screenad", "NUMBER", "onSync", "start", "ignite", "true", "start", "function", "if", "_expandType", "_click", "document", "NUMBER", "getElementById", "container", "NUMBER", "addEventListener", "_click", "clickDefault", "if", "_autoExpand", "ignite", "showLayer", "screenad", "NUMBER", "setSize", "NUMBER", "NUMBER", "screenad", "NUMBER", "setAlignment", "banner", "banner", "screenad", "NUMBER", "setOffset", "NUMBER", "NUMBER", "screenad", "NUMBER", "setSticky", "true", "screenad", "NUMBER", "setZIndex", "NUMBER", "screenad", "NUMBER", "position", "showLayer", "function", "screenad", "NUMBER", "event", "expand", "screenad", "NUMBER", "show", "all", "clickDefault", "function", "screenad", "NUMBER", "click", "TAG", "NUMBER", "TAG", "TAG", "TAG", "window", "NUMBER", "banner", "width", "NUMBER", "height", "NUMBER", "sticky", "true", "x", "NUMBER", "y", "NUMBER", "z", "NUMBER", "libraries", "media", "NUMBER", "adrcdn", "NUMBER", "com", "scripts", "external", "velocityjs", "NUMBER", "velocity", "NUMBER", "min", "NUMBER", "js", "media", "NUMBER", "adrcdn", "NUMBER", "com", "scripts", "external", "velocityjs", "NUMBER", "velocity", "NUMBER", "ui", "NUMBER", "min", "NUMBER", "js", "TAG", "NUMBER", "TAG", "TAG", "Expected", "output", "I", "would", "like", "the", "js", "whitespace", "to", "be", "preserved", "whenever", "process", "NUMBER", "env", "NUMBER", "npm_lifecycle_event", "standard", "i", "NUMBER", "e", "NUMBER", "when", "npm", "run", "standard", "be", "run", "and", "minify", "whenever", "the", "same", "env", "var", "be", "set", "to", "optimized", "NUMBER", "Is", "there", "a", "way", "to", "accomplish", "this", "mlrawlings", "perfect", "I", "should", "ve", "looked", "at", "builder", "NUMBER", "text", "instead", "of", "builder", "NUMBER", "literal", "first", "Thanks", "HTH", "HTH", "Marko", "be", "not", "showing", "any", "error", "relate", "to", "unexpect", "characters", "invalid", "JSON", "config", "NUMBER", "Invalid", "json", "config", "browser", "NUMBER", "json", "type", "js", "url", "LINK", "Error", "shown", "after", "some", "time", "Error", "Async", "fragment", "fail", "lasso", "slot", "head", "NUMBER", "Exception", "Error", "Async", "fragment", "lasso", "slot", "head", "timed", "out", "after", "NUMBER", "ms", "I", "believe", "a", "parsing", "error", "can", "be", "throw", "right", "away", "if", "browser", "NUMBER", "json", "or", "any", "other", "config", "file", "be", "invalid", "and", "marko", "be", "unable", "to", "parse", "such", "file", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "fd", "NUMBER", "e", "NUMBER", "ab", "NUMBER", "d", "NUMBER", "ffbe", "NUMBER", "f", "NUMBER", "e", "NUMBER", "cf", "NUMBER", "a", "NUMBER", "e", "on", "contribute", "into", "NUMBER", "bccab", "NUMBER", "ebc", "NUMBER", "cab", "NUMBER", "e", "NUMBER", "cb", "NUMBER", "c", "NUMBER", "on", "master", "NUMBER", "It", "seems", "like", "there", "be", "a", "lot", "of", "other", "pieces", "where", "we", "have", "convention", "with", "the", "additional", "option", "of", "provide", "your", "own", "NUMBER", "E", "NUMBER", "g", "NUMBER", "renderer", "NUMBER", "js", "will", "be", "find", "automatically", "but", "you", "can", "specify", "your", "own", "renderer", "naming", "if", "desired", "NUMBER", "Might", "be", "more", "consistent", "to", "apply", "that", "to", "custom", "tag", "discovery", "as", "well", "so", "that", "we", "look", "for", "components", "by", "default", "but", "allow", "customization", "if", "needed", "NUMBER", "This", "would", "mean", "that", "the", "name", "components", "can", "t", "be", "use", "for", "anything", "else", "though", "NUMBER", "Practically", "speaking", "my", "components", "folder", "be", "not", "usually", "completely", "flat", "so", "my", "nested", "components", "would", "need", "the", "discovery", "path", "in", "marko", "NUMBER", "json", "anyway", "NUMBER", "mlrawlings", "I", "see", "although", "in", "my", "case", "I", "don", "t", "normally", "need", "an", "entire", "new", "components", "folder", "for", "my", "sub", "components", "so", "it", "would", "be", "like", "src", "components", "some", "component", "some", "subcomponent", "another", "subcomponent", "index", "NUMBER", "js", "template", "NUMBER", "marko", "So", "if", "this", "change", "was", "made", "it", "would", "mean", "that", "my", "small", "projects", "wouldn", "t", "need", "a", "marko", "NUMBER", "json", "file", "while", "my", "larger", "projects", "would", "have", "one", "string", "remove", "from", "the", "config", "lookup", "array", "NUMBER", "The", "alt", "attribute", "has", "a", "few", "scenarios", "where", "it", "should", "be", "an", "empty", "string", "particularly", "when", "use", "on", "decorative", "images", "LINK", "content", "NUMBER", "html", "a", "purely", "decorative", "image", "that", "doesn", "NUMBER", "t", "add", "any", "information", "In", "marko", "v", "NUMBER", "rendering", "TAG", "will", "become", "TAG", "NUMBER", "Haven", "t", "checked", "the", "exact", "output", "in", "v", "NUMBER", "but", "I", "believe", "the", "issue", "be", "there", "too", "NUMBER", "Is", "there", "a", "workaround", "to", "get", "empty", "strings", "to", "show", "up", "I", "imagine", "there", "might", "be", "similar", "cases", "out", "there", "for", "other", "attributes", "but", "maintaining", "a", "list", "of", "exception", "would", "be", "unfortunate", "NUMBER", "There", "be", "probably", "cases", "where", "people", "rely", "on", "empty", "string", "not", "rendering", "the", "attribute", "as", "in", "TAG", "when", "data", "NUMBER", "someClass", "be", "an", "empty", "string", "NUMBER", "Technically", "it", "wouldn", "t", "break", "anything", "to", "have", "it", "output", "as", "TAG", "but", "that", "s", "probably", "worse", "off", "than", "before", "NUMBER", "Maybe", "it", "s", "worth", "it", "to", "maintain", "the", "exception", "mlrawlings", "This", "came", "up", "in", "a", "PR", "recently", "where", "use", "an", "a", "single", "space", "alt", "was", "the", "best", "solution", "we", "could", "come", "up", "with", "but", "stood", "out", "as", "a", "clear", "hack", "NUMBER", "Apparently", "alt", "be", "required", "no", "matter", "what", "probably", "due", "to", "screen", "reader", "behavior", "which", "then", "leads", "to", "weird", "cases", "where", "the", "official", "suggestion", "be", "to", "have", "alt", "NUMBER", "I", "haven", "t", "tried", "any", "exhaustive", "test", "to", "clarify", "the", "differences", "between", "alt", "and", "alt", "but", "since", "the", "latter", "seems", "to", "be", "recommended", "I", "imagine", "they", "re", "treated", "differently", "by", "screen", "readers", "NUMBER", "But", "it", "s", "an", "officially", "sanctioned", "hack", "I", "m", "not", "sure", "in", "that", "case", "I", "think", "I", "d", "personally", "prefer", "leaving", "it", "as", "be", "NUMBER", "Empty", "string", "be", "a", "nice", "shortcut", "to", "avoid", "rendering", "an", "attribute", "and", "it", "s", "only", "wrong", "in", "this", "one", "case", "NUMBER", "Summary", "Adding", "type", "annotations", "to", "JavaScript", "in", "order", "to", "get", "compile", "time", "guarantees", "has", "become", "popular", "with", "tool", "like", "TypeScript", "LINK", "and", "Flow", "LINK", "NUMBER", "Would", "it", "be", "feasible", "to", "get", "the", "same", "benefits", "in", "Marko", "template", "file", "Rationale", "View", "engines", "that", "be", "just", "JavaScript", "like", "React", "can", "easily", "be", "type", "checked", "both", "TypeScript", "and", "Flow", "actually", "have", "out", "of", "the", "box", "support", "for", "React", "NUMBER", "When", "work", "with", "template", "though", "you", "loose", "the", "benefit", "of", "type", "checking", "as", "soon", "as", "you", "cross", "the", "boundary", "into", "the", "template", "file", "NUMBER", "In", "a", "type", "checked", "project", "this", "can", "make", "refactoring", "trickier", "for", "example", "you", "rename", "a", "property", "but", "forget", "to", "update", "the", "template", "NUMBER", "On", "the", "other", "hand", "template", "have", "the", "advantage", "of", "compile", "time", "optimizations", "ex", "server", "side", "rendering", "performance", "LINK", "marko", "v", "NUMBER", "compile", "time", "optimizations", "NUMBER", "Being", "able", "to", "have", "type", "checked", "template", "could", "be", "a", "big", "win", "NUMBER", "I", "don", "t", "think", "this", "has", "be", "do", "yet", "in", "the", "JavaScript", "community", "NUMBER", "Note", "My", "knowledge", "of", "compile", "template", "or", "type", "checking", "be", "close", "to", "none", "so", "I", "don", "t", "even", "know", "if", "this", "be", "feasible", "This", "issue", "be", "intended", "to", "start", "a", "discussion", "NUMBER", "What", "it", "could", "look", "like", "I", "m", "use", "TypeScript", "in", "my", "examples", "but", "this", "could", "very", "well", "be", "translated", "to", "Flow", "NUMBER", "Say", "I", "have", "declared", "these", "types", "typescript", "types", "NUMBER", "ts", "export", "interface", "Cat", "name", "string", "meow", "string", "export", "interface", "Dog", "name", "string", "woof", "string", "A", "TypeScript", "file", "would", "immediately", "tell", "me", "if", "I", "m", "accessing", "wrong", "properties", "typescript", "test", "NUMBER", "ts", "import", "Cat", "Dog", "from", "NUMBER", "types", "function", "run", "cat", "Cat", "dog", "Dog", "Error", "Property", "woof", "do", "not", "exist", "on", "type", "Cat", "NUMBER", "console", "NUMBER", "log", "cat", "NUMBER", "name", "cat", "NUMBER", "woof", "Error", "Property", "meow", "do", "not", "exist", "on", "type", "Dog", "NUMBER", "console", "NUMBER", "log", "dog", "NUMBER", "name", "dog", "NUMBER", "meow", "But", "a", "Marko", "template", "wouldn", "t", "html", "TAG", "TAG", "TAG", "data", "NUMBER", "cat", "NUMBER", "name", "TAG", "TAG", "data", "NUMBER", "cat", "NUMBER", "woof", "TAG", "TAG", "TAG", "data", "NUMBER", "dog", "NUMBER", "name", "TAG", "TAG", "data", "NUMBER", "dog", "NUMBER", "meow", "TAG", "TAG", "TAG", "What", "if", "I", "could", "declare", "the", "type", "of", "the", "data", "my", "template", "expects", "html", "TAG", "TAG", "import", "Cat", "Dog", "from", "NUMBER", "types", "interface", "TemplateData", "cat", "Cat", "dog", "Dog", "TAG", "TAG", "TAG", "data", "NUMBER", "cat", "NUMBER", "name", "TAG", "TAG", "data", "NUMBER", "cat", "NUMBER", "woof", "TAG", "TAG", "data", "NUMBER", "dog", "NUMBER", "name", "TAG", "TAG", "data", "NUMBER", "dog", "NUMBER", "meow", "TAG", "TAG", "And", "tell", "Marko", "to", "generate", "type", "annotated", "file", "bash", "markoc", "template", "types", "typescript", "The", "TypeScript", "compiler", "would", "then", "catch", "the", "error", "on", "the", "generate", "JavaScript", "typescript", "template", "animals", "NUMBER", "marko", "NUMBER", "ts", "import", "marko", "from", "marko", "import", "Cat", "Dog", "from", "NUMBER", "types", "interface", "TemplateData", "cat", "Cat", "dog", "Dog", "function", "create", "__helpers", "var", "str", "__helpers", "NUMBER", "s", "empty", "__helpers", "NUMBER", "e", "notEmpty", "__helpers", "NUMBER", "ne", "escapeXml", "__helpers", "NUMBER", "x", "return", "function", "render", "data", "TemplateData", "out", "out", "NUMBER", "w", "TAG", "TAG", "escapeXml", "data", "NUMBER", "cat", "NUMBER", "name", "TAG", "TAG", "Error", "Property", "woof", "do", "not", "exist", "on", "type", "Cat", "NUMBER", "escapeXml", "data", "NUMBER", "cat", "NUMBER", "woof", "TAG", "TAG", "escapeXml", "data", "NUMBER", "dog", "NUMBER", "name", "TAG", "TAG", "Error", "Property", "meow", "do", "not", "exist", "on", "type", "Dog", "NUMBER", "escapeXml", "data", "NUMBER", "dog", "NUMBER", "meow", "TAG", "TAG", "let", "template", "MarkoTemplate", "template", "marko", "NUMBER", "c", "__filename", "NUMBER", "c", "create", "export", "default", "template", "And", "as", "I", "use", "the", "template", "in", "my", "type", "checked", "project", "I", "would", "get", "auto", "completion", "and", "type", "error", "typescript", "render", "NUMBER", "ts", "import", "template", "from", "NUMBER", "template", "animals", "NUMBER", "marko", "import", "Cat", "Dog", "from", "NUMBER", "types", "let", "cat", "Cat", "cat", "name", "Felix", "meow", "Meow", "let", "dog", "Dog", "dog", "name", "Rex", "woof", "Woof", "Error", "Argument", "of", "type", "cat", "Dog", "dog", "Cat", "be", "not", "assignable", "to", "parameter", "of", "type", "TemplateData", "NUMBER", "Types", "of", "property", "cat", "be", "incompatible", "NUMBER", "Type", "Dog", "be", "not", "assignable", "to", "type", "Cat", "NUMBER", "Property", "meow", "be", "miss", "in", "type", "Dog", "NUMBER", "var", "html", "template", "NUMBER", "renderSync", "cat", "dog", "dog", "cat", "console", "NUMBER", "log", "html", "Open", "question", "Source", "maps", "error", "If", "a", "runtime", "error", "occur", "in", "the", "generate", "JS", "can", "we", "show", "the", "line", "in", "the", "NUMBER", "marko", "file", "that", "cause", "it", "Editor", "integration", "A", "nice", "feature", "of", "TypeScript", "be", "the", "auto", "completion", "and", "real", "time", "type", "checking", "NUMBER", "Would", "it", "be", "feasible", "to", "have", "that", "directly", "in", "the", "the", "NUMBER", "marko", "file", "Relevant", "links", "LINK", "Original", "discussion", "LINK", "patrick", "steele", "idem", "mlrawlings", "I", "haven", "t", "gotten", "a", "change", "to", "explore", "this", "much", "but", "I", "saw", "that", "Marko", "v", "NUMBER", "be", "just", "around", "the", "corner", "congratz", "btw", "NUMBER", "I", "definitely", "don", "t", "expect", "this", "to", "make", "it", "to", "v", "NUMBER", "but", "I", "did", "want", "to", "see", "if", "there", "were", "any", "change", "in", "v", "NUMBER", "that", "would", "make", "it", "hard", "to", "add", "TypeScript", "support", "in", "the", "future", "should", "we", "want", "to", "of", "course", "without", "any", "breaking", "change", "NUMBER", "I", "ve", "quickly", "put", "this", "together", "LINK", "marko", "typescript", "You", "can", "take", "a", "look", "at", "how", "I", "had", "to", "change", "the", "original", "Marko", "output", "src", "components", "search", "results", "item", "NUMBER", "marko", "NUMBER", "js", "LINK", "marko", "typescript", "blob", "master", "src", "components", "search", "results", "item", "NUMBER", "marko", "NUMBER", "js", "to", "make", "it", "useful", "with", "TypeScript", "src", "components", "search", "results", "item", "NUMBER", "marko", "NUMBER", "ts", "LINK", "marko", "typescript", "blob", "master", "src", "components", "search", "results", "item", "NUMBER", "marko", "NUMBER", "ts", "NUMBER", "There", "be", "a", "couple", "things", "in", "there", "but", "the", "main", "one", "that", "caught", "my", "attention", "be", "probably", "Marko", "s", "class", "tag", "NUMBER", "It", "be", "rather", "prescriptive", "and", "also", "the", "JS", "seems", "to", "get", "parsed", "so", "I", "can", "t", "use", "TypeScript", "syntax", "like", "I", "can", "in", "Marko", "s", "static", "tag", "NUMBER", "I", "also", "can", "t", "use", "an", "ES", "NUMBER", "class", "which", "reminds", "me", "of", "React", "switching", "from", "React", "NUMBER", "createClass", "to", "standard", "ES", "NUMBER", "class", "NUMBER", "Off", "the", "top", "of", "my", "mind", "one", "option", "could", "be", "for", "the", "class", "tag", "to", "be", "an", "actually", "ES", "NUMBER", "class", "NUMBER", "Or", "it", "could", "be", "a", "component", "tag", "instead", "that", "works", "more", "like", "the", "static", "tag", "i", "NUMBER", "e", "NUMBER", "allows", "any", "text", "assumed", "to", "be", "valid", "JavaScript", "and", "that", "JS", "should", "evaluate", "to", "a", "valid", "Marko", "component", "NUMBER", "Thoughts", "Of", "course", "I", "don", "t", "want", "to", "distract", "I", "know", "you", "guys", "be", "focused", "on", "shipping", "v", "NUMBER", "and", "that", "s", "the", "most", "important", "NUMBER", "But", "I", "thought", "it", "could", "be", "worth", "thinking", "about", "this", "now", "even", "if", "just", "a", "little", "bit", "NUMBER", "Thanks", "mindeavor", "I", "hadn", "t", "seen", "that", "NUMBER", "From", "skimming", "through", "it", "I", "think", "this", "will", "help", "with", "the", "question", "of", "editor", "integration", "ex", "VSCode", "Angular", "Language", "Service", "LINK", "ng", "language", "service", "NUMBER", "I", "looks", "like", "it", "s", "be", "open", "for", "a", "while", "though", "NUMBER", "What", "I", "had", "in", "mind", "as", "a", "first", "step", "be", "more", "along", "the", "lines", "of", "Angular", "s", "Ahead", "of", "Time", "AOT", "compilation", "LINK", "compiler", "NUMBER", "html", "which", "outputs", "TypeScript", "code", "that", "can", "be", "use", "when", "type", "checking", "the", "whole", "app", "business", "logic", "code", "template", "markoc", "src", "typescript", "Compiling", "Input", "src", "components", "search", "results", "item", "NUMBER", "marko", "Output", "src", "components", "search", "results", "item", "NUMBER", "marko", "NUMBER", "ts", "Compiled", "NUMBER", "template", "s", "tsc", "src", "components", "search", "results", "item", "NUMBER", "marko", "NUMBER", "ts", "NUMBER", "NUMBER", "error", "TS", "NUMBER", "Property", "pric", "do", "not", "exist", "on", "type", "SearchResultsItem", "NUMBER", "I", "haven", "t", "looked", "closely", "but", "looks", "like", "the", "plugin", "support", "release", "in", "TypeScript", "NUMBER", "LINK", "typescript", "NUMBER", "NUMBER", "may", "be", "of", "help", "for", "type", "checking", "NUMBER", "marko", "file", "and", "more", "generally", "provide", "editor", "tooling", "for", "Marko", "autocompletion", "etc", "NUMBER", "NUMBER", "Here", "be", "an", "example", "plugin", "for", "the", "Vue", "NUMBER", "js", "framework", "LINK", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "fe", "NUMBER", "f", "NUMBER", "b", "NUMBER", "b", "NUMBER", "adec", "NUMBER", "cb", "NUMBER", "f", "NUMBER", "on", "patrick", "steele", "idem", "markoc", "test", "into", "NUMBER", "e", "NUMBER", "a", "NUMBER", "b", "NUMBER", "c", "NUMBER", "f", "NUMBER", "b", "NUMBER", "dcd", "NUMBER", "df", "NUMBER", "dc", "NUMBER", "ef", "NUMBER", "f", "NUMBER", "fcc", "on", "marko", "js", "master", "NUMBER", "Hello", "while", "trying", "out", "Marko", "I", "test", "how", "it", "s", "autoescaping", "works", "in", "different", "contexts", "NUMBER", "The", "contexts", "I", "test", "it", "in", "inside", "html", "tag", "inside", "html", "attribute", "inside", "html", "script", "tag", "In", "first", "two", "Marko", "correctly", "detected", "context", "and", "chose", "proper", "escaping", "function", "I", "saw", "escapeXml", "and", "escapeXmlAttr", "in", "compiled", "template", "but", "in", "the", "last", "one", "I", "was", "able", "to", "do", "XSS", "NUMBER", "You", "can", "replicate", "it", "on", "LINK", "online", "marko", "template", "html", "TAG", "data", "TAG", "TAG", "var", "x", "data", "TAG", "data", "js", "alert", "xss", "HTML", "output", "TAG", "alert", "xss", "TAG", "TAG", "var", "x", "alert", "xss", "TAG", "patrick", "steele", "idem", "thanks", "for", "the", "detailed", "reply", "Is", "it", "really", "inherently", "unsafe", "to", "put", "user", "data", "in", "script", "tag", "Even", "if", "you", "escape", "all", "characters", "like", "into", "unicode", "This", "seems", "to", "be", "what", "some", "template", "engines", "be", "doing", "NUMBER", "Some", "provide", "escapejs", "filter", "LINK", "escapejs", "Some", "even", "do", "this", "automatically", "by", "detecting", "context", "where", "variable", "be", "use", "LINK", "toc", "context", "aware", "escaping", "But", "you", "seem", "to", "be", "much", "more", "knowledgeable", "about", "this", "topic", "than", "me", "so", "I", "be", "not", "sure", "if", "these", "filters", "catch", "NUMBER", "of", "XSS", "attackers", "inputs", "patrick", "steele", "idem", "With", "this", "fix", "in", "place", "be", "there", "still", "any", "reason", "to", "avoid", "putting", "data", "in", "inline", "scripts", "The", "strategy", "of", "use", "empty", "dom", "elements", "with", "data", "attributes", "always", "seem", "strange", "to", "me", "NUMBER", "use", "retina", "image", "for", "logo", "center", "logo", "with", "html", "move", "Try", "Marko", "Online", "to", "first", "paragraph", "move", "badges", "below", "first", "paragraph", "The", "only", "way", "to", "reliably", "test", "this", "was", "by", "putting", "it", "on", "my", "fork", "master", "so", "you", "can", "see", "here", "LINK", "Spacing", "be", "a", "bit", "worse", "on", "mobile", "but", "there", "s", "only", "so", "much", "customization", "you", "can", "do", "before", "github", "takes", "over", "NUMBER", "Let", "me", "know", "of", "any", "concerns", "NUMBER", "Desktop", "TAG", "Mobile", "iPhone", "NUMBER", "size", "TAG", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "c", "NUMBER", "c", "NUMBER", "fe", "NUMBER", "fa", "NUMBER", "dafd", "NUMBER", "b", "NUMBER", "aba", "NUMBER", "a", "NUMBER", "on", "yomed", "master", "into", "f", "NUMBER", "feffcef", "NUMBER", "e", "NUMBER", "a", "NUMBER", "dbaa", "NUMBER", "d", "NUMBER", "febf", "NUMBER", "on", "marko", "js", "master", "NUMBER", "configuration", "variable", "NUMBER", "If", "file", "be", "hot", "reloaded", "we", "should", "never", "assume", "that", "they", "be", "up", "to", "date", "NUMBER", "Fixes", "issue", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "c", "NUMBER", "ffa", "NUMBER", "e", "NUMBER", "f", "NUMBER", "fbb", "NUMBER", "d", "NUMBER", "ba", "NUMBER", "efa", "NUMBER", "faec", "on", "ianvonholt", "ISSUE_", "NUMBER", "into", "fd", "NUMBER", "a", "NUMBER", "ae", "NUMBER", "a", "NUMBER", "b", "NUMBER", "f", "NUMBER", "c", "NUMBER", "f", "NUMBER", "ec", "NUMBER", "c", "NUMBER", "ce", "on", "marko", "js", "master", "NUMBER", "When", "use", "include", "or", "layouts", "while", "setting", "writeToDisk", "to", "false", "Marko", "still", "writes", "the", "JS", "rendered", "file", "for", "these", "NUMBER", "Is", "this", "a", "bug", "Or", "be", "there", "a", "way", "to", "disable", "this", "as", "well", "Hi", "patrick", "steele", "idem", "I", "just", "test", "the", "compilation", "process", "again", "NUMBER", "I", "m", "run", "Marko", "NUMBER", "only", "no", "other", "version", "or", "duplicates", "be", "install", "NUMBER", "For", "some", "reason", "the", "include", "still", "write", "a", "separate", "JS", "file", "NUMBER", "For", "what", "it", "s", "worth", "I", "m", "use", "Brunch", "in", "combination", "with", "LINK", "marko", "brunch", "Any", "ideas", "I", "have", "having", "a", "problem", "with", "this", "bug", "as", "well", "NUMBER", "Hey", "Patrick", "I", "m", "also", "seeing", "this", "now", "where", "layout", "use", "template", "be", "generating", "a", "file", "system", "compile", "of", "the", "template", "while", "all", "other", "template", "be", "not", "write", "to", "disk", "NUMBER", "Let", "me", "see", "if", "I", "can", "put", "a", "simpler", "demo", "together", "for", "you", "NUMBER", "Ok", "here", "s", "the", "simplest", "project", "I", "could", "make", "that", "shows", "the", "issue", "NUMBER", "When", "you", "first", "run", "this", "it", "will", "create", "a", "layout", "NUMBER", "marko", "NUMBER", "js", "but", "not", "a", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "It", "shouldn", "t", "create", "either", "the", "compiler", "option", "be", "set", "to", "javascript", "compilerOptions", "writeToDisk", "false", "LINK", "_generates_file", "patrick", "steele", "idem", "I", "ve", "managed", "to", "trace", "it", "back", "to", "requireResolve", "method", "in", "CompileContext", "but", "can", "t", "seem", "to", "understand", "where", "to", "go", "from", "there", "NUMBER", "It", "seems", "memberExpression", "constructs", "a", "call", "combining", "require", "and", "resolve", "but", "I", "can", "t", "really", "see", "what", "it", "s", "doing", "that", "would", "bypass", "the", "marko", "node", "require", "which", "should", "see", "the", "flag", "for", "writeToDisk", "NUMBER", "Ok", "further", "digging", "it", "seems", "layout", "NUMBER", "html", "in", "my", "example", "gets", "loaded", "by", "a", "helper", "which", "uses", "loader", "index", "file", "loadFile", "method", "which", "do", "not", "get", "pass", "the", "options", "we", "pass", "in", "through", "require", "marko", "node", "require", "NUMBER", "install", "config", "NUMBER", "NUMBER", "It", "only", "sees", "options", "that", "were", "set", "use", "the", "markoCompiler", "NUMBER", "defaultOptions", "NUMBER", "Looking", "in", "the", "helper", "the", "only", "thing", "the", "helper", "pass", "to", "load", "be", "the", "path", "no", "options", "NUMBER", "I", "confirmed", "that", "switching", "to", "setting", "global", "NUMBER", "__MARKO_CONFIG", "do", "stop", "layout", "NUMBER", "html", "from", "be", "write", "to", "disk", "NUMBER", "So", "it", "seems", "the", "bug", "be", "only", "when", "you", "set", "compilerOptions", "via", "the", "config", "on", "node", "require", "NUMBER", "My", "suggestion", "would", "be", "to", "have", "the", "install", "config", "on", "node", "require", "actually", "set", "the", "global", "NUMBER", "__MARKO_CONFIG", "so", "it", "acts", "as", "expected", "in", "all", "loading", "scenarios", "NUMBER", "Just", "my", "NUMBER", "patrick", "steele", "idem", "I", "figured", "as", "much", "it", "was", "more", "just", "to", "test", "if", "that", "would", "work", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "bbf", "NUMBER", "ed", "NUMBER", "a", "NUMBER", "d", "NUMBER", "a", "NUMBER", "d", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "on", "issue", "NUMBER", "into", "NUMBER", "dbbbea", "NUMBER", "a", "NUMBER", "be", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "on", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "b", "NUMBER", "bbf", "NUMBER", "ed", "NUMBER", "a", "NUMBER", "d", "NUMBER", "a", "NUMBER", "d", "NUMBER", "c", "NUMBER", "f", "NUMBER", "e", "NUMBER", "on", "issue", "NUMBER", "into", "NUMBER", "dbbbea", "NUMBER", "a", "NUMBER", "be", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "on", "master", "NUMBER", "Good", "idea", "I", "need", "it", "NUMBER", "If", "there", "s", "enough", "interest", "it", "would", "be", "fairly", "simple", "for", "TAG", "to", "also", "accept", "streams", "though", "as", "Michael", "point", "out", "it", "would", "need", "to", "buffer", "the", "stream", "until", "it", "was", "finished", "so", "I", "m", "not", "sure", "how", "useful", "that", "would", "be", "NUMBER", "Alternatively", "most", "streams", "can", "simply", "be", "converted", "to", "Promises", "with", "something", "like", "js", "new", "Promise", "function", "resolve", "reject", "var", "buffer", "stream", "NUMBER", "on", "error", "reject", "stream", "NUMBER", "on", "data", "function", "data", "buffer", "NUMBER", "push", "data", "stream", "NUMBER", "on", "end", "function", "var", "result", "Buffer", "NUMBER", "concat", "buffer", "NUMBER", "toString", "resolve", "result", "Hopefully", "this", "weekend", "I", "ll", "get", "the", "chance", "to", "play", "with", "the", "TAG", "tag", "a", "bit", "looks", "awesome", "patrick", "steele", "idem", "If", "TAG", "was", "to", "handle", "multiple", "flush", "streams", "event", "emitters", "which", "I", "don", "t", "believe", "it", "should", "I", "would", "prefer", "something", "similar", "to", "deferred", "NUMBER", "progress", "perhaps", "a", "separate", "await", "specific", "nested", "tag", "like", "TAG", "NUMBER", "Though", "here", "s", "another", "thought", "that", "just", "popped", "to", "mind", "What", "about", "something", "like", "that", "for", "the", "TAG", "tag", "For", "example", "NUMBER", "TAG", "TAG", "TAG", "result", "TAG", "TAG", "NUMBER", "as", "an", "alternate", "syntax", "to", "allow", "binding", "to", "events", "other", "than", "just", "data", "On", "second", "thought", "something", "like", "this", "might", "be", "better", "instead", "TAG", "TAG", "var", "NUMBER", "var", "NUMBER", "TAG", "TAG", "from", "and", "of", "be", "just", "what", "came", "off", "the", "top", "of", "my", "head", "it", "may", "need", "re", "word", "Just", "notice", "the", "original", "post", "had", "an", "example", "of", "use", "a", "generic", "EventEmitter", "which", "accomplishes", "basically", "the", "same", "thing", "as", "my", "previous", "post", "not", "sure", "how", "I", "miss", "that", "a", "few", "days", "ago", "NUMBER", "Hmm", "NUMBER", "Rather", "than", "starting", "with", "standard", "streams", "and", "add", "different", "syntaxes", "to", "support", "non", "standard", "use", "cases", "what", "if", "we", "looked", "at", "this", "the", "other", "way", "around", "We", "could", "start", "by", "exposing", "the", "generic", "behavior", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "TAG", "load", "more", "TAG", "TAG", "TAG", "Then", "add", "convenience", "syntaxes", "for", "the", "most", "common", "uses", "TAG", "TAG", "user", "NUMBER", "name", "TAG", "TAG", "TAG", "load", "more", "TAG", "TAG", "TAG", "TAG", "TAG", "Note", "that", "TAG", "and", "TAG", "be", "just", "syntactic", "sugar", "for", "TAG", "and", "TAG", "respectively", "NUMBER", "patrick", "steele", "idem", "this", "sounds", "good", "to", "me", "NUMBER", "Looks", "lot", "cleaner", "patrick", "steele", "idem", "mlrawlings", "will", "TAG", "accept", "event", "emitter", "going", "forward", "NUMBER", "right", "now", "its", "not", "support", "event", "emitter", "NUMBER", "i", "think", "its", "essential", "to", "support", "that", "with", "respect", "to", "streaming", "I", "can", "t", "think", "of", "any", "reason", "not", "to", "NUMBER", "Just", "one", "question", "If", "the", "object", "has", "both", "NUMBER", "on", "and", "NUMBER", "en", "methods", "should", "it", "be", "treated", "as", "an", "emitter", "or", "a", "thenable", "I", "m", "leaning", "toward", "emitter", "but", "that", "might", "be", "considered", "a", "breaking", "change", "NUMBER", "Also", "a", "few", "more", "ideas", "TAG", "TAG", "defaults", "to", "data", "event", "TAG", "mlrawlings", "austinkelleher", "patrick", "steele", "idem", "any", "tips", "and", "tricks", "for", "applying", "infinite", "scrolling", "with", "marko", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "b", "NUMBER", "c", "NUMBER", "c", "NUMBER", "a", "NUMBER", "b", "NUMBER", "c", "NUMBER", "af", "NUMBER", "eae", "NUMBER", "d", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ca", "on", "mlrawlings", "await", "tag", "into", "NUMBER", "dbbbea", "NUMBER", "a", "NUMBER", "be", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "on", "marko", "js", "master", "NUMBER", "When", "I", "read", "await", "theUserDataProvider", "as", "user", "I", "thought", "I", "be", "creating", "an", "alias", "user", "for", "theUserDataProvider", "where", "as", "await", "user", "from", "theUserDataProvider", "seem", "to", "make", "the", "intent", "clear", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "ef", "NUMBER", "d", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ad", "NUMBER", "b", "NUMBER", "da", "NUMBER", "a", "NUMBER", "f", "on", "mlrawlings", "await", "tag", "into", "NUMBER", "dbbbea", "NUMBER", "a", "NUMBER", "be", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "ef", "NUMBER", "d", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ad", "NUMBER", "b", "NUMBER", "da", "NUMBER", "a", "NUMBER", "f", "on", "mlrawlings", "await", "tag", "into", "NUMBER", "dbbbea", "NUMBER", "a", "NUMBER", "be", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "on", "marko", "js", "master", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "ef", "NUMBER", "d", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ad", "NUMBER", "b", "NUMBER", "da", "NUMBER", "a", "NUMBER", "f", "on", "mlrawlings", "await", "tag", "into", "NUMBER", "dbbbea", "NUMBER", "a", "NUMBER", "be", "NUMBER", "f", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "e", "on", "marko", "js", "master", "NUMBER", "So", "I", "use", "a", "progressive", "rendering", "demo", "and", "change", "addEventListener", "to", "w", "onClick", "NUMBER", "Now", "header", "widget", "reacts", "on", "clicks", "only", "after", "rendering", "be", "finished", "NUMBER", "Problem", "appeared", "after", "upgrading", "Marko", "NUMBER", "to", "NUMBER", "Demo", "here", "LINK", "progressive", "bug", "NUMBER", "herokuapp", "NUMBER", "com", "Forked", "repo", "to", "show", "a", "bug", "LINK", "progressive", "rendering", "Commit", "with", "change", "LINK", "progressive", "rendering", "commit", "afe", "NUMBER", "c", "NUMBER", "b", "NUMBER", "b", "NUMBER", "d", "NUMBER", "ee", "NUMBER", "eac", "NUMBER", "b", "NUMBER", "Documented", "exclusion", "of", "folder", "or", "node", "module", "from", "marko", "NUMBER", "json", "autodiscovery", "Just", "an", "excuse", "in", "advance", "I", "m", "rookie", "in", "open", "source", "contribution", "and", "my", "english", "be", "not", "a", "native", "language", "NUMBER", "So", "any", "blame", "be", "accepted", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "d", "NUMBER", "cfdc", "NUMBER", "b", "NUMBER", "a", "NUMBER", "e", "NUMBER", "d", "NUMBER", "e", "NUMBER", "af", "NUMBER", "fd", "on", "oxala", "feature", "exclude", "into", "NUMBER", "be", "NUMBER", "bd", "NUMBER", "ee", "NUMBER", "c", "NUMBER", "f", "NUMBER", "d", "NUMBER", "c", "NUMBER", "d", "NUMBER", "a", "NUMBER", "eef", "NUMBER", "bc", "on", "marko", "js", "master", "NUMBER", "Hey", "Patrick", "I", "will", "bother", "you", "again", "with", "specific", "folder", "package", "exclusion", "from", "the", "automatic", "marko", "NUMBER", "json", "search", "NUMBER", "Since", "we", "finally", "moved", "to", "marko", "NUMBER", "i", "ve", "reimplemented", "that", "functionality", "here", "as", "well", "NUMBER", "Below", "you", "will", "find", "Actual", "functionality", "implementation", "Updated", "test", "to", "cover", "the", "implementation", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "f", "NUMBER", "c", "NUMBER", "b", "NUMBER", "f", "NUMBER", "b", "NUMBER", "e", "NUMBER", "b", "NUMBER", "d", "NUMBER", "aeaf", "NUMBER", "baa", "NUMBER", "b", "NUMBER", "f", "NUMBER", "d", "on", "oxala", "feature", "exclude", "into", "NUMBER", "f", "NUMBER", "e", "NUMBER", "bea", "NUMBER", "a", "NUMBER", "a", "NUMBER", "e", "NUMBER", "c", "NUMBER", "d", "NUMBER", "dab", "NUMBER", "d", "NUMBER", "on", "marko", "js", "master", "NUMBER", "No", "worries", "thank", "you", "for", "accepting", "NUMBER", "Sure", "i", "ll", "update", "the", "docs", "LINK", "js", "marko", "pull", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "remained", "the", "same", "at", "NUMBER", "when", "pulling", "NUMBER", "f", "NUMBER", "a", "NUMBER", "dc", "NUMBER", "d", "NUMBER", "d", "NUMBER", "a", "NUMBER", "a", "NUMBER", "c", "NUMBER", "b", "NUMBER", "fb", "NUMBER", "ab", "NUMBER", "on", "mlrawlings", "shorthand", "classes", "into", "a", "NUMBER", "d", "NUMBER", "b", "NUMBER", "c", "NUMBER", "f", "NUMBER", "c", "NUMBER", "ee", "NUMBER", "f", "NUMBER", "cddefa", "NUMBER", "e", "on", "marko", "js", "master", "NUMBER", "Given", "html", "TAG", "Marko", "will", "fail", "with", "an", "error", "Error", "s", "in", "template", "NUMBER", "template", "views", "askForUsername", "NUMBER", "marko", "NUMBER", "NUMBER", "Invalid", "string", "w", "NUMBER", "NUMBER", "SyntaxError", "Unexpected", "token", "w", "This", "be", "fixable", "by", "pattern", "w", "NUMBER", "NUMBER", "but", "that", "doesn", "t", "follow", "the", "HTML", "spec", "LINK", "attr", "input", "pattern", "NUMBER", "In", "other", "words", "the", "value", "should", "be", "a", "regular", "expression", "that", "can", "be", "directly", "substituted", "into", "a", "JavaScript", "regular", "expression", "literal", "e", "NUMBER", "g", "NUMBER", "w", "NUMBER", "NUMBER", "NUMBER", "I", "understand", "the", "underlying", "issue", "NUMBER", "But", "my", "opinion", "be", "that", "when", "write", "HTML", "within", "the", "template", "we", "shouldn", "t", "have", "to", "remember", "no", "this", "isn", "t", "really", "HTML", "it", "s", "an", "escaped", "JavaScript", "string", "NUMBER", "I", "think", "a", "solution", "to", "this", "and", "probably", "other", "cases", "would", "be", "to", "have", "a", "TAG", "TAG", "Marko", "directive", "NUMBER", "I", "suppose", "if", "extra", "syntax", "be", "add", "what", "about", "something", "closer", "to", "what", "be", "already", "present", "for", "skipping", "HTML", "escaping", "html", "TAG", "It", "has", "the", "bonus", "of", "be", "_almost_", "like", "a", "CSS", "attribute", "selector", "NUMBER", "My", "point", "be", "who", "knows", "Anyone", "can", "stick", "pretty", "much", "anything", "they", "want", "in", "a", "data", "attribute", "NUMBER", "And", "future", "spec", "graced", "attributes", "could", "have", "anything", "as", "well", "NUMBER", "My", "use", "case", "be", "a", "simple", "fix", "on", "my", "end", "other", "than", "remembering", "when", "I", "come", "back", "to", "the", "project", "in", "NUMBER", "months", "why", "there", "be", "an", "extra", "NUMBER", "I", "just", "think", "that", "it", "would", "be", "wise", "to", "provide", "a", "template", "language", "specific", "method", "for", "dealing", "with", "such", "scenarios", "so", "that", "someone", "who", "knows", "the", "language", "can", "read", "the", "intention", "NUMBER", "Coverage", "Status", "LINK", "LINK", "Coverage", "increase", "NUMBER", "to", "NUMBER", "when", "pulling", "NUMBER", "c", "NUMBER", "eb", "NUMBER", "dc", "NUMBER", "e", "NUMBER", "e", "NUMBER", "ae", "NUMBER", "abcdea", "on", "mlrawlings", "asyncfragment", "info", "into", "NUMBER", "f", "NUMBER", "e", "NUMBER", "fdc", "NUMBER", "ed", "NUMBER", "d", "NUMBER", "b", "NUMBER", "a", "NUMBER", "c", "NUMBER", "f", "NUMBER", "ed", "NUMBER", "c", "on", "marko", "js", "master", "NUMBER", "I", "was", "run", "karma", "PhantomJS", "on", "some", "Marko", "Widgets", "with", "async", "fragment", "I", "get", "the", "following", "error", "Running", "karma", "test", "karma", "task", "Saving", "optimization", "output", "to", "NUMBER", "NUMBER", "test", "static", "START", "PhantomJS", "NUMBER", "Mac", "OS", "X", "NUMBER", "ERROR", "SyntaxError", "Unexpected", "token", "at", "Users", "isuhardi", "works", "feproject", "NUMBER", "test", "static", "index", "marko", "NUMBER", "taglibs", "async", "async", "fragment", "tag", "transformer", "NUMBER", "js", "NUMBER", "This", "be", "due", "to", "arrow", "syntax", "at", "async", "fragment", "tag", "transformer", "which", "PhantomJS", "cannot", "run", "due", "to", "lack", "of", "ES", "NUMBER", "support", "NUMBER", "Nice", "PR", "mlrawlings", "Did", "you", "consider", "use", "include", "all", "sources", "in", "the", "istanbul", "command", "for", "coverage", "against", "the", "whole", "codebase", "Ideally", "all", "our", "error", "in", "generating", "code", "would", "be", "developer", "friendly", "and", "add", "through", "context", "NUMBER", "addError", "however", "not", "every", "case", "be", "covered", "currently", "NUMBER", "This", "pull", "request", "catches", "error", "from", "code", "generators", "add", "context", "about", "the", "node", "including", "line", "number", "in", "the", "template", "when", "available", "and", "rethrows", "the", "error", "while", "maintaining", "the", "original", "stack", "trace", "NUMBER", "In", "the", "ideal", "case", "it", "looks", "something", "like", "this", "Error", "Something", "Happened", "Generating", "code", "for", "TAG", "tag", "test", "autotests", "render", "error", "throw", "in", "generator", "template", "NUMBER", "marko", "NUMBER", "NUMBER", "Even", "in", "cases", "where", "we", "don", "t", "have", "the", "line", "number", "you", "at", "least", "have", "a", "better", "idea", "of", "what", "might", "be", "cause", "the", "error", "NUMBER", "The", "following", "be", "what", "the", "error", "seangates", "encountered", "earlier", "would", "have", "looked", "like", "Error", "Unexpected", "token", "Generating", "code", "for", "TAG", "tag", "_Note", "I", "m", "actually", "not", "quite", "sure", "why", "the", "node", "doesn", "t", "have", "the", "line", "number", "attached", "in", "this", "case", "I", "may", "look", "into", "this", "at", "a", "later", "point", "in", "time", "NUMBER", "_", "For", "non", "html", "nodes", "the", "type", "of", "node", "be", "listed", "and", "will", "list", "line", "number", "if", "available", "Error", "some", "error", "message", "Generating", "code", "for", "ForEach", "node", "mlrawlings", "Wonderful", "Thanks", "I", "m", "probably", "doing", "something", "really", "stupid", "but", "with", "the", "following", "code", "I", "can", "t", "get", "Marko", "to", "recompile", "the", "template", "when", "I", "make", "a", "change", "directly", "to", "the", "template", "file", "NUMBER", "Can", "anyone", "tell", "me", "what", "mistake", "I", "m", "make", "use", "strict", "process", "NUMBER", "env", "NUMBER", "MARKO_CLEAN", "true", "require", "marko", "node", "require", "NUMBER", "install", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "checkUpToDate", "true", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "true", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "preserveWhitespace", "true", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "assumeUpToDate", "false", "const", "Hapi", "require", "hapi", "const", "server", "new", "Hapi", "NUMBER", "Server", "server", "NUMBER", "connection", "port", "NUMBER", "server", "NUMBER", "art", "err", "if", "err", "throw", "err", "console", "NUMBER", "log", "Server", "run", "at", "server", "NUMBER", "info", "NUMBER", "uri", "server", "NUMBER", "route", "method", "GET", "path", "handler", "function", "request", "reply", "var", "template", "require", "NUMBER", "template", "NUMBER", "marko", "console", "NUMBER", "log", "Render", "Template", "template", "NUMBER", "render", "name", "Frank", "count", "NUMBER", "function", "err", "output", "if", "err", "console", "NUMBER", "error", "Rendering", "fail", "return", "return", "reply", "output", "patrick", "steele", "idem", "perfect", "Thanks", "a", "ton", "I", "knew", "I", "had", "to", "be", "miss", "something", "NUMBER", "I", "m", "not", "sure", "how", "I", "miss", "the", "hot", "reload", "options", "NUMBER", "patrick", "steele", "idem", "mlrawlings", "Pls", "review", "if", "this", "change", "makes", "sense", "NUMBER", "I", "m", "add", "some", "more", "detail", "to", "this", "mostly", "so", "I", "don", "t", "forget", "The", "issue", "be", "seen", "in", "v", "NUMBER", "not", "sure", "if", "it", "be", "also", "an", "issue", "in", "v", "NUMBER", "The", "template", "that", "calls", "TAG", "be", "be", "rendered", "client", "side", "NUMBER", "The", "widget", "be", "registered", "but", "for", "the", "first", "render", "it", "do", "not", "call", "any", "of", "the", "rendering", "methods", "LINK", "widgets", "component", "lifecycle", "rendering", "methods", "nor", "be", "the", "state", "properly", "set", "NUMBER", "We", "can", "access", "the", "widget", "through", "element", "NUMBER", "__widget", "and", "calling", "setStateDirty", "do", "cause", "a", "re", "render", "in", "which", "the", "rendering", "methods", "be", "call", "but", "then", "the", "widget", "which", "gets", "its", "contents", "from", "state", "be", "empty", "because", "the", "state", "be", "not", "set", "from", "the", "first", "render", "NUMBER", "Hi", "I", "be", "use", "Marko", "v", "NUMBER", "and", "facing", "the", "following", "issue", "NUMBER", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "D", "Projects", "Test", "Test", "views", "admin", "Dashboard", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "views", "admin", "Dashboard", "NUMBER", "marko", "NUMBER", "NUMBER", "Invalid", "string", "NUMBER", "browser", "NUMBER", "json", "SyntaxError", "Unexpected", "token", "in", "JSON", "at", "position", "NUMBER", "Error", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "D", "Projects", "Test", "Test", "views", "admin", "Dashboard", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "views", "admin", "Dashboard", "NUMBER", "marko", "NUMBER", "NUMBER", "Invalid", "string", "NUMBER", "browser", "NUMBER", "json", "SyntaxError", "Unexpected", "token", "in", "JSON", "at", "position", "NUMBER", "at", "Compiler", "NUMBER", "compile", "D", "Projects", "Test", "Test", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "compileFile", "D", "Projects", "Test", "Test", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "loadFile", "D", "Projects", "Test", "Test", "node_modules", "marko", "runtime", "loader", "NUMBER", "js", "NUMBER", "NUMBER", "at", "load", "D", "Projects", "Test", "Test", "node_modules", "marko", "runtime", "loader", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "load", "D", "Projects", "Test", "Test", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "at", "export", "NUMBER", "DashboardPage", "D", "Projects", "Test", "Test", "controllers", "admin", "Dashboard", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "layer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "next", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "route", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Route", "NUMBER", "dispatch", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "route", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "layer", "NUMBER", "js", "NUMBER", "NUMBER", "My", "template", "be", "as", "below", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "data", "NUMBER", "title", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Dashboard", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Can", "you", "tell", "me", "what", "be", "the", "wrong", "with", "the", "template", "Hi", "sanjeevashrivastava", "be", "it", "possible", "that", "the", "JSON", "in", "your", "browser", "NUMBER", "json", "file", "be", "malformed", "content", "of", "browser", "NUMBER", "json", "be", "as", "below", "dependencies", "style", "NUMBER", "css", "I", "be", "use", "htmljs", "parser", "NUMBER", "I", "be", "not", "use", "npm", "strinkwrap", "NUMBER", "json", "at", "position", "NUMBER", "be", "in", "TAG", "of", "package", "path", "attribute", "i", "also", "notice", "that", "if", "template", "be", "in", "views", "folder", "then", "it", "be", "work", "and", "if", "this", "template", "be", "in", "views", "admin", "folder", "then", "it", "be", "throw", "this", "error", "If", "I", "put", "space", "after", "second", "in", "TAG", "it", "be", "throw", "following", "error", "Lasso", "page", "result", "not", "find", "for", "slot", "head", "NUMBER", "The", "TAG", "tag", "should", "be", "use", "to", "lasso", "the", "page", "NUMBER", "Error", "Lasso", "page", "result", "not", "find", "for", "slot", "head", "NUMBER", "The", "TAG", "tag", "should", "be", "use", "to", "lasso", "the", "page", "NUMBER", "at", "render", "D", "Projects", "Test", "Test", "node_modules", "lasso", "taglib", "slot", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "D", "Projects", "Test", "Test", "node_modules", "lasso", "taglib", "head", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "D", "Projects", "Test", "Test", "views", "admin", "Dashboard", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "render", "D", "Projects", "Test", "Test", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "at", "export", "NUMBER", "DashboardPage", "D", "Projects", "Test", "Test", "controllers", "admin", "Dashboard", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "D", "ProjectsTestTestnode_modulesexpresslibrouterlayer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "next", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "route", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Route", "NUMBER", "dispatch", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "route", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "D", "ProjectsTestTestnode_modulesexpresslibrouterlayer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "D", "Projects", "Test", "Test", "node_modules", "express", "lib", "router", "index", "NUMBER", "js", "NUMBER", "NUMBER", "and", "FYI", "I", "be", "use", "lasso", "NUMBER", "and", "use", "same", "browser", "NUMBER", "json", "in", "admin", "folder", "Dashboard", "NUMBER", "marko", "NUMBER", "txt", "LINK", "js", "marko", "file", "NUMBER", "Dashboard", "NUMBER", "marko", "NUMBER", "txt", "Home", "NUMBER", "marko", "NUMBER", "txt", "LINK", "js", "marko", "file", "NUMBER", "Home", "NUMBER", "marko", "NUMBER", "txt", "if", "you", "go", "with", "above", "file", "NUMBER", "both", "file", "be", "same", "but", "Home", "NUMBER", "marko", "be", "not", "work", "while", "Dashboard", "NUMBER", "marko", "works", "fine", "NUMBER", "Home", "NUMBER", "marko", "NUMBER", "txt", "LINK", "js", "marko", "file", "NUMBER", "Home", "NUMBER", "marko", "NUMBER", "txt", "I", "have", "tried", "htmljs", "parser", "separately", "use", "the", "following", "code", "with", "attached", "file", "NUMBER", "it", "be", "throw", "same", "error", "NUMBER", "var", "parser", "require", "htmljs", "parser", "NUMBER", "createParser", "onText", "function", "event", "Text", "within", "an", "HTML", "element", "var", "value", "event", "NUMBER", "value", "onPlaceholder", "function", "event", "TAG", "escape", "true", "TAG", "escape", "false", "var", "value", "event", "NUMBER", "value", "String", "var", "escaped", "event", "NUMBER", "escaped", "boolean", "var", "withinBody", "event", "NUMBER", "withinBody", "boolean", "var", "withinAttribute", "event", "NUMBER", "withinAttribute", "boolean", "var", "withinString", "event", "NUMBER", "withinString", "boolean", "var", "withinOpenTag", "event", "NUMBER", "withinOpenTag", "boolean", "var", "pos", "event", "NUMBER", "pos", "Integer", "onCDATA", "function", "event", "TAG", "var", "value", "event", "NUMBER", "value", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "onOpenTag", "function", "event", "var", "tagName", "event", "NUMBER", "tagName", "String", "var", "attributes", "event", "NUMBER", "attributes", "Array", "var", "argument", "event", "NUMBER", "argument", "Object", "var", "pos", "event", "NUMBER", "pos", "Integer", "onCloseTag", "function", "event", "close", "tag", "var", "tagName", "event", "NUMBER", "tagName", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "onDocumentType", "function", "event", "Document", "Type", "DTD", "TAG", "Example", "TAG", "var", "value", "event", "NUMBER", "value", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "onDeclaration", "function", "event", "Declaration", "TAG", "Example", "TAG", "var", "value", "event", "NUMBER", "value", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "onComment", "function", "event", "Text", "within", "XML", "comment", "var", "value", "event", "NUMBER", "value", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "onScriptlet", "function", "event", "Text", "within", "TAG", "var", "value", "event", "NUMBER", "value", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "onError", "function", "event", "Error", "var", "message", "event", "NUMBER", "message", "String", "var", "code", "event", "NUMBER", "code", "String", "var", "pos", "event", "NUMBER", "pos", "Integer", "var", "fs", "require", "fs", "fs", "NUMBER", "readFile", "NUMBER", "views", "Home", "NUMBER", "marko", "utf", "NUMBER", "function", "err", "contents", "parser", "NUMBER", "parse", "contents", "So", "it", "be", "confirmed", "that", "the", "issue", "be", "in", "htmljs", "parser", "NUMBER", "Please", "try", "to", "debug", "it", "NUMBER", "FYI", "I", "be", "use", "Windows", "OS", "NUMBER", "Thank", "you", "very", "much", "NUMBER", "New", "version", "htmljs", "parser", "NUMBER", "fix", "the", "issue", "NUMBER", "Hi", "After", "upgrade", "nodemon", "node", "and", "migrating", "from", "marko", "NUMBER", "x", "to", "NUMBER", "x", "version", "i", "get", "next", "problem", "Node", "NUMBER", "js", "version", "NUMBER", "npm", "start", "Appname", "NUMBER", "start", "home", "baddad", "Projects", "Appname", "NODE_ENV", "development", "nodemon", "app", "NUMBER", "js", "e", "js", "marko", "json", "trace", "sync", "io", "verbose", "nodemon", "NUMBER", "nodemon", "to", "restart", "at", "any", "time", "enter", "rs", "nodemon", "ignoring", "NUMBER", "git", "NUMBER", "nyc_output", "NUMBER", "sass", "cache", "bower_components", "coverage", "home", "baddad", "Projects", "Appname", "node_modules", "nodemon", "watching", "NUMBER", "nodemon", "watching", "extensions", "js", "marko", "json", "nodemon", "starting", "node", "app", "NUMBER", "js", "trace", "sync", "io", "nodemon", "child", "pid", "NUMBER", "nodemon", "watching", "NUMBER", "NUMBER", "file", "nodemon", "file", "triggering", "change", "check", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "matched", "rule", "NUMBER", "nodemon", "change", "after", "filters", "before", "after", "NUMBER", "NUMBER", "nodemon", "restarting", "due", "to", "change", "NUMBER", "nodemon", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "starting", "node", "app", "NUMBER", "js", "trace", "sync", "io", "nodemon", "child", "pid", "NUMBER", "nodemon", "file", "triggering", "change", "check", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "matched", "rule", "NUMBER", "nodemon", "change", "after", "filters", "before", "after", "NUMBER", "NUMBER", "nodemon", "restarting", "due", "to", "change", "NUMBER", "nodemon", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "starting", "node", "app", "NUMBER", "js", "trace", "sync", "io", "nodemon", "child", "pid", "NUMBER", "nodemon", "file", "triggering", "change", "check", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "matched", "rule", "NUMBER", "nodemon", "change", "after", "filters", "before", "after", "NUMBER", "NUMBER", "nodemon", "restarting", "due", "to", "change", "NUMBER", "nodemon", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "starting", "node", "app", "NUMBER", "js", "trace", "sync", "io", "nodemon", "child", "pid", "NUMBER", "nodemon", "file", "triggering", "change", "check", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "nodemon", "matched", "rule", "NUMBER", "nodemon", "change", "after", "filters", "before", "after", "NUMBER", "NUMBER", "nodemon", "restarting", "due", "to", "change", "NUMBER", "nodemon", "application", "frontend", "home", "home", "NUMBER", "marko", "NUMBER", "js", "patrick", "steele", "idem", "Thanks", "you", "very", "much", "All", "works", "fine", "NUMBER", "But", "in", "previous", "version", "NUMBER", "x", "i", "did", "not", "see", "this", "problem", "NUMBER", "Adds", "a", "submodule", "marko", "express", "that", "provides", "an", "injectInto", "method", "that", "will", "add", "a", "marko", "method", "to", "the", "express", "response", "prototype", "NUMBER", "We", "get", "access", "to", "express", "locals", "and", "it", "automatically", "sets", "the", "content", "type", "of", "the", "request", "NUMBER", "This", "latest", "update", "remove", "the", "need", "to", "pass", "express", "to", "the", "submodule", "NUMBER", "It", "be", "required", "from", "the", "parent", "module", "s", "context", "NUMBER", "Test", "coverage", "has", "be", "increase", "as", "well", "NUMBER", "We", "need", "a", "way", "to", "disable", "client", "reorder", "on", "all", "TAG", "tags", "NUMBER", "This", "will", "be", "useful", "when", "serving", "content", "to", "bots", "crawlers", "and", "users", "that", "might", "have", "js", "disabled", "NUMBER", "the", "if", "conditional", "attribute", "syntax", "be", "deprecate", "in", "v", "NUMBER", "NUMBER", "Hi", "I", "have", "a", "project", "where", "part", "of", "the", "content", "be", "inserted", "on", "a", "database", "use", "a", "CMS", "NUMBER", "That", "content", "sometimes", "have", "paragraphs", "NUMBER", "I", "tried", "to", "replace", "n", "and", "others", "with", "TAG", "but", "then", "Marko", "replaces", "the", "TAG", "Markojs", "_marko", "template", "hello", "NUMBER", "marko_", "html", "Hello", "data", "NUMBER", "name", "TAG", "Other", "text", "TAG", "_output", "html_", "Hello", "lt", "br", "Markojs", "TAG", "Other", "text", "TAG", "Hello", "lt", "br", "Markojs", "Other", "text", "By", "default", "all", "special", "HTML", "characters", "will", "be", "escaped", "in", "dynamic", "text", "to", "prevent", "Cross", "site", "Scripting", "XSS", "Attacks", "NUMBER", "To", "disable", "HTML", "escaping", "you", "can", "use", "as", "shown", "in", "the", "following", "sample", "code", "_data_", "json", "name", "TAG", "Markojs", "_marko", "template", "hello", "NUMBER", "marko_", "html", "Hello", "data", "NUMBER", "name", "TAG", "Other", "text", "TAG", "_output", "html_", "Hello", "TAG", "Markojs", "TAG", "Other", "text", "TAG", "Hello", "Markojs", "Other", "text", "Ref", "Language", "Guide", "Marko", "LINK", "guide", "text", "replacement", "Thanks", "a", "lot", "I", "remembered", "to", "have", "read", "it", "somewhere", "but", "I", "couldn", "t", "find", "it", "NUMBER", "Adding", "some", "file", "to", "npmignore", "which", "be", "not", "required", "to", "be", "publish", "to", "npm", "registry", "I", "be", "use", "Jade", "doc", "as", "a", "reference", "at", "the", "moment", "they", "suggest", "use", "html", "tag", "directly", "for", "inline", "tags", "do", "marko", "recommend", "the", "same", "strategy", "or", "do", "it", "have", "a", "better", "solution", "eg", "NUMBER", "p", "hello", "there", "TAG", "username", "TAG", "NUMBER", "A", "demo", "on", "LINK", "online", "would", "help", "NUMBER", "Currently", "the", "only", "demo", "with", "inline", "tags", "be", "use", "macro", "NUMBER", "I", "think", "it", "s", "an", "overkill", "to", "do", "this", "with", "macro", "NUMBER", "Ah", "interesting", "so", "whitespace", "demo", "do", "sort", "of", "address", "my", "question", "not", "quite", "sure", "what", "stands", "for", "though", "NUMBER", "LINK", "online", "Whitespace_Simple", "Closing", "this", "as", "the", "answer", "be", "p", "hello", "there", "strong", "username", "NUMBER", "patrick", "steele", "idem", "Note", "the", "error", "be", "misleading", "as", "I", "just", "modify", "the", "exist", "template", "however", "the", "hot", "reloader", "module", "somehow", "looks", "for", "new", "compiled", "template", "NUMBER", "Error", "ENOENT", "no", "such", "file", "or", "directory", "open", "Users", "prashjain", "projects", "xonyx", "node_modules", "lasso", "head", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "vpaz", "NUMBER", "marko", "at", "Error", "native", "at", "Object", "NUMBER", "fs", "NUMBER", "openSync", "fs", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "fs", "NUMBER", "readFileSync", "fs", "NUMBER", "js", "NUMBER", "NUMBER", "at", "loadFile", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "loader", "NUMBER", "js", "NUMBER", "NUMBER", "at", "load", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "loader", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "load", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "marko", "NUMBER", "load", "Users", "prashjain", "projects", "xonyx", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "anonymous", "function", "as", "renderSync", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "hot", "reload", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "LassoPageResult", "NUMBER", "getHtmlForSlot", "Users", "prashjain", "projects", "xonyx", "node_modules", "lasso", "lib", "LassoPageResult", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "LassoPageResult", "NUMBER", "getSlotHtml", "Users", "prashjain", "projects", "xonyx", "node_modules", "lasso", "lib", "LassoPageResult", "NUMBER", "js", "NUMBER", "NUMBER", "at", "renderSlot", "Users", "prashjain", "projects", "xonyx", "node_modules", "lasso", "taglib", "slot", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "lasso", "taglib", "slot", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "lasso", "taglib", "head", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "module", "NUMBER", "export", "NUMBER", "t", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "Users", "prashjain", "projects", "xonyx", "src", "pres", "layouts", "ryp", "desktop", "ryp", "layout", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "anonymous", "function", "as", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "hot", "reload", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "node_modules", "marko", "layout", "use", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "module", "NUMBER", "export", "NUMBER", "t", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "render", "Users", "prashjain", "projects", "xonyx", "src", "pres", "pages", "ryp", "desktop", "ryp", "page", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Template", "NUMBER", "anonymous", "function", "as", "render", "Users", "prashjain", "projects", "xonyx", "node_modules", "marko", "hot", "reload", "index", "NUMBER", "js", "NUMBER", "NUMBER", "It", "s", "now", "out", "as", "stable", "and", "will", "be", "the", "LTS", "release", "come", "October", "NUMBER", "So", "here", "s", "a", "fun", "one", "bash", "npm", "test", "marko", "NUMBER", "test", "Users", "jsumners", "Projects", "marko", "npm", "run", "init", "test", "node_modules", "NUMBER", "bin", "mocha", "ui", "bdd", "reporter", "spec", "NUMBER", "test", "node_modules", "NUMBER", "bin", "jshint", "compiler", "runtime", "taglibs", "marko", "NUMBER", "init", "test", "Users", "jsumners", "Projects", "marko", "NUMBER", "test", "init", "test", "NUMBER", "sh", "Users", "jsumners", "Projects", "marko", "node_modules", "property", "handlers", "lib", "index", "NUMBER", "js", "NUMBER", "throw", "cause", "Error", "Error", "while", "handle", "properties", "for", "TAG", "tag", "in", "Users", "jsumners", "Projects", "marko", "taglibs", "core", "marko", "NUMBER", "json", "Error", "while", "applying", "option", "of", "code", "generator", "NUMBER", "Cause", "TypeError", "Path", "must", "be", "a", "string", "NUMBER", "Received", "undefined", "at", "assertPath", "path", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "dirname", "path", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Users", "jsumners", "Projects", "marko", "node_modules", "raptor", "modules", "resolver", "lib", "serverResolveRequire", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "find", "Users", "jsumners", "Projects", "marko", "node_modules", "raptor", "modules", "resolver", "lib", "search", "path", "NUMBER", "js", "NUMBER", "NUMBER", "at", "serverResolveRequire", "Users", "jsumners", "Projects", "marko", "node_modules", "raptor", "modules", "resolver", "lib", "serverResolveRequire", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "TagHandlers", "NUMBER", "codeGenerator", "Users", "jsumners", "Projects", "marko", "compiler", "taglib", "loader", "loader", "tag", "NUMBER", "js", "NUMBER", "NUMBER", "at", "invokeHandlers", "Users", "jsumners", "Projects", "marko", "node_modules", "property", "handlers", "lib", "index", "NUMBER", "js", "NUMBER", "NUMBER", "npm", "ERR", "Test", "fail", "NUMBER", "See", "above", "for", "more", "details", "NUMBER", "I", "ve", "created", "a", "few", "prototypes", "Core", "marko", "generator", "project", "link", "LINK", "js", "generator", "Atom", "marko", "generator", "project", "link", "LINK", "js", "generator", "atom", "Having", "a", "separate", "core", "project", "allows", "use", "to", "centralized", "set", "of", "layout", "template", "for", "ui", "components", "and", "later", "entire", "projects", "NUMBER", "The", "core", "be", "generic", "and", "doesn", "t", "contain", "any", "logic", "relate", "to", "atom", "but", "contains", "the", "template", "see", "example", "here", "LINK", "js", "generator", "tree", "master", "template", "ui", "component", "and", "the", "logic", "needed", "to", "copy", "them", "to", "any", "destination", "path", "NUMBER", "The", "atom", "project", "contains", "all", "the", "logic", "needed", "to", "surface", "the", "proper", "menu", "items", "etc", "and", "has", "the", "core", "project", "as", "a", "dependency", "not", "implement", "yet", "need", "to", "npm", "publish", "NUMBER", "Curious", "what", "everyone", "thinks", "of", "this", "approach", "I", "think", "the", "core", "library", "starts", "to", "allow", "us", "to", "branch", "into", "other", "frameworks", "like", "yeoman", "sublime", "etc", "NUMBER", "patrick", "steele", "idem", "Good", "points", "NUMBER", "I", "agree", "that", "the", "prototype", "be", "too", "rigid", "in", "enforcing", "NUMBER", "less", "etc", "NUMBER", "Maybe", "we", "could", "add", "an", "option", "to", "both", "core", "atom", "projects", "to", "save", "a", "new", "template", "directory", "NUMBER", "The", "option", "could", "be", "surfaced", "in", "the", "atom", "in", "the", "right", "click", "menu", "allowing", "the", "user", "to", "right", "click", "a", "module", "and", "select", "Save", "as", "template", "NUMBER", "I", "m", "not", "sure", "how", "simple", "this", "would", "be", "in", "practice", "as", "dynamic", "data", "for", "module", "name", "would", "need", "to", "be", "include", "NUMBER", "Also", "yes", "I", "avoided", "yeoman", "this", "time", "NUMBER", "The", "last", "time", "we", "went", "down", "the", "yeoman", "path", "it", "became", "very", "tightly", "coupled", "to", "the", "framework", "NUMBER", "It", "s", "worth", "exploring", "a", "generic", "solution", "that", "uses", "atom", "yeoman", "instead", "of", "ejs", "NUMBER", "I", "also", "like", "the", "generic", "Generator", "option", "NUMBER", "This", "goes", "beyond", "simple", "marko", "support", "and", "might", "overlap", "with", "some", "exist", "solutions", "NUMBER", "Will", "need", "to", "research", "this", "further", "NUMBER", "Thanks", "for", "the", "feedback", "I", "think", "it", "would", "be", "nice", "to", "make", "something", "like", "LINK", "double", "tag", "and", "highlight", "of", "closing", "tags", "for", "marko", "NUMBER", "patrick", "steele", "idem", "thank", "very", "much", "now", "i", "be", "happy", "like", "a", "child", "for", "this", "features", "even", "vodka", "be", "not", "enough", "Also", "i", "see", "some", "colors", "in", "syntax", "highlight", "be", "change", "for", "example", "TAG", "and", "now", "it", "s", "much", "better", "NUMBER", "Good", "job", "Didn", "t", "find", "such", "issue", "for", "Visual", "Studio", "Code", "do", "you", "have", "any", "plan", "for", "it", "mlrawlings", "oh", "no", "what", "did", "I", "commit", "to", "The", "only", "item", "from", "that", "list", "that", "I", "ve", "find", "myself", "actively", "miss", "be", "click", "to", "go", "to", "tag", "definition", "i", "NUMBER", "e", "NUMBER", "jump", "to", "custom", "tag", "template", "file", "but", "the", "others", "would", "be", "great", "too", "Many", "fullstack", "engineers", "use", "IntelliJ", "so", "such", "a", "plugin", "would", "definitely", "make", "sense", "NUMBER", "Autocompletion", "of", "data", "NUMBER", "something", "would", "be", "great", "NUMBER", "Hopefully", "the", "tag", "attributes", "would", "autocomplete", "layout", "elements", "NUMBER", "Yes", "please", "Also", "a", "default", "widget", "component", "file", "generator", "via", "right", "click", "would", "be", "nice", "NUMBER", "Any", "update", "on", "this", "Official", "website", "lists", "Webstorm", "integration", "but", "link", "points", "to", "textmate", "LINK", "plugins", "Given", "the", "complexity", "of", "implement", "this", "anyone", "interested", "in", "such", "a", "plugin", "should", "also", "login", "to", "JetBrains", "s", "issue", "tracker", "and", "vote", "for", "the", "issue", "LINK", "NUMBER", "Done", "I", "be", "not", "sure", "what", "be", "this", "supposed", "to", "be", "LINK", "widgets", "get", "start", "widget", "state", "in", "the", "getTemplateData", "function", "there", "be", "an", "assignment", "to", "nothing", "to", "style", "getTemplateData", "function", "state", "input", "var", "style", "return", "name", "state", "NUMBER", "name", "color", "state", "NUMBER", "selected", "yellow", "transparent", "LINK", "js", "marko", "widgets", "pull", "NUMBER", "do", "Would", "it", "be", "better", "if", "the", "macro", "file", "helpers", "NUMBER", "marko", "could", "be", "include", "in", "other", "file", "custom", "taglibs", "be", "a", "little", "complicate", "for", "the", "beginners", "IMO", "NUMBER", "Cool", "this", "be", "more", "easy", "to", "understand", "than", "the", "doc", "NUMBER", "Thanks", "a", "lot", "NUMBER", "Example", "TAG", "Will", "result", "in", "the", "template", "compiler", "throw", "the", "following", "error", "javascript", "webapp", "node_modules", "lasso", "lib", "dependency", "walker", "NUMBER", "js", "dependency", "NUMBER", "getPackageManifest", "fail", "Error", "An", "error", "occur", "while", "trying", "to", "compile", "template", "at", "path", "webapp", "src", "code", "components", "cover", "profile", "index", "NUMBER", "marko", "NUMBER", "Error", "s", "in", "template", "NUMBER", "src", "code", "components", "cover", "profile", "index", "NUMBER", "marko", "NUMBER", "NUMBER", "Unsupported", "attribute", "of", "data", "w", "preserve", "attrs", "find", "on", "the", "TAG", "custom", "tag", "NUMBER", "at", "Compiler", "NUMBER", "compile", "webapp", "node_modules", "marko", "compiler", "Compiler", "NUMBER", "js", "NUMBER", "NUMBER", "at", "webapp", "node_modules", "marko", "compiler", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "tryToString", "fs", "NUMBER", "js", "NUMBER", "NUMBER", "at", "FSReqWrap", "NUMBER", "readFileAfterClose", "as", "oncomplete", "fs", "NUMBER", "js", "NUMBER", "NUMBER", "This", "be", "my", "template", "TAG", "TAG", "TAG", "TAG", "Estimake", "NUMBER", "co", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "This", "be", "what", "I", "be", "get", "when", "the", "template", "be", "rendered", "in", "v", "NUMBER", "TAG", "TAG", "TAG", "TAG", "Estimake", "NUMBER", "co", "TAG", "NUMBER", "TAG", "TAG", "TAG", "Any", "idea", "why", "I", "have", "the", "strangeness", "with", "the", "DOCTYPE", "Ok", "thanks", "NUMBER", "I", "tried", "yours", "and", "get", "the", "same", "issue", "TAG", "TAG", "TAG", "but", "there", "must", "be", "something", "wrong", "with", "my", "installation", "because", "apparently", "the", "original", "file", "should", "not", "have", "even", "compiled", "NUMBER", "I", "take", "it", "from", "your", "answer", "that", "with", "NUMBER", "indention", "be", "now", "significant", "like", "with", "the", "Jade", "engine", "even", "with", "the", "HTML", "approach", "Let", "me", "play", "around", "with", "my", "installation", "first", "NUMBER", "I", "won", "t", "to", "make", "sure", "I", "be", "not", "doing", "something", "stupid", "before", "I", "bug", "you", "about", "it", "NUMBER", "I", "be", "not", "sure", "how", "the", "first", "template", "compiled", "given", "the", "error", "in", "indention", "NUMBER", "Thanks", "for", "your", "quick", "response", "NUMBER", "Howto", "reproduce", "NUMBER", "Open", "the", "online", "try", "out", "Simple", "example", "at", "LINK", "online", "NUMBER", "Modify", "the", "line", "NUMBER", "line", "to", "add", "an", "attribute", "TAG", "NUMBER", "The", "expected", "output", "for", "the", "above", "be", "TAG", "but", "instead", "a", "syntax", "error", "occur", "NUMBER", "It", "works", "if", "the", "dollar", "sign", "isn", "t", "escaped", "at", "all", "NUMBER", "TAG", "In", "marko", "js", "pre", "v", "NUMBER", "this", "worked", "as", "expected", "NUMBER", "Worth", "to", "mention", "be", "that", "the", "migration", "tool", "translates", "attr", "foo", "into", "attr", "foo", "which", "be", "not", "what", "be", "expected", "NUMBER", "The", "migration", "script", "translates", "foo", "into", "double", "foo", "Since", "I", "m", "use", "knockout", "js", "some", "special", "variables", "need", "to", "be", "prefixed", "with", "luke", "parent", "and", "such", "NUMBER", "In", "this", "case", "the", "output", "needs", "to", "be", "attr", "parent", "without", "any", "Great", "I", "will", "try", "it", "out", "in", "a", "couple", "of", "days", "Thanks", "the", "solution", "worked", "when", "use", "the", "require", "marko", "NUMBER", "install", "the", "compiled", "file", "seem", "to", "cut", "the", "NUMBER", "marko", "extension", "from", "all", "require", "NUMBER", "resolve", "calls", "NUMBER", "When", "i", "have", "compiled", "use", "markoc", "master", "NUMBER", "marko", "my", "output", "contains", "navigation_template", "loadTemplate", "require", "NUMBER", "resolve", "NUMBER", "components", "navigation", "template", "NUMBER", "marko", "but", "when", "i", "have", "install", "the", "node", "require", "module", "and", "simply", "required", "the", "template", "with", "require", "NUMBER", "src", "master", "NUMBER", "marko", "the", "same", "line", "be", "navigation_template", "loadTemplate", "require", "NUMBER", "resolve", "NUMBER", "components", "navigation", "template", "Sweet", "NUMBER", "As", "soon", "as", "that", "work", "as", "expected", "i", "think", "i", "have", "a", "function", "pull", "request", "for", "markoify", "NUMBER", "On", "NUMBER", "April", "NUMBER", "at", "NUMBER", "NUMBER", "Patrick", "Steele", "Idem", "notifications", "github", "NUMBER", "com", "write", "Thanks", "for", "report", "the", "problem", "NUMBER", "I", "m", "looking", "into", "it", "NUMBER", "You", "be", "receiving", "this", "because", "you", "authored", "the", "thread", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "Ok", "i", "will", "see", "if", "i", "can", "recreate", "it", "again", "NUMBER", "On", "NUMBER", "April", "NUMBER", "at", "NUMBER", "NUMBER", "Patrick", "Steele", "Idem", "notifications", "github", "NUMBER", "com", "write", "lohfu", "LINK", "I", "was", "not", "able", "to", "reproduce", "the", "problem", "use", "a", "fresh", "npm", "install", "NUMBER", "I", "tried", "to", "recreate", "your", "setup", "and", "the", "template", "be", "compile", "as", "expected", "function", "create", "__helpers", "var", "str", "__helpers", "NUMBER", "s", "empty", "__helpers", "NUMBER", "e", "notEmpty", "__helpers", "NUMBER", "ne", "escapeXml", "__helpers", "NUMBER", "x", "loadTemplate", "__helpers", "NUMBER", "l", "navigation_template", "loadTemplate", "require", "NUMBER", "resolve", "NUMBER", "components", "navigation", "template", "NUMBER", "marko", "return", "function", "render", "data", "out", "navigation_template", "NUMBER", "render", "out", "module", "NUMBER", "export", "require", "marko", "NUMBER", "c", "__filename", "NUMBER", "c", "create", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "Hey", "Patrick", "Yes", "i", "was", "NUMBER", "I", "created", "a", "repository", "at", "LINK", "test", "NUMBER", "Simply", "run", "node", "server", "server", "NUMBER", "js", "will", "create", "a", "master", "NUMBER", "marko", "NUMBER", "js", "with", "navigation_template", "loadTemplate", "require", "NUMBER", "resolve", "NUMBER", "components", "navigation", "template", "On", "NUMBER", "April", "NUMBER", "at", "NUMBER", "NUMBER", "Patrick", "Steele", "Idem", "notifications", "github", "NUMBER", "com", "write", "Hey", "lohfu", "LINK", "just", "wanted", "to", "check", "in", "and", "see", "if", "you", "were", "able", "to", "reproduce", "NUMBER", "Thanks", "NUMBER", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "Added", "ability", "to", "exclude", "specific", "node_module", "from", "marko", "taglib", "NUMBER", "json", "lookup", "Added", "test", "for", "excluding", "specific", "directory", "and", "specific", "node_modules", "from", "marko", "taglib", "NUMBER", "json", "lookup", "Steps", "to", "reproduce", "NUMBER", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "false", "NUMBER", "require", "marko", "node", "require", "NUMBER", "install", "NUMBER", "Create", "a", "custom", "tag", "that", "include", "an", "instance", "of", "itself", "NUMBER", "TAG", "TAG", "TAG", "data", "NUMBER", "page", "NUMBER", "title", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "I", "m", "trying", "to", "do", "something", "very", "simple", "but", "I", "can", "t", "seem", "to", "get", "it", "to", "work", "NUMBER", "I", "have", "a", "basic", "template", "like", "this", "NUMBER", "TAG", "TAG", "TAG", "TAG", "And", "in", "custom", "tag", "s", "template", "I", "include", "another", "custom", "tag", "NUMBER", "TAG", "TAG", "TAG", "TAG", "And", "then", "finally", "customTag", "NUMBER", "s", "template", "simply", "renders", "NUMBER", "I", "m", "custom", "tag", "NUMBER", "When", "I", "render", "all", "this", "I", "end", "up", "with", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "It", "never", "renders", "customTag", "NUMBER", "And", "I", "know", "the", "tag", "lib", "be", "find", "becuase", "if", "I", "go", "to", "my", "main", "template", "and", "include", "both", "custom", "tags", "they", "both", "render", "but", "not", "if", "they", "be", "nested", "NUMBER", "Am", "I", "doing", "something", "wrong", "Or", "be", "including", "one", "custom", "tag", "in", "another", "s", "template", "not", "support", "Do", "I", "have", "to", "do", "the", "Parent", "Child", "thing", "I", "d", "rather", "not", "since", "the", "child", "tag", "be", "intended", "to", "be", "use", "in", "many", "places", "NUMBER", "Sure", "it", "s", "a", "pretty", "simple", "set", "up", "NUMBER", "tags", "customTag", "NUMBER", "template", "NUMBER", "marko", "customTag", "NUMBER", "template", "NUMBER", "marko", "template", "mainTemplate", "NUMBER", "marko", "Index", "NUMBER", "js", "marko", "NUMBER", "json", "Here", "the", "index", "file", "be", "rendering", "the", "NUMBER", "template", "mainTemplate", "NUMBER", "marko", "NUMBER", "The", "marko", "NUMBER", "json", "be", "as", "follows", "tags", "dir", "NUMBER", "tags", "No", "sorry", "that", "s", "just", "my", "bad", "typing", "here", "NUMBER", "I", "fix", "the", "above", "example", "NUMBER", "It", "be", "strange", "because", "as", "I", "said", "if", "I", "include", "both", "custom", "tags", "in", "the", "root", "template", "they", "both", "render", "it", "s", "only", "if", "one", "be", "nested", "inside", "the", "other", "that", "the", "inner", "template", "do", "not", "render", "NUMBER", "You", "be", "right", "that", "works", "NUMBER", "It", "must", "be", "something", "with", "my", "set", "up", "NUMBER", "I", "ll", "close", "this", "for", "now", "since", "it", "be", "possible", "to", "do", "it", "and", "I", "ll", "try", "to", "figure", "out", "where", "I", "messed", "up", "NUMBER", "Thanks", "for", "all", "the", "help", "I", "feel", "there", "be", "not", "enough", "awareness", "out", "in", "the", "community", "about", "Markojs", "nor", "be", "there", "a", "curated", "list", "of", "examples", "articles", "and", "good", "libraries", "from", "around", "the", "net", "NUMBER", "May", "there", "should", "be", "one", "NUMBER", "I", "agree", "with", "this", "NUMBER", "For", "example", "I", "think", "it", "would", "be", "really", "cool", "if", "there", "was", "an", "article", "showing", "how", "eBay", "leverages", "Marko", "for", "their", "main", "site", "Since", "I", "suggested", "this", "I", "really", "should", "join", "in", "the", "fun", "I", "will", "be", "submit", "libs", "components", "etc", "as", "I", "make", "them", "over", "the", "next", "couple", "of", "weeks", "NUMBER", "I", "will", "do", "my", "best", "to", "get", "some", "articles", "out", "about", "Markjs", "on", "my", "Medium", "blog", "NUMBER", "love", "it", "will", "commit", "something", "when", "you", "define", "a", "format", "NUMBER", "I", "have", "be", "looking", "for", "UI", "kits", "such", "as", "vuematerial", "NUMBER", "github", "NUMBER", "io", "vuetifyjs", "NUMBER", "com", "for", "marko", "but", "haven", "t", "find", "any", "so", "far", "NUMBER", "An", "awesome", "marko", "repo", "would", "be", "very", "helpful", "to", "group", "all", "available", "resources", "under", "one", "page", "In", "some", "of", "the", "custom", "elements", "I", "ve", "write", "I", "want", "to", "use", "different", "root", "elements", "based", "on", "the", "context", "NUMBER", "I", "want", "to", "put", "w", "bind", "on", "these", "root", "elements", "NUMBER", "The", "content", "inside", "these", "root", "elements", "be", "the", "same", "across", "variations", "and", "I", "would", "like", "to", "use", "a", "macro", "to", "avoid", "repetition", "NUMBER", "However", "when", "I", "try", "to", "use", "w", "body", "in", "the", "macro", "I", "get", "an", "error", "saying", "that", "w", "body", "can", "only", "be", "use", "inside", "a", "element", "with", "w", "bind", "NUMBER", "This", "prohibits", "my", "ability", "to", "use", "a", "macro", "to", "render", "the", "content", "NUMBER", "What", "be", "the", "best", "way", "to", "pass", "a", "rendered", "body", "to", "the", "macro", "Thanks", "for", "the", "suggestion", "NUMBER", "I", "ll", "try", "it", "NUMBER", "mlrawlings", "I", "tried", "the", "technique", "you", "suggested", "and", "the", "element", "renders", "correctly", "NUMBER", "However", "the", "new", "element", "be", "not", "bound", "NUMBER", "With", "this", "template", "TAG", "TAG", "TAG", "TAG", "data", "NUMBER", "subheader", "TAG", "TAG", "TAG", "I", "get", "TAG", "TAG", "My", "Header", "TAG", "TAG", "And", "when", "I", "use", "w", "body", "instead", "of", "TAG", "I", "still", "get", "a", "compile", "error", "complaining", "about", "w", "body", "without", "w", "bind", "NUMBER", "Let", "me", "know", "if", "I", "miss", "something", "that", "enable", "the", "suggestion", "to", "work", "NUMBER", "Works", "like", "a", "charm", "NUMBER", "Thanks", "I", "just", "migrated", "to", "v", "NUMBER", "and", "now", "only", "custom", "taglibs", "in", "the", "same", "directory", "as", "the", "page", "be", "resolve", "NUMBER", "Here", "s", "a", "sample", "of", "the", "directory", "structure", "root", "package", "NUMBER", "json", "marko", "NUMBER", "json", "node_modules", "plugins", "components", "my", "hello", "template", "NUMBER", "marko", "pages", "test", "page", "NUMBER", "marko", "marko", "NUMBER", "json", "has", "tags", "dir", "NUMBER", "plugins", "components", "I", "can", "get", "the", "my", "hello", "custom", "tag", "to", "render", "in", "page", "NUMBER", "marko", "only", "when", "it", "and", "marko", "NUMBER", "json", "be", "located", "in", "plugins", "pages", "test", "NUMBER", "I", "believe", "relate", "to", "this", "issue", "TAG", "and", "TAG", "don", "t", "render", "either", "NUMBER", "They", "appear", "as", "tags", "in", "the", "outputted", "page", "NUMBER", "It", "was", "my", "understanding", "that", "marko", "would", "walk", "up", "the", "directory", "tree", "from", "the", "page", "to", "the", "project", "s", "root", "looking", "for", "marko", "NUMBER", "json", "NUMBER", "Once", "find", "it", "would", "use", "marko", "NUMBER", "json", "to", "pull", "in", "any", "custom", "tag", "definitions", "NUMBER", "I", "m", "not", "sure", "what", "change", "with", "v", "NUMBER", "Walking", "up", "the", "directory", "tree", "from", "plugins", "pages", "test", "I", "only", "have", "package", "NUMBER", "json", "at", "the", "root", "NUMBER", "Some", "of", "the", "other", "plugins", "have", "a", "package", "NUMBER", "json", "file", "but", "they", "be", "not", "parents", "of", "the", "test", "page", "NUMBER", "Did", "this", "behavior", "change", "between", "v", "NUMBER", "and", "v", "NUMBER", "I", "ask", "because", "in", "the", "v", "NUMBER", "version", "of", "the", "repo", "I", "m", "work", "on", "I", "have", "a", "page", "directory", "with", "a", "package", "NUMBER", "json", "and", "everything", "be", "work", "fine", "NUMBER", "From", "Patrick", "Steele", "Idem", "notifications", "github", "NUMBER", "com", "Reply", "To", "marko", "js", "marko", "reply", "reply", "NUMBER", "github", "NUMBER", "com", "Date", "Sunday", "March", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "To", "marko", "js", "marko", "marko", "noreply", "NUMBER", "github", "NUMBER", "com", "Cc", "Todd", "Bashor", "tbashor", "gmail", "NUMBER", "com", "Subject", "Re", "marko", "Custom", "taglibs", "not", "find", "after", "migrating", "to", "v", "NUMBER", "NUMBER", "tbashor", "by", "any", "chance", "do", "you", "have", "any", "intermediate", "package", "NUMBER", "json", "file", "The", "taglib", "finder", "stops", "when", "it", "gets", "to", "the", "root", "of", "the", "package", "The", "root", "of", "the", "package", "be", "determined", "by", "looking", "for", "a", "package", "NUMBER", "json", "file", "with", "a", "name", "property", "NUMBER", "I", "suspect", "that", "the", "search", "for", "taglibs", "be", "be", "ended", "prematurely", "due", "to", "the", "root", "directory", "not", "be", "as", "expected", "NUMBER", "FYI", "here", "be", "the", "code", "that", "be", "use", "to", "discover", "taglibs", "for", "marko", "LINK", "js", "marko", "blob", "master", "compiler", "taglib", "finder", "index", "NUMBER", "js", "Please", "let", "me", "know", "if", "that", "be", "the", "case", "NUMBER", "Thanks", "NUMBER", "You", "be", "receiving", "this", "because", "you", "were", "mention", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "patrick", "steele", "idem", "You", "were", "right", "that", "there", "was", "a", "package", "NUMBER", "json", "stopping", "the", "lookup", "NUMBER", "I", "m", "still", "having", "trouble", "get", "the", "lasso", "tags", "to", "resolve", "but", "I", "think", "that", "has", "to", "do", "with", "my", "particular", "setup", "NUMBER", "Thanks", "for", "your", "help", "NUMBER", "Currently", "rendering", "a", "template", "returns", "an", "AsyncWriter", "it", "would", "be", "handy", "though", "if", "when", "a", "callback", "be", "omitted", "that", "template", "render", "function", "returned", "a", "promise", "NUMBER", "js", "var", "template", "require", "template", "NUMBER", "marko", "template", "NUMBER", "render", "hello", "world", "NUMBER", "en", "function", "html", "NUMBER", "NUMBER", "catch", "function", "err", "NUMBER", "If", "you", "re", "use", "promises", "already", "it", "makes", "use", "marko", "a", "bit", "easier", "NUMBER", "You", "can", "use", "temporarily", "bluebird", "module", "NUMBER", "let", "Promise", "require", "bluebird", "let", "EntryCommentsMarkup", "require", "NUMBER", "views", "EntryComments", "NUMBER", "marko", "Promise", "NUMBER", "promisifyAll", "EntryCommentsMarkup", "then", "in", "routing", "we", "invoke", "renderAsync", "method", "app", "NUMBER", "get", "example", "function", "req", "res", "let", "Data", "NUMBER", "return", "EntryCommentsMarkup", "NUMBER", "renderAsync", "Data", "NUMBER", "en", "markup", "res", "NUMBER", "atus", "NUMBER", "NUMBER", "json", "markup", "markup", "NUMBER", "catch", "error", "res", "NUMBER", "atus", "NUMBER", "NUMBER", "json", "message", "error", "NUMBER", "message", "A", "bit", "late", "just", "throw", "this", "out", "there", "The", "Promises", "A", "specification", "requires", "that", "if", "the", "result", "be", "an", "object", "or", "function", "with", "a", "then", "method", "it", "_must_", "be", "treated", "as", "a", "thenable", "NUMBER", "In", "other", "words", "this", "solution", "be", "explicitly", "permitted", "by", "the", "specification", "and", "any", "Promise", "library", "which", "doesn", "t", "handle", "this", "correctly", "be", "by", "definition", "broken", "NUMBER", "That", "s", "all", "carry", "on", "NUMBER", "This", "pull", "request", "fix", "a", "case", "wherein", "if", "renderSync", "receives", "no", "context", "then", "it", "will", "still", "render", "the", "template", "NUMBER", "Currently", "if", "you", "don", "t", "supply", "at", "least", "an", "empty", "object", "then", "renderSync", "bombs", "with", "an", "error", "like", "Debug", "internal", "implementation", "error", "TypeError", "Uncaught", "error", "Cannot", "read", "property", "global", "of", "undefined", "at", "Object", "NUMBER", "Template", "NUMBER", "renderSync", "some", "project", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "NUMBER", "Excellent", "NUMBER", "Thank", "you", "NUMBER", "I", "be", "build", "a", "reusable", "component", "data", "grid", "use", "marko", "template", "NUMBER", "The", "component", "renders", "set", "of", "pass", "data", "in", "html", "TAG", "NUMBER", "The", "component", "internally", "support", "couple", "of", "cell", "renderers", "which", "injects", "content", "inside", "TAG", "NUMBER", "NUMBER", "Text", "for", "display", "paragraph", "of", "text", "list", "of", "links", "NUMBER", "Image", "for", "display", "an", "image", "I", "would", "also", "like", "to", "allow", "clients", "to", "configure", "custom", "cell", "renderers", "if", "you", "they", "choose", "to", "implement", "something", "on", "their", "own", "NUMBER", "I", "don", "t", "see", "a", "way", "to", "invoke", "template", "dynamically", "NUMBER", "As", "expected", "TAG", "directly", "invokes", "the", "template", "and", "don", "t", "execute", "the", "renderer", "NUMBER", "Am", "I", "miss", "something", "P", "NUMBER", "S", "I", "be", "use", "marko", "v", "NUMBER", "and", "this", "component", "be", "server", "side", "rendered", "NUMBER", "NUMBER", "Thanks", "patrick", "steele", "idem", "NUMBER", "Looking", "forward", "to", "Marko", "v", "NUMBER", "TAG", "This", "be", "good", "but", "it", "could", "be", "much", "better", "NUMBER", "smile", "Some", "thoughts", "on", "creating", "a", "debugger", "Pretty", "printing", "to", "the", "browser", "Additional", "information", "about", "the", "data", "object", "type", "length", "of", "the", "data", "processing", "time", "the", "template", "path", "in", "which", "the", "debugger", "it", "s", "call", "limiting", "the", "debugger", "to", "only", "show", "in", "non", "prod", "environments", "don", "t", "know", "if", "this", "be", "possible", "but", "NUMBER", "would", "be", "nice", "etc", "NUMBER", "I", "ve", "seen", "at", "least", "a", "few", "other", "major", "projects", "add", "HTML", "comments", "like", "that", "to", "their", "output", "for", "various", "reasons", "including", "debugging", "NUMBER", "Angular", "even", "uses", "a", "similar", "syntax", "to", "bind", "code", "to", "the", "DOM", "TAG", "NUMBER", "On", "the", "other", "hand", "element", "attributes", "might", "provide", "some", "benefits", "that", "comments", "couldn", "t", "especially", "within", "the", "parser", "compiler", "renderer", "as", "they", "would", "be", "assigned", "directly", "to", "the", "relevant", "AST", "nodes", "though", "the", "idea", "of", "use", "element", "attributes", "which", "be", "usually", "supposed", "to", "affect", "something", "to", "display", "debug", "information", "which", "be", "never", "supposed", "to", "affect", "anything", "be", "a", "bit", "unnerving", "NUMBER", "What", "about", "something", "in", "between", "Throughout", "the", "parsing", "compile", "rendering", "process", "the", "debug", "information", "could", "be", "stored", "in", "a", "property", "on", "the", "relevant", "AST", "node", "or", "_maybe_", "in", "a", "parent", "node", "similar", "to", "an", "HtmlComment", "element", "or", "perhaps", "even", "some", "combination", "of", "the", "two", "then", "eventually", "rendered", "as", "HTML", "comments", "like", "in", "the", "example", "above", "NUMBER", "Then", "tool", "could", "be", "write", "to", "simply", "hook", "into", "the", "property", "node", "to", "extract", "debug", "information", "during", "the", "compile", "and", "rendering", "processes", "and", "there", "would", "also", "be", "helpful", "HTML", "comments", "in", "the", "final", "output", "NUMBER", "Special", "debugging", "tags", "and", "attributes", "could", "also", "be", "add", "like", "debug", "true", "to", "toggle", "verbose", "debugging", "on", "specific", "element", "trees", "debug", "render", "time", "to", "track", "and", "report", "how", "long", "nodes", "take", "to", "render", "and", "_maybe_", "even", "something", "like", "TAG", "to", "watch", "an", "object", "for", "change", "just", "to", "name", "a", "few", "NUMBER", "If", "all", "of", "this", "was", "handle", "by", "the", "special", "debug", "property", "node", "and", "only", "when", "some", "special", "flag", "like", "DEBUG", "marko", "or", "debug", "be", "detected", "I", "would", "think", "this", "could", "be", "implement", "without", "too", "many", "side", "effect", "NUMBER", "Thoughts", "Example", "Install", "hapi", "and", "marko", "sudo", "npm", "install", "hapi", "save", "sudo", "npm", "install", "marko", "save", "_directory", "structure", "_", "hapi", "marko", "public", "assets", "css", "js", "img", "resources", "error", "NUMBER", "marko", "partials", "aside", "NUMBER", "marko", "footer", "NUMBER", "marko", "header", "NUMBER", "marko", "template", "master", "NUMBER", "marko", "index", "NUMBER", "marko", "index", "NUMBER", "js", "package", "NUMBER", "json", "README", "NUMBER", "md", "public", "assets", "Web", "resources", "that", "be", "publicly", "available", "css", "js", "img", "fonts", "public", "resouces", "Server", "and", "browser", "side", "template", "index", "NUMBER", "js", "Application", "entry", "point", "Server", "side", "rendering", "_index", "NUMBER", "js_", "js", "const", "Hapi", "require", "hapi", "The", "following", "line", "installs", "the", "Node", "NUMBER", "js", "require", "extension", "for", "NUMBER", "marko", "file", "NUMBER", "Once", "install", "NUMBER", "marko", "file", "can", "be", "required", "just", "like", "any", "other", "JavaScript", "modules", "NUMBER", "require", "marko", "node", "require", "NUMBER", "install", "If", "true", "the", "default", "then", "compiled", "template", "will", "be", "write", "to", "disk", "NUMBER", "If", "false", "compiled", "template", "will", "not", "be", "write", "to", "disk", "i", "NUMBER", "e", "NUMBER", "no", "NUMBER", "marko", "NUMBER", "js", "file", "will", "be", "generate", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "false", "const", "server", "new", "Hapi", "NUMBER", "Server", "server", "NUMBER", "connection", "Load", "template", "const", "index", "require", "NUMBER", "public", "resources", "index", "NUMBER", "marko", "server", "NUMBER", "route", "method", "GET", "path", "handler", "function", "request", "reply", "index", "NUMBER", "render", "message", "hello", "world", "reply", "server", "NUMBER", "art", "console", "NUMBER", "log", "Running", "at", "server", "NUMBER", "info", "NUMBER", "uri", "_index", "NUMBER", "marko_", "html", "TAG", "TAG", "TAG", "data", "NUMBER", "message", "TAG", "or", "TAG", "data", "NUMBER", "message", "TAG", "TAG", "TAG", "_master", "NUMBER", "marko_", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "_header", "NUMBER", "marko_", "html", "TAG", "header", "content", "TAG", "_aside", "NUMBER", "marko_", "html", "TAG", "aside", "content", "TAG", "_footer", "NUMBER", "marko_", "html", "TAG", "footer", "content", "TAG", "execute", "node", "index", "NUMBER", "js", "Open", "your", "browser", "and", "visit", "LINK", "gives", "the", "following", "output", "aside", "content", "hello", "world", "or", "hello", "world", "footer", "content", "Clone", "the", "example", "example", "hapi", "marko", "LINK", "hapi", "marko", "I", "m", "agree", "NUMBER", "I", "ll", "work", "on", "a", "new", "tutorial", "NUMBER", "Have", "a", "great", "weekend", "If", "you", "want", "to", "adjust", "the", "response", "type", "javascript", "server", "NUMBER", "route", "method", "GET", "path", "handler", "function", "request", "reply", "reply", "index", "NUMBER", "ream", "message", "hello", "world", "NUMBER", "type", "text", "html", "Both", "NUMBER", "render", "and", "NUMBER", "ream", "be", "very", "useful", "However", "they", "be", "deprecate", "NUMBER", "Is", "it", "OK", "to", "still", "use", "them", "with", "hapi", "Is", "there", "a", "better", "option", "No", "they", "aren", "t", "NUMBER", "LINK", "api", "streamtemplatedata", "streamreadable", "be", "not", "LINK", "api", "streamtemplatepath", "templatedata", "streamreadable", "FYI", "LINK", "TAG", "shouldn", "t", "add", "a", "newline", "to", "rendered", "output", "because", "it", "s", "an", "option", "to", "the", "compiler", "not", "part", "of", "the", "template", "at", "all", "NUMBER", "So", "it", "shouldn", "t", "cause", "any", "side", "effect", "in", "the", "output", "NUMBER", "I", "was", "about", "to", "submit", "a", "PR", "with", "a", "fix", "but", "patrick", "steele", "idem", "said", "in", "gitter", "The", "marko", "compiler", "allows", "certain", "nodes", "tags", "to", "be", "marked", "as", "noOutput", "so", "that", "they", "get", "ignored", "when", "applying", "whitespace", "removal", "rules", "NUMBER", "We", "probably", "just", "need", "to", "set", "that", "flag", "for", "the", "TAG", "tag", "NUMBER", "We", "should", "add", "a", "test", "case", "to", "verify", "NUMBER", "So", "that", "s", "a", "better", "solution", "NUMBER", "I", "was", "also", "trying", "to", "provide", "a", "PR", "for", "this", "but", "i", "have", "no", "idea", "about", "how", "to", "do", "it", "NUMBER", "I", "was", "about", "to", "add", "el", "NUMBER", "noOutput", "true", "below", "line", "NUMBER", "in", "Parser", "NUMBER", "js", "LINK", "js", "marko", "blob", "master", "compiler", "Parser", "NUMBER", "js", "L", "NUMBER", "but", "i", "think", "the", "PR", "shouldn", "t", "wouldn", "t", "be", "accepted", "like", "that", "NUMBER", "Somewhat", "relate", "to", "NUMBER", "what", "do", "you", "think", "about", "defaulting", "to", "a", "template", "file", "without", "the", "name", "template", "NUMBER", "marko", "if", "it", "be", "the", "only", "one", "in", "that", "directory", "level", "Currently", "I", "avoid", "naming", "my", "template", "template", "NUMBER", "marko", "because", "file", "navigation", "be", "much", "quicker", "if", "I", "name", "it", "after", "the", "component", "NUMBER", "So", "my", "component", "naming", "tends", "to", "have", "some", "duplication", "component", "NUMBER", "marko", "component", "NUMBER", "js", "component", "NUMBER", "less", "but", "allows", "me", "to", "easily", "jump", "to", "file", "without", "having", "to", "type", "component", "template", "NUMBER", "marko", "in", "navigation", "commands", "NUMBER", "However", "I", "end", "up", "having", "to", "copy", "paste", "tons", "of", "index", "NUMBER", "js", "file", "like", "so", "js", "use", "strict", "var", "template", "require", "NUMBER", "component", "NUMBER", "marko", "module", "NUMBER", "export", "function", "render", "input", "out", "template", "NUMBER", "render", "input", "out", "It", "would", "be", "nice", "if", "marko", "could", "discover", "these", "automatically", "since", "it", "be", "the", "only", "template", "there", "anyway", "NUMBER", "Yep", "that", "s", "exactly", "what", "I", "do", "NUMBER", "So", "in", "my", "case", "matching", "the", "directory", "name", "would", "be", "enough", "NUMBER", "I", "actually", "only", "follow", "this", "convention", "for", "my", "own", "personal", "projects", "NUMBER", "For", "larger", "projects", "with", "more", "people", "I", "follow", "the", "standard", "convention", "for", "the", "reasons", "you", "mention", "while", "suffering", "through", "slower", "file", "navigation", "NUMBER", "It", "s", "fairly", "simple", "to", "work", "around", "this", "but", "I", "think", "it", "would", "be", "nice", "if", "marko", "was", "slightly", "less", "opinionated", "on", "file", "names", "NUMBER", "Looking", "for", "template", "NUMBER", "marko", "then", "dir", "name", "NUMBER", "marko", "before", "finally", "looking", "through", "the", "template", "in", "the", "directory", "might", "be", "a", "nice", "way", "to", "optimize", "for", "the", "primary", "cases", "NUMBER", "I", "guess", "it", "depends", "how", "much", "magic", "we", "want", "vs", "NUMBER", "config", "NUMBER", "That", "s", "true", "on", "the", "first", "point", "NUMBER", "Since", "about", "half", "my", "components", "have", "renderers", "and", "half", "have", "template", "I", "set", "them", "all", "up", "as", "renderers", "for", "consistency", "although", "it", "could", "really", "go", "either", "way", "NUMBER", "When", "I", "use", "Atom", "I", "did", "notice", "that", "the", "fuzzy", "autocomplete", "was", "pretty", "good", "NUMBER", "But", "for", "a", "bunch", "of", "other", "reasons", "I", "ve", "gone", "back", "to", "Webstorm", "for", "now", "NUMBER", "Webstorm", "isn", "t", "as", "good", "with", "directory", "matching", "and", "I", "would", "to", "type", "full", "directory", "name", "t", "to", "get", "to", "the", "template", "NUMBER", "Regarding", "the", "js", "naming", "my", "own", "personal", "convention", "be", "to", "use", "marko", "defaults", "when", "needed", "on", "the", "server", "like", "index", "NUMBER", "js", "renderer", "NUMBER", "js", "but", "to", "use", "component", "name", "for", "client", "side", "js", "component", "NUMBER", "js", "NUMBER", "You", "re", "right", "that", "having", "a", "lot", "of", "index", "file", "be", "a", "bit", "awkward", "considering", "my", "other", "file", "names", "but", "that", "s", "more", "part", "of", "node", "NUMBER", "js", "than", "Marko", "NUMBER", "This", "convention", "do", "help", "me", "differentiate", "server", "client", "a", "bit", "better", "NUMBER", "On", "the", "last", "point", "I", "m", "not", "sure", "NUMBER", "I", "think", "as", "long", "as", "Webstorm", "autocomplete", "stays", "the", "way", "it", "be", "it", "be", "significantly", "faster", "for", "me", "to", "keep", "my", "current", "naming", "conventions", "NUMBER", "If", "I", "move", "back", "to", "Atom", "then", "the", "point", "be", "moot", "NUMBER", "Sucks", "to", "make", "IDE", "specific", "decisions", "but", "I", "just", "really", "hate", "typing", "out", "long", "directory", "names", "and", "the", "other", "benefits", "of", "Webstorm", "over", "Atom", "in", "my", "opinion", "keep", "me", "there", "NUMBER", "Wanted", "to", "add", "that", "in", "playing", "around", "with", "this", "some", "more", "you", "do", "have", "to", "type", "the", "but", "not", "the", "entire", "folder", "names", "in", "Webstorm", "NUMBER", "So", "it", "s", "not", "quite", "as", "bad", "NUMBER", "I", "still", "think", "some", "flexibility", "might", "be", "nice", "here", "regardless", "NUMBER", "I", "ve", "since", "moved", "to", "generic", "file", "names", "in", "components", "and", "haven", "t", "had", "any", "issue", "with", "quick", "navigation", "in", "VS", "Code", "NUMBER", "We", "can", "close", "this", "unless", "you", "were", "still", "considering", "expanding", "auto", "discovery", "NUMBER", "In", "one", "of", "my", "projects", "I", "use", "short", "and", "long", "for", "property", "names", "in", "objects", "I", "didn", "t", "realize", "these", "were", "technically", "reserved", "NUMBER", "It", "turns", "out", "that", "these", "fail", "in", "Marko", "v", "NUMBER", "when", "use", "as", "data", "NUMBER", "short", "and", "data", "NUMBER", "long", "in", "a", "template", "NUMBER", "It", "s", "worth", "noting", "that", "this", "be", "server", "only", "since", "I", "m", "not", "use", "marko", "widgets", "in", "this", "case", "NUMBER", "Apparently", "these", "two", "keywords", "along", "with", "a", "host", "of", "others", "be", "no", "longer", "reserved", "as", "of", "ES", "NUMBER", "So", "if", "that", "s", "all", "it", "be", "I", "m", "happy", "to", "submit", "a", "quick", "PR", "to", "update", "LINK", "js", "marko", "blob", "master", "compiler", "util", "javaScriptReservedWords", "NUMBER", "js", "to", "the", "ES", "NUMBER", "list", "NUMBER", "Just", "wanted", "to", "check", "if", "there", "were", "any", "concerns", "in", "doing", "that", "or", "if", "you", "prefer", "to", "keep", "pre", "ES", "NUMBER", "list", "NUMBER", "If", "this", "be", "intentional", "and", "that", "we", "re", "also", "intentionally", "disallowing", "property", "names", "as", "reserved", "keywords", "for", "IE", "NUMBER", "support", "in", "case", "the", "template", "goes", "to", "the", "browser", "maybe", "we", "should", "have", "an", "option", "to", "disable", "such", "behavior", "NUMBER", "For", "custom", "dynamic", "tags", "I", "have", "a", "function", "use", "the", "try", "require", "module", "that", "works", "as", "follows", "function", "loadRenderer", "path", "var", "renderer", "rendererCache", "path", "if", "renderer", "renderer", "rendererCache", "path", "tryRequire", "path", "not", "find", "return", "renderer", "I", "then", "use", "this", "to", "determine", "whether", "to", "require", "a", "renderer", "or", "a", "template", "if", "isWidget", "widgetId", "module", "NUMBER", "type", "renderer", "module", "NUMBER", "renderer", "loadRenderer", "path", "NUMBER", "join", "modulePath", "renderer", "NUMBER", "js", "if", "module", "NUMBER", "renderer", "not", "find", "module", "NUMBER", "template", "loadRenderer", "path", "NUMBER", "join", "modulePath", "template", "NUMBER", "marko", "module", "NUMBER", "type", "template", "This", "works", "fine", "normally", "but", "in", "functional", "test", "through", "karma", "it", "looks", "like", "the", "runtime", "be", "attempting", "to", "resolve", "not", "find", "to", "a", "module", "NUMBER", "This", "results", "in", "the", "following", "error", "Cannot", "find", "module", "not", "find", "from", "marko", "runtime", "require", "NUMBER", "NUMBER", "test", "static", "node_modules", "lasso", "node_modules", "raptor", "modules", "client", "lib", "raptor", "modules", "client", "NUMBER", "js", "NUMBER", "NUMBER", "instanceRequire", "NUMBER", "NUMBER", "test", "static", "node_modules", "lasso", "node_modules", "raptor", "modules", "client", "lib", "raptor", "modules", "client", "NUMBER", "js", "NUMBER", "NUMBER", "load", "NUMBER", "NUMBER", "test", "static", "node_modules", "marko", "runtime", "loader_browser", "NUMBER", "js", "NUMBER", "NUMBER", "load", "NUMBER", "NUMBER", "test", "static", "node_modules", "marko", "runtime", "marko", "runtime", "NUMBER", "js", "NUMBER", "NUMBER", "l", "NUMBER", "NUMBER", "test", "static", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "I", "tried", "setting", "renderer", "to", "a", "handful", "of", "other", "types", "based", "on", "the", "relevant", "marko", "code", "but", "run", "into", "different", "issue", "each", "time", "NUMBER", "Do", "you", "know", "how", "I", "could", "effectively", "make", "this", "a", "no", "op", "Or", "if", "there", "be", "a", "better", "way", "to", "achieve", "the", "same", "thing", "I", "think", "you", "re", "right", "and", "I", "think", "it", "s", "because", "of", "LINK", "js", "marko", "widgets", "issue", "NUMBER", "Looks", "like", "I", "might", "need", "to", "artificially", "require", "everything", "that", "goes", "through", "dynamic", "tag", "If", "you", "don", "t", "have", "an", "index", "NUMBER", "js", "file", "it", "defaults", "to", "the", "template", "NUMBER", "But", "it", "should", "search", "for", "other", "possible", "renderers", "such", "as", "a", "index", "NUMBER", "coffee", "NUMBER", "js", "file", "before", "defaulting", "to", "the", "template", "NUMBER", "Cool", "concept", "patrick", "steele", "idem", "I", "think", "it", "greatly", "improves", "the", "expressiveness", "of", "Marko", "template", "NUMBER", "Love", "the", "idea", "that", "you", "can", "make", "a", "very", "generic", "template", "more", "specific", "by", "importing", "it", "into", "another", "template", "and", "giving", "it", "an", "alias", "So", "yeah", "I", "would", "love", "to", "have", "them", "NUMBER", "Just", "some", "thoughts", "NUMBER", "Function", "wise", "nothing", "be", "add", "basically", "one", "could", "do", "the", "same", "by", "simply", "use", "the", "name", "of", "the", "custom", "tag", "as", "it", "has", "be", "do", "until", "know", "probably", "surrounded", "by", "a", "TAG", "clause", "the", "dependencies", "would", "be", "resolve", "by", "lasso", "and", "the", "compiled", "code", "for", "both", "template", "would", "be", "available", "in", "the", "client", "package", "NUMBER", "The", "difference", "here", "be", "compile", "time", "right", "anything", "else", "to", "differentiate", "probably", "from", "a", "user", "perspective", "NUMBER", "Is", "there", "a", "specific", "reason", "not", "to", "use", "a", "syntax", "like", "TAG", "Great", "concept", "In", "my", "case", "I", "have", "NUMBER", "components", "which", "I", "want", "to", "call", "dynamically", "NUMBER", "When", "there", "were", "only", "a", "few", "components", "just", "use", "TAG", "works", "fine", "NUMBER", "But", "with", "a", "large", "list", "it", "becomes", "pretty", "tedious", "NUMBER", "I", "don", "t", "think", "this", "be", "too", "far", "out", "of", "an", "edge", "case", "since", "we", "be", "encouraging", "the", "use", "of", "lots", "of", "small", "components", "NUMBER", "So", "I", "ended", "up", "invoking", "renderers", "directly", "and", "then", "passing", "them", "through", "a", "TAG", "component", "which", "cleans", "up", "the", "marko", "file", "quite", "a", "bit", "but", "also", "leaves", "implementation", "to", "the", "user", "handle", "template", "renderers", "widgets", "without", "ids", "widgets", "with", "ids", "etc", "NUMBER", "all", "of", "which", "marko", "should", "already", "know", "how", "to", "do", "NUMBER", "But", "applying", "that", "case", "here", "I", "m", "not", "sure", "this", "new", "feature", "helps", "too", "much", "NUMBER", "It", "would", "mean", "NUMBER", "lines", "of", "importing", "components", "directly", "by", "name", "NUMBER", "Can", "we", "ever", "resolve", "the", "tags", "later", "to", "be", "fully", "dynamic", "TAG", "TAG", "TAG", "TAG", "I", "think", "we", "could", "implement", "this", "and", "NUMBER", "with", "a", "similar", "syntax", "xml", "TAG", "from", "NUMBER", "component", "Then", "just", "use", "it", "xml", "TAG", "And", "for", "es", "NUMBER", "style", "inputs", "NUMBER", "xml", "TAG", "And", "they", "d", "look", "slightly", "nicer", "without", "the", "argument", "parentheses", "xml", "TAG", "from", "NUMBER", "component", "TAG", "philidem", "I", "ve", "be", "playing", "with", "the", "parsing", "from", "here", "it", "should", "be", "pretty", "trival", "to", "generate", "the", "necessary", "AST", "nodes", "LINK", "As", "Yoni", "mention", "the", "real", "value", "in", "this", "be", "to", "have", "something", "like", "html", "TAG", "TAG", "TAG", "I", "would", "think", "the", "name", "could", "be", "resolve", "and", "the", "component", "find", "from", "the", "marko", "NUMBER", "json", "file", "NUMBER", "Are", "there", "any", "major", "issue", "with", "that", "I", "m", "miss", "Awesome", "tada", "Hi", "all", "It", "seems", "that", "after", "a", "few", "different", "implementations", "of", "basic", "w", "onClick", "it", "do", "not", "work", "on", "mobile", "or", "tablet", "devices", "at", "all", "the", "event", "function", "attached", "to", "it", "simply", "do", "not", "fire", "at", "all", "NUMBER", "I", "m", "not", "really", "sure", "what", "else", "to", "put", "here", "other", "than", "to", "try", "it", "yourself", "and", "see", "the", "issue", "firsthand", "NUMBER", "This", "probably", "relate", "to", "how", "mobile", "browsers", "detect", "clickable", "elements", "NUMBER", "For", "example", "iOS", "Safari", "has", "some", "quirks", "LINK", "LINK", "_event_bub", "NUMBER", "html", "I", "wonder", "if", "marko", "widgets", "should", "try", "to", "handle", "this", "at", "all", "NUMBER", "Related", "LINK", "It", "be", "my", "understanding", "that", "should", "be", "able", "to", "change", "the", "tagName", "of", "an", "element", "at", "the", "transform", "stage", "and", "have", "it", "trigger", "a", "code", "generator", "renderer", "at", "the", "generate", "stage", "but", "this", "do", "not", "appear", "to", "be", "the", "case", "NUMBER", "Am", "I", "doing", "something", "wrong", "Is", "this", "expected", "behavior", "A", "bug", "NOTE", "This", "be", "on", "the", "lastest", "version", "of", "the", "htmljs", "parser", "branch", "NUMBER", "Setup", "_index", "NUMBER", "js_", "javascript", "require", "marko", "node", "require", "NUMBER", "install", "require", "NUMBER", "test", "NUMBER", "marko", "NUMBER", "ream", "NUMBER", "pipe", "process", "NUMBER", "dout", "_marko", "tabglib", "NUMBER", "json_", "json", "TAG", "code", "generator", "NUMBER", "test", "generator", "TAG", "transformer", "NUMBER", "test", "transformer", "_test", "transformer", "NUMBER", "js_", "javascript", "module", "NUMBER", "export", "function", "transform", "el", "context", "console", "NUMBER", "log", "CALLED", "TRANSFORM", "if", "el", "NUMBER", "tagName", "new", "if", "el", "NUMBER", "getAttributeValue", "transform", "el", "NUMBER", "setTagName", "new", "_test", "generator", "NUMBER", "js_", "javascript", "module", "NUMBER", "export", "function", "codeGenerator", "el", "codegen", "console", "NUMBER", "log", "CALLED", "GENERATOR", "el", "NUMBER", "removeAttribute", "new", "return", "el", "Test", "NUMBER", "unexpect", "Rendering", "the", "following", "template", "_test", "NUMBER", "marko_", "html", "TAG", "I", "get", "the", "output", "CALLED", "TRANSFORM", "TAG", "TAG", "But", "I", "m", "expecting", "CALLED", "TRANSFORM", "CALLED", "GENERATOR", "TAG", "TAG", "Test", "NUMBER", "work", "as", "expected", "If", "I", "change", "the", "template", "to", "use", "the", "TAG", "tag", "initally", "I", "do", "get", "the", "expected", "output", "_test", "NUMBER", "marko_", "html", "TAG", "output", "CALLED", "TRANSFORM", "CALLED", "GENERATOR", "TAG", "TAG", "The", "node", "still", "goes", "through", "the", "transform", "function", "but", "it", "be", "not", "touched", "NUMBER", "I", "m", "guessing", "this", "be", "the", "difference", "NUMBER", "Makes", "sense", "NUMBER", "Thanks", "for", "clarifying", "and", "the", "replaceWith", "method", "be", "much", "appreciated", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "NUMBER", "taglibs", "core", "marko", "taglib", "NUMBER", "j", "TypeError", "undefined", "be", "not", "a", "function", "Code", "snippet", "from", "marko", "compiler", "marko", "compiler", "export", "NUMBER", "TemplateCompiler", "require", "NUMBER", "TemplateCompiler", "export", "NUMBER", "taglibs", "require", "NUMBER", "taglibs", "export", "NUMBER", "taglibs", "NUMBER", "excludeDir", "nodePath", "NUMBER", "join", "__dirname", "NUMBER", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "NUMBER", "taglibs", "core", "marko", "taglib", "NUMBER", "json", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "NUMBER", "taglibs", "html", "marko", "taglib", "NUMBER", "json", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "NUMBER", "taglibs", "caching", "marko", "taglib", "NUMBER", "json", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "marko", "layout", "marko", "taglib", "NUMBER", "json", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "marko", "async", "marko", "taglib", "NUMBER", "json", "While", "doing", "browserify", "node", "t", "reactify", "t", "markoify", "o", "dist", "server", "NUMBER", "js", "build", "source", "server", "NUMBER", "js", "I", "don", "t", "want", "any", "external", "npm", "package", "hanging", "out", "on", "an", "application", "server", "NUMBER", "Is", "there", "a", "way", "to", "exclude", "the", "marko", "compiler", "from", "be", "bundled", "Can", "I", "only", "bundle", "the", "Marko", "runtime", "and", "precompile", "the", "Marko", "template", "in", "Gulp", "or", "something", "Here", "be", "my", "implementation", "import", "Marko", "from", "marko", "NUMBER", "NUMBER", "app", "NUMBER", "use", "req", "res", "Marko", "NUMBER", "load", "NUMBER", "views", "index", "NUMBER", "marko", "writeToDisk", "false", "NUMBER", "ream", "props", "JSON", "NUMBER", "ringify", "props", "reactOutput", "title", "Site", "Title", "Here", "NUMBER", "pipe", "res", "Error", "Cannot", "find", "module", "NUMBER", "raptor", "logging", "impl", "at", "Function", "NUMBER", "Module", "NUMBER", "_resolveFilename", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "Module", "NUMBER", "_load", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "require", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "require", "module", "NUMBER", "js", "NUMBER", "NUMBER", "Offending", "code", "snippet", "module", "NUMBER", "export", "stubs", "if", "process", "NUMBER", "browser", "var", "implPath", "NUMBER", "raptor", "logging", "impl", "require", "implPath", "NUMBER", "function", "require", "module", "export", "function", "__dirname", "Here", "be", "my", "build", "script", "browserify", "t", "markoify", "node", "t", "reactify", "o", "dist", "server", "NUMBER", "js", "build", "source", "server", "NUMBER", "js", "Dependencies", "in", "package", "NUMBER", "json", "dependencies", "browserify", "NUMBER", "browserify", "shim", "NUMBER", "bunyan", "NUMBER", "bunyan", "request", "logger", "NUMBER", "express", "NUMBER", "markoify", "NUMBER", "react", "NUMBER", "react", "dom", "NUMBER", "react", "tool", "NUMBER", "reactify", "NUMBER", "patrick", "steele", "idem", "awesome", "thanks", "NUMBER", "Browserify", "support", "build", "server", "side", "modules", "it", "just", "requires", "some", "clever", "configuration", "which", "be", "actually", "not", "fully", "adopted", "by", "browserify", "but", "seems", "to", "work", "for", "most", "applications", "NUMBER", "My", "motivation", "here", "be", "to", "bundle", "all", "of", "my", "server", "side", "code", "to", "one", "file", "to", "make", "deploys", "easier", "and", "save", "space", "on", "hosting", "instances", "NUMBER", "Fixed", "but", "spawned", "this", "issue", "LINK", "js", "marko", "issue", "NUMBER", "Is", "there", "clamoring", "for", "jade", "like", "syntax", "I", "guess", "the", "current", "HTML", "like", "syntax", "makes", "marko", "somewhat", "opinionated", "but", "I", "didn", "t", "think", "that", "was", "problematic", "NUMBER", "I", "agree", "with", "your", "main", "points", "I", "think", "as", "long", "as", "the", "new", "parser", "be", "generic", "enough", "to", "easily", "support", "multiple", "syntaxes", "neither", "fragmentation", "nor", "maintenance", "costs", "should", "really", "be", "an", "issue", "NUMBER", "jarko", "sounds", "funny", "too", "so", "that", "s", "a", "plus", "NUMBER", "I", "dunno", "NUMBER", "Back", "in", "my", "day", "we", "didn", "t", "need", "these", "newfangled", "languages", "to", "write", "HTML", "NUMBER", "We", "write", "our", "TAG", "tags", "uphill", "both", "ways", "and", "we", "never", "complained", "about", "it", "NUMBER", "stuck_out_tongue", "In", "all", "seriousness", "though", "the", "development", "cost", "of", "support", "another", "dialect", "be", "something", "that", "should", "be", "well", "considered", "NUMBER", "I", "d", "really", "hate", "to", "see", "Marko", "development", "slowed", "or", "delayed", "due", "to", "the", "support", "of", "a", "fringe", "dialect", "NUMBER", "Yeah", "I", "said", "it", "NUMBER", "Also", "consider", "that", "Marko", "be", "already", "an", "HTML", "_like_", "syntax", "and", "it", "sounds", "like", "you", "d", "be", "creating", "a", "jade", "_like_", "syntax", "NUMBER", "Since", "Marko", "be", "an", "abstraction", "of", "HTML", "and", "Jade", "be", "_already_", "an", "abstraction", "of", "HTML", "Jarko", "would", "therefore", "be", "an", "abstraction", "of", "an", "abstraction", "NUMBER", "Talk", "about", "fringe", "NUMBER", "Sass", "or", "Less", "be", "a", "good", "example", "of", "a", "useful", "abstraction", "the", "benefits", "of", "use", "Less", "or", "Sass", "to", "write", "CSS", "be", "huge", "variables", "nesting", "extensions", "modularization", "and", "they", "be", "still", "mainly", "pure", "CSS", "at", "their", "core", "NUMBER", "But", "with", "Jade", "you", "re", "basically", "just", "talking", "about", "laziness", "and", "simple", "dialect", "NUMBER", "I", "don", "t", "see", "the", "benefit", "beyond", "the", "popularity", "adoption", "points", "NUMBER", "Just", "my", "NUMBER", "NUMBER", "NUMBER", "Btw", "the", "name", "Jade", "be", "change", "to", "Pug", "with", "v", "NUMBER", "LINK", "so", "jarko", "might", "not", "be", "a", "good", "idea", "NUMBER", "Also", "I", "think", "this", "concise", "syntax", "be", "a", "lot", "different", "from", "Jade", "better", "in", "that", "sense", "so", "it", "shouldn", "t", "be", "named", "after", "it", "it", "should", "have", "its", "own", "identity", "NUMBER", "concise", "marko", "sounds", "perfect", "NUMBER", "or", "if", "it", "s", "too", "long", "maybe", "cmarko", "NUMBER", "pugo", "Just", "kidding", "NUMBER", "Mug", "be", "better", "NUMBER", "Following", "the", "discussion", "I", "want", "to", "add", "a", "few", "pros", "cons", "I", "have", "find", "NUMBER", "some", "be", "already", "mention", "Pros", "NUMBER", "Gain", "additional", "attraction", "from", "the", "dev", "community", "Everything", "that", "looks", "familiar", "will", "improve", "the", "adoption", "rate", "of", "Marko", "as", "Marko", "be", "still", "growing", "this", "be", "important", "NUMBER", "Makes", "life", "easier", "by", "putting", "over", "legacy", "code", "write", "in", "Jade", "we", "all", "know", "that", "putting", "something", "over", "without", "change", "seldom", "works", "flawlessly", "NUMBER", "but", "it", "should", "be", "less", "work", "than", "porting", "over", "exist", "markup", "into", "Marko", "v", "NUMBER", "NUMBER", "Easy", "to", "get", "start", "for", "people", "who", "worked", "already", "with", "Jade", "NUMBER", "similar", "to", "point", "NUMBER", "Cons", "NUMBER", "Readability", "While", "Jade", "offers", "a", "sparse", "syntax", "I", "do", "not", "really", "think", "it", "offers", "much", "more", "readability", "than", "Marko", "v", "NUMBER", "I", "think", "template", "statements", "do", "not", "really", "raise", "from", "the", "environment", "it", "makes", "it", "really", "hard", "to", "see", "what", "be", "really", "going", "on", "without", "looking", "at", "it", "in", "detail", "NUMBER", "on", "the", "other", "hand", "Jade", "might", "reduce", "noise", "by", "having", "less", "stuff", "that", "has", "to", "be", "write", "TAG", "NUMBER", "it", "both", "has", "its", "advantages", "NUMBER", "NUMBER", "Fragmentation", "what", "be", "the", "examples", "write", "in", "with", "JavaScript", "server", "and", "client", "side", "we", "left", "the", "times", "when", "there", "were", "different", "languages", "and", "the", "mental", "overhead", "between", "switching", "between", "them", "NUMBER", "Now", "with", "different", "template", "languages", "we", "kinda", "sacrifice", "that", "NUMBER", "NUMBER", "Implementation", "test", "overhead", "maintenance", "NUMBER", "strongly", "depends", "how", "it", "be", "implement", "NUMBER", "I", "be", "confident", "that", "the", "Marko", "devs", "can", "do", "a", "great", "job", "here", "NUMBER", "but", "it", "should", "be", "considered", "nevertheless", "NUMBER", "Marko", "v", "NUMBER", "s", "main", "selling", "point", "be", "as", "close", "to", "HTML", "as", "possible", "NUMBER", "one", "could", "ask", "if", "this", "be", "really", "enough", "to", "have", "it", "NUMBER", "why", "not", "consider", "Jade", "like", "as", "the", "only", "template", "syntax", "If", "there", "will", "be", "a", "way", "to", "easy", "auto", "convert", "Marko", "v", "NUMBER", "into", "Jade", "and", "back", "why", "not", "have", "jarko", "the", "only", "syntax", "and", "allow", "people", "to", "auto", "convert", "over", "Marko", "v", "NUMBER", "into", "Jarko", "if", "compatibility", "be", "an", "issue", "why", "not", "consider", "Jade", "like", "as", "the", "only", "template", "syntax", "Please", "no", "NUMBER", "Abstraction", "languages", "come", "and", "go", "they", "be", "in", "a", "sense", "fads", "NUMBER", "HTML", "be", "universally", "know", "and", "familiar", "to", "most", "developers", "NUMBER", "I", "m", "with", "danrichman", "NUMBER", "I", "think", "ditching", "the", "proper", "HTML", "like", "syntax", "all", "together", "would", "be", "a", "mistake", "at", "least", "at", "this", "stage", "NUMBER", "That", "said", "I", "m", "all", "for", "giving", "the", "jade", "like", "syntax", "a", "go", "NUMBER", "If", "you", "can", "bake", "both", "of", "them", "into", "a", "universal", "Marko", "compiler", "I", "think", "it", "s", "going", "to", "be", "a", "really", "great", "move", "patrick", "steele", "idem", "NUMBER", "Let", "people", "decide", "how", "they", "want", "to", "use", "Marko", "NUMBER", "There", "be", "some", "drawback", "s", "you", "guys", "might", "want", "to", "consider", "though", "NUMBER", "As", "Marko", "matures", "and", "the", "user", "base", "grows", "the", "ambiguity", "of", "question", "online", "could", "get", "quite", "confusing", "for", "developers", "NUMBER", "Consider", "someone", "researching", "how", "to", "do", "something", "in", "Marko", "and", "they", "scour", "through", "StackOverflow", "videos", "blog", "posts", "etc", "NUMBER", "NUMBER", "of", "answers", "with", "one", "syntax", "NUMBER", "with", "the", "other", "syntax", "NUMBER", "People", "be", "going", "to", "end", "up", "with", "some", "kind", "of", "psuedo", "marko", "language", "in", "their", "app", "where", "they", "have", "a", "mixture", "of", "the", "compact", "syntax", "and", "traditional", "syntax", "NUMBER", "That", "s", "a", "bad", "experience", "for", "everyone", "NUMBER", "NUMBER", "More", "documentation", "and", "it", "s", "going", "to", "have", "to", "be", "really", "well", "write", "to", "avoid", "confusion", "NUMBER", "NUMBER", "Ultimately", "there", "s", "probably", "going", "to", "have", "to", "be", "two", "seperate", "docs", "one", "for", "traditional", "Marko", "the", "other", "for", "compact", "NUMBER", "I", "think", "you", "can", "get", "around", "both", "of", "those", "issue", "with", "really", "well", "defined", "documentation", "and", "push", "out", "the", "message", "early", "on", "that", "there", "s", "two", "syntax", "options", "with", "Marko", "NUMBER", "But", "for", "that", "to", "happen", "we", "all", "need", "to", "be", "up", "for", "that", "challenge", "NUMBER", "Personally", "I", "hate", "Jade", "syntax", "with", "a", "passion", "but", "damn", "it", "s", "NUMBER", "I", "ll", "willing", "to", "give", "new", "things", "a", "try", "NUMBER", "Just", "to", "be", "clear", "Having", "Jade", "like", "jarko", "mug", "as", "the", "default", "would", "mean", "to", "prepend", "every", "plain", "text", "with", "a", "specific", "well", "defined", "symbol", "e", "NUMBER", "g", "NUMBER", "a", "dot", "NUMBER", "otherwise", "plain", "text", "would", "be", "mis", "interpreted", "as", "a", "tag", "original", "Jade", "uses", "pipes", "for", "plain", "text", "Regular", "HTML", "like", "syntax", "would", "of", "course", "be", "allow", "as", "well", "and", "mix", "in", "within", "jarko", "NUMBER", "This", "has", "to", "be", "prefixed", "TAG", "No", "worries", "here", "TAG", "Jade", "be", "a", "rabbit", "hole", "NUMBER", "Could", "be", "a", "third", "party", "option", "but", "as", "a", "core", "feature", "I", "dunno", "NUMBER", "One", "of", "the", "selling", "points", "of", "Jade", "according", "to", "its", "own", "website", "LINK", "lang", "NUMBER", "com", "be", "NUMBER", "Jade", "be", "a", "terse", "and", "simple", "templating", "language", "with", "a", "strong", "focus", "on", "performance", "and", "powerful", "features", "NUMBER", "This", "be", "a", "good", "reason", "to", "_avoid_", "Jade", "actually", "NUMBER", "Something", "more", "powerful", "be", "always", "come", "along", "NUMBER", "Why", "would", "we", "want", "more", "powerful", "features", "if", "Marko", "be", "intentionally", "trying", "to", "adhere", "to", "the", "_Rule", "of", "Least", "Power_", "The", "Rule", "of", "Least", "Power", "LINK", "When", "designing", "computer", "systems", "one", "be", "often", "faced", "with", "a", "choice", "between", "use", "a", "more", "or", "less", "powerful", "language", "for", "publishing", "information", "for", "expressing", "constraints", "or", "for", "solving", "some", "problem", "NUMBER", "This", "finding", "explores", "tradeoffs", "relating", "the", "choice", "of", "language", "to", "reusability", "of", "information", "NUMBER", "The", "Rule", "of", "Least", "Power", "suggests", "choosing", "the", "least", "powerful", "language", "suitable", "for", "a", "given", "purpose", "NUMBER", "NUMBER", "Good", "Practice", "Use", "the", "least", "powerful", "language", "suitable", "for", "expressing", "information", "constraints", "or", "program", "on", "the", "World", "Wide", "Web", "NUMBER", "I", "was", "under", "the", "impression", "that", "Marko", "was", "designed", "to", "adhere", "to", "the", "_Rule", "of", "Least", "Power_", "NUMBER", "By", "promoting", "Jade", "it", "s", "no", "longer", "adhering", "to", "that", "rule", "NUMBER", "See", "also", "We", "need", "less", "powerful", "languages", "LINK", "powerful", "languages", "by", "Luke", "Plant", "LINK", "In", "Defense", "of", "Templates", "LINK", "VY", "r", "NUMBER", "Ac", "NUMBER", "ho", "feature", "youtu", "NUMBER", "be", "t", "NUMBER", "YouTube", "clip", "by", "Tom", "Dale", "LINK", "patrick", "steele", "idem", "Isn", "t", "there", "more", "to", "Jade", "than", "that", "Conditionals", "extend", "etc", "NUMBER", "Wouldn", "t", "Jade", "developers", "just", "end", "up", "demanding", "those", "more", "powerful", "features", "I", "meant", "that", "by", "support", "the", "Jade", "syntax", "you", "re", "going", "to", "open", "yourself", "up", "to", "demands", "for", "support", "the", "specific", "less", "clean", "Jade", "form", "of", "those", "and", "other", "features", "particularly", "as", "Jade", "becomes", "more", "complex", "over", "time", "NUMBER", "I", "don", "t", "know", "how", "this", "would", "be", "avoided", "NUMBER", "At", "some", "point", "you", "know", "someone", "be", "going", "come", "along", "and", "demand", "more", "support", "for", "the", "Jade", "syntax", "to", "trigger", "those", "various", "features", "NUMBER", "As", "in", "NUMBER", "Hey", "Patrick", "if", "would", "be", "great", "if", "the", "Jarko", "syntax", "could", "do", "XYZ", "just", "like", "in", "Jade", "NUMBER", "It", "s", "a", "slippery", "slope", "NUMBER", "Where", "do", "Marko", "devs", "draw", "the", "line", "Can", "I", "get", "a", "nickel", "for", "each", "such", "request", "Just", "chiming", "in", "NUMBER", "Please", "avoid", "overcomplicating", "marko", "at", "all", "costs", "keep", "the", "core", "simple", "then", "allow", "extension", "if", "desired", "NUMBER", "I", "won", "t", "be", "use", "any", "of", "the", "html", "like", "syntax", "anyway", "in", "our", "environment", "the", "users", "specify", "mark", "up", "over", "which", "we", "have", "no", "control", "we", "will", "just", "be", "exposing", "widgets", "for", "them", "to", "hook", "into", "use", "attributes", "NUMBER", "For", "what", "it", "s", "worth", "some", "opinionated", "Angular", "devs", "seem", "to", "be", "largely", "against", "the", "idea", "of", "use", "Jade", "in", "Angular", "NUMBER", "For", "starters", "they", "say", "mixing", "the", "two", "syntaxes", "in", "Angular", "documentation", "examples", "and", "in", "template", "be", "_way_", "more", "confusing", "than", "the", "simplicity", "that", "the", "syntax", "be", "supposed", "to", "provide", "in", "the", "first", "place", "NUMBER", "See", "What", "s", "the", "use", "of", "Jade", "or", "Handlebars", "when", "write", "AngularJs", "apps", "LINK", "the", "use", "of", "jade", "or", "handlebars", "when", "write", "angularjs", "apps", "Q", "NUMBER", "As", "far", "as", "I", "can", "tell", "it", "would", "make", "most", "sense", "to", "create", "the", "template", "in", "Angular", "use", "proper", "HTML", "NUMBER", "The", "reason", "for", "this", "confusion", "be", "that", "a", "lot", "of", "the", "examples", "I", "find", "on", "GitHub", "make", "use", "of", "Jade", "and", "it", "seems", "counter", "intuitive", "for", "me", "NUMBER", "A", "Those", "who", "_unquestioningly_", "favour", "Jade", "in", "an", "Angular", "environment", "fail", "to", "understand", "that", "view", "logic", "belongs", "on", "the", "client", "and", "business", "logic", "on", "the", "server", "just", "as", "the", "OP", "commented", "NUMBER", "_Don", "t", "do", "it", "unless", "you", "have", "a", "very", "good", "reason", "to", "do", "it_", "NUMBER", "In", "engineering", "a", "system", "with", "fewer", "moving", "parts", "be", "a", "more", "reliable", "system", "and", "a", "system", "where", "interface", "boundaries", "client", "server", "be", "respected", "be", "more", "maintainable", "over", "the", "long", "term", "so", "default", "to", "the", "simplest", "architecture", "and", "clean", "division", "of", "labour", "if", "possible", "NUMBER", "If", "you", "have", "overriding", "reasons", "do", "what", "you", "must", "but", "_caveat", "emptor_", "NUMBER", "Recently", "I", "review", "some", "code", "where", "straight", "Angular", "templating", "would", "have", "do", "a", "far", "better", "job", "than", "mixing", "in", "Jade", "just", "through", "maintaining", "simplicity", "NUMBER", "Aside", "from", "template", "extension", "Jade", "brings", "nothing", "worthwhile", "to", "the", "table", "that", "Angular", "doesn", "t", "already", "supply", "NUMBER", "Let", "s", "be", "honest", "Using", "the", "sound", "principle", "of", "favour", "composition", "over", "inheritance", "i", "NUMBER", "e", "NUMBER", "partials", "you", "shouldn", "t", "ever", "need", "template", "extensibility", "NUMBER", "Jade", "be", "hardly", "easier", "to", "parse", "than", "HTML", "NUMBER", "They", "be", "but", "_trivially_", "different", "while", "Jade", "add", "another", "level", "of", "indirection", "best", "avoided", "NUMBER", "There", "be", "one", "valid", "specialised", "case", "for", "server", "side", "templating", "Optimisation", "remembering", "that", "premature", "optimisation", "be", "generally", "a", "Bad", "Thing", "NUMBER", "Where", "performance", "be", "truly", "at", "issue", "and", "you", "have", "the", "server", "capacity", "to", "spare", "to", "handle", "this", "server", "side", "templating", "can", "assist", "NUMBER", "This", "applies", "to", "products", "like", "Twitter", "and", "Basecamp", "where", "the", "cost", "of", "doing", "a", "lot", "of", "server", "side", "work", "be", "offset", "by", "the", "gains", "of", "reduced", "request", "to", "the", "server", "NUMBER", "I", "just", "wanted", "to", "chime", "in", "on", "our", "team", "and", "experience", "with", "marko", "NUMBER", "We", "like", "marko", "and", "what", "it", "offers", "but", "we", "were", "definitely", "_not_", "a", "fan", "of", "the", "syntax", "when", "we", "start", "use", "it", "NUMBER", "I", "think", "it", "would", "be", "a", "much", "more", "enjoyable", "experience", "to", "have", "the", "concise", "syntax", "as", "you", "be", "putting", "it", "NUMBER", "I", "also", "don", "t", "think", "it", "would", "be", "a", "slippery", "slope", "to", "support", "all", "jade", "features", "NUMBER", "The", "biggest", "gripe", "be", "that", "it", "be", "a", "pain", "to", "write", "in", "and", "look", "at", "especially", "as", "file", "grow", "in", "size", "and", "complexity", "NUMBER", "That", "be", "why", "languages", "like", "jade", "and", "haml", "be", "so", "popular", "NUMBER", "I", "don", "t", "think", "I", "ve", "use", "marko", "and", "ever", "thought", "this", "could", "use", "some", "more", "features", "from", "_x_", "language", "NUMBER", "I", "have", "thought", "however", "that", "the", "template", "looked", "cluttered", "and", "hard", "to", "read", "scan", "NUMBER", "But", "then", "again", "I", "ve", "use", "haml", "and", "jade", "for", "years", "so", "the", "HTML", "like", "syntax", "seems", "like", "a", "step", "backward", "to", "me", "NUMBER", "patrick", "steele", "idem", "NUMBER", "thanks", "for", "experimenting", "with", "real", "world", "examples", "Curious", "about", "the", "outcome", "NUMBER", "Here", "s", "the", "rub", "NUMBER", "Less", "and", "Sass", "be", "similar", "abstractions", "of", "CSS", "NUMBER", "Yet", "neither", "abstraction", "be", "a", "core", "plugin", "of", "Lasso", "LINK", "js", "lasso", "available", "plugins", "despite", "the", "fact", "that", "every", "front", "end", "developer", "will", "tell", "you", "that", "Less", "and", "Sass", "make", "CSS", "so", "much", "easier", "to", "manage", "NUMBER", "And", "it", "s", "not", "a", "problem", "since", "any", "developer", "can", "just", "install", "lasso", "sass", "LINK", "js", "lasso", "sass", "or", "lasso", "less", "LINK", "js", "lasso", "less", "NUMBER", "or", "lasso", "jade", "LINK", "js", "lasso", "jade", "for", "JS", "if", "they", "prefer", "NUMBER", "So", "why", "would", "Jade", "for", "Marko", "be", "any", "different", "Why", "not", "just", "make", "it", "a", "third", "party", "plugin", "If", "it", "becomes", "crazy", "popular", "then", "maybe", "one", "day", "it", "becomes", "a", "core", "plugin", "NUMBER", "If", "Jade", "were", "a", "core", "feature", "never", "mind", "it", "s", "an", "add", "layer", "of", "architecture", "to", "maintain", "then", "the", "question", "be", "where", "do", "that", "leave", "all", "the", "documentation", "tutorials", "and", "shared", "examples", "Do", "you", "have", "a", "competing", "ecosystem", "of", "documentation", "I", "m", "starting", "to", "feel", "that", "the", "concise", "syntax", "be", "something", "that", "can", "grow", "on", "you", "but", "that", "most", "people", "me", "include", "initially", "dislike", "it", "I", "think", "this", "be", "probably", "the", "key", "point", "here", "if", "anything", "NUMBER", "Anything", "distasteful", "will", "grow", "on", "you", "eventually", "NUMBER", "Jade", "be", "be", "add", "to", "make", "Marko", "more", "accessible", "_to", "the", "Jade", "crowd_", "NUMBER", "But", "by", "make", "it", "a", "core", "feature", "the", "risk", "be", "perhaps", "make", "Marko", "initially", "disliked", "by", "the", "majority", "of", "non", "Jade", "users", "which", "would", "be", "counterproductive", "NUMBER", "I", "suppose", "Jade", "could", "be", "generally", "avoided", "in", "the", "documentation", "but", "then", "what", "s", "the", "point", "of", "having", "it", "be", "a", "core", "feature", "in", "the", "first", "place", "If", "the", "only", "reason", "for", "add", "Jade", "like", "syntax", "be", "to", "appease", "the", "population", "of", "Jade", "developers", "then", "that", "implies", "that", "Jade", "would", "make", "a", "very", "good", "non", "core", "plugin", "NUMBER", "Wouldn", "t", "that", "make", "everyone", "happy", "People", "who", "want", "Jade", "can", "easily", "install", "the", "plugin", "and", "people", "who", "don", "t", "just", "follow", "the", "documentation", "and", "the", "HTML", "they", "be", "familiar", "with", "without", "the", "mysterious", "NUMBER", "before", "lines", "of", "text", "to", "turn", "off", "the", "seemingly", "non", "essential", "Jade", "syntax", "NUMBER", "If", "the", "Jade", "like", "syntax", "were", "the", "_de", "facto_", "syntax", "then", "that", "would", "imply", "that", "the", "documentation", "tutorials", "and", "shared", "examples", "would", "all", "be", "in", "the", "Jade", "like", "syntax", "or", "some", "confusing", "mixture", "of", "the", "two", "NUMBER", "But", "of", "course", "doing", "so", "would", "turn", "off", "all", "the", "people", "who", "dislike", "Jade", "at", "first", "glance", "yourself", "include", "NUMBER", "Is", "it", "worth", "it", "to", "make", "it", "a", "core", "feature", "then", "I", "dunno", "NUMBER", "Seems", "like", "a", "third", "party", "plugin", "to", "me", "just", "like", "Less", "or", "Sass", "be", "for", "Lasso", "LINK", "js", "lasso", "available", "plugins", "NUMBER", "danrichman", "I", "like", "that", "idea", "NUMBER", "If", "templating", "syntax", "can", "be", "abstracted", "out", "into", "a", "plugin", "then", "marko", "could", "ship", "with", "the", "html", "syntax", "plugin", "by", "default", "NUMBER", "Developers", "could", "install", "jade", "syntax", "which", "would", "be", "responsible", "for", "its", "own", "documentation", "and", "maintenance", "NUMBER", "Plus", "there", "be", "some", "room", "to", "experiment", "with", "new", "syntaxes", "in", "the", "future", "NUMBER", "Eventually", "you", "need", "to", "consider", "what", "plugins", "should", "be", "moved", "to", "core", "but", "it", "seems", "like", "we", "re", "pretty", "far", "from", "that", "point", "right", "now", "NUMBER", "Seems", "like", "it", "could", "be", "risky", "to", "get", "married", "to", "a", "particular", "syntax", "in", "the", "core", "when", "for", "all", "we", "know", "a", "more", "popular", "or", "easier", "abbreviated", "HTML", "syntax", "might", "come", "along", "NUMBER", "or", "NUMBER", "years", "from", "now", "and", "make", "Jade", "obsolete", "NUMBER", "For", "instance", "some", "people", "prefer", "Slim", "syntax", "over", "Jade", "LINK", "lang", "vs", "jade", "template", "engin", "because", "Slim", "be", "less", "cryptic", "LINK", "lang", "NUMBER", "com", "NUMBER", "By", "make", "Jade", "core", "nobody", "gets", "to", "use", "Slim", "NUMBER", "In", "NUMBER", "Sass", "was", "the", "ultimate", "CSS", "abstraction", "NUMBER", "But", "then", "Less", "was", "release", "in", "NUMBER", "and", "of", "course", "now", "there", "be", "a", "choice", "between", "the", "two", "and", "people", "have", "their", "opinions", "about", "each", "language", "LINK", "tricks", "NUMBER", "com", "sass", "vs", "less", "even", "though", "they", "be", "nearly", "identical", "in", "almost", "every", "way", "and", "their", "syntaxes", "be", "only", "trivially", "different", "from", "CSS", "NUMBER", "patrick", "steele", "idem", "maybe", "there", "s", "a", "way", "to", "keep", "it", "more", "separated", "within", "projects", "NUMBER", "Could", "there", "be", "a", "flag", "at", "the", "top", "of", "individual", "template", "to", "enable", "such", "an", "optional", "Jade", "like", "syntax", "for", "those", "who", "want", "it", "Or", "be", "it", "just", "all", "or", "none", "Very", "sorry", "to", "be", "such", "a", "downer", "here", "smile", "but", "thought", "of", "another", "issue", "NUMBER", "The", "tendency", "to", "mix", "Marko", "syntax", "within", "a", "large", "company", "like", "eBay", "could", "add", "significant", "risk", "NUMBER", "Since", "Jade", "be", "an", "_individual_", "preference", "this", "can", "cause", "issue", "to", "develop", "over", "time", "within", "a", "large", "team", "or", "organization", "use", "Marko", "NUMBER", "For", "instance", "someone", "in", "one", "area", "of", "a", "large", "team", "or", "company", "say", "eBay", "prefers", "Jade", "and", "then", "they", "leave", "the", "company", "or", "go", "on", "vacation", "NUMBER", "A", "non", "Jade", "employee", "perhaps", "even", "days", "months", "or", "even", "years", "later", "might", "have", "to", "jump", "into", "those", "Jade", "file", "at", "any", "given", "time", "and", "be", "able", "to", "quickly", "troubleshoot", "them", "NUMBER", "A", "critical", "fix", "that", "should", "ve", "taken", "minutes", "to", "troubleshoot", "ends", "up", "dragging", "out", "into", "far", "longer", "perhaps", "hours", "because", "the", "next", "employee", "to", "open", "up", "the", "file", "isn", "t", "familiar", "with", "the", "Jade", "syntax", "and", "can", "t", "get", "the", "complex", "file", "to", "build", "properly", "NUMBER", "In", "that", "case", "the", "benefit", "of", "saving", "a", "few", "keystrokes", "became", "a", "liability", "for", "that", "company", "NUMBER", "It", "s", "a", "barrier", "to", "code", "completion", "for", "a", "templating", "language", "that", "was", "intended", "to", "tear", "down", "barriers", "NUMBER", "Actually", "the", "same", "be", "true", "even", "within", "a", "small", "team", "but", "if", "it", "s", "risky", "to", "mix", "a", "template", "syntaxes", "within", "a", "large", "company", "then", "one", "solution", "be", "to", "force", "all", "eBay", "developers", "to", "learn", "and", "use", "Jade", "in", "all", "of", "the", "codebase", "and", "documentation", "NUMBER", "But", "then", "the", "idea", "of", "it", "be", "optional", "would", "be", "an", "illusion", "NUMBER", "As", "teams", "then", "attempt", "to", "avoid", "those", "inconsistencies", "and", "inevitably", "make", "team", "wide", "standardizations", "to", "Jade", "it", "ends", "up", "be", "a", "distasteful", "barrier", "to", "entry", "newcomers", "and", "new", "hires", "get", "up", "to", "speed", "for", "instance", "as", "well", "code", "sharing", "and", "information", "sharing", "NUMBER", "It", "promotes", "a", "lack", "of", "standardization", "because", "the", "standard", "_would", "actually", "be", "Jade_", "with", "documentation", "tutorials", "and", "examples", "pretending", "it", "s", "HTML", "NUMBER", "As", "an", "aside", "I", "went", "to", "the", "Jade", "playground", "LINK", "lang", "NUMBER", "com", "and", "tried", "pasting", "in", "a", "chunk", "of", "deeply", "nested", "indented", "HTML", "code", "and", "I", "still", "can", "t", "get", "it", "to", "render", "the", "same", "HTML", "use", "their", "NUMBER", "or", "syntax", "NUMBER", "Can", "we", "see", "an", "example", "of", "a", "chunk", "of", "nested", "HTML", "preserving", "Jade", "My", "initial", "experience", "suggests", "that", "this", "move", "to", "Jade", "may", "lead", "to", "_lower_", "adoption", "rates", "once", "people", "realize", "that", "Marko", "v", "NUMBER", "be", "really", "Jade", "disguised", "as", "HTML", "NUMBER", "I", "would", "point", "out", "that", "even", "Jade", "contributors", "admit", "that", "Jade", "often", "makes", "a", "bad", "first", "impression", "LINK", "NUMBER", "The", "tendency", "to", "mix", "Marko", "syntax", "within", "a", "large", "company", "like", "eBay", "could", "add", "significant", "risk", "NUMBER", "danrichman", "Agreed", "but", "to", "use", "an", "earlier", "example", "I", "think", "no", "more", "risk", "than", "an", "online", "newspaper", "use", "Markdown", "to", "collaborate", "on", "articles", "NUMBER", "One", "tech", "savvy", "journalist", "could", "start", "off", "by", "use", "HTML", "to", "draft", "the", "document", "with", "while", "another", "journalist", "with", "no", "HTML", "experience", "could", "come", "along", "and", "feel", "inclined", "to", "either", "a", "use", "HTML", "also", "or", "b", "use", "Markdown", "and", "we", "end", "up", "with", "a", "psuedo", "document", "NUMBER", "Either", "way", "this", "I", "think", "the", "argument", "currently", "be", "presented", "be", "_internal_", "issue", "and", "beyond", "the", "scope", "of", "what", "Marko", "should", "have", "to", "consider", "NUMBER", "Jade", "be", "be", "add", "to", "make", "Marko", "more", "accessible", "to", "the", "Jade", "crowd", "NUMBER", "There", "also", "seems", "to", "be", "a", "general", "misconception", "I", "think", "that", "the", "Marko", "Concise", "option", "be", "be", "add", "purely", "for", "Jade", "user", "s", "NUMBER", "I", "think", "that", "s", "wrong", "NUMBER", "I", "hate", "Jade", "but", "I", "feel", "as", "if", "I", "would", "at", "least", "give", "the", "concise", "option", "a", "legitimate", "chance", "maybe", "even", "use", "it", "often", "in", "cases", "where", "I", "need", "to", "draft", "HTML", "quickly", "in", "front", "of", "a", "client", "or", "scaffolding", "for", "instance", "NUMBER", "If", "we", "add", "this", "_I", "think_", "it", "has", "to", "be", "shipped", "together", "under", "the", "same", "file", "name", "and", "no", "additional", "plugins", "required", "NUMBER", "adammcarth", "Well", "if", "a", "journalist", "messes", "up", "a", "Markdown", "tag", "the", "worst", "thing", "that", "happens", "be", "the", "text", "looks", "a", "little", "funny", "it", "s", "one", "of", "the", "features", "of", "Markdown", "looks", "publishable", "as", "be", "as", "plain", "text", "without", "looking", "like", "it", "s", "be", "marked", "up", "with", "tags", "or", "format", "instructions", "and", "the", "CMS", "prevents", "them", "from", "doing", "any", "real", "damage", "to", "the", "site", "NUMBER", "If", "you", "mess", "up", "the", "Jarko", "syntax", "the", "code", "fail", "NUMBER", "Markdown", "isn", "t", "cryptic", "like", "Jade", "be", "NUMBER", "Markdown", "be", "purposefully", "readable", "as", "be", "NUMBER", "Jade", "s", "cryptic", "syntax", "be", "why", "some", "people", "prefer", "Slim", "over", "Jade", "LINK", "lang", "NUMBER", "com", "about", "NUMBER", "html", "NUMBER", "Technically", "the", "Markdown", "comparison", "be", "the", "opposite", "of", "what", "s", "be", "propose", "here", "with", "Jade", "NUMBER", "When", "mixing", "Markdown", "and", "HTML", "you", "have", "to", "_opt", "in_", "to", "Markdown", "NUMBER", "You", "write", "standard", "HTML", "and", "if", "you", "want", "to", "use", "Markdown", "you", "just", "start", "use", "the", "Markdown", "tags", "and", "enable", "a", "Markdown", "attribute", "NUMBER", "Easy", "peasy", "NUMBER", "Markdown", "doesn", "t", "interfere", "with", "your", "ability", "to", "write", "HTML", "NUMBER", "That", "really", "do", "make", "everyone", "happy", "NUMBER", "For", "example", "NUMBER", "Heading", "NUMBER", "TAG", "Heading", "NUMBER", "Some", "bold", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "TAG", "This", "be", "easy", "NUMBER", "I", "don", "t", "have", "to", "change", "my", "habits", "NUMBER", "TAG", "TAG", "The", "markdown", "NUMBER", "attribute", "be", "how", "you", "_opt", "in_", "to", "Markdown", "when", "you", "want", "to", "use", "Markdown", "tags", "within", "an", "HTML", "tag", "NUMBER", "Everything", "be", "treated", "as", "plain", "text", "if", "you", "forget", "that", "attribute", "NUMBER", "HTML", "be", "a", "first", "class", "citizen", "in", "Markdown", "NUMBER", "With", "Jade", "it", "s", "the", "other", "way", "around", "NUMBER", "Should", "you", "want", "to", "indent", "your", "HTML", "or", "plain", "text", "you", "ll", "need", "to", "_opt", "out_", "of", "Jade", "NUMBER", "For", "example", "NUMBER", "NUMBER", "TAG", "NUMBER", "TAG", "Heading", "NUMBER", "TAG", "NUMBER", "Some", "TAG", "bold", "TAG", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "Why", "do", "I", "have", "to", "put", "NUMBER", "periods", "everywhere", "NUMBER", "TAG", "NUMBER", "TAG", "If", "you", "want", "to", "wrap", "that", "chunk", "of", "indented", "HTML", "with", "a", "Jade", "generate", "TAG", "TAG", "tag", "you", "have", "to", "indent", "your", "periods", "like", "this", "NUMBER", "container", "NUMBER", "col", "NUMBER", "TAG", "NUMBER", "TAG", "Heading", "NUMBER", "TAG", "NUMBER", "Some", "TAG", "bold", "TAG", "text", "NUMBER", "Some", "TAG", "emphasis", "TAG", "NUMBER", "NUMBER", "TAG", "NUMBER", "Why", "do", "I", "have", "to", "put", "NUMBER", "periods", "everywhere", "NUMBER", "TAG", "NUMBER", "TAG", "Feels", "almost", "like", "we", "re", "be", "punished", "for", "use", "HTML", "NUMBER", "patrick", "steele", "idem", "Whew", "NUMBER", "Yes", "That", "do", "look", "good", "NUMBER", "Sorry", "I", "was", "really", "get", "worried", "after", "trying", "to", "paste", "HTML", "into", "the", "Jade", "playground", "LINK", "lang", "NUMBER", "com", "and", "come", "up", "with", "nothing", "but", "error", "NUMBER", "sweat_drops", "However", "to", "allay", "further", "fears", "can", "you", "show", "us", "how", "the", "top", "pure", "HTML", "would", "look", "if", "someone", "should", "choose", "to", "wrap", "it", "in", "a", "Jade", "generate", "TAG", "tag", "like", "another", "div", "Would", "the", "periods", "be", "necessary", "then", "The", "reason", "I", "ask", "be", "because", "just", "like", "a", "mix", "HTML", "Markdown", "example", "someone", "may", "want", "to", "come", "along", "and", "insert", "HTML", "inside", "someone", "s", "another", "div", "Jade", "tag", "NUMBER", "And", "I", "don", "t", "understand", "how", "they", "could", "allow", "Jade", "to", "wrap", "their", "chunk", "of", "nested", "HTML", "without", "use", "periods", "NUMBER", "Thanks", "so", "much", "NUMBER", "patrick", "steele", "idem", "Fantastic", "NUMBER", "I", "don", "t", "know", "how", "you", "did", "it", "but", "you", "ve", "managed", "to", "create", "something", "_way", "better_", "than", "Jade", "NUMBER", "Awesome", "job", "NUMBER", "Ok", "NUMBER", "I", "m", "on", "board", "NUMBER", "NUMBER", "Sorry", "for", "all", "the", "frenetic", "comments", "above", "NUMBER", "I", "had", "mistakenly", "gotten", "the", "impression", "that", "we", "were", "bastardizing", "HTML", "NUMBER", "Clearly", "that", "s", "not", "the", "case", "NUMBER", "I", "m", "impressed", "NUMBER", "The", "real", "beauty", "of", "your", "example", "be", "that", "it", "actually", "allows", "people", "to", "slowly", "dip", "their", "toe", "into", "the", "concise", "syntax", "it", "s", "the", "best", "of", "both", "worlds", "NUMBER", "I", "can", "start", "with", "a", "single", "line", "and", "wrap", "all", "my", "HTML", "with", "it", "NUMBER", "And", "then", "I", "can", "use", "that", "single", "line", "to", "tip", "toe", "into", "another", "line", "and", "another", "if", "I", "please", "NUMBER", "and", "so", "on", "NUMBER", "It", "s", "really", "hard", "to", "dive", "into", "the", "whole", "Jade", "syntax", "at", "once", "NUMBER", "But", "you", "ve", "managed", "to", "make", "it", "seemingly", "painless", "NUMBER", "If", "we", "get", "this", "right", "then", "I", "see", "no", "reason", "why", "anyone", "would", "want", "to", "use", "Jade", "NUMBER", "Yup", "NUMBER", "Completely", "agree", "NUMBER", "This", "looks", "awesome", "NUMBER", "Carry", "on", "NUMBER", "Current", "template", "javascript", "TAG", "TAG", "TAG", "data", "NUMBER", "author", "TAG", "TAG", "aut", "TAG", "TAG", "TAG", "TAG", "TAG", "author", "TAG", "TAG", "aut", "TAG", "TAG", "loop", "NUMBER", "getIndex", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "author", "be", "not", "array", "NUMBER", "TAG", "This", "object", "be", "be", "pass", "into", "the", "template", "javascript", "author", "Author", "One", "Author", "Two", "Author", "Two", "Author", "Two", "Output", "xml", "TAG", "Author", "One", "TAG", "TAG", "aut", "TAG", "NUMBER", "TAG", "Author", "Two", "TAG", "TAG", "aut", "TAG", "NUMBER", "TAG", "Author", "Two", "TAG", "TAG", "aut", "TAG", "NUMBER", "TAG", "Author", "Two", "TAG", "TAG", "aut", "TAG", "NUMBER", "The", "TAG", "closing", "tags", "be", "not", "appearing", "what", "be", "Marko", "doing", "It", "completely", "slipped", "my", "mind", "that", "I", "was", "expecting", "XML", "I", "m", "quite", "use", "to", "template", "engines", "support", "both", "HTML", "and", "XML", "NUMBER", "Changing", "the", "extension", "completely", "breaks", "the", "code", "TAG", "and", "TAG", "test", "so", "far", "all", "breaking", "javascript", "test", "NUMBER", "marko", "NUMBER", "xml", "NUMBER", "function", "export", "require", "module", "__filename", "__dirname", "TAG", "SyntaxError", "Unexpected", "token", "TAG", "home", "george", "code", "marko", "playground", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Module", "NUMBER", "_compile", "module", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "Module", "NUMBER", "_extensions", "NUMBER", "js", "module", "NUMBER", "js", "NUMBER", "NUMBER", "Bump", "for", "those", "who", "still", "faces", "this", "problem", "NUMBER", "For", "me", "things", "start", "to", "work", "when", "I", "do", "require", "marko", "node", "require", "NUMBER", "install", "extension", "NUMBER", "xml", "My", "guess", "be", "that", "internally", "require", "some", "NUMBER", "marko", "NUMBER", "xml", "looks", "for", "loader", "associated", "with", "NUMBER", "xml", "which", "be", "more", "in", "line", "with", "require", "path", "NUMBER", "extname", "some", "NUMBER", "marko", "NUMBER", "xml", "NUMBER", "adresses", "an", "issue", "with", "xml", "and", "marko", "hot", "reload", "NUMBER", "It", "seems", "like", "LINK", "start", "needs", "some", "improvement", "NUMBER", "Angular", "NUMBER", "s", "use", "of", "file", "name", "labels", "on", "their", "code", "samples", "be", "helpful", "here", "LINK", "You", "see", "this", "a", "lot", "throughout", "the", "community", "NUMBER", "It", "s", "a", "nice", "way", "to", "help", "people", "get", "their", "head", "around", "the", "setup", "process", "quickly", "so", "they", "can", "get", "down", "to", "learning", "the", "syntax", "and", "API", "and", "also", "build", "something", "NUMBER", "I", "need", "it", "so", "I", "believe", "I", "can", "implement", "this", "feature", "NUMBER", "I", "can", "make", "fork", "pull", "test", "develop", "pull", "request", "NUMBER", "Before", "I", "be", "going", "deeply", "in", "the", "source", "code", "can", "you", "give", "me", "some", "direction", "where", "you", "think", "be", "the", "best", "place", "to", "implement", "it", "links", "to", "file", "lines", "function", "will", "be", "appreciated", "I", "prefer", "sandbox", "via", "vm", "or", "vm", "NUMBER", "LINK", "NUMBER", "Regular", "VM", "of", "node", "can", "make", "the", "entire", "process", "not", "responding", "while", "true", "NUMBER", "static", "code", "analysis", "never", "can", "be", "perfect", "and", "in", "case", "of", "break", "it", "be", "a", "backdoor", "to", "entire", "server", "NUMBER", "That", "why", "we", "must", "choose", "sandbox", "LINK", "LINK", "We", "only", "talking", "about", "server", "side", "NUMBER", "web", "worker", "be", "mostly", "for", "client", "side", "NUMBER", "Out", "of", "process", "will", "make", "all", "global", "variables", "not", "works", "NUMBER", "It", "be", "break", "change", "NUMBER", "Can", "we", "do", "that", "kind", "of", "break", "change", "to", "Marko", "Just", "to", "clarify", "NUMBER", "For", "securing", "client", "side", "all", "we", "need", "to", "do", "be", "use", "XSS", "library", "NUMBER", "LINK", "NUMBER", "We", "be", "only", "talking", "about", "securing", "server", "side", "code", "executing", "I", "believe", "that", "to", "not", "break", "current", "code", "use", "global", "variables", "we", "have", "to", "add", "it", "as", "an", "option", "NUMBER", "Maybe", "like", "this", "require", "marko", "NUMBER", "load", "src", "secure", "true", "LINK", "api", "loadtemplatepath", "templatesrc", "options", "template", "The", "problem", "be", "that", "maybe", "there", "be", "user", "that", "now", "use", "template", "that", "run", "insecure", "code", "but", "this", "be", "what", "they", "want", "NUMBER", "We", "cannot", "make", "break", "change", "to", "community", "project", "NUMBER", "we", "can", "simply", "use", "child_process", "NUMBER", "spawn", "or", "fork", "and", "send", "data", "between", "the", "process", "NUMBER", "A", "question", "There", "be", "any", "timeout", "for", "async", "function", "loading", "in", "Marko", "We", "don", "t", "want", "that", "a", "template", "that", "contain", "a", "infinite", "loop", "will", "work", "forever", "NUMBER", "patrick", "steele", "idem", "NUMBER", "That", "what", "I", "mean", "it", "will", "be", "opt", "in", "only", "So", "we", "have", "to", "add", "timeout", "default", "NUMBER", "min", "require", "marko", "NUMBER", "load", "src", "secure", "true", "false", "timeout", "in", "ms", "Maybe", "the", "timeout", "need", "to", "be", "in", "the", "render", "function", "not", "at", "template", "loading", "time", "It", "be", "support", "for", "vm", "NUMBER", "options", "timeout", "NUMBER", "Maybe", "it", "be", "possible", "to", "add", "modules", "to", "VM", "NUMBER", "context", "use", "the", "sandbox", "option", "instead", "of", "requiring", "it", "sandbox", "marko", "require", "NUMBER", "marko", "async", "require", "marko", "async", "What", "do", "you", "think", "For", "timeout", "You", "can", "do", "vm", "NUMBER", "call", "setTimeout", "function", "process", "NUMBER", "exit", "NUMBER", "It", "will", "stop", "the", "vm", "after", "NUMBER", "minute", "Anyway", "Maybe", "it", "be", "easier", "to", "implement", "it", "simply", "use", "child_process", "NUMBER", "spawn", "that", "run", "native", "vm", "module", "NUMBER", "and", "not", "be", "depended", "on", "other", "modules", "NUMBER", "vm", "NUMBER", "not", "giving", "as", "so", "much", "NUMBER", "I", "think", "that", "child_process", "can", "give", "us", "secure", "way", "of", "run", "things", "and", "vm", "module", "can", "give", "as", "javascript", "from", "text", "compiler", "NUMBER", "In", "short", "NUMBER", "We", "will", "create", "a", "short", "JS", "file", "that", "render", "template", "in", "native", "vm", "NUMBER", "NUMBER", "We", "will", "run", "this", "js", "file", "as", "spawned", "process", "NUMBER", "Maybe", "try", "add", "the", "creator", "of", "vm", "NUMBER", "to", "the", "conversion", "NUMBER", "The", "problem", "be", "that", "today", "I", "can", "use", "helper", "with", "extenal", "data", "NUMBER", "var", "y", "NUMBER", "templateDat", "my_helper", "function", "x", "return", "x", "y", "If", "we", "use", "vm", "NUMBER", "or", "out", "of", "process", "rendering", "the", "y", "variable", "will", "not", "available", "NUMBER", "So", "there", "be", "any", "solution", "how", "to", "to", "stop", "vm", "NUMBER", "in", "case", "of", "infinite", "loop", "I", "think", "a", "folder", "within", "node_modules", "be", "a", "very", "sound", "place", "to", "compile", "template", "to", "_by", "default_", "NUMBER", "Reference", "the", "full", "path", "to", "a", "compiled", "file", "if", "an", "error", "occur", "and", "the", "person", "can", "easily", "navigate", "their", "way", "to", "the", "destination", "for", "further", "inspection", "NUMBER", "I", "know", "it", "s", "awesome", "and", "cool", "to", "see", "the", "Javascript", "that", "be", "compiled", "from", "NUMBER", "marko", "syntax", "file", "but", "I", "stand", "by", "my", "opinion", "that", "they", "serve", "quite", "literally", "no", "real", "purpose", "besides", "debugging", "and", "for", "a", "lack", "of", "a", "better", "term", "pure", "self", "interest", "in", "how", "Marko", "works", "NUMBER", "In", "either", "case", "at", "no", "point", "should", "these", "file", "need", "to", "be", "visible", "in", "a", "project", "NUMBER", "You", "don", "t", "edit", "or", "make", "change", "to", "compiled", "Marko", "file", "and", "they", "shouldn", "t", "ever", "need", "to", "be", "include", "in", "version", "control", "NUMBER", "The", "node_modules", "folder", "ticks", "as", "a", "solution", "to", "all", "these", "boxes", "NUMBER", "PLUS", "the", "fact", "it", "s", "already", "checked", "out", "of", "version", "control", "in", "NUMBER", "of", "projects", "means", "compiled", "file", "be", "hidden", "straight", "away", "instead", "of", "realising", "down", "the", "track", "and", "needing", "to", "add", "line", "s", "to", "your", "NUMBER", "gitignore", "file", "NUMBER", "Hey", "patrick", "steele", "idem", "Sorry", "I", "miss", "your", "reply", "to", "this", "NUMBER", "Better", "now", "than", "never", "though", "I", "guess", "NUMBER", "Hmmmm", "NUMBER", "That", "s", "a", "tricky", "one", "NUMBER", "In", "regards", "to", "your", "second", "use", "case", "I", "still", "stand", "by", "the", "fact", "that", "even", "if", "you", "did", "decide", "to", "delete", "your", "original", "Marko", "template", "as", "some", "kind", "of", "release", "process", "you", "d", "probably", "be", "doing", "more", "harm", "than", "good", "NUMBER", "Unless", "you", "have", "some", "incredibly", "unique", "situation", "where", "storage", "space", "be", "an", "issue", "what", "would", "deleting", "the", "originals", "and", "keep", "the", "compiled", "achieve", "You", "d", "have", "compiled", "Marko", "template", "that", "would", "serve", "literally", "no", "purpose", "to", "anyone", "except", "the", "process", "workers", "right", "I", "guess", "if", "it", "was", "part", "of", "some", "kind", "of", "test", "environment", "I", "could", "see", "the", "use", "for", "that", "though", "NUMBER", "That", "kind", "of", "makes", "sense", "but", "I", "don", "t", "see", "any", "real", "advantage", "of", "that", "over", "the", "file", "be", "in", "a", "seperate", "directory", "NUMBER", "As", "for", "not", "use", "the", "node_modules", "folder", "I", "think", "that", "s", "a", "fair", "enough", "reservation", "to", "have", "NUMBER", "Something", "like", "NUMBER", "mark", "compiled", "would", "work", "well", "if", "you", "were", "going", "to", "go", "down", "the", "whole", "_compiling", "to", "a", "different", "directory_", "path", "NUMBER", "Let", "me", "know", "what", "you", "decide", "on", "anyway", "NUMBER", "Glad", "to", "see", "v", "NUMBER", "be", "gradually", "get", "rolled", "out", "keep", "up", "the", "good", "work", "mate", "NUMBER", "It", "would", "be", "very", "nice", "to", "be", "able", "to", "supply", "an", "alternate", "directory", "NUMBER", "It", "could", "be", "the", "case", "that", "the", "user", "run", "the", "application", "doesn", "t", "have", "write", "permissions", "to", "node_modules", "but", "do", "have", "write", "permissions", "elsewhere", "NUMBER", "NUMBER", "for", "NUMBER", "marko", "compiled", "or", "NUMBER", "marko", "cache", "on", "the", "root", "in", "a", "similar", "way", "as", "Sass", "do", "NUMBER", "The", "compiled", "template", "location", "be", "handle", "on", "lines", "NUMBER", "and", "NUMBER", "of", "node", "require", "NUMBER", "js", "NUMBER", "Right", "now", "they", "just", "append", "NUMBER", "js", "to", "the", "end", "of", "the", "source", "template", "s", "filename", "NUMBER", "I", "ve", "hacked", "on", "my", "local", "copy", "a", "bit", "and", "add", "new", "compiler", "options", "for", "defining", "the", "source", "and", "cache", "directories", "and", "it", "works", "perfectly", "under", "ideal", "circumstances", "NUMBER", "The", "problem", "I", "m", "looking", "at", "now", "be", "ensuring", "that", "the", "request", "template", "be", "actually", "_below_", "the", "given", "source", "directory", "which", "I", "suppose", "could", "be", "handle", "by", "throw", "an", "error", "if", "path", "NUMBER", "relative", "TAG", "TAG", "NUMBER", "artsWith", "NUMBER", "and", "that", "the", "target", "cache", "directory", "exists", "before", "trying", "to", "write", "to", "it", "ideally", "without", "too", "much", "extra", "code", "or", "pulling", "in", "another", "dependency", "like", "mkdirp", "NUMBER", "I", "ll", "try", "to", "poke", "at", "this", "a", "bit", "more", "tomorrow", "if", "I", "get", "the", "chance", "but", "I", "m", "run", "out", "of", "time", "for", "today", "NUMBER", "EDIT", "The", "reason", "for", "worrying", "about", "the", "path", "relative", "to", "the", "source", "directory", "be", "that", "otherwise", "it", "just", "dumps", "everything", "in", "the", "same", "place", "which", "be", "fine", "until", "you", "start", "having", "name", "collisions", "NUMBER", "The", "only", "other", "option", "I", "can", "think", "of", "would", "be", "naming", "the", "file", "by", "some", "kind", "of", "unique", "hash", "but", "that", "would", "make", "debugging", "a", "nightmare", "NUMBER", "It", "seems", "this", "isn", "t", "quite", "as", "simple", "as", "I", "d", "thought", "NUMBER", "After", "posting", "I", "notice", "the", "comment", "above", "about", "it", "only", "storing", "in", "the", "alternate", "location", "for", "reference", "purposes", "and", "it", "seems", "that", "be", "what", "s", "happening", "NUMBER", "It", "also", "doesn", "t", "seem", "to", "affect", "layouts", "NUMBER", "I", "ll", "still", "try", "to", "poke", "at", "this", "a", "bit", "when", "I", "get", "the", "chance", "but", "disregard", "my", "previous", "post", "as", "premature", "optimism", "NUMBER", "I", "did", "some", "more", "digging", "and", "find", "that", "node", "require", "NUMBER", "js", "isn", "t", "the", "only", "place", "that", "be", "hard", "code", "to", "simply", "append", "NUMBER", "js", "to", "the", "source", "filename", "NUMBER", "I", "m", "seeing", "NUMBER", "more", "such", "lines", "in", "runtime", "loader", "index", "NUMBER", "js", "NUMBER", "Fortunately", "the", "line", "always", "seems", "to", "be", "basically", "the", "same", "thing", "var", "targetFile", "templatePath", "NUMBER", "js", "sometimes", "with", "different", "variable", "names", "NUMBER", "I", "ll", "keep", "poking", "at", "this", "whenever", "I", "get", "the", "chance", "NUMBER", "In", "the", "meantime", "regardless", "of", "the", "solution", "we", "ll", "still", "need", "to", "ensure", "that", "the", "target", "directory", "exists", "NUMBER", "My", "first", "idea", "was", "to", "use", "the", "mkdirp", "module", "but", "that", "would", "mean", "add", "another", "dependency", "NUMBER", "Any", "thoughts", "or", "suggestions", "I", "test", "every", "scenario", "I", "could", "think", "of", "and", "it", "_appears_", "to", "work", "perfectly", "except", "for", "two", "things", "NUMBER", "I", "get", "a", "Cannot", "find", "module", "error", "when", "trying", "to", "use", "a", "component", "though", "that", "s", "_probably_", "the", "result", "of", "my", "be", "lazy", "and", "hard", "code", "some", "of", "it", "just", "to", "see", "if", "this", "was", "even", "viable", "NUMBER", "NUMBER", "I", "_think_", "with", "the", "current", "setup", "if", "the", "source", "template", "has", "be", "delete", "moved", "or", "renamed", "it", "falls", "back", "to", "require", "s", "build", "in", "behavior", "of", "attempting", "to", "append", "NUMBER", "js", "to", "the", "end", "of", "the", "filename", "NUMBER", "This", "be", "probably", "an", "easy", "fix", "NUMBER", "To", "anyone", "who", "would", "like", "to", "put", "my", "research", "into", "practice", "Step", "NUMBER", "Edit", "lines", "NUMBER", "and", "NUMBER", "of", "node", "require", "NUMBER", "js", "and", "lines", "NUMBER", "NUMBER", "and", "NUMBER", "of", "runtime", "loader", "index", "NUMBER", "js", "marko", "v", "NUMBER", "They", "should", "all", "look", "something", "like", "var", "targetFile", "templatePath", "NUMBER", "js", "NUMBER", "You", "ll", "want", "to", "modify", "them", "to", "point", "to", "wherever", "you", "want", "the", "compiled", "template", "to", "be", "cached", "NUMBER", "to", "the", "previous", "suggestion", "of", "use", "NUMBER", "cache", "marko", "by", "default", "NUMBER", "You", "could", "probably", "implement", "a", "new", "compiler", "option", "for", "users", "to", "specify", "the", "source", "and", "cache", "directory", "paths", "both", "modules", "already", "have", "access", "to", "markoCompiler", "NUMBER", "defaultOptions", "NUMBER", "Step", "NUMBER", "Ensure", "valid", "file", "paths", "All", "sources", "should", "be", "below", "src", "all", "compiled", "template", "should", "be", "below", "NUMBER", "cache", "marko", "and", "the", "target", "directory", "should", "exist", "before", "attempting", "to", "write", "to", "it", "for", "example", "NUMBER", "cache", "marko", "layouts", "main", "must", "exist", "before", "attempting", "to", "write", "NUMBER", "cache", "marko", "layouts", "main", "layout", "NUMBER", "marko", "NUMBER", "js", "ideally", "without", "add", "too", "much", "extra", "code", "or", "another", "dependency", "NUMBER", "Step", "NUMBER", "Make", "sure", "components", "work", "correctly", "NUMBER", "The", "error", "I", "saw", "may", "just", "have", "be", "a", "fluke", "or", "it", "may", "be", "a", "quirk", "in", "how", "components", "be", "loaded", "as", "oppose", "to", "layouts", "which", "did", "work", "correctly", "for", "me", "NUMBER", "Step", "NUMBER", "optional", "Modify", "the", "require", "extension", "to", "check", "for", "an", "exist", "compiled", "version", "of", "the", "request", "template", "even", "if", "it", "can", "t", "find", "the", "source", "file", "NUMBER", "I", "apologize", "for", "the", "length", "and", "number", "of", "my", "posts", "NUMBER", "I", "m", "not", "sure", "if", "or", "when", "I", "ll", "get", "around", "to", "forking", "or", "initiating", "a", "pull", "request", "so", "I", "want", "to", "make", "sure", "that", "if", "anyone", "wants", "to", "finish", "what", "I", "ve", "start", "they", "ll", "have", "as", "much", "information", "as", "possible", "NUMBER", "Working", "great", "Thanks", "NUMBER", "Do", "you", "know", "off", "top", "if", "there", "be", "any", "other", "places", "that", "scan", "node_modules", "where", "this", "check", "would", "be", "necessary", "Hi", "Just", "to", "let", "you", "know", "there", "seems", "to", "be", "a", "problem", "with", "npm", "installing", "dependencies", "for", "the", "marko", "package", "in", "particular", "I", "notice", "marko", "layout", "wasn", "t", "be", "install", "NUMBER", "I", "made", "sure", "marko", "layout", "wasn", "t", "install", "in", "the", "main", "projects", "package", "NUMBER", "json", "file", "NUMBER", "Tries", "a", "clean", "uninstall", "of", "all", "npm", "package", "npm", "cache", "clean", "and", "then", "install", "and", "still", "no", "joy", "NUMBER", "I", "think", "it", "be", "linked", "to", "the", "version", "on", "npm", "NUMBER", "I", "managed", "to", "resolve", "this", "by", "cd", "into", "node_modules", "marko", "and", "run", "npm", "install", "there", "NUMBER", "Hope", "it", "helps", "someone", "NUMBER", "Thanks", "this", "solve", "it", "NUMBER", "Was", "pulling", "my", "hair", "out", "NUMBER", "Would", "be", "good", "to", "get", "this", "in", "the", "marko", "docs", "maybe", "in", "a", "section", "about", "moving", "an", "app", "to", "production", "NUMBER", "What", "I", "actually", "did", "was", "stop", "grunt", "from", "copying", "the", "template", "NUMBER", "marko", "NUMBER", "js", "file", "to", "the", "build", "so", "they", "were", "generate", "again", "on", "the", "server", "NUMBER", "Is", "that", "a", "suitable", "way", "of", "doing", "it", "I", "have", "a", "marko", "tag", "with", "the", "following", "marko", "tag", "NUMBER", "json", "class", "string", "items", "TAG", "wallpaper", "TAG", "class", "string", "panel", "TAG", "class", "string", "someProp", "string", "And", "the", "following", "index", "NUMBER", "js", "module", "NUMBER", "export", "require", "marko", "widgets", "NUMBER", "defineComponent", "template", "require", "NUMBER", "template", "NUMBER", "marko", "NUMBER", "html", "getTemplateData", "function", "state", "input", "input", "NUMBER", "items", "input", "NUMBER", "items", "var", "items", "for", "var", "i", "NUMBER", "i", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "item", "NUMBER", "text", "TAG", "TAG", "TAG", "TAG", "Hey", "all", "NUMBER", "So", "at", "the", "present", "Marko", "doesn", "t", "have", "a", "uniform", "way", "of", "defining", "configuration", "options", "when", "first", "initializing", "the", "library", "in", "your", "project", "NUMBER", "For", "example", "setting", "the", "writeToDisk", "option", "which", "prevents", "template", "from", "compile", "to", "the", "file", "system", "be", "achieved", "with", "javascript", "Current", "configuration", "method", "require", "marko", "compiler", "NUMBER", "defaultOptions", "NUMBER", "writeToDisk", "false", "what", "if", "more", "config", "options", "arise", "require", "marko", "node", "require", "NUMBER", "install", "It", "works", "for", "now", "but", "it", "s", "not", "ideal", "particularly", "with", "the", "future", "in", "mind", "where", "configuration", "could", "play", "a", "bigger", "role", "with", "Marko", "NUMBER", "Here", "be", "some", "alternatives", "for", "defining", "configuration", "that", "have", "be", "suggested", "so", "far", "NUMBER", "NUMBER", "Configuration", "File", "This", "solution", "be", "probably", "the", "most", "promising", "on", "this", "list", "NUMBER", "Essentially", "the", "idea", "be", "that", "you", "can", "create", "a", "file", "in", "the", "base", "directory", "of", "your", "project", "that", "Marko", "will", "read", "and", "pull", "configuration", "options", "from", "NUMBER", "A", "potential", "name", "for", "the", "file", "might", "be", "NUMBER", "markoc", "a", "hidden", "file", "standing", "for", "marko", "config", "NUMBER", "javascript", "writeToDisk", "false", "NUMBER", "One", "debate", "that", "do", "arise", "from", "this", "be", "whether", "your", "_Marko", "Tag", "Lib_", "should", "also", "be", "defined", "here", "with", "the", "compiler", "configuration", "or", "if", "it", "should", "still", "be", "keep", "in", "a", "seperate", "marko", "taglib", "NUMBER", "json", "NUMBER", "My", "personal", "opinion", "be", "that", "all", "Marko", "configuration", "should", "be", "defined", "from", "a", "central", "place", "to", "make", "life", "easier", "but", "the", "argument", "for", "keep", "the", "marko", "taglib", "NUMBER", "json", "seperate", "from", "compiler", "configuration", "be", "that", "it", "s", "less", "complex", "NUMBER", "My", "question", "to", "that", "response", "be", "how", "often", "do", "we", "intend", "to", "add", "update", "component", "directories", "If", "it", "s", "very", "infrequently", "as", "I", "suspect", "then", "I", "just", "don", "t", "see", "why", "it", "needs", "its", "own", "file", "NUMBER", "Just", "my", "NUMBER", "on", "the", "matter", "though", "NUMBER", "Please", "share", "your", "own", "thoughts", "NUMBER", "NUMBER", "Pass", "Configuration", "Block", "To", "Installer", "An", "idea", "I", "had", "was", "to", "potentially", "pass", "in", "a", "configuration", "object", "when", "Marko", "be", "required", "NUMBER", "javascript", "Example", "require", "marko", "node", "require", "NUMBER", "install", "writeToDisk", "false", "NUMBER", "It", "s", "certainly", "a", "more", "traditional", "solution", "but", "this", "approach", "be", "not", "ideal", "given", "the", "way", "the", "Marko", "runtime", "be", "loaded", "by", "Node", "NUMBER", "js", "so", "this", "one", "be", "not", "recommended", "NUMBER", "NUMBER", "If", "you", "ve", "get", "any", "ideas", "or", "suggestions", "for", "alternative", "ways", "that", "configuration", "could", "be", "defined", "for", "Marko", "please", "share", "it", "with", "us", "below", "NUMBER", "I", "think", "it", "s", "important", "that", "we", "have", "this", "discussion", "now", "so", "that", "more", "default", "configuration", "options", "can", "be", "introduce", "by", "the", "community", "down", "the", "track", "NUMBER", "If", "we", "can", "agree", "on", "a", "standard", "now", "we", "can", "start", "exploring", "other", "potential", "config", "for", "Marko", "NUMBER", "Please", "share", "any", "thoughts", "you", "have", "I", "agree", "with", "philidem", "NUMBER", "I", "think", "a", "centralised", "configuration", "file", "in", "the", "project", "root", "for", "all", "default", "Marko", "settings", "and", "the", "name", "marko", "NUMBER", "json", "gets", "my", "vote", "so", "far", "NUMBER", "Good", "point", "about", "the", "potential", "hidden", "file", "issue", "with", "Unix", "based", "systems", "NUMBER", "Do", "you", "want", "to", "elaborate", "more", "on", "why", "you", "would", "want", "to", "keep", "the", "Marko", "Taglib", "seperate", "patrick", "steele", "idem", "I", "would", "prefer", "be", "able", "to", "pass", "a", "configuration", "object", "into", "some", "sort", "of", "require", "marko", "NUMBER", "config", "method", "NUMBER", "I", "don", "t", "like", "the", "idea", "of", "messing", "with", "Node", "s", "require", "function", "so", "I", "don", "t", "use", "marko", "node", "require", "NUMBER", "I", "use", "marko", "NUMBER", "load", "for", "loading", "template", "NUMBER", "I", "normally", "write", "my", "applications", "to", "look", "for", "an", "application", "specific", "configuration", "file", "or", "have", "one", "fed", "to", "it", "NUMBER", "The", "application", "then", "uses", "the", "properties", "of", "that", "configuration", "file", "to", "initialize", "any", "modules", "it", "uses", "that", "could", "potentially", "need", "some", "configuring", "NUMBER", "I", "don", "t", "really", "want", "to", "edit", "multiple", "configuration", "file", "for", "one", "application", "NUMBER", "My", "statement", "about", "the", "require", "patching", "was", "in", "response", "to", "idea", "NUMBER", "in", "the", "original", "post", "NUMBER", "It", "proposes", "passing", "the", "configuration", "in", "during", "the", "install", "of", "the", "require", "patch", "NUMBER", "I", "was", "merely", "point", "out", "that", "not", "everyone", "uses", "that", "aspect", "of", "Marko", "NUMBER", "I", "understand", "that", "it", "be", "a", "convenience", "method", "and", "that", "Marko", "be", "really", "just", "compile", "the", "HTML", "based", "language", "into", "JS", "NUMBER", "It", "doesn", "t", "matter", "to", "me", "if", "Babel", "or", "other", "things", "also", "patch", "the", "require", "method", "I", "don", "t", "use", "any", "of", "them", "NUMBER", "Hey", "team", "NUMBER", "Are", "there", "any", "plan", "on", "the", "roadmap", "for", "an", "Express", "JS", "rendering", "plugin", "for", "Marko", "Currently", "we", "render", "template", "with", "NUMBER", "javascript", "require", "marko", "node", "require", "NUMBER", "install", "var", "app", "require", "express", "var", "template", "require", "NUMBER", "hello", "NUMBER", "marko", "app", "NUMBER", "get", "hello", "function", "req", "res", "template", "NUMBER", "render", "name", "Adam", "fruits", "Apples", "Oranges", "Grapes", "res", "But", "what", "about", "a", "plugin", "that", "leverages", "Express", "s", "build", "in", "render", "helper", "javascript", "var", "app", "require", "express", "var", "Marko", "require", "marko", "express", "example", "lib", "name", "app", "NUMBER", "engine", "marko", "Marko", "fabulous", "options", "app", "NUMBER", "set", "view", "engine", "marko", "app", "NUMBER", "get", "hello", "function", "req", "res", "res", "NUMBER", "render", "hello", "name", "Adam", "fruits", "Apples", "Oranges", "Grapes", "Is", "something", "like", "this", "on", "the", "cards", "or", "did", "you", "avoid", "it", "because", "of", "performance", "reasons", "Marko", "best", "practices", "or", "something", "I", "guess", "one", "of", "the", "advantages", "of", "initializing", "Marko", "as", "an", "express", "app", "engine", "like", "above", "be", "that", "you", "can", "pass", "options", "to", "Marko", "such", "as", "writeToDisk", "in", "a", "far", "nicer", "way", "than", "currently", "available", "NUMBER", "It", "also", "means", "we", "can", "set", "a", "base", "directory", "to", "reference", "NUMBER", "marko", "template", "relative", "from", "and", "not", "need", "to", "have", "an", "extra", "line", "to", "load", "the", "template", "into", "a", "variable", "before", "rendering", "content", "NUMBER", "Thanks", "for", "the", "response", "patrick", "steele", "idem", "NUMBER", "That", "blog", "post", "you", "write", "pretty", "much", "cleared", "everything", "up", "for", "me", "seems", "like", "use", "the", "build", "in", "express", "renderer", "can", "indeed", "be", "quite", "harmful", "in", "some", "cases", "NUMBER", "I", "m", "interested", "in", "make", "my", "apps", "more", "modular", "NUMBER", "I", "like", "the", "structure", "you", "use", "for", "basic", "apps", "NUMBER", "pages", "home", "index", "NUMBER", "js", "style", "NUMBER", "css", "template", "NUMBER", "marko", "login", "index", "NUMBER", "js", "style", "NUMBER", "css", "template", "NUMBER", "marko", "NUMBER", "but", "I", "m", "wondering", "how", "that", "idea", "gets", "applied", "to", "say", "a", "blog", "post", "Would", "you", "opt", "for", "something", "like", "pages", "posts", "post_show", "post_edit", "post_update", "Just", "trying", "to", "get", "the", "Marko", "concepts", "down", "pat", "NUMBER", "Thanks", "for", "all", "your", "help", "Cheers", "mate", "wonderful", "NUMBER", "patrick", "steele", "idem", "Is", "it", "possible", "to", "add", "js", "and", "less", "file", "to", "the", "components", "taglibs", "I", "ve", "tried", "TAG", "and", "someway", "similar", "to", "it", "I", "find", "that", "only", "one", "lasso", "page", "tag", "would", "be", "work", "NUMBER", "be", "that", "a", "possible", "way", "to", "get", "lasso", "and", "marko", "taglib", "work", "together", "to", "support", "the", "dependencies", "which", "would", "be", "required", "by", "the", "component", "taglib", "itself", "patrick", "steele", "idem", "sure", "Would", "be", "useful", "to", "be", "able", "to", "tell", "from", "reading", "the", "first", "paragraph", "of", "the", "readme", "whether", "mark", "be", "server", "client", "side", "or", "both", "NUMBER", "I", "guess", "it", "s", "both", "but", "if", "it", "was", "mention", "I", "would", "feel", "more", "confident", "trying", "marko", "out", "Excellent", "thanks", "NUMBER", "So", "far", "after", "NUMBER", "evening", "I", "m", "a", "big", "marko", "fan", "the", "most", "comprehensible", "compiled", "template", "I", "ve", "ever", "come", "across", "great", "for", "debugging", "Given", "this", "template", "html", "TAG", "Author", "data", "NUMBER", "author", "NUMBER", "name", "TAG", "this", "data", "js", "template", "NUMBER", "render", "I", "get", "this", "error", "escapeXml", "data", "NUMBER", "author", "NUMBER", "name", "TypeError", "Cannot", "read", "property", "name", "of", "undefined", "Is", "this", "normal", "behavior", "Does", "marko", "handle", "properties", "on", "undefined", "paths", "or", "be", "I", "miss", "something", "thanks", "patrick", "steele", "idem", "that", "s", "what", "I", "did", "lodash", "NUMBER", "On", "the", "other", "hand", "wouldn", "t", "it", "be", "interesting", "to", "have", "that", "handle", "by", "marko", "It", "seems", "most", "template", "engines", "have", "such", "a", "feature", "NUMBER", "I", "see", "what", "you", "mean", "NUMBER", "As", "for", "offering", "get", "as", "builtin", "helper", "one", "can", "use", "lodash", "as", "you", "suggested", "NUMBER", "May", "be", "it", "s", "good", "to", "keep", "the", "library", "as", "slim", "as", "possible", "by", "not", "provide", "extra", "features", "until", "there", "s", "sufficient", "demand", "for", "it", "by", "the", "community", "Hey", "patrick", "steele", "idem", "I", "see", "absolutely", "Thank", "you", "for", "brilliant", "template", "engine", "and", "very", "interesting", "test", "harness", "created", "for", "it", "NUMBER", "Excuse", "me", "I", "m", "newbie", "to", "marko", "NUMBER", "I", "v", "tried", "the", "hello", "world", "example", "on", "koa", "NUMBER", "js", "with", "a", "stream", "via", "pipe", "proccess", "NUMBER", "dout", "NUMBER", "So", "first", "time", "in", "template", "all", "was", "OK", "write", "as", "must", "to", "be", "NUMBER", "Via", "console", "terminal", "all", "was", "also", "fine", "it", "s", "work", "but", "when", "I", "opened", "the", "file", "next", "morning", "I", "v", "seen", "that", "marko", "engin", "rewrite", "the", "file", "of", "his", "own", "way", "with", "helper", "s", "javascript", "function", "but", "my", "Hallo", "data", "NUMBER", "name", "be", "gone", "simple", "disapeared", "NUMBER", "What", "I", "v", "wrong", "made", "Or", "all", "that", "features", "must", "be", "by", "default", "javascript", "var", "fs", "require", "fs", "var", "duf", "require", "marko", "node", "require", "NUMBER", "install", "two", "ways", "at", "once", "first", "way", "var", "template", "require", "NUMBER", "views", "hello", "world", "NUMBER", "marko", "template", "NUMBER", "render", "name", "Bob", "colors", "yellow", "red", "brown", "function", "err", "output", "if", "err", "console", "NUMBER", "log", "error", "err", "console", "NUMBER", "log", "output", "output", "NUMBER", "way", "var", "das", "template", "NUMBER", "ream", "name", "bobika", "das", "NUMBER", "on", "end", "function", "console", "NUMBER", "log", "nDAS", "END", "DAS", "END", "ON", "END", "n", "das", "NUMBER", "once", "end", "console", "NUMBER", "log", "nDAS", "Once", "END", "ONCE", "END", "n", "das", "NUMBER", "on", "finish", "console", "NUMBER", "log", "r", "nDAS", "ON", "FINISH", "n", "das", "NUMBER", "on", "error", "e", "console", "NUMBER", "log", "n", "DAS", "ERROR", "e", "das", "NUMBER", "on", "data", "c", "console", "NUMBER", "log", "DATA", "c", "NUMBER", "toString", "das", "NUMBER", "on", "readable", "var", "buf", "while", "buf", "das", "NUMBER", "read", "null", "duf", "buf", "console", "NUMBER", "log", "nBUF", "duf", "var", "sis", "process", "NUMBER", "din", "var", "sisout", "process", "NUMBER", "dout", "process", "NUMBER", "dout", "NUMBER", "on", "error", "process", "NUMBER", "exit", "process", "NUMBER", "dout", "NUMBER", "on", "exit", "function", "console", "NUMBER", "log", "ended", "sis", "NUMBER", "pipe", "das", "NUMBER", "pipe", "sisout", "and", "here", "my", "hallo", "world", "NUMBER", "marko", "in", "the", "morning", "javascript", "function", "create", "__helpers", "var", "str", "__helpers", "NUMBER", "s", "empty", "__helpers", "NUMBER", "e", "notEmpty", "__helpers", "NUMBER", "ne", "escapeXml", "__helpers", "NUMBER", "x", "forEach", "__helpers", "NUMBER", "f", "escapeXmlAttr", "__helpers", "NUMBER", "xa", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "hello", "escapeXml", "data", "NUMBER", "name", "if", "notEmpty", "data", "NUMBER", "colors", "out", "NUMBER", "w", "TAG", "forEach", "data", "NUMBER", "colors", "function", "color", "out", "NUMBER", "w", "TAG", "escapeXml", "color", "TAG", "out", "NUMBER", "w", "TAG", "else", "out", "NUMBER", "w", "TAG", "no", "colors", "TAG", "out", "NUMBER", "w", "escapeXml", "data", "NUMBER", "bazar", "TAG", "simka", "TAG", "str", "data", "NUMBER", "simka", "module", "NUMBER", "export", "require", "marko", "NUMBER", "c", "__filename", "NUMBER", "c", "create", "In", "the", "file", "hierarchie", "must", "be", "two", "file", "One", "for", "hello", "world", "NUMBER", "marko", "and", "one", "compiled", "hello", "world", "NUMBER", "js", "be", "that", "by", "default", "Hmm", "NUMBER", "The", "server", "must", "be", "restart", "to", "keep", "change", "in", "the", "template", "file", "every", "time", "NUMBER", "So", "bad", "and", "slowly", "for", "a", "site", "developing", "NUMBER", "Is", "it", "true", "In", "docs", "about", "marko", "NUMBER", "js", "said", "nothing", "about", "that", "NUMBER", "About", "file", "structure", "and", "about", "server", "restarting", "NUMBER", "In", "a", "hello", "world", "example", "for", "colors", "li", "produces", "extra", "empty", "li", "pairs", "NUMBER", "Why", "When", "you", "delete", "last", "li", "so", "ok", "NUMBER", "Is", "a", "bug", "I", "try", "in", "for", "color", "in", "data", "NUMBER", "colors", "NUMBER", "produces", "NaN", "NUMBER", "Is", "there", "a", "way", "write", "data", "NUMBER", "colors", "NUMBER", "length", "Only", "open", "tags", "be", "modify", "for", "conditionals", "and", "looping", "Hi", "Patrick", "We", "be", "use", "Marko", "JS", "on", "our", "application", "NUMBER", "Below", "be", "the", "GitHub", "URL", "LINK", "Dev", "webforms", "tree", "rti", "One", "of", "our", "component", "we", "provide", "dependency", "LINK", "Dev", "webforms", "blob", "rti", "src", "components", "email", "form", "browser", "NUMBER", "json", "dependencies", "require", "NUMBER", "index", "src", "ds", "NUMBER", "browser", "NUMBER", "json", "src", "third", "party", "jquery", "NUMBER", "js", "require", "src", "components", "call", "me", "require", "src", "components", "submit", "button", "Relative", "path", "be", "not", "get", "resolve", "in", "On", "Windows", "environment", "work", "expected", "on", "MAC", "though", "NUMBER", "I", "see", "below", "exception", "in", "browser", "console", "when", "I", "hit", "our", "page", "http", "localhost", "NUMBER", "email", "compose", "AQABAAAC", "NUMBER", "CtGM", "B", "NUMBER", "cFDXP", "NUMBER", "Z", "NUMBER", "EMUy", "NUMBER", "itN", "NUMBER", "JRaj", "NUMBER", "KXegqAHIAcDOylgBccNyhrWzcCHXX", "NUMBER", "kyHd", "NUMBER", "d", "NUMBER", "zeVrAZ", "NUMBER", "NEj", "NUMBER", "cUgs", "NUMBER", "X", "NUMBER", "aPVuBb", "NUMBER", "a", "NUMBER", "nf", "NUMBER", "lhmYUUZQTFGsjCbg", "NUMBER", "mqCvMT", "NUMBER", "NheESGWhArH", "yzWgabsk", "NUMBER", "fav", "NUMBER", "SAH", "NUMBER", "OpnVL", "NUMBER", "D", "NUMBER", "FBxkkBKbKx", "NUMBER", "aa", "AmDwMgronfRfDBJQued", "NUMBER", "L", "NUMBER", "awe", "NUMBER", "pBXlXHA", "NUMBER", "BO", "NUMBER", "ThumDHPch", "NUMBER", "n", "NUMBER", "qwytqQ", "NUMBER", "oEnaKoCcCgYO", "d", "NUMBER", "TjiCWbo", "NUMBER", "FhQNzjicgj", "NUMBER", "z", "NUMBER", "Zm", "NUMBER", "OX", "NUMBER", "RkbfY", "NUMBER", "nJpdixp", "NUMBER", "JJzaKLtmyxp", "NUMBER", "cLy", "NUMBER", "SY", "NUMBER", "ckVqdOvEPfPJyspLxkixDHQXqRyEi", "NUMBER", "vJ", "NUMBER", "dAhbPACJ", "NUMBER", "Msr", "NUMBER", "bfMxg", "geA", "NUMBER", "ei", "NUMBER", "D", "NUMBER", "n", "JY", "NUMBER", "sMnqm", "IM", "NUMBER", "A", "NUMBER", "oH", "NUMBER", "hvmhs", "NUMBER", "p", "NUMBER", "DHRzLcNPNOB", "NUMBER", "ieI", "NUMBER", "Em", "NUMBER", "KpQaTzyLdP", "NUMBER", "XKK", "NUMBER", "ExgVSkK", "IRBrey", "NUMBER", "NXwf", "NUMBER", "gFo", "NUMBER", "KJsDkzKYUJ", "qMZjZdsAwpxXmRTLbJzMx", "NUMBER", "CqxEVz", "NUMBER", "R", "H", "NUMBER", "OQTOHHksx", "NUMBER", "Jnyq", "NUMBER", "UzuNw", "NUMBER", "UVFa", "NUMBER", "NkdDvVnN", "mHtBeMWrJmWBqpMhzAoXsgi", "NUMBER", "btfDRIj", "NUMBER", "TLSKDQP", "NUMBER", "NUMBER", "h", "NUMBER", "diDcRtdIt", "NUMBER", "ZRsOl", "NUMBER", "KvabSx", "NUMBER", "X", "NUMBER", "HnAljzE", "NUMBER", "M", "NUMBER", "AzO", "NUMBER", "BK", "NUMBER", "NUMBER", "RtzAor", "NUMBER", "mc", "NUMBER", "wqv", "TYYfk", "NUMBER", "EOfoXTIP", "NUMBER", "Xu", "NUMBER", "i", "oRDP", "NUMBER", "EnaYR", "NUMBER", "pM", "NUMBER", "jaJn", "NUMBER", "m", "NUMBER", "V", "NUMBER", "Iz", "NUMBER", "XHt", "NUMBER", "Cr", "NUMBER", "qEuCep", "NUMBER", "q", "NUMBER", "gKUtxIRrXSxoqYKzJtbjryfnEkNTDXVX", "NUMBER", "YirAyeOtITN", "NUMBER", "QJHtv", "GPaE", "NUMBER", "NGCcxvuJz", "NUMBER", "fPkBpVWa", "NUMBER", "WS", "NUMBER", "YaYXo", "NUMBER", "px", "NUMBER", "svVnCXWt", "NUMBER", "ip", "yhhDjA", "NUMBER", "Hgepjy", "NUMBER", "oqoMaexfKBtnecoOJp", "NUMBER", "NUMBER", "xJPWUT", "NUMBER", "RlZDnMMraDgCfqBfHtuVnl", "NUMBER", "kMbZbAmuWVKI", "NUMBER", "n", "ddhg", "GaT", "NUMBER", "NQ", "NUMBER", "IATuv", "NUMBER", "XoZ", "NUMBER", "KCJu", "NUMBER", "JKgIbo", "NUMBER", "ULEgb", "NUMBER", "fnQVnYmDWPuVXAA", "NUMBER", "qIDg", "Cannot", "find", "module", "NUMBER", "call", "me", "from", "src", "components", "email", "form", "Basically", "the", "generate", "Marko", "NUMBER", "js", "file", "creates", "the", "dependencies", "like", "below", "template", "NUMBER", "marko", "NUMBER", "js", "___call_me_index_js", "__renderer", "require", "NUMBER", "call", "me", "___submit_button_index_js", "__renderer", "require", "NUMBER", "submit", "button", "Any", "pointer", "would", "be", "helpful", "NUMBER", "Thanks", "Rajesh", "Travis", "upgrade", "its", "infrastructure", "which", "allows", "CI", "test", "to", "be", "run", "in", "docker", "container", "NUMBER", "The", "result", "be", "faster", "test", "NUMBER", "To", "use", "it", "you", "just", "have", "to", "specify", "sudo", "false", "in", "the", "travis", "CI", "NUMBER", "patrick", "steele", "idem", "which", "build", "The", "only", "thing", "that", "I", "saw", "that", "has", "fail", "recently", "was", "a", "rebuild", "that", "triggered", "on", "my", "PR", "after", "it", "was", "merge", "which", "fail", "because", "the", "git", "ref", "that", "PRs", "point", "to", "be", "delete", "after", "merge", "NUMBER", "It", "might", "not", "be", "as", "simple", "as", "this", "but", "one", "can", "hope", "right", "The", "purpose", "of", "this", "change", "be", "to", "allow", "this", "to", "be", "write", "in", "the", "renderer", "javascript", "module", "NUMBER", "export", "NUMBER", "tag", "name", "my", "tag", "name", "That", "would", "result", "in", "the", "template", "be", "named", "to", "whatever", "was", "specified", "NUMBER", "So", "I", "m", "looking", "for", "the", "proper", "location", "to", "place", "the", "renderer", "fixture", "that", "I", "use", "for", "the", "test", "NUMBER", "Should", "it", "just", "go", "in", "test", "fixture", "taglib", "Also", "any", "preferred", "name", "for", "it", "Edit", "It", "seems", "like", "there", "be", "no", "test", "for", "renaming", "tags", "through", "marko", "tag", "NUMBER", "json", "either", "NUMBER", "This", "PR", "would", "likely", "be", "a", "good", "place", "to", "go", "ahead", "and", "add", "that", "test", "as", "well", "NUMBER", "I", "definitely", "still", "think", "it", "has", "value", "NUMBER", "I", "try", "to", "put", "as", "little", "as", "possible", "in", "marko", "taglib", "NUMBER", "json", "or", "any", "marko", "tag", "NUMBER", "json", "NUMBER", "With", "that", "be", "said", "I", "think", "basing", "it", "on", "the", "folder", "name", "that", "it", "s", "inside", "be", "a", "valid", "compromise", "NUMBER", "Ultimately", "if", "you", "keep", "the", "ability", "to", "set", "it", "in", "the", "marko", "tag", "I", "think", "this", "PR", "should", "happen", "NUMBER", "If", "not", "then", "it", "likely", "shouldn", "t", "NUMBER", "It", "s", "just", "nice", "to", "me", "javascript", "export", "default", "defineComponent", "name", "gh", "notification", "template", "NUMBER", "Sounds", "good", "NUMBER", "The", "below", "line", "be", "not", "work", "in", "marko", "NUMBER", "and", "I", "have", "test", "the", "document", "NUMBER", "append", "in", "some", "other", "pages", "and", "It", "be", "work", "fine", "NUMBER", "I", "think", "Marko", "interrupt", "this", "append", "method", "NUMBER", "Kindly", "let", "me", "know", "If", "you", "have", "any", "idea", "about", "this", "issue", "NUMBER", "Testing", "append", "method", "javascript", "document", "NUMBER", "append", "TAG", "alert", "TAG", "In", "js", "code", "javascript", "document", "NUMBER", "append", "response", "NUMBER", "inlineJs", "The", "below", "function", "loads", "the", "inline", "js", "in", "the", "page", "and", "it", "be", "wrapped", "with", "script", "tag", "NUMBER", "The", "below", "code", "be", "inside", "widget", "NUMBER", "js", "file", "NUMBER", "javascript", "loadInlineJs", "function", "response", "if", "response", "response", "NUMBER", "inlineJs", "document", "NUMBER", "append", "response", "NUMBER", "inlineJs", "eg", "javascript", "TAG", "function", "TAG", "It", "was", "work", "fine", "with", "marko", "NUMBER", "and", "It", "be", "not", "work", "with", "marko", "NUMBER", "image", "LINK", "NUMBER", "a", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "b", "NUMBER", "a", "NUMBER", "a", "NUMBER", "ca", "NUMBER", "png", "I", "want", "to", "use", "custom", "images", "in", "marko", "template", "NUMBER", "But", "not", "able", "to", "find", "any", "documentation", "relate", "this", "NUMBER", "Use", "just", "regular", "html", "tags", "TAG", "That", "s", "great", "and", "totally", "makes", "sense", "for", "local", "images", "NUMBER", "On", "a", "side", "note", "for", "lasso", "image", "Would", "be", "also", "great", "if", "it", "would", "deliver", "webp", "images", "if", "the", "browser", "support", "it", "NUMBER", "Conversion", "might", "be", "too", "expensive", "NUMBER", "just", "an", "idea", "NUMBER", "LINK", "globals_require_extensions", "Given", "that", "this", "method", "be", "deprecate", "we", "might", "want", "to", "look", "into", "requiring", "NUMBER", "marko", "file", "differently", "NUMBER", "Maybe", "by", "handle", "compilation", "separately", "and", "then", "require", "template", "NUMBER", "marko", "NUMBER", "js", "instead", "Hi", "I", "know", "that", "Marko", "avoids", "evil", "global", "variables", "and", "global", "helpers", "but", "I", "think", "I", "have", "a", "situation", "where", "they", "could", "be", "useful", "I", "m", "use", "Marko", "in", "a", "Koa", "app", "NUMBER", "This", "app", "uses", "koa", "locale", "which", "provides", "two", "methods", "this", "NUMBER", "__", "key", "which", "looks", "for", "the", "translated", "text", "by", "key", "and", "this", "NUMBER", "__getLocale", "which", "returns", "the", "selected", "language", "from", "URL", "cookie", "HTTP", "header", "sub", "domain", "etc", "NUMBER", "So", "I", "have", "a", "layout", "like", "this", "one", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "out", "NUMBER", "global", "NUMBER", "title", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "With", "a", "view", "like", "TAG", "TAG", "TAG", "out", "NUMBER", "global", "NUMBER", "__", "Welcome", "TAG", "TAG", "TAG", "And", "I", "use", "them", "as", "follow", "this", "NUMBER", "response", "NUMBER", "body", "require", "NUMBER", "template", "index", "NUMBER", "marko", "NUMBER", "renderSync", "global", "__", "this", "NUMBER", "__", "NUMBER", "bind", "this", "__getLocale", "this", "NUMBER", "__getLocale", "NUMBER", "bind", "this", "title", "this", "NUMBER", "__", "Welcome", "Of", "course", "I", "don", "t", "want", "to", "pass", "this", "NUMBER", "__", "and", "this", "NUMBER", "__getLocale", "in", "every", "router", "so", "I", "m", "wondering", "if", "there", "be", "a", "better", "way", "to", "accomplish", "this", "NUMBER", "Currently", "I", "m", "use", "NUMBER", "renderSync", "just", "because", "I", "m", "learning", "Marko", "NUMBER", "I", "plan", "to", "start", "rendering", "to", "an", "HTTP", "response", "directly", "NUMBER", "In", "any", "case", "I", "think", "my", "problem", "be", "that", "koa", "locale", "do", "its", "work", "automatically", "NUMBER", "In", "the", "first", "case", "if", "I", "understand", "well", "you", "pass", "the", "complete", "output", "to", "a", "helper", "that", "replaces", "some", "text", "with", "its", "translated", "version", "NUMBER", "As", "far", "as", "I", "know", "I", "can", "t", "do", "that", "because", "__", "key", "only", "receives", "the", "key", "to", "be", "replaced", "NUMBER", "In", "the", "second", "case", "you", "be", "referring", "to", "require", "a", "JavaScript", "module", "aren", "t", "you", "TAG", "The", "problem", "with", "that", "be", "that", "koa", "locale", "receives", "the", "app", "instance", "as", "an", "argument", "and", "I", "don", "t", "see", "a", "way", "to", "do", "that", "inside", "a", "NUMBER", "marko", "file", "NUMBER", "That", "s", "why", "I", "was", "wondering", "if", "there", "s", "be", "a", "a", "way", "to", "pass", "helpers", "to", "the", "compiled", "__helpers", "object", "maybe", "before", "calling", "NUMBER", "install", "NUMBER", "patrick", "steele", "idem", "thanks", "for", "the", "transformer", "example", "Hi", "again", "patrick", "steele", "idem", "Thanks", "for", "your", "example", "it", "makes", "things", "clearer", "but", "you", "be", "still", "passing", "i", "NUMBER", "n", "to", "global", "every", "time", "you", "render", "a", "template", "and", "that", "s", "why", "I", "m", "trying", "to", "avoid", "because", "I", "m", "pretty", "sure", "I", "will", "do", "that", "everywhere", "NUMBER", "Anyway", "I", "think", "it", "s", "just", "a", "minor", "drawback", "NUMBER", "Here", "must", "be", "some", "middleware", "for", "koa", "NUMBER", "Some", "thing", "like", "this", "LINK", "For", "a", "global", "access", "to", "this", "NUMBER", "ate", "NUMBER", "Any", "use", "for", "every", "global", "dynamic", "stuff", "like", "configurable", "menus", "rubricas", "categories", "etc", "patrick", "steele", "idem", "I", "like", "your", "proposal", "of", "i", "NUMBER", "n", "var", "so", "I", "tried", "to", "move", "it", "into", "my", "tags", "dir", "without", "success", "Error", "Error", "while", "handle", "properties", "for", "app", "src", "marko", "taglib", "NUMBER", "json", "Error", "while", "applying", "option", "of", "tags", "dir", "NUMBER", "Cause", "Error", "Invalid", "tag", "file", "app", "src", "components", "i", "NUMBER", "n", "var", "marko", "tag", "NUMBER", "json", "NUMBER", "Neither", "a", "renderer", "or", "a", "template", "was", "find", "for", "tag", "NUMBER", "marko", "tag", "NUMBER", "json", "name", "identifier", "transformer", "NUMBER", "transformer", "NUMBER", "js", "This", "be", "the", "same", "definition", "here", "LINK", "js", "samples", "marko", "koa", "i", "NUMBER", "n", "blob", "master", "src", "marko", "taglib", "NUMBER", "json", "L", "NUMBER", "so", "shouldn", "t", "it", "work", "the", "same", "Hi", "patrick", "steele", "idem", "NUMBER", "Sorry", "for", "the", "delay", "and", "thanks", "for", "the", "input", "NUMBER", "Just", "for", "future", "reference", "in", "case", "someone", "has", "the", "same", "doubt", "In", "the", "end", "I", "followed", "Globik", "s", "advice", "NUMBER", "I", "have", "developed", "two", "projects", "use", "Koa", "and", "Marko", "in", "this", "way", "and", "I", "m", "pretty", "happy", "with", "the", "result", "NUMBER", "This", "should", "resolve", "issue", "with", "circular", "dependency", "rendering", "NUMBER", "Previously", "whenever", "this", "function", "was", "call", "it", "would", "throw", "an", "error", "because", "typeof", "renderFunc", "was", "always", "undefined", "NUMBER", "With", "this", "fix", "rendererFunc", "will", "in", "valid", "cases", "be", "a", "function", "NUMBER", "How", "do", "you", "envision", "this", "I", "assume", "it", "would", "automatically", "NUMBER", "transform", "if", "else", "for", "syntax", "in", "all", "file", "NUMBER", "transform", "syntax", "for", "all", "custom", "tags", "NUMBER", "remove", "attribute", "references", "in", "marko", "taglib", "NUMBER", "json", "file", "NUMBER", "delete", "marko", "tag", "NUMBER", "json", "file", "Anything", "else", "Please", "review", "and", "merge", "Test", "pass", "locally", "Alright", "will", "do", "Whenever", "I", "use", "expected", "and", "actual", "I", "always", "end", "up", "in", "this", "strange", "situation", "sh", "NUMBER", "render", "unless", "else", "Unexpected", "output", "for", "Users", "kristianmandrup", "repos", "markoa", "marko", "test", "fixture", "template", "unless", "else", "template", "NUMBER", "marko", "EXPECTED", "Users", "kristianmandrup", "repos", "markoa", "marko", "test", "fixture", "template", "unless", "else", "expected", "NUMBER", "html", "B", "A", "A", "TAG", "A", "TAG", "ACTUAL", "Users", "kristianmandrup", "repos", "markoa", "marko", "test", "fixture", "template", "unless", "else", "actual", "NUMBER", "html", "B", "A", "A", "TAG", "A", "TAG", "I", "even", "copy", "paste", "the", "actual", "into", "expected", "and", "still", "the", "same", "error", "Must", "be", "a", "whitespace", "issue", "I", "also", "get", "this", "warning", "sh", "if", "else", "WARN", "marko", "runtime", "helpers", "data", "NUMBER", "invokeBody", "deprecate", "NUMBER", "Use", "data", "NUMBER", "body", "instead", "NUMBER", "Error", "at", "Object", "NUMBER", "data", "NUMBER", "invokeBody", "Users", "kristianmandrup", "repos", "markoa", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "include", "From", "include", "nested", "content", "NUMBER", "marko", "TAG", "data", "NUMBER", "invokeBody", "TAG", "TAG", "Yup", "exactly", "Using", "Atom", "haha", "P", "Thanks", "for", "the", "tip", "NUMBER", "Now", "it", "works", "I", "recommend", "you", "enhance", "your", "string", "compare", "to", "trim", "trail", "whitespace", "or", "at", "least", "have", "it", "as", "an", "option", "NUMBER", "Really", "hmm", "NUMBER", "that", "was", "not", "my", "intention", "NUMBER", "Guess", "I", "made", "a", "Markdown", "error", "of", "some", "sort", "NUMBER", "I", "only", "inserted", "a", "few", "more", "examples", "in", "the", "relevant", "section", "NUMBER", "I", "ll", "fix", "that", "shortly", "NUMBER", "I", "just", "review", "my", "change", "and", "revert", "what", "I", "think", "you", "call", "stylistic", "change", "NUMBER", "If", "you", "be", "still", "not", "happy", "please", "edit", "as", "you", "like", "NUMBER", "I", "tried", "my", "best", "to", "improve", "the", "docs", "while", "keep", "with", "the", "original", "intent", "and", "styling", "NUMBER", "Marko", "koa", "currently", "misbehaves", "due", "to", "error", "throw", "during", "template", "stream", "rendering", "be", "uncaught", "leading", "to", "hard", "crashes", "of", "node", "NUMBER", "The", "sample", "code", "below", "illustrates", "a", "very", "simplied", "setup", "and", "this", "patch", "ensures", "that", "error", "during", "template", "rendering", "be", "indeed", "pick", "up", "by", "the", "koa", "error", "handle", "system", "NUMBER", "Simplified", "koa", "usage", "app", "NUMBER", "use", "function", "this", "NUMBER", "type", "text", "plain", "this", "NUMBER", "body", "require", "template", "NUMBER", "marko", "NUMBER", "ream", "NUMBER", "app", "NUMBER", "on", "error", "function", "err", "log", "NUMBER", "error", "err", "Thanks", "for", "an", "awesome", "piece", "of", "work", "NUMBER", "Marko", "koa", "be", "my", "bread", "and", "butter", "NUMBER", "patrick", "steele", "idem", "I", "get", "your", "points", "regard", "V", "NUMBER", "The", "more", "idiomatic", "use", "of", "render", "works", "well", "with", "Koa", "too", "as", "in", "app", "NUMBER", "use", "function", "template", "NUMBER", "render", "NUMBER", "this", "NUMBER", "res", "A", "simple", "change", "for", "me", "and", "I", "accept", "that", "as", "an", "answer", "I", "think", "I", "have", "spotted", "an", "edge", "case", "here", "NUMBER", "Everything", "that", "goes", "down", "to", "Async", "Writer", "async", "fragment", "seems", "to", "work", "super", "nice", "It", "s", "just", "the", "initial", "synchronous", "invocation", "that", "needs", "some", "loving", "care", "NUMBER", "I", "m", "still", "rather", "dependent", "on", "streams", "in", "some", "peculiar", "situations", "so", "I", "will", "try", "to", "make", "a", "better", "PR", "respecting", "performance", "and", "also", "covering", "asynchronous", "situations", "NUMBER", "Feel", "free", "to", "discard", "this", "PR", "Would", "help", "clean", "up", "conditionals", "a", "lot", "if", "loop", "NUMBER", "isLast", "be", "kinda", "ugly", "and", "hard", "to", "notice", "those", "exclamation", "marks", "NUMBER", "jade", "for", "each", "item", "in", "data", "NUMBER", "list", "status", "var", "loop", "if", "data", "NUMBER", "list", "ui", "button", "attrs", "item", "div", "class", "or", "if", "data", "NUMBER", "or", "data", "text", "data", "NUMBER", "or", "unless", "loop", "NUMBER", "isLast", "My", "PR", "has", "be", "merge", "Thanks", "guys", "I", "was", "wondering", "if", "it", "be", "possible", "to", "load", "custom", "function", "or", "even", "set", "one", "or", "more", "globals", "such", "as", "lodash", "or", "underscore", "before", "run", "all", "the", "custom", "tags", "in", "order", "to", "make", "these", "globals", "available", "for", "tags", "to", "use", "if", "needed", "load", "once", "use", "anywhere", "NUMBER", "Must", "be", "a", "very", "common", "use", "case", "Thanks", "NUMBER", "In", "my", "case", "I", "would", "like", "the", "following", "to", "be", "generally", "available", "for", "many", "of", "my", "tags", "js", "String", "NUMBER", "prototype", "NUMBER", "capitalizeFirst", "function", "return", "this", "NUMBER", "charAt", "NUMBER", "NUMBER", "toUpperCase", "this", "NUMBER", "slice", "NUMBER", "Hi", "Patrick", "thanks", "for", "your", "response", "NUMBER", "I", "was", "just", "curious", "if", "there", "was", "a", "way", "NUMBER", "Kind", "of", "like", "a", "base", "class", "or", "decorator", "for", "all", "renderers", "to", "leverage", "common", "functionality", "NUMBER", "So", "far", "I", "ve", "be", "use", "require", "but", "can", "feel", "like", "duplication", "and", "I", "like", "to", "keep", "my", "prod", "code", "super", "slim", "and", "DRY", "NUMBER", "I", "guess", "I", "will", "just", "introduce", "a", "compile", "step", "of", "some", "sort", "to", "prepend", "or", "inject", "whatever", "code", "I", "want", "according", "to", "some", "global", "rules", "NUMBER", "Per", "email", "thread", "We", "probably", "need", "to", "look", "into", "a", "better", "way", "to", "prevent", "the", "same", "taglib", "from", "be", "loaded", "multiple", "times", "but", "currently", "the", "Marko", "compiler", "walks", "up", "the", "directory", "tree", "to", "find", "taglibs", "and", "will", "happily", "load", "the", "same", "taglib", "multiple", "times", "if", "it", "be", "find", "multiple", "times", "in", "the", "search", "path", "NUMBER", "The", "marko", "widgets", "taglib", "be", "loaded", "multiple", "times", "be", "cause", "the", "same", "template", "to", "be", "transformed", "multiple", "times", "and", "that", "be", "resulting", "in", "unexpect", "behavior", "NUMBER", "De", "duping", "taglibs", "by", "module", "name", "would", "solve", "the", "problem", "NUMBER", "NUMBER", "facing", "the", "same", "issue", "Would", "really", "like", "if", "we", "had", "the", "ability", "to", "use", "the", "index", "on", "iteration", "somehow", "NUMBER", "Here", "use", "the", "imaginary", "index", "pos", "for", "attribute", "default", "index", "index", "jade", "ui", "grid", "ui", "inverted", "ui", "row", "ui", "green", "list", "data", "NUMBER", "users", "NUMBER", "header", "for", "each", "item", "in", "data", "NUMBER", "users", "NUMBER", "list", "index", "pos", "ui", "row", "ui", "silver", "attrs", "item", "if", "pos", "NUMBER", "NUMBER", "ui", "row", "ui", "blue", "attrs", "item", "if", "pos", "NUMBER", "NUMBER", "Sweet", "Learning", "every", "day", "NUMBER", "to", "allow", "for", "dynamic", "runtime", "tag", "name", "transformation", "This", "will", "enable", "my", "LINK", "dynamic", "tag", "to", "work", "And", "loads", "of", "other", "powerful", "use", "cases", "NUMBER", "Awesome", "I", "sure", "don", "t", "mind", "Would", "it", "also", "be", "possible", "to", "dynamically", "decide", "which", "component", "function", "I", "assume", "to", "call", "use", "a", "similar", "approach", "BTW", "On", "the", "PR", "all", "the", "test", "pass", "on", "my", "local", "machine", "run", "mocha", "so", "I", "was", "surprised", "to", "see", "it", "fail", "on", "Travis", "CI", "NUMBER", "Exactly", "what", "I", "was", "thinking", "In", "my", "scenario", "I", "would", "have", "an", "incoming", "list", "with", "varying", "types", "of", "data", "ie", "NUMBER", "some", "attributes", "undefined", "NUMBER", "Depending", "on", "the", "data", "I", "what", "to", "render", "an", "appropriate", "tag", "such", "as", "icon", "item", "if", "it", "has", "an", "icon", "link", "item", "if", "there", "be", "a", "link", "and", "so", "on", "NUMBER", "Of", "course", "I", "could", "have", "a", "catch", "all", "item", "but", "it", "would", "have", "to", "contain", "loads", "of", "conditional", "logic", "NUMBER", "the", "dynamic", "tag", "would", "come", "in", "very", "handy", "to", "make", "for", "a", "more", "elegant", "solution", "Cheers", "An", "example", "Here", "I", "decide", "whether", "to", "render", "a", "checkbox", "as", "a", "toggle", "slider", "or", "a", "normal", "checkbox", "NUMBER", "Not", "very", "elegant", "but", "gets", "the", "work", "do", "P", "jade", "ui", "toggle", "attrs", "data", "if", "data", "NUMBER", "toggle", "ui", "slider", "attrs", "data", "if", "data", "NUMBER", "slider", "div", "class", "data", "NUMBER", "field", "field", "body", "only", "if", "data", "NUMBER", "field", "if", "data", "NUMBER", "default", "div", "class", "ui", "data", "NUMBER", "ui", "checkbox", "body", "only", "if", "data", "NUMBER", "ui", "input", "NUMBER", "hidden", "type", "checkbox", "name", "data", "NUMBER", "name", "checked", "data", "NUMBER", "checked", "tabindex", "data", "NUMBER", "tab", "label", "if", "data", "NUMBER", "label", "data", "NUMBER", "label", "Sweet", "Thanks", "for", "the", "tip", "NUMBER", "Didn", "t", "even", "know", "you", "could", "do", "complex", "conditional", "logic", "inline", "like", "that", "I", "agree", "those", "tasks", "be", "way", "more", "important", "for", "now", "than", "these", "obscure", "bonus", "features", "Good", "job", "Looking", "better", "every", "day", "and", "every", "week", "D", "I", "have", "the", "following", "template", "html", "TAG", "TAG", "item", "NUMBER", "ui", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "with", "the", "following", "data", "js", "ui", "large", "orange", "icon", "user", "label", "kmandrup", "body", "I", "DREAM", "in", "CODE", "ui", "large", "blue", "icon", "user", "label", "isaura", "body", "I", "LOVE", "web", "DESIGN", "It", "correctly", "prints", "large", "orange", "and", "so", "on", "for", "item", "NUMBER", "ui", "but", "for", "TAG", "NUMBER", "Could", "be", "rewritten", "something", "like", "html", "TAG", "Would", "love", "to", "have", "another", "small", "lib", "like", "the", "one", "you", "created", "for", "this", "use", "case", "I", "would", "think", "I", "could", "achieve", "this", "something", "like", "this", "js", "module", "NUMBER", "export", "function", "transform", "node", "compiler", "template", "var", "name", "node", "NUMBER", "getAttribute", "tag", "name", "if", "name", "null", "node", "NUMBER", "removeAttribute", "tag", "name", "var", "tagNode", "this", "NUMBER", "compiler", "NUMBER", "createNode", "name", "node", "NUMBER", "getAttributes", "node", "NUMBER", "parentNode", "NUMBER", "replaceChild", "tagNode", "node", "node", "NUMBER", "forEachChild", "function", "child", "tagNode", "NUMBER", "appendChild", "child", "Fuck", "I", "spent", "all", "morning", "trying", "to", "figure", "out", "how", "to", "evaluate", "an", "expression", "P", "Like", "trying", "to", "find", "a", "needle", "in", "a", "haystack", "NUMBER", "and", "looks", "like", "I", "don", "t", "have", "the", "data", "on", "the", "template", "at", "this", "stage", "I", "think", "the", "replace", "tag", "name", "should", "be", "do", "in", "the", "doGenerateCode", "somehow", "in", "order", "to", "have", "access", "to", "template", "data", "I", "m", "lost", "again", "NUMBER", "I", "get", "this", "If", "only", "I", "could", "substitute", "the", "template", "data", "on", "this", "string", "as", "a", "template", "and", "write", "it", "to", "out", "NUMBER", "TAG", "hello", "world", "TAG", "I", "have", "an", "accordion", "tag", "like", "this", "TAG", "TAG", "When", "I", "use", "it", "like", "html", "TAG", "TAG", "TAG", "TAG", "It", "compiles", "to", "js", "function", "create", "__helpers", "var", "str", "__helpers", "NUMBER", "s", "empty", "__helpers", "NUMBER", "e", "notEmpty", "__helpers", "NUMBER", "ne", "escapeXmlAttr", "__helpers", "NUMBER", "xa", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "TAG", "TAG", "module", "NUMBER", "export", "require", "marko", "NUMBER", "c", "__filename", "NUMBER", "c", "create", "and", "so", "renders", "TAG", "TAG", "I", "would", "have", "thought", "the", "compiler", "would", "use", "w", "body", "attribute", "to", "understand", "that", "the", "internal", "body", "tags", "of", "the", "accordion", "tag", "should", "be", "inserted", "as", "children", "to", "the", "container", "tag", "to", "build", "up", "the", "accordion", "js", "accordion", "start", "tag", "if", "input", "NUMBER", "renderBody", "input", "NUMBER", "renderBody", "out", "accordion", "end", "tag", "oh", "I", "thought", "w", "bind", "was", "only", "required", "for", "widgets", "This", "be", "just", "a", "custom", "tag", "With", "w", "bind", "I", "get", "js", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "TAG", "TAG", "So", "this", "only", "works", "for", "widgets", "then", "why", "not", "enable", "w", "body", "for", "tags", "why", "have", "two", "different", "ways", "of", "achieving", "the", "same", "Great", "it", "works", "But", "then", "the", "marko", "docs", "need", "to", "be", "update", "to", "reflect", "this", "NUMBER", "LINK", "js", "marko", "tag", "renderer", "Why", "not", "make", "some", "kind", "of", "convenience", "attribute", "or", "tag", "like", "w", "body", "for", "this", "common", "use", "case", "at", "least", "TAG", "Fx", "TAG", "which", "simply", "calls", "TAG", "Trying", "to", "patch", "this", "fix", "in", "marko", "core", "tag", "transformer", "NUMBER", "js", "js", "var", "BodyNode", "require", "NUMBER", "BodyNode", "NUMBER", "tag", "body", "function", "attr", "node", "console", "NUMBER", "log", "tag", "body", "attr", "var", "bodyNode", "this", "NUMBER", "compiler", "NUMBER", "createNode", "BodyNode", "renderBody", "true", "pos", "node", "NUMBER", "getPosition", "node", "NUMBER", "parentNode", "NUMBER", "replaceChild", "bodyNode", "node", "bodyNode", "NUMBER", "appendChild", "node", "BodyNode", "NUMBER", "js", "js", "use", "strict", "function", "BodyNode", "props", "BodyNode", "NUMBER", "super", "NUMBER", "call", "this", "tag", "body", "if", "props", "this", "NUMBER", "setProperties", "props", "BodyNode", "NUMBER", "prototype", "doGenerateCode", "function", "template", "template", "NUMBER", "atement", "NUMBER", "indent", "function", "this", "NUMBER", "generateCodeForChildren", "template", "this", "NUMBER", "line", "module", "NUMBER", "export", "BodyNode", "accordion", "tag", "NUMBER", "marko", "html", "TAG", "TAG", "accordion", "tag", "NUMBER", "js", "js", "var", "template", "require", "NUMBER", "accordion", "tag", "NUMBER", "marko", "export", "NUMBER", "renderer", "function", "input", "out", "console", "NUMBER", "log", "accordion", "input", "input", "template", "NUMBER", "render", "input", "out", "accordion", "tag", "NUMBER", "json", "js", "renderer", "NUMBER", "accordion", "tag", "NUMBER", "js", "marko", "taglib", "NUMBER", "json", "json", "NUMBER", "test", "accordion", "taglib", "accordion", "tag", "NUMBER", "json", "html", "TAG", "TAG", "I", "m", "your", "Buddy", "TAG", "TAG", "What", "be", "I", "miss", "I", "really", "don", "t", "like", "the", "idea", "of", "having", "to", "pollute", "my", "tags", "with", "TAG", "I", "m", "your", "Buddy", "TAG", "So", "I", "guess", "I", "just", "need", "to", "make", "the", "inner", "body", "output", "function", "self", "calling", "And", "I", "even", "try", "this", "trying", "to", "simply", "wrap", "the", "InvokeNode", "invocation", "directly", "NUMBER", "js", "var", "InvokeNode", "require", "NUMBER", "InvokeNode", "function", "BodyNode", "props", "console", "NUMBER", "log", "BodyNode", "props", "return", "InvokeNode", "function", "data", "NUMBER", "renderBody", "out", "if", "data", "NUMBER", "renderBody", "module", "NUMBER", "export", "BodyNode", "Yeah", "I", "know", "but", "still", "NUMBER", "I", "m", "just", "trying", "to", "understand", "some", "of", "the", "marko", "internals", "NUMBER", "Why", "won", "t", "this", "work", "js", "use", "strict", "var", "InvokeNode", "require", "NUMBER", "InvokeNode", "function", "BodyNode", "props", "console", "NUMBER", "log", "BodyNode", "props", "InvokeNode", "props", "module", "NUMBER", "export", "BodyNode", "Looks", "like", "a", "pretty", "logical", "way", "to", "wrap", "TAG", "tag", "to", "me", "NUMBER", "js", "tag", "body", "function", "attr", "node", "var", "bodyNode", "this", "NUMBER", "compiler", "NUMBER", "createNode", "BodyNode", "function", "data", "NUMBER", "renderBody", "out", "if", "data", "NUMBER", "renderBody", "pos", "node", "NUMBER", "getPosition", "console", "NUMBER", "log", "bodyNode", "bodyNode", "node", "NUMBER", "parentNode", "NUMBER", "replaceChild", "bodyNode", "node", "bodyNode", "NUMBER", "appendChild", "node", "Thanks", "I", "give", "up", "for", "now", "NUMBER", "tried", "all", "the", "ways", "I", "could", "think", "of", "NUMBER", "Haha", "As", "always", "when", "I", "finally", "gave", "up", "a", "saw", "the", "light", "and", "now", "I", "get", "it", "work", "in", "elegant", "fashion", "exactly", "like", "wanted", "to", "Pure", "and", "simple", "js", "tag", "body", "function", "attr", "node", "node", "NUMBER", "setAttribute", "renderBody", "true", "false", "var", "invokeNode", "this", "NUMBER", "compiler", "NUMBER", "createNode", "InvokeNode", "function", "data", "NUMBER", "renderBody", "out", "if", "data", "NUMBER", "renderBody", "pos", "node", "NUMBER", "getPosition", "node", "NUMBER", "appendChild", "invokeNode", "My", "only", "problem", "be", "the", "test", "sh", "NUMBER", "fail", "NUMBER", "render", "tag", "body", "Unexpected", "output", "for", "Users", "kristianmandrup", "repos", "markoa", "marko", "test", "fixture", "template", "tag", "body", "template", "NUMBER", "marko", "EXPECTED", "Users", "kristianmandrup", "repos", "markoa", "marko", "test", "fixture", "template", "tag", "body", "expected", "NUMBER", "html", "TAG", "TAG", "I", "m", "your", "Buddy", "TAG", "TAG", "ACTUAL", "Users", "kristianmandrup", "repos", "markoa", "marko", "test", "fixture", "template", "tag", "body", "actual", "NUMBER", "html", "TAG", "TAG", "I", "m", "your", "Buddy", "TAG", "TAG", "Error", "Unexpected", "output", "for", "test", "fixture", "template", "tag", "body", "template", "NUMBER", "marko", "EXPECTED", "test", "fixture", "template", "tag", "body", "expected", "NUMBER", "html", "TAG", "TAG", "I", "m", "your", "Buddy", "TAG", "TAG", "ACTUAL", "test", "fixture", "template", "tag", "body", "actual", "NUMBER", "html", "TAG", "TAG", "I", "m", "your", "Buddy", "TAG", "TAG", "at", "EventEmitter", "NUMBER", "TAG", "test", "util", "NUMBER", "js", "NUMBER", "NUMBER", "at", "testRender", "test", "util", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Context", "NUMBER", "TAG", "test", "util", "NUMBER", "js", "NUMBER", "NUMBER", "Very", "strange", "I", "m", "write", "a", "huge", "set", "of", "taglibs", "to", "wrap", "all", "of", "Semantic", "UI", "NUMBER", "Problem", "be", "that", "if", "I", "when", "make", "any", "mistake", "no", "taglibs", "seem", "be", "loaded", "and", "no", "error", "be", "shown", "in", "the", "console", "either", "NUMBER", "I", "m", "trying", "to", "heavily", "leverage", "taglib", "imports", "js", "tags", "dir", "NUMBER", "taglib", "imports", "NUMBER", "list", "marko", "taglib", "NUMBER", "json", "In", "my", "real", "scenario", "there", "would", "be", "NUMBER", "taglibs", "imported", "NUMBER", "Is", "there", "a", "way", "to", "turn", "on", "some", "kind", "of", "debugging", "logging", "of", "how", "marko", "resolve", "the", "taglibs", "and", "where", "it", "gives", "up", "This", "be", "becoming", "a", "real", "PAIN", "to", "me", "Thanks", "I", "tried", "cloning", "marko", "npm", "link", "it", "and", "then", "inserting", "debug", "statements", "NUMBER", "sh", "Marko", "appplication", "ready", "on", "port", "NUMBER", "browser", "refresh", "Server", "be", "ready", "NUMBER", "Watching", "file", "for", "change", "NUMBER", "browser", "refresh", "Triggering", "refresh", "of", "client", "pages", "NUMBER", "browser", "refresh", "Refresh", "triggered", "page", "state", "title", "Repo", "manager", "header", "Repo", "manager", "content", "Hello", "lists", "users", "Object", "Object", "template", "data", "title", "Repo", "manager", "header", "Repo", "manager", "content", "Hello", "lists", "users", "Object", "Object", "rendering", "template", "Users", "kristianmandrup", "repos", "test", "NUMBER", "repo", "manager", "v", "NUMBER", "apps", "index", "page", "index", "NUMBER", "marko", "state", "title", "Repo", "manager", "header", "Repo", "manager", "content", "Hello", "lists", "users", "Object", "Object", "global", "menus", "main", "Object", "session", "Object", "lists", "repos", "Object", "teams", "Object", "users", "Object", "feeds", "activity", "Object", "appName", "Repo", "Manager", "v", "NUMBER", "loadTagLib", "Users", "kristianmandrup", "repos", "markoa", "marko", "taglibs", "core", "marko", "taglib", "NUMBER", "json", "loadTagLib", "Users", "kristianmandrup", "repos", "markoa", "marko", "taglibs", "html", "marko", "taglib", "NUMBER", "json", "loadTagLib", "Users", "kristianmandrup", "repos", "markoa", "marko", "taglibs", "caching", "marko", "taglib", "NUMBER", "json", "loadTagLib", "Users", "kristianmandrup", "repos", "markoa", "marko", "node_modules", "marko", "layout", "marko", "taglib", "NUMBER", "json", "loadTagLib", "Users", "kristianmandrup", "repos", "markoa", "marko", "node_modules", "marko", "async", "marko", "taglib", "NUMBER", "json", "But", "my", "own", "custom", "taglibs", "be", "NEVER", "loaded", "it", "seems", "js", "tagsDir", "function", "dir", "The", "tags", "dir", "property", "be", "use", "to", "support", "scanning", "of", "a", "directory", "to", "discover", "custom", "tags", "NUMBER", "Scanning", "a", "directory", "be", "a", "much", "simpler", "way", "for", "a", "developer", "to", "create", "custom", "tags", "NUMBER", "Only", "one", "tag", "be", "allow", "per", "directory", "and", "the", "directory", "name", "corresponds", "to", "the", "tag", "name", "NUMBER", "We", "only", "search", "for", "directories", "one", "level", "deep", "NUMBER", "var", "taglib", "this", "NUMBER", "taglib", "var", "path", "this", "NUMBER", "path", "var", "dirname", "this", "NUMBER", "dirname", "TAGLIB", "DIR", "console", "NUMBER", "log", "tagsDir", "dir", "if", "Array", "NUMBER", "isArray", "dir", "for", "var", "i", "NUMBER", "i", "TAG", "TAG", "use", "to", "determine", "the", "nested", "external", "content", "that", "be", "to", "be", "injected", "into", "the", "body", "of", "the", "UI", "component", "to", "support", "transclusion", "NUMBER", "The", "actual", "injection", "point", "be", "determined", "by", "the", "w", "body", "attribute", "NUMBER", "Can", "I", "use", "this", "for", "regular", "tags", "as", "well", "If", "so", "please", "document", "use", "in", "this", "project", "as", "well", "What", "be", "a", "valid", "attribute", "value", "for", "w", "body", "if", "one", "must", "be", "provide", "for", "whatever", "reason", "Answer", "from", "LINK", "js", "marko", "widgets", "If", "it", "helps", "an", "attribute", "with", "no", "value", "be", "equivalent", "to", "an", "attribute", "with", "a", "value", "of", "an", "empty", "string", "TAG", "TAG", "TAG", "TAG", "The", "purpose", "of", "the", "w", "body", "attribute", "be", "to", "support", "transclusion", "NUMBER", "If", "the", "user", "of", "a", "custom", "tag", "nested", "content", "inside", "the", "custom", "tag", "then", "that", "content", "will", "get", "injected", "into", "the", "output", "HTML", "relative", "to", "the", "w", "body", "marker", "NUMBER", "In", "addition", "if", "the", "widget", "rerenders", "then", "the", "body", "content", "will", "be", "preserved", "since", "that", "content", "be", "external", "to", "the", "widget", "NUMBER", "For", "example", "below", "be", "the", "usage", "of", "a", "custom", "tag", "with", "nested", "content", "html", "TAG", "This", "be", "nested", "content", "that", "will", "be", "injected", "into", "the", "w", "body", "element", "NUMBER", "TAG", "Yeah", "was", "a", "way", "to", "add", "docs", "via", "a", "FAQ", "entry", "use", "an", "issue", "P", "Please", "make", "a", "note", "in", "tag", "renderer", "section", "that", "the", "w", "body", "attribute", "can", "be", "use", "in", "the", "marko", "template", "for", "the", "same", "effect", "as", "renderBody", "out", "NUMBER", "That", "would", "connect", "the", "dots", "I", "think", "NUMBER", "Thanks", "kristianmandrup", "please", "see", "the", "PR", "if", "it", "fits", "your", "needs", "NUMBER", "Fixes", "LINK", "js", "marko", "widgets", "issue", "NUMBER", "fix", "LINK", "js", "marko", "issue", "NUMBER", "thanks", "NUMBER", "happy", "to", "be", "part", "of", "a", "great", "team", "I", "pass", "an", "array", "of", "the", "form", "js", "label", "my", "label", "icon", "users", "label", "extra", "icon", "feed", "index", "NUMBER", "marko", "html", "TAG", "icon", "list", "NUMBER", "marko", "html", "TAG", "item", "NUMBER", "label", "TAG", "But", "when", "I", "debug", "I", "get", "a", "strange", "entry", "as", "my", "first", "key", "WTF", "list", "items", "Object", "Object", "Looks", "like", "it", "should", "be", "data", "in", "this", "case", "for", "each", "without", "the", "sign", "NUMBER", "Not", "clear", "from", "the", "docs", "IMO", "NUMBER", "html", "TAG", "item", "NUMBER", "label", "TAG", "Now", "we", "get", "an", "error", "about", "some", "strange", "error", "unexpect", "token", "Damn", "Thanks", "I", "figured", "that", "was", "the", "issue", "since", "I", "had", "seen", "a", "brief", "mention", "somewhere", "about", "the", "be", "a", "catch", "all", "in", "your", "docs", "about", "the", "schema", "NUMBER", "But", "wasn", "t", "really", "clear", "that", "not", "declaring", "the", "schema", "value", "would", "cause", "this", "kind", "of", "problem", "NUMBER", "I", "guess", "when", "you", "go", "beyond", "strings", "you", "currently", "have", "to", "specify", "the", "schema", "carefully", "in", "order", "to", "make", "marko", "understand", "NUMBER", "Kinda", "makes", "sense", "NUMBER", "I", "posted", "my", "solution", "suggestion", "for", "proposal", "NUMBER", "which", "would", "make", "it", "awesome", "I", "think", "it", "comes", "down", "to", "a", "miss", "dependency", "or", "something", "but", "would", "be", "nice", "with", "a", "clearer", "error", "message", "than", "this", "the", "marko", "taglib", "NUMBER", "json", "it", "complains", "about", "NUMBER", "json", "tags", "dir", "NUMBER", "_global", "components", "Confusing", "error", "message", "sh", "Error", "Error", "while", "handle", "properties", "for", "home", "isaura", "tecla", "NUMBER", "repo", "manager", "v", "NUMBER", "apps", "marko", "taglib", "NUMBER", "json", "Error", "while", "applying", "option", "of", "tags", "dir", "NUMBER", "Cause", "SyntaxError", "Unexpected", "token", "at", "Object", "NUMBER", "parse", "native", "at", "scanTagsDir", "home", "isaura", "tecla", "NUMBER", "repo", "manager", "v", "NUMBER", "node_modules", "marko", "compiler", "taglibs", "taglib", "loader", "scanTagsDir", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "TaglibHandlers", "NUMBER", "tagsDir", "home", "isaura", "tecla", "NUMBER", "repo", "manager", "v", "NUMBER", "node_modules", "marko", "compiler", "taglibs", "taglib", "loader", "loader", "taglib", "NUMBER", "js", "NUMBER", "NUMBER", "at", "invokeHandlers", "home", "isaura", "tecla", "NUMBER", "repo", "manager", "v", "NUMBER", "node_modules", "marko", "node_modules", "property", "handlers", "lib", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Object", "NUMBER", "export", "NUMBER", "loadTaglib", "home", "isaura", "tecla", "NUMBER", "repo", "manager", "v", "NUMBER", "node_modules", "marko", "compiler", "taglibs", "taglib", "loader", "loader", "taglib", "NUMBER", "js", "NUMBER", "NUMBER", "Awesome", "Gracias", "amigo", "When", "do", "you", "expect", "a", "Marko", "Widgets", "NUMBER", "release", "NUMBER", "wk", "NUMBER", "wks", "more", "It", "keep", "downloading", "the", "file", "NUMBER", "this", "be", "the", "gist", "of", "my", "code", "NUMBER", "js", "use", "strict", "let", "koa", "require", "koa", "let", "app", "koa", "app", "NUMBER", "use", "function", "this", "NUMBER", "body", "require", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "views", "index", "NUMBER", "marko", "NUMBER", "ream", "this", "NUMBER", "type", "type", "html", "app", "NUMBER", "listen", "NUMBER", "Whenever", "I", "navigate", "to", "localhost", "NUMBER", "it", "downloads", "a", "file", "with", "hello", "in", "it", "NUMBER", "I", "have", "no", "idea", "what", "s", "happening", "or", "what", "I", "m", "doing", "wrong", "NUMBER", "views", "index", "NUMBER", "marko", "be", "just", "html", "hello", "right", "now", "NUMBER", "No", "that", "NUMBER", "was", "a", "good", "thought", "but", "unfortunately", "that", "did", "not", "solve", "my", "problem", "NUMBER", "It", "be", "still", "just", "downloading", "the", "file", "NUMBER", "omg", "NUMBER", "I", "hate", "when", "it", "s", "a", "stupid", "error", "like", "this", "NUMBER", "had", "to", "change", "type", "html", "to", "text", "html", "Thanks", "for", "your", "help", "So", "be", "correct", "this", "NUMBER", "type", "html", "Your", "marko", "be", "simple", "enough", "but", "how", "do", "I", "build", "a", "binary", "tree", "with", "marko", "In", "ejs", "template", "I", "can", "just", "like", "so", "use", "pure", "javascript", "write", "helper", "function", "for", "a", "tree", "hierarchy", "inner", "TAG", "TAG", "NUMBER", "But", "with", "marko", "I", "don", "t", "understand", "how", "to", "do", "it", "like", "this", "NUMBER", "Where", "be", "marko", "s", "tutos", "can", "i", "find", "Many", "many", "thanks", "it", "s", "just", "incredible", "Hello", "team", "I", "was", "wondering", "if", "there", "be", "any", "way", "to", "access", "message", "set", "with", "flash", "use", "the", "following", "api", "NUMBER", "javascript", "req", "NUMBER", "flash", "success", "Account", "Created", "Successfully", "be", "it", "flash", "or", "something", "else", "within", "a", "NUMBER", "marko", "file", "Thank", "you", "NUMBER", "Deep", "Thank", "you", "That", "worked", "Now", "I", "have", "a", "debug", "question", "NUMBER", "I", "be", "get", "a", "NUMBER", "error", "when", "trying", "to", "do", "the", "following", "TAG", "TAG", "Not", "Empty", "TAG", "globals_v", "NUMBER", "js", "export", "NUMBER", "isEmpty", "function", "obj", "for", "var", "prop", "in", "obj", "if", "obj", "NUMBER", "hasOwnProperty", "prop", "return", "false", "return", "true", "where", "data", "NUMBER", "message", "be", "be", "pass", "in", "as", "the", "flashMessage", "NUMBER", "isEmpty", "be", "a", "function", "that", "runs", "through", "that", "object", "to", "make", "sure", "nothing", "be", "contained", "in", "that", "data", "NUMBER", "message", "object", "but", "I", "m", "get", "a", "NUMBER", "Any", "ideas", "on", "how", "to", "resolve", "and", "or", "better", "yet", "debug", "that", "NUMBER", "there", "be", "no", "message", "that", "get", "spit", "out", "besides", "the", "NUMBER", "error", "result", "NUMBER", "Thank", "you", "NUMBER", "Deep", "Hello", "Patryk", "will", "comment", "here", "because", "I", "have", "a", "relate", "question", "NUMBER", "What", "if", "the", "flash", "message", "be", "sent", "before", "a", "res", "NUMBER", "redirect", "In", "this", "case", "how", "can", "I", "pass", "the", "parameter", "to", "the", "NUMBER", "marko", "layout", "since", "I", "be", "not", "calling", "the", "render", "method", "The", "utility", "function", "getLength", "for", "loop", "status", "variables", "was", "previously", "undocumented", "NUMBER", "I", "tried", "to", "add", "json", "marko", "extend", "html", "but", "no", "luck", "NUMBER", "I", "m", "planning", "to", "leverage", "Jade", "to", "make", "it", "easier", "faster", "to", "write", "the", "marko", "template", "NUMBER", "So", "far", "I", "ve", "uncovered", "the", "following", "special", "marko", "and", "lasso", "tags", "TAG", "TAG", "renderer", "NUMBER", "hello", "renderer", "name", "string", "Importing", "other", "taglibs", "js", "taglibImports", "function", "imports", "The", "taglib", "imports", "property", "allows", "another", "taglib", "to", "be", "imported", "into", "this", "taglib", "so", "that", "the", "tags", "defined", "in", "the", "imported", "taglib", "will", "be", "part", "of", "this", "taglib", "NUMBER", "NOTE", "If", "a", "taglib", "import", "refers", "to", "a", "package", "NUMBER", "json", "file", "then", "we", "read", "the", "package", "NUMBER", "json", "file", "and", "automatically", "import", "all", "of", "the", "taglibs", "from", "the", "install", "modules", "find", "in", "the", "dependencies", "section", "The", "normal", "way", "importPath", "resolveFrom", "dirname", "dependencyName", "marko", "taglib", "NUMBER", "json", "Trying", "to", "combine", "local", "with", "global", "shared", "taglibs", "js", "tagsDir", "NUMBER", "my", "tags", "taglibImports", "NUMBER", "NUMBER", "package", "NUMBER", "json", "package", "NUMBER", "json", "js", "dependencies", "how", "do", "the", "import", "expect", "to", "find", "taglibs", "from", "external", "module", "what", "be", "the", "conventions", "in", "this", "case", "my", "global", "taglib", "x", "NUMBER", "Another", "proposal", "direct", "require", "why", "traverse", "all", "dependencies", "js", "tagsDir", "NUMBER", "my", "tags", "refers", "to", "a", "package", "in", "my", "package", "NUMBER", "json", "why", "not", "require", "module", "directly", "ie", "NUMBER", "not", "local", "since", "not", "prefixed", "by", "NUMBER", "taglibImports", "my", "global", "taglib", "my", "other", "shared", "taglib", "module", "Hi", "I", "m", "trying", "to", "use", "the", "taglib", "import", "feature", "as", "I", "really", "need", "it", "now", "NUMBER", "I", "think", "I", "understand", "the", "package", "NUMBER", "json", "mechanism", "but", "not", "sure", "about", "the", "else", "part", "line", "NUMBER", "NUMBER", "What", "should", "be", "at", "NUMBER", "_global", "components", "menu", "for", "this", "to", "work", "I", "assume", "resolveFrom", "it", "just", "a", "special", "wrapper", "for", "node", "require", "use", "curImport", "as", "the", "base", "path", "js", "else", "importPath", "resolveFrom", "dirname", "curImport", "taglib", "NUMBER", "addImport", "importPath", "json", "tags", "dir", "NUMBER", "components", "taglib", "imports", "NUMBER", "components", "menu", "NUMBER", "My", "target", "file", "structure", "sh", "components", "my", "comp", "menu", "other", "comp", "I", "get", "it", "must", "be", "NUMBER", "components", "menu", "marko", "taglib", "NUMBER", "json", "however", "why", "not", "assume", "that", "by", "default", "given", "a", "path", "without", "it", "At", "least", "it", "works", "for", "me", "now", "NUMBER", "So", "cool", "i", "make", "layout", "file", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "and", "run", "marko", "this", "be", "result", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "i", "want", "to", "ignore", "the", "tag", "TAG", "the", "Marko", "compiler", "puts", "the", "compiled", "template", "next", "to", "the", "original", "template", "because", "the", "Node", "NUMBER", "js", "module", "loader", "be", "context", "aware", "and", "we", "want", "the", "stack", "traces", "to", "match", "up", "with", "location", "that", "the", "Node", "NUMBER", "js", "module", "loader", "associates", "with", "the", "loaded", "compiled", "template", "fully", "agree", "with", "this", "_", "just", "wanted", "to", "be", "clear", "_", "While", "we", "could", "place", "the", "compiled", "template", "at", "a", "different", "location", "on", "disk", "we", "would", "need", "to", "change", "how", "the", "relative", "require", "paths", "be", "generate", "NUMBER", "I", "have", "not", "looked", "at", "the", "internals", "_", "yet", "_", "but", "in", "theory", "should", "be", "do", "in", "such", "a", "way", "that", "change", "the", "cwd", "or", "root", "would", "be", "sufficient", "NUMBER", "your", "example", "be", "exactly", "what", "I", "m", "interested", "in", "NUMBER", "but", "I", "would", "also", "add", "that", "each", "module", "and", "module", "maintainer", "whether", "internal", "or", "external", "should", "be", "free", "to", "determine", "the", "best", "setup", "for", "that", "module", "NUMBER", "I", "m", "guessing", "your", "basing", "your", "use", "case", "on", "a", "hierarchy", "of", "modules", "use", "within", "one", "system", "but", "the", "moment", "you", "go", "out", "of", "the", "scope", "of", "the", "one", "system", "then", "the", "module", "wouldn", "t", "know", "where", "to", "look", "for", "its", "compiled", "template", "NUMBER", "so", "it", "s", "best", "to", "keep", "the", "separation", "between", "modules", "to", "ensure", "true", "portability", "of", "the", "module", "itself", "NUMBER", "that", "of", "course", "would", "become", "complicated", "if", "you", "re", "doing", "template", "dependencies", "between", "modules", "but", "rather", "than", "solve", "that", "problem", "a", "better", "pattern", "would", "be", "to", "have", "only", "the", "main", "root", "module", "be", "responsible", "for", "compile", "and", "if", "there", "be", "dependant", "module", "template", "they", "be", "simply", "point", "to", "and", "the", "compiled", "output", "be", "stored", "elsewhere", "NUMBER", "example", "for", "this", "module", "the", "package", "maintainer", "chooses", "to", "store", "in", "a", "folder", "NUMBER", "marko", "compiled", "location", "a", "this", "be", "only", "relevant", "when", "that", "module", "be", "use", "on", "its", "own", "NUMBER", "my", "install", "module", "NUMBER", "marko", "compiled", "location", "a", "foo", "template", "NUMBER", "marko", "NUMBER", "js", "bar", "template", "NUMBER", "marko", "NUMBER", "js", "foo", "template", "NUMBER", "marko", "bar", "template", "NUMBER", "marko", "but", "when", "the", "module", "be", "use", "as", "a", "dependency", "of", "another", "system", "the", "dependant", "chooses", "where", "the", "final", "compiled", "file", "should", "live", "my", "app", "NUMBER", "marko", "compiled", "foo", "template", "NUMBER", "marko", "NUMBER", "js", "bar", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "marko", "dependants", "foo", "template", "NUMBER", "marko", "NUMBER", "js", "bar", "template", "NUMBER", "marko", "NUMBER", "js", "foo", "template", "NUMBER", "marko", "bar", "template", "NUMBER", "marko", "node_modules", "my", "install", "module", "foo", "template", "NUMBER", "marko", "bar", "template", "NUMBER", "marko", "again", "not", "sure", "what", "the", "best", "path", "design", "here", "would", "be", "but", "with", "the", "current", "setup", "it", "makes", "it", "very", "noisy", "for", "simple", "usage", "like", "static", "site", "build", "and", "cumbersome", "with", "server", "side", "live", "systems", "especially", "if", "you", "re", "doing", "live", "reloading", "of", "the", "application", "your", "template", "change", "may", "not", "get", "refreshed", "NUMBER", "yes", "indeed", "this", "do", "satisfy", "the", "ask", "here", "NUMBER", "wish", "there", "was", "a", "cleaner", "way", "to", "set", "this", "option", "though", "NUMBER", "I", "have", "to", "play", "around", "with", "it", "more", "first", "NUMBER", "I", "m", "thinking", "this", "should", "be", "do", "on", "the", "main", "include", "js", "var", "marko", "require", "marko", "marko", "NUMBER", "compiler", "NUMBER", "or", "js", "marko", "NUMBER", "compilerConfig", "NUMBER", "etc", "NUMBER", "ahmadnassri", "If", "you", "re", "use", "Express", "JS", "there", "could", "be", "a", "cleaner", "way", "to", "define", "configuration", "with", "an", "API", "similar", "to", "what", "I", "ve", "propose", "in", "NUMBER", "If", "there", "was", "a", "Marko", "Express", "plugin", "when", "initializing", "the", "engine", "you", "could", "pass", "configuration", "options", "to", "Marko", "similar", "to", "how", "defined", "them", "above", "NUMBER", "javascript", "var", "Marko", "require", "marko", "express", "example", "lib", "name", "app", "NUMBER", "engine", "marko", "Marko", "writeToDisk", "false", "app", "NUMBER", "set", "view", "engine", "marko", "not", "use", "express", "for", "this", "particular", "project", "It", "s", "a", "static", "site", "builder", "no", "server", "required", "though", "that", "example", "makes", "sense", "NUMBER", "I", "be", "creating", "grunt", "marko", "plugin", "LINK", "ax", "marko", "i", "have", "question", "NUMBER", "can", "i", "change", "marko", "taglib", "NUMBER", "json", "path", "i", "know", "marko", "taglib", "NUMBER", "json", "be", "same", "template", "path", "i", "m", "sorry", "patrick", "steele", "idem", "can", "be", "change", "to", "another", "location", "not", "the", "position", "determined", "the", "location", "of", "a", "file", "There", "be", "no", "big", "problem", "NUMBER", "It", "can", "be", "use", "now", "as", "NUMBER", "However", "if", "you", "want", "to", "place", "the", "resources", "and", "content", "such", "as", "preferences", "for", "java", "project", "to", "another", "space", "may", "become", "a", "problem", "NUMBER", "Also", "in", "the", "case", "of", "the", "I", "as", "follows", "when", "you", "try", "to", "be", "able", "to", "set", "the", "location", "of", "each", "of", "the", "environment", "file", "it", "seems", "to", "be", "a", "problem", "NUMBER", "LINK", "ax", "marko", "overview", "js", "grunt", "NUMBER", "initConfig", "ax_marko", "default", "options", "preserveWhitespace", "true", "expected", "output", "whitespace", "file", "src", "test", "fixture", "NUMBER", "html", "global_data", "append", "data", "layout_path", "NUMBER", "layouts", "basic", "NUMBER", "marko", "src", "relative", "path", "lang", "ko", "test", "lang", "ko", "NUMBER", "json", "en", "test", "lang", "en", "NUMBER", "json", "dest", "test", "expected", "output_extension", "html", "Have", "met", "in", "such", "highly", "level", "project", "be", "sincerely", "happy", "NUMBER", "I", "be", "JSUI", "developers", "NUMBER", "Opportunity", "I", "want", "to", "make", "even", "UI", "in", "which", "the", "marko", "to", "base", "if", "NUMBER", "i", "try", "js", "tmpl", "NUMBER", "render", "data", "function", "err", "output", "if", "err", "grunt", "NUMBER", "file", "NUMBER", "write", "dest", "output", "else", "grunt", "NUMBER", "log", "NUMBER", "error", "err", "output", "be", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "My", "Page", "TAG", "Hello", "World", "TAG", "TAG", "red", "TAG", "TAG", "green", "TAG", "TAG", "blue", "TAG", "TAG", "TAG", "TAG", "Is", "there", "a", "way", "get", "output", "with", "n", "plz", "help", "me", "and", "i", "m", "sorry", "i", "can", "t", "speak", "english", "thank", "you", "very", "much", "marko", "perfect", "I", "might", "be", "doing", "something", "wrong", "but", "whenever", "my", "express", "app", "hits", "the", "var", "template", "require", "NUMBER", "hello", "NUMBER", "marko", "a", "hello", "NUMBER", "marko", "NUMBER", "js", "file", "be", "created", "alongside", "the", "original", "file", "NUMBER", "Is", "there", "a", "way", "to", "render", "marko", "template", "from", "node", "without", "this", "filesystem", "dependency", "Thanks", "NUMBER", "One", "of", "the", "main", "benefits", "of", "Marko", "be", "that", "template", "be", "compiled", "to", "javascript", "so", "that", "they", "can", "be", "executed", "on", "both", "client", "and", "server", "NUMBER", "Theoretically", "you", "could", "compile", "to", "the", "javascript", "API", "and", "handle", "it", "yourself", "see", "the", "bottom", "of", "this", "section", "LINK", "template", "compilation", "NUMBER", "Is", "there", "a", "particular", "reason", "that", "you", "re", "trying", "to", "avoid", "compilation", "I", "don", "t", "have", "any", "problem", "with", "a", "compilation", "step", "most", "templating", "systems", "behave", "similarly", "NUMBER", "I", "m", "just", "wondering", "if", "it", "s", "required", "to", "compile", "to", "the", "filesystem", "as", "oppose", "to", "having", "a", "purely", "in", "memory", "compilation", "NUMBER", "Sorry", "I", "miss", "your", "part", "about", "the", "template", "compilation", "with", "Javascript", "API", "NUMBER", "I", "attempted", "use", "compileFile", "but", "the", "source", "that", "be", "returned", "be", "in", "the", "format", "of", "a", "common", "js", "module", "which", "still", "isn", "t", "of", "much", "use", "unless", "it", "gets", "write", "to", "a", "file", "NUMBER", "I", "was", "kind", "of", "hoping", "to", "somehow", "get", "back", "a", "compiled", "template", "function", "that", "can", "be", "instantly", "run", "similar", "to", "LINK", "template", "Thanks", "for", "the", "relevant", "issue", "I", "search", "but", "did", "not", "find", "that", "somehow", "NUMBER", "That", "answers", "my", "question", "NUMBER", "Hi", "again", "I", "ve", "be", "work", "on", "a", "large", "Koa", "server", "project", "where", "we", "want", "to", "allow", "mounting", "of", "multiple", "SPAs", "use", "Marko", "NUMBER", "Each", "SPA", "be", "a", "separate", "Node", "package", "module", "NUMBER", "It", "would", "be", "really", "nice", "if", "we", "could", "specify", "the", "root", "common", "template", "folder", "for", "each", "page", "NUMBER", "The", "following", "should", "give", "an", "idea", "of", "my", "ideal", "application", "layout", "split", "into", "a", "module", "for", "each", "SPA", "NUMBER", "The", "app", "NUMBER", "js", "be", "the", "main", "app", "which", "contains", "shared", "layout", "and", "partials", "for", "all", "SPAs", "to", "leverage", "NUMBER", "sh", "app", "NUMBER", "js", "require", "koa", "server", "NUMBER", "js", "default", "layout", "NUMBER", "marko", "partials", "_header", "NUMBER", "marko", "_footer", "marko", "index", "NUMBER", "je", "require", "app", "NUMBER", "js", "index", "NUMBER", "marko", "index", "layout", "NUMBER", "marko", "live", "NUMBER", "js", "require", "app", "NUMBER", "js", "live", "NUMBER", "marko", "live", "layout", "NUMBER", "marko", "Alternatively", "I", "would", "have", "a", "common", "NUMBER", "js", "module", "with", "the", "template", "layouts", "and", "partials", "common", "shared", "across", "multiple", "SPAs", "NUMBER", "sh", "common", "NUMBER", "js", "partials", "_header", "NUMBER", "marko", "_footer", "marko", "live", "NUMBER", "js", "require", "app", "NUMBER", "js", "require", "common", "NUMBER", "js", "live", "NUMBER", "marko", "live", "layout", "NUMBER", "marko", "How", "would", "I", "conveniently", "reference", "such", "shared", "template", "locations", "in", "other", "node", "modules", "without", "hard", "code", "a", "long", "ugly", "path", "such", "as", "NUMBER", "node_modules", "common", "partials", "_header", "Would", "this", "be", "a", "feature", "enhancement", "request", "Any", "ideas", "or", "recommendations", "greatly", "appreciated", "NUMBER", "Thanks", "Awesome", "Thanks", "a", "lot", "Patrick", "Will", "start", "switching", "to", "Custom", "Tags", "for", "more", "awesome", "power", "and", "flexibility", "NUMBER", "Is", "this", "all", "it", "takes", "LINK", "patrick", "steele", "idem", "Do", "you", "happen", "to", "know", "if", "we", "can", "disable", "cache", "aka", "the", "generate", "NUMBER", "js", "file", "when", "use", "consolidate", "NUMBER", "js", "I", "be", "interested", "in", "this", "because", "I", "use", "marko", "as", "a", "template", "language", "for", "static", "site", "generator", "metalsmith", "but", "because", "marko", "be", "smart", "enough", "to", "generate", "js", "file", "it", "prevents", "us", "from", "use", "a", "watcher", "to", "reload", "template", "just", "by", "run", "the", "build", "process", "again", "on", "template", "change", "NUMBER", "Is", "there", "a", "solution", "for", "that", "ref", "LINK", "watch", "patrick", "steele", "idem", "Thx", "I", "did", "enable", "invalidateCache", "it", "doesn", "t", "appear", "to", "find", "the", "right", "entry", "in", "require", "NUMBER", "cache", "to", "delete", "though", "NUMBER", "I", "need", "to", "figure", "out", "why", "LINK", "watch", "issue", "NUMBER", "NUMBER", "We", "initially", "tried", "to", "use", "TAG", "but", "this", "be", "obviously", "a", "terrible", "idea", "whioch", "doesn", "t", "work", "NUMBER", "What", "be", "the", "recommended", "pattern", "besides", "copying", "down", "each", "specific", "value", "which", "the", "partial", "be", "depending", "on", "which", "can", "quickly", "make", "for", "tight", "coupling", "in", "the", "hierarchy", "TAG", "We", "have", "this", "problem", "views", "layouts", "default", "layout", "NUMBER", "marko", "NUMBER", "TAG", "views", "partials", "header", "header", "NUMBER", "marko", "TAG", "data", "NUMBER", "menu_items", "TAG", "and", "be", "empty", "data", "When", "TAG", "be", "given", "a", "hard", "code", "path", "it", "can", "be", "relative", "as", "said", "in", "the", "docs", "or", "absolute", "NUMBER", "However", "when", "it", "be", "given", "a", "variable", "path", "as", "in", "TAG", "it", "must", "be", "absolute", "it", "will", "error", "out", "if", "relative", "NUMBER", "Works", "html", "TAG", "Works", "html", "TAG", "TAG", "Works", "html", "TAG", "Does", "Not", "Work", "html", "TAG", "TAG", "It", "seems", "as", "if", "the", "issue", "be", "that", "hard", "code", "paths", "be", "require", "NUMBER", "resolve", "d", "while", "variable", "paths", "be", "not", "NUMBER", "Also", "the", "docs", "could", "use", "an", "update", "since", "it", "says", "that", "the", "template", "path", "must", "be", "relative", "even", "for", "hard", "code", "paths", "NUMBER", "I", "would", "like", "to", "determine", "which", "custom", "tags", "get", "call", "via", "my", "renderer", "NUMBER", "js", "So", "in", "the", "renderer", "something", "like", "this", "data", "NUMBER", "details", "d", "NUMBER", "d", "NUMBER", "d", "NUMBER", "And", "then", "in", "template", "NUMBER", "marko", "which", "doesn", "t", "work", "TAG", "nbsp", "nbsp", "nbsp", "nbsp", "TAG", "TAG", "One", "solution", "would", "be", "to", "explicitly", "call", "out", "tags", "conditionally", "TAG", "nbsp", "nbsp", "nbsp", "nbsp", "TAG", "nbsp", "nbsp", "nbsp", "nbsp", "nbsp", "nbsp", "nbsp", "nbsp", "TAG", "nbsp", "nbsp", "nbsp", "nbsp", "TAG", "TAG", "But", "be", "there", "any", "other", "way", "to", "accomplish", "this", "Thanks", "Patrick", "that", "seems", "to", "work", "well", "NUMBER", "Do", "you", "know", "how", "I", "might", "include", "w", "id", "in", "this", "case", "So", "that", "TAG", "would", "become", "something", "like", "this", "NUMBER", "TAG", "Ok", "thanks", "NUMBER", "That", "would", "be", "great", "if", "this", "could", "be", "support", "NUMBER", "Custom", "Attributes", "be", "a", "great", "functionality", "NUMBER", "But", "current", "implementation", "do", "NOT", "support", "attribute", "value", "to", "come", "from", "a", "object", "NUMBER", "Following", "statement", "be", "currently", "support", "NUMBER", "but", "what", "if", "class", "name", "be", "come", "dynamically", "from", "the", "JavaScript", "object", "NUMBER", "TAG", "TAG", "Support", "for", "following", "be", "needed", "TAG", "TAG", "Also", "there", "be", "inconsistency", "across", "marko", "for", "defining", "JavaScript", "expression", "NUMBER", "Some", "places", "its", "use", "some", "places", "it", "dosent", "needs", "and", "here", "its", "use", "condition", "value", "WITHOUT", "sign", "Thank", "you", "Patrick", "I", "didnt", "knew", "about", "attrs", "attribute", "I", "have", "to", "finish", "up", "reading", "entire", "doc", "On", "the", "second", "note", "It", "would", "be", "helpful", "if", "we", "can", "unify", "conditional", "statements", "as", "well", "for", "example", "below", "dosent", "with", "with", "TAG", "but", "works", "with", "TAG", "TAG", "May", "be", "use", "just", "use", "javascript", "inline", "if", "statement", "everywhere", "can", "solve", "the", "problem", "NUMBER", "I", "was", "work", "on", "creating", "reusable", "helper", "utility", "which", "will", "add", "_sp", "class", "and", "id", "to", "any", "element", "when", "passing", "a", "common", "data", "model", "NUMBER", "After", "alot", "of", "try", "and", "error", "with", "variables", "function", "and", "and", "without", "I", "finally", "concluded", "that", "it", "may", "not", "be", "support", "NUMBER", "Support", "for", "calling", "a", "Helper", "Utility", "to", "render", "anything", "within", "the", "HTML", "element", "be", "desired", "NUMBER", "Currently", "Marko", "support", "calling", "JavaScript", "expression", "on", "right", "hand", "side", "after", "sign", "as", "below", "However", "following", "be", "not", "support", "NUMBER", "hello", "I", "have", "created", "a", "sample", "to", "explain", "the", "same", "NUMBER", "LINK", "dynamic", "attributes", "tree", "master", "Thank", "you", "patrick", "steele", "idem", "I", "was", "saw", "the", "documentation", "for", "defining", "custom", "tags", "but", "was", "unable", "to", "find", "info", "about", "creating", "custom", "attributes", "NUMBER", "Can", "you", "please", "point", "me", "to", "that", "doc", "How", "about", "any", "JavaScript", "Object", "and", "JavaScript", "Arrays", "my", "component", "dynamic", "int", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "I", "think", "it", "s", "a", "good", "idea", "to", "remove", "the", "noise", "of", "extra", "file", "NUMBER", "Making", "this", "part", "of", "the", "marko", "html", "makes", "sense", "NUMBER", "NUMBER", "SunnyGurnani", "I", "assume", "that", "should", "also", "work", "as", "Patrick", "mention", "support", "for", "the", "NUMBER", "syntax", "NUMBER", "If", "you", "want", "to", "consider", "attribute", "value", "as", "JS", "expression", "would", "you", "also", "support", "calling", "function", "HTML", "TAG", "Hi", "maybe", "it", "s", "worth", "considering", "the", "upcoming", "ES", "NUMBER", "Template", "Strings", "NUMBER", "LINK", "es", "NUMBER", "template", "strings", "If", "the", "proposal", "be", "a", "thought", "about", "get", "the", "parser", "more", "towards", "js", "the", "following", "html", "TAG", "would", "lead", "towards", "html", "TAG", "yes", "the", "backticks", "if", "I", "get", "it", "right", "NUMBER", "Not", "to", "talk", "about", "multiline", "strings", "NUMBER", "And", "we", "ll", "be", "able", "to", "omit", "string", "concatenation", "html", "TAG", "or", "be", "I", "completely", "wrong", "greets", "Achim", "patrick", "steele", "idem", "I", "understand", "the", "migration", "argument", "completely", "NUMBER", "For", "me", "as", "a", "total", "marko", "noob", "my", "thoughts", "were", "totally", "js", "driven", "NUMBER", "It", "s", "the", "language", "I", "m", "most", "familiar", "with", "loving", "the", "new", "possibilities", "and", "features", "of", "the", "upcoming", "es", "NUMBER", "And", "with", "something", "like", "these", "NUMBER", "html", "TAG", "TAG", "NUMBER", "I", "have", "to", "leave", "my", "way", "of", "js", "thinking", "towards", "some", "marko", "specials", "NUMBER", "If", "everything", "after", "the", "be", "familiar", "js", "I", "don", "t", "have", "to", "think", "about", "marko", "NUMBER", "It", "just", "works", "NUMBER", "Maybe", "this", "kind", "of", "thinking", "be", "too", "naive", "NUMBER", "My", "Suggestion", "would", "be", "to", "allow", "all", "javascript", "expression", "in", "only", "to", "avoid", "any", "confusion", "NUMBER", "With", "propose", "method", "it", "would", "be", "very", "confusing", "for", "anyone", "who", "be", "new", "to", "Marko", "to", "figure", "out", "which", "be", "plain", "text", "and", "which", "be", "javascript", "expression", "NUMBER", "As", "i", "think", "more", "about", "it", "i", "think", "what", "SunnyGurnani", "propose", "makes", "more", "sense", "and", "less", "confusing", "NUMBER", "Few", "things", "to", "consider", "NUMBER", "hello", "name", "be", "not", "a", "valid", "JS", "expression", "NUMBER", "If", "you", "want", "to", "actually", "have", "a", "string", "NUMBER", "NUMBER", "NUMBER", "as", "attribute", "value", "in", "mystring", "NUMBER", "NUMBER", "NUMBER", "then", "it", "would", "have", "to", "be", "encoded", "which", "would", "make", "it", "look", "odd", "otherwise", "it", "becomes", "array", "value", "NUMBER", "NUMBER", "Thanks", "pswar", "and", "patrick", "steele", "idem", "JavaScript", "has", "given", "us", "the", "freedom", "from", "Classes", "and", "Types", "with", "current", "proposal", "we", "be", "taking", "away", "all", "that", "beauty", "and", "simplicity", "NUMBER", "I", "personally", "would", "prefer", "simplicity", "for", "all", "expressions", "and", "let", "library", "handle", "the", "rest", "NUMBER", "Current", "proposal", "suggest", "different", "implementation", "based", "on", "individual", "Types", "as", "following", "NUMBER", "However", "in", "JavaScript", "we", "never", "define", "type", "in", "the", "parameter", "or", "declare", "variable", "with", "type", "NUMBER", "For", "dynamic", "string", "use", "ES", "NUMBER", "strings", "component", "attribute", "hello", "name", "Single", "function", "don", "t", "use", "anything", "component", "attribute", "data", "NUMBER", "foo", "For", "Multiple", "Functions", "use", "component", "attribute", "data", "NUMBER", "foo", "data", "NUMBER", "bar", "For", "Object", "use", "component", "attribute", "hello", "world", "For", "Array", "use", "component", "attribute", "NUMBER", "NUMBER", "NUMBER", "pswar", "I", "don", "t", "see", "any", "problem", "in", "following", "expression", "NUMBER", "Hello", "be", "static", "and", "name", "be", "JavaScript", "expression", "NUMBER", "Please", "correct", "me", "if", "I", "be", "wrong", "component", "attribute", "hello", "name", "I", "was", "following", "up", "until", "the", "proposal", "that", "NUMBER", "only", "be", "allow", "within", "backtick", "quoted", "attribute", "values", "which", "would", "be", "a", "significant", "BC", "break", "NUMBER", "I", "understand", "the", "desire", "to", "simplify", "but", "that", "seems", "a", "step", "too", "far", "to", "me", "vs", "retaining", "the", "exist", "behavior", "where", "quoted", "attribute", "values", "be", "scanned", "for", "NUMBER", "replacements", "NUMBER", "patrick", "steele", "idem", "I", "understand", "where", "you", "re", "come", "from", "and", "in", "the", "end", "either", "way", "will", "work", "NUMBER", "I", "guess", "the", "way", "I", "was", "looking", "at", "the", "interpolation", "within", "quoted", "attributes", "question", "was", "that", "it", "s", "simple", "to", "think", "of", "replacement", "work", "the", "same", "way", "there", "as", "it", "do", "within", "CDATA", "sections", "since", "they", "re", "both", "text", "parts", "of", "HTML", "NUMBER", "One", "question", "this", "do", "bring", "up", "be", "how", "the", "different", "quoting", "styles", "in", "the", "template", "would", "affect", "the", "quoting", "in", "the", "generate", "HTML", "NUMBER", "For", "example", "do", "this", "TAG", "compile", "to", "TAG", "or", "TAG", "or", "something", "else", "I", "get", "your", "point", "patrick", "steele", "idem", "I", "think", "then", "it", "would", "help", "to", "remove", "depricate", "from", "the", "language", "NUMBER", "be", "there", "a", "need", "to", "use", "ES", "NUMBER", "backticks", "Cant", "we", "just", "use", "following", "my", "component", "string", "concatenated", "hello", "name", "This", "would", "avoid", "confusion", "and", "make", "Marko", "much", "easier", "to", "learn", "for", "people", "new", "to", "language", "NUMBER", "patrick", "steele", "idem", "So", "be", "we", "considering", "this", "just", "get", "custom", "tags", "or", "more", "generally", "My", "gut", "reaction", "would", "be", "that", "the", "syntax", "for", "custom", "tags", "should", "be", "as", "similar", "to", "normal", "tags", "as", "possible", "which", "be", "where", "my", "admittedly", "rushed", "example", "came", "from", "thinking", "about", "these", "template", "semantics", "in", "terms", "of", "defining", "attributes", "on", "regular", "tags", "NUMBER", "Coming", "from", "JSX", "land", "I", "suggest", "xml", "TAG", "It", "would", "be", "great", "to", "have", "more", "overlap", "between", "the", "two", "standards", "NUMBER", "Many", "of", "us", "use", "marko", "on", "the", "back", "will", "be", "use", "Angular", "NUMBER", "or", "React", "JSX", "on", "the", "front", "NUMBER", "I", "personally", "render", "React", "components", "and", "inject", "them", "into", "marko", "template", "NUMBER", "For", "conditional", "operators", "how", "about", "something", "like", "this", "TAG", "NUMBER", "Do", "something", "TAG", "instead", "of", "TAG", "NUMBER", "Do", "something", "TAG", "For", "iterators", "TAG", "TAG", "color", "TAG", "TAG", "instead", "of", "TAG", "TAG", "color", "TAG", "TAG", "patrick", "steele", "idem", "I", "think", "the", "suggestion", "needs", "to", "be", "fix", "to", "TAG", "NUMBER", "Do", "something", "TAG", "I", "see", "an", "after", "the", "if", "in", "the", "suggestion", "NUMBER", "My", "gut", "reaction", "to", "this", "proposal", "was", "OH", "NO", "NOT", "ANGULAR", "NUMBER", "SYNTAX", "But", "reading", "a", "bit", "further", "on", "I", "fully", "understand", "the", "reasoning", "NUMBER", "More", "power", "less", "limits", "However", "I", "don", "t", "think", "it", "should", "be", "all", "or", "nothin", "breaking", "exist", "template", "etc", "NUMBER", "My", "proposal", "Allow", "the", "HTML", "flavor", "describe", "above", "but", "also", "allow", "enable", "it", "while", "keep", "in", "full", "HTML", "attribute", "compatibility", "mode", "ie", "x", "y", "NUMBER", "TAG", "AND", "TAG", "Where", "the", "NUMBER", "e", "means", "that", "the", "internals", "should", "be", "_evaluated_", "as", "pure", "javascript", "and", "returned", "as", "TAG", "Then", "evaluated", "as", "javascript", "to", "finally", "render", "TAG", "It", "think", "this", "combines", "the", "best", "of", "both", "worlds", "and", "would", "allow", "me", "to", "keep", "use", "jade", "to", "marko", "compilation", "NUMBER", "The", "same", "principle", "would", "apply", "for", "string", "interpolation", "etc", "NUMBER", "ie", "NUMBER", "simply", "having", "NUMBER", "e", "attribute", "name", "postfix", "means", "a", "first", "compilation", "phase", "basically", "just", "stripping", "the", "s", "and", "understanding", "the", "intention", "as", "javascript", "evaluation", "Looks", "very", "cool", "Good", "job", "Hi", "philidem", "When", "can", "we", "expect", "to", "begin", "experimenting", "with", "this", "or", "contribute", "How", "do", "we", "hook", "the", "parser", "into", "markojs", "to", "replace", "the", "default", "Parser", "Please", "add", "usage", "install", "instructions", "NUMBER", "Cheers", "re", "multiple", "variables", "I", "don", "t", "know", "NUMBER", "I", "think", "most", "javascript", "styles", "these", "days", "prefer", "write", "out", "one", "variable", "per", "line", "anyway", "NUMBER", "patrick", "steele", "idem", "Sure", "and", "it", "isn", "t", "necessarily", "bad", "to", "support", "multiple", "styles", "it", "s", "just", "additional", "things", "to", "maintain", "document", "etc", "NUMBER", "re", "conditionals", "I", "actually", "think", "that", "looks", "better", "NUMBER", "It", "be", "uglier", "but", "it", "s", "standard", "js", "NUMBER", "Regarding", "conditionals", "depending", "on", "how", "a", "falsy", "value", "be", "handle", "for", "the", "class", "attribute", "the", "following", "would", "work", "NUMBER", "and", "it", "looks", "quite", "nice", "NUMBER", "html", "TAG", "I", "suggest", "a", "new", "major", "version", "which", "uses", "Angular", "NUMBER", "s", "new", "template", "syntax", "NUMBER", "Like", "Marko", "this", "extend", "HTML", "well", "NUMBER", "I", "think", "this", "would", "quickly", "attract", "a", "wide", "set", "of", "people", "to", "the", "project", "Might", "be", "able", "to", "close", "this", "per", "LINK", "dynamic", "attributes", "With", "a", "marko", "page", "like", "this", "TAG", "data", "NUMBER", "bodyText", "TAG", "The", "rendered", "result", "be", "header", "content", "footer", "content", "body", "content", "The", "expected", "result", "be", "header", "body", "footer", "Thanks", "for", "creating", "that", "NUMBER", "This", "has", "to", "be", "my", "misunderstanding", "of", "what", "include", "would", "do", "NUMBER", "Stripping", "the", "extra", "code", "from", "my", "header", "and", "footer", "I", "find", "the", "issue", "was", "if", "I", "have", "an", "open", "tag", "in", "the", "header", "i", "NUMBER", "e", "NUMBER", "a", "TAG", "tag", "and", "a", "closing", "tag", "in", "the", "footer", "TAG", "Marko", "add", "a", "closing", "tag", "to", "the", "header", "and", "drops", "the", "closing", "tag", "from", "the", "footer", "NUMBER", "So", "it", "seems", "each", "include", "template", "has", "to", "be", "a", "stand", "alone", "template", "not", "depending", "on", "HTML", "tags", "opened", "or", "close", "outside", "of", "that", "template", "NUMBER", "Is", "that", "correct", "Hi", "How", "can", "query", "params", "be", "add", "to", "a", "url", "when", "rendering", "a", "template", "template", "NUMBER", "render", "res", "so", "they", "can", "be", "accessed", "from", "the", "url", "e", "NUMBER", "g", "NUMBER", "LINK", "NUMBER", "Assuming", "you", "have", "a", "request", "object", "like", "Express", "provides", "template", "NUMBER", "render", "id", "req", "NUMBER", "query", "NUMBER", "id", "res", "Then", "in", "the", "template", "TAG", "click", "TAG", "Thanks", "NUMBER", "I", "want", "to", "be", "able", "to", "append", "it", "to", "the", "url", "so", "I", "can", "then", "parse", "the", "URL", "for", "the", "page", "to", "access", "all", "the", "params", "via", "JS", "NUMBER", "I", "understand", "I", "can", "render", "a", "TAG", "tag", "in", "the", "template", "with", "the", "values", "but", "it", "would", "be", "a", "better", "solution", "to", "parse", "the", "URL", "in", "this", "case", "NUMBER", "Is", "this", "possible", "do", "you", "know", "I", "m", "not", "sure", "that", "I", "follow", "what", "you", "re", "ask", "to", "be", "honest", "NUMBER", "If", "you", "just", "want", "to", "access", "the", "query", "params", "from", "js", "in", "the", "browser", "you", "can", "do", "that", "without", "marko", "involvement", "at", "all", "by", "parsing", "window", "NUMBER", "location", "NUMBER", "search", "with", "client", "side", "js", "NUMBER", "If", "you", "want", "to", "use", "marko", "to", "pass", "any", "request", "params", "back", "to", "the", "template", "you", "could", "stick", "the", "entire", "req", "NUMBER", "query", "object", "into", "data", "like", "template", "NUMBER", "render", "query", "req", "NUMBER", "query", "res", "Then", "TAG", "var", "query", "JSON", "NUMBER", "ringify", "data", "NUMBER", "query", "TAG", "I", "ve", "not", "explained", "this", "great", "NUMBER", "I", "ll", "have", "another", "go", "NUMBER", "use", "Express", "Marko", "Say", "I", "have", "a", "form", "submitted", "to", "book", "id", "route", "this", "be", "handle", "by", "a", "controller", "which", "saves", "the", "book", "to", "the", "DB", "NUMBER", "Once", "the", "book", "be", "saved", "I", "render", "a", "template", "book", "complete", "NUMBER", "But", "instead", "of", "the", "url", "be", "book", "complete", "I", "want", "it", "to", "be", "book", "complete", "id", "NUMBER", "NUMBER", "be", "the", "last", "ID", "add", "to", "the", "DB", "NUMBER", "My", "problem", "be", "rendering", "the", "query", "string", "onto", "the", "URL", "on", "page", "load", "NUMBER", "Your", "second", "solution", "makes", "sense", "but", "having", "script", "tags", "could", "get", "unwieldy", "across", "pages", "NUMBER", "Does", "that", "explain", "it", "any", "better", "Thanks", "for", "persevering", "NUMBER", "Honestly", "this", "doesn", "t", "sound", "like", "a", "marko", "issue", "at", "all", "the", "URL", "in", "the", "browser", "isn", "t", "relate", "to", "the", "name", "of", "the", "template", "NUMBER", "If", "you", "want", "to", "have", "the", "browser", "show", "that", "URL", "you", "ll", "need", "to", "add", "a", "GET", "route", "for", "it", "and", "at", "the", "end", "of", "your", "POST", "handler", "use", "a", "redirect", "to", "make", "the", "browser", "load", "the", "desired", "URL", "NUMBER", "return", "res", "NUMBER", "redirect", "book", "complete", "id", "new_id", "Couldn", "t", "see", "the", "wood", "for", "the", "trees", "Thanks", "DanCech", "NUMBER", "This", "tightens", "the", "entity", "matching", "regular", "expression", "to", "explicitly", "handle", "numeric", "and", "hexadecimal", "entities", "separately", "from", "named", "entities", "NUMBER", "It", "also", "add", "a", "simple", "test", "that", "entities", "be", "be", "properly", "matched", "NUMBER", "I", "didn", "t", "get", "how", "be", "it", "possible", "to", "render", "a", "template", "from", "string", "NUMBER", "Is", "it", "possible", "at", "all", "Thanks", "NUMBER", "Doesn", "t", "work", "in", "browser", "use", "browserify", "NUMBER", "I", "be", "get", "require", "NUMBER", "resolve", "be", "not", "a", "function", "on", "export", "NUMBER", "taglibs", "NUMBER", "registerTaglib", "require", "NUMBER", "resolve", "NUMBER", "taglibs", "core", "marko", "taglib", "NUMBER", "json", "Thanks", "for", "the", "directions", "but", "I", "have", "already", "switched", "to", "another", "template", "engine", "too", "much", "hassle", "for", "such", "a", "simple", "thing", "NUMBER", "As", "for", "me", "marko", "NUMBER", "load", "should", "be", "able", "to", "work", "with", "a", "raw", "template", "string", "or", "there", "should", "be", "any", "other", "method", "do", "this", "job", "in", "one", "line", "as", "it", "be", "in", "the", "most", "of", "the", "template", "engines", "NUMBER", "Anyway", "thanks", "for", "your", "help", "NUMBER", "patrick", "steele", "idem", "of", "course", "I", "agree", "with", "you", "NUMBER", "But", "I", "bet", "you", "will", "not", "notice", "a", "difference", "in", "case", "of", "simple", "template", "between", "precompiled", "and", "compiled", "in", "browser", "NUMBER", "I", "be", "actually", "doing", "a", "simple", "Chrome", "extension", "and", "don", "t", "need", "NUMBER", "fps", "NUMBER", "Another", "thing", "be", "that", "usually", "you", "want", "to", "make", "it", "workable", "asap", "and", "after", "that", "do", "the", "optimizations", "so", "it", "be", "usually", "very", "handy", "to", "just", "have", "a", "single", "method", "for", "a", "single", "render", "operation", "to", "see", "it", "right", "away", "NUMBER", "Hi", "I", "d", "like", "to", "add", "a", "use", "case", "for", "client", "compilation", "NUMBER", "We", "re", "currently", "not", "use", "nodejs", "on", "the", "server", "but", "a", "CMS", "system", "and", "would", "like", "our", "users", "to", "add", "their", "own", "custom", "template", "to", "a", "template", "library", "NUMBER", "We", "don", "t", "mind", "if", "this", "means", "a", "second", "or", "two", "delay", "compile", "the", "template", "before", "its", "push", "to", "the", "library", "NUMBER", "These", "template", "be", "then", "use", "in", "the", "main", "app", "NUMBER", "Unfortunately", "at", "the", "moment", "it", "seems", "template", "have", "to", "be", "push", "by", "the", "development", "team", "with", "access", "to", "a", "node", "environment", "NUMBER", "It", "seems", "like", "the", "layout", "put", "tag", "be", "not", "work", "as", "expected", "anymore", "NUMBER", "The", "test", "confirms", "this", "NUMBER", "render", "layout", "use", "Error", "Unexpected", "output", "for", "marko", "test", "fixture", "template", "layout", "use", "template", "NUMBER", "marko", "EXPECTED", "marko", "test", "fixture", "template", "layout", "use", "expected", "NUMBER", "html", "TAG", "BODY", "CONTENT", "TAG", "FOOTER", "CONTENT", "TAG", "HEADER", "CONTENT", "TAG", "TAG", "BODY", "CONTENT", "TAG", "FOOTER", "CONTENT", "TAG", "VALUE", "HEADER", "TAG", "TAG", "BODY", "CONTENT", "TAG", "FOOTER", "CONTENT", "TAG", "DEFAULT", "TITLE", "TAG", "TAG", "BODY", "CONTENT", "TAG", "FOOTER", "CONTENT", "ACTUAL", "marko", "test", "fixture", "template", "layout", "use", "actual", "NUMBER", "html", "TAG", "TAG", "TAG", "DEFAULT", "TITLE", "TAG", "TAG", "TAG", "TAG", "DEFAULT", "TITLE", "TAG", "TAG", "TAG", "TAG", "DEFAULT", "TITLE", "TAG", "TAG", "TAG", "Instead", "of", "use", "the", "content", "from", "layout", "put", "it", "falls", "back", "to", "the", "default", "if", "available", "NUMBER", "Any", "idea", "what", "s", "wrong", "here", "That", "be", "strange", "NUMBER", "If", "I", "checkout", "the", "latest", "version", "with", "a", "blank", "npm", "install", "NUMBER", "it", "s", "still", "fail", "NUMBER", "I", "m", "use", "node", "NUMBER", "Any", "idea", "how", "I", "could", "triage", "this", "issue", "Did", "the", "same", "on", "a", "different", "machine", "NUMBER", "Everything", "went", "fine", "without", "issue", "NUMBER", "Most", "likely", "it", "s", "just", "a", "problem", "with", "my", "machine", "NUMBER", "Let", "me", "know", "if", "you", "have", "any", "idea", "how", "I", "could", "isolate", "this", "issue", "NUMBER", "Thanks", "Vivian", "Yes", "did", "that", "without", "success", "NUMBER", "Anyhow", "find", "the", "issue", "NUMBER", "There", "was", "a", "node_modules", "directory", "in", "a", "parent", "directory", "by", "accident", "NUMBER", "So", "for", "some", "reason", "it", "interfered", "with", "that", "and", "cause", "these", "error", "NUMBER", "Thanks", "for", "your", "quick", "help", "Vivian", "The", "parser", "seems", "to", "be", "converting", "strings", "to", "logical", "values", "for", "example", "and", "be", "get", "converted", "to", "and", "or", "to", "NUMBER", "It", "seems", "to", "be", "linked", "to", "the", "way", "html", "elements", "be", "nested", "NUMBER", "The", "text", "be", "be", "use", "in", "a", "TAG", "tag", "NUMBER", "Here", "be", "some", "html", "that", "breaks", "it", "TAG", "TAG", "TAG", "TAG", "TAG", "Intuitive", "Features", "Wrapped", "Up", "In", "a", "Smart", "Interface", "TAG", "TAG", "TAG", "TAG", "Lorem", "ipsum", "dolor", "sit", "amet", "consectetur", "adipisicing", "elit", "sed", "do", "eiusmod", "tempor", "incididunt", "ut", "labore", "et", "dolore", "magna", "aliqua", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Explore", "the", "Features", "TAG", "TAG", "TAG", "TAG", "Pay", "as", "you", "go", "Monthly", "Plans", "Available", "TAG", "TAG", "TAG", "TAG", "Whether", "you", "re", "publishing", "lots", "or", "publishing", "little", "we", "have", "a", "plan", "that", "s", "great", "value", "and", "can", "scale", "up", "down", "as", "your", "needs", "do", "and", "you", "re", "free", "to", "cancel", "anytime", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Choose", "a", "plan", "that", "s", "right", "for", "you", "TAG", "TAG", "TAG", "TAG", "Start", "Now", "No", "Obligation", "NUMBER", "Day", "Free", "Trial", "TAG", "TAG", "TAG", "TAG", "We", "don", "t", "expect", "you", "to", "make", "a", "decision", "before", "you", "ve", "kicked", "the", "tyres", "and", "shown", "your", "boss", "so", "we", "offer", "a", "no", "obligation", "NUMBER", "day", "free", "trial", "to", "everyone", "NUMBER", "TAG", "TAG", "NUMBER", "TAG", "TAG", "Bored", "of", "reading", "and", "want", "to", "try", "it", "for", "yourself", "Start", "your", "free", "trial", "now", "TAG", "TAG", "TAG", "TAG", "TAG", "I", "m", "use", "the", "view", "engine", "and", "view", "engine", "marko", "modules", "NUMBER", "I", "think", "the", "dependencies", "be", "well", "out", "of", "date", "NUMBER", "Is", "this", "still", "support", "LINK", "steele", "idem", "view", "engine", "marko", "NUMBER", "git", "I", "created", "a", "custom", "tag", "component", "app", "fieldset", "which", "can", "include", "other", "custom", "tags", "eg", "NUMBER", "app", "text", "field", "NUMBER", "It", "works", "fine", "if", "the", "inside", "custom", "tag", "be", "other", "types", "but", "I", "get", "error", "if", "it", "refers", "itself", "NUMBER", "Template", "NUMBER", "marko", "in", "app", "fieldset", "NUMBER", "TAG", "TAG", "TAG", "TAG", "TAG", "refers", "self", "TAG", "The", "error", "in", "console", "be", "Thu", "NUMBER", "Apr", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "GMT", "uncaughtException", "Invalid", "tag", "handler", "object", "Object", "Error", "Invalid", "tag", "handler", "object", "Object", "at", "Function", "NUMBER", "deferredRenderer", "NUMBER", "renderer", "NUMBER", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "deferredRenderer", "NUMBER", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "module", "NUMBER", "export", "NUMBER", "t", "NUMBER", "node_modules", "marko", "runtime", "helpers", "NUMBER", "js", "NUMBER", "NUMBER", "at", "NUMBER", "src", "components", "app", "fieldset", "template", "NUMBER", "marko", "NUMBER", "js", "NUMBER", "NUMBER", "I", "use", "the", "latest", "version", "of", "marko", "NUMBER", "per", "LINK", "but", "seems", "not", "work", "for", "this", "case", "NUMBER", "Thanks", "Sara", "Hi", "Patrick", "Yes", "it", "has", "renderer", "NUMBER", "js", "and", "use", "option", "NUMBER", "Thanks", "Sara", "From", "Patrick", "Steele", "Idem", "TAG", "Reply", "To", "raptorjs", "marko", "TAG", "Date", "Thursday", "April", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "AM", "To", "raptorjs", "marko", "TAG", "Cc", "sara", "xu", "TAG", "Subject", "Re", "marko", "Custom", "tag", "self", "reference", "do", "not", "work", "NUMBER", "Hi", "Sara", "Does", "your", "TAG", "custom", "tag", "have", "a", "renderer", "NUMBER", "js", "If", "so", "which", "syntax", "of", "the", "following", "do", "your", "renderer", "NUMBER", "js", "use", "Option", "NUMBER", "export", "NUMBER", "renderer", "function", "input", "out", "NUMBER", "Option", "NUMBER", "module", "NUMBER", "export", "function", "renderer", "input", "out", "NUMBER", "If", "you", "have", "a", "circular", "dependency", "you", "need", "to", "use", "Option", "NUMBER", "since", "it", "allows", "for", "a", "partially", "loaded", "module", "to", "be", "returned", "NUMBER", "It", "be", "recommended", "that", "you", "always", "use", "the", "syntax", "shown", "in", "Option", "NUMBER", "If", "you", "do", "not", "have", "a", "renderer", "NUMBER", "js", "then", "I", "ll", "probably", "need", "more", "details", "to", "reproduce", "the", "problem", "NUMBER", "Thanks", "Patrick", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "issuecomment", "NUMBER", "Proposal", "NUMBER", "suggests", "some", "solution", "to", "simplify", "parent", "child", "relationships", "NUMBER", "I", "m", "trying", "to", "understand", "how", "conceptually", "we", "be", "selling", "this", "solution", "to", "the", "end", "user", "NUMBER", "We", "be", "telling", "that", "user", "should", "connect", "parent", "and", "child", "tags", "but", "maybe", "user", "do", "not", "need", "child", "tags", "Maybe", "he", "just", "needs", "a", "way", "to", "express", "complex", "input", "object", "use", "declarative", "markup", "NUMBER", "If", "we", "step", "back", "and", "overview", "tags", "again", "we", "can", "say", "that", "tag", "be", "a", "function", "with", "the", "following", "signature", "js", "var", "customTag", "function", "input", "out", "NUMBER", "Instead", "of", "calling", "it", "directly", "in", "the", "code", "we", "find", "a", "way", "to", "call", "it", "declaratively", "with", "the", "following", "markup", "html", "TAG", "Naive", "equivalent", "of", "the", "above", "declarative", "call", "be", "the", "following", "function", "call", "js", "customTag", "title", "Hello", "href", "some", "url", "renderBody", "function", "It", "means", "that", "declarative", "TAG", "be", "use", "to", "define", "the", "shape", "of", "the", "input", "object", "for", "customTag", "function", "NUMBER", "Nothing", "new", "here", "this", "be", "just", "an", "introduction", "NUMBER", "But", "you", "can", "notice", "that", "declaratively", "you", "can", "define", "only", "first", "level", "properties", "or", "function", "of", "the", "input", "object", "NUMBER", "Alternative", "definition", "of", "the", "problem", "In", "proposal", "NUMBER", "idea", "was", "to", "simplify", "parent", "child", "relationship", "NUMBER", "But", "maybe", "we", "can", "solve", "the", "same", "problem", "if", "declarative", "call", "would", "support", "definition", "of", "complex", "input", "objects", "NUMBER", "Actually", "the", "notion", "of", "the", "target", "property", "suggests", "us", "that", "we", "be", "really", "looking", "to", "support", "complex", "input", "object", "not", "just", "single", "level", "attributes", "NUMBER", "Sometimes", "we", "really", "would", "like", "to", "call", "our", "tag", "function", "with", "complex", "input", "object", "NUMBER", "In", "JavaScript", "this", "be", "really", "simple", "and", "straightforward", "js", "appTabs", "orientation", "vertical", "tabs", "label", "Tab", "NUMBER", "renderBody", "function", "return", "Content", "for", "Tab", "NUMBER", "label", "Tab", "NUMBER", "renderBody", "function", "return", "Content", "for", "Tab", "NUMBER", "renderBody", "function", "NUMBER", "Today", "we", "cannot", "easily", "do", "the", "same", "declaratively", "NUMBER", "We", "can", "pass", "orientation", "attribute", "but", "we", "cannot", "pass", "tabs", "array", "NUMBER", "Proposal", "NUMBER", "try", "to", "solve", "this", "but", "conceptually", "it", "be", "a", "bit", "complex", "because", "it", "requires", "to", "introduce", "another", "tag", "that", "be", "defined", "separately", "from", "the", "attributes", "attribute", "in", "marko", "taglib", "NUMBER", "json", "while", "still", "attaching", "to", "the", "input", "object", "with", "the", "help", "of", "target", "property", "NUMBER", "I", "see", "mismatch", "here", "from", "one", "side", "we", "have", "independent", "child", "tag", "from", "other", "side", "we", "be", "trying", "to", "embed", "it", "to", "our", "parent", "s", "input", "object", "NUMBER", "What", "if", "the", "problem", "can", "be", "defined", "as", "the", "following", "_how", "can", "we", "make", "declarative", "call", "of", "tag", "function", "that", "accepts", "complex", "input", "objects", "_", "This", "definition", "of", "the", "problem", "be", "differ", "from", "the", "current", "problem", "_how", "can", "we", "simplify", "parent", "child", "relationships", "_", "Proposal", "for", "marko", "taglib", "NUMBER", "json", "syntax", "If", "our", "tag", "function", "can", "accept", "complex", "input", "objects", "then", "shape", "of", "such", "object", "should", "be", "defined", "inside", "attributes", "where", "we", "currently", "have", "support", "for", "only", "first", "level", "attributes", "NUMBER", "Here", "be", "a", "possible", "definition", "of", "app", "tabs", "taglib", "js", "attributes", "orientation", "string", "tabs", "type", "object", "implicit", "true", "only", "one", "attribute", "can", "be", "implicit", "more", "about", "this", "below", "attributes", "label", "string", "Nested", "tags", "vs", "NUMBER", "nested", "attributes", "Nested", "tag", "be", "a", "complete", "Marko", "tag", "which", "be", "nested", "to", "another", "tag", "and", "can", "be", "reused", "NUMBER", "Nested", "attributes", "can", "look", "like", "ordinary", "Marko", "tags", "but", "they", "cannot", "be", "reused", "outside", "of", "the", "root", "tag", "NUMBER", "In", "the", "following", "example", "TAG", "be", "a", "nested", "tag", "while", "TAG", "be", "a", "nested", "attribute", "of", "TAG", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "We", "cannot", "reuse", "TAG", "outside", "of", "the", "root", "TAG", "NUMBER", "That", "be", "why", "this", "be", "a", "nested", "attribute", "NUMBER", "But", "we", "can", "reuse", "TAG", "because", "this", "be", "a", "nested", "tag", "NUMBER", "Important", "part", "of", "this", "proposal", "be", "a", "proposal", "to", "treat", "nested", "tags", "differently", "from", "the", "nested", "attributes", "NUMBER", "Proposal", "for", "the", "syntax", "of", "nested", "attributes", "There", "be", "several", "possible", "ways", "to", "express", "nested", "attributes", "NUMBER", "First", "possible", "way", "be", "to", "use", "tag", "name", "NUMBER", "property", "notation", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "The", "following", "input", "object", "will", "be", "created", "renderBody", "etc", "NUMBER", "be", "omitted", "js", "orientation", "vertical", "tabs", "label", "Tab", "NUMBER", "label", "Tab", "NUMBER", "I", "saw", "such", "notation", "in", "the", "XAML", "LINK", "us", "library", "ms", "NUMBER", "NUMBER", "v", "vs", "NUMBER", "NUMBER", "aspx", "f", "NUMBER", "MSPPError", "NUMBER", "language", "xml", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "First", "item", "TAG", "TAG", "Second", "item", "TAG", "TAG", "TAG", "Right", "click", "me", "TAG", "Second", "possible", "way", "be", "to", "use", "some", "special", "param", "tag", "like", "in", "Google", "Closure", "Templates", "LINK", "param", "txt", "template", "TAG", "param", "TAG", "TAG", "param", "TAG", "TAG", "NUMBER", "template", "In", "case", "of", "Marko", "it", "can", "be", "TAG", "although", "I", "also", "don", "t", "like", "special", "symbols", "maybe", "simple", "TAG", "be", "enough", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Marko", "already", "has", "special", "syntax", "for", "string", "interpolation", "value", "value", "and", "value", "NUMBER", "Maybe", "it", "still", "worth", "to", "add", "another", "special", "syntax", "for", "nested", "attributes", "TAG", "or", "any", "other", "NUMBER", "I", "m", "not", "voting", "for", "any", "particular", "syntax", "my", "idea", "be", "to", "evaluate", "problem", "that", "we", "be", "trying", "to", "solve", "from", "different", "angle", "from", "declarative", "definition", "of", "complex", "input", "objects", "NUMBER", "I", "m", "sure", "that", "together", "we", "can", "find", "a", "better", "syntax", "NUMBER", "In", "my", "comment", "to", "NUMBER", "I", "asked", "about", "support", "for", "more", "than", "one", "level", "of", "nested", "tags", "with", "the", "following", "use", "case", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "When", "looking", "on", "this", "template", "can", "you", "answer", "on", "what", "tags", "be", "nested", "tags", "and", "what", "be", "just", "nested", "attributes", "It", "be", "hard", "to", "answer", "on", "this", "question", "without", "reading", "marko", "taglib", "NUMBER", "json", "NUMBER", "If", "we", "can", "find", "a", "way", "to", "differentiate", "tags", "from", "attributes", "it", "can", "be", "expressed", "in", "the", "following", "way", "use", "some", "of", "the", "propose", "syntax", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Definition", "of", "this", "tag", "in", "marko", "taglib", "NUMBER", "json", "js", "attributes", "orientation", "string", "sections", "type", "object", "implicit", "true", "only", "one", "attribute", "on", "the", "same", "level", "can", "be", "implicit", "attributes", "title", "string", "items", "type", "object", "implicit", "true", "only", "one", "attribute", "on", "the", "same", "level", "can", "be", "implicit", "attributes", "title", "string", "href", "string", "implicit", "flag", "means", "that", "we", "can", "assign", "value", "to", "this", "property", "use", "shorter", "notation", "NUMBER", "Instead", "of", "this", "technically", "valid", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "We", "can", "write", "it", "in", "the", "shorter", "form", "html", "TAG", "TAG", "TAG", "In", "XAML", "this", "flag", "be", "named", "ContentProperty", "LINK", "us", "library", "windows", "apps", "windows", "NUMBER", "ui", "NUMBER", "xaml", "NUMBER", "markup", "NUMBER", "contentpropertyattribute", "NUMBER", "Aspx", "NUMBER", "Conclusion", "This", "be", "just", "a", "proposal", "NUMBER", "You", "probably", "see", "much", "more", "corner", "stones", "than", "I", "be", "NUMBER", "Thank", "you", "It", "might", "be", "possible", "sidestep", "the", "tag", "name", "issue", "and", "instead", "define", "a", "new", "marko", "tag", "like", "TAG", "value", "TAG", "which", "would", "set", "an", "attribute", "on", "the", "parent", "tag", "NUMBER", "In", "this", "use", "case", "the", "markup", "for", "the", "tabs", "might", "look", "something", "like", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "TAG", "Tab", "NUMBER", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "This", "scheme", "could", "potentially", "be", "use", "for", "defining", "attributes", "on", "regular", "html", "tags", "as", "well", "as", "on", "our", "custom", "taglib", "tags", "too", "though", "I", "have", "no", "idea", "how", "much", "complexity", "that", "would", "add", "to", "the", "parser", "NUMBER", "Interesting", "I", "didn", "t", "know", "about", "TAG", "NUMBER", "Is", "that", "something", "that", "s", "intended", "to", "be", "documented", "and", "officially", "support", "I", "think", "the", "colon", "approach", "will", "result", "confusion", "since", "the", "app", "tabs", "namespace", "wouldn", "t", "actually", "be", "declared", "and", "could", "cause", "problem", "for", "people", "trying", "to", "use", "marko", "to", "generate", "xml", "NUMBER", "The", "NUMBER", "or", "separated", "syntax", "seems", "cleanest", "if", "a", "little", "repetitive", "NUMBER", "The", "ability", "to", "just", "declare", "arbitrary", "subtag", "names", "in", "the", "taglib", "definition", "could", "result", "in", "some", "interesting", "use", "cases", "and", "has", "the", "potential", "to", "make", "the", "template", "markup", "more", "semantic", "which", "be", "a", "pretty", "big", "pro", "in", "my", "book", "NUMBER", "I", "m", "in", "favor", "of", "support", "the", "dot", "notation", "for", "use", "nested", "tags", "in", "your", "HTML", "NUMBER", "A", "short", "hand", "of", "only", "use", "something", "like", "TAG", "would", "be", "great", "too", "if", "we", "can", "tweak", "the", "HTML", "parser", "NUMBER", "Because", "you", "be", "already", "planning", "to", "use", "symbol", "for", "attributes", "maybe", "it", "makes", "sense", "to", "introduce", "TAG", "notation", "instead", "of", "TAG", "and", "TAG", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "It", "seems", "that", "in", "this", "case", "we", "shouldn", "t", "worry", "about", "HTML", "parsers", "and", "all", "editors", "will", "work", "fine", "with", "this", "syntax", "NUMBER", "As", "a", "side", "note", "we", "also", "can", "continue", "to", "use", "symbol", "for", "this", "and", "do", "not", "introduce", "new", "symbol", "html", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Content", "for", "Tab", "NUMBER", "TAG", "TAG", "Mnemonic", "be", "the", "following", "when", "be", "in", "front", "of", "open", "curly", "bracket", "you", "be", "going", "to", "evaluate", "JavaScript", "expression", "NUMBER", "When", "be", "in", "front", "of", "open", "tag", "TAG", "you", "be", "going", "to", "decoratively", "define", "sub", "property", "NUMBER", "But", "I", "agree", "that", "be", "suited", "better", "for", "attributes", "NUMBER", "Hi", "Is", "there", "a", "way", "to", "make", "a", "variable", "available", "to", "all", "layouts", "template", "without", "having", "to", "pass", "it", "in", "every", "template", "NUMBER", "render", "For", "example", "i", "m", "use", "TAG", "and", "have", "a", "TAG", "component", "in", "that", "layout", "NUMBER", "I", "want", "to", "be", "able", "to", "render", "not", "render", "certain", "navigation", "elements", "depending", "on", "whether", "the", "suer", "be", "logged", "in", "or", "not", "NUMBER", "At", "present", "I", "have", "to", "pass", "a", "variable", "in", "every", "controller", "like", "this", "global", "env", "locals", "NUMBER", "env", "user", "locals", "NUMBER", "user", "but", "I", "have", "to", "do", "that", "in", "every", "controller", "where", "I", "call", "template", "NUMBER", "render", "e", "NUMBER", "g", "NUMBER", "login", "signup", "etc", "etc", "NUMBER", "Is", "there", "any", "way", "to", "make", "variable", "available", "to", "all", "template", "components", "rather", "than", "sending", "the", "data", "each", "time", "in", "template", "NUMBER", "render", "Thanks", "Pat", "This", "proposal", "looks", "really", "nice", "Just", "trying", "to", "understand", "how", "flexible", "it", "be", "NUMBER", "First", "thing", "that", "come", "to", "my", "mind", "be", "about", "more", "than", "one", "level", "of", "hierarchy", "NUMBER", "How", "can", "be", "the", "following", "tag", "describe", "in", "marko", "taglib", "NUMBER", "json", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "And", "there", "be", "use", "cases", "for", "unlimited", "hierarchy", "though", "very", "uncommon", "html", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Will", "it", "be", "possible", "to", "describe", "such", "nesting", "If", "we", "ll", "go", "with", "the", "propose", "way", "we", "need", "to", "define", "taglib", "inside", "taglib", "inside", "taglib", "Here", "be", "an", "example", "for", "the", "sidebar", "navigation", "shown", "above", "js", "attributes", "taglib", "tags", "sidebar", "navigation", "section", "target", "property", "sections", "attributes", "title", "string", "taglib", "tags", "sidebar", "navigation", "item", "target", "property", "items", "attributes", "href", "string", "title", "string", "In", "the", "latest", "Marko", "version", "and", "in", "some", "cases", "and", "words", "in", "template", "be", "replaced", "with", "symbols", "NUMBER", "For", "this", "template", "html", "We", "re", "young", "NUMBER", "TAG", "You", "and", "me", "be", "friends", "and", "teammates", "NUMBER", "TAG", "The", "following", "NUMBER", "marko", "NUMBER", "js", "file", "will", "be", "generate", "js", "out", "NUMBER", "w", "We", "re", "young", "NUMBER", "TAG", "You", "me", "be", "friends", "teammates", "NUMBER", "TAG", "TAG", "You", "Necessary", "Conditions", "NUMBER", "You", "should", "use", "marko", "layout", "module", "NUMBER", "NUMBER", "You", "should", "have", "unpaired", "symbol", "in", "your", "template", "NUMBER", "There", "be", "probably", "other", "conditions", "when", "this", "issue", "happens", "but", "I", "know", "only", "one", "set", "of", "conditions", "NUMBER", "Minimal", "project", "Here", "I", "prepared", "a", "minimal", "project", "that", "will", "help", "to", "reproduce", "this", "issue", "LINK", "substitution", "poltergeist", "Reasons", "I", "don", "t", "know", "actual", "reason", "of", "this", "problem", "but", "for", "the", "end", "user", "this", "be", "because", "of", "symbol", "that", "makes", "all", "subsequent", "and", "words", "be", "replaced", "by", "symbol", "NUMBER", "If", "you", "ll", "close", "single", "quotes", "i", "NUMBER", "e", "NUMBER", "We", "be", "young", "everything", "will", "be", "correct", "NUMBER", "Workaround", "Replace", "all", "single", "quotes", "with", "the", "following", "Thank", "you", "very", "much", "for", "so", "quick", "fix", "Issue", "disappeared", "NUMBER", "I", "have", "three", "points", "regard", "progressive", "rendering", "of", "marko", "template", "NUMBER", "NUMBER", "As", "out", "of", "order", "rendering", "requires", "JS", "on", "the", "client", "side", "the", "docs", "should", "mention", "that", "as", "well", "including", "the", "impact", "this", "has", "on", "on", "things", "like", "progressive", "enhancement", "etc", "NUMBER", "The", "only", "mention", "of", "this", "that", "I", "have", "find", "be", "on", "the", "ebay", "tech", "blog", "article", "about", "progressive", "rendering", "NUMBER", "I", "might", "be", "miss", "something", "here", "I", "made", "some", "thoughts", "if", "out", "of", "order", "rendering", "could", "be", "achieved", "without", "the", "need", "of", "client", "side", "JS", "NUMBER", "unfortunately", "I", "did", "find", "a", "way", "to", "do", "so", "NUMBER", "be", "this", "a", "point", "of", "interest", "for", "marko", "NUMBER", "I", "wonder", "if", "google", "do", "correct", "indexing", "with", "out", "of", "order", "rendering", "as", "A", "JS", "be", "required", "and", "B", "the", "initial", "HTML", "be", "rendered", "into", "a", "hidden", "div", "NUMBER", "Point", "A", "might", "be", "a", "no", "issue", "since", "google", "and", "others", "now", "performs", "JS", "when", "request", "pages", "NUMBER", "If", "not", "point", "B", "be", "critical", "because", "hidden", "content", "could", "be", "ignored", "identified", "as", "lower", "priority", "less", "relevant", "to", "a", "page", "so", "pages", "might", "not", "be", "correctly", "indexed", "NUMBER", "If", "google", "runs", "JS", "and", "considers", "the", "page", "when", "it", "be", "fully", "loaded", "point", "B", "might", "be", "a", "no", "issue", "NUMBER", "Please", "provide", "some", "thoughts", "practical", "experiences", "regard", "A", "and", "B", "NUMBER", "NUMBER", "When", "run", "the", "examples", "on", "LINK", "progressive", "rendering", "NUMBER", "herokuapp", "NUMBER", "com", "renderMode", "progressive", "in", "order", "jsLocation", "middle", "everything", "be", "fine", "until", "you", "reload", "the", "iframe", "hitting", "the", "inner", "refresh", "button", "on", "the", "page", "in", "the", "chrome", "browser", "NUMBER", "Strangely", "progressive", "rendering", "of", "async", "elements", "only", "works", "when", "you", "move", "the", "mouse", "after", "refresh", "Safari", "and", "Firefox", "render", "every", "chunk", "as", "soon", "as", "it", "arrives", "NUMBER", "Reloading", "the", "entire", "page", "in", "chrome", "shows", "the", "same", "effect", "while", "run", "the", "example", "in", "a", "separate", "window", "works", "fine", "most", "of", "the", "time", "NUMBER", "I", "test", "the", "behaviour", "with", "a", "bigger", "first", "chunk", "additional", "textual", "data", "but", "the", "data", "refuses", "to", "render", "until", "you", "move", "the", "mouse", "NUMBER", "It", "seems", "that", "the", "browser", "ignores", "chunked", "responses", "and", "renders", "the", "content", "like", "a", "single", "chunk", "NUMBER", "I", "see", "the", "same", "behaviour", "on", "Mac", "and", "Linux", "NUMBER", "Does", "somebody", "know", "the", "reason", "and", "if", "this", "be", "a", "know", "intended", "behaviour", "or", "a", "bug", "on", "the", "marko", "chrome", "part", "hi", "patrick", "steele", "idem", "thanks", "for", "looking", "into", "the", "issue", "I", "be", "fine", "with", "closing", "it", "if", "something", "pops", "up", "again", "I", "will", "create", "a", "new", "issue", "NUMBER", "Sadly", "I", "have", "not", "do", "any", "further", "investigation", "towards", "indexing", "but", "as", "soon", "as", "I", "get", "more", "information", "I", "will", "share", "it", "NUMBER", "Hi", "I", "have", "a", "problem", "with", "components", "having", "their", "HTML", "tags", "close", "incorrectly", "by", "the", "compiler", "NUMBER", "For", "example", "if", "I", "have", "the", "following", "components", "and", "html", "content", "shown", "simplified", "TAG", "components", "app", "header", "template", "NUMBER", "marko", "HTML", "content", "TAG", "TAG", "TAG", "components", "app", "footer", "template", "NUMBER", "marko", "HTML", "content", "TAG", "TAG", "index", "NUMBER", "js", "HTML", "content", "TAG", "TAG", "TAG", "content", "here", "TAG", "TAG", "TAG", "I", "can", "see", "the", "problem", "NUMBER", "The", "TAG", "component", "s", "compiled", "NUMBER", "js", "file", "has", "add", "the", "closing", "div", "tags", "automatically", "which", "breaks", "the", "layout", "as", "the", "wrapper", "and", "content", "elements", "be", "now", "close", "when", "they", "should", "be", "left", "open", "to", "contain", "the", "main", "page", "content", "NUMBER", "Is", "there", "any", "setting", "to", "prevent", "this", "or", "a", "different", "way", "of", "laying", "out", "the", "pages", "Thanks", "Pat", "Ok", "that", "makes", "sense", "NUMBER", "Once", "again", "thanks", "for", "the", "quick", "response", "and", "easy", "to", "understand", "explanation", "it", "really", "makes", "a", "difference", "NUMBER", "Thanks", "Pat", "Hi", "Whats", "the", "best", "way", "to", "pass", "data", "to", "components", "NUMBER", "At", "present", "it", "appears", "you", "have", "to", "pass", "data", "from", "every", "template", "to", "the", "components", "e", "NUMBER", "g", "NUMBER", "in", "index", "NUMBER", "marko", "you", "would", "have", "TAG", "TAG", "I", "can", "then", "access", "the", "data", "from", "the", "component", "e", "NUMBER", "g", "NUMBER", "TAG", "If", "I", "try", "to", "access", "data", "NUMBER", "env", "without", "passing", "the", "data", "in", "from", "index", "NUMBER", "marko", "I", "get", "an", "error", "NUMBER", "Doing", "it", "this", "way", "if", "I", "want", "to", "pass", "new", "data", "into", "the", "app", "header", "component", "in", "the", "future", "I", "would", "have", "to", "change", "ALL", "template", "NUMBER", "Is", "there", "a", "better", "way", "of", "doing", "this", "Thanks", "Pat", "new", "to", "Marko", "and", "Node", "Wow", "exactly", "what", "I", "needed", "and", "fast", "I", "can", "get", "on", "with", "a", "productive", "day", "much", "appreciated", "NUMBER", "marko", "NUMBER", "LINK", "d", "NUMBER", "ad", "NUMBER", "e", "NUMBER", "NUMBER", "edd", "NUMBER", "d", "NUMBER", "ba", "NUMBER", "png", "marko", "NUMBER", "LINK", "d", "NUMBER", "ad", "NUMBER", "e", "NUMBER", "NUMBER", "d", "NUMBER", "NUMBER", "d", "NUMBER", "png", "D", "these", "be", "the", "TAG", "it", "all", "can", "be", "customised", "I", "have", "NUMBER", "ai", "file", "saved", "Dumb", "but", "worth", "the", "idea", "NUMBER", "marko", "logo", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "e", "NUMBER", "f", "NUMBER", "e", "NUMBER", "e", "NUMBER", "a", "NUMBER", "aa", "NUMBER", "png", "marko", "NUMBER", "LINK", "d", "NUMBER", "b", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "c", "NUMBER", "NUMBER", "c", "NUMBER", "eadfd", "NUMBER", "png", "philidem", "Yeah", "I", "saw", "that", "as", "soon", "as", "I", "made", "it", "but", "said", "What", "the", "heck", "Worth", "a", "post", "NUMBER", "marko", "NUMBER", "LINK", "d", "NUMBER", "c", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "NUMBER", "a", "NUMBER", "acf", "NUMBER", "png", "Since", "Marko", "be", "a", "dudes", "name", "I", "gave", "him", "some", "personality", "marko", "NUMBER", "LINK", "d", "NUMBER", "ca", "NUMBER", "e", "NUMBER", "NUMBER", "f", "ca", "NUMBER", "efb", "NUMBER", "e", "NUMBER", "d", "NUMBER", "png", "Some", "Urban", "Style", "NUMBER", "Alright", "time", "to", "leave", "Illustrator", "NUMBER", "Good", "night", "Gentleman", "I", "will", "be", "bugging", "you", "tomorrow", "since", "I", "haven", "t", "implementetd", "optimizer", "yet", "screen", "shot", "NUMBER", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "NUMBER", "pm", "LINK", "d", "NUMBER", "NUMBER", "e", "NUMBER", "NUMBER", "b", "NUMBER", "NUMBER", "d", "NUMBER", "fc", "NUMBER", "aedd", "NUMBER", "png", "Maybe", "you", "could", "play", "around", "with", "the", "color", "NUMBER", "marko", "NUMBER", "LINK", "NUMBER", "a", "NUMBER", "e", "NUMBER", "NUMBER", "a", "NUMBER", "b", "NUMBER", "b", "NUMBER", "png", "Some", "thoughts", "additional", "love", "to", "detail", "required", "the", "brackets", "at", "the", "end", "should", "appear", "NUMBER", "D", "stacked", "meaning", "tags", "can", "be", "wrapped", "NUMBER", "forming", "components", "NUMBER", "the", "k", "and", "the", "first", "bracket", "form", "the", "letter", "o", "the", "font", "should", "appear", "dynamic", "agile", "quick", "and", "nice", "the", "sub", "text", "describes", "marko", "as", "template", "engine", "with", "binding", "behavior", "and", "gives", "an", "insight", "about", "how", "marko", "components", "be", "write", "Lol", "how", "about", "some", "fancy", "NUMBER", "marko", "Ryan", "Pavely", "Net", "Access", "LINK", "On", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "PM", "Patrick", "Steele", "Idem", "write", "Accidentally", "pressed", "the", "wrong", "button", "NUMBER", "Comment", "update", "with", "link", "to", "contest", "NUMBER", "Thanks", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "LINK", "js", "marko", "issue", "NUMBER", "issuecomment", "NUMBER", "haha", "had", "a", "funny", "idea", "NUMBER", "marko", "and", "an", "abstract", "grining", "face", "marko_face", "LINK", "NUMBER", "c", "NUMBER", "e", "NUMBER", "e", "NUMBER", "NUMBER", "edd", "NUMBER", "ec", "NUMBER", "a", "NUMBER", "e", "NUMBER", "png", "Well", "deserved", "congrats", "Marko", "c", "input", "works", "well", "for", "nested", "tags", "but", "there", "be", "times", "when", "we", "need", "to", "pass", "down", "extra", "information", "from", "the", "parent", "tag", "like", "this", "TAG", "Examples", "include", "when", "the", "parent", "contains", "the", "loop", "and", "we", "might", "need", "an", "index", "in", "the", "nested", "tag", "or", "if", "parent", "tag", "level", "logic", "affects", "a", "child", "tag", "NUMBER", "This", "should", "also", "include", "support", "for", "passing", "a", "conditional", "or", "at", "least", "a", "variable", "that", "we", "can", "set", "with", "a", "conditional", "earlier", "in", "the", "file", "NUMBER", "Thanks", "Yes", "to", "patrick", "steele", "idem", "and", "thanks", "Removing", "the", "else", "if", "block", "in", "order", "to", "allow", "complex", "var", "names", "on", "the", "left", "hand", "of", "the", "assignment", "NUMBER", "Funny", "because", "I", "did", "the", "edits", "directly", "in", "Github", "NUMBER", "Sean", "Gates", "Sent", "from", "my", "iPhone", "On", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Phillip", "Gates", "Idem", "notifications", "github", "NUMBER", "com", "write", "Please", "fix", "the", "jshint", "error", "so", "that", "the", "build", "will", "pass", "NUMBER", "Also", "jshint", "plugins", "package", "for", "your", "code", "editor", "be", "really", "helpful", "if", "you", "don", "t", "have", "one", "install", "NUMBER", "See", "LINK", "ci", "NUMBER", "org", "raptorjs", "marko", "jobs", "NUMBER", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "You", "bet", "Sean", "Gates", "Sent", "from", "my", "iPhone", "On", "Mar", "NUMBER", "NUMBER", "at", "NUMBER", "NUMBER", "PM", "Phillip", "Gates", "Idem", "notifications", "github", "NUMBER", "com", "write", "Published", "marko", "NUMBER", "Thanks", "Sean", "Reply", "to", "this", "email", "directly", "or", "view", "it", "on", "GitHub", "NUMBER", "Usecase", "We", "would", "like", "to", "add", "a", "library", "of", "components", "NUMBER", "The", "path", "would", "be", "node_modules", "component", "library", "node_modules", "custom", "component", "lib", "If", "the", "rendered", "template", "be", "somewhere", "else", "then", "this", "path", "won", "t", "be", "discover", "NUMBER", "Suggestion", "Add", "a", "way", "to", "add", "paths", "to", "the", "discovery", "feature", "LINK", "taglib", "discovery", "That", "would", "be", "great", "NUMBER", "Especially", "with", "regards", "to", "breaking", "change", "and", "feature", "deprecations", "NUMBER", "It", "will", "help", "us", "make", "informed", "decisions", "about", "if", "when", "to", "upgrade", "and", "what", "app", "change", "we", "need", "to", "make", "to", "stay", "up", "to", "date", "with", "the", "latest", "and", "greatest", "NUMBER", "We", "have", "gotten", "ourselves", "into", "trouble", "a", "few", "times", "with", "mismatched", "version", "between", "marko", "and", "support", "modules", "NUMBER", "I", "think", "having", "an", "accurate", "Changelog", "on", "each", "module", "would", "be", "hugely", "helpful", "in", "track", "down", "where", "we", "went", "awry", "NUMBER", "Thanks", "Thanks", "philidem", "That", "sounds", "like", "it", "would", "be", "a", "big", "help", "Hi", "patrick", "steele", "idem", "I", "think", "the", "Marko", "ChangeLog", "was", "a", "bit", "out", "of", "date", "when", "I", "opened", "this", "issue", "but", "it", "seems", "to", "be", "all", "caught", "up", "now", "NUMBER", "Thanks", "for", "that", "Or", "I", "may", "just", "be", "crazy", "NUMBER", "Upgrade", "guide", "be", "definitely", "fantastic", "help", "and", "much", "appreciated", "NUMBER", "It", "seems", "some", "support", "modules", "don", "t", "have", "ChangeLogs", "however", "and", "that", "s", "what", "I", "was", "trying", "to", "get", "at", "in", "my", "initial", "message", "NUMBER", "Here", "be", "a", "few", "as", "examples", "raptorjs", "optimizer", "raptorjs", "optimizer", "marko", "raptorjs", "optimizer", "less", "NUMBER", "Maybe", "it", "wouldn", "t", "be", "practical", "or", "helpful", "to", "have", "Changelogs", "for", "each", "NUMBER", "I", "m", "not", "sure", "NUMBER", "As", "a", "Marko", "user", "it", "s", "probably", "easier", "to", "have", "a", "single", "ChangeLog", "Upgrade", "guide", "to", "follow", "NUMBER", "But", "the", "interdependencies", "between", "modules", "complicates", "things", "NUMBER", "I", "like", "philidem", "s", "suggestion", "of", "having", "some", "runtime", "detection", "of", "incompatibilities", "NUMBER", "Meanwhile", "I", "m", "use", "npm", "shrinkwrap", "to", "freeze", "my", "module", "version", "so", "that", "any", "future", "upgrades", "be", "deliberate", "and", "that", "be", "a", "work", "solution", "for", "me", "for", "now", "NUMBER", "Thank", "you", "for", "the", "great", "project", "Ben", "Hello", "be", "there", "a", "way", "to", "work", "with", "marko", "and", "webpack", "a", "marko", "loader", "perhaps", "Thanks", "Thanks", "i", "will", "try", "maxwarch", "Hi", "Have", "you", "succeed", "with", "webpack", "and", "marko", "I", "d", "tried", "it", "and", "encountered", "the", "problem", "that", "webpack", "Cannot", "find", "module", "raptor", "logging", "impl", "NUMBER", "Direct", "installation", "of", "raptor", "logging", "impl", "doesn", "t", "help", "NUMBER", "Will", "be", "nice", "to", "get", "your", "feedback", "NUMBER", "Thanks", "KateKate", "hi", "unfortunately", "i", "haven", "t", "the", "time", "to", "try", "this", "NUMBER", "I", "hope", "i", "will", "have", "patrick", "steele", "idem", "thank", "you", "for", "your", "feedback", "NUMBER", "It", "s", "a", "bit", "of", "a", "hack", "but", "if", "a", "module", "uses", "process", "and", "it", "s", "bundled", "by", "webpack", "then", "webpack", "and", "browserify", "sets", "process", "NUMBER", "browser", "true", "NUMBER", "So", "if", "the", "try", "catches", "in", "raptor", "and", "marko", "s", "src", "be", "only", "there", "for", "the", "benefit", "of", "browserify", "then", "replacing", "them", "with", "if", "process", "NUMBER", "browser", "would", "mean", "the", "code", "compiles", "properly", "in", "webpack", "too", "patrick", "steele", "idem", "I", "ve", "find", "and", "find", "a", "potential", "workaround", "for", "another", "bug", "in", "webpack", "NUMBER", "Because", "I", "guess", "it", "places", "a", "higher", "importance", "on", "loading", "file", "with", "extensions", "other", "than", "NUMBER", "js", "webpack", "try", "to", "load", "mypartial", "NUMBER", "marko", "rather", "than", "mypartial", "NUMBER", "marko", "NUMBER", "js", "when", "use", "TAG", "the", "request", "of", "a", "dependency", "be", "an", "expression", "Any", "idea", "what", "might", "be", "happening", "Do", "you", "have", "an", "example", "on", "how", "to", "use", "it", "in", "webpack", "NUMBER", "config", "NUMBER", "js", "patrick", "steele", "idem", "I", "have", "created", "this", "test", "project", "NUMBER", "LINK", "webpack", "test", "You", "just", "need", "to", "npm", "install", "and", "then", "webpack", "to", "reproduce", "the", "error", "NUMBER", "Awesome", "patrick", "steele", "idem", "It", "do", "work", "although", "I", "m", "still", "get", "Webpack", "warnings", "WARNING", "in", "NUMBER", "marko", "runtime", "stream", "index", "browser", "NUMBER", "js", "Critical", "dependencies", "NUMBER", "NUMBER", "NUMBER", "the", "request", "of", "a", "dependency", "be", "an", "expression", "NUMBER", "NUMBER", "NUMBER", "the", "request", "of", "a", "dependency", "be", "an", "expression", "NUMBER", "marko", "runtime", "stream", "index", "browser", "NUMBER", "js", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "NUMBER", "Hello", "be", "there", "a", "way", "to", "use", "marko", "with", "webpack", "Thanks", "Please", "please", "please", "Anything", "we", "can", "do", "to", "help", "NUMBER", "Any", "sample", "repo", "to", "use", "as", "reference", "Cheers", "I", "start", "write", "some", "code", "that", "I", "was", "really", "hoping", "would", "work", "but", "it", "doesn", "t", "seem", "to", "NUMBER", "I", "was", "wondering", "if", "self", "nested", "taglibs", "would", "be", "possible", "because", "it", "would", "be", "extremely", "handy", "for", "my", "use", "case", "json", "tags", "mytag", "renderer", "NUMBER", "mytag", "attributes", "data", "string", "body", "function", "getChildren", "__children", "import", "var", "children", "__children", "js", "export", "NUMBER", "render", "function", "input", "out", "var", "children", "if", "input", "NUMBER", "getChildren", "children", "input", "NUMBER", "getChildren", "addChild", "function", "child", "children", "NUMBER", "push", "child", "if", "input", "NUMBER", "children", "input", "NUMBER", "children", "NUMBER", "addChild", "implementation", "detail", "else", "out", "NUMBER", "write", "something", "utilizing", "children", "html", "TAG", "TAG", "TAG", "TAG", "So", "basically", "my", "question", "be", "whether", "or", "not", "it", "be", "somehow", "possible", "to", "include", "both", "body", "function", "and", "import", "var", "on", "the", "same", "tag", "and", "self", "nest", "them", "NUMBER", "When", "I", "try", "this", "I", "get", "an", "error", "that", "__children", "be", "undefined", "NUMBER", "Is", "there", "a", "way", "to", "achieve", "this", "currently", "I", "actually", "solve", "my", "problem", "for", "now", "with", "a", "hack", "of", "use", "import", "var", "children", "argument", "NUMBER", "but", "obviously", "it", "would", "be", "much", "better", "if", "children", "existed", "in", "the", "compiled", "template", "and", "was", "null", "NUMBER", "Ah", "yeah", "that", "makes", "sense", "NUMBER", "I", "ve", "replaced", "my", "hack", "with", "that", "and", "it", "s", "work", "great", "now", "NUMBER", "Thanks", "so", "much", "Ok", "cool", "I", "m", "still", "trying", "to", "figure", "out", "exactly", "how", "this", "all", "works", "NUMBER", "I", "have", "a", "little", "ways", "to", "go", "I", "think", "but", "so", "far", "so", "good", "NUMBER", "I", "start", "looking", "through", "the", "test", "and", "have", "modify", "my", "taglib", "to", "use", "var", "children", "now", "and", "I", "ve", "remove", "body", "function", "in", "favor", "of", "use", "renderBody", "out", "NUMBER", "in", "my", "renderer", "NUMBER", "It", "s", "work", "perfectly", "now", "NUMBER", "Although", "I", "don", "t", "feel", "like", "I", "can", "be", "completely", "confident", "that", "I", "m", "doing", "everything", "correctly", "because", "the", "documentation", "be", "a", "little", "lacking", "in", "this", "area", "at", "the", "moment", "but", "I", "m", "sure", "that", "ll", "change", "in", "the", "future", "NUMBER", "FYI", "I", "m", "build", "a", "simple", "taglib", "to", "render", "React", "components", "and", "it", "s", "actually", "work", "great", "NUMBER", "Maybe", "I", "ll", "publish", "it", "on", "npm", "if", "I", "get", "some", "time", "NUMBER", "LINK", "This", "be", "not", "support", "javascript", "template", "NUMBER", "renderSync", "global", "foo", "foo", "But", "this", "be", "as", "seen", "in", "LINK", "javascript", "template", "NUMBER", "render", "global", "name", "Frank", "res", "The", "issue", "seems", "to", "be", "that", "global", "processing", "be", "miss", "from", "the", "renderSync", "function", "NUMBER", "LINK", "runtime", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "javascript", "Template", "NUMBER", "prototype", "renderSync", "function", "data", "var", "out", "new", "AsyncWriter", "out", "NUMBER", "sync", "this", "NUMBER", "_", "data", "out", "out", "NUMBER", "end", "return", "out", "NUMBER", "getOutput", "But", "can", "be", "find", "in", "the", "render", "function", "NUMBER", "LINK", "runtime", "NUMBER", "js", "L", "NUMBER", "L", "NUMBER", "javascript", "render", "function", "data", "out", "callback", "NUMBER", "var", "global", "data", "NUMBER", "global", "if", "global", "extend", "out", "NUMBER", "global", "global", "I", "be", "trying", "to", "target", "IE", "browsers", "with", "some", "simple", "IE", "conditionals", "but", "it", "seem", "to", "fail", "in", "marko", "template", "NUMBER", "My", "template", "has", "these", "simple", "conditionals", "but", "its", "not", "get", "targeted", "properly", "NUMBER", "I", "don", "t", "see", "the", "classes", "be", "add", "NUMBER", "works", "however", "in", "plain", "html", "x", "NUMBER", "C", "if", "lt", "IE", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "html", "class", "x", "NUMBER", "lt", "ie", "NUMBER", "lt", "ie", "NUMBER", "lt", "ie", "NUMBER", "x", "NUMBER", "lang", "x", "NUMBER", "locale", "x", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "endif", "x", "NUMBER", "E", "x", "NUMBER", "C", "if", "IE", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "html", "class", "x", "NUMBER", "lt", "ie", "NUMBER", "lt", "ie", "NUMBER", "x", "NUMBER", "lang", "x", "NUMBER", "locale", "x", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "endif", "x", "NUMBER", "E", "x", "NUMBER", "C", "if", "IE", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "html", "class", "x", "NUMBER", "lt", "ie", "NUMBER", "x", "NUMBER", "lang", "x", "NUMBER", "locale", "x", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "endif", "x", "NUMBER", "E", "x", "NUMBER", "C", "if", "IE", "x", "NUMBER", "E", "x", "NUMBER", "E", "x", "NUMBER", "C", "html", "lang", "x", "NUMBER", "locale", "x", "NUMBER", "x", "NUMBER", "E", "x", "NUMBER", "C", "x", "NUMBER", "C", "endif", "x", "NUMBER", "x", "NUMBER", "E", "anything", "to", "do", "with", "the", "HTML", "comment", "s", "Hey", "patrick", "steele", "idem", "not", "a", "big", "deal", "but", "you", "may", "want", "to", "update", "your", "code", "sample", "above", "to", "use", "renderBody", "out", "instead", "of", "invokeBody", "I", "had", "notice", "that", "even", "though", "they", "be", "preserved", "variables", "weren", "t", "output", "correctly", "NUMBER", "I", "didn", "t", "dig", "into", "it", "too", "much", "but", "I", "saw", "this", "issue", "and", "liked", "your", "app", "html", "better", "anyway", "so", "I", "went", "with", "that", "NUMBER", "So", "for", "example", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Would", "end", "up", "as", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "Any", "value", "under", "the", "value", "attribute", "be", "referenced", "to", "marko", "objects", "but", "the", "same", "be", "not", "true", "for", "custom", "tags", "NUMBER", "TAG", "Custom", "Tag", "only", "accepts", "DATA", "TAG", "The", "below", "code", "will", "through", "an", "error", "in", "marko", "TAG", "Marko", "should", "promote", "one", "way", "of", "passing", "variables", "to", "support", "consistency", "NUMBER", "We", "be", "get", "error", "similar", "to", "what", "we", "see", "below", "it", "will", "be", "great", "to", "get", "the", "entire", "stack", "trace", "here", "so", "we", "know", "what", "line", "has", "be", "the", "problem", "NUMBER", "ERROR", "r", "NUMBER", "coltv", "src", "controllers", "dealsHub", "NUMBER", "TypeError", "Cannot", "read", "property", "left", "of", "undefined", "bad", "error", "Try", "accessing", "a", "property", "of", "an", "object", "which", "doesn", "t", "exist", "in", "the", "renderer", "NUMBER", "js", "NUMBER", "patrick", "steele", "idem", "ERROR", "r", "NUMBER", "coltv", "src", "controllers", "dealsHub", "NUMBER", "TypeError", "Cannot", "read", "property", "a", "of", "null", "bad", "error", "try", "run", "the", "code", "below", "renderer", "NUMBER", "js", "module", "NUMBER", "export", "function", "render", "input", "context", "var", "t", "null", "var", "a", "t", "NUMBER", "a", "console", "NUMBER", "log", "asdasd", "a", "var", "model", "getTemplateModel", "input", "if", "model", "if", "model", "NUMBER", "options", "NUMBER", "mode", "large", "largeTemplate", "NUMBER", "render", "model", "context", "else", "template", "NUMBER", "render", "model", "context", "Hey", "This", "might", "be", "a", "hard", "thing", "to", "integrate", "but", "I", "d", "like", "to", "discuss", "it", "maybe", "you", "will", "find", "it", "useful", "NUMBER", "What", "want", "to", "accomplish", "be", "to", "load", "a", "component", "dynamically", "NUMBER", "Instead", "of", "use", "a", "html", "tag", "I", "want", "to", "load", "it", "through", "a", "dedicated", "attributes", "value", "lets", "say", "taglib", "attribute", "NUMBER", "html", "TAG", "or", "html", "TAG", "The", "problem", "be", "if", "we", "d", "like", "to", "be", "able", "to", "use", "every", "template", "available", "we", "would", "need", "some", "sort", "of", "index", "with", "template", "names", "and", "their", "relative", "path", "NUMBER", "Alternatively", "we", "could", "scope", "the", "available", "template", "to", "only", "a", "certain", "directory", "which", "would", "be", "easier", "but", "not", "as", "clean", "NUMBER", "This", "would", "require", "us", "to", "have", "a", "compiled", "template", "like", "this", "NUMBER", "javascript", "template", "component", "one", "NUMBER", "components", "component", "one", "template", "NUMBER", "marko", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "xxx", "forEach", "data", "NUMBER", "components", "function", "item", "__helpers", "NUMBER", "l", "require", "NUMBER", "resolve", "template", "item", "NUMBER", "component", "NUMBER", "render", "value", "str", "item", "NUMBER", "value", "out", "out", "NUMBER", "w", "xxx", "or", "javascript", "template", "component", "one", "__helpers", "NUMBER", "l", "require", "NUMBER", "resolve", "NUMBER", "components", "component", "one", "template", "NUMBER", "marko", "return", "function", "render", "data", "out", "out", "NUMBER", "w", "xxx", "forEach", "data", "NUMBER", "components", "function", "item", "template", "item", "NUMBER", "component", "NUMBER", "render", "value", "str", "item", "NUMBER", "value", "out", "out", "NUMBER", "w", "xxx", "Of", "course", "we", "could", "check", "if", "array", "contains", "element", "etc", "NUMBER", "This", "be", "just", "a", "dirty", "example", "NUMBER", "I", "know", "that", "this", "add", "a", "bit", "of", "an", "overhead", "to", "the", "lightweight", "template", "especially", "if", "you", "get", "lots", "of", "components", "but", "I", "couldn", "t", "think", "of", "any", "different", "better", "way", "of", "doing", "this", "without", "sacrificing", "client", "side", "compatibility", "NUMBER", "What", "do", "you", "think", "I", "could", "integrate", "it", "though", "it", "will", "take", "me", "some", "time", "to", "dive", "into", "the", "code", "NUMBER", "A", "few", "hints", "where", "I", "find", "the", "responsible", "bits", "would", "surely", "help", "me", "NUMBER", "philidem", "This", "be", "a", "nice", "approach", "unfortunately", "not", "what", "I", "m", "looking", "for", "NUMBER", "Thanks", "to", "both", "of", "you", "for", "taking", "the", "time", "to", "respond", "in", "such", "detail", "NUMBER", "this", "helped", "me", "understand", "marko", "more", "NUMBER", "And", "sorry", "for", "apparently", "not", "explaining", "my", "issue", "properly", "when", "re", "reading", "the", "docs", "I", "find", "a", "great", "solution", "already", "in", "place", "the", "include", "tag", "NUMBER", "It", "seems", "to", "do", "all", "the", "required", "stuff", "like", "loading", "and", "rendering", "NUMBER", "TAG", "This", "will", "help", "me", "get", "start", "for", "now", "I", "will", "add", "NUMBER", "marko", "NUMBER", "html", "support", "to", "optimizer", "marko", "in", "the", "next", "days", "NUMBER", "Let", "s", "introduce", "a", "new", "tag", "attribute", "that", "will", "do", "the", "same", "thing", "as", "body", "only", "if", "NUMBER", "Most", "of", "the", "time", "the", "intention", "be", "to", "skip", "the", "container", "and", "the", "focus", "be", "less", "in", "the", "body", "NUMBER", "html", "TAG", "Some", "body", "content", "TAG", "Can", "get", "change", "to", "html", "TAG", "Some", "body", "content", "TAG", "I", "think", "you", "had", "a", "good", "point", "NUMBER", "The", "meaning", "of", "body", "only", "if", "be", "more", "clear", "than", "render", "tag", "if", "because", "like", "you", "said", "the", "condition", "be", "relative", "to", "the", "content", "in", "the", "tag", "not", "to", "the", "tag", "itself", "NUMBER", "Not", "really", "important", "but", "body", "only", "if", "confused", "me", "at", "first", "since", "it", "could", "be", "read", "as", "render", "body", "only", "if", "condition", "instead", "of", "render", "body", "only", "if", "condition", "NUMBER", "May", "be", "change", "to", "only", "body", "if", "could", "make", "it", "clearer", "NUMBER", "Good", "suggestion", "only", "body", "if", "seems", "much", "clearer", "to", "me", "NUMBER", "I", "was", "also", "confused", "when", "I", "first", "use", "this", "feature", "NUMBER", "I", "would", "add", "to", "this", "that", "maybe", "only", "body", "when", "or", "only", "body", "if", "make", "sense", "Maybe", "the", "current", "word", "comes", "off", "a", "bit", "strange", "because", "it", "intends", "to", "group", "the", "words", "body", "only", "but", "only", "if", "be", "already", "a", "phrase", "as", "in", "if", "and", "only", "if", "NUMBER", "the", "Html", "color", "highlight", "be", "not", "good", "enough", "for", "marko", "template", "file", "in", "Sublime", "it", "will", "be", "great", "if", "we", "can", "create", "one", "for", "Marko", "template", "Hey", "guys", "I", "just", "start", "work", "w", "Marko", "recently", "and", "find", "this", "thread", "NUMBER", "I", "ve", "ported", "your", "Atom", "grammar", "file", "to", "a", "Sublime", "Textmate", "format", "NUMBER", "I", "ve", "also", "ported", "the", "snippets", "as", "sublime", "completions", "NUMBER", "Should", "be", "handy", "for", "us", "ST", "fans", "NUMBER", "LINK", "marko", "I", "ve", "currently", "get", "a", "PR", "LINK", "_control_channel", "pull", "NUMBER", "to", "get", "this", "into", "the", "Package", "Control", "default", "channel", "NUMBER", "Will", "update", "the", "readme", "once", "it", "gets", "merge", "NUMBER", "patrick", "steele", "idem", "NUMBER", "Sure", "thing", "I", "will", "update", "that", "section", "as", "soon", "as", "it", "s", "add", "to", "the", "package", "control", "channel", "NUMBER", "I", "couldn", "t", "find", "a", "tool", "to", "convert", "the", "grammars", "in", "that", "direction", "atom", "tm", "so", "I", "write", "a", "little", "script", "which", "I", "be", "still", "work", "on", "actually", "will", "add", "to", "github", "soon", "NUMBER", "There", "was", "some", "manual", "effort", "involved", "too", "Not", "to", "toot", "my", "own", "horn", "here", "but", "I", "ported", "merwan", "NUMBER", "s", "Sublime", "syntax", "package", "to", "VS", "Code", "NUMBER", "For", "anyone", "needing", "this", "check", "it", "out", "here", "LINK", "marko", "There", "be", "several", "use", "cases", "where", "you", "d", "want", "NUMBER", "html", "file", "instead", "of", "NUMBER", "marko", "file", "NUMBER", "So", "I", "ve", "add", "support", "for", "NUMBER", "marko", "NUMBER", "html", "file", "NUMBER", "Hey", "thanks", "for", "the", "quick", "reply", "I", "ve", "refactored", "the", "code", "as", "request", "it", "should", "be", "all", "fine", "now", "NUMBER", "The", "test", "do", "pass", "NUMBER", "I", "was", "struggling", "with", "this", "issue", "for", "an", "hour", "until", "one", "of", "our", "coworkers", "told", "me", "how", "to", "do", "it", "NUMBER", "Please", "add", "it", "to", "the", "documentation", "NUMBER", "to", "reassign", "a", "value", "to", "an", "exist", "variable", "we", "need", "to", "use", "assign", "TAG", "Yes", "please", "Is", "it", "possible", "to", "programmatically", "call", "taglibs", "Currently", "we", "can", "do", "the", "following", "when", "including", "template", "fragment", "TAG", "I", "can", "include", "a", "different", "template", "based", "on", "the", "value", "of", "module", "NUMBER", "alias", "NUMBER", "I", "d", "like", "to", "be", "able", "to", "have", "the", "same", "logic", "with", "taglibs", "NUMBER", "Something", "like", "this", "TAG", "TAG", "Currently", "I", "can", "do", "the", "following", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "TAG", "This", "would", "work", "but", "I", "d", "like", "to", "avoid", "having", "to", "copy", "over", "the", "same", "parameter", "code", "NUMBER", "This", "will", "work", "NUMBER", "Thanks", "NUMBER", "TAG", "TAG", "The", "new", "line", "between", "these", "two", "custom", "tags", "should", "be", "preserved", "NUMBER", "Hi", "I", "need", "to", "define", "my", "custom", "tags", "use", "marko", "node", "module", "but", "not", "use", "JSON", "file", "describe", "here", "LINK", "marko", "taglibjson", "NUMBER", "Maybe", "there", "be", "something", "like", "that", "javascript", "var", "marko", "require", "marko", "marko", "NUMBER", "defineTag", "my", "hello", "renderer", "require", "NUMBER", "hello", "renderer", "attributes", "name", "string", "Thank", "you", "philidem", "Looking", "forward", "to", "use", "this", "feature", "in", "my", "project", "NUMBER", "I", "agree", "with", "you", "this", "be", "right", "decision", "in", "this", "case", "NUMBER", "But", "in", "my", "situation", "I", "need", "to", "integrate", "Marko", "into", "my", "framework", "NUMBER", "It", "means", "I", "need", "to", "register", "some", "module", "wrappers", "as", "custom", "tags", "and", "it", "be", "needed", "to", "do", "before", "calling", "compile", "method", "NUMBER", "Actually", "this", "be", "not", "a", "big", "problem", "for", "me", "because", "I", "have", "simplified", "stream", "based", "HTML", "parser", "for", "use", "these", "module", "wrappers", "as", "custom", "tags", "NUMBER", "I", "just", "wanted", "to", "remove", "my", "implementation", "and", "replace", "it", "with", "Marko", "functionality", "NUMBER", "Thank", "you", "anyway", "NUMBER", "I", "really", "like", "the", "idea", "of", "html", "templating", "but", "I", "discover", "an", "issue", "when", "I", "tried", "to", "use", "it", "in", "my", "usual", "dev", "flow", "NUMBER", "As", "I", "understand", "now", "the", "require", "able", "template", "be", "made", "possible", "through", "a", "temp", "file", "fs", "NUMBER", "writeFileSync", "tempFile", "compiledSrc", "encoding", "utf", "NUMBER", "fs", "NUMBER", "renameSync", "tempFile", "targetFile", "return", "require", "targetFile", "and", "although", "you", "can", "bust", "template", "cache", "with", "unload", "templatePath", "this", "doesn", "t", "clear", "node", "s", "module", "cache", "NUMBER", "So", "every", "time", "you", "require", "targetFile", "it", "will", "return", "the", "same", "compiled", "template", "regardless", "your", "meddling", "with", "marko", "s", "cache", "NUMBER", "It", "s", "possible", "to", "clear", "node", "s", "cache", "with", "delete", "require", "NUMBER", "cache", "absolutePath", "though", "but", "manually", "it", "would", "be", "tedious", "to", "track", "every", "unneed", "compiled", "template", "NUMBER", "The", "problem", "this", "makes", "be", "during", "development", "when", "a", "file", "change", "I", "want", "to", "clear", "the", "cache", "so", "the", "engine", "can", "re", "render", "the", "template", "or", "refresh", "the", "browser", "for", "instance", "NUMBER", "I", "think", "write", "the", "compiled", "template", "to", "disk", "should", "be", "a", "feature", "or", "an", "option", "rather", "than", "a", "byproduct", "of", "rendering", "NUMBER", "Is", "there", "a", "way", "not", "to", "write", "the", "compiled", "template", "directly", "to", "disk", "but", "rather", "keep", "it", "only", "in", "memory", "I", "think", "it", "would", "be", "useful", "in", "development", "NUMBER", "Thanks", "in", "advance", "Yes", "restarting", "the", "whole", "process", "be", "a", "way", "NUMBER", "But", "it", "takes", "a", "little", "more", "time", "than", "just", "letting", "a", "few", "template", "re", "render", "NUMBER", "And", "update", "template", "be", "a", "fairly", "frequent", "occurrence", "sometimes", "NUMBER", "About", "the", "hackery", "once", "I", "saw", "a", "method", "where", "a", "module", "was", "loaded", "from", "raw", "string", "and", "executed", "NUMBER", "I", "think", "it", "s", "a", "way", "of", "instantiating", "modules", "on", "the", "fly", "NUMBER", "NUMBER", "Ah", "there", "I", "find", "it", "LINK", "But", "it", "s", "not", "really", "module", "loading", "creating", "though", "NUMBER", "Well", "first", "I", "really", "appreciate", "the", "detailed", "response", "NUMBER", "Indeed", "you", "can", "clear", "node", "s", "require", "cache", "I", "thought", "about", "that", "too", "NUMBER", "A", "bit", "hacky", "for", "my", "taste", "but", "that", "s", "just", "me", "NUMBER", "As", "for", "the", "template", "loading", "for", "disk", "I", "see", "a", "sound", "reason", "NUMBER", "I", "ve", "always", "miss", "the", "ability", "to", "debug", "template", "easily", "NUMBER", "Although", "I", "have", "to", "admit", "it", "feels", "clutter", "to", "generate", "a", "script", "for", "each", "template", "but", "it", "might", "just", "take", "some", "get", "use", "to", "NUMBER", "I", "see", "the", "benefits", "however", "NUMBER", "And", "thank", "you", "for", "the", "resources", "I", "ll", "check", "them", "out", "soon", "NUMBER", "Have", "to", "said", "that", "I", "m", "really", "interested", "in", "this", "issue", "but", "I", "can", "t", "get", "it", "to", "work", "NUMBER", "My", "workflow", "add", "this", "to", "the", "top", "of", "app", "NUMBER", "js", "javascript", "var", "marko", "require", "marko", "require", "marko", "browser", "refresh", "NUMBER", "enable", "require", "marko", "hot", "reload", "NUMBER", "enable", "require", "fs", "NUMBER", "watch", "web", "marko", "function", "event", "filename", "if", "NUMBER", "marko", "NUMBER", "test", "filename", "require", "marko", "hot", "reload", "NUMBER", "handleFileModified", "filename", "At", "this", "point", "starting", "my", "app", "with", "iojs", "app", "NUMBER", "js", "doesn", "t", "serve", "the", "template", "anymore", "and", "get", "TypeError", "Cannot", "read", "property", "pipe", "of", "undefined", "Then", "I", "npm", "install", "browser", "refresh", "and", "browser", "refresh", "taglib", "and", "add", "TAG", "to", "my", "layout", "javascript", "var", "server", "app", "NUMBER", "listen", "NUMBER", "function", "var", "host", "server", "NUMBER", "address", "NUMBER", "address", "var", "port", "server", "NUMBER", "address", "NUMBER", "port", "console", "NUMBER", "log", "App", "listening", "at", "LINK", "s", "s", "host", "port", "if", "process", "NUMBER", "send", "process", "NUMBER", "send", "online", "console", "NUMBER", "log", "Sending", "online", "message", "Inside", "the", "listen", "of", "app", "NUMBER", "Finally", "launching", "the", "command", "with", "browser", "refresh", "browser", "refresh", "App", "start", "pid", "NUMBER", "browser", "refresh", "Waited", "NUMBER", "ms", "without", "receiving", "online", "from", "child", "process", "NUMBER", "Page", "refresh", "triggered", "over", "WebSockets", "co", "nnection", "NUMBER", "App", "listening", "at", "LINK", "Sending", "online", "message", "browser", "refresh", "Server", "be", "ready", "NUMBER", "Page", "refresh", "triggered", "over", "WebSockets", "connection", "NUMBER", "NUMBER", "TypeError", "Cannot", "read", "property", "pipe", "of", "undefined", "at", "E", "JS", "NUMBER", "Next", "app", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "layer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "next", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "route", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Route", "NUMBER", "dispatch", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "route", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Layer", "NUMBER", "handle", "as", "handle_request", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "layer", "NUMBER", "js", "NUMBER", "NUMBER", "at", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "Function", "NUMBER", "proto", "NUMBER", "process_params", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "next", "E", "JS", "NUMBER", "Next", "node_modules", "express", "lib", "router", "index", "NUMBER", "js", "NUMBER", "NUMBER", "at", "E", "JS", "NUMBER", "Next", "node_modules", "express", "stormpath", "lib", "stormpath", "NUMBER", "js", "NUMBER", "NUMBER", "at", "E", "JS", "NUMBER", "Next", "node_modules", "express", "stormpath", "node_modules", "async", "lib", "async", "NUMBER", "js", "NUMBER", "NUMBER", "Also", "require", "marko", "browser", "refresh", "NUMBER", "enable", "be", "already", "calling", "hotreload", "NUMBER", "I", "m", "not", "sure", "where", "I", "miss", "the", "point", "in", "the", "setup", "HotReload", "be", "call", "in", "the", "debugging", "and", "here", "s", "how", "I", "call", "my", "template", "javascript", "var", "formulaTemplate", "marko", "NUMBER", "load", "require", "NUMBER", "resolve", "NUMBER", "web", "marko", "formula", "NUMBER", "marko", "app", "NUMBER", "get", "formula", "function", "req", "res", "formulaTemplate", "NUMBER", "ream", "NUMBER", "pipe", "res", "It", "s", "a", "whole", "new", "project", "all", "package", "be", "up", "to", "date", "on", "Windows", "NUMBER", "Replacing", "pipe", "with", "the", "direct", "rendering", "solve", "the", "problem", "NUMBER", "All", "be", "work", "now", "it", "s", "great", "to", "play", "like", "this", "to", "better", "understand", "Marko", "NUMBER", "Also", "I", "supposed", "that", "browser", "refresh", "call", "node", "cmd", "and", "no", "more", "iojs", "be", "there", "a", "way", "to", "tune", "this", "Thx", "Patrick", "Hi", "Patrick", "here", "s", "another", "beginner", "question", "I", "have", "a", "fragment", "that", "render", "properly", "when", "directly", "call", "NUMBER", "For", "test", "purpose", "I", "only", "use", "this", "code", "Hello", "data", "NUMBER", "name", "TAG", "TAG", "color", "TAG", "TAG", "TAG", "No", "colors", "TAG", "This", "fragment", "be", "then", "include", "in", "the", "main", "layout", "but", "when", "I", "render", "a", "page", "that", "extend", "the", "layout", "the", "data", "field", "be", "no", "more", "presents", "and", "the", "resulting", "html", "be", "different", "from", "a", "direct", "call", "NUMBER", "How", "be", "that", "possible", "A", "couple", "minor", "fix", "NUMBER"], "text_count": [0, 30672, 7157, 3518, 2465, 239, 2574, 7, 134, 3625, 4130, 8554, 4290, 3154, 3669, 1319, 0, 0, 0, 0, 8964, 2911, 1639, 1311, 1890, 1558, 0, 0, 0, 0, 17927, 11129, 7001, 403, 3661, 1157, 0, 0, 0, 0, 21574, 261, 9717, 8323, 5931, 0, 0, 0, 0, 0, 6237, 2514, 3084, 1738, 2772, 1088, 2331, 0, 0, 0, 18922, 1194, 15972, 806, 0, 0, 0, 0, 0, 0, 13303, 1679, 9494, 4039, 1381, 0, 0, 0, 0, 0, 22617, 9901, 1893, 9932, 1013, 831, 0, 0, 0, 0, 1210, 5830, 601, 0, 0, 0, 0, 0, 0, 0, 20421, 3406, 12863, 4465, 0, 0, 0, 0, 0, 0, 39042, 73635, 1986, 3875, 1354, 984, 0, 0, 0, 0, 96850, 275, 71400, 631, 14057, 23302]}]