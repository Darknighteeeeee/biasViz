Also CC @oprisnik   Thanks @novotnyfra for raising this issue :)
@zhoulailai please replace the template with your question/bug-report when opening a new issue :)  Yes, this seems to be a duplicate of #2049 (especially https://github.com/facebook/fresco/issues/2049#issuecomment-367235216). @jyh149129, I'm closing the issue here to focus the discussion there :)
What happens if you don't set scale type but use ResizeOptions instead?  Hi @tasneembohra
My guess is that com.taobao.sophix.core is connected to this.
Please take a look on the link I provided to see if you're using the correct code, otherwise please provide a code sample to reproduce your issue. The code looks good and should work. Does this happen exclusively for GIF images or also for normal images? Do you have a sample GIF for us?  Try calling `SoLoader.setInTestMode()` in your test setup (`@Before` method). We do this in a bunch of our tests as well, see:
This doesn't mean that this issue is wrong, it's just for focusing communication :) Let me know if you think that these are separate problem and I'll promptly re-open.  Hi @Anilugale and @lin-zy1229, thank you very much for raising the issue. This might be due to our updates regarding the compile/api directives in 1.8.0. We'll look into reproducing this locally such that I can precisely see what's going wrong here.
When you figure out something in the mean time, please let me know. @Anilugale in your issue, you specify:
But also:
> frescoLibVersion = '1.5.0'
Also, what is your React Native version? Well, React Native depends on Fresco 1.3.0, see here:
So if you're overriding the Fresco version you can expect things not to work. I'm checking internally to see if / how we can fix this.  Hi @ChinmayLad, thanks for raising the issue. I'd need some more information in order to help you.
Can you provide which version of Fresco you are using and which Phone (model + Android API) you are using? Also, does it work when you comment out the line `configureCaches(configBuilder,getAppContext());`?
WE've not planned to implement support for this. You are more than welcome to add support and submit a pull request though since it sounds like a useful feature.  Hi, @AlirezaGhanbarinia, you can use placeholderImageScaleType and pass there scale type from http://frescolib.org/docs/scaletypes.html Can you please specify what is thumbnail in your case? Where do you use, what do you show there?
I thought thumbnail is the same as "placeholder". Hi @AlirezaGhanbarinia, can you post some sample code that reproduces the issue? I'm not sure if thumbnail refers to what we call "placeholder" (see http://frescolib.org/docs/placeholder-failure-retry.html) or if you are doing a multi-uri request (see http://frescolib.org/docs/requesting-multiple-images.html). Hey @AlirezaGhanbarinia, I've looked into this and tried to reproduce the issue. I took the `DraweeScaleTypeFragment` fragment from the Showcase sample app and changed the following method:
private void changeMainDraweeUri(Uri uri) {
final AbstractDraweeController controller =
.setUri("http://frescolib.org/static/sample-images/animal_a_xxl.jpg")
.fromUri("http://frescolib.org/static/sample-images/animal_d_xxl.jpg")).build();
mDraweeMain.setController(controller);
* Code sample which reproduces this issue
Feel free to open a new task with a compilable sample (or ideally a modification of the show case app) that demonstrates the issue.  Thanks you for reporting this @eaggle. Does it behave differently for gif's? Hi @eaggle. Android does not natively support GIFs and animated WebPs. Fresco includes custom decoders that make use of native C/C++ libraries to add that functionality and manually create Bitmap frames - which is not hardware accelerated.
I'm afraid that at the moment there's not a lot that you can do. You can customize the animation so only selected animation frames are played (and drop the rest) or have some GIFs tap-to-play and you should ensure that the memory cache is adequately sized. If that is not the case (e.g. imagine the cache is 0, you cannot cache any frames and always have to re-decode all the frames).
I can't see this from your stack trace for sure, but suspect this from exception.
```  Hi @asadullahrao
- Are you setting any ResizeOptions when loading the image?  Hi @oldmansulaiman
The PR you sent is breaking the tests for scenarios where `wasImmediate` should be `false`, it seems like after your change it always returns `true` which is not expected.  I'm afraid I don't understand what your problem is. I'm not sure what you mean by "memory jitter"? Are you hitting a crash? Is there a stack trace that you can share from the Meizu phone?  Hi @wangzhengyi
Thanks!  Hi @yihuaqi !
Closing due to no response from the submitter.  @obabujiApp, can you please follow the guidance when posting issues. We need more details to help you.
This doesn't look like anything I've seen before :(. It looks like the call isn't even making it into some a DraweeView, or any Fresco code for that matter.
I'm guessing you're not able to repro this locally, right? Try switching screens really quickly / a lot (maybe even write an espresso test that does it). Could be some weird race condition.
I'm sorry this isn't more helpful, but I don't have a lot to go on without code / a repro. I believe this was fixed ðŸ˜Š  This issue has no details at all. Please open another if you want to raise something.  Hi, @JinohK, thank you for reporting this issue. I was able to reproduce it in our showcase app. Looks like we don't support downsampling of gifs. Downsampling / resizing for GIFs is indeed not supported. Pull requests are welcomed :)  Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla. **If you are contributing on behalf of someone else (eg your employer)**, the individual CLA may not be sufficient and your employer may need the corporate CLA signed.
Does this happen when you are displaying animated GIFs / WebPs? How are you using Fresco? In that case, this looks like a duplicate of #1950. Please check the discussion there.  Thanks. It would be great to look a bit more into this and see if there is something we need to do on the Fresco side. I'll keep this open in case somebody wants to do that. Pull requests are always welcome :) Thanks @hanhailong, yes that should definitely be changed. I'll go ahead and close this issue. If there's anything on the Fresco side, let us know and we can revisit.  Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla. **If you are contributing on behalf of someone else (eg your employer)**, the individual CLA may not be sufficient and your employer may need the corporate CLA signed.
11-01 14:19:03.537  1281  1281 F DEBUG   :     #15 pc 00d277a0  /data/app/com.facebook.fresco.samples.showcase-1/oat/x86/base.odex (offset 0x664000) (void com.facebook.animated.webp.WebPFrame.renderFrame(int, int, android.graphics.Bitmap)+84)
If you change the NDK abi filter to include armeabi-v7a. Does that make a difference?  Thanks for the bug report! This is weird. The Drawable.Callback, which is used to trigger invalidations for example when the image has been downloaded / decoded should also work for animated images.
Can you point to a sample app which demonstrates the problem? I'm closing this issue due to inactivity. If this is still a problem, let us know!  Sounds good. Let us know if you're still experiencing issues.  Merging with #1862   Hi @lemon-zzz, for GIF images we do not support `setDownsampleEnabled()` and `ResizeOption`s. This is because we don't have the primitives for efficient resizing of GIF images.
Hope this information is helpful and answers your question. Otherwise, please feel free to comment here and I'll reopen the issue.  Hi @gongzelong0718, this looks like a problem with the configuration of your system or network.
Try setting `fresco:roundWithOverlayColor="@color/you_background_color"` instead (it's also a bit more performant)  Hi @wolongalick,
Let us know if this still doesn't work for you, and if so, give us more info on your env: do you use the gradle wrapper or local gradle? What target are you trying to run / build? Looks like the original issue (importing project) has been resolved. If you think the ANR is a Fresco issue, we need more details. Feel free to open a separate GitHub issue.  Hi @kraghu. Do you think you can provide these problematic GIFs, to help us debug? CC @oprisnik  What's the crash that you're seeing?  @hcadoid, I'll close this task since the provided solution most likely fixed the issue and I haven't heard otherwise. Thanks @efrohnhoefer!
CC @lambdapioneer for native magic. Hi @newjorchen, thanks for raising the bug and thanks for having a detailed look already.
You can set a URI override in the setting and everything works fine for me if I use a GIF.
Could you please also include the stack trace of the exception?
Hi @rhettor,
Once the user changes the brightness you could switched between view 1 & 2   Hi @wangfaxi1985, when you say image size, is that width * height?
It would also be helpful if you could share the problematic image with us. Thanks! @wangfaxi1985 Depending on the device you are running this on, there are limits to how large a bitmap can be. On older devices it is 2048x2048 and on newer devices it will be bigger than that.
Unless a trim event is triggered due to lack of memory the cache should stay around that size. I'm closing this issue due to inactivity. If this is still a problem, let us know!  Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla. **If you are contributing on behalf of someone else (eg your employer)**, the individual CLA may not be sufficient and your employer may need the corporate CLA signed.
If you have received this in error or have any questions, please contact us at [cla@fb.com](mailto:cla@fb.com?subject=CLA%20for%20facebook%2Ffresco%20%231894). Thanks!  Hey @demonbibi, these kind of regressions can be caused by very verbose logs (like we set them by default in the showcase app). Try to set `FLog.setMinimumLoggingLevel(FLog.ERROR);`
On my emulator with `VERBOSE` (default):
CC @oprisnik (do we maybe to change the default log level?) Just verified as well that turning off logging in the RecyclerView sample in our Showcase app greatly improves dropped frames. Closing the issue now.  Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla. **If you are contributing on behalf of someone else (eg your employer)**, the individual CLA may not be sufficient and your employer may need the corporate CLA signed.
If you have received this in error or have any questions, please contact us at [cla@fb.com](mailto:cla@fb.com?subject=CLA%20for%20facebook%2Ffresco%20%231892). Thanks! Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks! Good catch and thanks for writing this pull-request! I'll land it now @lambdapioneer has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D5774676).  Hey @younas-bangash, have a look at http://frescolib.org/docs/scaletypes.html on how to use scale types. Let me know if this does not solve the problem for you or I've misunderstood the question. I'd be inclined to say that this is likely caused by the layout that includes the `SimpleDraweeView`. We can confirm that the following way: enable the controller overlay in the Fresco configuration (see below) and post the screenshot. Ideally, you also enable the layout bounds in the developer settings. CC @oprisnik
Where you initialize Fresco add the following:
```java
draweeConfigBuilder.setDebugOverlayEnabledSupplier(
Alternatively, if you find a way to reproduce it in the showcase app that is in this repo, we can work from there. Sorry that I couldn't help you with the information provided. I'll close this issue then.  Hey @ar-g this looks like a double-free or a bad-reference-free. From the logcat I cannot narrow this down to Fresco. Do you have more details such as:
- Does it only reproduce when using Fresco?
- How can we reproduce this error? @ar-g with "double free" I mean a bug that might be in native code where free is called twice (or on something un-allocated).
Moreover, there stack trace covers reference queue and `java.math.Native`. Do you use `BigInteger` or similar in your code (or does any other library?). I know that `BigInteger` makes use of the `ReferenceQueue` to manage its native counter parts. In that case stack-overflow or reporting a bug for Android might be more appropriate. Since none of the traces point to Fresco, it's hard to say what's going on without additional information, so I'm closing this for now. If this is still an issue, let us know.  Hey @ar-g, that's very interesting. It might be that some compiler/linker defaults changed.
(Google Translate)  Looks like there is not any information on this bug report. @lemon-zzz please fill in bug report. For now, closing this issue  Writing files to disk is handled in a separate thread so it's quite possible for an image request to complete but the file not yet be available from the cache.
Fresco is only used by RN on Android but I'm not sure whether you're seeing this on both platforms.
ImageRequest request = ImageRequestBuilder.newBuilderWithSource(Uri.parse("http://p1.music.126.net/n4ypQKBBkp4NMdMb2Bxr6Q==/2042892604407899.jpg"))
draweeView.setController(controller);
* Are DraweeView attached/detached correctly? Hi @wangbin0802,
Hi, @Thiross, can you please specify following details, which can help us to identify issue:
``` Java
@Override
> 08-22 14:05:01.365 18854-18854/com.example.frescogifcrash A/art: art/runtime/runtime.cc:403]   native: #04 pc 00000000001e4e80  /system/framework/arm64/boot-core-libart.oat (Java_dalvik_system_VMRuntime_runHeapTasks__+124)
> 08-22 14:05:01.365 18854-18854/com.example.frescogifcrash A/art: art/runtime/runtime.cc:403]   at java.lang.Daemons$HeapTaskDaemon.run(Daemons.java:433)
> 08-22 14:05:01.365 18854-18854/com.example.frescogifcrash A/art: art/runtime/runtime.cc:403]   native: #03 pc 00000000000bc808  /system/framework/arm64/boot.oat (Java_java_lang_Thread_sleep__Ljava_lang_Object_2JI+164)
The fix should go with the next release. I'll close this task here for now, but please ping it when the changes do not fix your issue. This issue should have been fixed already. If you still experience this, please give us a sample image @Anilugale so that we can investigate.  Hi, @fabulant, thank you for great report, we will take a look at this issues.  Fresco doesn't check the file suffix. Just pass the file to a DraweeView and it should work. See also http://frescolib.org/docs/supported-uris.html  Do you have the same measurements for the old version? Could you post a comparison video? In all the tests I did, the new version performed way better.
How many GIFs are you displaying at a time? Do you use a RecyclerView?   Thanks for the videos and sample GIFs. I'll try to repro with one of our sample apps. This should not happen.  Do you have a image URI for such a corrupted / invalid WebP? Yeah, having an option not to crash would be nice. Feel free to check out the stack trace and submit a pull request :)  Please take a look at our RecyclerView example here in our Showcase app that caches images: https://github.com/facebook/fresco/blob/master/samples/showcase/src/main/java/com/facebook/fresco/samples/showcase/drawee/DraweeRecyclerViewFragment.java  Almost certainly this is because the smaller images are being loaded from a thumbnail and that misses the `ResizeAndRotateProducer` on the way back.
```java
@Override
```java
.setUri(uri)
@Override
simpleDraweeView.setController(controller);
- How are you using Fresco? (please include code if possible)
The bigger problem for me though is that custom format checkers are queried first. As such, every single image you load would run through the entire file seeking `<svg` which assuming most images are JPEGs will be hugely wasteful. And of course you could hit a false positive if you seek through every file in full.
2. Do you enable multidex?
@LIHAIYI I hope that helps you.  Thank you! Looks good (y)
CC @kirwan who knows about the `PartialDiskCacheProducer` and whether we should include the change there as well. [@zjupure](https://github.com/zjupure) has updated the pull request. View: [changes](https://github.com/facebook/fresco/pull/1845/files/4607e708af1b0a2863df7c02c4c656fd2055e1a9..872714be1a5e548c432e4074558fab940fc16987) [@zjupure](https://github.com/zjupure) has updated the pull request.  Hi @AlirezaGhanbarinia,
```java
@Override
HI @thomas-le-bihan, thanks for raising this issue. Can you please provide the following information which I need for being able to help with this:
- set the ImageRequest and DraweeView
- Change DraweeSimpleFragment.java to: https://gist.github.com/lambdapioneer/a04ccf472708b2cfe5d2f779efc59ddf
- Observe that image is gray for some time, but finally gets replaced by correct image Hi @thomas-le-bihan,
CC @foghina   This looks very specific to React Native and not Fresco. My guess is any image format would give the same error. Can you confirm that this only happens for webps?  Are you setting the same image or a different image when it flashes? If it's the same image it **should** be in bitmap cache and there shouldn't be any flashing.
You can try using `RetainingDataSourceSupplier` from #1328 to keep the previous image while the new one is being loaded. @duanyunfei what kind of UI do you have where this issue appears? If it is a recycler view, you might want to have a look at the sample of the showcase app and check if it matches with your code:
Yeah, the SVG decoder is just a very simple example, so as suggested by Kirwan, making the header checks more robust is the way to go. Feel free to send a PR. @filipedelimabrito, can you confirm that this issue can be closed? I believe that my fixes should have solved your SVG issue. @filipedelimabrito The change is included in [1.5.0](https://github.com/facebook/fresco/releases/tag/v1.5.0) so you can simply upgrade to test. Yeah, this should be fixed now. Let us know if you're still experiencing this issue.  Hey @mac-pro, thanks for opening the issue. All of our dependencies should be declared as `provided`, in which case you can declare whatever version you want in your app, as long as the APIs that we use don't conflict (which they shouldn't). Are you finding that that is not the case? As you say, we use very, very little of the support library.
I'm curious why this is a particular concern to you though, given I assume you use other libraries which also depend on the support library. To add to what @kirwan said, increasing the major version of a library should be reserved for big breaking changes in the public API of said library. The support library is not part of our public API, so I wouldn't bump the major version when updating that.  Thanks, I verified that this actually doesn't work right now.  We've released [Fresco v1.4.0](https://github.com/facebook/fresco/releases/tag/v1.4.0), which includes a new implementation for animated GIFs that is be way more performant, especially in the case where you display multiple GIFs. Let us know if you're still experiencing problems with 1.4.0.  Do you have a sample WebP file where this happens? @UFreedom The next release of Fresco will contain an updated version of libwebp as well as improved animation support. Once that is released, let's retest this.
@xiaoyao27610, please provide details to make this actionable for us. The issues have a template with the information that we'd need. In this case especially the image file would be interesting.  Please fill in the template of the issue. Otherwise this is hardly actionable for us.  Hi @spapapan, thanks for the issue. The `DraweeController` shouldn't cause any CPU cycles after the DraweeView has been detached. I've some details that I'd need to help here :)
Thanks!  Hi @yuehongwei !
Also, what does your app do? Is it showing a lot of images at once, and are the images large? OK, I would recommend that you try to capture a memory dump at a point a little bit before you get the crash. You can find some information on how to do so from Android Studio here: https://developer.android.com/studio/profile/am-hprof.html Closing as there is nothing further to be investigated on our side.  @erikandre has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D5199235).  Hi @orenklein!
See http://frescolib.org/docs/using-image-pipeline.html, http://frescolib.org/docs/datasources-datasubscribers.html and http://frescolib.org/docs/closeable-references.html  Hi @thomas-le-bihan!
**If you are contributing on behalf of someone else (eg your employer)**: the individual CLA is not sufficient - use https://developers.facebook.com/opensource/cla?type=company instead. Contact cla@fb.com if you have any questions. Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks! Thanks @Armaxis for fixing this! I'll merge it ðŸ‘  @lambdapioneer has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D5133968). A new branch and PR is likely to be the easiest way :)   Duplicate of #1445  Thanks @Gericop for the detailed issue. Can you also print the relevant error message output from logcat? #1176 describes why this is currently not working. However, for now you can set the drawable in Java and it should work. I don't think we can easily change the inflater to use `AppCompatResources` since the whole library would have to depend on `AppCompatResources` otherwise. Another solution would be to extend `SimpleDraweeView` and inflate the placeholder manually using `AppCompatResources`.  Can you provide a stacktrace and your image pipeline config? From the URL alone we won't be able to help. @qbaowei You said in the original issue that the app crashed. If so, I would expect you to see a crash in Logcat.  Thanks for these. I'm just curious, are you actually using Volley as the backend for drawee? @kirwan has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D5095422). Fantastic. Thanks @YkSix, we appreciate that.  @kirwan has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D5095445).  @YkSix updated the pull request - [view changes](https://github.com/facebook/fresco/pull/1775/files/99bcb65d110f2da8f090a30f8e6744896dbaacc1..c373ef0e78cfc7d445f3a4524aa3b2d33f0318db) @kirwan has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D5095502).  Hi @sohayb, you want your call into JNI look something like this in order to make sure the references are not closed while your code is executing:
```java
Example: https://github.com/facebook/fresco/blob/6ed61d352548f2462337a4af9841c3d050d9cabb/samples/showcase/src/main/java/com/facebook/fresco/samples/showcase/postprocessor/ScalingBlurPostprocessor.java  This is strange and I'm inclined to suggest it's a problem with the shrinker, which I note is still [referred to as "experimental" in the docs](https://developer.android.com/studio/build/shrink-code.html#gradle-shrinker).
Take a look at the [Using Proguard](http://frescolib.org/docs/proguard.html) section of the docs to see how to avoid stripping that and other classes. @dongorigin Is it just that one particular device or all devices with that configuration?  The low-res image is only loaded from cache if the full image isn't already available. It won't be loaded from the network as that would mean two images being requested when only one is needed. @lushan1314 If you have two different image requests you can give them priorities. See the corresponding method in the image request builder.
```java
Hopefully this will resolve this issue. If not, please file a new issue or comment here so that this one can be reopened. Thanks!  Can you please fill in the issue template? We need additional information. I assume the problem has been resolved. If not, please let us know.  Unfortunately this is currently not supported @amodkanthe, you have to specify both the width and height. Similarly, Fresco also does not support `wrap_content`. More information on this topic can be found here: http://frescolib.org/docs/wrap-content.html Closing as this is not a prioritized feature for the near future.  What exactly do you mean by "the result resolution is less than the original"? What did you expect to see and what actually happened (see also the template we provide for issues)?
Hi @zhej,
repositories {
applicationId "inavr.fresco"
buildTypes {
repositories {
mavenLocal()
mavenCentral()
the OOM could be caused by a leak in some other part of the code and be thrown by the Bitmap allocation because Bitmap objects are usually big. Have you tested you application with some memory specific tools?
I can not reproduce this issue when trying to play other animated WEBP files, so I'm thinking that it might be an issue with the file itself. It might be a good idea to try different tools or different settings when exporting the animation (like trying to export it without alpha to see if the glitch is still there). There are a couple of interesting options you could try experimenting with. For example the "-bgcolor A,R,G,B" option (try setting a background with no alpha) or the options related to the dispose method for each frame. @notice501 , I suspect it could be an issue in `libwebp` since that is where the actual animation is handled. We are currently a bit behind the latest version of this library so there is always a chance that upgrading could resolve it. This will require quite a bit of testing though, so it's not something that will happen in the very short term. @UFreedom The next release of Fresco will contain an updated version of libwebp (0.6.0), hopefully this will resolve this problem. We've released [Fresco v1.4.0](https://github.com/facebook/fresco/releases/tag/v1.4.0), which includes a new implementation for animated GIFs and animated WebPs that is way more performant, especially in the case where you display multiple images. Let us know if you're still experiencing problems with 1.4.0. Thanks! Great to hear that it works now!  Hi @mappy-mobile!
Also, to be clear, is it a GIF you are loading or some other form of animated image? OK, that's good :)
```java
@Override
Fresco.newDraweeControllerBuilder()
@Override
Is the red/white a view behind the drawee view or the image itself?
As for the levels, it's true that the download is all that's used and that isn't ideal for animated GIFs. We actually don't generally use determinate progress bars ourselves though so I don't think we're likely to fix that soon. It's not a trivial fix because most images decode very quickly but animations can take a bit of time.  The view should fade in just like any other image.
Animations go through a different decode path though so it's quite likely there's a timing problem for you here where the first frame is still being decoded when the fade in occurs.
Can you tell me where the drawee is being created?
The comment had been added. @lambdapioneer has imported this pull request.  If you are a Facebook employee, you can view this diff [on Phabricator](https://phabricator.intern.facebook.com/D4658501). @caojianfeng, can you please update the pull request template?
For getting changes into the code base we require pull-requests to have a test plan. Just update the sections below the **bold** headers. Make sure you test plan compares the old- and new behaviour and can be reproduced. @lambdapioneer , I will write a Demo . The demo will enable StrictMode ,and Will crash with the old lib.
And when you replace the old lib with fixed one ,it will work fine. @lambdapioneer ,
``` Thanks @caojianfeng, for taking the time and testing the change :) I'll have it merged soon @lambdapioneer ,It`s my hornor.  @yunarta updated the pull request - [view changes](https://github.com/facebook/fresco/pull/1677/files/f054cd055877e073b0f4da7d6b30ca59592b457b..51d5fed88d2373abd4022de43dce2dbf1abde05c) @yunarta updated the pull request - [view changes](https://github.com/facebook/fresco/pull/1677/files/51d5fed88d2373abd4022de43dce2dbf1abde05c..f054cd055877e073b0f4da7d6b30ca59592b457b) Hi @yunarta, I landed a similar version of your PR in 62c58fd, that includes a test fix. Closing this now.  Great!
I have added a sample that shows how to use `CardView`, `Fresco` and `RecyclerView` with a grid layout here: https://github.com/facebook/fresco/blob/master/samples/showcase/src/main/java/com/facebook/fresco/samples/showcase/drawee/DraweeRecyclerViewFragment.java
Stackoverflow discussion for this issue: http://stackoverflow.com/questions/42353478/image-height-stretched-simpledraweeview  What version of fresco are you using? Well, the latest version is 1.1.0. Any chance you could check if you can repro on that?  See eacc313 - setting `placeholderImageScaleType` in XML works correctly. Make sure you don't mix-and-match setting the scaleType in XML and the actual image in Java. If you're setting the image in Java just do e.g.:
```java
``` @pavel163 either set both the image and the scaleType in XML, or set them both in code. This works:
```kotlin
draweeView.hierarchy.setPlaceholderImage(R.drawable.my_placeholder, ScaleType.FIT_CENTER);
```kotlin
What are the layout params for the DraweeView?
As a temporary work-around you can disable "Use Drawee" from the options menu.
Fresco.newDraweeControllerBuilder()
@Override
How do you use Fresco? @badwtg1111 your image works for me in our Showcase sample app:
CC: @oprisnik  Hi @wo327808864 and @shewim, thanks for the ping. Even though the GIF image might be a special case (not sure if it is within the standard), I think it's reasonable to expect that it does not crash the application. I'll make sure we look into this.
```java
I'm seeing that you are setting resize options in your image request. If the GIF image is larger than you'd ever display, you might get huge improvements by just shipping a smaller version  @facebook-github-bot stack-overflow Thanks for posting this! This issue looks like a question that would be best asked on [StackOverflow](http://stackoverflow.com/questions/tagged/fresco). StackOverflow is amazing for Q&A: it has a reputation system, voting, the ability to mark a question as answered. Because of the reputation system it is likely the community will see and answer your question there. This also helps us use the GitHub bug tracker for bugs only. Will close this as this is really a question that should be asked on SO.  Sorry Eric, we don't comment on future plans.  Have you tried passing a second parameter to `setProgressBarImage`? Like this:
android:id="@+id/drawee_view"
android:layout_width="@dimen/drawee_width_medium"
android:layout_height="@dimen/drawee_height_medium"
android:color="@color/accent"/>
So basically just use your last couple of lines for creating the controller and set it to the drawee holder. So you could do something like:
draweeView.setImageURI(...);
As you've noticed, it seems that OpenGL can't render all of these bitmaps. Can you try and make the images smaller? Do you use resizing or downsampling?
Thanks  According to the [URL RFC 1738](http://www.ietf.org/rfc/rfc1738.txt), the `@` symbol is a reserved symbol, so you have to encode it. Does it work if you use `goods%402x.png`? (`%40` corresponds to `@`)  Hi @korDen, this looks reasonable to me. Thanks a lot for this very helpful issue. Getting rid of deprecated flags is usually a good idea.
You could define an overlay with a `StateListDrawable` for local drawables. You would have to manually manage image loading in that case. I would suggest reading through the custom view guide (http://frescolib.org/docs/writing-custom-views.html) and using the pipeline directly (http://frescolib.org/docs/using-image-pipeline.html)  Hi @ccwls3290, can you provide a code sample that reproduces the issue? And can you rephrase what you are trying to achieve? Closing as this is enhancement is not prioritized to be implemented.
However, if you see this to be indicated for your case: Look at http://frescolib.org/docs/using-other-network-layers.html for using OkHttp3 and then learn how to deactivate security for OkHttp3. There should be tons of answers on stack overflow. @447zyg can you perhaps help @hss01248 ? I'm not sufficiently familiar with OkHttp3 here. Closing as the workaround detailed in this task seems to be enough to cover this use case.  Hi @LucianWang, the URI seems wrong. The correct one is of the format `Uri:///{resource_id}`. You can use `uri = UriUtil.getUriForResourceId(R.drawable.loading_player_cache)` in order to create the correct URI.  Hi @edconan93, can you provide us with a minimal code sample that reproduces the issue?
Please see http://frescolib.org/docs/rounded-corners-and-circles.html for some background and solutions to this. I think that this should solve your issue. You can either use the color overlay rounding mode or modify your image to have a 1px transparent border (so that transparent pixels will be repeated instead of the white ones. Unfortunately, there's no better solution yet.  Hi @zongjingyao, I cannot reproduce this in our demo app "uri app". Which Fresco version are you using? Also, please provide a minimal code example that reproduces the issue :) Thanks  Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!
```java
https://gfycat.com/EnormousExcitableAngelwingmussel
Closing the issue for now. Feel free to reopen if you can supply a valid repro (e.g. as a sample app). @senhor I've added double tap to the zoomableapp sample in 6309246. Check it out!  There does not seem to be an easy way to combine .aars, see https://stackoverflow.com/questions/20700581/android-studio-how-to-package-single-aar-from-multiple-library-projects
Thanks The new implementation is being worked on. We don't have an ETA yet. We've released [Fresco v1.4.0](https://github.com/facebook/fresco/releases/tag/v1.4.0), which includes a new implementation for animated GIFs and animated WebPs that is way more performant, especially in the case where you display multiple images. Let us know if you're still experiencing problems with 1.4.0.  Hi @wstczlt
Thanks  Hi @Dobrygnom,
Thanks   Ho @sourabhv
2. Call `draweeAvatar.setImageURI(null)` then `ImagePipeline.evictFromCache(Uri)` before setting the same Uri back to the avatar. I'm closing as there have been no follow-up questions.  I suggest trying the [solution here to use the ReLinker library](https://github.com/facebook/fresco/issues/933#issuecomment-186266187). We've found that's helped people in the past with this kind of problem.
Hi @xiaoyao27610, thanks for the bug report. As the method appears to be correctly gated to switch behavior depending on the phones API level, I suspect this might be device/model specific.
Hi @shixiangyu
Thanks @yangbo637829,
https://gfycat.com/PleasedAgileKudu
```java
@Override
.setOldController(mSimpleDraweeView.getController())
Just to note: you've called the namespace "fresco" but this will provide all properties defined in your app or other libraries you use.
when I use the Fresco 0.10.1ï¼Œthere  appears the custom property. But when I use the Fresco 0.14.1ï¼Œno custom property prompts. How can I solve this problem?
You might be able to use a `ProducerListener` and check for successful events from the cache producers. It involves checking Strings though.
The Media Variations API @lambdapioneer mentioned is intended to help in cases where you have the same image at different sizes and these may be suitable to serve a new request rather than requesting a new version of the image from the network.
Hi @ffelini, this looks like a race-condition when a controller listener is removed while an event is propagated. Thank you very much for reporting! Do you have any calls to `removeListener()` in your code?
@kukuhyoniatmoko updated the pull request - [view changes](https://github.com/facebook/fresco/pull/1499/files/22df3e42f9fe698a980aa3fde36c285983d91bc3..5d4d151a006bd376c311ab806f79d895a339499f)
@kukuhyoniatmoko updated the pull request - [view changes](https://github.com/facebook/fresco/pull/1499/files/5d4d151a006bd376c311ab806f79d895a339499f..7144d13e845369b7db6c20f013a8082f53b0b1d7)
@nesterov-n Your proposal makes perfect sense and a PR would be gratefully received.
Sorry @Doomkyn,
Great @Doomkyn,
@Override
sdv.setImageURI("http://lorempixel.com/400/400/sports/2/");
repositories {
That's very strange and I don't see how the existence of code which is unused could result in a piece of unrelated code breaking.
I'd need more information to understand how Fresco could result in this.
- Are you sure you don't use any of the Fresco APIs at all, so that removing it altogether doesn't break anything?
Also, 0.10.0 is quite old so I'd be interested in knowing if the same happens with 0.14.0.
Eric
Eric
Eric
PS : CircleCl is broken
- Which version of Fresco are you using?
- Do you use a custom network fetcher?
Hi @longlylong, it looks like you application is running out of memory. Is there a special connection to Fresco here?
Hi @rigdern and @npomfret,
Daniel
@Override
requestBuilder.addHeader("authtoken", "foobar42");
```java
@Override
@Override
To display a gif image using Fresco, you can use
Uri uri;
.setUri(uri)
Please show us the XML or `DraweeController` code that creates the view. I suspect there might be an issue with the `RoundingMethod` you're using.
http://frescolib.org/docs/using-drawees-xml.html#wrapcontent
Eric
dup of #1445
I think @aagnes had this solution in mind: https://github.com/facebook/fresco/issues/933#issuecomment-186266187
android:id="@+id/drawee"
Java:
How do you use Fresco? Could you provide a minimal example where we can reproduce the problem?
How are you using Fresco? How big are your images? Animations?
@Override
@Override
simpleDraweeView.setController(controller);
For example, a simple test application that I just built has 690 kB without Fresco and 953 kB with Fresco for the armeabi-v7a architecture, so Fresco adds approx. 250 kB to your APK. For 64bit builds, the APK gets ~50kb bigger since the native libraries take up a bit more space.
@jyh149129
Hi @jmbusby,
Hi @jmbusby,
Hi @s1rius ,
Looks like largeHeap fixed this issue.  Hi @ylbkoo
Hi @54binge,
Hi @54binge,
`simpleDraweeView.setController(null);`
Thanks for the logs, they have been very helpful. Your image uses the CMYK color space which is quite unusual and seems to create the problem:
Thank you very much @pungrue26, looks good!
For different sizes: You're using `bitmap.compress(Bitmap.CompressFormat.JPEG, 60, stream);` and I suppose that the implementation (or the parameters) are different compared to iOS, which leads to different file sizes.
@Override
@Override
Eric
Eric
Eric
Ok @kirwan
Eric
Eric
While I see your point that having finalizers adds a marginal perf penalty I don't think that it's the major cause for the memory issues here.
Both Facebook and Twitter are using Fresco - so if there would be any regression we'd see that in our graphs very-very early and it would effect us in a major way.
@fab1an:
Now here the real cost is the GC for the finalizers - and since Android is not Java we need to measure the penalty on both Dalvik and ART GC to understand what does that really mean to make that tradeoff.
@fab1an : you've already done some great analysis on this, I'd be happy if you'd help us analyze the cost of the GC penalty for Finalizers on Dalvik and ART. (A bit deeper than there's a second pass GC and object references on the heap).
@brianhama that is a red herring: the vm will create a `FinalizerReference` for each object that has a `finalize()` method. What you're looking at is not necessarily the queue of objects waiting to be finalized, but merely the list of all object instances implementing `finalize()`. The retained size is obviously huge, as it will include all the images that are on screen or in the bitmap cache.
cc @aagnes, @oprisnik to confirm
`include ':fbcore'`
`include ':drawee'`
`include ':drawee-backends:drawee-pipeline'`
`compile project(':drawee')`
repositories {
subprojects {
repositories {
mavenLocal()
mavenCentral()
> I don't know why gradle keep warn me imagepipeline-base and imagepipeline is jar but not with drawee.
Fresco.initialize(...);
Hi @MichaelArchangel
Hi @xiedong,
If there's any other issue, feel free to re-open this issue.  Hi @rafaelekol,
Hi @rafaelekol,
Hi @rafaelekol,
Can you try with newer versions of Fresco @rafaelekol? The issue does not reproduce for me in our Showcase sample app, so it's hard to say what's going on. If this is still a problem, let us know!
What do you mean with "muzzy"? Do you have a sample image and can you post a comparison between original and downsampled image?  Hi @sureshperiyasamy
Hi @lovearthhome,
Hi @yangjianjun198
Hi @caopeng000
Hi @caopeng000
are you using Drawee or accessing the Bitmap directly?
Closing old issue since it needs been in "needs details" state since last year.  Hi @chonamdoo,
Hi @chonamdoo,
Hi @chonamdoo,
WIth 1.8.0, we made SoLoader the new default, so this should be fixed. Hi @Anilugale,
There has to be a different issue for you.
I  use fresco in a listview with 150 items
My code:
</RelativeLayout>
@Override
sdv.setImageURI("http://lorempixel.com/800/800/");
I just changed the SimpleDraweeView of our `uriapp` sampe and changed the background to white.
android:id="@+id/simple_drawee_view"
We need more information how you use Drawee.
Why are you not using a simple DraweeView?
Second, you don't handle the Drawee lifecycle correctly (attach / detach events, setting the Drawable callback etc.).
How big are your GIFs (resolution and size) and how many do you display?
I think there is no easy way to do this without changing Fresco. I would suggest that you use smaller GIFs from the beginning (maybe let the server resize them for you) since such large GIFs will take up a lot of network traffic and it will also take quite some time to decode them (see #1231 for example).
You noticed higher memory usage only with 0.11.0? How much of a difference is there compared to 0.10.0, how are you using Fresco and what kind of images.
This have been tested with fresco 0.10.0, 0.11.0.
Greatings,
Eric
ETag: W/"PSA-aj-9k8tbmsEil"
Vary: Accept`
Vertical Scale                  : 0
Eric
http://frescolib.org/docs/using-drawees-xml.html#wrap-content
build draweeView with params :
and deco
As request is made with same headers with okHttp (3 now), the same picture send to both device with API 10 and API 17 have same size :  `GET /palourde_bleue-2.jpg HTTP/1.1" 200 86864`.
`HTTP/1.1 200 OK Server: nginx Content-Type: image/webp Content-Length: 86864 Connection: keep-alive ETag: W/"PSA-aj-9k8tbmsEil" Date: Sat, 18 Jun 2016 22:51:28 GMT Expires: Mon, 27 Apr 2026 08:13:48 GMT Cache-Control: max-age=310987340 Vary: Accept`
JFIF Version                    : 1.01
Y Cb Cr Sub Sampling            : YCbCr4:2:0 (2 2)
Vertical Scale                  : 0
Thank you very much for the very detailed description @eldk , that is amazing!
As you've mentioned previously this is still experimental and has a couple of issues.
https://groups.google.com/forum/#!topic/mod-pagespeed-discuss/GbntPnwiGTU
preambule : https://groups.google.com/forum/#!topic/mod-pagespeed-discuss/GbntPnwiGTU
Eric
Eric
In 0.10.0, we broke GIF support out into a separate dependency to reduce the size of the core library. Does your Gradle file include the following?
Are you using drawee or requesting image from the pipeline directly?
@massimocarli hbm1985 is asking the exact thing. So you would need BaseControllerListener to listen for the event.
@massimocarli
Hi @paulzin,
Hi @paulzin
There are a couple of possibilities:
- the uri and/or request parameters are actually not exactly the same
- there is a bug in the drawee logic
- something else
Are you sure that the communication framework includes Fresco ? Gradle is not supposed to put dependencies of library in the same aar. Normally those dependencies are specified in pom.xml files and gradle knows to download them together with the library if the library is needed. This way gradle can handle complex dependencies graphs without conflicts.
As @michalgr mentioned, I guess you are re-attaching the drawee view - which results in the flicker since animated images are heavier than normal image.
Thanks longya3xian. @a63622110: also have a look at our documentation here: http://frescolib.org/docs/multiple-apks.html
Please send logs to michalgr at fb dot com. Thanks !
06-03 14:56:12.989  1915  1915 V unknown:AbstractDraweeController: controller 4286d7a0 null -> 62: initialize
06-03 14:56:12.990  1915  8197 D skia    : Flag is not 10
What produces such an error message ? How do you make your app depend on Fresco ?
I think there may be a little confusion here about what auto-rotate means though and I will update the docs when the new API is released in Fresco 0.14.0.
- It allows us to dynamically change backgrounds and overlays
An additional change is that multiple backgrounds are from now on deprecated. Context:
draweeView.setController(null);
That's a very nice catch! Mega Like!
Is this GIF animated? Animated GIF frames are not stored in bitmap cache.
As stated, ant is not officially supported  So the first image in your screenshot should be the same size as the second?
keyAlias 'android'
buildTypes {
splits {
abi {
include 'x86', 'x86_64', 'arm64-v8a', 'armeabi-v7a', 'armeabi'
project.ext.versionCodes = ['armeabi': 1, 'armeabi-v7a': 2, 'arm64-v8a': 3, 'x86': 8, 'x86_64': 9]
repositories {
mavenCentral()
repositories {
maven { url 'https://maven.fabric.io/public' }
classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'
classpath 'com.canelmas.let:let-plugin:0.1.10'
repositories {
maven {
maven { url 'https://maven.fabric.io/public' }
apply plugin: 'com.neenbedankt.android-apt'
compile 'com.viewpagerindicator:library:2.4.1@aar'
compile('com.github.afollestad.material-dialogs:core:0.8.5.7@aar') {
compile(name: 'appintro', ext: 'aar')
compile 'com.nineoldandroids:library:2.4.0'
compile 'com.daimajia.easing:library:1.0.1@aar'
compile 'com.daimajia.androidanimations:library:1.1.3@aar'
compile 'com.github.dmytrodanylyk:android-morphing-button:98a4986e56'
compile('com.crashlytics.sdk.android:crashlytics:2.5.5@aar') {
By "some problem" and "no response", do you mean the image doesn't load?
btw: you can follow the status on our CI server: https://circleci.com/gh/facebook/fresco
I'm not sure what you mean? Do you want the width of the downloaded image, or are you asking how to get the width of your view into which you want to download an image (in which case, this is not really a Fresco issue)?
See also http://frescolib.org/docs/rounded-corners-and-circles.html
I don't think that should be the case, but glad that you found a solution.
@chthai64 Could you please rebase again?
Picasso does not recycle images at all. They all stay in memory until the containing view is dereferenced, which may not be until the activity exits.
Hi! I haven't checked what modifications you made to the samples code, but all you need to do is implement `GestureDetector.SimpleOnGestureListener` and set it as a setTapListener to your zoomable Drawee view.
@Override
`compile 'com.facebook.fresco:drawee:0.10.0'`
Did you add the support version for animated GIFs to your projects according to [Adding Fresco to your Project](http://frescolib.org/docs/index.html)?
`# fresco start------------------------
-dontwarn okio.**
-dontwarn javax.annotation.**
# fresco end ------------------------`
You can of course still us Fresco with support vector drawables that should work on all supported Android versions by building your own drawee hierarchy in Java.
draweeView.setHierarchy(
android:id="@+id/drawee"
Hay.
Hi @ziad-halabi9,
Hi @zfdang,
Hi @ndurell,
Hi @ndurell,
Hi @leeon7,
Hi @eastwoodwang and @Casper3635,
Thanks @wgykontage,
@howedeng Thank for this. We'll make some test about this.
@XuWeishun,
You say you're using the last displayed drawable but I wonder if you're somehow setting a drawable inside the same hierarchy twice, creating an infinite loop.
please follow the guide, it tells you all the essential steps to build fresco. And let me know which step you fail from there.
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
Hi @votagus
Also, you've added some HTTP changes which don't relate to the title or description (and should probably be in a separate PR) and some of your changes are incorrectly formatted (in particular, we use two-space indents).
@tikiet updated the pull request.
This is actually an experimental config option which I wouldn't currently recommend using.
æœ¬åœ°å›¾ç‰‡æ˜¯780900ï¼Œä¼ å…¥çš„ResizeOptionsæ˜¯16001600,è¿”å›žçš„å›¾ç‰‡å¤§å°æ˜¯195*255çš„å›¾ç‰‡,æ€Žä¹ˆä¸æ˜¯åŽŸå›¾
Can you provide the piece of XML that specifies SimpleDraweeView?
These problems are usually caused by not calling `Fresco.initialize` as @Anier2015 said.
I assume the problem has been resolved. If not, please let us know.  @szpnygo, Why do you need a network image as a placeholder? The concept of placeholder is different. It should be an image to show while you download the image and it should be already present as a resource.
To be on a safe side, I'd suggest replacing it with a Fresco logo: ![fresco logo](https://cloud.githubusercontent.com/assets/3705123/15268683/e778912e-19de-11e6-97ae-98155a11eb75.png)
fresco:imageUri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAEZ0l
0WCZlmqbT/4tv4uM0c+cGLbM9/LnO3P+9nvPzzJlvGcM0TQvzssJ8AD4AH4APwAfgA/AB/HE1z+sYCZVAd6F4C280dBq
6CkVZeBOgSqgcmmNLABjYNOgJpLHyg3iXQK+EN83E1w7KgeqF94itAGBAnaGt0FcxSFKugbcndEDxkWYbeKOgEwbew7Y
BgMEMgy6LwTVALUYAcDwRuie8n6A2IwB0DD3j99rYq3+u5L8DwCB6QOnQWzGwW9Bi6I0EgNf20Cbos/CehDLVFcCrqRD
hXWs3ABd4MK3QcAsABXxcTbdJCwDl+uWk/D7bAqANanSIAF5A/UMEcMepACi4eR8igMTfALDaKQDm8kb3MxAKAiBHTGq
OBYB9tgqElD1gBJ/bqNzq1hgAoFA5HNrJn9W9yQqA2yK0Pip89Jn9dgJA0d8MqFQMku7he6GuCoCn0FSO/TXx+YD4Xh3
ADWgy9Eh4a6FVUISdALQowdBLaJHi1QF8gd4J70MoSfHqAOqV+P8mNNI22aAAIHUeGmTgLTDwlhr9JQUATewxhfpqshM
AGQhRgLOZr216L4VvW93YWyi8FCVmsY80H8qAOrD3rPBWm2WJdgCQy6lvFV/XdK4TtE3cBfRNMBV6DV2DRrFXzQqTRch
yZWo2yF7KEs8IL0WLx0Qs4CwAnMvLZUzX+AKeaK0SCo/nIEj3PobGcZ1PcyqAi2LwVKyMDiEZ0jiqizRIhhwHQMYB8Rb
Z4A4RJEWZZIOOBdAqIzSLFVBDO7zbAKjZ4FCDkphZNpjkRgCxIoa3AjDTVQAocoMqxKTyzADgdQx3j4I2RpwAgFLfIRz
/14gJ0c9jFQDPOb+nlPaj8FZZtcbsDKCRgx9ZCKmQWaEAQK2w46JxonEg1cdxzVGTdJhg5FM/L4R0mOoCmY7tDmPwl5Q
JPeAiZxg3SCKEt0jxXofiHN0eV+p0P5YxTz6Os0Ja7inszRf7xfa/nen9KwAU86+k8pcobmQoJa8Ae7tD66BZrnxAgv/
6xVbpsCufEMEkpyiVW+rpNbkeACY3gOuATWLyVMaarrbH3QqgTKntbxGtsTovAJC3wfRg2aBbAch0OMbLACzb414D8Et
sjPH/X8AH4APwAfgAfAA+AB+AU/Qd42W8mKN4nlcAAAAASUVORK5CYII="
@szpnygo Please rebase. There are merge conflicts.
Hi @szpnygo,
Beyond that, I can suggest some more diagnostic tools if you're seeing problems with this. Would also recommend that ResizeOptions are used in case the loaded images are large. Closing issue for now but please comment with any additional useful information that could help us investigate this. Thanks!  Thank you for your pull request and welcome to our community. We require contributors to sign our Contributor License Agreement, and we don't seem to have you on file. In order for us to review and merge your code, please sign up at https://code.facebook.com/cla - and if you have received this in error or have any questions, please drop us a line at cla@fb.com. Thanks!
There are a couple of things going on here.
Hi @leeon7,
Actually Fresco.shutdown() should stop all services, executors and clean stuff in order to release resources. At the moment it's just clearing memory caches. We're going to improve this but i think this should be invoked, if you want, when the application stops and so on the onDestroy() of the main Activity. Thanks
Thank you @qindachang,
@qiuqiutang, can you please provide the url and link of your image so we can get access to it?
This is a known limitation as explained in the [documentation](http://frescolib.org/docs/rounded-corners-and-circles.html).
@younas-bangash You can register a `ControllerListener` and react in the `onFailure` method. See http://frescolib.org/docs/listening-to-events.html  There has to be logcat, but you need to enable `VERBOSE` logging for your app while debugging this. See [here](http://developer.android.com/reference/android/util/Log.html#isLoggable%28java.lang.String,%20int%29) how to do that.
Without this information there is no way for us to know what is happening.
@imliujun Have you tired the solution here? https://github.com/facebook/fresco/issues/410
å´©æºƒçš„é—®é¢˜æ‰¾åˆ°äº†æ˜¯å› ä¸ºgradle debug  version ç›¸å…³åŽŸå›  ä½†æ˜¯ å…³äºŽå›¾ç‰‡ç¼“å­˜çš„ å¯èƒ½æ˜¯æŸäº›æ¸…ç†å·¥å…·æ¸…ç†ç£ç›˜ æ¸…ç†çš„ä¸å®Œæ•´ï¼Œå¯¼è‡´åŠ è½½å›¾ç‰‡å‡ºçŽ°äº†ä¸€äº›é—®é¢˜ã€‚
å´©æºƒçš„é—®é¢˜æ‰¾åˆ°äº†æ˜¯å› ä¸ºgradle debug  version ç›¸å…³åŽŸå›  ä½†æ˜¯ å…³äºŽå›¾ç‰‡ç¼“å­˜çš„ å¯èƒ½æ˜¯æŸäº›æ¸…ç†å·¥å…·æ¸…ç†ç£ç›˜ æ¸…ç†çš„ä¸å®Œæ•´ï¼Œå¯¼è‡´åŠ è½½å›¾ç‰‡å‡ºçŽ°äº†ä¸€äº›é—®é¢˜ã€‚
I feel this is weird because setProgressiveRenderingEnabled is default to false. And I don't see any issues when digging into source code. Can you debug yourself and see the value?
this is my code,
private GenericDraweeHierarchy mHierarchy;
private DraweeHolder<DH> mDraweeHolder;
private Matrix mMatrix;
return mDraweeHolder.getHierarchy();
@Override
mDraweeHolder.onDetach();
@Override
mDraweeHolder.onAttach();
@Override
mDraweeHolder.onAttach();
@Override
mDraweeHolder.onDetach();
@Override
return mDraweeHolder.onTouchEvent(event) || super.onTouchEvent(event);
@Override
if (who == mDraweeHolder.getTopLevelDrawable()) {
.setImageRequest(request).setOldController(mDraweeHolder.getController())
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
mDraweeHolder.setController(controller);
@SuppressLint("NewApi")
@Override
Matrix.ScaleToFit.END
@Override
In ZDV, you can see
@Override
Eric
We currently have no plan in support SVG at the moment. We would appreciate if someone in community wants to contribute it.
From your logs, it looks like the only errors are coming from `ChatterAndTweetsAdapter` - could that be relevant?
4. start recording logcat
Let me quickly explain the Excel data I made. I kept only lines containing "AbstractDraweeController". I sorted them by controller hash and then by time. Then on the right side I marked events of interest (initialize, set hierarchy, attach, submit, set_final, detach, release). You can observe that sequence of events look normal for each controller (at least for the first few I checked). The events of interest happen in correct order and with expected times between them.
If you could explain what you see, and what is in your hierarchy at each stage, that would be great.
Hi @budnyjj,
Closing due to lack of updates or further reports of the issue  Hi @budnyjj,
Hi @votagus
What kind of problems? Can you please give us more context please?
@imyetse Have you tired the solution here? https://github.com/facebook/fresco/issues/410
Hey @rahulrj, I'm very happy that you want to contribute to Fresco!
What version of Fresco?
2. Networking library is misbehaving
3. There is a bug in Fresco
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
@wangmeng1989 Can you please provide us more information in order to reproduce it? You mentioned you used the Android version 4.1.2. What does your code do? What format of image you're downloading? Are you fetching from the network? In case, can you provide us the URL of the image you're trying to download? Are you resizing the image? You mentioned you're using eclipse, right?
Hi @Zhuinden,
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
Can you provide the piece of XML that specifies SimpleDraweeView?
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
Fresco is getting really popular and truth is we're getting a bit overwhelmed by the activity surrounding it. There are just too many issues for us to manage properly.
@dotingcode
Are you including any library that includes `nineoldandroids`?
@kunny not at the moment. What is the desired limit you want to use ?
``` Java
@Override
@yangkai3 updated the pull request.
@Override
Matrix outTransform,
Also, you do you use post-processors by any chance ?
Hi. Do you set up any custom configuration ?
@michalgr this happen random but very ofen.  I suppose you shoul check the code where the log print.
@Wood-Water-Peng
repositories {
mavenCentral()
compile project(':drawee-backends:drawee-pipeline')
We're cleaning up long-untouched issues so I'm closing this one.  Can you elaborate? What was the problem? And what version of Fresco are you using?
Hi Jessee,
01-02 11:29:08.851 22170-22170/com.qiuduanribao.joke W/System.err: java.lang.IllegalStateException: Failed to slurp image 0
01-02 11:29:08.851 22170-22170/com.qiuduanribao.joke W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
01-02 11:29:08.851 22170-22170/com.qiuduanribao.joke W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
Can you try to debug and see if detachController in draweeholder is getting called when the activity gets destroyed?
you should really use drawee, then you won't have the leak problem. do you subclass from ImageView.
Hey @beartung
unfortunately fresco don't support ico at the moment.
Does it help if you tell proguard not to worry about `GuardedBy` ?
-dontwarn javax.annotation.concurrent.GuardedBy
http://frescolib.org/docs/rounded-corners-and-circles.html#_
http://frescolib.org/docs/rounded-corners-and-circles.html
michalgr at fb dot com
@LiuDeng where do you get `LowDiskSpace` and `VeryLowDiskSpace` from? Is this something that **Fresco** reports, or is this something that your **Android device** reports? If it is the later than this has nothing to do with the Fresco library. Even if the Fresco disk cache contributes to the disk usage the actual limits have likely nothing to do with Fresco.
Display layer of fresco is called Drawee. Drawee supports overlay drawables and ripple effect feels like a perfect use case for that. Drawee already propagates state changes correctly, so, to make a ripple effect with Drawee, all you really need to do is implement a single Drawable that is state aware. Like Android's `StateListDrawable`. When the state changes to `state_pressed` your drawable can start performing the ripple-effect animation. When the state changes to something other than `state_pressed` you stop the animation.
After you implement your drawable that is state aware, this is how it can be set to Fresco / Drawee:
Thank you for your interest in Fresco. I think your idea is pretty cool and I see no reason not to do it. We just need to check some technicalities such as the license of those image formats, because some of them might be proprietary.
@eldk :
Hey @beetlebum , very happy to hear that you're using Fresco :) I'd love to hear your feedback on the library - if you want to have a chat send me an email on balazsbalazs@fb.com.
Oh, btw: both me and Tyrone are active users of Memrise! :)
The problem we need to investigate is how we first got a corrupted and then a correct image for the same uri.
When is this happening? What are you doing? Which version of Fresco?
Wooohooo! Thx for using Fresco ;)
@sleeperabc : ping me on balazs.balazs80@gmail.com with things you find challenging to learn/understand. Maybe we can improve the documentation/examples.
Hey @pipipzz !
`DalvikBitmapFactory` was removed in 0.8.1. so this message is strange.
Folding all OOM issues into #574
You're doing the right thing!
We're still in the stage of experimenting downsampling.
Hey @cazador4,
Can you show your code?
Yeah you should try with an updated version of Fresco
Do you have any special configuration for Fresco? How are you loading the image? This is a bit weird. Are you sure that is the image that it's OOMing on, and there isn't another one that is really huge?
What URL are you passing to Fresco? It looks like you are passing *.gif, when it should be *.jpg?
Your parent container has a height of `wrap_content`, which we do not support. You can either explicitly set a height or set an aspect ratio for the Drawee view.
I don't think Fresco currently supports this, sorry.
@shercoder: You can create you own `NetworkFetcher` implementation and provide that to the `ImagePipeline.Config`. With that you'd have all freedom to handle these special cases.
å½“ä½¿ç”¨å¤§å›¾çš„æ—¶å€™ï¼Œè¯·ä½ æŒ‰ç…§ä½ çš„éœ€æ±‚ä½¿ç”¨resizeæˆ–è€…downsamplingã€‚æ™®éè¯´æ¥ï¼Œä½ å¹¶ä¸éœ€è¦æŠŠæ•´ä¸ªå¤§å›¾è£…è½½è¿›ä½ çš„viewä¸­ã€‚
@Override
å¯¹äºŽä¸Šè¿°çš„gcå¯¹bitmapå›žæ”¶çš„é—®é¢˜ï¼Œä»£ç å¦‚ä¸‹ï¼Œè¯·ç»“åˆä½ å…·ä½“æƒ…å†µä½¿ç”¨ã€‚
@Override
@Override
Please use our comparison app (https://github.com/facebook/fresco/tree/master/samples/comparison) as a reference for `Drawee` into a `RecyclerView`.
This sounds like onAttach/onDetach is not called correctly.
@hejie: are you an eclipse user as well ? Did you add res files to your eclipse project as well ?
How big is your failure image ? Is it a Bitmap ?
Do you create controllers or manipulate drawee components on non-ui thread ?
Filed a pull request with the Korean doc owners. Please report issues with the Korean docs to the [Korean repository](https://github.com/recrack/fresco-docs-kr).
This may be an issue loading libraries depended on by AnimatedDrawable - either Fresco's native libraries (libimagepipeline.so et al) or nineoldandroids. Are you excluding nineoldandroids in your build.gradle file anywhere? Can you show us the file?
https://jcenter.bintray.com/com/facebook/fresco/fbcore/0.7.0/
https://jcenter.bintray.com/com/facebook/fresco/fbcore/0.8.0/
repositories {
maven { url 'https://maven.fabric.io/public' }
repositories {
maven { url 'https://maven.fabric.io/public' }
maven { url "https://jitpack.io" }
@JadenGu I had the problem with latest Gradle 2.8.
Fresco.initialize(this) initializes caches and other components required by SimpleDraweeView within calling process. It should be called in every process that uses SimpleDraweeView.
@wenxueguo107room: does it help ?
android:background="@android:color/black">
Can you verify through logs that Fresco.initialize is getting called before this crash?
Since Fresco 0.10.0 the OkHttp version being used is 2.7.4 (or 3.0.1 if you switch to the OkHttp 3 module). Let us know if the problem still occurs but I don't think it should.
- How often do you get these OOMs?
Are those GIFs animated? Also, can you provide some more context on how you use Fresco? XML, code, etc.
Caused by: java.io.IOException: Cannot run program "ndk-build" (in directory "/Users/yohannarizk/code/stuff/lib/fresco/imagepipeline"): error=2, No such file or directory
at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(DefaultProcessLauncher.java:25)
Hi @aphexcx, the caller context can be anything that you like. It's meant to allow you to pass information down the chain to your `RequestListener` or `ControllerListener`.
Hi @caoyunxuan07,
I know this is strange but this is working as intended.
I am confused now. You don't use Fresco but open an issue blaming JpegTranscoder ? Hm :)
- How/where do you initialize Fresco?
- Can you please provide a verbose logcat: `adb logcat -v threadtime | grep -iE 'LoggingListener|AbstractDraweeController'`
- Do you know what triggers this flash?
This has been fixed in f1e1f24de3d65aa06d51f7dde92651a3cb29ed76  Are you using a ScrollView? Don't.
You either have to reduce Picasso or Fresco's memory footprint by reducing the cache size, OR reduce the rest of your app's footprint.
Thanks @andreidiaconu
@Override
DraweeViews cancel when their `onStartTemporaryDetach` or `onDetachedFromWindow` is called without a matching `onFinishTemporaryDetach` or `onAttachedToWindow` in the same frame. I'm not familiar with FragmentStatePagerAdapter, but it could be it's aggressively detaching the views while toggling back and forth.
Without some more context it is hard to tell.
I was thinking the same as @desmond1121 . I wonder whether this is a misspelled path issue, or something else, such as permission issue.
Is the image animated?
Ok this is weird. The crash indicates that it is calling Bitmap.getByteCount from BitmapUtil.getSizeInBytes. But that method [is not supposed to be called on Gingerbread](https://github.com/facebook/fresco/blob/e58561de5b3ca613d2647d4d8cc55c344d5cc579/imagepipeline/src/main/java/com/facebook/imageutils/BitmapUtil.java#L48).
Are you using Fresco 0.7.0?
compile project(':drawee-backends:drawee-pipeline')
ndk {
abiFilters 'x86', 'x86_64'
buildTypes {
You can create a Drawee controller with a listener and then specify the given frame with something like this:
Fresco.newDraweeControllerBuilder()
@Override
What happens exactly? Can you turn on verbose logging and call FLog.setMinimumLoggingLevel(FLog.VERBOSE) so we can look at what is going on?
@EugineKidoz Is the problems till there?
This is likely the same issue as #429. The solution is to make sure the .so files are in the correct directory. If it's low-end phones, they may need to be in armeabi, not armeabi-v7a.
@shangcongrong This seems unrelated. The paths of the image to load should not affect the loading of `.so` files. Have you followed the instructions on http://frescolib.org/docs/index.html, http://frescolib.org/docs/getting-started.html and http://frescolib.org/docs/proguard.html? Do you see the same problem when building and running the sample apps in your local setup?
Are these PNG images? If so, use downsampling instead of resizing: http://frescolib.org/docs/resizing-rotating.html#downsampling
4. Initialize Fresco
@kexuejin : do I understand correctly that the issue happens only for local images, not for the ones that are downloaded ?
Do you use LeakCanary? Let me know if this might be related to #536
.setResizeOption(new ResizeOptions(width_of_your_drawee_view, height_of_your_drawee_view))
Reaping
It makes little sense to have multiple instances of Fresco (because each would have their own memory cache, etc. which would be suboptimal). That's why it is a singleton.
@alexli0707, @vipulasri Do you still have this problem with the 0.9.0?
@nimengbo, perhaps the best way of telling what happens is to take a heap dump when your memory usage gets suspiciously big and then analyze that. There are various ways to cause a memory leak, `singleTask` being used or not.
By "flow" do you mean "data usage"?
What's OSS?
Reaping.
TransactionTooLargeException is a bucket for a lot of different issues: http://stackoverflow.com/questions/11451393/what-to-do-on-transactiontoolargeexception.
What kind of GIF is this? Where are the images coming from - are they network images, or local images?
Unfortunately you will see the background since they need to be decoded and that takes a non-trivial amount of time, even for relatively small GIFs.
@LinJZong: please open separate issue and include more details, like what are the dimensions of decoded Bitmaps and what container view do you use (ListView, ScrollView, RecyclerView etc).
Cleaning up old issues  Fresco does not require these permissions. You can see that our sample apps do not have these permissions in their manifests.
- What are you passing as roundingParams?
Reaping.
Does this happen with the latest Fresco version?
Can you do `adb logcat -v threadtime | grep -iE 'LoggingListener|AbstractDraweeController'`?
07-09 16:23:38.934 17755 17755 V myapp(:<default>):AbstractDraweeController: controller 33531f16 140: submitRequest: dataSource: 22fdfb9e
VERBOSE, not DEBUG.
After calling super?
Sadly, XML attributes on Android need to be globally unique. That's a fundamental design flaw if you ask me, but there is little we can do about it (other than perhaps prefixing all of our attributes, sigh).
- is os version relevant ?
- what version of Fresco do you use ?
@agoodcoolman : do you use proguard ? does it happen all the time or sporadically ? Have you seen https://github.com/facebook/fresco/issues/172 and https://github.com/facebook/fresco/issues/105 ?
Have you updated the Fresco from some older version to 0.5.3, or you just freshly added it?
Are you properly calling `Fresco.initialize(context)` and where?
simpleDraweeView.setController(controller);
@mheras There is no other option - you have to pass `Context` to `Fresco.initialize` once and before it is used for the first time. `Application` is convenient place to do this initialization. You should either ask your users to initialize Fresco in `Application` or initialize your library there (and your library would in turn initialize Fresco).
V/RippleFresco:AbstractDraweeController( 6689): controller a735665 25: submitRequest: dataSource: 2d536948
V/RippleFresco:NativeMemoryChunkPool( 6689): Used = (11, 954368); Free = (6, 97280)
V/RippleFresco:NativeMemoryChunkPool( 6689): get (reuse) (object, size) = (3db4425b, 32768)
V/RippleFresco:BitmapPool( 6689): get (alloc) (object, size) = (25554bb6, 65536)
V/RippleFresco:AbstractDraweeController( 6689): controller 21389a90 null -> 26: initialize
V/RippleFresco:AbstractDraweeController( 6689): controller 21389a90 26: onAttach: request needs submit
V/RippleFresco:AbstractDraweeController( 6689): controller 21389a90 26: submitRequest: dataSource: 2ddb2faf
V/RippleFresco:AbstractDraweeController( 6689): controller 2f06ced8 null -> 27: initialize
V/RippleFresco:AbstractDraweeController( 6689): controller 2f06ced8 27: onAttach: request needs submit
V/RippleFresco:AbstractDraweeController( 6689): controller 609c7f null -> 28: initialize
V/RippleFresco:AbstractDraweeController( 6689): controller 609c7f 28: onAttach: request needs submit
V/RippleFresco:AbstractDraweeController( 6689): controller 609c7f 28: submitRequest: dataSource: 84311aa
V/RippleFresco:AbstractDraweeController( 6689): controller 2d53cc81 null -> 29: initialize
V/RippleFresco:AbstractDraweeController( 6689): controller 2d53cc81 29: onAttach: request needs submit
V/RippleFresco:AbstractDraweeController( 6689): controller 2d53cc81 29: submitRequest: dataSource: 3fe29167
V/RippleFresco:AbstractDraweeController( 6689): controller 5e4ad0a null -> 30: initialize
V/RippleFresco:AbstractDraweeController( 6689): controller 5e4ad0a 30: onAttach: request needs submit
V/RippleFresco:AbstractDraweeController( 6689): controller 5e4ad0a 30: submitRequest: dataSource: 23131398
V/RippleFresco:AbstractDraweeController( 6689): controller 238e1374 null -> 31: initialize
V/RippleFresco:AbstractDraweeController( 6689): controller 238e1374 31: onAttach: request needs submit
V/RippleFresco:AbstractDraweeController( 6689): controller 238e1374 31: submitRequest: dataSource: 206518e3
@TarangS Do you know how to avoid this bug? I try it, but can not find the solution. thanks...
And what do you mean by "png with some error" ? Is that png corrupted or something ?
@duguguiyu : Did youinvestigate why BitmapFactory blocks ? Can you point us to the offending line if so ?
We indeed have had issues with the Chinese and Korean documentation. It is not always up to date.
What is your custom GIF view? Why do you need the bytes? Can you try using [manual playing](http://frescolib.org/docs/animations.html#playing-animations-manually)?
Are you following the rules for DraweeHolders? See http://frescolib.org/docs/writing-custom-views.html#responsibilities-of-custom-views.
What happened exactly? Is the image a GIF or a WebP?
@liyuehui is correct, you can supply value animators to modify the repeat count. Nice trick :) The problem here is not the version but that you are casting to `AnimatedDrawable`, which will be `AnimatedDrawableSupport` on older Android versions. It should work if you cast it to `AbstractAnimatedDrawable` instead. See https://github.com/facebook/fresco/issues/1863 for a solution.  inPurgeable, with Fresco's memory management, is better than inBitmap, since we can bypass the Java heap entirely.
Weird.
Looking at the [DraweeView](https://github.com/facebook/fresco/blob/96d74f385b297f364db1f719dd6ee61fc380d0d4/drawee/src/main/java/com/facebook/drawee/view/DraweeView.java), this can only happen if super class calls `toString` from their constructor which seems odd.
RGB_565 doesn't support transparency and this may be the reason why BitmapFactory fails to decode a PNG into it.
Anyways, we do not support RGB565 at the moment.
No it is now `newDraweeControllerBuilder` instead of `newControllerBuilder`
Or are you using Proguard perhaps?
http://frescolib.org/docs/using-drawees-code.html#change-the-placeholder
A case can be made that Fresco is too large, but that is a duplicate of #260.
Hi @freddy24
Can you give an example of such a gif?
Can you clarify what you are trying to do? Are you trying to install your app on an external SD card?
Bitmap.recycle is all we do.
The deep copy is made into ashmem, and is controlled by the system.
It is possible that you are looking at the total memory usage of your app and Fresco is not the only part of the app that uses memory.
If you want to prefetch images, check out http://frescolib.org/docs/using-image-pipeline.html Well, everything depends on when you do the caching. RecyclerView doesn't have an API for prefetching items. There's a good article [here](https://medium.com/google-developers/recyclerview-prefetch-c2f269075710#.nueasdahh) how this could look like and the pros / cons. Whenever you want to do the prefetching, just call `prefetchTo...` if you don't pre-create views (or if they are not attached to a window) or just set the URI if you're using a Drawee view.  We're looking at this issue of bitmap pooling again now but have found some issues internally when enabling it.
Also why do you think this is a bug in the DraweeView? Need more details.
- What are you passing to the Drawee, as either XML or code? Specifically, what is the placeholder and how large is it?
Something seems odd about this PNG. The stack trace shows you're trying to allocate a 38 MB placeholder. That works out to a size of 3000 x 3000, not 500 x 500. Can you upload it?
Fresco only supports ARGB_888 config right now. The format of the encoded image (png/jpg) does not matter when reusing the bitmap.
Laces, your issue is different from the original as it occurs on non-S6 devices.
mDraweeView.setController(controller);
@cabbage Thanks for you reply.
There can be many things causing the memory issues:
Uri uri;
.setUri(uri)
For Understanding Drawee better read these, however you only need anything other than the above snippet for ur purpose.
http://frescolib.org/docs/using-drawees-xml.html#_
http://frescolib.org/docs/using-drawees-code.html#_
Hang on. Hopefully soon we will release a sample library that demonstrates how to create zoomable DraweeViews.
Because it contains special characters, it should be escaped properly, like:
- To learn more about the usage of Postprocessor, refer to this:http://frescolib.org/docs/modifying-image.html#_
Do you still experience these problems for Fresco v0.13 and Genymotion 2.8.0? If so, which AVD?
Because the Drawee library provides XML attributes, you have to include it as an Android project. It will not work if you add it as a jar.
Reaping.
Reaping.
5.0 IS api 21.
The latest version of Fresco is 0.5.2.
Also, why do you have a transparent overlay?
Could you give a code snippet please?
I suggest you try adding a listener to your drawee controller, and maybe to the image pipeline too, that will enable you to help debug where the images are getting lost.
Hmm...that is a crazy number of bytes, I am not sure what's going on there. Are you getting this warning when trying to load the single image? Could you give a code snippet and the url that you are using.
final DraweeController controller =
@Override
@Override
It looks like this is a bug in Gradle. The fix is to add '@aar' to the compile dependencies in the build.gradle files.
Added in modified form.
That wouldn't help this problem - you have to have the okio jars.
What are the parent views/layouts of the DraweeViews?
Are you using Drawee, or are you just using the image pipeline directly?
Are you doing anything combining Weibo with Fresco? eg using Fresco images to pass to Weibo? Can you also post a code snippet?
@duguguiyu your config looks good to me :)
.BMP files are not compressed. They will take up excessive space on your users' disk, and if downloaded will eat their data usage and slow down their download. Are you sure you really need to use them?
http://frescolib.org/docs/rounded-corners-and-circles.html#_
Bitmap should be ARGB_8888.
What color is set to `mask.getPaint()`? On some Samsung devices default paint color is FF000000, i.e. black, not transparent. Can you do `mask.getPaint().setColor(0)` before calling mask.draw?
There was an issue with non-animated GIFs that was fixed in 0.5.1.
@markfili, thanks for the info ðŸ‘
Can you show us a code snippet?
@lushan1314 - please can you answer @tyronen's latest question so that we can try to help you?
It turns out that this image is actually a GIF, rather than a JPEG.
1) Can you attach a stack trace of the OOM?
2) Are you using `roundWithOverlayColor`? If you do, do you still get the OOM?
.setOldController(mDraweeView.getController())
DraweeHolder holder;
Fresco.newDraweeControllerBuilder()
@Override
Hi @haseebrabbani and @nicolasbrugneaux,
The most likely reason why it doesn't work is because the drawable used by Drawee doesn't expose its intrinsic dimensions (i.e. it always returns -1). Because of that `PhotoViewAttacher` cannot determine the size of the image.
There is however a way to make Drawee work with some zoomble logic. First, you need to specify a controller listener while building the controller, so that you can intercept the load events (onFinalImageSet for example). See http://frescolib.org/docs/listening-download-events.html#_
Is this caused by proguard as well ? (https://github.com/facebook/fresco/issues/172, https://github.com/facebook/fresco/issues/105)
OSï¼š mac 10.10.3
The tar might be corrupted or it is compressed in an unexpected way.
You're welocme.
Is it possible that the image is actually a GIF (even though the extension says PNG)?
See http://frescolib.org/docs/rounded-corners-and-circles.html#_
See http://frescolib.org/docs/drawee-components.html#_
Use this feature with great caution. If you do it wrong, your app could be a lot slower or show the wrong images entirely.
@mohammedhammouri, can you give us more context on what are you trying to achieve?
Closing as there has been no response for 2 years  Yes, this is a known limitation. It is an Android bug when using BitmapShader. I'm afraid there is not much we can do. You can try using the other rounding mode by specifying the overlay color.
And which version of fresco do you use ? Is it 0.1.0 or 0.2.0 ?
Please reopen if anyone is still seeing this issue.  Can you share some information on how you reproduce this ? What version of fresco do you use ?
- A sample of the WebP images causing the crash
Hi @hubcin, you do not want to use the post-processor for saving a Bitmap.
Please open a new issue and post your XML. Make sure you are calling Fresco.initialize.
Does `FileInputStream("/storage/emulated/0/Tencent/QQfile_recv/PL6YD4~F{T)9)TBLX2%IB%C.png")` work?
getWindow().setBackgroundDrawable(mDraweeHolder.getTopLevelDrawable());
mDraweeHolder.setController(controller);
mDraweeHolder.attach();
mDraweeHolder.detach();
mDraweeHolder.setController(null);
LGTM
@orospakr thanks!
@ljnalex I think it is a separate issue.
I understand that you compile it in Android Studio ? What operating system do you use ? And what device do you test this on ? Can you extract the apk and check whether libgnustl_shared.so is there inside lib/armeabi-v7a directory ?
frescolib/
drawee/
fbcore/
fresco/
Duplicate
@ljnalex , I Imported the project in a new Workspace. Dont know how weird that was. But i havent got this issue again.
@Override
@Override
@fuwaneko , yeah OkHttp cancellation is a known issue and we have a fix for that. However, local content uri is something we yet need to figure.
@mikeknoop , I missed part of your commend earlier, where you said "If I comment out the setResizeOptions line the performance problem comes back."
@mikeknoop, yes, please see http://frescolib.org/docs/resizing-rotating.html#_
@Override
@Override
@leelei Fresco was not built with that big images in mind.
Hmm, that's weird. If the placeholder gets resolved to `ColorDrawable` or `BitmapDrawable`, then it should get rounded. Can you give us more information?
amitshekhariitbhu: see http://frescolib.org/docs/modifying-image.html
Duplicate
blackiedm is correct. I'll make this clearer in the docs.
http://frescolib.org/docs/gotchas.html#_
One important difference that one should be aware of is that Uri is used to specify an actual image that goes through the pipeline. That means fetching, caching, transcodng, resizing, postprocessing, etc.
One important consequence is the difference between the two when the resource is actually an image (e.g. PNG):
One can specify an arbitrarily complex hierarchy of drawables in XML and parsing that XML to get to the leaf nodes that are the actual images and then rebuilding that same hierarchy, but with leaf nodes replaced with the BitmapDrawables that wrap images obtained by our pipeline seems very unfeasible. This would require us to rewrite the Android's XML inflation logic. In my opinion it's not worth the effort.
OR
Thanks @liaohuqiu , that's awesome!
.setOldController(mSimpleDraweeView.getController())
See http://frescolib.org/docs/rounded-corners-and-circles.html#_
blurred view on top:   [ABCDE]--->      |               [ABCDE]      |
original view below:       [abcdefghijkl]               [abcdefghijkl]
blurred view on top:      [AB]--->     |                [ABCDE]      |
original view below:      [abcdefghijkl]                [abcdefghijkl]
Our office is closed for the Easter weekend right now but we will be back on Tuesday and will fix this as soon as we can.
export NDK=~/home/joysonf/android_ndk/android-ndk-r10d
@jalpesh , Thanks for your quick reply.
LGTM
@mufumbo can you tell us more about your use case so that we know what should we optimize for? How would you use the aars without gradle or maven ?  providing links to Fresco aars is not enough, you probably also need links to Fresco's dependencies. To make it more convenient we could provide zipped bundle of all aars - depends on what people need.
No problem. Hope you find Fresco useful!
That's strange. Since there was a similar report, I wonder whether there is some systematic issue.
Actually, I may have made a mistake, can you just specify some color instead of `@android:color/red`?
For initialization, see our "Getting started with Fresco" page, it's on the very beginning:
No casting is necessary, you can just build `DraweeController`. See the example in our sample app:
So, I suspect that you are not calling `Fresco.initialize` early enough. Where are you doing that call?
How do you build the Uri?
@xbroak , it would help if you could create a separate issue for each problem you have rather than just dumping all of them in one issue.
The URI redirection issue can be solved by using some smarter networking library, rather than the default one which is pretty cumbersome. We do provide OkHttp integration and it should be pretty straightforward to set it up. There is a section in our documentation.
As for the other issues, I don't know what else is there left? There were a couple of typos in the docs, but I believe this has been resolved?
* why not some new avd like sdk 23 or higher
pass ci
@Override
@Override
@Override
@Override
@Override
@Override
@foghina I am loading gif from resource folder.
* Fresco version: [FILL THIS OUT]
@facebook-github-bot  i have signed CLA just now @lambdapioneer i have try again, and the result :
@lambdapioneer OK
if (!spNativeContext) {
throwIllegalStateException(pEnv, "Already disposed");
play webp animated
fresco:roundingBorderColor="#FFEBEBEB"
SimpleDraweeView mTopicImg = Views.findViewById(this, R.id.active_img);
Uri urii = Uri.parse(mPicUrl);
@qhyuan1992: What's the use case? You must have the URI to begin with so why do you need it back from the EncodedImage? I know, Thanks @oprisnik @kirwan
* Fresco version: 1.8.0
@jnawaz Thanks~
android:id="@+id/simple_drawee_view"
* Fresco version:  1.8.1
android:id="@+id/simple_drawee_view"
.setOldController(mDraweeView.getController())
mDraweeView.setController(controller);
* Fresco version: 1.3.0
```Kotlin
* Fresco version: 1.8.1
java.lang.IllegalStateException:ClassLoader com.taobao.sophix.core.dex.a.a should be of type BaseDexClassLoader
* Fresco version: 1.8.0
* Fresco version: 1.4.0
Hi @zmroczek
DraweeController controller =
Fresco.newDraweeControllerBuilder()
```java
Nop,  same error. @foghina the problem is that the MainApplication extends Application is called before the setUp (@Before) so the SoLoader.setInTestMode() is never been called. Now, I remove the Fresco.Initialize(this) from the MainApplication and set it in the activity and Its working :) but I dont want to call Fresco.initialize(this) in all the activities on my app. Is there any workarround for this situation? Thanks  ### Description
I wonder that is there any chance to overcome this issue?
//include ':drawee'
//project(':drawee').projectDir = new File(rootProject.projectDir, '../fresco/drawee')
//include ':fbcore'
* Fresco version: 1.3.0
The different one is `fresco` build setup for me. Because it uses a main gradle file that affects the all sub-projects' `build.gradle` files.
compile project(':drawee-backends:drawee-pipeline')
compile project(':drawee-span')
@foghina this is not a RN Native issue, it's a Fresco issue.  We use GitHub Issues for bugs.
* Fresco version: [FILL THIS OUT]
Please guide us how to resolve this exception:
Thanks for your response. We are using fresco in RecyclerView and in custom views.
simpleDraweeView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener() {
@Override
simpleDraweeView.getViewTreeObserver().removeOnPreDrawListener(this);
float width = simpleDraweeView.getWidth();
float height = simpleDraweeView.getHeight();
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);
Following code is written in custom views:
@Override
@Override
That's the only code snippet of fresco we are using in our whole app. Please guide us that the above code is right or wrong.
`        fresco:progressBarImageScaleType="centerInside"`
* Fresco version: 1.8.1
Well, it had worked when I used lower version of RN (not sure well, but seems 0.46.x)
ndk {
abiFilters "armeabi-v7a", "x86"
compile ('com.facebook.shimmer:shimmer:0.1.0@aar')
* Fresco version: 1.8.1
So I am finding another way to display GIF image. @foghina
Hi @lambdapioneer , Thank you for replying to my query.
**Fresco:** 1.7.1
Joney
asneVersion = '0.3.3'
implementation 'com.github.captain-miao:optroundcardview:1.0.0'
//Dagger 2
//Rx
// Because RxAndroid releases are few and far between, it is recommended you also
implementation 'com.tbruyelle.rxpermissions2:rxpermissions:0.9.4@aar'
implementation 'com.akaita.java:rxjava2-debug:1.2.1'
//implementation 'com.tbruyelle.rxpermissions2:rxpermissions:0.9.4@aar'
//RxBindings
//ButterKnife
implementation "com.github.asne:asne-odnoklassniki:$asneVersion"
implementation 'ru.terrakok.cicerone:cicerone:3.0.0'
implementation 'com.sdsmdg.harjot:vectormaster:1.1.1'
implementation 'com.github.mirrajabi:okhttp-json-mock:1.0'
implementation 'com.uphyca:stetho_realm:2.1.0'
androidTestImplementation 'com.crittercism.dexmaker:dexmaker:1.4'
androidTestImplementation 'com.crittercism.dexmaker:dexmaker-dx:1.4'
* Fresco version:
OPPO - OS: Android 5.1.1
DEVICE: R7sfg / R7g / A51fa
buildTypes {
productFlavors {
jumboMode true
and multidex config
-keep class me.zhanghai.android.materialprogressbar.** { *; }
-keep class com.nguyenhoanglam.imagepicker.** { *;}
And the attchments are logcats
Hi @lambdapioneer,
91980  00-00-1980 00:00   lib/armeabi-v7a/libgifimage.so
255696  00-00-1980 00:00   lib/armeabi-v7a/libimagepipeline.so
1877536  00-00-1980 00:00   lib/armeabi-v7a/librealm-jni.so
100168  00-00-1980 00:00   lib/armeabi/libgifimage.so
313028  00-00-1980 00:00   lib/armeabi/libimagepipeline.so
Hi @lambdapioneer,
more log
# FrescoIoBoundExecutor-2(121704)
# FrescoIoBoundExecutor-1(121150)
@wangshuwen1107 @csbz17027 @ignaciogs
ndk {
abiFilters "armeabi", "armeabi-v7a", "x86", "x86_64", "mips", "mips64"
@lambdapioneer Great thanks, problem solved.
Eric  ndk : 16.1.4479499
Thanks @lambdapioneer
Eric
(...) and few more errors (...)
Eric Thanks @lambdapioneer   ### Description
* Fresco version: 1.8.0
Harry. Any updates?? @lambdapioneer
Harry. make â¤ï¸ not ðŸ˜   @BlackHC Sorry if it hurts. I totally believe in your words.
(MAX_MEMORY_CACHE_SIZE * ByteConstants.MB),// å†…å­˜ç¼“å­˜ä¸­æ€»å›¾ç‰‡çš„æœ€å¤§å¤§å°,ä»¥å­—èŠ‚ä¸ºå•ä½ã€‚
@Override
follow is the usage of SimpleDraweeView
draweeView.setController(controller);
Full Exception:
FATAL EXCEPTION: JavaBridge
java.lang.IllegalStateException
* Fresco version: 1.8.0
@Override
.setCustomDraweeHierarchyBuilder(hierarchyBuilder)
* Fresco version: [FILL THIS OUT]
SimpleDraweeView imgAvatar;
draweeHierarchy,
DraweeSpan.ALIGN_CENTER);
android:focusable="true" fresco:actualImageScaleType="fitXY"
* Fresco version: 1.7.1
Hi @zmroczek
```Kotlin
Fresco.initialize(this)
val uri = Uri.parse("https://kyashu.aquafadas.com/wsapi/KyashuDownload.php?service=KS-AvePublishing&error=404&keepaspect=1&uselength=0&ratio_filter=0&width=1080&height=394&format=png&upscale=1&stickyRatio=desc&operation=fill&ids=5281064;5281065;5281066&version=0")
draweeView.setImageURI(uri, this)
```java
* Fresco version: 1.3.0
It works well with 1.2.0. As a application user, we cannot distinguish the url to load is a PNG, JPEG, WEBP or others, so we try to turn on progressiveRenderingEnable for all the requests though it just support JPEG. It should be handled correctly by the ImageLoader Engine(Fresco), because it can parse and get the right image format and then decide to do it or not.
.setOldController(draweeView.getController())
draweeView.setController(controller);
### Logcat
01-09 20:51:53.699 17818-17818/org.lcy.iwork.home V/unknown:AbstractDraweeController: controller ba4281e null -> 0: initialize
01-09 20:51:53.709 17818-17818/org.lcy.iwork.home V/unknown:AbstractDraweeController: controller ba4281e 0: onAttach: request needs submit
01-09 20:51:53.714 17818-17818/org.lcy.iwork.home V/unknown:AbstractDraweeController: controller ba4281e 0: submitRequest: dataSource: 6308d15
01-09 20:51:53.814 17818-17818/org.lcy.iwork.home V/unknown:AbstractDraweeController: controller ba4281e 0: final_failed @ onFailure: failure: java.lang.IllegalArgumentException
Hello Kirwan,
@Override
if (anim != null) {
* Fresco version: [FILL THIS OUT]
Ignore the color differences, the latter is a gif so that the images are shown side by side.
3. Scroll down to the animated WebP, and notice the corrupted image.
* Fresco version: 1.7.1
For fresco, webp support on devices below 4.2 can be turn on in `ImagePipelineExperiments#mWebpSupportEnabled`.
cc  gif image:
javacode:
.setAutoPlayAnimations(true)// è‡ªåŠ¨æ’­æ”¾gif
* Fresco version: 1.5.0
- Memory jitter
private static final int MAX_CACHE_ASHM_ENTRIES = 128;
@Override
MAX_CACHE_ASHM_ENTRIES,
@Override
@Override
}, throwable -> Timber.e(throwable));
DraweeController controller =
Fresco.newDraweeControllerBuilder()
@Override
if (pipeline != null) {
Timber.tag("page_loca").d(getClass().getName() + "----onResume");
@Override
if (pipeline != null) {
Timber.tag("page_loca").d(getClass().getName() + "-----onPause");
```java
```java
init fresco:
```java
// init fresco
ImagePipelineConfig.Builder frescoBuilder = ImagePipelineConfig
code:
```java
@Override
@Override
@Override
@Override
``` Hi @erikandre , I found interesting things.
* Fresco version: 1.3.0
This is my code:
```java
Hope that may help, thx. Hi @MidoriInu1 ,
I can not confirm this is a bug, but when I update Fresco version to 1.7.1, ResizeOptions is not working, but it works normally in version 1.5.0.
#### Reproduction
```java
#### Just a guess
* Fresco version: [FILL THIS OUT]
<artifactId>drawee</artifactId>
/Users/listenergao/AndroidStudio_Project/MyApplication2/app/src/main/res/layout/item_layout.xml
Error:error: attribute 'com.listenergao.myapplication2:placeholderImage' not found.
Error:attribute 'com.listenergao.myapplication2:placeholderImage' not found.
```javascript
implementation "com.facebook.fresco:drawee:1.7.0"
+--- com.facebook.fresco:stetho:1.7.0
|    +--- com.facebook.fresco:drawee:1.4.0
+--- com.facebook.fresco:stetho:1.4.0
maven {
|    +--- com.facebook.fresco:drawee:1.8.0
+--- com.facebook.fresco:stetho:1.8.0
1ï¼‰FrescoConfig
@Override
4ï¼‰The APK View
Sunsum Galaxy 6 and so onï¼› I think It has nothing to do with the equipment.
http://apnasweets.com/image/catalog/mobile_products/AlmondNut_1000X1000-min.webp
http://apnasweets.com/image/catalog/mobile_products/AlmondSandwitch_1000X1000-min.webp
http://apnasweets.com/image/catalog/mobile_products/Dry-Fruit-Cheeku_1000X1000-min.webp
3. In adapter class
* Fresco version: [FILL THIS OUT]
* Fresco version: 1.5.0
* Platform version: [Sumsung and ZTE phone 4.0 66%  7.0 33%]
Context.MODE_PRIVATE makes the file inaccessible to other apps, but for fresco is problem to read and set file in SimpleDraweeView
Manufacturer: asus
Model: ME173X
### The relevant code is:
.setOldController(simpleDraweeView.getController())
@Override
@Override
@Override
* Fresco version: 1.5.0
Is this related to attaching/ detaching fresco images?
* Fresco version: 1.5.0
* Fresco version: [FILL THIS OUT]
recyclerview adapter
```JAVA
@Override
[2]: https://code.facebook.com/cla
[3]: http://circleci.com/gh/facebook/fresco
Anand Soni
/storage/emulated/0/Pictures/OGQ/Richard Walker_Stairway To Heaven%3F_YkFgR2RZ.jpg
This will load image contains special chars or symbols.  Fatal Exception: java.lang.RuntimeException: Canvas: trying to draw too large(214622500bytes) bitmap.
```.java
* Fresco version: 1.5.0
@Override
// Error...
@Override
https://github.com/dnam50/gifTry.git
Motorolla
Che2-L11 OS 4.2.2/4.4.4
devices
Motorolla
**Note: It's mostly in Kotlin, however I'm reluctant to say this is the problem since most of the interactions with Fresco are done through Java, however, I haven't found any other faults**
```kotlin
val _imageView: SimpleDraweeView = itemView.findViewById(R.id.imageview)
//Call a Java method to set Image in Drawee
```java
Extra Information: I'm on fresco 1.5.0 and I've tried this out on my Nexus 6 and an S4. On the Nexus 6, the images load but upon scrolling I get the error above and the S4 crashes upon boot-up even though the pictures are resized to 100x100.
I'm not really sure about this but my guess is since my recycler view is entirely done in kotlin, there is an incompatibility when detecting if a item is off the screen leading to the image never being taken out of memory.
Fresco.newDraweeControllerBuilder()
Closes #1958 @lambdapioneer Any plans for another release soon? Looking to bring in a few other recent changes.  ### Description
`AbstractDraweeControllerBuilder#setDataSourceSupplier` should return `BUILDER`.
Fresco.newDraweeControllerBuilder()
Change `AbstractDraweeControllerBuilder#setDataSourceSupplier` to return `BUILDER`
``` @artyomdangizyan details!!!  I tested on Pixi Alcatel One Touch and ARgom Tech E450, The app keeps crashing after a while (when I start scrolling up and down) without any logs. But I tested on Pixel, It is working fine
This is my code
.setUri(uri)
@Override
@Override
@lambdapioneer  yes, it should not crash the app. What is more serious is that it can't be catched.  I need to get the total Frame Count and the total duration of the gif
* Fresco version: 1.5.0
* Fresco version: [1.5.0] The gif picture would have been big Hi @erikandre
mBufRef.close();
FATAL EXCEPTION: Thread-860
Process: com.duowan.mobile, PID: 13315
java.lang.IllegalArgumentException
-----------code----------
.setUri(animatedWebpUri)
@Override
@Override
@Override
@Override
@Override
@Override
/Users/toccostudios_macmini02/Library/Android/sdk/ndk-bundle/build/core/build-binary.mk
Warning:(580) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(635) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(528) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(635) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(803) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(803) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(580) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(635) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(528) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(635) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(803) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(803) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(580) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(635) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(528) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(635) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(803) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(803) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(580) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(635) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(528) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(635) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(803) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(803) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(528) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(580) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Warning:(635) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(528) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(635) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(797) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(778) warning: ignoring old commands for target `/Users/toccostudios_macmini02/Documents/Android'
Warning:(803) warning: overriding commands for target `/Users/toccostudios_macmini02/Documents'
Error:error: no such file or directory: 'Projects/fresco/imagepipeline/build/tmp/ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o.d'
Error:error: no such file or directory: 'Projects/fresco/imagepipeline/build/tmp/ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o'
Error:error: no such file or directory: 'Projects/fresco/imagepipeline/build/tmp/ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o.d'
ndk {
abiFilters 'armeabi'
``` å—¯ï¼Œæˆ‘æœ€åŽä½¿ç”¨     abiFilters 'armeabi' è§£å†³äº†è¿™ä¸ªé—®é¢˜ å¯èƒ½æ˜¯å…¶ä»–åº“çš„soä¸å®Œæ•´å¯¼è‡´
.setUri("http://cultofthepartyparrot.com/parrots/hd/parrot.gif")
draweeHierarchy,
false,
DraweeSpan.ALIGN_CENTER)
https://yadi.sk/i/xUFRLHlv3Nrsss
### Code
* Fresco version: 1.5.0
* Fresco version: [FILL THIS OUT]
When i use fresco and crosswalk at same time,crosswalk unable to run
* Fresco version: 1.5.0
* Fresco version: 1.5.0
* Fresco version: [FILL THIS OUT]
How to run fresco demo
java.lang.UnsatisfiedLinkError: dlopen failed: "/data/app/com.evergrande.eif.android.hengjiaosuo-2/lib/arm/libimagepipeline.so" .dynamic section header was not found
It is reported only two times by umeng sdk.  It can't be reproduced.
Device: HUAWEI CAZ-AL10
* Fresco version: [FILL THIS OUT]
I can't test the showcase app on that device. This bug is reported from the thirdparty's SDk, named umeng.
//    from 'rooban/src/main/res/dialog/messagedialog/*.*'
buildTypes {
compile "com.mcxiaoke.volley:library:${libs.volley}"
compile "cat.ereza:customactivityoncrash:${libs.customactivityoncrash}"
//    compile "com.github.zcweng:switch-button:${libs.switch_button}@aar"
//bugly
return useLib;
multidex               : "1.0.1",
fresco                 : "1.2.0",
gson                   : "2.2.4",
umeng_analytics        : "6.0.9",
mosby                  : "3.0.4",
annotations            : "13.0",
how can I delete line around my placeholderImage? thank you @lambdapioneer thank you for your reply. I resolved this issue!!!!!!!! ðŸ‘ ðŸ‘ ðŸ‘ ðŸ‘ ðŸ‘   Why is -1?????? NetworkFetchProducer calculateProgress() methode,total params Always be -1  I get this error:
Both could be just sample issues, but I don't know.
I think the GC in those devices are very different . I have no idea how fresco internally does it
will update tomorrow .  @kraghu  ![9ca60e3e-ff3a-4365-9008-61c4bec1e154](https://user-images.githubusercontent.com/1152058/31630262-f2c65716-b26a-11e7-9204-7a5d616a322e.gif)
ndk {
abiFilters "armeabi"
You probably also want to include the other ARM variants (`armeabi-v7a`, `arm64-v8a`) in your `abiFilters` list. `armeabi` is only used needed for devices running Gingerbread. @lambdapioneer
Thanks! ðŸ‘  @foghina do you have any thoughts on this? We're interested in getting some advice on how to solve this problem from a fresco expert.
Adam Comella
Microsoft Corp. Thanks @foghina for replying!
Please, @foghina and @oprisnik could you confirm you are ok with this approach?
@foghina @oprisnik could you please confirm if this approach is reasonable to you? Thanks! I can add the exception at the network level, my only concern is that a 204 response is not a network error, it is a success response. It is the decoder layer the one that really fails when there is no content to decode. However, you guys have way more experience with this code base and I will follow your guide lines. Thanks for the feedback!
DraweeController controller = controllerBuilder.build();
1ï¼‰meizuï¼ŒAndroid6.0
This is a video of the issue happening with transitions set to 5x slower than normal, so the issue is more visible.
I'm guessing the transition magic just isn't aware that focus crop is a thing, so ideally when the transition image is displayed it can be aware of that, not sure if that is possible though.
* Fresco version: 1.5.0
Brs
newjor @foghina  the device crashed is ASUS T00J. Since the API of the Fresco are different between 1.3.0 and 1.5, and our project originally use 1.3.0, I do not try to upgrade to latest version.  I tried to rebuild the 1.3.0 by adding the flags '-mstackrealign -mincoming-stack-boundary=4', but the output library libstatic-webp.so has nothing different in the size and the function entry, and the app still crashed when using that library. I guess that may be not the esp disalignment leaded to crash.   How to set ScaleType on SimpleDraweeView when load dynamic webp or gif.
* Fresco version: 1.5.0
3. show image with `SimpleDrawee`
```java
* Fresco version: 1.4.0
There is another problem:
@Override
@Override
stopAnim(drawable);
//stop anim
DraweeController draweeController = Fresco
.newDraweeControllerBuilder()
someView.setController(draweeController);
I did initialize fresco in onCreate
</RelativeLayout>
* Fresco version: 1.4.0
Adam
if I want to display bitmap object, How to do it by `setController(DraweeController)` ? @erikandre
it seem like the fresco scale imagesize when pic is big then phone aspect ratio!!!
thank fou answer me
@wangfaxi1985  One possibility is that you might be _**enabled down sampling (setDownsampleEnabled(true))**_ when initializing fresco
@LUSANGEM  yes i set `setDownsampleEnabled(true)`,is other way to close `setDownsampleEnabled(false)` for temporary  In EncodedMemoryCacheProducer, when after
[2]: https://code.facebook.com/cla
[3]: http://circleci.com/gh/facebook/fresco
@Override
@Override
Log.i("DraweeUpdate", "Image is fully loaded!");
@Override
Log.i("DraweeUpdate", "Image is partly loaded! (maybe it's a progressive JPEG?)");
@Override
@Override
Log.i("DraweeUpdate", "Image failed to load: " + throwable.getMessage());
@Override
09-03 12:38:48.525 25260-25268/com.lalafo A/libc: Invalid address 0x7b3d6ff180 passed to free: value not allocated
09-03 12:38:48.864 25260-25268/com.lalafo A/libc: Fatal signal 6 (SIGABRT), code -6 in tid 25268 (ReferenceQueueD)
09-03 12:38:49.022 2651-2651/? A/DEBUG: pid: 25260, tid: 25268, name: ReferenceQueueD  >>> com.lalafo <<<
ifree
Some of our libs depend on Picasso, which uses BigInteger. But it's kinda strange.  ### Description
* Fresco version: 1.5.0
09-05 12:33:48.205 12722  2493 E BufferQueue: [com.lalafo/classifieds.yalla.features.host.HostActivity] dequeueBuffer: min undequeued buffer count (1) exceeded (dequeued=2 undequeudCount=0)
09-05 12:33:48.205 12722 13909 E BufferQueue: [com.lalafo/classifieds.yalla.features.host.HostActivity] dequeueBuffer: min undequeued buffer count (1) exceeded (dequeued=2 undequeudCount=0)
09-05 12:33:48.235 12722 13909 E BufferQueue: [com.lalafo/classifieds.yalla.features.host.HostActivity] dequeueBuffer: min undequeued buffer count (1) exceeded (dequeued=2 undequeudCount=0)
09-05 12:33:49.105   156   156 D simal   : had not finish
09-05 12:33:51.097   156   156 D simal   : had not finish
09-05 12:33:53.089   156   156 D simal   : had not finish
09-05 12:33:54.170 17497 17497 I DEBUG   :          72638968  779fd1d6  /data/dalvik-cache/data@app@com.lalafo-3.apk@classes.dex
``` @lambdapioneer I've ported our feed to glide and this crash disappeared, any ideas what might be causing it? I also have .hprof files before a crash. And this is the code we use to init Fresco and load pics.
```kotlin
builder.setBitmapMemoryCacheParamsSupplier(LollipopBitmapMemoryCacheParamsSupplier(
fun loadImage(view: DraweeView<*>, uri: Uri) {
val controllerBuilder = Fresco.newDraweeControllerBuilder()
val frescoMemory = when {
return frescoMemory
but imageloader is ok.
#02  pc 0001f0e4  /system/lib/libvmkid_lemur.so
#03  pc 00085350  /system/lib/libvmkid_lemur.so (vInvokeNativeFast+296)
#04  pc 00028050  /system/lib/libvmkid_lemur.so
#05  pc 0008203c  /system/lib/libvmkid_lemur.so (vInterpret+148)
#06  pc 0008c8a0  /system/lib/libvmkid_lemur.so (vCallMethod+832)
#07  pc 000bd1ec  /system/lib/libvmkid_lemur.so
This is the attached log.
* Fresco version: [We have only tested with 1.3.0 and 1.5.0. Both of them have crashes.]
@lambdapioneer
t-keys]
[ro.build.fingerprint]: [rockchip/rk3188/rk3188:4.4.2/KOT49H/eng.hepeng.20150824
[ro.build.user]: [hepeng]
[persist.aliyun.sensorsdkversion]: [3.43]
[ro.aliyun.sensorsdkversion]: [3.43]
[ro.opengles.version]: [131072]
[ro.rksdk.version]: [RK30_ANDROID$(PLATFORM_VERSION)-SDK-v1.00.00 \]
[ro.yunos.version.platform]: [3]
[ro.yunos.version.release]: [3.1.1-R-20160620.2000]
[ro.yunos.version.sdk]: [2]
[sys.gmali.version]: [7X_1_7]
[sys.settings_system_version]: [29] @lambdapioneer
* Fresco version: [FILL THIS OUT]
Eric
@Override
MAX_CACHE_ENTRIES,
This is the bad webp url:  [http://s1.wmlives.com/data/dongci/opus_cover/201709212010098CvyM09UO2h.webp](url)
09-21 20:34:15.406 1266-1681/? E/WifiConfigStore: updateConfiguration freq=5745 BSSID=f0:b4:29:19:c2:63 RSSI=-42 "zhaoling_5G"WPA_PSK
#00    pc 0003df04    /system/lib/libc.so (tgkill+12) [armeabi-v7a::564d58d2782735e78788149ba84c24f3]
#01    pc 00016e65    /system/lib/libc.so (pthread_kill+52) [armeabi-v7a::564d58d2782735e78788149ba84c24f3]
#02    pc 00017a7b    /system/lib/libc.so (raise+10) [armeabi-v7a::564d58d2782735e78788149ba84c24f3]
#03    pc 0001425d    /system/lib/libc.so (__libc_android_abort+36) [armeabi-v7a::564d58d2782735e78788149ba84c24f3]
#04    pc 000125b0    /system/lib/libc.so (abort+4) [armeabi-v7a::564d58d2782735e78788149ba84c24f3]
#05    pc 000a741b    /system/lib/libart.so (_ZN3art10LogMessageD1Ev+1430) [armeabi-v7a::3b9ca8ba606bd9a808f44525aec2e67b]
#06    pc 000b0ff5    /system/lib/libart.so (_ZN3artL8JniAbortEPKcS1_+1084) [armeabi-v7a::3b9ca8ba606bd9a808f44525aec2e67b]
#07    pc 000b153f    /system/lib/libart.so (_ZN3art9JniAbortFEPKcS1_z+58) [armeabi-v7a::3b9ca8ba606bd9a808f44525aec2e67b]
#08    pc 000b4639    /system/lib/libart.so (_ZN3art11ScopedCheckC1EP7_JNIEnviPKc+1284) [armeabi-v7a::3b9ca8ba606bd9a808f44525aec2e67b]
#09    pc 000bdd43    /system/lib/libart.so (_ZN3art8CheckJNI12MonitorEnterEP7_JNIEnvP8_jobject+38) [armeabi-v7a::3b9ca8ba606bd9a808f44525aec2e67b]
#10    pc 000092d5    /data/app/xx.xxxxx.xxxxx-1/lib/arm/libstatic-webp.so [armeabi-v7a::9b1e054918b66a5463c8d6d22b1c1a30]
#11    pc 0000948f    /data/app/xx.xxxxx.xxxxx-1/lib/arm/libstatic-webp.so [armeabi-v7a::9b1e054918b66a5463c8d6d22b1c1a30]
#12    pc 0069bead    /data/dalvik-cache/arm/data@app@xx.xxxxx.xxxxx-1@base.apk@classes.dex (oatdata+6925997) [armeabi::7dc51ade97c08449327ed17f6a5147f0]
- Drawee -> Rotation
- GIFs
- Check out 3194ad2
- Play around with the samples
* Fresco version: 3194ad2
* Fresco version: 1.4.0  and 1.5.0
http://oexd4utdf.qnssl.com/Fk1K7Gy8gIFjjhLvuh6F9FWICKPZ
* Fresco version: 1.5.0
* Fresco version: 1.4.0
Now that i think of it, I have seen another issue, which probably has the same cause. I am seeing stretched thumbnails for stereoscopic images only. Above 200px, they are rendered correctly.  ### Description
The only .so files in our app are belonging to fresco: libimagepipeline.so(x86, x86_64, arm64-v8a, armeabi, armeabi-v7a)
when we excluded the .so files, the app is installing and working, but images are not loading because we excluded the .so files. Hi @kirwan, OK, but does the fresco itself takes care of loading `.so` files from `/system/lib/ `or do we need to do anything to load `.so` files manually?  Now I aim to play a gif image 5 time.
```java
simpleDraweeView.setVisibility(View.VISIBLE);
@Override
<RelativeLayout
</RelativeLayout>
I also encountered this problem during use, but when I couldn't get the size of DraweeView,
draweeView.post(new Runnable() {
@Override
```java
@Override
image.setController(draweeController);
@Override
@Override
**Drawee in xml**
* Fresco version: 1.4.0
It seems like there has been a major change in the image decoder and image purging which is now causing issues on particular devices.
fresco1.4.0, when display gif ,there is always a space on the right.
fresco1.4.0, when display gif ,there is always a space on the right.
fresco1.4.0, when display gif ,there is always a space on the right.
https://b3-q.mafengwo.net/s10/M00/8B/19/wKgBZ1lDmPWABs9bAA6C1VXHu94895.gif?imageMogr2%2Fthumbnail%2F%21516x369r%2Fgravity%2FCenter%2Fcrop%2F%21516x369%2Fquality%2F90%7Cimageslim @kirwan   ### Description
* Fresco version: 1.4.0
When setting null bitmap to drawee view which is rounded, it occurs NPE.
mDraweeRound.getHierarchy().setImage(new BitmapDrawable(getResources(), (Bitmap) null), 1, false);
07-29 16:24:53.821 3688-4266/com.allfootball.news W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
07-29 16:24:53.821 3688-4266/com.allfootball.news W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
ndk {
abiFilters "armeabi"
ndk {
abiFilters 'x86', 'x86_64', 'arm64-v8a', 'armeabi-v7a'
[2]: https://code.facebook.com/cla
[3]: http://circleci.com/gh/facebook/fresco
Hi @lambdapioneer , I have already signed the CLA.  The PR aims to fix #1413 , #675.
"showcase" sample > DraweeTransitionFragment > ImageDetailsActivity >startTransition  hi
Here's my codeï¼š
**FrescoActivity**
public class FrescoActivity  extends AppCompatActivity {
@Override
transaction.setCustomAnimations(
R.anim.h_fragment_enter,
R.anim.h_fragment_exit,
R.anim.h_fragment_pop_enter,
R.anim.h_fragment_pop_exit
**FrescoMainFragment**
public class FrescoMainFragment extends Fragment {
public static FrescoMainFragment newInstance() {
@Nullable
@Override
s1.setImageURI("http://odqp9ta7o.qnssl.com/5454114758854668288");
s2.setImageURI("http://odqp9ta7o.qnssl.com/5464149113932808192");
Glide.with(this).load("http://odqp9ta7o.qnssl.com/5429034688435023872").into(s3);
Glide.with(this).load("http://odqp9ta7o.qnssl.com/5468585586862010368").into(s4);
@Override
transaction.setCustomAnimations(
R.anim.h_fragment_enter,
R.anim.h_fragment_exit,
R.anim.h_fragment_pop_enter,
R.anim.h_fragment_pop_exit
**OtherFragment**
@Nullable
@Override
s1.setImageURI("http://odqp9ta7o.qnssl.com/5454114758854668288");
s2.setImageURI("http://odqp9ta7o.qnssl.com/5464149113932808192");
* Fresco version: 1.3.0
* Platform version: HUAWEI NEM-AL10, EIMUI 4.1.2, android version 6.0.
[http://qa-gourmet.bravvurashowcase.com/media/catalog/product/4/9/4992303011196.jpg
http://qa-gourmet.bravvurashowcase.com/media/catalog/product/8/3/834522006253_2.jpg
http://qa-gourmet.bravvurashowcase.com/media/catalog/product/6/0/6025089000004.jpg
http://qa-gourmet.bravvurashowcase.com/media/catalog/product/6/0/6025090000000.jpg
http://qa-gourmet.bravvurashowcase.com/media/catalog/product/6/0/6025091000009.jpg
http://qa-gourmet.bravvurashowcase.com/media/catalog/product/6/0/6025087000006_2.png
* Fresco 1.3.0
It comes from network
```java
07-24 16:29:45.734 15743-15743 V/unknown:AbstractDraweeController: controller d71cd39 null -> 0: initialize
07-24 16:29:45.734 15743-15743 V/unknown:AbstractDraweeController: controller d71cd39 0: onAttach: request needs submit
07-24 16:29:45.744 15743-15743 V/unknown:AbstractDraweeController: controller d71cd39 0 -> 1: initialize
07-24 16:29:45.744 15743-15743 V/unknown:AbstractDraweeController: controller d71cd39 1 -> 2: initialize
07-24 16:29:45.744 15743-15743 V/unknown:AbstractDraweeController: controller d71cd39 2: onAttach: request needs submit
07-24 16:29:45.869 15743-15743 V/unknown:AbstractDraweeController: controller d71cd39 2: final_failed @ onFailure: failure: java.lang.RuntimeException: JPEG datastream contains no image
```java
07-24 16:32:33.420 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 null -> 3: initialize
07-24 16:32:33.421 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 3: onAttach: request needs submit
07-24 16:32:33.422 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 3: submitRequest: dataSource: 2b608d2
07-24 16:32:33.423 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 3 -> 4: initialize
07-24 16:32:33.424 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 4 -> 5: initialize
07-24 16:32:33.424 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 5: onAttach: request needs submit
07-24 16:32:33.425 15743-15743 V/unknown:AbstractDraweeController: controller c394d34 5: submitRequest: dataSource: 29deda3
```java
@Override
```java
.setOldController(simpleDraweeView.getController())
@Override
@Override
@Override
@Override
``` Hi @lambdapioneer,
```java
I just try to comment the resize line, then it works. Hi @lambdapioneer,
07-21 13:32:56.758 23004-23004/com.redpandatronics.trumptweetrumps I/art:     at void android.os.Looper.loop() (Looper.java:154)
07-21 13:32:56.759 23004-23004/com.redpandatronics.trumptweetrumps I/art:     at void android.os.Looper.loop() (Looper.java:154)
* Fresco version: 1.3.0
The code causing the error:
* React Native: 0.46.4
I use fresco like thisï¼š
@foghina  Thank you very much for your replay.   My application has a lot of pictures & activities & fragmentï¼Œsometimes BitmapMemoryCache is full.   I have tried the method you provided and  encapsulation function like this and views not flash:
* Fresco version: 1.4.0
07-17 15:20:19.855 13973 13973 V unknown:AbstractDraweeController: controller 2c6609d null -> 0: initialize
07-17 15:20:19.892 13973 13973 V unknown:AbstractDraweeController: controller 2c6609d 0: onAttach: request needs submit
07-17 15:20:20.071 13973 14034 W unknown:RequestLoggingListener: java.lang.IllegalArgumentException: unknown image format
07-17 15:20:20.200 13973 13973 V unknown:AbstractDraweeController: controller 2c6609d 0: final_failed @ onFailure: failure: java.lang.IllegalArgumentException: unknown image format
* Fresco version: 1.4.0
I've searched Fresco source in this commit 147c5e2f7e5a55ce99c223ace7c0826e553c0aa5 (July 14, 2017), and found only one use of Android support libraries in core code (not test/sample code): `android.support.v4.util.Pools`. I guess it's possible to make your own replacement.
* Fresco version: 1.3.0
Thank you, Hi @foghina,
SimpleDraweeView iv = ...
* Fresco version: 1.3.0
```java
@Override
* Fresco version: [FILL THIS OUT]
* Fresco version: 1.3.0
@erikandre
* Fresco version: 1.2.0
```java
@Override
```java
Change
```java
```java
06-23 10:46:56.149 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 86 -> 87: initialize
06-23 10:46:56.151 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: onDetach
06-23 10:46:56.152 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: setHierarchy: null
06-23 10:46:56.157 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: onAttach: request needs submit
06-23 10:46:56.162 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: submitRequest: dataSource: bbb10cf
when I first use the setIamgeUri, it works. After I return from anther activity, it don't works. above is the log when i return. Also I try the self definition view, it don't has the problem.
06-23 10:46:56.149 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 86 -> 87: initialize
06-23 10:46:56.151 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: onDetach
06-23 10:46:56.152 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: setHierarchy: null
06-23 10:46:56.157 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: onAttach: request needs submit
06-23 10:46:56.162 3815 3815 V unknown:AbstractDraweeController: controller 87313a0 87: submitRequest: dataSource: bbb10cf
when I first use the setIamgeUri, it works. After I return from anther activity, it don't works. above is the log when i return. Also I try the self definition view, it don't has the problem.
else
@Override
else
@Override
@Override
.setOldController(imageDrawee.getController())
.setUri(uri)
imageDrawee.setController(controller);
I tried to set imageDrawee.setController(null) inside onDestroy method, but the problem continues.
* Fresco version: 1.3.0
* Fresco version: [FILL THIS OUT]
1Caused by: java.lang.UnsatisfiedLinkError: dlopen failed: "/data/app-lib/com.wanda.app.wanhui-1/libimagepipeline.so" is too small to be an ELF executable
10 alloc
[2]: https://code.facebook.com/cla
[3]: http://circleci.com/gh/facebook/fresco
this animation is not working .
* Fresco version: [FILL THIS OUT]
@bblackbelt what is the solution for RV inside NextedScrollView ? I have recycle view with match_parent settings   Regarding issue #1791
I manually checked it with the following formats (remote urls): jpg, png, bmp;  and it worked. (calling parseMetaData() and then getWidth/getHeight)
@Override
@Override
```java
```java
06-02 10:24:28.798 14554-14554/com.showroomprive.holo.sample V/unknown:AbstractDraweeController: controller e2bf17f null -> 3: initialize
06-02 10:24:28.799 14554-14554/com.showroomprive.holo.sample V/unknown:AbstractDraweeController: controller e2bf17f 3 -> 4: initialize
06-02 10:24:28.800 14554-14554/com.showroomprive.holo.sample V/unknown:AbstractDraweeController: controller e2bf17f 4 -> 5: initialize
### Additional informations
* Fresco 1.3.0 Does anyone know what is it happening ? Hi @erikandre,
<RelativeLayout
</RelativeLayout>
```java
.setOldController(drawee.getController())
@Override
@Override
@Override
@Override
@Override
@Override
drawee.setController(controllerBuilder.build());
```java
``` Another strange fact, the same piece of code works  great in normal application module (`apply plugin: 'com.android.application'`) and not in a library module (`apply plugin: 'com.android.library'`). It is troubled me also. the url that first to load will not be showing, and it is ok on the next time in version 1.3.0. Downgrade the version to 0.14.1 it's ok. Hi @Presleyzheng
```java
public WorkingDraweeView(Context context) {
@Override
* Fresco version: 1.0.0
fresco:roundingBorderWidth="0dp" /> @lambdapioneer This happens with gif image only and when that item of listview is focusable. For rest of items it does not show white border.
<RelativeLayout
</RelativeLayout>
<RelativeLayout
* Platform version: [ API24 HUAWEI M3]
Define the layout XML for the Drawee:
```java
```gradle
* Fresco version: 1.3.0
```java
This should also be added on official documentation FAQ's section. @ibtisamasif The problem with that call is [clearly documented](https://developer.android.com/reference/android/support/v7/app/AppCompatDelegate.html#setCompatVectorFromResourcesEnabled(boolean)):
> This feature defaults to disabled, since enabling it can cause issues with memory usage, and problems updating Configuration instances. If you update the configuration manually, then you probably do not want to enable this. You have been warned.  fresco 1.3
[2]: https://code.facebook.com/cla
[3]: http://circleci.com/gh/facebook/fresco
Issue:
for (BatchedImageRequest bir : mBatchedResponses.values()) {
[2]: https://code.facebook.com/cla
[3]: http://circleci.com/gh/facebook/fresco
LOGD("invalid handle.");
if (bitmapInfo.format != ANDROID_BITMAP_FORMAT_RGBA_8888) {
```java
```java
* Fresco version: 1.3.0
```Java
```gradle
when press home then back the activty,In Android N the gif will auto play @lambdapioneer  I use reflact Solve this problem, get the field  "mControllerListener",
* build Fresco from AAR
* Fresco version: 1.3.0
But, fresco not support gif circle!
So, what shall i do? Note that the gif url i get from server is a static gif, it only have one frame.I only what to display the one frame image as circle. @kirwan it works,you saved my day,thank you very much.  When i load image from url containing Katakana characters then java.io.IOException
I observed some crash reports when using Fresco.
* Fresco version: 1.2.0
@Override
**the code adapter**
@Override
@Override
@Override
@Override
private Context context;
Uri uri;
.setOldController(photoDraweeView.getController())
@Override
@Override
photoDraweeView.update(imageInfo.getWidth(), imageInfo.getHeight());
removeView(photoDraweeView);
photoDraweeView.setOnViewTapListener(PhotoImageView.this);
@Override
@Override
photoDraweeView.update(imageInfo.getWidth(), imageInfo.getHeight());
addView(photoDraweeView, ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
@Override
@Override
@Override
how to resolve this bug @foghina
my fresco version  is
* Fresco version: 1.3.0
```java
@Override
@Override
* Fresco version: 1.3.0
Sorry I think we misunderstood. The problem isn't about PJPEG, it's about the downloading of the image. Try adding this interceptor to the OKHttpClient used by Fresco. The method in GenericDraweeHierarchy::setProgress(float progress) will never be called before the end of the downloading. Therefore the loading drawable is not properly updated. It's probably a side effect of something but I couldn't figured it out. This is a minor issue though. >Seems like something to fix on the OkHttp side :)
@gbero  :
Operation:  happen only once  in many devices I can't test the showcase app on that device. This bug is reported from the thirdparty's SDk, named umeng.
// from 'rooban/src/main/res/dialog/messagedialog/.'
// into 'rooban/src/main/res/layout'
buildTypes {
compile "com.mcxiaoke.volley:library:${libs.volley}"
compile "cat.ereza:customactivityoncrash:${libs.customactivityoncrash}"
// compile "com.github.zcweng:switch-button:${libs.switch_button}@aar"
//bugly
return useLib;
multidex : "1.0.1",
fresco : "1.2.0",
gson : "2.2.4",
umeng_analytics : "6.0.9",
mosby : "3.0.4",
* Fresco version: [FILL THIS OUT]
* Fresco version: 1.0.0
https://media.giphy.com/media/RHoRwhdlh6TBK/giphy.gif
DraweeController controller =
Fresco.newDraweeControllerBuilder()
.setUri("https://media.giphy.com/media/RHoRwhdlh6TBK/giphy.gif\n")
myDraweeView.setController(controller);
unknown
* Fresco version: I tried 1.0.0-1.3.0
When fresco 1.3.0 was released, all builds from that point forward started to crash.
Process: com.heniaokeji.geji, PID: 21644
fresco loading video shows a lot slower than loading jpg. How can I speed up the speed of loading video?
bolts.n.run(Unknown Source)
fresco:
* Fresco version: [FILL THIS OUT]
my code:
got exception:
change my code
error:
ROM: XiaoMi/MIUI
Equipment type: XiaoMi 3]
Millet MI 3
ROM
Armeabi-v7a
@Override
@Override
* Fresco version: 1.2.0
04-18 10:39:34.817 21848-21975/? V/unknown:BitmapPool: release (free) (object, size) = (afcb37f, 16384)
@Override
@Override
@Deprecated
@Override
@Override
Bitmap bm = get();
@Override
@Override
@Override
@Override
simpleDraweeView.setController(controller);
android:id="@+id/simpleDraweeView"
com/facebook/imagepipeline/memory/NativeMemoryChunk
* Platform version: Android 4.4.2,level 19 HUAWEI MT7-CL00
we built a platform to collect user's crash log, here is what we found about fresco:
* Platform version: Android 4.4.2,level 19 HUAWEI MT7-CL00
The build fails for every attempt when updating fresco library version from 1.1.0 to 1.2.0.
* Fresco version: 1.2.0 @foghina Thank you for the quick response; adding these two `dontwarn` configuration fixes build failure and made the build to succeed for me.
How can I hide placeholder images when I download progress bar display  In our app we have a third-party library which .so files are inserted into armeabi-v7 and x_86 folders. To manage all types of terminals  was inserted the filter in gradle:
ndk {
abiFilters 'x86', 'armeabi-v7a'
using Fresco in the project occurs several times crash, unsystematic:
By placing all the missing types in abifilters the third-party library causes crash as file search in armeabi-V8a folder.
```java
[æ‹œæ‹œ] will be treated as an image ,an ImageSpan ,
here are some of my code
|| styleParam.preffix == "emoji") {
//problem goes here and below
//problem also goes here
return GIF_ERROR;
@oprisnik   GIF å¦‚ä½•è®¾ç½® ç¼“å­˜å›¾ä¸­çš„å ä½å›¾
devices: Amazon KFARWI
```java
Fresco.newDraweeControllerBuilder()
.setUri(uri)
nivShowImg.setController(draweeController);
```java
```java
//my error
Crash LOG
public class FrescoCacheParams implements Supplier<MemoryCacheParams> {
@Override
// calling on each Drawee, once it moves out of visible area
It seems that those are referenced from native, such as NativePooledByteBuffer or NativeMemoryChunk.
/I/art: Alloc concurrent mark sweep GC freed 214(8KB) AllocSpace objects, 1(416KB) LOS objects, 0% free, 126MB/128MB, paused 876us total 42.655ms
/I/art: Alloc concurrent mark sweep GC freed 12633(1496KB) AllocSpace objects, 0(0B) LOS objects, 1% free, 126MB/128MB, paused 684us total 43.271ms
/I/art: Alloc concurrent mark sweep GC freed 2239(265KB) AllocSpace objects, 0(0B) LOS objects, 1% free, 126MB/128MB, paused 1.282ms total 40.182ms
/I/art: Alloc concurrent mark sweep GC freed 7(1264B) AllocSpace objects, 0(0B) LOS objects, 1% free, 126MB/128MB, paused 2.697ms total 43.668ms
I know you have not enough information to solve OOM problems.  I just suggest to posting error event with callback instead of just throw OOM error. So that we can process OOM event ourselves. @AlexCJW I don't think there's a way of handling an exception raised by the system such as an OOM, and furthermore can't think of an scenario where your app will be able to respond to a callback after receiving an OOM since that callback itself would also have to consume unavailable memory after all.  Hi, I use Fresco to play webp animations, but sometimes it do not work well, every frame is flashing, may be loaded too slowly?
Uri uri = Uri.parse("http://77flrh.com1.z0.glb.clouddn.com/038B98F02B26B70DF0DF8EF62257F9EB.webp");
.setUri(uri)
@Override
Animatable animatable) {
draweeView.setController(controller);
I have the same problem in use Frescoï¼ŒThe picture will flash several times at the beginning.
@erikandre
@erikandre @oprisnik
See #1686 , since static-webp module exclude libjpeg_turbo.so, so I extract webp test to a new module : static-webp-test, it would rely on imagepipeline and static-webp. @lambdapioneer I've update ci script and it passed then:)  Added Pics for Reddit to the list
**Code formatting**
Round as circle method won't work as expected.
// Default Fresco
Custom setups to solve memory problem
After this work, if somebody use webp support, his so library would be (file size is measured in armeabi-v7a abi):
- **libfb_jpegturbo.so** 165kb
Totally: 592kb (So we reduce 43kb just in armeabi-v7)
It's size is 165KB kb in armeabi-v7 and 409KB in x86 (so big!), would cause a lot of redundant apk size!
- make fb_jpegturbo as a shared library and dynamically link them in two modules;
</RelativeLayout>`
@Override
@Override
@elyonsaber can you please share your custom view? I have a feeling I'm facing the same problem.
Is it expected behavior? Are there any way to set a custom animation to present the downloaded Gifs more smoothly? Thank you! This fixed the issue:
init fresco code:
@Override
@Override
@kirwan Thank  you very much.
Eric
May be I misunderstood ?
Eric
@Override
@Override
JuHonggang http://stackoverflow.com/questions/32267251/read-and-write-timeouts-behavior
**Code formatting**
This situation actually can be solve easily with Reactive programming, since the caller can define whether they wanted to delay the error or not.
fresco:failureImage="@drawable/ic_error_black_24dp"
fresco:placeholderImage="@drawable/ic_android_black_24dp"
public class GiphyView
CustomApplication.get(context).getGiphyComponent().inject(this);
@Override
@Override
@Override
public void onBindViewHolder(GiphyViewHolder holder, int position) {
holder.setGif(mGiphyPresenter.getItemImage(position));
class GiphyViewHolder extends ViewHolder {
This code does not work. But
This code works. @foghina Thank you very much  **motivation** :
when fresco can support ico format.
```java
What are the layout params for the DraweeView?
Eric HTTP2 :
Eric
It happened when following code is called occasionally.
final Uri uri,
.setMediaVariations(mvb.build())
java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase: /data/user/0/com.mao.zx.metome/databases/FrescoMediaVariationsIndex.db
java.lang.IllegalStateException: attempt to re-open an already-closed object: SQLiteDatabase: /data/user/0/com.mao.zx.metome/databases/FrescoMediaVariationsIndex.db
Hi @lambdapioneer,
for (BatchedImageRequest bir : mBatchedResponses.values()) {
``` sorry those logs were collected from users and we are not able to get the images which cause the crash. And it seemed to be indroduced from fresco 1.0.0. Here's the link to the crash [http://crashes.to/s/b3712f643bb](http://crashes.to/s/b3712f643bb) and wish it helps hi is there any progress on this issues? We simply use SimpleDrawee to display local picture mostly taken by users, like a gallery. Maybe adding try-catch or making getExifInterface a supplier would help developer to avoid this crash? ![amiibo-igcc-3ds](https://user-images.githubusercontent.com/3621496/28012087-505bdc1e-6597-11e7-99f7-611db5dbb522.jpg)
throws IOException {
} catch (RuntimeException | StackOverflowError ex) {
2)Added intrnet permission
Uri uri = Uri.parse("http://katemobile.ru/tmp/sample3.gif");
.setUri(uri)
.setOldController(draweeView.getController())
draweeView.setController(controller);
@Override
there throw exception java.lang.IllegalStateException: Width or height is too small.
the fresco version 1.0.1
do {
if (bos != null) {
Eric
.setOldController(draweeHolder.getController())
draweeHolder.setController(controllerBuilder.build());
draweeHolder.getHierarchy().setProgressBarImage(new AutoRotateDrawable(spinner, 700));
@foghina Thanks, that did the trick ðŸ‘   the code like this:
Has someone tested it with HTTP2 and Fresco?
@Override
do {
i = bis.read();
@Override
Here is my code:
@Override
draweeHolder.getHierarchy().setProgressBarImage(new CircleProgressBarDrawable());
@Override
@Override
@Override
.setOldController(draweeHolder.getController())
draweeHolder.setController(controllerBuilder.build());
@Override
@Override
.setOldController(draweeHolder.getController())
draweeHolder.setController(controllerBuilder);
Eric
image.setController( Fresco.newDraweeControllerBuilder()
Like this: https://media0.giphy.com/media/oOTTyHRHj0HYY/giphy_s.gif
How I can blur received image?
.setOldController(draweeView.getController());
draweeView.setController(controllerBuilder.build());
``` @kirwan Thanks, that worked.  Sorry I didn't find a similar Isssus, so I opened it.
splits {
abi {
include 'x86', 'x86_64', 'arm64-v8a', 'armeabi-v7a','armeabi'
@Override
OKï¼Œthanks  When I run the samples of fresco in Android Studio. I got an error as follow:
![currupt_image](https://cloud.githubusercontent.com/assets/23431961/21840871/d3132006-d805-11e6-8a4e-6b84ac68d096.jpg)
dataSource.subscribe(new CustomBitmapDataSubscriber(context.getApplicationContext(),productId,highResUri,uriLocal), CallerThreadExecutor.getInstance());
String filePath1 = "file:///storage/emulated/0/Allo%20Media/IMG_20161022_182847_355.jpg";
draweeView.setController(controllerBuilder);
in v0.14.1 Play abnormal
and  GIF image w=130 h=130
```java
@Override
//in 'com.facebook.fresco:fresco:0.14.1' Play abnormal
PipelineDraweeControllerBuilder giftAbnormalBuilder = Fresco
.newDraweeControllerBuilder()
.setUri("http://heixiucrm-test.img-cn-beijing.aliyuncs.com/20160623175055_gift_select_animation_1466675455807.gif@194w_194h_1l_1e_1an.gif")
//this GIF image w=195 h=195
.newDraweeControllerBuilder()
.setUri("http://heixiucrm-test.img-cn-beijing.aliyuncs.com/20160623175055_gift_select_animation_1466675455807.gif@195w_195h_1l_1e_1an.gif")
@foghina
sample app: https://github.com/imliujun/FrescoTest @foghina
This picture is in GIF formatã€‚
What is the reason for this problem?
fresco 0.13, I got some crash message:,applicationContext.getFilesDir() return null?
`"Url": "http:\/\/andromak.s3.amazonaws.com\/Post\/aviary-image-1483668519447.jpeg",
"Thumb": "http:\/\/andromak.s3.amazonaws.com\/Post\/thumb\/aviary-image-1483668519447.jpeg",`
12-30 18:42:25.772 150-150/? I/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
12-30 18:42:25.802 150-150/? I/DEBUG:     esi 00000000  edi 00000000
and this is the related code lines:
besides gif image, an animated webp image may also cause a similar crash, the image is from fresco sample demo, https://www.gstatic.com/webp/animated/1.webp, and the backtrace looks like thisï¼š
-fno-weak
Uri uri = "http://...";
the bitmap from Picasso run but the bitmap from fresco    mine project has already  depencies on drawee;but i got this problem
mine ide is itellij idea how should i solve this problem ![image](https://cloud.githubusercontent.com/assets/8358046/21628782/feadade8-d25c-11e6-86a4-d7b52ba0052c.png)
Fresco.newDraweeControllerBuilder()
Eric  java.lang.NullPointerException: Attempt to invoke interface method 'com.facebook.common.references.CloseableReference com.facebook.imagepipeline.cache.MemoryCache.get(java.lang.Object)' on a null object reference
the code is here:
@447zyg
@lambdapioneer
instant run of my android studio didn't work correctly. @lambdapioneer   ok ã€‚
@Override
@Override
@Override
@Override
My code:
```AbstractDraweeController: controller a65fcb9 null -> 125: initialize
AbstractDraweeController: controller a65fcb9 125: onAttach: request needs submit
AbstractDraweeController: controller a65fcb9 125: submitRequest: dataSource: ca085f
AbstractDraweeController: controller 230cb7b null -> 126: initialize
AbstractDraweeController: controller 230cb7b 126: onAttach: request needs submit
AbstractDraweeController: controller 230cb7b 126: submitRequest: dataSource: e1d89f1
AbstractDraweeController: controller a65fcb9 125: final_failed @ onFailure: failure: java.io.FileNotFoundException: torage/emulated/0/Images/1482147242789-1165.jpg (No such file or directory)
AbstractDraweeController: controller 230cb7b 126: final_failed @ onFailure: failure: java.io.FileNotFoundException: torage/emulated/0/Images/1481641781949-2816.jpg (No such file or directory)
AbstractDraweeController: controller 240eaeb 103: onDetach
AbstractDraweeController: controller 16f66d9 104: onDetach
AbstractDraweeController: controller 33fba98 105: onDetach
AbstractDraweeController: controller 240eaeb 103: release: image: CloseableReference ac1e844
AbstractDraweeController: controller 16f66d9 104: release: image: CloseableReference d89775a```
It's tested on few phones from android 4.4 to 7.1.1, same problem on all of them.
Uri uri;
private static final String[] SAMPLE_URIS = {
@Override
(ZoomableDraweeView) page.findViewById(R.id.zoomableView);
zoomableDraweeView.setIsLongpressEnabled(false);
.setUri(uri)
zoomableDraweeView.setController(controller);
@Override
zoomableDraweeView.setController(null);
@Override
@Override
@Override
if (mSourceFile == null) {
if (mSourceFile == null) {
Looks Like being stretched out.
style="@style/simpledraweeview_leftround_style"
<style name="simpledraweeview_style">
Hi @lambdapioneer
```Java
.setUri(uri)
simpleDraweeView.setController(controller);
(mutexes: tll=0 tsl=0 tscl=0 ghl=2)
if (checkTag(simpleDraweeView, url)) {
.setOldController(simpleDraweeView.getController())
if(isNight){
if(isNight){
if(draweeController != null){
Picasso example
public static void showCustomToast(Context context, String displayText, String photoUri) {
@Override
@Override
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);
The strange thing is the callbacks of **BaseControllerListener** are never fired like **onSubmit**, **onFinalImageSet**, **onFailure**.
Please help me!
fresco = '0.14.1' codeï¼š
.setUri(uri)
>    return spNativeContext->durationMs;
>    private native int nativeGetDisposalMode();
@Override
@Override
Code
About half an hour,  OOM will occur
I only have one DraweeView.
@Override
My compositing logic looks like this in pseudo-code:
I looked at the native C++ code and it appears that this pixel value (or at least its index into the color table) is available, but not exposed through the Java interface (all that is exposed is a boolean `hasTransparency()`, through `GifFrame`).
@Override
@Override
@Override
@Override
call this meethod and see it does nothing:
@Override
@Override
mDraweeView.onDoubleTap(e);
else
@Override
@Override
Fresco.newDraweeControllerBuilder()
> But unfortunately the animation does not work  for example :at first  i did :draweeAvatar.setImageURI("avatar.jpg");
e(Native Method)
I found these linsk from official documentation :
@Override
@Override
@Override
@Override
@Override
@Override
@Override
catch FileNotFoundException.
Hi @kirwan
```java
@kirwan
if (typeData[1] == 'P' && typeData[2] == 'N' && typeData[3] == 'G') {// Png
@kirwan
Fresco does support gif, but it's a bit slowly,so I use another library to load GIFs:https://github.com/koral--/android-gif-drawable
@Override
@Override
@lambdapioneer Thank you for your response! and I apologize for misunderstanding the usage of the word `Radii`; I did not know that this is plural vocabulary for the word `Radius`, learnt something new! Thank you! ðŸ¹   In general I want to use downsampling but would like to disable it for a single request where I am getting an image strip that is considerably larger than allowed to render on Android. For example, the image is 40x4000 (100 frames). I'm processing the image creating an animated drawable from the 100 frames which are then rendered in sequence at 40x40. If I enable downsampling I get a 20x2000 image :( Is there any way to explicitly disable downsampling for a particular image request? I tried setting resize options but it didn't seem to help, probably because it isn't a jpg file. Thanks kirwan & foghina!  Recently, we've encountered several strange problems in `System.loadLibrary()`, it crashed in `dlopen` with several different msg, they are:
1. Bad file number
dlopen failed: "/data/app-lib/tv.danmaku.bili-2/libimagepipeline.so" phdr mmap failed: Bad file number
dlopen failed: "/data/app-lib/tv.danmaku.bili-1/libimagepipeline.so" has no loadable segments
3. Invalid argument
4. Bad ELF magic
dlopen failed: "/data/app/tv.danmaku.bili-1/lib/arm/libimagepipeline.so" has bad ELF magic
-dontwarn javax.annotation.**
@Override
.setUri(uri)
draweeView.setController(controller);
Is this intended? If it is, is there a way to detect if a rotation occurred?
@Override
@Override
@Override
.setUri(uri)
draweeView.setController(controller);
splits {
abi {
include 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
but I encounter this exception only for **arm64-v8a**:
Eric
@eldk ,
My problem is that my app are mostly webp format pictures, but also the big picture, cause the memory cache is full, and I should be how to solve?
Eric
Eric
// To get image using Fresco
@Override
@Override
My codeï¼š
Hi @massimocarli
Hi @massimocarli
Thank you. Hi @massimocarli
On this subject, I have some ideas, this is my code
private Animatable mAnimatable;
@Override
simpleDraweeView.setController(controller);
@Override
mAnimatable.start();
mAnimatable.stop();
@liukangqi2015 Thanks for your effort though =) @Wilson13 ,sorry,on your question, I seem to understand the wrong.
Can't i replace to fresco_0.14.0ï¼Ÿ  Looking forward to your reply!!!! Hi, @massimocarli
As fresco lib 's instructions, after decoding and pushing the bitmap into Ashmem, we call pinBitmap to prevent it from reclaiming by the system. After the bitmap isn't used anymore, we recycle it by calling bitmap.recycle() to unpin it.
fresco:placeholderImage="@mipmap/ico_peron_non"
```java
```java
@Override
@Override
@Override
@Override
if (!trimmables.isEmpty()) {
@oprisnik or @kirwan (who I have seen responding to these type of issues) - any tips?
```java
I'm using fresco:**0.13.0**
```java
@Override
http://share.weiyun.com/678deb081fceabb0f111400eca9c0d13 Same use Android Studio 2.2.2, I want Android Studio to auto suggest Fresco custom properties, not just the followingï¼š
> - Fresco 0.10.0
but I want all of the custom properties.for example,I want to input fresco:progressBarImage,but auto-suggeset only show:
"data" is a HashMap<Obejct>
"data" is a HashMap<Obejct>
@Override
**Gradle:**
holder.simpleDrawerView= (SimpleDraweeView) inList.findViewById(R.id.simpleDrawerView);
>                                                                         java.lang.IllegalArgumentException: in == null
java.lang.IllegalArgumentException: in == null
java.lang.IllegalArgumentException: out == null
```java
```java
@Override
public class KwaiCacheKeyFactory implements CacheKeyFactory {
@Override
@Override
@Override
@kirwan I have already extend the ImageRequest, however, I think is not very elegant because I must supply a ImageRequestBuilder for the constructor, maybe i should also extend ImageRequestBuilder? But ImageRequestBuilder's constructor is private, so sad :(
draweeView.setImageURI(uri);`
compile 'com.github.bumptech.glide:glide:3.7.0'//å›¾ç‰‡åŠ è½½
compile 'in.srain.cube:ultra-ptr:1.0.11'//ä¸‹æ‹‰åˆ·æ–°æŽ§ä»¶
exclude group:'com.nineoldandroids'
scrollview+viewpager+fragment+recyclerview+fresco
é—®é¢˜ï¼šé€‰æ‹©å›¾ç‰‡è·¯å¾„æ˜¯å¤–ç½®å†…å­˜å¡æ—¶ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤ºï¼›å½“è·¯å¾„æ˜¯**å†…ç½®å†…å­˜å¡**æ—¶ï¼Œä¼šå˜æˆé»‘è‰²ã€‚
æ˜¾ç¤ºå›¾ç‰‡å˜é»‘uriè·¯å¾„ï¼š_/storage/emulated/0/DCIM/Camera/IMG_20161013_182559.jpg_
ç”¨image pipeline æ‰“å‡ºçš„VERBOSEçº§åˆ«æ—¥å¿—ï¼Œå˜é»‘çš„æƒ…å†µä¼šå¤šå‡ºä¸¤æ¡logï¼š
V/unknown:NativeMemoryChunkPool: Used = (1, 131072); Free = (1, 1048576)
} else if (requestCode == PhotoSelectDialog.ITEM_ALBUM && resultCode == RESULT_OK) {
å¦å¤–ä½¿ç”¨URI å¸¦ä¸Š schemeä¾æ—§ä¼šå‡ºçŽ°é—®é¢˜ï¼Œä»£ç å¦‚ä¸‹
shell @armani:/storage/emulated $ cd 0
And there is also one interesting message in log
I think there is memory leak with huge images and rounding
I have signed the CLA but I haven't include my github account. My email is kukuhyoniatmoko@gmail.com
Is is possible for fresco to customize the producer pipeline?
at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:136)
at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:136)?
We are looking for the result of static code analysis(SCA) for fresco code. There are SCA tools available which help identify security issue in code/program - stating low , mid and high types
Findbugs.
PMD.
Checkstyle.
i'm a beginner and i cannot understand any explanation given by fresco website.
.setUri(uri)
- Drawee
- Drawee-pipeline
- Drawee-backends & Imagepipeline-backends (they were empty lol)
@Override
return new PasswordAuthentication(
Hi @massimocarli,
@massimocarli the WebService is an https address.
@Override
return new PasswordAuthentication(
@Override
android:background="@drawable/ic_directions_black_24dp" />
@Override
@Override
@Override
@Override
public SimpleDraweeView img_main;
public SimpleDraweeView img_logo;
![3k 5g7iipbkuq l lnv yb](https://cloud.githubusercontent.com/assets/19290510/18941684/ab8fbaba-8645-11e6-8406-ed0b4fb3a163.png)
@kirwan
``` Java
@Override
E/unknown:TransformingConsumer: unhandled exception
java.lang.IllegalArgumentException
the code :
controller.setOldController(draweeView.getController());
@Override
@Override
draweeView.setController(controller.build());
throwable print **TooManyBitmapsException** .....
Code can be found here:  https://github.com/jagas/fresco
* Exception is:
@kirwan
Hello @lambdapioneer  ,
Eric
@lambdapioneer updated the pull request - [view changes](https://github.com/facebook/fresco/pull/1474/files/9e995febd85cc4c4051d82a77a3de0d801bd2800..1173b8f74080855a32ddb168e992a24a75432515)
Eric
PS: there is my custom views implementation.
Hi @lambdapioneer
I use fresco 0.13.0 .
@lambdapioneer load screenshots photos will ERROR,i guess the photo is large
if (type == RES) {
Fresco.newDraweeControllerBuilder()
@NotThreadSafe
@Override
@Nullable
@Override
@Nullable
@Override
@Override
@Override
@Override
@Override
@Override
Adam Comella
Thanks, @kirwan. Sorry, I wrote this change a while ago and I forgot that `NetworkFetcher` was just an interface :disappointed:.
@dmmiller do you have any thoughts on @lambdapioneer proposals?
@lambdapioneer Thank you for your suggestions. I applied them and updated the Fresco and React Native PRs.
@lambdapioneer I made the styling tweaks you requested. I also retitled the PR to better match the approach we're now taking.
Hi, kirwan,  I have do it just as you say.  I choose Fresco and Local in Comparison App.  When calling Fresco.initialize(), we can see registerMemoryTrimmable is executed. As docs said, I can override Activity.onTrimMemory and transfer memory event to Fresco. I'm confused how to do it. Can you provide complete Activity.onTrimMemory code?
Hi kirwan, I've got it.  Can you help check it?
@Override
Log.d("brycegao", "registerMemoryTrimmable size: " + sMemoryTrimmable.size());
@Override
@brycegao Does your solution actually work? I have tried this but I didn`t find any memory reduction.  09-05 18:08:08.701: E/AndroidRuntime(25531): android.view.InflateException: Binary XML file line #40: Error inflating class com.facebook.drawee.view.SimpleDraweeView
</RelativeLayout>
.line 64    @Override
.line 66        MoodTimelineItemHolder holder = null;
@Override
Here is lib:
drawee-v0.13.0.jar
fresco-v0.13.0.jar
`android.view.InflateException: Binary XML file line #69: Error inflating class SimpleDraweeView
@minaee Your root cause appears to be the following, which is unrelated to Fresco.
``` @kirwan
@Override
@Override
@Override
@Override
@Override
Cordially invite @marcosmejia  @lambdapioneer  @kirwan     code review.
@kirwan  With pleasure.
@kirwan   Oh, yeah, and I have found the reason of this problem.
>  @Override
@foghina
However with `SimpleDraweeView` the height seems a little off:
hi @natacado
@Override
@Override
thans!
@aagnes hi,
if (!asCircle) {
getWindow().setSharedElementEnterTransition(DraweeTransition.createTransitionSet(ScalingUtils.ScaleType.CENTER_CROP, ScalingUtils.ScaleType.FIT_CENTER));
@Override
Toast.makeText(DetailActivity.this, "dsasa", Toast.LENGTH_LONG).show();
so do I use wrong way to do the transition? 
TransitionSet transitionSet = DraweeTransition
I don't have this issue if I use Picasso library for loading the image.
Any update on this issue? Switched from Fresco to Picasso and the issue is resolved. Too bad this library isn't maintained as often as required by the new Android OS versions that come out. It seems that this issue is incorrectly marked as 'needs-details'. This problem also exists on Android 7.1.1 (API level 25).  I am also experiencing the same problem, so +1 from me for fixing it.  same here Do it. Do it. ;-) Yes, please do it. Please... +1 Wonder why this isn't a high priority.. +1 When I scroll to the shared element position in `onActivityReenter` the disappeared item is coming back though with a little white flickering:
@Override
@Override
@Override
@Override
I'm using `DraweeTransition.createTransitionSet()` for both enter and return transition.
V/unknown:AbstractDraweeController: controller c6a03e3 9: onDetach
V/unknown:AbstractDraweeController: controller c6a03e3 9: release: image: CloseableReferenceWithFinalizer f25d513
V/unknown:AbstractDraweeController: controller f84c24e 4: onAttach: request needs submit
V/unknown:AbstractDraweeController: controller f84c24e 4: set_final_result @ onNewResult: image: CloseableReferenceWithFinalizer f25d513
V/unknown:AbstractDraweeController: controller f84c24e 4: onAttach: request needs submit
V/unknown:AbstractDraweeController: controller f84c24e 4: set_final_result @ onNewResult: image: CloseableReferenceWithFinalizer f25d513
DraweeHolder{controllerAttached=false, holderAttached=true, drawableVisible=false}
@Override
@Override
@Override
<img src="http://leongao.cc/images/fresco-issues-1445-20180323.gif" width = "300"/>
<img src="http://leongao.cc/images/fresco-issue1445-addhiearachy.mp4_1522036596.gif" width = "300"/>
<img src="http://leongao.cc/images/fresco-issue1445-gridview.gif" width = "300"/>
draweeControllerBuilder.setImageRequest(imageRequest);
draweeControllerBuilder.setTapToRetryEnabled(false);
### Fresco 1.5.0
@aagnes Excuse me, what is the solution there?
I'm using the latest version of fresco i.e.
@aagnes any update on this?
I am setting a local Uri for the image for the Drawee and once the image loads, it doesn't centerCrop.
Hmm I set the scaleType via XML; does that make a difference? Maybe it's an edge case - I'll work through my own code and deconstruct what the core issue may be
tools:background="@color/accent_color"
It still happening in fresco:1.5.0 a year after being reported. i have the same problem ,is there any solution?  I place a draweeview in my layout, and display an animated webp on it.
@Override
if (draweeView != null) {
DraweeController controller = draweeView.getController();
if (draweeView != null) {
DraweeController controller = draweeView.getController();
@Override
@Nullable
@Override
@Override
.setOldController(mDraweeView.getController()).setAutoPlayAnimations(false).build();
mDraweeView.setController(controller);
@Override
@Override
@Override
@Override
@Override
//Other Dependencies
Error:error: (1)\fresco-master\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o.d: No such file or directory
Error:error: (1)\fresco-master\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o: No such file or directory
Error:error: (1)\fresco-master\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o.d: No such file or directory
Error:error: (1)\fresco-master\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o: No such file or directory
Excuse me but i have a problemï¼š
codeï¼š
@Override
public boolean containsUri(Uri uri)
@Override
@Override
@Override
@Override
blur.forEach(alloc);
@Override
I write a custom view follow this [guide](http://frescolib.org/docs/writing-custom-views.html) to show 0-9 pictures.
the custom view call onDraw() times = 1(init) + DraweeHolder count \* (1(placeholder drawable) + 1(actual drawable))
I checked the source code(GenericDraweeHierarchy.java line 278)
if (random == null) {
random = new Random();
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);
simpleDraweeView.setOnClickListener(new View.OnClickListener() {
@Override
Hi @massimocarli
OutOfMemory On this device
Hi @massimocarli
I use aar lib to import frescoï¼Œbut when try to run app, it crash.
LOCAL_STATIC_JAVA_AAR_LIBRARIES += libfbdrawee
LOCAL_AAPT_FLAGS := \
Thanks @lambdapioneer,
Hi @massimocarli this is my code
AbstractDraweeController controller = Fresco.newDraweeControllerBuilder()
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);`
.setOldController(mSimpleDraweeView.getController())
My code:
@Override
@Override
How can I use Fresco Only download picture but don not show this picture
@lambdapioneer
08-08 18:39:44.655 22076-22076/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433df5d0 null -> 0: initialize
08-08 18:39:44.705 22076-22076/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433df5d0 0: onAttach: request needs submit
08-08 18:39:44.710 22076-22076/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433df5d0 0: submitRequest: dataSource: 433e98d0
08-08 18:44:49.340 28179-28179/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433e3420 null -> 0: initialize
08-08 18:44:49.385 28179-28179/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433e3420 0: onAttach: request needs submit
08-08 18:44:49.395 28179-28179/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433e3420 0: submitRequest: dataSource: 433ed720
08-08 18:44:50.245 28179-28179/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 433e3420 0: set_final_result @ onNewResult: image: CloseableReference 43414498
08-08 18:47:26.648 31142-31142/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 42758920 null -> 0: initialize
08-08 18:47:26.679 31142-31142/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 42758920 0: onAttach: request needs submit
08-08 18:47:26.687 31142-31142/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 42758920 0: submitRequest: dataSource: 4275acc8
Uri uri = Uri.parse("http://dn-runedu-img.qbox.me/5324277294619549696");
08-08 18:52:23.906 5018-5018/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 427540d8 0: onDetach
08-08 18:52:25.953 5018-5018/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 4273ec68 null -> 1: initialize
08-08 18:52:25.968 5018-5018/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 4273ec68 1: onAttach: request needs submit
08-08 18:52:25.968 5018-5018/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 4273ec68 1: submitRequest: dataSource: 42805bd8
08-08 18:52:25.992 5018-5018/com.zjcs.myapplication V/unknown:AbstractDraweeController: controller 4273ec68 1: final_failed @ onFailure: failure: java.lang.RuntimeException: Failed to pin Bitmap
Process: com.grandsoft.instagrab, PID: 2293
java.lang.IllegalStateException
Error
Unexpected error while converting:
le;]
-dontwarn okio.**
-dontwarn javax.annotation.**
android:id="@+id/sdv_tea_language_head"
i have 4 different Server.
so I initalize Fresco when create Activity. every time.
@Override
but have NativeMemory leak. I afraid of OOM.
> NativeMemoryChunk: finalize: Chunk 267867b0 still active. Underlying address = 2fcca010
is 'Fresco.initalize' only way change to another End point?
@Aloneter
@pungrue26
// è®¾ç½®å†…å­˜é…ç½®
// è®¾ç½®ç¼“å­˜é…ç½®
@pungrue26
//                ConfigConstants.MAX_MEMORY_CACHE_SIZE, // Max total size of elements in eviction queue
The problematic parts are:
//Cache reading
@Override
public void onSuccess(Uri uri) {
@Override
@Override
@Override
@Override
Matthieu
That's also the reason why I had to switch from Drawee to imageView.
Matthieu
@Override
public void onSuccess(Uri uri) {
There are lock contentions in AnimatedDrawableBackendImpl, AnimatedDrawableCachingBackendImpl.
This video is recoded using fresco v0.12.0.
Hi fresco team!
å›¾åº“é€‰æ‹©å¤šæ¬¡æ“ä½œå‘ç”Ÿommäº† ï¼Œç”¨çš„æ˜¯æœ€æ–°0.12.0çš„ç‰ˆæœ¬
buildTypes {
productFlavors {
@Override
@Override
@KoMinkyu updated the pull request.
Hi @lambdapioneer ! Thank you for your review.
@KoMinkyu updated the pull request.
@KoMinkyu updated the pull request.
upgrade fresco lib from 0.8.1 to 0.12.0
ava.lang.ExceptionInInitializerError: empty message
This is my code.
@Override
java.lang.IllegalArgumentException
@aneophyte Thank you, it's a good suggestion and I have added the default value if it is zero. But I need to know for certain whether it caused the problem, because ScreenUtils.dp2px() seems seldom gets wrong.
ok, thank you @kirwan @aneophyte
åšå¤œé—´æ¨¡å¼æ—¶éœ€è¦æ›´æ¢å ä½å›¾ï¼Œæˆ‘é€šè¿‡å®šä¹‰attrï¼Œåœ¨ä¸åŒçš„themeä¸‹å¼•ç”¨äº†ä¸åŒçš„å›¾ã€‚ç„¶åŽåœ¨ä»£ç ä¸­é€šè¿‡
R.mipmap.default_day is a cat with color #E0DFDF, and R.mipmap.default_night is a cat with color #2C2C2C
//this is for animated-gifs. Without it, you can run your project successfully but the animated-gifs won't animate.
Thanks @lambdapioneer.
In the new versions there are a lot of improvements for mobile device.
buildTypes {
-dontwarn okio.**
-dontwarn javax.annotation.**
### Extra details about my build set up
splits {
abi {
include 'x86', 'armeabi-v7a'
@cuixiaodong
.setOldController(mDraweeHolder.getController())
@Override
@Override
mDraweeHolder.setController(controller);
SimpleDraweeView simpleview;
controller = Fresco.newDraweeControllerBuilder()
.setOldController(simpledraweeview.getController())
simpledraweeview.setController(controller);
ï¼ˆEnglish is not very well,please excuse meï¼‰
If you don't submit new image request, not update the cache , and the  cahe has always existed.
Here  (https://github.com/facebook/react-native/issues/8711) you can find a lengthy explanation why `Object.finalize()` is bad, but the two main reasons, why Fresco should stop using it are:
Finalizers were just a bad idea which should have never happened.
@balazsbalazs Except in the case of animated images, right?
@balazsbalazs And finalizers add more than a "marginal perf penalty". It's orders of magnitude. Just instantiation takes 3 times as long (test here: https://github.com/facebook/react-native/issues/8780#issuecomment-233130403 ), if you add the multiple GC cycles finalizable objects need, you get much larger slowdowns ( 2400ns instead of 6ns here: http://www.informit.com/articles/article.aspx?p=1216151&seqNum=7 ).
@balazsbalazs I know why you are using finalizers, I have read the code, that's why I already posted in https://github.com/facebook/react-native/issues/8711:
As a last comment, I'm quoting Wikipedia (https://en.wikipedia.org/wiki/Finalizer#Problems)
I won't spend more time on profiling what essentially are vendor-dependent race-conditions.
I'll probably just switch to Picasso from square for now, since I mostly have static images anyway.
@balazsbalazs And if you look into why the queue stops being processed, there seem to be more people having that problem: https://stackoverflow.com/questions/37001181/android-finalizerdaemon-hanging-up
This is also an issue on react-native-animatable with animations that loop:
This seems to be a huge issue with Fresco.  We just switched to Fresco from Picasso and now our memory heap looks like this:
@brianhama Can you post a screenshot of the memory heap using picasso before the switch? That would be very informative and help this issue along. @foghina Great that you got around to analyse this. Could you publish the data, as that's really interesting evidence about the JVM and ART!  When I listView use Fresco, each item needs to be loaded to load a low-resolution thumbnail, then reload a high-resolution map. Maybe not with fresco pictures downloaded downloaded when the first low-resolution thumbnails displayed in listView, when the second high-resolution image download cover down when the first, listView will flash once! You can achieve this by fresco gradual effect it?
Log.d("myfresco", "-"+mCount+"-"+mSize);  ///add this===>
** MEMINFO in pid 6817 [com.eggf] **
Shared  Private     Heap     Heap     Heap
Pss    Dirty    Dirty     Size    Alloc     Free
Native       16       16       16    11680    11376      303
Ashmem        0        0        0
Other dev     2504     1152     1944
.so mmap     5139     2644     1996
.jar mmap        0        0        0
Other mmap       16       12        4
Unknown    31774     1124    31760
Objects
AppContexts:        4           Activities:        1
PAGECACHE_OVERFLOW:      180          MALLOC_SIZE:       62
DATABASES
pgsz     dbsz   Lookaside(b)          cache  Dbname
** MEMINFO in pid 6817 [com.eggf] **
Shared  Private     Heap     Heap     Heap
Pss    Dirty    Dirty     Size    Alloc     Free
Native       16       16       16    75460    71222      129
Ashmem        0        0        0
.so mmap     5656     2620     2164
.jar mmap        0        0        0
Other mmap       15       12        4
Unknown    89855     1004    89844
Objects
AppContexts:        6           Activities:        4
PAGECACHE_OVERFLOW:      180          MALLOC_SIZE:       62
DATABASES
pgsz     dbsz   Lookaside(b)          cache  Dbname
zip:/data/app/com.eggf-2.apk:/assets/fonts/Ionicons.ttf: 184K
@balazsbalazs Maybe you are right. The leak happens when you reload the react-native JS bundle or quit with launching again. The references were not released during this procedure.
@balazsbalazs But I found clearCaches will make the next mCount and mSize start from 0.
The buildPlatformDecoder method in imagePipelineFactory.java of Fresco use a special way with KITKAT. The code is
This is a very unusual bug that i can't quite explain fully.
ndk {
abiFilters 'armeabi-v7a', "x86"
I tried to build fresco into my project so that I could change some of the code.
include ':fbcore'
include ':drawee'
compile project(':drawee')
I don't know  why gradle keep warn me imagepipeline-base and imagepipeline is jar but not with drawee.
@eldk I really thank you for this long reply. It may help, I will try it later. But still I wanna know why "Building depends on one or more Android Libraries but is a jar"  happened.
download.sourcefoge.net redirection logic is rollbacked. I deleted my last commit.
It's from react-native issue. Place it here just because hoping for someone's attention.
simpledraweeview.setController(controller);
ï¼ˆEnglish is not very well,please excuse meï¼‰
@aagnes
(English is not very well,please excuse me)
@aagnes
throw Throwables.propagate(e);
throw new TooManyBitmapsException();
D/unknown:LoggingListener: -9-8905536
@narychen
**Decode gif image to static image, and it could lead to JNI Crash**
**JNI Crash log as follow**
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
**Java backtrace**
@aagnes
@massimocarli
Due to very specific needs, i need to load part of a image( since the image is too long that exceeds the 4096x4096 limit). how to do that elegantly using fresco.
@massimocarli  thanks a lot, nice talking with you! ^_^
view.setController(draweeController);
view.setController(draweeController); )))))
@Override
@Override
.setOldController(draweeHolder.getController());
draweeHolder.setController(controllerBuilder.build());
@nesterov-n how many images are you loading simultaneously? And what is average size of single loaded image?
Our Fresco config code
I use Fresco to load images and encounter a lot of bad things which make me really wanna give up.
**this picture is muzzy**
android:id="@+id/atom_simple_draweeview"
fresco version:
origin image:
Debug this property, and you will find something interesting. For me, just use ResizeOption(width, height,4000) solves the problem.  I am frequently getting Out Of Memory while i am using Fresco.Can anyone guide me.
using fresco, i set retryiamge and failure iamge,
i press the retryImage once, one iamgeRequest is fired!
@massimocarli thankyou for your time, but how to change the default number, i do some search but find nothing.
Two Failed Situationï¼š
@massimocarli
è¯·é—®ä½¿ç”¨FrescoåŠ è½½å›¾ç‰‡æœ‰æ—¶å€™ä¼šå˜æˆèƒŒæ™¯å…¨éƒ¨ä¸ºé»‘è‰²æ˜¯æ€Žä¹ˆå›žäº‹
@caopeng000 è´´ä¸€ä¸‹å›¾
![3z1vi93ylzer 0j nfa uu](https://cloud.githubusercontent.com/assets/7322422/16573269/74c9ee18-42a4-11e6-84af-75e0dea366c8.jpg)
I think why this happen is you use `Uri` like this:
draweeView.getHierarchy().setPlaceholderImage(R.drawable.ic_launcher);
@caopeng000  ä½ å¯ä»¥è´´ä¸€ä¸‹ä½ çš„è°ƒç”¨å›¾ç‰‡åŠ è½½çš„é‚£éƒ¨åˆ†ä»£ç ã€‚
@massimocarli
int width = simpleDraweeView.getWidth() / 8;
int height = simpleDraweeView.getHeight() / 8;
Fresco.newDraweeControllerBuilder()
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);
}catch (Exception e){
@caopeng000
ä½¿ç”¨Frescoçš„DraweeView å°±ä¸ç”¨ ImageViewçš„setImageURI æ–¹æ³•äº†å•Šï¼Œä½ è¿™æ ·æ··ç”¨ä¼šæœ‰é—®é¢˜çš„ã€‚
ä½¿ç”¨ DraweeView æ—¶ï¼Œè¯·ä¸è¦ä½¿ç”¨ä»»ä½• ImageView çš„å±žæ€§
@e-hai
draweeView.setImageURI(uri);
@caopeng000
ä¸äº†è§£ä½ é‚£è¾¹è¯¦ç»†å…³è”ä»£ç é€»è¾‘ï¼Œæ²¡æœ‰å¤ªå¤šä¿¡æ¯ï¼Œæ— æ³•å¸®ä½ è¿›ä¸€æ­¥åˆ†æžï¼ŒSorryï¼Œä½ å¯¹ç€Fresco-Draweeæºç ï¼Œæ£€æŸ¥ä¸€ä¸‹ä½ çš„ä»£ç é€»è¾‘å§ã€‚åŠ æ²¹ï¼
@caopeng000  @e-hai
> http://frescolib.org/docs/using-drawees-code.html
> **Customizing the hierarchy**
æ…Žç”¨ï¼š**setHierarchy**
> **Donâ€™t re-use DraweeHierarchies**
compile 'com.facebook.fresco:fresco:0.10.0@aar'
compile 'com.facebook.fresco:drawee:0.10.0@aar'
compile 'com.facebook.fresco:fbcore:0.10.0@aar'
compile 'com.facebook.fresco:imagepipeline:0.10.0@aar'
hi @massimocarli
hi @massimocarli
fresco v 1.8.0
and latest version of react natvie
@OrangeHao Try to use recyclerview, I used listview and found fresco used more than 300M, but when I used recyclewview and found fresco only used 100M
Yeah, I've  extended imagepipeline for caching gif's Bitmapsï¼Œand It have been running normally.  the following code doesnt work for fresco 0.11.0 while functional in 0.9.0+
@parane
btw. Please update the Fresco v0.11.0.
@obishop
fresco:roundingBorderColor="@color/black"
<v.VDraweeView
fresco:roundingBorderColor="@color/black"
Also tried many others phone below android 4.3 ,I believe there is something wrong .
public class ChatImageDraweeView extends ImageView {
public ChatImageDraweeView(Context context) {
public ChatImageDraweeView(Context context, AttributeSet attrs) {
public ChatImageDraweeView(Context context, AttributeSet attrs, int defStyle) {
.setOldController(mDraweeHolder.getController())
@Override
mDraweeHolder.setController(controller);
thanks very much! @caprice  @oprisnik   In Picasso, we don't need to care about memory usage and more importantly don't need manually calculate the best image size to fit since it provides a magic method: **fit**.
Does fresco provide similar function too?
Picasso
else
I think that determineDownsampleRatio is inappropriate.
@aagnes   Yeah, sampleSize is integer, but ratio is float.
can  I inherit AnimatedDrawable achieve other functions?
Of course, GIF to download the use of fresco.
@eldk you are great!
Eric
Here are/will be some datas about times to display pictures with Fresco :  https://neptune.opalesurfcasting.net/
Eric
- if some want to test, app should be dowloaded here (beta) : https://lamaille.opalesurfcasting.net
- stats are update within a few minutes here : https://neptune.opalesurfcasting.net
Initialization code
I load gif with code below
Fresco.newDraweeControllerBuilder()
.setUri(uri)
mGifImg.setController(draweeController);
//    mavenWithAnimatedGifCompile 'com.facebook.fresco:fresco:0.11.0'
android:id="@+id/drawee_manager_avatar"
style="@style/Avatar"
<style name="Avatar">
`<DraweeView
But on some devices on **API 17** (for example Huawei Ascend G700) I'm facing this weird bug: [screenshot](http://i.imgur.com/las5poh.png) (for the reference, it should look like [this](http://i.imgur.com/rFqZiR0.png)). These webp images are from [official google samples](https://developers.google.com/speed/webp/gallery2#side-by-side_comparison) (WebP-lossy with alpha).
Is there some workaround about this?
i have tried to use draweeï¼Œlike this
private void startAnim(){
for(AninBean bean: list){
anim(bean);
private void anim(AninBean bean) {
final SimpleDraweeView view = getImage(bean);
@Override
private SimpleDraweeView getImage(AninBean bean) {
There are many animation needs to perform.
How did you solve this problem @Caij
@zhuAria  you need set resizeOptions for request
imageView.setController(draweeController);
do you mean ResizeOptions + Downsampling  ?
fresco usage :
@kirwan  thank you for your time.  All gifs are small gifs. examples like:
http://files.wikicivi.com/files/Images/Radar/20160605/03a5e6455996b06852122973afae1dec.gif
2: fresco in nature render a gif slower than comparable gif drawing tool?
what should i do ? i cannot wait for the next update..... turn to Glide? @kyangc @
@kirwan thank you ,that's encouraging!
> https://github.com/notifications/unsubscribe/AG_JkuAvC-HiQF9aKArZv0YYH0CfU8Jqks5qL1LjgaJpZM4IuhlT
> See me here: about.me/chengkangyang
Can you include decode progress to download progress when showing progressbar? I have also same issue with big GIF images. It downloads fast, but then progressbar just stays there for several seconds, until GIF starts to play.  We added some lines in DoTransform to ensure the image size is in the limits +kunny changes
Need to refer to the library to make display GIFï¼š
Is there any functionality in fresco that would allow me to do this?
> Com.android.build.api.transform.TransformException: com.android.builder.packaging.DuplicateFileException: Duplicate files copied in APK lib/armeabi/ libmemchunk.so
>    File1: ..................../app/build/intermediates/exploded-aar/wukongim_1.3.4.9-UT-SNAPSHOT/jni
>    File2: ..................../app/build/intermediates/exploded-aar/com.facebook.fresco/imagepipeline/0.10.0/jni
I quote the form of third-party packages by aar
repositories {
mavenCentral()
dirs 'aars'
//Third-party communications framework aar
compile(name: 'wukongim_1.3.4.9-UT-SNAPSHOT', ext: 'aar')
compile(name: 'doraemon-multimedia-1.9.5.0-SNAPSHOT', ext: 'aar')
// fresco jar
https://imwukong.com/#doc/doc/android/index.htm
@michalgr
Is it possible with fresco?
I want to kown the reason crizing, so please help me. thank you.
ä¾èµ–åŽï¼Œä¼šä¸‹è½½åŒ…å«å„ç§cpuçš„.soæ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘çš„é¡¹ç›®é‡Œåªæœ‰armeabi,è¿™æ ·å°±å¯¼è‡´äº†æˆ‘çš„.soæ–‡ä»¶è¿è¡Œä¸åˆ°æ‰‹æœºé‡Œã€‚æ€Žä¹ˆä¸‹è½½æŒ‡å®šçš„cpuç±»åž‹.soæ–‡ä»¶ï¼Ÿ
buildTypes {
ndk {
abiFilters "armeabi"
ndk {
abiFilters "armeabi"
> ä¾èµ–åŽï¼Œä¼šä¸‹è½½åŒ…å«å„ç§cpuçš„.soæ–‡ä»¶ï¼Œä½†æ˜¯æˆ‘çš„é¡¹ç›®é‡Œåªæœ‰armeabi,è¿™æ ·å°±å¯¼è‡´äº†æˆ‘çš„.soæ–‡ä»¶è¿è¡Œä¸åˆ°æ‰‹æœºé‡Œã€‚æ€Žä¹ˆä¸‹è½½æŒ‡å®šçš„cpuç±»åž‹.soæ–‡ä»¶ï¼Ÿ
Frseco version: 0.9.0
D/FrameworkListener(  123): dispatchCommand data = (getaddrinfo pmir.3g.qq.com ^ 1024 0 1 0)
@michalgr I send the log to this email fresco@noreply.github.com, I just found this is not a valid email.. When I start app, the phone system is crashed(the system is hung and  no response), the logs is too long, github just show a bit of it, could you leave you email and i will send the log to you.
@aagnes   Decoding jpeg and png format is OK.
Bitmap.Config.ARGB_8888);
error: No resource identifier found for attribute 'placeholderImage' in package 'in.srain.demos.fresco'
Here is my code:
.setOldController(mDraweeView.getController())
@kangax @daaku @natacado @bricooke @aizatto @tyronen @plamenko
@michalgr a sample moving item:
There is a little bit difference in My onBindViewHolder:
@Override
.setOldController(mDraweeView.getController())
@michalgr @kangax @daaku @natacado @bricooke
Before that I was also facing the same problem and I was using picasso.
We named it 'Dancing Items Problem'.
@embydextrous
holder.ivThumb.setController(pipelineDraweeController);
this will be happened random
for the crash was random happened, i focus attention on it once happened.
here is my code
here is my code
Process: com.yty.minerva, PID: 19520
And then,it is easy to throw OOM.
05-26 22:47:10.769 20335-23333/com.xz.rd V/unknown:NativeMemoryChunkPool: release (reuse) (object, size) = (75bae42, 16384)
05-26 22:47:21.549 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 13f09686 248: ignore_old_datasource @ onProgress: failure: null
05-26 22:47:21.549 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 13f09686 248: ignore_old_datasource @ onProgress: failure: null
05-26 22:47:21.549 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 13f09686 248: ignore_old_datasource @ onProgress: failure: null
05-26 22:47:21.549 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 275f91ac 254: set_final_result @ onNewResult: image: CloseableReference 217b64e1
05-26 22:47:21.559 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 12372d44 253: set_final_result @ onNewResult: image: CloseableReference 3334b6f4
05-26 22:47:21.559 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 236ab249 255: set_final_result @ onNewResult: image: CloseableReference 38f1e892
05-26 22:47:21.559 20335-20335/com.xz.rd V/unknown:AbstractDraweeController: controller 17cc5c05 256: set_final_result @ onNewResult: image: CloseableReference 328a11bf
05-26 22:48:29.936 25074-25090/com.xz.rd:leakcanary E/art: Throwing OutOfMemoryError "Failed to allocate a 28 byte allocation with 12 free bytes and 12B until OOM" (recursive case)
| Thread:LeakCanary-Heap-Dump (always)
@tyronen @kangax @daaku @bricooke @aizatto @daaku
Fresco Version:fresco:0.9.0+
using fresco load resource like:
And fresco report `failure: java.lang.IllegalArgumentException: unknown image format`
It has been a lot of Note, thanks your help
``` Java
I was trying to use different contexts including null and setting the same context to drawee controller but that didn't helped.
Exif Orientations
![screenshot_20160524-123532](https://cloud.githubusercontent.com/assets/1330997/15501205/81427444-21ac-11e6-8e85-afb1ee480c33.png)
@Override
@Override
holder.simpleDraweeImage.getLayoutParams().width = imageInfo.getWidth();
@Override
@Override
.setOldController(holder.simpleDraweeImage.getController()).build();
holder.simpleDraweeImage.setController(controller);
Eric
but it seems that still takes a lot of time GIF decode only.
Do you know the problem of high resolution GIF?
# https  imgae
*_don't support https  imgae    *_
What does Fresco need to configure for HTTPS imgaes  ?
@tyronen
[armeabi-v7a] Compile        : bitmaps <= Bitmaps.c
[armeabi] Compile        : bitmaps <= Bitmaps.c
make: **\* [Projects/fresco/imagepipeline/build/tmp/ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o] Error 1
make: **\* [Projects/fresco/imagepipeline/build/tmp/ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o] Error 1
I'm researching possibility declare DraweeTransition in xml like this
which will make usage of DraweeTransition simpler, but I think it's would be better to make separate PR for this, if it's possible
and this is how i built the Uri.
When I load a GIF image with EOF error. It can display on screen.
But the last frame display alpha pixel error. Could someone help me?
i  need BITMAP_ONLY  rounding  mode.
.setUri(uri)
draweeView.setController(controller);
draweeView.setImageURI(uri);
@Override
android-ndk-r11c,
Hi @abeemukthees . Me too struggling in the same problem. Please share your knowledge. Did you fixed this issue?  file:///storage/emulated/0/Download/Bluetooth/6W9[V~%DP]5`RHU1FWS[ZJX.png
file:///storage/emulated/0/Download/Bluetooth/6W9[V~%DP]5`RHU1FWS[ZJX(1).png
make: **\* [/Users/MyName/MyDirectory/fresco/imagepipeline/build/tmp/ndk_build_imagepipeline/local/armeabi-v7a/objs/imagepipeline/exceptions.o] Error 1
> [armeabi-v7a] Compile        : bitmaps <= Bitmaps.c
> [armeabi] Compile        : bitmaps <= Bitmaps.c
@plamenko I get this error on version 1.3.0, and it's OK on version 1.2.0.
Fresco:V1.3.0
```java
06-20 09:33:16.218 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f58a443 null -> 22: initialize
06-20 09:33:16.249 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f58a443 22 -> 23: initialize
06-20 09:33:16.249 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f58a443 23: onAttach: request needs submit
06-20 09:33:16.250 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f58a443 23: submitRequest: dataSource: e087f3e
06-20 09:33:16.254 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller 1bda6b5 null -> 24: initialize
06-20 09:33:16.274 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller 1bda6b5 24 -> 25: initialize
06-20 09:33:16.275 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller 1bda6b5 25: onAttach: request needs submit
06-20 09:33:16.275 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller 1bda6b5 25: submitRequest: dataSource: 97858bb
06-20 09:33:16.276 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller 1bda6b5 25: onDetach
06-20 09:33:17.239 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f58a443 23: final_failed @ onFailure: failure: java.lang.IllegalArgumentException: Problem decoding into existing bitmap
```java
06-20 09:35:57.127 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f0a6157 null -> 26: initialize
06-20 09:35:57.150 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f0a6157 26 -> 27: initialize
06-20 09:35:57.150 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f0a6157 27: onAttach: request needs submit
06-20 09:35:57.151 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller f0a6157 27: submitRequest: dataSource: 51de62
06-20 09:35:57.155 31330-31330/com.llymobile.pt V/unknown:AbstractDraweeController: controller 6105b29 null -> 28: initialize
but  there are some problems.
I have used fresco many times but first time i'm getting this issue regarding image not showing.
I know it is not recommended to use fresco with ScrollView.Thanks first.
@Override
Here is the code for smooth double tap zoom and pinch to zoom for the fresco library
@Override
@Override
//where frescoVersion=0.10.0
As stated [here](http://stackoverflow.com/questions/36967395/why-cant-i-set-the-failure-retry-nor-progress-images-of-a-fresco-drawee-using), it feels like 3 methods are missing:
After comparing the GIF-related code before and after obfuscation, I found that the constructor method of AnimatedFactoryImpl is removed after obfuscation. This method may be invoked by reflection elsewhere I guess.
+1, @yingyixu your solution worked for me, thanks!
+1 @yingyixu  thanksï¼Œit is worked for me.
Is it working before lollipop?
`placeholderImage` with vector drawable in XML doesn't work on API 19 i.e Android KitKat  My problem was extending `FragmentActivity` as the parent activity, so when I was trying to inflate the layout using its context it didn't work. So I changed it to `AppCompatActivity` and now its working just fine! you have to enable this parameter by default it is not enabled in support library used by your application.
ndk {
abiFilters "armeabi", "armeabi-v7a", "x86", "mips"
Eric
Thanks @massimocarli
how to do use multi placehoder??
@massimocarli Thank you,it is my mistakes
@Override
@Override
//custom processing on the bitmap and returning it
Fresco.newDraweeControllerBuilder()
@massimocarli Thank you for your response.
Hi @plamenko @massimocarli
I have almost same requirements as @ziad-halabi9
04-26 22:05:20.330 V/unknown:AbstractDraweeController: controller 1c3b984c 3: final_failed @ onFailure: failure: java.net.SocketTimeoutException
I want to know what should I do to display gif by using fresco 0.10.0.
or is there something change of using Supplier and ByteConstants ?
But when i click the â€œEnterâ€ in the keyboard, it can extract the fresco.
But when i click the â€œEnterâ€ in the keyboard, it can extract the fresco.
apply plugin: 'maven'
applicationId "com.baimes.dx"
buildTypes {
exclude 'META-INF/NOTICE'
exclude 'META-INF/LICENSE'
exclude 'META-INF/DEPENDENCIES'
exclude 'META-INF/notice.txt'
exclude 'META-INF/license.txt'
exclude 'META-INF/LGPL2.1'
compile 'com.ToxicBakery.viewpager.transforms:view-pager-transforms:1.2.32@aar'
compile 'jp.wasabeef:recyclerview-animators:2.2.1'
Eric
chengchunhuiit@163.com
To: facebook/fresco
Eric
</RelativeLayout>
chengchunhuiit@163.com
From: chengchunhuiit@163.com
To: facebook/fresco
chengchunhuiit@163.com
To: facebook/fresco
Eric
chengchunhuiit@163.com
To: facebook/fresco
Fresco.initialize(context);
liunx platform.
2016-04-27 17:55 GMT+08:00 elephantzhai notifications@github.com:
Problem is solved when remove  fresco:roundingBorderWidth  and fresco:roundingBorderColorï¼ŒI do not know why!  Is this a bug?
when i using fresco ,then there is a error:
//    compile(name:'MagicWindowSDK', ext:'aar')
compile files('libs/okio-1.6.0.jar')
compile 'com.facebook.fresco:drawee:0.5.0+'
Crashlytics tells me that this happens mainly on Samsung (100% of my crashes but this might just be pure luck considering I only have in the 1000s daily users)
<img width="1049" alt="zrzut ekranu 2016-07-04 o 16 42 58" src="https://cloud.githubusercontent.com/assets/1515300/16564202/7de62bae-4206-11e6-8c60-95a6e10740b1.png">
<img width="694" alt="zrzut ekranu 2016-07-04 o 16 43 06" src="https://cloud.githubusercontent.com/assets/1515300/16564203/7de84d6c-4206-11e6-8f32-19b36b987955.png">
.load(uri)
Why in this condition, fresco performance so bad?
04-21 17:14:41.850 16570-16581/com.wangxiaobao.adplayer A/art: art/runtime/thread_list.cc:181] "Heap thread pool worker thread 2" prio=5 tid=2 Native (still starting up)
04-21 17:14:41.851 16570-16581/com.wangxiaobao.adplayer A/art: art/runtime/thread_list.cc:181] "Heap thread pool worker thread 1" prio=5 tid=3 Native (still starting up)
04-21 17:14:41.851 16570-16581/com.wangxiaobao.adplayer A/art: art/runtime/thread_list.cc:181] "Heap thread pool worker thread 0" prio=5 tid=4 Native (still starting up)
sorry for my bad english
error info:
GN135(GiONEE)
R811(OPPO)
U701T(OPPO)
R813T(OPPO)
vivo Y11i T(vivo)
@kirwan
@kirwan I have made changes based on your comments. Please have a look!
Hi Fresco team.
04-14 04:45:32.592 85-85/? I/DEBUG: ABI: 'x86'
@aagnes thanks for your reply. I just checked my question, but can't see the answer there.
@aagnes  my app get the bugs of  [#issues1077](https://github.com/facebook/fresco/issues/1077) and other bugs
android 4.2.2    [vivo Y 13]   [vivoY11i T]
android 4.2.2    [vivo Y 13]   [vivoY11i T]
[armeabi-v7a] Compile        : bitmaps <= Bitmaps.c
[armeabi] Compile        : bitmaps <= Bitmaps.c
make: *** [projects\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o] Error 2
make: *** [projects\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o] Error 2
:animated-webp:androidSourcesJar
- Exception is:
error: field 'm_noreThreadFuture' has incomplete type 'std::future<int>'
Process: sunger.org.net.meishi, PID: 17733
@kirwan i calling  the setOldController as sample.  the but it's still has the problem
Now, the results is really strange. Progress bar image is displayed in the centre of the view. But there are also two diameter lines (one vertical and one horizontal, marking something like a cross) below the progress bar image.
@Override
@Override
@Override
@Override
@Override
@Override
mImageView.setController(draweeController);
when i call  Uri uri = Uri.parse("res://com.gejiahui.fesrcodemo/" + R.mipmap.ic_launcher);
Initialize Fresco with the application context create a leak, according to LeakCanary.
references com.cibersons.monchis.adapter.TabAdapter.mCurrentPrimaryItem
references com.cibersons.monchis.adapter.TabAdapter.mFragments
Device: samsung samsung SM-G355M kanas3gub
Could be something wrong there?
@aagnes   OK
file://com.culiu.purchase/storage/sdcard0/Android/data/com.culiu.purchase/culiukeji#99baoyou/im_35d98e2ad3dac38dd8/image/thbb36a010-f57b-11e5-81e5-51fce7a71292
java.io.FileNotFoundException: /storage/sdcard0/Android/data/com.culiu.purchase/culiukeji: open failed: ENOENT (No such file or directory)
I think,it cause the url contain special symbol %
@karun2189 yes
` Uri picUri= Uri.fromFile(new File("/storage/emulated/0/Pictures/OGQ/Richard Walker_Stairway To Heaven%3F_YkFgR2RZ.jpg"`
This will load image contains special chars or symbols.  Great work on the library!
æœ¬åœ°å›¾ç‰‡æ˜¯780_900ï¼Œä¼ å…¥çš„ResizeOptionsæ˜¯1600_1600,è¿”å›žçš„å›¾ç‰‡å¤§å°æ˜¯195*255çš„å›¾ç‰‡,æ€Žä¹ˆä¸æ˜¯åŽŸå›¾ï¼Œå¹¶ä¸”ä¸‹æ¬¡å–è¯¥å›¾æ˜¯æ˜¯ç›´æŽ¥è¿”å›žäº†å†…å­˜ä¸­çš„è¯¥å›¾
@Override
Bitmap bitmap = frescoImage.get();
@Override
Fresco.initialize(context);
besause of  oom,I've had this problem too.
can write image uri directly like this
@kirwan hey, I have rebased, but the circleci run error
@kirwan Sure, I have replaced it
@kirwan Thanks, I have changed the name
with DataBinding:
@Override
@Override
@Override
@Override
@Override
Uncaught exception thrown by finalizer
@massimocarli  here it is:
protected SimpleDraweeView preview;
... and in Adapter
@Override
@Override
@kirwan No, the problem still exists. I wonder that why fresco don't use ashmem after lollipop, it's so good for prevent OOM exceptions.
is this fixed ?  #1011 issue
`W/System.err: remove failed: ENOENT (No such file or directory) : /data/data/[APPNAME]/cache/image_cache/v2.ols100.1/78/8WswI13U1FWU5wZ277Lpoy9XJ8w.cnt
W/System.err: remove failed: ENOENT (No such file or directory) : /data/data/[APPNAME]/cache/image_cache/v2.ols100.1/98/jzeIB0BtOx8DNuaXVQ97hRELr0Q.cnt
`Uri uri;`
.setOldController(mSimpleDraweeView.getController())
Eric
03-21 15:58:55.151 555-645/... W/System.err: remove failed: ENOENT (No such file or directory) : /data/data/.../cache/image_cache/v2.ols100.1/70/oG_l_2p1ngYqmR1k1cLAUIaXI-A.cnt
03-21 15:58:55.881 555-641/... W/System.err: remove failed: ENOENT (No such file or directory) : /data/data/.../cache/image_cache/v2.ols100.1/96/h6oYteTuK2GMQiyk4MEfQC0wIlo.cnt
Should you look @massimocarli comment and try on another device ?
.setOldController(draweeView.getController())
draweeView.setController(controller);
Eric
Eric
at com.chemao.car.adapter.FindcarListAdapter.getView(FindcarListAdapter.java:196)
@Override
@Override
@Nullable Animatable anim) {
@Override
@Override
@Override
draweeImageView.setController(controller);
@Override
@Override
setTapListener(draweeImageView);
@Override
@Override
draweeImageView.setController(controller);
@Override
@Override
at com.facebook.imagepipeline.k.ak.run(Unknown Source)
@aagnes ,my image url is http://cdn2.55haitao.com/bbs/data/attachment/store/new/20150624084033.jpg
repositories {
mavenCentral()
classpath 'com.neenbedankt.gradle.plugins:android-apt:1.8'
repositories {
apply plugin: 'com.neenbedankt.android-apt'
applicationId "com.tiandiyou.thmsocial"
buildTypes {
exclude 'META-INF/maven/com.belerweb/pinyin4j/pom.properties'
exclude 'META-INF/maven/com.belerweb/pinyin4j/pom.xml'
//loganSquare
compile 'com.bluelinelabs:logansquare:1.3.4'
//fresco
compile 'com.kyleduo.switchbutton:library:1.3.4'
code:=======
it works well in android 4.3 SM-G3586Vã€‚ But, it does'nt show term uri image in android 5.0.2 nubia NX511Jã€‚It has no logcat, so how can i fix it?
# anr occurred many times on my app, and in the traces log said something about fresco, please help me  analyze it .look traces log at [ https://github.com/yychai/outOfProject/blob/master/traces.txt](url)
something said about fresco between line170 and line190. please look at it thank you very much.
03-10 10:39:04.541 27355-27355/? V/unknown:AbstractDraweeController: controller 17ed5c75 null -> 0: initialize
03-10 10:39:04.551 27355-27355/? V/unknown:AbstractDraweeController: controller 17ed5c75 0: onAttach: request needs submit
03-10 10:39:04.551 27355-27355/? V/unknown:AbstractDraweeController: controller 17ed5c75 0: submitRequest: dataSource: fcf86d6
03-10 10:39:04.551 27355-27355/? V/unknown:AbstractDraweeController: controller 15f5cd57 null -> 1: initialize
03-10 10:39:04.561 27355-27355/? V/unknown:AbstractDraweeController: controller 15f5cd57 1: onAttach: request needs submit
03-10 10:39:04.561 27355-27355/? V/unknown:AbstractDraweeController: controller 15f5cd57 1: submitRequest: dataSource: 13d433dc
03-10 10:39:06.221 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 17ed5c75 0: set_final_result @ onNewResult: image: CloseableReference 374921c5
03-10 10:39:06.971 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 15f5cd57 1: set_intermediate_result @ onNewResult: image: CloseableReference 706e827
03-10 10:39:07.101 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 15f5cd57 1: release_previous_result @ onNewResult: image: CloseableReference 706e827
03-10 10:39:16.581 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 3921e040 null -> 2: initialize
03-10 10:39:16.581 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 3921e040 2: onAttach: request needs submit
03-10 10:39:16.581 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 3921e040 2: submitRequest: dataSource: 2be6b51f
03-10 10:39:17.051 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 17ed5c75 0: onDetach
03-10 10:39:17.051 27355-27355/com.android.cy.fresco_test V/unknown:AbstractDraweeController: controller 17ed5c75 0: release: image: CloseableReference 374921c5
// called on EncodedImage
mCapturedEncodedImage.
// garbage collection test
mCapturedEncodedImage.
```java
free 3g url     https://www.f-abc.com/photos/image1.jpg
- Animated images (gif, webp) can be run one time? It means when I click on, it will run one time and then stop.
Thuc.
Added ChacuaTool application to list
gdhAttrs,
mImageView.setController(draweeController);
**SetHierarchyForDraweeView Function :**
if (draweeView != null) {
draweeView.setHierarchy(hierarchy);
03-08 16:05:28.051 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e1854fa 129: set_final_result @ onNewResult: image: CloseableReference 6b45f7f
03-08 16:05:28.051 1848-1848/com.test V/unknown:AbstractDraweeController: controller 5e7f3a2 128: onDetach
03-08 16:05:28.061 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e1854fa 129: onDetach
03-08 16:05:28.061 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e1854fa 129: setHierarchy: null
03-08 16:05:28.061 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e1854fa 129: release: image: CloseableReference 6b45f7f
03-08 16:05:28.071 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3556344d null -> 132: initialize
03-08 16:05:28.071 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3556344d 132: onAttach: request needs submit
03-08 16:05:28.071 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3556344d 132: submitRequest: dataSource: 3a31eb02
03-08 16:05:28.081 1848-1848/com.test V/unknown:AbstractDraweeController: controller 5e7f3a2 128: setHierarchy: null
03-08 16:05:28.091 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e null -> 133: initialize
03-08 16:05:28.091 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e 133: onAttach: request needs submit
03-08 16:05:28.091 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e 133: submitRequest: dataSource: 2f425f7c
03-08 16:05:28.101 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1a7a795 131: set_final_result @ onNewResult: image: CloseableReference 17ea266f
03-08 16:05:28.101 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3e7619dd 130: onDetach
03-08 16:05:28.101 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3e7619dd 130: setHierarchy: null
03-08 16:05:28.101 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3e7619dd 130: release: image: CloseableReference 5746d76
03-08 16:05:28.111 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e9cba8b null -> 134: initialize
03-08 16:05:28.111 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e9cba8b 134: onAttach: request needs submit
03-08 16:05:28.111 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e9cba8b 134: submitRequest: dataSource: ab12026
03-08 16:05:28.121 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3fff18b2 null -> 135: initialize
03-08 16:05:28.121 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3fff18b2 135: onAttach: request needs submit
03-08 16:05:28.121 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3fff18b2 135: submitRequest: dataSource: 4cff003
03-08 16:05:28.131 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1a7a795 131: onDetach
03-08 16:05:28.141 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1a7a795 131: release: image: CloseableReference 17ea266f
03-08 16:05:28.151 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1a7a795 131: setHierarchy: null
03-08 16:05:28.151 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 null -> 136: initialize
03-08 16:05:28.151 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 136: onAttach: request needs submit
03-08 16:05:28.161 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 136: submitRequest: dataSource: 32d0c0a
03-08 16:05:28.161 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e 133: set_final_result @ onNewResult: image: CloseableReference 3a57895f
03-08 16:05:28.171 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3556344d 132: onDetach
03-08 16:05:28.171 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3556344d 132: setHierarchy: null
03-08 16:05:28.171 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3556344d 132: release: image: CloseableReference 1c523781
03-08 16:05:28.171 1848-2129/com.test V/unknown:GenericByteArrayPool: get (reuse) (object, size) = (37fdaea5, 16384)
03-08 16:05:28.171 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3997ded6 null -> 137: initialize
03-08 16:05:28.171 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3997ded6 137: onAttach: request needs submit
03-08 16:05:28.181 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3997ded6 137: submitRequest: dataSource: 3e9f3844
03-08 16:05:28.181 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e 133: onDetach
03-08 16:05:28.181 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e 133: setHierarchy: null
03-08 16:05:28.181 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1557b54e 133: release: image: CloseableReference 3a57895f
03-08 16:05:28.181 1848-2203/com.test V/unknown:BitmapPool: release (free) (object, size) = (3baff0aa, 2868480)
03-08 16:05:28.191 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e0b1262 null -> 138: initialize
03-08 16:05:28.191 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e0b1262 138: onAttach: request needs submit
03-08 16:05:28.191 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e0b1262 138: submitRequest: dataSource: 141cdff3
03-08 16:05:28.201 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e9cba8b 134: onDetach
03-08 16:05:28.201 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e9cba8b 134: release: image: CloseableReference 219a9fac
03-08 16:05:28.221 1848-1848/com.test V/unknown:AbstractDraweeController: controller 2e9cba8b 134: setHierarchy: null
03-08 16:05:28.221 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1db25a6b null -> 139: initialize
03-08 16:05:28.221 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1db25a6b 139: onAttach: request needs submit
03-08 16:05:28.221 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1db25a6b 139: submitRequest: dataSource: 163f49c8
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 136: set_final_result @ onNewResult: image: CloseableReference 202484e5
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3fff18b2 135: onDetach
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3fff18b2 135: setHierarchy: null
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3fff18b2 135: release: image: CloseableReference 3b134557
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d null -> 140: initialize
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 140: onAttach: request needs submit
03-08 16:05:28.241 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 140: submitRequest: dataSource: 27a0d812
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 136: onDetach
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 140 -> 141: initialize
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 141: onDetach
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 141: setHierarchy: null
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 141: onAttach: request needs submit
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 141: submitRequest: dataSource: 2515233f
03-08 16:05:28.251 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 136: release: image: CloseableReference 202484e5
03-08 16:05:28.261 1848-1848/com.test V/unknown:AbstractDraweeController: controller 16849475 136: setHierarchy: null
03-08 16:05:28.271 1848-1848/com.test V/unknown:AbstractDraweeController: controller 153cb4f8 null -> 142: initialize
03-08 16:05:28.271 1848-1848/com.test V/unknown:AbstractDraweeController: controller 153cb4f8 142: onAttach: request needs submit
03-08 16:05:28.271 1848-1848/com.test V/unknown:AbstractDraweeController: controller 153cb4f8 142: submitRequest: dataSource: 39cccdd1
03-08 16:05:28.281 1848-1848/com.test V/unknown:AbstractDraweeController: controller 26476b9d 141: ignore_old_datasource @ onProgress: failure: null
03-08 16:05:28.281 1848-1848/com.test V/unknown:AbstractDraweeController: controller 1db25a6b 139: set_final_result @ onNewResult: image: CloseableReference 2ec2b45b
03-08 16:05:28.281 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3997ded6 137: onDetach
03-08 16:05:28.291 1848-1848/com.test V/unknown:AbstractDraweeController: controller 3997ded6 137: setHierarchy: null
`SUPPORTED_64_BIT_ABIS=[Ljava.lang.String;@2f8fe784
BOARD=msm8992
ID=LMY47V
SUPPORTED_ABIS=[Ljava.lang.String;@2ce7fb6d
RADIO=BO.2.6.c1.2-0224_2205_940c3ae
CPU_ABI2=
UNKNOWN=unknown
HOST=zc-miui-ota-bd48
PRODUCT=libra
DISPLAY=LMY47V
MODEL=Mi-4c
DEVICE=libra
**æˆ‘æ€€ç–‘æ¸…ç†å·¥å…·å¯èƒ½ç£ç›˜æŠŠä¸€äº›facebookç¼“å­˜çš„å›¾ç‰‡ç»™åˆ é™¤äº†ï¼Œå¯¼è‡´æ•°æ®ä¸å®Œæ•´ï¼Œç»“æžœå¯¼è‡´ç¨‹åºå´©æºƒ
ä¹‹åŽ æˆ‘å°±è°ƒç”¨äº†æ¸…é™¤ç¼“å­˜çš„ä»£ç  ï¼Œä¸å´©æºƒäº†ï¼Œåªæ˜¯å›¾ç‰‡ä¸æ˜¾ç¤ºäº†ï¼Œæ€Žä¹ˆå¼„ï¼Ÿ**
fix loading local file fail with special character such as "file:///storage/sdcard/QQ??20168898.jpg"
Eric
there is a circle line around this view
@plamenko after adding the  fresco:roundingBorderPadding="1dp"  , this tiny gray circle around the border disappear
<RelativeLayout
</RelativeLayout>
@zoneoflkf  How did you deal with, can share
it can avoid most of OOM.
hank you for your reply @aagnes
I use the smartisan phone, but i dont think it is a device issue.
@Runpop thx
if (mUri != null) {
W/unknown:RequestLoggingListener: time 1744951128: onProducerFinishWithFailure: {requestId: 84, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: java.lang.IllegalArgumentException}
W/unknown:RequestLoggingListener: time 1744951128: onRequestFailure: {requestId: 84, elapsedTime: -1 ms, throwable: java.lang.IllegalArgumentException}
W/unknown:RequestLoggingListener: time 1744953544: onProducerFinishWithFailure: {requestId: 101, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: java.lang.IllegalArgumentException}
W/unknown:RequestLoggingListener: time 1744953545: onRequestFailure: {requestId: 101, elapsedTime: -1 ms, throwable: java.lang.IllegalArgumentException}
Eric
Eric
Eric
????  Why don't support SVG ???
He's definitely not the only one looking for SVG support. It would be nice if Fresco offered support for it. I had to migrate to Glide because I needed this feature.
android:id="@+id/drawee_image"
draweeImage.getHierarchy().setPlaceholderImage(R.drawable.background_test);
`          Uri uri = Uri.parse("res://com.kinstalk.cookielauncher/" + mAnimResId);
.setUri(uri)
@QiuSean , @jabagawee , How do you make memory cache size bigger?
@Override
-dontwarn okio.**
-dontwarn javax.annotation.**
@Override
When It comes to a very big gif,`CloseableAnimatedImage.start()` when lead to OOM!
@tbruceyu thanks
It pretty hard to get a preview for a gif with drawee and OOM.
I got this Exception
java.lang.IllegalStateException: Width or height is too small
I wanna know how Drawee get the preview for gif not lead to OOM
1.  I go to Activity B from Activity A and the A has a simpleDraweeView loading image from web.
`AbstractDraweeController: controller 9cca437 1747: onDetach`
`AbstractDraweeController: controller 9cca437 1747: release: image: CloseableReference 6691551`
`AbstractDraweeController: controller 9cca437 1747: onAttach: request needs submit`
`AbstractDraweeController: controller 9cca437 1747: set_final_result @ onNewResult: image: CloseableReference 6691551`
@lambdapioneer
the hierarchy is below
nubia Phone Picture is black.
I don't know if it's the same as https://github.com/facebook/fresco/issues/984 .
Eric
So I'm not sure it's the same as #984
Eric
@e-hai :`
when i use Fresco on  Z7 Max Nubia there will  be a Crash ï¼Œbut other mobile is normal
@Override
@Override
@Override
@Override
@Nullable Animatable anim) {
@Override
@Override
simpleDraweeView.setController(controller);
int cy = simpleDraweeView.getHeight() / 2;
@Override
simpleDraweeView.setVisibility(View.VISIBLE);
@Override
@Override
@Override
Just thought you'd like to know that we're now using Fresco in the official Wikipedia app (and liking it quite a bit)!
02-19 01:37:31.314 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 23015b2 null -> 50: initialize
02-19 01:37:31.315 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 23015b2 50: onAttach: request needs submit
02-19 01:37:31.315 26695-26695/de.jarosz.desires V/unknown:RequestLoggingListener: time 278709220: onRequestSubmit: {requestId: 48, callerContext: null, isPrefetch: false}
02-19 01:37:31.316 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 23015b2 50: submitRequest: dataSource: 5461080
02-19 01:37:31.318 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller adc36b9 null -> 51: initialize
02-19 01:37:31.318 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller adc36b9 51: onAttach: request needs submit
02-19 01:37:31.319 26695-26695/de.jarosz.desires V/unknown:RequestLoggingListener: time 278709223: onRequestSubmit: {requestId: 49, callerContext: null, isPrefetch: false}
02-19 01:37:31.319 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller adc36b9 51: submitRequest: dataSource: 42bd25f
02-19 01:37:31.320 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller adc36b9 51: set_final_result @ onNewResult: image: CloseableReference 178a73
02-19 01:37:31.321 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 53bb4ac null -> 52: initialize
02-19 01:37:31.321 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 53bb4ac 52: onAttach: request needs submit
02-19 01:37:31.322 26695-26695/de.jarosz.desires V/unknown:RequestLoggingListener: time 278709226: onRequestSubmit: {requestId: 50, callerContext: null, isPrefetch: false}
02-19 01:37:31.322 26695-26695/de.jarosz.desires V/unknown:RequestLoggingListener: time 278709227: onProducerStart: {requestId: 50, producer: BitmapMemoryCacheGetProducer}
02-19 01:37:31.322 26695-26695/de.jarosz.desires V/unknown:RequestLoggingListener: time 278709227: onRequestSuccess: {requestId: 50, elapsedTime: 1 ms}
02-19 01:37:31.322 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 53bb4ac 52: submitRequest: dataSource: e0a90a
02-19 01:37:31.323 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 53bb4ac 52: set_final_result @ onNewResult: image: CloseableReference 261e2fd
02-19 01:37:31.329 26695-26695/de.jarosz.desires V/unknown:AbstractDraweeController: controller 2173350 49: release: image: CloseableReference 261e2fd
compile 'com.nostra13.universalimageloader:universal-image-loader:1.9.4'
Jesse$ unzip -v 0.9.0.apk |grep "lib/armeabi/"
34648  Defl:N    19785  43%  02-14-16 15:28  e4e7705e  lib/armeabi/liblocSDK5.so
13536  Defl:N     5682  58%  02-14-16 15:28  7f823f49  lib/armeabi/libbitmaps.so
91744  Defl:N    46546  49%  02-14-16 15:28  961d4107  lib/armeabi/libgifimage.so
210252  Defl:N   118758  44%  02-14-16 15:28  09191f51  lib/armeabi/libimagepipeline.so
13584  Defl:N     5575  59%  02-14-16 15:28  ac98b3ad  lib/armeabi/libmemchunk.so
177456  Defl:N    96488  46%  02-14-16 15:28  27b9997e  lib/armeabi/libwebp.so
83552  Defl:N    41805  50%  02-14-16 15:28  2803046d  lib/armeabi/libwebpimage.so
25840  Defl:N    12474  52%  02-14-16 15:28  bd43d793  lib/armeabi/libweibosdkcore.so
25816  Defl:N    14213  45%  02-14-16 15:28  e2eb3984  lib/armeabi/libcocklogic.so
17756  Defl:N     9141  49%  02-14-16 15:28  09e230cc  lib/armeabi/libsupervisor.so
161360  Defl:N    77623  52%  02-14-16 15:28  fabaacc1  lib/armeabi/libtnet-2.0.17.2-agoo.so
29816  Defl:N    15883  47%  02-14-16 15:28  24afd67f  lib/armeabi/libgif.so
my project is in eclispe and my android version is 4.2.2 ,the fresco version is frescolib-v0.9.0.
My issues how to choose the correct version of fresco
android:contentDescription="kashif"
I hope, you have an idea of how to do this with Fresco.
https://github.com/budnyjj/fresco
In Fresco.initialize(this) will Initializes SimpleDraweeView,In SimpleDraweeView,there has a  static variable sDraweeControllerBuilderSupplierï¼Œand sDraweeControllerBuilderSupplier hold a variable mContext,finally leaks my activity instance.
Initialize Fresco with the application context does not resolve the problem, according to LeakCanary.
* Device: samsung samsung SM-G355M kanas3gub
<RelativeLayout
</RelativeLayout>
.setUri(uri)
gificons.setController(controller);
gificons.setHierarchy(hierarchy);
gificons.setVisibility(View.VISIBLE);
//gificons.setMinimumWidth(40);
gificons.requestLayout();
gificons.refreshDrawableState();
02-04 22:13:41.226 17386-17386/? V/unknown:AbstractDraweeController: controller 42456e80 82: onDetach
02-04 22:13:41.226 17386-17386/? V/unknown:AbstractDraweeController: controller 42456e80 82: setHierarchy: null
02-04 22:13:41.233 17386-17386/? V/unknown:AbstractDraweeController: controller 42456e80 82: onAttach: request needs submit
02-04 22:13:41.233 17386-17386/? V/unknown:AbstractDraweeController: controller 42456e80 82: submitRequest: dataSource: 43b4e860
02-04 22:13:41.233 17386-17386/? V/unknown:AbstractDraweeController: controller 42456e80 82: final_failed @ onFailure: failure: java.lang.NullPointerException: No image request was specified!
this is my codeï¼š
it can't display preview ,this is exception stackï¼š
Rendering Problems
@burnaz it's working here with any color, even with alpha. But, it's a workaround for a temporary preview...
@Override
@Override
@Override
@Override
simpleDraweeView.setController(controller);
@NonNull
@Override
@Override
@Override
@NonNull
</RelativeLayout>
Greatings,
Eric
@massimocarli
I think Fresco is a higher compatibility issues.
@massimocarli
I use fresco 0.9.0
Thanks I was not aware of this difference.
I wanted to work upon of something substantial size in Fresco, but dont have the idea of which one to pick. (So that its not discarded)
@Override
@Override
@Override
setOldController(mDraweeHolder.getController()).
//rotate bitmap
mDraweeHolder.setController(controller);
but setAutoRotate..... is Invalid ~
@kirwan [ Link Code](https://gist.github.com/ikkyu0319/7a675c9e8a2ac86b63a8)
If not, this would be a nice enhancement.  Something like `isGifAnimated(Uri gifUri)` would be outstanding!
This happens only for few images, like - http://i.imgur.com/AekhHyC.jpg,
Only on some devices like - Sony LT22i or Samsung Galaxy S2 (4.1.1) Genymotion emulator
I'm attaching log for Fresco and looking forward for any feedback.
01-27 14:51:00.781 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1c26c 0 -> 2: initialize
01-27 14:51:00.785 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1c26c 2: setHierarchy: null
01-27 14:51:00.785 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1c26c 2: onAttach: request needs submit
01-27 14:51:00.785 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1c26c 2: submitRequest: dataSource: 535ab5a8
01-27 14:51:00.797 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1e144 1 -> 3: initialize
01-27 14:51:00.797 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1e144 3: setHierarchy: null
01-27 14:51:00.797 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1e144 3: onAttach: request needs submit
01-27 14:51:00.801 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1e144 3: submitRequest: dataSource: 539bd9f0
01-27 14:51:01.177 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1c26c 2: final_failed @ onFailure: failure: java.lang.RuntimeException: Failed to pin Bitmap
01-27 14:51:01.177 26981-26981/xxx V/unknown:AbstractDraweeController: controller 53a1e144 3: final_failed @ onFailure: failure: java.lang.RuntimeException: Failed to pin Bitmap
01-27 17:38:10.999 2370-2370/com.deao.jmt W/System.err:     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1126)
01-27 17:38:10.999 2370-2370/com.deao.jmt W/System.err:     at android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1489)
01-27 17:38:10.999 2370-2370/com.deao.jmt W/System.err:     at android.support.v4.app.FragmentManagerImpl.executePendingTransactions(FragmentManager.java:486)
01-27 17:38:10.999 2370-2370/com.deao.jmt W/System.err:     at android.support.v4.app.FragmentPagerAdapter.finishUpdate(FragmentPagerAdapter.java:141)
buildTypes {
my issuse still unresolved!
![anglermmb29mtaishanlin01212016190153](https://cloud.githubusercontent.com/assets/14235815/12478751/b0bbe95e-c071-11e5-8f37-49f45cb39144.gif)
D/Charles.Lin: file:///storage/emulated/0/DCIM/Gif/florian-1.gif inMemoryCache:**false**
**Code in bindView**:
Log.d("Charles.Lin", imageUri + " inMemoryCache:" + inMemoryCache);
.setOldController(mSimpleDraweeView.getController())
I'm using fresco v 0.8.1
I configured Fresco:
@Override
PipelineDraweeController controller
.setOldController(simpleDrawee.getController())
simpleDrawee.setController(controller);
plz help me!!!.
java.lang.NoClassDefFoundError: com/facebook/drawee/R$styleable
use fresco 0.8.1
@plamenko
Why after adding fresco, local libraries can not be scored so apk out?
http://fanyi.baidu.com/?aldtype=16047###
Local already has a armebi library, the use of studio fresco to add
2016-01-22 22:24 GMT+08:00 Balazs Balazs notifications@github.com:
Why after adding fresco. the code will go UnsatisfiedLinkError
@Override
I like fresco but i have an issue with simpledraweeview  which doesn't resize to match the size of scaled image. i have tried CENTER_CROP and even FIT_CENTER scale types but  whenever the scaled image height is smaller than my simple drawee view's height, a large space is left.
here is my simple drawee view. the red color is my view's background thus symbolizing  the empty spaces in the view
Cata
Error:error: samples\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o.d: No such file or directory
Error:error: samples\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o: No such file or directory
Error:error: samples\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o.d: No such file or directory
Error:error: samples\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o: No such file or directory
make.exe: *** [samples\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi-v7a/objs/bitmaps/Bitmaps.o] Error 1
make.exe: *** [samples\fresco\imagepipeline\build\tmp\ndk_build_bitmaps/local/armeabi/objs/bitmaps/Bitmaps.o] Error 1
It looks that is an NDK build problem around Bitmaps that I have no idea how to fix it.
ndk {
abiFilters "arm64-v8a"
which define the ndk abi type.
`APP_ABI := armeabi-v7a armeabi arm64-v8a x86 x86_64`
`APP_ABI := arm64-v8a`
@balazsbalazs Can't solve in eclipse
@massimocarli  Thank you for your answer
@massimocarli  Very sorry, the problem still exists in low version of the mobile phone (my phone is android 4.1.2)
fresco dependency :
drawee,fbcore,imageplpeline-base,imagepipeline,static-webp
1. this is my code:
DraweeController controller = Fresco
.newDraweeControllerBuilder()
![capturar](https://cloud.githubusercontent.com/assets/8230135/12828940/84bc1af6-cb6e-11e5-8c41-7525247011b1.PNG)
I'm getting error from `SoLoaderShim`
@Override
@massimocarli  I do not have the phone on me, but the crash that I got
@ffelini I'm actually not sure, I haven't updated Fresco in a while. It depends on whether Fresco has integrated Facebook's SoLoader yet, which is now also opensource
![anglermmb29mtaishanlin01212016190153](https://cloud.githubusercontent.com/assets/14235815/12478751/b0bbe95e-c071-11e5-8f37-49f45cb39144.gif)
D/Charles.Lin: file:///storage/emulated/0/DCIM/Gif/florian-1.gif inMemoryCache:**false**
**Code in bindView**:
Log.d("Charles.Lin", imageUri + " inMemoryCache:" + inMemoryCache);
.setOldController(mSimpleDraweeView.getController())
so I added code
@Override
@Override
@Override
@Override
Eric
@eldk @balazsbalazs Ok, Thanks guys.
>      Versions that do not match:
I'm getting this exception when i scroll fast on a recycleview. do you have ani idea what am I doing wrong?
Fresco.initialize(context);
repositories {
mavenCentral()
repositories {
mavenCentral()
// Enabling multidex support.
// by a similar customization.
jumboMode true
productFlavors {
2016-01-23 5:48 GMT+08:00 Balazs Balazs notifications@github.com:
> Are you including any library that includes nineoldandroids?
Eric
I've updated to Fresco 0.9.0.
Greatings,
Eric
Hello @massimocarli ,
thanks @massimocarli
> 01-15 17:47:57.559 31179-31179/net.domain.app V/unknown:AbstractDraweeController: controller 40712cd8 1: final_failed @ onFailure: failure: java.lang.NullPointerException: BitmapFactory returned null
> 01-15 20:24:17.649 4152-4152/tld.domain.app V/unknown:AbstractDraweeController: controller 40708ed8 0: final_failed @ onFailure: failure: java.lang.NullPointerException: BitmapFactory returned null
@massimocarli should you give a mail please ?
Eric
There are several causes related to this issue:
@michalgr Is there any plan to make `BitmapUtil.MAX_BITMAP_SIZE` user-configurable?
@michalgr It depends on each device, so it can't be defined as a constant.
I'm using the modified version of fresco, which can support larger image after resizing the source image.
@Override
| ![screenshot_20160113-160849](https://cloud.githubusercontent.com/assets/5456130/12312076/181efbca-ba11-11e5-8eaf-3ada0e09e78c.png) | ![screenshot_20160113-160904](https://cloud.githubusercontent.com/assets/5456130/12312075/181af94e-ba11-11e5-8d15-cf61caf9d763.png) |
setMultiDraweeSource(position);
@Override
detachdraweeHolders();
@Override
detachdraweeHolders();
@Override
attachDraweeHolders();
@Override
attachDraweeHolders();
private void detachdraweeHolders() {
mMultiDraweeHolder.onDetach();
private void attachDraweeHolders() {
mMultiDraweeHolder.onAttach();
@Override
@Override
@Override
for (int i = 0; i < mMultiDraweeHolder.size(); i++) {
mMultiDraweeHolder.draw(canvas);
private void setMultiDraweeSource(int position) {
mMultiDraweeHolder.clear();
mMultiDraweeHolder.add(dh);
mMultiDraweeHolder.onAttach();
@Override
@Override
@Override
Here are some fresco's Log:
01-13 16:11:16.506  5037  5037 V unknown:AbstractDraweeController: controller 1868083 null -> 17: initialize
01-13 16:11:16.528  5037  5037 V unknown:AbstractDraweeController: controller 1868083 17: submitRequest: dataSource: 174387e
01-13 16:11:16.536  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c null -> 18: initialize
01-13 16:11:16.553  5037  5037 V unknown:AbstractDraweeController: controller 77d7cfb null -> 19: initialize
01-13 16:11:16.553  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: onAttach: request needs submit
01-13 16:11:16.554  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: submitRequest: dataSource: 595771
01-13 16:11:16.574  5037  5037 V unknown:AbstractDraweeController: controller 2892fa8 1: release: image: CloseableReference 68a1eef
01-13 16:11:18.401  5037  5037 V unknown:AbstractDraweeController: controller c385a5c null -> 20: initialize
01-13 16:11:18.402  5037  5037 V unknown:AbstractDraweeController: controller 38c7e3a null -> 21: initialize
01-13 16:11:18.403  5037  5037 V unknown:AbstractDraweeController: controller 11ec048 null -> 22: initialize
01-13 16:11:18.407  5037  5037 V unknown:AbstractDraweeController: controller 38c7e3a 21: onAttach: request needs submit
01-13 16:11:18.408  5037  5037 V unknown:AbstractDraweeController: controller 38c7e3a 21: submitRequest: dataSource: a1efac7
01-13 16:11:18.444  5037  5037 V unknown:AbstractDraweeController: controller 11ec048 22: set_final_result @ onNewResult: image: CloseableReference 97ea919
01-13 16:11:18.754  5037  5037 V unknown:AbstractDraweeController: controller 4c9cdde null -> 23: initialize
01-13 16:11:18.755  5037  5037 V unknown:AbstractDraweeController: controller 2f5128c null -> 24: initialize
01-13 16:11:18.757  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea null -> 25: initialize
01-13 16:11:18.759  5037  5037 V unknown:AbstractDraweeController: controller 426cb78 null -> 26: initialize
01-13 16:11:18.761  5037  5037 V unknown:AbstractDraweeController: controller 4c9cdde 23: onAttach: request needs submit
01-13 16:11:18.763  5037  5037 V unknown:AbstractDraweeController: controller 4c9cdde 23: submitRequest: dataSource: 1bbab6
01-13 16:11:18.764  5037  5037 V unknown:AbstractDraweeController: controller 2f5128c 24: onAttach: request needs submit
01-13 16:11:18.768  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea 25: onAttach: request needs submit
01-13 16:11:18.770  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea 25: submitRequest: dataSource: b92724
01-13 16:11:18.773  5037  5037 V unknown:AbstractDraweeController: controller 426cb78 26: submitRequest: dataSource: 29ad28d
01-13 16:11:18.870  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: onDetach
01-13 16:11:18.873  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: release: image: CloseableReference fd09fd4
01-13 16:11:18.956  5037  5037 V unknown:AbstractDraweeController: controller 970eacb null -> 27: initialize
01-13 16:11:18.957  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 null -> 28: initialize
01-13 16:11:18.958  5037  5037 V unknown:AbstractDraweeController: controller 62168a7 null -> 29: initialize
01-13 16:11:18.960  5037  5037 V unknown:AbstractDraweeController: controller 83278fd null -> 30: initialize
01-13 16:11:18.961  5037  5037 V unknown:AbstractDraweeController: controller 771e843 null -> 31: initialize
01-13 16:11:18.966  5037  5037 V unknown:AbstractDraweeController: controller 970eacb 27: submitRequest: dataSource: 7b2a7f9
01-13 16:11:18.969  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: onAttach: request needs submit
01-13 16:11:18.971  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: submitRequest: dataSource: 9d5933e
01-13 16:11:18.976  5037  5037 V unknown:AbstractDraweeController: controller 771e843 31: onAttach: request needs submit
01-13 16:11:18.978  5037  5037 V unknown:AbstractDraweeController: controller 771e843 31: submitRequest: dataSource: af61cbb
01-13 16:11:19.122  5037  5037 V unknown:AbstractDraweeController: controller 11ec048 22: onDetach
01-13 16:11:19.341  5037  5037 V unknown:AbstractDraweeController: controller 1e3aaab null -> 32: initialize
01-13 16:11:19.342  5037  5037 V unknown:AbstractDraweeController: controller 51df4a1 null -> 33: initialize
01-13 16:11:19.343  5037  5037 V unknown:AbstractDraweeController: controller 2304687 null -> 34: initialize
01-13 16:11:19.344  5037  5037 V unknown:AbstractDraweeController: controller 1e3aaab 32: onAttach: request needs submit
01-13 16:11:19.345  5037  5037 V unknown:AbstractDraweeController: controller 1e3aaab 32: submitRequest: dataSource: 38439dd
01-13 16:11:19.348  5037  5037 V unknown:AbstractDraweeController: controller 51df4a1 33: submitRequest: dataSource: 6dc2952
01-13 16:11:19.912  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: onDetach
01-13 16:11:19.918  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: release: image: CloseableReference d2717f0
01-13 16:11:20.063  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: onAttach: request needs submit
01-13 16:11:20.068  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: submitRequest: dataSource: ee85d20
01-13 16:11:20.069  5037  5037 V unknown:AbstractDraweeController: controller 77d7cfb 19: onAttach: request needs submit
01-13 16:11:20.070  5037  5037 V unknown:AbstractDraweeController: controller 77d7cfb 19: submitRequest: dataSource: c0f96d9
01-13 16:11:20.568  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea 25: onDetach
01-13 16:11:21.776  5037  5037 V unknown:AbstractDraweeController: controller 4c9cdde 23: onAttach: request needs submit
01-13 16:11:21.780  5037  5037 V unknown:AbstractDraweeController: controller 2f5128c 24: submitRequest: dataSource: e517f7f
01-13 16:11:21.781  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea 25: onAttach: request needs submit
01-13 16:11:21.783  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea 25: submitRequest: dataSource: 8c62b4c
01-13 16:11:21.864  5037  5037 V unknown:AbstractDraweeController: controller 23f0e2c 18: release: image: CloseableReference fd09fd4
01-13 16:11:21.913  5037  5037 V unknown:AbstractDraweeController: controller 970eacb 27: submitRequest: dataSource: 14790aa
01-13 16:11:21.914  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: onAttach: request needs submit
01-13 16:11:21.915  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: submitRequest: dataSource: 708949b
01-13 16:11:21.923  5037  5037 V unknown:AbstractDraweeController: controller 771e843 31: onAttach: request needs submit
01-13 16:11:21.927  5037  5037 V unknown:AbstractDraweeController: controller 771e843 31: submitRequest: dataSource: ce60d76
01-13 16:11:22.012  5037  5037 V unknown:AbstractDraweeController: controller 551df77 null -> 35: initialize
01-13 16:11:22.016  5037  5037 V unknown:AbstractDraweeController: controller 551df77 35: submitRequest: dataSource: a2c544d
01-13 16:11:22.080  5037  5037 V unknown:AbstractDraweeController: controller c20e9ea 25: onDetach
01-13 16:11:22.146  5037  5037 V unknown:AbstractDraweeController: controller 71d8b02 null -> 36: initialize
01-13 16:11:22.148  5037  5037 V unknown:AbstractDraweeController: controller fdd4e50 null -> 37: initialize
01-13 16:11:22.152  5037  5037 V unknown:AbstractDraweeController: controller fdd4e50 37: onAttach: request needs submit
01-13 16:11:22.154  5037  5037 V unknown:AbstractDraweeController: controller fdd4e50 37: submitRequest: dataSource: 10f466f
01-13 16:11:22.213  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: onDetach
01-13 16:11:22.217  5037  5037 V unknown:AbstractDraweeController: controller ae081c1 28: release: image: CloseableReference d2717f0
01-13 16:11:22.297  5037  5037 V unknown:AbstractDraweeController: controller 3bcc005 null -> 38: initialize
01-13 16:11:22.298  5037  5037 V unknown:AbstractDraweeController: controller 4f3da8b null -> 39: initialize
01-13 16:11:22.299  5037  5037 V unknown:AbstractDraweeController: controller f4e5781 null -> 40: initialize
01-13 16:11:22.303  5037  5037 V unknown:AbstractDraweeController: controller 4f3da8b 39: onAttach: request needs submit
01-13 16:11:22.304  5037  5037 V unknown:AbstractDraweeController: controller 4f3da8b 39: submitRequest: dataSource: ba7c214
01-13 16:11:22.306  5037  5037 V unknown:AbstractDraweeController: controller f4e5781 40: onAttach: request needs submit
01-13 16:11:22.566  5037  5037 V unknown:AbstractDraweeController: controller ec6b475 null -> 41: initialize
01-13 16:11:22.568  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 null -> 42: initialize
01-13 16:11:22.569  5037  5037 V unknown:AbstractDraweeController: controller a597ed6 null -> 43: initialize
01-13 16:11:22.571  5037  5037 V unknown:AbstractDraweeController: controller 849d844 null -> 44: initialize
01-13 16:11:22.575  5037  5037 V unknown:AbstractDraweeController: controller ec6b475 41: submitRequest: dataSource: 73ffff3
01-13 16:11:22.577  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 42: onAttach: request needs submit
01-13 16:11:22.578  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 42: submitRequest: dataSource: f2e34b0
01-13 16:11:22.803  5037  5037 V unknown:AbstractDraweeController: controller fdd4e50 37: onDetach
01-13 16:11:23.357  5037  5037 V unknown:AbstractDraweeController: controller 2535247 null -> 45: initialize
01-13 16:11:23.359  5037  5037 V unknown:AbstractDraweeController: controller 6758b9d null -> 46: initialize
01-13 16:11:23.361  5037  5037 V unknown:AbstractDraweeController: controller 368cbe3 null -> 47: initialize
01-13 16:11:23.363  5037  5037 V unknown:AbstractDraweeController: controller 244499 null -> 48: initialize
01-13 16:11:23.364  5037  5037 V unknown:AbstractDraweeController: controller ed2433f null -> 49: initialize
01-13 16:11:23.365  5037  5037 V unknown:AbstractDraweeController: controller 2535247 45: onAttach: request needs submit
01-13 16:11:23.367  5037  5037 V unknown:AbstractDraweeController: controller 2535247 45: submitRequest: dataSource: 6b9155
01-13 16:11:23.371  5037  5037 V unknown:AbstractDraweeController: controller 368cbe3 47: onAttach: request needs submit
01-13 16:11:23.375  5037  5037 V unknown:AbstractDraweeController: controller 244499 48: set_final_result @ onNewResult: image: CloseableReference ab8f26e
01-13 16:11:25.339  5037  5037 V unknown:AbstractDraweeController: controller a5709c2 null -> 50: initialize
01-13 16:11:25.340  5037  5037 V unknown:AbstractDraweeController: controller e31cb10 null -> 51: initialize
01-13 16:11:25.341  5037  5037 V unknown:AbstractDraweeController: controller a90000e null -> 52: initialize
01-13 16:11:25.347  5037  5037 V unknown:AbstractDraweeController: controller a90000e 52: onAttach: request needs submit
01-13 16:11:25.348  5037  5037 V unknown:AbstractDraweeController: controller a90000e 52: submitRequest: dataSource: e500f1a
01-13 16:11:25.912  5037  5037 V unknown:AbstractDraweeController: controller 368cbe3 47: onDetach
01-13 16:11:26.162  5037  5037 V unknown:AbstractDraweeController: controller 71d8b02 36: onAttach: request needs submit
01-13 16:11:26.164  5037  5037 V unknown:AbstractDraweeController: controller fdd4e50 37: onAttach: request needs submit
01-13 16:11:26.166  5037  5037 V unknown:AbstractDraweeController: controller fdd4e50 37: submitRequest: dataSource: e3bec28
01-13 16:11:26.935  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 42: onDetach
01-13 16:11:27.423  5037  5037 V unknown:AbstractDraweeController: controller ec6b475 41: submitRequest: dataSource: 67ed41
01-13 16:11:27.425  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 42: onAttach: request needs submit
01-13 16:11:27.426  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 42: submitRequest: dataSource: 7d002e6
01-13 16:11:27.427  5037  5037 V unknown:AbstractDraweeController: controller 328aa98 42: set_final_result @ onNewResult: image: CloseableReference da9aa61
01-13 16:11:27.982  5037  5037 V unknown:AbstractDraweeController: controller 368cbe3 47: onAttach: request needs submit
01-13 16:11:27.983  5037  5037 V unknown:AbstractDraweeController: controller 368cbe3 47: submitRequest: dataSource: fb1f7c3
01-13 16:11:27.986  5037  5037 V unknown:AbstractDraweeController: controller 244499 48: submitRequest: dataSource: c161840
01-13 16:11:27.986  5037  5037 V unknown:AbstractDraweeController: controller 244499 48: set_final_result @ onNewResult: image: CloseableReference ab8f26e
@michalgr Thanks for responding. I thought the log I attached contains all Fresco logs when views are first attached. After that, I scrolled up/down, and the corresponding logs followed by the logs you asked for.
01-14 11:01:33.692 15339 15339 V unknown:AbstractDraweeController: controller a5c8c85 null -> 17: initialize
01-14 11:01:33.706 15339 15339 V unknown:AbstractDraweeController: controller a5c8c85 17: submitRequest: dataSource: e962de8
01-14 11:01:33.709 15339 15339 V unknown:AbstractDraweeController: controller b30fce7 null -> 18: initialize
01-14 11:01:33.709 15339 15339 V unknown:AbstractDraweeController: controller b44c73d null -> 19: initialize
01-14 11:01:33.710 15339 15339 V unknown:AbstractDraweeController: controller b30fce7 18: onAttach: request needs submit
01-14 11:01:33.711 15339 15339 V unknown:AbstractDraweeController: controller b30fce7 18: submitRequest: dataSource: 1868083
01-14 11:01:33.712 15339 15339 V unknown:AbstractDraweeController: controller b44c73d 19: onAttach: request needs submit
01-14 11:01:33.712 15339 15339 V unknown:AbstractDraweeController: controller b44c73d 19: submitRequest: dataSource: 9bed200
01-14 11:01:33.728 15339 15339 V unknown:AbstractDraweeController: controller 25b2ce3 9: release: image: CloseableReference f8fa6b8
01-14 11:01:33.729 15339 15339 V unknown:AbstractDraweeController: controller 5208ef2 1: release: image: CloseableReference fdd8ec2
01-14 11:01:33.729 15339 15339 V unknown:AbstractDraweeController: controller 601dc6a 10: release: image: CloseableReference fdd8ec2
01-14 11:01:33.730 15339 15339 V unknown:AbstractDraweeController: controller 10df149 3: release: image: CloseableReference fdd8ec2
01-14 11:01:33.731 15339 15339 V unknown:AbstractDraweeController: controller 7e211b1 15: release: image: CloseableReference fdd8ec2
01-14 11:01:33.731 15339 15339 V unknown:AbstractDraweeController: controller dae53c 12: release: image: CloseableReference fdd8ec2
01-14 11:01:35.619 15339 15339 V unknown:AbstractDraweeController: controller 595771 null -> 20: initialize
01-14 11:01:35.621 15339 15339 V unknown:AbstractDraweeController: controller e9cedd7 null -> 21: initialize
01-14 11:01:35.622 15339 15339 V unknown:AbstractDraweeController: controller 95af9ad null -> 22: initialize
01-14 11:01:35.623 15339 15339 V unknown:AbstractDraweeController: controller 595771 20: onAttach: request needs submit
01-14 11:01:35.624 15339 15339 V unknown:AbstractDraweeController: controller 595771 20: submitRequest: dataSource: dd89073
01-14 11:01:35.626 15339 15339 V unknown:AbstractDraweeController: controller e9cedd7 21: onAttach: request needs submit
01-14 11:01:35.629 15339 15339 V unknown:AbstractDraweeController: controller e9cedd7 21: submitRequest: dataSource: d2abb30
01-14 11:01:35.631 15339 15339 V unknown:AbstractDraweeController: controller e9cedd7 21: set_final_result @ onNewResult: image: CloseableReference fdd8ec2
01-14 11:01:35.633 15339 15339 V unknown:AbstractDraweeController: controller 95af9ad 22: onAttach: request needs submit
01-14 11:01:36.055 15339 15339 V unknown:AbstractDraweeController: controller 11ec048 null -> 23: initialize
01-14 11:01:36.057 15339 15339 V unknown:AbstractDraweeController: controller 6b44406 null -> 24: initialize
01-14 11:01:36.058 15339 15339 V unknown:AbstractDraweeController: controller c8398f4 null -> 25: initialize
01-14 11:01:36.059 15339 15339 V unknown:AbstractDraweeController: controller 2409a92 null -> 26: initialize
01-14 11:01:36.060 15339 15339 V unknown:AbstractDraweeController: controller 11ec048 23: onAttach: request needs submit
01-14 11:01:36.061 15339 15339 V unknown:AbstractDraweeController: controller 11ec048 23: submitRequest: dataSource: 1bb5060
01-14 11:01:36.070 15339 15339 V unknown:AbstractDraweeController: controller 6b44406 24: submitRequest: dataSource: 97ea919
01-14 11:01:36.073 15339 15339 V unknown:AbstractDraweeController: controller c8398f4 25: submitRequest: dataSource: 4c9cdde
01-14 11:01:36.076 15339 15339 V unknown:AbstractDraweeController: controller 2409a92 26: onAttach: request needs submit
01-14 11:01:36.079 15339 15339 V unknown:AbstractDraweeController: controller 2409a92 26: submitRequest: dataSource: 2f5128c
01-14 11:01:36.743 15339 15339 V unknown:AbstractDraweeController: controller b30fce7 18: onDetach
01-15 09:12:14.560 20024 20024 V unknown:AbstractDraweeController: controller e854b51 null -> 0: initialize
01-15 09:12:14.585 20024 20024 V unknown:AbstractDraweeController: controller 1781e90 null -> 1: initialize
01-15 09:12:14.592 20024 20024 V unknown:AbstractDraweeController: controller 7a33f8e null -> 2: initialize
01-15 09:12:14.593 20024 20024 V unknown:AbstractDraweeController: controller 1781e90 1: onAttach: request needs submit
01-15 09:12:14.594 20024 20024 V unknown:AbstractDraweeController: controller 7a33f8e 2: onAttach: request needs submit
01-15 09:12:14.595 20024 20024 V unknown:AbstractDraweeController: controller 7a33f8e 2: submitRequest: dataSource: 8725f45
@michalgr  @plamenko
hi plamenko ï¼š
@Override
@Override
private Context context;
@Override
@TargetApi(Build.VERSION_CODES.JELLY_BEAN_MR1)
blurredBitmap.recycle();
@Override
@Override
@Override
@Override
@michalgr Hi, I would like to implement this. Could you let me know what is the desired behaviour? Would simple checking for not null in [SimpleDraweeView.java:96](https://github.com/facebook/fresco/blob/master/drawee/src/main/java/com/facebook/drawee/view/SimpleDraweeView.java#L96) and returning if Uri == null be enough?
those can't loading image is black
@lzy26fate ä½ æ˜¯360çš„ä¹ˆï¼Œä½ è¿™ä¸Šé¢å“ªä¸ªæ˜¯é©¬èµ›å…‹ï¼Œå“ªä¸ªæ˜¯æ²¡åŠ è½½çš„å•Šï¼Ÿå»ºè®®ä½ åšä¸ªdemoæˆªä¸ªå›¾ã€‚
Configure your app for multidex
.path("emoticons/emot_001.webp")
.setUri(uri)
my app has fatal exception as followed
I want display webp ani so I wrote as follows
but ani not displayed
unknown:AbstractDraweeController: controller 15ed5762 null -> 0: initialize
V/unknown:AbstractDraweeController: controller 15ed5762 0: onAttach: request needs submit
V/unknown:PipelineDraweeController: controller 15ed5762: getDataSource
V/unknown:AbstractDraweeController: controller 15ed5762 0: submitRequest: dataSource: 31cd87ae
am i doing wrong or something else i was ignored?
@tyronen thank you very much
compile 'com.github.siyamed:android-shape-imageview:0.9.+@aar'
Java code :
.setUri(uri)
@Override
at com.cazaayan.tenzfree.Activity.SplashScreen.onCreate(SplashScreen.java:34)
at com.cazaayan.tenzfree.Activity.SplashScreen.onCreate(SplashScreen.java:34)
at com.cazaayan.tenzfree.Activity.SplashScreen.onCreate(SplashScreen.java:34)
And,this really make me crazy.
Inspired by your "Maven" world,i literally add Maven in my build.gradle.
https://www.XXX.com/download/5805189589510567654?jsession=58adasfadse589510567654
@balazsbalazs a separate imagepipeline-backend is a good idea. Can I also deprecate the old one? That makes the duplication less offensive.
Can you tell me .why is closed????@aagens
I understand that Fresco has issues when it comes to not setting width and/or height.
android:id="@+id/imagethumb"
//Fresco init
Fresco.newDraweeControllerBuilder()
public class MyDraweeView extends ImageView {
public MyDraweeView(Context context) {
public MyDraweeView(Context context, AttributeSet attr) {
public MyDraweeView(Context context, AttributeSet attr, int defStyle) {
if (mDraweeHolder == null) {
@Override
mDraweeHolder.onDetach();
@Override
mDraweeHolder.onAttach();
@Override
return dr == mDraweeHolder.getHierarchy().getTopLevelDrawable();
@Override
mDraweeHolder.onDetach();
@Override
mDraweeHolder.onAttach();
@Override
return mDraweeHolder.onTouchEvent(event) || super.onTouchEvent(event);
.setOldController(mDraweeHolder.getController())
@Override
mDraweeHolder.setController(controller);
http://www.opalesurfcasting.net/IMG/jpg/LaMaille_gain_recompression_image.jpg
This is used there : https://play.google.com/apps/testing/net.opalesurfcasting.lamaille (alpha release).
Greatings,
Eric
Is it indeed that fresco doesn't support ico image, or I do something mistake?
@aagnes  Any plan to support it? If not, let me know since I need to do this in another way. Thanks very much!
my code:
<ProgressBar
Fresco 0.8.1
Goal : prefetchToDiskCache() for a list of Uris
@Override
@Override
Greatings,
Eric
> 01-05 15:24:24.189 1073-1073/tld.domain.appname D/TEST PREFETCH_1: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@408d7170 url: http://www.domain.tld/LAMAILLE/alose.jpg
> 01-05 15:24:24.259 1073-2390/tld.domain.appname V/unknown:BufferedDiskCache: Did not find image for http://www.domain.tld/LAMAILLE/alose.jpg in staging area
> 01-05 15:24:24.259 1073-2390/tld.domain.appname V/unknown:BufferedDiskCache: Disk cache read for http://www.domain.tld/LAMAILLE/alose.jpg
> 01-05 15:24:24.259 1073-2390/tld.domain.appname V/unknown:BufferedDiskCache: Disk cache miss for http://www.domain.tld/LAMAILLE/alose.jpg
> 01-05 15:24:24.269 1073-14875/tld.domain.appname D/unknown:TEST_OKHTTP_1: Sending request http://www.domain.tld/LAMAILLE/alose.jpg on null
> 01-05 15:24:24.329 1073-14875/tld.domain.appname D/unknown:TEST_OKHTTP_2: Received response for http://www.domain.tld/LAMAILLE/alose.jpg in 55.0ms
>                                                                                      Vary: Accept
> 01-05 15:24:50.439 1073-2390/tld.domain.appname V/unknown:BufferedDiskCache: About to write to disk-cache for key http://www.domain.tld/LAMAILLE/alose.jpg
> 01-05 15:24:50.449 1073-1073/tld.domain.appname D/TEST PROGRESS_2 :: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@408d7170 url: 20 - http://www.domain.tld/LAMAILLE/alose.jpg
> 01-05 15:24:50.449 1073-1073/tld.domain.appname D/TEST_IS_CLOSED_2 :: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@408d7170 url: 20 - http://www.domain.tld/LAMAILLE/alose.jpg
> 01-05 15:24:50.519 1073-2390/tld.domain.appname V/unknown:BufferedDiskCache: Successful disk-cache write for key http://www.domain.tld/LAMAILLE/alose.jpg`
> 192.168.001.001.56737-192.168.001.002.00080: GET /LAMAILLE/alose.jpg HTTP/1.1
> Accept-Encoding: gzip
> 192.168.001.001.33459-192.168.001.002.00080: GET /LAMAILLE/alose.jpg HTTP/1.1
> Accept-Encoding: gzip
and a non well fetched file :
> 01-05 15:24:24.249 1073-1073/tld.domain.appname D/TEST PREFETCH_1: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@4082bda8 url: http://www.domain.tld/LAMAILLE/seiche_sepia_officinalis-2.jpg
> 01-05 15:24:39.039 1073-1073/tld.domain.appname D/TEST PROGRESS_2 :: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@4082bda8 url: 17 - http://www.domain.tld/LAMAILLE/seiche_sepia_officinalis-2.jpg
> 01-05 15:24:39.039 1073-1073/tld.domain.appname D/TEST_IS_CLOSED_2 :: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@4082bda8 url: 17 - http://www.domain.tld/LAMAILLE/seiche_sepia_officinalis-2.jpg
Eric
Eric
I will try to produce clear logs tomorrow - I have stopped them  a little too early for adb logs.
> 01-07 15:59:33.999  6773  6773 D TEST PREFETCH_1: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@407db9b8 url: http://www.domain.tld/LAMAILLE/alose.jpg
> 01-07 15:59:34.109  6773  6786 V unknown:BufferedDiskCache: Did not find image for http://www.domain.tld/LAMAILLE/alose.jpg in staging area
> 01-07 15:59:34.109  6773  6786 V unknown:BufferedDiskCache: Disk cache read for http://www.domain.tld/LAMAILLE/alose.jpg
> 01-07 15:59:34.109  6773  6786 V unknown:BufferedDiskCache: Disk cache miss for http://www.domain.tld/LAMAILLE/alose.jpg
> 01-07 15:59:34.379  6773  6786 V unknown:BufferedDiskCache: About to write to disk-cache for key http://www.domain.tld/LAMAILLE/alose.jpg
> 01-07 15:59:34.389  6773  6773 D TEST PROGRESS_2 : : com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@407db9b8 url: 1 - http://www.domain.tld/LAMAILLE/alose.jpg
> 01-07 15:59:34.389  6773  6773 D TEST_IS_CLOSED_2 : : com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@407db9b8 url: 1 - http://www.domain.tld/LAMAILLE/alose.jpg
> 01-07 15:59:34.609  6773  6786 V unknown:BufferedDiskCache: Successful disk-cache write for key http://www.domain.tld/LAMAILLE/alose.jpg
> 192.168.001.001.55885-192.168.001.002.00080: GET /LAMAILLE/alose.jpg HTTP/1.1
> Accept-Encoding: gzip
> Etag: W/"PSA-aj-4HObs4nmYS"
> X-Content-Type-Options: nosniff
> 01-07 15:59:34.159  6773  6773 D TEST PREFETCH_1: com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@407b8fe8 url: http://www.domain.tld/LAMAILLE/seiche_sepia_officinalis-2.jpg
> 01-07 15:59:39.569  6773  6773 D TEST PROGRESS_2 : : com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@407b8fe8 url: 19 - http://www.domain.tld/LAMAILLE/seiche_sepia_officinalis-2.jpg
> 01-07 15:59:39.569  6773  6773 D TEST_IS_CLOSED_2 : : com.facebook.imagepipeline.datasource.ProducerToDataSourceAdapter@407b8fe8 url: 19 - http://www.domain.tld/LAMAILLE/seiche_sepia_officinalis-2.jpg
Eric
alloc
initBuckets
decodeGif
decodeGif
getExtraMap
and set into DraweeHierarchy.
draweeView.setHierarchy(hierarchy);
and then touch the draweeview, It works just once with no ripple effect(just showing colored rect).
fresco have so many so libs.
/Users/pccrazy/Documents/Android Projects/EvAppShop_2015/app/build/intermediates/exploded-aar/com.facebook.fresco/fbcore/0.8.1/jars/classes.jar(com/facebook/common/references/CloseableReference.class): warning: Cannot find annotation method 'value()' in type 'GuardedBy': class file for javax.annotation.concurrent.GuardedBy not found
/Users/pccrazy/Documents/Android Projects/EvAppShop_2015/app/build/intermediates/exploded-aar/com.facebook.fresco/fbcore/0.8.1/jars/classes.jar(com/facebook/common/references/CloseableReference.class): warning: Cannot find annotation method 'value()' in type 'GuardedBy': class file for javax.annotation.concurrent.GuardedBy not found
/Users/pccrazy/Documents/Android Projects/EvAppShop_2015/app/build/intermediates/exploded-aar/com.facebook.fresco/fbcore/0.8.1/jars/classes.jar(com/facebook/common/references/CloseableReference.class): warning: Cannot find annotation method 'value()' in type 'GuardedBy': class file for javax.annotation.concurrent.GuardedBy not found
/Users/pccrazy/Documents/Android Projects/EvAppShop_2015/app/build/intermediates/exploded-aar/com.facebook.fresco/fbcore/0.8.1/jars/classes.jar(com/facebook/common/references/CloseableReference.class): warning: Cannot find annotation method 'value()' in type 'GuardedBy': class file for javax.annotation.concurrent.GuardedBy not found
Note: Recompile with -Xlint:deprecation for details.
is there any workaround or fix to remove this warning?
@Override
1. Objects have unique id's
android:id="@+id/list_item_simpledraweeview"
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);
...things start to get wonky.
@Override
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at java.util.concurrent.CopyOnWriteArraySet.iterator(CopyOnWriteArraySet.java:305)
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at com.facebook.imagepipeline.producers.NetworkFetchProducer.onResponse(NetworkFetchProducer.java:106)
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
12-16 18:42:45.694 12287-13208/utan.renyuxian E/art:     at java.lang.Thread.run(Thread.java:818)
@Override
1. the view was set as "Crop" and loading animated image(like gif).
1ã€an animated gif fileï¼ˆ320x320ï¼‰
Hi @massimocarli, are there any plans to support `BITMAP_ONLY` for animated gifs in the future? Using the overlay color works but it poses way too many limitations: static background, impossible to use the view as shared element (the gif glitches and becomes squared as soon as the transition starts). Not to mention that even the ripple effect on the background looks horrible since it goes beyond the overlay color rectangle. @erikandre thank you, you're class as usual ;)
Yes, @massimocarli
Thanks @massimocarli.
my code:
@Override
@Override
@Override
@Override
-dontwarn okio.**
-dontwarn javax.annotation.**
Everything is ok with fresco 0.7.0.
but I don't know if it's ok to add this line.
draweeView.setImageURI(uri);
@Override
@Override
https://github.com/tonyjs/FrescoSample
@Override
@Override
> AbstractDraweeController: controller 406a1ac0 0: final_failed @ onFailure: failure: java.lang.IllegalArgumentException
Eric
Should I send you urls at michalgr at facebook dot com ?
Eric
Eric
In my testing, I saw this crash happen only on ICS. Lollipop and Marshmallow seems to be fine though.
Add NativeScript to the list of libraries that use Fresco!
@michalgr You do not get what i mean ,i mean how much is the border of the low and verylow disk space size. For example the if the space under 10M is very low , under 50M is low  so what exactly the border is ?
Ah right, I tested it again and it actually worked, just took a good minute to load ðŸ˜„ perhaps limited by my internet connection. I have my views in a RecyclerView with around a 100 or so items, maybe half with GIFs so perhaps it could be have been a memory issue. This is the app it's used in for reference:- https://play.google.com/store/apps/details?id=dev.moj.pad
My name is SunFusheng.
.setUri(uri)
The foursquare image on left side(looks like profile, toLeftOf text "ë‚´ê°€ë°”ë¡œë°ë‹ˆìŠ¤ë‹¤...") is GIF format image.
.setOldController(draweeView.getController())
draweeView.setHierarchy(hierarchy);
draweeView.setController(controller);
Ioana
Ioana
NTT DOCOMO, INC.
Orange SA
Tagivan II, LLC
Ioana
Ioana
Accept-Encoding: gzip
Accept-Encoding: gzip
Etag: W/"PSA-aj-Bw96unpjyP"
Vary: Accept
X-Content-Type-Options: nosniff
......JFIF.............C.
Greatings,
Eric
Greatings,
Eric
Greatings,
Eric
Eric
> Accept-Encoding: gzip
> Etag: W/"PSA-aj-4HObs4nmYS"
> X-Content-Type-Options: nosniff
......JFIF..
Eric
@doubliekill  you problem resolved? i got the same problem too, the view show placeholderImage after proguard
12-01 16:35:11.777 29714-29714/io.egg.now.alpha V/unknown:AbstractDraweeController: controller 24cccc28 38: final_failed @ onFailure: failure: java.lang.IllegalArgumentException: unknown image format
plz check this porb,, i cant fix this
.setOldController(nextDrawee.getController())
nextDrawee.setController(controller);
Hi Fresco,
I met a problem when I tried to use Fresco 0.6.0 and 0.7.0 in a multi thread concurrency. The phenomenon is, when the concurrent number less than 2, it works properly, but once the concurrent number more than 3(including 3),  only 2 Drawees can be displayed.
``` Java
@Override
@Override
displayDrawee(layout, images[fileIndex].getAbsolutePath());
// display the image file with drawee
private void displayDrawee(RelativeLayout layout, String path) {
When setProgressiveRenderingEnabled(true) is called, it always shows a grey background in the DraweeView. Is it possible to change it into white?
@Override
.path(String.valueOf(R.raw.florian))
.setUri(uri)
Versions that do not match:
https://jcenter.bintray.com/com/facebook/fresco/fresco/maven-metadata.xml
need help...
@Override
@Override
import com.facebook.drawee.controller.ControllerListener;
* Displays an image given by the uri.
* @param uri uri of the image
@Override
* Displays an image given by the uri.
* @param uri           uri of the image
final SimpleDraweeControllerBuilder builder = getControllerBuilder()
.setUri(uri)
((PipelineDraweeControllerBuilder) builder).setControllerListener(this);
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
Hey @balazsbalazs, well the experience was pretty uneventful. It's not the first time I've been using Fresco (I used it for 2 other projects but cannot talk about them because NDA) - I've used it to replace Universal Image Loader. UIL worked great but I switched to Fresco because of the memory management and because of the round views, and in general the pipeline is more flexible. Kudos for the good work! :)
i'm tring to learn Frescoï¼Œit's to hard for me.
Fresco dependency :
As per the documentation the disk cache check in fresco is asynchronous. I was wondering if it is possible to make it a synchronous call.
fresco 0.8.1
maybe two eggs' bug
usage of local resource may produce this exception
@aagnes The issue happened on 4.0+ and very common, you are right the placeholder's resolution ratio is 1242x400 without resize operationï¼Œ after replace big picture with color then reduce a lot...
how to custom for zoom in, zoom out image or drag and drop image in drawee ???
@aagnes
Where is the ZoomableDraweeView? I can not find it in the packages.
Fresco.newDraweeControllerBuilder()
@Override
@Override
draweeView.setImageURI(uri);
@Override
draweeView.setImageURI(uri);
@aagnes can help point me in the right direction for the loading screen portion? I just don't really know when the image "is done loading."
imagePathis a image's path like /data/data/com.coohuaclient/files/img/561e06dde99af1447898564884.mdata.
I am full of doubt why Freco do that.
Hey Balazs, It's ok for me.
Daniel
Hi @rafaelekol, maybe that will be the problem.
device:Mx3
Why this exception occur ? Can any one explain me
draweeView.setImageURI(Resource Uri);
DraweeController ...
draweeView.setController(controller);
@Override
@xiadeye its `com.facebook.imagepipeline.core.ImagePipelineConfig.Builder#setRequestListeners`
And finally the @lambdapioneer solution.
@xiadeye
Eric
- Downlaoded (cached by Fresco) images are loaded slowly when scrolling the list.
@Override
@Override
@Override
Or there are any better way to sulve my stupid question?
ps: I like Glide because it don't need me to do this stuff. lol
url : http://chuantu.biz/t2/18/1447412758x-1376436578.jpg
@Override
@Override
@Nullable Animatable anim) {
@Override
@Override
.setUri(uri)
Device:Genymotion - Sony Xperia S - 4.1.1
Is it a bug?
It is gif,
String path = /storage/emulated/0/Tumblr/https:/33.media.tumblr.com/acca7cf3d29f90dc4426727cf695f4c5/tumblr_nxn5novmR11te1g66o1_500.gif
Just use a custom ImageRequest, like this:
@Override
fake path
Uri uri;
<RelativeLayout
<RelativeLayout
android:id="@+id/image_mint"
android:id="@+id/image_mint"
android:id="@+id/imageviewYoutuneLogo"
android:id="@+id/layoutSeekbar"
<SeekBar
style="@android:style/Widget.Holo.SeekBar"
</RelativeLayout>
<RelativeLayout
android:id="@+id/mint_text"
</RelativeLayout>
</RelativeLayout>
android:background="#EFEFEF" />
thanks @oprisnik for replying , even if I set an aspect ratio for the Drawee view . its not working
More than 90 percent of ooms happen on a specific device,named m2 note(é­…æ—çš„é­…è“note2),it happened  hundreds times every day.
one of the ooms error log
@Override
But it's not working for  this device.
If the image you are trying to load contains alpha this might not work as expected.
the fresco config only once set,in my Application.
public class FrescoConfig {
private FrescoConfigConstants() {
@Override
@IanChilds  @pasqualeanatriello
public class FrescoConfig {
private FrescoConfigConstants() {
@Override
V/unknown:AbstractDraweeController: controller 90e8046 84: onAttach: request needs submit
V/unknown:PipelineDraweeController: controller 90e8046: getDataSource
V/unknown:RequestLoggingListener: time 713135850: onRequestSubmit: {requestId: 155, callerContext: null, isPrefetch: false}
V/unknown:RequestLoggingListener: time 713135850: onProducerFinishWithSuccess: {requestId: 155, producer: BitmapMemoryCacheGetProducer, elapsedTime: 0 ms, extraMap: {cached_value_found=false}}
V/unknown:AbstractDraweeController: controller 90e8046 84: submitRequest: dataSource: 109ad6ac
V/unknown:RequestLoggingListener: time 713135852: onProducerFinishWithSuccess: {requestId: 155, producer: BackgroundThreadHandoffProducer, elapsedTime: 2 ms, extraMap: null}
V/unknown:RequestLoggingListener: time 713135852: onProducerFinishWithSuccess: {requestId: 155, producer: BitmapMemoryCacheProducer, elapsedTime: 0 ms, extraMap: {cached_value_found=false}}
V/unknown:RequestLoggingListener: time 713135857: onRequestCancellation: {requestId: 155, elapsedTime: 7 ms}
V/unknown:AbstractDraweeController: controller 90e8046 84 -> 87: initialize
V/unknown:AbstractDraweeController: controller 90e8046 87: onDetach
V/unknown:AbstractDraweeController: controller 90e8046 87: setHierarchy: null
V/unknown:AbstractDraweeController: controller 90e8046 87: onAttach: request needs submit
V/unknown:PipelineDraweeController: controller 90e8046: getDataSource
V/unknown:RequestLoggingListener: time 713135861: onRequestSubmit: {requestId: 156, callerContext: null, isPrefetch: false}
V/unknown:AbstractDraweeController: controller 90e8046 87: submitRequest: dataSource: 345dff75
V/unknown:RequestLoggingListener: time 713135863: onProducerFinishWithSuccess: {requestId: 156, producer: BackgroundThreadHandoffProducer, elapsedTime: 1 ms, extraMap: null}
@ongakuer doesn't help. As you can see it is just not there when you search for it on the JCenter website https://bintray.com/tyronen/maven/com.facebook.fresco%3Afresco/view
When we use drawee to show picture
private void testDrawee(ImageItem testItem) {
AbstractDraweeController controller = Fresco.newDraweeControllerBuilder()
@Override
When I configure fresco like thisï¼Œthe images in listview are Flickering on lollipopï¼Œ
Hei,
Tested on genymotion, and galaxy s6
splits {
abi {
include 'armeabi-v7a'
@massimocarli The dependency that is causing me issues is
@Override
Can you provide some sample for MultiDraweeHolder. its helpful for me..
<RelativeLayout
fresco:failureImage="@color/dark_gray"
</RelativeLayout>
//Fresco initialization
è¿™ä¸ªæ˜Žæ˜¾æ˜¯ä½ å›¾ç‰‡oomäº†ã€‚åŠ ä¸‹ç¡¬ä»¶åŠ é€Ÿï¼Œè¿˜ä¸è¡Œçš„è¯è¯•ä¸€ä¸‹subsamplingæˆ–è€…å›½äººå†™çš„ä¸€ä¸ªåŠ è½½å¤§å›¾çš„æ¡†æž¶
Although i found use  fresco:placeholderImage property not lead to error
11-06 18:56:30.306 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]     in call to NewGlobalRef
11-06 18:56:30.306 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]     from android.graphics.Bitmap android.graphics.BitmapFactory.nativeDecodeStream(java.io.InputStream, byte[], android.graphics.Rect, android.graphics.BitmapFactory$Options)
11-06 18:56:30.306 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65] "Thread-50900" prio=5 tid=76 Runnable
11-06 18:56:30.306 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   | group="main" sCount=0 dsCount=0 obj=0x131b36e0 self=0x94602000
11-06 18:56:30.306 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   | sysTid=19959 nice=10 cgrp=apps/bg_non_interactive sched=0/0 handle=0x94611800
11-06 18:56:30.306 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   | state=R schedstat=( 0 0 0 ) utm=1 stm=0 core=2 HZ=100
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   | stack=0x93fea000-0x93fec000 stackSize=1036KB
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   | held mutexes= "mutator lock"(shared held)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at android.graphics.BitmapFactory.nativeDecodeStream(Native method)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at android.graphics.BitmapFactory.decodeStreamInternal(BitmapFactory.java:635)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:611)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.platform.ArtDecoder.getDecodeOptionsForStream(ArtDecoder.java:178)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.platform.ArtDecoder.decodeFromEncodedImage(ArtDecoder.java:78)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.decoder.ImageDecoder.decodeStaticImage(ImageDecoder.java:127)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.decoder.ImageDecoder.decodeImage(ImageDecoder.java:94)
11-06 18:56:30.311 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.producers.DecodeProducer$ProgressiveDecoder.doDecode(DecodeProducer.java:188)
11-06 18:56:30.326 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.producers.DecodeProducer$ProgressiveDecoder.access$200(DecodeProducer.java:96)
11-06 18:56:30.326 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.producers.DecodeProducer$ProgressiveDecoder$1.run(DecodeProducer.java:128)
11-06 18:56:30.326 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.producers.JobScheduler.doJob(JobScheduler.java:207)
11-06 18:56:30.326 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.producers.JobScheduler.access$000(JobScheduler.java:27)
11-06 18:56:30.326 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.producers.JobScheduler$1.run(JobScheduler.java:78)
11-06 18:56:30.326 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
11-06 18:56:30.331 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
11-06 18:56:30.331 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at com.facebook.imagepipeline.core.PriorityThreadFactory$1.run(PriorityThreadFactory.java:43)
11-06 18:56:30.331 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]   at java.lang.Thread.run(Thread.java:818)
11-06 18:56:30.331 19657-19959/com.coohuaclient A/art: art/runtime/check_jni.cc:65]
@Override
private PhotoInfo info;
private RoteListener listener;
@Override
@Override
@Override
https://github.com/Redgram/redgram-for-reddit/blob/dev/Redgram/app/src/main/java/com/matie/redgram/ui/common/views/widgets/postlist/dynamic/PostItemImageView.java#L127
ç±»ä¼¼çš„é—®é¢˜ æˆ‘ä¹Ÿè§åˆ°ä¸å°‘äº†ï¼Œfresoçš„å¤§ç¥žä»¬ï¼Œä½ ä»¬ä¸ºå•¥ä¸è¯¦ç»†å¾—ç»™ä¸€å¥—è§£å†³æ–¹æ¡ˆå‘¢ï¼Ÿ
éžå¸¸æ„Ÿè°¢ä½ çš„å›žå¤ï¼Œçœ‹åˆ°æé†’ä¹‹åŽï¼Œæˆ‘ç«‹åˆ»ç”¨ä½ çš„ä»£ç è¯•äº†ä¸€ä¸‹ï¼Œ
ä¸åŠ å…¥è¿™ä¸ªåˆ¤æ–­ è¿˜æ˜¯æŠ¥é”™
è¿˜æœ‰å°±æ˜¯  æˆ‘å¾ˆå¥½å¥‡ä½ ä»¬ç”¨çš„æ˜¯ä»€ä¹ˆç‰ˆæœ¬çš„fresco
çŽ°åœ¨è¿™ä¸ªé—®é¢˜è§£å†³äº†ï¼Œå¤šè°¢ã€‚@aagnes
@Override
@Override
@Override
@Override
CustomImageSpan imageSpan = new CustomImageSpan(d,ImageSpan.ALIGN_BASELINE);
but still GIF is loading very slow
.setOldController(draweeView.getController())
draweeView.setController(controller);
When I load a jpeg picture which size is bigger than 4M, fresco throw a exception named PoolSizeViolationException.
Thanks for you reply @droidekas
Look the pic as follows, do I use the fresco in a wrong way?
mController = Fresco.newDraweeControllerBuilder()
@Override
@Override
holder.title.setText(tuanItem.mTitle);
è™½ç„¶ä¸æ˜Žç™½ä½ ä¸ºä»€ä¹ˆä¸€è¾¹è¯´ä½¿ç”¨cloneæ˜¯é”™è¯¯çš„ï¼Œä¸€è¾¹åˆå‘Šè¯‰æˆ‘ä½¿ç”¨cloneä¹‹åŽåº”è¯¥æ€Žä¹ˆåšï¼Œä½†æ˜¯è¿˜æ˜¯æ„Ÿè°¢ä½ çš„å›žå¤ã€‚
By the way, when I rollback to Fresco 0.7.0, everything is OK.
Hellloooo....
> Could not download imagepipeline.aar (com.facebook.fresco:imagepipeline:0.8.0)
@Override
@Override
@massimocarli
this cose just release refrence to image,  Can someone help me pleaseï¼Ÿ
@michalgr thanks!
.setOldController(holer.mImage.getController())
@Override
else
on eclipse
XXX/libs/drawee-v0.8.0.jar
XXX/libs/fresco-v0.8.0.jar
XXX/libs/okio-1.3.0.jar
XXX/libs/armeabi/libbitmaps.so
XXX/libs/armeabi/libgifimage.so
XXX/libs/armeabi/libimagepipeline.so
XXX/libs/armeabi/libmemchunk.so
XXX/libs/armeabi/libwebp.so
XXX/libs/armeabi/libwebpimage.so
Gradle:
#facebook fresco
-dontwarn okio.**
-dontwarn javax.annotation.**
<SimpleDraweeView
android:id="@+id/drawee_basic_circle"
<SimpleDraweeView
android:id="@+id/drawee_basic_circle"
<SimpleDraweeView
android:id="@+id/drawee_basic_circle"
I have found that this maybe caused by the CardView.
Fatal Exception: java.lang.IllegalStateException: Queue full
It sometimes prevents my gif from loading(cellular data cases),
Moto G(1st gen) -
Yes I am excluding nineoldandroids.But since I am supporting only api 14 above.Do I still need that dependency?
at com.coohuaclient.ui.activity.LockScreenNewActivity$AdvPageAdapter.getItemView(SourceFile:839)
at com.coohuaclient.ui.activity.LockScreenNewActivity$AdvPageAdapter.instantiateItem(SourceFile:814)
at com.coohuaclient.ui.customview.DrawerLayout.onMeasure(SourceFile:729)
at com.coohuaclient.ui.activity.LockScreenNewActivity$AdvPageAdapter.getItemView(SourceFile:839)
at com.coohuaclient.ui.activity.LockScreenNewActivity$AdvPageAdapter.instantiateItem(SourceFile:814)
at com.coohuaclient.ui.customview.DrawerLayout.onMeasure(SourceFile:729)
at com.coohuaclient.ui.activity.LockScreenNewActivity$AdvPageAdapter.getItemView(SourceFile:839)
at com.coohuaclient.ui.activity.LockScreenNewActivity$AdvPageAdapter.instantiateItem(SourceFile:814)
at com.coohuaclient.ui.customview.DrawerLayout.onMeasure(SourceFile:729)
In subclass of Application, I will judge the process name , if it equals  com.coohuaclient,I will run Fresco.initialize or I won't;
@Override
![black-image](https://cloud.githubusercontent.com/assets/771989/10568637/7bb6d700-764d-11e5-998a-82d1ea9c08eb.png)
Helo.
<HorizontalScrollView
@djuranm
@Override
these codes do work for me..
DraweeHierarchy handlers all the layers of drawble in DraweeView.
@Override
OR
Picasso.with(mContext)
Now, I wanted to use Fresco instead of Picasso beause I use Fresco in other parts, do not want to import Picasso with the same function.
@massimocarli Thanksï¼Œ it works well.
@massimocarli  Thanks for replying.
throws exception on last line:
java.lang.IllegalArgumentException
I encounter this exception because I want to display all my photos in a ListView.
and the exceptions are:
when I build fresco ,always fail. error log:
@aagnes  I need to be stored or forwarded pictures
BinaryResource resource = Fresco.getImagePipelineFactory()
@Override
@Override
@binqiangsun
I'm using fresco in my project.But now I have a probleam.
@Override
switch (requestCode) {
@Override
@Override
Yes @aagnes I used Glide previously and I got the bitmap successfully
@aagnes After clean and rebuild project I debugged it and notice onFailureImpl is getting called
@aagnes Please see the issue
No error log no exception is shown that really surprised me as I told when I debug the code then it is executing but when I run it is not executing `onNewResultImpl` or `onFailureImpl` put a toast and a log inside both methods. I also checked if uri which I am getting is incorrect but it is working I am checking it by setting that uri on that SimpleDraweeView. [Question on stackoverflow](http://stackoverflow.com/questions/32949914/try-to-fetch-bitmap-from-uri-using-fresco)
10-01 12:01:14.062      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 5362c6e8 0: onAttach: request needs submit
10-01 12:01:14.082      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 5379f294 null -> 1: initialize
10-01 12:01:14.082      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 5379f294 1 -> 2: initialize
10-01 12:01:14.086      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 5379f294 2: setHierarchy: null
10-01 12:01:14.102      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53c7db38 null -> 3: initialize
10-01 12:01:14.106      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53c7db38 3 -> 4: initialize
10-01 12:01:14.106      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53c7db38 4: setHierarchy: null
10-01 12:01:14.106      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53c7db38 4: onAttach: request needs submit
10-01 12:01:14.110      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53cae570 null -> 5: initialize
10-01 12:01:14.110      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53cae570 5 -> 6: initialize
10-01 12:01:14.110      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53cae570 6: setHierarchy: null
10-01 12:01:14.110      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53cae570 6: onAttach: request needs submit
10-01 12:01:14.110      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 53cae570 6: submitRequest: dataSource: 537e53cc
10-01 12:01:14.122      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 537ed9cc null -> 7: initialize
10-01 12:01:14.122      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 537ed9cc 7 -> 8: initialize
10-01 12:01:14.122      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 537ed9cc 8: setHierarchy: null
10-01 12:01:14.122      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 537ed9cc 8: onAttach: request needs submit
10-01 12:01:14.134      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 537ed9cc 8: submitRequest: dataSource: 537f4958
10-01 12:01:14.362     736-1109/  V/unknown:BufferedDiskCacheï¹• Did not find image for http://url/images/car-images/320x224/Hyundai/Hyundai-i20-Active/Phantom-Black.jpg in staging area
10-01 12:01:14.362     736-1109/  V/unknown:BufferedDiskCacheï¹• Disk cache read for http://url/images/car-images/320x224/Hyundai/Hyundai-i20-Active/Phantom-Black.jpg
10-01 12:01:14.366     736-1109/  V/unknown:BufferedDiskCacheï¹• Found entry in disk cache for http://url/images/car-images/320x224/Hyundai/Hyundai-i20-Active/Phantom-Black.jpg
10-01 12:01:14.398     736-1109/  V/unknown:BufferedDiskCacheï¹• Successful read from disk cache for http://url/images/car-images/320x224/Hyundai/Hyundai-i20-Active/Phantom-Black.jpg
10-01 12:01:14.774      736-736/  V/unknown:AbstractDraweeControllerï¹• controller 537ed9cc 8: set_final_result @ onNewResult: image: CloseableReference 5356f440
@aagnes  Did you find the cause for the issue?
We are looking for a new image loading library to integrate into our app at **Tumblr**! I have been doing some tests with image loading with Fresco and have found some confusing numbers. When scrolling on a screen with posts of photo images, it seems like there are periodical "spikes" in the amount of time it takes to get the call to `onFinalImageSet()`. Do you know what could be causing these spikes in time taken?
@Override
@Override
I have one special case.
This is a fix for the following race condition:
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
.setOldController(draweeView.getController())
@Override
draweeView.setController(controller);
java.lang.IllegalStateException
How to splits dependencies library *.so by abi. eg:i want armeabi,armeabi-v7a *.so packaged in apk; how can i config build.gradleï»¿
my code:
@ixiaoluo  I have exactly this problem, did you find any solution? I also happen who can help me   SimpleDraweeView.getHierarchy()
Hi,Fresco.
Hi Fresco,
my code is
Uri uri = imageModel.getImgPath();
>   @Override
01-19 12:41:18.128  19787-24125/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307756: onProducerFinishWithFailure: {requestId: 14, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 193704004 Free size = 0 Request size = 51916800}
01-19 12:41:18.128  19787-24125/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307756: onRequestFailure: {requestId: 14, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 193704004 Free size = 0 Request size = 51916800}
01-19 12:41:18.130  19787-24125/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307758: onProducerFinishWithFailure: {requestId: 16, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 193704004 Free size = 0 Request size = 14745600}
01-19 12:41:18.130  19787-24125/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307758: onRequestFailure: {requestId: 16, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 193704004 Free size = 0 Request size = 14745600}
01-19 12:41:18.176  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307804: onProducerFinishWithFailure: {requestId: 23, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 6998400}
01-19 12:41:18.176  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307804: onRequestFailure: {requestId: 23, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 6998400}
01-19 12:41:18.179  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307807: onProducerFinishWithFailure: {requestId: 25, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 1658880}
01-19 12:41:18.179  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307807: onRequestFailure: {requestId: 25, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 1658880}
01-19 12:41:18.184  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307812: onProducerFinishWithFailure: {requestId: 26, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 1658880}
01-19 12:41:18.184  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307813: onRequestFailure: {requestId: 26, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 1658880}
01-19 12:41:18.185  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307814: onProducerFinishWithFailure: {requestId: 27, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.185  19787-24121/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259307814: onRequestFailure: {requestId: 27, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.936  19787-19854/com.seedsocial.seedgirl E/libGameXtendï¹• LUCID ERROR in reading /sys/devices/virtual/thermal/thermal_zone0/temp
01-19 12:41:18.970  19787-24125/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259308598: onProducerFinishWithFailure: {requestId: 28, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.970  19787-24125/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259308598: onRequestFailure: {requestId: 28, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.982  19787-24122/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259308610: onProducerFinishWithFailure: {requestId: 30, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.982  19787-24122/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259308610: onRequestFailure: {requestId: 30, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.988  19787-24127/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259308617: onProducerFinishWithFailure: {requestId: 29, stage: DecodeProducer, elapsedTime: -1 ms, extraMap: null, throwable: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 201326592 Used size = 200877284 Free size = 0 Request size = 33177600}
01-19 12:41:18.988  19787-24127/com.seedsocial.seedgirl W/unknown:RequestLoggingListenerï¹• time 259308617: onRequestFailure: {requestId: 29, elapsedTime: -1 ms, throwable: com.facebook.imagepipeline.memory
I am code :
@tyronen
@tqlmorepassion @helengray @ChenSiLiang and all the others.
@Override
@Override
@Override
public void setAlpha(int i) {
@Override
@Override
@Override
hmm that is strange. I did add the ndk to my PATH. I'll look into this again. thank you for the quick response.
@Override
@Override
@Override
@Override
DraweeController controller = controllerBuilder.build();
Fresco:0.7.0
android version: 5.0 and 4.4.2
@Override
public MyDrawee (Context context) {
public MyDrawee (Context context, AttributeSet attrs) {
public MyDrawee (Context context, AttributeSet attrs, int defStyle) {
@Override
MyDrawee img = findViewById(R.id.my_image);
you are right, there is a typo in first two constructors , I used `super(....)` in my actual code.
problem:
the image always be fuzzyã€‚
code:
That's the question.All of fresco  ScaleType: center, centerCrop,focusCrop...resize the image,maybe result in fuzzy.
get from fresco: 1240x1754
Drawable _emergency_contact.png: http://i.imgur.com/8tzBJF6.png
limingwei234@163.com
To: facebook/fresco
CC: limingwei234
09-08 14:37:45.457      307-307/? I/DEBUGï¹• *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
09-08 14:37:45.457      307-307/? I/DEBUGï¹• pid: 4589, tid: 32663, name: query-pool-1-th  >>> com.zing.zalo <<<
09-08 14:37:45.927      307-307/? I/DEBUGï¹• 7f5a9ad0 aba08f7c bcbcbab5 7c94a6b2 17264265
I don't use Fresco, instead apply it's technique into my own library. In Android 4.4, I'm using both of 2 options inBitmap and inPurgealble at the same time when decoding bitmap via method decodeByteArray. It causes that crash in native framework. The strange is that crash isn't showed up when using method decodeFileDescriptor.
the fresco is very nice!
09-08 16:01:10.757    1112-1178/com.qyer.android.plan E/artï¹• Throwing OutOfMemoryError "Failed to allocate a 28 byte allocation with 0 free bytes and 3GB until OOM" (recursive case)
09-08 16:01:10.887    1112-1112/com.qyer.android.plan E/artï¹• Throwing OutOfMemoryError "Failed to allocate a 28 byte allocation with 0 free bytes and 3GB until OOM" (recursive case)
09-08 16:01:11.327    1112-1163/com.qyer.android.plan E/artï¹• Throwing OutOfMemoryError "Failed to allocate a 28 byte allocation with 0 free bytes and 3GB until OOM" (recursive case)
09-08 16:01:11.937    1112-1163/com.qyer.android.plan A/artï¹• art/runtime/runtime.cc:287]   at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:197)
* é€šè¿‡å›¾ç‰‡è·¯å¾„è®¾ç½®é»˜è®¤é€‰æ‹©
* è®¾ç½®æ•°æ®é›†
ViewHolde holde;
class ViewHolde {
SimpleDraweeView image;
@tyronen
jumboMode = true
make: *** No rule to make target `../../../../nativedeps/merge/giflib/dgif_lib.c', needed by `fresco/imagepipeline/build/tmp/ndk_build_gifimage/local/armeabi-v7a/objs/gif/dgif_lib.o'.  Stop.
[armeabi-v7a] Compile++ thumb: gifimage <= gif.cpp
make: *** [fresco/imagepipeline/build/tmp/ndk_build_gifimage/local/armeabi-v7a/objs/gifimage/gif.o] Error 1
- unpackGiflib
- unpackLibjpeg
- unpackLibpng
- unpackLibwebp
to yewrajesh: but i have to use libs. how to i avoid this error ?
Greatings,
Eric
I'm trying the fresco comparison app with the latest V0.7. But it seems that some bad changed make it  wrong. It's OK in fresco V0.6. Reproduce process:
1. Select Fresco--> Local
.setOldController(mSimpleDraweeView.getController())
09-06 18:43:45.566    8097-8097/shawnone.com.frescotest V/unknown:AbstractDraweeControllerï¹• controller 41eaa910 0: final_failed @ onFailure: failure: com.facebook.imagepipeline.memory.BasePool$PoolSizeViolationException: Pool hard cap violation? Hard cap = 8388608 Used size = 0 Free size = 0 Request size = 18155830
Shawnone
Fresco save bitmaps in the Android java VM heap on the Lollipop and upper. But it seems that Lollipop memory strategy dose not perform well on these devices. Facebook app runs on my Samsung Note4 would easily take almost 170M java heap memory!
** MEMINFO in pid 2941 [com.facebook.katana] **
Pss  Private  Private  Swapped     Heap     Heap     Heap
Native Heap        0        0        0        0    96228    96228    51227
Ashmem      128      128        0        0
Other dev   111553   102592       12        0
code mmap     4804        0     2560        0
Other mmap     1233        4      776        0
Graphics    49920    49920        0        0
Unknown    80796    80624      152     2380
Objects
PAGECACHE_OVERFLOW:     4036          MALLOC_SIZE:       62
DATABASES
pgsz     dbsz   Lookaside(b)          cache  Dbname
zip:/data/app/com.facebook.katana-1/base.apk:/assets/fonts/Roboto-Bold.ttf:
zip:/data/app/com.facebook.katana-1/base.apk:/assets/fonts/Roboto-Medium.ttf: 114K
Try the following codes:
@Override
final Uri uri2 = Uri.parse("http://pic7.qiyipic.com/image/20150213/b2/aa/a_100010483_m_601_284_160.jpg");
@Override
Sometimes, we need to set the placeHolder in DraweeHierarchy. But if
place holder image in code.
02-24 08:22:44.467 22640-22649/top.ovo.gundam E/StrictMode: A resource was acquired at attached stack trace but never released. See java.io.Closeable for information on avoiding resource leaks.
```java
```java
08-28 17:58:53.590  12766-12766/com.namshi.android.debug V/unknown:AbstractDraweeControllerï¹• controller 43fdfaa0 null -> 5: initialize
08-28 17:58:53.645  12766-12766/com.namshi.android.debug V/unknown:AbstractDraweeControllerï¹• controller 42904b78 null -> 6: initialize
08-28 18:00:23.885  12766-12766/com.namshi.android.debug V/unknown:AbstractDraweeControllerï¹• controller 42904b78 6 -> 7: initialize
08-28 18:00:23.885  12766-12766/com.namshi.android.debug V/unknown:AbstractDraweeControllerï¹• controller 42904b78 7: setHierarchy: null
08-28 18:00:23.890  12766-12766/com.namshi.android.debug V/unknown:AbstractDraweeControllerï¹• controller 42904b78 7: onAttach: request needs submit
createBitmap
decodeGif
decodeGif
getExtraMap
E/AndroidRuntime( 8667):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
buildTypes {
http://frescolib.org/docs/gotchas.html#don-t-re-use-draweehierarchies
@Override
My app with fresco: 5.7 MB
Martin
Hey @mheras and @tbruceyu,
@tyronen
We are transitioning from Picasso to Fresco, but the app is huge and we are still working on it.
http://www.thestar.com.my/~/media/Images/TSOL/Photos-Gallery/Nation/2015/08/26/Bersih 4.ashx?crop=1&w=460&h=345&
It does not work even I replace the space "Bersih 4" to "Bersih%204"
I already said It DOES NOT work even I replace the space "Bersih 4" to "Bersih%204"
I want to reproduce the bug but http://www.thestar.com.my/~/media/Images/TSOL/Photos-Gallery/Nation/2015/08/26/Bersih%204.ashx/?crop=1&w=460&h=345& worked for me. This is with %20
private Context context;
@Override
@Override
@Override
System.setProperty("log.tag.AbstractDraweeController", "VERBOSE");
System.setProperty("log.tag.LoggingListener", "VERBOSE");
@frazieje How did you go about resolving this issue?
@botondbutuza sorry for the delayed response when you asked how I resolved. Unfortunately this issue still exists for me as well.
@botondbutuza another update:
Questions:
Tyrone, can you point me in the right direction for determining why the bitmaps gets are getting evicted?
mavenCentral() to repositories.
file uri:
the file is gone when I check it in that folder!so weird...so I decide to use an alternate path, the remote one...since Fresco has cache  itself.
and the error
E/unknown:ï¹• Error loading 8
http://www.yccy.cc/xueermian/source/03-1.jpg
@plamenko And when I use Fresco,I found the warning as below.
**Note: It's mostly in Kotlin, however I'm fairly sure this isn't the problem since most of the interactions with Fresco are done through Java**
```kotlin
val _imageView: SimpleDraweeView = itemView.findViewById(R.id.imageview)
```java
Extra Information: I'm on fresco 1.5.0 and I've tried this out on my Nexus 6 and an S4. On the Nexus 6, the images load but upon scrolling I get the error above and the S4 crashes upon boot-up even though the pictures are resized to 100x100.
And it just happen with a gif image, not for png  its not working if the image is a GIF
I found a bug on Fresco 0.6.1.
Example: http://ddragon.leagueoflegends.com/cdn/img/champion/splash/Akali_5.jpg
@Override
@Override
I test fresco on **Genymotion** device:
- _code_
//            hierarchy.setRoundingParams(roundingParams);
When I use Fresco in my app,I think the size of Fresco is too big.It support x86,x86-64,armeabi
,armeabi-v7a and so on.I only want to develop the size of app is 200K,It too big.(My English is poor.)
Why can't support PNG images to resize?    In fact PNG should be adapted.
@Override
It is a bug?
![image](https://cloud.githubusercontent.com/assets/6950107/9347694/af2e417c-465f-11e5-8302-86e677ae15f9.png)
Can you please clarify how fresco will behave inside one of the new percent layouts like PercentFrameLayout ? (http://developer.android.com/reference/android/support/percent/PercentFrameLayout.html)
I didn't give it a try because a successful try on the Android doesn't say much due the ecosystem fragmentation, I'm guessing there might be some issue because of your statements about the drawee width and height:
So I feel like there is a some knowledge needed to figure out all the test cases here and if there is a problem I hope you guys will update the "gotachs" section quickly..
On the other hand, I used fresco in the past with a LinearLayout weight (0dp) and seems to work great so maybe I'm worried about nothing...
and yeah I mean Animated in case of smooth.
@vipulasri  where is  "double tap zoom feature"
@vipulasri Did you resolved the double tap not smooth problem? I still don't know how to eliminate shake problem when double tap zoom image? it seems must rewrite onTouch to  handle the touch event
code:
drawee.setImageURI(Uri.fromFile(file));
This issue may be connected to:
case GIF:
}catch (Exception e){
@Override
throw Throwables.propagate(e);
@SuppressLint("NewApi")
encodedBytes,
This is likely the same issue as mentioned at:
Instantiation code:
@Override
I request the image from a webservice and once the image is loaded, I use the `BaseControllerListener.onFinalImageSet()` to make the DraweeView visible. Although the entire callback occurs,the image visiblity does not change
Inface
I also have this problem.But I found that phenomenon, when I use Fresco load local file and this file encoded with MD5, like this:"/mnt/sdcard/xxx/7di9tw8yj66op0wp12x61lmt4" . This happened in some special mobile ,like HUAWEI. I tried some method ,such as put so into armeabi ,or use "SoLoaderShim.loadLibrary" and so on ,but it didn't solve this problem .When I change MD5 encode to use hashcode or not encode ,this phenomenon didn't happened.But I don't know weather really solve this problem.
By similar I mean same Uri.
Even though Fregment is detroy. GC is not occur.
init Fresco
view.setController(draweeController);
occur OOM.
@DASAR yes, that situation also happened in all my Lolliopop version cellphones.
@michalgr there're no more than 8 different sizes, from screen wide to 100x100
``` Java
Logcat :
wait_for_sigstope = 19
wait_for_sigstope = 11
@Override
@Override
I just call the Fresco.initialize() ,the other is the default setting,I'd like to get the cache file, and let the user can choose whether to remove it, how to acquire the local cache file?
Thanks Mate
Adapter:
@Override
08-11 13:09:06.754    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 422eb5f8 32: onDetach
08-11 13:09:06.754    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 42f6a088 34 -> 44: initialize
08-11 13:09:06.754    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 42f6a088 44: onAttach: request needs submit
08-11 13:09:06.754    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 42f6a088 44: submitRequest: dataSource: 425d1678
08-11 13:09:06.764    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4311a9a0 33 -> 45: initialize
08-11 13:09:06.764    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4311a9a0 45: setHierarchy: null
08-11 13:09:06.764    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4311a9a0 45: onAttach: request needs submit
08-11 13:09:06.774    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 422eb5f8 32: release: image: CloseableReference 42ee7738
08-11 13:09:06.774    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 422eb5f8 32 -> 46: initialize
08-11 13:09:06.774    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 422eb5f8 46: setHierarchy: null
08-11 13:09:06.774    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 422eb5f8 46: onAttach: request needs submit
08-11 13:09:06.784    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 422eb5f8 46: submitRequest: dataSource: 423b19d8
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4273c028 31 -> 47: initialize
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4273c028 47: setHierarchy: null
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4273c028 47: onAttach: request needs submit
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 4273c028 47: submitRequest: dataSource: 434cf250
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 424521a8 30 -> 48: initialize
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 424521a8 48: setHierarchy: null
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 424521a8 48: onAttach: request needs submit
08-11 13:09:06.894    5642-5642/? V/unknown:AbstractDraweeControllerï¹• controller 424521a8 48: submitRequest: dataSource: 434caeb0
08-11 13:43:11.346    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42971640 24: onTouchEvent MotionEvent { action=ACTION_DOWN, id[0]=0, x[0]=162.94543, y[0]=70.404175, toolType[0]=TOOL_TYPE_FINGER, buttonState=0, metaState=0, flags=0x0, edgeFlags=0x0, pointerCount=1, historySize=0, eventTime=92779718, downTime=92779718, deviceId=3, source=0x1002 }
08-11 13:43:11.466    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 4401c9a0 null -> 29: initialize
08-11 13:43:11.466    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 4401c9a0 29: onAttach: request needs submit
08-11 13:43:11.476    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 null -> 30: initialize
08-11 13:43:11.476    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 30: onAttach: request needs submit
08-11 13:43:11.476    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 30: submitRequest: dataSource: 43f699d8
08-11 13:43:11.486    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 null -> 31: initialize
08-11 13:43:11.486    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 31: onAttach: request needs submit
08-11 13:43:11.486    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 31: submitRequest: dataSource: 43e84c38
08-11 13:43:11.856    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d123c0 18: onDetach
08-11 13:43:11.856    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 22: onDetach
08-11 13:43:11.856    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 22: release: image: CloseableReference 42f042a0
08-11 13:43:11.856    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 22 -> 32: initialize
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 32: setHierarchy: null
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 32: onAttach: request needs submit
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 32: submitRequest: dataSource: 435a0980
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 21: release: image: CloseableReference 4416df90
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 21 -> 33: initialize
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 33: setHierarchy: null
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 33: onAttach: request needs submit
08-11 13:43:11.866    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 33: submitRequest: dataSource: 42fc6d68
08-11 13:43:11.876    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 426c5f80 20: release: image: CloseableReference 43e14e88
08-11 13:43:11.876    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 426c5f80 20 -> 34: initialize
08-11 13:43:11.876    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 426c5f80 34: setHierarchy: null
08-11 13:43:11.876    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 426c5f80 34: onAttach: request needs submit
08-11 13:43:11.876    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 426c5f80 34: submitRequest: dataSource: 42c9b260
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d123c0 18: release: image: CloseableReference 43fa8150
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 433d2670 17: release: image: CloseableReference 42fe2b40
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42fb85e8 23: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42971640 24: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43378eb0 25: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 429dd048 27: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 426587a0 28: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 4401c9a0 29: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 30: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 31: onDetach
08-11 13:43:12.367    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 31: release: image: CloseableReference 4379b978
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 31 -> 35: initialize
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 35: setHierarchy: null
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 35: onAttach: request needs submit
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 35: submitRequest: dataSource: 43d0f330
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 30 -> 36: initialize
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 36: setHierarchy: null
08-11 13:43:12.377    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43f8ff58 36: onAttach: request needs submit
08-11 14:03:57.015    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 141 -> 156: initialize
08-11 14:03:57.015    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 156: setHierarchy: null
08-11 14:03:57.015    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 156: onAttach: request needs submit
08-11 14:03:57.015    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 156: submitRequest: dataSource: 42714320
08-11 14:03:57.015    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 156: set_final_result @ onNewResult: image: CloseableReference 42eaf6f0
08-11 14:03:57.015    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 156: onDetach
08-11 14:03:57.726    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43200b60 156: release: image: CloseableReference 42eaf6f0
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43378eb0 153: onDetach
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 429919b0 154: onDetach
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 155: onDetach
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 155: release: image: CloseableReference 42cdb408
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 155 -> 157: initialize
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 157: setHierarchy: null
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 157: onAttach: request needs submit
08-11 14:03:59.678    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 157: submitRequest: dataSource: 425b4530
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d90fc0 142 -> 158: initialize
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d90fc0 158: setHierarchy: null
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d90fc0 158: onAttach: request needs submit
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d90fc0 158: submitRequest: dataSource: 4259e2f0
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 143 -> 159: initialize
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 159: setHierarchy: null
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 159: onAttach: request needs submit
08-11 14:03:59.688    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43ee16f0 159: submitRequest: dataSource: 425621a8
08-11 14:03:59.978    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 43378eb0 153: release: image: CloseableReference 42eaf6f0
08-11 14:04:00.248    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 42d90fc0 158: set_final_result @ onNewResult: image: CloseableReference 428ea258
08-11 14:04:00.248    8739-8739/? V/unknown:AbstractDraweeControllerï¹• controller 430dff80 157: set_final_result @ onNewResult: image: CloseableReference 428e4918
In fact,when it comes to local url issues, fresco  works badly.
<RelativeLayout
android:id="@+id/poi_category_image"
</RelativeLayout>
- The way i am using fresco in my library :
compile 'com.mylibrary:mylibrary:1.0@aar'
But , I want to let developers who will use my library to depend only on the local mylibrary.aar  without adding its dependencies to their apps.
java.lang.IllegalArgumentException
Yeah it does slow down. I imported fresco as aar
UNEXPECTED TOP-LEVEL EXCEPTION:
2XVS{40M0@T%(55Q)GX1SQT.jpg
Log:
Any thoughts on how this behaviour could be achieved?
Tnx.
Any ideas what could be causing this?
@Override
@Override
Fresco.newDraweeControllerBuilder()
@Override
@Override
@Override
@Override
@Override
Bitmap.Config.ARGB_8888);
Log:
07-24 16:18:53.415  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.435  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.455  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.455  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.475  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.475  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.485  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.485  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.495  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.495  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.515  28053-28213/com.guangquaner E/JHEADï¹• can't open '/storage/emulated/0/dcim/camera/20150724_160951.jpg'
07-24 16:18:53.515  28053-28212/com.guangquaner E/JHEADï¹• can't open '/storage/emulated/0/dcim/camera/20150724_160951(0).jpg'
07-24 16:18:53.515  28053-28213/com.guangquaner E/JHEADï¹• can't open '/storage/emulated/0/dcim/camera/20150724_160952.jpg'
07-24 16:18:53.515  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.515  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.535  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.535  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.545  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.545  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.565  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.565  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.585  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.585  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.595  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.595  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
07-24 16:18:53.615  28053-28053/com.guangquaner W/Adreno-GSLï¹• <gsl_ldd_control:414>: ioctl fd 63 code 0xc0140933 (IOCTL_KGSL_TIMESTAMP_EVENT) failed: errno 22 Invalid argument
07-24 16:18:53.615  28053-28053/com.guangquaner W/Adreno-EGLï¹• <qeglDrvAPI_eglSwapBuffers:3796>: EGL_BAD_SURFACE
Log:
java.lang.IllegalArgumentException
@michalgr .My code worked in v0.5.3,when i changed the verison to 0.6.0,this bug happend.
In more than 5.0 of the use of fresco will be very card or even oom why?
https://speedys3-hb-dev.s3.amazonaws.com/20150724/afcjcrkqt82aq0eod_umaa_0qxdofskqxwsbqkigql8ga.mp4
Regardless of the value of fresco:placeholderImageScaleType, the placeholder scaling appears to be fitXY (i.e., image aspect ratio not preserved).  Scaling of the actual image is working great.
Yea sure we can use overlay color for this bug, but it will make another bug if we have custom background for the drawee view, not just a plain color.
If anyone care to know how i achieved it, i included the XML code of my drawee view like above
@Override
JPEG
Just wondering Is there such mechanism to turn off the fade-in animation of Drawee?
We are facing this problem with some big gif, for example http://ta-ty-sho.com/wp-content/uploads/2015/04/gifki-gif-animatsia-multfilm-kot-v-sapogakh-i-t.gif
Device: samsung samsung SM-G900M klteub
- leaks com.maddogs.mymoney.activities.MainActivity instance
SimpleDraweeView avatar;
@Override
I think this is a bug.
https://online.kreckm.pl/data/achievements/gra-na-czas.png
https://online.kreckm.pl/data/achievements/niezla-forma.png
https://online.kreckm.pl/data/achievements/rowery_rozpedzony.png
https://online.kreckm.pl/data/achievements/miejska-jazda.png
https://online.kreckm.pl/data/achievements/gaz-do-dechy.png
We recently released Fresco in our production app and we're seeing a lot of crashes from OutOfMemory errors, looking at the stacktrace it looks like it's happening during decoding the image.  The interesting thing is that all of these crashes are only happening on Lollipop, none of them happen on pre Android L devices.  We are using a memoryTrimmableRegistry, and calling the trimMemory functions when we receive an onMemoryTrim() call from our activity.
if(view instanceof GenericDraweeView) {
Do you have any idea what could be causing this, is there any more information we can provide?
@Override
Stetho.initialize(
Anshu
That's strange. If need be you can remove those permissions by adding something like
@lizhiqiang-unnoo this doesn't help,I just want to exclude the arm64-v8a,but this create each platform an apk file
@huclengyue I don't want the arm64 dir
As I use DraweeController
``` Java
.setOldController(draweeView.getController())
``` Java
``` Java
draweeView.setHierarchy(hierarchy);
draweeView.setController(controller);
draweeView.setController(controller);
Some properties have no effect.For example,hierarchy's FailureImageã€ProgressBarImageã€RoundingParams etc..
ANDROID VERSION4.1.1ã€DEVICEU705T
ANDROID VERSION4.2.2
java.lang.IllegalArgumentException
fresco 0.5.0.
Similar exception in `0.14.0`
E/unknown:TransformingConsumer: unhandled exception
java.lang.IllegalArgumentException
apply plugin: 'com.neenbedankt.android-apt'
repositories {
classpath 'com.neenbedankt.gradle.plugins:android-apt:1.4'
applicationId "com.unnoo.xiaomiquan"
buildTypes {
exclude 'META-INF/LICENSE'
exclude 'META-INF/NOTICE'
exclude 'META-INF/LICENSE'
exclude 'META-INF/NOTICE'
// æµ‹è¯•åº“
// ç¬¬ä¸‰æ–¹åº“
compile 'de.greenrobot:greendao:1.3.7'
compile 'org.projectlombok:lombok:1.16.4'
compile 'com.mcxiaoke.volley:library:1.0.15'
compile 'com.koushikdutta.async:androidasync:2.1.4'
# å¾®ä¿¡
# GreenDao
-keepclassmembers class * extends de.greenrobot.dao.AbstractDao {
Fresco.initialize(context);
@Override
Fresco.initialize(context);
Process: co.alapp, PID: 14972
java.lang.RuntimeException: Unable to create application co.alapp.volley.AppController: java.lang.NullPointerException
Imran
Imran
Could Fresco provide a way to customize the bitmap decode configuration to something else, like ARGB_4444.
at com.koudai.weidian.buyer.image.imagefetcher.WeiDianNetworkFetcher$1.run(WeiDianNetworkFetcher.java:74)
@jalpesh , you must make your jpeg image support progressiveï¼Œbecause fresco will read some bytes to judge whether your jpeg is a progressive jpeg.
å†…å®¹ï¼š
_é¡º  ç¥  å·¥  ä½œ  é¡º  åˆ©!_
And throws this exception:
07-09 15:16:21.116  19539-19539/com.facebook.samples.demo V/unknown:AbstractDraweeControllerï¹• controller 42c08ae0 0: final_failed @ onFailure: failure: java.lang.IllegalArgumentException: Requested size is too big
you mean verbose logcat? or some method to turn on fresco's logging function?
Here is the verbose logcat from my dev device for about 6 secs after my GalleryActivity(ViewPager & **ZoomableDraweeView**s from fresco sample project) launched.
Is there any method to turn on inner logging of fresco?
@Override
@Override
@Override
@Override
@Override
@Override
adb logcat -v threadtime | grep -iE 'LoggingListener|AbstractDraweeController'
Thanks for your patient, plamenko.
Hi, tyroneon.
System.setProperty("log.tag.AbstractDraweeController", "VERBOSE");
System.setProperty("log.tag.LoggingListener", "VERBOSE");
System.setProperty("log.tag.ZoomableDraweeView", "VERBOSE");
Another problem:
Is the log printed by fresco?
@Override
@Override
at com.lbe.security.service.core.client.b.x.callApplicationOnCreate()
GT-I9300 - 4.3
The code that I am using is
imageUrl = randomAvatarPersonUrl();
.setUri(uri)
DraweeController controller = pdcb.build();
Am I doing something wrong?
Scrolling is really choppy.
Is it expected when there are several gifs visible on screen? Is it a hardware constraint? When I scroll I first observe the row that comes in being blank for briefly 1 or 2 seconds, then I see the image being loaded into its container and starts animating.
compile 'de.greenrobot:greendao:1.3.7'
compile 'com.afollestad:material-dialogs:0.7.1.1'
yes, We get this crash random.
Fresco 0.6.0
Hello @agoodcoolman @tyronen can you please tell me how this is fixed for you?
But app crashed on GalaxyNexus(4.2.2) and Motorola(4.0.4)
In android studio, there are no folder for amreabi
sorry, I hava forgot it. maybe you need create a file be named armeabi-v7a in libs,
Hello @agoodcoolman can you please tell me how this is fixed for you?
But app crashed on GalaxyNexus(4.2.2) and Motorola(4.0.4)
In android studio, there are no folder for amreabi
I have fixed it using eclipse. In fresco project, put all .so file in armeabi-v7a folder.
- Flexible list (some items have text only, some other items have images and text)
- Big DraweeView (full-width as @henrytao-me said)
- The visibility of DraweeView is changed when rendering in adapter (GONE to VISIBLE)
My god,how to solve these?
the code:
@Override
@Override
holder.originalPriceNomal.setVisibility(View.VISIBLE);
holder.originalPriceNomal.setVisibility(View.GONE);
@Override
TextView barginPrice, originalPrice, endTime,originalPriceNomal;
SimpleDraweeView icon;
originalPriceNomal = (TextView) view.findViewById(R.id.tv_original_price);
@Override
when I add fresco to my app using
classpath 'com.neenbedankt.gradle.plugins:android-apt:1.4'
apply plugin: 'com.neenbedankt.android-apt'
Any idea if the volume of data and images is causing an issue?
the log
DraweeController draweeController = Fresco
draweeView.setId(picCounter);
view.setController(draweeController);
http://blog.kasal.info/images/20150627224228_img_8702_blog.jpg
simpleDraweeView.setController(controller);
This is my code:
private final SimpleDraweeView photo;
@Override
@Override
simpleDraweeView.getViewTreeObserver().addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener()
@Override
simpleDraweeView.getViewTreeObserver().removeOnPreDrawListener(this);
.setOldController(simpleDraweeView.getController())
simpleDraweeView.setController(controller);
And the leaks and oom crashes still occur on rotate.
And bdw pozdrav iz Zagreba. :smiley:
and here is the log if it helps
I'm willing to help but I'm not familiar with MAT. Can you link it? Also is this of any help to you? https://github.com/square/leakcanary
I have made some new discoveries, and maybe this will seem a huge newbie mistake to you, but after moving
@r1m Thank you VERY much... That made my OOMs go away.
@tyronen  i had do two initialization methods,but it's also oom
> You should call setOldController when building a new controller. This will allow for the old controller to be reused and a couple of unnecessary memory allocations to be avoided. I have the same experience, and find that is the image url witch you have request from server is too big to your device, you should call ImageRequest and setResizeOptions to resize the image. @06peng   After adding the Fresco dependency to my gradle, I'm facing this error:
repositories {
mavenCentral()
repositories {
mavenCentral()
applicationId "com.maddogs.mymoney"
productFlavors {
compile 'com.nostra13.universalimageloader:universal-image-loader:1.9.4'
compile 'com.bignerdranch.android:recyclerview-multiselect:+'
compile files('libs/Parse-1.9.2.jar')
@My code uses a generated BitmapDrawable, relative to onscreen content, and its really maddening that that I can't simply set it on the Drawee. Enough so that I am about to rip out Fresco from my app.  is there any plan to fix this bug? we have the same issue on Android 5.0+, even with 0.6.0
@TarangS  I used the split for 64 like the link said. and got the error as mentioned. what can I do ?
Not sure, but it might be related to to multidex(?) config.
Hi @michalgr
@droidekas Fresco was not working for me with 1.5.0 beta 1, with 1.5.0 release it works well. 1.4.0 beta 6 was also ok
``` gradle
repositories {
Use APK split by ABI
i experience this problem on Huawei 4.1 and Fresco 0.9.0 and the problem is below:
before use Fresco
After all, what's the right solution?
OR
Fixed as well with solution described by @ivanviragine
@ivanviragine's solution works for me. But, the following are a bit unsettling:
compile('jp.wasabeef:fresco-processors:2.0.0') { exclude module: 'bolts-android' }
Hi, we switched from Picasso to Fresco recently and noticed that our app now shows an increasing amount of data usage in Storage, but not in Cache.
I haven't found a good way to purge the data storage programatically in Fresco, and was hoping there's something I missed that might help. Thanks.
http://fresco.gdg.kr/
PS: Because I'm not good at English, explaning is always very difficult to me. Sorry for my poor English.
I'm thinking maybe it is just because crashlytics can't log OOM outside Java. Since in < 5.0, it is not using the heap space...
@zhangxiaang Are you holding too many DraweeHolder in memory? That was our case before.
-Nithin
Uri uri;
.setUri(uri)
@Override
Field field = AnimatedDrawable.class.getDeclaredField("mTotalLoops");
for fresco v0.10.0+
@Override
Field field = AnimatedDrawable.class.getDeclaredField("mTotalLoops");
@Nullable Animatable anim) {
if (anim != null) {
//compile(name: 'animated-base-support', ext: 'aar')
/////////////////////
@Nullable Animatable anim) {
if (anim != null) {
@Nullable Animatable anim) {
if (anim != null) {
Wish fresco support it. Thanks!
@sagartrehan
[ForegroundDraweeView.java](https://gist.github.com/boxcounter/89fe6c3de997ac6dd473)
Note: when displaying about 4 GIF's simultaneous - everything seems to work great.
some code:
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
controller = Fresco.newDraweeControllerBuilder()
draweeView.setController(controller);
private final Executor mIoBoundExecutor;
@Override
return mIoBoundExecutor;
@Override
return mIoBoundExecutor;
@Override
@Override
@Override
compile 'com.github.siyamed:android-shape-imageview:0.9.+@aar'
Java code :
.setUri(uri)
@Override
ABI: 'arm'
signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
Here is the code:
@Override
@Override
@Override
else
@Override
app:progressBarImage="@drawable/ic_autorenew_white_48dp"
</RelativeLayout>
private ZoomableDraweeView imageView;
@Override
@Override
So the content downloaded is wrong. For a moment, i call fresco again, fresco doesn't download again.
Fresco.newControllerBuilder() does not seem to exist in 0.5.2
will fail because setController only takes a DraweeController as an arguement.
- Flip Horizontally
- Flip Vertically
- Resize
String path = "android.resource://" + other app apckagename + "/" + resourceId;
@tyronen your solution
I/DEBUGï¹• **\* **\* **\* **\* **\* **\* **\* **\* **\* **\* **\* **\* **\* **\* **\* ***
06-16 10:45:32.510    2135-2135/? I/DEBUGï¹• 7caf5aa0 43131928 7caf5ab4 7caf5b24 7b5c36d0
I am facing this issue in  V0.9.0. Please check.
I had an exact same problem just now. The problem was that the view was not SimpleDraweeView but rather an ImageView. If that doesn't resolve the problem, make sure you send valid HTTP headers from the web.
See on the Internetï¼Œadd libs to Java build path-Soure`Folder,But other exceptions.Repeat jar
Or are you using Proguard perhaps?
no !!
Could not find drawee.apk
Could not find fresco.apk
@Override
@Override
I use sailfish os ,can you support it ?
when I build fresco, I got three problems.
Animated GIF's animation begining is delayed noticeably than before(compare with 0.4.0)
I am still facing the same issue in 0.7.0.
The problem is that these are all matrix based operations on the imageview and all of these operations involve using the drawable intrinsic width/height.  This doesn't work for us out of the box with Fresco, because GenericDraweeHierarchy forces it's root drawable to return intrinsic width/height of -1.  To get around this problem we've made our own implementation of DraweeHierarchy that is the exact same as GenericDraweeHierarchy with the only difference being that it doesn't over ride intrinsic width/height in the RootFadeDrawable.  We then leave it to the logic in our view to make sure that the final image is set on our view before applying any matrix operations, so that the height/width doesn't change upon image load.
@Override
@Override
-  --- libs/
-           ------ javacpp.jar
-           ------ javacv.jar
-       --------- jniLibs/armeabi/*.so
repositories {
repositories {
exclude "lib/armeabi/libbitmaps.so"
exclude "lib/armeabi/libgifimage.so"
exclude "lib/armeabi/libimagepipeline.so"
exclude "lib/armeabi/libmemchunk.so"
exclude "lib/armeabi/libwebp.so"
exclude "lib/armeabi/libwebpimage.so"
to allow a single apk build to work - though the better solution is to produce abi splits
when i use eclipse it's OK, i don't know which jar is mulit.
just like the imageloader:
if fresco can do this ,it will be wonderfulï¼
@tyronen
Fresco.getImagePipeline().resume() and Fresco.getImagePipeline().pause()
I see that when I scroll list images in Fresco sample, the ashmem size increase to a limit which is about 100MB (I use Samsung Galaxy Note 3 - 3 GB of RAM), and then it fluctuate around that limit when I keep scrolling.
Maybe it cause by this issue:
ViewTransformer Class:
ViewAffineOperation Class:
public class ViewAffineOperation {
my code:
On the PlayStore, these crashes are listed as a NativeCrash :
*** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
Abort message: 'heap corruption detected by dlfree'
code around lr:
05-31 23:37:53.746: I/DEBUG(18033):     #03  pc 000915af  /system/lib/libskia.so (SkBitmap::freePixels()+4)
05-31 23:37:53.766: I/DEBUG(18033):     401075a4 4299699d 689ed00c 42866900 af39f4ff
Why is that? Could you tell what NativeMemoryChunk is for?
mWidth = Math.min(w, h);
my code:
We use fresco to download and display many animated gifs in our app(tens of gifs in one scrolled page and many pages can be switched).  We are seeing a lot of gif decoding OOM issue reported from bug reporter like this,
We includes fresco as following,
I have read Fresco Get Start, there is a way to change folder where cache files are saved, but the folder contain sub folder structures, plus I don't see anyway to format the file name.
please help me.. Troubled me for a long time.  i hope fresco provider multiple bitmap views .
@Override
.setOldController(holder.draweeView.getController())
holder.draweeView.setController(controller);
@Override
@Override
@Override
@Override
.setOldController(holder.draweeView.getController())
boolean inMemoryCache = Fresco.getImagePipeline().isInBitmapMemoryCache(uri);
holder.draweeView.setController(controller);
@Override
boolean inMemoryCache = Fresco.getImagePipeline().isInBitmapMemoryCache(uri);
}catch (Exception e){
In the fresco sample, it seems to be.
I get this exception:
In code, I am using doing this:
http://giphy.com/gifs/supernatural-5OuelPHaXOHC0
http://www.corporacionlimatambo.com/static/admin/img/loading.gif
in code, based on condition
in code,
DraweeController controller =
Fresco.newDraweeControllerBuilder()
xiaoluo:roundAsCircle="true"
xiaoluo:roundingBorderWidth="0.5dp"
xiaoluo:roundingBorderColor="@color/colorLightgray"
xiaoluo:placeholderImage="@drawable/blank_avatar" />
Hi Fresco,
.setOldController(draweeView.getController()).build();
draweeView.setController(controller);
They are small images (100x100 and 200x200)
Galaxy S6 edge
If I remove these lines, the Fresco works, but the GDX doesn't...
Same problem on sumsung galaxy s4 i9295
BOOTLOADER=G9250ZTU1AOE4
Fresco load fail, but Glide, Picasso and Volley  load success.
@cabbage How have you solved that problem?
@koptus
Apache logs :
AbstractDraweeController: controller 40c00f68 66: final_failed @ onFailure: failure: java.lang.IllegalArgumentException: unknown image format
AbstractDraweeController: controller 406ae738 67: final_failed @ onFailure: failure: java.lang.IllegalArgumentException: unknown image format
Greatings,
Eric
It seems to be a random thing : it's ok for most images.
Greatings,
Eric
Eric
Greatings,
Eric
my code:
ImgBean item = getItem(position);
.setOldController(((SimpleDraweeView) convertView).getController())
@Override
I upload a demo. @tyronen @Kuratkoo b18645751b80106561e4b8eb078b68b62f2e530f
raw
hi fresco,
W/unknown:CloseableReferenceï¹• Finalized without closing: b2cd69e 7afb57f (type = NativePooledByteBuffer)
I edit my code like this, but still show me that logical, can anybody tell me how to fix it? @TarangS @daaku @natacado @benhiller @tageorgiou
.setOldController(simpleDraweeView.getController())
@Override
simpleDraweeView.setController(controller);
I am code :
draweeImage.setImageURI (pic_uri);
In other words,how can i use subsampling-scale-image-view with fresco?
I would like some help regarding some best practices when working with Fresco.
I did some memory profiling and it seems that 90% of the memory is byte[] objects owned by fresco. (x number of images around 7-8 MB each)
3. Something else?
This is scary! I think high memory consumption should be against the nature of Fresco.
currently, I use code below download pic .
Use Fresco "version 0.5.0
my code is
@Override
@Override
Fresco.newDraweeControllerBuilder()
Fresco.newControllerBuilder() does not seem to exist in 0.5.2
will fail because setController only takes a DraweeController as an arguement.
@Override
@Override
@michalgr
Context context = PrivacyCall.getContext();
@Override
@Override
@Override
@Override
simpleDraweeView.setOnClickListener(new View.OnClickListener() {
@Override
@jerboy @oprisnik  I'm currently using nexus 6pï¼Œgenymotion no longer in useã€‚
video https://www.dropbox.com/s/cytpy1162ar5kr0/occamLRX22Cnikitafeshchun05202015172248.mp4?dl=0
https://www.dropbox.com/s/5p6hq1wbsr1berz/occamLRX22Cnikitafeshchun05292015173555.mp4?dl=0 here you go. On the video you can see 2 recyclerview,images is Simpledrawerview
Use Fresco "version 0.5.0
@tyronen what should I do when my app crash and get SimpleDraweeView not initialized error ?  Because when my app crash for some reason, the android system recovers the last activity only to find that simpleDraweeView not initialized.
I tested exactly same code on 2 devices. one of them Samsung, the other is Piranha, it worked on Pirhana and did not work on Samsung GS3.
now I added the new version from githuib:
@tzveeJ  so do the activities open and close smoothly?
@iballan Yes, they do. To clarify, the Facebook sample code contained Fresco.initialize(context) which I have now removed because I had already initialized it in my application class per their instructions.
@Override
@Override
view.setController(draweeController);
Log:
xiaoluo:roundAsCircle="true"
xiaoluo:placeholderImage="@drawable/blank_avatar" />
<!--xiaoluo:roundingBorderWidth="@dimen/avatar_border_width"-->
<!--xiaoluo:roundingBorderColor="@color/colorAvatarBorder"-->
Log:
tyronen Sorry,This is my mistake.
@michalgr
Fresco cannot be resolved at line
Fresco.initialize(context);
the error code is:
this error happens at samsung Gallaxy Note II(android version:4.1.2) and HUAWEI P6-T00(android version 4.2.2)
lib-------armeabi---------------libbitmaps.so
armeabi-v7a---------libbitmaps.so
Seems a lenovo, so maybe a weird architecture. Are you able to fallback safely, instead of crashing?
java.lang.UnsatisfiedLinkError: Couldn't load memchunk from loader dalvik.system.PathClassLoader[DexPathList[[zip file "/data/app/com.mufumbo.android.recipe.search-1.apk"],nativeLibraryDirectories=[/vendor/lib, /system/lib]]]: findLibrary returned null
rafa
2. inde might be index or anything else?
https://github.com/facebook/fresco/blob/gh-pages/docs/05-building-from-source.md
Only for android 4.x and lower, infact it seems not to do that on newer version... Why this?
Ok i got that, but actually is for api 21.
.setUri(uri)
I wonder Why don't fresco use inBitmap in Android 4.4, but Android 5.0?
private void initFresco(){
05-20 09:31:10.720: I/Adreno-EGL(18839): Local Branch:
below is all code:
@Override
initFresco();
private void initFresco(){
@Override
@Override
@Override
@Override
my code is below
mDrawee.setImageURI(uri);
After that I imported 4 projects in eclipse drawee, fbcore, fresco, and imagepipeline.
But when I run my app and open that activity which initializing Fresco gives below error:
Can anybody help me please!!!
Picasso.with(context).invalidate(URI);
2.When definite the view in fresco, some photos are transparent (getTopDraweeale). After setting the holderImage, some pictures are holderimage, and the others are target image. Really a bad experience.
![3tql7 09 6j_y_nn6_6g ub](https://cloud.githubusercontent.com/assets/12455694/7648349/8c6d263a-fb14-11e4-9c73-d24f010684ce.png)
æˆ‘ä¸çŸ¥é“ä½ é‡åˆ°ä»€ä¹ˆé—®é¢˜äº†ï¼Œæ˜¾ç¤ºå¤§å›¾ä¼šæœ‰é—®é¢˜å—ï¼Ÿä»–è¿™ä¸ªè‡ªå®šä¹‰holderæˆ‘æ²¡ç”¨ï¼Œæˆ‘å»ºè®®å¦‚æžœä¸è¡Œå°±åˆ«ç”¨ã€‚ä½ åªç”¨åŠ è½½é‚£å—å°±å¥½äº†
ä¸æ˜¯ï¼Œç†è®ºä¸Š å›¾ç‰‡ä¸å¯èƒ½åŠ è½½4096*4096ä»¥ä¸Šçš„ï¼Œä½†æ˜¯æœ‰è¿™æ ·çš„éœ€æ±‚ï¼Œä¸çŸ¥é“æ€Žä¹ˆè§£å†³ã€‚
Latest Fresco ? what version ?
fresco error
![image Screenshot ](http://i1.tietuku.com/8093abc10cd3fbe8.png)
there is my adapter  code ï¼š
@Override
.setUri(uri)
.setOldController(draweeView.getController())
draweeView.setController(controller);
there is all code
@Override
@Override
@Override
@Override
@Override
* @author ButterKnifeZelezny, plugin for Android Studio by Avast Developers (http://github.com/avast)
.setUri(uri)
.setOldController(draweeView.getController())
draweeView.setController(controller);
strings.add("http://cdn.duitang.com/uploads/item/201408/07/20140807224553_VXaUc.thumb.jpeg");
strings.add("http://static.kuaihuala.com/uploads/share/20141223/14193276354943.jpg");
strings.add("http://static.kuaihuala.com/uploads/adver/20141222/14192466504022.jpg");
strings.add("http://static.kuaihuala.com/uploads/adver/20141222/14192464894056.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141230/14199214419877.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141222/14192471472179.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141222/1419245961720.jpg");
strings.add("http://static.kuaihuala.com/uploads/share/20141229/14198335778831.jpg");
strings.add("http://static.kuaihuala.com/uploads/share/20141223/14193308734597.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141229/14198460398571.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141229/14198399966853.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141229/14198498909027.jpg");
strings.add("http://static.kuaihuala.com/uploads/adver/20141230/1419924451817.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141231/14199924451997.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141231/1419993178509.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141231/14199938863183.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141231/14199956659657.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141231/14199960857576.jpg");
strings.add("http://static.kuaihuala.com/uploads/download/20141231/14199965043272.jpg");
this is all logcat
05-16 13:06:31.642  31958-31958/com.demo I/dalvikvmï¹• Could not find method android.view.ViewGroup.onNestedScrollAccepted, referenced from method android.support.v7.internal.widget.ActionBarOverlayLayout.onNestedScrollAccepted
05-16 13:06:31.642  31958-31958/com.demo I/dalvikvmï¹• Could not find method android.view.ViewGroup.onStopNestedScroll, referenced from method android.support.v7.internal.widget.ActionBarOverlayLayout.onStopNestedScroll
05-16 13:06:31.642  31958-31958/com.demo I/dalvikvmï¹• Could not find method android.content.res.Resources.getDrawable, referenced from method android.support.v7.internal.widget.ResourcesWrapper.getDrawable
Local Branch: base_au149_adreno_au169_patches
Remote Branch:
The DraweeView didn't work with `ActivityOptionsCompat.makeSceneTransitionAnimation`.
05-14 15:43:57.490    2125-2125/? I/DEBUGï¹• beb081e8 5f006800 000056de 80427aba 000056de
@Override
@Override
We have one app which includes two native libraries and works well. We put these two native libraries under app/src/main/jniLibs/armeabi/ and build the app with Gradle.
java.lang.IllegalStateException
java.lang.IllegalStateException
fresco:pressedStateOverlayImage="@android:color/black"
if i  don't add     fresco:overlayImage="@android:color/transparent" ,it will crash
<com.diandian.coolco.emilie.widget.SizeAdjustableSimpleDraweeView
<ProgressBar
@Override
@Override
draweeView.setHierarchy(hierarchy);
Is this a bug?
I build a uri like this:
this uri is built by :
draweeView.setImageURI(imageRequest.getSourceUri());
the Exception:
@yanxing i hope it will work fine.
package com.koudai.weidian.buyer.fragment;
import com.koudai.weidian.buyer.R;
import com.koudai.weidian.buyer.activity.GalleryActivity;
import com.koudai.weidian.buyer.dialog.ProcessDialog;
import com.koudai.weidian.buyer.image.loader.FrescoImageLoader;
import com.koudai.weidian.buyer.util.AppUtil;
* Created by zhaoyu on 14/12/1.
@Override
@Override
@Override
getLoaderManager().destroyLoader(THUMBNAIL_LOAD);
@Override
case THUMBNAIL_LOAD:
@Override
@Override
@Override
@Override
@Override
@Override
public SimpleDraweeView picture;
package com.koudai.weidian.buyer.image.loader;
* Created by zhaoyu on 15/5/11.
view.setController(draweeController);
@agoodcoolman It has been resolved
view.setController(draweeController);
æˆ‘ä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå¿…é¡»resizeæ—¶å€™hardcodeå®½é«˜ï¼Œæœ‰é«˜æ‰‹è§£å†³äº†ä¹ˆ
å“ˆå“ˆï¼Œå¥½åƒæ˜¯åˆšç”¨frescoéƒ½ä¼šç¢°åˆ°çš„ä¸€ä¸ªé—®é¢˜å˜›......ç›®å‰ç”¨resizeè§£å†³ã€‚ã€‚ã€‚
The following two different exception occurs
Fresco.initialize(context);
Fresco.initialize(weiLeCtx, config);
Occasionally appear in the list. The url contains special charactersï¼Ÿ
Am I right? Sorry for my poor English!
@Override
@Override
Most of them are png format
@Override
If the DraweeView has a custom shape of an image, overlaying a ColorDrawable on top of it would cover the entire size of the View instead of the custom shaped area.
![cannotshow1](https://cloud.githubusercontent.com/assets/8416392/7566653/aa33cc88-f82a-11e4-9bef-c261baacfee9.jpg)
Did I config something wrongï¼Ÿ
.setUri(uri)
.setOldController(draweeView.getController())
draweeView.setController(controller);
``` Java
.load(someUriToTheSDCard)
While I initialize Fresco like this
``` Java
I dont find any logs, but if I try to get the image through the fresco pipeline I receive a
translate: http://fresco.recrack.com/docs/index.html#_
This is the code used:
@Override
@Override
@Override
Bitmap dest = ref.get();
@Override
@jeprojects
java.lang.UnsatisfiedLinkError: dalvik.system.PathClassLoader[DexPathList[[zip file "/data/app/br.com.estudio89.rhmais-1/base.apk"],nativeLibraryDirectories=[/vendor/lib, /system/lib]]] couldn't find "libmemchunk.so"
Am I doing anything wrong? I am using Intellij IDEA by the way.
<type>aar</type>
<type>aar</type>
<artifactId>drawee</artifactId>
<type>aar</type>
<type>aar</type>
<artifactId>drawee</artifactId>
<type>aar</type>
<!-- begin of fresco -->
<type>aar</type>
</exclusions>
<type>aar</type>
<artifactId>drawee</artifactId>
<type>aar</type>
</exclusions>
<type>aar</type>
</exclusions>
<!-- end of fresco -->
<packaging>aar</packaging>
This is the code :
@Override
// å¯å…³é—­çš„å¼•ç”¨cloneå‡ºæ¥ï¼Œä¸ç„¶åœ¨imageviewä½¿ç”¨è¿‡ç¨‹ä¸­å®¹æ˜“è¢«å›žæ”¶
@Override
@binqiangsun I am also getting same exception .. Did you get any workaround ?  its helpful for me...Thanks
get error when use proguardï¼Œ and need load gif imageï¼Œ has this two type error
meizu mx3 4.4.4
Sorry if my questing was misleading.
import the project in eclipse, according to the document
https://github.com/facebook/fresco/tree/gh-pages/docs/00-getting-started.md
- CENTER_CROP
@balazsbalazs Awesome. Looking forward to try this feature
Sorry for my vogue expression, I also mean variable name.
So what do you mean by this?
Is it possible to add that support?
use the fresco+okhhtp
if return false, you will  got a TooManyBitmapsExcetion.
use SimpleDraweeView
you've created 384 bitmaps
so in less than LOLLIPOP of the phone, the limited number of bitmaps in the Ashmem can not be more than 384
```@Override
* fix fresco TooManyBitmapsException
mWeiboShareAPI.registerApp();
04-28 14:34:36.443    3071-3843/com.lukouapp D/CrashHandlerï¹• BRAND : smartisan
04-28 14:34:36.443    3071-3843/com.lukouapp D/CrashHandlerï¹• CPU_ABI : armeabi-v7a
04-28 14:34:36.443    3071-3843/com.lukouapp D/CrashHandlerï¹• CPU_ABI2 : armeabi
04-28 14:34:36.443    3071-3843/com.lukouapp D/CrashHandlerï¹• DEVICE : msm8974sfo
04-28 14:34:36.453    3071-3843/com.lukouapp D/CrashHandlerï¹• IS_DEBUGGABLE : false
04-28 14:34:36.453    3071-3843/com.lukouapp D/CrashHandlerï¹• RADIO : 2.0.1.c7-00022-M01046001
04-28 14:34:36.453    3071-3843/com.lukouapp D/CrashHandlerï¹• SERIAL : 1baad615
at com.lukouapp.crash.CrashHandler.uncaughtException(CrashHandler.java:90)
> E/AndroidRuntime( 5755): java.lang.UnsatisfiedLinkError: JNI_ERR returned from JNI_OnLoad in "/data/app/com.wandoujia.ripple-2/lib/arm/libgifimage.so"
The device is nexus6.
@michalgr it works with proguard disabled. Do you have any suggestion on fixing the proguard rules? In the mean time I will try with different rules and see if I can get rid of the issue.
@duguguiyu cool, didn't refresh the page :smile_cat:
-dontwarn okio.**
-dontwarn javax.annotation.**
å¤šè°¢ï¼Œå¸®æˆ‘è§£å†³äº†é—®é¢˜ï¼ˆä¸çŸ¥é“æ‰“ä¸­æ–‡èƒ½ä¸èƒ½çœ‹æ‡‚ï¼Œé€—é€—æ­ªæžœä»ï¼Œå“ˆå“ˆï½žï¼‰
`simpleDraweeView.setController(controller);`
The nomal picture is :
android:id="@+id/lore_img"
public class MakGroupFragment extends MainBaseFragment {
private SimpleDraweeView img;
@Override
@Override
@Override
@tyronen I agree with everything you said. Our product is not just an app, but also a hardware media player for locally connected media sources like USB sticks, SD Cards and as such we try to aim to support as many formats as possible.
DraweeController draweeController = Fresco
// .setControllerListener(simpleDraweeView.getListener())
holder.iv.setController(draweeController);
compile 'com.facebook.fresco: fresco: 0.4.0+' dependence
UNEXPECTED TOP-LEVEL EXCEPTION:
I'm using fresco and nineoldandroid normally without exclude it.
compile 'com.nineoldandroids:library:2.4.0'
keyAlias 'nvshen.keystore'
keyPassword 'nvshen'
storeFile file('/Users/MrFu/Desktop/Goddess/AS/wakeup/nvshen.keystore')
storePassword 'nvshen'
applicationId "com.leixun.nvshen"
buildTypes {
compile 'com.nineoldandroids:library:2.4.0'
compile files('libs/alipaysdk.jar')
compile files('libs/alipaysecsdk.jar')
compile files('libs/alipayutdid.jar')
compile files('libs/dianle_custom.jar')
compile files('libs/libammsdk.jar')
compile files('libs/umeng-analytics-v5.2.3.jar')
compile files('libs/weibosdkcore.jar')
compile files('libs/alipaysdk.jar')
compile files('libs/alipaysecsdk.jar')
compile files('libs/alipayutdid.jar')
compile files('libs/dianle_custom.jar')
compile files('libs/libammsdk.jar')
compile files('libs/umeng-analytics-v5.2.3.jar')
compile files('libs/weibosdkcore.jar')
compile 'com.nineoldandroids:library:2.4.0'
SimpleDraweeView view = convertView.findViewById(viewId);
view.setController(draweeController);
when run , I got that Exception:
Process: cn.zmingchun.justforfun, PID: 22001
at cn.zmingchun.justforfun.common.AdapterHelper.BaseAdapterHelper.setImageUrl(BaseAdapterHelper.java:258)
at cn.zmingchun.justforfun.common.AdapterHelper.BaseQuickAdapter.getView(BaseQuickAdapter.java:102)
at in.srain.cube.views.ptr.PtrFrameLayout.layoutChildren(PtrFrameLayout.java:250)
at in.srain.cube.views.ptr.PtrFrameLayout.onLayout(PtrFrameLayout.java:219)
at cn.zmingchun.justforfun.ui.widget.ResideMenu.TouchDisableView.onLayout(TouchDisableView.java:57)
SimpleDraweeView view = convertView.findViewById(viewId);
view.setController(draweeController);
case 0://æˆªå›¾
Ohï¼Œhow could I get the Best practices of Rresco? Maybe that is another issues.
Yes, image loads but with that error log. I could ignore it, but I think isn't normal.
@burnaz try it, asset:///
Just to remember, fresco is loading images from <code>content</code> and <code>assets</code>, but it always shows error log.
I also get this bogus error log when loading some PNG resources.  The images display fine.  I've tried both `res:/<resid>` and `res://<package>/<resid>`, both work fine but put these bogus errors in the log.
@Override
Images of type gif will not load in Google Map info windows. I've tested other image types and they are working fine, but there seems to be an issue with gifs.
On a side note, any tips on loading an image with Fresco into a custom map info window? I'm currently using the OnFinalImageSet event and then marker showInfoWindow() to reload the info window which will make the image display.
437c2ed8: Draw requested for a non-attached controller 436d9750. DraweeHolder{controllerAttached=false, holderAttached=false, drawableVisible=true, activityStarted=true, events=[ON_SET_HIERARCHY, ON_SET_CONTROLLER, ON_CLEAR_OLD_CONTROLLER, ON_SET_CONTROLLER]}
``` Java
@Override
// *** This could just an inflated view
SimpleDraweeView childImageView = vi.findViewById(r.id.test);
@Override
@REWKyleB I'm using my map inside a fragment... That is the only thing I can think could be different for what you are doing... oh, and that I inflate a view
This is possibly related to #120 #121 #171 #176 and #192 .
Unfortunately I also get the crash after building with the code in #121 and #176.
.setUri(uri)
And incorrect width if set size in code:
<RelativeLayout
<RelativeLayout
android:id="@+id/image_mint"
android:id="@+id/image_mint"
android:id="@+id/imageviewYoutuneLogo"
android:id="@+id/layoutSeekbar"
<SeekBar
style="@android:style/Widget.Holo.SeekBar"
</RelativeLayout>
<RelativeLayout
android:id="@+id/mint_text"
</RelativeLayout>
</RelativeLayout>
android:background="#EFEFEF" />
it is difficult to reproduce... the images from network.
please check the gif that i was upload.
.setOldController(holder.imgAlbumArt.getController())
lushan1314 Did you solve this problem?
//to do someting about ui change....
ä¸è¿‡5.0ç³»ç»Ÿbitmapç¼“å­˜è®¾ç½®å¤§ä¸€äº›åˆå®¹æ˜“OOM
æ¥¼ä¸»è§£å†³äº†å—ï¼Œæ±‚èµæ•™ï¼
@tyronen
![bagdax](https://cloud.githubusercontent.com/assets/7555642/7363332/865b742c-ed9a-11e4-94e7-0f56b97240d5.png)
hi EzimetYusup , u managed to solve? I m facing an issue where rounded image not working.
but oom is still occurs..
1) i'm sorry, i wasn't see OOM. just i guess it.
so i attach 'verbose' level log.
is there any way to enable fresco log? (now i'm using gradle dependency (@aar))
@tyronen
i have curiosity about OOM in fresco.
why OOM is occurred?
[seanario]
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
`  I created animation:
@tyronen does the fix also respect loop counts for GIFs? I'm still seeing my GIF loop infinitely even though I have set the loop count to 1
@haseebrabbani Same in 0.11.0 for me cc @tyronen
@Override
@Override
ok, this is a bug!
what  mean  **Fresco's disk**?
i'm trying  to use fresco replace the imageloder ,
@Override
@Override
@Override
@Override
Hey @ffelini, thanks for your fork. It works well, but the picture does not stay centered while zooming. I did not investigate it further, but i found another working solution, which does the job. See here: https://github.com/06peng/FrescoDemo/tree/master/app/src/main/java/uk/co/senab/photoview.
The tar might be corrupted or it is compressed in an unexpected way.
.setOldController(draweeView.getController())
draweeView.setMaxWidth(mGalleryWidth);
draweeView.setMaxHeight(mGalleryHeight);
this is my SimpleDraweeView
I have one special case.
the difference is id:
failed Uri:         content://media/external/images/media/528034
in my case ,  The background is uncertain, it could be a picture  , or  used other color.
http://kelu.oss-cn-hangzhou.aliyuncs.com/image/1005481_1460285224582_baorv1bj00mmm2gib4ji
@Override
@Override
but , it is a copy of origin Bitmap ,because of  performance , so i just  use this
draweeView.setImageURI(uri);
My guess is the path redirects somewhere crazy so Fresco doesn't know what to do.
@tyronen  thank you   build success
@hzy87email so how do you fixed this issue?
@avenwu In the folder imagepipeline with gradle.properties file to add the NDK path in the directoryã€‚
@gdky005  ä¸çŸ¥é“ä½ é‡ä¸Šçš„æ˜¯ä»€ä¹ˆæƒ…å†µï¼Œæˆ‘ä¹‹å‰çš„android studio ä¹Ÿæ˜¯1.1ç¼–è¯‘é€šè¿‡ï¼ŒçŽ°åœ¨studioä¹Ÿæ˜¯1.2ç¼–è¯‘ä¸€æ ·è¿è¡Œ~ä½ ä¼šä¸ä¼šæ˜¯å…¶ä»–é—®é¢˜ï¼Ÿ
@hzy87email å¦‚æžœä½ æ˜¯å‡çº§ä¸Šæ¥çš„åº”è¯¥ä¸ä¼šå‡ºçŽ°é—®é¢˜ï¼Œå¦‚æžœæ˜¯å•ç‹¬è£…ä¸Š1.2åŽï¼Œå‘çŽ°æ¯æ¬¡ç¼–è¯‘éƒ½ä¼šå‡ºçŽ°
@hzy87email   #5
@gdky005 æˆ‘ä¹‹å‰ç…§è¿™ä¸ªäººçš„é…ç½®äº† åœ¨studio1.1ä¸‹ç¼–è¯‘ ä¹Ÿæ˜¯ä¸é€šè¿‡çš„  åŽæ¥æ¢æˆåœ¨ imagepipeline å­é¡¹ç›®é‡Œé¢çš„ gradle.properties æ–‡ä»¶ä¸­å¾—æœ€åŽæ·»åŠ  ndk.path=/Users/XXX/Android_SDK/android-ndk-r10d ç¼–è¯‘æ‰è¿‡çš„
Uri that is currently being shown in the SimpleDraweeView, i thought that
overrided and return an array of Uris instead of a single one. So there can
Uri.
> Yes, but then someone will build a controller, again "just with the uri",
http://about.me/pavlospt
> to that mUris field, wherever it is being stored. What am I missing?
http://about.me/pavlospt
if url is null fresco:roundWithOverlayColor is must be set?
å½“æˆ‘è®¾ç½® setImageURI(null)  åœ¨xmlé‡Œè®¾ç½®çš„ fresco:roundAsCircle="true" æ²¡èµ·ä½œç”¨ï¼Œç”¨çš„è¿˜æ˜¯åŽŸæ¥æ˜¯å›¾æ˜¯æ–¹çš„è€Œä¸æ˜¯åœ†çš„ã€‚
fresco:roundWithOverlayColor è¿™ä¸ªå±žæ€§æ˜¯å¿…é¡»çš„å—ï¼Ÿ
react-native 0.17
``` JAVA
It is not smooth-scrolling while using fresco,and the memory footprint is  larger than others, I think I must have done something wrong.
//use the local pic
raw
![Correct corners](http://i.imgur.com/ikUueRA.png)
![Weird behavior](http://i.imgur.com/8IwNfjy.png)
case FRESCO_INDEX:
mPerfListener,
case PICASSO_INDEX:
mCurrentAdapter = mUseDrawee ?
mImageUrls.add("http://cdnq.duitang.com/uploads/item/201503/20/20150320045435_Wh3Ah.jpeg");
![af8730a7e0dfdae3d78b4cb15a2e8d7d](https://cloud.githubusercontent.com/assets/5111206/7159021/c921d30c-e3b1-11e4-951c-3956ff512174.jpg)
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
Error:Execution failed for task ':drawee:testDebug'.
Here is the code for smooth double tap zoom and pinch to zoom for the fresco library
https://github.com/ongakuer/PhotoDraweeView     I am using this. The best solution.
@BurakDizlek I just started using PhotoDraweeView after seeing your comment and I agree it is the best so far that works with Fresco. I am hoping for [this](https://github.com/facebook/fresco/issues/4) issue to be implemented though.
![image](https://cloud.githubusercontent.com/assets/6076991/7129105/627f3924-e28e-11e4-9353-af262cdbddff.png)
when I search the class AnimRes
if you have used nineoldandroids,also you can try this:
compile('com.nineoldandroids:library:2.4.0') {
Bootloader: N7508VZMUAND3
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr deadbaad
r0 00000027  r1 00000000  r2 00000008  r3 deadbaad
how to fix it?ths
i use fresco like this:
04-13 19:33:39.476  10343-10343/? I/DEBUGï¹• 4010e080 613eb538 613eb538 6349ac70 6349ac70
04-13 19:33:39.476  10343-10343/? I/DEBUGï¹• 4010e090 620cda50 620cda50 60bee138 60bee138
04-13 19:33:39.486  10343-10343/? I/DEBUGï¹• 400befe0 400beed8 4029ca80 404d7a28 404d7108
04-13 19:33:39.486  10343-10343/? I/DEBUGï¹• 61385440 bada490a b48006fe 13904d3c 885bf8a5
04-13 19:33:39.486  10343-10343/? I/DEBUGï¹• be961378 5aed2478 0000001b 409d0c48 575bbc80
devices:
http://image.yourdream.cc/group2/M00/4E/F5/CgAAI1Ut3E4EAAAAAAAAALKnd4M508.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/48/B4/CgAAI1UiJv8EAAAAAAAAACnXDR0661.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/9A/47/CgAAGlN-2GwEAAAAAAAAAIMg7dg551.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/59/3E/CgAAIlUamzQEAAAAAAAAACS0rJs319.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/1D/A0/CgAAI1SASNsEAAAAAAAAAM9_6PE116.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/4A/15/CgAAI1Ukx2YEAAAAAAAAADdkfOU856.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5E/8B/CgAAIlUjN7QEAAAAAAAAAM4goVg183.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5E/E3/CgAAIlUjgaUEAAAAAAAAAD_5AfA406.png?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/52/BA/CgAAIlUPzyMEAAAAAAAAAMThTg8605.png?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/58/CA/CgAAIlUaKi4EAAAAAAAAALcvk8I582.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/1D/54/CgAAI1R_Qj0EAAAAAAAAAMNn0NA830.png?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/59/F4/CgAAIlUbuwcEAAAAAAAAAMevBRk790.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/99/04/CgAAGlN63FcEAAAAAAAAAGOMC_k189.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/49/D1/CgAAIlT-rrwEAAAAAAAAAH2suBA308.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/15/2F/CgAAI1RdiHoEAAAAAAAAACWPP_A939.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/59/23/CgAAIlUafngEAAAAAAAAADasxjU844.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/37/07/CgAAI1T4IW0EAAAAAAAAAL5_e0M156.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/59/60/CgAAIlUawe4EAAAAAAAAAH-_LM4545.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/4F/D3/CgAAIlUKRa4EAAAAAAAAANaMBUQ338.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5B/0B/CgAAIlUdQkAEAAAAAAAAALTgnbs254.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/2C/A8/CgAAIlSbh8UEAAAAAAAAAMr2Nws571.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/45/6A/CgAAI1UbwdIEAAAAAAAAAMWdDBg234.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/9A/47/CgAAGlN-2GwEAAAAAAAAAIMg7dg551.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/45/4E/CgAAI1Ubn3sEAAAAAAAAAKNr0Fc845.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/39/00/CgAAIlTDZfsEAAAAAAAAAJWLwEo308.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/49/71/CgAAI1UjliUEAAAAAAAAAN45JBQ033.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5C/E3/CgAAIlUf8TEEAAAAAAAAAGYFzXw906.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/46/27/CgAAI1UdGloEAAAAAAAAANbqwIo123.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/46/3B/CgAAIlT1iIMEAAAAAAAAABiE1xI247.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/44/BA/CgAAI1UaYG4EAAAAAAAAAOUiZUk068.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5E/AB/CgAAIlUjU0AEAAAAAAAAAIF6hHQ278.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/30/9D/CgAAIlSqAjYEAAAAAAAAAFsgteM805.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/37/07/CgAAI1T4IW0EAAAAAAAAAL5_e0M156.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/48/B4/CgAAI1UiJv8EAAAAAAAAACnXDR0661.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/9A/47/CgAAGlN-2GwEAAAAAAAAAIMg7dg551.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/4A/15/CgAAI1Ukx2YEAAAAAAAAADdkfOU856.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5E/8B/CgAAIlUjN7QEAAAAAAAAAM4goVg183.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/4E/F5/CgAAI1Ut3E4EAAAAAAAAALKnd4M508.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/59/3E/CgAAIlUamzQEAAAAAAAAACS0rJs319.jpg?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group2/M00/1D/A0/CgAAI1SASNsEAAAAAAAAAM9_6PE116.jpg?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/5E/E3/CgAAIlUjgaUEAAAAAAAAAD_5AfA406.png?imageMogr2/auto-orient/thumbnail/400/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/52/BA/CgAAIlUPzyMEAAAAAAAAAMThTg8605.png?imageMogr2/auto-orient/thumbnail/200/quality/70/format/WebP
http://image.yourdream.cc/group1/M00/61/FF/CgAAIlUnrIgEAAAAAAAAAHbniew233.jpg?imageMogr2/auto-orient/thumbnail/600/quality/70/format/WebP
@Override
@Override
@Override
Thank you @lambdapioneer , I think it's a little weird because this code works well in on of my service and I get my bitmap every time. But when I copy this code into one of my image displaying activity I found the bitmap always null. I have read the `using-image-pipline` section and `DataSources and DataSubscribers` section and used data subscribers to get the bitmap like:
@Override
@Override
Thanks.    @Override
@Override
.setOldController(holder.draweeView.getController())
holder.draweeView.setController(controller);
https://img.okezone.com//content/2015/03/13/20/1117973/dirjen-pajak-blunder-soal-pajak-jalan-tol-Hhkw9dov48.jpg
i'm using this uri progressive jpeg and it still doesn't work
http://pooyak.com/p/progjpeg/jpegload.cgi?o=1
protected InstrumentedDraweeView createView() {
view.setController(draweeController);
I am first use the Fresco Library,but have a trouble with it.
I want to load a picture which url is "http://tp4.sinaimg.cn/1312838711/50/5632121054/1",maybe it is not a normal url format,so the Library throws a Exception as follow
04-12 17:38:01.037    8538-8538/com.socks.jiandan E/AndroidRuntimeï¹• FATAL EXCEPTION: main
Process: com.socks.jiandan, PID: 8538
@MohamadAtieh I solve this question when i use the last version library,you can try it.
Picasso support
I have placed the Fresco.initialize(this); in my application, but still error is there...
@Override
draweeView.setImageURI(uri);
@ManMeghï¼Œ
@ManMeghï¼ŒI have the same problem with youï¼ŒHow do you solve??
Caused by: java.lang.NoClassDefFoundError: Failed resolution of: Lcom/facebook/drawee/R$styleable;
some uri has special character like file:///storage/emulated/0/Tencent/QQfile_recv/PL6YD4~F{T)9)TBLX2%IB%C.png
so display throw exception
@Override
@Override
@Override
@Override
@Override
@Override
@Override
Will address the code review shortly!
One of our QA testers somehow has a Galaxy S6 early, but the native components (libmemchunk and its depenencies) in Fresco lack 64-bit ARM builds.  And so, the following crash happens.
APP_ABI := armeabi-v7a armeabi arm64-v8a x86 x86_64
[~/code/joist/fresco]$ ./gradlew build                                                                                                                                                                                                                      *[master][2.1.5]
:drawee:androidJavadocJar
:drawee:androidSourcesJar
:drawee:compileLint
:drawee:preBuild
:drawee:preDebugBuild
:drawee:checkDebugManifest
:drawee:preDebugTestBuild
:drawee:preReleaseBuild
Note: Recompile with -Xlint:deprecation for details.
:drawee:prepareComFacebookFrescoFbcore020Library
:drawee:prepareDebugDependencies
:drawee:compileDebugAidl
:drawee:compileDebugRenderscript
:drawee:generateDebugBuildConfig
:drawee:mergeDebugAssets
:drawee:generateDebugResValues
:drawee:generateDebugResources
:drawee:mergeDebugResources
:drawee:processDebugManifest
:drawee:processDebugResources
:drawee:generateDebugSources
:drawee:compileDebugJava
Note: Recompile with -Xlint:deprecation for details.
:drawee:extractDebugAnnotations
:drawee:mergeDebugProguardFiles
:drawee:packageDebugJar
:drawee:compileDebugNdk
:drawee:packageDebugResources
:drawee:bundleDebug
:drawee:assembleDebug
:drawee:copyReleaseLint UP-TO-DATE
:drawee:checkReleaseManifest
:drawee:prepareReleaseDependencies
:drawee:compileReleaseAidl
:drawee:compileReleaseRenderscript
:drawee:generateReleaseBuildConfig
:drawee:generateReleaseAssets UP-TO-DATE
:drawee:mergeReleaseAssets
:drawee:generateReleaseResValues
:drawee:generateReleaseResources
:drawee:mergeReleaseResources
:drawee:processReleaseManifest
:drawee:processReleaseResources
:drawee:generateReleaseSources
:drawee:compileReleaseJava
Note: Recompile with -Xlint:deprecation for details.
:drawee:extractReleaseAnnotations
:drawee:mergeReleaseProguardFiles
:drawee:processReleaseJavaRes UP-TO-DATE
:drawee:packageReleaseJar
:drawee:compileReleaseNdk
:drawee:packageReleaseRenderscript UP-TO-DATE
:drawee:packageReleaseResources
:drawee:bundleRelease
:drawee:assembleRelease
:drawee:sourcesJar
:drawee:signArchives SKIPPED
:drawee:assemble
:drawee:lint
:drawee:generateTestSources
:drawee:prepareDebugTestDependencies
:drawee:testDebug
:drawee:test UP-TO-DATE
:drawee:check
:drawee:build
:fbcore:compileDebugAidl
Note: Recompile with -Xlint:deprecation for details.
:fbcore:sourcesJar
:fbcore:lint
[armeabi-v7a] Compile++ thumb: gifimage <= jni.cpp
[armeabi-v7a] Compile++ thumb: gifimage <= gif.cpp
[armeabi-v7a] Compile++ thumb: gifimage <= jni_helpers.cpp
[armeabi-v7a] Compile thumb  : gif <= dgif_lib.c
[armeabi-v7a] Compile thumb  : gif <= gifalloc.c
[armeabi] Compile++ thumb: gifimage <= jni.cpp
[armeabi] Compile++ thumb: gifimage <= gif.cpp
[armeabi] Compile++ thumb: gifimage <= jni_helpers.cpp
[armeabi] Compile thumb  : gif <= dgif_lib.c
[armeabi] Compile thumb  : gif <= gifalloc.c
(jint) spNativeContext.get());
(GifImageNativeContext*) pEnv->GetIntField(thiz, sGifImageFieldNativeContext);
(GifFrameNativeContext*) pEnv->GetIntField(thiz, sGifFrameFieldNativeContext);
(GifImageNativeContext*) pEnv->GetIntField(thiz, sGifImageFieldNativeContext);
(GifFrameNativeContext*) pEnv->GetIntField(thiz, sGifFrameFieldNativeContext);
[armeabi-v7a] SharedLibrary  : libgif.so
(jint) spNativeContext.get());
(GifImageNativeContext*) pEnv->GetIntField(thiz, sGifImageFieldNativeContext);
(GifFrameNativeContext*) pEnv->GetIntField(thiz, sGifFrameFieldNativeContext);
(GifImageNativeContext*) pEnv->GetIntField(thiz, sGifImageFieldNativeContext);
(GifFrameNativeContext*) pEnv->GetIntField(thiz, sGifFrameFieldNativeContext);
Looks like -Werror is turned on, and there's some 64-bit unclean pointer use in gifimage. :(
:drawee:compileLint
:drawee:copyReleaseLint UP-TO-DATE
:drawee:preBuild
:drawee:preReleaseBuild
:drawee:checkReleaseManifest
:drawee:preDebugBuild
:drawee:preDebugTestBuild
:drawee:prepareComFacebookFrescoFbcore010Library UP-TO-DATE
:drawee:prepareReleaseDependencies
:drawee:compileReleaseRenderscript UP-TO-DATE
:drawee:generateReleaseAssets UP-TO-DATE
:drawee:generateReleaseResValues UP-TO-DATE
:drawee:generateReleaseResources UP-TO-DATE
:drawee:mergeReleaseResources UP-TO-DATE
:drawee:processReleaseManifest UP-TO-DATE
:drawee:processReleaseResources UP-TO-DATE
:drawee:generateReleaseSources UP-TO-DATE
:drawee:compileReleaseJava UP-TO-DATE
:drawee:extractReleaseAnnotations UP-TO-DATE
:drawee:mergeReleaseProguardFiles UP-TO-DATE
:drawee:processReleaseJavaRes UP-TO-DATE
:drawee:packageReleaseJar UP-TO-DATE
:drawee:packageReleaseRenderscript UP-TO-DATE
:drawee:bundleRelease UP-TO-DATE
@tyronen
While using Facebook app v30.0.0.19.17 none of the picture displayed so I had a look in the logs and I see some Fresco error : `java.lang.IllegalStateException: Byte-array currently in use`
make.exe: **\* [C:\Users\a\AndroidStudioProjects\fresco\imagepipeline\build\tmp\ndk_build_gifimage/local/armeabi-v7a/objs/gifimage/gif.o] Error 1
- Exception is:
The tar might be corrupted or it is compressed in an unexpected way.
sion.
rence.
ng-1.6.10.tar.gz'
The tar might be corrupted or it is compressed in an unexpected way.
The tar might be corrupted or it is compressed in an unexpected way.
make: *** [null/obj/local/armeabi-v7a/objs/gifimage/gif.o] Error 1
make: *** [null/obj/local/armeabi-v7a/objs/gifimage/jni.o] Error 1
make: *** [null/obj/local/armeabi-v7a/objs/gifimage/jni_helpers.o] Error 1
make: *** [null/obj/local/armeabi/objs/gifimage/jni.o] Error 1
make: *** [null/obj/local/armeabi/objs/gifimage/gif.o] Error 1
/Users/liupeng/Documents/workLibrary/android-ndk/ndk-build
E/art     ( 6015):   access=0x8008.0001
Our app, incidentally, is written in Kotlin, which I believe is probably the only relevant odd thing about it.  Device I was running this on at runtime is a N5 with 5.1.
Incidentally, a worthwhile thing might be to include the result code from `RegisterNatives` in the log message.
<style name="Avatar">
What or where is gnustl_shared Lib
still problem
@honghuiqing326 Do you have the same problem when execute 'gradle build'? if you haveï¼Œtry to add â€™ndk.path=D:\android-ndk-r10dâ€˜ in gradle.properties
And in code:
Fresco.initialize(context);
@treeseedm How to solved?
@arlong
treeish = 'v0.4.2'
change uri
@treeseedm It works,thanks!
then, you will find the jar at : YoueProject/app/build/intermediates/exploded-aar/com.facebook.fresco/
@tuhin10 I have the same problem, do you have some good solutions now?
>          PoppinSpot:app:unspecified > com.facebook.fresco:fresco:0.1.0 > com.facebook.fresco:imagepipeline:0.1.0
>          PoppinSpot:app:unspecified > com.facebook.fresco:fresco:0.1.0 > com.facebook.fresco:drawee:0.1.0
>          PoppinSpot:app:unspecified > com.facebook.fresco:fresco:0.1.0 > com.facebook.fresco:fbcore:0.1.0
Is there a way to make this work with Fresco?
Then how does Facebook do pinch to zoom and touch to zoom if they use Fresco? There's obviously something different, and I don't see why can't you share Facebook implementation as open source.
@Override
@Override
To make the kunny's zoomable sample enable doubleTap,
private GestureDetector mGestureDetector;
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@kyungin-park :trophy: nice! now we just need to add animations, double tap scroll zoom, and fling support. If I end up having time for that I'll post back here.
Is anyone able to use ZoomableDraweeView?
@Override
@Nullable Animatable anim) {
@Override
@Override
Fresco.newDraweeControllerBuilder()
@kyungin-park I added your double tap code but the zoomToImagePoint function seems to be gone in the latest DefaultZoomableController. Should I just set the scale to the scale being passed in?
@kyungin-park I add your double tap code it seems some problem when I tap it the image zoom not smooth ,it zoom with jitter,so I think it need handle touchEvent to eliminate jitter
Here is my code
android:id="@+id/drawee_view"
@Override
mDraweeHolder.onDetach();
@Override
mDraweeHolder.onDetach();
view.setController(draweeController);
I feel like I'm really hacking things to get Fresco to work:
DraweeController controller;
controller = this.mSimpleDraweeControllerBuilder
.setUri(uri)
setController(draweeController);
// exactly same as mikeknoop's
Regarding this issue, can someone from fresco answer me these questions:
Java sdk 1.7
W/MALI    (16507): MTK_AUX_isMTKFormat:168: int MTK_AUX_isMTKFormat(ANativeWindowBuffer_t*): format=1
The tar might be corrupted or it is compressed in an unexpected way.
The tar might be corrupted or it is compressed in an unexpected way.
> ages\testorig.ppm'.
@tyronen
C:\code\thirdparty-code\fresco\fresco>gradlew clean
ativemerge
@tyronen
ativemerge
@michalgr
C:\code\thirdparty-code\fresco\fresco>gradlew clean
ativemerge
Fresco.existsInDiskCache(Uri uri) and Fresco.existsInMemoryCache(Uri uri)
@danhantao
but it always goes the onFailureImpl(), I don't know why.
``` script
@ppamorim I have solve this problem.
This is so tricky. The error message seems totally irrelevant with the solution.
I have placed the Fresco.initialize(this); in my application, but still error is there...
@Override
draweeView.setImageURI(uri);
Above is the code... Please Please Please Help me Friends...
@ManMegh @vivian8725118 You should only call Fresco.initialize once. Your Application class would be a good place. Doing it in each Activity is wrong.
Thanks bro worked perfectly though not using fresco am using picasso.
> https://github.com/vivian8725118 You should only call Fresco.initialize
> Activity is wrong.
On Sat, Oct 10, 2015 at 11:07 AM, christopher pius ndugo <
christopherndugo@gmail.com> wrote:
> Thanks bro worked perfectly though not using fresco am using picasso.
3Q
Error
Caused by: java.lang.NumberFormatException: Invalid int: "res/drawable-xxxhdpi-v4/icn_profile_main.png"
D:\fresco>gradlew.bat build --stacktrace
- Exception is:
at build_hgl75w8kemk5tz5embhisf35.run(D:\fresco\imagepipeline\build.gradle:78)
D:\fresco>
blackiedm thx
A problem occurred configuring project ':drawee'.
>          com.facebook.fresco:drawee:0.1.0
Can I get a sample code on how to use Postprocessors in fresco.
@plamenko
@Override
@Override
- Exception is:
org.gradle.execution.TaskSelectionException: Task 'compileDebug' is ambiguous in
root project 'fresco'. Candidates are: 'compileDebugAidl', 'compileDebugJava',
bugTestAidl', 'compileDebugTestJava', 'compileDebugTestNdk', 'compileDebugTestRe
ava:35)
@treeseedm you can see #5
commandLine 'c:/Users/mahaifeng/Downloads/android-ndk-r10d/ndk-build',
@blackiedm  Thank youï¼
I am currently migrating our app to fresco but I encountered a problem. Whenever I try loading a url that redirects to another url to the SimpleDraweeView, the image does not load at all. How can I fix this?
In my opinion, it makes sense for the circle to be used as a mask for the background.
Appologies for the teribble photo shopping, just trying get point across.
@blackiedm Using a Postprocessor wouldn't provide much, because the version of the image stored in the memory cache is the one before post processing from what I understand, so you will end up having to transform it back every time, and keep both versions in memory.
is this code doable or encouraged or is there a better way....
Origin 1: <Project Path>/build/intermediates/exploded-aar/pl.droidsonroids.gif/android-gif-drawable/1.0.11/jni/armeabi/libgif.so
Origin 2: <Project Path>/build/intermediates/exploded-aar/com.facebook.fresco/imagepipeline/0.1.0/jni/armeabi/libgif.so
exclude 'lib/armeabi/libgif.so'
@Override
@Override
@Override
draweeView.setScaleType(ScaleType.FIT_XY);
draweeView.setImageURI(Uri.parse("url"));
https://github.com/facebook/fresco/blob/gh-pages/docs/00-index.md
draweeView.setImageURI("http://frescolib.org/static/fresco-logo.png");
draweeView.setImageURI(uri);
E.g. when switching using Square's Picasso with Fresco, all Uris need to be changed to work with Fresco.
Picasso: https://github.com/square/picasso/issues/332
DraweeView.java:140
mDraweeHolder.setController(null);
mDraweeHolder can be null when ImageView class attempting to setImageDrawable in constructor
I mean the content in `gh-pages`: https://github.com/facebook/fresco/tree/gh-pages
Yes, also include the documentation on `frescolib.org/docs/` .
I posted a feed about Fresco with the Chinese documentation  in weibo.com (a chinese-twitter-liked website). That feed has been viewed over 230,000 times. The Chinese developers like this library very much.
And here is a jekyll plugin for i18n.  https://github.com/liaohuqiu/jekyll-multiple-languages. I use this plugin for my own website and it works well. http://www.liaohuqiu.net/.
fresco:pressedStateOverlayImage="@color/black_overlay"
causes a crash in Jellybean, API level 18, and Lollipop, API 22,  when inflating the view
When I remove the fresco:pressedStateOverlayImage="@color/black_overlay" then the Inflater works and the app behaves as expected without a crash.  Using any color also results in a crash so that is not the problem.  Perhaps the documentation is incorrect and a color cannot be used?
please add "fresco:overlayImage="@color/transparent"" ,so it just work!
@plamenko thanks
@plamenko did the push happen? It would be really useful
Uri uri;
Uri uri;
PipelineDraweeController controller = Fresco.newControllerBuilder()
.setOldController(mSimpleDraweeView.getController())
It looks as if there is no Fresco.newControllerBuilder, only Fresco.newDraweeControllerBuilder(). And with that modification, the assignment to PipelineDraweeController gives an incompatible types error.
controller is of type PipelineDraweeControllerBuilder, then the
setController call fails as it expects a DraweeController.
- os : WIndows 7 Ultimake
....... ã…œ.ã…¡
r5b/ndk-build''
- Exception is:
ava:35)
Caused by: net.rubygrapefruit.platform.NativeException: Could not start 'ndk-bui
at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(Def
at net.rubygrapefruit.platform.internal.WindowsProcessLauncher.start(Win
at net.rubygrapefruit.platform.internal.WrapperProcessLauncher.start(Wra
at net.rubygrapefruit.platform.internal.DefaultProcessLauncher.start(Def
@lgengsy  How to solve?
Happy Easter =)
@jalpesh ,Thanks, it works
To: fresco@noreply.github.com
> Error Code:
>     UNEXPECTED TOP-LEVEL EXCEPTION:
@MarkMjw  dependencies and libs, any suggestion
compile 'com.orhanobut:logger:1.8'
To: fresco@noreply.github.com
> Error Code:
>     UNEXPECTED TOP-LEVEL EXCEPTION:
@Flywhiter has fixed this problem, @hanks-zyh you can discuss with he.
@MarkMjw  Thanks, the reason of the problem is that some _.jar conflict with `fresco` .
compile 'com.orhanobut:logger:1.8'
also found in animated-webp & animated-gif
Tip: Use View.isInEditMode() in your custom views to skip code or show sample data when shown in the IDE  Exception Details java.lang.NullPointerException: SimpleDraweeView was not initialized! Â Â at
<RelativeLayout
</RelativeLayout>
<RelativeLayout
</RelativeLayout>
public TranslateDraweeView(Context context) {
public TranslateDraweeView(Context context, AttributeSet attrs) {
public TranslateDraweeView(Context context, AttributeSet attrs, int defStyle) {
@shumin0809 just add this method, this is a hide public method for the transition.
- The two Drawees _are_ different sizes (this is not a problem for transitioning standard ImageViews and I don't remember anything about pre-fetching that sets the target dimensions)
@jorgemf I agree with you. It is only a hack for do it work.
TranslateDraweeView provided by @goodev does not work correctly on some devices like XiaoMi2, HuaWei P8. ReenterTransition starts at wrong position.
Could someone find out where the real problem is?
Wrong start state of transition
So what you end up is only ChangeBounds taking effect.
@soapsign
I'm not sure whether the problem I'm facing is related to fresco or not.
How about add a new option like "fresco:ImageMatrixSrc=actual" ?
@massimocarli ChangeBounds isn't good enough.
This is what I'm trying to achieve (this is using ImageView): https://gfycat.com/HideousEarlyAndalusianhorse
This is what it looks like with just ChangeBounds as the Transition: https://gfycat.com/SorrowfulExemplaryAntlion
Hey Folks, I have the same issue. ChangeBounds is not working smoothly. If there is a workaround or a fix, please tell us. Shared element transition is one of the best things that material design introduced and fresco is one of the finest library that I have used till now. Please let the developers use both seamlessly.
Here is our CustomDraweeView which updates the TopLevelDrawable during the transition:
public CustomDraweeView(Context context, AttributeSet attrs, int defStyle) {
@Override
tools:targetApi="LOLLIPOP" >
@massimocarli @tyronen
@plamenko I am using fresco 0.12 and
getWindow().setSharedElementEnterTransition(DraweeTransition.createTransitionSet(
getWindow().setSharedElementEnterTransition(DraweeTransition.createTransitionSet(
@sperochon I use replace and it's in a RecyclerView but it doesn't work (and honestly, it's surprising that it works for you, maybe you use a different version of RecyclerView? I use v24.1.1). I had to make a few changes in order to make the animations work:
- the transform won't happen otherwise if the two drawees share the same scale type, even though their sizes are not the same
- use the end drawee instead of the starting one
https://github.com/sperochon/DemoFrescoFragment2Fragment
@sperochon Try it with multiple images.
Android 5.0 + Fresco v0.11/v0.12 -> KO
Android 6.0 + Fresco v0.11/v0.12 -> OK
@Gericop @sperochon I have written a [blog post](https://medium.com/pregbuddy-engineering/how-we-integrated-material-motion-with-transforming-material-9c72384053d4#.g23brb9ap) on medium about this. Please see if it helps.
Android 5.0 + Fresco v0.11/v0.12/0.13 -> KO
Android >= 5.1 + Fresco v0.11/0.12/0.13 -> OK
First, it's complicated to pass `executorSupplier` to `okHttpNetworkFetchProducer`.
Right now, the library doesn't appear to make retrieving the underlying bitmap in a Drawee. While this is understandable, it also makes postprocessing impossible for any users that want to do it.
compile "com.facebook.fresco:drawee:0.1.0+"
@plamenko an AAR will definitely suffice.
> I am new to android. Do I make some mistakes? If there are some problems, please let me know. :-)
heap me!
Picasso: https://github.com/square/picasso/issues/332
'NDK_LIBS_OUT=src/main/jniLibs',
I do not know what's creating this error, but I hope you can help me.
I've specified the XML attribute, fresco:roundAsCircle="true", in the following code and the image is still displaying as a square.
I've made sure to add the custom namespace, fresco, to the top-level element:
Yes i added the namespace but not working.
PipelineDraweeController controller = Fresco.newControllerBuilder() .setImageRequest(requests)
.setOldController(mSimpleDraweeView.getOldController()) .build();
@Override
> So, I suspect that you are not calling Fresco.initialize early enough. Where are you doing that call?
kongnandembp:fresco kongnan$ echo $PATH
kongnandembp:fresco kongnan$ ndk-build
/Users/kongnan/Documents/AndroidSDK/android-ndk-r10d/build/core/build-local.mk:148: **\* Android NDK: Aborting    .  Stop.
kongnandembp:fresco kongnan$
@kongnanlive Are you able to make it work?
@kongnanlive thanks! I solved the problem.
@dp-singh @blackiedm How do you make it work? SOS-~~~
@ikkyu0319 find the commandline 'ndk-build' in imagepipeline/build.gradle and replace
@blackiedm i has replaced <commandLine 'ndk-build'> with <commandLine 'D:/Android/android-ndk-r10d/ndk-build'> , but it's also failed in windows.
@blackiedm @plamenko  @ikkyu0319  I have tried everything but was not able to make it. My main motive was to look at the sample so I have added gradle support repo
compile "com.mcxiaoke.volley:library:${VOLLEY_VERSION}"
compile 'com.facebook.fresco:drawee-volley:0.1.0+'
@appledong  +1
ng    .  Stop.
ain/jni/gifimage'
@ikkyu0319 å“¥ä»¬ï¼Œé¦–å…ˆæŠŠndké…ç½®çŽ¯å¢ƒå˜é‡ï¼Œç„¶åŽçœ‹ä¸‹é¢æˆ‘çš„ä»£ç ï¼ŒæŠŠæˆ‘çš„ndkè·¯å¾„`'/Users/kenneth/Desktop/develop/android-ndk-r10d/ndk-build'`æ›¿æ¢æˆä½ çš„å°±å¯ä»¥äº†ã€‚
@kongnanlive  thinks
@blackiedm thanks,that solved my problem.
@kongnanlive   @blackiedm  thanks! I solved the problem.
Edit: I'm not the owner of the library or a contributor to this library. I'm on my phone. Hopefully, I could make a `Drawee` for this use case: `GalleryDrawee`
@jparkie Thanks. It is the thing I want :). So the next question is, can fresco and SSIV live together peacefully?
The one problem with BitmapRegionDecoder is with PNGs in a version of Android, I believe. I can't remember which. It's perfectly fine with JPEGs. Anyway, that is why I referenced maybe a custom C++ decoder.
@Override
@Override
@Override
@Override
@Override
@Override
