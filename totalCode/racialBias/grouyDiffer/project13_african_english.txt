function FancyButton(props) {
return <Button style="fancy" text={props.text} />;
I think some confusion comes from us giving another meaning to ‚Äúpure‚Äù when we say ‚Äúcomponent‚Äù.
Otherwise this discussion goes into a very theoretical tangent üòÑ .
@syranide I‚Äôm not sure, why would it? The automatic optimization is only enabled for functional components, and this component is an (impure) class.
and they would have different behavior.
@arackaf
@arackaf Also, what are your thoughts on @zpao‚Äôs argument?
@gaearon
continuations which was really hacky.
object which is also unique.
@sminutoli Do you have any benchmarks that indicate that creating such an object would be any faster than binding a function?
cc @spicyj @zpao can one of you stamp?
I am getting a strange error I've never come across. Googling it doesn't help at all.
_I'm sorry if this isn't specific to React. I did look into the error message code and it appears to be coming from the Facebook/React code._
‚îî‚îÄ‚îÄ UNMET PEER DEPENDENCY react@15.1.0
Thanks a lot for the help! @gaearon
cc @spicyj
@erikras, when I specifically remove the
This is definitely a React bug though. There's nothing Redux Form is doing that would be wrong. So if you can repro, please share a case!
@sashashakun updated the pull request.
> Also, have some problem with test in travis, but don't have problems with local tests.
::bind is not a thing yet, afaik.  ES7 is not ratified yet, but I don't think this is even on track to be a part of ES7.  We probably shouldn't mention things that aren't a thing yet.
@zpao
invariant(false, argument, 'foo', 'bar');
PROD_INVARIANT('XYZ', 'foo', 'bar');
raw     gz Compared to master
@zpao Thanks for the response!
I'm curious; is this referring to things internal to Facebook or internal to React? I tried to cover what's needed in React to include the dependency, and it at least seems to work from tests and inspection of the output build.
@syranide Thanks for responding!
| `<div tabIndex="2>" hidden={true} width="30>">{"abc<efg>ij"}</div>` | 20% |
| `<div>{"abc<efg>ij"}</div>` | 13% |
| `<div tabIndex="2" hidden={true} width="30">{"abcdefghij"}</div>` | 12% |
| `<div>{"abcdefghij"}</div>` | 8% |
That's almost character-for-character what I was about to submit before I moved to `escape-html`; great minds think alike!
- [just short-circuit for numbers and booleans](https://github.com/aickin/react/commit/33c9284398da6af0ccf5891a1b81320b9d5e678a) (typeof)
| `<div tabIndex="2>" hidden={true} width="30>">{"abc<efg>ij"}</div>` | 5% | 1% | 2% | 18% |
| `<div>{"abc<efg>ij"}</div>` | 5% | 2% | 1% | 12% |
| `<div tabIndex="2" hidden={true} width="30">{"abcdefghij"}</div>` | 2% | 8% | 10% | 9% |
| `<div>{"abcdefghij"}</div>` | 4% | 8% | 8% | 7% |
I'm happy to do whatever. I'd probably recommend typeof & pretest or escape-html, depending on whether we care about the escaping case. Thoughts?
@ericf Huh, that's definitely odd.
var text = "asfasdfasdfasdfasdfasdfasdfadsfasdfasdf";
Sending this one your way too @spicyj üòÑ
New Coroutine Primitive. Alternative APIs are possible. The important part is getting the implementation details right to have all the pieces available in the reconciler.
@spicyj
CC @spicyj
@zpao I agree with you, but is there any harm in taking this change since it is incrementally closer to our end goal?
@VonKieffer Can you provide a jsfiddle that demonstrates the issue?
Can you provide a simple jsfiddle example that demonstrates the issue?
@omerts
@ruiaraujo updated the pull request.
@zpao I totally broke my mind trying to parse your second sentence, can you rephrase please? üòÑ
@jquense, any ideas?
Yes, afaik.  Although there is https://github.com/facebook/react/issues/6582 under discussion.
Personally, I agree, it is confusing.  But `onDoubleClick` is a "better" name, so the decision was made to use it.
Adds a warning for unknown properties.  This unblocks #140, but is probably an intelligent thing to do anyway (regardless of what we do on that issue).
cc @gaearon @spicyj
üëç  other than inlines.
- [x] Test cases
@gaearon Do you have a plan for how the new perf tool API will be used since it is tied to a particular renderer? It is the only of the add-ons that does that.
@iamdustan Yes, that is an imminent upcoming scenario.
The variation is that this doesn't properly remove unused files from the packages, and it still doesn't do flat builds. So it is an uglier subset I guess.
Why is the attribute important to you?
What you describe sounds more like a usage question about Redux.
Then you would maintain identity and it would work fine with `shallowCompare`
You must use `readOnly` (note the camelCase).  We currently have a bug where the warning telling you this is not firing, sorry about that!
cc @zpao
@gaearon is correct.  Proptypes are mostly legacy and in maintenance mode right now.  We don't want to increase the surface area of proptypes at the moment, if we can avoid it.
@chicoxyzzy These additional proptypes would be a good thing to publish as a separate third-party library on github, if you'd like to do that :).
@syranide I think it's a bit more complicated than that.  Think about how you would implement these warnings for switching between controlled and uncontrolled radio buttons.
@zpao That's what I'm talking about - this warning firing incorrectly (too often) for radio buttons.
@zpao Right, but an uncontrolled radio group is not required to set a defaultChecked on any of the elements.  And a controlled radio group is allowed to set a defaultChecked on a controlled element (for the reset button).  This means that unless we do the smarter logic, any check we do is wrong and will fire spurious warnings.  We might as well just remove the check (for radio buttons) at that point.
Obviously it's a contrived example.  You can imagine that the user has a list of elements and just "sets" the checked attribute on the one that is checked.  But the result is the same.
That's why this warning is so tricky for radio buttons.
> Actually the answer is yes in a sense...? https://jsfiddle.net/hx2r7bc4/ (contrived example, but still)
Wow, that sucks.  That is the most terrible thing I've seen all month.  But I'll give you credit because it demonstrates a problem with not specifying the checked prop on a controlled component when all values are false.
@LiJinyao
Isn't that the opposite of what we want to do with renderers?
in A
I had to track the stack because we don't know the parent hierarchy until the children are fully mounted. I wonder if we can change that.
@spicyj where can I see your change? I can't find it.
hell yeah! I think no one is using jasmine1 any more now, we'll make it optional in Jest and not download it by default any more :)
@gaearon
LGTM
@GGAlanSmithee
@superchangme
Reviewers: @gaearon
LGTM
@spicyj You are very generous.
Ping @naveenideas2it
cc @sebmarkbage @spicyj @zpao
@hckrmoon Can you create a simple jsfiddle that demonstrates the problem.  Also list the device type (ios/android) and browser version you used.
- Test specifically that unmounting is enough to clean up the tree devtool.
Reviewers: @sebmarkbage @spicyj.
Reviewers: @sebmarkbage @spicyj
I knew this would be a problem‚Ä¶
> It's the latter, potentially including RCs
The dist-tag for alphas is doable in the mean time if you want to pursue that.
cc @zpao, any ideas what happened?
cc @dotu for the future reference‚Äîids and permalinks need to be unique.
cc @spicyj @syranide
Who is our resident event system expert at this point?  It used to be @syranide and @spicyj.  Perhaps now it's @jquense?
@syranide Not something we'd want to do on the production code path, but it might be worth doing in dev mode if it allows us to give good warnings for style failures that might otherwise be difficult to debug.
> The bigger issue is XSS if you ask me, I assume lack of encoding is the most likely reason people would bump into this and it's unlikely that any such warning would ever help you there before it's too late.
Do you have a jsfiddle that demonstrates the issue?
Thanks @iamdustan!
cc @zpao
That is weird and seems like a bug in Jest. It is probably a silly thing that's easy to fix.
> Maybe it's the ES6 magic in this line making it hard to read.
Here‚Äôs an equivalent in ES5:
`background` is a property that would need both.
@zpao proposal?  I'm very open to ideas.  I'm not attached to this notation/name, but I would like to find something that is acceptable to everyone so we can drive this to completion.
Is this only happening with IE10? Does this only happen when using the development build? My guess is that it's related to the new warnings for synthetic events so that's where I would start investigating: https://github.com/facebook/react/blob/2af4765a2af0d4de81d2f23f702d9d39d8917a0b/src/renderers/dom/client/syntheticEvents/SyntheticEvent.js#L177
@gaearon
LGTM
I created a noop renderer to have something to get started from.
> have they thus far been informal and undecided and this PR is just to flesh them out?
Also, for the record, I don‚Äôt understand what `Fiber`s are either yet üòÑ . The `EffectHandler` and `EffectTag` reminds me of [this post by @sebmarkbage about algebraic effects](https://esdiscuss.org/topic/one-shot-delimited-continuations-with-effect-handlers). The gist of ‚Äúeffects‚Äù in [Eff](http://www.eff-lang.org) is that functions can throw ‚Äúeffects‚Äù and not just errors, and their callers can ‚Äúcatch‚Äù these effects, do something, and then yield back to the child function.
> Also, for the record, I don‚Äôt understand what Fibers are either yet üòÑ . The EffectHandler and EffectTag reminds me of this post by @sebmarkbage about algebraic effects. The gist of ‚Äúeffects‚Äù in Eff is that functions can throw ‚Äúeffects‚Äù and not just errors, and their callers can ‚Äúcatch‚Äù these effects, do something, and then yield back to the child function.
@zpao @spicyj
Bah, I thought I fixed the babelrc packaging issue with #6617. Sorry about that. I'll try that again‚Ä¶
Thanks! And thanks for catching the issue with the babelrc. I have a proper fix for that now so we'll avoid the issue in the future.
Seems good. Grunt is weird.
Possible enhancements:
LGTM
–†–µ–∫–æ–º–µ–Ω–¥—É—é –ø–æ—á–∏—Ç–∞—Ç—å http://www.vavilon.ru/noragal/slovo2.html ‚Äî –º–Ω–æ–≥–æ –ø—Ä–æ–±–ª–µ–º —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ—É–∫–ª—é–∂–∏–º —è–∑—ã–∫–æ–º. –ù–æ –µ—Å–ª–∏ –ø—Ä–∏—á–µ—Å–∞—Ç—å —Ç–µ –º–µ—Å—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ —è –ø–æ–º–µ—Ç–∏–ª, –≤ —Ü–µ–ª–æ–º –±—É–¥–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
@zenjava can you provide a jsfiddle that demonstrates the issue?
Also, I'm wondering if this might be an issue unrelated to React, because it appears you are breaking out of React and interacting with the element directly.
Also, looks like there are merge conflicts.
Ok, thanks @Yaxian and @keyanzhang!
Ping @tony99nyr
Thanks @tony99nyr!
(There's also little chance of merge conflicts, which would be the typical reason for pushing forward.)
This way it‚Äôs easy to trace any prop up the tree to the `state` it originated from.
On the other hand, this is an anti-pattern:
There are a few things contributing to the difficulty:
A few ideas:
- investigate lerna, could be helpful with the multiple packages we have, though we ideally want to disentangle the releases
@gaearon updated the pull request.
@sebmarkbage
@sebmarkbage @zpao
There's a bunch in here so getting this up to track now that I pulled in everything that wasn't RN related.
#### Variables
Therefore, I propose the following new system:
### Proposed System
#### Variables
It's a little surprising that the codepath is even being hit, maybe that's a bug too, but there should clearly be some sort of `if` check in that area.
It sounds like @Aweary might be giving it a try. If not, then you are more then welcome @RaitoBezarius
cc @zpao
This is just the jest update, not the Jasmine 2 update correct?
**Tests**: All existing unit tests pass, and I added about 90 or so more for the new code path.  I realize that might seem like overkill, but I found there were a surprising number of special cases and fiddly bits.
The build isn't passing, but the error it's giving is pretty strange. I'm going to close and reopen to force a second build just to make sure the error is reproducible.
@ljharb thanks for replying!
> like {'a'}{'b'} versus {'ab'}?
@aickin Amazing work!
- Webkit/Blink-based browsers seem to do better with DOM walking, with anywhere from 5-20% perf gains on total startup time.
- Internet Explorer 10 & 11 look pretty bad to me at about 60-80% worse in total startup time.
@aickin Awesome!  Just FYI, this PR was at the top of our agenda during our team meeting on Friday, and was the main topic of discussion for the rest of the evening.  We're all super excited!
@aickin Is that an accurate response?  Any thoughts / anything you want to add?
@spicyj: thanks for your reply! @jimfb: thanks for chiming in! There's a lot to address here, but I'll do my best to cover it.
(I should note that @jimfb was extremely influential in my thinking here, but these were my conclusions and I do not claim to speak for him.)
> Can you tell me more about asynchonicity?
As a side note, am I wrong in thinking that's really strange behavior for `className={true}`? Even more weirdly, that means that `<div className/>` renders as `<div class="true" data-reactid="2"></div>`. Huh.
> As a side note, am I wrong in thinking that's really strange behavior for `className={true}`?
> Even more weirdly, that means that `<div className/>` renders as `<div class="true" data-reactid="2"></div>`. Huh.
Yeah, that's weird.
> Yeah, that's weird.
- I more or less followed the strategy outlined by @goatslacker above; I first wrote a bunch of unit tests against the current code base to characterize exactly how the current SSR code behaves. All told, I wrote about 140 or so new test cases. For many of the test cases, I run them against multiple different rendering scenarios (server render to string, server render to stream, clean client render, client render on top of server string render, client render on top of server stream render, and client render on top of bad markup). This means that the renderer test ends up running about 620 actual test cases. I think this gives pretty good coverage of all the special cases I found, but I'm sure there are some cases that I haven't found. I'd love for folks to let me know what they are!
- Are there any funky corner cases in rendering you know about that I missed?
@zpao Accept / decline?
@gaearon I have slightly more mixed feelings about this PR.  I tend to think it's probably sufficient to give the user a nudge in the direction of using refs, but a full fledged example here seems like overkill.  Especially since there are many other equally valid use cases for using events.  For instance, suppose you want to imperatively clear an uncontrolled component.
@gaearon Thoughts?  I don't feel strongly one way or the other.  It's just that attaching refs is intended as an escape hatch instead of an endorsed pattern, so a little side-note seems sufficient.
@hotay As per the note at the bottom of http://facebook.github.io/react/docs/reusable-components.html#stateless-functions, stateless functions do not have backing instances.
@yuji0602 Please sign the CLA when you get the chance, so we can merge.  Thanks!
https://code.facebook.com/cla
Just noticed this was against the `15-stable` branch, will cherry-pick over to `master` to make sure we don't lose this in the future.
This is a result of the fact that you are combining the short syntax and then setting extra specific properties. This is fine for initial render, however since only `background` is updated on render, when that is set on the node, it overrides the other properties. Just like with plain CSS the order of operations is important to remember. My recommendation is to not treat JS styles like CSS because it is dynamic (unlike CSS). Either use the shortcut syntax entirely or ensure that each property you want set is explicitly declared.
https://code.facebook.com/cla
Ping @ghost
This is exactly what makes refactoring so hard because you can't reason about all these special cases. It is just too many of these to think about at once.
Assuming so, calling setState in a ref callback sounds like an antipattern. https://github.com/facebook/react/issues/6249#issuecomment-212589250
cc @sebmarkbage
I just chatted with Sebastian.  The conclusion of that discussion was "yeah, it's probably 'supported but discouraged', sounds kinda like an anti-pattern but refs are an escape hatch anyway, so do whatever you want at that point."
@dmnd How did you run into this being an issue?
@gaearon Just gotta start with profiling to see what's slow.
@gaearon We generally close out issues when things have been merged into master.  The reason is that otherwise, it's too hard to tell what is still an active item (needs to be fixed) verses things that are already fixed and remain open only to help people find them.  You could read through all the comments, but that takes time (especially if you're going through a bunch of them) and they are often nuanced with regards to remaining action items.  You don't want to read through an hour of comments, only to discover that the whole thing is fixed and no longer relevant.
@ev1stensberg
@mavisd
@ev1stensberg
@hackvertor
@moret When I run the code in your fiddle, the video appears to be muted (no sound).  That's the only thing that React guarantees; React is not required to set the attribute if it is not required.
@gaearon Just make sure @zpao and @jamesgpearce see this.  It's a pretty minor change, but since it touches the copyright header, it's good to get some eyes (potentially from legal).
Also, can you provide a simple jsfiddle that demonstrates the issue?
@rickychien @omerts If someone could try to produce a minimal repro / jsfiddle, that would be very helpful!
@rickychien @omerts Another question, are you guys using ReactRouter and/or Redux?
Fiddle: https://jsfiddle.net/ycLw3bbq/
I think @spicyj might have more context here.
@kilianc master branch.
@pricetula Hi! I hope you don‚Äôt mind that I formatted your messages so the code is highlighted. You can include small blocks in backticks (`), and large blocks between triple backticks: ```js and ```. This helps everyone read the issue a little easier in the future. Cheers!
@pricetula No problem. You are welcome!
Thanks @dlax!
cc @gaearon (seems related to #6362)
``` diff
So what would be interesting is if you followed the same steps as React is doing in both versions of Chrome and see what happens. http://jsbin.com/dekiyulane/edit?html,js,output
// na√Øve, only for demo purpose
// how to optimize this for children??
There was some discussion about taking `children` off of `props` so you might want to have a look at it for some historical context: https://github.com/facebook/react/issues/4694.
return <CustomRow data={data} />
Anti-pattern is a loaded word. It‚Äôs a tool; like any tool it has upsides and downsides. In this particular case I think it‚Äôs very appropriate.
@lambert-velir 2 things for your case specifically
Ping @eipark
Thanks @hkal
@jmm `class component` refers to things that are not stateless function components (so I think the change log is technically correct as-is), but should probably make that more clear.  Your new wording is slightly less precise given the React vocabulary we use, so we're still going to need to massage it a bit.
How about this as an alternate wording:
> It's also confusing that so many terms are used somewhat interchangeably: component, component class, React class, class component, ES6 class component, probably more. I'm not sure class component is a good choice in any context. ES2015 component class, though a bit awkward, would probably be better.  I'd appreciate if you could tell me where I went wrong with the React vocabulary.
Anything still confusing about this draft?
This sentence structure still feels awkward to me.  How about:
What do you mean by ‚Äúhave a value of undefined‚Äù?
Thanks @syranide and @satya164!
cc @spicyj @jquense
@jchitel If you can provide a fiddle that demonstrates something you believe is unexpected behavior, let us know and we can re-investigate.
Now there are mitigating factors for all these things:
3) The [ECMAScript Zones proposal](https://github.com/domenic/zones) could allow for overriding the default scheduling of Promises. Allowing us to defer work that is not high priority. This would make the whole idea of push oriented values more palatable.
cc @zpao
Inline styles (read: JS styles) is something we're investigating more over the coming months. I'm sure that will shape how we think of styles in React in the future, but right now we aren't planning on changing anything. The issue you're having and other related issues are all a part of the considerations.
@Wildhoney What will happen if you mount into a div that lives in a document fragment?  Will this do the right thing, or do we need to walk up toward the top to discover the fragment that we live within?
@Wildhoney Ideally there would be a fast/easy way to get it directly.  Worst case, it might require walking up the DOM nodes' parentNode until you find a document/fragment (or null).  Obviously we'd only want to do that on initial mount and cache the value (maybe emit a warning if we can't find a good root).
> #### Challenges
@zpao Na, that's just a bug fix.  Rendering 0px works in many browsers, but not all.  Rendering "0" is always the correct behavior, but rendering "0px" is sometimes incorrect/broken and will result in complaining browsers (Opera?).  I don't think it's possible for someone to depend on it rendering "0px" as the intended behavior of their application.
@dlong500
What does the rest of that warning say?
Seems like this would be a problem Babel spread too. Typically this is the kind of issue a polyfill should test for before assuming compatibility of the native impl.
^ cc @spicyj
@buzinas In React 0.14.8, we had an internal polyfill for `Object.assign`.  In React 15.0, we started using the native `Object.assign` (if/when available) instead of the polyfill.  Thus the problem when the native implementation of `Object.assign` is buggy.
Hmm, this is a tricky one.  I don't like setting the return value to `void` because that's technically not correct and might confuse people.  I don't like `ReactComponent` because we don't want people glancing at the signature and seeing that return value.
@m4tthumphrey
@gaearon How would you feel if we changed that whole sentence to:
Sorry that's not obvious. That's one of the downsides of introducing new syntaxes :)
https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md
cc @vjeux @ide
There is a typo in the fiddle. You are passing ‚ÄúMidloth**ai**n‚Äù but the value is ‚ÄúMidloth**ia**n‚Äù.
When a child is subscribed to a Flux store, and the parent fires an action in `componentWillUnmount` to clean up the store state, the child has to include special code for existence of this slice of state, or it would fail to retrieve it (potentially with a null reference).
@gaearon
cc @sebmarkbage
I haven't tested 0.10 but I'm surprised with the output. Any chance you are behind some sort of firewall that makes npm registry requests return gibberish?
### Questions
@spicyj:
@mridgway:
@goatslacker also, thanks for writing this up! üëç
@goatslacker
- Multiple document sizes
@aickin Great work!  This is amazing!
@bryzaguy Thanks for the pull request!
- [x] update fiddles
<NotificationBadge />
BlueBar.childContextTypes = {
Ok, I think this is good to go now.  Here are some fiddles that demonstrate everything working:
> http://jsfiddle.net/ub6ec5rt/ (fixes Ben's concerns from https://github.com/facebook/react/pull/5680)
Is there a reason these are different? I would have thought we'd want the same exact behavior.
@Sumei1009 updated the pull request.
Ping @Sumei1009, would you mind making these changes?
Ping.
@mijamo Yeah, that solves some of, but not all of, the overhead that @brigand mentioned.  React components will still have a proptype object defined with a bunch of empty function references.  But yes, it's an improvement :).
@gaearon beat me to the punch.  His answer is exactly correct. üëç
- Unknown property during initial render.
Ping @troydemonbreun
@gaearon Thanks, that is excellent info! To be sure, the last commit = "Add new ReactPerf" 6a0a824? (Chronologically, it seems to come after your comment, unless I am misreading GH)
Questions:
@gaearon Thanks for your input.  Do you mean inside `ReactDOMComponent.mountComponent`? Is that a property on this, or?
@gaearon Do I need to pass in debugID (as a standard) if I am not using it?
@ibhub I don't understand your question/comment.  React v15.0.0 does contain a render function, and `ReactDOM.render` is not deprecated (only usage of the return value is discouraged, the behavior is unchanged).
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
Note that it may be a tiny bit unconventional to use usernames to link to PRs. I think it makes sense though. At first I used `([@user] in [#PR])` but it was _way_ too noisy, and PR numbers don‚Äôt really convey any information. I think linking from user names to PRs is a good tradeoff between keeping the log readable, acknowledging the contributors, and linking to detail for interested parties.
@gaearon updated the pull request.
@gaearon updated the pull request.
cc @vjeux as he‚Äôs the one looking into this stuff.
Can you provide a simplified jsfiddle that demonstrates the issue?
Babel.
Are we not checking for unexpected warnings in tests? Should we? Curious how this crept in unnoticed.
If the user is using a Babel polyfill, would a component defined with `PropTypes.symbol` print a warning?
A couple alternatives:
// after transform
@mijamo Yes, doing this was a mistake. We shouldn‚Äôt do this again. cc @zpao
In a way... Causing havoc is sometimes a good thing. It helps enforce expectations. We should avoid if possible though.
What is the use case for using Symbols as state keys? State is already private and is never shared so it‚Äôs not clear what the benefit of supporting Symbols as keys is. Would you mind sharing your thoughts on this?
cc @sebmarkbage
@spicyj Ah, yeah, probably true.  I have no idea what the redux devtools extension is doing, but it's entirely conceivable that they're reaching into internals, in which case, it would not be a React bug.  If the issue doesn't repro without the redux-devtools (which @Dattaya's comment seemed to imply) then that would seem to imply it might not be a React bug.  But yeah, that's why I asked @gaearon.
Maybe @zalmoxisus has some insight into this.
Yes, sorry for any ambiguity, I was referring to the chrome extension.
@Dattaya Thanks for posting the repro case. Hopefully one of us can look into this.
#2410 is a known problem which _might_ cause this but otherwise that should only happen if something throws an exception (and maybe not even then).
@marcolanaro When I said "Engineers trying to be 'helpful'", I was referring to the engineers who wrote the W3C spec, not to you and other users of React.  My commentary was intended to apply to infrastructure code (browsers/react/etc) and not to application code.  Sorry for the ambiguity.
(http://react.jsbin.com/towaxoqaya/edit?html,js,output)
throws
Reviewers: @zpao
@gaearon updated the pull request.
@gaearon updated the pull request.
I searched the codebase for ‚Äúmock‚Äù and found this:
Related issues:
@gaearon An alternate solution that I like better is to use csstext as per https://github.com/facebook/react/issues/5397, which IIRC cleanly solves a superset of these issues.
@Sumei1009 updated the pull request.
Ping @Sumei1009
`React.__SECRET_UTILS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED_UNLESS_YOU_ARE_ENZYME_IN_WHICH_CASE_ITS_FINE`.
- Conventions like `invariant`, `warning`, `__DEV__`, and infra around them.
- Composite components
- Native components
- Synthetic events
Some incoherent notes I made earlier about design philosophy:
- but we're moving Flux into the core (maybe)
In what ways is React Native more modern? Lots of it builds on top of React so is a little higher-level but otherwise I tend to think the coding styles are similar.
I wonder if reading properties off a flash object requires doing some expensive IPC / context switches.  We could potentially special case flash, but flash is dying anyway so I'm not sure it's worth the headache.  We would probably take a PR for this, but probably wouldn't do it ourselves because there are higher priority issues.
That's a good question‚Ä¶ @syranide - was there any discussion about that?
@spicyj Is my interpretation correct?
Ping @PiereDome
Thanks @maherbeg!
@ajgreenb updated the pull request.
Ah, nice find. The issue is that `elem` in that code is actually `window` (or `form`) at that point and thanks to the magic of named inputs as properties on `window`, this is screwing up. I wonder if there are other cases like this‚Ä¶
@zpao That was my first thought too, in which case we could special-case window, but I don't think that's quite right.
@petetnt The problem is that the headers aren't being set on the fb.me server, so the python gist is irrelevant / will not solve this issue.
http://jsbin.com/qelademodi/1/edit#file
@gaearon FWIW, `ReactDOM.render()` does manage to put one in: http://jsfiddle.net/j5hh76h2/
@sebmarkbage
<InnerFoo bar={store.getMyVariable()} noise={store.getMyOtherVariable()} />
</OuterConnector2>
@JaRail You can't clone DOM nodes, since the whole point here would be to retain referential identity.
@ahmedghoneim92 updated the pull request.
Ah, thanks @sthzg, we had neglected to consider SSR.  You're right, we need some sort of API!
@vitalybe What is your use case for refs? If you just set an instance field it should make absolutely no difference whether it is reattached on every render or not.
Edge seems fine though.
cc @mwiencek if you're interested
Can you provide a jsfiddle which demonstrates the issue?
You can fork http://jsfiddle.net/9kungxn4/
@mbrio @JacksonGariety What browser are you guys using?  Any chance you were using Chrome 49?  We've seen a similar bug (https://github.com/facebook/react/issues/6472) and I'm unable to reproduce in Chrome 50, so I'm wondering if this might just have been a chrome bug.
@mbrio @JacksonGariety Can either of you provide a jsfiddle that demonstrates the issue?  You can fork http://jsfiddle.net/9kungxn4/ and use `ReactDOMServer` to get access to the server-side-rendering logic if you need that for your repro.
@damienleroux @gbhrdt I am not sure.  We have a couple of fairly complicated repros (100-ish lines, with dependencies like ReactRouter and Redux) of a similar bug which may or may not be related.  We don't yet have any repro that is super simple/actionable and demonstrates a bug in React as oppose to ReactRouter/Redux.  So to answer your question, if you can provide a simple Repro, that would still be super helpful, otherwise we will look at the other issues (https://github.com/facebook/react/issues/6538 and https://github.com/facebook/react/issues/6371) and loop back to this one later.
@TooTallNate
setTimeout(() => this.setState({ foo: 'baz' }), 1000);
@03eltond The [code you linked](https://github.com/reactjs/react-router/blob/master/modules/Router.js#L77) calls `setState` directly (not in a setTimeout) which is legal and entirely different from the example @TooTallNate showed.  Does anyone have a simple repro (jsfiddle) that does not use setTimeout&friends?
cc @hellendag because I hear he knows something about all of this.
Thanks @antoaravinth!
@yaycmyk  It's a little annoying to add unit tests for every type of event.  Since the native events need to be forged, they're of minimal value anyway, since all you're testing is the forged event.  Such tests would make a lot more sense if/when we do in-browser testing (but the tests would need to be written differently anyway, using webdriver/whatever, which we currently don't support).
(@zpao plz pick for 15.0 final)
Err, I was going to request changes @spicyj
Specifically, this seems to be hacking around the issue (use of `in`), and in a not-very-good-way.  For instance, if `Component.displayName = undefined;` then this will use undefined, which is worse than `Element`.
@zpao and @spicyj, if you have any objections please let me know.
Thanks @nhunzaker and @gaearon!
@gaearon Is this safe in 15.0.x? Seems like could be potentially behavior changing. Or does it just fix a bug in some browsers?
@zpao
cc @tomocchino whitelists... :P
Special cases suck.  You have differences anyway because React html elements use camelCase and svg attributes use kebab-case, among other things... unless you want to write some fancy logic to try and normalize the differences and automatically apply transforms to recapitalize and insert hyphens.  But it's pointless to perform computation and special-case checks when you could just pass them through.  It's much cleaner to have a simple "pass-through" rule for svg, and we should apply that rule consistently.
EDIT: Actually, you couldn't write an automatic rule, because SVG is inconsistent about the names of their attributes.  You have camelCase attributes like `pointsAtY` and `surfaceScale`, but you also have kebab-case ones like `underline-position` and `unicode-range`.  You're not going to be able to get around the inconsistencies between SVG and HTML.
We're exploring a couple options. I think at the very least we'll make sure `className` continues to work. The extreme option might be to backout all of this SVG work and get us back to 0.14 support. That's obviously not ideal but is available to us. I think I'm personally leaning towards backpedaling on the "pass everything through" approach and expand the list of supported attributes in the whitelist. This would mean we'd no longer support hyphenated attributes and would go back to the camelCase mapping. I don't see this as a huge problem as it maintains current (0.14) behavior, matches what we do for HTML attrs, and is something we have to continue doing for a handful of attributes anyway for the namespaced attrs (`xlink:href`).
http://jsfiddle.net/k9u4r28j/
Powered by the awesome Algolia :)
#paternityleave
Fixes #6187 (hacky but it seems to work)
Can you create a simple jsfiddle that demonstrates the issue?
I agree, the behavior of the synthetic event sounds weird, given that the other events are not firing.  This is probably a weird side effect of some event api smoothing that we're doing (and apparently we have a bug there that is causing nonsensical events to be fired).  I tried your fiddle on my android (different model/version) and did not get any of the mysterious synthetic events (at least as far as I can tell, I got no events on the android).  I don't have a phone matching the specs you mentioned, so it's a bit difficult for me to debug further on my end.  If you're able to debug on your end and submit a PR, that would be much appreciated!
Also, @gaearon Those links are great, I'd be totally ok with linking to those docs until we release the new react perf stuff.
@ffxsam The easiest way is to use the bower builds:
Also, I think the location of this code seems wrong.  You put this logic inside isRequired, which means it will only fire if the prop is required, but we want to fire in all cases of an incorrectly cased prop.
Heh, this is half of a diff I started writing (though with some different indentations). I guess I'll put up the rest now :)
@haohcraft
Sounds like autobinding might be screwing with the factory somehow.  I'm a little surprised that the code you mentioned didn't work, do you have a minimal jsfiddle?
I'm also curious to hear why you are doing `this.InsideComponent`.  It sounds like some sort of weird nested class logic.  In general, it's probably cleaner to just define another top-level class.
> I need them to be dynamic
@mariusrak, you can always store the state in the parent and pass it down explicitly to the child.  In general, anything that can be done with nested classes can be done without nested classes.  I think nested classes (like inheritance) are a bit of an antipattern anyway.  I would recommend finding an alternative structure for your code.
@mariusrak No, there are no plans to deprecate `createClass` in the near future.  It's just in maintenance mode, and new development work goes into optimizing ES6 classes and stateless functions.  Most of those features you mention (mixins, autobinding, etc) were intentionally omitted from the ES6 API after we gained a lot of experience with those APIs and determined that they were not good patterns.  Mixins make it much more difficult to maintain your code because things get injected sideways, autobinding leads to issues exactly like the one you're describing in addition to many other edge-case issues.  The recommendation is still to upgrade to ES6 classes, since we believe it is a better API, but `createClass` will continue to work afaik.
@bORm You'll want to take a look at https://github.com/facebook/react-devtools/issues/308
@bORm This is turning into a usage question (since there is already an open issue for solving what you're asking, as per above); we use github to track bugs in the React core and redirect usage questions to other sites like StackOverflow.
@JustBlackBird If it was forgotten by accident, it would be `=== undefined`.  If it was passed explicitly but simply has no value, it would be `=== null`.  In the interest of API intuitiveness, It's probably not a good idea to use a non-standard sentinel value.
So, given that fiddle, what would the warning text be?
We generally aren't afraid of a little copy-pasting.  Premature consolidation can actually make readability worse (https://www.youtube.com/watch?v=4anAwXYqLG8).  For instance, when reading the tests, I became a little frustrated when I hit `testKeyAccess` because I couldn't see what the test was doing just by reading the test, so I had to scroll up to the definition of `testKeyAccess` only to discover that it was doing something with `opts.name` but I couldn't remember what that was and so I had to scroll around two more times.  Not a huge deal, but something to consider.
The "if so" is a little confusing.  How about:
@swaroopsm updated the pull request.
@swaroopsm updated the pull request.
@swaroopsm updated the pull request.
@swaroopsm updated the pull request.
Whoops, read above as "mixin B".
@swaroopsm updated the pull request.
@swaroopsm updated the pull request.
@swaroopsm updated the pull request.
cc @sebmarkbage
> sorry i'm trying to figure it out, i don't have any experience with Rake [image:
I don‚Äôt feel strongly either way. I wonder why this hasn‚Äôt come up before though.
I‚Äôll defer to @zpao on whether we want this.
Yeah but you‚Äôre not using SimulateNative, are you? I‚Äôm not sure who‚Äôs using it because it‚Äôs undocumented but quite extensive. Maybe Facebook uses it internally; I haven‚Äôt checked.
Foo.propTypes = {
- [x] @antoaravinth
- [x] @matthewlooi
- [x] @csbok
- [ ] @hejld
- [x] @bellanchor
- [x] @songawee
- [x] @tmysz
- [x] @JinxiuLee
- [x] @raineroviir (I also pulled your email since Macbook-pro.local didn't seem like what you would want)
- [x] @cbrwizard
- [x] @puppybits
- [ ] @kryogenic
- [x] @prometheansacrifice
- [ ] @wikinee
- [x] @Zhangjd
- [x] @adraeth
- [x] @zjjw
- [ ] @koh-taka
- [ ] @leeyoungalias
- [x] @nakazye
- [x] @translucens
- [x] @shogunsea
- [x] @iawia002
- [x] @rgarifullin
It's not entirely clear what you mean by "Child elements not showing anything on componetWillRecieveProps and componentDidUpdate."
Sorry, we can't help you without a reduced test case. The video almost helps but there's too much going on with your code. I know it seems like a small change is making the difference and you're right but there's still a lot happening in the other code. This isn't a support forum but where we track bugs with React. Right now we can't discern if what's happening is a bug with your code or React. Try StackOverflow as Jim mentioned or if you can reduce to something much simpler, try again here.
@spicyj Do we still do some cheating with the props object in a React-internal component? I remember us doing something in the past‚Ä¶
@sethkinast Can you give more details? React.createElement already does ignore the prototype chain so it is probably an error to use an object with a prototype. Moreover, React.createElement pulls off the "key" and "ref" properties so you'd also get strange behavior if those were to be present in the models you're using as props ‚Äì and it's not clear to me what you would write if you _did_ want to set a key or ref. We generally suggest putting your model one level lower if you want to pass it unchanged, so props would be like `{model: ...}` and you use `this.props.model`.
@jimfb @prasannavl
Yeah, definitely seeing your points. On the other hand it feels like having different packaging for CommonJS and UMD might get really confusing: https://github.com/facebook/react/issues/5413#issuecomment-154491150.
http://jsfiddle.net/72d51k3q/ :
Please do. I'm suspecting an issue on your end as we've never seen hidpi being anything special, but would love to be proven wrong
Ping @raineroviir
cc @zpao
``` yaml
ecmaFeatures:
Appears to work for me on latest/future: http://jsfiddle.net/wwyabmyx/
Thanks @yaycmyk
class Bar extends React.component {
<Foo text={"baz!"} onClick={this.props.handleClick}/>
What do the red errors say?
I don't know why that would be. You'll probably have to do more digging and figure out what's going on if you want this to be fixed since I haven't heard of anyone else hitting anything like this.
- jscodeshift: https://github.com/facebook/jscodeshift
@koba04 updated the pull request.
It is dev-only.
- I'm not entirely sure what you mean by "for select tag state.selectValue was changed only one time".  If you think you've found a bug in React, please create a simple jsfiddle that demonstrates the issue using an onChange handler, and we can re-investigate.
@nakazye You can just replace the code sample in all the languages.  The wording can be updated later if it is out of date - the examples themselves were refactored a little bit, but are conceptually the same, so it should be safe to upgrade them.
@nakazye updated the pull request.
At first glance, that actually seems pretty clever!  cc @sebmarkbage @vjeux
After some discussions with Sebastian, and thinking on this issue, I agree that this doesn't elegantly handle the edge cases for the reasons mentioned above (classic problem with proposed solutions to animation).  For this reason, I'm going to close out the issue.  But feel free to continue the discussion on this thread, and we can re-open if our thinking changes dramatically.
@ljharb low.
@syranide specifying the `alt={true}` does indicate a usage error, should that be a warning?
@satya164 and @syranide are correct.
- [x] Make sure wasted measurements are useful (something‚Äôs off right now)
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
### Funny Batch
As an extra safety measure, we will absurdly include an update of `A` inside the `C` update. This probably doesn‚Äôt make sense technically but we want to make sure the calculations are _completely_ independent of the stack order no matter how bonkers it is.
A.owner = undefined
### Exclusive
@gaearon updated the pull request.
(Note that the terminology is a bit confusing there. The `element` refers to an internal instance in React.)
I think you mean the parents. We use the term "owner" for the thing that created the element which is not the same as the thing mounting it - which is the parent. To track inclusive time you need the parent.
It is unfortunate that tracking the tree might add a lot of overhead but it is probably nice to be able to visualize this in terms of a full tree.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
cc @spicyj @sebmarkbage
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
## Wasted Render
- Find the components that would be most effective at short-circuiting the tree.
## Expensive Render
## Expensive Lifecycle
- Find outliers with longer lifecycle times than usual.
## Unintended DOM Operations
@gaearon updated the pull request.
@gaearon updated the pull request.
Seems like combining WTF-like ‚Äúscopes‚Äù approach with ‚Äútimers‚Äù that measure specific chunks of work gives pretty good results. You get the big picture from ‚Äúscopes‚Äù (which correspond to the call stack) but you can see the details (including out-of-stack stuff like `componentDidMount` and, in the future, incremental reconciler updates) when you want to focus on them.
542   |  App             |  8             |  1               |  13      |  No
<img width="856" alt="screen shot 2016-03-03 at 21 58 46" src="https://cloud.githubusercontent.com/assets/810438/13511106/af131ae2-e18b-11e5-96e2-103453183894.png">
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@Sawtaytoes As I have already mentioned to you on other threads, StackOverflow is the more appropriate place for usage questions.  This is most likely an issue with your code/configuration, rather than a bug in the React core.  For this reason, I'm going to close out the issue.  If you have a simple jsfiddle that demonstrates a bug in the React core, we'd be happy to re-investigate.
`&` is not legal, as mentioned in https://github.com/facebook/react/issues/5223#issuecomment-184373913.
The mutation case I had in mind was markup that looks like this:
I'm mostly certain we don't have that in React itself. One of the common cases I've seen that happen which is less obvious is duplicate props in JSX. eg `<div data="foo" data="bar" />` will result in a props object with duplicate keys `React.createElement('div', {data: "foo", data: "bar"})`. Be on the lookout for that, maybe enable a lint rule to prevent it.
@zpao Well, babel could warn/throw at transformation time.  And no matter what, babel should probably produce valid/legal output.  Filed: https://phabricator.babeljs.io/T7100
@iamdustan updated the pull request.
@iamdustan updated the pull request.
cc @spicyj because he wrote the original comment.
Ping @spicyj @sebmarkbage
Do we need to make a branch cut before we land?
> Ping @spicyj @sebmarkbage
There are mutations that happen during this phase.
This will definitely leave the system in an inconsistent state.
cc @sebmarkbage
There are a few concerns that I heard about `ReactPerf`, in the order of importance:
I talked to some¬†people on the React Native about this. What I understand so far is:
An existing issue is that AOP style measurement isn't always very convenient because when we wrap recursive function calls it is difficult to measure the "self time" of a component.
Would `inclusive` even make sense in a world like this? If child update is deferred to another batch than the parent‚Äôs reconciliation, does that count as inclusive time towards the parent?
And why can the store not be present at the first render?
Try it in this fiddle: http://jsfiddle.net/9kungxn4/
Also, in your fiddle, you're trying to map over a prop that you never pass in, thus the error.
@sebmarkbage @spicyj
I'm not sure what the long-term goal is but maybe @sebmarkbage can confirm if this is on the right track.
Seems to be working for me but cc @benigeri in case.
@ryankaplan Personally, I'm agnostic about the whole change.  If the change is helpful to you/others, and doesn't cause undue code complexity or perf regressions (which it doesn't appear to do), I generally lean in favor of taking it.  However, I'm not the only person on the team.  The value proposition in this case is fairly marginal, so it would be possible for someone to find a reason to block it.  Both your proposals seem fine to me.  My best guess is that we would likely take the change since I don't see a reason to not take it, but I can't make any promises.
Ping @ryankaplan: did you want to propose a PR, or what's the status on this?
@ankeetmaini Can you create a unit test which demonstrates the problem?
@truongduy134 I'll need to do some checks internally and report back.  It will take at least a few days.
https://facebook.github.io/react/docs/getting-started-zh-CN.html
cc @jquense
For reference, @solugebefola is talking about https://github.com/reactjs/react-magic/pull/45
@nicolabortignon Are you working on a fiddle to demonstrate this issue?
¬Ø_(„ÉÑ)_/¬Ø
/* do something fancy here (your ReactDOM.onUnhandledException logic) */
@gaearon Not all events are attached via window.addEventListener.  For example, you could have events fired within an iframe, or you could have progress events which do not bubble.  For this reason, I _think_ there are classes of events which you would miss.
Do you have a jsfiddle that demonstrates it coming up as false?
Does it work in this fiddle: http://jsfiddle.net/9kungxn4/ ?
@spicyj @syranide
@koba04 updated the pull request.
Ping @koba04
@koba04 updated the pull request.
@koba04 updated the pull request.
@koba04 updated the pull request.
@koba04 updated the pull request.
@koba04 updated the pull request.
Thanks @koba04!
@esseswann said:
@esseswann A parent can reason about about all the possible props that it chooses to forward to its child, but it can't easily reason about all the things a grandparent might do if the grandparent is allowed to bypass the parent's API.
It also gets complicated because (if we used an error-boundary as the catch point), it's not clear what the semantics should be if the parent of an error boundary passes a callback into the child of an error boundary, and an exception is thrown when the child invokes the grandparent's function.  In that case, the grandparent is the broken component (ie. the one in a potentially erroneous state), but the child is where the exception pops out of the system (thus, we don't know to fatal the grandparent).
@zpao
I think this is a bug.
@iamdustan updated the pull request.
@cdonohue ping
@zeke updated the pull request.
(cc @azich too)
Thanks @tmysz!
@TheBlasfem updated the pull request.
@sebmarkbage @spicyj
Ping @sebmarkbage @spicyj
Can I get a second opinion on this? @spicyj ?
@mdolbin Do you want to update as per @spicyj's comment?
@SimenB Aren't all `promise-handlers` just handlers for asynchronous data requests?  It's a slightly different API, but it's conceptually the same, and we can't call out every possible API/permutation/usecase.
@TheBlasfem updated the pull request.
@TheBlasfem updated the pull request.
@TheBlasfem updated the pull request.
@TheBlasfem updated the pull request.
@TheBlasfem updated the pull request.
@TheBlasfem updated the pull request.
Thanks @TheBlasfem!
// mozilla "fork"
I will admit I'm both confused and intrigued at the same time.
Is that even measurable though?
Tangentially, we could even use this to warn when accessing an event after it has been returned to the pool?
There are lots of things that I believe should be errors, but the javascript community seems to like things that fail soft.  That was one of my biggest culture shocks, coming from a java background where the community believes that things should always fail super hard.  I've given up on that fight, need to choose my battles :P.
> Tangentially, we could even use this to warn when accessing an event after it has been returned to the pool?
@sahiltalwar88 DOM components are anything built into the browser, composite components are anything you write yourself (or import).
My fiddle was demonstrating that stopPropagation does work for the child/parent relationship.
I think you might be confused about what `stopPropagation` does and doesn't do.  `stopPropagation` does not prevent the browser from responding to an event: http://jsfiddle.net/rajo091h/
My fiddle is using a future/experimental version of React, so it's possible the issue was just fixed and not yet released.  Either way, glad to hear it works in the latest fiddle!
@yaycmyk I don't think it constitutes a memory leak.  Persisting the event just means it won't be returned to the synthetic event pool, which should be fine.  It will still get garbage collected when all the references are dropped.
@koba04 updated the pull request.
@koba04 updated the pull request.
cc @zpao is the proptypes person.
To avoid the warning, you can bail out of React (https://github.com/facebook/react/issues/2477#issuecomment-173315553) and then call React.render() in your contentEditable container node, which will not cause us to warn (afaik).
@spicyj @syranide
@spicyj @syranide
You and @syranide have the best understanding of this code, which is why I sent it your way from the very beginning.
Maybe some crappy geolocation or something?
cc @sebmarkbage
@sebmarkbage A tad overkill and might impact performance, but having both (`[Infinity, 0xeac7]`) would work right? (the object should be reused)
@jacenko can you please sign the CLA so we can merge?  https://code.facebook.com/cla
Good find, but it's really weird that it would exhibit `O(n^2)` running cost for something which intuitively should not have it:
@syranide Check out my nearly identical fiddle: https://jsfiddle.net/vr0vquag/
> Two fiddles perform virtually identical operations, but there is a 10x performance difference.
@yangshun https://jsfiddle.net/sxqh5csz/
This should be illegal:
@syranide No, afaik, https://github.com/facebook/react/pull/5680 is trying to fix https://github.com/facebook/react/issues/4618 when using uncontrolled components.  `defaultValue` is always meaningless for controlled components.  https://github.com/facebook/react/pull/5680 does add a unit test that includes an element with both `value` and `defaultValue`, but I complained about that and hopefully it gets fixed before that gets merged (seeing that PR was the reason I created this issue).
http://jsfiddle.net/e47hj19q/
cc @zpao for release planning/scheduling.
@rogierschouten @syranide @spicyj Any thoughts on why?
Anyway, @rogierschouten you definitely do not want to defer setting the value, it will break your selection and introduces other subtle issues. Controlled inputs work on the idea that setting it to the value it would have normally become does **not** actually update the value, so the native behavior is kept (and selection is intact). If you deviate from that React has to update the value and then there is no knowledge about what to do with the selection. When you defer you effectively break this because you explicitly tell it to restore it to the previous value and later set it to the new (but there is no information about the selection now).
@spicyj @syranide
Ping @spicyj @syranide
@spicyj @zpao Do I have `process` installed globally/locally somehow, or is this not an actual dependency?
cc @spicyj @syranide Why do we not provide `event.srcElement` on synthetic events?
@travisbloom can you provide a jsfiddle that demonstrates?
@zpao done.
@brigand
There are a few alternatives:
const original = {a: 1, b: false, c: 'banana'};
Can you provide a simple jsfiddle that demonstrates the issue?
@atilacamurca
NaN is a fine (if weird) value to pass so we should probably just handle it explicitly like we did for props in #3148.
@ickata Appears to work for me: http://goo.gl/tQUx6V
@ickata The execution order is correct.  The problem there is scoping.
@ickata Looks like this scoping issue is fixed, let me know if you run into any further issues.
@spicyj @syranide We really want to be more responsive to @jquense's PRs (he has been doing really good work, and has been very patient with us).  Can someone with expertise in this area of the core take a look?  Thanks!
@ir-fuel The approach isn't scalable for several reasons.  If you have a thousand different components, you can't reasonably be making a thousand different requests (you'll need to implement batching of some sort).  If you have the same the same component multiple times, you'll want them to share a single value in memory (to avoid duplicate requests, or for consistency if the data is mutable, etc).  Also more difficult to subscribe to updates in case the underlying resource (on the server) changes (you would need to hold open a connection for every component, instead of a single shared connection).  Sideways data loading makes it more difficult for developers to reason about your application, since components are no longer a pure function of props+state (they are reading some outside data source).  The list goes on, but I'll truncate it there in the interest of time - the bottom line is that flux exists for a reason and it's a bad style for a component to make an ajax request directly.  This is a usage question, so if you are interested in that topic, feel free to discuss on an appropriate usage-question medium like StackOverflow.
@ir-fuel I recommend StackOverflow, or discuss.reactjs.org, or reactiflux.com, or quora (in that order).
@zpao ~~We don't run GCC on React so `React.DOM.input` would still exist and work, but the element it creates would be `<q>` or whatever.~~ The other way around.
Yes, _we_ don't but the goal with the GCC support was so that somebody could if they wanted (eg clojurescript).
raw     gz Sizes
raw     gz Compared to master @ 23167f287eda5ee23725a099e67d6086baa8e300
@fabiomcosta Did you verify it works with GCC?
@syranide Yeah, I agree, we don't want to break that.
@fabiomcosta I just looked at the example you posted, I think @syranide is correct, this doesn't minify safely for properties like `svg` and `progress` :(.
cc @spicyj
@syranide Yes, we don't need the "closing" tags as I mentioned in my comment but I think the behavior is simpler and easier to reason about if we keep them.
@mwiencek Yes, let's do that if you're up for it. I would like to not have the comment tags but I think it's better to be safe here and do something that we can be confident will work in all scenarios. Let me know if you run into any problems.
> @syranide Yes, we don't need the "closing" tags as I mentioned in my comment but I think the behavior is simpler and easier to reason about if we keep them.
@mwiencek Amazing work. Thank you so much for contributing!
@alcedo You can try turning off "Auto Minify" via your CloudFlare Settings control panel.  Haven't tried it myself, but that sounds like the relevant setting.  If that doesn't work, I'd recommend contacting CloudFlare support - I'd be extraordinarily surprised if they didn't provide a way for resources to be served unchanged.
Thanks @rickbeerendonk!
- Don't fix; inputs sometimes fire for noop.
@jquense can you fix the minor unit test failure?
@spicyj can you take a glance, and flag anything that you think would be a show stopper here?
@gaearon No idea, I don't we've figured out how things are going to work under the new versioning system.  My preference would be to merge into master and cherry-pick for the point releases, like we've always done historically.  Otherwise, where does new code (with potentially breaking changes) go?  We can't freeze all development until we think we're ready to do another major release.
Thanks @jquense!
Ping @jquense
@prometheansacrifice updated the pull request.
@prometheansacrifice updated the pull request.
@prometheansacrifice Can you add an explicit return statement as per above, and then I think this is ready to go.
@prometheansacrifice updated the pull request.
This looks great, thanks @prometheansacrifice!
@alayek
cc @spicyj
@shastings86 care to elaborate?  Also, please watch your attitude; at first glance, your comment appears to be very negative and not constructive - which is not the type of community we want to foster.
cc @sebmarkbage @spicyj
- Track special namespaced attributes (they still require a whitelist)
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
We have typescript and coffeescript class tests to ensure classes there behave as expected once compiled down to JS and then we also test that all of the specs stay in sync.
And @yaycmyk, the reporting seems pretty accurate so the retain lines flag would be my recommendation to you.
@yaycmyk yea, that option sort of sucks üò¢ - it doesn't support globbing as you've noticed. That's why @jdalton added code to expand those globs and write a separate config that gets consumed when including coverage reporting.
Seems like changing the runner would be much more viable, but it doesn't let us integrate the test into other FB infra and run them in React Native, so if we can avoid it and use a browser version of the jest runner, that would be ideal.
Stupid smart quotes‚Ä¶
@zpao @spicyj Those react-ids will be gone for SSR?  Somehow I thought we were retaining those for SSR in 0.15, but maybe I'm just wrong.
cc @zpao
@gaearon updated the pull request.
ping @spicyj, can I merge this?
@adnasa updated the pull request.
@lovedota As per above, it makes no sense to invoke that method.  If you need that method, you should be using regular rendering instead of shallow rendering.  Regular rendering allows the render process to complete and can thus legally invoke `componentDidMount`.
Best bet will be to lint against this. Since JSX just gets compiled to objects (either with that constantElements option, otherwise just the props themselves), what you're actually having a problem with is that duplicate keys in objects is a strict mode violation. There's no way at runtime to know that you had duplicate keys (if you didn't get a strict-mode parse error), so React can't protect you. Since this is in JSX, built-in lint rules don't work so you want something like [this rule](https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-duplicate-props.md) from eslint-plugin-react which will warn you.
Hmm, yeah, events are tricky.
@spicyj I don't agree, put an input on a page, type into it and inspect. That's the convention set by the standard/browsers, we will be explicitly going against that and controlled inputs will thus differ from uncontrolled inputs in behavior too. Any change to a controlled input that doesn't emit an event (like autofill) will also cause unexpected behavior as the attribute will then not mirror the property until updated. What is the argument for using attributes?
@syranide `.defaultValue` and the `value` attribute are directly linked:
> @syranide .defaultValue and the value attribute are directly linked:
@spicyj If you set the `value` attribute yes, not if you're setting the `value` + `defaultValue` property...?
@syranide My screenshot shows exactly that.
@jimfb I don't want to stand in the way and I'm fine with spicyj's all things considered :+1:
Thanks @yangshun!
@littlee Every minute we spend answering usage questions on github is one fewer minutes we can spend fixing React to make it better for everyone.  That's why we push people toward StackOverflow, where the answers are generally just as good (sometimes better) and don't consume disproportionate amounts of our time.
@gaearon is correct, duplicate of https://github.com/reactjs/react-future/issues/40.
Also afaik, all our documentation uses the following pattern:
Which afaik, is valid/legal ES6.
No, afaik, there is no such optimization at this time.
Thanks @adraeth!
- This uses the word "properties" instead of "props" in the second sentence.
@volfied Your approach seems pretty reasonable to me.
That's my two cents.  @zpao, thoughts?  @spicyj?
@zpao Ping.
Anyway, with regards to MetaMetchers - I agree it looks like some nasty jasmine logic in there.  The MetaMatchers is only used in one test, which is testing tests rather than testing React.  I agree it's useful/valuable, but I wonder if it is worth the weight, especially if it's the only thing blocking an update.  It might (in the interest of making forward progress) make more sense to just disable that test and get this merged.  We could always re-enable it later when someone has the time to make it work.  Anyway, just an idea, your call either way.
It blows my mind that this is a common issue, but it does appear that a few people have hit it.  This seems reasonable.
My fiddle: https://jsfiddle.net/4trs9u2r/
@yungsters Is this something you would want to take?
cc @zpao
autocapitalize‚Ä¶ looks like that doesn't matter too much. It's safe to use as an attribute and we can be consistent for these mobile safari-isms.
@freddyrangel updated the pull request.
@spicyj @sebmarkbage Thoughts?
Now that #5714 is merged, starting from the next release all SVG attributes will be passed through as is, just like `data-*`, `aria-*` attributes, and attributes on custom web components.
Normally I'd be inclined to say that people should fix their environment rather than inserting hacks into React to work around issues with their infrastructure/tooling.
Thanks @dittos!
@yangshun No, I think @zpao is correct, the current code would show the `file:// url` message on a Firefox browser that doesn't have the plugin installed, right?  But we don't want to mention the `file:// url` stuff in firefox because it isn't relevant to a firefox user, even if they are using `file://` for their page.
Ok, thanks @yangshun!
That's just a jsdoc-ism, probably because of this:
@thekevlau updated the pull request.
@thekevlau updated the pull request.
shipit
@gaearon @ericclemmons https://github.com/facebook/react/pull/6020
I'm kind of curious why it's done using `Boolean(var)` instead of `!!var`, cc @spicyj ?
@remko Actually, did your test fail before this change? I would have expected that you would need to set the value before dispatching the change event in order for it to have caught the original bug.
cc @zpao in case we do another 0.14 release
@mikkoh wrote:
> Again this is an oversimplification and what `Foo` might be doing is dumb but `react` still shouldn't call `render` immediately after `setState` in the same reconciliation cycle.
@mikkoh Can you provide a specific code example here? I'm not sure I understand exactly what your issue was.
cc @sebmarkbage as per internal diff.
@zpao Does it look good now, or do you want further changes?
Ah, sorry about that. The directions in there are for Babel 5 but Babel 6 has different behavior.
My fiddle: http://jsfiddle.net/ucrjxjv5/
This is unfortunately one of those areas where JSX gets weird. Since it's all a bit made up, there are edge cases with the behavior, and maybe we can define things a bit better.
```jsx
But since JSX is just javascript with a couple extra token types, the `{/* could this work? */}` is effectively just an empty floating block which is not legal in javascript.  The empty block is too similar to other javascript blocks (like `if(true) {/* could this work? */}`) for us to have a reasonable chance at disambiguating them.
@shuaibiyy updated the pull request.
Thanks @jackiewung!
Well, that sounds like a problem.
Hmm, I guess I never posted my initial theory about Nashorn & somehow getting 0, null, undefined mixed up (since `style={{height: undefined}}` wouldn't render anything). But that didn't make sense with other styles so I didn't say it. Maybe something like that actually is happening though. Or the reference in Java-land is losing some state in the casting. It's odd either way. Glad you've sort of figured it out though and good luck!
@shogunsea updated the pull request.
@shogunsea updated the pull request.
@shogunsea updated the pull request.
Our internal configuration is a bit different, and we don't want to discuss internal code/details/configurations on github.  I'm going to close this out, and we can help you debug using internal tools if you're still running into problems.
@Danita
Well said @seekshiva.
@benwiley4000: If you do ever find out what went wrong, and can provide steps to reproduce, we can re-investigate.
cc @sebmarkbage
The concern here is performance. try/catch at every level down the tree can negatively impact performance and will deopt this function (at least in otherwise good conditions).
I feel like this is expected behavior (albeit perhaps slightly confusing).
cc @spicyj @zpao
@DesignByOnyx Yeah, but the same argument could be made about a whole ton of things.  Changing one attribute (eg. `src` on a video component) could "imply" that other attributes (eg. the component's play/scrubber position) should also change/reset.  And while someone could make an argument for any one of these changes, the rules that result from such a wackamole game become too complicated for anyone to understand.  It is better to have a simple set of rules (a change in "tag type" results in a new instance, attribute changes do not) that are honored everywhere.
@syranide I'm having trouble parsing your comment. What I meant was
var config = {toString: 'yolo'};
@zpao Thoughts? Perhaps just added complexity for newcomers?
@otoinsa unofficial/unsupported, but... http://www.jimsproch.com/react/
@satya164 If you're looking for something to use for testing/development, you can take a look at http://www.jimsproch.com/react/
Are you interested in coming back to this @chicoxyzzy?
There are 2 requirements:
You're probably right. My knowledge of React is very limited, as this is my first contribution ever.
@zpao Thanks for the review!
@zpao Is this what you had in mind? If so, I did over-complicate things a bit...
@zpao Done!
cc @spicyj and @syranide because: events.
actually, calling setState on SSR might not be legal/valid, is it?
@antoaravinth the code you linked validates proptypes on element creation. So assuming a test case like
foo: React.PropTypes.oneOf(1, 2)
For background, please read:
@yaycmyk Thus the line:
@yaycmyk To over-simplify a very complex issue... the comments are saying... using `isMounted` to avoid `setState` for unmounted components doesn't actually solve the problem that the `setState` warning was trying to indicate - in fact, it just hides the problem.  Also, calling `setState` as the result of a promise is a bit of an anti-pattern anyway, since it can cause race conditions which won't necessarily show up in testing.  Thus we want to get rid of it, and figure out a "best practice" recommendation for using promises with React.
I agree the issues are a bit inscrutable, but that's largely because it's a complex issue that we're still figuring out and don't yet have a canned response for.
cc @gaearon, #4593
@gaearon
@gaearon That question is slightly orthogonal to this API (it's a matter of what is doable in the React core, regardless of the communication mechanism).  That said, functional components will not have internal instances and so there is no way to reference/rerender only a functional component.  You would need to rerender the closest parent ancestor.
@zpao and @spicyj because npm.
Normally we squash, but there are sometimes exceptions.  I'll let @spicyj or @zpao decide about squashing and/or merging this one.
A few further (more specific) points:
child A did mount
child B did mount
@jedwards1211 I believe @MalucoMarinero was trying to access sibling components in a componentDidMount (via a synchronous callback to the parent) which isn't kosher.
As @yaycmyk, this is a discussion best had on Stack Overflow.
This is also not good because it relies on the DOM implementation whereas ReactUpdateQueue is used on all platforms (like React Native).
React Native does not use a DOM at all.
@laskos You can't call `componentDidUnmount` (or `componentWillUnmount`) because you didn't call `componentDidMount`, and unmount is often used to cleanup things that were allocated in `componentDidMount`.  Also, componentDidUnmount (or `componentWillUnmount`) means the component lifecycle is done and the component can throw stuff away (when in fact, the lifecycle hasn't even started).
Anyway, the entire discussion is academic if we end up getting rid of `isMounted`, so let's loop back Friday evening.
@Agrosis updated the pull request.
@Agrosis I think @zpao's first point needs to be resolved before we tackle the others, since it decides the overall fate of the diff.
But yea, maybe we could wind it back and ask how how you concluded that `oneOf` would work the way you thought and why you didn't use `oneOfType` to begin with?
@zpao I think the only way we could fix that is to rename it `oneOfExactValues` or something.  When I read `PropTypes.oneOf` in the context of type validation, I would assume I could pass in types.  I can easily see how other users arrived at that same conclusion.  Just my two cents.
Vaguely remember that there was something called "oneOf".  Type "PropTypes.one" in Sublime/Nuclide, oneOf is the first suggestion, you see it, it looks reasonable, accept it, and keep writing, never having seen or consciously thought about the other suggestions in the list.
Hey @Agrosis, thank you for the PR! Sorry we didn‚Äôt communicate any resolution on this for a long time.
@Agrosis updated the pull request.
More likely to be related to #554
Seems complicated.
Thanks @yangshun!
cc @graue that might remember why we didn't.
cc @zpao who commented twice on this issue
</ReactTransitionGroup>
This is odd‚Ä¶ On the surface it seems like your code shouldn't be running anywhere.
Maybe:
I like it, thanks @yaycmyk. Let's not use the word "node" though since it already has meaning in the DOM and React and neither of those is what you really mean here. All the terminology is confusing though‚Ä¶ maybe just "component"? It's mostly correct since we use that to talk about instances. Or do whatever, this is definitely better regardless.
@yaycmyk Technically it is a component (just a trivially simple one).  I'm fine with "component" or "node".  Element probably isn't what we want (`element` refers to the JSX tag, which is always re-created regardless).
Oops, sorry @yaycmyk
Intended to ping @yuyokk
Excellent, thanks @yuyokk and @yaycmyk!
@zjjw updated the pull request.
@marocchino updated the pull request.
@marocchino updated the pull request.
@marocchino updated the pull request.
Great, thanks @marocchino!
@mikkoh Just so that there isn't a misunderstanding, the "`setState` with callback" should solve all your problems. You will still want to avoid multiple calls or batch for performance reasons, but it should not affect behavior.
I'm a little curious how you ran into this, but yeah, looks like a bug to me.
@spicyj
Cool :+1: @zpao, thanks
cc @marocchino
@yiminghe Maybe I'm missing something, but isn't flattenChildren also now being called in `mountWrapper`?
https://github.com/facebook/react/blob/1d49baff636ee331797f85f8f36781b196e85a89/src/renderers/dom/client/wrappers/ReactDOMTextarea.js#L43
@ali updated the pull request.
@ali updated the pull request.
Babel 6 came out and the docs need to be updated to reflect that. We'll finish getting those updated today.
npm i -g babel-cli
npm i babel-preset-es2015 babel-preset-react
For anybody having specific issues using babel, this is not the right place to file issues. More than likely that will be an issue you need to bring up against that project.
@wpcarro no idea, that's what browserify is supposed to solve for you.
Thanks @hzoo!
@prometheansacrifice updated the pull request.
@prometheansacrifice TopLevelWrapper is created at the top/root of each render tree.  It is a temporary (?) hack so that we can store all top-level pending updates on composites instead of having to worry about different types of components.
@prometheansacrifice updated the pull request.
@prometheansacrifice updated the pull request.
@prometheansacrifice updated the pull request.
@prometheansacrifice updated the pull request.
@prometheansacrifice updated the pull request.
@prometheansacrifice Sorry for the delay. This seems good ‚Äì thank you.
cc @spicyj
@acdlite updated the pull request.
@acdlite updated the pull request.
@acdlite updated the pull request.
`componentWillMount` exists as an escape hatch.
@yaycmyk You can use componentWillMount. What else is different?
@iamdustan Thanks! Couldn't have said it better myself.
Having the constructor passing super a props object that differs (in object equality and/or shallow compare) from the original is... illegal, because: https://github.com/facebook/react/pull/5334
cc @zpao @spicyj, seems bad.
Fix incoming. Worth noting (as @spicyj reminded me) that this is only an issue in dev mode.
@drdelambre I was in the process of filing https://github.com/facebook/react/issues/5335 to add a warning as you were writing this comment.
Are you sure you're not just confused by javascript's string escape character?
A fiddle for my own sanity, and @spicyj's convenience:  https://jsfiddle.net/b4pe8jhn/
https://jsfiddle.net/kqfvafuk/
@ezufelt I think there are minor differences in what you observe and what I observe.  Possibly because I'm on FF 41 (not latest) or possibly because you have a screen reader.  But either way, I think the description is sufficient to be actionable.  You might want to put your additional info into the bugzilla report.
Ultimately it looks like this boils down to a Firefox bug that doesn't affect just React so I'm not sure how much we should do in React. If somebody comes along and wants to pick this up, let's make sure we should do anything before you start.
@pke If you don't want to use flow, there are a few other options:
@acdlite Not too many, I hope.  We're trying to get rid of `owner` in the core.
@JaRail I'm not sure what you mean, but no, there's nothing actionable here.
@zpao Sorry, why wouldn't there be a warning?
### React Transition Group Add-on
### React on Bower
- [ ] update fiddles
@lovedota @re6exp It looks like you are hitting an error because the `done()` callback is called three times because you are animating three `td` elements. If you refactor your code to only call `done()` once, it will work better.
cc @spicyj Could something have changed with the unwrapping of the special DOM components?
<a href="github.com" id="baz">‚àö foo</a>
I'm not up to date with what the interaction is supposed to be with the shallow renderer these days so cc @spicyj ‚Ä¶
The discussion you linked to is actually about a tangential topic, which is for a pattern we no longer support in React (where you could pass an object as your child and we'd use the object keys as keys in React - numbers caused issues due to how they are treated in key enumeration order).
cc @zpao @spicyj
Closing since dom is not a thing made by us.
@AnuragRamdasan dude what's the +1 for :) I gave an update saying "my bad, I needed to pull in the correct dependency and all was good"
@gaearon my fault if I sounded like a scumbag troll - totally venting from my 2014 experiences w/ React (if I'm honest about it). In the last month, my experience has been totally different as you stated. All good now :)
Cherry-picked to 0.14 - e0f74c6c6c8b84a14db96a70e4a00162aafef356
cc @nickdima.
@zpao What do you think?
We're going to add real ids. See my in-progress update in the tutorial repo - the changes to the actual code here is pretty minimal. https://github.com/reactjs/react-tutorial/pull/96/files#diff-43fd6de5aa6bfed98ce8f78b5494a419R47
<option value="B">Banana</option>
<option value="C">Cranberry</option>
This sounds like a bug.
@spicyj @sebmarkbage
Oooh, webjars; that's pretty fancy :).
@gaearon yea, but that still means integrating node into your workflow. I think the ask is more about separating the minification part from the prod/dev split. And honesty I've thought about doing this for a while, making it clearer that `react.min.js` is not simply `react.js` minified (which is a different pattern than a lot of libs).
@bazo Many users (including all of facebook.com) have upgraded to 0.14 without a problem.  We are unable to reproduce your problem.  If you think you've found a bug in React, please provide the simplest possible testcase that demonstrates the issue.  Without a valid repro, there is very little more that we could do.
@bazo, thanks for hunting it down further. I'm not sure what we'll end up doing about this but I filed #5258 to start tracking (this issue here has a bit too much noise to be a valuable place for people to land).
@nLight Can you update as per @Prinzhorn
Well now I'm really confused. I did not expect
cc @gaearon - I'm going to put you in charge of making sure anything else that isn't normal/hyphenated works :)
@antoaravinth Looks like there is a failing unit test.  Also, we should add a unit test that asserts the intended semantics.
@antoaravinth updated the pull request.
@antoaravinth updated the pull request.
Sorry for the back and forth.
@antoaravinth Yes, that's right ‚Äì all that code can go away.
@antoaravinth updated the pull request.
@samerbuna is correct. It was never an official api,just an internal runtime dependency, so the removal never was included in any change logs.
Maybe @spicyj has thoughts.
If we really need we can open up gitter but let's give discord a chance.
@syranide Yeah, I agree, but...
Our deltas of
@spicyj Just for context, I assume those are React rendering times + `innerHTML` but do not include browser rendering/painting? PS. Also that's awesome :)
Numerical IDs are in #5205. Also, devtools don't work with this because they currently rely on `ReactMount.getNode`.
I mean, that method lists every other side effect of returning a new element from `render`. Perhaps it's technically incorrect.
@yungsters updated the pull request.
@yungsters updated the pull request.
Can we just kill keyMirror? We don't need it at all.
@stepancar I wonder if you are mixing up custom elements with custom components.  Custom elements (like `<my-custom-element data-test-id="foo" />`) should work as you described.  Custom components (like `<MyCustomComponent data-test-id="foo" />`) do not necessarily have any markup associated with them, and can do arbitrary things with their props.
cc @yungsters - any input from the Relay side of things? Presumably this is handled there in some way.
@spicyj @zpao
@spicyj @sebmarkbage
@jalejos Can you upgrade your version of node to v4.2.0 and let me know if you're still able to reproduce the issue?
@spicyj any ideas?  This is a mystery to me.
@jalejos At this point, I'm not sure what we can do to fix.  This is the first I've heard of the issue, and I'm unable to reproduce.  If you get a chance to investigate, I'd be super curious to hear what you discover.
<input type="password" />
Weird. Okay.
:+1: lgtm, @spicyj
@pluma We probably wouldn't want to expando on DOM nodes.  You could use ReactInstanceMap which is currently implemented as an expando on internal components.  Or it would probably be sufficient to warn once per style-key (ie. just create an object and set `object[styleKey] = true` if you've already warned for that style).  That would mean that fixing the warning in one component could result in a similar warning starting to be emitted from another component that has the same bug, but that is probably acceptable (@spicyj to confirm).
cc @spicyj incase he has a preference.
@pluma Ben is suggesting that you call `component._currentElement._owner.getName()` to get the NAME of the current component (the name will be a string) and use the name of the component as part of your object-key for deduplication.
@pluma Na, you don't need to create a PR for 0.16 yet.  The PR would just get old / we would forget about it / there would be merge conflicts / etc.  Once we're getting close to the 0.15 release date (you'll know because we will create a 0.15 umbrella issue and start checking things off) then we can start generating PRs for 0.16.
@pluma Thanks again!
@yaycmyk Sounds right to me, thanks for answering!
cc @sebmarkbage
It's a bit quirky but intended behavior, you're effectively providing a new ref-callback every time it renders. So to safely dispose of the old ref-callback React calls it with `null` and then the new ref-callback will be called with the instance. Store and re-use your ref-callback and this goes away.
@localnerve I meant "custom component" to be synonymous with "composite component". We don't actually support rendering `html` except with server rendering because browsers all behave differently, and renderIntoDocument simply renders the component into a div. Sorry for the trouble‚Ä¶
https://jsbin.com/qeyifedave/1/edit?html,js,console
Thanks for reporting @yiminghe!
@zpao @spicyj
Squashed and merged. @thomasp9 Thanks!
@spicyj @zpao
cc @spicyj
I think it works in master/future.  http://jsfiddle.net/zcotr9hm/
@gaearon, `componentDidDisplay` maybe.
Warning might be a little weird, since the dom mutation might be behind some sort of if-check (`if(refComponentIsTooLarge()) { moveChildIntoOtherBox(); }`).
I might be missing something here, but it sounds kind of error-prone to postpone things until after paint, possible race-conditions and what have you if you're not careful (say a store being updated between you rendering its data and subscribing to it).
@sebmarkbage I've mentioned it elsewhere for other purposes, but could an API like say `React.defer(callback)` be more versatile and intuitive perhaps? It would queue all callbacks and execute when React is finished with all processing (i.e. after events, transactions, etc).
@syranide We would like to avoid global APIs and make them tied to a component so that we can better control scheduling such as deferring execution of offscreen content etc. `this.defer(callback)` would work but that lacks the pit-of-success factor. You have to do something extra and more work to do something that is best practice and you always should do.
@cosminnicula The key difference is that custom elements (web components) often expose an imperative API.  As an example, consider a video tag/element.  There are some relatively declarative attributes (like `src`) but there are also a bunch of imperative functions (eg. `addTextTrack()`, `canPlayType()`, `load()`, `play()`, `pause()`).  These functions do not play nicely in a declarative application.
Dupe of #2127.
Thanks @xelad1!
@antoaravinth Most of the 0.15 stuff is merged.  I don't see any merge conflicts yet (I'm actually a little surprised, I expected https://github.com/facebook/react/pull/5032 to conflict).
@antoaravinth updated the pull request.
@antoaravinth updated the pull request.
Looks great, thanks @antoaravinth!
Another report of this being confusing internally:
Tangentially, you might want to switch to using https://github.com/chenglou/react-motion which has a wide community adoption, [better test coverage](https://github.com/chenglou/react-motion/blob/master/test/TransitionMotion-test.js), and doesn‚Äôt depend on CSS animations. Cheers!
@cosminnicula React's virtual dom diffing does things like guaranteeing that if a node with a particular type-keyPath-pair appears in both the first and second render, the DOM nodes will be reused (thus preserving imperatively added children, etc).  This is a serious expense that inferno doesn't incur because they are using simple templating and can just throw away nodes if it's too inconvenient/expensive to calculate an absolutely minimal diff.  This is just one of many key differences.
Inferno.render(
Inferno.render(
In React,
moo
cc @sebmarkbage
`requestPendingState` was discussed as a possibility but it's tricky because you may be encouraged to do other side-effects.
@antoaravinth Sounds roughly correct to me.  You'll want to do the same thing for `TextArea` and `Select`, since they can also be controlled inputs.
@antoaravinth You may find this diff very helpful, since it's almost exactly what you're trying to do: https://github.com/facebook/react/pull/5032/files
@antoaravinth That error is basically saying that the test wasn't expecting any warnings to fire, but some warnings were printed.  You can either add some checks for the warnings (as I did in my linked diff above) or you can modify the test such that it doesn't warn (eg. update the test to pass `undefined` instead of `null`).  Either way, we should have at least one test that verifies the warning fired correctly and at least one unit test which passes undefined and shows that the error does not fire.
@lovedota You can consider using the native dispatchEvent if you are working in an actual browser. React won't get into the business of simulating how browsers work and how the different native events behave.
React Native has a feature/library called Animated which can help with this problem:
@spicyj Merging into self?  Is there a different issue you intended to link?
cc @zpao Contrary to popular belief, we do get these fairly frequently.  Related to #140
There were a few reasons:
- Performance is a race to assembler.  You want to choose the right balance of developer productivity, code maintainability, with other variables like performance.  React does so much more than simple templating, but that comes at the cost of performance.  We believe that providing higher-level abstractions which are more maintainable and easier to work with is worth the tiny bit of overhead introduced by these abstractions.  But it's a balance.  You can always do better by removing layers of abstraction, but ultimately computer science is all about controlling complexity.  If you eliminate all abstractions, you end up with something like assembler (asm.js) which is great for machines but which humans can't read.  You're going to have a hard time building a website if you can't read your own code.  Competing on performance would lead us to eliminate abstractions which we believe are worth the cost.
Sorry for the delay on this. We don't use SVG with React much so this hasn't been a big priority for us. Do you have a suggestion for how React could fix this?
Yea, multiple React versions seems the likely culprit.
@spicyj I'm pretty sure I know your feelings here but should we make this work better since it is a regression?
Wow, I don't know my feelings here. I guess I would probably make it actually work.
How are you simulating events on the option at all? It's not obvious to me how you would with that structure.
cc @spicyj. Whatever happens here I don't think we want to take this into 0.14 - definitely sounds like a behavioral change from RC.
@darobin if you have any issues building, file issues :) I know there are some funky things but we're love to make it easier.
Fix ART etc. if needed.
Ping @spicyj
@fabiomcosta https://github.com/facebook/react/pull/4943
@taion I think you are missing the point / missing what @vlinder said.  You don't need to burden your users because you can wrap the user's component in your own stateful component, and attach the ref to your stateful component.  https://gist.github.com/jimfb/32b587ee6177665fb4cf
@jquense Yes, future optimizations.  No, it can't be a DOM node reference, because the referenced dom node could change when the stateless component rerenders, so it would need to be a handle to the component which could be updated by React as part of a rerender (aka: an instance).
cc @salier
Every engine is crazy in its own special way üòâ
@saifelse - could you rebase and squash the commits?
@syranide I was thinking about this today and it became obvious that the owner in this case is Container, which is perfectly logical. Yes I know this is somehow tricky, I'll let you know how I use this and why.
@hellosmithy Using a component with a dash _is_ the escape.  As per the specification, a node with a dash in it may have arbitrary attributes defined.
@hellosmithy I can't see how to make it work in a way that's better than what we currently have.  If you have an escaping solution that you'd like to propose, we'd be happy to take a look.
@gargantuan That does not allow custom elements to play as first class citizens.  You've effectively turned React into a templating system at that point because your AttributeEscape component destroys the virtual dom.  You are eliminating React's ability to do diffing (because you convert the virtual dom to dangerouslySetInnerHTML), eliminate the ability for the parent components to make decisions based on the children, eliminate the ability to attach refs and event handlers, etc.
@gargantuan as per my comment above, it means that elements within AttributeEscape will not play by the vdom rules.  This DOES break lots of things.  And it's a huge problem if your render tree has an AttributeEscape with an arbitrary tree of children placed inside.
> I think the point being made here is that the proposed changes at jimfb@b1db817 require some further consideration.
With a custom element you can probably do better and avoid some of the weird special cases that browsers have to deal with.
@gargantuan I'm having trouble understanding what you mean, sorry. FWIW, we recommend you use the React dev tools when debugging React apps because they show the React component structure. If they don't fit your workflow for whatever reason, maybe we can fix that instead.
@gargantuan I'm still having trouble understanding exactly what your specific complaint is here. I'm not an expert in web components so please forgive me if this should be obvious. Is the issue only that you could previously write
gargantuan, regarding your prior post, you said:
We make every attempt to listen to all the feedback and continue to improve React to meet everyone's needs, but you need to understand that custom elements are still considered an [experimental technology](https://developer.mozilla.org/en-US/docs/Web/Web_Components/Custom_Elements) and the details are much more nuanced than you might expect.  When browsers start to converge on the semantics, we can re-introduce some of the diffs that fix the rough edges.
I dug into this for like half an hour and couldn't figure it out. Very weird.
cc @zpao @syranide
@zpao Thanks.
@spicyj @syranide - does this have anything to do with that newlines thing in text areas we did a little while ago? Or is that a red herring
Thoughts @sebmarkbage @spicyj
@gaearon See #4814 for the addition of `dist/react-dom.js`. We're sidetracked from the point of this PR but I'll explain it since we're all here anyway.
What @iamdustan said. You're handler is getting called but if you don't prevent the default behavior of the browser (navigating) then it doesn't really matter.
@zpao I assume this is ready to merge?
That doesn't work with your table example so that's a trickier case and we would probably just say "make the whole table a standalone component / wrapped in the container".
@happypoulp That might just be a different issue. Can you open it separately?
We can probably have shallowEqual treat two NaNs as the same.
@thanzen We could probably make an error message that is a bit more informative (https://github.com/facebook/react/issues/5773), but specifying a margin of NaN seems like it should always be an error/warning.  Can you elaborate on what you mean by  "I have no access to marginLeft prop directly"?  If you mean you are using a third-party component that sets the property incorrectly, that component author should fix the issue.
@syranide https://github.com/facebook/react/issues/5773 :)
@essekia You added fontSize: 15px. You need to create a new style object instead of changing the existing one.
A couple ideas:
As for multiple `virtual-dom`, yes, I'm hoping to be able to find agreement on a common interface. We're not quite there yet but I'm working hard on removing React specific pieces from this interface piece by piece in hope of eventually being able to unify.
cc @spicyj
@yordis See syranide's comment: https://github.com/facebook/react/issues/2956#issuecomment-72001075
@spicyj Since React.Children.map rekeys, do we want to reopen?  My intuition is we should retain nulls, since that's how array.map works and I don't see adding a null-check as that burdensome, but I did close under the understanding that retaining nulls was advantageous for reconciliation but apparently that's not necessary, so I'm fine with reopening if you think this is something we might do.
cc @cpojer
cc @sebmarkbage @spicyj
@iamchenxin Thanks!
FAILED: codepoint=64977
FAILED: codepoint=64978
FAILED: codepoint=64983
FAILED: codepoint=64985
FAILED: codepoint=64986
FAILED: codepoint=64987
FAILED: codepoint=64988
FAILED: codepoint=64989
FAILED: codepoint=64990
FAILED: codepoint=64992
FAILED: codepoint=64993
FAILED: codepoint=64994
FAILED: codepoint=64995
FAILED: codepoint=64996
FAILED: codepoint=64997
FAILED: codepoint=64998
FAILED: codepoint=64999
FAILED: codepoint=65000
FAILED: codepoint=65001
FAILED: codepoint=65002
FAILED: codepoint=65003
FAILED: codepoint=65004
FAILED: codepoint=65005
FAILED: codepoint=65006
FAILED: codepoint=65007
FAILED: codepoint=65520
FAILED: codepoint=65522
FAILED: codepoint=65523
FAILED: codepoint=65524
FAILED: codepoint=65525
FAILED: codepoint=65526
FAILED: codepoint=65527
FAILED: codepoint=65528
FAILED: codepoint=65534
FAILED: codepoint=65535
55296 is `U+D800` which are non private use surrogates, range `D800-DFFF`
64976 is `U+FDD0` which are non-characters, range `FDD0-FDEF`
You also have two additional non-characters `FFFE-FFFF`
@spicyj They don't?  Aren't they part of the react-data-id when doing SSR?
Well :hankey:, that's :fire:
Looking for feedback and additions @yuzhi @yungsters @josephsavona @wincent @kassens.
It's not clear what "some code" or "cleanup" is so it's a little hard to understand what use case you're trying to solve.
var spy = jasmine.createSpy();
cc @marocchino @sairion @reactkr for a translation review.
@zpao is so fast, race conditions :P
it seems like it would belong with the `Symbol` system. A system could override
cryptographically random or unique number. That would allow ReactElements to
`__typeof` because this is more than a framework private. It should really be
Dupe of #1881.
@shaikhussian That is a completely unrelated error. It means that you're passing a container that isn't a DOM node ‚Äì likely undefined (if the element you're looking for doesn't exist on the page).
Also, cc @marocchino who has done a lot of the translation work and can help guide you.
dupe of #4326
We probably wouldn't do an Algolia logo (and certainly not on every page), but we could link to you on our acknowledgements page:
wtf hub.
@zpao r?
@abritinthebay Can you elaborate more on the sorts of things you like to introspect?
- [x] @Wildhoney
- [x] @codesuki
- [x] @oluckyman
- [x] @katzoo
- [ ] @Youmoo
- [x] @yiminghe
- [x] @xmo-odoo
- [x] @sugarshin
- [x] @matchu
- [x] @laiso
- [x] @jiyeonseo
- [x] @iamdoron
- [x] @wibud
- [x] @zhangjg
- [x] @AnSavvides
- [x] @bhamodi
- [x] @Yeti-or
- [x] @mmoss
- [x] @mihaip
- @mihaip
@mmoss those are in hie maul
Ughh mobile is hard‚Ä¶
Every bit helps!
> name zhangjg?
It's unrealistic to support all quirks in all old browsers. It would be helpful to know which ones and if we should support then.
Not quite true (at least not based on my understand of what @jimfb was saying)
@zpao But `key` isn't a prop!
String. And iunno.
It is currently expected behavior with our code (our regexp: `/^(data|aria)-[a-z_][a-z\d_.\-]*$/`) but‚Ä¶
@syranide - do you remember if we ever talked about numbers?
@imgarylai Yes, it works on es5: http://jsfiddle.net/1LgLy7mL/
@amasad Will this work? We have `"main": "react.js"` in package.json.
Question though: How do we handle things like onChange?
cc @spicyj and @syranide since I know you always wanted this.
It's easy to say that virtual-dom does the right thing because it just offloads the problem to someone else to solve. Once you start trying to solve these interaction problem it gets messy.
@Gozala Thanks a lot. This is great feedback! It's a slightly different take (and more thoroughly thought through) than we've heard before.
That's the problem with event bubbling in general and this doesn't make that worse.
cc @tako-black
Thanks. Dupe of #3659 probably.
@cmelion Thank you.
This PR is six months old and isn't squashed.  Honestly, I haven't seen this as being a major point of confusion (which surprises me a little bit, but apparently people figure it out or just don't run into this).  It is documented elsewhere on [reactjs.com](https://facebook.github.io/react/docs/jsx-in-depth.html#html-tags-vs.-react-components).  Adding the sentence here adds clutter to the top-level api reference documentation.  Having it here is especially weird because the component name capitalization isn't actually part of the `createClass` call, it's about the name of the variable that you save the component to when it's returned (the sentence as-is is weird because it makes me think that it's discussing the parameters to the function call).  Also, perhaps most importantly, this is the type of thing that's trivial to detect at transform time or via a linter, which provides real-time feedback at the moment people hit the issue, and so that seems like a much better solution than adding preventative/speculative documentation to `createClass`.
Do you think this might imply that you have to use an ES6 arrow function?
@zpao Maybe it does, but honestly this syntax is pretty cumbersome if you don't use an arrow function that I don't think anyone will want to.
@syranide Already did ‚Äì see line 119.
I'm trying to get an ascii art to be properly rendered by my React application.
|        |   + ditaa +    |       |
|Document|   |!magic!|    |       |
"|        |   + ditaa +    |       |",
"|Document|   |!magic!|    |       |",
{ascii}
|        |   + ditaa +    |       |
|Document|   |!magic!|    |       |
Thank you so much @spicyj!
|        |   + ditaa +    |       |
|Document|   |!magic!|    |       |
Again, thanks for this awesome technology.
But for the pre tag code seems weird to me.
See the ascii art here:
|        | --+ ditaa +--> |       |
|Document|   |!magic!|    |       |
@jimbolla That's true. We recommend doing
- **Most importantly:** String compares are expensive.  Because children occurs in props, it means we need to do an additional string compare for each property we iterate over, since we need to handle the children prop as a special case.
This is mostly an RFC issue, it's something to consider before doing inline elements.  cc @sebmarkbage
@syranide It's not just createElement that's weird.  Even for JSX users, they can specify children as a prop on the jsx element (possibly via ellipsis) and simultaneously provide child nodes in the JSX element.  You have the oddities for both jsx and non-jsx users alike.  Changing the createElement signature doesn't solve the weirdness for jsx users.
@jimbolla Yes, componentShouldUpdate is hard to implement if a component accepts children.  This doesn't really solve that problem.  But yes, I agree, processing `children` in `componentShouldUpdate` is another case where they often need to be treated differently.
What does that even mean? Care to be more specific? :)
The only thing that makes this weird is because of XML and specifically the XML object model.
So, no, from a "theoretical computer science perspective" the current model makes as much sense.
> Because children occurs in props, it means we need to do an additional string compare for each property we iterate over, since we need to handle the children prop as a special case.
@sebmarkbage
If we change the inline representation, or output of `createElement` we would have to create a new object that gets passed into the public component API which would be much slower. Therefore, I think we would HAVE to change the public component API. I'm not sure what solution you're proposing? Do you mean special casing the "string" `type` element so that only native elements have this property?
Can you point us to it? Is this a complex component or one that gets rendered a lot of times?
@sebmarkbage
@sheepsteak That sounds like a different warning, but I'm glad you got it to work.
Repro: http://jsfiddle.net/trtz1y99/
This almost works, except MockedComponent here doesn't end up with the flag:
@sebmarkbage ideas?
#2407 is the other issue.
Thank you for sending the PR! I‚Äôm closing it as it hasn‚Äôt been updated in a few months, and it seems to me from this and other discussions that the consensus is that we should warn on mixing shorthand with normal properties. I opened #6348 so we can all agree on the implementation strategy that wouldn‚Äôt compromise performance, and discuss what we learned from other libraries like Radium and React Native, before diving into a specific implementation. I‚Äôm sorry this pull request didn‚Äôt get through but I hope to hear your thoughts in the discussion in #6348. Cheers!
@spicyj The linter is unhappy.  How can we work around this lint rule?
@johngoren Are you interested in finishing this off?
Dupe of #3131, more or less. I don't know yet whether we want to support this.
### How it works (we're using http://jekyll-langs.liaohuqiu.net/):
I set up a testing server - http://reacti18n.zpao.com/react/ko-KR/docs/getting-started.html
But I wanted to get some feedback before I took it any further, namely from the people who have been doing the bulk of the translation work - @tako-black, @makky3939, @marocchino, @sairion (and many others, perhaps you can spread the word amongst the translators you've been working with?), @spicyj . Does this approach so far seem like it's more maintainable for you moving forward? All of your current links will be broken but I'm not too worried about that (are you?).
- [ ] decide if we want full locale in the url or the short version (`/ko-KR/` vs `/ko/`, `/ja-JP/` vs `/ja/`, `/zh-CN/` vs `/zh/ (or cn?)`)
@zpao
@sairion Good catch. I'll see what we can do about that.
Lint wasn't you, seems like a fine change otherwise. :thumbsup: Thanks!
cc @cpojer
@tako-black updated the pull request.
throw new Error();
cc @sebmarkbage
That's weird, I would expect both to use the enumeration order.
Hmm, cc @sebmarkbage @spicyj.
This was an intentional change in c419cce5c9eeaf4d41f226016c852500bdcb4f71. At the time, @sebmarkbage said (in an internal FB group):
oh üí©!
Thanks for bringing it up @mik01aj!
@sebmck Any plans on giving arrow functions and concise methods `.prototype = void 0` in babel?
@leebyron @swannodette @gaearon @yungsters @ryanflorence
@gaearon We can implement hot reload and time travel for the purpose of devtools / debugging with any model. People even do that with mutation. Reducers simplifies the implementation but isn't a feature in itself. The use case is solved by #4593.
@briandipalma Just my comment here: https://github.com/facebook/react/issues/3653#issuecomment-92526513
@dantman Well, that "hack" would/could be solved by https://github.com/facebook/react/pull/3920 but that's a whole other discussion :P.
Good read: https://www.safaribooksonline.com/blog/2015/10/29/react-local-component-state/
- **Detail View**: In a master-detail view, clicking one item in the list switches the state of the detail view. When you click on the original view again.
- Shallow Rendering
@springuper AFIK, `grunt test` still works in latest.  Have you done an `npm install` recently?
cc @sebmarkbage
@trquoccuong take a look at the documentation on controlled components (http://facebook.github.io/react/docs/forms.html#controlled-components). You will likely want to handle the user checking a box so you can set the `checked` prop.
cc @jimfb @syranide
@syranide Thanks for testing.
@marjan-georgiev Looks good, thanks!
@chandu0101 Thanks for flagging. I understand the pain but I'm also not sure this is actually the right thing to do.
@sebmarkbage do we want to support all the ways non-JS can compile to JS or just say scala-js needs to fix this? Do we expect that displayName as an instance property will be the path of least resistance in future JS classes?
``` scala
I don't know.
In addition, context is not and has never been documented or supported. Please don't file issues asking how to use it.
function attachCustomAttributes(domNode) {
class Video {
See #140 for the long history of custom attributes.
@syranide is correct.  You can do whatever you want within the children of a leaf node of a React render tree.  React does not prohibit you from using mutative APIs, as long as you don't interfere with nodes that were rendered by React (that is to say, don't mutate a node that was rendered by React, because that would confuse React's reconciliation algorithm).  You can add/mutate children to a leaf node, but don't modify the children to a non-leaf.
TabbedArea(props, children)
Alternate method of jumping to the root of the render tree.
cc @sebmarkbage @spicyj
cc @spicyj who added a warning against this. #2504
IIRC there are issues with that though I don't know off the top of my head. Perhaps @chenglou does?
Thank you @rgbkrk!
> It seems there are quite a bunch of spammers :)
Uggh, that's new‚Ä¶ Let's crank the spam protection up to 11 @spicyj.
Thanks @afhole!
Sounds like a bug to me, cc @spicyj just in case this is expected behavior.  Marking as 0.14 milestone under the assumption that this is a regression.
Because `context` isn't supported, and, you know, doesn't actually exist.  It's all a myth :).
@madjam002 This is the plan yes. We need to keep it in the `react` package for now to avoid breaking everyone using it. However, in 0.14 it is marked as deprecated.
I think it's a dupe.
As @zpao said, to the extent possible, we try to stick with standard javascript constructs, so this feature is not likely to make it into the core any time soon.
@winterbe React blog post will appear here: http://facebook.github.io/react/blog/
Sounds like too much magic to me.
@spicyj Thanks, good catch, updated.  Sucks that `key` is special cased; I wish we had a good way to keep `key` on props without interfering with user code.
Didn't you write React?
@pswai You're testing a different scenario, my fiddle shows that this is not a problem with the React event system, it's a "problem" with browser behavior when the hovered nodes are replaced/removed.
@browniefed Thank you very much! It works!
Do you have intentions for us to use `--mangle-regex`?
I really appreciate the initiative though! I think this is a great way to get involved and I hope to see you around some more :)
@niole I only glanced at it briefly, but I think your test error message may be missing the prefix 'Invariant Violation:' appended to invariants before throwing.  It's often helpful to copy-paste the message into a monospaced text editor, line the messages up, and see where they differ.
@niole No, just the test.  The issue is that the actual code adds it automatically when you invoke invariant but the test does not.
With regards to the unfathomable jasmine expectation, I'm at a loss to explain it; that test looks perfectly reasonable to me.  Perhaps @spicyj or @zpao will have an idea.
Thanks for bringing it up @berkerpeksag!
cc @sebmarkbage @spicyj
@zpao, this flag is not on a per-class basis but on a per-mixin basis which mitigates the portability/refactoring hazard. This change is small and isolated.
I wonder what would be best though. Should we restore it on a per property basis like we used to have?
:+1: This is what we're doing for now, but it's a lot of functionality/code to maintain when there are essentially 3 lines that we want to change and still be BC.
I'm fine with making things faster (duh), however using the `Function` c'tor violates default CSP in Chrome extensions (https://developer.chrome.com/extensions/contentSecurityPolicy) specifically the `unsafe-eval` option. I don't have a good idea of how much it matters. It looks like as an extension author you can change the CSP to allow this but it's strongly discouraged. We know React is getting used in extensions and we're bound to get a pile of these. I think the problem is that the script as a whole won't get executed so we couldn't try/catch something.
Should I move the `autobind` flag to statics or do we want to keep this as is?
Added note about multiple Reacts, since this error commonly implies that.
@zpao or @spicyj ready to merge?
Ping.
@zpao or @spicyj Is there a reason we are not moving this forward, or should I keep pinging the thread?  Soon I'll get as good at this as pingbot!
@spicyj Comment overall or specifically my addition?
@syranide That's not a bad idea.  If the root node is a web component, it might respond badly to having a random property set on it, but maybe we skip the check for web components?  It's worth looking into, but not worth blocking this fix.  This is a trivial mitigation that will catch the most common case.
@spicyj Yeah, done.  Is it even possible to hit that remove path?  Seems like you'd need to add the ref in order to remove it, so it would be impossible to hit.
@syranide @spicyj
cc @chenglou
PRs welcomed.
A bunch of other things are broken though (looks like a lot of comment-related issues, but haven't looked into it).
(there are a couple unrelated things in there due to local untracked files)
@aleskafka Could you elaborate on your use case and why you're not rendering into the existing document immediately?
@aleskafka The latter.  It attempts to re-use the markup and just creates the backing component instances.
@brigand The official recommendation is to use Babel as you specified.  Thanks!
(Ideally Stack Overflow. discuss.reactjs.org is better for architecture questions and other high-level discussion.)
Ping @gajus
Ping @gajus
@gajus updated the pull request.
@gajus updated the pull request.
@gajus updated the pull request.
Looks great, thanks @gajus!
@yaycmyk in the wrapping case, you could do
myNewProp: stuff
baz: 2,
@kiki-le-singe We do want to require commas when on separate lines though.
`only(children : OpaqueChildren) : SingleChild` is a downcast that "warns" for the wrong type.
And since the signature is `only(children : OpaqueChildren)` (as per your comment above), it means that at the very least the documentation is wrong, since the function is not `returning the only child in children`.
That runtime check is also not equivalent to `React.Children.toArray(x)[0]` because of how keys are preserved in nested arrays.
@tinganho I'm not entirely sure what you mean by "I need to define them as static methods".  Lifecycle hooks are defined on the class and invoked on the instances.  Can you elaborate on your concern?
@mdibaiee Maybe I'm miss-understanding the question, but using React 0.14-beta2...
@mdibaiee Ah, this might help you: https://facebook.github.io/react/blog/2015/06/12/deprecating-jstransform-and-react-tools.html
@mdibaiee - that's a great question to ask in a babel support group. It's not clear to me if they removed some of the optimizations or if they just bury mentions of them on the site .
@sebmck - not the original issue, but the last question in the thread, which is specifically about using Babel.
(Ideally Stack Overflow. discuss.reactjs.org is better for architecture questions and other high-level discussion.)
@leozdgao I agree with @cody, that seems likely to be the issue.  I tried to reproduce based on the info you provided, but couldn't find any bug.  If you can provide a fiddle, we can investigate further.
Yes, `this.props.children` is a weird and special thing, which is why there are helpers to deal with it. Your case happens to work with returning because you have a single child. If you had multiple, then returning `this.props.children` would have thrown.
cc @mridgway
@zpao they wouldn't take this upstream because they want to maintain adler32 correctness semantics.  @syranide's optimizations rely on the fact that we don't actually care about maintaining those semantics (unless I'm mistaken).
Ok, great!  Thanks @syranide and @spicyj!
@syranide Does this value need to change?
Rely on jest for now until we get a better and less hacky solution to running tests in the browser, probably a totally different test suite with different behavior/goals.
For some additional context, I've already spent a bunch of time in #4167 trying to make things work with populist+jasmine. It's been pretty painful and really not something we need to be investing in right now.
For anybody coming in from Twitter‚Ä¶
Believe me, I'm as surprised as you are. Growing up in a world of ever changing browsers and quirks something feels off about it. :)
Is "victoriously idiotic" a phrase? I think it probably should be.
Wow, that is confusing.  That's what happens when documentation is maintained over time and people keep making changes.
@zpao  I think one of the main ideas is also to "Build Composable Components".  So maybe there are three main ideas?  The main ideas are little more than a sentence each; maybe we make the three ideas be bullet points:
That's my two cents.  We'll let @zpao or @spicyj gatekeep this change.
cc @zpao and @spicyj
dupe of #3972 which is fixed in 0.14
Specifically, we call something like `node.value = 'giraffe';` or `React.findDOMNode(instance).value = 'test';` before simulating the event.  Similarly, you are going to need to set `inputNode.value = 'whatever'` before firing the event.  I suspect that'll solve your problem.
On the off chance you're using promises... http://blog.taylormcgann.com/2014/08/21/catch-errors-javascript-promise-chains/
cc @tako-black
@ysihaoy - Sorry you had a bad experience. The server piece for compiling JSX files is annoying and not well documented (it also doesn't apply to all browsers). We'll make this a bit better.
Also, the gatekeepers for this change should probably be @spicyj or @zpao anyway.
SInce this is a newbie mistake, it's probably more readily findable in the html markup right above the script tag for the transform.  The bug https://github.com/facebook/react/issues/4354 mentions helloworld.html, so that's a good place, there may be other intro-examples (the advanced examples probably don't need it, since people will work up to the advanced examples and anyone who hits it should hit the issue fairly early in their learning of React).
That's my two cents anyway.  Ultimate gatekeeper for this change is @spicyj or @zpao.
> I'm confused about the comment:
Ok, thanks!  cc @tako-black
@dcousens, I don't know, that's probably a question for @zpao or @spicyj
@sebmarkbage @spicyj
@sebmarkbage @spicyj Ping.
Well, that's annoying.  https://jsfiddle.net/pgtf6aym/
The wording there is a bit confusing but here's a short answer:
'<img data-reactid=".yxoueqje2o"/ data-react-checksum="-951841932">'
I have a custom checkbox with label:
‚îú‚îÄ‚îÄ babel@5.6.14
‚îú‚îÄ‚îÄ chai@3.0.0
‚îú‚îÄ‚îÄ chai-spies@0.6.0
‚îú‚îÄ‚îÄ jsdom@0.3.4
‚îú‚îÄ‚îÄ mocha@2.2.5
@nodu Sounds like you're not using ReactDOM 0.14 on the client...
@nodu What do you mean when you say the client does `<img blah blah >`?  Are you getting a checksum warning?  Can you provide a simple jsfiddle that demonstrates the problem?
@nodu Your error message indicates an element with a different key on client/server, specifically `EXxkPxefTtywv7xFToFL...` vs `36luBceRSfSgZB7DSKsN...`. What you're seeing there is the `data-reactid="..."` attribute.
@nodu I'm still not sure how you arrive at the conclusion of `/>` being the issue, are you not checking normalized DOM vs rendered DOM?
Overall, diff looks good to me.
Module scope should be fine, since this particular bug is easy to find/fix via grep (ie. you don't need to clutter up the console with each instance; knowing that there is at least one is sufficient and the person can use grep from there).  Diff looks good to me.  Thanks @koba04!
I'm quite swamped with work on jest at the moment. Is this something you'd be interested in sending a PR for, @jardakotesovec ?
Note for blame hunters (eg me): this is a regression due to #4150.
@mmoss Can you add amend the commit to include a comment (above the changed) line explaining the problem, since it's non-obvious what the motivation of the hack was for anyone reading the code.
Ok, Thanks @mmoss !
@serle Do you have a simple jsfiddle that demonstrates the issue?
Events: @syranide
Big PR: @spicyj @sebmarkbage
@slorber Yeah, a simple jsfiddle would still be helpful so we can fix this issue :P.
It seems weird to use cloneElement with higher-order components. @ide can you elaborate on how you use it?
@d4goxn If the user is editing the form, the markup (attributes) remain unchanged while the javascript value (property) changes.  This is why markup validation does not fail.  Keep in mind that markup validation was intended as a sanity check for SSR, and was not intended to protect against this use case.
With regards to the race condition, yes, it does exist, but it's a little unclear what we could/should do about it.  One option is to enqueue the events until such time as the required javascript has loaded, and then play the events - but this requires that the event listeners have been setup which requires that at least some minimal javascript has been loaded.  We generally think of it in terms of a user clicking a menu which is a no-op until the javascript loads (interactions lost), but the form field modifications is an interesting case.
IMO, I think it's a bit excessive to start including linters for TypeScript, CoffeeScript, etc. It's a tiny proportion of our code.
I do think accessibility is important though so let's add it to the actual tutorial code (https://github.com/reactjs/react-tutorial/blob/master/public/index.html and https://github.com/facebook/react/blob/master/docs/docs/tutorial.md)
@sebmarkbage Object.assign and object-spread will ultimately manifest themselves as a jsx-spread, since that's how you go from an object-full-of-props to an element with properties, so those use cases are covered (assuming the person is using jsx).
I think failing to support international characters is not by design :P.
cc @tako-black
@tako-black Yep, if you want, any inline example in the translated documents that renders a full HTML markup (like the first code block example on http://facebook.github.io/react/docs/getting-started.html) should probably contain `<meta charset="UTF-8" />` in the header.
Animations are super hard.  The best animation library I'm aware of is Ryan Florence's library ( see this great video: https://www.youtube.com/watch?v=z5e7kWSHWTg ).  If I were digging into this, that's where I'd start, because his stuff is awesome.  MagicMove might be exactly what you're looking for.
Thanks @janraasch!
Dupe of #3548. :)
Would it seem less weird if required was the default, like it is in Flow?
@syranide @sebmarkbage
adding @spicyj.
Hmm, interesting.  cc @spicyj @syranide
Ideas?
Don't get me wrong I don't necessarily mind there being shortcuts, but when you're not significantly experienced it's hard to know good from bad and these shortcuts look like actual solutions (especially to those familiar with jQuery) rather than the messy problems they tend to devolve into. It pushes you outside the "pit of success".
...context stuff...
<MagicInput
@tako-black You've been on a roll lately :).  Nice work!
Thanks @tako-black!
@zpao I noticed you accepted but didn't merge.  Is this blocking on anything?
Thanks @zpao, I hadn't gotten a chance to look.
@jas14 Let's use `null` unless there is a browser that requires it to be an attribute.  Also, we need to rebase due to merge conflict.  Otherwise, looks good to go.
I can't repro at http://react.jsbin.com/sinehasako/edit?js,output on iOS 8.3. Can you repro on that page?
http://react.jsbin.com/fasohojiwo/1/edit?js,output
@liondancer Did @nopantsmonkey's comment resolve your issue?
As per https://github.com/facebook/react/issues/2410#issuecomment-115659185: findDOMNode(this) throws for unmounted components, but the error message is too cryptic:
Curiously, it's bigger after gzipping than the other way:
cc @sebmarkbage
invariant(foo$$bar);
Now gzip is better:
cc @amasad -- you may be interested in the gains we saw here. To summarize, we ended up with 31% better in jsc, 40% better in node for initial startup and 12% smaller bundle after min+gzip. I imagine the runtime gains might be higher for a bundle with more modules than React has.
I think @zpao or @spicyj are the ultimate authority here.  That said, I personally don't see a problem with adding some sort of namespacing, though I'm not sure I really see the need (for reason below) and also I don't think the stuff in vendor is React public API, is it?  Isn't it questionable to be using it for application code?
@ciaoben: Registering it as a callback as you suggested may have hidden/delayed the error, but you still would probably have received the same error later in your app development cycle (ie. next time React needed to reconcile changes to that component).  Therefore, an app that does the dom manipulation as a callback is equally 'broken'.
@ciaoben The point of using React is that you should not be modifying the DOM, so the 'correct' solution is to not use `remodal`.  Instead, you should define your UI declaratively such that no DOM manipulations are needed.
I look forward to the day when #140 is resolved and we don't have to deal with this wackamole anymore :P.
It's been a few months and none of us were here to tell you that this seems like something best suited for Stack Overflow. Hopefully you got it all worked out. Sorry!
Dupe of #4218. ;)
fi
else
Right now it runs grunt build twice (which isn't the end of the world, just a little clowny).
@abritinthebay In master (and the upcoming 0.14) release we've switched to using console.error that has a stack associated it with. https://github.com/facebook/react/blob/master/src/shared/vendor/core/warning.js#L42
Ah, yes. That's the same problem that @yungsters has.
The code is "recommended against" mainly because it explicitly bypasses security features (xss protection) provided by React.  The tutorial also explicitly calls out these security ramifications.  It's an escape hatch of sorts.  The point isn't that you should never use it (if the feature were inherently bad, we would remove it), the point is that you should be very careful and the decision to use `dangerouslySetInnerHTML` should be a conscious one.  Mentioning this feature in the tutorial isn't a bad thing, especially since people upgrading their legacy codebases (ie. people new to React) are the most likely to need this feature in order to interoperate with their existing codebase.
ping @spicyj
Looks good, thanks @battaile!
Looks good, thanks @yiminghe!
http://jsbin.com/rokazegofe/1/edit?html,js,output
What is `other` in your code?
Great, Thanks @tako-black!  I will cherry-pick this over to the stable branch shortly, after which it should appear online.
@battaile If you're looking to get involved: https://github.com/facebook/react/issues?q=is%3Aopen+is%3Aissue+label%3A%22good+first+bug%22
@iamdustan Just a brief mention in our meeting notes for now: https://discuss.reactjs.org/t/meeting-notes-2015-06-19/697?u=spicyj. Probably @jaredly will put up a pull request to the devtools repo in the next few weeks and then you can try it out.
Hi @gyzerok,
@sebmarkbage
> This is an never ending battle.
Wow, I never thought this would spark such a debate :/  I think everyone has made some great points.
@syranide If you're calling into a sham that can't be polyfilled, you can wrap the invocation in a try-catch, so the exception will be non-fatal.  You are effectively handling the case where the operation is not supported by that browser.  It's a pretty reasonable case for developers to handle, since they know they are invoking features that are not well supported by their target browsers.
The only way that will change is if people use shims more often :).
So to me shims seem just fine, but not all shams, people have different expectations when it comes to shams and that's where it breaks down.
To me it's really simple; follow the standard then everyone gets the same experience and everyone gets to choose their preferred fallback, it's simple and it works. Don't follow the standard and you're making vague demands on everyone else to elaborately feature test for what is a minor benefit. It would have been fantastic if ECMA provided specs for acceptable partial implementations, but they didn't.
So given those assumptions, your `Object.freeze` dependent code will behave the same in your modern environment as a sham:ed environment. This is a special case that mostly only applies to `freeze` but every rule has its exceptions.
(As a side note, your component isn't actually controlled like you might believe it is ‚Äì starting value as an empty string and handling the change is maybe what you meant to do: http://jsbin.com/bedadoxada/1/edit?js,output. Doesn't affect this issue though.)
@zpao Most excellent!  Glad to hear it!
@sebmarkbage is the ultimate authority; a go-ahead from him is generally enough to do anything :).
@sebmarkbage doesn't always win!
ok, ok, enough fun.  New diff is up, back on topic.
@jisaacks
Or are you referring to #4077 for XHTML in which case we need it to be sensitive for XHTML as well?
In this latest diff, it looks like we're using upper case for the open tag and lower case for the closing tag?  That can't be right :P, unless I'm miss-reading something?
What does Sidebar look like? Does it understand what to do with children?
in jstransform, which is wrong.
Thanks @johanneslumpe!
Dupe of #3814 (fixed in master already).
Seems to be working for me: http://react.jsbin.com/tegupeyaxa/edit?html,js,output Can you try to reduce to a test case?
@tako-black My understanding is that @zpao cherry-picks the documentation changes over to the public website before releases.  This was merged into master only a few days ago, and @zpao is currently out of town, so I imagine this will get merged when he gets back, unless @spicyj does it earlier :P.  Just hold tight for a week or two, and if it's still not merged onto the website, let us know :).
cc @sebmarkbage
Curious: does acorn support all the latest ES6 syntax or are there many constructs that only acorn-babel supports?
If we're going to call out Acorn, it would feel remiss to not mention Espree, which also parses JSX.
@josdejong It is, but it is not enabled by default.
yolo
## Misc
- [x] update jsfiddles
@tako-black updated the pull request.
We've suggested in the past binding to onBlur if that's the semantics you want. Does that work for you?
<a id="2">foo</a>
<a id="2">foo</a>
Dupe of #1587.
4 verbose install initial load of /Users/ajfarkas/Sites/Learning/react/package.json
cc @sebmarkbage
@reactkr review please. :)
Let me know if that's still confusing.
Try `accessKey`: http://react.jsbin.com/bucuxiguli/1/edit. You should have seen a warning in your console for this.
class UIPane extends React.Component {
<UIPane ref="pane" />
@mathieumg Not sure what you're doing, but you probably just want `return <MyComponent />;`.
Sorry that was directed to @spicyj based on a conversation I had with him yesterday
cc @rmosolgo
http://jsbin.com/wuzinaqari/1/edit?html,js,output
We do support mutation of your own state as a convenience but we do make certain assumptions about your code style.
cc @spicyj @sebmarkbage
I know. But when we have hacky solutions committed we have to maintain them and it's more likely that people will run into weird edge-case bugs that I won't find in my testing, leading me to believe that everything works but then other people run into bugs. There's no good solution here.
Thanks @jquense!
@gilbox Do you mean that `findDOMNode` returns null for a component even though it has rendered an element, so if you replace null with `<noscript />` then it actually works and returns the correct node (**not** noscript)? I.e. something like #2353 (that was supposedely fixed)?
@Swaagie sounds like you have a couple of different dependencies going on there.  Do you not see the issue in other browsers?  What version of firefox are you using?  It would be great if you could provide a jsfiddle that demonstrates the issue.
Closing due to inactivity.  I'm assuming that @Swaagie has solved his issue.
@Swaagie If you have a fiddle that demonstrates the issue, feel free to re-open the issue and we'll happily investigate further.
@korakon It doesn't matter if you rethrow errors, my intended point was that React can internally catch and rethrow errors to avoid the internal state breaking (completely at least) but doesn't because there are undesirable side-effects in many browsers currently.
@jordancardwell Don't we freeze the props in dev now?  In most browsers, you should get an error (with stack trace) like:
cc @graue
@spicyj Should we have a custom transaction for shallow rendering? (Eventually we should get rid of transactions completely.)
@blainekasten are you still seeing this?
@jimfb The problem is when you want to fork something in the middle and don't want to fork everything above it.
@mridgway The current set up is really ad hoc and messy as part of incremental refactoring. :)
- The environment specific part (e.g. the DOM specific pieces, react-native specific pieces, react-art, etc. etc.)
cc @amasad. If react-native isn't ready to consume react from npm, we could build a new package that is just `src/` (maybe call it react-provides-module or something similarly obtuse). I know there are some other pieces that we'll need for react-native before it's ready - @sebmarkbage is working on that.
@zpao, does this wording seem accurate to you?
@jmar777 does that help a little?
@sebmarkbage thoughts?
@syranide I think that's the point/goal of `context`, right?
I suppose context needs to be initialized by the user, so you can't have "first user is responsible for initializing" style code (you need to have a root `ContextProvider` that 'enables' the sharing), but the idea of shared data among subtrees is the intended goal of `context`, afik.
// Server
@syranide Makes sense to me.
More brainstorming: What if we (somehow, magically) allowed a context variable to have a default value.  A component could require a dependency on a `UUID Generator` context variable, which could be provided through context (to allow alternative/overwritten/mocked implementations) or if the variable wasn't on the context stack, defaulted to some shared implementation.  Similarly, the default `clock` context variable reads from the current system time, unless it is overwritten (to manually solve the server-side-clock problem).  Similarly for any other custom datastore that a component could require/desire, a default implementation is available, but can be overwritten to solve unit testing and/or SSR.
Would that be sufficient, if we could somehow make it work?  Or would that not solve the problem?
My replies below are purely gut feeling, intuition and brainstorming :)
@spicyj for situational awareness, since he is cutting the 0.14 beta now-ish.
@syranide It would be possible to add an attribute later that specifies the stateless function is pure, thus enabling you to make it fast.  We've already discussed using attributes to indicate special properties on stateless functions, so this isn't an unreasonable solution.
@syranide I think the key difference is that we don't have to instantiate a component instance and don't have to preserve state, which allows for a whole bunch of performance+memory optimizations.  Most importantly, it allows you to use a lambda function as a React component, which is a syntax that allows a whole bunch of patterns that were previously clunky to become practical.
@syranide Yeah, I'm not saying your alternate syntaxes aren't valid, was just explaining the benefits.  The function syntax is fairly natural, and using attributes to specify special behaviors is also fairly natural/flexible.  If you prefer the fourth suggestion, you can always implement it yourself to append the attribute.  The function syntax doesn't hurt you if you prefer to use a wrapper function instead of setting an attribute.
@syranide Maybe I'm miss-understanding something, but what's the difference?
@gaearon It's worth noting that the wrapper function can return an element instead of manually invoking the delegate, thereby preserving the original behaviors because the nested component renders independently.  The wrapper can also copy the values from the delegate, thereby exposing those behaviors while avoiding a second component render.  Or the wrapper can expose different behaviors if so desired.  This behavior is the same as HOCs using class based components, and is fully flexible without making assumptions about the propagation of behaviors.  I'd argue that these are the ideal semantics.
@spicyj
> It is a speciel field that can not be serialized
So in particular: is there a way we are deviating from the web standards that is unclear?
I feel like the more 'correct'/'ideal' solution is to have the fiddle authors update their fiddles. That said, I don't feel too strongly, and will let @zpao make the decision on this.
I feel like the more 'correct'/'ideal' solution is to have the fiddle authors update their fiddles.  That said, I don't feel too strongly, and will let @zpao make the decision on this.
cc @sebmarkbage
cc @avikchaudhuri Does this make sense to add as a propType, and therefore to Flow's React bindings? Does this implementation map to the Flow semantics for intersection types? Especially for shapes.
cc @gabelevi same question
cc @PiPeep
Indeed. We have the benefit that we don't have to worry about anything internal yet so we can be more flexible :)
-   Adds pretty colors to the `grunt lint` output
-   Breaks `block-scoped-var` :cry:
@hzoo, insight into/thoughts on the ~~`no-empty`~~ and `blocked-scoped-var` rules would be helpful.
@hzoo, But does "cannot be used before it is defined" include
I think it's breaking on that type of pattern when it shouldn't, as `a` isn't actually used until `foo` is called (I believe this is a case of late binding, not hoisting).
@gaearon Yeah, guessing is even trickier than that, because render could create multiple copies of elements (either in a loop or via a helper function), resulting in distinct elements, even though they were created in the same "location" in code.
cc @pipeep
Back in the day, we had a bunch of D&D fans on the team.
https://en.wikipedia.org/wiki/Scrying
@syranide can you explain what is the difference between `MUST_USE_ATTRIBUTE` and `MUST_USE_PROPERTY` and why for example `checked` and `multiple` are `MUST_USE_PROPERTY | HAS_BOOLEAN_VALUE` and `capture` should be `MUST_USE_ATTRIBUTE | HAS_BOOLEAN_VALUE`?
(blocked on killing prop mutations)
@yaycmyk Yes, sorry ‚Äì I meant that we needed to clean up some stuff internally that was still giving mutation warnings since the last release. I think that's all cleaned up now so this can go in.
@syranide The problem is that we can't reliably freeze them "later", since they're passed as children, props, nested inside of other objects, captured in closures etc.
@sebmarkbage
<button is="taco-button">Eat Me!</button>
@Wildhoney The code I pasted is from the W3 TR above.
@Wildhoney  I think there is a merge conflict.  Can you rebase?
cc @gaearon ^^
@mweststrate Yep, saw it, and read through the docs.  Although I haven't played with MOBservable, I agree it looks pretty similar to this proposal for React.  I would even go so far as to suggest that the implementation is likely be better than this proof-of-concept implementation, which I wrote up in a few hours (we would fix our implementation before a final release).  Conceptually, I agree with you 100%.  However, there are reasons such an API really needs to be supported by the React core in order to work efficiently/correctly.
@sebmarkbage Yeah, I think that you solve that the same way you would solve this if it were standard javascript and you wanted to stop reading from a stream.  You need to have some state variable to indicate when you're done.
We support uncontrolled components (although we do not necessarily encourage them) and it seems to me that this is a utility that is of relevance to a handful of such use-cases, especially in more complex situations. I.e. where you have a stateful component which you need to reset, say a rich-text editor or in my case of [ReactSWF](https://github.com/syranide/react-swf) a running SWF, in response to some user action. **EDIT:** Think of it as a complement to `React.findDOMNode(inputRef).value = 'foobar'`.
I don't think there's anything else to do. Something like autoprefixer may exist for JS style objects, but I don't think we'll ever integrate that into core. So I'm going to close out.
@spicyj happy with this now?
Bah, this is because @jimfb changed his username and I guess GitHub doesn't set up redirects for everything.
@zpao What action do we want to take here?
Vary: Accept-Encoding
X-FB-Debug: Y4MZfizL4TEgxAHIZW/5Ggh2/D4jn7rTB3COZu37DYRkvy6+ZE0pD2IkIMOWFCS2hbYNWByE5UWWnjff9a661g==
`/isomorphic`
cc @zpao
cc @spicyj - designer of error messages.
Your window is most likely not properly set up, `document.parentWindow` does not seem standard so I would expect it's your `window` which is not correct.
Side-effects! :astonished:
@gaearon Correct, there would be no benefit to using observables, unless your system already uses observables, in which case, by all means, do so!  Observables propagate state on write, whereas a react render utilizes data on read.  While observables are perfectly compatible with React, the model is actually the reverse of what React does internally, so, yeah, that's why the observable API doesn't add any additional value when talking with the react core.
Interesting update:
@oztune Neither of the above (Both options `A` and `B` are bad).  For applications written in React, you're probably going to want some sort of data management architecture (like Flux or Relay) that is responsible for managing your application's data - you probably wouldn't want to store your application's data in the internal state of an `App` component at the root of your application.
> Also the term "observable" in the case of MobX, while accurate by Merriam-Webster's definition, might be a misnomer. When I think "observable", I think Bacon, Most, Kefir or Rx, etc.
Thanks @chaseadamsio!
So to support this we would need to build it in a way that supports isolation.
Sorry, I'm not super familiar with SVG, can you elaborate?  What are we doing wrong in v15?  What should we be doing?
I think the bigger question is: How many of the SVG tags/attributes use getters like this?  is this a singular special case, or are we going to see this type of thing cropping up in dozens of situations with SVG?
@syranide Sorry, you lost me - can you elaborate on the special case / what the diff should look like?
@bloodyowl When you're done, can you squash your commits together?
@bloodyowl What case are you trying to warn against with such a check?
Hey @bloodyowl ‚Äî sorry you spent time on this, rebased later, and it still didn‚Äôt get through.
cc @syranide & @salier
@zpao How do you feel about this?
cc @fkling
cc @spicyj for a sanity check
@yiminghe I understand. I'd prefer to have the logic in ReactDOMOption because I don't anticipate us adding it for other tags. If we choose to do that in the future, we can look at abstracting it out ‚Äì but ReactDOMComponent is already very complicated and so we'd like to avoid complicating it unnecessarily. Can you move the code to ReactDOMOption's render function?
(This conflicts with #3788‚Ä¶)
:thumbsup: I was actually going to look into this so thanks! :) I'll redo #3788 with babel (you did the hard part so it should be pretty easy)
@iceNuts you should create React Native issues in this repo: https://github.com/facebook/react-native
- [ ] @LoukaN
- [ ] @chenglou
- [ ] @josephsavona
- [x] @petehunt
- [x] @spicyj
- [ ] @vjeux
- [x] @zpao
raw     gz Compared to master @ 6ed98ec0c83918d91b16517544e658e2ec068070
-  'Esc': 'Escape',
-  'MozPrintableKey': 'Unidentified'
+  Esc: 'Escape',
+  MozPrintableKey: 'Unidentified'
@zpao r? Updated babel to avoid property key minifiers.
r=zpao
div.setProperty('placeholder', 'noi32');
<div placeholder=‚Äã"noi32">‚Äã</div>‚Äã
This looks bad.
@syranide @spicyj Do you understand what's going wrong here?  What a fix might look like?
@spicyj I think this happens because we use the "root id" to determine which element was clicked. In the repro case there is no "key" as part of the root ID for two reasons:
http://jsfiddle.net/xzucgepn/1/
A couple things I'm not sure about:
Thanks Dustan!
Merge: aee3614d802802c76fc6ee494a98146bd58d9cd0
cc @petehunt who also wants it gone
I know it's entirely anecdotal, but here is my story:
> All the terminology was foreign to me.  "Virtual DOM" and "JSX" and "reactive data flow" and "Elements" vs. "Components".  I was about to file it away as "I don't really understand what they're trying to accomplish" (a category for things that try to solve problems I'm not experiencing).
> Now, needless to say, I'm a huge fan of React.
Anyway, now that I fully understand React, I can understand why that sentence is arguably a bit misleading, but I also see how it succinctly communicates what React actually does in terms that were very familiar to me.
@spicyj Since babel errors are better and will be the recommendation moving forward, are we free to close this out?
var Lol = undefined
or if you have it as a string for some reason,
http://jsbin.com/vupagekuvi/2/edit?html,js
Thanks for the fix @kubosho!
@StoneCypher That's true but it doesn't help here.
@scarletsky I am not a flux expert, sorry ‚Äì but my understanding is that chaining actions is always discouraged.
cc @graue
@gaearon: When I said this was already supposed to be supported, I was thinking of the behavior in this test:
![spam](https://cloud.githubusercontent.com/assets/8445/7353226/edb57b88-ecc6-11e4-8de0-9a6b098cb880.jpg)
cc @zpao @spicyj Any objections or is this one good to go?  (modulo travis build failure)
cc @syranide, our resident event expert these days.
@jsfb Haha, I'm not _that_ familiar with the events actually ;)
@sejoker Are you interested in finishing this?
If you're a hawk and watching this repo, and wondering what that means for you, here are your options:
- Switch to babel. It supports many of the same things jstransform does and more.
@reactkr review please.
Hmm, SVG makes this a little trickier. Ideally we'd know whether we're in an SVG container or not (which we need for a handful of other stuff) ‚Äì but we don't right now so this may have to wait on that. Thanks for looking into this @kastermester.
@efernandesng This is not a supported pattern. It won‚Äôt behave like `defaultProps` and it mutates `this.props` which you should not do.
Related: #2393, #3696
@zpao Why?  I could see reasons to want to make the behavior as similar to real-world as possible.
Dupe of #2770, I think.
@gaearon Sounds right to me.
@gaearon since you're leading this effort, can we track progress somewhere? Maybe hijack the original description with tracking. It's hard to know what the state of this is at a glance.
@spargonaut Can you provide two fiddles.  One that demonstrates that it works without React, and a second that demonstrates it does not work with React?
Ping @spargonaut
Closing this out as we need something more sophisticated for this to work. #3718 may solve this problem ‚Äì haven't looked at it in detail yet.
Idea (that I'm pretty sure I saw elsewhere, react-native maybe?)‚Ä¶
if (!(someArg !== undefined)) {
I believe this is done intentionally (by hand) in some hotspots, so it would seem not.
We have complex invariants that aren't strictly about arguments so while that might be an option for some cases, it doesn't cover us.
Not a bad idea, however we're probably not going to add features to react-tools at this point. I would suggest giving babel a look.
Now we've officially changed our code+recommendations to Babel.
cc @bolinfest - have you guys done anything to work around this? Sounds like something that should be possible to force Atom to do.
I don't want it Blub, I want it Blob
_for anybody who is super confused‚Ä¶_
@bloodyowl Put https://gist.github.com/vjeux/68fc9285791eef56e2c3 anywhere on the internet that can execute PHP and add a webhook to that file. You also need to generate a token with the account you want to update and put it after `$token =`
Also, for the embedded jsfiddles, switching to https will sometimes break the rendering of results, so we need to be careful with those (I don't remember the details, but I'm sure there are some PR/issues about it in the history).
Location: http://dragon.ak.fbcdn.net/hphotos-ak-xpa1/t39.3284-6/10734320_1571131556471061_497798403_n.js
@codeuniquely It sounds like you're saying that development in IE8 sucks but that there isn't much we can do about it, is that correct?  Is there an action item on our end, or should we close this one out?  Or do we think there is still a React bug here?
@reactkr review please.
Setting `key` like in your example is **wrong**, it should be put on the `<li>`, the children of the array. The paragraph is correct, but perhaps confusingly worded.
That does not make sense, I suspect your copy of React has been modified (probably by search and replace by mistake?).
What @yaycmyk said should work.
Will this fail if I have a key named `toString` etc?
@sebmarkbage - that was my first instinct too. It looks like by that point we're working with objects where key is `.$hasOwnProperty` and `.$toString` and `.2` for implicit keys.
@bloodyowl Creation of the object yes.
@zpao Yet another reason to drop the optimistic traversal if you ask me (perhaps something like #2262)
@syranide In master we now have a warning, at least.
@spicyj Fantastic :)
cc @syranide @salier - do we need to special case this & listen to a different event there?
cc @spicyj I think?
Having said that, this issue keeps coming up as a surprising/confusing part of the framework (lots of people spend lots of time debugging an issue before they realize the problem), so it might make sense to consider changing this.  cc @zpao @spicyj
@tjwudi Thanks, looks like an oversight. Fix incoming‚Ä¶
@koba04 Thanks for identifying this and proposing the fix!
We generally use the word "container" to describe a controller that holds the UI components, but that's not common in the community (that's mostly our word internally at Facebook).
For posterity, never ever do:
@sebmarkbage?
@greeze The official recommendation is to update; we recommend that you always stay on the latest version of React!  If it's a one-off hack until you get a chance to upgrade, you could always open up the `react.js` file in your project and tweak that number manually, but that's arguably worse than forking the source :P.
2. This isn't a standard (yet?). It's _ok_ for us to add support for esoteric things but we should not do it blindly.
@browniefed To be determined.  We're still trying to figure out a good story around layers/portals.  Right now, this is our solution stop-gap solution to allow context to propagate to layers/portals, at least until we figure out the whole story.  This will probably be undocumented (like the rest of context) and subject to change until we've figured it all out.
@zpao's comment about throwing when no parent is provided.
This concept is not limited to context. There are many other things that affect subtrees that we might want to bring into this:
That signature looks more "unexpected" to me, because it looks so similar but is actually subtly different.  I would glance at the function and think I knew the signature, only to be surprised by the parameter in the middle.
Last call for objections @sebmarkbage or @spicyj.
Yea, it seems like a pretty special case but I don't think it's a big deal to support.
cc @vjeux who has hopefully thought about this / encountered it.
@bishtawi I'm not convinced it's a bug in React.  For SSR, I can think of a bunch of reasons to want to enforce single-pass rendering (if nothing else, it keeps open the possibility of streaming the output to the client).  I can't think of any (good) reason to have a child pass that kind of information back up to the parent (your use case sounds like an antipattern to me).  So maybe the bug is that the error message isn't the best, but the behavior is probably correct.
@wied03 Is there a reason you are using `componentWillMount` instead of the `constructor` or `getInitialState`?  Also, can you provide a jsfiddle that demonstrates the issue?
Mixin.initializeAll
Mixin.perform
@ericclemmons Yes, this is still a React issue.
@jokeyrhyme (I'm not part of the team) so all I have to offer is https://github.com/facebook/react/pull/3554#issuecomment-88264870
@henricavalcante Neither is absolutely fastest, it doesn't work like that and it's not a meaningful metric. You can construct cases where React will win hands down and cases where Angular wins hands down. React, by and large, tend to be much more manageable as applications scale up, performance is usually predictable and hotspots can mostly be very easily addressed. Anecdotally this is not the case for Angular and friends, which tend to degrade as applications scale up and it becomes very hard to do something about it.
Regardless, it's a style difference, I don't have a strong preference either way, already fixed it as per @spicyj.
cc @spicyj @sebmarkbage.
@cody I think the weird thing is that you are using componentWillReceiveProps to copy the data from your stores into your component local state.  If you want something that will be called on each render cycle, that thing is called "render".  Why wouldn't the component's render function just get the data from the store as-needed to render?
cc @syranide. Seems pretty reasonable (and vaguely familiar to something you might have done in the past).
Yeah, I could get behind that idea.  I'm curious what @spicyj says.
Since there is so much state and intention outside of the transform that we can't capture, I don't think this is realistic to actually do.
@spicyj - is this safe enough to take back in 0.13?
I don't know why this would be related to addons, but it sounds like you're using an old JSX transformer. Can you check if that's the case?
@ivanflorentin Your `CommentBox()` should be `React.createElement(CommentBox)` or `<CommentBox />`.
@shaimo Closing because it sounds like you found your issue.
@ivanflorentin You should have seen a warning in the console too pointing this out.
http://jsbin.com/venaqozebi/1/edit
@reactkr/translators review please.
@spicyj Here's a kind of related thought:
cc @sebmarkbage @graue @yukinying
dangerouslyTrustAllSources has it's place beyond whether or not we do warnings. It provides a quick fix if you're doing hyjinx and this change screws you over. I agree that long term, it makes far less sense.
The more I think about it, the more I agree with you @spicyj that this makes sense as a 0.13.2 as a partial security fix (introduces the warnings and gives you new tools) and by 0.14 the default is explicit trusting and no more warnings.
It's obviously a question of how far you want to take it, but this only prevents exploitation of React elements. It does not prevent other future sources, say if a users writes a component that takes HTML as children rather than a prop `<MyComp>blabla{{__html}}</MyComp>`, I would even argue that if it weren't for HTML DOM complexities we too would/should support that syntax rather than `dangerouslySetInnerHTML` which really seems like a temporary hack to me.
@leebyron I think that it is important that compilers can generate ReactElements without coupling to the React instance. It removes the annoying need for JSX to have React in scope and these optimizations can work: https://github.com/facebook/react/issues/3228
@brigand - we _do_ want JSON serialization. This would be much easier to solve otherwise. JSON serialization gives us the ability to move React components across web workers and between server and client.
@leebyron JSX is a language feature so it should be able to execute without any other context. For example, array literals doesn't require the `Array` constructor to be in scope.
function Bar(props) {
Yes, however the `_source` key being proposed here is unique to a React-specific transpilation.
> Yes, however the _source key being proposed here is unique to a React-specific transpilation.
If we implemented this on top of something like the [Value Type Proposal](https://github.com/nikomatsakis/typed-objects-explainer/blob/master/valuetypes.md#the-typeof-operator). Then we could potentially do something like `typeof element === 'velement'` or `typeof element === VElement.symbol`.
How about we only expose `setTrustedSourceID` on each of these packages? This causes that package to turn on "secure mode" and only allow that trusted ID. The type of the ID can be of any type for now, but will expected to become a Symbol in the future.
(Can we call it a sourceToken? I think that sounds a little better.)
@zpao Off-topic, but fixing the tests would be awesome, many currently use multiple (partial?) React instances simultaneously and just happens to work at current. It is a blocker for a PR I had to keep the concatenated IDs stored internally, leaving only minimal sequential IDs in the DOM, say what you want about that PR but it is something we'll want to fix eventually at least :)
rAF batching isn't supported and won't go in the docs, but batchedUpdates should.
It was a different situation when it was an addon, the issue made sense at that time.
changes.
@zpao @gaearon
@syranide Yea, we should probably do that. Otherwise we'll just get bitten when `id="item"`.
@zpao Thankfully it seems it doesn't overwrite length :)
This is a legal matter and won't be resolved without lawyers.
@ab34 I don't work for Facebook and I'm not a lawyer, but a project licensed under the BSD license is not a guarantee that you're safe from patent infringement, if you need an example of that then you need to look no further than the [BSD-like licensed VP8 codec](http://en.wikipedia.org/wiki/VP8#History). If you can substantiate your claims then please do, but rash action is only counter-productive to the discussion.
@ab34 Google's VP8/webm seemingly has the same legal approach, so it doesn't seem like something fishy Facebook's legal team made up, [webm's New BSD license](http://code.google.com/p/webm/source/browse/LICENSE.TXT?repo=libwebm) and [webm's Additional IP Rights Grant (Patents)](http://code.google.com/p/webm/source/browse/PATENTS.TXT?repo=libwebm).
@ab34
This has been replaced by babel.
#2127 is the place we've been tracking frags.
Sorry to hear that. Sounds like Nashorn may be buggy as I haven't heard about anyone having this problem in other engines.
FancyButton = React.createClass {
# force push since you're changing history in the remote
Uh yea, that sounds fine to me. This behavior is definitely non-standard markdown but it's an example so not a big deal. We should probably do the same for the tutorial while we're here. And it's on cdnjs so that's all pretty easy: https://cdnjs.com/libraries/markdown.js
Oops, my mistake!
Thanks! Sorry rebase caused pain!
To clear up some of the terminology:
@cosmith @johntyree Did you see a warning in the console logged before the exception was thrown? There should be one.
Hopefully we can make the toUpperCase error a little less cryptic. Just posted #4154.
We've intentionally moved towards https. We should update the fiddles so they are all using https. Cc @spicyj
Should React be responsible for protecting itself against arbitrary JSON as children?
Possible solution, use different syntax for inserting strings as children:
@sebmarkbage So it seems weird to me to add another "feature" to work around this when it isn't an inherent issue, it's introduced by implicit wrapping of primitive values (which we borrow from HTML, it still doesn't make sense for me for the purpose of user interfaces). I'm quite sure that performance implications of this should be minimal, but it obviously does significantly affect the code in one way or another. That is no doubt a very important consideration, but React has challenged many of the wrong-doings and inconvenient conveniences of HTML so far, I think this is another one that should be.
Yeah (regardless of syntax really). But `createElement('div', {}, 'Foobar')` will throw, and `createValue(createElement('div'))` will helpfully throw, warn or toString it to something harmless. So yes, you _can_ still mess it up, but if you run it and it looks correct then it is correct, a rendered value can no longer turn into arbitrary elements if given malicious data which it previously could.
Getting an embarrassing redressing message or phishing attempt through a static message (Threat C) might not be as bad. Even if they do happen, there's no guarantee that there is any significant harm done. They can then be fixed by addressing the pass-through hole, before any real harm is done.
If we agree that we only need to protect against A and possibly B, then we have a lot more possibilities to limit the scope of the problem to a few sensitive attributes.
Still need `mozdirectory` and `directory`.
Dupe of #3399.
Someone else mentioned this being surprising to me too.
@syranide That doesn't mean that people won't write it as `dangerouslySetInnerHTML={{__html: this.props.description}}` ‚Äì doing so is even pretty reasonable if you're careful about naming your vars/props and do `dangerouslySetInnerHTML={{__html: this.props.descriptionHTML}}`.
@zapo The scripts live in the react-magic repo, but I think we'll keep the page on the React site as it's still really useful there.
cc @jsfb - I'm not following the plans for context, can you confirm.
Next time, maybe don't use unstable, undocumented features if you don't want to run into trouble.
@Youmoo Right, as far as I see it React components are classes, not a bunch of values, so magic values and "shape-shifting" properties should be avoided at all costs. `shouldComponentUpdate` is a method so it should be a function.
cc @sebmarkbage
@sebmarkbage :+1:
@neilgalarneau Can you provide a brief sample of the code you were using? In particular, I'm curious whether you were using JSX or React.createElement directly.
Curious: Were you using JSX? Either way, I'd expect at least _some_ sort of error‚Ä¶
@zpao
@spicyj
dupe of #3972 which is fixed in 0.14
@WishCow Seems so... cc @leebyron @sebmarkbage
@sebmarkbage But does #3303 actually intend to allow replacing the "state object" vs just simply understanding how to iterate over generic maps/sets?
CC @syranide who broke (üòâ) this in #2241.
@zpao It seems your prayer wasn't heard ;) But yeah, my bad, I apparently forgot to consider the empty case.
@aaronshaf @gaearon The benefit of making it first class is:
@Mitranim is correct, the semantics of #3920 are more "automatic" than Meteor (unsubscription really is automatic), and far simpler since there is literally zero API surface area in the common use case.
My gut says this is multiple versions of React mixing.
OR
@Tvaroh: @miracle2k is correct, the official signature is `componentWillReceiveProps(nextProps)`.  Context is not officially supported, but is currently the second parameter.  I think your previous props are still available on the component instance.
@deminoth You shouldn't use `React.createFactory` with JSX, it should just be the plain class.
@spicyj, @deminoth's problem is not the one in the issue though (just making sure :))
@Tvaroh Really? It's still not making any sense to me how a string would pass the function check though...
Parsing JSX at runtime is error-prone and slow, and can easily have security implications ‚Äì it wouldn't inherently be any safer than dangerouslySetInnerHTML is.
@akshayp Sorry about that, #3384, you can apply it by hand if you're in a hurry :)
cc @jeffmo ‚Äì know what's up?
@syranide Well, maybe the proposed `if` check should be `if(props.children == null && props.dangerouslySetInnerHTML == null)`, since void elements don't have a monopoly on not having children.
@jimfb That's tricky because you have to consider prev/next children as well and in a sense that's what the "children logic" is doing internally already, whereas void components will never have children so you can simply skip that part entirely with a single stateless check.
@syranide Ah, true :).  Your solution would have worked :).  But the fact I didn't see that is further evidence that the exact semantics of the single expression are complicated.  If I were thinking about how undefined would propagate down, I would have gotten it wrong in the second version.
http://jsfiddle.net/dhjxu5oL/1/
// DifferentListElement.js.jsx
@3den What happens when you want to be both a `PureComponent` and a `GraphqlComponent`?  You can't extend both.
@3den Yes, that's called a "mixin".
- [x] update fiddles
``` diff
escapedText +
Weird, looks like we never did this right.
cc @sebmarkbage
@zpao, just in time for 0.13?
Also FYI, you have `classnames` being a function and a string... check that.
cc @zpao
cc @sebmarkbage
@sebmarkbage Under the new parent-based context (to be enabled in 0.14), how do we expect `React.render` to behave?  Should it inherit the current context, or use the context that is effective at that position in the DOM (eg. someone renders into a leaf node of a React component after mounting).
@jquense Owner is not necessarily a subset of Parent.  Parent and Owner can (in theory) be independent, though the owner is **usually** a parent.  We warn in cases where context variables are used and the owner's provided value does not match the parent's provided value.  That should be rare.
We do want some way to pass the context down. See "#3210 Nested Render Trees".
cc @zpao
Fix travis and then ship it?
"undefined is not a function", or "inst.render is not a function" if you're lucky. Since we assign props/state/context on the next line and _reactInternalInstance later though, it's confusing because the array looks half like it's some React thing whereas really it's not.
That's my two cents.  cc @spicyj
I tend to recommend using BEM-esque class names that are globally unique, usually scoped by component name:
Seems odd‚Ä¶ cc @spicyj @sebmarkbage
This seems weird to me I think, why do we want this behavior?
@syranide Why not?
@syranide returning false (if one object is null and the other is not) seems more correct than throwing an unexpected exception.
@matthewjohnston4 can you include babel-sublime and ping me when it's done so that I can merge it in?
There are a few differences going on here:
<!-- Flux goes here -->
@zpao ideas?
cc @sebmarkbage for situational awareness.
@zpao Why do the algorithms differ?  Why not always use random?
@zpao Yeah, the only two reasons I can think of for not always using random are overhead and collisions (however unlikely).
@slorber can you create a simple jsfiddle that demonstrates the issue?
@gsklee Can you provide a jsfiddle that demonstrates the issue?
This is something I think could be a bit useful. This is a behavior that exists in Java and other similar languages.
#3228 sounds very much related (but again, lack of warnings is an issue)
@ariabuckles The way I've been thinking about this problem is that this should definitely be possible to inline objects in your code. #3228 would only enable this as a production mode compiler feature. However, it should ONLY be ok in the case that you have some other way of providing valid warnings.
Can you explain a bit more about your use case (even if it is sketchy)? It might help us come up with ideas for how to solve your special case without losing warnings for the common case.
- [x] @amykyta - You commit(s) didn't have your name, so I used the one on your GitHub profile
- [x] @jeffmo - you have a million email addresses now, still pointing at anafx one, but can change.
- [x] @graue - ditto
- [ ] @kikyous - let me know if you would like a different name in there than "chen"
- [x] @Pouja - I pulled your name from your email address, let me know if that's ok
- [ ] @brafdlog - Let me know if you'd like a real name in there
@shea256 Also, why does your component need to make an HTTP request?  What does that http request contain?  If data, why aren't you updating your component asynchronously when the data callback returns?
@me-andre wrote:
cc @grassick @iammerrick
@akinnee-gl et al: If componentDidUpdate got fired after initial mount in addition to updates, would that solve your use case?
@akinnee-gl `componentWillReceiveProps` may also be called for reasons other than props changing (see: https://github.com/facebook/react/issues/3279#issuecomment-164713518), so you MUST check to see if the prop actually changed anyway (regardless of which lifecycle you choose).  Also, if you're actually doing asynchronous data, you're going to be waiting for the next event loop before your callback will get fired anyway, so I don't think it would matter if your function got invoked immediately before/after your render function, right?
TLDR: @akinnee-gl is exactly correct in his explanation (Thanks!).  With the minor correction that we couldn't always do the recursive check anyway (even if we wanted to, and performance were a non-issue), because there is no way to recursively check a callback function passed in as a prop.
- [x] ship updated esprima
@yaycmyk `componentWillReceiveProps` is for update from owner, not from the component itself's state change.
I believe it was mentioned some time ago, perhaps we should put out a one-time message first time `dangerouslySetInnerHTML` is used. But then most people probably use it somewhere and will nag to get rid of it... :)
Looking further ahead, I've had https://github.com/screeninteraction/jekyll-multiple-languages-plugin open in a tab for a long time now, it might be time to finally look at integrating that. We have 3 translations at the moment - zh-CN, ja-JP, ko-KR - and while they aren't all complete, it would be great to integrate them into the site more holistically. Ultimately I'd like to move away from Jekyll to something node-based (and preferably using React, as we're doing in most of our other docs sites). We might have to write out own i18n stuff to make that work though.
@marocchino awesome! We'll be better with actually merging the PRs moving forward :)
By mutating state we also have the timing issues that comes with mutation.
@jquense There are other advantages to requiring a complete `getInitialState()`.  Readability is the most obvious advantage, because you can always see (in one place) what state variables are being used.  Another minor advantage is that it forces component developers to explicitly think through their component state (and consider if state is really necessary, since ideally most components should be stateless and this nudges developers in that direction).  Much more importantly, forcing `getInitialState()` means we can identify stateful components, which allows for performance optimizations across your entire React app.  It's not just about the minor cost of a V8 optimization surrounding statically-keyed objects; it's potentially about a framework-level optimization.  So saving a little convenience for one person could mean a lot of performance loss for a lot of people.
cc @sebmarkbage
Spinoff discussion of #1373, #3128 and #3228.
Ignore @golenazfazli, that appears to be a terrible bot.
cc @sebmck
@sebmarkbage
Perhaps I'm way off on the utility here, but it seems to me that it solves a lot of problems that refs as meant to solve but in better ways and actually storing refs should only necessary when dealing with uncontrolled components. All other uses should reasonable be capable of doing its thing directly on instance when the callback is called.
@sebmarkbage \* facepalm \* ;)
return foo;
return foo;
return foo;
## Advanced Optimizations
cc @sebmck
I realized that if you have the code:
@spicyj : I think the definition of constant values has to be that the expression contains zero references to non-local bindings and zero side-effectful expressions (member expressions, function calls, etc).
super(props, context),
@cpojer  It ties it to subtle differences in React semantics that we can't prove are sound. For example, `MyComponent.prototype.render()` wouldn't work. A sub-class that doesn't call the super constructor wouldn't work. Etc. @spicyj's suggestion would be safer but comes with a performance penalty.
@sebmarkbage
ZOMG! So exciting.
New Cool Features
- [x] Kill `_isReactElement` (@spicyj)
In the world of the React community, the word "component" is often redundant. For example, when we say "instance" we often drop the "component" part.
@jsfb Not what I read from
@rchanou It allows for performance optimizations in the core (since we don't need to keep/track instances) and it also means less boilerplate/typing for you (since you just need a function, instead of a fullblown class).
+1. I was going to implement this but didn't have any time to do it. At work I've encountered some bugs where non-React JavaScript touched React nodes and broke everything.
IMO those cases should be explicitly marked as such (perhaps a `dangerouslyAllowExternalMutations` attribute or something) as it's quite rare.
When react-native is released. There isn't a set date there, but we're working to get it out as soon as possible.
This comes with a few problems.
Would be nice to figure out how event bubbling works as well (cf. #1696).
cc @zpao
From @gaearon https://twitter.com/dan_abramov/status/568566795004723201
Wow, #thewebworldsucks.
Can you give a bit more context, perhaps in a jsfiddle?
http://jsbin.com/huranakovi/2/edit
cc @sebmarkbage
That said, I'll let @zpao or @spicyj sanity check this idea, in case I'm missing a subtlety here.
throw new Error();
@Sumei1009 Sure!
Thanks @vsiao! :)
@koba04 Looks great, thanks!
cc @yungsters, @vjeux, @zpao
After digging around and evaluating, i see the following possible rule changes:
cc @sebmarkbage
@hmarr I doubt performance is an issue, my main concern is that people overwhelmingly implement equality as `prev === next` everywhere and in `shouldComponentUpdate`.
Ah interesting, it seems that positive and negative zero are not treated as equal by `Object.is`.
cc @spicyj @zpao
cc @zpao ... ?
Whats up with `--non-strict-es6module` you ask?
This is actually just a disconnect between expectations and the reality of working in the browser :/.
On 13 feb 2015, at 17:44, dominataa <notifications@github.com<mailto:notifications@github.com>> wrote:
@jasom Ah :)
@jasom Your commit is broken (it includes git comments).
> It's a bit tricky because of transferPropsTo (or whatever we do instead) where you might have props that need to be passed on even if you don't consume them.
cc @sebmarkbage
@gurdasnijor Is this using React 0.12 or 0.13?
@cody yea :( Perhaps we could just make this mulitline?
It's not how we would typically format this but it easy to read at a glance:
(damn you ASI for not just letting us go to the next line)
@syranide, any interest in taking this on? I think we probably might just need to handle a different event for ranges (like we use clicks for checkboxes)
(Dupe of #554.)
@ThomasChan Can you provide a jsfiddle that demonstrates the problem?
@axemclion Thanks for the writeup, that's pretty cool!  Your writeup mentioned that the bottle neck appears to become the mutations on the UI thread.  Presumably this is because you are mutating the values in every row as frequently as possible, but this is obviously not representative of real-world use cases.  It is my belief that most rerenders result in very few changes (That is, the majority of a typical application remains unchanged from one frame to the next).  Under the assumption that a typical rerender would do a lot of "work" (calculating diffs) but affect a small number of dom nodes, I wonder if batching becomes less significant and the overall performance benefits of running in a worker become more evident.  Especially with respect to things like scroll performance while running a rerender in the background.
React Native doesn't have that limitation because it can get text measurements in the Worker thread.
Yea, this is better. It still looks weird, but better :). Thanks!
FTFY
@skiano No, I don't think there is any fundamental architectural reason, but it shouldn't be a super common pattern.  The more common pattern is to create the element on the outside and pass in the element, or to pass in a function that takes in a particular set of parameters and returns an element.  This allows the owner/parent to have a little more control over the props that are passed to the nested elements, since the parent/owner is deciding the class of the element that is being created.
cc @zpao
Thanks @WickyNilliams and @benglass!
cc @syranide
@zpao I never really liked the way it turned out.
@swannodette
@dmhood #3228
@dmhood It won't for "props" (at least not more than object already does).
@dmhood But my point is that I don't understand why you want that, "props" should be considered a class of sorts (a fixed structure), not a dynamic map of keys. Just like you wouldn't expect an "options"-object to be a Map. I don't see what benefit you expect to get from using a library to construct "props". In 99% of the cases only the values are dynamic, not the keys so the library just adds overhead.
@brigand Yes certainly, but that only works for truly static "props" and it works equally well for objects as it does for immutable Maps.
@cigitia As for 4, `style` is inside `props` and is technically unrelated to this, this discussion is about the universal restriction on `props` having to be an object. The interpretation of `style` (and other properties) is the responsibility of the component (in this case `ReactDOMComponent`) and if there's no technical reason (say performance) then I'd imagine it will be supported through generic iterators in the future.
@skrat
> @syranide You seems to the only one in this thread not seeing the benefits of using anything else than POJSOs for props objects. No offense but there are many that see it, the reasons were explained here.
@Simek, are you interested in addressing the comments?
Huh? If `value == null` then it is by definition uncontrolled?
@iam4x Just because it resets doesn't mean it's a good idea to rely on this behavior. `null` switches controls into becoming uncontrolled, which is not what you really want.
@arackaf Imagine something like `<Foo><div onClick={this.onClick} /></Foo>`. It will be created in `this` component but it will pass through `Foo`. Foo can currently intercept it, clone it and do whatever to it. Technically we could track this through the magic "owner" property (which is how refs work) but that was deemed to magical and breaks a number of optimizations and use cases in subtle ways. We hoped to get away from such magic semantics.
FWIW I maintain https://github.com/gaearon/react-deep-force-update for my hot reloading purposes but it relies on React internals.
@spicyj Is this still on our todo list, or is this something that we don't care about / there is no reason to fix?  Can we close out the issue?
Since this is an artifact of using jstransform / esprima, I filed an issue elsewhere - we'll pick up any changes from there. Tahnks for filing!
Hmm, since this is actually a parse error, can you file an issue in https://github.com/facebook/esprima? There's nothing we in React can do about this.
It might turn out that it's not realistic with the way React is architected but if somebody wants to investigate, I'd be interested in hearing how it goes.
@zpao Well it's built like that, but replace `array.push()` with something internal and voila...?
@jakearchibald Can you help me understand how streams could help on the client for us? Would there be some way to set innerHTML to a stream or were you thinking of something else?
@AbrahamAlcaina Yes, we hope to implement some optimizations like that.
@mufumbo We don't have any easy wins to suggest right now, sorry. We're planning to spend time working on performance over the next six months or so and hope to improve this but it sounds like React might be too slow for server rendering for you right now.
@mufumbo: As @spicyj said, we're not ready to give actionable advice on ways to make rendering faster, but it is something we're actively working on.  I've literally spent the last two weeks pouring through flame graphs (not my idea of a vacation).
@mufumbo Are you using `require('react')` package directly from npm? If so, there is an unfortunate perf problem due to how `NODE_ENV` is checked (see #812). If you require `react/dist/react.min.js` instead (and `react/dist/react.js` in development for better warnings), you may have vastly improved perf. One way to do this is to make `node_modules/react.js` a file like this:
Oh man, I hate these headers and the silliness that comes every year because of them.
Thanks for all the feedback!  It's good to know what the community is thinking.  Some people love ES6 classes, others don't like them as much.  Fortunately, React lets you choose which syntax you'd like to use.
@brigand - however:
@syranide If you receive props in the same batch as where you have a state update, then this gets executed before shouldComponentUpdate passing the new props and state, before the instance is update.
Spec says `it should not get confused by disappearing elements`, which I suppose is sufficiently vague as to imply any non-fatal but still undefined behavior :).
@jsfb @sebmarkbage @spicyj - did we have a plan to fix this warning / expose something else?
@myagoo Yeah, that's one of the reasons we're looking at new types of refs so that you can get more than one handle. Some discussion at #3234. Also see #3266 which lets you change props while preserving a ref.
@flying-sheep Everyone has different opinions on what is useful/necessary/meaningful though, React.addons.\* is mostly useful for getting started. `classSet` was originally designed to be compatible with CSS class name mangling, meaning it has to be simple so that each class name is easily discoverable.
That is simply not how React is intended to work, it should not work that way and it cannot work that way.
A parent accessing a child is generally considered an anti-pattern I would say.
Unfortunately right now we can't actually use the latest eslint _quite_ yet :( It's actually in much better shape than it was, but we locked to the version we did because it (mostly) happened to support the same set of ES6/JSX features we use (still used esprima-fb at the time). Namely, all of our code parses, which was important. ESlint 0.11 final and 0.12 didn't support many things we needed. 0.13 is actually looking great, though it's still missing rest args (AFAICT looking at docs).
![tmyk](https://cloud.githubusercontent.com/assets/8445/6117298/4a4f3f0a-b068-11e4-99b8-0f060a618a7e.gif)
Also, the idiomatic phrase is "with the exception **of**...", not "with the exception **for**..."
Also, the idiomatic phrase is "with the exception of...", not "with the exception for..."
@jareware Correct.
:shipit:
cc @gaearon
> cc @gaearon
@arendjr I'd call that bad practice, `Tab` and `TabButton` are unrelated and should be provided through separate props, not as a mixed soup of children.
@syranide I'm not sure I agree that this is bad practice.  It seems perfectly reasonable to me that a parent component might want to have arbitrary behaviors based on their children.  In particular, if components want to preserve the absolute ordering of the child components, there isn't really any other way to do it (do the tabs come before/after the tab buttons? or do they alternate? or are they otherwise mixed?).  I agree that's not what he is doing here (he doesn't appear to be preserving order), but I think it's a completely valid use case.  You could imagine someone implementing a "smart div" that does fancy layout things, and treats some components differently from others (obviously it's natural to have a mixed bag of children).
Given the simplicity of @ofersadgat's implementation, I'm not convinced it makes sense to pollute the API space by providing a filter function.
@syranide I agree reconciliation would suffer.  Maybe a `React.Children.filter` would warn if children do not have keys?  That is almost a reason to provide this function, to add a warn hook.
cc @spicyj
Sure I can imagine that, but I'm not quite sure when that actually makes practical sense and if there aren't better solutions to the problem. Inventing non-standard behaviors on a per-component basis seems like it should be a last resort, to be used only after you've concluded that established practices isn't a good fit. It shouldn't be all-or-nothing, just because children can be used and looks pretty, doesn't mean they should.
The solution could imaginably be `<Tabs tabs={[...]} />`, it's no longer an opaque structure and the special behavior likely apparent to the user as well (just saying). If you ask me, each tool should be used only for its intended purpose, children has a purpose too and I think it's a mistake to expand that definition unless we're sure it makes sense.
[<div key="monkey" />, <span key="gorilla" />],
<input key="gorilla" />
<div key="0.$monkey" />,
<span key="0.$gorilla" />,
<input key="$gorilla" />,
though exactly which keys you should assign to which elements depends on how you want to preserve each child's state/identity.
@zpao Considering we enforce the camelCasing for everything else, how 'bout we do the same for vendor-prefixes and change to `oFoo`, `msFoo`, `webkitFoo`, `mozFoo`, etc? (Or at the very least change `ms` to `Ms` to be consistent... **EDIT:** but then we'd have to check/transform all style names, bah! But perhaps it makes sense to keep a CSS whitelist too? For much needed warnings...)
cc @sebmarkbage
return <div className="container"><FancyButton disabled /><span /></div>;
{ type: FancyButton, props: { disabled: true } },
**Children are Special**
**`key` and `ref`**
**Constant Destructuring**
**Nested Arrays**
Flattening makes it very difficult to preserve keys though.
cc @chenglou
return ReactJML(
[FancyButton, { disabled: true }],
JsonML seems like yet another DSL for something which should have it's own dedicated syntax. I don't think the solution to problems like this is inventing ways of making the code less ugly with magical arrays (just because arrays have minimal character overhead), it's understanding that view hierarchies require a syntax designed for it (that's why we have HTML to begin with) and it's time for languages to catch up.
@syranide `var [tag, props, children] = yourJsonML` solves your first problem.
@syranide yeah that's what clojurescript people do: https://github.com/reagent-project/reagent#examples
cc @sebmarkbage
Ofc, this has the problem of closing tags looking weird.
Super delayed response:
Also JSX Transform has been replaced by https://babeljs.io/
Personally, I would really like to see https://github.com/facebook/react/issues/1873 fixed.  I feel like people who feels strongly about style sharing can pass their unitless style object through a function to apply the correct units for their platform (like Facebook does for css class minification on the web) before passing the object to React, but that's not something React should be doing automatically (and most certainly not in the core).
(@brigand sorry, I did mean `next`.)
http://blog.taylormcgann.com/2014/08/21/catch-errors-javascript-promise-chains/
TODO:
Closing due to no response, though this might also be #1326.
gh-pages is actually generated automatically from the markdown files in the main branch ‚Äì and #2874 a few days ago actually made just this change; we just haven't had the chance to rebuild the docs yet.
Thanks Sophia!
@Dyscrete, I believe @zpao is referring to the master branch where this was broken.
It seems like there are two ways to mitigate this issue:
That being said, the diffing is mostly an optimization. It's popular because it's creative, I guess. But that's not the important part of the concept of React imo. Given a reasonably faster platform like OpenGL you probably don't need diffing since redrawing everything would be faster?
This is a bit problematic for natives because it is environment specific but since this is just validation we can probably special case this.
Thanks! @zpao
http://jsbin.com/pirayosura/1/edit?html,js,output seems to disagree if you open the console and click the inner div.
ping ping @zpao
and @jeffmo who might know if we plan to support this particular option if we transition away from jstransform
I made `es3` the default, ~~but that's different than our current behavior‚Ä¶~~
A bit out of loop but, if state is `{a: 1, b: 2}`, is setting it (merging it) `{b: 3}` still gonna work? I can see it being convenient for a long time to come, but if we go immutable, I'd rather return the whole state object: `setState(state.updateIn(path, val))`. Avoids a merge and uses structural sharing as much as possible.
Internally, we've actually been seeing the opposite trend.  React is being used more and more frequently outside of web to generate XML-compliant output (see ReactNative, React@Netflix, ReactArt, and some not-yet-public facebook projects, etc).  At our team sync yesterday, we spent a large chunk of the meeting discussing how to properly support XML Namespaces and other XML features, because there is demand there.  Even on the web-side of the world, we need to start supporting more XML functionality if we're going to support web components.  So more generic XML support is certainly on the roadmap, and this brings us closer to that goal.  I could totally see us putting HTML vs. XML behind a flag at some point in the future, but probably not necessary at this time and probably shouldn't be blocking this pull request.  That's my two cents anyway.  We can always add flags later.
@jsfb
Right, but those are interesting projects and developments, but that's what not the majority of users are doing, they're using React instead of jQuery or Angular.
Other than the concern that some people might not like that their html looks like xml... are there any other objections to merging, or what's the status on this PR?  Who's court is the ball in right now?
@spicyj, is a change still required on @Acubed's end for the `<!----->` trick, or is this PR otherwise good-to-go?
http://jsbin.com/tizolesasu/1/edit
Ok, so if I understand correctly, the ball is in @Acubed's court to remove the `<!--->` hack from this PR.
cc @zpao
Anybody have objections? @spicyj?
@mlmorg While it's off-topic, `createElement` is primarily intended for JSX AFAIK, using `React.DOM.*` and `React.createFactory` exists for the non-JSX crowd.
Again, off-topic and probably doesn't apply to you... but now you know if you didn't. :)
@sebmarkbage Hmm, perhaps a comment can be considered a special case and that's why it makes sense, but I'm not sure it does, a comment node is not universally useful and only really useful for the DOM frontend?
@syranide You're right. However, currently the `React` module is already overloaded with DOM specific APIs such as `React.render(ReactElement, DOMNode)` and `React.findDOMNode(ReactComponent)`. We'd have to move them all at once to a separate namespace.
@sebmarkbage For the future I guess... :)
If we expand the context a bit, it seems to me it's a matrix of:
2A makes no sense to me I think, that's what props are for?
Deprecate keyed objects as children sometime?
@syranide No, because `React.Component` didn't exist in previously releases. Not exposing it explicitly to prevent new code from relying on it.
@sebmarkbage Makes sense, the problem I see with it is `this.refs.foobar.getDOMNode()` will now fail "arbitrarily", depending on whether the component moved away from `React.createClass` or not. I realize these are fairly rare circumstances, but it did bite me. I.e, it is not only the component itself that is affected, but the consumer of the component as well.
@syranide That's why we also have `React.findDOMNode(this.refs.foobar)` which moves the responsibility out of the instance itself into a global escape hatch.
they didn't exist.
@gaearon Speaking of the devil... https://github.com/facebook/react/pull/2805#issuecomment-68723101
@zpao good to go?
@spicyj better?
@jsfb shipit
cc @sebmarkbage
Not sure what formset is. Perhaps you meant fieldset? If I'm being stupid let me know and I'll reopen.
cc @zpao
cc @spicyj
mixins: [MixinA, MixinB],
// Depth-First Traversal of Mixins
// MixinA.componentDidMount
// Reverse of Above Traversal
// MixinA.componentWillUnmount
// MixinA1.componentWillUnmount
@sbrandwoo My understanding is that you're supposed to use componentWillUnmount to clean up any timers, cancel async requests, etc.  Failure to cleanup is often a code smell that indicates a memory leak or other even more severe bug.  That said, in the case of an asynchronous callback, it's easy to imagine why it would be easier to just ignore the update rather than attempt to cancel the callback, and this is where isMounted could come in as a handy guard.
There are three separate scenarios in play here:
This is generally a really bad idea. This is a race condition that will act differently depending on the timing of your system, so testing won't reveal scenarios that an end user will hit. If you write in a completely immutable style, it's not as bad, but still considered bad practice.
This is a case of death by a thousand cuts. There is always a reason to avoid the complexity of cleanup logic, so you end up convincing yourself that it's ok for your special case. Then you run into GC and memory issues, and blame React for being slow. This is especially critical on mobile devices where memory issues can cause a browser to crash.
The big issue is that we can't really tell if the callback is coming from a Promise or a long living event. Failure to cleanup a long living event is a very common and dangerous mistake. So, how do we prevent that mistake from happening?
Also, is the underlying issue that React doesn't let you set unknown/unrecognized attributes?  If so, perhaps this is a duplicate of https://github.com/facebook/react/issues/2746
The same goes for the hyphenated -> camelcase idea. You're specifying values one way and reading them another.
üîí
I feel like we've said no to this with good reason before but I can't find the link. Regardless, the discussion for extending semantics of JSX belongs in the issue @bloodyowl linked to. @sebmarkbage, perhaps you remember where we've talked about this before / can weigh in.
There's also the whole question of _why_ we're trying to unmount anything at all here. It seems like we shouldn't be doing that.
cc @sebmarkbage @spicyj
@thheller, what's your particular use case for the top-down order?
@thheller Yea, that use case seems very mutative in nature. You might be able to use `componentWillMount` instead.
@ryanzec `onChange` as provided by React is not the standard implementation by the DOM, it's basically a lesser but polyfilled `onInput`.
Odd ‚Äì I was under the impression that fastclick works properly with React.
I think we should probably make use of `spyOn` - it feels a bit easier to work with.
Jasmine has all of this built in with `spyOn`, which we use in a bunch of other places to do the same thing but in a less crazy way.
cc @zpao @sebmarkbage @spicyj
That's kinda crazy :open_mouth:
This sounds like a dupe of #1326; merging.
cc @salier
cc @sebmarkbage @syranide who have talked about some of these things before
@gaearon I have a PR up for exactly that, but it's somewhat thrasing and the devs prefer to know the full story (there are many different ways it can be done and some may be faster than others), also React has a few currently irrelevant bugs which my PR trips on bad. But I definitely see that it is very much possible and seemingly even preferable from a performance perspective.
@syranide Yeah, I do want to do this. It's probably the best solution here.
4) Error messages are too short and cryptic!
Thanks! @zpao
Calling bar will cause an exception in foo, which will not be caught.
Actually I'm not sure about this. I think returnValue isn't a spec:ed standard so I guess these jQuery-inspired methods are about as standard as it gets...
This was apparently with edge (presumably not 0.12). I also can't reproduce so I don't think there's anything to do here. Let us know if you see it again @dotfelixb!
I wonder if these haven't been superseded by any other property/style? They seem quite exotic (and not present in HTML5) so I can't really find any good informaton. Anyway... it seems they're available as properties even in IE8 and probably shouldn't have `MUST_USE_ATTRIBUTE`.
`removeState` seems rather superflous, `replaceState(null)` should be enough no?
It's a tricky problem and it's come up before. We've thought _a lot_ about it but there isn't really a solution yet. It's really a problem on the web as a whole and not specific to React. You've hit on a lot of the problems. There are questions about what package manager get used (npm? bower?), what to do about CSS (so many questions there... how do you prevent clashing class names? how do you package it?). Style is going to be intrinsic to the way you build a component. Take react-bootstrap for example - it would be pretty silly for it to exist without styles. And then there's dependency management which is a whole can of worms.
http://jsfiddle.net/kb3gN/8339/
http://jsfiddle.net/e2nc8z4n/2/
In this case, it is also strange.
Replaced by https://babeljs.io/
Dupe of #1855 =)
(Could it be that you misunderstood what it means to generate js from jsx?)
@gabrielecirulli Yea, seems like it wouldn't be a bad idea to have a check in createElement.
@johanneslumpe What was working fine before? createElement didn't really exist (it was added in 0.11.x but would likely not have been used). And react/addons has always been the full React object with addons inserted.
What @spicyj said. When I first saw keyMirror I actually wrote something very similar before being told the same thing. It's weird but it has a purpose. I encourage you to release any tools you find useful for yourself on npm / wherever. I'm sure others might find this useful.
@jiyinyiyong What @browniefed meant is two copies of React, as discussed/described in: https://gist.github.com/jimfb/4faa6cbfb1ef476bd105
Based on @gsantome's response, it looks like he was running into https://github.com/facebook/react/issues/3298
@syranide i thought we randomized the root keys when server rendering?
@zpao Oh, it seems I conflated JaRails comment with the issue itself. Now it makes sense :)
@zpao It seems you're right, http://jsfiddle.net/ze6vc7L2/ I'm quite sure it wasn't broken like that before...
@syranide No, it's unfortunately always been this way. On my infinite to-do list to fix.
cc @sebmarkbage.
cc @sebmarkbage
> On Dec 4, 2014, at 2:15 PM, Ceane Lamerez notifications@github.com wrote:
2. The real issue is that you're passing `undefined` to value.
This sounds like a dupe of #2533.
`{ [key:string]:number }` to ensure that all properties are numbers. It's kind of weird too but once you learn it, maybe it makes sense?
cc @sebmarkbage
I believe it's `input` that is misbehaving here, not `textarea`. Setting `value` to `null` makes it uncontrolled and it should make no attempt to change the value.
@syranide does setting to null make it uncontrolled? That doesn't sound right to me, but I haven't looked at the linkedstatemixin in a long time. I also would expect the behavior of the input here, not the textarea.
@zpao http://jsfiddle.net/91khmysc/ `null` is treated as (mostly) identical to `undefined` (or not set) through-out React I think?
@rymohr While it makes sense in a way, it breaks with how all other props work and I feel like there's something inherently wrong about `<textarea value={undefined} />` being a controlled component as well. While I don't have this on authority, I'm pretty sure that JS defines `undefined` as meaning to be literally undefined, treating it as anything else breaks expectations.
cc @yungsters (for here and #3041) - I know it's been a while but you may remember some of your early thoughts around controlled components.
3. <input defaultValue="foobar" />
=> "foobar"
=> "foobar"
3. <input defaultValue="foobar" />
@zpao Hmm, actually, let's rephrase it like this:
5. (noop or batched updates)
@yungsters But if we take my example above (copied below), I think the only thing that make sense is to "get the latest value and set it before becoming uncontrolled" which is equivalent to a reset.
5. (noop or batched updates)
@rymohr
@syranide But what about when no `defaultValue` is supplied?
5. (noop or batched updates)
@yungsters I don't think there's anything ultimately right or wrong here and there's no use-case that _really_ makes sense.
I see two options to this ambiguity:
5. setState({value: 'foobar'});
5. setState({value: 'foobar'});
this.state.value !== 'magic' ?
If you type `magic` then it will be uncontrolled and if we weren't relying on the stateful DOM ideosyncrasies the value of the input would actually be `magi`, not `magic` (can be reproduced other ways as well, feel free to replace `magic` with `wizard` in the change handler to the highlight the issue).
5. setState({value: 'foobar'});
5. setState({value: 'foobar'});
=> "foobar"
this.state.value !== 'magic' ?
this.state.value !== 'magic' ?
When you type `magic` it resets and becomes `magic` as you would expect. Again, don't ask me why you would want to do this, but we're again showing a deterministic state.
var FancyButton = React.createClass({
First thing we need to decide is what the ideal/correct behavior is, since no matter what we do here it is a behavioral change.
Once we decide the desired behavior, we can move forward with a fix.  cc @spicyj @sebmarkbage Thoughts?
cc @syranide
@mczepiel I believe you mixed up the order, anyway... there are a handful of DOM attributes which do not exhibit default behavior when set to the default value, the attribute has to be removed to restore default behavior.
Oh wait, my bad @mczepiel ... yeah there's a second bug here, that you were referring to.
@zpao Sanity check?
@sebmarkbage - thoughts?
I think the bigger problem, as @mjackson pointed out, is that we don't know when the context variable has changed.  Do we really want to re-render every fbt/i18n text node every time the i18n ContextProvider happens to re-render?  We haven't yet provided a way of saying "don't worry, nothing has changed, don't bother re-rendering every text element on the page".
I actually thought the "wormhole" pattern was the antipattern, and broadcast was the expected pattern.  Context is only interesting if there are lots of consumers of the variable (ie. if passing the prop explicitly would result in it being added to virtually every component and is therefore a lot of boilerplate), otherwise, probably better to pass it explicitly as a prop.  But @sebmarkbage appears to have said the opposite (and he is usually right about this stuff), so now I'm confused and would like to get a clarification from him.
@sebmarkbage @eplawless What is an example of the wormhole pattern that you think is valid?  What is the parent providing, how is it being used by the child, why can't it just be a prop on the child, etc.
<FancyCell />
class FancyCell {
class SomeWhatFancyCell {
Plausible alternative API:
Just spitballing here.
Continuing the spitballing...
Could use an alternative syntax...
<FancyCell borderStyle={myKey} />
Oh, ic, @sebmarkbage is pulling out fancy new javascript again :).  I should have known; he is at a TC39 meeting today.
@sebmarkbage You could use UUIDs (aka Symbols), yes, but your new proposal does allow the key to be decided at runtime, meaning the parent COULD influence it via props (not sure what you think of that though).  Having said that, I'm not sure how useful that is without making the values available within the jsx scope, I'll need to think on that more, but it does add some cool flexibility (maybe).
@taion
@taion I'll go talk with the Relay folks and figure out what's going on there.  Until we have a definitive answer on that, I wouldn't recommend applying that technique in your own code.
cc @sebmarkbage
@taion Yeah, I understand what it's doing, but I'm skeptical that it's a pattern we want to support.  I'll talk with Sebastian and the relay people, but my guess is that the answer is going to be "yeah, that was a hack, don't do that".
@taion The approach you're considering seems even more error prone to me ESPECIALLY in the case where you have mutable data.  If your data is mutable, then you're going to have race conditions where children sometimes randomly update (due to an event handler, a context change, a force update, etc), and your code becomes very unpredictable.  Let me sync with some people and figure this out.  Ping me in a couple days if I haven't posted the outcome of that discussion.
@taion Ok, I just talked with one person on the Relay team, and a couple of other React people.  We are all in agreement that this is not a good pattern.  Please don't do it.  Using state to store your data while waiting for an update is the official solution, until we come up with a better api/recommendation for that use case.
@aghosh47 I think a context change does trigger a rerender, but it's possible we missed an edge case.  If you could create a simple jsfiddle that demonstrates the issue, that would help us investigate.
Ping @aghosh47
@cauburtin Context is useful because:
"appear" differs from "enter" in that all children of a transition group at mount time will "appear" but will not "enter". All children later added to an existing transition group will "enter" but not "appear".
cc @petehunt
@appsforartists, yeah thats the only major difference.
@skiano I think reactify@0.15 uses the JSX compiler for react 0.12 so you may run into issues there. You should check and make sure the react-tools version matches what you are using. But shouldn't be related to what you're seeing.
`<img>` is special because we have an internal wrapper component to do some specific event handling.
@fabiomcosta Can you list browsers and conditions that you've tested?
`mockComponent` is legacy and is not needed by Jest anymore really.
Can't decipher the actual issue here, but it sounds like #2353
Hmm, an interesting special-case, but I'm curious... won't pressing CTRL-B or w/e wrap the selected text in `<b>`?
cc @salier
@totty90 `props` on ReactElements (i.e. what you return in render()) is considered immutable AFAIK, in-fact I believe the entire ReactElement is to be considered immutable.
cc @zpao
cc @zpao
@zpao It's really weird:
‚îî‚îÄ‚îÄ esprima-fb@6001.1.0-dev-harmony-fb
Weird. I don't understand npm sometimes.
Whoah... that is amazeballs.
@jiyinyiyong Ah now I see, same answer though, it's a limitation of the current "DOM implementation" in React. There's nothing wrong with your example, but `group-a` must wrap `this.props.children` in a DOM component for it to work or it will return an array (which is not allowed). AFAIK devs have expressed intent to fix this in the future.
@leoasis I haven't really investigated the exact obstacles, but broadly speaking, the problem is the current implementation expects _all_ components to correspond to exactly one DOM node (can be shared) which is a very simple case to handle (in-terms of lazily associating node and component, and also mutating the root components). To be able to handle 0 or 2+ is a lot more complex and none of that "infrastructure" currently exists in React (components would need to be aware of sibling components, etc, etc).
Closing this as a dupe of #2127.
@menelaos No problem.
Pushed, sorry for the delay and confusion.
Which is not valid anymore.
@sebmarkbage Do you want to do an explicit warning when using the output of createFactory with JSX instead of the generic "don't use functions with JSX" warning? Doesn't look like there's a real way to identify them at present but we could always add a `._isReactFactory` or something‚Ä¶
@irvinebroque Unfortunately it's not possible for us to print out a better error but you should be able to set a breakpoint at the warning and then inspect the call stack to see what part of your code is causing the problem.
Correct. And yea, I wouldn't add webview to the whitelist anyway. Not because it's obscure but because it's a non-standard tag.
By design I believe, @sebmarkbage
If you're reading a prop named `key` you might be overloading the meaning of `key` or accidentally using it for something unrelated.
@zertosh thanks for the repro!
@zertosh Yes, thank you, great repo.
@zpao, I think I disagree here. It's perfectly valid to have a `mixin` property to be an array for your purposes. I'm not sure this warning carries it's weight of this special case.
`shouldUpdateComponent` is special since it's such a unique name and the particular grammar rule, that we take advantage of, isn't well understood.
@m4tthumphrey Do you have a repro case for this? Are you sure you're calling getDOMNode at a time that the node is still in the DOM?
@gaearon Tracking error mesage verbiage as https://github.com/facebook/react/issues/4233.
@m4tthumphrey No worries.
child render
child render
child render
@Peeja If you sign the CLA I can merge this, otherwise I'll just update it myself later today.
**EDIT:** This is really weird, the IE8 workaround should actually _fix_ this it seems, but doesn't for some reason...
I guess the cases here are when nesting elements from different versions inside each other?
@aphillipo I thought we fixed this in 0.14 (https://github.com/facebook/react/pull/3332); is it not displaying a warning?
@aphillipo Part of the problem is react-datatable having `react` as a non-peer dependency (cc @pieterv) which can cause NPM to fetch a separate react installation for just that module.
@Diokuz Can you say what symptom you experienced?
If you're expecting to use experimental syntax, then you can still use it with something like Sweet.js which is ideal for mixing various experimental local DSLs.
I think JSX shows that JS is lacking certain syntactical features and that pure JSON isn't a very readable format for these data structures. Hopefully this will spark some ideas to introduce a new object literal form to JS. Even if that is not based on XML-like syntax.
Macros.
I should've clarified, that I meant within the React community. I'm sure the larger JS community would prefer unification, but they don't have to bare the cost.
Even within the React community, it's those with large code bases that suffer. Not those with a few components or higher level abstractions.
Weird, I thought GitHub only closed issues if you used language like "fixes #NNNN", not if you simply mentioned the issue at all. Sorry about that.
@gaearon, that's supposed to work. Can you post a minimal repro?
Allowing empty children (null, undefined, boolean) was a controversial topic, where we eventually landed on null/boolean/undefined being passed through. That way you could explicitly treat an empty slot as something special. This landed very early on before we really started seeing pattern developing.
@davidgilbertson Super late reply, but "scry" is a fancy word for "find". I'm not sure why we don't just use "find". Maybe to avoid confusion between the plural and singular forms, whose names would otherwise differ only by one "s".
Thank you for your contribution, but these doesn't really make sense to me (our tabs are 2 spaces wide) and the `webdriver` one is definitely incorrect.
cc @yungsters
@zpao ?
Perhaps @zpao @spicyj has some thoughts on this.
@sebmarkbage Do you have an issues with this PR?
- Use an ES6 Map or Set to hold children.
- Use an Immutable-js collection to hold children.
cc @sebmarkbage @zpao @spicyj
@sebmarkbage Does "drop support for Objects" include Maps, or was it just Objects because those are a bad idea?
Also added in suggestions from @syranide
@syranide Objects should be replaced by Maps.
Moar tests
:shipit:
![Thanks, Captain Hindsights](http://i3.ytimg.com/vi/RpwGu8yNTNI/hqdefault.jpg)
<b key={random} ref={} />
@totty90 If your goal is to be compatible with MongoDB, I would recommend that you fork/reimplement this helper for that specific goal. That's not to say it shouldn't be added to this React addon, but AFAIK MongoDB is just an inspiration for this helper, not the goal (as far as I'm aware, it's provided just to kickstart people who are new to React).
@totty90 `React.addons.*` is not part of React, it's just shipped as part of the React bundle for now. The plan is to move them out into separate NPM modules when everything is figured out, [wiki link](https://github.com/facebook/react/wiki/Projects#ship-reactaddons-differently). `React.addons.update` has no React core dependencies.
@petehunt
cc @sebmarkbage
- [x] new terminology (elements, nodes) (#2399)
- [x] `@jsx` changes
- [ ] old methods
Still a pretty interesting suggestion!
@ThomasCrvsr Yeah I'd say so, getting the same ID from two different places is just asking for trouble :)
Devs, what's your take?
@duro That unfortunately won't work in this case because ReactTransitionGroup needs a ref to the element too (so you can't just keep the old one). @syranide's suggestion of creating a wrapper should work though.
cc @spicyj
@zpao But that's how the HTML5 spec defines `dataset` so it's not really "our problem"? :) (Or did the PR to change it to use "hyphenation" get dropped?)
https://groups.google.com/d/msg/reactjs/4jI5xe7TXzQ/3sjSBbpDpEwJ
http://jsfiddle.net/1zebf4cf/2/
@zpao Good first bug?
This is a dupe of #2045, I think.
@lrowe You should be using `dangerouslySetInnerHTML` for setting the content of `style`, additionally, you really _really_ shouldn't update the content after it has been set. Updating `title` is plain just not supported anymore because browsers are really weird when it comes to updating the tags you normally put in `head`.
@zpao Are there more things here or can we close this issue?
@saulshanabrook
@tobia Like I mention in #3591, you can wrap an `input` in your own component of your own which can provide the same functionality (and more). If/when it's dropped React would certainly provide such wrappers out-of-the-box in addons, but it wouldn't really be special or anything you can't already do yourself.
It's not "scary", but "scry", which is a fantasy word that means to search for something:
http://en.wikipedia.org/wiki/Scrying
That looks like a weird fix, what's the actual issue?
https://jsfiddle.net/qe3avvnt/
@gabor It should use `Map` eventually and if the order of keys in objects isn't maintained, then React won't function at all, so there's that :)
That would be very ambigious, `[['Hi', <NameComp />], ...]` does not necessarily mean that they should be treated as pairs.
function throttleAF(fn) {
this.throttledScroll = throttleAF(this.handleScroll)
Ping @cirocosta
Ping @cirocosta
If you want to expose an `onSubmit` for `Child` you'll need to expose it yourself, i.e. call `this.props.onSubmit` at the right time.
@spicyj Interesting, I'm curious how `<a download="download">` would be interpreted...
@syranide This seems good ‚Äì mind rebasing?
Thank you for the fix, @syranide!
@sebmarkbage Rebased.
@totty90 "can" and "should" are two different things. They're not publicly exposed, by reaching into `react/*` you are accessing internal modules, React offers no guarantees.
@QuietOmen you want `<use xlinkHref=` not `<use xlink:href=`
mishoo/uglifyjs2#556
Yes, we double uglify to remove dead requires from the tree (see #1933).
@ledowong No, we don't generally do point releases except for the newest minor release except in the case of a security vulnerability. You can patch in the change locally and make your own build of 0.12 if you're unable to upgrade to 0.13.
@slorber React cannot use the prototype as it auto-binds all methods, this will eventually (in 0.13 it seems) be a non-issue as you will then provide classes to React. React will no longer require the use of `React.createClass` (or not even have it in core, I'm not sure).
cc @zpao @spicyj
cc @sebmarkbage
cc @petehunt
While it doesn't discredit your idea, you've overlooked the mathematical notion of inclusive/exclusive which should be somewhat important. Also, don't use strings when numbers work just fine and would be by far preferable.
PS. But yes, sebmarkbage or whoever certainly has final say in this :)
Dupe of #1225, more or less.
Here's a mixin to prevent this =)
grunt test
**Reviewers:** jwalke zpao sema
**CC:** tomocchino
(@SanderSpies @andreypopp)
@freiksenet What you're asking for should still be to return multiple components. If you genuinely don't want them to be mounted into the DOM then you're using React components too much like OOP, which is not a good idea. React is only concerned with "views".
cc @zpao @yungsters
cc @salier
There is such a diagram. @zpao
here? Or maybe even a tip, lol
cc @sebmarkbage in case he has anything to add / wants to reopen / think about things
var Ctor = this(model);
Kind of related #2094
@spicyj, you know what's up.
We should write test for four different target audiences:
We need to figure out what format to use for all these benchmarks and how easy they are to incorporate into the engines' benchmark suites.
cc @jeffmo @sebmarkbage
That's a good point. I still want to be noisy so this seems like a fine compromise. You fine with that @spicyj?
@imcotton Oh that's interesting. We haven't really done anything with log levels (but we've talked about it). Definitely might be worth exploring in JSXTransformer first before we do anything in React...
Perhaps "don't like" would be more appropriate.
I don't agree that we're changing basic meaning of operators, `abc{...}def` is something entirely JSX-specific and the meaning of what's inside is ours to define, just like functions. `f(a, b)` is not a `SequenceExpression` and I don't see why `{a, b}` **can't** work the same way (not that it has to).
cc @zpao @spicyj @yungsters
@lojjic There are other properties you can set on a DOM node that we don't expose. Proper setting of `scroll*` should be done directly on the node (the getting out of sync is a very good reason).
@radubrehar
Do you foresee trouble upgrading at KA?
Ping @sebmarkbage #1988 (no rush from my side, just a reminder)
@syranide you mentioned #1988 here but I don't think we should take it in the branch. Did you want it there or just reminding @sebmarkbage in as many places as possible?
@zpao Just a reminder, push ahead :)
Unlikely that anyone would ever bump into this, but it is super-weird if you would and it's pretty much for free so why not.
cc @yungsters
Perhaps we should introduce an `THROWS_IN_OLDIE` which we can apply to some of the less common properties which offends old IEs when given a non-supported value, which would simply do the assignment inside a try-catch.
@yungsters
@yungsters Pinging here as well :)
`dangerousInnerHTML`, `unsafeInnerHTML`, (`disasterousInnerHTML` :)) or something else? (I prefer the sound of `dangerous`)
It also makes sense to add a `dangerousDefaultInnerHTML` (`default` is the word we use elsewhere) which could be very useful for content-editables to avoid "hacks", etc.
cc @sebmarkbage @zpao
`dangerous`! _bikesheds_
@spicyj :+1: (I guess `dangerous` still alludes to it expecting a special wrapped value though)
@zpao I agree that we shouldn't let IE6/IE7 hold us back, but having at least basic compatibility seems like it could be a nice feature, especially given that the necessary changes are small.
@spicyj - I wish `Element.prototype.querySelectorAll` was globally shimmable in old IE. Unfortunately IE7 and below don't expose these prototypes. Libraries like MooTools and Prototype worked around it by wrapping the native DOM elements in a wrapper object whenever you used the `$` function to grab an element, but that ends up being pretty difficult to do correctly. I attempted the same thing myself a few years ago.
IIRC @syranide has a few comments on this
@chenglou Hehe.
I had a brief chat about it with chenglou a little while ago, I don't really lean one way or the other at the moment. I see a lot of hidden dangers in allowing a composite components to return multiple components and it breaks a lot of intuitive assumptions, but I don't know of any (right now) good practice use-cases that would obviously benefit from this.
OR
@gabssnake You should have gotten a JSX compile error with the error "Adjacent XJS elements must be wrapped in an enclosing tag"; did you not see the error or was it not clear in its explanation?
@gaearon You can do that already though, you just need to return an array for now (which is a bit cumbersome though yes) ... buuuuut, you can work around that, I have hacked my own `<Frag>` component which is translated to an array (overloaded `React.render`) ... you could also do `return <NoopComp>...</NoopComp>.props.children` I assume, if you want to avoid hacks.
**EDIT:** My bad, I overloaded `React.createElement` not `React.render`.
@gaearon Yeah you can avoid the commas using either of my two workarounds for now (if you find either acceptable)... but what you do mean with explicit keys?
@gaearon Ah yes, I choose to just mentally ignore that warning for now :), if you really want to to avoid it, you can do `<MyComp children={this.renderWhatever()} />` to avoid it (**EDIT:** although you obviously can't use that if you have adjacent children, you could use some flattening helper... but yeah).
> @syranide but every time one of the components changes all of its siblings need recalculating...
That is irrelevant and this is not a problem with JSX. A big issue is that you lose the technical, practical and intuitive assumption of **one component = one element/node**. I can't speak for the devs but I would not give up that willingly, it's a very useful assumption to have. I'm sure there are equally good or better optimizations that could be designed if optimization is the only the reason people want this.
@thomasboyt
Looking at that it makes no sense, where is the 3rd cell coming from? Perhaps it's actually wrong and it's rendering 2 or 4 cells, who knows, perhaps it's actually dynamic and depends on a prop or external state? There are many of variations of this problem which only get harier when you consider other non-HTMLDOM frontends which may have explicit expectations. Another thing to consider is that elements are opaque, so if you replace `<tr />` with `<MyMagicalTr />` then it is not able to interact with the individual cells or even deduce how many there are, so even though `<MyMagicalTr />` may only accepts `<MyMagicalTd />`'s there is no guarantee it can actually interact with them.
@landabaso
@whatknight That won't work except in cases that `return renderABunchOfComponents();` already works.
Are you asking for the parent or the owner? In the case of passing components around, these are different. Consider:
// B:
C's owner is A but it's mounted into a div (and that div's "parent" is B, I suppose).
Thanks ‚Äì closing as a dupe of #1301.
Seems like a good move. cc @yungsters
But again, I'm not exactly sure what contexts are meant to solve so I could be way way of the mark here.
@insin @gaearon  Master currently only warns if the contexts differ, but uses the old notion of context.  To change over to use parent contexts should be a two line change, but we wanted to maintain the old behavior with warnings for a period of time until we're ready to pull the trigger on a switch.
@brigand  Yes, singletons are not without their drawbacks.  Thus the motivation to pass flux stores as context variables => thus our desire to implement context variables.
Ohai this is an old issue. We ended up fixing this and we use keys in the tutorial now.
Perhaps a dupe of #1931.
http://jsfiddle.net/deadlyicon/kb3gN/4984/
http://jsfiddle.net/deadlyicon/kb3gN/4985/
http://jsfiddle.net/deadlyicon/kb3gN/4986/
http://jsfiddle.net/deadlyicon/kb3gN/4982/
Weird right?
@taarimalta This was a bug in the RCs; will be fixed in 15 final when it comes out this week.
@keyvanfatehi Close developer tools and open it again when React is available, it seems to only check for React when you open developer tools.
@contra Hmm? Which ones. The only ones I know of are `scrollLeft` and `scrollTop` and no one seems to think they should be there. Nor do I see why we should add more when the ones we have are broken and shouldn't be used.
@contra Ambigious behavior is best handled by community components, put audio/video in a component of your own and you're free to do what you want with the properties. Anything React could do that you can too.
@contra Be sure that you understand the current limitations of audio/video/etc in React: #870 (just so you don't go on ahead and face unexpected issues)
@contra If it or its (parents too!) siblings move/reorder the audio/video will stop playing, if that isn't a problem for you then great. :)
@misuba You're not using an IE8-hostile minifier (or options)? I know UglifyJS has a quite a few fixes for dealing with IE8 issues.
The original error as reported by @howtomakeaturn is because of a lack of polyfills (the error is actually pointing at the `Array.isArray` call in the invariant). I can repro that easily and the fix is simple.
@misuba I'm not sure what's up with your case. I assume you're hitting this while actually running code, not just loading the file. I made a test case using our invariant module and it works for the cases I could think of. Could you create a minimal repro with React or maybe output the value of `format` so we can see if we perhaps used invariant incorrectly.
@misuba though if you're using our minified build, we shouldn't even hit that line of code because `format` is undefined.
@misuba Any update? On the surface it seems to be a problem with your build process and not a flaw with React.
@zpao Just floating it again as it's kind of related, is it imaginable to add something like:
See http://jsbin.com/daxep/1
Kind of related #2073
But my curiosity lies in that my "proposed" change makes inconsistent/broken behavior less likely to occur as only listening to `mount` is a special-case, rather than the other way around:
// suboptimal (but not necessarily broken)
// inconsistent / broken
(Kind of related #1912)
http://inimino.org/~inimino/blog/javascript_semicolons is probably a good thing to read.
In the case of `return`s, a semi colon is inserted at the end of the line, so
actually returns `undefined`, and then 4 is never reached. But this
@crm416 I agree that the parens in ReactMountDestruction-test look unnecessary.
http://jsfiddle.net/haa2euy9/1/
@crm416 yeah it is tricky, here's how react made nested root event propagation work correctly: https://github.com/facebook/react/blob/master/src/browser/ui/ReactEventListener.js#L69
@piranha It also means you have to support touchevents for all components, you cannot fallback in places you don't care.
It sounds like there may have been a bad merge there:
Pulling from your test, let's pretend FancyComponent exists. It's sole purpose is to be a specialty version of Component. Ignore the fact the this composition here doesn't really make any sense.
var FancyComponent = React.createClass({
// do something with color maybe
This is going to warn me - `'Warning: Prop 'type' was not expected in 'FancyComponent'.'`, but it's actually a totally valid and encouraged use. I mentioned this in https://github.com/facebook/react/issues/1587#issuecomment-43940474
`{...myObject}` implies cloning (to an empty object), AFAIK, and is not strictly a React issue.
@chenglou On another note, I'm curious, would it be imagineable to turn propTypes into an addon/mixin instead? I'm guessing it couldn't use `componentWillMount` as `getDefaultProps` would already have been added, perhaps if we expose another life-cycle method? It's not a core React feature and I'm sure a significant fraction don't use it, or have varying preferences.
From my understanding that seems counter-intuitive, isn't props what Objects are intended for? A rather static set of keys, used over and over... whereas Maps are for dynamic lookups?
Should fix #972. cc @philix @thomasboyt - Looks like you can stop shipping a modified JSXTransformer (or whatever we end up calling this by the time 0.12 happens - cf #1966)
cc @spicyj
@spicyj @zpao @nathansobo
@nathansobo what else do you need for react atom to get faster?
@nathansobo this is kind of a big change and it's not set in stone. And frankly I'm not even sure how much this helps.
@chenglou It seems to me that it is a critical step towards playing nice with other frameworks and instances.
cc @yungsters @salier @joshduck
PS. Also submitted #2328 for tracking any info on the weird IE8 comment.
(Dupe of #554.)
@madebyherzblut https://gist.github.com/syranide/07c6897c005fa9bc70e4
@nathansobo will that help your event perf issues a bit? I'm not familiar with atom's plugin infrastructure, But this'll help if you have `<Editor/><Plugin1/>` (two `renderComponent`s). Doesn't help if you have `<Editor><Plugin1/></Editor>` though, but I have some ideas to optimize events a bit more.
@spicyj
@nathansobo Can you clarify what you mean, "without requiring the use of the shadow DOM"? I'm a bit uninformed about how HTML custom elements work right now.
@sebmarkbage ^
* Special case getDefaultProps which should move into statics but requires
<h2 ref="header">elephant</h2>
<p>zebra zebra zebra zebra</p>
@anatolikurtsevich Sorry, I was a bit unclear perhaps, what I meant was that this goes one step in that direction (in my opinion), inheritance is another and there are plenty of other requests for similar features. I don't know how the devs feel, but I feel as if `React.createClass` is a bit of an abomination, React shouldn't concern itself with how classes are created, it's a very grey and complex area and subject to much debate (especially as ES6 classes will be around some day).
The React mixin-behavior with the magic `DEFINE_MANY` flags is nice, but it's also very very weird. If this is not something that is a traditional (mixin) pattern, then perhaps the solution is not to have `DEFINE_MANY` at all, but to e.g. have `addLifeCycleListener` which mixins would be free to call during initialization. Mixins could be applied as a call from the constructor to `MixinX.constructor.call(this)` rather than `Mixins: [MixinX]`.
@syranide Is it really invalid? I often write something like
@spicyj That's why I added "in the style object" :). `border` is an alias/shorthand for all the other properties, you cannot set both and then unset only one of them. However, that being said, supporting this is not bad in itself (it's the most intuitive solution to ambiguity), although I would be careful to compare it to CSS as there you can do:
cc @syranide our resident event export these days
@leoasis That sounds like something you could/should solve with `onMouseEnter` and `onMouseLeave`. There's generally no reason to use the reported nodes in an event for React. That being said it should still be fixed.
@leoasis So `onFocus` and `onBlur` then? Or whichever event fits your use-case. It's your choice obviously, but I'm quite certain that your solution has a React-only solution.
@leoasis `event.stopPropagation()` I think?
`withContext` is still unofficial and there are varying opinions on its legitimacy I believe.
~~I'm curious why there is a `constructAndRenderComponentByID`, it doesn't sound like something that needs to be exposed (especially with that unintuitive name).~~
@syranide It would, except by doing it at descriptor creation time you get a call stack that includes the actual render method.
isn't quite right, although
cc @zpao @spicyj
// transformed becomes
Well the prop types will warn‚Ä¶
@spicyj Right, but it won't throw... and especially not there.
Yea, that comment is wrong too, feel free to update @syranide :P
@zpao
cc @pamelafox
Maaybe.
forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using
(That error message is for nested `form`, which is invalid)
Thanks! Sorry this was so tricky.
Sorry this is so confusing, but you should actually send a PR to the master branch (or else it'll be lost when we make the next release).
cc @benjamn - sounds like a commoner problem.
Kind of related to #1978 (concerns polyfills)
> Blabla
Another argument for binding event handlers to mount roots perhaps, @chenglou ?
Thanks, this is a dupe of #1691.
Notable changes:
Test Plan: jest
say what?
@nathansobo I'm curious whether it is the simulated dispatcher (i.e, capturing, bubbling, etc) or the initialization of the synthetic event that is most costly for you.
I assume it is the simulated dispatcher, which currently does a lot of ugly string hacking to do its thing (chenglou is working on that I believe). While the `SyntheticKeyboardEvent` has a lot of polyfills, they're all very simple and I don't imagine that they're the issue (but perhaps they are... because browsers).
@nathansobo Ah, that explains it. Yeah, `React.DOM.input` (overloaded by `ReactDOMInput`) always attaches an `onChange` handler (does not behave like HTML `onchange`), which is implemented by `ChangeEventPlugin` and listens to quite a number of events. If you're using controlled inputs it's obviously required, but it seems like it should be possible to discard it for uncontrolled inputs, but I'm not 100% sure without further examination of the code.
@nathansobo If you're stopping propagation of `textinput` and `keydown` then you have not removed controlled inputs, you've broken them instead. (**EDIT: Or perhaps that's not true now that I read it again, as it seems you're preventing the events further up the tree**) You can very easily reimplement controlled inputs with the raw input component, if that's something you want to expose for users (but don't want to replace the synthetic event system entirely)... so no real harm done.
cc @syranide @salier
@talgiat Fix is in master (only enter is affected and only FF).
@zpao :+1: (although it does not _necessarily_ mean that we don't have to care about whitespace).
This is incorrect. When componentDidMount is called, React has attached ("mounted") the elements returned from render into the document.
@sebmarkbage
@nathansobo Atom plugins was what prompted this issue. :) We're not going to support using multiple versions of React seamlessly together in the near term, though it's possible it'll work in the far future. Until then, your best approach may be to have plugins populate iframes with plugin contents so that the scripts run in an isolated window.
Shimming is probably not going to be a viable strategy unless you're referring to maintaining a separate branch, but even that could probably turn into a major headache with some changes to come.
@nathansobo One possibility is to maintain separate Atom-branches of all major React releases, which _does_ play well with multiple versions, it should generally not be _that_ complex I think. It would probably be the more realistic approach, if any, I think. Although targeting different JSX versions is an interesting problem if that applies to you.
@nathansobo Multiple numeric versions of React, or any library for that matter. If I'm not mistaken, there are only two parts of React DOM that currently prevents this, the event system and DOM reactids.
@nathansobo Fire away :)
We'll most probably leverage npm for this rather than reinventing the wheel. For this to happen, we also need an asset bundling solution (css, images). This is an unsolved problem afaik. @petehunt
The use of `component` is an excellent reminder for the (less common) magic methods, it makes them stand out as you would never include `component` in the naming of your own methods. I instinctively assume that there's a getInitialState/render/etc in every component (and you always put them at the top/bottom)... but willMount could be "easy" to miss and has no obvious place (I always put them top though).
It's always relative, but when it's unfamiliar code, I would prefer if the author spent another second and wrote `component` rather than having to carefully scan all methods to make sure I didn't overlook anything (also, an official JSX style-guide would be awesome... @zpao :)).
But that's just my opinion :)
We definitely spent a lot of time considering this (and I personally was in favor of it) however the general consensus at the end of the day was that the verbosity is worth it here.
@RReverser if you're really interested in doing this, I don't mind. I think this is _slightly_ more practical than #1995, but it still could encourage the wrong behavior. What do you think?
@oriSomething React require identical markup to reuse server-render nodes, but that is not what this PR addresses, this is just about an edge-case some people have gotten confused by.
@spicyj  :)
@spicyj Added.
cc @zpao
@theporchrat Mixins are not magical in themselves, but mixins and classes are currently implemented by React, which really shouldn't concern itself with that. The proposal you commented in effectively removes React's custom magic for classes/mixins and relies only on ECMAScript proposals instead, which seems favorable. Then you're free to use as much DI as you want (given that it's technically possible, which I think it is?), React has no say in the matter.
e.g. `React.addons.classSet`: blabla
![image](https://cloud.githubusercontent.com/assets/6820/3631177/af021294-0eb3-11e4-8b4a-d334cef48dea.png)
If your BAC is
I created #1991 because the current situation seems illogical to me. Perhaps we can get some better clarity there.
Oh, setState() is probably going through ReactUpdates which is using the (browser-specific as of 0.11) ReactReconcileTransaction I think.
@gasl maybe? why are you doing that vs `getInitialState()`?
@crm416 Well no, my point is that you do _not_ want to look at the container pointed to by the argument, but only its children. If it doesn't have a React-node then everything is good, if there's a React node there then it must be a root node or it's an error.
@jardakotesovec #2362
@petehunt can we close this now?
@spicyj Yeah, I would expect notifications to flow from children to parents, once _all_ affected instances have been notified they're all unmounted in some unspecified/undefined way.
Please don't use GH issues for debugging. If you find a bug with React behavior or implementation, then reopen. Stack overflow, the mailing list, or IRC are all great places to get help with a specific integration point or questions about your specific use.
Or perhaps it shouldn't because because http://www.w3.org/html/wg/drafts/srcset/w3c-srcset/#additions-to-the-img-element says it's a `DOMString`, which is kind of weird? It would seem intuitive to treat it like a `Set`.
@syranide Keep those ideas in the discussions they belong, otherwise they get lost :)
@petehunt Hmm, that actually sounds interesting. From which life cycle method would you call this? It seems like it must happen after `shouldComponentUpdate`, but there is no such life cycle method right? Do we need a new one, `componentWillNotUpdate`? :)
<Animated ref="ani" left={this.state.left} />
@azich has some ideas around this.
Invalid prop `0` ...
Yo @petehunt where's this change?
I left some comments on that diff but @petehunt's too busy all the time! =)
@brigand possible but that might require an API change? I'm not sure whether it's worth it at this point
Since people have been coming in from Reddit‚Ä¶ PropTypes are not being removed anytime soon.
Which I assume actually works today (but perhaps not, due to JSX intricasies)? Not that I would ever want to use that syntax. Anyway, by closing it as `{//}` you're suggesting that what comes after the comment actually is JSX again, to me. The closing `}` is actually part of the comment as well (but still affects the parser) which seems like an odd feature.
Side-stepping, intuitively, it seems kind of weird that this is valid:
@nhunzaker ... @zpao or some other dev should weigh in on this.
cc @yungsters
@slorber Not disagreeing with your idea, but it's generally preferable to set it to `undefined` rather than delete it (as per how V8 handles objects).
@spicyj Huh? Yes they add additional run-time functionality (i.e. controlled), but the initial state of them all is entirely captured by attributes right? Or am I missing something.
@volkanunsal Delaying focus() until the next requestAnimationFrame/setTimeout is probably your safest bet. It seems that even though elements have finished rendering and are attached to the DOM, that is not a guarantee for focus() succeeding.
@zpao From what little I understand of the new ref-system, it seems that this specific issue would no longer be a problem, although reusing the same the ref-object would result in a similar issue unless already considered (although with a different fix than this one I assume).
I think we should error in the first place (though perhaps that will be expensive?)
- [x] @gasi - I consolidated your entries (changed email address in AUTHORS) - let me know if you want a different one listed.
- [x] @irae - Ditto
- [x] @volkanunsal - Ditto
@remixz @volkanunsal Done & done.
cc @zpao
@sebmarkbage
@sebmarkbage
E.g. this should work in a mixin:
- [x] PRs for CDNs
- [x] Update todomvc-flux example
@sebmarkbage this is no longer valid, right?
cc @sebmarkbage
@Tvaroh No, it will not be in 0.11. It might be in 0.12 or it might not be. I haven't even tested to see if this fixes the rAF batching problem. rAF batching is not ready for use in production.
@Tvaroh Sorry, I see. Controlled components won't work as-is for you as they assume you'll update the state value immediately. My best suggestion is to make your own wrapper around `<input/>` like Om does.
@sebmarkbage I imagine if that's the case...
false,
1. Anticipated incorrect argument types
3. Anticipated incorrect argument values
4. Incorrect argument values
@zpao @sebmarkbage Ping :)
<TimeAgo timestamp={this.props.timestamp}/>
@chenglou No, the logic is inverted.
@anatomic That's not React's responsibility, it's your job to chunk appropriately and defer rendering until all necessary chunks has been loaded. To put it differently, if one of your components has a dependency on some external library, it's obviously your problem to satisify before trying to use it, React couldn't do it even if it tried, so the same applies across the board.
@zpao If that invariant fails, you can't use mixins with functions that merge their outputs.
@syranide When I tested last week I couldn't get the source map to do anything at all in Firefox.
@syranide Good idea, I changed to doing that :)
need to adjust here accordingly.
@varungupta85 Try upgrading to React 14.0 and see if you're still running into the issue.  If you are, please open a new bug with a simple testcase/jsfiddle that demonstrates the issue.
@varungupta85 Ok, perfect, thanks!
cc @yungsters as well who did a lot of our wrapper component work
@syranide another directive could make sense if we get scoped properties in there since this is only true for <textarea> but not for other inputs. But until then...
@jeffmo, where you at? I'm inclined to say "no" and maybe it can be better in a recast world.
cc/ @zpao
See http://jsfiddle.net/Bobris/ZZtXn/2/ (try typing at the beginning of the text box).
var transform = require('jstransform').transform;
"esprima-fb": "~3001.1.0-dev-harmony-fb",
"jstransform": "~3.0.0"
var ListenToMixin = {
mixins: [ListenToMixin],
An idea is to update our JSX transform that already adds displayName to also output this crazy pattern, but that makes the stack trace look better
http://jsfiddle.net/EzY3z/5/
There are now solutions to this that doesn't require leaving JSX and I'm confident this is not something we want to support. cc @zpao @sebmarkbage
Yeah, sorry about this ‚Äì dupe of #1398.
@sebmarkbage @spicyj
@spicyj etc. Perhaps I'm misunderstanding the issue, but as far as React is concerned, this seems "by design" to me (not to say there aren't ways to work around it in user-land though).
@gasi It needs to get landed internally at FB too, so some FB employee (maybe @chenglou) will pull it in and then merge it here as well.
@AnSavvides If you ask me the doc is really confusing and cluttered :)
@sebmarkbage
// undefined
@mathieumg An optional boolean can have an explicit default prop. Makes it a little bit easier to reason about the actual value if it's only true/false.
However the main issue is that this resolves differently for `undefined` and `null`:
var { childOrUndefined = <Foo /> } = this.props;
@zpao Landed in 0.12RC, close?
It appears the checksum is random too. Reopening.
Port: 1337
<meta charset="utf-8" data-reactid=".vtzzi7pgqo.0.0">
<script data-reactid=".vtzzi7pgqo.0.5.0" src="/build.js"></script>
<head data-reactid=".1v4ncdwtkao.0">
<meta charset="utf-8" data-reactid=".1v4ncdwtkao.0.0">
<meta content="IE=edge" data-reactid=".1v4ncdwtkao.0.1">
<title data-reactid=".1v4ncdwtkao.0.2">Versity</title>
".1v4ncdwtkao.0.3" name="viewport">
<base data-reactid=".1v4ncdwtkao.0.4" href="http://assets.site.dev:1337">
<script data-reactid=".1v4ncdwtkao.0.4.0" src="/react.js"></script>
<script data-reactid=".1v4ncdwtkao.0.4.1" src="/build.js"></script>
<head data-reactid=".1v4ncdwtkao.0">
<meta charset="utf-8" data-reactid=".1v4ncdwtkao.0.0">
<meta content="IE=edge" data-reactid=".1v4ncdwtkao.0.1">
<title data-reactid=".1v4ncdwtkao.0.2">Versity</title>
".1v4ncdwtkao.0.3" name="viewport">
<base data-reactid=".1v4ncdwtkao.0.4" href="http://assets.site.dev:1337">
<script data-reactid=".1v4ncdwtkao.0.4.0" src="/react.js"></script>
<script data-reactid=".1v4ncdwtkao.0.4.1" src="/build.js"></script>
@syranide What version of react were you using? Also: what string were you using? I want to see if I can make your version run here.
@klimashkin The XXX-part is the key as provided by You, it seems you have an inconsistency on your side (`.$` indicates a key).
@syranide It's only set in the destructor which isn't called if .persist() is. I've intentionally created the property even in prod; we try hard to avoid any observable behavioral differences between dev and prod and you could perhaps loop through the properties of an event and somehow get confused.
:thumbsup: Anything you want to change about it @yungsters?
Reverted in 92d2dcc.
@spicyj Imagineable (and interesting!) and I'm not arguing for there being a lot of practical merit to my idea, but I imagine that for your scenario, spawning an additional "non-pooled" event is a non-issue, unless that is true for other events too.
@jeffkole Be careful when doing that ‚Äì React will still call setAttribute (not setAttributeNS) if the attribute changes, and the update probably won't work properly.
Interestingly, I‚Äôm not sure whether the _tag_ whitelist is relevant anymore. So far I have been able to use `<marker>`, `<textPath>`, `<feGaussianBlur>` and other tags requested in this issue and in linked PRs without trouble on master. I see that [`fbjs` still maintains an SVG tag whitelist](https://github.com/facebook/fbjs/blob/89ffda59d923183dd34efb2622da0176ccb04d41/src/core/getMarkupWrap.js#L61-L83) and I don‚Äôt know the codebase well enough to say why tags missing from it worked for me today, so hopefully @zpao or @spicyj can clarify this, and whether we need to also add the missing tags there, to complement #6243.
@shilpan
@matthewwithanm I might be misunderstanding what you're saying, but React will reuse the component instance (doing an update instead of unmount/remount) as long as the props match, regardless of if the actual descriptor object is reused.
@petehunt
**re: hyphenated styles**
I agree that we should only support 1 way. And currently that's camelCase. We should stick with that and warn (#1662).
@syranide I'm not sure what value that would give over just writing the strings verbatim?
http://jsbin.com/xipeduxu/1/edit
cc @zgotsch
http://jsbin.com/roparato/1/
@ToucheSir The main purpose of keyMirror is to deal with the fact that Closure Compiler advanced mode crushes keys, which allows you to write code like
keyMirror({monkey: null, gorilla: null})
@jordwalke and what happens when they do? what if we release a component that depends on a version of `merge()` that conflicts with another component used in the app? Even worse, what if the module were stateful?
@akre54 Can you be more specific about what doesn't work with webpack?
https://github.com/akre54/es6-react-webpack-bower-backbone (try the coffee
> @akre54 https://github.com/akre54 Can you be more specific about what
@akre54 The UMD wrapper is provided by browserify; we don't do anything special there.
(Thanks @ryanseddon for reporting.)
_(FYI, immutable-js and Clojure uses `['path', 'to', 'child']`, which is imo a way saner way of approaching this.)_
That being said, I agree with @spicyj. Yes, the ordering is arbitrary right now, but you probably shouldn't rely on it the same way you can't do `{$push: [1], $push: [2]}`, if you know what I mean.
@yungsters @petehunt @sebmarkbage
Pooled descriptors is indeed something we want to introduce to avoid thrash in extreme cases where updates happen on every mouse or
touch move. We need to be able to operate well in edge cases too.
> I understand your point, but from my perspective I've seen a handful of people get confused by it on IRC (which indicates that it's at least unintuitive behavior):
@syranide Descriptors can be reused in the same owner subtree which created it. E.g.
cc @yungsters
I feel like this is a special case of a more general "top level" event problem.
I would have said it's clearer to take it out of RESERVED_SPEC_KEYS but then you still need to special-case skipping it in the loop, so I think it's fine as you have it.
LGTM
@chenglou feel free to fix :wink:
@zpao @yungsters If you agree with the refactoring/corrections done by this PR, a stopgap solution is that I reintroduce all the current rules and you can merge it as-is. If/when your security team clears the reduced set of rules, then we just reduce the rules in the escapers. Thoughts?
@yungsters for review (though he's out so I might need to reping him in 2 weeks)
ping @yungsters, this PR is currently limited to only "splitting escapeTextForBrowser into escapeTextContentForBrowser and quoteAttributeValueForBrowser" for making the code arguably neater and also fixing some related "mistakes" (like escaping attribute names). Any objections?
@yungsters Sorry about the indentation, was caused by the rebase and I missed it, fixed. Which extraneous changes are you referring to, removal of `processAttributeNameAndPrefix`? I agree that it might make sense to put it in its own PR (but I kind of also think it makes sense to include it as it's affected, w/e :)), but are there any others?
@yungsters I removed all "extraneous changes" that I could find, give me thumbs up and I'll merge this in and put up a separate PR for those changes/fixes.
Dupe of #2461.
Not sure what the deal with that is -- if you run into more problems, please report back.
cc @zpao @yungsters @sebmarkbage @syranide
var Mixin = {
mixins: [Mixin],
console.log('CompA');
mixins: [Mixin],
"Mixin"
"CompA"
"CompB"
"Mixin"
Doing mixins first is more intuitive to me because that's normally how people write the specs (in my experience, at least).
@gaearon Go for it! Let me know if you have any questions; I'm happy to help.
It's a bit tricky because of transferPropsTo (or whatever we do instead) where you might have props that need to be passed on even if you don't consume them.
@syranide that's a tangential discussion but ultimately we skip propType checks in prod (they are slow to perform on every update). So we can't use invariant and have different runtime behavior in dev vs prod.
@slorber Since the set of props aren't necessarily very static at all it can't be resolved at compile-time, especially not if you consider that it must also verify the type of each prop.
@petehunt
The spacing here looks a little wonky.
`dx` and `dy` were added in #1306.
Oh man =D
@gaearon There's a PR (can't find it) for adding internal parent references which is necessary for the event system to work without `data-reactid` and there is one or two bugs in React which conflicts (but they can be workaround if they are willing). There is one alternative method that can be implemented without parent references, but... they expressed a desire to extensively benchmark and compare the various approaches before moving ahead.
@syranide
I think the `:` in there isn't legal though
How do old IEs behave?
cc @paulshen @yungsters
@syranide `tick` is executed in the onreadystatechange callback.
@nhunzaker Thanks!
2. Since it's camelCased we'll need the extra map in DOMAttributeNames as well.
Closing as a dupe of #1326.
styles and force camelCase.
cc @yungsters
Thanks -- closing as a dupe of #1376.
@benjamn @sebmarkbage opinions?
@sebmarkbage Let me know if this is crazy. Currently if you have two copies of React and do:
(Someone ran into this today when trying out Jest and I've seen it a couple times in the past with tests too.)
cc @azich
And yes @syranide, _technically_ we should have been `text/x-jsx` but ugh :)
cc @salier
Not exactly sure what @sebmarkbage is referring to, but I imagine we would want to use `requestAnimationFrame` (or vendor prefixed) when available to make it instantaneous.
`dangerousInnerHTML={__html: ""}`
@RReverser Sure, we can count/cut/etc, but that seems super fragile and just decoding in JSX seems like the logical choice.
Quite a while since I last looked/touched that code, but IIRC there's quite a number of things about attributes that are kind of weird. But no, attributes values definitely shouldn't be trimmed, perhaps it's a multi-line thing? (JSX attribute strings can be multiline I think ... which is really weird)
Yeah I think only checking for undefined makes the most sense here.
We know the ones that have boolean/numeric values and I think those come out of the DOM correctly so I would guess that we should be able to take advantage of that knowledge.
@syranide, can you rebase? Based on @sebmarkbage adding that tag, I guess he's ready for this.
@zpao Will do, tomorrow.
@zpao Rebased. **However!**
I agree with (I think) what Ben is getting at - this adds another dimension of complexity that would be great if we could avoid. Having `MUST_USE_PROPERTY` mean that it must also be deleted makes a lot of sense.
You didn't? cc @vjeux ‚Äì not sure what happened here.
@spicyj 1-2 months ago or something perhaps, certainly not today.
Ping @syranide; would love to get this in!
Native/uncontrolled components behave like that, so I'm not sure if any complaint could really be considered legitimate anyway?
> Native/uncontrolled components behave like that,
As you can tell, I still don't quite understand what's going on here but it's open source so I'll just write something random in a PR.
I think @spicyj made a particularly strong statement here:
I may have misunderstood your intentions, removing the concept of property vs attribute seems just fine to me (but I can't speak for any cons, many of pros though!).
@syranide Looks like there is a merge conflict.
Once we're rebased, who's court is the ball in?  @syranide anything remaining on your end?  @spicyj?
@syranide Ok, cool, I just wanted to make sure the ball wasn't in our court.  Just let us know when you're ready/comfortable with it :).  Hope you get well soon!
@syranide The sooner we get this PR into a mergable state, the fewer conflicts/etc.  :)
cc @syranide
Ping
http://jsbin.com/ditulapo/1/edit
+1 andreypopp
@syranide diff created, although I can't repro this. I also vaguely remember being able to repro it, weird...
Closing, but @gaearon if you can repro let me know.
Can you provide a jsfiddle/jsbin example of what you mean?
Since @petehunt forgot his manners... thanks!
http://jsfiddle.net/9RrAN/2/
@petehunt
@pluma. It's needed when other modules browserify themselves. While not `required` itself, that would technically fall under peer dependency.
@jasonslyvia TestUtils is intended for internal testing, and is therefore internal API.  We recommend that you do not call into internal APIs (especially in production) as they are not supported/stable/optimized/etc.  We are not going to publish builds that expose internal API, but nothing stops you from checking out the code and building it yourself with any changes/modules.
I tested that your koa example is transformed with an `npm link`ed fb-esprima
cc @sebmarkbage @zpao @yungsters
@EtaiG Sorry for the delay. If the change is simple, we can take it without tests and if it's complex, maybe I can write some. Do you want to post a PR with your code as it is now?
@syranide is correct, though unfortunately, even if you use `dangerouslySetInnerHTML`, you'll pretty much need to cede control of the contenteditable to the browser. Even flushing an updated markup string back through would surely break the selection state, which would make the contenteditable unusable anyway.
@spicyj what do you have in mind for support? There may be some approaches I haven't thought of.
hypothetical style name `b&ckground` would become `b&amp;amp;ckground`).
cc @yungsters - I think this is a fine move but wouldn't mind another set of eyes from somebody who has seen a few crazy things.
@yungsters That's already made in #1599.
Yeah it was appDescriptor at the beginning but that sounded too technical lol, alright I'll change it.
Oh man, just discovered this issue. Want.
@tomocchino and I have talked about doing something like this ever since `SyntheticEvent` was introduced.
@yungsters @zpao How do you feel about this?
@ezequiel Ah good to know.
Addons I'd say!
aria-\* and data-\* should be deprecated soon. Right now it's a warning.
lol
@syranide Not quite sure what you mean about shouldIgnoreValue, sorry?
(Does jest help here?)
Thanks for starting the discussion @nathansobo. There is a mapping somewhere but before we go down that road, let's make sure we want to do it that way.
@zpao we should probably try to solve this so @nathansobo doesn't need to fork. I wonder if we can create a customized `React.DOM.textarea` that blacklists itself from `ReactInputSelection` (I don't understand this stuff that well so I may be off base here).
We may also be able to special case properties when they are on certain nodes, maybe for the default values or for the way we handle the setting (attribute vs property).
I'm guessing this is a dupe of #1169 -- can you try adding `React.initializeTouchEvents(true);` before rendering anything to confirm that this is the case?
@jkimbo's right. For before props change, see [componentWillReceiveProps](http://facebook.github.io/react/docs/component-specs.html#updating-componentwillreceiveprops). Closing this! =)
I like that you're living on the edge @steadicat :thumbsup:
lol
@sebmarkbage
Had this idea in the shower half an hour ago, let me know if I'm crazy.
http://jsbin.com/racecimo/1/edit
Curious, thank you.
I just ran into this issue, it was indeed caused by invalid nesting, e.g.
Some love for #1987 perhaps :)
@macqm Do you have any repro I could look at? I'm assuming it's the external library that is mucking with the DOM. PS. Nesting divs is fine, p is not, same with div inside p, etc.
http://jsbin.com/javekise/1/edit
cc @jacktoole1
this.setState({monkeys: true}, function() {
// maybe I didn't actually want the monkeys...
Internal diff uncreated, lol.
@zoomclub You can always attach listeners yourself using `addEventListener` inside `componentDidMount`. The synthetic event system does not understand non-standard events unless you maintain your own branch with a custom event plugin.
@iamdustan Interesting.
Essentially it boils down to the fact that the componentization of events is still an unsolved problem since there is still global negotiation needed.
Maybe we should support it for the DOM regardless, but I think there is a much bigger discussion to be had about our event strategy.
> Maybe we should support it for the DOM regardless, but I think there is a much bigger discussion to be had about our event strategy.
This comes from my discussion with several people around animation, but I feel like it's important enough to warrant its own issue.
#122 Pending state updates may be confusing
@yaycmyk Yeah, let's call that "data management".  The term "referential equality" implies something very specific, and this is not that.
Solvable but confusing/complex issues:
_handwave_, _punt_
@theporchrat The code in OP is based on ECMAScript proposals (although changing from day to day it seems).
@theporchrat The `mixin()` showed by sebmarkbage would probably not be exposed by React and if it was, it would be very simple and not in any way tied to React core. But it's likely that React won't go the way of classes, https://github.com/reactjs/react-future/blob/master/06%20-%20Returning%20State/02%20-%20Module%20Pattern.js
Native trait features in the ECMAScript language will likely have similar feature sets.
cc @petehunt
<Hello name="Jhon &amp; Mary" />
- Magical dynamic strings potentially break optimizations in VMs.
Does this mean that if a child never mounts its argument, the ref will "hang" and never resolve? That sounds odd to me.
An alternative idea... Make descriptors into ref-promises.
What differences in particular are you concerned about?
I think I like it. It looks a little mutative because of the explicit assignment, but I guess it's not actually any worse than the other APIs we've written out.
`unsafeInnerHTML` or `dangerousInnerHTML` perhaps?
What's wrong with `dangerouslySetInnerHTML`? It sounds scary and it is.
Sounded like they wanted a different name, also naming-wise it uses `Set` which is quite weird as it is implied for all other props.
@zpao r?
grunt test
Depends on #1362 and #1358.
Sort of related to #1254.
cc @merbs @eater
Is this in the DOM spec? It's kind of strange.
Sorry, what's strange? Unlike mousemove, touchmove always fires on the element that received touchstart. In my limited testing, browsers happily send events to that removed element.
You can test http://jsbin.com/gocuhifa/1 on device or in Chrome/Firefox with touch events enabled (touch down on "monkey"; it'll disappear; move your finger and you'll get an alert).
Hmmmm maybe this isn't supposed to work:
https://plus.google.com/+RickByers/posts/GHwpqnAFATf also.
cc @sebmarkbage
Well, you can see that Mixin.initializeAll appears separately below the two "get selectionStart" calls so there are two separate updates occurring; I'm not sure exactly how you're triggering updates but perhaps you can combine them into one, which should make things faster.
@spicyj @zpao This should probably be closed now?
@matthewwithanm ugh sorry, I meant for what spicyj was referring to
All of our uses of "boolean" here are kind of misnomers, but at least what we already have explains how they are used.
If you could address @spicyj's comment, and then I'd like a couple more tests here because it's such a weird case. I just want to make sure our other falsey behavior stays correct. undefined & null both result in empty string and 0 should be stringified.
@irae can you sign the [CLA](https://code.facebook.com/cla) please?
@oozaa That was a separate issue which should also be fixed.
@sebmarkbage - do we want to enable this?
We need to clean that up in our tests. This is a problem with jest and silently failing seems like a terrible testing strategy.
I believe this should be fixed at a higher level; we're passing operations to DOMChildrenOperations in a way that isn't expected.
> could be a result of a typo
> (by a mistakte)
@markijbema Can you add the missing `e` argument and make sure the code works as intended? Guessing this didn't get tested properly because it should have thrown a ReferenceError as it is now.
@markijbema Could you sign the CLA? https://code.facebook.com/cla. Then this should be good to go.
cc @spicyj
@lo1tuma Is that your site? If so, you can try commenting out the logic in refreshScrollValues to see if it makes a difference. If it does, I'm happy to prioritize @syranide's #2271 and try to get it in.
@Shadowfaxenator you are correct in saying that React will not mount these components. If you try to, React will blow away the DOM and not reuse nodes. React uses the checksum and ids to mount and intelligently reuse nodes.
@spicyj, batching is your arena. Would setImmediate be of use?
it('updates the value of input.foo with the current state.value', function(done) {
@benjamn - can you take a look?
@jmingov, @fxbois, @lilyj - let me know if you'd like real names in here. I'm going to push this but feel free to comment and I'll push a followup.
Hey zpao!
My real name is: Jaime Mingo
Jaime
@sorribas version, how are you running it, any details to help repro?
@frikille Is TransitionEvent defined or undefined on that browser? When the unprefixed version exists it's better to use that in general because it's more forwards-compatible.
@magalhas: If you use `jsx --harmony` you get a couple for free:
@petehunt?
Just put up #1590 which is an alternative approach.
Probably related to #1107
When a `select` or `input[type="checkbox"]` is rendered inside an unwrapped Polymer element's child node, the following error is thrown:
There's definitely something weird going on here. The error message is as accurate as it can be, though it's generally difficult to guess (at the framework level) what the root source of the problem was.
Unfortunately, I am having trouble reproducing the exact behavior in JSBin.
It then renders each of those components in the following ways:
- Inside a Polymer element with a wrapped Light DOM node
Each variety seems to exhibit different behavior.
Are there other polyfills that would cause this problem or just Polymer? I'm not aware of any others but maybe they're out there.
@arv Since the errors caused by not including `platform.js` first can be dramatic and confusing, could you make the note in the Polymer docs a bit more assertive?
// el.dataset.user === 'johndoe'
- It's a bit bothersome because of all the intricacies of camelCasing data-*: https://github.com/facebook/react/pull/1446#issuecomment-43452003
@syranide  :+1:
I personally find it much weirder that `false` is ignored; it doesn't surprise me that null is. With props, we consistently assume that `undefined` is equivalent to not specifying the prop at all (like when merging in the result of getDefaultProps) so it would definitely be a change to treat `undefined` as invalid here.
@SanderSpies you're exactly who I had in mind for this! :)
petehunt: great :)
Good idea? Bad idea? Missing stuff here?
@spicyj I wrote that code a bit too hastily I guess. Should have been touchMove, also notice the onDragOver + onDragOverCapture that I forgot to correct...
@matthewwithanm I'm guessing the IE8 problems you saw in #1327 won't be a problem here -- want to try the same renderToStaticMarkup approach?
@matthewwithanm Oh right, yeah, reusing client-side would require a special flag internally which would use server-rendering rules when constructing the initial markup.
@Jpunt @benkeen
(Tangentially related to #1240.)
@syranide Was this fixed?
@jiyinyiyong My concern is that we don't have a process for making sure translations stay up to date. I would be interested in having more translated content but since it's so easy to fall out of sync, I don't want to get stuck in a situation where we're spreading misinformation or outdated information to a group of people.
Click on: Thinking in React.
Tnx :-)
@syranide if you pass a component descriptor as props, then the thing you pass it to may rerenders without you rerendering.
var child = <div style={{ color: 'black' }} />;
child.props.style.color = 'black';
Oh and the license header says "undefined" :/
@juztinlazaro Ok, for future reference, usage questions are better answered on StackOverflow, as we try to keep github issues for tracking bugs in the React core.
@akre54 that's what #1224 is for
@petehunt
I don't know exactly what @petehunt's intentions were here except something related to mongodb, and this exists there (from what I could see), so this seems fine. I'll let him handle this.
cc @spicyj
@syranide The collision case should be treated just like missing keys, in which we continue rendering just fine. There is no reason the whole app has to break (assuming your whole app is built using react).
Needs some @sebmarkbage up in here
Can't we just prefix all collisions with a counter format in flattenChildren?
FIxes #1179.
@cpojer
// string
@zpao @sebmarkbage What's happening here?
componentWillReceiveProps is special, sorry. An outer setState like this shows the sync behavior: http://jsfiddle.net/nbyjp9Lc/2/.
cc @yungsters
@ustun Not on this specifically, but we have no evidence that it's a hotspot.
@flockonus If you're using the development (unminified) version of React, you should have seen a warning in your console specifically about this.
(@visionscaper tip: press "Subscribe" on the right column.)
Opinions here @jordwalke @yungsters @sebmarkbage?
After an initial look at the diff, either way, this structure seems much cleaner. Whether or not we batch markup generation across multiple parents/roots, queueing mutations is helpful for animations in the future (and sets us up to be more testable). Queueing of mutations in general isn't the main cause of code-complexity - batching markup across multiple parents/roots is. This diff doesn't remove the later, but makes the former more elegant/correct. Note how @spicyj eliminated this `updateDepth` tracking in the old code. Any time we are executing code only on the first depth of the tree, it's a good sign that we should be using the existing `Transaction` - that's what it's there for. So this diff seems like win to me (but haven't looked carefully enough to see if there's any bugs). Thanks for doing this, @spicyj!
2. Apply those mutations.
@yungsters Not sure if you saw #1358 and #1363; now I believe we share a reconcile transaction in at least every case where MultiChild batched before, so we're still batching `innerHTML` after this diff.
@yungsters Do you think it would be worth while pulling this in to see if it fixes that weird reconciling bug we've seen?
I think this is the first I've heard of "that weird reconciling bug"; if it's still happening let me know how to repro and I'll take a look.
@spicyj That's the trouble, no one can consistently reproduce the issue.
@yungsters Today @sebmarkbage concluded it might be #1593.
@spicyj looks like this needs an update before we can try to merge this.
@yaycmyk Might happen as part of some other upcoming work. Any reason it's important to you?
ab2d59f8b02dfe65d2fe11960389671816904a06
Looks like you forgot to save the fiddle.
http://jsbin.com/caxipewo/1/edit
@benjamn sounds like commoner trying to do too many things :/
@benjamn `@providesModule` stuff should not be default of commoner OR if that's the primary purpose (it was a long time ago), we should reconsider it's use for the `jsx` executable.
Hmm, the way you worded this is confusing, it made me think you meant that `<Component context="foo" />` was no longer allowed, not that you couldn't use context as `this.context`. @spicyj - suggestions?
@syranide I mean if you have two composite components nested with no DOM node in between then they share a rootNodeID:
@ricardosoeiro The approach you describe is very fragile and not really supported. Have you looked into using something like Flux or Redux instead? They support exactly this use case, but in a different and more explicit way.
We're not going to do this, it's too magical. The solution will eventually be #1259.
this renders a `noscript` tag.
@petehunt
Yup, switched to script.
@zpao lol
@Evernight What do you mean, it ignores the mouse events? This is a strange case and you can write `onChange={function() {}}` to suppress the warning.
@syranide I'm concerned that would result in subtly broken updates for many of the attributes.
Is it a problem if I specify `rowSpan` on an input?
raw     gz Compared to last run
@EtienneLem Try http://react.zpao.com/builds/master/latest/react-with-addons.js.
Can anyone help nudge me in the right direction?
@spicyj Done: #1263
http://jsfiddle.net/nbA2M/
@jbonta I have a patch almost ready.
http://jsfiddle.net/E8gCL/5/
Related to #860 and swannodette/om#47.
@petehunt Any spontaneous reaction?
This sounds like it'll be super confusing when one component uses React.now() and another one messes up and uses Date.now().
Would prefer if we monkeypatched Date.now(), Math.random() and friends to log a friendly warning if called while in a reconcile
@petehunt I see your point and unless I'm mistaken it would only be confusing/broken for the component that uses `Date.now()`.
A. URL (resource identifier), which is "impure".
Too controversial to be a good first bug, so let's get rid of that label.
13:04 <poshannessy> why would that break them?
13:05 <poshannessy> ohhh if they use closure?
13:07 <poshannessy> i have no idea
13:07 <poshannessy> uhhh, for the most part, these shouldn't have been getting crushed
13:07 <poshannessy> if they were, then shit would be subltly broken for them
13:08 <poshannessy> (eg, we would set style.asdawe instead of style.backgroundPosition
13:09 <phunt> which would render this unnecessary
13:09 <phunt> (the one time i added quotes to "fix something in closure" i ended up *breaking* closure, which is why i am pushing back)
13:10 <phunt> i wonder: should we run our test suite in closure advanced mode? what would it take?
13:13 <poshannessy> because its nonstandard
13:14 <phunt> poshannessy: is there a way to do it without quoting
13:14 <phunt> like some sort of config people could inject in
13:14 <poshannessy> externs?
13:15 <poshannessy> somebody else is already doing that i think (dustingetz maybe)
13:17 <poshannessy> let's just hold off on this and start a discussion on GH?
Consensus from a few people is to make `null` a bit magical and make core understand it, but still render out to a DOM node. We'll see if it messes with people's assumptions.
I wish that wasn't the case. I wish that prototype chains could work well in JS but once you introduce Object.prototype and explicitly expose reflective APIs over prototype chains like hasOwnProperty, Object.keys, Object.getPrototypeOf etc. Then the battle is lost.
cc @petehunt
@totty90 In React 0.9 you shouldn't have any problem with the guard in either version. You should do development with unminified react.js and production with react.min.js; the former has helpful warnings while the latter has extra performance optimizations.
@gassorr Does that make sense?
@amit-jamwal The node you passed there must be the same one that you previously passed to `ReactDOM.render()`. That‚Äôs what the warning says: you want to be unmounting the container node you renderered _into_, not a node managed by React that is defined in some component‚Äôs `render()` method. To unmount an inner node managed by React, use `setState` as described above.
@syranide ah, true. Updated. Thanks!
cc @petehunt, @spicyj, @andreypopp, @syranide, anybody else using React in the real world who might want to argue against removing React from react-tools
@jeffmo
@baygeldin Specifically, can you define "go crazy"?  Which browsers, changing which nodes?
Make sure you're using the polyfills described here:
Also added tests for PooledClass.
Thanks for reporting -- this is a dupe of #916.
It would for example be very strange to have a child allowed to unmount itself. Therefore I think the concept of unmount/remount is the wrong abstraction here.
As a side-note, I really wish Components didn't have so much boilerplate and stigma associated with them. If Components felt more lightweight, this wouldn't be as much of a problem, since you would just wrap it in a function call.
Before, but 0.8.0 didn't include all changes in master at the time. The two changes you'd be interested in are 61abc645e50314187850d4e04ed6d257652f1a59 and 657602135ce8a661aa1d60b338b3483d3ab505ff.
@kulicuu could be different browsers handling incorrect markup differently. Without any other information that's the best I can say.
I experimented with a possible fix a little bit. As @spicyj said in #1050 it might be worth it to not ignore prepended non-whitespace text.
@syranide I think that's from a rebase or something, we checked that in already. Though something funky is going on.
@jjt can you rebase so we only see your changes here?
The main change would be in event handling, where we can no longer parse the ID string to bubble/capture. I've actually found that (at least on a non-JIT VM) considerable time can be spent parsing these string `x.y` IDs during event propagation and I'm hoping numeric ids provide an opportunity to increase the performance here. Also, there would be far fewer string concats, though I don't think that's our bottleneck. Implementing this means you'd likely need a global lookup map of child to parent ID. Thoughts?
So I kinda think that example is too contrived and hopefully not representative of what people will actually do for object as a child (converting an ordered array to an object!). For the case you have here we would say use the `key` prop, not prefix keys.
@syranide - this came up yesterday internally and there's a diff coming which adds a warning if you use an object with numeric keys as `children`. That's still allowed and the details of object iteration order and not well known to all programmers, so we want to help. Other parts of the code that depend on implicit object iteration order are ok (I'm not sure where else we have that dependency but I wouldn't be surprised).
though, I know it's much uglier.
@nuragic We're not planning to add this, sorry.
woops, sorry, don't ask me what happened there.
There are a few minor caveats to the way this works that you should be mindful of when using it:
This seems weirdly asymmetric -- is it intended?
@thomasboyt is this still happening for you?
Hey @ianb -
@yungsters @tomocchino ?
@bobeagan can you sign the CLA at https://developers.facebook.com/opensource/cla? Then we can merge.
raw     gz Compared to last run
@syranide Bare attributes were the standard way to do things before XHTML came along and told everyone to do `disabled="disabled"`, so it should be supported everywhere (except in XHTML documents, of course).
cc @yungsters  - I vaguely remember doing this for a reason. But if bare attributes work, then cool.
I'm pretty comfortable with option 2, honestly. Thoughts, @zpao, @spicyj, @petehunt, @syranide, @mtgred?
name: 'Input is funky'
Where should the cursor go? Even as a human looking at this, it's unclear: it could go before or after the space:
which feels wrong because your cursor should be after the 7, not before. But maybe this behavior is still better.
cc @zpao for a second opinion.
http://jsbin.com/dunutajuqo/edit?js,output
@tsheaff If you ask me, having an `input` that also accepts a `selection` (and reports it on change), but browsers being the way they are and events in React being reported as-is, this seems kind of fragile and quirky for core behavior... and the same thing can be implemented as a third-party component, so that seems preferable at least given the circumstances.
@jhiswin, @Cartas - you don't have names on your commits except for you github usernames, would you like real names?
@syranide I believe that was even part of the E4X spec that JSX was modeled after.
I could see this being a problem if you have some environment that validates that you're only running in your sandbox. Such as Caja.
@syranide - I like the idea of injection. We need to make the transform step injectible though too to make this really viable. `jsx --with-svg src dest` or something like that. I don't know that it'll happen right now though...
http://jsperf.com/invsundefined22/3
Dare to dream big, guys. :)
subjective :+1: to option 1 over option 2
@syranide For option 2, what's your solution for operations that currently go from node reference to instance reference? E.g. event propagation and the second argument to renderComponent.
So we should warn when we see a hyphenated style.
@gaearon Perhaps another one for you!
cc @yungsters @jordwalke @petehunt @sebmarkbage
@yungsters we wan't to be able to analyze this module and maybe strip it out in prod.
shim it :)
@anru Can you elaborate on what you mean?
Yeah, dupe of #353.
cc @benjamn
https://groups.google.com/forum/#!topic/reactjs/acnCodaJUHI
@petehunt - any objections?
@syranide do you know if #970 fixes this?
@syranide which presentation was this?
- [x] Updated esprima/jstransform with https://github.com/facebook/esprima/pull/8
fiiiiiiiiine
@cpojer
cc @sebmarkbage @yungsters
@syranide I think this seems reasonable... apart from the double detaching, what does this do for us? Is it faster?
Nice, I like this diff
``` diff
@spicyj ^^
I mean, they behave essentially like the composite component wrappers that they are, so that sounds sketchy to me. I can look a little more in depth later.
That's also rather tricky, which is more important if immovables cross paths? I would say:
The title is epic :)
JSFiddle: http://jsfiddle.net/vjeux/E8gCL/
Reduced to
http://jsfiddle.net/vjeux/E8gCL/1/
@vjeux Your last fiddle doesn't repro the problem for me; the componentDidMount is significant.
@spicyj : Woops you are right, I rushed the comment :( http://jsfiddle.net/vjeux/E8gCL/2/
(Filed #1079 which is probably the underlying cause even though the symptoms here changed.)
@swannodette This works for you?
Now that shadow DOM is shipping in Chrome I think we should take this. @wereHamster have you run into any other issues with shadowdom + react?
@wereHamster I know you said you weren't using Polymer anymore, but if you have a simple example that should work but was broken, that would be helpful for somebody who might be interested in picking it up.
See http://jsfiddle.net/zpao/U6u4K/ where I have it working correctly.
Fatal error: Condition wasn't satisfied!
@zpao Rebased, sorry for the delay.
@SubtleGradient proposed the following:
`-t-e-x-t-a-l-i-g-n` is pretty amusing. :P
Edit: + widow, - counter-*
Looks like this PR is stale. @joeyyang if you're interested in making @spicyj 's changes comment here and we can reopen it. Thanks!
> Looks like this is happening because https://github.com/facebook/esprima/blob/fb-harmony/esprima.js#L5446 is putting the parser in JS mode for the closing tag and when expect('>'); is called, lex() is preparing the lookahead token in JS mode which ends up being "¬∑" which is not a valid JS token. You get lucky using "&middot" because "&" is a valid JS token.
transforms into
A couple other ideas‚Ä¶
(this isn't actually fixed yet is it @vjeux, @spicyj?)
@gregorym - you are likely experiencing a different issue, perhaps #3972.
@joeyyang thanks for taking the time to do this, but I think _if_ we remove jQuery from the tutorial we should implement @Daniel15's idea of hard coding the data instead of doing any XHR.
@yungsters how do you feel about this?
I'm totally riffing here -- and I don't claim these ideas are well thought-out -- but just as a thought experiment:
That last example makes me want to vomit...but I guess one man's vomit is another man's treasure‚Ñ¢
desugars to:
Desugars to:
<Foo />
desugars to
desugars to
@spicyj : In what way does @petehunt 's proposal not solve the original issue?
If you're still interested in picking this back up @syranide, I think you're best situated to get back into it.
var myThing = MyStuff.MyThing;
Contrived example:
> @thorn0 @jordwalke It seems like Array<Things> shouldn't be an issue to solve if you're extending the actual parser (but perhaps you're not), as the parser should not be in a state where it would consider JSX to be valid. However, <A>1</A> seems intuitively harder to solve as we cannot know if <A> is JSX or a type-cast until we've found the closing </A> but does not seem reasonable.
Even then it's ambiguous with regexps.
// could mean:
@basarat yea, just _type assertions_ conflicts. Flow doesn't support type assertions since it attempts to be more sound than TypeScript.
@brigand that's not quite correct. Flow works well without type annotations, but it definitely intents to use type annotations too. For three reasons:
@QuantumInformation Probably a better question for the reflux folks.
Ping @petehunt
@swannodette We already consider immutable objects to be a critical part of React. Our future design will continue to revolve around optimizing the reconciler for the immutability. In fact, we're just about to land another optimization that breaks certain mutability use cases. The shouldComponentUpdate hook is currently not doing this by default but it's a critical feature that doesn't work well with mutability. Supporting a mutable JS paradigm for certain components doesn't limit our ability to optimize for immutability for larger sections.
<Foo>
But it still leaves a lot of unknown questions.
You could possibly want to have the parent inject properties into your children but those may pass through a composite that isn't aware of those.
@swannodette Do you need to use the second argument or can you use an explicit property named `children`?
This adds some more addons.
Yea, it's more about the case where a component you include injects an event plugin and that's totally outside your control. We're moving quickly into the world where people are using React and we're not having that close contact we had for the first few months. We're not seeing all the ways the uses are unfolding and I'm just getting a bit nervous is all.
I wonder if we should add `PureMixin` too? Anything else?
@thSoft Good catch. I still want to get rid of the spans completely and think that we can do it.
@sebmarkbage what do you say?
Right now camelCasing `data` attributes warns in **DEV**
just kill the comment. it's wrong
http://jsperf.com/aefsefsefsf/2
Why do have to escape `}` but not `]`?
Do you have any ideas of a completely different way to solve this issue? Even if it's prohibitively difficult to implement. I just want to know we have somewhere to go if we need that perf back.
I think that makes sense. cc @yungsters
Semi-related #3146
@spicyj I just did.
@syranide So I just read the `event.target.value` in `onChange` ? But `enter` does not trigger an `onChange`.
@syranide I see now. Thanks for helping.
@spicyj Thanks.
@ajwhite This suffers from the same problems I just mentioned one post prior.  This can't be solved without at transform, as per https://github.com/AlexGilleran/jsx-control-statements/wiki/Why-Transform
cc @benjamn @yungsters
Personally, I think we might want to be a bit less naive and forward look to see if we're at the end of a line.
With your change we blindly lose that space for inline children, which will probably make somebody else‚Äôs linter complain. If we‚Äôre going to change this at all, I think we should do it completely.
`yo react-quickstart`
shipit
Hey @squidsoup, could you sign the CLA? Then we can get this in! https://developers.facebook.com/opensource/cla
This reduces the time taken by `grunt populist:test` from 7s to 550ms, which should make @spicyj especially happy.
Relevant commits from the `populist` and `ast-types` repositories:
https://github.com/benjamn/populist/commit/9863ad16c0753f714fdb83007515637511c346d6
@sompylasar Good idea, reopening so we remember to add info about this.
https://github.com/kdzwinel/SnappySnippet
The problem @npryce is describing is that the warning has no context. With JSX we'd include the `displayName` of the component since we can figure it out with a syntax transform, but if you aren't using JSX this error is pretty cryptic since there's no hint as to which component had the issue.
The thing is that the array format is often used in this situation:
See this jsfiddle that illustrates the problem:
http://jsfiddle.net/3ma7a/1/
cc @petehunt
How is jam different from bower?
Facebook's Open Graph integration uses the non-standard `property` attribute. However it is currently stripped out.
Suggested plan of action: add it in the non-standard list
ga('send', 'pageview');
@matthewwithanm Can you say a little more about your use case? I think we'd like to do the least surprising thing here but it's hard to know what that is; my guess is any behavior we have would be surprising in some way.
What makes this example different than the caching computations case? It's the admission that the prop value `initialCount` is fundamentally different than `count`. The `initial` prefix clearly indicates that no one expects the data to remain in sync, and therefore isn't considered redundant.
@chenglou
What's the status here? Do we want to pursue this diff?
cc @petehunt
@sebmarkbage: Certain uses of `arguments` are problematic, (not all) but I'm not as much concerned with that here - I'm more concerned about the fact that this is a diff that touches the most critical path. I have no other basis for concern :)
Could you throw in the quasi-literals transform if it's not already in here?
Running "webdriver-jasmine:saucelabs_ios6_1" (webdriver-jasmine) task
Verifying property webdriver-jasmine.saucelabs_ios6_1 exists in config...OK
args: [ 'typeof window.jasmine != \'undefined\'', [] ] }
args: [ 'typeof window.jasmine.getJSReport != \'undefined\'', [] ] }
[D] Trying to kill tunnel
Seems like this isn't so easy. Let's do what @fabiomcosta says and document it.
Warning was added in f3e774559f5cfbcd45b5f3898eb85c28200cccdb
That's odd, I wouldn't expect that code to run at all when using server rendering.
return {name: 'joe'};
@spicyj Thoughts?
IMO, the case that @jordwalke states is a special case use case. You should avoid refs as much as you can, and do top-down flushes.
Ugh. OO bites us again.
Ping
We need a quick fix, if we can, so that we can move forward with more rAF and what not.
It's just an idea.
Perhaps `unit` should be renamed to `travis:unit` or something then?
cc @zpao ‚Äî As you wish.
This was challenging for three reasons:
suggested muffinizing in https://github.com/ForbesLindesay/umd/issues/10
Closing in favor of #630. Thanks a lot for noticing the misuse @youngjay! Definitely don't hesitate if you see anything else wrong.
Curious, why is this script in python?
We've been throwing around the words "pure descriptor" to talk about these structures.
>  // Enhancers
>    Blockers:
>       - Get rid or (or figure out way to abstract out) special
>       proprietary handling of overridden methods like componentWillMount,
>       - Of these proprietary handlers, some are for the purpose of
>       class hierarchy, into special "enhancers" as I've hinted at at the bottom
The class system provides an optional escape hatch when you need it rather than completely stopping you.
@vjeux any other comment?
http://pelegri.files.wordpress.com/2010/12/img-20101225-00014.jpg
Here's a very simple way to do that: http://jsfiddle.net/LHmwd/
Travis installs fresh every run, so that's pretty strange.
http://jsfiddle.net/5734W/
cc @petehunt
cc @yungsters
@syranide I think we should attempt to support all the built-in inputs at least mostly-reasonably.
@dancoates I'm sorry that this is a lower priority for us than for you. Feel free to send a pull request though! `ChangeEventPlugin` is a little hairy but my blog post at http://benalpert.com/2013/06/18/a-near-perfect-oninput-shim-for-ie-8-and-9.html should give you an idea of the general strategy. For range elements, we should listen to both input and change events and fire events when either happens (but only once even if both happen).
Instead of deciding if a snippet should be written in JS or JSX, why not put the JSX compiler to bigger use. There could be a button beside the live editor label that toggles between the two.
Does it indicate where the utf8 characters are?
Christopher "vjeux" Chedeau
http://blog.vjeux.com/
>> [Mozilla/5.0 (Linux; U; Android 2.3.6; en-us; GT-S5360L Build/GINGERBREAD) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1][1384464307562] not ok 363 - ImmutableObject should tolerate arrays at deeper levels and prevent mutation on them:PROD.
@guidobouman I'm happy to see you caring about this :) But this is essentially what I wanted at the beginning so I'm going to take it. If you're interested in doing a bit more with the docs, I think there are a few places to clean up and improvements that could be mad overall. Shoot me an email or find me on IRC and we can chat.
transitions only when the group has already been mounted.
pusheen_party
@zpao can we distinguish between `grunt clean` and `grunt clean --force`?
cc @yungsters?
Expected 'giraffe' to be '0'.
#oldestBugEvar
How about we remove support and throw if someone tries to do something dangerous?
It's getting confused by the `waitForCondition` thing.
`grunt webdriver-jasmine:saucelabs_android` passes routinely on Travis now, so I'm closing this out.
`grunt --verbose --debug 9 --stack webdriver-jasmine:saucelabs_ie11`
These hooks are likely used to implement some sort of animation, right?
What's the status here?
cc @yungsters or maybe @joshduck
@syranide Can you fix or update the failing test? (I think the test is right, so something in your code probably needs to change).
@chenglou Doesn't work in IE10 right now though, I believe.
@iamdustan Very interesting, but it seems very weird if there will be nothing to replace it.
@iamdustan I really have no idea, I have thankfully been able to stay away from touch events so far. But I imagine `event.preventDefault()` in `touchend` would prevent the cascade, but there are definitely big questionmarks as can be seen in some other issues.
I am a bit unsure about this fix since it adds an additional case to think about with respect to keying. So I would be slightly inclined to not do this, but I don't feel very strongly.
stuff
transforms to
What's the status here?
Anyway, you've convinced me it's worth moving forward despite the spans problem, so let's land this damn thing already!
:ship:ped
@mroch did this in 351dcfed01d51dd18016d84ded4f86bddecaa7ba
:shipit:
Changes of @spicyj are now in.
11:07:32 PM balpert :)
@yungsters  @petehunt - thanks for the review.
I realize this is a bit of magic, but considering that currently we need to:
This is way more explicit
(wow, 2015 sounds so distant)
@vjeux approved
@phou87 Thanks a lot for reporting! We'll roll this into the next release.
After talking with @yungsters, I'm not convinced yet that this is a good idea. I think it _could_ be useful if `data` is used widely, but it still has a pretty minimal usage across the web. If we do decide we want this, there are a number of things about the implementation we'll want to change (this should ultimately work much more like the `style` prop).
'syntax.javascript',
'syntax.c++'
@Charuru Jade parses strings like most other templating engines. React doesn't, since under the hood the HTML-like tags are [desugared into function calls](http://facebook.github.io/react/docs/jsx-in-depth.html). So I don't think these two work together.
If you would like to write a parser that allows you to write Jade in JS and desugars to plain JS, be my guest. I think it will likely prove difficult. One advantage we have with JSX right now is that we've added some simple semantics on top of an existing JS parser (esprima) and use that to convert to vanilla JS. You could probably make that work, though I'm not personally convinced it's worth the effort. Regardless, we won't be adding support for that but feel free to explore it yourself!
raw     gz Compared to last run
Incomplete.
What's the status here. Do we want to go forward with this change?
@akeelnazir I think the best thing would be for you to create a complete repro case (ideally a clean repo or gist with necessary files) and follow up in a new issue.
- [x] @SanderSpies
- [x] @Samangan
Sander Spies
http://fooo.fr:4000/react/docs/diff-algorithm.html
@piranha `resultList` is populated out of order by the line `resultList[resultIndex] = renderNode;`, but should end up being a dense array of the same length as `markupList`. At least that's the idea.
If OSX didn't ship with Ruby 1.8.7, this wouldn't be a big deal, but it does and I would rather not make everybody jump through hoops to be able to contribute to documentation (and see what they're contributing).
Right now, even when using 1.8, sanitize has a nokogiri dependency that requires Ruby 1.9.2. I think there's probably something that could be done in those projects to fix this so feel free to take that path.
See http://jsfiddle.net/nbJVN/
Off by one? Is there a pattern? This is likely something that actually needs to be fixed in `jstransform`.
cc @sebmarkbage
Something about "only a ReactOwner can have refs" -- it's not intuitive.
Assigning to @yungsters who mastered the React/Layers stuff on FB's stack, but @petehunt also has great experience using and building out layers integration with React. So whoever has time/need.
@yungsters if we redid layers today would we do it any differently (ie I think we could do it with composition)? This could be a nice greenfield opportunity.
@yungsters yeah Layer is awesome -- what I'm wondering is why we use a mixin rather than composition to hook it up to React.
@sbezboro reported the following issue on IRC:
The repro case is:
+1 @spicyj
Also: I seem to break the travis build :(
Let me patch this locally and play with it to see if I can come up with any edge-cases though before I accept.
Crazy suggestion: https://github.com/erichocean/blossom
Oh gross, thanks for reporting -- we should definitely fix this.
This is still an issue today: http://jsfiddle.net/vjeux/WMMLZ/
Going to close this out here because it's really a problem with esprima. We haven't really made any movement on this in 11 months but maybe creating a new issue there will bring some attention.
What @spicyj said, or rather, just erroring on orphaned `}` sounds like the best solution.
When I hear "spec" in JS land I think Jasmine test. I don't have a better alternative for you though, so not a huge deal.
Couldn't you just do `return /^(data|aria)-[a-z_][a-z\d_.\-]*$/.test(arg);` in the new function?
@benjamn - :thumbsup:
cc @zpao @spicyj
cc @zpao @petehunt @spicyj
This isn't really ideal, but it makes it so that people managing to
@jordwalke I am pretty sure we have done all we can here -- at least I think we've tracked down every callsite where PooledClass would have helped us. I updated our recast transforms to log every syntax construct that would cause an obvious allocation and couldn't find anything. I was thinking maybe there was an array slice or a bind() in there, but @spicyj's experiment shows that this is not the case.
@spicyj: Did you test on react-page without my latest (hack) react-page commit (in `react-page-middleware`)? That would be the true test.
@sebmarkbage - Are we doing this?
@spicyj Which minification stage are you referring to?
@lorefnon: can you please let me know if github.com/facebook/react-page works on windows?
Oh man, sorry I missed the questions. Do whatever you guys need and think is right, I'm going to step back and let you go wild and just try to guide. Not being 100% familiar with all of the cookbooks out there, I think it would be great to have working code. And thanks to codeblock highlighting (it'll become a thing one day!), we can do better than most people. If the code needed is long, perhaps we pull the relevant parts out but have a link to a working jsfiddle or something.
Saw people mention wiki in IRC. How valid is it to put cookbook entries in wiki and then parse it into jekyll?
Right now we have some inconsistencies which requires cognitive load.
We still want to special case `null`/`undefined` as those indicate that we should empty the value. Otherwise, `'' + prop` will ensure that we call `toString()` on the object (so you could have a custom Person object if you want).
Objects already have a special meaning for things like `style` and `dangerouslySetInnerHTML`, so we can't always throw an error. I also think it would be pretty cool to allow you to do `data={ /* Object */}` and then have that automatically add all of the separate attributes. Objects also have a special meaning as children, so we can't eliminate that. Booleans have special meaning for `checked` and some other props, so we can't stop supporting them entirely.
http://jsfiddle.net/chenglou/ZEKbB/1/
- Safari: works upon menu dismissal (and therefore item selection since that triggers dismissal), although for this reason it's triggered after the fade out animation rather than immediately.
- Mobile Safari: works on clicking the select, but not its option.
so @zpao: not sure if this will ever work consistently.
- [ ] `rowSpan` property - bcc6b524fb136bdc857e64d380659624193911e1
Why the safety guard?
Pushed 364ee1ffaeacee1509ce3b81e111955074863401
Awesome! I rebased & pushed it as 3d1cc16a9b143b96b353b7b03c06ca0f7e544304
I think this is something @jordwalke or @yungsters will be best equipped to answer since they've worked on the whole events system the most. Unfortunately they are both on vacation so not around to comment. Until then, maybe somebody else could comment? @petehunt? @sebmarkbage?
Squashed into 91c2a8d90b2095097261c69d78cbf749f4199edb
Interested @spicyj?
Let's take a look at some crazy shit...
// It's a String!!!!
<div>{true}{false}{null}{undefined}{0}{new String('hi tim')}</div>;
This hurts my brain because nullity in JS confuses the hell out of me. Can we instead make a new module that does something like this?
Hey @chenglou, can you rebase? (feel free to squash too if you want). Let's ignore @petehunt's comment since @yungsters accepted and Pete's getting on a plane soon anyway. We'll come back to what he said when we figure out the real consistent behavior here.
@agirton ping on this ^
@agirton @mazubieta it's ready. I'll put up something tomorrow.
I'm a little out of context here, but why is it a problem to have a property name of `for`?
@piranha, I really appreciate you taking the initiative here which forced us to make a decision.
@zpao this diff lgtm
- they are user provided in a weird way - the object you pass to `createClass` isn't really `this`, everything gets copied to a different object
</thead>
Oh, it totally looks like `rowSpan` (camelCased!) is [missing](https://github.com/facebook/react/blob/master/src/dom/DefaultDOMPropertyConfig.js#L80).  I'll submit a PR...
[jsfiddle](http://jsfiddle.net/Flsg/jkNpv/)
First and third child divs won't render the `data-*` and `aria-*` attributes.
[jsfiddle](http://jsfiddle.net/chenglou/6ZG4w/)
I also agree that this is unexpected and something we should spend more time figuring out the right answer. This might be something we can just fix in the form components.
I'm curious what you mean by "passed over". Could you please construct a very simple JSFiddle which reproduces the confusing behavior? Thanks!
I think @vjeux updated them on jsfiddle this morning
Thanks @spicyj.
cc @yungsters
cc @yungsters @zpao @sebmarkbage @jordwalke
Paging @yungsters.
I spoke with @spicyj on IRC. There will be issues if you have:
Thanks a lot @gasi! For future reference, you can use `git commit --amend` to overwrite your previous commit and then `git push -f` to overwrite your branch. GitHub picks that up and updates the existing pull request. I don't mind this either, just thought I'd share!
I'm going to wontfix this for now. We may decide the overhead is worth it here, but you really only get the niceness of Ember's computed properties if you are observing changes to the other properties. Since we aren't doing that and afaik don't have any intention of doing so, I don't think we'll do this anytime in the near future.
@jakubmal I pushed out React (and more important react-source) v0.4.1 yesterday with you changes to JSXTransformer, so now the gem dependency can work without having to build and install react-source locally. I also just synced my branch with what's going to end up in the separate repo (https://github.com/zpao/react/tree/contrib-react-rails/contrib/react-rails). If you wanted to do any work, feel free to start doing PRs against that! I have a list of todos in the readme. The biggest thing will be tests, though if you think some other part of this is higher pri, feel free to hack on whatever. Anything will help! I'll make sure we maintain authorship into the new repo if we get changes in before the standalone repo opens up.
Another completely different direction to take, which doesn't really address animating child components but focuses more on property values:
@jakubmal Feel free to open PRs against facebook/esprima#fb-harmony (that's the branch we use internally and here in React - npm has git dependency issues, that's why we point at a tarball for a rev in our package.json). I think we intentionally lag behind master since we've done some considerable work in our branch, though @jeffmo knows better. We'll almost certainly want some tests :) We didn't add our other tests in `vendor/fbtransform/`, but we have some other React specific ones and we'd want to add some internally before we point React at a new rev.
@jakubmal: I said that it shouldn't be too hard. But I'm pretty sure it's not a one liner :)
type: 'XJSElement',
<SomeChildren>
<{obj.item_type == 'special' ? SpecialView : DefaultView}>
</{obj.item_type == 'special' ? SpecialView : DefaultView}>
http://fooo.fr:4000/react/blog/2013/07/20/community-roundup-5.html
@chenglou thanks, fixed :)
@zpao
var _propsWereDifferent = [];
_propsWereDifferent[count++] =
@phleet Nice catch! Can you sign the CLA (https://developers.facebook.com/opensource/cla) and then I can merge this in!
cc @jordwalke @zpao @spicyj @andyperlitch
Wishes do come true @tomocchino...
Mentioned the wrong issue‚Ä¶ :hurtrealbad:
doesn't work: http://jsfiddle.net/robert_zaremba/LWXhs/4/
works: http://jsfiddle.net/LWXhs/5/
@chenglou if you sign our CLA we can merge this in: https://developers.facebook.com/opensource/cla
Christopher "vjeux" Chedeau
http://blog.vjeux.com/
There's something pretty similar here: http://jsfiddle.net/hdrV3/1/
Christopher "vjeux" Chedeau
http://blog.vjeux.com/
and viola.
Either way, a couple of interesting questions come up:
Christopher "vjeux" Chedeau
http://blog.vjeux.com/
Children Here
@jordwalke There's definitely value, but it comes at the cost of making JSX harder to understand, and I think that cost is too high.
@lrowe if you can sign https://developers.facebook.com/opensource/cla we'll be good to go!
@kirbysayshi You should just be able to do `<div data-custom-uri={this.props.uri} />` and it'll work. `data-` attributes are special cased.
@janhancic `this.ref.myInput.getDOMNode().setAttribute('nwdirectory')` in `componentDidMount` is a work-around until there's movement on this.
@gaearon Yes, but properties are riskier. You're less likely to rely on a property (unless you patch prototypes) than an attribute. We try to model them as properties when possible.
Nice @spicyj! Problem solved. I figured I should've checked for alternatives but I'm sick in bed and also lazy.
@Gozala Yes, we understand. That's why this issue is still open.
@ajfarkas `xlinkHref={...}` works already in 0.14.
Christopher "vjeux" Chedeau
http://blog.vjeux.com/
@syranide Sorry, not sure I understand?
@mathieumg Can you sign the CLA (https://developers.facebook.com/opensource/cla), and then we'll get this in!
Christopher "vjeux" Chedeau
http://blog.vjeux.com/
@aldendaniels I think you've mixed two concepts.
This is _not_ okay:
@azoerb's checkAlarm example can be rewritten as:
@SystemParadox
I agree it's a slightly ugly hack/workaround, but assuming I'm understanding your question correctly, that should do what you want.
Is there a reason this is effectively different from doing them separately?
Do you think jshint would be receptive to a syntax transform patch?
For those who missed it, https://github.com/Enome/jshintreact may help, at least in the short term.
if @yungsters is good, I'm good.
What do other things (like `coffee`) do? This can't be a new problem...
Browsers do special things on self-closing tags like `<p>`:
http://jsfiddle.net/bbrGq/1/
‚àö react has no idea though
fruit: {border: '1px solid black'}
yolo
Thanks for doing this. Also, small jsfiddles like that are great to demonstrate issues/ideas (much thanks to @vjeux for jsfiddle know-how).
@spicyj Don't worry about it.
cc @yungsters
cc @jeffreylin
cc @zpao
Just to try something else: `bin/jsx` can take a single file name on the command line: `bin/jsx app/helloworld.js`. Does that also not show any transformations? Or did you try that already?
So I've been looking through various implementations of Dir watchers (gaze, chokidar) in NodeJS and they're all pretty clowny - a pretty easy test case that breaks them is making a new directory and adding files to that directory.
@petehunt now you're trolling me :P
@akrieger give https://github.com/jeffreylin/jsx_transformer_fun a shot - still a work-in-progress, but lmk how it goes
Dear @petehunt,
(man, whitespace is a bitch...)
Blue totally clashes with the red. At the very least the saturation should be turned down.
I'd be happy to rethink the burnt red as well. It looks much better on white than it does on black.
Here's what it would look like to have a Molokai style color scheme with  a bit of dimensionality added back to the bottom of the buttons:
Talk about popping!
You can run with the vibrant version into a sort of Molakai theme, including the live editors:
![molakai](https://f.cloud.github.com/assets/977348/614901/229f1896-ce28-11e2-8370-f32873e91da7.png)
I'm going to let @yungsters chime in here since he's been doing all of the event stuff and I think there's overlap with something he's working on.
@spicyj, can you rebase this? There are conflicts.
It could be a problem with `fs.watch` on Mountain Lion, though. That's my hunch.
cc @zpao @petehunt
Glad it's working for you @asbjornenge. I will strongly suggest you have a build step compiling your JSX to JS for production. Using JSXTransformer is really only meant for quick prototyping! In production it will slow down your application considerably and add a lot of extra download size.
How would you write that in Coffeescript with your suggested method? Would the code inside of the {} be written in Javascript? Wouldn't that be weird to mix coffeescript and Javascript?
``` coffeescript
With {}
``` coffeescript
``` coffeescript
If you feel like making JSX work on CoffeeScript, that would be awesome :) I don't think that anyone is working on it right now.
``` coffeescript
_    _<div id="vjeux" /_>_
@NSAKHAN It's not supposed to work (right now), you're trying to return multiple components for the root, you can only return one.
In the meantime, if having es5shim+sham on the site would help, we can make that happen.
This can be closed now, right @zpao @spicyj ?
@ide @yungsters @jordow whatcha think?
Ping
@mz121star It's an unfortunate side effect of releasing parts of the FB/Instagram infrastructure. That's how we do it internally and we didn't have enough time to clean up and get rid of it. That's very high on our list of things to do now that we've launched.
I may beat the JSX horse a little bit, but I think it's one that needs to be beaten.
@xcambar they definitely are internally, we should look into moving in that direction externally as well. This should be a good start though.
TODO:
@spicyj thanks for the feedback.
I had a look at the keypad for math-facts.  I wish I would've remembered math-facts during the project that implemented the keypad.  Charlie and I discussed measuring all of the keys but decided against it b/c he had already an approach using `elementFromPoint`.
@nfcampos In react-router's case, given that we are pretty much always at the root of the render tree, having us be `PureComponent`s won't really make much sense. I also don't think it's common to have functional components as your route components. I'm normally an advocate of our users setting up a dedicated route component that delegates any app activity to components above it. It serves as a good handing off point for route information and keeps separate of responsibilities high.
Here's a slightly contrived example that should demonstrate:
@gaearon IMO the pureness of component should be up-to the component. A parent can not always know if a child component is pure or not.
The following is always impure,
These are very bad examples, I know, but this demonstrates the fact that the child can be pure/impure regardless of its parent, and it should be up to the child to define its behaviour.
@gaearon Not sure if that's a good argument considering it's an issue right now. :P But yeah, the rest of your argument seems sound. I guess in a sense you mark your "logic containers" as pure (because they deal with the data) and the children (being passed the data also inherits pureness) and it makes sense because they're mostly concerned with presentation only.
@gaearon If I understand it all correctly, that works just fine today and is correct, but will break if some parent up the hierarchy is pure... right?
That said, here's a contrived example that works currently but would break if `PureComponent` was used instead of using `shallowCompare` on the parent class: [[run on jsbin](http://jsbin.com/jejudujono/1/edit?html,js,output)]
class SillyComponent extends React.Component {
> @gaearon I think some confusion comes from us giving another meaning to ‚Äúpure‚Äù when we say ‚Äúcomponent‚Äù.
bug
<td><i className="fa fa-clock-o"></i>{elaspedTime + ' ms'}</td>
`grunt test` and `grunt lint` were both failing.
or alternatively
@gaearon - there are any number of places where implicitly `call`ing a handler with `this` set to the instance whose render method created the component.  I fully recognize that.
@gaearon @zpao
https://jsfiddle.net/0s1xjcyn/2/
In previous version `0.14.7` I didn't have any problems with Perf tools
@sashashakun updated the pull request.
@sashashakun updated the pull request.
@sashashakun updated the pull request.
@sashashakun updated the pull request.
@sashashakun updated the pull request.
@sashashakun updated the pull request.
Also, have some problem with test in travis, but don't have problems with local tests.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon Hi, I will try to fix this!
https://www.w3.org/TR/wai-aria/roles#alertdialog
return text.replace(ESCAPE_REGEX, escaper);
**EDIT:** I ran your tests in the `master` branch, before realizing you had an `escape-text-perf` branch. I updated the CPU profiles and results based on this branch‚Ä¶
@aickin I ran your tests with my setup and captured a CPU profile of the complete run which you should be able to open (try Chrome Canary):
Attr No Escape
Attr Escape
@aickin yeah that makes sense to explain the differences. So it's likely that `escapeHTML` is being inlined which takes up all the work of `escapeTextContentForBrowser` (since the rest is a switch statement) and that's why I'm only seeing it take 0.1ms in my full page server render profile.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
Thanks :tada:
@gaearon Sure, but I need to know how would the community want it fix, support prototype-less objects or just fail with reason.
@zpao Can you be more specific? I am a beginner in React, inputs would be helpful in porting this tutorial.
options,
onChange,
onBlur,
error,
MozAppearance: 'none',
background: '#fff !important',
color: 'black !important'
{label ? <p><label className="bebas grey">{label}</label></p> : null}
And my select.css
&:-moz-focusring {
background: #fff !important;
bug
<Router
@gaearon https://github.com/jaylaw81/sdp-bugfix
@gaearon (I am on the same team as ellenc345)
@gaearon, thanks for the detailed response.
@gaearon  - Building the unique key using your function looks good. The problem now is that we don't have the instance in order to get the component's state on mount, or in order to inject the state later.
raw     gz Compared to master @ fd589fc8dd5c8f987c6496b203f7f45f1f1fbb2e
@gaearon done above.
@gaearon low hanging fruit is the best fruit. ;)
Thanks gaearon. Ill follow up on this here : https://github.com/facebook/react/issues/3710
I know that it's simple to wrap everything in a div, but to me, that always felt wrong.
(bug)
**Repro**
React 15 fiddle (buggy): https://jsfiddle.net/yde4wgaa/3/
however in the file which named tutorial-zh-CN.md has designed like this:
"animations" misspelled as "animatins" in ReactTransitionGroup
cc @zpao @chicoxyzzy
@zpao is that expected that `ReactClassEquivalence` test also fails?
‚óè Runtime Error
in `jest.d.ts`
- Here is my code:
@zpao
@lovedota You're not applying any form of "progressive enhancement" to your DOM? It would mess up the node hierarchies React expect.
@iamdustan updated the pull request.
'amp-boilerplate': DOMProperty.MUST_USE_ATTRIBUTE,
'amp-custom': DOMProperty.MUST_USE_ATTRIBUTE
isCustomAttribute: (attributeName) => {
- ReactNative
- ReactART
Demo of the issue: http://jsfiddle.net/dtuite/md53wuuf/1/
At some point we use [Capybara](https://github.com/jnicklas/capybara) to assert that a given option is selected like this:
``` ruby
I see this exception:
Bug
https://jsfiddle.net/omerts/co6ooske/
@zpao thanks :)
Bug
@chicoxyzzy
It depends on particular project
`mapOf()` is little bit tricky...
I have this code
https://jsfiddle.net/69z2wepo/42137/
So its not clear why or is it a bug ?
I think it's reacting to `value` being set without considering that it is a radio-input which uses `value` differently.
cc @zpao @spicyj sounds like we want to get this fixed.
<div className="radio">
> @syranide I think it's a bit more complicated than that. Think about how you would implement these warnings for switching between controlled and uncontrolled radio buttons.
@jimfb Huh? Isn't this how you use radio-buttons https://jsfiddle.net/dt03qw4p/? Just like `value` for text inputs, if `checked` is null, then it is uncontrolled, if it is non-null then it's controlled and depending on truthiness it's checked or not... right? It doesn't have to check the other radios for this scenario, it just has to check if `checked` changes from being null to non-null or vice versa (i.e. changing controlledness).
@jimfb Actually the answer is yes in a sense...? https://jsfiddle.net/hx2r7bc4/ (contrived example, but still)
cc: @zpao @cpojer
@gaearon sure
@spicyj i added a custom setup file that monkeypatches jasmine here https://github.com/facebook/react/pull/6769/files#diff-d14cc01bd4a76abb678ced92d16a0e9cR1
`jest 12.1.0` is out
When i use react router Ôºåsomething broken code like Ôºö
// vs
> @GGAlanSmithee
@nfcampos updated the pull request.
@gaearon I've added those two tests to `ReactPerf`
@nfcampos updated the pull request.
**input tag bug**
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon sorry about that‚ÄîI didn't know about upcoming rename.
**CSS**
**JS**
@zpao Sorry for that..
"es6-promise": "^3.1.2",
"nuka-carousel": "^1.0.2",
"redux-form": "^4.2.0",
@spicyj
http://www.whatsmyua.com/
@gaearon Oh wow, my bad, you're right... sigh...
@ide That screws over anyone depending on `^15.0.0` and such which is common practice.
@syranide Exactly, that's what removing the "latest" dist-tag achieves.
Link to [JSFiddle](http://jsfiddle.net/0njjfja1/3/)
@zpao, nice point you have here. IE10 actually freezes also with plain JS implementation either, but after 20th click or so, sometimes faster, when with react it happens even after first click.
reproducible demo: https://jsfiddle.net/yiminghe/69z2wepo/41347/
moving mouse `from` outer to `inner` will trigger mouseleave event which is wrong.
Confirmed... and really weird. I'm trying to reproduce it outside of React and I can't. So I'm not really sure what could be causing this.
@elas7 updated the pull request.
Is there a way to force React to reorder children instead of destroying and recreating them?
http://caniuse.com/#search=datalist
@zpao the version does not matter to me. I am more interested if the recent reorganization is backwards-compatible or not. I guess it isn‚Äôt, because we would end up with having the same `@providesModule` files both in `react` and `react-native` and get a conflict error from RN packager.
next: tutorial-zh-CN.html
That's where the confusion is.
Here is a jsfiddle with what I am doing: https://jsfiddle.net/xehvnmt0/4/
* different times, we could race here and see a newer `_renderedChildren` than
The `invariant(false)` piece is what runs because I am in production
@gaearon On the page where I included React, there is
`Perf` works, so it looks like you were right.
It's probably worth mentioning that the benchmark is toggling, so all those numbers should be adjusted by a factor of 2.  Also, in Chrome I'm seeing ~200k ops/sec, which is over 3000 ops/frame.
https://jsfiddle.net/developit/mftxdu44/
> It's probably worth mentioning that the benchmark is toggling, so all those numbers should be adjusted by a factor of 2. Also, in Chrome I'm seeing ~200k ops/sec, which is over 3000 ops/frame.
Repro Fiddle: https://jsfiddle.net/h6qfwa51/3/
@zpao smaller like just reverting this line of code:
else
A paranoid solution might look like:
@dotu updated the pull request.
@dotu updated the pull request.
@spicyj I can't see why they would be, this feels like idiosyncratic behavior for `<object>` which kind of makes sense as plugins aren't really DOM-aware but still needs to be communicable via script. Anyway, https://jsfiddle.net/xckpxcpz/, video is not a problem in IE (and someone would surely have reported that too).
.pipe(jest)
Added version and babel preset
@TanaseHagi updated the pull request.
@gsabran can you a share a JSFiddle reproducing the error?
(Indeed, I abbreviated, I do use `production` and not `prod`)
That's my code:
Okay, thanks to @RaitoBezarius @jimfb .
Translation for language code ru-RU
@dotu updated the pull request.
@dotu updated the pull request.
@dotu updated the pull request.
my code
I debugger React Code  is Wrong in.
@Yaxian updated the pull request.
@Yaxian updated the pull request.
@Yaxian updated the pull request.
@Yaxian updated the pull request.
@Yaxian updated the pull request.
changeType: function(itype) {
val: itype === 'text' ? 'randomstring' : 32
@dotu updated the pull request.
@dotu updated the pull request.
This contradicts the major no-no listed in the best practices, and definitely isn't a "one-way data flow".
Thanks for such a detailed response, @gaearon. Really appreciate it.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
I'd like to @gaearon but won't be there for the next 2 weeks :)
- (really tacky) Set and then clear a prop immediately after setting it. Yuck.
.translate([rootX, rootY]);
- **Integration with jest**
About the last line -- Yeah you guys are awesome, so I'm taking this as constructive criticism :blue_heart:
@gaearon updated the pull request.
@gaearon here's a JSFiddle with the correct lifecycle names being logged. It also provides a button to add items to a list to see how it handles child components updating.
https://jsfiddle.net/Lhtoxsds/
cc @spicyj
@zpao Could I give it a try?
Cleaner way to declare the mixin noop in one line
Contradicts code style a bit, but it pays off in terms of clean, structured code.
@gaearon I'll try to find some time, but as I mentioned I can only trigger in tests (webdriver driven, chrome), never manually, so it's not straight forward.
Thanks for the interest, I'll try to extract a minimal version today (AU) sometime
@aickin what about when there's multiple text nodes, that could collapse to form the same text content? like `{'a'}{'b'}` versus `{'ab'}`? What about HTML comments, and the whitespace surrounding them?
The tests seem fairly thorough, although i'm not very familiar with the different strange corner cases of HTML. Has this code been run on any large react code bases to get some "coverage" that way?  Perhaps we could pull down the branch and run it on some large components?
@aickin Whether explicitly defined or not, I believe a common pattern is to do some setup/initialization in `componentWillMount`, and then tear-down in `componentWillUnmount`. Although `componentWillUnmount` doesn't get called on the server, I can definitely imagine code like this being a thing:
https://github.com/google/brotli
I like that idea too @goatslacker.
# Preserving state through Props-turtleshell
1. A very own special method that only keeps track of state that has been called upon and not the entire tree.
2. Loose state wrappers
![giphy](https://cloud.githubusercontent.com/assets/16735925/14798417/cc628b3e-0b37-11e6-8bae-c91dc9760bc1.gif)
@gaearon sorry code link in github
> @jquense in #4051
@jquense How would that work given that React doesn't listen to the input events in the IE11 code path?
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
class MyMoreSpecializedComponent {
Here's what `MyMoreSpecializedComponent` would look like:
class MyMoreSpecializedComponent {
I see what you mean, but I think that the issue is that your solution (using custom validators) would require to either reimplement every native propTypes in an external library (which might not be a bad idea actually, but a bit too out of scope), or use a very bad implementation that would catch the validation errors thrown by native propTypes and ignore them if they match the right regexp - and I feel like it wouldn't reliably work in edge cases. Implementing this into the core would be much reliable, clean, and simple.
Here's a minimal fiddle illustrating the issue:
@jimfb @zpao Any word on this?
This is just me overthinking it coming from jQuery, but googling how to submit a form gave me nothing, so I thought I'd add this.
do {
Historically, I run code in both "qa" and "staging" NODE_ENVs.
"babel-core": "^6.7.6",
"babelify": "^7.2.0",
@zpao Thank you for checking.
Consider this code:
Hi, My name is Pralay.
Pralay
1 an undefined exception
@spicyj in #6449"
https://jsfiddle.net/2ayxpag4/4/
doh!  Newb mistake, I didn't think of that :-/
[React 15.0.1 Fiddle (broken)](http://jsbin.com/madesikinu/3/edit?html,js,output)
@zpao Could a bypass be a note box like this linking to v15 blog post notifying we've changed things a bit? If not, I think we are done :pray:
I think it is due to these two add-ons I include:
https://jsfiddle.net/Artconnoisseur/eg3j7fam/1/
https://jsfiddle.net/Artconnoisseur/hfp8rf1j/1/
https://jsfiddle.net/9d3rh356/
@cometta, which browser you are using?
@zpao makes sense, and that explains well the difference between the seemingly similar attributes. Thanks for the explanation!
See: https://jsfiddle.net/pnct6b7r/
ps: The JSFiddle was based on the isuse #5332.
Posted a Codepen over in #6371
broken
broken
Meteor.startup(
An error is thrown
@gaearon LoL as you might have noticed I am new in github. Thank you.
@gaearon @spicyj can you take a look and fix this? One of my library(rc-form) relies ref to keep track of component destruction:
Hi, I am Feram ü§ñ
feel free to [star my repo](https://github.com/adius/feram) to show some love! üòä
your [Feram](https://github.com/adius/feram)
What this means is in chrome 49+, it has a red background, but in chrome 48 it has no background.
@zpao
@zpao
Just brainstorming for a better React!
Proof: http://codepen.io/phaistonian/pen/XdEwve
http://www.webpackbin.com/EJpabsuJW
@gaearon I realise this implementation is na√Øve, and it does make sense when thinking about the fact that even though children are passed from the outside, they are only rendered within the parent's render function, wherever you're going to do `{children}`.
To be clear, this example was obviously very contrived and doesn't really make sense on its own as you probably wouldn't try to optimise things in this case.
To me the whole point of being able to pass children from outside, or even as props is that you can easily compose things and separate concerns and responsibilities.
@gaearon, you mention this:
So you mean passing a render callback? Isn't that considered an anti-pattern?
@amasad what do you think? This question was meant for you as well!
externals: {
@zapo and envify is used as global transformer
@zpao I use sails.js framework, in my sails app i have configs for `docker` env, and this app starts gulp tasks on lifting.
var elapsed = Math.round(this.props.elapsed  / 100);
Caused by: java.lang.ArrayStoreException: jdk.nashorn.internal.runtime.Undefined
at jdk.nashorn.internal.objects.NativeArray.shift(NativeArray.java:1161)
It looks like that the UglifyJS Plugin isn't well supported within the Nashorn engine. There might be some differences between the Nashorn and V8.
> Your new wording is slightly less precise given the React vocabulary we use, so we're still going to need to massage it a bit.
I'd appreciate if you could tell me where I went wrong with the React vocabulary.
To me this language is confusing because:
- They're all functions.
- `class` as a general term has fuzzy meaning in JS and React and some of this passage seems to be talking about ES2015 classes while some seems to be talking about `ReactClass`es.
- It blurs the distinction between component and component class.
> How about this as an alternate wording:
> There are several nuances like this that we should do a better job of documenting.
This is an example of what I mean that the current terminology makes these very awkward to refer to. "stateless function" for example doesn't even make sense, but I've been tempted to say it too for lack of a better option.
> Anything still confusing about this draft?
#### Issue
Mirko
Thanks gaeron, good to know,
@gaearon I have the same issue. Wouldn't it make more sense to have a prop that says for instance `controlled={true}` and have the user explicitly set it (or have it by default `true`), instead of trying to infer it implicitly by a combination of some other props (value or onChange or ?)?
<param name="wmode" value="opaque"/>
@Lanfei You can't update parameters for an already instantiated flash (but it does in some browsers, so be careful), you need to recreate it. I.e. give it a key equal to src, and perhaps other arguments.
@syranide
@Lanfei Give it a different key to recreate it. For example, if you want to re-create when you change the src attribute, give the src as the key.
Thank you all, @syranide @satya164 @jimfb .
>  (client) ut class="md-input" name="txtCadmus" pat
**Code**
**React 15 not working**
Korean letters make group letters from element. for example group letters like
> Î¶¨Ïï°Ìä∏(which means React)
> „Ñπ„Ö£„Öá„Öê„Ñ±„Öå„Ö°(sort of R, e, a, c, t)
the first 2(„Ñπ„Ö£) are put together and make the first group letter(Î¶¨), and so on.
Before update, if I type `„Ñπ„Ö£„Öá„Öê„Ñ±„Öå„Ö°` by order, it automatically put together to be `Î¶¨Ïï°Ìä∏`. It is possible because there is a rule to make them.
I will try onChange, though, thanks.
Hi @iamdustan,
@satya164 unfortunately, this does not work for properties.
@gaearon, thanks waiting for the update
@nodeman777
@japgolly :  changed the title from Disable minified copy of the development build to Disable warning about minified copy of the development build ?
Here is an example that's really quick and easy with Sizzle that is going to be more verbose and a little annoying otherwise:
Issue:
Apologies if this is a browser quirk vs a React issue but me and a colleague were pretty confused by it.
With React 15.0.1 I'm getting this warning:
If multiple children have the same key, for example ([jsfiddle](https://jsfiddle.net/olegs/p09cweky/1/)):
There are couple of more occurrences like
#### OS
#### Fiddle
https://jsfiddle.net/m1hepcr3/
1. Open Fiddle
@nickbae91 could you provide additional information, such as the version of the browsers you tested with?
Translation for language code [zh-TW](https://en.wikipedia.org/wiki/Zh-TW)
cc @spicyj @toddgeist
variable.
@gaearon Like you said, the fact that react was using `innerHTML` made that possible. So the browser picked up that string and only applied the value that it accepted.
I am experiencing _strange_ behaviour, if I have couple of checkboxes.
import mui from 'material-ui';
muiTheme: React.PropTypes.object
export default IoTable;
@gaearon Alternatively, you could just learn how to browse the blame history properly.
As far as I can see, the `containerInfo._node` in this instance will be the container we rendered to &ndash; but let's see what @spicyj or others think. There may be a perfectly reasonable explanation as to why React `15.x` doesn't support rendering into a `#document-fragment`, rather than an oversight.
Ah &mdash; you're right.
I'm slightly wary of the latter, as it seems to be an expensive task for what is _possibly_ an edge-case.
1. It feels like a kneejerk reaction to a community problem. While it is a valid solution (with a precedent by babel doing something similar), I suspect that community pressure and education will be enough to prevent or decrease the impact of this behavior happening as time progresses.
Agree completely with @iamdustan as a custom renderer author. Currently it is necessary for my project to use react internals and I am aware that it may break even with patches or minor updates to react but that's something I can handle for now. Having build specific hashes would just make it a bad experience for almost everyone.
Naming it "private" instead of "lib" will make it more apparent that things may break so that's good enough in my opinion.
To solve the real problem at least in my case is to find out why the third parties are trying to use private parts of react.
@gaearon If that's the case, doesn't it make more sense to just call it `react/lib/v15/`, `react/lib/v16/`? But both of those still kind of invite people to use them, neither screams off-limits, they would mostly just think "why did they do that?" and continue. Personally I would say just `react/private/` is enough though, for whatever it's worth.
@syranide @gaearon it would be nice if the directory name corresponded to the `ReactVersion` value if that's the case.
After upgrading to React v15.0 I got a lot of warnings like:
Warning: a `div` tag (owner: `FooterComponent`) was passed a numeric string value for CSS property `left` (value: `0`) which will be treated as a unitless number in a future version of React.
@zpao This commit does change the value in style, but in a good way.
@buzinas See https://github.com/facebook/react/pull/6444
at Object.ReactMount._renderNewRootComponent (http://efca.localhost.ca:3002/admin/js/app.js:83392:18)
Interestingly this was a race condition as sometimes React's initial render would happen before the additional stylesheet was injected, and all would be fine.
@spicyj Sorry for not replying quicker. I tried 0.15x on a couple other projects with similar setups and it works fine so this must be something specific to the project. This can stay closed, thanks.
@mridgway No such luck...
@zpao Thank you sir...
>  (client) ut class="md-input" name="txtCadmus" pat
**Code**
**React 15 not working**
@buzinas When I polyfilled Object.assign with the object-assign npm package, things started working again. Not sure what they changed in 15.0 that causes it to break with the default Object.assign though.
Edit: Spoke milliseconds too soon @jimfb now I know why üòÜ
@FuzzySockets @jimfb I'm probably doing something wrong, then. Because I'm forcing the Object.assign polyfill, but my app keep warning about the checksum :(
@buzinas In your entry, add:
@mridgway Thanks for that one
and the `...other` transpiled to
@gaearon Thanks Dan, thats what I thought. Forgive me but how do I switch from using react-tools to babel? I already tried this morning after reading through the blog post but didn't really know what I was doing..?
@gaearon
@gaearon
@gaearon nits have been picked :+1:
Is this expected behavior?
@gaearon this is still in the 15 release
JSFiddle: https://jsfiddle.net/mb90na04/1/
https://jsfiddle.net/6v8cnowo/
https://jsfiddle.net/p2ctcgwj/1/
I'm not very familiar with the React codebase, but I suspect it has something to do with a change made in 1dca72e, specifically this line: https://github.com/facebook/react/blame/master/src/renderers/dom/client/wrappers/ReactDOMOption.js#L35
Curly brackets (as the first line in return) causes "unexpected token" error
As per this fiddle: http://jsfiddle.net/gqdzgue2/
has child Child
starts listening to Service
The above will throw exception during Child componentWillUnmount since Parent gets unmounted first so Service is already destroyed.
If there existed componentDidUnmount the Service can be destroyed after the children are unmounted, i.e.
has child Child
starts listening to Service
ÔøΩÔøΩWÔøΩb(ÔøΩÔøΩ>KÔøΩ,I"ÔøΩHÔøΩgaÔøΩG1œóQÔøΩLz!ÔøΩlFÔøΩ%ÔøΩÔøΩÔøΩÔøΩUÔøΩÔøΩ7vgÔøΩfÔøΩÔøΩMÔøΩQUÔøΩÔøΩUÕç.'ŒùnÔøΩN;%ÔøΩÔøΩoÔøΩ]l%ÔøΩiÔøΩ-ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ`-ÔøΩÔøΩÔøΩÔøΩGnf5ÔøΩGÔøΩ€è]ÔøΩÔøΩÔøΩÔøΩpÔøΩÔøΩÔøΩÔøΩÔøΩ-5ÔøΩ:,u=+ÔøΩ√®ÔøΩÔøΩ~CÔøΩÔøΩÔøΩ-3aÔøΩÔøΩÔøΩ√úÔøΩÔøΩ.~pÔøΩVÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩcÔøΩÔøΩÔøΩDÔøΩoÔøΩXtÔøΩÔøΩ!«∞RÔøΩ
ÔøΩÔøΩÔøΩawdÔøΩ9S* hÔøΩÔøΩÔøΩÔøΩiÔøΩlXÔøΩsÔøΩÔøΩ,ÔøΩÔøΩÔøΩflÔøΩÔøΩÔøΩ
ÔøΩEÔøΩÔøΩ%Du5sÔøΩÔøΩkÔøΩÔøΩÔøΩnÔøΩfawhÔøΩuÔøΩDÔøΩÔøΩÔøΩ7Vj⁄∂ÔøΩÔøΩFÔøΩŒπ+ÔøΩÔøΩhÔøΩÔøΩÔøΩVauÔøΩ
ÔøΩÔøΩ¬∏ÔøΩ8\ÔøΩÔøΩÔøΩÔøΩÔøΩQG⁄ò9ÔøΩÔøΩ–ÇJcuÔøΩÔøΩÔøΩ-ÔøΩÔøΩÔøΩr@"fÔøΩÔøΩÔøΩ√òMÔøΩ?/ÔøΩÔøΩMÔøΩÔøΩÔøΩÔøΩ÷áÔøΩn_QMÔøΩÔøΩRhÔøΩ    WÔøΩJ⁄çÔøΩ.)8ÔøΩ,ÔøΩÔøΩNÔøΩÔøΩ
npm ERR! ÔøΩÔøΩBÔøΩÔøΩÔøΩŸ•ÔøΩÔøΩÔøΩÔøΩUQ!DvYÔøΩ'SÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩTÔøΩÔøΩ#SÔøΩÔøΩ'zÔøΩÔøΩ>ÔøΩÔøΩÔøΩ÷ô)3ÔøΩÔøΩND/~&ÔøΩHe$ÔøΩ<
gÔøΩfLÔøΩÔøΩÔøΩ-ÔøΩŸµqÔøΩfÔøΩÔøΩhÔøΩÔøΩ>ÔøΩ‘ªÔøΩÔøΩSgÔøΩjÔøΩÔøΩÔøΩÔøΩBÔøΩ
ÔøΩWÔøΩtV_Q\ÔøΩpÔøΩÔøΩYÔøΩwÔøΩweÔøΩ
ÔøΩMÔøΩ)ÔøΩ8vdA[)ÔøΩÔøΩÔøΩÔøΩÿ¶ fH^8uÔøΩÔøΩ—•i1CÔøΩ:8ÔøΩÔøΩÔøΩkÔøΩÔøΩ=ÔøΩÔøΩl#ÔøΩ>ﬂæ ÔøΩVÔøΩÔøΩ&ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ8ÔøΩÀ¨ÔøΩ3'.ÔøΩÔøΩÔøΩÔøΩÔøΩ
{HÔøΩa+(&ÔøΩWÔøΩMÔøΩ6ÔøΩ|ÔøΩÔøΩÔøΩ?ÔøΩÔøΩj*ÔøΩÔøΩ=ÔøΩÔøΩlPÔøΩ”ºÔøΩ@ÔøΩmÔøΩF3fZjÔøΩpÔøΩÔøΩHÔøΩ-ÔøΩÔøΩÔøΩGmEÔøΩÔøΩÔøΩ22ÔøΩÔøΩÔøΩÔøΩrÔøΩÔøΩÔøΩGÔøΩÔøΩ/ÔøΩhÔøΩ7ÔøΩvÔøΩÔøΩ1ÔøΩÔøΩL òÔøΩGÔøΩH<ÔøΩÔøΩÔøΩÔøΩ(ÔøΩÔøΩ
ÔøΩÔøΩ
ÔøΩÔøΩ⁄åÔøΩÔøΩxW√ëÔøΩ`b$ÓîπÔøΩÔøΩÔøΩÔøΩÔøΩTÔøΩÔøΩ\ÔøΩ@ÔøΩIÔøΩ@xÔøΩÔøΩCÔøΩÔøΩÔøΩi??   ÔøΩÔøΩ$ÔøΩÔøΩÔøΩ RÔøΩÔøΩÔøΩÔøΩB/ÔøΩ~ÔøΩÔøΩe7
ÔøΩÔøΩÔøΩCÔøΩ^hÔøΩÔøΩÔøΩÔøΩ]zÔøΩÔøΩkÔøΩÔøΩÔøΩODzÔøΩuÔøΩÔøΩ"ÔøΩÔøΩ2z‚æüsÔøΩ\ÔøΩ<ÔøΩNÔøΩLÔøΩÔøΩ!ÔøΩÔøΩÔøΩ
ÔøΩÔøΩOÔøΩ\ÔøΩI $'ÔøΩÔøΩaÔøΩqÔøΩsJÔøΩsÔøΩÔøΩÔøΩ~-ÃèpÔøΩÔøΩ0GÔøΩÔøΩÔøΩÔøΩÔøΩ_ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩOÔøΩ'ÔøΩ6»´ÔøΩÔøΩD@i0ÔøΩ2ÔøΩ$Ûºú•      .ÔøΩÔøΩÔøΩÔøΩÔøΩeQnÔøΩ;^ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩzÔøΩÔøΩ%ÔøΩÔøΩ   ÔøΩ{ÔøΩÔøΩÔøΩÔøΩÔøΩ…òﬁÉÔøΩ
ÔøΩÔøΩXÔøΩ{ÔøΩvÔøΩ>ÔøΩÔøΩmÔøΩÔøΩÔøΩÔøΩ<Õ≥ÿìÔøΩÔøΩÔøΩ-Ty.TÔøΩeÔøΩÔøΩiÔøΩd.)ÔøΩÔøΩg/ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ[ÔøΩnÔøΩ@ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ<ÔøΩÔøΩ⁄õ∆ùÔøΩÔøΩÔøΩÔøΩÔøΩ5QÔøΩÔøΩ
npm ERR! ÔøΩÔøΩ3ÔøΩN'NcÔøΩÔøΩÔøΩÔøΩ%ÔøΩ_+ÔøΩqÔøΩÔøΩÔøΩÔøΩd9ÔøΩgÔøΩsÔøΩÔøΩ0=ÔøΩ µÔøΩÔøΩÔøΩ&2k+ÔøΩÔøΩ(ÔøΩ+ÔøΩÔøΩs“åÔøΩÔøΩ\J)ÔøΩÔøΩBxŒÇÔøΩÔøΩ&!ÔøΩ@ÔøΩA[ÔøΩÔøΩ/xÔøΩ&LÔøΩÔøΩÔøΩn)ÔøΩÔøΩ8ÔøΩgTÔøΩÔøΩcdÔøΩÔøΩvÔøΩÔøΩM|ÔøΩÔøΩÔøΩƒìÔøΩÔøΩiYwÔøΩ.#ÔøΩ€Ω#)_ÔøΩ(ph|@
aŸ™&ÔøΩÔøΩ;&U–ô„¢ªwÔøΩÔøΩÔøΩsÔøΩŸ≥ÔøΩ$]ÔøΩÔøΩ|W∆°œπÔøΩÔøΩb"ÔøΩ[zÔøΩ]l@)ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ%ÔøΩÔøΩ?ÿΩÔøΩ3ÔøΩgTÔøΩÔøΩjÔøΩzÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩsZÔøΩa:ﬂ≠ÔøΩ-uÔøΩIpÔøΩÔøΩV6‹òd1$kÔøΩÔøΩdhÔøΩÔøΩMÔøΩÔøΩÔøΩ&c[ÔøΩÔøΩCÔøΩÔøΩuÔøΩÔøΩm+3ÔøΩ\
ÔøΩÔøΩÔøΩW(ÔøΩÔøΩÔøΩÈÉûÔøΩN*÷êVÔøΩ(ÔøΩÔøΩR{ÔøΩDdxÔøΩ
kT$vÕóNÔøΩÔøΩÔøΩÔøΩ&ÔøΩeÔøΩ}ÔøΩ>ÔøΩf5&d`ZÔøΩcÔøΩÔøΩ[ÔøΩQÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩk-ÔøΩÔøΩtÔøΩ>'‘éÔøΩ<ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ—à `$kiÔøΩÔøΩ&iÔøΩÔøΩÔøΩi[x
ÔøΩvÔøΩÔøΩ⁄ë=ÔøΩ‰•µ
'ÔøΩÔøΩ_ÔøΩOÔøΩ◊è6ÔøΩÔøΩaÔøΩÔøΩ‹ÖÔøΩ=e7rÔøΩ%ÔøΩl`ÔøΩÔøΩÔøΩÔøΩÔøΩFE?"ÔøΩ7ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ'ÔøΩ
ÔøΩÔøΩS6ÔøΩ/ÔøΩ>ÔøΩÔøΩÔøΩS4n|ÔøΩÔøΩÔøΩ]gÔøΩÔøΩÔøΩÔøΩ6–ØÔøΩK{A(^ÔøΩXf‹ïÔøΩVÔøΩÔøΩMÔøΩU>8}ÔøΩ8ÔøΩÔøΩÔøΩ[ÔøΩÔøΩÔøΩ#eÔøΩÔøΩoÔøΩÔøΩJÔøΩÔøΩÔøΩCÔøΩÔøΩPXuÔøΩÔøΩ8_ÔøΩÔøΩÔøΩ2ÔøΩ1
LÔøΩÔøΩ=ÔøΩqDDÔøΩÔøΩ\ÔøΩÔøΩÔøΩÔøΩl_|OÔøΩ8"ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩyÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ8ÔøΩÔøΩ~ÔøΩfÔøΩMÔøΩ:ÔøΩÔøΩÔøΩXÔøΩ=ÔøΩ}sÔøΩÔøΩf`ÔøΩpÔøΩÔøΩÔøΩmxÔøΩÔøΩÔøΩ7ÔøΩ8ÔøΩDÔøΩÔøΩ#ÔøΩÔøΩ#ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩLÔøΩÔøΩ"ÔøΩÔøΩD>o⁄Ñ#rÔøΩÔøΩÔøΩ)ËÖñÔøΩÔøΩÔøΩÔøΩ⁄îÔøΩ(ÔøΩ√≠nÔøΩ&6*lÔøΩÔøΩqÔøΩÔøΩtÔøΩ|0ÔøΩ1'ÔøΩTÔøΩÔøΩÔøΩtÔøΩ'|ÔøΩÔøΩÔøΩA∆àÔøΩÔøΩÔøΩeiSLÔøΩAÔøΩÔøΩÔøΩ*ÔøΩÔøΩ`}ÔøΩÔøΩ1 ÔøΩÔøΩxOBMÔøΩ2+ÔøΩfÔøΩÔøΩ]ÔøΩÔøΩA..$Z[ÔøΩQ◊∞rNvÔøΩ39[ÔøΩzÔøΩÔøΩqO,ÔøΩRÔøΩÔøΩw@QÔøΩÔøΩrÔøΩÔøΩÔøΩ€•4ÔøΩÔøΩ $ÔøΩ:i{rÔøΩ]ÔøΩ"Á¶ÆÔøΩtÔøΩdÔøΩ}ÔøΩÔøΩœÑÔøΩ
ÔøΩÔøΩ[ÔøΩÔøΩdÔøΩÔøΩD   ÔøΩfuÔøΩÔøΩÂÉ∞ÔøΩfÔøΩ◊¨h/ÔøΩÔøΩÔøΩL8}.ÔøΩÔøΩÔøΩÔøΩw{ÔøΩÔøΩÔøΩÔøΩAÔøΩÔøΩ ÔøΩ
ÔøΩ4ÔøΩÔøΩÔøΩÔøΩÔøΩ\UÔøΩÔøΩÔøΩÔøΩÔøΩ4ÔøΩp}ÔøΩ;ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩhQÔøΩÔøΩjÔøΩÔøΩ'ÔøΩÔøΩÔøΩ€¥(_ÔøΩÔøΩÔøΩ.ÔøΩÔøΩ3ÔøΩÔøΩÔøΩÔøΩWÔøΩ[ÔøΩOÔøΩrÔøΩ!ÔøΩ≈ØÔøΩÔøΩ5ÔøΩÔøΩÔøΩÔøΩHÔøΩÔøΩÔøΩigIÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩAÔøΩÔøΩrÔøΩ/GÔøΩÔøΩ
npm ERR! ÔøΩ
_!ÔøΩÔøΩVÔøΩÔøΩDÔøΩ)ÔøΩ" ∂9EÔøΩÔøΩgeÔøΩÔøΩÔøΩ\ÔøΩ~XÔøΩÔøΩÔøΩ
{dÔøΩc”ãÔøΩ0rQÔøΩÔøΩÔøΩÔøΩe1ÔøΩÔøΩ'ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩfÔøΩad{ÔøΩÔøΩBpÔøΩV    éaÔøΩ7ÔøΩHÔøΩd[ÔøΩÔøΩ5ÔøΩuÔøΩD=ÔøΩÔøΩ
HÔøΩeFÔøΩÔøΩÔøΩÔøΩ:RAÔøΩIÔøΩ%.ÔøΩYkX8  LWX+ÔøΩÔøΩ%.PqlÔøΩÔøΩc]ÔøΩ
 ÔøΩ!ÀäRR! vÔøΩ_9ÔøΩXÔøΩÔøΩÔøΩÔøΩmeÔøΩÔøΩÔøΩ4GÔøΩ5&ÔøΩÔøΩj8]ÔøΩ4:G5ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩENÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ.ÔøΩÔøΩ
ÔøΩt6ÔøΩ@aPÔøΩtÔøΩqÔøΩÔøΩ◊Çg)
ÔøΩÔøΩÔøΩÔøΩ>ÔøΩÿÇÔøΩ,ÔøΩÈ∂íÔøΩÔøΩÔøΩfkÔøΩÔøΩN$n
ÔøΩxÔøΩŸ≠ÔøΩgÔøΩ[∆ÜÔøΩpCwl!l<&ÔøΩ&4ÔøΩÔøΩ@ÔøΩÔøΩÔøΩÔøΩÔøΩÿøÔøΩ’®‹ØxMÔøΩ3ÔøΩ ÔøΩÔøΩ◊•,ÔøΩW62ÔøΩs;|ÔøΩyÔøΩÔøΩÔøΩÔøΩ%rÔøΩÔøΩ@ÔøΩ3,ÔøΩﬂΩÔøΩÔøΩÔøΩÔøΩÔøΩ^RÔøΩ"ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩ"ÔøΩX3ÔøΩ   hÔøΩ.ÔøΩYÔøΩ%ÔøΩÔøΩoÔøΩR]ÔøΩÔøΩÔøΩÔøΩoÔøΩ7ÔøΩÔøΩNÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩAÔøΩÔøΩÔøΩlÔøΩg`ÔøΩÔøΩE'lÔøΩ'1>@ÔøΩ‘øÔøΩÔøΩÔøΩ1ÔøΩ}ÔøΩxÔøΩÔøΩÔøΩÔøΩaÔøΩÔøΩÔøΩYÔøΩnPe-ÔøΩ7KÔøΩc<ÔøΩÔøΩf√∂ÔøΩÔøΩÔøΩÃ®ÔøΩW7ÔøΩl)ÔøΩÎ§™gÔøΩÔøΩDÔøΩÔøΩÔøΩÔøΩcÔøΩzÔøΩÔøΩ%gÔøΩjÔøΩÔøΩÔøΩÔøΩd3]3n)ÔøΩÔøΩÔøΩÔøΩNÔøΩ4ÔøΩÔøΩÔøΩÔøΩÔøΩÔøΩY   UXÔøΩÔøΩÔøΩyÔøΩ*wcÔøΩÔøΩ'ÔøΩc%eÔøΩ÷õÔøΩ“†ÔøΩÔøΩThÔøΩÔøΩY√´VY~S[:ÔøΩÔøΩ_[ÔøΩÔøΩﬁÄÔøΩ0ÔøΩÔøΩÔøΩÔøΩ
npm ERR! ÔøΩÔøΩÔøΩ
ÔøΩÔøΩ`ÔøΩÔøΩÔøΩ*ÔøΩÔøΩÔøΩlÔøΩÔøΩÔøΩ^Y÷ÅÔøΩh  ÔøΩa|DÔøΩ^ÔøΩÔøΩ|ÔøΩP6ÔøΩÔøΩDÔøΩÔøΩÔøΩjdÔøΩyzÔøΩTÔøΩ}KÔøΩÔøΩ\!`ÔøΩa7,]ÔøΩÔøΩÔøΩÔøΩQÔøΩÔøΩÛüºéÔøΩÔøΩÔøΩÔøΩrÔøΩ‘†ÔøΩÔøΩk÷∂,ÔøΩJÔøΩytÔøΩÔøΩÔøΩ
npm ERR! If you need help, you may report this log at:
npm ERR! or email it to:
npm ERR! cwd /home/karir/Code/latihan/reactjs
npm ERR! type unexpected_token
npm ERR!
npm ERR!     /home/karir/Code/latihan/reactjs/npm-debug.log
npm ERR! not ok code 0
The funny characters are located beside the word "subjectively".
Update your node and NPM version and everything will be fine, your version is more than 2 years old and in JS it is an eternity.
Many things are broken with old versions of NPM and Node, this is not really normal that those versions are still installed when running apt-get install nodejs or npm.
@jimfb @aickin and others who'd like to comment.
// REVISED APPROACH
Now, libraries like Redux are perfect for managing the state of... well, anything!  But one thing that seems to be missing from most React+Flux developers' arsenals is replication (or more specifically, [state machine replication](https://en.wikipedia.org/wiki/State_machine_replication)), which pairs _perfectly_ with any typical reactive application whose state only changes as a result of some action.  When implemented correctly, it allows data initialization, storage, and retrieval to be completely decoupled from the application so that the only concern is rendering state. It allows developers to declaratively connect application state to arbitrary data sources and create efficient, scalable, and reliable software with relatively little effort.
websockets
@gaearon thanks.  Would patching `createElement` work for efficiently wrapping each component instance with an auto-generated HOC?
warning.js:45
</ReactTransitionGroup>
Hey @gaearon @spicyj apparently there is a confusion here, let me explain.
@lijunle
@brigand You will be pleased by https://github.com/facebook/react/pull/6401. After this pull (for v16), Uglify should delete the proptypes for production :)
@gaearon I fixed a small memory leak, if I‚Äôm not mistaken. :smile:
@kevinbarabash you could always handle this in userland and create a repo that can parse those values before passing them to React!
Cool.  I'll try to get it into aphrodite, https://github.com/Khan/aphrodite/issues/36.
Some rationale behind the choice as Symbols are essentially polyfilled / transpiled:
- If the typeof is Symbol -- native support or Babel plugin, then it is a Symbol.
- If it behaves like a Symbol (according to Mozilla doc) -- polyfill / no native support, then it is a Symbol.
@gaearon @puradox Should we continue the PR here? We can backport my commits to its PR or I can backport its commits to my PR. Anyway, I'm very interested in improving the test suite!
Alright, kind of a React newb but React is not following the principle of least surprises with this one so I have to ask.
The whole thing where you have to re-render on the client is kinda unexpected. I am sure I am missing something, or there must be some good reason why the lib works this way, I just don't know and want to know which is why I am writing this. Thanks.
"why" questions unless you like downvotes LOL
That is so confusing, but is that correct? Where can I see an example of this?
Would implementing a PropTypes.style make sense? I think it should be useful for many scenarios.
- `flexShrink`
See my fiddle: `https://jsfiddle.net/JacquesBonet/k0tyztzc/`
See fiddle: https://jsfiddle.net/JacquesBonet/k0tyztzc/
Thks for your reply jimfb,
- I am facing a weird error
export { SportsTopPortion  };
Error: Invariant Violation:
Yeah I am using Babel but still that problem
> Babel.
To reproduce, open http://jsfiddle.net/0jjnaghw/
Maybe, the code can 'interrogate' the function somehow and determine if it is a polyfill for Symbol?
@gaearon You bring up an interesting point. There could be a check if `global._babelPolyfill == true` ([source](https://github.com/babel/babel/blob/master/packages/babel-polyfill/src/index.js#L6)) and then handle the polyfill of `Symbol` accordingly. From there, one possible solution is using `instanceof` instead of `typeof`.
var nativeSymbolSupported = typeof Symbol === "function" && typeof Symbol.iterator === "symbol";
var _typeof = nativeSymbolSupported
@brigand I like that approach much better :+1:
@RaitoBezarius Yeah, it would be great if you could write some parts.
@gaearon What are you feelings on adding Symbols polyfills as `devDependencies` for the tests? Do you think it's a _acceptable_ idea?
@yaycmyk object spread is just syntactic sugar for `Object.assign` with babel ([example](http://goo.gl/y8O6ae))
@Aweary I'm aware of that. My suggestion is to use the babel version since that means eventually you'll be able to turn the transform off without having to rip out require references all over the codebase.
@yaycmyk from what I can see the polyfill that babel uses when `Object.assign` isn't available doesn't support Symbols (which `object-assign` does, see https://github.com/facebook/react/issues/6372) and that would require going in and changing all `assign` calls while this change only requires a change in the build step.
https://jsfiddle.net/gingur/eqprn74c/
Sure, check out https://jsfiddle.net/gingur/4ury0beq/2/.  The idea is a Symbol can be provided as a prop to map a "dynamic" state property.  Now given, this could also be accomplished with unique strings but the use case at least is demonstrated.
@zpao if it was just the `Object.assign()` pollyfill then wouldn't this already work with browsers that have a native `Object.assign()` implementation that supports Symbols? Just curious.
So would you be open to a PR that checks for symbols as well in `assign`? I'd be happy to work on it if this is something you guys would like to see.
@gingur https://github.com/facebook/react/issues/6376 discusses that, with the later option (using `object-assign`) being the preferred solution so far.
"redux": "3.2.1",
@Dattaya that would be awesome, I haven't had time to do this myself. Thanks!
- Open http://codepen.io/dattaya/pen/WwdqeO ~~in Chrome with [redux devtools extension installed](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en)~~.
@gaearon, that's strange. In the extension's injected script we don't use React at all, except the fact that it is imported from `redux-devtools`.
I just checked [the example above](https://github.com/facebook/react/issues/6371#issuecomment-210103633) and the error appears also when the extension is disabled (@Dattaya, could you confirm?). So, it doesn't seem to be related to Redux DevTools or the Chrome extension.
@zalmoxisus I can confirm that the error also appears when the extension is disabled. Using react `15.0.0`
@zalmoxisus, that's correct, sorry about the confusion, I might have looked in the wrong console, when trying to replicate it in my project without dev tools. It's completely unrelated to Dev Tools.
http://codepen.io/chelzwa/pen/JXZeOL?editors=1010
Although my specific error is different than @Dattaya's, it seems likely to be related to the same cause, as I also found that this happens only if I include react-router-redux in the project.
@gaearon @spicyj do you know if this is expected behaviour? It sounds like it isn't but if we don't know this for sure we can't use it to debug further.
@gaearon @Aweary Our goal is to validate the email field striping out the spaces as soon as the user is typing.
This is the jsfiddle:
https://jsfiddle.net/marcolanaro/j38zgdum/5/
This type of things is not something that the engineer does because he likes to push the library to the edge; it's a business requirement to decrease friction and increase conversion.
@zpao
http://react.jsbin.com/mitidikaqo/edit?html,js,console,output
This is an alternative strategy to https://github.com/facebook/react/pull/5408, based on a suggestion from @gaearon
Thanks for the feedback. I initially really liked the `render` prop, because it felt flexible while still being lightweight. As I have begun to think about it more, I think you might be onto something about it giving more control than is necessary, especially as I cannot think of another use case other than a single child.
primitive: PropTypes.string.isDeprecated
}).isDeprecated
Deprecated prop `primitive` was specified in `MyComponent`.
@satya164 @Aweary
### Safari 9
@gaearon Thank you for resurfacing this! Crazy that it has been a year since I opened the Radium issue.
I have the code:
externals: {
https://jsfiddle.net/beyt1ekz/
Also I did an [example](http://codepen.io/bear-foot/pen/VazeLq), is it ok to add codepens in docs ?
<input type="text" placeholder="Vezet√©kn√©v" name="lastName"/>
<input type="text" placeholder="Keresztn√©v" name="firstName"/>
@Bear-Foot that would work in this case, but really I wouldn't go to such lengths.  Rather, I just avoid using uncontrolled components.  They're another manifestation of internal state that makes the app less predictable because uncontrolled components don't always render exactly what you pass in.
I‚Äôm curious if the ‚Äúnot so great for everyone else‚Äù bit is primarily a documentation/marketing issue? It‚Äôs business-as-usual for FB, but totally foreign and not referenced anywhere when someone comes looking at the code in here.
- Why the use of Mixins and all ? And inconsistencies regarding these ?
Everything mentioned looks great! I definitely feel like adding react-specific contributing documentation is a must to help people contribute.
I also believe that making things beginner friendly is valuable. There are people who want to contribute and can, but they're not familiar with git or GitHub and may not even know what a Pull Request is.
The overall impression I got while reading the codebase is that if it was not facebook's, I'd have thought it was hard to read, and full of hackish things and inconsistencies... But I know some great engineers have written the codebase :) so there must be valid (or not !) reasons for this, be it historic, performance, architecture opinion, backward compat... It would be great to know more on the general history of this code.
I also realized recently that react-native was written in a very different way, more modern, and I'd like to know more about the plans regarding the 2 projects.
@gaearon I think that list would **REALLY** help (at least me) as it's pretty difficult to jump into a project without some good notes to guide you as I personally cannot take the many hours it takes to read all the code and reason about how the sys works....well at least not yet...I should be taking a vacation here soon maybe then.... :smile:
> but we're moving Flux into the core (maybe)
@spicyj I don't want to steer too off topic but is it possible to elaborate or link to more thoughts here?
What would be contributed? Does React really _need_ more?
Sometimes when you're looking at unfamiliar patterns it's hard to tell vital organs from sinews.
Aldo explains how to contribute documentation, how the website is built, how JSX is properly highlighted in code snippets (big struggle for me). I love to contribute documentation but didn't understand how to do it here.
Not sure how difficult something like this is to figure out. Going to continue looking myself, but if someone has some idea how to go about creating a warning for this scenario, please feel free to point me in the right direction :smile:
ReferenceError: this is not defined
at [object Object].ReactCompositeComponentMixin.mountComponent (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactCompositeComponent.js:148:18)
at [object Object].wrapper [as mountComponent] (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactPerf.js:66:21)
at Object.ReactReconciler.mountComponent (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactReconciler.js:37:35)
at [object Object].ReactCompositeComponentMixin.mountComponent (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactCompositeComponent.js:225:34)
at [object Object].wrapper [as mountComponent] (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactPerf.js:66:21)
at Object.ReactReconciler.mountComponent (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactReconciler.js:37:35)
at [object Object].ReactCompositeComponentMixin.mountComponent (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactCompositeComponent.js:225:34)
at [object Object].wrapper [as mountComponent] (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactPerf.js:66:21)
at Object.ReactReconciler.mountComponent (/Users/aihornmac/Documents/site/ihawn/code/node_modules/react/lib/ReactReconciler.js:37:35)
I wonder if there is anything to do with react, or just some bugs of node.js, plz help!
btw, redux rocks!
Wow...
@amized have you tried [ReactPerf](http://facebook.github.io/react/docs/perf.html), and [`printWasted`](http://facebook.github.io/react/docs/perf.html#perf.printwastedmeasurements) in particular?
@amized Have you tried stripping your code down to a minimum, with which you're experiencing the bug? I can't really reproduce it.
Interesting!
Given the bug only seems to be triggered with Flash, I wouldn't expect this to be on the top of the priority list to fix, although it may be indicative of some other problem in SELECTION_RESTORATION.
type='radio'
I don't really mind, it doesn't really have any major implications, but it is clearly different from plain IMHO.
after @syranide: "the `checked` property is updated, the attribute is not as it reflects the initial state" <- from what I see the attribute is removed on the client
Here are some GIFs with my custom checkbox:
Sorry for the complicated example :)
CC: @zpao
https://jsfiddle.net/69z2wepo/35458/
@Prinzhorn what browser do you use? I have Chrome 49.0.2623.87 (64-bit) Mac and for me it acts like this:
function. This previously used to throw an invariant violation but
Done! re-review? @gaearon
warning: React.PropTypes.custom(
`var isPojo = o => typeof o === 'object' && !Array.isArray(o) && !o.$$typeof; // separate plain old js objects from react elements`
Thanks much gaearon
'span',
{ 'aria-hidden': 'true' },
(I'm using babel). The `&times;` however is showing up as `√É‚Äî` in the browser... Any idea what's going on?
@zpao Oh wow. Thanks!
I got one strange error-like thing.
I got array of commands in very special component, eg:
<span className='glyphicon glyphicon-link'/>
<span className='glyphicon glyphicon-remove'/>
clone(){
super(props)
super(props)
There's explanation in this exception:
<foreignObject>
</foreignObject>
<foreignObject>
</foreignObject>
Is this a problem, or is the body tag not supposed to there anyway?
@keyanzhang please do :-)
@jimfb I'm not sure how to reproduce this in core because I believe it's specific to how React Native uses it. I've referenced the React Native issue that discusses this crash.
@gaearon All you need to understand really is that GCC mangles member properties such as `foo.bar` into something like `a.b`, but strings are not and thus `foo['bar']` becomes `a['bar']` (which is wrong if you're trying to index an object such as `{bar: 1}`, but correct if it's `{'bar': 1}`. So if you want to dynamically index a "struct/class" you'll need to use `keyOf({bar: null})` because that gets mangled to `keyOf({b: null})` and so `keyOf` simply returns the first key `'b'` (which is correct, because after mangling that is the actual name of that member property).
### SVG
An example of a possibly problematic component:
error
// OuterConnector
<InnerFoo />
</OuterConnector>
<InnerBar />
</OuterConnector>
<OuterConnector2>
<InnerFoo />
</OuterConnector2>
error,
...otherProps
error,
...otherProps
@gaearon Yes, I will update with an approach similar to that.
Here's a weird I noticed today when debugging on IE10
@JaRail cloning nodes is technically possible, but does not really make sense in this context IMHO. This is not about displaying a "hierarchy like the node" provided, but inserting that exact node so whatever created it can still function as intended.
ÊØè‰∏â‰∏™ÊòØÂ≠êËäÇÁÇπ --> Á¨¨‰∏â‰∏™ÊòØÂ≠êËäÇÁÇπ
@jimfb rebased.
</ReactTransitionGroup>
#### My Issues with `dangerouslySetInnerHTML`:
1) Verbose and not always dangerous.
@syranide Although I initially agreed with `ReactDOM.markSafe`I think ergonomically it would be annoying. Typically "ReactDOM" is only required on root component's that need to render but this would require it anywhere html is to be trusted. I'm not really sure if it would make sense in the context of rendering outside of the DOM though since I don't have much/any mobile experience. Also `markSafe` is a more generic that `safeHTML`.
@syranide I understand restricting the api to be on `ReactDOM` but what is the internal benefit of creating this fragment api you are proposing? Not very familiar with the internals of React but as an outsider that api is certainly uglier.
The api here does seem nicer, naming-wise though it would be a mistake to move away from the "WATCH OUT!" nature of the current api's name. There is a lot of value in signally to users that an action potentially has risks. I like the approach Rust took with its `unsafe` keyword for outing out of the compiler guarantees for memory safety. The point is you are going to write Safe code inside there but it signals that the compiler isn't going to help you there.
@jquense I am wondering though if in a long term it wouldn't be nicer to keep such verbose warnings behind a warning that pops up in the developer tools as long as the app isn't built for production or the user opts out by some means (e.g. some option or flag, or an explicit import like Scala does it if you want to use experimental or advanced compiler features). One advantage of such an approach might be that the warning messages could be better articulated and more expressive than the name of a function/method might ever get.
This is intended (discussed elsewhere) but rather unintuitive behavior. Every time you render:
@vitalybe I'm guessing this is why many React examples that use ES6 classes use trailing/leading underscores for method names, and bind them in the constructor to `this` (without the underscore). I'm also guessing this isn't a problem with `React.createClass`, which strangely enough would make `createClass` cleaner to use than ES6, but more knowledgeable people can tell me I'm wrong.
@gaearon The problem was that I was causing, by proxy, a `setState()` to be called by the ref callback function, causing a never-ending loop. If I was merely saving the element, it's true that it wouldn't matter much.
We've mentioned several solutions to this issue on the thread, I think that the main point, however is that its current behaviour is rather unexpected.
@iamdustan absolutely not. Relying on the community to catch core bugs is ludicrous
This is certainly a bug. cc @spicyj @zpao
Thanks! :sunglasses:
BTW, has anyone tried to leverage the same idea under [React Developer Tools](https://chrome.google.com/webstore/detail/fmkadmapgofadopljbjfkapdkoienihi) for the testing?
cc @zpao
<InputPassword className="input__field input__field--kohana password">
<label className="input__label input__label--kohana">
<i className={"fa fa-fw icon icon--kohana fa-lock" }></i>
<span className="input__label-content input__label-content--kohana">Password</span>
<InputPassword className="input__field input__field--kohana password" />
<label className="input__label input__label--kohana">
<i className={"fa fa-fw icon icon--kohana fa-lock" }></i>
<span className="input__label-content input__label-content--kohana">Password</span>
// RequireJS
// needed for Java 8 Nashorn
https://jsfiddle.net/69z2wepo/34455/ Done
@divined This is not a bug in React, but rather a nuance in how DOM events travel up the document tree.
Thanks, i will use Babel 5 and require1k in the bowser.
setTimeout(() => this.setState({ foo: 'baz' }), 1000);
Compile w/ babel, then run:
@Fahrradflucht I think that's basically the same as what @TooTallNate posted since you're calling `setState` in a callback for an async action (`this.firebaseRef.limitToLast(25).on`) invoked in `componentWillMount`
@03eltond For SSR, we provide [`match` ](https://github.com/reactjs/react-router/blob/master/modules/match.js), which, in essence, resolves all the asynchronous props and state before passing off execution to the callback. You shouldn't be using `<Router>` on the server, just `<RouterContext>`.
@TooTallNate
cc @timdorr , @taion, @mjackson
However, the only way I'm able to achieve this is through a combination of hacks:
jsFiddle:
https://jsfiddle.net/7gfhcv1s/2/
So this is a kind of a hack.
Inspired from https://www.youtube.com/watch?v=PnpfGy7q96U
@syranide
@everdimension Answering in original issue instead.
@appsforartists
http://jsbin.com/pisita/10/edit?html,js,console,output
It's not a straightforward fix:
Anyway, to summarize, `option` element looks unique in the sense that it needs the `value` attribute explicitly set even if it is an empty string.
cc @spicyj
@syranide
@chicoxyzzy  value="" is permitted only for handful of elements according to HTML spec, you can use data-\*  custom attributes. https://developer.mozilla.org/en/docs/Web/Guide/HTML/Using_data_attributes
> There's a couple of special cases where they're actually executed in order
Pinged @andreicoman11 about this, thanks for spotting this bug @aleclarson - feel free to fix, but I want to know what the original intent of this change was.
I still don't know about the original intent of the diff:
@gaearon This is where I am at to reduce allocations:
@spicyj That has been my observation.
@spicyj You're welcome!
@spicyj I want to keep exploring an event plugin, but I think the safest route is to move forward with what is in this PR.
Hizzah!
Always applying `px` therefore might in that case perhaps return unwanted behavior.
@zpao A nice change that is not mentioned: Stateless Functions can now return `null`.
What's the solution here?
:tada:
I think there may also be a babel 6 related issue, the `eslint-rules\__tests__\warning-and-invariant-args-test.js` tests throw, not being able to find the es2015 preset, But I don't think it has anything to do with the original issue here
See https://jsfiddle.net/2ywd87sc/1/
I found this non-obvious, so thought it'd be good to document.
@gaearon Wow, awesome links! Bookmarking those, thank you. What was missing for me (from the official Facebook docs) was _where_ exactly to put the perf calls. Console? Code? Where exactly in the code?
hmm weird must have been something funky with webpack
> hmm weird must have been something funky with webpack
Possibly addressing #6153
cc: @iamdustan
Edit: @yaycmyk Didn't realize that was a thing, hah. Thanks for the heads up!
@gaearon NEAT!!!Thanks
Is it bug or am I doing something wrong?
syranide, I need them to be dynamic, since they are part of higher component.
I`am children
> Note: @bORm please provide a JSBin/ESNextBin the next time, helps a lot! Thanks!
and??? Where class 'children' in parent div?
undefined 4dafa3e7-83cb-4a07-ae77-f48dc54cc7d2:40660
// Children
# PropTypes.range
PropTypes.range(-Infinity, -0); // negative numbers only
Why do you have a prop that is either a string or `false`? How are you using that? Sounds a bit like bad design.
@JustBlackBird That's what `null` is used for.
@rmilesson, then you can treat it as "string or `null`" condition =)
@JustBlackBird My point is that you should not use strings and booleans interchangeably. I mean, you can, absolutely, but it's pretty bad form.
I believe that a recreation of the issue would be in the following fiddle: https://jsfiddle.net/c8bxbjwv/.
> The "if so" is a little confusing. How about:
@gaearon Yes I feel, the error message makes sense in case a mixin is `null` as it helps you identify a null mixin and help you take necessary action.
However, when using `Foo` like this, it throws:
Since babel 6 doesn't have the in-browser transformation, which would be the replacement?
sorry i'm trying to figure it out, i don't have any experience with `Rake` :sweat_smile:
thnks @zpao
@gaearon The tests don't break without that other line, so `¬Ø\_(„ÉÑ)_/¬Ø`
@gaearon Yes that's true, I've only ever used `Simulate` in my testing.
@wdhorton  @mxstbr  i'd love to try too, if you don't come
@gaearon do you mean flex's `order` property? I've not come across `zOrder` before.
@gaearon I think changing the source order in CSS could work. I'm not familiar with `z-order` but I think it's doable like you say.
A very crude example of what I'm trying to do is here which illustrates the order behaving strangely at the end: https://jsfiddle.net/hellosmithy/92he8jge/2/
@gaearon Are you talking about z-index? From what I can find there is a z-index property and an order property.
I really think allowing this to be configurable through props is the way to go. I also think that having a default prop set so that by default the behavior doesn't change would also be a good thing. Fixing this with CSS is possible by doing something like this http://codepen.io/aardrian/pen/MavVeb but I can see that getting messy quickly.
Mine is ok, and the email I'm using is persson.jonathan@gmail.com, thanks!
@zpao name looks good, email is `hastings.conorm@gmail.com` though. thanks!
@songawee looks good, thanks!
- Bobby
>  @karczk
>  @Andreww8xx8
>  @antoaravinth
>  @matthewlooi
>  @csbok
>  @hejld
>  @bellanchor
>  @songawee
>  @tmysz
>  @puppybits
>  @kryogenic
>  @prometheansacrifice
>  @wikinee
>  @Zhangjd
>  @adraeth
>  @zjjw
>  @koh-taka
>  @leeyoungalias
>  @nakazye
>  @translucens
>  @shogunsea
> Patch Links:
>  @karczk
>  @Andreww8xx8
>  @antoaravinth
>  @matthewlooi
>  @csbok
>  @hejld
>  @bellanchor
>  @songawee
>  @tmysz
>  @puppybits
>  @kryogenic
>  @prometheansacrifice
>  @wikinee
>  @Zhangjd
>  @adraeth
>  @zjjw
>  @koh-taka
>  @leeyoungalias
>  @nakazye
>  @translucens
>  @shogunsea
> Patch Links:
> Would you like to specify something more specific (mostly just your GH
> - @koh-taka https://github.com/koh-taka
> Patch Links:
@csbok
name : Changsoon Bok
email : winmain@gmail.com
ghub: @zjjw
@zpao can you update my email please? thanks
id: shogunsea
name: Shogun Sea
email: shogunsea08@gmail.com
@zpao  can you update my email please? thanks
iawia002
z2d@jifangcheng.com
Hi, would you like to change @terry3's name to `Tengfei Guo`, and the email(terryr3rd@yeah.net) is fine.
name : Robert Binna
email : rbinna@gmail.com
@yuanyan
email : yuanyan.cao@gmail.com
``` coffeescript
c 'foreignObject', foreignObject
foreignObject undefined instant_chat.js:340:11
childItems: wizardItems
<div className="wizard-outer">
Child component
super(props)
<div className="wizard">
<div className="wizard-outer">
I like to use first one, This code is to make a wizard like content.
Where i call React Wizard
</thead>
<div className="modal-dialog">
updateWizard(){
childItems: wizardItems
nextClass:' btn-primary'
<div className="wizard-outer">
<div className="wizard">
super(props)
<div className="wizard">
<div className="wizard">
@gaearon I've added the `preset` setting to the command
@spicyj shall I add a warning for this case?
Thank you vslinko!  I used where you were placing the code as the way to fix the issue
@gaearon I've made those changes, let me know if there's anything else that needs updating.
also related to #6130
This cost is even multiplied, since the official CDNs seem to already have a redirection in place. At the moment of filing this issue, a request to https://fb.me/react-0.14.7.min.js ends up with 301 to https://fbcdn-dragon-a.akamaihd.net/hphotos-ak-xfa1/t39.3284-6/12624086_185960608428874_474870377_n.js
Hi Paul / Hola @montogeek montogeek and  @bjrmatos,
@lucy-orbach @FoxPlateVevo @normancarcamo feel free to comment in reactjs-hispano/react-es-docs/issues/1 :+1:
sorry forgot to mention @montogeek :sweat_smile:
@jimfb, @zpao thanks!
As discussed in the second comment, it seems to me that the right approach here is to actually remove all the special property logic from DOMPropertyOperations and instead implement it in the appropriate wrappers instead (ReactDOMInput, etc).
Repro: http://jsfiddle.net/670u7ure/8/
cc @jimfb, @spicyj
[Reproduced error](https://jsfiddle.net/raineroviir/98Law5w8/) (in the console)
raw     gz Compared to master @ 7a3009c2b4560b3db40f7b5a21cd70defe2b8c48
raw     gz Compared to master @ 7a3009c2b4560b3db40f7b5a21cd70defe2b8c48
The ES3-transforms are still buggy, aren't they?
babel/babel#3368
/cc @jimfb @spicyj
It seems that for some reason, when react diffs the dom,
message: navigator is not defined
name:    ReferenceError
plugin:  gulp-mocha
class Bar extends React.component {
<Foo text={"baz!"} onClick={this.handleClick}/>
Why is one abbreviated and the other is not? Can they all match their typeof?
- Added note to ‚ÄúDisplaying Data‚Äù, notifying the reader that the code uses JSX
what's more
@syranide @spicyj
@gaearon It wouldn't be the first time this happened: https://github.com/facebook/react/pull/3998. It's a necessary evil.
Questions:
Here's a [pen](http://codepen.io/phaistonian/pen/adgaXE?editors=1111) to illustrate the case (view console).
Not sure if the "framework" keyword was intended, because according to the docs:
ReactDOM.renderToString(rootEle)
ReactDOM.renderToString(rootEle)
Is it possible at all to make such things work, or i am in the wrong way? I have some Jest tests, i can share it, if needed.
tutorial7.js sample code in tutorial-ja-JP.md has incorrect highlights.
http://jsfiddle.net/abzosdau/4/
> Edge case mitigation: Ancestors override descendants. If an ancestor of a component using "unmount preparation" unmounts the descendant unmounts instantly without preparation, unless the ancestor also utilizes `componentWillPrepareUnmount`, which would give it some arbitrary time to prepare.
// .. some styling
var tweenOptions = {
// .. some tween options
this.tweens = {
opacity: new Tween(0, tweenOptions),
scaleY: new Tween(0, tweenOptions)
@satya164 @sebmarkbage I amended the proposal with `componentWillRemount` addressing the issues you've mentioned.
<MyAnimatedChild
var MyMixin = {
@zpao thanks, that would help us out a lot - migrating from one major to another is much easier when the bug landscape is as empty as possible.
Fiddle: https://jsfiddle.net/6t3tqgdh/
@petetnt That seems rather arbitrary, `<img alt /> === <img alt={true} />` is what it means in JSX. So then treating `<img alt={true} />` as if it was `<img alt="" />` (or `tabIndex="-1"`, etc) in React seems super weird.
In JS, strings can be treated numbers, anything can be treated as if it was a boolean, etc. So `<img alt={a} />` being different to `<img alt={a + b} />` depending on the types is problematic, if `a = true, b = 'foo'`, then the first would be `alt=""` whereas the second would be `alt="truefoo"`~~, and when would you even want `alt="alt"`~~? In this context the current behavior makes a lot of sense.
@syranide For the sake of this particular issue I am only talking about elements with known attributes that have no values attached.
"babel-core": "^6.5.2",
Afaik, there's no way with the attribute to open it as a modal.
@tleunen thats true, would be nice if it was possible to control modal as well with an attribute.
1. Rendering subtrees unnecessarily.
2. Expensive render.
4. Wasted render.
@gaearon
@gaearon The documentation for the perf module is a bit lacking in specificity, so I may just be using it incorrectly.
@gaearon Do you know if it is possible to use the Perf module (new or old) to gather stats on a complete rendering? Right now it seems it is more useful for page interaction stats.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
@gaearon updated the pull request.
**'key' and 'ref' are reserved words that are not allowed to be passed as props.**
it will raise an error:
Here's a random hello react fiddle I plucked from google
Reference: https://jsfiddle.net/gdgoqva7/1/
Is this a bug or something else?
I expect this is a weird way of using the components, but in the example above, the `LoginFields.partiallyApply` function does some internal work to assign state and event handlers to some form components and then returns the bound components in an array so that any additional props can be provided (assigned to `Username` and `Password` using de-structuring in this case; these are just functions that return some input controls).
Since both of those components are just functions, we can do that, but this is a bit odd looking, especially considering the old deprecated component syntax.
So I end up with custom `ReactDOM`, `ReactMount`, `ReactDefaultInjection`, `instantiateReactComponent`, `ReactChildReconciler` and `ReactMultiChild`.
Since the injection is called once with my custom injection, how is that possible ? Am I missing something here ? I suspect some global tying things somehow but can't figure it.
Typical caveat: we‚Äôre playing with non-public APIs that can break at any time. üòÅ
...but I must say I absolutely don't understand why, if react points to react/lib/ReactIsomorphic ? And how I could prevent react from using react-dom here and there ?
Yeah I know these are private APIs and it's bad ;)
https://jsfiddle.net/wntgpwcx/5/  (react 0.14.7)
https://jsfiddle.net/wntgpwcx/6/
Here's a fiddle demoing the bug here: https://jsfiddle.net/jkoudys/hpceoL01/
options = [<a key="opt1">Bar</a>];
SyntaxError: /Users/ayo07/tmp/react/main.js: Unexpected token (5:2)
at Parser.pp.unexpected (/Users/ayo07/tmp/react/node_modules/babylon/index.js:2907:8)
at Parser.pp.parseMaybeUnary (/Users/ayo07/tmp/react/node_modules/babylon/index.js:489:19)
at Parser.pp.parseExprOps (/Users/ayo07/tmp/react/node_modules/babylon/index.js:420:19)
at Parser.pp.parseMaybeConditional (/Users/ayo07/tmp/react/node_modules/babylon/index.js:402:19)
at Parser.pp.parseCallExpressionArguments (/Users/ayo07/tmp/react/node_modules/babylon/index.js:585:20)
Wouldn't it be better to _only_ have the non-npm instructions, rather than having instructions which don't work as written?
Such a poor quality.
`02-13 00:01:25.800 31091-31091/io.particle.android.app D/BANANA: Uncaught SyntaxError: Duplicate data property in object literal not allowed in strict mode -- From line 2209 of https://setup.particle.io/js/bundle.js`
// init funny random device names
this.randomDeviceAdjectives = ["cranky", "crazy", "mighty", "tasty", "normal", "morphing", "cute", "square", "tricky", "fancy", "innocent", "powerful", "demonic", "greasy", "pale", "amusing", "awesome", "nonchalant", "soggy", "squeamish", "woozy", "clammy", "smiling", "adorable", "spiffy", "giant", "overrated", "clever", "invincible", "elegant", "wise", "vivacious", "nimble", "melodic"];
this.randomDeviceNouns = ["aardvark", "bacon", "badger", "banjo", "bobcat", "boomer", "captain", "chicken", "cowboy", "dentist", "doctor", "easter", "ferret", "gerbil", "hacker", "hamster", "hindu", "hobo", "hoosier", "hunter", "jester", "jetpack", "kitty", "laser", "lawyer", "monkey", "mutant", "narwhal", "ninja", "penguin", "pirate", "pizza", "plumber", "puppy", "ranger", "raptor", "robot", "scraper", "scrapple", "station", "trochee", "turkey", "turtle", "vampire", "wombat", "zombie"];
'strong',
'name your Electron'
I could do something like http://jsfiddle.net/crl/fu06rxw8/6/ but it's not important after all, thanks
escaping / typo.
@spicyj Can you please comment on why this was closed? Was there some kind of resolution?
@spicyj I see, thank you. Hopefully all of this can converge on a clear, consistent story at some point.
After looking into it more, I can't figure out how I would implement this. Intuitively, it seems like it should be possible, but there's something missing that I can't put my finger on. Maybe @gaearon would be so kind as to take a look?
more details here https://jsfiddle.net/ceejpt0z/16/
### My interpretation of spicyj Proposal
@zpao Updated based on comments.
Here's an interesting API direction you might consider:
In Skew I'd like to be able to do something like...
@zpao Makes sense to me. If we move ahead, I'll take a stab at looking around where else this would come up.
@jimfb : Do we need to add a warning message ?
-XDVarpunen
<Foo />
I haven't looked closely enough at that approach to understand where the concerns might be, but I assume that adding a new special kind of child isn't exactly a simple thing.
https://jsbin.com/nohovapohi/edit?html,js,console,output
the audio tag:
@nicolabortignon you should not need to use `findDOMNode` when the ref is not a react component.
it should work fine either way, see this example https://jsfiddle.net/wycoauho/1/ and open the browser console to see the log result.
So, I created a Fiddle myself, and it did work. So now I'm trying to
> a fiddle to demonstrate this issue?
doSomeSVGMagicThatDependsOnTheWidth(refRibbon);
Adding a timeout to componentDidMount does the job, although this is probably not normal
I don't understand how this would be fixing that error. The code you changed is markdown, not actual runnable javascript.
class NativeApp extends React.Component {
export default NativeApp
this code ,
## Repro
## Code
router: PropTypes.object
Babel Deps:
-     "babel-cli": "^6.4.0",
-     "babel-core": "^6.3.26",
-     "babel-eslint": "^5.0.0-beta6",
-     "babel-preset-react-hmre": "^1.0.1",
It seems cause by custom html tag.
@jimfb If the modal doesn't disappear when you hit ok that's very strange...
@TheBlasfem you beat me to it haha! I noticed though that your fix doesn't address the fact that no event listener was added for the 'hidden' event to begin with. Also, the event name is actually `hidden.bs.modal`. I've made those changes in mine in addition to responding to the same `onHidden` prop you also implemented.
I created [this mixin](https://github.com/moodysalem/set-state-function-mixin) this morning to handle creating functions that just call setState if the component is mounted, but it would be nice if it was just built in to the React component since I think it's a pretty common pattern to handle UI events by just setting some state variable.
http://jsperf.com/type-of-undefined-vs-undefined/78
Fiddle: https://jsfiddle.net/69z2wepo/29719/
Raw:
isPrehistoricBrowser: true
Change
- HelloPenguin_React0.14.6_AMD is the new project (latest React 0.14.6 and using AMD)
Yeah, this work fine: http://jsfiddle.net/9kungxn4/2/. What does this mean?
Let's start teaching people the right patterns.
I reimplement this using Proxy.
After using react for a while I came up with a strange idea to support some kind of cascading props.
cascading prop
cascading prop
> I know all of it looks very much like some kind of mad antipattern, but I would like to hear why, besides obvious performance isssues.
As I said, interface / API design is the hard part, the open challenge. In general changing the implementation _shouldn't_ affect the interface, so you should think really hard how you design it. Furthermore, when you think this occurs quite often, challenge your assumptions about your component: Why did you need to change your interface? Have you really isolated a single component for one purpose or does it serve more than one purpose? How would the ideal API look like? ...
--Auntie
I feel a bit dumb but I don't understand how controlling props of a component from grandparent differs from controlling the same props from parent if in a corresponding use case I will have to expose those props through parent or through context anyways.
(Ôºç‚Ä∏·Éö) thanks! The PR has been updated to fix linting.
:tada: :confetti_ball:
After, only these remain as non-null:
@gaearon, I guess it just felt hacky and was looking for a "blessed" way to deal with this. I think `e.persist()` might be it. I'll check it out. Thanks @jimfb!
npm ERR! 404
See https://jsfiddle.net/c1ht6zwm/3/
foo: undefined
foo: undefined
Exmaple.js
jest output.
Using Jest CLI v0.8.2, jasmine1
"jest-cli": "^0.8.2",
raw     gz Sizes
raw     gz Compared to inject-owner @
raw     gz Compared to last run
https://react.jsbin.com/ziwepazewu
`document.documentMode` is `undefined`
I thought I had narrowed the problem down to being in a regular Chrome window as opposed to an incognito window, but the problem seems to be intermittent.
This results in an error:
npm ERR! Darwin 15.3.0
npm ERR!
npm ERR! If you need help, you may report this error at:
Though if it's issue with peer deps why it returns SO weird error **`npm ERR! Cannot read property 'react' of undefined`**.
@zpao thanks a lot!
@zpao is it customary to put `[ci skip]` on a commit like this? If so, let me know and I can repush if needed.
bar: PropTypes.number,
baz: PropTypes.bool.isRequired
bar: PropTypes.number,
baz: PropTypes.bool
baz: PropTypes.bool
(client) bjtkxdeayo.0.0.0.0.$/=10">
(server) bjtkxdeayo.0.0.0.0.$=10">
@romaingweb we don't use react-css-modules, our problem came after using implementing server side authorization.
Test: https://jsfiddle.net/69z2wepo/28714/
Jan Jaap
repo, but it moved to the react-magic one a while back.
LGTM.
Squashed.
@zpao - LGTM.
ping!
I think this is a really tricky subject. React supporting non-attribute properties plays badly with SSR (not that you can avoid it) and it opens up a whole new area of _what else_. A redeeming factor here is that it is at least local to `ReactDOMInput` and not a special-case in `HTMLDOMPropertyConfig`, but shouldn't we then also support all the other properties `audio`, `video`, etc has? But that seems contrary to certain previous discussions and will certainly significantly affect the size of the React codebase.
I agree that is tricky :) I thought that this case in particular was a good one to discuss that line a bit, and explore some of the issues and possibilities.
### [Second method](https://jsfiddle.net/69z2wepo/28596/)
Now using es6
LGTM.
@qingweibinary I'm having a similar issue, were you ever able to figure it out?
@yaycmyk
cc @vjeux
Other option may be still using deprecated behaviour in falsy values, if is decided that, i can send a fix displaying a warning when `0` is assigned in a timeout
@gaearon It's a while ago now... But I think I just put 0 it in to disable transitions while I was experimenting and got different behaviour without a warning. Or perhaps I put one of the transitions to '0' to document that I was aware of the prop but wanted to disable it. To be honest I can't really remember what this is about. Either way the issue is not a use case as such, just a minor inconsistency as mentioned in #5873.
get a different key (with a slash in front) even though the two
cc @spicyj
First I know this is an anti-pattern so please forgive me. I was doing something like this recently but noticed that on the first render the `this.state.origValue` was `undefined`:
cc @spicyj
Why does renderToStaticMarkup outputs "className" in the markup for "CustomComponent" (hyphenated tag-names)?
React.renderToStaticMarkup(React.createElement('my-div', {className: 'bobi'}));
<my-div className="bobi"></my-div>
<my-div class="bobi"></my-div>
Using [SmallGrid](https://github.com/Tjorriemorrie/react-smallgrid):
gives the error:
@graue I'd be interested in a code snippet how you did that.
@jimfb @spicyj let me know if there is something else I can do to improve my PR or if I should look for another solution. Thanks :)
@jimfb @spicyj Hey, guys, can I have some kind of a hint, please? It seems like I really stuck here but there is no way I want to give up.
@SimenB Yes, it will cause double rendering.
@gaearon unfortunately I'm not very familiar with the internals of React. I was more hoping that someone with a good understanding of React's internals would draw inspiration from the lib I linked.
@gaearon Thanks for the links https://github.com/facebook/react/pull/5753 does look like something I can work with. Hopefully I will have time at some point to give this a shot.
Thanks for the feedback @zpao  @brigand, makes perfect sense! If either of you have the time do you have and feedback on the way I implemented this? I'm haven't been writing JS for too long and would love any feedback on the code itself.
For better or for worse the aria, and a11y API's in the browser are heavily based on using ID's to link components together. `aria-labelledby`, `aria-describedby`, `aria-owns`,`aria-activedescendent`, and so on all need's ID's. In a different world we would just generate ids where needed and move on, however server-side rendering makes that complicated, because any generated ID is going to cause a mismatch between client/server.
- unique
Seems it's gotten a bit beyond that now :)
@jquense Then simply write a UID generator function that returns the same value on the server or the client.
return btoa(this.constructor.name);
return btoa(inst.constructor.name) + idCounter++;
Sorry if this comment is ignorant.  I'm a bit of a noob, but if the key path is always unique and immutable, would we need a counter at all?  So, in short:
@syranide i've sent a commit displaying the owner's name in the warning
@gaearon Sure, I will fix it.
@gaearon Sorry for that, I just pressed the wrong button :-). Now it should be fine.
@zpao Hello, what do you think about the following approach?
2526.111 Safari/537.36"
+-- babel-preset-react@6.3.13
Thanks for the reply, @Ghiblian. If this is expected behavior, I'd suggest that the docs be updated to both specify what the difference is and what the expected behavior is. To someone that's new to React like myself, the difference _itself_ isn't clear, let alone the difference in expected behavior. What do you think?
Haha. This LGTM @zpao.
http://codepen.io/moodysalem/pen/obeWRr?editors=001
- windows 7 x64 ru_RU
http://jsfiddle.net/vmvrphjn/
> stopPropagation does not prevent the browser from responding to an event: http://jsfiddle.net/rajo091h/
Please refer to the following fiddle.
https://jsfiddle.net/koba04/9mdse5h9/
This constitutes a potential memory leak, yeah?
@zpao They don't bubble, so attaching listeners directly seems like the proper way.
React warns:
I like that new hack. Much better. Thanks.
Anything? Even a simple note? :P
I can vouch that understanding the synthetic event system took quite some time.
Why would we need to have a magicnum that is unique among other frameworks?
@yaycmyk The idea is something that can't be JSON serialized, to avoid inadvertent XSS if, say, a server responds with something that [looks like a React Element](https://github.com/facebook/react/pull/4832#issue-105737469).
a ' should've been escaped
which doesn't look right.
onTouchStart fire extremely slow in ios9.2'safari.slow then onClick.  is this a bug?
this alert will show very slow after i touch [div] element on screen on  ios9.2'safari  , but,other browser like chrome perform normally.
planJavascript(https://jsfiddle.net/n5furn55/6/)
it seems as a safari problem, but, is anybody could explain why it's so slow to trigger a touchstart on safari, and how to solve this problem
@enriquetuya
@gaearon
hi guys,it's seems not because safari 'trigger' touchstart slow,but 'alert' slow. i don't know why.
<.img onError={handleThis} /> the argument somethingElse will have things I don't expect like a string with this content ".2.2.$1.$e=1e925dd08ffdee5af4825d9d9c632a655"
event.__SECRET_DOM_DO_NOT_ADD_RANDOM_UNEXPECTED_ARGUMENTS_TO_EVENTS_OR_YOU_WILL_BE_FIRED
https://jsfiddle.net/w5b2as77/
The culprit here is my a-synchronous setState() call - remove the setTimeout() and it works properly. However it is React that breaks this: the browsers can handle a-sync updates just fine without React:
###### 3) Changing data
@yangshun may be, try it soon. Thanks!
Simulate
- \* `babylon`: [#3225](https://github.com/babel/babel/pull/3225) throw parse error if class properties do not have a semicolon.
(we're using the node coding style https://docs.npmjs.com/misc/coding-style)
@zpao :+1:
https://jsfiddle.net/r4y5kdoq/6/
var el = (
return el;
https://jsfiddle.net/r4y5kdoq/7/
var el = (
return el;
I think this is another issue.
//***React state with life cycle is stateless sequence*****
seq: val
return el;
http://sakurafunctional.github.io/demo/react-physics/
https://github.com/sakurafunctional/sakurafunctional.github.io/blob/master/demo/react-physics/index.jsx
@yaycmyk: browser detection wouldn't be a solution here besides the fact that browser detection shouldn't be done unless there is no other way.
Thanks for clarification @cmpis.  @syranide I hear you, this is a deal breaker indeed.  I didn't realize React was doing the node.style.key= value thingie.  I thought it was a parse-time kind of a thing.  That being said, there must be another way to accomplish this because the only alternative I can think of would be to add/remove classes in jQuery fashion. Ouch!
@graue
(Emphasis mine.) _Hopefully_, but until then there's some risk involved in using it and it's worth considering whether that's something you want to encourage users to do. In that case I would suggest that you consider including a note mentioning that.
@zpao
React Shallow Render Issues
React Shallow Render Issues
React Shallow Render Issues
React Shallow Render Issues
**AND**, the 4th section is inserted with `this.setState{ sections: someArray }` and all these section is using `dangerouslySetInnerHTML`. **There is no any warning or error in console**
@zpao what you said inspired me a lot, thanks.
So hack....seems ok when I try `key={slide + i}`, which makes html so so ugly.
To work around the possible problem as @zpao said, I try to use a uuid as the `key` of every slide:
Then the issue occurs, the actual DOM order is ridiculously different with the `temp` array, the `store` state, also the VDOM showed by react-devtool.
God...save me please!
Regardless, there is definitely a disconnect in how `componentWillReceiveProps` works, as logged here: https://github.com/facebook/react/issues/5756#issuecomment-168873198
Code: http://jsbin.com/gutagazaxa/1/edit?html,js,output
@zpao I guess I'm still a little unclear.. are you saying `this.props` in the constructor intentionally has a different value than `this.props` in `render()`? Thanks in advance
So, having a clean and clear way to compose Containers is important for me. That's why I created [react-komposer](https://github.com/kadirahq/react-komposer).
import I18n from 'i18n-js';
const a = I18n.t(...);
Thank you @zpao
Related to Yomguithereal/react-blessed#43.
@ickata You use Babel in the first example. What do you use in the 2nd example to transpile the JSX? Both are at least different, isn't that an explanation for your problem?
@ickata It does. So you use two different tools, so different behavior might be caused by the difference between the tools.
Hi @ickata, I will try to reproduce it. Just like you, I've only used the Babel and JSX transpilers as a consumer, so I am not aware of the internals and differences. But I hope I can help you with this.
This is an issue with babel. You can report it [here](https://phabricator.babeljs.io/).
@ickata you can identify core members by the "Collaborator" or "Owner" label in the top right corner of their message.
@ickata BTW I had made tool which you can use to proptotype with JSX. Just include the JSX files as normal scripts (doesn't support inline scripts though). - https://github.com/satya164/quik
ctxApi(this)
@dralletje Side note, you probably want some more complexity in the disposable for the xhr.
Missing properties ‚Äî `refX`, `refY`, `markerUnits`, `orient`
> www.tusharm.com
As of now I am using `dangerouslySetInnerHTML` :(
Which seems pretty dangerous to me.
Of course I am not advocating bypassing state + props entirely in favour of doing Ajax calls.
The issue you can have when going into the other extreme is that your state object is littered with all kinds of variables that only make sense for 1 component class in your app, and if you have hundreds of those you'll end up with a state containing hundreds of properties that have a very small scope or even life time (imagine rendering a popup that only shows some useful information after registering an account, do you really want an application state property for the info inside that popup polluting your code when it is used only one time in the entire lifecycle of your app, in 1 popup?), and will spend 99.9% of their time simply being `== null`
@spicyj, I don't know what I was thinking, you're right. Sorry for the confusion.
</Scalable>
@spicyj I really appreciate the feedback. The only thing I have trouble understanding is the ReactDefaultPerf failure https://travis-ci.org/facebook/react/jobs/101760702#L224
cc: @jimfb @spicyj @syranide
- try and address each edge case directly
I'd also love any thoughts from ppl more familiar with Safari, in case I'm missing any trick here.
As per the code review comments in #5744 , I am using the `fb.me` URLs instead of StackOverflow URLs. But the comments over there also mentioned that the PR might break some test cases. I am not sure about the edge cases here.
Here is [JSBin example](http://jsbin.com/kitinaboca/edit?html,js,output) with reproducible issue
@gaearon Thanks for getting back to this. Actually, the entire reason I made the PR was to highlight the `(array, index)` part of the method signature, which is different compared to the normal custom validator.
@gaearon per your comments, I've reworked it a little bit.
@gaearon I think I might have done that slightly wrong - how to I avoid having to re-merge into myself after the rebase?
@gaearon That did it! Thanks :+1:
When I viewed a React class in the javascript debugger while working with application code, the following comment is among the first lines returned and it caused some confusion:
Jameer Khan
@shastings86 care to elaborate? Also, please watch your attitude; at first glance, your comment appears to be very negative and not constructive - which is not the type of community we want to foster.
code example and output [jsbin example](https://jsbin.com/xuluviyufo/3/edit?js,console)
class BuggyBehavior extends Component {
<BuggyBehavior key={this.state.uid} />
_(If you've recently upgraded to OSX El Capitan you may need to [reinstall Ruby](https://gorails.com/setup/osx/10.11-el-capitan))_
Once the jest tests are run you can add a line to the travis.yml
I'd be interested to know the steps when you get to it. I tried setting up Babel + Jest for coverage and the line numbers were all wrong / nothing matched up properly.
@cpojer wouldn't that create a restriction that your production code can only use whatever transformation tools are supported by Jest? I get that Jest needs to play some part in the bundling process, but maybe it should just be instructing a loader on what to bundle, rather than doing the actual bundling and transforming itself? Articles like [this one](https://www.jumpingbean.co.za/blogs/mark/jest-babel-unit-tests-es2015-syntax) are an example of how Jest can make it hard to write production code with newer JS features that aren't supported by Jest.
Everything works fine on my Firefox(43.0.1), and the the [Minified version](https://jsfiddle.net/sy7eja68/1/) works fine on my IE 11, and Edge(13).
This looks wrong to me too:
that would be better if we have it in ShallowRendering for Acceptance Test.
It's also confusing that there's an `shallowRenderer.unmount()` method which will call `componentWillUnmount()`. One likely assumes that `componentWillUnmount()` will always be called after `componentDidMount()`.
And of coure, double escaping all the `\` works but becomes _impossible_ to read or write:
Related and conflicts with #5685
@zpao how should we proceed? I'd be happy to make any necessary changes for this.
- Image crushing in prod
- Minification in prod
This playground is up-to-date with this change: https://jsbin.com/tobuye/edit?html,js,output
As evidenced [in this example](https://jsbin.com/nejucahulu/1/edit?html,js,console,output), Chrome/FF/Safari all display the "defaultValue" in lieu of an unset value in both <input> and <textarea> elements. Internet Explorer (9/10/11) will display the defaultValue on <input> elements, but leaves <textarea> blank. In any case, all browsers reset the elements to the correct value after a reset.
This is probably a question / documentation issue.
var Aquarium = ({species}) => (
</Tank>
I think in  ELM or Om this is applied by default to all the tree and works pretty well.
https://jsfiddle.net/giltig/a6ehwonv/28/
my code:
https://jsfiddle.net/qmkqd7u6/3/
@yangshun
And we can always add `Question` label to issues
diverge from implementation
I got some cyclic dependency error.
Finally, I did this hack:
Asset     Size  Chunks             Chunk Names
Asset     Size  Chunks             Chunk Names
There are a few things I find bothersome with the lifecycle method names:
4. `shouldComponentUpdate` <- :confused:
@Pomax it's replaced by babel https://babeljs.io/
Hi @gaearon , yes, I will. All my react components rely on `react`, no matter it is `react` or `react/addons`. It is simply to add the separated add-on modules in the future.
Here's a simple test of the patch on JSBin: https://jsbin.com/yagasi/edit?js,output
@yaycmyk Thanks, fixed.
I built an alternate approach and opened a pull request via #5680. Both are functional and it's a matter of style to pick between these two.
I've noticed that calls to the `warning()` function often is wrapped in a `if (__DEV__)` conditional, which will be compiled down to redundant `"development" !== 'production'` gates in the build process. E.g. this code from `EventPropagators.js`...
'Dispatching inst must not be null'
And it may not seem evident to someone thinking that they're just functions...
<p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Morbi fermentum congue lectus, at imperdiet odio dictum sit amet.</p>
<li>Nulla leo nulla, porta in tortor in.</li>
<li>Nulla purus turpis, lobortis at viverra id.</li>
So what exactly is the best approach to solving this? Contexts? Deal with the cloning issue? Any advice would be appreciated.
Oh yes, I did :trollface:
On a related note, the docs should probably be changed, as "Invoked when a component is receiving new props." is a bit misleading.
@zpao I must have missed that! My intention was to separate webpack and browserify instructions because a few students (using webpack) I have pointed to this page have been confused over what commands to run.
Thanks! I didn't expect you to merge this hacky code, it was mostly to open up the discussion a bit. This issue makes stateless components pretty annoying to work with
@gaearon, that's a good idea, I've added a dedicated invariant for arrays. I've also re-checked the original behaviour with null values, and it turns out that it always led to type errors ("Cannot convert undefined or null to object"), so there's no real breaking change here.
https://jsfiddle.net/pv0vp44q/
/* custom styles global */
abbr {
strong {
@liesislukas
Radium seems to suggest falling back to creating styles for pseudo-elements, I was curious if they had come up with a solution: https://github.com/FormidableLabs/radium/issues/243
Arrow function syntax is suggested in the [docs](https://facebook.github.io/react/docs/reusable-components.html), but components declared using it don't have a proper name (say in react-dev-tools), `StatelessComponent` is used instead. I guess this could be an issue when debugging?
**Question**: Is there a pattern for JSX attributes? If yes, why `aria-*` does not follow this pattern?
I understand that this could be the expected behavior, but I'm just trying to understand why the patterns are different for aria and svg.
I think the `aria-*` is considered custom attributes. There is a section about it on the [jsx-gotchas](http://facebook.github.io/react/docs/jsx-gotchas.html#custom-html-attributes) page.
Just to reinforce this, here's where React checks for custom attributes (either `data-*` or `aria-*`):
https://jsfiddle.net/up8j9aqz/1/
(Unfortunately that _does_ mean that otto isn't fully compatible with
negative lookahead by matching any sequence of slash characters and then
@zpao Firefox does not have the same issue, React dev tools can be loaded over `file://`, hence the message will not be shown on Firefox browsers.
In particular, I think saying 'JSX elements for buildin DOM nodes' might be confusing, so have provided another third party link that I think explains it concisely.
When referring to mixin, the rest of the comment is in lowercase; see line 36 and line 37.
@gaearon's use-case is my own as well.  With component playgrounds, it's easy for fixtures to be passed into a `render()` and generate an error, often making recovery require a refresh.
`<input placeholder="podaj warto≈õƒá" onInput="javascript: alert('test');">`
a second time with a different context.
@spicyj I don't know if this is a regression, only recently started using React.
children: PropTypes.node.isRequired
I agree, it's unclear. Since I posted this issue I've found [reagent](https://github.com/airbnb/reagent) which solved my problems.
In general `setState` isn't evaluated until before the next "render" but in this case `setState` calls immediately which is divergent behaviour from the normal usage of `setState`.
return <Foo
Again this is an oversimplification and what `Foo` might be doing is dumb but `react` still shouldn't call `render` immediately after `setState` in the same reconciliation cycle.
@mikkoh Did you find a workaround?
@spicyj `setState` was not being called called in `componentDidMount` or `componentDidUpdate` but rather in a callback that resulted/was called because a component being rendered.
return <Foo
It outputs `cancel(), setState()` contrary to what some would expect (`cancel(), isCanceled`)
return {icones:{
c.setState({icones:{
{icones}
<Portal>
w/babel 6.4.5 this works for me:
$ babel --version
## Gecko
E.g. Epiphany.
@gaearon nope, it has become not so important for me
@zpao thanks for the feedback, do you guys plan to add some kind of autobind to `React.Component`? Is there a standard that you guys are following for binding handlers?
{/* class is a reserved word, so must ref this with className */}
<Thingy name="Thingy2" content="Bat in the Frat" />
<Thingy name="Thingy3" content="Sat in the Vat" />
{/* class is a reserved word, so must reference this with className */}
<Thingy name="Thingy2" content="Bat in the Frat" />
<Thingy name="Thingy3" content="Sat in the Vat" />
<Thingy name="Thingy2" content="Bat in the Frat" />
<Thingy name="Thingy3" content="Sat in the Vat" />
at BunserBuf.<anonymous> (/Users/star/Work/reactnative/node_modules/react-native/packager/react-packager/src/SocketInterface/SocketClient.js:52:42)
at BunserBuf.emit (events.js:169:7)
at doNTCallback0 (node.js:407:9)
@spicyj, per your comment on #5247, the test here covers checking that the state update went through.
> Patch Links:
What I find strange is that in most cases, the problem seems to revolve around the `style` attribute:
<div className="ScrollSpacer ScrollSpacerAfter" ref="spacerAfter" style={styleAfter} />
@zpao  Ok... weirdest bug ever!
So, it's not React-Router either. It's Nashorn, or my lack of understanding of Nashorn, or both.
I created a [sample project](https://github.com/download/react-server-side-rendering-on-nashorn-example) that demonstrates the issue. I think I now know how to work around the issue, so will do that tomorrow.  :)
[Here](https://github.com/Download/react-server-side-rendering-on-nashorn-example/blob/master/src/index.jsx) is the JS code that does routing and rendering (I added a simpler variation as well, which is how I found out about this):
[Here](https://github.com/Download/react-server-side-rendering-on-nashorn-example/blob/master/src/Issue5560.java) is the Java code that calls these script functions. It first does the render in two steps (determine route, if valid, render) and then again in a single step (just hardcoded render for route `'/'`).
Loading script: History.js
Notice the difference between the two props objects. I haven't dug into this much further, but it's changing shape dramatically. I must be doing something very wrong, but there are so little docs on Nashorn yet that I have no idea what I am doing wrong.
@zpao sure, I'll do that
I'm quite a novice in JavaScript and React so I might be missing some obvious points, hopefully not.
(P.S. Sorry for any ambiguousness, English is not my native language... :smile:)
> Flux pattern is one of the possible ways to arrange this.
Thanks for the extra info @bouk.
<BootstrapPagination
@SegFaultx64 I've been playing [with a wrapper](https://github.com/staxmanade/react-component-errors) that helps with react errors.
@gaearon OK I added the lines and I managed to also reproduce the error. [Here you can find the console log](https://dl.dropboxusercontent.com/u/7686719/log.txt).
- Single Child belongs to Prop Validation, so it was moved there.
super(props, children);
@spicyj yes that helps.
I suggest it's because of the dom diff algrithom , so is there a way to update details in a dom???
In 0.14 sometimes (i dont know exactly when but event without `toArray`) i got even weirder keys when i parsing children. ex.: "foo" => "foo/.$foo"
Okay, thanks @spicyj !
All the tutorial in the various languages have been updated.
`ui-library/foo.js`
`mocha` now crashes with the following output:
Am I doing something wrong or is this a bug?
So JSX is converting the entity to the unicode character?
@omuryolcu In the past, this has been because something else on the page is stealing focus.
@yaycmyk hey Evan,
Hey Paul! @zpao
/cc @LeZuse
cc @syranide
This is an attempt at fixing #2461
We worked on this PR together with @LeZuse
// (or fragment) containing these types.
ko-KR:
zh-CN:
Could you guys help a bit? @minwe @marocchino @claudiopro
Awesome, thanks @claudiopro!
<div data-reactid=".1pkvjeqnim8" data-react-checksum="1620646673">
<div data-reactid=".1pkvjeqnim8.0"></div>
If `undefined` is used as the key, the result is the latter above.
import _ from 'lodash';
from @mkonicek
https://jsfiddle.net/u9rd10ab/
@zpao Why is this something that you want to support?
https://github.com/Daniel15/babel-standalone
Also - is there an alternative to babel-browser that works a lot like it used to?
Am I missing something basic here? Pretty weird issue!
2. git checkout joan
@syranide - good spot. Strange given it has the '^' caret.
You point me to a Nashorn specific topic, but isn't this an issue for all platforms that do not support `require`? So in effect all platforms but Node JS?
Why the need to make this so difficult.
Here is my test case using Jasmine...
@andrewheppner Spying on a private function is kind of weird. Are you using jasmine? This is how we do the same kind of thing on our team. Maybe it will fix your problem?
const clearAllSelectedCategoriesSpy = jasmine.createSpy('clearAllSelectedCategoriesSpy')
Jorge
@zpao sure. I'll revisit this on Monday
@chicoxyzzy compilerHost is needed, in this particular case, in order to tell compiler API how to retrieve file contents by name etc., and in this particular case it's used in order to provide React libs from real files as well as contents being compiled in form of a "virtual file".
‚óè Runtime Error
`iff` can mean "if and only if". It might not be a typo...
That is not something you use in everyday language. Also it is now what the author intended to say here - check out the `canTriggerTransfer` method.
@gaearon That's OK!
The code
dead Link
Is this intended or am I just doing something strange?
@zpao thanks. I actually wasn't certain if there was maybe a special case on the root node, or perhaps if calling setState from outside the element somehow triggered this. Can't extract out a simple test case as it's part of a bigger system, so I may just have to step through on my own on this.
@nvartolomei Look at the ES6 promise spec.
> calling setState as the result of a promise is a bit of an anti-pattern anyway, since it can cause race conditions which won't necessarily show up in testing
I agree. Instead of simply checking if the component is still mounted when we receive the promise result we have to resort to all kinds of magic so we can "unbind" our promise from the component it's supposed to set its result in, clearly fighting against the way promises are designed.
@istarkov nice pattern, like it! Here is slightly altered API for it:
@istarkov not sure if this was intentional but your `makeCancelable` does not handle if the original promise fails. When the original promise is rejected, no handler gets called.
This does not seem ideal because you may still want to handle an error on the original promise.
@vpontis :+1:
Why do I get an error (`Uncaught TypeError: Cannot read property 'someProperty' of null`) when I don't call `this.setState()` before the initial render?
Thank you, @fkling
Ok, good. I'm just unsure if repository": "facebook/react" is sufficient, or if it should be prefixed with github: ?
I'm on React 0.14.0.
It seems there's been a mistake in https://github.com/facebook/react/pull/5385 and that `docs/docs/10.3-class-name-manipulation.md` was edited instead of `docs/docs/10.3-class-name-manipulation.ko-KR.md`
> Ïù¥ Î™®ÎìàÏùÄ Ïù¥Ï†ú JedWatson/classnamesÏóê ÎèÖÎ¶ΩÏ†ÅÏúºÎ°ú ÏûàÍ≥† ReactÏôÄ Í¥ÄÎ†®ÏóÜÏäµÎãàÎã§. Í∑∏Îü¨ÎØÄÎ°ú Ïù¥ Ïï†ÎìúÏò®ÏùÄ Ï†úÍ±∞Îê† ÏòàÏ†ïÏûÖÎãàÎã§.
is too verbose.
I was thrown off by this behavior, figured it warranted an issue.
- Types
at /var/folders/br/b9kks4y50qvfl_1cr22jj1_c0000gn/T/7fc1a283a49574bce1059aa1c5f740be.browserify:20380 <- node_modules/react/lib/ReactRef.js:42:0
at ReactMount__renderNewRootComponent (/var/folders/br/b9kks4y50qvfl_1cr22jj1_c0000gn/T/7fc1a283a49574bce1059aa1c5f740be.browserify:19637 <- node_modules/react/lib/ReactPerf.js:67:0)
at /var/folders/br/b9kks4y50qvfl_1cr22jj1_c0000gn/T/7fc1a283a49574bce1059aa1c5f740be.browserify:18419 <- node_modules/react/lib/ReactMount.js:551:0
at /var/folders/br/b9kks4y50qvfl_1cr22jj1_c0000gn/T/7fc1a283a49574bce1059aa1c5f740be.browserify:18439 <- node_modules/react/lib/ReactMount.js:571:0
And here's my test -- using jasmine, karma, and phantomjs.
``` coffeescript
propTypes:
else
``` coffeescript
Am I doing something wrong?
Even further, this is not only using React.render, if the components below doesn't have state neither any props, and we just try to rerender the same instance with a forceUpdate or setState for example, the rendering is skipped, look:
@spicyj it is not, it was just a hard time to find out that this change was the cause
This code: https://jsfiddle.net/alansouzati/2f9p4ngp/ works in the first load. After the state is updated there is the following error in the console:
I'm not sure if this is an actual issue with React, but I could not understand why the first time works and the second time fails.
Well it works fine if you have `<title><span>hi</span></title>` inside svg, not inside div. check this fiddle: https://jsfiddle.net/alansouzati/oh8z7px4/
I don't understand why this was closed, @MalucoMarinero weren't you saying that you were seeing the parent's `componentDidUpdate` get called before a ref to its child got resolved?  If so that would mean there's a bug and the behavior doesn't match the invariant @spicyj described.
Argh...it seems that there is some weird and complex interaction between `react-router` and `react-redux` that is causing the issue for me...an ancestor of the ref parent was dispatching a redux action when it received a new `query` from the router, which causes new props to be passed down from redux state -- all within the same event on the event queue.  What's happening in this case is that `componentWillReceiveProps` is getting called multiple times before `componentDidUpdate`...and then the refs are not resolving until after `componentDidUpdate`.  Wrapping the dispatch in a `setTimeout` prevented this from happening.
@zpao what do you think?
I am sorry, my English is not good.
showError = jasmine.createSpy('showError')
clearError = jasmine.createSpy('clearError')
onComplete = jasmine.createSpy('onComplete')
(`TestChild` has to be a custom component, otherwise `this.refs.testChild` only returns a DOM node instead of a component instance.)
this.setState(state)    // bad case emerged
gulp-babel 6.1.0
@yangshun I have thought this before, but i don't know how to monitor the change of state, because the data read from props and `handleRemove(param)` which is call an external API. (If do this with local state is easily, but that data is dynamic.)
I was meaning about add warring in isMounted, that it is not the best way.
In ES6 I can write:
as a shorthand for:
as a shorthand for:
as a shorthand for:
- cdn / react-dom
- cdn / react-dom.min
Just a wild suggestion, even though it may not apply explicitly to react.
@spicyj Made the changes, thanks!
(defaults to `span`)
Thanks for taking a look at this @gaearon!
</ReactTransitionGroup>
## Is this a breaking change?
## tldr
Just broke a keyboard or two on this bug:
React is loaded on the page as and shimmed in browserify (could that come from there as well ? )
Closing the issue, problem was exotic browserify setup, not React.
2. Mobile friendly
3. More vibrant color theme.
I do not remember signing on to any Contributor License Agreement In Facebook. ¬†I would appreciate it very much if you can provide me with details as to when did ¬†the signing up happen, IP address and what device was used to sign up. Please enlighten me about this activity because I seriously think someone else, without my permission is doing this.¬†Thank you.Deo Larrijie O. GlovasaVirtual Administrative AssistantVirtual Dating Assistants (ViDA)+639281242567+1 (312) 789-4423---- On Thu, 05 Nov 2015 07:49:54 -0600  Facebook Community Botnotifications@github.com wrote ----Thank you for signing our Contributor License Agreement. We can now accept your code for this (and any) Facebook open source project. Thanks!‚ÄîReply to this email directly or view it on GitHub.
also some stuff is just unclear, like where to put the event listeners ?
Is this undocumented because it is unsupported and unstable behavior, or is it just missing from the documentation (as far as I can tell)?
@slorber feel free to ping me if you'll meet your issue again
https://jsfiddle.net/69z2wepo/19927/
LGTM :sunglasses:
:+1: LGTM
- Custom mount, which will not mark component as mounted (but it should not call `componentWillMount` then?)
- Another hack, which will not break previous tests
// ChildComponent
1) Is this React's intended behavior, and 2) should it be?
http://codepen.io/CreativeJuiz/pen/BiHzp
<div onClick={() => updateDateSelected(day)}> // <- onClick is DEVIL
deals: PropTypes.array,
stores: PropTypes.array,
I'm unsure what the large ammounts of computation/mutation could be.
Why can we have functions be children but not objects?
So, why functions but not objects?
Yes, I also feel weird for option to have a different order from others, then we have to call flattenChildren twice if value is omitted....
Just as before, only warn in getNativeProps
@jimfb add a flag to only warn in getNativeProps
npm ERR! git clone --template=/Users/guods/.npm/_git-remotes/_templates --mirror git://github.com/facebook/react.git /Users/guods/.npm/_git-remotes/git-github-com-facebook-react-git-baa2986b: github.com[0: 192.30.252.130]: errno=Operation timed out
npm ERR! Darwin 15.0.0
npm ERR! code 128
npm ERR!
npm ERR!
npm ERR!
npm ERR! If you need help, you may report this error at:
@spicyj thanks for the feedback! updated.
``` diff
+import { main } from "vdommy"
Or even more abstract since most vdom layers seem to share the same public api:
``` diff
return <i className="fa fa-spinner fa-spin" />;
And I got SyntaxError
npm ERR! not ok code 0
[nik@fedora tut]$
npm uninstall -g babel
sudo npm uninstall -g babel
ReferenceError: [BABEL] src/main.js: Unknown option: /media/files596/Programming/Examples-Web/React/tut/node_modules/react/react.js.Children
@zpao: I am just trying to follow Facebook's documentation. `$ browserify -t [ babelify --presets [ react ] ] main.js -o bundle.js` from https://facebook.github.io/react/docs/getting-started.html does not work; I didn't know if you had any insights on this. Thank you for the response nonetheless.
npm install react react-dom babelify babel-preset-es2015 babel-preset-react
also compare_size was only file using snake_case so I renamed it
@zpao I'm sorry, forgot to check dates and times.
``` code
Can you please provide a jsfiddle/repro? I couldn't reproduce it (I may have misunderstood something..).
https://jsfiddle.net/69z2wepo/19608/
https://jsfiddle.net/69z2wepo/19610/
https://jsfiddle.net/69z2wepo/19612/
@spicyj Thank you too :)
It looks like Edge doesn't like that fakeNode isn't attached to the body.
Working with Edge under sufferance... But yes this fix works fine!
I realize these are edge cases but they seem perfectly valid to me.
@yaycmyk seems like a pointless overhead over `this.state = { /* the actual initial state */ }` :rose:
@yaycmyk I meant no offence :rose:
I'm just started learning React recently, and often found myself lost in the limbo when reading about Flux.
Is it a good solution? And should I abandon Flux?
Is there any reason why we should use Flux?
Huy
What's going on?
https://jsfiddle.net/varungupta85/xa1m0aLk/
http://jsfiddle.net/varungupta85/0a8kL003/
- fake pro:
- Designer friendly?
- cons:
- It encourage ugly deeply embedded code
@gaearon It's mostly an issue where you want to change the (whole) content inside the group altogether.
super({
name: 'pipo'
Here is the part of code:
<div className='form-group' ref='frowwmformb'>
Thanks for the grammar-monster link, I didn't know about it!
<option value="b">Banana</option>
When I select Banana
- selected="" is removed from Apple and added to Banana
https://jsfiddle.net/ow2cq9ok/
2. Shift+tab to Reset and press SpaceBar. This should, if I understand correctly, reset to Banana.
Hi Marco
The point is that not only screen reaers see the selection still on the last focused one, but keyboard focus does, too. So even without a screen reader, keyboard focus will show the last selected one, for example Bananas, when it should revert to Apple.
Feel free to file a bug, preferably with a testcase attached to it, in [https://bugzilla.mozilla.org](Bugzilla), product Core, component Widgets, and CC :marcoz (that's me). I won't be the one fixing the bug, but I can provide input if necessary and help colleagues.
press tab to focus on the combobox
use arrow keys to select banana
- At this point my screen-reader still reads "Banana"
press tab to go back to the combobox
Observe that combobox value went from "Apple" to "Candy" without passing through "Banana"
I propose an alternative syntax:
Warning message:
Potentially related to #3037
> Can we polyfill Nashorn with a module loader?
> Can we polyfill Nashorn with a module loader?
- This really isn't a Java/Nashorn dev vs browser/Node dev issue. There is a lot of long-term thinking that goes into how these modules are being broken down. A lot of code gets included for backwards compatibility but will be removed in the future. I don't think ReactDOM will contain everything required for ReactDOMServer in the future. I'm a huge fan of the Nashorn project. It has a long way to go but I'm also invested in seeing it succeed. It's also great to see a new JS engine built with such a unique perspective. There's a lot of potential there that doesn't exist in Node. That said, it's very new and lightly supported. The Nashorn community needs to accept that to a certain extent, there are a lot of existing patterns that still need to be followed if they want to support Node modules.
> The Nashorn community needs to accept that to a certain extent, there are a lot of existing patterns that still need to be followed if they want to support Node modules.
In order to use safari's pinned size tab icon, we need something like:
The test case I provided is based on the failure mentioned in #5292. Setting the component body directly still worked with the original `NoopInternalComponent`, and using simpler children didn't require the full fix - that's why the component is kind of unusual :)
Please take a look at this https://jsfiddle.net/pvtb9jbt/
@spicyj
It is not fixed.
Please check http://jsfiddle.net/lovedota/pvtb9jbt/
http://jsfiddle.net/d7pah7dv/
http://jsbin.com/qegiwuzara/edit?html,js,console,output
The updates to the unedited `<input>` elements can impact performance. [JS Bin](http://jsbin.com/vahofakiyo/edit?html,js,console,output) (same steps as before)
@zpao Can give me some direction on this?
I see a spread operator, a weird unicode checkmark in curly brackets...? What's with all the visual noise?
{ className: 'foo',
type: 'ul',
{ className: 'foo',
type: 'ul',
return NoopInternalChild(children);
return NoopInternalChild(children);
// NoopInternalChildren
and then use the earlier `NoopInternalChild`?
return NoopInternalChild(children);
mixins: [ValueMixin],
var className = "uinn ub-img umar-a " + this.props.iconClass;
return <div className="ub ub-ac uba umh4-5 bc-border uc-a3 umar-t1">
<div className=" uinput ub ub-f1 ub-ac">
<input placeholder={this.props.placeholder} type={this.props.type} className="ub-f1"
return <div className="ub ub-ac uba umh4-5 bc-border uc-a3 umar-t1">
<div className=" uinput ub ub-f1 ub-ac">
<input placeholder={this.props.placeholder} type={this.props.type} className="ub-f1"
mixins: [ValueMixin],
var className = "uinn ub-img umar-a " + this.props.iconClass;
return <div className="ub ub-ac uba umh4-5 bc-border uc-a3 umar-t1">
<div className=" uinput ub ub-f1 ub-ac">
<input placeholder={this.props.placeholder} type={this.props.type} className="ub-f1"
return <div className="ub ub-ac uba umh4-5 bc-border uc-a3 umar-t1">
<div className=" uinput ub ub-f1 ub-ac">
<input placeholder={this.props.placeholder} type={this.props.type} className="ub-f1"
ValueMixin Code
Now I have two copies of react.
Oops - sorry @zpao.
I have code like this with babel:
Hmm, wicked. I've tried 14.4 and 14.6 with the same result. Either way, thanks for a quick answer!
An alternative that would work is `typeof ... !== 'undefined'` instead of ('__html' in ...).
@zertosh your approach sounds good. I'll follow this PR in case I can help with anything.
var newItems = [{¬†uniqueId: 2, value: "baz"}, {¬†uniqueId: 3, value: "bam"}];
update(value, {items: {$push: newItems}}); // [{¬†uniqueId: 1, value: "foo"}, {¬†uniqueId: 2, value: "baz"}, {¬†uniqueId: 3, value: "bam"}]
Please fix this
This is not a problem actually, but it is very strange for me )
I tried to change the check a little bit:
super(props)
https://jsfiddle.net/yiminghe/nc70bv0t/1/
@jimfb Rebased.
kind="subtitles"
maybe key?
@tlightsky ~~I don't think so as I don't even get a warning about that. Just tried with a key'd wrapper, still nothing :(~~
Now, it might be an issue with Material UI (although they really seem to use the componentWillAppear hook correctly)
cc @yungsters, @josephsavona, @yuzhi to get some Relay eyes on this.
There's lots of potential culprits here
here is my code.
return <div onClick={this.alert} style={style}>bbbbcc</div>
return <div onClick={this.alert} style={style}>bbbbcc</div>
Although, I wasnt aware you had to do anything special, but, I guess the question is if there is anything else in your code that was required for 0.13.x that is now redundant but possibly screwing with something?
http://f2e.developer.163.com/ybduan/react/index.html
<div className="u-like" ref="dom">
Hmm, that is odd, does `onClickCapture` work the 'normal' react way?
Just in case its some weird thing with capture phase on that device
@uncinimichel  I don`t think it is a bug of react, but it should be warded indeedly.
@zpao That it is great! Thanks
how is that possible?
that's another horror story by itself :)
then i turned on warnings in firebug
Is there something special that I should be doing to ensure that the dangerouslySetInnerHTML does not cause a difference in the checksum?
I guess I now understand part of the motivation behind the name `dangerouslySetInnerHTML`
Maybe I'm suggesting something crazy. I'm not sure.
Sorry it took so long, guys. I have no idea how to test this range \u10000-\uEFFFF but everything else seems to be working.
Uncaught DOMException: Failed to execute 'setAttribute' on 'Element': 'data-üò¨' is not a valid attribute name.
Thsnkyou so much
@vjeux it was so awkward before
@zpao thank you very much!
Hey @gaearon , thanks for all the awesome work improving React's handling of SVG's. I'm running into an issue where it doesn't appear my startOffset is making it through to the dom:
@spicyj Will do the same.
@spicyj  No need to be sorry, thanks for your help on the PR.
But at the same time what  about the line
‚óè BoolField ‚Ä∫ it does something
Is it an issue with react or jest?
No problem! I forget specifics on this, but lately I've been using Enzyme and it's been stellar!
Major changes :
subj
I believe this is a Safari hack? I'm seeing `putListener` get out of control, even for elements that haven't updated (they've rerendered, but no change was necessary to the DOM).
After reading this thread, these are the things I am led to believe:
- my app is probably slow because of something else entirely (:grey_question:)
@spicyj @zpao @gaearon any insights?
It would be great if this were compatible with `wiredep` since a lot of people use this with bower.
https://github.com/taptapship/wiredep
‚óè Runtime Error
So, @cpojer like @zpao said, there are symptoms here. But this is seeming to be a deep jest issue. Should I migrate this issue to the jest repo? do you have one already?
Why @titoBouzout solution not implemented in react?
@jimfb @titoBouzout , Thank you! It's my understanding fault.
this happens in meteor, however I'm almost positive I did not have 2 versions of react (not sure how I could check that)
Something more like:
Mb there is a nice way (not hacky) to deal with it right now and I'm missing something?
Major changes :
Thanks for your help @gaearon @jimfb !
I'm still quite new to React, but I guess this is a bug in the React framework introduced in 0.14. Seems like all listeners attached with JSX are broken in native Android browser for Android LTE 4.3, when compiling code with NODE_ENV development. Everything works fine with NODE_ENV production compilation.
A couple of specific questions I had:
@tomduncalf Awesome!
<input type="password" />
This addon is kinda classSet on steroids.
@jimbolla `React.PropTypes.node` I believe is the closest one, it means anything renderable.
@yaycmyk  That's not I'm looking for. `node` usage would look like this:
I feel that adding a new ‚Äúblessed‚Äù top-level API to work around a bundling / polyfill issue is a bit of an overkill. (By ‚Äúblessed‚Äù I mean something like `elementFromObject`.)
Perhaps, and it might lead to some confusion in the future - but it would be nice for other (non-babel) tooling in the future, like cljs, that wants to benefit from using raw objects.
Babel helpers have this interesting desire to remain "pure", but I don't consider relying on a Symbol polyfill (and failing interop between a polyfill and native) to be pure. This seems to be the only long-term solution that will fix this for good.
https://jsfiddle.net/69z2wepo/17871/
Related to #5129 and #3105
2. Can you please point me to a doc that de-constructs the term "custom component" further into React terms?
This thread has other ideas, and it's not clear where this stands as it relates to the original problem.
https://jsfiddle.net/yiminghe/3h1o7mj5/1/
ping @spicyj
Is this good now @zpao?
super(props, context)
but I feel like this is actually wrong.
"babel": "^5.8.23",
"babel-core": "^5.8.25",
class Bar {
Produces this error:
‚îú‚îÄ‚îÄ babel-core@5.8.25
‚îú‚îÄ‚îÄ babel-loader@5.3.2
‚îú‚îÄ‚îÄ babel-plugin-eval@1.0.1
‚îú‚îÄ‚îÄ babel-plugin-member-expression-literals@1.0.1
‚îú‚îÄ‚îÄ babel-plugin-proto-to-assign@1.0.4
‚îú‚îÄ‚îÄ babel-plugin-undeclared-variables-check@1.0.2
‚îú‚îÄ‚îÄ babel-plugin-undefined-to-void@1.1.6
‚îú‚îÄ‚îÄ babel-runtime@5.8.25
‚îú‚îÄ‚îÄ react-imageloader@2.1.0
‚îÇ ‚îÇ ‚îî‚îÄ‚î¨ outlayer@1.4.2
‚îÇ ‚îÇ   ‚îî‚îÄ‚îÄ wolfy87-eventemitter@4.3.0
‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚î¨ jstransform@10.1.0
‚îÇ ‚îÇ   ‚îú‚îÄ‚îÄ ua-parser-js@0.7.9
‚îÇ ‚îî‚îÄ‚îÄ raf@3.1.0
iPad safari.
s/aldlkashl tony123345
<p> askdjgasjk </p>
what is the problem here ?
</my-custom-tag>
</my-custom-tag>
</my-custom-tag>
a = getFancyWidget();
@Radium
don't know why , but placing them like this worked:
@zpao i'll follow up with the CDNJS guys and try to piece together if something went wrong.
With all this said, there is this part of semver in the FAQ:
<text>Evgueni</text>
expect(ReactDOM.findDOMNode(findResults).innerHTML).toContain('Evgueni');
As I'm typing this I've noticed that this is using a custom component `TextField` when setting the ref, maybe this is the problem and could be a bug; assigning a ref to a custom component type? Note that `this.refs.name.getDOMNode()` works correctly albeit with the 0.14 warning.
@spicyj @m4tthumphrey  can you help me with this i facing same problem
'span',
@spicyj Looks like you have just fixed the `undefined` part. Still this issue remains right?
@spicyj Ping.
else
@spicyj Ping.
Yeah, I know it's really sketchy. It's seems to happen on a mouse event of some sort. Trying to figure out where, when and why.
@syranide I see, should I close issue then?
and fails to insert the circle.
Done @spicyj
`Templates` are really pointless without data binding. Two-way data binding is slow because the `Object.observe` polyfill (https://github.com/Polymer/observe-js) is slow. Also, two-way data binding is about code complexity and the fact that the more dependencies you have between between components, the bigger the complexity grows, as opposed to unidirectional data flow. `React`'s one-way data flow with immutable data structures has the potential to scale and be highly performant, especially if we think about large-scale applications and complex interactions between thousands of entities.
Even though the open-source community is looking both at `React` and `WebComponents`, in the end the developer experience is what matters most and drives adoption. No doubt standards are having their own place in this.
@sebmarkbage any thoughts?
@majorye if your intent was to get notifications there's a subscribe button in the top right of each issue.
// assume mixin is applied
``` diff
Both cases were hacky to work arounds since the Component held UI state for the node / children or rows. I am finding that components returning a single node is too limiting as it can lead to head scratching workarounds to try to unroll logic.
Perhaps not understanding what "key a set a fragment..." is supposed to mean.  Hopefully I'm not misreading this as a typo.
mocha 2.3.3
var sinon = require('sinon');
var expect = require('chai').expect;
this.nameSubmittedStub = sinon.stub();
Possibly a dupe of #4766
clicked on div!
Am I doing something wrong in here?
@ddaza Add a `true` to the end of that `window` listener to enable capture mode.
When porting non-JSX React code, e.g. CoffeeScript, to JSX and forgetting to remove unnecessary `createFactory` calls, the following warnings / errors are issued which (seemingly) are unrelated to the root cause:
### Repro
many other potential related issues show up.
- replace `bool` with `boolean`
This creates a clearly visible bottleneck if you have a large volume of children and when their parent gets quick re-renders.
super(props)
super(props)
background is shorthand for:
@gaearon Thanks for explaining the state of this addon, but would it be useful to make a note of it in documentation? Also, do you have any recommendations for alternatives to ReactTransitionGroup, or perhaps some context on what you use internally?
Note: I'm the author of Inferno.
templateType: Enum.TEXT,
Somewhat similar, but very different approach.
My intention was to make Inferno compatible and familiar to people using React, thus the API and lifecycle events ‚Äì I just took an approach that was tailored towards performance on the DOM (something that I've got a keen internet in for mobile web technologies). So, this is no dig at your work with React, If you guys hadn't come out with React and JSX, I doubt there'd be anywhere near as much interest in this stuff. So kudos to you there :)
I'm stretching here, but the same scenario arises if I am handling two different types of events that aren't grouped in a single callback, like a network response and a touch event. RN may batch these in the same event loop.
@spicyj Yeah, I noticed that. What I kind of want is a way to schedule a callback that is run when the pending-state queue is processed (at the same time the transactional `setState` callbacks are invoked):
@spicyj Am I right in assuming that when this commit lands in a release that packages like `react-art` will be broken due to them expecting `mountComponent` to take `rootID, transaction, context`, which is now `rootId, transaction, nativeParent, nativeContainerInfo, context`?
@spicyj Ah, okay, thanks!
onChange = jasmine.createSpy('onChange');
@spicyj
This is very confusing as code that works in one mode should still work in the other.
Logs
render World
render World
Logs only
render World
@sebmarkbage
react: https://jsfiddle.net/yiminghe/69z2wepo/17145/
@jimfb okiedokie, that's fair. Thanks!
@jimfb @dmatteo how would you request translated docs? Are they served based on request locale, or should they be requested directly? e.g. `http://localhost:4000/react/docs/getting-started-ja-JP.html`
@zpao sure, send my way!
(sorry if I went completely off-topic here)
@JaRail @spicyj That issue is #2585 and #4293. I gave a suggestion on how I think dealing with implicitly autofilled data should be handled in the first bug.
@spicyj Shouldn't #2872 get closed then?
It's possible this is actually an issue with babeljs, I'm not really sure.
cc @spicyj
@syranide @spicyj did this end up being an issue with Babel or React? I'm seeing the same warnings in IE9 using `0.14.0-rc1`
@spicyj will this currently have any negative effect on production code or is it only a warning in `NODE_ENV="development"`?
var Aquarium = (props) => {
class Aquarium extends React.Component {
I ran into a similar situation a couple of times: https://jsfiddle.net/gjf6u5of/2/
https://jsfiddle.net/69z2wepo/16991/
Yes, but imagine you have 10 components that use `Bar` (and `Bar` happens to throw sometimes). You have no idea which one of them passed these weird arguments to `Bar`.
One thing that is interesting to myself (and I suspect the community in general) is general React performance characteristics against itself and on real devices over time. While I care quite little about React versus Ember or Angular, I would love to see things like http://samsaffron.github.io/ember-performance/?ember=1.8.0 and https://meta.discourse.org/t/the-state-of-javascript-on-android-in-2015-is-poor/33889 being published with React information.
- Ampersand (no release date specified), latest: 3.0.6 (**Sep 22, 2015**)
@jonkoops - Yep, that's an old article and we're not planning on being the long-term keepers of these benchmarks since it's actually very time consuming to set these up and run the data. We were mostly hoping to spur some of the libraries like React to take performance seriously and publish some form of benchmarks so developers could compare the performance characteristics of each framework. Sadly, there hasn't been as much movement on this front as we'd hoped.
Is this still an open issue ?
This might be a dupe of #1509
super(props,context)
<App/>
References: yuanyan/boron#11, casesandberg/react-bounds#4.
Because `props` is a sealed object, consuming property can be expensive.
Something like that, we wanted to listent o clicks and if its inside an ul, if it was a part of the list, do something that I don't remember exactly.
<SomeNiceDropdownThatItsAnUl onClick={this.onClick}>
</SomeNiceDropdownThatItsAnUl>
@spicyj sounds good to me! I'll update the diff accordingly, thank you!
ACK
@gaearon does that work? Stateless components can also not set refs, or maybe that's just string refs?
Which is all to say that nothing is currently impossible with the current api, but what taion said:
> its less than ideal to not be able to treat components as just these opaque things, and instead have to think about whether or not they're functional
Played around with this a bit in a forked fiddle. This fix seems right to me too.
@zpao - rebased and squashed!
@jide You're effectively creating the children inside the calling `Container` so that's where the ref ends up, you need (and should) use the new ref style that @frederickfogerty shows. PS. But I'm not sure why you're doing it the way you are...
@jide Sorry about the confusion, I didn't realise `this.refs` was write-protected in React. I just use `this._inner = ref` myself.
JSFiddle: https://jsfiddle.net/hellosmithy/5pdujnfq/1/
I'm suggesting there should be a discussion on the best way to do it, escaping may not be it.
<div is="custom-elem" className="myClass" />
Having read the thread at https://github.com/facebook/react/issues/140 I can see why this direction was taken, but I think it raises inconsistencies and will make code harder to reason about. I really do think escaping is the more consistent and flexible option, and forces code to be explicit if it's breaking React convention. Would be interested to hear what your thoughts are.
+1 for Custom Elements support
However, reading @jimfb:
@jmfb:
Custom elements were a brilliant way to improve the readability of the DOM. Considering React users will spend a large amount of time inspecting the DOM with developer tools; a sane, readable DOM hierarchy has to be considered an important developer friendly feature. That it's been removed for the benefit of the Web Component crowd is incredibly frustrating.
@spicyj - there are a few issues with the React dev tools
@jimfb hmmm well I guess this comes down to difference of opinion but to me the escaping solution seems both more intuitive and more future-proof.
@syranide sorry I was trying to get the jsbin working and apparently it saved an incomplete change I had made.
### Workarounds
or a temporary variable (if the 'if body' is more complicated)
My roots as web developer lie in the **Razor Template Syntax** which allows to mix C# with HTML much like JSX does with JS and HTML. That's why I felt a strong connection towards React right from the first day, because mixing a programming language with HTML already felt so natural. Now the only gap left to feel as flexible as back in the old days (with Razor) is this very issue I try to address here in this post. I hope you consider my approach and make React even more awesome than it already is! :D
<TodoItem
<TodoFooter
if (todos.length) {
{for (todo of shownTodos) {
<TodoItem
<TodoFooter
As a developer it feels strange/inconsistent that something (ex. the 'if-statement') works in the root scope but not anymore when nested.
> As a developer it feels strange/inconsistent that something (ex. the 'if-statement') works in the root scope but not anymore when nested.
Would you be open to support es6 symbols in proptype?
@ffxsam A PR is running on #6377 -- I don't know what is the status, but it looks complete on our side. Maybe, it will be merged soon!
@jimbolla Why you need uglify in development mode? I suggest you disable uglify in dev mode and enable it in production mode.
Mind blown :open_mouth: Thanks a bunch!
@spicyj Totally works :D
but why is the number so high often?
Fiddle: http://react.jsbin.com/nopafa
So big mistake.... :(
Here is a complete list of my Babel options (for the server):
blacklist:    [
'strict',
ast:          false,
nonStandard:  true, //JSX and Flow
modules:      "amd",
experimental: true
cross-claim or counterclaim in a lawsuit) alleging that the Work
@chulkilee Did you send a mail to FB legals ? Did they answer you ? Because I do think too this is a really important concert anyone may face.
I'm learning React this week,it is absolutely right and elegance concept for internet.
That will be fit for  Contrast Display for multi-language. like en vs ko (can be 100%  precisely displayed as unified or split ).
This is the incriminated piece of code:
scritto:
"name": "Etienne Lemay",
"email": "etienne@heliom.ca"
"keywords": [
"jasmine-node": "2.0.0-beta4",
"test": "jasmine-node ./spec"
"shasum": "6c821d418caed4f8ed39424cf0fad36f03fb35c4",
"name": "EtienneLem",
"email": "etienne@heliom.ca"
"name": "EtienneLem",
"email": "etienne@heliom.ca"
"_shasum": "6c821d418caed4f8ed39424cf0fad36f03fb35c4",
TRIGGERED
TRIGGERED
<MyRoot>
</thead>
</MyRoot>
<div>Foo</div>
but then calling
Did I misunderstood what "wrap it in another (stateful) composite" means?
expect(foo, 'not to throw');
expect(foo, 'not to throw');
That's very interesting.
expect(foo, 'not to throw');
Being a POC I dont think it has all the functionality of the iOS bar, like tracking your route  through the app etc etc
https://github.com/mattstyles/poc-view
// call super
@syranide Yeah, I wrote that a little carelessly... it's actually completely wrong. I made the static property accessible from the instance. The only other way I see that provides the expected result is to alter the internal [[Prototype]] property. (which can decrease perf)
I'm confused why this warning appears because the "Previous style" and the "Mutated style" look exactly the same.
@zpao I'd prefer the `'NaN'` lie rather than the `null` lie. That would give me more clues to debug the potential issue.
> We can probably have shallowEqual treat two NaNs as the same.
Mutated style: {display: "block", width: "700px", height: {}, marginLeft: NaN, marginTop: -249}
The warning is caused by `marginLeft` being `NaN`.
http://jsbin.com/tojapukuxu/1/edit?html,js,output
<title>JS Bin</title>
It's a weird one - it seems to only happen occasionally (on some page loads, it doesn't happen, on others it happens multiple times).
Will try to create a jsfiddle to reproduce.
0xeac7;
@autobind
this is soft of related to #2956
@spicyj In my situation I cloned the children and because I have `null` values I can't do `element.key` (example) so I have to check for that element. You alright it do weird stuff with `Children.map` so I don't see any problem with that. React when you pass some `null` values it does nothing with it. That's why it's common to se something like:
// This is a map that give you some `null` or `undefined` values
cc @spicyj
return { name: "Jonas" };
return { name: "Jonas" };
return { name: "Jonas" };
A.childContextTypes = {
@iostalk if you are using Babel with `"stage": 0` option then you can take advantage of static class property initializers:
return { name: "Jonas" };
<Swapper>
</Swapper>
and Swapper renders this:
undefined
undefined
https://jsfiddle.net/dg0ajx48/
https://jsfiddle.net/dg0ajx48/2/
https://jsfiddle.net/dg0ajx48/1/
Test: https://output.jsbin.com/cuyaxu
FAILED: codepoint=55296
FAILED: codepoint=55297
FAILED: codepoint=55298
FAILED: codepoint=55299
FAILED: codepoint=55300
[You can check it out here ‚Äî it's a little digital comic publishing and reading app!](http://new.comique.co)
componentWillMount sounds like the better alternative, but it seems as thought it's called later in the lifecycle (and in fact there's no hook before getInitialState).
I realise this might be a bit of an edge case, but it feels like these two hooks should either be re-ordered or a different hook added?
@spicyj, my problem is the call order, componentWillMount does get called, but only after getInitialState. This means that if I want to do any type of initialisation on the component (before the state is set) I need to put it in getInitialState which is counter intuitive
Why is that counterintuitive?
@iamdustan nope. It's just a bunch of internal react methods
@spicyj @glenjamin
https://github.com/iamdustan/react-testing-stateless-components/blob/master/__tests__/stateless-failure-test.js
https://github.com/iamdustan/react-testing-stateless-components/blob/master/__tests__/stateless-success-test.js
Is there a better way of doing this that I‚Äôm unaware of? Or is this just the way it is going to be for a while?
[The repo wiki](https://github.com/facebook/react/wiki) is full of pages created in the last hour with spammy titles like "Service Ariston Cempaka Putih 0818.0627.2790". Also, the top Google result for "sites using react" is a missing wiki page (https://github.com/facebook/react/wiki/Sites-Using-React) that Github is asking me to fill out.
@spicyj thoughts on this one?
LGTM :+1:
Here is my code:
@spicyj thanks for the pointer and explanation that was my guess of what was going on as well.
@spicyj my question is if there is any way I could make it less destructive ? In fact I would like node to be unmounted in sense that I'd like it to clean up listeners etc... But ideally node itself would remain in the tree.
> ‚Ä¢petehunt> gozala: yea will do, what i would do is just have a mapping of key->reactComponent and fill it when there‚Äôs a miss
> 11:55 AM <‚Ä¢petehunt> but will look a bit later, sorry!
// and then alias it.
NamedThunk.displayName = displayName
NamedThunk.mounts = 0
return NamedThunk
// Decrement number of mounts for this Thunk type if no more mounts left
The error:
@coodoo i am getting Uncaught Error: Invariant Violation: _registerComponent(...): Target container is not a DOM element. in my package react and react-dom are of same version 0.14.0-rc1.
https://jsfiddle.net/yiminghe/zrj6fqjj/2/
I would assume this is the result of a "non-standard" shim/polyfill being used.
if (error instanceof Error) {
Here at [Algolia](https://www.algolia.com/) we do use React on some of our projects internally and found that searching the React documentation could be improved. So I was considering sending you a PR which adds such search to your documentation.
cc @zpao
See the following code(or [JSBin](https://jsbin.com/leboxayege/1/edit?html,js,console,output)):
var r = Math.random();
@yaycmyk I've tried to do it with 0.14-beta3 and it doesn't work.
@spicyj but what about #4587? Should it work now?
Hmmm that's an interesting alternative. Thanks :)
In both cases, the user had given JSX-like syntax in a context where it was not expected.
Thanks for doing this @zpao. I'd prefer to use my uwaterloo email address because I'll be losing the optimizely email address after my internship ends.
@zpao There are ~~lots~~ a bunch of duplicates in the file (including old ones).
Can I possibly get MMoss@cainc.com mmoss@users.noreply.github.com (lines ~84 & 85) removed from the list? One was just the internal-github email response address, and the other is an internal corporate address. Thanks!
Change mine to "Jiyeon Seo" :+1:
@zpao
Andreas Savvides <asavvides@twitter.com> <andreas@nibbli.com>
Ben Alpert <ben@benalpert.com> <spicyjalapeno@gmail.com>
Daniel Gasienica <daniel@gasienica.ch> <dgasienica@zynga.com>
Jeff Morrison <jeff@anafx.com> <lbljeffmo@gmail.com>
Vjeux <vjeuxx@gmail.com>
@zpao Oh :)
@zpao
@zpao username and email is the same with at gmail on the end.
@zpao Is there some things wong using my GH name zhangjg?
https://jsfiddle.net/ccorcos/jqyxqe0d/4/
React components can be assigned a special property named `key`. Therefore, it's helpful to avoid the phrase "key property" unless you're talking about the `key` property :)
@yaycmyk Done.
Full `core-js` build contains non-standard `Number` iterator. Theoretical, it can be added to ES in the future, it can be added (or already added) to another libraries. `React` should take into account possibility iterable numbers.
Is this expected behaviour?
Will this behavior be accepted in the future?
Here is my jsfiddle: https://jsfiddle.net/garylai/Lbe2auh3/1/
@imgarylai
@spicyj You know the instance of a component (f.e. the thing you can get by using `this.refs.foo` inside a component)? Do those get destroyed after their componentWillUnmount methods are called? Or do they stay alive to be re-used?
@gaearon :raised_hands:
false,
// The validation flag and props are currently mutative. We put them on
> @amasad Will this work? We have "main": "react.js" in package.json.
Both have their own merits, with the second sounding more of a community project to me.
As someone who has being struggling with integrating non-standard DOM events into react app I would like to share my humble opinion on the subject.
It's not always that easy I'm afraid. For example we use bunch of non standard DOM swipe events (see #4645 there are examples) to allow interaction with various UI entities. There is no single container makes sense across the board UI entities it's being used so boxing event hooks into special component does not quite work all that well. There is also cases where we use other custom events with swipes so you either add yet another container or start mixing non of which is a great solution. At the end of the day we end up implementing poor mans version of Hooks on top of react. Which works sort of but there are number of limitations that make it less ideal. I'm happy to share code illustrating these if there is an interest.
Things are actually little worth for us because we also use custom elements / attributes some of which need to be set before node is in the tree otherwise they don't work and combination of these issues  makes it really difficult to pull it of.
> @Gozala Thanks a lot. This is great feedback! It's a slightly different take (and more thoroughly thought through) than we've heard before.
That doesn't seem very nice at all. It also breaks component isolation in a way, I shouldn't reach inside opaque components, but I should attach event handlers without their permission?
http://jsbin.com/ficoyutusa/1/edit?js,output
This one works (Parent has its own context): http://jsbin.com/cinebaripu/1/edit?html,js,console,output
<span className="glyphicon glyphicon-search" aria-hidden="true"></span>
When I click on the button sometimes the e.target.value is defined and sometimes undefined. Its totally random. After clicking on the button 50 times, the value sets magically undefined.
https://jsbin.com/zekixo/
![dangerouslyReplaceNodeWithMarkup](https://cloud.githubusercontent.com/assets/1594619/9572688/743a0be2-4fd2-11e5-89cd-ceba6490c202.png)
@spicyj
Now it started giving another error:
npm ERR! Darwin 14.4.0
npm ERR!
How can I preserve the onChange?
@spicyj,
@spicyj Thanks, just registered in the forums.
Notice that `children` property is a list.
Notice that `children` property is now a map.
It is a bit odd, considering that all I do is create an identical copy of the original JSX output object.
@syranide Sorry, should have been clear. Yes, I expect `React.Children.map` to produce map. I am surprised that using JSX to construct ReactElement hierarchy uses list.
This might be intentional, but it's technically a breaking change, so I figured I'd report it.
When rendering a react DOM element with style, the properties of each style object are treated special - e.g. adding px to most numbers, but not to particular styles such as  `flex`.
Ah, gotcha. The props described by safari (console typeahead) are camel case, so I didn't think to do that. Maybe toLowerCase() first?
Thanks for the info :dancer:
Error: Invariant Violation: Could not find the drag and drop manager in the context of Card. Make sure to wrap the top-level component of your app with DragDropContext. Read more: http://gaearon.github.io/react-dnd/docs-troubleshooting.html#could-not-find-the-drag-and-drop-manager-in-the-context
@spycyj Well I just kept going down the line and nobody claimed responsibility so you just got lucky I guess ;-)
@cmelion I'm sure spicyj didn't mean it that way. Anyhow, we want to keep GH issues focused on development of React, if you have questions or problems of your own please use https://discuss.reactjs.org/ or StackOverflow instead.
@cmelion This is very juvenile reply, hopefully you also know that.
@alansouzati I had this issue, ended up writing a babel-plugin for it, by no means is it perfect but it works. Uses remarkable to do Markdown => HTML => Babel-AST => React Components. Feedback welcome if it helps you out.
Edit: Previously used template literals and dangerouslySetInnerHtml, however that would mean you'd have to escape code block back ticks, or use an alternative string syntax, and replacement before processing.
@alansouzati `<pre>` and `<code>` are HTML-specific which JSX isn't, so even if we wanted to we couldn't. IMHO, generally I would not recommend writing large amounts of text inside JSX but instead putting it in a string (inside render or outside the component) and referencing that instead.
@alansouzati take this to an issue on my plugin. We can sufficiently call this closed.
<CustomRoute>
Hi @spicyj,
_Flying Horse Dancing_
@spicyj Warn on lowercase displayName sounds like it would throw a false positive if displayName is being set automatically from the filename and the filename is something like "./UserDashboard/index.jsx" and being included with `import UserDashboard from './UserDashboard'`.
I am writing a test case using Mocha and JSDom.
@spicyj
Hi @iangreenleaf, I've just found a solution which works for me:
@iangreenleaf Did you find a solution to the nested lookup issue? I'm stuck with exactly that.
@spicyj Is there any way to do a nested lookup? More specifically, as @iangreenleaf mentioned, I'd like to do:
But, TestUtils complains:
@moroshko Nope :crying_cat_face: Our solution is to find a different tool, and abandon TestUtils for all but the most low-level unit tests.
@iangreenleaf What tool did you end up with?
@moroshko Haven't settled on anything yet, but we'll probably be looking for something more integration-oriented that works with the real DOM and XPath/CSS-style selectors. For the moment we're just sticking with Capybara (since we are already running Ruby). The limited scope of TestUtils is fine for testing individual components, but is unwieldy when actually simulating user interactions.
var boo = htmlele.__proto__ && htmlele.__proto__._isReactElement
@spicyj or @sebmarkbage, any feedback on this?
thanks @zpao .
Previously, it repeated 'latest React news' when the first sentence already begins with the same words.
@zpao that makes total sense (and I don't expect the other one to be merged as-is either, but one has to start somewhere right?). :)
@spicyj  Thank you!
@spicyj But not mixing between them I would assume?
background is shorthand for:
The props for React DOM elements is [supposed to be](https://facebook.github.io/react/docs/tags-and-attributes.html#supported-attributes) based on DOM properties. Hence why `className` and `htmlFor` are used and supposedly why all the prop names are `camelCase`.
- encType (actually enctype)
MWE:
Here is my attempt of exposing non-standard events after getting some insights on IRC, unfortunately it still does not work (as event listeners are not registered) and I am not sure if there is more whitelists somewhere that skips those custom events:
I hereby add my support  to custom non-standard DOM events.
This may be related #4751
Or more complex but robust as:
onClick: handleSyntheticClick,
//not
or will it be support in the feture?
// throw new Error('hey') <--- Complicated error
Does anyone have an idea what might be going on? I'm also using React Router and Webpack, but I think this might be a React problem.
https://jsfiddle.net/76vrb6ar/1/
Changed behavior:
@zpao
Thank you for your changing!
I think short version (like `/ja/`) is simple and better.
Regarding the localization url, most of the people whom participated in the translation project agreed using 'ko', instead of 'ko-KR'. Not entirely sure North Korean or Korean-Chinese people agrees that. ;)  /cc @marocchino @dittos @arkist @dalinaum
https://gist.github.com/Torwori/43dc32fdf24bb84239a1
@spicyj any further thoughts on this?
@spicyj thanks for looking into this.
(client) e6zyboqo.1.2.1.0.1">&quot;This is a
(server) e6zyboqo.1.2.1.0.1">"This is a test
How come it's rendered different?
@ktslwy For me it was always character encoding. As my original message pointed out. Did not have any time to create a minimal test case though. And I haven't been seeing this error in a while. So prabably a newer version has corrected the problem.
@mridgway
@spicyj that works for me. Thanks.
https://jsfiddle.net/yiminghe/o60fo9ew/1/
At first I thought the messages were mixed up, but actually `outerHTML` for the existing root node is returning the decoded string.
Every time I try to test, the Rect is always "empty:" `{left: 0, right: 0, top: 0, height: 0, bottom: 0, width: 0}`.  I've tried it in both Jasmine and Jest (just in case there was something different in one) and neither work. I'm hoping there's something I'm doing wrong, but if there is, I can't find it.
I figured something like an "imaginary DOM" existed with `renderIntoDocument` but I couldn't find anyone else with the same issue. This makes a lot more sense now.
https://jsfiddle.net/fyu01Lsw/1/
@yaycmyk It's a bad idea. You're free to do `setState(prev => deepMerge(prev, next))` or similar if you want though (but I wouldn't recommend it).
@rads üëçüèª
@sebmarkbage
> Any plans on giving arrow functions and concise methods `.prototype = void 0` in babel?
I think base of all data structures, must be Cursor-like. Because it has simple API: get and set. And you can extend them with your own functionality. I think it must be something like https://github.com/zerkalica/immutable-di/#working-with-state . Here's an [interface](https://github.com/zerkalica/immutable-di/blob/master/src/cursors/abstract.js). And of course [baobab](https://github.com/Yomguithereal/baobab) can be provided as example.
let books = [{ title: 'Dune' }];
Here's a [React component called Subdivide](https://github.com/philholden/subdivide) that has _really_ complex internal state. Basically it lets you split a view into recursively nested views as many times as you like. (It's really cool, you should [watch the video!](https://www.youtube.com/watch?v=3ePrvrx9otk))
I just published [React Elmish Example](http://gaearon.github.io/react-elmish-example/) as my ongoing attempt at understanding Elm Architecture niceties, tradeoffs and limits. Perhaps the examples there are convoluted‚Äîthey very well may be‚Äîbut I think they show the power of its state model. Parents having full control over interpreting child state updates makes implementing Undo/Redo, action log (or potentially time travel solution like I showed at React Europe) a breeze, as you can see from the source code. The downside is that writing ‚Äúnormal‚Äù code is way more ceremony than it is with React. Basically all state update flow is explicit, and instead of callbacks, you call static methods. If you add a stateful component as a child, you need to explicitly specify how to handle its actions. Of course there may also be big performance downsides.
(Of course I implemented it _on top of_ React so it's higher level. It's just a different higher level abstraction than `setState()` and I find it more powerful. If it was as easy to use as `setState()` that would be marvelous‚Äîbut maybe I'm completely missing the point here, this stuff just hurts my brain so much.)
@skidding might have thoughts here, as he built https://github.com/skidding/cosmos
Thank you @gaearon for the mention.
// this `tree` could be completely opaque, though it would be nice
// then finally render to string
false,
Running "jest" task
running jest (this may take a while)
at doNTCallback0 (node.js:408:9)
at doNTCallback0 (node.js:408:9)
[edit] It is actually from `8f419c9` and I think `$ grunt test` is gone.
PropTypes
PropTypes
@spicyj ok, agreed
@spicyj I'm not sure: are there plans for the _stateless function component_ to be handled as being _pure_ and thus avoiding repeated calls (to render the output) if the properties provided stay unchanged (with respect to a `shallowCompare`, probably)?
propTypes:{
Or the alternative:
`REST is an acronym for Representational State Transfer, which is an architectural style rather than a formal protocol`.
http://jsfiddle.net/15q9xr24/
@zpao done
This is related to #1657 .
``` scala
craps out on line1 because of an unexpected `:`
@spicyj why my code fail: http://jsfiddle.net/ws_ubi/4xgtj12y/ See the console output
@browniefed oh -_- I guess there is a reason.
mui = require('material-ui'),
RaisedButton = mui.RaisedButton;
muiTheme: React.PropTypes.object
muiTheme: ThemeManager.getCurrentTheme()
https://jsfiddle.net/koba04/arehgdsq/
@zpao
@zpao
@zpao
@zpao
blabla
@jonira I have, feel free to contact me via email (evan@yaycmyk.com) so we aren't cluttering up React's issue tracker.
alias: {
@spicyj I like that idea that transitions should be reliable at the entry level, even if that raises the bar by forcing all users to specify durations explicitly.
I think @irae has a point; if we're going to say the transitionEnd event sucks, let's just ignore it entirely. Then the CSS transition group has two jobs: slap on a CSS class while transitioning and remove the element from the DOM after a timeout. Less ambiguity. @djrodgerspryor ?
@irae and @KJTsanaktsidis: I had already noted that the transitionend event listener would be removed in a future version, but I've now removed the the listener if timeouts are specified. This means that there will be no change in the timeout behaviour when the listener gets removed.
@spicyj done
Thanks @spicyj
propTypes:
I'd like to add my [React/Flux/immutable demo app](https://maaamba.herokuapp.com/) to the [examples page in the wiki](https://github.com/facebook/react/wiki/Examples), but there's no simple way to pull request changes to it, from the bit of researching I've done.
But I worked around by adding a different `class` in the root element.
If that behavior doesn't exist in IE9, it might serve as a useful alternative.
@yaycmyk This is a long time ago, memory is really fuzzy, but I remember knockoutjs being affected by some comment quirks.
please  see [here](http://jsfiddle.net/majorye/wavpf5qj/)
thanks @nikolaymatrosov @zpao
Were you able to get to this @zpao?
propTypes:{
@zpao the JsFiddle you give, is it always the same address for the latest pre-release?
@syranide so it seems your solution works but unfurtunatly it still force library authors to update the package.json (at least to add the first beta). Nice to know npm3 wiill be more permissive about it.
@zpao it would be nice to have a recommendation on what library authors should put in their package.json when they want to be permissive so that lib users can test it against alpha/beta.
Lib:
Here is jsfiddle example:
https://jsfiddle.net/kbcpLyax/4/
Bump. Ran into this issue today. (This is a dupe of #3199.)
Node
Object
mask#Mask0
Node
Object
Here is jsfiddle to repeat the problem:
https://jsfiddle.net/zzbm3qar/
The `null` ref is confusing to me since the ref'd view isn't unmounted nor is its parent. I believe this is under 0.14 beta 1 (whatever RN master uses).
jest.dontMock('../tab');
What you can do to test if click is actually working is attaching a click handler to that button and pass in a spy (with sinon for example)  and you will see if the click is actually firing or not
@zpao So I've gone ahead and written my own ReactMount for my library, however I'm now running into issues with `ReactDefaultInjection` which injects `SelectEventPlugin` which depends on the DOM. When importing React, it looks like it's importing `ReactDOM` which calls `ReactDefaultInjection.inject` and I can't find a way of stopping it.
George
``` scala
Sorry this comment was a bit vague. Instead of:
var el = {
Awesome. Thank you @zpao!!
I write a [todo list](http://jsfiddle.net/foolyoghurt/42uyzs2k/) with react and use ReactCSSTransitionGroup to do some animation. However, when I use `clear completed` button to delete all the completed todo items, only the last item will be deleted just as [issue #1478](https://github.com/facebook/react/issues/1478) mentioned. And if I don't use `transitionLeave={false}` on ReactCSSTransitionGroup everything works fine.
This is confusing for many users as they don't understand why the event starts to behave strangely when used in an async callback, like inside a `setTimeout`, a `setState` or a `render` callback.
@nmm I think React should not swallow this error and be fail fast, because this does not make any sense to preventDefault in an async callback (because the default already has been applied), React should rather throw an error.
A warning would be great!
Just wonder what kind of message should be put into this warning. If event pooling is not going to be documented (will it?), it may be strange to explain the pooling system inside a warning no?
https://jsfiddle.net/dmininger/8rdqhnox/
At first I thought it was react-redux but it does the same thing without it
OK, just read the blog post about Babel.
Running "jest" task
running jest (this may take a while)
>> jest failed
Aborted due to warnings.
@yiminghe thx buddy, wanna go to ali to do some reaction XD
- visitors for jstransform
Todo
https://github.com/thr0w/esprima
https://github.com/thr0w/jstransform
- https://muut.com/riotjs/
In other words, I have no expertise to make a good tool alone if you are available to guide me I believe I can make a good tool and then you might want a PR. How I need be guided? Use acorn / babel instead esprima (thanks @sebmck  ); use or not if / repeat directive like riotjs; someone is working in it ...
This looks oddly similar to Riot. https://muut.com/riotjs/
Benjamin
// The key is not set correctly here
yes that would probably be a little magical
https://jsfiddle.net/kdsvgbzu/1/
A.propTypes = {
The only mention I found is about SVG properties: http://www.w3.org/TR/SVG/styling.html#CaseSensitivity
@petehunt
> This works fine in Safari
I have tested some basic animations which are working fine on chrome and firefox. But safari 8.0.7 is having issues. Nothing seems to work in safari, not even fadein/fadeout. eg:
http://jsfiddle.net/pchng/17rq3s6d/1/
http://jsfiddle.net/aac4L5m5/1/
On Jul 31, 2015 10:41 AM, "Niole Nelson" niolenelson@gmail.com wrote:
babel, which 'couldn't be found', and a lot of failed tests
- I then upgraded jest to 5.x.
@zpao Thanks!
For unfathomable reasons, jasmine doesn't like this expectation though, although it' pretty much the same as the other two...
var handler = jasmine.createSpy('spy');
expect(handler).toHaveBeenCalledWith(jasmine.objectContaining({
So I think both this PR and #4465 can be closed now.
https://jsbin.com/yadezugoro/edit?html,console,output
Is this intentional?
Thanks @spicyj!
alias: {
Weird.  I thought last time I looked at the sources it looked like it was clearly a Webpack build, but now that I look again, doesn't seem so.  Sorry I got confused about this.
</thead>
@spicyj Thanks for the clarification - that's helpful. In my case, the warnings are actually on neither `tbody` nor `colgroup`. When rendering server-side, the app uses a fairly truncated `Html` component that when thrown to `renderToStaticMarkup` produces errors like the following:
@spicy Gotcha. In my case, the update-able components are drawn within a `div` by ID, so that problem _shouldn't_ occur because the direct parent will always be the same (unless I'm mistaken about React's internals). However, it definitely explains the necessity of the warning.
var expect = require('chai').expect;
I'm experiencing this issue too - @sebinsua your suggestion gets me past the initial error & on to `Cannot read property 'ref' of undefined` in `ReactRef.js:63:20`
@mihaialexe I think I have to add a test to my pull request before it can be merged, but I did not get around to do it yet.
Repro: https://jsbin.com/gebasa/3/edit?js,output
This is an stupid example but it only to show an example...
What the heck?
const fooMixin =  {
this.myFoo = 'bar';
return this.myFoo;
mixins: [fooMixin],
@JAStanton and others, I'm just curious, what are use cases for getters in mixins? Or is this more about mixins using property descriptors over keys and values as a generally better approach?
mixins: [QaAttributesMixin],
I found the definition of the controlled and uncontrolled components ambiguous at first.
Hey there React-ors,
## Babel
Thank you @spicyj
@spicyj Ok, I guess object destructuring and how `class` and `for` cannot be variable names does make sense. Though keep in mind that this is only relevant in the context of making it "convenient" for developers, in the sense that they can use the same variable names as prop names. Not in any way a case of it being invalid or not working with destructuring. Because `{className, style}` is only the shorthand sugar of object destructuring, you are not forced to use the same variable names as property names. You just use the full object destructuring syntax `{class: className, style}`, `{class: cls, style}`, etc.
- Would help to catch TYPOs
<Input tupe='password' />
Raising an error "Unknown property 'tupe'." would help to catch the error.
## Preventing Orphan Properties
@gajus The other place where this becomes untenable are components that allow the full breadth of React-supported attributes using the spread operator. For instance, I have a few components that allow the consumer to set `disabled`, `name`, etc. as props and I simply apply them to the rendered element.
@syranide I thought there were plans to implement `props` as an immutable map? or to accept one
@yaycmyk I meant you shouldn't treat it like a Map-structure, `props` just like `state` _should_ only have a fixed set of properties as specified by the component, they should not be dynamically indexed. Hence, any property provided that isn't in that list is technically an error because it would never be read or used for anything.
@syranide Isn't it very common though to define wrapper components and then seamlessly pass props to the wrapped child via spread? An opt-out would solve the issue, but having to redefine the proptypes at each layer would be tedious.
I have developed a higher order component that does this.
@spicyj
@spicyj perhaps this also shows an inconsistency in your formatting? Haha
Is a special case for something that is an oddity anyway.
Am I misusing `React.Children.only`? Is it meant for a different use case?
:hankey: This code looks worse to me as it is relying on the underlying implementation of `this.props.children` and has more lines...yet it works fine with no error:
:beers: More than happy to put up a patch if there is consensus on what we should do (and if something should be done even).
@tinganho the life-cycle methods are just the ones react calls. You can call your own methods in response to any event in your code.
@zpao hmmm. jumped the gun here. not related to react specifically
If this is not your problem, then please explain what you mean with "‚Ä¶".
@davidhariri don't hesitate to enhance babel if the error message is not clear enough, it will help others too :)
https://jsfiddle.net/69z2wepo/12235/
@Yeti-or `input` is a void element, so it doesn't need one: http://www.w3.org/html/wg/drafts/html/master/syntax.html#void-elements
@mdibaiee
@zpao Whoop sorry, @mdibaiee just came into the chat pointing to this issue wanting to know how to install the beta version of Babel that would fix this issue.
Here is the code:
Hi @zpao, I would love to as I'd really enjoy learning React. I may have trouble with fully committing though as I'm pretty busy with school right now.
Do I misunderstand `React.Children.map`?
I am confused, sorry to trouble you.
And how about [this](https://jsfiddle.net/9Ldyq5jk/4/)? An error will be threw: `Uncaught Error: Invariant Violation: onlyChild must be passed a children with exactly one child.`
clarity and some language that suggested that you could mutate
updated. cc @zpao
Yeah mine wasn't a serious proposal and yours has significant issues with taking ordering into account. `checksum('___ab') === 'checksum('___ba')`, can obviously be improved by switching out `2` for something better. Still it's probably good enough, but I would advocate just sticking with adler32... however I'll reiterate that the current algorithm should be faster than the new one you're suggesting in this PR.
n = Math.min(i + 4096, m);
2. Right clicking to flag a tile has a variety of possible unintended effects:
I just change two line and add a custom file, I paste them at [gist](https://gist.github.com/9nix00/c4f4ef67f4f3acd0cd44)
npm ERR! not ok code 0
Jest version:v0.4.15
OR
createMixin:
PropTypes:
bool:
string:
bdi:
tr:
wbr:
ul:
meta:
dd:
tspan:
bdo:
datalist:
legend:
sub:
br:
img:
col:
tfoot:
samp:
keygen:
polygon:
radialGradient:
u:
menuitem:
kbd:
thead:
mask:
abbr:
polyline:
code:
ruby:
ellipse:
ol:
addons:
{ CSSTransitionGroup:
TransitionGroup:
SimulateNative: [Object],
foobar:
mouseOut:
drag:
blur:
mouseOver:
mouseDown:
mouseMove:
SimulateNative:
mouseOut:
drag:
blur:
mouseOver:
mouseDown:
mouseMove:
mockComponent:
nativeTouchData:
@brigand to be fair,  my initial interpretation of `React` was that it was doing pure render by default, it was confusing to me that `Math.random()` _was_ working at all given my props were the same.
@zpao it may be hacky,  but is removal a better option than living with what we have?
@sebmarkbage
Have you tried zuul? https://github.com/defunctzombie/zuul
``` yaml
ui: mocha-bdd
browsers:
- name: safari
Zuul is by far the best tool for automatically running tests across browsers that I've tried, and it works with jasmine out of the box.
@zpao
@sebmarkbage
@sebmarkbage
:fearful:
Boo! Hiss!
https://github.com/Terebinth/Vickers (MineSweeper)
@zpao ok that makes sense.
https://jsbin.com/hutujemoku/13/edit?html,js,output
What's going on?
*terms and conditions may apply
I agree with dmatteo.
in the "father" component, since it's based in his props that this "child"
being yet again one magic thing to keep in mind.
I hate magic :)
Bool muted
cc @zpao
@zpao no worries!
var GenreFilter = React.createClass({
key={genre}
value={genre}
{genre}<br/>
In both cases, the data passed in is an array of strings.
(**[edit-1]** Findings: It is SVG related , sort of . When doing variable assignments from a function from within `render`, the return values may be parsed into span elements, which, when inside SVG, logically cause blow-up.  So, generally, the issue now is how to generally still be able to compute usefull things from within `render` without having those vals turned into fodder for spans.)
rayy_000 = for i in [0 .. 7]
stroke: 'black'
Danger: Discarding unexpected node: <path d=‚Äã"M30 40 L40 50" stroke=‚Äã"black" data-reactid=‚Äã".0.0.1">‚Äã</path>‚Äã
https://github.com/Terebinth/Vickers (MineSweeper)
I realise also this last is a technically distinct issue from the one that opened this ticket.
Thank you @makky3939 !
I think you might be mixing it up with this scenario.
Hi @zpao,
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ thirdparty
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ quadratic
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ thirdparty
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ es5-sham.min.js
‚îú‚îÄ‚îÄ foo.html
react $ more src/hw.js
react $ more foo.html
I spent some time Googling this; the solutions [here](http://thodorisbais.blogspot.com/2015/03/how-to-solve-failed-to-execute-send-on.html) and [here](http://stackoverflow.com/questions/28922881/error-failed-to-execute-send-on-xmlhttprequest-failed-to-load-file-ang) didn't seem to work (didn't try restarting my machine, though).
However, the XHR worked in Safari.
Related to #3620 and #4019.
$.ajax({
2) I didn't ID this a timing problem, since part of the object worked (`{this.state.data.simple}`) while the rest didn't...strange behavior!
A further weirdness, that shows the corrected program working, is that the object works when printing from within `success()` to `console.log`.
I'm confused about the comment:
$.ajax({
The reason the error messages were occurring is because the _1st_ time that `render()` is getting called, the JSON object has not loaded yet, so there are not yet keys for `this.state.data.dag1.key` and `this.state.data.dag2.firstkey.secondkey`, and the error messages are produced.  (So the strange thing here is that `this.state.data.simple` did not produce the same error message.)
I found garbled text (it was controll character) in 02-displaying-data.ja-JP.md and fixed it.
The motivation here is to be able to push and pop components on a UINavigationController-like component. So it would be weird if some kind of drawer was open, or some forms partially filled out, and when you pop back to the form, then everything is reset. Similarly with a UITabBarController-like component.
HiddenMixin = {
displayName: 'NavVC',
http://jsfiddle.net/ccorcos/t86axd6L/
1) Use cursors. @amannn, you solution is similar to this. This is how clojurescript does it. Its interesting and powerful and has good encapsulation.
'cmp--mobile'
'cmp--mobile'
But the JSX compiler seems to be [smart enough to quote keys like `"class"` and `"for"`](https://babeljs.io/repl/#?experimental=false&evaluate=false&loose=false&spec=false&code=var%20label%20%3D%20%3Clabel%20id%3D%22foo%22%20class%3D%22bar%22%20for%3D%22other%22%2F%3E%3B) (so they'll work fine even in pre-ES5 environments). So what's the problem? Why are they discouraged, and what exactly does that mean?
### Server code
"<img alt="foo" data-reactid=".gsisljabk"/>"
"<img alt="foo" data-reactid=".gsisljabk">"
@syranide So the data-reactid is different and not the img tag's `/` ?  I'm at a loss on how to go forward then.
@syranide AH! Thank you so much, the previous developer was using random uuid slugs to generate the keys!
@zpao
`OSX`
LGTM
@jimfb :metal:
I had the same impression as @BurntCaramel, thanks for clarifying.
@zpao awesome.  got it.  thanks.
Maybe i don't understand why? But what's the alternative?
``` coffeescript
The problems are as follow:
I dug around a bit and found that this is sort-of a dupe of https://github.com/facebook/react/issues/3854 - although i'm mostly talking about different use-cases.
warning.once = function(condition, isARepeat, format, ...args) {
var _ = require("lodash");
// Can be important because tether can switch from top to bottom, or left to right,
// but it does not handle correctly bottom-left to bottom-right for exemple
</WithLongHoverBehavior>
But take this code for example:
// Whatever you want here
cc @spicyj @sebmarkbage
> I'd like to see refs get less special/magical over time, not more special/magical
<InfiniteScrollView
This is a unique case because InfiniteScrollView, InvertibleScrollView, etc are not generic higher-order components, but rather conform to [a standard scrollable component API](https://github.com/exponentjs/react-native-scrollable-mixin). And the composition happens with the renderScrollComponent function rather than a class decorator or similar.
Hey, that was pretty boneheaded of me!
This seems to be the same issue as #2585.
Yes, there is a race condition, but I'm not sure what the actual solution would be...
Excuse me. I'm a beginners of React. Can I ask a question?   Why can I use "jsx -watch src/build" to translate "src/helloworld.js" file to plain JavaScrip?
my code
<Zoo />
var Zoo = React.createClass({
Giraffes name: <input ref="giraffe" />
// var input = this.refs.giraffe.getDOMNode();
var input = this.refs.giraffe;
Never mind,  linter error.
@zpao what would happen when we try to require Perf when using React with production env? Former addons did not include Perf so we simply could not use it directly but now we'll be able to require it for prod env too
It seems to mistake a require path.
@chicoxyzzy thanks! :persevere:
Huh... modifying the spread operator like this makes no sense at all to me, JSX isn't even HTMLDOM-specific and not everyone uses it.
I've experimented with international symbols inside react component and it failed on simple example. Is it by design behaviour?
I had no luck with either of the Simulates' mouse events.
Some code to play around with:
https://jsfiddle.net/gonsfx/xva2g6oo/
- Optional
// Flow
// Flow
// Flow
// Flow
All these give the type warnings that you would expect based on the flow type,
I'm willing to build a custom `<Time>` component, but I want to make sure that one does not already exist, or that there's an existing way to do this that I'm not aware of.
// this isn't right!~!!
Ping @jimfb @sebmarkbage @syranide
@attilaaronnagy fairly certain it's not a React issue, but a browser one.
It sounds like you think this is a ridiculous request. Why do you feel that way?
Admittedly with much pain:
@syranide ‚Äî so, are you rejecting my use cases I outlined above out of hand? Also, I'm not looking for a shortcut, but rather a generalized mechanism. And using the context mechanism you refer to would essentially bar me from using anyone else's components unless I customized each one to use my custom version of the elements. Unless I could somehow do it in such a way that all components would be forced to you my implementation of the "input" component, for example?
Related to #1602 and #1373.
> [_From sebmarkbage, Source_](https://github.com/facebook/react/issues/1373#issuecomment-39811366)
@spicyj Thank you for the info and correction.
@spicyj how would you handle a situation where some child component should find a dom node down stream?
I'm wondering the same thing as @mikkoh, any solution?
@spicyj Also looking for an answer to the question @mikkoh asked.
@spicyj It may not be possible or feasible to add refs to children nodes, in which case how does one query a DOM node downstream from a `.props.children` reference?
Fixes #3620 and #4019
@zpao - this is a more conservative approach to updating some of the dependencies. Let me know what you think!
Huh...confusing enough, as requiring `babel/register` fixed ES6 code issues in iOS safari for me...anyway I just put `babel/polyfill` in the entry section of my webpack config, and that worked as well.  Thanks for the tip!
BL
@saemchou actually 0.13 already uses `React.findDOMNode(ref)`
0.14 is only different in the sense it's using `ReactDOM`, like: `ReactDOM.findDOMNode(ref)`
Hi @dmatteo thank you for joining, there's still a lot for me to learn about React
Translate to jsx and lowercase.
@spicyj this is awesome, thanks for sharing.
<button className="remodal-confirm" onClick={this._handleVerify}>Verica</button>
// this is not even ideal really..
if (this.state.isModaled) {
I will try the @blainekasten solution.
<input type="text" name="username" placeholder="Áî®Êà∑Âêç"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black">
- But if I remove **ratchet.js** from vendor.jsÔºåit works. Can you help me?
This seems to be broken since 12c9fee94ed97dee1ae0dad701c03d4fc14ca0a7
Changes:
The code in question:
One of the most recurring warnings though seems a bit weird:
Am I doing something wrong inadvertently?
@spicyj shame on me...
externals: [
'react-dom': false
alias: {
@sebmarkbage
Pseudocode:
// user code
http://react.jsbin.com/peseveluxi/edit?js,output
@andela-domonori first noticed the weird behavior.
http://jsbin.com/bonoyibahe/edit?js,output
</ReactTransitionGroup>
props: Object
props: Object
children: Object                                <--- Inserted itself here
props: Object
...other
...other
http://jsfiddle.net/bm0b1brs/
Ah right, because `React.DOM.thead` is a factory.
- Removes the early Error thrown when either of these native or shamed methods are not available.
There is a difference between shims and shams as pollyfills, you're mixing two things together.
Thinking about this there are a few messy details about transpiling:
@sebmarkbage
There is this code:
http://jsbin.com/keleru/edit?html,js,console,output
just type in the password field and see, the cursor position behaves weird when the `type` gets switched
So, it's a Firefox issue then @spicyj?
Ignore my jsbin, it was just a quick and dirty hack to demonstrate it. No need to make it perfect ;)
@spicyj um.. what?
in jstransform, which is wrong.
@spicyj
``` coffeescript
propTypes:
foo(
bar
baz
foo [
bar
baz
@spicyj embarrassing, but I don't know how to squash. Maybe you can provide me with a small exaple snippet so I know it once and for all? :)
@spicyj I think that worked :)
Hey, did that: http://react.jsbin.com/givoyatika/1/edit?js,output and it seems to be working fine. Oops, must be something else at play...
A JSBin demo of what I'm trying to achieve: http://jsbin.com/girusifiba/edit?html,js,console,output (type CTRL + c in the editable `<div />`)
Sorry if this has gone off-topic from React issues, it just seems strange to me that in 2015, we can't do this reliably in JS.
@zpao Hello.
I accessed [getting-started-ja-JP.html](https://facebook.github.io/react/docs/getting-started-ja-JP.html) now and it seems do not change.
@spicyj
https://jsfiddle.net/wntgpwcx/4/
/cc @zpao
On Safari 8, the following code:
Throws an error:
A code example utilizing an IIFE might be overkill, but at least a passing mention would be nice.
The question is if I trust builds from @zpao :) (I kid)
EDIT: @zpao OUR SOURCES HAVE BEEN HACKED
/cc @chenglou
Another take on the third option:
clicked A {extraProps.a} times
@threepointone just in case - [these changes](https://github.com/in-flux/component-router/commit/db82ff859c07495118c032cafef1ee9ea0b5888f) to my code let animations go smoothly without re-rendering content. So it is a combination of shouldComponentUpdate => false and moving things that should not change out of updated component.
@activatedgeek Yes, in favor of babel
_facepalm_
@iamdustan what replaced `react/addons`?
I'm not sure whether this is considered a bug or if it's working as intended, but I'll at least throw in a vote that the behavior is unexpected.  Given the following example:
Demonstration of <span>unexpected</span>
[[Demonstration on jsbin](http://jsbin.com/jecawenene/edit?js,output)].
I would consider this unexpected for two primary reasons:
Of the following choices, its tough to choose a winner:
- The React way generates far too much boiler plate.
- &nbsp; is rather difficult to read
Demonstration of <span>unexpected</span>
nbsp
Demonstration of <span>unexpected</span>
Demonstration of <span>unexpected</span>
Related: facebook/jsx#28, facebook/jsx#35, facebook/jsx#8
The babel browser file?
Renamed.
- There were some more occurrences of typos fixed in https://github.com/facebook/react/pull/4123.
//cc @zpao
completed CLA
Seems the wording causes confusion. Just three weeks ago there was #3944.
I'm trying to display a dropdown menu composed of `ul`, `li` and `a` (similar to the one from bootstrap).
<i className="octicon octicon-package"></i> Plugins
Thanks @zpao :beers:
What if i need this kind of nesting?
Please add an option to keep all my spaces!
Please add an option to keep all my spaces!
baz: React.PropTypes.string
React.render(Foo, {qux: 'quux'})
1 verbose cli   'react' ]
4 verbose install initial load of /Users/ajfarkas/Sites/Learning/react/package.json
5 verbose stack     at final (/usr/local/lib/node_modules/npm/node_modules/read-package-json/read-json.js:338:5)
5 verbose stack     at then (/usr/local/lib/node_modules/npm/node_modules/read-package-json/read-json.js:113:5)
5 verbose stack     at /usr/local/lib/node_modules/npm/node_modules/read-package-json/read-json.js:284:20
6 verbose cwd /Users/ajfarkas/Sites/Learning/react
7 error Darwin 13.4.0
but the resultant code transpiled via babel v5.5.6 contains a reference to a variable named `React` which ends up being undefined:
@syranide kk, so i'm understanding that the current thinking is:
This behaviour looks like a buggy. Am I right?
@dittos Hmm, you're right.
<ReactifluxSlack> <morhaus> If you just include react.js in your html then switching to react.min.js in prod is fine
@zpao
LGTM :+1:
![screen shot 2015-06-11 at 5 45 35 pm](https://cloud.githubusercontent.com/assets/8728339/8121604/ba8ada54-1062-11e5-8195-daafbcb08b02.png)
[Demo](http://jsbin.com/bewarumime/1/)
<label for="fName" accesskey="n">First <u>N</u>ame:</label>
'dangerous because you\'re creating a new child which will not be ' +
Note the `child.type` above. Well...
@zpao Updated
@spicyj Thank you very much for the lightning reply!
class UIPane extends UIView {
<div className='ui-pane'>
....more options
[jsbin example](http://react.jsbin.com/soqilabobe/1/edit?js,output)
@spicyj hmm. I guess I can think of situations where that might happen.
Also, thank you for deleting that spam comment, I had never seen that before on GitHub...
Thanks, I added this [jsfiddle](https://jsfiddle.net/kr316206/1/).
code here:
Consider the following code:
@sebmarkbage, what do you mean by 'context scenario'? Or separate renderers at the top level?
Part of code in the [getting-started-ja-JP.html](https://facebook.github.io/react/docs/getting-started-ja-JP.html) does not display correctly.
There must be a break over the part of code.
The following code that I wrote is definitely **not** the _React way_ (as it removes and unmounts everything and then recreates and mounts everything) but it works (after many hours of trial and error).
For example, the way react-router works seems pretty hacky to me, but maybe that's the state of dealing with these global events in React or more likely I'm just not familiar with this concept enough.
@spicyj
http://jsbin.com/citafaradu/2/edit?js,console,output
Yeah, so this is sort of confusing
@zpao Thanks!
@syranide : thanks, can you please explain the implication of `MUST_USE_ATTRIBUTE` ? cant find any comment on this in the code
i j k`;
@sebmarkbage
http://jsfiddle.net/xvs6xdfk/3/
This is an potential alternative fix to #3826
cc @syranide
This just seems wrong and completely unexpected.
@zpao done!
@gilbox, I met the same issue.
I did something wrong in my own code @olegerm but I don't remember what that was anymore.
(_Edit: not being sarcastic. Isomorphic is a weird word._)
Love it, I think it's a great simplification of the intent of what is trying to be conveyed which is essentially Javascript almost everywhere.
@gaearon "Universal app" is not quite about the same thing. Apple says the app is compiled for Iphone and Ipad not more. It doesn't include that we can run the same code with the same session data both on client and the server (even during single request).
Almost every React person I know has been bitten by this and it always take 30 minutes of debugging to find and then you feel like a dummy the rest of the day.
@zpao
@JohnyDays
@syranide
Can you think of any way to do this?
After a lot of headache, I realized someone was mutating child props like
Being familiar with React internals, you probably have a better idea of how feasible this is.
I'm not entirely sure if what I'm having here is a problem with Mocha or React, but I really need some help figuring out why my tests are failing with what looks like leaks across siloed documents.
I've created a repository with a minimal setup and a more detailed description here: https://github.com/Munter/MochaJsdomReact
Mixins make things unclear. For example:
mixins: [A, B, C, D],
Related to #2393
this.setState({foo: 'baz'});
baz
baz
as you can see, numbers in states are different, but objects in states are identical, so we cant rely on them.
thanks for answer. these words confused me: `Treat this.state as if it were immutable.` - so i did, while thinking that React will handle this cases.
Transpiler: Babel
While tracing codes, found that:
Make the duty of constructing and the duty of mounting clear.
@zpao
But what I find surprising is that the validator function gets called twice. I wonder why?
#### dynamic part ####
#### dynamic part ####
@iamdustan
Yeah, in this case the `name` property in particular is enticing, but isn't guaranteed to be unique (the same goes for any combination of the provided properties).
This might be a stretch, but the same approach while leveraging `context`?
@sebmarkbage I'll try
@bsansouci Sorry, but I don't get it.
function makePureLambda(render) {
> Lambdas with special attributes feels like revisiting React.createClass where React again invents its own opinionated pre-defined behaviors.
@jimfb Ah, we're talking about different things :)
@sebmarkbage @spicyj @syranide @jimfb
[jsbin](http://jsbin.com/jeyeboleki/6/edit?js,console,output) explaining the problem.
> of undefined
var app = angular.module('dionysus');
<p>Bar</p>]}
However doing so generates warnings like:
@zpao Thanks for your reply :)
So in the case of a table comprising of many sections, you have to resort to calling functions instead of elements, meaning you don't get the benefits of props, state and rendering short-circuiting, plus your code looks different and is therefore more error-prone.
The impossible to match scenario is worrisome. It wouldn't help in complex cases (where I think people would have the most trouble), but I could at least ensure that there aren't more than one of the default primitive type checks specified. Think it would be worth adding?
Apologies for using flow type syntax. It's just a lot more concise compared to PropTypes.
@sebmarkbage @Chrisui
Re: `shouldUpdateChildContext` I buy your argument, if it's a redundant mechanism or opens up those conceptual problems then maybe it's better to avoid it.
For sure, you could do broadcast with wormholes.  Taking it to the extreme you could do it with props, too :)  Potentially that boilerplate is fine, but I'd always lean toward avoiding boilerplate if it's reasonable to do so.
https://jsfiddle.net/69z2wepo/9130/
https://jsfiddle.net/69z2wepo/9168/
https://jsbin.com/famewaqeja/edit?js,console,output
Ok I'll investigate `block-scoped-var` issues - will probably need to update `babel-eslint`.
``` yaml
# parser: babel-eslint
ecmaFeatures:
@PiPeep I just ran that code snippet and it does error unless you move `var a = 3` above it.
@zpao When I add to the `.eslintrc`
``` yaml
ecmaFeatures:
Safari
Chrome
var blockA = <div>AAA</div>,
This is a tricky problem. You might want to [share your input here](https://gist.github.com/chenglou/34b155691a6f58091953).
var blockA = <div>AAA</div>,
@syranide The caveat is that since you're doing that by rendering into a separate DOM node it doesn't work on the server.
wait but why?
style:{{font-famyly: "tahoma"}}
dangerouslySetInnerHTML:{someOtherVariableOrFunctionCall}
@zpao
@zpao Great. Thx.
Can help with babel-eslint issues if any.
aww :cry:
See PR #3808 and related issues
Outside of the [relatively unknown word "scry"](https://twitter.com/angustweets/status/590659867926462465) being used, it's difficult for someone to tell just by name how these differ.
props are inmutables, so just states can change over time.
Love this change. Would freezing props as well kill the blocker @spicyj?
@spicyj
@zpao
@zpao Update?
@sebmarkbage @zpao
Looking at the source, it looks like there is some intentional null behavior written in, but it does behave differently from other form elements.
It currently suggests a string.
and code is
@syranide thanks :+1: PR updated.
@zpao Approved for merge?
@spicyj Is this okay?
Thanks @spicyj
Fixed as of Babel 5.4.6, thanks!
if (!!props) {
### Extra details
Then I tried another kind of input method - wubi input method, I got this:
It's weird too. So I did a test [in jQuery](http://jsbin.com/yepogahobo/1/edit?html,js,console,output):
@spicyj done in 025dc31bec11cab0ce4e5f85180112bc7c2407c9
@josephsavona Thanks for sharing these details, this proposal makes way more sense to me now.
@josephsavona This is interesting, much respect for hashing these ideas out in the open, it's really valuable. :)
@jimfb @josephsavona awesome explanations, thank you!
> Note that the alternate, indirect graph representation is a self-referential Map of IDs to Records, where records can link to one/many other records... we still don't know what part of the graph did and did not change
> @josephsavona - GraphQL and Relay represent application data as a cyclical graph, because objects in a system are typically interconnected (ex: a user can be the author, liker, and commentator of the same story). But you can't directly represent a graph as a persistent data structure: a single change invalidates the whole graph and little memory can be shared.
Specifically the `observeRead` and `observeWrite` APIs rely on observing a long lived _object reference_ which is at odds with how immutable values are represented. A more powerful API would be one level lower so the `observeRead` and `observeWrite` APIs are part of a library external to React, but the API hooks to enable them are built into React core in a way that could be utilized directly by other libraries. I agree strongly with @swannodette that this is an area ripe for experimentation and we should be supporting tools for enabling that kind of experimentation.
// pseudo code:
@ffxsam Pooling behavior was documented very recently.
@zpao can you or someone else please review this?
It's wild, that tests dont pass, becouse they fail at
@zpao done
Aborted due to warnings.
@zpao - like we talked about in #3875. :+1:
https://jsfiddle.net/n47gckhr/217/
fixes added @zpao
Didn't realize it had sent back as a 301.
Given the following piece of code:
@gaearon Thank you for the tip. Works fine!
I thought it was a react-dom thing, which I wasn't using. I wonder how it got required‚Ä¶
@spicyj oh, right, I faked the user agent because Radium wanted a real one, that's why React picked it up. My bad :sweat:
Change the order of words.
Hi Bhamodi,
Nithya
@zpao - I can take on this initiative. :+1:
But the title "div Mes infor... div" still be the same, whereas i would like to have a div with inside the real title.
/Sorry for my poor English/
## The Error
expect = require('chai').expect;
Rendering
Rendering
expect = require('chai').expect;
:visited {background: #fff}
- Magic: it looks like `data = request()` is synchronous, but the real logic is async. Might make people rage when they can't match their expected abstraction with the actual functionality of the tool.
However just a crazy idea: have you thought about a render function that could return a promise?
Might be a little too much magic for my taste, and wrapping data isn't that appealing, but its cute how simple the react component becomes.
The problem with magical observation is that invariably it seems like I always have to end up deeply understanding and designing around how the magic works, which possibly defeats the purpose of the magic.
@gaearon I've been using Meteor with React, where basically a lot of components are loading data sideways from Meteor.  Since the `react-packages`' `ReactMeteorData` mixin similarly does `forceUpdate()` and doesn't add any more state transitions like `shouldComponentUpdate`, whenever I've needed to use `PureRenderMixin` on a component, I've had to wrap it with another component that loads the data and passes it in as props.  I've felt annoyed having to do that refactoring rather than just implement a `shouldUpdateForMeteorData` (if it existed).
// in Tracker.autorun. Returned object
It's really cool/interesting, I'm just not sure we're talking about the same thing here. Also the term "observable" in the case of MobX, while accurate by Merriam-Webster's definition, might be a misnomer. When I think "observable", I think Bacon, Most, Kefir or Rx, etc.
@blesh there are many kinds of observables indeed, it's a very old concept after all (way older then just Rx). The observables of MobX are similar to the ones in javelin, ember, knockout and the killed `Object.observe` proposal, and [different](https://github.com/mobxjs/mobx/wiki/Mobx-vs-Reactive-Stream-Libraries-%28RxJS,-Bacon,-etc%29) from the ones in Rx and Bacon. It are observable _values_ instead of observable _event streams_. So there is no _explicit_ reactive programming composition in MobX in terms of operators and such. That is exactly the thing it abstracts away from.
Honestly, I'd prefer that React didn't have opinions about what async types it works best with at all, even if they're Rx observables. But rather handled generic async types via interoperability points like [Symbol.observable] or thennables
I'm having an issue with dangerouslySetInnerHTML and dollar signs.
@alitavector Thank you. I considered the library. It is my alternative.
@sebmarkbage: Forgive my need for clarity, but by "extend" are you also inferring "override" or "add new" events?
cc: @gaearon @petehunt
@spicyj done :wink:
done @spicyj
~Below is Extra information~
@jimfb rebased
``` diff
But are they there before you require react? Its a tricky beast so you have to be really careful that these are set up before everything else.
BerkeleyTrue you are absolutely right!!!! somehow I missed to include the globals before I require React!!! Amazing man, thanks a TON!!!
@sebmarkbage
@sebmarkbage
... 'componentDidUpdate' is fired alright, but I get the following unexpected values:
@melwinVincent @leftdevel thank you for joining the discussion.
Working example: https://jsfiddle.net/davidneat/qbheeyar/
@melwinVincent great news! you're welcome.
My code:
Please, could you explain the reason of the double underline in `__htlm`? Why not `htlm`? It's look... little strangely.
ok so I'm just going to re-iterate my understanding of some of the points and the example in general. @zpao and @abritinthebay would really appreciate if you guys could verify what I am saying since I'm fairly new to a lot of the JS eco system:
That is true, the attempt was to be as narrow as needed to fix the bugs, but yeah I don't check for browsers in my workarounds in userland and it has not caused any issues. though I'm sure mobile safari has some obscure reason why that might not work :P
Thanks @zpao
<option value="2">Foo 3</option>
Do you think there is a solution for this behaviour?
Thanks @spicyj
@zpao Yes, the only thing I don't know is whether there needs to be anything special done to also include and handle [vendor prefixed versions of `tabSize`](http://caniuse.com/#feat=css3-tabsize)
https://jsfiddle.net/yiminghe/jw73ccu5/1/
https://jsfiddle.net/yiminghe/jw73ccu5/1/
was undefined after component was unmounted.
I am actually working on a React app ([the app!](https://github.com/remimarenco/JsCoverageQC)) and I have a "Invariant Violation: findComponentRoot(...) : Unable to find element." which is pretty weird...
When I render it, I have an Invariant Violation error...do you know where it could come from please?
Here is the malicious code :p:
Hi spicyj!
BUT, if I remove them, React throw me a :
Here is a sample JSBin that reproduces the problem: http://jsbin.com/yahitu/1/edit?js,output
- `nwfaketop` (since 0.5.1) is used to trap the navigation and the access (such as window.top, window.parent) in this iframe.
## Problem
For SVG components that need animation, I have to write `render` method that always returns the same 'dummy' DOM so that React doesn't find any diffs and I can handle all DOM updates myself inside the `componentDidUpdate`. IMO, this results in a very non-idiomatic ReactJS code because the `render` method does not have a true representation of what the SVG element will look like after applying state and props.
@levibuzolic I am sorry. I don't think I understand.
@ameyms sorry, I probably didn't explain myself very well.
Have a look at projects like https://github.com/pleasetrythisathome/react.animate which give a simplified interface for transitioning between two states.
So are you saying I should `setState` inside `componentDidUpdate`? That seems as hacky as my current solution. That also means I will have to reinvent most of D3 code! :sad:
/cc @spicyj @vjeux @zpao
:tada:
Tapesh Mandal
See http://jsfiddle.net/kb3gN/10968/
Don't know how this is supposed to work but I think the current behavior is kind of unexpected ;)
Thanks @spicyj, I've updated the attribute to be camel case.
@spicyj The second commit is questionable. I grepped for `react/addons`...not sure if I missed anything from how the docs are built though.
My co-worker and I were caught off-guard by this behaviour yesterday, and I wanted to see if this is a possible React bug or some misunderstanding on our part.
This probably means the DOM was unexpectedly mutated (e.g., by the browser), usually due to forgetting a <tbody> when using tables, nesting tags like <form>, <p>, or <a>, or using non-SVG elements in an <svg> parent.
Here is what we've done as a workaround: http://jsfiddle.net/johnarnold212675186/zqgjjwaL/
### Repro Steps
1. Go to http://jsfiddle.net/xzucgepn/
If you open the console, you'll see "goToTwo" and "goToOne" which indicates that the "One" button's click handler ran and then the "Two" button's click handler ran (even though we never saw button "Two"").
I experimented more and came up with another repro: http://jsfiddle.net/oupyo5ou/1/
From these 2 repros, it seems something strange is going on when calling `setState` from within a native "click" handler.
value='abc'
- Safari  8.0.5 (10600.5.17)
Ah. So looking at `build/npm-react/lib/ReactWithAddons.js`, it looks like the following are the not-straight export ones:
Np! I‚Äôll take these 30 minute `[Good First Bug]`s any day!
Uncaught Error: Parse Error: Line (some number): Unexpected end of input
@spicyj thank you for the recommendation.
Hi, this code
Uncaught Error: Parse Error: Line 4: Unexpected token >
at http://fiddle.jshell.net/22nht5ws/1/show/
ping @rmosolgo are you also a react contributor?
It was a speed test from http://jsblocks.com. I looked into their test and they beat react but only with the unnecessary hidden inputs. It was a weird test and I agree you wouldn't do that in a real project.
Thanks @spicyj , you saved my life (well, at least a few hours of my time) here
Code
is this a bug?
@syranide is right, thanks
http://jsfiddle.net/utLrm52g/
@ChiefORZ I would recommend exploring flexbox's `order` [property](https://developer.mozilla.org/en-US/docs/Web/CSS/order). Might work well for you since you don't have to physically move the nodes.
<g className="shadows">
[19:32:44] <StoneCypher> mutexjp: if you started with an empty table then added those,
(two tbodies is actually completely valid, i'll point out, more to be a troll than anything, though it is true)
@cody @spicyj Thank you very much for your responses.  I guess part of the problem was my misinterpretation of the docs.  I indeed thought that the container node would be replaced.
@spicyj
@spicyj
After two days debugging, I can sure that the error is related to 73L-78L.
Not sure whether it is related to #2410.
@spicyj
@gaearon thanks for the information.
undefined
undefined
undefined
undefined
undefined
@spicyj welp, and now we're green :-)
Objects with extended prototype causes these methods to throw when
@spicyj wow you are very quick, i was just about to re-tract my pull request- it does not fix the issue, appologies, it was a case of trigger-happy-pull-request.
@zpao
@zpao Done.
[JS BIN TEST CASE](http://jsbin.com/vebiyesebu/4/edit) - _note there is no mailto: or even an anchor tag_.
Try clicking on the email addresses in the [test case](http://jsbin.com/vebiyesebu/4/edit) using a browser on your Android device to see if this is just a Galaxy S4 problem or if it's more widespread.
.modal {
.modal.hide {
<section className= "modal">
@spicyj Do you have any idea how to handle svg elements and the likes?
There's a couple of other edge cases as well (noscript tags, web components) that breaks the tests as well. Which I haven't quite gotten around to fixing other than simple ugly fixes.
Ok @gaearon What's the best way to set default props for you?
Ugh, I didn't notice jsfiddle.net was including a `<script>` like this. I can poke jsfiddle.net to update their react support to use https://fb.me/react-js-fiddle-integration.js instead, but somebody on FB's side needs to update that link to go to an [SSL'ized version](https://fbcdn-dragon-a.akamaihd.net/hphotos-ak-prn1/851561_341095626017279_6573_n.js). If you use HTTPS Everywhere (which I do), there's a [rewrite rule](https://github.com/EFForg/https-everywhere/blob/master/src/chrome/content/rules/Facebook.xml) that makes this not get noticed.
cc @zpao to see if he could poke somebody on FB's side.
https://jsfiddle.net/yiminghe/hzskug9g/2/
there is a problem with considering a singular component as existing on the sever and then on the client:
I faced problems when migrating to ES6 style - would love to help converting the documentation, this will surely help beginners or developers that aren't used to ES6 style yet!
- As many stateless components as possible, for sure.
3. Thinking in React
- Interactivity and Dynamic UIs
@gaearon I'm converting:
- Multiple Components
If this is not stepping on anyone's toes, I would like to start converting Add-Ons. (one subsection at a time, so that anyone else can work on remaining subsections simultaneously. I'll start with Animation.)
@gaearon In the documentation page 'Thinking in React', all of the code is in JSFiddle. How can I supply new code for it?
@gaearon [Two-way binding helpers](https://facebook.github.io/react/docs/two-way-binding-helpers.html) deals with mixins, so I won't be changing it to use ES6 classes. How about just using ES6's shorter function declaration style (`foo() {...}`) plus some lets/consts?
- Top-Level API
@gaearon It would help if as a community react agrees on a ES6 guidelines, because there are two types of questions.
These guidelines also will have to be a living and evolving document unlike writing in a stone.
@gaearon - so, to explain and make everything 100% explained:
@spargonaut  -  Is the form getting submitted and the event not bubbling?  A demo replicating the issue can help with troubleshooting.
Is the capitalization of xlinkHref ok?
[Check this fiddle](http://jsfiddle.net/flytwokites/kvdpa4hp/)
I know we're a special case, but this will come up for any system where you use react in a plugin when the surrounding app is in production mode.
@zpao I'm installing my own react. Is there one that I can access within react, how do I get access to that?
foo: React.PropTypes.object
When I run this in my Jest test, I get:
From the point of view of a React newbie, one of the things that stand out in the XML-like syntax of JSX, with respect to any other templating language out there, is the lack of conditional and iteration tags.
Is there a reason why JSX does not have anything like this?
I don't mean to start a holy war. React is absolutely great. It just feels a bit wrong not to have some basic iteration and conditional instructions in the XML-like part, whatever the specific syntax is.
Thanks for React!
[jsbin](http://jsbin.com/zubekijaqe/2/edit?js,console,output)
@zpao -- thanks, will do.
defineProperty [Line: 360, Col: 13], es5-sham.js
defineProperty [Line: 361, Col: 17], es5-sham.js
> @codeuniquely It sounds like you're saying that development in IE8 sucks but that there isn't much we can do about it, is that correct? Is there an action item on our end, or should we close this one out?
For me this feels horrible and scary and wrong. Is this a bug or is there another way to do what i want to do?
Please have a look: http://jsbin.com/kanayiguxu/1/edit?html,js,console,output
A second, more real-world, example: http://jsbin.com/guwipeyubu/1/edit?html,js,console,output
I just looked at the fiddle: https://jsfiddle.net/wiredprairie/bg4y9rr7/
LGTM!
http://jsfiddle.net/69z2wepo/6547/
I found it confusing that the first example shows adding a _key_ property directly to the `<li>` element, and the very next paragraph says that this should be avoided.
<option value="B">Banana</option>
<option value="C">Cranberry</option>
<option value="B">Banana</option>
<option value="C">Cranberry</option>
Not sure if it's a react issue, but maybe.
@bloodyowl You're right, i"ve forgotten that this could be the issue.
@Charca Yes i know about material-ui, i tried it, but materialize felt to be more mature and it has more features. And i hadn't any real issue with it until now. :)
@syranide `Object.create(null)` might just actually be worse in some cases (e.g. https://bugzilla.mozilla.org/show_bug.cgi?id=1066878)
I made a [fiddle](http://jsfiddle.net/zavLf6cz/3/) so you can see the problem.
1 verbose cli [ 'C:\Program Files\nodejs\\node.exe',
1 verbose cli   'react-tools' ]
9 silly addNamed semver.valid null
20 verbose request id 5b79c264902ebbf2
28 verbose stack Error: connect EACCES
28 verbose stack     at exports._errnoException (util.js:746:11)
34 error code EACCES
35 error errno EACCES
Please try the following jsFiddle code for example http://jsfiddle.net/adaniliuk/srt6mp0p/
Andrei
Felix
:+1:, this surprised me, too. Plus, I'm curious about the motivation üòÑ
React seems to be inconsistently and unintentionally normalizing some dnd events in certain browsers.
@spicyj not really, though
Where is the sophisticated example?
Is there a way to avoid this warning? Or a blessed way to return a single child?
@spicyj thanks! We are shimming React.createElement and I think some babel code is turning it into a single-element array. Wups.
@spicyj  Oh man, so sorry for the noise and the total noob mistake. I think what got me was the result. Normally I'd just get a "such and such undefined is not a function" error or similar. When this resulted in the attribute missing, I think I stopped looking at the code altogether, and only focused on where it was.
o.bar => undefined
But...
'bar' in o => false
Is this going to replace withContext?
why not just keep it undocumented like context, but first class on the react object?
Error: watch ENOSPC
Yep, agreed it's fairly specialised. For me I'm [working on a React.js framework](https://github.com/Wildhoney/Maple.js) that uses shadow DOM with HTML imports, so needed something like this for prototyping before users [vulcanize](https://github.com/polymer/vulcanize) their project &ndash; which would also include transpiling their JSX files.
:shipit:
http://jsfiddle.net/thirtydot/EDp8R/
It doesn't work correctly. Is there any known issues with React that I might be missing? or is this just the wrong way to do this?
@spicyj I modified the CSS to make container a class css selector...sorry for leaving that out, but furthermore the demo you posted doesn't work...when you resize the window the divs are all right next to each other.
@spicyj Ah! Thanks for the tip
- _document is not defined_
/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/getActiveElement.js:23
at getActiveElement (/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/getActiveElement.js:23:12)
at Object.flushBatchedUpdates (/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/ReactUpdates.js:175:19)
at Object.wrapper [as flushBatchedUpdates] (/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/ReactPerf.js:70:21)
at Object.ReactDefaultBatchingStrategy.batchedUpdates (/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/ReactDefaultBatchingStrategy.js:66:19)
at Object.enqueueUpdate (/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/ReactUpdates.js:215:22)
at enqueueUpdate (/Users/qinguo/allcodes/gitebay/NewX/go/node_modules/react/lib/ReactUpdateQueue.js:30:18)
at doNTCallback2 (node.js:429:9)
@spicyj You mean that component is called `Factory`?... Alright, that's strange. Thx anyway.
Thanks @syranide, I'm not sure how that escaped my notice.
<script src="http://fb.me/JSXTransformer-0.13.1.js"></script>
var event = new CustomEvent('event-input', { 'detail': e.target.value });
What's the issue with layers? Can I read about it somewhere?
Ah, the mystical `ReactLayer` from @chenglou's gists.
@MyBoon In the component's constructor, I bound the function to the component instance:
@koba04 why is it a bad thing? you can still use setTimeout if you need to.
@koba04 actually it seems you are right. In my complex app the callback seems to be called synchronously.
What do you mean by "new react element" @spicyj ?
@spicyj I wasn't asking for the definition of ReactElement but rather what does it mean to have a new element for a container?
However it's not clear on why `componentWillReceiveProps()` is still being invoked when a component does not explicitly receive any props. For example: http://jsbin.com/nawucuseqo/1/edit?js,console
I agree that the docs are confusing.
All lifecycles methods are so much specialized, that we have to use complicated solutions even for simple things.
@jsfb
http://jsfiddle.net/bqnhkwju/
I'm trying to run the jasmine tests in firefox and 678 of 817 fail.
@spicyj Question: what implications, if any, does this have for server/client rendering? Is the generated code on the client different from what's generated on the server? Does this mean that the checksum will no longer match when React decides whether to re-render to the DOM page on the client?
module.exports = SelectedDebug;
This gives the infamous:
I tried taking out  JSXTransformer.js, with and without add-ons, and many other configurations without luck.
thanks @spicyj,
@spicyj
@spicyj Thank you very much, it works now.
@spicyj sure :)
what's that mean?
These are also cross realm and indifferent to the number of react versions, including 0.
What's not debatable at all is that a file containing JSX _will not work as intended_ until it's first transformed/transpiled: it's not fit-for-purpose if you interpret it as standard JS, under any spec, in any runtime. It might Lint, but it does not become a usable React component and perform as intended until you convert it. At no point in the future will that situation change.
@gaearon - Do you know if there is a way to prevent Webpack from including multiple versions of a dependency in the same bundle, or a way that React could detect if this happens?
@spicyj Thanks for the super quick reply! Does React keeps track of each element that gets a React component rendered into it? What happens if the target element gets removed?
@spicyj Aah! Thanks!! This is very valuable.
is rAF batching discouraged, or just not suitable for shipping with core?
cc @syranide who I remember talked about it before
I just lost like an hour or so (and it is mostly my fault, but still...) because of this.
Anyway, the point is.... `undefined` is really common, `createElement` calls can really proliferate when rendering something sophisticated, and so it really should be checked and a warning thrown. Please.
$ ack 'mapping from style prop'
safari version 8.0.5 (10600.5.16).
When a dom's id is a number string, link `<div id="1"></div>`, use childNodes in safari will make errors.
In safari, `childNodes` will find id that equal index, it may be a error.But, all popular browser has `childNodes.item`, it will get child with index.
see the demo: http://mariodu.github.io/childNodes.html.
@zpao It's special case, the dom's id is a numeric string, like `id="1"`.
@zpao said who about OSS ever? Seriously? Is there no other public comment about this than that?
There's a fairly extensive conversation on Hacker News on what this patent policy means: https://news.ycombinator.com/item?id=9271331
> the fourth clause is super weird. [...] It might even mean you can't lobby for software patent reform.
I've always considered the consternation about this to be quite strange, especially considering the Apache License 2.0 has virtually the same clause, though possibly with slightly more obvious wording.
> the fourth clause is super weird. [...] It might even mean you can't lobby for software patent reform.
I think we're just stuck between laywercat speak and interpretation, and trying to see how it maps to typical open source expectations.
Comments like this really hurt adoption:
@syranide A license can only terminate through its own clauses. So you can not grant a license under the clauses of a separate grant.
1) Wrong way:
A bit of discipline and less of intellectual laziness from the part of lawyers would be appreciated for the benefit of all. Thanks.
@syranide Of course, you can use a BSD license and infringe a patent at the same time. It is not contradictory.
@syranide Great resources, thanks for bringing them on the table ! Yes, facts, only facts can nurture a true investigation.
When you know what license you are using, it is clear what you can do and not do, but in the case of patents, you may infringe a patent without knowing it. It suffices that you have the same idea than someone, or partly. Two people not being related to each other can work on the same idea without knowing it, and if one of them puts a patent on the thing, the other may infringe the thing, even only partly, without even knowing it. And in that case, with Facebook's point of view, not only the one infringing the patent may be pursued for it (whereas he has worked alone and for himself), but furthermore, the infringement implies that he may lose licenses for other unrelated tools and projects at the same time. One knows defensive programming, but here it is defensive licensing! Not quite OSS spirit.
@syranide Cool, that is a good point. A layman generally can see things with fresh and innocent eyes, not biased by the intellectual habits and rigidity of the so-called experts.
@syranide That said, I understand your point. You interpret it by saying that what terminates is the patent license. And I said it was the main license.
We would have been the outsiders, yes, the witness about the falseness of it all.
@Jimfb the termination clause is still as restrictive as before, they just made it in clearer wording, the issue still exists, as was explained in the conversation that @ghost and @syranide were having.
ccing @dqdinh
Babel is pretty popular, so a lot of people have already switched. It compiles JSX by default.
@zpao I'm also seeing
You can see an example here: http://jsfiddle.net/oj5eec84/.
@bloodyowl I would prefer the first option. Since React seems to have a whitelist of valid attributes, it seems like it would be easy to project a "yellow list" of warnings by lowercasing the whitelist.
Is it bug?
@syranide good news. thanks!
@syranide This is a violation of "the end tag must not be present", isn't it?
@cody @syranide :beers:
Potential problems:
[Somewhat related to #3059.]
> styles:
‚îú‚îÄ‚îÄ yargs@1.3.2
‚îú‚îÄ‚îÄ worker-farm@1.1.0 (xtend@4.0.0, errno@0.1.2)
‚îú‚îÄ‚îÄ joi@5.1.0 (topo@1.0.2, isemail@1.1.1, hoek@2.12.0, moment@2.9.0)
‚îú‚îÄ‚îÄ ws@0.4.31 (tinycolor@0.0.1, options@0.0.6, commander@0.6.1, nan@0.3.2)
This probably isn't an issue with React or React Native itself. @whyisjake, you might have installed the package ruby from npm before it was unpublished by the npm team for bordering on malicious.
Grammar fix
is the `<frag/>` syntax a proposed thing somewhere? It seems to solve a bunch of issues (like conditionals with arrays of elements) but I don't think i've seen any mention or timeline on it? Is there a place I could look for more info?
<Avatar username="pwh" />,
@spicyj  o yes,but it make me confused:
<Avatar username="pwh" />,
Thanks @zpao !
I realise contexts are basically undocumented and unsupported so this is shaky territory API wise.
Alternatively, am I using contexts incorrectly?
Is there a non-hacky way to update the children's state from a parent?
(It this is not the best way to ask for support let me know, I just don't know)
@zpao I think he was trying to merge from facebook to his own fork, but hit the wrong button.
I know how _I_ would use it, @fkling :wink:
@iamdustan: :)
Thanks for the feedback/discussion guys. Fairly new to ReactJS, but here's how we would use it (in model definitions in Django - a Python web framework).
``` python
propTypes:
Suggesting using flow seems like a pretty big leap also‚ÄîpropTypes are incredibly low friction, and very quickly provide value‚Äîadding a completely new tool and workflow (ha!) seems like an odd choice.
react 13 is really amazing but I think it has small inconvenience.
The only enhancement I made was handling an exception if, for some unexpected reason, a key can't be bound to this.
- tutorial.jp.md  ->  turorial.ja-JP.md
trudat
// special case
: renderJsonML(children)
jest.runAllTicks();
jest.runAllTimers();
Ooh that's a good idea actually @iamdustan :) What do you think @zpao?
@syranide :+1: As noted it works when using `dangerouslySetInnerHTML`. I'm just not sure what the correct approach here should be. A style tag should contain css, so one would expect that to be valid?
// The following will not parse as `2px` is not valid JavaScript.
The main issue is that in JSX everything between `{...}` is interpreted as JavaScript. But in the case of CSS the content in the brackets has a different semantics. For sure the JSX parser in babel.js could be adjusted to cope for these cases (in fact, I did this by hacking `acron-jsx`), but the result looked very confusing to me. Eventually I've ended up defining a `<StyleDef content={cssString} />` React element - you can find the code here: https://gist.github.com/jviereck/9a71734afcfe848ddbe2.
var a = <div !>url("yolo.png")<div>;
Not sure if this is a React issue or a browserify issue.
"jquery": "^2.1.3",
"lodash": "^3.3.1",
sass = require('gulp-sass');
.pipe(sass({
I have accepted the CLA.
var BugClass = React.createClass({
var Mixin =
mixins: [
be misleading at the same time, especially for newcomers.
and be source of difficult-to-trace bugs.
@syranide I understand the difficulty, but the problem is not only related to non-JSX users.
One of the most interesting features of `unexpected` is that we can define a Type of the element passed as an input, and react accordingly
This is an error example
@syranide checking for the `render()` function is a sub-optimal solution that I would love to avoid.
deep into React.
http://jsfiddle.net/92env5pj/1/
@spicyj good question. It was probably there, but I don't recall now. Why would that be a warning and not an exception itself?
<h1>asdfasdf</h1>
@runrevben In your `testcomponent.jsx` file check the exports line , there is a typo I guess, It should be `module.exports=TestComponent;`
@ibrahim12 Thank you! You saved me much frustration :)
@infolock Thank you, that was the source of my bug too.
<Foo/>
Error :
the error is so confused, and difficult to trace the error
@infolock Thank you do much!
// polyfill
se.eval(new FileReader("es5-sham.js"));
Tried to run it on Rhino but got the same result. Do you know how I could run a test to check if object key insertion is available ?
_super.bugsnag
That usually means you have multiple Reacts loaded on the page.
These are conflicting goals, so I think React would have to make a clear choice here, the options I can think of are:
@RReverser  :+1:
@alexeyraspopov
var thOne = <th ref="one">foo</th>;
I am noticing strange behavior with the development build vs the production build.
Please see bin: http://jsbin.com/pikokuboza/1/edit?html,js,output
Also, another strange thing is that on the development build the Set() works as long as the size is under 9. Try removing 2 elements from the array so the size is 8 and it will render fine on both development and production.
cc @leebyron The error comes from immutable.js.
which is pretty confusing.
React uses `escapeTextContentForBrowser` to escape `'` to `&#x27;` and `"` to `&quot;` (amongst other things). But browsers seem to unescape back to `'` and `"`, potentially causing incorrect blame in case of checksum mismatches.
Demo: http://jsfiddle.net/voideanvalue/txoe3dpa/
https://github.com/sofish/pen
and here my code:
mixins: [FluxibleMixin],
... in the following code is wrong.
I came across this GH issue while running into a similar problem and attempting to understand how parent-based contexts work (and trying to figure out if there's a bug hidden here). Here's the code I'm using to test, which can be found running against React v0.13.1 at http://jsfiddle.net/BinaryMuse/x5tkrtnk/:
Changing value...
Changing value...
http://jsfiddle.net/5qyqceaj/1/
super props
@syranide Can you give an example of that? `shouldComponentUpdate -> false` means no render, so how does this differ from using `render()`?
@syranide thanks!
Sorry for my poor English..
e.preventDefault();  // This makes the checkbox behave weirdly - if removed things are normal
this.dispatch({actionType: 'ha', ind: this.props.ind});
how is this surprising?
Builds on the warning message added by #2726
bahaha
But I have this Mime Type error in the console though:
let UnknownConstructor
// IE8
$ foo
I'm still learning React, so it's possible I'm misunderstanding something.
@syranide For me there were two main advantages.
@syranide
One solution that would be interesting would be to use Promise chaining:
else
class Unpromisifiy extends EventEmitter
+1 to @franleplant question.
return ajax(/* ... */)
const raceSafeCallbacks = callbacks;
if (raceSafeCallbacks) {
const callback = raceSafeCallbacks[id];
const raceSafeCallbacks = callbacks;
if (raceSafeCallbacks) {
raceSafeCallbacks[id] = callback;
else
@hectron I see a few issues with this approach:
@PiPeep
@zpao @PiPeep
@syranide thank you for your answer
Therefore, this changes are for formatting codes.
@zpao
At first the React manifesto was about "Composition over inheritance", what I see here is something that will bring to a different route
3) Mixins broken
4) "Other Languages!" (http://facebook.github.io/react/blog/2015/01/27/react-v0.13.0-beta-1.html#other-languages)
@syranide "React.createClass is still there" yes still...for now
@syranide do you want class system? it's ok, I just want to know more from everybody.
As you mentioned swf in the name of "proud old ugly web" I don't want to waste time anymore with you @syranide ... waiting for other guys opinion, anyway thanks...
@mirkodrummer I am unsure if it was intentional or not, but the way you replied to @syranide appears to have turned the discussion from a language construct into a personal issue. ‚ÄúI disagree with you, move on.‚Äù
@syranide My only concern is that react core does not couple to a class system, if the core is so flexible to support `class` and `React.createClass`, that is awesome, but IMHO any approach for components creation would be better that a `class` system.
@syranide :+1:
I was aware that `outerHTML` might cause issues like this at some point :\ Me and @vjeux decided that since it was just a debug message, we were going to try it out and see how it worked out.
Related: #961, #1005
@spicyj Oof. Okay, thanks for the idea!
(client) olor-white" disabled style="opacity:0.6;
(server) olor-white" disabled="" style="opacity:0
@spicyj so the markup between the client and React.renderToString on the server are the same, but the browser reinterprets it to be something different.
``` coffeescript
getNexusBindings(props) {
// binding to data in the local flux
That would bother some a lot of pattern are based on the fact that onNext is synchronous in RxJS :/
The notable difference is that I introduce explicit observable/process identity to reconcile processes, similar to how React does with `key` prop and stateful components.
That said, don't judge the code to harshly, it was done over a weekend for:
The current leading implementations are f.e. Akka Streams or RxJava. I don't know if RxJs already comply to the same interface now, the current interface for Subscriber<T> is onSubscribe(Subscription s), onNext(T t), onCompleted(), onError(Throwable t).
Can you shed more light on what is @jhusain's proposal?
I have read through @jhusain and I'm not sure about the motivation to possibly move to this spec in the future. Is there any specific advantage?
Johannes Rudolph ‚Äì spray.io
Endre Varga ‚Äì Typesafe Inc.
Maybe I go too far here but I believe that the larger context can help in future decisions.
JH
JH
@gaearon I sorta copied you. I wanted to use ParseReact with ES6 classes so I needed to reimplement the mixin's observe api as a higher-order component.
> @aaronshaf @gaearon The benefit of making it first class is:
``` coffeescript
_ = require 'lodash'
``` coffeescript
mixins: [DeclareNeedsMixin]
propTypes:
// is injected here...
Sorry if this gets a little offtopic but it seems to me that we still have to find the right sweet abstraction/API for expressing data deps at the component level.
**Cons**
@threepointone That is exactly what we did for our boundaries. It was unclear what the impact was exactly but there were perf worries from members of the team. The worries combined with the difficulty testing compelled the switch to using `React.cloneElement(this.props.child, {data: this.state.data})`
This improved our DX a lot and worked so tremendously well for our team, that we decided to publish it as [open source](https://github.com/mweststrate/mobservable). In the mean time it is quite battle proven (it provides an ES7 observable array polyfill for example) and highly optimized.
mixins: [mobservable.ObserverMixin],
Saddly, I didn't see this thread before react-europe, otherwise we would have had a nice opportunity to discuss React & observables. But big thanks for the inspiring talks! :+1:  I especially loved the abstractions of GraphQL and the thought work behind Redux :)
import r from "superagent-bluebird-promise";
I think it's a bad idea because there will be many edge-cases that hard to consider.
- Asynchronous rendering
> This method is my hackery to walk the tree, and so my question is how would having a public API for doing this kind of thing enable innovation here in "sideways data-loading," which I think boils down to "a renderer that doesn't work top-down"
// reactive data sources
@c = Tracker.autorun =>
Tracker.autorun =>
Interesting... So why not just use onChange callbacks? I've found those to be the most compatible. Whether you're using Meteor (Tracker), RxJS, Highland.js, etc., you can always integrate with them trivially with an event callback. And same with a React high-order component.
@autorun =>
Tracker.autorun =>
@ccorcos @Mitranim For a ready to use Tracker / Vue.js inspired library you could try [Mobservable](https://github.com/mweststrate/mobservable), it observers all data accessed during _render_, and disposes all subscriptions on unmount (until then the subscriptions are kept alive). We applied it successfully to pretty large projects so far at Mendix. It is pretty unobtrusive to your data as well as it decorates existing objects instead of providing its own model objects.
@Mitranim subscriptions can be permanent. Check this out.
Now there's some interesting stuff with Tracker. Check this out.
c.onInvalidate ->
@ccorcos I see the source of confusion now; it was my vocabulary. When talking about subscriptions, I didn't mean _Meteor subscriptions_. They determine what data is pushed from the server to the client, but aren't relevant to the view layer updates, which is the subject of this discussion. When saying _subscription_, I was drawing a parallel between traditional event listeners and Tracker's ability to rerun a function that has a dependency on a reactive data source. In the case of React components, that would be a component method that fetches data and then calls `setState` or `forceUpdate`.
Tracker is pretty cool like this...
@reactive
@Mitranim pretty neat -- I prefer high-order functions though. ;)
Here's the live version: https://jsfiddle.net/arunoda/jxse2yw8/
Here is the code:
https://jsfiddle.net/a6ehwonv/74/
const myFancyReactComponent = ({surface, number, gameover}) => (
LiveSurface, DynamicNumberView, DynamicGameOver,
myFancyReactComponent
It would have made thinks easier if react components could accept pojos as long as observables as props. As for now it's not possible so what I've shown above is the way we chose.
A weird this is that the following, which is barely the same to me (providing an "owner"?), does not work:
It seems to me there's a little problem when parent != owner.
Is this is bug?  Am I use Perf incorrectly?
The `onTap` listener is fired on the setState callback and produces weird behaviors with Perf
Can someone suggest what can cause such an error?
Thank you, @syranide
@syranide, I've just removed `React.createFactory` called twice in a row.
dangerouslySetInnerHTML={{
that can be a bit of an issue with type case
Also ran `grunt lint` and `grunt test`
Exception:
Error: Parse Error: Line 7: Unexpected token { (/Users/akshayp/foo.jsx)
at throwUnexpected (/usr/local/lib/node_modules/jsx_orphaned_brackets_transformer/node_modules/jstransform/node_modules/esprima-fb/esprima.js:2217:9)
at /usr/local/lib/node_modules/jsx_orphaned_brackets_transformer/node_modules/jstransform/node_modules/esprima-fb/esprima.js:5823:38
at /usr/local/lib/node_modules/jsx_orphaned_brackets_transformer/node_modules/jstransform/node_modules/esprima-fb/esprima.js:5823:38
at /usr/local/lib/node_modules/jsx_orphaned_brackets_transformer/node_modules/jstransform/node_modules/esprima-fb/esprima.js:5823:38
at /usr/local/lib/node_modules/jsx_orphaned_brackets_transformer/node_modules/jstransform/node_modules/esprima-fb/esprima.js:5823:38
@syranide Thanks for the super quick turnaround!
Error: Parse Error: Line 1: Illegal export declaration
Never mind my previous comment.  Using Babel instead.
Which is obviously completely broken.
Looks like there is an extra curly brace in the second example.
Also ran `grunt lint` and `grunt test`
Fiddle: http://jsfiddle.net/dhjxu5oL/
// Dynamic subcomponent render
I am Child!
@spicyj @jsfb Thanks!
Came across this issue today, from a bit different point of view: configuration.
@af7 If that's what you want then you need to provide the mapping yourself, there is nothing React can do for you here. React works with regular classes and classes are not magically registered with React.
@joshbedo  Yes I know, but it generates warnings which makes it a no go for me (and many others who have commented on this here on github). I always strive to reduce the number of warnings to 0
@dapetcu21 I think we don't need multiple inheritance nor mixins. I am suggesting that react should offer 2 kinds of components: `React.Component` and `React.PureCompoment`. So on all components that you want it to be "pure" you can extend `PureCompoment` instead of `Component`.
http://jsfiddle.net/22oow6ed/1/
@zpao If this doesn't make it in, I'd lobby for a warning of some kind. It's sort of alarming and confusing when you see the text from your SVG graphic appear below the containing element!
@spicyj I rather quite like that. I'm still getting grips on `context`, but I like it!
@akre54 Actually, on the related issue (#1387) there was discussion about `render(props, state)` being problematic with `replaceState` and `replaceProps`. Seeing as how they are now deprecated I wonder if that's a more realistic goal.
@zpao Amended. It's like it never happened!
- http://jsfiddle.net/koba04/qfwnr39c/3/
- http://jsfiddle.net/koba04/qfwnr39c/4/
@sebmarkbage
classnames: 'ct-golden-section',
Wow... what was I thinking? Sorry for posting a joke.
+1 bug
Thank you and my apologies for adding this as an issue.
http://jsfiddle.net/69z2wepo/3772/
# more delay to fix in safari
time.delay (if browser is 'safari' then 20 else 0), =>
@syranide I used to render modals nested in other components, but with two flaw:
- `position: fixed;` elements inside another fixed element is buggy, especially in safari
- modals are nested, stylesheets are mostly inherited, occasionally brings confusions
mixins: [mixinLayered]
propTypes:
unless @props.showCornerClose
@props.children
‚úì dispatches with type Toggle.click
I'm also seeing the same issue testing under karma and mocha.
The biggest problem we face is the lack of encapsulated styling.
I really like React and what your doing so how are you going to approach this problem?
I can't find a repo for [React Developer Tools](https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?utm_source=chrome-app-launcher-info-dialog), so I'll assume I can put this here. If there's an open source repo somewhere I can probably put together a pull request.
$.ajax({
Fix is to make shallowEqual bail if either argument is falsey (or not an object if we want to be very safe).
The code:
@sebmarkbage - made that change.
Is there any special approach I can take that I may be unaware of?
'a23d45': bool1,
'd75g63': bool2
thanks @vjeux and @matthewjohnston4
#makingwaves
@petehunt  I was reading this this thread. For camelizing. Why not change
At least the camelizing will be correct
.fa {
Ah, my bad. I also just realized that the `console.info` is coming from Radium and varies based on the support of the browser /facepalm. Thanks y'all
<!-- Flux goes here -->
### 3. Exmaple 3
Thanks @jsfb @zpao
It's not a big deal though, since custom ETags are the way to get around the `renderToString` cost anyway.
@qwtel An interesting point, the only reason for it being random is to avoid conflicts with multiple server-side renders on the same page... perhaps the devs will object to the API bloat, but being able to provide a custom react root id would make sense. (In the future this will likely go away altogether)
Is this perhaps a duplicate of #2605?
Ideas?
@spicyj said I should open an issue here. Disclaimer: I'm trying to do sort of sketchy things, and I know this isn't supported, but I think it would be nice.
Aria
Alex Mykyta as my name is fine. Thank you @zpao.
@zpao Yeah that is fine by me :)
Or did I do something wrong?
It's a bad pattern in my book, and [Jordan explains why](https://github.com/facebook/react/issues/613#issuecomment-29280175):
@syranide The trouble is when setup needs to call methods that also need props, which needs to call methods which also needs props... Eventually your entire component is plumbing around props.
But decided it was an anti-pattern due to the subtle bugs it can cause if you forget to pass newProps.
What about `componentWillMount` and `componentWillUpdate` @iammerrick
So tell me, @me-andre, why do we have both `componentWillUpdate` and `componentWillReceiveProps`?
In my opinion, it's because they serve different purposes and both are helpful. Just like those two are not the same, `render` is not the same as the hypothetical `componentDidReceiveProps` because it's called for reasons other than new props; plus, you aren't given access to the previous props.
Obviously, "[ugliness] is in the eye of the beholder", because adding a proper lifecycle method seems like a much cleaner solution to me.
However `componentDidReceiveProps()` as it was described in this topic does not represent any component state or condition and it doesn't give an access to anything `componentWillReceiveProps()` does not. It just adds a slight syntactical sugar which may or may not seem useful or easier - this is a **personal preference, not a technical requirement**. And that is exactly the reason why it shouldn't be added: it's subjective. You say passing arguments is ugly - but you also said "[ugliness] is in the eye of the beholder". For me it seems like you've answered yourself.
@me-andre you might be responding to me (@kmalakoff) and @robyoder at the same time. Or maybe not, but I'll take this opportunity to move the discussion forward...
super(props)
super(props)
I don't feel comfortable saying that but if not, you possibly shouldn't request new features for the tool you're not familiar with. For me that even sounds... absurd.
Yes, your entire approach is a hack. And who told you `componentDidReceiveProps` would guarantee the `props` have been changed? Nothing will ever do that unless you define `shouldComponentUpdate`.
@me-andre thanks for jumping in but you're being a bit too abrasive for my tastes. Also I don't believe you understood my questions. I'm quite familiar with what `componentWillMount` and `componentDidMount` do. I'll wait for @jimfb's response.
Also, could you please clarify what you're trying to ask.
@akinnee-gl , if you use Flux, then you don't need to set the state from a store. Unless it's absolutely impossible, you should maintain the state in one place. When it comes to Flux that place is the store itself. When the store emits change, you just `forceUpdate()` and then in `render()` you `read()` your store.
@me-andre I really like your approach of just reading out of the store during render. It does seem to simplify the code. I worry that you lose some efficiency by doing that though. You lose the ability to control updating via shouldComponentUpdate, and it requires you to add that extra FluxWrapper component that you mentioned. Any thoughts on that?
// do something else
If anyone wants to participate in a wider range of solutions, please join us there!
``` es6
super(props)
@akinnee-gl , having an application composed of many tiny components is much better than of a few heavy components for a several reasons:
If the API requires people to write custom superclasses for basic and common control flow patterns, it strengthens the argument that there is a case for the API to be improved.
@kmalakoff , what I'm talking about is that API improvement is absolutely available for you right now: you can make your own factory of components and then share with us (along with use case samples). This will make your proposal and rationale hundred times more clear. Since all lifecycle points already have appropriate callbacks, you can introduce any new method at any lifecycle point / component state. You can even mixin an event emitter into your component and make it possible to attach several handlers for a state change.
@shea256 , one possible reason for `componentWillReceiveProps` not to get triggered before first render is that there's no such thing as `this.props` at that time. What you commonly do in `componentWillReceiveProps` is comparing `this.props[propName]` with `newProps[propName]`. Having the method triggered before 1st render would make you also have to check for presence of `this.props`. Moreover, the whole component is completely uninitialized at the time it receives `props` before the initial render, it doesn't even have `state`.
@akinnee-gl , the reason not to introduce a new method for just accessing `this.props` on update is that we have such method - it's called `render()`. It even gets called after a check for `shouldComponentUpdate()` - which is normally a place where you do `this.props !== newProps` or `_.isEqual(this.props, newProps)` etc.
@me-andre the premise of this issue is not that we cannot achieve what we want with the current API nor that we cannot work around the current API in client code. The premise of this issue is that **the current React API is sub-optimal and needs to be improved**; for example, if you were to come up with principles of what an optimal API would look (like I tried to above), the current React API would score in a mid-level range because it is suboptimal / deficient in a number of areas.
Ok, you come with an API improvement proposal, but then you show the code which is way too far from "React best practices". Some things seem very much like worst practices. Then you tell: "that is the reason for a change". Yes, that is the reason for a change but not in the React codebase.
@zpao I have processed your comment :)
Ah I already thought it was weird that I was seeing such weird format (a lot of spaces :/) and I branched from gh-pages since the person in the issue referred to it. I though it was a special branch for the website.
thanks @zpao!
@magalhas http://facebook.github.io/react/docs/component-specs.html#updating-componentwillreceiveprops is the right place to do this AFAIK
mixins: [Router.State, someMixin],
I don;t really understand what "prop mutation is deprecated;" means and what the implications are about it being deprecated in 0.13.
// add the style props
-  wilRender  [Mixin]
var OtherDataMixin = {
return OtherDataMixin;
Effectively passing back a custom collection of objects with various values that are being used.
The issue is that for some reason this is all getting flattened into this.attributes
I could logically have understooed if it adding the custom property to this.props, which would then be
props: Object
between the
### Dot
consider this React Class...
//  How can I refrence the Dot?  A Ref?
### This feels wrong
This seems dirty
When using AMD, a component might use React as a dependency.  This poses a problem when another instance of React has already manipulated the DOM.  The wrong events get fired, or ID collisions occur (_Invariant Violation: ReactMount: Two valid but unequal nodes with the same `data-reactid`: .0_).
jsbin here:  http://jsbin.com/riqotavoxa/11/edit?js,output
The cases I've seen are usually around addons or 3rd-party widgets/scripts.
@charypar said: "The other issue with this is you can't reliably use the dependency injection mechanism, e.g. to change the batching strategy, while using components from multiple modules where each has it's own instance of React as a dependency. Even if they are the same version of React."
+1  Seeing similar issue in many places with the error being shown from #2402, I have to write in AMD since our company uses Esri's JavaScript API, which heavily relies on Dojo.  I have one module which creates a component and returns the result of React.createClass.  Somewhere else in the app we will call React.render(&lt;MyComponent />, someNode); and it throws the multiple instances error.  I can get around this by returning something like <pre><code>return function (node, props) {
@zpao what issue is this now tracked under  please?
Here is a fiddle demonstrating the issue.
http://jsfiddle.net/69z2wepo/2913/
Anyways, that is just a guess, but this seems incredibly problematic and I believe it is a Reactjs bug.
@iamdustan yeah, this is somewhat my question.
@spicyj Ok, check [this thread](http://aeflash.com/2015-02/react-tips-and-best-practices.html#comment-1865388399), the idea is to use a hierarchical object that mirrors components tree of the app.
In what rare case could it possibly not fire?
@syranide helped me to find out that this might be related to malformed html content used in `dangerouslySetInnerHTML` and it actually was the case.
https://jsfiddle.net/yiminghe/1hx6b2dn/1/
http://jsbin.com/lahuda/1/edit?html,output
http://jsbin.com/lahuda/3/edit?html,output
@zpao Any updates?
this.setState(this.state.set('foo', 'baz'))
@clouddra I am not sure your solution works... doesn't it simply take the latest `props` and `state`?
@yakka My solution is the same as yours except but I listen to store changes in the parent component.
it('calls childFn', function() {
// Assuming we are using jest, this is a mock
expect(mockChildFn).toBeCalled();
Drag me by the handle
class Card {
<div className='draggable'>
Drag me by the handle
I monkey patched `ReactRef` to do so and it's working fine, but I would prefer to be able to avoid monkey patch.
|--lib
Because of above ternary operators, React is not working in IE8.
> 22 √¥√•√¢√∞. 2015 √£., √¢ 21:25, ironyee notifications@github.com √≠√†√Ø√®√±√†√´(√†):
@zpao I feel dumb!
@spicyj thanks.
@sebmarkbage
@elsassph keeping those properties allows JIT compilers (such as V8) to match the "hidden class" of the objects. Generally speaking this should give better performance.
@trueadm You'll benefit from that anyway, there will just be more "hidden classes". I suspect there's nothing to be gained in this context, the performance difference is small and spread over the whole project it's unlikely to even be measurable and if you overdo it you're actually increasing the cost as a result of dealing with larger objects and more processing involved in creating them (again probably immeasurably). So I would say it's largely counter-productive, if you're rendering large lists it may be a good idea to keep the signature the same (so the hidden class is kept in fast cache), but even then I doubt it's really measurable.
@syranide The performance can definitely make an impact. As you point out, it's very good for large lists of virtual nodes, where you need to aggressively diff them. This is one of the many reasons why Inferno gets very good performance, especially when it comes to complex node tress that rapidly update.
Generally there is a single code path being repeated and it's a very unusual setup if you're mixing keys with no keys and refs with no refs in a list.
@syranide It looks great on benchmarks if done right, but in the grand scheme of things, it's unlikely to make much difference as the app code the user has created is most likely to be the bottleneck in any case, but it's worth having if you can get it for free at a compiler level.
`'someString'`
@spicyj wasn't that referring to the hidden class only referencing props that were constant/static? Sorry, maybe I misunderstood what point of mine you were referencing.
Did some initial prototyping in babel/babel@2703338ee20ee721800149fdff6fc120096b757b. Pretty rough and there are quite a few edgecases I can think of that it doesn't handle but it's a good start.
@sebmarkbage
Is this transformation potentially dangerous?
@spicyj Ah ok, that's great to know! Thanks.
Thought it odd that ReactJS would tell me to go look at "undefined", so I looked into the source... I'm not sure what's going on but
Here's a [simple example](http://jsbin.com/hebuhukaho/1/edit?js,console,output) and the top of the stack I rummaged through to get this far:
@chicoxyzzy This change is for convenience. So two variable declaration statements kinda negates the point - that's what I do now anyway. And, the `import` works with babel but not with jstransform.
@spicyj great - thanks!
It was just a side note.
@jimfb Yeah, I want to use JSX :)  I just realized I will probably need to use the [Babel 5 React options](http://babeljs.io/blog/2015/03/31/5.0.0/#react-optimisations) in my webpack babel-loader options, right? Both `optimisation.react.constantElements` and `optimisation.react.inlineElements` currently give me `Invariant Violation: React.render(): Invalid component element. This may be caused by unintentionally loading two independent copies of React.` I'll sort it out...Thanks!
@spicyj Thanks for the clarification!
It's just my point of view as an international learner of 'React'.
Will it change in the future?
@gaearon the big difference between the two approaches is that the mutation observer would only catch the offending scripts/extensions that _you_ run, not the unknowable combination of extensions users of your app have installed. Using a warning like this helps you think about that before the problem arises.
Should I be calling `event.preventDefault()`? Will try a jsfiddle now ...
http://jsfiddle.net/michaelheuberger/4jg2z343/7/
@spicyj Oh I see, thanks.
http://jsbin.com/rupumi/2/edit?html,js,console,output
@browniefed I'm sorry, I can't follow you. Don't understand what you mean with synthetic event. Do you think you could update the code there?
http://jsbin.com/rupumi/4/edit
// Dependencies
<path fill="rgba(164,165,161,1.00)" d="M34,4h2v2h-2ZM59,6h1v1h-1ZM37,7h2v3h-2ZM61,8h1v1h-1ZM62,11h1v1h-1ZM63,12h1v1h-1ZM42,15h1v4h-1ZM34,17h2v3h-2ZM31,20h1v6h-1ZM42,21h3v2h-3ZM42,23h2v2h-2ZM34,25h2v2h-2ZM35,27h1v1h-1ZM58,31h2v1h-2ZM58,32h1v1h-1ZM39,37h2v2h-2ZM56,39h2v1h-2ZM57,40h1v1h-1ZM61,41h2v2h-2ZM54,42h2v2h-2ZM30,43h1v4h-1ZM33,45h2v5h-2ZM45,45h2v3h-2ZM45,48h3v2h-3ZM42,49h1v2h-1ZM28,50h1v2h-1ZM62,51h2v1h-2ZM31,52h1v1h-1ZM61,52h3v1h-3ZM31,53h2v2h-2ZM42,54h2v3h-2ZM46,54h2v2h-2ZM52,55h2v2h-2ZM46,56h3v2h-3ZM46,58h2v2h-2ZM29,59h1v1h-1ZM29,60h2v1h-2ZM30,61h1v1h-1ZM39,62h2v3h-2ZM29,64h1v2h-1ZM39,65h1v3h-1ZM22,67h1v1h-1ZM37,67h1v2h-1ZM22,68h2v1h-2ZM21,69h2v1h-2ZM8,70h2v1h-2ZM21,70h1v1h-1ZM8,71h1v2h-1ZM60,71h1v2h-1ZM26,72h1v1h-1ZM25,73h2v1h-2ZM32,73h1v1h-1ZM34,73h1v1h-1ZM26,74h1v2h-1ZM28,74h1v1h-1ZM30,74h1v1h-1ZM33,74h2v1h-2ZM39,74h1v1h-1ZM28,75h2v1h-2ZM34,75h1v1h-1ZM37,75h1v1h-1ZM39,75h2v1h-2ZM29,76h1v1h-1ZM64,80h1v2h-1ZM16,81h1v2h-1ZM16,83h2v1h-2ZM55,83h1v2h-1ZM16,84h1v1h-1ZM41,84h1v2h-1ZM17,85h1v1h-1ZM43,85h1v2h-1ZM19,86h1v1h-1ZM40,86h1v2h-1ZM44,87h1v1h-1ZM3,88h1v1h-1ZM3,89h2v1h-2ZM3,90h1v1h-1ZM25,92h2v1h-2ZM36,92h2v1h-2ZM1,93h2v1h-2ZM26,93h1v2h-1ZM37,93h2v1h-2ZM2,94h1v2h-1ZM30,94h1v1h-1ZM37,94h1v1h-1ZM23,95h2v1h-2ZM30,95h2v1h-2Z"></path>
I am unaware of any reasons why the drag events aren‚Äôt working on SVG elements for you. I‚Äôll try to take a look over the weekend.
@zpao
**Bug**:
false,
// are requested but not supported
@gaearon That's interesting, because it was the `leave` to `leave-active` switch that fixed the bug for me. Moving the transition from `enter` to `enter-active` was only done for consistency. If you're curious, here's the CSS I have now that works:
@yaycmyk I understand and agree that double clicks are unusual but I am working on a large UI where double clicks are very important. We cannot change that behaviour, otherwise many customers get confused. We are currently migrating to React and it would be sad if there is no double click support.
Good point @syranide
else
http://jsfiddle.net/ye3bgs3x/1/
> top of jasmine. I‚Äôm pretty sure it uses jsdom.
Swapnil Netankar
Moved to facebook/jstransform#70.
All of the CDN'd content is available over HTTPS, SSL ensures a more secure connection, and I can't think of any downside to doing this.
https://dragon.ak.fbcdn.net/hphotos-ak-xpf1/t39.3284-6/10574688_1565081647062540_1607884640_n.js
I don't think this is supposed to happen.
(this issue still shows up prominently in search results)
@paglias I am sure you'll find the "Umbrella 0.13" issue interesting: https://github.com/facebook/react/issues/2809
My Code / test
Hey @zpao, I'm having a similar issue.
The "blur-on-destroy" thing feels like a special case, though, so if you all think it'd be all right, I'm happy to swap in
http://jsfiddle.net/kb3gN/9630/
http://jsfiddle.net/53n8kgu3/10/
otherwise.  This made getting things like `<Foo bar=(baz) quux={biff} />`
bar
{ baz}
@syranide I meant the `, \n` nitpick was off topic, not your comment.
@syranide Sorry, I pushed the wrong branch
Wow.. it's really weird. I'll check it
@zpao rebased
As 'for' is a reserved word it causes an error in IE8, so I've added an additional regex to check for it. I thought the regex can be easily extended if other specific attirbutes are found that need quoting
Invariant is probably too harsh for this, but I'd be all for a console warning.
Seems like this is also a dupe of #1587
It seems to work fine in this fiddle http://jsfiddle.net/69z2wepo/2130/
@aronallen That fiddle does not work for me, it shows an empty object.
it seems the error lies with console.log in safari, not React, I am resubmitting this bug in apples feedback.
Here's a JSFiddle illustrating the problem:
http://jsfiddle.net/2o5bjst2/1/
I was reading through #2749 / #2940 and noticed inconsistent usage of `calls.length` and `callCount` on Jasmine spies.
@zpao done! :tada:
@gaearon The only drawback is when you have the spec _SpecPolicy.DEFINE_MANY_MERGED_ (like _getInitialState_) and you want to merge the results of the exactly same function twice.
@zpao Without the variable the line gets too long, doesn't it?
Am I misunderstanding something or?
Yes, I use `onMouseUp` as crap patch.
Can you confirm that this fiddle is broken? http://jsfiddle.net/sua850oc/
http://jsfiddle.net/sua850oc/7/
// \uFEFF has the potential advantage of being zero-width/invisible.
// children. Definitely want to avoid this.
Okay, the node in question was **"section"**, which is unknown to IE8, which causes it to throw up badly if you try to set its innerHTML. Changing it  to **"div"** fixed the issue :dizzy_face:
@littlee http://reactjs.cn/ Ê≠§Â§ÑÁöÑÁøªËØëÂæóÊØîËæÉÂ•ΩÔºåÂèØ‰ª•ÂèÇËÄÉ
@pfraze That is a good idea, i could try that. Converting DOM mutations into transferrable objects may be hard though.
@ pfraze, did not understand your comment about react-workers as a plugin sandbox. Can you please explain ?
Ok it was silly :p thanks for the answer.
@syranide Would it be possible to reopen this, and keep this as discussion for implementing this in the React core, and use the other thread as doing it via JSX, just so we can explore all options.
I'm very new to React so maybe there's something I'm missing, but it seems like this is a bug.
@spicyj
- grabbing something like an initial render is fairly straight forward but grabbing render changes seems really akward... [why does something like this not work for example](http://pastie.org/private/oz5tiz88gcveiektiqa)? The documentation only really mentions in passing how to get it for mount/unmount which is not the common case; the common case is how it performs for **any** state changes (the mount/unmount cost being preferably measured as part of the cost of the parent state changing)
// would also be helpful; as much transparency as possible
// ...animation etc...
+1 I am developing in both React Native and React DOM and find the React Native way of merging styles very convenient. It would be great if you could give this a higher priority. Thanks!
![qrcode](http://i2.tietuku.com/4caf7c3ee496b454.png)
@spicyj Thank you for your reply, maybe you are right. Although I do not read Reactjs's source code and do not understand how it works, but the issue exists actually. Please test on a real ios device but not simulator.
Maybe safari make something wrong.And the example of code is very simple, so it can exclude my wrong.
@dexbol If you go to https://jsfiddle.net/3vyx97hc/embedded/result/
You can see the same bug in safari replicated in just basic JavaScript (non-react).
@camspiers Thank you very much. I am sorry for my carelessness. It is just safari's bug.
Signed the CLA.
Thanks @spicyj, I'll close for now.
<!-- Invalid -->
But createElement is variadic, which is a problem... some potential solutions (where meta is an object with key and ref):
// breaking change
@syranide
@syranide Can you explain what is the "big cost"?
@syranide
I think for the majority of cases the perf difference is going to be negligible.  What this really would help is those of us that are turning to Immutable.js or ClojureScript and currently have to program around the props object to fit whatever paradigm we choose.
@syranide, the only readable way to do it requires compile time transforms for non-changing props.
@syranide
In particular, CSS styles are especially useful to consider as manipulable data‚ÄîI often use large, nested ClojureScript data structures to express elements' CSS styles, later dynamically merging them together and adding and removing keys from them at runtime.
@syranide
@syranide Right, thanks. I'll make a separate issue for that, then.
@cigitia 1. Yes, 2. Yes 4. Yes. As for point No. 3, I would prefer the options that are used by React.js internally to live in their own argument, and not be mixed with opaque user data.
@syranide You seems to the only one in this thread not seeing the benefits of using anything else than POJSOs for props objects. No offense but there are many that see it, the reasons were explained here.
Check: http://jsfiddle.net/Simek/e0nragnp/1/
That's why I find React`s definition a little bit weird. It is still the same textarea, with identical behavior in all cases (a controlled update of the value after some changes), but if that value is null, we now call it "uncontrolled".
edit: Just spoke with sebmk
@sebmarkbage Sorry if this is a stupid question, but is it possible for React to look up the component instance associated with an element that triggered an event, and then just `call` the handler with that component instance as `this`?  That shouldn't really be a breaking change; any handler wired with `bind` would have the bound `this` still take precedence.  And arrow functions do seem to support `call`, though of course the value passed in does not override the lexical `this` that exists where the arrow function is created.
Sorry if that's a stupid question - I'm still relatively new to React :)
nice trick to know @tgriesser thanks
at jdk.nashorn.internal.runtime.Context.load(Context.java:680)
at jdk.nashorn.internal.objects.Global.load(Global.java:877)
nashorn.eval("var window = this;");     // workaround
I do like the mixing of `several` and `server` into `serveral`, unfortunately it still has not been accepted into the dictionary. :smiley:
grunt test
grunt lint
Given the following input code
I'm not entirely sure what's causing the issue here:
I'm sorry for being a GitHub newbie! :(
return <img src="aaa.jpg" />;
> and there's probably something else that is funky as well.
var fragments,
Third party APIs or heavy database requests can cause this.
@AbrahamAlcaina Dynamically generating anything complex on-demand is obviously going to be costly, you'll need implement caching or pre-build static responses yourself.
thanks guys @spicyj  @syranide  and good job.
@spicyj do you have any quick pointers on where to look in the source code, if we want to try an optimization? Low hanging fruit kinda stuff?
thanks a lot @jimfb @spicyj ! We love to work with react and will try to hold on.
@spicyj yes! From our preliminary tests it seems that this decreased the mean render time from 50ms to ~38ms!
@spicyj  I did some test using react.min and the performance increase x2.
ab -n5000 -c1 http://localhost:3000/
ab -n5000 -c50 http://localhost:3000/
## Changed
ab -n5000 -c100 http://localhost:3000/
## Changed
@mufumbo it changes the problem from blocking the web server event loop to how well the cpu parallelizes work from multiple processes. If you use a finite pool of processes (not sure if this is the way to go), the worst case is that you develop a backlog. If you do, it means that you need more servers. Because the event loop isn't blocked, you can send the necessary messages to cause autoscaling to kick in.
@brigand that will be the same than use node clusters. But with node cluster you don't pay the price of  data commute between the web server and the queue. And you should be fine to scale, since the web server is stateless.
@aickin excellent ! Is there a drawback with using your solution at the moment ? (Other than it is alpha) I'm happy to help test it. Also it might help to document what kind of changes you made to the standard ReactDOM to support streamable components.
@aickin This is super awesome!  Also curious about the above @geekyme's questions.  I've got a server-rendered app with average response times of 100-200ms that I'd love to try this on when it's stable enough!
@aickin I may just do that : ]  Just need to make sure I'm watching for the right issues while it runs.  Any recommendations other than watching latency and general exceptions?
- exceptions
@zpao Apologies (and thanks for the gentle guidance!).
That's a bit snarky.  Many people are interested in this and don't want to risk it getting deferred due to a presumed lack of interest.  And three months is probably a reasonable amount of time to wait before checking to see whether it's still be worked on..  At least it wasn't a +1.
@gaearon thank you, Dan! Appreciate the truth. Hope they will find time for this or someone writes a good PR. When things will be different, hope they announce the changes here in this issue.
R.e. suggestion from @zpao
It's probably just a typo :-)
completed CLA
One of the biggest pro's of React is that it's simple.
That's not code, that's a fashion statement.
@syranide
reactMixin(Foo.prototype, someOtherMixin);
@gaearon
@syranide
Based on the discussion here and elsewhere it seems the general move is to simply cater to only ES6 with everyone else as third class citizen, at best.
[ClojureScript adepts find it very useful](https://twitter.com/swannodette/status/560554408782864384):
'blur',
mountAt
the most flexible would be
+1 @Aetet.  BEM and React work very well together; I think that should be linked to in addition to something designed to work with 'normal' class name strings (i.e. classnames).
{genderOptions}
n.b. I haven' t tried this, and it might end up being _too much magic_, but I think it would work out.
Ok updated @zpao
ping @zpao
just "signed" the cla :shipit:
damn. that would've worked for slack!
You can use React.createElement to render your classes (http://jsbin.com/suvoqesozo/1/edit)
I still have a minor problem, which appears when there is only children. If yes, `PropTypes.arrayOf` stops working.
Verbose, but it works.
It's rather odd‚Ä¶ here's the video recording: http://recordit.co/0AYbaF6WCa
@zpao That would be my guess, yes.
@sedovsek interesting. I had no idea this would be a rabbit hole of information. I had no time when I reported this to dig deeper. Good work!
a specific example of the css I am trying to modify can be found here.
They also call super
function protoclone(proto){
(http://jsfiddle.net/xgdm73a3/2/)
[Claims above come from playing with [this jsFiddle](http://jsfiddle.net/3bn73ey5) in Chrome 40, Firefox 35, Safari 7, and IE 11]
could someone update the babel issue link?
They have moved to `phabricator`!!
Here's the problematic example: http://jsfiddle.net/kb3gN/9185
_strange_, when you change the `<p />` to `<div />`, it suddenly worked as expected :|
/cc @zpao
Related code:
I'd be happy to use DevTools hook for walking the tree but from what I understand, once DevTools uses it, I can't hook into it again.
Can we have `Children.filter`?
Right, I see. What about exposing `flattenChildren`?
You can implement your own Children.toArray:
**syranide** wrote:
@spicyj Thank you very much!
@spicyj if it was possible to alter the key with `React.cloneElement`, maybe that would be simpler?
I'm doing this by wrapping the Children utility:
Thanks for the advice @spicyj !
Ah...I guess the problem here has always been the inconsistent casing of these vendor prefixes in JS. It's indeed `node.style.webkitWhatever` for webkit in JS.
@sebmarkbage BTW that's not always true. see #2864 and #2868
you mean className?"
If you are interested, see [here](https://github.com/reactkr/discuss/issues/4) (even though its mostly in Korean):
You get cryptic output (empty array) and nothing happens. This caused me an hour or two of confusion, and I tried checking the docs and eventually just read the source for `jsx`, saw it uses `commoner`, and found out from further digging:
> This is weird because we're passing a prop to a child, then making the parent read into it to determine some stuff.
Did you mean to have the quotes around Select and Option, or are those supposed to be references?
- I got frustrated with the lisp problem `['div', [['div'], ['div', [['span'], ['span']]]]]`. Lot's of trailing braces. I prefer hyperscript or something like it where it's `h('div', [h('div'), h('div', [h('span'), h('span')])])` it's a small thing but it helps.
mySecondProp: 'foobar',
function jmlToNative(node) {
return jmlToNative(jsonML);
@spicyj I might be wrong, but IMO it's exactly one of those things that should be actually standardized by spec, if we want people to feel safe when using it and to assume that it will work in the same way everywhere (so they don't catch weird runtime bugs).
Andrei
- on blur displaying possible warning
More code:
Also, I'd be wary of saving anything DOMish in stores, they should hold the data.
@byelims could you explain the overall goal? e.g. what is the component supposed to do. There might be a way to do it without `DOMish` things in the store :)
Fetch [issue-1](https://github.com/roman01la/github-issues/tree/issue-1) branch and run `npm install -g webpack && npm install && webpack` to build the project.
@spicyj Whoa, thanks! But how exactly this exception is being caught in the Promise? I can't get it looking at the call stack.
@spicyj @roman01la I am just curious if you have the same problem (or you know the solution) with the silent exceptions in reactjs:
@spicyj thank you very much!!!
tiny typo
@jquense According to the [README](https://github.com/petehunt/react-classset) react-classset has been deprecated in favor of the above mentioned library.
@graue
if there are more than three, ‚Ä¶ eeh, [test it yourself](http://jsbin.com/mepolaqeze/3/edit?js). doesn‚Äôt work, that‚Äôs for sure. (make sure you use the browser console, not the JSBin console to see what elements are actually empty instead of set to ‚Äúundefined‚Äù!)
yeah. it‚Äôs pretty strange that it special cases arrays without reason. i‚Äôd say we just change #2362 to unconditionally do `delKeys.forEach(function(delKey){ delete nextValue[delKey] })`
The string here was initially accurate, but got out of sync with reality
cc: @yungsters
@vsiao The docs state that cloneWithProps is for usage by a component that does not own the target child, but in this case, isn't `ButtonToggle` the owner of the `Option` components?
``` cli
72    0.2%    0.2%  LazyCompile: bind native v8natives.js:1578
them.
-rw-r--r--    1 andrew  andrew  475037 Jan 21 14:00 JSXTransformer.js
It may sound like a noob question or just crazy, but I ask anyway :)
@gaearon
@chenglou
[Here you can see an example](http://jsbin.com/zarimegenu/1/)
you mean className?"
@sebmarkbage on second thought - disregard.
@Dakuan you could use a lint tool like jsxhint or islint, they help a lot for catching such errors.
throw new Error("Fluxxor.FluxMixin is a function that takes React as a " +
Hou
SVG images are an important part of my current project - is there anything I could do to help push this issue through?
I've created a [rough jsfiddle](http://jsfiddle.net/uhe5tgoh/1/) that demonstrates this.
this confuses me too
React could provide a converter between Children and Array.  It'd probably look something like this:
Thanks @brigand for a great reply. One thing that confuses me, however, is that I'll typically invoke `React.Children.map` as such:
I think a larger question I have around React Elements as children is how we are meant to interact with them if we have an opaque interface. I've updated a [jsfiddle here](http://jsfiddle.net/uhe5tgoh/2/) which tries to demonstrate this -- it wants to shuffle a list of children, each of which are React Elements. I would love to get some thoughts on what the best practice is for solving this problem. Your converter from Children to Array seems plausible, I'm just wondering why it hasn't been a problem for others yet -- it makes me think I'm just missing some bigger picture here :)
For fun, here's [an implementation](http://jsfiddle.net/uhe5tgoh/3/).
brigand, why are you using slice in your code above?
@Dyscrete if I just returned the array then sometimes (but not always) `toArray(this.props.children) === this.props.children`  .  That would mean that toArray couldn't promise that you're allowed to modify the returned array (if you decide you want to do that).  It's mostly just a point of consistency.  (If you're not aware, `array.slice()` is a convenient way to shallowly clone an array)
<h2 class="commentAuthor" data-reactid="blabla">
testleft <b data-reactid="blabla">somebodypx</b>
@sebmarkbage
raw     gz Compared to master @ 8d5838af728a425ca17595c074b6d3ef16015eda
I think these are incorrect
@zpao ok I'll try to
I think this is inconsistent as well:
@zpao ok thank you I'll try my best to fix inconsistent places. Just for clarification, I was not very clear saying
There are two approaches in current master:
- and not using it (in this case warning becomes noop)
Does it matter to add `__DEV__` flag before `warning` or not?
@zpao so I've chose to use `console.error` because I believe it semantically closer to `invariant`'s `throw new Error` then `warning`'s `console.warn` #2868
Minimal: [jsbin](http://jsbin.com/butuwazuca/2/edit?js,output)
@rabishah ran into (on IRC).
@zpao, sounds reasonable, I don't think there's any valid reason to have a semicolon there.
i am not sure whether it is a bug,but it will be nice if `this` refer to `MyCircle` element
// extraProps  from outside
extraProps //!!!
See http://jsfiddle.net/r0tyv3nq/1/
And thanks for React :-)
var regex = /^data-/;
if (regex.test(key)) {
// transforms to
The event object seems to lose all property values within the `setState()` callback function.  Here is a [jsfiddle](http://jsbin.com/bitabowaju/2/edit?js,output) demonstrating the behavior.
@sebmarkbage
@zpao
Hou
// vs a hypothetical safe variant
this.enqueState({a: incr});
this.enqueState({a: incr});
Moritz
Am I doing something wrong or is this an actual bug?
``` coffeescript
@props.children
how to do this in coffeescript? what is the equivalent syntax for this?
and <tbody> children, but encountered thead, tr*100
InvariantViolation at FooComponent: <table> may only have one <thead> child, but
InvariantViolation at FooComponent: <table> may only have one <thead> child, but
nested forms:
Thanks @andrewrota
If you try to load the HTTPS CDN location for react, `https://fb.me/react-0.12.2.min.js`, the browser gets 301 redirected to `http://dragon.ak.fbcdn.net/hphotos-ak-xfp1/t39.3284-6/10574693_1499509230337635_2056748217_n.js` which is an HTTP resource, which is then rejected by browsers because of "https everywhere" requirements. Additionally, sites with explicit CSP won't let this redirect through even if the browser was told to ignore https-everywhere enforcement.
// Resolve mock instances
// If this is a mocked class, we treat the legacy factory as if it was the
var OtherComponent=undefined;
which is wrong but not obviously so.
@gaearon As long as a stack trace is long enough to contain the function calls in your code, there is nothing inherently wrong with having lots of react stuff in the stack traces. Libraries should be a black box except when things fail. It's when things fail that you want to be able to see what happened. If you can't see what happened in that black box, you can only effectively debug errors causes by incorrect usage of a library/framework. Debugging problems in react code becomes harder and people who encounter them can't give as much information to contributors of react to figure out if something in react needs to be fixed.
First off all thank you for building this amazing library and sharing it with the rest of us.
http://jsfiddle.net/682tqxw3/6/
@boljen what are the mouseevent*capture events? I never heard of them... also see the [list of mouse events](http://facebook.github.io/react/docs/events.html#mouse-events)
So I'd say this does look like a bug.
mixins: [mixinTest]
Quite odd indeed...
But there's nothing to say I couldn't put those in an array. The only reason I see for the warning in one case and not the other is because when you use JSX an array means you're printing out a list of items and it's more likely that is something that should be keyed instead of simply basic child DOM elements.
I guess this was what you said in last comment‚ÄîI just can't see any reason why there should be a difference in plain JS and JSX behavior.
@syranide those who maintain React components and upgrade from `React.createClass(...)` to ES6 classes should bump major version then. Probably a good thing to be noted in 0.13 release announcement.
I'd love if that was the case btw
![jidivnu](https://cloud.githubusercontent.com/assets/635512/5594806/222452a2-9283-11e4-9ba4-914bc64a17fe.png)
@gaearon That's cool. I can wait. Thanks :)
@spicyj ty :)
![That React... so hot right now.](https://i.imgur.com/iUIIuqb.jpg)
@timbur
@timbur
@zpao sounds great
JSFiddle: http://jsfiddle.net/rickbeerendonk/3cm3sso5/
@gaearon `componentDidMount()` can be used for constructing purposes. `componentWillUnmount()` can be used for destructing what was constructed in `componentDidMount()`. If a component builds on something a mixin has already constructed, it should be removed before the mixin additions are removed. Destructing should be in the reverse order of constructing.
mixins: [A, B],
behaving differently from
mixins: [A, B]
@spicyj AFAIK the "mixins are legacy and deprecated" line was modified, so shouldn't this be addressed after all?
Also makes the a few other attribute types use lowercase (primitive) naming, to be consistent.
Thoughts? Have I invented an issue where none exists?
Just to add to the confusion:
// insert setState code
There might be a use case for an unsafe setState, but I can't think of one - it's certainly the more unlikely case.
I wrote a mixin, but due to limited access to internals, I am not happy with the result:
Don't want to pile on, but I think an additional issue (I can open a separate issue for it maybe?) is that isMounted is meant to be used as a guard against an unsafe setState, but during componentWillUnmount, isMounted is true but it is not safe to call setState.
the code that triggers the error is
<MyComponent someProperty='lallaa' someOtherProperty={5}>
@gaearon wrote:
> If we use camelCase for ‚Äúcustom‚Äù component attributes, you get inconcistency between casing for custom and DOM component attributes.
Sorry, clear to me now that React is run by folks with short attention spans and poor design decision making faculties.
And why would you want that distinction? I find myself often making tiny wrappers around DOM components that proxy most props but have some custom logic. Which convention would I choose for `tabindex` prop of my custom `FlexibleTextArea` which wraps a `textarea`?
That was the misunderstanding, and now @akiran's [suggestion](https://github.com/facebook/react/issues/2782#issuecomment-68263926) makes sense to me, and your response, likewise, also makes sense.
Thinking it over more, I actually don't understand entirely this response that @zpao gave to @akiran:
This is probably my n00bness speaking, but that seems to be a misunderstanding of the suggestion.
https://groups.google.com/forum/#!topic/reactjs/xovHWHGHPCA
I got here wondering the same thing as @taoeffect, and from the conversation I think this is a documentation issue.
Hrrmmmm... ok this must be a Reflux problem then as their mixin above definitely doesn't work when used within a mixin. Will investigate there. SORRY FOR THE FALSE ALARM! :-)
Sorry for my bad English :)
@vanesyan it's possible with the ES6 option :
@bloodyowl Good example. Would agree with @RReverser 's reasoning in the linked issue (explicit destructuring is less ambiguous and captures the process more effectively), but I suppose it's a rather subjective matter.
Too bad that `<Component foo />` has a different meaning in JSX :smile:
Maybe this alternative is good enough, though:
With https://github.com/RReverser/es-borrowed-props proposal, you will be able to:
my react conde http://jsbin.com/losugiqoje/2/edit?html,js,output
Yes initially the props "dados" is empty, but the form does not appear too, when I click to open the modal the props is updated and receives the due value ...
http://jsfiddle.net/h2pc9103/
Technically though a child cannot be mounted in the DOM if the parent is not yet mounted.
Technically if `componentDidMount` was defined as "dom element was created and added to the document" then the order is wrong, since a child cannot be in the DOM before its parent (it is a tree). The child can exist but in can't be in the document.
So, still a bug in my opinion.
state[id] = "dummy" // something more complex happening here
http://jsfiddle.net/thheller/rtbn2L0w/2/
This is surely a bug.
// Simulate bad connection
@syranide Nice! :)
Here's a jsbin:
@gaearon's right.
@spicyj I would love to tackle this, but jumping in I am a little lost in the huge codebase. I found `ReactDom` which seems to be the place that defines all the built in DOM nodes. But I am unsure where the proper place to warn would be. I am also unsure where the proper place to put the test would be (ReactDom-test, ReactElement-test, ReactElementValidator-test, ReactJSXElement-test, etc.)
Over a month and still no word, this there something wrong with this PR?
@syranide When you say lesser, in what way?
That enables me to define custom elements by providing it's field anotations:
{/* wanna hide something? you got conditions! */}
In that scenario, suddenly being told to use python felt weird, because why would I have python when I already have node, and that's a thing I should let you know. As such: there it is. Do with it as you will, although if arguments are given why not to change that feel like they're based on assumptions about users, I'll be a counterpoint =)
@syranide I simply "blur()" the button before closing the popup.
code:
@bitplanets
**CSS**
Hahahaha, @spicyj It has been a _really_ long day. I apologize. I'm an idiot.
var BackboneMixin = {
I guess there are multiple ways to skin both of these cats; `dependsOn` definitely wouldn't be a silver bullet.
fi
My love is dying...
gets transformed to:
console.log(baz.$Foo_id);
Might this be some special treatment intended to make `this._private` properties less susceptible to use from outside, or collisions in class hierarchies..? Regardless, it would be nice to be able to turn this off when not wanted.
this._secret();
_secret() {
// do secret things
derp._secret(); // illegal private property access from outside
this.$Foo_secret();
// do secret things
derp._secret(); // will error
I'm seeing this error:
http://jsbin.com/kejuzipara
http://jsbin.com/kejuzipara/1/edit?html,js
This link is live (for now): http://jsbin.com/zoxohuhoye
foo: Symbol(),
bar: Symbol()
let MyMixin = {
mixins: [MyMixin]
~~Personal I translate 'Rest' to 'Áïô‰Ωô', which sounds like literary word.~~'
this code
@sebmarkbage
@sebmarkbage I completely understand and agree with you that unminified errors in a real live production app are a bad idea.  However, they would be a big help when _testing/debugging_ the production build in a sandbox, because sometimes errors occur in production that _don't occur in a development build_.  So I think an option to have unminified errors in a production build, with documentation that explains all the drawbacks of using it for anything other than testing/debugging, would be the biggest win for developers.
false,
childrenString,
@gaearon ‚Äì¬†will `__PROFILE__` additionally keep error messages intact? And can we realistically recommend to React + Sentry users that they can safely/confidently use `__PROFILE__` in production?
So if I can be a bit provocative here, is production really the place where you want to see these errors? Is your setup hard to unit test? Maybe I'm missing something here.
> So if I can be a bit provocative here, is production really the place where you want to see these errors? Is your setup hard to unit test? Maybe I'm missing something here.
Since it was an object, the error message **would** have been (were it not stripped):
http://jsfiddle.net/ghmpo42k/6/
leave: "animated tada"
leave: "animated tada"
leaveActive: "animated tada"
There are few options what to do:
Are there any special cases on type="submit" compared to type="text" when it comes to the value => defaultValue to make it uncontrollable?
https://yadi.sk/i/l90baQ8QdBTnW
This thing is blowing my mind. I suggest something wrong with getters/setters let me know if you know teh root of teh problem
What @spicyj stated is obviously correct
@edbo Did you find the issue and came up with a solution?
@leoselig are you using lodash? It seems that errors are getting eaten when they occur within a `_.each` callback.
My workaround was to monkey patch a `catch (e) { debugger; }` after the `try {}` block...
@ash14
I am using lodash but I could not trace it down to be an issue related to it
@leoselig ah yes using `.done()` at the end of the promise chain propagates errors nicely :+1:
@ash14
http://jsfiddle.net/tiagorg/5L9qxnsq/ any suggestions how fix it
@coyotte
I totally agree with the reasoning you've laid out @sebmarkbage. I can give you some color on my particular scenario, which I also admit is something of an edge case.
@wereHamster how would this translate into JSX, using the `createElement` does allow you to break things up but not sure how this would be achieved via JSX unless to passed the props as an attribute e.g.  `<Test ref='test' props={myProps} />`
...ror
var FancyCheckbox = React.createClass({
<div className={fancyClass} onClick={this.props.onClick}>
<FancyCheckbox checked={true} onClick={console.log}>
</FancyCheckbox>,
var FancyCheckbox = React.createClass({
<div className={fancyClass} onClick={this.props.onClick}>
<FancyCheckbox checked={true} onClick={console.log}>
</FancyCheckbox>,
To come up with a contrived example, lets say the selection state changes the rendered component's width, and the parent needs to calculate a new position to account for this new child width.
let el;
import Promise from "bluebird";
import Promise from "bluebird";
import Promise from "bluebird";
@philikon
> let el;
<Foobar />
).then((foobarRef) => {
doSomethingWith(foobarRef);
The incorrect code:
//The 2 above loggers will shown "undefined" and "3".
A JSX column was recently added to http://kangax.github.io/compat-table/es6/, which should give a pretty good overview too :)
@zpao ok, I guess. Thanks.
diff: diff
Anyways it took me a while to realize it was the culprit, anyone knows why in heaven's name doesn't it throw?
I see your point.  I'm now learning React though tcomb-form, so I'm not aware of React's workflow.
Not sure if this is suitable for the video section but I think it could help a lot of people coming from the rails world (my background).
still one `frameowork` in there.
@zpao, made the changes
If the contents of the `<option>` element is constructed in special way, it breaks React on component update with "Unable to find element" error. Here's an example of `render` method body:
Just hit this http://jsfiddle.net/kg7g09cq/
@spicyj Can you please reopen?
@gaearon yeah, there is is!
But I don't see why for the number 3, the node to which we attach the event shouldn't be affected if not located in a shadoroot, no?
I realize that might sound crazy, but how about storing in the react element if it has is "shadow react" element? If the property is false, we bind to `container.ownerDocument` else to `container.previouslyStoredShadowRoot` at least the parentNodes lookup will be done once/element instead of once/event?
http://jsfiddle.net/u2b6dac8/2/
<div setCustomEscapedHtml={ this.props.foo } />
In my case our custom escaping function properly handles the case of `<a href="javascript:alert('I can execute arbitrary javascript');">`, as well as many more complex cases, and has both an extensive test suite and has successfully made it through several external security audits. The mitigation above does improve the code somewhat, but it would still be nice to have a less verbose way to invoke it.
@submitHandler = jasmine.createSpy "submitHandler"
Does jest have any remedy to this problem?
Jsfiddle:
Vasco Pessanha
Hi aackerman,
Vasco Pessanha
OutSystems
This is the actual exception:
My instance was a bit more extreme and if something like this happens to someone else they'll probably know where they screwed up in the first place, but some help from React would always be welcome!
@johanneslumpe Yeah, I became aware of that when I figured out what the issue is, I was just thinking it would have been way more helpful if React had told me straight away that I was passing an undefined component to `createElement`.
than:
propTypes:
Based on that error you are loading 2 Reacts
@browniefed In my app there are more than 5 components mounted to Backbone Views if you mean React components. Why is that a problem?
i is undefined
chauha3@cooper.edu
@zpao Anything else I can do for this? I can also just close it if it's not really necessary.
Categories
http://jsfiddle.net/gvtm0q2h/4/
http://jsfiddle.net/gvtm0q2h/5/
I'm curious though, is there a reason to just not use random always?
I can't figure out what would be so different between Object.defineProperty and directly defining prototypes, other than the fact that properties set on the prototype aren't automatically enumerable.
**ES6 code**
https://twitter.com/webreflection/status/560929583974088704
@sebmarkbage Any thoughts ?
Maybe related to #2533
http://jsfiddle.net/kb3gN/7887/
http://jsfiddle.net/wqpzmg7b/1/
`undefined` or `null` mixins are simply ignored right now. Referenced [here](https://github.com/facebook/react/blob/ef3558546838b7c5ce8db3874dcfd669082ac896/src/class/ReactClass.js#L430-L432). You're looking for an early error or a warning?
mixins: [button],
@gaearon That is the method I am using, but from a fairly new user's perspective, the expected behavior based on the docs I found [here](http://facebook.github.io/react/docs/reusable-components.html#default-prop-values) and [here](http://facebook.github.io/react/docs/reusable-components.html#mixins) was either my concrete class would totally supersede the mixin or that it would merge the values.
buttonText: 'Other Text'
The one major downside I see here is the verbosity of the code, especially since almost all of it is boilerplate.
@gaearon Yeah, with children it is great!
cc:// @vjeux
Great question @jquense, the trouble is that the only way to pass something to an instance form outside of it right now is by using props... It is useful to pass things in so you can pass in different implementations at test time. This also forces you to code to an interface instead of an implementation. Mocking at the module level is problematic for the reasons I listed above which is why I am hoping react will facilitate a different style. Does that answer your question?
<MyCustomComponent className="baz">
although I'd rather like a jstransform that would let us do :
[customClass] : true,
Sorry for the title, but it was a WTF moment for me when I found that to compare a property to an object schema that the method call was `shape`. When you read your documentation it makes only slightly more sense than when you see it in code, which is to say it makes no sense when you see it in code.
Anyway, I know this isn't the highest priority item in the world but I would love to request a name change to this method, or at least a synonym that makes more sense like `schema`, or really anything other than `shape`.
I'm not necessarily advocating for `shape`, just suggesting its origins. FWIW I think `schema` feels foreign in this context.
@mczepiel I understand why and how the terminology is being used but from the standpoint of the API Facebook is making special effort to ensure that the readability of React code is instantly understood.
I agree with @mbrio, the current `objectOf` doesn't seem very useful. There are few applications I can think of where an object could have properties of only one type, and even if they were, the properties would better be described by a shape with declared names just so they'd be properly documented.
// new behavior
Where this gets confusing is in how it handles wildcards mixed in with properties:
@Pouja seems to be the same, yes.
@spicyj - could we keep it open and change the request to a warning?
http://jsfiddle.net/f1v1fac1/
http://jsfiddle.net/f1v1fac1/2/
http://jsfiddle.net/wn7ymsa4/3/
http://jsfiddle.net/27bqLvLL/1/
// uncontrolled
But for the overall picture, I think you're right. There should be a clearer distinction between controlled/uncontrolled behavior, that avoids edge cases like these:
> I believe it's input that is misbehaving here, not textarea @syranide
@syranide You are right, there are still transitions between those two types. But there would be fewer ambiguities/inconsistencies.
Can you explain why you find `value={null} equals controlled` so counter-intuitive? I feel that if that behavior was intuitive, then we wouldn't need an extra page explaining this phenomenon:
@syranide why not prevent components from going from controlled to uncontrolled?  Makes sense to me.  If you wanted to do that you could just use something like
@syranide > Huh? If it's controlled then it by definition always shows the correct value.
@yungsters by that logic it's also the developer's responsibility to sanitize all input but we still have `dangerouslySetInnerHTML={{__html: ...}}`.  The point is about aligning with developer expectations and intentions and preventing them from shooting themselves in the foot.
@yungsters I think you misunderstood me.  Underscore has established an accepted precedent for merging default values, where defaults always overwrite undefined values.  If you handled them any other way it would surprise developers.
@rymohr I agree with you 100%. I stumbled into this issue because I was dumbfounded by how `textarea` behaves so illogically.
To any other peons out there wondering why this doesn't work, here's my ghetto fix:
@yungsters please reread my comments if that part's still unclear.
@spicyj see https://github.com/facebook/react/issues/2533#issuecomment-63731720 above.
@spicyj here's a better example: http://jsfiddle.net/wn7ymsa4/12/
@spicyj that's a good practice to follow in general. Controlled components feel like an exception though. Sticking to that approach leaves you with a bunch of `value || ""` calls that are easy to forget, and you're completely ignoring the developer's intention to provide a value for the input (signaled by passing a `value` prop).
@syranide @jimfb :+1: sounds like a solid plan.
http://jsfiddle.net/0ozjykdo/1/
I have encountered a JS error when trying to set innerHTML of a node in IE-8 browser.
Stealing my ideas.... :-P
<Child foo="baz"/>
<div>baz</div>
>         <Child foo="baz"/>
>   <div>baz</div>
var ViewMixin = {
(**[fiddle](http://jsbin.com/radakepusi/2/edit?js,output)**)
@gaearon I think in that case you need to re-render everything and so `shouldComponentUpdate` won't have an effect of pruning subtrees. Otherwise context will be in inconsistent state with element tree.
http://jsbin.com/geseduneso/2/edit?js,output
Where is the inconsistency?
@sebmarkbage
Yes @gaearon .
@slorber Calling `unmountComponentAtNode` makes bad user experience, since it causes the loss of all local state.
@gaearon Any plans to look at this soon? I'm interested in jumping in on this as it seems this is one of the final pieces of making context fully usable. (might be something else I'm missing?)
@Chrisui
@sebmarkbage @Chrisui @jimfb
I really like the Symbol thing. The over-reliance of the context on the string keys across a potentially alien tree always had some bad vibe.
For example, if two libraries depend on a parent-child wormhole in a third library, and happen to use independent copies of it, those copies wouldn't clash or see each other. Sure it's a weird scenario to imagine, but it seems more consistent.
I'm not so sure about the "wormhole" analogy, the broadcast scenario and the i18n example are the ones where i've run into the problem the proposed PR aims to solve.
For instance for I18n, is anyone passing down the key-value pairs directly?  Or are you just passing down an unchanging reference to an object components can get values from and observe?
We may need some special form of fragment or placeholder this API can use to explicitly tell React that a DOM node disconnected from React should be kept in a specific location.
That can be don't without a super special internal node. But then again the idea of a special low-level type of react node that renders as a noscript (the typical react hack for null returns, etc...) and declares that its nextSibling is a DOM node that should be kept in that location but otherwise ignored by React would be a really interesting node type that could be useful in fixing a variety of other bugs.
@fatfisz I don't know well your use cases, you could also have a require('foo') that points to a window property only on client
encapsulation is not respected maybe, but well..
(@gaeron)
what's confusing is that React docs don't invite much to use context, they are like optional props actually, where you get them when you ask for them?
@cauburtin not at all, at any point the user can choose a different language, and at any point the user can resize the browser‚Ä¶
Wout.
(typed on mobile, excuse terseness)
> Wout.
> (typed on mobile, excuse terseness)
Wout.
(typed on mobile, excuse terseness)
Nono, I don't doubt that they are cheap, it is just that it is much easier
Wout.
(typed on mobile, excuse terseness)
Repro case:
<div attr="&abcdefghi"></div>
fails with Unexpected token ILLEGAL, while adding _one_ more character after the `&`:
<div attr="&abcdefghij"></div>
... which is quite surprising. Not sure what is going on here.
- inauguration (too wordy to actually use, but a short synonym could work)
@gaearon @zpao thanks.. the actual reason for the request is I'm currently using yahoo's flux tooling so I can pre-render server-side and client-side...  I noticed I had to pass context from the outer to child nodes in order for child nodes to request a given StoreMixin ...
@aackerman
@syranide
Thanks @zpao :)
@spicyj No it won't, try the experiment: http://jsbin.com/nuhice/9
- Safari 8.0
For instance, 2 columns normally, but 4 columns at >=1200px
@zigomir I see your point, but the community is having problems even getting going with React JS. There are no best practices on what tools to combine it with to actually build a web application. Nothing about how to use it in your workflow. Not even how to set up a test environment. It is extremely frustrating. It is not very nice to create something this awesome and push people on a google search hunt for several days before they have something that works for them ;-) This is based on my own experience and the feedback I have gotten. I did not want my example boilerplate to be the only example in the official docs, I want Facebook to officially start sharing practices with the community, something that would hopefully evolve into best practices at some point.
Maybe I am being a drama queen about this, but it can not possibly hurt the community to give them more information on how to use React JS?
Why does this depend on Jest?
This will be equally tough to break free from `Jest` with the latest revision to ReactTestUtils.js:
The challenge of breaking free from `Jest` here really boils down to the fact that the way other mocking libraries would stub/spy on the render method uses different syntax.  For example, with `sinon`, you would use a [stub](http://sinonjs.org/docs/#stubs), and do:
mockTagName,
It almost feels as if this `mockComponent` method does not belong here - but in something jest specific like `ReactJestUtils`
@sebmarkbage
super nitpick!
Is this a bug?
http://jsfiddle.net/9yvs1zu5/6/
Nice work @spicyj
transpiles to
mozTransform :      transform,
And another strange thing, the `-o-transform` , is actually `o-transform`, so without leading hyphen. But worse of all, the rotate value I change/animate, don't change at all, I see the code running through the console, but it just doesn't update the style object..
Also translateX with capital X doesn't help
<div className = "Scrim" />
It's weird that `transitionName` is set on the container to determine the class name of the child.
<i class="fa fa-envelope"></i>
<i class="fa fa-envelope"></i> <strong>Read All Messages</strong></a>
thanks for reading this long rant and hope for a solution soon
Totally missed that angle! My apologies.
> Hmm, an interesting special-case, but I'm curious... won't pressing CTRL-B or w/e wrap the selected text in <b>?
@zpao No, you can't just ignore it because it's shouting it in your face by outputting an error in the console.
Showing some React :heart:
Is this a expected behavior?
@syranide `foo` was an example. Actually, this happen with `this.something.anotherthing` inside a `onClick` event.
@syranide: exactly the weirdness I'm trying to avoid. I'm going to update https://github.com/hughsk/envify/pull/14 with the latest `jstransform` and hopefully @hughsk and get around to reviewing it.
// not there
Luke
`layerX` & `layerY` properties aren't standard
http://jsfiddle.net/58Lwdopw/
throw new Error('crap');
@spicyj Should we label this as `big-picture`?
var a = b.c; // Raising exception...
Can anyone point to an example of `unstable_handleError` use in v15?  I can't seem to figure out how to make it work :/
@zpao That would be awesome!
@tkafka Were you able to resolve the issue? I am trying to package my code into separate bundles - vendor and app. I am faced with the same issue. I tried various combinations of `-r react -r react/addons`, `-r react/addons` alone, `{"aliasify": {"react": "react/addons", "react/addons": "react/addons"}}`, etc. with no luck. Thanks!
@pgollakota Yes, that's what worked for me, I can't verify that the syntax you use is ok (might it be the case that multiple arguments should look like `-r aaa bbb ccc` and if you call `-r aaa -r bbb`, you will get only the last one)?
For reference I would paste what author of Capybara ( @jnicklas ) wrote on ticket I attached on bottom of my post:
``` ruby
Reference: https://github.com/jnicklas/capybara/issues/203
https://github.com/jnicklas/capybara/commit/c9ba16cd08fd1f878d09ef778516240c78fbbd2e
``` ruby
I've ended up monkey patching Capybara Selenium. Granted, it'll only work on the Selenium driver, but it doesn't require any changes to the test suite.
``` ruby
class Capybara::Selenium::Node
/cc @amasad @zpao
@syranide Do you know what is the actual limitation for allowing components to return arrays as a render result? I'm curious to know and investigate deeper.
The real problem here is the message: you wouldn't believe that `document.body` "is not a DOM element" and assume something else is wrong, without realizing it may be empty at the time.
It does however and in a strange way: `event.target.value` does not equal "fixed"
(the value of the input field for all times) but either "fixe" or "fixed{oneOtherCharacter}".
http://jsfiddle.net/kb3gN/7005/
http://jsfiddle.net/qjohd7ut/
@syranide Thanks for the feedback.
@chenglou When will those changes be pushed live?
So the error must come from something else.
And I use JSX to write everything, so in theory, I shouldn't be even seeing this error, according to the update logs (which is beginning to become a bit of a hassle to read through, as the docs are just changed, and no refferal to 'old ways' are pointed out, or no real migration examples or 1 by 1 comparisons... )
// Arrow
// Arrow
It seems like if components export createFactory's then the module can't be used by people who use JSX without spewing these errors to the console, so the solution is for users to always wrap all requires in a createFactory which seems a little tedious IMO. Is this right?
@contra, that would seem logical to me as well, but apparently we need to import them with a factory, which I think personally is very messy.
@spicyj What do you need? I still don't know why these warnings show, as the documentation is not clear
@spicyj, right, I'm sure I had tested that before, but that indeed fixes the warnings, as expected, thanks!
Unfortunately, that is not always true, and the time is variable(probably with cpu load).
For now I'm using `dangerouslySetInnerHTML` as a workaround .
<option value="B">Banana</option>
<option value="C">Cranberry</option>
at ygrenzinger.ReactServer.lambda$null$72ee30a1$1(ReactServer.java:91)
@zpao @ygrenzinger: I was/am having the same problem with `nashorn 1.8.0_25`. I put up [nashorn-react-fail](https://github.com/zertosh/nashorn-react-fail) with a minimal test case to reproduce it. I think it's a Nashorn, not a React, issue. Debugging this stuff is a pain in the ass so I don't know for sure - but I did find a "workaround".
@sebmarkbage @zpao
I'm not sure why this changed but it did.
@Natim - I swtiched to 0.11.2 and continue to have the problem.
switched*
@Natim - Updated the title.
√©crit :
Here‚Äôs a fiddle: http://jsfiddle.net/06kfekLk/
will transform into the following in the build/helloworld.js file:
I think it's too radical! At least the doc should explain something like "ES6 only , you can use transferPropTo() function for compatibility".
Due to this case , I feel React is not credible.
There are popular words in Chinese "Ê≠•Â≠êÂ§ß‰∫ÜÂÆπÊòìÊâØÂà∞Ëõã"  that means ‚Äú If your step is too big, your ball will break up‚Äù
propTypes:
@spicyj @zpao @syranide
I guess throwing makes sense, but the error message is too cryptic:
@spicyj i'll work on it.
`"regexdash"`:
![react-enaqx-jshint](https://cloud.githubusercontent.com/assets/182219/4782568/cf733a9e-5cfb-11e4-87b3-10188aa82c29.png)
Interestingly, doesn't happen in safari, but FF is affected (however different values for CSS properties):
http://jsfiddle.net/5f0ujc8m/1/
Because there is no warning right away when this happens, they usually discover the problem through invariant violations. Some of them are descriptive (e.g. `Uncaught Error: Invariant Violation: The handler for Route "hello" must be a valid React component`) and I think I even saw warning that said something like "check if two copies of React are loaded", but some are really cryptic: `Invariant Violation: addComponentAsRefTo(...): Only a ReactOwner can have refs...`.
(To clarify, I was referring to @syranide'a comment)
+1 ; thanks gaearon
@charypar said: "The other issue with this is you can't reliably use the dependency injection mechanism, e.g. to change the batching strategy, while using components from multiple modules where each has it's own instance of React as a dependency. Even if they are the same version of React."
alias: [
@spicyj when using browserify it can happen just when requiring two different versions of React because of the way it handles deduplication. Requires with the same path and code between the two versions can end up getting de-duped. Modules where the code/require path was changed between versions get deduplicated and others don't.
@mathieumg There's a button :)
I'm looking everywhere for the sneaky react twin, but no luck.
Insidious.
@ameensol As you've hopefully set up package.json correctly, then simply remove `node_modules` and reinstall everything, that usually fixes it unless there's some incorrectly configured module.
Isolating the issue into [this repo](https://github.com/ameensol/fluxette-react-router/tree/router%400.13.3) gave me the following error:
@aphillipo you might try upgrading to `npm@3`, then `rm -rf node_modules; npm install`. `npm@3` has improvements in how it handles dependencies and is better about avoiding multiple instances of a given package, since it installs with a flat structure instead of nesting dependencies within packages.
externals: {
@rasmusfl0e no, I didn't realize that at all. Thanks for letting me know.
Thanks again for this discussion! Means a lot to me when sensitive topics can be discussed civilly and freely without attitudes getting in the way :-)
> Macros.
Somewhat relevant: https://github.com/jussi-kalliokoski/react-no-jsx (a JSON-type alternative syntax to JSX). :)
@syranide: `React.createFactory()` is boilerplate too, especially if the component contains a lot of HTML elements. As for unnecessary allocations, productivity > performance most of the time. You can always use `React.createElement()` directly in the parts of your code where this becomes a problem.
https://github.com/gcanti/uvdom
if (b.delay) {
if (b.periodical) {
- props are undefined here ...
> mootools
but mootools is using by the old webpage, I can't remove it now @bloodyowl
@graue How do you do this? [`render`](https://github.com/facebook/react/blob/master/src/test/ReactTestUtils.js#L372) does not return an instance.
One last (maybe stupid) question, what does `scry` mean?
So, I am trying to use Shallow Rendering and have it mostly working...the only thing left I can‚Äôt figure out is the recommended way to mock events and how to get `children` with events to pass. I've attempted to use the method directly from the `import` in the test (`<a onClick={Accordion.toggle}>`). This seems dirty‚Ä¶is there a way to just say `<a onClick={Function}>` or something? I could post this on Stack Overflow, but I have had very little luck finding good information about Shallow Rendering online. If anyone has experience with shallow rendering and can give me some help you will be my hero...
const transitionToSpy = jasmine.createSpy('transitionTo');
FAILED TESTS:
Which makes me think I'm getting the context mocking wrong.  Do you know how you successfully mock context with `shallowRenderer`?  I'm using Jasmine (as you probably guessed!)  I have a feeling I'm close...
I don't know if this is by design or if I am doing it wrong, but I am using Bootstrap to style my application and one of the features I am using is popovers. No I dont like doing:
Here is the corresponding Jsfiddle:
http://jsfiddle.net/y5x517us/
@syranide Could you check this ?
- FlexRow: <div class="row"></div>
- FlexColumn: <div class="column"></div>
@syranide what would be a good test case to exercise this logic?
@spicyj I concur it's a tad beyond the beginner level :sweat_smile:
Ack, only now saw discussion in #1807, where @syranide argues that it is preferable to `set` the property to `undefined`.
-    we can give a single key or an array or object of keys, while in mongo its always an object
mongo‚Äôs behavior makes no sense:
See the following JSFiddle, for an example of one of the possible implications of this.
http://jsfiddle.net/Lhoqemev/2/
@syranide  Yes, I understand. But if we can both find some common use, I would appreciate. I would not like to keep a different fork of react.. And other people might even use it this way.
I'm not sure what the best way to do this is yet.
Reviewers: @zpao @spicyj @syranide
Greate feature, I love it :+1:
@spicyj Something needs to happen, because right now ReactTransitionGroup is practically unusable when used in combination with something like react-router, and passing props from the parent component down to the children.
This is still broken.
to convert to
@syranide Nice. I think sweet.js plus https://github.com/mxw/vim-jsx will do the job. :D
Just wondering if you've considered a way to make custom events? Something like this could be used in a parent:
"jest": {
‚óè Store ‚Ä∫ it encountered a declaration exception
http://jsfiddle.net/1etmp5fn/
Can clue what is wrong?
Hey @spicyj,
Is [`scryRenderedDOMComponentsWithClass`](http://facebook.github.io/react/docs/test-utils.html#scryrendereddomcomponentswithclass) some kind of joke name? What's "scary" about it? Or does this stand for something else?
Specific to Safari - breaks update.js addon in this place:
@zpao
@zpao @spicyj @sebmarkbage
@syranide The height never becomes smaller, so I don't know how to force the minimum height.
@mjackson Very interesting indeed. Thanks for the heads up, I hadn‚Äôt figured a way around that yet :metal:
but because Objects are unordered, a hack is described there how to try to work around that fact.
the problem is that this is an unspecified implementation-detail.
about the facebook-does-it-so-it-must-be-ok argument...i'm not sure how to respond to that...
d.a({
(I hope there's a less hackish solution though!)
Repro:
jsFiddle](http://jsfiddle.net/kb3gN/6165/)
The Polymer way seems pretty tempting to me.  Honestly I'd be using Polymer instead if it had IE8 support :P.
Or they could add looping to JSX and it'd probably look about as good.  We're already preprocessing the script, so anything is possible here.
Really?
Awesome, thanks @syranide !
believe I've run into the parent/child problems despite having deeply
> Everytime I've heard Backbone and React mentioned in the same sentence it
Hi ‚Äî Thanks for creating this ticket! :rainbow:
// Lots of setStates here
Which had all sorts of odd effects on my application, where seemingly random UI components just went missing. Presumably this is because the < p > and < h1 > combination isn't valid like this, and my markup was just plain bad.
The spec for menuitem says it should not have a closing tag. What was the browser behavior that needed to be corrected with the closing tag?
a dangerouslysetinnerhtml
@syranide Look at your flux example:
- I think internals should also have "_" prepended at least to be understood that are internals, because those seems public.
Paulo Jorge Dias
Paulo Jorge Dias
I'm still getting this error, even when using react 0.14.x or the newer react 15.0.2. I'm not sure if I'm just missing something else that needs to be updated. I'm writing a library so I'm only using react, not react-dom...I'm not sure if it's babel or something else.
var whole_png = require('../../assests/images/star-whole.png');
var half_png = require('../../assests/images/star-half.png');
"name": "ui-elements",
"keywords": [
"ui",
"url": "https://github.com/QuietOmen/ui-elements/issues"
"babel-cli": "^6.4.5",
"babel-core": "^6.4.5",
"babel-eslint": "^6.0.4",
"chai": "^3.2.0",
"isparta": "^4.0.0",
"mocha": "^2.3.4",
"node-sass": "^3.4.2",
"rimraf": "^2.5.0",
"sass-loader": "^3.1.2",
"skin-deep": "^0.16.0",
"npmName": "ui-elements",
var elapsed = Math.round(this.props.elapsed  / 100);
npm run jest
http://jsfiddle.net/smmyxz2s/1/
There's a reasonable chunk of the blog post taken up explaining the gymnastics being done to extract the dispatcher callback, when (as I understand it), dontMock would be a bit more straightforward.
border-top-color: black;
border-right-color: black;
border-left-color: black;
http://jsfiddle.net/z8c58sc9/2/
@rhobot
Made those changes @syranide . Thinking again it was actually redundant to do those checks. And yeah, assigning `var node = stub.getDOMNode()` makes much more sense as the operation was being done everywhere. Thanks for the tips!
=== Problem
AFAIR `displayName` is currently used for that; also, any modern engine generates stack trace not just from explicit function names but also from property names they're assigned to and a lot of other information.
@zpao thanks!
In that case, you wouldn't be able to pass custom attributes such as `data-*`, `aria-*` for DOM (but can be any other names for custom components).
@RReverser
@syranide
The previous wording could be interpreted to mean sub-trees moving from within one sibling to within another, rather than the shuffling of siblings on a single level as intended.
extra: []
var badExtras = !!errors.extra.length;
if (missingSome || badExtras) {
if (missingSome && badExtras) {
Tests (using Mocha and ChaiJS)
var expect = require('chai').expect;
missing: 'other props'
invalidExtra: { myProp: {
bar: 'should not be here',
foobar: 'should not be here either'
bar: 'should not be here',
foobar: 'should not be here either',
missing: 'other props'
baz: true,
foobar: false
expect(message).to.have.string('baz');
expect(message).to.have.string('foobar');
@syranide That is a great way of testing. I learned something today. :smiley:
@syranide This makes sense. Thank you!
Uglifyify doesn't seem to be doing anything so I'm guessing that's the problem. But since there are so many moving parts it's hard to pin down exactly what's going wrong, so some kind of boilerplate would be great.
uglifyify, envify
.pipe(uglify())
@syranide Not me bro. =]
@syranide
it does cause problems but I'm looking into seeing how I can get Casper to play friendly.  fair enough.
i actually think it makes it less readable, because you need to ask yourself if you see something like this: `this.setState(a, b)` without the problematic naming for the example, what are `a` and `b`. is `a` an `object`? a `key`? because of that i also prefer when i use backbone / jQuery writing `model.set({ key: value })`
@syranide No problem, I ended up just comparing the `this.state.value` to event value and returning if they were the same as a simple workaround so it's not exactly a crucial thing just somewhat annoying.
<input value="√•" onInput="javascript: document.getElementById('text').textContent = event.target.value;">
<input id="input" placeholder="√•" onInput="javascript: document.getElementById('text').textContent = event.target.value;">
@spicyj Ah, 951 is closed. Sorry about that! I'm fairly new to using github, I read that 'closed' as 'the state for this issue transitioned to closed here'
Here's my take on it, hopefully someone will find it handy: http://codepen.io/eduardoboucas/full/jqWbdb/
@eduardoboucas very cool, love the interactive format!
@eduardoboucas looks very good!
this.construct(props, owner); // <- this is undefined, and hence construct is undefined
In particular events like oncanplay, oncanplaythrough, and ondurationchange.
Yep - audio and video components are essentially unsupported in react. You will need to grab the DOM node and do everything manually. I haven't been able to get anyone to care about this oversight and it doesn't look like it will be fixed anytime soon
@syranide: Yeah, I figured that it's not necessarily a change that anyone wants to make. I just had been playing around with the idea so wanted to see if anyone has any feedback, related ideas or plausible ways to achieve the same result.
how would you feel about another shim ? is there already a place for such in the project ?
@syranide
@syranide thank you for feedback. I have made some improvements.
http://jsfiddle.net/jeanlauliac/2x3dk23m/1/
http://jsfiddle.net/jeanlauliac/0n6snb6b/1/
Am I completely off base here? It would not surprise me if I am.
Ha, full circle:
- `value` may be anything except `undefined`
A bit of a different scenario but if anyone finds this useful...
@jarsbe Thank you so much! I has problems with default props and I just used undefined as you did.
I'm using a custom validator because I want to ensure a prop is specified but I don't care if it's null
- https://github.com/es-shims/es5-shim
I ran into this scenario, if you prefer the code here's a [fildde](http://jsfiddle.net/zaevo71y/).
Thanks for reply @kimagure . I know what you mean, but the children in this case is  directly rendered as parent's children.
cc @zpao
BUT...
Nick Merwin
React.renderComponent(HelloMessage({name: doSmth(), /* Syntax Error */ "Ingvar"}), mountNode);
Sequence expressions are not used that often, but still they are so I believe both possible errors should be fixed.
Raul.
See this jsbin to see it in action <a class="jsbin-embed" href="http://jsbin.com/dezogigahike/1/embed?js,console,output">Child keys not taken into account</a><script src="http://static.jsbin.com/js/embed.js"></script>
[Here is a minimal example that triggers the error](http://jsbin.com/fozabubiruna/5/edit). Removing the whitespace before `key` (from `Options.push(<option> {key}</option>)` to `Options.push(<option>{key}</option>)` makes it work.
Is this still an active issue?
dangerousInnerHTML={createMarkup()}
// vs
dangerousInnerHTML={{__html: getUsername()}
// vs
dangerousInnerHTML={getUsername()}
Leading underscores usually mean you're working with a private api that might change without warning.  Not that what you're working with is inherently dangerous.
@spicyj you are right. If changes on `.value` are set over non-React JS code, React would fire `onChange` event. Let me correct this by implementing such behaviour only for dinasaurs browsers (IE6 and IE7).
Because the throttling is quite generous, the sequence of: double-click -> short pause -> double-click, produces the unexpected effect of the second double-click not triggering.
http://jsbin.com/xawukefasuro/1/edit
Slightly surprised by this, but makes sense to follow native behaviour!
There are SVG tags like `<animate>` and few other standard tags which didn't find its way into React. I request you to provide a simple API to add an existing and standard HTML5 tag.
Is this being addressed? It adds extra, and again - IMO - useless and pointless html to the page, that while harming nothing - looks messy and unprofessional. Maybe I am just doing something wrong, please enlighten me if I am.
@Prinzhorn I think you might be confusing DOM output with React's JSX.
<!-- /ko -->
@aldendaniels absolutely agree, I've ran into flexbox issues already.
@syranide but every time one of the components changes all of its siblings need recalculating...
@syranide the biggest problem is that you can't always use a wrapping
that leads to ugly  code.
With that said, that hack only solves what @gaearon was talking about above - not having to deal with ugly array syntax/setting arbitrary keys in your JSX - and not the issue of returning multiple nodes at the root of a component's render method.
<Foo />
<Baz />
<div>Foo</div>
<div>Bar</div>
<div>Baz</div>
@impinball you can attempt to write something similar to [react-document-title](https://github.com/gaearon/react-document-title) based on [react-side-effect](https://github.com/gaearon/react-side-effect) to solve these problems. I was able to do the same for meta tags, headers, title and occasionally redirects
<statelessWrapper>
</statelessWrapper>
@kilianc in this case, you can simply write
@spicyj yup, you're right, I'll need to look into that...
<FadeAnimator
<FadeAnimator
// FadeAnimator
(_Disclaimer_: I'm not totally used to React internals, and there might be some parts that I don't fully understand or that I didn't understand. My apologies for misunderstanding.)
has also been requested multiple times for Mithril, but declined because of
I'm still working out details on a vdom library I'm planning on writing,
and it will treat everything as a fragment, but this is something you have
conceptually for rendering.
Here's the catch with fragments: you have to manage them completely
transform two trees, rendering omitted:
A {}
fragment {
A {}
fragment {
contents as if they were part of their parent fragment, but you still have
@isiahmeadows FYI, Mithril's rewrite branch does support fragments.
@lhorie You use array syntax for fragment ?
Thanks for fixing that comment @spicyj
@appsforartists
@mwiencek It is possible to use yours approach without custom react package?
@mwiencek are the comment wrappers even necessary? I would not expect clever things from fragments, if you move an element out of a fragment into a sibling fragment or the root element, it can just be recreated.
I have prepared a fiddle to reproduce the bug.
http://jsfiddle.net/taddei/8ztqgd28/
1. Go to http://jsfiddle.net/zcz1p35n/4/ in Safari
5. Go again to http://jsfiddle.net/zcz1p35n/4/
@spicyj Thank you very much. Contexts work beautifully for my use case. Closing! :tada:
Addition note: Scribbler.co uses an infinite.js/UITableView like rendering pattern with animations which is only possible because of React.
Things I don't fully understand:
@insin
I'm not really sure how much is implemented.
Hello, world! I am a CommentForm.
1. Visit http://fiddle.jshell.net/tfKYJ/58/show/light/
4. Click on gray area
5. Press `K` to stop Perf recording
Only up the Javascript Console, and you'll notice that "wasted time" was reported, even though no time should've been wasted.
(original fiddle http://jsfiddle.net/tfKYJ/58/)
@deadlyicon http://jsfiddle.net/kb3gN/4988/
##### Broken
http://jsbin.com/fumaqarebisu/3/edit
http://jsbin.com/ginamupavuye/1/edit
http://jsbin.com/tutuharaqitu/1/edit
Additionally the problem is IDENTICAL in safari, chrome and firefox (latest stable of all).
``` sass
overflow-y: hidden
![barcodes-animation](https://cloud.githubusercontent.com/assets/2231765/5786348/53a15594-9d98-11e4-9a88-62fed1f095a0.gif)
``` sass
overflow-y: hidden
Weird!
You can see the difference here; http://jsbin.com/vipowiqebipa/6/edit
4. Notice how subview's life cycle functions are called
Maybe this is an expected behavior, in which case I found strange. However, in that were the case, I'd expect some documentation.
`<select className="form-control" id="sel-fruit" defaultValue="">
`$("#sel-fruit").val()`
@spicyj
@syranide perfect -- thank you!
@syranide There are other non DOM markup attributes that are supported. There seems to be a discrepancy between implementation and reality that should be ironed out either by adding all attributes or documenting why they shouldn't be supported.
Seems like a step in the wrong direction IMO I hope this get rethought in the future
jsFiddle: http://jsfiddle.net/tmcwilliam/mufcw3wv/
@spicyj That seems completely backwards. Is there a way to change that behavior?
@pieterv
become broken characters.
it's around these codes
> it's around these codes
WebKit/Blink supports the non-standard attributes `results` and `autosave` for input-elements of type `search`.
I realize that adding all sorts of non-standard attributes might eventually pile up - perhaps there is a better way of adding these attributes? `<input nonStandardAttributes={{ results: 5, autoCapitalize: false }}>` or similar?
`HAS_OVERLOADED_BOOLEAN_VALUE` seems to do the trick, but I'm slightly unsure whether this is the right mode to use for them - can anyone confirm?
Updated with camelcased `autoSave`.
> whatasunnyday: Quick Q, what is the "react way" of handling something like a login/log out button on a nav bar?  My understanding is that JSX with an if statement doesn't work.
> whatasunnyday: zpao, thanks!
> whatasunnyday: zpao, i would love to. thanks for that suggestion.
> whatasunnyday: zpao, going to bed first! i'll be sure to add this in the morning.
+1 @oriSomething
Paulo Jorge Dias
Resolves #1858 and #2045.
@spicyj yes sorry, too much coding today...
@piranha, I believe your solution isn't ideal.
@s0meone
@iamdustan
@syranide
Log:
Then there is a seperate problem, the mouse events are not triggered on the same component as the touch events.
touchend <div class="box" data-reactid=".0.0"></div> box
The event model, weird stuff :)
["topMouseDown", img, ".1jmtvo16r5s.0.0.0", MouseEvent, callee: (...), caller: (...)]
["topMouseUp", img, ".1jmtvo16r5s.0.0.0", MouseEvent, callee: (...), caller: (...)]
SyntheticUIEvent {dispatchConfig: Object, dispatchMarker: ".1jmtvo16r5s.0.0.0", nativeEvent: MouseEvent, type: "mouseup", target: img‚Ä¶}
// Safari Mobile/12A365 on iOS 8
["topTouchStart", img, ".245z5a53cow.0.0.0", TouchEvent, callee: (...), caller: (...)]
["topTouchEnd", img, ".245z5a53cow.0.0.0", TouchEvent, callee: (...), caller: (...)]
["topMouseDown", div.Scrim, ".245z5a53cow.1.0", MouseEvent, callee: (...), caller: (...)]
["topMouseUp", div.Scrim, ".245z5a53cow.1.0", MouseEvent, callee: (...), caller: (...)]
@s0meone @appsforartists how are you unit testing this? Using `React.addons.TestUtils.simulator.Click(target)` isn‚Äôt working for me.
@syranide That seems to have done the trick, sorry about the screw up!
Well, a cloned immutable object doesn't quite work as props...
also mask itself #2535
Now, the strange thing is ...
@spicyj by "works on my iPhone" you mean the click is instantly recognized? There is no touch delay?
@spicyj yeah, I am using `react-tappable` for that reason. Though react brings something with it by now, to get rid of `react-tappable`
jsfiddle: http://jsfiddle.net/ekjone1z/
See http://jsfiddle.net/kb3gN/4603/
@syranide I think it would be nice if React team did document good practices about dealing with contenteditables as it is quite hard to manage them well.
@abritinthebay yes this looks like what is proposed in the linked StackOverflow question and this project: https://github.com/lovasoa/react-contenteditable
@syranide Is your `webpack.config.js` and uglifyjs config available somewhere? Right now I am using browerify as well but I have been bitten by it too much‚Ä¶
Thank you, @syranide!
mq({
Check the JSFiddle here:
http://jsfiddle.net/7dv28w9f/8/show
@spicyj @zpao Fixed! Thanks.
@zpao Fixed! Thanks.
@chenglou No worries--`monitorCodeUse` removed.
I agree with @spicyj and find this behavior confusing, so I thought I'd send in a pull request. (This is my first PR for React--did my best to follow the contributing guidelines!)
@spicyj Don't all the properties in `RESERVED_SPEC_KEY` get stored on the constructor? (`componentDidMount` is in `ReactCompositeComponentInterface` but not `RESERVED_SPEC_KEY`).
>         <h2 ref="header">elephant</h2>
>         <p>zebra zebra zebra zebra</p>
alert('Mounted Foo');
alert('Unmounted Foo');
alert('Mounted Bar');
http://jsfiddle.net/dvtcz52k/
I'm not sure what's going on here. Why does the `Foo` component get unmounted while the `Bar` component does not? It seems like there should be no difference between these two ways of calling `React.createClass`
Is that right, or might there be more to it?
Thanks @zpao -
@sebmarkbage concerns:
@syranide, I don't offer
@abergs Thanks for the info; I'd read through #759, but it seemed to be much bigger than I was asking for (JSX support is certainly complicated, and we're not all that interested in that due to poor tooling support). I hoped it'd be possible to have TS support just for code-completion and type checking in components (ideally with generics so our State/Props could be typed too).
> issue in material-ui
> Bit of a hack, but doesn't seem too bad. It solves the issue I was having
Wout.
(typed on mobile, excuse terseness)
Awesome, thanks. It seems jest does a few things to manipulate jsdom into submission, I might look into extracting some of the magic out to use with mocha.
I signed the cla indicated by the bot.
var MixinNameHere = {
mixins: [MixinNameHere],
@syranide I think that won't work in this case, since I don't want to handle the blur events in the children, I am handling the event in the top element inside the component, so I want to have the events propagated to that one.
http://jsfiddle.net/leoasis/VkebS/569/
// blur is moving to an element outside of the tree under currentTarget
http://jsbin.com/sunulohoke/2/
Which brings me to React.
I'm glad to see the Semantic Actions section.  I doubt you'd have created an additional concept (actions) if it wasn't needed, but I still couldn't help but wonder why; it's nice to see my reservation directly addressed in the documentation.
This sort of complexity is best kept in a very distinct place and not coded haphazardly within other modules, especially when applications grow to be quite large.  It can be very helpful to see all the other actions and action creators -- how they were coded and structured -- while creating new ones.  This is especially true when working with a team of engineers where you want people to stay consistent in how they do things.
@syranide I suppose "Should work" answers the question :)
@zpao I've created simple proof-of-concept locally for this (and it works), but there are some questions need to be clarified like - do you want to subscribe to all the children DOM node events and delegate their handling to owner component or do we expect those DOM nodes to be responsible for any inner events theirselves?
@zpao Nice, seems to work: https://travis-ci.org/facebook/react/jobs/32250596
|  | raw | gz |
@zpao Btw, I was also going to implement piece of functionality for #1913 / #1977 - is it irrelevant now, too?
@zpao So what's going on with this?
@sebmarkbage Oh, right, saw those changes and they feel somewhat scary. AFAIR, other languages-that-compile-to-JS had benefit from the very beginning that they could simply import tag factories as local functions and use them in code w/o transformations.
I.e., in CoffeeScript it was always possible to just do:
@syranide I believe developers are smart enough not to call `<abc />` on function that is not actually a valid element :) Especially in JS world, where most of things are already not type-strict.
LGTM
Calling `setState()` for uncontrolled `textarea`, does not lead to the expected result. In the example http://jsfiddle.net/c88aK/ pressing the button `Reset state` should reset the state of the input fields to their default values‚Äã‚Äã. Element `input` is resets as expected, `textarea` not. In the debugger, method `textarea .render ()` gets the correct initial data, but changes in the DOM does not occur.
@codrin-iftimie
_Previous PR made on wrong branch (facebook/react/#1984)_
> Thanks! Sorry this was so tricky.
_Original PR made on wrong branch (facebook/react/#1981)_
This behaviour isn't what I would expect when passing the arguments to only watch *.jsx files.
@syranide what if this can be re-stated as: "a more clearly defined transition between server rendering and client render should be made available"?
http://jsbin.com/saxotoqi/2
@iamdustan, I did found your gist for ripple effect in react, tried it, didn't work on FF, came here to post an issue, searched before doin' it, and here you are :)
@myagoo @nhunzaker I did some research on this, too. http://iamdustan.com/2014/07/28/flexbox-buttons/ and https://bugzilla.mozilla.org/show_bug.cgi?id=984869#c2
@spicyj I love everything about the proposed API. I think it will really streamline integration of React into more heterogenous environments and also make it easier to support packages written in different versions of React by allowing the parent component to integrate manually through the DOM.
? 'Undefined'
Not sure disabling the synthetic event system is warranted yet, but if we see it costing us time elsewhere I'll definitely take a crack at it.
<Qux />
Foo({p: "bar"},
Qux(null)
(Please ignore the invalid comment syntax here, added to highlight the issue.)
@syranide where should I start looking? :)
@zpao I've tried to explain it better in this commit
@chenglou sorry I'm not used to PR and I thought it was you that corrected me with `checkedLink=valueLink=` while it was my typo
@chenglou yes it was a typo.
OR
Thanks spicyj!
@syranide Interesting. Do you mean multiple _numeric_ versions of React or multiple instances? I'm talking about a component from version 0.10 being embedded in a component tree from version 0.11. If that's something that could be possible, that would be amazing.
@ryanseddon this solution no longer seems to work. It _does_ change the attribute, but I get the following error:
@ryanseddon :+1: that did the trick. Note that you really have to make sure to do the monkey-patching before any of your code does `require('react')`, or else things will break. The first place may not be where you expect.
@dlopuch this is a small world, I'm the tech lead on the Zendesk widget.
@johanneslumpe have you found a solution or a workaround to this?
extensions: ['', '.js', '.jsx'],
alias: {
Though, I was able to shave off 2 sec by turning off `mangle` and a few compress options on the first pass of `uglifyify` - since it's only the dead code removal that matters. For the 2 sec improvement (prob less on faster machines), it wasn't worth PRing the changes to the grunt task that allow passing options to transforms :disappointed:
The real killer is `derequire`.
First of all, during my attempt to show you this bug, I found this weird behavior:
2) http://jsfiddle.net/kb3gN/4093/ does
So finally, to demonstrate my problem, see http://jsfiddle.net/kb3gN/4094/
- http://jsfiddle.net/koba04/5st9eaur/1/
- http://jsfiddle.net/koba04/0dhpegsh/
Unfortunately, `totalTime` is still incorrect...
thanks @koba04 will try that.
@JaeHunRo
`reactpm publish MaskedInput`
-- Ionel M.
@chenglou @syranide I am happy to make a PR this weekend on this if it is wanted. It should be possible to detect cases in `$set`, `$merge` and `$apply` that can return the same object, although the latter two may be more of a challenge. I can make separate PRs for each command if either of the latter two start to look too slow or messy.
@syranide Not sure if that is the case. React addons requires `ReactTestUtils`. So if you require `react/addons`, ReactTestUtils is still included in production builds. I'm just using the Uglify defaults set by webpack, perhaps there are alternative options..
@spicyj Excellent, just what I was looking for. Thanks!
@syranide
still not doing the correct thing.
@spicyj -- per our earlier conversation. This PR tries to call out descriptors vs. components more explicitly.
However, lifecycle methods are all named like if the component was talking about itself using the third person:
Was a breaking change that I missed.
It's not clear to me what the intended behaviour is, but the fiddle seems to be a good test case to start tracking this down.
Made a minor change to the fiddle: http://jsfiddle.net/2TPZZ/3/
http://jsfiddle.net/z3BQS/1/
added more cases:
- dynamic xmlns
@spicyj @zpao is it now possible, since #1373 has been closed? For example, how to support an array that may have a fluctuating number of elements?
Am I doing something wrong here?
I assume you are referring to the keyCode being wrong.
From MDN docs "In a keypress event, the Unicode value of the key pressed is stored in either the keyCode or charCode property, never both."
I didn't know about the `.key` property, thanks @browniefed @syranide! It does exactly what I need, I'm closing the issue.
I sort of wish i never brought up DI as it was just an example not the sole reason for this issue. In fact it is a relatively small one. We perhaps should just ignore the fact i brought it up :P
@spicyj Is there a place to read the final direction about this topic? I like how the current code handle the components composition, and exporting `mixSpecIntoComponent` will allows me to extend components in the same way as React does using nowadays code. Anyway I could copy/paste the code in a utility file for my projects, but I want to know what are the next steps about this.
- shell is zsh
source and dest are different.
@spicyj can you elaborate on that? :) I mean, using the autoBindMap isn't super complex, it's just not as comfortable as it could be.
@spicyj, since 0.13 is out with support for ES6 classes, do you have anything to add to this issue now?
At the end, there is a confusing explanation about "Duplicated data from props" in the section "What Shouldn‚Äôt Go in State?":
I took me a little bit of digging in the source to spot how to reach the `Perf` object, so I thought it would be useful to note this.
@zpao That seems reasonable. Perf is obviously a very important factor to consider and I appreciate the creative thinking... your solution would at least allow a developer to support the need, even if it's a little more effort.
I'm facing the same issue as @nelix. It is quite an edge case, but it would be nice to have support for this.
Ran into this today, trying to dynamically set the background color of a Semantic UI [Icon](http://semantic-ui.com/elements/icon.html). They have those colors set as `!important`, presumably for legitimate reasons. Fortunately I could work around it like @thomassuckow [did](https://github.com/facebook/react/issues/1881#issuecomment-127664203). Would be nice to avoid the extra step though.
+1 on the Shadow DOM aware suggestion!
@spicyj Could this be taken as a good enough interim solution?
Whilst this is intentional behaviour (see #1274), it is not documented anywhere, so it is worth mentioning.
@spicyj here's a fiddle showing what i was doing: http://jsfiddle.net/A8s5x/2/
@syranide Yeah, I think we want to throw if the argument is a non-container, non-empty React root node.
@syranide Ah, ok. I agree that would be an error, but isn't it a slightly more general warning than is being described here?
> hareth: sometime I feel adding a mixin to all my component with getInitialState() { return {} }
> vjeux: hareth: i'm surprised that it's not already the case
> hareth: http://jsfiddle.net/F26zB/
> vjeux: hareth: can you see if there's already a github issue opened for it/create one? I'm curious to see what other people have to say about this
@zpao In Canary everything works fine. In a polyfilled Chrome (stable) changing `img.srcSet` works but `source.srcSet` doesn't. Same for `source.media`.
Here is the mixin I've been using:
// An object that could be one of many types
// AnotherComponent
// renaming SimpleComponent to Ba is ok, GCC rename also
// SimpleComponent = React.createClass(... to Ba = React.createClass(...
// AnotherComponent
as you can see, the names of props properties doesnt match, because there isnt any way to tell GCC
React.PropTypes.oneOf(['large', 'colored', 'fill'])
@chenglou probably not, nevermind.
please don't remove proptypes.
Ah, that's not quite what I meant.
if (clsNm === undefined) {
repo.tiye.me/react-hanoi
Thx. How about that if they are not parent and child, is it OK to putting that special state in model?
#### Chrome/Safari:
@rodryqunitero The message means that attribute 'for' is unknown. Use htmlFor instead of for.
Awesome guys, love the support. I see a few collaborator badges in here @cpojer @petehunt @yungsters @jbonta.
This is probably because of this loop:
See this http://jsfiddle.net/QVjLw/
Instead of
- `react/foo` -- other stuff?
@zpao That's very interesting. Is it documented anywhere that `propTypes` are dev only?
``` coffeescript
indeterminate: true,
``` coffeescript
checkbox.indeterminate = true
But what are the drawbacks, except the jquery/zepto are used in this example?
> [Claims above come from playing with [this jsFiddle](http://jsfiddle.net/3bn73ey5) in Chrome 40, Firefox 35, Safari 7, and IE 11]
defaultIndeterminate={!checked}
In fact this PR is to focus on some strange behaviour within react components.
http://jsfiddle.net/JXwWC/
@spicyj thanks for the quick reply.
here is a [working example](http://jsfiddle.net/joycse06/nt2Lb/)
why is Envify not needed?
https://gist.github.com/MalucoMarinero/85349e9fff4134f63397
@volkanunsal `shouldComponentUpdate()` is a very complex approach to this. We would need to still check for the problems listed above, and still does not cover how to manage the `<ul/>` `<button/>` example above since the button would be the component being focused, and the `<ul/>` component is completely separate. Maybe I don't understand your use of `shouldComponentUpdate()`
``` coffeescript
# other code...
(All in all, thanks for React. It is such a wonderful tool. I love to work with it!)
@laurilehmijoki
# other code...
http://jsfiddle.net/Brj8m/
Here's a jsfiddle demonstrating it: http://jsfiddle.net/MBNBW/3/
@syranide right. I believe that wasn't possible in the case I was trying to use this, but it's important to keep in mind.
Using the same `ref` multiple times can cause some pretty weird things to happen (usually resulting in the last component using the `ref` to be set for an owner's refs) as discussed here: https://github.com/facebook/react/issues/1782
Well, I truly enjoy playing with devleopers.   If you need to hire, let me
Fun JSFiddle of this: http://jsfiddle.net/Bu57e/
I'd like to convert JSX files to JS files on a Linux machine which has no (direct) internet access. All of the examples talk about running npm, which obviously won't work in this case. Are there any  alternatives for me?
Thank you! Would you change my name to Volkan Unsal?
:+1: my entry LGTM. Merci :fr:
@zpao sure I can add the note, do I need to sign a CLA?
Just wondering if SourceMaps is in this release? From what I can tell it should be but just confirming.
@zpao Cool, I updated it.
Thanks @spicyj!
Fatal error: Uncaught, unspecified "error" event.
yes @spicyj , it's just to inform you of this behavior, if one day you want to support rAF in controlled components :) just don't know where to write this as there doesn't seem to be any issue open for that
/cc @spicyj
@sebmarkbage I haven‚Äôt had a chance to check this myself, but are `ReactChildren.{map, forEach}` used internally in critical code paths?
@syranide Great suggestion.
'fa fa-fw':true,
'fa-file-o':!image && !text && !pdf
'fa fa-fw fa-file-image-o':image.test(items[i].type),
'fa fa-fw fa-file-text-o':text.test(items[i].type),
'fa fa-fw fa-file-pdf-o':pdf.test(items[i].type),
},'fa fa-fw fa-file-o')
nice @spicyj
@spicyj What about failing fast being the default, and be able to disable this behavior on a per file basis (like suggested @syranide)
However this is a problem with JSX as it is not able to infer the component `displayName` anymore
@gaearon Here are some reasons I'd want to freeze `this.props`: To take full advantage of the unidirectional flow React allows for, I don't want anyone working on the code to be mutating `this.props`. Most of those properties come top-down from data stores and I definitely do not want to inadvertently mutate the contents of those stores by reference. (I also want each component farther down the chain to reflect exactly what's in the store at all times.)
I understand you may not want to throw on bad proptypes as it could lead to different app behaviors in dev/prod mode, but it would be really nice if we had the hability to plug our own code when something bad happens.
@chenglou btw I have troubles with the following:
<TimeAgo timestamp={this.props.timestamp}/>
This gives me a strange warning (bu works fine anyway):
thanks @chenglou I understand now.
@chenglou I just signed the CLA
Thanks for the mention :) but it would be good to change the React Bootstrap author to @stevoland as he is the original creator and primary contributor for the project.
Haha thanks @zpao :)
ul null,
{expect} = require 'chai'
{expect} = require 'chai'
ul null,
@spicyj Hi, You'd know what the problem is?
> http://jsfiddle.net/zNm2n/
I have a question regarding todomvc-flux example and the dispatching of actions in Flux.
I was watching a video describing the Flux architecture, and the presenter mentioned ([at 12:20](https://www.youtube.com/watch?v=nYkdrAPrdcw#t=740)) that "once an action goes to the store you can't put another one in until the stores are completely finished processing it". She [the presenter] mentions this several times later in the video.
Is this supposed to be a principle property in the Flux architecture?
-- transformer --
MyCustomXML: {
``` diff
Calling `setState` in `componentWillMount` doesn't behave as I would expect. [Here](http://jsfiddle.net/kb3gN/3194/)'s a fiddle demonstrating. In short, the callback is invoked before the state has been updated.
:ghost:
In 0.10.0 the callback is called too soon, before the state has changed (http://jsbin.com/cuyadiqojumi/1/edit).
Is there an interim solution to get the desired behaviour?
@matthewwithanm Here's your same JSFiddle with an updated version of React and the callback never gets called! WTF!
http://jsfiddle.net/ccorcos/k5ws12c6/
var traced = new Error();
Color me uninformed on this subject, @fdecampredon say that `componentWillMount` is async and you don't return anything immediately, what is React supposed to render until there is, nothing? If so, why not just return nothing in render if there is no data yet? (Yeah I get server-side) Also, what should happen if props change before `componentWillMount` fires?
> Color me uninformed on this subject, @fdecampredon say that componentWillMount is async and you don't return anything immediately, what is React supposed to render until there is, nothing? If so, why not just return nothing in render if there is no data yet? (Yeah I get server-side) Also, what should happen if props change before componentWillMount fires?
@fdecampredon To be clear, the purpose of `willTransitionTo` in react-nested-router is _not_ for loading data, specifically because returning a promise from that method will indeed block rendering new UI, which you don't want to do unless you absolutely have to.
But this solution is indeed _hackish_.
@gaearon Yeah, that's the sense I got from the withContext deprecation.
A slightly different take on this issue is how to handle asynchronous loading of code chunks produced by a bundler (such as webpack).
1. Use Flux or Flux-like container (Alt, Redux, Flummox, etc) where stores aren't singletons.
Here's a good tutorial for Redux describing this approach: https://medium.com/@bananaoomarang/handcrafting-an-isomorphic-redux-application-with-love-40ada4468af4
@gaearon I apologize if I confused you. Thank you for response. From your list, it sounds like I am correct in assuming the solution to server data dependency is to only ever define data needs at your root component (static methods / the article you linked to). If your data dependencies are defined at the root, it's much easier to pre-fill stores etc.
await router.dispatch('/products/123', component => React.render(component, document.body));
@gaearon
This is the "hack" I'm using with redux at the moment to achieve this:
ReactDOM.renderToString(rootEle)
That is a good idea (:but be careful with too much "magic"
PahtomJS 1.9.2
@syranide, I absolutely agree. However, it still causes issues when using focussed CSS selectors without some other form of identification (like an ID or class). (e.g., the following selector `body > #wrapper .itemList .listItem span`). Thanks for considering this an improvement! :)
still i think it's better that will be a `React.Children.only` version that doesn't throw because some performance issues and it will make the code more complex.
When test react app using jest, I have found the undefined can't be tested
What exactly is the issue? If it's just source lines being "off/out of bounds" then it's possible that it's the old JSX issue where source lines reported by esprima are mysteriously offset. AFAIK it was never explicitly solved, but no one was able to reproduce it anymore, perhaps it struck again?
Hi @syranide, thanks for responding.
Can you be more specific? This is probably misunderstanding of react concept
@chenglou thanks!
<a href >Foo</a>
@syranide that sounds good... or at least warn that onLoad doesn't work one use?
http://jsfiddle.net/msonnabaum/Ku89S/3/
@yungsters The master branch was failing at the time I forked the project, this branch inherited those errors.
So that a custom prop type can easily be created and used for both optional and required props.
prop: customProp,
requiredProp: customProp.isRequired
I'm not 100% sure what the preferred fix is here, add another "directive" ex: `IGNORE_FOR_MARKUP`? @zpao @spicyj
Test page: http://jsbin.com/kasurusa/2
@chenglou any updates on this?
+1 breaks all my things. :/
@caedes it works for me too!
i dont know if those other css classes were the issues, but i just want to point this out here.
plop: sinon.stub()
cc @spicyj I remember this being fixed some time ago?
@zpao Thanks for the explanation.
Thinking in react - tagtree.tv
error lines:
2261 error git clone git://github.com/ariya/esprima.git fatal: write error: Invalid argument
2626 error Error: ENOENT, chmod 'C:\Users\lamalien\AppData\Roaming\npm\node_modules\react-tools\node_modules\commoner\node_modules\whiskey\node_modules\magic-templates\index.js'
2633 error path C:\Users\lamalien\AppData\Roaming\npm\node_modules\react-tools\node_modules\commoner\node_modules\whiskey\node_modules\magic-templates\index.js
2634 error fstream_path C:\Users\lamalien\AppData\Roaming\npm\node_modules\react-tools\node_modules\commoner\node_modules\whiskey\node_modules\magic-templates\index.js
2638 error code ENOENT
2639 error errno 34
2641 verbose exit [ 34, true ]
`git clone git://github.com/ariya/esprima.git fatal: write error: Invalid argument`
The library supports the major features of Jade, including JavaScript fragments.
<li {this.props.keyName}={this.props.keyValue}>bla</li>
http://jsbin.com/yuxiluzo/1/edit
<li {this.props.keyName}={this.props.keyValue}>bla</li>
Thanks for this, was pulling hair :)
http://jsfiddle.net/q8K9A/1/
Yeah this one just confused me for about 20 minutes or so, seems like the behavior @syranide described would make sense here. Or at least a warning if the current behavior is desired.
Depends on #1675
I'm assuming you're running some internally enhanced JSX because that's not currently valid. But yeah, I could reproduce the issue. The same issue apparently also affects children:
#### Repro
2. Set component `style` to `undefined`.
http://jsfiddle.net/gasi/9rWum/
@spicyj I understand. Thanks for explaining :smile:
Checkout this fiddle: http://jsfiddle.net/cspTP/
@spicyj
Is this still an issue?
cc @zpao @spicyj
- Thinking in React
- Synthetics
- Styles
- [ ] **Custom Components**
- Stateless functions
- Rendering
- Abstraction
- Child components
- propTypes
- Memoized renders / shallow compare
- Conferences
- Complementary Tools
- Flux
- Relay
- Jest
- Previously signed CLA.
@yoshuawuyts The checksum depends on the "root index" and as a result it is indeed "random". The client does not generate its own "root index" when trying to reuse DOM, but rather copies it from the target DOM node (rendered by the server). So the markup generated by the client will have the same React IDs.
@spicyj agree?
If we go this way, is it something you would be interested in taking @yoshuawuyts ? (just checking :))
<div class="header__info" data-reactid=".1cp4k02iy9s.1.0.2.$0=128066719230264425.0">
<div class="header__down" data-reactid=".1cp4k02iy9s.1.0.2.$0=128066719230264425.1">
<div class="header__user" data-reactid=".1cp4k02iy9s.1.0.2.$0=17051771783735603">
<div class="header__info" data-reactid=".1cp4k02iy9s.1.0.2.$0=17051771783735603.0">
<div class="header__down" data-reactid=".1cp4k02iy9s.1.0.2.$0=17051771783735603.1">
Thanks @syranide , you were absolutely right!
Some of the issues and reasons:
- and some weird issue - `<div style="height:` vs `<div style="height:`
http://jsfiddle.net/U26kq/
http://jsfiddle.net/2hqSu/4/
@zpao I rebased it to use the synced `camelize`.
marker\* attributes have been added thanks to @cassus in #1738 as stated above.
@zpao
+1 for foreignObject
+1 for foreignObject
`patternTransform`
isCustomAttribute: function (attributeName) {
@spicyj I don't see any namespace support in React (ie, there is no call to `setAttributeNS` in the codebase).  Any suggestion on a proper way to set an attribute with a namespace?
+1 for foreignObject
+1 for image and foreignObject
+1 for foreignObject
@ersagunkuruca try https://gist.github.com/akre54/80eaa63762ea499029f0 in the meantime
Is this something that can still be explored?
+1 for marker: refx, refy,orient
+1 addon
+1 addon
- `feMorphology`
- `feOffset`
- `feMerge`
- `feMergeNode`
+1 for animateTransform
This is obviously a hack but I find it preferable to `dangerouslySetInnerHTML`
Pretty happy for the (almost) full SVG support in [v15.0](https://facebook.github.io/react/blog/2016/04/07/react-v15.html) but I'm realising that some namespaced attributes like `xmlns` and `xmlnsXlink` couldn't apply when render, and this is ok when showing the `svg` in the browser.
Any plans to integrate REACT to Netbeans (https://netbeans.org/downloads/) which already has HTML5 & JavaScript support https://www.youtube.com/watch?v=edw0js0hdEo ?
@spicyj
@syranide yeah, if would have pooled descriptors then they shouldn't escape `render()` once created inside it. But if descriptors were created outside of `render()` they can be reused between different `render()` because they represent static pieces of UI.
renderComplicatedThing: _.memoize(function (a) {
// Build some complicated DOM here.
{this.renderComplicatedThing(this.props.a)}
@syranide Oooh, that sounds interesting! I'll have to keep an eye out for that.
it works? http://jsfiddle.net/luigy/Nq3Kc/
@luigy thanks.
Here is a fiddle: http://jsfiddle.net/kb3gN/2888/
- Further, as you see from the fiddle the app is a wizzard and when I navigate it SLOWLY I do not encounter an error locally, but when I navigate it FAST the error appears. When I REMOVE the images I cannot get an error no matter what I do.
@spicyj cool thanks.
@spicyj Awesome.. Been getting hit by this one for a while
@zpao Sounds good. Thanks.
React.declareAttribute('hidden', hiddenAttribute);
@spicyj That seems like a reasonable use case. `aria-*` or `data-*` attributes come to mind.
Why does `null` validate as `renderable` but `undefined` does not? The reason I‚Äôm asking because is we sometimes use `if` statements in arrays without `else` clause (CoffeeScript) which then evaluates to `undefined`:
``` coffeescript
evaluates to `[undefined]` which causes a warning. However, the following construct passes:
else
<div data-reactid=".ztgnmowu0w" data-react-checksum="2113280983"><span data-reactid=".ztgnmowu0w.0"></span></div>
Well, it works in this special case (SVG) as the browser doesn't care about the actual namespace URI. At least WebKit and Firefox just check the local prefix which can indeed be set via a plain `setAttribute()` call. It might fail of course if the doctype was set to XHTML ... I haven't checked this yet.
The thing is, I'm using CoffeeScript, thus I'm not using JSX, thus it both feels and looks wrong in the code. And it inserts a redundant react `<span>` in to the DOM.
<span class="alias">alias</span>
Which renders to `namealiascity`
@syranide, indeed, now that I think about it, I see there would be no solution when white-space is not wanted. I rest my case, sorry for the commotion ;)
Kind of related: #1357
Yeah I guess, but it's a pretty small amount of code to cater for both string and camelcase. Either way I can back it out if not.
cc @zpao
@spicyj Shorter and significantly less ugly, but yeah, it would just be sugar.
this.props.onSubmit(null, {emai:data.username, password:data.password});
React.renderComponent(<EmailAddressLoginBox usernameLabel="Weird" onSubmit={click} />, e4);
That said, maybe this is a bug in `transferPropsTo`?
@spicyj Thanks for the insight! Didn't even bother to think down that route, but now keyMirror is gaining appeal by the second. :)
@spicyj i didn't got it, can you explain it more ? what's the whole point of the keymirror ?
When you have code like
There are two options:
I am not sure how bower support is achieved but it would be really nice to have some simple support for `component` thus allowing:
Ther's also the issue of add-ons but one thing at a time.
@spicyj Oh, but I just noticed this:
@spicyj `component` can't do that because its concept is that github **_is**_ the "central repository". This means there's no `prePublish` build step etc. possible in the sense of `npm` where source code and what's published are not the same.
@sompylasar Yup but I would much prefer it to come from the core team/community. Its just not worth it otherwise.
@sompylasar This is why I am not interested in user-land management of this issue. These modules should really come from the `reactjs` user, not `blowjoe/react`, and only the react team can be practically relied upon for maintaining automation around component module releases etc.
https://github.com/akre54/es6-react-webpack-bower-backbone (try the coffee
> @akre54 https://github.com/akre54 Can you be more specific about what
problems from bower.
@akre54  No we are not using Webpack.
> @akre54 https://github.com/akre54 The UMD wrapper is provided by
Test Case: http://jsfiddle.net/madebyherzblut/eAGyj/
In case anyone else runs into the same problem: This is a (hackish) way to solve the problem for now: http://jsfiddle.net/madebyherzblut/eAGyj/6/. The module component is created inside the `AppComponent` to have access to the right context.
`componentInstance.setState` throws two errors when ran with `node-jasmine` (v1.14.3)
React.DOM.span(text3, 'bbb')
#640 is a related PR, but I think I saw it was reverted afterwards
# Using Jest
onBlur: @stopSearching
@zpao doing what?  I personally don't think an explanation is needed; it'd just distract from the point of the tutorial.
2. TODO_DESTROY
var MyMixin = {
mixins: [ MyMixin ],
// override the mixin's behavior
var MyMixin = {
var MyMixin = {
The tests for `update` don't include any cases where multiple directives appear for a single value, so I'm not sure whether this is intentional or whether anybody depends on this behavior. But especially when you're dealing with trees of this form:
Might be an interesting alternative, avoids the use of directives in favor of regular manipulation.
cc @jordwalke ?
I understand your point, but from my perspective I've seen a handful of people get confused by it on IRC (which indicates that it's at least unintuitive behavior):
@syranide I'm def not playing with stopPropagation.
Not sure how to reproduce it still, it happens randomly.
OK, that's really weird. You're on 0.10 I assume?
Perhaps there are pitfalls to using `cloneWithProps` that aren't documented?
``` coffeescript
@spicyj
@zpao No problem, ping me.
Personally I'm torn between it feeling "dirty" and it being "the most efficient implementation". What's your take @yungsters ?
@yungsters Interesting and I agree with everything you said. It should be a separate PR regardless and I wouldn't mind doing the necessary work for compiling a rough best/worst-case performance/size benchmark.
Also, I fully agree and understand your point about XSS and was honestly expecting more an opposition for this PR (for that reason).
@sebmarkbage Not legitimately anyway.
mixins: [Highlight],
Daniel
I agree with @spicyj that calling mixins first is more intuitive.
@zpao @spicyj
To add to this, why does `isRequired` only emit a console warning? I assume it has to do with not wanting to use `invariant` for dev-only (same behavior dev and prod), but it's a little weird.
FancyButton = React.createClass {
I have developed a higher order component that does this.
Nice @gajus
http://jsfiddle.net/NV/Ld38X/
Why is it called apply and not map?
As far as I understand this is not a proper behavior.
Primarily to go with #1570, (then) the final DOM would be completely clean of React markup in the end, even if you use server-rendering. Which I think would be nice given that it's virtually for free.
Previous one was a lightning talk, this one is a bigger one, and describes React better.
Parameter for Arrary.indexOf should be the value of the element, not the index of the element.
@spicyj is correct here.
Repro: http://jsfiddle.net/avh4/B2R5s/
@avh4 If you are on less than React 0.8 (I think?), there's a "whitespace tool" in the repo that automatically "upgrades" all your files to produce identical output with the newer versions.
@spicyj Yeah, the more I think about it, that seems like the right way.
raw     gz Compared to master @ 46de927a28eb788b4329589658dbd31a014e4edd
UNMOUNT .0 (span)
Which doesn't make sense (to me at least).
@yungsters - yep.
Isn't this executing them in arbitrary order?
"test": "jest"
"jest": {
Looks great.  Let's accept this!  @spicyj ?  @zpao ?
Documentation for jasmine has been moved to jasmine.github.io
@zpao Not saying you're wrong, but... `var Comp = this.props.component; do something with <Comp ...>`?
Hey Spicyj, sadly it makes `<style>` tags with css { } blocks impossible to embed in JSX. I've worked my way around it by putting css in a property:
- https://edealer.nl/mao/ (proof of concept http://suitcss.github.io -ish components)
Another poo-commit.
cc @spicyj @petehunt
I've created a reproducible version of this [here](http://jsbin.com/cizupufo/1/).
npm http 200 https://registry.npmjs.org/esprima-fb/-/esprima-fb-3001.0001.0000-dev-harmony-fb.tgz
http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html
DivClass, SpanClass, InputClass,
karma @ 0.12.9
karma-jasmine @ 0.2.2
clickSpy, renderedFoo;
clickSpy = jasmine.createSpy('click spy');
karma @ 0.12.9
karma-jasmine @ 0.2.2
@spicyj I use semver and have one global cache per major version number.
<td key="checkbox" className="Va-m">
<td key="checkbox" className="Va-m">
Oops! Yeah that's weird.
The issue I had was that I had partially supported JSX, and needed to use the converter to check something in a large block of markup. It correctly fixed that problem, but spit out the aforementioned `classname` attribute which _isn't_ supported.
`text/jsxharmony` kind of makes sense to me, and would achieve the same thing, @zpao @spicyj ?
@spicyj I'll try to devote time to it this week but can't promise i'll get it done....
@spicyj What do you think of this alternative?
Implemented invariant to guard against #1466
While it may be a bit weird, it does make sense to add `dangerouslySetDefaultInnerHTML` for this and similar cases were you want to prepare the DOM for a purpose, but don't want react to own it.
I'm not sure if it's something worth considering, but it does make sense practically for some edge-cases it seems (to me).
Plugging mine:
https://github.com/appsforartists/ambidex
Hmm, that's weird, I couldn't find anything immediately off about your setup (also, awesome GIF!). You're running React 0.10 I assume?
Right, looking at your GIF again (again, awesome!), I think I know what the problem is. Your window is not focused when the DOM is mounted and thus the autofocus fails. Try manually loading your page (or just refreshing) and see if it helps (which is supported by your last comment).
Hmm, doing with what I can in [Atom Shell](https://github.com/atom/atom-shell), it doesn't seem to have any effect. This problem also occurs when new buffers are created and switched over at the same time.
@syranide Browserifying my code (with small modifications as I needed to stub the required `ipc` module), the input field doesn't focus on Chrome 34. Your code logs `true` on both Atom Shell and Chrome though.
@kramerc ~~Hmm, this is really weird, since it logs `true` it would mean that it _does_ focus the input (and it is attached to the document as we already know), but then blurs it for whatever reason before it's presented to the user.~~ Wups, `!==`, so it doesn't focus it for some reason, that's "good" in that we can at least use it as a cheap test for whether we should use the fallback or not, if we decide to go that route.
It's really interesting though that it doesn't even work in Chrome for you, as I mentioned, your code is simple enough and I couldn't find anything suspicious in it, but it works in the fiddle... this is weird.
@syranide Thanks for helping, this problem is weird indeed. Should I update this pull request to use `requestAnimationFrame`, leave it as is, or close it?
Again, I defer to some official dev, but that would be my take on the situation.
@syranide I am unsure, don't see any simple test cases if you have a better one. If the element is on the DOM and is visible it should focus() properly. I've a lot of experience in the area.
@sebmarkbage What needs to be changed?
raw     gz Compared to master @ 32b84a4c5ea32835b93a857cf00f0db86d6c755a
That's not completely true. "raw" property for string literals in Esprima, Acorn etc. is provided exactly for reason of advanced handling, while literal's value stays preprocessed.
@syranide Feels like we don't understand each other.
@syranide If it's just about trimming, you don't even need to decode values again - instead you can count spaces on the beginning and ending of `raw` string and cut `value` correspondingly.
> just decoding in JSX seems like the logical choice
> Quite a while since I last looked/touched that code, but IIRC there's quite a number of things about attributes that is kind of weird.
I see you've already closed facebook/esprima#19, probably makes sense to close this one, too? (since it's linked)
Way too strict in my opinion, simply warning on `undefined` solves @spicyj's case without having to booleanize every value (which could likely lead to just ignoring the warning because it's far too common).
cc @zpao @syranide @spicyj
@spicyj Hmm? I'm pretty sure `console.warn` is stripped in production-builds, which means the `__DEV__` check should be superflous or did I misunderstand you?
This is a super shitty implementation, but simply to get the discussion going.
cc @sebmarkbage @zpao @spicyj @yungsters
@vjeux This doesn't explicitly address the whitelist itself though, only the additional type information that accompanies each property/attribute in the list.
http://jsfiddle.net/Eh29v/, try typing numbers to the left in the input field and the cursor will reset.
@zpao Only `value` is `HAS_SIDE_EFFECTS` and it's a string, so there's that :)
raw     gz Compared to master @ 32b84a4c5ea32835b93a857cf00f0db86d6c755a
`div.id = 'foo'; div.id = ''; div.hasAttribute('id') === true`
@spicyj Do you want me to rebase this?
@everdimension Just by looking at it I'm not entirely sure why that code is to blame or why yours fixes it, or why it worked before but not now (if that is the actual source of the problem)...
@syranide did you meant #6228 ?
Do you have a repro? (jsfiddle?)
I had the same problem. A little CSS solved it for me:
http://jsfiddle.net/bwPbC/2/
Didn't understand the last comment: the jsfiddle is using camelCased. Tried with "min-height" and still does not update when clicking.
@zbyte64 Minor nit-pick, I _think_ the preferred way of updating props is by calling `React.renderComponent` again on the same node.
Checked with @spicyj, it is the preferred way.
@spicyj cla signed :)
Check out the fiddle
http://jsfiddle.net/NeJNg/1/
raw     gz Compared to master @ 32b84a4c5ea32835b93a857cf00f0db86d6c755a
cc @chenglou @zpao
Tried to repro it myself but can't: http://jsfiddle.net/kb3gN/2231/, _however_ there exists a somewhat unintuitive problem: http://jsfiddle.net/Pa5Ud/, if you wrap all of those 3 cases in another array, logic dictates that the result should be the same, but it isn't. I would assume that this is the problem you're seeing, although I'm thinking there is no possible `traverseAllChildren`-fix for it (other than removing the one-child special-case in React, which might be unlikely).
@syranide You're correct, the problem was due to a nested array (I didn't realize I was actually putting one array inside the other).
@spicyj
@gaearon Yeah, this is an unfortunate side-effect of an optimization; if a component is given just one child then `children` is points directly to that child, but if it's given multiple children then `children` is an array of children.
@syranide
@gaearon Keys in React are only considered unique/reusable within the container they're rendered inside `<div>`, `<span>`, `[]`, `{}`, etc. So `<div><Com key="x" /></div>` will not see `<Com key="x" />` reused _anywhere_ but inside `<div></div>` at that same spot, it cannot jump and there exists no understanding of things moving around without keys, it's either reused or destroyed. Put them inside another div, span, array or object and it is unmounted + destroyed and a new instance will be created + mounted in the new place.
@syranide
@gaearon I think you misunderstood my intent, what I described above is _not_ a flaw in React, it is how it's designed. `<span /><div />` is just as related to `<What /><Ever />` as it is to `<div /><span />`, that is to say, not at all. Any relation is inferred by you, it cannot be derived from the data contained within the previous and next snapshot of the hierarchy that React sees.
3. `3` and `$C` will be created (does not exist prev).
When dealing with nesting such as:
@syranide
At the risk of suggesting something very stupid..
@gaearon
@syranide
@gaearon No problem :)
Related issue: #1126
<h1 itemProp="name">Avatar</h1>
Good call @syranide! Updated.
@sabeurthabti Not related, as I said in your issue the context provided by the error message is wrong, don't look at it.
Example code: http://jsfiddle.net/9RrAN/
In the following code looks very unnatural for a common case like populating exiting entity from server.
``` coffeescript
@yamill Your method can running, but I bind onChange with form, like so:
BTW I'm glad to know about envify, it has made me aware of security issues with credentials being stored in environment variables.
**Repro Case**
http://jsfiddle.net/kb3gN/2145/
@appsforartists
http://jsfiddle.net/kb3gN/10642/
The most common example I can think of will be this in koajs
var koa = require('koa');
var app = koa();
// old chrome, ff, opera, ie, etc.
@syranide The standard is still in flux right now, it's unclear to me if the future is URL.createObjectURL or the .srcObject attribute. If you don't have WebRTC at all (no URL, no .srcObject) then the stream attribute would not do anything.
@syranide Yep that path sounds good to me
The jsfiddle based code samples are missing; I see an empty block instead. Note that you have to go down a bit; the JSON example and graphic are working, but the jsfiddle JS code samples aren't.
http://jsfiddle.net/3Vs3Q/embedded/
When I turn on Firebug I get the following errors:
[Warning] The page at about:blank displayed insecure content from http://jsfiddle.net/6wQMG/embedded/. (about:blank, line 0)
[Warning] The page at about:blank displayed insecure content from http://jsfiddle.net/QvHnx/embedded/. (about:blank, line 0)
You're right, it looks like https everywhere.
Still a surprising issue at first -- github supports https so that's why the redirect works at all, only to fail afterward.
@spicyj Yup, I'm interested. I can take a look closer to the weekend, OK?
@spicyj  can't we just add
@spicyj Thanks for answering.
@spicyj,
@matchu I didn't write it up as a PR yet, though I tried all of the versions here to see what's possible.
Sweet! Thanks, @EtaiG :)
Hendrik Swanepoel
email: hendrik.swanepoel@gmail.com
Hendrik Swanepoel
email: hendrik.swanepoel@gmail.com
The jsfiddles in this article contain the following:
http://jsfiddle.net/3Vs3Q/embedded/
When I turn on Firebug I get the following errors:
http://jsfiddle.net/9jC4q/
// .. code
// .. code
Thanks for the CC, @akre54!
raw     gz Sizes
raw     gz Sizes
cc @zpao
To me at least this seems surprisingly viable, especially in the sense of being scalable/maintainable and even more so considering that SVG doesn't really have much in common with the DOM.
raw     gz Sizes
@spicyj ~~`type="progress"` does (`value` must be an attribute and not a property),~~ but I'm fairly certain that only `input type=""` is special like that and could be treated as a special case where we list the attributes per `type` (i.e `inputText`, `inputTextarea`).
See this fiddle: http://jsfiddle.net/pGG2A/1/
cc @sebmarkbage @benjamn @zpao
@syranide @sebmarkbage
Apparently the `dir` attribute may be part of the exception as well. See http://jsbin.com/pasicazexe/3/edit.
I'm happy to make the changes if the maintainers agree that the current behavior is unexpected enough to warrant a change.
'[^\-.0-9:A-Z_a-z' +
Also please tell me if this is just a silly idea. :)
BTW, it's not only `<a href=>` params that face this, I am having proxy issues with `<div style="url(...)">`.
edbaa9e skips the `ReactDOMProgress` test if it determines that the `<progress>` element isn't supported. All green now.
@zpao @spicyj Side-note, is there a reason why `shouldIgnoreValue` isn't always true for `null/undefined`? It seems like we would intuitively want it to clean up after itself if the attribute is no longer used, not that it really matters though perhaps. In keeping with Reacts nature, it would seem like to me that a DOM element should be uniquely defined by it's props (where possible) and not depend on previous values.
@zpao Using coverify to output a lcov.info for Code Climate will only give the lines of code that are not executed. So, you will get very limited information. You will not get how many times a line is executed, number of branches hit, number of functions hit etc.
cc @spicyj @zpao
Nice find. It's a shame that the progress element doesn't unset its `value` property when found in an indeterminate "barbershop pole" state.
@chenglou Hmmm, that's a shame. Can I ask what libraries Facebook and Instagram use for form validation and input validation in their UIs?
@chenglou It seems odd to me that you're using form validation mixins in your large web applications but don't see the value in extracting the code into something reusable and useful as a React addon or part of React core.
@chenglou I guess that's where I'm going wrong. I'm trying to use React without any other frameworks or libraries to build the web UI for a REST app.
It would also need to handle the whole tree of children, not just immediate children.
cc @petehunt @zpao
Mithril is another virtual DOM implementation and the author did not know about this edge case. Having this unit broken out as a shared piece of code allows the community to share the hard learned production lessons for virtual DOM systems.
cc @lhorie
Signed the CLA.
@zpao no worries.
- if you have input type number, you would expect it's value to be string (duh thing that might have been historical attainment?)
value = thist.state.value, requestChange: this.handleChange
This is bad for two reasons:
In [my test example](http://jsfiddle.net/Ew6kL/3/), the first `<td>` element is being handled directly using `addEventListener`, and does not use React at all. The second `<td>` element is rendered using React. This element does not trigger the click alert when tapped in Mobile Safari. The third element (a button) is also rendered using React and does trigger the click alert when tapped in Mobile Safari. This would indicate that it is some problem in React, since both the `addEventListener` method works, and the `button` element works, but not the `<td onClick=...>` using React.
@spicyj that does not seem to fix it, see [this updated JSFiddle](http://jsfiddle.net/Ew6kL/5/).
@syranide yep unfortunately thats the only way I could think of to ensure it's using the correct document. Realise it's less than ideal.
Sorry for my rudeness.
PS. I've probably seen 2-3 people get bitten by it myself now that I think about it.
@spicyj Had a debugging session with `skrebbel` on IRC who encountered that error, turns out that he had `<a><div /></a>` and his browser turned it into `<a /><div /><a />` and I assume React sometimes happened upon the second `<a />` and found that it was not the element it was expecting (i.e, the first).
http://jsfiddle.net/kb3gN/1874/
I was trying to have 2 different components doing different things.
// Require apps
@syranide Ooops. I had a div nested in another div. I believe that caused the issue. So I am back to original react-id error. It looks like I was wrong about the browserify. It doesn't seem to matter now.
@syranide: I was trying to reproduce the problem and than I noticed that I was loading `require('react')` and `require('React')`. I believe for some reason I ended up with two 'instances' of React in my app - should that be possible?
Invariant Violation
Seems like there should be a way to detect these.
@petilon: Aside from the fact that it still is an issue to fix and it seems like your code should work, from what you say, your view is in a JSX file. I would argue that handling a click event is definitely something that belongs to the view - you are reacting to a UI element action. Perhaps a good solution for you is to add another event to your component, something like `onBuyingInitiated` that you can then handle in your controllers and it would be fired inside onClick in the JSX. The handler can be passed as a prop. This way you may trigger same 'business logic' in your controller on clicks, key downs etc.
@macqm Thank you for the suggestion. Some people would argue that handling events (and changing the view in response) is the controller's responsibility. This isn't just a philosophical issue. From a practical point of view it makes sense to move as much code as possible to .TS files because TypeScript can perform error checking. (Note that Flow isn't available on Windows.) Nevertheless, your idea is useful as a temporary workaround, so thank you for that.
<CustomModal {...this.props}
@insin Btw as for the warnings, the following code is in the source `// TODO (yungsters): Remove support for "selected" in <option>.` so it's something that's going to change apparently.
http://jsfiddle.net/t9wee5tr/3/
@spicyj ?
this.refs['yourRef'] returns 'undefined'
raw     gz Compared to master @ b75d11c6039e4d2ab796bce2a1934e9e69b2b7e7
cc @sebmarkbage
@spicyj Hmm I assume you mean because of `isStartish` and `isEndish`, intuitively it feels like I might've misunderstood something here, as pointer events won't provide any data that it isn't already aware of (but perhaps it's safer and more "future proof" to have both?).
HandJS:
Why yet another polyfil?
@steida Highly subjective seeing as a lack of pointer events would effectively break an application, supporting both mouse (and touch) and pointer events in an application seems like a significant headache to deal with.
https://github.com/logotype/MyoJS
@syranide Good to know there are mouse, touch, qwerty and now myo events available :-)
More commentary (from a while ago): https://docs.google.com/document/d/17BUdF-uSg_0CUwhyenaB5FZeob0HK9DcD85lC1sH6cA/edit
http://qiita.com/kimagure/items/22cf4bb2a967fcba376e
https://medium.com/@cassiozen/flux-cargo-culting-3cae9ff27c0c
@syranide in what way? :wink:
$.ajax({
If you want to pass `props` and `state` to the `render` method, then I think you must pass `context` too. In this case It will look a little weird to me. For example if someone uses only `context` property:
@yaycmyk It's a bad idea in some cases because you're then referencing `props` and `state` from a certain point in time and not necessarily what they are currently set to. https://github.com/facebook/react/issues/1387#issuecomment-41931037
@syranide Hmm, yeah but that's a matter of JS knowledge about referential equality.
@yaycmyk it's not about referential equality. It's just reference. Pointing to an old copy gives you stale data no matter what kind of equality you're using.
applyMixins(C, [A, B]);
mixins: [ A, B ],
@sebmarkbage Oh that's awesome!
**traits.js**
export const autobind = {
Those syntax hacks are impressive :-)
// user's code
@mlrawlings :+1:
@gaearon Looks promising, but a little bit too React-specific. @mlrawlings's example is the most ideal but it'd require manually wrapping all classes with a function; I wonder if there is any possible way to abstract that part out into a generic lib?
applyMixins(Foo);
As @gaearon pointed out, you can expect alternatives to mixins in the coming months... maybe before we get annotation support in babel.
I think Babel already has annotation support behind a flag.
@Enhance
The undesired behavior can be seen here:
Here's a little code in case you are confused.
gapi.plusone.go()
gapi.plus.go()
gapi.page.go()
gapi.plusone.go()
gapi.plus.go()
gapi.page.go()
@spicyj Ah you're right, I confused myself thinking about "progressive enhancement" jQuery-libs that usually only modify the children, updated the code.
@syranide Yes please :)
@sebmarkbage For sure
http://jsfiddle.net/kb3gN/1755/
It's not so clear how to use `<ReactTransitionGroup>`.
Should animations have to be performed on those special callbacks?
s.carella
@spicyj Ok, its been about 2 more months so I figure I would give another nudge.  Personally I think it would be better to have something that works than something that does not work.  I would rather be able to test now and then have to update my tests if the way to test this event changes then not being able to test this event at all.
Andrey Popp / 8mayday@gmail.com
http://jsfiddle.net/vjeux/kb3gN/
http://jsfiddle.net/rTv4n/
I'm not sure to understand what implications it has to not use a single key per children, apart from the degraded performance of course. Is it something related to future plans maybe?
@spicyj Yeah,I agree
@zpao Additional falsey tests in 39cb4e6!
@zpao Np; done!
A little late to the party, there is a non-obvious trap here as any strictly non-boolean values are treated as a filenames instead, but non-boolean values are often passed around as boolean values in JavaScript, say `shouldDownload && url`. Which I'm sure many people do without giving it any thought.
I'm not sure if there is a good alternative (other than adding a non-standard `downloadFilename` attribute or whatever, meeh) and perhaps the issue is obvious enough if you run into it to not warrant a "fix".
http://jsbin.com/hokahaze/6
@ninjabiscuit the suggested workaround is the one in https://github.com/Khan/react-components/blob/master/js/timeout-transition-group.jsx which just relies on a timeout, rather than assuming the browser will fire the event.  Until the browsers fire the event properly, this will probably be the only thing we can do.
https://jsfiddle.net/7wyp8e1r/3/
@oozaa if nothing else works for you feel free to try out my [robust-transition-group](https://github.com/jedwards1211/robust-transition-group)
Hi @spicyj
- Previously signed CLA, see #241.
Thanks @spicyj that was very helpful - I wasn't aware of refs.
Signed the CLA.
But I feel it's somehow hackish, and it adds unneeded logic to components.
specific CSS classes that may be customized with keyframe animations or
transitions.
Code below could be a result of a typo in a mixin name or an attempt to use a mixin from a module which has no `module.exports` (by a mistakte).
mixins: [undefined],
Just made a mistake like this (mispelled mixin name), which led to a cryptic error some time later. Would be nice to have something like @andreypopp's commit. Any reason why not?
I wish these values (as well as the event) were somehow exposed.
Im seeing the error: Uncaught ReferenceError: foreignObject is not defined
Here's a fiddle to show you: http://jsfiddle.net/leoasis/RH2vm/
Why should the user care about where the mouse moves from/to? Perhaps this can be handled internally? Is the problem due to bubbling here? I may need to dive into the code a little more to get a better understanding and stop saying nonsense :P
And I got still quite strange results:
@ryanzec
'<div data-reactid=".lfiu3e2o00" data-react-checksum="-63435675"></div>'
This is a convenience method for adding an additional, one-time `componentDidUpdate` method to a component. It's useful for testing components that are updated asynchronously from outside data sources (such as components that fetch data through AJAX). For example, if you had a component that changed a value that was updated asynchronously, you might test in Mocha it with something like:
it('updates the value of input.foo with the current state.value', function(done) {
@spicyj I agree that that would be more useful in many cases, but I don't know how you would insert an arbitrary function into React's run loop (presumedly, that is the "tick" that you would want to wait on).
Aborted due to warnings.
@zpao  Will do thanks :)
‚ùØ mocha test
at /home/yoshua/.nvm/v0.11.12/lib/node_modules/mocha/lib/runner.js:452:12
at /home/yoshua/.nvm/v0.11.12/lib/node_modules/mocha/lib/runner.js:309:7
var mocha = require('mocha');
* Initialize jsdom
"mocha": "^1.18.2",
"test": "mocha"
"author": "Yoshua Wuyts",
var mocha = require('mocha');
* Initialize jsdom
If CoffeeScript isn't your thing, here's [what it compiles to](https://gist.github.com/bkonkle/07f2ea72295c0f4350ed)
@spicyj Good catch! That's exactly what the problem was. Test now passing! :grin:
var sinon = require('sinon');
var expect = require('chai').expect;
var nameSubmittedStub = sinon.stub();
mocha 2.3.3
This caused issues when there would be a union of a shape checker which
warnings even though the other type passed.
My real Name is Fran√ßois-Xavier Bois
What does it mean?
Intentional:
I don't have any onMouseMove handlers at the moment, but I wouldn't be surprised if it had issues as well
rather underpowered netbook)
@zpao @benjamn Ping.
@zpao With esprima+escodegen upgrades, added support for preserving comments in output via `comments` option in [pure-cjs@1.10](https://github.com/RReverser/pure-cjs).
(See http://jsfiddle.net/ca47V/ )
+        'foo'
+        null
Known limitations are the accessors of
http://jsbin.com/poqoxija/1/
At the very least it would be nice if `cloneWithProps` inherited the context, but that doesn't seem to be the case either
Hi @zpao, is this still on the radar?
other kind of structure.  It's more like EventEmitter that way, which forms
ways.
only Flux-oriented, but is also free to be highly specific to the
Add Aviator to "Routing" section.
IMO `null` and `false` are both fine sentinels for "this space intentionally left blank" but `undefined` is Javascript's idiotic way of handling both "not here right now" and "was never here". It'd be nice to have this addition.
http://jsfiddle.net/BSJPd/1/
Arguably not a bug but unexpected and undesirable for me.
I'm not sure if that really fits here‚Ä¶
else
@Jpunt @jimfb ( /cc @benkeen  )
alias: {
It seems like a very weird convention for `custom => custom` but `custom-element => CustomElement`. I.e, the hyphen not only capitalizes the word after the hyphen (kind of makes sense), but also the capitalization of the entire name (does not make sense to me).
@mrjoes One other way could be to push all ajax requests handlers to an array, and go through that array in componentWillUnmount to abort all of them. Of course, you'll need to remove them from the array on complete of the ajax call. http://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery
@ustun This won't work for me. Data access layer is separated from UI and returns a promise. I don't have access to underlying AJAX request object, so I can't cancel it. Cancelling all requests is not an option.
http://jsbin.com/mekuduqi/1/edit
But it throws:
@chenglou
@zpao
@spicyj How does this look?
@syranide SVG spec defines a few tags that are hyphenated such as [this one](http://www.w3.org/TR/SVG/single-page.html#fonts-FontFaceElement).
2. It's very weird that `component` becomes `component`, but `component-name` become `ComponentName`.
See this http://jsfiddle.net/XB98M/
@zpao
_the character escaping there is intentional since bug involves invisible characters_
https://jsbin.com/toluqu/3/edit?html,js,output
@thelambdaparty @skcalanderson2 : I use that workaround too but its not a solution. I shouldn't have to template everything (ex: `<tspan>{`purely static string`}</tspan>`) to keep my SVG's from getting span'd and broken.
emacs compatibility
@zpao I signed the CLA.
@gnijor Are you up to the task? :)
This seems incorrect. Am I missing something?
Couldn't we just _not_ `Object.freeze` if it doesn't exist (since it's just `DEV` too and just one place)? That's the only thing the sham can do anyway.
I'm not sure if it really makes sense, but `$delete`?
Is there any any issue describing the reasons behind this decisions so I can take a better grasp on it?
@petehunt done.
@vjeux : Sure. I want to try and contribute. Let me do it!
@cpojer @spicyj What is the intended solution to this problem? I mean, so duplicate keys are unacceptable.
@spicyj I've thought about that, and it seems like the cleanest approach to me (right now at least), it's almost like a feature (keys are unique) as opposed to the "emergency survival" of trying to patch it up. I'm assuming it would be even cheaper as we would just not call `callback` or something like that?
Spoke with @chenglou in chat a bit, and he seemed to agree. I feel like supporting only arrays and strings, but not objects (`{A: true, B: true, C: false}`), is really arbitrary. Especially as I understand it, you use the object-approach exclusively internally at FB to allow minifying of class names (that's my impression from seeing previous discussions on the subject at least).
cc @zpao
``` coffeescript
@josephsavona Thanks for the feedback.
http://jsfiddle.net/W3qsZ/2/
With the error:
@zpao is there a discussion happening around this somewhere? Your last comment was:
@zpao So this issue, along with #436 are both referenced from https://github.com/zilverline/react-tap-event-plugin ‚Äì where it says "When Facebook solves #436 and #1170, this repo will disappear". And http://react-components.com/component/material-ui#react-tap-event-plugin where it says "This dependency is temporary and will go away once react v1.0 is released"
Cool, thanks @spicyj !
http://jsfiddle.net/kb3gN/1345/
http://stackoverflow.com/questions/7358781/tapping-on-label-in-mobile-safari
This is still not working in 0.10.0, and is actually a duplicate of #134.
this is so weird :(
Found this interesting link: http://www.nczonline.net/blog/2012/07/05/ios-has-a-hover-problem/
@spicyj sorry i'm a bit lost in your revert reverts of reverts.
@flockonus Problem is it doesn't make sense for React, as options would then be uncontrolled AND controlled at the same time, or just generally not act the way you would expect it to. By React's naming convention `selected` would make the `select` controlled, thus being unable to change options, and if no option is `selected` it would be uncontrolled. Adding a `defaultSelected` is possible, but I don't even see the point. Sure `selected` could represent the uncontrolled `select`, but in terms of naming it would be quite misleading. `value` is the right _and_ better way of doing it, no point in leading people down a more inconvenient path.
@spicyj Sounds like it should be upgraded to an error as there's no reason why you would ever want to ignore it, but perhaps it leaves React in an unstable state?
@petehunt Ah, that makes sense. Thanks.
Side-note, we should probably add http://jsbin.com/caxipewo/6/edit (https://github.com/facebook/react/issues/1147#issuecomment-35744590) or some variation of it as a test.
@spicyj Is this still happening?
:balloon: :tada: :gift:
@petehunt Wow, where is it? :) Is this a teaser?
@spicyj Can close this.
Changing the input with:
manaulChange: function(val){
http://jsfiddle.net/kb3gN/1303/
When an img tag is nested one level, it fails to render (Uncaught TypeError: Cannot read property 'firstChild' of undefined), while the self closing paragraph is doing fine. I can reproduce this issue on the current master. Is the img tag a special case, is there a way to work around this issue?
Whoops my bad: http://jsfiddle.net/kb3gN/1303/
http://jsbin.com/caxipewo/2/
http://jsbin.com/caxipewo/4/edit
http://jsbin.com/caxipewo/6/edit
@syranide Your latest two jsbins (4 & 6) throw different error for me (from `this.refs.B.getDOMNode()` in X `componentDidUpdate`):
http://jsbin.com/caxipewo/11/edit
@syranide, no I didn't want to throw the error so that you can see that the componentDidUpdate will be called double. The point is that first the span is not there and if one would try to access it (as in your ref.getDOMNode()) it would throw. See console for flow.
What is wrong about it?
@totty90 It's not allowed (right now), there's just no check to enforce it. So yes :)
Melhores cumprimentos,
@spicyj But everything is already there, it's just the injection that isn't?
var SomeTrickeryMixin = {
@spicyj `_rootNodeID` must be unique at any point in time, but it only describes the hiearchy of indices and keys, so once a component is removed, the `_rootNodeID` is likely to be immediately assumed by another component taking it's place.
@spicyj Ah right, right, `_rootNodeID` emphasis on `Node` as in `DOMNode`. Excellent point, they're only unique in the DOM (loosely speaking).
@syranide @spicyj - For those of us who weren't on IRC - what was the resolution?
@syranide Ah, okay. Thanks for clarifying.
I don't necessarily like what i'm doing since it's hacky and has a chance of collisions when you have multiple instances on the same page, but I set the state of the component with a random id, and then use that.
export default InputUi;
@gaearon mainly bcs of 3rd party controls
@gaearon: why would we want to convert external components and then maintain them? This is a generic problem that calls for a generic approach... I'm not saying this should be supported out of the box, but I've seen this use case pop up several times, so it deserves at least a fair discussion :)
@omerts does your approach rely on other internals to traverse the component tree? I'm curious to see your code
@gaearon, many 3rd pary components like react-toolbox have inner states for visual component state etc. Using the redux-devtools (thanks for that by the way :)), we are time travelling, and want to see the visual components' inner states change as well.
return accKey
_Background:_  `data-` and `aria-` properties are special-cased to allow them through.  It works naturally in JSX: `<div data-foo="bar">` looks great.  However, it breaks down when directly using the React.DOM API, particularly with transpilers.  For instance, in CoffeeScript:
_Proposal:_  For camelCased custom properties, convert every uppercase character to a hyphen followed by the character downcased.
@spicyj More complicated logic? Can you explain that?
@darthapo Two-way binding (`valueLink`) may be something you want to use instead, you can even implement your own `this.linkState` if the one provided (addon) isn't ideal for your case.
@Evernight It's only a helpful warning, it is not _wrong_ not to have `onChange`. But yes, it is annoying that they can't be squelched, so they can end up burrying actually important warnings (or just generally be an annoyance).
@syranide Yeah, but it's nicer to have no warnings (especially at runtime) when there probably shouldn't be any.
@spicyj Here: http://jsfiddle.net/cf76B/5/ . It behaves exactly as I want it to, I am not exactly sure why it ignores the mouse events though.
@spicyj I mean I can't move text around or paste/delete the text using mouse. Probably some debugging would explain it but the current behavior suits my needs. Maybe the case is not typical indeed, I still can use empty function as a workaround.
@ktei you might want to consider using `defaultValue` for that purpose.
<input type='radio' >{'Potato'}</input>
<input type='radio' checked={true} >{'Carrot'}</input>
.Mixin
.propTypes
Make sure you put that in a file named something like `__ugly_monkeypatchHack__` so you don't forget its a bad idea!
@syranide Unfortunately, it seems that React sometimes goes a little bit overboard with the "helpful warnings". This is one of those cases.
@syranide
// This will cause Invariant violation
When one tries to click on a div an error will be raised:
@plievone It seems so, but it's weird, I did try it with `span` and `div` and it worked. Oh well, but yeah, probably same root cause.
@syranide Without keys it may reuse the same instance or id or something in some cases, so not unmounting the event target and thus not erroring, I guess?
@plievone I think I tried that, but `span != div` so I think it should anyway. But this whole issue seems magically weird.
@syranide Problem occurs for me with `reactid=.0.0.3.0:0.3.1` as well
`onlyChild` is mentionned in https://github.com/facebook/react/issues/751 but is it documented somwhere?
- `React.Children.map` returns an object, not an array (!)
Hi spicyj,
Sorry spicyj. I thought I was using master but I am mistaken. I'll get master and re test.
@petehunt But how would you then deal with information relative to current time? I.e, "blog post is X hours old", "person is X years and Y days old", "message received X seconds ago".
Personally, I would thread a specific moment (possibly a Date instance) through props, but I appreciate many find that too cumbersome. For those people, maybe something based on context would be enough?
@syranide Your opinion surprises me, considering React frames components as functions of props and state. The official docs even say that the render() method should be "pure." Depending on the current time is inherently impure.
mixins: [React.TimeBased],
@chenglou Can't be done correctly today (due to `_mountIndex`) and having `null` become a `<noscript>` or something seems kind of magic (and also messing up some CSS3 selectors).
Just to be clear, here's an example of troublesome code:
@chenglou It's a little weird, but that's the API I would like when `<frag>` becomes reality, so sounds good to me.
Or is it because of the VM?
http://jsfiddle.net/TrySpace/JRy7W/7/
`<div id="fruit">`
`<Grapes></Grapes>`
`<div>I am grapes ~</div>`
@zpao I've only been "experimenting" so far and I'm honestly not sure what `react-tools` is, so I have no opinion. :)
@zpao remove it!
After checking further, it did seem to break on the doctype (!) as well.
strips `script`  tags
@wyuenho  As another take on it, you could have a preprocessor (like html-jsx-lib) turn <!x to <_x (or something like ConditionalComment) and then add React.DOM._x
@jhiswin Or better yet, preprocess <!--[ ]--> to JSX. As a hack it'll work, just have to make sure to spit out the right string what `renderComponentToString` is called. The extra setup is a hassle tho. This also denies the claim that React is designed to be easily rendered on the server.
@syranide Prepending doctype just feels a touch hacky. That said, you're right, it's probably not a huge issue.
@adjavaherian You shouldn't need to.
http://jsfiddle.net/YXgzf/
Is there any movement on this, @wyuenho @petehunt ?
Was red before due to bad rebase timing before.. caught a stray error off master.
@spicyj That "bug" was new to me, adding them to document fragments come at a slight cost, but it's probably not significant in this context.
Merged in 9ae0025
@zpao Briefly mentioned that one could wrap the component with and provide a `key`, but that is really quite a hack, as the two components would have to be intricately bound. Any methods put in the outer, the outer possibly reading state from the inner. Also quite tedious.
### Alternatives
@sebmarkbage Side-note, would it make sense to be able to provide an array/object as key? It would  be cheaply serialized, my idea being that you don't have to do `keyA + '|' + keyB` (i.e, arbitrary separator), but rather just `[keyA, keyB]` also saves you from having to escape the keys if they are potentially "unclean". Or is it too much of an edge-case?
| 391132 | 77972 | 12212 | -10818 | JSXTransformer.js | 3% | -14% |
| 391132 | 77972 | -26812 | -20441 | JSXTransformer.js | -7% | -26% |
`Danger: Discarding unexpected node:  ...`
`Uncaught Error: Invariant Violation: findComponentRoot(..., .r[129yk].[3].[0].[1].[0].[2].[1]): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g. by the browser).`
@yang - have you moved to React ? ;)
@spicyj Yes it's only JSX. It seemed to me like white-space (arbitrarily) introduced by JSX was the issue. But perhaps I'm mistaken? Proof-reading it again, it may be the case actually (not 100% sure what @Rowno means :)).
@Rowno Aha, yeah my mistake then. Not fixed in master.
@syranide Yup, I went through the attributes and cross-referenced them with the ones in the spec.
@syranide That was from mangled rebasing - I only pushed two commits, the rest are from me pulling in changes from master.
@syranide Thanks, I'll look into that. I know just enough about git workflows to get myself into trouble, so it would be good to know how to dig myself out.
@syranide Heh, thanks for the reassurance!
cc @sebmarkbage @benjamn @petehunt @spicyj
@petehunt If it's truly an addon, how do you solve multiple uses of `setStateDeep` for the same key?
asynchronously.
B{}{' '}{}
{' '}B{} {}
I finally find out why I had this strange behavior.
In some cases the error passed by the parent component was not an object but a String.
I have also tried this code:
Isn't setState / rendering supposed to be queued or something? I didn't really expect it to be.
Kind of workaround that just works for me https://titobouzout.github.io/react/
@titoBouzout the nav bar is screwed up, but otherwise looks ok
This is a tricky issue, so I'll do my best to explain:
ous>:10274:30)
moduleTree:
awdawdawd
awdawdawd
"awdawdawd" + ' ' +
"awdawdawd"
@zpao For sure! Rebased.
@jeffmo Rebased, no conflicts.
// Do whatever with it
@MattKunze which version do you use?
Thanks to terinjokes in #reactjs
@chenglou yes I have
@spicyj Cool, then it should be an easy and safe change right?
@yungsters Probably need to validate that all properties with `HAS_BOOLEAN_VALUE` really are meant to be bare.
Ayman
AFAIK this is a "bug" with `commoner` or whatever JSX relies on to expose that feature. Just make sure to close the watch instance instead of just closing the terminal/powering down and it should be fine.
@benjamn Yeah, no lock seems fine for me, it could warn if it was found perhaps?
name: 'Input is funky'
It should be noted that this is only when using an external model, not when using the view's state. Maybe there is something wrong with my usage here?
@spicyj
Just want to note a bug in http://jsbin.com/dunutajuqo/edit?js,output
http://jsfiddle.net/tS8Nv/1/
@spicyj can you elaborate?
@gaearon - it says Version: 0.12.1. I did pull it down from Chrome store..
> jasmine-node --test-dir tests/ui --coffee --matchall --autotest
@zpao Thanks! Looks good to me.
Richard Livesey is the name!  Didn't expect such levels of fame! :money_with_wings:
This is a convenience method for adding an additional, one-time `componentDidUpdate` method to a component. It's useful for testing components that are updated asynchronously from outside data sources (such as components that fetch data through AJAX). For example, if you had a component that changed a value that was updated asynchronously, you might test in Mocha it with something like:
it('updates the value of input.foo with the current state.value', function(done) {
@benjamn Ah, sorry, that's from an example test using mocha/QUnit-style [done callbacks](http://visionmedia.github.io/mocha/#asynchronous-code) (`done` is a cb in mocha that you call to indicate a test has completed).
@zpao @petehunt Hm. I think I understand where you're coming from. It's just that, for instance, `classSet` is a ten line function, and having that be its own npm module replete with its own sem-ver number and README seems a bit excessive, you feel me? Lemme look a bit into wzrd.in and see if there's any other solutions.
@petehunt that sounds like a limitation of wzrd.in which I think one can request them to fix.
To what shim are you referring? I've tried karma initially, but couldn't get PhantomJS to play along nicely.
@spicyj, you are my hero today.
@sebmarkbage Haha.
@petehunt I don't know the specifics right now, but being able to easily edit internals of components would be a bit bad, if they aren't already given that (which I don't think?). Being able to view it shouldn't matter, people should not expect that kind of information to be _hidden_ anyway.
- Lowercase
@syranide Only the element names would have conflicts with naming. Since the elements are all camelCased and it is good practice to uppercase your own components, I don't see any real conflict. IMHO I don't think it is worth removing almost HTML/SVG markup parity for such an easily avoidable scenario.
raw     gz Sizes
https://github.com/facebook/react/pull/760 is now decided (JSX member expressions, `<foo.bar.baz />`), but I'm not sure if it feels like a great fit, you would be required to prefix all tags as `<svg.polygon />` or `<s.polygon />` (if you feel like mapping it like that). Which many would probably oppose, but it does keep it neatly separated.
raw     gz Compared to master @ 4b392f19a88b099f25f99978a40851c9b5aa0b50
#### Technical details
raw     gz Compared to master @ 8ca62bd022b535386da08b8d2ba59b951d3cfc2a
@petehunt Cool!
@syranide There are a few places in codebase where the previous ID structure is documented in comments, might want to grep for those?
@spicyj OK
Do you think it's worth adding `unhyphenate` for the sake of providing a suggestive warning? (e.g. `Unknown style property background-image. Did you mean backgroundImage?`)
COL, COLGROUP, TBODY, TD, TFOOT, TH, THEAD, TR
"bgColor" is entirely deprecated, but is unfortunately used pretty often even now
Also, isn't `wmode` a Flash-exclusive attribute? Isn't it better to always use `object` for Flash instead of supporting an arbitrary selection of its attributes for `embed`?
Though honestly, it seems the best way to deal with Flash is to wrap it up in a magical black box and only allow the wizards to touch the box.  So really, you'd probably better off using `dangerouslySetInnerHTML` or `SWFObject`, rather than pushing it through React anyways.
@zpao It is a strange situation to be in if propTypes are not relied to be valid, problems will ensue? The validity is just checked via other means (console.warn) than throwing immediately. I just pointed out that as of now the condition to `warning` may get easily reversed, as in comment https://github.com/facebook/react/pull/912#issuecomment-32548766
Error: Parse Error: Line 476: Unexpected token ...
and here is a fiddle with the same result:
http://jsfiddle.net/andrezsanchez/wQbD9/
@spicyj Being able to start a timeout in `onChange` (for say a search field), or to detect that _data has changed_ (so we can enable the save-button).
@spicyj But what does that actually mean, exactly? :)
Intuitively that actually seems kind of ok, if we want to reproduce the source, except I'd do a special-case for the `./>`:
@spicyj That PR should fix 99% of the output weirdness, so yes. :)
@spicyj http://youtu.be/1OeXsL5mr4g?t=25m13s after a few seconds.
@steveluscher Cool, and well done @spicyj !
`grunt connect sauce-tunnel:keepalive`
`grunt build:test build:basic webdriver-jasmine:saucelabs_ie8`
The `'NA'`-fallback is not used in https://github.com/facebook/react/blob/master/src/eventPlugins/CompositionEventPlugin.js#L175
I don't see why we need it at all? If the browser doesn't support a text content accessor then there's nothing we can do, assigning to `'NA'` or `undefined` should be a meaningless distinction with the same result.
@spicyj Oh right. I guess technically it could still work, but it'd be kind of weird perhaps yes. :)
raw     gz Compared to last run
(@syranide You could try if `grunt build:perf` `grunt connect:server:keepalive` and navigating to http://localhost:9999/perf/ would be of some help?)
raw     gz Compared to last run
@spicyj You have no idea how completely node and everything else just broke down because it had changed from LF to CRLF (that's why I couldn't "grunt build", etc).
Shouldn't be there right?
Because here I get null reference exception:
raw     gz Compared to master @ 3d47177596e9782de36a5cd7065e01c69897b2bb
cc @benjamn @vjeux
Thanks to @pieter-vanderwerff for pointing out that `audio` and `video` are also affected. This was a bigger issue than I initiall thought.
added tags:
- symbol
added Attributes:
- xlinkHref
<circle cx="10" cy="10" r="10" style={{stroke:"black", fill:"white"}} />
@petehunt But those fiddles seem to work ok on current master?
@spicyj actually that does not work. But the custom component cases work.
Would love to see this land :+1:
@syranide awesome, i look forward to seeing it!
@petehunt Rebased.
Riffing on that old spec's idea, something vaguely like this:
I think I've come across a bug with TransitionGroup which basically causes properties of the "leave" styles to be ignored. [Here](http://jsfiddle.net/matthewwithanm/GqhtQ/)'s a fiddle demonstrating the problem.
I realize that this behavior is all taken from ngAnimate, so maybe this isn't the best place to discuss the issue. On the other hand, the React project is much younger and there's probably more of an opportunity to correct it here without worrying about legacy. Let me know!
Shadow roots have nodeType == DOCUMENT_FRAGMENT_NODE. When trying to render into one, react throws an error:
There is an explicit check to only allow rendering into ELEMENT_NODE_TYPE and DOC_NODE_TYPE. Is there any particular reason why document fragments are excluded there?
React has bigger issues than that when its combined with Polymer. One seems to be because Polymer wraps all DOM elements and events in a wrapper (to polyfill deficiencies of the underlying browser), and that seems to throw React off. I had to explicitly unwrap the DOM element which is passed to React.renderComponent(). And event handlers aren't automatically attached, I had to do them manually in componentDidMount. See https://gist.github.com/wereHamster/b5f36db9e15558ada718.
@zpao @spicyj
@vjeux I agree, my only issue with that is that we would explicitly break with the CSS standard then.
I like @vjeux idea, but I feel like it would be hair thin separation of the two and possibly "dangerous"... but it is neat, and likely what the user intended.
- Nasty hack to commoner required to get the output directory.
foo.js
foo.js.map
Passing a function with some properties (simply the wrong thing) into `setState` yields rather cryptic:
Invariant Violation: Critical assumptions about the merge functions
But it is strange that the invariants in https://github.com/facebook/react/blob/605b42e/src/vendor/core/mergeHelpers.js#L66-L73 and https://github.com/facebook/react/blob/605b42e/src/vendor/core/mergeHelpers.js#L87-L94 don't mention arrays and objects, respectively.
`isTerminal` is also a very contextual name (I have no idea what the author meant). I agree that these messages could be better.
http://jsfiddle.net/NV/L2QAp/
return <label><input type="radio"/>3D</label>;
person: "joan",
setRoute("personArchive", {person: "joan", date: new Date(...)})
Andrey Popp / 8mayday@gmail.com
This is somehow related to #751 (if `@props.children` was always an array, this would work out of the box). Not sure this is desired, after all the user can wrap a single component in an array...
I was getting `undefined childMapping`, see:
else
`process.env` is indeed not a regular object, but defined from the native side, so that may be the culprit for server rendering regression:
Call me all crazy, just had a left field idea. Could the transformer that builds the npm module create 2 complete copies of react? one for dev and one for production?
and not
@taitsmp Technically, you have to [enable processing on node_modules](https://babeljs.io/docs/usage/require/) (which is slow) to get this to work.
@zpao How do you feel about `__DEV__` compiling not into `"production" !== process.env.NODE_ENV` in non-dist builds, but rather require() some module that caches the env? This is just a guess, but I believe will optimize well (function call vs. getter (which doesn't optimize in v8) + call to `getenv`).
My general feeling is that it would be great if there were no FB/React-specific idioms in the code ‚Äì so that it's treated as though, if v8 (or other engines) had all the ES2015/2016 features needed, then you could run the code on Node.js without even needing a compiler. Currently that's not really the case. (I'm sure you could do some sort of `global.__DEV__ = false` trick or something before requiring any React modules, but still, that would be a polluting hack)
@spicyj as an aside, just looking through the code now, and aside from the global `__DEV__`, I haven't seen anything that's _not_ supported out of the box in Node.js right now ‚Äì is there a reason, aside from `__DEV__`, that the non-`dist` code is even compiled and transformed into a different structure before publishing to npm?
@spicyj just to clarify, do you mean "everyone using React who also currently uses UglifyJS with it"?
Sorry, in what way was it invalid?
@yungsters IE8 now failing with
when run with `grunt connect sauce-tunnel:keepalive` and `grunt build:test build:basic webdriver-jasmine:saucelabs_ie8` ?
@vjeux I signed the CLA half an hour ago. Does it take some time for the signature to "work"?
Chrome: 11,019,243 => 50,732,389
raw     gz Compared to master @ 1b67ac90f2bdca189a61a3e873af157198cdf7a5
@spicyj Thanks for fixing this. Is counting calls to `unmountIDFromEnvironment` enough, or should one expose `nodeCache` for testing to be sure?
http://jsfiddle.net/matthewwithanm/sVmer/
@spicyj
el,
I've also extensively documented all the nuances.
raw     gz Compared to master @ e91a8a1bc30e675c4683d5667b4122106962828b
@yungsters Done. I also moved my `events/synthetic/getEventModifierState.js` to `dom/` instead, seemed consistent with the rest.
@yungsters Done. Also, you're right, I added that, I must've confused myself when I rebased.
right now which works. I'm wondering if this could be special cased to work like bubbling events?
Is there a reason why these two coexist (beside the fact that the latter seems to be introduced recently)?
http://jsfiddle.net/spicyj/6ubyH/
<div className="selected">Foo</div>
cc @vjeux
d) Have lot's of boilerplate code, for example: var Todos = TodoComponents.TodoNote;
Right now we're using a mix of a),c) and d) depending on how much nestling we have of multiple components.
<div className="logowrapper"><img className="logo" src={ branding.signviewlogo } /></div>
This is kind of where I feel the issue is, lets say SVG doesn't make it into the core, should we really have to `require` every single tag we use for SVG? What about feature XYZ? What about a UI toolkit? It doesn't seem logical to me that anyone would enjoy them very much if you would have to `require` every used element separately, it's not wrong, but it's very tedious (or `React.DOM.*` would not be an exception). But it makes _perfect sense_ that _components_ should be included individually, as you suggest.
Nevermind the taste of vomit in your mouth, but entertain the idea of something like:
Perhaps this is a pointless exercise, but is has made me more aware of the theoretical side of JSX, I think there's a lot of unexplored potential to be explored. Which has made me kind of reluctant to push JSX in the direction of JS, just because it makes sense now.
@jeffmo @petehunt @spicyj Have you guys thought any more about this?
If adding support for `<Foo["Bar"].Baz />`, will it indirectly add support for any valid JS identifier/expression? e.g. `<Foo[myVar] />`?
@zpao As per the nudge :)
Would be great if JSX recognized TypeScript constructs.
@thorn0 @jordwalke It seems like `Array<Things>` shouldn't be an issue to solve if you're extending the actual parser (but perhaps you're not), as the parser should not be in a state where it would consider JSX to be valid. However, `<A>1</A>` seems intuitively harder to solve as we _cannot_ know if `<A>` is JSX or a type-cast... until we've found the (possible) closing `</A>`, but that does not seem reasonable.
3. Stricter, but TypeScript would still be an issue. So not sure if there's a point.
@sebmarkbage Your take? Do we need an alternate syntax for special-cases?
@jbrantly, really nice! a bit of a hack, of course, and it doesn't invalidate any of the more courageous attempts in this thread, but I think that I'm going to steal your approach. Only sad thing: you still can't do:
Wow, hidden feature! Thanks! :-)
Hey @CyrusNajmabadi and thank you for your feedback! @fdecampredon have been working on a fork of TS compiler, although I think he wanted to wait until TS-development stabilized.
Basart, no, flow is intended to just work with JS+JSX+optional type
> @brigand https://github.com/brigand that's not quite correct. Flow
Edit: I just realized @fdecampredon did in fact release his TS fork.
@jbrantly  I did not release anything :D sorry to disappoint you ^^
@scboffspring For gulp and browserify?
Using this syntax in  IJ 14.1/WS 10EAP
Cheers for the comments, I'll bring it up to scratch soon. I have already done the CLA, entered as my username: MalucoMarinero.
I did it something like this @i8ramin
https://gist.github.com/adjohu/6d519dd395f3b0aec02c
@petehunt just adding a few more thoughts here related to children & performance. I think it's important for React to support people who want to drive the algorithm from the outside like Om. It's unlikely that React can ever compete with Om since in the Om model we already always know precisely what data changed and already know exactly what should or should not be re-rendered. Because of JS semantics this likely will never be true in the general case for regular React users.
is `onlyChild` documented somewhere?
oh thanks, it has been renamed to `React.Children.only` I guess
@petehunt Ah right, right, forgot that it's how it's "supposed" to be used.
I have a convoluted solution if anyone else ever wants to hack something together.
custom: {
Depends on #741.
The only "weird" thing that I can see here is that `<div>x{flag && <a />}</div>` will toggle between rendering to `<div>x</div>` and `<div><span>x</span><a /></div>`.
Chrome
@spicyj thank you for your feedback and let me know what you think.
@zpao `typeof null === 'object'` (however stupid that is)
@vjeux Not saying it's right, but there's a merit to being explicit as well, if you define a function, you return a value (be it `null`). Could be used to catch mistakes. Just saying. :)
@brainkim Is this actually useful for anything besides `cursor: grab`? I don't know of any other CSS property that has vendor prefixes inside of them. If that's the case, then this specific issue could be solved by just defining a custom CSS class and use that instead.
On Dec 27, 2013 4:27 AM, "syranide" notifications@github.com wrote:
Yeah the `px` addition is funny. It's been pretty handy though.
use this other style
@fabiomcosta I think that invariant exists because React will actually merge style objects when using `this.transferPropsTo`. In other words if you have a component like:
@syranide i need this pull request. pls. my children will starve without it.
KK. Happy new year!
``` diff
warnHyphenatedStyleName(styleName);
+          serialized += dangerousStyleValue(styleName, styleValues[i]) + ';';
warnHyphenatedStyleName(styleName);
+        var styleValue = dangerousStyleValue(styleName, styleValues[i]);
Anyway, anyone trying to inline-style a gradient or something similar, here's a **very hacky** workaround that works (without you needing to check for available features as syranide suggested)
style = testEl.style;
#popitopen
Has history vindicated me yet? :stuck_out_tongue:
Probably yungsters or whoever wrote fb6381fb35c8af868b5134c3d7a91699a7d01090 (I can't remember who).
raw     gz Compared to last run
raw     gz Compared to last run
http://jsperf.com/aefsefsefsf/3
According to this http://jsperf.com/aefsefsefsf/5 there doesn't seem to be a good reason to use any pre-escaping tests, the _only_ reason would be because of the √¨ndexOf` one is about 15% faster in IE8 (which is slow), but it would be at the cost of be slightly slower in some other browsers (and larger filesize). But I still think caching the key on the component is a better approach if that is necessary.
@sebmarkbage
As for the perf, oh wow, that was new to me. That explains that "weird coding style".
@sebmarkbage
escape ops A  /  B        |     |
@sebmarkbage Cache the unescaped and escaped key on the component, if unescaped doesn't correspond to the current key we recompute the escaped key. Should be as fast as it can get. But I don't see how you can see bad perf numbers from this, unless it's being used _way_ often, I mean, the previous perf tests (unless something's wrong there) indicate around 5 million calls per second. Unless it's IE8 that is the issue.
@spicyj That seems dangerous as collisions are relatively _likely_.
@petehunt Still learning, will keep that in mind! :)
I would consider this a bug and speaking hastily to petehunt, he seemed to agree:
@vjeux Ah, was using `master` and found it not to be working. Not to be anal, but the big warning only says that `getDOMNode` can be used instead, not that it will be deprecated.
@spicyj Wow, super-fancy and super-useful, I assumed it would be overriden. Fixed :)
@petehunt
raw     gz Compared to last run
Interesting thought, to be able to use autoFocus on any element (for when they have tabIndex), limited usefulness, but it's surprising why it isn't in the standard nonetheless.
@petehunt Will do.
Did you forget to save your jsfiddle?
The error is:
@spicyj Great!
So in my opinion, something is clearly wrong here, adding a conditionals should never require you to be working with arrays and rewriting inline text to use JavaScript string literals instead, or in general require you to massacre your code.
## Multiple tags
## Conditionals
While it may not be a big deal, it's weird that the syntax for an if-statement `<tag>{cond ? true : false }</tag>` is different from a nested if `<tag>{cond ? (cond ? true : false) : false}</tag>` (braces replaced with parenthesis, because we're already in an expression) and it's back to braces if it's inside a tag `<tag>{cond ? <tag>{cond ? true : false}</tag> : false}</tag>`.
## New conditional syntax
`zpao` made me a believer, `<frag>` is the way to go. It solves everything beautifully, it just needs to be implemented somehow.
I'm currently not a huge fan of the JSX conditionals, but I suspect I need to think about them differently, I've experimented with separating it out into separate methods and it seems to work good (and seems to make sense).
@epeli I'm only relaying _my interpretation_ of it now, but the answer is yes and no. They have considered it (adding dedicated syntax for conditionals) but feel that it is the wrong solution and do not intend to go that route. I'm still finding my way around but I'm half-way inclined to agree with them, what you are suggesting is an intuitive go-to solution, it's kind of flawed it seems.
That being said, just to make it clear, conditionals are currently possible in React in the form of:
frag would be absolutely awesome to have...
If anyone is annoyed by this as I was and uses babel, I wrote a plugin to implement (in part) the `<frag>` syntax mentioned above.
I just published a really simple function that can be used to compose conditional render blocks. https://github.com/ajwhite/render-if
It's a little more syntax, but it solves the issue at hand.
IMO, if you're returning multiple tags, or complex conditionals like this:
raw     gz Compared to master @ 09bdcefd4f246eb49b82aa5bfece8d40cb8a2fca
note that this is using browserify, which may have something to do with it. If its not immediately apparent what's wrong I can open a separate issue.
heh; turns out I was requiring `react` in one place and `react-tools` in another; sorry for noise.
@zpao thanks for the info!
@zpao Correct :)
http://jsfiddle.net/HADj3/
``` diff
If you are going to update AUTHORS, please use the name "Jun Wu", which is first name + last name. Sorry for the confusion.
http://jsfiddle.net/qbAv6/
Maybe related to #1301 also?
Also this doesn't make sense to me. When two functions are combined using DEFINE_MANY the return value is ignored.
I love that there are "invariant"s everywhere, but sometimes the errors they report aren't immediately understandable. For example, if a mixin defines a default prop that's also defined in your component, you get the lovely error:
It took me a while to figure out the cause. [jsfiddle](http://jsfiddle.net/kb3gN/592/)
<the node w/ onClick=undefined>
So @chenglou are you saying that you can only pass an array if each element has a `key` property?
OK, so just clarifying, what @chenglou said was incorrect then? It's not legit at all.
For both the array issue and displayName it's better to have a wrapper around React like [Hyper](https://github.com/xixixao/hyper) (I didn't get around to polish it but hopefully will at some point).
cc @vjeux @swannodette
What should it even mean to include a `<script>` tag? If you change the contents, does it get rerun? This seems fairly react-page-specific.
@vjeux @zpao
Just ran into this. IMO, it's very surprising behavior that adding a `<script>` to your virtual dom doesn't result in the script's evaluation (as `appendChild` would, for example). I created [this fiddle](http://jsfiddle.net/matthewwithanm/7Xp9c/) to demonstrate the issue but, based on this thread, it seems like this is expected/desired?
@syranide I guess I was just spoiled by jQuery and never realized that. I've already implemented this same behaviour myself, and it's for a layer that should be converted to actual React components anyway, so the workaround should disappear from our code at some point. It's not a big deal, just surprised me, but I guess it's just a lack of knowledge on my part.
@petehunt could you explain more?
Or "Using State to Store Denormalized Data is an Anti-Pattern" ?
- settings state from an ajax call
- "Using State to Store Denormalized Data is an Anti-Pattern"
- "Denormalizing Data from Props into State is an Anti-Pattern"
@chenglou how does that look?
@petehunt @jordwalke
@zpao I'm actually a facebook employee currently in Bootcamp. Let me know if I should still sign as an individual.
http://jsfiddle.net/SdYwL/
@quark-zju @spicyj This should be closed now that https://github.com/facebook/react/issues/714 has shipped (but not yet been released).
@syranide Thanks for the information!
(probably you want div?)
cc @yungsters (by the way, it looks like `getDocumentScrollElement` can be implemented by checking `document.documentElement.clientWidth > 0`. but do you need `getDocumentScrollElement` at all in FB code? it should return `document.body` only in quirks mode.)
Perhaps yungsters or you could do a blame on getUnboundedScrollPosition.js internally.
@Cartas oh, hah!  Well in any case there's been a lot of work on fixing issues with `ReactCSSTransitionGroup` as it's now named, but it seems like not many people have found the need to use the underlying `ReactTransitionGroup`, so there hasn't been much focus on issues there.
This reverts 12e765dd and adds a necessary clone and a new test.
Can you send to paulshen and petehunt?
Depends on #636
Pull away!
+1 for es6 transforms w/o flag but undocumented for some time
I just tried this briefly. With `webdriver-jasmine:saucelabs_ios5` things work ok if `ReactWebWorker-test` is the only one enabled. If all tests are enabled, webworker spawn is deferred for some reason until other tests, including reporting, are run, and it confuses the test runner.
With `webdriver-jasmine:saucelabs_ios6_1` I see some POSTs to `https://albert.apple.com/WebObjects/ALUnbrick.woa/wa/deviceActivation?device=MacOS` from time to time, I don't know if they affect something when simulator/webdriver is used. The test runner gets somehow stuck and doesn't poll for `postDataToURL.running <= 0`, but doesn't error with timeout either.
With `webdriver-jasmine:saucelabs_ios5` it fails on both DEV and PROD.
That file has quite many `if (window.callPhantom) { return; }` lines, which always return success locally, instead of skipping them, so it may have invalid test cases?
http://www.quirksmode.org/dom/events/tests/scroll.html
@zpao do you think that we should do a `console.warn` everytime someone uses onScroll on any browser or would that be annoying? I would say it would be annoying but it would also be very frustrating to figure that it's a React limitation after some hours of debugging on IE8 (ugh!)
This would have to change to
My initial reaction is that `stateTransition` is too much line noise. Now whenever we want to do
Feels painful to me.
I think it might depend on how you do state management, but to me, the props of the children of my component have nothing to do with my state, other than being affected by it. I have a state, which defines what my app should look like (combined with the props), and I add handlers to my components which change the state. Therefore, whenever I reason about the state of the object, I can only consider the state and the props of that component. The result of render is in a sense merely a side-effect.
@syranide Thanks a lot. I wasn't aware that existed - it solves the issue for the time being. :+1:
@syranide `cloneWithProps` sounds good.
// Enhancers
- Blockers:
One way to handle non-method properties of classes (`mixins`, `propTypes`, etc.) would be to use the speculative annotations that Angular is planning to use: https://docs.google.com/a/venmo.com/document/d/1uhs-a41dp2z0NLs-QiXYY-rqLGhgjmTf4iwBad2myzY/edit#heading=h.ambwele793xv
@WithMixins(MyMixin)
> special proprietary handling of overridden methods like componentWillMount, componentWillReceiveProps - there aren't classical OO equivalents.
// Additional implementation
Super is a code-smell anywhere, but it's particularly abhorrent in reactive programming.
@gaearon Thanks. I was wondering that these stateless functions(components) looks simply like functions so how come React treats them as components!! And also, am I correct in saying that these stateless functions don't have life cycle methods like DidComponentMount, etc as they don't extend 'React.Component'. Because presence/absence of state can't be the only difference between usual components and stateless function components.
@gaearon Thanks. Now I know that jsx files having simple functions are taken as components by React.
@zpao ace! I probably didn't as I just quickly put things in a page and couldn't wait to play around with it.
raw     gz Sizes
135467  27432 build/jasmine.js
raw     gz Compared to master @ 564c8669f8ef511b9fc59e7006af5c8db30e4585
=      = build/jasmine.js
I submitted the jasmine-jsreporter change as a pull request here:
https://github.com/detro/jasmine-jsreporter/pull/2
cc @ide
Maybe a new "Special Attributes" or "Special Props" section of the reference is in order that talks about children, dangerouslySetInnerHTML, key, and ref.
@zpao do you need the docs soon? Exams over next week only.
As an added bonus, the jasmine web interface now groups tests by file.
@benjamn
Is this still "undocumented on purpose"?
I would like to bump this, maybe it's undocumented on purpose, but people are using still using it, and it can be quite painful. Especially when you are trying to upgrade react and aren't sure if contexts as a feature changed or if your libraries are breaking for other reasons.
PLEASE DON'T. It will ruin lives. I'm building my SaaS in Meteor, and there's no clean/simple way to include a Flux-like architecture in Meteor at the moment.
A bit beyond my comprehension, I'm afraid, as I'm somewhat new to React.
Going forward with 0.14 and beyond, I think it would be cool for React to have some sort of built-in easy way for components that are quite far apart (child and great-great-great-grandparent) to communicate‚Äîwhether context is polished up, or something else replaces it.
@ffxsam
@syranide  do you have some refs I could take a look at for better ways to handle this problem? Recently implemented a custom select component, and this was the only solution I came up with for opening and closing a dropdown.
@creativityhurts The below pseudo-code is how to do it. The general idea is that if the user clicks anywhere on the page the dropdown will close EXCEPT if they click anywhere within the dropdown.
// mixins/onclickoutside.js
Embrace layers.
(Note that Flux makes it super easy to trigger actions that affect something on top.)
What @yiminghe said it's a good idea, IMHO. I didn't think this way, but your mixin @Pomax saved lives.
For anyone interested I'm using a different approach with `signals` where in my case if you click outside of a component is because you're interacting with another.
How about circumventing React all together?
mixins: {
>   mixins: {
@spicyj
var defaults = {banana: 17};
@spicyj Sorry I meant that as an api user one could assume that keys are just to help react in reusing component instances and if one supplies invalid keys then one could assume that then they are just no help and slower way proceeds. So I support your cause :)
grunt-contrib-jasmine takes a --filter param - Not sure if that is what you guys are using?
I have written a library called jasmine-react which I use to test react components:  https://github.com/tommyh/jasmine-react.
Dupe of #416.
Why isn't this right?
Additionally for dragging:
@spicyj Certainly! But there are lots of weird things that we can't fix... like not being able to read the value of `type="number"` if it isn't strictly numeric, etc.
Done! @vjeux
@zpao Mmkay, now a # appears on hover and looks like this:
![image](http://themetapicture.com/media/funny-gif-Pusheen-baking-fast-cooking.gif)
@benjamn In what situation would you want to clean but not remove `.module-cache`?
var foo;
<TransitionGroup transitionName='baz'>
@zpao yea - i'll give it a shot :)
@petehunt :(
@zpao it requires a bit more ‚Äî for example it should take special care of `<link>` elements not to move them around if the new ones are same as the previous because that would trigger a new HTTP request for stylesheets, for example.
Perhaps related to #633
</ReactTransitionGroup>
In fact I am not sure to follow you, why should the transitiongroup care about what happen in this hooks?
@vjeux
WheelDelta was not properly reported in IE8 because of this misspelling.
@vjeux So I researched the root of this issue, and here are my tragic findings FYI:
However, the following values are _reported_ as delta:
LINE: deltaMode = PIXELS
SCREEN: deltaMode = PIXELS
LINE: deltaMode = PIXELS
@spicyj Hmm, but if they do emulate mouse wheel events, I would assume they use the old "line by line" stepping? (Eh, perhaps it doesn't matter, if following the advice below)
ping @zpao
@zpao No worries (was away on a trip anyway)
@chenglou @spicyj thanks for the update!
_It‚Äôs the future!_
Actually, PointerEvents and PointerGestures polyfills were deprecated recently in favor of https://github.com/Polymer/polymer-gestures https://groups.google.com/forum/#!topic/polymer-dev/ba4aDyOozm8 I believe the problem is shadow DOM which I am not using anyway.
@syranide how would you imagine the react emulation mode rectify itself with the browser emulated events? (E.g. the iOS touch event cascade: http://www.quirksmode.org/blog/archives/2014/02/the_ios_event_c.html)
The code is here:
JSXTransformer currently produces suboptimal code when _fixed strings_ are inserted with braces, `{'Abc'}` or `{"Abc"}`, as is required if you want to override the JSX whitespace collapsing.
abc{'\n'}def
def{" \t"}ghi
ghi{Var}jkl
jkl{' '+Var}mno
'def'," \t",'ghi '+
'ghi',Var,'jkl '+
'def'+" \t"+'ghi '+
'ghi',Var,'jkl '+
@jeffmo Gooooood neeeeeews everyone!
``` diff
@petehunt
While they seem reasonable to some extent, they are quite nonsensical from a theoretical perspective.
### Newline rules
This may seem kind of interesting at first, even though it's a bit weird. However this is, in its basic form, the root cause of all the excess whitespace that is creeping in at the start and end of every text with the current rules. In my opinion, the only way this rule makes sense (without being a burden) is if it _does not match_ after an opening tag or before a closing tag... simply put, it would only add a space when text is sibling to a node (or a brace). Which would make it quite magic, which isn't necessarily bad, but my gut feeling says it is. Being explicit in ambiguous cases is preferable to it sometimes making the wrong decision (especially when it comes to tests), and the rules would be very complex to explain.
### Contenders
@jeffmo
`[22:29] lbljeffmo: syranide: ok I'm a clown -- I was accidentally using the old transformer when I though I was using yours`
@jeffmo Sounds great!
Two numbers were passed to props, but with exception raised `Uncaught Error: Parse Error: Line 10: XJS value should be either an expression or a quoted XJS text`.
Ok good to know. It might be some Chromium issue or something, here's what I see with the first jsfiddle link by experimenting with different kinds of clicking patterns (very fast and very slow):
That fiddle is so extreme, so I'm not so worried about it, but I'm thinking of using React on very long lived pages (several hours), with a large number of realtime updates, so let's see! Closing.
Rule 2, variation B: `A \n B` ‚Üí `A B`
<h1>foo</h1>,
thanks @spicyj it's just a tiny detail, having an option would be great though!
Yeah, also a little weird how `<HelloMessage name="John" />` turns into `HelloMessage( {name:"John"} )` with the spaces.
any progress on the original issue with the single/double quotes?
the mix of both types of quotes is making my linter complain.
I would also love if there was a way to have consistent quoting in the transformer  (preferably double quotes in my case), I'm running into the same issues as @pkyeck .
(Thanks @marclar for reporting on IRC.)
Could you make a fiddle using http://jsfiddle.net/spicyj/BrU6B/ as a starting point? Thanks.
http://jsfiddle.net/BrU6B/1/
http://jsfiddle.net/vjeux/25Rhk/ and http://jsfiddle.net/zpao/uaKdV/ are both older versions.
Thanks @spicyj for your quick update on this
- `grunt test` and `grunt lint` both pass
- I have filled out the CLA under `tommyh`
[20:33] irc tommyh: ok, i'm reading more of the source, so I'd like to rephrase my question - does anyone know the reason ReactCompositeComponentInterface.propTypes = SpecPolicy.DEFINE_ONCE. I get why render/shouldComponentUpdate/getInitialState are DEFINE_ONCE, but I don't understand why propTypes/getDefaultProps are. (not saying there isn't a reason, just that it's not instantly obvious to me)
var MyMixin = {
mixins: [MyMixin],
For reference: I also tried the following, but I'm not surprised this failed because `this` is `undefined` in this context:
mixins: [MyMixin],
window.MyMixin = {
_Silly_ example:
+1 @zpao.
<div style.backgroundColor="black" style.width={10} />
div({style:{backgroundColor:'black', width: 10}});
All my DOM code is written in jade. Any easy way to use jade in react?
For the record: React with coffeescript and jade (or haml) like syntax would be heaven. You guys don't know what you're missing.
@Charuru I worked on a project that lets you hook into the jade compiler and modify the way everything works. I had written a plugin previously that compiled it to rivets data bindings so theoretically you could do the same for React https://github.com/wearefractal/jaded
Rivets plugin:
``` jade
ul
@duncanbeevers `+` doesn't seem quite right though.
@Charuru I'm working on a Reactive version of Jade, I will write here again once is ready :smiley_cat:
Maybe https://github.com/concordusapps/grunt-haml can help:
Somebody please solve this - I need Coffee and Jade .....
meteor + coffeescript + react + jade
Haven't tried it yet, but [this](https://github.com/weareoffsider/react-jade-transformer) could be of interest.
@zpao open issue, please
Externs are for the case when you're compiling library for external consumer, but when you're compiling it together with application you want to live without them. Plus they didn't work for me when I compiled them together, haha. :)
Well yeah, it's called 'externs', I guess it could be used, I'm just not sure if that is a good solution to a problem.
It's not only about size for me, but also a bit about convenience...
Oh damn it's hard to research what's failing. Somehow `.createClass` (which is renamed to something like `.ra`) is not assigned to `React` (which was renamed to `mg`, but who cares)...
Ah no, that was only my mistake in demonstration, please open http://piranha.github.io/pump/ and try sending anything, it gives an error which is hard to understand.
@benjamn  might be able to help here.
@piranha: Do you suspect the issue is that clojurescript itself is not clojure advanced mode compatible?
Again thanks Paul and  Spicyj for you help.
Mavericks comes with 2.0.0p247 now.
http://jsfiddle.net/paulshen/S773F/
Or is there a reason you don't want states to be arrays?
@spicyj I think it happens if there happens to be mixed unix/windows. Although I haven't seen it myself in a long time (not that I've been really looking), but I would be surprised if it has been accidentally fixed.
works in mingw.
Check out this fiddle, http://jsfiddle.net/JUbe3/1/
Line 70 is the real puzzler
- Complicated example: A rendered and re-rendered list of components. When a list/app's state changes say perhaps to select one component and mark it as highlighted: Are all the components re-rendered? If not, what is the criteria for re-rendering? And regardless, if those components render to a identical MockDOM as before but one class has been added, how does that affect the real DOM, ie what are the minimal set of DOM changes that will be applied?
@petehunt , @zpao
@rulatir @gaearon `refs={c => this._node = c}` is free of any such restrictions and the reason you can't do what you want is because old-style refs has to be owned by the creator (by necessity), but that obviously only works if React can figure out which instance is the creator, which it only can in some specific instances, hence the new refs api.
I also failed to find that page and came here after a lot of head-scratching. I too expected to find how to deal with `style` on the JSX Gotchas page (even though I now understand it's not technically a JSX issue). Perhaps on the JSX Gotchas page a specific mention of the `style` attribute and a link to DOM Differences would do it, as I think it's one of the first WTF moments people are likely to have with JSX, certainly was for me.
@yungsters Any progress on this?
``` diff
@vjeux I'm not able to reproduce that particular behavior given this small repro case. The original code had several more layers... will keep trying.
does not seem to work reproducibly, whereas
thx @adewes you saved my day :-)
Took me a while to repro, but here you go: http://jsfiddle.net/LeZuse/uoff476z/2/ (ugly, but demonstrates the issue well)
Thanks @adewes that was giving me fits!
well, that's more like a control shot :-)
https://groups.google.com/d/msg/reactjs/UzSiXw2Vo5s/FxK7AHWOzLMJ
- attr={true} is now translated to attr="true" (bools)
I think this change is a little weird as you may want to bind a handler conditionally on some flag, so it's nice if null, etc. act as no handler:
@zpao Yes -- sorry I misse dthat.
@spicyj & @andreypopp -- there are several ways to rectify that.
1. Or you could generate a `noop` method:
1. Or, if depending on how you're delegating events you could handle the noop case in your event handler:
@petehunt checking for truthiness first would go along way, but it would be really nice at run-time if a handler was bound to an event and it didn't exist to provide an appropriate error to the user.
`Uncaught Error: Parse Error: Line 10: Unexpected token :`
Happy to write a short sentence or two on behalf of KA if we want to go that route.
white-space: nowrap;
phantom.exit()
TypeError: 'undefined' is not a function (evaluating 'RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/)')
After switching to custom binding function it appears to be working in phantomjs and poltergeist. All tests are passing. I don't think there is any reason for regression testing here.
"phantomjs": ">= 1.9.0",
@zpao I wasn't concerned so much with the browsers that don't support as much as I can't seem to get any functional tests to pass that depend on React.
I'll see if maybe es5-shim/sham help with that thought.
@chenglou thanks for the explanation.
http://jsfiddle.net/aJM2S/3/
grunt test
‚îú‚îÄ‚îÄ chokidar@0.8.1
mmoner@0.9.1)
Just to be on the safe side, you guys having issues, make doubly sure that your git is not set to the wrong line-endings. My settings got messed up once and used `\r\n` instead of `\n` which basically broke everything in extremely weird ways, including errors like above.
@petehunt thanks
Really like the idea of a cookbook the way Ember implemented it. I have experience with Jekyll and can pitch in with setting up a cookbook section.
Awesome. There's some React.js questions on Stack Overflow that might make for some good cookbook recipes. http://stackoverflow.com/search?q=react.js
Uncaught Error: Invariant Violation: findComponentRoot(..., .r[3skhu]): Unable to find element. This probably means the DOM was unexpectedly mutated (e.g. by the browser).
[JSFiddle here](http://jsfiddle.net/B4u3j/)
Throws:
TypeError: 'undefined' is not a function (evaluating 'RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/)')
I appreciate it, @zpao
strings: leave alone
booleans, null, undefined: empty value
other objects: throw an error
> **zpao:** well, objects are errors except when they have special meaning
> **balpert:** right
> **balpert:** yes
> **balpert:** so children can be more lenient and allow objects?
> **balpert:** but objects for attributes seem bad
> **zpao:** when if you accidentally assigned a bool to a variable and you just don't see if anything, it's harder to track down
> **zpao:** my example was a "computed" property like full name, though i don't know how realistic that is
> **zpao:** err, i guess i didn't actually write that down... that must have been in my lost draft
> **balpert:** you said:
> **balpert:** but didn't elaborate
> **balpert:** oh I see
> **balpert:** yes
> **balpert:** sounds like something that wouldn't work in IE :)
> **zpao:** me neither...
> **zpao:** i said admittedly poor :P
> **balpert:** and say not to do flag && ...
> **zpao:** that's what i'm saying
> **balpert:** I see
> **zpao:** oh you mean for children too
> **zpao:** ?
> **balpert:** hmm
How fixable this is depends on the standard behaviour (and I have no idea where to find it). If the standard isn't too bad we can patch it by triggering `onMouseUp` instead.
@yungsters
@zpao updated, with a test
Apologies for adding noise, I'm still getting used to GitHub's issue
<SomeComponent onMyWeirdEvent={handler} />
@nelix do events only propagate but not bubble in your proposal?
console.log('awoiejf');
This is basically an abuse of the decorator pattern
fwiw, I created an abuse of this pattern as an example: https://github.com/blainekasten/react-global-event-decorator/tree/master
Though maybe `addEventListener` and `removeEventListener` names are to verbose...
// somewhere else:
</TripleClickWrapper>
exports.FormMixin =
@yungsters
From IRC last night it sounds like we want to turn booleans and all other non-string/number things into ''. Not sure off the top of my head how this compares to what is currently being done in DOMPropertyOperations in general or for `children` in ReactNativeComponent‚Ä¶
TypeError: 'undefined' is not a function (evaluating 'RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.-]*$/)')
React is amazing, thank you all :-)
I can jump on this. I'm familiar with yuidoc.
@chenglou @agirton any chance you can point me to your docsets? Not fully working is fine.
Thanks @chenglou !
Well for me main concern was discoverability of those special cases. Right now compiler just silently eats 'for' and says nothing at all. And while this is more or less acceptable for other properties, React declares that it passes all HTML attributes. This note about `className` and `htmlFor` is not exactly easy to discover, so I think having warnings for them is very important for first-time users.
@chenglou well, it is fine. Though I think, I have no voice on this issue cause I use CoffeeScript and it compiles `obj.class` to `obj["class"]`. :-)
cc @petehunt
I generally rarely pass `setState` as a callback, except when i use React with RxJS, here you can see the use case : https://github.com/fdecampredon/react-rxjs-todomvc/blob/better-rxjs-syntax/src/views/todoItem.jsx#L43.
I just want to :+1: @zpao. What I think:
var TimeAgo = React.createClass({
Oops! I saw colSpan and naively assumed that rowSpan would be there too‚Ä¶ :)
Hey Jordaan, thanks, we resolved this one. The issue was that I was setting my initial state to a prop, but then never subsequently updating that initial state. Thanks for the help!
cc @zpao
cc @yungsters
@yungsters okay, added back the multiple handling, added tests for it, and inlined getValue. Let me know if there's anything else.
http://jsfiddle.net/spicyj/AbT9C/
[jsFiddle](http://jsfiddle.net/chenglou/4TpnG/1/)
Similarly, [here](http://jsfiddle.net/chenglou/4TpnG/)'s a modified version that works on every subsequent click on B, but not the first time. If this helps, setting a timeout 0 around `this.refs.A.getDOMNode().checked = true` works (except it gives a flash when you click on B, which is less than ideal)
/ht @zpao
http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html
We don't need it any more, thanks to @yungsters's 4deb0d61. Before that we weren't getting click events regardless of whether touch events were initialized, which was (as far as I know) the only thing to be worried about with this change.
@zpao rebased.
But @spicyj, concerning #227, I don't agree with adding `enterAnimation` and `exitAnimation`. This special-cases those two situations a bit too much, and lots of unique dynamic situations in-between would need formal attributes too, which really limits the framework and the coder's creativity.
One thing I'm worried about is the parent/siblings' expectation of what should/should not happen during/after the animation, but I'm sure it can be worked out.
In the future when we have x:frag it'll be Even Better‚Ñ¢.
Is this actually possible? I've been messing around with it, but can only seem to get it to work with an array of children.
// Obviously broken.
Old one had some bugs:
(could you give me example on jsbin?)
http://jsfiddle.net/kb3gN/102/
I hope it's not as RTFM case :)
Thanks for the mention @vjeux! By the way, it's `noResultsText`, typo was in the old version from me.
1. Open http://jsfiddle.net/hrach/f2gna/
4. See increasing number of errors:
[13:52:51.759] TypeError: setting a property that has only a getter @ http://dragon.ak.fbcdn.net/hphotos-ak-ash3/851559_337624843031740_50442_n.js:6713
raw     gz Compared to master @ 06e5fcc010d8b24c04ef14d31eae446aeab11189
=      = build/jasmine.js
Danger was refactored, don't think this is useful any more.
I'll throw in my two cents here. I think camelCase is the way to go.
http://www.polymer-project.org/platform/pointer-events.html needs nonstandard touch-action attribute to work.
JSFiddle: http://jsfiddle.net/VLmQt/
@zpao @jeffmo  how soon? ;)
@syranide Still broken for me, but looks like your #480 PR fixes it.
Sorry, I was my fault. Add booleans, I didn't know that, thank you.
@zpao check here:
Here's the error message for unminified:
Just to clarify @tomocchino, I brought this habit over from Backbone and other libraries. I'm also in the same camp as you, and accepting this format was a mere idea. I'd much prefer a simple error message in the line of `you need to pass an object for‚Ä¶`, and then get over with this once and for all.
@chenglou thanks!
What's wrong?  Is it because of the failing build?
and viola.
Running "phantom:run" (phantom) task
http://localhost:8080/jasmine.js:3884
Not sure if it's bug or feature.
There's two separate issues here: allowing people to easily produce components corresponding to nonstandard tags, and making it so that `jsx` knows about such things for a given project/codebase.
React.registerCustomAttributePrefix('ng-');
@syranide That's definitely an option to consider, imo (for whatever its worth :P ). It would certainly contribute to making this much less ambiguous or esoteric for new users.
@syranide, now, that being said, are you referring to using `attrs-` for standard properties? Or for React JS properties?
@syranide thanks for the trick.
isCustomAttribute: function(attributeName) {
Since `transferPropsTo` is deprecated, would this still be an issue?
I was trying to use masks like so:
isCustomAttribute: RegExp.prototype.test.bind(/^(data|aria|lazo)-[a-z_][a-z\d_.\-]*$/),
'some-other-prop': null
Awesome, removing the whitelist will fix my use case perfectly. Very interested to see what SVG wizardry you're cooking up @tehnomaag & @dandelany, I hadn't considered using React for SVG but it could be pretty cool!
@ljharb You could use the the `is` attribute to force react to ignore the whitelist. The `is` attribute ignoring is also new in master. I think thats a really hacky way to use the `is` attribute but It would work. Just remember that if you put a class on the element with the `is` attribute you have to use `class` not `className`.
@sebmarkbage
Yeah, for that use case. Though data attributes also sound wrong. This would be easier if `<img>` had something like `rel` so `rel="nopin"` would be viable.
Here is jsfiddle example:
https://jsfiddle.net/kbcpLyax/3/
@IL55 i'd open a separate ticket for it
@Deepblue129 you can do `ref.getDomNode().setAttribute(...`  in component lifecycle method.
@syranide thanks for the tip!
@spicyj @sebmarkbage @syranide
@customAttributes('color', 'size')
Props on making react, its awesome! Pun intended :)
Awesome thanks @gaeron !
Sorry to stray off topic everyone..
@fritx https://github.com/facebook/react/issues/140#issuecomment-62527758
isCustomAttribute: (attributeName) => {
return attributeName === 'amp';
1. the description of es5-sham on https://github.com/kriskowal/es5-shim doesn't instill confidence in its correctness
I think this is fixed now, right @zpao @yungsters?
22:58 <@zpao> lbljeffmo: that's in your court :)
22:58 <@lbljeffmo> balpert: because that's hard :)
22:58 <@lbljeffmo> We'd basically need to eval strings
23:01 <@lbljeffmo> what would it interpolate to?
23:02 <@lbljeffmo> I'm hesitant because it changes the semantics of a string (but I'm still processing‚Ä¶)
23:02  * zpao isn't sure this is really quite a path we want to go down but it interesting to think about
23:03 <@lbljeffmo> also, string literals would act differently from refs to string lits
23:03 < balpert> lbljeffmo: what do you mean?
23:05 <@lbljeffmo> seems unclear to a noob though who hasn't thought about the depths of the transform though
23:08 <@lbljeffmo> ya maybe not
23:14 <@lbljeffmo> see also: http://wiki.ecmascript.org/doku.php?id=harmony:quasis
@zpao Done! :)
Please fix this!
@nambrot if you're looking for a quick fix, what I ended up doing is creating a Utility function which wraps `React.createClass` and creates a separate version of the state that will always be up-to-date:
I ran into the same problem as @azoerb
+1, the same problem, as @azoerb
@briandipalma Can you explore this?
@briandipalma Good then we agree! Just wanted to be explicit. :+1:
Again - I'm new to React. Please clarify if I've got something wrong.
If mutable state really is anti-pattern, then I'm all ears - but I'm also concerned by the invasiveness of the requirement.
alice_bank_account += 10;
@syranide, that doesn't solve @azoerb's example, which is 99% of the problem.
I would love to know if there is a better solution.
@spicyj, arguably it doesn't make a lot of practical difference, but it's harder to reason about and it separates the async call from the handler that caused it, which can hinder debugging. If there's no reason to complicate things by separating them with an extra turn, why are we doing it?
Would definitely be something I am interested in as I definitely prefer the JSX syntax - much easier to visualize in code.
@jordwalke, sorry for my so-late reply, the JSHint plugin we use doesn't have too many options, other than setting a non-standard location for your .jshintrc file, and choosing which version of the main jshint repository you want to run.
Floating-point numbers such as 0.1 and 0.2 can't be represented exactly in binary, so an approximation is used. It's as if you (in base 10) added 0.333 + 0.333 + 0.333 and got 0.999 instead of 1 -- just an artifact of the rounding that happens. Here's a Stack Overflow question explaining this phenomenon: http://stackoverflow.com/q/588004/49485
@petehunt @yungsters @jordwalke Took another pass at it ‚Äì I like this version a lot better. For now, I'm only batching things together when they're in a block like this:
Would the noise be so bad if it didn't have to be _first_ (or specially structured)?
React also does badly in this case with things like text nodes inside `<table>` elements (outside of a cell). It ends up throwing the error:
which is confusing and doesn't help anyone. This happens because in `dangerouslyReplaceNodeWithMarkup`, setting innerHTML to `<table>oops!</table>` gives two child nodes: `oops!` and `<table></table>`.
Demo: http://jsfiddle.net/spicyj/ENxaB/
I think this could get into dangerous territory quickly, though @petehunt. Pretty soon we'll want full-on child validation (like we have in XHP).
React also gets confused by `<tbody>`. :(
There's still some weirdness because the original `<tr>`s are inside a `<tbody>` and the rest are directly in the `<table>`, but the order is correct.
_button onClick: @translate, 'Traslate'
fruit: {border: '1px solid black'}
And initialize the style at the beginning by changing the key to something unique, say `fruit-abrt2` (same for the rendered class name). Of course, then there's the concern that a css rule might not reach `fruit` anymore since the class name doesn't actually exists, but I see such a huge benefit here that I believe it's worth thinking over this and find a solution.
@phunt says we shouldn't make the synchronous operation guarantee and @jordow  agrees.
Sure, feel free. All this new forms stuff sounds really cool.
http://jsfiddle.net/spicyj/udaq9/
- backspacing,
Questions:
23:08 < jwalke> I like it.
23:08 < jwalke> Make an issue!
Thanks, I was wondering about the empty-block warnings when I ran grunt lint.
Maybe add lint to the Travis build?
helloworld.js
["helloworld"]
<edit helloworld.js, save edit>
akrieger@vb:~/www$
bin/jsx js/helloworld.js does the right thing.
@jeffreylin, I can't wait.
Ugly, but I use the following until a fix:
Here's an intentionally horrible example along with the code it currently produces with my patch, note that now `"S \n S" => "S S"`.
<span alt="color: #000000" x={123 + 1}></span>w{'awd2'}  {'awd3'}
{'awd7'}
{'awd6'}
z    {'awd4'}
{'awd5'}
"o "+
'awd7',
'awd6',
React.DOM.span( {alt:"color: #000000", x:123 + 1}),"w",'awd2',  'awd3',
" o "+
'awd7',
'awd6',
Another way to support at least CoffeeScript could be to make the component constructor a little more lenient. I've been playing a little with this, and my favorite syntax so far is something like this:
- Allow more than one child.
And, since CoffeeScript is a bit weird, combine multiple "props" objects into one. (CoffeeScript turns that last line into:
@petehunt I'm not that fond of coffeekup (eval evilness, and whatnot).
``` coffeescript
while isProps children[0]
compFn props, children
else
compFn props
IMHO, DSL based on CoffeeScript can easily become a mess because of the mixture of optional parenthesis/braces and significant whitespace. For instance, if you forget a trailing comma and instead of
@vjeux  It would be really nice to treat CoffeeScript as a first-class citizen and have CSX in addition to JSX :smiley:. We might even be able to get rid of `react.createClass` and use `class MyComponent extends react.BaseComponent`. Am I being too unreasonable? :smile:
@vjeux cool. Will try to put something together. Off topic, but are you guys attending any meetup to get more traction?
@chenglou Just to add another datapoint:
``` coffeescript
I actually like the 'look' of JSX in Coffeescript better than in JS, since the escaping clearly demarks what is JSX and what is not.
I also modified the two examples that use onKeyUp (markdown, ballmer-peak) to use onInput but am happy to revert that commit if for some reason you prefer to keep using onKeyUp.
@petehunt sure thing
http://jsfiddle.net/vjeux/25Rhk/ Here's how the new base fiddle
Of course, there are different coding styles and guidelines. Most developers probably don't like multiple variables being declared with one `var` statement, but nevertheless, it should be possible.
@benjamn You are rigth ... a got a Typo error ... now fixing
must added the following comments ?why?no another way?!
@mz121star as I understood, there can be only single comment (pragma?) at the top of a file.
@zpao
