`MoyaError.parameterEncoding(Swift.Error) case`
It will be a breaking change, but I think this is for a good cause. I agree, let's remove them so no one else faces this issue. @Legoless Thanks for the feedback and sorry for the confusion! @sunshinejr Do you think there's any value in making the `urlRequest` property throwing and then propagating the parameter encoding errors?
If `urlRequest` is used frequently outside of this context -- having to use it with try could be too annoying ü§î  @SD10 seems like it would be quite helpful! If you have some free time to research this one I think it would be a great update of our error handling üëç  Closing this in favor of #1249  Hey @gumnym, thanks for the issue. However, this one is rather a Mapper problem, see this one here: [Mapper#105](https://github.com/lyft/mapper/issues/105) (probably `null` in your JSON payload). You can bump this issue so the creators of Mapper know that this is still a valid problem.
`MoyaProvider.performRequest` could do execute an `fatalError`
@phimage I think we just didn't think about it, but one thing to keep in mind is that Carthage needs special settings for that phase so that lint does work only for our development phase and not in users projects. For reference, you can look at [Quick#693](https://github.com/Quick/Quick/issues/693), [Quick#694](https://github.com/Quick/Quick/pull/694) and [Nimble#409](https://github.com/Quick/Nimble/pull/409)
phimage/Moya@c13fcd6
Following that `Progress` could be also provided at the end with response
```Swift
1. You can use Swift 3.2 in Moya but 4.0 in your project (see more about it [here](https://github.com/Moya/Moya/issues/1189))
```swift
```swift
extension Giphy: TargetType {
For Moya 9 the return type would be a little bit different (as the API is more verbose now):
```swift
```Swift
let stubClosure = { (target: TargetType) -> Moya.StubBehavior in
What's wrong with your current approach? @ivangodfather Are you calling `setProvider()` before every request? @ivangodfather I think there may be some issues with the initialization of the `MoyaProvider`.
```Swift
provider = MoyaProvider<TWApiProvider>(endpointClosure: endpointClosure)
It looks like you will need both a custom `stubClosure` and `endpointClosure` to achieve the behavior you want. Am I making sense?
@ivangodfather I'm trying to tell you that you're not receiving the sample response closure because your `MoyaProvider` is defaulting to a stubBehavior of `.never`.
```Swift
provider = MoyaProvider<ApiProvider>(endpointClosure: endPointClosure)
- Removed mentions of `RACSignal` - we removed in version 7.0.0
- Improved descriptions of RxSwift & ReactiveSwift in Readme
```swift
Let me know if it resolves your issue or if you have some more questions around this topic :)  @riyanpratama Let me preface this by saying I don't know much about Carthage.
I think that Moya `8.0.5` has a minimum ReactiveSwift requirement of `1.1.0`.
Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  What is your current Moya version? You can check in the `Podfile.lock`. And can you maybe also share the contents of your Podfile itself? I just set up a fresh projects and everything builds fine. Moya is using `8.0.5` there.  Hey @i-schuetz. Thank you for writing a complete guide how to fix the issue you encountered! :D This surely will help people with similar problems in the future, so again thank you for doing this.  Hey @edopelawi. Thank you for your really well written description of the issue! Glad you figured this out. üòâ   @ondev Have you been able to find any useful documentation?
Your `MoyaProvider` instance can make any number of requests to the underlying `TargetType`.  Nice one, @yangcaimu! Would you be able to remove these from Tests as well? Would be awesome :) Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  Hey @xumoyan. Thanks for the issue! However, this is a duplicate of #1189. Please see it as there is more info about this and current workaround. Basically you created a Swift 4.0 project, and we currently do not support it. You need to change Swift version of Moya to 3.2, or wait for 9.0 release (after #1193 merges).
```swift
public final class func defaultAlamofireManager() -> Manager {
Edit: You can also find more details in #992  Hey @xavierXing. Please post your code and we will try to help you :)  Right now #1193 will update our Swift support to Swift 3.1, 3.2 and 4.0. While it is awesome, we should do some checks to make sure we do not break these unintentionally. We can do builds for all of them, but I think checking for 3.2 & 4.0 compatibility should be enough. What do you guys think? I think those two would be enough. Then in September we can drop Swift 3 tests. **Update:** So I tried the new workflows API from CircleCI, but [seems like macOS is not yet supported there](https://discuss.circleci.com/t/os-x-macos-ios-support-on-circleci-2-0/16430). Thus, we probably need to fallback to rake.
```swift
```swift
Also, maybe you would be up for doing PR with the update, @larryonoff? üòâ  @larryonoff `carthage bootstrap`  Hey guys! üéâ
```swift
```swift
```Swift
var urlEscaped: String {
```Swift
```diff
```diff
```swift
i.e) Specific compile errors, your Swift version, Moya version Also, we'd be open to a PR that fixes the breakages üòÑ  @GTMYang Are you sure this is an issue with Moya? I can't find any reference to it in the error output.  Hey @ArthurAlvarez. This is a good one!
```swift
case OAuth
```swift
What do you think about it, @yar1vn?
@yar1vn I believe @sunshinejr was just trying to mock up a good way to add this functionality considering the state of Moya's current API.
Please let me know if you'll be able to do it this week, would be awesome! Otherwise we might just help you out since this is a breaking change and is a perfect fit for a new major release we are planning. This shouldn't take that long to make the changes to sources, tests, and docs.
@yar1vn If you end up not being able to get around to making the changes this weekend, would you like me to take care of it for you?
I'm not trying to rush you but it's always great to bundle as many breaking changes in a major release üòÖ  We don't want you to feel pressured to do this, @yar1vn, since nothing good happens from it. Thus, I think, that we should just take it from here and you can always contribute in the future when you have more free time. We will always have some tasks for starters, so don't worry about that :) Thanks for the initiative and your time spent on this one! üôá
```swift
i.e) `no_recent_activity` or `no-recent-activity`  Hey @abeintopalo, thank you so much for this detailed explanation! Really awesome of you.
```javascript
[babel](https://github.com/babel/babel.github.io) uses emojis.
```swift
if let error = error as? Moya.Error, body = error.response?.mapJSON() {}
the syntax might be off since I'm writing this from the bus, but the idea should be alright. üòÖ
Let us know if it helped! @ledikari Do you know which case the `MoyaError` is?
<img width="350" alt="zrzut ekranu 2017-06-30 o 19 48 22" src="https://user-images.githubusercontent.com/5232779/27747803-1b0dba5e-5dcd-11e7-9415-a5309db9453f.png">
```swift
private let provider: RxMoyaProvider<GitHub>
```swift
- [x] Moya.xcodeproj fix.
My gut says composition would be a good idea (so, instead of subclassing a provider, we would recommended containing it within a sort of provider-provider). If that's acceptable, we would just want to make sure that we have a migration guide before releasing 9.0. Happy to assist with any of this. This is a great idea. I'd love it if you could help with migration guide, @ashfurrow. Especially because we will only deprecate providers, without removing them, we might get more feedback on the change as well (and thus we could see what features are really used in Moya). Well, [Eidolon](https://github.com/artsy/eidolon) has become a sort of go-to implementation for how to do Rx with Moya. Why don't I migrate that over this week, and we can refer to the actual PR from the migration docs. It'll likely be a few days before I get to this, but I'll follow up üëç Great! Thank you, Ash üéâ Thanks guys for the review! The migration in Eidolon looks like was easier than expected - and that's awesome. I've committed some changes you guys requested - please take another look in your spare time üòÑ  Btw. anyone have an idea why is CI failing? ü§î  Hmm not sure what's going on. Can you test locally to see if it passes from within Xcode? From the command line with `rake test`? Ok I think, I fixed it (it actually passed from the state it was stuck on üòÑ ). There was a problem with project (I had to regenerate it using `framework-generate`. I'll bring that up in another issue) + problem with Carthage deps.  Thank you guys so much for the reviews and help! Thanks for picking this up, @sunshinejr!  Hey @codwam. Please let us know the details of your issue. For example it could be your `TargetType` setup, what are you trying to achieve and what is happening. For now we can't really help you with that info, unfortunately.  @codwam to make your request multipart-friendly, you need to have a `multipartBody` that is not empty and your `method` in `TargetType` must be one of the following:
```swift
.patch
```swift
```swift
```swift
I agree with @sunshinejr that it gets a lot more verbose at the call site... definitely not great. I'm wondering if instead of associating the new `RequestDataType` with the request enum case, we can extend the number of enum cases? like `requestWithData`, `requestWithParameters` etc?  I left you comments around most issues @Dschee. For flattening I agree we would need to flat upload & download types as well. I think we might do it in the same PR since naming convention in this one would be similar.
Some really cool work going on here! üòÉ Also, could you check CI, @Dschee, please? Seems like it is failng. We still need to update `docs/Examples/Basic.md` and possibly more in the examples section. While the examples are not pure documentation, `Basic.md` is a very important reference file. I'm actually not sure about `ArrayAsRootContainer.md` but it looks like more of a specialty example, so if it wasn't updated before a release I wouldn't mind too much. My biggest concern was `Basic.md` considering it is our `#1` most viewed documentation file. Thanks for taking care of this!    @Dschee I think what you've listed is fine. We don't need to add `unavailable` attributes to specific cases in the enum. The migration guide will cover this. Amazing work everyone, @Dschee especially! üí™  Oh no, I've meant that someone else should take a look at it as well :D Also, I'm not sure how can we test this one, since it is on a branch that does not belong to Moya, but to you. Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  When something changes in the `Sources` directory, there's a good possibility of us having to update or add a test in `Tests` as well. Giving a warning via Danger might be a good way to get a nudge in that direction if it's forgotten.
It seems like the parameter order differs from `ReactiveSwiftMoyaProvider` and `MoyaProvider`. üòØ @BasThomas you probably just need to extend `Reactive` (`RxSwift.Reactive` & `ReactiveSwift.Reactive`) and then we can skip using other providers and provide `request` method. @sunshinejr I've been trying to update the tests and verify if everything is working locally, but can't seem to get the tests running. For this I think I need to do a `swift build` and `swift test`, right? Problem is, `swift build` errors:
```bash
warning: refname '1.1.3' is ambiguous.
warning: refname '1.1.3' is ambiguous.
/Users/bas/Documents/Programming/iOS/Moya/Packages/RxSwift/Package.swift:5:36: error: use of unresolved identifier 'ProcessInfo'
Any idea? Is this an `RxSwift` issue? AFAIK, `NSProcessInfo` was renamed to `ProcessInfo` in Swift 3 an thus shouldn't error. @BasThomas We don't support `swift test` yet, it is on my todo list to make it work some day and there is an issue for that as well (#894). Right now we can use Carthage for it (`carthage update --platform iOS` should be fine) and then open Moya.xcodeproj and run the tests in. Should work fine, but if you encounter any issue let me know üëç
**Edit:** About the `swift build` command, do you have an old toolchain somewhere? Maybe old Xcode? This command _should_ work ü§î  Interesting, I had two *really* old snapshots, though Xcode was just using the one bundled with Xcode; I wonder how it used one of those other snapshots when running `swift build`. ü§∑‚Äç‚ôÇÔ∏è Testing via Carthage works; I've created #1141 to make a short `.md` to document this. Added a DNM, as we would need to merge this into `9.0.0-dev`, not `master`, which seemed to cause [some issues](https://github.com/Moya/Moya/pull/1140#issuecomment-310914884) when trying to do so. woah, I just switched the base from master to 9.0.0-dev, and it looks like 9.0.0-dev is in dire need of a rebase :octocat:  Yeah, that's what I saw when switching the target branch as well. ü§î somebody's who's familiar with the recent commits on master should run
```swift
extension Reactive where MoyaProvider {}
Keep us updated on your progress, we'd love to see the possibilities. You might want to consider forking Moya and don't be afraid of trying things out there. üòÉ  Hey guys. I must admit I didn't read the whole conversation, but I'd suggest that we wait a little bit with planning this one. We are still focusing on releasing 9.0.0 first. Additionally, we build Moya on top of Alamofire, and these guys could also implement some `ParameterEncoding` interop with `Encodable` & `Decodable`, thus making our life easier (they change `ParameterEncoding` a lot). Swift 4 has a long way to go and time may play on our side. Although if we don't get any new API, enum idea with some tweaks seems good for me :) Swift 4 will probably be released around September, which means we still have a two+ months to go, during which Swift will still be in development and will have some fixes and improvements.
```swift
// this whole enum would be new
```swift
**Edit:** Also, see how the default `Manager` is created [here](https://github.com/Moya/Moya/blob/aa33a0466d7333516691b3e5212c5acb41990928/Sources/Moya/MoyaProvider%2BDefaults.swift#L24-L31). Glad it worked! üéâ   Hey @ranayahya - it doesn't seem like you're using Moya, right? ü§î
In that case I am going to close this issue, as it is not related to Moya. What seems to be going wrong is that you are unwrapping (`!`) an optional value, which is `nil`. Check in Xcode on what line this happens (probably this one: `var request = URLRequest(url : URL(string: API)!)`?) If that's the case, it seems like the URL is invalid, in which case `URL(string: url)` returns `nil`.  Hey @BasantAshraf. Use `URLEncoding(destination: .queryString)` as your `parameterEncoding` and add `userName` & `password` as your parameters. Let us know if it worked!  We might want to add a custom ParameterEncoding example. See #1119 I think we could just point to [Alamofire docs](https://github.com/Alamofire/Alamofire#custom-encoding) instead ü§î  Yep, that'll do as well, I think. üòÉ  For sure! Still, I think that `ParameterEncoding` using some specific `Moya` configuration would be awesome as well.  Fixes #1110.
Was there a reason this was not enabled before?  When doing a search, it does seem like a lot of people just `return Data()`: https://github.com/search?q=%22var+sampledata%22+language:Swift+extension:.swift&type=Code&utf8=%E2%9C%93.
But I'm interested to hear what kind of dependency problems you're referring to.
@Huang-Libo I can see the benefits it would bring for Carthage users, but I still agree with the conclusions from #345: the complexity it would add on maintenance side is too big. (more context in #215 and #169).
@Moya/contributors Thoughts?
If we do decide to change the infrastructure of the project, I'm happy to help in any way I can. Just let me know;. I am going to close this for now as per the above comments, but thanks for bringing this up @Huang-Libo!  I merged changes from master into 9.0.0-dev, but there were some conflicts and I would love if you guys could take a look at it and make sure everything is okay :D
### Types
```swift
```swift
```swift
```swift
### Migration from current closures
```swift
```swift
If you guys have any other ideas it would be great to hear them. Also, if you are still reading this, thank you! This might be a big change, so I'd love every feedback I can get. If the whole idea is just not the right one for your taste - just say it.
I think we first need to have a clear vision of what exaclty is a plugin for Moya. Is it something external to the core API, similar to our current `PluginType`, which deals only with request/response? Or is it something capable of changing the internal behavior of the framework (like `EndpointPreparingPluginType` and `RequestPreparingPluginType`)? Or both? Thank you so much for the feedback, @pedrovereza üëå
Installing Alamofire (4.4.0)
Installing Moya (8.0.5)
"http://cdn2.jianshu.io/assets/default_avatar/13-394c31a9cb492fcb39c27422ca7d2815.jpg?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240"  ->404 I was given a strange url  "https://www.XXX.net/buildAction.do?mbGetIndexJson&city=370200"
@haritowa The server needs the access token and limits to be in the url. Would using params allow for this? @pete183 Yes, `URLEncoding.default` will put your parameters in the url :wink: @pedrovereza @haritowa Thanks for the help, it works now! Just to add to it: `URLEncoding.default` will behave differently in `GET` and `POST` requests. In `GET` method you will, in fact, get parameters in URL, @pete183. In `POST` on the other hand, you will get parameters in body. You can specify if you want it all the time in the URL or body using different properties of `URLEncoding` - more on the matter [here](https://github.com/Alamofire/Alamofire/blob/master/README.md#parameter-encoding). @sunshinejr Please check #1120 üòÖ  @sunshinejr Does Moya have an easy way to send two parameters one in the URL and one in the body using a POST request? We don't have a method exclusively for this behavior, but you can use custom `ParameterEncoding`, that would decide whether the parameter should be in body/url/header. You can find instructions on creating your own encoding [here](https://github.com/Alamofire/Alamofire/blob/master/README.md#custom-encoding).
```swift
return CompositeEncoding()
```swift
```swift
> Since there is no published specification for how to encode collection types, the convention of appending `[]` to the key for array values (`foo[]=1&foo[]=2`), and appending the key surrounded by square brackets for nested dictionary values (`foo[bar]=baz`).
@pedrovereza
```` @AkhilDad
```swift
return URLEncoding.default
return CompositeEncoding()
```swift
// MARK: URLEncoding
/// the key surrounded by square brackets for nested dictionary values (`foo[bar]=baz`).
// MARK: Helper Types
// MARK: Encoding
throw AFError.parameterEncodingFailed(reason: .missingURL)
/// - Sub-Delimiters: "!", "$", "&", "'", "(", ")", "*", "+", ",", ";", "="
As always, let me know what do you guys think. Cheers! üéâ   Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  Hey @mrfarukturgut , `JSONResponseDataFormatter` is not part of Moya. We have the function [implemented in our Demo app](https://github.com/Moya/Moya/blob/5678a4c66ad779b15173315b0c2e300d0e3d9ba9/Demo/Shared/GitHubAPI.swift#L6), you'd need to implement the function on yours :wink:  I think we should be able to add this in Moya. I'll take a look. Thanks for bringing this to our attention! I've opened #1127.  Hey @eliacamposilvan. Thanks for filling in an issue.
```swift
```swift
A third option would be to have the `setupProvider` as a function in an `extension` of `UIViewController`, but I would not recommend this one as it's the least clear IMHO. On a side note, dealing with header fields will (hopefully) be easier in `9.0.0` (see #1067) :wink: I'm gonna close this issue for now, but if you'll have more questions about this topic, please feel free to reopen it whenever üëç    Thanks again, keep it up!   üòçüôå Btw, our 100th member of Moya organization! üéâüéâüéâ Haha, membership in the best community out there :>  Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions. Thank you, @jawwad! üéâ   Hi, @Deniallugo!
Have you tried using one of the authorization plugins? Maybe that would be easier. You can find the [documentation here](https://github.com/Moya/Moya/blob/master/docs/Authentication.md). @Deniallugo I'm gonna close this. Feel free to reopen if you're still having problems with it.  As per #1078. Name **Community.md** is taken in our root directory so I didn't want to pick the same (the distinction might be key). Right now I've chosen **CommunityProjects.md** but I'm open to suggestions.
Thanks for the work @sunshinejr!  Do you think we, @Moya/contributors, can create a Vision document? This would help us create some clear goals for the project as well as giving the community and users a better idea of what we expect of this project going forward.
FAQ:
Separating subspecs into repositories
Pinging you, @ashfurrow, as your contribution here would be invaluable. Could any of you guys start this one and we can go from there in a PR?  Cool cool ‚Äì I've got some time this weekend, I'll see what I can do üëç Hey ‚Äì still haven't gotten around to this. Requires some dedicated thinking time. Will do my best üëç No problem Ash, please take your time. And thanks for letting us know üëç  This totally fell off my radar ‚Äì going to prioritize it this weekend.   Hey @iOSUser110. Is this JSON you provided your response, or do you want to construct a request with these parameters in it? It is really strange, could you give us the specific code for `parameters` that you return, @iOSUser110 ? @iOSUser110 what do you have set on your `parameterEncoding`? This situation described by @mpsnp only makes sense to me if you're using `URLEncoding`. @iOSUser110 I don't think it's advised to use `URLEncoding` for complex data types like this one. If you're able to change it to a `POST` with `JSON` format it would be much better. I'm not sure how I would do a workaround to make it work with `URLEnconding`. This issue has been marked as stale because it has not had recent activity. It will be closed if no further activity occurs.
1. Leave the sections as it is, but accept everything related to Moya.
I think the goal is to make people know that we ‚ù§Ô∏è all the work around Moya and make them feel appreciated in some way or another. The question is how to do it? ü§î Great idea, thanks for some initial thoughts @sunshinejr!
- If we update our codebase to support Swift 4.0, we shoud update our CI setup to build both 3.X version and 4.0.
If we do indeed want to end up changing this, It'd be awesome if we can take this with us in the `9.0.0` release. I think I was implementing this one and I'm also positive there was a reason for `NSError`, but I don't remember right now and I don't see any downsides as well. Thus I think we can try changing it to just an implementation of `Error` type. At least we can do a PR and see what happens. Especially with 9.0.0 version that is in the making. Do you want to take a stab at that, @Zeeker?  Possibly related: https://github.com/Moya/Moya/issues/437#issuecomment-198780649 and https://github.com/Moya/Moya/issues/478 Oh right, I was talking about this one for sure! Thanks, @pedrovereza.
Now that I think about it, maybe we can go with `MoyaError` here? Moya has an `.underlying` error already, which takes an `NSError` if needed. Although how would we go about custom errors? ü§î This issue has been marked as stale because it has not had recent activity. It will be closed if no further activity occurs.
The link in the `closeComment` looks like it causes a different syntax coloring -- could this be an issue?
<img width="781" alt="zrzut ekranu 2017-07-03 o 22 23 23" src="https://user-images.githubusercontent.com/5232779/27806997-41992dac-603e-11e7-8be5-e9e05e303948.png">
- [x] Update documentation @Moya/contributors Let me know what you think :wink: Loving it, seeing as I've implemented this like, 8x in different projects. Should we add a default of `nil` to the `TargetType`? I think that would make sense, given that most requests currently don't implement this. @justinmakaila Yea, having it defaulting to `nil` makes sense to me. I actually tried that at first, but was having some trouble overriding the value in the tests. Probably missed something, will give it another try üòÑ  ü§î, I remember that we actually didn't want to implemented / default this ourselves. @BasThomas I'd be interested in re-hashing that discussion here; I've had to implement this myself a handful of times and it's particularly annoying. I think it's save to say that MOST private APIs will require some sort of authentication and it seems a little ridiculous to have the `Endpoint` initializer be considerate of state, given that most of the state is already incorporated in `TargetType`. @justinmakaila I think @BasThomas was talking about whether or not we should default `headers` to `nil` üòÑ
Or add it as a separate integration, not through circle ci? So danger &
It seems like a nice piece of work though üëç  I also think this is not an extension to Moya, so unfortunately I'm gonna close this PR.
Cocoapods:
```ruby
Carthage:
```ruby
github "iOSUser110/Moya" "<your branch>"
Please don't point directly to our `9.0.0-dev` as this branch is under active development and is being constantly rebased (which will change commit hashes and may be not be always stable) @iOSUser110 First you need to fork Moya repo and fetch it locally. Then run these commands inside your fork of Moya:
```swift
````swift
return ArrayOfStrings
```swift
- [x] fix the overriding initializer and change the `MoyaProvider` initializer to take a queue as well So I'm trying to understand... this is the queue that will be used by Alamofire for callbacks as a hook back into Moya, whereas the remaining Scheduler property is in place for delivery of whatever reactive abstraction you use? That's correct @justinmakaila. So then if you're using the vanilla `MoyaProvider`, you pass a thread. But if you're using an `RxMoyaProvider`, you'd pass in the Rx abstraction of a thread - a scheduler, and we want to implement whatever the equivalent is for ReactiveSwift as well.
For now, can you just add an entry to the changelog, and then we can see how the tests do? I got really busy with work, sorry about that @haritowa!  I'm wondering whether the parameter name `queue` isn't too vague and if e.g. `callbackQueue` wouldn't help with recognizing for what exactly is this queue used. Thoughts?  Cool! What do you guys think @AndrewSB, @justinmakaila? Yes, I think `callbackQueue` is a better name. It takes away any ambiguity.
@haritowa, do you think we can improve the `queue` parameter in the `request` method as well? What do you think is a better option? The CI failure is legit, seems like `RxSwiftMoyaProviderTests`needs a second review üòÑ  that was broken by me -- I'll fix it now. Sorry!
```swift
let urlString = "https://google.com/123/somepath?X-ABC-Asd=123"
url.appendingPathComponent("").absoluteString //"https://google.com/123/somepath/?X-ABC-Asd=123"
url.appendingPathComponent("", isDirectory: false).absoluteString //"https://google.com/123/somepath/?X-ABC-Asd=123"
I'd still not call it a breaking change as the API contract has not changed, and the current behavior seems odd and probably is not expected.
> issue ü§î
> changed, and the current behavior seems odd and probably is not expected.
````swift
We'd be open to a PR that does this, and theres a chance some other contributors might be interested in helping out üòÑ   Hey @k8mil, can you check if it works as expected when you change your `baseURL` to be just https://google.com and `path` to return `/123/somepath?X-ABC-Asd=123`? Hey @k8mil thanks for the detailed explanation and examples üëç
I'd be more than happy to review a PR üëç this is something I've wanted for a while too No worries @haritowa - take your time. üòÉ   Hey @douglastaquary thanks for sharing your solution, this may be useful for others as well!
```swift
Yeah, I thought that was really strange too- why weren't we `_, _`ing those params previously?
I think it was a tuple ü§î
```swift
> I think it was a tuple ü§î
```swift
```swift
**Also,** sorry @sendyhalim for clicking on you, didn't see that _"reviewers suggestions"_ popup before üòÖ  Fixes link to [`Code of Conduct.md`](https://github.com/Moya/contributors/blob/master/Code%20of%20Conduct.md) by replacing the spaces in url with [url encoded characters](https://www.w3schools.com/tags/ref_urlencode.asp). Hey @BenEmdon! Thanks for the changes! üéâ
These warning doesn't have anything to do with this PR so I'm gonna merge this anyways :)  Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions. Nice, thanks @LarsJK!  Hey @Blackjacx, awesome to see that you're thinking about doing some local validation before hitting the network üëå
```swift
```swift
return URLEncoding.default
Hey @iballan, we recently noticed that the documentation I pointed you to was wrong (we fixed in #1120). üòÖ
Could you try using `URLEncoding.queryString` instead of `default`? I have set up an [example on how to send parameters in the URL using POST](https://github.com/pedrovereza/MoyaCarthage/blob/master/MoyaCarthage/ViewController.swift). Can you try this one out and make sure it works for you? ü§î   Are you implementing an optimistic UI (i.e. you're going to show an update has _succeeded_ before it actually comes back from the network)? If so, moving your network requests into a separate queue will make it very hard to tie back server validation/network failures back to the original callee (from my experience, YMMV).
```swift
Does that make sense in your case? @camcoding Can you  write a custom provider that subclasses `RxMoyaProvider`  and implement the logic in the custom provider? ü§î
```swift
.Package(url: "https://github.com/apple/example-package-fisheryates.git",
```swift
let request_1 = MoyaRequestXXXXX
```swift
```swift
```swift
```swift
Forcing people to make changes to existing code bases to implement the best practices from one of our dependencies for a new version should be expected, and as @AndrewSB mentioned, you can just add `asObservable()` if you're a client who wants to continue to use `Observable`. Thank you for sharing your thoughts @justinmakaila!
@pedrovereza: I'm lazy, and I don't see the harm in #2, but feel free to go ahead with whichever one makes you more comfortable @BasThomas @AndrewSB @gperdomor @justinmakaila @andreyfel
```swift
```swift
```swift
```swift
```swift
* `delayedStub`
```swift
I'm a little tentative to pull the trigger right now, seeing as I've already ruined our history a bit ;).
Not sure why you are referring to the main repo? Oops. Thanks @BasThomas. I missed it. Sorry @gperdomor. Looks good! We should also not forget to update the docs to reflect this change, although I think we can do so in another PR.  **DON'T MERGE YET**... I forgot test the Demo, i don't know if runs or not... But i can't do it now... i will do it tonight @scottrhoyt I update the docs and integration tests... The Demo works without changes Hmm we might want to start a separate changelog section for 9.0.0 instead of making it seem like this change is on `master`. But this PR is target to 9.0.0 branch, not to master, so everything in Next section is obviously referent to 9.0.0, at least for me can we merge this?... I propose create a milestone for the `9.0.0` Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions. @nikans Moya has been around almost as long as Swift has been public, our error handling as evolved as Swift's has :wink:   I could be wrong, but I believe this is more of an App Transport Security issue. Have you tried searching for information/solutions regarding that? Hmm. Well, I'm not sure I can think of where Moya might be interfering with this. Moya runs network requests through Alamofire which in turn uses `URLSession`. I believe this is a configuration that should be happening at the `URLSession` level, but possibly there is something to do at the Alamofire level. [Here is a link](https://github.com/Alamofire/Alamofire#security) to Alamofire's security section that covers some ATS and common issues with self-signed certificates. @camcoding You can use `ServerTrustPolicyManager` from Alamofire:
```swift
let provider = MoyaProvider<YourService>(manager: manager, plugins: [NetworkLoggerPlugin(verbose: true)])
```swift
```swift
class CustomServerTrustPoliceManager : ServerTrustPolicyManager {
```swift
serverTrustPolicyManager: CustomServerTrustPoliceManager()
let provider = MoyaProvider<YourService>(manager: manager, plugins: [NetworkLoggerPlugin(verbose: true)])
I have to think about this one for a second. Something feels a little off about transforming an `AFError` into a `MoyaError` like this. I don't know that it is a bad approach, it just feels unique as to how we handle other underlying errors. Also, having it depend on `validate` and possibly not doing the transform if a response doesn't exist feel a bit too non-deterministic.
On the other hand, this is a clever way to get the changes necessary for #975! It is technically a breaking change, though. If someone wrote code that looks for the a `AFError. responseValidationFailed` embedded in a `MoyaError.underyling`, their code will break with this update. Worse, it would probably be silent--no compiler error.
In order to execute this I believe I will need a OAuth token with permissions to modify releases. @Moya/owners or @ashfurrow do you think you could assist with this? I'm okay with automating things, that's a bit distinct from releasing prebuilt libraries. I've avoided them until Swift has ABI stability but it's definitely up for discussion. @scottrhoyt I've added you as an owner of the Moya org so you should be set to handling setup yourself. Let me know if I can help ‚Äì I've been stepping back gradually but I'm happy to help where I can! Thanks @ashfurrow! I share your concerns for Swift ABI compatibility, which is why I introduced a PR for Carthage to only use prebuilt binaries when they are compatible with your local version of Swift (https://github.com/Carthage/Carthage/pull/1755). This is has been merged and will deploy soon with the next Carthage release. With this feature, a Carthage consumer of Moya will at worst have the same behavior as current (building Moya), but may also benefit further from a prebuilt binary.  @iShawnWang thanks for reporting this and creating a repro project. I can confirm that I experienced the same compiler crash from that project. I haven't had a chance to look into it much further, however, because these sorts of compiler crashes can take a while to debug üòû . In the past when I have experienced this it has been related to issues with generics (many times having to do with generics and inheritance). I don't know if that is the issue here or not though, but it's my first guess. Have you had a chance to see if this behavior is the same when compiling with Swift 3.1? Thank you for your help, @hugweb! üëç I think this should be resolved, so I'm gonna close it. If you still have questions about this topic, @iShawnWang, please feel free to reopen whenever.  This was introduced recently in f90429587b92a57d33ed7019fc80b5a082aac7b2.
```swift
struct MooApi: TargetType {
let provider = MooProvider<MooApi>(token: accessToken)
return provider.request(MooApi(url: url))
```swift
enum MyApi: TargetType {
```swift
enum MyApi: TargetType {
```swift
var method: Moya.Method { return target.method }
class DynamicProvider: MoyaProvider<DynamicTarget> {
```swift
var method: Moya.Method { get }
var method: Moya.Method { return subTarget.method }
```swift
```swift
class TestProvider<Target: TargetType>: MoyaProvider<Target> {
```swift
```swift
Option 3 would be the hardest but of possibly the most value to the Moya community. We go through some lengths to hide Alamofire from end users. If we can eliminate one more use case--and a big one at that--for users to dig into Alamofire and deal with the attendant consequences, I think that would be a big win. I'm sorry @mrtj, I mistakenly assumed that at that point Alamofire was just returning a `AFError. responseValidationFailed(reason: . unacceptableStatusCode(Int))`. If it is also returning a response with data then indeed you could modify `MoyaError.underlyingError` to have an optional `Response` parameter that can be forwarded to custom error handling.
Why don't you give that a try and report back your findings? We can open up a PR as well, but since this would be a breaking change, it might be a bit before we can include it upstream. FWIW, I think in this case it should definitely be corrected to also include `data` in Moya, and we should consider releasing a `9.0` for it. What would be the downsides of doing it this quick after `8.0`? I don't see there being a ton @BasThomas. If this were a bigger breaking change I would say the downside would be forcing user's to deal with breaking changes to receive future fixes, but in this case the fix would be pretty minor and maybe not even affect a large portion of users. If we go that route I would propose we start a pre-release cycle for 9.0 so that @mrtj and others with this use case can get support quickly while we work out what other things--if any--should go in 9.0. How about we open another issue to discuss? üëç great idea  @mrtj @BasThomas, I just created the `9.0.0-dev` branch so we can accept PRs there. @mrtj, if you have gotten the solution above to work, would you mind submitting a PR to that branch so we can get your work included in the next major release of Moya? üëç  Solved in #993 so this can be closed  Hey @shuijinliuxi, can you test if the parameters are valid before making the request? Something like:
```swift
```swift
Thanks Done, solved by myself by edit the url endpoint... @Ank49 cool man.. sorry just read it.. My approach little bit different. I edit the urlendpoint something like this
So, I do think that the question of whether or not to include a `destinationUrl` needs further consideration, and I would love to get the opinions of other @Moya/contributors.
```swift
case star
let provider = MoyaProvider<Assets>()
* Will this work with both Carthage and Cocoapods? And have both been tested?
* Does this method work with Carthage prebuilt binaries incase we want to introduce that for Moya?
> Will this work with both Carthage and Cocoapods? And have both been tested?
It works fine with Cocoapods & Carthage ([PromiseKit](https://github.com/mxcl/PromiseKit/tree/swift-3.0) has one target and they support both + SPM).
> Does this method work with Carthage prebuilt binaries incase we want to introduce that for Moya?
> Carthage framework copy script is now part of the source control. So after rebasing this & fixing CI, this should be ready to go.
If no one else has taken a stab at resolving conflicts by tomorrow, I'll give it a shot and add some contributors as reviewers for this before we merge in üòÑ  I rebased, but we were still having a conflict, so I merged Podfile.lock. Going to get this CI passing and then we should be good to go üòÑ  Apparently something is wrong with Danger, but it looks like a nonsensical error. The Dangerfile on this branch matches the one on `master`. Can a @Moya/contributors who's familiar with Danger try to debug this? Thank you everyone for your work! I'm excited that we got this merged in üòÅ  Closes #952   Just to clarify @ftp27, what version of Moya are you using? The behavior for plugins to modify requests was introduced in 8.0.0. Also, a couple of other things to check. Are you using an endpoint closure or request closure to modify the request at all? Is there any chance that middleware on your server might be stripping the authorization headers? Thanks for the information @ftp27. If you aren't using anything but this code, then you don't have to worry about the closures I mentioned.
Do you think it could be something with wireshark itself? @ftp27 Ugh, that's weird. Can you confirm the same thing happens with other header fields? Something like:
```swift
As seen in Charles:
```swift
extension MoyaProvider {
```swift
``` @kemchenj Oh, I see.
So, would moving the extension to `RxMoyaProvider` be enough?
```swift
extension RxMoyaProvider {
Solves #961 Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  @fjcaetano, I am having a bit of a hard time wrapping my head around the use case and implications of introducing this since I don't normally use download tasks in Moya. If the solution is pretty straightforward, what do you think about opening up a PR with the feature to further discussion? Closing this one in favor of #968.  Hey @moonorblue. It would be unlikely that your data was base64 encoded unless you explicitly put it that way. I think what you most likely want is:
```swift
```swift
public var parameterEncoding: Moya.ParameterEncoding {
MoyaSugar ‚Äì Syntactic sugar for Moya
It's hard for me to argue for 1 when we haven't written our own Alamofire. And doing 2 would come with the responsibility of recommending a best choice of library(s). I don't know if there is one right now. The last time I made this choice, I just picked the one that was already in my dependency graph. As an aside, it is interesting that the highest level of abstraction in this stack is really the Moya extension you choose for JSON deserialization. Drop that in your Cartfile/Podspec and you get everything else you need. My thoughts: https://xkcd.com/927/
> The idea is to take Moya the last mile, so clients don't have to do
> Moya.Response) throws and put the requirement in the generic function
> enums.
> I love XKCD, and assume people are taking the moment to laugh at this classic.
I was just happy that I wasn't the only one laughing about the state of JSON deserialization in Swift! :) Your ideas are truly welcome @michaelsand. This is what pushes the project forward. @michaelsand I'm sorry about how l made you feel by posting a comic. I had no intention of disrespecting you, or the proposal you clearly have put a lot of thought into.
I should have provided substantive feedback, and put greater thought into how simply posting a comic would have come across in this situation.
```swift
```swift
extension MoyaProvider {
```swift
Taking on @colinta's challenge for a dissenting opinion:
```swift
do {
extension Moya.Response {
return MyAPIResponse(json: json)
do {
let response = try mapAPIResponse()
case underlying(MoyaError)
Updated to reflect concerns from @michaelsand regarding throwing errors of certain types... I really dislike the concept of `throw`ing in Swift because, in most cases, you have to have domain information to know what kind of Error the function is going to throw, given the fact that the `Error` type isn't dictated in the method signature. We've bumped up against the limit of what is possible with generics in Swift. The compiler needs type information sooner or later. IMO the safest and DRYest way to do that is to wrap the provider in an object that provides type information and deserialization. I know it doesn't feel as nice as we'd like it to, but neither does the unconstrained polymorphism of the other options or creating one `TargetType` per return type. The above options can help you write that wrapper, but I would say a better separation of concerns is to put the extension on the response deserializer itself by allowing it to ingest `Data` and then pass it `Response.data`. Alternatively you could just use the output from `mapJSON`, a dictionary that nearly all the libraries support.
As I mentioned, it's not the prettiest in regards to error handling, but that could easily be changed to work like so (this is untested sudo-code, my brain compiler gives it the üëç):
```swift
do {
```swift
struct Parsers {
static func authentication(type: AuthType) -> ((Moya.Response) -> String) {
var provider: MoyaProvider<MyAPI>
do {
```swift
do {
``` Thank you @michaelsand for the thoughtful idea and discussion. I personally would love to have you contribute to Moya wherever/whenever you'd like! I'm gonna close this one for now since there is no activity, but feel free to reopen it whenever.  Cool project! Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  I share your desire to find a way to inject return type information into the `TargetType`s themselves, @michaelsand. This is definitely a creative approach to doing so within the constraints that Swift gives us. On the other hand, it adds considerably complexity. What I would ask is do you think this system of callbacks is better than injecting the type information in a wrapping layer? Something like this:
```swift
2. Provide better completion handler usability for `MoyaProvider` when both the return type and method of deserialization are known
Because of the impedance mismatch between a weakly typed internet and a strongly typed Swift, it will always be incumbent on the developer to introduce the specific knowledge necessary to resolve that discrepancy. I sadly don't see a way of ever providing a generic construct for that if the tool is an `enum`.  As discussed in #946 Now we're at it, how do the Reactive extensions work with SwiftPM? I think we can keep it as `pod 'Moya'` (we always want people to be using the latest version, I feel) Yeah, that might be even better. Does SwiftPM work like that as well? It seems like we need to at least provide a `majorVersion` [there](https://github.com/apple/swift-package-manager/blob/master/Documentation/Reference.md#package-dependency).  Fixes #942  Good point @bjarkehs; we actually rely on Alamofire 4.1 (https://github.com/Moya/Moya/pull/797) Changes seem good üíØ
ss.dependency "Alamofire", "~> 4.2.0"
```swift
```swift
enum MobileAPI {
public var method: Moya.Method {
public var parameterEncoding: Moya.ParameterEncoding { return URLEncoding.default }
```swift
let mobileAPIProvider = MoyaProvider<MobileAPI>()
Let us know if you have more questions :wink:  Hey @tosbaha, thank you for making an issue üòâ
We'll be happy to help you out Closing this due to inactivity, let us know if you still need help @tosbaha   This is an interesting proposal. I'm curious what other @Moya/contributors think.
```swift
case .downloadMoyaWebContent(let contentPath):
return "/Moya/Moya/master/web/\(contentPath)"
public var method: Moya.Method {
case .downloadMoyaWebContent:
case .downloadMoyaWebContent:
return URLEncoding.default
case .downloadMoyaWebContent:
case .downloadMoyaWebContent:
```swift
case .downloadMoyaWebContent(let contentPath):
return "/Moya/Moya/master/web/\(contentPath)"
public var method: Moya.Method {
case .downloadMoyaWebContent:
case .downloadMoyaWebContent:
return URLEncoding.default
case .downloadMoyaWebContent:
case .downloadMoyaWebContent:
This changes the badge to reflect the status of `master`.
``` Hmm, you're right. It's strange though, as it's executing exactly the same request method, only with the progress parameter added.
```swift
```swift
```swift
provider = RxMoyaProvider<GitHub>()
print("Something wrong");
Before we investigate making this information available via the request closure, can you see if creating a custom `PluginType` would suit your needs? A `PluginType` has a `prepare` function that is called once the `URLRequest` has been created and is given an opportunity to return a modified request. `prepare` also accepts the target, so I believe you have the information needed there to meet this use case. What do you think? Great @gunterhager! Happy to help.    As seen in #923, some paths are now incorrect, as we changed the project's structure as part of supporting SPM.  Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  Fixes #757
```ruby
``` Glad to hear it worked, @Tolriq! No release date set, but given that this issue has come up a couple of times, I think this could warrant `8.0.1`, what do you think @Moya/contributors? @scottrhoyt 8.0.1 makes sense to me. Should we open an issue to discuss? Yeah, I'd say go for it @pedrovereza. Closing this @Tolriq. Let us know if you have any other issues.  #911 might provide some insight.  Possibly ref #911   I haven't tried this before, but looking [here](https://github.com/Moya/Moya/blob/master/Sources/RxMoya/RxMoyaProvider.swift#L61) it appears the request will be cancelled if the `Observable` is disposed. So can you try disposing the `Observable`? Was that able to help you out @GorbAnthony? If so, can you close this issue please? Thanks.  Good catch! Any idea what's up with [CI failing](https://circleci.com/gh/Moya/Moya/1177?utm_campaign=vcs-integration-link&utm_medium=referral&utm_source=github-build-link)? It seems like the identifiers for the simulators have changed?  Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  > The key deliverable here is the documentation.
Yup, this PR is only docs, which can only really help. I'm going to merge and we can refine later if we add first-class support into the library. Thanks again! Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions. Cool! I'm happy the community saw value in this. @manas-chaudhari, we'll look for your next PR which implements the documentation we've added üòÑ   As @bjarkehs suggests, writing a custom `ParameterEncoding` could be a great idea. However, I might prefer searching for a `token` parameter to in `parameters` to url encode and then encode the rest as JSON--as opposed to taking the `token` as an initializer argument. However, that's a personal style and use case decision.
```swift
```swift
return "api/resource/\(id)"
```swift
```swift
public var parameterEncoding: Moya.ParameterEncoding {
github "Moya/Moya"
for Moya,
github "Moya/Moya"
github "Moya/RxMoya"
for RxMoya, and
github "Moya/Moya"
github "Moya/ReactiveMoya"
Cartfile in Moya/ReactiveMoya
github "Moya/Moya" "reactive-moya"
Cartfile in Moya/Moya on "reactive-moya"
This may be sort of nitpicky though. Merging this would make the common case simpler (why is my request never responding), but could potentially create memory leaks for more complicated implementations (I set my `provider = nil`, but I can see that it hasn't been deallocated, wut)  Aye. I'm leaning towards merging this, the common case makes sense to optimize for. Let's give it one more day to discuss objections, but I think we've covered everything now.  Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.  There are some features in #861 that would make this easier to do with Moya, but we haven't decided on whether to include them or not yet. If you are interested in including it yourself, you can take a look at how `SingleURLTarget` is implemented and can potentially use that in your own code.
Also updated our Swift version support matrix to reflect 8.0's final release (üéâ) Hmm, we might want to add a Danger rule to keep CP+Carthage+SPM in sync (as we did in #808).    A little bit of a nitpick üôà, but just updates the build shield to be the same style as the rest.  This adds some documentation around `Endpoint`, `Image`, `Response`, and `MultiTarget`. We might want to unify the header docs at one point just for consistency (only `///` or your approach with `/**`), but lets leave that for another time. Thus far my approach is to use `///` for single line documentation comments and `/**` for multiline documentation comments, but I agree we should make sure it is consistent. I was having trouble getting the markdown (e.g. `- parameters:` to correctly register on multiline with `///`. You might have to use `- parameter name: name does thing` per parameter with `///`: see http://ericasadun.com/2015/06/14/swift-header-documentation-in-xcode-7/. Ah, that might be it then. In that case, I think:
```swift
function
```swift
2. A higher potential for *.xcodeproj's merge conflicts. Keeping separate projects will allow people to contribute to Demo code and core library code simultaneously with less risk that the Carthage-driving project will get corrupted.
- [ ] Update docs for new Demo project location & Carthage instead of CocoaPods instructions
The tags added are as follows
* moves `Tests` to root dir
1. You moved the tests into Moya.xcodeproj
- [x] **Test to make sure the project is still CocoaPods compatible** I'm not familiar with Cocoapods, so the new layout is done to Carthage & SPM best practices, but it would be awesome to have a cocoapods person test it and make sure everything still woks :)
I'm seeing a strange error with Result, have you seen anything like it?
I made sure I was using a current version of Result (I have 3.1.0 checked out), I've never seen Result used without an error type specialization No, I haven't run in to that. Just opened up a PR to facilitate comparing and getting this all integrated. Build times are greatly sped up. üòÅ #886  FWIW, check out https://github.com/antitypical/Result/issues/77 for the Result error. Although you're specifying `Moya` here, I think it might still be a failed lookup between `Result` and `Alamofire`'s `Result` type. ü§î @scottrhoyt: sounds great! Oh wow, I just saw all the work you put into #886 üò´ I'm sorry about superseding it!
@ashfurrow, do you have any idea on that Danger bug? @scottrhoyt I still have a feeling that an entry in the changelog will fix it ü§î  Thanks @pedrovereza! Let's see if that fixes it. @scottrhoyt this looks really great, awesome to come on and see that the PR's checks are passing üòÑ
* Carthage is driven off of the main Moya.xcodeproj, so I think it's a good idea to keep that as lean as possible.
* Merge conflicts are not fun in *.xcodeproj's, so keeping separate projects will allow people to contribute to Demo code and core library code simultaneously with less risk that the Carthage-driving project will get corrupted.
> Carthage is driven off of the main Moya.xcodeproj, so I think it's a good idea to keep that as lean as possible.
> Merge conflicts are not fun in *.xcodeproj's, so keeping separate projects will allow people to contribute to Demo code and core library code simultaneously with less risk that the Carthage-driving project will get corrupted.
Is there any way to validate cocoapods without having a separate xcodeproj?
I'm going to go back and see why we added the Carthage validation on each commit
Update: we added Carthage sanity checking in https://github.com/Moya/Moya/pull/630, and the reason why was because we missed https://github.com/Moya/Moya/issues/629.
EDIT: created #891   FYI, the test code can be found in the Demo dir. Do a `pod install` and open up the Demo workspace to access and run the test code. Yeah, tests don't add a lot here, except maybe for `underlyingError`. And if you're gonna test that, then maybe just include the trivial tests for the others for an easy coverage win? ü§î What do you think? Thanks a lot for contributing to Moya! I've invited you to join the Moya GitHub organization ‚Äì no pressure to accept! If you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions. Yeah, I suppose we can add some trivial tests to bump the percentage, although, like I said, it's pretty trivial. ü§∑‚Äç‚ôÇÔ∏è  So this one is a pretty big breaking change, and that could be a decent reason to not do it. I figure we should consider it before 8.0.0 though.
* Helps to resolve a class of issues where a failure to namespace `Moya.Error` leads to conformance errors or unintended behavior
Basically, it has been my experience that overloading Swift standard library type names causes extraneous üëø for maintainers and users alike. But I'm curious if others feel that same way enough to justify the big break.
Also important to crafting a well written library is consistent reasoning. I think we all can agree it wouldn't be a great idea for us to overload `Swift.String` or `Swift.URL`. I can share some tearful stories of days lost dealing with a library that overloaded `Swift.String` (the punchline is that I wrote some declarations as `let a: String` when they unexpectedly needed to be `let a: Swift.String` üò≠). So if overloading the standard library type names is bad in general, then we need to ask why should `Swift.Error` be the special case? Again, it's not to say having a special case is bad, but it should come with some good reasoning.
I don't want to rock the boat too much here. I just think if we want to shift the paradigm to a special case that is unexpected, it should come with solid reasoning and make users' lives better. The reasoning for `Moya.Error` doesn't seem robust and I think it actually might makes users' lives a little more difficult--even in writing about this PR we have to explicitly namespace a swift standard library type .
* It might not be straightforward for people to find `Error` when browsing the source. Cool, let's rename it `MoyaError` then. Like I said, it's not ideologically as awesome but we've got to live/code in the real world üòÑ   As discussed in #861, this PR removes the default implementation for `TargetType`'s `parameterEncoding` to be consistent with current approach for `TargetType`. The default will be reintroduced as part of #861. Oops wait, need to edit the CHANGELOG to mark `parameterEncoding` as a breaking change. Should be good to go now. Oh, didn't notice those were missing too. Just saw the GitHub one and fixed it within GitHub. üôà
```swift
... but we should definitely test this before doing so. I'm pretty sure it will behave the same way as a `fatalError()` but I will open up a test branch here and throw an `assert` in to see what happens. According to [this failed build](https://circleci.com/gh/Moya/Moya/1159?utm_campaign=vcs-integration-link&utm_medium=referral&utm_source=github-build-link) it looks like it behaves the way we want it to. Hmm, does `sampleResponse(forFileNamed:)` make sense for the function name? Maybe it's just me, but does this really belong in Moya? It seems like it's just sugar that could be implemented on a per-client basis. As OP said, this is only really relevant for testing, and this is stuff that should be coming from your network layer, rather than Moya itself. @justinmakaila I agree that point should be discussed. We should consider whether or not Moya needs a rethink on how it handles testing. I think it might.
```swift
I think we're headed down a slippery slope if we're just adding sugar.
I don't disagree with you. However, I just think our viewpoint might be in disagreement with the stated goal of Moya:
* Move the `Method` typealias to the Moya+Alamofire.swift file with the other Alamofire type aliases.
* Move the extension on `Method` to Moya+Internal.swift where it is used. This could possible also go in Moya+Alamofire.swift.
```swift
That file would still be pretty ugly, but it would clean up the main API code. Agreed, it can get pretty wild. I store sample response data (JSON mostly) in files and return the contents of those files instead of hard-coding things. Here's an example: https://github.com/artsy/eidolon/blob/bbaa513cc50e6bdfe0aad317ffca1372ecbc8323/Kiosk/App/Networking/ArtsyAPI.swift#L182-L238 Let us know how it goes üëç Closing this now then, let us know if you encounter any issues!    #859 already adds `parameterEncoding` defaulting to `JSONEncoding`. Which version of Moya are you using? Thanks for the suggestion @EvilNOP. That is exactly what was done in #859 with `URLEncoding` being the default. A new release hasn't been cut yet so it is only available on `master` at the moment. Ah right, @scottrhoyt's change has not had a new release yet. Do you think that solves your problem or would your number 3 still be something you'd really like to see? @BasThomas, I think that number 3 is also being done in #859. It looks to just be the change needed to encorporate `TargetType`'s `parameterEncoding` instead of the hard-coded `URLEncoding.default`. Alright, I am going to close this issue then. @EvilNOP, if you feel like something else should still be addressed, feel free to reopen!  The quotes in the JSON aren‚Äôt escaped so the compiler is not interpreting this the way that you want. For `sampleData` this complex, instead of going through and escaping all the necessary characters, I would recommend that you load this data from another file.
```swift
MoyaProvider().request(target) {
let provider = MoyaProvider<SingleURLTarget>()
### Alternatives Considered
That way one can continue to take advantage of
It's certainly an option, yet at first blush I'm not in favor. That is primarily because I think making the API surface area larger works counter to the goal of this PR--which is to make Moya easier to use for simple cases. An `OpinionatedTargetType` would require users to read more documentation to confidently use Moya, and that's really the same problem as is introduced by just doing the defaults on `TargetType` except you don't get all the benefits.
But I really think we need more than just the two of us to weigh in on this, since it is a decision central to Moya's philosophy.
As for `sampleData`, even as an ardent unit tester, I think there is a difference between first-class support of unit testing and first-class forcing people to write testing code. We all know very few projects get started with full test suites in place. If tests do eventually get added, it is often done at a later date (i.e. not much TDD going on). The amount of Moya code that starts off with
```swift
I started off thinking that the verbosity of `TargetType` was a positive because of it's self documenting nature. But I think I have come around to see it differently. When I look at this:
```swift
MoyaProvider<SimpleApi>.request(.newsfeed) { //... }
```swift
Alamofire.request("http://api.com/newsfeed") { // ... }
My suggestion is to keep both listed and let whoever needs a JASON mapper decide which one fits their needs. Woah, that's harsh. Didn't have time to update all the things lately, dunno when will it happen so can't promise anything. I'm gonna leave the decision to you guys. Listing both makes the most sense to me too. Moya has been moving very quickly and making a lot of breaking changes, it makes sense that the community is struggling to keep up. Hopefully things settle down a bit after our 8.0 release.  This is probably a result of the underlying `Alamofire.URLEncoding`. If your API can take parameters encoded as JSON in the HTTP body, I would suggest  switching to `JSONEncoding`. The easiest place to do this would be in the `endpointClosure` when initializing the `Endpoint`. You can now use `TargetType.parameterEncoding` to accomplish this.  Hey @liliah.
If you have to use the current approach, I would note that the capitalization of `Authorization` also changed. That may be the source of the different behavior as well.
For debugging purposes, you can also utilize the `NetworkLoggerPlugin`. Turn on the curl output and then you can try the generated requests via CLI for another perspective on what might be going on. Were you able to get this sorted out @liliah? Glad to hear it is working for you! üëç  That is interesting @mihailstumkins. Would you mind opening up an issue to track that? `AccessTokenPlugin` and `AccessTokenAuthorizable` are new additions, so there is a possibility that they contain a bug that is not being tested for.  @shivayogic, in the code you posted, it doesn't look like there are any subscriptions to `rx_getAuthToken`, so the request won't be made. The `do` operator only specifies a side-effect to be performed. Try replacing the `do` operator with `subscribe`. Then uncomment the `expect.fulfill()` and see if this test passes.  Hey, I already updated dependencies in #842, which has yet to be merged. Might be better to update that (`rc.1` to `rc.2`) and update everything at once? :) Closing this, then. :)  You can take a look at #834 to get started, maybe? @rlam3 since you're using Rx, I'd recommend looking at this example in the RxSwift repo: https://github.com/ReactiveX/RxSwift/tree/master/RxExample/RxExample/Examples/GitHubSearchRepositories
```swift
throw error
```swift
When I perform an identical request with Alamofire...
```swift
Alamofire.request(
Also, which version of Moya are you using? @BasThomas
Although I am not aware of anything that might fix this particular issue, please give it a go :) @BasThomas ah, now I remember why I'm tied to this version: I'm pairing Moya with `Moya-SwiftyJSONMapper` which specifies `beta.4` Hey @jonlambert, `Moya-SwiftyJSONMapper` has been updated for `beta.6`. Could you try with that version and see if that makes a difference? Thanks @BasThomas but I've just updated, no luck I'm afraid! Still getting the same issues. Is my `parameters` property specified correctly? Hmm, I see your API.swift file uses `POST` instead of `GET`, might that cause the issue? @BasThomas ah that was a mistake when I tidied it up! It's specified as `GET` in the actual file. I'll edit the file attached accordingly. Hmm, don't see anything that'd cause it, then. @Moya/contributors, any ideas? @jonlambert it looks to me like an Rx issue. Are you adding your subscription to a disposeBag? @AndrewSB Yep - problem occurs both with and without the subscription being added to a DisposeBag. @jonlambert Any chance you could create a public repo that reproduces the problem? I'd jump in and do some debugging. Also, one thing to note... while your `Alamofire.request` example specifies `JSONEncoding`, you are manually encoding the parameters in the URL. In the Moya instance, these will instead be encoded as JSON in the HTTP body. This might not make a difference depending on your API code. I've actually run into a similar issue, only it's much more spotty than what OP describes... it happens occasionally on my sign in request. I'm using `ReactiveSwift` and `ReactiveCocoa` with `ReactiveMoya`. My network request is wrapped in an `Action<(), String, AuthenticationError>`, and it seems to be invoked, because my button disables properly, but no network requests show up on the server, in the network logger, in my local proxy, or anywhere. I have to leave the app and come back, which for whatever reason, forces the `Action` to send an error.
@justinmakaila: sounds like a headache üòï @justinmakaila I've had this issue sporadically too, just this time (luckily or unluckily?) it's consistently failing so I can examine it further.
```swift
let endpoint = Endpoint<ToshiAPI>(
Thank you so much everyone for your help!  Hmm... that doesn't fix it for me. If I get a re-creatable test case, I'll open a new issue. If you get a reproducible error @justinmakaila I'd be interested in following along. I have a feeling this isn't the same bug as the sporadical timeout.  @jonlambert, glad to hear that worked for you! With the introduction of #859, you can now set your `parameterEncoding` directly in your `TargetType`. This change is currently only available on `master`. Reopening issue - it worked in the instance above but I'm getting the same error using it elsewhere in the code. Looks like a similar scenario to @justinmakaila. Sorry to hear the issue is back. My recommendation would be to enable curl output on the `NetworkLoggerPlugin`, add it to your provider, and use the curl output to test the requests from your CLI to diagnose the problem. If you aren't seeing any output from the logging plugin, then something is probably going wrong on the Moya side and might be able to be reproduced in a sample repo for us to debug. @scottrhoyt There's no output from the logging plugin when I make the request - I'll attempt to reproduce the issue as soon as I can!  @scottrhoyt
```swift
let provider: RxMoyaProvider<API>
provider = RxMoyaProvider<API>(
stubClosure: MoyaProvider.neverStub,
``` Thanks for the investigation @justinmakaila! This is quite related to the issue brought up in #905. Side note: I don't think this is exactly related to the sporadic issue. In fact, while playing with this project, my team reported that they encountered the bug again. Requests began appearing in a proxy they had set up within 15-90 seconds of the initial "stumble". Still trying to dig in. This issue has been marked as stale because it has not had recent activity. It will be closed if no further activity occurs.
Yay Danger! :D After this was merged, when I run `pod install` in the Demo directory, I get this:
```bash
The problem seems to be a bug in Carthage, for some reason Carthage is choosing a really old version of Moya (3.0.0), and you're failing to build because that version is written in an older version of Swift.
A temp fix would be to add a greater than version specifier to your Cartfile, but we should loop in the Carthage maintainers to take a look.
Update your Cartfile to `github "Moya/Moya" >= 8.0`, and let us know if that works  This all seems very strange - Carthage shouldn't be looking at the demo.xcodeproj
Can you also try clearing your derived data and Carthage cache? When I run it with an empty project, I get the following result:
```bash
bas$ carthage update
*** Cloning Moya
*** Cloning ReactiveCocoa
*** Fetching RxSwift
*** Fetching Alamofire
*** Checking out Alamofire at "3.5.1"
*** Checking out ReactiveCocoa at "v4.2.2"
*** Checking out RxSwift at "2.6.1"
*** Checking out Moya at "7.0.4"
*** xcodebuild output can be found in /var/folders/ys/z545gl_90v7918jxtvv_2dzm0000gn/T/carthage-xcodebuild.u1E6C9.log
*** Building scheme "Alamofire tvOS" in Alamofire.xcworkspace
*** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
*** Building scheme "Alamofire watchOS" in Alamofire.xcworkspace
*** Building scheme "Alamofire OSX" in Alamofire.xcworkspace
*** Building scheme "RxCocoa-OSX" in Rx.xcworkspace
*** Building scheme "RxMoya watchOS" in Moya.xcodeproj
*** Building scheme "ReactiveMoya watchOS" in Moya.xcodeproj
*** Building scheme "Moya watchOS" in Moya.xcodeproj
*** Building scheme "Moya iOS" in Moya.xcodeproj
*** Building scheme "RxMoya tvOS" in Moya.xcodeproj
*** Building scheme "RxMoya iOS" in Moya.xcodeproj
*** Building scheme "RxMoya OSX" in Moya.xcodeproj
CompileSwift normal x86_64 /Users/bas/Documents/iOS/Test/Carthage/Checkouts/Moya/Source/Endpoint.swift
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
/Users/bas/Documents/iOS/Test/Carthage/Checkouts/ReactiveCocoa/ReactiveCocoa/Swift/SignalProducer.swift:1945:69: warning: 'buffer' is deprecated: Use properties instead. 'buffer' will be removed in RAC 5.0
CompileSwift normal x86_64 /Users/bas/Documents/iOS/Test/Carthage/Checkouts/Moya/Source/Endpoint.swift
github "Moya/Moya"
github "Alamofire/Alamofire" "3.5.1"
github "antitypical/Result" "2.1.3"
github "ReactiveCocoa/ReactiveCocoa" "v4.2.2"
github "Moya/Moya" "7.0.4"
github "Moya/Moya" >= 8.0
github "Alamofire/Alamofire" "4.2.0"
github "antitypical/Result" "3.1.0"
github "ReactiveCocoa/ReactiveSwift" "1.0.0-alpha.3"
```bash
bas$ carthage update
*** Fetching Moya
*** Fetching RxSwift
*** Fetching Alamofire
*** Checking out Alamofire at "4.2.0"
*** Checking out ReactiveSwift at "1.0.0-alpha.3"
*** Downloading RxSwift.framework binary at "Graham"
*** Checking out Moya at "8.0.0-beta.5"
*** xcodebuild output can be found in /var/folders/ys/z545gl_90v7918jxtvv_2dzm0000gn/T/carthage-xcodebuild.5A09ae.log
*** Building scheme "Alamofire macOS" in Alamofire.xcworkspace
*** Building scheme "Alamofire tvOS" in Alamofire.xcworkspace
*** Building scheme "Alamofire watchOS" in Alamofire.xcworkspace
*** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
*** Building scheme "RxMoya OSX" in Moya.xcodeproj
*** Building scheme "RxMoya iOS" in Moya.xcodeproj
*** Building scheme "RxMoya tvOS" in Moya.xcodeproj
*** Building scheme "ReactiveMoya watchOS" in Moya.xcodeproj
*** Building scheme "RxMoya watchOS" in Moya.xcodeproj
*** Building scheme "Moya tvOS" in Moya.xcodeproj
*** Building scheme "Moya watchOS" in Moya.xcodeproj
*** Building scheme "Moya OSX" in Moya.xcodeproj
*** Building scheme "Moya iOS" in Moya.xcodeproj
*** Building scheme "ReactiveMoya OSX" in Moya.xcodeproj
*using Carthage 0.18.1* Hmm, Carthage is consistently checking out an older versions of Moya (initially `3.0.0`, and `7.0.4`) when one doesn't specify `>= 8.0`.
What's stranger still, is that your Carthage is trying to build `Moya/Demo/Pods/Pods.xcodeproj `, which shouldn't be seen by Carthage (and isn't seen by the three of us) when the project is being built by Carthage...
almost exactly all of this, tweaked to work for Moya
### Subclass/extend `MoyaProvider`
```swift
```swift
```swift
```swift
protocol DecodableTargetType: Moya.TargetType {
```swift
```swift
```swift
public static var sharedProvider: ReactiveCocoaMoyaProvider<MyAPI>  = WellthProvider.DefaultProvider()
```swift
protocol MySpecializedProvider {
let networkProvider: MySpecializedProvider
``` @manas-chaudhari: I think using an approach like Ello would be best for your use case under the current Moya.
*sorry if I misunderstood your comment* üòÖ @petester42 I think we should go ahead with this, and we can fix watchOS issues if/when they come up. When you create a PR, can you close this issue?
"otp_code": [
"The selected otp code is invalid."
in Swift? Am I understanding this correctly? In that case, I really have no idea what is going on, but it seems related to the backend. Hmm, it doesn't seem like JSONSerialization is failing.
```swift
do {
a number of reasons:
closures do and knowledge of more internal¬†Moya API.
* It is sometimes ambiguous as to which closure you should choose for your
```swift
there is an opportunity to better conform to the Swift API Guidelines*
```swift
let provider = MoyaProvider<Target>(
AuthPlugin(token: "eyeAm.AJsoN.weBTOKen"),
## Alternatives Considered
Alamofire's `Request`. In addition, adding the extra lifecycle calls makes it
been modified by plugins).
there is an opportunity to better conform to the Swift API Guidelines*
```swift
s.subspec "ReactiveCocoa" do |ss|
ss.dependency "Moya/ReactiveSwift"
Otherwise, @ufosky, a PR to update the dependencies would be really appreciated! @BasThomas I haven't really been on my computer this weekend, I can make a PR towards the middle of the week, but Im available to look over a PR today! I've created ~#797~ #799. :)  Ooooh @mrfarukturgut, that's a doozie of a synchronization problem. I, personally, like to model problems with reative programming. Abstracting multiple, potentially concurrent `Request`s that require a common resource (an auth token in this case) as streams allow me to stay sane, and reason about the state of program at any point in time.
sounds good @mrfarukturgut! Let me know if theres anything else we can help with üòÑ
```swift
static let provider = ReactiveCocoaMoyaProvider<MyService>()
```swift
```swift
```swift
``` @tspecht, have you been able to solve your issue with the answers given? Let us know if you have any more questions! @BasThomas I'm just going to go ahead and close this.
@tspecht, Please re-open if your issue persists.  Github updated the markdown parser and we're getting some weird messages from our fellow @MoyaBot.
We could also test cocoapods in the same fashion, same goes for the Reactive & Rx targets
We could also test cocoapods in the same fashion.
We use cocoapods to install pods in the Demo app before executing tests. Is it fair to say this covers  cocoapods?
*Apologies if I miss understood your suggestions* üòÖ  Hmm, strange how CI didn't fail with Carthage then. Because carthage indeed seems te be tested during CI. ü§î You didn't misunderstand them at all @pedrovereza :smile:
@ashfurrow I think we've removed most of our hacks to support Cocoapods & Carthage, so it shouldn't be *too* hard to integrate manually (famous last words üòõ)
Oh no, seems like all of these have been commited incrementally... ( #773, #774, #775, #776, #777 )
*Apologies if I misunderstood your problem, and the issue is actually something related to Moya incorrectly embedding your headers* üòÖ As this seems to be an Alamofire issue, I'll close this for now. Please reopen if not!  @Moya/contributors, can anybody reproduce this bug? Might be good to take a look at this for `8.0.0`. This issue has been marked as stale because it has not had recent activity. It will be closed if no further activity occurs.
Thanks @jeryRazakarison! üòÄ
TODO:
@BasThomas is that because `Task` feels less cut and dry than something like `Method` or `Path`?
Does it only come up when building RxCocoa through Moya? Not if you just have a Cartfile with `github "ReactiveX/RxSwift" ~> 3.0`?
*** Fetching Moya
*** Fetching RxSwift
*** Fetching Alamofire
*** Checking out Alamofire at "4.0.1"
*** Checking out ReactiveSwift at "1.0.0-alpha.3"
*** Checking out Moya at "1b1edcf782bdf9eea0fa0c55c18275904d35d1e6"
*** xcodebuild output can be found in /var/folders/6y/2zb68tcs4nn6v899_jz0nmfr0000gn/T/carthage-xcodebuild.nCphgo.log
*** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
*** Building scheme "RxMoya iOS" in Moya.xcodeproj
*** Building scheme "Moya iOS" in Moya.xcodeproj
Trying to get a handle on what the issue is.
Fix for this issue: target Moya `8.0.0-beta.4`.
@loryhuz Any luck with this?
.catchError(parseMoyaError)
description: Strings.Error.NotLoggedIn.description))
Moya really affords itself to solving this problem
```swift
protocol ProxyAPIType {
```swift
```swift
```swift
> I don‚Äôt see the similar feature on Artsy Eidolon. Does your code support
@AndrewSB think you meant https://github.com/AndrewSB/Expirable :wink: I did, thanks for catching that @pedrovereza!
> carthage update --platform iOS
*** Fetching Moya
*** Fetching RxSwift
*** Fetching Alamofire
*** Checking out Alamofire at "4.0.1"
*** Checking out ReactiveSwift at "1.0.0-alpha.3"
*** Checking out Moya at "1b1edcf782bdf9eea0fa0c55c18275904d35d1e6"
Are you seeing anything different?
Are you interested in updating it just for the sake of updating it? Or to solve an issue you've noticed with using Moya?
Suggested in https://discuss.circleci.com/t/cocoapods-timing-out/7494
To get a better solution for per target timeouts, creating a new issue is probably the best idea, to get other people's opinions üòÑ    Hmm, I've always been using the `~>` syntax with pods, as per [the guides](https://guides.cocoapods.org/using/using-cocoapods.html). Anybody knows the difference? Should we update the README? @Moya/contributors
Does @WildDylan's answer solve your problem, @wenzhaot? Let us know it doesn't :)
Does @fjcaetano's answer solve your problem, @ohohco? Let us know it doesn't :)
CI errd out for some strange reason, attempting a rebuild
Attempting another rebuild now that #745 seems to have saved `cocoapods/repo/master`
I see, very interesting! A custom parameter encoding looks like your only option. Using one will be very similar to Alamofire custom parameter encoding. I looked at their issues and found a very similar question here: https://github.com/Alamofire/Alamofire/issues/965 I hope that helps, I'm sure you can do it üëç Once you've figured it out, I'd love to see more documentation in Moya around this, so please consider either posting your solution here or sending a pull request to add it to our docs.
Yikes! I'm not too familiar with how we work with Carthage. Updating our Cartfile might fix the issue, can you send a PR?
Cool, beta 3 is up and pushed for Carthage and CocoaPods üëç
@Ernest-su, what do you mean? Is this a possible bug? If you can create an issue for that, that'd be greatly appreciated!  Not sure, but shouldn't the `.Custom` be `.custom`?
@shivayogic usually you don't need to specify custom `httpBody`, parameters do it for you. If you want to add parameters that you want in every request, then `endpointClosure` might be the best way. However if your case is a specific one, you might try to replace the httpBody of a request in `requestClosure`.
Caching would be a level above Moya though
If you look closely at @MoyaBot's message, you can see it is generated by [Danger](http://danger.systems/). :)
The backend I'm dealing with is sending custom error code and message in response data in certain situations.
extension ReactiveCocoaMoyaProvider {
return SignalProducer<Response, Moya.Error>(value: response)
return SignalProducer<Response, Moya.Error>(error: .underlying(mappedError))
Nicer solution would be subclassing `ReactiveCocoaProvider` and overriding `request(:) method, but`request(:)`is not defined as open (not like in`MoyaProvider`).
So is it possible to define `ReactiveCocoaProvider.request(:)` as `open`?
Hey there, can you double-check the installation instructions for CocoaPods [in the readme](https://github.com/Moya/Moya#cocoapods)? Then run `pod update Alamofire Moya` and that should do the trick üëç
Currently there's no watchOS test target. Was that an oversight? Should I create one?
Are there any cocoapods users from @Moya/contributors that have some time to un-break the tests when installing through `pod`?
Well, I didn't know about this caveat, not sure if this is intended behaviour of Swift, but glad you discovered it and shared with us! Only one more comment from me and we are ready to merge. Thanks again!
Thanks @Viniciuscarvalho!
This also might mention some incorrect code(?)
@nanoxd, any idea?
CI is running on https://circleci.com/gh/Moya/Moya/608 , I just had to rerun without the cache.
I should read more closely at filenames üòÖ.
git fetch KelvinJin
We [typealias locally](https://github.com/Moya/Moya/blob/master/Source/Moya%2BAlamofire.swift#L13) here and use it in [Endpoint](https://github.com/Moya/Moya/blob/master/Source/Endpoint.swift#L23).
Will the change cause issues with Moya's usage of ParameterEncoding?
- [x] Reflect interface changes in Moya
‚ûú  Moya-Gloss git:(master) ‚úó pod lib lint
-> Moya-Gloss (2.0.0-beta.2)
[!] Moya-Gloss did not pass validation, due to 2 errors and 6 warnings.
yep! @orta
right, i found it too which why i thought it quite funky.
... line 577 in AF only compiles `StreamRequest` if the os is not watch, explaining why the lint fails when compiling the watchOS platform :|
Interesting, watchOS isn't being tested on CI, maybe our watch support has been broken for a while and we've just not noticed until now?
We're not even using the `StreamRequest` anywhere, we should be able to delete [this line of code](https://github.com/Moya/Moya/blob/25b8072a2cffa3baff3aea90ed94afed2c03b076/Source/Moya%2BAlamofire.swift#L9) without any problems.
@ashfurrow funny. AF didn't introduce this type until version 4 and i had no issues updating to support Moya 7, so likely not broken for so long :)
That's a good question! @justinmakaila can you chime in on this?
@wongzigii That timeout happens sometimes, I've restarted the build üëç
ReactiveCocoa -> ReactiveSwift `sendNext(_)`->`send(value:)` and `sen‚Ä¶dFailed(_)`->`send(error:)`
Weird, still getting `fatal: Not a valid branch point` on Danger.
(dlopen(/Users/distiller/Library/Developer/Xcode/DerivedData/Demo-eajasjdonmwjombqexluhpxvsaae/Build/Intermediates/CodeCoverage/Products/Debug/MoyaTests-Mac.xctest/Contents/MacOS/MoyaTests-Mac, 265): Symbol not found: _OBJC_CLASS_$_OS_dispatch_queue
Referenced from: /Users/distiller/Library/Developer/Xcode/DerivedData/Demo-eajasjdonmwjombqexluhpxvsaae/Build/Intermediates/CodeCoverage/Products/Debug/MoyaTests-Mac.xctest/Contents/MacOS/MoyaTests-Mac (which was built for Mac OS X 10.12)
in /Users/distiller/Library/Developer/Xcode/DerivedData/Demo-eajasjdonmwjombqexluhpxvsaae/Build/Intermediates/CodeCoverage/Products/Debug/MoyaTests-Mac.xctest/Contents/MacOS/MoyaTests-Mac)
Only danger is failing, and only because of a Circle issue, gonna merge.
We can change the name in another PR, going to focus on getting this to üìó
I am not sure what exactly should be in them - but they should be able to both help people with questions, as well as the people helping.
Let me know what you think; feedback is definitely welcome!
@BasThomas you're right, my bad üòÖ
``` ruby
``` ruby
Great question @juliengdt. The solution is to specify the branch in your Podfile; if you're writing a library that depends on Moya, I'm afraid the best solution is to document that they will need to do that in their own Podfiles.
Going to try Carthage while I'm at it. CI is üî¥ because of an issue with Circle, I'm waiting on a response in their community forum.
![Giphy](http://media0.giphy.com/media/D0WOL0ogZIoG4/giphy.gif)
Ace, thanks! So after merging, we can release like a 7.0.3 that adds Carthage support for Swift 2.3, correct?
@tpesce Can you check that everything works for you with the 7.0.3 release?
@Denis1992 please use specific Moya version, like:
pod 'Moya', '7.0.0'
Great thanks to all the contributors for this awesome project ‚ù§Ô∏è  !
We should get the CI to keep track of our Carthage support, I debated putting this in danger but it takes a very long time to run, and when I ran it locally Xcode crashed :-/
We could consider only testing one platform with Carthage, instead of iOS, macOS, watchOS, and tvOS. It might be worth the time tradeoff, not sure. What do you think?
Great work! I think keeping Carthage support working is an acceptable tradeoff for a slower CI, thanks Orta.
Sorry you're running into this error, it's possible I made a mistake when releasing 7.0.2 for Swift 2.3. Could someone from @Moya/contributors who is familiar with Carthage take a look and see if 7.0.2, the latest release, works with Xcode 8/Swift 2.3?
``` ruby
Is there a problem with `Moya` here, or the `RxSwift` branch? @gordoneliel
Hmm, what is your Podfile @zhaoyunyi? Can you download our Demo and check if it works for you? Because I've downloaded it, and `RxMoyaProvider` works just fine in the Demo. Another idea could be that you maybe forgot importing `RxSwift` at the top of your file along with `Moya`?
Are you using Cocoapods or Carthage? Is the version number `7.0.2`?
@dangthaison91 You need to explicitly specify that you want Moya 7.0.0. You can do this like:
pod 'Moya/RxSwift', '7.0.0'
- I've commented out ReactiveCocoa tests for now, because we didn't update the code from the extensions yet.
Great answer, @sunshinejr. @rlam3 let us know what else we can clarify, we're always looking for ways to improve our documentation!
Hi @rlam3, thanks for opening the issue. We actually have some auth-specific documentation [here](https://github.com/Moya/Moya/blob/master/docs/Authentication.md) I wanted to make sure you were aware of; the request closure has been specifically designed with OAuth and other forms of asynchronous authentication in mind. If you have any suggestions on ways to improve our documentation, please send a pull request and we can take it from there.
Oh no - alamofire deprecated the Int64 variants for the progress handlers
Two downsides to the approach I went with:
since alamofire 4 requires ios 9++ I believe we need to increase the deployment target of Moya to 9.0 as well
- [x] `sendAlamofireRequest` method in [Moya+Internal](https://github.com/Moya/Moya/blob/swift-3.0/Source/Moya%2BInternal.swift#L187-L221). (@sunshinejr, PR: #613)
Not really sure how to proceed - the build (Demo) fails because of Alamofire, Rx, Nimble, Quick, and does not give me any type information (with alt+click). Am I missing something @sunshinejr?
Thanks @sunshinejr @BasThomas, I'm testing pulling this in through Carthage right now üòÑ
@ashfurrow üòÑ
@sunshinejr looks great!
no experience with alamofire,  so I'm happy you offered üòÖ
Aye, we've bounced back and forth between Travis and Circle. I can't remember what made us leave Travis last time, but it's definitely a possibility worth revisiting.
@charlag Thanks! Because both [Alamofire](https://github.com/Alamofire/Alamofire) and [RxSwift](https://github.com/ReactiveX/RxSwift) have iOS 9.0 as a minimum deployment target.
Very strange! Still, we're one step closer. Is anyone else able to take a look at the failing macOS builds? I've got my hands full with the ReactiveCocoa stuff already.
What version of Moya are you using?
``` ruby
pod 'Moya', '~> 7.0.0'
@riksof-zzlalani Hey there! What your code is lacking is subscription. This is not _really_ a Moya problem, but problem with Reactive Extensions. So, a quick fix would be a following:
@riksof-zzlalani no problem! I think that the original problem @swabzz had should be resolved as of now, so I'm gonna close for now.
I have been taking a look, and it seems the `error` is not an optional. The unwrapping therefore makes no sense. Also, I found converting the `error` from `Error` to `Moya.Error` has no effect either, so that can be committed as well. That means you can the following in your closure:
let provider = MoyaProvider<MyService>()
I can merge+release this for Swift 2.3 before releasing a separate version for 3.0, _or_ we can just do it for 3.0. What does everyone think?
üò¢ @marcelofabri can you check for other breaking changes? If that's the only one, we can replace the `7.0.1` tag and hopefully no one will be the wiser.
@DenisLaboureyras is this issue still causing trouble?
> @colinta Is there a reason for you guys to choose FutureKit over PromiseKit?
I have also added the Swift syntax to a code block where it was missing, as well as removed some unnecessary `break`s in a `switch` statement.
Looks like this ran through Danger fine üëç
let provider = MoyaProvider(endpointClosure: endpointClosure)
Can you provide a sample using `Alamofire` and `Moya` so we can know what's happening?
enum SomeAPI {
var method: Moya.Method {
"lat": coodrintate.latitude,
"lon": coodrintate.longitude,
@rcholic Yes! only `NSData` should be on `multipartBody` everything else should be on `parameters`.
Hey @mingyeow, did you find a way to make it work as you wanted? Since there hasn't been any activity on this thread for some time, I am going to go ahead and close it. Please re-open or create a new issue if you would like to discuss further. Thanks.  üíØ
@orta there was a Danger failure [on the build](https://circleci.com/gh/Moya/Moya/358) that looked like:
Danger has failed this build.
That is a üíØ idea.
Cool! This is for Carthage support? Could you summarize the changes+motivation behind them in the PR? (For those of us not in the Carthage know-how.)
#if !COCOAPOD
import Moya
Ok, I think this is now at a point where it's usable through Carthage, testing currently.
This works for me through Carthage!
``` diff
index d9bcd86..bafb067 100644
@@ -9,7 +9,7 @@ import RxMoya
-    associatedtype T: RxMoya.TargetType, ProxyAPIType
private extension Networking {
@petester42 @ashfurrow @justinmakaila: I'm sorry this took so long, but I think it's finally done!
- [ ] check to make sure cocoapods install works
@AndrewSB I use Carthage as my dependency manager, and I believe @orta and @ashfurrow are the resident CocoaPods experts
@justinmakaila alright, I'll wait for someone familiar with cocoapods to test it, I don't want to merge this into master and have it break for everyone depending on this library through Cocoapods üò¨
Circle is complaining, is this a problem? @AndrewSB
Not familiar with CodeCov, but the algorithms to get a percentage might be different, explaining the difference. But the gap would still be pretty big...
- Updated Carthage's `Moya.xcodeproj` to reflect new files.
Going to rebuild so Danger runs.
Loosely related to #559.
@orta suggestions for the best way to display these colours? This is what I'm going for:
My only known hack here doesn't work http://www.tizag.com/htmlT/bgcolor.php - https://gist.github.com/orta/62febeb573df8e52965a5af7ddf5ba17
Images are the best way to go
though the purple is massive, and the rest are the right sized, would recommend throwng in image optim too
which is massive, but scaled inline here
Moya's gotten pretty big, I reckon it's time we get some stickers üéâ There are a few aspects to this issue:
Yeah, I'm leaning more and more towards the colours too üòÑ
specifically done bad on purpose to not think of design
It's like "lorem ipsum" but for visual design üòÜ
I'll take care of ordering them, the tricky bit is figuring out how to collect addresses. @orta you have experience with this. Google Forms?
![ashfurrow_2016-aug-10](https://cloud.githubusercontent.com/assets/498212/17555701/87c18796-5ede-11e6-93c7-285678ed2d4a.jpg)
@esttorhe Aye, I've addressed it to Berlin, but if you're not there anymore I can change it.
Esteban Torres
Twitter: @esttorhe (https://twitter.com/esttorhe)
Alright, I've sent these all out, let me know if you don't get them. Thanks again for everyone's work in making Moya such a successful community project, I'm incredibly proud of what we've built together.
Thank _you_, Ash!
There's a bit of hassle where we're currently using `typealias` to create Moya-specific types from Alamofire ones (for things like request methods, GET, POST, etc) that would need a little bit more code, but nothing too dramatic.
Yeah, seems likely. We've run into problems in the past on our Demo app (`import`ing more than one version of Moya). You're using Carthage, eh?
Well, CocoaPods will include all the specified subspecs in one module, named `Moya`. So if you have `pod 'Moya/RxSwift`, that will pull all the RxSwift Moya files _and_ the regular Moya files into one module. Carthage doesn't have an equivalent of subspecs (they're stance is that you should use multiple frameworks instead ‚Äì which we considered but decided against).
typealias TargetType = RxMoya.TargetType
And then you wouldn't see `RxMoya.`?
That's odd. Hmm. @Moya/contributors Anyone else seeing build errors with Carthage?
@kamil-tomaszewski It could be that in the original code, you had `let endpointClosure: MoyaProvider.EndpointClosure` without specifying the generic type of `MoyaProvider` and it confused the type system? Try `let endpointClosure: MoyaProvider<GitHub>.EndpointClosure` and see what happens. (It works if you don't specify anything because the compiler can infer from the closure signature what `MoyaProvider`'s generic type is.)
Empty Moya message is a known issue: https://github.com/ashfurrow/danger-swiftlint/issues/10
@colinta does that message look good?
Not sure what's best here, @justinmakaila I'll defer to you on this one.
It might be worth adding Danger's CHANGELOG as a fail back, even in this case it was missed, but the fail was legit:
- A certain number of .swift lines added/removed/changed?
``` ruby
``` ruby
Sounds good. I'll send a PR, thanks for bringing this up again Orta.
Weird, I'll check if danger has had any issues like that reported. @orta seen this?
So the way I would approach this fresh is that you don't necessarily need the state to be internal to the testing provider. When you create a provider in your tests, you can pass in an `endpointClosure` that accesses an `isFirstResponse` variable defined outside the closure, within the test. Set it to `true` before the test begins and the first time the `enpointClosure` is called, set it to `false`. Not sure what testing framework you're using ‚Äì if you provide the code that you've tried so far, I can give you an idea of how I would approach it.
It could be really cool to include both a short code snippet showing the technique and also a link to an open source project that actually uses that technique. I can find Artsy examples once we have a list of everything we want to demonstrate. @fruitcoder any techniques you think we should add to this list?
What's the `carthage` command you're running that's producing the error?
I'm not sure then, I don't use Carthage so I'm not the best to help out with troubleshooting.
Okay! That's tagged and pushed to CocoaPods, Carthage folk have their GitHub release, too: https://github.com/Moya/Moya/releases/tag/7.0.0
Mergin'!
Agreed, that's surprising behaviour. I'll open a separate issue to fix that, this looks great to merge.
Can any Carthage-savvy devs on @Moya/contributors help take a look?
I'll need some time to get used to the ü§ñAsh from posting as soon as I hit the merge button üòõ
It worked! https://github.com/Moya/Aeryn
@AsimNet Worst case:
Moya
Moya
Not really sure where to go next. It might require more digging around in Danger to figure out why this isn't working.
octo_client = env.request_source.client
unless octo_client.organization_member?('moya', pr_author)
@orta good idea, I was actually going to play around with [squad_goals](https://github.com/benbalter/squad_goals), maybe make a Danger plugin. For now I think we can merge without it, and add it in if squad_goals takes too long.
- `ReactiveCocoa (= 4.2.1)` required by `Podfile.lock`
- `ReactiveCocoa (~> 4)` required by `Moya/ReactiveCocoa (6.5.0)`
Been seeing this only on Travis. `bundle exec pod install` doesn't change any files locally. Might be the misuse of `~>`. Gonna poke around.
Super, thanks! Don't worry about the üî¥ Travis result, it's being fixed in #520.
@lucasp90 That's certainly puzzling! Especially since Moya gets Alamofire to do the parameter encoding, and I would have thought they would support Bool.
@jasl Good thinking linking to that. It seems to [fallback to String interpretation](https://github.com/Alamofire/Alamofire/blob/master/Source/ParameterEncoding.swift#L198) of plain objects, so `Bool` should work, right?
###### ElloAPI.swift
I'm going to close this issue. @mrfarukturgut, feel free to open it again if you still have questions!
- Second one for getting more than one (or to be precise, 0 or more) genres using array of strings:
Hmm, not easily, though you could use the `StructTarget` to use a `struct` instead of an `enum` for your `MoyaTarget`. I'm not aware of anyone doing this, if you find anything online that helps, please let us know üôá
Closing this for now. @iSame7, please reopen a new issue if you think there is an opportunity to improve the documentation around abstracting Moya.  Very strange, thanks for reporting this. Could you provide some more details so we can reproduce this? Is it on a device or just the simulator? iOS 8, 9, or both? The networking code that demonstrates the problem would be helpful, if you can share it. Thanks again!
do {
@nickolayl Pull Request üòâ
I'm üëç for getting rid of RAC 2 support, and I'm keen to remove the `nsError` property, since it just serves to erase the `MoyaError` type, and was only necessary for Objective-C interop.
Very strange, sorry to hear about this. Not sure what the issue could be. Usually, Xcode's error inspector will have a drop-down arrow beside the "does not conform to protocol" that says which function is missing, is it there?
Gotcha. Thanks for taking a look through ‚Äì I'm not experienced with Carthage either, so if you find anything, please let us know!
- [ ] Add ReactiveCocoa extension for requesting.
Definitely good stuff in this PR - and I like @hirad's changes in his experimental branch, FWIW.
@orta weird, we only run `bundle exec danger` in the post-test step, outside the Rakefile.
Tests pass, not sure why Danger failed but I'm gonna merge üíØ
I am a newbie to Moya, and I knew that the Moya is the most populate repo that integrate Alamofire and ReactiveCocoa.
case Zen
public var method: Moya.Method {
It's a bit weird to have to case `error as NSError`, maybe the `.Underlying` case should use `NSError` instead of `ErrorType`. Any thoughts?
@Miasma87 This is an error with your swift code:
@Miasma87 has this issue been addressed to your satisfaction?
1. Hard: Fork Moya and add NSURLRequest to the completion.  Then you'd have to maintain a fork, which is no fun.
let request = Api.Zen.urlRequest
@samirGuerdah Hey there! Did you get this working?
@bitomule what method did you end up using?
public var method: Moya.Method {
@ashfurrow yeah I was working under the assumption that perhaps Jimmy wanted to send an array as a parameter.
Yeah, good thinking. JSON-arrays-as-data is a personal pet peeve ‚Äì I really wish API developers would stop doing it :disappointed:
I think that's a smart move. Maybe make the parameter for `done()` be a `Result<NSURLRequest, ErrorType>`? It would be a breaking change, but we already have several of those merged in master, so now is an idea time to make this kind of change. Is anyone interested in sending a PR?
Good point @nuudles! üëè  What do you think about it @kokhong20? Is it okay with you? Also it would be probably the last point before we can merge this one I think.
Hey Shai!
**Edit:** You could also use our extension for Argo, which @aschuch pointed out. üí™
@colinta @petester42 @sunshinejr @esttorhe Any questions?
No worries! April is really busy for me, and I wanted to make sure Moya would be OK if I wasn't available.
@Moya/contributors does someone want to try continue work here?
Just a note, I had previously sent an invitation to join the Moya organization ‚Äì no pressure at all! ‚Äì just wanted to make sure you had received it.
Hmm, sounds like a different problem. Discussing here sounds fine.
Afraid I'm not very knowledgeable about Carthage, looping in @Moya/contributors to get another set of eyes. I didn't see any related [issues](https://github.com/ReactiveX/RxSwift/issues) on RxSwift or [ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa/issues). What would help diagnose the problem would be the contents of your Cartfile.
``` Swift
var method: Moya.Method {
``` Swift
var method: Moya.Method {
``` Swift
var method: Moya.Method {
``` Swift
let provider = MoyaProvider<MyService>()
@Dschee did you try MultiTarget maybe?  Super, thanks!
This is a pretty serious issue, but I don't have sufficient Carthage experience to fix it. @Moya/contributors anyone have suggestions?
I also like this implementation!  Feels very "Moya-esque" :smile:
The only thing I don't like about mirroring the `Alamofire.ParameterEncoding` to a custom `Moya.ParameterEncoding` (rather than the typealias) is that we tie ourselves to `Alamofire` updates. As their `ParameterEncoding` changes, we have to update ours. I'd rather us be able to abstract it in `Moya` land, transforming it into `Alamofire` land.
Hi @jasl ‚Äì thanks for the bug report. I'd like to ask you to rephrase your comment about carelessness, as it could be interpreted as an accusation; we aim to discuss bugs without calling anyone's abilities into question. Thanks for helping keep Moya a positive place :bow:
The problem looks like Moya vends its own [Error type](https://github.com/Moya/Moya/blob/4a834fcc96ed239d1f8da621c0ca4d16162d0a9d/Source/Error.swift#L3). It's an `ErrorType` so every cast to `NSError` will succeed, but I suspect the Swift compiler is getting confused. Try this:
Stubbed responses, for one (testing as a first-class consideration).
> I like that Moya formalizes the pattern, as it does seem like a side thought in the Alamofire readme. But are there other intentions/benefits compared to it?
Yup, the main features of Moya are:
But philosophically, Moya represents a framework that encourages developers to think about the network calls they want to make upfront, to encourage more thoughtful coding.
Ash Furrow
https://ashfurrow.com/
- I'm sure I missed some, @jasl please add the ones I missed.
Thanks again @jasl for your great ideas :cake:
Ash Furrow
https://ashfurrow.com/
Probably related to #428 and #369 as well.
Thank you for your input, @Dschee ! üéâ
Sounds like you need a custom parameter encoding. In my answer above I suggest using `.JSON`, but you'll need to use `.Custom` instead. We piggy-back on Alamofire's custom parameter encoding, so you should be able to follow [their docs](https://github.com/Alamofire/Alamofire#parameter-encoding) to create a custom param encoding to use in the `endpointsClosure`.
To be honest this is outside my experience ‚Äì I'll try to help with an questions you have, just me know üëç
This is an alternative implementation of #408 (in lieu of #424).
MoyaProvider<MyStructAPI>
MoyaProvider<StructTarget<MyStructAPI>>
Cons:
- More verbose for developers using structs
I must give props to @sunshinejr for the cool use of reflection, but I would actually steer clear of that in a library like Moya.  Keep it simple, keep it explicit, let individual developers choose to implement something more interesting & complex.
But that's just my opinion! :smiley:
In this PR we extracted from `MoyaProvider`:
2. Release a patch for structs in Moya.
Yeah, makes sense! But, I don't know if it possible. #424 relies on `MoyaDefaults`, because there was problems with type inferring üòî
- we have TargetType as a MoyaProvider's Target,
But it is still a breaking change. üòî
``` objc
``` objc
``` diff
-typealias StubClosure = TargetType -> Moya.StubBehavior
+typealias StubClosure = TargetType -> (Moya.StubBehavior, Response)
As per issue #408, I'm sharing with you the solution I've come up with to the topic, which is structs in Moya. The general idea was a perfect start by @Matthijn followed up by a really good direction by @colinta
## Issues
public let method: Moya.Method = .GET
Hi there! I want to clarify what you're asking for ‚Äì are you suggesting a change to Moya's behaviour? What change are you looking for?
As far as I know, `subscribeOn` isn't typically used, because its the observation that matters and its the observation that has the side-effects (not the subscription). Does that make sense?
> This operation is not commonly used.
Still not sure what's going on here, will try to take a look.
@ashfurrow We will need an invite for @tbaranes :beers:
@tbaranes no pressure to accept the invitation ‚Äì if you'd like more information on what that means, check out our [contributor guidelines](https://github.com/Moya/contributors) and feel free to reach out with any questions.
Could you describe your setup in more detail? Are you using CocoaPods or Carthage? I looked through Alamofire's recent issues and didn't see anything that might cause this either.
@tbaranes Could you please try to clone the repo, then use the pod from the cloned repo (using the path in Podfile, like in Demo project) and go from commit with version 6.1.3. to the latest one? We could get the commit that produced the error and work with it. Other than that I don't see a reason for the behavior on the spot. :cry:
@tbaranes I'm not sure I quite follow the remaining issues, could you clarify? Is this a case of not calling `closure(request)`?
return "/api/activities/\(id)/"
Also, don't worry, swift is evolving all the time, no-one knows everything about it, learning is a key. Keep it up  üéâ
@colinta I use multiple providers because I have multiple endpoints I am calling (e.g. an auth service and a content service) so I like to have different named providers for readability (I also use different TargetType enums for each to stop them getting too complex)
@matteogazzato No problemo :beers:
Ash Furrow
https://ashfurrow.com/
Ash Furrow
https://ashfurrow.com/
Interesting! I had not thought of just using a `typealias`! My only concern would be making sure that Moya users don't have to be aware of Alamofire, but the unit tests don't `import Alamofire`, so it _should_ be fine. Cool!
``` diff
It looks neat! I also thought about structures, but I really like enums' type safety. I'll take a closer look today/tomorrow if we could use something from it @ashfurrow. Also, great job @Matthijn üí£
- While the enum code has more boilerplate, it has less magic and so less of an understanding curve which is important to me in an open source library
i might be biased though, I do love swift enums :)
I'm still unsure of the best approach to take here, but whatever we decide it will be done with careful consideration :+1:
let method: Moya.Method = .GET
struct UserResource: Moya.TargetType {
case Resource(Moya.TargetType)
4. Migration requirements.
How well or poorly an `enum` scales to handle an API is subjective; it varies from person to person, and even from endpoint to endpoint. It might make sense for a project to use both, for example. I like this technical approach because it maintains our current philosophy but provides flexibility for anyone who needs it.
Thanks for continuing to encourage such a community-based project, @ashfurrow!  Looking forward to see where this goes.
And that should work. You can check out the different options for parameter encoding [here](https://github.com/Moya/Moya/blob/aece4ebe3ad3cab946d8df93de4ee72c7024c8e7/Source/Moya%2BAlamofire.swift#L9).
There is a good description of NSURLCache here: http://nshipster.com/nsurlcache/
Hmm, tricky question ‚Äì you've got a lot going on here, and I want to make sure I understand your question first.
aaaand it works. So if this is your custom method, make sure you test it correctly or just use the method from bridge library. Hope that now you will resolve it!
Nah, that's just Carthage. We need to update our podspec.
I've not used the ReactiveCocoa extensions with Moya. @justinmakaila would you take a look when you get a chance?
I _think_ that's what's going on. What you're looking for, I think, is a plugin to log the response data formatted as JSON, right? I think that's a reasonable request ‚Äì we should consider creating a new plugin, or even just adding an option to our current one to accommodate this.
If you're using RxSwift or RAC, you can use `flatMap`. I don't know if this approach is common, but [I do this](https://github.com/artsy/eidolon/blob/24e36a69bbafb4ef6dbe4d98b575ceb4e1d8345f/Kiosk/Bid%20Fulfillment/BidderNetworkModel.swift#L29-L37).
Hopefully this resolves #385. @yinanfang Does this clarify things?
try/catch is much much more common in Swift ‚Äì it replaces Objectice-C's NSError model, actually. In this case, it's due to JSON parsing.
Thanks @colinta !
var responseType: ALSwiftyJSONAble { get }
var responseType: ALSwiftyJSONAble.Type {
Great idea! Will wait for :green_apple: then merge and release.
Fabo ‚Äì this has been released as 6.1.1, thanks! :tada:
@marchinram: Is it possible to use a plugin? That would be awesome!
@jasl Yeah, sometimes we want to stub immediately and sometimes we want a delay. Always in unit tests, of course.
case .CustomStubbing(closure: T -> Int)
So yeah, lots of interesting ideas in here, some I like and some I don't. I'm not sure I'm the best arbiter of what should/shouldn't be considered though ‚Äì Moya is too close to me and I don't think I can be impartial.
###### Some more questions
So you have Moya & Result & Alamofire added to project and all of them specified in script?
That's strange, RxSwift should already be using the new error-handling. You can use the Swift `case` syntax to unwrap the enum and the underlying data: https://github.com/artsy/eidolon/blob/24e36a69bbafb4ef6dbe4d98b575ceb4e1d8345f/Kiosk/Bid%20Fulfillment/PlaceBidNetworkModel.swift#L49
Yeah, I understand that perspective. But I'm not sure that level of extensibility is right for Moya's level of abstraction.
Since Alamofire is a dependency, should we consider prefixing or renaming `Response` to avoid this potential confusion? The fix is admittedly simple once you realize what's going on (referring to the type as e.g. `Moya.Response`), but may not be obvious to people who haven't encountered it before.
Definitely, thanks for opening the issue @tomburns.
Thanks @aamctustwo ‚Äì much appreciated :bow:
Not sure if this is a related issue but was a similar obscure result. I'm guessing you have to be explicit in such a case because the compiler shouldn't assume you don't want to add other types of objects to the array later.
@Moya/contributors any suggestions here?
Yeah, that _compiles_ but as I tried to describe in my earlier comment, it betrays the philosophy of Moya. Conditionally casting a parameter to a specific enum (or one of several enums, to expand to many) is... icky.
That's unusual! And also bad! That shouldn't happen! A PR to fix this would be most welcomed. Hopefully there's a way to retrieve the AF request object without side-effecting.
Thoughts? Feels?
Sounds good, thanks! In the AF issue, they had some guidelines about how to create a manager with good defaults.
public final class func DefaultAlamofireManager() -> Manager {
configuration.HTTPAdditionalHeaders = Alamofire.Manager.defaultHTTPHeaders
let manager = Alamofire.Manager(configuration: configuration)
return .MoyaError(moyaError)
var method: ReactiveMoya.Method {
var parameterEncoding: ReactiveMoya.ParameterEncoding {
case Custom(ErrorType)
case MoyaError(ReactiveMoya.Error)
func producer(provider: ReactiveCocoaMoyaProvider) -> SignalProducer<ResponseType, ErrorType>
class MyAPIProvider: ReactiveCocoaMoyaProvider<MyTarget> {
// custom parsing and processing
You can see I've taken something of a middleground over the usual enum approach, versus the innovative one above. @mpurland, it would be incredible if you could write this up somewhere and add a link to the Moya docs, or even better contribute back to them. I love the economy of the protocol extension, faking a base class without the cruft of inheritance with opt-in behavior!
func producer(provider: ReactiveCocoaMoyaProvider) -> SignalProducer<ResponseType, ErrorType>
@mhuusko5 FYI
And yup, i think this is not highest-priority thing because this is an issue mostly for first Carthage run with Moya at Cartfile.
I've checked Carthage and found zero answers about such possibility.
- This is an issue and Carthage actually has way to solve this
- This is an issue and Carthage has no ways to solve this (probably i'll create an issue on it's repo than).
- Tags
- Separate branches (seems to be painful to support)
Totally ‚Äì everyone has different needs :)
and code:
public var method: Moya.Method {
So a thing here ‚Äî returning empty string as path looks a bit creepy.
var method: Moya.Method { get }
Basically, GitHub has its own idea of git tags called "Releases", and Carthage uses _releases_ instead of _tags_ when you specify GitHub.
So the following two lines in a Cartfile are _not_ necessarily equivalent.
github "Moya/Moya"
Oh, right. Carthage means different things between specifying "git" and "github" ‚Äì we've seen this before, sorry it's not fixed yet.
For anyone interested in the problems with releases vs. tags in Carthage, check out the end of this thread: https://github.com/Moya/Moya/pull/329
Hello, sorry you're experiencing this error. Not sure what's going on, as I'm not as familiar with Carthage. Any ideas @justinmakaila ?
@minhoryang To fix this right now you can use:
`github "Moya/Moya" "5.1.0"`
+10000 :tada: :+1:
Neato :ok_hand:
But Orta, the projects are _not_ strongly correlated! The RAC extensions to Moya are simply extensions to provide helpful wrapping. The core value of Moya lies in its endpoint modelling types, and if the extension subspecs went away tomorrow, we would be no worse off. There will be very little requirement for lockstep updates as long as the extensions only use public API, just as they should. A strong adherence to semantic versioning would obviate many issues. I agree that lockstep repo updates suck, but that wouldn't be the case here.
That's idealistic, not realistic, I bet almost everyone who maintains and contributes to this project uses RAC/Rx with Moya. I had to argue that it was worth building a non-RAC version at all at the start. Again, I'm not the one who would be doing the work maintaining and keeping this all running, so it's not my neck on the line here.
> I had to argue that it was worth building a non-RAC version at all at the start
See https://github.com/mpurland/Specs/blob/rac-update/Specs/ReactiveCocoa/4.0.4-alpha-4/ReactiveCocoa.podspec.json
Makes sense ‚Äì the Ruby ones are a bit easier to reason about.
I'm not sure why they insist on declining, but it's been that way for as long as I can remember ‚Äì far before Carthage.
Thanks @mhuusko5
Thanks again @mpurland ‚Äì great work!
@mpurland of ReactiveCocoa? Not sure.
I have no feelings towards Carthage support. If that's a thing we can do (easily) to help them, sure sounds good :+1: My only requirement is that it gets automated: https://github.com/Moya/Moya/blob/e069bc22e28b2d69cfcfbbae3cb15304d112fbd6/Rakefile#L27-L57
Oh I see, so specifying GitHub instead of Git in Carthage means very different things, one uses GitHub-specific thingies and the other just uses tags? I did not know that ‚Äì seems silly. Anyway to create a "release" from the command line?
@mrahmiao Great, thx
I agree with @wangshengjia about the `Plugin` mechanism for manipulating requests can have problems. We could solve this with some type of requirements, ordering, priority, or another type of streaming/proxy solution (something along the lines of https://github.com/typelift/Aquifer comes to mind).
enum TestApi {
let endpoint = TestApi.Login(userString: "Ash", passwordString: "password")
Changes:
Nope, just intermittent ¬Ø\_(„ÉÑ)_/¬Ø
Changes:
Huh, cool. Let's wait for :green_apple: just in case.
It's sort of hacky but it works properly. I have a lot of thoughts on how we are supporting carthage currently which seems like a bigger headache than it should be or worth. I'll open an issue about changes we could make to make everyone's life easier.
> supporting carthage currently which seems like a bigger headache than it should be or worth.
The parameter encoding you're describing is pretty custom ‚Äì query string in the URL and a JSON body ‚Äì so you should use the `.Custom` parameter encoding type. It takes a closure that modifies the `NSURLRequest` and returns it. You can see the source [here](https://github.com/Moya/Moya/blob/731db29d6a68d350ef97ad059e881f361dc35e3f/Moya/Moya.swift#L38-L57).
- Revert type names back to having the Moya prefix
It appears this was already brought up in the description of #310. Definitely something we should fix before doing a release with all of these new changes lest we break Carthage support.
Cool. One thing, @swizzlr: there is absolutely no apologize necessary ‚Äì we're grateful for your contributions and you should not feel like you've let anyone down.
Depends on #304
I thought we were going to keep the `Moya-` prefix on these types, what's the advantage of removing it? Advantages to keeping it:
Unambiguous origination. A `MoyaResponse` came from Moya. Where does `Response` come from? I wish Alamofire used a prefix on these generic names, too.
Seems we're at a crossroads. I honestly don't have a strong opinion either way, but I recognize that this is a big shift and it deserves thoughtful consideration. Trying not to spam @Moya/contributors but I think this deservers further discussion.
It does seem that way, and it just occurred to me that this change doesn't _remove_ the `Moya.` prefix, it just makes it optional. With that in mind, I'm less opposed to it.
NOOOOOOO WE
I got carried away closing #293.
Significant changes:
- `MoyaTarget` is now `TargetType`
- `MoyaResponse` is now `Response`
- `MoyaProvider` is now `NetworkResourceProvider` (discussion welcome on improving this)
I'm good with all the renames except `MoyaProvider` ‚Äì I know it's not necessarily "Swift", but I really like having the library name somewhere in there. Maybe it's just me ¬Ø\_(„ÉÑ)_/¬Ø
I would add that I have always appreciated the names `MoyaTarget` and `MoyaResponse`. Reminds where those objects originated.
You ever change one thing, and then change something else, and then before you know it you're crying on the bathroom floor and the compiler is screaming in the kitchen?
Guess no one has yet tried to submit ReactiveMoya with Carthage yet.
This commit removes the MOYA_VERSION env var as it was out of date and not used everywhere. I don't think it's needed.
If i'm not mistaken that was an error from Ô£ø that should be fixed by now.
Not insignificant time is being spent maintaining the RACSignal extensions, as well as the non-RAC3+ provider. We should consider officially marking these as deprecated for some time, before eventually removing them.
Changes:
- Forward underlying errors when cast to MoyaError does not work
- Update ReactiveCocoaMoyaProviderSpec tests to use the `SignalProducer` variant when possible.
And it _is_ public, unless you mean unreleased. It publicly conforms to `Equatable`, using up that conformity in a non-standard way, which was my point. Out of curiosity to understand: why is it thought that two "same-operation" errors from two entirely different responses are "equal?" Or two completely different `NSError` objects in `.Underlying(err)`? `.Underlying(errorA) == .Underlying(errorB)` evaluating true in any scenario other than where `errorA == errorB` seems lacking in sanity to me. As someone (also a user of Moya) who would potentially want equality checking with the behavior I describe, and would be forced to implement it OUTSIDE of `Equatable`.
> changed it to be a matcher
Todo:
You know, I have no idea. I need to experiment and find out. I'll make a playground when I get to work (~1hr)
@ashfurrow sorted. Cancellable tokens should keep track of canceled state because otherwise they're really just a glorified completion handler.
Well, I'd rather have a result type, because otherwise everyone's just going to be writing `let e = error as! MoyaError`, but what do I know checked exception bleh etc
> Well, I'd rather have a result type, because otherwise everyone's just going to be writing `let e = error as! MoyaError`
That also aligns more closely with the RAC signal type for requests:
Changlog:
- Fix RACSignal tests not being run
Hmm, yeah. I mean, I know GraphQL is getting more popular so I think we should consider first-party support at some point. But for now I'm fine leaving it up to the user.
@justinmakaila I've since used a GraphQL API, want to pick up the conversation on this? How did the framework go?
public var method: Moya.Method {
public var task: Moya.Task {
> iOS https://github.com/apollostack/apollo-ios with how I use Moya and
> Alamofire to make network requests.
Any thoughts on my first point above? Alamofire only uses `NSError`, so the `MoyaError` case that covers the domain of Alamofire errors should provide an associated `NSError`, not `ErrorType`.
I personally like ErrorType ‚Äì it's convertible to NSError.
Should an issue be opened on Alamofire? I do believe it would be an API breaking change but I think it's probably worth pursuing. The docs on swift errors suggest using the ErrorType pattern is the way to go.
I think the part that may be of interest is the custom wrapping of any NSError to a type of our choosing.
Cool, that approach sounds reasonable. @justinmakaila @petester42 do either of you have opinions about it? Whatever is more idiomatic for RAC 4.
It might be worth doing what AFNetworking does and just not supporting manual installation, you need to have a lot of prerequisites set up for Moya, and the more useful interesting stuff can only really happen when you have a larger dependency graph, of which doing manually is just a waste of time.
```swift
```swift
```swift
Some awesome features of Moya:
-> Moya (4.3.1)
[!] Moya did not pass validation, due to 3 errors.
Hmm. No dice here. Looks like it's problems with RAC on the watch/tv platforms. I'll try to look into it shortly.
Interesting ‚Äì I think it's likely a relic of when we were keeping track of inflight requests, and deduplicating new ones. I think @justinmakaila would be able to give a concrete answer about it.
Going to reopen this, as @petester42 pointed out the issue is in the RxSwift provider, too.
### Carthage Changes
### CocoaPods changes
- CocoaPods users of Moya will see no changes, other than a newer RAC version.
- Carthage users of Moya now have the lovely advantage of Carthage itself resolving the deps of Moya.
- ~~What purpose do/did the separate Rx/RAC Moya podspecs have?~~
The podspecs provide Carthage-compatible build targets in the Xcode project, but also complicate unit tests. I don't believe their needed after this PR ‚Äì getting rid of them would be :100:
Ash Furrow
Heh, except I'm trying to use Moya at my job. ;)
``` ruby
pod 'Moya', :path => "../"
pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya/RxSwift', :path => "../"
Reading the rest of your comment, though the following with CocoaPods:
pod 'Moya', :path => "../"
pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya/RxSwift', :path => "../"
Not clear on the need to use Carthage, but that's fine. I realize Mantle complicates things.
Yeah, we know that the tests are using different frameworks. In an ideal, CocoaPods world, we would build _one_ Moya framework with all the subspecs. But we need to accommodate Carthage, so we instead have these extra podspecs for them. It leads to duplicated code in the tests because there are several different `MoyaTarget` protocols depending on which framework you've imported.
The goal is still the same for this PR: restructure things a bit so that the project "natively" supports Pods _and_ Carthage.  That part is done. Can we come up with a concrete list of things left to do that are required to consider this PR ready? I'm more than happy to do the work and finish it up, I just need to know what's actually required. Otherwise, if you feel there's more to discuss, and perhaps too much for here, I'm not opposed to a call.
You just need a new tag for Carthage, right? Can do :)
SimDevice: SimDevice : iPhone 6 (CEBBD79A-B6C1-4A02-BD33-56BBCBDED03E) : state={ Shutdown } deviceType={ SimDeviceType : com.apple.CoreSimulator.SimDeviceType.iPhone-6 } runtime={ SimRuntime : 9.0 (13A340) - com.apple.CoreSimulator.SimRuntime.iOS-9-0 }
Misery loves company :)
Ash Furrow
http://ashfurrow.com
> On Oct 21, 2015, at 9:01 AM, istvanelekes notifications@github.com wrote:
Fantastic, thanks a lot @bojan!
In my experience with Carthage, the last version (`2.0.2`) is picked up.
Thanks @aschuch.
Hi there. I've noticed that this library is set up to resolve its own dependencies via CocoaPods, but shares the Pod project's framework targets to be built as shared so that Carthage can see them. So far so good.
The "issue" is that when installing Moya via Carthage, if you were to simply list Moya itself as a dependency, it will not fetch for example, Alamofire, which is a mandatory dependency of Moya.
github "Alamofire/Alamofire" ~> 2.0.2
github "Moya/Moya"   ~> 2.4.1
github "ReactiveCocoa/ReactiveCocoa" "swift2"
The way this project is set up for Carthage is seemingly less than ideal. Is there some way that it can be changed to better support it (while retaining your support for CocoaPods)?
The alamofire PR looks like a good idea
Our team is currently working on a framework we plan to make available via Carthage, and would be nice to make usable via pods as well. So I'm genuinely interested from an author perspective what you feel the burdensome work deriving from such changes could be. It could help us save some time in the future potentially also :)
We ran into confusion at first when realizing Alamofire was missing when it's a direct dep of Moya, and then again when we adopted ReactiveMoya and ReactiveCocoa was missing. I can't quite see how maintaining a 2 line file is determined to be too much work; I think it could be at the very least a good compromise?
Otherwise, it reasonable to at least put proper usage instructions in the README? Saying use `github "Moya/Moya"` and that alone is gonna wind up with people going through the same aforementioned confusion, however brief (though this will be hard on beginner users of Carthage, which many are w/ it being new).
Like Orta stated already `Moya` grew to a ¬´too complex¬ª scenario where there's no ¬´works for all¬ª solution; I think supporting `Carthage` via the underlying `Pods` project works for _most_ of the cases and having a more ¬´detailed¬ª installation instruction for `Carthage` on the `README` would satisfy those scenarios not covered by the `Pods` project.
Updating the README w/ proper directions for Carthage is an understandable compromise to the original issue topic. I think that is helpful from the perspective of someone using the library. :)
let provider = MoyaProvider(requestClosure: requestClosure)
:scream: beat me to it Ash :smile:
Strange, our dependency on RxSwift is [~> 2.0.0-aplha-1](https://github.com/Moya/Moya/blob/a8a491bf14ab7ad4ce7793a204868fd05f03a4dd/Moya.podspec#L40).
Esteban, it'd be great if you could do this ‚Äì I'm travelling and don't have good access to internet. If you need push rights for CocoaPods trunk, let me know.
``` ruby
``` ruby
-> Moya (3.0.0)
Sure ‚Äì it surprises me a library as popular as Alamofire doesn't have tvOS support on trunk yet. Putting the podspec on a branch for now sounds like a good plan.
``` ruby
# Fix for `Alamofire` with `tvOS` support
What an odd discrepancy. @Thomvis is there any reason the CocoaPods trunk version doesn't have TV support?
Opened https://github.com/ashfurrow/ReactiveCocoa/issues/4 to remind me
Make that `4.0.2-alpha-3` ‚Äì had a mistake in the podspec :grimacing:
Hey @aschuch ‚Äì you mentioned we can do in-place modification of the `Request` objects, right? I'm thinking that may be better than having the plugin functions return their own request ‚Äì less overhead. Thoughts?
I would like to propose a plugin system for Moya.
`MoyaProvider` can now be initialized with a set of `Plugin`s.  A `Plugin` receives callbacks to perform side effects wherever a request is sent or received.
- I saw the note about avoiding protocols ‚Äì let's see if we can think of something besides inheritance? Nothing comes to mind, though ...
Nomenclature is hard, let's give it a think :)
And don't forget about the changelog! :poodle:
Wow :scream:
Great idea and implementation @aschuch :bow: :ok_hand:
Leaning towards protocols, personally. Will have time to review shortly.
@aschuch I'll send a PR over to your fork ‚Äì looking forward to hearing what you think.
Aye, that's a good idea @aschuch
But in order to do this in a plugin, we would need to expand the plugin API to include an ability to delay/cancel requests. Not unreasonable, and a "MoyaRequestThrottler" could be really handy!
Alamofire treats them as optional and behaves differently if they are `nil`, so we should allow optionals, too (I guess some servers differentiate between an empty HTTP body and a `nil` one).
Hmm, still showing as conflicted here:
return moyaResponse.statusCode != 404
Sure! So, we're still using the RAC 2 API :cry: but the principles are the same.
func XAppRequest(token: ArtsyAPI) -> RACSignal {
let validTokenSignal = RACSignal.`return`(appToken.isValid)
Actually, I'm pretty new at diagnosing Carthage issues. @justinmakaila does this look familiar?
Again, not terribly familiar with Carthage (we _just_ added support) ‚Äì what happens if you remove the `Alamofire` and `ReactiveCocoa` lines from your Cartfile, out of curiosity? And just have `Moya` and let Carthage bring in the dependencies for you?
Then have a new variable on the `MoyaProvider`.
The downsides are that we need to keep versions synced between the three podspecs (I've written a `rake` task to automate this). Additionally, if the public APIs to RxSwift or ReactiveCocoa change, Carthage users will need to continue to use the versions required by the CocoaPods builds. I actually kind of like the idea of one Moya existing in parallel on two dependency managers.
- Re-added `Pods/` directory for Carthage support.
`MoyaResponse.swift` is included in both Carthage-specific podspecs, but it only appears once in the `Pods` project's file pane. The file is a member of both targets, but only appears once. The ambiguity between the files referenced in both frameworks led me to split up the unit tests into distinct files (to avoid having both `MoyaResponse`s in scope). I also tidied them up a bit.
~/d/i/l/moya_cart ‚èõ  cat Cartfile
~/d/i/l/moya_cart ‚èõ  carthage update
*** Fetching Moya
*** Checking out Moya at "e6a00bff2b51838e4449afac952b3937d1cfa6de"
*** xcodebuild output can be found in /var/folders/mk/gxhr550d5mbcv5s9_f61x84h0000gn/T/carthage-xcodebuild.uPEpwO.log
*** Building scheme "Moya" in Pods.xcodeproj
*** Building scheme "ReactiveMoya" in Pods.xcodeproj
*** Building scheme "RxMoya" in Pods.xcodeproj
~/d/i/l/moya_cart ‚èõ  ls Carthage/Build/iOS
@justinmakaila Looks like CocoaPods can't handle having frameworks with the same module name.
[!] The 'Pods' target has frameworks with conflicting names: Moya.
This means that users will need to `import Moya`, `import RxMoya`, or `import ReactiveMoya` respectively. Switching flavours would mean a find-and-replace. Kind of a pain, but people don't often switch flavours, and it's not too much effort. It also fits better with the Carthage folks' philosophy.
*** xcodebuild output can be found in /var/folders/c9/qfv9zg9n23v5yt50skqpmtg40000gn/T/carthage-xcodebuild.5IPQce.log
*** Building scheme "Moya" in Demo.xcworkspace
*** Building scheme "ReactiveMoya" in Demo.xcworkspace
*** Building scheme "RxMoya" in Demo.xcworkspace
Instead of removing the no-longer-needed [ReactiveMoya](https://github.com/Moya/ReactiveMoya) repo, we should transfer its ownership to someone so that GitHub redirects will work long enough for people to update their configs. @justinmakaila would you like it?
OK, thanks @justinmakaila!
Hmm, @justinmakaila I can't transfer it to you because you have a fork already. GitHub made me transfer it to me _first_ anyway, so the redirects will continue to work. Let me know if you still want it ‚Äì you'd need to delete your fork first.
pod update Box Result Alamofire Moya/ReactiveCocoa
The code on this PR is working for me locally: https://github.com/artsy/eidolon/pull/504
``` ruby
pod 'Alamofire'
I've never used Carthage and CocoaPods together before ‚Äì not sure of how that'd work. What version of CocoaPods are you using? There's a similar issue in #216.
@MarvinNazari what do you think?
return cancellableToken
Meta-issue :)
Would give it a try as long as someone could point me to the benefits of having a Gitter room vs only the issues here.
Gitter's tend to end up like Alcatraz's : https://gitter.im/supermarin/Alcatraz - people come in with  questions but no-one gives answers.
Do you think HTTP auth is common enough that we should have a closure specifically for it? Or should we stick to the manager? I like the closure since it keeps things abstracted with the `MoyaTarget` protocol. But it also adds yet another `init()` parameter :sweat_smile: Any thoughts, @avf?
That's a good idea, @damianesteban. I don't believe we actually use OAuth; we only need to add an HTTP header.
There might be a better name than "Success", but having it broken out based on the status code implies knowledge of the server. I've worked with an app (a terrible one), where all responses were "200", and other servers use 404 for empty "array resources".
I'm not sure this is Moya's responsibility, object mapping in Swift is still painful and there's no obvious winner given there's a [new one every day](https://cocoapods.org/?q=lang%3Aswift%20json) to back so we'd end up supporting a lot of different cases. I think @colinta's idea makes sense though, a separate pod that could act as a mapper.
provider.request(moyaCompletionMapsTo(Model.self, { model -> () in
@SRandazzo very cool!
``` Swift
public class ResponseTransformPlugin<Target: MoyaTarget>: Plugin<Target> {
public extension MoyaTarget {
``` Swift
extension MyTarget : MoyaTarget {
Does this make any sense or have I taken some strange roundabout approach to attempting to give plugins more power easily?
- Different extensions need to be written for RxSwift/ReactiveSwift
Sure, sounds like a kind of super-documentation around ObjectMapper and Carthage? Neato.
So, I spoke with @irace this week about a really neat idea for network requests in offline situations. If I understood correctly, each network request would do the following:
Interesting idea!!
Ash Furrow
http://ashfurrow.com
Afraid not that I'm aware of.
It's a bit janky, but would that work?
Definitely something to keep in mind!
Sadly `ReactiveCocoa` dropped support for `CocoaPods` some versions ago.
Fetching podspec for `Moya` from `../`
[!] Unknown external source parameters for `ReactiveCocoa`: `{:branch=>"swift2"}`
``` ruby
pod 'Moya/RxSwift', :path => "../"
pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya', :path => "../"
[!] Unable to find a specification for 'ReactiveCocoa'.
[!] Error installing ReactiveCocoa
fatal: Remote branch swift2 not found in upstream origin
My fork is _way_ out of date.
I'm using this: https://github.com/esttorhe/ReactiveCocoa/blob/swift2/ReactiveCocoa.podspec
I'm spending time this week to update our app to Swift 2 ‚Äì I'll try to get this working.
![](http://i.giphy.com/JDnaQ8qn0Myuk.gif)
Subsequently, I've updated the Moya podspec to use this new ReactiveCocoa version. There's a problem with the Carthage compatibility, but I'm hoping to have it wrapped up soon, and then I'll submit a PR.
pod 'Moya/ReactiveCocoa'
But to be honest, I'm not sure of the Swift 2 support in Moya yet. Ill's if I can take a look today.
AFC right now but if you point to mits 2.0 branch (see the Demo Podfile in there) you'll be able to use everything sans ReactiveCocoa subspec
Esteban Torres
Twitter: @esttorhe
But to be honest, I'm not sure of the Swift 2 support in Moya yet. Ill's if I can take a look today.
*Moya
Esteban Torres
Twitter: @esttorhe
But to be honest, I'm not sure of the Swift 2 support in Moya yet. Ill's if I can take a look today.
Omw.
Esteban Torres
Twitter: @esttorhe
On Thu, Aug 20, 2015 at 8:39 AM -0700, "EZabolotniy" notifications@github.com wrote:
pod 'Moya/RxSwift', :path => "../"
pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya', :path => "../"
and still have the following error:
Alamofire (~> 1.3.0) required by Moya/Core (2.0.0)
You are correct @EZabolotniy.
``` ruby
That way people can use `Moya` on `Swift 2.0` in a somewhat more ¬´official¬ª way
Ah, beat me to it @esttorhe  :)
Esteban Torres
Twitter: @esttorhe
On Wed, Aug 19, 2015 at 6:13 AM -0700, "Justin Makaila" notifications@github.com wrote:
Maya itself should be usable without frameworks, but would require modification.
Yeah, afraid this _is_ a major version break.  Two options:
1. Update podspec version.
2. In Demo directory, `pod update Moya`.
6. `pod trunk push Moya.podspec`.
@regexident Thanks a lot!
Hey! Thanks for letting us know. I've not used `pod try Moya` more ‚Äì honestly I don't know how it works, but I'll take a look and let you know as soon as I figure it out.
That's weird ‚Äì thought I'd done that. I'll give it a try.
Having trouble getting `pod trunk push` to work, hold tight.
Esteban Torres
Twitter: @esttorhe
Having trouble getting pod trunk push to work, hold tight.
Good idea, @esttorhe. Checked and it's 6, which sucks since I _am_ getting a linker error.
Esteban Torres
Twitter: @esttorhe
Good idea, @esttorhe. Checked and it's 6, which sucks since I am getting a linker error.
Oh yeah? I'm a pretty compulsive ‚åòK'er, but I'll be on the lookout for slowdown.
To match the ReactiveCocoa one.
Hey @argentounce ‚Äì good question!
let provider = RxMoyaProvider<MyAPI>()
Ha, yeah @colinta I hear you. From what I understand of Carthage, which is by choice not a lot, it's necessary.
``` ruby
pod 'Moya', :head
This image is misleading:
![](https://raw.githubusercontent.com/ashfurrow/Moya/master/web/bad.png)
- Add sad faces or sad face emojis :cry:
- Add a rage-comic style "wtf" person ‚Äì [Jackie Chan](http://wallpaper.ultradownloads.com.br/276253_Papel-de-Parede-Meme-Jackie-Chan_1920x1440.jpg)?
- Something else.
![](https://raw.githubusercontent.com/ashfurrow/Moya/master/web/bad.png)
## How `Moya` solves this
<Next paragraph explaining how Moya works>
Honestly I like that the image uses `Moya` colors to keep it in sync and consistent with the rest of the README; looks ¬´prettier¬ª IMHO
Yeah, that's a good point. Maybe desaturate them a little bit?
hahahahaha; it makes me think of infomercials when people are terribly using a normal product product.
Put a filter to make it look ¬´old and archaic¬ª? ¬Ø\_(„ÉÑ)_/¬Ø
Nah, I think maybe a label saying "BAD" or something would be illustrative.
What about putting them both side by side with `current / Moya` as a footnote to the images?
http://cl.ly/0E0u3H422C3F/moya-front.sketch
@orta it's a good start, but I think it needs more character. Suggestion:
:shipit:
This could be rolled into #168 where we could have a Demo repo for both Carthage and CocoaPods, separate from the main repo.
Downside of that is `pod try Moya` doesn't work
How so? Never used pod try before.
Hey @justinmakaila ‚Äì would it be possible to have the Example app and tests still built using CocoaPods?
So Carthage relies on the Moya xcodeproject? I thought CocoaPods was generating one for us now. Sorry if I'm showing my ignorance here ‚Äì I'm sure you can understand my hesitation to make Moya depend on an unfamiliar tool.
OK, so. Touchy subject for some ‚Äì I want anyone reading this to know that I have a lot of respect for the developers who've built Carthage, for @justinmakaila and @neonichu who have done so much work to support Carthage in Moya, and for developers using Moya. If someone tries to turn this into a flamewar, I'll be very disappointed in them.
Ok! So Moya actually predates Carthage by a few months ‚Äì Moya was build as a CocoaPod, which the capabilities and limitations of that tool in mind.
Undeterred, @justinmakaila and others laboured to come up with a solution that worked for both tools, requiring Moya to compromise on the original library structure (informed by CocoaPods). At last, we'd nearly accomplished this herculean task.
My remaining issue is that this PR fundamentally changes Moya from a CocoaPod that could support Carthage, to a Carthage library that can incidentally be used with CocoaPods. This might seem like a trivial matter, and it's at this point that I need to recognize that _I_ no longer own Moya ‚Äì the community does. My own feelings matter a lot less.
But the community has been using Moya _as_ a CocoaPod for its entire lifetime, and a change of this foundational nature needs to be considered carefully.
If we're centralizing docs here, I think it makes sense to centralize tests here as well. I can't see that being a problem with Carthage ‚Äì @justinmakaila does that sound OK?
Orta and I have implemented a solution that doesn't require us to split up the source code into three separate repositories, which I've PR'd in #215. @justinmakaila thank you so much for your work on this :smile_cat:
- Emphasizes that this is a community project and not a personal one.
Is anyone else aware of other tradeoffs? @orta?
If you're thinking about it, then it should probably be done. Given that `/moya` isn't free, you might want to consider if you can think of other sibling projects that could go with it.
The distinct repos sounds like a bunch of faffing though to me FWIW.
Distinct repos would solve our Carthage problem; they refuse to implement subspec-style libraries because it "encourages large libraries." Could be something CocoaPods could do ‚Äì it crease a project now, maybe one with separate framework targets for different subspecs?
@colinta Initially, it'd just be this repo and probably a demo or two showing how to use Moya. In the long run, I'd love to see the org grow to include new functional-ish ways to use Swift to solve problems on iOS and OS X. It would be awesome to have a sort of meta repo where we could keep a list of ideas for projects. That way if someone had an idea, or needs an idea, they have a space they can get more help than on their own.
@orta Thanks for asking :)
Given the lack of a reply from @moya I think it might make sense to go with MoyaAPI ?
Or MoyAwesome :stuck_out_tongue:
MoyaAPI just seems so... _pedestrian_.
:tada:
Circle CI needs to enabled the iOS beta on the Moya organization, so our CI will be broken until they flip that switch.
The sync is working well on RxSwift but it won't complete if added to the `ReactiveCocoaMoyaProvider`.
var response: MoyaResponse!
Hey there @vCrespoP! I'm not sure the status ‚Äì I've not been using Swift 2 yet, but that will change soon, so I'll have some work time to devote to it.
``` ruby
pod 'Moya/RxSwift', :path => "../"
#pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya', :path => "../"
@ashfurrow I'm headed out to get my :eyes: checked and won't be able to use the computer for 3-4 hours.
Interesting! I'll take a look later. It could be just that ReactiveCocoa was not intended to be used standalone, or that I didn't anticipate this need when I made the podspec.
Hmm. I'm not quite sure what to make of this. Hoping @neonichu knows.
I'm going to move this to #154 ‚Äì there's a discussion there surrounding Moya and Carthage.
I'm not attached at all ‚Äì @neonichu asked to add the `Pods/` directory and its friends for Carthage support. If we don't need that, that's cool with me.
![](https://s-media-cache-ak0.pinimg.com/originals/d9/be/72/d9be72f4ac11c7da286fa98e99c929f3.jpg)
Yeah, it doesn't appear to ‚Äì apologies for that. @neonichu or anyone else with Carthage know-how: what would be involved in adding support for the RxSwift subspec?
Oh, I see. So someone using Moya with Carthage now just _has_ to also use ReactiveCocoa, even if they only want the original `MoyaProvider`, not the ReactiveCocoa subclass?
@MarvinNazari Wouldn't be a bad idea if this was a Carthage-only repository, but I'm a CocoaPods user and this _is_ the right way to use CocoaPods.
I feel like the Moya team have been very flexible on a number of issues in order to support Carthage. Frankly, I'm tired of jumping through hoops to support a nascent dependency manager that ignores community feedback.
@MarvinNazari Sorry, that was very rude of me. I don't mean to dump this on you ‚Äì I've been growing frustrated at this process for some time now. Splitting the functionality into multiple repos would be a good idea, but I don't think it's the right solution for Moya.
@MarvinNazari I'm glad you like our library :) I wish there were a better way to support your use case. Hopefully the Carthage people will help.
So we'd basically need to create and maintain a separate Xcode project solely for Carthage support, right?
Cool, this looks great @justinmakaila ‚Äì want to submit a PR to add those instructions to the README?
@justinmakaila sounds cool, thanks! Send the PR over and we can take a look there :tada:
Now that we have an organization, could we use submodules somehow to dump the necessary files for Moya, Moya/RAC, and Moya/RxSwift into separate repositories? I don't really know how Carthage works.
@gfontenot That sounds like a really intriguing solution ‚Äì I had never considered having subspecs use a different `source` ‚Äì @orta any reason why that'd be a bad idea? I personally like having all the source files in one repo, but if it solves our projects with Carthage support, then it seems like a reasonable compromise.
Super, thanks @justinmakaila! GitHub repo transfers are messy ‚Äì I've created the other repos on the Moya organization for you, and you should have push rights. Just add a remote for them, pull, merge, and push.
cd RxMoya
![](https://s-media-cache-ak0.pinimg.com/originals/d9/be/72/d9be72f4ac11c7da286fa98e99c929f3.jpg)
Ah, sorry ‚Äì first time using GH organizations :) Try again?
So @justinmakaila what are the next steps? Are the other repos working with Carthage? Swift 1.x or Swift 2? Do we just need to update CocoaPods now?
Super, cool! So if everything is working with Carthage, there's only a few things left to do:
6. Release a new version of Moya.
To my knowledge, no-one has stepped up to keep the Carthage/RAC branch in sync, we'd welcome a PR making sure it supports the latest from you.
@neonichu: you added Carthage support ‚Äì any ideas?
Cool, thanks @aschuch ! I wasn't sure how the `~> 3.0` signifier works in Carthage.
Others are likely more familiar with the network library underneath Alamofire. Anyone have suggestions on how to implement this?
stubClosure: StubClosure = MoyaProvider.NeverStub,
networkActivityClosure: Moya.NetworkActivityClosure? = nil,
manager: Manager = Alamofire.Manager.sharedInstance) {
stubClosure: StubClosure = MoyaProvider.NeverStub,
networkActivityClosure: Moya.NetworkActivityClosure? = nil,
manager: Manager = Alamofire.Manager.sharedInstance) {
Subclassing in Swift usually requires calling a designated initializer in the superclass, I'm not sure of a great way to avoid this in Moya. Do you have suggestions?
Ash Furrow
https://ashfurrow.com/
> - üìÅweb
> - üìÅMoya
>   -- Moya.swift
>   -- MoyaResponse.swift
>   -- üìÅReactiveCocoa
>   --- Moya+ReactiveCocoa.swift
>   --- RACSignal+Moya.swift
>   -- üìÅRxSwift
>   --- Moya+RxSwift.swift
> - Moya.podspec
@SRandazzo the lack of an xcproj is strange to me too. The way I do it here is by opening the Demo to edit the code for the library. Not the most intuitive.
I want other people to feel like they own Moya, too, so it survives in the long run.
Awesome. @neonichu since you mentioned it, I've added you as an owner to the pod in CocoaPods trunk.
@alloy I like it. As though adding more contributors should be a regularly part of open source. :bow:
Ha, meeerrrrge conflict.
@neonichu Wanna rebase so I can merge?
Lots of changes:
You absolute troll.
For the Reactive extension, it's a bit trickier but not difficult. We currently have a side-effect that if the subscription to the signal is cancelled before the request finishes, we remove the request from the inflight cache. We would just need to add a call to `cancel()` [here](https://github.com/ashfurrow/Moya/blob/ad1e2266e8820433270eca3ba98aa01c787879a3/Moya%2BReactiveCocoa.swift#L74-L79).
@justinmakaila has implemented a solution on another repository (pasted below). We can't incorporate this change into the library yet because it's a breaking change to existing users, and we need to update Moya to the next major version (3.0.0). I'd like to get a Swift 2, Carthage-compatible release out _first_ (see #215) and then incorporate Justin's work, since it looks great :100:
sendNext(sink, MoyaResponse(statusCode: statusCode!, data: data, response: response))
public func request(token: T) -> RACSignal {
return toRACSignal(self.request(token))
public extension ReactiveCocoaMoyaProvider {
/// MoyaResponse free functions
/// Maps the `MoyaResponse` to a `UIImage`
/// Maps the `MoyaResponse` to JSON
var error: NSError?
/// Maps the `MoyaResponse` to a String
> Could switch to CircleCI
I'm open to suggestions ‚Äì if you comfortable with it, I'd love to let you handle Carthage and have the README contain instructions to use the Cartfile on your fork. Then you could pull in updates to your fork.
That's a lot to ask, though.
Hmm. Having the projects together would be nicer from a "fewer files in the repo" perspective, but it's really that I'm afraid that having Carthage supports is a promise to developers using Moya, and one that I'm not confident I can keep.
Thought they were still in invite-only beta?
Great idea! I think Alamofire supports this already, so there is an opportunity to leverage their code while being clever about how we expose the functionality.
But even if we don't have that support, we could just add more verbs that accept that to `Moya.Method`.
public protocol MultipartFormUploadable: MoyaTarget { }
> MultipartFormData
> public protocol MultipartFormUploadable: MoyaTarget { }
> // Additional stream parameters
> public enum API: MoyaTarget {
Hey @avgx! Is there anything I can do to help on this?
# Or, if you're using ReactiveCocoa extensions...
Wonderful ‚Äì at it's tested :heart_eyes_cat:
The ReactiveCocoa version requires a specific version of LlamaKit; you'll need to use the same version in your Podfile.
Interesting! I think this comes down to a couple things:
I don't know if `@autoclosure` is going to work going forward. Swift 1.2 changes the semantics surrounding this construct such that these types of closures cant be stored for later ‚Äì they must be executed immediately (as far as I understand it). I think moving to a pure closure would be OK.
@alloy? Only on Slack :) I've left Amsterdam, sadly.
Thanks! :beers:
Sorry this took so long ‚Äì thanks again for your help! :bamboo:
``` swft
Thanks @jspahrsummers !
let abcd = MoyaProvider(endpointsClosure: closure )
A few important notes: the `xmlParameterEncoding` closure has the variables _names_, not types, after the `{`, and I had to fully qualify  the `.Custom` with `Moya.ParameterEncoding`, since Alamofire exposes an identical enum with the same name.
Could be related to https://github.com/CocoaPods/CocoaPods/pull/2873
Why not have carthage run `pod install`?
Cooooool :palm_tree:
As for Carthage, I'm amenable to Carthage support for Moya ‚Äì it's just been that no one has asked for it yet. Someone tried once but apparently it was really hard? I dunno. If you want to send a separate PR for that (onto `master`), that would also be welcome!
I don't think having two complete projects is a smart idea, two repos is even worse. As reasonable project owners we will probably have to re-write our project to support Carthage.
Thanks @ryancrosby !
Thanks! :beers:
Unrecognized selector
This has been a painful process.
I don't even know what swagger is ‚Äì so I'll check it out.
http://luckymarmot.com/paw
The problem I see, is with JSON (de)serialization, because Swift does not have a good reflection system (as of 1.2 at least) to support a reflection library, so all must be done manually. If the generator takes care of that too, would be great. :)
and for people who care about Swagger: https://github.com/luckymarmot/Paw-SwaggerImporter
Delegating that responsibility to  @ashfurrow :u5408:
This was fixed here: https://github.com/ashfurrow/Moya/commit/abaf6cb0adaf
Thanks! :beers:
let provider = MoyaProvider(endpointsClosure: endpointsClosure)
.addStubbing(someOtherRequest)
let request = Api.Status
``` ruby
Neat, I hadn't even considered marchers for Moya. I was only thinking of functional or view snapshot tests. The idea of testing that a request was made... hmm. Sounds useful, but is it something to encourage?
provider = ReactiveMoyaProvider(endpointsClosure: failureEndpointsClosure, stubResponses: true)
let provider = MoyaProvider(endpoints: [
```diff
Misses           141      141
```diff
Misses                ?      123
Partials              ?        0
Moya (8.0.5)
Moya-ModelMapper (4.1.1)
RxSwift (3.6.1)
```swift
let birth: String
let id: String
let gender: String
```swift
Example Json:
"email": "atesta10029@gmail.com",
"name": "atesta10029@gmail.com",
#### Warnings
#### Errors
```diff
#### Warnings
#### Errors
```diff
+ Misses           166     155      -11
```diff
2 Warnings
</thead>
</thead>
#### Warnings
MoyaProviderSpec.swift | 737 | Opening braces should be preceded by a single space and on the same line as the declaration.
MoyaProviderSpec.swift | 769 | Opening braces should be preceded by a single space and on the same line as the declaration.
#### Errors
```swift
</thead>
#### Warnings
#### Errors
```diff
Misses           159      159
```swift
2 Warnings
</thead>
#### Warnings
#### Errors
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
```swift
var method: Moya.Method {
```swift
```swift
#### Warnings
```diff
+ Misses           180      159      -21
```swift
Identifier:      XXX
Code Type:       ARM-64
Exception Codes: 0x00000000 at 0x00000001000a8734
0   bitpie                          0x00000001000a8734 0x100014000 + 608052
1   bitpie                          0x00000001000a8584 0x100014000 + 607620
2   bitpie                          0x00000001000a553c 0x100014000 + 595260
3   Moya                            0x0000000100b2997c 0x100b14000 + 88444 (MoyaProvider.requestNormal(A, queue : DispatchQueue?, progress : (ProgressResponse) -> ()?, completion : (Result<Response, Error>) -> ()) -> Cancellable + 2604)
8   Moya                            0x0000000100b26718 0x100b14000 + 75544 (protocol witness for CustomDebugStringConvertible.debugDescription.getter in conformance CancellableToken + 248)
9   Alamofire                       0x00000001008874d4 0x100844000 + 275668 (DownloadRequest.responsePropertyList(queue : DispatchQueue?, options : PropertyListSerialization.MutabilityOptions, completionHandler : (DownloadResponse<Any>) -> ()) -> Self + 2480)
20  bitpie                          0x000000010004d550 0x100014000 + 234832
Binary Images:
Extra Information:
00000000000000000000000000000000000000000000000020BA550001000000284B610001000000C0668770010000007043437401000000000000000000000060A4DE6F0100000084850A0001000000A3A3A3A3A3A3A3A3A1A1A1A10000000076006A20516DF72D206DC4AC0100000000002F010100000000000000000000004067877001000000006787700100000000000000000000000000000000000000000000000000000001C0C4AC0100000000002F010100000000002F0101000000F0A2DE6F01000000D883D4870100000000A3DE6F01000000D883D4870100000076006A20516DF72DB8DBC4AC01000000
```diff
Misses           180      180
2 Warnings
</thead>
```diff
Misses           180      180
```swift
do {
try moyaResponse.filterSuccessfulStatusCodes()
```swift
do {
try moyaResponse.filterSuccessfulStatusCodes()
I then try to retrieve the JSON from `moyaResponse.data`.
```swift
case let .success(moyaResponse):
do {
try moyaResponse.filterSuccessfulStatusCodes()
if let error = error as? MoyaError {
do {
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
pod 'Moya/RxSwift'
2 Warnings
</thead>
```diff
Misses           180      180
```swift
static func setProvider() -> MoyaProvider<ApiProvider> {
provider = MoyaProvider<TWApiProvider>(endpointClosure: endpointClosure)
```swift
let stubClosure = { (target: TargetType) -> Moya.StubBehavior in
```swift
```swift
```Swift
```swift
let stubClosure = { (target: ApiProvider) -> Moya.StubBehavior in
```swift
static func setProvider() -> MoyaProvider<ApiProvider> {
var provider: MoyaProvider<ApiProvider>!
provider = MoyaProvider<ApiProvider>(endpointClosure: endPointClosure)
```swift
static func setProvider() -> MoyaProvider<ApiProvider> {
var provider: MoyaProvider<ApiProvider>!
```diff
Misses           180     180
#### Warnings
```diff
- Misses           159      180      +21
2 Warnings
</thead>
```diff
Misses           159      159
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
moya version: ~> 8.0.3
```swift
or, there is a other way to get it? @sunshinejr It work well, thanks!  Hi, I am installing Moya 8.0.5 and found this problem. I can't install Moya via Carthage, it stopped in `Building scheme "ReactiveMoya" in Moya.xcodeproj`.
*** Building scheme "Moya" in Moya.xcodeproj
*** Building scheme "RxMoya" in Moya.xcodeproj
*** Building scheme "ReactiveMoya" in Moya.xcodeproj
github "Alamofire/Alamofire" "4.3.0"
github "Moya/Moya"
github "Ekhoo/Device" "2.0.1"
github "antitypical/Result" "3.1.0"
github "ReactiveCocoa/ReactiveSwift" "1.0.0"
github "Alamofire/Alamofire" "4.3.0"
github "Ekhoo/Device" "2.0.1"
github "antitypical/Result" "3.1.0"
github "ReactiveCocoa/ReactiveSwift" "1.0.0"
github "Moya/Moya" "8.0.2"
```  Moya: 8.0.5
And there is a `RxMoyaProvider` in Moya
```swift
provider = MoyaProvider<GitHub>()
provider.rx.request(.userProfile("ashfurrow")).subscribe { event in
2 Warnings
</thead>
cocospod is 1.3.0
pod 'SwiftProtobuf', '~> 0.9.903'
pod 'Moya/RxSwift'
pod 'CryptoSwift'
pod 'SwiftyJSON'
github "Moya/Moya"
carthage update Moya
There seem to be a problem with the Alamofire dependency.
This is my output of `carthage update Moya` (without the explicit Alamofire dependency)
> *** Fetching ReactiveCocoa
> *** Fetching Moya
> *** Fetching Fakery
> *** Fetching Nimble
> *** Fetching ReactiveReSwift
> *** Fetching Alamofire
> *** Fetching RxSwift
> *** Checking out Moya at "8.0.5"
> *** Building scheme "Alamofire macOS" in Alamofire.xcworkspace
> *** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
> *** Building scheme "Alamofire watchOS" in Alamofire.xcworkspace
> *** Building scheme "Alamofire tvOS" in Alamofire.xcworkspace
> *** Building scheme "Moya" in Moya.xcodeproj
> *** Building scheme "RxMoya" in Moya.xcodeproj
> *** Building scheme "ReactiveMoya" in Moya.xcodeproj
Update 2: No it doesn't work only with Moya, will try again adding Alamofire...
1. Add (only) Moya to Cartfile.
```swift
// Error code handling here
I'm currently using Moya 8.0.5, along with Alamofire 4.5.0 and RxSwift 3.4.0, all of them installed through Carthage. As the title mentioned, this only occurs in iOS 8 & 9, both in simulator and device.
</thead>
#### Warnings
MoyaProvider+ReactiveSpec.swift | 60 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 61 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 62 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 63 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 152 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 153 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 154 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider+ReactiveSpec.swift | 155 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
#### Errors
target 'MoyaTest' do
# Comment the next line if you're not using Swift and don't want to use dynamic frameworks
# Pods for MoyaTest
pod 'Moya', '~> 8.0.5'
target 'MoyaTestTests' do
target 'MoyaTestUITests' do
I don't know what happened
Thank you very much for your help. I have read the open direct mouth and tried to customize the manager and let the manager be the parameter of Moya, but it is not useful. Is my func wrong? Thank you again for helping me!!
@sunshinejr  OK this is my code
```Swift
enum MoyaNewsCar {
extension MoyaNewsCar: TargetType {
var method: Moya.Method {
"m": "ina_app",
"m": "ina_app",
"c": "vedio",
"m": "ina_app",
"c": "vedio",
"m": "ina_app",
"m": "ina_app",
"m": "ina_app",
"m": "ina_app",
case .useCar:
"m": "ina_app",
"storyType": "useCar"
case .calture:
"m": "ina_app",
"storyType": "culture"
"m": "ina_app",
"m": "ina_app",
"m": "ina_app",
return URLEncoding.default
/// ÊòØÂê¶ÊâßË°åAlamofireÈ™åËØÅ„ÄÇÈªòËÆ§‰∏∫"false"
var netWorkDataType: MoyaNewsCar! = .hotSpot
MoyaNewsCarProvider.request(type) { (result) in
do {
let errorPrint = error as CustomStringConvertible
//MARK: - Private Method -
extension Moya.Response {
throw MoyaError.jsonMapping(self)
throw MoyaError.jsonMapping(self)
do {
</thead>
```diff
Misses               ?      151
Partials             ?        0
Hi, I am new on use Moya
I read on documentation, we can create custom plugins to handle before and after request, i just wanna ask how to get Http status code when error, I try down cast MoyaError to AFError but not succesfully but when I cast to NSError return succesfully, this my code:
case .failure(let moyaError):
let moyaError = moyaError as MoyaError
switch moyaError {
message: NetworkError(error: nsError).localizedDescription,
- Moya (8.0.4):
- Moya/Core (= 8.0.4)
- Moya/Core (8.0.4):
- Alamofire (~> 4.1)
```swift
let alamoRequest = target.validate ? initialRequest.validate() : initialRequest
return sendAlamofireRequest(alamoRequest, target: target, queue: queue, progress: progress, completion: completion)
And more specifically this line in Moya:
```swift
It's a mystery to me. For now, I stopped the integration of Moya in the project until I resolve that since it's worrying me and my manager is very strict with warnings and error log messages or warning log messages.
| Swift version | Moya version  |
2 Warnings
</thead>
</thead>
#### Warnings
GiphyAPI.swift | 11 | Force unwrapping should be avoided.
GiphyAPI.swift | 42 | Force unwrapping should be avoided.
GiphyAPI.swift | 52 | Force unwrapping should be avoided.
#### Errors
```swift
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
I'm trying to test a more complex situation with Drivers :P
```swift
class JokesViewModel {
jokesProvider: RxMoyaProvider<JokesService>
.request(.random(numJokes: 5))
.mapArray(type: Joke.self, keyPath: "value")
.debug("DEBUG!! jokes")
```swift
let viewModel = JokesViewModel(refreshDriver: refreshDriver, jokesProvider:provider)
XCTAssertEqual(2, recordedJokes.events.count)
</thead>
```Swift
public class myRxProvider<Target>: RxMoyaProvider<Target> where Target: TargetType {
stubClosure: @escaping StubClosure = MoyaProvider.neverStub,
if isSecondTryAfterAuth {
let response = providerToken.request(.Update(refreshToken: "Riox8RWVm8lmxxxMaMLF4PMz65MMZp4_oaq5_sjEK8c=")).mapObjectOptional(type: Token.self)
If i was write Swity.Error ,The delegate never run when webview load fail
/Users/luoyang/Documents/ÂÖ¨Âè∏È°πÁõÆ/Olliix/Code/branches/dev_v1.1/Olliix/Pods/SQLite.swift/Sources/SQLite/Core/Connection.swift:32:8: error: could not build Objective-C module 'CSQLite'
import CSQLite
CompileSwift normal arm64 /Users/luoyang/Documents/ÂÖ¨Âè∏È°πÁõÆ/Olliix/Code/branches/dev_v1.1/Olliix/Pods/SQLite.swift/Sources/SQLite/Core/Blob.swift
/Users/luoyang/Documents/ÂÖ¨Âè∏È°πÁõÆ/Olliix/Code/branches/dev_v1.1/Olliix/Pods/SQLite.swift/Sources/SQLite/Core/Connection.swift:32:8: error: could not build Objective-C module 'CSQLite'
import CSQLite
/Users/luoyang/Documents/ÂÖ¨Âè∏È°πÁõÆ/Olliix/Code/branches/dev_v1.1/Olliix/Pods/SQLite.swift/Sources/SQLite/Core/Connection.swift:32:8: error: could not build Objective-C module 'CSQLite'
import CSQLite
CompileSwift normal arm64 /Users/luoyang/Documents/ÂÖ¨Âè∏È°πÁõÆ/Olliix/Code/branches/dev_v1.1/Olliix/Pods/SQLite.swift/Sources/SQLite/Core/Connection.swift
/Users/luoyang/Documents/ÂÖ¨Âè∏È°πÁõÆ/Olliix/Code/branches/dev_v1.1/Olliix/Pods/SQLite.swift/Sources/SQLite/Core/Connection.swift:32:8: error: could not build Objective-C module 'CSQLite'
import CSQLite
```diff
@@                       Coverage Diff                       @@
Files                                  22       22
Misses                                173      173
This plugin adds support for Basic Authorization header using an API key. @sunshinejr seems like a good idea.
First of all I don't even know if those callbacks are the right choice when dealing with ReactiveCocoa.
```swift
import Moya
import SwiftyJSON
failure failureCallback: @escaping (MoyaError) -> Void
do {
Yes, the project is using ReactiveCocoa everywhere, but I'm quite new to that, but I felt making classic closures out of SignalProducers was not the best idea. So thank you for clarification on that.
Do we have a tool for implicit json serialization from X to json in Moya?
different from
```swift
return URLEncoding.default
```diff
Misses           185      185
```diff
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
I have an app which uses Moya as a dependency using Carthage.
</thead>
#### Warnings
```diff
@@                        Coverage Diff                         @@
Files                                  22       22
- Misses                                171      173       +2
```diff
+ Misses           185      164      -21
```diff
+ Misses           164     154      -10
```diff
```diff
```diff
```diff
```diff
Moya 8.0.0
```swift
print(error.localizedDescription)
```swift
do {
how to determine which case of MoyaError it is?
@sunshinejr any idea on when Moya 9.0 will be released?
@jeryRazakarison i tried 9 but i see changes. Like what happened to `.filterSuccessfulStatusCodes() .mapObject(type: Balance.self) .mapJSON()` and `.request()` ? they all dissapeared  # [Codecov](https://codecov.io/gh/Moya/Moya/pull/1155?src=pr&el=h1) Report
```diff
- Misses        165      171       +6
```swift
```swift
let provider = RxMoyaProvider<ItemService>()
```swift
2 Warnings
</thead>
```diff
- Misses           175      185      +10
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
endpoint.adding(httpHeaderFields: ["Content-type": "multipart/form-data; boundary=\(Alamofire.MultipartFormData.BoundaryGenerator.randomBoundary())"])
```swift
What I mean is in 'MoyaProvider+Internal.swift' line 89:
Is this must be MultipartFormData's count > 0? @sunshinejr
```diff
- Misses        165      171       +6
2 Warnings
</thead>
```diff
+ Misses        171      165       -6
What I have done here is to implement the intention behind #1136 with the new approach we have taken in #1147. Although the code is like I would expect it to work, the Swift compiler (currently) seems not to be able to work with this code. I'm still getting the same error as in #1136, for example:
```swift
The following are TODOs:
4 Warnings
</thead>
#### Warnings
</thead>
#### Warnings
GiphyAPI.swift | 11 | Force unwrapping should be avoided.
GiphyAPI.swift | 34 | Force unwrapping should be avoided.
GiphyAPI.swift | 44 | Force unwrapping should be avoided.
#### Errors
```swift
import Moya
var method: Moya.Method {
do {
```swift
```swift
do {
@ashfurrow @sunshinejr ?
Btw, when I updated the docs, I've seen that some examples are outdated and I didn't fix that (although my code change has to do with it) cause it is using an old syntax of Alamofire. Specifically I'm talking about https://github.com/Moya/Moya/blob/master/docs/Examples/ArrayAsRootContainer.md
```swift
```diff
- Misses           151      159       +8
```diff
Misses        171      171
```diff
Misses        171      171
```diff
- Misses           175      177       +2
1 Warning: The <code>Cartfile</code> or <...
</thead>
#### Warnings
2 Warnings
</thead>
#### Warnings
```diff
- Misses        171     173       +2
Is this merge? I have the same problem. @sunshinejr
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
```swift
```swift
```swift
This error appears in places such as
```swift
Does anybody have a good solution for preventing this issue? Then I can continue exploring this.
4 Warnings
</thead>
Also, I'd like learn why I get the compiler error in there and how to work around it anyways, so I've also created it because of technical reasons. I'd like to at least play around with that API and see if it works well from the consumer side. Maybe the Alamofire guys introduce support, but we don't like it? You never know ... üòÑ   I'm currently writing an app to be **released after the official release of iOS 11** that'll only support iOS 11 onwards. So naturally I'm using the **Xcode 9** betas and I've also decided to write code in **Swift 4** from the beginning. What I try right now is to combine the great new possibilities with the **`Encodable` and `Decodable` protocols with Moya**. While there's #1118 for adding native support for the `Decodable` protocol, I'm currently **struggling with the `Encodable` protocol**.
```swift
// MARK: - Sub Types
let username: String
let password: String
```swift
```swift
```swift
So, we can't simply drop the parameters without an alternative (IMHO), thus I'm still keeping them with my `RequestData` wrapper. What I try is to abstract away the return type of the params and making it flexible with my `RequestData` enum. There could be a different return type for each case, e.g. `Data` for `.jsonEncoder` and `[String: Any]` for Alamofires `parameterEncoding`. It just needs to be handled somewhere down in Moya. `Data` should be straightforward to handle though, as URLRequest has native support for setting the body via `Data` (which is probably also the reason why the `.encode` method of `JSONEncoder` has a return type of `Data`, I guess). I'm going to implement my above suggestion then, as it seems I did not misunderstand the issue here. This way we can figure out if we can come up with an even better solution to this problem or keep my approach. I'm gonna try to post an initial PR until sometime tomorrow. I like your approach with the enum.
But I wouldn't worry to much about breaking existing apps if the migration is simple and easy to do. There were changes of this scope before (`ParameterEncoding`, `task`). Thanks for the alternative. I've already thought about this solution. The problem with it is, that when having both type of API endpoints, the developer has to ensure that all cases of the TargetType are covered and split correctly between the two options. I think the risk that developers forget a case or specify two different types for a case is very high and would lead to some kind of error or unexpected behavior. That's why I introduced the enum, which is a little more code to write but prevents any such issues. You are correct with the added complexity.
```swift
Not sure if those rather obscure variants should be in the enum or if there
> or any of their custom encoding).
> <https://github.com/notifications/unsubscribe-auth/AAM6_XeB_Z613PyljaFNBJQ8uSkY13LOks5sG8jRgaJpZM4OCUcf>
Here's my **alternative suggestion:**
```swift
```.swift
```.swift
```diff
- Misses        171      191      +20
```swift
import SwiftyJSON
import Alamofire
let email = "abc1@gmail.com"
let password = "12345"
let centername = "biselahore"
let city = "lahore"
let state = "pakistan"
let address = "walton lahore"
Alamofire.request(API, method: .post, parameters: nil, encoding: URLEncoding.default)
```swift
``` Hi @BasThomas  Yes i am not using Moya. @ranayahya It's difficult to tell with the code you posted, possibly this line:
```Swift
```diff
Misses        171      171
``` Diff
-typealias StubClosure = TargetType -> Moya.StubBehavior
+typealias StubClosure = TargetType -> (Moya.StubBehavior, Response)
I think this is the only thing a little awkward about this approach.
```swift
```swift
I think this is a far easier way to remove test code from the Main Target and less damaging to the API. However, if we're concerned about moving `sampleData` to the provider from a responsibility perspective then this is not a valid solution. @pedrovereza I don't know if this is a hard rule but if Moya is no longer going to force people to write networking tests then this seems like a good case for a default implementation.
> As for sampleData, even as an ardent unit tester, I think there is a difference between first-class support of unit testing and first-class forcing people to write testing code. We all know very few projects get started with full test suites in place. If tests do eventually get added, it is often done at a later date (i.e. not much TDD going on). The amount of Moya code that starts off with
```swift
```swift
var stubBehavior: Moya.StubBehavior { get }
```swift
I think in this way we can make Moya simple and reduce dependency problem.
@BasThomas
@pedrofjfmartins
I just said *reduce dependency problem*, forgive me, the statement is not exact, it's my fault, what I want to say is that *separate repo can make dependency simple*. For example, separate repo can reduce  Carthage's built time, and each submodule would have their specific demo, maybe this is more convenient for user.
@petester42 How do you think about this ?
</thead>
#### Warnings
#### Errors
```diff
+ Misses           195      175      -20
```ruby
```ruby
</thead>
#### Warnings
MoyaProvider+Defaults.swift | 42 | Force unwrapping should be avoided.
MoyaProvider+Defaults.swift | 44 | Force unwrapping should be avoided.
```diff
Misses        171     171
The problem is you're using `?` inside of your path -- which isn't common practice.
```Swift
```Swift
```Swift
```diff
Misses        171      171
and next and previous path comes like **questions/?page=2&topic=xyz**
Now I need to append this after base url so I was trying to append this path **/v3/questions/?page=2&topic=xyz** but due to encoding I ended up with unwanted encoded characters for = and others
```swift
```Swift
Regardless, these are not difficult extensions to write on our own or provide in a community extension. @sunshinejr thank you for the feedback. I would be willing to provide the implementation for this feature when Moya is ready to start the Swift 4 migration. Including writing the Rx/Reactive extensions, documentation, and testing. If there's anything else I can do the contribute in the meantime, please feel free to let me know. Please note that there is now https://github.com/Alamofire/Alamofire/issues/2180 around which tracks support for the `Decodable` type right within Alamofire. As it is our main dependency, I think their approach to integrate this feature should be considered before finally deciding on how to implement this.
```diff
@@                       Coverage Diff                       @@
Files                                  22       22
Misses                                171      171
Moya 8.0.5
github url: https://github.com/k8mil/MoyaBaseURL
```swift
enum MyApi {
var method: Moya.Method {
return URLEncoding.default
It seems to be specially designed for `POST`.  @sunshinejr
```diff
Misses        171      171
```diff
Misses        171      171
And my code;
open static func Provider() -> MoyaProvider<NetworkAPI> {
return MoyaProvider<NetworkAPI>(endpointClosure: NetworkProvider.endpointClosure, manager: NetworkManager.manager, plugins: [NetworkLoggerPlugin(verbose: true, cURL: true)])
```swift
import Moya
import SwiftyJSON
var provider: MoyaProvider<RequestsEnum>
return Endpoint<RequestsEnum>(
```swift
var method: Moya.Method {
```diff
Misses        171      171
```diff
Misses        171      171
```diff
Misses        171      171
```diff
Misses        171      171
1 Warning: The <code>Cartfile</code> or <...
</thead>
#### Warnings
MoyaProviderIntegrationTests.swift | 28 | Force unwrapping should be avoided.
MoyaProviderIntegrationTests.swift | 32 | Force unwrapping should be avoided.
MoyaProviderIntegrationTests.swift | 36 | Force unwrapping should be avoided.
```diff
Misses        171      171
```diff
+ Misses        191      171      -20
'RxSwift', ' 3.2.0'
'Moya', ' 8.0.4'
'Moya/RxSwift', ' 8.0.4'
```swift
why this code call ``` onNext``` twice?
```diff
Misses        191      191
```diff
Misses        191      191
#### Warnings
MoyaProviderSpec.swift | 79 | Unused parameter "target" in a closure should be replaced with _.
MoyaProviderSpec.swift | 93 | Unused parameter "target" in a closure should be replaced with _.
MoyaProviderSpec.swift | 10 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 401 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 526 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 532 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 617 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 623 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 638 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 707 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 711 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 114 | Prefer `-> Void` over `-> ()`.
MoyaProviderSpec.swift | 129 | Prefer `-> Void` over `-> ()`.
MoyaProviderSpec.swift | 258 | Prefer `-> Void` over `-> ()`.
MoyaProviderSpec.swift | 201 | Opening braces should be preceded by a single space and on the same line as the declaration.
MoyaProviderSpec.swift | 672 | Opening braces should be preceded by a single space and on the same line as the declaration.
#### Errors
MoyaProviderSpec.swift | 662 | Force casts should be avoided.
```diff
Misses        191      191
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
Version of Moya is 8.04
```swift
```swift
var provider:RxMoyaProvider<HTTPService>!
```diff
Misses        191      191
```diff
Misses        191      191
```diff
Misses        191      191
Version of Moya is 8.04
```swift
let provider = MoyaProvider<Services>(requestClosure:requestClosure, plugins: [NetworkLoggerPlugin(verbose: true)])
```swift
There is my Moya Services
```swift
return "/api/tickets/\(id)"
var method: Moya.Method {
return URLEncoding.default
```diff
Misses        191      191
As an aspiring contributor, I think a Vision document would be a great move! üòÉ   ```
How to deal with this kind of parameters , in MoyaProvider
(Workaround from app side) @alcarvalho ya, I am using URLEncoding  Using github.io website generator, or even jekyll can be a good solution for a brief and good website !
```diff
Misses        191      191
```diff
Misses        191      191
```swift
```swift
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
Test the moya demo
```swift
```diff
Misses           195      195
</thead>
Moya v8.0.3
```swift
"t" : token])
```swift
```swift
```diff
Misses        191      191
I'm using Swift 2.3 and Moya 7.0.2, but I'm still seeing this error:
pod 'Moya', '7.0.2'
- Moya (7.0.2):
- Moya/Core (= 7.0.2)
- Moya/Core (7.0.2):
- Alamofire (~> 3.5)
How can I depend on the delegate methods in Moya?
```swift
I don't think there's an easier way of doing this, much less find a generic way to implement this in Moya. üòÑ
```swift
and this which is related
```swift
```swift
```swift
```swift
return ["auth_header": "2312dasd"]
```swift
-H "User-Agent: Example/0.0.2 (com.abc.example; build:1; iOS 9.3.0) Alamofire/4.4.0" \
```swift
```swift
var method: Moya.Method { get }
```swift
## Other stuff
</thead>
#### Warnings
MoyaProviderSpec.swift | 79 | Unused parameter "target" in a closure should be replaced with _.
MoyaProviderSpec.swift | 93 | Unused parameter "target" in a closure should be replaced with _.
MoyaProviderSpec.swift | 10 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 401 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 526 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 532 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 617 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 623 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 638 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 707 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 711 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 751 | Force unwrapping should be avoided.
MoyaProviderSpec.swift | 114 | Prefer `-> Void` over `-> ()`.
MoyaProviderSpec.swift | 129 | Prefer `-> Void` over `-> ()`.
MoyaProviderSpec.swift | 258 | Prefer `-> Void` over `-> ()`.
MoyaProviderSpec.swift | 201 | Opening braces should be preceded by a single space and on the same line as the declaration.
MoyaProviderSpec.swift | 672 | Opening braces should be preceded by a single space and on the same line as the declaration.
#### Errors
MoyaProviderSpec.swift | 662 | Force casts should be avoided.
```diff
@@                       Coverage Diff                       @@
Files                                  22       22
Misses                                191      191
"name": "teste":
```diff
Misses        191      191
</thead>
Is it possible to use gRPC with Moya?
https://github.com/grpc/grpc/tree/master/src/objective-c  Moya : 8.0.3
```swift
let urlString = "https://google.com/123/somepath?X-ABC-Asd=123"
### When I do my request using `Alamofire` :
```swift
Alamofire.upload(fileURL, to: URL(string: urlString)!, method: .put, headers: nil).response {
```swift
enum MyApi {
let urlString = "https://google.com/123/somepath?X-ABC-Asd=123"
The created request URL is different that in `Alamofire` request.
## The difference is that before `?` character moya inserts the `/` char.
https://google.com/123/somepath?X-ABC-Asd=123
https://google.com/123/somepath/?X-ABC-Asd=123
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
@pedrovereza
https://github.com/k8mil/MoyaBaseURL
`URL(string: "https://google.com/123/somepath?X-ABC-Asd=123")!`
`baseURL = "https://google.com/123/somepath?X-ABC-Asd=123"`
`baseURL = "https://google.com` and `path = "/123/somepath?X-ABC-Asd=123"`
And only Alamofire produces that what I want to achieve :)
Important thing is that I'm using `Moya` in my project and the consuming my backend API with Moya is really great and works perfectly, but I have some case that I have to use the `URL`(which is not related with backedAPI) that I received from some service and I shouldn't modify that `URL`. Unfortunately, as you can see in the Second and Thrid example the URL is modified by removing/changing the `?` char.
Thanks @pedrovereza !
"password": "1234"
```swift
let username: String
let password: String
```swift
@douglastaquary Was wondering what your workaround was. Thanks!  @rlam3 This implementation does not work. Do you have any idea how I can send these parameters in the body of the request as json with `Moya`? On my implementation the parameters are `nil`. :(
I updated the `Moya` version of `8.0.0-beta.3` to `8.0.3` and
```swift
enum MyAPI {
"password": password as AnyObject]
var parameterEncoding: Moya.ParameterEncoding {
return URLEncoding.default
"password": "1234"
```swift
```swift
```swift
Enhance Moya.Response by using HTTPURLResponse
* Moya use Alamofire
Modify the `Moya.Response` by avoiding downcast Alamofire's response
#### Warnings
```diff
Misses           195      195
</thead>
</thead>
#### Warnings
Moya Version: 8.0.3
```swift
```swift
[PR #1044 - Enhance Moya.Response by using HTTPURLResponse](https://github.com/Moya/Moya/pull/1044) Ahoy, Ok i'll try to look at AF and if possible do the change üëç Thanks for your reply ... and is "downcasted" to a simple URLResponse ...
```swift
let req = Alamofire.request(someURLRequestConvertible)
>My call site for Moya looks like this:
```swift
```swift
name: "CryptoSwift",
```swift
Cloning https://github.com/Alamofire/Alamofire
Cloning https://github.com/ReactiveCocoa/ReactiveSwift
Cloning https://github.com/antitypical/Result.git
Cloning https://github.com/antitypical/Result
``` so sad =( i really was excited with this feature in my mind lol So.. I will use that on xcode, thanks !  Fixed headers
#### Warnings
```swift
public var method: Moya.Method {
public enum Error: MoyaError {
Raw type 'MoyaError' is not expressible by any literal
Type 'Error' does not conform to protocol 'RawRepresentable' Thx @pedrovereza if there is a way to extended the MoyaError with mine custom error  <!--
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
Using `Moya` 8.0.1 and `RxSwift` 3.1.0
```swift
```swift
Any way to not lock up my UI while using `Moya`?  <table>
</thead>
3 Warnings
</thead>
#### Warnings
```diff
Misses           195      195
```Swift
//return MyURLEncoding.queryString
return URLEncoding.queryString
var method : Moya.Method {
```swift
var parameterEncoding : Moya.ParameterEncoding {
return URLEncoding.default
struct TokenURLEncoding: Moya.ParameterEncoding {
@avicks the query is not added at all still to the url. I think it has something to do with the method type "Post". btw, i put debug point inside the function you have written and used it. the break point is never reached
```Swift
Alamofire.request(url, method: .post)
``` @iballan The query isn't added?
Would you mind elaborating on the structure behind your call? @avicks
@pedrovereza
and when the "**?**" becomes "**%3F**" , the webservice throws error this  "`A potentially dangerous Request.Path value was detected from the client (?).`"
```swift
```swift
//return MyURLEncoding.queryString
return URLEncoding.queryString
What made me think that it is **Moya**'s issue, when I use **Alamofire** as I mentioned above the URL is encoded correctly and did not change **?** to **%3F**.
Now in my code I used both Moya (because i already started with it and it is a really overhead work to roll back from it) and Alamofire (to get the POST requests' url query working correctly) üëé
```swift
```swift
```swift
```swift
</thead>
#### Warnings
```diff
Misses        191      191
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
```swift
wildListViewModel.loading
```swift
```swift
pod 'Alamofire',    '~>4.0.0'
pod 'Moya‚Äô,  	‚Äò~>8.0.0-beta.1'
```diff
Misses           195      195
</thead>
#### Warnings
</thead>
EOS
s.social_media_url   = "http://twitter.com/evermeer"
s.subspec "Alamofire" do |ss|
ss.source_files  = "Source/Alamofire/*.swift"
ss.dependency "Alamofire", "~> 4.2"
s.subspec "AlamofireXML" do |ss|
ss.source_files  = "Source/Alamofire/XML/*.swift"
ss.dependency "EVReflection/Alamofire"
# Adding easy Json to object mapping to Moya using EVReflection
s.subspec "Moya" do |ss|
ss.source_files  = "Source/Alamofire/Moya/*.swift"
ss.dependency "Moya", "~> 8.0"
ss.dependency "EVReflection/Alamofire"
# Adding easy XML to object mapping to Moya using XMLDictionary and EVReflection
ss.source_files  = "Source/Alamofire/Moya/XML/*.swift"
ss.dependency "EVReflection/AlamofireXML"
ss.dependency "EVReflection/Moya"
s.subspec "MoyaRxSwift" do |ss|
ss.source_files = "Source/Alamofire/Moya/RxSwift/*.swift"
ss.dependency "Moya/RxSwift"
ss.dependency "EVReflection/Moya"
ss.source_files = "Source/Alamofire/Moya/RxSwift/XML/*.swift"
ss.dependency "EVReflection/MoyaRxSwift"
s.subspec "MoyaReactiveSwift" do |ss|
ss.source_files = "Source/Alamofire/Moya/ReactiveSwift/*.swift"
ss.dependency "Moya/ReactiveSwift"
ss.dependency "EVReflection/Moya"
ss.dependency "EVReflection/MoyaReactiveSwift"
```diff
- Misses           191      195       +4
```diff
+ Misses           195      191       -4
```diff
+ Misses        195      191      -4
```diff
+ Misses           195      191       -4
</thead>
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
```diff
Misses        191      191
```swift
let provider = RxMoyaProvider<MyAPI>()
```swift
If it's a warning I don't think that is an issue since that is what you're doing, coercing `[String: Any]` to `Any` and using `NSNull` as a default, which is a different type from `[String: Any]`.  Any ETA on the 8.0.3 release? We're currently using the Xcode beta because the 3.1 compiler is a whole-lot faster then the 3.0 one.  # [Codecov](https://codecov.io/gh/Moya/Moya/pull/1005?src=pr&el=h1) Report
```diff
Misses        191      191
```diff
Misses        191      191
Thanks for making Moya! What if i try to use provider like this ?
```swift
import Moya
import Alamofire
var method: Moya.Method{
public var parameterEncoding: Moya.ParameterEncoding{ return URLEncoding.default}
```swift
</thead>
#### Warnings
Moya.swift | 28 | Limit vertical whitespace to a single empty line. Currently 2.
Moya.swift | 59 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya.swift | 60 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya.swift | 61 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya.swift | 62 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya.swift | 63 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya.swift | 55 | Shorthand syntactic sugar should be used, i.e. [Int] instead of Array<Int>
Moya.swift | 5 | Prefer `-> Void` over `-> ()`.
Moya.swift | 97 | Prefer `-> Void` over `-> ()`.
Moya+Internal.swift | 102 | Prefer `-> Void` over `-> ()`.
Moya+Internal.swift | 198 | Prefer `-> Void` over `-> ()`.
Moya+ReactiveCocoa.swift | 12 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+ReactiveCocoa.swift | 13 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+ReactiveCocoa.swift | 14 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+ReactiveCocoa.swift | 15 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+ReactiveCocoa.swift | 16 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+RxSwift.swift | 11 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+RxSwift.swift | 12 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+RxSwift.swift | 13 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+RxSwift.swift | 14 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Moya+RxSwift.swift | 15 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
> <https://github.com/notifications/unsubscribe-auth/AAC_jswdyUaejOlcBq5KHtllS9FD6AfVks5riN9AgaJpZM4MPIc3>
```diff
- Misses           191      195       +4
```swift
configuration.httpAdditionalHeaders = Alamofire.SessionManager.defaultHTTPHeaders
class CustomServerTrustPoliceManager : ServerTrustPolicyManager {
``` @pedrovereza - Thanks.  I already had that in my Info.plist but I'm still getting the same error...  If I hit the same https rest service from a browser I get the typical "this is not a trusted SSL certificate" warning message.  Even the error message coming from Moya states:  "Would you like to connect to the server anyway".  Here's the full error logging message again:
Using Moya (8.0.0-beta.6)
class Endpoint   import Alamofire  here showing
```diff
Misses        191      191
```diff
Misses        191      191
</thead>
</thead>
> It is technically a breaking change, though. If someone wrote code that looks for the a AFError. responseValidationFailed embedded in a MoyaError.underyling, their code will break with this update. Worse, it would probably be silent--no compiler error.
```diff
Misses        191      191
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
Moya i am Using
PODS:
- Alamofire (4.3.0)
- Moya (8.0.2):
- Moya/Core (= 8.0.2)
- Moya/Core (8.0.2):
- Alamofire (~> 4.1)
```swift
import Moya
open class BaseProvider<Target>: MoyaProvider<Target> where Target: TargetType {
```swift
import Moya
var method: Moya.Method {
```swift
What the hell with my code here, or just anyone poisoning my Xcode !!!
```diff
Misses        191      191
There is my code:
```swift
MooProvider<MooApi>(token: accessToken)
```diff
- Misses        190      191       +1
```swift
```diff
Misses        190      190
This is my parameters in moya:
"title": "asdfasdfasdf",
```diff
Misses        190      190
</thead>
</thead>
#### Warnings
throw NSError(code: .noData)
(We're using RxSwift, btw)
```swift
// In Moya+Alamofire.swift
```diff
- Carthage framework copy script is now part of the source control. <table>
</thead>
2 Warnings
</thead>
```diff
Misses        191      191
> - Will this work with both Carthage and Cocoapods? And have both been tested?
Yes this works with both. Cocoapods doesn't use the xcode project so no problem there. I've used this same thing for other projects and Carthage works too. Just tested it to make sure and it works.
> - Does this method work with Carthage prebuilt binaries incase we want to introduce that for Moya?
Carthage framework copy script is now part of the source control.
All this has been taken care of already. considering the scope of your changes, I think it's fine to accept that the Danger rules may not be fine for this run üëç  # [Codecov](https://codecov.io/gh/Moya/Moya/pull/966?src=pr&el=h1) Report
```diff
Misses        190      190
For example API:
```swift
import Moya
enum Api {
extension Api: AuthorizedTargetType {
var method: Moya.Method {
return URLEncoding.default
var urlEscaped: String {
With Plugin:
```swift
import Moya
And working code
```swift
let provider = RxMoyaProvider<Api>(
- Alamofire (4.3.0)
- Moya (8.0.2):
- Moya/Core (= 8.0.2)
- Moya (~> 8.0)
- Moya-ObjectMapper/RxSwift (2.3.1):
- Moya/RxSwift
- RxSwift (~> 3.1)
- Moya/Core (8.0.2):
- Alamofire (~> 4.1)
- Moya/RxSwift (8.0.2):
- Moya/Core
- RxSwift (3.2.0)
May be with something wrong with my Pods?
rm -rf "`pwd`/Pods/"
``` @pedrovereza Wow
With code
```swift
return URLEncoding.default
public var method: Moya.Method {
return ["api_key": "dc6zaTOxFJmzC", "username": "Moya"]
```swift
``` Thank you very much A very awkward questionüòÖ Has been resolved But I met a new problem again Forgive me, I am a little shrimp only half a year work experience My question is when I will "responsetor" into "Moya. Response" throw an error
```swift
return T(json:jsondata)
guard let response = responsetor as? Moya.Response else{
if code == 200 {
throw VendingMachineError.ParseError
throw VendingMachineError.ParseError
``` ```swift
import Moya
``` ```swift
```swift
extension MoyaProvider {
The only problem is initialize like this, will get some trouble(ambiguous use of `init`)
```swift
2 Warnings
</thead>
@pedrovereza
```swift
let rxProvider = RxMoyaProvider<MyService>.withDefaultPlugins()
```swift
// RxSwift
// ReactiveCocoa
```diff
Misses        190      190
```diff
Misses        190      190
```swift
```swift
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
```swift
PODS:
- Alamofire (4.3.0)
- Moya (8.0.2):
```swift
import Moya
var method: Moya.Method {
var urlEscaped: String {
```swift
let provider = MoyaProvider<MyService>()
provider.request(.authValidateOTP(msisdn: "+ 1234567890", code: "123456")) { result in
I see extra data in requests:
let provider = MoyaProvider<CosmoZoo>(plugins: [NetworkLoggerPlugin(verbose: true)])
Looks strange
"baz": "qux"
Alamofire.request("https://httpbin.org/post", method: .post, parameters: parameters, encoding: JSONEncoding.default)
but I'll try to perform requests with alamofire but you're right - I send
```diff
Misses        190      190
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
```swift
//  BeeHttp.swift
//  BeeAPP
import Moya
enum RequestApi{
var method: Moya.Method{
//add parame to request
return URLEncoding.default
var urlEscaped: String {
```swift
public typealias Error = MoyaError
```swift
do {
} catch let error as MoyaError {
completion(Result(error: MoyaError.underlying(error)))
```swift
guard let error = error as? CustomStringConvertible else {
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
Sure, comic about a guy making a proposal was just an off note to drop in this context, no big deal.
```swift
do {
guard let error = error as? CustomStringConvertible else {
```swift
do {
Thoughts? (words preferred ;)  @justinmakaila What you said here really resonates with my own opinion (that Moya should not get in the response deserialization game), but I also don't exactly agree with what you said.  What @michaelsand is proposing here is *not* a parser library or system, just another take on *how* to integrate a parsing layer at the call site.
I'm on board with this change.  It is backwards compatible, it feels very "functional programming"-esque, and I don't see it as opinionated as @justinmakaila seems to.  To me, this is a natural place to provide an HTTP response parser.
And, unless I'm mistaken, @michaelsand might also be agreeing with this strategy; I was re-reading the conversation here, and in his last comment he points out that extending `Moya.Response` accomplishes the same goal (I missed that the first time around).
```swift
do {
@colinta
I really like the formulation "it is a way to inform Moya how it can get out of the way of our application."
@justinmakaila Somewhat out of order:
> FWIW, my perspective is that of a ReactiveMoya user.
> Taking on @colinta's challenge for a dissenting opinion
@justinmakaila That wrapped provider looks good for another layer of safety. I feel like the integration with TargetType is so close, and was looking at solutions with hashable identifier; will keep investigating.
```swift
```swift
do {
guard let error = error as? CustomStringConvertible else {
```swift
guard let error = error as? CustomStringConvertible else {
(There's also an issue that I couldn't add `TargetTypeWithCompletion` to `TargetType.swift` because the compiler kept confusing the signature's `Result` with Alamofire's `Result` and complained.)
I've been following Moya for a while but haven't messed with workings of it before, so no idea if this could cause issues-- so curious what other people think.
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
I agree looking again the API is more complex than it should be. The wrapper solution of course occurred to me also, but it's unsatisfying, little more then inviting people to make wrapper layer to go the last mile. Notably, they're not connected to enum cases in any way except that they use them--definitely better than nothing, but not up to the rest of Moya standard for organization.
```swift
public func parse(_ response: Moya.Response) throws -> Any  {
```swift
do {
throw MoyaError.stringMapping(response) //Error approximate for demonstration
} catch let error as MoyaError {
completion(Result(error: MoyaError.underlying(error)))
```diff
Misses        190      190
#### Warnings
MoyaProvider.swift | 58 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 59 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 60 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 61 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 62 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 12 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 13 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 14 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 15 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 16 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 11 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 12 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 13 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 14 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 15 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
pod 'Alamofire', '\~> 4.3'
pod 'RxCocoa', '\~> 3.2'
pod 'Moya/RxSwift', '8.0.1'
- `Alamofire (~> 4.3)` required by `Podfile`
- `Alamofire (~> 4.2.0)` required by `Moya/Core (8.0.1)`
```diff
Misses        190      190
```swift
Moya (8.0.1)
RxSwift (3.1.0)
COCOAPODS: 1.1.1 I've continued testing it, the problem is in the current provider wrapper. `requestWithProgress` doesn't always behave reliably.
```swift
```swift
```diff
Misses        190      190
#### Warnings
MoyaProvider.swift | 58 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 59 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 60 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 61 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
MoyaProvider.swift | 62 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 12 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 13 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 14 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 15 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
ReactiveSwiftMoyaProvider.swift | 16 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 11 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 12 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 13 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 14 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
RxMoyaProvider.swift | 15 | Function parameters should be aligned vertically if they're in multiple lines in a declaration.
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
I'm in the process of building an app for a friend's website, and figured I might learn to use Moya while I'm at it. The website is using a bit non-standard way of building request links:
```swift
This is a slightly hacky way of handling it, but you'll have to handle everything in parameters.
And @scottrhoyt beat me to the punch. Worked like a charm. Many thanks, gentlemen!  I am trying to port my old network code to RxSwift Moya. Moya is very verbose but certain scenarios are not described in the documentation. Only network stack I have found with Github search is eidolon‚Äôs stack. I think in the long run I may dissect its network part but I will really appreciate if you can write an example for reactive Moya. Since almost all networking app needs some kind authorization, re-authorization, storing and retrieving tokens, Following points can be covered in the example.
```swift
/// The protocol used to define the full specifications necessary for a `MoyaProvider`.
var method: Moya.Method { get }
```swift
case .downloadMoyaWebContent(let contentPath):
return "/Moya/Moya/master/web/\(contentPath)"
public var method: Moya.Method {
case .downloadMoyaWebContent:
case .downloadMoyaWebContent:
return URLEncoding.default
case .downloadMoyaWebContent:
case .downloadMoyaWebContent:
```swift
Ultimately, the decomposition didn't feel like the right approach for this usecase.  Moya: 8.0.0
```bash
>> carthage update --platform iOS
xcodebuild: error: Scheme MoyaTests-Mac is not currently configured for the clean action.
I think Demo should be built by Carthage. Maybe some schemes are shared when they shouldn't be.  It seems 8.0.1 fixed the problem. No more error occurs.  ## [Current coverage](https://codecov.io/gh/Moya/Moya/pull/931?src=pr) is 73.72% (diff: 100%)
```diff
Misses          190        190
Partials          0          0
```swift
```swift
```swift
```diff
Misses          190        190
Partials          0          0
```diff
Misses          190        190
Partials          0          0
```diff
Misses          190        190
Partials          0          0
Moya 8.0.0
```swift
class KodiManager {
.... Lots of irrelevant code about the issue....
let provider = RxMoyaProvider<KodiProvider>(
manager: alamoManager)
```swift
class KodiManager {
kodiAddonProvider = RxMoyaProvider<KodiProvider>(
manager: alamoManager)
```swift
```swift
```swift
Please let us know what version of Moya you are using, so we can better pinpoint and/or solve your issue.
```swift
</thead>
```diff
Misses          190        190
Partials          0          0
```swift
`http://awesomeapi.com?token=mytoken`
Unfortunately the `API` I am calling, is made in a way so that it accepts the token only if it's a URL encoded parameter.
```swift
// use URLEncoding to encoding parameters
One way could be caching `Carthage/Build` and/or `Carthage/Checkout`.
Granted I can have misunderstood how Moya should be used with Carthage. ## [Current coverage](https://codecov.io/gh/Moya/Moya/pull/907?src=pr) is 73.72% (diff: 100%)
```diff
Misses          190        190
Partials          0          0
```diff
Misses          190        190
Partials          0          0
```diff
Misses          190        190
Partials          0          0
Moya 8.0.0, Swift 3
```diff
Misses          190        190
Partials          0          0
```diff
Misses          190        190
Partials          0          0
```diff
+ Misses          190        172    -18
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
- Misses          172        186    +14
Partials          0          0
```diff
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
</thead>
```diff
- Misses          172        182    +10
Partials          0          0
</thead>
```diff
Misses          186        186
Partials          0          0
```diff
Misses          172        172
Partials          0          0
2 Warnings
</thead>
```diff
Misses          186        186
Partials          0          0
2 Warnings
</thead>
print(underlyingError.localizedDescription): The operation couldn‚Äôt be completed. (Moya.Error error 5.)
</thead>
```diff
- Misses          172        186    +14
Partials          0          0
Having the following behaviours for Moya.Error and enforcing them using unit tests wouldn't be completely nonsense.
* Moya.Error enumaration cases should return non-nil errorDescription.
```swift
fileprivate func expectNonNilErrorDescriptionFor(error: Moya.Error) {
```diff
+ Misses          186        172    -14
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
- Misses          190        193     +3
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
- Misses          172        463    +291
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
Misses          172        172
Partials          0          0
```diff
Partials          0          0
```diff
Partials          0          0
```diff
Misses          463        463
Partials          0          0
```diff
- Misses          459        735   +276
Partials          0          0
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
</thead>
```swift
```diff
Misses          463        463
Partials          0          0
```swift
```swift
var parameterEncoding: Moya.ParameterEncoding { get }
```swift
var parameterEncoding: Moya.ParameterEncoding {
return URLEncoding.default
3: In the Moya+Defaults.swift file
```swift
</thead>
</thead>
```swift
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
#### Warnings
Moya+Internal.swift | 111 | Prefer `-> Void` over `-> ()`.
Moya+Internal.swift | 210 | Prefer `-> Void` over `-> ()`.
Moya.swift | 5 | Prefer `-> Void` over `-> ()`.
Moya.swift | 96 | Prefer `-> Void` over `-> ()`.
```swift
#### Warnings
Moya+Internal.swift | 111 | Prefer `-> Void` over `-> ()`.
Moya+Internal.swift | 210 | Prefer `-> Void` over `-> ()`.
Moya.swift | 5 | Prefer `-> Void` over `-> ()`.
Moya.swift | 96 | Prefer `-> Void` over `-> ()`.
```diff
Misses          463        463
Partials          0          0
Moya: 8.0.0-beta.5
```swift
```swift
var method: Moya.Method{
```swift
```swift
Shivayogi Can some one help me on how to test without Nimble?
Is there a proper way to use collection view / table view with moya?
```swift
```swift
```swift
let provider = MoyaProvider<Endpoint>()
```swift
var method: Moya.Method {
```swift
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
there's been 2 issues:
I changed the code that @justinmakaila provided a little bit and it worked for me:
```swift
provider = RxMoyaProvider<GitHub>(
stubClosure: MoyaProvider.neverStub,
```swift
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
#### Warnings
Moya+Internal.swift | 111 | Prefer `-> Void` over `-> ()`.
Moya+Internal.swift | 210 | Prefer `-> Void` over `-> ()`.
Moya.swift | 5 | Prefer `-> Void` over `-> ()`.
Moya.swift | 96 | Prefer `-> Void` over `-> ()`.
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
```swift
```swift
```swift
```swift
is introducing side effects it will be a problem when multiple dataModel() calls will occur (race condition)
> *** Building scheme "Moya" in Demo.xcworkspace
I'm using Xcode 8.0, Carthage 0.18.1
> github "Alamofire/Alamofire"
> github "Moya/Moya"
> carthage build --platform iOS
> carthage update --platform iOS
> github "Alamofire/Alamofire" "4.2.0"
> github "Moya/Moya" "3.0.0"
I remove others framework and keep Moya only:
> github "Moya/Moya"
After running Carthage turns out another error:
> $ carthage update --platform iOS
> *** Fetching Moya
> *** Fetching RxSwift
> *** Fetching Alamofire
> *** Checking out Moya at "7.0.4"
> *** xcodebuild output can be found in /var/folders/1n/81b947wj2_12d0s_xnps_ptw0000gn/T/carthage-xcodebuild.hgN728.log
> *** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
> xcodebuild: error: Unable to read project 'Pods.xcodeproj' from folder '/Users/nah/Data/Projects/My/Carthage/Checkouts/Moya/Demo/Pods'.
> 	Reason: Project /Users/nah/Data/Projects/My/Carthage/Checkouts/Moya/Demo/Pods/Pods.xcodeproj cannot be opened because it is missing its project.pbxproj file.
> $ carthage update --platform iOS
> *** Fetching Moya
> *** Fetching RxSwift
> *** Fetching Alamofire
> *** Checking out Moya at "8.0.0-beta.5"
> *** xcodebuild output can be found in /var/folders/1n/81b947wj2_12d0s_xnps_ptw0000gn/T/carthage-xcodebuild.MApVEr.log
> *** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
> xcodebuild: error: Unable to read project 'Pods.xcodeproj' from folder '/Users/nah/Data/Projects/My/Carthage/Checkouts/Moya/Demo/Pods'.
> 	Reason: Project /Users/nah/Data/Projects/My/Carthage/Checkouts/Moya/Demo/Pods/Pods.xcodeproj cannot be opened because it is missing its project.pbxproj file.
Cartfile
> github "Moya/Moya" >= 8.0
> github "Alamofire/Alamofire" "4.2.0"
> github "antitypical/Result" "3.1.0"
4. Add `github "Moya/Moya" >= 8.0`
> github "Moya/Moya" >= 8.0
> github "Alamofire/Alamofire"
> *** Fetching realm-cocoa
> *** Fetching SwiftyJSON
> *** Fetching Alamofire
> *** Fetching Moya
> *** Fetching RxSwift
> *** Downloading realm-cocoa.framework binary at "v2.1.1"
> *** Checking out Moya at "8.0.0-beta.5"
> *** xcodebuild output can be found in /var/folders/1n/81b947wj2_12d0s_xnps_ptw0000gn/T/carthage-xcodebuild.BfYI4k.log
> *** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
> *** Building scheme "Moya iOS" in Moya.xcodeproj
```swift
```swift
```swift
do {
do {
do {
do {
usge:
```swift
```swift
</thead>
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
```diff
Misses          463        463
Partials          0          0
The idea is to build a `MoyaProvider` variant which does not have any template variable at the class level, but instead at the `request` method level.
```swift
protocol DecodableTargetType: Moya.TargetType {
```swift
var method: Moya.Method { ... }
To invoke the api
```swift
</thead>
Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines
Moya.swift | 41 | Limit vertical whitespace to a single empty line. Currently 2.
Moya.swift | 417 | Limit vertical whitespace to a single empty line. Currently 2.
Moya.swift | 530 | File should contain 400 lines or less: currently contains 530
Moya.swift | 530 | Files should have a single trailing newline.
Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration.
Moya.swift | 402 | Else and catch should be on the same line, one space after the previous declaration.
Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11
Moya.swift | 149 | Shorthand syntactic sugar should be used, i.e. [Int] instead of Array<Int>
</thead>
```diff
Misses          464        464
Partials          0          0
```diff
Misses          464        464
Partials          0          0
```diff
Misses          464        464
Partials          0          0
```diff
Partials          0          0
```swift
let auctionEndpoint: ArtsyAPI = ArtsyAPI.auctionInfo(auctionID: auctionID)
Thus, AppViewController is now aware that the request uses `JSON` & it is deciding the type `Sale` in which the `JSON` should be parsed into.
What would be a good way to achieve this?
```swift
protocol Api {
associatedtype Request
extension Api {
extension Api where Result: ModelProtocol {
With this, Api can be declared using a struct
```swift
struct AuctionInfo: Api {
```swift
```swift
protocol DecodableTargetType: Moya.TargetType {
@justinmakaila @AndrewSB Thank you for your inputs. I will be going ahead with creating a wrapper over MoyaProvider.  My ios deployment target is 9.0 for all targets and project.
```ruby
pod 'Alamofire', '4.0'
pod 'SVProgressHUD'
pod 'Crashlytics'
pod 'RealmSwift'
pod 'RxSwift'
pod 'RxCocoa'
pod 'Moya', '8.0.0-beta.5'
pod 'Moya/RxSwift'
pod 'SwrveSDK'
```swift
import Moya
do {
var method: Moya.Method {
var urlEscapedString: String {
call code snappet
```swift
resp in
```diff
Misses          464        464
Partials          0          0
```swift
Optional({
"otp_code": [
"The selected otp code is invalid."
```swift
Optional({
```swift
Optional({
```swift
But it gives me runtime exception Hey @BasThomas  Thanks a lot, I did all of that you said before And I realised a lot later the problem is not with Moya so I apologise for that.
</thead>
#### Warnings
Moya.swift | 54 | Shorthand syntactic sugar should be used, i.e. [Int] instead of Array<Int>
```diff
Misses          464        464
Partials          0          0
#### Warnings
Moya.swift | 54 | Shorthand syntactic sugar should be used, i.e. [Int] instead of Array<Int>
```diff
Misses          464        464
Partials          0          0
> Carthage users can point to this repository and use whichever generated framework they'd like, Moya, RxMoya, or ReactiveMoya. The full Moya framework is bundled in each of those frameworks; importing more than one framework in a single file will result in ambiguous lookups at compile time.
The domain of the `NSError` that I see is `Moya.Error`. Also, it doesn't appear that the `userInfo` dictionary contains any items, and I can't see where in the code this would be the case. Maybe there is some magic happening under the hood when bridging `Error` to `NSError`?
```swift
let error = error as? Moya.Error,
```diff
Misses          464        464
Partials          0          0
```diff
Misses          464        464
Partials          0          0
#### Warnings
Moya.swift | 54 | Shorthand syntactic sugar should be used, i.e. [Int] instead of Array<Int>
```diff
Misses          464        464
Partials          0          0
```diff
Misses          464        464
Partials          0          0
```diff
Misses          464        464
Partials          0          0
```diff
Partials          0          0
```swift
public var method: Moya.Method {
OKÔºåit seems a good idea ~  Migrating from Swift 2 to swift 3 produced breaking changes in moya.
It used to be a switch case sort of away to handle them... is this still present?
Thanks! @sunshinejr
```swift
```diff
- Misses          462        464     +2
Partials          0          0
```swift
I use Swift3, and need to support iOS8.0 Thanks!  ## [Current coverage](https://codecov.io/gh/Moya/Moya/pull/797?src=pr) is 83.10% (diff: 100%)
```diff
Misses          462        462
Partials          0          0
```swift
static let provider = ReactiveCocoaMoyaProvider<MyService>()
I'm aware that I clearly didn't get something about the whole Signal and SignalProducer thing. Does someone have an idea how I could resolve this issue or what general best practices are for use with Moya?
```diff
Misses          456        456
Partials          0          0
```swift
#### Warnings
```diff
Misses          456        456
Partials          0          0
```swift
``` diff
- Misses          368        456    +88
Partials          0          0
```swift
```swift
```swift
``` no, it says ```Error Domain=NSCocoaErrorDomain Code=262 "The file couldn‚Äôt be opened because the specified URL type isn‚Äôt supported."```
```swift
var method: Moya.Method {
var urlEscapedString: String {
``` the reson `Error Domain=NSCocoaErrorDomain Code=262 "The file couldn‚Äôt be opened because the specified URL type isn‚Äôt supported."` is someting wrong with `DefaultDownloadDestination ` , I use an `endpointClosure` to correct the urlÔºåand it works! but I don't know if it's a common   way.@bchrobot @BasThomas
```swift
import Moya
do {
var method: Moya.Method {
var urlEscapedString: String {
```swift
```  Any chance for instructions on how to add Moya to a project manually? I would love the fully spelled out idiot/newbie version if you don't mind?
```diff
- Misses          456        462     +6
Partials          0          0
</thead>
#### Warnings
</thead>
</thead>
``` diff
Misses          368        368
Partials          0          0
</thead>
</thead>
#### Warnings
``` diff
- Misses          368        374     +6
Partials          0          0
``` diff
- Misses          368        374     +6
Partials          0          0
</thead>
</thead>
``` diff
- Misses          368        374     +6
Partials          0          0
</thead>
</thead>
</thead>
</thead>
``` diff
Misses          368        368
Partials          0          0
#### Warnings
| Moya.swift | 28 | Limit vertical whitespace to a single empty line. Currently 2. |
``` diff
Misses          368        368
Partials          0          0
```swift
```Swift
extension UserService: MoyaService {
var method: Moya.Method {
``` diff
Misses          368        368
Partials          0          0
This functionality will allow to optionally configure `Alamofire` validation on some requests (you can see an example in the documentation).
</thead>
#### Warnings
| Moya.swift | 28 | Limit vertical whitespace to a single empty line. Currently 2. |
``` diff
- Misses          365        368     +3
Partials          0          0
Should I also add the change in the Changolog.md?
When you directly use Alamofire, this error would appear if you call `validate()` on a DataRequest.
`let alamoRequest = manager.request(request as URLRequestConvertible).validate()`
#### Warnings
| Moya.swift | 28 | Limit vertical whitespace to a single empty line. Currently 2. |
```ruby
target 'RxMoyaExample' do
pod 'Moya', '8.0.0-beta.2'
pod 'Moya/RxSwift'
pod 'RxSwift'
pod 'RxCocoa'
```diff
- Misses        165      173       +8
1 Warning: The <code>Cartfile</code> or <...
</thead>
#### Warnings
#### Errors
#### Warnings
| Moya.swift | 28 | Limit vertical whitespace to a single empty line. Currently 2. |
``` diff
Misses          365        365
Partials          0          0
`public var task: Moya.Task { get }` is now required, this adds it to the setup documentation. @AndrewSB Your example seems more clear to me, I can update. I think adding other Task types may be too complex for `Basic.md`, but I don't have a strong preference either way.
#### Warnings
| Moya.swift | 28 | Limit vertical whitespace to a single empty line. Currently 2. |
``` diff
Misses          365        365
Partials          0          0
I have encountered below error when I updated Moya in Carthage.
Please help me!
``` Carthage Version: 0.18.1
I also have an issue when resolving Moya dependencies in the following line
The specific error in xcodebuilt output is `duplicate symbol __TMRbBp` in `...KVOObservable.o` and `...UIButton+Rx.o` which might be related to [this issue](https://github.com/ReactiveX/RxSwift/issues/970)
I've got the same error of "RxCocoa Building error".
I don't know this is because RxSwift or Moya.
Ld /Users/Alan/Library/Developer/Xcode/DerivedData/Rx-fruannoazmfefrheaohcpygimphr/Build/Intermediates/Rx.build/Release-iphoneos/RxCocoa-iOS.build/Objects-normal/arm64/RxCocoa normal arm64
Ld /Users/Alan/Library/Developer/Xcode/DerivedData/Rx-fruannoazmfefrheaohcpygimphr/Build/Intermediates/Rx.build/Release-iphoneos/RxCocoa-iOS.build/Objects-normal/armv7/RxCocoa normal armv7
CreateUniversalBinary /Users/Alan/Library/Developer/Xcode/DerivedData/Rx-fruannoazmfefrheaohcpygimphr/Build/Products/Release-iphoneos/RxCocoa.framework/RxCocoa normal armv7\ arm64
Also checkout Moya from master.
Is it possible in Moya to have a request having both POST & GET parameters ?
Moya saves a lot of time for me by supporting mocks like this:
```swift
Moya is super powerful. Thank you all.
// moyaapi.swift
public enum MoyaAPI {
// customAPIClosure.swift
class MoyaAPIClosures{
// Do CSRF HERE
// customvc.swift
// Explicit Data Updates
Questions:
.catchError(parseMoyaError)
I'm trying to understand what is going on here with your protocol
Where does TargetType and ProxyAPIType come from?
```swift
```swift
```swift
``` diff
Misses          363        363
Partials          0          0
@AndrewSB  `carthage update`
Yes, you're right. This file only affects `carthage bootstrap`.
I'd say Moya is good to go for IPv6.
``` diff
Misses          363        363
Partials          0          0
manager: Manager = Alamofire.SessionManager.default,
import Alamofire
static let sharedManager: DefaultAlamofireManager = {
configuration.httpAdditionalHeaders = Alamofire.SessionManager.defaultHTTPHeaders
and you should put DefaultAlamofireManager into the your provider like this:
manager: DefaultAlamofireManager.sharedManager,
@AndrewSB how To Target special setup?
tks ```swift
``` ruby
pod 'Moya', "~>8.0.0-beta.2"
``` ruby
pod 'Moya'
``` ruby
pod 'Moya', '0.9'
``` ruby
pod 'Moya', '>0.1'
``` ruby
pod 'Moya', '>=0.1'
``` ruby
pod 'Moya', '<0.1'
``` ruby
pod 'Moya', '<=0.1'
``` ruby
pod 'Moya', '„Äú>0.1.2'
``` ruby
pod 'Moya', :head
``` ruby
``` ruby
pod 'Moya', :configurations => ['Release', 'App Store']
You also can download `Moya` to local, and use
``` ruby
``` ruby
pod 'Moya', "8.0.0-beta.2"
``` ruby
pod 'Moya', "~>8.0.0-beta.2"
``` ruby
pod 'Moya', "8.0.0-beta.2"
``` ruby
pod 'Moya', "~>8.0.0-beta.2"
`\"En kort information om Passalen\\r\\n\\r\\nSer bra ut va? :)\"`
do {
Yes looks like the original '\' are getting escaped and also the '"'
guard let error = e as? Moya.Error else { throw e }
``` diff
Misses          363        363
Partials          0          0
</thead>
``` diff
- Misses          363        365     +2
Partials          0          0
``` diff
Misses          363        363
Partials          0          0
``` diff
Misses          363        363
Partials          0          0
Seeing if this sorts out the Carthage issues in https://github.com/Moya/Moya/issues/726
``` diff
Misses          363        363
Partials          0          0
I'm currently getting some sort of cyclical dependency bug (I think) from Carthage when I do. It just keeps fetching RxSwift perpetually.
My code
public var parameterEncoding: Moya.ParameterEncoding {
I am using  this version of Moya 'Moya', '8.0.0-beta.2'
Please help
```swift
My main issue with staying in beta is that the main reason seems to the optional subspecs dependencies and that only Moya 8 is compatible with Swift 3 - which is out for a while. I don't like the idea of "being stuck" because of RxSwift/RAC as none of those are dependencies of my project.
Thanks for the update, Ash! üíØ
``` diff
+ Misses          365        363     -2
Partials          0          0
// Moya.swift
Thanks Ash - still feels slightly fishy to have to provide a URL that should never be used, plus a fallback (`NSURL()`) that returns a known fatal error. What would the ramifications be of making `baseURL` optional, I wonder? Likely a can of worms, I guess?
</thead>
``` diff
- Misses          390        394     +4
Partials          0          0
</thead>
</thead>
``` diff
+ Misses          390        361    -29
Partials          0          0
import Moya
import Alamofire
public enum CCV2Api {
public var method: Moya.Method {
return bodyParam
public var parameterEncoding: Moya.ParameterEncoding {
return ParameterEncoding.Custom(MyAPICallCustomEncodingClosure)
Ambiguous reference to member 'ParameterEncoding'. Am i doing something wrong?
@BasThomas Even after changing to .custom still I am facing the same issue
Hi, When i want to use `Moya`, i find that:
```objc
var method: Moya.Method { get }
@BasThomas
@BasThomas
@BasThomas thanks!
``` diff
Misses          390        390
Partials          0          0
{"policy":"CiAgICA...",
"signature":"RYm9...",
"AWSAccessKeyId":"AKI...",
`["Accept": "application/json", "Accept-Language": "", "Content-Type": "multipart/form-data; boundary=alamofire.boundary.05a9529d0374a3b8"]`
As I understand, framework / target depends on RxSwift or ReactiveSwift ( choose either ).
How do you solve dependency for cocoapods and for carthage simultaneously?
We don't solve it for both at the same time. For Carthage we use the xcodeproj and for cocoapods we use the podspec.
@petester42 but there are ReactiveSwift and RxSwift in some targets. ( `import RxSwift` or `import ReactiveSwift` statements )
How do you build them in case of `carthage update`.
( As I mentioned above, ReactiveSwift or RxSwift )
So, how do you specify an 'optional' dependency from ReactiveSwift and from RxSwift for `carthage update`?
However, Moya, as I understand, uses Alamofire under the hood ( dependency ).
Also there are several Moya versions - ReactiveMoya ( + ReactiveSwift ) and RxMoya ( RxSwift ).
So different version of Moya uses different set of dependencies.
Moya has core that uses Alamofire.
RxMoya uses Moya and RxSwift.
Strange for Carthage.
Carthage idiom is 'module without dependencies'. All dependencies are linked together in your app ( final point ).
So, how do you make your scheme for Carthage?
Moya: Core + Alamofire
Cocoapods could solve this dependency tree in a several lines.
Carthage can not. ( My knowledge ).
@cocoatoucher Have you find out the solution?
```ruby
Update: Alamofire is throwing errors as well
``` ruby
# Comment this line if you're not using Swift and don't want to use dynamic frameworks
pod 'Moya/RxSwift'
pod 'Moya/ReactiveCocoa'
pod 'SwiftyJSON'
pod 'GMStepper'
/// Note the additional NSURLResponse field
I'm currently trying to implement a cache solution with a custom URLCache (and modify some cache methods like in this example (http://stackoverflow.com/a/19847811), Moya/Alamofire and therefore I'm using a custom SessionManager with my provider which configures the URLCache to use.
Especially this part is interesting:
URLCache.shared = myCustomURLCache
let alamoRequest = manager.request(request as URLRequestConvertible)
print(alamoRequest.request?.cachePolicy.rawValue) // wrong
Is this behavior intended in any way?
``` diff
Misses          390        390
Partials          0          0
</thead>
This seems to be related to #681
``` diff
Misses          369        369
Partials          0          0
``` diff
Misses          369        369
Partials          0          0
</thead>
</thead>
``` Swift
</thead>
``` diff
Misses          369        369
Partials          0          0
public var encoding: Moya.ParameterEncoding {
return URLEncoding()
``` Swift
var encoding: Moya.ParameterEncoding = JSONEncoding()
encoding = URLEncoding()
@marcelofabri I'll give that a shot.
``` diff
Misses          369        369
Partials          0          0
``` diff
Misses          369        369
Partials          0          0
``` diff
Misses          369        369
Partials          0          0
Are you using cocoapods 1.1.0.rc.2? Using it fixed all my problems related to lint fails.
Seems like Circle is complaining about RxSwift. I saw `error: assigning non-escaping parameter 'selector' to an @escaping closure` in this build.
``` diff
- Misses          363        369     +6
Partials          0          0
Partly, that is what `~>` use for version requirement compatibility in Cartfile, since Carthage's compatibility is determined according to Semantic Versioning.
</thead>
Hey guys. I've got build errors when I try to update Moya by carthage:
`carthage update Moya --platform iOS`
Errors:
It seems ReactiveCocoa has changed sendFailed to send(error:), and sendNext to send(value:).
@ashfurrow There are some files that are not being found for example `Moya + Internal.swift`, is giving 404 error.
@leoneparise and @sunshinejr
> https://localhost:3000/api/handler/fileviewer/slave?__form_token=g36dn786ab&relkind=datatemplate.message&filelinkkind=&target=-1&tmpId=-1
enum TestApi {
return "/handler/fileviewer/slave?__form_token=" + token + "&relkind=datatemplate.message&filelinkkind=&target=-1&tmpId=-1"
var method: Moya.Method {
</thead>
do {
</thead>
</thead>
I don't know how to do it but if there are some clue on Moya how to do it, I can try !
</thead>
</thead>
Updated Alamofire and RxSwift versions
#### Errors
</thead>
</thead>
``` diff
Partials          0          0
</thead>
2 Warnings
</thead>
#### Errors
</thead>
2 Warnings
</thead>
#### Errors
```swift
``` ruby
pod 'RxCocoa', '~> 3.0.0-beta.1'
Yes, I do it with Custom `RequestClosure` and add string with structure I want I know this is not a good practice but solve the problem :)
</thead>
```diff
Misses          186        186
Partials          0          0
github "thoughtbot/Argo"
github "thoughtbot/Curry"
github "Moya/Moya" ~> 7.0
Removing all those occurences gives the next error, something with `RxRxReactiveMoya` etc.
carthage build --platform mac
I'm wondering where this `RxReactiveRxMoya` namespace is coming from.   :/
I‚Äôm sorry but I‚Äôve stopped using Moya.  : /. In fact I‚Äôve stopped using Swift‚Ä¶ for the next months until some standardized package manager appears.  ; )
this could help poeple who is waiting for a swift 3 Moya dependency in their podspec.
@ashfurrow I'm not sure but if:
#### Errors
Just wondering why the .podspec  (of the Swift 3.0 version) has a minimum requirement of iOS 9. According to https://developer.apple.com/support/app-store/ iOS 8 is still 9% of the market share, and our app tends to target people with slower adoption rates.
#### Errors
``` diff
Misses          215        215
Partials          0          0
</thead>
</thead>
#### Errors
@ashfurrow Sounds interesting, thanks!
public extension MoyaProvider {
So what should i do to fix that ? @BasThomas
pod 'Moya', '~> 7.0.0'
Using Moya (7.0.2)
pod 'Moya', '~> 7.0.0'
Installing Moya 7.0.2 (was 6.5.0)
@sunshinejr thx.
``` diff
Misses          215        215
Partials          0          0
@BasThomas Thanks!
``` diff
Misses          215        215
Partials          0          0
Carthage version: 0.18
Moya version: 7.0.2
github "Moya/Moya" ~> 7.0
$ carthage bootstrap --platform iOS
*** Fetching Moya
*** Fetching RxSwift
*** Fetching Alamofire
*** Checking out Alamofire at "3.5.0"
*** Checking out ReactiveCocoa at "v4.2.2"
*** Checking out RxSwift at "2.6.0"
*** Checking out Moya at "7.0.2"
*** xcodebuild output can be found in /var/folders/d1/h0cf2xs12gv7w1wx5k41q7sc0000gp/T/carthage-xcodebuild.7jZFKG.log
*** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
*** Building scheme "Moya iOS" in Moya.xcodeproj
CARTHAGE = YES
@sunshinejr What if we need moya with rxswift and swift 3.0?
What is the rxswift for moya?
@BasThomas The RxSwift branch
use of undeclared type RxMoyaProvider...the same problem,how to slove
``` ruby
@sunshinejr thank you ,it works well
``` Swift
This is my pod:
pod 'Moya', '~> 7.0.0'
Here is pod log:
</thead>
3 Warnings
</thead>
#### Errors
Like `MoyaProvider<APIService>` ?
I don't really understand the architecture of Moya.
``` diff
Misses          215        215
Partials          0          0
</thead>
``` diff
Partials          0          0
my moya config
public var method: Moya.Method {
public var parameterEncoding: Moya.ParameterEncoding {
return ParameterEncoding.Custom(MyAPICallCustomEncodingClosure)
get this errror
why get this error , i use OC call swift functionÔºåis this reason? swift project is fine.
let WebServiceProvider =  MoyaProvider<WebServices>(plugins: [NetworkLoggerPlugin(verbose: true, responseDataFormatter: JSONResponseDataFormatter)])
httpHeaderFields: ["X-ApiKey": ApiKey,
public var parameterEncoding: Moya.ParameterEncoding {
return ParameterEncoding.Custom(MyAPICallCustomEncodingClosure)
</thead>
</thead>
#### Errors
What are the different circumstances in which on would utilize them?
@ashfurrow Would love to see more on authentication documentation using OAuth/JWT and how to store and mange tokens to be integrated with Moya.
I've been poking around the following code from eidolon and ello...
https://github.com/artsy/eidolon/blob/master/Kiosk/App/Networking/Networking.swift
@ashfurrow Is XAppTokenRequest different from a normal acess_token? I'm a bit confused here. Or is XAppTokenRequest supposed to request back a new JWT?
</thead>
</thead>
#### Errors
#### Errors
</thead>
</thead>
#### Errors
</thead>
#### Errors
#### Errors
#### Errors
</thead>
2 Warnings
</thead>
I am trying to build Moya using Carthage, but some errors appear and build fails.
It looks like dependency to Alamofire causes this error but I can't find what I should do.
``` diff
- Misses          214        538    +324
Partials          0          0
Thank you @ashfurrow I was surprised too. It looks pretty weirdly. I have checked all stuff twice and didn't find any reason for this behavior.
Hello @BasThomas I have changed server side for accepting ups in String. Not very good solution :)
@ashfurrow Thanks!
``` diff
Misses          217        217
Partials          0          0
let name: String
``` diff
Misses          217        217
Partials          0          0
i tried same with alamofire and it is working fine.
can you please help me to upload image or multipart data using moya please ?
Hello leoneparise,
enum SomeAPI {
var method: Moya.Method {
import Moya
import Alamofire
``` ruby
pod 'Moya'
pod 'Moya', '7.0.0'
- `Moya (= 7.0.0)` required by `Podfile`
- `Moya (= 7.0.0)` required by `Podfile`
Another error
``` ruby
pod 'ALCameraViewController'
pod 'FBSDKShareKit'
pod 'SwiftyTimer'
pod 'SwiftyJSON'
pod 'SwiftGen'
pod 'Alamofire', '~> 3.1.0'
pod 'PKHUD'
pod 'Moya', '~> 7.0.0'
pod 'Moya/RxSwift'
``` ruby
pod 'Moya', '~> 7.0.0'
enum TestApi {
var method: Moya.Method {
@sunshinejr exactly that was the issue,
I used already this solution with Custom parameter encoding. But It did not resolve a problem.
`if let moyaError = error as? Moya.Error {`
Any ideas on how to get rid of that warning?
if case Moya.Error.Underlying(let error) = error {
</thead>
</thead>
</thead>
// token
I'm new to Moya. Thanks!
The real magic is in [ElloProvider](https://github.com/ello/ello-ios/blob/master/Sources/Networking/ElloProvider.swift) though.
@justinmakaila Would love to your take on how to implement Moya with an authentication of using JWT. But prior to firing off each request back to the server, the token is to be checked, and if expired, the token should be refreshed prior to firing off the next request. I know this has something to do with promises, but I'm sure where I can some how do a callback wrapper per request with moya.
3. At the let provider = MoyaProvider line, is this now being wrapped by requestClosure? where it now knows
let provider = MoyaProvider(requestClosure: requestClosure) <<< So is every request with this provider wrapped with request closure to check for token expiration?
Denis
pod 'Moya', :path => "../"
#  pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya/RxSwift', :path => "../"
pod 'RxCocoa', '~> 3.0.0.alpha.1'
Fetching podspec for `Moya` from `../`
Does anyone have any idea why this error would be generated? Or, failing that, has anyone been able to get the demo app running with AF4 and RxSwift 3?
I am new to Moya.
Should Moya be used in conjunction with Promise?
@colinta Is there a reason for you guys to choose FutureKit over PromiseKit?
error errorCallback: @escaping (_ error: Moya.Error) -> Void
do {
class AuthenticatedProvider : RxMoyaProvider<ApiDefinition> {
URL: NSURL(string:"URLGOESHERE")!)
endpoint: awsEndpoint)
stubClosure: StubClosure = MoyaProvider.NeverStub,
request.addValue(date,forHTTPHeaderField: "X-Amz-Date")
credentialsProvider.credentials().continueWithBlock {(task: AWSTask!) -> AnyObject? in
endpoint: awsEndpoint)
</thead>
</thead>
</thead>
</thead>
> No coverage report found for **master** at 87bbac2.
``` diff
Misses          203        203
Partials          0          0
I have mixed feelings about using a `guard` here.
``` diff
Misses          203        203
Partials          0          0
``` diff
Misses          203        203
Partials          0          0
enum MyAPI {
return MyURI.CREATE_OBJ
var method: Moya.Method {
@samirGuerdah
It may not be Moya that causes this error code **413**, but my code of using Moya may cause this, because the multipart form data is a relatively new feature in Moya and there has not been much tutorial or documentation on how to use it.
I have tried Alamofire, PostMan in Chrome browser, and they all work until I came to try **Moya**
@colinta
@leoneparise , below is my code in using Alamofire, my original post includes my Moya code:
Here's my code
import Moya
var method: Moya.Method {
var URLEscapedString: String {
Am I doing something wrong here?
Right now, i can cast it as customconvertiblestring, but i lose the parsing, and if i cast it as error, i do not get the needed information (999)
let provider = MoyaProvider(endpointClosure: endpointClosure)
</thead>
``` diff
Misses          206        206
Partials          0          0
two things worth noting:
</thead>
</thead>
``` diff
Partials          0          0
In Moya+Internal.swift the case for uploading with a PATCH is not allowed.
> In Moya+Internal.swift the case for uploading with a PATCH is not allowed.
A slick way to do this would be to add an extension to `Moya.Method` (aka `Alamofire.Method`) that adds `var supportsMultipart: Bool`, then we can add specs for that var.
``` diff
Misses          390        390
Partials          0          0
</thead>
3 Warnings
</thead>
I believe a better solution would be to provide our own flag to do the same thing so that was we are not dependent on cocoapods having this flag. We can simply add our own flag to `Other Swift Flags` by adding `-DNEEDS_MOYA` or something to our targets. That way we check for `#if NEEDS_MOYA` in the code instead. It's basically the same but I like that better.
![image](https://cloud.githubusercontent.com/assets/1916041/17272691/af68ea6e-5673-11e6-8024-5e6c1a7956dd.png)
</thead>
``` diff
- Misses          200        206     +6
Partials          0          0
</thead>
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
CocoaPods 0.39.0
Moya 7.0
Fix typo about refreshToken.
As it is we will have to either have an abstraction of an abstraction or have the code know it's calling Moya or non-moya code.
Moving the abstraction up a layer works nice though: RxSwift is great for mapping both variants into streams. (I use it all the time.)
- Puts Multipart Upload type in UploadType enum
- An _Alamofire_ response is now considered _Successful_ even if doesn't have any data with it and we return a _Moya_ response from it using an empty _NSData_ when converting
</thead>
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 395 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 390 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 395 | There should be no space before and one after any comma. |
| Moya.swift | 188 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 59 lines |
| Moya.swift | 390 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 395 | Return arrow and return type should be separated by a single space or on a separate line. |
| Moya.swift | 389 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 188 | Function should have complexity 10 or less: currently complexity equals 14 |
| Moya.swift | 520 | File should contain 400 lines or less: currently contains 520 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
``` diff
- Misses          190        200    +10
Partials          0          0
I think the underlying issue (speaking from the perspective of the compiled code that Carthage gives us) is that you can't pass a Moya.TargetType to an RxMoyaProvider.
@petester42 can you talk more about the Carthage errors?
When I try to manually run what carthage uses to build the RxMoya iOS scheme (which is `xcrun xcodebuild -project /Users/asb/Desktop/Bruh/Carthage/Checkouts/Moya/Moya.xcodeproj -scheme "RxMoya iOS" -configuration Release -sdk iphoneos ONLY_ACTIVE_ARCH=NO BITCODE_GENERATION_MODE=bitcode CODE_SIGNING_REQUIRED=NO CODE_SIGN_IDENTITY=  CARTHAGE=YES clean build`) here's the output I get:
xcrun xcodebuild -project /Users/asb/Desktop/Bruh/Carthage/Checkouts/Moya/Moya.xcodeproj -scheme "RxMoya iOS" -configuration Release -sdk iphoneos ONLY_ACTIVE_ARCH=NO BITCODE_GENERATION_MODE=bitcode CODE_SIGNING_REQUIRED=NO CODE_SIGN_IDENTITY=
Stranger still: If I do a clean clone of Moya/Moya `master`, and I try the same `xcrun` with the `RxMoya iOS` target, it works, major steps:
It won't build with cocoapods in you have `import Moya` anywhere because it is building Moya itself.
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 400 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 500 | File should contain 400 lines or less: currently contains 500 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 400 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 500 | File should contain 400 lines or less: currently contains 500 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 400 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 500 | File should contain 400 lines or less: currently contains 500 |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
I've joined the organization. Thank you for your invitation. I've checked out your guidelines and its details. I'd like to involve the Moya in some form or other because I use it in my project.
``` Swift
hazAPI = MoyaProvider<ICanHazProvider>(endpointClosure: endpointClosure, requestClosure: requestClosure)
``` Swift
var encoding: Moya.ParameterEncoding = .JSON
``` Swift
hazAPI = MoyaProvider<ICanHazProvider>(endpointClosure: endpointClosure, requestClosure: requestClosure)
Having a related issue.
@ashfurrow Is this a known issue or are we all doing something wrong? Any help would be greatly appreciated.
``` Swift
``` Swift
So - the issue is really weird.
MoyaProvider.RequestClosure  can not
</thead>
``` diff
Misses          190        190
Partials          0          0
@ashfurrow Cool üçª !
The obviously terrible, poor man's way to do it:
</thead>
| Moya.swift | 355 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 356 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 338 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 358 | Force unwrapping should be avoided. |
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 337 | Lines should not have trailing whitespace. |
| Moya.swift | 352 | Lines should not have trailing whitespace. |
| Moya.swift | 362 | Lines should not have trailing whitespace. |
| Moya.swift | 375 | Lines should not have trailing whitespace. |
| Moya.swift | 388 | Lines should not have trailing whitespace. |
| Moya.swift | 413 | Lines should not have trailing whitespace. |
| Moya.swift | 414 | Lines should not have trailing whitespace. |
| Moya.swift | 485 | Lines should not have trailing whitespace. |
| Moya.swift | 497 | Lines should not have trailing whitespace. |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 399 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 499 | File should contain 400 lines or less: currently contains 499 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 355 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 356 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 338 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 358 | Force unwrapping should be avoided. |
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 337 | Lines should not have trailing whitespace. |
| Moya.swift | 352 | Lines should not have trailing whitespace. |
| Moya.swift | 362 | Lines should not have trailing whitespace. |
| Moya.swift | 375 | Lines should not have trailing whitespace. |
| Moya.swift | 388 | Lines should not have trailing whitespace. |
| Moya.swift | 413 | Lines should not have trailing whitespace. |
| Moya.swift | 414 | Lines should not have trailing whitespace. |
| Moya.swift | 485 | Lines should not have trailing whitespace. |
| Moya.swift | 497 | Lines should not have trailing whitespace. |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 399 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 499 | File should contain 400 lines or less: currently contains 499 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 355 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 356 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 338 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 358 | Force unwrapping should be avoided. |
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 337 | Lines should not have trailing whitespace. |
| Moya.swift | 352 | Lines should not have trailing whitespace. |
| Moya.swift | 362 | Lines should not have trailing whitespace. |
| Moya.swift | 375 | Lines should not have trailing whitespace. |
| Moya.swift | 388 | Lines should not have trailing whitespace. |
| Moya.swift | 413 | Lines should not have trailing whitespace. |
| Moya.swift | 414 | Lines should not have trailing whitespace. |
| Moya.swift | 485 | Lines should not have trailing whitespace. |
| Moya.swift | 497 | Lines should not have trailing whitespace. |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 399 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 499 | File should contain 400 lines or less: currently contains 499 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 355 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 356 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 338 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 358 | Force unwrapping should be avoided. |
| Moya.swift | 182 | Function body should span 50 lines or less excluding comments and whitespace: currently spans 54 lines |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 337 | Lines should not have trailing whitespace. |
| Moya.swift | 352 | Lines should not have trailing whitespace. |
| Moya.swift | 362 | Lines should not have trailing whitespace. |
| Moya.swift | 375 | Lines should not have trailing whitespace. |
| Moya.swift | 388 | Lines should not have trailing whitespace. |
| Moya.swift | 413 | Lines should not have trailing whitespace. |
| Moya.swift | 414 | Lines should not have trailing whitespace. |
| Moya.swift | 485 | Lines should not have trailing whitespace. |
| Moya.swift | 497 | Lines should not have trailing whitespace. |
| Moya.swift | 237 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 399 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 182 | Function should have complexity 10 or less: currently complexity equals 11 |
| Moya.swift | 499 | File should contain 400 lines or less: currently contains 499 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
#### Errors
| Moya.swift | 233 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 233 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 233 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 233 | Prefer checking `isEmpty` over comparing `count` to zero. |
public struct PaginationInfo {
let page: Int
enum MyAPI {
RxSwift is causing the current Moya version not to build using Carthage:
`carthage update --platform iOS`
</thead>
</thead>
I think it's time to craft a new release, especially for those who are using CocoaPods to reference Moya.
</thead>
| Moya.swift | 405 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 406 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 387 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 408 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 251 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 260 | Lines should not have trailing whitespace. |
| Moya.swift | 267 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 277 | Lines should not have trailing whitespace. |
| Moya.swift | 283 | Lines should not have trailing whitespace. |
| Moya.swift | 295 | Lines should not have trailing whitespace. |
| Moya.swift | 305 | Lines should not have trailing whitespace. |
| Moya.swift | 307 | Lines should not have trailing whitespace. |
| Moya.swift | 310 | Lines should not have trailing whitespace. |
| Moya.swift | 386 | Lines should not have trailing whitespace. |
| Moya.swift | 390 | Lines should not have trailing whitespace. |
| Moya.swift | 402 | Lines should not have trailing whitespace. |
| Moya.swift | 412 | Lines should not have trailing whitespace. |
| Moya.swift | 418 | Lines should not have trailing whitespace. |
| Moya.swift | 425 | Lines should not have trailing whitespace. |
| Moya.swift | 439 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 443 | Lines should not have trailing whitespace. |
| Moya.swift | 449 | Lines should not have trailing whitespace. |
| Moya.swift | 453 | Lines should not have trailing whitespace. |
| Moya.swift | 541 | Lines should not have trailing whitespace. |
| Moya.swift | 553 | Lines should not have trailing whitespace. |
| Moya.swift | 428 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 555 | File should contain 400 lines or less: currently contains 555 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 405 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 406 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 387 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 408 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 251 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 260 | Lines should not have trailing whitespace. |
| Moya.swift | 267 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 277 | Lines should not have trailing whitespace. |
| Moya.swift | 283 | Lines should not have trailing whitespace. |
| Moya.swift | 295 | Lines should not have trailing whitespace. |
| Moya.swift | 305 | Lines should not have trailing whitespace. |
| Moya.swift | 307 | Lines should not have trailing whitespace. |
| Moya.swift | 310 | Lines should not have trailing whitespace. |
| Moya.swift | 386 | Lines should not have trailing whitespace. |
| Moya.swift | 390 | Lines should not have trailing whitespace. |
| Moya.swift | 402 | Lines should not have trailing whitespace. |
| Moya.swift | 412 | Lines should not have trailing whitespace. |
| Moya.swift | 418 | Lines should not have trailing whitespace. |
| Moya.swift | 425 | Lines should not have trailing whitespace. |
| Moya.swift | 439 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 443 | Lines should not have trailing whitespace. |
| Moya.swift | 449 | Lines should not have trailing whitespace. |
| Moya.swift | 453 | Lines should not have trailing whitespace. |
| Moya.swift | 541 | Lines should not have trailing whitespace. |
| Moya.swift | 553 | Lines should not have trailing whitespace. |
| Moya.swift | 428 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 555 | File should contain 400 lines or less: currently contains 555 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
#### Errors
| Moya.swift | 253 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 253 | Prefer checking `isEmpty` over comparing `count` to zero. |
Don't remove them - reverse the expectation!
``` diff
``` diff
- Misses          244        247     +3
Partials          0          0
internal func cancelCompletion(completion: Moya.Completion) {
let error = Moya.Error.Underlying(NSError(domain: NSURLErrorDomain, code: NSURLErrorCancelled, userInfo: nil))
</thead>
- Added specs to test cancel behavior, and here's the (strange? unintended?) logic that is tested:
It's strange, to me, that the completion handler works this way.  Anyone else? CC @Moya/contributors
It's `danger` that is causing circleci to fail üò¢
Not sure why the schemes in Demo.xcworkspace were shared, they were causing a build failure with Carthage.
Is there any way for circle CI to do so without the schemes being shared?
Here was the relevant Carthage update output:
*** Building scheme "RxMoya iOS" in Moya.xcodeproj
*** Building scheme "Moya" in Demo.xcworkspace
*** Building scheme "Moya iOS" in Moya.xcodeproj
*** Building scheme "ReactiveMoya" in Demo.xcworkspace
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/Request.swift:471:17: warning: keyword 'protocol' does not need to be escaped in argument list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/ResponseSerialization.swift:187:9: warning: 'var' parameters are deprecated and will be removed in Swift 3
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/Request.swift:471:17: warning: keyword 'protocol' does not need to be escaped in argument list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/ResponseSerialization.swift:187:9: warning: 'var' parameters are deprecated and will be removed in Swift 3
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Moya/Moya.swift:174:40: warning: curried function declaration syntax will be removed in a future version of Swift; use a single parameter list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Moya/Moya.swift:174:40: warning: curried function declaration syntax will be removed in a future version of Swift; use a single parameter list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/Request.swift:471:17: warning: keyword 'protocol' does not need to be escaped in argument list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/ResponseSerialization.swift:187:9: warning: 'var' parameters are deprecated and will be removed in Swift 3
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/Request.swift:471:17: warning: keyword 'protocol' does not need to be escaped in argument list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/ResponseSerialization.swift:187:9: warning: 'var' parameters are deprecated and will be removed in Swift 3
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Moya/Moya.swift:174:40: warning: curried function declaration syntax will be removed in a future version of Swift; use a single parameter list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Moya/Moya.swift:174:40: warning: curried function declaration syntax will be removed in a future version of Swift; use a single parameter list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Result/Result/Result.swift:89:70: warning: __FUNCTION__ is deprecated and will be removed in Swift 3, please use #function
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Result/Result/Result.swift:164:41: warning: __FUNCTION__ is deprecated and will be removed in Swift 3, please use #function
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Result/Result/Result.swift:174:38: warning: __FUNCTION__ is deprecated and will be removed in Swift 3, please use #function
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Result/Result/Result.swift:89:70: warning: __FUNCTION__ is deprecated and will be removed in Swift 3, please use #function
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Result/Result/Result.swift:164:41: warning: __FUNCTION__ is deprecated and will be removed in Swift 3, please use #function
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Result/Result/Result.swift:174:38: warning: __FUNCTION__ is deprecated and will be removed in Swift 3, please use #function
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/Request.swift:471:17: warning: keyword 'protocol' does not need to be escaped in argument list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/ResponseSerialization.swift:187:9: warning: 'var' parameters are deprecated and will be removed in Swift 3
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/Request.swift:471:17: warning: keyword 'protocol' does not need to be escaped in argument list
/Users/asb/Developer/proxy-consumer-ios/Carthage/Checkouts/Moya/Demo/Pods/Alamofire/Source/ResponseSerialization.swift:187:9: warning: 'var' parameters are deprecated and will be removed in Swift 3
The strange thing is, this is the first time I've seen the build error with schemes in Demo.xcworkspace, and I'm targeting release 6.5.0, so I'm not sure why this is coming up now...
Weird. So I got the problem fixed by deleting my project directory, cloning from github, and trying to build again.
Weird bug, but closing this because it doesn't seem to be a problem with Moya
</thead>
got it @esttorhe üòÑ
``` diff
Misses           68         68
Partials          0          0
All the new notifications I'm getting from Moya are a little crazy, but I love what you're trying to do setting up a community of people around Moya.
üî•
@orta that sounds right
Woah - thank you for open sourcing @colinta üéâ
So on behalf of everyone at Ello: happy to help!
After seeing Moya and that it has support for RxSwift I was really hoping to add it to a project that I was just about to get started on. However without support for swift 3.0 I would be unable to use Moya without updating it myself. I was wondering what the plans for swift 3.0 are and if there will be an update in the near future.
``` diff
- Misses           65         68     +3
Partials          0          0
</thead>
</thead>
"somethingBool": data4 ? 1 : 0
@jasl I've tried to do what you've said and got the same result.
@lucasp90
I think that's a good place for them.
@justinmakaila At the moment  and for the server implementation i decided to use this approach
Alamofire.upload(.PUT, url, headers: headers, multipartFormData: { (multipartFormData) in
do {
http://mjtsai.com/blog/2015/12/16/osspinlock-is-unsafe/
'dispatch_semaphore' is a better one, I'll pull a request later.
- _Moya Changes:_
``` diff
- _Dependencies_
- [ ] Result: GTG
- [ ] RxSwift: ??
> RxSwift: ??
</thead>
import Moya
enum UserAPIService {
var method: Moya.Method {
var URLEscapedString: String {
I'm using cocoapods and your latest commit
I am following Ello as much as I can by the way. You are doing great work! May the success be with you üëç
Like if I want to register a book, `Genre` can be `Science Fiction` and `Fantasy`.
provider = MoyaProvider<TEST>()
Vivien
Can you explain it with code please?
return AnonymousDisposable {
internal extension MoyaProvider {
let alamoRequest = manager.request(request)
alamoRequest.response(queue: queue) { (_, response: NSHTTPURLResponse?, data: NSData?, error: NSError?) -> () in
alamoRequest.resume()
return CancellableToken(request: alamoRequest)
I use e RxMoyaProvider extension
do {
return AnonymousDisposable {
[fg0,255,0;[bg;2016-06-07 09:34:55 [Info] [main] [NetworkLogger.swift:32] willSendRequest(_:target:) > Optional(<NSMutableURLRequest: 0x7fa46c2ba820> { URL: http://192.168.40.203:8000/webull-app-center/api/portfolios/check?version=4396 })[;
[fg0,255,0;[bg;2016-06-07 09:34:55 [Info] [main] [NetworkLogger.swift:32] willSendRequest(_:target:) > Optional(<NSMutableURLRequest: 0x7fa46c182600> { URL: http://192.168.40.203:8000/webull-app-center/api/portfolios/check?version=4396 })[;
@ashfurrow hello
return AnonymousDisposable {
but is use some extension by myself to parse the response, like
do {
return AnonymousDisposable {
Thanks a lot for the awesome work that is being done to ship Moya.
File: `Moya.swift`
For App Transport Security the following settings are applied:
I completely agree. We should keep `.nsError` and get rid of RAC 2.0 with the next major release.
github "Moya/Moya"
github "sunshinejr/Moya-ModelMapper"
carthage update --platform iOS
import Moya
var method: Moya.Method {
var URLEscapedString: String {
let provider = RxMoyaProvider<Auth>()
I've used Cocoapods before and didn't get this error.
This is a wild guess, but I think there may be something wrong with the generated frameworks, I've seen something like this before, and it usually means that the 'TargetType' from the RxMoya framework, is different from the 'TargetType' in the Moya framework.
If I don't have any luck (I'm new to Carthage), I'll guess I'll continue using Cocoapods for now.
import RxMoya
extension Auth: RxMoya.TargetType {
var method: RxMoya.Method {
var URLEscapedString: String {
This way you'd import both frameworks, but as it is right now, you should only use RxMoya, and you must not include Moya otherwise you'll get that error. I'm okay with the way it is right now, but it should be worth mentioning that with Carthage you should only use one.
I'm surprised as well that this hasn't turn up before. I usually look for the project's documentation at first, so it might be helpful to add this into some sort of notes regarding to Carthage usage, I also look into the project's issues, open and close, and then SO.
Yeah, there are some changes, I already tried to do it in a fork, but got some weird errors when using it in another project through Carthage.
This is I use Alamofre
Alamofire.request(.POST, "http://124.172.184.216:8080/open_api/api?sign=f93404972addb2b806a7bcb5adbaa8c3&app_id=123", parameters: params, encoding: .JSON, headers: nil).responseJSON { response in
var URLEscapedString: String {
case Zen
public var method: Moya.Method {
"Content-Encoding" = gzip;
Server = "nginx/1.4.6 (Ubuntu)";
404 Not Found is not come form my service,and when I use Alamofire buy default POST method,it is work. But it doesn't work in Moya! And, I don't know how to change the code.
parameterEncoding: Moya.ParameterEncoding.JSON)
parameterEncoding: Moya.ParameterEncoding.JSON)
``` Swift
// Call the api
Hey @ashfurrow! I improved the API a little bit. I created a `ProgressResponse` and added some `filter` methods to get the response and the result. I created a new method called `requestWithProgress` to not collide with actual `request` method. After all this work I thought: What do not make some more changes and add progress to all HTTP calls? What do you think?
</thead>
</thead>
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
| Moya.swift | 397 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 398 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Moya.swift | 379 | Colons should be next to the identifier when specifying a type. |
| Moya.swift | 400 | Force unwrapping should be avoided. |
| Moya.swift | 14 | Lines should not have trailing whitespace. |
| Moya.swift | 20 | Lines should not have trailing whitespace. |
| Moya.swift | 24 | Lines should not have trailing whitespace. |
| Moya.swift | 48 | Lines should not have trailing whitespace. |
| Moya.swift | 55 | Lines should not have trailing whitespace. |
| Moya.swift | 105 | Lines should not have trailing whitespace. |
| Moya.swift | 109 | Lines should not have trailing whitespace. |
| Moya.swift | 180 | Lines should not have trailing whitespace. |
| Moya.swift | 247 | Lines should not have trailing whitespace. |
| Moya.swift | 252 | Lines should not have trailing whitespace. |
| Moya.swift | 256 | Lines should not have trailing whitespace. |
| Moya.swift | 259 | Lines should not have trailing whitespace. |
| Moya.swift | 261 | Lines should not have trailing whitespace. |
| Moya.swift | 269 | Lines should not have trailing whitespace. |
| Moya.swift | 275 | Lines should not have trailing whitespace. |
| Moya.swift | 287 | Lines should not have trailing whitespace. |
| Moya.swift | 297 | Lines should not have trailing whitespace. |
| Moya.swift | 299 | Lines should not have trailing whitespace. |
| Moya.swift | 302 | Lines should not have trailing whitespace. |
| Moya.swift | 378 | Lines should not have trailing whitespace. |
| Moya.swift | 382 | Lines should not have trailing whitespace. |
| Moya.swift | 394 | Lines should not have trailing whitespace. |
| Moya.swift | 404 | Lines should not have trailing whitespace. |
| Moya.swift | 410 | Lines should not have trailing whitespace. |
| Moya.swift | 417 | Lines should not have trailing whitespace. |
| Moya.swift | 431 | Lines should not have trailing whitespace. |
| Moya.swift | 433 | Lines should not have trailing whitespace. |
| Moya.swift | 435 | Lines should not have trailing whitespace. |
| Moya.swift | 441 | Lines should not have trailing whitespace. |
| Moya.swift | 445 | Lines should not have trailing whitespace. |
| Moya.swift | 533 | Lines should not have trailing whitespace. |
| Moya.swift | 545 | Lines should not have trailing whitespace. |
| Moya.swift | 420 | Else and catch should be on the same line, one space after the previous declaration. |
| Moya.swift | 547 | File should contain 400 lines or less: currently contains 547 |
| Moya+ReactiveCocoa.swift | 72 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 83 | Lines should not have trailing whitespace. |
| Moya+ReactiveCocoa.swift | 89 | Lines should not have trailing whitespace. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 71 | Opening braces should be preceded by a single space and on the same line as the declaration. |
| Observable+Moya.swift | 62 | Force unwrapping should be avoided. |
#### Errors
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
| Moya.swift | 249 | Prefer checking `isEmpty` over comparing `count` to zero. |
1. Spacing in your code is a little different from the rest of Moya: `func(arg:Type)` instead of `func(arg: Type)`.  I've changed all the instances of this that I found; this follows Swift code conventions, and is internally consistent.
Thank you for your contribution @colinta. I have only two questions for you. I'm a little concerned about this code here:
// Moya existing code
I need to do that because the request is not returned immediately. Alamofire builds the multi-part on background and returns the request, where I set the `innerCancellable`, that why it's different.
Good solution @colinta!  üëç
case Zen
``` Swift
// Call the api
do {
- Misses `-4`
- Partials `0`
``` diff
- Misses           40         42     +2
Partials          0          0
@ashfurrow good find! Done that. Should be all good now.
public var method: Moya.Method { get }
@sunshinejr
public var method: Moya.Method {
.SigninOTP,
@colinta Yeah but I will not be able anymore to pass Array, right?
@colinta But the array is passed through the `path`
`curl -X GET blablabla`
@ashfurrow as for today we do not have a good solution. The only elegant solution is option 1 suggested by @colinta, but maintaining an own fork of Moya at the current stage of our project is killing. Having correlation logging in the plugin does not work as well since such option missing a context of the call and many other benefits of having request together in response in a place of request initialization.
@samirGuerdah What exactly is your problem? Actually SSL Pinning is used to prevent Man-In-The-Middle atacks with tools like Charles. Or don't you get any requests/responses regardless of whether they are encrypted or not?
Sorry for the retarded response. Finally it was a misuse in my side. No problem to use Moya with Charles proxy. Closing...
:tada: :smile:
¬øHow can I handle those cases?
Those methods also do image and files uploading so I just ended using pure alamofire
@aschuch nop, it's not fixed. Moya needs to handle 204 no-content responses
`api/users`
@esttorhe Actually I want to send JSON Array. I guess I have to go with `.Custom` parameter encoding.
do {
case .SomeAPI:
return ["jsonArray": ["Yes", "What", "Abc"]]
var parameterEncoding: Moya.ParameterEncoding {
case .SomeAPI:
Encountered the same problem and had maybe an obvious question - where should I put `var parameterEncoding: Moya.ParameterEncoding` ? It is not part of the `TargetType` protocol, so adding it to my endpoints struct does nothing.
Here is an **UNTESTED** example that at least compiles.
case .SomeAPI:
return ["jsonArray": ["Yes", "What", "Abc"]]
var parameterEncoding: Moya.ParameterEncoding {
struct JsonArrayEncoding: Moya.ParameterEncoding {
```swift
return URLEncoding.default
import Moya
var URLEscapedString: String {
do {
public var method: Moya.Method {
"password": password
When i try call them with follow code:
let networkService = RxMoyaProvider<NetworkService>(
github "Moya/Moya"
github "sunshinejr/Moya-ModelMapper"
var method: Moya.Method {
I'm not 100%(just 99.9% üôÉ) sure that's the best way for Moya, so maybe someone will correct me
@mingyeow for additional fields just take a look at [Alamofire readme](https://github.com/Alamofire/Alamofire) (Advanced Usage section)
`requestWithQueue` is quite weird and might have duplicate code too.
Shai
Thanks @sunshinejr!
Also thanks for your attempt to assit @aschuch ! :]
``` diff
Missed          40      40
``` diff
Missed          40      40
**\* Building scheme "Moya iOS" in Moya.xcodeproj
Xcode 7.3, Carthage 0.15.2
@alskipp So you're running with a freshly cloned version of Moya, and just trying to run `carthage update --platform iOS --no-use-binaries` in the root of the directory, and receiving the error above, right?
Also, can you give me the output of the `carthage` log file? It logs it just before it starts building, says something like "log file will be output to {{yellow file path}}"
@justinmakaila, yep pretty much (just forked Moya).
@alskipp Are you trying to open the `Moya.xcodeproj`, or the `Demo/Demo.xcworkspace`? Also, see my comment above. I edited it, probably after the notification was sent out.
@justinmakaila I've been trying to open the `Moya.xcodeproj`, am I about to have a ‚ÄúD‚Äôoh!‚Äù moment?
@alskipp No, you should be able to edit the source in the `Moya.xcodeproj`, and then the CocoaPods implementation in `Demo` pulls that in as a Development Pod. `Demo` houses the implementation tests/examples, and the unit tests.
I'm thinking your issue could be with the Carthage cache, perhaps pulling old versions of the dependencies?
@justinmakaila, thanks for the suggestion. Just tried clearing the cache, but still no joy (same inexplicable error) : (
Perhaps things will settle down a bit once a few more people have battle tested Xcode 7.3/Swift 2.2 and the next version of Carthage is released? In the meantime, I'm going to retrain as a carpenter ‚Äì a craft that can be indulged in without fear that your tools are conspiring against you! : )
@alskipp can you send me the output of the carthage build? the issue always lies in there, and not in the console output.
carthage version 0.17.2
What happens if you use the most recent Carthage version. I think it's 0.18.1
let providerForArticles = MoyaProvider<Articles>()
let providerForComments = MoyaProvider<Articles.Comments>()
Pseudo-code is
extension RubyChinaV3 {
var baseURL: NSURL { return RubyChinaV3.BaseURL }
var body: String
var baseURL: NSURL { return RubyChinaV3.BaseURL }
var method: Moya.Method { return .POST }
let provider = MoyaProvider()
@jasl Is this still working? I am asking because I cannot create a `MoyaProvider` instance without a specified target.
@ealeksandrov
Huge thanks @justinmakaila and company, here's what finally got me fixed up on this one:
- Cleared `DerivedData`
- Deleted Carthage's `build` and `checkouts` folders
- Ran `'carthage update --platform iOS --no-use-binaries`
I too am still somewhat of a Carthage novice, but my best guess is the release binary it was downloading (by default) for one of Moya's dependencies was incompatible, so specifying  `--no-use-binaries` and re-building _everything_ from source fixed it up. Just a guess though.
Thank you for the awesome networking framework!
We have migrated to swift 2.2 and started to get this warning:
‚ö†Ô∏è  /Pods/Moya/Source/Moya.swift:192:40: curried function declaration syntax will be removed in a future version of Swift; use a single parameter list
public final class func DelayedStub(seconds: NSTimeInterval)(_: Target) -> Moya.StubBehavior {
Would it be possible to workaround curried function or avoid the warning any other way?
This was heavily influenced by the chatter on #114, @guidohendriks and @startupthekid
@aschuch I'm down with that. I think it'd be coolest if we could get it like this:
I might be off base here but what about for multipart uploads, we create a `Response` subclass that has a progress method? That way all the normal methods on `Response` would work and for multipart, you'd get the progress you need.
@startupthekid I think you're on to something. Do @Moya/contributors see any issues with potentially introducing a new `Response` type?
@jasi that's a good point. It may be better to use our own encoding that mirrors Alamofire.
@justinmakaila something else I'm concerned about is supporting parameters in an upload request.
PS: I can't judge this is a bug of Moya or just a wrong usage, and this is my thought, not proving yet.
switch change {
My mistake, just do some experiment, when cancel a request, the callback will be triggered but got `Error Domain=NSURLErrorDomain Code=-999 "cancelled"`
Sorry for my inappropriate words again @ashfurrow , just closing the issue.
This doesn't build on Carthage for the same reason master doesn't (Something about "Result" being built with a different version of the compiler). Looking into it now.
Uhh, strange issue... The project doesn't build if `Demo/` is present, probably due to the shared schemes in the `xcworkspace`. @ashfurrow, @orta, Do they have to be shared for Cocoapods?
``` diff
Missed          40      40
Moya has it's own Error type. When you try to cast it to NSError inside .Failure case, switch suddenly becomes non-exhaustive forcing you to add:
var method: Moya.Method {
`'Method' is not a member of Moya`
I like that Moya formalizes the pattern, as it does seem like a side thought in the Alamofire readme. But are there other intentions/benefits compared to it?
_Moya_:
provider.request(.UserProfile("ashfurrow")) { result in
_Alamofire_:
Alamofire.request(Router.UserProfile(name: "ashfurrow"))
The Moya current data flow is
I admit non-generic provider is a little radical, but If we have non-generic Provider first, we can easily wrapping it as generic provider but harder the other way.
Thank you @sunshinejr for getting back to me so quickly.
I'm new to iOS development with Swift, Moya, Alamofire, Argo, et al, so please be lenient with my ignorance.
Create a closure that implements Custom Encoding
do {
Add the custom encoding to your API:
case .MyAPICall:
return "/api/search"
var parameterEncoding: Moya.ParameterEncoding {
case .MyAPICall:
return ParameterEncoding.Custom(MyAPICallCustomEncodingClosure)
``` diff
Missed          40      40
``` diff
Missed          40      40
``` diff
Missed          40      40
Keeping in mind that I haven't _actually_ used Moya yet (so I don't know how this meshes with it), my first idea was this:
var method: Moya.Method { ... }
Thoughts? Am I off my rockers?
``` diff
Hi @ashfurrow!
The issue happens in the class RxMoyaProvider.
@ashfurrow is right. In the Rx world, Moya's behaviour is correct. There's a fundamental misconception on the first assumption that seems to be the root of this discussion and is Scheduler = Thread. In a first instance I got tricked as well, but then re-reading the whole discussion I understood what the original issue was about and I can say that Moya is behaving in a more than reasonable way.
We should remember that in the Rx world there's no `thread` concept, considering its "threat agnostic" nature, but we have the scheduler abstraction that is the entity taking care of scheduling the work.
Hi @bontoJR :)
Hello @VictorAlbertos. I really like this part of your post: `I see it just like a rx resource which performed certain task`, you're right, RxMoya is a resource. I just added my 2 cents because the original documentation for RxSwift has been referenced, alongside the ReactiveX official documentation, to justify and promote a change in the default behaviour of RxMoya, which I think they should not be related. RxMoya is using RxSwift, but it's not part of the original RxSwift framework. :)
@beretis We added this extension, and using it every time we use moya
```swift
extension RxMoyaProvider {
```swift
extension RxMoyaProvider {
That PR fixed #419. Apparently, set an empty array as an endpoint parameters creates all this weird bugs. I have strictly no idea why, and if one you has an answer, I'd love to hear it! :monkey_face:
``` diff
Missed          40      40
After updating to Moya 6.2, I'm getting some really weird issues:
let provider = MoyaProvider(endpointClosure: Networking.endpointsClosure(),
manager: Networking.defaultAlamofireManager(),
To resolve ambiguousness due to duplicated declaration of `NoError` in ReactiveCocoa 4.0.0 and Result 1.0.2
``` diff
Missed          40     40
return "/api/activities/\(id)"
github "Moya/Moya"
:tada:
Moya.podspec already has RxSwift dependancy of ~> "2.0"
``` diff
Missed          40     40
ü§î:thought_balloon:
public var method: Moya.Method {
Thank you @wattson12 !
@remirobert What I don't understand is that Why should I keep a reference on it? If I don't, will the provider be released outside the scope(For example, I make the request in viewDidLoad, and don't keep a reference.)? I didn't inspect the implementation of Moya...
@tomj  because you need to keep a reference on it.
@remirobert - you bet! üòÑ
Tiny but I got a bit confused while reading this.
``` diff
Missed          40     40
First of, `Moya` looks great. At least most of it does. But the one single `enum` bugs me a bit. You have to define a single `API endpoint` in multiple parts of the same file. When the `API` grows, the `enum` gets really big since it is hard to divide it into multiple files.
@sunshinejr Thanks!
let path = "/foo"
let method = Moya.Method.GET
let parameterKeys = ["baz", "bar"] // And for example when this is [ ] (default value) all properties will be added.
var baz: String
var bar: String
var bak: Int
The use of Swift reflection is very interesting as well.
The `enum` pattern introduced to us by Moya very early on has helped guide a lot of our decisions in our large and mature swift app. We love using enums for just about everything we can. They express a large (and complete) set of information in a very concise package.
``` diff
Missed          40      40
``` diff
``` diff
enum NextVisitApi {
``` diff
Can I apply NSURLCache in Moya directly ?
failure failureCallback: (Moya.Error) -> Void
do {
do {
guard let error = error as? CustomStringConvertible else {
``` diff
Missed          40      40
``` diff
Missed          40      40
``` diff
@justinmakaila Here's a screen shot of what I'm trying to do. I've correctly set up the Moya framework and the first example is working. However, when I'm trying to use the ReactiveCocoa extension, it doesn't work and gives an error.
I would assume that your provider is not of type `ReactiveCocoaMoyaProvider`
@petester42 Oh! That's it! Thank you so much. I felt like Swift's error message is sometimes irrelevant to the actually problem. If the error message were to be something like "there's no such method as start" then I would probably think about I'm inheriting the wrong type. Or maybe it was just that I misunderstood Swift's error message.
https://github.com/Moya/Moya#reactivecocoa
Thanks! @ashfurrow @sunshinejr
``` diff
Missed          38      38
``` diff
Missed          38      38
``` diff
Missed          38      38
That makes sense! Thank you for the explanation. Moya is a great framework. Thank you for maintaining this!
var responseType:ALSwiftyJSONAble { get }
Curious about your ideas guys!
do {
return SignalProducer(error: Moya.Error.Underlying(error))
``` diff
Missed          38      38
Thanks for letting me contribute in the amazing Moya :tada: . and I hope I can help :)
``` diff
Missed          38      38
hm it seems something went wrong with the ReactiveCocoa dependency within the podspec file. Not sure what causes the issue - I¬¥m rather less experienced with cocoa pods..
``` diff
Missed          38      38
``` diff
@colinta
@colinta
could you tell me when we need to customize `stubClosure`?
If you can told me usage of `stubClousure` I may find another way to keep that
First, I apologize for my terrible English, I'll try my best to explain my motivation and my idea.
- Some endpoints are complex that may has optional value, mutually exclusive field, required fields
(PS: My company's app has about 100+ endpoints, and more complex than mine)
let provider = MoyaProvider<TheSite.Topics.Listing>()
That's weird, can't be reused, and difficult to building a higher abstraction for provider to encapsulating OAuth2 signing and some configuration for Request [[sample]](https://github.com/jasl/RubyChinaAPP/blob/master/RubyChinaApp/Libraries/Provider.swift)
### What does MoyaCommonProvider do? I don't see this class used anywhere, but it is defined in Provider.swift.
`MoyaCommonProvider` is a non-generic Provider, you can use it when you using struct or class to organizing your endpoints.
ping @colinta
// callbace
I apologize if this is a common problem and if I'm just using Carthage incorrectly, as I'm new to the Carthage ecosystem. Though after searching around, it doesn't feel like I'm using Carthage incorrectly as my app is already set up for it.
``` diff
Missed          38      38
print((error as NSError).localizedDescription)
print(Moya.Error.Underlying(error))
guard let error = error as? CustomStringConvertible else {
**The operation couldn‚Äôt be completed. (Moya.Error error 5.)**
**Underlying(Moya.Error.Underlying(Error Domain=NSURLErrorDomain Code=-1 "(null)"))**
Might be some network connection issue??
Is there a way to Moya.Error provide the original network error? (e.g. Network seems to be down)
stubClosure: StubClosure = MoyaProvider.NeverStub,
Thanks Ash!
public var parameterEncoding : Moya.ParameterEncoding {
I think `Moya.Response` and `Alamofire.Response` are the most responsible ways to access the types. I don't think we should be forced to prefix our types due to external collisions, especially when the solution is as simple as saying `Module.SomeType`
let myProvider = MoyaProvider<MyTarget>(plugins: plugins)
thanks @aamctustwo :+1:
return ReactiveManabiAPIProvider(endpointClosure: endpointsClosure,
error: cannot convert value of type '(ManabiAPI) -> Endpoint<ManabiAPI>' to expected argument type '_ -> Endpoint<_>'
return ReactiveManabiAPIProvider(endpointClosure: endpointsClosure,
enum ManabiAPI {
extension ManabiAPI : TargetType {
var method: ReactiveMoya.Method {
public class ReactiveManabiAPIProvider<Target where Target: TargetType> : ReactiveCocoaMoyaProvider<Target> {
var requestErrors: RACSubject
manager: Manager = Alamofire.Manager.sharedInstance,
requestErrors = RACSubject()
let parameterEncoding: ReactiveMoya.ParameterEncoding = target.method == .GET ? .URL : .JSON
let endpoint: Endpoint<ManabiAPI> = Endpoint<ManabiAPI>(
static func StubBehaviour(_: ManabiAPI) -> ReactiveMoya.StubBehavior {
return ReactiveManabiAPIProvider(endpointClosure: endpointsClosure,
static var sharedProvider: MoyaProvider<EtherAPI> = ...
``` diff
Missed          38      38
Installing Moya 5.1.0 (was 5.2.1)
My pods are:
pod 'Moya'
pod 'Moya/RxSwift'
pod 'Moya/RxSwift', '5.3.0'
``` diff
Missed          38     38
@skornos A couple of questions to help me understand your situation. I want to make sure I'm not missing anything!
`api/v1/topics`
In Moya flavour, I must define a case like `Topics(Int?, Int?, String?, Int?)`, that's unreadable and uneasy to use.
var method: Moya.Method { return .GET }
BUT, there's a little STRANGE when using:
provider = MoyaProvider<ListingTopics>()
var id: String
var baseURL: NSURL { return RubyChinaV3.BaseURL }
(PS: I'm a full stack Ruby on Rails developer but still a new guy to learning Swift and iOS development about 1 month)
(PS2: I really appreciate Moya and SwiftyJSON)
Here's my project for learning (a client for Ruby-China community):https://github.com/jasl/RubyChinaAPP
- cheated from Moya 5.3.0
@jasl You can used labeled parameters with an `enum` in Swift, they're just not required. So for longer endpoints such as in your example, I would definitely use labeled parameters to improve readability.
let provider = MoyaProvider<MyTarget>()
@aamctustwo but you can't give them default vaules
https://github.com/artsy/eidolon/blob/master/Kiosk/App/Networking/ArtsyAPI.swift
@aamctustwo sorry I'm misled by `struct` and `enum`, actually choose what is no mattar
// Here's the magic
Sorry, my description of the problem is wrongÔºåI mean the Moya‚Äôs dependencies is too muchÔºåWhen I use carthageÔºåI failed in Fetching LlamaKitÔºåBut sometimeÔºåsuccess. The causes of the network?
Moya is so great, I love it
``` diff
Missed          38      38
``` diff
``` diff
Sadly there is not notion of sub-libraries for Carthage so we can't do the same thing as cocoapods. There is, as far as I know, no way around not building all schemes in a project with Carthage. The solutions you bring up do work but as you indicated they are not ideal.
- `Alamofire iOS`
- `RxCocoa-iOS`
- `Moya iOS`
- `Alamofire iOS`
- `Moya iOS`
Why are pods not an option? (Just curious)
I'll be looking at other ways to bring moya in before going with more
drastic measures.
required dependency that's very pick with who it plays with. Though, moving
> was created as a CocoaPod, and the Carthage support we have today was added
> Carthage team has been asked for a subspec-like feature to accommodate
@mpurland yes it did. thanks. The same issue is happening with RxSwift but I sent them a fix.
``` diff
``` diff
``` diff
Missed          97      97
``` diff
Missed          97      97
github "Alamofire/Alamofire"
github "Moya/Moya" "5.1.0"
When I update carthage, it shows:
Hi ashfurrow,
github "Moya/Moya"
*** Checking out Moya at "5.1.0"
github "Alamofire/Alamofire"
github "Moya/Moya"
*** Checking out Alamofire at "3.1.3"
*** Checking out Moya at "4.1.0"
*** Checking out RxSwift at "2.0.0-beta.4"
github "Alamofire/Alamofire"
github "Moya/Moya" "5.1.0"
It just doesn't feels like the way it should be done.
func pagingSignalWithOffset(offset:Int, limit:Int) -> RACSignal {
github "moya/moya"
do {
The problem seems with .mapJSON wich can throw an error, but i dont know how to continue
do {
throw CustomError.ParseError
throw CustomError.ServerError
enum CustomError: ErrorType {
case ParseError
case ServerError
I've been dabbling with this for the past hour... Does anyone have any idea how we would split up `ReactiveMoya` and `RxMoya`? I know we just went through this for Carthage, but I think this deserves the same amount of scrutiny.
@swizzlr True, but that would then break our CocoaPods and Carthage integrations.
@tomburns That's a good point. The Swift package manager is going to be distributed with all versions of Swift and Xcode in the future. There's no 3rd party software to be installed like there is with `CocoaPods` and `Carthage`. Someone who says that `Moya` is a dependency in their `Package.swift` file should not be required to also import `ReactiveCocoa` or `RxSwift` into their project if they don't use it, which they're required to do now with `Carthage`.
I am a Carthage user and I am using Moya together with ReactiveCocoa in _every_ project. I like it. But I don¬¥t like to include dependencies I am actually not using (RxSwift), and I am sure RxSwift users don¬¥t like to wait for ReactiveCocoa to build, when updating their dependencies (what happens often caused by e.g. a new Xcode release, Moya release, ReactiveCocoa release, RxSwift release, ....). If you checkout the [Changelog](https://github.com/Moya/Moya/blob/master/Changelog.md) every second release of Moya just updates it¬¥s dependency to external libraries. Maybe this is caused by the nature of external dependencies but why should pure Moya users care about an updated ReactiveCocoa or RxSwift? Why should a ReactiveCocoa user care about RxSwift updates? They have to deal with issues caused by a library they are not using.
@aloco I'm all for that. When Xcode 7.3 dropped, I had serious issues building Moya due to dependencies not yet being updated. It's a huge hassle, especially when the dependencies that are causing issues aren't used in the project.
Pushed to trunk
``` diff
Missed          97      97
``` diff
@wangshengjia I've used my local repo in a new project and everything works fine.
@wangshengjia Credential is the missing part and I am working on it.
Here is my code:
// Plugin
(request.request as? NSMutableURLRequest)?.HTTPBody = "RxMoya".dataUsingEncoding(NSUTF8StringEncoding)
lazy var provider: RxMoyaProvider<HTTPBin> = {
enum TestApi {
See my endPointClousure which uses      "userString" and "passwordString"
URGH! Don't know why this intermittently fails seems like #259 is still an issue. Whenever it fails it happens to be the `uses a custom Alamofire.Manager for session challenges` test that fails.
You think its a quick thing or a travis thing?
``` diff
Missed          97      97
I have installed Moya trought Cocoapods in a new fresh project.
ivangodfather
Using Alamofire (3.1.3)
Installing Moya 4.5.0 (was 4.5.0)
For 4.5 it is still called `MoyaTarget`. Sorry about the confusion in documentation but we are getting ready for 5.0 which should be out real soon.
Update all pods
Removing RxSwift
Using Alamofire (3.1.3)
Installing Moya 4.5.0 (was 4.5.0)
AFE0806015:TestingMoya ivan.ruiz$ cat Podfile
# Uncomment this line if you're using Swift
target 'TestingMoya' do
target 'TestingMoyaTests' do
target 'TestingMoyaUITests' do
``` diff
Missed          97      97
``` diff
Missed          97      97
``` diff
``` diff
``` diff
```swift
import Moya
import Alamofire
```swift
```swift
I believe I found a solution to this problem. I still need to test out if works with Carthage but it works fine in Xcode so I don't see why it wouldn't work.
``` diff
Hey Moya Contributors (moyers?)
``` diff
``` diff
``` diff
‚ÄîJustin Makaila
@colinta loves to merge!
``` diff
If reactive cocoa 4 is final by then it sounds like a good idea.
``` diff
``` diff
`MoyaTarget` -> `Target`
`MoyaResquest` -> `Request`
Maybe change the naming of some protocols to include `Type` or `able` at the end like a lot of swift protocols do. Would clearly show the line of separation between what is and isn't a protocol. Right now something like `MoyaTarget` might be confusing since it is not actually a target but a protocol that targets need to implement. `TargetType` might make more sense for users.
``` diff
``` diff
``` diff
![giphy](https://cloud.githubusercontent.com/assets/1313663/11134697/e28bfeb6-89f2-11e5-8471-d781b4936e96.gif)
do {
I'm fine with a result type. I was going to go with a result type but I was trying to find way that we could remove the `Underlying` error from MoyaError. This would mean that we could have a clear distinction between our errors and cocoa errors. It would give the user a better indication of where things are going wrong.
do {
} catch let error as MoyaError {
print("moya errors", error)
Hi,I use CocoaPods Installation `Moya`
The only case I can think of this being a breaking change would be if the developer subclassed the provider and created a new request function that returned a subclass of `MoyaRespnse` instead. I believe that this would not work anymore but it would have before. I could try it out to see if that is really the case. Aside from that there are no API changes just additions.
``` Swift
enum UserEndpoint: MoyaTarget {
var method: Moya.Method {
let GraphQLProvider = ReactiveCocoaMoyaProvider(endpointClosure: { target in
// A little pseudo cod never hurt...
We _could_ change the `parameters` property of `MoyaTarget` to `AnyObject?`, and have `Endpoint` do some assertions to ensure that `parameters` is either an `Array`, `[NSObject: AnyObject]`, or `String`, which would allow us to supply the `GraphQLQueryType.description` to the `parameters`, but this is more of the same black-box functionality that I'd like to avoid.
‚ÄîJustin Makaila
Ah, sorry, I'm new to all this and didn't understand what was happening the custom parameter encoding solution. I understand now and got it working. Thanks, @ashfurrow!
To keep the associated values clean (especially given their lack of names) we could also consider specialized struts, like so:
public enum MoyaError: ErrorType {
let response: MoyaResponse
‚ÄîJustin Makaila
tburns@Monarch ~/code/Moya [error-type *]
Im not sure how `RACSignal` would work with an error other than `NSError`. I have never tried it. But other than that everything looks good.
I think a custom error type is the way to go, because it gets rid of some guessing on the end-user side. I'm all for it
public enum MoyaError: ErrorType {
case StatusCode(Int,MoyaResponse)
case Data(MoyaResponse)
case Underlying(ErrorType)
At the very least i think it might be helpful to add names to these tuples for clarity's sake; does anyone else have suggestions?
How to integrate `Moya` into my project manually. Thanks
```swift
3. Tests should also be added for os x
Okeedoke, good to know
since the release of 4.0.2, `Carthage` fails at building `RxMoya`
Sadly I am not very familiar with cocoapods, but I guess the issue is related with https://github.com/Moya/Moya/commit/f6a791398b47b4a982c91305d1bdd25533a52407, because 4.0.1 worked fine under the same conditions.
Carthage 0.9.3
github "Moya/Moya" ~> 4.0
*** Cloning Moya
*** Cloning Alamofire
*** Checking out Alamofire at "3.0.1"
*** Checking out Moya at "4.0.2"
*** xcodebuild output can be found in /var/folders/fp/2hwf2d3j6mjf8kz8h2v27zc80000gn/T/carthage-xcodebuild.APAymT.log
*** Building scheme "Alamofire iOS" in Alamofire.xcworkspace
*** Building scheme "ReactiveMoya" in Demo.xcworkspace
*** Building scheme "RxMoya" in Demo.xcworkspace
Exactly, leaving my Cartfile with `"Moya/Moya" "master"` looks risky to me :)
Little bit of snooping around led me to this issue on Travis-CI:
Carthage
github "Moya/Moya"
Allow CancellableToken to debug print Alamofire curls
The previous Demo project was built using an older version of CocoaPods that caused incompatibilities when using a Carthage build of Moya.
Later when Moya was built and included into a Carthage project that also used Alamofire, the linker would complain that Moya was trying to load an Alamofire version that is not compatible.
Great work all round, just trying to figure out how this change works when creating a `ReactiveCocoaMoyaProvider`.
// code
Thanks @ashfurrow - appreciate the response. ReactiveCocoa is changing so quickly that when I tried the Artsy app to help me, it was clear that they've diverged somewhat! I'm still using Moya 2.2.0 as I can't get up to speed with the changes yet, but thanks for the software, it's pretty good stuff.
Giving this little one a shot too.
So it looks like anyone using Carthage has to install Alamofire, Moya, ReactiveCocoa, RxSwift, ReactiveMoya, and RxMoya it seems. Is that correct?
public enum MyApi {
case SendSomething(CustomObject)
Thank you for Moya :smile:
Okay I was anxious to try it and I guess I didn't notice the Alamofire part. It's working now. Not sure if you guys want to close this out or leave open until these libraries catch up and this can be merged into master...
Yes. The ReactiveCocoa one needs updating too. There are two things wrong with it.
@aschuch "I would like to suggest to at least accumulate a the log output" - very reasonable, thanks - will reimplement it to `print` everything  after we get either a response or error. Or may be we should use `NSLog`? `NSLog()` ensures that all strings passing through it are written in a thread safe manner to `stderr`. Or it will look not good in Swift code?
@ashfurrow `"Could you update the MoyaProvider subclasses for ReactiveCocoa and RxSwift?"`. Sorry I'm not sure I understood your comment...
@aschuch `"Anyone have any resources? Blog posts?"` - yes, we need some authoritative opinion here about the thread safety. Also I'm not sure if it is good from the code style viewpoint...
@ashfurrow Oh. Sorry Again, I'm sooo slow :smile:  (deleted previous comments),
case Zen
extension GitHub : MoyaTarget {
let GitHubProvider = MoyaProvider(Github.Zen)
let GitHubProvider = MoyaProvider<Github>()
The `MoyaTarget` never gets passed the the provider directly. You call `provider.request(Github.Zen)`. Could you elaborate on what the issue is?
I would love to, but I'm unexperienced with Nimble and Quick. I'm having trouble to even execute the existing tests, but I'm happy to learn and see this working.
Why does ReactiveCocoa get to have all the fun. Here are the same data processing extensions but for RxSwift. Tested and all.
There we go! xcodeproj conflicts are the worst.
let endpoint = Endpoint<LokaliiAuthorizationAPI>(URL: url, sampleResponse: .Success(200, {target.sampleData}), method: target.method, parameters: target.parameters)
Thanks! Yeah i use ReactiveCocoa would be great if u could provide more details on that :)
Hi, I'm getting this error with the latest version (using Carthage) and i have the latest Alamofire (2.0.0)
I think this is actually a issue with Cocoapods [check it](http://stackoverflow.com/a/31636313/2129504)
github "kishikawakatsumi/KeychainAccess" "swift-2.0"
github "Alamofire/Alamofire" ~> 2.0
github "onevcat/Kingfisher" ~> 1.5
Not sure if its CocoaPods issue, but it didn't work when i removed `Alamofire`  and  `ReactiveCocoa` from Cartfile either
@ashfurrow @MarvinNazari you shouldn't have to specify `Moya`'s dependencies in your Cartfile, unless you also have a specific dependency on it.
@justinmakaila I have the `copy-frameworks` script and all the library works except Moya, i removed the `Alamofire` from Cartfile too, but no luck.
github "kishikawakatsumi/KeychainAccess" "swift-2.0"
github "onevcat/Kingfisher" ~> 1.5
@Moya/contributors: Can anyone step in?
‚ÄîJustin Makaila
Using the latest of Carthage and RAC 4.0, I built just fine
‚ÄîJustin Makaila
pod 'Moya/ReactiveCocoa'
CustomStringConvertible
String
CustomStringConvertible
String
Using ReactiveCocoa (3.0.0)
@ashfurrow  Great idea. We can go with this solution. What about logging a response? It can be useful to see plain server response in string format.
The first thing would be that this library requires Xcode 7.1 and the second would be that there are issues with the Mac target if you are not using cocoapods. There is a fix here #283 but we still have some problems.
pod 'Alamofire'
pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya/RxSwift', :path => "../"
pod 'Moya', :path => "../"
This is my Podfile.lock
PODS:
- Alamofire (2.0.0)
- Moya (2.1.0):
- Moya/Core (= 2.1.0)
- Moya/Core (2.1.0):
- Alamofire
- Moya/ReactiveCocoa (2.1.0):
- Moya/ReactiveCore
- ReactiveCocoa
- Moya/ReactiveCore (2.1.0):
- Moya/Core
- Moya/RxSwift (2.1.0):
- Moya/ReactiveCore
- RxSwift
- ReactiveCocoa (3.0-swift2):
- ReactiveCocoa/UI (= 3.0-swift2)
- ReactiveCocoa/no-arc
- ReactiveCocoa/no-arc (3.0-swift2):
- ReactiveCocoa/UI (3.0-swift2):
- ReactiveCocoa/Core
- Alamofire
- Moya (from `../`)
- Moya/ReactiveCocoa (from `../`)
- Moya/RxSwift (from `../`)
EXTERNAL SOURCES:
Moya:
Nimble:
ReactiveCocoa:
Nimble:
ReactiveCocoa:
Alamofire: 2f13548b29d25a58ecd91c9225fb51493e2b782b
Moya: cf40dc2fef002d59b6745cac715d6016bc0428aa
Nimble: 2f64d173ad23dc39f10110840a1ed15f29ef75e8
ReactiveCocoa: d99571cf654b8e6703f338ca13f486b999c51969
RxSwift: 0450126df5f8de3ec7ee789b420d7ba98baea364
COCOAPODS: 0.38.2
I tried cocoapods version 0.39.0.beta.4 and got same error:
‚ÄîJustin Makaila
> - Re-added `Pods/` directory for Carthage support.
>   - carthage_via_internal_podspecs
>   - [Carthage] Added Reactive podspec.
>     A Demo/Pods/Alamofire/LICENSE (19)
>     A Demo/Pods/Alamofire/Source/Alamofire.swift (368)
>     A Demo/Pods/Alamofire/Source/Download.swift (244)
>     A Demo/Pods/Headers/Private/Nimble/Nimble.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/EXTScope.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/NSDictionary+RACSequenceAdditions.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/NSFileHandle+RACSupport.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/NSInvocation+RACTypeParsing.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/NSObject+RACDescription.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/NSString+RACSupport.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACBehaviorSubject.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACBlockTrampoline.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACChannel.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACDynamicSequence.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACDynamicSignal.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACEagerSequence.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACEmptySequence.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACEmptySignal.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACErrorSignal.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACReplaySubject.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACReturnSignal.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACSequence.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACSignal+Operations.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACSignal.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACSignalSequence.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACSubject.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACSubscriber.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACTuple.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACUnarySequence.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/RACValueTransformer.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/ReactiveCocoa/metamacros.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/UIBarButtonItem+RACCommandSupport.h (1)
>     A Demo/Pods/Headers/Private/ReactiveCocoa/UIButton+RACCommandSupport.h (1)
>     A Demo/Pods/Nimble/Nimble/Matchers/BeAKindOf.swift (34)
>     A Demo/Pods/Nimble/Nimble/Matchers/BeGreaterThanOrEqualTo.swift (39)
>     A Demo/Pods/Nimble/Nimble/Matchers/BeNil.swift (18)
>     A Demo/Pods/Nimble/Nimble/Matchers/RaisesException.swift (178)
>     A Demo/Pods/Nimble/Nimble/Nimble.h (6)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSDictionary+RACSequenceAdditions.h (31)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSDictionary+RACSequenceAdditions.m (34)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSFileHandle+RACSupport.h (19)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSFileHandle+RACSupport.m (40)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSIndexSet+RACSequenceAdditions.h (21)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSIndexSet+RACSequenceAdditions.m (18)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSInvocation+RACTypeParsing.h (56)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSInvocation+RACTypeParsing.m (232)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACDescription.h (16)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACDescription.m (50)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACLifting.h (61)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACLifting.m (142)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACPropertySubscribing.h (117)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACPropertySubscribing.m (159)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACSelectorSignal.h (79)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSObject+RACSelectorSignal.m (330)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSSet+RACSequenceAdditions.m (19)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSString+RACSupport.h (22)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSString+RACSupport.m (35)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSURLConnection+RACSupport.h (25)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSURLConnection+RACSupport.m (54)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSUserDefaults+RACSupport.h (27)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/NSUserDefaults+RACSupport.m (56)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACBehaviorSubject.h (18)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACBehaviorSubject.m (56)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACBlockTrampoline.h (30)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACBlockTrampoline.m (156)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACChannel.h (70)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACCommand.h (123)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACCommand.m (267)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACCompoundDisposable.h (48)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACCompoundDisposable.m (239)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACDelegateProxy.h (28)
>     A Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACDisposable.h (35)
>     I Demo/Pods/ReactiveCocoa/ReactiveCocoa/Objective-C/RACDisposable.m (0)
‚ÄîJustin Makaila
‚ÄîJustin Makaila
‚ùØ carthage build --no-skip-current
*** xcodebuild output can be found in /var/folders/ym/cjv2ctc130v3slskyn7zw_2r0000gn/T/carthage-xcodebuild.Kbexbi.log
*** Building scheme "RxMoya" in Demo.xcworkspace
‚ÄîJustin Makaila
Also I should say - thanks for adding me as a collaborator, Ash! I'll leave you or someone else to merge this in (probably better to have someone look over it that isn't me at least.)
I'm seeings lots of things like `use of undeclared type 'ErrorType'` - I'm guessing CI isn't using Swift 2?
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/swift -frontend -c /Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Moya/Moya/Endpoint.swift -primary-file /Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Moya/Moya/ReactiveCocoa/Moya+ReactiveCocoa.swift /Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Moya/Moya/Moya.swift /Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Moya/Moya/ReactiveCore/MoyaResponse.swift /Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Moya/Moya/ReactiveCocoa/RACSignal+Moya.swift -target x86_64-apple-ios8.2 -enable-objc-interop -sdk /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator9.0.sdk -I "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Products/QA 1-iphonesimulator" -F "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Products/QA 1-iphonesimulator" -g -import-underlying-module -module-cache-path /Users/zbeckman/Library/Developer/Xcode/DerivedData/ModuleCache -D COCOAPODS -serialize-debugging-options -Xcc "-I/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/swift-overrides.hmap" -Xcc -iquote -Xcc "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Moya-generated-files.hmap" -Xcc "-I/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Moya-own-target-headers.hmap" -Xcc "-I/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Moya-all-non-framework-target-headers.hmap" -Xcc -ivfsoverlay -Xcc /Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/all-product-headers.yaml -Xcc -iquote -Xcc "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Moya-project-headers.hmap" -Xcc "-I/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Products/QA 1-iphonesimulator/include" -Xcc -I/Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Headers/Private -Xcc -I/Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Headers/Private/Moya -Xcc -I/Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods/Headers/Public -Xcc "-I/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/DerivedSources/x86_64" -Xcc "-I/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/DerivedSources" -Xcc -DQA_1=1 -Xcc -DCOCOAPODS=1 -Xcc -ivfsoverlay -Xcc "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/unextended-module-overlay.yaml" -Xcc -working-directory/Users/zbeckman/Projects/Glimpulse/iOS/project/Glimpulse/Pods -emit-module-doc-path "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Objects-normal/x86_64/Moya+ReactiveCocoa~partial.swiftdoc" -O -module-name Moya -emit-module-path "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Objects-normal/x86_64/Moya+ReactiveCocoa~partial.swiftmodule" -serialize-diagnostics-path "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Objects-normal/x86_64/Moya+ReactiveCocoa.dia" -emit-dependencies-path "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Objects-normal/x86_64/Moya+ReactiveCocoa.d" -emit-reference-dependencies-path "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Objects-normal/x86_64/Moya+ReactiveCocoa.swiftdeps" -o "/Users/zbeckman/Library/Developer/Xcode/DerivedData/Glimpulse-avhroqmcgyzbiecltqxshdpczkht/Build/Intermediates/Pods.build/QA 1-iphonesimulator/Moya.build/Objects-normal/x86_64/Moya+ReactiveCocoa.o"
Ideas...?
target 'Glimpulse', :exclusive => false do
pod 'MagicalRecord'
pod 'Alamofire', '~> 2.0'
(Realizing that, technically this looks like a Moya/ReactiveCocoa issue ‚Äì¬†I can create an issue over there if you would prefer).
pod 'Alamofire', '~> 2.0'
I'm very fuzzy on which pods I need to pull in... ReactiveCocoa, Alamofire, Moya, ReactiveMoya... And I'm pretty sure the README is quite out of date in this regard.
pod 'Alamofire'
CustomStringConvertible
String
CustomStringConvertible
String
(Notice that now it's Moya that has library problems...)
Ok, so after a good bit of fiddling, I learned a few things.
pod 'MagicalRecord'
pod 'Alamofire'
I also learned that `BrightFutures` has an incompatible dependency (it requires `Result` 0.6.1 and ReactiveCocoa is now using 1.0.0 ‚Äì¬†which leads to a lot of problems... However, with RAC your probably don't need BrightFutures so hopefully this isn't an issue for anyone).
So bottom line ‚Äì Still no good using the CocoaPod, but it's fine using Carthage from the original ReactiveCocoa repository.
I tried removing the Carthage install of ReactiveCocoa, and then updating with the pods you suggested:
pod 'Moya'
target 'Glimpulse', :exclusive => false do
pod 'MagicalRecord'
Questions, though:
#pod 'Alamofire'
let provider = MoyaProvider<MyTarget>(endpointClosure: endpointClosure)
@Moya/contributors
typo + remove empty spaces
About response codes, my thoughts:
// tip unknown
@jasl Although I like the suggestion about improving the failure case with pre-defined cases, that still doesn't solve the issue that API errors (4xx/5xx) are still accessed via something simply called `.Success`. The confusion therefore wouldn't be reduced with `Timeout` and `Cancelled` failure cases imo.
@Dschee  The definition of Result is `Result<Response, Error>`, means errors of API's shouldn't be handled, because you've got the response.
case Redirection
case ServerError
case Undefined
switch statusCode {
self = .Undefined
// tip unexpected error
// tip unknown
@jasl Thanks for adding cases for the success part as well. I continue to think those are great suggestions.
But again, that still doesn't solve the problem that the outer `let .Success(response)` case is named in a way people may be confused. To repeat the example with my colleague two days ago: I implemented a Moya provider class and he used it. But at the moment he wrote the first outer `.Success` and `.Failure` cases he already was convinced that he had handled API errors within the `.Failure` case and couldn't understand why the `.Success` case was called but didn't provide any data he was expecting from a successful API response.
``` Swift
// tip error
// tip unknown
@Dschee your issue I also meet too, but I think there is two parts, one is the codes that I just provided is the right way (at least for me), the other part is this really make some people confusing.
In my opinion, there are too many kinds of errors could be occured, but we don't need to handle those one per one, let's regrouping them (remember, this depends on your business and your restful-api design)
enum APIResult {
case NetworkError(Moya.Error) // the request is failed
var apiResult: APIResult
In my opinion, I don't like a library to do too much, if you think it's too complex to use, you can wrap it, that should be easy, but if the library to do too much, if there has any which not suit for your need, hacking it would be hard. I think Moya is a balance choice,
public static func TestingProvider() -> MoyaProvider<YourAPI> {
- Argo
- SwiftyJSON
- Api.recentPosts -> `[Post]` (`PostService.recentPosts() { (posts, error) in }`)
- Api.currentUser -> `User?` (`UserService.currentUser() { (user, error) in }`)
1. Add Moya as a submodule.
2. Write your code which uses Moya.
``` Swift
``` Swift
For Argo it would be something like this:
extension MoyaResponse {
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: ["data": response, "missing": key])
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: ["data": response, "expected": expected, "actual": actual])
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: ["data": response, "custom": error])
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: ["data": response, "missing": key])
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: ["data": response, "expected": expected, "actual": actual])
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: ["data": response, "custom": error])
public extension MoyaResponse {
throw NSError(domain: MoyaErrorDomain, code: MoyaErrorCode.JSONMapping.rawValue, userInfo: nil)
public extension MoyaProvider {
do {
//do cool things here
Wow, never imagined that this would explode to such an active discussion! üéâ
@irace Would you mind sharing some info/pseudocode of what you are doing in Tumblr.app? Would love to get some more ideas. What kind of use cases do you cover with your implementation?
This is a great idea! I really like the idea of caching responses for use in offline situations (as suggested by @aschuch). I've implemented a similar thing in my own projects in the past. It's pretty straightforward and is super useful.
``` obj-c
``` obj-c
It is janky, but it'll do for now. Anyway, I guess just see if anybody else runs into a similar issue, and if so maybe this is worth revisiting.
- `Alamofire (~> 1.3.0)` required by `Moya/Core (2.0.0)`
pod 'Moya/RxSwift', :path => "../"
pod 'Moya/ReactiveCocoa', :path => "../"
pod 'Moya', :path => "../"
and still have the following error:
- `Alamofire (~> 1.3.0)` required by `Moya/Core (2.0.0)`
Ya the ReactiveCocoa podspec also doesn't reflect the project's settings. In the project it is 10.9 but not in the podspec. üò¢
Can somebody give me hint or should it also be part of `MoyaTarget` and nobody hasn't the need to change that until now?
extension MyAPI : MoyaTarget {
public var parameterEncoding: Moya.ParameterEncoding {
Hi, sorry for commenting closed issue. I spent last hour troubleshooting an `Error Domain=NSURLErrorDomain Code=-1017 "cannot parse response"`.
Due to non-optional `parameter` property in `MoyaTarget` protocol, setting endpoint's parameter encoding to `.JSON` causes the associated `NSURLRequest` to have an empty `HTTPBody` property instead of a `nil` one. It seems that some server-side technology can have bad time handling such configurations (I'm using Node.js/Express.js as a sandox server).
jk's solution works for me! üëç üëç üëç
@justinmakaila, @esttorhe: In iOS 7 we cannot use dynamic frameworks, so probably there's no way to install `Moya`, neither `ReactiveCocoa` (which seemingly dropped iOS 7 support at some point). Please let me know, if I'm wrong.
@justinmakaila: It was the first thing that I did. : ) But then you need to add `ReactiveCocoa`, which is not possible for iOS 7. From their `Readme` page:
Sorry if the naming was intentional, or this PR is viewed as being overly pedantic!
Hi, Moya solve the problem of ‚Äúrequest‚Äù, and how about "response"?
extension MoyaProvider {
"All checks have failed" makes it sound pretty horrible.
I'm not sure if this is already known or furthermore intended but I tried to use `pod try Moya` and it failed with the following error message:
Trying Moya
Fetching podspec for `Moya` from `../`
or did I do something wrong?
Woha. That's a great troubleshooting experience. A lot like following a sports live ticker :)
pod try Moya
Trying Moya
Fetching podspec for `Moya` from `../`
Using Alamofire (1.3.0)
Using Moya (2.0.1)
Using Nimble (0.4.2)
Using ReactiveCocoa (3.0-beta.6)
provider.request(.UserProfile("ashfurrow")).subscribe(next: {
Can you help me setup a Provider with RxSwift? How a simple RxMoyaProvider should look? How the closure should look?
It would be good that the demo includes examples for both RAC and RX.
Currently I got my way with the Artsy implementation but im having problems declaring the provider. I know there is a branch about Rx Docs, but this probably be some kinda Faqsy.
NIIIICE
Do we need a minor version bump in Moya to use `:head` that way?
As @esttorhe suggested, but this 2 images in a row and add arrow between like this: :city_sunset:  :arrow_right:  :rocket:
@ashfurrow  :+1:
This PR adds full support for Carthage, and a solution to using `RxSwift` and `ReactiveCocoa` without mandating it for those who wish to use pure `Moya`.
- Adds `ReactiveMoya` and `RxMoya` targets
No idea, I've never worked with circle before. I'll take a look and get back to you about that
‚ÄîJustin Makaila
1,054 files!?  That's... _ahem_ a bit alarming.
I'm wondering: can that entire folder be removed?  From what I understand about Carthage, it's a minimalist system, it seems like a red flag that all these header files are included here.
‚ÄîJustin Makaila
> ## I'm wondering: can that entire folder be removed?  From what I understand about Carthage, it's a minimalist system, it seems like a red flag that all these header files are included here.
Ah I see.  Well obv my vote is to keep the repo lighter.  Might make sense, then, to add something to the README about building, but I think people that use Carthage already can figure it out :-)
Are you saying the demos won't even run if the user doesn't use Carthage?
Obviously, this isn't ideal, because `pod try` is a sweet way to handle that.
‚ÄîJustin Makaila
1. Run `carthage update` in the root
1. Run `carthage update` in the root (if you haven't already)
I'm glad the focus is remaining on CocoaPods.  I think Carthage is a great tool, but since most users aren't clamoring for supporting it, I think we'd be doing a disservice if CocoaPods was made a second class citizen.
‚ÄîJustin Makaila
‚ÄîJustin Makaila
> ## If we're centralizing docs here, I think it makes sense to centralize tests here as well. I can't see that being a problem with Carthage ‚Äì @justinmakaila does that sound OK?
‚ÄîJustin Makaila
github.com/Leviathon/Moya
:tada:
It seems to be working well in my own project but I haven't got the Demo project and its tests working. I also had problems with ReactiveCocoa due to Carthage setup which I'm not very familiar with.
The main concern for me is the return defer in Moya+RxSwift.swift due to the changes which won't allow defer's to return.  I don't really see the need for a defer anyway so have simply replaced with a return closure.
Nonetheless, hopefully this might help with the migration over to 2.0
Esteban Torres
Twitter: @esttorhe
Hi Ash,
Hi Ash,
Hi Ash,
I went down the :rabbit: hole and this is a major rework I think.
- Moya Core is compiling
- [ ] Migrate `ReactiveCocoa` to `swift2` branch
- [x] ~~Migrate `RxSwfit`~~
It seems to be working well in my own project but I haven't got the Demo project and its tests working. I also had problems with ReactiveCocoa due to Carthage setup which I'm not very familiar with.
The main concern for me is the return defer in Moya+RxSwift.swift due to the changes which won't allow defer's to return.  I don't really see the need for a defer so have simply replaced with a return closure.
Nonetheless, hopefully this might help with the migration over to 2.0
@alcarvalho I pushed a change to the `Podfile` pointing `Alamofire` to its github path and to the `swift-2.0` branch instead of a relative path.
pod 'Alamofire',
When installing Moya (master) using Carthage, I am running into the following error on app launch:
I have tried to add RxSwift to the Cartfile but [RxSwift does not yet support Carthage](https://github.com/kzaher/RxSwift/issues/40).
/cc @neonichu
I am trying to find out how to get `Alamofire.Request` after I did `provider.request(.Zen)` (currently it responses with `Cancellable` protocol).
i installed Moya with Carthage and i get a error in xcode when building because i don't have RxSwift, maybe to have a another branch or something for RxSwift?
AFAIK, there's nothing like subspecs in Carthage, so it would need to be a separate repo, probably?
I may add Carthage support to RXSwift, but I'm on the fence, mainly because RXSwift is the foundation of RAC 3.0, and it doesn't appear as if development is going to continue moving forward. Where does everyone stand on that? Is RXSwift support necessary, or can it be phased out down the line?
AH! I had a feeling I was looking at the wrong RxSwift repo.
Either way, the enhancement suggested to the Carthage maintainers should help solve this issue, that is, if it's implemented.
‚ÄîJustin Makaila
In my opinion i think its better to separate these extensions to have a its own repository e.g. (Moya, ReactiveMoya, and RxMoya)
// Build Moya
git "ashfurrow/Moya" "master"
// Build ReactiveMoya
git "ashfurrow/Moya" "ReactiveMoya"
// Build RxMoya
git "ashfurrow/Moya" "RxMoya"
@ashfurrow It's okey i understand, i really love Moya and Carthage for their simplicity, for now I'm gonna go oldskool and copy-paste the code until there is a better solution
sorry for being [unable to currently support Carthage](https://github.com/kzaher/RxSwift/issues/40) in RxSwift, but I'm waiting for some issues to be resolved on their end.
I've temporary made a workaround that enables Carthage to compile RXS/RXC.
It's one huge hack, but it looks like it could work until Carthage gets support for multiple repositories.
I've made separate branches for Carthage releases.
`latest-carthage/rxswift`
`latest-carthage/rxcocoa`
`ln -s RxCocoa/RxCocoa.xcodeproj _.xcodeproj`
This helps Carthage automagic target finder to locate targets for RxSwift and RxCocoa correctly and build them.
It looks like you can't have Carthage fetching both in parallel :( so you'll need to only uncomment one of them at a time.
**EDIT**: Check out the `carthage/reactive-extensions` branch
I bet @gfontenot could answer these questions.  Drop some Carthage knowledge on us, Gordon!
I don't know why it would. Carthage just spits out built frameworks, it doesn't care too much about how the project itself is constructed, so long as it builds cleanly.
``` ruby
github "ashfurrow/RxMoya"
``` ruby
github "ashfurrow/Moya"
@gfontenot How would you recommend handling the shared files between the reactive repos? Include them in the main Moya repo?
@gfontenot @ashfurrow @orta
[justinmakaila/Moya](https://github.com/justinmakaila/Moya)
[justinmakaila/RxMoya](https://github.com/justinmakaila/RxMoya)
[justinmakaila/ReactiveMoya](https://github.com/justinmakaila/ReactiveMoya)
@ashfurrow just got rejected while trying to push:
remote: Permission to Moya/ReactiveMoya.git denied to justinmakaila.
j ~/W/S/R/Example> carthage update
*** Fetching RxMoya
*** Fetching Alamofire
@Moya/contributors
@ashfurrow `RxMoya` and `ReactiveMoya` all work with Carthage. They're Swift 1.x. Yes, we just need to update CocoaPods.
‚ÄîJustin Makaila
> Super, cool! So if everything is working with Carthage, there's only a few things left to do:
> 1. Release a new version of Moya.
@ashfurrow I'm good with the proposal. I'd like to jump on a hangout to understand the organization's feelings on this subject, and also to spec out next steps for the reactive repositories and further developments. Shoot me an email at justinmakaila[at]gmail[dot]com to set something up this week.
‚ÄîJustin Makaila
On Tue, Aug 18, 2015 at 4:44 PM, null justinmakaila@gmail.com wrote:
> ‚ÄîJustin Makaila
> > Super, cool! So if everything is working with Carthage, there's only a few things left to do:
> > 1. Release a new version of Moya.
RC is on beta 8 while adding Moya required my project to go back to beta 6 (using Carthage).
To add more context: The problem here is that the ReactiveCocoa beta is referenced using its specific github branch.
I think we should simply add a version requirement to the major version of ReactiveCocoa, so that Carthage has a bit more room to decide which version of ReactiveCocoa to use.
@aschuch sounds good, do you want to make a PR for that?
Granted, that makes the method messy, hence my referring to it as ‚Äúnaive‚Äù.
- `ReactiveCocoa (= 3.0.0-beta.6)` required by `Podfile
Using Alamofire (1.2.3)
Installing Moya 1.1.1 (was 1.1.1)
Installing ReactiveCocoa (3.0-beta.6)
Moya seems very interesting, thanks! :+1:
class Bar: Foo {
ps I still suggest to reopen it, as it ongoing and reproducible in current maya with Swift 2.2.
- üìÅDemo
- üìÅdocs
- üìÅweb
- üìÅMoya
-- Moya.swift
-- MoyaResponse.swift
-- üìÅReactiveCocoa
--- Moya+ReactiveCocoa.swift
--- RACSignal+Moya.swift
-- üìÅRxSwift
--- Moya+RxSwift.swift
- Moya.podspec
Is `MoyaResponse` solely used for ReactiveCocoa stuff? If so, we should document that in its header too.
On a related note, is there not a dedicated XCProj/workspace for Moya development?
Great work with Moya so far. We're loving it at Ello.
That would be great! Still getting familiar with Moya but this will help push me along!
A minnor wording change.
@ashfurrow thank you! Looking forward to getting into Moya :-D
![](http://img.pandawhale.com/52241-Will-Smith-dance-gif-Rmef.gif)
You can easily update this file in future by simply run script: `github_changelog_generator ashfurrow/Moya` in your repo folder and it make your Change Log file up-to-date again!
Hah :dancers:
3. Any special behavior for the `NetworkActivityClosure`/`NetworkActivityChangeType`?  I would assume the type wouldn't change, just an `.Ended` to be sent to the closure on cancel.
1. ReactiveCocoa 2 (RACSignals)
3. ReactiveCocoa 3 (SignalProducer)
This is all taken care of in github.com/Moya/ReactiveMoya. Unfortunately, there's no CocoaPods support yet, only Carthage.
- The project/target are only used for building with Carthage.  The tests and demo are not included.
I've tested via my own fork and I was able to add and build Moya via Carthage.
Could switch to CircleCI
Absolutely.  Not familiar with Travis or Circle, but I'll see about getting the Travis build functioning :+1:
Supporting Carthage is really minimal work, and considering its extreme simplicity in comparison to CocoaPods is something we'll probably see more of in future. Plus, having a dynamic framework target in your project is good practice now that they are available (and now that Cocoapods deployments use them also).
@ashfurrow That was definitely not directed at you!  I thought language like "really minimal work" and "extreme simplicity in comparison" was getting into a CocoaPods vs Carthage battle :smile:, but perhaps I am just too sensitive.
Sorry, I'm not familiar with circle-ci. How should I update readme status?
@aschuch that's ok, i'll take a look here, we need it in the next week or so.
But you returning a `MoyaResponse` sounds intriguing, but I don't get what that would look like.
// Multipart image uploading not supported by Moya/Alamofire, temporary stand in
return RACSignal.createSignal{
let moyaResponse = MoyaResponse(statusCode: result.statusCode!, data: result.content!, response: result.response)
subscriber.sendNext(moyaResponse)
return RACDisposable()
Didn't know about Just :) That's going to be useful. Thanks!
- Data
- MultipartFormData
public protocol MultipartFormUploadable: MoyaTarget { }
return cancellableToken
// Additional stream parameters
for part in parts {
do {
public enum API: MoyaTarget {
public enum API: MoyaTarget
And thanks for so cool artefact, Moya literally saved me days of work and tons of headache!
@startupthekid I like that.
**EDIT:** Definitely not great that `Multipart` wouldn't exactly map to an `Alamofire` equivalent. Also, this doesn't solve the progress problem.
return cancellableToken
used with this code:
[The version in your ReactiveCocoa podspec](https://github.com/ashfurrow/ReactiveCocoa/blob/podspec/ReactiveCocoa.podspec#L38) does not seem to match [the version defined in your LlamaKit repo](https://github.com/ashfurrow/LlamaKit/blob/rac_podspec/LlamaKit.podspec#L3).
- `LlamaKit (from `https://github.com/AshFurrow/LlamaKit`, branch `rac_podspec`)` required by `Podfile`
- `LlamaKit (= 0.1.1)` required by `ReactiveCocoa (3.0.0-alpha.1)`
pod 'LlamaKit', :git => "https://github.com/AshFurrow/LlamaKit", :branch => "rac_podspec"
I ran into an issue when dealing with cached responses (i.e. 3xx status codes) that would incorrectly be rejected.
Nice, we are using WebLinking.swift for the parsing. WebLinking gives us the ability to ask for "next" and "prev" which are super handy. The issue we're running into is that the links are already url encoded by the application server generating the "Link" in the response header. Just saw your representor pattern comment. We'll explore that internally. We're non-RAC so we'll need to come up with something without signals. Seems like a good idea though @ashfurrow. Thanks.
Hello Ash,
![screen shot 2015-02-22 at 4 00 37 pm](https://cloud.githubusercontent.com/assets/6751025/6318980/fd9cbb80-baab-11e4-85bf-cd7508c8e6f5.png)
Thank You Orta! :)
Ahh, right, OK I just reimplemented the autoclosure style locally, and here's the error that turned me off to the idea:
Is there a `Podfile` I'm missing?
CHANGELOG.md             Gemfile                  Makefile                 Moya.swift               docs
Demo                     Gemfile.lock             Moya+ReactiveCocoa.swift RACSignal+Moya.swift     vendor
Are you hanging out with Eloy these days?  Tell him Colin says hi! :-D
I still have an issue though with :
/cc @aschuch
I am still getting this error with 0.6 and 0.6.1 in Carthage.  If I try going back to 0.5 (just to find anything that works) I get a different error:
> **\* Checking out Moya at "0.5"
> fatal: reference is not a tree: 80cc05720013042eccfc8bc20a8304cd3ae656d7
I declare the custom closure as follows:
Real talk I'm going to bed now and this needs to be squashed but it basically uses CP to manage dependencies while allowing for users to bare clone and integrate as a framework in a subproject, provided you also have AF and RAC.
Holy war indeed.
Ash I don't know how much skin in the game you have for this but I really don't want to see a fractured either/or world.
For the Carthage/submodule users‚Äì a Moya.xcodeproj defining the Moya.framework target is something I would very much like. Putting this in as placeholder, I'm working on it.
Hi @ashfurrow,
This was actually the reason why I ended up creating a new project for Carthage, because I wasn't able to resolve the CocoaPods dependencies to work with swift 1.2.
I think Carthage requires the project file to reside in the root of the repo though, so we would need to rearrange some things.
@orta's idea sounds really great. What do you think, @jspahrsummers?
@orta wouldn't be a fan of generating that. If you want to support Carthage, you should at least run it once to verify that it builds and then you'll have the Cartfile.lock, anyway.
cocoapods (>= 0) ruby depends on
source 'https://rubygems.org'
Luckily @yonaskolb created another Codegen written in Swift, more flexible and simple. I am very happy it now. kudos for him.
`Moya.defaultParameters()` exists but it is not exposed in any way to be configured
![2014-11-05 14-48-36 moya swift edited](https://cloud.githubusercontent.com/assets/829783/4917206/d9088724-64e1-11e4-9f9c-e02aef081ac2.png)
I've integrated Alamofire as subproject and dragg-n-dropped Moya sources as displayed at the screenshot and got this strange error.
It can be fixed by changing signature of Custom closure:
`case Custom((URLRequestConvertible, [String: AnyObject]?) -> (NSURLRequest, NSError?))` but I am really not sure that it's the right way.
I think orta's "in line provider" would be one way to solve this.  What would be another way for `sampleData` to be more dynamic?
let firstReq = Api.Status  // will return "broken"
let secondReq = Api.FixTheThings
let lastReq = Api.Status  // will return "fixed"
// how do these get associated with
.addStubbing(...)
let firstReq = Api.Status  // will return "broken"
let secondReq = Api.FixTheThings
let lastReq = Api.Status  // will return "fixed"
let provider = ApiProvider.StubbingProvider()
Permission denied (publickey).
What's the advantages of Moya over AlamoFire? Just asking, intending politely.
Interestingly this code:
Warnings are bad, yo.
struct MoyaProvider<T: RawRepresentable> {
let fooProvider = MoyaProvider(EndpointType: Foo.self, endpoints: [fooEndpoint])
// Invalid providers
// Invalid requests
let fooProvider = MoyaProvider(EndpointType: Foo.self, endpoints: [fooEndpoint])
// Invalid providers
// Invalid requests
``` Swift
// Defined in Moya:
// Defined in Moya
protocol StringBackedEnum {
// Code using Moya
