- The resolution looks strange, do all videos have the same width but change height?
> It's overkill and overly complicated
if (MimeTypes.isVideo(mimeType)) {
You can also enforce the gapless playback for other media sources by passing `false` as a last parameter to [ClippingMediaSource](https://github.com/google/ExoPlayer/blob/dev-v2/library/core/src/main/java/com/google/android/exoplayer2/source/ClippingMediaSource.java#L72). Note, however, that this is only advisable if you can ensure that all tracks start with a key-frame at the specified startPosition of the clipping.   See #2122.  Please can you revert the indentation changes before we look at this? Specifically (but not limited to) C.java and TsExtractor.java. If you look at the diff (by clicking "Files changed"), it appears as though you've deleted and re-added huge parts of these files because you've changed them to have 4 character indentation rather than 2 character indentation. This makes it very hard to review what you've actually changed. ExoPlayer source code uses 2 character indentation (and 4 character indentation for line continuations only).
But building that stuff was really really painful. I also got it working for opus, but it fails with very cryptic errors often times.
log snippet is NOT sufficient  @AquilesCanta - This might be fixed by https://github.com/google/ExoPlayer/commit/002dd72e702929a33d8940cfbaa758459e0067c6? Or alternatively, it might be a stuck playlist case? This is most likely the second. Otherwise, the errors would be propagated via `AdaptiveMediaSourceEventListener#onLoadError`.
For example, if your played_color is set to #33FFA500 (translucent orange), the played part will be painted in #FFFFA500 (opaque orange) while the unplayed part will be painted in the translucent orange. Judging from your screenshot, you are setting played_color to opaque orange, such that the played and unplayed part are both coloured the same.  I don't think this is HLS specific. We should get smarter about not retrying non-recoverable error types/codes in general, and apply consistent rules for all loads. As well as non-recoverable HTTP error codes, there are also cases like `FileNotFoundException` for local playback, and so on, where we should fail immediately.  The surface should still be holding the last frame just fine, so it's likely the black you see is actually another view being made temporarily visible on top. My guess is you're using `SimpleExoPlayerView`. It has a "shutter view" that does exactly this. Marking this as an enhancement, in which we'll provide an option on `SimpleExoPlayerView` to disable the shutter becoming visible if something has been rendered into the surface.
I think I recall having seen this as well but it seems to me it was device specific.
We're not going to look at this without complete information (including a full bug report - a small snippet of logcat is not sufficient) and proper reproduction steps.  It's been renamed to AdaptiveTrackSelection (because it's not used for audio as well). Note that it's pretty easy to answer this kind of question yourself just by looking through the project's change history (https://github.com/google/ExoPlayer/commit/ce5c0c18f952caa19b863345252fd267804d7e83).  It's `null` for non-adaptive playbacks. Adaptive (i.e. DASH, SmoothStreaming and HLS) playbacks have the concept of a manifest that provides the player with information about the available media required for playback (e.g. the available qualities, the URL of each media chunk etc). The object in these cases is a representation of the manifest. The manifest structure varies by standard, so it'll be an instance of either `DashManifest`, `SsManifest` or `HlsManifest`depending on the type of media being played.
@Override
@ojw28 I think a legitimate use case could be performance monitoring. While the SimpleExoPlayerView needs the onRenderedFirstFrame to remove the shutter, a performance monitoring listener wants to know the time it takes until the first frame is rendered and report that time.
<!-- need_sender_cla -->  https://google.github.io/ExoPlayer/doc/reference/com/google/android/exoplayer2/SimpleExoPlayer.html#setVolume-float- Great; glad you figured it out!  The default time bar now draws in the vertical center of the view, and should also respond correctly to `match_parent` and `wrap_content`.  Please could you make a pull request to the `dev-v2` branch instead?  TextureView can't be used to show Widevine L1 DRM content, which requires a secure output path. See also our [FAQs](https://google.github.io/ExoPlayer/faqs.html#should-i-use-surfaceview-or-textureview). It is possible on devices that support VR mode running Android N or later. Please look at [Secure texture video playback](https://source.android.com/devices/graphics/arch-st#st_vid_play) as a starting point. If you're using the Google VR SDK you might also find the sample [sdk-videoplayer](https://github.com/googlevr/gvr-android-sdk/tree/master/samples/sdk-videoplayer) useful. It shows how to play a video using the secure output path.  Are you using [DefaultBandwidthMeter](https://github.com/google/ExoPlayer/blob/release-v2/library/core/src/main/java/com/google/android/exoplayer2/upstream/DefaultBandwidthMeter.java)? You can pass in an event listener when instantiating it if you want to handle that event. Beyond that, I'm not sure what information you're looking for, so please clarify. Thanks! Pass something that implements `BandwidthMeter.EventListener`. You don't have to pass any particular object. Please read the code for `DefaultBandwidthMeter` if you want to see when the event listener is invoked.  I tried just adding that sample URL the demo app and seeking worked fine. The only case I can think of where that wouldn't be the case is if you're serving the file from a server that doesn't indicate the content length in its response headers. In that case it's working as intended that the duration is not known, and you should configure your server more appropriately for media playback. Note: This is probably the same as another similar issue you filed, here: https://github.com/google/ExoPlayer/issues/2306.  @marcbaechinger - Could you take a look at this? It looks like `OggPacket.packetArray` is too small, and simply resizing it to fit what's being read fixes the problem. I'm not sure what the implications are though.
- Different apps are going to want to compile FFMPEG to include different decoders, depending on their needs. See the FFMPEG extension section in our [supported formats page](https://google.github.io/ExoPlayer/supported-formats.html) for some of the options. Different apps may also want to provide support for different architectures. We could provide a default extension via jCenter, but it would likely be suboptimal for the majority of applications, either because it's unnecessarily large or because it lacks functionality.
MediaCodec$CryptoException: Crypto key not available
@wvpaf - This is Widevine test content. Has something changed about the way the content or the licenses are configured? It appears the license response doesn't contain the correct keys to play the content. Example:
- KindleFireHdx8 KFAPWI (Unconfirmed L3)
@wvpaf - I think WV need to do some investigation into the other devices (e.g. the Exynos devices) as per our internal thread. Hi,
1. Something else.
3. Seek to the very end of the seek bar.
> Host: popo.festiware.com
< Content-Type: audio/mpeg
> GET /hotlink/fhdbn390il/episode_1.mp3 HTTP/1.1
< Server: cloudflare-nginx
So yeah, there are lots of fairly nuanced trade-offs involved and it's likely not worth the additional complexity/cost.
The "insufficient output detection" error is indicative of the device refusing to decrypt the content because the protection level of the video output path isn't sufficient to protect the content. Is it possible you're plugging the Shield into an unusual display? I'd class anything that's not HDMI into a normal TV as unusual. It's possible that the Shield and the display haven't been able to negotiate HDCP if so. Alternatively, have you made any modifications to the demo app? @JamieAndresakis - No worries! I'd assume it's related to HDCP in that case. Plugging into a computer monitor isn't really a common use case. We've found that support can be quite variable (and all bets are off if you're using any kind of non-standard cable). At the platform level it's likely that the right thing is happening. I'm unsure why the license policy of the UHD sample content is different (if that is the case). In any case, let's assume everything is working as intended for now. If you encounter further issues please feel free to open a new issue.
```kotlin
```java
String state;
@Override
@Override
@Override
@Override
@Override
@Override
#EXTINF:60,
https://www.dr.dk/mu-online/api/1.3/subtitles/segment/urn:dr:mu:manifest:58e23e346187a4025c2641a0?segmentsizeinms=60000&index=21&subtitleType=Foreign
#EXTINF:60,
https://www.dr.dk/mu-online/api/1.3/subtitles/segment/urn:dr:mu:manifest:58e23e346187a4025c2641a0?segmentsizeinms=60000&index=22&subtitleType=Foreign
#EXTINF:60,
https://www.dr.dk/mu-online/api/1.3/subtitles/segment/urn:dr:mu:manifest:58e23e346187a4025c2641a0?segmentsizeinms=60000&index=23&subtitleType=Foreign
#EXTINF:60,
https://www.dr.dk/mu-online/api/1.3/subtitles/segment/urn:dr:mu:manifest:58e23e346187a4025c2641a0?segmentsizeinms=60000&index=24&subtitleType=Foreign
#EXTINF:60,
https://www.dr.dk/mu-online/api/1.3/subtitles/segment/urn:dr:mu:manifest:58e23e346187a4025c2641a0?segmentsizeinms=60000&index=25&subtitleType=Foreign
#EXTINF:60,
https://www.dr.dk/mu-online/api/1.3/subtitles/segment/urn:dr:mu:manifest:58e23e346187a4025c2641a0?segmentsizeinms=60000&index=26&subtitleType=Foreign
So the Custom ROM is not compliant with the Android CDD, either because its codecs aren't adaptive or because they're not advertising themselves as being adaptive.
I am able to reproduce the armeabi and mips failures with r14b.
Regarding armeabi failure:
Also, FWIW armeabi is a really silly architecture that does not have many devices in the wild. So you may be ok just building for armeabi-v7a (which works with r14b).
Regarding mips failure:
[3] http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cihgfjab.html Unfortunately, both the armeabi and the mips issues seem to be a bug in the compiler itself. I have filed a bug with libyuv [1]. There is a fix that disables the violating code [2]. You will be able to build it once that lands.
@Override
I am a bit confused about what the issue is.
@stellabei  the 'afterupgrade.txt' log does not provide any clues on the initial issue.
@yookore Do you have steps to reproduce the original issue reported here in the demo app?  I'm not sire I agree that it's the player's responsibility to tell you the size of a file. Can't you just query it directly (if it's a local file) or make a HEAD request (if streaming over the network)? What is it that you actually want it for? > Because file size and duration is from the same source, such as metadata of videos, so I think they may be on the same level.
We could consider add file size just in the case of regular on-demand media playbacks, if the server provides it to us. But I'm still confused about your use case. What is it exactly that you're trying to do? How do you end up with a single media source where track bitrates are unavailable, and where knowing the file size of each track can be used to implement a feature that it's otherwise not possible to build? Thanks! Have you considered injecting a DataSource that provides what you need? You could intercept the header information yourself in that case. I haven't tried but subclassing DefaultHttpDataSource might work for you. It's still somewhat unclear exactly what your use case is. Clearly describing a valid use case might motivate someone to take a look. Without a clearly described or possibly invalid use case this is less likely. Marking this as an enhancement for tracking, in any case.  If you have a proguard map, please could you provide the deobfuscated field name? Thanks. This stack trace looks wrong to me: though AudioTrack:779 looks correct for the call to processBuffers, it doesn't make sense for AudioTrack:816 to be do a field access which could cause this. I don't have that specific device available but I wasn't able to reproduce the error on another API 17 device. Is it possible that the map used to get this stack trace in Crashlytics is outdated?
I'll close this for now as I don't think there's anything actionable here, but please reopen if you can find a way to reproduce this or get a different stack trace in ExoPlayer that makes sense. Thanks! As per above, this does not appear to be an ExoPlayer issue. The stack traces do not make sense. They reference line numbers and imply the existence of dependencies like ExoPlayer -> Base_Widget_AppCompat_ActionBar_TabBar that don't exist. If these devices are running a custom Android build, then given what you're seeing it's likely the Android build is broken.  That's a complicated question to answer in practice. You're probably interested in performance relative to the VP9 decoder that the platform provides, but the platform decoder varies by device and there's nothing like a (working) platform API for querying how performant a platform decoder is. Performance of both the platform decoder and the one in the extension may be affected differently by things like thermal CPU throttling, what else your app is doing and other processes that are consuming CPU, so relative performance may vary at runtime. Furthermore, what "performance" means really depends on what you want to optimize for. If you're playing 10 second clips there's probably no point optimizing for power consumption. If you're playing full length movies, it's far more important. So it's a really messy topic in practice. We provide the extension as an option, and leave it up to you to evaluate whether it works well for you (e.g. by looking at analytics data gathered from your app, evaluating your priorities and so on).
// Should never happen.
throw new ParserException();
- If you're doing something like 360 video where only part of the video is actually shown at any given time, then you probably want the video resolution to be significantly greater than that of the display.
if (seenAudioSelection) {
@wvpaf - Can you see anything? Could you ask the device manufacturer to take a look if not?  Please provide clear reproduction steps in the demo app if you want us to look at this, including what test media we should use. Closing due to lack of information. Also, if the issue doesn't reproduce in the demo app, that suggests the problem is in your own code rather than ExoPlayer.  Same as https://github.com/google/ExoPlayer/issues/2579.  This sounds like an issue with your code rather than with ExoPlayer. There's insufficient context for anyone to be able to help (e.g. what is "exists()").
java.lang.IllegalStateException
@Override
- The ExoPlayer ffmpeg extension can be thought of as a bridge onto ffmpeg, and is licensed under the Apache License (Version 2.0). However for it to be useful you'd also need to be building and including ffmpeg in your application as per the build instructions. Ffmpeg has its own license(s) that you should be aware of if you do this. Refer to the ffmpeg [licensing page](https://www.ffmpeg.org/legal.html) to learn more. @vigneshvg - Do you have any x86 instructions? @needz, please try the following:
--extra-ldexeflags=-pie \
--disable-asm \
--disable-avformat \
--enable-decoder=vorbis \
--enable-decoder=opus \
--enable-decoder=flac \
cd "${FFMPEG_EXT_PATH}"/jni && \
${NDK_PATH}/ndk-build APP_ABI="armeabi-v7a x86" -j4
@Override
"extension": "isml"
This is likely a problem with how your HTTP server or client is configured. A search for that error message turned up some results that may be relevant so I suggest you look for help on Stack Overflow or similar.  The file starts with 426 bytes of XML. The format is detected and the stream plays fine if you trim that from the start of the file, e.g. with `tail -c +426 file.mp3`.
// Metadata!
If that's not feasible then you could just stop and restart the player at the current playback position (just seeking won't work as seeking to the current position is a no-op). This is a pretty bad solution, though, as it will interrupt playback, and it's inefficient.  Please see #930 and #2276.  Most likely you're playing a multi-period DASH stream where the formats change going from one period to the next. You need to use V2 or above to play this type of stream.
@Override
I can't see anything obviously wrong with your code. But I maintain the suggested approach is going to be much easier. If you want to go down some alternate path and it's not working, then you'll need to debug what's wrong yourself. @rafaeladel - You'd be much better off just following the official advice in my first response to this issue, including use of the library provided `AesCipherDataSource` and `AesCipherDataSink` components. There's really no need to reinvent the wheel. - If you're serving content using https then it seems unnecessary for it to be further encrypted for transmission. If you're not serving content using https then I would strongly urge you to do so.
We're unlikely to add support for this case. As per #1299 it's unlikely MediaPlayer is doing a particularly good job of allowing seeking (there's likely a significant trade-off of one kind or another involved). I think it's quite problematic to turn it on blindly, particularly with respect to playlist support. We could probably have it as an option that you can enable on the extractor. You'd need to pass your own ExtractorsFactory to ExtractorMediaSource that sets the option, if we were to go down that route. If you look at `FragmentedMp4Extractor` you'll see there are some flags that can be passed to the constructor to enable different non-standard behaviors. The no-arg constructor passes 0 (i.e. no flags). You could do something similar in `Mp3Extractor` to allow using `ConstantBitrateSeeker` if no other seeker can be configured (`FLAG_ENABLE_CONSTANT_BITRATE_SEEKING` or something). Initially there will only be one flag defined, but let's use the same style for consistency and so that we can add other flags in the future.
@Override
02-10 16:29:55.130 12839 12868 W WVCdm   : Could not read /data/mediadrm/IDM1013/ay64.dat2: No such file or directory
02-10 16:29:55.500 12839 12869 W linker  : libstagefright_soft_aacdec_mdp.so has text relocations. This is wasting memory and prevents security hardening. Please fix.
02-10 16:29:55.530 12839 12869 E DRM-LibSEP: drm_wv_mod_start_playback():6444: ERROR - Chaabi returned error value of 0x35.
``` venkataramanab@ I think your issue is content related so not the same root cause.
```logcat
gradel dependecy
and lollipop
` @Override
Model number -HM NOTE 1LTE`
am getting EOFException .I just wanted to know particular problem arise
onPlayerError()? Despite multiple requests, you've yet to provide proper reproduction steps for the issue being reported. I'm going to close this. If you want to file a new issue that includes all of the information that's clearly requested in the issue template, please feel free to do so!  Please see #2139.  What, specifically, is the failure? Works well for me. I think whether this fails depends on which version of javadoc is being used. If I remember correctly java8 versions are stricter, and treat this kind of HTML issue as an error where previous versions didn't. You can probably use an earlier version to generate javadoc correctly. That said, we should obviously correct the errors. Thanks for reporting!  Disabling the unused renderers through the TrackSelector should fix your issue.  I have a feeling this is fixed in the `dev-v2` branch, and that it's no longer necessary to disable the renderer . I could be wrong though. Please give it a try if you have a chance. Pretty sure this is fixed in recent V2 releases. Closing.  Sanity check: Am I right in thinking the DASH IOP example is actually in violation of the DASH spec, because it uses string AdaptationSet@id values where-as the DASH spec says the type should be xs:unsignedInt? The example should use integers, I think? Heh, I filed one through the form on the DASH-IF website. I had no idea it got mirrored to GitHub. I'll file any future issues on that tracker directly! Thanks for confirming. This is now supported in `dev-v2`.  > Making the view non-final will help a lot in term of View inflation performance.
We make things final where we don't think there's a good argument for extension as a way of limiting the (already very large) API surface, and guiding developers toward other (preferred) way of achieving their goals. @botondbutuza - What's your use case for requiring extension? Adding an extra button could be pretty easily done without extension. Replacing the layout using one of the approaches described [here](https://medium.com/google-exoplayer/customizing-exoplayers-ui-components-728cf55ee07a#.elkgs273q) would let you add an additional button, and you could find that button in a wrapping class using `findViewById` as normal.
Specifically chunk number 2 of every media playlist (I didn't actually check them all, I think). The snippets above were obtained from the 1650000 variant.
Reading the specification, I think that last sample should be 'sliced' to duration zero. Unfortunately our handling of edit lists is incomplete (see the comment in parseStbl) and it looks like making your suggested change would mean that we could include a whole audio sample that should be completely removed. Why does this track have an edit list at all? It sounds like it isn't needed, and if it were removed you wouldn't encounter this edge case. Does it work if you just pass `-use_editlist false` to FFmpeg, or are you relying on edit lists for something else? I'll submit a fix that includes the sample for edits in non-audio tracks. This issue will be updated once it's merged. Thanks.  Using TextureView is fundamentally less efficient than using SurfaceView, so if you're pushing against the limitations of the device you should expect a slightly choppier experience. The rotation issue using SurfaceView is already tracked in the issue you reference.  @yshrsmz Please could you provide the output of `adb bugreport` taken just after seeing the error?
@Override
@Override
CC1=eng;CC3=deu
If subtitles are displayed, then you are forgetting something in your app. Most likely, the text track is not being selected.
There are a few options I see here:
[0x7f8450c043a8] httplive stream: HTTP Live Streaming (radios-ec.cdn.nedmedia.io/radios/ec-alfa.m3u8)
W/MDRMOemCrypto: duplicate SPS NALU (skipping)
E/MDRMOemCrypto: ERROR: multiple PPS NALUs (not supported by video decoder)
1. A stream should claim that it's avc1, include SPS/PPS units in the init segment and *not* in the media segments.
or video frame?
<Header for 'Private frame', ID: "PRIV">
http://programmingmemojohnchang.blogspot.tw/2016/12/improve-performance-of-short-seek-of.html
// Variables
private Uri uri;
@Override
uriParse();
@Override
I'm first at ExoPlayer Development, so this code may be strange
Even so, example code run without problems  @masiha68
Common workarounds for this problem are (1) (re-)encoding the source video with only key-frames so any frame can be decoded for about the same cost, at the expense of decreased coding efficiency, (2) decoding and storing whole groups of pictures in advance of playing them, which can use a lot of storage (unless you re-compress the decoded frames independently) or (3) playing only those frames which can be decoded efficiently (normally just key-frames) which means that playback won't be smooth. Various other tricks/tradeoffs are possible. Dear mehraf:
original movie:
**(play baseball in reverse direction is actually  very funny!):**
**In short, technically it is NOT hard to do but the only problem is the irregular source movies.**
3. When an output buffer is rendered, look at its timestamp. If it matches the timestamp recorded in the previous step then it's the first buffer after the format switch. Generate an event and do what you want in response to it.  This is a duplicate of #1978, #1921 and #2163. @AquilesCanta Pretty sure you're right that the streams are in violation of the spec. I wonder though: Am I right in thinking that we started looking at continuity counter as part of the work to handle "noisy input" properly? Is there any other reason to look at them? If not, maybe we should disable the continuity counter checks for HLS via (another :/) flag, given they appear to be causing problems. Handling "noisy input" doesn't seem necessary for HLS because HTTP/TCP is used. Note: If we do this, it will need to be V1 and V2, since I continuity counter checks have been added to V1 as well.  We already support seamless looping in ExoPlayer V2. So I think all you need is the ability to play a section of a video (rather than the whole thing), which you could then loop. The ability to play a section of a video is tracked by #1988, so please follow that issue.  We did intend to write a migration guide, but in practice it's difficult to do so because ExoPlayer can be used in so many different ways.
on that page suggest what it's describing isn't really standardized. Just hosting the file in a normal way on a server that supports partial range requests is the best thing to do.
- We don't know what "correct" means because we don't know what behavior you're expecting.
Asides:
@gbadoual - You'll likely find including RESOLUTION attributes in your master playlist also resolves the issue for your stream.
@Nelsun - I'm not sure I follow your null pointer exception description. It sounds like something we should definitely fix though. Could you provide more details to help? As I understand it:
@Override
The question now is how to discriminate them if both streams (splice info and DTS-HD) are present in the same program. I assume something can be done by using the 0x06 stream type, but that's in the muxer side. It would be nice to find out.
The audio track has a `.mp3` box in the `stsd` which we don't currently handle. The code is specified for [Quicktime](https://developer.apple.com/library/mac/documentation/QuickTime/QTFF/QTFFChap3/qtff3.html#//apple_ref/doc/uid/TP40000939-CH205-BBCGEBEH) and it looks there is also an alternative way to signal it using an [ObjectTypeIndication](http://mp4ra.org/object.html).
- Is it intentional that you have 8 ExoPlayer instances at the same time? That looks a little suspicious to me.
However, it looks like we don't support forced subtitles for DASH. Could you give some details about how you want to signal forced subtitles, and/or provide some sample media? Thanks.
Have you seen #2014 ? Is this related? If so, this is a duplicate. If that's the case, please close the issue. If not, please clarify, as I might be misunderstanding the problem.
@amintabar If you're playing HLS streams, use HlsMediaSource (not ExtractorMediaSource).  I see where you're coming from, but in practice, if you do this, you end up having a to add a whole bunch of blocks that look like:
if (chunk instanceof MediaChunk) {
// Do something else
@Override
Could you elaborate on what you mean by "flakey"? Are the files truncated?
Have you seen #1967 ? For me, the first chunk doesn't play in any of exoplayer versions, unless I set FLAG_ALLOW_NON_IDR_KEYFRAMES.
There are so many different variants of what it means to "support subtitles". You need to be more specific with exactly what media + subtitles you're trying to play (ideally providing links to sample content).
Here's a basic example for playing subtitles from a `Uri srtUri` alongside some other `mediaSource` providing video/audio:
@AquilesCanta - Is there a valid general case way to support this, or is the above correct? Would there be value in providing an option to enable support for this case (i.e. by forcing mapByType to false) if the application knows that the PIDs in the content wont change?
@SrujithPoondla If you want to write a custom video renderer that uses FFmpeg, I'd recommend taking a look at the [vp9 extension](https://github.com/google/ExoPlayer/tree/release-v2/extensions/vp9) as a starting point. That extension wraps libvpx but you could use a similar structure for wrapping FFmpeg. I'm not aware of any tutorials about how to do this I'm afraid.
@nguyenxvn I'm afraid I don't have any information on building FFmpeg on Windows. Maybe [FFmpeg's compilation guide](https://trac.ffmpeg.org/wiki/CompilationGuide) will help.  @Shyri can you provide a adb log? if the content cannot be shared there may not be much the OEM can do to troubleshoot.
This feature will be available in `2.2.0` (scheduled for release this week) and above.  We have recently added an `HlsDataSourceFactory` interface. By implementing one, you can provide a custom `DataSource` for media chunks, playlists and keys. In your case @xbezdeka, it might make sense to take advantage of this to avoid matching the Uri yourself. Let me know if you run into any issues.  There is insufficient information here for us to debug the issue. Please read the issue template and file a new issue with all of the requested information if you wish for us to look at this.
Unsure. @wvpaf, do you know?
|| "CIPAMRNBDecoder".equals(name)
04-28 15:36:09.698 7322-7753/com.google.android.exoplayer2.demo D/adaptiveaudio: http://hungcomiosta-vh.akamaihd.net/i/VideoS3/r/ms2/20673450/4/1235/Purza_,32001,64001,96001,128001,196001,.mp4.csmil/segment4_4_a.ts
04-28 15:36:10.514 7322-7753/com.google.android.exoplayer2.demo D/adaptiveaudio: http://hungcomiosta-vh.akamaihd.net/i/VideoS3/r/ms2/20673450/4/1235/Purza_,32001,64001,96001,128001,196001,.mp4.csmil/segment5_4_a.ts
04-28 15:40:23.529 7322-7891/com.google.android.exoplayer2.demo D/adaptiveaudio: http://hungcomiosta-vh.akamaihd.net/i/VideoS3/r/ms2/20673450/4/1235/Purza_,32001,64001,96001,128001,196001,.mp4.csmil/segment2_3_a.ts
Can you please upgrade to 2.4.0 and confirm? Hello @hungamademo. I'll try to help as best as I can:
The stuttering you observe in Random adaptation may be caused by the fact that HLS requires overlapping segments downloads for adaptation (unlike DASH, for example). So, when the chunk downloader needs to choose the next segment to download, if random, it is likely that the variant gets changed, resulting in the buffered position not advancing. Let me know if you don't think this is the case.
Tackling each of these:
This is not something we support.
Here is an interesting bit:
@wvpaf / @jefftinker - This looks quite serious. When the CDM requests provisioning, we generate the URL to which the request is sent as:
@mlondon1 - How are you implementing `executeProvisionRequest`? If you've taken ExoPlayer's default implementation, please try nulling out the request properties so that the `Content-Type` property doesn't get set. This appears to fix the issue when I tried it.
Actually, it reproduces relatively easily (e.g. within 5 minutes or so) if you unleash the monkey on your app, like:
adb shell monkey -p com.pr0gramm.app -v 500
I assume you meant H264. It is strange as the calculation should be correct. Try attaching a debugger and see what's going on, another approach I'd recommend is playing the problematic streams in v2 and see if the behavior is any different. This doesn't require any effort from your part, but if we manage to reproduce it we might be able to help you.
This is a dupe of https://github.com/google/ExoPlayer/issues/1157, so closing this.
@ChernyshovYuriy  it would be helpful to get an ADB bugreport from the device so we can tell why the provisioning request failed.
I'm unsure about this (it sounds pretty strange). Why is SurfaceView not a solution for you? It generally gives better performance and smoother frame release.
repositories {
There's some terminology confusion here, because there's also an `assets` directory, which is different to `res`. See [here](https://developer.android.com/studio/projects/index.html):
/storage/emulated/0/netease/cloudmusic/Music/Jerry Martin - SIMnata %2315.mp3
Hi dlewanda,
Please do play around with the workarounds mentioned if you have a chance. Thanks!
Hi @lkcanal,
> I'm trying to understand if this is a valid usage of DASH or if we should define our own app namespace in the XML and put the information under a custom element. Going with the latter I would definitely have to modify ExoPlayer a bit or somehow parse the XML a second time which complicates things a bit.
I'm don't think we have a good answer to this question/problem. It sounds very application specific, to the extent that it may or may not be an issue with application code (although if it is, it's curious that the resulting behavior appears to be device/os specific).
>    Renditions specified by the Variant Stream.
@wvpaf - Could someone from Widevine comment on this also. You're the real experts here. Thanks!
> Intrusions of "custom business logic" like "for Widevine, actually ignore the key IDs in the request and just use the content ID" just serve to fragment and overcomplicate the picture.
As an aside, I don't know what "P7" and "P8" mean. They sound like details specific to your media to me?
The nature of the issues you're seeing suggest a encoding/encryption/packaging issue to me. What tool are you using to package the media, and are you able to play it successfully elsewhere?
@wvpaf - Are you able to provide some assistance here? Thanks!
"drm_scheme": "widevine",
@erdemguven - Please take a look. Thanks!
@hezhisu - We would appreciate it if you could not cross-post exactly the same question in multiple issues. It creates more work for us, and will not lead to your question being answered more quickly. Thanks.
looks weird. I would have expected something like
@AquilesCanta PTAL, thanks.
I think my only remaining question is how likely the copyright symbol is to be mangled. Hopefully we can get this merged back into `dev-v2` in the next few days :).
@guillaumemarc  Can you monitor the CPU usage on the device, you may be overrunning the device's capabilities.
So this is a violation of the DASH spec:
meant "If the playlist was changed". This is indeed out of spec but, in my opinion, with no greatly negative consequences (does not mean you will get stuck or anything like it, we are just refreshing twice when the spec says we should refresh once). Will look into it, though.
Also, due to splicing, this
@AquilesCanta - Can we close this as fixed in 2.2.0?
@adnanutayim - Any JWPlayer issues should be reported to JWPlayer. We have no control over what version of ExoPlayer they're using and of any local modifications they make, so cannot provide direct support. This issue should remain open to track a default player behavior on BLWE.
@cdrolle FYI
Well... The checks for AVC codecs have now been added to version 2. Please give it a try(once it gets pushed) and let me know if there are any issues.
When does the toast appear and when does the exception you pasted occur?
@ojw28 if you have received the logcat and videos related to this issue?  If so, can you attach them here?
Is it possible to provide some (fairly minimal) patch to the ExoPlayer demo application that allows the issue to be reproduced there? If someone can get us that far then we'll take a look. Until then I don't think we have clear reproduction steps. @mufumbo - ExoPlayer powers a *huge* number of playbacks every day across many apps on Samsung devices, including millions of YouTube playbacks, and we just don't see lots of users reporting that they see a blank screen instead of the video. We also test with the demo app regularly on Samsung devices and do not see this issue. That suggests there's something that your app(s) do specifically that causes the problem to reproduce, which is why we're requesting a patch to the demo app that also allows the issue to be reproduced there. This will help us to reproduce the issue and to understand the conditions necessary for it to occur.
Also an ADB bugreport would be helpful.
thaks.
@biezhihua - Please provide the requested information, or we'll close this issue. Thanks.
@AquilesCanta suggested that this might be an issue with capabilities reporting. You could try stepping through the code in [MediaCodecUtil](https://github.com/google/ExoPlayer/blob/r1.5.9/library/src/main/java/com/google/android/exoplayer/MediaCodecUtil.java#L154) to see if there is decoder for MIME type video/hevc present on this device, and, if so, why it does not have the required capabilities on Android 4.4.
- Optional additional boxes defining, for example, styling information.
An ADB Bugreport might be helpful as well.
@gvidda, Since the devices are exhibiting different issues it would be best to create separate cases with supporting information like ADB bugreports and links to content to reproduce.
I can reproduce the issue. It appears to occur only (or at least primarily) with encrypted content, where-as clear content appears to be unaffected. I'm not sure there's much we can do to fix this at the ExoPlayer level. I'll pass the issue to Samsung; hopefully they'll be able to fix it in a future platform update. I was testing using 2.x and the issue still reproduces. I think the problem is in the underlying platform, and I wasn't able to come up with a workaround for it. I've reported through an internal channel and therefore there's no publicly visible ticket/reference. I'd suggest your customers' file their own ticket with Samsung, referencing this issue. Samsung tell me this is fixed in their Nougat update.  As discussed, it's probably fine to merge a workaround for this but I will follow up to check if it's safe to treat DTS-HD as DTS first.
You mean something like setting playWhenReady as false?
What actual device is this, and who's it made by? I can't seem to find any conclusive answer by searching for "xo4".
@AquilesCanta - Is this fixed in V2? I don't think we need to backport to V1, but we should make sure things are working correctly in V2.
AudioTimestamp is only used if the device is running >= API 19, so it is strange that you're seeing this error. Please send a full bug report captured with `adb bugreport` to dev.exoplayer@gmail.com.
The stack trace mentions AudioTrack.java:1282, but that line doesn't exist in r1.5.6. Did you modify the code?
@Muthukathiravan, I'm afraid there's not enough information to know what is being asked. When you create an issue, please give a full description and any applicable information requested in the issue template. Otherwise we will just close the issues, because we can't help!
@mromer,
@wvpaf - Do we have any sample streams?
Hi @tomaskukol ,
Moacir, yes that looks right, the 500 error is a result of the invalid challenge provided to the server.
@moracir69, our DRM team does not integrate the PlayReady solution.
@Ood-Tsen i did as you said and the log says:
Build configuration: [sf] [libui] [libgui]
Sync configuration: [using: EGL_ANDROID_native_fence_sync EGL_KHR_wait_sync]
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
mAbandoned=0
GLES: Qualcomm, Adreno (TM) 320, OpenGL ES 3.0 V@84.0 AU@05.00.02.006.020 (CL@)
_format_BGRA8888 GL_EXT_texture_type_2_10_10_10_REV GL_NV_fence GL_OES_compressed_ETC1_RGB8_texture GL_OES_depth_texture GL_OES_depth24 GL_OES_EGL_image GL_OES_EGL_sync GL_OES_EGL_im
Region undefinedRegion (this=0xb60937ac, count=1)
VSYNC state: disabled
.exomediademo.ui.activity.VideoSimplePlayerActivity
Overlay State
src(msmfb_img) w=896 h=480 format=17 MDP_Y_CBCR_H2V2_TILE
Thanks!! Finally i've figured out it was a scale problem!!
This issue is really very confusing. Closing.
Isn't the problem more that the server is using ICY, which isn't _real_ http? I wouldn't say it's a problem that an http stack can't handle a non-http protocol. It's more an added bonus if it does ;)...
Closing since we do not officially support ICY. As per @cyberjaime45 above, there exist pretty trivial solutions to make it work if you wish to do so.
@arianaa30 - I think those are questions you'll have to answer for yourself ;). It's not something we're interested in supporting directly at the current time.
@nitro52 - You can add a URL to an existing collection in ExoPlayer's demo app too. Samples are listed in `Samples.java`, so you just need to modify that. For 2.x this class will turn into a JSON file and it'll be possible to load any such file into the demo app without making any code modifications.
I think it's a device specific issue. The device doesn't appear to have passed Android's compatibility test suite (https://source.android.com/compatibility/cts/) and also appears to be running a fairly strange looking eng build. You should report the issue to the device manufacturer.
The code underneath the platform is throwing an `IllegalArgumentException` as shown above, which seems to be at odds with your statement that it's fine. Please clarify. Is it possible for you to root cause exactly why this exception is being thrown?
The sample content contains very strange edit lists in three of the video representations. We're following up with the content owner to find out whether they think the media is valid, and will either get the media fixed or patch ExoPlayer depending on the outcome of that discussion. Thanks!
@Ood-Tsen is correct. Note that since ExoPlayer uses Android's platform decoders, any support would likely rely on changes being made to the underlying platform, in addition to changes to ExoPlayer.
What kind of transformation do you need to do?
This is not something we support.
Although your manifests contain EXT-X-DISCONTINUITY-SEQUENCE tags, they are being incremented incorrectly. I will provide a more complete analysis tomorrow, but I believe this to be a media issue, not an issue with ExoPlayer.
EXT-X-MEDIA-SEQUENCE    62
EXT-X-DISCONTINUITY
EXT-X-DISCONTINUITY
EXT-X-MEDIA-SEQUENCE    63
EXT-X-DISCONTINUITY
EXT-X-DISCONTINUITY
EXT-X-MEDIA-SEQUENCE    63
EXT-X-DISCONTINUITY 2
If you do expect a client to pick either AVC or HEVC, then why not just have a separate playlist for each?
Hi ojw28,
Hi ojw28,
Hoi Ming
@wachiu I just tried playing the stream in 1300_blocky.zip again and couldn't spot any blockiness using the code on the dev branch. Could you describe where/when the video is blocky? Are you playing the same stream? What device/build are you using?
@wachiu Please could you file a new issue, and include a link to a H.265/HEVC DASH test stream we can use to reproduce the issue? I will rename this issue to indicate that it's specific to HLS. Thanks.
Most likely the device doesn't advertise support for the format/resolution/frame-rate combination that you're trying to use, in which case this is working as intended. If you're using DASH you should definitely not be only providing 4K representations. There should be SD and HD representations as well in the same adaptation set. This allows playback to proceed successfully using the subset of representations that are supported by the device.
I think this is custom enough to be outside the scope of this issue tracker, sorry.
The original bugreport for this case the error right before is : ' WVCdm   : CryptoSession::LoadKeys: OEMCrypto_LoadKeys error=10012'.
@wvpaf - Did we ever hear back from the OEM? If not, please add the "wont fix" label and close, since I don't think there's anything we can do to fix this in ExoPlayer. We have not. Sorry.  I'm sorry, but this is an issue tracker; it's not the right place to ask general how-to / tutorial questions, particularly when the scope of the question is outside of the immediate scope of the project. This has already been answered in #1440. If you're still struggling, StackOverflow would be a more suitable place to ask your questions.
1. Player extracts pssh from arbitrary stream.
adb root
@brucetoo The chunks are being fetched with a base URI before redirection. I will take a look at fixing this.
Exoplayer (r1.5.7) cannot player a Widevine asset, which can be played on shaka player v1.6.5.
filename: dash_widevine.zip
username: hlit8448
password: 5jH62BU2
username: hlit8448
password: 5jH62BU2
Hi hoimingw@,
Exoplayer version: 1.5.7
1. It can be played on Shaka player 1.6.5
filename: dash_widevine.zip
username: hlit8448
password: 5jH62BU2
04-21 18:46:21.044 2495-2521/com.google.android.exoplayer.demo D/mali_winsys: new_window_surface returns 0x3000
04-21 18:46:24.032 2495-2521/com.google.android.exoplayer.demo D/mali_winsys: new_window_surface returns 0x3000
04-21 18:46:25.683 2495-2521/com.google.android.exoplayer.demo D/mali_winsys: new_window_surface returns 0x3000
04-21 18:46:27.894 2495-2521/com.google.android.exoplayer.demo D/mali_winsys: new_window_surface returns 0x3000
I'm not sure exactly what error you are referring to, so could you paste the exception here?
You updated the ExoPlayer version but the error you are getting is still `ArrayIndexOutOfBoundsException`? Are you sure that the client report is not in the older version? If this is not the case, I will not be able to do anything without a sample to reproduce the issue. From the stack trace, the crash looks exactly like the one I spoke before, but unfortunately I cannot explore every possible input for which this exception could be thrown. There are two possible ways to go:
As an aside, you should probably use the templated style of manifest regardless, since they're generally more concise.
Marking as bug for now, although this is really pending further investigation.
Hmm. Are you passing non-default values when constructing the `DefaultLoadControl`, or are you just using the constructor that only takes an `Allocator`? Have you tweaked any other values, such as the buffer segment size that's being used?
- Unsure: FLAC, Opus
As an aside, the comment to which you reference is a typo; we'll fix that!
This sounds like a device specific error. Please report it to the device manufacturer (it's unclear whether the device has passed Android CTS).
Actually, I think it might be possible for this behavior to occur in the DASH case (although it's not really the same problem). I'll have a look.
It's not always -1 for DASH (as demonstrated if you simply modify the demo app to print the value). This callback is invoked without knowledge of what's being parsed from the data, so the frame rate needs to be indicated in the manifest (or equivalent) if it's to be set.
@wvpaf - Could you take a look?
@pykler, @polmabri - If either of you still have a device in this state, and you have root on the device, the SoC manufacturer has requested the following information, which will allow them to create a custom TZ image to further debug the problem:
fastboot getvar uid
@pykler &/or @polmabri , any update?  This case is starting to age. Any update would be helpful. Thanks,
@vxhviet You could (for example) log the timestamps of frames as they are decoded, at the start of [MediaCodecVideoTrackRenderer.processOutputBuffer](https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/MediaCodecVideoTrackRenderer.java#L385). If you pause the player, then tap on the seek bar you should find that the number of frames that have to be decoded depends on where you tap (on or just after a key-frame should require fewer frames to be decoded). To find out how long it's taking, you could use `adb logcat -v threadtime` to see the how much time elapses between logging a request to seek in your app and the final frame being decoded.
Note - It's also unclear whether you're talking about HLS, DASH or SmoothStreaming. The failure mode for BehindLiveWindowException is similar in all cases, although in DASH it can also be caused by incorrect server/device time synchronization for certain types of manifest (you would have to provide a test stream exhibiting the issue for us to tell you whether this is the issue).
> This example mp4 file (http://23.239.4.36/test_audio/kwwl_20161114195742230AC.mp4) when played through the Exoplayer 2 demo app seems to fail because of the audio renderer falling behind the video, but the gaps in byte position between audio and video data never seem to be larger than ~50-100kb (viewed using "avprobe -show_packets" ).
> it is impossible to correctly signal HE-AAC using ADTS header
Please could you explain in detail exactly what you are trying to do? Your first message did not mention encryption; what scheme are you trying to use? Can you clarify why you are making a request to the server if everything is downloaded?
Hi @AlirezaGhanbarinia, if you could please provide a description of what your problem is, that would be really helpful. Please be specific, provide as much descriptive information as you can. So far, it seems that exoplayer does not have anything to do with this scenario.
What is is that you're actually trying to achieve? Is this for DASH or for HLS?
>         subtitleUri,
>         MediaFormat.createTextFormat(
Log.e("DRM",
FireOS isn't "proper Android". If this is FireTV specific then you'll probably have to report it to Amazon directly, since it's likely an issue with their FireOS implementation.
@DBradyIE, unfortunately the provided media sample includes a single edit list which doesn't include any sync samples. This is currently not supported (mentioned [here](https://github.com/google/ExoPlayer/blob/267a870509bb85e2cff839ea162ae5b7c85933aa/library/src/main/java/com/google/android/exoplayer/extractor/mp4/AtomParsers.java#L261)). This could change in the future, but not for now. Better error reporting will be included in the next release. If you control the file encoding, this is easily fixable.
Log.e("DRM",
One other question - I assume you're not doing anything to deliberately lower the security level of the MediaDrm implementation (if you don't know what this means, the answer is no :)).
@ojw28 could you please forward it to me? thanks!
Exception:
@dgreenhalgh, If you are 100% sure that this bug is affecting you,  @andrewlewis suggested, one quick workaround would be to remove TYPE_udta and TYPE_meta from the shouldParseContainerAtom and shouldParseLeafAtom methods in the Mp4Extractor class.
That's a segfault as opposed to an out-of-memory, as far as I can see. I doubt we can do much to fix it; given it's quite deep in the platform. Speaking of which, judging from the build fingerprint (`TECLAST/p90hd/p90hd:4.4.2/KOT49H/eng.hy.20140822.083942:eng/test-keys`) it looks a bit like you're running a non-standard build. Are you sure that's not the source of this problem?
@AquilesCanta - This is an interesting one to look at.
@gongshoudao It is impossible to help you with that amount of information. Also, since the issue is closed, please file a new issue including all information requested in the issue template.
The media is strange, in that many PES packets within the stream don't declare pts timestamps. In other words, `ptsFlag` is false [here](https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/extractor/ts/TsExtractor.java#L593).
@AquilesCanta - This would be a good thing to fix. In the case that PesReader sees a packet where ptsFlag isn't set, it sets timeUs to 0 and ends up propagating this to its payload reader. It should probably propagate a "not set" constant of some kind. This would allow the payload reader to increment time by itself in the case that it knows the sample duration (as is the case here).
Hm. That's odd, I would have thought that would break a whole bunch of things. Do you have a way of confirming whether that's the issue?
case MimeTypes.VIDEO_MP4V:
The media here is pretty unusual. The player's doing what it's doing because the initialization chunk contains a sidx boxes (an index of the chunks that among other things specifies each chunk's offset and length). This is unusual. There's no value in the sidx boxes given the mpd is listing the chunks using a SegmentTimeline, and the range offsets don't apply. The player gets confused, tries to use the sidx index rather than the mpd, and playback fails. ExoPlayer should probably prefer to use the mpd in this case; I'll have a think about that. Although on your side, unless there's a good reason to keep them, you might want to consider removing the sidx boxes from your initialization segments, which should fix the issue for you.
As an additional point, it appears that this content is DRM protected beyond ~10s. I would expect the mpd to include ContentProtection elements to indicate this.
@CAMOBAP795 The [Android M CDD](https://source.android.com/compatibility/6.0/android-6.0-cdd.pdf) (and older versions) do not require compatible devices to support playing more than one video at a time, and I don't think there are any [CTS](https://source.android.com/compatibility/cts/index.html) tests that fail if using two video decoders at a time doesn't work.
What benefits do you obtain from using mpegts, exactly?
> URISAFE_IDENTIFIER_NONNUMERIC: A nonnumeric identifier that is safe for use in data fields
The demo app has examples of playing m3u8 HLS playlists; please take a look and use that as a starting point.
Is this in the context of HLS, DASH, or something else? Please could you provide a little more information about what you're trying to achieve? Thanks.
As @abhiguru says, this is already tracked in #55 (and we don't currently support RTSP).
`java.net.UnknownHostException: Unable to resolve host "servidor.i-live.com.ar": No address associated with hostname` looks like the cause. Make sure the device has a working internet connection and the app has permission to access the network. Is it just this specific stream that doesn't load, or do other URLs not load either?
I think it's just a typo, and should say: `if {@link #getPlayWhenReady()} returns true`. Thanks for pointing it out!
I don't think this is an ExoPlayer specific issue. I'd suggest you ask for help on StackOverflow, or similar.
It looks like the actual problem is `DecoderInitializationException: Decoder init failed: AACDecoder`, but we currently don't use this decoder on platform API version < 21 ([see the check here](https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/MediaCodecUtil.java#L193)).
The player doesn't skip the "mysterious music" caption for me. The captions are a little early, but they appear to be displayed at the times listed in the caption file itself, so that feels like an issue with the content to me?
All of the underlying work necessary to enable this has been done, but I think things haven't quite been wired together yet (probably just an oversight on our part :)). @AquilesCanta to take a look.
@casajavi , any updates? almost 3 months without a ADB Bugreport.  Will monitor for a couple more weeks then will close.
Bintray link [here](https://bintray.com/google/exoplayer/extension-okhttp). This doesn't seem to work for me at the moment. I'm unclear whether there's just a propagation delay in it being indexed, or whether something else is wrong. If anyone has any ideas, please let me know!
new Sample("Azure live",
That suggests malformed media. There's nothing we can do to assist unless you can provide a test stream.
According to [Wikipedia](https://en.wikipedia.org/wiki/Opus_%28audio_format%29#Containers), .opus files are Ogg containers with Opus payloads. ExtractorSampleSource does not yet have an extractor for Ogg, which is why an UnrecognizedInputFormatException is thrown, but we are working on adding this functionality.
The Opus URL you pasted is a live stream. Are you interested in live stream only?
Thanks. There are two problems:
Question is unclear. Closing.
- For DASH/SS/HLS the application doesn't have a nice way to select an adaptive track containing a subset of tracks that match the device capabilities. This would be a good thing to support.
- Disabling gzip as @ciribob describes is a workaround. Using https rather than http almost certainly also resolves the issue.
What's unclear is whether the bad interaction part is the carrier network doing something that's "flat out wrong" or whether it's doing something that's "a bit strange but technically valid". We should take a look at that and try and work out exactly what's going on.
The problematic lines are:
#EXT-X-MEDIA-SEQUENCE: 811
This is likely dependent on whether the device ships with Google's HEVC software decoder in addition to the one being blacklisted. If this does fix the issue then we might consider a more targeted version of this fix (i.e. targeted at the specific device / api level in addition to the decoder name) as a workaround.
Are the parameters actually part of the DASH specification, or a specification of some kind? If not, it's unclear why you expect ExoPlayer to recognize them?
@pottabathini Is there a specific problem you are seeing? Seeking in unfragmented MP4 and fragmented MP4 files with indices should just work.
Closing as a media error.
- I don't really understand (2). Are the two devices playing independently, or is the monitor connected to the tablet? If they're separate devices then what's the synchronization mechanism between the two?
@ojw28, I want to delay the video & Audio for (1) point because, there is a bluetooth latency in android and this latency is different for different devices.
@Bastian35022, I called the player.seekTo() in player activity where I am receiving time stamps and when the difference between the two time stamps is greater than 2 seconds. And it seems it's working correctly and adjusting the audio chunks accordingly.
I'm not sure what the intention is here, but this doesn't look right.
I didn't hear back about the odd dimensions, but closing seeing as we've not actually seen any streams that (genuinely) have them.
- For the MKV sample, Android does not support AC-3 (see [here](http://developer.android.com/guide/appendix/media-formats.html) for a list of supported formats), which is why you don't hear any audio. Some AndroidTV devices do provide support, and on such devices you will get audio. We have a longer term plan to explicitly expose tracks that are not supported through the player, to indicate to the application that we know they're there but that we can't play them.
Genymotion isn't a good platform for testing whether ExoPlayer works correctly. When you say that you see the crash on a wide variety of devices, are they real physical devices, or different devices emulated by Genymotion?
It's definitely not intended behavior.
@jeoliva can comment on this.
- Yes, that would be re-evaluation logic.
I don't think content:// URIs are the right thing to be using. What format is the obb file as a whole? Assuming you're needing (or will need) to deliver more than one asset, the obb file will have to be something other than just the video file, I think. Is it a zip file, or something else?
@Override
boolean shouldSkip) {
https://tools.ietf.org/html/draft-pantos-http-live-streaming-17#section-4.3.4.2.1
Are you sure the player is switching to the high bitrate stream (without your modification to have it start start with that stream)? If so, it feels like a device specific issue to me?
The .neon extension is passed on to ndk-build to indicate it to use that file only if the target architecture supports neon instructions. This will ensure that the resulting library will not contain neon instructions if the target architecture doesn't support it.
@vigneshvg - Could you comment on this? Thanks!
- The second link contains H.262 video, which isn't supported by most Android devices (or by ExoPlayer currently, although we'll be adding support where the underlying device does provide support in https://github.com/google/ExoPlayer/pull/915).
Are you referring specifically to the second link? When I try and play the link (using VLC) I just get a massive warning icon and "warning security issue, app users: please restart your app" message, which is delivered as H262 video. My guess is I'm seeing something different because authentication is failing (i.e. the link you provided is not sufficient for me to successfully authenticate, or else there is some kind of check that fails, for example a geo restriction).
Most likely a dupe of #1066, which gives reproduction steps.
percentage = Math.max(0, Math.min(100, percentage));
@ripleyXLR8 - For playback to be happening playWhenReady must be true and the state must be ExoPlayer.STATE_READY. If this is the case and the player state then transitions to STATE_BUFFERING by itself (i.e. without you having called seekTo or setPlayWhenReady), then that counts as a re-buffer. If you call seekTo or toggle setPlayWhenReady then it's always a buffer rather than a re-buffer.
- When you say "multiple devices", does this include Nexus devices? If so which one(s)? Can you reproduce the issue with the demo app by forcing the software decoder there? If so, please provide steps. Thanks!
I intend to give this approach a try over the next couple of days, to see if it's viable.
Heh, they look non-trivial :). Thanks for the info!
Either way, we currently support Widevine only for DASH and SmoothStreaming with fragmented mp4 (and webm in the case of DASH).
I think it should be possible to query this from the player's Timeline in V2.  Interestingly, isn't the example in MS-SSTR a violation of the definition in MS-SSTR itself? Specifically, shouldn't there be a dash between `AB92` and `E65BE0885F95` in the example, since SystemID is defined as:
4*4 HEXCODED_BYTE "-"
2*2 HEXCODED_BYTE "-"
2*2 HEXCODED_BYTE "-"
2*2 HEXCODED_BYTE "-"
6*6 HEXCODED_BYTE "-"
It probably is a CyanogenMod issue. It's not hugely helpful that the first post in this issue didn't mention that you were using a custom ROM. Closing for now, since this issue still doesn't contain all of the information requested [here](https://google.github.io/ExoPlayer/2015/10/01/reporting-issues.html). Note specifically the 4th, 5th and 6th bullet points in that post, none of which seem to be provided here.
As an aside, if your systems are capable of outputting DASH streams, you (and any clients) should really use them even when we do get around to adding support for demuxed audio for HLS.
@erdemguven - It's probably rather easy to handle this in 2.x (`DashChunkSource.onChunkLoadError` could probably handle the error, and then when a subsequent call comes into `DashChunkSource.getNextChunk` requesting the final chunk - we could instead return endOfStream).
- Does the format of the encryption data match the above?
In general I'm not a fan of adding support for legacy container formats. If we take it, it's something we have to commit to maintaining. However, as you say, this does look pretty simple, and so it seems like a reasonable request!
- Higher bitrates and/or resolutions.
Sounds a bit like bad media to me, or at least unusual media. You'll need to provide a sample stream for us to debug.
Sniffing should now correctly detect these streams.
duration, or playback errors can occur.`
If you have a contact in MTK, please suggest they look at the default size of the input buffers that their video decoder is exposing.
Hm, I think there are slightly bigger problems here, because "line" and "position" can both have an optional alignment suffix.
- Both of these files contain H.222 video, which we're not currently supporting in ExoPlayer. There's no reason why we couldn't support H.222, where the device provides a decoder, but we have no short term plans to do so. Most streams use H.264.
- One of the files contains AC3 audio, which most Android devices don't support at the platform level (with the notable exception of AndroidTV devices).
- For subtitles, we should just make the parsers progressively less strict as we find issues. The WebVTT and TTML parsers already have a `strictParsing` parameter, that defaults to false.
There are also adaptive tracks to think about, which don't exist in the original media.
That normally indicates that the content of the cenc:pssh element isn't valid.
Confirmed that the contents of the element doesn't seem to be a valid pssh atom, as is required. You'll need to fix the manifest to get this content to work.
I'm just speculating, although if that is the issue then there's not much we can do about it.
issue!
notifications@github.com> escreveu:
We believe this is now fixed thanks to @souji1103 . Please re-open if not.
Closing this on the assumption that the media is malformed. We haven't seen this reported by anyone else, which suggests that it's not a widespread issue.
Also, can a ADB bugreport be provided?  Thanks,
So in conclusion, I think the media is at fault. To get the media to play, you can comment out the `TS_STREAM_TYPE_AAC` case [here](https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/extractor/ts/TsExtractor.java#L363), which will result in the audio stream being ignored. To re-iterate, the media should not define an audio stream in the first place, which would make commenting out this block unnecessary.
between streams - see Section 6.3.2.
the EXT-X-PROGRAM-DATE-TIME tag; its value is informative.
The log line below looks suspect, but I'm not sure whether it's the root cause or not:
AC-3 in matroska files should work correctly since b2206866f0eecc52af53681ec340f61ba7d38d2a. Playback is either via HDMI passthrough (if a receiver is connected; note that this feature is buggy on the ADT-1 development device) or with decoding on the device (if the required codec is present). In other cases, playback will fail when trying to create a decoder.
Yeah, seems likely that the ACodec error is unrelated to the issue.
Closing. Likely to be device or application specific.
My issue was just with MPEG-Dash adaptive (Then in this case video show black screen), but now AmLogic staff solved that for me and they will publish the new firmware for public very soon.
```kotlin
That works fine when the surface gets destroyed but when it gets recreated, the audio pauses for a short time which is very disturbing.
@Mackqrenc, please say what exactly device/model/android version, and if possible put here some logcat log and if possible also a m3u8 online file.
It can't, it's a typo. Will push a fix. Thanks!
The m3u8 manifest.
I understand my solution are medieval, but helps with CDN implementation!
It solve my problem actually DayMonthYearRandom!
Bintray have corrected the stale files.
By the way, have you made any modifications to get the video playing for this file, or are you seeing audio only playback (this relates loosely to #631).
@mingfai - Your point about DemoPlayer is valid. Some of the open issues, such as #514, will naturally simplify this class over time as we push more functionality inside of ExoPlayer itself (that particular feature request will remove ~100 lines of code from DemoPlayer).
Note that Test2 is broken after seeking.
Interesting. It's possible that it's an issue with the monitor's HDMI implementation, although it may be the case that devices could be more robust when the issue is encountered.
`SeekEnable`
@waqarz - This is pretty unusual media. One of the properties of sensible delivery via DASH is that the client shouldn't need to make unbounded range requests into arbitrarily large pieces of data.
According to Wikipedia there are multiple variants of the S5 Mini: SM-G800F, SM-G800H, SM-G800H/DS, SM-G800M, SM-G800Y.
@HamedGh this should work well if you just use the playlist file as the path. But make sure the relative paths, if any, point to the proper files.  Implementing offline support for HLS is tracked by https://github.com/google/ExoPlayer/issues/2643. You should track that issue. We wont be providing sample code prior earlier than that issue being updated.  Thanks!
Given your use cases are custom, you'll have to figure them out on your own!
Thanks. It looks like it might be device specific. I'll try and get hold of this model and see if I can reproduce.
Yes. The extractor is reading an audio sample as if it were a video sample, because it only knows about the video track, and this leads to the exception being thrown.
Why is this very important? The player can just build up a buffer by requesting the data again? Or are you talking about something different (e.g. the ability to seek in live streams)?
- You initially pasted a link containing "StreamBox" that has fas subtitles. I don't see a 404 on those, but it does appear they're not packaged correctly within the FMP4 container, and so playback fails.
The final case was a problem further downstream, and should be fixed by 203f3ab7321a21900cc842ba9f0ef17fe29a1607. Thanks!
What shouldn't happen at all?!
If you're seeing ANRs then you've probably implemented something that uses a different threading model to the rest of the player. The idea of the threading model is that nothing should block the player's internal playback thread for any significant period of time. Specifically, this thread should never be blocked on network or disk IO. If you look at how the standard components in ExoPlayer work, all network IO is delegated to background loading threads. These load data into a buffer, and the playback thread consumes from the read side of the buffer in a non-blocking way.
Right, so it's the "WV: HDCP + secure video path required" one that fails, not the one mentioned in the title/body of this report. I'll get this fixed.
To answer your question about HLS specifically, we currently only support AAC audio for the HLS case, and not MP3. We do support playing MP3 files directly, as noted above.
Thanks bsysop, i'm trying ....
MediaDrm.isCryptoSchemeSupported(StreamingDrmSessionManager.PLAYREADY_UUID) definitely returns false on my Nexus 5 (and I would guess the same is true for the other devices you've been looking at). Are you sure you're passing the correct UUID for PlayReady?
We currently handle 0x0F (AAC) for audio.
What is a mixed playlist?
Build: LXB22.46-28.1
Build: LXB22.46-28
Radio: msm
Good to know is not only with me @frlozano
Finally i got this @brianchu  @zarej , i using **Amlogic S805/Mali450**,
@ojw28 Will be great if in future have prepared some snippets like this to people check they system before create some issue, or maybe they execute your snippet when your guys needs (I know this is special case, but of course can helps).
Thanks @brianchu @zarej
Note - This only affects audio-only HLS, as far as I'm aware. Please correct me if I'm wrong. We're working on putting better regression testing mechanisms in place to stop this kind of thing from happening; apologies!
In the demo app (use a new release, like current master or dev branch), do you observe that DASH playbacks freeze quite quickly when they go to switch up to a higher format? Do you also observe that playbacks never transition to the ENDED state once playback has finished (you'll see the elapsed time continue to increase indefinitely)? If so, then it's likely to be the same issue.
Does that change resolve the issue on your device? We don't know for sure what devices or API levels it affects, but it makes sense to target the rule as specifically as possible and expand it as needed.
I don't really understand. How would you achieve that in code? How is it different to playing a new MP4?
Note that we've been enhancing the WebmExtractor to also parse MKV.
Whether we should follow them ourselves is an open question. I suspect we probably should, but it needs more thought.
@kinsleykajiva the link is fine if you copy and paste the URL as text (it's just that it's linked incorrectly).
@Anshumansharma12 it isn't possible but you can always download the file yourself and play it using a FileDataSource.
@erdemguven - Do we cache data if even the resolved length is unknown (this is likely a result of the mpd response being gzip'd) and/or have a solution to this?
@ojw28 @danrossi - Unfortunately not. We skip the cache if the resolved length is unknown as the content is likely to be a live stream. I don't know how we can handle gzip'd responses.
@Ood-Tsen
Are these live TS streams then? If you have a test stream that would be really helpful (no need for a manifest or anything; it's actually quite easy to hack around in ExoPlayer to get it to play TS directly).
@zondaOf2012 - Your issue is different, in that the media you've linked to is bad. This is why you (probably) only see the issue for the specific video you've linked to, and none of the HLS samples in the demo app.
Can you think of anything else that could be different? It's a shot in the dark, but maybe try restarting the phone in case the mediaserver is somehow in a bad state, or even factory reset the device.
Yes. It would be nice to avoid having an MPD specific fetcher, primarily because you can equally well fetch the MPD with the general purpose fetcher. If you give people two ways of doing things, they're reasonably likely to pick the wrong one :).
I'm confused about what you're trying to do.
- Probably the 404 is due to the way you're trying to add the body, which is incorrect.
Turns out PlayReady does support CustomData, if you use the PRCustomData key. See the most recent replies on #339 for information.
I'm not sure how much we want to support this. It seems like a fairly bad way to be streaming live audio to mobile devices, v.s. something like HLS or DASH.
@th3hamm0r, thanks!
@brianchu, the devices I've tested all have another MP3 decoder that does not exhibit this problem, so the fix is for ExoPlayer to ignore the 'broken' codec when enumerating decoders. This will be automatic, so the app doesn't have to do anything. For now, there is no database of problematic codec names -- we will just check for the product/API version/codec name combination in code in MediaCodecUtil.java. I expect we will merge this into the dev branch today.
@Ood-Tsen, we are working around this issue in ExoPlayer, so the application does not have to do anything.
@Ood-Tsen, I still think catching the exception and continuing is risky. We know that the exception is thrown when the MediaCodecInfo instance can't communicate with the mediaserver, and that instantiating the component causes mediaserver to crash. I think it is possible that the mediaserver could be put in a bad state just by querying for capabilities of the 'broken' OMX component. Since this will only affect a small number of device/build combinations, the targeted workaround seems safer.
Are you using TextureView, or SurfaceView? Also, do you have a test stream that reproduces the issue (or, if it reproduces with the samples in the demo app, that would be useful to know)?
{"http://token.tvb.com/stream/live/hls/mobilehd_hdj.smil",
curl -i http://token.tvb.com/stream/live/hls/mobilehd_hdj.smil
Vary: Accept-Encoding
I updated the parser so that it parses all alternate media types and not only the subtitles.
Thanks! This is related to the way HttpUrlConnection supports transparent gzip, although I'm not sure why it's so device specific.
- The `ABCD1234` part of baseUri should be discarded when the paths are merged. The current logic is getting this wrong.
baseUri = https://foobar.com/video/ABCD1234
@jeoliva Thanks for the link! I have a change I'm working on that correctly resolves for all normal and abnormal cases in the RFC, which is a good sign. I hope to push tomorrow, although it might take another day.
@gkato0921, which sample source are you using?
@hezhisu See your new issue #1810.
@tresvecesseis - If you could sign the CLA that's required to accept this request, then I can merge it and make the changes on top to get it working nicely. Please see [here](https://github.com/google/ExoPlayer/blob/master/CONTRIBUTING.md) for CLA information.
In any case, I'll merge this tomorrow and push a change on top that removes some of the duplication, cleans a few things up and fixes the MediaFormat. It's possible that the latter change may break playback of your streams, but in the worst case it should be straightforward to get them working again.
I've never had to do this, so I'm not sure. The specific question about passing a Surface from one activity to another is more of an Android view/graphics question than something that's ExoPlayer specific, so I suspect you'll have more luck asking on StackOverflow.
1. We don't unescape the sei_rbsp before we try to parse it.
Seeking in the live window for HLS is tracked by #87. See also [this post](https://medium.com/google-exoplayer/test-8b62d50362ef#.75atfayul), in particular the last paragraph that explains why features land first for DASH, and later for HLS.
Those are two different questions.
@Override
@khashayarghamati can you provide a URL to the media stream you're using?
@khashayarghamati please share it with us
@khashayarghamati Thanks.
Subtitles:
@Override
@Override
If you're choosing which one to use then I'd recommend you use DASH, because it's an ISO standard and because it's likely better aligned with where the majority of the industry is heading.
- What were you trying to play when you observed this? If possible, please provide the mime type being checked when the crash occurs.
- One question: You don't expect to be able to seek within AAC, right? I don't think it normally exposes any kind of index to help you to do that.
Furthermore, it appears to be impossible to distinguish between a live AAC stream such as the PowerFM example, and a non-live AAC file. Desired retry behavior is different in each case, because for the non-live AAC file you want to make a range request starting where you left off, where-as for the live case you want to request starting from a 0 byte offset.
I'll try and follow up this week with a proper AacExtractor, which will basically just be a TsExtractor with the above changes, and with all the parts that become unnecessary stripped out (i.e. most of it).
NB - If this refers to a crash selecting any DASH or SmoothStreaming video (but not HLS), then there is an issue, which will be fixed today.
@sachinbhanot could you share the URLs / the playlists?
E/ACodec  (23263): signalError(omxError 0x80001001, internalError -2147483648)
The key difference appears to be that the media in the two broken cases is AAC-LTP, where-as the working samples are AAC-LC. It doesn't look like Android officially supports AAC-LTP:
That does seem odd. I'll see what I can find out too. I'm not sure about your AAC_ELD question, sorry!
@sachinbhanot For the buffer overflow device, it would also be good to know the exact build, and ideally how large the buffers are that are overflowing.
This could just be a malformed input stream, but without more information it's hard to tell. Closing for now. Please re-open if you can provide information to help.
What do you mean by "doesn't seek at all", exactly? Is the video playing or paused at the time, and what happens exactly?
There are two problems:
That's normally indicative of an abnormally large video sample. Please could you provide a test stream that reproduces the issue? Also, on which device(s) are you seeing this? Thanks!
Really, a player shouldn't need to go to these lengths to patch over the serving side not providing sufficient information and the HLS specification not being well suited to what's actually trying to be achieved. If a provider wants to provide a stream that's playable across devices with different capabilities, they should (a) think carefully about what the best technology is for doing this, and (b) if they do choose HLS, always include necessary information like the CODECS and RESOLUTION tags to make it easy for a client to do the right thing.
@jonasl, thanks for the feedback!
@crossle
@spark85, I'm sorry, I'm not sure I completely understand what you mean.
For the mpd parsing part, at first glance it looks to me like the way this data is included inside of a ContentProtection element is scheme specific (i.e. not part of the core DASH standard). Is that correct? If so, what specific schemes are you interested in, and where is it documented how the init data is included?
[9a04f079-9840-4286-ab92-e65be0885f95] -> [base64-encoded PlayReady object]
The latter requires the mpd parser to have knowledge of the PlayReady scheme, but I  think that's fine.
ExoPlayer fails to play this _big buck bunny_ stream from akamai
http://googleimadev-vh.akamaihd.net/i/big_buck_bunny/bbb-,480p,720p,1080p,.mov.csmil/master.m3u8
Closing this out because I don't know of any devices that are supporting MarlinDRM at this moment in time. It's probably worth re-opening once you can provide some idea of this, and also:
- Your evaluation of what should and should not be an out of the box feature is dubious. On what basis did you reach your conclusion, other than it's a feature you personally want?
@AquilesCanta 's change (ref'd above) adds preliminary live seeking support for HLS. Feel free to give it a try. Note that there are some known issues that we'll be cleaning up over the next week or two (e.g. temporary blacklisting of variants when a 404 is encountered is currently broken, and will need fixing before we do a stable release to).
There are two problems here:
@perchrh what is the device and Android version you're using? it's definitely device specific issue, since both streams work on my device.
Caveats that may not have occurred are:
METHOD=AES-128
@Ood-Tsen i don't have any test links right now. are you asking because you need one, or you would like to help with providing one (any test resources you can share would be much appreciated)?
@Ood-Tsen just in case you're still looking for test links. apple's default examples have CEA-608 and WebVTT.
A couple of things to keep in mind:
- Multiple period manifests.
There's nothing we can do to fix this in the direct sense. There will be a wider effort to stop relying on MediaExtractor for more formats, which will effectively mean this code path wont be hit any more and so will resolve the issue. This wont happen in the near term though.
- For DASH I think you're correct in stating that FragmentedMp4Parser should parse out the PASP box (assuming that's the correct box; I didn't actually check :)).
- The problem with the missing MediaFormat is fixed already on the dev branch. The problems with the Elephants Dream video were around reliability of whatever is serving it, and I believe the subtitles contained invalid characters too.
Sorry Johan; I didn't realize, but we were talking about different issues!
Added use of bintray-release in: https://github.com/google/ExoPlayer/commit/85be2aed0a5e5487504905d45c1a565d288feee2
Added here: https://bintray.com/google/exoplayer
## @KiminRyu:
It is provided by @monkey-who.**_
Galaxy S4 (There are some discontinuities)
## @MateusZitelli
**(Thanks a lot for @monkey-who help on the test)** @robin2046
You could fix it by yourself if you are based  upon a different branch such as from Sir  @yangwuan55 in a similar way.
Subsequent changes will follow that propagate the playback rate to some other components that would benefit from it (e.g. the ABR algorithm, in the case of adaptive playbacks). @KiminRyu I'm not aware of any issues with audio/video synchronization. If you file a new issue including steps to reproduce the problem we will take a look. Thanks. Apologies we've not managed to provide a release version containing this functionality yet. The functionality will be in the 2.4 release, but we're having to wait for a few other changes to land before we can publish it. We're now targeting toward the middle of next week. Thanks! @KirillMakarov GitHub has an atom feed you can add to your RSS reader:
The new implementation uses the Java version of Sonic, so its performance is affected by what optimizations the Java runtime applies. There is a certain optimization that is turned off on debuggable builds, which causes an inner loop in Sonic to be very slow. If you build a release APK this optimization should apply (on all API versions) and I found that performance was fine on various devices I tested, including a Samsung Galaxy S4 running Android 4.2.2 (API 17).
I don't think we have anything more to say about AC3 at this point in time.
If this is only happening on a custom ROM then you should file a bug against the custom ROM in the first instance. Does it happen on any official Samsung builds?
There are a whole bunch of test mpds here:
<ProgressBar
</RelativeLayout>
android:id="@+id/bntClose"
<fragment
I don't know what's happening,so can any one give me some direction I will thank very much.  **Description**
Nexus 9, Samsung S4, Samsung Galaxy SM-T700 Thanks for the tips @tonihei and @andrewlewis!  ### Issue description
java.lang.IllegalStateException
../subtitles/FLI4560_AMF_SUB_en.vtt
if (!audio){
Or have some option to use mideacotrol from simpleExoPlayerView in textureView?
and then i set it to DecoderJni
Regards / Mvh,
// ramk
<https://github.com/notifications/unsubscribe-auth/AC-Jczda22aRO356oa5L36-H1tM26ppSks5sGNJmgaJpZM4OAnFH>
Consider those samples that contain multiple audio and/or subtitle tracks:
This is particularly a pain when your live TV broadcast contains multiple subtitle tracks, let's say DVB-S. The only 2 options you have on the headend are:
Please help me! @tonihei Thanks a lot!
It would be great if you can help me. Thanks in advance! @AquilesCanta Here's my m3u8 file description:
```java
#EXTM3U
```java
please do so on Stack Overflow.
Thanks.  @AquilesCanta Thank you for your response, about the bandwith,  there is a user requirement that check the network speed,  UI will show green, yellow or red light based on the network speed, is there a way to get the real-time bitrate in v2?  1) There's no comments besides auto-generated boilerplate comments,
2) It's overkill and overly complicated, and
#EXTM3U
: Ninty; Author
cla.developers.google.com
It seems that there is also one more unhandled edge case.
Nexus player 7.1.2
Backtrace:
FATAL EXCEPTION: Thread-4
**Observed**: MP4-Encapsulated TTML subtitles default to top position (with `positionAnchor` defaulting to Float.MIN_VALUE)
**Expected**: Subtitles appear at the bottom of the screen with a valid position
sidenote: I work with @soutua
http://traffic.libsyn.com/wtfpod/WTF_-_EPISODE_819_ARIEL_LEVE.mp3?dest-id=14434
```java
public void play(Uri uri, long playbackProgress) {
For AC3, section 5.4.2.3 indicates a max of 5 channels, but this does not include the LFE which is the `lfeon` flag defined in 5.4.2.7. So, 6 channels total.
E/ACodec: [OMX.Freescale.std.video_decoder.avc.v3.hw-based] storeMetaDataInBuffers failed w/ err -2147483648
W/ACodec: using sliceHeight=1088 instead of what codec advertised (=0)
E/ACodec: dequeueBuffer failed.
Would anyone know what could be causing the presentation timestamp of the frames to be bad ?
Thanks AquilesCanta.
Hi AquilesCanta, by platform player you mean the Android MediaPlayer ?
&_widevineChallenge=%01%D9dz9  This extension provides the same API,callbacks, lifecycle with android system [mediaplayer](https://developer.android.com/reference/android/media/MediaPlayer.html). It makes developers using exoplayer in their project much easier since most of apps are using android mediaplayer currently.
What is random play?
Is random in the playing process. @andrewlewis
**M3U8 Content**
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:141.040000,
#EXT-X-BYTERANGE:11619904@0
#EXTM3U
#EXT-X-ALLOW-CACHE:NO
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:10,
#EXTINF:10,
#EXTINF:10,
#EXT-X-DISCONTINUITY
#EXTINF:10,
#EXTINF:10,
#EXTINF:10,
#EXTINF:10,
#EXTINF:10,
#EXTINF:4,
#EXT-X-DISCONTINUITY
#EXTINF:10,
#EXTINF:10,
#EXTINF:8,
#EXT-X-DISCONTINUITY
#EXT-X-DISCONTINUITY
Custom PlaybackControlView whitout position text and duration text then progress will not update.
```java
Exoplayer 2.1.1
Erez
"drm_scheme": "widevine",
Nexus 9
developer could add code to support SampleAES H265 video, SampleAES AAC, SampleAES AC3 contents base on the implementation Hi ojw28,
ScreenShots:
```java
#EXTM3U
"name": "Zee Carpet HLS",
viewVideo.setUseArtwork(true);
loopingMediaSource
by this code above , i can play some mp4 file but some file is not playable , i have no idea for check what is different between those mp4 file ,  i use mediainfo program on ubantu for inspection ,but no luck ,please tell me how to check those mp4 file compatible  with exoplayer
06-05 16:17:30.219 23224-30951/com.apptividia.digitalsignage D/mali_winsys: EGLint new_window_surface(egl_winsys_display*, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000,  [1920x1080]-format:1
06-05 16:17:33.251 23224-23224/com.apptividia.digitalsignage W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1133)
06-05 16:17:33.251 23224-23224/com.apptividia.digitalsignage W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:607)
exoplayer 2.3.1
android 7  sumsung galazy s7 Ok ,Could you please give me some information about **edit list** ?,( i have no idea what **edit list** do in mp4 file ) , before i exclude **edit list** form mp4 file.   I have a question. Sometimes, in live streams, the image gets frozen while the audio keeps playing without receiving STATE_BUFFERING or any kind of error. I noticed that it happens regardless of the stream type.
Shaka project also accept it.
java.lang.IllegalStateException
Galaxy S7, 7.0.0
Please help
please do so on Stack Overflow.
API 23 Andorid 6.0 /  Device Moto g4 Plus
Contains INFO header (Not XING)
please do so on Stack Overflow.
When playing a HLS Live stream, the play back freezes, the player enters in buffering state, and stops downloading media chunks, only downloads playlist files.
The the value of #EXT-X-PROGRAM-DATE-TIME was coming with an date from the future, and it was causing the playback to stop.
the value of the EXT-X-PROGRAM-DATE-TIME tag."
http://stream01.yamgo.com/iPhone/HLS_TS/mptslive/clubbingtv-mobile.3gp.m3u8
Nexus Player
@Override
boolean fullyProcessed;
codec,
@Override
@goffioul Thanks for the response, I figured it out few days ago but couldn't update here. While seeking the state goes to Buffer and after seek it shifts to ready.
@ojw28 forward seek works good after adding the callbacks. But when I seek backwards, player's current time is not updated.
if (sniffing) {
private StreamingCipherInputStream mInputStream;
private Uri mUri;
private Cipher mCipher;
@Override
// #getUri is part of the contract...
throw new EncryptedFileDataSourceException(e);
if (mBytesRemaining == Integer.MAX_VALUE) {
@Override
public int read(byte[] buffer, int offset, int readLength) throws EncryptedFileDataSourceException {
// constrain the read length and try to read from the cipher input stream
throw new EncryptedFileDataSourceException(e);
//throw new EncryptedFileDataSourceException(new EOFException());
@Override
return mUri;
@Override
public void close() throws EncryptedFileDataSourceException {
throw new EncryptedFileDataSourceException(e);
OPPO A37m
05-27 15:59:04.965 911-1096/? I/WifiStateMachine: fetchRssiLinkSpeedAndFrequencyNative, newRssi:-49, newLinkSpeed:65, SSID:"namibox"
05-27 15:59:05.390 30242-30280/com.google.android.exoplayer2.demo D/mali_winsys: new_window_surface returns 0x3000
05-27 15:59:05.423 30242-11385/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.AUDIO.DECODER.RAW] Now Loaded->Idle
05-27 15:59:05.447 30242-11385/com.google.android.exoplayer2.demo D/ACodec: [OMX.MTK.AUDIO.DECODER.RAW] Now Idle->Executing
05-27 15:59:05.453 357-11387/? D/MtkOmxRawDec: BigEndianToLittleEndian !
05-27 15:59:05.453 357-11387/? D/MtkOmxRawDec: BigEndianToLittleEndian !
05-27 15:59:05.454 357-11387/? D/MtkOmxRawDec: BigEndianToLittleEndian !
05-27 15:59:05.454 357-11387/? D/MtkOmxRawDec: BigEndianToLittleEndian !
05-27 15:59:05.454 357-11387/? D/MtkOmxRawDec: BigEndianToLittleEndian !
05-27 15:59:05.475 357-1055/? D/AudioALSADeviceParser: GetPcmIndexByString() stringpair = I2S0DL1_PLayback
05-27 15:59:05.475 357-1055/? D/AudioALSADeviceParser: GetCardIndexByString() stringpair = I2S0DL1_PLayback
05-27 15:59:05.479 357-1055/? D/AudioALSADriverUtility: GetPropertyValue key = af.resouce.extdac_support value = 0
05-27 15:59:05.479 357-1055/? D/AudioALSADriverUtility: GetPropertyValue key = af.resouce.extdac_support value = 0
05-27 15:59:05.503 357-1055/? E/AudioALSAPlaybackHandlerBase: -getHardwareBufferInfo pcm_get_htimestamp fail, ret = -1, pcm_get_error = cannot start channel: Broken pipe
05-27 15:59:05.503 357-1055/? D/MtkAudioLoud: DRC_Th[0][0] = -11520
05-27 15:59:05.503 357-1055/? D/MtkAudioLoud: DRC_Th[0][1] = -9728
05-27 15:59:05.503 357-1055/? D/MtkAudioLoud: DRC_Th[0][2] = -4864
05-27 15:59:05.503 357-1055/? D/MtkAudioLoud: DRC_Th[0][3] = -2560
05-27 15:59:05.503 357-1055/? D/MtkAudioLoud: DRC_Th[0][4] = 0
05-27 15:59:05.504 357-1055/? D/AudioMixer: resetDRC
05-27 15:59:05.974 911-1096/? I/WifiStateMachine: fetchRssiLinkSpeedAndFrequencyNative, newRssi:-49, newLinkSpeed:65, SSID:"namibox"
05-27 15:59:06.143 911-1096/? I/WifiStateMachine: fetchRssiLinkSpeedAndFrequencyNative, newRssi:-49, newLinkSpeed:65, SSID:"namibox"
05-27 15:59:06.974 911-1096/? I/WifiStateMachine: fetchRssiLinkSpeedAndFrequencyNative, newRssi:-49, newLinkSpeed:65, SSID:"namibox"
05-27 15:59:07.975 911-1096/? I/WifiStateMachine: fetchRssiLinkSpeedAndFrequencyNative, newRssi:-49, newLinkSpeed:65, SSID:"namibox"
05-27 15:59:08.744 357-1055/? D/AudioALSADriverUtility: GetPropertyValue key = af.resouce.extdac_support value = 0
@Override
@AquilesCanta
Are there any thoughts on what could be causing this?  I am seeing similar behavior using the ExoMedia wrapper library which uses ExoPlayer 2.4.0. [Here is one stack trace from around the time it happened, but it usually doesn't have any errors.](https://gist.github.com/parkgrrr/47051b0da77e7f719cb6ab75333b1fcf) hi AquilesCanta is there any expected time for the patch concerning this issue?  *** ISSUES THAT IGNORE THIS TEMPLATE WILL BE CLOSED WITHOUT INVESTIGATION ***
20:10:23.810 [ERROR] [org.gradle.internal.buildevents.BuildExceptionReporter]   at com.android.build.gradle.internal.VariantManager$$Lambda$1558/227977131.call(Unknown Source)
app:srcCompat="@drawable/ic_file_download_black_24dp"/>
String url =" http://ipbox.ddns.me:8080/live/younesalami/2625487136/2319.ts";
https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#page-28
a little hard to do as this behavior is not consistent
please do so on Stack Overflow.
this is a specific ExoPlayer question.
a bit problematic unfortunately because this behavior is not consistent...
@AquilesCanta done @ojw28 these are the 2 main devices we test on. we just released an alpha version of the app within our company to some more people to maybe we'll have more insight soon.
Icecast station url: http://hitfm.kz/mp3/URBAN
Here is my code
@Override
@Override
@Override
Exoplayer:r2.2.0
@PaulWoitaschek Pardon me, I'm not familiar with using NDK, but I wonder if it's possible your exoplayer-flac and exoplayer-opus extensions could be made available as a library? That was be tremendously convenient and helpful :)
Some mp4 link can't play (Example: https://openload.co/embed/H334bKtpbhs/lei-tot-19052017-1v.mp4)
throws UnsupportedDrmException {
Is it some known issue?
I expected that in such a situation some error would come.
I'm not sure what the following means:
called for N+1.ts
Quickly zap through different streams in a sequence.
Nexus Player
Nexus Player (fugu), Android 7.1.1_r23
releasingConditionVariable.close();
@Override
@Override
here is my code
from 0L
to 3000000L
**Version of ExoPlayer being used**
Nexus 5
05-18 00:50:14.189   820   820 W Binder_4: type=1400 audit(0.0:2967633): avc: denied { ioctl } for path="socket:[5504682]" dev="sockfs" ino=5504682 ioctlcmd=7704 scontext=u:r:surfaceflinger:s0 tcontext=u:r:surfaceflinger:s0 tclass=unix_stream_socket permissive=0
05-18 00:50:14.189   820   820 W Binder_4: type=1400 audit(0.0:2967634): avc: denied { ioctl } for path="socket:[5504682]" dev="sockfs" ino=5504682 ioctlcmd=7704 scontext=u:r:surfaceflinger:s0 tcontext=u:r:surfaceflinger:s0 tclass=unix_stream_socket permissive=0
05-18 00:50:15.229  1795  1795 W Binder_8: type=1400 audit(0.0:2967635): avc: denied { ioctl } for path="socket:[5501890]" dev="sockfs" ino=5501890 ioctlcmd=7704 scontext=u:r:system_server:s0 tcontext=u:r:system_server:s0 tclass=unix_stream_socket permissive=0
05-18 00:50:15.229  1795  1795 W Binder_8: type=1400 audit(0.0:2967636): avc: denied { ioctl } for path="socket:[5501890]" dev="sockfs" ino=5501890 ioctlcmd=7704 scontext=u:r:system_server:s0 tcontext=u:r:system_server:s0 tclass=unix_stream_socket permissive=0
It's working with Activity but not working with Fragment.  @andrewlewis I'm very sorry!
Stream #0:2 is something custom from the third party.
Below is the ffprobe analysis for my file with this weird third stream. How can I have exoplayer to ignore stream #2?
[https://www.dropbox.com/s/o7wyioop9b6rgsj/verbose.wav?dl=1](url)
I'm receiving this error:
I'm using this code:
```java
@Override
**Version of ExoPlayer being used**
Nexus Player
Below is the extracted m3u8 content:
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:11917
#EXTINF:5.760,
#EXTINF:5.760,
#EXTINF:5.680,
#EXTINF:5.680,
@Override
#EXTM3U
80299_04_03_MM30_exploreTown_mixed_1200.mp4.m3u8?3GLWJ2yr2dFoYAudKlIkh_k2hf0U23WV6XejfpPuicCDmNnepWkd1z0IrrwNVzBp0j_rySGHUadEv627Pki3YRkh-Xei5MOxoDDL2hvArZuTN_ZBn9uzfO6RN182FE8KlWFpxbSTRLsI6hJ5FalbsgkI7f0N18xyKUc1Xag554s
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOW-CACHE:NO
#EXTINF:10,
80299_04_03_MM30_exploreTown_mixed_1200.mp4Frag1Num0.ts
#EXTINF:10,
80299_04_03_MM30_exploreTown_mixed_1200.mp4Frag1Num1.ts
#EXTINF:10,
80299_04_03_MM30_exploreTown_mixed_1200.mp4Frag2Num2.ts
#EXTINF:10,
80299_04_03_MM30_exploreTown_mixed_1200.mp4Frag3Num3.ts
#EXTINF:7,
80299_04_03_MM30_exploreTown_mixed_1200.mp4Frag24Num24.ts
@Override
@Override
**Logcat**
Renderer error.
@ojw28 Sorry just piggybacking on this releasing a player question: we still need to remove `EventListener`s manually, right? I can't see anything in the `player.release()` code that'd indicate that `EventListener`s are cleaned up.  Hi
I have 2 issues related to playing  Dash stream with TTML subtitle on Exoplayer ver 2.1 and 2.3
Erez
i want Left and right blanks are modified to black
Yea I did that @Khoosham
~~~ Device ~~~
KFFOWI(Amazon Kindle) Android 5.1
au AQUOS SERIE SHL25 Android 5.0
...and Other Devices
exoplayer error?
- "05-29 16:51:50.655 10473 10473 W hbabyyyyyyyyyyyyyyyyyyy: AudioTrack:audioCapabilities AudioCapabilities[maxChannelCount=8, supportedEncodings=[2, 5, 6]]" ==> Is this mean it support AC3 encoding?
please do so on Stack Overflow.
onTracksChanged  will be called once new track started playing. So you will get kow previous track ended @prakash-altair if I set `player.setPlayWhenReady(false)`, how `onTracksChanged` will get called?  * I want to know if the current track will be ended to start playing another _specific_ track
ah, 
thanks a lot @ojw28  @bluemix
@ojw28 WMA in #2155 can't help me to solve my problem ?
Regards @andrewlewis  i've added the mimetype asf to FfmpegLibrary
in MimeType i've added :   public static final String AUDIO_ASF = BASE_TYPE_AUDIO + "/x-ms-wma";
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
Log.d("Mayur", "Discontinuity");
@Override
I have followed example from DemoApp, and my player is working just fine if bandwidth is ok, if I restrict it to 2 mbps, then error occurs.
this catch BLWE error.
here is the code:
private ProgressBar progressBar;
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
String userAgent = "Exo";
//the videoLister
@Override
@Override
the surface is black ,but audio is play. @AquilesCanta
The object can not use the method. @ojw28 Sometimes I need to monitor the changes in the listener, such as in the TIF, TvInputService want to get the size of the player changes, and then notify the corresponding surface to make the appropriate changes.  ### Issue description
Kernel: 3.10.84-perf-g94afac7 - ilclbld33
Kernel: 3.10.84-perf-g94afac7 - ilclbld33
I can understand this isn't the typical kind of bug you might want to track, but I've filed it in case it helps. If you feel it's too vague or hard to reproduce happy for you to close it.
//TODO lower volume
Is there something wrong with my code?
<RelativeLayout
android:background="@color/black_transparent">
style="@style/ExoTextStyle"
style="@style/ExoTextStyle"
</RelativeLayout>
</RelativeLayout>
I try to insert reaction code when onBandwidthSample
Please help
```java
@Override
should I use the opus extension in other way ?
``` JAVA
Unexpected exception loading stream
SIGSEGV when playing HLS video on Samsung Galaxy Nexus
[adbbugreport.txt](https://github.com/google/ExoPlayer/files/977907/adbbugreport.txt)
### Devices affected
- KindleFireHdx8 KFAPWI >= Android 4.4.2
- KindleFireHdx8 KFSAWI >= Android 4.4.2
- KindleFireHdx7Generation3 KFTHWI >= Android 4.4.2
- Kindle2013Generation3 KFSOWI >= Android 4.4.2
- [KindleFireHdx8 KFAPWI](https://drive.google.com/open?id=0BxmlNrFUS44jUXZDXzdXNTU2bFU)
- [KindleFireHdx8 KFSAWI](https://drive.google.com/open?id=0BxmlNrFUS44jNFM2eHZkd1ZkOW8)
Regarding HDCP on phones/tablets, as far as I understood, is it required if he device can be plugged in to an external TV through HDMI. Is that right? @ojw28 do we have any feedback so far? @wvpaf can you please feed back if there has been any update in this issue? Thank you  First off I have to say thank you so much for the new playback rate feature going back to android 4.1.
Amazon KFFOWI Android 5.1.1 (api 22)
```bash
**Version of ExoPlayer being used**
**Version of ExoPlayer being used**
I'm using the demo application with a set of custom HSS samples added to the `media.exolist.json` file. All samples are PlayReady protected, although the server currently doesn't authenticate and allows playback even if you only have the manifest URL and nothing else.
Add the custom samples and try them out. Hopefully they won't expire before you get a chance to test them.
--disable-avformat \
--enable-decoder=vorbis \
--enable-decoder=opus \
--enable-decoder=flac \
-enable-decoder=alac \
-enable-decoder=aac \
cd "${FFMPEG_EXT_PATH}/jni" && \
--libdir=android-libs/armeabi-v7a \
--extra-cflags="-march=armv7-a -mfloat-abi=softfp" \
--extra-ldflags="-Wl,--fix-cortex-a8" \
--extra-ldexeflags=-pie \
--extra-ldexeflags=-pie \
--extra-ldexeflags=-pie \
--disable-asm \
--disable-avformat \
--enable-decoder=vorbis \
--enable-decoder=opus \
--enable-decoder=flac \
cd "${FFMPEG_EXT_PATH}/jni" && \
--libdir=android-libs/armeabi-v7a \
--extra-cflags="-march=armv7-a -mfloat-abi=softfp" \
--extra-ldflags="-Wl,--fix-cortex-a8" \
--extra-ldexeflags=-pie \
--extra-ldexeflags=-pie \
--extra-ldexeflags=-pie \
--disable-asm \
### .zshrc
# Path to your oh-my-zsh installation.
# Optionally, if you set this to "random", it'll load a random theme each
# time that oh-my-zsh is loaded.
ZSH_THEME="agnoster"
source $ZSH/oh-my-zsh.sh
alias d="adb devices"
alias gu="git up"
alias abdr="adbr"
alias sauce="source ~/.zshrc"
eval "$(thefuck --alias)"
export PATH=$PATH:$ANDROID_TOOLS
`Unknown option "--disable-static"`
`--disable-static` is the very next command, so the error might have to do with how the command is formatted.
So, we should bypass the local proxy setting in such scenario. I agree with you isLocalAddress is a overhead. The user should add a ignore policy on phone settings if needed.  ![kakaotalk_20170504_094019970](https://cloud.githubusercontent.com/assets/16380086/25687041/f6a8e16c-30ad-11e7-863b-d9ced65d5faf.jpg)
![kakaotalk_20170504_094019478](https://cloud.githubusercontent.com/assets/16380086/25687043/f979278a-30ad-11e7-85a8-8271a5279beb.jpg)
Is a inherent exoplayer's feature?
If i force it to use the tunneled one the playback starts, but i think it's not the correct way, and something is wrong.
So i assume that is not playing correctly. But i don't know that it is hardware related or i did a mistake somewhere.  Exoplayer 2.2.0
I will try to explain what I need and the problems that I'm having with this special kind of content:
@ojw28 can you please provide some help with this issue (my previous post).
Alfonso Hi,
@ojw28 What I need is to get the currentPosition in the interval (0, duration). That works perfectly with other contents.
Alfonso Hi @ojw28
Alfonso
Hi @ojw28,
Alfonso @ojw28 Hi,
Alfonso  20170427  ### Issue description
NA
Nexus Player
05-01 13:36:35.349 588-588/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0, id=null, mimeType=audio/mpeg-L2, channels=2, sample_rate=48000, language=rus, supported=YES
05-01 13:36:35.350 588-588/com.google.android.exoplayer2.demo D/EventLogger:       [ ] Track:0, id=null, mimeType=audio/ac3, channels=6, sample_rate=48000, language=rus, supported=YES
05-01 13:36:35.408 588-588/com.google.android.exoplayer2.demo D/EventLogger: audioFormatChanged [1.91, id=null, mimeType=audio/mpeg-L2, channels=2, sample_rate=48000, language=rus]
``` @AquilesCanta, please let me know if you want me to set up an outside stream, so you can try to reproduce this issue on your end. Please suggest the best time and way to do it. Thanks. That's the problem exactly. TS plays just fine on my side too, but the Live stream doesn't even start (where there is no such problem in version 2.2.0). Enigma2 doesn't send chunks of TS's, but it's just a continuous stream. Seems like ExoPlayer is unable to determine the length of the stream or something along these lines. The flag is set, it's not a problem.
if (track.isMegamixTrack()) seekTo(Integer.valueOf(track.getStartPoint()));
if (track.isMegamixTrack()){
if (track.isMegamixTrack() || Settings.CROSSFADE > 0) {
@Override
} catch (InterruptedException e) {
Thanks for your time in examining this, and please let me know if I can provide anything else to shed light on the subject! @andrewlewis It is a bit difficult to describe - my main impression is that the background music sounds "wobbly" (as if played under water, if that makes any sense). There are no stutters as such, and I have noticed that the lyrics themselves actually sound quite decent. I don't know if it could be because the Sonic framework is more geared towards speech?
Following is Error
Following is my code
private ExoPlayer player;
private TrackRenderer videoRenderer;
private int uiImmersiveOptions;
private SeekBar seekBar;
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
video_url = new String[]{"http://playertest.longtailvideo.com/adaptive/bbbfull/bbbfull.m3u8","https://bitmovin-a.akamaihd.net/content/playhouse-vr/mpds/105560.mpd"};
video_title = new String[]{"Big Buck Bunny","Movie Trailer"};
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
manifest.utcTiming,
@Override
@Override
`(Duplicate zip entry [android/support/a/a/ac.class == classes.jar:android/support/v4/app/NotificationCompat.class]))`
Just updated to 2.4.0 and am playing around with the new TimeBar. Loving the customisations available.
I don't see multiple window in the demo, but I see a lot of cal lof  getCurrentWindowIndex() in codes.like
Pixel XL (7.1.2)
Nexus 6 (5.10)
I'm seeing this even when the EXT-X-MEDIA-SEQUENCE increments and not rolling back to zero  ### Issue description
http://42747t.lp.azioncdn.net:1935/2747t/a/mp4:access_options/rtmp-live/atl_poa.sdp/playlist.m3u8
http://192747t.lp.azioncdn.net/2747t/a/mp4:access_options/rtmp-live/gau_centro.sdp/playlist.m3u8
Tested on several Android versions, using emulators.
2017-04-28 16:33 GMT+07:00 ojw28 <notifications@github.com>:
> <https://github.com/notifications/unsubscribe-auth/AJXfmPuO4hjN_JvYzB3sNoxEFncU4araks5r0bJugaJpZM4NI0ke>
I/ACodec: [OMX.SEC.mp3.dec] signalFlush
I/ACodec: [OMX.SEC.mp3.dec] Now Flushing
I/ACodec: [OMX.SEC.mp3.dec] Now Executing
@ojw28 i would very much like to use findViewById(). question is on what view will i call it?
3. Try to play added video
@Override
@Override
@Override
@Override
boolean haveAudios = false;
@Override
@Override
@Override
boolean haveAudios = false;
### Bugreport
java.lang.IllegalStateException
04-22 18:49:41.951 12990-18922/com.google.android.exoplayer2.demo W/ACodec: [OMX.allwinner.video.decoder.avc] can not return buffer 10 to native window
04-22 18:49:41.953 12990-18922/com.google.android.exoplayer2.demo W/ACodec: [OMX.allwinner.video.decoder.avc] can not return buffer 9 to native window
04-22 18:49:41.954 12990-18922/com.google.android.exoplayer2.demo W/ACodec: [OMX.allwinner.video.decoder.avc] can not return buffer 8 to native window
04-22 18:49:41.956 12990-18922/com.google.android.exoplayer2.demo W/ACodec: [OMX.allwinner.video.decoder.avc] can not return buffer 7 to native window
java.lang.IllegalStateException
04-20 06:00:46.295 3764-4157/? E/OMXNodeInstance: setParameter(a6:amlogic.avc.decoder.awesome, OMX.google.android.index.storeMetaDataInBuffers(0x7f000002): Output:1 en=1 type=1) ERROR: BadPortIndex(0x8000101b)
04-20 06:00:46.312 3764-4133/? E/OMXNodeInstance: setParameter(a6:amlogic.avc.decoder.awesome, ParamPortDefinition(0x2000001)) ERROR: UnsupportedSetting(0x80001019)
04-20 06:00:46.312 3764-15885/? E/OMXNodeInstance: setParameter(a6:amlogic.avc.decoder.awesome, ParamPortDefinition(0x2000001)) ERROR: UnsupportedSetting(0x80001019)
04-20 06:00:46.445 19742-20104/? V/AML_all_components: --------------------------------
author:aml.sh multi-media team
branch name:   * jb-mr1-amlogic
hostname droid12-sz
```java
@Override
When doing an out of tree build, gradle fails:
Gradle 3.3
It maybe odd report to some degree, however, it leads to more scenarios to fail playback.
It seems to be audio related.
please do so on Stack Overflow.
ExtractorMediaSource(Uri.pares("xxx.amr"))
get exception
PFA
@ojw28 thanks for you reply.
@ojw28 that would be perfect. exactly what i am looking for.
repositories {
But it's giving me Error
The following is my code
repositories {
repositories {
mavenCentral()
applicationId "com.example.pash.drm"
buildTypes {
repositories {
mavenCentral()
compile 'com.nineoldandroids:library:2.4.0'
compile 'com.daimajia.slider:library:1.1.5@aar'
from Sir @ojw28
``` Java
@Override
@Override
@Override
"name": "Nikhil DASH new",
"name": "uptown funk Dash new",
- Select subtitle track "da, id:Fremmedsprogstekster, text/vtt".
**Version of ExoPlayer being used**
> (Widevine, or PlayReady, or does it reproduce with either)? Thanks!
@NonNull
url = Uri.parse(proxy.getProxyUrl(videoUrl));
java.lang.IllegalStateException
<Type name="video/avc" />
<Type name="video/avc">
<Type name="video/hevc">
<Type name="video/avc">
<Type name="video/hevc">
04-11 11:05:41.202 10278-10278/com.google.android.exoplayer2.demo D/EventLogger:       [X] Track:0, id=1/68, mimeType=audio/mp4a-latm, channels=2, sample_rate=48000, language=rus, supported=YES
04-11 11:05:41.320 10278-10278/com.google.android.exoplayer2.demo D/EventLogger: audioFormatChanged [2.55, id=1/68, mimeType=audio/mp4a-latm, channels=2, sample_rate=48000, language=rus]
Ilya    Is there is any method available right now for distinguish between live streaming and VOD?
@ojw28
--Baq   Some Stream URIs delivers mp2 Audio in HLS Stream.
Is this possible with Exoplayer? How do I do that?
```java
```java
disabling libyuv
[DEP] vp9/vp9_dx_iface.c.d
Second problem is blocking to compile sources for `armeabi`:
~/AndroidStudioProjects/ExoPlayer/extensions/vp9/src/main/jni$ cd "${VP9_EXT_PATH}"/jni && ${NDK_PATH}/ndk-build APP_ABI=armeabi -j4
[armeabi] Compile arm    : vpx <= loopfilter.c
[armeabi] Compile arm    : vpx <= vpx_mem.c
[armeabi] Compile arm    : vpx <= arm_cpudetect.c
[armeabi] Compile arm    : vpx <= gen_scalers.c
[armeabi] Compile arm    : vpx <= vpx_scale.c
[armeabi] Compile arm    : vpx <= yv12config.c
[armeabi] Compile arm    : vpx <= yv12extend.c
[armeabi] Compile arm    : vpx <= vpx_scale_rtcd.c
[armeabi] Compile arm    : vpx <= vpx_thread.c
[armeabi] Compile arm    : vpx <= vpx_config.c
[armeabi] Compile++ arm  : vpxJNI <= vpx_jni.cc
[armeabi] Compile++ thumb: yuv_static <= compare.cc
[armeabi] Compile++ thumb: yuv_static <= compare_common.cc
And also I receive errors for `mips`:
"sgtu      $v1, %[dst], $t9                  \n"
sgtu      $v1, $5, $t9
"sgtu      $v1, %[dst], $t9                  \n"
sgtu      $v1, $5, $t9
"sgtu      $v1, %[dst], $t9                  \n"
sgtu      $v1, $5, $t9
"sgtu      $v1,%[dst],$t9                    \n"
sgtu      $v1,$5,$t9
http://bitmovin-a.akamaihd.net/content/sintel/sintel.mpd
@Override
My thoughts was that I am able to provide a range of variants to be dynamic within, for instance:
is a full list of variants.
I expected that ExoPlayer must be dynamic within those 4 variants.
@ojw28  Separated volume control for stereo channels is an often requirement of TV operator for its boxes.
Multiple devices
NA
NA
```java
package hybridmediaplayer;
@Override
// Should never happen.
throw new IllegalStateException("Unexpected error creating default extractor", e);
We'd like to know what this error code means at least. Thank you!
@wvpaf Hi, unfortunately we don't have the full adb bugreport. The log that we provided was user logs captured by crashlytics. We can not reproduce this problem since it requires an upgrade.
One work around would be find a way to "reset DRM" data for this device (please advice what api to call in the case).  In the meanwhile, if it is possible to investigate upgrade process in widevine plugin that can possibly get it in this "non-recoverable" state. Thanks in advance! @wvpaf One more important information. I tried to reproduce this problem by "simulating" a system upgrade using a rooted phone. The simulation is done by flashing a new version without erasing user data, it is the closest that I can get as a system upgrade. I had some downloaded encrypted media before the "upgrade", after that when I try to play them, I got the following error "Failed to restore keys: DRM vendor-defined error: -2887". Although the error code differs from the user reported one, I believe the adb full log in this case can be very useful, so I'm attaching it. In this error -2887, the situation is "recoverable" since we can just request a new license when that happens. But in the case of error -2902, it happens even for the streaming media, that leads to a situation that app can not do that much. Hope this full adb log helps.
@wvpaf as I stated before, we do not have the full adb log from a failing device. They are all user devices that we can not have access. We will try to buy one and reproduce and will let you know. But in the meanwhile, can you please help us understand what this error means? -2902. Thanks!
local content - simple DASH
throws IOException
else
i've looked at **ByteArrayDataSource** but i can't understand how to deal with it and how to use it with the player.
file = new RandomAccessFile(dataSpec.uri.getPath(), "r");
Sample path: /storage/sdcard1/Music/SARIIN/ICP Tapes # 1.mp3 Thanks  Hi,
@Override
Thank your for your reply, ojw.  ### Issue description
Crash reported from Crashlytics, potentially device specific.
Not known
alps HM NOTE 1W , Android 4.2.2
Tracks
@ojw28 Thanks for your reply. I have also tried on the V2 ExoPlayer (some months before at commit 0cacd388fdff22408b54e2b7de2021c5b11f2742 => Merge: dbebaa87 75eb047e of 05/01/2017) but I encountered the same problem. I think I have tried before the release V2.2.0. I'm gonna make a new check today and let you know. Hi @ojw28 I finally managed to have a [working test stream](http://csm-e.cds1.yospace.com/csm/extlive/skydeprd01,263032-test01hls.m3u8). I have tried with the latest ExoPlayer (release-v2 @ 2.3.1) and still have a problem related to timedMetaData. I am attaching the log
#EXTM3U
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:35156
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
the LeanBack androidTV app uses a different Structure than the exoplayer Demo app,
3) wait until the variant incorrectly changes to the resolution above screen resolution. At this point some devices get completely stuck eg. Huawei p8 lite ALE-L21.
Huawei p8 lite ALE-L21, Android 5.0.1
Actions (please refer to below steps)
I'm upgrading from ExoPlayer `r.1.5.9` to `r2.2.0`. Previously in ExoPlayer `r1.5.9` I listened for `CEA-608` / `EIA-608` captions using `Eia608TrackRenderer`:
```java
@Override
```java
renderers,
```java
Format(null, null, application/cea-608, -1, null, [-1, -1, -1.0], [-1, -1])
@Override
if( bSeenAudio )
plaese i dont know why you do it with me try to see my problem i do nothing i click on back key the stream
@Override
@Override
It is probably the interpolating error, but it doesn't hurt to check.
* Tap "NRK"
* Tap "Dagsrevyen"
* Native crash in libstagefright
Galaxy Nexus 4.2.2
https://github.com/begeekmyfriend/yasea/issues/167
1) In the demo app, add a new media source linking to "http://stream.audiobooks.com/STREAM/SABLIB9784075.mp3?AudTTL=1490460462&AudSig=578c4100af873ae93e2dd69ec36ccf3a&rs=68&ri=2000000&ib=13&fs=1544000"
Caused by: java.lang.IllegalStateException: Top bit not zero: -388812344
- Custom device using Android v5.1 (Api 22)
"drm_scheme": "widevine",
"drm_scheme": "widevine",
"name": "Segmented-encrypted",
"drm_scheme": "widevine",
"drm_scheme": "widevine",
Please help me to catch all errors to avoid app crashing.
@Override
- Amf0 data format;
This branch contains everything from @begeekmyfriend as well as:
*2 OOM fixes that could occur in some situations
//code
//yuv code
//change RGB_565 to ARGB_8888
this is origin picture
anybody can help meit important for me did you try libyuv:I420ToARGB instead of I420ToBGRA? yes,I has been try,it is not support alpha channel,the background is black and picture color also has problem,only  I420To***A this way support alpha channel.
@ojw28 Thanks for the info!
thread 78 - GCDaemon:
thread 89 - NR_AppStateMon-1:
Affected device models:
S7 Edge: SM-G935P, SM-G935A, SM-G935T, SM-G935V
That solution is rather hacky and we have not tested all edge cases, but it works for our video files. Thanks so much, we've been waiting for this and another issue to be fixed and both have. Wow! Of course we're demanding users so now we want to know when it will appear in a release ;) (sorry)  ### Issue description
please do so on Stack Overflow.
"drm_scheme": "widevine",
"drm_scheme": "widevine",
"drm_scheme": "widevine",
"drm_scheme": "widevine",
"name": "Segmented-encrypted",
"drm_scheme": "widevine",
"drm_scheme": "widevine",
please do so on Stack Overflow.
This is cause by a wrong translation of timestamps:
This is my piece of code:
**Version of ExoPlayer being used**
Model: BRAVIA 2015 KDL-43W756C
BUILD: SVPDTV15_EU-user 5.1.1 LMY48E.S265 3.533 release-keys
You may run into issues playing the video. It is MPEG2 video and MPEG1-L2 audio. There is one additional device we are using which is provided by our client. It has a custom Android OS on it, and some codecs that might not be available on all Android devices.  I've looked at the class DefaultTsPayloadReaderFactory in the dev-v2
@Override
but from youtube dash , it seems to be working properly .
but meet a proplem
when vedio is reach end
@Override
add log
http://cdn.nrjaudio.fm/adwz1/fr/30405/aac_64.mp3
PATH
RUN
cd ${VP9_EXT_PATH}/jni && \
I use git mingW64,show
disabling libyuv
NDK_PATH="/home/witype/Android/android-ndk-r13b"
cd ${VP9_EXT_PATH}/jni && \
~/Android/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/armeabi-v7a ~/Android/ExoPlayer/extensions/vp9/src/main/jni
./generate_libvpx_android_configs.sh: ../../libvpx/configure: /bin/sh^M: (Interpreter error:): (No such file or directory)
It is DASH / Widevine protected content.
I checked the code and I couldn't find any clue about a configuration to disabling the ID3 parser in the MP3 extractor. Am I missing something? Is it something possible to integrate in the next releases?
It's possible this isn't AC3 specific, but I don't have any other samples available to verify.
'jpeglib.h' file not found
Will be thankful for any help. @vigneshvg Please update current issue thread with a link to instructions when they will be done. Thanks.  Mi Box does not pass-through correctly anything except Dolby Digital sound.
Xiaomi Mi Box Android TV (MDZ-16-AB) (once)
I must say, there is current only one Mi Box Android TV (certified by Google). So, I did not think, that the lack of this info could be an issue...
https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8
https://bitdash-a.akamaihd.net/content/sintel/hls/subtitles_en.m3u8
https://bitdash-a.akamaihd.net/content/sintel/hls/subtitles_en.vtt
> Wiko Getaway
And for the Wiko Getaway
> Phone: WIKO - GETAWAY - GETAWAY - wiko
And here are the exceptions broken down specifically to a device:
And from the Wiko Getaway:
at au.com.shiftyjelly.pocketcasts.player.o.a(ShiftyAudioRenderer.java:92)
@Override
Green stripe is immediately noticeable.
Exoplayer 2.2.0
Questions:
- The other alternative, just before mdat: 00 00 05 44
Thank you ojw28,
- exoplayer:r2.2.0
java.lang.IllegalStateException
Exo player is playing but after certain time (1 minute and 7 seconds) it stops, the picture is still, playing gets stuck.
java.lang.IllegalStateException
```java
```java
```java
uri,
//TODO : get uri and extensions
Sorry for my poor english.
Our streams have a keyframe every 0.52 seconds, and Exo waits for the first keyframe before rendering, right? Is that being taken into account when `onRenderedFirstFrame` is sent? That's the only thing I can think. There's a consistent 200-300ms delay between `setPlayWhenReady` and `onRenderedFirstFrame`, which is pretty much what I expected. Any ideas? @ojw28 Quick q: once the player is in `STATE_READY`, and `onRenderedFirstFrame` is called, content should render continuously, right? There's no additional check or something I have to wait for?
Stream-URL: http://sj64.hnux.com
```java
String streamUrl = "http://sj64.hnux.com";
Audio:
@ojw28 we can close this issue, In the meantime I solved my issues / questions using other test media.
@draxdave
@ ojw28
> W/AudioCapabilities: Unsupported mime audio/adpcm-ima
> V/AML_all_components: --------------------------------
>                       branch name:   * jb-mr1-amlogic
>                       cd /mnt/fileroot/jintao.xu/5.1.p201
Please tell me what could be the problem?  When I play an AMR NB format file recorded by android.media.MediaRecorder, I got an error "UnrecognizedInputFormatException: None of the available extractors could read the stream".
03-02 21:13:15.895 20414 29478 W ACodec  : [OMX.qcom.video.decoder.avc] can not return buffer 15 to native window
#EXTM3U
/mono1.m3u8
/mono2.m3u8
/mono3.m3u8
https://play.google.com/store/apps/details?id=com.androidfung.drminfo  Hi,
major_brand     : M4A
compatible_brands: isomiso2iso6
encoder         : Lavf57.21.101
Demo video url : https://img0.ropose.com/video/yrIBmLa/Be46_1487445358869_5b477613_a260.webm
https://img0.ropose.com/video/yrIBmLa/Be46_1487445358869_5b477613_a260.mp4
The server responds with redirect and the following link:  http://x.y.z.w/kqrkgcei5qcmusvaartsd1qivrnee1ui/0000001/GlobalHlsManifest.m3u8 (Please note there is .m3u8 extension at the end)
Player error:
Extra 1:
Extra 2:
Extra 3:
Extra 4:
Currently buildAacAudioSpecificConfig() is
public static byte[] buildAacAudioSpecificConfig(int audioObjectType, int sampleRateIndex,
return specificConfig;
byte[] specificConfig;
return specificConfig;
Exoplayer 2.2.0
@vigneshvg Is there anyway to do this,
in exoplayer
@vigneshvg
origin picture
libyuv::I420ToBGRA(img->planes[VPX_PLANE_Y], img->stride[VPX_PLANE_Y],
```  *** PLEASE DO NOT IGNORE THIS ISSUE TEMPLATE ***
//                    "http://hadafapp.com/up/1487449143video_2017-01-29_23-54-45.mov";
private     String VIDEO_URI =
private Uri uri;
uriParse();
this is logcat
` D/AwWebContentsDelegateAdapter: onUploadBlockedAds num = 0
com.google.android.exoplayer2.ParserException: org.xmlpull.v1.XmlPullParserException: Unexpected token (position:TEXT ftypmp42...@1:305 in java.io.InputStreamReader@32e747)
Caused by: org.xmlpull.v1.XmlPullParserException: Unexpected token (position:TEXT ftypmp42...@1:305 in java.io.InputStreamReader@32e747)
In addition, before I develop this library, I googled a RTMP Java library. I found some libraries however they were complex and their sizes are a few MBs.   @ojw28 yeah I agree with you, I think it is the right time to make these minor changes as well.
A. Oguz 64 bytes from @mekya icmp_seq=0 ttl=30 days time=20 days :P
This method not set exoplayer view always visible!  - We have a DASH test stream that we are trying to play but its not working. Player gives "Top bit not zero" error. It seems to be thrown when retrieving the NAL length. The first few NAL values seem to be fine. Suddenly, an incorrect NAL value comes in and after that it all goes down hill.
02-23 13:01:21.453 9560-24788/tv.accedo.airtel.wynk W/com.newrelic.agent.android: setBytesReceived(...) called on TransactionState in COMPLETE state
02-23 13:01:21.453 9560-24788/tv.accedo.airtel.wynk W/com.newrelic.agent.android: setStatusCode(...) called on TransactionState in COMPLETE state
02-23 13:01:21.764 9560-24788/tv.accedo.airtel.wynk W/com.newrelic.agent.android: setBytesReceived(...) called on TransactionState in COMPLETE state
02-23 13:01:21.764 9560-24788/tv.accedo.airtel.wynk W/com.newrelic.agent.android: setStatusCode(...) called on TransactionState in COMPLETE state
I wonder if it is intentional behaviour or maybe it could be modified?
- Is this error from subtitle content?
<SeekBar
<SeekBar
// seekBar
// seekBar2
<SeekBar
Refer to this link to see how custom it:
java.lang.IllegalArgumentException
@ojw28 @wvpaf  Thanks for your help guys. If we can find a separate reliable root check then we might be able to handle this ourselves   I have a HTTP server which can transcode video files to h264+aac / Matroska streams and deliver them live to the client. Using an `ExtractorMediaSource` I can play those streams just fine, but as expected the duration is unknown and seeking is not available.
It looks like the problem is device specific - Nexus 5x?
<CustomAttributes>
</CustomAttributes>
<CustomAttributes>
</CustomAttributes>
<CustomAttributes>
</CustomAttributes>
http://digilb.nexg.tv/redirect/live/aajtak.smil?scheme=m3u8&sf=net
http://digilb.nexg.tv/redirect/live/amlst:aajtak?scheme=m3u8&sf=net&network=wifi
I saw the code and you were right.
"name": "Digivive LB with AMLST",
"uri": "http://digilb.nexg.tv/redirect/live/amlst:aajtak?scheme=m3u8&sf=net&network=wifi",
//Log.d("Tapan",Integer.toString(type));
> Device: BRAVIA_ATV2
> Product: BRAVIA_ATV2_EU
> Model: BRAVIA 4K GB
with extensions: https://drive.google.com/file/d/0Bww3WxdHUiM1bGhyMWY5dUJ0VTg/view?usp=drivesdk
Model: BRAVIA 4K GB
Marka: Sony
Wersja: 6.0.1 (REL)
Kompilacja: Sony/BRAVIA_ATV2_EU/BRAVIA_ATV2:6.0.1/MMB29V.S50/1.6.0.06.14.1.00:user/release-keys
Zarzdca platformy: mt5891
Zestaw instrukcji: armeabi-v7a armeabi
Rozdzielczo: 1920 x 1080
Rozmiar ekranu: Large
Dotykowy ekran: false
Ustawienia regionalne: pl_PL
Device: BRAVIA_ATV2
Product: BRAVIA_ATV2_EU
Model: BRAVIA 4K GB
![sony_01](https://user-images.githubusercontent.com/327778/27104554-5ef78e6a-5095-11e7-9bec-b1e2713d508f.png)
Product: SVP4KDTV15_EU
Model: BRAVIA 4K 2015
I think a simple MVP would go a long way.  Hopefully this wouldn't take too long for someone who knows what they're doing.
aesFlushingCipher.updateInPlace(bufferToHoldReadData, 0, sizeOfDataRead);
@Override
The key component is the `CipherInputStream` - both `available` and `skip` are problematic.  Wrap your existing `InputStream` (whether that's in assets, or a local file, whatever) in a `CipherInputStream` with the modifications mentioned below.
throw new EOFException();
HTH Hi moagrius,
private StreamingCipherInputStream mInputStream;
private Uri mUri;
private Cipher mCipher;
@Override
// #getUri is part of the contract...
throw new EncryptedFileDataSourceException(e);
if (mBytesRemaining == Integer.MAX_VALUE) {
@Override
public int read(byte[] buffer, int offset, int readLength) throws EncryptedFileDataSourceException {
// constrain the read length and try to read from the cipher input stream
throw new EncryptedFileDataSourceException(e);
throw new EncryptedFileDataSourceException(new EOFException());
@Override
return mUri;
@Override
public void close() throws EncryptedFileDataSourceException {
throw new EncryptedFileDataSourceException(e);
// if the CipherInputStream has returns 0 from #skip, #read out enough bytes to get where we need to be
throw new EOFException();
@Override
Make sure it gets the correct `Cipher` instance and you're good to go.
I tried AES/CBC/NoPadding, AES/CTR/NoPadding, AES/ECB/NoPadding. And also all their with padding variants. @rafaeladel i tested mostly with smaller videos and seemed to get really snappy playback, but after reading your post, i downloaded a larger video (26 mins; I don't know the file size without firing up AS) and I'm getting seek delays of 5 or 6 seconds near the end of the video - and this is on a new Pixel so i can imagine older phones with larger files could easily see the 30 second seek.  The fact that seek operations near the start go much faster than seek operations near the end of the video (regardless of distance from last position) makes me think that we're not really getting random access...
Is there a way that I can tell it to start the decryption from where I specified the seek ? @ojw28  Would you mind pointing which file you're talking about ? because I've been searching for that part in the entire library.
Thanks. @rafaeladel hopefully @ojw28 and you can get your issue resolved, but in case it helps, i was able to get really nice playback on large videos using exoplayer in conjunction with another third party library called "libeasy", which is an in-app streaming server (http://libeasy.alwaysdata.net/), although i'm confident the fact that's it's a server is irrelevant (you can get roughly the same results as my earlier post using a `SocketServer` instead of a `DataSource`).
i also revisited the `AesFlushingCipher` pattern and tried to modify that but still failed - I can get playback but seeking always crashes with the `Top bit not zero`.  The basic approach was:
2.  Modify `AesFlushingCipher` to take a `Cipher` instance (per 1), and an `offset`.
But for what it's worth, I was able to identify the point at which it takes a lot of time seeking to the middle or the end of the video/audio file, It's in `forceSkip` method inside your `EncryptedFileDataSource` class, It loops and reads bytes up to the selected one, meaning it has an **O(n)** complexity, I didn't investigate it yet but you've mentioned that because of `CipherInputStream`'s `skip` method returning 0. @rafaeladel ha yeah i had that same thought and left myself a reminder in the middle of the night.  i also think we might need to round to block size...  and yeah the base implementation of `CipherInputStream` does decrypt from 0 when skip is called, AFAICT; maybe since we have a streaming mode we don't need to do that...  i'll try to find some time to mess with this further...  thanks for following up @rafaeladel try this update and let me know what you get.  for the skip, we're using the native `skip` for the upstream stream, then forcing the cipher to update but without reading.  it needs to update to exactly the same point.
private Cipher mCipher;
mCipher = c;
@Override
// Integer.MAX_VALUE is basically 2GB, so it's _possible_ we might have a video that size
@Override
fwiw, there's a really efficient way to do this by precomputing the exact offset you'll need, but i don't 100% understand the logic behind it so am really hesitant to include it.  but you can basically take the approach from http://stackoverflow.com/a/23744623/6585616, which was modified by another user with a simple demo here http://stackoverflow.com/a/39974172/6585616 - if i'm reading that right the skip buffer is always going to be smaller than the block size (16 bytes), which is awesome - he's computing that using the IV somehow - i tried to break it down but wasn't able to keep up - especially with the magnitude of the bigint - i may revisit but the class posted above is working well here - i'm anxious to hear if you get good results as well. just tried on older samsung tablet, not as bad but still slow...  going to try the iv offset thing... @moagrius can you please share your contact ? mailid or something sorry for the spamming this thread - i finally ended up using the cipher skip shortcut i mentioned earlier, which is super slick IMO but i can't get my head around the biginteger/iv stuff...  the pertinent changes are based entirely off work by stackoverflow user [Maarten Bodewes](http://stackoverflow.com/users/589259/maarten-bodewes) and i not only take no credit but freely admit i can't follow the logic between the 2 inline comments in `forceSkip`.
private Cipher mCipher;
private SecretKeySpec mSecretKeySpec;
super(inputStream, cipher);
@Override
byte[] resizedIvForOffsetByteArray = new byte[AES_BLOCK_SIZE];
@Override
``` @bbincybbaby you can just use this thread :) what's up? @moagrius  That's great ! using `mCipher.update()` apparently is a lot faster than `read()` , since we're not actually reading as far as I know. The seeking time has decreased a lot.
@Slim1991 i'll try to to put a demo up in the next week or so @moagrius I'm planning to play AES-128 encrypted HLS, you will save so much time for me. Just by ExoPlayer's Document can't help me but you can. You are so good! @Slim1991 i _think_ there's already functionality built into ExoPlayer for streaming HLS video (note my comments about how things are much easier with a server); what we're doing is around playback of locally encrypted files, or remote encrypted files that aren't being served via HLS @moagrius Yeah. I know. I'm still working on that. Normal HLS is easy to play with ExoPlayer but encrypted HLS is harder, no example found and no document found. Your work just give me some suggestions to do that. yeah you should be able to use the same techniques shown here - just replace the FileInputStream with whatever Stream you're getting from your networking layer That's right!
My Custom datasource create source :
`@Override
SecretKeySpec keySpec=something;
are you making sure to send the same key _and_ iv spec to the cipher to decrypt as you use to encrypt? Hi @moagrius :
`Cipher cipher = Cipher.getInstance("AES/CTR/NoPadding", "BC");`
I am not sure but "BC" is the provider name.
`SecretKeySpec keySpec = new SecretKeySpec("16-char key".getBytes(), "AES");
I'll try to get a demo up this weekend, it definitely won't happen today or tomorrow though (work and school).  When I do put it up, it definitely won't have large videos included, you'll need to supply those (probably clean, unencrypted). Hi @moagrius tried with creating new cipher instances, didn't worked. I suppose there is something wrong in the way I initialize exoplayer. If would be really helpful if you just provide me the code snippet of your exoplayer initialization.
HTH, GL @moagrius  Thanks for the repo.
PS: you may want to change the package name from `com.test.exoplayer2` to something else other than `test` because it confused me at the beginning. @moagrius  Have you tried using your `EncryptedFileDataSource.java` to download an audio stream and decode it on the fly ? I tried to modify the method `setupInputStream()` as in this [gist](https://gist.github.com/rafaeladel/87872bea8f619fe08e6eda0247ce0899).
1.  Are you sure you're using the same Cipher on both the encrypt and decrypt?  The key _and_ the IV need to be the same byte array, not sure about the Provider.
please. have a good day Hi Moagrius,
I am trying to download video from this url "http://storage.googleapis.com/vrview/examples/video/hls/congo.m3u8 ".
> **E/ACodec**: Failed to allocate buffers after transitioning to IDLE state (error 0xfffffff4)
https://github.com/keima/ExoPlayerExample/commit/392c748e29f89d07e6bdf2e3e0dc1d23539e72fc @AquilesCanta
2) when streaming a high quality video (i splitted Big Buck Bunny in 10s slots), the player lost some frames when changing from one part to other. Rendered frames counter stop increasing, but neither dropped frames nor skipped frames counters are increased. The strange part is that there is content buffered, the position counter keeps going on, the video is frozen an my stalls number is also not increased (I'm counting the stalls according to one previous answer of @ojw28). There is something I can do to avoid this?
`FlacStreamInfo` is obfuscated, which causes a native crash:
02-15 22:57:10.520 28132-28132/? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
02-15 22:57:10.520 28132-28132/? A/DEBUG: pid: 28075, tid: 28131, name: Loader:Extracto  >>> ornithopter.soiree <<<
02-15 22:57:10.520 28132-28132/? A/DEBUG: signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
02-15 22:57:10.520 28132-28132/? A/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
02-15 22:57:10.520 28132-28132/? A/DEBUG: pid: 28075, tid: 28131, name: Loader:Extracto  >>> ornithopter.soiree <<<
02-15 22:57:10.520 28132-28132/? A/DEBUG: signal 6 (SIGABRT), code -6 (SI_TKILL), fault addr --------
<BaseURL>sub_tur.vtt</BaseURL>
http://nasatv-lh.akamaihd.net/i/NASA_101@319270/master.m3u8
Is this something wrong with Playlist / ExoPlayer / or is it my understanding that is wrong?
for "mimeType=application/cea-608" returns True, which makes me feel confused now. Ok, thanks for clarification :-)  Hello!
I have wrond aspect result, Bunny is soo fat) and top and bottom datk rectangles not clipped:
Doing an afinfo on the macOS command line doesn't seem to turn up anything interesting about the file:
File:           Feminist Fight Club.mp3
Edit: Just to rule out our implementation I tried it in the sample project as well, same result, it disables the seek bar and buttons. @AquilesCanta I have now (I did try and search for similar issues but didn't find any), my vote @ojw28 would be to assume constant bit rate and allow seeking, or at the very least have this as a configuration parameter. We're working on a new version of our app at the moment and not being able to seek (or even resume from the middle of) files like this would be a deal breaker :( @ojw28 we make a podcasting app, so we have 0 control over the media. Also this file seeks just fine on both iOS (using AVPlayer or AVAudioEngine) as well as on Android using MediaPlayer or just an Extractor. I understand the reasoning, but I have yet to see any of the previous solutions get seeking wrong in a CBR file. Pretty much all podcasts are CBR, VBR is extremely rare (< 1%). I get this could be specific to our case, but still, it would mean we'd have to fork this project and maintain a fork just to get this behaviour.
######UNSUPPORTED_TYPE#######
######UNSUPPORTED_TYPE#######
Tracks [
```java
- This issue is  specific to a device ASUS_T00J
02-09 11:25:28.096  9098  9706 E ACodec  : [OMX.Intel.VideoDecoder.AVC.secure] ERROR(0x80001000)
02-09 11:25:28.096  9098  9706 E ACodec  : signalError(omxError 0x80001000, internalError -2147483648)
1) The Demo app fails because of a crypto exception whereas , our app fails because of a Decoder exception (failing to find NAL unit)
This crash appears on clicking Big Buck Bunny video in MISC section
com.google.android.exoplayer2.demo E/ACodec: [OMX.google.h264.decoder] ERROR(0x80001001)
java.lang.IllegalStateException
5 errors
100 warnings
3.8. Switching across Adaptation Sets
Adaptation Set with @schemeIdUri set to urn:mpeg:dash:adaptation-set-switching:2016
"uri": "https://storage.googleapis.com/wvtemp/kylealexander/packager_test/iop_compliant_mpd_test/llama.mpd",
"drm_scheme": "widevine",
Finally, here's a sample exception:
In particular, these two Exceptions happen often in that version, always when seeking to anywhere in the range of 10-20 secs of that video:
Thanks! That was extremely helpful Aquiles.
Moacir Thank you for the quick reply!
Moacir OK, thanks.
Moacir  Is there any way to completely stop the ExoPlayer? Currently using `release()`, even coupled with `stop()`, does not stop the player from exercising network communications. This is what the console looks like after releasing the player, just that, there is no activity being closed here or any user action after releasing the player. It stays like this forever:
![ss](https://cloud.githubusercontent.com/assets/8498057/22651987/3bd94ae8-ec74-11e6-9412-63745abac067.png)
@Override
02-04 17:37:54.427 4556-6023/ E/ACodec: [OMX.google.h264.decoder] ERROR(0x80001001)
java.lang.IllegalStateException
### Used Exoplayer version - r2.1.1
Please need help.
Thanks.  Guidelines to use custom encrypted data source ?
Sample stream: https://medialaan.ambroos.io/hls/2/discontinuity-decoding-error.m3u8
We have observed the issue on the following devices:
A sample ExoPlayer demo build (r2.2.0) with the failing stream inside: https://medialaan.ambroos.io/hls/2/exoplayer-bad-decode.apk
(We did not observe this issue on any other platform so far.) @AquilesCanta Thanks! Do you know if there's any way we can work around this issue temporarily (by changing the encoding configuration of either the content or ad segments, for example)? Hm. Considering our content comes from a hardware encoder (limited configurability), and the advertisements are processed by a third party using ffmpeg, I don't think we're ever going to get the PPS and SPS to match exactly (but my knowledge of H264 is very limited).
It's a very, very strange thing. Another interesting thing, we experimented with the resolution switch (to make canReconfigureCodec return false), but this did not help, decoding errors are still visible.
Sample stream: https://medialaan.ambroos.io/hls/diff-res/manifest.m3u8 (ads start at 0:40).
Is there any way we could sponsor development of a fix for this? MEDIALAAN would be more than happy to do something like that. Feel free to contact me at ambroos.vaes@medialaan.be. @AquilesCanta Hi Santiago, sorry for bothering you again. Any news? @andrewlewis Thanks, I'll try to find some time to see if I can trigger the issue with a specific parameter change!
https://gist.github.com/Ambroos/7ad735790461b41c4a29fd11a431b745
Thanks, @ojw28
02-03 06:51:26.258 2549-2568/? D/mali_winsys: EGLint new_window_surface(egl_winsys_display*, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000
02-03 06:51:37.903 2549-2568/com.google.android.exoplayer2.demo D/mali_winsys: EGLint new_window_surface(egl_winsys_display*, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000
Below is the ADB Log Cat from emulator:
03-26 23:50:22.700 1524-1728/system_process I/ActivityManager: START u0 {cmp=me.begetan.advido/.activities.ExoPlayerActivity} from uid 10058 on display 0
03-26 23:50:22.711 1524-1728/system_process V/WindowManager: addAppToken: AppWindowToken{7c4e360 token=Token{1a3e7b63 ActivityRecord{26ed3592 u0 me.begetan.advido/.activities.ExoPlayerActivity t1979}}} to stack=1 task=1979 at 1
03-26 23:50:23.036 25527-25527/me.begetan.advido I/ExoPlayerImpl: Init 2.1.1 [generic_x86_64, Android SDK built for x86_64, unknown, 22]
03-26 23:50:23.056 25527-25535/me.begetan.advido W/art: Suspending all threads took: 7.032ms
03-26 23:50:23.059 25527-25527/me.begetan.advido I/ExoPlayerActivity: Prepare file: 4k.mp4
03-26 23:50:23.118 25527-25540/me.begetan.advido W/art: Suspending all threads took: 8.046ms
03-26 23:50:23.132 25527-25540/me.begetan.advido I/art: Background sticky concurrent mark sweep GC freed 4026(538KB) AllocSpace objects, 0(0B) LOS objects, 14% free, 4MB/4MB, paused 10.839ms total 29.236ms
03-26 23:50:23.387 25527-25777/me.begetan.advido I/VideoCapabilities: Unsupported profile 4 for video/mp4v-es
03-26 23:50:23.410 25527-25777/me.begetan.advido D/MediaCodecInfo: NoSupport [size.support, 3840x2160] [OMX.google.h264.decoder, video/avc] [generic_x86_64, Android SDK built for x86_64, unknown, 22]
03-26 23:50:23.410 25527-25777/me.begetan.advido D/MediaCodecInfo: NoSupport [size.support, 3840x2160] [OMX.google.h264.decoder, video/avc] [generic_x86_64, Android SDK built for x86_64, unknown, 22]
03-26 23:50:23.419 25527-25783/me.begetan.advido I/OMXClient: Using client-side OMX mux.
03-26 23:50:23.482 25527-25540/me.begetan.advido I/art: Background sticky concurrent mark sweep GC freed 957(36KB) AllocSpace objects, 0(0B) LOS objects, 0% free, 5MB/5MB, paused 6.285ms total 48.262ms
03-26 23:50:23.547 25527-25791/me.begetan.advido I/OMXClient: Using client-side OMX mux.
03-26 23:50:23.556 25527-25791/me.begetan.advido E/ACodec: [OMX.google.h264.decoder] storeMetaDataInBuffers failed w/ err -1010
03-26 23:50:23.593 25527-25540/me.begetan.advido I/art: Background partial concurrent mark sweep GC freed 793(46KB) AllocSpace objects, 0(0B) LOS objects, 39% free, 5MB/9MB, paused 11.682ms total 87.689ms
03-26 23:50:23.608 25527-25791/me.begetan.advido E/ACodec: [OMX.google.h264.decoder] ERROR(0x80001001)
03-26 23:50:23.610 25527-25791/me.begetan.advido E/ACodec: signalError(omxError 0x80001001, internalError -2147483648)
03-26 23:50:23.615 25527-25790/me.begetan.advido E/MediaCodec: Codec reported err 0x80001001, actionCode 0, while in state 6
03-26 23:50:23.631 25527-25777/me.begetan.advido E/ExoPlayerImplInternal: Internal runtime error.
java.lang.IllegalStateException
03-26 23:50:23.665 25527-25777/me.begetan.advido E/ExoPlayerImplInternal: Stop failed.
java.lang.IllegalStateException
@Override
public void preparePlayer(Uri uri) {
@Override
Can you please look at this and advise if this change would be correct? I used ffmpeg to add a subtitle track to an existing MP4 file.  So I don't know why the edit list is there, but it seems that ffmpeg always creates an edit list for each track.
more informations.
- It occurs from Kitkat
FontColor
FontBackgroundOpacity
FontOpacity
FontEdgeType
```java
```java
```java
- DASH extracted from info file of: https://www.youtube.com/watch?v=vlDzYIIOYmM
On Pixel C is working well, is it x264/AVC linux codec issue, or ARM v7 processor issue?  If we select from the beginning only 4K or 2K sources than the player works flawlessly.
<6>[ 9550.385197@0] switch_vpu_mem_pd: afbc_dec ON
<6>[ 9586.530666@0] switch_vpu_mem_pd: afbc_dec OFF
<6>[ 9718.459021@0]    to free 18476kB on behalf of 'kswapd0' (917) because
<6>[ 9719.767885@0]    to free 18036kB on behalf of 'kswapd0' (917) because
<6>[ 9720.982182@0]    to free 15252kB on behalf of 'kswapd0' (917) because
<6>[ 9722.994781@3]    to free 22816kB on behalf of 'kswapd0' (917) because
<6>[10064.605558@1] reg:ionvideo
@Override
throw new EOFException();
@Override
[Big Buck Bunny](http://demo.cf.castlabs.com/media/bbb_abr/Manifest_new.mpd)
### Device
Nexus player (6.1)
code (exoplayer 2.X):
IOException {
do {
if (XmlPullParserUtil.isStartTag(xpp, "cenc:pssh") && xpp.next() == XmlPullParser.TEXT) {
if (!seenPsshElement) {
code (exoplayer 1.X):
do {
if (ParserUtil.isStartTag(xpp, "cenc:pssh") && xpp.next() == XmlPullParser.TEXT) {
if (seenPsshElement && uuid == null) {
First of all, thank you for supporting `mspr:pro` element.
As far as I read bento4's code, they do not support `cenc:pssh`.
I'll keep watching bento4.
````java
````java
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=500000,RESOLUTION=480x270,CODECS="avc1.77.30, mp4a.40.5"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=500000,RESOLUTION=480x270,CODECS="avc1.77.30, mp4a.40.2"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1500000,RESOLUTION=848x480,CODECS="avc1.77.30, mp4a.40.2"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1500000,RESOLUTION=848x480,CODECS="avc1.77.30, mp4a.40.2"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=2500000,RESOLUTION=1280x720,CODECS="avc1.77.30, mp4a.40.2"
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=2500000,RESOLUTION=1280x720,CODECS="avc1.77.30, mp4a.40.2"
ERROR
protected void render(Uri uri) {
ASUS Z00D
enabling neon
enabling neon_asm
enabling libyuv
It's difficult to judge with `SDK_INT == 25`, In this case, I'd like to use `MediaDrm#isCryptoSchemeSupported`.
if (Util.SDK_INT < 19 || !MediaDrm.isCryptoSchemeSupported(uuid, MimeTypes.VIDEO_MP4)) {
I'm sorry that I didn't understand your intentions correctly.   Don't you like [MediaDrm.isCryptoSchemeSupported](https://goo.gl/bMglsU) ? Right, got it. Thanks!  Question!
Shaka Player can cope with this situation .
java.lang.IllegalStateException
Hi ojw28,
<Accessibility schemeIdUri="urn:scte:dash:cc:cea-608:2015"/>
> <https://github.com/notifications/unsubscribe-auth/ABkEAUy6bww9X3q_JTw4HNMhZ1AHvYoIks5rX09EgaJpZM4LqzL7>
My code:
@Override
-http://ajo.dev.reuters.tv/rest/v2/xato/playlist/assets/139287,140784,140847,140800,57445,127691,140785,127679,140855,127800,140799,127770,140803,139291/video.m3u8
`@Override
>>>#EXTM3U
Hi quilesCanta
@Override
Am I on a right way or this is completely different issue?
Dobri Rusev
HI @ojw28
@Override
@Override
-Kuppa Thank you for responding my question.
-Kuppa
~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/armeabi-v7a ~/ExoPlayer/extensions/vp9/src/main/jni
disabling libyuv
[DEP] vp9/vp9_dx_iface.c.d
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
/home/bobek/android-ndk-r10e/toolchains/arm-linux-androideabi-4.8/prebuilt/linux-x86/lib/gcc/arm-linux-androideabi/4.8/include/arm_neon.h:32:2: error: #error You must enable NEON instructions (e.g. -mfloat-abi=softfp -mfpu=neon) to use arm_neon.h
~/ExoPlayer/extensions/vp9/src/main/jni/libvpx_android_configs/armeabi ~/ExoPlayer/extensions/vp9/src/main/jni
disabling libyuv
[DEP] vp9/vp9_dx_iface.c.d
disabling libyuv
enabling mips32
[DEP] vp9/vp9_dx_iface.c.d
disabling libyuv
enabling mmx
enabling sse
using yasm
[DEP] vpx_ports/x86_abi_support.asm.d
[DEP] vp9/vp9_dx_iface.c.d
disabling libyuv
[DEP] vp9/vp9_dx_iface.c.d
disabling libyuv
enabling mmx
enabling sse
using yasm
[DEP] vpx_ports/x86_abi_support.asm.d
[DEP] vp9/vp9_dx_iface.c.d
disabling libyuv
enabling mips64
[DEP] vp9/vp9_dx_iface.c.d
[armeabi-v7a] Compile arm    : vpx <= vp9_dx_iface.c
[armeabi] Compile arm    : vpx <= vp9_dx_iface.c
[x86_64] Assemble       : vpx <= x86_abi_support.asm
[armeabi-v7a] Compile arm    : vpx <= vpx_config.c
[armeabi-v7a] Compile arm    : vpx <= vp9_iht4x4_add_neon.c
[armeabi-v7a] Compile arm    : vpx <= vp9_iht8x8_add_neon.c
[armeabi-v7a] Compile arm    : vpx <= vp9_alloccommon.c
[armeabi-v7a] Compile arm    : vpx <= vp9_blockd.c
[armeabi-v7a] Compile arm    : vpx <= vp9_common_data.c
[armeabi-v7a] Compile arm    : vpx <= vp9_entropy.c
[armeabi-v7a] Compile arm    : vpx <= vp9_entropymode.c
[armeabi-v7a] Compile arm    : vpx <= vp9_entropymv.c
[armeabi-v7a] Compile arm    : vpx <= vp9_filter.c
[armeabi-v7a] Compile arm    : vpx <= vp9_frame_buffers.c
[armeabi-v7a] Compile arm    : vpx <= vp9_idct.c
[armeabi-v7a] Compile arm    : vpx <= vp9_loopfilter.c
[armeabi-v7a] Compile arm    : vpx <= vp9_mvref_common.c
[armeabi-v7a] Compile arm    : vpx <= vp9_pred_common.c
[armeabi-v7a] Compile arm    : vpx <= vp9_quant_common.c
[armeabi-v7a] Compile arm    : vpx <= vp9_reconinter.c
[armeabi-v7a] Compile arm    : vpx <= vp9_reconintra.c
[armeabi-v7a] Compile arm    : vpx <= vp9_rtcd.c
[armeabi-v7a] Compile arm    : vpx <= vp9_scale.c
[armeabi-v7a] Compile arm    : vpx <= vp9_scan.c
[armeabi-v7a] Compile arm    : vpx <= vp9_seg_common.c
[armeabi-v7a] Compile arm    : vpx <= vp9_thread_common.c
[armeabi-v7a] Compile arm    : vpx <= vp9_tile_common.c
[armeabi-v7a] Compile arm    : vpx <= vp9_decodeframe.c
[armeabi-v7a] Compile arm    : vpx <= vp9_decodemv.c
[armeabi-v7a] Compile arm    : vpx <= vp9_decoder.c
[armeabi-v7a] Compile arm    : vpx <= vp9_detokenize.c
[armeabi-v7a] Compile arm    : vpx <= vp9_dsubexp.c
[armeabi-v7a] Compile arm    : vpx <= vp9_dthread.c
[armeabi-v7a] Compile arm    : vpx <= vpx_codec.c
[armeabi-v7a] Compile arm    : vpx <= vpx_decoder.c
[armeabi-v7a] Compile arm    : vpx <= vpx_encoder.c
[armeabi-v7a] Compile arm    : vpx <= vpx_image.c
[armeabi-v7a] Compile arm    : vpx <= idct16x16_neon.c
[armeabi-v7a] Compile arm    : vpx <= idct32x32_135_add_neon.c
[armeabi-v7a] Compile arm    : vpx <= idct32x32_1_add_neon.c
[armeabi-v7a] Compile arm    : vpx <= idct32x32_34_add_neon.c
[armeabi-v7a] Compile arm    : vpx <= idct32x32_add_neon.c
[armeabi-v7a] Compile arm    : vpx <= intrapred_neon.c
[armeabi-v7a] Compile arm    : vpx <= vpx_convolve_neon.c
[armeabi-v7a] Compile arm    : vpx <= bitreader.c
[armeabi-v7a] Compile arm    : vpx <= bitreader_buffer.c
[armeabi-v7a] Compile arm    : vpx <= intrapred.c
[armeabi-v7a] Compile arm    : vpx <= inv_txfm.c
[armeabi-v7a] Compile arm    : vpx <= loopfilter.c
[armeabi-v7a] Compile arm    : vpx <= prob.c
[armeabi-v7a] Compile arm    : vpx <= vpx_convolve.c
[armeabi-v7a] Compile arm    : vpx <= vpx_dsp_rtcd.c
[armeabi-v7a] Compile arm    : vpx <= vpx_mem.c
[armeabi-v7a] Compile arm    : vpx <= arm_cpudetect.c
[armeabi-v7a] Compile arm    : vpx <= gen_scalers.c
[armeabi-v7a] Compile arm    : vpx <= vpx_scale.c
[armeabi-v7a] Compile arm    : vpx <= yv12config.c
[armeabi-v7a] Compile arm    : vpx <= yv12extend.c
[armeabi-v7a] Compile arm    : vpx <= vpx_scale_rtcd.c
[armeabi-v7a] Compile arm    : vpx <= vpx_thread.c
[armeabi-v7a] Compile++ arm  : vpxJNI <= vpx_jni.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= compare.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= compare_common.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= compare_neon64.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= compare_gcc.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= convert.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= convert_argb.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= convert_from.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= convert_from_argb.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= convert_to_argb.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= convert_to_i420.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= cpu_id.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= planar_functions.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_any.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_argb.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_common.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_mips.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_neon64.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_gcc.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= row_any.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= row_common.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= row_mips.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= row_neon64.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= row_gcc.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_any.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_argb.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_common.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_mips.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_neon64.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_gcc.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= video_common.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= compare_neon.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= rotate_neon.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= row_neon.cc
[armeabi-v7a] Compile++ thumb: yuv_static <= scale_neon.cc
[armeabi-v7a] Compile thumb  : cpufeatures <= cpu-features.c
[armeabi] Compile arm    : vpx <= vpx_config.c
[armeabi] Compile arm    : vpx <= vp9_alloccommon.c
[armeabi] Compile arm    : vpx <= vp9_blockd.c
[armeabi] Compile arm    : vpx <= vp9_common_data.c
[armeabi] Compile arm    : vpx <= vp9_entropy.c
[armeabi] Compile arm    : vpx <= vp9_entropymode.c
[armeabi] Compile arm    : vpx <= vp9_entropymv.c
[armeabi] Compile arm    : vpx <= vp9_filter.c
[armeabi] Compile arm    : vpx <= vp9_frame_buffers.c
[armeabi] Compile arm    : vpx <= vp9_idct.c
[armeabi] Compile arm    : vpx <= vp9_loopfilter.c
[armeabi] Compile arm    : vpx <= vp9_mvref_common.c
[armeabi] Compile arm    : vpx <= vp9_pred_common.c
[armeabi] Compile arm    : vpx <= vp9_quant_common.c
[armeabi] Compile arm    : vpx <= vp9_reconinter.c
[armeabi] Compile arm    : vpx <= vp9_reconintra.c
[armeabi] Compile arm    : vpx <= vp9_rtcd.c
[armeabi] Compile arm    : vpx <= vp9_scale.c
[armeabi] Compile arm    : vpx <= vp9_scan.c
[armeabi] Compile arm    : vpx <= vp9_seg_common.c
[armeabi] Compile arm    : vpx <= vp9_thread_common.c
[armeabi] Compile arm    : vpx <= vp9_tile_common.c
[armeabi] Compile arm    : vpx <= vp9_decodeframe.c
[armeabi] Compile arm    : vpx <= vp9_decodemv.c
[armeabi] Compile arm    : vpx <= vp9_decoder.c
[armeabi] Compile arm    : vpx <= vp9_detokenize.c
[armeabi] Compile arm    : vpx <= vp9_dsubexp.c
[armeabi] Compile arm    : vpx <= vp9_dthread.c
[armeabi] Compile arm    : vpx <= vpx_codec.c
[armeabi] Compile arm    : vpx <= vpx_decoder.c
[armeabi] Compile arm    : vpx <= vpx_encoder.c
[armeabi] Compile arm    : vpx <= vpx_image.c
[armeabi] Compile arm    : vpx <= bitreader.c
[armeabi] Compile arm    : vpx <= bitreader_buffer.c
[armeabi] Compile arm    : vpx <= intrapred.c
[armeabi] Compile arm    : vpx <= inv_txfm.c
[armeabi] Compile arm    : vpx <= loopfilter.c
[armeabi] Compile arm    : vpx <= prob.c
[armeabi] Compile arm    : vpx <= vpx_convolve.c
[armeabi] Compile arm    : vpx <= vpx_dsp_rtcd.c
[armeabi] Compile arm    : vpx <= vpx_mem.c
[armeabi] Compile arm    : vpx <= arm_cpudetect.c
[armeabi] Compile arm    : vpx <= gen_scalers.c
[armeabi] Compile arm    : vpx <= vpx_scale.c
[armeabi] Compile arm    : vpx <= yv12config.c
[armeabi] Compile arm    : vpx <= yv12extend.c
[armeabi] Compile arm    : vpx <= vpx_scale_rtcd.c
[armeabi] Compile arm    : vpx <= vpx_thread.c
[armeabi] Compile++ arm  : vpxJNI <= vpx_jni.cc
[armeabi] Compile++ thumb: yuv_static <= compare.cc
[armeabi] Compile++ thumb: yuv_static <= compare_common.cc
[armeabi] Compile++ thumb: yuv_static <= compare_neon64.cc
[armeabi] Compile++ thumb: yuv_static <= compare_gcc.cc
[armeabi] Compile++ thumb: yuv_static <= convert.cc
[armeabi] Compile++ thumb: yuv_static <= convert_argb.cc
[armeabi] Compile++ thumb: yuv_static <= convert_from.cc
[armeabi] Compile++ thumb: yuv_static <= convert_from_argb.cc
[armeabi] Compile++ thumb: yuv_static <= convert_to_argb.cc
[armeabi] Compile++ thumb: yuv_static <= convert_to_i420.cc
[armeabi] Compile++ thumb: yuv_static <= cpu_id.cc
[armeabi] Compile++ thumb: yuv_static <= planar_functions.cc
[armeabi] Compile++ thumb: yuv_static <= rotate.cc
[armeabi] Compile++ thumb: yuv_static <= rotate_any.cc
[armeabi] Compile++ thumb: yuv_static <= rotate_argb.cc
[armeabi] Compile++ thumb: yuv_static <= rotate_common.cc
[armeabi] Compile++ thumb: yuv_static <= rotate_mips.cc
[armeabi] Compile++ thumb: yuv_static <= rotate_neon64.cc
[armeabi] Compile++ thumb: yuv_static <= rotate_gcc.cc
[armeabi] Compile++ thumb: yuv_static <= row_any.cc
[armeabi] Compile++ thumb: yuv_static <= row_common.cc
[armeabi] Compile++ thumb: yuv_static <= row_mips.cc
[armeabi] Compile++ thumb: yuv_static <= row_neon64.cc
[armeabi] Compile++ thumb: yuv_static <= row_gcc.cc
[armeabi] Compile++ thumb: yuv_static <= scale.cc
[armeabi] Compile++ thumb: yuv_static <= scale_any.cc
[armeabi] Compile++ thumb: yuv_static <= scale_argb.cc
[armeabi] Compile++ thumb: yuv_static <= scale_common.cc
[armeabi] Compile++ thumb: yuv_static <= scale_mips.cc
[armeabi] Compile++ thumb: yuv_static <= scale_neon64.cc
[armeabi] Compile++ thumb: yuv_static <= scale_gcc.cc
[armeabi] Compile++ thumb: yuv_static <= video_common.cc
[armeabi] Compile thumb  : cpufeatures <= cpu-features.c
[x86] Assemble       : vpx <= x86_abi_support.asm
[armeabi-v7a] SharedLibrary  : libvpx.so
make: *** [/home/bobek/ExoPlayer/extensions/vp9/src/main/obj/local/armeabi-v7a/libvpx.so] Error 1
arch[0]="armeabi-v7a"
arch[1]="armeabi"
arch[2]="mips"
I have not tested yet if output works on `armeabi-v7a` or not. Same error here: You must enable NEON instructions Configured on OSX and Ubuntu and got the same error  More of a question than an issue - I have one or two event listeners set on a SimpleExoPlayer, and I was wondering if it would be possible to remove all of them with one utility method, instead of having to retain instances of the listeners. That's a very good point, thank you for clarifying. :)  Hi,
Not sure whether this is a 'how do I achieve this' question, or a feature request!
Thanks! Hi @WeiChungChang
<AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="swe" segmentAlignment="true">
<AdaptationSet mimeType="application/mp4" startWithSAP="1" lang="swe" segmentAlignment="true">
01-13 12:05:52.556 2600-3026/? W/WVCdm: Could not read /data/mediadrm/IDM1013/ay64.dat2: No such file or directory
@Override
@Override
Log.v("naagu","Listener-onLoadingChanged...");
@Override
@Override
@Override
@Override
` @AquilesCanta thank you my mistake   Merging release v2 items  I received an exoplayer error which was quite hard to reproduce. I'll send the files separately via mail.
Hi @ojw28
The changes :
@Override
@Override
@Override
#EXTM3U
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:35156
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
Devices: Minix X7, Minix X8
Util.getUserAgent(this, "AsiadigiEdukids"), bandwidthMeter2);
@Override
@Override
@Override
@Override
@Override
When i am playing this video in offline, and seeking a couple of times i got this kind of exception:
"name": "Brave-PRWV",
"drm_scheme": "widevine",
"content_id":"Brave-PRWV",
1. how can I use the WideVine DRM "sesionShere" plugin? Since Im using a proxy in my system, I did not use the keyRequestProperties as the demo do, so I thought that adding the keyRequestProperties to the keyRequest = mediaDrm.getKeyRequest(, , ,
Yaniv
Yaniv
2.    I have an abnormal behavior  - I keep getting offlineKey as null.
dashManifest)
throws IOException, InterruptedException, DrmSessionException {
> 2.    I have an abnormal behavior  - I keep getting offlineKey as null.
> Yaniv Lankry
> dashManifest)
recommend to migrate it to the trunk.
Yaniv
A Java 32 bit integer should be sufficient to hold epoch time, but not if you add the two values together and divide by 2 to get the midpoint as the Exoplayer code does. We tried a quick hack that simply used longs to prove it worked, but better would be to subtract the values and divide by 2 then add to the lower value. Then there is not chance of an overflow even using integers.  I.e. you should be able to fix this easily (we were looking at a fork of your code from over a year ago and I'm not sure where the logic is now, but you can see the problem in this older version on this line of code: https://github.com/google/ExoPlayer/blob/release-v1/library/src/main/java/com/google/android/exoplayer/dash/mpd/SegmentBase.java#L147).
Name: The Munsta
Artist: SCNDL
![grainy](https://cloud.githubusercontent.com/assets/6750107/21750823/56b082e2-d58a-11e6-9238-d0e5be549e3d.png)
Hello @ojw28
it would do me a lot of help if you can even provide me with some other source of getting it any help on this question Sorry for being rude but any help for this question Hello @AquilesCanta I have solved it after reading the classes (cause I got some time) sorry for bugging you guys.
shamu:/data/data/com.celltick.lockscreen #
* there're IPTV services which redirect to MPEG-TS with _302 Moved Temporarily_  to show user "contact help desk" kind of errors
$ curl -v http://1ttvauth.top/w/10188/1/sam/<AUTH_TOKEN>/playlist.m3u8
*   Trying 186.2.163.150...
> GET /w/10188/1/sam/<AUTH_TOKEN>/playlist.m3u8 HTTP/1.1
> Host: 1ttvauth.top
Stream: http://radios-ec.cdn.nedmedia.io/radios/ec-alfa.m3u8
Unexpected exception loading stream
@Override
@Override
Any plans to support ICY Metadata?
URL used : http://telecolor.econcept.it/live/primarete.isml/manifest
"name": "Bug",
java.lang.IllegalStateException
else
@Override
@Override
Thanks again!  @ojw28 when will this enhancement occur.
I/SSASubtitle: time 27254
I/SSASubtitle: time 14284
I/SSASubtitle: time 285
I/SSASubtitle: time 2029
I/SSASubtitle: time 35277
I/SSASubtitle: time 9651
I/SSASubtitle: time 2122
I/SSASubtitle: time 3891
I/SSASubtitle: time 9933
But in described situation we compare "fully supported" vs "lacking proper support" where "lacking proper support" wins @ojw28 , thank you
@Override
```  I've added initial support for ASS/SSA subtitles in my fork https://github.com/jcable/ExoPlayer.
Subtitles render but the timing is weird.
I/getCues: 1473
I/getCues: 1473
I/getCues: 4243333
I need to enable and write script for AC3 audio?
Please give me easiest solution for play AC3 audio in my device.
Jd
java.lang.IllegalStateException
10x
Gilad Hi  Olly,
12:14:11.536 188-188/? E/MDRMOemCrypto: ERROR: multiple PPS NALUs (not supported by video decoder)
Any thoughts what would be a proper solution to this problem?
12:13:57.497 188-211/? I/MDRMOemCrypto: Calling IsKeyboxValid
12:13:57.517 188-1898/? E/Crypto: createCryptoFactory failed:No errors or unknown error
12:13:57.527 188-1898/? D/PlayReadyCryptoFactory: createCryptoFactory >>
12:13:57.528 188-1898/? E/Crypto: createCryptoFactory failed:No errors or unknown error
12:13:57.532 188-188/? D/MDRMOemCrypto: Calling GetDeviceID
12:13:57.533 188-188/? I/MDRMOemCrypto: extracted deviceID FUGU_T45COVQG_00013B24, res 0
12:13:57.763 191-710/? E/OMXNodeInstance: getConfig(bf0004:Intel.Decoder.AVC.secure, ConfigCommonOutputCrop(0x700000f)) ERROR: FormatNotDetected(0x80001020)
12:13:57.853 2606-2606/? D/EventLogger: audioFormatChanged [0.76, id=f/793607981, mimeType=audio/mp4a-latm, bitrate=200852, channels=2, sample_rate=44100, language=rus]
12:14:11.536 188-188/? E/MDRMOemCrypto: ERROR: multiple PPS NALUs (not supported by video decoder)
> Are you in control of the encoding for these streams.
Log:
12-21 21:17:36.328 D: ~ACodec
12-21 21:17:38.332 D: ACodec
12-21 21:17:38.332 D: ACodec
Changes are in:
- Why such value as 30000 ms causing such un-expected behaviour
@Override
// some other code
@Override
Here's the code
```java
```java
Caused by: java.lang.IllegalArgumentException: 1 > 0
``` Here is one more strange file https://www.dropbox.com/s/6sxf1evitta9zed/05e67b82888bff.mp3?dl=0
`exoplayer 2.2.0`
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
Here is Error:
and my code:
@Override
For some HLS streams the player goes to STATE_BUFFERING forever when seeking to a different position than 0. If we seek again to 0 position the stream starts it reproduction
This issue is taking place at exoplayer 2.1.0, I can't reproduce it at 2.0.4.
>    be preceded by an EXTINF tag.  Its format is:
And, I fully agree with you. This HLS definition will lead in a suboptimal solution in every possible player implementation :(
Inmho, the pity is that those standard versions was very popular some time ago, and users not consuming their own generated content, which could not control the hls versions, will find those problems easily.
Playing the DASH stream below does not play on certain devices.
https://d2jyv85kc4p0re.cloudfront.net/ABtEOrCRSOSDDlcekhkSCA/manifest.mpd
http://box.tivi.bg/c/cnn
**That is the problem**
Really strange. Do someone has any idea?
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.ParserException: Unexpected ID3 file identifier, expected "ID3", actual "".
exoplayer r1.5.13
@ojw28  Sorry, the previous sample can't reproduce the problem indeed. After one hour digging into the problem, Now i can conclude the **test_hint1.ts** somehow caused the error.
String LANGUAGE_UNDEFINED = "und"
js.put("merchant", "afrostream");
}catch ( Exception ee)
Question...
can you help me !? @lioun1729
I get this same issue on the following devices:
Witch, I don't know if it could cause any errors in the opus decoding process.
Moacir
Moacir Thank you,
Moacir Thank you for the quick analysis!
Moacir  Is there a third-party emulator that can play video with exoplayer on API19?
2) Genymotion
W/NalUnitUtil: Unexpected aspect_ratio_idc value: 254
W/AudioCapabilities: Unsupported mime audio/aac-adif
W/AudioCapabilities: Unsupported mime audio/aac-latm
W/AudioCapabilities: Unsupported mime audio/adpcm-ima
W/AudioCapabilities: Unsupported mime audio/ape
W/AudioCapabilities: Unsupported mime audio/eac3
V/AML_all_components: --------------------------------
author:aml.sh multi-media team
branch name:   * jb-mr1-amlogic
build-name:     jintao.xu
cd /mnt/fileroot/jintao.xu/5.1.p201
@Override
01-01 08:12:58.861 E/AndroidRuntime( 3811): 	at java.lang.reflect.Method.invoke(Method.java:511)
In Arabic (RTL), the dashes ("-") and the parenthesis, should start from the same direction as the Arabic language,
As much as the title says , in the future , will it be possible to play a video backwards ? or is it something that can be achievable now ? if it is , i will appreciate if you point me to the right direction .
Kashyap Tadikonda I have captionslist where each caption contains title, startTime & endTime. how to add these to Exoplayer/embed to subtitle view.
com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to http://cdn.kaishuhezi.com/audio/story/M-3-01-20150408.mp3
Caused by: java.net.ConnectException: failed to connect to cdn.kaishuhezi.com/221.204.226.179 (port 80) after 8000ms: isConnected failed: ECONNREFUSED (Connection refused)
Caused by: com.google.android.exoplayer2.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to http://cdn.kaishuhezi.com/audio/story/M-3-01-20150408.mp3
Caused by: java.net.ConnectException: failed to connect to cdn.kaishuhezi.com/221.204.226.179 (port 80) after 8000ms: isConnected failed: ECONNREFUSED (Connection refused)
@lawloretienne Hello, Etienne.
-map 0:a:0 -c:a:0 libfdk_aac -profile:a aac_he -b:a:0 128k -ac 2 -ar 48000 \
Input #0, mpegts, from 'football1.ts':
How does this happen? Is this a bug?
Exoplayer version:2.0.4
if (switchingVariant) {
```java
* cross-protocol redirects.
* cross-protocol redirects.
@Override
Does ExoPlayer support this behavior?
![vidangel_exoplayer](https://cloud.githubusercontent.com/assets/4111055/21038373/5c268902-bd92-11e6-8ec7-6bdd742f4d8b.png)
"uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480546906-hd-aac.m3u8"
"uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480959853-hdx-aac.m3u8"
"uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480546906-hds-aac.m3u8"
"uri": "https://s3.amazonaws.com/processing.vidangel.com/playlist-all-1480546752-hdm-aac.m3u8"
@AquilesCanta This problem has never happened on Exoplayer 1.5, doesn't happen on any other player across all of our platforms player's (iOS, tvOS, Roku (both scene graph and roVideoScreen), XBox, Samsung TV (Tizen) and Chromecast.
Is there any other way to achieve this?
#EXTM3U
@Override
-Kashyap. Allowing request properties to be set on DefaultHttpDataSourceFactory would be great else we need to build our own ExtractorRendererBuilder, HlsRendererBuilder etc to add headers after createDataSource() is done.  Thanks...Tried out implementing my own Factory and successfully able to do it, but in future it would be great if a method is exposed similar to createDataSource() in Factory.  ```
java.lang.IllegalStateException
Warning: #EXT-X-ALLOW-CACHE has been deprecated
trackGroupsAdaptive = new boolean[trackGroups.length];
Subtitles format CEA-608
- the target was live TV streams, that's why it has a deinterlace filter
@goffioul  Thanks for sharing the code and the instructions. I'm very interested in this idea. My work is busy too. We use exoplayer in our project currently. Hopefully I can persuade my boss to support my idea so i can put my time on it.   Hi,
- The player goes wrong when a particular chunk (Video = 57949600000) is downloaded with the highest profile (QualityLevels (7000000))
I think could be related with these issue:
Caused by: java.lang.IllegalStateException: Top bit not zero: -1418831960
Marco
`https://zippy.gfycat.com/ForsakenRedAllosaurus.webm`
I hope to be able to play wma in Exoplayer.
at com.zeasn.hungama.player.WidevineEpsMediaDrmCallback.executeProvisionRequest(WidevineEpsMediaDrmCallback.java:108)
#EXTM3U
And when a stream is chosen, the you get this:
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:275842
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
#EXTINF:12.000,
Content-Type: video/MP2T
`Tracks [
]` Yes it is in an MKV.  If I use MKV ToolNix I can see the difference (that's how I confirmed I wasn't just feeding it bad data).
Satyanarayana G,
SubripSubtitle.java
It could play too in exoplayer by tiny fix:
It is really strange issue, since is happening just on this device with Mobile Data on. I tried to make hotspot from the device and connected to another, and on the other device the stream was working.
12-14 18:38:22.078 8704-9506/com.monsterbutt.homeview W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 14 failed: -1010
12-14 18:38:22.079 8704-9506/com.monsterbutt.homeview W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 13 failed: -1010
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:64.333
http://ohfng5qj9.bkt.gdipper.com/loco_1_video_51000_0.ts
#EXTINF:60.000
http://ohfng5qj9.bkt.gdipper.com/loco_1_video_51000_1.ts
#EXTINF:60.000
#EXTINF:60.000
#EXTINF:60.000
#EXTINF:60.000
#EXTINF:60.000
#EXTINF:5.100
![capture](https://cloud.githubusercontent.com/assets/489129/20708689/7760bafc-b631-11e6-8c3f-66d1e50eba54.JPG)
As you can see on the screenshots I do have my own `PodcastMediaCodecRenderer` class, but I also tried to remove it from the player, and still had the same issue.
@ojw28 cool,Thanks!
@ojw28 Sorry for troubling you again.
OR
- Device
HikariBox 2000
- Log
- Others
6. Unhandled exception thrown
"uri": "http://poc-wv-modular-drm.ci.extranet.ugo-ife.com/afterearth.mpd",
"drm_scheme": "widevine",
Unexpected exception loading stream
Moacir Hi,
Moacir Thanks for the quick analysis!
Moacir Thank you, indeed it worked.
Moacir  Dear ExoPlayer team,
I'm not sure why that's the case. Are there plans to add seeking for mpeg-ts in the future? If not, could someone give me some info on how I might approach adding support myself?
java.lang.IllegalStateException
We try to understand why we have this behavior. We experience it both with Exoplayer 2 and Exoplayer1.5.12
Adb Logcat :
Anyone have any ideas or pointers on what to investigate? Good shout! I tried playing other m3u8 streams, as we'd only ever stream HLS, not MP4. The issue persists when switching between the following streams as well:
https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8
Is there an easy way for me to know how far away the next keyframe is while playing? @botondbutuza , have you tested the same assets with same version if Exoplayer on devices having Android 5.0 or lower version.
> although I doubt Timer is the right thing to use here
@Override
// this is not accurate
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:98)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at android.os.HandlerThread.run(HandlerThread.java:61)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at com.google.android.exoplayer2.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at com.google.android.exoplayer2.upstream.Loader$LoadTask.run(Loader.java:295)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
11-19 15:25:49.239 19567-19567/com.rebelappz.k9radiopro W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
String id = Build.ID; // "MASTER" or "M4-rc20"
else
bb.limit(buffer.limit());
bb.put(buffer.get(i));
I am wondering what is the purpose it is designed for?
Any clue which value could be illegal or how to debug it?
If I want to embend a video inside a custom view you can have a custom AspectRatioFrameLayout and use <merge> in the view xml. @ojw28 I have a custom view (FrameLayout) where I inflate the view with the `AspectRatioFrameLayout`, so my Idea was to use `<merge>` inside the layout and make my custom view `AspectRatioFrameLayout` so it have less nested views.
Instead of
For every item!
Audio:
Channels:Stereo
version : exoplayer:r2.0.4
#EXTM3U
#EXT-X-ALLOW-CACHE:NO
#EXT-X-MEDIA-SEQUENCE:4386
#EXTINF:4,
#EXTINF:4,
#EXTINF:4,
#EXTINF:4,
**And this is my error**
| held mutexes=
On Fri., 18 Nov. 2016 at 4:25 pm, ojw28 notifications@github.com wrote:
>   time? That looks a little suspicious to me.
>   prio=5 tid=39 Native which is blocked in
> https://github.com/notifications/unsubscribe-auth/ABFvuQFia2mwY7GeiJihxlCaF9RaZGSVks5q_WETgaJpZM4KwuCK
} catch (InterruptedException e) {
On Fri., 18 Nov. 2016 at 5:41 pm, ojw28 notifications@github.com wrote:
Process: net.novacio.villagesquare, PID: 18788  java.lang.NoClassDefFoundError: com.devbrackets.android.exomedia.core.exoplayer.EMExoPlayer
"file:///storage/emulated/0/IPTV/arynews_20160915_2046_155.ts"
How's it possible?
#EXTM3U
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:35156
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
#EXTINF:5,
http://wmfe.iad.streamguys1.com/wmfe.m3u
no, still not normal end
"-strict", "experimental", "-s", resolution, "-r", "25",
"-vcodec", "mpeg4", "-b", "1000k", "-ab", "48000", "-ac", "2",
Log is here:
D:       [X] Track:0, id=null, mimeType=audio/mp4a-latm, channels=2, sample_rate=44100, language=und, supported=YES
I: MuxOMX ctor
I: MuxOMX ctor
Hi AlirezaGhanbarinia,
Mohsin You can use
if (earlyUs < -30000) {
} catch (IllegalAccessException e) {
@Override
@Override
@Override
@Override
else
http://bigrradio.cdnstream1.com/5218_128?cb=809148.mp3
1. Load m3u8 at time t.
#EXT-X-MEDIA-SEQUENCE: 1000
2. Load m3u8 at time t+delta.
#EXT-X-MEDIA-SEQUENCE: 1001
Log:
@ojw28  @Xanderrr Thanks for your replay. But the main issue is, as mentioned, it works fine with old library i.e. r1.5.9 but fails to do so on r2.0.4!!
Tracks [
This is a device specific issue, the workaround works for my case, maybe not for others.
> Color space                    : YUV
> Compression mode               : Lossy
> Audio
> Format/Info                    : Advanced Audio Codec
> Bit rate mode                  : Variable
> Compression mode               : Lossy
http://cdn02.duolebo.com/HLS_jiayou02_149431L_ren/2200/jiayou02_149431L_ren_2200.m3u8
o	chunk type (video, audio, text)
o	chunk index
o bitrate
- There are some logs here:
major_brand     : isom
compatible_brands: isomiso2avc1mp41
encoder         : Lavf57.56.100
However, we're now trying with a completely different encoder & this time HEVC 4K. Same issue - Everything plays fine in 1.5.7, but only audio plays back in 2.0.4.
This is good news for me, @ojw28  when you do think r2.0.5 will be available?
Hello @ojw28  any news on my issue
for vtt formatt and
@wilkenas Just be curious, how did you do this
Ether is broadcast on http, archive by nPVR.
There are several streams with parameters:
Devices having the issue:
@wvpaf We've tried with a reprocessed version of the same content, with and without protection. It works properly without protection, so we think is some specific issue with the DRM.
Hi @wvpaf , we have an update on this.
@wvpaf any update about this issue?
Hi @wvpaf
Thank you very much Did you try using Level 3 security?
> Hi again @wvpaf we are still facing this issue and it's blocking us very hard. It seems OEM hasn't release the fix yet... We are running all options here and it would be very useful for us if you can tell what the fix consists of. I mean what was the bug about and how did they fix it.
Trying to force to level 3 on all devices listed on top (ones with exynos) will lead to this exception
```java
https://pan.baidu.com/s/1slnKXrv
below is the adb log:
10-26 18:07:33.936 32300-32320/com.twos.demo D/libEGL: loaded /vendor/lib/egl/libGLES_mali.so
10-26 18:07:33.963 32300-32320/com.twos.demo D/mali_winsys: new_window_surface returns 0x3000
@ojw28, so currently, is there a way to have ExoPlayer always try and play the stream in this case ?
@ojw28
Change surface in different textureview is not stable, maybe faild.
I've attached two images showing abnormal behavior in exoplayer and one image in where we can see the desired behavior in a spuul android app.
**spuul tv app image:**
@ojw28
issue is device specific, I've tried others players also, but still the
On 27-Oct-2016 4:22 pm, "ojw28" notifications@github.com wrote:
@Override
3. below is the adb log:
10-26 18:07:33.936 32300-32320/com.twos.demo D/libEGL: loaded /vendor/lib/egl/libGLES_mali.so
10-26 18:07:33.963 32300-32320/com.twos.demo D/mali_winsys: new_window_surface returns 0x3000
3. below is the adb log:
10-26 18:07:33.936 32300-32320/com.twos.demo D/libEGL: loaded /vendor/lib/egl/libGLES_mali.so
10-26 18:07:33.963 32300-32320/com.twos.demo D/mali_winsys: new_window_surface returns 0x3000
E/ACodec: [OMX.google.h264.decoder] ERROR(0x80001001)
E/ACodec: signalError(omxError 0x80001001, internalError -2147483648)
java.lang.IllegalStateException
java.lang.IllegalStateException
Hyowon
W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc
mediaUri,
if (null != subtitleUri) {
subtitleUri,
exo version:2.0.4
"name": "youku",
Log:
10-28 14:36:07.297 14028-15682/com.google.android.exoplayer2.demo D/ACodec: @debug: useBuffer[3], mBufferID(0x45c1acd0)
Also - what encryption pattern is suuported - cbcs or cbc1?
E/ACodec: Unable to instantiate decoder 'CIPAMRNBDecoder'.
`onPlayerError: Unexpected exception
After 10 milli seconds the following exception occured:
http://ac-pk3qanow.clouddn.com/8614cf7d18c67f009d37.mp4
Here is exoplayer version:
@ralphpina Interesting, I'm working on [a library](https://github.com/eneim/Toro) which has a pretty close concept with you. Can you give it a comment? Your way of implementing the VideoPlayer has both pros and cons (I would not say mine is better/worse :D, it is actually not a good way and I will change it in the future), I would like to learn from it a bit.
@ralphpina I agree about the abstraction, that was my intent. I have just finish almost 90% of my 2.1 specification (not 2.0 >.<). Yeah I will focus on ExoPlayer 2, and base on it to form my library direction :D.
I've signed cla, but the label is still 'no'.
Is something wrong with decoder?
http://hungcomiosta-vh.akamaihd.net/i/VideoS3/r/ms2/20673450/4/1235/Purza_,32001,64001,96001,128001,196001,.mp4.csmil/master.m3u8?hdnea=exp=1485516786~acl=/i/VideoS3/r/ms2/20673450/4/1235/*~hmac=2b5df3f5fbde1b2634dcffdaf91e6f938aee14a8758552f2520f83e42a348fe6
http://hungcomiosta-vh.akamaihd.net/i/VideoS3/r/ms2/20673450/4/1235/Purza_,32001,64001,96001,128001,196001,.mp4.csmil/master.m3u8?hdnea=exp=1494853477~acl=/i/VideoS3/r/ms2/20673450/4/1235/*~hmac=f4cd1210a77c7b6d3bdeac91fe17377fbf02f72ce7770fbd42dbfab06c505252
Hello @ojw28. Below are our responses:
This is probably device specific issue.
Only for this device I get the error after orientation change.
java.lang.IllegalStateException
@ojw28 from http://keepachangelog.com/en/0.3.0/ they mention:
Its a mess. All these names only makes it harder for people to find it.
`@Override`
**Exception:**
java.lang.IllegalStateException
final String url = " http://media.rawvoice.com/afrojack/media2-afrojack.podtree.com/media/podcast/Afrojack_-_JACKED_Radio_259.m4a"
@shikha7763 does your last manifest contain the #EXT-X-ENDLIST Tag on the last row?
@ojw28 i am using Wowza cloud for live streaming. where i can find this #EXT-X-ENDLIST Tag.
https://bintray.com/google/exoplayer/download_file?file_path=com%2Fgoogle%2Fandroid%2Fexoplayer%2Fextension-okhttp%2Fr2.0.3%2Fextension-okhttp-r2.0.3.pom
<packaging>aar</packaging>
codecs="avc1.4D4029"
<!-- Widevine -->
<!-- Marlin -->
<mas:MarlinContentIds>
<mas:MarlinContentId>urn:marlin:kid:26af8834476648b485628c3f31343b9d</mas:MarlinContentId>
</mas:MarlinContentIds>
initialization="cmorefsden-$RepresentationID$.dash"
codecs="avc1.42C01F"
codecs="avc1.42C01F"
codecs="avc1.4D4029"
Could someone help me to set the customized new test item please?
@Override
@Override
@Override
@Override
@Override
@Override
OMX.SEC.avc.dec
Just to add one more fact that the same as in #1152 the issue is happening only with Live streams.
It's almost double than what it should be.
Anshuman
Anshumansharma12, do you resolve that problem?  Hi,
`byte[] encryptionKey = getKey("AQEDAHh27I7ep8UA8h4ZkT7gjFnS50KkxJDdrviotvprqVDP9AAAAG4wbAYJKoZIhvcNAQcGoF8wXQIBADBYBgkqhkiG9w0BBwEwHgYJYIZIAWUDBAEuMBEEDA96RCavMQRqiSr8iwIBEIArzmvU03UeW0ZBVh2Vgiby/S8h7hW2AKklfrNpvlOW6hMSMdR5dGpNe3wC+w==");`
`byte[] encryptionIv = Base64.decode("sydcozjckA+4OYQl9wBXkg==", Base64.DEFAULT);`
But when i run it always return `Error while finalizing cipher` Exception.
`AQEDAHh27I7ep8UA8h4ZkT7gjFnS50KkxJDdrviotvprqVDP9AAAAG4wbAYJKoZIhvcNAQcGoF8wXQIBADBYBgkqhkiG9w0BBwEwHgYJYIZIAWUDBAEuMBEEDA96RCavMQRqiSr8iwIBEIArzmvU03UeW0ZBVh2Vgiby/S8h7hW2AKklfrNpvlOW6hMSMdR5dGpNe3wC+w==`
`thCW4vOEyIGjfAM3rbrwnw==`
`sydcozjckA+4OYQl9wBXkg==`
I can't find the way to make it possible to run. Can you help me.
"name": "wrong EXTINF sample",
"uri": "http://laria.space/WANG_DA_BIN/WANG_DA_BIN_02.m3u8"
I think the problem is come from this m3u8,
its `#EXTINF` tag mark every segment to be 10 seconds.
@AquilesCanta Thank you for the explanation and guidance.
Product ModelDOOV C1
And yet no answer given? both thread
We have seen errors such as:
Note that this 404 happens with the Widevine Secure HD content on HTC 10 (Android 6.0.1) as well, when setting security level to 3.  Staying in level 1 does not exhibit this issue.
10-14 16:35:47.960 5162-28776/? V/NativeCrypto: SSL shutdown failed: ssl=0x8f9cbb00: I/O error during system call, Connection timed out
@Override
@Override
I realise it's probably hard to pinpoint the cause based on the above, but I'd appreciate some tips how to proceed from here.
@ojw28 I think I got the solution. Thanks a lot.
``` Java
@niorgai Did you grant the Read Storage Permission?
@eneim yes.
Bintray and Releases URL was missing. I've fixed it ;)
Log:
java.lang.IllegalStateException
10-08 15:08:05.066 15837-6568/com.fxtv.threebears W/ACodec: [OMX.qcom.video.decoder.avc] can not return buffer 38 to native window
10-08 15:08:05.067 15837-6568/com.fxtv.threebears W/ACodec: [OMX.qcom.video.decoder.avc] can not return buffer 37 to native window
10-08 15:08:05.067 15837-6568/com.fxtv.threebears W/ACodec: [OMX.qcom.video.decoder.avc] can not return buffer 36 to native window
10-08 15:08:05.068 15837-6568/com.fxtv.threebears W/ACodec: [OMX.qcom.video.decoder.avc] can not return buffer 35 to native window
10-08 15:08:05.069 15837-6568/com.fxtv.threebears W/ACodec: [OMX.qcom.video.decoder.avc] can not return buffer 32 to native window
10-08 15:08:05.069 15837-6568/com.fxtv.threebears W/ACodec: [OMX.qcom.video.decoder.avc] can not return buffer 31 to native window
java.lang.IllegalStateException
@ojw28 I notice that in `ExtractorMediaSource`, It passes itself to a new `ExtractorMediaPeriod` in `createPeriod` but it has never been released in `releasePeriod` (see `ExtractorMediaPeriod#release()`), which I guess the cause for this issue. It can be seen that if a call to `ExoPlayer#stop()` is called before the source is prepared, it will throw an NPE.
During playback on some Widevine L1 devices (I'm testing with samsung galaxy Tabs 2 SM-T710) i get a CryptoException Error after a couple of minutes of playback with some content (not all).
Thanks @Ood-Tsen and @AquilesCanta.
@AquilesCanta We are decoding and playing H246-based HLS stream. Frankly speaking, it is hard to upgrade up to ExoPlayer V2 for now. Is it possible to make use of only some classes or functions from V2?
http://pcappvod.nexg.tv/pcappvod/v/http20/9xm/Interview_With_Singer_Aman_Trikha_1200.mp4/playlist.m3u8
To avoid unpredictable behavior in the future.
Hi @b95505017,
Dear ojw28,
- once started, select Text -> "unknown"
http://www.pitelevision.com/vods/drama-serials/Zindigikimehek/Ep-02-Zindagi ki Mehek.mp4 (Video Duration 22 minutes,  time between buffering and ready state is 6 to 8 seconds)
(Samsun Galaxy S5)
Related (kind of) to #596
@ojw28 Thanks for the link :)
HTTP-TS https://raw.githubusercontent.com/edwardaa/aaa/master/exoplay_cannot_play.ts can't play on ExoPlayer, but it can play by using android built in MediaPlayer. I tried it both on Amlogic TV box (6.0.1) and my mobile (4.4).
@gpinigin Yes, it has IDR frames.
... audio frames
pix_fmt=yuv420p
interlaced_frame=1
... audio and video frames
But this media mentioned above has IDR frame, I don't know why it can't play normally.
case C.TYPE_OTHER: return new **ExtractorMediaSource**(uri, mediaDataSourceFactory, new DefaultExtractorsFactory(), mainHandler, eventLogger); @ojw28, sorry to bother you, but do you think it's somehow possible to add an easy way to pass FLAG_ALLOW_NON_IDR_KEYFRAMES argument in ExtractorMediaSource or DefaultExtractorsFactory to avoid building complex custom ExtractorsFactory etc., since it's the only thing I have to change in the library for many TS streams to work?  Hello, I am adding ExoPlayer 2.0.1 instead of MediaPlayer, I am creating an instance of SimpleExoPlayer
@Override
10-04 09:11:14.878 9852-12092/com.google.android.exoplayer2.demo D/ACodec: sendFormatChange 1
string mime = "video/avc"
10-04 09:11:14.878 9852-12092/com.google.android.exoplayer2.demo D/ACodec: sendFormatChange 1
AMessage input-format = AMessage(what = 0x00000000) = {
string mime = "video/avc"
AMessage output-format = AMessage(what = 'codc', target = 14) = {
10-04 09:11:14.882 9852-12092/com.google.android.exoplayer2.demo D/ACodec: onStart
10-04 09:11:14.921 9852-12085/com.google.android.exoplayer2.demo D/ACodec: Now uninitialized
10-04 09:13:52.893 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31778 us
10-04 09:13:52.944 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 37368 us
10-04 09:13:52.945 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:52.979 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 32259 us
10-04 09:13:53.013 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31484 us
10-04 09:13:53.020 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.063 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 41402 us
10-04 09:13:53.066 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.101 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.131 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 29871 us
10-04 09:13:53.140 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.183 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 42989 us
10-04 09:13:53.186 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.216 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 28653 us
10-04 09:13:53.217 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.250 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31657 us
10-04 09:13:53.268 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.302 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 32809 us
10-04 09:13:53.304 9852-12496/com.google.android.exoplayer2.demo D/ACodec: queue NativeWindow
10-04 09:13:53.336 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 31885 us
10-04 09:13:53.370 9852-12496/com.google.android.exoplayer2.demo W/ACodec: native_window_dequeue_buffer_and_wait() took 30269 us
**Other problem devices**
- grape
- rk3368_box
- nexbox_a95x
How could you try it on so many devices?
Content is Widevine DASH.
Content is Widevine DASH.
Found two problems trying to Side Load TTML Subtitles using MergingMediaSource containing SingleSampleMediaSource and SsMediaSource:
Seems like this is related to TextureView.  I switched to SurfaceView and the problem went away.  Unfortunately, that's not a solution for us.
I've run into some problem about aspect ratio.
//    @Override
android:background="@android:color/black"/>
(By the way I don't know whether there is need to have a shutter, don't know what it is.)
Please, help me to keep aspect ratio corresponding to video aspect.
thank you  @ojw28
I tried different combination changing the BUFFER_SEGMENT_SIZE, VIDEO_BUFFER_SEGMENTS and LIVE_EDGE_LATENCY_MS but nothing works.
type="dynamic"
> <https://github.com/notifications/unsubscribe-auth/AKCYr0EKyAhgE2lfzNeqN7Um0nXfGc2eks5rFeufgaJpZM4KHdGL>
uri,
java.lang.IllegalStateException
java.lang.IllegalStateException
What is pseudo code, or basic concept in order to fetch DrmInitData? For instance, in case of Widevine.
chunkSource,
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
sampleStreams,
@Override
@Override
@Override
sampleStreams,
The media file I was playing was `/storage/emulated/0/netease/cloudmusic/Music/Jerry Martin - SIMnata #15.mp3`
at ornithopter.wave.exoplayer.BufferInfoDataSource.open(BufferInfoDataSource.java:29)
at ornithopter.wave.exoplayer.BufferInfoDataSource.open(BufferInfoDataSource.java:29)
Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)
at ornithopter.wave.exoplayer.BufferInfoDataSource.open(BufferInfoDataSource.java:29)
Hi @erdemguven, any chance you've had a chance to look at my submission and can offer any insight on the crash?
Hi, thanks for your interest in Cronet.
in essence, changing:
- Memory Leak.
@Override
@Override
- Observe exception attached.
Excuse me for such technical description with dive into code, I hope that you will understand the issue.
@ojw28 Thanks for reply. While preparing sample to reproduce problem on Demo app, I figured out what the problem was... Multithreading. So I was trying to get access to ByteBuffer from another thread.
Log..
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
@ojw28 Any idea to merge this?
#EXTM3U
Ah yes, you're correct - I mixed up EXT-X-MEDIA and EXT-X-STREAM-INF.
@Override
@Override
@Override
@Override
@Override
if (sampleEncrypted) {
adaptiveReconfigurationBytes);
It's like handling the getFrameworkCryptoInfo method for the device is too much. But it shouldn't. That's why we think it may be a bad implementation of the Widevine/Secure decoder stack in the Android version of the device.
Lilian.
Helle @wvpaf , yes I confirm that the M update resolved the issue on the One Plus X.
This is more a question, rather then issue.
Yes, thank you, I was talking about gradle.
Gerat job with v2 it's pure gold :+1:
com.ks.kaishustory.audioservice.MusicService.play(MusicService.java:214)
The only bit that's perhaps a bit awkward is the framerate, which I use to retrofit information of how many thumbnails are encoded in the given jpeg.
Sorry my bad English
Thanks @ojw28, would you be able to share an estimate date for the patch?
This previous and unresolved issue appears to be related:
I should also note that we want this to be in DASH rather than an mp4 because in our specific application switching time is incredibly important.
This is a very strange issue as it only appears on Nexus 5X running Android 7.0. My best guess is it is related to having several `SurfaceView`s initialised at the same time.
My case is very specific.
Conflicted with  workaround in HlsChunkSource
workaroundFlags |= TsExtractor.WORKAROUND_IGNORE_AAC_STREAM;
When playing an MPEG-DASH live stream and seeking to a certain "large" amount (for example 1 hour) before the live point the app's RAM usage increases until an OutOfMemoryError is thrown.
type:    NEW
architecture_name:    arm64-v8a
device_name:    flounder
product_name:    volantis
oem_crypto_security_patch_level:    0
request_id:    NEJEODU3MjRFOTZDQTYzRTAxMDAwMDAwMDAwMDAwMDA=
Pssh(s)
In case of the multi-period video, the expectation is that new license requests are made when the 2nd period starts, as appropriate, to obtain the new keys that are used for the 2nd period.
Thank you for your input and such a great library with wide range of capabilities.
Remote Branch:
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
On Wednesday, September 14, 2016, ojw28 notifications@github.com wrote:
The video in question is **v7-MultiDRM-SingleKey** from https://github.com/Axinom/dash-test-vectors. We tested the 1080p variant (which exhibits this issue) and the audio-only variant which played correctly. The v7-Clear video (same content, no encryption) played correctly.
Interesting. We will dig deeper.
sampleAdapter.add(new Header("FALC"));
sampleAdapter.add(new Sample("a flac sample",
"http://www.zaishuxia.com/music/files/pingfanzhilu.flac",
erdemguven, thanks! I checked the flac with metaflac and there is no SEEKTABLE. But when I try to  seek it with MediaPlayer.seekTo() , it worked.  So what's going on?
Any comments about your implementation plans? I have the 708 parser implemented, I would gladly contribute if our code changes can be aligned. (As my V1 parsing is not compatible with the current state of V2)  I have two instances of Exoplayer, first one plays a MP4 and when it finishes, it starts the second Exoplayer with the DASH content. The problem is that it crashes when the resolution of the MP4 is equal to the first representation of the DASH. In any other case, playback is fine.
java.lang.IllegalStateException
Is there some problem switching between renderers? Does someone know why with different resolutions it woks fine on any device and with the same resolution it crashes on some devices?
Exoplayer version r1.5.9
@Override
So this means this is not a bug, strange :(
for example, i seek to 26's, Actually the sound exceed 26's @AquilesCanta
@AquilesCanta http://139.129.22.188/resourceservice/mediaplay.do?resId=97647&resIdSign=1e0fc4&mediaType=3
when i play at 50's, then i seek to 26's,  actually the sound exceed 26's @AquilesCanta
@AquilesCanta so what should I do to solve this problemthanks
@AquilesCanta Do you have some idea for this ?
@Override
@Override
@Override
uri,
Here is a url and I hope you can access: http://www.zaishuxia.com/music/files/pingfanzhilu.flac
Maybe, I had a bad expression.
> On Sep 28, 2016, at 6:55 AM, ojw28 notifications@github.com wrote:
> On Oct 6, 2016, at 11:20 AM, ojw28 notifications@github.com wrote:
> On Oct 17, 2016, at 9:50 AM, ojw28 notifications@github.com wrote:
> On Oct 24, 2016, at 1:33 PM, ojw28 notifications@github.com wrote:
Heres the story on the non-standard tag variants. I based the submitted code on code I wrote many years ago, and I no longer remember what my sources were for the tags. My guess is that back in the day, some popular but now obsolete program wrote files with these alternative tags. I figured there might be files out there that use those tags, and no harm is done if we recognize them. It is an example of the Internet robustness principle https://en.wikipedia.org/wiki/Robustness_principle. FWIW, in my testing I found files in my library that were encoded by iTunes version 1.
Http://file.com?header=headervalue
Header: headervalue
i use exoplayer 1.5.6
index fabed81..13b0212 100644
"/storage/sdcard1/DCIM/100ANDRO/MOV_0010.mp4", Util.TYPE_OTHER),
Sorry for taking up your time with such a silly mistake :P
Stream stucks at the DISCONTINUITY Tag. If you view the below manifest file then the stream gets buffered until the 'wonder-woman' video and then at the end it gets stuck there.
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:3.000000
#EXT-X-BYTERANGE:29892@0
#EXTINF:2.000000
#EXT-X-BYTERANGE:24816@29892
#EXTINF:2.000000
#EXT-X-BYTERANGE:24816@54708
#EXTINF:2.000000
#EXT-X-BYTERANGE:9588@79524
#EXTINF:2.541667
#EXT-X-BYTERANGE:241956@89112
#EXTINF:1.958333
#EXT-X-BYTERANGE:193076@331068
#EXTINF:2.000000
#EXT-X-BYTERANGE:183488@524144
#EXTINF:2.000000
#EXT-X-BYTERANGE:448380@707632
#EXTINF:1.500000
#EXT-X-BYTERANGE:330316@1156012
#EXTINF:2.000000
#EXT-X-BYTERANGE:97760@1486328
#EXTINF:1.708333
#EXT-X-BYTERANGE:101520@1584088
#EXTINF:2.000000
#EXT-X-BYTERANGE:407208@1685608
#EXTINF:2.000000
#EXT-X-BYTERANGE:222780@2092816
#EXTINF:2.000000
#EXT-X-BYTERANGE:197024@2315596
#EXTINF:2.000000
#EXT-X-BYTERANGE:151528@2512620
#EXTINF:2.000000
#EXT-X-BYTERANGE:86292@2664148
#EXTINF:2.000000
#EXT-X-BYTERANGE:241204@2750440
#EXTINF:2.000000
#EXT-X-BYTERANGE:160364@2991644
#EXTINF:2.000000
#EXT-X-BYTERANGE:123328@3152008
#EXTINF:2.708333
#EXT-X-BYTERANGE:169388@3275336
#EXTINF:0.666667
#EXT-X-BYTERANGE:37036@3444724
#EXTINF:2.000000
#EXT-X-BYTERANGE:291400@3481760
#EXTINF:2.000000
#EXT-X-BYTERANGE:408712@3773160
#EXTINF:3.541667
#EXT-X-BYTERANGE:403824@4181872
#EXTINF:2.000000
#EXT-X-BYTERANGE:230112@4585696
#EXTINF:2.000000
#EXT-X-BYTERANGE:254364@4815808
#EXTINF:1.291667
#EXT-X-BYTERANGE:118440@5070172
#EXTINF:2.000000
#EXT-X-BYTERANGE:219584@5188612
#EXTINF:1.583333
#EXT-X-BYTERANGE:75576@5408196
#EXTINF:1.708333
#EXT-X-BYTERANGE:68808@5483772
#EXTINF:2.125000
#EXT-X-BYTERANGE:189128@5552580
#EXTINF:1.958333
#EXT-X-BYTERANGE:157168@5741708
#EXTINF:2.125000
#EXT-X-BYTERANGE:442176@5898876
#EXTINF:1.750000
#EXT-X-BYTERANGE:123892@6341052
#EXTINF:2.000000
#EXT-X-BYTERANGE:152092@6464944
#EXTINF:2.625000
#EXT-X-BYTERANGE:181984@6617036
#EXTINF:2.000000
#EXT-X-BYTERANGE:105656@6799020
#EXTINF:2.000000
#EXT-X-BYTERANGE:104340@6904676
#EXTINF:1.958333
#EXT-X-BYTERANGE:371864@7009016
#EXTINF:2.208333
#EXT-X-BYTERANGE:553848@7380880
#EXTINF:2.000000
#EXT-X-BYTERANGE:187248@7934728
#EXT-X-DISCONTINUITY
#EXTINF:0.321668
#EXT-X-DISCONTINUITY
#EXT-X-DISCONTINUITY
#EXTINF:2.171666
#EXT-X-DISCONTINUITY
#EXTINF:1.875000
#EXT-X-BYTERANGE:122200@7007700
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:110732@7129900
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:1.416667
#EXT-X-BYTERANGE:86480@7240632
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:161116@7327112
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.416667
#EXT-X-BYTERANGE:626416@7488228
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.333333
#EXT-X-BYTERANGE:89300@8114644
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.375000
#EXT-X-BYTERANGE:279744@8203944
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:0.166667
#EXT-X-BYTERANGE:1504@8483688
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:245904@8485192
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.833333
#EXT-X-BYTERANGE:423752@8731096
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:1.166667
#EXT-X-BYTERANGE:359080@9154848
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.083333
#EXT-X-BYTERANGE:424316@9513928
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:1.875000
#EXT-X-BYTERANGE:502336@9938244
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:3.041667
#EXT-X-BYTERANGE:632808@10440580
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:1.166667
#EXT-X-BYTERANGE:95880@11073388
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.916667
#EXT-X-BYTERANGE:1207524@11169268
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:1.875000
#EXT-X-BYTERANGE:541252@12376792
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:64296@12918044
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:201160@12982340
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.833333
#EXT-X-BYTERANGE:245716@13183500
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:218644@13429216
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:165816@13647860
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:195520@13813676
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:157356@14009196
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:2.000000
#EXT-X-BYTERANGE:120132@14166552
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
#EXTINF:0.291667
#EXT-X-BYTERANGE:2444@14286684
http://10.0.2.2:3030/editor/rogueone-tsr1_a720p_video.ts
Hi, Pedro,
3.4.17.  EXT-X-VERSION
2) Interestingly, y'day I encountered EXT-X-DISCONTINUITY @ the beginning of a growing live playlist.
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:1418
#EXT-X-DISCONTINUITY
#EXTINF:0.033,
#EXTINF:6.006,
#EXTINF:6.006,
i met another exception.
And I just happened to find some corner-cases that needed some explanations.
1. Download shaka-packager(https://github.com/google/shaka-packager) and build it.
mkdir shaka_packager
cd shaka_packager
ninja -C out/Debug
2.Get a video (huoguo.mp4) and change it to widevine protection, using command:
cd ~/shaka-packager/src/out/Debug
./packager input='huoguo.mp4',stream=video,output=huoguoen.mp4  \
--signer "widevine_test" \
--input "huoguoen.mp4.media_info" \
--output "huoguoen.mpd"
Finally, huoguoen.mp4 and huoguo.mpd can be generated.
And huoguoen.mp4 can playback well at first 10s using pre-installed video player(without a widevine license server url).
adb shell
adb push /path/to/huoguoen.mp4 /sdcard/www/
adb push /path/to/huoguoen.mpd /sdcard/www/
Then, use another phone (marked as phone2) to playback the video huoguoen.mp4.
Using phone2's browser, we input and goto http://192.168.1.2/huoguoen.mp4.
"http://192.168.1.2:8080/huoguoen.mpd";
new Sample("huoguoen1", "3031323334353640", "widevine_test",
----huoguoen
----huoguoen1
click the huoguoen or huoguoen1, the palyer can be display.
http://pan.baidu.com/s/1c2gGVPe
Exoplayer version:
08-31 10:15:02.169 16172-16400/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display_, void_, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format_, EGLBoolean) returns 0x3000
08-31 10:15:03.216 16172-16400/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display_, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000
twice more:
08-31 10:18:05.210 16172-16400/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display_, void_, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format_, EGLBoolean) returns 0x3000
08-31 10:18:06.722 16172-16400/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display_, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format_, EGLBoolean) returns 0x3000
08-31 10:18:08.333 16172-16400/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display_, void_, EGLSurface, EGLConfig, egl_winsys_surface__, egl_color_buffer_format_, EGLBoolean) returns 0x3000
I tried the original video huoguo.mp4 using exoplayer, and it playback well.
Then I tried the video huoguoen.mp4, there has an error:
08-31 15:19:48.809 21528-21552/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display*, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000
It indicates that the huoguoen.mp4 is a video protected with drm.
09-01 16:18:32.371 4384-4426/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display*, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000
09-01 16:18:33.887 4384-4426/com.example.jieyingli.exoplayerdemo D/mali_winsys: EGLint new_window_surface(egl_winsys_display*, void*, EGLSurface, EGLConfig, egl_winsys_surface**, egl_color_buffer_format*, EGLBoolean) returns 0x3000
08-29 19:17:52.772 430-656/ E/ACodec: [OMX.google.h264.decoder] ERROR(0x80001001)
java.lang.IllegalStateException
Is this way of representing a media common ?
If so, is there a way to get around this ?
http://viacomitalytest-lh.akamaihd.net/i/sbshdlive_1@195657/master.m3u8
@AquilesCanta all my changes are available in a fork here https://github.com/jonasevcik/ExoPlayer/tree/startover (everything originating from the dev-v2 branch)
@AquilesCanta
The trouble lies in HlsChunkSource in this loop:
if (offsetToLiveInstantSecs < 0) { //trouble maker
@AquilesCanta Thanks for the update, that will be very helpful for us.
@AquilesCanta Yes, the issue still remains in r2.0.2
@binhbt
ExoPlayer code being tainted by LGPL code.
> CLA, please clarify. Thanks!
> <https://github.com/notifications/unsubscribe-auth/AJ99vwpL61AKCLAJOoh6P7spwBGoyI3jks5rM733gaJpZM4Jt1YP>
From: ojw28 <notifications@github.com>
|| APPLICATION_EMSG.equals(mimeType)
operation of character coded subtitles. A local agreement would probably define the characteristics of the font
/* process PES PACKET. ETSI EN 300 743 7.1
Here's a link to some sample hex-encoded payloads I pass in: https://www.dropbox.com/s/x6zmysai2o8aqwr/dvbsub-payloads.txt?dl=0
case SCT_DVBSUB:
buf4[2] = ssc->ssc_ancillary_id >> 8;
encoder         : Tvheadend Matroska muxer
(EDIT: I can't test it myself until i'm back in home again) @kiall , your sample works without problems and due that it uses more features of the DVB subtitle standard it is actually exercising parts of the code for the first time, I have seen some artifacts that I will have to deal with:.
I'll blame the emulator! :) @kiall ,If you are using your own player, make sure that the subtitles are of the right size, in the latest patches I finally added the PAR calculation, but if you do not pass the SAR it will assume that the subtitles are FHD (if you are using the new height formulae or the same SAR as the video if not) and most of the text will be offscreen @ojw28 , I finally fixed the last remaining bug, tomorrow I will try to clean the patches and do some optimization work. But there is one issue remaining, I dont know if the subtitle timeout (clear the last subtitle if no other subtitle arrives) should be implemented in the subtitile decoder (injecting an empty subtitle) or it should be done in the subtitle renderer (thus making this feature available to all the subtitles decoders) One bug less, testing the patch in all our IPTV channels we found some channels with missing subtitles, the affected channels had HD DVB subs and therefore used some subtitles segments not tested until now. The problem is solved and we now have beautiful HD subtitles. The optimization work is more needed than ever so instead of having lots of full screen buffers I will try to migrate to a subtitle with a Cue per region. @AquilesCanta , we are now feature complete, we have tested against streams of multiple broadcasters and the decoder seems to work properly in all cases but more testing will be welcomed. In the meantime I will continue with the cleaning and optimisation work. @tresvecesseis , thanks for your work implementing DVBSUBs support.
Questions:
`E/ACodec: [OMX.google.mp3.decoder] ERROR(0x80001001)`
`Caused by: java.lang.IllegalStateException` @aarondib , thanks for the testing. I will look into the 2.3.0 problems.
encoder         : Tvheadend Matroska muxer
Input #0, matroska,webm, from 'The Big Bang Theory.mkv':
encoder         : Tvheadend Matroska muxer
[ ] Track:0, id=1/68, mimeType=application/dvbsubs, language=pol, supported=YES
But when opening another sample with x-subrip subtitles, the first track is selected and activated by default:
[X] Track:0, id=4, mimeType=application/x-subrip, language=rus, supported=YES
[ ] Track:0, id=5, mimeType=application/x-subrip, language=rus, supported=YES
[ ] Track:0, id=8, mimeType=application/x-subrip, language=spa, supported=YES
// This is an edge case where the renderers are built, but are still being passed to the
Does this edge case still hold true?
escreveu:
> encounter strange behaviors(specially regarding live content). The bug
# EXT-X-STREAM-INF:BANDWIDTH=1813682,CODECS="avc1.66.31,mp4a.40.2",RESOLUTION=720x1280
It's the problem that there is no standard for vertical video.
Converting width & height is also a kind of this problem.
I'm thinking It's... it's a little complicated... :(
SHV-E330S, MyPhone_MY28S, MyPhoneMY27, GT-I9500, D450, Flare_J1, A74A, AS8, and so on...
- Paint-on/Roll-up captions are not being drawn correctly
To address the issues:
Bad news: 708 will complicate things much more :)
@zsmatyas
I am getting this error only on Samsung Galaxy S4 (5.1) among devices that I test on (TESLA Tablet 785 (4.2.2), S3 (4.4.2), LG G3 (6.0)).
java.lang.IllegalStateException
Just a thought about toast, isn't it better to throw meaningful exception so we can handle it ourselves?
java.lang.IllegalStateException
I have tried to streamming m3u8 with the link
java.lang.IllegalStateException
Thanks Ojw :D
@wvpaf Thank you for your response.
@wvpaf is there any detail from Samsung?? Approximately 70% of users in my service use samsung devices (in API >= 23) and they'd like to play video faster/slower. So, it is a quite serious problem for my service... Thanks! @wvpaf @ojw28 Android Nougat Update for S7 solve this issue! I checked it, however, Galaxy Note 5, Galaxy S6 or other samsung devices seem to have the same issue yet. I guess...samsung will solve this issue with Nougat update for each devices.   Hello, I just have a question about the design of MediaPresentationDescriptionParser. When reading the code, I found the function buildFormat [here](https://github.com/google/ExoPlayer/blame/706c6908ec57005044f4b4a9f5b80266cad9eda3/library/src/main/java/com/google/android/exoplayer/dash/mpd/MediaPresentationDescriptionParser.java#L409). It appears the only thing it is doing is to do a `new Format`, why not remove this function and put the `new Format` directly in the callsites? Is this considering potential extensions to this function? What potential extensions are considered?
this is an example of Urls:
Full Bug Report : http://stagecms.vcu.tv/bc/temp/ytplayercrash.txt
08-21 05:57:35.010 9084-9442/com.example.aguru.myapplication7 E/ExoPlayerImplInternal: Internal track renderer error.
08-21 05:57:35.010 9084-9418/com.example.aguru.myapplication7 E/VCULog: internalError [0.20, decoderInitializationError]
java.lang.IllegalStateException
Actually, codec/player/device has been working okay for last 6 to 8 months on the device using the same version of Exoplayer this is a random crash that happened only once a month maybe ? it is not just HEVC codec even the AVC codec used by the Android YT player stops playing video once this crash occurs...
Can you tell me what's the reason for that error, please?
android:background="@android:color/black"/>
(Sorry for my bad English)
Audio
Format : AC-3
Codec ID : A_AC3
Compression mode : Lossy
Here's the full adbbugreport
[adbbugreport.txt.zip](https://github.com/google/ExoPlayer/files/421205/adbbugreport.txt.zip)
@Override
@Override
@JaseElder can you check if that's your problem too?
if (previousTsChunk == null) {
After much more server-side trouble shooting, I fired up ADB, proxied through my desktop and started watching the traffic. Everything was working perfect until the application went into the background. MADEUREKA:
I agree that this all sounds preposterous. To clarify, the service is started by an activity using context.startService( serviceIntent ). The service then begins playing with a startForeground call and the notification is put in the status bar. I can see the notification at all times.
Could the player be holding a thread reference that is not considered foreground somehow? Is there anything else I can test to troubleshoot this issue? I am really really perplexed, to say the least!
@gte619n Did you and your team find a resolution to this?
Nexus 5
java.lang.IllegalStateException
@ojw28 I can see that you've been very active on this subject, do you have any advice?
Anshuman
And i find Media Format file and change value
- Android 4.4.2 on a SoftWinner tablet (build mars_a31s-eng 4.4.2 KOT49H 20150326 test-keys).
Build: mars_a31s-eng 4.4.2 KOT49H 20150326 test-keys
Active(anon):     212024 kB
Unevictable:        9536 kB
Mlocked:               0 kB
Dirty:               300 kB
AnonPages:        211992 kB
Shmem:               404 kB
344   344  2   0% S      0K      0K     root     khubd
748   748  0   0% S      0K      0K     root     fantasys
Hi @wvpaf,
Christiaan
@wvpaf I was wondering if you had the time too look into my comments?
Christiaan
Hi @wvpaf,
Christiaan
``` @Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
# EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="bipbop_audio",LANGUAGE="eng",NAME="BipBop Audio 1",AUTOSELECT=YES,DEFAULT=YES
# EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="",DEFAULT=YES,AUTOSELECT=YES,FORCED=NO,LANGUAGE="ja",URI="subtitles/jpn/prog_index.m3u8"
# EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME=" (Forced)",DEFAULT=NO,AUTOSELECT=NO,FORCED=YES,LANGUAGE="ja",URI="subtitles/jpn_forced/prog_index.m3u8"
#EXTM3U
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="bipbop_audio",LANGUAGE="eng",NAME="BipBop Audio 1",AUTOSELECT=YES,DEFAULT=YES
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="",DEFAULT=YES,AUTOSELECT=YES,FORCED=NO,LANGUAGE="ja",URI="subtitles/jpn/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME=" (Forced)",DEFAULT=NO,AUTOSELECT=NO,FORCED=YES,LANGUAGE="ja",URI="subtitles/jpn_forced/prog_index.m3u8"
// Exception 1
// Exception 2
My English is very bad, please forgive me.
clearInputStream = new CipherInputStream(new FileInputStream(file), mCipher);
Unexpected exception loading stream
**Code version:**
I have tried to play hevc content.
Even Android MediaPlayer can play hevc content in Android 4.4.4.
type="dynamic"
On Tue, Aug 2, 2016 at 2:44 PM, ojw28 notifications@github.com wrote:
https://www.dropbox.com/s/20yqtpwetuz5db0/subtitles.srt?dl=1
**A description of the issue :**  Subtitles style is not always rendered correctly.
subtitlesLayout.setFractionalTextSize(captionFontScale);
![subtitles1](https://cloud.githubusercontent.com/assets/3648438/17325230/ce6cc29e-58aa-11e6-86c0-cff386a55988.jpg)
And here a custom style with the render :
subtitlesLayout.setFractionalTextSize(captionFontScale);
@TargetApi(19)
@TargetApi(19)
![subtitles2](https://cloud.githubusercontent.com/assets/3648438/17325303/264338ea-58ab-11e6-93c2-700c694326aa.jpg)
Hi @ojw28,
**Code version:**
Unexpected exception loading stream
`@Override
`@Override
Thanks @marwanf1 take a look at issue [#2097](https://github.com/google/ExoPlayer/issues/2097) and see if the [AppendingMediaSource.java](https://github.com/ascmartins/mucodes/blob/master/AppendingMediaSource.java) class can help you. In addition, to make this work for me I had to make the changes commented on  28 Nov 2016 (referred thread) AppendingMediaSource.java  is very helpfull, but exist one problem: in method appendSource you use method removeFirstMediaSource() if count of MediaSources bigger then 2. With this method nothing work. I tried to increase the max size of lists (up to 10) and items had been adding (during playing) successfully. But when i added 11-th item, it not played.  When i removed method removeFirstMediaSource(), i can adding as much MediaSources as i want, but i care about  StackOverFlow or something also. Can you help me with this?
@Override
2. Play some dash video
@ojw28 I believe this is the best place for this. There is currently zero usage how CacheDataSource works.
> https://cdn.curiositystream.com/system/Encoding/s3_ll_playlists/579215/pixeldust_thedangersofzika_eng_preview-d89004458cdf88c059b02170fa0bf009b6538acf_v4.m3u8
> I/AudioTrack: set(): 0xabc2dbe0 streamType -1, sampleRate 48000, format 0x1, channelMask 0x3, frameCount 16384, flags #0, notificationFrames 0, sessionId 0, transferType 3
> E/ACodec: [OMX.google.h264.decoder] ERROR(0x80001001)
> E/ACodec: signalError(omxError 0x80001001, internalError -2147483648)
bug in logcat and the video is not showing.
On Mon, Jul 25, 2016 at 5:49 PM, ojw28 notifications@github.com wrote:
Faculty of Technical Science Bitola
Mobile phone: 075 618 127
> On Mon, Jul 25, 2016 at 5:49 PM, ojw28 notifications@github.com wrote:
> Faculty of Technical Science Bitola
> Mobile phone: 075 618 127
Faculty of Technical Science Bitola
Mobile phone: 075 618 127
Exoplayer version used- r1.5.8.
Hello AquilesCanta,
codec_type=video
codec_tag_string=avc1
pix_fmt=yuv420p
is_avc=true
codec_type=audio
TAG:encoder=Lavf55.19.104
codec_type=video
codec_tag_string=avc1
pix_fmt=yuv420p
is_avc=true
codec_name=aac
codec_long_name=AAC (Advanced Audio Coding)
codec_type=audio
codec_tag_string=mp4a
TAG:language=rus
TAG:encoder=Lavf55.19.104
@ojw28 let me know if you like these changes. Thanks for the quick feedback!
Might fix #26, #1216, #571 .
On a Nexus 6 there's dropped frames (like a framerate at 4-5 instead of 30) and on a Samsung Galaxy Tab S2 (SM-T810) there are visible artifacts in the video.
This is the exact issue I have for encrypted content.  I created a ticket for it, but it sounds like a dupe
@ojw28
java.lang.IllegalStateException
May it be the something related to audio streaming which is improper ?
Hi, @ojw28 .
@AquilesCanta : sorry, can you please refer my update. I don't need to show while playing video/audio.
They are generated from shaka packager ( edash packager) project
https://github.com/google/shaka-packager.
My English is very bad, please forgive me
@ojw28 Thanks for the explanation!
eghttp://biubiustorage.oss-cn-shenzhen.aliyuncs.com/a7/dc/a7dc023ba53fccb5ded0be16f936266cbca10ac15e202aaa8eee30b1b8e0d048.mp4
http://www.lalalala.ca/Android_Rock.mp4
Luke
Codec ID                                 : isom
Overall bit rate mode                    : Variable
@zsmatyas @AquilesCanta Thanks guys.
What can I customise to make it switch better?
## Device
@duanyao I am interested in your solution to this problem, since I believe the problem I am having has to do with the use of intra-refresh on the stream I am trying to parse. If I could see your full solution and attempt my stream this might help me diagnose my problem further.
We are using mpeg-dash as protocol with shacka packager for live streaming. Just after the start, sometimes the video is stalled, but the audio is playing. After 1-5 seconds the scene jumps to a new position and the A and V are now synced.
I'm not sure if this is a problem in exoplayer or in the shaka packager or in the transcoding system.
With dash.js, bitmovin and shaka-player this issue doesn't exists, btw.
I have the somewhat the same issue. With the version r.2.1.1 and a jellybean device
@AquilesCanta
@AquilesCanta But class DemoPlayer does not permit doing it
@AquilesCanta
Dmitry
- When I try to reproduce an HLS multi language content in the ExoPlayer
# EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="AUDIO_192000",NAME="audio-italian",DEFAULT=YES,AUTOSELECT=YES,LANGUAGE="ita"
_S Shaik_
On Thu, Jun 30, 2016 at 7:21 AM, Erkand Imeri notifications@github.com
> Exoplayer.
here is the code which I used
- Open Demo App and Select CENC Video
### Change
This issue happens in the following devices:
Galaxy Tab2 10.1 (espresso10att)
Galaxy S3 (m0)
sugar-A10_A054
A1-830 (ducati)
Galaxy Note 8.0 (kona3g)
Galaxy Tab3 Lite (goyawifi)
Droid 4 (cdma_maserati)
Galaxy Tab2 10.1 (espresso10wifi)
@ojw28  what is the time-frame for 2.x release?
Marco
Hi @wvpaf ,
Exoplayer version: r1.5.9
- key type = MediaDrm.KEY_TYPE_STREAMING
Moacir
Moacir
Moacir
Moacir
Moacir
Moacir
2. SourceCrop (left, top, right, bottom) = (0.0, 0.0,  854.0,  366.1) is not in integer. Rare.
It can be very complicated (ffmpeg, native code, VLC) or simple with Java-only implementations like https://bitbucket.org/neuralassembly/simplemjpegview .
However, there are multiple MJPEG implementations in varying quality around.
@ojw28 is this something the project would support? If so, I will try to start the extension.
_Stacktraces_
@AquilesCanta I am trying to use the ExtractorSampleSource, but am unable to do so because the extractor is not reading the input correctly. I have looked into the issue further.
@Override
@Override
@Override
thanks for the info @Ood-Tsen , I just tried it and the delayed is definitely reduced, but I'm also getting the trash pixels at the beginning
@Ood-Tsen  i get the same problem.  does u fixed it?  Ihave This Error When run app in kitkat ??????
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to http://live.mp3quran.net:9990/;
Caused by: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to http://live.mp3quran.net:9990/;
sooory im not understand the soulation !!!!!!
@arianaa30 you're confusing mp4box and mp4client. Anyway note that GPAC mp4client does not yet support playback of SHVC on Android, only on Desktop platforms.
06-14 17:43:00.967 26826-27148/? W/AHierarchicalStateMachine: Warning message AMessage(what = 'omx ', target = 1) = {
06-14 17:43:00.967 26826-27148/? W/AHierarchicalStateMachine: Warning message AMessage(what = 'omx ', target = 1) = {
06-14 17:43:00.967 26826-27148/? W/AHierarchicalStateMachine: Warning message AMessage(what = 'omx ', target = 1) = {
Caused by: java.lang.IllegalStateException: Top bit not zero: -1751225774
Caused by: java.lang.IllegalStateException: Top bit not zero: -870374048
Caused by: java.lang.IllegalStateException: Top bit not zero: -1982918044
Caused by: java.lang.IllegalStateException: Top bit not zero: -920745276
06-14 17:43:24.875 148-27154/? W/[33;1mAmp2@@[MODULE_VDEC:VideoStatusProcess():5944]:[0m: BufferStatus: Display(Total:11,UsedByDecoder:3,FreeInVDEC:0),Reference(Total:5,Used:4),Stream(Used:14,Free:0),frameCount:645,delta=25,fps24.29,decode_stream start: 0, decoder status 5
We have noticed something unusual in the parser of the manifest XML when a change occurs in the sequence of the TAGs for video and audio.
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
Exo Player version: d7b8256e2a63b9ad3d20bec64520583a436bf716
libavutil      55. 17.103 / 55. 17.103
libavcodec     57. 24.102 / 57. 24.102
libavdevice    57.  0.101 / 57.  0.101
libavfilter     6. 31.100 /  6. 31.100
original_format : NVT-IM
comment         : CarDV-TURNKEY
comment-eng     : CarDV-TURNKEY
The audio stream does say something about **pcm_s16le**.
@ojw28: Two things,
06-10 12:58:21.753 270-270/? I/DEBUG *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
06-10 12:58:21.753 270-270/? I/DEBUG ABI: 'arm'
06-10 12:58:21.763 270-270/? I/DEBUG r4 00000000 r5 b8d2abb8 r6 b582bac4 r7 39366334
Moacir
Moacir
I work with Rini on the same team.
I am writing cusom DataSource for decryption of AES encrypted data. Help me rectify the error.
`@Override
`@Override
bytesRead = cipherInputStream.read(buffer, offset, bytesToRead);
IllegalStateException: Top bit not zero: -1136244354
The code name is OMX.ittiam.video.decoder.avc
Here is the logcat.
http://stream.peaceradio.com:8000/aacsblow
Its happening too frequently,It usually happens in mobile networks but you can reproduce the same issue by turning off the wifi and on again.
Hi @ojw28
Randeep
Hi @ojw28
Randeep
@ojw28
@ojw28
err = QueryCodec(
OK! Please try the video from 4K HEVC H.265 2160p 60Fps TV Fifa World Cup 2014
Thank you so much @brianchu and @ojw28 - that's exactly why I came here!
Thank you very much Ood-Tsen and ojw28!
Oh, that's bad. I wish at least SRD was supported. Do you know if there is any other player in Android that can support it? I need it for my PhD experiments.
@arianaa30  were you able to implement SRD feature?
private ExoPlayer player;
private TrackRenderer videoRenderer;
@Override
@Override
boolean haveAudios = false;
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
If fancy == headache, then we agree. :-)
ErrorInfo
@NoGirlFriendException
In order to avoid the following NPE:
>     05-30 17:47:58.778 28110-28191/com.andromeda.kunalbhatia.demo.hungamaplayer E/ACodec: [OMX.google.h264.decoder] storeMetaDataInBuffers failed w/ err -1010
Hello @wvpaf ,
See configuration on shaka player demo page [http://imgur.com/jcgViPI](url)
Shaka Player demo
> http://shaka-player-demo.appspot.com/demo/
> License Acquisition URL: http://wv.service.expressplay.com/hms/wv/rights/?ExpressPlayToken=AQAAAA9JKXUAAABQpmDhJoJ28mladdt6yLOM4lDNF-iNTtju2sg1hORxCWPeFxwsHBzbKXfEAWCp37i7IdwfGDXoG2IS5etnDs8ksKGnR_4Tw9j4yA-IyDeHADkCmEj-oSWeIPE1WTJnu9ypU3-SCw
@wvpaf, I've asked my team members to generate one, I'll comment soon.
Hi @wvpaf, unfortunately I'm unable to get a dash URL without spaces, the content team is taking too much time in responding. I don't have rights to do so, otherwise this wouldn't have taking this much time.
@wvpaf, @peddisri, @pgrov
`http://pcvideoyd.titan.mgtv.com/mp4/2016/zongyi/txdxqt_52216/62A9757A1712E4CBDF6DF9B8CC58F2DA_20160529_1_1_386.mp4?uuid=12d9555a04894080837b6563217cf3ed&t=574c3436&pno=1031&sign=c0ff64fb053c5ec0b1dc07bdb8147e4d&win=300&srgid=25009&urgid=632&srgids=25009&nid=25009&payload=usertoken%3dhit%3d0%5eruip%3d3227962430&rdur=21600&arange=900&limitrate=0&fid=62A9757A1712E4CBDF6DF9B8CC58F2DA&ver=0x03`
java.lang.IllegalArgumentException
Randeep
Moacir
@samkazmi @shinahran  can you please share the solution of this ?
see log
http://stitcher.pluto.tv:80/stitch/hls/channel/5268abcd0ce20a8472000114/master.m3u8?device_type=android%2CLGE%2Cmobile&device_make=android%2CLGE%2Cmobile&sid=05192016SomeRandom1
- The same master manifest works fine in Safari and couple other players.
@ojw28 thanks for that useful info. It was indeed the EXT-X-DISCONTINUITY-SEQUENCE that was confusing from the spec and taking care of it seems to have fixed the issue for us.
#EXTM3U
#EXTINF:11,
#EXTINF:11,
#EXTINF:11,
#EXTINF:11,
#EXTINF:11,
compile 'io.gresse.hugo.vumeterlibrary:vumeterlibrary:1.0.14'
Exoplayer version: 1.5.7
The #EXT-X-MEDIA-SEQUENCE flag is present in the media playlists (kcra-(b/c,d,e,f,g).m3u)
http://stitcher.pluto.tv:80/stitch/hls/channel/5268abcd0ce20a8472000114/master.m3u8?device_type=android%2CLGE%2Cmobile&device_make=android%2CLGE%2Cmobile&sid=05192016SomeRandom1
Vinod
- For Asset B, there are macroblocks observed during playback (which randomly appear around the edge of the display objects)
http://hw1.vedas.ir/hls/mp4/3q1mj9DGTjEVZoA68fuc/smil:chunk.smil/playlist.m3u8
at ir.vedas.vedas.player.ExoPlayerHlsRendererBuilder$AsyncRendererBuilder.onSingleManifest(ExoPlayerHlsRendererBuilder.java:82)
at ir.vedas.vedas.player.ExoPlayerHlsRendererBuilder$AsyncRendererBuilder.onSingleManifest(ExoPlayerHlsRendererBuilder.java:46)
at ir.vedas.vedas.player.ExoPlayerHlsRendererBuilder$AsyncRendererBuilder.onSingleManifest(TwExoPlayerHlsRendererBuilder.java:82)
at ir.vedas.vedas.player.ExoPlayerHlsRendererBuilder$AsyncRendererBuilder.onSingleManifest(ExoPlayerHlsRendererBuilder.java:46)
http://hw1.vedas.ir/hls/mp4/3q1mj9DGTjEVZoA68fuc/smil:chunk.smil/playlist.m3u8
http://hw1.vedas.ir/hls/mp4/3q1mj9DGTjEVZoA68fuc/smil:chunk.smil/playlist.m3u8
http://hw1.vedas.ir/hls/mp4/3q1mj9DGTjEVZoA68fuc/smil:chunk.smil/playlist.m3u8
Exoplayer version: 1.5.7
We are trying to play HLS m3u8 playlist with different bitrates but by every try we get "No variants selected".
libavutil      55. 17.103 / 55. 17.103
libavcodec     57. 24.102 / 57. 24.102
libavdevice    57.  0.101 / 57.  0.101
libavfilter     6. 31.100 /  6. 31.100
compatible_brands: iso2piff
and this code is throwing Error :
@ojw28 Can you please help? stuck here for couple of days... sorry for the tag.
@ojw28 Okay, I've attached `bug.txt` of emulator taken using `adb bugreport`. Real device is bit away from me now. I will upload whenever I get it in hand. Thanks.
We have provided the custom DrmSessionManager
Build MRA58K.41937_695.6426
@ojw28 The playlists do have #EXT-X-DISCONTINUITY-SEQUENCE:<d>
I do think our team is hitting the edge case described in HlsChunkSource:
and a BackgroundAudioService https://gist.github.com/moagrius/f2ca1d2d5c451d8b862304e46caf69f1
Ugly reflection for reference:
We are getting a number of ExoPlayer Exception. Some of the devices are Quanta and samsung, with OS 4.4.2.
Randeep
Thanks @ojw28
@Override
for (int i = variants.length - 1; i >= 0; i--) {
if (variantFormat.bitrate < bitrateEstimate) {
err:
@ojw28
Sergio
Hi ojw28,
error:
Frane
> # EXT-X-MEDIA-SEQUENCE:1460550399
> # EXTINF:8.312,
> # EXTINF:6.162,
> # EXTINF:9.641,
> # EXTINF:8.235,
> # EXTINF:8.005,
> ABC
> ABC
> ABC
> ABC
> ABC
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXTINF:1753.248,
We were doing a live stream that weekend and the issues @FabriceLor mentioned cropped up. Everything had worked fine 2 weekends prior with the exact same setup. UHD playback wasn't working in both 1.5.4 or 1.5.7. But at least in 1.5.4, we'd get some stuttered frames. In the end we determined that the issue was only occurring on the Samsung Galaxy devices (Note 5, S6, S7) on latest versions of Android 5 and 6. We tried the live streams on a Nexus 6p and things were fine.
I just ran a few more tests on the following devices:
We've generally never had problems with UHD DASH on these devices with ExoPlayer. So I suspect something in the latest version of either the Android OS or ExoPlayer is incompatible with these devices?
Also, I'm a little confused why you set buffer = resampleBuffer, and then allow
000000000   01 95 1D 2E 47 40 00 10 00 00 B0 11 00 00 C1 00 00 00 00 E0 1F 00 01 E1 00 23 5A AB 82 FF FF FF   ....G@...............#Z.
000000192   01 95 22 24 47 41 00 30 15 00 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF 00 02   .."$GA.0....
000000256   4D 56 FF 1B 57 3F 31 08 00 00 00 00 F0 00 00 01 82 F1 00 F0 00 A4 6E A1 2F FF FF FF FF FF FF FF   MV.W?1...........n/
000000288   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF   
000000416   00 03 00 38 6D FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF   ...8m
000000576   01 95 28 C0 47 10 01 20 B7 10 00 00 AC DE 7E 70 FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF   ..(G.. ...~p
000000736   FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF   
another m2ts file:http://download1655.mediafire.com/x9vxw78itlbg/muj20yyjdqi/Babylon+A.D.M2TS
<th>32-bit <a href="/wiki/Big-endian" title="Big-endian" class="mw-redirect">BE</a><br>
'10' <small>(0x80)</small> = Scrambled with even key<br>
'11' <small>(0xC0)</small> = Scrambled with odd key</p>
@ojw28 @uplusplus A small patch to add the M2TS support.
It will be gorgeous if somebody writes such code.
@ojw28
hash 92a98d1ce2a27266fa69927235929f45678aac40
Oscar
http://www.quirksmode.org/html5/videos/big_buck_bunny.mp4
@ojw28 Ok no problem. Thanks man.
@ojw28  Thanks.
What's the logic in onTransferEnd anyway?
Thanks @ojw28 . I guessed this reason - but was curious to know how were these specific numbers were decided? Did the team do some kind of stream analysis? Anyways, thanks for the answer.! Really appreciate it.
@ojw28 Thanks for the response.
Hi Zsmatyas,
@wachiu
@AquilesCanta Thanks. I will verify the fix as soon as possible. For the test streams, I don't have them with me right now.  Hello,
Seems to me it's a PEBCAK error in this case (me).    Thanks for the quick tip @ojw28, not sure why I didn't see that before (facepalm).
3.4.0-gbaedb01
Some of the devices giving me this error.
@wvpaf  Secure Boot is enable in my device.
build.board: bullhead
build.cpu_abi: arm64-v8a
build.cpu_abi2:
build.hardware: bullhead
build.product: bullhead
version.codename: N
http://hls8.webcamera.pl/babki_dvr/babki_dvr.stream/playlist.m3u8
I have the same problem with DemoPlayer with latest 1.5.7 version, it happens on that stream http://144.76.3.3:1935/live/bvntv_aac/playlist.m3u8
@Override
Here are some examples of the other exceptions I am seeing
private SeekBar seekBar;
private ExoPlayer exoPlayer;
@Override
@Override
@Override
@Override
@wvpaf thanks for this feedback. Our company is part of CWIP program.
Hi Olly,
10x
Gilad
java.lang.IllegalStateException
java.lang.IllegalStateException
Abhilash
Abhilash
The Wowza version is 4.4.1, locally hosted.
this timeline causes the error.
@Override
transform(bb);
else
@AquilesCanta sent
@AquilesCanta ok, but
@AquilesCanta so far I found that this bug is device specific . This device have many issues with exo player and some of them are very strange like [this](https://github.com/google/ExoPlayer/issues/1411)
Error as following:
@AquilesCanta Thank for the information
but they don't seem to directly coincide with the problem. I just mention them because they are the only thing unusual that came to my attention...
@ojw28: Excellent - that indeed solved the problem! Thank you so much!
#EXTM3U
#EXT-X-MEDIA:TYPE=AUDIO,GROUP-ID="bipbop_audio",LANGUAGE="eng",NAME="BipBop Audio 1",AUTOSELECT=YES,DEFAULT=YES
#EXTM3U
@AquilesCanta Yes it will play through once fine, with a tiny bit of lag in the last second. But it cannot be replayed, it never reports state 5 via `onPlayerStateChanged(boolean playWhenReady, int state)`. Because of this I can't represent the user with a replay button.
@Override
3.4.0-gbaedb01
Some of the devices giving me this error.
@Override
@Override
EOF exception when i try to play this track.
Format : AVC
Format/Info : Advanced Video Codec
Format settings, CABAC : Yes
Audio
Compression mode : Lossy
I have found these logs : I was trying to play widevine sample given in exoplayer
3.4.0-gbaedb01
Some of the devices giving me this error.
Is it somehow possible to manually control how the video is scaled in a SurfaceView ? What I have in mind is having something like a [letterbox](https://en.wikipedia.org/wiki/Letterboxing_%28filming%29) format but that could switch to [VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING](http://developer.android.com/reference/android/media/MediaCodec.html#VIDEO_SCALING_MODE_SCALE_TO_FIT_WITH_CROPPING) when the SurfaceView is collapsed.
Hi @brianwernick, I don't really want to use a TextureView unless you have significant data showing that it does not hurt the battery too much (see https://github.com/google/ExoPlayer/issues/1084).
Thanks @ojw28.
@ojw28 Any update? Thanks.
The Wowza version is 4.4.1, locally hosted.
Rodrigo
@igo88 I had some workaround with header. In my case I had to change them on fly. So you can modify [this method](https://github.com/google/ExoPlayer/blob/master/library/src/main/java/com/google/android/exoplayer/upstream/DefaultHttpDataSource.java#L384) . All connecting go through it
I am only starting to understand the functioning of exoplayer so please point me the right direction if I have misunderstood anything.
I am still trying to Grasp the basics of ExoPlayer so forgive me if this is a silly question.
This leads to an internal state exception, though.
java.lang.IllegalStateException
java.lang.IllegalStateException
java.lang.IllegalStateException
java.lang.IllegalStateException
I am trying to render the following .srt file which is in turkish language
http://akamai227.tibo.tv/top227/ngrp:top.stream_all/manifest.mpd
we have also reported this weird behaviour before, it appears to be related
El 6 abr. 2016 12:17 p. m., "ojw28" notifications@github.com escribi:
> DASH case (although it's not really the same problem). I'll have a look.
This is the case for different types of content....HLS VoD, HLS Live, DASH....
Thanks ojw28.
Alternately, if you can think of an alternate way to accomplish this same goal, we'd be more than willing to explore that path.
We need this functionality for live HLS playback, but I imagine it'd also make sense for DASH or SS.  Is there a different callback that could be used to handle all the cases?
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:1
#EXTINF:10,
#EXTINF:5.6,
#EXT-X-DISCONTINUITY
#EXTINF:10,
#EXTINF:10,
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:1
#EXT-X-VAST-IMPRESSION:http://demo.theplatform.com/summit/2015/ads/tracking/citizen-drive/impression
#EXT-X-VAST-COMPANION:WIDTH=468,HEIGHT=60
#EXT-X-VAST-COMPANION-CLICK-THROUGH:http://www.citizenwatch.com/
#EXT-X-VAST-COMPANION-CLICK-TRACKING:http://demo.theplatform.com/summit/2015/ads/tracking/citizen-drive/bannerclick
#EXT-X-VAST-VIDEO-CLICK-THROUGH:http://www.citizenwatch.com/
#EXTINF:10,
#EXTINF:5.6,
#EXT-X-DISCONTINUITY
#EXTINF:10,
#EXTINF:10,
Note the "EXT-X-VAST" extensions. So now everything we need is in the M3U8 itself.
Rodrigo
So far we have encountered the worst performance to be on HLS aes encrypted content. On our android 4.3, armv7 @ 4x1ghz on gbit eth we only achieve around maximum 5mbit throughput in this mode ,on HLS without aes we reach around 24mbit throughput.
The Aea128DataSource uses a cipher is used on Android's CipherInputStream (Aes).  Unfortunately the CipherInputStream as provided by the Android 4.x OS has a terrible throughput performance as it internally does the decryption in chuncks of only 20 bytes towards it's inputstream. It would be advisable to add a better performing ExoPlayerCipherInputStream filter customized to handling the streaming data instead (basically doing much more data in one go):
Changes up!
Changes up! :)
I'm testing  opus-lib in my app, it works fine in android 6.0, but back to device 4.4, Exoplayer play about 5 secs and then application crashed, unknown why, unknown where in my source. My log:
> 04-01 01:42:37.164 4214-4214/? V/FFmpegExtractor: format_names[09]: ape
playingItem.uri,
Link stream: https://murmuring-brushlands-18762.herokuapp.com/?id=60ItHLz5WEA
Type: Audio
- It is a 100% repro with the appropriate content
build.board: bullhead
build.cpu_abi: arm64-v8a
build.cpu_abi2:
build.hardware: bullhead
build.product: bullhead
version.codename: N
@Override
Log.i("zhongzhizhi","KEYCODE_BACK");
BehindLiveWindowException happening quite often and in the beginning of playback, which is very strange. Buffering freezing happening after a long time playing and it is causing by AudioTrack (this issue reported already here by other devs).
[Known Issues]
unpredictable.
Thanks for sharing your work, @peddisri!
@peddisri Thanks for explaining. While a seekbar + current position and duration, like commonly used for VOD, is like you say not suited for live streams, a different style of seekbar can be a good solution for live streams. One use case is live TV, for channels with programs starting at specific times.
@ojw28 Did you get a chance to review this change?
@ojw28  Thanks for the update! Do you have any time frame for 2.x?
encryptionIv);
Ahh great @peddisri  I will try that out.
@peddisri I have found a possible issue with this patch. The buffer start time gradually falls out of sync, and after about 20 seconds of playback (the approximate size of one segment), I begin seeing `Discontinuity detected` messages and the audio resets to the beginning of the last segment (it seems). I have tried looking for the cause but haven't found anything yet.
@bene25  Conceptually, seek bar should  have a cursor that progresses from left to right (or min position to max position). But in case of DVR window, the current position ideally should always be fixed, because the relative distance between current position and the end position should remain same, due to the sliding DVR window.
@peddisri In the current fix when I press rewind(<< button), I reach to the same position from where the video started. Can I even go beyond that to a more previous state and not from where video started playing?
@ishantsagar What is your DVR window range?
@ojw28 thanks for your support. I'll head into the details. Without your support, we'd be stuck on our Android platform without any good HLS support.
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-MEDIA-SEQUENCE:0
#EXTM3U
The question is, can I ignore somehow this meta? And why does it produce such errors?
When parsing playlists of large videos, an exception is thrown when a byte range offset is reached that is greater than a 32 bit integer. This occurs upon first loading the playlist.
Exoplayer version currently being used: r1.5.3
I have found several pieces of information that lead me to believe that there are errors in the logic of the Exoplayer mp4 data extraction that goes beyond the conditions of having an extremely poorly interleaved file. This example mp4 file (http://23.239.4.36/test_audio/kwwl_20161114195742230AC.mp4) when played through the Exoplayer 2 demo app seems to fail because of the audio renderer falling behind the video, but the gaps in byte position between audio and video data never seem to be larger than ~50-100kb (viewed using "avprobe -show_packets" ).
If HLS does not support HE-AAC, that's a bummer.
Edit: Apple says HLS does support HE-AAC so there must be a way to transport it correctly: https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/StreamingMediaGuide/FrequentlyAskedQuestions/FrequentlyAskedQuestions.html
@martinbonnin Can you point me what's the value to put to `overideAacObjectType`? Where can I find that number? Do I need to extract it from hls source?
(and all other similar links), ExoPlayer throws IllegalStateExeption. Here's the stracktrace:
E/ACodec: signalError(omxError 0x80001001, internalError -2147483648)
java.lang.IllegalStateException
java.lang.IllegalStateException
`#EXTM3U
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1681000,RESOLUTION=768x432,CODECS="avc1.77.30, mp4a.40.2"
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=749000,RESOLUTION=480x270,CODECS="avc1.77.30, mp4a.40.2"
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=956000,RESOLUTION=640x360,CODECS="avc1.77.30, mp4a.40.2"
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=2717000,RESOLUTION=1024x576,CODECS="avc1.77.30, mp4a.40.2"
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=478000,RESOLUTION=320x180,CODECS="avc1.77.30, mp4a.40.2"
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=266000,RESOLUTION=320x180,CODECS="avc1.77.30, mp4a.40.2"
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1163000,RESOLUTION=640x360,CODECS="avc1.77.30, mp4a.40.2"
Here is the part of one of the manifesst:
<ContentProtection schemeIdUri="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed" value="Widevine">
<cenc:pssh>AAAAMnBzc2gAAAAA7e+LqXnWSs6jyCfc1R0h7QAAABISEHAan0hfxEZ/tKnUF9l7W+E=</cenc:pssh>
But i guess it really is something very specific to our use case since no one else has asked for it, as you said.
Hi @ojw28, thanks for the answer,
The problem i found in that approach is that the position of default_KID, varies depending on the Android Version.
Gregoire Badoual
@gbadoual Did you ever solve this issue? I _think_ I'm running into the same thing.
@ojw28 - Thanks for the quick review, i've pushed the change you suggested.
@ojw28 - Any more thoughts on whether you want these changes, or a different approach?
Device: mini-mx (android version 5.1.1)
Hello @ojw28,
size_A/time_A = bw_A
or for a low quality chunk B:
which is wrong as you comparing references, not values.
- below line with "ID_PIXEL_HEIGHT = 0xBA;" add:
@ojw28
exoplayer version:r1.5.6
- dev (396a19f20cd24bf959ec09914fd898576d1f9f1a)
> E ACodec  : [OMX.MTK.VIDEO.DECODER.MPEG2] storeMetaDataInBuffers failed w/ err -1010
Codecs dump:
Hi, @ojw28
05-26 13:49:04.035 19863 20678 D mali_winsys: new_window_surface returns 0x3000
this is the log
if((flags & 0x20 /* OCRstreamFlag */) != 0){
mimeType = MimeTypes.VIDEO_H264;
mimeType = MimeTypes.VIDEO_H265;
mimeType = MimeTypes.AUDIO_AAC;
mimeType = MimeTypes.AUDIO_AC3;
mimeType = MimeTypes.AUDIO_E_AC3;
case 0xAC:
case 0xAA:
case 0xAB:
// Start of the AudioSpecificConfig.
parent.skipBytes(1); // AudioSpecificConfig tag
I have implemented Exoplayer into our project with the help of the demo app and everything works finde except the sound. Any suggestions?
major_brand     : isom
compatible_brands: isomiso2avc1mp41
Daniel
java.lang.IllegalStateException: Unbalanced enter/exit
subtitleUri,
DataSource dataSource = new DefaultUriDataSource(this, "HungamaPlayer");
Caused by: java.lang.IllegalArgumentException: url == null
else
Is it this device specific issue?
- Encrypted: http://teststreams.livesport-massive.com/out/u/1fw8gkpxjucha1c11gd7b8lx26_Sporting_Gijon_2_4_Espanyol_1456704951038-encrypted.mpd
@jozefchutka
This is only happening for Widevine protected streams!
Device: AW989_msm8625
W/VideoCapabilities: Unrecognized profile 2130706433 for video/avc
03-07 14:41:25.323  30274-30429/fr.bouyguestelecom.tv.vod W/AudioCapabilities Unsupported mime audio/mpeg-L2
03-07 14:41:25.324  30274-30429/fr.bouyguestelecom.tv.vod W/AudioCapabilities Unsupported mime audio/x-ms-wma
03-07 14:41:25.325  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unsupported mime video/wvc1
03-07 14:41:25.325  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unsupported mime video/x-ms-wmv
03-07 14:41:25.326  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unsupported mime video/mjpeg
03-07 14:41:25.330  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unrecognized level 0 for video/x-vnd.on2.vp8
03-07 14:41:25.337  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unrecognized profile/level 0/0 for video/mpeg2
03-07 14:41:25.337  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unrecognized profile/level 0/2 for video/mpeg2
03-07 14:41:25.337  30274-30429/fr.bouyguestelecom.tv.vod W/VideoCapabilities Unrecognized profile/level 0/3 for video/mpeg2
03-07 14:41:25.355  30274-30429/fr.bouyguestelecom.tv.vod I/VideoCapabilities Unsupported profile 4 for video/mp4v-es
I am experiencing a problem when stream DASH Widevine content when network throttling.
Let's consider variants that I are in playlist:
Is this expected behaviour?
Exoplayer Version: r1.5.4
- dev branch (396a19f20cd24bf959ec09914fd898576d1f9f1a)
P.S.: some devices on which the errors occur are: HUAWEI H30 U10, Samsung SM T230NU, Samsung SM G530H, LGE LGMS323, ALCATEL ONE TOUCH 7041
resolution at which to display all the video in the Variant
Exoplayer version: 1.5.6
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
This is stream: http://52.34.86.42:1935/karaoke/Ai_Kho_Vi_Ai.Que_Van.smil/playlist.m3u8
02-28 15:01:15.552 3469-3530/? E/ACodec: [OMX.google.mp3.decoder] ERROR(0x80001001)
java.lang.IllegalStateException
java.lang.IllegalStateException
thank you @AquilesCanta
@AquilesCanta as you can see above I get a media (video) file from user's sdcard and it's not an Online content.
I will reopen the issue with more details later @AquilesCanta
It is giving me the following exception:
Does this exception have to do with Androids new permission model, or is the file path that I have given incorrect? I am thinking that it could be the latter too since I could not open a local mp4 file on Exoplayer from SD card while using a lower API level as well. (API 21)
On Sun, Mar 6, 2016, 4:38 PM ojw28 notifications@github.com wrote:
I am onsite at Widevine next week so I will also ask them  about this.
Format : Matroska
Writing application : Lavf56.40.101
Format : AVC
Format/Info : Advanced Video Codec
Format settings, CABAC : Yes
Codec ID : V_MPEG4/ISO/AVC
Audio
Format : Opus
Codec ID : A_OPUS
Compression mode : Lossy
Playback of `Big Buck Bunny.mov` fails due to `java.lang.ArrayIndexOutOfBoundsException`.
@AquilesCanta Thanks for following up on the issue so quickly.
@AquilesCanta Thanks! This workaround works for us. Looking forward to the official release.
and a few other (not public) samples.
02-24 14:45:55.972: I/DEBUG(147):     78afac08 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac18 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac28 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac38 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac48 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac58 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac68 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac78 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac88 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afac98 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afaca8 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78aface8 00000000 00000000 00000000 00000000
02-24 14:45:55.972: I/DEBUG(147):     78afa618 00000000 00000000 00000000 00000000
oh,you mean,this problem is the special device caused?
http://test.agora-net.com/IMG_1295.MOV
provider : widevine_test"
02-24 10:42:14.351 25207-25315/? E/ACodec: native window could not be authenticated
java.lang.IllegalStateException
private int nativeTextureHeight = 0;
StartCoroutine (DelayedStartVideo ());
nativeTexturePtr = IntPtr.Zero;
@ojw28
Screen shot, seeked and scrambled: http://postimg.org/image/z0x4sc6et/
When `seekTo` is called before the first frame of video is visible, the player sometimes throws the following exception:
Alternate steps (more difficult to reproduce):
- Sony Xperia Z3 D6603 (5.1.1/23.4.A.1.232)
Fails on these devices:
- Samsung Galaxy S6 Active (5.0.2/LRX22G.G890AUCU2AOF3)
- On some devices, the message "Decrypt error result in session sid3 during encrypted block: 1" is written to the logs.
Greatings
Bitrate Control: vbr
Resample: Disable
Multicast IP: Disable
Audio link: http://www.ivoox.com/primer-palo-19-02-16-al-infierno-los_mn_10502707_api_1.mp3
I have a similar case but I'm not sure if this is not acutally a bug @ojw28
"visual_impaired": 0,
"pix_fmt": "yuvj420p",
"color_space": "bt470bg",
"visual_impaired": 0,
"comment": "Other"
"album": "Judas Unchained",
-Asghar
Bit rate mode : Variable
Compression mode : Lossy
Audio
Format : AAC
Format/Info : Advanced Audio Codec
Muxing mode : ADTS
Bit rate mode : Variable
Compression mode : Lossy
- dev (7814aaac466aad8b76fcfaf64c53731c99e9e35d)
@ojw28, Thank You for checking it and I'm really sorry for misleading You.
Is it better to create new issue (sony specific) with proper description?
**Bumpy playback**
Log:
> Format settings, Matrix                  : Custom
> Bit rate mode                            : Variable
> Compression mode                         : Lossy
> Audio
> Compression mode                         : Lossy
@ojw28 the patch works well. Just tested it. Many thanks.
do {
if (ParserUtil.isStartTag(xpp, "cenc:pssh") && xpp.next() == XmlPullParser.TEXT) {
do {
if (ParserUtil.isStartTag(xpp, "cenc:pssh") && xpp.next() == XmlPullParser.TEXT) {
In FragmentedMp4Extractor, changed (for now) the function onLeafAtomRead ilke this:
5. At some rare times, the stream recovers, but most of the times, it doesn't recover and just stops.
Meanwhile, @isidoroDigio also got reports on this issue from Samsung Galaxy S6, S6 Edge and Edge +
Hi @ojw28 Thanks for the observation
HI @ojw28 After applying the fix and update, we are still getting reports regarding the issue from our live users in the Play Store.
if (subtitleEng == null && subtitleArab == null) {
TextTrackRenderer arabTextRenderer = null;
HttpSampleSource arabSubtitleSource;
} catch (MalformedURLException mfe) {
if (subtitleArab != null) {
URL arabUrl = new URL(subtitleArab);
arabSubtitleSource = new HttpSampleSource(arabUrl, "text/vtt");
arabTextRenderer = new TextTrackRenderer(arabSubtitleSource, player, Application.getContext().getMainLooper(), new WebvttParser());
} catch (MalformedURLException mfe) {
if (arabTextRenderer != null) {
renderers[PlayerSupport.TYPE_ARAB] = arabTextRenderer;
Amit
@ojw28: After some experiments I still couldn't figure out what I need to do exactly - so I have opened [a question on Stack Overflow](http://stackoverflow.com/questions/35656146/how-to-apply-fragment-shader-to-glsurfaceview-textureview).
@ojw28
@ojw28 is there any guidance on when v2 may be available? Trying to decide if we should do something in the meantime.
My requirement is to simply start from a bit higher bandwidth track. Can this be implemented without creating a custom track selector. And choosing that should not stop the player from auto adapting once the bandwidth meter has estimate. @AquilesCanta any info  because multi-audio track are very useful for different country.
- Widevine GTS:
- Widevine Dash MP4,H265:
- "Super speed" gives the behavior described in this issue
Amit Samal
Lmoofmfhd4traftfhdtrunTmdat<?xml version="1.0" encoding="UTF-8"?> <br> <style xml:id="ttx" tts:fontSize="3.21%" tts:fontFamily="monospaceSansSerif"/><br> <style xml:id="backgroundStyle" tts:fontFamily="proportionalSansSerif" tts:fontSize="18px" tts:textAlign="center" tts:origin="0% 66%" tts:extent="100% 33%" tts:backgroundColor="rgba(0,0,0,0)" tts:displayAlign="center" /><br> <style xml:id="speakerStyle" style="backgroundStyle" tts:color="white" tts:textOutline="black 1px" tts:backgroundColor="transparent" /><br> <style xml:id="textStyle" style="speakerStyle" tts:color="white" tts:textOutline="none" tts:backgroundColor="black" /><br> </styling><layout><br> <region xml:id="full" tts:origin="0% 0%" tts:extent="100% 100%" tts:zIndex="1" /><br> <region xml:id="speaker" style="speakerStyle" tts:zIndex="1" /><br> <region xml:id="background" style="backgroundStyle" tts:zIndex="0" /><br> </layout><br> </head><body><div></p> <!-- text-based TTML --> <p></div></body></tt></p>
Lmoofmfhd4traftfhd&trunT&mdat<?xml version="1.0" encoding="UTF-8"?><tt xml:lang="eng" xmlns="http://www.w3.org/ns/ttml" xmlns:tts="http://www.w3.org/ns/ttml#styling" xmlns:smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt" ><head><smpte:information smpte:mode="Enhanced" /><styling><style xml:id="emb" tts:fontSize="4.1%" tts:fontFamily="monospaceSansSerif" /><style xml:id="ttx" tts:fontSize="3.21%" tts:fontFamily="monospaceSansSerif"/><style xml:id="backgroundStyle" tts:fontFamily="proportionalSansSerif" tts:fontSize="18px" tts:textAlign="center" tts:origin="0% 66%" tts:extent="100% 33%" tts:backgroundColor="rgba(0,0,0,0)" tts:displayAlign="center" /><style xml:id="speakerStyle" style="backgroundStyle" tts:color="white" tts:textOutline="black 1px" tts:backgroundColor="transparent" /><style xml:id="textStyle" style="speakerStyle" tts:color="white" tts:textOutline="none" tts:backgroundColor="black" /></styling><layout><region xml:id="full" tts:origin="0% 0%" tts:extent="100% 100%" tts:zIndex="1" /><region xml:id="speaker" style="speakerStyle" tts:zIndex="1" /><region xml:id="background" style="backgroundStyle" tts:zIndex="0" /></layout></head><body><div></p> <!-- text-based TTML --> <p></div></body></tt></p>
I know only vitamio plugin.
In other words ,how can i set a m3u8 playlist to exoplayer?
LAVF: Program 1
! mux. \
! mux. \
! twolamemp2enc \
! mpegaudioparse \
Packet 219 is PAT
$ tsinfo homebrew3.ts
Reading from homebrew3.ts
Packet 60 is PAT
I'm not sure if there's any obvious smoking gun there as to what is strange about the provider's stream that is causing ExoPlayer to fail.
Hello, @ojw28 !
Here is one very crude approach I came up with :
https://gist.github.com/abhiguru/6c443dde45a8597de7a4
@abhiguru It was never my intention to change the default behavior of ExoPlayer with this PR. That's why we have the `FirstBaseUrlSelector` implementation. If you want failover you would have to implement `BaseUrlSelector` on your own and pass it to `DashChunkSource`. At least that was the idea. I for instance, (locally) have an implementation of `BaseUrlSelector` that also implements `DashChunkSource.EventListener` to get notified about the success/failure of chunk loads in order to take good measure.
@pakerfeldt and @Bastian35022,  For the times when BaseURL is not present in the mpd should we continue with the default behaviour of using the connectionUrl as the BaseURL example https://gist.github.com/abhiguru/37b4690fe6aaf435dea8 line 45 to 47 ?
@abhiguru Definitely, good catch. I modified it slightly to be more coherent with the other checks I had:
btw props to the @ojw28  and the team who built this because the current mechanism makes such reloading of chunks and maintaining stream continuity simple
@Anshumansharma12  in the meanwhile either you can help implement support for it on Exo or look at alternative like javac + ffmpeg
You can hook up any supported codec which is accessible through MediaCodec or you can implement your own.
https://gist.github.com/abhiguru/efe59963fc45d1535604
Followed by an ExoPlayer exception:
However, when I use two separate `SurfaceHolder`'s, it doesn't complain. Has anyone had any similar issues? Or am I possibly doing something wrong?
According to [Law of Demeter](http://misko.hevery.com/2008/07/18/breaking-the-law-of-demeter-is-like-looking-for-a-needle-in-the-haystack/), it seems better to have the client pass in the refresh rate as a float.
https://gist.github.com/abhiguru/bdd52dc7abb0c7bbdabc
- AAC decoder returned error 0x4004, substituting silence
Its showing error-
Code-
[http://servidor.i-live.com.ar:9234](url)
@ojw28
Exoplayer leaks a Surfacetexture when switching movies because I can't seem to free the oes texture between movies.
Sure, we have video that contains information for mid rolls in TXXX frames http://aftonbladetlive-lh.akamaihd.net/i/20150928224817na_1@182509/master.m3u8?custom-mdt=on (don't ommit custom-mdt param) you should be able to see some extra TXXX at the beginning of this video
I'm trying to implement parsing of ASS/SSA subtitles and know specifications of this format and how to parse them... I created new SubtitleParser, but to "canParse" function come only audio and video mimetypes, not for subtitles. How can I get this tracks to render?
Now it works like a charm!
Util.getUserAgent(this, "Canalis"), defBandwidthMeter);
I am trying with different buffer sizes but I don't appreciate the difference. Awesome!
@Override
major_brand     : isom
compatible_brands: isomiso2avc1mp41
encoder         : Lavf56.40.101
Codec ID                                 : isom
Overall bit rate mode                    : Variable
Writing application                      : Lavf56.40.101
Format settings, CABAC                   : Yes
Audio
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Bit rate mode                            : Variable
Compression mode                         : Lossy
We are using DASH type play in Eoplayer 1.5.4, audio working properly, but video not see, black screen. Any body knows, please help ?
samsung/coreprimeve3gxx/coreprimeve3g:5.1.1/LMY48B/G361HXXU0AOL6:user/release-keys
Unfortunately it's not clear to me which notion of successive frames is meant in the spec.
These are again just my impressions, might be incorrect:
Is it not possible for a frame to have nothing in this channel?
@TBoshoven
I am interested in adding Instagram-like image filters into my exoplayer video implementation. I can think of two ways to approach this challenge, either to:
but I get an exception when running:
@Zo2m4bie I was never particularly happy with the solution I came up with. The guide that ojw28 posted is pretty much it, and I just needed to bastardise GPUImage to be used in the same way. Let me know if you can do better!
I dealt with on mobile application development and run into problems with the link stream wowaza when play applications. app with the following error message . drunk only error with android device versions below 5.0
@ojw28 Thank you very much for the quick response !
Could you test my branch?
Unexpected exception loading stream
new Sample("Broken", "http://test.agora-net.com", Util.TYPE_OTHER),
I realize this is a somewhat primitive way to stream the video, but I don't control that end of it.
repositories {
repositories {
Unfortunately we were using a rented UHD hardware encoder that we don't currently have access to - so don't have a stream at the moment.
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> W/AHierarchicalStateMachine(8134): Warning message AMessage(what = 'omx ', target = 15) = {
> W/AHierarchicalStateMachine(8134):   int32_t data1 = -2147479541
> I/ACodec(8134): [OMX.qcom.video.decoder.hevc] Now Loaded
#EXTM3U
on gti8260
If I can catch such event I would be able to play mp4 instead of hls to avoid any problem linked to this issue.
From another seek operation:
- **VTT File Link:** http://s3.amazonaws.com/curiosity-club/testing/hls_subs3/abc_enigmaman.vtt
@ojw28 I use a HLS Renderer and as suggested I have passed true in the constructor
2 Seconds fragments
it will be helpful for me as i would be experimenting on generating dash content.
@AquilesCanta thank you for the reply
@Override
throw new IllegalArgumentException("No decryption strategy!");
Here is an example stream that breaks the parser,
I have been getting this error randomly during play back on all Samsung Galaxy S6 / Edge / Edge + phones :
@casajavi I am pretty sure we are facing the same issue but please let me know if I'm wrong.
Hey @tajoumal We have not reproduced the error in the same manner but if you are encountering DRM Session errors after the first initial crash in all other video streams then it is likely the same issue. We are trying to find some time to dig further into this issue. I will post as soon as I find further information.
@casajavi Thanks
@ojw28 Any idea about how to solve this?
@wvpaf @tajoumal It seems like some of our assets where encoded incorrectly, it had something to do with a conversion from the original format to Dash affecting the way the aspect ratio was being calculated..... I dont really have the full details on this.
@ojw28 thanks for your latest commits
do you plan to add ogg flac support in the near future?
It is not clear what type of Looper does they accept in their constructors. This cause the question related to "close()" method:
@ojw28 This is a great help. One question though, with the multiple resolutions (1080p, 720p, 480p) will mpeg dash (and exoplayer) change between them all seamlessly without buffering?
``` c++
- Denon 1912 AVR supports AC3 and works well
01-21 22:12:37.331 26827-7576/by.stari4ek.tvirl.debug W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 13 failed: -1010
01-21 22:13:33.716 26827-8432/by.stari4ek.tvirl.debug W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 10 failed: -1010
01-21 22:13:33.717 26827-8432/by.stari4ek.tvirl.debug W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 9 failed: -1010
01-21 22:13:37.702 26827-8509/by.stari4ek.tvirl.debug W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 13 failed: -1010
01-21 22:13:37.702 26827-8509/by.stari4ek.tvirl.debug W/ACodec: [OMX.Nvidia.h264.decode] setting nBufferCountActual to 12 failed: -1010
@Override
@Override
@Override
@Override
@Override
@Override
@ojw28 thank you for your answer. Are you planning in future to support this feature? Is there any possibility to modify your library to save/record bytes from inputstream of your exoplayer?
I need this feature too. ojw28, you may not implement directly this feature, but at least make API more accessible and convenient for developers to implement by themselves.
W/ACodec  (18320): [OMX.Exynos.avc.dec.secure] setting nBufferCountActual to 6 failed: -2147483648
W/ACodec  (18320): [OMX.Exynos.avc.dec.secure] setting nBufferCountActual to 5 failed: -2147483648
I/ACodec  (18320): [OMX.Exynos.avc.dec.secure] configureOutputBuffersFromNativeWindow setBufferCount : 4, minUndequeuedBuffers : 2
I/ACodec  (18320): [OMX.Exynos.avc.dec.secure] allocated meta buffer with ID 0xf02c6290 (pointer = 0x7fa908e000)
I/ACodec  (18320): [OMX.Exynos.avc.dec.secure] allocated meta buffer with ID 0xf02c69c0 (pointer = 0x7fa908e020)
I/ACodec  (18320): [OMX.Exynos.avc.dec.secure] allocated meta buffer with ID 0xef835920 (pointer = 0x7fa908e040)
I/ACodec  (18320): [OMX.Exynos.avc.dec.secure] allocated meta buffer with ID 0xef835560 (pointer = 0x7fa908e060)
I/ACodec  (18320): >>> getPortFormat 16, OMX.SEC.aac.dec
Any pointer on what might have caused this ?
https://gist.github.com/abhiguru/c9760df62ecfb3423a5a
https://gist.github.com/abhiguru/3df5cd9799facb011bae
when the net changed to mobile net, i hope stop buffer,
@biodatacomp check this out
@biodatacomp I've force update my branch to match up with ExoPlayer 1.5.4, including OkHttp3 & Stetho.
// We've gone too far.
@Falrach,
signed the cla
The UHD sample is worse, image freezes after a few seconds.
Since I'm not allowed to publish the live stream url, could you please send me a PM ( ffr3akk@gmail.com )?
@mekya - Just tried playing a live rtmp stream using your commits and your RTMPDataSource class - I got the following error below -
@mekya where is the code of librtmp_jni.so?
@ojw28 @ckarthikv @Android4MediaPlayer
@mekya - The sample RTMP source you've provided works well, but somehow a custom live RTMP source doesn't seem to work with your changes. Any recommendations? I tried adding "?live=1" at the end of the RTMP url also, but only audio track is being played and not the video track (although the stream has both video and audio)
@mekya  I did encountered same issue , while i try playing livestream from Red5
@mekya
its working now , i was using customized url to publish/play my content
Changed to
> @mekya https://github.com/mekya
> its working now , i was using customized url to publish/play my content
@mekya Is there any way in which I can help? I can find the time after next two weeks to contribute.
Thank you @ardoramor
There are two things
- I don't know if there is a plan to support webrtc but this is something I really want to add. Maybe we can do something together.
When I run the demo app (exoplayer version 1.5.3) on a S5 mini and start streaming Widevine (e.g. WV: HDCP not specified), lots of cryptic errors are logged.
required: String
@Alviere regarding the fact that the ExoPlayer classes seem to be missing, I've had the same issue when upgrading to a new GMS library yesterday. Before Android Studio is able to complete the first build, the new library signatures seem to not be loaded in the IDE, and you'll get missing symbol messages.
Hy
Andrei
Can you give an estimate when the extractor for Ogg will be ready?
Andrei
Andrei
Unfortunatly this ogg implementation seems to work only for vorbis in ogg. If I have opus in ogg (like in the example from the first post) it is not working (UnrecognizedInputFormatException)
After analysis of the one google-reference stream (https://storage.googleapis.com/wvmedia/cenc/h264/tears/tears.mpd), we tried to put the PSSH header into the manifest: http://itonis-portal.nangu.tv/dash/pssh.mpd ; But no success even with this change.
Jan
- thanks for this, I probably mistakenly expected that the default proxy can handle keys in the same fashion as default proxy in Shaka (which is http://widevine-proxy.appspot.com/proxy)
According to the common encryption standard the `tenc` box contains only the `default_KID` which can (and in our case is) overridden using `SampleToGroupBox` and `SampleGroupDescriptionBox` method in the `MovieFragmentBox` using the sample group description format in the common encryption standard. Am I right in assuming that ExoPlayer reads the default key ID and uses it exclusively in conjunction with the `pssh` box provided in the `MPD`?
Fatal signal 5 (SIGTRAP), code 1 in tid 6037 (CodecLooper)
We detected that too on our contents with UHD resolutions, and only crash on Samsung galaxy S6.
https://github.com/libass/libass
- This is an unsupported operation.
@Override
new Sample("Big Buck Bunny (FLV Video)",
@ojw28 but the same source works like a charm in Vitamio bundle on both 3G and Wi-fi connection.
- dev branch (00e903b32e05fb4ba137c59fcb30a776e88ca77e)
Overall bit rate mode                    : Variable
Format settings, CABAC                   : Yes
Scan type                                : Interlaced
Color range                              : Limited
Bit rate mode                            : Constant
Compression mode                         : Lossy
Delay relative to video                  : -627ms
Bit rate mode                            : Constant
Compression mode                         : Lossy
Delay relative to video                  : -677ms
ExoPlayer support m3u8?
Amit Samal
Hi ojw28,
- ALL of my content is encrypted.
- Also from the first fragment I see that the flags indicate that the content is encrypted:
Also, How can I create dash which is DRM encrypted BUT the first ~8 seconds aren't?
Hi, ojw28
Model: MBX XS
Brand: MyGica
Problems:
Hi @ojw28,
@ojw28 Would it be possible for you to test with Huawei P8 Lite running Android 5.0.1?
Well this is strange.. when adding the proguard rules you suggested the problem goes away.
(I still maintain the belief that somehow OEM has modified MediaCodecInfo.java, perhaps some kind of reflection or stack-tracing functionality).
@ojw28 , thanks for a quick response, I tried most of the bundled dash/widevine streams and I can observe the video is not rendered for any H265 stream (having h265 in title). Either clear or secured, same problem just like my stream. There is no error displayed. And as you say there is no Video button at the top listing when this is happening.
@ojw28 I finally managed to get available streams isolating the issue with asus. There are these two manifests:
When opening a VOD m3u8 playlist we get the exception below on devices running android 6.0.1
``` c++
"asset:///nickelodian_hd.ts", PlayerActivity.TYPE_OTHER),
- on Samsung Note 4 (N910U) doesn't. But probably AC-3 isn't supported by device
These changes:
``` c++
#EXTM3U #EXT-X-VERSION: 2 #EXT-X-MEDIA-SEQUENCE: 811 #EXT-X-TARGETDURATION: 10 #ANVATO-STREAM-ID: GHLkmahl8W5
Okay, here is the file that the user sent to me: http://play-pico-cl1.fs.anvato.net/m3u8/pico706-otas-wjbk/1928k/index.m3u8
https://gist.github.com/abhiguru/f14df147d8b8099aaa51
Full logcat output - https://gist.github.com/abhiguru/2adb9a86c7cc3daf8715
? I/DEBUG: *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
? I/DEBUG: ABI: 'arm'
? I/DEBUG:     r4 b89a36a0  r5 b638a024  r6 b88e60c0  r7 00000500
com.example.aguru.myapplication7 W/AudioSystem: AudioFlinger server died!
https://gist.github.com/abhiguru/1ceba37f04398870b397
Format settings, Matrix                  : Custom
Compression mode                         : Lossy
Compression mode                         : Lossy
Compression mode                         : Lossy
Muxing mode                              : DVD-Video
Bit rate mode                            : Constant
Compression mode                         : Lossy
Delay relative to video                  : -330ms
Muxing mode                              : DVD-Video
Bit rate mode                            : Constant
Compression mode                         : Lossy
Delay relative to video                  : -318ms
Bit rate mode                            : Constant
Bit rate mode                            : Constant
Bit rate mode                            : Constant
Bit rate mode                            : Constant
``` Java
``` Java
Do you have any idea why it's behave like this in my case ?
``` Java
-dontwarn javax.**
-dontwarn okio.**
-keepattributes Exceptions
``` Java
@se-bastiaan still the same problem. It won't play
@ojw28 can you look into this please?
@ojw28 , yes the mp3 file is included in the apk and I am able to play it using MediaPlayer but through AssetFileDescriptor whereas I need a URI in case of AssetDataSource so AssetFileDescriptor won't work in case of Exoplayer.
Here is a snippet of my logcat.
Remote Branch                    : quic/LA.BF64.1.2.1.c1_rb1.21
Remote Branch                    : NONE
Reconstruct Branch               : NOTHING
01-04 22:21:33.746 7319-7345/com.example.amanmj.exoplayer_temp I/OpenGLRenderer: Initialized EGL, version 1.4
01-04 22:21:33.884 7319-7352/com.example.amanmj.exoplayer_temp D/ACodec: configureCodec
01-04 22:21:33.923 7319-7342/com.example.amanmj.exoplayer_temp D/AudioTrack: TrackOffload: AudioTrack Offload disabled by property, returning false
@ojw28 is any other information required?
- ExoPlayer from master (1.5.3)
notes: my device is HUAWEI G750-T01 android 4.2.2(API 17)
there are serval error log come:
but I don't know what is the real reason cause unable playing, can anybody give some help?
Thanks @ojw28  very much,
@ojw28
And more, for other similar bugs  on other special decoder in special device?
@ojw28  Well, a propel  way need to be found for working around the issue.
@ojw28 @andrewlewis
given by @vigneshvg
Amit Samal
@ojw28
@ojw28 since there was not datasource available that takes a raw inputstream as a source,
@ojw28 in our case the videos will be in the 3~6min range, don't know if you count that is long, but we really do need the flexibility of moving the video output around.
On Dec 22, 2015, at 5:10 PM, ojw28 <notifications@github.com<mailto:notifications@github.com>> wrote:
From: ojw28 notifications@github.com
Cc: Maulik Joshi
Randeep
@ojw28
http://xyz.domain.com/dash/aljazeera/manifest.mpd
http://xyz.domain.com/dash/aljazeera/manifest.mpd?starttime=1444905456000&stoptime=1444905636000
Randeep
@ojw28 this is the reply from Envivio.
Randeep
@ojw28
hi @ojw28
According to #227 it is not supported to seek in an AAC stream. Is it somehow possible to implement this feature?
1.new Sample("YouKU","http://us.sinaimg.cn/0017W0DNjx06XTEl1ZfN050d010000i60k01.m3u8",
2.new Sample("YouKU","http://us.sinaimg.cn/0017W0DNjx06XTEl1ZfN050d010000i60k01.m3u8",
@ojw28  How to workaround?
@crossle Here's my workaround: (`HlsChunkSource`)
if (previousTsChunk == null) {
I guess we are not sync. I'm consuming AKAMAI HLS Playback URL (.m3u8) as stream URL. I havent found that we may request custom config against stream URL.
@huykn , in this case you loose ability to dynamically select variant base on network conditions and you have to control from your client side which variant select in order to provide best user experience. In other words, if the network quality is low you have to detect it by yourself and switch stream into lower variant, otherwise buffering will be more and more frequent and end user experience of your application will be unpredicted. Keep this in mind.
@ishantsagar, @ojw28 can you provide any information on this forthcoming release and potentially some detail on how it would fix this issue?
<BaseURL>subtitles/subtitles_en.vtt</BaseURL>
<BaseURL>subtitles/subtitles_de.vtt</BaseURL>
<BaseURL>subtitles/subtitles_es.vtt</BaseURL>
<AdaptationSet group="17" mimeType="text/vtt" lang="fr">
<Representation id="caption_fr" bandwidth="256">
<BaseURL>subtitles/subtitles_fr.vtt</BaseURL>
@ojw28 Yes, was just reading that, will look into it, thanks. Will end this here as I don't want to clutter this post with off-topic discussion.
@Override
Overall bit rate mode                    : Variable
Format settings, CABAC                   : Yes
Frame rate mode                          : Variable
Color range                              : Limited
Audio
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Bit rate mode                            : Variable
Compression mode                         : Lossy
Here's the MKV
Unique ID                                : 49288362216249173148415993983295036954 (0x251497E08E6C7EE91563C7FAF3F01E1A)
Format settings, CABAC                   : Yes
Forced                                   : No
Color range                              : Limited
Audio
Codec ID                                 : A_AC3
Bit rate mode                            : Constant
Compression mode                         : Lossy
Forced                                   : No
I know that this changes the way `Choreographer` is used, but allow me to do more than 227 start-release cycles.
+      @Override
@Override
@Override
throw new IllegalStateException("The current thread must have a looper!");
Plamen
I guess it has something to do with TsExtractor, but I couldn't pinpoint the issue yet.
I recived lot of loogs:
Randeep
@ojw28
Randeep
@ojw28
Randeep
@ishantsagar what I remember is it worked when I changed max age.
@ishantsagar No. Its not to be configure in the manifest file but with the manifest file. It is the http header of the manifest file. In the origin server of the stream there will be provision to do it.
09-10 17:14:15.576        85-85/? I/DEBUG *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
09-10 17:14:15.581        85-85/? I/DEBUG eax 00000000  ebx ac036c60  ecx afa0d83e  edx afa0d83e
09-10 17:14:15.581        85-85/? I/DEBUG esi 9e064800  edi 9e170d10
09-10 17:14:15.581        85-85/? I/DEBUG eip abc1e320  ebp af05a360  esp 9e932a50  flags 00210246
I am simply not sure whether this is a bug, or intended behavior! Thanks!
Oh and the wierd thing is that the issue appear on Samsung galaxy s6(android 5.1.1) and nexus 7(android 5.1.1) and nexus 9(android 6)
I use exoplayer 1.5.2.
http://link.theplatform.eu/s/RDXHfC/media/LeL0kaWINSiU?player=DASH%20Only%20Player&formats=mpeg-dash&format=&embedded=true&tracking=true
On 16 December 2015 at 00:58, ojw28 notifications@github.com wrote:
> It seems unlikely this is device specific; I suspect some luck might have
> failure like that is likely indicative of an incorrectly formatted DASH
<BaseURL>audio0_dashinit.mp4</BaseURL>
I am curious though, the one it selected was AAC, when there is AC3 available next in line.
<BaseURL>audio1_dashinit.mp4</BaseURL>
<BaseURL>audio2_dashinit.mp4</BaseURL>
The mp4 is a format  supported by Androidbecause i use it to play by other videoplayer, and it use.
User-Agent  stagefright/1.2 (Linux;Android 5.0.2)
Accept-Encoding gzip
Thank you Vignesh for the elaborate explanation.
-DCMAKE_CXX_FLAGS:STRING="-std=c++11"
requestAudioFocus();
@Override
@Override
@Override
@Override
if (variantIndices.length == 0) {
http://triton.scdn.arkena.com/12714/live_aac.flv
http://3613.live.streamtheworld.com/SAMTELOSAAC
http://stream.us.gslb.liquidcompass.net/KRNBFMAAC?type=.flv&AisGetOriginalStream=true
// Should never happen.
throw new ParserException();
String name = readAmfString(data);
int type = readAmfType(data);
if (type != AMF_TYPE_ECMA_ARRAY) {
// Should never happen.
throw new ParserException();
//  psuedo-code:
> and Triton Digital.
@ojw28
@sbaar, textureview has helped. But probably is't not a big deal to add the screenshot function in the exo player, so developers will fill free to use SurfaceView or TextureView.
@ojw28  do u know the answer ? thx.
What I cant wrap my head around is how does eventSource maps to the integer values of TYPE_VIDEO or TYPE_AUDIO ?
``` kotlin
Timber.i("channel uri: $uri")
RangedUri initUri = r.getInitializationUri();
DashSegmentIndex index = r.getIndex();
RangedUri segUri = index.getSegmentUrl(segIndex);
if (segUri != null) {
results.add(segUriString);
@jiafei1986 How do you kick off the pssh key request process without play the video back after downloading the initialization chunk?
@Matthew-C , actually it is a tricky way i did, i open a player when a download a video to get key, but i wrap the player activity as a progressbar,  then i will close the activity once get the drm token,
- Invoked when a drm error occurs.
- @param e The corresponding exception.
if (response instanceof Exception) {
@Override
Hi gergely-sallai,
This is happening with Demo:
FG
Randeep
Randeep
ARM Section
X86 Section
toolchains, improper options selected, or another problem. If you
The NDK version is r10e.
cat: ./libvpx_android_configs/armeabi-v7a-hard/libvpx_srcs.txt: No such file or directory
APP_ABI := armeabi armeabi-v7a-hard arm64-v8a
The generate_libvpx_android_configs.sh script probably needs to factor in the armeabi-v7a-hard target as well.
E/ExoPlayerImplInternal( 2094): Caused by: java.io.FileNotFoundException: https://www.googleapis.com/certificateprovisioning/v1/devicecertificates/create?key=AIzaSyB-5OLKTx2iU5mko18DfdwK5611JIjbUhE&signedRequest=ClQKTAgAEkjIWPzHuyThjdYJrF0wUb5C2kTc7hOc6cUtmYmf838Zd2AlNjopsICQAIjiAfNEQFF5GD44oCUkGApRBDhKJEpsmyAdiPH9_wQSBLqRAI8SIAXbEmLfNMofPTnn-NQTP7iAbmBFyTLhY0wVXYN2sEQw
Randeep
Randeep
I noticed this issue with a 1440p 10mbps HEVC video. Issue wasn't as noticeable with a 1080p 10mbps H.264 video.
HEVC: http://104.197.206.39:1935/live/mc1_abr.smil/playlist.m3u8
Log.e("Custom", "Error trying to get the buffer",e);
Amit
`http://tiziouzou.ice.infomaniak.ch/15.aac`
now the link i posted work well but there is ohter link that doen't work : `http://biskra.ice.infomaniak.ch/07.aac`
i have tried it on lollipop and marshmallow devices, it works fine but on 4.1.2 galaxy tab it throws following error:
Please HELP me..
@kaltindas could you find a solution for this? If yes, please share
@atul14
first off all you have to replace "http" with "icy"
@kaltindas Thanks.
@atul14
@Ood-Tsen , The issue exists on ZTE Geek, Android 4.2.2
@Ood-Tsen. I wrote the wrong device by mistake
@ojw28 Is this issue will be repaired in the next release?
java.io.FileNotFoundException: /storage/emulated/0/Android/obb/app_packagename/main.1.packagename.obb/obb/videoname.mp4
But that obb is def. there!
Maik
On "Big buck bunny" video, only seekTo not working, duration not 0.
On "Big buck bunny video", pause works as stop - video starts from the begining, duration not 0.
On "Big buck bunny" video all working fine.
@Asa-Walker do You have any sample?
When i click the button Google Glass under "DASH-VP9 ONLY" i get the exception:
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:205)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at android.os.Handler.dispatchMessage(Handler.java:98)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at android.os.Looper.loop(Looper.java:212)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at android.os.HandlerThread.run(HandlerThread.java:61)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at com.google.android.exoplayer.upstream.DefaultHttpDataSource.open(DefaultHttpDataSource.java:210)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at com.google.android.exoplayer.upstream.DefaultUriDataSource.open(DefaultUriDataSource.java:136)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at com.google.android.exoplayer.chunk.ContainerMediaChunk.load(ContainerMediaChunk.java:143)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at com.google.android.exoplayer.upstream.Loader$LoadTask.run(Loader.java:209)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
11-26 12:43:37.839 26417-28582/cz.alza.media E/ExoPlayerImplInternal:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
Thanks a lot ojw28! :)
Because the intention was to have hls multi language contents protected with aes128.
What is going on?
@ojw28 Thank you very much for your reply!
Regarding "import errors in AS": OK, but is there anything peculiar to the ExoPlayer library that could play into that weird behavior? As I said, I'm not the only one to experience this problem with exactly this upgrade but not with any others... But I do realize that it is probably not a pressing issue for many and I am asking mostly out of curiosity.
[341719.419194]    to free 17188kB on behalf of 'kswapd0' (55) because
[341722.216450]    to free 17056kB on behalf of 'kswapd0' (55) because
[341722.226720]    to free 16848kB on behalf of 'kswapd0' (55) because
Unexpected exception loading stream
java.lang.IllegalArgumentException
Is it expected behavior?
Problemmatic part (_H264Reader_):
// c-tor
> On Oct 12, 2016, at 9:37 AM, ojw28 notifications@github.com wrote:
Do you know what may be causing this irregularity/delay ?
@ojw28
@eshkoliGilad I have came into a similar question as you raise here. ExoPlayer.getCurrentPosition() would not return the same value after it has been paused. The Current Position matters for my application because I use it to decide whether it should resume the playback or seek to the new position before continuing the playback. Could you please share how did you fix it? Should I add a range of difference like 50 ms?  This is a hacker way. I would prefer not to do it in this way.
Hmm... I can't for the life of me get this working with m4a's...
new Sample("mp3 File","/extSdCard/Beyonce_m4a/BDay/01.mp3", PlayerActivity.TYPE_OTHER),
I can also guarantee that `/extSdCard/Beyonce_m4a/BDay/01.mp3` works great on the demo. (a local file).
11-19 17:31:16.823 1761-1761/tv.pluto.android I/MediaCodecList: itemAt(i) 7f000001, isEncoder 0
11-19 17:31:16.840 1761-1761/tv.pluto.android D/dalvikvm: VFY: replacing opcode 0x6e at 0x0008
11-19 17:31:16.844 1761-1761/tv.pluto.android D/dalvikvm: VFY: replacing opcode 0x6e at 0x0001
11-19 17:31:17.118 1761-3136/tv.pluto.android E/ACodec: [OMX.MTK.VIDEO.DECODER.AVC] storeMetaDataInBuffers failed w/ err -2147483648
11-19 17:31:17.122 1761-3117/tv.pluto.android E/MediaCodec: cabc file /sys/bus/omapdss/devices/display0/cabc_mode open error: No such file or directory!
11-19 17:31:17.122 1761-3135/tv.pluto.android D/MediaCodec: MediaCodec Start Playaback. Turning Dolby ON
11-19 17:31:17.124 1761-3135/tv.pluto.android I/MediaCodec: MediaCodec::sendDolbyProfile get ForwardUtilService replied with code 0
@ojw28 Just curious, if we know for sure that its an issue with FireOS4\* , or its more attributed to the underlying MediaTek chipset / SOC and the devices using it
Stack trace for exception
onCryptoError
I have encountered a problem while switching between encrypted HLS streams after upgrading to ExoPlayer 1.5.2 from 1.4.1, I am switching between streams as advised in question #931
//                    SAR = DAR  ---------------
//                                0000              forbidden      forbidden
float DAR[] = {-1f, -1f, 3f/4f, 9f/16f, 1f/2.21f};
pixelWidthHeightRatio = DAR[seqHeader.getAspectRatioInformation()]*((float)seqHeader.getHorizontalSizeValue()/(float)seqHeader.getVerticalSizeValue());
@ojw28 Hi.
<sea:SegmentEncryption schemeIdUri="urn:mpeg:dash:sea:aes128-cbc:2013" />
<sea:CryptoPeriod IV="0x178BB7E6F004F334F6D0E29371FE74EF" keyUriTemplate="https://cvprbl201m01.keydelivery.mediaservices.windows.net/?kid=433c74f3-28fb-4795-9c22-d0447b9a6c4c" />
11-13 12:42:50.862: E/ACodec(4910): [OMX.google.h264.decoder] ERROR(0x80001001)
Hello, zeeshan
### Extra information
@willnorris @Joboodi @ojw28 Any solution? can you do releasing the player inside the same activity?
I'm encountering this error as well: @wilsonssss @giladna @Joboodi, can you advise on how you solved it?
The player has ugly picture when starting play HLS from a low bitrate. Even if it turns to playing a high bitrate stream.
To start from a high bitrate need to use following changes:
for (int i = 0; i < variants.length; i++) {
throw new ParseException(
On Some Devices I do get a Internal runtime Error with an IllegalStateException:
java.lang.IllegalStateException
Scenario ::: Exception Getting on device when seeking player at random position
Exception Detail:::
03-14 19:02:37.370 25499-4867/com.jio.media.jod E/ACodec: [OMX.SEC.avc.dec] ERROR(0x90000004)
Out in the wild, some manifests have spaces before numbers, e.g. EXT-X-TARGETDURATION: 10
On Thu, Nov 12, 2015 at 12:24 PM, ojw28 notifications@github.com wrote:
On Thu, Nov 12, 2015 at 12:46 PM, ojw28 notifications@github.com wrote:
> players relaxing specifications in the same ill defined ways, which then
@sarahachem Regarding your question yes it is possible. But as stated above you will need to create your own DRMSessionManager.
private MediaDrm _mediaDrm;
public static final String OUTPUT_FILE_PATH="/mnt/sdcard/wv/lic.text";
private WidevineKeysFetcher()
throw new IllegalStateException("No two instances of this class can co-exists.");
synchronized (WidevineKeysFetcher.class)
catch (InstantiationException e)
throw new IllegalStateException("Unexpected error creating default extractor", e);
catch (IllegalAccessException e)
throw new IllegalStateException("Unexpected error creating default extractor", e);
catch (IOException e)
catch (InterruptedException e)
catch (Exception e)
catch (IOException e)
@Override
@Override
@Override
@Override
catch (UnsupportedSchemeException e)
catch (Exception e)
catch (NotProvisionedException e)
byte[] psshData = PsshAtomUtil.parseSchemeSpecificData(_schemeData, OfflineDRMSessionManager.WIDEVINE_UUID);
else
super(backgroundLooper);
@Override
catch (Exception e)
@Override
catch (Exception e)
private final MediaDrm mediaDrm;
private MediaCrypto mediaCrypto;
private Exception lastException;
* @param e The corresponding exception.
catch (UnsupportedSchemeException e)
catch (Exception e)
@Override
catch (NotProvisionedException e)
else
catch (Exception e)
@Override
mediaCrypto = null;
lastException = null;
@Override
* @throws IllegalStateException If called when a session isn't opened.
@Override
throw new IllegalStateException();
return mediaCrypto;
* @throws IllegalStateException If called when a session isn't opened.
@Override
throw new IllegalStateException();
@Override
@Override
@Override
lastException = e;
@Override
// Internal methods
Don't know if this is a slightly unorthodox way of solving it but it's an easy setup and seems to work fine for us so far.
Hello @ram992,
<!--  PlayReady  -->
<!--  Widevine  -->
<!--  Marlin  -->
<mas:MarlinContentIds>
</mas:MarlinContentIds>
Thank you @papaanoel for your quick reply                                                                                                      I am facing one more issue, (when online and before making the changes you have provided )
Thank you @papaanoel for taking time to reply
Yeah @papaanoel, thanks for pointing out, I am working on  this issue. And will get back to you once I get any answer/solution. Thank you
@Override
if (response instanceof Exception) {
@Override
@Override
``` @ojw28
- Add an event listener for Chunk events.
Thanks @fredx21 (and @thasso).
`LOCAL_SRC_FILES += celt/arm/armopts_gnu.s.neon`
1) The following lines in the convert_android_asm.sh generate the "armopts_gnu.s" file.
-e "s/@OPUS_ARM_MAY_HAVE_EDSP@/1/g" \
-e "s/@OPUS_ARM_MAY_HAVE_MEDIA@/1/g" \
-e "s/@OPUS_ARM_MAY_HAVE_NEON@/1/g" \
${ASM_CONVERTER} "libopus/celt/arm/armopts.s.temp" > "libopus/celt/arm/armopts_gnu.s"
rm "libopus/celt/arm/armopts.s.temp"
ifneq ($(findstring armeabi-v7a, $(TARGET_ARCH_ABI)),)
LOCAL_SRC_FILES += celt/arm/armopts_gnu.s.neon
-DOPUS_ARM_MAY_HAVE_EDSP
From what I understand, the armopts.s.in will always get converted to armopts_gnu.s, which implies that the NDK .neon logic will never get activated. This would happen even if the armeabi-v7a device does have support for the NEON instruction set. If this proposition is true, could you please share your perspective on the case in which the following line would be useful?
LOCAL_SRC_FILES += celt/arm/armopts_gnu.s.neon
11-10 12:57:51.171    3372-5065/com.google.android.exoplayer.demo E/ACodec [OMX.google.h264.decoder] ERROR(0x80001001)
java.lang.IllegalStateException
java.lang.IllegalStateException
I guess the error is from audio. But when I test this link with VideoView and VLC, it's working fine!
11-16 15:22:19.882 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)
11-16 15:22:19.882 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
11-16 15:22:19.882 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
11-16 15:23:02.242 26593-7709/com.play.digicom E/ExoPlayerImplInternal:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)
11-16 15:23:02.287 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:422)
11-16 15:23:02.287 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.FutureTask.run(FutureTask.java:237)
11-16 15:23:02.287 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
11-16 15:23:02.287 26593-26593/com.play.digicom E/EventLogger:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:587)
@Override
On Sun, Nov 8, 2015 at 10:46 PM, ojw28 notifications@github.com wrote:
On Mon, Nov 9, 2015 at 1:04 PM, ojw28 notifications@github.com wrote:
I noticed that in HLS the seek map is not used, which made me curious about what role it plays and how it does it.
We are getting the following Exception
Best Marian.
E/ACodec  ( 2459): [OMX.amlogic.avc.decoder.awesome] storeMetaDataInBuffers failed w/ err -2147483648
V/AML_all_components( 2459):
V/AML_all_components( 2459): last changed:
V/AML_all_components( 2459): build-name:     brian.zhu
V/AML_all_components( 2459): cd /mnt/fileroot/brian.zhu/m8baby
V/AML_all_components( 2459): hostname droid05
I'm only testing with HLS stream, but this happens for **all** HLS streams I've tried (e.g. http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8).
@goffioul please put here your /system/etc/media_codecs.xml and also media_profiles.xml
<MediaCodecs>
<MediaCodec name="OMX.amlogic.avc.decoder.awesome" type="video/hevc" />
<MediaCodec name="OMX.amlogic.mpeg4.decoder.awesome" type="video/mp4v-es" />
<MediaCodec name="OMX.amlogic.mpeg2.decoder.awesome" type="video/mpeg2" />
<MediaCodec name="OMX.amlogic.wmv3.decoder.awesome" type="video/wmv3" />
<MediaCodec name="OMX.amlogic.mjpeg.decoder.awesome" type="video/mjpeg" />
<MediaCodec name="OMX.google.adif.decoder" type="audio/aac-adif" />
<MediaCodec name="OMX.google.latm.decoder" type="audio/aac-latm" />
<!-- DOLBY_UDC -->
<MediaCodec name="AML.google.ac3.decoder" >
<Type name="audio/ac3" />
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.ec3.decoder" >
<Type  name="audio/eac3" />
<Quirk name="needs-flush-before-disable" />
<!-- DOLBY_UDC END -->
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="OMX.google.mp3.decoder" >
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.dtshd.decoder" >
<Quirk name="needs-flush-before-disable" />
</MediaCodecs>
<AudioEncoderCap name="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<AudioEncoderCap name="heaac" enabled="true"
<AudioEncoderCap name="aaceld" enabled="true"
<AudioEncoderCap name="amrwb" enabled="true"
<AudioEncoderCap name="amrnb" enabled="true"
<MediaCodecs>
<MediaCodec name="OMX.amlogic.mpeg4.decoder.awesome" type="video/mp4v-es" />
<MediaCodec name="OMX.amlogic.mpeg2.decoder.awesome" type="video/mpeg2" />
<MediaCodec name="OMX.amlogic.wmv3.decoder.awesome" type="video/wmv3" />
<MediaCodec name="OMX.amlogic.mjpeg.decoder.awesome" type="video/mjpeg" />
<MediaCodec name="OMX.google.adif.decoder" type="audio/aac-adif" />
<MediaCodec name="OMX.google.latm.decoder" type="audio/aac-latm" />
<!-- DOLBY_UDC -->
<MediaCodec name="AML.google.ac3.decoder" >
<Type name="audio/ac3" />
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.ec3.decoder" >
<Type  name="audio/eac3" />
<Quirk name="needs-flush-before-disable" />
<!-- DOLBY_UDC END -->
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="OMX.google.mp3.decoder" >
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.dtshd.decoder" >
<Quirk name="needs-flush-before-disable" />
</MediaCodecs>
This is absolutely bad!
Well, the problems i got are in all h264 contents, more heavy in Dash, but also happens in HLS with some drops.
author:aml.sh multi-media team
branch name:   * jb-mr1-amlogic
build-name:     jintao.xu
cd /mnt/fileroot/jintao.xu/5.1.p201
<!ATTLIST Quirk name CDATA #REQUIRED>
There's a simple and a complex syntax to declare the availability of a
quirks and that only supports a single content type can be declared like so:
<MediaCodec name="OMX.foo.bar" >
Only the three quirks included above are recognized at this point:
are not readable, i.e. use a custom format even though abusing one of
<MediaCodecs>
<MediaCodec name="OMX.amlogic.mpeg4.decoder.awesome" type="video/mp4v-es" >
<MediaCodec name="OMX.amlogic.mpeg2.decoder.awesome" type="video/mpeg2" >
<MediaCodec name="OMX.amlogic.wmv3.decoder.awesome" type="video/wmv3" >
<MediaCodec name="OMX.amlogic.mjpeg.decoder.awesome" type="video/mjpeg" >
<MediaCodec name="OMX.google.adif.decoder" type="audio/aac-adif" />
<MediaCodec name="OMX.google.latm.decoder" type="audio/aac-latm" />
<!-- DOLBY_UDC -->
<MediaCodec name="AML.google.ac3.decoder" >
<Type name="audio/ac3" />
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.ec3.decoder" >
<Type  name="audio/eac3" />
<Quirk name="needs-flush-before-disable" />
<!-- DOLBY_UDC END -->
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="OMX.google.mp3.decoder" >
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.dtshd.decoder" >
<Quirk name="needs-flush-before-disable" />
</MediaCodecs>
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<Audio codec="amrwb"
<AudioEncoderCap name="amrwb" enabled="true"
<AudioEncoderCap name="heaac" enabled="true"
<AudioEncoderCap name="aaceld" enabled="true"
<AudioEncoderCap name="amrwb" enabled="true"
<AudioEncoderCap name="amrnb" enabled="true"
What could be the problem here?
but how to support  .ac3 .aac  files  ?
Side-by-side isn't a just 3D video format.
@oresot Hello! Yes, my preparing is the same, except  DefaultUriDataSource - I'm using OkHttpDataSource, because I need to use ICYCAST protocol and DefaultUriDataSource does not support it correctly on different devices. I resolve this problem by adding listener and timer to player instance and checking STATE_BUFFERING: if buffering was longer than 30 sec - reinit player. Sorry, for my English.
@don11995 I had to do a trick like that too. My stream is from a Shoutcast server, do you know if that means its ICYCAST too? I didn't set up the streaming server.
@oresot I don't know what protocol Shoutcast provides, but if you are in doubt, use OkHttpExtension from ExoPlayer's extensions folder. It supports more protocols than DefaultUriDataSource and syntax to use it is the same. I have about 170 radio stations on my server and only 4 of them using ICECAST. With OkHttpExtension this problem is gone and they playing perfectly.
and in particular
@Override
boolean isWithin = isWithinHotswapPeriod();
Randeep
Is there a way to know if we are in a buffer or a rebuffer?
@wajidp When you initialize your player you can do it through the following constructor instead of using the standard 1 parameter constructor.
@ojw28 Thank you!!! By the way thank for your work on this player, it is amazing. I have removed Vitamio from my dependencies....  which is a no longer active project and a very heavy library.
https://github.com/arut/nginx-rtmp-module
@ojw28 Good news! I commented this line of the audio reader and stream works perfectly!
Manjunath N
Hi @Manjunath-N , were you able to get around this issue?
Crashed:
at tgkill(Unknown Source)
at raise(Unknown Source)
at (Missing)(Unknown Source)
at abort(Unknown Source)
at (Missing)(Unknown Source)
at (Missing)(Unknown Source)
at (Missing)(Unknown Source)
@ojw28 I've added more info - please say if you need anything else
Unfortunately I'm sometimes facing a "NoSuchElementException" in
Alex
I opened the PR because this exception should not be possible but it happens, ...
It's my custom extractor code that's broken.
import okio.Buffer;
import okio.BufferedSink;
*     interpreted as an infinite timeout.
@Override
@Override
@Override
@Override
@Override
@Override
// will be that of the compressed data, which isn't what we want. Furthermore, there isn't a
// in this case.
@Override
@Override
if (!allowGzip) {
throw new InterruptedIOException();
throw new EOFException();
throw new EOFException();
@Override
@Override
@Override
@Override
@Override
@Override
// this line was added to read subtitles
Here's another crazy example, where mask vectors have been used: http://fat.gfycat.com/MemorableGoldenAphid.gif :)
Wow, never saw that kind of subtitle... Definitively something much more
complex than typical subtitles we are used to see.
> Here's another crazy example, where mask vectors have been used:
> http://fat.gfycat.com/MemorableGoldenAphid.gif :)
03-14 22:33:31.602  3719 21478 E Looper  : Error adding epoll events for fd -9, errno=9
Motorola JellyBean show error about illegalstate in exoplayer (even though the OMX.google.h264.decoder MediaCodec has been successfully created).
I don't know what logic behind it.
Ken
Is my syntax correct for playing a m4a file?
> On Oct 19, 2015, at 7:55 PM, ojw28 notifications@github.com wrote:
10-21 17:31:32.001: E/ExoPlayerImplInternal(29074): com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to http://od.pianostream.com:9000/pianosolo/HE-AAC%2064/Featured/Amy%20Janelle-Whisperings-%20Solo%20Piano.%20Vol.%202-A%20New%20Direction.m4a
10-21 17:31:32.001: E/ExoPlayerImplInternal(29074): Caused by: java.net.ProtocolException: Unexpected status line: GET /pianosolo/HE-AAC%2064/Featured/Amy%20Janelle-Whisperings-%20Solo%20Piano.%20Vol.%202-A%20New%20Direction.m4a HTTP/1.1
10-21 17:31:32.051: E/EventLogger(29074): Caused by: java.net.ProtocolException: Unexpected status line: GET /pianosolo/HE-AAC%2064/Featured/Amy%20Janelle-Whisperings-%20Solo%20Piano.%20Vol.%202-A%20New%20Direction.m4a HTTP/1.1
10-19 13:08:16.218    9022-9241/com.dramafever.large E/ACodec signalError(omxError 0x80001001, internalError -19)
java.lang.IllegalStateException
Am I doing something wrong?
10-19 13:00:35.800 87-87/? I/DEBUG: pid: 21574, tid: 24331, name: CodecLooper  >>> com.ikala.livehouse <<<
@ojw28, I've got same error while trying to play 4K HLS.  Where exactly do I set the KEY_MAX_INPUT_SIZE in exoplayer?  (no Genymotion)
Hmm, now it's a different error.
![exores](https://cloud.githubusercontent.com/assets/125693/11244015/c1682cb0-8e0b-11e5-9593-2b916197cfef.png)
Exception:
Format : Matroska
Format : AVC
Format/Info : Advanced Video Codec
Format settings, CABAC : Yes
Codec ID : V_MPEG4/ISO/AVC
Codec ID : A_DTS
Compression mode : Lossy
Format : Vorbis
Codec ID : A_VORBIS
Bit rate mode : Variable
Compression mode : Lossy
Could you please fix in a way that playback is not affected by the characters used in URLs?
.../Axinom/Axinom_Media/Encrypted/Media%20Final-360-800k_dashinit.mp4
and now subtitle is displayed with proper format (at least with supported html tags).
<ProtectionHeader SystemID="9A04F079-9840-4286-AB92E65BE0885F95">
The peculliar thing is that the videos I am trying to play work with other players but not ExoPlayer. I looked at other issues that reported a similar issue but I was not able to use the insights in them to solve the problem.
Ehood Katz
Ehood Katz
On Sun, Oct 11, 2015 at 8:48 PM ojw28 notifications@github.com wrote:
>   wrong.
Jodie Pham!
@trungptdhcn you solved an issue?
Manjunath N
I read about it and it says that it is a Native level error .
<CODE>
at first I thought it can be fixed by changing some parameters of the library, but then I am convinced it is a CyanogenMod problem (The OS I use, 12.1 version specifically).
After upgrading bintray-release these issues were gone.
For the changes in bintray-release.
@ojw28
@ojw28 Any feedback on this would be much appreciated. Do you you think this can be merged to dev? I think I could also add another commit that tackles #87 and support seeking in general live streams.
@thasso - Is there any way I could access the patch implemented locally? Would be of great help.
Hi @mitsnosrap,
Thanks for the PlayReady comment. Will give it a test asap to checkout if DASH + PlayReady is working fine.
http://www.bok.net/tmp/dash/smooth_tfdt/stream.ism/Manifest
http://www.bok.net/tmp/dash/smooth_no_tfdt/stream.ism/Manifest
On Fri, Oct 9, 2015 at 5:28 AM, ojw28 notifications@github.com wrote:
The failure occurred with ExoPlayer 1.4.1. Testing with 1.5.0 is planned for next week - I will update with results for that version once available.
Yes, there are indeed 8 bytes of dummy data between the encryption data and the samples in the `mdat` box, namely the string "hackhack". This is where the `mdat` header previously used to be - we just overwrite it with dummy data as part of our modification process.
The encryption data is positioned at the start of the `mdat` box.
Off the top of my head, the format of the encryption data appears to match what we use. I will double-check just to be sure.
Hmmm.... Let me feel stupid myself for a while....... I was pretty used to see players rotating captions, but knowing that webvtt vertical mode is primarily thought to be used with Asian languages that are written from top to bottom, doesn't make sense at all implementing vertical mode using rotation. I skipped that obvious point.
While at the start of the player for protected content there's a Scrambled video effect for more/less 5 seconds. After some seconds the video is rendered fine (like the free SmoothStreaming content).
Federico
7030-8259/it.myapp.secure_player E/ACodec [OMX.Intel.VideoDecoder.AVC.secure] storeMetaDataInBuffers failed w/ err -1010
09-30 13:19:18.155    7030-8259/it.myapp.secure_player E/ACodec? [OMX.Intel.VideoDecoder.AVC.secure] storeMetaDataInBuffers failed w/ err -1010
Federico
Hi ojw28,
Federico
Taking a look to all these things.
Changes applied
@winlinvip, I am also very interested on low latency streaming so thank you very much for sharing the link to your SEA project.
@chodison Not understand you, what's `time moving` means? The timestamp in FLV stream is increasing, maybe the player not display it?
@ojw28 For flv vod video, can not ExoPlayer to support seeking?
@ojw28 @jeoliva @chodison There is some workaround for flv to support seek, the service which produce the flv file must inject all keyframe offset to the onMetaData script tag, then player can got the offset to seek to specified time. However, it's not the standard of flv, it's possible to implements by this workaround.
@ojw28 why the ffplay player can seek flv vod video?
@ojw28 Aggree to use MP4 instead for http vod stream. :smile:
@chodison It is possible to implement the flv stream seek, but not official standard for it, so I think @ojw28 is right to not support this feature and use HLS or DASH.
For the server to seek the closest position, not all server support it, that is why not official standard.
Randeep
Device details : Yu Yuphoria
Thanks its working. But i cant seem to get it work with this(http://fat.gfycat.com/MadeupShamelessIndianjackal.webm).
Randeep
@ojw28
type="dynamic"
09-25 10:41:28.367  28157-28157/? I/art Late-enabling -Xcheck:jni
Caused by: java.lang.IllegalStateException: Top bit not zero: -75076534005757
Hi @Mariovc....what is the change on Wowza side u did to make this video work...help would be much appreciated
@Mariovc Thank you...
For coded video, the frame size usually varies quite a lot. This variation can be constrained using rate control schemes such as the video buffering verifier model (https://en.wikipedia.org/wiki/Video_buffering_verifier), which guarantees the client buffer to never be empty, if a specific number of bytes is received before starting playback, under the assumption of a CBR channel. This is achieved on the encoder-side by staying below a specific average bitrate during a specific time window, at all times.
So their might be something about our streams that causes this..
Like unified streaming or Common Encryption (CENC)?
- A rare codec null race condition ( 3921919 )
Randeep
Yes, that's the issue i was referring to, sorry for the bad wording :/
I am using DASH content, and i agree that it is usually not a good idea. However, it is necessary when you want to get down the latency by shortening the segment duration (fractional seconds in my case), while avoiding a bad compression efficiency through frequent usage of keyframes. This way you can end up starting with a number of consecutive segments without keyframes when tuning into a live stream.
- changed `defaultUri` to your own license proxy
Randeep
Hi Randeep,
@ojw28 I'll check tomorrow from office (IST time). But it would be better if we can pass the user data in query strings. It will be more secure.
Thanks @jeoliva and @ojw28
Randeep
mono
http://jeoliva.github.io/dashwebvtt/test.mpd
Somebody knows what could be the problem? I am using dev brunch.
/Pernilla
On Thu, Sep 17, 2015 at 4:14 PM, ojw28 notifications@github.com wrote:
So what would be the best way to do this?
Matheus
Matheus
spark85, which device and android are you using ?
Bit rate mode                            : Constant
Compression mode                         : Lossy
Bit rate mode                            : Constant
Compression mode                         : Lossy
Matheus
Device model: ME173X
Encoder: Lavf56.15.102
@ojw28 The bug report is attached here.
Hi ojw28, I consulted with my colleagues and also think that having different startNumbers is spec compliant.
So they can be different and not aligned.
At the crash case, unexpected values were logged.
@ojw28 Thanks for your comment. I also decompiled the apk for investigating that codes, but didn't know why only 4.2.2 (4.3 too?) devices mistake.
@ojw28 Sorry for my mistake... I agreed the CLA. Please check it again.
``` Java
Hi @cre8ivejp,
@ojw28 Has this been implemented for `HLS`? Could this be prioritized? We need this! Thank you  Hi,
Daya
Caused by: java.lang.IllegalStateException: Top bit not zero: -1355457943
http://radyodejavu.canliyayinda.com:8054/;stream.nsv
http://radyobozcaada.canliyayinda.com:4000/;1
Also problem in 2.0
09-11 18:23:27.738  23000-23000/? I/art Late-enabling -Xcheck:jni
I agree this is very odd behaviour because HTTP parameters isn't explicitly changed in the change set.
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOW-CACHE:NO
#EXTINF:10.110100,
#EXTINF:9.943267,
#EXTINF:9.943267,
@Override
@Override
@Override
Test file was submitted to @ojw28 - gmail.
Custom device, not released yet, MTK (MT8127)-based. However, we passed CTS completely, so there should not be any system issues.
1.- A U+002E DOT character (.).
3.- A U+0025 PERCENT SIGN character (%).
<MediaCodecs>
<MediaCodec name="OMX.amlogic.avc.decoder.awesome" type="video/hevc" />
<MediaCodec name="OMX.google.adif.decoder" type="audio/aac-adif" />
<MediaCodec name="OMX.google.latm.decoder" type="audio/aac-latm" />
<!-- DOLBY_UDC -->
<MediaCodec name="AML.google.ac3.decoder" >
<Type name="audio/ac3" />
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.ec3.decoder" >
<Type  name="audio/eac3" />
<Quirk name="needs-flush-before-disable" />
<!-- DOLBY_UDC END -->
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="OMX.google.mp3.decoder" >
<Quirk name="needs-flush-before-disable" />
<MediaCodec name="AML.google.dtshd.decoder" >
<Quirk name="needs-flush-before-disable" />
</MediaCodecs>
@ojw28 - Any thoughts on this PR? Is it under consideration or been rejected?
How can we do this? Is this a bug?
Randeep
Randeep
libavutil      54. 27.100 / 54. 27.100
libavcodec     56. 41.100 / 56. 41.100
libavdevice    56.  4.100 / 56.  4.100
libavfilter     5. 16.101 /  5. 16.101
new DefaultUriDataSource(this, "AUDI/RSEIII"), new DefaultAllocator(65534), 10485760);
@Override
@Override
@Override
On Thu, Sep 10, 2015 at 7:50 AM, ojw28 notifications@github.com wrote:
Vignesh
+ EBML head
|+ Doc type: matroska
|+ EbmlVoid (size: 4027)
|+ Segment tracks
|  + Track type: video
|   + Interlaced: 0
|  + Track type: audio
|  + Codec ID: A_AAC
|  + CodecPrivate, length 5
|  + Audio track
|+ EbmlVoid (size: 1024)
When I play this HLS stream on some devices, all frames are dropped and it displays only black surface. Below is the result of my investigation.
@ojw28 It's better to use this:
@ojw28 It's the most common problem reported on my app... Glad you!
I tried the dev head. The result is a bit unexpected.
| TC97RA1 | Frame drop | Frame drop |
| TC97RA1 | OK | 404 |
| TC97RA1 | OK | OK |
I was testing SRT support when I found that a number of my test files didn't parse. It turned out the reason was that they contained additional empty lines before the next numeric counter. I don't think this is uncommon, and fairly easy to handle.
java.lang.IllegalStateException
The most you can do is, in parseHeader method, forcing audioObjectType variable to be 2 (AAC LC) in case it is 19 (AAC LTP) but I don't think this is a good practice...
You've never let him know @spark85! Can I? :smile:
@Override
else
When I press this button in the options menu when i'm playing the HLS stream, the audio stops after 1-2mins, because I set the surface to null. Is this what it is supposed to happen?
@Override
This is of course an effort vs. sophistication thing.
I agree about the inheritance, and about it being unclear.
Here is my m3u8 with subtitles embedded:
#EXTM3U
http://allvarhsin.flix-cdn.com/FlixVOD/ACompany/I_Frankenstein_2014/1f9daf14d2f84cd8cd0121804ec1e35a/480/480.m3u8
<cenc:pssh>CAESEE4uoWHwHCJz4aUJpec1eqMaCGNhc3RsYWJzIhBOLqFh8Bwic+GlCaXnNXqj</cenc:pssh>
The full exception trace:
Thanks for the information @ojw28 . I will plan a move to 1.4.2.
@ojw28 can u explain it using code ?  Hello,
Build: LMY48I
Bootloader: FLO-04.05
Is there any way so player at least doesn't crash? It seems like its nothing I can do about.
// Audio track
// Subtitle track
//Fake to test
buildTypes {
com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
com.google.android.exoplayer.j: com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
Caused by: com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
com.google.android.exoplayer.j: com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
Caused by: com.google.android.exoplayer.i.ab: Unexpected ArrayIndexOutOfBoundsException: length=9; index=9
Then, i tried the exoplayer demo ,but nothing changed.
`ArrayIndexOutOfBoundsException`
And it seems only happened on OnePlus A0001(4.3) .
buildTypes {
What's more, @gongshoudao said `but 4.3 has this bug`
If possible, please check whether the exceptions of your device clear by this codes.
@souji1103
@souji1103 @ojw28
#EXTM3U
#EXT-X-MEDIA-SEQUENCE:506698
My general question is now, whether there is a specific protocol version implemented within the ExoPlayer HLS implementation or is there is protocol independent support for certain tags?
And as a specific question, whether there is support for the EXT-X-START tag already in place or planed for integration?
it appears that EXT-X-START is not supported at this time
Amit Samal
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME="",DEFAULT=NO,AUTOSELECT=YES,FORCED=NO,LANGUAGE="ja",CHARACTERISTICS="public.accessibility.transcribes-spoken-dialog, public.accessibility.describes-music-and-sound",URI="subtitles/jpn/prog_index.m3u8"
#EXT-X-MEDIA:TYPE=SUBTITLES,GROUP-ID="subs",NAME=" (Forced)",DEFAULT=NO,AUTOSELECT=NO,FORCED=YES,LANGUAGE="ja",URI="subtitles/jpn_forced/prog_index.m3u8"
I'm seeing this issue too and I agree with @ryango, its a platform issue specific to 4.4 and before.
Thank you @b95505017 !
@ojw28 any review progress update?
LGTM :+1:  :)
@b95505017, thanks for this OkHttp version. @talklittle can you share how you set this up to get caching working with mp4s? Are you working with partial responses at all?
Or see comment by @econnelly for a couple other potential solutions.
OK I'll try to write an example AOAP.
Thanks, @talklittle, @econnelly, @b95505017, and @brianchu for the extra info. It's been very insightful.
Does someone mind sharing their Gradle?
I'd be extremely interested in your solution, if just to see a different perspective on the matter! :)
Type: Video
Type: Audio
Codec: PCM S16 LE (sowt)
@Ood-Tsen  I send you an email ;)
@ojw28 could you provide a hint how I could add this functionality myself?
Format : HEVC
Format/Info : High Efficiency Video Coding
Audio
Format : AAC
Format/Info : Advanced Audio Codec
Bit rate mode : Variable
Compression mode : Lossy
@ojw28 - Sorry, but any update on when this fix might become available? Thanks
Unfortunately, I am not the owner of the stream and cannot provide it to you.
java.lang.IllegalStateException
If you want to test, start a new HLS stream with this address: http://i2.vejoaovivo.com.br:1935/1dia/d6b1c9f0-3708-11e5-9a60-35a00edea567.stream/playlist.m3u8
I don't know if it's a problem with my the stream or the library, but happens with HLS stream. Why this don't have any handle?
@ojw28 Infos added
@ojw28  I cloned the repository and added the library (the master branch) at my project, I saw that the last commit is 16 days ago and I've added the ExoPlayer at least one week. It's the last version I think...
@ojw28, another question, the first one stream works at the us website:
I appreciate that I am an amateur trying these things out so chances are the issues I'm coming up against are trivial so thank you for your patience!
This has seemed to solve my problem for the time being so thank you very much for your help and your patience!
This is not something I would be comfortable with shipping, hopefully @ojw28 can shed some light as to why this works and maybe the difference between secure and non secure decoders?
[Here is the incredibly crude gist](https://gist.github.com/ouchadam/876aa29b80752ecaaa08)
@ouchadam could you please post the full solution about that, an example could be great, I don't know if it will fix our player, I don't know if we could do that to remove the "secure" ... but we could test it.
@wvpaf any update on this?
Stream is also DASH with Widevine.
How can I decode subtitles input stream with DrmSessionManager?
My guess is that you're trying to play a 4K video via HLS on a device which reports a lower H264 supported level and therefore that single 4K resolution variant is being filtered out.
if (variantIndices.length == 0) {
For examle uri :
@ojw28  I think you might misunderstand me, I mean video only not audio.
Hi @Arqu ,thanks for your reply.
And here is an another problem:
@Arqu How to skip the lookup of audio during playback?
case TS_STREAM_TYPE_AAC:
pesPayloadReader = new AdtsReader(output.track(TS_STREAM_TYPE_AAC));
case TS_STREAM_TYPE_AAC:
if(!someboolean)pesPayloadReader = new AdtsReader(output.track(TS_STREAM_TYPE_AAC));
My comment was a tad later than ojw28.
This is more of a hack than a solution.
@ojw28 @Arqu
I have trid the way ojw28 told me : commenting out the `TS_STREAM_TYPE_AAC` case .
So how to control the value of `someboolean` which mentioned by @Arqu ?
case TS_STREAM_TYPE_AAC:
if(!someboolean)pesPayloadReader = new AdtsReader(output.track(TS_STREAM_TYPE_AAC));
@Arqu @ojw28
| Bitrate | CBR 231 kbps |
| Channel | Stereo |
Bugsnag reported:
@ojw28 Samsung GT-P3100(Galaxy Tab 2), Samsung GT-P7510(Galaxy Tab 10') and LGE LG-E612f(Optimus L5). Android 4.0.4 and 4.0.3.
@ojw28 Samsung GT-P3100(Galaxy Tab 2), Samsung GT-P7510(Galaxy Tab 10') and LGE LG-E612f(Optimus L5). Android 4.0.4 and 4.0.3.
@ojw28 Why this NoClassDefFoundError isn't handled? This crashes the app and needs a better handle. :(
@ojw28 Only HLS.
@ppamorim ,  a [MediaMuxer](https://developer.android.com/reference/android/media/MediaMuxer.html) version of ExoPlayer ?
@ojw28, sorry for this confusion, I'll review an another alternative.
08-13 11:45:20.424  12343-17268/at.fhooe.mc.gopro.free D/ACodec BaseState::onOMXMessage type 0
08-13 11:45:20.424  12343-17268/at.fhooe.mc.gopro.free E/ACodec [OMX.MTK.VIDEO.DECODER.AVC] ERROR(0x80001005)
08-13 11:45:20.424  12343-17268/at.fhooe.mc.gopro.free W/ACodec OMXCodec::onEvent--OMX Bad Parameter!!
08-13 11:45:20.424  12343-17268/at.fhooe.mc.gopro.free D/ACodec BaseState::onOMXMessage type 1
08-13 11:45:20.424  12343-17268/at.fhooe.mc.gopro.free D/ACodec [OMX.MTK.VIDEO.DECODER.AVC] onOMXEmptyBufferDone 0xb8a17ff8
08-13 11:45:20.424  12343-17268/at.fhooe.mc.gopro.free D/ACodec ACodec::BaseState::postFillThisBuffer mPortEOS 0
08-13 11:45:20.425  12343-17268/at.fhooe.mc.gopro.free D/ACodec BaseState::onOMXMessage type 2
08-13 11:45:20.425  12343-17268/at.fhooe.mc.gopro.free D/ACodec [OMX.MTK.VIDEO.DECODER.AVC] onOMXFillBufferDone 0xb8a10a08 time 0 us, flags = 0x00000000, rangeLength 0, platformPrivate 0x0
08-13 11:45:20.425  12343-17268/at.fhooe.mc.gopro.free D/ACodec [OMX.MTK.VIDEO.DECODER.AVC] calling fillBuffer 0xb8a10a08
08-13 11:45:20.426  12343-12343/at.fhooe.mc.gopro.free D/OpenGLRenderer drawRect multiDraw Toolbar @41ebf508 paint 0x64a25138 id 5 style 0 AA 0 color 0xff333333
java.lang.IllegalStateException
08-13 11:45:20.434  12343-12343/at.fhooe.mc.gopro.free I/SurfaceView updateWindow --   OnPreDrawListener, mHaveFrame = true
08-12 17:06:55.981  12502-16493/com.doge_hides_the_name E/ACodec [OMX.qcom.video.decoder.avc] storeMetaDataInBuffers failed w/ err -2147483648
08-12 17:06:56.141  12502-16493/com.doge_hides_the_name E/ACodec [OMX.qcom.video.decoder.avc] ERROR(0x80001009)
java.lang.IllegalStateException
@ojw28, would you test my app to see what's happening?
Suspect:
Mackqrenc.
El 26 may. 2016 6:06 p. m., "cooliobr" notifications@github.com escribi:
@cooliobr your stream have two subs tracks, one DVB and other SCTE, both are correctly signalled and the DVB one should be decoded, tomorrow when I have access to an android device I will test your stream
El 30 may. 2016 4:43 p. m., "cooliobr" notifications@github.com escribi:
index 6084f7d..af47b26 100644
From: cooliobr notifications@github.com
https://github.com/tresvecesseis/ExoPlayer will be better for me
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> ts segments work propelry:
Sergio
From: cooliobr notifications@github.com
https://github.com/tresvecesseis/ExoPlayer will be better for me
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> ts segments work propelry:
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 13:29 GMT-03:00 tresvecesseis notifications@github.com:
> REGS IT LTDA.
> ANTIK Business Representative BRASIL
> tente voar)"
> 2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> > subtitile
Our tres are private and based in an old Exoplayer versin, Ill update my github when I complete the update of the trees to the current dev tree, It could take a couple of days, maybe less.
Sergio
From: cooliobr notifications@github.com
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 13:29 GMT-03:00 tresvecesseis notifications@github.com:
> REGS IT LTDA.
> ANTIK Business Representative BRASIL
> tente voar)"
> 2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> > subtitile
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 13:50 GMT-03:00 tresvecesseis notifications@github.com:
> Our tres are private and based in an old Exoplayer versin, Ill update my
> REGS IT LTDA.
> ANTIK Business Representative BRASIL
> tente voar)"
> 2016-05-31 13:29 GMT-03:00 tresvecesseis notifications@github.com:
> > REGS IT LTDA.
> > ANTIK Business Representative BRASIL
> > tente voar)"
> > 2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> > > subtitile
Sergio
From: cooliobr notifications@github.com
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 13:50 GMT-03:00 tresvecesseis notifications@github.com:
> Our tres are private and based in an old Exoplayer versin, Ill update my
> REGS IT LTDA.
> ANTIK Business Representative BRASIL
> tente voar)"
> 2016-05-31 13:29 GMT-03:00 tresvecesseis notifications@github.com:
> > REGS IT LTDA.
> > ANTIK Business Representative BRASIL
> > tente voar)"
> > 2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> > > subtitile
Sergio
From: cooliobr notifications@github.com
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 13:50 GMT-03:00 tresvecesseis notifications@github.com:
> Our tres are private and based in an old Exoplayer versin, Ill update my
> REGS IT LTDA.
> ANTIK Business Representative BRASIL
> tente voar)"
> 2016-05-31 13:29 GMT-03:00 tresvecesseis notifications@github.com:
> > REGS IT LTDA.
> > ANTIK Business Representative BRASIL
> > tente voar)"
> > 2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> > > subtitile
Sergio
From: cooliobr notifications@github.com
Rafael Machado
REGS IT LTDA.
ANTIK Business Representative BRASIL
tente voar)"
2016-05-31 13:50 GMT-03:00 tresvecesseis notifications@github.com:
> Our tres are private and based in an old Exoplayer versin, Ill update my
> REGS IT LTDA.
> ANTIK Business Representative BRASIL
> tente voar)"
> 2016-05-31 13:29 GMT-03:00 tresvecesseis notifications@github.com:
> > REGS IT LTDA.
> > ANTIK Business Representative BRASIL
> > tente voar)"
> > 2016-05-31 7:52 GMT-03:00 tresvecesseis notifications@github.com:
> > > subtitile
Patch :
- [fix Exception ](https://github.com/Ood-Tsen/ExoPlayer/commit/8f4a619d1244cfb5977e2e5ba0d5fac08b01903b)
08-10 13:42:37.392      746-815/? E/ActivityManager ANR in com.jio.media.mobile.apps.jioondemand
I use exoplayer in my fragment.
I think it is not a good citizen too because user can't see anything except a black frame.
Here are some codes in my application:
@Override
@Override
08-10 01:48:34.269    4440-9821/com.google.android.exoplayer.demo W/ACodec do not know color format 0x7fa30c03 = 2141391875
java.lang.IllegalStateException
Anybody have idea whats wrong?
I've had this issue streaming .aac w/ a .m3u8 wrapper
@Override
Anybody have idea whats wrong?
My workaround is modify these lines in HlsChunkSource:
Second way is to modify these lines:
Hello  @b95505017 , this case is not usual.
- Variant synchronization when working with live streams and DVR.
>   See Section 6.2.1 and Section 6.3.3 for more information on the EXT-
@ojw28 Is this issue fixed in this commit?
We have a MPEG-DASH non-square stream (unfortunately cannot be shared due to legal reasons) and it renders incorrectly because the change is obviously applicable to HLS streams only.
if (earlyUs < -30000) {
Also, my Nexus 7 is Lollypop, and still drop nearly all frames.
When playing a HLS video, I observed when changing from low bitrate variant to high bitrate variant, there is an audio glitch. It repeats last half-second of previous chunk audio.
@pelotasplus which is your gradle config?
Right, only subtitles in those representations - nothing else.
Audio : A_AC3
libavutil      54. 27.100 / 54. 27.100
libavcodec     56. 41.100 / 56. 41.100
libavdevice    56.  4.100 / 56.  4.100
libavfilter     5. 16.101 /  5. 16.101
filename        : small_cover_land.jpg
filename        : cover_land.jpg
UNEXPECTED TOP-LEVEL EXCEPTION:
I already try Clean Project, Rebuild Project and Make Project, but no success. :(
"there isn't a reliable way to determine whether the gzip was used or not".
@ojw28 I have one question regarding DataSource's read method. If the method returns less number of bytes than requested is it safe to assume that EOF has been reached? Or should we only rely on encountering C.RESULT_END_OF_INPUT on subsequent reads?
After trace, the error comes from
which catch the exception.
In my special case I'm dealing with starting ~9 videos simultaneously(!) using a rather small mp4 file (1MB) - so I'm looking for the buffer size sweet spot.
http://gyazo.com/96bb883781f0d9def5ca2b427918fed1
http://gyazo.com/76c3e468162cbb0a2087a5441b92a188
@ojw28 It appears my video problem only occurs with HLS. The test DASH streams from the demo app plays fine. Does that make sense, if the problem is the AMLogic decoder?
Hello @fabrantes,
Is there anyone figured out how to switch surface smoothly?
There are about 20% of my users use devices which run on Android < 14, so I simply can't ignore them.
setSufraceView(surfaceView);
@fabrantes Hi, I'd like to discuss about the Cubed (3) player project. How shall we proceed?a
Also, where do you pull the variant-list from?
How to seamless switch? @ojw28
Hello @ojw28
seekTo(1000),then seekTo(20000), seekTo(500)...
Android 4.4 ,Mi4
Sorry for my poor English.
And Mi3..
I have a custom seekbar ,i call `player. seekTo(position)` when `onProgressChanged` invoked.
Hi @jeoliva,@ojw28
http://bitlivedemo-a.akamaihd.net/mpds/stream.php?streamkey=bitcodin
exception stack trace :
Are you using Genymotion by any chance? Just had the same problem, but only with Genymotion emulator. Basically if you dig down in the code, it comes to:
Randeep
Log:
Iv and key:
HexToBytes function:
@mohsak Hey! How does it work for you know? Could you please share your solution? I'm wondering where exactly you changed to return value to -1? I'm getting exception from ExoPlayer: UnrecognizedInputFormatException: None of the available extractors (WebmExtractor, FragmentedMp4Extractor, Mp4Extractor, Mp3Extractor, AdtsExtractor, TsExtractor, FlvExtractor, OggVorbisExtractor, PsExtractor, WavExtractor) could read the stream.
Mackqrenc
Hello @ojw28
This is my code. I don't understand what I am doing wrong?
@Override
@Override
@Override
// This is an edge case where the renderers are built, but are still being passed to the
Karbonn A34 Lite    JellyBean   512MB   480x800
Karbonn A99i    JellyBean   512MB   480x800
Lava iris 500   KitKat  512MB   480x854
right - so it seems that the video height is being reported incorrectly?
doing some more digging.
``` Java
``` Java
This is a critical issue, any workaround?
Thanks @giladna
This video plays fine in the dash-if player and in QT/vlc.  Any idea what could be causing this exception?
@ojw28 are you still interested in the #661 PR so that you don't have to ship with the libraries inside the repository?
This is bug only on some devices.
D/shafa   ( 2175): _**endAutoDownloadUpdateFile() startAutoDownloadUpdateFile
D/shafa   ( 2175): *_*cancelAutoDownloadUpdateFile()  run
E/ACodec  ( 2589): [OMX.hisi.video.decoder] storeMetaDataInBuffers failed w/ err -2147483648
Randeep
1) you should get the callback how internally it propgates to DemoPlayer i don't know as Phani-nunna mentioned .
@ojw28  How about manual switch the bitrate not auto?
Randeep
Randeep
Set mime type to video/3gpp
libavutil      54. 20.100 / 54. 20.100
libavcodec     56. 26.100 / 56. 26.100
libavdevice    56.  4.100 / 56.  4.100
libavfilter     5. 11.102 /  5. 11.102
ENCODER         : Lavf55.12.0
Stream #0:6(ger): Subtitle: subrip
Stream #0:7(spa): Subtitle: subrip
Then ExoPlayer (85e0bca33d7cd4d1052a7bebfc6ab6abadc2df19) will crash like this:
@Override
@Override
@Override
@Override
@ojw28 do you require a sample clip?
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.MTK.AUDIO.DECODER.AAC, MediaFormat(audio/mp4a-latm, -1, -1, -1, -1.0, 2, 48000, 5918037000, -1, -1)
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.MTK.AUDIO.DECODER.AAC, MediaFormat(audio/mp4a-latm, -1, -1, -1, -1.0, 2, 48000, 5918037000, -1, -1)
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.MTK.AUDIO.DECODER.AAC, MediaFormat(audio/mp4a-latm, -1, -1, -1, -1.0, 2, 48000, 5918037000, -1, -1)
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.MediaCodecTrackRenderer$DecoderInitializationException: Decoder init failed: OMX.MTK.AUDIO.DECODER.AAC, MediaFormat(audio/mp4a-latm, -1, -1, -1, -1.0, 2, 48000, 5918037000, -1, -1)
(a little different trace).
@ojw28 - I signed the agreement, but did so under my organisation (Plex). It's possible that it's waiting for my "authoriser" to sign off, although he should do it as soon as he gets a chance. The name I submitted it under was "Ian Bird".
ffmpeg -i dizzy.mp4 -sub_charenc CP1252 -i subtitle.srt -map 0:v -map 0:a -c copy -map 1 -c:s:0 mov_text -metadata:s:s:0 language=ger output.mp4
Could you try instantiating a new SubripParser in here:
for **MKV** containers: copy, ass, srt, ssa
So yes, actually the format is changed to MOV. But MKV should work, Matroska is supported within Exoplayer as i can remember
@ojw28 thanks for quick reply. We already implemented the downloading part for the media, but not the license retrieval.
@traninho If you are building it based on the StreamingSessionManager you should find a variable named **schemeInitData.data** this is the value that you should be using and not passing the **drmInitData** as a parameter.
@ojw28 @hakemcpu
@Override
- Tracks: video/avc, audio/mp4a-latm
- Tracks: video/avc, audio/mp4a-latm
- Tracks: video/avc, audio/mp4a-latm
@Override
Amit Samal
> Amit Samal
} catch (URISyntaxException e) {
I am playing with a customized CookieStore and see if I can get around this problem, no fruit yet.
@amitsamal I think I need to work with my backend team to get to know more about how Akamai cookie authentication work in this case.
https://community.akamai.com/thread/1846
One other strange finding is that if I don't use Picasso to load image in my app (my app basically shows a grid, each grid cell has an image, I am using Picasso to load the image, and I am also using ExoPlayer to play the video on the cell that's centered, the video is layered on top of the image). Once I get rid of the image loading part, everything works, I don't even have to do any of the workaround like encode "/" as "%2F", etc. Still digging and trying to figure out why.
@amitsamal I used to have a customized cookiemanager and cookiestore, and i also used to have some code to massage the manifest url, i removed all those. just by removing the Picasso image fetching code, the playback start to work.
@ojw28  a preliminary search of "cookie" in Picasso's source doesn't yield any result, I am going to try some other image loader, maybe Volley and Fresco, and see if the other image loader also cause the problem.
@amitsamal  @Michal-easycore I am not sure if you are also using Picasso or OkHttp, but if not, maybe look at any other library that you use that may be using java.net.HttpURLConnection and see if there's a way you can make sure they all use the same CookieManager instance. So far I have not figure out what part in OkHttp that's causing this Akamai token problem. Picasso or OkHttp is not calling CookieHandler.setDefault() to use a different CookieManager, so it must be somewhere in Picasso or OkHttp that's calling CookieHandler.getDefault(), grabbing that CookieManager and somehow modifying the values it stores.
@brillenheini Is this still valid? I am looking into getting the latest version of ExoPlayer into our app and we are using Akamai Token authentication on the server, I cant seem to find any solutions online except this thread.
@erkand-imeri Why RTMP? You can use server to remux the RTMP to HTTP-FLV.
How can play HLS video with shared secret code?
I has link video and secret code, I don't know how to play it.
@ferrytanu Sorry, just updated the comment to be clearer - I see the S3 garbage output.
@ferrytanu No, with the fixes suggested for the BufferOverflowException in this ticket, the behaviour is worse.
Yep - that's exactly my point - an easy entry point for special cases.
Btw, from my experience at least, mixing software and hardware decoders is a bit messy, especially when there's rotation to apply and each implementation (even h264 decoders) does something different.
Is there any update for this issue? I ran into the same problem. In most cases the framework chooses the right decoder. But sometimes, maybe for debug purpose, we need to switch to a specific decoder to see if it behaves the same as another decoder. I think currently it is possible but not that easy. Codec selectors are tightly coupled with the constructor of SimpleExoPlayer, which makes it hard to subclass SimpleExoplayer only to use another codec selector but still to keep other handy features of SimpleExoPlayer. I saw the changes in version 2.4. That is better and that is exactly what I would suggest - we don't have to subclass SimpleExoPlayer only in order to pick a different decoder.  I am trying to play a DASH stream with Widevine DRM using ExoPlayer on an ASUS Nexus Player.
07-09 10:04:51.272    6427-6588/com.mycompany.film E/ACodec signalError(omxError 0x80001005, internalError -2147483648)
java.lang.IllegalStateException
java.lang.IllegalStateException
07-22 15:17:04.753      165-535/? I/MDRMOemCrypto extracted deviceID FUGU_AKTJAODF_000201CC, res 0
07-22 15:17:04.753      165-535/? I/MDRMOemCrypto Calling GetKeyData
07-22 15:17:04.755      165-535/? I/MDRMOemCrypto Calling GetKeyData
@ojw28 I'll try that tomorrow (European time) and let you know!
@ojw28: And so a "tomorrow" became "three months" later - I am sorry! As expected, however, all the Widevine Streams in the demo app work fine. As to the differences between our streams and yours I have no idea yet...
When doing zerolatency streaming, you ignore Bidirectional-Frame prediction when encoding. At the decoders side you can disable it by setting the parameter --bframes 0.
I tried to open a File with Resolution (2048, 1152) which ends in an exception:
I am using custom media controller layout.
@ojw28 Although I don't see this as a major issue (e.g. index is not allowed in init, so the index byte range already gives the clue for init), but I am not building clients either; the good places to report and discuss this is DASH-IF. If industry would like to mandate init range then it should go into the spec. Its only the Spec (DASH or another interoperability document) that define what bugs are.
that's quite a list of different hardware versions for the s5 mini :(
@ojw28 This issue is still reproducing on many devices. I am still able to consistently reproduce the "Decrypt error result in session sid3 during encrypted block" error in the Demo app.
- Sony Xperia Z3 D6603 (5.1.1/23.4.A.1.232)
Fails on these devices:
- Samsung Galaxy S6 Active (5.0.2/LRX22G.G890AUCU2AOF3)
On selected samsung devices appropriate exception should be thrown.
java.lang.IllegalStateException
03-17 15:34:35.485 E/ACodec: [OMX.Exynos.avc.dec.secure] ERROR(0x80001000)
java.lang.IllegalStateException
03-17 15:34:35.485 E/ACodec: [OMX.Exynos.avc.dec.secure] ERROR(0x80001000)
seems to be an issue with
Unexpected exception loading stream
Unexpected exception loading stream
Unexpected exception loading stream
Unexpected exception loading stream
@Override
sampleSourceAudio,
Yes, thanks @andrewlewis, this issue can be closed unless @iNdieboyjeff's issue is relevant.
Sam
Hi Ojw,
Sam
El 3/7/2015 12:57, "ojw28" notifications@github.com escribi:
Thanks for the info, ojw.
El 3/7/2015 13:43, "ojw28" notifications@github.com escribi:
Deven
Deven
Deven
07-03 19:38:22.851      152-152/? I/DEBUG d4  0000000000000000  d5  0000000000000000
07-03 19:38:22.851      152-152/? I/DEBUG d6  0000000000000000  d7  0000000000000000
07-03 19:38:22.891      152-152/? I/DEBUG 40179be8 41f0e92d 4c0b2600 447c4680 68a56824  -..A.&.L.F|D$h.h
07-03 19:33:14.231    168-14546/? E/omx_vdec Set the VDEC_YAMATO_DISPLAY_FORMAT Color Format
07-03 19:33:14.281    168-14828/? E/VDL_RTOS **_YAMATO Enabled**_
07-03 19:33:25.221    168-14866/? E/VDL_RTOS **_YAMATO Enabled**_
07-03 19:33:36.041      152-152/? I/DEBUG d4  0000000000000000  d5  0000000000000000
07-03 19:33:36.041      152-152/? I/DEBUG d6  0000000000000000  d7  0000000000000000
07-03 19:33:36.071      152-152/? I/DEBUG 40179be8 41f0e92d 4c0b2600 447c4680 68a56824  -..A.&.L.F|D$h.h
E/ACodec  ( 6944): [OMX.qcom.video.decoder.avc] storeMetaDataInBuffers failed w/ err -2147483648
E/ACodec  ( 6944): Failed to allocate buffers after transitioning to IDLE state (error 0x80000000)
07-24 10:21:34.496  25288-25736/com.google.android.exoplayer.demo E/ACodec Failed to allocate buffers after transitioning to IDLE state (error 0x80000000)
java.lang.IllegalStateException
On 12 Aug 2015 13:48, "ojw28" notifications@github.com wrote:
On 12 Aug 2015 13:57, "ojw28" notifications@github.com wrote:
@ojw28
I have a timed text in a non standard format, I have parsed this into subrip format. Now I don't want to write this subrip to disk, instead directly use it in the ExoPlayer. I tried using ByteArrayDataSource with the subrip string and SingleSampleSource with Uri.Empty. This doesn't seem to work. any pointers?
> Uri uri = Uri.parse("android.resource://joel.moresubtitles/" + R.raw.german);
Then I don't know.
1) Set the device language to Arabic.
Kernel: Linux version 3.0.50 (d52lz@fulan-ubuntu12) (gcc version 4.6.x-google 20120106 (prerelease) (GCC) ) # 3 SMP PREEMPT Tue Apr 28 16:28:54 CST 2015
In parseAudioSampleEntry function, after parsing ESDS box, it does not check the ObjectTypeIndication of DecoderConfigDescriptor , and assumes its as AAC (0x40), and as per Audio ISO/IEC 14496-3 goes ahead and tries to use util.parseAudioSpecificConfig to parse out the channel Count and Sampling Frequency. This leads to index out of bounds exception because it assumes a minimum of 2 bytes of config data - whereas only 1 byte is present.
# LOG
I/ACodec [] Now uninitialized
I/ACodec [OMX.qcom.video.decoder.avc] Now Loaded
E/ACodec onConfigureComponent mime.c_str() = video/avc
E/ACodec [OMX.qcom.video.decoder.avc] storeMetaDataInBuffers failed w/ err -2147483648
I/ACodec [OMX.qcom.video.decoder.avc] DRC Mode: Port Reconfig Mode
W/ACodec do not know color format 0x7fa30c03 = 2141391875
I/ACodec TimeStampReoder feature is working!
I/ACodec [OMX.qcom.video.decoder.avc] Now Loaded->Idle
I/ACodec [OMX.qcom.video.decoder.avc] configureOutputBuffersFromNativeWindow setBufferCount : 22, minUndequeuedBuffers : 4
I/ACodec [] Now uninitialized
I/ACodec [OMX.qcom.video.decoder.avc] Now Idle->Executing
I/ACodec [OMX.SEC.aac.dec] Now Loaded
I/ACodec [OMX.qcom.video.decoder.avc] Now Executing
I/ACodec [OMX.qcom.video.decoder.avc] Now handling output port settings change
I/ACodec [OMX.SEC.aac.dec] Now Executing
I/ACodec [OMX.qcom.video.decoder.avc] configureOutputBuffersFromNativeWindow setBufferCount : 9, minUndequeuedBuffers : 4
I/ACodec [OMX.qcom.video.decoder.avc] Now Executing
W/ACodec do not know color format 0x7fa30c03 = 2141391875
@Override
@Override
@Override
} catch (Exception ex) {
Funny thing,
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=561000,RESOLUTION=512x288,CODECS="avc1.66.30, mp4a.40.2"
https://toutvuniver1-vh.akamaihd.net/i/012/mp4/p/2015-05-12_21_00_00_penelope_0358_,500,800,1200,.mp4.csmil/index_0_av.m3u8?null=&id=AgCfIUDYuDLuBREog1VSxcSBtuQGLapxXS9PkheLUTBiDXhUtt0focMzxYdNiG1N4CxQlQjxNcqKZA%3d%3d
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=925000,RESOLUTION=640x360,CODECS="avc1.66.30, mp4a.40.2"
https://toutvuniver1-vh.akamaihd.net/i/012/mp4/p/2015-05-12_21_00_00_penelope_0358_,500,800,1200,.mp4.csmil/index_1_av.m3u8?null=&id=AgCfIUDYuDLuBREog1VSxcSBtuQGLapxXS9PkheLUTBiDXhUtt0focMzxYdNiG1N4CxQlQjxNcqKZA%3d%3d
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1325000,RESOLUTION=852x480,CODECS="avc1.77.30, mp4a.40.2"
https://toutvuniver1-vh.akamaihd.net/i/012/mp4/p/2015-05-12_21_00_00_penelope_0358_,500,800,1200,.mp4.csmil/index_2_av.m3u8?null=&id=AgCfIUDYuDLuBREog1VSxcSBtuQGLapxXS9PkheLUTBiDXhUtt0focMzxYdNiG1N4CxQlQjxNcqKZA%3d%3d
Warning message AMessage(what = 'omx ', target = 5) = {
06-18 18:13:28.099  18290-18592/com.google.android.exoplayer.demo E/ACodec [OMX.google.h264.decoder] ERROR(0x80001001)
java.lang.IllegalStateException
Not sure what the idea here is...
- Force to show Subtitles.
- Is my private var to don't do this job again!
private Subtitle subttl;
private void parseSubtitile(String subtitle) {
// subtitle is the srt file content
Please help me!!
Are there any plans to support multiple periods in DASH?
Any explanations about this exception ?
So the problem comes from the multiple tracks ?
The stream in question is http://www.bbc.co.uk/mediaselector/playlists/hls/mobile_wifi/ak/bbc1.m3u8 (which is geoblocked to the UK) which I usually find to be a good test stream to work against when I have issues with my own streams.
How about this issue? @ojw28
sorry for my poor english first :cry:
Remote Branch: quic/kk_2.7_rb1.15
Reconstruct Branch: AU_LINUX_ANDROID_KK_2.7_RB1.04.04.00.007.018 +  NOTHING
[ro.product.model]: [SAMSUNG-SGH-I747]
[ro.product.name]: [d2uc]
[ro.revision]: [16]
This issue with webm videos (audio is playing but video is a black screen) is also happening with:
Exoplayer r1.5.13
#EXTM3U
oceans_aes-audio=65000-video=236000.m3u8
oceans_aes-audio=65000-video=370000.m3u8
oceans_aes-audio=65000-video=571000.m3u8
oceans_aes-audio=65000-video=878000.m3u8
oceans_aes-audio=65000-video=1340000.m3u8
oceans_aes-audio=65000-video=2042000.m3u8
oceans_aes-audio=65000.m3u8
@trandroid
@arqu, yes , B frames can be discarded.
do {
Nvm used it at the wrong location.
Is there something special that I should know about it? Let me know if you need additional information.
http://stream.goodluckapps.ir/fas/RomanMars_2015-1500k.ism/manifest
http://stream.goodluckapps.ir/fas/RomanMars_2015-1500k.ism/QualityLevels%28608%29/Fragments%28textstream_fas=0%29
http://stream.goodluckapps.ir/eng/RomanMars_2015-1500k.ism
http://stream.goodluckapps.ir/fas/RomanMars_2015-1500k.ism
throw new InterruptedIOException();
@ojw28
I want to distinguish between an HLS stream that has Video and Audio, and between an HLS stream that has only Audio.
06-12 00:19:20.374  11150-11194/? E/ACodec [OMX.qcom.video.decoder.avc] storeMetaDataInBuffers failed w/ err -2147483648
06-12 00:19:20.406  11150-11194/? E/ACodec signalError(omxError 0x80001001, internalError -2147483648)
java.lang.IllegalStateException
@Zo2m4bie ,  not many devices support multiple hardware decoders simultaneously.
@Ood-Tsen As I understand from your answer, it's no matter what kind of android sdk was installed on device. Maybe you know. Is there some method to know that device supports multiple hardware decoders simultaneously?
I have a couple of tests with two variants each:
It's a bit of an oddball-sounding case (even to me! :)), but I wanted to pass it along nonetheless.
@ojw28 I have signed the individual CLA.
@Override
@agalera-nice is this a public analytics project you are creating? I'm currently testing out different android players and need to perform some analysis of my own. Do you have recommendations for such tools?
@zsoltboldizsar - yes I did.
I have hls stream with 4 language support. How to select a language to show?
int messageNumber = customMessagesSent++;
} catch (InterruptedException e) {
Eventually I found one that strange.
ojw28,
Thanks again for your input. I've actually begun testing the HLS streams and it appears that the problem is solved. I don't know if there's some sort of memory issue with the Very Large (tm) MP3s or what, but the HLS handling seems to have solved it.
Did anyone successfully create complex test cases?
//Change Video
@Override
"http://www.youtube.com/api/manifest/dash/id/3aa39fa2cc27967f/source/youtuaaabe?"
<mspr:pro>mgIAAAEAAQCQAjwAVwBSAE0ASABFAEEARABFAFIAIAB4AG0AbABuAHMAPQAiAGgAdAB0AHAAOgAvAC8AcwBjAGgAZQBtAGEAcwAuAG0AaQBjAHIAbwBzAG8AZgB0AC4AYwBvAG0ALwBEAFIATQAvADIAMAAwADcALwAwADMALwBQAGwAYQB5AFIAZQBhAGQAeQBIAGUAYQBkAGUAcgAiACAAdgBlAHIAcwBpAG8AbgA9ACIANAAuADAALgAwAC4AMAAiAD4APABEAEEAVABBAD4APABQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsARQBZAEwARQBOAD4AMQA2ADwALwBLAEUAWQBMAEUATgA+ADwAQQBMAEcASQBEAD4AQQBFAFMAQwBUAFIAPAAvAEEATABHAEkARAA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsASQBEAD4AQQBtAGYAagBDAFQATwBQAGIARQBPAGwAMwBXAEQALwA1AG0AYwBlAG0AUQA9AD0APAAvAEsASQBEAD4APABDAEgARQBDAEsAUwBVAE0APgBEAFQAWABEAEEARgBIAHEAMQB3AGMAPQA8AC8AQwBIAEUAQwBLAFMAVQBNAD4APABMAEEAXwBVAFIATAA+AGgAdAB0AHAAOgAvAC8AcABsAGEAeQByAGUAYQBkAHkALgBkAGkAcgBlAGMAdAB0AGEAcABzAC4AbgBlAHQALwBwAHIALwBzAHYAYwAvAHIAaQBnAGgAdABzAG0AYQBuAGEAZwBlAHIALgBhAHMAbQB4ADwALwBMAEEAXwBVAFIATAA+ADwALwBEAEEAVABBAD4APAAvAFcAUgBNAEgARQBBAEQARQBSAD4A</mspr:pro>
<!-- Widevine -->
<cenc:pssh>CAESEAnjZwKPM0Nspd1g/+ZnHpkaDXdpZGV2aW5lX3Rlc3QiCQECAwQFBgcICQ==</cenc:pssh>
Nadim.
Thanks @ojw28 for your answer.
<mspr:pro>mgIAAAEAAQCQAjwAVwBSAE0ASABFAEEARABFAFIAIAB4AG0AbABuAHMAPQAiAGgAdAB0AHAAOgAvAC8AcwBjAGgAZQBtAGEAcwAuAG0AaQBjAHIAbwBzAG8AZgB0AC4AYwBvAG0ALwBEAFIATQAvADIAMAAwADcALwAwADMALwBQAGwAYQB5AFIAZQBhAGQAeQBIAGUAYQBkAGUAcgAiACAAdgBlAHIAcwBpAG8AbgA9ACIANAAuADAALgAwAC4AMAAiAD4APABEAEEAVABBAD4APABQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsARQBZAEwARQBOAD4AMQA2ADwALwBLAEUAWQBMAEUATgA+ADwAQQBMAEcASQBEAD4AQQBFAFMAQwBUAFIAPAAvAEEATABHAEkARAA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsASQBEAD4AQQBtAGYAagBDAFQATwBQAGIARQBPAGwAMwBXAEQALwA1AG0AYwBlAG0AUQA9AD0APAAvAEsASQBEAD4APABDAEgARQBDAEsAUwBVAE0APgBEAFQAWABEAEEARgBIAHEAMQB3AGMAPQA8AC8AQwBIAEUAQwBLAFMAVQBNAD4APABMAEEAXwBVAFIATAA+AGgAdAB0AHAAOgAvAC8AcABsAGEAeQByAGUAYQBkAHkALgBkAGkAcgBlAGMAdAB0AGEAcABzAC4AbgBlAHQALwBwAHIALwBzAHYAYwAvAHIAaQBnAGgAdABzAG0AYQBuAGEAZwBlAHIALgBhAHMAbQB4ADwALwBMAEEAXwBVAFIATAA+ADwALwBEAEEAVABBAD4APAAvAFcAUgBNAEgARQBBAEQARQBSAD4A</mspr:pro>
<cenc:pssh>CAESEAnjZwKPM0Nspd1g/+ZnHpkaDXdpZGV2aW5lX3Rlc3QiCQECAwQFBgcICQ==</cenc:pssh>
<mspr:pro>mgIAAAEAAQCQAjwAVwBSAE0ASABFAEEARABFAFIAIAB4AG0AbABuAHMAPQAiAGgAdAB0AHAAOgAvAC8AcwBjAGgAZQBtAGEAcwAuAG0AaQBjAHIAbwBzAG8AZgB0AC4AYwBvAG0ALwBEAFIATQAvADIAMAAwADcALwAwADMALwBQAGwAYQB5AFIAZQBhAGQAeQBIAGUAYQBkAGUAcgAiACAAdgBlAHIAcwBpAG8AbgA9ACIANAAuADAALgAwAC4AMAAiAD4APABEAEEAVABBAD4APABQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsARQBZAEwARQBOAD4AMQA2ADwALwBLAEUAWQBMAEUATgA+ADwAQQBMAEcASQBEAD4AQQBFAFMAQwBUAFIAPAAvAEEATABHAEkARAA+ADwALwBQAFIATwBUAEUAQwBUAEkATgBGAE8APgA8AEsASQBEAD4AQQBtAGYAagBDAFQATwBQAGIARQBPAGwAMwBXAEQALwA1AG0AYwBlAG0AUQA9AD0APAAvAEsASQBEAD4APABDAEgARQBDAEsAUwBVAE0APgBEAFQAWABEAEEARgBIAHEAMQB3AGMAPQA8AC8AQwBIAEUAQwBLAFMAVQBNAD4APABMAEEAXwBVAFIATAA+AGgAdAB0AHAAOgAvAC8AcABsAGEAeQByAGUAYQBkAHkALgBkAGkAcgBlAGMAdAB0AGEAcABzAC4AbgBlAHQALwBwAHIALwBzAHYAYwAvAHIAaQBnAGgAdABzAG0AYQBuAGEAZwBlAHIALgBhAHMAbQB4ADwALwBMAEEAXwBVAFIATAA+ADwALwBEAEEAVABBAD4APAAvAFcAUgBNAEgARQBBAEQARQBSAD4A</mspr:pro>
<cenc:pssh>CAESEAnjZwKPM0Nspd1g/+ZnHpkaDXdpZGV2aW5lX3Rlc3QiCQECAwQFBgcICQ==</cenc:pssh>
@ojw28 you were right, the cenc_pssh elements in our manifest were invalid. We were using only the data fields of the PSSH box instead of the whole PSSH. Now is working properly.
#### Second Issue
@Override
On Fri, Aug 21, 2015 at 12:30 PM, ojw28 notifications@github.com wrote:
Florian
Hi @ojw28,
Tested on HTC M9, Galaxy S4, Galaxy S5, Nexus 4,  Nexus 5, LG G2, LG 2 pro  and others having isCryptoSchemeSupported() returns true.
The following is the sample of the exceptions we are seeing
On Intex N11
On Sun, May 31, 2015 at 10:12 PM, ojw28 notifications@github.com wrote:
E/ACodec  (16088): Unable to instantiate codec 'OMX.qcom.video.decoder.avc'.
E/ACodec  (16088): signalError(omxError 0x80001003, internalError -2147483648)
E/ExoPlayerImplInternal(16088):     at fuo.handleMessage(SourceFile:1434)
E/YouTube (16088):  at fuz.o(SourceFile:400)
E/YouTube (16088):  at fuz.a(SourceFile:768)
E/YouTube (16088):  at fuz.a(SourceFile:11524)
E/YouTube (16088):  at oqm.a(SourceFile:134)
E/YouTube (16088):  at fuo.handleMessage(SourceFile:1434)
E/YouTube (16088):  at fuz.o(SourceFile:386)
Nexus 4
E/ACodec  (24599): Unable to instantiate codec 'OMX.qcom.video.decoder.avc'.
E/ACodec  (24599): signalError(omxError 0x80001003, internalError -2147483648)
URL: http://manoto1_live-lh.akamaihd.net/i/Manoto1_0@50710/index_756_av-b.m3u8?sd=10&rebase=on
I also wonder how did you get the `0x03 ISO/IEC 11172-3 Audio`, `0x04 ISO/IEC 13818-3 Audio`?
https://tools.ietf.org/html/draft-pantos-http-live-streaming-16#page-5
@andhie can you please post a snippet of your solution based on @ojw28 's suggestion to expose MediaCodecTrackRenderer's state transition?
I get this issue when trying to play a Mixed Playlist:
@Override
@Override
UnsupportedSchemeException
Build: LXB22.46-32
Radio: msm
Network: Claro AR
W/BackgroundThrea( 6350): type=1400 audit(0.0:6956): avc: denied { search } for uid=10127 name="thermal" dev="sysfs" ino=7437 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs_thermal:s0 tclass=dir permissive=0
W/BackgroundThrea( 6350): type=1400 audit(0.0:6957): avc: denied { search } for uid=10127 name="thermal" dev="sysfs" ino=7437 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs_thermal:s0 tclass=dir permissive=0
W/BackgroundThrea( 6350): type=1400 audit(0.0:6958): avc: denied { search } for uid=10127 name="thermal" dev="sysfs" ino=7437 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs_thermal:s0 tclass=dir permissive=0
W/BackgroundThrea( 6350): type=1400 audit(0.0:6959): avc: denied { search } for uid=10127 name="thermal" dev="sysfs" ino=7437 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs_thermal:s0 tclass=dir permissive=0
W/WVCdm   (  311): Could not read /data/mediadrm/IDM1013/ay64.dat2: No such file or directory
E/QSEECOMAPI: (  311): Error::Cannot open the file /system/etc/firmware/widevine.mdt
D/DrmWidevineDash(  311): OEMCrypto_Initialize: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_IsKeyboxValid: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetDeviceID: starts! deviceID=0xb8afd888, idLength=0xb3562998
D/DrmWidevineDash(  311): OEMCrypto_GetDeviceID: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetKeyData: starts! keyData=0xb3562964, keyDataLength=0xb356295c
D/DrmWidevineDash(  311): OEMCrypto_GetKeyData: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetKeyData: starts! keyData=0xb3562964, keyDataLength=0xb356295c
D/DrmWidevineDash(  311): OEMCrypto_GetKeyData: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetHDCPCapability: ends! returns 0x0
D/DrmWidevineDash(  311): OEMCrypto_Terminate: starts!
D/DrmWidevineDash(  311): OEMCrypto_Terminate: ends! returns 0
W/WVCdm   (  311): Could not read /data/mediadrm/IDM1013/ay64.dat2: No such file or directory
E/QSEECOMAPI: (  311): Error::Cannot open the file /system/etc/firmware/widevine.mdt
D/DrmWidevineDash(  311): OEMCrypto_Initialize: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_IsKeyboxValid: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_OpenSession: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetRandom: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_LoadDeviceRSAKey: starts!SID=1, wrapped_rsa_key=0xb9243be0, wrapped_rsa_key_length=1280
D/DrmWidevineDash(  311): OEMCrypto_LoadDeviceRSAKey: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetDeviceID: starts! deviceID=0xb8afd8a8, idLength=0xb4055730
D/DrmWidevineDash(  311): OEMCrypto_GetDeviceID: ends! returns 0
D/DrmWidevineDash(  311): OEMCrypto_GetHDCPCapability: ends! returns 0x0
D/DrmWidevineDash(  311): OEMCrypto_GenerateNonce: ends! returns 0
D/DrmWidevineDash(  311): message_length=1628, signature=0xb91d8ab8, signature_length=3020248852
D/DrmWidevineDash(  311): OEMCrypto_GenerateRSASignature returns 0
I/MediaCodec(21504): name=OMX.qcom.video.decoder.avc.secure isType=false encoder=false
I/MediaCodec(21504): name=OMX.google.aac.decoder isType=false encoder=false
W/ACodec  (21504): do not know color format 0x7fa30c04 = 2141391876
D/DrmWidevineDash(  311): OEMCrypto_DeriveKeysFromSessionKey: ends! returns 0
D/DrmWidevineDash(  311): signature_length=32, enc_mac_key_iv=0xb913ff5a, enc_mac_key=0xb913ff6c, num_keys=3, pst=0, pst_length=0
E/qdoverlay(  294): src msmfb_img w=640 h=384 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=640 h=384 format=27 MDP_Y_CBCR_H2V2_VENUS
W/BackgroundThrea( 6350): type=1400 audit(0.0:6960): avc: denied { search } for uid=10127 name="thermal" dev="sysfs" ino=7437 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs_thermal:s0 tclass=dir permissive=0
W/BackgroundThrea( 6350): type=1400 audit(0.0:6961): avc: denied { search } for uid=10127 name="thermal" dev="sysfs" ino=7437 scontext=u:r:untrusted_app:s0 tcontext=u:object_r:sysfs_thermal:s0 tclass=dir permissive=0
W/ACodec  (21504): do not know color format 0x7fa30c04 = 2141391876
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
E/qdoverlay(  294): src msmfb_img w=1280 h=736 format=27 MDP_Y_CBCR_H2V2_VENUS
@Override
@Override
@Override
@crushonme
private final BandwidthMeter bandwidthMeter;
if (isHigher) {
long durationBeforeThisSegmentUs = thisChunk.startTimeUs - playbackPositionUs;
@Override
@Override
@Override
Are this a Bug?
at android.os.Handler.dispatchMessage(Handler.java:98) ~[na:0.0]
at android.os.HandlerThread.run(HandlerThread.java:61) ~[na:0.0]
at com.google.android.exoplayer.util.PriorityHandlerThread.run(PriorityHandlerThread.java:40) ~[na:0.0]
at com.google.android.exoplayer.extractor.ts.AdtsExtractor.init(AdtsExtractor.java:54) ~[na:0.0]
Issue:
startMediaTimeUs is being incorrectly used as startMediaTimeState in several places as follows
result as exception:
Is there any way to use Icy protocol?
@ojw28 Exactly.  seekTo(0) doesn't seem to be getting me to the edge.  And I'd rather not hurt UX by having to rebuffer, even more so on devices with poor network connection.  Is there a way to cache the buffer to disk?
@ojw28 Is there a way I can force it to update the playlist without having to re prepare the player?
@ojw28 Thank you for all the help!
com.google.android.exoplayer.ExoPlaybackException: com.google.android.exoplayer.upstream.HttpDataSource$HttpDataSourceException: Unable to connect to /storage/emulated/0/Android/data/com.getvictorious.staging.eatyourkimchi/files/DCIM/Video/Video-20150518_142803.mp4
Please advise what could cause this exception.
private final Uri uri;
@Override
https://github.com/vbartacek/aacdecoder-android
Any progress of any kind of this ? @Ood-Tsen @ericcbm
I hope that in the future there is a better solution for this
Have any idea what change could have caused this?
It seems that the "if" condition doesn't become true on relatively old android versions (mine is 4.2.2), but it works perfectly on newer ones (for example LG G2 - 4.4.2)
I'm trying to think what is the best solution here...
This seems to be a different issue.
The problem reoccurs there, but the device doesn't identifies itself as "rk30sdk" but as "i9100".
I have a feeling that the problem is not device-dependent, but will reoccur on all devices with SDK <= 17 and constantly adding more and more Chinese devices - will make this workaround very hard to maintain (such Chinese devices are getting more and more popular in my country and many others)
private Uri mUri;
@Override
@Override
public void prepare(Uri uri) {
On May 15, 2015 5:26 PM, "ojw28" notifications@github.com wrote:
<Role schemeIdUrn="urn:mpeg:DASH:role:2011" value="main" />
<AdaptationSet segmentAlignment="true" lang="deu" subsegmentStartsWithSAP="1">
<Role schemeIdUrn="urn:mpeg:DASH:role:2011" value="main" />
<AdaptationSet segmentAlignment="true" lang="spa">
<Role schemeIdUrn="urn:mpeg:DASH:role:2011" value="dub" />
<Role schemeIdUrn="urn:mpeg:DASH:role:2011" value="alternate" />
#EXTM3U
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=264000,CODECS="avc1.42001e, mp4a.40.2",RESOLUTION=416x234
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=464000,CODECS="avc1.42001e, mp4a.40.2",RESOLUTION=480x270
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=664000,CODECS="avc1.42001e, mp4a.40.2",RESOLUTION=640x360
#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=5128000,CODECS="avc1.4d001f, mp4a.40.2",RESOLUTION=1280x720
I find the response header has including the "Alternate-Protocol" as following.
java.lang.IllegalStateException
Deven
java.lang.IllegalStateException
even If i am trying to play in Micromax a77 its showing the error
Author: ojw28 olly@google.com
Hi Build no is LMY47V
@iceteahh can you try the same thing with a TextureView? From my understanding, SurfaceView is quite limited.
@ojw28 thanks for the explanation it makes sense ;)
What is the correct way to approach this?
Hi @ojw28 , I am not sure this mpd format is correct or not since I am not the expert of dash.
Stream info of my dash chunck using ffprobe is
codec_type=video
codec_tag_string=avc1
TAG:language=und
codec_name=aac
codec_long_name=AAC (Advanced Audio Coding)
codec_type=audio
codec_tag_string=mp4a
TAG:language=und
Is there any way i can use same segmentList for playing dash??
Is there any improvment on this ticket?
Marco
Hi Oliver
<AdaptationSet segmentAlignment="true" lang="fr">
Marco
From: ojw28 <notifications@github.com<mailto:notifications@github.com>>
I am working on device that can do 4K/60fps/10bits actually (for TV market)
From: ojw28 <notifications@github.com<mailto:notifications@github.com>>
Marco
I am working on device that can do 4K/60fps/10bits actually (for TV market)
From: ojw28 <notifications@github.com<mailto:notifications@github.com>>
So the correct way would be to implement a custom MKV/AVI extractor?
Hello @Ood-Tsen that looks quite good! Just tested & integrated your port. Thank you for this! By using MediaExtractor we also have a chance to read infos from all other formats a target device supports. Great.
@Ood-Tsen will this be integrated into Exo?
@Ood-Tsen let's create the PR! :)
@ojw28 and what about .avi files? :)
@Ood-Tsen will you still be able to help on this or do you need assistance?
I'm in a situation where I need to get the bitrate for analytic purposes however I can't seen to find a working way.  The BandwidthMeter works for DASH streams but not HLS which is the format we are using.  Any help would be greatly appreciated.
@ojw28 I guess a more appropriate question is, How should I be getting the bitrate for the HLS stream?
> Op 6 mei 2015 om 22:06 heeft ojw28 notifications@github.com het volgende geschreven:
> On 07 May 2015, at 01:12, ojw28 notifications@github.com wrote:
So I am wondering that exoplayer will support the 360 degree video in the future?
@mjsibbald  sounds amazing! Will you share your implementation in the future or any help for it?
Hi @buptcoder
Hi @Ood-Tsen / @mjsibbald / everyone,
Problems:
@Override
@Override
@Override
BVCrypto.Init(null);
} catch (NoSuchPaddingException e) {
file = new RandomAccessFile(uri, "r");
file = new RandomAccessFile(dataSpec.uri.getPath(), "r");
throw new EOFException();
Deven
I randomly get the following exception:
05-03 13:41:39.468  23310-25973/me.samba.app W/MessageQueue Handler (com.google.android.exoplayer.upstream.Loader$LoadTask) {44fe3a10} sending message to a Handler on a dead thread
On Tue, May 5, 2015 at 11:41 AM, ojw28 notifications@github.com wrote:
On Thu, 20 Aug 2015 12:50 ojw28 notifications@github.com wrote:
@issamux sounds like two different issues, The Handler issue is safe to ignore as stated. Its just a warning, they shouldn't really be exposed to the user.
It overloads app specific logs with
@Override
Yes, I'm currently using the existing implementation and only testing from my HLS use cases. I should definitely take a look what happens with incomplete data and how it handles.
Couple of questions:
Implementation is very custom and will not fit as general solution that
> Exo.
@laminsk You need to make sure your server returns a Cache-Control header, so that OkHttp can cache the response.
@Override
`02-05 17:16:23.193 7019-7880/com.google.android.exoplayer.demo D/CacheMonitorInterceptor: response: Response{protocol=http/1.1, code=206, message=Partial Content, url=http://thesixteendigital.com.s3.amazonaws.com/testfiles/Hallelujah.mp3}
02-05 17:16:23.193 7019-7880/com.google.android.exoplayer.demo D/CacheMonitorInterceptor: response network: Response{protocol=http/1.1, code=206, message=Partial Content, url=http://thesixteendigital.com.s3.amazonaws.com/testfiles/Hallelujah.mp3}
I'm not familiar with mp3, not sure why it always request two times.
@Override
@ceetah If you set a breakpoint in your intercept code, then you will know what happened. You may want to use addNetworkInterceptor instead of addInterceptor
@ceetah Why not set CacheControl via OkHttpDataSource directly instead of Interceptor?
@ceetah could you please post your implementation code here? Thank you.
@ceetah how did you disregard it?
@ojw28 is this still on the roadmap or the decision to make the file system healthy has already made this removed from roadmap.
@ceetah I'd like to know too. Thanks :)
@giangttpham You could checkout my branch, it works for HLS cache but mp3.
@b95505017 Hi, Thank you so much for the quick response. I followed your example but for DASH instead of HLS, and it's caching the data. The problem is, when I did a seek backward, instead of using the cached data, it went and downloaded the stream again, that's not what we want right?
@giangttpham That's what the issue is. You could check whether the byte range of the request is unbounded, if so, then that's the same reason for mp3 not being cached.
@Bhavin20290  hey how are you able to play or stream okhttp ...can you share your source code project please because i have been trying to do that especially with mp4 file streams.
Ya ofcourse i have shared my code
@eneim Can u give me solution?
@eneim
@ceetah ,how to disregard 206 partial responses?
@Override
//      Log.d("SOGOU_CAR_MUSIC", "Range " + rangeRequest);
//      Log.d("SOGOU_CAR_MUSIC", "Not a range request");
if (!allowGzip) {
@zhangvb the link you gave is dead.
@Override
.removeHeader("Pragma")
@Override
@Override
@ojw28 ok. I was hoping to use this then play the locally stored sources ?
2. The format of decoded buffer is YUV (e.q. NV21).
Need to transform to RGB.
@Ood-Tsen Transformation is not a big deal, i don't know how to grab a Frame.
playback has occurred (currentPos > 100) otherwise you'll pull a black
Vadim
@Override
if (earlyUs < -30000) {
if (earlyUs < -300000) {
> > ojw28 commented 7 hours ago
From: ojw28 notifications@github.com
04-22 16:45:01.752  25179-25179/com.google.android.exoplayer.demo D/mali_winsys new_window_surface returns 0x3000
and in the anormal execution:
04-22 16:25:28.462  25179-25179/com.google.android.exoplayer.demo D/mali_winsys new_window_surface returns 0x3000
private static final int NAL_UNIT_TYPE_AUD = 9;
GOPs, and several times I got a preparing time of several seconds and my
On Fri, May 22, 2015 at 10:26 PM, ojw28 notifications@github.com wrote:
On Tue, May 26, 2015 at 12:19 PM, Sergio Moreno tresvecesseis@gmail.com
fresh tree and it seems to be working properly, so it was a problem on my side. Everything is ok.
On Tue, May 26, 2015 at 5:37 PM, ojw28 notifications@github.com wrote:
> obviously doing something different to what you're doing.
On Wed, Apr 22, 2015 at 6:34 PM, ojw28 notifications@github.com wrote:
<cenc:pssh>...</cenc:pssh>
<BS bits="8" string="CID=Toto"/>
</GPACDRM>
<cenc:pssh> J5kmSWp/XSXaafKzsnmafw== </cenc:pssh>
<script src="lib/ga.js"></script>
video.addEventListener('encrypted', handleEncrypted, false);
function handleEncrypted(event) {
console.log('encrypted event:', event);
function toBase64(u8arr) {
return btoa(String.fromCharCode.apply(null, u8arr)).
alg: 'A128KW',
Do you guys have any suggestions what could cause this error?
On Tue, Apr 21, 2015 at 11:17 AM, ojw28 notifications@github.com wrote:
On Tue, Apr 21, 2015 at 8:13 PM, ojw28 notifications@github.com wrote:
On Tue, Apr 21, 2015 at 11:35 PM, Nati Dykstein nati@samba.me wrote:
> On Tue, Apr 21, 2015 at 8:13 PM, ojw28 notifications@github.com wrote:
On Wed, Apr 22, 2015 at 2:16 PM, Nati Dykstein nati@samba.me wrote:
> On Tue, Apr 21, 2015 at 11:35 PM, Nati Dykstein nati@samba.me wrote:
> > On Tue, Apr 21, 2015 at 8:13 PM, ojw28 notifications@github.com wrote:
- This happens randomly. (need to stop-restart the instances multiple times before it happens)
- The address of the corrupt block is different for each crash.(For example: 0x61e42960, 0x666af000, etc..)
04-20 10:22:05.974  12441-12441/me.samba.app D/ExoPlayerTextureView ExoPlayer 19 onPlayerStateChanged(): STATE_READY
@ojw28 Are you familiar with any problems related to ExoPlayer.stop() method? It really seems that this happens only when invoking stop() (When releasing the player and preparing everything is fine)
I keep getting this issue while playing multi-variant HLS.
I have two android mini-tv boxes: one is CX-919 with 4.2.2 "stock" ROM, the other one is MK808 with 4.1.
On CX-919 you see the crash above, while on MK808 I see strange rendering artifacts (like split screen and snow during playback).
``` Java
extractor = previousTsChunk.extractor;
``` Java
However,
``` Java
``` Java
// Check if encryption is specified.
if (HlsMediaPlaylist.ENCRYPTION_METHOD_AES_128.equals(segment.encryptionMethod)) {
"Dizzy" and "Dizzy (https->http redirect)"- says it's ready, but doesn't play. It's just stuck on the video frame of the cat. I can skip frames, but it's always on paused mode.
Does anyone know what could be causing this or any way to work around it?
Build number: JZO54K.N7000XXLT9
LOGCAT
and radio stream: http://boorime.com:8000/boorime
Each of the below lines is a clip.
Unbelievable ... I reboot the phone and it works ... I love computers ...
I can reproduce the error with this link: http://www.ivoox.com/universo-iker-t1x24-dos-noche_mn_10481190_api_1.mp3 and in a Samsung S3 device. Please, could you try with your devices if your can reproduce it?
The problematic device:
On Thu, Apr 16, 2015 at 1:12 PM, ojw28 notifications@github.com wrote:
Alternatively to writing a MPD specific fetcher one could use the DashChunkSource and pass on the location-URL (from its currentManifest reference) as parameter to the ManifestFetcher.
@ojw28 The pull request has been updated.
On Tue, Apr 14, 2015 at 12:04 PM, ojw28 notifications@github.com wrote:
Anw, thanks for your reply!
@kkk0612 and @fougere-mike could you please use this link and log the issue with Amazon? https://developer.amazon.com/appsandservices/support/contact/contact-us
http://a-hls.blip.tv/07/18/7396/Polaristest-RYANGOSLINGINTHEHAUNTEDMANSION-TheDailyByte659.m3u8
http://a-hls.blip.tv/07/18/7396/Polaristest-RYANGOSLINGINTHEHAUNTEDMANSION-TheDailyByte659.m3u8
Note: Recompile with -Xlint:deprecation for details.
![capturaxml](https://cloud.githubusercontent.com/assets/9380321/7112269/62207540-e1c8-11e4-801c-ed810ac45dcb.PNG)
keyRequestProperties.put("body", "<?xml version='1.0' encoding='utf-8'?><PlayReadyInitiator xmlns='http://schemas.microsoft.com/DRM/2007/03/protocols/'><LicenseServerUriOverride><LA_URL></LA_URL></LicenseServerUriOverride><SetCustomData><CustomData>AU_ZGAE6U_hyfH</CustomData></SetCustomData></PlayReadyInitiator>");
keyRequestProperties.put("CustomData","AU_ZGAE6U_hyfH");
@mingfai
Is there any workaround with such streams.
When playing an HLS stream via ExoPlayer on the Galaxy S3 Mini (Android 4.1.2), the player freezes as soon as adaptive streaming causes a stream switch. This occurs both with ADAPTIVE_MODE_SPLICE and ADAPTIVE_MODE_ABRUPT. With ADAPTIVE_MODE_NONE, since no stream switching occurs, HLS streams play perfectly. The following log entries seem to be associated with the freeze-up:
#EXTM3U
800/EXAMPLE_800k_640x360_h264_800_aac_128.m3u8
1200/EXAMPLE_1200k_960x540_h264_1200_aac_128.m3u8
2400/EXAMPLE_2400k_960x540_h264_2400_aac_128.m3u8
3200/EXAMPLE_3200k_1280x720_h264_3200_aac_128.m3u8
4200/EXAMPLE_4200k_1920x1080_h264_4200_aac_128.m3u8
5200/EXAMPLE_5200k_1920x1080_h264_5200_aac_128.m3u8
Thanks! To be clear, when you say "we should automatically filter those that are at resolutions beyond that supported by the device" - does that mean the code was supposed to already be doing that and it's failing to, or is it something that has not been implemented yet? I couldn't find any code that specifically tried to take into consideration the width and height of a Variant.
ojw28 do you familiar with this issue? Thank you
codecs="mp4a.40.2">
<AudioChannelConfiguration
</AudioChannelConfiguration>
codecs="mp4a.40.2">
<AudioChannelConfiguration
</AudioChannelConfiguration>
@ngoclinh49  can you share more about your solution to change video source? I'm facing same issue as @dnutcracker.
// create an ima player with the generated video object and additional information such as title and advert
proxy);
We are trying to play mp3 files and it is giving mediacodecexception on some devices.
Following exception is seen in logcat.
One thing to note is that `Util.Product` is "vodafone_at" in my case. `android.os.Build.DEVICE` instead contains the expected "protou" string.
My test video is "http://pili-media.huacehuaban.com/10000009021459869533.mp4".
"http://pili-media.huacehuaban.com/10000009021459869533.mp4", Util.TYPE_OTHER),**
bitArray.skipBits(1); // qpprime_y_zero_transform_bypass_flag
// Extended SAR
int sar_width = bitArray.readBits(16);
int sar_height = bitArray.readBits(16);
Thanks for any pointers or workarounds!
Caused by: java.lang.IllegalArgumentException: Top bit not zero: -343067581
java.lang.IllegalStateException
Nexus 7 (the old one):
Exception: null
int messageNumber = customMessagesSent++;
} catch (InterruptedException e) {
@ojw28 Any updates on aligning the Chunk and HLS packages? It would be nice if we could use setSelectedTrack() for Audio tracks just as we can with DASH in the future.
In my case on the master branch the issue happens when using a non standard port (i.e. 10583) and variant urls with relative paths.
#EXTM3U
java.lang.IllegalStateException
have full log with additional MtkOMX library info: http://pastebin.com/raw.php?i=qv24QTNB
A Use Case might be when connected to a mobile network and moving, so the connection is variable - buffering ahead to the end of the track would make playback more tolerant of lost signal (tunnels, etc)
I need to add a CustomData in the Soap Envelope to request a playready licence from a Nexus Player.
<challenge>
<ALGID>AESCTR</ALGID>
<KID>aabbccddeegghh</KID>
<CustomData>714A066E-09F1-09F1-714A066E714A066E</CustomData>
<EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes128-cbc"/>
<EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
<CipherData>
<CipherValue>6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a</CipherValue>
</CipherData>
</EncryptedKey>
<CipherData>
</CipherData>
</EncryptedData>
<SignatureValue>6P6Cv6aX7uf46P6Cv6av6azo6P6Cv6a</SignatureValue>
</Challenge>
To add these "CustomData", I relied on OptionalKeyParamaters as documented by Exoplayer API :
@Override
@TargetApi(18)
@Override
<challenge>
<ALGID>AESCTR</ALGID>
<KID>aabbccddeegghh</KID>
<EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes128-cbc"/>
<EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
<CipherData>
<CipherValue>6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a6P6Cv6a</CipherValue>
</CipherData>
</EncryptedKey>
<CipherData>
</CipherData>
</EncryptedData>
<SignatureValue>6P6Cv6aX7uf46P6Cv6av6azo6P6Cv6a</SignatureValue>
</Challenge>
Orange decline toute responsabilite si ce message a ete altere, deforme ou falsifie. Merci.
This message and its attachments may contain confidential or privileged information that may be protected by law;
java.lang.IllegalStateException
Is there a better solution than manipulating this constant?
major_brand     : isom
compatible_brands: isomiso2avc1mp41
Audio
Bit rate mode                            : Constant
Compression mode                         : Lossy
finne$ mediainfo bomben.mp3
Complete name                            : bomben.mp3
Audio
Bit rate mode                            : Constant
Compression mode                         : Lossy
Audio
Bit rate mode                            : Constant
Compression mode                         : Lossy
@akhilspillai do you have some idea about this issue, i have the same problem
`https://foobar.com/video/ABCD1234?videoformat=dash&quality=video360p&time=0`
The following is a temporary special-case patch to handle this case. A proper fix would be better.
``` diff
if (uri.isAbsolute()) {
return uri;
@ojw28, in my humble opinion I don't think implementing remove_dot_segments is an urgent need. I don't know any CDN, media server or encoder that is producing HLS streams whose segments/media playlists/encryption urls are defined using "../" or "./" (much less using other character combinations like /../ or /./).
Writing library                : LAMELAME_MAJOR_VERSI
Audio
Bit rate mode                  : Constant
Compression mode               : Lossy
Writing library                : LAMELAME_MAJOR_VERSI
02-27 02:03:07.559 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded
02-27 02:03:07.587 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded
02-27 02:03:07.639 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Executing
02-27 02:10:55.134 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded
02-27 02:10:55.147 D/ACodec  (27614): ~ACodec
02-27 02:10:55.171 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Loaded
02-27 02:10:55.248 D/ACodec  (27614): [OMX.MTK.AUDIO.DECODER.MP3] Now Executing
Presitio 7500 running 4.2.2
@ojw28 Did you receive the song?
(status is  ExoPlayer.STATE_READY)
Please see code below.
Uri uri = Uri.parse("asset:///" + "BGM_328.mp3");
// ExoPlayer.Listener
@Override
El 25/6/2015 9:21 p. m., "ojw28" notifications@github.com escribi:
Sorry, I put an incomplete github name (tresvecesseis instead of
tresvecesseis@gmail.com), it should be ok now
On Thu, Jun 25, 2015 at 11:29 PM, ojw28 notifications@github.com wrote:
ok, I was using audioSpecificConfig because I thought  it would reduce the
On Thu, Jun 25, 2015 at 11:43 PM, ojw28 notifications@github.com wrote:
- GEOB type is commonly used by dynamic ads providers to include in the
Also, can you explain "because the decoder may not be able to decoder at a speed much faster than real-time" ?
Keeping the same surface among activities is quiet hard indeed.
@ojw28 The need for switching surfaces is extremely common.  Without configChanges 'orientation', seemless playback through rotation requires a new view/surface.  configChanges 'orientation' is a poor solution for any semi-complicated design.  Really surprised at this limitation of ExoPlayer.
@Override
clearStaleBlacklistedPlaylists();
@ojw28 I am also having this problem (log attache below).
08-18 17:08:00.980   862   862 D EpgObserver: getAccurateEpgItem epgItem[channelId: 637, mediaId: 503538, title: / "  ", 1 , 3 ., scheduledStartTime: 1439906100000, scheduledEndTime: 1439907600000]
woops wrong repo!
![](http://i.giphy.com/kKD3A7QLIhhVm.gif)
#fridayAwkwardMoments
given a line that defines a variant it added information from CODEC=
RESOLUTION or alternate rendition groups as part of the CODEC field).
although is making codecs field storing information that is not related
RESOLUTION or alternate rendition groups as part of the CODEC field).
although is making codecs field storing information that is not related
As far as I see, doesnt make sense that track parameter received by
D/WifiNative-wlan0(  936): doString: SIGNAL_POLL
V/AudioTrack(  936): createTrack_l() output 3 afLatency 50
D/ACDB-LOADER(  264): ACDB -> AUDIO_SET_AFE_CAL
E/ACodec  ( 9383): [OMX.qcom.video.decoder.avc] storeMetaDataInBuffers failed w/ err -2147483648
I/ACodec  ( 9383): DRC Mode: Port Reconfig Mode
V/AudioTrack( 9383): createTrack_l() output 2 afLatency 160
V/AudioFlinger(  264): stop(4100), calling pid 936
02-17 13:51:29.202      716-895/? D/WifiNative-wlan0 doString: SIGNAL_POLL
02-17 13:51:29.242      716-895/? D/WifiNative-wlan0 returned true
02-17 13:51:31.585      716-716/? V/AudioService Receive BEATS_NATIVE_NOTIFICATION from Native AudioTrack!!! notificationOn=true
02-17 13:51:31.585      716-716/? V/AudioService Receive BEATS_NATIVE_NOTIFICATION from Native AudioTrack!!! notificationOn=true
02-17 13:51:32.266      716-895/? D/WifiNative-wlan0 doString: SIGNAL_POLL
02-17 13:51:32.296      716-895/? D/WifiNative-wlan0 returned true
@ojw28 Does it still mean that this is a MediaExtractor issue?
While testing the demo App, I tried playing the "Dizzy" mp4 clip.
Exoplayer
On Wed, Feb 18, 2015 at 8:38 PM, ojw28 notifications@github.com wrote:
>    sei_rbsp
From: ojw28 notifications@github.com
Hi  @dhir-pratap, @ojw28  are you able to see multiple CC inside exoplayer?
2. Select Misc/Dizzy and let playback begin.
+1 For DASH
@ojw28 great news. do you have an expected timeline when release-v2 will be available?
Subtitles format which I need to support are MicroDVD (from .txt file) and SubRip (from .srt) file.
author:aml.sh multi-media team
branch name:   * jb-mr1-amlogic
cd /mnt/nfsroot/spike.liao/kk-amlogic
hostname droid09-sz
http://cdnbakmi.kaltura.com/p/243342/sp/24334200/playManifest/entryId/0_uka1msg4/flavorIds/1_vqhfu6uy,1_80sohj7p/format/applehttp/protocol/http/a.m3u8
"make": "LG",
D/ExtendedUtils Try creating ExtendedExtractor
E/QCExtractor ExtendedExtractor failed to instantiate extractor
I/ACodec DRC Mode: Dynamic Buffer Mode
@ojw28
@ojw28 thanks for advice, we will check if its possible to switch to DASH, the problem is that iOS supports only HLS.
what do you mean?
@jeoliva hmm not sure if I want it to be raw H.264 but my video experience is limited.. What I want is to be able to play a videostream from my computer to a tablet on the same LAN. I use ffmpeg to send the stream over udp (mpegts). VLC plays the stream but has too much latency for my case (~1sec), I need it to be below 500ms so I thought I'd give exoplayer a try and see if I can get that down?
Hi ojw28,
Weird Fact:
01-28 18:21:38.690    5836-6028/com.example.video E/ACodec [OMX.qcom.video.decoder.avc] ERROR(0x80001009)
java.lang.IllegalStateException
@andudo yes i have a m3u8 URL
@andudo http://www.whiteline.ir/video/5/stream
http://dash.edgesuite.net/akamai/test/caption_test/ElephantsDream/elephants_dream_480p_heaac5_1.mpd
currentWidth = hasCrop
currentHeight = hasCrop
On Fri, Jan 23, 2015 at 11:51 PM, ojw28 notifications@github.com wrote:
Log
Spurious audio timestamp (system clock mismatch): 7488223, 10332951181, 10338014549, 169853968
http://dl1.sanatisharif.ir/media/29/Hamayesh_Gosasteh_SanatiSharif_11.mp4
@ojw28 CLA signed.
@ojw28 , thank you for your answer and DASH tip.
I bookmarked a lot of code in my research, it might not make total sense now but could give you some leads/insight:
@Override
@Override
@Override
@Override
@ojw28, the code has changed per your suggestion and I moved the EQ setup into the onAudioSession method.
01-20 14:50:49.291  23147-23163/? D/ACDB-LOADER? ACDB -> ACDB_CMD_GET_AFE_COMMON_TABLE
01-20 14:50:49.291  23147-23163/? D/ACDB-LOADER? ACDB -> AUDIO_SET_AFE_CAL
01-20 14:50:49.301  23147-23163/? D/alsa_effect? snd_effect_info_create_l : Copy AFE_PORT_ID_QUATERNARY_MI2S_RX xLOUD param. param[0] = 0
01-20 14:50:51.651  11373-11470/? I/Babel? Account selfinfo retrieved: Redacted-18
01-20 14:50:51.651  11373-11470/? I/Babel? Retrieved account setting:Redacted-18
01-20 14:50:51.661  11373-11470/? I/Babel? Account sign in complete with state 102account: Redacted-18
01-20 14:50:52.171  11373-11566/? I/Babel? Account Redacted-3 matches participantId: false
01-20 14:50:52.171  11373-11566/? I/Babel? Account Redacted-18 matches participantId: true
01-20 02:22:01.886 I/MediaCodec(14095):   string componentName = "OMX.MTK.AUDIO.DECODER.AAC"
I want to play H264 live stream too, but it's not a normal format(maybe header is different,i am not sure about this).I think this means that I can't use MediaExtractor. So which samplesource should I use? Do I need to custom samplesource and trackrenderer?
Also, I want know is it support mjpeg stream?
@ojw28 ,can you give me some help? Thanks
with an underscore will cause the issue.
this.socketPort = uriPort;
throw new UnknownHostException(uri.toString());
01-13 12:24:50.307  26909-27301/com.instaradio E/ACodec signalError(omxError 0x80001001, internalError -2147483648)
java.lang.IllegalStateException
@ojw28 Let me check for you.
Codec: OMX.Exynos.avc.dec
Also, this does indeed seem to be device specific, as a test on another device allocated the large buffer on the first try.
``` Java
"http://ott-iis-cache1.altibox.net/tv_agder.isml",
``` Logcat
Remote Branch: quic/LNX.LA.3.5.2.2_rb1
+            pesPayloadReader = new MpaReader(samplePool);
+  private class MpaReader extends PesPayloadReader {
+    private long frameDurationUs;
+    @Override
+    @SuppressLint("InlinedApi")
+        mpaBuffer.skipBits(1);
+            audioSpecificConfig);
+    @Override
+      super.release();
* @return The AudioSpecificConfig.
-    return audioSpecificConfig;
+         audioSpecificConfig[0] = (byte) ((audioObjectType << 3) & 0xF8 |
+         return audioSpecificConfig;
+         audioSpecificConfig[0] = (byte) ((audioObjectType    << 3) & 0xF8 |
+         return audioSpecificConfig;
On Fri, Jun 26, 2015 at 4:22 PM, ojw28 notifications@github.com wrote:
java.lang.IllegalArgumentException
I  got the error from bugsnag, like LG-D415 same error, API 19, HUAWEI Orange Daytona API 16.
only see the log
java.lang.IllegalArgumentException
at de.robv.android.xposed.XposedBridge.main(XposedBridge.java:132)
2) URL 2 - http://sc.powergroup.com.tr:80/PowerFM/aac/128/tunein
please suggest me is it possible with Exo player
gasp. Ok, I will double check
### Google Glass (DASH) & Google Play (DASH)
### Super speed (SmoothStreaming)
- Reads the PayLoad  (Depending PMT,PES or PAT)
-  So read() is called where AdtsBuffer is filled and then readOneAacFrame() is called.
https://www.dropbox.com/s/tjsgg27rmkc9mak/aacsegmentview.png?dl=0
Lollippop.
On 16/12/2014, ojw28 notifications@github.com wrote:
Here are some waring:-
Error:-
@suresh777 Where can I get the old Exoplayer library?
I don't know if the HLS stream that comes from Brightcove is different than other HLS streams, but when trying to play a URI from Brightcove we see 1-5 seconds of video then get a IllegalStateException.
Full Exception:
I mean is looking for `m3u` enough?
@andudo Ok that's what i do know but then it doesn't work if the url is a redirection.
com.google.android.exoplayer.upstream.Loader$UnexpectedLoaderException: Unexpected NumberFormatException: Invalid double: "-PT6935S"
java.lang.IllegalStateException
java.lang.IllegalStateException
Just got the Out of Memory exception.
Here is the logcat
D/ACDB-LOADER(  186): ACDB -> send_afe_cal
E/ACodec  (26025): [OMX.qcom.video.decoder.avc] storeMetaDataInBuffers failed w/ err -2147483648
W/ACodec  (26025): do not know color format 0x7fa30c03 = 2141391875
W/ACodec  (26025): do not know color format 0x7fa30c03 = 2141391875
D/ACDB-LOADER(  186): ACDB -> send_afe_cal
E/Sensors (26188): sns_fsa_la.c(386):fsa: fflush failed, 9
E/Sensors (26188): sns_fsa_la.c(386):fsa: fflush failed, 9
Any thoughts on what might be causing this?
@ojw28 The use case is support for DVB subtitles, as described in the article @ened links to.
@ojw28 Bitmap subtitles are suboptimal for many reasons, true. I wouldn't expect any new standard to go for that solution. My impression is that it's widely used, and I couldn't talk my broadcasting customers out of requiring it for their streaming solution. I could do some research to see how widely spread it is and if new solutions are being deployed or planned, it that's useful?
With the latest ID3-parser fix, the XML data with the SMPTE-TT subtitles are sent to the player through the Id3MetadataListener interface. DemoPlayer#onId3Metadata listens for this event.
> https://github.com/notifications/unsubscribe-auth/AJ99vyXjyiOu2mL15IVgSfVg0jBod6s3ks5qbkyEgaJpZM4DCeZT
Did you take into account the mpeg-ts stream?
Did you take into account the mpeg-ts stream?
https://bugs.launchpad.net/me-tv/+bug/624781/+attachment/1520761/+files/Tiededokumentti_%20Muistia%20etsim%C3%A4ss%C3%A4%20-%20YLE%20Teema%20-%20Wed%2025%20Aug%202010%2005_31_19%20PM%20EEST.mpeg
Also make sure that the fake eia-608 track is not activated
Sergio
https://bugs.launchpad.net/me-tv/+bug/624781/+attachment/1520761/+files/Tiededokumentti_%20Muistia%20etsim%C3%A4ss%C3%A4%20-%20YLE%20Teema%20-%20Wed%2025%20Aug%202010%2005_31_19%20PM%20EEST.mpeg
Also make sure that the fake eia-608 track is not activated
Sergio
https://bugs.launchpad.net/me-tv/+bug/624781/+attachment/1520761/+files/Tiededokumentti_%20Muistia%20etsim%C3%A4ss%C3%A4%20-%20YLE%20Teema%20-%20Wed%2025%20Aug%202010%2005_31_19%20PM%20EEST.mpeg
Subtitles are working with your patches, great job! I have to wait and catch when subs are actually displayed in streams I am using, tracks are found and displayed in text selection dialog.
https://bugs.launchpad.net/me-tv/+bug/624781/+attachment/1520761/+files/Tiededokumentti_%20Muistia%20etsim%C3%A4ss%C3%A4%20-%20YLE%20Teema%20-%20Wed%2025%20Aug%202010%2005_31_19%20PM%20EEST.mpeg
are too short, and the second one have malformed TS packets,.
I'm not related to google, my private email is tresvecesseis@gmail.com
El 23 sept. 2016 7:43 p. m., "GoranNSW" notifications@github.com escribi:
El 23 sept. 2016 8:13 p. m., "GoranNSW" notifications@github.com escribi:
@tresvecesseis, does ExoPlayer crew going to include your DVB subtitles support patch into official ExoPlayer v2 branch?
@tresvecesseis, does ExoPlayer crew going to include your DVB subtitles support patch into official ExoPlayer v2 branch?
@ojw28
java.lang.IllegalStateException
All samples will be encoded as AAC streaming through .m3u8 format.  Are there other Renders/Encoders I should be looking at?
Here is a link to the post --> http://stackoverflow.com/questions/22198794/force-mediarecorder-to-produce-aac-lc
I believe that the bad samples were recorded on an Android device; I'm waiting for a response from users; and I'll update this thread when I find out.
On 27 Nov 2014 19:04, "ojw28" notifications@github.com wrote:
> On 27 Nov 2014, at 16:13, ojw28 notifications@github.com wrote:
samek
ojw28,
@sachinbhanot you resolved this problem?
@crossle
@ojw28  I think it should when invoke `release`, not free the memory, when playback again, it's will occur.
@ojw28  I used demo playback Apple single media playlist,  when press back key, invoke releasePlayer(), but the memory not free, the playback again, the memory release. but I used in my project, why not free? the only different is I used TextureView not SurfaceView
@ojw28
On 26 Nov 2014 22:21, "ojw28" notifications@github.com wrote:
On 26 Nov 2014 23:08, "ojw28" notifications@github.com wrote:
kxun, i did my testing in Android L, so it's device v21.
Unique ID                                : 251352275511766917962423227176409075865 (0xBD18AFF96EE4BCA592507D6EF40F9099)
Overall bit rate mode                    : Variable
Format settings, Matrix                  : Custom
Bit rate mode                            : Variable
Compression mode                         : Lossy
Forced                                   : No
Bit rate mode                            : Constant
Forced                                   : No
Bit rate mode                            : Variable
Compression mode                         : Lossless / Lossy
Forced                                   : No
Codec ID                                 : A_AC3
Bit rate mode                            : Constant
Compression mode                         : Lossy
Title                                    : AC3
Forced                                   : No
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Codec ID                                 : A_AAC
Compression mode                         : Lossy
Title                                    : AACLC
Forced                                   : No
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Format profile                           : HE-AAC / LC
Codec ID                                 : A_AAC
Compression mode                         : Lossy
Title                                    : AACHE
Forced                                   : No
Format                                   : FLAC
Codec ID                                 : A_FLAC
Bit rate mode                            : Variable
Title                                    : FLAC
Forced                                   : No
Codec ID                                 : A_MS/ACM / 163
Forced                                   : No
Codec ID                                 : A_MS/ACM / 162
Forced                                   : No
Codec ID                                 : A_VORBIS
Bit rate mode                            : Variable
Compression mode                         : Lossy
Forced                                   : No
(tried on Nexus 7, HTC one Max, Philips TV AND1E)
VOD video playlist (MASTER) http://zate.je/hls/index.m3u8
As it seams to me the problem is: when you seek over the #EXT-KEY which has the same key but different IV it doesn't play?
@ojw28 Thanks very much!
After resolving this exception:
specifically gradle plugin 0.14.4 will not recognize the `runProguard` property
Tested on ExoPlayer dev-hls HEAD (faf196a581520f1f3164388bb25a68c90446c897).
The two streams mentioned below have an issue where closed captions are unreadable.
@andudo Great! They are intended to be displayed at different areas of the screen, I guess. Maybe they flash "CNN Situation Room" at the top of screen during commercials every now and then to tell the viewer what  program is on at this time.
@jlacivita Yes, and the API could expose mimetype or subtitle type together with the other TextTrack information. This way the API user can implement his or her own logic for subtitle preferences.
The strange thing is:
But it is still a BUG !
Please re-open this issue as a BUG,
BUT when this Exception appends, we can either:
Exception:
+        chromaFormatIdc = bitArray.readUnsignedExpGolombCodedInt();
@ojw28  good news, work fine on MTK chipset devices. Thanks.
On 9 Dec 2014 01:53, "ojw28" notifications@github.com wrote:
Thanks andudo,
"uid:misc:pbs",
false,
false)
Hi ojw28,
- ALL of my content is encrypted.
- Also from the first fragment I see that the flags indicate that the content is encrypted:
Also, How can I create dash which is DRM encrypted BUT the first ~8 seconds aren't?
here is the log.
11-06 18:35:52.628: E/ACRA(26172): Jio On-Demand fatal error : null
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.parser.ts.TsExtractor$PesPayloadReader.addSample(TsExtractor.java:506)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.parser.ts.TsExtractor$AdtsReader.readOneAacFrame(TsExtractor.java:698)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.parser.ts.TsExtractor$AdtsReader.read(TsExtractor.java:637)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.parser.ts.TsExtractor$PesReader.readPES(TsExtractor.java:459)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.parser.ts.TsExtractor.consumeUntil(TsExtractor.java:138)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.hls.HlsSampleSource.prepare(HlsSampleSource.java:102)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.TrackRenderer.prepare(TrackRenderer.java:117)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.ExoPlayerImplInternal.incrementalPrepareInternal(ExoPlayerImplInternal.java:273)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.ExoPlayerImplInternal.handleMessage(ExoPlayerImplInternal.java:201)
11-06 18:35:52.628: E/ACRA(26172):  at android.os.Handler.dispatchMessage(Handler.java:98)
11-06 18:35:52.628: E/ACRA(26172):  at android.os.Looper.loop(Looper.java:146)
11-06 18:35:52.628: E/ACRA(26172):  at android.os.HandlerThread.run(HandlerThread.java:61)
11-06 18:35:52.628: E/ACRA(26172):  at com.google.android.exoplayer.ExoPlayerImplInternal$1.run(ExoPlayerImplInternal.java:110)
07-01 06:03:39.625: D/MyApp(3096): &&& onHTTPRequestError path = http://radiocontinu.ic-stream.nl:7062/; useFFmpegPlayerfalse
@ojw28 Hey i am facing the Similar issue.
11-05 10:38:46.775 D/MobileDataStateTracker(  766): hipri: Received state=DISCONNECTED, old=DISCONNECTED, reason=dataEnabled
11-05 10:38:46.915 D/MobileDataStateTracker(  766): hipri: Received state=CONNECTING, old=DISCONNECTED, reason=dataEnabled
11-05 10:38:46.935 D/MobileDataStateTracker(  766): hipri: Received state=CONNECTED, old=CONNECTING, reason=dataEnabled
11-05 10:38:46.935 D/ConnectivityService(  766): ConnectivityChange for mobile_hipri: CONNECTED/CONNECTED
11-05 10:38:49.925 I/NetworkMonitor(30977): type=mobile subType=LTE reason=connected isConnected=true
11-05 10:38:50.175 E/ConnectivityService(  766): Unexpected mtu value: android.net.wifi.WifiStateTracker@42d80d28
11-05 10:38:56.475 D/MobileDataStateTracker(  766): hipri: Received state=DISCONNECTED, old=CONNECTED, reason=dataDisabled
11-05 10:38:56.475 D/ConnectivityService(  766): ConnectivityChange for mobile_hipri: DISCONNECTED/DISCONNECTED
Yes, contents of the ContentProtection element is scheme specific.
The PSSH box contents is also scheme specific.
Alternatively perhaps DRM scheme specific Java code could parse the ContentProtection element and pass the relevant data through the getKeyRequest method.
Note that the mspr:pro element is scheme specific. So there'll need to be some MPD parser callback into the app that's scheme specific, or perhaps ExoPlayer would have built in knowledge of various schemes.
Here's a summary about Marlin DRM: http://en.wikipedia.org/wiki/Marlin_(DRM)
Note that the DRM modules are quite capable of XML parsing since usually their various documents are XML formatted. So I am not concerned with the DRM module having to parse XML, rather having scheme specific bits in the library makes it less adaptable to other schemes.
Here's an example of a Marlin protected DASH video:
<mas:MarlinContentIds>
<mas:MarlinContentId>
urn:marlin:kid:b366360da82e9c6e0b0984002a362cf2
</mas:MarlinContentId>
</mas:MarlinContentIds>
BTW, Marlin specs are free at http://www.marlin-community.com/ (requires online free registration.)
I am trying to get ExoPlayer to work with GoPro camera through wifi connection. IP address for cameras .m3u8 file is "http://10.5.5.9:8080/live/amba.m3u8". With standard Android MediaPlayer this seems to work (altough MediaPlayer itself does not support streaming properly and stutters all the time). When trying to connect to that same address with ExoPlayer, I get lots of different errors that all seem to point malformed URL.
and sometimes
+ "amba.m3u8"
- "bipbop_4x3_variant.m3u8", DemoUtil.TYPE_HLS_MASTER, false, false)
Just a note regarding GoPro's live preview stream. Only Hero2/3/3+ support HLS at the given endpoint (http://10.5.5.9:8080/live/amba.m3u8).
- Hero2: HLS
- Hero3: HLS
- Hero4: UDP only
i am trying other approach
@ojw28  BTW, when HLS live streaming, player network so slowly, skip many ts, when parse  `startTimeUs` use the before load ts. How about the buffer ?
@ojw28 I am working on two kind of switching , one is bit rate , one is audio , for audio switching , user may stay in the lower bit rate (to save some bandwidth ~ may be) when doing the switch ~ for high bitrate , the queue size is about 20 ~ which takes 10 sec to switch ~
@ojw28  , Yes , I made classes for VOD , DVR and Live in my test, can the queueSize value be changed on the fly ? eg. when doing a switch , I discard the chunks in the buffer , after the switch is completed , i set the queuesize back to normal ?
RangedUri initialization = null;
Hello , I am using the latest dev-hls to test a live stream from wowza server , the stream has play ok on a safari. I played back VOD stream from Wowza have no problem.
# EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=1343647,CODECS="avc1.77.31,mp4a.40.2",RESOLUTION=1280x720
403 Forbidden, please check your stream server, or add User-Agent
Frank
private Track track;
The solution is the following simple modification:
index de5fc9b..ab89656 100644
- moov
- moof
- mdat
- moof
- mdat
with 'moof' and 'mdat' repeated many times...
I/dalvikvm( 7613):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1112)
I/dalvikvm( 7613):
But SurfaceTexture is not a Surface they are a separate class hierarchy. Will it still work?
10-28 12:17:27.508  20265-21207/com.liveyap.timehut E/SEC_COMP_REGS Path & libName : /system/lib/omx/libOMX.SEC.AVC.Decoder.so
10-28 12:17:27.528  20265-21207/com.liveyap.timehut E/SEC_COMP_REGS Path & libName : /system/lib/omx/libOMX.SEC.M4V.Decoder.so
10-28 12:17:27.548  20265-21207/com.liveyap.timehut E/SEC_COMP_REGS Path & libName : /system/lib/omx/libOMX.SEC.WMV.Decoder.so
Rotation                       : 90
Hi @IanDBird @ryango
Thanks @ojw28 , you complete the solution.
On Tue, Sep 1, 2015 at 3:46 PM, ojw28 notifications@github.com wrote:
@Override
@andudo Thanks four your answer.
I am using this code:
Could I use TsChunk.java for my purpose? In that case how can use it?
This should be an out of the box feature.
@ojw28  would it be easier, when i create a plain UDP connection? But then this would be a point-to-point connection and you need to pass me an ip. Where is the depacketization process in exoplayer happening?
UDP is much more important for me then RTSP right now. Any Chance getting the UDP Data source before friday? I can test it as well before it goes to master and give some feedback.
Somehow i am getting an Exception "Unexpected Exception loading stream"
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
java.lang.IllegalArgumentException
On 18 Dec 2015 11:23, "algrid" notifications@github.com wrote:
@ojw28 Do you have a demo for mpeg2ts over UDP (test case for UdpDataSource)?
Why? Is that possible somehow to increase seek spped?
@fougere-mike Hi, I am new to this HLS field and I have a question. Would it be possible to have like a 24 hours window? Also if I understand right, there is no DVR functionnality yet in ExoPlayer, so if I have a m3u8 playlist I won't be able to play it or seek in it.
@ojw28 hey, any update on this?
Hey @ojw28, any update on this?
Great. Thanks for replying @AquilesCanta. Can you give us rough idea, when we expect it?
@AquilesCanta Thanks, this is really needed.
@AquilesCanta Waiting for it, hope to have it functional very soon.
@AquilesCanta
Will the updated work on this include using EXT-X-PROGRAM-DATE-TIME ?
On 12 Dec 2016 6:44 pm, "xbezdeka" <notifications@github.com> wrote:
Below is a log excerpt:
http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8
![garbled_video](https://cloud.githubusercontent.com/assets/222589/4684494/14600bcc-5631-11e4-9894-a39f3727ad62.png)
Hitesh
@ojw28 @andudo
any ideas.
Hitesh
b) Just for ssl this seems like too much of a gain, is this just an 'abnormality' that is perhaps device/ISP specific?
@ojw28 How about this strategy for ExoPlayer: implement support for multi-audio in HLS only for the case with separate downloads. The case with multi-audio in one TS is an older solution and has a major drawback, that it increases the effective bitrate of the stream. For these reasons I expect that this case is not as important to most ExoPlayer-HLS users.
I would be tempted to say +1 to @perchrh suggestion, if playlist contains EXT-X-MEDIA, simply ignore any audio in the TS.  If the (video) TS still contains audio data, it could be considered a server issue and should be fixed there by re-encoding the streams?
@ojw28 Hey Guys, any update or any result after test streams  about Multi-Audio HLS support ?
https://github.com/google/ExoPlayer/compare/master...ajmfulcher:alternative_audio?expand=1
`if (!preferAlternativeAudio) {
`if (preferAlternativeAudio) {
Thanks @ojw28 will do it now.
java.lang.IllegalArgumentException
Audio
Mode extension                           : Intensity Stereo + MS Stereo
Bit rate mode                            : Constant
Compression mode                         : Lossy
unfortunately mpeg 2.5 is a non standard format and I dont have specs.
MacBook-Pro:MP3 tests sergio$ mediainfo movistar_fubol_hd_13.1Mbps.mp1l3.ts
Audio
Bit rate mode                            : Constant
Compression mode                         : Lossy
Delay relative to video                  : -804ms
MacBook-Pro:MP3 tests sergio$ mediainfo movistar_fubol_hd_13.1Mbps.mp2l3.ts
Audio
Bit rate mode                            : Constant
Compression mode                         : Lossy
Delay relative to video                  : -827ms
This is the encrypted stream I've used for testing: http://playertest.longtailvideo.com/adaptive/oceans_aes/oceans_aes.m3u8
Let me know if you need more encrypted test streams!
Do you have any test link for cea-608 , cea-708 or webvtt ?
Thanks @andudo , let me test these links.
http://cdnbakmi.kaltura.com/p/243342/sp/24334200/playManifest/entryId/0_uka1msg4/flavorIds/1_vqhfu6uy,1_80sohj7p/format/applehttp/protocol/http/a.m3u8
@Override
Ninja Edit -
Thanks @andudo. This was definitely a quick hack just to be see if it worked out for us, didn't go through all the scenarios. Thanks for the info though, it's appreciated.
Test stream that has this issue, EAC-608 format:
@jlacivita I created PR after this comment #1234
Also, I've only observed this on certain KitKat devices (see table below).
So do you know of  a way to detect that this issue is happening?
if("APQ8064".equals(board) || "MSM8960".equals(board) || "MSM8930".equals(board)){
On Thu, 11 Feb 2016, 09:30 Anshumansharma12 notifications@github.com
You can integrate any supported codec which is accessible through MediaCodec or you can implement your own.
El 7 oct. 2016 9:48 p. m., "dzualeks" notifications@github.com escribi:
prefix); AAC written as ADTS frames.
El 8 oct. 2016 8:42 a. m., "dzualeks" notifications@github.com escribi:
tresvecesseis, thank you again.
On Sat, 8 Oct 2016 at 18:56 tresvecesseis notifications@github.com wrote:
> https://github.com/notifications/unsubscribe-auth/ABHRsYjWu8jEmtidLaWc9lQUA_4G3dPtks5qx9lLgaJpZM4CmVbp
On Jan 7, 2017 6:50 AM, "tresvecesseis" <notifications@github.com> wrote:
> <https://github.com/notifications/unsubscribe-auth/AEIBREANgSibpcbbhRnkzBBC21bezHCtks5rP3v8gaJpZM4CmVbp>
@ojw28 would you be interested in the implementations of rtsp, rtcp and rtp that @tresvecesseis has available? Perhaps with rtsp, probably being the most popular, being considered first.
I/DEBUG   ( 1826): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   ( 1826):     r4 518aef30  r5 4fec51f0  r6 00000000  r7 ffffffed
I/DEBUG   ( 1826):     d2  0000000000000023  d3  0000000000001054
I/DEBUG   ( 1826):     d4  0000000000001046  d5  000000000000005d
I/DEBUG   ( 1826):     d6  0000000080000000  d7  0000ac443f19999a
I/DEBUG   ( 1826):     d8  0000000000000000  d9  0000000000000000
I/DEBUG   ( 1826):     d10 0000000000000000  d11 0000000000000000
I/DEBUG   ( 1826):     d12 0000000000000000  d13 0000000000000000
I/DEBUG   ( 1826):     d14 0000000000000000  d15 0000000000000000
I/DEBUG   ( 1826):     d18 000000000000d227  d19 0000000000000000
I/DEBUG   ( 1826):     d20 0000000000000000  d21 0000000000000000
I/DEBUG   ( 1826):     d22 0000000000000000  d23 0000000000000000
I/DEBUG   ( 1826):     d24 3ff0000000000000  d25 3ff0000000000000
I/DEBUG   ( 1826):     d28 0000000000000000  d29 3ff0000000000000
I/DEBUG   ( 1826):     d30 3ff0000000000000  d31 3ff0000000000000
I/DEBUG   ( 1826):     scr 20000011
I/DEBUG   ( 1826):
I/DEBUG   ( 1826): backtrace:
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):          541b3bc0  518979f8
I/DEBUG   ( 1826):          541b3bd4  54ee7060
I/DEBUG   ( 1826):          541b3bd8  541b3c04
I/DEBUG   ( 1826):          541b3be0  1e70000d
I/DEBUG   ( 1826):          541b3bf0  1fa00005
I/DEBUG   ( 1826):          541b3bf8  df0027ad
I/DEBUG   ( 1826):          541b3bfc  00000000
I/DEBUG   ( 1826):          541b3c0c  518aef30
I/DEBUG   ( 1826):     #01  541b3c18  518aef30
I/DEBUG   ( 1826):          541b3c1c  518aef30
I/DEBUG   ( 1826):          541b3c20  541b3c50
I/DEBUG   ( 1826):     #02  541b3c28  518ad5f0
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     541b3c40 54ee7060 4feaa1cb 00000000 00000000  `p.T...O........
I/DEBUG   ( 1826):     541b3c70 53dcbd50 40836f34 00000000 40861b03  P..S4o.@.......@
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     40103c64 220cb12b 435a3004 f7fe3104 4620eba2  +..".0ZC.1.... F
I/DEBUG   ( 1826):     40103c74 4770bd10 6803b508 4293680a b163d10b  ..pG...h.h.B..c.
I/DEBUG   ( 1826):     40103c94 2000bf38 2000bd08 2001bd08 b508bd08  8.. ... ... ....
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     4fea9a60 4620eb7c eb90f7fe bd704620 0001b7d0  |. F.... Fp.....
I/DEBUG   ( 1826):     4fea9a70 4604b510 ffcaf7ff f7fe4620 4620eb8c  ...F.... F.... F
I/DEBUG   ( 1826):     4fea9a80 0000bd10 41f0e92d 68084604 4615460e  ....-..A.F.h.F.F
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     518aef10 2e637661 00636564 00000018 72652d74  avc.dec.....t-er
I/DEBUG   ( 1826):     518aef20 00726f72 00636564 00000028 0000002b  ror.dec.(...+...
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     4fec51d0 00000000 00000000 4fea96d3 4fea96d7  ...........O...O
I/DEBUG   ( 1826):     4fec51f0 4fea9a0d 4fea9a71 40103c77 40103c77  ...Oq..Ow<.@w<.@
I/DEBUG   ( 1826):     4fec5210 4feaaafd 4feaab1d 4feaa985 4feaa985  ...O...O...O...O
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     518afdf0 612e656c 6277726d 636e652e 7265646f  le.amrwb.encoder
I/DEBUG   ( 1826):     518afe20 00000018 00000012 00040184 0b000005  ................
I/DEBUG   ( 1826):     518afe30 00000a09 0000002b 00000009 544a8000  ....+.........JT
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     23ffffe0 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   ( 1826):     23fffff0 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   ( 1826):     24000000 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   ( 1826):     24000010 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   ( 1826):     24000020 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     51897a08 421fac60 54ee7060 541b3da8 00000000  `..B`p.T.=.T....
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     541b3cb4 400dea6c 00000000 5305285a 53dcbd38  l..@....Z(.S8..S
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     4fec5b30 5194e9f5 404e7d6d 5194ed41 5194ea7d  ...Qm}N@A..Q}..Q
I/DEBUG   ( 1826):     4fec5b40 5194ea39 5194e3d9 5194e935 5194e835  9..Q...Q5..Q5..Q
I/DEBUG   ( 1826):     4fec5b50 5194e799 5194e62d 5194e5c5 5194e56d  ...Q-..Q...Qm..Q
I/DEBUG   ( 1826):
I/DEBUG   ( 1826): memory near sp:
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     5194e9d4 bf0083fe 71756549 0006a712 0005e8b4  ....Ieuq........
I/DEBUG   ( 1826):     5194e9e4 0006a82a 0005be68 0005a1be 0006aa70  *...h.......p...
I/DEBUG   ( 1826):     5194e9f4 6885b537 60c3f44f ee62f7d6 462a490c  7..hO..`..b..I*F
I/DEBUG   ( 1826):
I/DEBUG   ( 1826):     4fea9a00 0001426a 00014257 00014242 4604b570  jB..WB..BB..p..F
I/DEBUG   ( 1826):     4fea9a10 26004d16 3508447d 69806005 ec08f7fe  .M.&}D.5.`.i....
I/DEBUG   ( 1826):     4fea9a40 f104b118 f7fe0118 6960eb88 f104b118  ..........`i....
builtUri, null, 1);
builtUri, null, 1);
I would like to have a proguard example as well, would be great!
So what would be the right way?
@Override
@hiteshgupta33 - Just to clarify you're point, the `MediaPlayer` does handle anamorphic content, but it does report it's Width and Height ignoring the size of the individual pixels, right? This means that if you're scaling the video and using those reported values, it's very difficult it compute the correct size maintaining the original aspect ratio of the video.
Yeah, although that screenshot / distortion suggests a bug in the HLS implementation, since the underlying Media API can handle it (as shown by the native `MediaPlayer` working). I can try and play anamorphic DASH content here and see if that results in any rendering artefacts, if that's of any use?
@IanDBird  yeah eventually we have to shift to DASH. It will be of great use
Yeah, the underlying MediaPlayer doesn't report the width/height for anamorphic content, so with out knowing ahead of time, it will always be in the wrong aspect ratio (typically 4:3 instead of 16:9).  This has been a long standing issue with the built in MediaPlayer.
As far as samples for streams with TTML, there is http://streams.smooth.vertigo.com/elephantsdream/Elephants_Dream_1024-h264-st-aac.ism/manifest - not sure how free that is, but it is accessible (and has been for quite a while).
I have tested the link "http://streams.smooth.vertigo.com/elephantsdream/Elephants_Dream_1024-h264-st-aac.ism/manifest" .
Maybe I am doing something wrong but when you said the MediaFormat issue has been solved, did you mean that it should work on the dev branch as is?  I just built from a fresh clone and it fails with the same issue.
On Sep 21, 2014 10:16 AM, "ojw28" notifications@github.com wrote:
} catch (MalformedURLException e)
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
@Override
e,what do you mean "wont work too well"??
@Override
// the TODO.
} catch (InterruptedException e) {
when execute at main thread,'wait();' may cause ANR in some rom.
: "Crossle Song";notifications@github.com;
: "ojw28";notifications@github.com;
but my device is android 4.1 not 4.4,  how can i build this project?
: "ojw28";notifications@github.com;
: "ojw28";notifications@github.com;
apk19rom
miui 3.Xandroid 4.1MediaCodecUtil.getDecoderInfo()
lol
demoapk
apkgalax 9006
apk19rom
miui 3.Xandroid 4.1MediaCodecUtil.getDecoderInfo()
http://central.sonatype.org/pages/ossrh-guide.html
repositories {
maven {
url  "http://dl.bintray.com/google/exoplayer"
repositories {
@zayass, second that!
@zayass thank you, don't know why they still not update README.
@VAdaihiep maybe someone should make a pull request
@ojw28 with audio
It contains bug that getCurrentPositionUs returns larger/smaller value than expected if speed is up/down.
@mikumi
We need to resampling audio raw data.
+1 @Ood-Tsen any updates? Would love to submit a PR but have no idea where to start.
@ojw28 On that note, is there anything planned to support video speedup on versions below M as well?
Thanks @ojw28
Stuff like having (String, Object) as method signature and then casting is quite error prone. Maybe just make that an implementation detail and provide a helper method like setVolume(float) and then delegate this to handle message?
@ojw28
@0xABC it can work on > api 17 .
@ojw28  I think it's not the point.We just need this function.
@ojw28 @andrewlewis If you could answer my question I would be really, really grateful. Deadlines, etc..
ojw commented your solution with
Galaxy S4 (There are some discontinuities)
Ok, so I took one of the sample MP4s (http://html5demos.com/assets/dizzy.mp4) and created a shorten version (http://goo.gl/MtUDEj). I was hoping that this would demonstrate the issue, but playback works fine. I guess that the main difference between this and the test files i'm using, is that my addresses redirect from HTTP to HTTPS then back to HTTP. Could this potentially be causing the issue?
@ojw28 - Are there any plans to support AC3 in time for the release of Android L? Also, is the lack of support purely a parsing limitation (at the moment) or are there likely to be various things that need implementing further down the pipeline?
@ojw28 - Have you had any more time to look into this?
@ojw28 Did you mean to close this issue?
- MIME (audio/ac3)
- MediaCrypto (null, since no DRM is applied)
Looks like two things are wrong here...
The exoplayer also did not appear to work for API 9 and 10 devices at all.
Thanks @ojw28.
On Fri, Aug 1, 2014 at 11:05 AM, ojw28 notifications@github.com wrote:
ExoPlayer don't want play my flv file http://master255.org/res//B/Black Eyed Peas/black eyed peas-My Humps.flv
when i play my file http://master255.org/res/%D0%9A%D0%BB%D0%B8%D0%BF%D1%8B/B/Black%20Eyed%20Peas/black%20eyed%20peas-My%20Humps.flv
I have error:
@crossle !! put legs to hands and tell me how to fix your project bug! https://github.com/yixia/VitamioBundle/issues/183
@ojw28 it's very bad! Big part of my collection can't play through exoplayer.
07-22 15:02:16.533  15430-15679/com.google.android.exoplayer.demo I/ACodec DRC Mode: Port Reconfig Mode
07-22 15:02:16.633  15430-15659/com.google.android.exoplayer.demo V/AudioTrack createTrack_l() output 2 afLatency 160
07-22 15:02:27.983  15430-15659/com.google.android.exoplayer.demo V/AudioTrack createTrack_l() output 2 afLatency 160
07-22 15:02:28.133  15430-15659/com.google.android.exoplayer.demo V/AudioTrack createTrack_l() output 2 afLatency 160
@Override
I would link an example of the problematic MP4, but I just need to check with someone first that it's okay to share.
b=AS:1493
a=fmtp:96 profile-level-id=42C01E; packetization-mode=1; sprop-parameter-sets=Z0LAHtkAtCn5//DiEONxAAADAfQAAF2yDxYuSA==,aMuPIA==
b=AS:64
a=fmtp:97 profile-level-id=41; config=1190; streamType=5; mode=AAC-hbr; objectType=64; sizeLength=13; indexLength=3; indexDeltaLength=3
"265502.mp4": sdpText = b=AS:1557
- shoehorn audio support.
HLS support would be awesome
@crossle I was a bit worried to add a big dependency such as ffmpeg requiring jni and stuff but I guess if it works it'll be more efficient than java.
JL
A side question - what are your thoughts on supporting multi-audio?  E.g. the EXT-X-MEDIA tags?
As for the multi-audio, I think this is needed as well. Not on top of my priorities as of now but definitely something needed.
@hiteshgupta33, take a look at HLSRendererBuilder, HLSExtractor, HLSSampleSource, and HLSPlaylist.
audio.  It doesn't happen all the time though so it's kinda weird.
@akavrt you can try 981d355b773419c2ae8b7514ec64c34105b70d94 for the seek issue. It should be a bit better.
"When using stream alternates, it is important to bear the following considerations in mind:
@andudo What i meant was will you use what @martinbonnin has done already or not.
@andudo, @martinbonnin's branch has been a life saver for the project I was working on.  I hope that at least some of it will be useful for the HLS support that you plan on adding!
@andudo Can you please add the support for mp3 audio in live hls streams ?
@andudo OOM error
http://dash.edgesuite.net/digitalprimates/fraunhofer/480p_video/heaac_2_0_with_video/ElephantsDream/elephants_dream_480p_heaac2_0.mpd
NB:  I'm testing on KitKat
Sorry for the misleading comment
